"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const require$$0$2=require("crypto"),require$$0$3=require("util"),stream=require("stream"),require$$1=require("path"),require$$3=require("http"),require$$4=require("https"),require$$0$4=require("url"),require$$1$1=require("fs"),require$$4$1=require("assert"),require$$1$2=require("tty"),require$$0$5=require("os"),zlib$4=require("zlib"),require$$3$1=require("buffer"),EventEmitter=require("events"),_interopDefaultLegacy=e=>e&&typeof e=="object"&&"default"in e?e:{default:e};function _mergeNamespaces(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const c in r)if(c!=="default"&&!(c in e)){const d=Object.getOwnPropertyDescriptor(r,c);d&&Object.defineProperty(e,c,d.get?d:{enumerable:!0,get:()=>r[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const require$$0__default=_interopDefaultLegacy(require$$0$2),require$$0__default$1=_interopDefaultLegacy(require$$0$3),stream__default=_interopDefaultLegacy(stream),require$$1__default=_interopDefaultLegacy(require$$1),require$$3__default=_interopDefaultLegacy(require$$3),require$$4__default=_interopDefaultLegacy(require$$4),require$$0__default$2=_interopDefaultLegacy(require$$0$4),require$$1__default$1=_interopDefaultLegacy(require$$1$1),require$$4__default$1=_interopDefaultLegacy(require$$4$1),require$$1__default$2=_interopDefaultLegacy(require$$1$2),require$$0__default$3=_interopDefaultLegacy(require$$0$5),zlib__default=_interopDefaultLegacy(zlib$4),require$$3__default$1=_interopDefaultLegacy(require$$3$1),EventEmitter__default=_interopDefaultLegacy(EventEmitter);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){var t=e.default;if(typeof t=="function"){var n=function(){return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var c=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,c.get?c:{enumerable:!0,get:function(){return e[r]}})}),n}var randombytes=require$$0__default.default.randomBytes,randomBytes=randombytes,UID_LENGTH=16,UID=generateUID(),PLACE_HOLDER_REGEXP=new RegExp('(\\\\)?"@__(F|R|D|M|S|A|U|I|B|L)-'+UID+'-(\\d+)__@"',"g"),IS_NATIVE_CODE_REGEXP=/\{\s*\[native code\]\s*\}/g,IS_PURE_FUNCTION=/function.*?\(/,IS_ARROW_FUNCTION=/.*?=>.*?/,UNSAFE_CHARS_REGEXP=/[<>\/\u2028\u2029]/g,RESERVED_SYMBOLS=["*","async"],ESCAPED_CHARS={"<":"\\u003C",">":"\\u003E","/":"\\u002F","\u2028":"\\u2028","\u2029":"\\u2029"};function escapeUnsafeChars(e){return ESCAPED_CHARS[e]}function generateUID(){for(var e=randomBytes(UID_LENGTH),t="",n=0;n<UID_LENGTH;++n)t+=e[n].toString(16);return t}function deleteFunctions(e){var t=[];for(var n in e)typeof e[n]=="function"&&t.push(n);for(var r=0;r<t.length;r++)delete e[t[r]]}var serializeJavascript=function e(t,n){n||(n={}),(typeof n=="number"||typeof n=="string")&&(n={space:n});var r=[],c=[],d=[],g=[],o=[],v=[],x=[],E=[],k=[],S=[];function N(O,V){if(n.ignoreFunction&&deleteFunctions(V),!V&&V!==void 0)return V;var z=this[O],U=typeof z;if(U==="object"){if(z instanceof RegExp)return"@__R-"+UID+"-"+(c.push(z)-1)+"__@";if(z instanceof Date)return"@__D-"+UID+"-"+(d.push(z)-1)+"__@";if(z instanceof Map)return"@__M-"+UID+"-"+(g.push(z)-1)+"__@";if(z instanceof Set)return"@__S-"+UID+"-"+(o.push(z)-1)+"__@";if(z instanceof Array){var W=z.filter(function(){return!0}).length!==z.length;if(W)return"@__A-"+UID+"-"+(v.push(z)-1)+"__@"}if(z instanceof URL)return"@__L-"+UID+"-"+(S.push(z)-1)+"__@"}return U==="function"?"@__F-"+UID+"-"+(r.push(z)-1)+"__@":U==="undefined"?"@__U-"+UID+"-"+(x.push(z)-1)+"__@":U==="number"&&!isNaN(z)&&!isFinite(z)?"@__I-"+UID+"-"+(E.push(z)-1)+"__@":U==="bigint"?"@__B-"+UID+"-"+(k.push(z)-1)+"__@":V}function L(O){var V=O.toString();if(IS_NATIVE_CODE_REGEXP.test(V))throw new TypeError("Serializing native function: "+O.name);if(IS_PURE_FUNCTION.test(V)||IS_ARROW_FUNCTION.test(V))return V;var z=V.indexOf("("),U=V.substr(0,z).trim().split(" ").filter(function(Z){return Z.length>0}),W=U.filter(function(Z){return RESERVED_SYMBOLS.indexOf(Z)===-1});return W.length>0?(U.indexOf("async")>-1?"async ":"")+"function"+(U.join("").indexOf("*")>-1?"*":"")+V.substr(z):V}if(n.ignoreFunction&&typeof t=="function"&&(t=void 0),t===void 0)return String(t);var P;return n.isJSON&&!n.space?P=JSON.stringify(t):P=JSON.stringify(t,n.isJSON?null:N,n.space),typeof P!="string"?String(P):(n.unsafe!==!0&&(P=P.replace(UNSAFE_CHARS_REGEXP,escapeUnsafeChars)),r.length===0&&c.length===0&&d.length===0&&g.length===0&&o.length===0&&v.length===0&&x.length===0&&E.length===0&&k.length===0&&S.length===0?P:P.replace(PLACE_HOLDER_REGEXP,function(O,V,z,U){if(V)return O;if(z==="D")return'new Date("'+d[U].toISOString()+'")';if(z==="R")return"new RegExp("+e(c[U].source)+', "'+c[U].flags+'")';if(z==="M")return"new Map("+e(Array.from(g[U].entries()),n)+")";if(z==="S")return"new Set("+e(Array.from(o[U].values()),n)+")";if(z==="A")return"Array.prototype.slice.call("+e(Object.assign({length:v[U].length},v[U]),n)+")";if(z==="U")return"undefined";if(z==="I")return E[U];if(z==="B")return'BigInt("'+k[U]+'")';if(z==="L")return'new URL("'+S[U].toString()+'")';var W=r[U];return L(W)}))};function makeMap(e,t){const n=Object.create(null),r=e.split(",");for(let c=0;c<r.length;c++)n[r[c]]=!0;return t?c=>!!n[c.toLowerCase()]:c=>!!n[c]}const GLOBALS_WHITE_LISTED="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",isGloballyWhitelisted=makeMap(GLOBALS_WHITE_LISTED);function normalizeStyle(e){if(isArray$8(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],c=isString$3(r)?parseStringStyle(r):normalizeStyle(r);if(c)for(const d in c)t[d]=c[d]}return t}else{if(isString$3(e))return e;if(isObject$6(e))return e}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*.*?\*\//gs;function parseStringStyle(e){const t={};return e.replace(styleCommentRE,"").split(listDelimiterRE).forEach(n=>{if(n){const r=n.split(propertyDelimiterRE);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function stringifyStyle(e){let t="";if(!e||isString$3(e))return t;for(const n in e){const r=e[n],c=n.startsWith("--")?n:hyphenate(n);(isString$3(r)||typeof r=="number")&&(t+=`${c}:${r};`)}return t}function normalizeClass(e){let t="";if(isString$3(e))t=e;else if(isArray$8(e))for(let n=0;n<e.length;n++){const r=normalizeClass(e[n]);r&&(t+=r+" ")}else if(isObject$6(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function normalizeProps(e){if(!e)return null;let{class:t,style:n}=e;return t&&!isString$3(t)&&(e.class=normalizeClass(t)),n&&(e.style=normalizeStyle(n)),e}const HTML_TAGS="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",SVG_TAGS="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",VOID_TAGS="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",isHTMLTag=makeMap(HTML_TAGS),isSVGTag=makeMap(SVG_TAGS),isVoidTag=makeMap(VOID_TAGS),specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs),isBooleanAttr=makeMap(specialBooleanAttrs+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected");function includeBooleanAttr(e){return!!e||e===""}const unsafeAttrCharRE=/[>/="'\u0009\u000a\u000c\u0020]/,attrValidationCache={};function isSSRSafeAttrName(e){if(attrValidationCache.hasOwnProperty(e))return attrValidationCache[e];const t=unsafeAttrCharRE.test(e);return t&&console.error(`unsafe attribute name: ${e}`),attrValidationCache[e]=!t}const propsToAttrMap={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},escapeRE=/["'&<>]/;function escapeHtml(e){const t=""+e,n=escapeRE.exec(t);if(!n)return t;let r="",c,d,g=0;for(d=n.index;d<t.length;d++){switch(t.charCodeAt(d)){case 34:c="&quot;";break;case 38:c="&amp;";break;case 39:c="&#39;";break;case 60:c="&lt;";break;case 62:c="&gt;";break;default:continue}g!==d&&(r+=t.slice(g,d)),g=d+1,r+=c}return g!==d?r+t.slice(g,d):r}const commentStripRE=/^-?>|<!--|-->|--!>|<!-$/g;function escapeHtmlComment(e){return e.replace(commentStripRE,"")}function looseCompareArrays(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=looseEqual(e[r],t[r]);return n}function looseEqual(e,t){if(e===t)return!0;let n=isDate$2(e),r=isDate$2(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=isSymbol$4(e),r=isSymbol$4(t),n||r)return e===t;if(n=isArray$8(e),r=isArray$8(t),n||r)return n&&r?looseCompareArrays(e,t):!1;if(n=isObject$6(e),r=isObject$6(t),n||r){if(!n||!r)return!1;const c=Object.keys(e).length,d=Object.keys(t).length;if(c!==d)return!1;for(const g in e){const o=e.hasOwnProperty(g),v=t.hasOwnProperty(g);if(o&&!v||!o&&v||!looseEqual(e[g],t[g]))return!1}}return String(e)===String(t)}function looseIndexOf(e,t){return e.findIndex(n=>looseEqual(n,t))}const toDisplayString=e=>isString$3(e)?e:e==null?"":isArray$8(e)||isObject$6(e)&&(e.toString===objectToString$3||!isFunction$2(e.toString))?JSON.stringify(e,replacer,2):String(e),replacer=(e,t)=>t&&t.__v_isRef?replacer(e,t.value):isMap$1(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,c])=>(n[`${r} =>`]=c,n),{})}:isSet$1(t)?{[`Set(${t.size})`]:[...t.values()]}:isObject$6(t)&&!isArray$8(t)&&!isPlainObject$1(t)?String(t):t,EMPTY_OBJ=process.env.NODE_ENV!=="production"?Object.freeze({}):{},EMPTY_ARR=process.env.NODE_ENV!=="production"?Object.freeze([]):[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=e=>onRE.test(e),isModelListener=e=>e.startsWith("onUpdate:"),extend$4=Object.assign,remove$2=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},hasOwnProperty$2=Object.prototype.hasOwnProperty,hasOwn$2=(e,t)=>hasOwnProperty$2.call(e,t),isArray$8=Array.isArray,isMap$1=e=>toTypeString(e)==="[object Map]",isSet$1=e=>toTypeString(e)==="[object Set]",isDate$2=e=>toTypeString(e)==="[object Date]",isFunction$2=e=>typeof e=="function",isString$3=e=>typeof e=="string",isSymbol$4=e=>typeof e=="symbol",isObject$6=e=>e!==null&&typeof e=="object",isPromise=e=>isObject$6(e)&&isFunction$2(e.then)&&isFunction$2(e.catch),objectToString$3=Object.prototype.toString,toTypeString=e=>objectToString$3.call(e),toRawType=e=>toTypeString(e).slice(8,-1),isPlainObject$1=e=>toTypeString(e)==="[object Object]",isIntegerKey=e=>isString$3(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),isBuiltInDirective=makeMap("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),cacheStringFunction=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(e=>e.replace(camelizeRE,(t,n)=>n?n.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(e=>e.replace(hyphenateRE,"-$1").toLowerCase()),capitalize$1=cacheStringFunction(e=>e.charAt(0).toUpperCase()+e.slice(1)),toHandlerKey=cacheStringFunction(e=>e?`on${capitalize$1(e)}`:""),hasChanged=(e,t)=>!Object.is(e,t),invokeArrayFns=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},def=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},toNumber$2=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function warn$4(e,...t){console.warn(`[Vue warn] ${e}`,...t)}let activeEffectScope;class EffectScope{constructor(t=!1){this.detached=t,this.active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!t&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(t){if(this.active){const n=activeEffectScope;try{return activeEffectScope=this,t()}finally{activeEffectScope=n}}else process.env.NODE_ENV!=="production"&&warn$4("cannot run an inactive effect scope.")}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(t){if(this.active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const c=this.parent.scopes.pop();c&&c!==this&&(this.parent.scopes[this.index]=c,c.index=this.index)}this.parent=void 0,this.active=!1}}}function effectScope(e){return new EffectScope(e)}function recordEffectScope(e,t=activeEffectScope){t&&t.active&&t.effects.push(e)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(e){activeEffectScope?activeEffectScope.cleanups.push(e):process.env.NODE_ENV!=="production"&&warn$4("onScopeDispose() is called when there is no active effect scope to be associated with.")}const createDep=e=>{const t=new Set(e);return t.w=0,t.n=0,t},wasTracked=e=>(e.w&trackOpBit)>0,newTracked=e=>(e.n&trackOpBit)>0,initDepMarkers=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=trackOpBit},finalizeDepMarkers=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const c=t[r];wasTracked(c)&&!newTracked(c)?c.delete(e):t[n++]=c,c.w&=~trackOpBit,c.n&=~trackOpBit}t.length=n}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(process.env.NODE_ENV!=="production"?"iterate":""),MAP_KEY_ITERATE_KEY=Symbol(process.env.NODE_ENV!=="production"?"Map key iterate":"");class ReactiveEffect{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,r)}run(){if(!this.active)return this.fn();let t=activeEffect,n=shouldTrack;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}function effect(e,t){e.effect&&(e=e.effect.fn);const n=new ReactiveEffect(e);t&&(extend$4(n,t),t.scope&&recordEffectScope(n,t.scope)),(!t||!t.lazy)&&n.run();const r=n.run.bind(n);return r.effect=n,r}function stop(e){e.effect.stop()}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=e===void 0?!0:e}function track(e,t,n){if(shouldTrack&&activeEffect){let r=targetMap.get(e);r||targetMap.set(e,r=new Map);let c=r.get(n);c||r.set(n,c=createDep());const d=process.env.NODE_ENV!=="production"?{effect:activeEffect,target:e,type:t,key:n}:void 0;trackEffects(c,d)}}function trackEffects(e,t){let n=!1;effectTrackDepth<=maxMarkerBits?newTracked(e)||(e.n|=trackOpBit,n=!wasTracked(e)):n=!e.has(activeEffect),n&&(e.add(activeEffect),activeEffect.deps.push(e),process.env.NODE_ENV!=="production"&&activeEffect.onTrack&&activeEffect.onTrack(Object.assign({effect:activeEffect},t)))}function trigger$1(e,t,n,r,c,d){const g=targetMap.get(e);if(!g)return;let o=[];if(t==="clear")o=[...g.values()];else if(n==="length"&&isArray$8(e)){const x=toNumber$2(r);g.forEach((E,k)=>{(k==="length"||k>=x)&&o.push(E)})}else switch(n!==void 0&&o.push(g.get(n)),t){case"add":isArray$8(e)?isIntegerKey(n)&&o.push(g.get("length")):(o.push(g.get(ITERATE_KEY)),isMap$1(e)&&o.push(g.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$8(e)||(o.push(g.get(ITERATE_KEY)),isMap$1(e)&&o.push(g.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap$1(e)&&o.push(g.get(ITERATE_KEY));break}const v=process.env.NODE_ENV!=="production"?{target:e,type:t,key:n,newValue:r,oldValue:c,oldTarget:d}:void 0;if(o.length===1)o[0]&&(process.env.NODE_ENV!=="production"?triggerEffects(o[0],v):triggerEffects(o[0]));else{const x=[];for(const E of o)E&&x.push(...E);process.env.NODE_ENV!=="production"?triggerEffects(createDep(x),v):triggerEffects(createDep(x))}}function triggerEffects(e,t){const n=isArray$8(e)?e:[...e];for(const r of n)r.computed&&triggerEffect(r,t);for(const r of n)r.computed||triggerEffect(r,t)}function triggerEffect(e,t){(e!==activeEffect||e.allowRecurse)&&(process.env.NODE_ENV!=="production"&&e.onTrigger&&e.onTrigger(extend$4({effect:e},t)),e.scheduler?e.scheduler():e.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(isSymbol$4)),get$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),shallowReadonlyGet=createGetter(!0,!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=toRaw$1(this);for(let d=0,g=this.length;d<g;d++)track(r,"get",d+"");const c=r[t](...n);return c===-1||c===!1?r[t](...n.map(toRaw$1)):c}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){pauseTracking();const r=toRaw$1(this)[t].apply(this,n);return resetTracking(),r}}),e}function createGetter(e=!1,t=!1){return function(r,c,d){if(c==="__v_isReactive")return!e;if(c==="__v_isReadonly")return e;if(c==="__v_isShallow")return t;if(c==="__v_raw"&&d===(e?t?shallowReadonlyMap:readonlyMap:t?shallowReactiveMap:reactiveMap).get(r))return r;const g=isArray$8(r);if(!e&&g&&hasOwn$2(arrayInstrumentations,c))return Reflect.get(arrayInstrumentations,c,d);const o=Reflect.get(r,c,d);return(isSymbol$4(c)?builtInSymbols.has(c):isNonTrackableKeys(c))||(e||track(r,"get",c),t)?o:isRef$1(o)?g&&isIntegerKey(c)?o:o.value:isObject$6(o)?e?readonly(o):reactive(o):o}}const set$1=createSetter(),shallowSet=createSetter(!0);function createSetter(e=!1){return function(n,r,c,d){let g=n[r];if(isReadonly(g)&&isRef$1(g)&&!isRef$1(c))return!1;if(!e&&(!isShallow$1(c)&&!isReadonly(c)&&(g=toRaw$1(g),c=toRaw$1(c)),!isArray$8(n)&&isRef$1(g)&&!isRef$1(c)))return g.value=c,!0;const o=isArray$8(n)&&isIntegerKey(r)?Number(r)<n.length:hasOwn$2(n,r),v=Reflect.set(n,r,c,d);return n===toRaw$1(d)&&(o?hasChanged(c,g)&&trigger$1(n,"set",r,c,g):trigger$1(n,"add",r,c)),v}}function deleteProperty(e,t){const n=hasOwn$2(e,t),r=e[t],c=Reflect.deleteProperty(e,t);return c&&n&&trigger$1(e,"delete",t,void 0,r),c}function has$4(e,t){const n=Reflect.has(e,t);return(!isSymbol$4(t)||!builtInSymbols.has(t))&&track(e,"has",t),n}function ownKeys(e){return track(e,"iterate",isArray$8(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}const mutableHandlers={get:get$1,set:set$1,deleteProperty,has:has$4,ownKeys},readonlyHandlers={get:readonlyGet,set(e,t){return process.env.NODE_ENV!=="production"&&warn$4(`Set operation on key "${String(t)}" failed: target is readonly.`,e),!0},deleteProperty(e,t){return process.env.NODE_ENV!=="production"&&warn$4(`Delete operation on key "${String(t)}" failed: target is readonly.`,e),!0}},shallowReactiveHandlers=extend$4({},mutableHandlers,{get:shallowGet,set:shallowSet}),shallowReadonlyHandlers=extend$4({},readonlyHandlers,{get:shallowReadonlyGet}),toShallow=e=>e,getProto$1=e=>Reflect.getPrototypeOf(e);function get$1$1(e,t,n=!1,r=!1){e=e.__v_raw;const c=toRaw$1(e),d=toRaw$1(t);n||(t!==d&&track(c,"get",t),track(c,"get",d));const{has:g}=getProto$1(c),o=r?toShallow:n?toReadonly:toReactive;if(g.call(c,t))return o(e.get(t));if(g.call(c,d))return o(e.get(d));e!==c&&e.get(t)}function has$1$1(e,t=!1){const n=this.__v_raw,r=toRaw$1(n),c=toRaw$1(e);return t||(e!==c&&track(r,"has",e),track(r,"has",c)),e===c?n.has(e):n.has(e)||n.has(c)}function size(e,t=!1){return e=e.__v_raw,!t&&track(toRaw$1(e),"iterate",ITERATE_KEY),Reflect.get(e,"size",e)}function add(e){e=toRaw$1(e);const t=toRaw$1(this);return getProto$1(t).has.call(t,e)||(t.add(e),trigger$1(t,"add",e,e)),this}function set$1$1(e,t){t=toRaw$1(t);const n=toRaw$1(this),{has:r,get:c}=getProto$1(n);let d=r.call(n,e);d?process.env.NODE_ENV!=="production"&&checkIdentityKeys(n,r,e):(e=toRaw$1(e),d=r.call(n,e));const g=c.call(n,e);return n.set(e,t),d?hasChanged(t,g)&&trigger$1(n,"set",e,t,g):trigger$1(n,"add",e,t),this}function deleteEntry(e){const t=toRaw$1(this),{has:n,get:r}=getProto$1(t);let c=n.call(t,e);c?process.env.NODE_ENV!=="production"&&checkIdentityKeys(t,n,e):(e=toRaw$1(e),c=n.call(t,e));const d=r?r.call(t,e):void 0,g=t.delete(e);return c&&trigger$1(t,"delete",e,void 0,d),g}function clear(){const e=toRaw$1(this),t=e.size!==0,n=process.env.NODE_ENV!=="production"?isMap$1(e)?new Map(e):new Set(e):void 0,r=e.clear();return t&&trigger$1(e,"clear",void 0,void 0,n),r}function createForEach(e,t){return function(r,c){const d=this,g=d.__v_raw,o=toRaw$1(g),v=t?toShallow:e?toReadonly:toReactive;return!e&&track(o,"iterate",ITERATE_KEY),g.forEach((x,E)=>r.call(c,v(x),v(E),d))}}function createIterableMethod(e,t,n){return function(...r){const c=this.__v_raw,d=toRaw$1(c),g=isMap$1(d),o=e==="entries"||e===Symbol.iterator&&g,v=e==="keys"&&g,x=c[e](...r),E=n?toShallow:t?toReadonly:toReactive;return!t&&track(d,"iterate",v?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:k,done:S}=x.next();return S?{value:k,done:S}:{value:o?[E(k[0]),E(k[1])]:E(k),done:S}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...t){if(process.env.NODE_ENV!=="production"){const n=t[0]?`on key "${t[0]}" `:"";console.warn(`${capitalize$1(e)} operation ${n}failed: target is readonly.`,toRaw$1(this))}return e==="delete"?!1:this}}function createInstrumentations(){const e={get(d){return get$1$1(this,d)},get size(){return size(this)},has:has$1$1,add,set:set$1$1,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},t={get(d){return get$1$1(this,d,!1,!0)},get size(){return size(this)},has:has$1$1,add,set:set$1$1,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},n={get(d){return get$1$1(this,d,!0)},get size(){return size(this,!0)},has(d){return has$1$1.call(this,d,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},r={get(d){return get$1$1(this,d,!0,!0)},get size(){return size(this,!0)},has(d){return has$1$1.call(this,d,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(d=>{e[d]=createIterableMethod(d,!1,!1),n[d]=createIterableMethod(d,!0,!1),t[d]=createIterableMethod(d,!1,!0),r[d]=createIterableMethod(d,!0,!0)}),[e,n,t,r]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(e,t){const n=t?e?shallowReadonlyInstrumentations:shallowInstrumentations:e?readonlyInstrumentations:mutableInstrumentations;return(r,c,d)=>c==="__v_isReactive"?!e:c==="__v_isReadonly"?e:c==="__v_raw"?r:Reflect.get(hasOwn$2(n,c)&&c in r?n:r,c,d)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)};function checkIdentityKeys(e,t,n){const r=toRaw$1(n);if(r!==n&&t.call(e,r)){const c=toRawType(e);console.warn(`Reactive ${c} contains both the raw and reactive versions of the same object${c==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(e){return createReactiveObject(e,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(e,t,n,r,c){if(!isObject$6(e))return process.env.NODE_ENV!=="production"&&console.warn(`value cannot be made reactive: ${String(e)}`),e;if(e.__v_raw&&!(t&&e.__v_isReactive))return e;const d=c.get(e);if(d)return d;const g=getTargetType(e);if(g===0)return e;const o=new Proxy(e,g===2?r:n);return c.set(e,o),o}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!!(e&&e.__v_isReactive)}function isReadonly(e){return!!(e&&e.__v_isReadonly)}function isShallow$1(e){return!!(e&&e.__v_isShallow)}function isProxy(e){return isReactive(e)||isReadonly(e)}function toRaw$1(e){const t=e&&e.__v_raw;return t?toRaw$1(t):e}function markRaw(e){return def(e,"__v_skip",!0),e}const toReactive=e=>isObject$6(e)?reactive(e):e,toReadonly=e=>isObject$6(e)?readonly(e):e;function trackRefValue(e){shouldTrack&&activeEffect&&(e=toRaw$1(e),process.env.NODE_ENV!=="production"?trackEffects(e.dep||(e.dep=createDep()),{target:e,type:"get",key:"value"}):trackEffects(e.dep||(e.dep=createDep())))}function triggerRefValue(e,t){e=toRaw$1(e),e.dep&&(process.env.NODE_ENV!=="production"?triggerEffects(e.dep,{target:e,type:"set",key:"value",newValue:t}):triggerEffects(e.dep))}function isRef$1(e){return!!(e&&e.__v_isRef===!0)}function ref(e){return createRef(e,!1)}function shallowRef(e){return createRef(e,!0)}function createRef(e,t){return isRef$1(e)?e:new RefImpl(e,t)}class RefImpl{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:toRaw$1(t),this._value=n?t:toReactive(t)}get value(){return trackRefValue(this),this._value}set value(t){const n=this.__v_isShallow||isShallow$1(t)||isReadonly(t);t=n?t:toRaw$1(t),hasChanged(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:toReactive(t),triggerRefValue(this,t))}}function triggerRef(e){triggerRefValue(e,process.env.NODE_ENV!=="production"?e.value:void 0)}function unref(e){return isRef$1(e)?e.value:e}const shallowUnwrapHandlers={get:(e,t,n)=>unref(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const c=e[t];return isRef$1(c)&&!isRef$1(n)?(c.value=n,!0):Reflect.set(e,t,n,r)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}class CustomRefImpl{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:r}=t(()=>trackRefValue(this),()=>triggerRefValue(this));this._get=n,this._set=r}get value(){return this._get()}set value(t){this._set(t)}}function customRef(e){return new CustomRefImpl(e)}function toRefs(e){process.env.NODE_ENV!=="production"&&!isProxy(e)&&console.warn("toRefs() expects a reactive object but received a plain one.");const t=isArray$8(e)?new Array(e.length):{};for(const n in e)t[n]=toRef(e,n);return t}class ObjectRefImpl{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function toRef(e,t,n){const r=e[t];return isRef$1(r)?r:new ObjectRefImpl(e,t,n)}var _a;class ComputedRefImpl{constructor(t,n,r,c){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[_a]=!1,this._dirty=!0,this.effect=new ReactiveEffect(t,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!c,this.__v_isReadonly=r}get value(){const t=toRaw$1(this);return trackRefValue(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}_a="__v_isReadonly";function computed$1(e,t,n=!1){let r,c;const d=isFunction$2(e);d?(r=e,c=process.env.NODE_ENV!=="production"?()=>{console.warn("Write operation failed: computed value is readonly")}:NOOP):(r=e.get,c=e.set);const g=new ComputedRefImpl(r,c,d||!c,n);return process.env.NODE_ENV!=="production"&&t&&!n&&(g.effect.onTrack=t.onTrack,g.effect.onTrigger=t.onTrigger),g}const stack$1=[];function pushWarningContext$1(e){stack$1.push(e)}function popWarningContext$1(){stack$1.pop()}function warn$3(e,...t){if(process.env.NODE_ENV==="production")return;pauseTracking();const n=stack$1.length?stack$1[stack$1.length-1].component:null,r=n&&n.appContext.config.warnHandler,c=getComponentTrace$1();if(r)callWithErrorHandling$1(r,n,11,[e+t.join(""),n&&n.proxy,c.map(({vnode:d})=>`at <${formatComponentName$1(n,d.type)}>`).join(`
`),c]);else{const d=[`[Vue warn]: ${e}`,...t];c.length&&d.push(`
`,...formatTrace$1(c)),console.warn(...d)}resetTracking()}function getComponentTrace$1(){let e=stack$1[stack$1.length-1];if(!e)return[];const t=[];for(;e;){const n=t[0];n&&n.vnode===e?n.recurseCount++:t.push({vnode:e,recurseCount:0});const r=e.component&&e.component.parent;e=r&&r.vnode}return t}function formatTrace$1(e){const t=[];return e.forEach((n,r)=>{t.push(...r===0?[]:[`
`],...formatTraceEntry$1(n))}),t}function formatTraceEntry$1({vnode:e,recurseCount:t}){const n=t>0?`... (${t} recursive calls)`:"",r=e.component?e.component.parent==null:!1,c=` at <${formatComponentName$1(e.component,e.type,r)}`,d=">"+n;return e.props?[c,...formatProps$1(e.props),d]:[c+d]}function formatProps$1(e){const t=[],n=Object.keys(e);return n.slice(0,3).forEach(r=>{t.push(...formatProp$1(r,e[r]))}),n.length>3&&t.push(" ..."),t}function formatProp$1(e,t,n){return isString$3(t)?(t=JSON.stringify(t),n?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?n?t:[`${e}=${t}`]:isRef$1(t)?(t=formatProp$1(e,toRaw$1(t.value),!0),n?t:[`${e}=Ref<`,t,">"]):isFunction$2(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=toRaw$1(t),n?t:[`${e}=`,t])}const ErrorTypeStrings$1={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",[0]:"setup function",[1]:"render function",[2]:"watcher getter",[3]:"watcher callback",[4]:"watcher cleanup function",[5]:"native event handler",[6]:"component event handler",[7]:"vnode hook",[8]:"directive hook",[9]:"transition hook",[10]:"app errorHandler",[11]:"app warnHandler",[12]:"ref function",[13]:"async component loader",[14]:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/core"};function callWithErrorHandling$1(e,t,n,r){let c;try{c=r?e(...r):e()}catch(d){handleError$1(d,t,n)}return c}function callWithAsyncErrorHandling(e,t,n,r){if(isFunction$2(e)){const d=callWithErrorHandling$1(e,t,n,r);return d&&isPromise(d)&&d.catch(g=>{handleError$1(g,t,n)}),d}const c=[];for(let d=0;d<e.length;d++)c.push(callWithAsyncErrorHandling(e[d],t,n,r));return c}function handleError$1(e,t,n,r=!0){const c=t?t.vnode:null;if(t){let d=t.parent;const g=t.proxy,o=process.env.NODE_ENV!=="production"?ErrorTypeStrings$1[n]:n;for(;d;){const x=d.ec;if(x){for(let E=0;E<x.length;E++)if(x[E](e,g,o)===!1)return}d=d.parent}const v=t.appContext.config.errorHandler;if(v){callWithErrorHandling$1(v,null,10,[e,g,o]);return}}logError$1(e,n,c,r)}function logError$1(e,t,n,r=!0){if(process.env.NODE_ENV!=="production"){const c=ErrorTypeStrings$1[t];if(n&&pushWarningContext$1(n),warn$3(`Unhandled error${c?` during execution of ${c}`:""}`),n&&popWarningContext$1(),r)throw e;console.error(e)}else console.error(e)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;const RECURSION_LIMIT=100;function nextTick$1(e){const t=currentFlushPromise||resolvedPromise;return e?t.then(this?e.bind(this):e):t}function findInsertionIndex(e){let t=flushIndex+1,n=queue.length;for(;t<n;){const r=t+n>>>1;getId(queue[r])<e?t=r+1:n=r}return t}function queueJob(e){(!queue.length||!queue.includes(e,isFlushing&&e.allowRecurse?flushIndex+1:flushIndex))&&(e.id==null?queue.push(e):queue.splice(findInsertionIndex(e.id),0,e),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(e){const t=queue.indexOf(e);t>flushIndex&&queue.splice(t,1)}function queuePostFlushCb(e){isArray$8(e)?pendingPostFlushCbs.push(...e):(!activePostFlushCbs||!activePostFlushCbs.includes(e,e.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(e),queueFlush()}function flushPreFlushCbs(e,t=isFlushing?flushIndex+1:0){for(process.env.NODE_ENV!=="production"&&(e=e||new Map);t<queue.length;t++){const n=queue[t];if(n&&n.pre){if(process.env.NODE_ENV!=="production"&&checkRecursiveUpdates(e,n))continue;queue.splice(t,1),t--,n()}}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const t=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...t);return}for(activePostFlushCbs=t,process.env.NODE_ENV!=="production"&&(e=e||new Map),activePostFlushCbs.sort((n,r)=>getId(n)-getId(r)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)process.env.NODE_ENV!=="production"&&checkRecursiveUpdates(e,activePostFlushCbs[postFlushIndex])||activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>e.id==null?1/0:e.id,comparator=(e,t)=>{const n=getId(e)-getId(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function flushJobs(e){isFlushPending=!1,isFlushing=!0,process.env.NODE_ENV!=="production"&&(e=e||new Map),queue.sort(comparator);const t=process.env.NODE_ENV!=="production"?n=>checkRecursiveUpdates(e,n):NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const n=queue[flushIndex];if(n&&n.active!==!1){if(process.env.NODE_ENV!=="production"&&t(n))continue;callWithErrorHandling$1(n,null,14)}}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(e),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs(e)}}function checkRecursiveUpdates(e,t){if(!e.has(t))e.set(t,1);else{const n=e.get(t);if(n>RECURSION_LIMIT){const r=t.ownerInstance,c=r&&getComponentName$1(r.type);return warn$3(`Maximum recursive updates exceeded${c?` in component <${c}>`:""}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`),!0}else e.set(t,n+1)}}let isHmrUpdating=!1;const hmrDirtyComponents=new Set;process.env.NODE_ENV!=="production"&&(getGlobalThis().__VUE_HMR_RUNTIME__={createRecord:tryWrap(createRecord),rerender:tryWrap(rerender),reload:tryWrap(reload)});const map=new Map;function registerHMR(e){const t=e.type.__hmrId;let n=map.get(t);n||(createRecord(t,e.type),n=map.get(t)),n.instances.add(e)}function unregisterHMR(e){map.get(e.type.__hmrId).instances.delete(e)}function createRecord(e,t){return map.has(e)?!1:(map.set(e,{initialDef:normalizeClassComponent(t),instances:new Set}),!0)}function normalizeClassComponent(e){return isClassComponent(e)?e.__vccOpts:e}function rerender(e,t){const n=map.get(e);!n||(n.initialDef.render=t,[...n.instances].forEach(r=>{t&&(r.render=t,normalizeClassComponent(r.type).render=t),r.renderCache=[],isHmrUpdating=!0,r.update(),isHmrUpdating=!1}))}function reload(e,t){const n=map.get(e);if(!n)return;t=normalizeClassComponent(t),updateComponentDef(n.initialDef,t);const r=[...n.instances];for(const c of r){const d=normalizeClassComponent(c.type);hmrDirtyComponents.has(d)||(d!==n.initialDef&&updateComponentDef(d,t),hmrDirtyComponents.add(d)),c.appContext.optionsCache.delete(c.type),c.ceReload?(hmrDirtyComponents.add(d),c.ceReload(t.styles),hmrDirtyComponents.delete(d)):c.parent?queueJob(c.parent.update):c.appContext.reload?c.appContext.reload():typeof window<"u"?window.location.reload():console.warn("[HMR] Root or manually mounted instance modified. Full reload required.")}queuePostFlushCb(()=>{for(const c of r)hmrDirtyComponents.delete(normalizeClassComponent(c.type))})}function updateComponentDef(e,t){extend$4(e,t);for(const n in e)n!=="__file"&&!(n in t)&&delete e[n]}function tryWrap(e){return(t,n)=>{try{return e(t,n)}catch(r){console.error(r),console.warn("[HMR] Something went wrong during Vue component hot-reload. Full reload required.")}}}let devtools,buffer=[],devtoolsNotInstalled=!1;function emit(e,...t){devtools?devtools.emit(e,...t):devtoolsNotInstalled||buffer.push({event:e,args:t})}function setDevtoolsHook(e,t){var n,r;devtools=e,devtools?(devtools.enabled=!0,buffer.forEach(({event:c,args:d})=>devtools.emit(c,...d)),buffer=[]):typeof window<"u"&&window.HTMLElement&&!(!((r=(n=window.navigator)===null||n===void 0?void 0:n.userAgent)===null||r===void 0)&&r.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(d=>{setDevtoolsHook(d,t)}),setTimeout(()=>{devtools||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,devtoolsNotInstalled=!0,buffer=[])},3e3)):(devtoolsNotInstalled=!0,buffer=[])}function devtoolsInitApp(e,t){emit("app:init",e,t,{Fragment,Text,Comment:Comment$1,Static})}function devtoolsUnmountApp(e){emit("app:unmount",e)}const devtoolsComponentAdded=createDevtoolsComponentHook("component:added"),devtoolsComponentUpdated=createDevtoolsComponentHook("component:updated"),_devtoolsComponentRemoved=createDevtoolsComponentHook("component:removed"),devtoolsComponentRemoved=e=>{devtools&&typeof devtools.cleanupBuffer=="function"&&!devtools.cleanupBuffer(e)&&_devtoolsComponentRemoved(e)};function createDevtoolsComponentHook(e){return t=>{emit(e,t.appContext.app,t.uid,t.parent?t.parent.uid:void 0,t)}}const devtoolsPerfStart=createDevtoolsPerformanceHook("perf:start"),devtoolsPerfEnd=createDevtoolsPerformanceHook("perf:end");function createDevtoolsPerformanceHook(e){return(t,n,r)=>{emit(e,t.appContext.app,t.uid,t,n,r)}}function devtoolsComponentEmit(e,t,n){emit("component:emit",e.appContext.app,e,t,n)}function emit$1(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||EMPTY_OBJ;if(process.env.NODE_ENV!=="production"){const{emitsOptions:E,propsOptions:[k]}=e;if(E)if(!(t in E))(!k||!(toHandlerKey(t)in k))&&warn$3(`Component emitted event "${t}" but it is neither declared in the emits option nor as an "${toHandlerKey(t)}" prop.`);else{const S=E[t];isFunction$2(S)&&(S(...n)||warn$3(`Invalid event arguments: event validation failed for event "${t}".`))}}let c=n;const d=t.startsWith("update:"),g=d&&t.slice(7);if(g&&g in r){const E=`${g==="modelValue"?"model":g}Modifiers`,{number:k,trim:S}=r[E]||EMPTY_OBJ;S&&(c=n.map(N=>isString$3(N)?N.trim():N)),k&&(c=n.map(toNumber$2))}if(process.env.NODE_ENV!=="production"&&devtoolsComponentEmit(e,t,c),process.env.NODE_ENV!=="production"){const E=t.toLowerCase();E!==t&&r[toHandlerKey(E)]&&warn$3(`Event "${E}" is emitted in component ${formatComponentName$1(e,e.type)} but the handler is registered for "${t}". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "${hyphenate(t)}" instead of "${t}".`)}let o,v=r[o=toHandlerKey(t)]||r[o=toHandlerKey(camelize(t))];!v&&d&&(v=r[o=toHandlerKey(hyphenate(t))]),v&&callWithAsyncErrorHandling(v,e,6,c);const x=r[o+"Once"];if(x){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,callWithAsyncErrorHandling(x,e,6,c)}}function normalizeEmitsOptions(e,t,n=!1){const r=t.emitsCache,c=r.get(e);if(c!==void 0)return c;const d=e.emits;let g={},o=!1;if(!isFunction$2(e)){const v=x=>{const E=normalizeEmitsOptions(x,t,!0);E&&(o=!0,extend$4(g,E))};!n&&t.mixins.length&&t.mixins.forEach(v),e.extends&&v(e.extends),e.mixins&&e.mixins.forEach(v)}return!d&&!o?(isObject$6(e)&&r.set(e,null),null):(isArray$8(d)?d.forEach(v=>g[v]=null):extend$4(g,d),isObject$6(e)&&r.set(e,g),g)}function isEmitListener(e,t){return!e||!isOn(t)?!1:(t=t.slice(2).replace(/Once$/,""),hasOwn$2(e,t[0].toLowerCase()+t.slice(1))||hasOwn$2(e,hyphenate(t))||hasOwn$2(e,t))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance$1(e){const t=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,t}function pushScopeId(e){currentScopeId=e}function popScopeId(){currentScopeId=null}const withScopeId=e=>withCtx;function withCtx(e,t=currentRenderingInstance,n){if(!t||e._n)return e;const r=(...c)=>{r._d&&setBlockTracking(-1);const d=setCurrentRenderingInstance$1(t);let g;try{g=e(...c)}finally{setCurrentRenderingInstance$1(d),r._d&&setBlockTracking(1)}return process.env.NODE_ENV!=="production"&&devtoolsComponentUpdated(t),g};return r._n=!0,r._c=!0,r._d=!0,r}let accessedAttrs=!1;function markAttrsAccessed(){accessedAttrs=!0}function renderComponentRoot$1(e){const{type:t,vnode:n,proxy:r,withProxy:c,props:d,propsOptions:[g],slots:o,attrs:v,emit:x,render:E,renderCache:k,data:S,setupState:N,ctx:L,inheritAttrs:P}=e;let O,V;const z=setCurrentRenderingInstance$1(e);process.env.NODE_ENV!=="production"&&(accessedAttrs=!1);try{if(n.shapeFlag&4){const Z=c||r;O=normalizeVNode$1(E.call(Z,Z,k,d,N,S,L)),V=v}else{const Z=t;process.env.NODE_ENV!=="production"&&v===d&&markAttrsAccessed(),O=normalizeVNode$1(Z.length>1?Z(d,process.env.NODE_ENV!=="production"?{get attrs(){return markAttrsAccessed(),v},slots:o,emit:x}:{attrs:v,slots:o,emit:x}):Z(d,null)),V=t.props?v:getFunctionalFallthrough(v)}}catch(Z){blockStack.length=0,handleError$1(Z,e,1),O=createVNode(Comment$1)}let U=O,W;if(process.env.NODE_ENV!=="production"&&O.patchFlag>0&&O.patchFlag&2048&&([U,W]=getChildRoot(O)),V&&P!==!1){const Z=Object.keys(V),{shapeFlag:re}=U;if(Z.length){if(re&7)g&&Z.some(isModelListener)&&(V=filterModelListeners(V,g)),U=cloneVNode(U,V);else if(process.env.NODE_ENV!=="production"&&!accessedAttrs&&U.type!==Comment$1){const oe=Object.keys(v),se=[],ce=[];for(let me=0,we=oe.length;me<we;me++){const ae=oe[me];isOn(ae)?isModelListener(ae)||se.push(ae[2].toLowerCase()+ae.slice(3)):ce.push(ae)}ce.length&&warn$3(`Extraneous non-props attributes (${ce.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes.`),se.length&&warn$3(`Extraneous non-emits event listeners (${se.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes. If the listener is intended to be a component custom event listener only, declare it using the "emits" option.`)}}}return n.dirs&&(process.env.NODE_ENV!=="production"&&!isElementRoot(U)&&warn$3("Runtime directive used on component with non-element root node. The directives will not function as intended."),U=cloneVNode(U),U.dirs=U.dirs?U.dirs.concat(n.dirs):n.dirs),n.transition&&(process.env.NODE_ENV!=="production"&&!isElementRoot(U)&&warn$3("Component inside <Transition> renders non-element root node that cannot be animated."),U.transition=n.transition),process.env.NODE_ENV!=="production"&&W?W(U):O=U,setCurrentRenderingInstance$1(z),O}const getChildRoot=e=>{const t=e.children,n=e.dynamicChildren,r=filterSingleRoot(t);if(!r)return[e,void 0];const c=t.indexOf(r),d=n?n.indexOf(r):-1,g=o=>{t[c]=o,n&&(d>-1?n[d]=o:o.patchFlag>0&&(e.dynamicChildren=[...n,o]))};return[normalizeVNode$1(r),g]};function filterSingleRoot(e){let t;for(let n=0;n<e.length;n++){const r=e[n];if(isVNode$1(r)){if(r.type!==Comment$1||r.children==="v-if"){if(t)return;t=r}}else return}return t}const getFunctionalFallthrough=e=>{let t;for(const n in e)(n==="class"||n==="style"||isOn(n))&&((t||(t={}))[n]=e[n]);return t},filterModelListeners=(e,t)=>{const n={};for(const r in e)(!isModelListener(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n},isElementRoot=e=>e.shapeFlag&7||e.type===Comment$1;function shouldUpdateComponent(e,t,n){const{props:r,children:c,component:d}=e,{props:g,children:o,patchFlag:v}=t,x=d.emitsOptions;if(process.env.NODE_ENV!=="production"&&(c||o)&&isHmrUpdating||t.dirs||t.transition)return!0;if(n&&v>=0){if(v&1024)return!0;if(v&16)return r?hasPropsChanged(r,g,x):!!g;if(v&8){const E=t.dynamicProps;for(let k=0;k<E.length;k++){const S=E[k];if(g[S]!==r[S]&&!isEmitListener(x,S))return!0}}}else return(c||o)&&(!o||!o.$stable)?!0:r===g?!1:r?g?hasPropsChanged(r,g,x):!0:!!g;return!1}function hasPropsChanged(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let c=0;c<r.length;c++){const d=r[c];if(t[d]!==e[d]&&!isEmitListener(n,d))return!0}return!1}function updateHOCHostEl({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const isSuspense=e=>e.__isSuspense,SuspenseImpl={name:"Suspense",__isSuspense:!0,process(e,t,n,r,c,d,g,o,v,x){e==null?mountSuspense(t,n,r,c,d,g,o,v,x):patchSuspense(e,t,n,r,c,g,o,v,x)},hydrate:hydrateSuspense,create:createSuspenseBoundary,normalize:normalizeSuspenseChildren},Suspense=SuspenseImpl;function triggerEvent(e,t){const n=e.props&&e.props[t];isFunction$2(n)&&n()}function mountSuspense(e,t,n,r,c,d,g,o,v){const{p:x,o:{createElement:E}}=v,k=E("div"),S=e.suspense=createSuspenseBoundary(e,c,r,t,k,n,d,g,o,v);x(null,S.pendingBranch=e.ssContent,k,null,r,S,d,g),S.deps>0?(triggerEvent(e,"onPending"),triggerEvent(e,"onFallback"),x(null,e.ssFallback,t,n,r,null,d,g),setActiveBranch(S,e.ssFallback)):S.resolve()}function patchSuspense(e,t,n,r,c,d,g,o,{p:v,um:x,o:{createElement:E}}){const k=t.suspense=e.suspense;k.vnode=t,t.el=e.el;const S=t.ssContent,N=t.ssFallback,{activeBranch:L,pendingBranch:P,isInFallback:O,isHydrating:V}=k;if(P)k.pendingBranch=S,isSameVNodeType(S,P)?(v(P,S,k.hiddenContainer,null,c,k,d,g,o),k.deps<=0?k.resolve():O&&(v(L,N,n,r,c,null,d,g,o),setActiveBranch(k,N))):(k.pendingId++,V?(k.isHydrating=!1,k.activeBranch=P):x(P,c,k),k.deps=0,k.effects.length=0,k.hiddenContainer=E("div"),O?(v(null,S,k.hiddenContainer,null,c,k,d,g,o),k.deps<=0?k.resolve():(v(L,N,n,r,c,null,d,g,o),setActiveBranch(k,N))):L&&isSameVNodeType(S,L)?(v(L,S,n,r,c,k,d,g,o),k.resolve(!0)):(v(null,S,k.hiddenContainer,null,c,k,d,g,o),k.deps<=0&&k.resolve()));else if(L&&isSameVNodeType(S,L))v(L,S,n,r,c,k,d,g,o),setActiveBranch(k,S);else if(triggerEvent(t,"onPending"),k.pendingBranch=S,k.pendingId++,v(null,S,k.hiddenContainer,null,c,k,d,g,o),k.deps<=0)k.resolve();else{const{timeout:z,pendingId:U}=k;z>0?setTimeout(()=>{k.pendingId===U&&k.fallback(N)},z):z===0&&k.fallback(N)}}let hasWarned=!1;function createSuspenseBoundary(e,t,n,r,c,d,g,o,v,x,E=!1){process.env.NODE_ENV!=="production"&&!0&&!hasWarned&&(hasWarned=!0,console[console.info?"info":"log"]("<Suspense> is an experimental feature and its API will likely change."));const{p:k,m:S,um:N,n:L,o:{parentNode:P,remove:O}}=x,V=toNumber$2(e.props&&e.props.timeout),z={vnode:e,parent:t,parentComponent:n,isSVG:g,container:r,hiddenContainer:c,anchor:d,deps:0,pendingId:0,timeout:typeof V=="number"?V:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:E,isUnmounted:!1,effects:[],resolve(U=!1){if(process.env.NODE_ENV!=="production"){if(!U&&!z.pendingBranch)throw new Error("suspense.resolve() is called without a pending branch.");if(z.isUnmounted)throw new Error("suspense.resolve() is called on an already unmounted suspense boundary.")}const{vnode:W,activeBranch:Z,pendingBranch:re,pendingId:oe,effects:se,parentComponent:ce,container:me}=z;if(z.isHydrating)z.isHydrating=!1;else if(!U){const Ce=Z&&re.transition&&re.transition.mode==="out-in";Ce&&(Z.transition.afterLeave=()=>{oe===z.pendingId&&S(re,me,Fe,0)});let{anchor:Fe}=z;Z&&(Fe=L(Z),N(Z,ce,z,!0)),Ce||S(re,me,Fe,0)}setActiveBranch(z,re),z.pendingBranch=null,z.isInFallback=!1;let we=z.parent,ae=!1;for(;we;){if(we.pendingBranch){we.effects.push(...se),ae=!0;break}we=we.parent}ae||queuePostFlushCb(se),z.effects=[],triggerEvent(W,"onResolve")},fallback(U){if(!z.pendingBranch)return;const{vnode:W,activeBranch:Z,parentComponent:re,container:oe,isSVG:se}=z;triggerEvent(W,"onFallback");const ce=L(Z),me=()=>{!z.isInFallback||(k(null,U,oe,ce,re,null,se,o,v),setActiveBranch(z,U))},we=U.transition&&U.transition.mode==="out-in";we&&(Z.transition.afterLeave=me),z.isInFallback=!0,N(Z,re,null,!0),we||me()},move(U,W,Z){z.activeBranch&&S(z.activeBranch,U,W,Z),z.container=U},next(){return z.activeBranch&&L(z.activeBranch)},registerDep(U,W){const Z=!!z.pendingBranch;Z&&z.deps++;const re=U.vnode.el;U.asyncDep.catch(oe=>{handleError$1(oe,U,0)}).then(oe=>{if(U.isUnmounted||z.isUnmounted||z.pendingId!==U.suspenseId)return;U.asyncResolved=!0;const{vnode:se}=U;process.env.NODE_ENV!=="production"&&pushWarningContext$1(se),handleSetupResult(U,oe,!1),re&&(se.el=re);const ce=!re&&U.subTree.el;W(U,se,P(re||U.subTree.el),re?null:L(U.subTree),z,g,v),ce&&O(ce),updateHOCHostEl(U,se.el),process.env.NODE_ENV!=="production"&&popWarningContext$1(),Z&&--z.deps===0&&z.resolve()})},unmount(U,W){z.isUnmounted=!0,z.activeBranch&&N(z.activeBranch,n,U,W),z.pendingBranch&&N(z.pendingBranch,n,U,W)}};return z}function hydrateSuspense(e,t,n,r,c,d,g,o,v){const x=t.suspense=createSuspenseBoundary(t,r,n,e.parentNode,document.createElement("div"),null,c,d,g,o,!0),E=v(e,x.pendingBranch=t.ssContent,n,x,d,g);return x.deps===0&&x.resolve(),E}function normalizeSuspenseChildren(e){const{shapeFlag:t,children:n}=e,r=t&32;e.ssContent=normalizeSuspenseSlot(r?n.default:n),e.ssFallback=r?normalizeSuspenseSlot(n.fallback):createVNode(Comment$1)}function normalizeSuspenseSlot(e){let t;if(isFunction$2(e)){const n=isBlockTreeEnabled&&e._c;n&&(e._d=!1,openBlock()),e=e(),n&&(e._d=!0,t=currentBlock,closeBlock())}if(isArray$8(e)){const n=filterSingleRoot(e);process.env.NODE_ENV!=="production"&&!n&&warn$3("<Suspense> slots expect a single root node."),e=n}return e=normalizeVNode$1(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(n=>n!==e)),e}function queueEffectWithSuspense(e,t){t&&t.pendingBranch?isArray$8(e)?t.effects.push(...e):t.effects.push(e):queuePostFlushCb(e)}function setActiveBranch(e,t){e.activeBranch=t;const{vnode:n,parentComponent:r}=e,c=n.el=t.el;r&&r.subTree===n&&(r.vnode.el=c,updateHOCHostEl(r,c))}function provide(e,t){if(!currentInstance)process.env.NODE_ENV!=="production"&&warn$3("provide() can only be used inside setup().");else{let n=currentInstance.provides;const r=currentInstance.parent&&currentInstance.parent.provides;r===n&&(n=currentInstance.provides=Object.create(r)),n[e]=t}}function inject(e,t,n=!1){const r=currentInstance||currentRenderingInstance;if(r){const c=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(c&&e in c)return c[e];if(arguments.length>1)return n&&isFunction$2(t)?t.call(r.proxy):t;process.env.NODE_ENV!=="production"&&warn$3(`injection "${String(e)}" not found.`)}else process.env.NODE_ENV!=="production"&&warn$3("inject() can only be used inside setup() or functional components.")}function watchEffect(e,t){return doWatch(e,null,t)}function watchPostEffect(e,t){return doWatch(e,null,process.env.NODE_ENV!=="production"?Object.assign(Object.assign({},t),{flush:"post"}):{flush:"post"})}function watchSyncEffect(e,t){return doWatch(e,null,process.env.NODE_ENV!=="production"?Object.assign(Object.assign({},t),{flush:"sync"}):{flush:"sync"})}const INITIAL_WATCHER_VALUE={};function watch(e,t,n){return process.env.NODE_ENV!=="production"&&!isFunction$2(t)&&warn$3("`watch(fn, options?)` signature has been moved to a separate API. Use `watchEffect(fn, options?)` instead. `watch` now only supports `watch(source, cb, options?) signature."),doWatch(e,t,n)}function doWatch(e,t,{immediate:n,deep:r,flush:c,onTrack:d,onTrigger:g}=EMPTY_OBJ){process.env.NODE_ENV!=="production"&&!t&&(n!==void 0&&warn$3('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),r!==void 0&&warn$3('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'));const o=W=>{warn$3("Invalid watch source: ",W,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},v=currentInstance;let x,E=!1,k=!1;if(isRef$1(e)?(x=()=>e.value,E=isShallow$1(e)):isReactive(e)?(x=()=>e,r=!0):isArray$8(e)?(k=!0,E=e.some(W=>isReactive(W)||isShallow$1(W)),x=()=>e.map(W=>{if(isRef$1(W))return W.value;if(isReactive(W))return traverse(W);if(isFunction$2(W))return callWithErrorHandling$1(W,v,2);process.env.NODE_ENV!=="production"&&o(W)})):isFunction$2(e)?t?x=()=>callWithErrorHandling$1(e,v,2):x=()=>{if(!(v&&v.isUnmounted))return S&&S(),callWithAsyncErrorHandling(e,v,3,[N])}:(x=NOOP,process.env.NODE_ENV!=="production"&&o(e)),t&&r){const W=x;x=()=>traverse(W())}let S,N=W=>{S=z.onStop=()=>{callWithErrorHandling$1(W,v,4)}},L;if(isInSSRComponentSetup)if(N=NOOP,t?n&&callWithAsyncErrorHandling(t,v,3,[x(),k?[]:void 0,N]):x(),c==="sync"){const W=useSSRContext();L=W.__watcherHandles||(W.__watcherHandles=[])}else return NOOP;let P=k?new Array(e.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const O=()=>{if(!!z.active)if(t){const W=z.run();(r||E||(k?W.some((Z,re)=>hasChanged(Z,P[re])):hasChanged(W,P)))&&(S&&S(),callWithAsyncErrorHandling(t,v,3,[W,P===INITIAL_WATCHER_VALUE?void 0:k&&P[0]===INITIAL_WATCHER_VALUE?[]:P,N]),P=W)}else z.run()};O.allowRecurse=!!t;let V;c==="sync"?V=O:c==="post"?V=()=>queuePostRenderEffect(O,v&&v.suspense):(O.pre=!0,v&&(O.id=v.uid),V=()=>queueJob(O));const z=new ReactiveEffect(x,V);process.env.NODE_ENV!=="production"&&(z.onTrack=d,z.onTrigger=g),t?n?O():P=z.run():c==="post"?queuePostRenderEffect(z.run.bind(z),v&&v.suspense):z.run();const U=()=>{z.stop(),v&&v.scope&&remove$2(v.scope.effects,z)};return L&&L.push(U),U}function instanceWatch(e,t,n){const r=this.proxy,c=isString$3(e)?e.includes(".")?createPathGetter(r,e):()=>r[e]:e.bind(r,r);let d;isFunction$2(t)?d=t:(d=t.handler,n=t);const g=currentInstance;setCurrentInstance(this);const o=doWatch(c,d.bind(r),n);return g?setCurrentInstance(g):unsetCurrentInstance(),o}function createPathGetter(e,t){const n=t.split(".");return()=>{let r=e;for(let c=0;c<n.length&&r;c++)r=r[n[c]];return r}}function traverse(e,t){if(!isObject$6(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),isRef$1(e))traverse(e.value,t);else if(isArray$8(e))for(let n=0;n<e.length;n++)traverse(e[n],t);else if(isSet$1(e)||isMap$1(e))e.forEach(n=>{traverse(n,t)});else if(isPlainObject$1(e))for(const n in e)traverse(e[n],t);return e}function useTransitionState(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{e.isMounted=!0}),onBeforeUnmount(()=>{e.isUnmounting=!0}),e}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(e,{slots:t}){const n=getCurrentInstance(),r=useTransitionState();let c;return()=>{const d=t.default&&getTransitionRawChildren(t.default(),!0);if(!d||!d.length)return;let g=d[0];if(d.length>1){let P=!1;for(const O of d)if(O.type!==Comment$1){if(process.env.NODE_ENV!=="production"&&P){warn$3("<transition> can only be used on a single element or component. Use <transition-group> for lists.");break}if(g=O,P=!0,process.env.NODE_ENV==="production")break}}const o=toRaw$1(e),{mode:v}=o;if(process.env.NODE_ENV!=="production"&&v&&v!=="in-out"&&v!=="out-in"&&v!=="default"&&warn$3(`invalid <transition> mode: ${v}`),r.isLeaving)return emptyPlaceholder(g);const x=getKeepAliveChild(g);if(!x)return emptyPlaceholder(g);const E=resolveTransitionHooks(x,o,r,n);setTransitionHooks(x,E);const k=n.subTree,S=k&&getKeepAliveChild(k);let N=!1;const{getTransitionKey:L}=x.type;if(L){const P=L();c===void 0?c=P:P!==c&&(c=P,N=!0)}if(S&&S.type!==Comment$1&&(!isSameVNodeType(x,S)||N)){const P=resolveTransitionHooks(S,o,r,n);if(setTransitionHooks(S,P),v==="out-in")return r.isLeaving=!0,P.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&n.update()},emptyPlaceholder(g);v==="in-out"&&x.type!==Comment$1&&(P.delayLeave=(O,V,z)=>{const U=getLeavingNodesForType(r,S);U[String(S.key)]=S,O._leaveCb=()=>{V(),O._leaveCb=void 0,delete E.delayedLeave},E.delayedLeave=z})}return g}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function resolveTransitionHooks(e,t,n,r){const{appear:c,mode:d,persisted:g=!1,onBeforeEnter:o,onEnter:v,onAfterEnter:x,onEnterCancelled:E,onBeforeLeave:k,onLeave:S,onAfterLeave:N,onLeaveCancelled:L,onBeforeAppear:P,onAppear:O,onAfterAppear:V,onAppearCancelled:z}=t,U=String(e.key),W=getLeavingNodesForType(n,e),Z=(se,ce)=>{se&&callWithAsyncErrorHandling(se,r,9,ce)},re=(se,ce)=>{const me=ce[1];Z(se,ce),isArray$8(se)?se.every(we=>we.length<=1)&&me():se.length<=1&&me()},oe={mode:d,persisted:g,beforeEnter(se){let ce=o;if(!n.isMounted)if(c)ce=P||o;else return;se._leaveCb&&se._leaveCb(!0);const me=W[U];me&&isSameVNodeType(e,me)&&me.el._leaveCb&&me.el._leaveCb(),Z(ce,[se])},enter(se){let ce=v,me=x,we=E;if(!n.isMounted)if(c)ce=O||v,me=V||x,we=z||E;else return;let ae=!1;const Ce=se._enterCb=Fe=>{ae||(ae=!0,Fe?Z(we,[se]):Z(me,[se]),oe.delayedLeave&&oe.delayedLeave(),se._enterCb=void 0)};ce?re(ce,[se,Ce]):Ce()},leave(se,ce){const me=String(e.key);if(se._enterCb&&se._enterCb(!0),n.isUnmounting)return ce();Z(k,[se]);let we=!1;const ae=se._leaveCb=Ce=>{we||(we=!0,ce(),Ce?Z(L,[se]):Z(N,[se]),se._leaveCb=void 0,W[me]===e&&delete W[me])};W[me]=e,S?re(S,[se,ae]):ae()},clone(se){return resolveTransitionHooks(se,t,n,r)}};return oe}function emptyPlaceholder(e){if(isKeepAlive(e))return e=cloneVNode(e),e.children=null,e}function getKeepAliveChild(e){return isKeepAlive(e)?e.children?e.children[0]:void 0:e}function setTransitionHooks(e,t){e.shapeFlag&6&&e.component?setTransitionHooks(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function getTransitionRawChildren(e,t=!1,n){let r=[],c=0;for(let d=0;d<e.length;d++){let g=e[d];const o=n==null?g.key:String(n)+String(g.key!=null?g.key:d);g.type===Fragment?(g.patchFlag&128&&c++,r=r.concat(getTransitionRawChildren(g.children,t,o))):(t||g.type!==Comment$1)&&r.push(o!=null?cloneVNode(g,{key:o}):g)}if(c>1)for(let d=0;d<r.length;d++)r[d].patchFlag=-2;return r}function defineComponent(e){return isFunction$2(e)?{setup:e,name:e.name}:e}const isAsyncWrapper=e=>!!e.type.__asyncLoader;function defineAsyncComponent(e){isFunction$2(e)&&(e={loader:e});const{loader:t,loadingComponent:n,errorComponent:r,delay:c=200,timeout:d,suspensible:g=!0,onError:o}=e;let v=null,x,E=0;const k=()=>(E++,v=null,S()),S=()=>{let N;return v||(N=v=t().catch(L=>{if(L=L instanceof Error?L:new Error(String(L)),o)return new Promise((P,O)=>{o(L,()=>P(k()),()=>O(L),E+1)});throw L}).then(L=>{if(N!==v&&v)return v;if(process.env.NODE_ENV!=="production"&&!L&&warn$3("Async component loader resolved to undefined. If you are using retry(), make sure to return its return value."),L&&(L.__esModule||L[Symbol.toStringTag]==="Module")&&(L=L.default),process.env.NODE_ENV!=="production"&&L&&!isObject$6(L)&&!isFunction$2(L))throw new Error(`Invalid async component load result: ${L}`);return x=L,L}))};return defineComponent({name:"AsyncComponentWrapper",__asyncLoader:S,get __asyncResolved(){return x},setup(){const N=currentInstance;if(x)return()=>createInnerComp(x,N);const L=z=>{v=null,handleError$1(z,N,13,!r)};if(g&&N.suspense||isInSSRComponentSetup)return S().then(z=>()=>createInnerComp(z,N)).catch(z=>(L(z),()=>r?createVNode(r,{error:z}):null));const P=ref(!1),O=ref(),V=ref(!!c);return c&&setTimeout(()=>{V.value=!1},c),d!=null&&setTimeout(()=>{if(!P.value&&!O.value){const z=new Error(`Async component timed out after ${d}ms.`);L(z),O.value=z}},d),S().then(()=>{P.value=!0,N.parent&&isKeepAlive(N.parent.vnode)&&queueJob(N.parent.update)}).catch(z=>{L(z),O.value=z}),()=>{if(P.value&&x)return createInnerComp(x,N);if(O.value&&r)return createVNode(r,{error:O.value});if(n&&!V.value)return createVNode(n)}}})}function createInnerComp(e,t){const{ref:n,props:r,children:c,ce:d}=t.vnode,g=createVNode(e,r,c);return g.ref=n,g.ce=d,delete t.vnode.ce,g}const isKeepAlive=e=>e.type.__isKeepAlive,KeepAliveImpl={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=getCurrentInstance(),r=n.ctx;if(!r.renderer)return()=>{const z=t.default&&t.default();return z&&z.length===1?z[0]:z};const c=new Map,d=new Set;let g=null;process.env.NODE_ENV!=="production"&&(n.__v_cache=c);const o=n.suspense,{renderer:{p:v,m:x,um:E,o:{createElement:k}}}=r,S=k("div");r.activate=(z,U,W,Z,re)=>{const oe=z.component;x(z,U,W,0,o),v(oe.vnode,z,U,W,oe,o,Z,z.slotScopeIds,re),queuePostRenderEffect(()=>{oe.isDeactivated=!1,oe.a&&invokeArrayFns(oe.a);const se=z.props&&z.props.onVnodeMounted;se&&invokeVNodeHook(se,oe.parent,z)},o),process.env.NODE_ENV!=="production"&&devtoolsComponentAdded(oe)},r.deactivate=z=>{const U=z.component;x(z,S,null,1,o),queuePostRenderEffect(()=>{U.da&&invokeArrayFns(U.da);const W=z.props&&z.props.onVnodeUnmounted;W&&invokeVNodeHook(W,U.parent,z),U.isDeactivated=!0},o),process.env.NODE_ENV!=="production"&&devtoolsComponentAdded(U)};function N(z){resetShapeFlag(z),E(z,n,o,!0)}function L(z){c.forEach((U,W)=>{const Z=getComponentName$1(U.type);Z&&(!z||!z(Z))&&P(W)})}function P(z){const U=c.get(z);!g||U.type!==g.type?N(U):g&&resetShapeFlag(g),c.delete(z),d.delete(z)}watch(()=>[e.include,e.exclude],([z,U])=>{z&&L(W=>matches(z,W)),U&&L(W=>!matches(U,W))},{flush:"post",deep:!0});let O=null;const V=()=>{O!=null&&c.set(O,getInnerChild(n.subTree))};return onMounted(V),onUpdated(V),onBeforeUnmount(()=>{c.forEach(z=>{const{subTree:U,suspense:W}=n,Z=getInnerChild(U);if(z.type===Z.type){resetShapeFlag(Z);const re=Z.component.da;re&&queuePostRenderEffect(re,W);return}N(z)})}),()=>{if(O=null,!t.default)return null;const z=t.default(),U=z[0];if(z.length>1)return process.env.NODE_ENV!=="production"&&warn$3("KeepAlive should contain exactly one component child."),g=null,z;if(!isVNode$1(U)||!(U.shapeFlag&4)&&!(U.shapeFlag&128))return g=null,U;let W=getInnerChild(U);const Z=W.type,re=getComponentName$1(isAsyncWrapper(W)?W.type.__asyncResolved||{}:Z),{include:oe,exclude:se,max:ce}=e;if(oe&&(!re||!matches(oe,re))||se&&re&&matches(se,re))return g=W,U;const me=W.key==null?Z:W.key,we=c.get(me);return W.el&&(W=cloneVNode(W),U.shapeFlag&128&&(U.ssContent=W)),O=me,we?(W.el=we.el,W.component=we.component,W.transition&&setTransitionHooks(W,W.transition),W.shapeFlag|=512,d.delete(me),d.add(me)):(d.add(me),ce&&d.size>parseInt(ce,10)&&P(d.values().next().value)),W.shapeFlag|=256,g=W,isSuspense(U.type)?U:W}}},KeepAlive=KeepAliveImpl;function matches(e,t){return isArray$8(e)?e.some(n=>matches(n,t)):isString$3(e)?e.split(",").includes(t):e.test?e.test(t):!1}function onActivated(e,t){registerKeepAliveHook(e,"a",t)}function onDeactivated(e,t){registerKeepAliveHook(e,"da",t)}function registerKeepAliveHook(e,t,n=currentInstance){const r=e.__wdc||(e.__wdc=()=>{let c=n;for(;c;){if(c.isDeactivated)return;c=c.parent}return e()});if(injectHook(t,r,n),n){let c=n.parent;for(;c&&c.parent;)isKeepAlive(c.parent.vnode)&&injectToKeepAliveRoot(r,t,n,c),c=c.parent}}function injectToKeepAliveRoot(e,t,n,r){const c=injectHook(t,e,r,!0);onUnmounted(()=>{remove$2(r[t],c)},n)}function resetShapeFlag(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function getInnerChild(e){return e.shapeFlag&128?e.ssContent:e}function injectHook(e,t,n=currentInstance,r=!1){if(n){const c=n[e]||(n[e]=[]),d=t.__weh||(t.__weh=(...g)=>{if(n.isUnmounted)return;pauseTracking(),setCurrentInstance(n);const o=callWithAsyncErrorHandling(t,n,e,g);return unsetCurrentInstance(),resetTracking(),o});return r?c.unshift(d):c.push(d),d}else if(process.env.NODE_ENV!=="production"){const c=toHandlerKey(ErrorTypeStrings$1[e].replace(/ hook$/,""));warn$3(`${c} is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.`)}}const createHook=e=>(t,n=currentInstance)=>(!isInSSRComponentSetup||e==="sp")&&injectHook(e,(...r)=>t(...r),n),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,t=currentInstance){injectHook("ec",e,t)}function validateDirectiveName(e){isBuiltInDirective(e)&&warn$3("Do not use built-in directive ids as custom directive id: "+e)}function withDirectives(e,t){const n=currentRenderingInstance;if(n===null)return process.env.NODE_ENV!=="production"&&warn$3("withDirectives can only be used inside render functions."),e;const r=getExposeProxy(n)||n.proxy,c=e.dirs||(e.dirs=[]);for(let d=0;d<t.length;d++){let[g,o,v,x=EMPTY_OBJ]=t[d];g&&(isFunction$2(g)&&(g={mounted:g,updated:g}),g.deep&&traverse(o),c.push({dir:g,instance:r,value:o,oldValue:void 0,arg:v,modifiers:x}))}return e}function invokeDirectiveHook(e,t,n,r){const c=e.dirs,d=t&&t.dirs;for(let g=0;g<c.length;g++){const o=c[g];d&&(o.oldValue=d[g].value);let v=o.dir[r];v&&(pauseTracking(),callWithAsyncErrorHandling(v,n,8,[e.el,o,e,t]),resetTracking())}}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(e,t){return resolveAsset(COMPONENTS,e,!0,t)||e}const NULL_DYNAMIC_COMPONENT=Symbol();function resolveDynamicComponent(e){return isString$3(e)?resolveAsset(COMPONENTS,e,!1)||e:e||NULL_DYNAMIC_COMPONENT}function resolveDirective(e){return resolveAsset(DIRECTIVES,e)}function resolveAsset(e,t,n=!0,r=!1){const c=currentRenderingInstance||currentInstance;if(c){const d=c.type;if(e===COMPONENTS){const o=getComponentName$1(d,!1);if(o&&(o===t||o===camelize(t)||o===capitalize$1(camelize(t))))return d}const g=resolve(c[e]||d[e],t)||resolve(c.appContext[e],t);if(!g&&r)return d;if(process.env.NODE_ENV!=="production"&&n&&!g){const o=e===COMPONENTS?`
If this is a native custom element, make sure to exclude it from component resolution via compilerOptions.isCustomElement.`:"";warn$3(`Failed to resolve ${e.slice(0,-1)}: ${t}${o}`)}return g}else process.env.NODE_ENV!=="production"&&warn$3(`resolve${capitalize$1(e.slice(0,-1))} can only be used in render() or setup().`)}function resolve(e,t){return e&&(e[t]||e[camelize(t)]||e[capitalize$1(camelize(t))])}function renderList(e,t,n,r){let c;const d=n&&n[r];if(isArray$8(e)||isString$3(e)){c=new Array(e.length);for(let g=0,o=e.length;g<o;g++)c[g]=t(e[g],g,void 0,d&&d[g])}else if(typeof e=="number"){process.env.NODE_ENV!=="production"&&!Number.isInteger(e)&&warn$3(`The v-for range expect an integer value but got ${e}.`),c=new Array(e);for(let g=0;g<e;g++)c[g]=t(g+1,g,void 0,d&&d[g])}else if(isObject$6(e))if(e[Symbol.iterator])c=Array.from(e,(g,o)=>t(g,o,void 0,d&&d[o]));else{const g=Object.keys(e);c=new Array(g.length);for(let o=0,v=g.length;o<v;o++){const x=g[o];c[o]=t(e[x],x,o,d&&d[o])}}else c=[];return n&&(n[r]=c),c}function createSlots(e,t){for(let n=0;n<t.length;n++){const r=t[n];if(isArray$8(r))for(let c=0;c<r.length;c++)e[r[c].name]=r[c].fn;else r&&(e[r.name]=r.key?(...c)=>{const d=r.fn(...c);return d&&(d.key=r.key),d}:r.fn)}return e}function renderSlot(e,t,n={},r,c){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return t!=="default"&&(n.name=t),createVNode("slot",n,r&&r());let d=e[t];process.env.NODE_ENV!=="production"&&d&&d.length>1&&(warn$3("SSR-optimized slot function detected in a non-SSR-optimized render function. You need to mark this component with $dynamic-slots in the parent template."),d=()=>[]),d&&d._c&&(d._d=!1),openBlock();const g=d&&ensureValidVNode(d(n)),o=createBlock(Fragment,{key:n.key||g&&g.key||`_${t}`},g||(r?r():[]),g&&e._===1?64:-2);return!c&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),d&&d._c&&(d._d=!0),o}function ensureValidVNode(e){return e.some(t=>isVNode$1(t)?!(t.type===Comment$1||t.type===Fragment&&!ensureValidVNode(t.children)):!0)?e:null}function toHandlers(e,t){const n={};if(process.env.NODE_ENV!=="production"&&!isObject$6(e))return warn$3("v-on with no argument expects an object value."),n;for(const r in e)n[t&&/[A-Z]/.test(r)?`on:${r}`:toHandlerKey(r)]=e[r];return n}const getPublicInstance=e=>e?isStatefulComponent(e)?getExposeProxy(e)||e.proxy:getPublicInstance(e.parent):null,publicPropertiesMap=extend$4(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>process.env.NODE_ENV!=="production"?shallowReadonly(e.props):e.props,$attrs:e=>process.env.NODE_ENV!=="production"?shallowReadonly(e.attrs):e.attrs,$slots:e=>process.env.NODE_ENV!=="production"?shallowReadonly(e.slots):e.slots,$refs:e=>process.env.NODE_ENV!=="production"?shallowReadonly(e.refs):e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>queueJob(e.update)),$nextTick:e=>e.n||(e.n=nextTick$1.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),isReservedPrefix=e=>e==="_"||e==="$",hasSetupBinding=(e,t)=>e!==EMPTY_OBJ&&!e.__isScriptSetup&&hasOwn$2(e,t),PublicInstanceProxyHandlers={get({_:e},t){const{ctx:n,setupState:r,data:c,props:d,accessCache:g,type:o,appContext:v}=e;if(process.env.NODE_ENV!=="production"&&t==="__isVue")return!0;let x;if(t[0]!=="$"){const N=g[t];if(N!==void 0)switch(N){case 1:return r[t];case 2:return c[t];case 4:return n[t];case 3:return d[t]}else{if(hasSetupBinding(r,t))return g[t]=1,r[t];if(c!==EMPTY_OBJ&&hasOwn$2(c,t))return g[t]=2,c[t];if((x=e.propsOptions[0])&&hasOwn$2(x,t))return g[t]=3,d[t];if(n!==EMPTY_OBJ&&hasOwn$2(n,t))return g[t]=4,n[t];shouldCacheAccess&&(g[t]=0)}}const E=publicPropertiesMap[t];let k,S;if(E)return t==="$attrs"&&(track(e,"get",t),process.env.NODE_ENV!=="production"&&markAttrsAccessed()),E(e);if((k=o.__cssModules)&&(k=k[t]))return k;if(n!==EMPTY_OBJ&&hasOwn$2(n,t))return g[t]=4,n[t];if(S=v.config.globalProperties,hasOwn$2(S,t))return S[t];process.env.NODE_ENV!=="production"&&currentRenderingInstance&&(!isString$3(t)||t.indexOf("__v")!==0)&&(c!==EMPTY_OBJ&&isReservedPrefix(t[0])&&hasOwn$2(c,t)?warn$3(`Property ${JSON.stringify(t)} must be accessed via $data because it starts with a reserved character ("$" or "_") and is not proxied on the render context.`):e===currentRenderingInstance&&warn$3(`Property ${JSON.stringify(t)} was accessed during render but is not defined on instance.`))},set({_:e},t,n){const{data:r,setupState:c,ctx:d}=e;return hasSetupBinding(c,t)?(c[t]=n,!0):process.env.NODE_ENV!=="production"&&c.__isScriptSetup&&hasOwn$2(c,t)?(warn$3(`Cannot mutate <script setup> binding "${t}" from Options API.`),!1):r!==EMPTY_OBJ&&hasOwn$2(r,t)?(r[t]=n,!0):hasOwn$2(e.props,t)?(process.env.NODE_ENV!=="production"&&warn$3(`Attempting to mutate prop "${t}". Props are readonly.`),!1):t[0]==="$"&&t.slice(1)in e?(process.env.NODE_ENV!=="production"&&warn$3(`Attempting to mutate public property "${t}". Properties starting with $ are reserved and readonly.`),!1):(process.env.NODE_ENV!=="production"&&t in e.appContext.config.globalProperties?Object.defineProperty(d,t,{enumerable:!0,configurable:!0,value:n}):d[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:c,propsOptions:d}},g){let o;return!!n[g]||e!==EMPTY_OBJ&&hasOwn$2(e,g)||hasSetupBinding(t,g)||(o=d[0])&&hasOwn$2(o,g)||hasOwn$2(r,g)||hasOwn$2(publicPropertiesMap,g)||hasOwn$2(c.config.globalProperties,g)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:hasOwn$2(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};process.env.NODE_ENV!=="production"&&(PublicInstanceProxyHandlers.ownKeys=e=>(warn$3("Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead."),Reflect.ownKeys(e)));const RuntimeCompiledPublicInstanceProxyHandlers=extend$4({},PublicInstanceProxyHandlers,{get(e,t){if(t!==Symbol.unscopables)return PublicInstanceProxyHandlers.get(e,t,e)},has(e,t){const n=t[0]!=="_"&&!isGloballyWhitelisted(t);return process.env.NODE_ENV!=="production"&&!n&&PublicInstanceProxyHandlers.has(e,t)&&warn$3(`Property ${JSON.stringify(t)} should not start with _ which is a reserved prefix for Vue internals.`),n}});function createDevRenderContext(e){const t={};return Object.defineProperty(t,"_",{configurable:!0,enumerable:!1,get:()=>e}),Object.keys(publicPropertiesMap).forEach(n=>{Object.defineProperty(t,n,{configurable:!0,enumerable:!1,get:()=>publicPropertiesMap[n](e),set:NOOP})}),t}function exposePropsOnRenderContext(e){const{ctx:t,propsOptions:[n]}=e;n&&Object.keys(n).forEach(r=>{Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>e.props[r],set:NOOP})})}function exposeSetupStateOnRenderContext(e){const{ctx:t,setupState:n}=e;Object.keys(toRaw$1(n)).forEach(r=>{if(!n.__isScriptSetup){if(isReservedPrefix(r[0])){warn$3(`setup() return property ${JSON.stringify(r)} should not start with "$" or "_" which are reserved prefixes for Vue internals.`);return}Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>n[r],set:NOOP})}})}function createDuplicateChecker(){const e=Object.create(null);return(t,n)=>{e[n]?warn$3(`${t} property "${n}" is already defined in ${e[n]}.`):e[n]=t}}let shouldCacheAccess=!0;function applyOptions(e){const t=resolveMergedOptions(e),n=e.proxy,r=e.ctx;shouldCacheAccess=!1,t.beforeCreate&&callHook$1(t.beforeCreate,e,"bc");const{data:c,computed:d,methods:g,watch:o,provide:v,inject:x,created:E,beforeMount:k,mounted:S,beforeUpdate:N,updated:L,activated:P,deactivated:O,beforeDestroy:V,beforeUnmount:z,destroyed:U,unmounted:W,render:Z,renderTracked:re,renderTriggered:oe,errorCaptured:se,serverPrefetch:ce,expose:me,inheritAttrs:we,components:ae,directives:Ce,filters:Fe}=t,it=process.env.NODE_ENV!=="production"?createDuplicateChecker():null;if(process.env.NODE_ENV!=="production"){const[ke]=e.propsOptions;if(ke)for(const ze in ke)it("Props",ze)}if(x&&resolveInjections(x,r,it,e.appContext.config.unwrapInjectedRef),g)for(const ke in g){const ze=g[ke];isFunction$2(ze)?(process.env.NODE_ENV!=="production"?Object.defineProperty(r,ke,{value:ze.bind(n),configurable:!0,enumerable:!0,writable:!0}):r[ke]=ze.bind(n),process.env.NODE_ENV!=="production"&&it("Methods",ke)):process.env.NODE_ENV!=="production"&&warn$3(`Method "${ke}" has type "${typeof ze}" in the component definition. Did you reference the function correctly?`)}if(c){process.env.NODE_ENV!=="production"&&!isFunction$2(c)&&warn$3("The data option must be a function. Plain object usage is no longer supported.");const ke=c.call(n,n);if(process.env.NODE_ENV!=="production"&&isPromise(ke)&&warn$3("data() returned a Promise - note data() cannot be async; If you intend to perform data fetching before component renders, use async setup() + <Suspense>."),!isObject$6(ke))process.env.NODE_ENV!=="production"&&warn$3("data() should return an object.");else if(e.data=reactive(ke),process.env.NODE_ENV!=="production")for(const ze in ke)it("Data",ze),isReservedPrefix(ze[0])||Object.defineProperty(r,ze,{configurable:!0,enumerable:!0,get:()=>ke[ze],set:NOOP})}if(shouldCacheAccess=!0,d)for(const ke in d){const ze=d[ke],nt=isFunction$2(ze)?ze.bind(n,n):isFunction$2(ze.get)?ze.get.bind(n,n):NOOP;process.env.NODE_ENV!=="production"&&nt===NOOP&&warn$3(`Computed property "${ke}" has no getter.`);const mt=!isFunction$2(ze)&&isFunction$2(ze.set)?ze.set.bind(n):process.env.NODE_ENV!=="production"?()=>{warn$3(`Write operation failed: computed property "${ke}" is readonly.`)}:NOOP,qt=computed({get:nt,set:mt});Object.defineProperty(r,ke,{enumerable:!0,configurable:!0,get:()=>qt.value,set:un=>qt.value=un}),process.env.NODE_ENV!=="production"&&it("Computed",ke)}if(o)for(const ke in o)createWatcher(o[ke],r,n,ke);if(v){const ke=isFunction$2(v)?v.call(n):v;Reflect.ownKeys(ke).forEach(ze=>{provide(ze,ke[ze])})}E&&callHook$1(E,e,"c");function _e(ke,ze){isArray$8(ze)?ze.forEach(nt=>ke(nt.bind(n))):ze&&ke(ze.bind(n))}if(_e(onBeforeMount,k),_e(onMounted,S),_e(onBeforeUpdate,N),_e(onUpdated,L),_e(onActivated,P),_e(onDeactivated,O),_e(onErrorCaptured,se),_e(onRenderTracked,re),_e(onRenderTriggered,oe),_e(onBeforeUnmount,z),_e(onUnmounted,W),_e(onServerPrefetch,ce),isArray$8(me))if(me.length){const ke=e.exposed||(e.exposed={});me.forEach(ze=>{Object.defineProperty(ke,ze,{get:()=>n[ze],set:nt=>n[ze]=nt})})}else e.exposed||(e.exposed={});Z&&e.render===NOOP&&(e.render=Z),we!=null&&(e.inheritAttrs=we),ae&&(e.components=ae),Ce&&(e.directives=Ce)}function resolveInjections(e,t,n=NOOP,r=!1){isArray$8(e)&&(e=normalizeInject(e));for(const c in e){const d=e[c];let g;isObject$6(d)?"default"in d?g=inject(d.from||c,d.default,!0):g=inject(d.from||c):g=inject(d),isRef$1(g)?r?Object.defineProperty(t,c,{enumerable:!0,configurable:!0,get:()=>g.value,set:o=>g.value=o}):(process.env.NODE_ENV!=="production"&&warn$3(`injected property "${c}" is a ref and will be auto-unwrapped and no longer needs \`.value\` in the next minor release. To opt-in to the new behavior now, set \`app.config.unwrapInjectedRef = true\` (this config is temporary and will not be needed in the future.)`),t[c]=g):t[c]=g,process.env.NODE_ENV!=="production"&&n("Inject",c)}}function callHook$1(e,t,n){callWithAsyncErrorHandling(isArray$8(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function createWatcher(e,t,n,r){const c=r.includes(".")?createPathGetter(n,r):()=>n[r];if(isString$3(e)){const d=t[e];isFunction$2(d)?watch(c,d):process.env.NODE_ENV!=="production"&&warn$3(`Invalid watch handler specified by key "${e}"`,d)}else if(isFunction$2(e))watch(c,e.bind(n));else if(isObject$6(e))if(isArray$8(e))e.forEach(d=>createWatcher(d,t,n,r));else{const d=isFunction$2(e.handler)?e.handler.bind(n):t[e.handler];isFunction$2(d)?watch(c,d,e):process.env.NODE_ENV!=="production"&&warn$3(`Invalid watch handler specified by key "${e.handler}"`,d)}else process.env.NODE_ENV!=="production"&&warn$3(`Invalid watch option: "${r}"`,e)}function resolveMergedOptions(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:c,optionsCache:d,config:{optionMergeStrategies:g}}=e.appContext,o=d.get(t);let v;return o?v=o:!c.length&&!n&&!r?v=t:(v={},c.length&&c.forEach(x=>mergeOptions$1(v,x,g,!0)),mergeOptions$1(v,t,g)),isObject$6(t)&&d.set(t,v),v}function mergeOptions$1(e,t,n,r=!1){const{mixins:c,extends:d}=t;d&&mergeOptions$1(e,d,n,!0),c&&c.forEach(g=>mergeOptions$1(e,g,n,!0));for(const g in t)if(r&&g==="expose")process.env.NODE_ENV!=="production"&&warn$3('"expose" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.');else{const o=internalOptionMergeStrats[g]||n&&n[g];e[g]=o?o(e[g],t[g]):t[g]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,t){return t?e?function(){return extend$4(isFunction$2(e)?e.call(this,this):e,isFunction$2(t)?t.call(this,this):t)}:t:e}function mergeInject(e,t){return mergeObjectOptions(normalizeInject(e),normalizeInject(t))}function normalizeInject(e){if(isArray$8(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function mergeAsArray(e,t){return e?[...new Set([].concat(e,t))]:t}function mergeObjectOptions(e,t){return e?extend$4(extend$4(Object.create(null),e),t):t}function mergeWatchOptions(e,t){if(!e)return t;if(!t)return e;const n=extend$4(Object.create(null),e);for(const r in t)n[r]=mergeAsArray(e[r],t[r]);return n}function initProps(e,t,n,r=!1){const c={},d={};def(d,InternalObjectKey,1),e.propsDefaults=Object.create(null),setFullProps(e,t,c,d);for(const g in e.propsOptions[0])g in c||(c[g]=void 0);process.env.NODE_ENV!=="production"&&validateProps(t||{},c,e),n?e.props=r?c:shallowReactive(c):e.type.props?e.props=c:e.props=d,e.attrs=d}function isInHmrContext(e){for(;e;){if(e.type.__hmrId)return!0;e=e.parent}}function updateProps(e,t,n,r){const{props:c,attrs:d,vnode:{patchFlag:g}}=e,o=toRaw$1(c),[v]=e.propsOptions;let x=!1;if(!(process.env.NODE_ENV!=="production"&&isInHmrContext(e))&&(r||g>0)&&!(g&16)){if(g&8){const E=e.vnode.dynamicProps;for(let k=0;k<E.length;k++){let S=E[k];if(isEmitListener(e.emitsOptions,S))continue;const N=t[S];if(v)if(hasOwn$2(d,S))N!==d[S]&&(d[S]=N,x=!0);else{const L=camelize(S);c[L]=resolvePropValue(v,o,L,N,e,!1)}else N!==d[S]&&(d[S]=N,x=!0)}}}else{setFullProps(e,t,c,d)&&(x=!0);let E;for(const k in o)(!t||!hasOwn$2(t,k)&&((E=hyphenate(k))===k||!hasOwn$2(t,E)))&&(v?n&&(n[k]!==void 0||n[E]!==void 0)&&(c[k]=resolvePropValue(v,o,k,void 0,e,!0)):delete c[k]);if(d!==o)for(const k in d)(!t||!hasOwn$2(t,k)&&!0)&&(delete d[k],x=!0)}x&&trigger$1(e,"set","$attrs"),process.env.NODE_ENV!=="production"&&validateProps(t||{},c,e)}function setFullProps(e,t,n,r){const[c,d]=e.propsOptions;let g=!1,o;if(t)for(let v in t){if(isReservedProp(v))continue;const x=t[v];let E;c&&hasOwn$2(c,E=camelize(v))?!d||!d.includes(E)?n[E]=x:(o||(o={}))[E]=x:isEmitListener(e.emitsOptions,v)||(!(v in r)||x!==r[v])&&(r[v]=x,g=!0)}if(d){const v=toRaw$1(n),x=o||EMPTY_OBJ;for(let E=0;E<d.length;E++){const k=d[E];n[k]=resolvePropValue(c,v,k,x[k],e,!hasOwn$2(x,k))}}return g}function resolvePropValue(e,t,n,r,c,d){const g=e[n];if(g!=null){const o=hasOwn$2(g,"default");if(o&&r===void 0){const v=g.default;if(g.type!==Function&&isFunction$2(v)){const{propsDefaults:x}=c;n in x?r=x[n]:(setCurrentInstance(c),r=x[n]=v.call(null,t),unsetCurrentInstance())}else r=v}g[0]&&(d&&!o?r=!1:g[1]&&(r===""||r===hyphenate(n))&&(r=!0))}return r}function normalizePropsOptions(e,t,n=!1){const r=t.propsCache,c=r.get(e);if(c)return c;const d=e.props,g={},o=[];let v=!1;if(!isFunction$2(e)){const E=k=>{v=!0;const[S,N]=normalizePropsOptions(k,t,!0);extend$4(g,S),N&&o.push(...N)};!n&&t.mixins.length&&t.mixins.forEach(E),e.extends&&E(e.extends),e.mixins&&e.mixins.forEach(E)}if(!d&&!v)return isObject$6(e)&&r.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray$8(d))for(let E=0;E<d.length;E++){process.env.NODE_ENV!=="production"&&!isString$3(d[E])&&warn$3("props must be strings when using array syntax.",d[E]);const k=camelize(d[E]);validatePropName(k)&&(g[k]=EMPTY_OBJ)}else if(d){process.env.NODE_ENV!=="production"&&!isObject$6(d)&&warn$3("invalid props options",d);for(const E in d){const k=camelize(E);if(validatePropName(k)){const S=d[E],N=g[k]=isArray$8(S)||isFunction$2(S)?{type:S}:Object.assign({},S);if(N){const L=getTypeIndex(Boolean,N.type),P=getTypeIndex(String,N.type);N[0]=L>-1,N[1]=P<0||L<P,(L>-1||hasOwn$2(N,"default"))&&o.push(k)}}}}const x=[g,o];return isObject$6(e)&&r.set(e,x),x}function validatePropName(e){return e[0]!=="$"?!0:(process.env.NODE_ENV!=="production"&&warn$3(`Invalid prop name: "${e}" is a reserved property.`),!1)}function getType(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function isSameType(e,t){return getType(e)===getType(t)}function getTypeIndex(e,t){return isArray$8(t)?t.findIndex(n=>isSameType(n,e)):isFunction$2(t)&&isSameType(t,e)?0:-1}function validateProps(e,t,n){const r=toRaw$1(t),c=n.propsOptions[0];for(const d in c){let g=c[d];g!=null&&validateProp(d,r[d],g,!hasOwn$2(e,d)&&!hasOwn$2(e,hyphenate(d)))}}function validateProp(e,t,n,r){const{type:c,required:d,validator:g}=n;if(d&&r){warn$3('Missing required prop: "'+e+'"');return}if(!(t==null&&!n.required)){if(c!=null&&c!==!0){let o=!1;const v=isArray$8(c)?c:[c],x=[];for(let E=0;E<v.length&&!o;E++){const{valid:k,expectedType:S}=assertType(t,v[E]);x.push(S||""),o=k}if(!o){warn$3(getInvalidTypeMessage(e,t,x));return}}g&&!g(t)&&warn$3('Invalid prop: custom validator check failed for prop "'+e+'".')}}const isSimpleType=makeMap("String,Number,Boolean,Function,Symbol,BigInt");function assertType(e,t){let n;const r=getType(t);if(isSimpleType(r)){const c=typeof e;n=c===r.toLowerCase(),!n&&c==="object"&&(n=e instanceof t)}else r==="Object"?n=isObject$6(e):r==="Array"?n=isArray$8(e):r==="null"?n=e===null:n=e instanceof t;return{valid:n,expectedType:r}}function getInvalidTypeMessage(e,t,n){let r=`Invalid prop: type check failed for prop "${e}". Expected ${n.map(capitalize$1).join(" | ")}`;const c=n[0],d=toRawType(t),g=styleValue(t,c),o=styleValue(t,d);return n.length===1&&isExplicable(c)&&!isBoolean$2(c,d)&&(r+=` with value ${g}`),r+=`, got ${d} `,isExplicable(d)&&(r+=`with value ${o}.`),r}function styleValue(e,t){return t==="String"?`"${e}"`:t==="Number"?`${Number(e)}`:`${e}`}function isExplicable(e){return["string","number","boolean"].some(n=>e.toLowerCase()===n)}function isBoolean$2(...e){return e.some(t=>t.toLowerCase()==="boolean")}const isInternalKey=e=>e[0]==="_"||e==="$stable",normalizeSlotValue=e=>isArray$8(e)?e.map(normalizeVNode$1):[normalizeVNode$1(e)],normalizeSlot$1=(e,t,n)=>{if(t._n)return t;const r=withCtx((...c)=>(process.env.NODE_ENV!=="production"&&currentInstance&&warn$3(`Slot "${e}" invoked outside of the render function: this will not track dependencies used in the slot. Invoke the slot function inside the render function instead.`),normalizeSlotValue(t(...c))),n);return r._c=!1,r},normalizeObjectSlots=(e,t,n)=>{const r=e._ctx;for(const c in e){if(isInternalKey(c))continue;const d=e[c];if(isFunction$2(d))t[c]=normalizeSlot$1(c,d,r);else if(d!=null){process.env.NODE_ENV!=="production"&&warn$3(`Non-function value encountered for slot "${c}". Prefer function slots for better performance.`);const g=normalizeSlotValue(d);t[c]=()=>g}}},normalizeVNodeSlots=(e,t)=>{process.env.NODE_ENV!=="production"&&!isKeepAlive(e.vnode)&&warn$3("Non-function value encountered for default slot. Prefer function slots for better performance.");const n=normalizeSlotValue(t);e.slots.default=()=>n},initSlots=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=toRaw$1(t),def(t,"_",n)):normalizeObjectSlots(t,e.slots={})}else e.slots={},t&&normalizeVNodeSlots(e,t);def(e.slots,InternalObjectKey,1)},updateSlots=(e,t,n)=>{const{vnode:r,slots:c}=e;let d=!0,g=EMPTY_OBJ;if(r.shapeFlag&32){const o=t._;o?process.env.NODE_ENV!=="production"&&isHmrUpdating?extend$4(c,t):n&&o===1?d=!1:(extend$4(c,t),!n&&o===1&&delete c._):(d=!t.$stable,normalizeObjectSlots(t,c)),g=t}else t&&(normalizeVNodeSlots(e,t),g={default:1});if(d)for(const o in c)!isInternalKey(o)&&!(o in g)&&delete c[o]};function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid=0;function createAppAPI(e,t){return function(r,c=null){isFunction$2(r)||(r=Object.assign({},r)),c!=null&&!isObject$6(c)&&(process.env.NODE_ENV!=="production"&&warn$3("root props passed to app.mount() must be an object."),c=null);const d=createAppContext(),g=new Set;let o=!1;const v=d.app={_uid:uid++,_component:r,_props:c,_container:null,_context:d,_instance:null,version:version$2,get config(){return d.config},set config(x){process.env.NODE_ENV!=="production"&&warn$3("app.config cannot be replaced. Modify individual options instead.")},use(x,...E){return g.has(x)?process.env.NODE_ENV!=="production"&&warn$3("Plugin has already been applied to target app."):x&&isFunction$2(x.install)?(g.add(x),x.install(v,...E)):isFunction$2(x)?(g.add(x),x(v,...E)):process.env.NODE_ENV!=="production"&&warn$3('A plugin must either be a function or an object with an "install" function.'),v},mixin(x){return d.mixins.includes(x)?process.env.NODE_ENV!=="production"&&warn$3("Mixin has already been applied to target app"+(x.name?`: ${x.name}`:"")):d.mixins.push(x),v},component(x,E){return process.env.NODE_ENV!=="production"&&validateComponentName(x,d.config),E?(process.env.NODE_ENV!=="production"&&d.components[x]&&warn$3(`Component "${x}" has already been registered in target app.`),d.components[x]=E,v):d.components[x]},directive(x,E){return process.env.NODE_ENV!=="production"&&validateDirectiveName(x),E?(process.env.NODE_ENV!=="production"&&d.directives[x]&&warn$3(`Directive "${x}" has already been registered in target app.`),d.directives[x]=E,v):d.directives[x]},mount(x,E,k){if(o)process.env.NODE_ENV!=="production"&&warn$3("App has already been mounted.\nIf you want to remount the same app, move your app creation logic into a factory function and create fresh app instances for each mount - e.g. `const createMyApp = () => createApp(App)`");else{process.env.NODE_ENV!=="production"&&x.__vue_app__&&warn$3("There is already an app instance mounted on the host container.\n If you want to mount another app on the same host container, you need to unmount the previous app by calling `app.unmount()` first.");const S=createVNode(r,c);return S.appContext=d,process.env.NODE_ENV!=="production"&&(d.reload=()=>{e(cloneVNode(S),x,k)}),E&&t?t(S,x):e(S,x,k),o=!0,v._container=x,x.__vue_app__=v,process.env.NODE_ENV!=="production"&&(v._instance=S.component,devtoolsInitApp(v,version$2)),getExposeProxy(S.component)||S.component.proxy}},unmount(){o?(e(null,v._container),process.env.NODE_ENV!=="production"&&(v._instance=null,devtoolsUnmountApp(v)),delete v._container.__vue_app__):process.env.NODE_ENV!=="production"&&warn$3("Cannot unmount an app that is not mounted.")},provide(x,E){return process.env.NODE_ENV!=="production"&&x in d.provides&&warn$3(`App already provides property with key "${String(x)}". It will be overwritten with the new value.`),d.provides[x]=E,v}};return v}}function setRef(e,t,n,r,c=!1){if(isArray$8(e)){e.forEach((S,N)=>setRef(S,t&&(isArray$8(t)?t[N]:t),n,r,c));return}if(isAsyncWrapper(r)&&!c)return;const d=r.shapeFlag&4?getExposeProxy(r.component)||r.component.proxy:r.el,g=c?null:d,{i:o,r:v}=e;if(process.env.NODE_ENV!=="production"&&!o){warn$3("Missing ref owner context. ref cannot be used on hoisted vnodes. A vnode with ref must be created inside the render function.");return}const x=t&&t.r,E=o.refs===EMPTY_OBJ?o.refs={}:o.refs,k=o.setupState;if(x!=null&&x!==v&&(isString$3(x)?(E[x]=null,hasOwn$2(k,x)&&(k[x]=null)):isRef$1(x)&&(x.value=null)),isFunction$2(v))callWithErrorHandling$1(v,o,12,[g,E]);else{const S=isString$3(v),N=isRef$1(v);if(S||N){const L=()=>{if(e.f){const P=S?hasOwn$2(k,v)?k[v]:E[v]:v.value;c?isArray$8(P)&&remove$2(P,d):isArray$8(P)?P.includes(d)||P.push(d):S?(E[v]=[d],hasOwn$2(k,v)&&(k[v]=E[v])):(v.value=[d],e.k&&(E[e.k]=v.value))}else S?(E[v]=g,hasOwn$2(k,v)&&(k[v]=g)):N?(v.value=g,e.k&&(E[e.k]=g)):process.env.NODE_ENV!=="production"&&warn$3("Invalid template ref type:",v,`(${typeof v})`)};g?(L.id=-1,queuePostRenderEffect(L,n)):L()}else process.env.NODE_ENV!=="production"&&warn$3("Invalid template ref type:",v,`(${typeof v})`)}}let hasMismatch=!1;const isSVGContainer=e=>/svg/.test(e.namespaceURI)&&e.tagName!=="foreignObject",isComment$1=e=>e.nodeType===8;function createHydrationFunctions(e){const{mt:t,p:n,o:{patchProp:r,createText:c,nextSibling:d,parentNode:g,remove:o,insert:v,createComment:x}}=e,E=(V,z)=>{if(!z.hasChildNodes()){process.env.NODE_ENV!=="production"&&warn$3("Attempting to hydrate existing markup but container is empty. Performing full mount instead."),n(null,V,z),flushPostFlushCbs(),z._vnode=V;return}hasMismatch=!1,k(z.firstChild,V,null,null,null),flushPostFlushCbs(),z._vnode=V,hasMismatch&&console.error("Hydration completed but contains mismatches.")},k=(V,z,U,W,Z,re=!1)=>{const oe=isComment$1(V)&&V.data==="[",se=()=>P(V,z,U,W,Z,oe),{type:ce,ref:me,shapeFlag:we,patchFlag:ae}=z;let Ce=V.nodeType;z.el=V,ae===-2&&(re=!1,z.dynamicChildren=null);let Fe=null;switch(ce){case Text:Ce!==3?z.children===""?(v(z.el=c(""),g(V),V),Fe=V):Fe=se():(V.data!==z.children&&(hasMismatch=!0,process.env.NODE_ENV!=="production"&&warn$3(`Hydration text mismatch:
- Client: ${JSON.stringify(V.data)}
- Server: ${JSON.stringify(z.children)}`),V.data=z.children),Fe=d(V));break;case Comment$1:Ce!==8||oe?Fe=se():Fe=d(V);break;case Static:if(oe&&(V=d(V),Ce=V.nodeType),Ce===1||Ce===3){Fe=V;const it=!z.children.length;for(let _e=0;_e<z.staticCount;_e++)it&&(z.children+=Fe.nodeType===1?Fe.outerHTML:Fe.data),_e===z.staticCount-1&&(z.anchor=Fe),Fe=d(Fe);return oe?d(Fe):Fe}else se();break;case Fragment:oe?Fe=L(V,z,U,W,Z,re):Fe=se();break;default:if(we&1)Ce!==1||z.type.toLowerCase()!==V.tagName.toLowerCase()?Fe=se():Fe=S(V,z,U,W,Z,re);else if(we&6){z.slotScopeIds=Z;const it=g(V);if(t(z,it,null,U,W,isSVGContainer(it),re),Fe=oe?O(V):d(V),Fe&&isComment$1(Fe)&&Fe.data==="teleport end"&&(Fe=d(Fe)),isAsyncWrapper(z)){let _e;oe?(_e=createVNode(Fragment),_e.anchor=Fe?Fe.previousSibling:it.lastChild):_e=V.nodeType===3?createTextVNode(""):createVNode("div"),_e.el=V,z.component.subTree=_e}}else we&64?Ce!==8?Fe=se():Fe=z.type.hydrate(V,z,U,W,Z,re,e,N):we&128?Fe=z.type.hydrate(V,z,U,W,isSVGContainer(g(V)),Z,re,e,k):process.env.NODE_ENV!=="production"&&warn$3("Invalid HostVNode type:",ce,`(${typeof ce})`)}return me!=null&&setRef(me,null,W,z),Fe},S=(V,z,U,W,Z,re)=>{re=re||!!z.dynamicChildren;const{type:oe,props:se,patchFlag:ce,shapeFlag:me,dirs:we}=z,ae=oe==="input"&&we||oe==="option";if(process.env.NODE_ENV!=="production"||ae||ce!==-1){if(we&&invokeDirectiveHook(z,null,U,"created"),se)if(ae||!re||ce&48)for(const Fe in se)(ae&&Fe.endsWith("value")||isOn(Fe)&&!isReservedProp(Fe))&&r(V,Fe,null,se[Fe],!1,void 0,U);else se.onClick&&r(V,"onClick",null,se.onClick,!1,void 0,U);let Ce;if((Ce=se&&se.onVnodeBeforeMount)&&invokeVNodeHook(Ce,U,z),we&&invokeDirectiveHook(z,null,U,"beforeMount"),((Ce=se&&se.onVnodeMounted)||we)&&queueEffectWithSuspense(()=>{Ce&&invokeVNodeHook(Ce,U,z),we&&invokeDirectiveHook(z,null,U,"mounted")},W),me&16&&!(se&&(se.innerHTML||se.textContent))){let Fe=N(V.firstChild,z,V,U,W,Z,re),it=!1;for(;Fe;){hasMismatch=!0,process.env.NODE_ENV!=="production"&&!it&&(warn$3(`Hydration children mismatch in <${z.type}>: server rendered element contains more child nodes than client vdom.`),it=!0);const _e=Fe;Fe=Fe.nextSibling,o(_e)}}else me&8&&V.textContent!==z.children&&(hasMismatch=!0,process.env.NODE_ENV!=="production"&&warn$3(`Hydration text content mismatch in <${z.type}>:
- Client: ${V.textContent}
- Server: ${z.children}`),V.textContent=z.children)}return V.nextSibling},N=(V,z,U,W,Z,re,oe)=>{oe=oe||!!z.dynamicChildren;const se=z.children,ce=se.length;let me=!1;for(let we=0;we<ce;we++){const ae=oe?se[we]:se[we]=normalizeVNode$1(se[we]);if(V)V=k(V,ae,W,Z,re,oe);else{if(ae.type===Text&&!ae.children)continue;hasMismatch=!0,process.env.NODE_ENV!=="production"&&!me&&(warn$3(`Hydration children mismatch in <${U.tagName.toLowerCase()}>: server rendered element contains fewer child nodes than client vdom.`),me=!0),n(null,ae,U,null,W,Z,isSVGContainer(U),re)}}return V},L=(V,z,U,W,Z,re)=>{const{slotScopeIds:oe}=z;oe&&(Z=Z?Z.concat(oe):oe);const se=g(V),ce=N(d(V),z,se,U,W,Z,re);return ce&&isComment$1(ce)&&ce.data==="]"?d(z.anchor=ce):(hasMismatch=!0,v(z.anchor=x("]"),se,ce),ce)},P=(V,z,U,W,Z,re)=>{if(hasMismatch=!0,process.env.NODE_ENV!=="production"&&warn$3(`Hydration node mismatch:
- Client vnode:`,z.type,`
- Server rendered DOM:`,V,V.nodeType===3?"(text)":isComment$1(V)&&V.data==="["?"(start of fragment)":""),z.el=null,re){const ce=O(V);for(;;){const me=d(V);if(me&&me!==ce)o(me);else break}}const oe=d(V),se=g(V);return o(V),n(null,z,se,oe,U,W,isSVGContainer(se),Z),oe},O=V=>{let z=0;for(;V;)if(V=d(V),V&&isComment$1(V)&&(V.data==="["&&z++,V.data==="]")){if(z===0)return d(V);z--}return V};return[E,k]}let supported$1,perf$1;function startMeasure(e,t){e.appContext.config.performance&&isSupported()&&perf$1.mark(`vue-${t}-${e.uid}`),process.env.NODE_ENV!=="production"&&devtoolsPerfStart(e,t,isSupported()?perf$1.now():Date.now())}function endMeasure(e,t){if(e.appContext.config.performance&&isSupported()){const n=`vue-${t}-${e.uid}`,r=n+":end";perf$1.mark(r),perf$1.measure(`<${formatComponentName$1(e,e.type)}> ${t}`,n,r),perf$1.clearMarks(n),perf$1.clearMarks(r)}process.env.NODE_ENV!=="production"&&devtoolsPerfEnd(e,t,isSupported()?perf$1.now():Date.now())}function isSupported(){return supported$1!==void 0||(typeof window<"u"&&window.performance?(supported$1=!0,perf$1=window.performance):supported$1=!1),supported$1}function initFeatureFlags(){const e=[];if(process.env.NODE_ENV!=="production"&&e.length){const t=e.length>1;console.warn(`Feature flag${t?"s":""} ${e.join(", ")} ${t?"are":"is"} not explicitly defined. You are running the esm-bundler build of Vue, which expects these compile-time feature flags to be globally injected via the bundler config in order to get better tree-shaking in the production bundle.

For more details, see https://link.vuejs.org/feature-flags.`)}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function createHydrationRenderer(e){return baseCreateRenderer(e,createHydrationFunctions)}function baseCreateRenderer(e,t){initFeatureFlags();const n=getGlobalThis();n.__VUE__=!0,process.env.NODE_ENV!=="production"&&setDevtoolsHook(n.__VUE_DEVTOOLS_GLOBAL_HOOK__,n);const{insert:r,remove:c,patchProp:d,createElement:g,createText:o,createComment:v,setText:x,setElementText:E,parentNode:k,nextSibling:S,setScopeId:N=NOOP,insertStaticContent:L}=e,P=(Ee,Ne,et,xt=null,Ke=null,Rt=null,gt=!1,tt=null,kt=process.env.NODE_ENV!=="production"&&isHmrUpdating?!1:!!Ne.dynamicChildren)=>{if(Ee===Ne)return;Ee&&!isSameVNodeType(Ee,Ne)&&(xt=jt(Ee),fn(Ee,Ke,Rt,!0),Ee=null),Ne.patchFlag===-2&&(kt=!1,Ne.dynamicChildren=null);const{type:dt,ref:Et,shapeFlag:$t}=Ne;switch(dt){case Text:O(Ee,Ne,et,xt);break;case Comment$1:V(Ee,Ne,et,xt);break;case Static:Ee==null?z(Ne,et,xt,gt):process.env.NODE_ENV!=="production"&&U(Ee,Ne,et,gt);break;case Fragment:Ce(Ee,Ne,et,xt,Ke,Rt,gt,tt,kt);break;default:$t&1?re(Ee,Ne,et,xt,Ke,Rt,gt,tt,kt):$t&6?Fe(Ee,Ne,et,xt,Ke,Rt,gt,tt,kt):$t&64||$t&128?dt.process(Ee,Ne,et,xt,Ke,Rt,gt,tt,kt,dn):process.env.NODE_ENV!=="production"&&warn$3("Invalid VNode type:",dt,`(${typeof dt})`)}Et!=null&&Ke&&setRef(Et,Ee&&Ee.ref,Rt,Ne||Ee,!Ne)},O=(Ee,Ne,et,xt)=>{if(Ee==null)r(Ne.el=o(Ne.children),et,xt);else{const Ke=Ne.el=Ee.el;Ne.children!==Ee.children&&x(Ke,Ne.children)}},V=(Ee,Ne,et,xt)=>{Ee==null?r(Ne.el=v(Ne.children||""),et,xt):Ne.el=Ee.el},z=(Ee,Ne,et,xt)=>{[Ee.el,Ee.anchor]=L(Ee.children,Ne,et,xt,Ee.el,Ee.anchor)},U=(Ee,Ne,et,xt)=>{if(Ne.children!==Ee.children){const Ke=S(Ee.anchor);Z(Ee),[Ne.el,Ne.anchor]=L(Ne.children,et,Ke,xt)}else Ne.el=Ee.el,Ne.anchor=Ee.anchor},W=({el:Ee,anchor:Ne},et,xt)=>{let Ke;for(;Ee&&Ee!==Ne;)Ke=S(Ee),r(Ee,et,xt),Ee=Ke;r(Ne,et,xt)},Z=({el:Ee,anchor:Ne})=>{let et;for(;Ee&&Ee!==Ne;)et=S(Ee),c(Ee),Ee=et;c(Ne)},re=(Ee,Ne,et,xt,Ke,Rt,gt,tt,kt)=>{gt=gt||Ne.type==="svg",Ee==null?oe(Ne,et,xt,Ke,Rt,gt,tt,kt):me(Ee,Ne,Ke,Rt,gt,tt,kt)},oe=(Ee,Ne,et,xt,Ke,Rt,gt,tt)=>{let kt,dt;const{type:Et,props:$t,shapeFlag:Je,transition:ut,dirs:pt}=Ee;if(kt=Ee.el=g(Ee.type,Rt,$t&&$t.is,$t),Je&8?E(kt,Ee.children):Je&16&&ce(Ee.children,kt,null,xt,Ke,Rt&&Et!=="foreignObject",gt,tt),pt&&invokeDirectiveHook(Ee,null,xt,"created"),$t){for(const Kt in $t)Kt!=="value"&&!isReservedProp(Kt)&&d(kt,Kt,null,$t[Kt],Rt,Ee.children,xt,Ke,bt);"value"in $t&&d(kt,"value",null,$t.value),(dt=$t.onVnodeBeforeMount)&&invokeVNodeHook(dt,xt,Ee)}se(kt,Ee,Ee.scopeId,gt,xt),process.env.NODE_ENV!=="production"&&(Object.defineProperty(kt,"__vnode",{value:Ee,enumerable:!1}),Object.defineProperty(kt,"__vueParentComponent",{value:xt,enumerable:!1})),pt&&invokeDirectiveHook(Ee,null,xt,"beforeMount");const Xt=(!Ke||Ke&&!Ke.pendingBranch)&&ut&&!ut.persisted;Xt&&ut.beforeEnter(kt),r(kt,Ne,et),((dt=$t&&$t.onVnodeMounted)||Xt||pt)&&queuePostRenderEffect(()=>{dt&&invokeVNodeHook(dt,xt,Ee),Xt&&ut.enter(kt),pt&&invokeDirectiveHook(Ee,null,xt,"mounted")},Ke)},se=(Ee,Ne,et,xt,Ke)=>{if(et&&N(Ee,et),xt)for(let Rt=0;Rt<xt.length;Rt++)N(Ee,xt[Rt]);if(Ke){let Rt=Ke.subTree;if(process.env.NODE_ENV!=="production"&&Rt.patchFlag>0&&Rt.patchFlag&2048&&(Rt=filterSingleRoot(Rt.children)||Rt),Ne===Rt){const gt=Ke.vnode;se(Ee,gt,gt.scopeId,gt.slotScopeIds,Ke.parent)}}},ce=(Ee,Ne,et,xt,Ke,Rt,gt,tt,kt=0)=>{for(let dt=kt;dt<Ee.length;dt++){const Et=Ee[dt]=tt?cloneIfMounted(Ee[dt]):normalizeVNode$1(Ee[dt]);P(null,Et,Ne,et,xt,Ke,Rt,gt,tt)}},me=(Ee,Ne,et,xt,Ke,Rt,gt)=>{const tt=Ne.el=Ee.el;let{patchFlag:kt,dynamicChildren:dt,dirs:Et}=Ne;kt|=Ee.patchFlag&16;const $t=Ee.props||EMPTY_OBJ,Je=Ne.props||EMPTY_OBJ;let ut;et&&toggleRecurse(et,!1),(ut=Je.onVnodeBeforeUpdate)&&invokeVNodeHook(ut,et,Ne,Ee),Et&&invokeDirectiveHook(Ne,Ee,et,"beforeUpdate"),et&&toggleRecurse(et,!0),process.env.NODE_ENV!=="production"&&isHmrUpdating&&(kt=0,gt=!1,dt=null);const pt=Ke&&Ne.type!=="foreignObject";if(dt?(we(Ee.dynamicChildren,dt,tt,et,xt,pt,Rt),process.env.NODE_ENV!=="production"&&et&&et.type.__hmrId&&traverseStaticChildren(Ee,Ne)):gt||nt(Ee,Ne,tt,null,et,xt,pt,Rt,!1),kt>0){if(kt&16)ae(tt,Ne,$t,Je,et,xt,Ke);else if(kt&2&&$t.class!==Je.class&&d(tt,"class",null,Je.class,Ke),kt&4&&d(tt,"style",$t.style,Je.style,Ke),kt&8){const Xt=Ne.dynamicProps;for(let Kt=0;Kt<Xt.length;Kt++){const yn=Xt[Kt],Gn=$t[yn],gi=Je[yn];(gi!==Gn||yn==="value")&&d(tt,yn,Gn,gi,Ke,Ee.children,et,xt,bt)}}kt&1&&Ee.children!==Ne.children&&E(tt,Ne.children)}else!gt&&dt==null&&ae(tt,Ne,$t,Je,et,xt,Ke);((ut=Je.onVnodeUpdated)||Et)&&queuePostRenderEffect(()=>{ut&&invokeVNodeHook(ut,et,Ne,Ee),Et&&invokeDirectiveHook(Ne,Ee,et,"updated")},xt)},we=(Ee,Ne,et,xt,Ke,Rt,gt)=>{for(let tt=0;tt<Ne.length;tt++){const kt=Ee[tt],dt=Ne[tt],Et=kt.el&&(kt.type===Fragment||!isSameVNodeType(kt,dt)||kt.shapeFlag&70)?k(kt.el):et;P(kt,dt,Et,null,xt,Ke,Rt,gt,!0)}},ae=(Ee,Ne,et,xt,Ke,Rt,gt)=>{if(et!==xt){if(et!==EMPTY_OBJ)for(const tt in et)!isReservedProp(tt)&&!(tt in xt)&&d(Ee,tt,et[tt],null,gt,Ne.children,Ke,Rt,bt);for(const tt in xt){if(isReservedProp(tt))continue;const kt=xt[tt],dt=et[tt];kt!==dt&&tt!=="value"&&d(Ee,tt,dt,kt,gt,Ne.children,Ke,Rt,bt)}"value"in xt&&d(Ee,"value",et.value,xt.value)}},Ce=(Ee,Ne,et,xt,Ke,Rt,gt,tt,kt)=>{const dt=Ne.el=Ee?Ee.el:o(""),Et=Ne.anchor=Ee?Ee.anchor:o("");let{patchFlag:$t,dynamicChildren:Je,slotScopeIds:ut}=Ne;process.env.NODE_ENV!=="production"&&(isHmrUpdating||$t&2048)&&($t=0,kt=!1,Je=null),ut&&(tt=tt?tt.concat(ut):ut),Ee==null?(r(dt,et,xt),r(Et,et,xt),ce(Ne.children,et,Et,Ke,Rt,gt,tt,kt)):$t>0&&$t&64&&Je&&Ee.dynamicChildren?(we(Ee.dynamicChildren,Je,et,Ke,Rt,gt,tt),process.env.NODE_ENV!=="production"&&Ke&&Ke.type.__hmrId?traverseStaticChildren(Ee,Ne):(Ne.key!=null||Ke&&Ne===Ke.subTree)&&traverseStaticChildren(Ee,Ne,!0)):nt(Ee,Ne,et,Et,Ke,Rt,gt,tt,kt)},Fe=(Ee,Ne,et,xt,Ke,Rt,gt,tt,kt)=>{Ne.slotScopeIds=tt,Ee==null?Ne.shapeFlag&512?Ke.ctx.activate(Ne,et,xt,gt,kt):it(Ne,et,xt,Ke,Rt,gt,kt):_e(Ee,Ne,kt)},it=(Ee,Ne,et,xt,Ke,Rt,gt)=>{const tt=Ee.component=createComponentInstance$1(Ee,xt,Ke);if(process.env.NODE_ENV!=="production"&&tt.type.__hmrId&&registerHMR(tt),process.env.NODE_ENV!=="production"&&(pushWarningContext$1(Ee),startMeasure(tt,"mount")),isKeepAlive(Ee)&&(tt.ctx.renderer=dn),process.env.NODE_ENV!=="production"&&startMeasure(tt,"init"),setupComponent$1(tt),process.env.NODE_ENV!=="production"&&endMeasure(tt,"init"),tt.asyncDep){if(Ke&&Ke.registerDep(tt,ke),!Ee.el){const kt=tt.subTree=createVNode(Comment$1);V(null,kt,Ne,et)}return}ke(tt,Ee,Ne,et,Ke,Rt,gt),process.env.NODE_ENV!=="production"&&(popWarningContext$1(),endMeasure(tt,"mount"))},_e=(Ee,Ne,et)=>{const xt=Ne.component=Ee.component;if(shouldUpdateComponent(Ee,Ne,et))if(xt.asyncDep&&!xt.asyncResolved){process.env.NODE_ENV!=="production"&&pushWarningContext$1(Ne),ze(xt,Ne,et),process.env.NODE_ENV!=="production"&&popWarningContext$1();return}else xt.next=Ne,invalidateJob(xt.update),xt.update();else Ne.el=Ee.el,xt.vnode=Ne},ke=(Ee,Ne,et,xt,Ke,Rt,gt)=>{const tt=()=>{if(Ee.isMounted){let{next:Et,bu:$t,u:Je,parent:ut,vnode:pt}=Ee,Xt=Et,Kt;process.env.NODE_ENV!=="production"&&pushWarningContext$1(Et||Ee.vnode),toggleRecurse(Ee,!1),Et?(Et.el=pt.el,ze(Ee,Et,gt)):Et=pt,$t&&invokeArrayFns($t),(Kt=Et.props&&Et.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Kt,ut,Et,pt),toggleRecurse(Ee,!0),process.env.NODE_ENV!=="production"&&startMeasure(Ee,"render");const yn=renderComponentRoot$1(Ee);process.env.NODE_ENV!=="production"&&endMeasure(Ee,"render");const Gn=Ee.subTree;Ee.subTree=yn,process.env.NODE_ENV!=="production"&&startMeasure(Ee,"patch"),P(Gn,yn,k(Gn.el),jt(Gn),Ee,Ke,Rt),process.env.NODE_ENV!=="production"&&endMeasure(Ee,"patch"),Et.el=yn.el,Xt===null&&updateHOCHostEl(Ee,yn.el),Je&&queuePostRenderEffect(Je,Ke),(Kt=Et.props&&Et.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Kt,ut,Et,pt),Ke),process.env.NODE_ENV!=="production"&&devtoolsComponentUpdated(Ee),process.env.NODE_ENV!=="production"&&popWarningContext$1()}else{let Et;const{el:$t,props:Je}=Ne,{bm:ut,m:pt,parent:Xt}=Ee,Kt=isAsyncWrapper(Ne);if(toggleRecurse(Ee,!1),ut&&invokeArrayFns(ut),!Kt&&(Et=Je&&Je.onVnodeBeforeMount)&&invokeVNodeHook(Et,Xt,Ne),toggleRecurse(Ee,!0),$t&&Ht){const yn=()=>{process.env.NODE_ENV!=="production"&&startMeasure(Ee,"render"),Ee.subTree=renderComponentRoot$1(Ee),process.env.NODE_ENV!=="production"&&endMeasure(Ee,"render"),process.env.NODE_ENV!=="production"&&startMeasure(Ee,"hydrate"),Ht($t,Ee.subTree,Ee,Ke,null),process.env.NODE_ENV!=="production"&&endMeasure(Ee,"hydrate")};Kt?Ne.type.__asyncLoader().then(()=>!Ee.isUnmounted&&yn()):yn()}else{process.env.NODE_ENV!=="production"&&startMeasure(Ee,"render");const yn=Ee.subTree=renderComponentRoot$1(Ee);process.env.NODE_ENV!=="production"&&endMeasure(Ee,"render"),process.env.NODE_ENV!=="production"&&startMeasure(Ee,"patch"),P(null,yn,et,xt,Ee,Ke,Rt),process.env.NODE_ENV!=="production"&&endMeasure(Ee,"patch"),Ne.el=yn.el}if(pt&&queuePostRenderEffect(pt,Ke),!Kt&&(Et=Je&&Je.onVnodeMounted)){const yn=Ne;queuePostRenderEffect(()=>invokeVNodeHook(Et,Xt,yn),Ke)}(Ne.shapeFlag&256||Xt&&isAsyncWrapper(Xt.vnode)&&Xt.vnode.shapeFlag&256)&&Ee.a&&queuePostRenderEffect(Ee.a,Ke),Ee.isMounted=!0,process.env.NODE_ENV!=="production"&&devtoolsComponentAdded(Ee),Ne=et=xt=null}},kt=Ee.effect=new ReactiveEffect(tt,()=>queueJob(dt),Ee.scope),dt=Ee.update=()=>kt.run();dt.id=Ee.uid,toggleRecurse(Ee,!0),process.env.NODE_ENV!=="production"&&(kt.onTrack=Ee.rtc?Et=>invokeArrayFns(Ee.rtc,Et):void 0,kt.onTrigger=Ee.rtg?Et=>invokeArrayFns(Ee.rtg,Et):void 0,dt.ownerInstance=Ee),dt()},ze=(Ee,Ne,et)=>{Ne.component=Ee;const xt=Ee.vnode.props;Ee.vnode=Ne,Ee.next=null,updateProps(Ee,Ne.props,xt,et),updateSlots(Ee,Ne.children,et),pauseTracking(),flushPreFlushCbs(),resetTracking()},nt=(Ee,Ne,et,xt,Ke,Rt,gt,tt,kt=!1)=>{const dt=Ee&&Ee.children,Et=Ee?Ee.shapeFlag:0,$t=Ne.children,{patchFlag:Je,shapeFlag:ut}=Ne;if(Je>0){if(Je&128){qt(dt,$t,et,xt,Ke,Rt,gt,tt,kt);return}else if(Je&256){mt(dt,$t,et,xt,Ke,Rt,gt,tt,kt);return}}ut&8?(Et&16&&bt(dt,Ke,Rt),$t!==dt&&E(et,$t)):Et&16?ut&16?qt(dt,$t,et,xt,Ke,Rt,gt,tt,kt):bt(dt,Ke,Rt,!0):(Et&8&&E(et,""),ut&16&&ce($t,et,xt,Ke,Rt,gt,tt,kt))},mt=(Ee,Ne,et,xt,Ke,Rt,gt,tt,kt)=>{Ee=Ee||EMPTY_ARR,Ne=Ne||EMPTY_ARR;const dt=Ee.length,Et=Ne.length,$t=Math.min(dt,Et);let Je;for(Je=0;Je<$t;Je++){const ut=Ne[Je]=kt?cloneIfMounted(Ne[Je]):normalizeVNode$1(Ne[Je]);P(Ee[Je],ut,et,null,Ke,Rt,gt,tt,kt)}dt>Et?bt(Ee,Ke,Rt,!0,!1,$t):ce(Ne,et,xt,Ke,Rt,gt,tt,kt,$t)},qt=(Ee,Ne,et,xt,Ke,Rt,gt,tt,kt)=>{let dt=0;const Et=Ne.length;let $t=Ee.length-1,Je=Et-1;for(;dt<=$t&&dt<=Je;){const ut=Ee[dt],pt=Ne[dt]=kt?cloneIfMounted(Ne[dt]):normalizeVNode$1(Ne[dt]);if(isSameVNodeType(ut,pt))P(ut,pt,et,null,Ke,Rt,gt,tt,kt);else break;dt++}for(;dt<=$t&&dt<=Je;){const ut=Ee[$t],pt=Ne[Je]=kt?cloneIfMounted(Ne[Je]):normalizeVNode$1(Ne[Je]);if(isSameVNodeType(ut,pt))P(ut,pt,et,null,Ke,Rt,gt,tt,kt);else break;$t--,Je--}if(dt>$t){if(dt<=Je){const ut=Je+1,pt=ut<Et?Ne[ut].el:xt;for(;dt<=Je;)P(null,Ne[dt]=kt?cloneIfMounted(Ne[dt]):normalizeVNode$1(Ne[dt]),et,pt,Ke,Rt,gt,tt,kt),dt++}}else if(dt>Je)for(;dt<=$t;)fn(Ee[dt],Ke,Rt,!0),dt++;else{const ut=dt,pt=dt,Xt=new Map;for(dt=pt;dt<=Je;dt++){const ci=Ne[dt]=kt?cloneIfMounted(Ne[dt]):normalizeVNode$1(Ne[dt]);ci.key!=null&&(process.env.NODE_ENV!=="production"&&Xt.has(ci.key)&&warn$3("Duplicate keys found during update:",JSON.stringify(ci.key),"Make sure keys are unique."),Xt.set(ci.key,dt))}let Kt,yn=0;const Gn=Je-pt+1;let gi=!1,Ii=0;const Li=new Array(Gn);for(dt=0;dt<Gn;dt++)Li[dt]=0;for(dt=ut;dt<=$t;dt++){const ci=Ee[dt];if(yn>=Gn){fn(ci,Ke,Rt,!0);continue}let _i;if(ci.key!=null)_i=Xt.get(ci.key);else for(Kt=pt;Kt<=Je;Kt++)if(Li[Kt-pt]===0&&isSameVNodeType(ci,Ne[Kt])){_i=Kt;break}_i===void 0?fn(ci,Ke,Rt,!0):(Li[_i-pt]=dt+1,_i>=Ii?Ii=_i:gi=!0,P(ci,Ne[_i],et,null,Ke,Rt,gt,tt,kt),yn++)}const Mr=gi?getSequence(Li):EMPTY_ARR;for(Kt=Mr.length-1,dt=Gn-1;dt>=0;dt--){const ci=pt+dt,_i=Ne[ci],Yi=ci+1<Et?Ne[ci+1].el:xt;Li[dt]===0?P(null,_i,et,Yi,Ke,Rt,gt,tt,kt):gi&&(Kt<0||dt!==Mr[Kt]?un(_i,et,Yi,2):Kt--)}}},un=(Ee,Ne,et,xt,Ke=null)=>{const{el:Rt,type:gt,transition:tt,children:kt,shapeFlag:dt}=Ee;if(dt&6){un(Ee.component.subTree,Ne,et,xt);return}if(dt&128){Ee.suspense.move(Ne,et,xt);return}if(dt&64){gt.move(Ee,Ne,et,dn);return}if(gt===Fragment){r(Rt,Ne,et);for(let $t=0;$t<kt.length;$t++)un(kt[$t],Ne,et,xt);r(Ee.anchor,Ne,et);return}if(gt===Static){W(Ee,Ne,et);return}if(xt!==2&&dt&1&&tt)if(xt===0)tt.beforeEnter(Rt),r(Rt,Ne,et),queuePostRenderEffect(()=>tt.enter(Rt),Ke);else{const{leave:$t,delayLeave:Je,afterLeave:ut}=tt,pt=()=>r(Rt,Ne,et),Xt=()=>{$t(Rt,()=>{pt(),ut&&ut()})};Je?Je(Rt,pt,Xt):Xt()}else r(Rt,Ne,et)},fn=(Ee,Ne,et,xt=!1,Ke=!1)=>{const{type:Rt,props:gt,ref:tt,children:kt,dynamicChildren:dt,shapeFlag:Et,patchFlag:$t,dirs:Je}=Ee;if(tt!=null&&setRef(tt,null,et,Ee,!0),Et&256){Ne.ctx.deactivate(Ee);return}const ut=Et&1&&Je,pt=!isAsyncWrapper(Ee);let Xt;if(pt&&(Xt=gt&&gt.onVnodeBeforeUnmount)&&invokeVNodeHook(Xt,Ne,Ee),Et&6)Ot(Ee.component,et,xt);else{if(Et&128){Ee.suspense.unmount(et,xt);return}ut&&invokeDirectiveHook(Ee,null,Ne,"beforeUnmount"),Et&64?Ee.type.remove(Ee,Ne,et,Ke,dn,xt):dt&&(Rt!==Fragment||$t>0&&$t&64)?bt(dt,Ne,et,!1,!0):(Rt===Fragment&&$t&384||!Ke&&Et&16)&&bt(kt,Ne,et),xt&&vn(Ee)}(pt&&(Xt=gt&&gt.onVnodeUnmounted)||ut)&&queuePostRenderEffect(()=>{Xt&&invokeVNodeHook(Xt,Ne,Ee),ut&&invokeDirectiveHook(Ee,null,Ne,"unmounted")},et)},vn=Ee=>{const{type:Ne,el:et,anchor:xt,transition:Ke}=Ee;if(Ne===Fragment){process.env.NODE_ENV!=="production"&&Ee.patchFlag>0&&Ee.patchFlag&2048&&Ke&&!Ke.persisted?Ee.children.forEach(gt=>{gt.type===Comment$1?c(gt.el):vn(gt)}):at(et,xt);return}if(Ne===Static){Z(Ee);return}const Rt=()=>{c(et),Ke&&!Ke.persisted&&Ke.afterLeave&&Ke.afterLeave()};if(Ee.shapeFlag&1&&Ke&&!Ke.persisted){const{leave:gt,delayLeave:tt}=Ke,kt=()=>gt(et,Rt);tt?tt(Ee.el,Rt,kt):kt()}else Rt()},at=(Ee,Ne)=>{let et;for(;Ee!==Ne;)et=S(Ee),c(Ee),Ee=et;c(Ne)},Ot=(Ee,Ne,et)=>{process.env.NODE_ENV!=="production"&&Ee.type.__hmrId&&unregisterHMR(Ee);const{bum:xt,scope:Ke,update:Rt,subTree:gt,um:tt}=Ee;xt&&invokeArrayFns(xt),Ke.stop(),Rt&&(Rt.active=!1,fn(gt,Ee,Ne,et)),tt&&queuePostRenderEffect(tt,Ne),queuePostRenderEffect(()=>{Ee.isUnmounted=!0},Ne),Ne&&Ne.pendingBranch&&!Ne.isUnmounted&&Ee.asyncDep&&!Ee.asyncResolved&&Ee.suspenseId===Ne.pendingId&&(Ne.deps--,Ne.deps===0&&Ne.resolve()),process.env.NODE_ENV!=="production"&&devtoolsComponentRemoved(Ee)},bt=(Ee,Ne,et,xt=!1,Ke=!1,Rt=0)=>{for(let gt=Rt;gt<Ee.length;gt++)fn(Ee[gt],Ne,et,xt,Ke)},jt=Ee=>Ee.shapeFlag&6?jt(Ee.component.subTree):Ee.shapeFlag&128?Ee.suspense.next():S(Ee.anchor||Ee.el),gn=(Ee,Ne,et)=>{Ee==null?Ne._vnode&&fn(Ne._vnode,null,null,!0):P(Ne._vnode||null,Ee,Ne,null,null,null,et),flushPreFlushCbs(),flushPostFlushCbs(),Ne._vnode=Ee},dn={p:P,um:fn,m:un,r:vn,mt:it,mc:ce,pc:nt,pbc:we,n:jt,o:e};let hn,Ht;return t&&([hn,Ht]=t(dn)),{render:gn,hydrate:hn,createApp:createAppAPI(gn,hn)}}function toggleRecurse({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function traverseStaticChildren(e,t,n=!1){const r=e.children,c=t.children;if(isArray$8(r)&&isArray$8(c))for(let d=0;d<r.length;d++){const g=r[d];let o=c[d];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=c[d]=cloneIfMounted(c[d]),o.el=g.el),n||traverseStaticChildren(g,o)),o.type===Text&&(o.el=g.el),process.env.NODE_ENV!=="production"&&o.type===Comment$1&&!o.el&&(o.el=g.el)}}function getSequence(e){const t=e.slice(),n=[0];let r,c,d,g,o;const v=e.length;for(r=0;r<v;r++){const x=e[r];if(x!==0){if(c=n[n.length-1],e[c]<x){t[r]=c,n.push(r);continue}for(d=0,g=n.length-1;d<g;)o=d+g>>1,e[n[o]]<x?d=o+1:g=o;x<e[n[d]]&&(d>0&&(t[r]=n[d-1]),n[d]=r)}}for(d=n.length,g=n[d-1];d-- >0;)n[d]=g,g=t[g];return n}const isTeleport=e=>e.__isTeleport,isTeleportDisabled=e=>e&&(e.disabled||e.disabled===""),isTargetSVG=e=>typeof SVGElement<"u"&&e instanceof SVGElement,resolveTarget=(e,t)=>{const n=e&&e.to;if(isString$3(n))if(t){const r=t(n);return r||process.env.NODE_ENV!=="production"&&warn$3(`Failed to locate Teleport target with selector "${n}". Note the target element must exist before the component is mounted - i.e. the target cannot be rendered by the component itself, and ideally should be outside of the entire Vue component tree.`),r}else return process.env.NODE_ENV!=="production"&&warn$3("Current renderer does not support string target for Teleports. (missing querySelector renderer option)"),null;else return process.env.NODE_ENV!=="production"&&!n&&!isTeleportDisabled(e)&&warn$3(`Invalid Teleport target: ${n}`),n},TeleportImpl={__isTeleport:!0,process(e,t,n,r,c,d,g,o,v,x){const{mc:E,pc:k,pbc:S,o:{insert:N,querySelector:L,createText:P,createComment:O}}=x,V=isTeleportDisabled(t.props);let{shapeFlag:z,children:U,dynamicChildren:W}=t;if(process.env.NODE_ENV!=="production"&&isHmrUpdating&&(v=!1,W=null),e==null){const Z=t.el=process.env.NODE_ENV!=="production"?O("teleport start"):P(""),re=t.anchor=process.env.NODE_ENV!=="production"?O("teleport end"):P("");N(Z,n,r),N(re,n,r);const oe=t.target=resolveTarget(t.props,L),se=t.targetAnchor=P("");oe?(N(se,oe),g=g||isTargetSVG(oe)):process.env.NODE_ENV!=="production"&&!V&&warn$3("Invalid Teleport target on mount:",oe,`(${typeof oe})`);const ce=(me,we)=>{z&16&&E(U,me,we,c,d,g,o,v)};V?ce(n,re):oe&&ce(oe,se)}else{t.el=e.el;const Z=t.anchor=e.anchor,re=t.target=e.target,oe=t.targetAnchor=e.targetAnchor,se=isTeleportDisabled(e.props),ce=se?n:re,me=se?Z:oe;if(g=g||isTargetSVG(re),W?(S(e.dynamicChildren,W,ce,c,d,g,o),traverseStaticChildren(e,t,!0)):v||k(e,t,ce,me,c,d,g,o,!1),V)se||moveTeleport(t,n,Z,x,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const we=t.target=resolveTarget(t.props,L);we?moveTeleport(t,we,null,x,0):process.env.NODE_ENV!=="production"&&warn$3("Invalid Teleport target on update:",re,`(${typeof re})`)}else se&&moveTeleport(t,re,oe,x,1)}updateCssVars(t)},remove(e,t,n,r,{um:c,o:{remove:d}},g){const{shapeFlag:o,children:v,anchor:x,targetAnchor:E,target:k,props:S}=e;if(k&&d(E),(g||!isTeleportDisabled(S))&&(d(x),o&16))for(let N=0;N<v.length;N++){const L=v[N];c(L,t,n,!0,!!L.dynamicChildren)}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(e,t,n,{o:{insert:r},m:c},d=2){d===0&&r(e.targetAnchor,t,n);const{el:g,anchor:o,shapeFlag:v,children:x,props:E}=e,k=d===2;if(k&&r(g,t,n),(!k||isTeleportDisabled(E))&&v&16)for(let S=0;S<x.length;S++)c(x[S],t,n,2);k&&r(o,t,n)}function hydrateTeleport(e,t,n,r,c,d,{o:{nextSibling:g,parentNode:o,querySelector:v}},x){const E=t.target=resolveTarget(t.props,v);if(E){const k=E._lpa||E.firstChild;if(t.shapeFlag&16)if(isTeleportDisabled(t.props))t.anchor=x(g(e),t,o(e),n,r,c,d),t.targetAnchor=k;else{t.anchor=g(e);let S=k;for(;S;)if(S=g(S),S&&S.nodeType===8&&S.data==="teleport anchor"){t.targetAnchor=S,E._lpa=t.targetAnchor&&g(t.targetAnchor);break}x(k,t,E,n,r,c,d)}updateCssVars(t)}return t.anchor&&g(t.anchor)}const Teleport=TeleportImpl;function updateCssVars(e){const t=e.ctx;if(t&&t.ut){let n=e.children[0].el;for(;n!==e.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",t.uid),n=n.nextSibling;t.ut()}}const Fragment=Symbol(process.env.NODE_ENV!=="production"?"Fragment":void 0),Text=Symbol(process.env.NODE_ENV!=="production"?"Text":void 0),Comment$1=Symbol(process.env.NODE_ENV!=="production"?"Comment":void 0),Static=Symbol(process.env.NODE_ENV!=="production"?"Static":void 0),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e){isBlockTreeEnabled+=e}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,t,n,r,c,d){return setupBlock(createBaseVNode(e,t,n,r,c,d,!0))}function createBlock(e,t,n,r,c){return setupBlock(createVNode(e,t,n,r,c,!0))}function isVNode$1(e){return e?e.__v_isVNode===!0:!1}function isSameVNodeType(e,t){return process.env.NODE_ENV!=="production"&&t.shapeFlag&6&&hmrDirtyComponents.has(t.type)?(e.shapeFlag&=-257,t.shapeFlag&=-513,!1):e.type===t.type&&e.key===t.key}let vnodeArgsTransformer;function transformVNodeArgs(e){vnodeArgsTransformer=e}const createVNodeWithArgsTransform=(...e)=>_createVNode(...vnodeArgsTransformer?vnodeArgsTransformer(e,currentRenderingInstance):e),InternalObjectKey="__vInternal",normalizeKey=({key:e})=>e!=null?e:null,normalizeRef=({ref:e,ref_key:t,ref_for:n})=>e!=null?isString$3(e)||isRef$1(e)||isFunction$2(e)?{i:currentRenderingInstance,r:e,k:t,f:!!n}:e:null;function createBaseVNode(e,t=null,n=null,r=0,c=null,d=e===Fragment?0:1,g=!1,o=!1){const v={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&normalizeKey(t),ref:t&&normalizeRef(t),scopeId:currentScopeId,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:d,patchFlag:r,dynamicProps:c,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return o?(normalizeChildren(v,n),d&128&&e.normalize(v)):n&&(v.shapeFlag|=isString$3(n)?8:16),process.env.NODE_ENV!=="production"&&v.key!==v.key&&warn$3("VNode created with invalid key (NaN). VNode type:",v.type),isBlockTreeEnabled>0&&!g&&currentBlock&&(v.patchFlag>0||d&6)&&v.patchFlag!==32&&currentBlock.push(v),v}const createVNode=process.env.NODE_ENV!=="production"?createVNodeWithArgsTransform:_createVNode;function _createVNode(e,t=null,n=null,r=0,c=null,d=!1){if((!e||e===NULL_DYNAMIC_COMPONENT)&&(process.env.NODE_ENV!=="production"&&!e&&warn$3(`Invalid vnode type when creating vnode: ${e}.`),e=Comment$1),isVNode$1(e)){const o=cloneVNode(e,t,!0);return n&&normalizeChildren(o,n),isBlockTreeEnabled>0&&!d&&currentBlock&&(o.shapeFlag&6?currentBlock[currentBlock.indexOf(e)]=o:currentBlock.push(o)),o.patchFlag|=-2,o}if(isClassComponent(e)&&(e=e.__vccOpts),t){t=guardReactiveProps(t);let{class:o,style:v}=t;o&&!isString$3(o)&&(t.class=normalizeClass(o)),isObject$6(v)&&(isProxy(v)&&!isArray$8(v)&&(v=extend$4({},v)),t.style=normalizeStyle(v))}const g=isString$3(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject$6(e)?4:isFunction$2(e)?2:0;return process.env.NODE_ENV!=="production"&&g&4&&isProxy(e)&&(e=toRaw$1(e),warn$3("Vue received a Component which was made a reactive object. This can lead to unnecessary performance overhead, and should be avoided by marking the component with `markRaw` or using `shallowRef` instead of `ref`.",`
Component that was made reactive: `,e)),createBaseVNode(e,t,n,r,c,g,d,!0)}function guardReactiveProps(e){return e?isProxy(e)||InternalObjectKey in e?extend$4({},e):e:null}function cloneVNode(e,t,n=!1){const{props:r,ref:c,patchFlag:d,children:g}=e,o=t?mergeProps(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:o,key:o&&normalizeKey(o),ref:t&&t.ref?n&&c?isArray$8(c)?c.concat(normalizeRef(t)):[c,normalizeRef(t)]:normalizeRef(t):c,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:process.env.NODE_ENV!=="production"&&d===-1&&isArray$8(g)?g.map(deepCloneVNode):g,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fragment?d===-1?16:d|16:d,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx}}function deepCloneVNode(e){const t=cloneVNode(e);return isArray$8(e.children)&&(t.children=e.children.map(deepCloneVNode)),t}function createTextVNode(e=" ",t=0){return createVNode(Text,null,e,t)}function createStaticVNode(e,t){const n=createVNode(Static,null,e);return n.staticCount=t,n}function createCommentVNode(e="",t=!1){return t?(openBlock(),createBlock(Comment$1,null,e)):createVNode(Comment$1,null,e)}function normalizeVNode$1(e){return e==null||typeof e=="boolean"?createVNode(Comment$1):isArray$8(e)?createVNode(Fragment,null,e.slice()):typeof e=="object"?cloneIfMounted(e):createVNode(Text,null,String(e))}function cloneIfMounted(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:cloneVNode(e)}function normalizeChildren(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(isArray$8(t))n=16;else if(typeof t=="object")if(r&65){const c=t.default;c&&(c._c&&(c._d=!1),normalizeChildren(e,c()),c._c&&(c._d=!0));return}else{n=32;const c=t._;!c&&!(InternalObjectKey in t)?t._ctx=currentRenderingInstance:c===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else isFunction$2(t)?(t={default:t,_ctx:currentRenderingInstance},n=32):(t=String(t),r&64?(n=16,t=[createTextVNode(t)]):n=8);e.children=t,e.shapeFlag|=n}function mergeProps(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const c in r)if(c==="class")t.class!==r.class&&(t.class=normalizeClass([t.class,r.class]));else if(c==="style")t.style=normalizeStyle([t.style,r.style]);else if(isOn(c)){const d=t[c],g=r[c];g&&d!==g&&!(isArray$8(d)&&d.includes(g))&&(t[c]=d?[].concat(d,g):g)}else c!==""&&(t[c]=r[c])}return t}function invokeVNodeHook(e,t,n,r=null){callWithAsyncErrorHandling(e,t,7,[n,r])}const emptyAppContext=createAppContext();let uid$1=0;function createComponentInstance$1(e,t,n){const r=e.type,c=(t?t.appContext:e.appContext)||emptyAppContext,d={uid:uid$1++,vnode:e,type:r,parent:t,appContext:c,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(c.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(r,c),emitsOptions:normalizeEmitsOptions(r,c),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:r.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return process.env.NODE_ENV!=="production"?d.ctx=createDevRenderContext(d):d.ctx={_:d},d.root=t?t.root:d,d.emit=emit$1.bind(null,d),e.ce&&e.ce(d),d}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=e=>{currentInstance=e,e.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null},isBuiltInTag=makeMap("slot,component");function validateComponentName(e,t){const n=t.isNativeTag||NO;(isBuiltInTag(e)||n(e))&&warn$3("Do not use built-in or reserved HTML elements as component id: "+e)}function isStatefulComponent(e){return e.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent$1(e,t=!1){isInSSRComponentSetup=t;const{props:n,children:r}=e.vnode,c=isStatefulComponent(e);initProps(e,n,c,t),initSlots(e,r);const d=c?setupStatefulComponent(e,t):void 0;return isInSSRComponentSetup=!1,d}function setupStatefulComponent(e,t){var n;const r=e.type;if(process.env.NODE_ENV!=="production"){if(r.name&&validateComponentName(r.name,e.appContext.config),r.components){const d=Object.keys(r.components);for(let g=0;g<d.length;g++)validateComponentName(d[g],e.appContext.config)}if(r.directives){const d=Object.keys(r.directives);for(let g=0;g<d.length;g++)validateDirectiveName(d[g])}r.compilerOptions&&isRuntimeOnly()&&warn$3('"compilerOptions" is only supported when using a build of Vue that includes the runtime compiler. Since you are using a runtime-only build, the options should be passed via your build tool config instead.')}e.accessCache=Object.create(null),e.proxy=markRaw(new Proxy(e.ctx,PublicInstanceProxyHandlers)),process.env.NODE_ENV!=="production"&&exposePropsOnRenderContext(e);const{setup:c}=r;if(c){const d=e.setupContext=c.length>1?createSetupContext(e):null;setCurrentInstance(e),pauseTracking();const g=callWithErrorHandling$1(c,e,0,[process.env.NODE_ENV!=="production"?shallowReadonly(e.props):e.props,d]);if(resetTracking(),unsetCurrentInstance(),isPromise(g)){if(g.then(unsetCurrentInstance,unsetCurrentInstance),t)return g.then(o=>{handleSetupResult(e,o,t)}).catch(o=>{handleError$1(o,e,0)});if(e.asyncDep=g,process.env.NODE_ENV!=="production"&&!e.suspense){const o=(n=r.name)!==null&&n!==void 0?n:"Anonymous";warn$3(`Component <${o}>: setup function returned a promise, but no <Suspense> boundary was found in the parent component tree. A component with async setup() must be nested in a <Suspense> in order to be rendered.`)}}else handleSetupResult(e,g,t)}else finishComponentSetup(e,t)}function handleSetupResult(e,t,n){isFunction$2(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:isObject$6(t)?(process.env.NODE_ENV!=="production"&&isVNode$1(t)&&warn$3("setup() should not return VNodes directly - return a render function instead."),process.env.NODE_ENV!=="production"&&(e.devtoolsRawSetupState=t),e.setupState=proxyRefs(t),process.env.NODE_ENV!=="production"&&exposeSetupStateOnRenderContext(e)):process.env.NODE_ENV!=="production"&&t!==void 0&&warn$3(`setup() should return an object. Received: ${t===null?"null":typeof t}`),finishComponentSetup(e,n)}let compile$1,installWithProxy;function registerRuntimeCompiler(e){compile$1=e,installWithProxy=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,RuntimeCompiledPublicInstanceProxyHandlers))}}const isRuntimeOnly=()=>!compile$1;function finishComponentSetup(e,t,n){const r=e.type;if(!e.render){if(!t&&compile$1&&!r.render){const c=r.template||resolveMergedOptions(e).template;if(c){process.env.NODE_ENV!=="production"&&startMeasure(e,"compile");const{isCustomElement:d,compilerOptions:g}=e.appContext.config,{delimiters:o,compilerOptions:v}=r,x=extend$4(extend$4({isCustomElement:d,delimiters:o},g),v);r.render=compile$1(c,x),process.env.NODE_ENV!=="production"&&endMeasure(e,"compile")}}e.render=r.render||NOOP,installWithProxy&&installWithProxy(e)}setCurrentInstance(e),pauseTracking(),applyOptions(e),resetTracking(),unsetCurrentInstance(),process.env.NODE_ENV!=="production"&&!r.render&&e.render===NOOP&&!t&&(!compile$1&&r.template?warn$3('Component provided template option but runtime compilation is not supported in this build of Vue. Configure your bundler to alias "vue" to "vue/dist/vue.esm-bundler.js".'):warn$3("Component is missing template or render function."))}function createAttrsProxy(e){return new Proxy(e.attrs,process.env.NODE_ENV!=="production"?{get(t,n){return markAttrsAccessed(),track(e,"get","$attrs"),t[n]},set(){return warn$3("setupContext.attrs is readonly."),!1},deleteProperty(){return warn$3("setupContext.attrs is readonly."),!1}}:{get(t,n){return track(e,"get","$attrs"),t[n]}})}function createSetupContext(e){const t=r=>{process.env.NODE_ENV!=="production"&&e.exposed&&warn$3("expose() should be called only once per setup()."),e.exposed=r||{}};let n;return process.env.NODE_ENV!=="production"?Object.freeze({get attrs(){return n||(n=createAttrsProxy(e))},get slots(){return shallowReadonly(e.slots)},get emit(){return(r,...c)=>e.emit(r,...c)},expose:t}):{get attrs(){return n||(n=createAttrsProxy(e))},slots:e.slots,emit:e.emit,expose:t}}function getExposeProxy(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in publicPropertiesMap)return publicPropertiesMap[n](e)},has(t,n){return n in t||n in publicPropertiesMap}}))}const classifyRE$1=/(?:^|[-_])(\w)/g,classify$1=e=>e.replace(classifyRE$1,t=>t.toUpperCase()).replace(/[-_]/g,"");function getComponentName$1(e,t=!0){return isFunction$2(e)?e.displayName||e.name:e.name||t&&e.__name}function formatComponentName$1(e,t,n=!1){let r=getComponentName$1(t);if(!r&&t.__file){const c=t.__file.match(/([^/\\]+)\.\w+$/);c&&(r=c[1])}if(!r&&e&&e.parent){const c=d=>{for(const g in d)if(d[g]===t)return g};r=c(e.components||e.parent.type.components)||c(e.appContext.components)}return r?classify$1(r):n?"App":"Anonymous"}function isClassComponent(e){return isFunction$2(e)&&"__vccOpts"in e}const computed=(e,t)=>computed$1(e,t,isInSSRComponentSetup),warnRuntimeUsage=e=>warn$3(`${e}() is a compiler-hint helper that is only usable inside <script setup> of a single file component. Its arguments should be compiled away and passing it at runtime has no effect.`);function defineProps(){return process.env.NODE_ENV!=="production"&&warnRuntimeUsage("defineProps"),null}function defineEmits(){return process.env.NODE_ENV!=="production"&&warnRuntimeUsage("defineEmits"),null}function defineExpose(e){process.env.NODE_ENV!=="production"&&warnRuntimeUsage("defineExpose")}function withDefaults(e,t){return process.env.NODE_ENV!=="production"&&warnRuntimeUsage("withDefaults"),null}function useSlots(){return getContext().slots}function useAttrs(){return getContext().attrs}function getContext(){const e=getCurrentInstance();return process.env.NODE_ENV!=="production"&&!e&&warn$3("useContext() called without active instance."),e.setupContext||(e.setupContext=createSetupContext(e))}function mergeDefaults(e,t){const n=isArray$8(e)?e.reduce((r,c)=>(r[c]={},r),{}):e;for(const r in t){const c=n[r];c?isArray$8(c)||isFunction$2(c)?n[r]={type:c,default:t[r]}:c.default=t[r]:c===null?n[r]={default:t[r]}:process.env.NODE_ENV!=="production"&&warn$3(`props default key "${r}" has no corresponding declaration.`)}return n}function createPropsRestProxy(e,t){const n={};for(const r in e)t.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>e[r]});return n}function withAsyncContext(e){const t=getCurrentInstance();process.env.NODE_ENV!=="production"&&!t&&warn$3("withAsyncContext called without active current instance. This is likely a bug.");let n=e();return unsetCurrentInstance(),isPromise(n)&&(n=n.catch(r=>{throw setCurrentInstance(t),r})),[n,()=>setCurrentInstance(t)]}function h(e,t,n){const r=arguments.length;return r===2?isObject$6(t)&&!isArray$8(t)?isVNode$1(t)?createVNode(e,null,[t]):createVNode(e,t):createVNode(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&isVNode$1(n)&&(n=[n]),createVNode(e,t,n))}const ssrContextKey=Symbol(process.env.NODE_ENV!=="production"?"ssrContext":""),useSSRContext=()=>{{const e=inject(ssrContextKey);return e||process.env.NODE_ENV!=="production"&&warn$3("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),e}};function isShallow(e){return!!(e&&e.__v_isShallow)}function initCustomFormatter(){if(process.env.NODE_ENV==="production"||typeof window>"u")return;const e={style:"color:#3ba776"},t={style:"color:#0b1bc9"},n={style:"color:#b62e24"},r={style:"color:#9d288c"},c={header(k){return isObject$6(k)?k.__isVue?["div",e,"VueInstance"]:isRef$1(k)?["div",{},["span",e,E(k)],"<",o(k.value),">"]:isReactive(k)?["div",{},["span",e,isShallow(k)?"ShallowReactive":"Reactive"],"<",o(k),`>${isReadonly(k)?" (readonly)":""}`]:isReadonly(k)?["div",{},["span",e,isShallow(k)?"ShallowReadonly":"Readonly"],"<",o(k),">"]:null:null},hasBody(k){return k&&k.__isVue},body(k){if(k&&k.__isVue)return["div",{},...d(k.$)]}};function d(k){const S=[];k.type.props&&k.props&&S.push(g("props",toRaw$1(k.props))),k.setupState!==EMPTY_OBJ&&S.push(g("setup",k.setupState)),k.data!==EMPTY_OBJ&&S.push(g("data",toRaw$1(k.data)));const N=v(k,"computed");N&&S.push(g("computed",N));const L=v(k,"inject");return L&&S.push(g("injected",L)),S.push(["div",{},["span",{style:r.style+";opacity:0.66"},"$ (internal): "],["object",{object:k}]]),S}function g(k,S){return S=extend$4({},S),Object.keys(S).length?["div",{style:"line-height:1.25em;margin-bottom:0.6em"},["div",{style:"color:#476582"},k],["div",{style:"padding-left:1.25em"},...Object.keys(S).map(N=>["div",{},["span",r,N+": "],o(S[N],!1)])]]:["span",{}]}function o(k,S=!0){return typeof k=="number"?["span",t,k]:typeof k=="string"?["span",n,JSON.stringify(k)]:typeof k=="boolean"?["span",r,k]:isObject$6(k)?["object",{object:S?toRaw$1(k):k}]:["span",n,String(k)]}function v(k,S){const N=k.type;if(isFunction$2(N))return;const L={};for(const P in k.ctx)x(N,P,S)&&(L[P]=k.ctx[P]);return L}function x(k,S,N){const L=k[N];if(isArray$8(L)&&L.includes(S)||isObject$6(L)&&S in L||k.extends&&x(k.extends,S,N)||k.mixins&&k.mixins.some(P=>x(P,S,N)))return!0}function E(k){return isShallow(k)?"ShallowRef":k.effect?"ComputedRef":"Ref"}window.devtoolsFormatters?window.devtoolsFormatters.push(c):window.devtoolsFormatters=[c]}function withMemo(e,t,n,r){const c=n[r];if(c&&isMemoSame(c,e))return c;const d=t();return d.memo=e.slice(),n[r]=d}function isMemoSame(e,t){const n=e.memo;if(n.length!=t.length)return!1;for(let r=0;r<n.length;r++)if(hasChanged(n[r],t[r]))return!1;return isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),!0}const version$2="3.2.45",_ssrUtils={createComponentInstance:createComponentInstance$1,setupComponent:setupComponent$1,renderComponentRoot:renderComponentRoot$1,setCurrentRenderingInstance:setCurrentRenderingInstance$1,isVNode:isVNode$1,normalizeVNode:normalizeVNode$1},ssrUtils=_ssrUtils,resolveFilter=null,compatUtils=null,svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const c=t?doc.createElementNS(svgNS,e):doc.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&c.setAttribute("multiple",r.multiple),c},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,c,d){const g=n?n.previousSibling:t.lastChild;if(c&&(c===d||c.nextSibling))for(;t.insertBefore(c.cloneNode(!0),n),!(c===d||!(c=c.nextSibling)););else{templateContainer.innerHTML=r?`<svg>${e}</svg>`:e;const o=templateContainer.content;if(r){const v=o.firstChild;for(;v.firstChild;)o.appendChild(v.firstChild);o.removeChild(v)}t.insertBefore(o,n)}return[g?g.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function patchClass(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function patchStyle(e,t,n){const r=e.style,c=isString$3(n);if(n&&!c){for(const d in n)setStyle(r,d,n[d]);if(t&&!isString$3(t))for(const d in t)n[d]==null&&setStyle(r,d,"")}else{const d=r.display;c?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=d)}}const semicolonRE=/[^\\];\s*$/,importantRE=/\s*!important$/;function setStyle(e,t,n){if(isArray$8(n))n.forEach(r=>setStyle(e,t,r));else if(n==null&&(n=""),process.env.NODE_ENV!=="production"&&semicolonRE.test(n)&&warn$3(`Unexpected semicolon at the end of '${t}' style value: '${n}'`),t.startsWith("--"))e.setProperty(t,n);else{const r=autoPrefix(e,t);importantRE.test(n)?e.setProperty(hyphenate(r),n.replace(importantRE,""),"important"):e[r]=n}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,t){const n=prefixCache[t];if(n)return n;let r=camelize(t);if(r!=="filter"&&r in e)return prefixCache[t]=r;r=capitalize$1(r);for(let c=0;c<prefixes.length;c++){const d=prefixes[c]+r;if(d in e)return prefixCache[t]=d}return t}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,t,n,r,c){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(xlinkNS,t.slice(6,t.length)):e.setAttributeNS(xlinkNS,t,n);else{const d=isSpecialBooleanAttr(t);n==null||d&&!includeBooleanAttr(n)?e.removeAttribute(t):e.setAttribute(t,d?"":n)}}function patchDOMProp(e,t,n,r,c,d,g){if(t==="innerHTML"||t==="textContent"){r&&g(r,c,d),e[t]=n==null?"":n;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const v=n==null?"":n;(e.value!==v||e.tagName==="OPTION")&&(e.value=v),n==null&&e.removeAttribute(t);return}let o=!1;if(n===""||n==null){const v=typeof e[t];v==="boolean"?n=includeBooleanAttr(n):n==null&&v==="string"?(n="",o=!0):v==="number"&&(n=0,o=!0)}try{e[t]=n}catch(v){process.env.NODE_ENV!=="production"&&!o&&warn$3(`Failed setting prop "${t}" on <${e.tagName.toLowerCase()}>: value ${n} is invalid.`,v)}o&&e.removeAttribute(t)}function addEventListener(e,t,n,r){e.addEventListener(t,n,r)}function removeEventListener(e,t,n,r){e.removeEventListener(t,n,r)}function patchEvent(e,t,n,r,c=null){const d=e._vei||(e._vei={}),g=d[t];if(r&&g)g.value=r;else{const[o,v]=parseName(t);if(r){const x=d[t]=createInvoker(r,c);addEventListener(e,o,x,v)}else g&&(removeEventListener(e,o,g,v),d[t]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let t;if(optionsModifierRE.test(e)){t={};let r;for(;r=e.match(optionsModifierRE);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hyphenate(e.slice(2)),t]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(r,n.value),t,5,[r])};return n.value=e,n.attached=getNow(),n}function patchStopImmediatePropagation(e,t){if(isArray$8(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>c=>!c._stopped&&r&&r(c))}else return t}const nativeOnRE=/^on[a-z]/,patchProp=(e,t,n,r,c=!1,d,g,o,v)=>{t==="class"?patchClass(e,r,c):t==="style"?patchStyle(e,n,r):isOn(t)?isModelListener(t)||patchEvent(e,t,n,r,g):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):shouldSetAsProp(e,t,r,c))?patchDOMProp(e,t,r,d,g,o,v):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),patchAttr(e,t,r,c))};function shouldSetAsProp(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&nativeOnRE.test(t)&&isFunction$2(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||nativeOnRE.test(t)&&isString$3(n)?!1:t in e}function defineCustomElement(e,t){const n=defineComponent(e);class r extends VueElement{constructor(d){super(n,d,t)}}return r.def=n,r}const defineSSRCustomElement=e=>defineCustomElement(e,hydrate),BaseClass=typeof HTMLElement<"u"?HTMLElement:class{};class VueElement extends BaseClass{constructor(t,n={},r){super(),this._def=t,this._props=n,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&r?r(this._createVNode(),this.shadowRoot):(process.env.NODE_ENV!=="production"&&this.shadowRoot&&warn$3("Custom element has pre-rendered declarative shadow root but is not defined as hydratable. Use `defineSSRCustomElement`."),this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,nextTick$1(()=>{this._connected||(render$1(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);new MutationObserver(r=>{for(const c of r)this._setAttr(c.attributeName)}).observe(this,{attributes:!0});const t=(r,c=!1)=>{const{props:d,styles:g}=r;let o;if(d&&!isArray$8(d))for(const v in d){const x=d[v];(x===Number||x&&x.type===Number)&&(v in this._props&&(this._props[v]=toNumber$2(this._props[v])),(o||(o=Object.create(null)))[camelize(v)]=!0)}this._numberProps=o,c&&this._resolveProps(r),this._applyStyles(g),this._update()},n=this._def.__asyncLoader;n?n().then(r=>t(r,!0)):t(this._def)}_resolveProps(t){const{props:n}=t,r=isArray$8(n)?n:Object.keys(n||{});for(const c of Object.keys(this))c[0]!=="_"&&r.includes(c)&&this._setProp(c,this[c],!0,!1);for(const c of r.map(camelize))Object.defineProperty(this,c,{get(){return this._getProp(c)},set(d){this._setProp(c,d)}})}_setAttr(t){let n=this.getAttribute(t);const r=camelize(t);this._numberProps&&this._numberProps[r]&&(n=toNumber$2(n)),this._setProp(r,n,!1)}_getProp(t){return this._props[t]}_setProp(t,n,r=!0,c=!0){n!==this._props[t]&&(this._props[t]=n,c&&this._instance&&this._update(),r&&(n===!0?this.setAttribute(hyphenate(t),""):typeof n=="string"||typeof n=="number"?this.setAttribute(hyphenate(t),n+""):n||this.removeAttribute(hyphenate(t))))}_update(){render$1(this._createVNode(),this.shadowRoot)}_createVNode(){const t=createVNode(this._def,extend$4({},this._props));return this._instance||(t.ce=n=>{this._instance=n,n.isCE=!0,process.env.NODE_ENV!=="production"&&(n.ceReload=d=>{this._styles&&(this._styles.forEach(g=>this.shadowRoot.removeChild(g)),this._styles.length=0),this._applyStyles(d),this._instance=null,this._update()});const r=(d,g)=>{this.dispatchEvent(new CustomEvent(d,{detail:g}))};n.emit=(d,...g)=>{r(d,g),hyphenate(d)!==d&&r(hyphenate(d),g)};let c=this;for(;c=c&&(c.parentNode||c.host);)if(c instanceof VueElement){n.parent=c._instance,n.provides=c._instance.provides;break}}),t}_applyStyles(t){t&&t.forEach(n=>{const r=document.createElement("style");r.textContent=n,this.shadowRoot.appendChild(r),process.env.NODE_ENV!=="production"&&(this._styles||(this._styles=[])).push(r)})}}function useCssModule(e="$style"){{const t=getCurrentInstance();if(!t)return process.env.NODE_ENV!=="production"&&warn$3("useCssModule must be called inside setup()"),EMPTY_OBJ;const n=t.type.__cssModules;if(!n)return process.env.NODE_ENV!=="production"&&warn$3("Current instance does not have CSS modules injected."),EMPTY_OBJ;const r=n[e];return r||(process.env.NODE_ENV!=="production"&&warn$3(`Current instance does not have CSS module named "${e}".`),EMPTY_OBJ)}}function useCssVars(e){const t=getCurrentInstance();if(!t){process.env.NODE_ENV!=="production"&&warn$3("useCssVars is called without current active component instance.");return}const n=t.ut=(c=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(d=>setVarsOnNode(d,c))},r=()=>{const c=e(t.proxy);setVarsOnVNode(t.subTree,c),n(c)};watchPostEffect(r),onMounted(()=>{const c=new MutationObserver(r);c.observe(t.subTree.el.parentNode,{childList:!0}),onUnmounted(()=>c.disconnect())})}function setVarsOnVNode(e,t){if(e.shapeFlag&128){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{setVarsOnVNode(n.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)setVarsOnNode(e.el,t);else if(e.type===Fragment)e.children.forEach(n=>setVarsOnVNode(n,t));else if(e.type===Static){let{el:n,anchor:r}=e;for(;n&&(setVarsOnNode(n,t),n!==r);)n=n.nextSibling}}function setVarsOnNode(e,t){if(e.nodeType===1){const n=e.style;for(const r in t)n.setProperty(`--${r}`,t[r])}}const TRANSITION="transition",ANIMATION="animation",Transition=(e,{slots:t})=>h(BaseTransition,resolveTransitionProps(e),t);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=Transition.props=extend$4({},BaseTransition.props,DOMTransitionPropsValidators),callHook=(e,t=[])=>{isArray$8(e)?e.forEach(n=>n(...t)):e&&e(...t)},hasExplicitCallback=e=>e?isArray$8(e)?e.some(t=>t.length>1):e.length>1:!1;function resolveTransitionProps(e){const t={};for(const ae in e)ae in DOMTransitionPropsValidators||(t[ae]=e[ae]);if(e.css===!1)return t;const{name:n="v",type:r,duration:c,enterFromClass:d=`${n}-enter-from`,enterActiveClass:g=`${n}-enter-active`,enterToClass:o=`${n}-enter-to`,appearFromClass:v=d,appearActiveClass:x=g,appearToClass:E=o,leaveFromClass:k=`${n}-leave-from`,leaveActiveClass:S=`${n}-leave-active`,leaveToClass:N=`${n}-leave-to`}=e,L=normalizeDuration(c),P=L&&L[0],O=L&&L[1],{onBeforeEnter:V,onEnter:z,onEnterCancelled:U,onLeave:W,onLeaveCancelled:Z,onBeforeAppear:re=V,onAppear:oe=z,onAppearCancelled:se=U}=t,ce=(ae,Ce,Fe)=>{removeTransitionClass(ae,Ce?E:o),removeTransitionClass(ae,Ce?x:g),Fe&&Fe()},me=(ae,Ce)=>{ae._isLeaving=!1,removeTransitionClass(ae,k),removeTransitionClass(ae,N),removeTransitionClass(ae,S),Ce&&Ce()},we=ae=>(Ce,Fe)=>{const it=ae?oe:z,_e=()=>ce(Ce,ae,Fe);callHook(it,[Ce,_e]),nextFrame(()=>{removeTransitionClass(Ce,ae?v:d),addTransitionClass(Ce,ae?E:o),hasExplicitCallback(it)||whenTransitionEnds(Ce,r,P,_e)})};return extend$4(t,{onBeforeEnter(ae){callHook(V,[ae]),addTransitionClass(ae,d),addTransitionClass(ae,g)},onBeforeAppear(ae){callHook(re,[ae]),addTransitionClass(ae,v),addTransitionClass(ae,x)},onEnter:we(!1),onAppear:we(!0),onLeave(ae,Ce){ae._isLeaving=!0;const Fe=()=>me(ae,Ce);addTransitionClass(ae,k),forceReflow(),addTransitionClass(ae,S),nextFrame(()=>{!ae._isLeaving||(removeTransitionClass(ae,k),addTransitionClass(ae,N),hasExplicitCallback(W)||whenTransitionEnds(ae,r,O,Fe))}),callHook(W,[ae,Fe])},onEnterCancelled(ae){ce(ae,!1),callHook(U,[ae])},onAppearCancelled(ae){ce(ae,!0),callHook(se,[ae])},onLeaveCancelled(ae){me(ae),callHook(Z,[ae])}})}function normalizeDuration(e){if(e==null)return null;if(isObject$6(e))return[NumberOf(e.enter),NumberOf(e.leave)];{const t=NumberOf(e);return[t,t]}}function NumberOf(e){const t=toNumber$2(e);return process.env.NODE_ENV!=="production"&&validateDuration(t),t}function validateDuration(e){typeof e!="number"?warn$3(`<transition> explicit duration is not a valid number - got ${JSON.stringify(e)}.`):isNaN(e)&&warn$3("<transition> explicit duration is NaN - the duration expression might be incorrect.")}function addTransitionClass(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function removeTransitionClass(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function nextFrame(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let endId=0;function whenTransitionEnds(e,t,n,r){const c=e._endId=++endId,d=()=>{c===e._endId&&r()};if(n)return setTimeout(d,n);const{type:g,timeout:o,propCount:v}=getTransitionInfo(e,t);if(!g)return r();const x=g+"end";let E=0;const k=()=>{e.removeEventListener(x,S),d()},S=N=>{N.target===e&&++E>=v&&k()};setTimeout(()=>{E<v&&k()},o+1),e.addEventListener(x,S)}function getTransitionInfo(e,t){const n=window.getComputedStyle(e),r=L=>(n[L]||"").split(", "),c=r(`${TRANSITION}Delay`),d=r(`${TRANSITION}Duration`),g=getTimeout(c,d),o=r(`${ANIMATION}Delay`),v=r(`${ANIMATION}Duration`),x=getTimeout(o,v);let E=null,k=0,S=0;t===TRANSITION?g>0&&(E=TRANSITION,k=g,S=d.length):t===ANIMATION?x>0&&(E=ANIMATION,k=x,S=v.length):(k=Math.max(g,x),E=k>0?g>x?TRANSITION:ANIMATION:null,S=E?E===TRANSITION?d.length:v.length:0);const N=E===TRANSITION&&/\b(transform|all)(,|$)/.test(r(`${TRANSITION}Property`).toString());return{type:E,timeout:k,propCount:S,hasTransform:N}}function getTimeout(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>toMs(n)+toMs(e[r])))}function toMs(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}const positionMap=new WeakMap,newPositionMap=new WeakMap,TransitionGroupImpl={name:"TransitionGroup",props:extend$4({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=getCurrentInstance(),r=useTransitionState();let c,d;return onUpdated(()=>{if(!c.length)return;const g=e.moveClass||`${e.name||"v"}-move`;if(!hasCSSTransform(c[0].el,n.vnode.el,g))return;c.forEach(callPendingCbs),c.forEach(recordPosition);const o=c.filter(applyTranslation);forceReflow(),o.forEach(v=>{const x=v.el,E=x.style;addTransitionClass(x,g),E.transform=E.webkitTransform=E.transitionDuration="";const k=x._moveCb=S=>{S&&S.target!==x||(!S||/transform$/.test(S.propertyName))&&(x.removeEventListener("transitionend",k),x._moveCb=null,removeTransitionClass(x,g))};x.addEventListener("transitionend",k)})}),()=>{const g=toRaw$1(e),o=resolveTransitionProps(g);let v=g.tag||Fragment;c=d,d=t.default?getTransitionRawChildren(t.default()):[];for(let x=0;x<d.length;x++){const E=d[x];E.key!=null?setTransitionHooks(E,resolveTransitionHooks(E,o,r,n)):process.env.NODE_ENV!=="production"&&warn$3("<TransitionGroup> children must be keyed.")}if(c)for(let x=0;x<c.length;x++){const E=c[x];setTransitionHooks(E,resolveTransitionHooks(E,o,r,n)),positionMap.set(E,E.el.getBoundingClientRect())}return createVNode(v,null,d)}}},TransitionGroup=TransitionGroupImpl;function callPendingCbs(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function recordPosition(e){newPositionMap.set(e,e.el.getBoundingClientRect())}function applyTranslation(e){const t=positionMap.get(e),n=newPositionMap.get(e),r=t.left-n.left,c=t.top-n.top;if(r||c){const d=e.el.style;return d.transform=d.webkitTransform=`translate(${r}px,${c}px)`,d.transitionDuration="0s",e}}function hasCSSTransform(e,t,n){const r=e.cloneNode();e._vtc&&e._vtc.forEach(g=>{g.split(/\s+/).forEach(o=>o&&r.classList.remove(o))}),n.split(/\s+/).forEach(g=>g&&r.classList.add(g)),r.style.display="none";const c=t.nodeType===1?t:t.parentNode;c.appendChild(r);const{hasTransform:d}=getTransitionInfo(r);return c.removeChild(r),d}const getModelAssigner=e=>{const t=e.props["onUpdate:modelValue"]||!1;return isArray$8(t)?n=>invokeArrayFns(t,n):t};function onCompositionStart(e){e.target.composing=!0}function onCompositionEnd(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const vModelText={created(e,{modifiers:{lazy:t,trim:n,number:r}},c){e._assign=getModelAssigner(c);const d=r||c.props&&c.props.type==="number";addEventListener(e,t?"change":"input",g=>{if(g.target.composing)return;let o=e.value;n&&(o=o.trim()),d&&(o=toNumber$2(o)),e._assign(o)}),n&&addEventListener(e,"change",()=>{e.value=e.value.trim()}),t||(addEventListener(e,"compositionstart",onCompositionStart),addEventListener(e,"compositionend",onCompositionEnd),addEventListener(e,"change",onCompositionEnd))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:c}},d){if(e._assign=getModelAssigner(d),e.composing||document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===t||(c||e.type==="number")&&toNumber$2(e.value)===t))return;const g=t==null?"":t;e.value!==g&&(e.value=g)}},vModelCheckbox={deep:!0,created(e,t,n){e._assign=getModelAssigner(n),addEventListener(e,"change",()=>{const r=e._modelValue,c=getValue$1(e),d=e.checked,g=e._assign;if(isArray$8(r)){const o=looseIndexOf(r,c),v=o!==-1;if(d&&!v)g(r.concat(c));else if(!d&&v){const x=[...r];x.splice(o,1),g(x)}}else if(isSet$1(r)){const o=new Set(r);d?o.add(c):o.delete(c),g(o)}else g(getCheckboxValue(e,d))})},mounted:setChecked,beforeUpdate(e,t,n){e._assign=getModelAssigner(n),setChecked(e,t,n)}};function setChecked(e,{value:t,oldValue:n},r){e._modelValue=t,isArray$8(t)?e.checked=looseIndexOf(t,r.props.value)>-1:isSet$1(t)?e.checked=t.has(r.props.value):t!==n&&(e.checked=looseEqual(t,getCheckboxValue(e,!0)))}const vModelRadio={created(e,{value:t},n){e.checked=looseEqual(t,n.props.value),e._assign=getModelAssigner(n),addEventListener(e,"change",()=>{e._assign(getValue$1(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e._assign=getModelAssigner(r),t!==n&&(e.checked=looseEqual(t,r.props.value))}},vModelSelect={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const c=isSet$1(t);addEventListener(e,"change",()=>{const d=Array.prototype.filter.call(e.options,g=>g.selected).map(g=>n?toNumber$2(getValue$1(g)):getValue$1(g));e._assign(e.multiple?c?new Set(d):d:d[0])}),e._assign=getModelAssigner(r)},mounted(e,{value:t}){setSelected(e,t)},beforeUpdate(e,t,n){e._assign=getModelAssigner(n)},updated(e,{value:t}){setSelected(e,t)}};function setSelected(e,t){const n=e.multiple;if(n&&!isArray$8(t)&&!isSet$1(t)){process.env.NODE_ENV!=="production"&&warn$3(`<select multiple v-model> expects an Array or Set value for its binding, but got ${Object.prototype.toString.call(t).slice(8,-1)}.`);return}for(let r=0,c=e.options.length;r<c;r++){const d=e.options[r],g=getValue$1(d);if(n)isArray$8(t)?d.selected=looseIndexOf(t,g)>-1:d.selected=t.has(g);else if(looseEqual(getValue$1(d),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}function getValue$1(e){return"_value"in e?e._value:e.value}function getCheckboxValue(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const vModelDynamic={created(e,t,n){callModelHook(e,t,n,null,"created")},mounted(e,t,n){callModelHook(e,t,n,null,"mounted")},beforeUpdate(e,t,n,r){callModelHook(e,t,n,r,"beforeUpdate")},updated(e,t,n,r){callModelHook(e,t,n,r,"updated")}};function resolveDynamicModel(e,t){switch(e){case"SELECT":return vModelSelect;case"TEXTAREA":return vModelText;default:switch(t){case"checkbox":return vModelCheckbox;case"radio":return vModelRadio;default:return vModelText}}}function callModelHook(e,t,n,r,c){const g=resolveDynamicModel(e.tagName,n.props&&n.props.type)[c];g&&g(e,t,n,r)}function initVModelForSSR(){vModelText.getSSRProps=({value:e})=>({value:e}),vModelRadio.getSSRProps=({value:e},t)=>{if(t.props&&looseEqual(t.props.value,e))return{checked:!0}},vModelCheckbox.getSSRProps=({value:e},t)=>{if(isArray$8(e)){if(t.props&&looseIndexOf(e,t.props.value)>-1)return{checked:!0}}else if(isSet$1(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},vModelDynamic.getSSRProps=(e,t)=>{if(typeof t.type!="string")return;const n=resolveDynamicModel(t.type.toUpperCase(),t.props&&t.props.type);if(n.getSSRProps)return n.getSSRProps(e,t)}}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>systemModifiers.some(n=>e[`${n}Key`]&&!t.includes(n))},withModifiers=(e,t)=>(n,...r)=>{for(let c=0;c<t.length;c++){const d=modifierGuards[t[c]];if(d&&d(n,t))return}return e(n,...r)},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(e,t)=>n=>{if(!("key"in n))return;const r=hyphenate(n.key);if(t.some(c=>c===r||keyNames[c]===r))return e(n)},vShow={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):setDisplay(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),setDisplay(e,!0),r.enter(e)):r.leave(e,()=>{setDisplay(e,!1)}):setDisplay(e,t))},beforeUnmount(e,{value:t}){setDisplay(e,t)}};function setDisplay(e,t){e.style.display=t?e._vod:"none"}function initVShowForSSR(){vShow.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const rendererOptions=extend$4({patchProp},nodeOps);let renderer,enabledHydration=!1;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}function ensureHydrationRenderer(){return renderer=enabledHydration?renderer:createHydrationRenderer(rendererOptions),enabledHydration=!0,renderer}const render$1=(...e)=>{ensureRenderer().render(...e)},hydrate=(...e)=>{ensureHydrationRenderer().hydrate(...e)},createApp$1=(...e)=>{const t=ensureRenderer().createApp(...e);process.env.NODE_ENV!=="production"&&(injectNativeTagCheck(t),injectCompilerOptionsCheck(t));const{mount:n}=t;return t.mount=r=>{const c=normalizeContainer(r);if(!c)return;const d=t._component;!isFunction$2(d)&&!d.render&&!d.template&&(d.template=c.innerHTML),c.innerHTML="";const g=n(c,!1,c instanceof SVGElement);return c instanceof Element&&(c.removeAttribute("v-cloak"),c.setAttribute("data-v-app","")),g},t},createSSRApp=(...e)=>{const t=ensureHydrationRenderer().createApp(...e);process.env.NODE_ENV!=="production"&&(injectNativeTagCheck(t),injectCompilerOptionsCheck(t));const{mount:n}=t;return t.mount=r=>{const c=normalizeContainer(r);if(c)return n(c,!0,c instanceof SVGElement)},t};function injectNativeTagCheck(e){Object.defineProperty(e.config,"isNativeTag",{value:t=>isHTMLTag(t)||isSVGTag(t),writable:!1})}function injectCompilerOptionsCheck(e){if(isRuntimeOnly()){const t=e.config.isCustomElement;Object.defineProperty(e.config,"isCustomElement",{get(){return t},set(){warn$3("The `isCustomElement` config option is deprecated. Use `compilerOptions.isCustomElement` instead.")}});const n=e.config.compilerOptions,r='The `compilerOptions` config option is only respected when using a build of Vue.js that includes the runtime compiler (aka "full build"). Since you are using the runtime-only build, `compilerOptions` must be passed to `@vue/compiler-dom` in the build setup instead.\n- For vue-loader: pass it via vue-loader\'s `compilerOptions` loader option.\n- For vue-cli: see https://cli.vuejs.org/guide/webpack.html#modifying-options-of-a-loader\n- For vite: pass it via @vitejs/plugin-vue options. See https://github.com/vitejs/vite/tree/main/packages/plugin-vue#example-for-passing-options-to-vuecompiler-dom';Object.defineProperty(e.config,"compilerOptions",{get(){return warn$3(r),n},set(){warn$3(r)}})}}function normalizeContainer(e){if(isString$3(e)){const t=document.querySelector(e);return process.env.NODE_ENV!=="production"&&!t&&warn$3(`Failed to mount app: mount target selector "${e}" returned null.`),t}return process.env.NODE_ENV!=="production"&&window.ShadowRoot&&e instanceof window.ShadowRoot&&e.mode==="closed"&&warn$3('mounting on a ShadowRoot with `{mode: "closed"}` may lead to unpredictable bugs'),e}let ssrDirectiveInitialized=!1;const initDirectivesForSSR=()=>{ssrDirectiveInitialized||(ssrDirectiveInitialized=!0,initVModelForSSR(),initVShowForSSR())};function initDev(){initCustomFormatter()}process.env.NODE_ENV!=="production"&&initDev();const compile=()=>{process.env.NODE_ENV!=="production"&&warn$3('Runtime compilation is not supported in this build of Vue. Configure your bundler to alias "vue" to "vue/dist/vue.esm-bundler.js".')},vue_runtime_esmBundler=Object.freeze(Object.defineProperty({__proto__:null,compile,EffectScope,ReactiveEffect,customRef,effect,effectScope,getCurrentScope,isProxy,isReactive,isReadonly,isRef:isRef$1,isShallow:isShallow$1,markRaw,onScopeDispose,proxyRefs,reactive,readonly,ref,shallowReactive,shallowReadonly,shallowRef,stop,toRaw:toRaw$1,toRef,toRefs,triggerRef,unref,camelize,capitalize:capitalize$1,normalizeClass,normalizeProps,normalizeStyle,toDisplayString,toHandlerKey,BaseTransition,Comment:Comment$1,Fragment,KeepAlive,Static,Suspense,Teleport,Text,callWithAsyncErrorHandling,callWithErrorHandling:callWithErrorHandling$1,cloneVNode,compatUtils,computed,createBlock,createCommentVNode,createElementBlock,createElementVNode:createBaseVNode,createHydrationRenderer,createPropsRestProxy,createRenderer,createSlots,createStaticVNode,createTextVNode,createVNode,defineAsyncComponent,defineComponent,defineEmits,defineExpose,defineProps,get devtools(){return devtools},getCurrentInstance,getTransitionRawChildren,guardReactiveProps,h,handleError:handleError$1,initCustomFormatter,inject,isMemoSame,isRuntimeOnly,isVNode:isVNode$1,mergeDefaults,mergeProps,nextTick:nextTick$1,onActivated,onBeforeMount,onBeforeUnmount,onBeforeUpdate,onDeactivated,onErrorCaptured,onMounted,onRenderTracked,onRenderTriggered,onServerPrefetch,onUnmounted,onUpdated,openBlock,popScopeId,provide,pushScopeId,queuePostFlushCb,registerRuntimeCompiler,renderList,renderSlot,resolveComponent,resolveDirective,resolveDynamicComponent,resolveFilter,resolveTransitionHooks,setBlockTracking,setDevtoolsHook,setTransitionHooks,ssrContextKey,ssrUtils,toHandlers,transformVNodeArgs,useAttrs,useSSRContext,useSlots,useTransitionState,version:version$2,warn:warn$3,watch,watchEffect,watchPostEffect,watchSyncEffect,withAsyncContext,withCtx,withDefaults,withDirectives,withMemo,withScopeId,Transition,TransitionGroup,VueElement,createApp:createApp$1,createSSRApp,defineCustomElement,defineSSRCustomElement,hydrate,initDirectivesForSSR,render:render$1,useCssModule,useCssVars,vModelCheckbox,vModelDynamic,vModelRadio,vModelSelect,vModelText,vShow,withKeys,withModifiers},Symbol.toStringTag,{value:"Module"}));function getDevtoolsGlobalHook(){return getTarget().__VUE_DEVTOOLS_GLOBAL_HOOK__}function getTarget(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const isProxyAvailable=typeof Proxy=="function",HOOK_SETUP="devtools-plugin:setup",HOOK_PLUGIN_SETTINGS_SET="plugin:settings:set";let supported,perf;function isPerformanceSupported(){var e;return supported!==void 0||(typeof window<"u"&&window.performance?(supported=!0,perf=window.performance):typeof global<"u"&&((e=global.perf_hooks)===null||e===void 0?void 0:e.performance)?(supported=!0,perf=global.perf_hooks.performance):supported=!1),supported}function now$1(){return isPerformanceSupported()?perf.now():Date.now()}class ApiProxy{constructor(t,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=n;const r={};if(t.settings)for(const g in t.settings){const o=t.settings[g];r[g]=o.defaultValue}const c=`__vue-devtools-plugin-settings__${t.id}`;let d=Object.assign({},r);try{const g=localStorage.getItem(c),o=JSON.parse(g);Object.assign(d,o)}catch{}this.fallbacks={getSettings(){return d},setSettings(g){try{localStorage.setItem(c,JSON.stringify(g))}catch{}d=g},now(){return now$1()}},n&&n.on(HOOK_PLUGIN_SETTINGS_SET,(g,o)=>{g===this.plugin.id&&this.fallbacks.setSettings(o)}),this.proxiedOn=new Proxy({},{get:(g,o)=>this.target?this.target.on[o]:(...v)=>{this.onQueue.push({method:o,args:v})}}),this.proxiedTarget=new Proxy({},{get:(g,o)=>this.target?this.target[o]:o==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(o)?(...v)=>(this.targetQueue.push({method:o,args:v,resolve:()=>{}}),this.fallbacks[o](...v)):(...v)=>new Promise(x=>{this.targetQueue.push({method:o,args:v,resolve:x})})})}async setRealTarget(t){this.target=t;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function setupDevtoolsPlugin(e,t){const n=e,r=getTarget(),c=getDevtoolsGlobalHook(),d=isProxyAvailable&&n.enableEarlyProxy;if(c&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!d))c.emit(HOOK_SETUP,e,t);else{const g=d?new ApiProxy(n,c):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:t,proxy:g}),g&&t(g.proxiedTarget)}}/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof window<"u";function isESModule(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const assign$2=Object.assign;function applyToParams(e,t){const n={};for(const r in t){const c=t[r];n[r]=isArray$7(c)?c.map(e):e(c)}return n}const noop$2=()=>{},isArray$7=Array.isArray;function warn$2(e){const t=Array.from(arguments).slice(1);console.warn.apply(console,["[Vue Router warn]: "+e].concat(t))}const TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=e=>e.replace(TRAILING_SLASH_RE,"");function parseURL(e,t,n="/"){let r,c={},d="",g="";const o=t.indexOf("#");let v=t.indexOf("?");return o<v&&o>=0&&(v=-1),v>-1&&(r=t.slice(0,v),d=t.slice(v+1,o>-1?o:t.length),c=e(d)),o>-1&&(r=r||t.slice(0,o),g=t.slice(o,t.length)),r=resolveRelativePath(r!=null?r:t,n),{fullPath:r+(d&&"?")+d+g,path:r,query:c,hash:g}}function stringifyURL(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function isSameRouteLocation(e,t,n){const r=t.matched.length-1,c=n.matched.length-1;return r>-1&&r===c&&isSameRouteRecord(t.matched[r],n.matched[c])&&isSameRouteLocationParams(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function isSameRouteRecord(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function isSameRouteLocationParams(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!isSameRouteLocationParamsValue(e[n],t[n]))return!1;return!0}function isSameRouteLocationParamsValue(e,t){return isArray$7(e)?isEquivalentArray(e,t):isArray$7(t)?isEquivalentArray(t,e):e===t}function isEquivalentArray(e,t){return isArray$7(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function resolveRelativePath(e,t){if(e.startsWith("/"))return e;if(process.env.NODE_ENV!=="production"&&!t.startsWith("/"))return warn$2(`Cannot resolve a relative location without an absolute path. Trying to resolve "${e}" from "${t}". It should look like "/${t}".`),e;if(!e)return t;const n=t.split("/"),r=e.split("/");let c=n.length-1,d,g;for(d=0;d<r.length;d++)if(g=r[d],g!==".")if(g==="..")c>1&&c--;else break;return n.slice(0,c).join("/")+"/"+r.slice(d-(d===r.length?1:0)).join("/")}var NavigationType;(function(e){e.pop="pop",e.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(e){e.back="back",e.forward="forward",e.unknown=""})(NavigationDirection||(NavigationDirection={}));const START="";function normalizeBase(e){if(!e)if(isBrowser){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),removeTrailingSlash(e)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(e,t){return e.replace(BEFORE_HASH_RE,"#")+t}function getElementPosition(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#");if(process.env.NODE_ENV!=="production"&&typeof e.el=="string"&&(!r||!document.getElementById(e.el.slice(1))))try{const d=document.querySelector(e.el);if(r&&d){warn$2(`The selector "${e.el}" should be passed as "el: document.querySelector('${e.el}')" because it starts with "#".`);return}}catch{warn$2(`The selector "${e.el}" is invalid. If you are using an id selector, make sure to escape it. You can find more information about escaping characters in selectors at https://mathiasbynens.be/notes/css-escapes or use CSS.escape (https://developer.mozilla.org/en-US/docs/Web/API/CSS/escape).`);return}const c=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!c){process.env.NODE_ENV!=="production"&&warn$2(`Couldn't find element using selector "${e.el}" returned by scrollBehavior.`);return}t=getElementPosition(c,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function getScrollKey(e,t){return(history.state?history.state.position-t:-1)+e}const scrollPositions=new Map;function saveScrollPosition(e,t){scrollPositions.set(e,t)}function getSavedScrollPosition(e){const t=scrollPositions.get(e);return scrollPositions.delete(e),t}function createMemoryHistory(e=""){let t=[],n=[START],r=0;e=normalizeBase(e);function c(o){r++,r===n.length||n.splice(r),n.push(o)}function d(o,v,{direction:x,delta:E}){const k={direction:x,delta:E,type:NavigationType.pop};for(const S of t)S(o,v,k)}const g={location:START,state:{},base:e,createHref:createHref.bind(null,e),replace(o){n.splice(r--,1),c(o)},push(o,v){c(o)},listen(o){return t.push(o),()=>{const v=t.indexOf(o);v>-1&&t.splice(v,1)}},destroy(){t=[],n=[START],r=0},go(o,v=!0){const x=this.location,E=o<0?NavigationDirection.back:NavigationDirection.forward;r=Math.max(0,Math.min(r+o,n.length-1)),v&&d(this.location,x,{direction:E,delta:o})}};return Object.defineProperty(g,"location",{enumerable:!0,get:()=>n[r]}),g}function isRouteLocation(e){return typeof e=="string"||e&&typeof e=="object"}function isRouteName(e){return typeof e=="string"||typeof e=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol(process.env.NODE_ENV!=="production"?"navigation failure":"");var NavigationFailureType;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));const ErrorTypeMessages={[1]({location:e,currentLocation:t}){return`No match for
 ${JSON.stringify(e)}${t?`
while being at
`+JSON.stringify(t):""}`},[2]({from:e,to:t}){return`Redirected from "${e.fullPath}" to "${stringifyRoute(t)}" via a navigation guard.`},[4]({from:e,to:t}){return`Navigation aborted from "${e.fullPath}" to "${t.fullPath}" via a navigation guard.`},[8]({from:e,to:t}){return`Navigation cancelled from "${e.fullPath}" to "${t.fullPath}" with a new navigation.`},[16]({from:e,to:t}){return`Avoided redundant navigation to current location: "${e.fullPath}".`}};function createRouterError(e,t){return process.env.NODE_ENV!=="production"?assign$2(new Error(ErrorTypeMessages[e](t)),{type:e,[NavigationFailureSymbol]:!0},t):assign$2(new Error,{type:e,[NavigationFailureSymbol]:!0},t)}function isNavigationFailure(e,t){return e instanceof Error&&NavigationFailureSymbol in e&&(t==null||!!(e.type&t))}const propertiesToLog=["params","query","hash"];function stringifyRoute(e){if(typeof e=="string")return e;if("path"in e)return e.path;const t={};for(const n of propertiesToLog)n in e&&(t[n]=e[n]);return JSON.stringify(t,null,2)}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(e,t){const n=assign$2({},BASE_PATH_PARSER_OPTIONS,t),r=[];let c=n.start?"^":"";const d=[];for(const x of e){const E=x.length?[]:[90];n.strict&&!x.length&&(c+="/");for(let k=0;k<x.length;k++){const S=x[k];let N=40+(n.sensitive?.25:0);if(S.type===0)k||(c+="/"),c+=S.value.replace(REGEX_CHARS_RE,"\\$&"),N+=40;else if(S.type===1){const{value:L,repeatable:P,optional:O,regexp:V}=S;d.push({name:L,repeatable:P,optional:O});const z=V||BASE_PARAM_PATTERN;if(z!==BASE_PARAM_PATTERN){N+=10;try{new RegExp(`(${z})`)}catch(W){throw new Error(`Invalid custom RegExp for param "${L}" (${z}): `+W.message)}}let U=P?`((?:${z})(?:/(?:${z}))*)`:`(${z})`;k||(U=O&&x.length<2?`(?:/${U})`:"/"+U),O&&(U+="?"),c+=U,N+=20,O&&(N+=-8),P&&(N+=-20),z===".*"&&(N+=-50)}E.push(N)}r.push(E)}if(n.strict&&n.end){const x=r.length-1;r[x][r[x].length-1]+=.7000000000000001}n.strict||(c+="/?"),n.end?c+="$":n.strict&&(c+="(?:/|$)");const g=new RegExp(c,n.sensitive?"":"i");function o(x){const E=x.match(g),k={};if(!E)return null;for(let S=1;S<E.length;S++){const N=E[S]||"",L=d[S-1];k[L.name]=N&&L.repeatable?N.split("/"):N}return k}function v(x){let E="",k=!1;for(const S of e){(!k||!E.endsWith("/"))&&(E+="/"),k=!1;for(const N of S)if(N.type===0)E+=N.value;else if(N.type===1){const{value:L,repeatable:P,optional:O}=N,V=L in x?x[L]:"";if(isArray$7(V)&&!P)throw new Error(`Provided param "${L}" is an array but it is not repeatable (* or + modifiers)`);const z=isArray$7(V)?V.join("/"):V;if(!z)if(O)S.length<2&&(E.endsWith("/")?E=E.slice(0,-1):k=!0);else throw new Error(`Missing required param "${L}"`);E+=z}}return E||"/"}return{re:g,score:r,keys:d,parse:o,stringify:v}}function compareScoreArray(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function comparePathParserScore(e,t){let n=0;const r=e.score,c=t.score;for(;n<r.length&&n<c.length;){const d=compareScoreArray(r[n],c[n]);if(d)return d;n++}if(Math.abs(c.length-r.length)===1){if(isLastScoreNegative(r))return 1;if(isLastScoreNegative(c))return-1}return c.length-r.length}function isLastScoreNegative(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(e){if(!e)return[[]];if(e==="/")return[[ROOT_TOKEN]];if(!e.startsWith("/"))throw new Error(process.env.NODE_ENV!=="production"?`Route paths should start with a "/": "${e}" should be "/${e}".`:`Invalid path "${e}"`);function t(N){throw new Error(`ERR (${n})/"${x}": ${N}`)}let n=0,r=n;const c=[];let d;function g(){d&&c.push(d),d=[]}let o=0,v,x="",E="";function k(){!x||(n===0?d.push({type:0,value:x}):n===1||n===2||n===3?(d.length>1&&(v==="*"||v==="+")&&t(`A repeatable param (${x}) must be alone in its segment. eg: '/:ids+.`),d.push({type:1,value:x,regexp:E,repeatable:v==="*"||v==="+",optional:v==="*"||v==="?"})):t("Invalid state to consume buffer"),x="")}function S(){x+=v}for(;o<e.length;){if(v=e[o++],v==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:v==="/"?(x&&k(),g()):v===":"?(k(),n=1):S();break;case 4:S(),n=r;break;case 1:v==="("?n=2:VALID_PARAM_RE.test(v)?S():(k(),n=0,v!=="*"&&v!=="?"&&v!=="+"&&o--);break;case 2:v===")"?E[E.length-1]=="\\"?E=E.slice(0,-1)+v:n=3:E+=v;break;case 3:k(),n=0,v!=="*"&&v!=="?"&&v!=="+"&&o--,E="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${x}"`),k(),g(),c}function createRouteRecordMatcher(e,t,n){const r=tokensToParser(tokenizePath(e.path),n);if(process.env.NODE_ENV!=="production"){const d=new Set;for(const g of r.keys)d.has(g.name)&&warn$2(`Found duplicated params with name "${g.name}" for path "${e.path}". Only the last one will be available on "$route.params".`),d.add(g.name)}const c=assign$2(r,{record:e,parent:t,children:[],alias:[]});return t&&!c.record.aliasOf==!t.record.aliasOf&&t.children.push(c),c}function createRouterMatcher(e,t){const n=[],r=new Map;t=mergeOptions({strict:!1,end:!0,sensitive:!1},t);function c(E){return r.get(E)}function d(E,k,S){const N=!S,L=normalizeRouteRecord(E);process.env.NODE_ENV!=="production"&&checkChildMissingNameWithEmptyPath(L,k),L.aliasOf=S&&S.record;const P=mergeOptions(t,E),O=[L];if("alias"in E){const U=typeof E.alias=="string"?[E.alias]:E.alias;for(const W of U)O.push(assign$2({},L,{components:S?S.record.components:L.components,path:W,aliasOf:S?S.record:L}))}let V,z;for(const U of O){const{path:W}=U;if(k&&W[0]!=="/"){const Z=k.record.path,re=Z[Z.length-1]==="/"?"":"/";U.path=k.record.path+(W&&re+W)}if(process.env.NODE_ENV!=="production"&&U.path==="*")throw new Error(`Catch all routes ("*") must now be defined using a param with a custom regexp.
See more at https://next.router.vuejs.org/guide/migration/#removed-star-or-catch-all-routes.`);if(V=createRouteRecordMatcher(U,k,P),process.env.NODE_ENV!=="production"&&k&&W[0]==="/"&&checkMissingParamsInAbsolutePath(V,k),S?(S.alias.push(V),process.env.NODE_ENV!=="production"&&checkSameParams(S,V)):(z=z||V,z!==V&&z.alias.push(V),N&&E.name&&!isAliasRecord(V)&&g(E.name)),L.children){const Z=L.children;for(let re=0;re<Z.length;re++)d(Z[re],V,S&&S.children[re])}S=S||V,(V.record.components&&Object.keys(V.record.components).length||V.record.name||V.record.redirect)&&v(V)}return z?()=>{g(z)}:noop$2}function g(E){if(isRouteName(E)){const k=r.get(E);k&&(r.delete(E),n.splice(n.indexOf(k),1),k.children.forEach(g),k.alias.forEach(g))}else{const k=n.indexOf(E);k>-1&&(n.splice(k,1),E.record.name&&r.delete(E.record.name),E.children.forEach(g),E.alias.forEach(g))}}function o(){return n}function v(E){let k=0;for(;k<n.length&&comparePathParserScore(E,n[k])>=0&&(E.record.path!==n[k].record.path||!isRecordChildOf(E,n[k]));)k++;n.splice(k,0,E),E.record.name&&!isAliasRecord(E)&&r.set(E.record.name,E)}function x(E,k){let S,N={},L,P;if("name"in E&&E.name){if(S=r.get(E.name),!S)throw createRouterError(1,{location:E});if(process.env.NODE_ENV!=="production"){const z=Object.keys(E.params||{}).filter(U=>!S.keys.find(W=>W.name===U));z.length&&warn$2(`Discarded invalid param(s) "${z.join('", "')}" when navigating. See https://github.com/vuejs/router/blob/main/packages/router/CHANGELOG.md#414-2022-08-22 for more details.`)}P=S.record.name,N=assign$2(paramsFromLocation(k.params,S.keys.filter(z=>!z.optional).map(z=>z.name)),E.params&&paramsFromLocation(E.params,S.keys.map(z=>z.name))),L=S.stringify(N)}else if("path"in E)L=E.path,process.env.NODE_ENV!=="production"&&!L.startsWith("/")&&warn$2(`The Matcher cannot resolve relative paths but received "${L}". Unless you directly called \`matcher.resolve("${L}")\`, this is probably a bug in vue-router. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/router.`),S=n.find(z=>z.re.test(L)),S&&(N=S.parse(L),P=S.record.name);else{if(S=k.name?r.get(k.name):n.find(z=>z.re.test(k.path)),!S)throw createRouterError(1,{location:E,currentLocation:k});P=S.record.name,N=assign$2({},k.params,E.params),L=S.stringify(N)}const O=[];let V=S;for(;V;)O.unshift(V.record),V=V.parent;return{name:P,path:L,params:N,matched:O,meta:mergeMetaFields(O)}}return e.forEach(E=>d(E)),{addRoute:d,resolve:x,removeRoute:g,getRoutes:o,getRecordMatcher:c}}function paramsFromLocation(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function normalizeRouteRecord(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:normalizeRecordProps(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function normalizeRecordProps(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="boolean"?n:n[r];return t}function isAliasRecord(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function mergeMetaFields(e){return e.reduce((t,n)=>assign$2(t,n.meta),{})}function mergeOptions(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function isSameParam(e,t){return e.name===t.name&&e.optional===t.optional&&e.repeatable===t.repeatable}function checkSameParams(e,t){for(const n of e.keys)if(!n.optional&&!t.keys.find(isSameParam.bind(null,n)))return warn$2(`Alias "${t.record.path}" and the original record: "${e.record.path}" must have the exact same param named "${n.name}"`);for(const n of t.keys)if(!n.optional&&!e.keys.find(isSameParam.bind(null,n)))return warn$2(`Alias "${t.record.path}" and the original record: "${e.record.path}" must have the exact same param named "${n.name}"`)}function checkChildMissingNameWithEmptyPath(e,t){t&&t.record.name&&!e.name&&!e.path&&warn$2(`The route named "${String(t.record.name)}" has a child without a name and an empty path. Using that name won't render the empty path child so you probably want to move the name to the child instead. If this is intentional, add a name to the child route to remove the warning.`)}function checkMissingParamsInAbsolutePath(e,t){for(const n of t.keys)if(!e.keys.find(isSameParam.bind(null,n)))return warn$2(`Absolute path "${e.record.path}" must have the exact same param named "${n.name}" as its parent "${t.record.path}".`)}function isRecordChildOf(e,t){return t.children.some(n=>n===e||isRecordChildOf(e,n))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(e){return encodeURI(""+e).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(e){return commonEncode(e).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(e){return commonEncode(e).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(e){return encodeQueryValue(e).replace(EQUAL_RE,"%3D")}function encodePath(e){return commonEncode(e).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(e){return e==null?"":encodePath(e).replace(SLASH_RE,"%2F")}function decode$1(e){try{return decodeURIComponent(""+e)}catch{process.env.NODE_ENV!=="production"&&warn$2(`Error decoding "${e}". Using original value`)}return""+e}function parseQuery(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let c=0;c<r.length;++c){const d=r[c].replace(PLUS_RE," "),g=d.indexOf("="),o=decode$1(g<0?d:d.slice(0,g)),v=g<0?null:decode$1(d.slice(g+1));if(o in t){let x=t[o];isArray$7(x)||(x=t[o]=[x]),x.push(v)}else t[o]=v}return t}function stringifyQuery(e){let t="";for(let n in e){const r=e[n];if(n=encodeQueryKey(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(isArray$7(r)?r.map(d=>d&&encodeQueryValue(d)):[r&&encodeQueryValue(r)]).forEach(d=>{d!==void 0&&(t+=(t.length?"&":"")+n,d!=null&&(t+="="+d))})}return t}function normalizeQuery(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=isArray$7(r)?r.map(c=>c==null?null:""+c):r==null?r:""+r)}return t}const matchedRouteKey=Symbol(process.env.NODE_ENV!=="production"?"router view location matched":""),viewDepthKey=Symbol(process.env.NODE_ENV!=="production"?"router view depth":""),routerKey=Symbol(process.env.NODE_ENV!=="production"?"router":""),routeLocationKey=Symbol(process.env.NODE_ENV!=="production"?"route location":""),routerViewLocationKey=Symbol(process.env.NODE_ENV!=="production"?"router view location":"");function useCallbacks(){let e=[];function t(r){return e.push(r),()=>{const c=e.indexOf(r);c>-1&&e.splice(c,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function guardToPromiseFn(e,t,n,r,c){const d=r&&(r.enterCallbacks[c]=r.enterCallbacks[c]||[]);return()=>new Promise((g,o)=>{const v=k=>{k===!1?o(createRouterError(4,{from:n,to:t})):k instanceof Error?o(k):isRouteLocation(k)?o(createRouterError(2,{from:t,to:k})):(d&&r.enterCallbacks[c]===d&&typeof k=="function"&&d.push(k),g())},x=e.call(r&&r.instances[c],t,n,process.env.NODE_ENV!=="production"?canOnlyBeCalledOnce(v,t,n):v);let E=Promise.resolve(x);if(e.length<3&&(E=E.then(v)),process.env.NODE_ENV!=="production"&&e.length>2){const k=`The "next" callback was never called inside of ${e.name?'"'+e.name+'"':""}:
${e.toString()}
. If you are returning a value instead of calling "next", make sure to remove the "next" parameter from your function.`;if(typeof x=="object"&&"then"in x)E=E.then(S=>v._called?S:(warn$2(k),Promise.reject(new Error("Invalid navigation guard"))));else if(x!==void 0&&!v._called){warn$2(k),o(new Error("Invalid navigation guard"));return}}E.catch(k=>o(k))})}function canOnlyBeCalledOnce(e,t,n){let r=0;return function(){r++===1&&warn$2(`The "next" callback was called more than once in one navigation guard when going from "${n.fullPath}" to "${t.fullPath}". It should be called exactly one time in each navigation guard. This will fail in production.`),e._called=!0,r===1&&e.apply(null,arguments)}}function extractComponentsGuards(e,t,n,r){const c=[];for(const d of e){process.env.NODE_ENV!=="production"&&!d.components&&!d.children.length&&warn$2(`Record with path "${d.path}" is either missing a "component(s)" or "children" property.`);for(const g in d.components){let o=d.components[g];if(process.env.NODE_ENV!=="production"){if(!o||typeof o!="object"&&typeof o!="function")throw warn$2(`Component "${g}" in record with path "${d.path}" is not a valid component. Received "${String(o)}".`),new Error("Invalid route component");if("then"in o){warn$2(`Component "${g}" in record with path "${d.path}" is a Promise instead of a function that returns a Promise. Did you write "import('./MyPage.vue')" instead of "() => import('./MyPage.vue')" ? This will break in production if not fixed.`);const v=o;o=()=>v}else o.__asyncLoader&&!o.__warnedDefineAsync&&(o.__warnedDefineAsync=!0,warn$2(`Component "${g}" in record with path "${d.path}" is defined using "defineAsyncComponent()". Write "() => import('./MyPage.vue')" instead of "defineAsyncComponent(() => import('./MyPage.vue'))".`))}if(!(t!=="beforeRouteEnter"&&!d.instances[g]))if(isRouteComponent(o)){const x=(o.__vccOpts||o)[t];x&&c.push(guardToPromiseFn(x,n,r,d,g))}else{let v=o();process.env.NODE_ENV!=="production"&&!("catch"in v)&&(warn$2(`Component "${g}" in record with path "${d.path}" is a function that does not return a Promise. If you were passing a functional component, make sure to add a "displayName" to the component. This will break in production if not fixed.`),v=Promise.resolve(v)),c.push(()=>v.then(x=>{if(!x)return Promise.reject(new Error(`Couldn't resolve component "${g}" at "${d.path}"`));const E=isESModule(x)?x.default:x;d.components[g]=E;const S=(E.__vccOpts||E)[t];return S&&guardToPromiseFn(S,n,r,d,g)()}))}}}return c}function isRouteComponent(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function useLink(e){const t=inject(routerKey),n=inject(routeLocationKey),r=computed(()=>t.resolve(unref(e.to))),c=computed(()=>{const{matched:v}=r.value,{length:x}=v,E=v[x-1],k=n.matched;if(!E||!k.length)return-1;const S=k.findIndex(isSameRouteRecord.bind(null,E));if(S>-1)return S;const N=getOriginalPath(v[x-2]);return x>1&&getOriginalPath(E)===N&&k[k.length-1].path!==N?k.findIndex(isSameRouteRecord.bind(null,v[x-2])):S}),d=computed(()=>c.value>-1&&includesParams(n.params,r.value.params)),g=computed(()=>c.value>-1&&c.value===n.matched.length-1&&isSameRouteLocationParams(n.params,r.value.params));function o(v={}){return guardEvent(v)?t[unref(e.replace)?"replace":"push"](unref(e.to)).catch(noop$2):Promise.resolve()}if((process.env.NODE_ENV!=="production"||!1)&&isBrowser){const v=getCurrentInstance();if(v){const x={route:r.value,isActive:d.value,isExactActive:g.value};v.__vrl_devtools=v.__vrl_devtools||[],v.__vrl_devtools.push(x),watchEffect(()=>{x.route=r.value,x.isActive=d.value,x.isExactActive=g.value},{flush:"post"})}}return{route:r,href:computed(()=>r.value.href),isActive:d,isExactActive:g,navigate:o}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(e,{slots:t}){const n=reactive(useLink(e)),{options:r}=inject(routerKey),c=computed(()=>({[getLinkClass(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[getLinkClass(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const d=t.default&&t.default(n);return e.custom?d:h("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:c.value},d)}}}),RouterLink=RouterLinkImpl;function guardEvent(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function includesParams(e,t){for(const n in t){const r=t[n],c=e[n];if(typeof r=="string"){if(r!==c)return!1}else if(!isArray$7(c)||c.length!==r.length||r.some((d,g)=>d!==c[g]))return!1}return!0}function getOriginalPath(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const getLinkClass=(e,t,n)=>e!=null?e:t!=null?t:n,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){process.env.NODE_ENV!=="production"&&warnDeprecatedUsage();const r=inject(routerViewLocationKey),c=computed(()=>e.route||r.value),d=inject(viewDepthKey,0),g=computed(()=>{let x=unref(d);const{matched:E}=c.value;let k;for(;(k=E[x])&&!k.components;)x++;return x}),o=computed(()=>c.value.matched[g.value]);provide(viewDepthKey,computed(()=>g.value+1)),provide(matchedRouteKey,o),provide(routerViewLocationKey,c);const v=ref();return watch(()=>[v.value,o.value,e.name],([x,E,k],[S,N,L])=>{E&&(E.instances[k]=x,N&&N!==E&&x&&x===S&&(E.leaveGuards.size||(E.leaveGuards=N.leaveGuards),E.updateGuards.size||(E.updateGuards=N.updateGuards))),x&&E&&(!N||!isSameRouteRecord(E,N)||!S)&&(E.enterCallbacks[k]||[]).forEach(P=>P(x))},{flush:"post"}),()=>{const x=c.value,E=e.name,k=o.value,S=k&&k.components[E];if(!S)return normalizeSlot(n.default,{Component:S,route:x});const N=k.props[E],L=N?N===!0?x.params:typeof N=="function"?N(x):N:null,O=h(S,assign$2({},L,t,{onVnodeUnmounted:V=>{V.component.isUnmounted&&(k.instances[E]=null)},ref:v}));if((process.env.NODE_ENV!=="production"||!1)&&isBrowser&&O.ref){const V={depth:g.value,name:k.name,path:k.path,meta:k.meta};(isArray$7(O.ref)?O.ref.map(U=>U.i):[O.ref.i]).forEach(U=>{U.__vrv_devtools=V})}return normalizeSlot(n.default,{Component:O,route:x})||O}}});function normalizeSlot(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const RouterView=RouterViewImpl;function warnDeprecatedUsage(){const e=getCurrentInstance(),t=e.parent&&e.parent.type.name;if(t&&(t==="KeepAlive"||t.includes("Transition"))){const n=t==="KeepAlive"?"keep-alive":"transition";warn$2(`<router-view> can no longer be used directly inside <transition> or <keep-alive>.
Use slot props instead:

<router-view v-slot="{ Component }">
  <${n}>
    <component :is="Component" />
  </${n}>
</router-view>`)}}function formatRouteLocation(e,t){const n=assign$2({},e,{matched:e.matched.map(r=>omit(r,["instances","children","aliasOf"]))});return{_custom:{type:null,readOnly:!0,display:e.fullPath,tooltip:t,value:n}}}function formatDisplay(e){return{_custom:{display:e}}}let routerId=0;function addDevtools(e,t,n){if(t.__hasDevtools)return;t.__hasDevtools=!0;const r=routerId++;setupDevtoolsPlugin({id:"org.vuejs.router"+(r?"."+r:""),label:"Vue Router",packageName:"vue-router",homepage:"https://router.vuejs.org",logo:"https://router.vuejs.org/logo.png",componentStateTypes:["Routing"],app:e},c=>{typeof c.now!="function"&&console.warn("[Vue Router]: You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),c.on.inspectComponent((E,k)=>{E.instanceData&&E.instanceData.state.push({type:"Routing",key:"$route",editable:!1,value:formatRouteLocation(t.currentRoute.value,"Current Route")})}),c.on.visitComponentTree(({treeNode:E,componentInstance:k})=>{if(k.__vrv_devtools){const S=k.__vrv_devtools;E.tags.push({label:(S.name?`${S.name.toString()}: `:"")+S.path,textColor:0,tooltip:"This component is rendered by &lt;router-view&gt;",backgroundColor:PINK_500})}isArray$7(k.__vrl_devtools)&&(k.__devtoolsApi=c,k.__vrl_devtools.forEach(S=>{let N=ORANGE_400,L="";S.isExactActive?(N=LIME_500,L="This is exactly active"):S.isActive&&(N=BLUE_600,L="This link is active"),E.tags.push({label:S.route.path,textColor:0,tooltip:L,backgroundColor:N})}))}),watch(t.currentRoute,()=>{v(),c.notifyComponentUpdate(),c.sendInspectorTree(o),c.sendInspectorState(o)});const d="router:navigations:"+r;c.addTimelineLayer({id:d,label:`Router${r?" "+r:""} Navigations`,color:4237508}),t.onError((E,k)=>{c.addTimelineEvent({layerId:d,event:{title:"Error during Navigation",subtitle:k.fullPath,logType:"error",time:c.now(),data:{error:E},groupId:k.meta.__navigationId}})});let g=0;t.beforeEach((E,k)=>{const S={guard:formatDisplay("beforeEach"),from:formatRouteLocation(k,"Current Location during this navigation"),to:formatRouteLocation(E,"Target location")};Object.defineProperty(E.meta,"__navigationId",{value:g++}),c.addTimelineEvent({layerId:d,event:{time:c.now(),title:"Start of navigation",subtitle:E.fullPath,data:S,groupId:E.meta.__navigationId}})}),t.afterEach((E,k,S)=>{const N={guard:formatDisplay("afterEach")};S?(N.failure={_custom:{type:Error,readOnly:!0,display:S?S.message:"",tooltip:"Navigation Failure",value:S}},N.status=formatDisplay("\u274C")):N.status=formatDisplay("\u2705"),N.from=formatRouteLocation(k,"Current Location during this navigation"),N.to=formatRouteLocation(E,"Target location"),c.addTimelineEvent({layerId:d,event:{title:"End of navigation",subtitle:E.fullPath,time:c.now(),data:N,logType:S?"warning":"default",groupId:E.meta.__navigationId}})});const o="router-inspector:"+r;c.addInspector({id:o,label:"Routes"+(r?" "+r:""),icon:"book",treeFilterPlaceholder:"Search routes"});function v(){if(!x)return;const E=x;let k=n.getRoutes().filter(S=>!S.parent);k.forEach(resetMatchStateOnRouteRecord),E.filter&&(k=k.filter(S=>isRouteMatching(S,E.filter.toLowerCase()))),k.forEach(S=>markRouteRecordActive(S,t.currentRoute.value)),E.rootNodes=k.map(formatRouteRecordForInspector)}let x;c.on.getInspectorTree(E=>{x=E,E.app===e&&E.inspectorId===o&&v()}),c.on.getInspectorState(E=>{if(E.app===e&&E.inspectorId===o){const S=n.getRoutes().find(N=>N.record.__vd_id===E.nodeId);S&&(E.state={options:formatRouteRecordMatcherForStateInspector(S)})}}),c.sendInspectorTree(o),c.sendInspectorState(o)})}function modifierForKey(e){return e.optional?e.repeatable?"*":"?":e.repeatable?"+":""}function formatRouteRecordMatcherForStateInspector(e){const{record:t}=e,n=[{editable:!1,key:"path",value:t.path}];return t.name!=null&&n.push({editable:!1,key:"name",value:t.name}),n.push({editable:!1,key:"regexp",value:e.re}),e.keys.length&&n.push({editable:!1,key:"keys",value:{_custom:{type:null,readOnly:!0,display:e.keys.map(r=>`${r.name}${modifierForKey(r)}`).join(" "),tooltip:"Param keys",value:e.keys}}}),t.redirect!=null&&n.push({editable:!1,key:"redirect",value:t.redirect}),e.alias.length&&n.push({editable:!1,key:"aliases",value:e.alias.map(r=>r.record.path)}),Object.keys(e.record.meta).length&&n.push({editable:!1,key:"meta",value:e.record.meta}),n.push({key:"score",editable:!1,value:{_custom:{type:null,readOnly:!0,display:e.score.map(r=>r.join(", ")).join(" | "),tooltip:"Score used to sort routes",value:e.score}}}),n}const PINK_500=15485081,BLUE_600=2450411,LIME_500=8702998,CYAN_400=2282478,ORANGE_400=16486972,DARK=6710886;function formatRouteRecordForInspector(e){const t=[],{record:n}=e;n.name!=null&&t.push({label:String(n.name),textColor:0,backgroundColor:CYAN_400}),n.aliasOf&&t.push({label:"alias",textColor:0,backgroundColor:ORANGE_400}),e.__vd_match&&t.push({label:"matches",textColor:0,backgroundColor:PINK_500}),e.__vd_exactActive&&t.push({label:"exact",textColor:0,backgroundColor:LIME_500}),e.__vd_active&&t.push({label:"active",textColor:0,backgroundColor:BLUE_600}),n.redirect&&t.push({label:typeof n.redirect=="string"?`redirect: ${n.redirect}`:"redirects",textColor:16777215,backgroundColor:DARK});let r=n.__vd_id;return r==null&&(r=String(routeRecordId++),n.__vd_id=r),{id:r,label:n.path,tags:t,children:e.children.map(formatRouteRecordForInspector)}}let routeRecordId=0;const EXTRACT_REGEXP_RE=/^\/(.*)\/([a-z]*)$/;function markRouteRecordActive(e,t){const n=t.matched.length&&isSameRouteRecord(t.matched[t.matched.length-1],e.record);e.__vd_exactActive=e.__vd_active=n,n||(e.__vd_active=t.matched.some(r=>isSameRouteRecord(r,e.record))),e.children.forEach(r=>markRouteRecordActive(r,t))}function resetMatchStateOnRouteRecord(e){e.__vd_match=!1,e.children.forEach(resetMatchStateOnRouteRecord)}function isRouteMatching(e,t){const n=String(e.re).match(EXTRACT_REGEXP_RE);if(e.__vd_match=!1,!n||n.length<3)return!1;if(new RegExp(n[1].replace(/\$$/,""),n[2]).test(t))return e.children.forEach(g=>isRouteMatching(g,t)),e.record.path!=="/"||t==="/"?(e.__vd_match=e.re.test(t),!0):!1;const c=e.record.path.toLowerCase(),d=decode$1(c);return!t.startsWith("/")&&(d.includes(t)||c.includes(t))||d.startsWith(t)||c.startsWith(t)||e.record.name&&String(e.record.name).includes(t)?!0:e.children.some(g=>isRouteMatching(g,t))}function omit(e,t){const n={};for(const r in e)t.includes(r)||(n[r]=e[r]);return n}function createRouter(e){const t=createRouterMatcher(e.routes,e),n=e.parseQuery||parseQuery,r=e.stringifyQuery||stringifyQuery,c=e.history;if(process.env.NODE_ENV!=="production"&&!c)throw new Error('Provide the "history" option when calling "createRouter()": https://next.router.vuejs.org/api/#history.');const d=useCallbacks(),g=useCallbacks(),o=useCallbacks(),v=shallowRef(START_LOCATION_NORMALIZED);let x=START_LOCATION_NORMALIZED;isBrowser&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const E=applyToParams.bind(null,at=>""+at),k=applyToParams.bind(null,encodeParam),S=applyToParams.bind(null,decode$1);function N(at,Ot){let bt,jt;return isRouteName(at)?(bt=t.getRecordMatcher(at),jt=Ot):jt=at,t.addRoute(jt,bt)}function L(at){const Ot=t.getRecordMatcher(at);Ot?t.removeRoute(Ot):process.env.NODE_ENV!=="production"&&warn$2(`Cannot remove non-existent route "${String(at)}"`)}function P(){return t.getRoutes().map(at=>at.record)}function O(at){return!!t.getRecordMatcher(at)}function V(at,Ot){if(Ot=assign$2({},Ot||v.value),typeof at=="string"){const Ht=parseURL(n,at,Ot.path),Ee=t.resolve({path:Ht.path},Ot),Ne=c.createHref(Ht.fullPath);return process.env.NODE_ENV!=="production"&&(Ne.startsWith("//")?warn$2(`Location "${at}" resolved to "${Ne}". A resolved location cannot start with multiple slashes.`):Ee.matched.length||warn$2(`No match found for location with path "${at}"`)),assign$2(Ht,Ee,{params:S(Ee.params),hash:decode$1(Ht.hash),redirectedFrom:void 0,href:Ne})}let bt;if("path"in at)process.env.NODE_ENV!=="production"&&"params"in at&&!("name"in at)&&Object.keys(at.params).length&&warn$2(`Path "${at.path}" was passed with params but they will be ignored. Use a named route alongside params instead.`),bt=assign$2({},at,{path:parseURL(n,at.path,Ot.path).path});else{const Ht=assign$2({},at.params);for(const Ee in Ht)Ht[Ee]==null&&delete Ht[Ee];bt=assign$2({},at,{params:k(at.params)}),Ot.params=k(Ot.params)}const jt=t.resolve(bt,Ot),gn=at.hash||"";process.env.NODE_ENV!=="production"&&gn&&!gn.startsWith("#")&&warn$2(`A \`hash\` should always start with the character "#". Replace "${gn}" with "#${gn}".`),jt.params=E(S(jt.params));const dn=stringifyURL(r,assign$2({},at,{hash:encodeHash(gn),path:jt.path})),hn=c.createHref(dn);return process.env.NODE_ENV!=="production"&&(hn.startsWith("//")?warn$2(`Location "${at}" resolved to "${hn}". A resolved location cannot start with multiple slashes.`):jt.matched.length||warn$2(`No match found for location with path "${"path"in at?at.path:at}"`)),assign$2({fullPath:dn,hash:gn,query:r===stringifyQuery?normalizeQuery(at.query):at.query||{}},jt,{redirectedFrom:void 0,href:hn})}function z(at){return typeof at=="string"?parseURL(n,at,v.value.path):assign$2({},at)}function U(at,Ot){if(x!==at)return createRouterError(8,{from:Ot,to:at})}function W(at){return oe(at)}function Z(at){return W(assign$2(z(at),{replace:!0}))}function re(at){const Ot=at.matched[at.matched.length-1];if(Ot&&Ot.redirect){const{redirect:bt}=Ot;let jt=typeof bt=="function"?bt(at):bt;if(typeof jt=="string"&&(jt=jt.includes("?")||jt.includes("#")?jt=z(jt):{path:jt},jt.params={}),process.env.NODE_ENV!=="production"&&!("path"in jt)&&!("name"in jt))throw warn$2(`Invalid redirect found:
${JSON.stringify(jt,null,2)}
 when navigating to "${at.fullPath}". A redirect must contain a name or path. This will break in production.`),new Error("Invalid redirect");return assign$2({query:at.query,hash:at.hash,params:"path"in jt?{}:at.params},jt)}}function oe(at,Ot){const bt=x=V(at),jt=v.value,gn=at.state,dn=at.force,hn=at.replace===!0,Ht=re(bt);if(Ht)return oe(assign$2(z(Ht),{state:typeof Ht=="object"?assign$2({},gn,Ht.state):gn,force:dn,replace:hn}),Ot||bt);const Ee=bt;Ee.redirectedFrom=Ot;let Ne;return!dn&&isSameRouteLocation(r,jt,bt)&&(Ne=createRouterError(16,{to:Ee,from:jt}),mt(jt,jt,!0,!1)),(Ne?Promise.resolve(Ne):ce(Ee,jt)).catch(et=>isNavigationFailure(et)?isNavigationFailure(et,2)?et:nt(et):ke(et,Ee,jt)).then(et=>{if(et){if(isNavigationFailure(et,2))return process.env.NODE_ENV!=="production"&&isSameRouteLocation(r,V(et.to),Ee)&&Ot&&(Ot._count=Ot._count?Ot._count+1:1)>10?(warn$2(`Detected an infinite redirection in a navigation guard when going from "${jt.fullPath}" to "${Ee.fullPath}". Aborting to avoid a Stack Overflow. This will break in production if not fixed.`),Promise.reject(new Error("Infinite redirect in navigation guard"))):oe(assign$2({replace:hn},z(et.to),{state:typeof et.to=="object"?assign$2({},gn,et.to.state):gn,force:dn}),Ot||Ee)}else et=we(Ee,jt,!0,hn,gn);return me(Ee,jt,et),et})}function se(at,Ot){const bt=U(at,Ot);return bt?Promise.reject(bt):Promise.resolve()}function ce(at,Ot){let bt;const[jt,gn,dn]=extractChangingRecords(at,Ot);bt=extractComponentsGuards(jt.reverse(),"beforeRouteLeave",at,Ot);for(const Ht of jt)Ht.leaveGuards.forEach(Ee=>{bt.push(guardToPromiseFn(Ee,at,Ot))});const hn=se.bind(null,at,Ot);return bt.push(hn),runGuardQueue(bt).then(()=>{bt=[];for(const Ht of d.list())bt.push(guardToPromiseFn(Ht,at,Ot));return bt.push(hn),runGuardQueue(bt)}).then(()=>{bt=extractComponentsGuards(gn,"beforeRouteUpdate",at,Ot);for(const Ht of gn)Ht.updateGuards.forEach(Ee=>{bt.push(guardToPromiseFn(Ee,at,Ot))});return bt.push(hn),runGuardQueue(bt)}).then(()=>{bt=[];for(const Ht of at.matched)if(Ht.beforeEnter&&!Ot.matched.includes(Ht))if(isArray$7(Ht.beforeEnter))for(const Ee of Ht.beforeEnter)bt.push(guardToPromiseFn(Ee,at,Ot));else bt.push(guardToPromiseFn(Ht.beforeEnter,at,Ot));return bt.push(hn),runGuardQueue(bt)}).then(()=>(at.matched.forEach(Ht=>Ht.enterCallbacks={}),bt=extractComponentsGuards(dn,"beforeRouteEnter",at,Ot),bt.push(hn),runGuardQueue(bt))).then(()=>{bt=[];for(const Ht of g.list())bt.push(guardToPromiseFn(Ht,at,Ot));return bt.push(hn),runGuardQueue(bt)}).catch(Ht=>isNavigationFailure(Ht,8)?Ht:Promise.reject(Ht))}function me(at,Ot,bt){for(const jt of o.list())jt(at,Ot,bt)}function we(at,Ot,bt,jt,gn){const dn=U(at,Ot);if(dn)return dn;const hn=Ot===START_LOCATION_NORMALIZED,Ht=isBrowser?history.state:{};bt&&(jt||hn?c.replace(at.fullPath,assign$2({scroll:hn&&Ht&&Ht.scroll},gn)):c.push(at.fullPath,gn)),v.value=at,mt(at,Ot,bt,hn),nt()}let ae;function Ce(){ae||(ae=c.listen((at,Ot,bt)=>{if(!vn.listening)return;const jt=V(at),gn=re(jt);if(gn){oe(assign$2(gn,{replace:!0}),jt).catch(noop$2);return}x=jt;const dn=v.value;isBrowser&&saveScrollPosition(getScrollKey(dn.fullPath,bt.delta),computeScrollPosition()),ce(jt,dn).catch(hn=>isNavigationFailure(hn,12)?hn:isNavigationFailure(hn,2)?(oe(hn.to,jt).then(Ht=>{isNavigationFailure(Ht,20)&&!bt.delta&&bt.type===NavigationType.pop&&c.go(-1,!1)}).catch(noop$2),Promise.reject()):(bt.delta&&c.go(-bt.delta,!1),ke(hn,jt,dn))).then(hn=>{hn=hn||we(jt,dn,!1),hn&&(bt.delta&&!isNavigationFailure(hn,8)?c.go(-bt.delta,!1):bt.type===NavigationType.pop&&isNavigationFailure(hn,20)&&c.go(-1,!1)),me(jt,dn,hn)}).catch(noop$2)}))}let Fe=useCallbacks(),it=useCallbacks(),_e;function ke(at,Ot,bt){nt(at);const jt=it.list();return jt.length?jt.forEach(gn=>gn(at,Ot,bt)):(process.env.NODE_ENV!=="production"&&warn$2("uncaught error during route navigation:"),console.error(at)),Promise.reject(at)}function ze(){return _e&&v.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((at,Ot)=>{Fe.add([at,Ot])})}function nt(at){return _e||(_e=!at,Ce(),Fe.list().forEach(([Ot,bt])=>at?bt(at):Ot()),Fe.reset()),at}function mt(at,Ot,bt,jt){const{scrollBehavior:gn}=e;if(!isBrowser||!gn)return Promise.resolve();const dn=!bt&&getSavedScrollPosition(getScrollKey(at.fullPath,0))||(jt||!bt)&&history.state&&history.state.scroll||null;return nextTick$1().then(()=>gn(at,Ot,dn)).then(hn=>hn&&scrollToPosition(hn)).catch(hn=>ke(hn,at,Ot))}const qt=at=>c.go(at);let un;const fn=new Set,vn={currentRoute:v,listening:!0,addRoute:N,removeRoute:L,hasRoute:O,getRoutes:P,resolve:V,options:e,push:W,replace:Z,go:qt,back:()=>qt(-1),forward:()=>qt(1),beforeEach:d.add,beforeResolve:g.add,afterEach:o.add,onError:it.add,isReady:ze,install(at){const Ot=this;at.component("RouterLink",RouterLink),at.component("RouterView",RouterView),at.config.globalProperties.$router=Ot,Object.defineProperty(at.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(v)}),isBrowser&&!un&&v.value===START_LOCATION_NORMALIZED&&(un=!0,W(c.location).catch(gn=>{process.env.NODE_ENV!=="production"&&warn$2("Unexpected error when starting the router:",gn)}));const bt={};for(const gn in START_LOCATION_NORMALIZED)bt[gn]=computed(()=>v.value[gn]);at.provide(routerKey,Ot),at.provide(routeLocationKey,reactive(bt)),at.provide(routerViewLocationKey,v);const jt=at.unmount;fn.add(at),at.unmount=function(){fn.delete(at),fn.size<1&&(x=START_LOCATION_NORMALIZED,ae&&ae(),ae=null,v.value=START_LOCATION_NORMALIZED,un=!1,_e=!1),jt()},(process.env.NODE_ENV!=="production"||!1)&&isBrowser&&addDevtools(at,Ot,t)}};return vn}function runGuardQueue(e){return e.reduce((t,n)=>t.then(()=>n()),Promise.resolve())}function extractChangingRecords(e,t){const n=[],r=[],c=[],d=Math.max(t.matched.length,e.matched.length);for(let g=0;g<d;g++){const o=t.matched[g];o&&(e.matched.find(x=>isSameRouteRecord(x,o))?r.push(o):n.push(o));const v=e.matched[g];v&&(t.matched.find(x=>isSameRouteRecord(x,v))||c.push(v))}return[n,r,c]}function useRouter(){return inject(routerKey)}function useRoute(){return inject(routeLocationKey)}const shouldIgnoreProp=makeMap(",key,ref,innerHTML,textContent,ref_key,ref_for");function ssrRenderAttrs(e,t){let n="";for(const r in e){if(shouldIgnoreProp(r)||isOn(r)||t==="textarea"&&r==="value")continue;const c=e[r];r==="class"?n+=` class="${ssrRenderClass(c)}"`:r==="style"?n+=` style="${ssrRenderStyle(c)}"`:n+=ssrRenderDynamicAttr(r,c,t)}return n}function ssrRenderDynamicAttr(e,t,n){if(!isRenderableValue(t))return"";const r=n&&(n.indexOf("-")>0||isSVGTag(n))?e:propsToAttrMap[e]||e.toLowerCase();return isBooleanAttr(r)?includeBooleanAttr(t)?` ${r}`:"":isSSRSafeAttrName(r)?t===""?` ${r}`:` ${r}="${escapeHtml(t)}"`:(console.warn(`[@vue/server-renderer] Skipped rendering unsafe attribute name: ${r}`),"")}function ssrRenderAttr(e,t){return isRenderableValue(t)?` ${e}="${escapeHtml(t)}"`:""}function isRenderableValue(e){if(e==null)return!1;const t=typeof e;return t==="string"||t==="number"||t==="boolean"}function ssrRenderClass(e){return escapeHtml(normalizeClass(e))}function ssrRenderStyle(e){if(!e)return"";if(isString$3(e))return escapeHtml(e);const t=normalizeStyle(e);return escapeHtml(stringifyStyle(t))}function ssrCompile(e,t){throw new Error("On-the-fly template compilation is not supported in the ESM build of @vue/server-renderer. All templates must be pre-compiled into render functions.")}function ssrRenderTeleport(e,t,n,r,c){e("<!--teleport start-->");const d=c.appContext.provides[ssrContextKey],g=d.__teleportBuffers||(d.__teleportBuffers={}),o=g[n]||(g[n]=[]),v=o.length;let x;if(r)t(e),x="<!--teleport anchor-->";else{const{getBuffer:E,push:k}=createBuffer();t(k),k("<!--teleport anchor-->"),x=E()}o.splice(v,0,x),e("<!--teleport end-->")}const{createComponentInstance,setCurrentRenderingInstance,setupComponent,renderComponentRoot,normalizeVNode}=ssrUtils;function createBuffer(){let e=!1;const t=[];return{getBuffer(){return t},push(n){const r=isString$3(n);e&&r?t[t.length-1]+=n:t.push(n),e=r,(isPromise(n)||isArray$8(n)&&n.hasAsync)&&(t.hasAsync=!0)}}}function renderComponentVNode(e,t=null,n){const r=createComponentInstance(e,t,null),c=setupComponent(r,!0),d=isPromise(c),g=r.sp;if(d||g){let o=d?c:Promise.resolve();return g&&(o=o.then(()=>Promise.all(g.map(v=>v.call(r.proxy)))).catch(()=>{})),o.then(()=>renderComponentSubTree(r,n))}else return renderComponentSubTree(r,n)}function renderComponentSubTree(e,t){const n=e.type,{getBuffer:r,push:c}=createBuffer();if(isFunction$2(n)){let d=renderComponentRoot(e);if(!n.props)for(const g in e.attrs)g.startsWith("data-v-")&&((d.props||(d.props={}))[g]="");renderVNode(c,e.subTree=d,e,t)}else{(!e.render||e.render===NOOP)&&!e.ssrRender&&!n.ssrRender&&isString$3(n.template)&&(n.ssrRender=ssrCompile(n.template));for(const g of e.scope.effects)g.computed&&(g.computed._cacheable=!0);const d=e.ssrRender||n.ssrRender;if(d){let g=e.inheritAttrs!==!1?e.attrs:void 0,o=!1,v=e;for(;;){const E=v.vnode.scopeId;E&&(o||(g={...g},o=!0),g[E]="");const k=v.parent;if(k&&k.subTree&&k.subTree===v.vnode)v=k;else break}t&&(o||(g={...g}),g[t.trim()]="");const x=setCurrentRenderingInstance(e);try{d(e.proxy,c,e,g,e.props,e.setupState,e.data,e.ctx)}finally{setCurrentRenderingInstance(x)}}else if(e.render&&e.render!==NOOP)renderVNode(c,e.subTree=renderComponentRoot(e),e,t);else{const g=n.name||n.__file||"<Anonymous>";warn$3(`Component ${g} is missing template or render function.`),c("<!---->")}}return r()}function renderVNode(e,t,n,r){const{type:c,shapeFlag:d,children:g}=t;switch(c){case Text:e(escapeHtml(g));break;case Comment$1:e(g?`<!--${escapeHtmlComment(g)}-->`:"<!---->");break;case Static:e(g);break;case Fragment:t.slotScopeIds&&(r=(r?r+" ":"")+t.slotScopeIds.join(" ")),e("<!--[-->"),renderVNodeChildren(e,g,n,r),e("<!--]-->");break;default:d&1?renderElementVNode(e,t,n,r):d&6?e(renderComponentVNode(t,n,r)):d&64?renderTeleportVNode(e,t,n,r):d&128?renderVNode(e,t.ssContent,n,r):warn$3("[@vue/server-renderer] Invalid VNode type:",c,`(${typeof c})`)}}function renderVNodeChildren(e,t,n,r){for(let c=0;c<t.length;c++)renderVNode(e,normalizeVNode(t[c]),n,r)}function renderElementVNode(e,t,n,r){const c=t.type;let{props:d,children:g,shapeFlag:o,scopeId:v,dirs:x}=t,E=`<${c}`;x&&(d=applySSRDirectives(t,d,x)),d&&(E+=ssrRenderAttrs(d,c)),v&&(E+=` ${v}`);let k=n,S=t;for(;k&&S===k.subTree;)S=k.vnode,S.scopeId&&(E+=` ${S.scopeId}`),k=k.parent;if(r&&(E+=` ${r}`),e(E+">"),!isVoidTag(c)){let N=!1;d&&(d.innerHTML?(N=!0,e(d.innerHTML)):d.textContent?(N=!0,e(escapeHtml(d.textContent))):c==="textarea"&&d.value&&(N=!0,e(escapeHtml(d.value)))),N||(o&8?e(escapeHtml(g)):o&16&&renderVNodeChildren(e,g,n,r)),e(`</${c}>`)}}function applySSRDirectives(e,t,n){const r=[];for(let c=0;c<n.length;c++){const d=n[c],{dir:{getSSRProps:g}}=d;if(g){const o=g(d,e);o&&r.push(o)}}return mergeProps(t||{},...r)}function renderTeleportVNode(e,t,n,r){const c=t.props&&t.props.to,d=t.props&&t.props.disabled;if(!c)return d||warn$3("[@vue/server-renderer] Teleport is missing target prop."),[];if(!isString$3(c))return warn$3("[@vue/server-renderer] Teleport target must be a query selector string."),[];ssrRenderTeleport(e,g=>{renderVNodeChildren(g,t.children,n,r)},c,d||d==="",n)}const{isVNode}=ssrUtils;async function unrollBuffer(e){if(e.hasAsync){let t="";for(let n=0;n<e.length;n++){let r=e[n];isPromise(r)&&(r=await r),isString$3(r)?t+=r:t+=await unrollBuffer(r)}return t}else return unrollBufferSync(e)}function unrollBufferSync(e){let t="";for(let n=0;n<e.length;n++){let r=e[n];isString$3(r)?t+=r:t+=unrollBufferSync(r)}return t}async function renderToString(e,t={}){if(isVNode(e))return renderToString(createApp$1({render:()=>e}),t);const n=createVNode(e._component,e._props);n.appContext=e._context,e.provide(ssrContextKey,t);const r=await renderComponentVNode(n),c=await unrollBuffer(r);if(await resolveTeleports(t),t.__watcherHandles)for(const d of t.__watcherHandles)d();return c}async function resolveTeleports(e){if(e.__teleportBuffers){e.teleports=e.teleports||{};for(const t in e.__teleportBuffers)e.teleports[t]=await unrollBuffer(await Promise.all([e.__teleportBuffers[t]]))}}function ssrRenderComponent(e,t=null,n=null,r=null,c){return renderComponentVNode(createVNode(e,t,n),r,c)}function ssrRenderSlot(e,t,n,r,c,d,g){c("<!--[-->"),ssrRenderSlotInner(e,t,n,r,c,d,g),c("<!--]-->")}function ssrRenderSlotInner(e,t,n,r,c,d,g,o){const v=e[t];if(v){const x=[],k=v(n,S=>{x.push(S)},d,g?" "+g:"");if(isArray$8(k))renderVNodeChildren(c,k,d,g);else{let S=!0;if(o)S=!1;else for(let N=0;N<x.length;N++)if(!isComment(x[N])){S=!1;break}if(S)r&&r();else for(let N=0;N<x.length;N++)c(x[N])}}else r&&r()}const commentTestRE=/^<!--.*-->$/s,commentRE=/<!--[^]*?-->/gm;function isComment(e){return typeof e!="string"||!commentTestRE.test(e)?!1:e.length<=8?!0:!e.replace(commentRE,"").trim()}function ssrInterpolate(e){return escapeHtml(toDisplayString(e))}function toRaw(e){const t=e&&e.__v_raw;return t?toRaw(t):e}function isRef(e){return!!(e&&e.__v_isRef===!0)}const stack=[];function pushWarningContext(e){stack.push(e)}function popWarningContext(){stack.pop()}function warn$1(e,...t){if(process.env.NODE_ENV==="production")return;const n=stack.length?stack[stack.length-1].component:null,r=n&&n.appContext.config.warnHandler,c=getComponentTrace();if(r)callWithErrorHandling(r,n,11,[e+t.join(""),n&&n.proxy,c.map(({vnode:d})=>`at <${formatComponentName(n,d.type)}>`).join(`
`),c]);else{const d=[`[Vue warn]: ${e}`,...t];c.length&&d.push(`
`,...formatTrace(c)),console.warn(...d)}}function getComponentTrace(){let e=stack[stack.length-1];if(!e)return[];const t=[];for(;e;){const n=t[0];n&&n.vnode===e?n.recurseCount++:t.push({vnode:e,recurseCount:0});const r=e.component&&e.component.parent;e=r&&r.vnode}return t}function formatTrace(e){const t=[];return e.forEach((n,r)=>{t.push(...r===0?[]:[`
`],...formatTraceEntry(n))}),t}function formatTraceEntry({vnode:e,recurseCount:t}){const n=t>0?`... (${t} recursive calls)`:"",r=e.component?e.component.parent==null:!1,c=` at <${formatComponentName(e.component,e.type,r)}`,d=">"+n;return e.props?[c,...formatProps(e.props),d]:[c+d]}function formatProps(e){const t=[],n=Object.keys(e);return n.slice(0,3).forEach(r=>{t.push(...formatProp(r,e[r]))}),n.length>3&&t.push(" ..."),t}function formatProp(e,t,n){return isString$3(t)?(t=JSON.stringify(t),n?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?n?t:[`${e}=${t}`]:isRef(t)?(t=formatProp(e,toRaw(t.value),!0),n?t:[`${e}=Ref<`,t,">"]):isFunction$2(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=toRaw(t),n?t:[`${e}=`,t])}const ErrorTypeStrings={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",[0]:"setup function",[1]:"render function",[2]:"watcher getter",[3]:"watcher callback",[4]:"watcher cleanup function",[5]:"native event handler",[6]:"component event handler",[7]:"vnode hook",[8]:"directive hook",[9]:"transition hook",[10]:"app errorHandler",[11]:"app warnHandler",[12]:"ref function",[13]:"async component loader",[14]:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/core"};function callWithErrorHandling(e,t,n,r){let c;try{c=r?e(...r):e()}catch(d){handleError(d,t,n)}return c}function handleError(e,t,n,r=!0){const c=t?t.vnode:null;if(t){let d=t.parent;const g=t.proxy,o=process.env.NODE_ENV!=="production"?ErrorTypeStrings[n]:n;for(;d;){const x=d.ec;if(x){for(let E=0;E<x.length;E++)if(x[E](e,g,o)===!1)return}d=d.parent}const v=t.appContext.config.errorHandler;if(v){callWithErrorHandling(v,null,10,[e,g,o]);return}}logError(e,n,c,r)}function logError(e,t,n,r=!0){if(process.env.NODE_ENV!=="production"){const c=ErrorTypeStrings[t];if(n&&pushWarningContext(n),warn$1(`Unhandled error${c?` during execution of ${c}`:""}`),n&&popWarningContext(),r)throw e;console.error(e)}else console.error(e)}const classifyRE=/(?:^|[-_])(\w)/g,classify=e=>e.replace(classifyRE,t=>t.toUpperCase()).replace(/[-_]/g,"");function getComponentName(e,t=!0){return isFunction$2(e)?e.displayName||e.name:e.name||t&&e.__name}function formatComponentName(e,t,n=!1){let r=getComponentName(t);if(!r&&t.__file){const c=t.__file.match(/([^/\\]+)\.\w+$/);c&&(r=c[1])}if(!r&&e&&e.parent){const c=d=>{for(const g in d)if(d[g]===t)return g};r=c(e.components||e.parent.type.components)||c(e.appContext.components)}return r?classify(r):n?"App":"Anonymous"}function ssrRenderList(e,t){if(isArray$8(e)||isString$3(e))for(let n=0,r=e.length;n<r;n++)t(e[n],n);else if(typeof e=="number"){if(process.env.NODE_ENV!=="production"&&!Number.isInteger(e)){warn$1(`The v-for range expect an integer value but got ${e}.`);return}for(let n=0;n<e;n++)t(n+1,n)}else if(isObject$6(e))if(e[Symbol.iterator]){const n=Array.from(e);for(let r=0,c=n.length;r<c;r++)t(n[r],r)}else{const n=Object.keys(e);for(let r=0,c=n.length;r<c;r++){const d=n[r];t(e[d],d,r)}}}async function ssrRenderSuspense(e,{default:t}){t?t():e("<!---->")}function ssrGetDirectiveProps(e,t,n,r,c={}){return typeof t!="function"&&t.getSSRProps?t.getSSRProps({dir:t,instance:e,value:n,oldValue:void 0,arg:r,modifiers:c},null)||{}:{}}const ssrLooseEqual=looseEqual;initDirectivesForSSR();const NODE_ENV=process.env.NODE_ENV,isDev=process.env.NODE_ENV==="development";process.env.NODE_ENV;process.env.NODE_ENV;const SSR_SYMBLE_KEY="__SSR__",renderSSRSymbleScript=()=>`<script>window.${SSR_SYMBLE_KEY} = true<\/script>`,getSSRSymbleStatus=()=>Boolean(window[SSR_SYMBLE_KEY]),SSR_CONTEXT_KEY="__INITIAL_SSR_CONTEXT__",renderSSRContextScript=e=>`<script>window.${SSR_CONTEXT_KEY} = ${e}<\/script>`;let ssrContext={};const setSSRContext=(e,t)=>{ssrContext[e]=t&&JSON.parse(JSON.stringify(t))},getSSRContext=e=>ssrContext[e];function rebirthSSRContext(e){return ssrContext=Object.assign({},{}),e.config.globalProperties.$ssrContext=ssrContext,ssrContext}function getSSRContextByApp(e){return e.config.globalProperties.$ssrContext||ssrContext}const isSSR=typeof window>"u"||getSSRSymbleStatus(),isSPA=!isSSR,isServer=!0,isClient=!isServer,API_PROXY_URL="/api",API_LOCAL_URL="http://localhost:8000",API_ONLINE_URL="https://api.surmon.me",DEV_API=isSPA?API_PROXY_URL:API_ONLINE_URL,PROD_API=isSPA?API_ONLINE_URL:API_LOCAL_URL,API_CONFIG={FE:"https://surmon.me",CDN:"https://cdn.surmon.me",PROXY:"https://cdn.surmon.me/_proxy",STATIC:"https://static.surmon.me",NODEPRESS:isDev?DEV_API:PROD_API},LONG_ARTICLE_THRESHOLD=16688,META=Object.freeze({title:"Surmon.me",zh_sub_title:"\u6765\u82CF\u4E4B\u671B",en_sub_title:"Come into the wild",zh_biography:"\u672C\u662F\u6D6A\u8776\u6E38\u8702\uFF0C\u81EA\u7559\u534A\u4EA9\u77F3\u6C60\uFF0C\u4F46\u6C42\u76F4\u6292\u80F8\u81C6\uFF0C\u6325\u58A8\u4E5D\u4E91\u4E4B\u4E2D",en_biography:"Either write something worth reading or do something worth writing.",url:"https://surmon.me",domain:"surmon.me",author:"Surmon",primary:"#0088f5"}),GEO_INFO=Object.freeze({zh_title:"\u5C45\u4E1C\u534A\u7403\uFF0C\u9760\u8FD1\u8D64\u9053",en_title:"UTC +08:00",coordinates:[103.830391822121,1.340863]}),MAPBOX_CONFIG=Object.freeze({TOKEN:"pk.eyJ1Ijoic3VybW9uIiwiYSI6ImNsNDE4YmkzNjB2Z2wzY3F5dWg2M2tqeWIifQ.JhgYGFI4zsuNiX9dH-pBDg",STYLE_LIGHT:"mapbox://styles/surmon/cl41fktzn000f14pet94oo1u4",STYLE_DARK:"mapbox://styles/surmon/cl41gy1qo000l15ry20j5ae0k",ZOOM:11.337439,CENTER:[121.4930539351185,31.227570979004497]}),IDENTITIES=Object.freeze({GOOGLE_ANALYTICS_TRACKING_ID:"UA-84887611-3",GOOGLE_ADSENSE_PUBLISHER_ID:"ca-pub-4710915636313788",YOUTUBE_CHANNEL_ID:"UCoL-j6T28PLSJ2U6ZdONS0w",MUSIC_163_BGM_ALBUM_ID:"638949385",DOUBAN_USER_ID:"56647958",GITHUB_USER_NAME:"surmon-china",TWITTER_USER_NAME:"surmon7788",INSTAGRAM_USERNAME:"surmon666",INSTAGRAM_FB_ID:"17841405600281893",BTC_ADDRESS:"bc1qhpdu03tnexkj4xsm3lqzyjdddz6z0rj2n7fsze",ETH_ADDRESS:"0xaD556974D449126efdeF23f4FF581861C301cB77",OPENSEA_ETH:"0xaD556974D449126efdeF23f4FF581861C301cB77"}),VALUABLE_LINKS=Object.freeze({RSS:"/rss.xml",SITE_MAP:"/sitemap.xml",UPTIME_STATUS:"https://stats.uptimerobot.com/Q2k7OTXxJN",NPM_HOMEPAGE:"https://www.npmjs.com/~surmon",PAYPAL:"https://paypal.me/surmon",GITHUB_SPONSORS:`https://github.com/sponsors/${IDENTITIES.GITHUB_USER_NAME}`,GITHUB:`https://github.com/${IDENTITIES.GITHUB_USER_NAME}`,GITHUB_SURMON_ME:"https://github.com/surmon-china/surmon.me",GITHUB_NODEPRESS:"https://github.com/surmon-china/nodepress",GITHUB_SURMON_ME_NATIVE:"https://github.com/surmon-china/surmon.me.native",GITHUB_BLOG_STAR_LIST:"https://github.com/stars/surmon-china/lists/surmon-me",APP_APK_FILE:"https://raw.githubusercontent.com/surmon-china/surmon.me.native/master/dist/android/surmon.me.apk",MARKDOWN:"https://daringfireball.net/projects/markdown/",GOOGLE_MY_MAP:"https://www.google.com/maps/d/embed?mid=1sRx6t0Yj1TutbwORCvjwTMgr70r62Z6w&z=3",GOOGLE_MY_MAP_KML:"https://www.google.com/maps/d/u/0/kml?forcekml=1&mid=1sRx6t0Yj1TutbwORCvjwTMgr70r62Z6w",DISCORD_GROUP:"https://discord.surmon.me",TELEGRAM_GROUP:"https://t.me/+Z2wsxogVbYM2ZmE1",MUSIC_163:`https://music.163.com/#/playlist?id=${IDENTITIES.MUSIC_163_BGM_ALBUM_ID}`,YOUTUBE_CHANNEL:`https://www.youtube.com/channel/${IDENTITIES.YOUTUBE_CHANNEL_ID}`,TELEGRAM:"https://t.me/surmon",OPENSEA:"https://opensea.io/Surmon",DOUBAN:"https://www.douban.com/people/nocower",DOUBAN_MOVIE:`https://m.douban.com/people/${IDENTITIES.DOUBAN_USER_ID}/movie_charts`,QUORA:"https://www.quora.com/profile/Surmon",LINKEDIN:"https://www.linkedin.com/in/surmon",INSTAGRAM:`https://www.instagram.com/${IDENTITIES.INSTAGRAM_USERNAME}`,TWITTER:`https://twitter.com/${IDENTITIES.TWITTER_USER_NAME}`});var LanguageKey=(e=>(e.APP_SLOGAN="app-slogan",e.CATEGORY_INSIGHT="insight",e.CATEGORY_CODE="code",e.PAGE_HOME="home",e.PAGE_GITHUB="github",e.PAGE_NFT="nft",e.PAGE_LENS="lens",e.PAGE_ABOUT="about",e.PAGE_SPONSOR="sponsor",e.PAGE_GUESTBOOK="guestbook",e.PAGE_APP="app",e.PAGE_ARCHIVE="archive",e.STATISTIC_ARTICLES="statistic-articles",e.STATISTIC_COMMENTS="statistic-comments",e.STATISTIC_TAGS="statistic-tags",e.STATISTIC_TODAY_VIEWS="statistic-today-views",e.STATISTIC_TOTAL_VIEWS="statistic-total-views",e.STATISTIC_TOTAL_UPVOTES="statistic-total-upvotes",e.STATISTIC_AVERAGE_EMOTION="statistic-average-emotion",e.EMPTY_PLACEHOLDER="common-empty-placeholder",e.NOT_FOUND="not-found",e.BACK_TO_HOME_PAGE="back-to-home-page",e.GUESTBOOK_SLOGAN="guestbook-banner-slogan",e.AD="ad",e.BARRAGE="barrage",e.FEEDBACK="feedback",e.TO_TOP="to-page-top",e.TO_BOTTOM="to-page-bottom",e.ORIGIN_ORIGINAL="original",e.ORIGIN_REPRINT="reprint",e.ORIGIN_HYBRID="hybrid",e.ACTION_ON="on",e.ACTION_OFF="off",e.MUSIC_PLACEHOLDER="music-placeholder",e.SEARCH_PLACEHOLDER="search-input-placeholder",e.HOT_ARTICLE_LIST_TITLE="hot-article-list-title",e.ANNOUNCEMENT_PLACEHOLDER="announcement-empty-placeholder",e.CATEGORY_UNCATEGORIZED="category-uncategorized",e.TAG_PLACEHOLDER="tag-placeholder",e.ARTICLE_TITLE="article-title",e.ARTICLE_VIEWS="article-views",e.ARTICLE_PLACEHOLDER="article-empty-placeholder",e.ARTICLE_READ_ALL="read-all-article-content",e.ARTICLE_RENDERING="rendering",e.ARTICLE_LIST_LOADMORE="loadmore",e.ARTICLE_LIST_LOADING="loading",e.ARTICLE_LIST_NO_MORE="no-more",e.COMMENT_LIST_EMPTY="comment-list-placeholder",e.COMMENT_UPVOTE="comment-likes",e.COMMENT_DOWNVOTE="comment-dislikes",e.COMMENT_REPLY="reply-comment",e.COMMENT_DELETE="delete-comment",e.COMMENT_DELETE_CONFIRM="delete-comment-confirm",e.COMMENT_REPLY_CANCEL="cancel-reply-comment",e.COMMENT_MODERATOR="comment-moderator",e.COMMENT_SORT_OLD="oldest-comments",e.COMMENT_SORT_NEW="newest-comments",e.COMMENT_SORT_HOT="hottest-comments",e.COMMENT_POST_NAME="comment-author-name",e.COMMENT_POST_EMAIL="comment-author-email",e.COMMENT_POST_SITE="comment-author-site-url",e.COMMENT_POST_CONTENT="comment-content",e.COMMENT_POST_PLACEHOLDER="comment-box-placeholder",e.COMMENT_POST_ERROR_CONTENT="comment-submit-failed-of-content-error",e.QUERY_PARAMS_ERROR="query-params-error",e.POST_ACTION_ERROR="post-requiest-failed-of-other-error",e.SUBMIT="submit-data",e.SUBMITTING="submitting",e.MOMENT_AM="moment-am",e.MOMENT_PM="moment-pm",e.MOMENT_JUST_NOW="moment-just-now",e.MOMENT_MINUTES="moment-minutes",e.MOMENT_HOURS="moment-hours",e.MOMENT_WEEKS="moment-weeks",e.MOMENT_DAYS="moment-days",e.MOMENT_MONTHS="moment-months",e.MOMENT_YEAR="moment-year",e.MOMENT_AGO="moment-ago",e))(LanguageKey||{});const zhLangMap={[LanguageKey.APP_SLOGAN]:META.zh_sub_title,[LanguageKey.PAGE_HOME]:"\u660E\u6BBF",[LanguageKey.CATEGORY_INSIGHT]:"\u65E0\u8272\u5EB5",[LanguageKey.CATEGORY_CODE]:"\u5B81\u9759\u5BFA",[LanguageKey.PAGE_GITHUB]:"\u4E39\u9752\u9601",[LanguageKey.PAGE_ARCHIVE]:"\u4E07\u8C61\u6BBF",[LanguageKey.PAGE_GUESTBOOK]:"\u56DB\u65B9\u9986",[LanguageKey.PAGE_ABOUT]:"\u72C2\u6D6A\u751F",[LanguageKey.PAGE_SPONSOR]:"\u8D5E\u52A9",[LanguageKey.PAGE_APP]:"\u5BA2\u6237\u7AEF",[LanguageKey.PAGE_LENS]:"\u832B\u6DAF",[LanguageKey.PAGE_NFT]:"\u85CF\u54C1",[LanguageKey.STATISTIC_ARTICLES]:"\u5168\u7AD9\u6587\u7AE0",[LanguageKey.STATISTIC_COMMENTS]:"\u5168\u7AD9\u8BC4\u8BBA",[LanguageKey.STATISTIC_TAGS]:"\u5168\u7AD9\u6807\u7B7E",[LanguageKey.STATISTIC_TODAY_VIEWS]:"\u4ECA\u65E5\u9605\u8BFB",[LanguageKey.STATISTIC_TOTAL_VIEWS]:"\u7D2F\u8BA1\u9605\u8BFB",[LanguageKey.STATISTIC_TOTAL_UPVOTES]:"\u5171\u83B7\u70B9\u8D5E",[LanguageKey.STATISTIC_AVERAGE_EMOTION]:"\u533F\u540D\u8BC4\u5206",[LanguageKey.EMPTY_PLACEHOLDER]:"\u7A7A\u7A7A\u5982\u4E5F",[LanguageKey.NOT_FOUND]:"\u4F17\u91CC\u5BFB\u4ED6 \u6211\u5DF2\u4E0D\u518D",[LanguageKey.BACK_TO_HOME_PAGE]:"\u5C71\u6CB3\u4E07\u91CC \u957F\u6B4C\u5F52\u6545",[LanguageKey.GUESTBOOK_SLOGAN]:"\u6B64\u5FC3\u5149\u660E \u4EA6\u590D\u4F55\u8A00",[LanguageKey.AD]:"\u5E7F\u800C\u544A\u4E4B",[LanguageKey.BARRAGE]:"\u7545\u8A00",[LanguageKey.FEEDBACK]:"\u53CD\u9988",[LanguageKey.TO_TOP]:"\u56DE\u5230\u9876\u90E8",[LanguageKey.TO_BOTTOM]:"\u4E0B\u4E00\u5C4F",[LanguageKey.ORIGIN_ORIGINAL]:"\u539F\u521B",[LanguageKey.ORIGIN_REPRINT]:"\u8F6C\u8F7D",[LanguageKey.ORIGIN_HYBRID]:"\u884D\u751F",[LanguageKey.ACTION_ON]:"\u5F00",[LanguageKey.ACTION_OFF]:"\u5173",[LanguageKey.MUSIC_PLACEHOLDER]:"\u4E94\u97F3\u516D\u5F8B\uFF0C\u4E03\u5F26\u516B\u5EA6",[LanguageKey.SEARCH_PLACEHOLDER]:"\u4E0A\u4E0B\u6C42\u7D22",[LanguageKey.ANNOUNCEMENT_PLACEHOLDER]:"\u7A7A\u7A7A\u5982\u4E5F",[LanguageKey.CATEGORY_UNCATEGORIZED]:"\u672A\u5206\u7C7B",[LanguageKey.TAG_PLACEHOLDER]:"\u65E0\u6807\u7B7E",[LanguageKey.ARTICLE_TITLE]:"\u6587\u4E0D\u52A0\u70B9",[LanguageKey.ARTICLE_VIEWS]:"\u6B21\u9605\u8BFB",[LanguageKey.ARTICLE_PLACEHOLDER]:"\u7A7A\u7A7A\u5982\u4E5F",[LanguageKey.ARTICLE_READ_ALL]:"\u9605\u8BFB\u4F59\u4E0B\u5168\u6587",[LanguageKey.ARTICLE_RENDERING]:"\u6E32\u67D3\u4E2D..",[LanguageKey.HOT_ARTICLE_LIST_TITLE]:"\u7FA4\u8D24\u6BD5\u81F3",[LanguageKey.ARTICLE_LIST_LOADMORE]:"\u52A0\u8F7D\u66F4\u591A",[LanguageKey.ARTICLE_LIST_LOADING]:"\u6B63\u5728\u52A0\u8F7D",[LanguageKey.ARTICLE_LIST_NO_MORE]:"\u6CA1\u6709\u66F4\u591A",[LanguageKey.COMMENT_LIST_EMPTY]:"\u671F\u5F85\u4F60\u7684\u6377\u8DB3\u5148\u767B",[LanguageKey.COMMENT_UPVOTE]:"\u8D5E",[LanguageKey.COMMENT_DOWNVOTE]:"\u8E29",[LanguageKey.COMMENT_DELETE]:"\u5220\u9664",[LanguageKey.COMMENT_DELETE_CONFIRM]:"\u786E\u5B9A\u8981\u5220\u9664\u6B64\u8BC4\u8BBA\u5417\uFF1F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u6062\u590D",[LanguageKey.COMMENT_REPLY]:"\u56DE\u590D",[LanguageKey.COMMENT_REPLY_CANCEL]:"\u53D6\u6D88\u56DE\u590D",[LanguageKey.COMMENT_MODERATOR]:"\u535A\u4E3B",[LanguageKey.COMMENT_SORT_OLD]:"\u6700\u65E9",[LanguageKey.COMMENT_SORT_NEW]:"\u6700\u65B0",[LanguageKey.COMMENT_SORT_HOT]:"\u6700\u70ED",[LanguageKey.COMMENT_POST_NAME]:"\u540D\u5B57",[LanguageKey.COMMENT_POST_EMAIL]:"\u90AE\u7BB1",[LanguageKey.COMMENT_POST_SITE]:"\u7F51\u5740",[LanguageKey.COMMENT_POST_CONTENT]:"\u5185\u5BB9",[LanguageKey.COMMENT_POST_PLACEHOLDER]:"\u613F\u4F60\u7684\u89C1\u89E3\u4E00\u9488\u89C1\u8840",[LanguageKey.COMMENT_POST_ERROR_CONTENT]:"\u5185\u5BB9\u9700\u8981\u5728 3000 \u5B57\u4EE5\u5185",[LanguageKey.QUERY_PARAMS_ERROR]:"\u8BF7\u6C42\u53C2\u6570\u9519\u8BEF\uFF1A",[LanguageKey.POST_ACTION_ERROR]:"\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BE6\u7EC6\u539F\u56E0 > \u63A7\u5236\u53F0",[LanguageKey.SUBMIT]:"\u63D0\u4EA4",[LanguageKey.SUBMITTING]:"\u63D0\u4EA4\u4E2D...",[LanguageKey.MOMENT_AM]:"\u4E0A\u5348",[LanguageKey.MOMENT_PM]:"\u4E0B\u5348",[LanguageKey.MOMENT_JUST_NOW]:"\u521A\u521A",[LanguageKey.MOMENT_MINUTES]:"\u5206\u949F",[LanguageKey.MOMENT_HOURS]:"\u5C0F\u65F6",[LanguageKey.MOMENT_WEEKS]:"\u5468",[LanguageKey.MOMENT_DAYS]:"\u5929",[LanguageKey.MOMENT_MONTHS]:"\u4E2A\u6708",[LanguageKey.MOMENT_YEAR]:"\u5E74",[LanguageKey.MOMENT_AGO]:e=>`${e.date}\u524D`},enLangMap={[LanguageKey.APP_SLOGAN]:META.en_sub_title,[LanguageKey.PAGE_HOME]:"Home",[LanguageKey.CATEGORY_INSIGHT]:"Insight",[LanguageKey.CATEGORY_CODE]:"Code",[LanguageKey.PAGE_ARCHIVE]:"Archive",[LanguageKey.PAGE_GITHUB]:"GitHub",[LanguageKey.PAGE_ABOUT]:"About",[LanguageKey.PAGE_GUESTBOOK]:"Guestbook",[LanguageKey.PAGE_SPONSOR]:"Sponsor",[LanguageKey.PAGE_APP]:"APP",[LanguageKey.PAGE_LENS]:"Lens",[LanguageKey.PAGE_NFT]:"NFTs",[LanguageKey.STATISTIC_ARTICLES]:"Articles",[LanguageKey.STATISTIC_COMMENTS]:"Comments",[LanguageKey.STATISTIC_TAGS]:"Tags",[LanguageKey.STATISTIC_TODAY_VIEWS]:"Today views",[LanguageKey.STATISTIC_TOTAL_VIEWS]:"Total views",[LanguageKey.STATISTIC_TOTAL_UPVOTES]:"Total upvotes",[LanguageKey.STATISTIC_AVERAGE_EMOTION]:"Rating",[LanguageKey.EMPTY_PLACEHOLDER]:"Null",[LanguageKey.NOT_FOUND]:"Arrives here at last",[LanguageKey.BACK_TO_HOME_PAGE]:"Drive by",[LanguageKey.GUESTBOOK_SLOGAN]:"You have come a long way",[LanguageKey.AD]:"AD",[LanguageKey.BARRAGE]:"Barrage",[LanguageKey.FEEDBACK]:"Feedback",[LanguageKey.TO_TOP]:"To top",[LanguageKey.TO_BOTTOM]:"Next screen",[LanguageKey.ORIGIN_ORIGINAL]:"OG",[LanguageKey.ORIGIN_REPRINT]:"RPT",[LanguageKey.ORIGIN_HYBRID]:"HY",[LanguageKey.ACTION_ON]:"on",[LanguageKey.ACTION_OFF]:"off",[LanguageKey.MUSIC_PLACEHOLDER]:"The music, the soul of man",[LanguageKey.SEARCH_PLACEHOLDER]:"Search...",[LanguageKey.CATEGORY_UNCATEGORIZED]:"Uncategorized",[LanguageKey.ANNOUNCEMENT_PLACEHOLDER]:"No announcements",[LanguageKey.TAG_PLACEHOLDER]:"No tags",[LanguageKey.HOT_ARTICLE_LIST_TITLE]:"Hottest",[LanguageKey.ARTICLE_PLACEHOLDER]:"No articles",[LanguageKey.ARTICLE_TITLE]:"Articles",[LanguageKey.ARTICLE_VIEWS]:"views",[LanguageKey.ARTICLE_READ_ALL]:"Show Full Article",[LanguageKey.ARTICLE_RENDERING]:"Rendering...",[LanguageKey.ARTICLE_LIST_LOADMORE]:"Loadmore",[LanguageKey.ARTICLE_LIST_LOADING]:"Loading...",[LanguageKey.ARTICLE_LIST_NO_MORE]:"No more",[LanguageKey.COMMENT_LIST_EMPTY]:"Be the first to comment",[LanguageKey.COMMENT_UPVOTE]:"upvote",[LanguageKey.COMMENT_DOWNVOTE]:"downvote",[LanguageKey.COMMENT_DELETE]:"delete",[LanguageKey.COMMENT_DELETE_CONFIRM]:"Are you sure you want to delete this comment? You cannot undo this action.",[LanguageKey.COMMENT_REPLY]:"reply",[LanguageKey.COMMENT_REPLY_CANCEL]:"cancel reply",[LanguageKey.COMMENT_MODERATOR]:"Moderator",[LanguageKey.COMMENT_SORT_OLD]:"Oldest",[LanguageKey.COMMENT_SORT_NEW]:"Newest",[LanguageKey.COMMENT_SORT_HOT]:"Hottest",[LanguageKey.COMMENT_POST_NAME]:"name",[LanguageKey.COMMENT_POST_EMAIL]:"email",[LanguageKey.COMMENT_POST_SITE]:"site",[LanguageKey.COMMENT_POST_CONTENT]:"content",[LanguageKey.COMMENT_POST_PLACEHOLDER]:"Hit the nail on the head",[LanguageKey.COMMENT_POST_ERROR_CONTENT]:"Content requirements are within 3000 words!",[LanguageKey.QUERY_PARAMS_ERROR]:"Invalid query params: ",[LanguageKey.POST_ACTION_ERROR]:"Failed! Get error detail in console",[LanguageKey.SUBMIT]:"Submit",[LanguageKey.SUBMITTING]:"Submitting...",[LanguageKey.MOMENT_AM]:"AM",[LanguageKey.MOMENT_PM]:"PM",[LanguageKey.MOMENT_JUST_NOW]:"Just now",[LanguageKey.MOMENT_MINUTES]:"minutes",[LanguageKey.MOMENT_HOURS]:"hours",[LanguageKey.MOMENT_WEEKS]:"weeks",[LanguageKey.MOMENT_DAYS]:"days",[LanguageKey.MOMENT_MONTHS]:"months",[LanguageKey.MOMENT_YEAR]:"year",[LanguageKey.MOMENT_AGO]:e=>`${e.date} ago`};var Language=(e=>(e.English="en",e.Chinese="zh",e))(Language||{});const languages$1=[{code:"zh",iso:"zh-CN",name:"\u7B80\u4F53\u4E2D\u6587",data:zhLangMap},{code:"en",iso:"en-US",name:"English",data:enLangMap}],setRefData=(e,t)=>{setSSRContext("refs",{...getSSRContext("refs"),[e]:t})},getValue=e=>e instanceof Function?e():e,isProxyable=e=>Boolean(e)&&typeof e=="object",universalRef=(e,t)=>{if(isSPA)return ref(getValue(t));let n=getValue(t);t instanceof Function&&setRefData(e,n);const r=(c,d,g)=>new Proxy(g,{get(o,v){if(c(),isProxyable(o[v]))return r(c,d,o[v]);const x=Reflect.get(o,v);return typeof x=="function"?x.bind(o):x},set(o,v,x){const E=Reflect.set(o,v,x);return setRefData(e,n),d(),E}});return customRef((c,d)=>({get:()=>(c(),isProxyable(n)?r(c,d,n):n),set:g=>{setRefData(e,g),n=g,d()}}))},BAD_REQUEST=400,NOT_FOUND=404,INVALID_ERROR=500;var uaParser$1={exports:{}};(function(e,t){(function(n,r){var c="1.0.33",d="",g="?",o="function",v="undefined",x="object",E="string",k="major",S="model",N="name",L="type",P="vendor",O="version",V="architecture",z="console",U="mobile",W="tablet",Z="smarttv",re="wearable",oe="embedded",se=350,ce="Amazon",me="Apple",we="ASUS",ae="BlackBerry",Ce="Browser",Fe="Chrome",it="Edge",_e="Firefox",ke="Google",ze="Huawei",nt="LG",mt="Microsoft",qt="Motorola",un="Opera",fn="Samsung",vn="Sharp",at="Sony",Ot="Xiaomi",bt="Zebra",jt="Facebook",gn=function(Et,$t){var Je={};for(var ut in Et)$t[ut]&&$t[ut].length%2===0?Je[ut]=$t[ut].concat(Et[ut]):Je[ut]=Et[ut];return Je},dn=function(Et){for(var $t={},Je=0;Je<Et.length;Je++)$t[Et[Je].toUpperCase()]=Et[Je];return $t},hn=function(Et,$t){return typeof Et===E?Ht($t).indexOf(Ht(Et))!==-1:!1},Ht=function(Et){return Et.toLowerCase()},Ee=function(Et){return typeof Et===E?Et.replace(/[^\d\.]/g,d).split(".")[0]:r},Ne=function(Et,$t){if(typeof Et===E)return Et=Et.replace(/^\s\s*/,d),typeof $t===v?Et:Et.substring(0,se)},et=function(Et,$t){for(var Je=0,ut,pt,Xt,Kt,yn,Gn;Je<$t.length&&!yn;){var gi=$t[Je],Ii=$t[Je+1];for(ut=pt=0;ut<gi.length&&!yn;)if(yn=gi[ut++].exec(Et),yn)for(Xt=0;Xt<Ii.length;Xt++)Gn=yn[++pt],Kt=Ii[Xt],typeof Kt===x&&Kt.length>0?Kt.length===2?typeof Kt[1]==o?this[Kt[0]]=Kt[1].call(this,Gn):this[Kt[0]]=Kt[1]:Kt.length===3?typeof Kt[1]===o&&!(Kt[1].exec&&Kt[1].test)?this[Kt[0]]=Gn?Kt[1].call(this,Gn,Kt[2]):r:this[Kt[0]]=Gn?Gn.replace(Kt[1],Kt[2]):r:Kt.length===4&&(this[Kt[0]]=Gn?Kt[3].call(this,Gn.replace(Kt[1],Kt[2])):r):this[Kt]=Gn||r;Je+=2}},xt=function(Et,$t){for(var Je in $t)if(typeof $t[Je]===x&&$t[Je].length>0){for(var ut=0;ut<$t[Je].length;ut++)if(hn($t[Je][ut],Et))return Je===g?r:Je}else if(hn($t[Je],Et))return Je===g?r:Je;return Et},Ke={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Rt={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},gt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[O,[N,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[O,[N,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[N,O],[/opios[\/ ]+([\w\.]+)/i],[O,[N,un+" Mini"]],[/\bopr\/([\w\.]+)/i],[O,[N,un]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[N,O],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[O,[N,"UC"+Ce]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[O,[N,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[O,[N,"WeChat"]],[/konqueror\/([\w\.]+)/i],[O,[N,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[O,[N,"IE"]],[/yabrowser\/([\w\.]+)/i],[O,[N,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[N,/(.+)/,"$1 Secure "+Ce],O],[/\bfocus\/([\w\.]+)/i],[O,[N,_e+" Focus"]],[/\bopt\/([\w\.]+)/i],[O,[N,un+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[O,[N,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[O,[N,"Dolphin"]],[/coast\/([\w\.]+)/i],[O,[N,un+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[O,[N,"MIUI "+Ce]],[/fxios\/([-\w\.]+)/i],[O,[N,_e]],[/\bqihu|(qi?ho?o?|360)browser/i],[[N,"360 "+Ce]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[N,/(.+)/,"$1 "+Ce],O],[/(comodo_dragon)\/([\w\.]+)/i],[[N,/_/g," "],O],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[N,O],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[N],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[N,jt],O],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[N,O],[/\bgsa\/([\w\.]+) .*safari\//i],[O,[N,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[O,[N,Fe+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[N,Fe+" WebView"],O],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[O,[N,"Android "+Ce]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[N,O],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[O,[N,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[O,N],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[N,[O,xt,Ke]],[/(webkit|khtml)\/([\w\.]+)/i],[N,O],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[N,"Netscape"],O],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[O,[N,_e+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[N,O],[/(cobalt)\/([\w\.]+)/i],[N,[O,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[V,"amd64"]],[/(ia32(?=;))/i],[[V,Ht]],[/((?:i[346]|x)86)[;\)]/i],[[V,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[V,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[V,"armhf"]],[/windows (ce|mobile); ppc;/i],[[V,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[V,/ower/,d,Ht]],[/(sun4\w)[;\)]/i],[[V,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[V,Ht]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[S,[P,fn],[L,W]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[S,[P,fn],[L,U]],[/\((ip(?:hone|od)[\w ]*);/i],[S,[P,me],[L,U]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[S,[P,me],[L,W]],[/(macintosh);/i],[S,[P,me]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[S,[P,ze],[L,W]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[S,[P,ze],[L,U]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[S,/_/g," "],[P,Ot],[L,U]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[S,/_/g," "],[P,Ot],[L,W]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[S,[P,"OPPO"],[L,U]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[S,[P,"Vivo"],[L,U]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[S,[P,"Realme"],[L,U]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[S,[P,qt],[L,U]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[S,[P,qt],[L,W]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[S,[P,nt],[L,W]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[S,[P,nt],[L,U]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[S,[P,"Lenovo"],[L,W]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[S,/_/g," "],[P,"Nokia"],[L,U]],[/(pixel c)\b/i],[S,[P,ke],[L,W]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[S,[P,ke],[L,U]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[S,[P,at],[L,U]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[S,"Xperia Tablet"],[P,at],[L,W]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[S,[P,"OnePlus"],[L,U]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[S,[P,ce],[L,W]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[S,/(.+)/g,"Fire Phone $1"],[P,ce],[L,U]],[/(playbook);[-\w\),; ]+(rim)/i],[S,P,[L,W]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[S,[P,ae],[L,U]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[S,[P,we],[L,W]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[S,[P,we],[L,U]],[/(nexus 9)/i],[S,[P,"HTC"],[L,W]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[P,[S,/_/g," "],[L,U]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[S,[P,"Acer"],[L,W]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[S,[P,"Meizu"],[L,U]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[S,[P,vn],[L,U]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[P,S,[L,U]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[P,S,[L,W]],[/(surface duo)/i],[S,[P,mt],[L,W]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[S,[P,"Fairphone"],[L,U]],[/(u304aa)/i],[S,[P,"AT&T"],[L,U]],[/\bsie-(\w*)/i],[S,[P,"Siemens"],[L,U]],[/\b(rct\w+) b/i],[S,[P,"RCA"],[L,W]],[/\b(venue[\d ]{2,7}) b/i],[S,[P,"Dell"],[L,W]],[/\b(q(?:mv|ta)\w+) b/i],[S,[P,"Verizon"],[L,W]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[S,[P,"Barnes & Noble"],[L,W]],[/\b(tm\d{3}\w+) b/i],[S,[P,"NuVision"],[L,W]],[/\b(k88) b/i],[S,[P,"ZTE"],[L,W]],[/\b(nx\d{3}j) b/i],[S,[P,"ZTE"],[L,U]],[/\b(gen\d{3}) b.+49h/i],[S,[P,"Swiss"],[L,U]],[/\b(zur\d{3}) b/i],[S,[P,"Swiss"],[L,W]],[/\b((zeki)?tb.*\b) b/i],[S,[P,"Zeki"],[L,W]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[P,"Dragon Touch"],S,[L,W]],[/\b(ns-?\w{0,9}) b/i],[S,[P,"Insignia"],[L,W]],[/\b((nxa|next)-?\w{0,9}) b/i],[S,[P,"NextBook"],[L,W]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[P,"Voice"],S,[L,U]],[/\b(lvtel\-)?(v1[12]) b/i],[[P,"LvTel"],S,[L,U]],[/\b(ph-1) /i],[S,[P,"Essential"],[L,U]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[S,[P,"Envizen"],[L,W]],[/\b(trio[-\w\. ]+) b/i],[S,[P,"MachSpeed"],[L,W]],[/\btu_(1491) b/i],[S,[P,"Rotor"],[L,W]],[/(shield[\w ]+) b/i],[S,[P,"Nvidia"],[L,W]],[/(sprint) (\w+)/i],[P,S,[L,U]],[/(kin\.[onetw]{3})/i],[[S,/\./g," "],[P,mt],[L,U]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[S,[P,bt],[L,W]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[S,[P,bt],[L,U]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[P,S,[L,z]],[/droid.+; (shield) bui/i],[S,[P,"Nvidia"],[L,z]],[/(playstation [345portablevi]+)/i],[S,[P,at],[L,z]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[S,[P,mt],[L,z]],[/smart-tv.+(samsung)/i],[P,[L,Z]],[/hbbtv.+maple;(\d+)/i],[[S,/^/,"SmartTV"],[P,fn],[L,Z]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[P,nt],[L,Z]],[/(apple) ?tv/i],[P,[S,me+" TV"],[L,Z]],[/crkey/i],[[S,Fe+"cast"],[P,ke],[L,Z]],[/droid.+aft(\w)( bui|\))/i],[S,[P,ce],[L,Z]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[S,[P,vn],[L,Z]],[/(bravia[\w ]+)( bui|\))/i],[S,[P,at],[L,Z]],[/(mitv-\w{5}) bui/i],[S,[P,Ot],[L,Z]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[P,Ne],[S,Ne],[L,Z]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[L,Z]],[/((pebble))app/i],[P,S,[L,re]],[/droid.+; (glass) \d/i],[S,[P,ke],[L,re]],[/droid.+; (wt63?0{2,3})\)/i],[S,[P,bt],[L,re]],[/(quest( 2)?)/i],[S,[P,jt],[L,re]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[P,[L,oe]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[S,[L,U]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[S,[L,W]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[L,W]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[L,U]],[/(android[-\w\. ]{0,9});.+buil/i],[S,[P,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[O,[N,it+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[O,[N,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[N,O],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[O,N]],os:[[/microsoft (windows) (vista|xp)/i],[N,O],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[N,[O,xt,Rt]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[N,"Windows"],[O,xt,Rt]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[O,/_/g,"."],[N,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[N,"Mac OS"],[O,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[O,N],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[N,O],[/\(bb(10);/i],[O,[N,ae]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[O,[N,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[O,[N,_e+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[O,[N,"webOS"]],[/crkey\/([\d\.]+)/i],[O,[N,Fe+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[N,"Chromium OS"],O],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[N,O],[/(sunos) ?([\w\.\d]*)/i],[[N,"Solaris"],O],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[N,O]]},tt=function(Et,$t){if(typeof Et===x&&($t=Et,Et=r),!(this instanceof tt))return new tt(Et,$t).getResult();var Je=Et||(typeof n!==v&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:d),ut=$t?gn(gt,$t):gt;return this.getBrowser=function(){var pt={};return pt[N]=r,pt[O]=r,et.call(pt,Je,ut.browser),pt.major=Ee(pt.version),pt},this.getCPU=function(){var pt={};return pt[V]=r,et.call(pt,Je,ut.cpu),pt},this.getDevice=function(){var pt={};return pt[P]=r,pt[S]=r,pt[L]=r,et.call(pt,Je,ut.device),pt},this.getEngine=function(){var pt={};return pt[N]=r,pt[O]=r,et.call(pt,Je,ut.engine),pt},this.getOS=function(){var pt={};return pt[N]=r,pt[O]=r,et.call(pt,Je,ut.os),pt},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Je},this.setUA=function(pt){return Je=typeof pt===E&&pt.length>se?Ne(pt,se):pt,this},this.setUA(Je),this};tt.VERSION=c,tt.BROWSER=dn([N,O,k]),tt.CPU=dn([V]),tt.DEVICE=dn([S,P,L,z,U,Z,W,re,oe]),tt.ENGINE=tt.OS=dn([N,O]),e.exports&&(t=e.exports=tt),t.UAParser=tt;var kt=typeof n!==v&&(n.jQuery||n.Zepto);if(kt&&!kt.ua){var dt=new tt;kt.ua=dt.getResult(),kt.ua.get=function(){return dt.getUA()},kt.ua.set=function(Et){dt.setUA(Et);var $t=dt.getResult();for(var Je in $t)kt.ua[Je]=$t[Je]}}})(typeof window=="object"?window:commonjsGlobal)})(uaParser$1,uaParser$1.exports);const parser$1=uaParser$1.exports,uaParser=e=>{const t=parser$1(e||""),n=String(t.browser.name).toLowerCase(),r=c=>c.some(d=>d.toLowerCase()===n);return{result:t,isIE:r(["compatible","MSIE","IE"]),isEdge:r(["Edge"]),isFirefox:r(["Firefox"]),isChrome:r(["Chrome","Chromium"]),isSafari:r(["Safari"]),isWechat:r(["Wechat"]),isIos:t.os.name==="iOS",isAndroid:t.os.name==="Android",isMobile:t.device.type==="mobile"}},isTargetLanguageUser=(e,t)=>typeof e=="string"?e.includes(t):Array.isArray(e)?e.some(n=>n.includes(t)):!1,isZhUser=e=>e?isTargetLanguageUser(e,Language.Chinese):!0;var LayoutColumn=(e=>(e[e.Normal=0]="Normal",e[e.Wide=1]="Wide",e[e.Full=2]="Full",e))(LayoutColumn||{});const GlobalStateSymbol=Symbol("globalState"),createGlobalState=e=>{const t=universalRef("error",()=>null),n={code:INVALID_ERROR},r=P=>{var O;P?P instanceof Error?t.value={code:(O=P.code)!=null?O:n.code,message:P.message}:typeof P=="string"?t.value={...n,message:P}:t.value={...P,code:P.status||P.status||n.code}:t.value=null},c=ref(!1),d=()=>{c.value=!0},g=reactive({original:e.userAgent,language:e.language,isZhUser:isZhUser(e.language),...uaParser(e.userAgent)}),o=ref(e.layout),v=computed(()=>({layout:o.value,isNormal:o.value===0,isWide:o.value===1,isFull:o.value===2})),x=P=>{P!==o.value&&(o.value=P)},E=computed(()=>{const P=g.isMobile||g.isWechat||g.isSafari?"jpeg":"webp";return{ext:P,isJpg:P==="jpeg",isWebP:P==="webp"}}),k=reactive({sponsor:!1,feedback:!1,statement:!1}),S=(P,O)=>{k[P]=O},L={toRawState:()=>({renderError:t.value,userAgent:g.original,language:g.language,layout:o.value}),renderError:readonly(t),setRenderError:r,isHydrated:readonly(c),setHydrate:d,layoutColumn:v,setLayoutColumn:x,userAgent:readonly(g),imageExt:E,switcher:readonly(k),toggleSwitcher:S};return{...L,install(P){P.provide(GlobalStateSymbol,L)}}},useGlobalState=()=>inject(GlobalStateSymbol),useUniversalFetch=e=>{const t=useGlobalState(),n=()=>{onBeforeMount(()=>e())};if(isSPA){n();return}{onServerPrefetch(()=>e().catch(r=>(t.setRenderError(r),Promise.reject(r))));return}};var pinia_prod={},lib$2={};const require$$0$1=getAugmentedNamespace(vue_runtime_esmBundler);(function(e){var t=require$$0$1;Object.keys(t).forEach(function(n){e[n]=t[n]}),e.set=function(n,r,c){return Array.isArray(n)?(n.length=Math.max(n.length,r),n.splice(r,1,c),c):(n[r]=c,c)},e.del=function(n,r){if(Array.isArray(n)){n.splice(r,1);return}delete n[r]},e.Vue=t,e.Vue2=void 0,e.isVue2=!1,e.isVue3=!0,e.install=function(){}})(lib$2);/*!
  * pinia v2.0.28
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=lib$2;let n;const r=_e=>n=_e,c=()=>t.getCurrentInstance()&&t.inject(d)||n,d=Symbol();function g(_e){return _e&&typeof _e=="object"&&Object.prototype.toString.call(_e)==="[object Object]"&&typeof _e.toJSON!="function"}e.MutationType=void 0,function(_e){_e.direct="direct",_e.patchObject="patch object",_e.patchFunction="patch function"}(e.MutationType||(e.MutationType={}));const o=typeof window<"u";function v(){const _e=t.effectScope(!0),ke=_e.run(()=>t.ref({}));let ze=[],nt=[];const mt=t.markRaw({install(qt){r(mt),t.isVue2||(mt._a=qt,qt.provide(d,mt),qt.config.globalProperties.$pinia=mt,nt.forEach(un=>ze.push(un)),nt=[])},use(qt){return!this._a&&!t.isVue2?nt.push(qt):ze.push(qt),this},_p:ze,_a:null,_e,_s:new Map,state:ke});return mt}function x(_e,ke){return()=>{}}const E=()=>{};function k(_e,ke,ze,nt=E){_e.push(ke);const mt=()=>{const qt=_e.indexOf(ke);qt>-1&&(_e.splice(qt,1),nt())};return!ze&&t.getCurrentScope()&&t.onScopeDispose(mt),mt}function S(_e,...ke){_e.slice().forEach(ze=>{ze(...ke)})}function N(_e,ke){_e instanceof Map&&ke instanceof Map&&ke.forEach((ze,nt)=>_e.set(nt,ze)),_e instanceof Set&&ke instanceof Set&&ke.forEach(_e.add,_e);for(const ze in ke){if(!ke.hasOwnProperty(ze))continue;const nt=ke[ze],mt=_e[ze];g(mt)&&g(nt)&&_e.hasOwnProperty(ze)&&!t.isRef(nt)&&!t.isReactive(nt)?_e[ze]=N(mt,nt):_e[ze]=nt}return _e}const L=Symbol(),P=new WeakMap;function O(_e){return t.isVue2?P.set(_e,1)&&_e:Object.defineProperty(_e,L,{})}function V(_e){return t.isVue2?!P.has(_e):!g(_e)||!_e.hasOwnProperty(L)}const{assign:z}=Object;function U(_e){return!!(t.isRef(_e)&&_e.effect)}function W(_e,ke,ze,nt){const{state:mt,actions:qt,getters:un}=ke,fn=ze.state.value[_e];let vn;function at(){fn||(t.isVue2?t.set(ze.state.value,_e,mt?mt():{}):ze.state.value[_e]=mt?mt():{});const Ot=t.toRefs(ze.state.value[_e]);return z(Ot,qt,Object.keys(un||{}).reduce((bt,jt)=>(bt[jt]=t.markRaw(t.computed(()=>{r(ze);const gn=ze._s.get(_e);if(!(t.isVue2&&!gn._r))return un[jt].call(gn,gn)})),bt),{}))}return vn=Z(_e,at,ke,ze,nt,!0),vn.$reset=function(){const bt=mt?mt():{};this.$patch(jt=>{z(jt,bt)})},vn}function Z(_e,ke,ze={},nt,mt,qt){let un;const fn=z({actions:{}},ze),vn={deep:!0};let at,Ot,bt=t.markRaw([]),jt=t.markRaw([]),gn;const dn=nt.state.value[_e];!qt&&!dn&&(t.isVue2?t.set(nt.state.value,_e,{}):nt.state.value[_e]={}),t.ref({});let hn;function Ht(gt){let tt;at=Ot=!1,typeof gt=="function"?(gt(nt.state.value[_e]),tt={type:e.MutationType.patchFunction,storeId:_e,events:gn}):(N(nt.state.value[_e],gt),tt={type:e.MutationType.patchObject,payload:gt,storeId:_e,events:gn});const kt=hn=Symbol();t.nextTick().then(()=>{hn===kt&&(at=!0)}),Ot=!0,S(bt,tt,nt.state.value[_e])}const Ee=E;function Ne(){un.stop(),bt=[],jt=[],nt._s.delete(_e)}function et(gt,tt){return function(){r(nt);const kt=Array.from(arguments),dt=[],Et=[];function $t(pt){dt.push(pt)}function Je(pt){Et.push(pt)}S(jt,{args:kt,name:gt,store:Ke,after:$t,onError:Je});let ut;try{ut=tt.apply(this&&this.$id===_e?this:Ke,kt)}catch(pt){throw S(Et,pt),pt}return ut instanceof Promise?ut.then(pt=>(S(dt,pt),pt)).catch(pt=>(S(Et,pt),Promise.reject(pt))):(S(dt,ut),ut)}}const xt={_p:nt,$id:_e,$onAction:k.bind(null,jt),$patch:Ht,$reset:Ee,$subscribe(gt,tt={}){const kt=k(bt,gt,tt.detached,()=>dt()),dt=un.run(()=>t.watch(()=>nt.state.value[_e],Et=>{(tt.flush==="sync"?Ot:at)&&gt({storeId:_e,type:e.MutationType.direct,events:gn},Et)},z({},vn,tt)));return kt},$dispose:Ne};t.isVue2&&(xt._r=!1);const Ke=t.reactive(xt);nt._s.set(_e,Ke);const Rt=nt._e.run(()=>(un=t.effectScope(),un.run(()=>ke())));for(const gt in Rt){const tt=Rt[gt];if(t.isRef(tt)&&!U(tt)||t.isReactive(tt))qt||(dn&&V(tt)&&(t.isRef(tt)?tt.value=dn[gt]:N(tt,dn[gt])),t.isVue2?t.set(nt.state.value[_e],gt,tt):nt.state.value[_e][gt]=tt);else if(typeof tt=="function"){const kt=et(gt,tt);t.isVue2?t.set(Rt,gt,kt):Rt[gt]=kt,fn.actions[gt]=tt}}return t.isVue2?Object.keys(Rt).forEach(gt=>{t.set(Ke,gt,Rt[gt])}):(z(Ke,Rt),z(t.toRaw(Ke),Rt)),Object.defineProperty(Ke,"$state",{get:()=>nt.state.value[_e],set:gt=>{Ht(tt=>{z(tt,gt)})}}),t.isVue2&&(Ke._r=!0),nt._p.forEach(gt=>{z(Ke,un.run(()=>gt({store:Ke,app:nt._a,pinia:nt,options:fn})))}),dn&&qt&&ze.hydrate&&ze.hydrate(Ke.$state,dn),at=!0,Ot=!0,Ke}function re(_e,ke,ze){let nt,mt;const qt=typeof ke=="function";typeof _e=="string"?(nt=_e,mt=qt?ze:ke):(mt=_e,nt=_e.id);function un(fn,vn){const at=t.getCurrentInstance();return fn=(process.env.NODE_ENV==="test"&&n&&n._testing?null:fn)||at&&t.inject(d,null),fn&&r(fn),fn=n,fn._s.has(nt)||(qt?Z(nt,ke,mt,fn):W(nt,mt,fn)),fn._s.get(nt)}return un.$id=nt,un}let oe="Store";function se(_e){oe=_e}function ce(..._e){return _e.reduce((ke,ze)=>(ke[ze.$id+oe]=function(){return ze(this.$pinia)},ke),{})}function me(_e,ke){return Array.isArray(ke)?ke.reduce((ze,nt)=>(ze[nt]=function(){return _e(this.$pinia)[nt]},ze),{}):Object.keys(ke).reduce((ze,nt)=>(ze[nt]=function(){const mt=_e(this.$pinia),qt=ke[nt];return typeof qt=="function"?qt.call(this,mt):mt[qt]},ze),{})}const we=me;function ae(_e,ke){return Array.isArray(ke)?ke.reduce((ze,nt)=>(ze[nt]=function(...mt){return _e(this.$pinia)[nt](...mt)},ze),{}):Object.keys(ke).reduce((ze,nt)=>(ze[nt]=function(...mt){return _e(this.$pinia)[ke[nt]](...mt)},ze),{})}function Ce(_e,ke){return Array.isArray(ke)?ke.reduce((ze,nt)=>(ze[nt]={get(){return _e(this.$pinia)[nt]},set(mt){return _e(this.$pinia)[nt]=mt}},ze),{}):Object.keys(ke).reduce((ze,nt)=>(ze[nt]={get(){return _e(this.$pinia)[ke[nt]]},set(mt){return _e(this.$pinia)[ke[nt]]=mt}},ze),{})}function Fe(_e){if(t.isVue2)return t.toRefs(_e);{_e=t.toRaw(_e);const ke={};for(const ze in _e){const nt=_e[ze];(t.isRef(nt)||t.isReactive(nt))&&(ke[ze]=t.toRef(_e,ze))}return ke}}const it=function(_e){_e.mixin({beforeCreate(){const ke=this.$options;if(ke.pinia){const ze=ke.pinia;if(!this._provided){const nt={};Object.defineProperty(this,"_provided",{get:()=>nt,set:mt=>Object.assign(nt,mt)})}this._provided[d]=ze,this.$pinia||(this.$pinia=ze),ze._a=this,o&&r(ze)}else!this.$pinia&&ke.parent&&ke.parent.$pinia&&(this.$pinia=ke.parent.$pinia)},destroyed(){delete this._pStores}})};e.PiniaVuePlugin=it,e.acceptHMRUpdate=x,e.createPinia=v,e.defineStore=re,e.getActivePinia=c,e.mapActions=ae,e.mapGetters=we,e.mapState=me,e.mapStores=ce,e.mapWritableState=Ce,e.setActivePinia=r,e.setMapStoreSuffix=se,e.skipHydrate=O,e.storeToRefs=Fe})(pinia_prod);function defineFetchStore(e){var t;return pinia_prod.defineStore({id:e.id,state:()=>({fetching:!1,fetched:!1,data:e.initData}),getters:(t=e.getters)!=null?t:{},actions:{async fetch(n){if(!(e.onlyOnce&&this.fetched)){e.cleanWhenRefetch&&(this.data=e.initData),this.fetching=!0;try{const r=await e.fetcher(n);this.data=r!=null?r:null,this.fetched=!0}finally{this.fetching=!1}}}}})}function basePropertyOf$2(e){return function(t){return e==null?void 0:e[t]}}var _basePropertyOf=basePropertyOf$2,basePropertyOf$1=_basePropertyOf,htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},escapeHtmlChar$1=basePropertyOf$1(htmlEscapes),_escapeHtmlChar=escapeHtmlChar$1,freeGlobal$1=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$1=freeGlobal||freeSelf||Function("return this")(),_root=root$1,root=_root,Symbol$4=root.Symbol,_Symbol=Symbol$4;function arrayMap$1(e,t){for(var n=-1,r=e==null?0:e.length,c=Array(r);++n<r;)c[n]=t(e[n],n,e);return c}var _arrayMap=arrayMap$1,isArray$6=Array.isArray,isArray_1=isArray$6,Symbol$3=_Symbol,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty,nativeObjectToString$1=objectProto$1.toString,symToStringTag$1=Symbol$3?Symbol$3.toStringTag:void 0;function getRawTag$1(e){var t=hasOwnProperty$1.call(e,symToStringTag$1),n=e[symToStringTag$1];try{e[symToStringTag$1]=void 0;var r=!0}catch{}var c=nativeObjectToString$1.call(e);return r&&(t?e[symToStringTag$1]=n:delete e[symToStringTag$1]),c}var _getRawTag=getRawTag$1,objectProto=Object.prototype,nativeObjectToString=objectProto.toString;function objectToString$2(e){return nativeObjectToString.call(e)}var _objectToString=objectToString$2,Symbol$2=_Symbol,getRawTag=_getRawTag,objectToString$1=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag$1(e){return e==null?e===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(e)?getRawTag(e):objectToString$1(e)}var _baseGetTag=baseGetTag$1;function isObjectLike$1(e){return e!=null&&typeof e=="object"}var isObjectLike_1=isObjectLike$1,baseGetTag=_baseGetTag,isObjectLike=isObjectLike_1,symbolTag="[object Symbol]";function isSymbol$3(e){return typeof e=="symbol"||isObjectLike(e)&&baseGetTag(e)==symbolTag}var isSymbol_1=isSymbol$3,Symbol$1=_Symbol,arrayMap=_arrayMap,isArray$5=isArray_1,isSymbol$2=isSymbol_1,INFINITY$1=1/0,symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString$2(e){if(typeof e=="string")return e;if(isArray$5(e))return arrayMap(e,baseToString$2)+"";if(isSymbol$2(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return t=="0"&&1/e==-INFINITY$1?"-0":t}var _baseToString=baseToString$2,baseToString$1=_baseToString;function toString$6(e){return e==null?"":baseToString$1(e)}var toString_1=toString$6,escapeHtmlChar=_escapeHtmlChar,toString$5=toString_1,reUnescapedHtml=/[&<>"']/g,reHasUnescapedHtml=RegExp(reUnescapedHtml.source);function escape$4(e){return e=toString$5(e),e&&reHasUnescapedHtml.test(e)?e.replace(reUnescapedHtml,escapeHtmlChar):e}var _escape=escape$4,basePropertyOf=_basePropertyOf,htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},unescapeHtmlChar$1=basePropertyOf(htmlUnescapes),_unescapeHtmlChar=unescapeHtmlChar$1,toString$4=toString_1,unescapeHtmlChar=_unescapeHtmlChar,reEscapedHtml=/&(?:amp|lt|gt|quot|#39);/g,reHasEscapedHtml=RegExp(reEscapedHtml.source);function unescape$3(e){return e=toString$4(e),e&&reHasEscapedHtml.test(e)?e.replace(reEscapedHtml,unescapeHtmlChar):e}var _unescape=unescape$3;function baseSlice$1(e,t,n){var r=-1,c=e.length;t<0&&(t=-t>c?0:c+t),n=n>c?c:n,n<0&&(n+=c),c=t>n?0:n-t>>>0,t>>>=0;for(var d=Array(c);++r<c;)d[r]=e[r+t];return d}var _baseSlice=baseSlice$1,baseSlice=_baseSlice;function castSlice$2(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:baseSlice(e,t,n)}var _castSlice=castSlice$2,rsAstralRange$2="\\ud800-\\udfff",rsComboMarksRange$2="\\u0300-\\u036f",reComboHalfMarksRange$2="\\ufe20-\\ufe2f",rsComboSymbolsRange$2="\\u20d0-\\u20ff",rsComboRange$2=rsComboMarksRange$2+reComboHalfMarksRange$2+rsComboSymbolsRange$2,rsVarRange$2="\\ufe0e\\ufe0f",rsZWJ$2="\\u200d",reHasUnicode=RegExp("["+rsZWJ$2+rsAstralRange$2+rsComboRange$2+rsVarRange$2+"]");function hasUnicode$4(e){return reHasUnicode.test(e)}var _hasUnicode=hasUnicode$4;function isObject$5(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var isObject_1=isObject$5,_nodeUtil={exports:{}};(function(e,t){var n=_freeGlobal,r=t&&!t.nodeType&&t,c=r&&!0&&e&&!e.nodeType&&e,d=c&&c.exports===r,g=d&&n.process,o=function(){try{var v=c&&c.require&&c.require("util").types;return v||g&&g.binding&&g.binding("util")}catch{}}();e.exports=o})(_nodeUtil,_nodeUtil.exports);var nodeUtil=_nodeUtil.exports;nodeUtil&&nodeUtil.isRegExp;function baseProperty$1(e){return function(t){return t==null?void 0:t[e]}}var _baseProperty=baseProperty$1,baseProperty=_baseProperty,asciiSize$1=baseProperty("length"),_asciiSize=asciiSize$1,rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsVarRange$1="\\ufe0e\\ufe0f",rsAstral$1="["+rsAstralRange$1+"]",rsCombo$1="["+rsComboRange$1+"]",rsFitz$1="\\ud83c[\\udffb-\\udfff]",rsModifier$1="(?:"+rsCombo$1+"|"+rsFitz$1+")",rsNonAstral$1="[^"+rsAstralRange$1+"]",rsRegional$1="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair$1="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ$1="\\u200d",reOptMod$1=rsModifier$1+"?",rsOptVar$1="["+rsVarRange$1+"]?",rsOptJoin$1="(?:"+rsZWJ$1+"(?:"+[rsNonAstral$1,rsRegional$1,rsSurrPair$1].join("|")+")"+rsOptVar$1+reOptMod$1+")*",rsSeq$1=rsOptVar$1+reOptMod$1+rsOptJoin$1,rsSymbol$1="(?:"+[rsNonAstral$1+rsCombo$1+"?",rsCombo$1,rsRegional$1,rsSurrPair$1,rsAstral$1].join("|")+")",reUnicode$1=RegExp(rsFitz$1+"(?="+rsFitz$1+")|"+rsSymbol$1+rsSeq$1,"g");function unicodeSize$1(e){for(var t=reUnicode$1.lastIndex=0;reUnicode$1.test(e);)++t;return t}var _unicodeSize=unicodeSize$1,asciiSize=_asciiSize,hasUnicode$3=_hasUnicode,unicodeSize=_unicodeSize;function stringSize$2(e){return hasUnicode$3(e)?unicodeSize(e):asciiSize(e)}var _stringSize=stringSize$2;function asciiToArray$1(e){return e.split("")}var _asciiToArray=asciiToArray$1,rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsVarRange="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange+"]",rsCombo="["+rsComboRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ="\\u200d",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");function unicodeToArray$1(e){return e.match(reUnicode)||[]}var _unicodeToArray=unicodeToArray$1,asciiToArray=_asciiToArray,hasUnicode$2=_hasUnicode,unicodeToArray=_unicodeToArray;function stringToArray$2(e){return hasUnicode$2(e)?unicodeToArray(e):asciiToArray(e)}var _stringToArray=stringToArray$2,reWhitespace=/\s/;function trimmedEndIndex$1(e){for(var t=e.length;t--&&reWhitespace.test(e.charAt(t)););return t}var _trimmedEndIndex=trimmedEndIndex$1,trimmedEndIndex=_trimmedEndIndex,reTrimStart=/^\s+/;function baseTrim$1(e){return e&&e.slice(0,trimmedEndIndex(e)+1).replace(reTrimStart,"")}var _baseTrim=baseTrim$1,baseTrim=_baseTrim,isObject$4=isObject_1,isSymbol$1=isSymbol_1,NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber$1(e){if(typeof e=="number")return e;if(isSymbol$1(e))return NAN;if(isObject$4(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=isObject$4(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=baseTrim(e);var n=reIsBinary.test(e);return n||reIsOctal.test(e)?freeParseInt(e.slice(2),n?2:8):reIsBadHex.test(e)?NAN:+e}var toNumber_1=toNumber$1,toNumber=toNumber_1,INFINITY=1/0,MAX_INTEGER=17976931348623157e292;function toFinite$1(e){if(!e)return e===0?e:0;if(e=toNumber(e),e===INFINITY||e===-INFINITY){var t=e<0?-1:1;return t*MAX_INTEGER}return e===e?e:0}var toFinite_1=toFinite$1,toFinite=toFinite_1;function toInteger$1(e){var t=toFinite(e),n=t%1;return t===t?n?t-n:t:0}var toInteger_1=toInteger$1,castSlice$1=_castSlice,hasUnicode$1=_hasUnicode,stringToArray$1=_stringToArray,toString$3=toString_1;function createCaseFirst$1(e){return function(t){t=toString$3(t);var n=hasUnicode$1(t)?stringToArray$1(t):void 0,r=n?n[0]:t.charAt(0),c=n?castSlice$1(n,1).join(""):t.slice(1);return r[e]()+c}}var _createCaseFirst=createCaseFirst$1,createCaseFirst=_createCaseFirst,upperFirst$1=createCaseFirst("toUpperCase"),upperFirst_1=upperFirst$1,toString$2=toString_1,upperFirst=upperFirst_1;function capitalize(e){return upperFirst(toString$2(e).toLowerCase())}var capitalize_1=capitalize,MAX_SAFE_INTEGER=9007199254740991,nativeFloor=Math.floor;function baseRepeat$1(e,t){var n="";if(!e||t<1||t>MAX_SAFE_INTEGER)return n;do t%2&&(n+=e),t=nativeFloor(t/2),t&&(e+=e);while(t);return n}var _baseRepeat=baseRepeat$1,baseRepeat=_baseRepeat,baseToString=_baseToString,castSlice=_castSlice,hasUnicode=_hasUnicode,stringSize$1=_stringSize,stringToArray=_stringToArray,nativeCeil=Math.ceil;function createPadding$1(e,t){t=t===void 0?" ":baseToString(t);var n=t.length;if(n<2)return n?baseRepeat(t,e):t;var r=baseRepeat(t,nativeCeil(e/stringSize$1(t)));return hasUnicode(t)?castSlice(stringToArray(r),0,e).join(""):r.slice(0,e)}var _createPadding=createPadding$1,createPadding=_createPadding,stringSize=_stringSize,toInteger=toInteger_1,toString$1=toString_1;function padStart$1(e,t,n){e=toString$1(e),t=toInteger(t);var r=t?stringSize(e):0;return t&&r<t?createPadding(t-r,n)+e:e}var padStart_1=padStart$1;const escape$3=_escape,unescape$2=_unescape,padStart=padStart_1,firstUpperCase=capitalize_1;function numberToKilo(e){return e>1e3?`${parseFloat((e/1e3).toFixed(2))}k`:String(e)}function numberSplit(e){return String(e).replace(/.{1,3}(?=(.{3})+$)/g,"$&,")}const CHINESE_NUMBER_TEXT="\u3007\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D\u5341".split(""),CHINESE_NUMBER_CAPITAL_TEXT="\u96F6\u58F9\u8D30\u53C1\u8086\u4F0D\u9646\u67D2\u634C\u7396\u62FE".split(""),numberToChinese=(e,t=!1)=>{const n=t?CHINESE_NUMBER_CAPITAL_TEXT:CHINESE_NUMBER_TEXT;return String(e).split("").map(r=>n[Number(r)]).join("")};function bind$2(e,t){return function(){return e.apply(t,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(e=>t=>{const n=toString.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=e=>(e=e.toLowerCase(),t=>kindOf(t)===e),typeOfTest=e=>t=>typeof t===e,{isArray:isArray$4}=Array,isUndefined$1=typeOfTest("undefined");function isBuffer$2(e){return e!==null&&!isUndefined$1(e)&&e.constructor!==null&&!isUndefined$1(e.constructor)&&isFunction$1(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&isArrayBuffer(e.buffer),t}const isString$2=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber$1=typeOfTest("number"),isObject$3=e=>e!==null&&typeof e=="object",isBoolean$1=e=>e===!0||e===!1,isPlainObject=e=>{if(kindOf(e)!=="object")return!1;const t=getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},isDate$1=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=e=>isObject$3(e)&&isFunction$1(e.pipe),isFormData=e=>{const t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||toString.call(e)===t||isFunction$1(e.toString)&&e.toString()===t)},isURLSearchParams=kindOfTest("URLSearchParams"),trim=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,c;if(typeof e!="object"&&(e=[e]),isArray$4(e))for(r=0,c=e.length;r<c;r++)t.call(null,e[r],r,e);else{const d=n?Object.getOwnPropertyNames(e):Object.keys(e),g=d.length;let o;for(r=0;r<g;r++)o=d[r],t.call(null,e[o],o,e)}}function merge$2(){const e={},t=(n,r)=>{isPlainObject(e[r])&&isPlainObject(n)?e[r]=merge$2(e[r],n):isPlainObject(n)?e[r]=merge$2({},n):isArray$4(n)?e[r]=n.slice():e[r]=n};for(let n=0,r=arguments.length;n<r;n++)arguments[n]&&forEach(arguments[n],t);return e}const extend$3=(e,t,n,{allOwnKeys:r}={})=>(forEach(t,(c,d)=>{n&&isFunction$1(c)?e[d]=bind$2(c,n):e[d]=c},{allOwnKeys:r}),e),stripBOM=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),inherits=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject=(e,t,n,r)=>{let c,d,g;const o={};if(t=t||{},e==null)return t;do{for(c=Object.getOwnPropertyNames(e),d=c.length;d-- >0;)g=c[d],(!r||r(g,e,t))&&!o[g]&&(t[g]=e[g],o[g]=!0);e=n!==!1&&getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},endsWith=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},toArray=e=>{if(!e)return null;if(isArray$4(e))return e;let t=e.length;if(!isNumber$1(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},isTypedArray=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let c;for(;(c=r.next())&&!c.done;){const d=c.value;t.call(e,d[0],d[1])}},matchAll=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=e=>e.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,function(n,r,c){return r.toUpperCase()+c}),hasOwnProperty=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),isRegExp$2=kindOfTest("RegExp"),reduceDescriptors=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};forEach(n,(c,d)=>{t(c,d,e)!==!1&&(r[d]=c)}),Object.defineProperties(e,r)},freezeMethods=e=>{reduceDescriptors(e,(t,n)=>{const r=e[n];if(!!isFunction$1(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not read-only method '"+n+"'")})}})},toObjectSet=(e,t)=>{const n={},r=c=>{c.forEach(d=>{n[d]=!0})};return isArray$4(e)?r(e):r(String(e).split(t)),n},noop$1=()=>{},toFiniteNumber=(e,t)=>(e=+e,Number.isFinite(e)?e:t),utils$5={isArray:isArray$4,isArrayBuffer,isBuffer:isBuffer$2,isFormData,isArrayBufferView,isString:isString$2,isNumber:isNumber$1,isBoolean:isBoolean$1,isObject:isObject$3,isPlainObject,isUndefined:isUndefined$1,isDate:isDate$1,isFile,isBlob,isRegExp:isRegExp$2,isFunction:isFunction$1,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge:merge$2,extend:extend$3,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$1,toFiniteNumber};function AxiosError(e,t,n,r,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),c&&(this.response=c)}utils$5.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{descriptors[e]={value:e}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(e,t,n,r,c,d)=>{const g=Object.create(prototype$1);return utils$5.toFlatObject(e,g,function(v){return v!==Error.prototype},o=>o!=="isAxiosError"),AxiosError.call(g,e.message,t,n,r,c),g.cause=e,g.name=e.name,d&&Object.assign(g,d),g};var Stream$5=stream__default.default.Stream,util$7=require$$0__default$1.default,delayed_stream=DelayedStream$1;function DelayedStream$1(){this.source=null,this.dataSize=0,this.maxDataSize=1024*1024,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}util$7.inherits(DelayedStream$1,Stream$5);DelayedStream$1.create=function(e,t){var n=new this;t=t||{};for(var r in t)n[r]=t[r];n.source=e;var c=e.emit;return e.emit=function(){return n._handleEmit(arguments),c.apply(e,arguments)},e.on("error",function(){}),n.pauseStream&&e.pause(),n};Object.defineProperty(DelayedStream$1.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}});DelayedStream$1.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)};DelayedStream$1.prototype.resume=function(){this._released||this.release(),this.source.resume()};DelayedStream$1.prototype.pause=function(){this.source.pause()};DelayedStream$1.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(e){this.emit.apply(this,e)}.bind(this)),this._bufferedEvents=[]};DelayedStream$1.prototype.pipe=function(){var e=Stream$5.prototype.pipe.apply(this,arguments);return this.resume(),e};DelayedStream$1.prototype._handleEmit=function(e){if(this._released){this.emit.apply(this,e);return}e[0]==="data"&&(this.dataSize+=e[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(e)};DelayedStream$1.prototype._checkIfMaxDataSizeExceeded=function(){if(!this._maxDataSizeExceeded&&!(this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(e))}};var util$6=require$$0__default$1.default,Stream$4=stream__default.default.Stream,DelayedStream=delayed_stream,combined_stream=CombinedStream$1;function CombinedStream$1(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2*1024*1024,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null,this._insideLoop=!1,this._pendingNext=!1}util$6.inherits(CombinedStream$1,Stream$4);CombinedStream$1.create=function(e){var t=new this;e=e||{};for(var n in e)t[n]=e[n];return t};CombinedStream$1.isStreamLike=function(e){return typeof e!="function"&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"&&!Buffer.isBuffer(e)};CombinedStream$1.prototype.append=function(e){var t=CombinedStream$1.isStreamLike(e);if(t){if(!(e instanceof DelayedStream)){var n=DelayedStream.create(e,{maxDataSize:1/0,pauseStream:this.pauseStreams});e.on("data",this._checkDataSize.bind(this)),e=n}this._handleErrors(e),this.pauseStreams&&e.pause()}return this._streams.push(e),this};CombinedStream$1.prototype.pipe=function(e,t){return Stream$4.prototype.pipe.call(this,e,t),this.resume(),e};CombinedStream$1.prototype._getNext=function(){if(this._currentStream=null,this._insideLoop){this._pendingNext=!0;return}this._insideLoop=!0;try{do this._pendingNext=!1,this._realGetNext();while(this._pendingNext)}finally{this._insideLoop=!1}};CombinedStream$1.prototype._realGetNext=function(){var e=this._streams.shift();if(typeof e>"u"){this.end();return}if(typeof e!="function"){this._pipeNext(e);return}var t=e;t(function(n){var r=CombinedStream$1.isStreamLike(n);r&&(n.on("data",this._checkDataSize.bind(this)),this._handleErrors(n)),this._pipeNext(n)}.bind(this))};CombinedStream$1.prototype._pipeNext=function(e){this._currentStream=e;var t=CombinedStream$1.isStreamLike(e);if(t){e.on("end",this._getNext.bind(this)),e.pipe(this,{end:!1});return}var n=e;this.write(n),this._getNext()};CombinedStream$1.prototype._handleErrors=function(e){var t=this;e.on("error",function(n){t._emitError(n)})};CombinedStream$1.prototype.write=function(e){this.emit("data",e)};CombinedStream$1.prototype.pause=function(){!this.pauseStreams||(this.pauseStreams&&this._currentStream&&typeof this._currentStream.pause=="function"&&this._currentStream.pause(),this.emit("pause"))};CombinedStream$1.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&typeof this._currentStream.resume=="function"&&this._currentStream.resume(),this.emit("resume")};CombinedStream$1.prototype.end=function(){this._reset(),this.emit("end")};CombinedStream$1.prototype.destroy=function(){this._reset(),this.emit("close")};CombinedStream$1.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null};CombinedStream$1.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(e))}};CombinedStream$1.prototype._updateDataSize=function(){this.dataSize=0;var e=this;this._streams.forEach(function(t){!t.dataSize||(e.dataSize+=t.dataSize)}),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)};CombinedStream$1.prototype._emitError=function(e){this._reset(),this.emit("error",e)};var mimeTypes={},mimeDb={exports:{}};const require$$0={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}};/*!
 * mime-db
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015-2022 Douglas Christopher Wilson
 * MIT Licensed
 */(function(e){e.exports=require$$0})(mimeDb);/*!
 * mime-types
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */(function(e){var t=mimeDb.exports,n=require$$1__default.default.extname,r=/^\s*([^;\s]*)(?:;|\s|$)/,c=/^text\//i;e.charset=d,e.charsets={lookup:d},e.contentType=g,e.extension=o,e.extensions=Object.create(null),e.lookup=v,e.types=Object.create(null),x(e.extensions,e.types);function d(E){if(!E||typeof E!="string")return!1;var k=r.exec(E),S=k&&t[k[1].toLowerCase()];return S&&S.charset?S.charset:k&&c.test(k[1])?"UTF-8":!1}function g(E){if(!E||typeof E!="string")return!1;var k=E.indexOf("/")===-1?e.lookup(E):E;if(!k)return!1;if(k.indexOf("charset")===-1){var S=e.charset(k);S&&(k+="; charset="+S.toLowerCase())}return k}function o(E){if(!E||typeof E!="string")return!1;var k=r.exec(E),S=k&&e.extensions[k[1].toLowerCase()];return!S||!S.length?!1:S[0]}function v(E){if(!E||typeof E!="string")return!1;var k=n("x."+E).toLowerCase().substr(1);return k&&e.types[k]||!1}function x(E,k){var S=["nginx","apache",void 0,"iana"];Object.keys(t).forEach(function(L){var P=t[L],O=P.extensions;if(!(!O||!O.length)){E[L]=O;for(var V=0;V<O.length;V++){var z=O[V];if(k[z]){var U=S.indexOf(t[k[z]].source),W=S.indexOf(P.source);if(k[z]!=="application/octet-stream"&&(U>W||U===W&&k[z].substr(0,12)==="application/"))continue}k[z]=L}}})}})(mimeTypes);var defer_1=defer$1;function defer$1(e){var t=typeof setImmediate=="function"?setImmediate:typeof process=="object"&&typeof process.nextTick=="function"?process.nextTick:null;t?t(e):setTimeout(e,0)}var defer=defer_1,async_1=async$2;function async$2(e){var t=!1;return defer(function(){t=!0}),function(r,c){t?e(r,c):defer(function(){e(r,c)})}}var abort_1=abort$2;function abort$2(e){Object.keys(e.jobs).forEach(clean.bind(e)),e.jobs={}}function clean(e){typeof this.jobs[e]=="function"&&this.jobs[e]()}var async$1=async_1,abort$1=abort_1,iterate_1=iterate$2;function iterate$2(e,t,n,r){var c=n.keyedList?n.keyedList[n.index]:n.index;n.jobs[c]=runJob(t,c,e[c],function(d,g){c in n.jobs&&(delete n.jobs[c],d?abort$1(n):n.results[c]=g,r(d,n.results))})}function runJob(e,t,n,r){var c;return e.length==2?c=e(n,async$1(r)):c=e(n,t,async$1(r)),c}var state_1=state;function state(e,t){var n=!Array.isArray(e),r={index:0,keyedList:n||t?Object.keys(e):null,jobs:{},results:n?{}:[],size:n?Object.keys(e).length:e.length};return t&&r.keyedList.sort(n?t:function(c,d){return t(e[c],e[d])}),r}var abort=abort_1,async=async_1,terminator_1=terminator$2;function terminator$2(e){!Object.keys(this.jobs).length||(this.index=this.size,abort(this),async(e)(null,this.results))}var iterate$1=iterate_1,initState$1=state_1,terminator$1=terminator_1,parallel_1=parallel;function parallel(e,t,n){for(var r=initState$1(e);r.index<(r.keyedList||e).length;)iterate$1(e,t,r,function(c,d){if(c){n(c,d);return}if(Object.keys(r.jobs).length===0){n(null,r.results);return}}),r.index++;return terminator$1.bind(r,n)}var serialOrdered$2={exports:{}},iterate=iterate_1,initState=state_1,terminator=terminator_1;serialOrdered$2.exports=serialOrdered$1;serialOrdered$2.exports.ascending=ascending;serialOrdered$2.exports.descending=descending;function serialOrdered$1(e,t,n,r){var c=initState(e,n);return iterate(e,t,c,function d(g,o){if(g){r(g,o);return}if(c.index++,c.index<(c.keyedList||e).length){iterate(e,t,c,d);return}r(null,c.results)}),terminator.bind(c,r)}function ascending(e,t){return e<t?-1:e>t?1:0}function descending(e,t){return-1*ascending(e,t)}var serialOrdered=serialOrdered$2.exports,serial_1=serial;function serial(e,t,n){return serialOrdered(e,t,null,n)}var asynckit$1={parallel:parallel_1,serial:serial_1,serialOrdered:serialOrdered$2.exports},populate$1=function(e,t){return Object.keys(t).forEach(function(n){e[n]=e[n]||t[n]}),e},CombinedStream=combined_stream,util$5=require$$0__default$1.default,path=require$$1__default.default,http$1=require$$3__default.default,https$1=require$$4__default.default,parseUrl$1=require$$0__default$2.default.parse,fs=require$$1__default$1.default,Stream$3=stream__default.default.Stream,mime=mimeTypes,asynckit=asynckit$1,populate=populate$1,form_data=FormData$1;util$5.inherits(FormData$1,CombinedStream);function FormData$1(e){if(!(this instanceof FormData$1))return new FormData$1(e);this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],CombinedStream.call(this),e=e||{};for(var t in e)this[t]=e[t]}FormData$1.LINE_BREAK=`\r
`;FormData$1.DEFAULT_CONTENT_TYPE="application/octet-stream";FormData$1.prototype.append=function(e,t,n){n=n||{},typeof n=="string"&&(n={filename:n});var r=CombinedStream.prototype.append.bind(this);if(typeof t=="number"&&(t=""+t),util$5.isArray(t)){this._error(new Error("Arrays are not supported."));return}var c=this._multiPartHeader(e,t,n),d=this._multiPartFooter();r(c),r(t),r(d),this._trackLength(c,t,n)};FormData$1.prototype._trackLength=function(e,t,n){var r=0;n.knownLength!=null?r+=+n.knownLength:Buffer.isBuffer(t)?r=t.length:typeof t=="string"&&(r=Buffer.byteLength(t)),this._valueLength+=r,this._overheadLength+=Buffer.byteLength(e)+FormData$1.LINE_BREAK.length,!(!t||!t.path&&!(t.readable&&t.hasOwnProperty("httpVersion"))&&!(t instanceof Stream$3))&&(n.knownLength||this._valuesToMeasure.push(t))};FormData$1.prototype._lengthRetriever=function(e,t){e.hasOwnProperty("fd")?e.end!=null&&e.end!=1/0&&e.start!=null?t(null,e.end+1-(e.start?e.start:0)):fs.stat(e.path,function(n,r){var c;if(n){t(n);return}c=r.size-(e.start?e.start:0),t(null,c)}):e.hasOwnProperty("httpVersion")?t(null,+e.headers["content-length"]):e.hasOwnProperty("httpModule")?(e.on("response",function(n){e.pause(),t(null,+n.headers["content-length"])}),e.resume()):t("Unknown stream")};FormData$1.prototype._multiPartHeader=function(e,t,n){if(typeof n.header=="string")return n.header;var r=this._getContentDisposition(t,n),c=this._getContentType(t,n),d="",g={"Content-Disposition":["form-data",'name="'+e+'"'].concat(r||[]),"Content-Type":[].concat(c||[])};typeof n.header=="object"&&populate(g,n.header);var o;for(var v in g)!g.hasOwnProperty(v)||(o=g[v],o!=null&&(Array.isArray(o)||(o=[o]),o.length&&(d+=v+": "+o.join("; ")+FormData$1.LINE_BREAK)));return"--"+this.getBoundary()+FormData$1.LINE_BREAK+d+FormData$1.LINE_BREAK};FormData$1.prototype._getContentDisposition=function(e,t){var n,r;return typeof t.filepath=="string"?n=path.normalize(t.filepath).replace(/\\/g,"/"):t.filename||e.name||e.path?n=path.basename(t.filename||e.name||e.path):e.readable&&e.hasOwnProperty("httpVersion")&&(n=path.basename(e.client._httpMessage.path||"")),n&&(r='filename="'+n+'"'),r};FormData$1.prototype._getContentType=function(e,t){var n=t.contentType;return!n&&e.name&&(n=mime.lookup(e.name)),!n&&e.path&&(n=mime.lookup(e.path)),!n&&e.readable&&e.hasOwnProperty("httpVersion")&&(n=e.headers["content-type"]),!n&&(t.filepath||t.filename)&&(n=mime.lookup(t.filepath||t.filename)),!n&&typeof e=="object"&&(n=FormData$1.DEFAULT_CONTENT_TYPE),n};FormData$1.prototype._multiPartFooter=function(){return function(e){var t=FormData$1.LINE_BREAK,n=this._streams.length===0;n&&(t+=this._lastBoundary()),e(t)}.bind(this)};FormData$1.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+FormData$1.LINE_BREAK};FormData$1.prototype.getHeaders=function(e){var t,n={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(t in e)e.hasOwnProperty(t)&&(n[t.toLowerCase()]=e[t]);return n};FormData$1.prototype.setBoundary=function(e){this._boundary=e};FormData$1.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary};FormData$1.prototype.getBuffer=function(){for(var e=new Buffer.alloc(0),t=this.getBoundary(),n=0,r=this._streams.length;n<r;n++)typeof this._streams[n]!="function"&&(Buffer.isBuffer(this._streams[n])?e=Buffer.concat([e,this._streams[n]]):e=Buffer.concat([e,Buffer.from(this._streams[n])]),(typeof this._streams[n]!="string"||this._streams[n].substring(2,t.length+2)!==t)&&(e=Buffer.concat([e,Buffer.from(FormData$1.LINE_BREAK)])));return Buffer.concat([e,Buffer.from(this._lastBoundary())])};FormData$1.prototype._generateBoundary=function(){for(var e="--------------------------",t=0;t<24;t++)e+=Math.floor(Math.random()*10).toString(16);this._boundary=e};FormData$1.prototype.getLengthSync=function(){var e=this._overheadLength+this._valueLength;return this._streams.length&&(e+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),e};FormData$1.prototype.hasKnownLength=function(){var e=!0;return this._valuesToMeasure.length&&(e=!1),e};FormData$1.prototype.getLength=function(e){var t=this._overheadLength+this._valueLength;if(this._streams.length&&(t+=this._lastBoundary().length),!this._valuesToMeasure.length){process.nextTick(e.bind(this,null,t));return}asynckit.parallel(this._valuesToMeasure,this._lengthRetriever,function(n,r){if(n){e(n);return}r.forEach(function(c){t+=c}),e(null,t)})};FormData$1.prototype.submit=function(e,t){var n,r,c={method:"post"};return typeof e=="string"?(e=parseUrl$1(e),r=populate({port:e.port,path:e.pathname,host:e.hostname,protocol:e.protocol},c)):(r=populate(e,c),r.port||(r.port=r.protocol=="https:"?443:80)),r.headers=this.getHeaders(e.headers),r.protocol=="https:"?n=https$1.request(r):n=http$1.request(r),this.getLength(function(d,g){if(d&&d!=="Unknown stream"){this._error(d);return}if(g&&n.setHeader("Content-Length",g),this.pipe(n),t){var o,v=function(x,E){return n.removeListener("error",v),n.removeListener("response",o),t.call(this,x,E)};o=v.bind(this,null),n.on("error",v),n.on("response",o)}}.bind(this)),n};FormData$1.prototype._error=function(e){this.error||(this.error=e,this.pause(),this.emit("error",e))};FormData$1.prototype.toString=function(){return"[object FormData]"};function isVisitable(e){return utils$5.isPlainObject(e)||utils$5.isArray(e)}function removeBrackets(e){return utils$5.endsWith(e,"[]")?e.slice(0,-2):e}function renderKey(e,t,n){return e?e.concat(t).map(function(c,d){return c=removeBrackets(c),!n&&d?"["+c+"]":c}).join(n?".":""):t}function isFlatArray(e){return utils$5.isArray(e)&&!e.some(isVisitable)}const predicates=utils$5.toFlatObject(utils$5,{},null,function(t){return/^is[A-Z]/.test(t)});function isSpecCompliant(e){return e&&utils$5.isFunction(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator]}function toFormData(e,t,n){if(!utils$5.isObject(e))throw new TypeError("target must be an object");t=t||new(form_data||FormData),n=utils$5.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(P,O){return!utils$5.isUndefined(O[P])});const r=n.metaTokens,c=n.visitor||E,d=n.dots,g=n.indexes,v=(n.Blob||typeof Blob<"u"&&Blob)&&isSpecCompliant(t);if(!utils$5.isFunction(c))throw new TypeError("visitor must be a function");function x(L){if(L===null)return"";if(utils$5.isDate(L))return L.toISOString();if(!v&&utils$5.isBlob(L))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$5.isArrayBuffer(L)||utils$5.isTypedArray(L)?v&&typeof Blob=="function"?new Blob([L]):Buffer.from(L):L}function E(L,P,O){let V=L;if(L&&!O&&typeof L=="object"){if(utils$5.endsWith(P,"{}"))P=r?P:P.slice(0,-2),L=JSON.stringify(L);else if(utils$5.isArray(L)&&isFlatArray(L)||utils$5.isFileList(L)||utils$5.endsWith(P,"[]")&&(V=utils$5.toArray(L)))return P=removeBrackets(P),V.forEach(function(U,W){!(utils$5.isUndefined(U)||U===null)&&t.append(g===!0?renderKey([P],W,d):g===null?P:P+"[]",x(U))}),!1}return isVisitable(L)?!0:(t.append(renderKey(O,P,d),x(L)),!1)}const k=[],S=Object.assign(predicates,{defaultVisitor:E,convertValue:x,isVisitable});function N(L,P){if(!utils$5.isUndefined(L)){if(k.indexOf(L)!==-1)throw Error("Circular reference detected in "+P.join("."));k.push(L),utils$5.forEach(L,function(V,z){(!(utils$5.isUndefined(V)||V===null)&&c.call(t,V,utils$5.isString(z)?z.trim():z,P,S))===!0&&N(V,P?P.concat(z):[z])}),k.pop()}}if(!utils$5.isObject(e))throw new TypeError("data must be an object");return N(e),t}function encode$2(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function AxiosURLSearchParams(e,t){this._pairs=[],e&&toFormData(e,this,t)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(t,n){this._pairs.push([t,n])};prototype.toString=function(t){const n=t?function(r){return t.call(this,r,encode$2)}:encode$2;return this._pairs.map(function(c){return n(c[0])+"="+n(c[1])},"").join("&")};function encode$1(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(e,t,n){if(!t)return e;const r=n&&n.encode||encode$1,c=n&&n.serialize;let d;if(c?d=c(t,n):d=utils$5.isURLSearchParams(t)?t.toString():new AxiosURLSearchParams(t,n).toString(r),d){const g=e.indexOf("#");g!==-1&&(e=e.slice(0,g)),e+=(e.indexOf("?")===-1?"?":"&")+d}return e}class InterceptorManager{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){utils$5.forEach(this.handlers,function(r){r!==null&&t(r)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams=require$$0__default$2.default.URLSearchParams,platform={isNode:!0,classes:{URLSearchParams,FormData:form_data,Blob:typeof Blob<"u"&&Blob||null},protocols:["http","https","file","data"]};function toURLEncodedForm(e,t){return toFormData(e,new platform.classes.URLSearchParams,Object.assign({visitor:function(n,r,c,d){return utils$5.isBuffer(n)?(this.append(r,n.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)}},t))}function parsePropPath(e){return utils$5.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function arrayToObject$1(e){const t={},n=Object.keys(e);let r;const c=n.length;let d;for(r=0;r<c;r++)d=n[r],t[d]=e[d];return t}function formDataToJSON(e){function t(n,r,c,d){let g=n[d++];const o=Number.isFinite(+g),v=d>=n.length;return g=!g&&utils$5.isArray(c)?c.length:g,v?(utils$5.hasOwnProp(c,g)?c[g]=[c[g],r]:c[g]=r,!o):((!c[g]||!utils$5.isObject(c[g]))&&(c[g]=[]),t(n,r,c[g],d)&&utils$5.isArray(c[g])&&(c[g]=arrayToObject$1(c[g])),!o)}if(utils$5.isFormData(e)&&utils$5.isFunction(e.entries)){const n={};return utils$5.forEachEntry(e,(r,c)=>{t(parsePropPath(r),c,n,0)}),n}return null}function settle(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new AxiosError("Request failed with status code "+n.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function isAbsoluteURL(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function combineURLs(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function buildFullPath(e,t){return e&&!isAbsoluteURL(t)?combineURLs(e,t):t}var parseUrl=require$$0__default$2.default.parse,DEFAULT_PORTS={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443},stringEndsWith=String.prototype.endsWith||function(e){return e.length<=this.length&&this.indexOf(e,this.length-e.length)!==-1};function getProxyForUrl(e){var t=typeof e=="string"?parseUrl(e):e||{},n=t.protocol,r=t.host,c=t.port;if(typeof r!="string"||!r||typeof n!="string"||(n=n.split(":",1)[0],r=r.replace(/:\d*$/,""),c=parseInt(c)||DEFAULT_PORTS[n]||0,!shouldProxy(r,c)))return"";var d=getEnv("npm_config_"+n+"_proxy")||getEnv(n+"_proxy")||getEnv("npm_config_proxy")||getEnv("all_proxy");return d&&d.indexOf("://")===-1&&(d=n+"://"+d),d}function shouldProxy(e,t){var n=(getEnv("npm_config_no_proxy")||getEnv("no_proxy")).toLowerCase();return n?n==="*"?!1:n.split(/[,\s]/).every(function(r){if(!r)return!0;var c=r.match(/^(.+):(\d+)$/),d=c?c[1]:r,g=c?parseInt(c[2]):0;return g&&g!==t?!0:/^[.*]/.test(d)?(d.charAt(0)==="*"&&(d=d.slice(1)),!stringEndsWith.call(e,d)):e!==d}):!0}function getEnv(e){return process.env[e.toLowerCase()]||process.env[e.toUpperCase()]||""}var getProxyForUrl_1=getProxyForUrl,followRedirects={exports:{}},src$2={exports:{}},browser$2={exports:{}},ms$1,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms$1;hasRequiredMs=1;var e=1e3,t=e*60,n=t*60,r=n*24,c=r*7,d=r*365.25;ms$1=function(E,k){k=k||{};var S=typeof E;if(S==="string"&&E.length>0)return g(E);if(S==="number"&&isFinite(E))return k.long?v(E):o(E);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(E))};function g(E){if(E=String(E),!(E.length>100)){var k=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(E);if(!!k){var S=parseFloat(k[1]),N=(k[2]||"ms").toLowerCase();switch(N){case"years":case"year":case"yrs":case"yr":case"y":return S*d;case"weeks":case"week":case"w":return S*c;case"days":case"day":case"d":return S*r;case"hours":case"hour":case"hrs":case"hr":case"h":return S*n;case"minutes":case"minute":case"mins":case"min":case"m":return S*t;case"seconds":case"second":case"secs":case"sec":case"s":return S*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return S;default:return}}}}function o(E){var k=Math.abs(E);return k>=r?Math.round(E/r)+"d":k>=n?Math.round(E/n)+"h":k>=t?Math.round(E/t)+"m":k>=e?Math.round(E/e)+"s":E+"ms"}function v(E){var k=Math.abs(E);return k>=r?x(E,k,r,"day"):k>=n?x(E,k,n,"hour"):k>=t?x(E,k,t,"minute"):k>=e?x(E,k,e,"second"):E+" ms"}function x(E,k,S,N){var L=k>=S*1.5;return Math.round(E/S)+" "+N+(L?"s":"")}return ms$1}var common,hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;function e(t){r.debug=r,r.default=r,r.coerce=x,r.disable=g,r.enable=d,r.enabled=o,r.humanize=requireMs(),r.destroy=E,Object.keys(t).forEach(k=>{r[k]=t[k]}),r.names=[],r.skips=[],r.formatters={};function n(k){let S=0;for(let N=0;N<k.length;N++)S=(S<<5)-S+k.charCodeAt(N),S|=0;return r.colors[Math.abs(S)%r.colors.length]}r.selectColor=n;function r(k){let S,N=null,L,P;function O(...V){if(!O.enabled)return;const z=O,U=Number(new Date),W=U-(S||U);z.diff=W,z.prev=S,z.curr=U,S=U,V[0]=r.coerce(V[0]),typeof V[0]!="string"&&V.unshift("%O");let Z=0;V[0]=V[0].replace(/%([a-zA-Z%])/g,(oe,se)=>{if(oe==="%%")return"%";Z++;const ce=r.formatters[se];if(typeof ce=="function"){const me=V[Z];oe=ce.call(z,me),V.splice(Z,1),Z--}return oe}),r.formatArgs.call(z,V),(z.log||r.log).apply(z,V)}return O.namespace=k,O.useColors=r.useColors(),O.color=r.selectColor(k),O.extend=c,O.destroy=r.destroy,Object.defineProperty(O,"enabled",{enumerable:!0,configurable:!1,get:()=>N!==null?N:(L!==r.namespaces&&(L=r.namespaces,P=r.enabled(k)),P),set:V=>{N=V}}),typeof r.init=="function"&&r.init(O),O}function c(k,S){const N=r(this.namespace+(typeof S>"u"?":":S)+k);return N.log=this.log,N}function d(k){r.save(k),r.namespaces=k,r.names=[],r.skips=[];let S;const N=(typeof k=="string"?k:"").split(/[\s,]+/),L=N.length;for(S=0;S<L;S++)!N[S]||(k=N[S].replace(/\*/g,".*?"),k[0]==="-"?r.skips.push(new RegExp("^"+k.slice(1)+"$")):r.names.push(new RegExp("^"+k+"$")))}function g(){const k=[...r.names.map(v),...r.skips.map(v).map(S=>"-"+S)].join(",");return r.enable(""),k}function o(k){if(k[k.length-1]==="*")return!0;let S,N;for(S=0,N=r.skips.length;S<N;S++)if(r.skips[S].test(k))return!1;for(S=0,N=r.names.length;S<N;S++)if(r.names[S].test(k))return!0;return!1}function v(k){return k.toString().substring(2,k.toString().length-2).replace(/\.\*\?$/,"*")}function x(k){return k instanceof Error?k.stack||k.message:k}function E(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return common=e,common}var hasRequiredBrowser$1;function requireBrowser$1(){return hasRequiredBrowser$1||(hasRequiredBrowser$1=1,function(e,t){t.formatArgs=r,t.save=c,t.load=d,t.useColors=n,t.storage=g(),t.destroy=(()=>{let v=!1;return()=>{v||(v=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(v){if(v[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+v[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const x="color: "+this.color;v.splice(1,0,x,"color: inherit");let E=0,k=0;v[0].replace(/%[a-zA-Z%]/g,S=>{S!=="%%"&&(E++,S==="%c"&&(k=E))}),v.splice(k,0,x)}t.log=console.debug||console.log||(()=>{});function c(v){try{v?t.storage.setItem("debug",v):t.storage.removeItem("debug")}catch{}}function d(){let v;try{v=t.storage.getItem("debug")}catch{}return!v&&typeof process<"u"&&"env"in process&&(v=process.env.DEBUG),v}function g(){try{return localStorage}catch{}}e.exports=requireCommon()(t);const{formatters:o}=e.exports;o.j=function(v){try{return JSON.stringify(v)}catch(x){return"[UnexpectedJSONParseError]: "+x.message}}}(browser$2,browser$2.exports)),browser$2.exports}var node={exports:{}},hasFlag,hasRequiredHasFlag;function requireHasFlag(){return hasRequiredHasFlag||(hasRequiredHasFlag=1,hasFlag=(e,t=process.argv)=>{const n=e.startsWith("-")?"":e.length===1?"-":"--",r=t.indexOf(n+e),c=t.indexOf("--");return r!==-1&&(c===-1||r<c)}),hasFlag}var supportsColor_1,hasRequiredSupportsColor;function requireSupportsColor(){if(hasRequiredSupportsColor)return supportsColor_1;hasRequiredSupportsColor=1;const e=require$$0__default$3.default,t=require$$1__default$2.default,n=requireHasFlag(),{env:r}=process;let c;n("no-color")||n("no-colors")||n("color=false")||n("color=never")?c=0:(n("color")||n("colors")||n("color=true")||n("color=always"))&&(c=1),"FORCE_COLOR"in r&&(r.FORCE_COLOR==="true"?c=1:r.FORCE_COLOR==="false"?c=0:c=r.FORCE_COLOR.length===0?1:Math.min(parseInt(r.FORCE_COLOR,10),3));function d(v){return v===0?!1:{level:v,hasBasic:!0,has256:v>=2,has16m:v>=3}}function g(v,x){if(c===0)return 0;if(n("color=16m")||n("color=full")||n("color=truecolor"))return 3;if(n("color=256"))return 2;if(v&&!x&&c===void 0)return 0;const E=c||0;if(r.TERM==="dumb")return E;if(process.platform==="win32"){const k=e.release().split(".");return Number(k[0])>=10&&Number(k[2])>=10586?Number(k[2])>=14931?3:2:1}if("CI"in r)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(k=>k in r)||r.CI_NAME==="codeship"?1:E;if("TEAMCITY_VERSION"in r)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(r.TEAMCITY_VERSION)?1:0;if(r.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in r){const k=parseInt((r.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(r.TERM_PROGRAM){case"iTerm.app":return k>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(r.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(r.TERM)||"COLORTERM"in r?1:E}function o(v){const x=g(v,v&&v.isTTY);return d(x)}return supportsColor_1={supportsColor:o,stdout:d(g(!0,t.isatty(1))),stderr:d(g(!0,t.isatty(2)))},supportsColor_1}var hasRequiredNode;function requireNode(){return hasRequiredNode||(hasRequiredNode=1,function(e,t){const n=require$$1__default$2.default,r=require$$0__default$1.default;t.init=E,t.log=o,t.formatArgs=d,t.save=v,t.load=x,t.useColors=c,t.destroy=r.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const S=requireSupportsColor();S&&(S.stderr||S).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}t.inspectOpts=Object.keys(process.env).filter(S=>/^debug_/i.test(S)).reduce((S,N)=>{const L=N.substring(6).toLowerCase().replace(/_([a-z])/g,(O,V)=>V.toUpperCase());let P=process.env[N];return/^(yes|on|true|enabled)$/i.test(P)?P=!0:/^(no|off|false|disabled)$/i.test(P)?P=!1:P==="null"?P=null:P=Number(P),S[L]=P,S},{});function c(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)}function d(S){const{namespace:N,useColors:L}=this;if(L){const P=this.color,O="\x1B[3"+(P<8?P:"8;5;"+P),V=`  ${O};1m${N} \x1B[0m`;S[0]=V+S[0].split(`
`).join(`
`+V),S.push(O+"m+"+e.exports.humanize(this.diff)+"\x1B[0m")}else S[0]=g()+N+" "+S[0]}function g(){return t.inspectOpts.hideDate?"":new Date().toISOString()+" "}function o(...S){return process.stderr.write(r.format(...S)+`
`)}function v(S){S?process.env.DEBUG=S:delete process.env.DEBUG}function x(){return process.env.DEBUG}function E(S){S.inspectOpts={};const N=Object.keys(t.inspectOpts);for(let L=0;L<N.length;L++)S.inspectOpts[N[L]]=t.inspectOpts[N[L]]}e.exports=requireCommon()(t);const{formatters:k}=e.exports;k.o=function(S){return this.inspectOpts.colors=this.useColors,r.inspect(S,this.inspectOpts).split(`
`).map(N=>N.trim()).join(" ")},k.O=function(S){return this.inspectOpts.colors=this.useColors,r.inspect(S,this.inspectOpts)}}(node,node.exports)),node.exports}var hasRequiredSrc;function requireSrc(){return hasRequiredSrc||(hasRequiredSrc=1,function(e){typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?e.exports=requireBrowser$1():e.exports=requireNode()}(src$2)),src$2.exports}var debug$1,debug_1=function(){if(!debug$1){try{debug$1=requireSrc()("follow-redirects")}catch{}typeof debug$1!="function"&&(debug$1=function(){})}debug$1.apply(null,arguments)},url=require$$0__default$2.default,URL$1=url.URL,http=require$$3__default.default,https=require$$4__default.default,Writable=stream__default.default.Writable,assert=require$$4__default$1.default,debug=debug_1,events$2=["abort","aborted","connect","error","socket","timeout"],eventHandlers=Object.create(null);events$2.forEach(function(e){eventHandlers[e]=function(t,n,r){this._redirectable.emit(e,t,n,r)}});var InvalidUrlError=createErrorType("ERR_INVALID_URL","Invalid URL",TypeError),RedirectionError=createErrorType("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),TooManyRedirectsError=createErrorType("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),MaxBodyLengthExceededError=createErrorType("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),WriteAfterEndError=createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end");function RedirectableRequest(e,t){Writable.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var n=this;this._onNativeResponse=function(r){n._processResponse(r)},this._performRequest()}RedirectableRequest.prototype=Object.create(Writable.prototype);RedirectableRequest.prototype.abort=function(){abortRequest(this._currentRequest),this.emit("abort")};RedirectableRequest.prototype.write=function(e,t,n){if(this._ending)throw new WriteAfterEndError;if(!isString$1(e)&&!isBuffer$1(e))throw new TypeError("data should be a string, Buffer or Uint8Array");if(isFunction(t)&&(n=t,t=null),e.length===0){n&&n();return}this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,n)):(this.emit("error",new MaxBodyLengthExceededError),this.abort())};RedirectableRequest.prototype.end=function(e,t,n){if(isFunction(e)?(n=e,e=t=null):isFunction(t)&&(n=t,t=null),!e)this._ended=this._ending=!0,this._currentRequest.end(null,null,n);else{var r=this,c=this._currentRequest;this.write(e,t,function(){r._ended=!0,c.end(null,null,n)}),this._ending=!0}};RedirectableRequest.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)};RedirectableRequest.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)};RedirectableRequest.prototype.setTimeout=function(e,t){var n=this;function r(g){g.setTimeout(e),g.removeListener("timeout",g.destroy),g.addListener("timeout",g.destroy)}function c(g){n._timeout&&clearTimeout(n._timeout),n._timeout=setTimeout(function(){n.emit("timeout"),d()},e),r(g)}function d(){n._timeout&&(clearTimeout(n._timeout),n._timeout=null),n.removeListener("abort",d),n.removeListener("error",d),n.removeListener("response",d),t&&n.removeListener("timeout",t),n.socket||n._currentRequest.removeListener("socket",c)}return t&&this.on("timeout",t),this.socket?c(this.socket):this._currentRequest.once("socket",c),this.on("socket",r),this.on("abort",d),this.on("error",d),this.on("response",d),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(e){RedirectableRequest.prototype[e]=function(t,n){return this._currentRequest[e](t,n)}});["aborted","connection","socket"].forEach(function(e){Object.defineProperty(RedirectableRequest.prototype,e,{get:function(){return this._currentRequest[e]}})});RedirectableRequest.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");t<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}};RedirectableRequest.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(!t){this.emit("error",new TypeError("Unsupported protocol "+e));return}if(this._options.agents){var n=e.slice(0,-1);this._options.agent=this._options.agents[n]}var r=this._currentRequest=t.request(this._options,this._onNativeResponse);r._redirectable=this;for(var c of events$2)r.on(c,eventHandlers[c]);if(this._currentUrl=/^\//.test(this._options.path)?url.format(this._options):this._options.path,this._isRedirect){var d=0,g=this,o=this._requestBodyBuffers;(function v(x){if(r===g._currentRequest)if(x)g.emit("error",x);else if(d<o.length){var E=o[d++];r.finished||r.write(E.data,E.encoding,v)}else g._ended&&r.end()})()}};RedirectableRequest.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var n=e.headers.location;if(!n||this._options.followRedirects===!1||t<300||t>=400){e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),this._requestBodyBuffers=[];return}if(abortRequest(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new TooManyRedirectsError);return}var r,c=this._options.beforeRedirect;c&&(r=Object.assign({Host:e.req.getHeader("host")},this._options.headers));var d=this._options.method;((t===301||t===302)&&this._options.method==="POST"||t===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],removeMatchingHeaders(/^content-/i,this._options.headers));var g=removeMatchingHeaders(/^host$/i,this._options.headers),o=url.parse(this._currentUrl),v=g||o.host,x=/^\w+:/.test(n)?this._currentUrl:url.format(Object.assign(o,{host:v})),E;try{E=url.resolve(x,n)}catch(L){this.emit("error",new RedirectionError({cause:L}));return}debug("redirecting to",E),this._isRedirect=!0;var k=url.parse(E);if(Object.assign(this._options,k),(k.protocol!==o.protocol&&k.protocol!=="https:"||k.host!==v&&!isSubdomain(k.host,v))&&removeMatchingHeaders(/^(?:authorization|cookie)$/i,this._options.headers),isFunction(c)){var S={headers:e.headers,statusCode:t},N={url:x,method:d,headers:r};try{c(this._options,S,N)}catch(L){this.emit("error",L);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(L){this.emit("error",new RedirectionError({cause:L}))}};function wrap(e){var t={maxRedirects:21,maxBodyLength:10485760},n={};return Object.keys(e).forEach(function(r){var c=r+":",d=n[c]=e[r],g=t[r]=Object.create(d);function o(x,E,k){if(isString$1(x)){var S;try{S=urlToOptions(new URL$1(x))}catch{S=url.parse(x)}if(!isString$1(S.protocol))throw new InvalidUrlError({input:x});x=S}else URL$1&&x instanceof URL$1?x=urlToOptions(x):(k=E,E=x,x={protocol:c});return isFunction(E)&&(k=E,E=null),E=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},x,E),E.nativeProtocols=n,!isString$1(E.host)&&!isString$1(E.hostname)&&(E.hostname="::1"),assert.equal(E.protocol,c,"protocol mismatch"),debug("options",E),new RedirectableRequest(E,k)}function v(x,E,k){var S=g.request(x,E,k);return S.end(),S}Object.defineProperties(g,{request:{value:o,configurable:!0,enumerable:!0,writable:!0},get:{value:v,configurable:!0,enumerable:!0,writable:!0}})}),t}function noop(){}function urlToOptions(e){var t={protocol:e.protocol,hostname:e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:e.pathname+e.search,href:e.href};return e.port!==""&&(t.port=Number(e.port)),t}function removeMatchingHeaders(e,t){var n;for(var r in t)e.test(r)&&(n=t[r],delete t[r]);return n===null||typeof n>"u"?void 0:String(n).trim()}function createErrorType(e,t,n){function r(c){Error.captureStackTrace(this,this.constructor),Object.assign(this,c||{}),this.code=e,this.message=this.cause?t+": "+this.cause.message:t}return r.prototype=new(n||Error),r.prototype.constructor=r,r.prototype.name="Error ["+e+"]",r}function abortRequest(e){for(var t of events$2)e.removeListener(t,eventHandlers[t]);e.on("error",noop),e.abort()}function isSubdomain(e,t){assert(isString$1(e)&&isString$1(t));var n=e.length-t.length-1;return n>0&&e[n]==="."&&e.endsWith(t)}function isString$1(e){return typeof e=="string"||e instanceof String}function isFunction(e){return typeof e=="function"}function isBuffer$1(e){return typeof e=="object"&&"length"in e}followRedirects.exports=wrap({http,https});followRedirects.exports.wrap=wrap;const VERSION="1.1.3";function CanceledError(e,t,n){AxiosError.call(this,e==null?"canceled":e,AxiosError.ERR_CANCELED,t,n),this.name="CanceledError"}utils$5.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function parseProtocol(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}const DATA_URL_PATTERN=/^(?:([^;]+);)?(?:[^;]+;)?(base64|),([\s\S]*)$/;function fromDataURI(e,t,n){const r=n&&n.Blob||platform.classes.Blob,c=parseProtocol(e);if(t===void 0&&r&&(t=!0),c==="data"){e=c.length?e.slice(c.length+1):e;const d=DATA_URL_PATTERN.exec(e);if(!d)throw new AxiosError("Invalid URL",AxiosError.ERR_INVALID_URL);const g=d[1],o=d[2],v=d[3],x=Buffer.from(decodeURIComponent(v),o?"base64":"utf8");if(t){if(!r)throw new AxiosError("Blob is not supported",AxiosError.ERR_NOT_SUPPORT);return new r([x],{type:g})}return x}throw new AxiosError("Unsupported protocol "+c,AxiosError.ERR_NOT_SUPPORT)}const ignoreDuplicateOf=utils$5.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=e=>{const t={};let n,r,c;return e&&e.split(`
`).forEach(function(g){c=g.indexOf(":"),n=g.substring(0,c).trim().toLowerCase(),r=g.substring(c+1).trim(),!(!n||t[n]&&ignoreDuplicateOf[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},$internals=Symbol("internals"),$defaults=Symbol("defaults");function normalizeHeader(e){return e&&String(e).trim().toLowerCase()}function normalizeValue(e){return e===!1||e==null?e:utils$5.isArray(e)?e.map(normalizeValue):String(e)}function parseTokens(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}function matchHeaderValue(e,t,n,r){if(utils$5.isFunction(r))return r.call(this,t,n);if(!!utils$5.isString(t)){if(utils$5.isString(r))return t.indexOf(r)!==-1;if(utils$5.isRegExp(r))return r.test(t)}}function formatHeader(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function buildAccessors(e,t){const n=utils$5.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(c,d,g){return this[r].call(this,t,c,d,g)},configurable:!0})})}function findKey(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,c;for(;r-- >0;)if(c=n[r],t===c.toLowerCase())return c;return null}function AxiosHeaders(e,t){e&&this.set(e),this[$defaults]=t||null}Object.assign(AxiosHeaders.prototype,{set:function(e,t,n){const r=this;function c(d,g,o){const v=normalizeHeader(g);if(!v)throw new Error("header name must be a non-empty string");const x=findKey(r,v);x&&o!==!0&&(r[x]===!1||o===!1)||(r[x||g]=normalizeValue(d))}return utils$5.isPlainObject(e)?utils$5.forEach(e,(d,g)=>{c(d,g,t)}):c(t,e,n),this},get:function(e,t){if(e=normalizeHeader(e),!e)return;const n=findKey(this,e);if(n){const r=this[n];if(!t)return r;if(t===!0)return parseTokens(r);if(utils$5.isFunction(t))return t.call(this,r,n);if(utils$5.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}},has:function(e,t){if(e=normalizeHeader(e),e){const n=findKey(this,e);return!!(n&&(!t||matchHeaderValue(this,this[n],n,t)))}return!1},delete:function(e,t){const n=this;let r=!1;function c(d){if(d=normalizeHeader(d),d){const g=findKey(n,d);g&&(!t||matchHeaderValue(n,n[g],g,t))&&(delete n[g],r=!0)}}return utils$5.isArray(e)?e.forEach(c):c(e),r},clear:function(){return Object.keys(this).forEach(this.delete.bind(this))},normalize:function(e){const t=this,n={};return utils$5.forEach(this,(r,c)=>{const d=findKey(n,c);if(d){t[d]=normalizeValue(r),delete t[c];return}const g=e?formatHeader(c):String(c).trim();g!==c&&delete t[c],t[g]=normalizeValue(r),n[g]=!0}),this},toJSON:function(e){const t=Object.create(null);return utils$5.forEach(Object.assign({},this[$defaults]||null,this),(n,r)=>{n==null||n===!1||(t[r]=e&&utils$5.isArray(n)?n.join(", "):n)}),t}});Object.assign(AxiosHeaders,{from:function(e){return utils$5.isString(e)?new this(parseHeaders(e)):e instanceof this?e:new this(e)},accessor:function(e){const n=(this[$internals]=this[$internals]={accessors:{}}).accessors,r=this.prototype;function c(d){const g=normalizeHeader(d);n[g]||(buildAccessors(r,d),n[g]=!0)}return utils$5.isArray(e)?e.forEach(c):c(e),this}});AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]);utils$5.freezeMethods(AxiosHeaders.prototype);utils$5.freezeMethods(AxiosHeaders);function throttle(e,t){let n=0;const r=1e3/t;let c=null;return function(g,o){const v=Date.now();if(g||v-n>r)return c&&(clearTimeout(c),c=null),n=v,e.apply(null,o);c||(c=setTimeout(()=>(c=null,n=Date.now(),e.apply(null,o)),r-(v-n)))}}function speedometer(e,t){e=e||10;const n=new Array(e),r=new Array(e);let c=0,d=0,g;return t=t!==void 0?t:1e3,function(v){const x=Date.now(),E=r[d];g||(g=x),n[c]=v,r[c]=x;let k=d,S=0;for(;k!==c;)S+=n[k++],k=k%e;if(c=(c+1)%e,c===d&&(d=(d+1)%e),x-g<t)return;const N=E&&x-E;return N?Math.round(S*1e3/N):void 0}}const kInternals=Symbol("internals");class AxiosTransformStream extends stream__default.default.Transform{constructor(t){t=utils$5.toFlatObject(t,{maxRate:0,chunkSize:64*1024,minChunkSize:100,timeWindow:500,ticksRate:2,samplesCount:15},null,(o,v)=>!utils$5.isUndefined(v[o])),super({readableHighWaterMark:t.chunkSize});const n=this,r=this[kInternals]={length:t.length,timeWindow:t.timeWindow,ticksRate:t.ticksRate,chunkSize:t.chunkSize,maxRate:t.maxRate,minChunkSize:t.minChunkSize,bytesSeen:0,isCaptured:!1,notifiedBytesLoaded:0,ts:Date.now(),bytes:0,onReadCallback:null},c=speedometer(r.ticksRate*t.samplesCount,r.timeWindow);this.on("newListener",o=>{o==="progress"&&(r.isCaptured||(r.isCaptured=!0))});let d=0;r.updateProgress=throttle(function(){const v=r.length,x=r.bytesSeen,E=x-d;if(!E||n.destroyed)return;const k=c(E);d=x,process.nextTick(()=>{n.emit("progress",{loaded:x,total:v,progress:v?x/v:void 0,bytes:E,rate:k||void 0,estimated:k&&v&&x<=v?(v-x)/k:void 0})})},r.ticksRate);const g=()=>{r.updateProgress(!0)};this.once("end",g),this.once("error",g)}_read(t){const n=this[kInternals];return n.onReadCallback&&n.onReadCallback(),super._read(t)}_transform(t,n,r){const c=this,d=this[kInternals],g=d.maxRate,o=this.readableHighWaterMark,v=d.timeWindow,x=1e3/v,E=g/x,k=d.minChunkSize!==!1?Math.max(d.minChunkSize,E*.01):0;function S(L,P){const O=Buffer.byteLength(L);d.bytesSeen+=O,d.bytes+=O,d.isCaptured&&d.updateProgress(),c.push(L)?process.nextTick(P):d.onReadCallback=()=>{d.onReadCallback=null,process.nextTick(P)}}const N=(L,P)=>{const O=Buffer.byteLength(L);let V=null,z=o,U,W=0;if(g){const Z=Date.now();(!d.ts||(W=Z-d.ts)>=v)&&(d.ts=Z,U=E-d.bytes,d.bytes=U<0?-U:0,W=0),U=E-d.bytes}if(g){if(U<=0)return setTimeout(()=>{P(null,L)},v-W);U<z&&(z=U)}z&&O>z&&O-z>k&&(V=L.subarray(z),L=L.subarray(0,z)),S(L,V?()=>{process.nextTick(P,null,V)}:P)};N(t,function L(P,O){if(P)return r(P);O?N(O,L):r(null)})}setLength(t){return this[kInternals].length=+t,this}}const isBrotliSupported=utils$5.isFunction(zlib__default.default.createBrotliDecompress),{http:httpFollow,https:httpsFollow}=followRedirects.exports,isHttps=/https:?/,supportedProtocols=platform.protocols.map(e=>e+":");function dispatchBeforeRedirect(e){e.beforeRedirects.proxy&&e.beforeRedirects.proxy(e),e.beforeRedirects.config&&e.beforeRedirects.config(e)}function setProxy(e,t,n){let r=t;if(!r&&r!==!1){const c=getProxyForUrl_1(n);c&&(r=new URL(c))}if(r){if(r.username&&(r.auth=(r.username||"")+":"+(r.password||"")),r.auth){(r.auth.username||r.auth.password)&&(r.auth=(r.auth.username||"")+":"+(r.auth.password||""));const d=Buffer.from(r.auth,"utf8").toString("base64");e.headers["Proxy-Authorization"]="Basic "+d}e.headers.host=e.hostname+(e.port?":"+e.port:"");const c=r.hostname||r.host;e.hostname=c,e.host=c,e.port=r.port,e.path=n,r.protocol&&(e.protocol=r.protocol.includes(":")?r.protocol:`${r.protocol}:`)}e.beforeRedirects.proxy=function(d){setProxy(d,t,d.href)}}function httpAdapter(e){return new Promise(function(n,r){let c=e.data;const d=e.responseType,g=e.responseEncoding,o=e.method.toUpperCase();let v,x,E=!1,k;const S=new EventEmitter__default.default;function N(){v||(v=!0,e.cancelToken&&e.cancelToken.unsubscribe(V),e.signal&&e.signal.removeEventListener("abort",V),S.removeAllListeners())}function L(ke,ze){x||(x=!0,ze&&(E=!0,N()),ze?r(ke):n(ke))}const P=function(ze){L(ze)},O=function(ze){L(ze,!0)};function V(ke){S.emit("abort",!ke||ke.type?new CanceledError(null,e,k):ke)}S.once("abort",O),(e.cancelToken||e.signal)&&(e.cancelToken&&e.cancelToken.subscribe(V),e.signal&&(e.signal.aborted?V():e.signal.addEventListener("abort",V)));const z=buildFullPath(e.baseURL,e.url),U=new URL(z),W=U.protocol||supportedProtocols[0];if(W==="data:"){let ke;if(o!=="GET")return settle(P,O,{status:405,statusText:"method not allowed",headers:{},config:e});try{ke=fromDataURI(e.url,d==="blob",{Blob:e.env&&e.env.Blob})}catch(ze){throw AxiosError.from(ze,AxiosError.ERR_BAD_REQUEST,e)}return d==="text"?(ke=ke.toString(g),(!g||g==="utf8")&&(c=utils$5.stripBOM(ke))):d==="stream"&&(ke=stream__default.default.Readable.from(ke)),settle(P,O,{data:ke,status:200,statusText:"OK",headers:{},config:e})}if(supportedProtocols.indexOf(W)===-1)return O(new AxiosError("Unsupported protocol "+W,AxiosError.ERR_BAD_REQUEST,e));const Z=AxiosHeaders.from(e.headers).normalize();Z.set("User-Agent","axios/"+VERSION,!1);const re=e.onDownloadProgress,oe=e.onUploadProgress,se=e.maxRate;let ce,me;if(utils$5.isFormData(c)&&utils$5.isFunction(c.getHeaders))Z.set(c.getHeaders());else if(c&&!utils$5.isStream(c)){if(!Buffer.isBuffer(c))if(utils$5.isArrayBuffer(c))c=Buffer.from(new Uint8Array(c));else if(utils$5.isString(c))c=Buffer.from(c,"utf-8");else return O(new AxiosError("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",AxiosError.ERR_BAD_REQUEST,e));if(Z.set("Content-Length",c.length,!1),e.maxBodyLength>-1&&c.length>e.maxBodyLength)return O(new AxiosError("Request body larger than maxBodyLength limit",AxiosError.ERR_BAD_REQUEST,e))}const we=+Z.getContentLength();utils$5.isArray(se)?(ce=se[0],me=se[1]):ce=me=se,c&&(oe||ce)&&(utils$5.isStream(c)||(c=stream__default.default.Readable.from(c,{objectMode:!1})),c=stream__default.default.pipeline([c,new AxiosTransformStream({length:utils$5.toFiniteNumber(we),maxRate:utils$5.toFiniteNumber(ce)})],utils$5.noop),oe&&c.on("progress",ke=>{oe(Object.assign(ke,{upload:!0}))}));let ae;if(e.auth){const ke=e.auth.username||"",ze=e.auth.password||"";ae=ke+":"+ze}if(!ae&&U.username){const ke=U.username,ze=U.password;ae=ke+":"+ze}ae&&Z.delete("authorization");let Ce;try{Ce=buildURL(U.pathname+U.search,e.params,e.paramsSerializer).replace(/^\?/,"")}catch(ke){const ze=new Error(ke.message);return ze.config=e,ze.url=e.url,ze.exists=!0,O(ze)}Z.set("Accept-Encoding","gzip, deflate, br",!1);const Fe={path:Ce,method:o,headers:Z.toJSON(),agents:{http:e.httpAgent,https:e.httpsAgent},auth:ae,protocol:W,beforeRedirect:dispatchBeforeRedirect,beforeRedirects:{}};e.socketPath?Fe.socketPath=e.socketPath:(Fe.hostname=U.hostname,Fe.port=U.port,setProxy(Fe,e.proxy,W+"//"+U.hostname+(U.port?":"+U.port:"")+Fe.path));let it;const _e=isHttps.test(Fe.protocol);if(Fe.agent=_e?e.httpsAgent:e.httpAgent,e.transport?it=e.transport:e.maxRedirects===0?it=_e?require$$4__default.default:require$$3__default.default:(e.maxRedirects&&(Fe.maxRedirects=e.maxRedirects),e.beforeRedirect&&(Fe.beforeRedirects.config=e.beforeRedirect),it=_e?httpsFollow:httpFollow),e.maxBodyLength>-1?Fe.maxBodyLength=e.maxBodyLength:Fe.maxBodyLength=1/0,e.insecureHTTPParser&&(Fe.insecureHTTPParser=e.insecureHTTPParser),k=it.request(Fe,function(ze){if(k.destroyed)return;const nt=[ze];let mt=ze;const qt=ze.req||k;if(e.decompress!==!1)switch(c&&c.length===0&&ze.headers["content-encoding"]&&delete ze.headers["content-encoding"],ze.headers["content-encoding"]){case"gzip":case"compress":case"deflate":nt.push(zlib__default.default.createUnzip()),delete ze.headers["content-encoding"];break;case"br":isBrotliSupported&&(nt.push(zlib__default.default.createBrotliDecompress()),delete ze.headers["content-encoding"])}if(re){const vn=+ze.headers["content-length"],at=new AxiosTransformStream({length:utils$5.toFiniteNumber(vn),maxRate:utils$5.toFiniteNumber(me)});re&&at.on("progress",Ot=>{re(Object.assign(Ot,{download:!0}))}),nt.push(at)}mt=nt.length>1?stream__default.default.pipeline(nt,utils$5.noop):nt[0];const un=stream__default.default.finished(mt,()=>{un(),N()}),fn={status:ze.statusCode,statusText:ze.statusMessage,headers:new AxiosHeaders(ze.headers),config:e,request:qt};if(d==="stream")fn.data=mt,settle(P,O,fn);else{const vn=[];let at=0;mt.on("data",function(bt){vn.push(bt),at+=bt.length,e.maxContentLength>-1&&at>e.maxContentLength&&(E=!0,mt.destroy(),O(new AxiosError("maxContentLength size of "+e.maxContentLength+" exceeded",AxiosError.ERR_BAD_RESPONSE,e,qt)))}),mt.on("aborted",function(){if(E)return;const bt=new AxiosError("maxContentLength size of "+e.maxContentLength+" exceeded",AxiosError.ERR_BAD_RESPONSE,e,qt);mt.destroy(bt),O(bt)}),mt.on("error",function(bt){k.destroyed||O(AxiosError.from(bt,null,e,qt))}),mt.on("end",function(){try{let bt=vn.length===1?vn[0]:Buffer.concat(vn);d!=="arraybuffer"&&(bt=bt.toString(g),(!g||g==="utf8")&&(bt=utils$5.stripBOM(bt))),fn.data=bt}catch(bt){O(AxiosError.from(bt,null,e,fn.request,fn))}settle(P,O,fn)})}S.once("abort",vn=>{mt.destroyed||(mt.emit("error",vn),mt.destroy())})}),S.once("abort",ke=>{O(ke),k.destroy(ke)}),k.on("error",function(ze){O(AxiosError.from(ze,null,e,k))}),k.on("socket",function(ze){ze.setKeepAlive(!0,1e3*60)}),e.timeout){const ke=parseInt(e.timeout,10);if(isNaN(ke)){O(new AxiosError("error trying to parse `config.timeout` to int",AxiosError.ERR_BAD_OPTION_VALUE,e,k));return}k.setTimeout(ke,function(){if(x)return;let nt=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const mt=e.transitional||transitionalDefaults;e.timeoutErrorMessage&&(nt=e.timeoutErrorMessage),O(new AxiosError(nt,mt.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,e,k)),V()})}if(utils$5.isStream(c)){let ke=!1,ze=!1;c.on("end",()=>{ke=!0}),c.once("error",nt=>{ze=!0,k.destroy(nt)}),c.on("close",()=>{!ke&&!ze&&V(new CanceledError("Request stream has been aborted",e,k))}),c.pipe(k)}else k.end(c)})}const cookies=platform.isStandardBrowserEnv?function(){return{write:function(n,r,c,d,g,o){const v=[];v.push(n+"="+encodeURIComponent(r)),utils$5.isNumber(c)&&v.push("expires="+new Date(c).toGMTString()),utils$5.isString(d)&&v.push("path="+d),utils$5.isString(g)&&v.push("domain="+g),o===!0&&v.push("secure"),document.cookie=v.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),isURLSameOrigin=platform.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function c(d){let g=d;return t&&(n.setAttribute("href",g),g=n.href),n.setAttribute("href",g),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=c(window.location.href),function(g){const o=utils$5.isString(g)?c(g):g;return o.protocol===r.protocol&&o.host===r.host}}():function(){return function(){return!0}}();function progressEventReducer(e,t){let n=0;const r=speedometer(50,250);return c=>{const d=c.loaded,g=c.lengthComputable?c.total:void 0,o=d-n,v=r(o),x=d<=g;n=d;const E={loaded:d,total:g,progress:g?d/g:void 0,bytes:o,rate:v||void 0,estimated:v&&g&&x?(g-d)/v:void 0};E[t?"download":"upload"]=!0,e(E)}}function xhrAdapter(e){return new Promise(function(n,r){let c=e.data;const d=AxiosHeaders.from(e.headers).normalize(),g=e.responseType;let o;function v(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}utils$5.isFormData(c)&&platform.isStandardBrowserEnv&&d.setContentType(!1);let x=new XMLHttpRequest;if(e.auth){const N=e.auth.username||"",L=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";d.set("Authorization","Basic "+btoa(N+":"+L))}const E=buildFullPath(e.baseURL,e.url);x.open(e.method.toUpperCase(),buildURL(E,e.params,e.paramsSerializer),!0),x.timeout=e.timeout;function k(){if(!x)return;const N=AxiosHeaders.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),P={data:!g||g==="text"||g==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:N,config:e,request:x};settle(function(V){n(V),v()},function(V){r(V),v()},P),x=null}if("onloadend"in x?x.onloadend=k:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(k)},x.onabort=function(){!x||(r(new AxiosError("Request aborted",AxiosError.ECONNABORTED,e,x)),x=null)},x.onerror=function(){r(new AxiosError("Network Error",AxiosError.ERR_NETWORK,e,x)),x=null},x.ontimeout=function(){let L=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const P=e.transitional||transitionalDefaults;e.timeoutErrorMessage&&(L=e.timeoutErrorMessage),r(new AxiosError(L,P.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,e,x)),x=null},platform.isStandardBrowserEnv){const N=(e.withCredentials||isURLSameOrigin(E))&&e.xsrfCookieName&&cookies.read(e.xsrfCookieName);N&&d.set(e.xsrfHeaderName,N)}c===void 0&&d.setContentType(null),"setRequestHeader"in x&&utils$5.forEach(d.toJSON(),function(L,P){x.setRequestHeader(P,L)}),utils$5.isUndefined(e.withCredentials)||(x.withCredentials=!!e.withCredentials),g&&g!=="json"&&(x.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&x.addEventListener("progress",progressEventReducer(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&x.upload&&x.upload.addEventListener("progress",progressEventReducer(e.onUploadProgress)),(e.cancelToken||e.signal)&&(o=N=>{!x||(r(!N||N.type?new CanceledError(null,e,x):N),x.abort(),x=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o)));const S=parseProtocol(E);if(S&&platform.protocols.indexOf(S)===-1){r(new AxiosError("Unsupported protocol "+S+":",AxiosError.ERR_BAD_REQUEST,e));return}x.send(c||null)})}const adapters={http:httpAdapter,xhr:xhrAdapter},adapters$1={getAdapter:e=>{if(utils$5.isString(e)){const t=adapters[e];if(!e)throw Error(utils$5.hasOwnProp(e)?`Adapter '${e}' is not available in the build`:`Can not resolve adapter '${e}'`);return t}if(!utils$5.isFunction(e))throw new TypeError("adapter is not a function");return e},adapters},DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function getDefaultAdapter(){let e;return typeof XMLHttpRequest<"u"?e=adapters$1.getAdapter("xhr"):typeof process<"u"&&utils$5.kindOf(process)==="process"&&(e=adapters$1.getAdapter("http")),e}function stringifySafely(e,t,n){if(utils$5.isString(e))try{return(t||JSON.parse)(e),utils$5.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const defaults$4={transitional:transitionalDefaults,adapter:getDefaultAdapter(),transformRequest:[function(t,n){const r=n.getContentType()||"",c=r.indexOf("application/json")>-1,d=utils$5.isObject(t);if(d&&utils$5.isHTMLForm(t)&&(t=new FormData(t)),utils$5.isFormData(t))return c&&c?JSON.stringify(formDataToJSON(t)):t;if(utils$5.isArrayBuffer(t)||utils$5.isBuffer(t)||utils$5.isStream(t)||utils$5.isFile(t)||utils$5.isBlob(t))return t;if(utils$5.isArrayBufferView(t))return t.buffer;if(utils$5.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(d){if(r.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(t,this.formSerializer).toString();if((o=utils$5.isFileList(t))||r.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return toFormData(o?{"files[]":t}:t,v&&new v,this.formSerializer)}}return d||c?(n.setContentType("application/json",!1),stringifySafely(t)):t}],transformResponse:[function(t){const n=this.transitional||defaults$4.transitional,r=n&&n.forcedJSONParsing,c=this.responseType==="json";if(t&&utils$5.isString(t)&&(r&&!this.responseType||c)){const g=!(n&&n.silentJSONParsing)&&c;try{return JSON.parse(t)}catch(o){if(g)throw o.name==="SyntaxError"?AxiosError.from(o,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils$5.forEach(["delete","get","head"],function(t){defaults$4.headers[t]={}});utils$5.forEach(["post","put","patch"],function(t){defaults$4.headers[t]=utils$5.merge(DEFAULT_CONTENT_TYPE)});function transformData(e,t){const n=this||defaults$4,r=t||n,c=AxiosHeaders.from(r.headers);let d=r.data;return utils$5.forEach(e,function(o){d=o.call(n,d,c.normalize(),t?t.status:void 0)}),c.normalize(),d}function isCancel(e){return!!(e&&e.__CANCEL__)}function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new CanceledError}function dispatchRequest(e){return throwIfCancellationRequested(e),e.headers=AxiosHeaders.from(e.headers),e.data=transformData.call(e,e.transformRequest),(e.adapter||defaults$4.adapter)(e).then(function(r){return throwIfCancellationRequested(e),r.data=transformData.call(e,e.transformResponse,r),r.headers=AxiosHeaders.from(r.headers),r},function(r){return isCancel(r)||(throwIfCancellationRequested(e),r&&r.response&&(r.response.data=transformData.call(e,e.transformResponse,r.response),r.response.headers=AxiosHeaders.from(r.response.headers))),Promise.reject(r)})}function mergeConfig(e,t){t=t||{};const n={};function r(x,E){return utils$5.isPlainObject(x)&&utils$5.isPlainObject(E)?utils$5.merge(x,E):utils$5.isPlainObject(E)?utils$5.merge({},E):utils$5.isArray(E)?E.slice():E}function c(x){if(utils$5.isUndefined(t[x])){if(!utils$5.isUndefined(e[x]))return r(void 0,e[x])}else return r(e[x],t[x])}function d(x){if(!utils$5.isUndefined(t[x]))return r(void 0,t[x])}function g(x){if(utils$5.isUndefined(t[x])){if(!utils$5.isUndefined(e[x]))return r(void 0,e[x])}else return r(void 0,t[x])}function o(x){if(x in t)return r(e[x],t[x]);if(x in e)return r(void 0,e[x])}const v={url:d,method:d,data:d,baseURL:g,transformRequest:g,transformResponse:g,paramsSerializer:g,timeout:g,timeoutMessage:g,withCredentials:g,adapter:g,responseType:g,xsrfCookieName:g,xsrfHeaderName:g,onUploadProgress:g,onDownloadProgress:g,decompress:g,maxContentLength:g,maxBodyLength:g,beforeRedirect:g,transport:g,httpAgent:g,httpsAgent:g,cancelToken:g,socketPath:g,responseEncoding:g,validateStatus:o};return utils$5.forEach(Object.keys(e).concat(Object.keys(t)),function(E){const k=v[E]||c,S=k(E);utils$5.isUndefined(S)&&k!==o||(n[E]=S)}),n}const validators$1={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{validators$1[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const deprecatedWarnings={};validators$1.transitional=function(t,n,r){function c(d,g){return"[Axios v"+VERSION+"] Transitional option '"+d+"'"+g+(r?". "+r:"")}return(d,g,o)=>{if(t===!1)throw new AxiosError(c(g," has been removed"+(n?" in "+n:"")),AxiosError.ERR_DEPRECATED);return n&&!deprecatedWarnings[g]&&(deprecatedWarnings[g]=!0,console.warn(c(g," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(d,g,o):!0}};function assertOptions(e,t,n){if(typeof e!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let c=r.length;for(;c-- >0;){const d=r[c],g=t[d];if(g){const o=e[d],v=o===void 0||g(o,d,e);if(v!==!0)throw new AxiosError("option "+d+" must be "+v,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new AxiosError("Unknown option "+d,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(t){this.defaults=t,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=mergeConfig(this.defaults,n);const{transitional:r,paramsSerializer:c}=n;r!==void 0&&validator.assertOptions(r,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),c!==void 0&&validator.assertOptions(c,{encode:validators.function,serialize:validators.function},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();const d=n.headers&&utils$5.merge(n.headers.common,n.headers[n.method]);d&&utils$5.forEach(["delete","get","head","post","put","patch","common"],function(L){delete n.headers[L]}),n.headers=new AxiosHeaders(n.headers,d);const g=[];let o=!0;this.interceptors.request.forEach(function(L){typeof L.runWhen=="function"&&L.runWhen(n)===!1||(o=o&&L.synchronous,g.unshift(L.fulfilled,L.rejected))});const v=[];this.interceptors.response.forEach(function(L){v.push(L.fulfilled,L.rejected)});let x,E=0,k;if(!o){const N=[dispatchRequest.bind(this),void 0];for(N.unshift.apply(N,g),N.push.apply(N,v),k=N.length,x=Promise.resolve(n);E<k;)x=x.then(N[E++],N[E++]);return x}k=g.length;let S=n;for(E=0;E<k;){const N=g[E++],L=g[E++];try{S=N(S)}catch(P){L.call(this,P);break}}try{x=dispatchRequest.call(this,S)}catch(N){return Promise.reject(N)}for(E=0,k=v.length;E<k;)x=x.then(v[E++],v[E++]);return x}getUri(t){t=mergeConfig(this.defaults,t);const n=buildFullPath(t.baseURL,t.url);return buildURL(n,t.params,t.paramsSerializer)}}utils$5.forEach(["delete","get","head","options"],function(t){Axios.prototype[t]=function(n,r){return this.request(mergeConfig(r||{},{method:t,url:n,data:(r||{}).data}))}});utils$5.forEach(["post","put","patch"],function(t){function n(r){return function(d,g,o){return this.request(mergeConfig(o||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:d,data:g}))}}Axios.prototype[t]=n(),Axios.prototype[t+"Form"]=n(!0)});class CancelToken{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(d){n=d});const r=this;this.promise.then(c=>{if(!r._listeners)return;let d=r._listeners.length;for(;d-- >0;)r._listeners[d](c);r._listeners=null}),this.promise.then=c=>{let d;const g=new Promise(o=>{r.subscribe(o),d=o}).then(c);return g.cancel=function(){r.unsubscribe(d)},g},t(function(d,g,o){r.reason||(r.reason=new CanceledError(d,g,o),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new CancelToken(function(c){t=c}),cancel:t}}}function spread(e){return function(n){return e.apply(null,n)}}function isAxiosError(e){return utils$5.isObject(e)&&e.isAxiosError===!0}function createInstance(e){const t=new Axios(e),n=bind$2(Axios.prototype.request,t);return utils$5.extend(n,Axios.prototype,t,{allOwnKeys:!0}),utils$5.extend(n,t,null,{allOwnKeys:!0}),n.create=function(c){return createInstance(mergeConfig(e,c))},n}const axios=createInstance(defaults$4);axios.Axios=Axios;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(t){return Promise.all(t)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.formToJSON=e=>formDataToJSON(utils$5.isHTMLForm(e)?new FormData(e):e);const nodepress=axios.create({baseURL:API_CONFIG.NODEPRESS,withCredentials:!0});nodepress.interceptors.response.use(e=>{var t,n;return(n=(t=e.headers)==null?void 0:t["content-type"])!=null&&n.includes("json")&&e.data.status!=="success"?Promise.reject(e.data):e.data},e=>{var c,d,g,o,v,x;const t=e.toJSON(),n={...t,config:e.config,code:t.status||((c=e.response)==null?void 0:c.status)||BAD_REQUEST,message:((g=(d=e.response)==null?void 0:d.data)==null?void 0:g.error)||((o=e.response)==null?void 0:o.statusText)||t.message},r={axiosName:t.name,axiosMessage:t.message,npError:n.message,npMessage:((x=(v=e.response)==null?void 0:v.data)==null?void 0:x.message)||"",status:n.code,method:t.config.method,baseURL:t.config.baseURL,url:t.config.url,params:t.config.params,data:t.config.data,headers:t.config.headers};return console.debug("axios error:",r),Promise.reject(n)});const overwrite=e=>(...t)=>nodepress[e](...t),nodepress$1={$:nodepress,request:overwrite("request"),head:overwrite("head"),get:overwrite("get"),post:overwrite("post"),put:overwrite("put"),patch:overwrite("patch"),delete:overwrite("delete"),options:overwrite("options")},tagEnName=e=>/.*[\u4e00-\u9fa5]+.*$/.test(e.name)?e.slug.includes("-")?e.slug:firstUpperCase(e.slug):e.name,useTagStore=defineFetchStore({id:"tag",initData:[],onlyOnce:!0,fetcher:()=>nodepress$1.get("/tag/all").then(e=>e.result),getters:{sorted:e=>{const t=[...e.data];return t.sort((n,r)=>r.articles_count-n.articles_count),t},fullNameTags:e=>{const t=new Map;return e.data.forEach(n=>{t.set(n.name,n),t.set(n.name.toLowerCase(),n),t.set(n.name.toUpperCase(),n),t.set(firstUpperCase(n.name),n)}),t}}}),useCategoryStore=defineFetchStore({id:"category",initData:[],onlyOnce:!0,async fetcher(){return(await nodepress$1.get("/category",{params:{per_page:50}})).result.data}});var OriginState=(e=>(e[e.Original=0]="Original",e[e.Reprint=1]="Reprint",e[e.Hybrid=2]="Hybrid",e))(OriginState||{}),CommentPostID=(e=>(e[e.Guestbook=0]="Guestbook",e))(CommentPostID||{}),CommentParentType=(e=>(e[e.Self=0]="Self",e))(CommentParentType||{}),SortType=(e=>(e[e.Asc=1]="Asc",e[e.Desc=-1]="Desc",e[e.Hottest=2]="Hottest",e))(SortType||{});const NULL=null,UNDEFINED=void 0,isNull=e=>e===NULL,isUndefined=e=>e===UNDEFINED,get=e=>localStorage.getItem(e),set=(e,t)=>localStorage.setItem(e,t),remove$1=e=>localStorage.removeItem(e),setJSON=(e,t)=>set(e,JSON.stringify(t)),getJSON=e=>{const t=get(e);return typeof t=="string"?JSON.parse(t):null},storage={get,set,remove:remove$1,setJSON,getJSON};var UserType=(e=>(e[e.Null=0]="Null",e[e.Local=1]="Local",e[e.Disqus=2]="Disqus",e))(UserType||{});const LOCAL_STORGAE_KEY="identity-state",useIdentityStore=pinia_prod.defineStore("identity",{state:()=>({disqusConfig:null,user:{type:0,localProfile:null,disqusProfile:null},vote:{likedPages:[],likedComments:[],dislikedComments:[]},feedbacks:[]}),getters:{isLikedPage:e=>t=>e.vote.likedPages.includes(t),isLikedComment:e=>t=>e.vote.likedComments.includes(t),isDislikedComment:e=>t=>e.vote.dislikedComments.includes(t),author:e=>{var t,n,r;return e.user.type===1?e.user.localProfile:e.user.type===2?{name:(t=e.user.disqusProfile)==null?void 0:t.name,site:((n=e.user.disqusProfile)==null?void 0:n.url)||((r=e.user.disqusProfile)==null?void 0:r.profileUrl)}:null}},actions:{likeComment(e){this.vote.likedComments.push(e)},dislikeComment(e){this.vote.dislikedComments.push(e)},likePage(e){this.vote.likedPages.push(e)},addFeedback(e){this.feedbacks.push(e)},fromStorage(){try{this.$state=getJSON(LOCAL_STORGAE_KEY)||this.$state}catch{remove$1(LOCAL_STORGAE_KEY)}},initOnClient(){this.fromStorage(),this.$subscribe(()=>setJSON(LOCAL_STORGAE_KEY,this.$state)),window.addEventListener("storage",e=>{e.key===LOCAL_STORGAE_KEY&&this.fromStorage()}),this.$state.user.type===2?this.fetchDisqusUserInfo().catch(()=>{this.user.disqusProfile=null,this.user.type=0}):this.user.disqusProfile=null,this.fetchDisqusConfig()},saveLocalUser(e){this.user.localProfile={...e},this.user.type=1},removeLocalUser(){this.user.localProfile=null,this.user.type=0},fetchDisqusLogout(){return nodepress$1.get("/disqus/oauth-logout").then(()=>{this.user.disqusProfile=null,this.user.type=0})},fetchDisqusUserInfo(){return nodepress$1.get("/disqus/user-info").then(e=>{this.user.disqusProfile=e.result,this.user.type=2})},fetchDisqusConfig(){return nodepress$1.get("/disqus/config").then(e=>{this.disqusConfig=e.result})}}}),COMMENT_API_PATH="/comment",COMMENT_EMPTY_PID=CommentParentType.Self,useCommentStore=pinia_prod.defineStore("comment",{state:()=>({fetching:!1,posting:!1,deleting:!1,comments:[],pagination:null}),getters:{commentTreeList:e=>{const t=e.comments.map(o=>o.id),n=e.comments.filter(o=>o.pid===COMMENT_EMPTY_PID||!t.includes(o.pid)),r=e.comments.filter(o=>o.pid!==COMMENT_EMPTY_PID&&t.includes(o.pid)),c=new Map(e.comments.map(o=>[o.id,o])),d=new Map(n.map(o=>[o.id,{comment:o,children:[]}])),g=o=>{const v=c.get(o);return v?v.pid===COMMENT_EMPTY_PID?v.id:g(v.pid):UNDEFINED};return r.forEach(o=>{const v=g(o.pid);if(v&&d.has(v)){const x=d.get(v);d.set(v,{...x,children:[o,...x.children]})}}),Array.from(d.values())}},actions:{clearList(){this.comments=[],this.pagination=null},fetchList(e={},t=!1){return e={page:1,per_page:50,sort:SortType.Desc,...e},e.page===1&&this.clearList(),this.fetching=!0,nodepress$1.get(COMMENT_API_PATH,{params:e}).then(c=>{this.pagination=c.result.pagination,t?this.comments.push(...c.result.data):this.comments=c.result.data}).finally(()=>{this.fetching=!1})},postComment(e){return this.posting=!0,nodepress$1.post("/disqus/comment",e).then(t=>(this.comments.unshift(t.result),this.pagination&&this.pagination.total++,t.result)).finally(()=>{this.posting=!1})},deleteComment(e){return this.deleting=!0,nodepress$1.delete("/disqus/comment",{data:{comment_id:e}}).then(()=>{const t=this.comments.findIndex(n=>n.id===e);t>-1&&(this.comments.splice(t,1),this.pagination.total--)}).finally(()=>{this.deleting=!1})},postCommentVote(e,t){const n=useIdentityStore();return nodepress$1.post("/vote/comment",{comment_id:e,vote:t,author:n.author}).then(()=>{const r=this.comments.find(c=>c.id===e);r&&(t>0?r.likes++:r.dislikes++)})}}}),HEADER_ELEMENT_ID="A_header",NAV_ELEMENT_ID="A_nav",MAIN_ELEMENT_ID="A_main",MAIN_CONTENT_ELEMENT_ID="A_main",ASIDE_ELEMENT_ID="A_aside",FOOTER_ELEMENT_ID="A_footer",ARTICLE_CONTENT_ELEMENT_ID="A_article_content",ARTICLE_READMORE_ELEMENT_ID="A_article_readmore",ARTICLE_META_ELEMENT_ID="A_article_meta",ARTICLE_SHARE_ELEMENT_ID="A_article_share",ARTICLE_RELATED_ELEMENT_ID="A_article_related",ARTICLE_CONTENT_HEADING_ELEMENT_ID_PREFIX="A_article_content_heading",getArticleContentHeadingElementID=(e,t)=>`${ARTICLE_CONTENT_HEADING_ELEMENT_ID_PREFIX}_${e}_${t}`,COMMENT_ELEMENT_ID="A_comment_warpper",COMMENT_PUBLISHER_ELEMENT_ID="A_comment_publisher",COMMENT_REPLY_PUBLISHER_ELEMENT_ID="A_comment_reply_publisher",COMMENT_FOOTER_ELEMENT_ID="A_comment_footer",COMMENT_ITEM_ELEMENT_ID_PREFIX="A_comment_content_item",getCommentItemElementID=e=>`${COMMENT_ITEM_ELEMENT_ID_PREFIX}_${e}`,ANCHORS=Object.freeze(Object.defineProperty({__proto__:null,HEADER_ELEMENT_ID,NAV_ELEMENT_ID,MAIN_ELEMENT_ID,MAIN_CONTENT_ELEMENT_ID,ASIDE_ELEMENT_ID,FOOTER_ELEMENT_ID,ARTICLE_CONTENT_ELEMENT_ID,ARTICLE_READMORE_ELEMENT_ID,ARTICLE_META_ELEMENT_ID,ARTICLE_SHARE_ELEMENT_ID,ARTICLE_RELATED_ELEMENT_ID,ARTICLE_CONTENT_HEADING_ELEMENT_ID_PREFIX,getArticleContentHeadingElementID,COMMENT_ELEMENT_ID,COMMENT_PUBLISHER_ELEMENT_ID,COMMENT_REPLY_PUBLISHER_ELEMENT_ID,COMMENT_FOOTER_ELEMENT_ID,COMMENT_ITEM_ELEMENT_ID_PREFIX,getCommentItemElementID},Symbol.toStringTag,{value:"Module"}));var deepFreezeEs6={exports:{}};function deepFreeze(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach(function(t){var n=e[t];typeof n=="object"&&!Object.isFrozen(n)&&deepFreeze(n)}),e}deepFreezeEs6.exports=deepFreeze;deepFreezeEs6.exports.default=deepFreeze;class Response$1{constructor(t){t.data===void 0&&(t.data={}),this.data=t.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function escapeHTML(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function inherit$1(e,...t){const n=Object.create(null);for(const r in e)n[r]=e[r];return t.forEach(function(r){for(const c in r)n[c]=r[c]}),n}const SPAN_CLOSE="</span>",emitsWrappingTags=e=>!!e.scope||e.sublanguage&&e.language,scopeToCSSClass=(e,{prefix:t})=>{if(e.includes(".")){const n=e.split(".");return[`${t}${n.shift()}`,...n.map((r,c)=>`${r}${"_".repeat(c+1)}`)].join(" ")}return`${t}${e}`};class HTMLRenderer{constructor(t,n){this.buffer="",this.classPrefix=n.classPrefix,t.walk(this)}addText(t){this.buffer+=escapeHTML(t)}openNode(t){if(!emitsWrappingTags(t))return;let n="";t.sublanguage?n=`language-${t.language}`:n=scopeToCSSClass(t.scope,{prefix:this.classPrefix}),this.span(n)}closeNode(t){!emitsWrappingTags(t)||(this.buffer+=SPAN_CLOSE)}value(){return this.buffer}span(t){this.buffer+=`<span class="${t}">`}}const newNode=(e={})=>{const t={children:[]};return Object.assign(t,e),t};class TokenTree{constructor(){this.rootNode=newNode(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(t){this.top.children.push(t)}openNode(t){const n=newNode({scope:t});this.add(n),this.stack.push(n)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(t){return this.constructor._walk(t,this.rootNode)}static _walk(t,n){return typeof n=="string"?t.addText(n):n.children&&(t.openNode(n),n.children.forEach(r=>this._walk(t,r)),t.closeNode(n)),t}static _collapse(t){typeof t!="string"&&(!t.children||(t.children.every(n=>typeof n=="string")?t.children=[t.children.join("")]:t.children.forEach(n=>{TokenTree._collapse(n)})))}}class TokenTreeEmitter extends TokenTree{constructor(t){super(),this.options=t}addKeyword(t,n){t!==""&&(this.openNode(n),this.addText(t),this.closeNode())}addText(t){t!==""&&this.add(t)}addSublanguage(t,n){const r=t.root;r.sublanguage=!0,r.language=n,this.add(r)}toHTML(){return new HTMLRenderer(this,this.options).value()}finalize(){return!0}}function source(e){return e?typeof e=="string"?e:e.source:null}function lookahead(e){return concat("(?=",e,")")}function anyNumberOfTimes(e){return concat("(?:",e,")*")}function optional(e){return concat("(?:",e,")?")}function concat(...e){return e.map(n=>source(n)).join("")}function stripOptionsFromArgs(e){const t=e[e.length-1];return typeof t=="object"&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function either(...e){return"("+(stripOptionsFromArgs(e).capture?"":"?:")+e.map(r=>source(r)).join("|")+")"}function countMatchGroups(e){return new RegExp(e.toString()+"|").exec("").length-1}function startsWith(e,t){const n=e&&e.exec(t);return n&&n.index===0}const BACKREF_RE=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function _rewriteBackreferences(e,{joinWith:t}){let n=0;return e.map(r=>{n+=1;const c=n;let d=source(r),g="";for(;d.length>0;){const o=BACKREF_RE.exec(d);if(!o){g+=d;break}g+=d.substring(0,o.index),d=d.substring(o.index+o[0].length),o[0][0]==="\\"&&o[1]?g+="\\"+String(Number(o[1])+c):(g+=o[0],o[0]==="("&&n++)}return g}).map(r=>`(${r})`).join(t)}const MATCH_NOTHING_RE=/\b\B/,IDENT_RE$2="[a-zA-Z]\\w*",UNDERSCORE_IDENT_RE="[a-zA-Z_]\\w*",NUMBER_RE="\\b\\d+(\\.\\d+)?",C_NUMBER_RE="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",BINARY_NUMBER_RE="\\b(0b[01]+)",RE_STARTERS_RE="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",SHEBANG=(e={})=>{const t=/^#![ ]*\//;return e.binary&&(e.begin=concat(t,/.*\b/,e.binary,/\b.*/)),inherit$1({scope:"meta",begin:t,end:/$/,relevance:0,"on:begin":(n,r)=>{n.index!==0&&r.ignoreMatch()}},e)},BACKSLASH_ESCAPE={begin:"\\\\[\\s\\S]",relevance:0},APOS_STRING_MODE={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[BACKSLASH_ESCAPE]},QUOTE_STRING_MODE={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[BACKSLASH_ESCAPE]},PHRASAL_WORDS_MODE={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},COMMENT=function(e,t,n={}){const r=inherit$1({scope:"comment",begin:e,end:t,contains:[]},n);r.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const c=either("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return r.contains.push({begin:concat(/[ ]+/,"(",c,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),r},C_LINE_COMMENT_MODE=COMMENT("//","$"),C_BLOCK_COMMENT_MODE=COMMENT("/\\*","\\*/"),HASH_COMMENT_MODE=COMMENT("#","$"),NUMBER_MODE={scope:"number",begin:NUMBER_RE,relevance:0},C_NUMBER_MODE={scope:"number",begin:C_NUMBER_RE,relevance:0},BINARY_NUMBER_MODE={scope:"number",begin:BINARY_NUMBER_RE,relevance:0},REGEXP_MODE={begin:/(?=\/[^/\n]*\/)/,contains:[{scope:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[BACKSLASH_ESCAPE]}]}]},TITLE_MODE={scope:"title",begin:IDENT_RE$2,relevance:0},UNDERSCORE_TITLE_MODE={scope:"title",begin:UNDERSCORE_IDENT_RE,relevance:0},METHOD_GUARD={begin:"\\.\\s*"+UNDERSCORE_IDENT_RE,relevance:0},END_SAME_AS_BEGIN=function(e){return Object.assign(e,{"on:begin":(t,n)=>{n.data._beginMatch=t[1]},"on:end":(t,n)=>{n.data._beginMatch!==t[1]&&n.ignoreMatch()}})};var MODES$4=Object.freeze({__proto__:null,MATCH_NOTHING_RE,IDENT_RE:IDENT_RE$2,UNDERSCORE_IDENT_RE,NUMBER_RE,C_NUMBER_RE,BINARY_NUMBER_RE,RE_STARTERS_RE,SHEBANG,BACKSLASH_ESCAPE,APOS_STRING_MODE,QUOTE_STRING_MODE,PHRASAL_WORDS_MODE,COMMENT,C_LINE_COMMENT_MODE,C_BLOCK_COMMENT_MODE,HASH_COMMENT_MODE,NUMBER_MODE,C_NUMBER_MODE,BINARY_NUMBER_MODE,REGEXP_MODE,TITLE_MODE,UNDERSCORE_TITLE_MODE,METHOD_GUARD,END_SAME_AS_BEGIN});function skipIfHasPrecedingDot(e,t){e.input[e.index-1]==="."&&t.ignoreMatch()}function scopeClassName(e,t){e.className!==void 0&&(e.scope=e.className,delete e.className)}function beginKeywords(e,t){!t||!e.beginKeywords||(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=skipIfHasPrecedingDot,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,e.relevance===void 0&&(e.relevance=0))}function compileIllegal(e,t){!Array.isArray(e.illegal)||(e.illegal=either(...e.illegal))}function compileMatch(e,t){if(!!e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function compileRelevance(e,t){e.relevance===void 0&&(e.relevance=1)}const beforeMatchExt=(e,t)=>{if(!e.beforeMatch)return;if(e.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},e);Object.keys(e).forEach(r=>{delete e[r]}),e.keywords=n.keywords,e.begin=concat(n.beforeMatch,lookahead(n.begin)),e.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},e.relevance=0,delete n.beforeMatch},COMMON_KEYWORDS=["of","and","for","in","not","or","if","then","parent","list","value"],DEFAULT_KEYWORD_SCOPE="keyword";function compileKeywords(e,t,n=DEFAULT_KEYWORD_SCOPE){const r=Object.create(null);return typeof e=="string"?c(n,e.split(" ")):Array.isArray(e)?c(n,e):Object.keys(e).forEach(function(d){Object.assign(r,compileKeywords(e[d],t,d))}),r;function c(d,g){t&&(g=g.map(o=>o.toLowerCase())),g.forEach(function(o){const v=o.split("|");r[v[0]]=[d,scoreForKeyword(v[0],v[1])]})}}function scoreForKeyword(e,t){return t?Number(t):commonKeyword(e)?0:1}function commonKeyword(e){return COMMON_KEYWORDS.includes(e.toLowerCase())}const seenDeprecations={},error=e=>{console.error(e)},warn=(e,...t)=>{console.log(`WARN: ${e}`,...t)},deprecated=(e,t)=>{seenDeprecations[`${e}/${t}`]||(console.log(`Deprecated as of ${e}. ${t}`),seenDeprecations[`${e}/${t}`]=!0)},MultiClassError=new Error;function remapScopeNames(e,t,{key:n}){let r=0;const c=e[n],d={},g={};for(let o=1;o<=t.length;o++)g[o+r]=c[o],d[o+r]=!0,r+=countMatchGroups(t[o-1]);e[n]=g,e[n]._emit=d,e[n]._multi=!0}function beginMultiClass(e){if(!!Array.isArray(e.begin)){if(e.skip||e.excludeBegin||e.returnBegin)throw error("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),MultiClassError;if(typeof e.beginScope!="object"||e.beginScope===null)throw error("beginScope must be object"),MultiClassError;remapScopeNames(e,e.begin,{key:"beginScope"}),e.begin=_rewriteBackreferences(e.begin,{joinWith:""})}}function endMultiClass(e){if(!!Array.isArray(e.end)){if(e.skip||e.excludeEnd||e.returnEnd)throw error("skip, excludeEnd, returnEnd not compatible with endScope: {}"),MultiClassError;if(typeof e.endScope!="object"||e.endScope===null)throw error("endScope must be object"),MultiClassError;remapScopeNames(e,e.end,{key:"endScope"}),e.end=_rewriteBackreferences(e.end,{joinWith:""})}}function scopeSugar(e){e.scope&&typeof e.scope=="object"&&e.scope!==null&&(e.beginScope=e.scope,delete e.scope)}function MultiClass(e){scopeSugar(e),typeof e.beginScope=="string"&&(e.beginScope={_wrap:e.beginScope}),typeof e.endScope=="string"&&(e.endScope={_wrap:e.endScope}),beginMultiClass(e),endMultiClass(e)}function compileLanguage(e){function t(g,o){return new RegExp(source(g),"m"+(e.case_insensitive?"i":"")+(e.unicodeRegex?"u":"")+(o?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(o,v){v.position=this.position++,this.matchIndexes[this.matchAt]=v,this.regexes.push([v,o]),this.matchAt+=countMatchGroups(o)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const o=this.regexes.map(v=>v[1]);this.matcherRe=t(_rewriteBackreferences(o,{joinWith:"|"}),!0),this.lastIndex=0}exec(o){this.matcherRe.lastIndex=this.lastIndex;const v=this.matcherRe.exec(o);if(!v)return null;const x=v.findIndex((k,S)=>S>0&&k!==void 0),E=this.matchIndexes[x];return v.splice(0,x),Object.assign(v,E)}}class r{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(o){if(this.multiRegexes[o])return this.multiRegexes[o];const v=new n;return this.rules.slice(o).forEach(([x,E])=>v.addRule(x,E)),v.compile(),this.multiRegexes[o]=v,v}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(o,v){this.rules.push([o,v]),v.type==="begin"&&this.count++}exec(o){const v=this.getMatcher(this.regexIndex);v.lastIndex=this.lastIndex;let x=v.exec(o);if(this.resumingScanAtSamePosition()&&!(x&&x.index===this.lastIndex)){const E=this.getMatcher(0);E.lastIndex=this.lastIndex+1,x=E.exec(o)}return x&&(this.regexIndex+=x.position+1,this.regexIndex===this.count&&this.considerAll()),x}}function c(g){const o=new r;return g.contains.forEach(v=>o.addRule(v.begin,{rule:v,type:"begin"})),g.terminatorEnd&&o.addRule(g.terminatorEnd,{type:"end"}),g.illegal&&o.addRule(g.illegal,{type:"illegal"}),o}function d(g,o){const v=g;if(g.isCompiled)return v;[scopeClassName,compileMatch,MultiClass,beforeMatchExt].forEach(E=>E(g,o)),e.compilerExtensions.forEach(E=>E(g,o)),g.__beforeBegin=null,[beginKeywords,compileIllegal,compileRelevance].forEach(E=>E(g,o)),g.isCompiled=!0;let x=null;return typeof g.keywords=="object"&&g.keywords.$pattern&&(g.keywords=Object.assign({},g.keywords),x=g.keywords.$pattern,delete g.keywords.$pattern),x=x||/\w+/,g.keywords&&(g.keywords=compileKeywords(g.keywords,e.case_insensitive)),v.keywordPatternRe=t(x,!0),o&&(g.begin||(g.begin=/\B|\b/),v.beginRe=t(v.begin),!g.end&&!g.endsWithParent&&(g.end=/\B|\b/),g.end&&(v.endRe=t(v.end)),v.terminatorEnd=source(v.end)||"",g.endsWithParent&&o.terminatorEnd&&(v.terminatorEnd+=(g.end?"|":"")+o.terminatorEnd)),g.illegal&&(v.illegalRe=t(g.illegal)),g.contains||(g.contains=[]),g.contains=[].concat(...g.contains.map(function(E){return expandOrCloneMode(E==="self"?g:E)})),g.contains.forEach(function(E){d(E,v)}),g.starts&&d(g.starts,o),v.matcher=c(v),v}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=inherit$1(e.classNameAliases||{}),d(e)}function dependencyOnParent(e){return e?e.endsWithParent||dependencyOnParent(e.starts):!1}function expandOrCloneMode(e){return e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map(function(t){return inherit$1(e,{variants:null},t)})),e.cachedVariants?e.cachedVariants:dependencyOnParent(e)?inherit$1(e,{starts:e.starts?inherit$1(e.starts):null}):Object.isFrozen(e)?inherit$1(e):e}var version$1="11.7.0";class HTMLInjectionError extends Error{constructor(t,n){super(t),this.name="HTMLInjectionError",this.html=n}}const escape$2=escapeHTML,inherit=inherit$1,NO_MATCH=Symbol("nomatch"),MAX_KEYWORD_HITS=7,HLJS=function(e){const t=Object.create(null),n=Object.create(null),r=[];let c=!0;const d="Could not find the language '{}', did you forget to load/include a language module?",g={disableAutodetect:!0,name:"Plain text",contains:[]};let o={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:TokenTreeEmitter};function v(_e){return o.noHighlightRe.test(_e)}function x(_e){let ke=_e.className+" ";ke+=_e.parentNode?_e.parentNode.className:"";const ze=o.languageDetectRe.exec(ke);if(ze){const nt=ce(ze[1]);return nt||(warn(d.replace("{}",ze[1])),warn("Falling back to no-highlight mode for this block.",_e)),nt?ze[1]:"no-highlight"}return ke.split(/\s+/).find(nt=>v(nt)||ce(nt))}function E(_e,ke,ze){let nt="",mt="";typeof ke=="object"?(nt=_e,ze=ke.ignoreIllegals,mt=ke.language):(deprecated("10.7.0","highlight(lang, code, ...args) has been deprecated."),deprecated("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),mt=_e,nt=ke),ze===void 0&&(ze=!0);const qt={code:nt,language:mt};Fe("before:highlight",qt);const un=qt.result?qt.result:k(qt.language,qt.code,ze);return un.code=qt.code,Fe("after:highlight",un),un}function k(_e,ke,ze,nt){const mt=Object.create(null);function qt(Je,ut){return Je.keywords[ut]}function un(){if(!Ke.keywords){gt.addText(tt);return}let Je=0;Ke.keywordPatternRe.lastIndex=0;let ut=Ke.keywordPatternRe.exec(tt),pt="";for(;ut;){pt+=tt.substring(Je,ut.index);const Xt=Ne.case_insensitive?ut[0].toLowerCase():ut[0],Kt=qt(Ke,Xt);if(Kt){const[yn,Gn]=Kt;if(gt.addText(pt),pt="",mt[Xt]=(mt[Xt]||0)+1,mt[Xt]<=MAX_KEYWORD_HITS&&(kt+=Gn),yn.startsWith("_"))pt+=ut[0];else{const gi=Ne.classNameAliases[yn]||yn;gt.addKeyword(ut[0],gi)}}else pt+=ut[0];Je=Ke.keywordPatternRe.lastIndex,ut=Ke.keywordPatternRe.exec(tt)}pt+=tt.substring(Je),gt.addText(pt)}function fn(){if(tt==="")return;let Je=null;if(typeof Ke.subLanguage=="string"){if(!t[Ke.subLanguage]){gt.addText(tt);return}Je=k(Ke.subLanguage,tt,!0,Rt[Ke.subLanguage]),Rt[Ke.subLanguage]=Je._top}else Je=N(tt,Ke.subLanguage.length?Ke.subLanguage:null);Ke.relevance>0&&(kt+=Je.relevance),gt.addSublanguage(Je._emitter,Je.language)}function vn(){Ke.subLanguage!=null?fn():un(),tt=""}function at(Je,ut){let pt=1;const Xt=ut.length-1;for(;pt<=Xt;){if(!Je._emit[pt]){pt++;continue}const Kt=Ne.classNameAliases[Je[pt]]||Je[pt],yn=ut[pt];Kt?gt.addKeyword(yn,Kt):(tt=yn,un(),tt=""),pt++}}function Ot(Je,ut){return Je.scope&&typeof Je.scope=="string"&&gt.openNode(Ne.classNameAliases[Je.scope]||Je.scope),Je.beginScope&&(Je.beginScope._wrap?(gt.addKeyword(tt,Ne.classNameAliases[Je.beginScope._wrap]||Je.beginScope._wrap),tt=""):Je.beginScope._multi&&(at(Je.beginScope,ut),tt="")),Ke=Object.create(Je,{parent:{value:Ke}}),Ke}function bt(Je,ut,pt){let Xt=startsWith(Je.endRe,pt);if(Xt){if(Je["on:end"]){const Kt=new Response$1(Je);Je["on:end"](ut,Kt),Kt.isMatchIgnored&&(Xt=!1)}if(Xt){for(;Je.endsParent&&Je.parent;)Je=Je.parent;return Je}}if(Je.endsWithParent)return bt(Je.parent,ut,pt)}function jt(Je){return Ke.matcher.regexIndex===0?(tt+=Je[0],1):($t=!0,0)}function gn(Je){const ut=Je[0],pt=Je.rule,Xt=new Response$1(pt),Kt=[pt.__beforeBegin,pt["on:begin"]];for(const yn of Kt)if(!!yn&&(yn(Je,Xt),Xt.isMatchIgnored))return jt(ut);return pt.skip?tt+=ut:(pt.excludeBegin&&(tt+=ut),vn(),!pt.returnBegin&&!pt.excludeBegin&&(tt=ut)),Ot(pt,Je),pt.returnBegin?0:ut.length}function dn(Je){const ut=Je[0],pt=ke.substring(Je.index),Xt=bt(Ke,Je,pt);if(!Xt)return NO_MATCH;const Kt=Ke;Ke.endScope&&Ke.endScope._wrap?(vn(),gt.addKeyword(ut,Ke.endScope._wrap)):Ke.endScope&&Ke.endScope._multi?(vn(),at(Ke.endScope,Je)):Kt.skip?tt+=ut:(Kt.returnEnd||Kt.excludeEnd||(tt+=ut),vn(),Kt.excludeEnd&&(tt=ut));do Ke.scope&&gt.closeNode(),!Ke.skip&&!Ke.subLanguage&&(kt+=Ke.relevance),Ke=Ke.parent;while(Ke!==Xt.parent);return Xt.starts&&Ot(Xt.starts,Je),Kt.returnEnd?0:ut.length}function hn(){const Je=[];for(let ut=Ke;ut!==Ne;ut=ut.parent)ut.scope&&Je.unshift(ut.scope);Je.forEach(ut=>gt.openNode(ut))}let Ht={};function Ee(Je,ut){const pt=ut&&ut[0];if(tt+=Je,pt==null)return vn(),0;if(Ht.type==="begin"&&ut.type==="end"&&Ht.index===ut.index&&pt===""){if(tt+=ke.slice(ut.index,ut.index+1),!c){const Xt=new Error(`0 width match regex (${_e})`);throw Xt.languageName=_e,Xt.badRule=Ht.rule,Xt}return 1}if(Ht=ut,ut.type==="begin")return gn(ut);if(ut.type==="illegal"&&!ze){const Xt=new Error('Illegal lexeme "'+pt+'" for mode "'+(Ke.scope||"<unnamed>")+'"');throw Xt.mode=Ke,Xt}else if(ut.type==="end"){const Xt=dn(ut);if(Xt!==NO_MATCH)return Xt}if(ut.type==="illegal"&&pt==="")return 1;if(Et>1e5&&Et>ut.index*3)throw new Error("potential infinite loop, way more iterations than matches");return tt+=pt,pt.length}const Ne=ce(_e);if(!Ne)throw error(d.replace("{}",_e)),new Error('Unknown language: "'+_e+'"');const et=compileLanguage(Ne);let xt="",Ke=nt||et;const Rt={},gt=new o.__emitter(o);hn();let tt="",kt=0,dt=0,Et=0,$t=!1;try{for(Ke.matcher.considerAll();;){Et++,$t?$t=!1:Ke.matcher.considerAll(),Ke.matcher.lastIndex=dt;const Je=Ke.matcher.exec(ke);if(!Je)break;const ut=ke.substring(dt,Je.index),pt=Ee(ut,Je);dt=Je.index+pt}return Ee(ke.substring(dt)),gt.closeAllNodes(),gt.finalize(),xt=gt.toHTML(),{language:_e,value:xt,relevance:kt,illegal:!1,_emitter:gt,_top:Ke}}catch(Je){if(Je.message&&Je.message.includes("Illegal"))return{language:_e,value:escape$2(ke),illegal:!0,relevance:0,_illegalBy:{message:Je.message,index:dt,context:ke.slice(dt-100,dt+100),mode:Je.mode,resultSoFar:xt},_emitter:gt};if(c)return{language:_e,value:escape$2(ke),illegal:!1,relevance:0,errorRaised:Je,_emitter:gt,_top:Ke};throw Je}}function S(_e){const ke={value:escape$2(_e),illegal:!1,relevance:0,_top:g,_emitter:new o.__emitter(o)};return ke._emitter.addText(_e),ke}function N(_e,ke){ke=ke||o.languages||Object.keys(t);const ze=S(_e),nt=ke.filter(ce).filter(we).map(vn=>k(vn,_e,!1));nt.unshift(ze);const mt=nt.sort((vn,at)=>{if(vn.relevance!==at.relevance)return at.relevance-vn.relevance;if(vn.language&&at.language){if(ce(vn.language).supersetOf===at.language)return 1;if(ce(at.language).supersetOf===vn.language)return-1}return 0}),[qt,un]=mt,fn=qt;return fn.secondBest=un,fn}function L(_e,ke,ze){const nt=ke&&n[ke]||ze;_e.classList.add("hljs"),_e.classList.add(`language-${nt}`)}function P(_e){let ke=null;const ze=x(_e);if(v(ze))return;if(Fe("before:highlightElement",{el:_e,language:ze}),_e.children.length>0&&(o.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(_e)),o.throwUnescapedHTML))throw new HTMLInjectionError("One of your code blocks includes unescaped HTML.",_e.innerHTML);ke=_e;const nt=ke.textContent,mt=ze?E(nt,{language:ze,ignoreIllegals:!0}):N(nt);_e.innerHTML=mt.value,L(_e,ze,mt.language),_e.result={language:mt.language,re:mt.relevance,relevance:mt.relevance},mt.secondBest&&(_e.secondBest={language:mt.secondBest.language,relevance:mt.secondBest.relevance}),Fe("after:highlightElement",{el:_e,result:mt,text:nt})}function O(_e){o=inherit(o,_e)}const V=()=>{W(),deprecated("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function z(){W(),deprecated("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let U=!1;function W(){if(document.readyState==="loading"){U=!0;return}document.querySelectorAll(o.cssSelector).forEach(P)}function Z(){U&&W()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",Z,!1);function re(_e,ke){let ze=null;try{ze=ke(e)}catch(nt){if(error("Language definition for '{}' could not be registered.".replace("{}",_e)),c)error(nt);else throw nt;ze=g}ze.name||(ze.name=_e),t[_e]=ze,ze.rawDefinition=ke.bind(null,e),ze.aliases&&me(ze.aliases,{languageName:_e})}function oe(_e){delete t[_e];for(const ke of Object.keys(n))n[ke]===_e&&delete n[ke]}function se(){return Object.keys(t)}function ce(_e){return _e=(_e||"").toLowerCase(),t[_e]||t[n[_e]]}function me(_e,{languageName:ke}){typeof _e=="string"&&(_e=[_e]),_e.forEach(ze=>{n[ze.toLowerCase()]=ke})}function we(_e){const ke=ce(_e);return ke&&!ke.disableAutodetect}function ae(_e){_e["before:highlightBlock"]&&!_e["before:highlightElement"]&&(_e["before:highlightElement"]=ke=>{_e["before:highlightBlock"](Object.assign({block:ke.el},ke))}),_e["after:highlightBlock"]&&!_e["after:highlightElement"]&&(_e["after:highlightElement"]=ke=>{_e["after:highlightBlock"](Object.assign({block:ke.el},ke))})}function Ce(_e){ae(_e),r.push(_e)}function Fe(_e,ke){const ze=_e;r.forEach(function(nt){nt[ze]&&nt[ze](ke)})}function it(_e){return deprecated("10.7.0","highlightBlock will be removed entirely in v12.0"),deprecated("10.7.0","Please use highlightElement now."),P(_e)}Object.assign(e,{highlight:E,highlightAuto:N,highlightAll:W,highlightElement:P,highlightBlock:it,configure:O,initHighlighting:V,initHighlightingOnLoad:z,registerLanguage:re,unregisterLanguage:oe,listLanguages:se,getLanguage:ce,registerAliases:me,autoDetection:we,inherit,addPlugin:Ce}),e.debugMode=function(){c=!1},e.safeMode=function(){c=!0},e.versionString=version$1,e.regex={concat,lookahead,either,optional,anyNumberOfTimes};for(const _e in MODES$4)typeof MODES$4[_e]=="object"&&deepFreezeEs6.exports(MODES$4[_e]);return Object.assign(e,MODES$4),e};var highlight=HLJS({}),core=highlight;highlight.HighlightJS=highlight;highlight.default=highlight;const HighlightJS=core;function go(e){const d={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:d,illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"string",variants:[e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{begin:e.C_NUMBER_RE+"[i]",relevance:1},e.C_NUMBER_MODE]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[e.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:d,illegal:/["']/}]}]}}const MODES$3=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z][A-Za-z0-9_-]*/}}),TAGS$3=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],MEDIA_FEATURES$3=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],PSEUDO_CLASSES$3=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],PSEUDO_ELEMENTS$3=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],ATTRIBUTES$3=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function css$1(e){const t=e.regex,n=MODES$3(e),r={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},c="and or not only",d=/@-?\w[\w]*(-\w+)*/,g="[a-zA-Z-][a-zA-Z0-9_-]*",o=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,r,n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+g,relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+PSEUDO_CLASSES$3.join("|")+")"},{begin:":(:)?("+PSEUDO_ELEMENTS$3.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+ATTRIBUTES$3.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...o,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...o,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:t.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:d},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:c,attribute:MEDIA_FEATURES$3.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...o,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+TAGS$3.join("|")+")\\b"}]}}function sql(e){const t=e.regex,n=e.COMMENT("--","$"),r={className:"string",variants:[{begin:/'/,end:/'/,contains:[{begin:/''/}]}]},c={begin:/"/,end:/"/,contains:[{begin:/""/}]},d=["true","false","unknown"],g=["double precision","large object","with timezone","without timezone"],o=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],v=["add","asc","collation","desc","final","first","last","view"],x=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],E=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],k=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],S=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],N=E,L=[...x,...v].filter(U=>!E.includes(U)),P={className:"variable",begin:/@[a-z0-9]+/},O={className:"operator",begin:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},V={begin:t.concat(/\b/,t.either(...N),/\s*\(/),relevance:0,keywords:{built_in:N}};function z(U,{exceptions:W,when:Z}={}){const re=Z;return W=W||[],U.map(oe=>oe.match(/\|\d+$/)||W.includes(oe)?oe:re(oe)?`${oe}|0`:oe)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:z(L,{when:U=>U.length<3}),literal:d,type:o,built_in:k},contains:[{begin:t.either(...S),relevance:0,keywords:{$pattern:/[\w\.]+/,keyword:L.concat(S),literal:d,type:o}},{className:"type",begin:t.either(...g)},V,P,r,c,e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,n,O]}}function php(e){const t=e.regex,n=/(?![A-Za-z0-9])(?![$])/,r=t.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,n),c=t.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,n),d={scope:"variable",match:"\\$+"+r},g={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},o={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},v=e.inherit(e.APOS_STRING_MODE,{illegal:null}),x=e.inherit(e.QUOTE_STRING_MODE,{illegal:null,contains:e.QUOTE_STRING_MODE.contains.concat(o)}),E=e.END_SAME_AS_BEGIN({begin:/<<<[ \t]*(\w+)\n/,end:/[ \t]*(\w+)\b/,contains:e.QUOTE_STRING_MODE.contains.concat(o)}),k=`[ 	
]`,S={scope:"string",variants:[x,v,E]},N={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},L=["false","null","true"],P=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],O=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],z={keyword:P,literal:(ae=>{const Ce=[];return ae.forEach(Fe=>{Ce.push(Fe),Fe.toLowerCase()===Fe?Ce.push(Fe.toUpperCase()):Ce.push(Fe.toLowerCase())}),Ce})(L),built_in:O},U=ae=>ae.map(Ce=>Ce.replace(/\|\d+$/,"")),W={variants:[{match:[/new/,t.concat(k,"+"),t.concat("(?!",U(O).join("\\b|"),"\\b)"),c],scope:{1:"keyword",4:"title.class"}}]},Z=t.concat(r,"\\b(?!\\()"),re={variants:[{match:[t.concat(/::/,t.lookahead(/(?!class\b)/)),Z],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[c,t.concat(/::/,t.lookahead(/(?!class\b)/)),Z],scope:{1:"title.class",3:"variable.constant"}},{match:[c,t.concat("::",t.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[c,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},oe={scope:"attr",match:t.concat(r,t.lookahead(":"),t.lookahead(/(?!::)/))},se={relevance:0,begin:/\(/,end:/\)/,keywords:z,contains:[oe,d,re,e.C_BLOCK_COMMENT_MODE,S,N,W]},ce={relevance:0,match:[/\b/,t.concat("(?!fn\\b|function\\b|",U(P).join("\\b|"),"|",U(O).join("\\b|"),"\\b)"),r,t.concat(k,"*"),t.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[se]};se.contains.push(ce);const me=[oe,re,e.C_BLOCK_COMMENT_MODE,S,N,W],we={begin:t.concat(/#\[\s*/,c),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:L,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:L,keyword:["new","array"]},contains:["self",...me]},...me,{scope:"meta",match:c}]};return{case_insensitive:!1,keywords:z,contains:[we,e.HASH_COMMENT_MODE,e.COMMENT("//","$"),e.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:e.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},g,{scope:"variable.language",match:/\$this\b/},d,ce,re,{match:[/const/,/\s/,r],scope:{1:"keyword",3:"variable.constant"}},W,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},e.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:z,contains:["self",d,re,e.C_BLOCK_COMMENT_MODE,S,N]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[e.inherit(e.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},e.UNDERSCORE_TITLE_MODE]},S,N]}}function xml(e){const t=e.regex,n=t.concat(/[\p{L}_]/u,t.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),r=/[\p{L}0-9._:-]+/u,c={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},d={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},g=e.inherit(d,{begin:/\(/,end:/\)/}),o=e.inherit(e.APOS_STRING_MODE,{className:"string"}),v=e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),x={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:r,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[c]},{begin:/'/,end:/'/,contains:[c]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[d,v,o,g,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[d,g,v,o]}]}]},e.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},c,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[v]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[x],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[x],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:t.concat(/</,t.lookahead(t.concat(n,t.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:x}]},{className:"tag",begin:t.concat(/<\//,t.lookahead(t.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function yaml(e){const t="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",r={className:"attr",variants:[{begin:"\\w[\\w :\\/.-]*:(?=[ 	]|$)"},{begin:'"\\w[\\w :\\/.-]*":(?=[ 	]|$)'},{begin:"'\\w[\\w :\\/.-]*':(?=[ 	]|$)"}]},c={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},d={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[e.BACKSLASH_ESCAPE,c]},g=e.inherit(d,{variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),o="[0-9]{4}(-[0-9][0-9]){0,2}",v="([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?",x="(\\.[0-9]*)?",E="([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?",k={className:"number",begin:"\\b"+o+v+x+E+"\\b"},S={end:",",endsWithParent:!0,excludeEnd:!0,keywords:t,relevance:0},N={begin:/\{/,end:/\}/,contains:[S],illegal:"\\n",relevance:0},L={begin:"\\[",end:"\\]",contains:[S],illegal:"\\n",relevance:0},P=[r,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+e.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+e.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},e.HASH_COMMENT_MODE,{beginKeywords:t,keywords:{literal:t}},k,{className:"number",begin:e.C_NUMBER_RE+"\\b",relevance:0},N,L,d],O=[...P];return O.pop(),O.push(g),S.contains=O,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:P}}function json(e){const t={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},n={match:/[{}[\],:]/,className:"punctuation",relevance:0},r=["true","false","null"],c={scope:"literal",beginKeywords:r.join(" ")};return{name:"JSON",keywords:{literal:r},contains:[t,n,e.QUOTE_STRING_MODE,c,e.C_NUMBER_MODE,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}function bash(e){const t=e.regex,n={},r={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[n]}]};Object.assign(n,{className:"variable",variants:[{begin:t.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},r]});const c={className:"subst",begin:/\$\(/,end:/\)/,contains:[e.BACKSLASH_ESCAPE]},d={begin:/<<-?\s*(?=\w+)/,starts:{contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},g={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,n,c]};c.contains.push(g);const o={className:"",begin:/\\"/},v={className:"string",begin:/'/,end:/'/},x={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},e.NUMBER_MODE,n]},E=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],k=e.SHEBANG({binary:`(${E.join("|")})`,relevance:10}),S={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[e.inherit(e.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},N=["if","then","else","elif","fi","for","while","in","do","done","case","esac","function"],L=["true","false"],P={match:/(\/[a-z._-]+)+/},O=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],V=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","type","typeset","ulimit","unalias"],z=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],U=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:N,literal:L,built_in:[...O,...V,"set","shopt",...z,...U]},contains:[k,e.SHEBANG(),S,x,e.HASH_COMMENT_MODE,d,P,g,o,v,n]}}const MODES$2=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z][A-Za-z0-9_-]*/}}),TAGS$2=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],MEDIA_FEATURES$2=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],PSEUDO_CLASSES$2=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],PSEUDO_ELEMENTS$2=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],ATTRIBUTES$2=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse(),PSEUDO_SELECTORS=PSEUDO_CLASSES$2.concat(PSEUDO_ELEMENTS$2);function less(e){const t=MODES$2(e),n=PSEUDO_SELECTORS,r="and or not only",c="[\\w-]+",d="("+c+"|@\\{"+c+"\\})",g=[],o=[],v=function(U){return{className:"string",begin:"~?"+U+".*?"+U}},x=function(U,W,Z){return{className:U,begin:W,relevance:Z}},E={$pattern:/[a-z-]+/,keyword:r,attribute:MEDIA_FEATURES$2.join(" ")},k={begin:"\\(",end:"\\)",contains:o,keywords:E,relevance:0};o.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,v("'"),v('"'),t.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},t.HEXCOLOR,k,x("variable","@@?"+c,10),x("variable","@\\{"+c+"\\}"),x("built_in","~?`[^`]*?`"),{className:"attribute",begin:c+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},t.IMPORTANT,{beginKeywords:"and not"},t.FUNCTION_DISPATCH);const S=o.concat({begin:/\{/,end:/\}/,contains:g}),N={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(o)},L={begin:d+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+ATTRIBUTES$2.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:o}}]},P={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:E,returnEnd:!0,contains:o,relevance:0}},O={className:"variable",variants:[{begin:"@"+c+"\\s*:",relevance:15},{begin:"@"+c}],starts:{end:"[;}]",returnEnd:!0,contains:S}},V={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:d,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,N,x("keyword","all\\b"),x("variable","@\\{"+c+"\\}"),{begin:"\\b("+TAGS$2.join("|")+")\\b",className:"selector-tag"},t.CSS_NUMBER_MODE,x("selector-tag",d,0),x("selector-id","#"+d),x("selector-class","\\."+d,0),x("selector-tag","&",0),t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+PSEUDO_CLASSES$2.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+PSEUDO_ELEMENTS$2.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:S},{begin:"!important"},t.FUNCTION_DISPATCH]},z={begin:c+`:(:)?(${n.join("|")})`,returnBegin:!0,contains:[V]};return g.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,P,O,z,L,V,N,t.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:g}}const MODES$1=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z][A-Za-z0-9_-]*/}}),TAGS$1=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],MEDIA_FEATURES$1=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],PSEUDO_CLASSES$1=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],PSEUDO_ELEMENTS$1=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],ATTRIBUTES$1=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function scss(e){const t=MODES$1(e),n=PSEUDO_ELEMENTS$1,r=PSEUDO_CLASSES$1,c="@[a-z-]+",d="and or not only",o={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,t.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+TAGS$1.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+r.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n.join("|")+")"},o,{begin:/\(/,end:/\)/,contains:[t.CSS_NUMBER_MODE]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+ATTRIBUTES$1.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[t.BLOCK_COMMENT,o,t.HEXCOLOR,t.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.IMPORTANT,t.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:c,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:d,attribute:MEDIA_FEATURES$1.join(" ")},contains:[{begin:c,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},o,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.HEXCOLOR,t.CSS_NUMBER_MODE]},t.FUNCTION_DISPATCH]}}function rust(e){const t=e.regex,n={className:"title.function.invoke",relevance:0,begin:t.concat(/\b/,/(?!let\b)/,e.IDENT_RE,t.lookahead(/\s*\(/))},r="([ui](8|16|32|64|128|size)|f(32|64))?",c=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","unsafe","unsized","use","virtual","where","while","yield"],d=["true","false","Some","None","Ok","Err"],g=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],o=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:e.IDENT_RE+"!?",type:o,keyword:c,literal:d,built_in:g},illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.COMMENT("/\\*","\\*/",{contains:["self"]}),e.inherit(e.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'\\?(x\w{2}|u\w{4}|U\w{8}|.)'/}]},{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*/},{className:"number",variants:[{begin:"\\b0b([01_]+)"+r},{begin:"\\b0o([0-7_]+)"+r},{begin:"\\b0x([A-Fa-f0-9_]+)"+r},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+r}],relevance:0},{begin:[/fn/,/\s+/,e.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,e.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,e.UNDERSCORE_IDENT_RE,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,e.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,e.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"title.class"}},{begin:e.IDENT_RE+"::",keywords:{keyword:"Self",built_in:g,type:o}},{className:"punctuation",begin:"->"},n]}}var decimalDigits="[0-9](_*[0-9])*",frac=`\\.(${decimalDigits})`,hexDigits="[0-9a-fA-F](_*[0-9a-fA-F])*",NUMERIC={className:"number",variants:[{begin:`(\\b(${decimalDigits})((${frac})|\\.)?|(${frac}))[eE][+-]?(${decimalDigits})[fFdD]?\\b`},{begin:`\\b(${decimalDigits})((${frac})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${frac})[fFdD]?\\b`},{begin:`\\b(${decimalDigits})[fFdD]\\b`},{begin:`\\b0[xX]((${hexDigits})\\.?|(${hexDigits})?\\.(${hexDigits}))[pP][+-]?(${decimalDigits})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${hexDigits})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function recurRegex(e,t,n){return n===-1?"":e.replace(t,r=>recurRegex(e,t,n-1))}function java(e){const t=e.regex,n="[\xC0-\u02B8a-zA-Z_$][\xC0-\u02B8a-zA-Z_$0-9]*",r=n+recurRegex("(?:<"+n+"~~~(?:\\s*,\\s*"+n+"~~~)*>)?",/~~~/g,2),v={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},x={className:"meta",begin:"@"+n,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},E={className:"params",begin:/\(/,end:/\)/,keywords:v,relevance:0,contains:[e.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:v,illegal:/<\/|#/,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[e.BACKSLASH_ESCAPE]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[t.concat(/(?!else)/,n),/\s+/,n,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,n],className:{1:"keyword",3:"title.class"},contains:[E,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+r+"\\s+)",e.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:v,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:v,relevance:0,contains:[x,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,NUMERIC,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},NUMERIC,x]}}function shell(e){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function nginx(e){const t=e.regex,n={className:"variable",variants:[{begin:/\$\d+/},{begin:/\$\{\w+\}/},{begin:t.concat(/[$@]/,e.UNDERSCORE_IDENT_RE)}]},c={endsWithParent:!0,keywords:{$pattern:/[a-z_]{2,}|\/dev\/poll/,literal:["on","off","yes","no","true","false","none","blocked","debug","info","notice","warn","error","crit","select","break","last","permanent","redirect","kqueue","rtsig","epoll","poll","/dev/poll"]},relevance:0,illegal:"=>",contains:[e.HASH_COMMENT_MODE,{className:"string",contains:[e.BACKSLASH_ESCAPE,n],variants:[{begin:/"/,end:/"/},{begin:/'/,end:/'/}]},{begin:"([a-z]+):/",end:"\\s",endsWithParent:!0,excludeEnd:!0,contains:[n]},{className:"regexp",contains:[e.BACKSLASH_ESCAPE,n],variants:[{begin:"\\s\\^",end:"\\s|\\{|;",returnEnd:!0},{begin:"~\\*?\\s+",end:"\\s|\\{|;",returnEnd:!0},{begin:"\\*(\\.[a-z\\-]+)+"},{begin:"([a-z\\-]+\\.)+\\*"}]},{className:"number",begin:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{className:"number",begin:"\\b\\d+[kKmMgGdshdwy]?\\b",relevance:0},n]};return{name:"Nginx config",aliases:["nginxconf"],contains:[e.HASH_COMMENT_MODE,{beginKeywords:"upstream location",end:/;|\{/,contains:c.contains,keywords:{section:"upstream location"}},{className:"section",begin:t.concat(e.UNDERSCORE_IDENT_RE+t.lookahead(/\s+\{/)),relevance:0},{begin:t.lookahead(e.UNDERSCORE_IDENT_RE+"\\s"),end:";|\\{",contains:[{className:"attribute",begin:e.UNDERSCORE_IDENT_RE,starts:c}],relevance:0}],illegal:"[^\\s\\}\\{]"}}const MODES=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z][A-Za-z0-9_-]*/}}),TAGS=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],MEDIA_FEATURES=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],PSEUDO_CLASSES=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],PSEUDO_ELEMENTS=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],ATTRIBUTES=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function stylus(e){const t=MODES(e),n="and or not only",r={className:"variable",begin:"\\$"+e.IDENT_RE},c=["charset","css","debug","extend","font-face","for","import","include","keyframes","media","mixin","page","warn","while"],d="(?=[.\\s\\n[:,(])";return{name:"Stylus",aliases:["styl"],case_insensitive:!1,keywords:"if else for in",illegal:"("+["\\?","(\\bReturn\\b)","(\\bEnd\\b)","(\\bend\\b)","(\\bdef\\b)",";","#\\s","\\*\\s","===\\s","\\|","%"].join("|")+")",contains:[e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,t.HEXCOLOR,{begin:"\\.[a-zA-Z][a-zA-Z0-9_-]*"+d,className:"selector-class"},{begin:"#[a-zA-Z][a-zA-Z0-9_-]*"+d,className:"selector-id"},{begin:"\\b("+TAGS.join("|")+")"+d,className:"selector-tag"},{className:"selector-pseudo",begin:"&?:("+PSEUDO_CLASSES.join("|")+")"+d},{className:"selector-pseudo",begin:"&?:(:)?("+PSEUDO_ELEMENTS.join("|")+")"+d},t.ATTRIBUTE_SELECTOR_MODE,{className:"keyword",begin:/@media/,starts:{end:/[{;}]/,keywords:{$pattern:/[a-z-]+/,keyword:n,attribute:MEDIA_FEATURES.join(" ")},contains:[t.CSS_NUMBER_MODE]}},{className:"keyword",begin:"@((-(o|moz|ms|webkit)-)?("+c.join("|")+"))\\b"},r,t.CSS_NUMBER_MODE,{className:"function",begin:"^[a-zA-Z][a-zA-Z0-9_-]*\\(.*\\)",illegal:"[\\n]",returnBegin:!0,contains:[{className:"title",begin:"\\b[a-zA-Z][a-zA-Z0-9_-]*"},{className:"params",begin:/\(/,end:/\)/,contains:[t.HEXCOLOR,r,e.APOS_STRING_MODE,t.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE]}]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+ATTRIBUTES.join("|")+")\\b",starts:{end:/;|$/,contains:[t.HEXCOLOR,r,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,t.CSS_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,t.IMPORTANT,t.FUNCTION_DISPATCH],illegal:/\./,relevance:0}},t.FUNCTION_DISPATCH]}}function python(e){const t=e.regex,n=/[\p{XID_Start}_]\p{XID_Continue}*/u,r=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],o={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:r,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},v={className:"meta",begin:/^(>>>|\.\.\.) /},x={className:"subst",begin:/\{/,end:/\}/,keywords:o,illegal:/#/},E={begin:/\{\{/,relevance:0},k={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,v],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,v],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,v,E,x]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,v,E,x]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[e.BACKSLASH_ESCAPE,E,x]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,E,x]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},S="[0-9](_?[0-9])*",N=`(\\b(${S}))?\\.(${S})|\\b(${S})\\.`,L=`\\b|${r.join("|")}`,P={className:"number",relevance:0,variants:[{begin:`(\\b(${S})|(${N}))[eE][+-]?(${S})[jJ]?(?=${L})`},{begin:`(${N})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${L})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${L})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${L})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${L})`},{begin:`\\b(${S})[jJ](?=${L})`}]},O={className:"comment",begin:t.lookahead(/# type:/),end:/$/,keywords:o,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},V={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:["self",v,P,k,e.HASH_COMMENT_MODE]}]};return x.contains=[k,P,v],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:o,illegal:/(<\/|->|\?)|=>/,contains:[v,P,{begin:/\bself\b/},{beginKeywords:"if",relevance:0},k,O,e.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[V]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[P,V,k]}]}}const IDENT_RE$1="[A-Za-z$_][0-9A-Za-z$_]*",KEYWORDS$1=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],LITERALS$1=["true","false","null","undefined","NaN","Infinity"],TYPES$1=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],ERROR_TYPES$1=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],BUILT_IN_GLOBALS$1=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],BUILT_IN_VARIABLES$1=["arguments","this","super","console","window","document","localStorage","module","global"],BUILT_INS$1=[].concat(BUILT_IN_GLOBALS$1,TYPES$1,ERROR_TYPES$1);function javascript$1(e){const t=e.regex,n=(ke,{after:ze})=>{const nt="</"+ke[0].slice(1);return ke.input.indexOf(nt,ze)!==-1},r=IDENT_RE$1,c={begin:"<>",end:"</>"},d=/<[A-Za-z0-9\\._:-]+\s*\/>/,g={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(ke,ze)=>{const nt=ke[0].length+ke.index,mt=ke.input[nt];if(mt==="<"||mt===","){ze.ignoreMatch();return}mt===">"&&(n(ke,{after:nt})||ze.ignoreMatch());let qt;const un=ke.input.substring(nt);if(qt=un.match(/^\s*=/)){ze.ignoreMatch();return}if((qt=un.match(/^\s+extends\s+/))&&qt.index===0){ze.ignoreMatch();return}}},o={$pattern:IDENT_RE$1,keyword:KEYWORDS$1,literal:LITERALS$1,built_in:BUILT_INS$1,"variable.language":BUILT_IN_VARIABLES$1},v="[0-9](_?[0-9])*",x=`\\.(${v})`,E="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",k={className:"number",variants:[{begin:`(\\b(${E})((${x})|\\.)?|(${x}))[eE][+-]?(${v})\\b`},{begin:`\\b(${E})\\b((${x})\\b|\\.)?|(${x})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},S={className:"subst",begin:"\\$\\{",end:"\\}",keywords:o,contains:[]},N={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,S],subLanguage:"xml"}},L={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,S],subLanguage:"css"}},P={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,S]},V={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},z=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,N,L,P,{match:/\$\d+/},k];S.contains=z.concat({begin:/\{/,end:/\}/,keywords:o,contains:["self"].concat(z)});const U=[].concat(V,S.contains),W=U.concat([{begin:/\(/,end:/\)/,keywords:o,contains:["self"].concat(U)}]),Z={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:W},re={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,t.concat(r,"(",t.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},oe={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...TYPES$1,...ERROR_TYPES$1]}},se={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},ce={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[Z],illegal:/%/},me={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function we(ke){return t.concat("(?!",ke.join("|"),")")}const ae={match:t.concat(/\b/,we([...BUILT_IN_GLOBALS$1,"super","import"]),r,t.lookahead(/\(/)),className:"title.function",relevance:0},Ce={begin:t.concat(/\./,t.lookahead(t.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},Fe={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},Z]},it="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",_e={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(it)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[Z]};return{name:"Javascript",aliases:["js","jsx","mjs","cjs"],keywords:o,exports:{PARAMS_CONTAINS:W,CLASS_REFERENCE:oe},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),se,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,N,L,P,V,{match:/\$\d+/},k,oe,{className:"attr",begin:r+t.lookahead(":"),relevance:0},_e,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[V,e.REGEXP_MODE,{className:"function",begin:it,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:W}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:c.begin,end:c.end},{match:d},{begin:g.begin,"on:begin":g.isTrulyOpeningTag,end:g.end}],subLanguage:"xml",contains:[{begin:g.begin,end:g.end,skip:!0,contains:["self"]}]}]},ce,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[Z,e.inherit(e.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},Ce,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[Z]},ae,me,re,Fe,{match:/\$[(.]/}]}}const IDENT_RE="[A-Za-z$_][0-9A-Za-z$_]*",KEYWORDS=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],LITERALS=["true","false","null","undefined","NaN","Infinity"],TYPES=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],ERROR_TYPES=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],BUILT_IN_GLOBALS=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],BUILT_IN_VARIABLES=["arguments","this","super","console","window","document","localStorage","module","global"],BUILT_INS=[].concat(BUILT_IN_GLOBALS,TYPES,ERROR_TYPES);function javascript(e){const t=e.regex,n=(ke,{after:ze})=>{const nt="</"+ke[0].slice(1);return ke.input.indexOf(nt,ze)!==-1},r=IDENT_RE,c={begin:"<>",end:"</>"},d=/<[A-Za-z0-9\\._:-]+\s*\/>/,g={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(ke,ze)=>{const nt=ke[0].length+ke.index,mt=ke.input[nt];if(mt==="<"||mt===","){ze.ignoreMatch();return}mt===">"&&(n(ke,{after:nt})||ze.ignoreMatch());let qt;const un=ke.input.substring(nt);if(qt=un.match(/^\s*=/)){ze.ignoreMatch();return}if((qt=un.match(/^\s+extends\s+/))&&qt.index===0){ze.ignoreMatch();return}}},o={$pattern:IDENT_RE,keyword:KEYWORDS,literal:LITERALS,built_in:BUILT_INS,"variable.language":BUILT_IN_VARIABLES},v="[0-9](_?[0-9])*",x=`\\.(${v})`,E="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",k={className:"number",variants:[{begin:`(\\b(${E})((${x})|\\.)?|(${x}))[eE][+-]?(${v})\\b`},{begin:`\\b(${E})\\b((${x})\\b|\\.)?|(${x})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},S={className:"subst",begin:"\\$\\{",end:"\\}",keywords:o,contains:[]},N={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,S],subLanguage:"xml"}},L={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,S],subLanguage:"css"}},P={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,S]},V={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},z=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,N,L,P,{match:/\$\d+/},k];S.contains=z.concat({begin:/\{/,end:/\}/,keywords:o,contains:["self"].concat(z)});const U=[].concat(V,S.contains),W=U.concat([{begin:/\(/,end:/\)/,keywords:o,contains:["self"].concat(U)}]),Z={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:W},re={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,t.concat(r,"(",t.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},oe={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...TYPES,...ERROR_TYPES]}},se={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},ce={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[Z],illegal:/%/},me={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function we(ke){return t.concat("(?!",ke.join("|"),")")}const ae={match:t.concat(/\b/,we([...BUILT_IN_GLOBALS,"super","import"]),r,t.lookahead(/\(/)),className:"title.function",relevance:0},Ce={begin:t.concat(/\./,t.lookahead(t.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},Fe={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},Z]},it="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",_e={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(it)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[Z]};return{name:"Javascript",aliases:["js","jsx","mjs","cjs"],keywords:o,exports:{PARAMS_CONTAINS:W,CLASS_REFERENCE:oe},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),se,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,N,L,P,V,{match:/\$\d+/},k,oe,{className:"attr",begin:r+t.lookahead(":"),relevance:0},_e,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[V,e.REGEXP_MODE,{className:"function",begin:it,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:W}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:c.begin,end:c.end},{match:d},{begin:g.begin,"on:begin":g.isTrulyOpeningTag,end:g.end}],subLanguage:"xml",contains:[{begin:g.begin,end:g.end,skip:!0,contains:["self"]}]}]},ce,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[Z,e.inherit(e.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},Ce,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[Z]},ae,me,re,Fe,{match:/\$[(.]/}]}}function typescript(e){const t=javascript(e),n=IDENT_RE,r=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],c={beginKeywords:"namespace",end:/\{/,excludeEnd:!0,contains:[t.exports.CLASS_REFERENCE]},d={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:r},contains:[t.exports.CLASS_REFERENCE]},g={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},o=["type","namespace","interface","public","private","protected","implements","declare","abstract","readonly","enum","override"],v={$pattern:IDENT_RE,keyword:KEYWORDS.concat(o),literal:LITERALS,built_in:BUILT_INS.concat(r),"variable.language":BUILT_IN_VARIABLES},x={className:"meta",begin:"@"+n},E=(S,N,L)=>{const P=S.contains.findIndex(O=>O.label===N);if(P===-1)throw new Error("can not find mode to replace");S.contains.splice(P,1,L)};Object.assign(t.keywords,v),t.exports.PARAMS_CONTAINS.push(x),t.contains=t.contains.concat([x,c,d]),E(t,"shebang",e.SHEBANG()),E(t,"use_strict",g);const k=t.contains.find(S=>S.label==="func.def");return k.relevance=0,Object.assign(t,{name:"TypeScript",aliases:["ts","tsx"]}),t}const languages={go,css:css$1,sql,php,xml,yaml,json,bash,less,scss,rust,java,shell,nginx,stylus,python,javascript:javascript$1,typescript};Object.keys(languages).forEach(e=>HighlightJS.registerLanguage(e,languages[e]));var dist={};Object.defineProperty(dist,"__esModule",{value:!0});var sanitizeUrl_1=dist.sanitizeUrl=void 0,invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,htmlCtrlEntityRegex=/&(newline|tab);/gi,ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,urlSchemeRegex=/^.+(:|&colon;)/gim,relativeFirstCharacters=[".","/"];function isRelativeUrlWithoutProtocol(e){return relativeFirstCharacters.indexOf(e[0])>-1}function decodeHtmlCharacters(e){return e.replace(htmlEntitiesRegex,function(t,n){return String.fromCharCode(n)})}function sanitizeUrl(e){var t=decodeHtmlCharacters(e||"").replace(htmlCtrlEntityRegex,"").replace(ctrlCharactersRegex,"").trim();if(!t)return"about:blank";if(isRelativeUrlWithoutProtocol(t))return t;var n=t.match(urlSchemeRegex);if(!n)return t;var r=n[0];return invalidProtocolRegex.test(r)?"about:blank":t}sanitizeUrl_1=dist.sanitizeUrl=sanitizeUrl;function getDefaults(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let defaults$3=getDefaults();function changeDefaults(e){defaults$3=e}const escapeTest=/[&<>"']/,escapeReplace=new RegExp(escapeTest.source,"g"),escapeTestNoEncode=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode=new RegExp(escapeTestNoEncode.source,"g"),escapeReplacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},getEscapeReplacement=e=>escapeReplacements[e];function escape$1(e,t){if(t){if(escapeTest.test(e))return e.replace(escapeReplace,getEscapeReplacement)}else if(escapeTestNoEncode.test(e))return e.replace(escapeReplaceNoEncode,getEscapeReplacement);return e}const unescapeTest=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function unescape$1(e){return e.replace(unescapeTest,(t,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const caret=/(^|[^\[])\^/g;function edit(e,t){e=typeof e=="string"?e:e.source,t=t||"";const n={replace:(r,c)=>(c=c.source||c,c=c.replace(caret,"$1"),e=e.replace(r,c),n),getRegex:()=>new RegExp(e,t)};return n}const nonWordAndColonTest=/[^\w:]/g,originIndependentUrl=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function cleanUrl(e,t,n){if(e){let r;try{r=decodeURIComponent(unescape$1(n)).replace(nonWordAndColonTest,"").toLowerCase()}catch{return null}if(r.indexOf("javascript:")===0||r.indexOf("vbscript:")===0||r.indexOf("data:")===0)return null}t&&!originIndependentUrl.test(n)&&(n=resolveUrl(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const baseUrls={},justDomain=/^[^:]+:\/*[^/]*$/,protocol=/^([^:]+:)[\s\S]*$/,domain=/^([^:]+:\/*[^/]*)[\s\S]*$/;function resolveUrl(e,t){baseUrls[" "+e]||(justDomain.test(e)?baseUrls[" "+e]=e+"/":baseUrls[" "+e]=rtrim(e,"/",!0)),e=baseUrls[" "+e];const n=e.indexOf(":")===-1;return t.substring(0,2)==="//"?n?t:e.replace(protocol,"$1")+t:t.charAt(0)==="/"?n?t:e.replace(domain,"$1")+t:e+t}const noopTest={exec:function(){}};function merge$1(e){let t=1,n,r;for(;t<arguments.length;t++){n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}function splitCells(e,t){const n=e.replace(/\|/g,(d,g,o)=>{let v=!1,x=g;for(;--x>=0&&o[x]==="\\";)v=!v;return v?"|":" |"}),r=n.split(/ \|/);let c=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;c<r.length;c++)r[c]=r[c].trim().replace(/\\\|/g,"|");return r}function rtrim(e,t,n){const r=e.length;if(r===0)return"";let c=0;for(;c<r;){const d=e.charAt(r-c-1);if(d===t&&!n)c++;else if(d!==t&&n)c++;else break}return e.slice(0,r-c)}function findClosingBracket(e,t){if(e.indexOf(t[1])===-1)return-1;const n=e.length;let r=0,c=0;for(;c<n;c++)if(e[c]==="\\")c++;else if(e[c]===t[0])r++;else if(e[c]===t[1]&&(r--,r<0))return c;return-1}function checkSanitizeDeprecation(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function repeatString(e,t){if(t<1)return"";let n="";for(;t>1;)t&1&&(n+=e),t>>=1,e+=e;return n+e}function outputLink(e,t,n,r){const c=t.href,d=t.title?escape$1(t.title):null,g=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){r.state.inLink=!0;const o={type:"link",raw:n,href:c,title:d,text:g,tokens:r.inlineTokens(g)};return r.state.inLink=!1,o}return{type:"image",raw:n,href:c,title:d,text:escape$1(g)}}function indentCodeCompensation(e,t){const n=e.match(/^(\s+)(?:```)/);if(n===null)return t;const r=n[1];return t.split(`
`).map(c=>{const d=c.match(/^\s+/);if(d===null)return c;const[g]=d;return g.length>=r.length?c.slice(r.length):c}).join(`
`)}class Tokenizer{constructor(t){this.options=t||defaults$3}space(t){const n=this.rules.block.newline.exec(t);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(t){const n=this.rules.block.code.exec(t);if(n){const r=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:rtrim(r,`
`)}}}fences(t){const n=this.rules.block.fences.exec(t);if(n){const r=n[0],c=indentCodeCompensation(r,n[3]||"");return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline._escapes,"$1"):n[2],text:c}}}heading(t){const n=this.rules.block.heading.exec(t);if(n){let r=n[2].trim();if(/#$/.test(r)){const c=rtrim(r,"#");(this.options.pedantic||!c||/ $/.test(c))&&(r=c.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(t){const n=this.rules.block.hr.exec(t);if(n)return{type:"hr",raw:n[0]}}blockquote(t){const n=this.rules.block.blockquote.exec(t);if(n){const r=n[0].replace(/^ *>[ \t]?/gm,""),c=this.lexer.state.top;this.lexer.state.top=!0;const d=this.lexer.blockTokens(r);return this.lexer.state.top=c,{type:"blockquote",raw:n[0],tokens:d,text:r}}}list(t){let n=this.rules.block.list.exec(t);if(n){let r,c,d,g,o,v,x,E,k,S,N,L,P=n[1].trim();const O=P.length>1,V={type:"list",raw:"",ordered:O,start:O?+P.slice(0,-1):"",loose:!1,items:[]};P=O?`\\d{1,9}\\${P.slice(-1)}`:`\\${P}`,this.options.pedantic&&(P=O?P:"[*+-]");const z=new RegExp(`^( {0,3}${P})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;t&&(L=!1,!(!(n=z.exec(t))||this.rules.block.hr.test(t)));){if(r=n[0],t=t.substring(r.length),E=n[2].split(`
`,1)[0],k=t.split(`
`,1)[0],this.options.pedantic?(g=2,N=E.trimLeft()):(g=n[2].search(/[^ ]/),g=g>4?1:g,N=E.slice(g),g+=n[1].length),v=!1,!E&&/^ *$/.test(k)&&(r+=k+`
`,t=t.substring(k.length+1),L=!0),!L){const W=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))`),Z=new RegExp(`^ {0,${Math.min(3,g-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),re=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:\`\`\`|~~~)`),oe=new RegExp(`^ {0,${Math.min(3,g-1)}}#`);for(;t&&(S=t.split(`
`,1)[0],E=S,this.options.pedantic&&(E=E.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(re.test(E)||oe.test(E)||W.test(E)||Z.test(t)));){if(E.search(/[^ ]/)>=g||!E.trim())N+=`
`+E.slice(g);else if(!v)N+=`
`+E;else break;!v&&!E.trim()&&(v=!0),r+=S+`
`,t=t.substring(S.length+1)}}V.loose||(x?V.loose=!0:/\n *\n *$/.test(r)&&(x=!0)),this.options.gfm&&(c=/^\[[ xX]\] /.exec(N),c&&(d=c[0]!=="[ ] ",N=N.replace(/^\[[ xX]\] +/,""))),V.items.push({type:"list_item",raw:r,task:!!c,checked:d,loose:!1,text:N}),V.raw+=r}V.items[V.items.length-1].raw=r.trimRight(),V.items[V.items.length-1].text=N.trimRight(),V.raw=V.raw.trimRight();const U=V.items.length;for(o=0;o<U;o++)if(this.lexer.state.top=!1,V.items[o].tokens=this.lexer.blockTokens(V.items[o].text,[]),!V.loose){const W=V.items[o].tokens.filter(re=>re.type==="space"),Z=W.length>0&&W.some(re=>/\n.*\n/.test(re.raw));V.loose=Z}if(V.loose)for(o=0;o<U;o++)V.items[o].loose=!0;return V}}html(t){const n=this.rules.block.html.exec(t);if(n){const r={type:"html",raw:n[0],pre:!this.options.sanitizer&&(n[1]==="pre"||n[1]==="script"||n[1]==="style"),text:n[0]};if(this.options.sanitize){const c=this.options.sanitizer?this.options.sanitizer(n[0]):escape$1(n[0]);r.type="paragraph",r.text=c,r.tokens=this.lexer.inline(c)}return r}}def(t){const n=this.rules.block.def.exec(t);if(n){const r=n[1].toLowerCase().replace(/\s+/g," "),c=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",d=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline._escapes,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:c,title:d}}}table(t){const n=this.rules.block.table.exec(t);if(n){const r={type:"table",header:splitCells(n[1]).map(c=>({text:c})),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(r.header.length===r.align.length){r.raw=n[0];let c=r.align.length,d,g,o,v;for(d=0;d<c;d++)/^ *-+: *$/.test(r.align[d])?r.align[d]="right":/^ *:-+: *$/.test(r.align[d])?r.align[d]="center":/^ *:-+ *$/.test(r.align[d])?r.align[d]="left":r.align[d]=null;for(c=r.rows.length,d=0;d<c;d++)r.rows[d]=splitCells(r.rows[d],r.header.length).map(x=>({text:x}));for(c=r.header.length,g=0;g<c;g++)r.header[g].tokens=this.lexer.inline(r.header[g].text);for(c=r.rows.length,g=0;g<c;g++)for(v=r.rows[g],o=0;o<v.length;o++)v[o].tokens=this.lexer.inline(v[o].text);return r}}}lheading(t){const n=this.rules.block.lheading.exec(t);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(t){const n=this.rules.block.paragraph.exec(t);if(n){const r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(t){const n=this.rules.block.text.exec(t);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(t){const n=this.rules.inline.escape.exec(t);if(n)return{type:"escape",raw:n[0],text:escape$1(n[1])}}tag(t){const n=this.rules.inline.tag.exec(t);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):escape$1(n[0]):n[0]}}link(t){const n=this.rules.inline.link.exec(t);if(n){const r=n[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const g=rtrim(r.slice(0,-1),"\\");if((r.length-g.length)%2===0)return}else{const g=findClosingBracket(n[2],"()");if(g>-1){const v=(n[0].indexOf("!")===0?5:4)+n[1].length+g;n[2]=n[2].substring(0,g),n[0]=n[0].substring(0,v).trim(),n[3]=""}}let c=n[2],d="";if(this.options.pedantic){const g=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(c);g&&(c=g[1],d=g[3])}else d=n[3]?n[3].slice(1,-1):"";return c=c.trim(),/^</.test(c)&&(this.options.pedantic&&!/>$/.test(r)?c=c.slice(1):c=c.slice(1,-1)),outputLink(n,{href:c&&c.replace(this.rules.inline._escapes,"$1"),title:d&&d.replace(this.rules.inline._escapes,"$1")},n[0],this.lexer)}}reflink(t,n){let r;if((r=this.rules.inline.reflink.exec(t))||(r=this.rules.inline.nolink.exec(t))){let c=(r[2]||r[1]).replace(/\s+/g," ");if(c=n[c.toLowerCase()],!c){const d=r[0].charAt(0);return{type:"text",raw:d,text:d}}return outputLink(r,c,r[0],this.lexer)}}emStrong(t,n,r=""){let c=this.rules.inline.emStrong.lDelim.exec(t);if(!c||c[3]&&r.match(/[\p{L}\p{N}]/u))return;const d=c[1]||c[2]||"";if(!d||d&&(r===""||this.rules.inline.punctuation.exec(r))){const g=c[0].length-1;let o,v,x=g,E=0;const k=c[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(k.lastIndex=0,n=n.slice(-1*t.length+g);(c=k.exec(n))!=null;){if(o=c[1]||c[2]||c[3]||c[4]||c[5]||c[6],!o)continue;if(v=o.length,c[3]||c[4]){x+=v;continue}else if((c[5]||c[6])&&g%3&&!((g+v)%3)){E+=v;continue}if(x-=v,x>0)continue;v=Math.min(v,v+x+E);const S=t.slice(0,g+c.index+(c[0].length-o.length)+v);if(Math.min(g,v)%2){const L=S.slice(1,-1);return{type:"em",raw:S,text:L,tokens:this.lexer.inlineTokens(L)}}const N=S.slice(2,-2);return{type:"strong",raw:S,text:N,tokens:this.lexer.inlineTokens(N)}}}}codespan(t){const n=this.rules.inline.code.exec(t);if(n){let r=n[2].replace(/\n/g," ");const c=/[^ ]/.test(r),d=/^ /.test(r)&&/ $/.test(r);return c&&d&&(r=r.substring(1,r.length-1)),r=escape$1(r,!0),{type:"codespan",raw:n[0],text:r}}}br(t){const n=this.rules.inline.br.exec(t);if(n)return{type:"br",raw:n[0]}}del(t){const n=this.rules.inline.del.exec(t);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(t,n){const r=this.rules.inline.autolink.exec(t);if(r){let c,d;return r[2]==="@"?(c=escape$1(this.options.mangle?n(r[1]):r[1]),d="mailto:"+c):(c=escape$1(r[1]),d=c),{type:"link",raw:r[0],text:c,href:d,tokens:[{type:"text",raw:c,text:c}]}}}url(t,n){let r;if(r=this.rules.inline.url.exec(t)){let c,d;if(r[2]==="@")c=escape$1(this.options.mangle?n(r[0]):r[0]),d="mailto:"+c;else{let g;do g=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0];while(g!==r[0]);c=escape$1(r[0]),r[1]==="www."?d="http://"+r[0]:d=r[0]}return{type:"link",raw:r[0],text:c,href:d,tokens:[{type:"text",raw:c,text:c}]}}}inlineText(t,n){const r=this.rules.inline.text.exec(t);if(r){let c;return this.lexer.state.inRawBlock?c=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):escape$1(r[0]):r[0]:c=escape$1(this.options.smartypants?n(r[0]):r[0]),{type:"text",raw:r[0],text:c}}}}const block={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:noopTest,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};block._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;block._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;block.def=edit(block.def).replace("label",block._label).replace("title",block._title).getRegex();block.bullet=/(?:[*+-]|\d{1,9}[.)])/;block.listItemStart=edit(/^( *)(bull) */).replace("bull",block.bullet).getRegex();block.list=edit(block.list).replace(/bull/g,block.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+block.def.source+")").getRegex();block._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";block._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;block.html=edit(block.html,"i").replace("comment",block._comment).replace("tag",block._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();block.paragraph=edit(block._paragraph).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.blockquote=edit(block.blockquote).replace("paragraph",block.paragraph).getRegex();block.normal=merge$1({},block);block.gfm=merge$1({},block.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});block.gfm.table=edit(block.gfm.table).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.gfm.paragraph=edit(block._paragraph).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",block.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.pedantic=merge$1({},block.normal,{html:edit(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",block._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:noopTest,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:edit(block.normal._paragraph).replace("hr",block.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",block.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const inline={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:noopTest,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:noopTest,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};inline._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";inline.punctuation=edit(inline.punctuation).replace(/punctuation/g,inline._punctuation).getRegex();inline.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;inline.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g;inline._comment=edit(block._comment).replace("(?:-->|$)","-->").getRegex();inline.emStrong.lDelim=edit(inline.emStrong.lDelim).replace(/punct/g,inline._punctuation).getRegex();inline.emStrong.rDelimAst=edit(inline.emStrong.rDelimAst,"g").replace(/punct/g,inline._punctuation).getRegex();inline.emStrong.rDelimUnd=edit(inline.emStrong.rDelimUnd,"g").replace(/punct/g,inline._punctuation).getRegex();inline._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;inline._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;inline._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;inline.autolink=edit(inline.autolink).replace("scheme",inline._scheme).replace("email",inline._email).getRegex();inline._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;inline.tag=edit(inline.tag).replace("comment",inline._comment).replace("attribute",inline._attribute).getRegex();inline._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;inline._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;inline._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;inline.link=edit(inline.link).replace("label",inline._label).replace("href",inline._href).replace("title",inline._title).getRegex();inline.reflink=edit(inline.reflink).replace("label",inline._label).replace("ref",block._label).getRegex();inline.nolink=edit(inline.nolink).replace("ref",block._label).getRegex();inline.reflinkSearch=edit(inline.reflinkSearch,"g").replace("reflink",inline.reflink).replace("nolink",inline.nolink).getRegex();inline.normal=merge$1({},inline);inline.pedantic=merge$1({},inline.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:edit(/^!?\[(label)\]\((.*?)\)/).replace("label",inline._label).getRegex(),reflink:edit(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",inline._label).getRegex()});inline.gfm=merge$1({},inline.normal,{escape:edit(inline.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});inline.gfm.url=edit(inline.gfm.url,"i").replace("email",inline.gfm._extended_email).getRegex();inline.breaks=merge$1({},inline.gfm,{br:edit(inline.br).replace("{2,}","*").getRegex(),text:edit(inline.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function smartypants(e){return e.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function mangle(e){let t="",n,r;const c=e.length;for(n=0;n<c;n++)r=e.charCodeAt(n),Math.random()>.5&&(r="x"+r.toString(16)),t+="&#"+r+";";return t}class Lexer{constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||defaults$3,this.options.tokenizer=this.options.tokenizer||new Tokenizer,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:block.normal,inline:inline.normal};this.options.pedantic?(n.block=block.pedantic,n.inline=inline.pedantic):this.options.gfm&&(n.block=block.gfm,this.options.breaks?n.inline=inline.breaks:n.inline=inline.gfm),this.tokenizer.rules=n}static get rules(){return{block,inline}}static lex(t,n){return new Lexer(n).lex(t)}static lexInline(t,n){return new Lexer(n).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);let n;for(;n=this.inlineQueue.shift();)this.inlineTokens(n.src,n.tokens);return this.tokens}blockTokens(t,n=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(o,v,x)=>v+"    ".repeat(x.length));let r,c,d,g;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(o=>(r=o.call({lexer:this},t,n))?(t=t.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.space(t)){t=t.substring(r.raw.length),r.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(r);continue}if(r=this.tokenizer.code(t)){t=t.substring(r.raw.length),c=n[n.length-1],c&&(c.type==="paragraph"||c.type==="text")?(c.raw+=`
`+r.raw,c.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=c.text):n.push(r);continue}if(r=this.tokenizer.fences(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.heading(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.hr(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.blockquote(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.list(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.html(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.def(t)){t=t.substring(r.raw.length),c=n[n.length-1],c&&(c.type==="paragraph"||c.type==="text")?(c.raw+=`
`+r.raw,c.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=c.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.lheading(t)){t=t.substring(r.raw.length),n.push(r);continue}if(d=t,this.options.extensions&&this.options.extensions.startBlock){let o=1/0;const v=t.slice(1);let x;this.options.extensions.startBlock.forEach(function(E){x=E.call({lexer:this},v),typeof x=="number"&&x>=0&&(o=Math.min(o,x))}),o<1/0&&o>=0&&(d=t.substring(0,o+1))}if(this.state.top&&(r=this.tokenizer.paragraph(d))){c=n[n.length-1],g&&c.type==="paragraph"?(c.raw+=`
`+r.raw,c.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=c.text):n.push(r),g=d.length!==t.length,t=t.substring(r.raw.length);continue}if(r=this.tokenizer.text(t)){t=t.substring(r.raw.length),c=n[n.length-1],c&&c.type==="text"?(c.raw+=`
`+r.raw,c.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=c.text):n.push(r);continue}if(t){const o="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){let r,c,d,g=t,o,v,x;if(this.tokens.links){const E=Object.keys(this.tokens.links);if(E.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(g))!=null;)E.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(g=g.slice(0,o.index)+"["+repeatString("a",o[0].length-2)+"]"+g.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.blockSkip.exec(g))!=null;)g=g.slice(0,o.index)+"["+repeatString("a",o[0].length-2)+"]"+g.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(o=this.tokenizer.rules.inline.escapedEmSt.exec(g))!=null;)g=g.slice(0,o.index+o[0].length-2)+"++"+g.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;t;)if(v||(x=""),v=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(E=>(r=E.call({lexer:this},t,n))?(t=t.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.escape(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.tag(t)){t=t.substring(r.raw.length),c=n[n.length-1],c&&r.type==="text"&&c.type==="text"?(c.raw+=r.raw,c.text+=r.text):n.push(r);continue}if(r=this.tokenizer.link(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(r.raw.length),c=n[n.length-1],c&&r.type==="text"&&c.type==="text"?(c.raw+=r.raw,c.text+=r.text):n.push(r);continue}if(r=this.tokenizer.emStrong(t,g,x)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.codespan(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.br(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.del(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.autolink(t,mangle)){t=t.substring(r.raw.length),n.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(t,mangle))){t=t.substring(r.raw.length),n.push(r);continue}if(d=t,this.options.extensions&&this.options.extensions.startInline){let E=1/0;const k=t.slice(1);let S;this.options.extensions.startInline.forEach(function(N){S=N.call({lexer:this},k),typeof S=="number"&&S>=0&&(E=Math.min(E,S))}),E<1/0&&E>=0&&(d=t.substring(0,E+1))}if(r=this.tokenizer.inlineText(d,smartypants)){t=t.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(x=r.raw.slice(-1)),v=!0,c=n[n.length-1],c&&c.type==="text"?(c.raw+=r.raw,c.text+=r.text):n.push(r);continue}if(t){const E="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(E);break}else throw new Error(E)}}return n}}class Renderer{constructor(t){this.options=t||defaults$3}code(t,n,r){const c=(n||"").match(/\S*/)[0];if(this.options.highlight){const d=this.options.highlight(t,c);d!=null&&d!==t&&(r=!0,t=d)}return t=t.replace(/\n$/,"")+`
`,c?'<pre><code class="'+this.options.langPrefix+escape$1(c)+'">'+(r?t:escape$1(t,!0))+`</code></pre>
`:"<pre><code>"+(r?t:escape$1(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t){return t}heading(t,n,r,c){if(this.options.headerIds){const d=this.options.headerPrefix+c.slug(r);return`<h${n} id="${d}">${t}</h${n}>
`}return`<h${n}>${t}</h${n}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(t,n,r){const c=n?"ol":"ul",d=n&&r!==1?' start="'+r+'"':"";return"<"+c+d+`>
`+t+"</"+c+`>
`}listitem(t){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(t){return`<p>${t}</p>
`}table(t,n){return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+n+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,n){const r=n.header?"th":"td";return(n.align?`<${r} align="${n.align}">`:`<${r}>`)+t+`</${r}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return`<del>${t}</del>`}link(t,n,r){if(t=cleanUrl(this.options.sanitize,this.options.baseUrl,t),t===null)return r;let c='<a href="'+t+'"';return n&&(c+=' title="'+n+'"'),c+=">"+r+"</a>",c}image(t,n,r){if(t=cleanUrl(this.options.sanitize,this.options.baseUrl,t),t===null)return r;let c=`<img src="${t}" alt="${r}"`;return n&&(c+=` title="${n}"`),c+=this.options.xhtml?"/>":">",c}text(t){return t}}class TextRenderer{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,n,r){return""+r}image(t,n,r){return""+r}br(){return""}}class Slugger{constructor(){this.seen={}}serialize(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(t,n){let r=t,c=0;if(this.seen.hasOwnProperty(r)){c=this.seen[t];do c++,r=t+"-"+c;while(this.seen.hasOwnProperty(r))}return n||(this.seen[t]=c,this.seen[r]=0),r}slug(t,n={}){const r=this.serialize(t);return this.getNextSafeSlug(r,n.dryrun)}}class Parser$4{constructor(t){this.options=t||defaults$3,this.options.renderer=this.options.renderer||new Renderer,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new TextRenderer,this.slugger=new Slugger}static parse(t,n){return new Parser$4(n).parse(t)}static parseInline(t,n){return new Parser$4(n).parseInline(t)}parse(t,n=!0){let r="",c,d,g,o,v,x,E,k,S,N,L,P,O,V,z,U,W,Z,re;const oe=t.length;for(c=0;c<oe;c++){if(N=t[c],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[N.type]&&(re=this.options.extensions.renderers[N.type].call({parser:this},N),re!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(N.type))){r+=re||"";continue}switch(N.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{r+=this.renderer.heading(this.parseInline(N.tokens),N.depth,unescape$1(this.parseInline(N.tokens,this.textRenderer)),this.slugger);continue}case"code":{r+=this.renderer.code(N.text,N.lang,N.escaped);continue}case"table":{for(k="",E="",o=N.header.length,d=0;d<o;d++)E+=this.renderer.tablecell(this.parseInline(N.header[d].tokens),{header:!0,align:N.align[d]});for(k+=this.renderer.tablerow(E),S="",o=N.rows.length,d=0;d<o;d++){for(x=N.rows[d],E="",v=x.length,g=0;g<v;g++)E+=this.renderer.tablecell(this.parseInline(x[g].tokens),{header:!1,align:N.align[g]});S+=this.renderer.tablerow(E)}r+=this.renderer.table(k,S);continue}case"blockquote":{S=this.parse(N.tokens),r+=this.renderer.blockquote(S);continue}case"list":{for(L=N.ordered,P=N.start,O=N.loose,o=N.items.length,S="",d=0;d<o;d++)z=N.items[d],U=z.checked,W=z.task,V="",z.task&&(Z=this.renderer.checkbox(U),O?z.tokens.length>0&&z.tokens[0].type==="paragraph"?(z.tokens[0].text=Z+" "+z.tokens[0].text,z.tokens[0].tokens&&z.tokens[0].tokens.length>0&&z.tokens[0].tokens[0].type==="text"&&(z.tokens[0].tokens[0].text=Z+" "+z.tokens[0].tokens[0].text)):z.tokens.unshift({type:"text",text:Z}):V+=Z),V+=this.parse(z.tokens,O),S+=this.renderer.listitem(V,W,U);r+=this.renderer.list(S,L,P);continue}case"html":{r+=this.renderer.html(N.text);continue}case"paragraph":{r+=this.renderer.paragraph(this.parseInline(N.tokens));continue}case"text":{for(S=N.tokens?this.parseInline(N.tokens):N.text;c+1<oe&&t[c+1].type==="text";)N=t[++c],S+=`
`+(N.tokens?this.parseInline(N.tokens):N.text);r+=n?this.renderer.paragraph(S):S;continue}default:{const se='Token with "'+N.type+'" type was not found.';if(this.options.silent){console.error(se);return}else throw new Error(se)}}}return r}parseInline(t,n){n=n||this.renderer;let r="",c,d,g;const o=t.length;for(c=0;c<o;c++){if(d=t[c],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[d.type]&&(g=this.options.extensions.renderers[d.type].call({parser:this},d),g!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(d.type))){r+=g||"";continue}switch(d.type){case"escape":{r+=n.text(d.text);break}case"html":{r+=n.html(d.text);break}case"link":{r+=n.link(d.href,d.title,this.parseInline(d.tokens,n));break}case"image":{r+=n.image(d.href,d.title,d.text);break}case"strong":{r+=n.strong(this.parseInline(d.tokens,n));break}case"em":{r+=n.em(this.parseInline(d.tokens,n));break}case"codespan":{r+=n.codespan(d.text);break}case"br":{r+=n.br();break}case"del":{r+=n.del(this.parseInline(d.tokens,n));break}case"text":{r+=n.text(d.text);break}default:{const v='Token with "'+d.type+'" type was not found.';if(this.options.silent){console.error(v);return}else throw new Error(v)}}}return r}}function marked(e,t,n){if(typeof e>"u"||e===null)throw new Error("marked(): input parameter is undefined or null");if(typeof e!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(typeof t=="function"&&(n=t,t=null),t=merge$1({},marked.defaults,t||{}),checkSanitizeDeprecation(t),n){const c=t.highlight;let d;try{d=Lexer.lex(e,t)}catch(v){return n(v)}const g=function(v){let x;if(!v)try{t.walkTokens&&marked.walkTokens(d,t.walkTokens),x=Parser$4.parse(d,t)}catch(E){v=E}return t.highlight=c,v?n(v):n(null,x)};if(!c||c.length<3||(delete t.highlight,!d.length))return g();let o=0;marked.walkTokens(d,function(v){v.type==="code"&&(o++,setTimeout(()=>{c(v.text,v.lang,function(x,E){if(x)return g(x);E!=null&&E!==v.text&&(v.text=E,v.escaped=!0),o--,o===0&&g()})},0))}),o===0&&g();return}function r(c){if(c.message+=`
Please report this to https://github.com/markedjs/marked.`,t.silent)return"<p>An error occurred:</p><pre>"+escape$1(c.message+"",!0)+"</pre>";throw c}try{const c=Lexer.lex(e,t);if(t.walkTokens){if(t.async)return Promise.all(marked.walkTokens(c,t.walkTokens)).then(()=>Parser$4.parse(c,t)).catch(r);marked.walkTokens(c,t.walkTokens)}return Parser$4.parse(c,t)}catch(c){r(c)}}marked.options=marked.setOptions=function(e){return merge$1(marked.defaults,e),changeDefaults(marked.defaults),marked};marked.getDefaults=getDefaults;marked.defaults=defaults$3;marked.use=function(...e){const t=marked.defaults.extensions||{renderers:{},childTokens:{}};e.forEach(n=>{const r=merge$1({},n);if(r.async=marked.defaults.async||r.async,n.extensions&&(n.extensions.forEach(c=>{if(!c.name)throw new Error("extension name required");if(c.renderer){const d=t.renderers[c.name];d?t.renderers[c.name]=function(...g){let o=c.renderer.apply(this,g);return o===!1&&(o=d.apply(this,g)),o}:t.renderers[c.name]=c.renderer}if(c.tokenizer){if(!c.level||c.level!=="block"&&c.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");t[c.level]?t[c.level].unshift(c.tokenizer):t[c.level]=[c.tokenizer],c.start&&(c.level==="block"?t.startBlock?t.startBlock.push(c.start):t.startBlock=[c.start]:c.level==="inline"&&(t.startInline?t.startInline.push(c.start):t.startInline=[c.start]))}c.childTokens&&(t.childTokens[c.name]=c.childTokens)}),r.extensions=t),n.renderer){const c=marked.defaults.renderer||new Renderer;for(const d in n.renderer){const g=c[d];c[d]=(...o)=>{let v=n.renderer[d].apply(c,o);return v===!1&&(v=g.apply(c,o)),v}}r.renderer=c}if(n.tokenizer){const c=marked.defaults.tokenizer||new Tokenizer;for(const d in n.tokenizer){const g=c[d];c[d]=(...o)=>{let v=n.tokenizer[d].apply(c,o);return v===!1&&(v=g.apply(c,o)),v}}r.tokenizer=c}if(n.walkTokens){const c=marked.defaults.walkTokens;r.walkTokens=function(d){let g=[];return g.push(n.walkTokens.call(this,d)),c&&(g=g.concat(c.call(this,d))),g}}marked.setOptions(r)})};marked.walkTokens=function(e,t){let n=[];for(const r of e)switch(n=n.concat(t.call(marked,r)),r.type){case"table":{for(const c of r.header)n=n.concat(marked.walkTokens(c.tokens,t));for(const c of r.rows)for(const d of c)n=n.concat(marked.walkTokens(d.tokens,t));break}case"list":{n=n.concat(marked.walkTokens(r.items,t));break}default:marked.defaults.extensions&&marked.defaults.extensions.childTokens&&marked.defaults.extensions.childTokens[r.type]?marked.defaults.extensions.childTokens[r.type].forEach(function(c){n=n.concat(marked.walkTokens(r[c],t))}):r.tokens&&(n=n.concat(marked.walkTokens(r.tokens,t)))}return n};marked.parseInline=function(e,t){if(typeof e>"u"||e===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof e!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");t=merge$1({},marked.defaults,t||{}),checkSanitizeDeprecation(t);try{const n=Lexer.lexInline(e,t);return t.walkTokens&&marked.walkTokens(n,t.walkTokens),Parser$4.parseInline(n,t)}catch(n){if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t.silent)return"<p>An error occurred:</p><pre>"+escape$1(n.message+"",!0)+"</pre>";throw n}};marked.Parser=Parser$4;marked.parser=Parser$4.parse;marked.Renderer=Renderer;marked.TextRenderer=TextRenderer;marked.Lexer=Lexer;marked.lexer=Lexer.lex;marked.Tokenizer=Tokenizer;marked.Slugger=Slugger;marked.parse=marked;marked.options;marked.setOptions;marked.use;marked.walkTokens;marked.parseInline;Parser$4.parse;Lexer.lex;const verseConfig={transform(e){return e.startsWith("<verse ")?e.replace("<verse ",'<p class="verse" '):e.startsWith("</verse>")?e.replace("</verse>","</p>"):e}},CUSTOM_ELEMENTS={verse:verseConfig},CUSTOM_ELEMENT_LIST=Object.values(CUSTOM_ELEMENTS);/*! lozad.js - v1.16.0 - 2020-09-06
* https://github.com/ApoorvSaxena/lozad.js
* Copyright (c) 2020 Apoorv Saxena; Licensed MIT */const isIE=typeof document<"u"&&document.documentMode,defaultConfig={rootMargin:"0px",threshold:0,load(e){if(e.nodeName.toLowerCase()==="picture"){let n=e.querySelector("img"),r=!1;n===null&&(n=document.createElement("img"),r=!0),isIE&&e.getAttribute("data-iesrc")&&(n.src=e.getAttribute("data-iesrc")),e.getAttribute("data-alt")&&(n.alt=e.getAttribute("data-alt")),r&&e.append(n)}if(e.nodeName.toLowerCase()==="video"&&!e.getAttribute("data-src")&&e.children){const n=e.children;let r;for(let c=0;c<=n.length-1;c++)r=n[c].getAttribute("data-src"),r&&(n[c].src=r);e.load()}e.getAttribute("data-poster")&&(e.poster=e.getAttribute("data-poster")),e.getAttribute("data-src")&&(e.src=e.getAttribute("data-src")),e.getAttribute("data-srcset")&&e.setAttribute("srcset",e.getAttribute("data-srcset"));let t=",";if(e.getAttribute("data-background-delimiter")&&(t=e.getAttribute("data-background-delimiter")),e.getAttribute("data-background-image"))e.style.backgroundImage=`url('${e.getAttribute("data-background-image").split(t).join("'),url('")}')`;else if(e.getAttribute("data-background-image-set")){const n=e.getAttribute("data-background-image-set").split(t);let r=n[0].substr(0,n[0].indexOf(" "))||n[0];r=r.indexOf("url(")===-1?`url(${r})`:r,n.length===1?e.style.backgroundImage=r:e.setAttribute("style",(e.getAttribute("style")||"")+`background-image: ${r}; background-image: -webkit-image-set(${n}); background-image: image-set(${n})`)}e.getAttribute("data-toggle-class")&&e.classList.toggle(e.getAttribute("data-toggle-class"))},loaded(){}};function markAsLoaded(e){e.setAttribute("data-loaded",!0)}function preLoad(e){e.getAttribute("data-placeholder-background")&&(e.style.background=e.getAttribute("data-placeholder-background"))}const isLoaded=e=>e.getAttribute("data-loaded")==="true",onIntersection=(e,t)=>(n,r)=>{n.forEach(c=>{(c.intersectionRatio>0||c.isIntersecting)&&(r.unobserve(c.target),isLoaded(c.target)||(e(c.target),markAsLoaded(c.target),t(c.target)))})},getElements=(e,t=document)=>e instanceof Element?[e]:e instanceof NodeList?e:t.querySelectorAll(e);function lozad(e=".lozad",t={}){const{root:n,rootMargin:r,threshold:c,load:d,loaded:g}=Object.assign({},defaultConfig,t);let o;typeof window<"u"&&window.IntersectionObserver&&(o=new IntersectionObserver(onIntersection(d,g),{root:n,rootMargin:r,threshold:c}));const v=getElements(e,n);for(let x=0;x<v.length;x++)preLoad(v[x]);return{observe(){const x=getElements(e,n);for(let E=0;E<x.length;E++)if(!isLoaded(x[E])){if(o){o.observe(x[E]);continue}d(x[E]),markAsLoaded(x[E]),g(x[E])}},triggerLoad(x){isLoaded(x)||(d(x),markAsLoaded(x),g(x))},observer:o}}const LOZAD_CLASS_NAME="lozad",LOADED_CLASS_NAME="loaded",lozadObserve=e=>{const t=lozad(e,{loaded:n=>n.classList.add(LOADED_CLASS_NAME)});return t.observe(),t},useLozad=e=>{const t=ref(),n=ref(null),r=()=>{var o;const d=(e==null?void 0:e.className)||LOZAD_CLASS_NAME,g=((o=e==null?void 0:e.elementor)==null?void 0:o.call(e))||t.value;if(g!=null&&g.querySelectorAll){const v=g.querySelectorAll(`.${d}`);v!=null&&v.length&&(n.value=lozadObserve(v))}},c=()=>{n.value&&(n.value.observer.disconnect(),n.value=null)};return onMounted(()=>{var d;((d=e==null?void 0:e.immediate)==null||d)&&r()}),onBeforeUnmount(()=>{c()}),{element:t,observer:n,observe:r,unobserve:c}},isValidDateParam=e=>{const t=e.split("-");if(t.length!==3||!t.every(d=>Number.isInteger(Number(d))))return!1;const[n,r,c]=t;return!(n.length!==4||r.length!==2||c.length!==2)};var NEWTON_ITERATIONS=4,NEWTON_MIN_SLOPE=.001,SUBDIVISION_PRECISION=1e-7,SUBDIVISION_MAX_ITERATIONS=10,kSplineTableSize=11,kSampleStepSize=1/(kSplineTableSize-1),float32ArraySupported=typeof Float32Array=="function";function A(e,t){return 1-3*t+3*e}function B(e,t){return 3*t-6*e}function C(e){return 3*e}function calcBezier(e,t,n){return((A(t,n)*e+B(t,n))*e+C(t))*e}function getSlope(e,t,n){return 3*A(t,n)*e*e+2*B(t,n)*e+C(t)}function binarySubdivide(e,t,n,r,c){var d,g,o=0;do g=t+(n-t)/2,d=calcBezier(g,r,c)-e,d>0?n=g:t=g;while(Math.abs(d)>SUBDIVISION_PRECISION&&++o<SUBDIVISION_MAX_ITERATIONS);return g}function newtonRaphsonIterate(e,t,n,r){for(var c=0;c<NEWTON_ITERATIONS;++c){var d=getSlope(t,n,r);if(d===0)return t;var g=calcBezier(t,n,r)-e;t-=g/d}return t}function LinearEasing(e){return e}var src$1=function(t,n,r,c){if(!(0<=t&&t<=1&&0<=r&&r<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===n&&r===c)return LinearEasing;for(var d=float32ArraySupported?new Float32Array(kSplineTableSize):new Array(kSplineTableSize),g=0;g<kSplineTableSize;++g)d[g]=calcBezier(g*kSampleStepSize,t,r);function o(v){for(var x=0,E=1,k=kSplineTableSize-1;E!==k&&d[E]<=v;++E)x+=kSampleStepSize;--E;var S=(v-d[E])/(d[E+1]-d[E]),N=x+S*kSampleStepSize,L=getSlope(N,t,r);return L>=NEWTON_MIN_SLOPE?newtonRaphsonIterate(v,N,t,r):L===0?N:binarySubdivide(v,x,x+kSampleStepSize,t,r)}return function(x){return x===0?0:x===1?1:calcBezier(o(x),n,c)}};const Easing={ease:[.25,.1,.25,1],linear:[0,0,1,1],easeIn:[.42,0,1,1],easeOut:[0,0,.58,1],easeInOut:[.42,0,.58,1]},triggerEvents=["scroll","mousedown","wheel","DOMMouseScroll","mousewheel","keyup","touchmove"],listener={on(e,t,n){t.forEach(r=>{e.addEventListener(r,n,{passive:!0})})},off(e,t,n){t.forEach(r=>{e.removeEventListener(r,n)})}},scrollToElement=e=>{var z,U,W;const{target:t,onCancel:n,onDone:r}=e,c=(z=e.offset)!=null?z:0,d=(U=e.duration)!=null?U:500,g=(W=e.easing)!=null?W:Easing.ease,o=typeof t=="string"?document.querySelector(t):t,v=document.body;let x=!1;const E=()=>{x=!0};listener.on(v,triggerEvents,E);const k=()=>{listener.off(v,triggerEvents,E),x?n==null||n():r==null||r()},S=window.pageYOffset,N=S+o.getBoundingClientRect().top,P=(document.body.scrollHeight-N<window.innerHeight?document.body.scrollHeight-window.innerHeight:N)+c-S;if(!P)return;const O=Reflect.apply(src$1,src$1,g);let V;window.requestAnimationFrame(function Z(re){if(x)return k();V||(V=re);const oe=re-V;let se=Math.min(oe/d,1);se=O(se),window.scrollTo(0,S+P*se),oe<d?window.requestAnimationFrame(Z):k()})},scrollToAnchor=(e,t)=>{const n=document.getElementById(e);n&&scrollToElement({target:n,duration:200,offset:t!=null?t:-74})},scrollToPageTop=()=>{scrollToElement({target:document.body,duration:280,offset:0,easing:Easing.ease})},scrollToNextScreen=()=>{nextTick$1(()=>{scrollToElement({target:document.body,offset:window.scrollY+window.innerHeight*.68,duration:300,easing:Easing.easeIn})})},I18nSymbol=Symbol("i18n"),createI18nStore=e=>{const t=ref(e.default),n=e.languages.map(v=>v.code),r=computed(()=>e.languages.find(v=>v.code===t.value)),c=e.keys.reduce((v,x)=>({...v,[x]:e.languages.reduce((E,k)=>({...E,[k.code]:k.data[x]}),{})}),{}),d=v=>{n.includes(v)&&t.value!==v&&(t.value=v)},g=()=>{const v=n.findIndex(E=>E===t.value),x=v<n.length-1?v+1:0;v!==x&&d(n[x])},o=(v,x,...E)=>{var S;const k=(S=c[v])==null?void 0:S[x!=null?x:t.value];if(!!k)return typeof k=="string"?k:k(...E)};return{language:readonly(t),l:r,set:d,toggle:g,translate:o,t:o}},createI18n=e=>{const t=createI18nStore(e),n=defineComponent({name:"I18n",props:{k:[String,Number,Symbol]},render(){var r,c;if(this.$props.k)return t.t(this.$props.k,null,this.$attrs);{const d=t.language.value;return this.$attrs[d]||((c=(r=this.$slots)[d])==null?void 0:c.call(r))}}});return{...t,install(r){r.config.globalProperties.$i18n=t,r.provide(I18nSymbol,t),r.component(n.name,n)}}},useI18n=()=>inject(I18nSymbol);function flatHooks(e,t={},n){for(const r in e){const c=e[r],d=n?`${n}:${r}`:r;typeof c=="object"&&c!==null?flatHooks(c,t,d):typeof c=="function"&&(t[d]=c)}return t}function serialCaller(e,t){return e.reduce((n,r)=>n.then(()=>r.apply(void 0,t)),Promise.resolve())}function parallelCaller(e,t){return Promise.all(e.map(n=>n.apply(void 0,t)))}function callEachWith(e,t){for(const n of e)n(t)}class Hookable{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(t,n,r={}){if(!t||typeof n!="function")return()=>{};const c=t;let d;for(;this._deprecatedHooks[t];)d=this._deprecatedHooks[t],t=d.to;if(d&&!r.allowDeprecated){let g=d.message;g||(g=`${c} hook has been deprecated`+(d.to?`, please use ${d.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(g)||(console.warn(g),this._deprecatedMessages.add(g))}return this._hooks[t]=this._hooks[t]||[],this._hooks[t].push(n),()=>{n&&(this.removeHook(t,n),n=void 0)}}hookOnce(t,n){let r,c=(...d)=>(typeof r=="function"&&r(),r=void 0,c=void 0,n(...d));return r=this.hook(t,c),r}removeHook(t,n){if(this._hooks[t]){const r=this._hooks[t].indexOf(n);r!==-1&&this._hooks[t].splice(r,1),this._hooks[t].length===0&&delete this._hooks[t]}}deprecateHook(t,n){this._deprecatedHooks[t]=typeof n=="string"?{to:n}:n;const r=this._hooks[t]||[];this._hooks[t]=void 0;for(const c of r)this.hook(t,c)}deprecateHooks(t){Object.assign(this._deprecatedHooks,t);for(const n in t)this.deprecateHook(n,t[n])}addHooks(t){const n=flatHooks(t),r=Object.keys(n).map(c=>this.hook(c,n[c]));return()=>{for(const c of r.splice(0,r.length))c()}}removeHooks(t){const n=flatHooks(t);for(const r in n)this.removeHook(r,n[r])}callHook(t,...n){return this.callHookWith(serialCaller,t,...n)}callHookParallel(t,...n){return this.callHookWith(parallelCaller,t,...n)}callHookWith(t,n,...r){const c=this._before||this._after?{name:n,args:r,context:{}}:void 0;this._before&&callEachWith(this._before,c);const d=t(this._hooks[n]||[],r);return d instanceof Promise?d.finally(()=>{this._after&&c&&callEachWith(this._after,c)}):(this._after&&c&&callEachWith(this._after,c),d)}beforeEach(t){return this._before=this._before||[],this._before.push(t),()=>{const n=this._before.indexOf(t);n!==-1&&this._before.splice(n,1)}}afterEach(t){return this._after=this._after||[],this._after.push(t),()=>{const n=this._after.indexOf(t);n!==-1&&this._after.splice(n,1)}}}function createHooks(){return new Hookable}const TagsWithInnerContent$1=["script","style","noscript"],HasElementTags$1=["base","meta","link","style","script","noscript"],UniqueTags$1=["base","title","titleTemplate","bodyAttrs","htmlAttrs"];function tagDedupeKey$1(e,t){const{props:n,tag:r}=e;if(UniqueTags$1.includes(r))return r;if(r==="link"&&n.rel==="canonical")return"canonical";if(n.charset)return"charset";const c=["id"];r==="meta"&&c.push("name","property","http-equiv");for(const d of c)if(typeof n[d]<"u"){const g=String(n[d]);return t&&!t(g)?!1:`${r}:${d}:${g}`}return!1}const setAttrs$1=(e,t)=>{const{tag:n,$el:r}=e;!r||(Object.entries(n.props).forEach(([c,d])=>{d=String(d);const g=`attr:${c}`;if(c==="class"){if(!d)return;for(const o of d.split(" ")){const v=`${g}:${o}`;t&&t(e,v,()=>r.classList.remove(o)),r.classList.contains(o)||r.classList.add(o)}return}t&&!c.startsWith("data-h-")&&t(e,g,()=>r.removeAttribute(c)),r.getAttribute(c)!==d&&r.setAttribute(c,d)}),TagsWithInnerContent$1.includes(n.tag)&&r.innerHTML!==(n.children||"")&&(r.innerHTML=n.children||""))};function hashCode$1(e){let t=9;for(let n=0;n<e.length;)t=Math.imul(t^e.charCodeAt(n++),9**9);return((t^t>>>9)+65536).toString(16).substring(1,8).toLowerCase()}async function renderDOMHead$1(e,t={}){var E,k;const n={shouldRender:!0};if(await e.hooks.callHook("dom:beforeRender",n),!n.shouldRender)return;const r=t.document||window.document,c=e._popSideEffectQueue();e.headEntries().map(S=>S._sde).forEach(S=>{Object.entries(S).forEach(([N,L])=>{c[N]=L})});const d=async S=>{const N=e.headEntries().find(P=>P._i===S._e),L={renderId:S._d||hashCode$1(JSON.stringify({...S,_e:void 0,_p:void 0})),$el:null,shouldRender:!0,tag:S,entry:N,staleSideEffects:c};return await e.hooks.callHook("dom:beforeRenderTag",L),L},g=[],o={body:[],head:[]},v=(S,N,L)=>{N=`${S.renderId}:${N}`,S.entry&&(S.entry._sde[N]=L),delete c[N]},x=S=>{e._elMap[S.renderId]=S.$el,g.push(S),v(S,"el",()=>{var N;(N=S.$el)==null||N.remove(),delete e._elMap[S.renderId]})};for(const S of await e.resolveTags()){const N=await d(S);if(!N.shouldRender)continue;const{tag:L}=N;if(L.tag==="title"){r.title=L.children||"",g.push(N);continue}if(L.tag==="htmlAttrs"||L.tag==="bodyAttrs"){N.$el=r[L.tag==="htmlAttrs"?"documentElement":"body"],setAttrs$1(N,v),g.push(N);continue}if(N.$el=e._elMap[N.renderId],!N.$el&&L._hash&&(N.$el=r.querySelector(`${(E=L.tagPosition)!=null&&E.startsWith("body")?"body":"head"} > ${L.tag}[data-h-${L._hash}]`)),N.$el){N.tag._d&&setAttrs$1(N),x(N);continue}N.$el=r.createElement(L.tag),setAttrs$1(N),o[(k=L.tagPosition)!=null&&k.startsWith("body")?"body":"head"].push(N)}Object.entries(o).forEach(([S,N])=>{if(!!N.length){for(const L of[...r[S].children].reverse()){const P=L.tagName.toLowerCase();if(!HasElementTags$1.includes(P))continue;const O=tagDedupeKey$1({tag:P,props:L.getAttributeNames().reduce((z,U)=>({...z,[U]:L.getAttribute(U)}),{})}),V=N.findIndex(z=>z&&(z.tag._d===O||L.isEqualNode(z.$el)));if(V!==-1){const z=N[V];z.$el=L,setAttrs$1(z),x(z),delete N[V]}}N.forEach(L=>{if(!!L.$el){switch(L.tag.tagPosition){case"bodyClose":r.body.appendChild(L.$el);break;case"bodyOpen":r.body.insertBefore(L.$el,r.body.firstChild);break;case"head":default:r.head.appendChild(L.$el);break}x(L)}})}});for(const S of g)await e.hooks.callHook("dom:renderTag",S);Object.values(c).forEach(S=>S())}let domUpdatePromise$1=null;async function debouncedRenderDOMHead$1(e,t={}){function n(){return domUpdatePromise$1=null,renderDOMHead$1(e,t)}const r=t.delayFn||(c=>setTimeout(c,10));return domUpdatePromise$1=domUpdatePromise$1||new Promise(c=>r(()=>c(n())))}const index$1={__proto__:null,debouncedRenderDOMHead:debouncedRenderDOMHead$1,get domUpdatePromise(){return domUpdatePromise$1},hashCode:hashCode$1,renderDOMHead:renderDOMHead$1},ValidHeadTags=["title","titleTemplate","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"],TagConfigKeys=["tagPosition","tagPriority","tagDuplicateStrategy"];async function normaliseTag(e,t){const n={tag:e,props:{}};return e==="title"||e==="titleTemplate"?(n.children=t instanceof Promise?await t:t,n):(n.props=await normaliseProps({...t}),["children","innerHtml","innerHTML"].forEach(r=>{typeof n.props[r]<"u"&&(n.children=n.props[r],typeof n.children=="object"&&(n.children=JSON.stringify(n.children)),delete n.props[r])}),Object.keys(n.props).filter(r=>TagConfigKeys.includes(r)).forEach(r=>{n[r]=n.props[r],delete n.props[r]}),typeof n.props.class=="object"&&!Array.isArray(n.props.class)&&(n.props.class=Object.keys(n.props.class).filter(r=>n.props.class[r])),Array.isArray(n.props.class)&&(n.props.class=n.props.class.join(" ")),n.props.content&&Array.isArray(n.props.content)?n.props.content.map((r,c)=>{const d={...n,props:{...n.props}};return d.props.content=r,d.key=`${n.props.name||n.props.property}:${c}`,d}):n)}async function normaliseProps(e){for(const t of Object.keys(e))e[t]instanceof Promise&&(e[t]=await e[t]),String(e[t])==="true"?e[t]="":String(e[t])==="false"&&delete e[t];return e}const tagWeight=e=>{if(typeof e.tagPriority=="number")return e.tagPriority;switch(e.tagPriority){case"critical":return 2;case"high":return 9;case"low":return 12}switch(e.tag){case"base":return-1;case"title":return 1;case"meta":return e.props.charset?-2:e.props["http-equiv"]==="content-security-policy"?0:10;default:return 10}},sortTags=(e,t)=>tagWeight(e)-tagWeight(t),UniqueTags$2=["base","title","titleTemplate","bodyAttrs","htmlAttrs"];function tagDedupeKey$2(e,t){const{props:n,tag:r}=e;if(UniqueTags$2.includes(r))return r;if(r==="link"&&n.rel==="canonical")return"canonical";if(n.charset)return"charset";const c=["id"];r==="meta"&&c.push("name","property","http-equiv");for(const d of c)if(typeof n[d]<"u"){const g=String(n[d]);return t&&!t(g)?!1:`${r}:${d}:${g}`}return!1}const renderTitleTemplate=(e,t)=>e==null?t||null:typeof e=="function"?e(t):e.replace("%s",t!=null?t:"");function resolveTitleTemplateFromTags(e){let t=e.findIndex(r=>r.tag==="titleTemplate");const n=e.findIndex(r=>r.tag==="title");if(n!==-1&&t!==-1){const r=renderTitleTemplate(e[t].children,e[n].children);r!==null?e[n].children=r||e[n].children:delete e[n]}else if(t!==-1){const r=renderTitleTemplate(e[t].children);r!==null&&(e[t].children=r,e[t].tag="title",t=-1)}return t!==-1&&delete e[t],e.filter(Boolean)}const DedupesTagsPlugin=e=>{e=e||{};const t=e.dedupeKeys||["hid","vmid","key"];return{hooks:{"tag:normalise":function({tag:n}){t.forEach(c=>{n.props[c]&&(n.key=n.props[c],delete n.props[c])});const r=n.key?`${n.tag}:${n.key}`:tagDedupeKey$2(n);r&&(n._d=r)},"tags:resolve":function(n){const r={};n.tags.forEach(c=>{let d=c._d||c._p;const g=r[d];if(g){let o=c==null?void 0:c.tagDuplicateStrategy;if(!o&&(c.tag==="htmlAttrs"||c.tag==="bodyAttrs")&&(o="merge"),o==="merge"){const x=g.props;["class","style"].forEach(E=>{c.props[E]&&x[E]&&(E==="style"&&!x[E].endsWith(";")&&(x[E]+=";"),c.props[E]=`${x[E]} ${c.props[E]}`)}),r[d].props={...x,...c.props};return}else c._e===g._e&&(d=c._d=`${d}:${c._p}`);const v=Object.keys(c.props).length;if((v===0||v===1&&typeof c.props["data-h-key"]<"u")&&!c.children){delete r[d];return}}r[d]=c}),n.tags=Object.values(r)}}}},SortTagsPlugin=()=>({hooks:{"tags:resolve":e=>{const t=n=>{var r;return(r=e.tags.find(c=>c._d===n))==null?void 0:r._p};for(const n of e.tags){if(!n.tagPriority||typeof n.tagPriority=="number")continue;const r=[{prefix:"before:",offset:-1},{prefix:"after:",offset:1}];for(const{prefix:c,offset:d}of r)if(n.tagPriority.startsWith(c)){const g=n.tagPriority.replace(c,""),o=t(g);typeof o<"u"&&(n._p=o+d)}}e.tags.sort((n,r)=>n._p-r._p).sort(sortTags)}}}),TitleTemplatePlugin=()=>({hooks:{"tags:resolve":e=>{e.tags=resolveTitleTemplateFromTags(e.tags)}}}),DeprecatedTagAttrPlugin=()=>({hooks:{"tag:normalise":function({tag:e}){typeof e.props.body<"u"&&(e.tagPosition="bodyClose",delete e.props.body)}}}),IsBrowser$1=typeof window<"u",ProvideTagHashPlugin=()=>({hooks:{"tag:normalise":e=>{var c,d;const{tag:t,entry:n}=e,r=typeof t.props._dynamic<"u";!HasElementTags$2.includes(t.tag)||!t.key||(t._hash=hashCode$1(JSON.stringify({tag:t.tag,key:t.key})),!(IsBrowser$1||((d=(c=getActiveHead())==null?void 0:c.resolvedOptions)==null?void 0:d.document))&&(n._m==="server"||r)&&(t.props[`data-h-${t._hash}`]=""))},"tags:resolve":e=>{e.tags=e.tags.map(t=>(delete t.props._dynamic,t))}}}),PatchDomOnEntryUpdatesPlugin=e=>({hooks:{"entries:updated":function(t){if(typeof(e==null?void 0:e.document)>"u"&&typeof window>"u")return;let n=e==null?void 0:e.delayFn;!n&&typeof requestAnimationFrame<"u"&&(n=requestAnimationFrame),Promise.resolve().then(function(){return index$1}).then(({debouncedRenderDOMHead:r})=>{r(t,{document:(e==null?void 0:e.document)||window.document,delayFn:n})})}}}),EventHandlersPlugin=()=>{const e=(t,n)=>{const r={},c={};Object.entries(n.props).forEach(([g,o])=>{g.startsWith("on")&&typeof o=="function"?c[g]=o:r[g]=o});let d;return t==="dom"&&n.tag==="script"&&typeof r.src=="string"&&typeof c.onload<"u"&&(d=r.src,delete r.src),{props:r,eventHandlers:c,delayedSrc:d}};return{hooks:{"ssr:render":function(t){t.tags=t.tags.map(n=>(n.props=e("ssr",n).props,n))},"dom:beforeRenderTag":function(t){const{props:n,eventHandlers:r,delayedSrc:c}=e("dom",t.tag);!Object.keys(r).length||(t.tag.props=n,t.tag._eventHandlers=r,t.tag._delayedSrc=c)},"dom:renderTag":function(t){const n=t.$el;if(!t.tag._eventHandlers||!n)return;const r=t.tag.tag==="bodyAttrs"&&typeof window<"u"?window:n;Object.entries(t.tag._eventHandlers).forEach(([c,d])=>{const g=`${t.tag._d||t.tag._p}:${c}`,o=c.slice(2).toLowerCase(),v=`data-h-${o}`;if(delete t.staleSideEffects[g],n.hasAttribute(v))return;const x=d;n.setAttribute(v,""),r.addEventListener(o,x),t.entry&&(t.entry._sde[g]=()=>{r.removeEventListener(o,x),n.removeAttribute(v)})}),t.tag._delayedSrc&&n.setAttribute("src",t.tag._delayedSrc)}}}};function asArray$1(e){return Array.isArray(e)?e:[e]}const HasElementTags$2=["base","meta","link","style","script","noscript"];let activeHead;const setActiveHead=e=>activeHead=e,getActiveHead=()=>activeHead,TagEntityBits=10;async function normaliseEntryTags(e){const t=[];return Object.entries(e.resolvedInput||e.input).filter(([n,r])=>typeof r<"u"&&ValidHeadTags.includes(n)).forEach(([n,r])=>{const c=asArray$1(r);t.push(...c.map(d=>normaliseTag(n,d)).flat())}),(await Promise.all(t)).flat().map((n,r)=>(n._e=e._i,n._p=(e._i<<TagEntityBits)+r,n))}const CorePlugins=()=>[DedupesTagsPlugin(),SortTagsPlugin(),TitleTemplatePlugin(),ProvideTagHashPlugin(),EventHandlersPlugin(),DeprecatedTagAttrPlugin()],DOMPlugins=(e={})=>[PatchDomOnEntryUpdatesPlugin({document:e==null?void 0:e.document,delayFn:e==null?void 0:e.domDelayFn})];function createHead$1$1(e={}){const t=createHeadCore({...e,plugins:[...DOMPlugins(e),...(e==null?void 0:e.plugins)||[]]});return setActiveHead(t),t}function createHeadCore(e={}){let t=[],n={},r=0;const c=createHooks();e!=null&&e.hooks&&c.addHooks(e.hooks),e.plugins=[...CorePlugins(),...(e==null?void 0:e.plugins)||[]],e.plugins.forEach(o=>o.hooks&&c.addHooks(o.hooks));const d=()=>c.callHook("entries:updated",g),g={resolvedOptions:e,headEntries(){return t},get hooks(){return c},use(o){o.hooks&&c.addHooks(o.hooks)},push(o,v){const x={_i:r++,input:o,_sde:{}};return v!=null&&v.mode&&(x._m=v==null?void 0:v.mode),t.push(x),d(),{dispose(){t=t.filter(E=>E._i!==x._i?!0:(n={...n,...E._sde||{}},E._sde={},d(),!1))},patch(E){t=t.map(k=>(k._i===x._i&&(x.input=k.input=E,d()),k))}}},async resolveTags(){const o={tags:[],entries:[...t]};await c.callHook("entries:resolve",o);for(const v of o.entries)for(const x of await normaliseEntryTags(v)){const E={tag:x,entry:v};await c.callHook("tag:normalise",E),o.tags.push(E.tag)}return await c.callHook("tags:resolve",o),o.tags},_elMap:{},_popSideEffectQueue(){const o={...n};return n={},o}};return g.hooks.callHook("init",g),g}function defineHeadPlugin(e){return e}function resolveUnref(e){return typeof e=="function"?e():unref(e)}function resolveUnrefHeadInput(e,t=""){if(e instanceof Promise)return e;const n=resolveUnref(e);if(!e||!n)return n;if(Array.isArray(n))return n.map(r=>resolveUnrefHeadInput(r,t));if(typeof n=="object"){let r=!1;const c=Object.fromEntries(Object.entries(n).map(([d,g])=>d==="titleTemplate"||d.startsWith("on")?[d,unref(g)]:((typeof g=="function"||isRef$1(g))&&(r=!0),[d,resolveUnrefHeadInput(g,d)])));return r&&HasElementTags$2.includes(String(t))&&(c._dynamic=!0),c}return n}const Vue3=version$2.startsWith("3"),IsBrowser=typeof window<"u",headSymbol="usehead";function injectHead(){return getCurrentInstance()&&inject(headSymbol)||getActiveHead()}function createHead$2(e={}){const t=createHead$1$1({...e,domDelayFn:r=>setTimeout(()=>nextTick$1(()=>r()),10),plugins:[VueReactiveUseHeadPlugin(),...(e==null?void 0:e.plugins)||[]]}),n={install(r){Vue3&&(r.config.globalProperties.$unhead=t,r.provide(headSymbol,t))}};return t.install=n.install,t}const VueReactiveUseHeadPlugin=()=>({hooks:{"entries:resolve":function(e){for(const t of e.entries)t.resolvedInput=resolveUnrefHeadInput(t.input)}}});function clientUseHead(e,t={}){const n=injectHead(),r=ref({});watchEffect(()=>{r.value=resolveUnrefHeadInput(e)});const c=n.push(r.value,t);return watch(r,g=>c.patch(g)),getCurrentInstance()&&onBeforeUnmount(()=>{c.dispose()}),c}function serverUseHead(e,t={}){return injectHead().push(e,t)}function useHead$1(e,t={}){var r;const n=injectHead();if(n){const c=IsBrowser||!!((r=n.resolvedOptions)!=null&&r.document);return t.mode==="server"&&c||t.mode==="client"&&!c?void 0:c?clientUseHead(e,t):serverUseHead(e,t)}}const TagsWithInnerContent=["script","style","noscript"],HasElementTags=["base","meta","link","style","script","noscript"],UniqueTags=["base","title","titleTemplate","bodyAttrs","htmlAttrs"];function tagDedupeKey(e,t){const{props:n,tag:r}=e;if(UniqueTags.includes(r))return r;if(r==="link"&&n.rel==="canonical")return"canonical";if(n.charset)return"charset";const c=["id"];r==="meta"&&c.push("name","property","http-equiv");for(const d of c)if(typeof n[d]<"u"){const g=String(n[d]);return t&&!t(g)?!1:`${r}:${d}:${g}`}return!1}const setAttrs=(e,t)=>{const{tag:n,$el:r}=e;!r||(Object.entries(n.props).forEach(([c,d])=>{d=String(d);const g=`attr:${c}`;if(c==="class"){if(!d)return;for(const o of d.split(" ")){const v=`${g}:${o}`;t&&t(e,v,()=>r.classList.remove(o)),r.classList.contains(o)||r.classList.add(o)}return}t&&!c.startsWith("data-h-")&&t(e,g,()=>r.removeAttribute(c)),r.getAttribute(c)!==d&&r.setAttribute(c,d)}),TagsWithInnerContent.includes(n.tag)&&r.innerHTML!==(n.children||"")&&(r.innerHTML=n.children||""))};function hashCode(e){let t=9;for(let n=0;n<e.length;)t=Math.imul(t^e.charCodeAt(n++),9**9);return((t^t>>>9)+65536).toString(16).substring(1,8).toLowerCase()}async function renderDOMHead(e,t={}){var E,k;const n={shouldRender:!0};if(await e.hooks.callHook("dom:beforeRender",n),!n.shouldRender)return;const r=t.document||window.document,c=e._popSideEffectQueue();e.headEntries().map(S=>S._sde).forEach(S=>{Object.entries(S).forEach(([N,L])=>{c[N]=L})});const d=async S=>{const N=e.headEntries().find(P=>P._i===S._e),L={renderId:S._d||hashCode(JSON.stringify({...S,_e:void 0,_p:void 0})),$el:null,shouldRender:!0,tag:S,entry:N,staleSideEffects:c};return await e.hooks.callHook("dom:beforeRenderTag",L),L},g=[],o={body:[],head:[]},v=(S,N,L)=>{N=`${S.renderId}:${N}`,S.entry&&(S.entry._sde[N]=L),delete c[N]},x=S=>{e._elMap[S.renderId]=S.$el,g.push(S),v(S,"el",()=>{var N;(N=S.$el)==null||N.remove(),delete e._elMap[S.renderId]})};for(const S of await e.resolveTags()){const N=await d(S);if(!N.shouldRender)continue;const{tag:L}=N;if(L.tag==="title"){r.title=L.children||"",g.push(N);continue}if(L.tag==="htmlAttrs"||L.tag==="bodyAttrs"){N.$el=r[L.tag==="htmlAttrs"?"documentElement":"body"],setAttrs(N,v),g.push(N);continue}if(N.$el=e._elMap[N.renderId],!N.$el&&L._hash&&(N.$el=r.querySelector(`${(E=L.tagPosition)!=null&&E.startsWith("body")?"body":"head"} > ${L.tag}[data-h-${L._hash}]`)),N.$el){N.tag._d&&setAttrs(N),x(N);continue}N.$el=r.createElement(L.tag),setAttrs(N),o[(k=L.tagPosition)!=null&&k.startsWith("body")?"body":"head"].push(N)}Object.entries(o).forEach(([S,N])=>{if(!!N.length){for(const L of[...r[S].children].reverse()){const P=L.tagName.toLowerCase();if(!HasElementTags.includes(P))continue;const O=tagDedupeKey({tag:P,props:L.getAttributeNames().reduce((z,U)=>({...z,[U]:L.getAttribute(U)}),{})}),V=N.findIndex(z=>z&&(z.tag._d===O||L.isEqualNode(z.$el)));if(V!==-1){const z=N[V];z.$el=L,setAttrs(z),x(z),delete N[V]}}N.forEach(L=>{if(!!L.$el){switch(L.tag.tagPosition){case"bodyClose":r.body.appendChild(L.$el);break;case"bodyOpen":r.body.insertBefore(L.$el,r.body.firstChild);break;case"head":default:r.head.appendChild(L.$el);break}x(L)}})}});for(const S of g)await e.hooks.callHook("dom:renderTag",S);Object.values(c).forEach(S=>S())}let domUpdatePromise=null;async function debouncedRenderDOMHead(e,t={}){function n(){return domUpdatePromise=null,renderDOMHead(e,t)}const r=t.delayFn||(c=>setTimeout(c,10));return domUpdatePromise=domUpdatePromise||new Promise(c=>r(()=>c(n())))}const SelfClosingTags=["meta","link","base"],propsToString=e=>{const t=[];for(const[n,r]of Object.entries(e)){if(r===!1||r==null)continue;let c=n;r!==!0&&(c+=`="${String(r).replace(/"/g,"&quot;")}"`),t.push(c)}return t.length>0?` ${t.join(" ")}`:""},tagToString=e=>{const t=propsToString(e.props),n=`<${e.tag}${t}>`;return SelfClosingTags.includes(e.tag)?n:`${n}${e.children||""}</${e.tag}>`};function ssrRenderTags(e){const t={htmlAttrs:{},bodyAttrs:{},tags:{head:[],bodyClose:[],bodyOpen:[]}};for(const n of e){if(n.tag==="htmlAttrs"||n.tag==="bodyAttrs"){t[n.tag]={...t[n.tag],...n.props};continue}t.tags[n.tagPosition||"head"].push(tagToString(n))}return{headTags:t.tags.head.join(`
`),bodyTags:t.tags.bodyClose.join(`
`),bodyTagsOpen:t.tags.bodyOpen.join(`
`),htmlAttrs:propsToString(t.htmlAttrs),bodyAttrs:propsToString(t.bodyAttrs)}}async function renderSSRHead(e){const t={shouldRender:!0};if(await e.hooks.callHook("ssr:beforeRender",t),!t.shouldRender)return{headTags:"",bodyTags:"",bodyTagsOpen:"",htmlAttrs:"",bodyAttrs:""};const n={tags:await e.resolveTags()};await e.hooks.callHook("ssr:render",n);const r=ssrRenderTags(n.tags),c={tags:n.tags,html:r};return await e.hooks.callHook("ssr:rendered",c),c.html}function createHead$1(e){const t=createHead$2(),n={unhead:t,install(r){version$2.startsWith("3")&&(r.config.globalProperties.$head=t,r.provide("usehead",t))},use(r){t.use(r)},resolveTags(){return t.resolveTags()},headEntries(){return t.headEntries()},headTags(){return t.resolveTags()},push(r,c){return t.push(r,c)},addEntry(r,c){return t.push(r,c)},addHeadObjs(r,c){return t.push(r,c)},addReactiveEntry(r,c){const d=useHead$1(r,c);return typeof d<"u"?d.dispose:()=>{}},removeHeadObjs(){},updateDOM(r,c){c?renderDOMHead(t,{document:r}):debouncedRenderDOMHead(t,{delayFn:d=>setTimeout(()=>d(),50),document:r})},internalHooks:t.hooks,hooks:{"before:dom":[],"resolved:tags":[],"resolved:entries":[]}};return t.addHeadObjs=n.addHeadObjs,t.updateDOM=n.updateDOM,t.hooks.hook("dom:beforeRender",r=>{for(const c of n.hooks["before:dom"])c()===!1&&(r.shouldRender=!1)}),e&&n.addHeadObjs(e),n}const renderHeadToString=e=>renderSSRHead(e.unhead);var ProxyModule=(e=>(e.Default="default",e.Douban="douban",e.NetEaseMusic="netease-music",e.Instagram="instagram",e.YouTube="youtube",e.Disqus="disqus",e))(ProxyModule||{});const getTargetCDNURL=e=>`${API_CONFIG.CDN}${e}`,getTargetProxyURL=(e,t=ProxyModule.Default)=>`${API_CONFIG.PROXY}/${t}/${encodeURIComponent(e)}`,getTargetStaticURL=e=>`${API_CONFIG.STATIC}${e}`,getPageURL=e=>`${API_CONFIG.FE}${e}`,DEFAULT_OG_IMAGE=getTargetCDNURL("/images/og-social-card.jpg"),HeadTitlerSymbol=Symbol("head-titler"),createHead=e=>{const t=createHead$1();return{...t,renderToString(){return renderHeadToString(t)},install(n,...r){return n.provide(HeadTitlerSymbol,(e==null?void 0:e.titler)||(c=>c)),n.use(t,...r),t}}};function useHead(e){const{i18n:t,route:n}=useEnhancer(),r=inject(HeadTitlerSymbol),c=computed(()=>{var W,Z,re,oe,se,ce,me;const{title:d,pageTitle:g,keywords:o,description:v,ogType:x,ogUrl:E,ogTitle:k,ogDescription:S,ogImage:N,ogImageWidth:L,ogImageHeight:P,...O}=typeof e=="function"?e():e,V=d!=null?d:g,z=d||(g?r==null?void 0:r(g):""),U=O.meta||[{key:"keywords",name:"keywords",content:o!=null?o:""},{key:"description",name:"description",content:v!=null?v:""},{key:"twitter-new-widgets",name:"twitter:widgets:new-embed-design",content:"on"},{key:"twitter-site",name:"twitter:site",content:`@${IDENTITIES.TWITTER_USER_NAME}`},{key:"twitter-creator",name:"twitter:creator",content:`@${IDENTITIES.TWITTER_USER_NAME}`},{key:"twitter-card",name:"twitter:card",content:"summary_large_image"},{key:"twitter-image-src",name:"twitter:image:src",content:N!=null?N:DEFAULT_OG_IMAGE},{key:"twitter-title",name:"twitter:title",content:(W=k!=null?k:z)!=null?W:""},{key:"twitter-description",name:"twitter:description",content:(Z=S!=null?S:v)!=null?Z:""},{key:"og-type",property:"og:type",content:x!=null?x:"object"},{key:"og-site-name",property:"og:site_name",content:META.title},{key:"og-title",property:"og:title",content:(re=k!=null?k:V)!=null?re:""},{key:"og-description",property:"og:description",content:(oe=S!=null?S:v)!=null?oe:""},{key:"og-url",property:"og:url",content:E!=null?E:getPageURL(n.fullPath)},{key:"og-image",property:"og:image",content:N!=null?N:DEFAULT_OG_IMAGE},{key:"og-image-alt",property:"og:image:alt",content:(se=k!=null?k:z)!=null?se:""},{key:"og-image-width",property:"og:image:width",content:L!=null?L:N?"":"1000"},{key:"og-image-height",property:"og:image:height",content:P!=null?P:N?"":"526"},{key:"og-locale",property:"og:locale",content:(me=(ce=t.l.value)==null?void 0:ce.iso)!=null?me:""}];return{...O,title:z,meta:U}});return useHead$1(c)}/*! js-cookie v3.0.1 | MIT */function assign$1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var defaultConverter={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function init(e,t){function n(c,d,g){if(!(typeof document>"u")){g=assign$1({},t,g),typeof g.expires=="number"&&(g.expires=new Date(Date.now()+g.expires*864e5)),g.expires&&(g.expires=g.expires.toUTCString()),c=encodeURIComponent(c).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var v in g)!g[v]||(o+="; "+v,g[v]!==!0&&(o+="="+g[v].split(";")[0]));return document.cookie=c+"="+e.write(d,c)+o}}function r(c){if(!(typeof document>"u"||arguments.length&&!c)){for(var d=document.cookie?document.cookie.split("; "):[],g={},o=0;o<d.length;o++){var v=d[o].split("="),x=v.slice(1).join("=");try{var E=decodeURIComponent(v[0]);if(g[E]=e.read(x,E),c===E)break}catch{}}return c?g[c]:g}}return Object.create({set:n,get:r,remove:function(c,d){n(c,"",assign$1({},d,{expires:-1}))},withAttributes:function(c){return init(this.converter,assign$1({},this.attributes,c))},withConverter:function(c){return init(assign$1({},this.converter,c),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var api=init(defaultConverter,{path:"/"}),Theme=(e=>(e.Light="light",e.Dark="dark",e))(Theme||{});const DARK_THEME_QUERY="(prefers-color-scheme: dark)",LIGHT_THEME_QUERY="(prefers-color-scheme: light)",THEME_STORAGE_KEY="theme",ThemeSymbol=Symbol("theme"),themes=["light","dark"],createTheme=e=>{const t=ref(e==="dark"?"dark":"light"),n=g=>{themes.includes(g)&&g!==t.value&&(t.value=g,api.set(THEME_STORAGE_KEY,g),storage.set(THEME_STORAGE_KEY,g))},r=()=>n(t.value==="dark"?"light":"dark"),c=()=>{window.matchMedia(DARK_THEME_QUERY).addEventListener("change",({matches:g})=>g&&n("dark")),window.matchMedia(LIGHT_THEME_QUERY).addEventListener("change",({matches:g})=>g&&n("light"))},d={theme:readonly(t),set:n,toggle:r,bindClientSystem:c};return{...d,install(g){g.provide(ThemeSymbol,d)}}},useTheme=()=>inject(ThemeSymbol),_sfc_main$1D=defineComponent({name:"ProgressBar",props:{spin:{type:Boolean,default:!1}},setup(){return{loading:useLoading()}}}),progress_vue_vue_type_style_index_0_scoped_41e28920_lang="",_export_sfc=(e,t)=>{const n=e.__vccOpts||e;for(const[r,c]of t)n[r]=c;return n},_sfc_setup$1D=_sfc_main$1D.setup;_sfc_main$1D.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/composables/loading/progress.vue"),_sfc_setup$1D?_sfc_setup$1D(e,t):void 0};const LoadingSymbol=Symbol("loading"),useLoading=()=>inject(LoadingSymbol),defaultAdConfig={PC_CARROUSEL:!1,PC_NAV:[],PC_ASIDE_SWIPER:[]},useAdminInfoStore=defineFetchStore({id:"adminInfo",initData:null,fetcher:()=>nodepress$1.get("/auth/admin").then(e=>e.result)}),useAppOptionStore=pinia_prod.defineStore({id:"appOption",state:()=>({fetched:!1,fetching:!1,data:null}),getters:{adConfig:e=>{var r;const t=(r=e.data)==null?void 0:r.ad_config,n={...defaultAdConfig,...t?JSON.parse(t):{}};return n.PC_NAV=n.PC_NAV.filter(c=>!c.disabled),n.PC_ASIDE_SWIPER=n.PC_ASIDE_SWIPER.filter(c=>!c.disabled),n}},actions:{fetch(e=!1){return!e&&this.fetched?Promise.resolve():(this.fetching=!0,nodepress$1.get("/option").then(t=>{this.data=t.result,this.fetched=!0}).finally(()=>{this.fetching=!1}))},postSiteLike(){const e=useIdentityStore();return nodepress$1.post("/vote/post",{post_id:CommentPostID.Guestbook,vote:1,author:e.author}).then(t=>{this.data&&(this.data.meta.likes=t.result)})},postFeedback(e){var r,c;const t=useIdentityStore(),n=((r=t.author)==null?void 0:r.name)||null;return nodepress$1.post("/feedback",{...e,tid:0,user_name:n?`${n} (${UserType[t.user.type]})`:null,user_email:((c=t.author)==null?void 0:c.email)||null})}}}),useEnhancer=()=>{const e=useRoute(),t=useRouter(),n=useI18n(),r=useTheme(),c=useGlobalState(),d=useAppOptionStore(),g=computed(()=>d.adConfig),o=computed(()=>c.userAgent.isMobile),v=computed(()=>r.theme.value===Theme.Dark),x=computed(()=>n.language.value===Language.Chinese);return{route:e,router:t,globalState:c,i18n:n,head:useHead,theme:r,adConfig:g,isMobile:o,isDarkTheme:v,isZhLang:x,defer:UNDEFINED,popup:UNDEFINED,gtag:UNDEFINED,loading:UNDEFINED}},_sfc_main$1C=defineComponent({name:"MobileFlowLoadmore",props:{loading:{type:Boolean,default:!1},finished:{type:Boolean,default:!1}},emits:["loadmore"],setup(e,t){const n=ref(null),r=ref(null),c=()=>{!e.loading&&!e.finished&&t.emit("loadmore")};return onMounted(()=>{n.value&&(r.value=new IntersectionObserver(d=>{d[0].isIntersecting&&c()},{threshold:.1}),r.value.observe(n.value))}),onBeforeUnmount(()=>{n.value&&r.value&&(r.value.unobserve(n.value),r.value.disconnect())}),{LanguageKey,element:n,emitLoadEvent:c}}}),loadmore_vue_vue_type_style_index_0_scoped_f8d74422_lang="";function _sfc_ssrRender$1C(e,t,n,r,c,d,g,o){const v=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:"loadmore",ref:"element"},r))} data-v-f8d74422>`),e.loading?t('<div class="loading" data-v-f8d74422><div data-v-f8d74422></div><div data-v-f8d74422></div><div data-v-f8d74422></div><div data-v-f8d74422></div></div>'):e.finished?(t('<span class="finised" data-v-f8d74422>'),t(ssrRenderComponent(v,{k:e.LanguageKey.ARTICLE_LIST_NO_MORE},null,n)),t("</span>")):t('<button class="normal" data-v-f8d74422><i class="iconfont icon-loadmore" data-v-f8d74422></i></button>'),t("</div>")}const _sfc_setup$1C=_sfc_main$1C.setup;_sfc_main$1C.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/flow/mobile/loadmore.vue"),_sfc_setup$1C?_sfc_setup$1C(e,t):void 0};const Loadmore=_export_sfc(_sfc_main$1C,[["ssrRender",_sfc_ssrRender$1C],["__scopeId","data-v-f8d74422"]]),WebPArgs="format,webp/",getArticleBannerThumbnailURL=(e,t)=>{if(!e)return getTargetCDNURL("/images/thumbnail/carrousel.jpg");const n=1190,r=420;return`${e}?image_process=${t?WebPArgs:""}quality,q_88/resize,w_${n},h_${r}/crop,mid,w_${n},h_${r}/watermark,text_U3VybW9uLm1l,type_bm90b3NhbnM,color_ffffff,size_31,g_sw,t_26,x_30,y_18`},getMobileArticleListThumbnailURL=(e,t=!1)=>{if(!e)return"";const n=700,r=247;return`${e}?image_process=${t?WebPArgs:""}quality,q_82/resize,w_${n},h_${r}/crop,mid,w_${n},h_${r}/watermark,text_U3VybW9uLm1l,type_bm90b3NhbnM,color_ffffff,size_28,g_sw,t_26,x_22,y_18`},getArticleListThumbnailURL=(e,t)=>{if(!e)return"";const n=350,r=238;return`${e}?image_process=${t?WebPArgs:""}quality,q_80/resize,w_${n},h_${r}/crop,mid,w_${n},h_${r}`},isOriginalType=e=>isNull(e)||isUndefined(null)||e===OriginState.Original,isHybridType=e=>e===OriginState.Hybrid,isReprintType=e=>e===OriginState.Reprint,getExtendsObject=e=>e!=null&&e.length?e.reduce((t,n)=>({...t,[n.name]:n.value}),{}):{},getExtendValue=(e,t)=>e.length?getExtendsObject(e)[t]:UNDEFINED,_sfc_main$1B=defineComponent({name:"FlowArticleListItem",props:{article:{type:Object,required:!0}},setup(e){const{router:t,globalState:n}=useEnhancer(),r=useIdentityStore(),c=computed(()=>r.isLikedPage(e.article.id)),d=isHybridType(e.article.origin),g=isReprintType(e.article.origin),o=isOriginalType(e.article.origin);return{LanguageKey,isLiked:c,isHybrid:d,isReprint:g,isOriginal:o,numberSplit,getThumbnailURL:E=>getMobileArticleListThumbnailURL(E,n.imageExt.value.isWebP),getArticleDetailRoute,handleClick:()=>{t.push(getArticleDetailRoute(e.article.id))}}}}),item_vue_vue_type_style_index_0_scoped_ca6df77d_lang="";function _sfc_ssrRender$1B(e,t,n,r,c,d,g,o){const v=resolveComponent("i18n"),x=resolveComponent("router-link"),E=resolveComponent("udate");t(`<div${ssrRenderAttrs(mergeProps({class:"article-item"},r))} data-v-ca6df77d><div class="thumbnail" data-v-ca6df77d><span class="${ssrRenderClass([{original:e.isOriginal,reprint:e.isReprint,hybrid:e.isHybrid},"oirigin"])}" data-v-ca6df77d>`),e.isOriginal?t(ssrRenderComponent(v,{k:e.LanguageKey.ORIGIN_ORIGINAL},null,n)):e.isReprint?t(ssrRenderComponent(v,{k:e.LanguageKey.ORIGIN_REPRINT},null,n)):e.isHybrid?t(ssrRenderComponent(v,{k:e.LanguageKey.ORIGIN_HYBRID},null,n)):t("<!---->"),t(`</span><div class="image" style="${ssrRenderStyle({backgroundImage:`url(${e.getThumbnailURL(e.article.thumb)})`})}"${ssrRenderAttr("alt",e.article.title)}${ssrRenderAttr("title",e.article.title)} data-v-ca6df77d></div></div><div class="content" data-v-ca6df77d><div class="body" data-v-ca6df77d><h4 class="title" data-v-ca6df77d>`),t(ssrRenderComponent(x,{class:"link",to:e.getArticleDetailRoute(e.article.id),title:e.article.title},{default:withCtx((k,S,N,L)=>{if(S)S(`${ssrInterpolate(e.article.title)}`);else return[createTextVNode(toDisplayString(e.article.title),1)]}),_:1},n)),t(`</h4><p class="description" style="${ssrRenderStyle({"-webkit-box-orient":"vertical"})}" data-v-ca6df77d>${e.article.description}</p></div><div class="meta" data-v-ca6df77d><span class="date" data-v-ca6df77d><i class="iconfont icon-clock" data-v-ca6df77d></i>`),t(ssrRenderComponent(E,{to:"ago",date:e.article.create_at},null,n)),t(`</span><span class="views" data-v-ca6df77d><i class="iconfont icon-eye" data-v-ca6df77d></i><span data-v-ca6df77d>${ssrInterpolate(e.numberSplit(e.article.meta.views))}</span></span><span class="comments" data-v-ca6df77d><i class="iconfont icon-comment" data-v-ca6df77d></i><span data-v-ca6df77d>${ssrInterpolate(e.article.meta.comments)}</span></span><span class="likes" data-v-ca6df77d><i class="${ssrRenderClass([{liked:e.isLiked},"iconfont icon-like"])}" data-v-ca6df77d></i><span data-v-ca6df77d>${ssrInterpolate(e.article.meta.likes)}</span></span></div></div></div>`)}const _sfc_setup$1B=_sfc_main$1B.setup;_sfc_main$1B.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/flow/mobile/item.vue"),_sfc_setup$1B?_sfc_setup$1B(e,t):void 0};const ListItem$1=_export_sfc(_sfc_main$1B,[["ssrRender",_sfc_ssrRender$1B],["__scopeId","data-v-ca6df77d"]]),_sfc_main$1A=defineComponent({name:"MobileFlowArticleList",components:{ListItem:ListItem$1,Loadmore},props:{tagSlug:{type:String,required:!1},categorySlug:{type:String,required:!1},searchKeyword:{type:String,required:!1},date:{type:String,required:!1}},setup(e){const{head:t,i18n:n}=useEnhancer(),r=useAppOptionStore(),c=useTagStore(),d=useCategoryStore(),g=useArticleListStore(),o=computed(()=>e.categorySlug?d.data.find(N=>N.slug===e.categorySlug):null),v=computed(()=>e.tagSlug?c.data.find(N=>N.slug===e.tagSlug):null),x=computed(()=>g.list.data),E=computed(()=>{const N=g.list.pagination;return N?N.current_page<N.total_page:!1});t(()=>{var L,P;const N=Object.values(e).filter(Boolean).map(O=>firstUpperCase(O));return N.length?{pageTitle:N.join(" | ")}:{title:`${META.title} - ${n.t(LanguageKey.APP_SLOGAN)}`,description:(L=r.data)==null?void 0:L.description,keywords:(P=r.data)==null?void 0:P.keywords.join(","),ogType:"blog"}});const k=async(N={})=>{await g.fetchList({category_slug:e.categorySlug,tag_slug:e.tagSlug,date:e.date,keyword:e.searchKeyword,...N})},S=async()=>{await k({page:g.list.pagination.current_page+1})};return onBeforeMount(()=>{watch(()=>e,()=>k(),{flush:"post",deep:!0})}),useUniversalFetch(()=>k()),{LanguageKey,tagEnName,tag:v,category:o,articles:x,articleListStore:g,hasMoreArticles:E,loadmoreArticles:S,firstUpperCase}}}),index_vue_vue_type_style_index_0_scoped_82cfaacb_lang="";function _sfc_ssrRender$1A(e,t,n,r,c,d,g,o){const v=resolveComponent("i18n"),x=resolveComponent("router-link"),E=resolveComponent("placeholder"),k=resolveComponent("skeleton-base"),S=resolveComponent("skeleton-line"),N=resolveComponent("empty"),L=resolveComponent("list-item"),P=resolveComponent("loadmore");t(`<div${ssrRenderAttrs(mergeProps({class:"articles"},r))} data-v-82cfaacb>`),e.tagSlug||e.categorySlug||e.date||e.searchKeyword?(t('<div class="header" data-v-82cfaacb><div class="content" data-v-82cfaacb>'),e.categorySlug?(t("<!--[-->"),e.category?t(ssrRenderComponent(v,null,{zh:withCtx((O,V,z,U)=>{if(V)V(`\u5206\u7C7B \u201C${ssrInterpolate(e.category.name)}\u201D \u7684\u8FC7\u6EE4\u7ED3\u679C`);else return[createTextVNode("\u5206\u7C7B \u201C"+toDisplayString(e.category.name)+"\u201D \u7684\u8FC7\u6EE4\u7ED3\u679C",1)]}),en:withCtx((O,V,z,U)=>{if(V)V(`Category &quot;${ssrInterpolate(e.firstUpperCase(e.category.slug))}&quot; &#39;s result`);else return[createTextVNode('Category "'+toDisplayString(e.firstUpperCase(e.category.slug))+`" 's result`,1)]}),_:1},n)):t(`<span data-v-82cfaacb>${ssrInterpolate(e.categorySlug)}</span>`),t("<!--]-->")):t("<!---->"),e.tagSlug?(t("<!--[-->"),e.tag?t(ssrRenderComponent(v,null,{zh:withCtx((O,V,z,U)=>{if(V)V(`\u6807\u7B7E \u201C${ssrInterpolate(e.tag.name)}\u201D \u7684\u8FC7\u6EE4\u7ED3\u679C`);else return[createTextVNode("\u6807\u7B7E \u201C"+toDisplayString(e.tag.name)+"\u201D \u7684\u8FC7\u6EE4\u7ED3\u679C",1)]}),en:withCtx((O,V,z,U)=>{if(V)V(`Tag &quot;${ssrInterpolate(e.tagEnName(e.tag))}&quot; &#39;s result`);else return[createTextVNode('Tag "'+toDisplayString(e.tagEnName(e.tag))+`" 's result`,1)]}),_:1},n)):t(`<span data-v-82cfaacb>${ssrInterpolate(e.tagSlug)}</span>`),t("<!--]-->")):t("<!---->"),e.date?t(ssrRenderComponent(v,null,{zh:withCtx((O,V,z,U)=>{if(V)V(`\u65E5\u671F \u201C${ssrInterpolate(e.date)}\u201D \u7684\u8FC7\u6EE4\u7ED3\u679C`);else return[createTextVNode("\u65E5\u671F \u201C"+toDisplayString(e.date)+"\u201D \u7684\u8FC7\u6EE4\u7ED3\u679C",1)]}),en:withCtx((O,V,z,U)=>{if(V)V(`Date &quot;${ssrInterpolate(e.date)}&quot; &#39;s result`);else return[createTextVNode('Date "'+toDisplayString(e.date)+`" 's result`,1)]}),_:1},n)):t("<!---->"),e.searchKeyword?t(ssrRenderComponent(v,null,{zh:withCtx((O,V,z,U)=>{if(V)V(`\u5173\u952E\u8BCD \u201C${ssrInterpolate(e.searchKeyword)}\u201D \u7684\u8FC7\u6EE4\u7ED3\u679C`);else return[createTextVNode("\u5173\u952E\u8BCD \u201C"+toDisplayString(e.searchKeyword)+"\u201D \u7684\u8FC7\u6EE4\u7ED3\u679C",1)]}),en:withCtx((O,V,z,U)=>{if(V)V(`Search keyword &quot;${ssrInterpolate(e.searchKeyword)}&quot; &#39;s result`);else return[createTextVNode('Search keyword "'+toDisplayString(e.searchKeyword)+`" 's result`,1)]}),_:1},n)):t("<!---->"),t("</div>"),t(ssrRenderComponent(x,{to:"/",class:"close"},{default:withCtx((O,V,z,U)=>{if(V)V(`<i class="iconfont icon-cancel" data-v-82cfaacb${U}></i>`);else return[createVNode("i",{class:"iconfont icon-cancel"})]}),_:1},n)),t("</div>")):t("<!---->"),t(ssrRenderComponent(E,{data:e.articles.length,loading:!e.articles.length&&e.articleListStore.list.fetching},{loading:withCtx((O,V,z,U)=>{if(V)V(`<ul class="skeletons" data-v-82cfaacb${U}><!--[-->`),ssrRenderList(3,W=>{V(`<li class="item" data-v-82cfaacb${U}><div class="thumb" data-v-82cfaacb${U}>`),V(ssrRenderComponent(k,null,null,z,U)),V(`</div><div class="content" data-v-82cfaacb${U}><div class="title" data-v-82cfaacb${U}>`),V(ssrRenderComponent(S,null,null,z,U)),V(`</div><div class="description" data-v-82cfaacb${U}>`),V(ssrRenderComponent(S,null,null,z,U)),V("</div></div></li>")}),V("<!--]--></ul>");else return[createVNode("ul",{class:"skeletons",key:"skeleton"},[(openBlock(),createBlock(Fragment,null,renderList(3,W=>createVNode("li",{key:W,class:"item"},[createVNode("div",{class:"thumb"},[createVNode(k)]),createVNode("div",{class:"content"},[createVNode("div",{class:"title"},[createVNode(S)]),createVNode("div",{class:"description"},[createVNode(S)])])])),64))])]}),placeholder:withCtx((O,V,z,U)=>{if(V)V(ssrRenderComponent(N,{class:"empty","i18n-key":e.LanguageKey.ARTICLE_PLACEHOLDER},null,z,U));else return[createVNode(N,{class:"empty","i18n-key":e.LanguageKey.ARTICLE_PLACEHOLDER},null,8,["i18n-key"])]}),default:withCtx((O,V,z,U)=>{if(V)V(`<div data-v-82cfaacb${U}><div${ssrRenderAttrs({key:"list",name:"list-fade",class:"list"})}>`),ssrRenderList(e.articles,(W,Z)=>{V(ssrRenderComponent(L,{class:"list-item",article:W,key:Z},null,z,U))}),V("</div>"),V(ssrRenderComponent(P,{loading:e.articleListStore.list.fetching,finished:!e.hasMoreArticles,onLoadmore:e.loadmoreArticles},null,z,U)),V("</div>");else return[createVNode("div",null,[createVNode(TransitionGroup,{key:"list",name:"list-fade",tag:"div",class:"list"},{default:withCtx(()=>[(openBlock(!0),createBlock(Fragment,null,renderList(e.articles,(W,Z)=>(openBlock(),createBlock(L,{class:"list-item",article:W,key:Z},null,8,["article"]))),128))]),_:1}),createVNode(P,{loading:e.articleListStore.list.fetching,finished:!e.hasMoreArticles,onLoadmore:e.loadmoreArticles},null,8,["loading","finished","onLoadmore"])])]}),_:1},n)),t("</div>")}const _sfc_setup$1A=_sfc_main$1A.setup;_sfc_main$1A.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/flow/mobile/index.vue"),_sfc_setup$1A?_sfc_setup$1A(e,t):void 0};const MobileFlow=_export_sfc(_sfc_main$1A,[["ssrRender",_sfc_ssrRender$1A],["__scopeId","data-v-82cfaacb"]]),_sfc_main$1z=defineComponent({name:"FlowArticleListItem",props:{article:{type:Object,required:!0}},setup(e){const{globalState:t}=useEnhancer(),n=useIdentityStore(),r=computed(()=>n.isLikedPage(e.article.id)),c=isHybridType(e.article.origin),d=isReprintType(e.article.origin),g=isOriginalType(e.article.origin);return{LanguageKey,isLiked:r,isHybrid:c,isReprint:d,isOriginal:g,numberSplit,getThumbnailURL:x=>getArticleListThumbnailURL(x,t.imageExt.value.isWebP),getLanguageText:x=>x===Language.Chinese?"\u4E2D\u6587":"EN",getArticleDetailRoute,getCategoryFlowRoute,getTagFlowRoute}}}),item_vue_vue_type_style_index_0_scoped_f6b6306c_lang="";function _sfc_ssrRender$1z(e,t,n,r,c,d,g,o){const v=resolveComponent("router-link"),x=resolveComponent("i18n"),E=resolveComponent("udate"),k=resolveComponent("placeholder");t(`<div${ssrRenderAttrs(mergeProps({class:"article-item"},r))} data-v-f6b6306c><div class="item-background" style="${ssrRenderStyle({backgroundImage:`url(${e.getThumbnailURL(e.article.thumb)})`})}" data-v-f6b6306c></div><div class="item-content" data-v-f6b6306c>`),t(ssrRenderComponent(v,{class:"item-thumb",to:e.getArticleDetailRoute(e.article.id)},{default:withCtx((S,N,L,P)=>{if(N)N(`<span class="${ssrRenderClass([{original:e.isOriginal,hybrid:e.isHybrid,reprint:e.isReprint},"item-oirigin"])}" data-v-f6b6306c${P}>`),e.isOriginal?N(ssrRenderComponent(x,{k:e.LanguageKey.ORIGIN_ORIGINAL},null,L,P)):e.isReprint?N(ssrRenderComponent(x,{k:e.LanguageKey.ORIGIN_REPRINT},null,L,P)):e.isHybrid?N(ssrRenderComponent(x,{k:e.LanguageKey.ORIGIN_HYBRID},null,L,P)):N("<!---->"),N(`</span><div class="image" style="${ssrRenderStyle({backgroundImage:`url(${e.getThumbnailURL(e.article.thumb)})`})}"${ssrRenderAttr("alt",e.article.title)}${ssrRenderAttr("title",e.article.title)} data-v-f6b6306c${P}></div>`);else return[createVNode("span",{class:["item-oirigin",{original:e.isOriginal,hybrid:e.isHybrid,reprint:e.isReprint}]},[e.isOriginal?(openBlock(),createBlock(x,{key:0,k:e.LanguageKey.ORIGIN_ORIGINAL},null,8,["k"])):e.isReprint?(openBlock(),createBlock(x,{key:1,k:e.LanguageKey.ORIGIN_REPRINT},null,8,["k"])):e.isHybrid?(openBlock(),createBlock(x,{key:2,k:e.LanguageKey.ORIGIN_HYBRID},null,8,["k"])):createCommentVNode("",!0)],2),createVNode("div",{class:"image",style:{backgroundImage:`url(${e.getThumbnailURL(e.article.thumb)})`},alt:e.article.title,title:e.article.title},null,12,["alt","title"])]}),_:1},n)),t('<div class="item-body" data-v-f6b6306c><div class="item-content" data-v-f6b6306c><h5 class="title" data-v-f6b6306c>'),t(ssrRenderComponent(v,{class:"link",to:e.getArticleDetailRoute(e.article.id),title:e.article.title},{default:withCtx((S,N,L,P)=>{if(N)N(`${ssrInterpolate(e.article.title)}`);else return[createTextVNode(toDisplayString(e.article.title),1)]}),_:1},n)),t(`<span class="language" data-v-f6b6306c>${ssrInterpolate(e.getLanguageText(e.article.lang))}</span></h5><p class="description" style="${ssrRenderStyle({"-webkit-box-orient":"vertical"})}" data-v-f6b6306c>${e.article.description}</p></div><div class="item-meta" data-v-f6b6306c><span class="date" data-v-f6b6306c><i class="iconfont icon-clock" data-v-f6b6306c></i>`),t(ssrRenderComponent(E,{to:"ago",date:e.article.create_at},null,n)),t(`</span><span class="views" data-v-f6b6306c><i class="iconfont icon-eye" data-v-f6b6306c></i><span data-v-f6b6306c>${ssrInterpolate(e.numberSplit(e.article.meta.views))}</span></span><span class="comments" data-v-f6b6306c><i class="iconfont icon-comment" data-v-f6b6306c></i><span data-v-f6b6306c>${ssrInterpolate(e.article.meta.comments)}</span></span><span class="likes" data-v-f6b6306c><i class="${ssrRenderClass([{liked:e.isLiked},"iconfont icon-like"])}" data-v-f6b6306c></i><span data-v-f6b6306c>${ssrInterpolate(e.article.meta.likes)}</span></span><span class="categories" data-v-f6b6306c><i class="iconfont icon-category" data-v-f6b6306c></i>`),t(ssrRenderComponent(k,{transition:!1,data:e.article.category.length},{placeholder:withCtx((S,N,L,P)=>{if(N)N(ssrRenderComponent(x,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,L,P));else return[createVNode(x,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,8,["k"])]}),default:withCtx((S,N,L,P)=>{if(N)N("<!--[-->"),ssrRenderList(e.article.category.slice(0,1),(O,V)=>{N(ssrRenderComponent(v,{key:V,to:e.getCategoryFlowRoute(O.slug)},{default:withCtx((z,U,W,Z)=>{if(U)U(ssrRenderComponent(x,{zh:O.name,en:O.slug},null,W,Z));else return[createVNode(x,{zh:O.name,en:O.slug},null,8,["zh","en"])]}),_:2},L,P))}),N("<!--]-->");else return[(openBlock(!0),createBlock(Fragment,null,renderList(e.article.category.slice(0,1),(O,V)=>(openBlock(),createBlock(v,{key:V,to:e.getCategoryFlowRoute(O.slug)},{default:withCtx(()=>[createVNode(x,{zh:O.name,en:O.slug},null,8,["zh","en"])]),_:2},1032,["to"]))),128))]}),_:1},n)),t("</span></div></div></div></div>")}const _sfc_setup$1z=_sfc_main$1z.setup;_sfc_main$1z.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/flow/desktop/item.vue"),_sfc_setup$1z?_sfc_setup$1z(e,t):void 0};const ListItem=_export_sfc(_sfc_main$1z,[["ssrRender",_sfc_ssrRender$1z],["__scopeId","data-v-f6b6306c"]]),_sfc_main$1y=defineComponent({name:"FlowArticleList",components:{ListItem},props:{articles:{type:Array,required:!0},pagination:{type:Object,default:null},fetching:{type:Boolean,required:!0},mammon:{type:Boolean,default:!0}},emits:["loadmore"],setup(e,t){const{isDarkTheme:n,isZhLang:r}=useEnhancer(),c=computed(()=>e.pagination?e.pagination.current_page<e.pagination.total_page:!1);return{LanguageKey,isZhLang:r,isDarkTheme:n,isLoadMoreEnabled:c,handleLoadmore:()=>{t.emit("loadmore")}}}}),list_vue_vue_type_style_index_0_scoped_075c5c21_lang="";function _sfc_ssrRender$1y(e,t,n,r,c,d,g,o){var O;const v=resolveComponent("placeholder"),x=resolveComponent("skeleton-base"),E=resolveComponent("skeleton-line"),k=resolveComponent("empty"),S=resolveComponent("client-only"),N=resolveComponent("Adsense"),L=resolveComponent("list-item"),P=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:"articles"},r))} data-v-075c5c21><div class="article-list" data-v-075c5c21>`),t(ssrRenderComponent(v,{data:e.articles.length,loading:!e.articles.length&&e.fetching},{loading:withCtx((V,z,U,W)=>{if(z)z(`<ul class="article-list-skeleton" data-v-075c5c21${W}><!--[-->`),ssrRenderList(6,Z=>{z(`<li class="item" data-v-075c5c21${W}><div class="thumb" data-v-075c5c21${W}>`),z(ssrRenderComponent(x,null,null,U,W)),z(`</div><div class="content" data-v-075c5c21${W}><div class="title" data-v-075c5c21${W}>`),z(ssrRenderComponent(E,null,null,U,W)),z(`</div><div class="description" data-v-075c5c21${W}><!--[-->`),ssrRenderList(2,re=>{z(`<div class="line-item" data-v-075c5c21${W}>`),z(ssrRenderComponent(E,null,null,U,W)),z("</div>")}),z("<!--]--></div>"),z(ssrRenderComponent(E,{class:"meta"},null,U,W)),z("</div></li>")}),z("<!--]--></ul>");else return[createVNode("ul",{class:"article-list-skeleton",key:"skeleton"},[(openBlock(),createBlock(Fragment,null,renderList(6,Z=>createVNode("li",{key:Z,class:"item"},[createVNode("div",{class:"thumb"},[createVNode(x)]),createVNode("div",{class:"content"},[createVNode("div",{class:"title"},[createVNode(E)]),createVNode("div",{class:"description"},[(openBlock(),createBlock(Fragment,null,renderList(2,re=>createVNode("div",{class:"line-item",key:re},[createVNode(E)])),64))]),createVNode(E,{class:"meta"})])])),64))])]}),placeholder:withCtx((V,z,U,W)=>{if(z)z(ssrRenderComponent(k,{class:"empty","i18n-key":e.LanguageKey.ARTICLE_PLACEHOLDER},null,U,W));else return[createVNode(k,{class:"empty","i18n-key":e.LanguageKey.ARTICLE_PLACEHOLDER},null,8,["i18n-key"])]}),default:withCtx((V,z,U,W)=>{if(z)z(`<div data-v-075c5c21${W}>`),z(ssrRenderComponent(S,null,{default:withCtx((Z,re,oe,se)=>{if(re)e.mammon?(re("<!--[-->"),e.isDarkTheme?re(ssrRenderComponent(N,{"ins-class":"mammon-ins","data-ad-format":"fluid","data-ad-layout-key":"-hj-9+3a-97+6s","data-ad-slot":"1765379407",class:"article-list-mammon"},null,oe,se)):re(ssrRenderComponent(N,{"ins-class":"mammon-ins","data-ad-format":"fluid","data-ad-layout-key":"-hj-9+3a-97+6s","data-ad-slot":"1148538406",class:"article-list-mammon"},null,oe,se)),re("<!--]-->")):re("<!---->");else return[e.mammon?(openBlock(),createBlock(Fragment,{key:0},[e.isDarkTheme?(openBlock(),createBlock(N,{key:0,"ins-class":"mammon-ins","data-ad-format":"fluid","data-ad-layout-key":"-hj-9+3a-97+6s","data-ad-slot":"1765379407",class:"article-list-mammon"})):(openBlock(),createBlock(N,{key:1,"ins-class":"mammon-ins","data-ad-format":"fluid","data-ad-layout-key":"-hj-9+3a-97+6s","data-ad-slot":"1148538406",class:"article-list-mammon"}))],64)):createCommentVNode("",!0)]}),_:1},U,W)),z("<!--[-->"),ssrRenderList(e.articles,Z=>{z(ssrRenderComponent(L,{class:"list-item",key:Z.id,article:Z},null,U,W))}),z("<!--]--></div>");else return[createVNode("div",{key:"list"},[createVNode(S,null,{default:withCtx(()=>[e.mammon?(openBlock(),createBlock(Fragment,{key:0},[e.isDarkTheme?(openBlock(),createBlock(N,{key:0,"ins-class":"mammon-ins","data-ad-format":"fluid","data-ad-layout-key":"-hj-9+3a-97+6s","data-ad-slot":"1765379407",class:"article-list-mammon"})):(openBlock(),createBlock(N,{key:1,"ins-class":"mammon-ins","data-ad-format":"fluid","data-ad-layout-key":"-hj-9+3a-97+6s","data-ad-slot":"1148538406",class:"article-list-mammon"}))],64)):createCommentVNode("",!0)]),_:1}),createVNode(TransitionGroup,{name:"list-fade"},{default:withCtx(()=>[(openBlock(!0),createBlock(Fragment,null,renderList(e.articles,Z=>(openBlock(),createBlock(L,{class:"list-item",key:Z.id,article:Z},null,8,["article"]))),128))]),_:1})])]}),_:1},n)),t(`</div><button class="article-load"${includeBooleanAttr(e.fetching||!e.isLoadMoreEnabled)?" disabled":""} data-v-075c5c21><div class="background" data-v-075c5c21><span class="left" data-v-075c5c21></span><span class="right" data-v-075c5c21></span></div><div class="content" data-v-075c5c21><span class="left" data-v-075c5c21>`),e.fetching?t("<!--[-->\u2022\u2022\u2022<!--]-->"):t(`<!--[-->${ssrInterpolate(e.articles.length)} / ${ssrInterpolate((O=e.pagination)==null?void 0:O.total)}<!--]-->`),t(`</span><span class="right" data-v-075c5c21><span class="${ssrRenderClass([{zh:e.isZhLang},"text"])}" data-v-075c5c21>`),e.fetching?t(ssrRenderComponent(P,{k:e.LanguageKey.ARTICLE_LIST_LOADING},null,n)):e.isLoadMoreEnabled?t(ssrRenderComponent(P,{k:e.LanguageKey.ARTICLE_LIST_LOADMORE},null,n)):t(ssrRenderComponent(P,{k:e.LanguageKey.ARTICLE_LIST_NO_MORE},null,n)),t('</span><i class="iconfont icon-loadmore" data-v-075c5c21></i></span></div></button></div>')}const _sfc_setup$1y=_sfc_main$1y.setup;_sfc_main$1y.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/flow/desktop/list.vue"),_sfc_setup$1y?_sfc_setup$1y(e,t):void 0};const ArticleList=_export_sfc(_sfc_main$1y,[["ssrRender",_sfc_ssrRender$1y],["__scopeId","data-v-075c5c21"]]);function isObject$2(e){return e!==null&&typeof e=="object"&&"constructor"in e&&e.constructor===Object}function extend$2(e={},t={}){Object.keys(t).forEach(n=>{typeof e[n]>"u"?e[n]=t[n]:isObject$2(t[n])&&isObject$2(e[n])&&Object.keys(t[n]).length>0&&extend$2(e[n],t[n])})}const ssrDocument={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function getDocument(){const e=typeof document<"u"?document:{};return extend$2(e,ssrDocument),e}const ssrWindow={document:ssrDocument,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(e){return typeof setTimeout>"u"?(e(),null):setTimeout(e,0)},cancelAnimationFrame(e){typeof setTimeout>"u"||clearTimeout(e)}};function getWindow(){const e=typeof window<"u"?window:{};return extend$2(e,ssrWindow),e}function makeReactive(e){const t=e.__proto__;Object.defineProperty(e,"__proto__",{get(){return t},set(n){t.__proto__=n}})}class Dom7 extends Array{constructor(t){typeof t=="number"?super(t):(super(...t||[]),makeReactive(this))}}function arrayFlat(e=[]){const t=[];return e.forEach(n=>{Array.isArray(n)?t.push(...arrayFlat(n)):t.push(n)}),t}function arrayFilter(e,t){return Array.prototype.filter.call(e,t)}function arrayUnique(e){const t=[];for(let n=0;n<e.length;n+=1)t.indexOf(e[n])===-1&&t.push(e[n]);return t}function qsa(e,t){if(typeof e!="string")return[e];const n=[],r=t.querySelectorAll(e);for(let c=0;c<r.length;c+=1)n.push(r[c]);return n}function $(e,t){const n=getWindow(),r=getDocument();let c=[];if(!t&&e instanceof Dom7)return e;if(!e)return new Dom7(c);if(typeof e=="string"){const d=e.trim();if(d.indexOf("<")>=0&&d.indexOf(">")>=0){let g="div";d.indexOf("<li")===0&&(g="ul"),d.indexOf("<tr")===0&&(g="tbody"),(d.indexOf("<td")===0||d.indexOf("<th")===0)&&(g="tr"),d.indexOf("<tbody")===0&&(g="table"),d.indexOf("<option")===0&&(g="select");const o=r.createElement(g);o.innerHTML=d;for(let v=0;v<o.childNodes.length;v+=1)c.push(o.childNodes[v])}else c=qsa(e.trim(),t||r)}else if(e.nodeType||e===n||e===r)c.push(e);else if(Array.isArray(e)){if(e instanceof Dom7)return e;c=e}return new Dom7(arrayUnique(c))}$.fn=Dom7.prototype;function addClass(...e){const t=arrayFlat(e.map(n=>n.split(" ")));return this.forEach(n=>{n.classList.add(...t)}),this}function removeClass(...e){const t=arrayFlat(e.map(n=>n.split(" ")));return this.forEach(n=>{n.classList.remove(...t)}),this}function toggleClass(...e){const t=arrayFlat(e.map(n=>n.split(" ")));this.forEach(n=>{t.forEach(r=>{n.classList.toggle(r)})})}function hasClass(...e){const t=arrayFlat(e.map(n=>n.split(" ")));return arrayFilter(this,n=>t.filter(r=>n.classList.contains(r)).length>0).length>0}function attr(e,t){if(arguments.length===1&&typeof e=="string")return this[0]?this[0].getAttribute(e):void 0;for(let n=0;n<this.length;n+=1)if(arguments.length===2)this[n].setAttribute(e,t);else for(const r in e)this[n][r]=e[r],this[n].setAttribute(r,e[r]);return this}function removeAttr(e){for(let t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this}function transform(e){for(let t=0;t<this.length;t+=1)this[t].style.transform=e;return this}function transition$1(e){for(let t=0;t<this.length;t+=1)this[t].style.transitionDuration=typeof e!="string"?`${e}ms`:e;return this}function on(...e){let[t,n,r,c]=e;typeof e[1]=="function"&&([t,r,c]=e,n=void 0),c||(c=!1);function d(x){const E=x.target;if(!E)return;const k=x.target.dom7EventData||[];if(k.indexOf(x)<0&&k.unshift(x),$(E).is(n))r.apply(E,k);else{const S=$(E).parents();for(let N=0;N<S.length;N+=1)$(S[N]).is(n)&&r.apply(S[N],k)}}function g(x){const E=x&&x.target?x.target.dom7EventData||[]:[];E.indexOf(x)<0&&E.unshift(x),r.apply(this,E)}const o=t.split(" ");let v;for(let x=0;x<this.length;x+=1){const E=this[x];if(n)for(v=0;v<o.length;v+=1){const k=o[v];E.dom7LiveListeners||(E.dom7LiveListeners={}),E.dom7LiveListeners[k]||(E.dom7LiveListeners[k]=[]),E.dom7LiveListeners[k].push({listener:r,proxyListener:d}),E.addEventListener(k,d,c)}else for(v=0;v<o.length;v+=1){const k=o[v];E.dom7Listeners||(E.dom7Listeners={}),E.dom7Listeners[k]||(E.dom7Listeners[k]=[]),E.dom7Listeners[k].push({listener:r,proxyListener:g}),E.addEventListener(k,g,c)}}return this}function off(...e){let[t,n,r,c]=e;typeof e[1]=="function"&&([t,r,c]=e,n=void 0),c||(c=!1);const d=t.split(" ");for(let g=0;g<d.length;g+=1){const o=d[g];for(let v=0;v<this.length;v+=1){const x=this[v];let E;if(!n&&x.dom7Listeners?E=x.dom7Listeners[o]:n&&x.dom7LiveListeners&&(E=x.dom7LiveListeners[o]),E&&E.length)for(let k=E.length-1;k>=0;k-=1){const S=E[k];r&&S.listener===r||r&&S.listener&&S.listener.dom7proxy&&S.listener.dom7proxy===r?(x.removeEventListener(o,S.proxyListener,c),E.splice(k,1)):r||(x.removeEventListener(o,S.proxyListener,c),E.splice(k,1))}}}return this}function trigger(...e){const t=getWindow(),n=e[0].split(" "),r=e[1];for(let c=0;c<n.length;c+=1){const d=n[c];for(let g=0;g<this.length;g+=1){const o=this[g];if(t.CustomEvent){const v=new t.CustomEvent(d,{detail:r,bubbles:!0,cancelable:!0});o.dom7EventData=e.filter((x,E)=>E>0),o.dispatchEvent(v),o.dom7EventData=[],delete o.dom7EventData}}}return this}function transitionEnd$1(e){const t=this;function n(r){r.target===this&&(e.call(this,r),t.off("transitionend",n))}return e&&t.on("transitionend",n),this}function outerWidth(e){if(this.length>0){if(e){const t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null}function outerHeight(e){if(this.length>0){if(e){const t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null}function offset(){if(this.length>0){const e=getWindow(),t=getDocument(),n=this[0],r=n.getBoundingClientRect(),c=t.body,d=n.clientTop||c.clientTop||0,g=n.clientLeft||c.clientLeft||0,o=n===e?e.scrollY:n.scrollTop,v=n===e?e.scrollX:n.scrollLeft;return{top:r.top+o-d,left:r.left+v-g}}return null}function styles(){const e=getWindow();return this[0]?e.getComputedStyle(this[0],null):{}}function css(e,t){const n=getWindow();let r;if(arguments.length===1)if(typeof e=="string"){if(this[0])return n.getComputedStyle(this[0],null).getPropertyValue(e)}else{for(r=0;r<this.length;r+=1)for(const c in e)this[r].style[c]=e[c];return this}if(arguments.length===2&&typeof e=="string"){for(r=0;r<this.length;r+=1)this[r].style[e]=t;return this}return this}function each(e){return e?(this.forEach((t,n)=>{e.apply(t,[t,n])}),this):this}function filter$1(e){const t=arrayFilter(this,e);return $(t)}function html(e){if(typeof e>"u")return this[0]?this[0].innerHTML:null;for(let t=0;t<this.length;t+=1)this[t].innerHTML=e;return this}function text(e){if(typeof e>"u")return this[0]?this[0].textContent.trim():null;for(let t=0;t<this.length;t+=1)this[t].textContent=e;return this}function is(e){const t=getWindow(),n=getDocument(),r=this[0];let c,d;if(!r||typeof e>"u")return!1;if(typeof e=="string"){if(r.matches)return r.matches(e);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(r.msMatchesSelector)return r.msMatchesSelector(e);for(c=$(e),d=0;d<c.length;d+=1)if(c[d]===r)return!0;return!1}if(e===n)return r===n;if(e===t)return r===t;if(e.nodeType||e instanceof Dom7){for(c=e.nodeType?[e]:e,d=0;d<c.length;d+=1)if(c[d]===r)return!0;return!1}return!1}function index(){let e=this[0],t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function eq(e){if(typeof e>"u")return this;const t=this.length;if(e>t-1)return $([]);if(e<0){const n=t+e;return n<0?$([]):$([this[n]])}return $([this[e]])}function append(...e){let t;const n=getDocument();for(let r=0;r<e.length;r+=1){t=e[r];for(let c=0;c<this.length;c+=1)if(typeof t=="string"){const d=n.createElement("div");for(d.innerHTML=t;d.firstChild;)this[c].appendChild(d.firstChild)}else if(t instanceof Dom7)for(let d=0;d<t.length;d+=1)this[c].appendChild(t[d]);else this[c].appendChild(t)}return this}function prepend(e){const t=getDocument();let n,r;for(n=0;n<this.length;n+=1)if(typeof e=="string"){const c=t.createElement("div");for(c.innerHTML=e,r=c.childNodes.length-1;r>=0;r-=1)this[n].insertBefore(c.childNodes[r],this[n].childNodes[0])}else if(e instanceof Dom7)for(r=0;r<e.length;r+=1)this[n].insertBefore(e[r],this[n].childNodes[0]);else this[n].insertBefore(e,this[n].childNodes[0]);return this}function next(e){return this.length>0?e?this[0].nextElementSibling&&$(this[0].nextElementSibling).is(e)?$([this[0].nextElementSibling]):$([]):this[0].nextElementSibling?$([this[0].nextElementSibling]):$([]):$([])}function nextAll(e){const t=[];let n=this[0];if(!n)return $([]);for(;n.nextElementSibling;){const r=n.nextElementSibling;e?$(r).is(e)&&t.push(r):t.push(r),n=r}return $(t)}function prev(e){if(this.length>0){const t=this[0];return e?t.previousElementSibling&&$(t.previousElementSibling).is(e)?$([t.previousElementSibling]):$([]):t.previousElementSibling?$([t.previousElementSibling]):$([])}return $([])}function prevAll(e){const t=[];let n=this[0];if(!n)return $([]);for(;n.previousElementSibling;){const r=n.previousElementSibling;e?$(r).is(e)&&t.push(r):t.push(r),n=r}return $(t)}function parent(e){const t=[];for(let n=0;n<this.length;n+=1)this[n].parentNode!==null&&(e?$(this[n].parentNode).is(e)&&t.push(this[n].parentNode):t.push(this[n].parentNode));return $(t)}function parents(e){const t=[];for(let n=0;n<this.length;n+=1){let r=this[n].parentNode;for(;r;)e?$(r).is(e)&&t.push(r):t.push(r),r=r.parentNode}return $(t)}function closest(e){let t=this;return typeof e>"u"?$([]):(t.is(e)||(t=t.parents(e).eq(0)),t)}function find(e){const t=[];for(let n=0;n<this.length;n+=1){const r=this[n].querySelectorAll(e);for(let c=0;c<r.length;c+=1)t.push(r[c])}return $(t)}function children(e){const t=[];for(let n=0;n<this.length;n+=1){const r=this[n].children;for(let c=0;c<r.length;c+=1)(!e||$(r[c]).is(e))&&t.push(r[c])}return $(t)}function remove(){for(let e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}const Methods={addClass,removeClass,hasClass,toggleClass,attr,removeAttr,transform,transition:transition$1,on,off,trigger,transitionEnd:transitionEnd$1,outerWidth,outerHeight,styles,offset,css,each,html,text,is,index,eq,append,prepend,next,nextAll,prev,prevAll,parent,parents,closest,find,children,filter:filter$1,remove};Object.keys(Methods).forEach(e=>{Object.defineProperty($.fn,e,{value:Methods[e],writable:!0})});function deleteProps(e){const t=e;Object.keys(t).forEach(n=>{try{t[n]=null}catch{}try{delete t[n]}catch{}})}function nextTick(e,t=0){return setTimeout(e,t)}function now(){return Date.now()}function getComputedStyle$1(e){const t=getWindow();let n;return t.getComputedStyle&&(n=t.getComputedStyle(e,null)),!n&&e.currentStyle&&(n=e.currentStyle),n||(n=e.style),n}function getTranslate(e,t="x"){const n=getWindow();let r,c,d;const g=getComputedStyle$1(e);return n.WebKitCSSMatrix?(c=g.transform||g.webkitTransform,c.split(",").length>6&&(c=c.split(", ").map(o=>o.replace(",",".")).join(", ")),d=new n.WebKitCSSMatrix(c==="none"?"":c)):(d=g.MozTransform||g.OTransform||g.MsTransform||g.msTransform||g.transform||g.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=d.toString().split(",")),t==="x"&&(n.WebKitCSSMatrix?c=d.m41:r.length===16?c=parseFloat(r[12]):c=parseFloat(r[4])),t==="y"&&(n.WebKitCSSMatrix?c=d.m42:r.length===16?c=parseFloat(r[13]):c=parseFloat(r[5])),c||0}function isObject$1(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function isNode(e){return typeof window<"u"&&typeof window.HTMLElement<"u"?e instanceof HTMLElement:e&&(e.nodeType===1||e.nodeType===11)}function extend$1(...e){const t=Object(e[0]),n=["__proto__","constructor","prototype"];for(let r=1;r<e.length;r+=1){const c=e[r];if(c!=null&&!isNode(c)){const d=Object.keys(Object(c)).filter(g=>n.indexOf(g)<0);for(let g=0,o=d.length;g<o;g+=1){const v=d[g],x=Object.getOwnPropertyDescriptor(c,v);x!==void 0&&x.enumerable&&(isObject$1(t[v])&&isObject$1(c[v])?c[v].__swiper__?t[v]=c[v]:extend$1(t[v],c[v]):!isObject$1(t[v])&&isObject$1(c[v])?(t[v]={},c[v].__swiper__?t[v]=c[v]:extend$1(t[v],c[v])):t[v]=c[v])}}}return t}function setCSSProperty(e,t,n){e.style.setProperty(t,n)}function animateCSSModeScroll({swiper:e,targetPosition:t,side:n}){const r=getWindow(),c=-e.translate;let d=null,g;const o=e.params.speed;e.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(e.cssModeFrameID);const v=t>c?"next":"prev",x=(k,S)=>v==="next"&&k>=S||v==="prev"&&k<=S,E=()=>{g=new Date().getTime(),d===null&&(d=g);const k=Math.max(Math.min((g-d)/o,1),0),S=.5-Math.cos(k*Math.PI)/2;let N=c+S*(t-c);if(x(N,t)&&(N=t),e.wrapperEl.scrollTo({[n]:N}),x(N,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[n]:N})}),r.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=r.requestAnimationFrame(E)};E()}let support;function calcSupport(){const e=getWindow(),t=getDocument();return{smoothScroll:t.documentElement&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),passiveListener:function(){let r=!1;try{const c=Object.defineProperty({},"passive",{get(){r=!0}});e.addEventListener("testPassiveListener",null,c)}catch{}return r}(),gestures:function(){return"ongesturestart"in e}()}}function getSupport(){return support||(support=calcSupport()),support}let deviceCached;function calcDevice({userAgent:e}={}){const t=getSupport(),n=getWindow(),r=n.navigator.platform,c=e||n.navigator.userAgent,d={ios:!1,android:!1},g=n.screen.width,o=n.screen.height,v=c.match(/(Android);?[\s\/]+([\d.]+)?/);let x=c.match(/(iPad).*OS\s([\d_]+)/);const E=c.match(/(iPod)(.*OS\s([\d_]+))?/),k=!x&&c.match(/(iPhone\sOS|iOS)\s([\d_]+)/),S=r==="Win32";let N=r==="MacIntel";const L=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!x&&N&&t.touch&&L.indexOf(`${g}x${o}`)>=0&&(x=c.match(/(Version)\/([\d.]+)/),x||(x=[0,1,"13_0_0"]),N=!1),v&&!S&&(d.os="android",d.android=!0),(x||k||E)&&(d.os="ios",d.ios=!0),d}function getDevice(e={}){return deviceCached||(deviceCached=calcDevice(e)),deviceCached}let browser$1;function calcBrowser(){const e=getWindow();function t(){const n=e.navigator.userAgent.toLowerCase();return n.indexOf("safari")>=0&&n.indexOf("chrome")<0&&n.indexOf("android")<0}return{isSafari:t(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}function getBrowser(){return browser$1||(browser$1=calcBrowser()),browser$1}function Resize({swiper:e,on:t,emit:n}){const r=getWindow();let c=null,d=null;const g=()=>{!e||e.destroyed||!e.initialized||(n("beforeResize"),n("resize"))},o=()=>{!e||e.destroyed||!e.initialized||(c=new ResizeObserver(E=>{d=r.requestAnimationFrame(()=>{const{width:k,height:S}=e;let N=k,L=S;E.forEach(({contentBoxSize:P,contentRect:O,target:V})=>{V&&V!==e.el||(N=O?O.width:(P[0]||P).inlineSize,L=O?O.height:(P[0]||P).blockSize)}),(N!==k||L!==S)&&g()})}),c.observe(e.el))},v=()=>{d&&r.cancelAnimationFrame(d),c&&c.unobserve&&e.el&&(c.unobserve(e.el),c=null)},x=()=>{!e||e.destroyed||!e.initialized||n("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof r.ResizeObserver<"u"){o();return}r.addEventListener("resize",g),r.addEventListener("orientationchange",x)}),t("destroy",()=>{v(),r.removeEventListener("resize",g),r.removeEventListener("orientationchange",x)})}function Observer({swiper:e,extendParams:t,on:n,emit:r}){const c=[],d=getWindow(),g=(x,E={})=>{const k=d.MutationObserver||d.WebkitMutationObserver,S=new k(N=>{if(N.length===1){r("observerUpdate",N[0]);return}const L=function(){r("observerUpdate",N[0])};d.requestAnimationFrame?d.requestAnimationFrame(L):d.setTimeout(L,0)});S.observe(x,{attributes:typeof E.attributes>"u"?!0:E.attributes,childList:typeof E.childList>"u"?!0:E.childList,characterData:typeof E.characterData>"u"?!0:E.characterData}),c.push(S)},o=()=>{if(!!e.params.observer){if(e.params.observeParents){const x=e.$el.parents();for(let E=0;E<x.length;E+=1)g(x[E])}g(e.$el[0],{childList:e.params.observeSlideChildren}),g(e.$wrapperEl[0],{attributes:!1})}},v=()=>{c.forEach(x=>{x.disconnect()}),c.splice(0,c.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",o),n("destroy",v)}const eventsEmitter={on(e,t,n){const r=this;if(!r.eventsListeners||r.destroyed||typeof t!="function")return r;const c=n?"unshift":"push";return e.split(" ").forEach(d=>{r.eventsListeners[d]||(r.eventsListeners[d]=[]),r.eventsListeners[d][c](t)}),r},once(e,t,n){const r=this;if(!r.eventsListeners||r.destroyed||typeof t!="function")return r;function c(...d){r.off(e,c),c.__emitterProxy&&delete c.__emitterProxy,t.apply(r,d)}return c.__emitterProxy=t,r.on(e,c,n)},onAny(e,t){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;const r=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[r](e),n},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsAnyListeners)return t;const n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off(e,t){const n=this;return!n.eventsListeners||n.destroyed||!n.eventsListeners||e.split(" ").forEach(r=>{typeof t>"u"?n.eventsListeners[r]=[]:n.eventsListeners[r]&&n.eventsListeners[r].forEach((c,d)=>{(c===t||c.__emitterProxy&&c.__emitterProxy===t)&&n.eventsListeners[r].splice(d,1)})}),n},emit(...e){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsListeners)return t;let n,r,c;return typeof e[0]=="string"||Array.isArray(e[0])?(n=e[0],r=e.slice(1,e.length),c=t):(n=e[0].events,r=e[0].data,c=e[0].context||t),r.unshift(c),(Array.isArray(n)?n:n.split(" ")).forEach(g=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach(o=>{o.apply(c,[g,...r])}),t.eventsListeners&&t.eventsListeners[g]&&t.eventsListeners[g].forEach(o=>{o.apply(c,r)})}),t}};function updateSize(){const e=this;let t,n;const r=e.$el;typeof e.params.width<"u"&&e.params.width!==null?t=e.params.width:t=r[0].clientWidth,typeof e.params.height<"u"&&e.params.height!==null?n=e.params.height:n=r[0].clientHeight,!(t===0&&e.isHorizontal()||n===0&&e.isVertical())&&(t=t-parseInt(r.css("padding-left")||0,10)-parseInt(r.css("padding-right")||0,10),n=n-parseInt(r.css("padding-top")||0,10)-parseInt(r.css("padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(n)&&(n=0),Object.assign(e,{width:t,height:n,size:e.isHorizontal()?t:n}))}function updateSlides(){const e=this;function t(me){return e.isHorizontal()?me:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[me]}function n(me,we){return parseFloat(me.getPropertyValue(t(we))||0)}const r=e.params,{$wrapperEl:c,size:d,rtlTranslate:g,wrongRTL:o}=e,v=e.virtual&&r.virtual.enabled,x=v?e.virtual.slides.length:e.slides.length,E=c.children(`.${e.params.slideClass}`),k=v?e.virtual.slides.length:E.length;let S=[];const N=[],L=[];let P=r.slidesOffsetBefore;typeof P=="function"&&(P=r.slidesOffsetBefore.call(e));let O=r.slidesOffsetAfter;typeof O=="function"&&(O=r.slidesOffsetAfter.call(e));const V=e.snapGrid.length,z=e.slidesGrid.length;let U=r.spaceBetween,W=-P,Z=0,re=0;if(typeof d>"u")return;typeof U=="string"&&U.indexOf("%")>=0&&(U=parseFloat(U.replace("%",""))/100*d),e.virtualSize=-U,g?E.css({marginLeft:"",marginBottom:"",marginTop:""}):E.css({marginRight:"",marginBottom:"",marginTop:""}),r.centeredSlides&&r.cssMode&&(setCSSProperty(e.wrapperEl,"--swiper-centered-offset-before",""),setCSSProperty(e.wrapperEl,"--swiper-centered-offset-after",""));const oe=r.grid&&r.grid.rows>1&&e.grid;oe&&e.grid.initSlides(k);let se;const ce=r.slidesPerView==="auto"&&r.breakpoints&&Object.keys(r.breakpoints).filter(me=>typeof r.breakpoints[me].slidesPerView<"u").length>0;for(let me=0;me<k;me+=1){se=0;const we=E.eq(me);if(oe&&e.grid.updateSlide(me,we,k,t),we.css("display")!=="none"){if(r.slidesPerView==="auto"){ce&&(E[me].style[t("width")]="");const ae=getComputedStyle(we[0]),Ce=we[0].style.transform,Fe=we[0].style.webkitTransform;if(Ce&&(we[0].style.transform="none"),Fe&&(we[0].style.webkitTransform="none"),r.roundLengths)se=e.isHorizontal()?we.outerWidth(!0):we.outerHeight(!0);else{const it=n(ae,"width"),_e=n(ae,"padding-left"),ke=n(ae,"padding-right"),ze=n(ae,"margin-left"),nt=n(ae,"margin-right"),mt=ae.getPropertyValue("box-sizing");if(mt&&mt==="border-box")se=it+ze+nt;else{const{clientWidth:qt,offsetWidth:un}=we[0];se=it+_e+ke+ze+nt+(un-qt)}}Ce&&(we[0].style.transform=Ce),Fe&&(we[0].style.webkitTransform=Fe),r.roundLengths&&(se=Math.floor(se))}else se=(d-(r.slidesPerView-1)*U)/r.slidesPerView,r.roundLengths&&(se=Math.floor(se)),E[me]&&(E[me].style[t("width")]=`${se}px`);E[me]&&(E[me].swiperSlideSize=se),L.push(se),r.centeredSlides?(W=W+se/2+Z/2+U,Z===0&&me!==0&&(W=W-d/2-U),me===0&&(W=W-d/2-U),Math.abs(W)<1/1e3&&(W=0),r.roundLengths&&(W=Math.floor(W)),re%r.slidesPerGroup===0&&S.push(W),N.push(W)):(r.roundLengths&&(W=Math.floor(W)),(re-Math.min(e.params.slidesPerGroupSkip,re))%e.params.slidesPerGroup===0&&S.push(W),N.push(W),W=W+se+U),e.virtualSize+=se+U,Z=se,re+=1}}if(e.virtualSize=Math.max(e.virtualSize,d)+O,g&&o&&(r.effect==="slide"||r.effect==="coverflow")&&c.css({width:`${e.virtualSize+r.spaceBetween}px`}),r.setWrapperSize&&c.css({[t("width")]:`${e.virtualSize+r.spaceBetween}px`}),oe&&e.grid.updateWrapperSize(se,S,t),!r.centeredSlides){const me=[];for(let we=0;we<S.length;we+=1){let ae=S[we];r.roundLengths&&(ae=Math.floor(ae)),S[we]<=e.virtualSize-d&&me.push(ae)}S=me,Math.floor(e.virtualSize-d)-Math.floor(S[S.length-1])>1&&S.push(e.virtualSize-d)}if(S.length===0&&(S=[0]),r.spaceBetween!==0){const me=e.isHorizontal()&&g?"marginLeft":t("marginRight");E.filter((we,ae)=>r.cssMode?ae!==E.length-1:!0).css({[me]:`${U}px`})}if(r.centeredSlides&&r.centeredSlidesBounds){let me=0;L.forEach(ae=>{me+=ae+(r.spaceBetween?r.spaceBetween:0)}),me-=r.spaceBetween;const we=me-d;S=S.map(ae=>ae<0?-P:ae>we?we+O:ae)}if(r.centerInsufficientSlides){let me=0;if(L.forEach(we=>{me+=we+(r.spaceBetween?r.spaceBetween:0)}),me-=r.spaceBetween,me<d){const we=(d-me)/2;S.forEach((ae,Ce)=>{S[Ce]=ae-we}),N.forEach((ae,Ce)=>{N[Ce]=ae+we})}}if(Object.assign(e,{slides:E,snapGrid:S,slidesGrid:N,slidesSizesGrid:L}),r.centeredSlides&&r.cssMode&&!r.centeredSlidesBounds){setCSSProperty(e.wrapperEl,"--swiper-centered-offset-before",`${-S[0]}px`),setCSSProperty(e.wrapperEl,"--swiper-centered-offset-after",`${e.size/2-L[L.length-1]/2}px`);const me=-e.snapGrid[0],we=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map(ae=>ae+me),e.slidesGrid=e.slidesGrid.map(ae=>ae+we)}if(k!==x&&e.emit("slidesLengthChange"),S.length!==V&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),N.length!==z&&e.emit("slidesGridLengthChange"),r.watchSlidesProgress&&e.updateSlidesOffset(),!v&&!r.cssMode&&(r.effect==="slide"||r.effect==="fade")){const me=`${r.containerModifierClass}backface-hidden`,we=e.$el.hasClass(me);k<=r.maxBackfaceHiddenSlides?we||e.$el.addClass(me):we&&e.$el.removeClass(me)}}function updateAutoHeight(e){const t=this,n=[],r=t.virtual&&t.params.virtual.enabled;let c=0,d;typeof e=="number"?t.setTransition(e):e===!0&&t.setTransition(t.params.speed);const g=o=>r?t.slides.filter(v=>parseInt(v.getAttribute("data-swiper-slide-index"),10)===o)[0]:t.slides.eq(o)[0];if(t.params.slidesPerView!=="auto"&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||$([])).each(o=>{n.push(o)});else for(d=0;d<Math.ceil(t.params.slidesPerView);d+=1){const o=t.activeIndex+d;if(o>t.slides.length&&!r)break;n.push(g(o))}else n.push(g(t.activeIndex));for(d=0;d<n.length;d+=1)if(typeof n[d]<"u"){const o=n[d].offsetHeight;c=o>c?o:c}(c||c===0)&&t.$wrapperEl.css("height",`${c}px`)}function updateSlidesOffset(){const e=this,t=e.slides;for(let n=0;n<t.length;n+=1)t[n].swiperSlideOffset=e.isHorizontal()?t[n].offsetLeft:t[n].offsetTop}function updateSlidesProgress(e=this&&this.translate||0){const t=this,n=t.params,{slides:r,rtlTranslate:c,snapGrid:d}=t;if(r.length===0)return;typeof r[0].swiperSlideOffset>"u"&&t.updateSlidesOffset();let g=-e;c&&(g=e),r.removeClass(n.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(let o=0;o<r.length;o+=1){const v=r[o];let x=v.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(x-=r[0].swiperSlideOffset);const E=(g+(n.centeredSlides?t.minTranslate():0)-x)/(v.swiperSlideSize+n.spaceBetween),k=(g-d[0]+(n.centeredSlides?t.minTranslate():0)-x)/(v.swiperSlideSize+n.spaceBetween),S=-(g-x),N=S+t.slidesSizesGrid[o];(S>=0&&S<t.size-1||N>1&&N<=t.size||S<=0&&N>=t.size)&&(t.visibleSlides.push(v),t.visibleSlidesIndexes.push(o),r.eq(o).addClass(n.slideVisibleClass)),v.progress=c?-E:E,v.originalProgress=c?-k:k}t.visibleSlides=$(t.visibleSlides)}function updateProgress(e){const t=this;if(typeof e>"u"){const x=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*x||0}const n=t.params,r=t.maxTranslate()-t.minTranslate();let{progress:c,isBeginning:d,isEnd:g}=t;const o=d,v=g;r===0?(c=0,d=!0,g=!0):(c=(e-t.minTranslate())/r,d=c<=0,g=c>=1),Object.assign(t,{progress:c,isBeginning:d,isEnd:g}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&t.updateSlidesProgress(e),d&&!o&&t.emit("reachBeginning toEdge"),g&&!v&&t.emit("reachEnd toEdge"),(o&&!d||v&&!g)&&t.emit("fromEdge"),t.emit("progress",c)}function updateSlidesClasses(){const e=this,{slides:t,params:n,$wrapperEl:r,activeIndex:c,realIndex:d}=e,g=e.virtual&&n.virtual.enabled;t.removeClass(`${n.slideActiveClass} ${n.slideNextClass} ${n.slidePrevClass} ${n.slideDuplicateActiveClass} ${n.slideDuplicateNextClass} ${n.slideDuplicatePrevClass}`);let o;g?o=e.$wrapperEl.find(`.${n.slideClass}[data-swiper-slide-index="${c}"]`):o=t.eq(c),o.addClass(n.slideActiveClass),n.loop&&(o.hasClass(n.slideDuplicateClass)?r.children(`.${n.slideClass}:not(.${n.slideDuplicateClass})[data-swiper-slide-index="${d}"]`).addClass(n.slideDuplicateActiveClass):r.children(`.${n.slideClass}.${n.slideDuplicateClass}[data-swiper-slide-index="${d}"]`).addClass(n.slideDuplicateActiveClass));let v=o.nextAll(`.${n.slideClass}`).eq(0).addClass(n.slideNextClass);n.loop&&v.length===0&&(v=t.eq(0),v.addClass(n.slideNextClass));let x=o.prevAll(`.${n.slideClass}`).eq(0).addClass(n.slidePrevClass);n.loop&&x.length===0&&(x=t.eq(-1),x.addClass(n.slidePrevClass)),n.loop&&(v.hasClass(n.slideDuplicateClass)?r.children(`.${n.slideClass}:not(.${n.slideDuplicateClass})[data-swiper-slide-index="${v.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicateNextClass):r.children(`.${n.slideClass}.${n.slideDuplicateClass}[data-swiper-slide-index="${v.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicateNextClass),x.hasClass(n.slideDuplicateClass)?r.children(`.${n.slideClass}:not(.${n.slideDuplicateClass})[data-swiper-slide-index="${x.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicatePrevClass):r.children(`.${n.slideClass}.${n.slideDuplicateClass}[data-swiper-slide-index="${x.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicatePrevClass)),e.emitSlidesClasses()}function updateActiveIndex(e){const t=this,n=t.rtlTranslate?t.translate:-t.translate,{slidesGrid:r,snapGrid:c,params:d,activeIndex:g,realIndex:o,snapIndex:v}=t;let x=e,E;if(typeof x>"u"){for(let S=0;S<r.length;S+=1)typeof r[S+1]<"u"?n>=r[S]&&n<r[S+1]-(r[S+1]-r[S])/2?x=S:n>=r[S]&&n<r[S+1]&&(x=S+1):n>=r[S]&&(x=S);d.normalizeSlideIndex&&(x<0||typeof x>"u")&&(x=0)}if(c.indexOf(n)>=0)E=c.indexOf(n);else{const S=Math.min(d.slidesPerGroupSkip,x);E=S+Math.floor((x-S)/d.slidesPerGroup)}if(E>=c.length&&(E=c.length-1),x===g){E!==v&&(t.snapIndex=E,t.emit("snapIndexChange"));return}const k=parseInt(t.slides.eq(x).attr("data-swiper-slide-index")||x,10);Object.assign(t,{snapIndex:E,realIndex:k,previousIndex:g,activeIndex:x}),t.emit("activeIndexChange"),t.emit("snapIndexChange"),o!==k&&t.emit("realIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&t.emit("slideChange")}function updateClickedSlide(e){const t=this,n=t.params,r=$(e).closest(`.${n.slideClass}`)[0];let c=!1,d;if(r){for(let g=0;g<t.slides.length;g+=1)if(t.slides[g]===r){c=!0,d=g;break}}if(r&&c)t.clickedSlide=r,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt($(r).attr("data-swiper-slide-index"),10):t.clickedIndex=d;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}n.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}const update={updateSize,updateSlides,updateAutoHeight,updateSlidesOffset,updateSlidesProgress,updateProgress,updateSlidesClasses,updateActiveIndex,updateClickedSlide};function getSwiperTranslate(e=this.isHorizontal()?"x":"y"){const t=this,{params:n,rtlTranslate:r,translate:c,$wrapperEl:d}=t;if(n.virtualTranslate)return r?-c:c;if(n.cssMode)return c;let g=getTranslate(d[0],e);return r&&(g=-g),g||0}function setTranslate(e,t){const n=this,{rtlTranslate:r,params:c,$wrapperEl:d,wrapperEl:g,progress:o}=n;let v=0,x=0;const E=0;n.isHorizontal()?v=r?-e:e:x=e,c.roundLengths&&(v=Math.floor(v),x=Math.floor(x)),c.cssMode?g[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-v:-x:c.virtualTranslate||d.transform(`translate3d(${v}px, ${x}px, ${E}px)`),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?v:x;let k;const S=n.maxTranslate()-n.minTranslate();S===0?k=0:k=(e-n.minTranslate())/S,k!==o&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)}function minTranslate(){return-this.snapGrid[0]}function maxTranslate(){return-this.snapGrid[this.snapGrid.length-1]}function translateTo(e=0,t=this.params.speed,n=!0,r=!0,c){const d=this,{params:g,wrapperEl:o}=d;if(d.animating&&g.preventInteractionOnTransition)return!1;const v=d.minTranslate(),x=d.maxTranslate();let E;if(r&&e>v?E=v:r&&e<x?E=x:E=e,d.updateProgress(E),g.cssMode){const k=d.isHorizontal();if(t===0)o[k?"scrollLeft":"scrollTop"]=-E;else{if(!d.support.smoothScroll)return animateCSSModeScroll({swiper:d,targetPosition:-E,side:k?"left":"top"}),!0;o.scrollTo({[k?"left":"top"]:-E,behavior:"smooth"})}return!0}return t===0?(d.setTransition(0),d.setTranslate(E),n&&(d.emit("beforeTransitionStart",t,c),d.emit("transitionEnd"))):(d.setTransition(t),d.setTranslate(E),n&&(d.emit("beforeTransitionStart",t,c),d.emit("transitionStart")),d.animating||(d.animating=!0,d.onTranslateToWrapperTransitionEnd||(d.onTranslateToWrapperTransitionEnd=function(S){!d||d.destroyed||S.target===this&&(d.$wrapperEl[0].removeEventListener("transitionend",d.onTranslateToWrapperTransitionEnd),d.$wrapperEl[0].removeEventListener("webkitTransitionEnd",d.onTranslateToWrapperTransitionEnd),d.onTranslateToWrapperTransitionEnd=null,delete d.onTranslateToWrapperTransitionEnd,n&&d.emit("transitionEnd"))}),d.$wrapperEl[0].addEventListener("transitionend",d.onTranslateToWrapperTransitionEnd),d.$wrapperEl[0].addEventListener("webkitTransitionEnd",d.onTranslateToWrapperTransitionEnd))),!0}const translate={getTranslate:getSwiperTranslate,setTranslate,minTranslate,maxTranslate,translateTo};function setTransition(e,t){const n=this;n.params.cssMode||n.$wrapperEl.transition(e),n.emit("setTransition",e,t)}function transitionEmit({swiper:e,runCallbacks:t,direction:n,step:r}){const{activeIndex:c,previousIndex:d}=e;let g=n;if(g||(c>d?g="next":c<d?g="prev":g="reset"),e.emit(`transition${r}`),t&&c!==d){if(g==="reset"){e.emit(`slideResetTransition${r}`);return}e.emit(`slideChangeTransition${r}`),g==="next"?e.emit(`slideNextTransition${r}`):e.emit(`slidePrevTransition${r}`)}}function transitionStart(e=!0,t){const n=this,{params:r}=n;r.cssMode||(r.autoHeight&&n.updateAutoHeight(),transitionEmit({swiper:n,runCallbacks:e,direction:t,step:"Start"}))}function transitionEnd(e=!0,t){const n=this,{params:r}=n;n.animating=!1,!r.cssMode&&(n.setTransition(0),transitionEmit({swiper:n,runCallbacks:e,direction:t,step:"End"}))}const transition={setTransition,transitionStart,transitionEnd};function slideTo(e=0,t=this.params.speed,n=!0,r,c){if(typeof e!="number"&&typeof e!="string")throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof e}] given.`);if(typeof e=="string"){const U=parseInt(e,10);if(!isFinite(U))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${e}] given.`);e=U}const d=this;let g=e;g<0&&(g=0);const{params:o,snapGrid:v,slidesGrid:x,previousIndex:E,activeIndex:k,rtlTranslate:S,wrapperEl:N,enabled:L}=d;if(d.animating&&o.preventInteractionOnTransition||!L&&!r&&!c)return!1;const P=Math.min(d.params.slidesPerGroupSkip,g);let O=P+Math.floor((g-P)/d.params.slidesPerGroup);O>=v.length&&(O=v.length-1);const V=-v[O];if(o.normalizeSlideIndex)for(let U=0;U<x.length;U+=1){const W=-Math.floor(V*100),Z=Math.floor(x[U]*100),re=Math.floor(x[U+1]*100);typeof x[U+1]<"u"?W>=Z&&W<re-(re-Z)/2?g=U:W>=Z&&W<re&&(g=U+1):W>=Z&&(g=U)}if(d.initialized&&g!==k&&(!d.allowSlideNext&&V<d.translate&&V<d.minTranslate()||!d.allowSlidePrev&&V>d.translate&&V>d.maxTranslate()&&(k||0)!==g))return!1;g!==(E||0)&&n&&d.emit("beforeSlideChangeStart"),d.updateProgress(V);let z;if(g>k?z="next":g<k?z="prev":z="reset",S&&-V===d.translate||!S&&V===d.translate)return d.updateActiveIndex(g),o.autoHeight&&d.updateAutoHeight(),d.updateSlidesClasses(),o.effect!=="slide"&&d.setTranslate(V),z!=="reset"&&(d.transitionStart(n,z),d.transitionEnd(n,z)),!1;if(o.cssMode){const U=d.isHorizontal(),W=S?V:-V;if(t===0){const Z=d.virtual&&d.params.virtual.enabled;Z&&(d.wrapperEl.style.scrollSnapType="none",d._immediateVirtual=!0),N[U?"scrollLeft":"scrollTop"]=W,Z&&requestAnimationFrame(()=>{d.wrapperEl.style.scrollSnapType="",d._swiperImmediateVirtual=!1})}else{if(!d.support.smoothScroll)return animateCSSModeScroll({swiper:d,targetPosition:W,side:U?"left":"top"}),!0;N.scrollTo({[U?"left":"top"]:W,behavior:"smooth"})}return!0}return d.setTransition(t),d.setTranslate(V),d.updateActiveIndex(g),d.updateSlidesClasses(),d.emit("beforeTransitionStart",t,r),d.transitionStart(n,z),t===0?d.transitionEnd(n,z):d.animating||(d.animating=!0,d.onSlideToWrapperTransitionEnd||(d.onSlideToWrapperTransitionEnd=function(W){!d||d.destroyed||W.target===this&&(d.$wrapperEl[0].removeEventListener("transitionend",d.onSlideToWrapperTransitionEnd),d.$wrapperEl[0].removeEventListener("webkitTransitionEnd",d.onSlideToWrapperTransitionEnd),d.onSlideToWrapperTransitionEnd=null,delete d.onSlideToWrapperTransitionEnd,d.transitionEnd(n,z))}),d.$wrapperEl[0].addEventListener("transitionend",d.onSlideToWrapperTransitionEnd),d.$wrapperEl[0].addEventListener("webkitTransitionEnd",d.onSlideToWrapperTransitionEnd)),!0}function slideToLoop(e=0,t=this.params.speed,n=!0,r){if(typeof e=="string"){const g=parseInt(e,10);if(!isFinite(g))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${e}] given.`);e=g}const c=this;let d=e;return c.params.loop&&(d+=c.loopedSlides),c.slideTo(d,t,n,r)}function slideNext(e=this.params.speed,t=!0,n){const r=this,{animating:c,enabled:d,params:g}=r;if(!d)return r;let o=g.slidesPerGroup;g.slidesPerView==="auto"&&g.slidesPerGroup===1&&g.slidesPerGroupAuto&&(o=Math.max(r.slidesPerViewDynamic("current",!0),1));const v=r.activeIndex<g.slidesPerGroupSkip?1:o;if(g.loop){if(c&&g.loopPreventsSlide)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}return g.rewind&&r.isEnd?r.slideTo(0,e,t,n):r.slideTo(r.activeIndex+v,e,t,n)}function slidePrev(e=this.params.speed,t=!0,n){const r=this,{params:c,animating:d,snapGrid:g,slidesGrid:o,rtlTranslate:v,enabled:x}=r;if(!x)return r;if(c.loop){if(d&&c.loopPreventsSlide)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}const E=v?r.translate:-r.translate;function k(O){return O<0?-Math.floor(Math.abs(O)):Math.floor(O)}const S=k(E),N=g.map(O=>k(O));let L=g[N.indexOf(S)-1];if(typeof L>"u"&&c.cssMode){let O;g.forEach((V,z)=>{S>=V&&(O=z)}),typeof O<"u"&&(L=g[O>0?O-1:O])}let P=0;if(typeof L<"u"&&(P=o.indexOf(L),P<0&&(P=r.activeIndex-1),c.slidesPerView==="auto"&&c.slidesPerGroup===1&&c.slidesPerGroupAuto&&(P=P-r.slidesPerViewDynamic("previous",!0)+1,P=Math.max(P,0))),c.rewind&&r.isBeginning){const O=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(O,e,t,n)}return r.slideTo(P,e,t,n)}function slideReset(e=this.params.speed,t=!0,n){const r=this;return r.slideTo(r.activeIndex,e,t,n)}function slideToClosest(e=this.params.speed,t=!0,n,r=.5){const c=this;let d=c.activeIndex;const g=Math.min(c.params.slidesPerGroupSkip,d),o=g+Math.floor((d-g)/c.params.slidesPerGroup),v=c.rtlTranslate?c.translate:-c.translate;if(v>=c.snapGrid[o]){const x=c.snapGrid[o],E=c.snapGrid[o+1];v-x>(E-x)*r&&(d+=c.params.slidesPerGroup)}else{const x=c.snapGrid[o-1],E=c.snapGrid[o];v-x<=(E-x)*r&&(d-=c.params.slidesPerGroup)}return d=Math.max(d,0),d=Math.min(d,c.slidesGrid.length-1),c.slideTo(d,e,t,n)}function slideToClickedSlide(){const e=this,{params:t,$wrapperEl:n}=e,r=t.slidesPerView==="auto"?e.slidesPerViewDynamic():t.slidesPerView;let c=e.clickedIndex,d;if(t.loop){if(e.animating)return;d=parseInt($(e.clickedSlide).attr("data-swiper-slide-index"),10),t.centeredSlides?c<e.loopedSlides-r/2||c>e.slides.length-e.loopedSlides+r/2?(e.loopFix(),c=n.children(`.${t.slideClass}[data-swiper-slide-index="${d}"]:not(.${t.slideDuplicateClass})`).eq(0).index(),nextTick(()=>{e.slideTo(c)})):e.slideTo(c):c>e.slides.length-r?(e.loopFix(),c=n.children(`.${t.slideClass}[data-swiper-slide-index="${d}"]:not(.${t.slideDuplicateClass})`).eq(0).index(),nextTick(()=>{e.slideTo(c)})):e.slideTo(c)}else e.slideTo(c)}const slide={slideTo,slideToLoop,slideNext,slidePrev,slideReset,slideToClosest,slideToClickedSlide};function loopCreate(){const e=this,t=getDocument(),{params:n,$wrapperEl:r}=e,c=r.children().length>0?$(r.children()[0].parentNode):r;c.children(`.${n.slideClass}.${n.slideDuplicateClass}`).remove();let d=c.children(`.${n.slideClass}`);if(n.loopFillGroupWithBlank){const v=n.slidesPerGroup-d.length%n.slidesPerGroup;if(v!==n.slidesPerGroup){for(let x=0;x<v;x+=1){const E=$(t.createElement("div")).addClass(`${n.slideClass} ${n.slideBlankClass}`);c.append(E)}d=c.children(`.${n.slideClass}`)}}n.slidesPerView==="auto"&&!n.loopedSlides&&(n.loopedSlides=d.length),e.loopedSlides=Math.ceil(parseFloat(n.loopedSlides||n.slidesPerView,10)),e.loopedSlides+=n.loopAdditionalSlides,e.loopedSlides>d.length&&e.params.loopedSlidesLimit&&(e.loopedSlides=d.length);const g=[],o=[];d.each((v,x)=>{$(v).attr("data-swiper-slide-index",x)});for(let v=0;v<e.loopedSlides;v+=1){const x=v-Math.floor(v/d.length)*d.length;o.push(d.eq(x)[0]),g.unshift(d.eq(d.length-x-1)[0])}for(let v=0;v<o.length;v+=1)c.append($(o[v].cloneNode(!0)).addClass(n.slideDuplicateClass));for(let v=g.length-1;v>=0;v-=1)c.prepend($(g[v].cloneNode(!0)).addClass(n.slideDuplicateClass))}function loopFix(){const e=this;e.emit("beforeLoopFix");const{activeIndex:t,slides:n,loopedSlides:r,allowSlidePrev:c,allowSlideNext:d,snapGrid:g,rtlTranslate:o}=e;let v;e.allowSlidePrev=!0,e.allowSlideNext=!0;const E=-g[t]-e.getTranslate();t<r?(v=n.length-r*3+t,v+=r,e.slideTo(v,0,!1,!0)&&E!==0&&e.setTranslate((o?-e.translate:e.translate)-E)):t>=n.length-r&&(v=-n.length+t+r,v+=r,e.slideTo(v,0,!1,!0)&&E!==0&&e.setTranslate((o?-e.translate:e.translate)-E)),e.allowSlidePrev=c,e.allowSlideNext=d,e.emit("loopFix")}function loopDestroy(){const e=this,{$wrapperEl:t,params:n,slides:r}=e;t.children(`.${n.slideClass}.${n.slideDuplicateClass},.${n.slideClass}.${n.slideBlankClass}`).remove(),r.removeAttr("data-swiper-slide-index")}const loop={loopCreate,loopFix,loopDestroy};function setGrabCursor(e){const t=this;if(t.support.touch||!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const n=t.params.touchEventsTarget==="container"?t.el:t.wrapperEl;n.style.cursor="move",n.style.cursor=e?"grabbing":"grab"}function unsetGrabCursor(){const e=this;e.support.touch||e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e[e.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="")}const grabCursor={setGrabCursor,unsetGrabCursor};function closestElement(e,t=this){function n(r){if(!r||r===getDocument()||r===getWindow())return null;r.assignedSlot&&(r=r.assignedSlot);const c=r.closest(e);return!c&&!r.getRootNode?null:c||n(r.getRootNode().host)}return n(t)}function onTouchStart(e){const t=this,n=getDocument(),r=getWindow(),c=t.touchEventsData,{params:d,touches:g,enabled:o}=t;if(!o||t.animating&&d.preventInteractionOnTransition)return;!t.animating&&d.cssMode&&d.loop&&t.loopFix();let v=e;v.originalEvent&&(v=v.originalEvent);let x=$(v.target);if(d.touchEventsTarget==="wrapper"&&!x.closest(t.wrapperEl).length||(c.isTouchEvent=v.type==="touchstart",!c.isTouchEvent&&"which"in v&&v.which===3)||!c.isTouchEvent&&"button"in v&&v.button>0||c.isTouched&&c.isMoved)return;const E=!!d.noSwipingClass&&d.noSwipingClass!=="",k=e.composedPath?e.composedPath():e.path;E&&v.target&&v.target.shadowRoot&&k&&(x=$(k[0]));const S=d.noSwipingSelector?d.noSwipingSelector:`.${d.noSwipingClass}`,N=!!(v.target&&v.target.shadowRoot);if(d.noSwiping&&(N?closestElement(S,x[0]):x.closest(S)[0])){t.allowClick=!0;return}if(d.swipeHandler&&!x.closest(d.swipeHandler)[0])return;g.currentX=v.type==="touchstart"?v.targetTouches[0].pageX:v.pageX,g.currentY=v.type==="touchstart"?v.targetTouches[0].pageY:v.pageY;const L=g.currentX,P=g.currentY,O=d.edgeSwipeDetection||d.iOSEdgeSwipeDetection,V=d.edgeSwipeThreshold||d.iOSEdgeSwipeThreshold;if(O&&(L<=V||L>=r.innerWidth-V))if(O==="prevent")e.preventDefault();else return;if(Object.assign(c,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),g.startX=L,g.startY=P,c.touchStartTime=now(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,d.threshold>0&&(c.allowThresholdMove=!1),v.type!=="touchstart"){let z=!0;x.is(c.focusableElements)&&(z=!1,x[0].nodeName==="SELECT"&&(c.isTouched=!1)),n.activeElement&&$(n.activeElement).is(c.focusableElements)&&n.activeElement!==x[0]&&n.activeElement.blur();const U=z&&t.allowTouchMove&&d.touchStartPreventDefault;(d.touchStartForcePreventDefault||U)&&!x[0].isContentEditable&&v.preventDefault()}t.params.freeMode&&t.params.freeMode.enabled&&t.freeMode&&t.animating&&!d.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",v)}function onTouchMove(e){const t=getDocument(),n=this,r=n.touchEventsData,{params:c,touches:d,rtlTranslate:g,enabled:o}=n;if(!o)return;let v=e;if(v.originalEvent&&(v=v.originalEvent),!r.isTouched){r.startMoving&&r.isScrolling&&n.emit("touchMoveOpposite",v);return}if(r.isTouchEvent&&v.type!=="touchmove")return;const x=v.type==="touchmove"&&v.targetTouches&&(v.targetTouches[0]||v.changedTouches[0]),E=v.type==="touchmove"?x.pageX:v.pageX,k=v.type==="touchmove"?x.pageY:v.pageY;if(v.preventedByNestedSwiper){d.startX=E,d.startY=k;return}if(!n.allowTouchMove){$(v.target).is(r.focusableElements)||(n.allowClick=!1),r.isTouched&&(Object.assign(d,{startX:E,startY:k,currentX:E,currentY:k}),r.touchStartTime=now());return}if(r.isTouchEvent&&c.touchReleaseOnEdges&&!c.loop){if(n.isVertical()){if(k<d.startY&&n.translate<=n.maxTranslate()||k>d.startY&&n.translate>=n.minTranslate()){r.isTouched=!1,r.isMoved=!1;return}}else if(E<d.startX&&n.translate<=n.maxTranslate()||E>d.startX&&n.translate>=n.minTranslate())return}if(r.isTouchEvent&&t.activeElement&&v.target===t.activeElement&&$(v.target).is(r.focusableElements)){r.isMoved=!0,n.allowClick=!1;return}if(r.allowTouchCallbacks&&n.emit("touchMove",v),v.targetTouches&&v.targetTouches.length>1)return;d.currentX=E,d.currentY=k;const S=d.currentX-d.startX,N=d.currentY-d.startY;if(n.params.threshold&&Math.sqrt(S**2+N**2)<n.params.threshold)return;if(typeof r.isScrolling>"u"){let V;n.isHorizontal()&&d.currentY===d.startY||n.isVertical()&&d.currentX===d.startX?r.isScrolling=!1:S*S+N*N>=25&&(V=Math.atan2(Math.abs(N),Math.abs(S))*180/Math.PI,r.isScrolling=n.isHorizontal()?V>c.touchAngle:90-V>c.touchAngle)}if(r.isScrolling&&n.emit("touchMoveOpposite",v),typeof r.startMoving>"u"&&(d.currentX!==d.startX||d.currentY!==d.startY)&&(r.startMoving=!0),r.isScrolling){r.isTouched=!1;return}if(!r.startMoving)return;n.allowClick=!1,!c.cssMode&&v.cancelable&&v.preventDefault(),c.touchMoveStopPropagation&&!c.nested&&v.stopPropagation(),r.isMoved||(c.loop&&!c.cssMode&&n.loopFix(),r.startTranslate=n.getTranslate(),n.setTransition(0),n.animating&&n.$wrapperEl.trigger("webkitTransitionEnd transitionend"),r.allowMomentumBounce=!1,c.grabCursor&&(n.allowSlideNext===!0||n.allowSlidePrev===!0)&&n.setGrabCursor(!0),n.emit("sliderFirstMove",v)),n.emit("sliderMove",v),r.isMoved=!0;let L=n.isHorizontal()?S:N;d.diff=L,L*=c.touchRatio,g&&(L=-L),n.swipeDirection=L>0?"prev":"next",r.currentTranslate=L+r.startTranslate;let P=!0,O=c.resistanceRatio;if(c.touchReleaseOnEdges&&(O=0),L>0&&r.currentTranslate>n.minTranslate()?(P=!1,c.resistance&&(r.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+r.startTranslate+L)**O)):L<0&&r.currentTranslate<n.maxTranslate()&&(P=!1,c.resistance&&(r.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-r.startTranslate-L)**O)),P&&(v.preventedByNestedSwiper=!0),!n.allowSlideNext&&n.swipeDirection==="next"&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&n.swipeDirection==="prev"&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&!n.allowSlideNext&&(r.currentTranslate=r.startTranslate),c.threshold>0)if(Math.abs(L)>c.threshold||r.allowThresholdMove){if(!r.allowThresholdMove){r.allowThresholdMove=!0,d.startX=d.currentX,d.startY=d.currentY,r.currentTranslate=r.startTranslate,d.diff=n.isHorizontal()?d.currentX-d.startX:d.currentY-d.startY;return}}else{r.currentTranslate=r.startTranslate;return}!c.followFinger||c.cssMode||((c.freeMode&&c.freeMode.enabled&&n.freeMode||c.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),n.params.freeMode&&c.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(r.currentTranslate),n.setTranslate(r.currentTranslate))}function onTouchEnd(e){const t=this,n=t.touchEventsData,{params:r,touches:c,rtlTranslate:d,slidesGrid:g,enabled:o}=t;if(!o)return;let v=e;if(v.originalEvent&&(v=v.originalEvent),n.allowTouchCallbacks&&t.emit("touchEnd",v),n.allowTouchCallbacks=!1,!n.isTouched){n.isMoved&&r.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,n.startMoving=!1;return}r.grabCursor&&n.isMoved&&n.isTouched&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!1);const x=now(),E=x-n.touchStartTime;if(t.allowClick){const z=v.path||v.composedPath&&v.composedPath();t.updateClickedSlide(z&&z[0]||v.target),t.emit("tap click",v),E<300&&x-n.lastClickTime<300&&t.emit("doubleTap doubleClick",v)}if(n.lastClickTime=now(),nextTick(()=>{t.destroyed||(t.allowClick=!0)}),!n.isTouched||!n.isMoved||!t.swipeDirection||c.diff===0||n.currentTranslate===n.startTranslate){n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;return}n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;let k;if(r.followFinger?k=d?t.translate:-t.translate:k=-n.currentTranslate,r.cssMode)return;if(t.params.freeMode&&r.freeMode.enabled){t.freeMode.onTouchEnd({currentPos:k});return}let S=0,N=t.slidesSizesGrid[0];for(let z=0;z<g.length;z+=z<r.slidesPerGroupSkip?1:r.slidesPerGroup){const U=z<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;typeof g[z+U]<"u"?k>=g[z]&&k<g[z+U]&&(S=z,N=g[z+U]-g[z]):k>=g[z]&&(S=z,N=g[g.length-1]-g[g.length-2])}let L=null,P=null;r.rewind&&(t.isBeginning?P=t.params.virtual&&t.params.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(L=0));const O=(k-g[S])/N,V=S<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;if(E>r.longSwipesMs){if(!r.longSwipes){t.slideTo(t.activeIndex);return}t.swipeDirection==="next"&&(O>=r.longSwipesRatio?t.slideTo(r.rewind&&t.isEnd?L:S+V):t.slideTo(S)),t.swipeDirection==="prev"&&(O>1-r.longSwipesRatio?t.slideTo(S+V):P!==null&&O<0&&Math.abs(O)>r.longSwipesRatio?t.slideTo(P):t.slideTo(S))}else{if(!r.shortSwipes){t.slideTo(t.activeIndex);return}t.navigation&&(v.target===t.navigation.nextEl||v.target===t.navigation.prevEl)?v.target===t.navigation.nextEl?t.slideTo(S+V):t.slideTo(S):(t.swipeDirection==="next"&&t.slideTo(L!==null?L:S+V),t.swipeDirection==="prev"&&t.slideTo(P!==null?P:S))}}function onResize(){const e=this,{params:t,el:n}=e;if(n&&n.offsetWidth===0)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:c,snapGrid:d}=e;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),(t.slidesPerView==="auto"||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.run(),e.allowSlidePrev=c,e.allowSlideNext=r,e.params.watchOverflow&&d!==e.snapGrid&&e.checkOverflow()}function onClick(e){const t=this;!t.enabled||t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))}function onScroll(){const e=this,{wrapperEl:t,rtlTranslate:n,enabled:r}=e;if(!r)return;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,e.translate===0&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();let c;const d=e.maxTranslate()-e.minTranslate();d===0?c=0:c=(e.translate-e.minTranslate())/d,c!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}let dummyEventAttached=!1;function dummyEventListener(){}const events=(e,t)=>{const n=getDocument(),{params:r,touchEvents:c,el:d,wrapperEl:g,device:o,support:v}=e,x=!!r.nested,E=t==="on"?"addEventListener":"removeEventListener",k=t;if(!v.touch)d[E](c.start,e.onTouchStart,!1),n[E](c.move,e.onTouchMove,x),n[E](c.end,e.onTouchEnd,!1);else{const S=c.start==="touchstart"&&v.passiveListener&&r.passiveListeners?{passive:!0,capture:!1}:!1;d[E](c.start,e.onTouchStart,S),d[E](c.move,e.onTouchMove,v.passiveListener?{passive:!1,capture:x}:x),d[E](c.end,e.onTouchEnd,S),c.cancel&&d[E](c.cancel,e.onTouchEnd,S)}(r.preventClicks||r.preventClicksPropagation)&&d[E]("click",e.onClick,!0),r.cssMode&&g[E]("scroll",e.onScroll),r.updateOnWindowResize?e[k](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",onResize,!0):e[k]("observerUpdate",onResize,!0)};function attachEvents(){const e=this,t=getDocument(),{params:n,support:r}=e;e.onTouchStart=onTouchStart.bind(e),e.onTouchMove=onTouchMove.bind(e),e.onTouchEnd=onTouchEnd.bind(e),n.cssMode&&(e.onScroll=onScroll.bind(e)),e.onClick=onClick.bind(e),r.touch&&!dummyEventAttached&&(t.addEventListener("touchstart",dummyEventListener),dummyEventAttached=!0),events(e,"on")}function detachEvents(){events(this,"off")}const events$1={attachEvents,detachEvents},isGridEnabled=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;function setBreakpoint(){const e=this,{activeIndex:t,initialized:n,loopedSlides:r=0,params:c,$el:d}=e,g=c.breakpoints;if(!g||g&&Object.keys(g).length===0)return;const o=e.getBreakpoint(g,e.params.breakpointsBase,e.el);if(!o||e.currentBreakpoint===o)return;const x=(o in g?g[o]:void 0)||e.originalParams,E=isGridEnabled(e,c),k=isGridEnabled(e,x),S=c.enabled;E&&!k?(d.removeClass(`${c.containerModifierClass}grid ${c.containerModifierClass}grid-column`),e.emitContainerClasses()):!E&&k&&(d.addClass(`${c.containerModifierClass}grid`),(x.grid.fill&&x.grid.fill==="column"||!x.grid.fill&&c.grid.fill==="column")&&d.addClass(`${c.containerModifierClass}grid-column`),e.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(O=>{const V=c[O]&&c[O].enabled,z=x[O]&&x[O].enabled;V&&!z&&e[O].disable(),!V&&z&&e[O].enable()});const N=x.direction&&x.direction!==c.direction,L=c.loop&&(x.slidesPerView!==c.slidesPerView||N);N&&n&&e.changeDirection(),extend$1(e.params,x);const P=e.params.enabled;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),S&&!P?e.disable():!S&&P&&e.enable(),e.currentBreakpoint=o,e.emit("_beforeBreakpoint",x),L&&n&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-r+e.loopedSlides,0,!1)),e.emit("breakpoint",x)}function getBreakpoint(e,t="window",n){if(!e||t==="container"&&!n)return;let r=!1;const c=getWindow(),d=t==="window"?c.innerHeight:n.clientHeight,g=Object.keys(e).map(o=>{if(typeof o=="string"&&o.indexOf("@")===0){const v=parseFloat(o.substr(1));return{value:d*v,point:o}}return{value:o,point:o}});g.sort((o,v)=>parseInt(o.value,10)-parseInt(v.value,10));for(let o=0;o<g.length;o+=1){const{point:v,value:x}=g[o];t==="window"?c.matchMedia(`(min-width: ${x}px)`).matches&&(r=v):x<=n.clientWidth&&(r=v)}return r||"max"}const breakpoints={setBreakpoint,getBreakpoint};function prepareClasses(e,t){const n=[];return e.forEach(r=>{typeof r=="object"?Object.keys(r).forEach(c=>{r[c]&&n.push(t+c)}):typeof r=="string"&&n.push(t+r)}),n}function addClasses(){const e=this,{classNames:t,params:n,rtl:r,$el:c,device:d,support:g}=e,o=prepareClasses(["initialized",n.direction,{"pointer-events":!g.touch},{"free-mode":e.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:r},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&n.grid.fill==="column"},{android:d.android},{ios:d.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);t.push(...o),c.addClass([...t].join(" ")),e.emitContainerClasses()}function removeClasses(){const e=this,{$el:t,classNames:n}=e;t.removeClass(n.join(" ")),e.emitContainerClasses()}const classes={addClasses,removeClasses};function loadImage(e,t,n,r,c,d){const g=getWindow();let o;function v(){d&&d()}!$(e).parent("picture")[0]&&(!e.complete||!c)&&t?(o=new g.Image,o.onload=v,o.onerror=v,r&&(o.sizes=r),n&&(o.srcset=n),t&&(o.src=t)):v()}function preloadImages(){const e=this;e.imagesToLoad=e.$el.find("img");function t(){typeof e>"u"||e===null||!e||e.destroyed||(e.imagesLoaded!==void 0&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}for(let n=0;n<e.imagesToLoad.length;n+=1){const r=e.imagesToLoad[n];e.loadImage(r,r.currentSrc||r.getAttribute("src"),r.srcset||r.getAttribute("srcset"),r.sizes||r.getAttribute("sizes"),!0,t)}}const images={loadImage,preloadImages};function checkOverflow(){const e=this,{isLocked:t,params:n}=e,{slidesOffsetBefore:r}=n;if(r){const c=e.slides.length-1,d=e.slidesGrid[c]+e.slidesSizesGrid[c]+r*2;e.isLocked=e.size>d}else e.isLocked=e.snapGrid.length===1;n.allowSlideNext===!0&&(e.allowSlideNext=!e.isLocked),n.allowSlidePrev===!0&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}const checkOverflow$1={checkOverflow},defaults$2={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function moduleExtendParams(e,t){return function(r={}){const c=Object.keys(r)[0],d=r[c];if(typeof d!="object"||d===null){extend$1(t,r);return}if(["navigation","pagination","scrollbar"].indexOf(c)>=0&&e[c]===!0&&(e[c]={auto:!0}),!(c in e&&"enabled"in d)){extend$1(t,r);return}e[c]===!0&&(e[c]={enabled:!0}),typeof e[c]=="object"&&!("enabled"in e[c])&&(e[c].enabled=!0),e[c]||(e[c]={enabled:!1}),extend$1(t,r)}}const prototypes={eventsEmitter,update,translate,transition,slide,loop,grabCursor,events:events$1,breakpoints,checkOverflow:checkOverflow$1,classes,images},extendedDefaults={};class Swiper$1{constructor(...t){let n,r;if(t.length===1&&t[0].constructor&&Object.prototype.toString.call(t[0]).slice(8,-1)==="Object"?r=t[0]:[n,r]=t,r||(r={}),r=extend$1({},r),n&&!r.el&&(r.el=n),r.el&&$(r.el).length>1){const o=[];return $(r.el).each(v=>{const x=extend$1({},r,{el:v});o.push(new Swiper$1(x))}),o}const c=this;c.__swiper__=!0,c.support=getSupport(),c.device=getDevice({userAgent:r.userAgent}),c.browser=getBrowser(),c.eventsListeners={},c.eventsAnyListeners=[],c.modules=[...c.__modules__],r.modules&&Array.isArray(r.modules)&&c.modules.push(...r.modules);const d={};c.modules.forEach(o=>{o({swiper:c,extendParams:moduleExtendParams(r,d),on:c.on.bind(c),once:c.once.bind(c),off:c.off.bind(c),emit:c.emit.bind(c)})});const g=extend$1({},defaults$2,d);return c.params=extend$1({},g,extendedDefaults,r),c.originalParams=extend$1({},c.params),c.passedParams=extend$1({},r),c.params&&c.params.on&&Object.keys(c.params.on).forEach(o=>{c.on(o,c.params.on[o])}),c.params&&c.params.onAny&&c.onAny(c.params.onAny),c.$=$,Object.assign(c,{enabled:c.params.enabled,el:n,classNames:[],slides:$(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return c.params.direction==="horizontal"},isVertical(){return c.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:c.params.allowSlideNext,allowSlidePrev:c.params.allowSlidePrev,touchEvents:function(){const v=["touchstart","touchmove","touchend","touchcancel"],x=["pointerdown","pointermove","pointerup"];return c.touchEventsTouch={start:v[0],move:v[1],end:v[2],cancel:v[3]},c.touchEventsDesktop={start:x[0],move:x[1],end:x[2]},c.support.touch||!c.params.simulateTouch?c.touchEventsTouch:c.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:c.params.focusableElements,lastClickTime:now(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:c.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),c.emit("_swiper"),c.params.init&&c.init(),c}enable(){const t=this;t.enabled||(t.enabled=!0,t.params.grabCursor&&t.setGrabCursor(),t.emit("enable"))}disable(){const t=this;!t.enabled||(t.enabled=!1,t.params.grabCursor&&t.unsetGrabCursor(),t.emit("disable"))}setProgress(t,n){const r=this;t=Math.min(Math.max(t,0),1);const c=r.minTranslate(),g=(r.maxTranslate()-c)*t+c;r.translateTo(g,typeof n>"u"?0:n),r.updateActiveIndex(),r.updateSlidesClasses()}emitContainerClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const n=t.el.className.split(" ").filter(r=>r.indexOf("swiper")===0||r.indexOf(t.params.containerModifierClass)===0);t.emit("_containerClasses",n.join(" "))}getSlideClasses(t){const n=this;return n.destroyed?"":t.className.split(" ").filter(r=>r.indexOf("swiper-slide")===0||r.indexOf(n.params.slideClass)===0).join(" ")}emitSlidesClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const n=[];t.slides.each(r=>{const c=t.getSlideClasses(r);n.push({slideEl:r,classNames:c}),t.emit("_slideClass",r,c)}),t.emit("_slideClasses",n)}slidesPerViewDynamic(t="current",n=!1){const r=this,{params:c,slides:d,slidesGrid:g,slidesSizesGrid:o,size:v,activeIndex:x}=r;let E=1;if(c.centeredSlides){let k=d[x].swiperSlideSize,S;for(let N=x+1;N<d.length;N+=1)d[N]&&!S&&(k+=d[N].swiperSlideSize,E+=1,k>v&&(S=!0));for(let N=x-1;N>=0;N-=1)d[N]&&!S&&(k+=d[N].swiperSlideSize,E+=1,k>v&&(S=!0))}else if(t==="current")for(let k=x+1;k<d.length;k+=1)(n?g[k]+o[k]-g[x]<v:g[k]-g[x]<v)&&(E+=1);else for(let k=x-1;k>=0;k-=1)g[x]-g[k]<v&&(E+=1);return E}update(){const t=this;if(!t||t.destroyed)return;const{snapGrid:n,params:r}=t;r.breakpoints&&t.setBreakpoint(),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses();function c(){const g=t.rtlTranslate?t.translate*-1:t.translate,o=Math.min(Math.max(g,t.maxTranslate()),t.minTranslate());t.setTranslate(o),t.updateActiveIndex(),t.updateSlidesClasses()}let d;t.params.freeMode&&t.params.freeMode.enabled?(c(),t.params.autoHeight&&t.updateAutoHeight()):((t.params.slidesPerView==="auto"||t.params.slidesPerView>1)&&t.isEnd&&!t.params.centeredSlides?d=t.slideTo(t.slides.length-1,0,!1,!0):d=t.slideTo(t.activeIndex,0,!1,!0),d||c()),r.watchOverflow&&n!==t.snapGrid&&t.checkOverflow(),t.emit("update")}changeDirection(t,n=!0){const r=this,c=r.params.direction;return t||(t=c==="horizontal"?"vertical":"horizontal"),t===c||t!=="horizontal"&&t!=="vertical"||(r.$el.removeClass(`${r.params.containerModifierClass}${c}`).addClass(`${r.params.containerModifierClass}${t}`),r.emitContainerClasses(),r.params.direction=t,r.slides.each(d=>{t==="vertical"?d.style.width="":d.style.height=""}),r.emit("changeDirection"),n&&r.update()),r}changeLanguageDirection(t){const n=this;n.rtl&&t==="rtl"||!n.rtl&&t==="ltr"||(n.rtl=t==="rtl",n.rtlTranslate=n.params.direction==="horizontal"&&n.rtl,n.rtl?(n.$el.addClass(`${n.params.containerModifierClass}rtl`),n.el.dir="rtl"):(n.$el.removeClass(`${n.params.containerModifierClass}rtl`),n.el.dir="ltr"),n.update())}mount(t){const n=this;if(n.mounted)return!0;const r=$(t||n.params.el);if(t=r[0],!t)return!1;t.swiper=n;const c=()=>`.${(n.params.wrapperClass||"").trim().split(" ").join(".")}`;let g=(()=>{if(t&&t.shadowRoot&&t.shadowRoot.querySelector){const o=$(t.shadowRoot.querySelector(c()));return o.children=v=>r.children(v),o}return r.children?r.children(c()):$(r).children(c())})();if(g.length===0&&n.params.createElements){const v=getDocument().createElement("div");g=$(v),v.className=n.params.wrapperClass,r.append(v),r.children(`.${n.params.slideClass}`).each(x=>{g.append(x)})}return Object.assign(n,{$el:r,el:t,$wrapperEl:g,wrapperEl:g[0],mounted:!0,rtl:t.dir.toLowerCase()==="rtl"||r.css("direction")==="rtl",rtlTranslate:n.params.direction==="horizontal"&&(t.dir.toLowerCase()==="rtl"||r.css("direction")==="rtl"),wrongRTL:g.css("display")==="-webkit-box"}),!0}init(t){const n=this;return n.initialized||n.mount(t)===!1||(n.emit("beforeInit"),n.params.breakpoints&&n.setBreakpoint(),n.addClasses(),n.params.loop&&n.loopCreate(),n.updateSize(),n.updateSlides(),n.params.watchOverflow&&n.checkOverflow(),n.params.grabCursor&&n.enabled&&n.setGrabCursor(),n.params.preloadImages&&n.preloadImages(),n.params.loop?n.slideTo(n.params.initialSlide+n.loopedSlides,0,n.params.runCallbacksOnInit,!1,!0):n.slideTo(n.params.initialSlide,0,n.params.runCallbacksOnInit,!1,!0),n.attachEvents(),n.initialized=!0,n.emit("init"),n.emit("afterInit")),n}destroy(t=!0,n=!0){const r=this,{params:c,$el:d,$wrapperEl:g,slides:o}=r;return typeof r.params>"u"||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),c.loop&&r.loopDestroy(),n&&(r.removeClasses(),d.removeAttr("style"),g.removeAttr("style"),o&&o.length&&o.removeClass([c.slideVisibleClass,c.slideActiveClass,c.slideNextClass,c.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),r.emit("destroy"),Object.keys(r.eventsListeners).forEach(v=>{r.off(v)}),t!==!1&&(r.$el[0].swiper=null,deleteProps(r)),r.destroyed=!0),null}static extendDefaults(t){extend$1(extendedDefaults,t)}static get extendedDefaults(){return extendedDefaults}static get defaults(){return defaults$2}static installModule(t){Swiper$1.prototype.__modules__||(Swiper$1.prototype.__modules__=[]);const n=Swiper$1.prototype.__modules__;typeof t=="function"&&n.indexOf(t)<0&&n.push(t)}static use(t){return Array.isArray(t)?(t.forEach(n=>Swiper$1.installModule(n)),Swiper$1):(Swiper$1.installModule(t),Swiper$1)}}Object.keys(prototypes).forEach(e=>{Object.keys(prototypes[e]).forEach(t=>{Swiper$1.prototype[t]=prototypes[e][t]})});Swiper$1.use([Resize,Observer]);function Mousewheel({swiper:e,extendParams:t,on:n,emit:r}){const c=getWindow();t({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null}}),e.mousewheel={enabled:!1};let d,g=now(),o;const v=[];function x(z){let re=0,oe=0,se=0,ce=0;return"detail"in z&&(oe=z.detail),"wheelDelta"in z&&(oe=-z.wheelDelta/120),"wheelDeltaY"in z&&(oe=-z.wheelDeltaY/120),"wheelDeltaX"in z&&(re=-z.wheelDeltaX/120),"axis"in z&&z.axis===z.HORIZONTAL_AXIS&&(re=oe,oe=0),se=re*10,ce=oe*10,"deltaY"in z&&(ce=z.deltaY),"deltaX"in z&&(se=z.deltaX),z.shiftKey&&!se&&(se=ce,ce=0),(se||ce)&&z.deltaMode&&(z.deltaMode===1?(se*=40,ce*=40):(se*=800,ce*=800)),se&&!re&&(re=se<1?-1:1),ce&&!oe&&(oe=ce<1?-1:1),{spinX:re,spinY:oe,pixelX:se,pixelY:ce}}function E(){!e.enabled||(e.mouseEntered=!0)}function k(){!e.enabled||(e.mouseEntered=!1)}function S(z){return e.params.mousewheel.thresholdDelta&&z.delta<e.params.mousewheel.thresholdDelta||e.params.mousewheel.thresholdTime&&now()-g<e.params.mousewheel.thresholdTime?!1:z.delta>=6&&now()-g<60?!0:(z.direction<0?(!e.isEnd||e.params.loop)&&!e.animating&&(e.slideNext(),r("scroll",z.raw)):(!e.isBeginning||e.params.loop)&&!e.animating&&(e.slidePrev(),r("scroll",z.raw)),g=new c.Date().getTime(),!1)}function N(z){const U=e.params.mousewheel;if(z.direction<0){if(e.isEnd&&!e.params.loop&&U.releaseOnEdges)return!0}else if(e.isBeginning&&!e.params.loop&&U.releaseOnEdges)return!0;return!1}function L(z){let U=z,W=!0;if(!e.enabled)return;const Z=e.params.mousewheel;e.params.cssMode&&U.preventDefault();let re=e.$el;if(e.params.mousewheel.eventsTarget!=="container"&&(re=$(e.params.mousewheel.eventsTarget)),!e.mouseEntered&&!re[0].contains(U.target)&&!Z.releaseOnEdges)return!0;U.originalEvent&&(U=U.originalEvent);let oe=0;const se=e.rtlTranslate?-1:1,ce=x(U);if(Z.forceToAxis)if(e.isHorizontal())if(Math.abs(ce.pixelX)>Math.abs(ce.pixelY))oe=-ce.pixelX*se;else return!0;else if(Math.abs(ce.pixelY)>Math.abs(ce.pixelX))oe=-ce.pixelY;else return!0;else oe=Math.abs(ce.pixelX)>Math.abs(ce.pixelY)?-ce.pixelX*se:-ce.pixelY;if(oe===0)return!0;Z.invert&&(oe=-oe);let me=e.getTranslate()+oe*Z.sensitivity;if(me>=e.minTranslate()&&(me=e.minTranslate()),me<=e.maxTranslate()&&(me=e.maxTranslate()),W=e.params.loop?!0:!(me===e.minTranslate()||me===e.maxTranslate()),W&&e.params.nested&&U.stopPropagation(),!e.params.freeMode||!e.params.freeMode.enabled){const we={time:now(),delta:Math.abs(oe),direction:Math.sign(oe),raw:z};v.length>=2&&v.shift();const ae=v.length?v[v.length-1]:void 0;if(v.push(we),ae?(we.direction!==ae.direction||we.delta>ae.delta||we.time>ae.time+150)&&S(we):S(we),N(we))return!0}else{const we={time:now(),delta:Math.abs(oe),direction:Math.sign(oe)},ae=o&&we.time<o.time+500&&we.delta<=o.delta&&we.direction===o.direction;if(!ae){o=void 0,e.params.loop&&e.loopFix();let Ce=e.getTranslate()+oe*Z.sensitivity;const Fe=e.isBeginning,it=e.isEnd;if(Ce>=e.minTranslate()&&(Ce=e.minTranslate()),Ce<=e.maxTranslate()&&(Ce=e.maxTranslate()),e.setTransition(0),e.setTranslate(Ce),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses(),(!Fe&&e.isBeginning||!it&&e.isEnd)&&e.updateSlidesClasses(),e.params.freeMode.sticky){clearTimeout(d),d=void 0,v.length>=15&&v.shift();const _e=v.length?v[v.length-1]:void 0,ke=v[0];if(v.push(we),_e&&(we.delta>_e.delta||we.direction!==_e.direction))v.splice(0);else if(v.length>=15&&we.time-ke.time<500&&ke.delta-we.delta>=1&&we.delta<=6){const ze=oe>0?.8:.2;o=we,v.splice(0),d=nextTick(()=>{e.slideToClosest(e.params.speed,!0,void 0,ze)},0)}d||(d=nextTick(()=>{o=we,v.splice(0),e.slideToClosest(e.params.speed,!0,void 0,.5)},500))}if(ae||r("scroll",U),e.params.autoplay&&e.params.autoplayDisableOnInteraction&&e.autoplay.stop(),Ce===e.minTranslate()||Ce===e.maxTranslate())return!0}}return U.preventDefault?U.preventDefault():U.returnValue=!1,!1}function P(z){let U=e.$el;e.params.mousewheel.eventsTarget!=="container"&&(U=$(e.params.mousewheel.eventsTarget)),U[z]("mouseenter",E),U[z]("mouseleave",k),U[z]("wheel",L)}function O(){return e.params.cssMode?(e.wrapperEl.removeEventListener("wheel",L),!0):e.mousewheel.enabled?!1:(P("on"),e.mousewheel.enabled=!0,!0)}function V(){return e.params.cssMode?(e.wrapperEl.addEventListener(event,L),!0):e.mousewheel.enabled?(P("off"),e.mousewheel.enabled=!1,!0):!1}n("init",()=>{!e.params.mousewheel.enabled&&e.params.cssMode&&V(),e.params.mousewheel.enabled&&O()}),n("destroy",()=>{e.params.cssMode&&O(),e.mousewheel.enabled&&V()}),Object.assign(e.mousewheel,{enable:O,disable:V})}function createElementIfNotDefined(e,t,n,r){const c=getDocument();return e.params.createElements&&Object.keys(r).forEach(d=>{if(!n[d]&&n.auto===!0){let g=e.$el.children(`.${r[d]}`)[0];g||(g=c.createElement("div"),g.className=r[d],e.$el.append(g)),n[d]=g,t[d]=g}}),n}function Navigation({swiper:e,extendParams:t,on:n,emit:r}){t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,$nextEl:null,prevEl:null,$prevEl:null};function c(N){let L;return N&&(L=$(N),e.params.uniqueNavElements&&typeof N=="string"&&L.length>1&&e.$el.find(N).length===1&&(L=e.$el.find(N))),L}function d(N,L){const P=e.params.navigation;N&&N.length>0&&(N[L?"addClass":"removeClass"](P.disabledClass),N[0]&&N[0].tagName==="BUTTON"&&(N[0].disabled=L),e.params.watchOverflow&&e.enabled&&N[e.isLocked?"addClass":"removeClass"](P.lockClass))}function g(){if(e.params.loop)return;const{$nextEl:N,$prevEl:L}=e.navigation;d(L,e.isBeginning&&!e.params.rewind),d(N,e.isEnd&&!e.params.rewind)}function o(N){N.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),r("navigationPrev"))}function v(N){N.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),r("navigationNext"))}function x(){const N=e.params.navigation;if(e.params.navigation=createElementIfNotDefined(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(N.nextEl||N.prevEl))return;const L=c(N.nextEl),P=c(N.prevEl);L&&L.length>0&&L.on("click",v),P&&P.length>0&&P.on("click",o),Object.assign(e.navigation,{$nextEl:L,nextEl:L&&L[0],$prevEl:P,prevEl:P&&P[0]}),e.enabled||(L&&L.addClass(N.lockClass),P&&P.addClass(N.lockClass))}function E(){const{$nextEl:N,$prevEl:L}=e.navigation;N&&N.length&&(N.off("click",v),N.removeClass(e.params.navigation.disabledClass)),L&&L.length&&(L.off("click",o),L.removeClass(e.params.navigation.disabledClass))}n("init",()=>{e.params.navigation.enabled===!1?S():(x(),g())}),n("toEdge fromEdge lock unlock",()=>{g()}),n("destroy",()=>{E()}),n("enable disable",()=>{const{$nextEl:N,$prevEl:L}=e.navigation;N&&N[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass),L&&L[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass)}),n("click",(N,L)=>{const{$nextEl:P,$prevEl:O}=e.navigation,V=L.target;if(e.params.navigation.hideOnClick&&!$(V).is(O)&&!$(V).is(P)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===V||e.pagination.el.contains(V)))return;let z;P?z=P.hasClass(e.params.navigation.hiddenClass):O&&(z=O.hasClass(e.params.navigation.hiddenClass)),r(z===!0?"navigationShow":"navigationHide"),P&&P.toggleClass(e.params.navigation.hiddenClass),O&&O.toggleClass(e.params.navigation.hiddenClass)}});const k=()=>{e.$el.removeClass(e.params.navigation.navigationDisabledClass),x(),g()},S=()=>{e.$el.addClass(e.params.navigation.navigationDisabledClass),E()};Object.assign(e.navigation,{enable:k,disable:S,update:g,init:x,destroy:E})}function classesToSelector(e=""){return`.${e.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}`}function Pagination({swiper:e,extendParams:t,on:n,emit:r}){const c="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:P=>P,formatFractionTotal:P=>P,bulletClass:`${c}-bullet`,bulletActiveClass:`${c}-bullet-active`,modifierClass:`${c}-`,currentClass:`${c}-current`,totalClass:`${c}-total`,hiddenClass:`${c}-hidden`,progressbarFillClass:`${c}-progressbar-fill`,progressbarOppositeClass:`${c}-progressbar-opposite`,clickableClass:`${c}-clickable`,lockClass:`${c}-lock`,horizontalClass:`${c}-horizontal`,verticalClass:`${c}-vertical`,paginationDisabledClass:`${c}-disabled`}}),e.pagination={el:null,$el:null,bullets:[]};let d,g=0;function o(){return!e.params.pagination.el||!e.pagination.el||!e.pagination.$el||e.pagination.$el.length===0}function v(P,O){const{bulletActiveClass:V}=e.params.pagination;P[O]().addClass(`${V}-${O}`)[O]().addClass(`${V}-${O}-${O}`)}function x(){const P=e.rtl,O=e.params.pagination;if(o())return;const V=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,z=e.pagination.$el;let U;const W=e.params.loop?Math.ceil((V-e.loopedSlides*2)/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(U=Math.ceil((e.activeIndex-e.loopedSlides)/e.params.slidesPerGroup),U>V-1-e.loopedSlides*2&&(U-=V-e.loopedSlides*2),U>W-1&&(U-=W),U<0&&e.params.paginationType!=="bullets"&&(U=W+U)):typeof e.snapIndex<"u"?U=e.snapIndex:U=e.activeIndex||0,O.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const Z=e.pagination.bullets;let re,oe,se;if(O.dynamicBullets&&(d=Z.eq(0)[e.isHorizontal()?"outerWidth":"outerHeight"](!0),z.css(e.isHorizontal()?"width":"height",`${d*(O.dynamicMainBullets+4)}px`),O.dynamicMainBullets>1&&e.previousIndex!==void 0&&(g+=U-(e.previousIndex-e.loopedSlides||0),g>O.dynamicMainBullets-1?g=O.dynamicMainBullets-1:g<0&&(g=0)),re=Math.max(U-g,0),oe=re+(Math.min(Z.length,O.dynamicMainBullets)-1),se=(oe+re)/2),Z.removeClass(["","-next","-next-next","-prev","-prev-prev","-main"].map(ce=>`${O.bulletActiveClass}${ce}`).join(" ")),z.length>1)Z.each(ce=>{const me=$(ce),we=me.index();we===U&&me.addClass(O.bulletActiveClass),O.dynamicBullets&&(we>=re&&we<=oe&&me.addClass(`${O.bulletActiveClass}-main`),we===re&&v(me,"prev"),we===oe&&v(me,"next"))});else{const ce=Z.eq(U),me=ce.index();if(ce.addClass(O.bulletActiveClass),O.dynamicBullets){const we=Z.eq(re),ae=Z.eq(oe);for(let Ce=re;Ce<=oe;Ce+=1)Z.eq(Ce).addClass(`${O.bulletActiveClass}-main`);if(e.params.loop)if(me>=Z.length){for(let Ce=O.dynamicMainBullets;Ce>=0;Ce-=1)Z.eq(Z.length-Ce).addClass(`${O.bulletActiveClass}-main`);Z.eq(Z.length-O.dynamicMainBullets-1).addClass(`${O.bulletActiveClass}-prev`)}else v(we,"prev"),v(ae,"next");else v(we,"prev"),v(ae,"next")}}if(O.dynamicBullets){const ce=Math.min(Z.length,O.dynamicMainBullets+4),me=(d*ce-d)/2-se*d,we=P?"right":"left";Z.css(e.isHorizontal()?we:"top",`${me}px`)}}if(O.type==="fraction"&&(z.find(classesToSelector(O.currentClass)).text(O.formatFractionCurrent(U+1)),z.find(classesToSelector(O.totalClass)).text(O.formatFractionTotal(W))),O.type==="progressbar"){let Z;O.progressbarOpposite?Z=e.isHorizontal()?"vertical":"horizontal":Z=e.isHorizontal()?"horizontal":"vertical";const re=(U+1)/W;let oe=1,se=1;Z==="horizontal"?oe=re:se=re,z.find(classesToSelector(O.progressbarFillClass)).transform(`translate3d(0,0,0) scaleX(${oe}) scaleY(${se})`).transition(e.params.speed)}O.type==="custom"&&O.renderCustom?(z.html(O.renderCustom(e,U+1,W)),r("paginationRender",z[0])):r("paginationUpdate",z[0]),e.params.watchOverflow&&e.enabled&&z[e.isLocked?"addClass":"removeClass"](O.lockClass)}function E(){const P=e.params.pagination;if(o())return;const O=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,V=e.pagination.$el;let z="";if(P.type==="bullets"){let U=e.params.loop?Math.ceil((O-e.loopedSlides*2)/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&!e.params.loop&&U>O&&(U=O);for(let W=0;W<U;W+=1)P.renderBullet?z+=P.renderBullet.call(e,W,P.bulletClass):z+=`<${P.bulletElement} class="${P.bulletClass}"></${P.bulletElement}>`;V.html(z),e.pagination.bullets=V.find(classesToSelector(P.bulletClass))}P.type==="fraction"&&(P.renderFraction?z=P.renderFraction.call(e,P.currentClass,P.totalClass):z=`<span class="${P.currentClass}"></span> / <span class="${P.totalClass}"></span>`,V.html(z)),P.type==="progressbar"&&(P.renderProgressbar?z=P.renderProgressbar.call(e,P.progressbarFillClass):z=`<span class="${P.progressbarFillClass}"></span>`,V.html(z)),P.type!=="custom"&&r("paginationRender",e.pagination.$el[0])}function k(){e.params.pagination=createElementIfNotDefined(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const P=e.params.pagination;if(!P.el)return;let O=$(P.el);O.length!==0&&(e.params.uniqueNavElements&&typeof P.el=="string"&&O.length>1&&(O=e.$el.find(P.el),O.length>1&&(O=O.filter(V=>$(V).parents(".swiper")[0]===e.el))),P.type==="bullets"&&P.clickable&&O.addClass(P.clickableClass),O.addClass(P.modifierClass+P.type),O.addClass(e.isHorizontal()?P.horizontalClass:P.verticalClass),P.type==="bullets"&&P.dynamicBullets&&(O.addClass(`${P.modifierClass}${P.type}-dynamic`),g=0,P.dynamicMainBullets<1&&(P.dynamicMainBullets=1)),P.type==="progressbar"&&P.progressbarOpposite&&O.addClass(P.progressbarOppositeClass),P.clickable&&O.on("click",classesToSelector(P.bulletClass),function(z){z.preventDefault();let U=$(this).index()*e.params.slidesPerGroup;e.params.loop&&(U+=e.loopedSlides),e.slideTo(U)}),Object.assign(e.pagination,{$el:O,el:O[0]}),e.enabled||O.addClass(P.lockClass))}function S(){const P=e.params.pagination;if(o())return;const O=e.pagination.$el;O.removeClass(P.hiddenClass),O.removeClass(P.modifierClass+P.type),O.removeClass(e.isHorizontal()?P.horizontalClass:P.verticalClass),e.pagination.bullets&&e.pagination.bullets.removeClass&&e.pagination.bullets.removeClass(P.bulletActiveClass),P.clickable&&O.off("click",classesToSelector(P.bulletClass))}n("init",()=>{e.params.pagination.enabled===!1?L():(k(),E(),x())}),n("activeIndexChange",()=>{(e.params.loop||typeof e.snapIndex>"u")&&x()}),n("snapIndexChange",()=>{e.params.loop||x()}),n("slidesLengthChange",()=>{e.params.loop&&(E(),x())}),n("snapGridLengthChange",()=>{e.params.loop||(E(),x())}),n("destroy",()=>{S()}),n("enable disable",()=>{const{$el:P}=e.pagination;P&&P[e.enabled?"removeClass":"addClass"](e.params.pagination.lockClass)}),n("lock unlock",()=>{x()}),n("click",(P,O)=>{const V=O.target,{$el:z}=e.pagination;if(e.params.pagination.el&&e.params.pagination.hideOnClick&&z&&z.length>0&&!$(V).hasClass(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&V===e.navigation.nextEl||e.navigation.prevEl&&V===e.navigation.prevEl))return;const U=z.hasClass(e.params.pagination.hiddenClass);r(U===!0?"paginationShow":"paginationHide"),z.toggleClass(e.params.pagination.hiddenClass)}});const N=()=>{e.$el.removeClass(e.params.pagination.paginationDisabledClass),e.pagination.$el&&e.pagination.$el.removeClass(e.params.pagination.paginationDisabledClass),k(),E(),x()},L=()=>{e.$el.addClass(e.params.pagination.paginationDisabledClass),e.pagination.$el&&e.pagination.$el.addClass(e.params.pagination.paginationDisabledClass),S()};Object.assign(e.pagination,{enable:N,disable:L,render:E,update:x,init:k,destroy:S})}function Lazy({swiper:e,extendParams:t,on:n,emit:r}){t({lazy:{checkInView:!1,enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,scrollingElement:"",elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}}),e.lazy={};let c=!1,d=!1;function g(x,E=!0){const k=e.params.lazy;if(typeof x>"u"||e.slides.length===0)return;const N=e.virtual&&e.params.virtual.enabled?e.$wrapperEl.children(`.${e.params.slideClass}[data-swiper-slide-index="${x}"]`):e.slides.eq(x),L=N.find(`.${k.elementClass}:not(.${k.loadedClass}):not(.${k.loadingClass})`);N.hasClass(k.elementClass)&&!N.hasClass(k.loadedClass)&&!N.hasClass(k.loadingClass)&&L.push(N[0]),L.length!==0&&L.each(P=>{const O=$(P);O.addClass(k.loadingClass);const V=O.attr("data-background"),z=O.attr("data-src"),U=O.attr("data-srcset"),W=O.attr("data-sizes"),Z=O.parent("picture");e.loadImage(O[0],z||V,U,W,!1,()=>{if(!(typeof e>"u"||e===null||!e||e&&!e.params||e.destroyed)){if(V?(O.css("background-image",`url("${V}")`),O.removeAttr("data-background")):(U&&(O.attr("srcset",U),O.removeAttr("data-srcset")),W&&(O.attr("sizes",W),O.removeAttr("data-sizes")),Z.length&&Z.children("source").each(re=>{const oe=$(re);oe.attr("data-srcset")&&(oe.attr("srcset",oe.attr("data-srcset")),oe.removeAttr("data-srcset"))}),z&&(O.attr("src",z),O.removeAttr("data-src"))),O.addClass(k.loadedClass).removeClass(k.loadingClass),N.find(`.${k.preloaderClass}`).remove(),e.params.loop&&E){const re=N.attr("data-swiper-slide-index");if(N.hasClass(e.params.slideDuplicateClass)){const oe=e.$wrapperEl.children(`[data-swiper-slide-index="${re}"]:not(.${e.params.slideDuplicateClass})`);g(oe.index(),!1)}else{const oe=e.$wrapperEl.children(`.${e.params.slideDuplicateClass}[data-swiper-slide-index="${re}"]`);g(oe.index(),!1)}}r("lazyImageReady",N[0],O[0]),e.params.autoHeight&&e.updateAutoHeight()}}),r("lazyImageLoad",N[0],O[0])})}function o(){const{$wrapperEl:x,params:E,slides:k,activeIndex:S}=e,N=e.virtual&&E.virtual.enabled,L=E.lazy;let P=E.slidesPerView;P==="auto"&&(P=0);function O(z){if(N){if(x.children(`.${E.slideClass}[data-swiper-slide-index="${z}"]`).length)return!0}else if(k[z])return!0;return!1}function V(z){return N?$(z).attr("data-swiper-slide-index"):$(z).index()}if(d||(d=!0),e.params.watchSlidesProgress)x.children(`.${E.slideVisibleClass}`).each(z=>{const U=N?$(z).attr("data-swiper-slide-index"):$(z).index();g(U)});else if(P>1)for(let z=S;z<S+P;z+=1)O(z)&&g(z);else g(S);if(L.loadPrevNext)if(P>1||L.loadPrevNextAmount&&L.loadPrevNextAmount>1){const z=L.loadPrevNextAmount,U=Math.ceil(P),W=Math.min(S+U+Math.max(z,U),k.length),Z=Math.max(S-Math.max(U,z),0);for(let re=S+U;re<W;re+=1)O(re)&&g(re);for(let re=Z;re<S;re+=1)O(re)&&g(re)}else{const z=x.children(`.${E.slideNextClass}`);z.length>0&&g(V(z));const U=x.children(`.${E.slidePrevClass}`);U.length>0&&g(V(U))}}function v(){const x=getWindow();if(!e||e.destroyed)return;const E=e.params.lazy.scrollingElement?$(e.params.lazy.scrollingElement):$(x),k=E[0]===x,S=k?x.innerWidth:E[0].offsetWidth,N=k?x.innerHeight:E[0].offsetHeight,L=e.$el.offset(),{rtlTranslate:P}=e;let O=!1;P&&(L.left-=e.$el[0].scrollLeft);const V=[[L.left,L.top],[L.left+e.width,L.top],[L.left,L.top+e.height],[L.left+e.width,L.top+e.height]];for(let U=0;U<V.length;U+=1){const W=V[U];if(W[0]>=0&&W[0]<=S&&W[1]>=0&&W[1]<=N){if(W[0]===0&&W[1]===0)continue;O=!0}}const z=e.touchEvents.start==="touchstart"&&e.support.passiveListener&&e.params.passiveListeners?{passive:!0,capture:!1}:!1;O?(o(),E.off("scroll",v,z)):c||(c=!0,E.on("scroll",v,z))}n("beforeInit",()=>{e.params.lazy.enabled&&e.params.preloadImages&&(e.params.preloadImages=!1)}),n("init",()=>{e.params.lazy.enabled&&(e.params.lazy.checkInView?v():o())}),n("scroll",()=>{e.params.freeMode&&e.params.freeMode.enabled&&!e.params.freeMode.sticky&&o()}),n("scrollbarDragMove resize _freeModeNoMomentumRelease",()=>{e.params.lazy.enabled&&(e.params.lazy.checkInView?v():o())}),n("transitionStart",()=>{e.params.lazy.enabled&&(e.params.lazy.loadOnTransitionStart||!e.params.lazy.loadOnTransitionStart&&!d)&&(e.params.lazy.checkInView?v():o())}),n("transitionEnd",()=>{e.params.lazy.enabled&&!e.params.lazy.loadOnTransitionStart&&(e.params.lazy.checkInView?v():o())}),n("slideChange",()=>{const{lazy:x,cssMode:E,watchSlidesProgress:k,touchReleaseOnEdges:S,resistanceRatio:N}=e.params;x.enabled&&(E||k&&(S||N===0))&&o()}),n("destroy",()=>{!e.$el||e.$el.find(`.${e.params.lazy.loadingClass}`).removeClass(e.params.lazy.loadingClass)}),Object.assign(e.lazy,{load:o,loadInSlide:g})}function A11y({swiper:e,extendParams:t,on:n}){t({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}}),e.a11y={clicked:!1};let r=null;function c(ae){const Ce=r;Ce.length!==0&&(Ce.html(""),Ce.html(ae))}function d(ae=16){const Ce=()=>Math.round(16*Math.random()).toString(16);return"x".repeat(ae).replace(/x/g,Ce)}function g(ae){ae.attr("tabIndex","0")}function o(ae){ae.attr("tabIndex","-1")}function v(ae,Ce){ae.attr("role",Ce)}function x(ae,Ce){ae.attr("aria-roledescription",Ce)}function E(ae,Ce){ae.attr("aria-controls",Ce)}function k(ae,Ce){ae.attr("aria-label",Ce)}function S(ae,Ce){ae.attr("id",Ce)}function N(ae,Ce){ae.attr("aria-live",Ce)}function L(ae){ae.attr("aria-disabled",!0)}function P(ae){ae.attr("aria-disabled",!1)}function O(ae){if(ae.keyCode!==13&&ae.keyCode!==32)return;const Ce=e.params.a11y,Fe=$(ae.target);e.navigation&&e.navigation.$nextEl&&Fe.is(e.navigation.$nextEl)&&(e.isEnd&&!e.params.loop||e.slideNext(),e.isEnd?c(Ce.lastSlideMessage):c(Ce.nextSlideMessage)),e.navigation&&e.navigation.$prevEl&&Fe.is(e.navigation.$prevEl)&&(e.isBeginning&&!e.params.loop||e.slidePrev(),e.isBeginning?c(Ce.firstSlideMessage):c(Ce.prevSlideMessage)),e.pagination&&Fe.is(classesToSelector(e.params.pagination.bulletClass))&&Fe[0].click()}function V(){if(e.params.loop||e.params.rewind||!e.navigation)return;const{$nextEl:ae,$prevEl:Ce}=e.navigation;Ce&&Ce.length>0&&(e.isBeginning?(L(Ce),o(Ce)):(P(Ce),g(Ce))),ae&&ae.length>0&&(e.isEnd?(L(ae),o(ae)):(P(ae),g(ae)))}function z(){return e.pagination&&e.pagination.bullets&&e.pagination.bullets.length}function U(){return z()&&e.params.pagination.clickable}function W(){const ae=e.params.a11y;!z()||e.pagination.bullets.each(Ce=>{const Fe=$(Ce);e.params.pagination.clickable&&(g(Fe),e.params.pagination.renderBullet||(v(Fe,"button"),k(Fe,ae.paginationBulletMessage.replace(/\{\{index\}\}/,Fe.index()+1)))),Fe.is(`.${e.params.pagination.bulletActiveClass}`)?Fe.attr("aria-current","true"):Fe.removeAttr("aria-current")})}const Z=(ae,Ce,Fe)=>{g(ae),ae[0].tagName!=="BUTTON"&&(v(ae,"button"),ae.on("keydown",O)),k(ae,Fe),E(ae,Ce)},re=()=>{e.a11y.clicked=!0},oe=()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.destroyed||(e.a11y.clicked=!1)})})},se=ae=>{if(e.a11y.clicked)return;const Ce=ae.target.closest(`.${e.params.slideClass}`);if(!Ce||!e.slides.includes(Ce))return;const Fe=e.slides.indexOf(Ce)===e.activeIndex,it=e.params.watchSlidesProgress&&e.visibleSlides&&e.visibleSlides.includes(Ce);Fe||it||ae.sourceCapabilities&&ae.sourceCapabilities.firesTouchEvents||(e.isHorizontal()?e.el.scrollLeft=0:e.el.scrollTop=0,e.slideTo(e.slides.indexOf(Ce),0))},ce=()=>{const ae=e.params.a11y;ae.itemRoleDescriptionMessage&&x($(e.slides),ae.itemRoleDescriptionMessage),ae.slideRole&&v($(e.slides),ae.slideRole);const Ce=e.params.loop?e.slides.filter(Fe=>!Fe.classList.contains(e.params.slideDuplicateClass)).length:e.slides.length;ae.slideLabelMessage&&e.slides.each((Fe,it)=>{const _e=$(Fe),ke=e.params.loop?parseInt(_e.attr("data-swiper-slide-index"),10):it,ze=ae.slideLabelMessage.replace(/\{\{index\}\}/,ke+1).replace(/\{\{slidesLength\}\}/,Ce);k(_e,ze)})},me=()=>{const ae=e.params.a11y;e.$el.append(r);const Ce=e.$el;ae.containerRoleDescriptionMessage&&x(Ce,ae.containerRoleDescriptionMessage),ae.containerMessage&&k(Ce,ae.containerMessage);const Fe=e.$wrapperEl,it=ae.id||Fe.attr("id")||`swiper-wrapper-${d(16)}`,_e=e.params.autoplay&&e.params.autoplay.enabled?"off":"polite";S(Fe,it),N(Fe,_e),ce();let ke,ze;e.navigation&&e.navigation.$nextEl&&(ke=e.navigation.$nextEl),e.navigation&&e.navigation.$prevEl&&(ze=e.navigation.$prevEl),ke&&ke.length&&Z(ke,it,ae.nextSlideMessage),ze&&ze.length&&Z(ze,it,ae.prevSlideMessage),U()&&e.pagination.$el.on("keydown",classesToSelector(e.params.pagination.bulletClass),O),e.$el.on("focus",se,!0),e.$el.on("pointerdown",re,!0),e.$el.on("pointerup",oe,!0)};function we(){r&&r.length>0&&r.remove();let ae,Ce;e.navigation&&e.navigation.$nextEl&&(ae=e.navigation.$nextEl),e.navigation&&e.navigation.$prevEl&&(Ce=e.navigation.$prevEl),ae&&ae.off("keydown",O),Ce&&Ce.off("keydown",O),U()&&e.pagination.$el.off("keydown",classesToSelector(e.params.pagination.bulletClass),O),e.$el.off("focus",se,!0),e.$el.off("pointerdown",re,!0),e.$el.off("pointerup",oe,!0)}n("beforeInit",()=>{r=$(`<span class="${e.params.a11y.notificationClass}" aria-live="assertive" aria-atomic="true"></span>`)}),n("afterInit",()=>{!e.params.a11y.enabled||me()}),n("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{!e.params.a11y.enabled||ce()}),n("fromEdge toEdge afterInit lock unlock",()=>{!e.params.a11y.enabled||V()}),n("paginationUpdate",()=>{!e.params.a11y.enabled||W()}),n("destroy",()=>{!e.params.a11y.enabled||we()})}function Autoplay({swiper:e,extendParams:t,on:n,emit:r}){let c;e.autoplay={running:!1,paused:!1},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});function d(){if(!e.size){e.autoplay.running=!1,e.autoplay.paused=!1;return}const P=e.slides.eq(e.activeIndex);let O=e.params.autoplay.delay;P.attr("data-swiper-autoplay")&&(O=P.attr("data-swiper-autoplay")||e.params.autoplay.delay),clearTimeout(c),c=nextTick(()=>{let V;e.params.autoplay.reverseDirection?e.params.loop?(e.loopFix(),V=e.slidePrev(e.params.speed,!0,!0),r("autoplay")):e.isBeginning?e.params.autoplay.stopOnLastSlide?o():(V=e.slideTo(e.slides.length-1,e.params.speed,!0,!0),r("autoplay")):(V=e.slidePrev(e.params.speed,!0,!0),r("autoplay")):e.params.loop?(e.loopFix(),V=e.slideNext(e.params.speed,!0,!0),r("autoplay")):e.isEnd?e.params.autoplay.stopOnLastSlide?o():(V=e.slideTo(0,e.params.speed,!0,!0),r("autoplay")):(V=e.slideNext(e.params.speed,!0,!0),r("autoplay")),(e.params.cssMode&&e.autoplay.running||V===!1)&&d()},O)}function g(){return typeof c<"u"||e.autoplay.running?!1:(e.autoplay.running=!0,r("autoplayStart"),d(),!0)}function o(){return!e.autoplay.running||typeof c>"u"?!1:(c&&(clearTimeout(c),c=void 0),e.autoplay.running=!1,r("autoplayStop"),!0)}function v(P){!e.autoplay.running||e.autoplay.paused||(c&&clearTimeout(c),e.autoplay.paused=!0,P===0||!e.params.autoplay.waitForTransition?(e.autoplay.paused=!1,d()):["transitionend","webkitTransitionEnd"].forEach(O=>{e.$wrapperEl[0].addEventListener(O,E)}))}function x(){const P=getDocument();P.visibilityState==="hidden"&&e.autoplay.running&&v(),P.visibilityState==="visible"&&e.autoplay.paused&&(d(),e.autoplay.paused=!1)}function E(P){!e||e.destroyed||!e.$wrapperEl||P.target===e.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach(O=>{e.$wrapperEl[0].removeEventListener(O,E)}),e.autoplay.paused=!1,e.autoplay.running?d():o())}function k(){e.params.autoplay.disableOnInteraction?o():(r("autoplayPause"),v()),["transitionend","webkitTransitionEnd"].forEach(P=>{e.$wrapperEl[0].removeEventListener(P,E)})}function S(){e.params.autoplay.disableOnInteraction||(e.autoplay.paused=!1,r("autoplayResume"),d())}function N(){e.params.autoplay.pauseOnMouseEnter&&(e.$el.on("mouseenter",k),e.$el.on("mouseleave",S))}function L(){e.$el.off("mouseenter",k),e.$el.off("mouseleave",S)}n("init",()=>{e.params.autoplay.enabled&&(g(),getDocument().addEventListener("visibilitychange",x),N())}),n("beforeTransitionStart",(P,O,V)=>{e.autoplay.running&&(V||!e.params.autoplay.disableOnInteraction?e.autoplay.pause(O):o())}),n("sliderFirstMove",()=>{e.autoplay.running&&(e.params.autoplay.disableOnInteraction?o():v())}),n("touchEnd",()=>{e.params.cssMode&&e.autoplay.paused&&!e.params.autoplay.disableOnInteraction&&d()}),n("destroy",()=>{L(),e.autoplay.running&&o(),getDocument().removeEventListener("visibilitychange",x)}),Object.assign(e.autoplay,{pause:v,run:d,start:g,stop:o})}function Grid({swiper:e,extendParams:t}){t({grid:{rows:1,fill:"column"}});let n,r,c;const d=v=>{const{slidesPerView:x}=e.params,{rows:E,fill:k}=e.params.grid;r=n/E,c=Math.floor(v/E),Math.floor(v/E)===v/E?n=v:n=Math.ceil(v/E)*E,x!=="auto"&&k==="row"&&(n=Math.max(n,x*E))},g=(v,x,E,k)=>{const{slidesPerGroup:S,spaceBetween:N}=e.params,{rows:L,fill:P}=e.params.grid;let O,V,z;if(P==="row"&&S>1){const U=Math.floor(v/(S*L)),W=v-L*S*U,Z=U===0?S:Math.min(Math.ceil((E-U*L*S)/L),S);z=Math.floor(W/Z),V=W-z*Z+U*S,O=V+z*n/L,x.css({"-webkit-order":O,order:O})}else P==="column"?(V=Math.floor(v/L),z=v-V*L,(V>c||V===c&&z===L-1)&&(z+=1,z>=L&&(z=0,V+=1))):(z=Math.floor(v/r),V=v-z*r);x.css(k("margin-top"),z!==0?N&&`${N}px`:"")},o=(v,x,E)=>{const{spaceBetween:k,centeredSlides:S,roundLengths:N}=e.params,{rows:L}=e.params.grid;if(e.virtualSize=(v+k)*n,e.virtualSize=Math.ceil(e.virtualSize/L)-k,e.$wrapperEl.css({[E("width")]:`${e.virtualSize+k}px`}),S){x.splice(0,x.length);const P=[];for(let O=0;O<x.length;O+=1){let V=x[O];N&&(V=Math.floor(V)),x[O]<e.virtualSize+x[0]&&P.push(V)}x.push(...P)}};e.grid={initSlides:d,updateSlide:g,updateWrapperSize:o}}function effectInit(e){const{effect:t,swiper:n,on:r,setTranslate:c,setTransition:d,overwriteParams:g,perspective:o,recreateShadows:v,getEffectParams:x}=e;r("beforeInit",()=>{if(n.params.effect!==t)return;n.classNames.push(`${n.params.containerModifierClass}${t}`),o&&o()&&n.classNames.push(`${n.params.containerModifierClass}3d`);const k=g?g():{};Object.assign(n.params,k),Object.assign(n.originalParams,k)}),r("setTranslate",()=>{n.params.effect===t&&c()}),r("setTransition",(k,S)=>{n.params.effect===t&&d(S)}),r("transitionEnd",()=>{if(n.params.effect===t&&v){if(!x||!x().slideShadows)return;n.slides.each(k=>{n.$(k).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").remove()}),v()}});let E;r("virtualUpdate",()=>{n.params.effect===t&&(n.slides.length||(E=!0),requestAnimationFrame(()=>{E&&n.slides&&n.slides.length&&(c(),E=!1)}))})}function effectTarget(e,t){return e.transformEl?t.find(e.transformEl).css({"backface-visibility":"hidden","-webkit-backface-visibility":"hidden"}):t}function effectVirtualTransitionEnd({swiper:e,duration:t,transformEl:n,allSlides:r}){const{slides:c,activeIndex:d,$wrapperEl:g}=e;if(e.params.virtualTranslate&&t!==0){let o=!1,v;r?v=n?c.find(n):c:v=n?c.eq(d).find(n):c.eq(d),v.transitionEnd(()=>{if(o||!e||e.destroyed)return;o=!0,e.animating=!1;const x=["webkitTransitionEnd","transitionend"];for(let E=0;E<x.length;E+=1)g.trigger(x[E])})}}function EffectFade({swiper:e,extendParams:t,on:n}){t({fadeEffect:{crossFade:!1,transformEl:null}}),effectInit({effect:"fade",swiper:e,on:n,setTranslate:()=>{const{slides:d}=e,g=e.params.fadeEffect;for(let o=0;o<d.length;o+=1){const v=e.slides.eq(o);let E=-v[0].swiperSlideOffset;e.params.virtualTranslate||(E-=e.translate);let k=0;e.isHorizontal()||(k=E,E=0);const S=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(v[0].progress),0):1+Math.min(Math.max(v[0].progress,-1),0);effectTarget(g,v).css({opacity:S}).transform(`translate3d(${E}px, ${k}px, 0px)`)}},setTransition:d=>{const{transformEl:g}=e.params.fadeEffect;(g?e.slides.find(g):e.slides).transition(d),effectVirtualTransitionEnd({swiper:e,duration:d,transformEl:g,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}function isObject(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function extend(e,t){const n=["__proto__","constructor","prototype"];Object.keys(t).filter(r=>n.indexOf(r)<0).forEach(r=>{typeof e[r]>"u"?e[r]=t[r]:isObject(t[r])&&isObject(e[r])&&Object.keys(t[r]).length>0?t[r].__swiper__?e[r]=t[r]:extend(e[r],t[r]):e[r]=t[r]})}function needsNavigation(e={}){return e.navigation&&typeof e.navigation.nextEl>"u"&&typeof e.navigation.prevEl>"u"}function needsPagination(e={}){return e.pagination&&typeof e.pagination.el>"u"}function needsScrollbar(e={}){return e.scrollbar&&typeof e.scrollbar.el>"u"}function uniqueClasses(e=""){const t=e.split(" ").map(r=>r.trim()).filter(r=>!!r),n=[];return t.forEach(r=>{n.indexOf(r)<0&&n.push(r)}),n.join(" ")}const paramsList=["modules","init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopedSlidesLimit","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];function getParams(e={},t=!0){const n={on:{}},r={},c={};extend(n,Swiper$1.defaults),extend(n,Swiper$1.extendedDefaults),n._emitClasses=!0,n.init=!1;const d={},g=paramsList.map(v=>v.replace(/_/,"")),o=Object.assign({},e);return Object.keys(o).forEach(v=>{typeof e[v]>"u"||(g.indexOf(v)>=0?isObject(e[v])?(n[v]={},c[v]={},extend(n[v],e[v]),extend(c[v],e[v])):(n[v]=e[v],c[v]=e[v]):v.search(/on[A-Z]/)===0&&typeof e[v]=="function"?t?r[`${v[2].toLowerCase()}${v.substr(3)}`]=e[v]:n.on[`${v[2].toLowerCase()}${v.substr(3)}`]=e[v]:d[v]=e[v])}),["navigation","pagination","scrollbar"].forEach(v=>{n[v]===!0&&(n[v]={}),n[v]===!1&&delete n[v]}),{params:n,passedParams:c,rest:d,events:r}}function mountSwiper({el:e,nextEl:t,prevEl:n,paginationEl:r,scrollbarEl:c,swiper:d},g){needsNavigation(g)&&t&&n&&(d.params.navigation.nextEl=t,d.originalParams.navigation.nextEl=t,d.params.navigation.prevEl=n,d.originalParams.navigation.prevEl=n),needsPagination(g)&&r&&(d.params.pagination.el=r,d.originalParams.pagination.el=r),needsScrollbar(g)&&c&&(d.params.scrollbar.el=c,d.originalParams.scrollbar.el=c),d.init(e)}const calcLoopedSlides=(e,t)=>{let n=t.slidesPerView;if(t.breakpoints){const c=Swiper$1.prototype.getBreakpoint(t.breakpoints),d=c in t.breakpoints?t.breakpoints[c]:void 0;d&&d.slidesPerView&&(n=d.slidesPerView)}let r=Math.ceil(parseFloat(t.loopedSlides||n,10));return r+=t.loopAdditionalSlides,r>e.length&&t.loopedSlidesLimit&&(r=e.length),r};function renderLoop(e,t,n){const r=t.map((v,x)=>(v.props||(v.props={}),v.props.swiperRef=e,v.props["data-swiper-slide-index"]=x,v));function c(v,x,E){return v.props||(v.props={}),h(v.type,{...v.props,key:`${v.key}-duplicate-${x}-${E}`,class:`${v.props.className||""} ${n.slideDuplicateClass} ${v.props.class||""}`},v.children)}if(n.loopFillGroupWithBlank){const v=n.slidesPerGroup-r.length%n.slidesPerGroup;if(v!==n.slidesPerGroup)for(let x=0;x<v;x+=1){const E=h("div",{class:`${n.slideClass} ${n.slideBlankClass}`});r.push(E)}}n.slidesPerView==="auto"&&!n.loopedSlides&&(n.loopedSlides=r.length);const d=calcLoopedSlides(r,n),g=[],o=[];for(let v=0;v<d;v+=1){const x=v-Math.floor(v/r.length)*r.length;o.push(c(r[x],v,"append")),g.unshift(c(r[r.length-x-1],v,"prepend"))}return e.value&&(e.value.loopedSlides=d),[...g,...r,...o]}function getChangedParams(e,t,n,r,c){const d=[];if(!t)return d;const g=v=>{d.indexOf(v)<0&&d.push(v)};if(n&&r){const v=r.map(c),x=n.map(c);v.join("")!==x.join("")&&g("children"),r.length!==n.length&&g("children")}return paramsList.filter(v=>v[0]==="_").map(v=>v.replace(/_/,"")).forEach(v=>{if(v in e&&v in t)if(isObject(e[v])&&isObject(t[v])){const x=Object.keys(e[v]),E=Object.keys(t[v]);x.length!==E.length?g(v):(x.forEach(k=>{e[v][k]!==t[v][k]&&g(v)}),E.forEach(k=>{e[v][k]!==t[v][k]&&g(v)}))}else e[v]!==t[v]&&g(v)}),d}function getChildren(e,t,n){e===void 0&&(e={});const r=[],c={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]},d=(g,o)=>{!Array.isArray(g)||g.forEach(v=>{const x=typeof v.type=="symbol";o==="default"&&(o="container-end"),x&&v.children?d(v.children,"default"):v.type&&(v.type.name==="SwiperSlide"||v.type.name==="AsyncComponentWrapper")?r.push(v):c[o]&&c[o].push(v)})};return Object.keys(e).forEach(g=>{if(typeof e[g]!="function")return;const o=e[g]();d(o,g)}),n.value=t.value,t.value=r,{slides:r,slots:c}}function updateSwiper({swiper:e,slides:t,passedParams:n,changedParams:r,nextEl:c,prevEl:d,scrollbarEl:g,paginationEl:o}){const v=r.filter(Z=>Z!=="children"&&Z!=="direction"),{params:x,pagination:E,navigation:k,scrollbar:S,virtual:N,thumbs:L}=e;let P,O,V,z,U;r.includes("thumbs")&&n.thumbs&&n.thumbs.swiper&&x.thumbs&&!x.thumbs.swiper&&(P=!0),r.includes("controller")&&n.controller&&n.controller.control&&x.controller&&!x.controller.control&&(O=!0),r.includes("pagination")&&n.pagination&&(n.pagination.el||o)&&(x.pagination||x.pagination===!1)&&E&&!E.el&&(V=!0),r.includes("scrollbar")&&n.scrollbar&&(n.scrollbar.el||g)&&(x.scrollbar||x.scrollbar===!1)&&S&&!S.el&&(z=!0),r.includes("navigation")&&n.navigation&&(n.navigation.prevEl||d)&&(n.navigation.nextEl||c)&&(x.navigation||x.navigation===!1)&&k&&!k.prevEl&&!k.nextEl&&(U=!0);const W=Z=>{!e[Z]||(e[Z].destroy(),Z==="navigation"?(x[Z].prevEl=void 0,x[Z].nextEl=void 0,e[Z].prevEl=void 0,e[Z].nextEl=void 0):(x[Z].el=void 0,e[Z].el=void 0))};v.forEach(Z=>{if(isObject(x[Z])&&isObject(n[Z]))extend(x[Z],n[Z]);else{const re=n[Z];(re===!0||re===!1)&&(Z==="navigation"||Z==="pagination"||Z==="scrollbar")?re===!1&&W(Z):x[Z]=n[Z]}}),v.includes("controller")&&!O&&e.controller&&e.controller.control&&x.controller&&x.controller.control&&(e.controller.control=x.controller.control),r.includes("children")&&t&&N&&x.virtual.enabled?(N.slides=t,N.update(!0)):r.includes("children")&&e.lazy&&e.params.lazy.enabled&&e.lazy.load(),P&&L.init()&&L.update(!0),O&&(e.controller.control=x.controller.control),V&&(o&&(x.pagination.el=o),E.init(),E.render(),E.update()),z&&(g&&(x.scrollbar.el=g),S.init(),S.updateSize(),S.setTranslate()),U&&(c&&(x.navigation.nextEl=c),d&&(x.navigation.prevEl=d),k.init(),k.update()),r.includes("allowSlideNext")&&(e.allowSlideNext=n.allowSlideNext),r.includes("allowSlidePrev")&&(e.allowSlidePrev=n.allowSlidePrev),r.includes("direction")&&e.changeDirection(n.direction,!1),e.update()}function renderVirtual(e,t,n){if(!n)return null;const r=e.value.isHorizontal()?{[e.value.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`};return t.filter((c,d)=>d>=n.from&&d<=n.to).map(c=>(c.props||(c.props={}),c.props.style||(c.props.style={}),c.props.swiperRef=e,c.props.style=r,h(c.type,{...c.props},c.children)))}const updateOnVirtualData=e=>{!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.lazy&&e.params.lazy.enabled&&e.lazy.load(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())},Swiper={name:"Swiper",props:{tag:{type:String,default:"div"},wrapperTag:{type:String,default:"div"},modules:{type:Array,default:void 0},init:{type:Boolean,default:void 0},direction:{type:String,default:void 0},touchEventsTarget:{type:String,default:void 0},initialSlide:{type:Number,default:void 0},speed:{type:Number,default:void 0},cssMode:{type:Boolean,default:void 0},updateOnWindowResize:{type:Boolean,default:void 0},resizeObserver:{type:Boolean,default:void 0},nested:{type:Boolean,default:void 0},focusableElements:{type:String,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},preventInteractionOnTransition:{type:Boolean,default:void 0},userAgent:{type:String,default:void 0},url:{type:String,default:void 0},edgeSwipeDetection:{type:[Boolean,String],default:void 0},edgeSwipeThreshold:{type:Number,default:void 0},autoHeight:{type:Boolean,default:void 0},setWrapperSize:{type:Boolean,default:void 0},virtualTranslate:{type:Boolean,default:void 0},effect:{type:String,default:void 0},breakpoints:{type:Object,default:void 0},spaceBetween:{type:Number,default:void 0},slidesPerView:{type:[Number,String],default:void 0},maxBackfaceHiddenSlides:{type:Number,default:void 0},slidesPerGroup:{type:Number,default:void 0},slidesPerGroupSkip:{type:Number,default:void 0},slidesPerGroupAuto:{type:Boolean,default:void 0},centeredSlides:{type:Boolean,default:void 0},centeredSlidesBounds:{type:Boolean,default:void 0},slidesOffsetBefore:{type:Number,default:void 0},slidesOffsetAfter:{type:Number,default:void 0},normalizeSlideIndex:{type:Boolean,default:void 0},centerInsufficientSlides:{type:Boolean,default:void 0},watchOverflow:{type:Boolean,default:void 0},roundLengths:{type:Boolean,default:void 0},touchRatio:{type:Number,default:void 0},touchAngle:{type:Number,default:void 0},simulateTouch:{type:Boolean,default:void 0},shortSwipes:{type:Boolean,default:void 0},longSwipes:{type:Boolean,default:void 0},longSwipesRatio:{type:Number,default:void 0},longSwipesMs:{type:Number,default:void 0},followFinger:{type:Boolean,default:void 0},allowTouchMove:{type:Boolean,default:void 0},threshold:{type:Number,default:void 0},touchMoveStopPropagation:{type:Boolean,default:void 0},touchStartPreventDefault:{type:Boolean,default:void 0},touchStartForcePreventDefault:{type:Boolean,default:void 0},touchReleaseOnEdges:{type:Boolean,default:void 0},uniqueNavElements:{type:Boolean,default:void 0},resistance:{type:Boolean,default:void 0},resistanceRatio:{type:Number,default:void 0},watchSlidesProgress:{type:Boolean,default:void 0},grabCursor:{type:Boolean,default:void 0},preventClicks:{type:Boolean,default:void 0},preventClicksPropagation:{type:Boolean,default:void 0},slideToClickedSlide:{type:Boolean,default:void 0},preloadImages:{type:Boolean,default:void 0},updateOnImagesReady:{type:Boolean,default:void 0},loop:{type:Boolean,default:void 0},loopAdditionalSlides:{type:Number,default:void 0},loopedSlides:{type:Number,default:void 0},loopedSlidesLimit:{type:Boolean,default:!0},loopFillGroupWithBlank:{type:Boolean,default:void 0},loopPreventsSlide:{type:Boolean,default:void 0},rewind:{type:Boolean,default:void 0},allowSlidePrev:{type:Boolean,default:void 0},allowSlideNext:{type:Boolean,default:void 0},swipeHandler:{type:Boolean,default:void 0},noSwiping:{type:Boolean,default:void 0},noSwipingClass:{type:String,default:void 0},noSwipingSelector:{type:String,default:void 0},passiveListeners:{type:Boolean,default:void 0},containerModifierClass:{type:String,default:void 0},slideClass:{type:String,default:void 0},slideBlankClass:{type:String,default:void 0},slideActiveClass:{type:String,default:void 0},slideDuplicateActiveClass:{type:String,default:void 0},slideVisibleClass:{type:String,default:void 0},slideDuplicateClass:{type:String,default:void 0},slideNextClass:{type:String,default:void 0},slideDuplicateNextClass:{type:String,default:void 0},slidePrevClass:{type:String,default:void 0},slideDuplicatePrevClass:{type:String,default:void 0},wrapperClass:{type:String,default:void 0},runCallbacksOnInit:{type:Boolean,default:void 0},observer:{type:Boolean,default:void 0},observeParents:{type:Boolean,default:void 0},observeSlideChildren:{type:Boolean,default:void 0},a11y:{type:[Boolean,Object],default:void 0},autoplay:{type:[Boolean,Object],default:void 0},controller:{type:Object,default:void 0},coverflowEffect:{type:Object,default:void 0},cubeEffect:{type:Object,default:void 0},fadeEffect:{type:Object,default:void 0},flipEffect:{type:Object,default:void 0},creativeEffect:{type:Object,default:void 0},cardsEffect:{type:Object,default:void 0},hashNavigation:{type:[Boolean,Object],default:void 0},history:{type:[Boolean,Object],default:void 0},keyboard:{type:[Boolean,Object],default:void 0},lazy:{type:[Boolean,Object],default:void 0},mousewheel:{type:[Boolean,Object],default:void 0},navigation:{type:[Boolean,Object],default:void 0},pagination:{type:[Boolean,Object],default:void 0},parallax:{type:[Boolean,Object],default:void 0},scrollbar:{type:[Boolean,Object],default:void 0},thumbs:{type:Object,default:void 0},virtual:{type:[Boolean,Object],default:void 0},zoom:{type:[Boolean,Object],default:void 0},grid:{type:[Object],default:void 0},freeMode:{type:[Boolean,Object],default:void 0},enabled:{type:Boolean,default:void 0}},emits:["_beforeBreakpoint","_containerClasses","_slideClass","_slideClasses","_swiper","_freeModeNoMomentumRelease","activeIndexChange","afterInit","autoplay","autoplayStart","autoplayStop","autoplayPause","autoplayResume","beforeDestroy","beforeInit","beforeLoopFix","beforeResize","beforeSlideChangeStart","beforeTransitionStart","breakpoint","changeDirection","click","disable","doubleTap","doubleClick","destroy","enable","fromEdge","hashChange","hashSet","imagesReady","init","keyPress","lazyImageLoad","lazyImageReady","lock","loopFix","momentumBounce","navigationHide","navigationShow","navigationPrev","navigationNext","observerUpdate","orientationchange","paginationHide","paginationRender","paginationShow","paginationUpdate","progress","reachBeginning","reachEnd","realIndexChange","resize","scroll","scrollbarDragEnd","scrollbarDragMove","scrollbarDragStart","setTransition","setTranslate","slideChange","slideChangeTransitionEnd","slideChangeTransitionStart","slideNextTransitionEnd","slideNextTransitionStart","slidePrevTransitionEnd","slidePrevTransitionStart","slideResetTransitionStart","slideResetTransitionEnd","sliderMove","sliderFirstMove","slidesLengthChange","slidesGridLengthChange","snapGridLengthChange","snapIndexChange","swiper","tap","toEdge","touchEnd","touchMove","touchMoveOpposite","touchStart","transitionEnd","transitionStart","unlock","update","virtualUpdate","zoomChange"],setup(e,t){let{slots:n,emit:r}=t;const{tag:c,wrapperTag:d}=e,g=ref("swiper"),o=ref(null),v=ref(!1),x=ref(!1),E=ref(null),k=ref(null),S=ref(null),N={value:[]},L={value:[]},P=ref(null),O=ref(null),V=ref(null),z=ref(null),{params:U,passedParams:W}=getParams(e,!1);getChildren(n,N,L),S.value=W,L.value=N.value;const Z=()=>{getChildren(n,N,L),v.value=!0};if(U.onAny=function(oe){for(var se=arguments.length,ce=new Array(se>1?se-1:0),me=1;me<se;me++)ce[me-1]=arguments[me];r(oe,...ce)},Object.assign(U.on,{_beforeBreakpoint:Z,_containerClasses(oe,se){g.value=se}}),k.value=new Swiper$1(U),k.value.loopCreate=()=>{},k.value.loopDestroy=()=>{},U.loop&&(k.value.loopedSlides=calcLoopedSlides(N.value,U)),k.value.virtual&&k.value.params.virtual.enabled){k.value.virtual.slides=N.value;const oe={cache:!1,slides:N.value,renderExternal:se=>{o.value=se},renderExternalUpdate:!1};extend(k.value.params.virtual,oe),extend(k.value.originalParams.virtual,oe)}onUpdated(()=>{!x.value&&k.value&&(k.value.emitSlidesClasses(),x.value=!0);const{passedParams:oe}=getParams(e,!1),se=getChangedParams(oe,S.value,N.value,L.value,ce=>ce.props&&ce.props.key);S.value=oe,(se.length||v.value)&&k.value&&!k.value.destroyed&&updateSwiper({swiper:k.value,slides:N.value,passedParams:oe,changedParams:se,nextEl:P.value,prevEl:O.value,scrollbarEl:z.value,paginationEl:V.value}),v.value=!1}),provide("swiper",k),watch(o,()=>{nextTick$1(()=>{updateOnVirtualData(k.value)})}),onMounted(()=>{!E.value||(mountSwiper({el:E.value,nextEl:P.value,prevEl:O.value,paginationEl:V.value,scrollbarEl:z.value,swiper:k.value},U),r("swiper",k.value))}),onBeforeUnmount(()=>{k.value&&!k.value.destroyed&&k.value.destroy(!0,!1)});function re(oe){return U.virtual?renderVirtual(k,oe,o.value):!U.loop||k.value&&k.value.destroyed?(oe.forEach(se=>{se.props||(se.props={}),se.props.swiperRef=k}),oe):renderLoop(k,oe,U)}return()=>{const{slides:oe,slots:se}=getChildren(n,N,L);return h(c,{ref:E,class:uniqueClasses(g.value)},[se["container-start"],h(d,{class:"swiper-wrapper"},[se["wrapper-start"],re(oe),se["wrapper-end"]]),needsNavigation(e)&&[h("div",{ref:O,class:"swiper-button-prev"}),h("div",{ref:P,class:"swiper-button-next"})],needsScrollbar(e)&&h("div",{ref:z,class:"swiper-scrollbar"}),needsPagination(e)&&h("div",{ref:V,class:"swiper-pagination"}),se["container-end"]])}}},SwiperSlide={name:"SwiperSlide",props:{tag:{type:String,default:"div"},swiperRef:{type:Object,required:!1},zoom:{type:Boolean,default:void 0},virtualIndex:{type:[String,Number],default:void 0}},setup(e,t){let{slots:n}=t,r=!1;const{swiperRef:c}=e,d=ref(null),g=ref("swiper-slide");function o(x,E,k){E===d.value&&(g.value=k)}onMounted(()=>{!c||!c.value||(c.value.on("_slideClass",o),r=!0)}),onBeforeUpdate(()=>{r||!c||!c.value||(c.value.on("_slideClass",o),r=!0)}),onUpdated(()=>{!d.value||!c||!c.value||c.value.destroyed&&g.value!=="swiper-slide"&&(g.value="swiper-slide")}),onBeforeUnmount(()=>{!c||!c.value||c.value.off("_slideClass",o)});const v=computed(()=>({isActive:g.value.indexOf("swiper-slide-active")>=0||g.value.indexOf("swiper-slide-duplicate-active")>=0,isVisible:g.value.indexOf("swiper-slide-visible")>=0,isDuplicate:g.value.indexOf("swiper-slide-duplicate")>=0,isPrev:g.value.indexOf("swiper-slide-prev")>=0||g.value.indexOf("swiper-slide-duplicate-prev")>=0,isNext:g.value.indexOf("swiper-slide-next")>=0||g.value.indexOf("swiper-slide-duplicate-next")>=0}));return provide("swiperSlide",v),()=>h(e.tag,{class:uniqueClasses(`${g.value}`),ref:d,"data-swiper-slide-index":e.virtualIndex},e.zoom?h("div",{class:"swiper-zoom-container","data-swiper-zoom":typeof e.zoom=="number"?e.zoom:void 0},n.default&&n.default(v.value)):n.default&&n.default(v.value))}};Swiper$1.use([Grid,Pagination,Navigation,Mousewheel,Autoplay,A11y,Lazy,EffectFade]);const _sfc_main$1x=defineComponent({name:"IndexCarrousel",components:{Swiper,SwiperSlide},props:{articles:{type:Array,required:!0},fetching:{type:Boolean,required:!0}},setup(e){const{globalState:t,adConfig:n,isDarkTheme:r}=useEnhancer(),c=computed(()=>{const g=[...e.articles].slice(0,9);if(n.value.PC_CARROUSEL){const{index:o,...v}=n.value.PC_CARROUSEL;g.length&&g.splice(o,0,{ad:!0,...v})}return g});return{LanguageKey,isDarkTheme:r,articleList:c,getArticleDetailRoute,getThumbURL:g=>getArticleBannerThumbnailURL(g,t.imageExt.value.isWebP)}}}),carrousel_vue_vue_type_style_index_0_scoped_d084dfc6_lang="";function _sfc_ssrRender$1x(e,t,n,r,c,d,g,o){const v=resolveComponent("placeholder"),x=resolveComponent("empty"),E=resolveComponent("i18n"),k=resolveComponent("skeleton-line"),S=resolveComponent("swiper"),N=resolveComponent("swiper-slide"),L=resolveComponent("ulink"),P=resolveComponent("router-link");t(`<div${ssrRenderAttrs(mergeProps({class:["carrousel",{dark:e.isDarkTheme}]},r))} data-v-d084dfc6>`),t(ssrRenderComponent(v,{data:e.articleList.length,loading:e.fetching},{placeholder:withCtx((O,V,z,U)=>{if(V)V(ssrRenderComponent(x,{class:"article-empty",key:"empty"},{default:withCtx((W,Z,re,oe)=>{if(Z)Z(ssrRenderComponent(E,{k:e.LanguageKey.ARTICLE_PLACEHOLDER},null,re,oe));else return[createVNode(E,{k:e.LanguageKey.ARTICLE_PLACEHOLDER},null,8,["k"])]}),_:1},z,U));else return[createVNode(x,{class:"article-empty",key:"empty"},{default:withCtx(()=>[createVNode(E,{k:e.LanguageKey.ARTICLE_PLACEHOLDER},null,8,["k"])]),_:1})]}),loading:withCtx((O,V,z,U)=>{if(V)V(`<div class="article-skeleton" data-v-d084dfc6${U}><div class="title" data-v-d084dfc6${U}>`),V(ssrRenderComponent(k,null,null,z,U)),V(`</div><div class="content" data-v-d084dfc6${U}><div class="first" data-v-d084dfc6${U}>`),V(ssrRenderComponent(k,null,null,z,U)),V("</div><!--[-->"),ssrRenderList(3,(W,Z)=>{V(`<div class="line" data-v-d084dfc6${U}>`),V(ssrRenderComponent(k,{class:"line-item"},null,z,U)),V("</div>")}),V("<!--]--></div></div>");else return[createVNode("div",{class:"article-skeleton",key:"skeleton"},[createVNode("div",{class:"title"},[createVNode(k)]),createVNode("div",{class:"content"},[createVNode("div",{class:"first"},[createVNode(k)]),(openBlock(),createBlock(Fragment,null,renderList(3,(W,Z)=>createVNode("div",{class:"line",key:Z},[createVNode(k,{class:"line-item"})])),64))])])]}),default:withCtx((O,V,z,U)=>{if(V)V(ssrRenderComponent(S,{class:"swiper","set-wrapper-size":!0,mousewheel:!0,"observe-parents":!0,"grab-cursor":!1,"simulate-touch":!1,"preload-images":!1,lazy:!1,pagination:{clickable:!0},autoplay:{delay:3500,disableOnInteraction:!1}},{default:withCtx((W,Z,re,oe)=>{if(Z)Z("<!--[-->"),ssrRenderList(e.articleList.slice(0,9),(se,ce)=>{Z(ssrRenderComponent(N,{key:ce},{default:withCtx((me,we,ae,Ce)=>{if(we)we(`<div class="content" data-v-d084dfc6${Ce}>`),se.ad?we(ssrRenderComponent(L,{class:"link",href:se.url},{default:withCtx((Fe,it,_e,ke)=>{if(it)it(`<img${ssrRenderAttr("src",se.src)}${ssrRenderAttr("alt",se.title)} data-v-d084dfc6${ke}><div class="title" data-v-d084dfc6${ke}><div class="background" data-v-d084dfc6${ke}></div><div class="prospect" data-v-d084dfc6${ke}><span class="text" style="${ssrRenderStyle({backgroundImage:`url('${e.getThumbURL(se.src)}')`})}" data-v-d084dfc6${ke}>${ssrInterpolate(se.title)}</span></div></div><span class="ad-symbol" data-v-d084dfc6${ke}>`),it(ssrRenderComponent(E,{k:e.LanguageKey.AD},null,_e,ke)),it("</span>");else return[createVNode("img",{src:se.src,alt:se.title},null,8,["src","alt"]),createVNode("div",{class:"title"},[createVNode("div",{class:"background"}),createVNode("div",{class:"prospect"},[createVNode("span",{class:"text",style:{backgroundImage:`url('${e.getThumbURL(se.src)}')`}},toDisplayString(se.title),5)])]),createVNode("span",{class:"ad-symbol"},[createVNode(E,{k:e.LanguageKey.AD},null,8,["k"])])]}),_:2},ae,Ce)):we(ssrRenderComponent(P,{to:e.getArticleDetailRoute(se.id),class:"link"},{default:withCtx((Fe,it,_e,ke)=>{if(it)it(`<img${ssrRenderAttr("src",e.getThumbURL(se.thumb))}${ssrRenderAttr("alt",se.title)} draggable="false" data-v-d084dfc6${ke}><div class="title" data-v-d084dfc6${ke}><div class="background" data-v-d084dfc6${ke}></div><div class="prospect" data-v-d084dfc6${ke}><span class="text" style="${ssrRenderStyle({backgroundImage:`url('${e.getThumbURL(se.thumb)}')`})}" data-v-d084dfc6${ke}>${ssrInterpolate(se.title)}</span></div></div>`);else return[createVNode("img",{src:e.getThumbURL(se.thumb),alt:se.title,draggable:"false"},null,8,["src","alt"]),createVNode("div",{class:"title"},[createVNode("div",{class:"background"}),createVNode("div",{class:"prospect"},[createVNode("span",{class:"text",style:{backgroundImage:`url('${e.getThumbURL(se.thumb)}')`}},toDisplayString(se.title),5)])])]}),_:2},ae,Ce)),we("</div>");else return[createVNode("div",{class:"content"},[se.ad?(openBlock(),createBlock(L,{key:0,class:"link",href:se.url},{default:withCtx(()=>[createVNode("img",{src:se.src,alt:se.title},null,8,["src","alt"]),createVNode("div",{class:"title"},[createVNode("div",{class:"background"}),createVNode("div",{class:"prospect"},[createVNode("span",{class:"text",style:{backgroundImage:`url('${e.getThumbURL(se.src)}')`}},toDisplayString(se.title),5)])]),createVNode("span",{class:"ad-symbol"},[createVNode(E,{k:e.LanguageKey.AD},null,8,["k"])])]),_:2},1032,["href"])):(openBlock(),createBlock(P,{key:1,to:e.getArticleDetailRoute(se.id),class:"link"},{default:withCtx(()=>[createVNode("img",{src:e.getThumbURL(se.thumb),alt:se.title,draggable:"false"},null,8,["src","alt"]),createVNode("div",{class:"title"},[createVNode("div",{class:"background"}),createVNode("div",{class:"prospect"},[createVNode("span",{class:"text",style:{backgroundImage:`url('${e.getThumbURL(se.thumb)}')`}},toDisplayString(se.title),5)])])]),_:2},1032,["to"]))])]}),_:2},re,oe))}),Z("<!--]-->");else return[(openBlock(!0),createBlock(Fragment,null,renderList(e.articleList.slice(0,9),(se,ce)=>(openBlock(),createBlock(N,{key:ce},{default:withCtx(()=>[createVNode("div",{class:"content"},[se.ad?(openBlock(),createBlock(L,{key:0,class:"link",href:se.url},{default:withCtx(()=>[createVNode("img",{src:se.src,alt:se.title},null,8,["src","alt"]),createVNode("div",{class:"title"},[createVNode("div",{class:"background"}),createVNode("div",{class:"prospect"},[createVNode("span",{class:"text",style:{backgroundImage:`url('${e.getThumbURL(se.src)}')`}},toDisplayString(se.title),5)])]),createVNode("span",{class:"ad-symbol"},[createVNode(E,{k:e.LanguageKey.AD},null,8,["k"])])]),_:2},1032,["href"])):(openBlock(),createBlock(P,{key:1,to:e.getArticleDetailRoute(se.id),class:"link"},{default:withCtx(()=>[createVNode("img",{src:e.getThumbURL(se.thumb),alt:se.title,draggable:"false"},null,8,["src","alt"]),createVNode("div",{class:"title"},[createVNode("div",{class:"background"}),createVNode("div",{class:"prospect"},[createVNode("span",{class:"text",style:{backgroundImage:`url('${e.getThumbURL(se.thumb)}')`}},toDisplayString(se.title),5)])])]),_:2},1032,["to"]))])]),_:2},1024))),128))]}),_:1},z,U));else return[createVNode(S,{class:"swiper","set-wrapper-size":!0,mousewheel:!0,"observe-parents":!0,"grab-cursor":!1,"simulate-touch":!1,"preload-images":!1,lazy:!1,pagination:{clickable:!0},autoplay:{delay:3500,disableOnInteraction:!1}},{default:withCtx(()=>[(openBlock(!0),createBlock(Fragment,null,renderList(e.articleList.slice(0,9),(W,Z)=>(openBlock(),createBlock(N,{key:Z},{default:withCtx(()=>[createVNode("div",{class:"content"},[W.ad?(openBlock(),createBlock(L,{key:0,class:"link",href:W.url},{default:withCtx(()=>[createVNode("img",{src:W.src,alt:W.title},null,8,["src","alt"]),createVNode("div",{class:"title"},[createVNode("div",{class:"background"}),createVNode("div",{class:"prospect"},[createVNode("span",{class:"text",style:{backgroundImage:`url('${e.getThumbURL(W.src)}')`}},toDisplayString(W.title),5)])]),createVNode("span",{class:"ad-symbol"},[createVNode(E,{k:e.LanguageKey.AD},null,8,["k"])])]),_:2},1032,["href"])):(openBlock(),createBlock(P,{key:1,to:e.getArticleDetailRoute(W.id),class:"link"},{default:withCtx(()=>[createVNode("img",{src:e.getThumbURL(W.thumb),alt:W.title,draggable:"false"},null,8,["src","alt"]),createVNode("div",{class:"title"},[createVNode("div",{class:"background"}),createVNode("div",{class:"prospect"},[createVNode("span",{class:"text",style:{backgroundImage:`url('${e.getThumbURL(W.thumb)}')`}},toDisplayString(W.title),5)])])]),_:2},1032,["to"]))])]),_:2},1024))),128))]),_:1})]}),_:1},n)),t("</div>")}const _sfc_setup$1x=_sfc_main$1x.setup;_sfc_main$1x.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/index/carrousel.vue"),_sfc_setup$1x?_sfc_setup$1x(e,t):void 0};const Carrousel=_export_sfc(_sfc_main$1x,[["ssrRender",_sfc_ssrRender$1x],["__scopeId","data-v-d084dfc6"]]);var GAEventCategories=(e=>(e.Comment="comment",e.Share="share",e.Widget="widget",e.Universal="global",e.Article="page_article",e.Index="page_index",e.App="page_app",e.About="page_about",e.Lens="page_lens",e.NFT="page_nft",e))(GAEventCategories||{});const isVideoMediaIns=e=>e.media_type==="VIDEO",isAlbumMediaIns=e=>e.media_type==="CAROUSEL_ALBUM",getInstagramImage=(e,t)=>isVideoMediaIns(e)?getTargetProxyURL(e.thumbnail_url,ProxyModule.Instagram):getTargetProxyURL(t?`${e.permalink}media/?size=${t}`:e.media_url,ProxyModule.Instagram),getYouTubePlaylistURL=e=>`https://www.youtube.com/playlist?list=${e}`,getYouTubeVideoEmbedURL=(e,t)=>{const n=t?`?list=${t}`:"";return`https://www.youtube.com/embed/${e}${n}`},getTwitterTweetDetailURL=(e,t)=>`https://twitter.com/${e}/status/${t}`,get163MusicSongDetailURL=e=>`https://music.163.com/#/song?id=${e}`,_sfc_main$1w=defineComponent({name:"IndexTwitter",components:{Swiper,SwiperSlide},props:{userinfo:{type:Object,default:null},tweets:{type:Object,default:null},fetching:{type:Boolean,required:!0}},setup(e){const{gtag:t}=useEnhancer(),n=ref(),r=()=>{var S;return(S=n.value)==null?void 0:S.slidePrev()},c=()=>{var S;return(S=n.value)==null?void 0:S.slideNext()},d=S=>{n.value=S},g=ref(0),o=()=>{var S;g.value=((S=n.value)==null?void 0:S.activeIndex)||0},v=S=>{t==null||t.event(S,{event_category:GAEventCategories.Index})},x=S=>{var N;if((N=S.geo)!=null&&N.place_id){const P=(e.tweets.includes.places||[]).find(O=>{var V;return O.id===((V=S.geo)==null?void 0:V.place_id)});if(P)return`${P.country_code} \xB7 ${P.name}`}return null},E=S=>{var L;const N=((L=S.attachments)==null?void 0:L.media_keys)||[];if(N.length){const P=e.tweets.includes.media||[];return N.map(O=>P.find(V=>V.media_key===O)).filter(Boolean)}return[]},k=computed(()=>{const S=e.tweets;return S!=null&&S.data?S.data.map(N=>{var P,O;const L={tweet:N,url:getTwitterTweetDetailURL(IDENTITIES.TWITTER_USER_NAME,N.id),location:x(N),medias:E(N),html:unescape$2(N.text)};return(O=(P=N.entities)==null?void 0:P.urls)==null||O.forEach(V=>{var z,U;((z=V.display_url)==null?void 0:z.startsWith("pic.twitter.com/"))||((U=V.display_url)==null?void 0:U.startsWith("twitter.com/"))?L.html=L.html.replace(V.url,""):L.html=L.html.replace(V.url,`<a
                    class="link"
                    target="_blank"
                    rel="external nofollow noopener"
                    title="${V.expanded_url}"
                    href="${V.url}"
                  >
                    <span class="text">[${V.display_url}]</span>
                  </a>
                `)}),L}):[]});return{VALUABLE_LINKS,LanguageKey,completedTweets:k,activeIndex:g,numberSplit,padStart,prevSlide:r,nextSlide:c,handleSwiperReady:d,handleSwiperTransitionStart:o,handleGtagEvent:v}}}),twitter_vue_vue_type_style_index_0_scoped_c8c1ccd2_lang="";function _sfc_ssrRender$1w(e,t,n,r,c,d,g,o){const v=resolveComponent("placeholder"),x=resolveComponent("empty"),E=resolveComponent("i18n"),k=resolveComponent("skeleton-line"),S=resolveComponent("ulink"),N=resolveComponent("uimage"),L=resolveComponent("swiper"),P=resolveComponent("swiper-slide"),O=resolveComponent("udate");t(`<div${ssrRenderAttrs(mergeProps({class:"twitter"},r))} data-v-c8c1ccd2>`),t(ssrRenderComponent(v,{data:e.completedTweets.length,loading:e.fetching},{placeholder:withCtx((V,z,U,W)=>{if(z)z(`<div class="twitter-empty" data-v-c8c1ccd2${W}>`),z(ssrRenderComponent(x,{class:"empty-content"},{default:withCtx((Z,re,oe,se)=>{if(re)re(ssrRenderComponent(E,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,oe,se));else return[createVNode(E,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,8,["k"])]}),_:1},U,W)),z("</div>");else return[createVNode("div",{class:"twitter-empty",key:"empty"},[createVNode(x,{class:"empty-content"},{default:withCtx(()=>[createVNode(E,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,8,["k"])]),_:1})])]}),loading:withCtx((V,z,U,W)=>{if(z)z(`<div class="twitter-skeleton" data-v-c8c1ccd2${W}><div class="left" data-v-c8c1ccd2${W}>`),z(ssrRenderComponent(k,null,null,U,W)),z(`</div><div class="right" data-v-c8c1ccd2${W}>`),z(ssrRenderComponent(k,null,null,U,W)),z("</div></div>");else return[createVNode("div",{class:"twitter-skeleton",key:"skeleton"},[createVNode("div",{class:"left"},[createVNode(k)]),createVNode("div",{class:"right"},[createVNode(k)])])]}),default:withCtx((V,z,U,W)=>{if(z)z(`<div class="twitter-content" data-v-c8c1ccd2${W}>`),e.userinfo?(z(`<div class="userinfo"${ssrRenderAttr("title",e.userinfo.username)} data-v-c8c1ccd2${W}>`),z(ssrRenderComponent(S,{class:"logo-link",href:e.VALUABLE_LINKS.TWITTER,onMousedown:Z=>e.handleGtagEvent("twitter_homepage")},{default:withCtx((Z,re,oe,se)=>{if(re)re(ssrRenderComponent(N,{class:"avatar",proxy:"",src:e.userinfo.profile_image_url},null,oe,se)),re(`<span class="logo" data-v-c8c1ccd2${se}><i class="iconfont icon-twitter" data-v-c8c1ccd2${se}></i></span>`);else return[createVNode(N,{class:"avatar",proxy:"",src:e.userinfo.profile_image_url},null,8,["src"]),createVNode("span",{class:"logo"},[createVNode("i",{class:"iconfont icon-twitter"})])]}),_:1},U,W)),z(`<div class="counts" data-v-c8c1ccd2${W}><div class="item count" data-v-c8c1ccd2${W}>${ssrInterpolate(e.padStart(e.numberSplit(e.userinfo.public_metrics.tweet_count),3,"0"))}</div><div class="item text" data-v-c8c1ccd2${W}>Tweets</div></div></div>`)):z("<!---->"),e.completedTweets.length?z(ssrRenderComponent(L,{class:"tweets",direction:"vertical",height:66,mousewheel:!0,"allow-touch-move":!1,"slides-per-view":1,"prevent-clicks":!1,autoplay:{delay:3500,disableOnInteraction:!1},onTransitionStart:e.handleSwiperTransitionStart,onSwiper:e.handleSwiperReady},{default:withCtx((Z,re,oe,se)=>{if(re)re("<!--[-->"),ssrRenderList(e.completedTweets,(ce,me)=>{re(ssrRenderComponent(P,{class:"tweet-item",key:me},{default:withCtx((we,ae,Ce,Fe)=>{var it,_e;if(ae)ae(`<div class="content"${ssrRenderAttr("title",ce.tweet.text)} data-v-c8c1ccd2${Fe}>`),(it=ce.tweet.referenced_tweets)!=null&&it.length?(ae(`<div class="reference"${ssrRenderAttr("title",ce.tweet.referenced_tweets[0].type)} data-v-c8c1ccd2${Fe}>`),["quoted","retweeted"].includes(ce.tweet.referenced_tweets[0].type)?ae(`<i class="iconfont icon-retweet" data-v-c8c1ccd2${Fe}></i>`):ae(`<i class="iconfont icon-follow-up" data-v-c8c1ccd2${Fe}></i>`),ae("</div>")):ae("<!---->"),ce.html?ae(`<div class="${ssrRenderClass([{"has-media":ce.medias.length},"main"])}" data-v-c8c1ccd2${Fe}>${ce.html}</div>`):ae("<!---->"),ce.medias.length?ae(ssrRenderComponent(S,{class:["end-link",{empty:!ce.html}],href:ce.url,onMousedown:ke=>e.handleGtagEvent("twitter_image_link")},{default:withCtx((ke,ze,nt,mt)=>{if(ze)ce.medias.find(qt=>qt.type==="video")?ze(`<i class="iconfont media icon-video" data-v-c8c1ccd2${mt}></i>`):ze(`<i class="iconfont media icon-image" data-v-c8c1ccd2${mt}></i>`),ze(`<span class="text" data-v-c8c1ccd2${mt}>[${ssrInterpolate(ce.medias.length)}]</span><i class="iconfont window icon-new-window-s" data-v-c8c1ccd2${mt}></i>`);else return[ce.medias.find(qt=>qt.type==="video")?(openBlock(),createBlock("i",{key:0,class:"iconfont media icon-video"})):(openBlock(),createBlock("i",{key:1,class:"iconfont media icon-image"})),createVNode("span",{class:"text"},"["+toDisplayString(ce.medias.length)+"]",1),createVNode("i",{class:"iconfont window icon-new-window-s"})]}),_:2},Ce,Fe)):ae("<!---->"),ae(`</div><div class="meta" data-v-c8c1ccd2${Fe}>`),ae(ssrRenderComponent(S,{class:"item link",title:"To Tweet",href:ce.url,onMousedown:ke=>e.handleGtagEvent("twitter_detail_link")},{default:withCtx((ke,ze,nt,mt)=>{if(ze)ze(`<i class="iconfont twitter icon-twitter" data-v-c8c1ccd2${mt}></i><span data-v-c8c1ccd2${mt}>Tweet</span><i class="iconfont window icon-new-window-s" data-v-c8c1ccd2${mt}></i>`);else return[createVNode("i",{class:"iconfont twitter icon-twitter"}),createVNode("span",null,"Tweet"),createVNode("i",{class:"iconfont window icon-new-window-s"})]}),_:2},Ce,Fe)),ae(`<span class="item reply" data-v-c8c1ccd2${Fe}><i class="iconfont icon-comment" data-v-c8c1ccd2${Fe}></i><span data-v-c8c1ccd2${Fe}>${ssrInterpolate(ce.tweet.public_metrics.reply_count)}</span></span><span class="item like" data-v-c8c1ccd2${Fe}><i class="iconfont icon-heart" data-v-c8c1ccd2${Fe}></i><span data-v-c8c1ccd2${Fe}>${ssrInterpolate(ce.tweet.public_metrics.like_count)}</span></span><span class="item date" data-v-c8c1ccd2${Fe}><i class="iconfont icon-clock" data-v-c8c1ccd2${Fe}></i>`),ae(ssrRenderComponent(O,{to:"ago",date:ce.tweet.created_at},null,Ce,Fe)),ae("</span></div>");else return[createVNode("div",{class:"content",title:ce.tweet.text},[(_e=ce.tweet.referenced_tweets)!=null&&_e.length?(openBlock(),createBlock("div",{key:0,class:"reference",title:ce.tweet.referenced_tweets[0].type},[["quoted","retweeted"].includes(ce.tweet.referenced_tweets[0].type)?(openBlock(),createBlock("i",{key:0,class:"iconfont icon-retweet"})):(openBlock(),createBlock("i",{key:1,class:"iconfont icon-follow-up"}))],8,["title"])):createCommentVNode("",!0),ce.html?(openBlock(),createBlock("div",{key:1,class:["main",{"has-media":ce.medias.length}],innerHTML:ce.html},null,10,["innerHTML"])):createCommentVNode("",!0),ce.medias.length?(openBlock(),createBlock(S,{key:2,class:["end-link",{empty:!ce.html}],href:ce.url,onMousedown:ke=>e.handleGtagEvent("twitter_image_link")},{default:withCtx(()=>[ce.medias.find(ke=>ke.type==="video")?(openBlock(),createBlock("i",{key:0,class:"iconfont media icon-video"})):(openBlock(),createBlock("i",{key:1,class:"iconfont media icon-image"})),createVNode("span",{class:"text"},"["+toDisplayString(ce.medias.length)+"]",1),createVNode("i",{class:"iconfont window icon-new-window-s"})]),_:2},1032,["class","href","onMousedown"])):createCommentVNode("",!0)],8,["title"]),createVNode("div",{class:"meta"},[createVNode(S,{class:"item link",title:"To Tweet",href:ce.url,onMousedown:ke=>e.handleGtagEvent("twitter_detail_link")},{default:withCtx(()=>[createVNode("i",{class:"iconfont twitter icon-twitter"}),createVNode("span",null,"Tweet"),createVNode("i",{class:"iconfont window icon-new-window-s"})]),_:2},1032,["href","onMousedown"]),createVNode("span",{class:"item reply"},[createVNode("i",{class:"iconfont icon-comment"}),createVNode("span",null,toDisplayString(ce.tweet.public_metrics.reply_count),1)]),createVNode("span",{class:"item like"},[createVNode("i",{class:"iconfont icon-heart"}),createVNode("span",null,toDisplayString(ce.tweet.public_metrics.like_count),1)]),createVNode("span",{class:"item date"},[createVNode("i",{class:"iconfont icon-clock"}),createVNode(O,{to:"ago",date:ce.tweet.created_at},null,8,["date"])])])]}),_:2},oe,se))}),re("<!--]-->");else return[(openBlock(!0),createBlock(Fragment,null,renderList(e.completedTweets,(ce,me)=>(openBlock(),createBlock(P,{class:"tweet-item",key:me},{default:withCtx(()=>{var we;return[createVNode("div",{class:"content",title:ce.tweet.text},[(we=ce.tweet.referenced_tweets)!=null&&we.length?(openBlock(),createBlock("div",{key:0,class:"reference",title:ce.tweet.referenced_tweets[0].type},[["quoted","retweeted"].includes(ce.tweet.referenced_tweets[0].type)?(openBlock(),createBlock("i",{key:0,class:"iconfont icon-retweet"})):(openBlock(),createBlock("i",{key:1,class:"iconfont icon-follow-up"}))],8,["title"])):createCommentVNode("",!0),ce.html?(openBlock(),createBlock("div",{key:1,class:["main",{"has-media":ce.medias.length}],innerHTML:ce.html},null,10,["innerHTML"])):createCommentVNode("",!0),ce.medias.length?(openBlock(),createBlock(S,{key:2,class:["end-link",{empty:!ce.html}],href:ce.url,onMousedown:ae=>e.handleGtagEvent("twitter_image_link")},{default:withCtx(()=>[ce.medias.find(ae=>ae.type==="video")?(openBlock(),createBlock("i",{key:0,class:"iconfont media icon-video"})):(openBlock(),createBlock("i",{key:1,class:"iconfont media icon-image"})),createVNode("span",{class:"text"},"["+toDisplayString(ce.medias.length)+"]",1),createVNode("i",{class:"iconfont window icon-new-window-s"})]),_:2},1032,["class","href","onMousedown"])):createCommentVNode("",!0)],8,["title"]),createVNode("div",{class:"meta"},[createVNode(S,{class:"item link",title:"To Tweet",href:ce.url,onMousedown:ae=>e.handleGtagEvent("twitter_detail_link")},{default:withCtx(()=>[createVNode("i",{class:"iconfont twitter icon-twitter"}),createVNode("span",null,"Tweet"),createVNode("i",{class:"iconfont window icon-new-window-s"})]),_:2},1032,["href","onMousedown"]),createVNode("span",{class:"item reply"},[createVNode("i",{class:"iconfont icon-comment"}),createVNode("span",null,toDisplayString(ce.tweet.public_metrics.reply_count),1)]),createVNode("span",{class:"item like"},[createVNode("i",{class:"iconfont icon-heart"}),createVNode("span",null,toDisplayString(ce.tweet.public_metrics.like_count),1)]),createVNode("span",{class:"item date"},[createVNode("i",{class:"iconfont icon-clock"}),createVNode(O,{to:"ago",date:ce.tweet.created_at},null,8,["date"])])])]}),_:2},1024))),128))]}),_:1},U,W)):z("<!---->"),z(`<div class="navigation" data-v-c8c1ccd2${W}><button class="button prev"${includeBooleanAttr(e.activeIndex===0)?" disabled":""} data-v-c8c1ccd2${W}><i class="iconfont icon-totop" data-v-c8c1ccd2${W}></i></button><button class="button next"${includeBooleanAttr(e.activeIndex===e.completedTweets.length-1)?" disabled":""} data-v-c8c1ccd2${W}><i class="iconfont icon-tobottom" data-v-c8c1ccd2${W}></i></button></div></div>`);else return[createVNode("div",{class:"twitter-content",key:"content"},[e.userinfo?(openBlock(),createBlock("div",{key:0,class:"userinfo",title:e.userinfo.username},[createVNode(S,{class:"logo-link",href:e.VALUABLE_LINKS.TWITTER,onMousedown:Z=>e.handleGtagEvent("twitter_homepage")},{default:withCtx(()=>[createVNode(N,{class:"avatar",proxy:"",src:e.userinfo.profile_image_url},null,8,["src"]),createVNode("span",{class:"logo"},[createVNode("i",{class:"iconfont icon-twitter"})])]),_:1},8,["href","onMousedown"]),createVNode("div",{class:"counts"},[createVNode("div",{class:"item count"},toDisplayString(e.padStart(e.numberSplit(e.userinfo.public_metrics.tweet_count),3,"0")),1),createVNode("div",{class:"item text"},"Tweets")])],8,["title"])):createCommentVNode("",!0),e.completedTweets.length?(openBlock(),createBlock(L,{key:1,class:"tweets",direction:"vertical",height:66,mousewheel:!0,"allow-touch-move":!1,"slides-per-view":1,"prevent-clicks":!1,autoplay:{delay:3500,disableOnInteraction:!1},onTransitionStart:e.handleSwiperTransitionStart,onSwiper:e.handleSwiperReady},{default:withCtx(()=>[(openBlock(!0),createBlock(Fragment,null,renderList(e.completedTweets,(Z,re)=>(openBlock(),createBlock(P,{class:"tweet-item",key:re},{default:withCtx(()=>{var oe;return[createVNode("div",{class:"content",title:Z.tweet.text},[(oe=Z.tweet.referenced_tweets)!=null&&oe.length?(openBlock(),createBlock("div",{key:0,class:"reference",title:Z.tweet.referenced_tweets[0].type},[["quoted","retweeted"].includes(Z.tweet.referenced_tweets[0].type)?(openBlock(),createBlock("i",{key:0,class:"iconfont icon-retweet"})):(openBlock(),createBlock("i",{key:1,class:"iconfont icon-follow-up"}))],8,["title"])):createCommentVNode("",!0),Z.html?(openBlock(),createBlock("div",{key:1,class:["main",{"has-media":Z.medias.length}],innerHTML:Z.html},null,10,["innerHTML"])):createCommentVNode("",!0),Z.medias.length?(openBlock(),createBlock(S,{key:2,class:["end-link",{empty:!Z.html}],href:Z.url,onMousedown:se=>e.handleGtagEvent("twitter_image_link")},{default:withCtx(()=>[Z.medias.find(se=>se.type==="video")?(openBlock(),createBlock("i",{key:0,class:"iconfont media icon-video"})):(openBlock(),createBlock("i",{key:1,class:"iconfont media icon-image"})),createVNode("span",{class:"text"},"["+toDisplayString(Z.medias.length)+"]",1),createVNode("i",{class:"iconfont window icon-new-window-s"})]),_:2},1032,["class","href","onMousedown"])):createCommentVNode("",!0)],8,["title"]),createVNode("div",{class:"meta"},[createVNode(S,{class:"item link",title:"To Tweet",href:Z.url,onMousedown:se=>e.handleGtagEvent("twitter_detail_link")},{default:withCtx(()=>[createVNode("i",{class:"iconfont twitter icon-twitter"}),createVNode("span",null,"Tweet"),createVNode("i",{class:"iconfont window icon-new-window-s"})]),_:2},1032,["href","onMousedown"]),createVNode("span",{class:"item reply"},[createVNode("i",{class:"iconfont icon-comment"}),createVNode("span",null,toDisplayString(Z.tweet.public_metrics.reply_count),1)]),createVNode("span",{class:"item like"},[createVNode("i",{class:"iconfont icon-heart"}),createVNode("span",null,toDisplayString(Z.tweet.public_metrics.like_count),1)]),createVNode("span",{class:"item date"},[createVNode("i",{class:"iconfont icon-clock"}),createVNode(O,{to:"ago",date:Z.tweet.created_at},null,8,["date"])])])]}),_:2},1024))),128))]),_:1},8,["onTransitionStart","onSwiper"])):createCommentVNode("",!0),createVNode("div",{class:"navigation"},[createVNode("button",{class:"button prev",disabled:e.activeIndex===0,onClick:e.prevSlide},[createVNode("i",{class:"iconfont icon-totop"})],8,["disabled","onClick"]),createVNode("button",{class:"button next",disabled:e.activeIndex===e.completedTweets.length-1,onClick:e.nextSlide},[createVNode("i",{class:"iconfont icon-tobottom"})],8,["disabled","onClick"])])])]}),_:1},n)),t("</div>")}const _sfc_setup$1w=_sfc_main$1w.setup;_sfc_main$1w.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/index/twitter.vue"),_sfc_setup$1w?_sfc_setup$1w(e,t):void 0};const Twitter=_export_sfc(_sfc_main$1w,[["ssrRender",_sfc_ssrRender$1w],["__scopeId","data-v-c8c1ccd2"]]),_sfc_main$1v=defineComponent({name:"IndexPage",components:{Carrousel,Twitter,ArticleList},setup(){const{head:e,i18n:t}=useEnhancer(),{articleList:n,appOption:r,twitterUserinfo:c,twitterTweets:d}=useStores();e(()=>{var o,v;return{title:`${META.title} - ${t.t(LanguageKey.APP_SLOGAN)}`,description:(o=r.data)==null?void 0:o.description,keywords:(v=r.data)==null?void 0:v.keywords.join(",")}});const g=async()=>{const o=n.list.pagination.current_page+1;await n.fetchList({page:o})};return useUniversalFetch(()=>Promise.all([n.fetchList(),c.fetch().catch(()=>{}),d.fetch().catch(()=>{})])),{twitterUserinfo:c,twitterTweets:d,articleListStore:n,loadmoreArticles:g}}}),index_vue_vue_type_style_index_0_scoped_1ea43f81_lang="";function _sfc_ssrRender$1v(e,t,n,r,c,d,g,o){var k,S;const v=resolveComponent("carrousel"),x=resolveComponent("twitter"),E=resolveComponent("article-list");t(`<div${ssrRenderAttrs(mergeProps({class:"index-page"},r))} data-v-1ea43f81>`),t(ssrRenderComponent(v,{class:"carrousel",articles:e.articleListStore.list.data,fetching:e.articleListStore.list.fetching},null,n)),t(ssrRenderComponent(x,{class:"twitter",userinfo:(k=e.twitterUserinfo.data)!=null?k:void 0,tweets:(S=e.twitterTweets.data)!=null?S:void 0,fetching:e.twitterUserinfo.fetching||e.twitterTweets.fetching||e.articleListStore.list.fetching},null,n)),t(ssrRenderComponent(E,{mammon:!1,fetching:e.articleListStore.list.fetching,articles:e.articleListStore.list.data,pagination:e.articleListStore.list.pagination,onLoadmore:e.loadmoreArticles},null,n)),t("</div>")}const _sfc_setup$1v=_sfc_main$1v.setup;_sfc_main$1v.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/index/index.vue"),_sfc_setup$1v?_sfc_setup$1v(e,t):void 0};const IndexFlowPage=_export_sfc(_sfc_main$1v,[["ssrRender",_sfc_ssrRender$1v],["__scopeId","data-v-1ea43f81"]]),_sfc_main$1u=defineComponent({name:"FlowArticleListHeader",props:{backgroundColor:{type:String,default:""},backgroundImage:{type:String,default:""},icon:{type:String,required:!0}},setup(e){const t=computed(()=>e.backgroundImage||getTargetCDNURL("/images/thumbnail/carrousel.jpg"));return{LanguageKey,backgroundImageUrl:t}}}),header_vue_vue_type_style_index_0_scoped_2cee1445_lang="";function _sfc_ssrRender$1u(e,t,n,r,c,d,g,o){t(`<div${ssrRenderAttrs(mergeProps({class:"header"},r))} data-v-2cee1445><div class="background" style="${ssrRenderStyle({backgroundColor:e.backgroundColor,backgroundImage:`url(${e.backgroundImageUrl})`})}" data-v-2cee1445></div><div class="content" data-v-2cee1445><div class="logo" data-v-2cee1445><i class="${ssrRenderClass([e.icon,"iconfont"])}" data-v-2cee1445></i></div><div class="title" data-v-2cee1445><div class="text" data-v-2cee1445>`),ssrRenderSlot(e.$slots,"default",{},null,t,n),t("</div></div></div></div>")}const _sfc_setup$1u=_sfc_main$1u.setup;_sfc_main$1u.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/flow/desktop/header.vue"),_sfc_setup$1u?_sfc_setup$1u(e,t):void 0};const ArticleListHeader=_export_sfc(_sfc_main$1u,[["ssrRender",_sfc_ssrRender$1u],["__scopeId","data-v-2cee1445"]]),_sfc_main$1t=defineComponent({name:"CategoryPage",components:{ArticleListHeader,ArticleList},props:{categorySlug:{type:String,required:!0}},setup(e){const{i18n:t,head:n,isZhLang:r}=useEnhancer(),c=useArticleListStore(),d=useCategoryStore(),g=computed(()=>d.data.find(k=>k.slug===e.categorySlug)),o=computed(()=>{var k;return getExtendValue(((k=g.value)==null?void 0:k.extends)||[],"icon")||"icon-category"}),v=computed(()=>{var k;return getExtendValue(((k=g.value)==null?void 0:k.extends)||[],"background")}),x=computed(()=>{var k;return getExtendValue(((k=g.value)==null?void 0:k.extends)||[],"bgcolor")}),E=async()=>{await c.fetchList({category_slug:e.categorySlug,page:c.list.pagination.current_page+1}),scrollToNextScreen()};return n(()=>{var P;const k=firstUpperCase(e.categorySlug),S=t.t(e.categorySlug),N=r.value?[S,k]:[k],L=((P=g.value)==null?void 0:P.description)||N.join(",");return{pageTitle:N.join(" | "),description:L,ogType:"blog"}}),onBeforeMount(()=>{watch(()=>e.categorySlug,k=>c.fetchList({category_slug:k}),{flush:"post"})}),useUniversalFetch(()=>c.fetchList({category_slug:e.categorySlug})),{articleListStore:c,currentCategory:g,currentCategoryIcon:o,currentCategoryImage:v,currentCategoryColor:x,loadmoreArticles:E,firstUpperCase}}}),category_vue_vue_type_style_index_0_scoped_deebc2eb_lang="";function _sfc_ssrRender$1t(e,t,n,r,c,d,g,o){const v=resolveComponent("article-list-header"),x=resolveComponent("i18n"),E=resolveComponent("divider"),k=resolveComponent("article-list");t(`<div${ssrRenderAttrs(mergeProps({class:"category-flow-page"},r))} data-v-deebc2eb>`),t(ssrRenderComponent(v,{"background-color":e.currentCategoryColor,"background-image":e.currentCategoryImage,icon:e.currentCategoryIcon},{default:withCtx((S,N,L,P)=>{if(N)e.currentCategory?N(ssrRenderComponent(x,null,{zh:withCtx((O,V,z,U)=>{if(V)V(`<span data-v-deebc2eb${U}>${ssrInterpolate(e.currentCategory.name)}</span>`),V(ssrRenderComponent(E,{class:"divider",type:"vertical"},null,z,U)),V(`<span data-v-deebc2eb${U}>${ssrInterpolate(e.currentCategory.description||"...")}</span>`);else return[createVNode("span",null,toDisplayString(e.currentCategory.name),1),createVNode(E,{class:"divider",type:"vertical"}),createVNode("span",null,toDisplayString(e.currentCategory.description||"..."),1)]}),en:withCtx((O,V,z,U)=>{if(V)V(`<span data-v-deebc2eb${U}>Category</span>`),V(ssrRenderComponent(E,{class:"divider",type:"vertical"},null,z,U)),V(`<span data-v-deebc2eb${U}>${ssrInterpolate(e.firstUpperCase(e.currentCategory.slug))}</span>`);else return[createVNode("span",null,"Category"),createVNode(E,{class:"divider",type:"vertical"}),createVNode("span",null,toDisplayString(e.firstUpperCase(e.currentCategory.slug)),1)]}),_:1},L,P)):N("<!---->");else return[e.currentCategory?(openBlock(),createBlock(x,{key:0},{zh:withCtx(()=>[createVNode("span",null,toDisplayString(e.currentCategory.name),1),createVNode(E,{class:"divider",type:"vertical"}),createVNode("span",null,toDisplayString(e.currentCategory.description||"..."),1)]),en:withCtx(()=>[createVNode("span",null,"Category"),createVNode(E,{class:"divider",type:"vertical"}),createVNode("span",null,toDisplayString(e.firstUpperCase(e.currentCategory.slug)),1)]),_:1})):createCommentVNode("",!0)]}),_:1},n)),t(ssrRenderComponent(k,{fetching:e.articleListStore.list.fetching,articles:e.articleListStore.list.data,pagination:e.articleListStore.list.pagination,onLoadmore:e.loadmoreArticles},null,n)),t("</div>")}const _sfc_setup$1t=_sfc_main$1t.setup;_sfc_main$1t.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/category.vue"),_sfc_setup$1t?_sfc_setup$1t(e,t):void 0};const CategoryFlowPage=_export_sfc(_sfc_main$1t,[["ssrRender",_sfc_ssrRender$1t],["__scopeId","data-v-deebc2eb"]]),_sfc_main$1s=defineComponent({name:"TagPage",components:{ArticleListHeader,ArticleList},props:{tagSlug:{type:String,required:!0}},setup(e){const{head:t,isZhLang:n}=useEnhancer(),r=useTagStore(),c=useArticleListStore(),d=computed(()=>r.data.find(E=>E.slug===e.tagSlug)),g=computed(()=>{var E;return getExtendValue(((E=d.value)==null?void 0:E.extends)||[],"icon")||"icon-tag"}),o=computed(()=>{var E;return getExtendValue(((E=d.value)==null?void 0:E.extends)||[],"background")}),v=computed(()=>{var E;return getExtendValue(((E=d.value)==null?void 0:E.extends)||[],"bgcolor")}),x=async()=>{await c.fetchList({tag_slug:e.tagSlug,page:c.list.pagination.current_page+1}),scrollToNextScreen()};return t(()=>{var L,P;const E=firstUpperCase(e.tagSlug),k=(L=d.value)==null?void 0:L.name,S=n.value?[k,E]:[E,"Tag"],N=((P=d.value)==null?void 0:P.description)||S.join(",");return{pageTitle:S.join(" | "),description:N,ogType:"blog"}}),onBeforeMount(()=>{watch(()=>e.tagSlug,E=>c.fetchList({tag_slug:E}),{flush:"post"})}),useUniversalFetch(()=>c.fetchList({tag_slug:e.tagSlug})),{articleListStore:c,tagEnName,currentTag:d,currentTagIcon:g,currentTagImage:o,currentTagColor:v,loadmoreArticles:x}}}),tag_vue_vue_type_style_index_0_scoped_0e50091a_lang="";function _sfc_ssrRender$1s(e,t,n,r,c,d,g,o){const v=resolveComponent("article-list-header"),x=resolveComponent("i18n"),E=resolveComponent("divider"),k=resolveComponent("article-list");t(`<div${ssrRenderAttrs(mergeProps({class:"tag-flow-page"},r))} data-v-0e50091a>`),t(ssrRenderComponent(v,{"background-color":e.currentTagColor,"background-image":e.currentTagImage,icon:e.currentTagIcon},{default:withCtx((S,N,L,P)=>{if(N)e.currentTag?(N(`<span class="header" data-v-0e50091a${P}>`),N(ssrRenderComponent(x,null,{zh:withCtx((O,V,z,U)=>{if(V)V(`<span data-v-0e50091a${U}>#${ssrInterpolate(e.currentTag.name)}</span>`),V(ssrRenderComponent(E,{class:"divider",type:"vertical"},null,z,U)),V(`<span data-v-0e50091a${U}>${ssrInterpolate(e.currentTag.description||"...")}</span>`);else return[createVNode("span",null,"#"+toDisplayString(e.currentTag.name),1),createVNode(E,{class:"divider",type:"vertical"}),createVNode("span",null,toDisplayString(e.currentTag.description||"..."),1)]}),en:withCtx((O,V,z,U)=>{if(V)V(`<span data-v-0e50091a${U}>Tag</span>`),V(ssrRenderComponent(E,{class:"divider",type:"vertical"},null,z,U)),V(`<span data-v-0e50091a${U}>#${ssrInterpolate(e.tagEnName(e.currentTag))}</span>`);else return[createVNode("span",null,"Tag"),createVNode(E,{class:"divider",type:"vertical"}),createVNode("span",null,"#"+toDisplayString(e.tagEnName(e.currentTag)),1)]}),_:1},L,P)),N("</span>")):N("<!---->");else return[e.currentTag?(openBlock(),createBlock("span",{key:0,class:"header"},[createVNode(x,null,{zh:withCtx(()=>[createVNode("span",null,"#"+toDisplayString(e.currentTag.name),1),createVNode(E,{class:"divider",type:"vertical"}),createVNode("span",null,toDisplayString(e.currentTag.description||"..."),1)]),en:withCtx(()=>[createVNode("span",null,"Tag"),createVNode(E,{class:"divider",type:"vertical"}),createVNode("span",null,"#"+toDisplayString(e.tagEnName(e.currentTag)),1)]),_:1})])):createCommentVNode("",!0)]}),_:1},n)),t(ssrRenderComponent(k,{fetching:e.articleListStore.list.fetching,articles:e.articleListStore.list.data,pagination:e.articleListStore.list.pagination,onLoadmore:e.loadmoreArticles},null,n)),t("</div>")}const _sfc_setup$1s=_sfc_main$1s.setup;_sfc_main$1s.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/tag.vue"),_sfc_setup$1s?_sfc_setup$1s(e,t):void 0};const TagFlowPage=_export_sfc(_sfc_main$1s,[["ssrRender",_sfc_ssrRender$1s],["__scopeId","data-v-0e50091a"]]),_sfc_main$1r=defineComponent({name:"DatePage",components:{ArticleListHeader,ArticleList},props:{date:{type:String,required:!0}},setup(e){const{head:t}=useEnhancer();t(()=>({pageTitle:`${e.date} | Date`,ogType:"blog"}));const n=useArticleListStore(),r=async()=>{await n.fetchList({date:e.date,page:n.list.pagination.current_page+1}),scrollToNextScreen()};return onBeforeMount(()=>{watch(()=>e.date,c=>n.fetchList({date:c}),{flush:"post"})}),useUniversalFetch(()=>n.fetchList({date:e.date})),{articleListStore:n,loadmoreArticles:r}}});function _sfc_ssrRender$1r(e,t,n,r,c,d,g,o){const v=resolveComponent("article-list-header"),x=resolveComponent("i18n"),E=resolveComponent("article-list");t(`<div${ssrRenderAttrs(mergeProps({class:"date-flow-page"},r))}>`),t(ssrRenderComponent(v,{icon:"icon-clock"},{default:withCtx((k,S,N,L)=>{if(S)S(ssrRenderComponent(x,{zh:`\u53D1\u5E03\u4E8E ${e.date} \u7684\u6240\u6709\u6587\u7AE0`,en:`Articles published at ${e.date}`},null,N,L));else return[createVNode(x,{zh:`\u53D1\u5E03\u4E8E ${e.date} \u7684\u6240\u6709\u6587\u7AE0`,en:`Articles published at ${e.date}`},null,8,["zh","en"])]}),_:1},n)),t(ssrRenderComponent(E,{fetching:e.articleListStore.list.fetching,articles:e.articleListStore.list.data,pagination:e.articleListStore.list.pagination,onLoadmore:e.loadmoreArticles},null,n)),t("</div>")}const _sfc_setup$1r=_sfc_main$1r.setup;_sfc_main$1r.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/date.vue"),_sfc_setup$1r?_sfc_setup$1r(e,t):void 0};const DateFlowPage=_export_sfc(_sfc_main$1r,[["ssrRender",_sfc_ssrRender$1r]]),_sfc_main$1q=defineComponent({name:"SearchPage",components:{ArticleListHeader,ArticleList},props:{keyword:{type:String,required:!0}},setup(e){const{head:t}=useEnhancer();t(()=>({pageTitle:`${e.keyword} | Search`,ogType:"blog"}));const n=useArticleListStore(),r=async()=>{await n.fetchList({keyword:e.keyword,page:n.list.pagination.current_page+1}),scrollToNextScreen()};return onBeforeMount(()=>{watch(()=>e.keyword,c=>n.fetchList({keyword:c}),{flush:"post"})}),useUniversalFetch(()=>n.fetchList({keyword:e.keyword})),{articleListStore:n,loadmoreArticles:r}}});function _sfc_ssrRender$1q(e,t,n,r,c,d,g,o){const v=resolveComponent("article-list-header"),x=resolveComponent("i18n"),E=resolveComponent("article-list");t(`<div${ssrRenderAttrs(mergeProps({class:"search-flow-page"},r))}>`),t(ssrRenderComponent(v,{icon:"icon-search"},{default:withCtx((k,S,N,L)=>{if(S)S(ssrRenderComponent(x,{zh:`\u548C \u201C${e.keyword}\u201D \u6709\u5173\u7684\u6240\u6709\u6587\u7AE0`,en:`Keyword "${e.keyword}"'s result`},null,N,L));else return[createVNode(x,{zh:`\u548C \u201C${e.keyword}\u201D \u6709\u5173\u7684\u6240\u6709\u6587\u7AE0`,en:`Keyword "${e.keyword}"'s result`},null,8,["zh","en"])]}),_:1},n)),t(ssrRenderComponent(E,{fetching:e.articleListStore.list.fetching,articles:e.articleListStore.list.data,pagination:e.articleListStore.list.pagination,onLoadmore:e.loadmoreArticles},null,n)),t("</div>")}const _sfc_setup$1q=_sfc_main$1q.setup;_sfc_main$1q.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/search.vue"),_sfc_setup$1q?_sfc_setup$1q(e,t):void 0};const SearchFlowPage=_export_sfc(_sfc_main$1q,[["ssrRender",_sfc_ssrRender$1q]]),cloneDate=e=>new Date(e.getTime()),dateToHuman=e=>{const t=e.getDay();return{day:e.getDate(),week:t===0?7:t,month:e.getMonth()+1,year:e.getFullYear()}},isSameHumanDay=(e,t)=>{const n=e.day===t.day,r=e.month===t.month,c=e.year===t.year;return n&&r&&c},humanToDate=e=>{const t=new Date;return t.setDate(e.day),t.setFullYear(e.year),t.setMonth(e.month-1),t},humanDateToYMD=({year:e,month:t,day:n},r="-")=>{const c=t?r+String(t).padStart(2,"0"):"",d=n?r+String(n).padStart(2,"0"):"";return`${e}${c}${d}`},dateToYMD=(e,t)=>{const n=typeof e=="string"?new Date(e):e;return humanDateToYMD(dateToHuman(n),t)},useArchiveStore=defineFetchStore({id:"archive",initData:null,onlyOnce:!0,async fetcher(){return(await nodepress$1.get("/archive")).result},getters:{hydrated:e=>{if(!e.data)return null;const{articles:t,tags:n,categories:r}=e.data,c=new Map(n.map(g=>[g._id,{...g,articles_count:0}])),d=new Map(r.map(g=>[g._id,{...g,articles_count:0}]));return t.forEach(g=>{g.tag.forEach(o=>{c.has(o)&&c.get(o).articles_count++}),g.category.forEach(o=>{d.has(o)&&d.get(o).articles_count++})}),{tags:Array.from(c.values()),categories:Array.from(d.values())}},tree:e=>{var n;const t=[];return(n=e.data)==null||n.articles.map(r=>({...r,createAt:dateToHuman(new Date(r.create_at))})).sort(({create_at:r},{create_at:c})=>Date.parse(c)-Date.parse(r)).forEach(r=>{const{createAt:c}=r;let g=t.find(x=>x.year===c.year);g||(g={year:c.year,months:[]},t.push(g));let v=g.months.find(x=>x.month===c.month);v||(v={month:c.month,articles:[]},g.months.push(v)),v.articles.push(r)}),t}}}),_sfc_main$1p=defineComponent({name:"PageBanner",props:{image:{type:String,required:!0},position:{type:Number,default:20},blur:{type:Number,default:0},isMobile:{type:Boolean,default:!1}},setup(e){const{isDarkTheme:t}=useEnhancer();return{isDarkTheme:t,imageURL:getTargetCDNURL(e.image)}}}),banner_vue_vue_type_style_index_0_scoped_4f25f2fb_lang="";function _sfc_ssrRender$1p(e,t,n,r,c,d,g,o){t(`<div${ssrRenderAttrs(mergeProps({class:["banner",{mobile:e.isMobile}]},r))} data-v-4f25f2fb><div class="${ssrRenderClass([{dark:e.isDarkTheme},"background"])}" style="${ssrRenderStyle({backgroundImage:`url(${e.imageURL})`,backgroundPositionY:`${e.position}%`})}" data-v-4f25f2fb></div><div class="${ssrRenderClass([{blur:Boolean(e.blur)},"content"])}" style="${ssrRenderStyle({"--blur":`${e.blur}px`})}" data-v-4f25f2fb><h2 class="title" data-v-4f25f2fb>`),ssrRenderSlot(e.$slots,"title",{},null,t,n),t('</h2><div class="description" data-v-4f25f2fb>'),ssrRenderSlot(e.$slots,"description",{},null,t,n),t("</div></div></div>")}const _sfc_setup$1p=_sfc_main$1p.setup;_sfc_main$1p.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/common/banner.vue"),_sfc_setup$1p?_sfc_setup$1p(e,t):void 0};const PageBanner=_export_sfc(_sfc_main$1p,[["ssrRender",_sfc_ssrRender$1p],["__scopeId","data-v-4f25f2fb"]]),ms=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthNameI18ns=ms.map((e,t)=>({[Language.English]:e,[Language.Chinese]:t===9?"\u5341\u6708":t==10?"\u5341\u4E00":t==11?"\u5341\u4E8C":numberToChinese(t+1)+"\u6708"})),getMonthNameI18n=e=>monthNameI18ns[e-1],_sfc_main$1o=defineComponent({name:"ArchiveTree",props:{tree:{type:Array,required:!0}},setup(){const{isZhLang:e}=useEnhancer();return{isZhLang:e,numberToChinese,getMonthNameI18n}}}),tree_vue_vue_type_style_index_0_scoped_0042f18a_lang="";function _sfc_ssrRender$1o(e,t,n,r,c,d,g,o){t(`<div${ssrRenderAttrs(mergeProps({class:"archive-tree"},r))} data-v-0042f18a><!--[-->`),ssrRenderList(e.tree,v=>{t('<ul class="month-list" data-v-0042f18a><!--[-->'),ssrRenderList(v.months,x=>{t('<li class="month" data-v-0042f18a>'),ssrRenderSlot(e.$slots,"title",{title:e.isZhLang?`${e.numberToChinese(v.year)} #${e.getMonthNameI18n(x.month).zh}\uFF08${x.articles.length}\uFF09`:`${v.year} #${e.getMonthNameI18n(x.month).en} (${x.articles.length})`},null,t,n),t('<ul class="article-list" data-v-0042f18a><!--[-->'),ssrRenderList(x.articles,(E,k)=>{t('<li class="article" data-v-0042f18a>'),ssrRenderSlot(e.$slots,"article",{index:k,article:E,day:String(E.createAt.day).padStart(2,"0")},null,t,n),t("</li>")}),t("<!--]--></ul></li>")}),t("<!--]--></ul>")}),t("<!--]--></div>")}const _sfc_setup$1o=_sfc_main$1o.setup;_sfc_main$1o.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/archive/tree.vue"),_sfc_setup$1o?_sfc_setup$1o(e,t):void 0};const ArchiveTree=_export_sfc(_sfc_main$1o,[["ssrRender",_sfc_ssrRender$1o],["__scopeId","data-v-0042f18a"]]),BFF_TUNNEL_PREFIX="/_tunnel",getBFFServerPort=()=>Number(process.env.PORT||3e3),tunnel=axios.create({baseURL:`http://localhost:${getBFFServerPort()}${BFF_TUNNEL_PREFIX}`});tunnel.interceptors.response.use(e=>e.data);const tunnel$1={$:tunnel,request:(...e)=>tunnel.request(...e),dispatch:(e,t)=>tunnel.get(e,{params:t})};var TunnelModule=(e=>(e.WebFont="webfont",e.MyGoogleMap="my_google_map",e.TwitterUserInfo="twitter_userinfo",e.TwitterTweets="twitter_tweets",e.TwitterCalendar="twitter_calendar",e.YouTubePlaylist="youtube_playlist",e.YouTubeVideoList="youtube_video_list",e.InstagramMedias="instagram_medias",e.InstagramCalendar="instagram_calendar",e.BingWallpaper="bing_wallpaper",e.GitHubSponsors="github_sponsors",e.GitHubContributions="github_contributions",e.NetEaseMusic="netease_music",e.DoubanMovies="douban_movies",e.OpenSeaAssets="opensea_assets",e.OpenSeaCollections="opensea_collections",e.OpenSourceGitHubStatistic="open_source_github_statistic",e.OpenSourceNPMStatistic="open_source_npm_statistic",e))(TunnelModule||{});const useNodepressStatisticStore=defineFetchStore({id:"nodepressStatistic",initData:null,fetcher(){return nodepress$1.get("/expansion/statistic").then(e=>e.result)}}),useGitHubStatisticStore=defineFetchStore({id:"openSourceGitHubStatisticStore",initData:null,onlyOnce:!0,fetcher:()=>tunnel$1.dispatch(TunnelModule.OpenSourceGitHubStatistic)}),useNPMStatisticStore=defineFetchStore({id:"openSourceNPMStatisticStore",initData:null,onlyOnce:!0,fetcher:()=>tunnel$1.dispatch(TunnelModule.OpenSourceNPMStatistic),getters:{totalPackages(e){return e.data?Object.keys(e.data.downloads).length:0},totalDownloads(e){let t=0;return e.data&&Object.values(e.data.downloads).forEach(n=>{t+=n}),t},averageScore(e){if(!e.data)return 0;let t=0;return e.data.packages.forEach(n=>{t+=n.score.final}),(t/e.data.packages.length).toFixed(3)}}}),i18ns$1={title:{[Language.Chinese]:"\u4E07\u7269\u4E4B\u4E2D\uFF0C\u5E0C\u671B\u81F3\u7F8E",[Language.English]:"Hope is a good thing"},description:{[Language.Chinese]:"\u81F3\u7F8E\u4E4B\u7269\uFF0C\u6C38\u4E0D\u51CB\u96F6",[Language.English]:"Maybe the best of things and no good thing ever dies"}},useArchivePageMeta=()=>{const{i18n:e,head:t,isZhLang:n}=useEnhancer();t(()=>{const r=firstUpperCase(e.t(LanguageKey.PAGE_ARCHIVE,Language.English));return{pageTitle:(n.value?[e.t(LanguageKey.PAGE_ARCHIVE),r]:[r]).join(" | "),description:`${META.title} \u6570\u636E\u5F52\u6863`,ogType:"blog"}})},useArchivePageStatistics=()=>{const{i18n:e}=useEnhancer(),t=useNodepressStatisticStore(),n=computed(()=>{var r,c,d,g,o,v,x,E;return{tags:{icon:"icon-quill",title:e.t(LanguageKey.STATISTIC_TAGS),content:numberSplit(((r=t.data)==null?void 0:r.tags)||0)},articles:{icon:"icon-quill",title:e.t(LanguageKey.STATISTIC_ARTICLES),content:numberSplit(((c=t.data)==null?void 0:c.articles)||0)},comments:{icon:"icon-comment",title:e.t(LanguageKey.STATISTIC_COMMENTS),content:numberSplit(((d=t.data)==null?void 0:d.comments)||0)},todayViews:{icon:"icon-eye",title:e.t(LanguageKey.STATISTIC_TODAY_VIEWS),content:numberSplit(((g=t.data)==null?void 0:g.todayViews)||0)},totalViews:{icon:"icon-like",title:e.t(LanguageKey.STATISTIC_TOTAL_VIEWS),content:numberSplit(((o=t.data)==null?void 0:o.totalViews)||0)},totalLikes:{icon:"icon-like",title:e.t(LanguageKey.STATISTIC_TOTAL_UPVOTES),content:numberSplit(((v=t.data)==null?void 0:v.totalLikes)||0)},averageEmotion:{icon:"icon-emoji",title:e.t(LanguageKey.STATISTIC_AVERAGE_EMOTION),content:String((E=(x=t.data)==null?void 0:x.averageEmotion)!=null?E:"-")}}});return{store:t,fetch:t.fetch,statistics:n}},_sfc_main$1n=defineComponent({name:"DesktopArchivePage",components:{PageBanner,ArchiveTree},setup(){const e=useArchiveStore(),t=useArchivePageStatistics(),n=ref(!0),r=computed(()=>[t.statistics.value.articles,t.statistics.value.todayViews,t.statistics.value.comments,t.statistics.value.totalLikes,t.statistics.value.averageEmotion]);return useArchivePageMeta(),useUniversalFetch(()=>e.fetch()),onMounted(()=>{t.fetch().finally(()=>{n.value=!1})}),{LanguageKey,i18ns:i18ns$1,getArticleDetailRoute,numberSplit,archiveStore:e,statisticFetching:n,statistics:r}}}),desktop_vue_vue_type_style_index_0_scoped_14d92c5a_lang="";function _sfc_ssrRender$1n(e,t,n,r,c,d,g,o){const v=resolveComponent("page-banner"),x=resolveComponent("webfont"),E=resolveComponent("i18n"),k=resolveComponent("container"),S=resolveComponent("skeleton-base"),N=resolveComponent("placeholder"),L=resolveComponent("empty"),P=resolveComponent("skeleton-line"),O=resolveComponent("archive-tree"),V=resolveComponent("divider");t(`<div${ssrRenderAttrs(mergeProps({class:"archive-page"},r))} data-v-14d92c5a>`),t(ssrRenderComponent(v,{position:32,image:"/images/page-archive/banner.jpg"},{title:withCtx((z,U,W,Z)=>{if(U)U(ssrRenderComponent(x,null,{default:withCtx((re,oe,se,ce)=>{if(oe)oe(ssrRenderComponent(E,e.i18ns.title,null,se,ce));else return[createVNode(E,e.i18ns.title,null,16)]}),_:1},W,Z));else return[createVNode(x,null,{default:withCtx(()=>[createVNode(E,e.i18ns.title,null,16)]),_:1})]}),description:withCtx((z,U,W,Z)=>{if(U)U(ssrRenderComponent(E,e.i18ns.description,null,W,Z));else return[createVNode(E,e.i18ns.description,null,16)]}),_:1},n)),t(ssrRenderComponent(k,{class:"statistic-warpper"},{default:withCtx((z,U,W,Z)=>{if(U)U(""),e.statisticFetching?(U(`<div class="skeletons" data-v-14d92c5a${Z}><!--[-->`),ssrRenderList(e.statistics.length,re=>{U(ssrRenderComponent(S,{class:"item",key:re},null,W,Z))}),U("<!--]--></div>")):(U(`<div class="statistics" data-v-14d92c5a${Z}><!--[-->`),ssrRenderList(e.statistics,(re,oe)=>{U(`<div class="item" data-v-14d92c5a${Z}><p class="title" data-v-14d92c5a${Z}><span class="text" data-v-14d92c5a${Z}>${ssrInterpolate(re.title)}</span><i class="${ssrRenderClass([re.icon,"iconfont"])}" data-v-14d92c5a${Z}></i></p><div class="content" data-v-14d92c5a${Z}>${ssrInterpolate(re.content)}</div></div>`)}),U("<!--]--></div>"));else return[createVNode(Transition,{name:"module",mode:"out-in"},{default:withCtx(()=>[e.statisticFetching?(openBlock(),createBlock("div",{key:0,class:"skeletons"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.statistics.length,re=>(openBlock(),createBlock(S,{class:"item",key:re}))),128))])):(openBlock(),createBlock("div",{key:1,class:"statistics"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.statistics,(re,oe)=>(openBlock(),createBlock("div",{class:"item",key:oe},[createVNode("p",{class:"title"},[createVNode("span",{class:"text"},toDisplayString(re.title),1),createVNode("i",{class:["iconfont",re.icon]},null,2)]),createVNode("div",{class:"content"},toDisplayString(re.content),1)]))),128))]))]),_:1})]}),_:1},n)),t(ssrRenderComponent(k,{class:"archive-warpper"},{default:withCtx((z,U,W,Z)=>{var re,oe;if(U)U(ssrRenderComponent(N,{data:(re=e.archiveStore.data)==null?void 0:re.articles.length,loading:e.archiveStore.fetching},{placeholder:withCtx((se,ce,me,we)=>{if(ce)ce(ssrRenderComponent(L,{class:"archive-empty",key:"empty"},{default:withCtx((ae,Ce,Fe,it)=>{if(Ce)Ce(ssrRenderComponent(E,{k:e.LanguageKey.ARTICLE_PLACEHOLDER},null,Fe,it));else return[createVNode(E,{k:e.LanguageKey.ARTICLE_PLACEHOLDER},null,8,["k"])]}),_:1},me,we));else return[createVNode(L,{class:"archive-empty",key:"empty"},{default:withCtx(()=>[createVNode(E,{k:e.LanguageKey.ARTICLE_PLACEHOLDER},null,8,["k"])]),_:1})]}),loading:withCtx((se,ce,me,we)=>{if(ce)ce(`<ul class="archive-skeleton" data-v-14d92c5a${we}><!--[-->`),ssrRenderList(3,ae=>{ce(`<li class="item" data-v-14d92c5a${we}><!--[-->`),ssrRenderList(3,Ce=>{ce(ssrRenderComponent(P,{key:Ce,class:"line"},null,me,we))}),ce("<!--]--></li>")}),ce("<!--]--></ul>");else return[createVNode("ul",{class:"archive-skeleton",key:"skeleton"},[(openBlock(),createBlock(Fragment,null,renderList(3,ae=>createVNode("li",{key:ae,class:"item"},[(openBlock(),createBlock(Fragment,null,renderList(3,Ce=>createVNode(P,{key:Ce,class:"line"})),64))])),64))])]}),default:withCtx((se,ce,me,we)=>{if(ce)ce(ssrRenderComponent(O,{class:"archive-content",tree:e.archiveStore.tree,key:"content"},{title:withCtx(({title:ae},Ce,Fe,it)=>{if(Ce)Ce(`<h1 class="archive-title" data-v-14d92c5a${it}>${ssrInterpolate(ae)}</h1>`);else return[createVNode("h1",{class:"archive-title"},toDisplayString(ae),1)]}),article:withCtx(({article:ae,day:Ce},Fe,it,_e)=>{if(Fe)Fe(`<div class="archive-article" data-v-14d92c5a${_e}><div class="left" data-v-14d92c5a${_e}><h3 class="title" data-v-14d92c5a${_e}><span class="date" data-v-14d92c5a${_e}>D${ssrInterpolate(Ce)}</span><a class="link" target="_blank"${ssrRenderAttr("title",ae.title)}${ssrRenderAttr("href",e.getArticleDetailRoute(ae.id))} data-v-14d92c5a${_e}>${ssrInterpolate(ae.title)}</a></h3><p class="description" data-v-14d92c5a${_e}>${ae.description}</p></div><div class="metas" data-v-14d92c5a${_e}><div class="item views" data-v-14d92c5a${_e}><i class="iconfont icon-eye" data-v-14d92c5a${_e}></i><span class="text" data-v-14d92c5a${_e}>${ssrInterpolate(e.numberSplit(ae.meta.views))}</span></div>`),Fe(ssrRenderComponent(V,{type:"vertical"},null,it,_e)),Fe(`<div class="item likes" data-v-14d92c5a${_e}><i class="like-icon iconfont icon-like" data-v-14d92c5a${_e}></i><span class="text" data-v-14d92c5a${_e}>${ssrInterpolate(ae.meta.likes)}</span></div>`),Fe(ssrRenderComponent(V,{type:"vertical"},null,it,_e)),Fe(`<div class="item comments" data-v-14d92c5a${_e}><i class="iconfont icon-comment" data-v-14d92c5a${_e}></i><span class="text" data-v-14d92c5a${_e}>${ssrInterpolate(ae.meta.comments)}</span></div></div></div>`);else return[createVNode("div",{class:"archive-article"},[createVNode("div",{class:"left"},[createVNode("h3",{class:"title"},[createVNode("span",{class:"date"},"D"+toDisplayString(Ce),1),createVNode("a",{class:"link",target:"_blank",title:ae.title,href:e.getArticleDetailRoute(ae.id)},toDisplayString(ae.title),9,["title","href"])]),createVNode("p",{class:"description",innerHTML:ae.description},null,8,["innerHTML"])]),createVNode("div",{class:"metas"},[createVNode("div",{class:"item views"},[createVNode("i",{class:"iconfont icon-eye"}),createVNode("span",{class:"text"},toDisplayString(e.numberSplit(ae.meta.views)),1)]),createVNode(V,{type:"vertical"}),createVNode("div",{class:"item likes"},[createVNode("i",{class:"like-icon iconfont icon-like"}),createVNode("span",{class:"text"},toDisplayString(ae.meta.likes),1)]),createVNode(V,{type:"vertical"}),createVNode("div",{class:"item comments"},[createVNode("i",{class:"iconfont icon-comment"}),createVNode("span",{class:"text"},toDisplayString(ae.meta.comments),1)])])])]}),_:1},me,we));else return[createVNode(O,{class:"archive-content",tree:e.archiveStore.tree,key:"content"},{title:withCtx(({title:ae})=>[createVNode("h1",{class:"archive-title"},toDisplayString(ae),1)]),article:withCtx(({article:ae,day:Ce})=>[createVNode("div",{class:"archive-article"},[createVNode("div",{class:"left"},[createVNode("h3",{class:"title"},[createVNode("span",{class:"date"},"D"+toDisplayString(Ce),1),createVNode("a",{class:"link",target:"_blank",title:ae.title,href:e.getArticleDetailRoute(ae.id)},toDisplayString(ae.title),9,["title","href"])]),createVNode("p",{class:"description",innerHTML:ae.description},null,8,["innerHTML"])]),createVNode("div",{class:"metas"},[createVNode("div",{class:"item views"},[createVNode("i",{class:"iconfont icon-eye"}),createVNode("span",{class:"text"},toDisplayString(e.numberSplit(ae.meta.views)),1)]),createVNode(V,{type:"vertical"}),createVNode("div",{class:"item likes"},[createVNode("i",{class:"like-icon iconfont icon-like"}),createVNode("span",{class:"text"},toDisplayString(ae.meta.likes),1)]),createVNode(V,{type:"vertical"}),createVNode("div",{class:"item comments"},[createVNode("i",{class:"iconfont icon-comment"}),createVNode("span",{class:"text"},toDisplayString(ae.meta.comments),1)])])])]),_:1},8,["tree"])]}),_:1},W,Z));else return[createVNode(N,{data:(oe=e.archiveStore.data)==null?void 0:oe.articles.length,loading:e.archiveStore.fetching},{placeholder:withCtx(()=>[createVNode(L,{class:"archive-empty",key:"empty"},{default:withCtx(()=>[createVNode(E,{k:e.LanguageKey.ARTICLE_PLACEHOLDER},null,8,["k"])]),_:1})]),loading:withCtx(()=>[createVNode("ul",{class:"archive-skeleton",key:"skeleton"},[(openBlock(),createBlock(Fragment,null,renderList(3,se=>createVNode("li",{key:se,class:"item"},[(openBlock(),createBlock(Fragment,null,renderList(3,ce=>createVNode(P,{key:ce,class:"line"})),64))])),64))])]),default:withCtx(()=>[createVNode(O,{class:"archive-content",tree:e.archiveStore.tree,key:"content"},{title:withCtx(({title:se})=>[createVNode("h1",{class:"archive-title"},toDisplayString(se),1)]),article:withCtx(({article:se,day:ce})=>[createVNode("div",{class:"archive-article"},[createVNode("div",{class:"left"},[createVNode("h3",{class:"title"},[createVNode("span",{class:"date"},"D"+toDisplayString(ce),1),createVNode("a",{class:"link",target:"_blank",title:se.title,href:e.getArticleDetailRoute(se.id)},toDisplayString(se.title),9,["title","href"])]),createVNode("p",{class:"description",innerHTML:se.description},null,8,["innerHTML"])]),createVNode("div",{class:"metas"},[createVNode("div",{class:"item views"},[createVNode("i",{class:"iconfont icon-eye"}),createVNode("span",{class:"text"},toDisplayString(e.numberSplit(se.meta.views)),1)]),createVNode(V,{type:"vertical"}),createVNode("div",{class:"item likes"},[createVNode("i",{class:"like-icon iconfont icon-like"}),createVNode("span",{class:"text"},toDisplayString(se.meta.likes),1)]),createVNode(V,{type:"vertical"}),createVNode("div",{class:"item comments"},[createVNode("i",{class:"iconfont icon-comment"}),createVNode("span",{class:"text"},toDisplayString(se.meta.comments),1)])])])]),_:1},8,["tree"])]),_:1},8,["data","loading"])]}),_:1},n)),t("</div>")}const _sfc_setup$1n=_sfc_main$1n.setup;_sfc_main$1n.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/archive/desktop.vue"),_sfc_setup$1n?_sfc_setup$1n(e,t):void 0};const DesktopArchivePage=_export_sfc(_sfc_main$1n,[["ssrRender",_sfc_ssrRender$1n],["__scopeId","data-v-14d92c5a"]]),_sfc_main$1m=defineComponent({name:"MobileArchivePage",components:{PageBanner,ArchiveTree},setup(){const e=useArchiveStore(),t=useArchivePageStatistics(),n=ref(!0),r=computed(()=>[t.statistics.value.articles,t.statistics.value.todayViews,t.statistics.value.comments,t.statistics.value.averageEmotion]);return useArchivePageMeta(),useUniversalFetch(()=>e.fetch()),onMounted(()=>{t.fetch().finally(()=>{n.value=!1})}),{LanguageKey,i18ns:i18ns$1,getArticleDetailRoute,archiveStore:e,statisticFetching:n,statistics:r}}}),mobile_vue_vue_type_style_index_0_scoped_880b85b7_lang="";function _sfc_ssrRender$1m(e,t,n,r,c,d,g,o){const v=resolveComponent("page-banner"),x=resolveComponent("i18n"),E=resolveComponent("container"),k=resolveComponent("skeleton-base"),S=resolveComponent("placeholder"),N=resolveComponent("empty"),L=resolveComponent("skeleton-line"),P=resolveComponent("archive-tree");t(`<div${ssrRenderAttrs(mergeProps({class:"archive-page"},r))} data-v-880b85b7>`),t(ssrRenderComponent(v,{position:80,"is-mobile":!0,image:"/images/page-archive/banner-mobile.jpg"},{title:withCtx((O,V,z,U)=>{if(V)V(ssrRenderComponent(x,{k:e.LanguageKey.PAGE_ARCHIVE},null,z,U));else return[createVNode(x,{k:e.LanguageKey.PAGE_ARCHIVE},null,8,["k"])]}),description:withCtx((O,V,z,U)=>{if(V)V(ssrRenderComponent(x,e.i18ns.title,null,z,U));else return[createVNode(x,e.i18ns.title,null,16)]}),_:1},n)),t('<div class="page-content" data-v-880b85b7>'),t(ssrRenderComponent(E,{class:"statistic-warpper"},{default:withCtx((O,V,z,U)=>{if(V)V(""),e.statisticFetching?(V(`<div class="skeletons" data-v-880b85b7${U}><!--[-->`),ssrRenderList(e.statistics.length,W=>{V(ssrRenderComponent(k,{class:"skeleton",key:W},null,z,U))}),V("<!--]--></div>")):(V(`<div class="statistics" data-v-880b85b7${U}><!--[-->`),ssrRenderList(e.statistics,(W,Z)=>{V(`<div class="item" data-v-880b85b7${U}><p class="title" data-v-880b85b7${U}>${ssrInterpolate(W.title)}</p><div class="content" data-v-880b85b7${U}>${ssrInterpolate(W.content)}</div></div>`)}),V("<!--]--></div>"));else return[createVNode(Transition,{name:"module",mode:"out-in"},{default:withCtx(()=>[e.statisticFetching?(openBlock(),createBlock("div",{key:0,class:"skeletons"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.statistics.length,W=>(openBlock(),createBlock(k,{class:"skeleton",key:W}))),128))])):(openBlock(),createBlock("div",{key:1,class:"statistics"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.statistics,(W,Z)=>(openBlock(),createBlock("div",{class:"item",key:Z},[createVNode("p",{class:"title"},toDisplayString(W.title),1),createVNode("div",{class:"content"},toDisplayString(W.content),1)]))),128))]))]),_:1})]}),_:1},n)),t(ssrRenderComponent(E,{class:"archive-warpper"},{default:withCtx((O,V,z,U)=>{var W,Z;if(V)V(ssrRenderComponent(S,{data:(W=e.archiveStore.data)==null?void 0:W.articles.length,loading:e.archiveStore.fetching},{placeholder:withCtx((re,oe,se,ce)=>{if(oe)oe(ssrRenderComponent(N,{class:"archive-empty",key:"empty"},{default:withCtx((me,we,ae,Ce)=>{if(we)we(ssrRenderComponent(x,{k:e.LanguageKey.ARTICLE_PLACEHOLDER},null,ae,Ce));else return[createVNode(x,{k:e.LanguageKey.ARTICLE_PLACEHOLDER},null,8,["k"])]}),_:1},se,ce));else return[createVNode(N,{class:"archive-empty",key:"empty"},{default:withCtx(()=>[createVNode(x,{k:e.LanguageKey.ARTICLE_PLACEHOLDER},null,8,["k"])]),_:1})]}),loading:withCtx((re,oe,se,ce)=>{if(oe)oe(`<div class="archive-skeleton" data-v-880b85b7${ce}><!--[-->`),ssrRenderList(6,me=>{oe(ssrRenderComponent(L,{class:"item",key:me},null,se,ce))}),oe("<!--]--></div>");else return[createVNode("div",{class:"archive-skeleton",key:"skeleton"},[(openBlock(),createBlock(Fragment,null,renderList(6,me=>createVNode(L,{class:"item",key:me})),64))])]}),default:withCtx((re,oe,se,ce)=>{if(oe)oe(ssrRenderComponent(P,{class:"archive-content",tree:e.archiveStore.tree,key:"content"},{title:withCtx(({title:me},we,ae,Ce)=>{if(we)we(`<h3 class="archive-title" data-v-880b85b7${Ce}>${ssrInterpolate(me)}</h3>`);else return[createVNode("h3",{class:"archive-title"},toDisplayString(me),1)]}),article:withCtx(({article:me,day:we},ae,Ce,Fe)=>{if(ae)ae(`<div class="archive-article" data-v-880b85b7${Fe}><h4 class="title" data-v-880b85b7${Fe}><span class="date" data-v-880b85b7${Fe}>D${ssrInterpolate(we)}</span><a class="link" target="_blank"${ssrRenderAttr("title",me.title)}${ssrRenderAttr("href",e.getArticleDetailRoute(me.id))} data-v-880b85b7${Fe}>${ssrInterpolate(me.title)}</a></h4><p class="description" data-v-880b85b7${Fe}>${me.description}</p></div>`);else return[createVNode("div",{class:"archive-article"},[createVNode("h4",{class:"title"},[createVNode("span",{class:"date"},"D"+toDisplayString(we),1),createVNode("a",{class:"link",target:"_blank",title:me.title,href:e.getArticleDetailRoute(me.id)},toDisplayString(me.title),9,["title","href"])]),createVNode("p",{class:"description",innerHTML:me.description},null,8,["innerHTML"])])]}),_:1},se,ce));else return[createVNode(P,{class:"archive-content",tree:e.archiveStore.tree,key:"content"},{title:withCtx(({title:me})=>[createVNode("h3",{class:"archive-title"},toDisplayString(me),1)]),article:withCtx(({article:me,day:we})=>[createVNode("div",{class:"archive-article"},[createVNode("h4",{class:"title"},[createVNode("span",{class:"date"},"D"+toDisplayString(we),1),createVNode("a",{class:"link",target:"_blank",title:me.title,href:e.getArticleDetailRoute(me.id)},toDisplayString(me.title),9,["title","href"])]),createVNode("p",{class:"description",innerHTML:me.description},null,8,["innerHTML"])])]),_:1},8,["tree"])]}),_:1},z,U));else return[createVNode(S,{data:(Z=e.archiveStore.data)==null?void 0:Z.articles.length,loading:e.archiveStore.fetching},{placeholder:withCtx(()=>[createVNode(N,{class:"archive-empty",key:"empty"},{default:withCtx(()=>[createVNode(x,{k:e.LanguageKey.ARTICLE_PLACEHOLDER},null,8,["k"])]),_:1})]),loading:withCtx(()=>[createVNode("div",{class:"archive-skeleton",key:"skeleton"},[(openBlock(),createBlock(Fragment,null,renderList(6,re=>createVNode(L,{class:"item",key:re})),64))])]),default:withCtx(()=>[createVNode(P,{class:"archive-content",tree:e.archiveStore.tree,key:"content"},{title:withCtx(({title:re})=>[createVNode("h3",{class:"archive-title"},toDisplayString(re),1)]),article:withCtx(({article:re,day:oe})=>[createVNode("div",{class:"archive-article"},[createVNode("h4",{class:"title"},[createVNode("span",{class:"date"},"D"+toDisplayString(oe),1),createVNode("a",{class:"link",target:"_blank",title:re.title,href:e.getArticleDetailRoute(re.id)},toDisplayString(re.title),9,["title","href"])]),createVNode("p",{class:"description",innerHTML:re.description},null,8,["innerHTML"])])]),_:1},8,["tree"])]),_:1},8,["data","loading"])]}),_:1},n)),t("</div></div>")}const _sfc_setup$1m=_sfc_main$1m.setup;_sfc_main$1m.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/archive/mobile.vue"),_sfc_setup$1m?_sfc_setup$1m(e,t):void 0};const MobileArchivePage=_export_sfc(_sfc_main$1m,[["ssrRender",_sfc_ssrRender$1m],["__scopeId","data-v-880b85b7"]]);var shams=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var c=42;t[n]=c;for(n in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var d=Object.getOwnPropertySymbols(t);if(d.length!==1||d[0]!==n||!Object.prototype.propertyIsEnumerable.call(t,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var g=Object.getOwnPropertyDescriptor(t,n);if(g.value!==c||g.enumerable!==!0)return!1}return!0},origSymbol=typeof Symbol<"u"&&Symbol,hasSymbolSham=shams,hasSymbols$1=function(){return typeof origSymbol!="function"||typeof Symbol!="function"||typeof origSymbol("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hasSymbolSham()},ERROR_MESSAGE="Function.prototype.bind called on incompatible ",slice=Array.prototype.slice,toStr$1=Object.prototype.toString,funcType="[object Function]",implementation$1=function(t){var n=this;if(typeof n!="function"||toStr$1.call(n)!==funcType)throw new TypeError(ERROR_MESSAGE+n);for(var r=slice.call(arguments,1),c,d=function(){if(this instanceof c){var E=n.apply(this,r.concat(slice.call(arguments)));return Object(E)===E?E:this}else return n.apply(t,r.concat(slice.call(arguments)))},g=Math.max(0,n.length-r.length),o=[],v=0;v<g;v++)o.push("$"+v);if(c=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this,arguments); }")(d),n.prototype){var x=function(){};x.prototype=n.prototype,c.prototype=new x,x.prototype=null}return c},implementation=implementation$1,functionBind=Function.prototype.bind||implementation,bind$1=functionBind,src=bind$1.call(Function.call,Object.prototype.hasOwnProperty),undefined$1,$SyntaxError=SyntaxError,$Function=Function,$TypeError$1=TypeError,getEvalledConstructor=function(e){try{return $Function('"use strict"; return ('+e+").constructor;")()}catch{}},$gOPD=Object.getOwnPropertyDescriptor;if($gOPD)try{$gOPD({},"")}catch{$gOPD=null}var throwTypeError=function(){throw new $TypeError$1},ThrowTypeError=$gOPD?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols=hasSymbols$1(),getProto=Object.getPrototypeOf||function(e){return e.__proto__},needsEval={},TypedArray=typeof Uint8Array>"u"?undefined$1:getProto(Uint8Array),INTRINSICS={"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols?getProto([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols?getProto(getProto([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols?undefined$1:getProto(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols?undefined$1:getProto(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols?getProto(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols?Symbol:undefined$1,"%SyntaxError%":$SyntaxError,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$1,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet},doEval=function e(t){var n;if(t==="%AsyncFunction%")n=getEvalledConstructor("async function () {}");else if(t==="%GeneratorFunction%")n=getEvalledConstructor("function* () {}");else if(t==="%AsyncGeneratorFunction%")n=getEvalledConstructor("async function* () {}");else if(t==="%AsyncGenerator%"){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(t==="%AsyncIteratorPrototype%"){var c=e("%AsyncGenerator%");c&&(n=getProto(c.prototype))}return INTRINSICS[t]=n,n},LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind=functionBind,hasOwn$1=src,$concat$1=bind.call(Function.call,Array.prototype.concat),$spliceApply=bind.call(Function.apply,Array.prototype.splice),$replace$1=bind.call(Function.call,String.prototype.replace),$strSlice=bind.call(Function.call,String.prototype.slice),$exec=bind.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function(t){var n=$strSlice(t,0,1),r=$strSlice(t,-1);if(n==="%"&&r!=="%")throw new $SyntaxError("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&n!=="%")throw new $SyntaxError("invalid intrinsic syntax, expected opening `%`");var c=[];return $replace$1(t,rePropName,function(d,g,o,v){c[c.length]=o?$replace$1(v,reEscapeChar,"$1"):g||d}),c},getBaseIntrinsic=function(t,n){var r=t,c;if(hasOwn$1(LEGACY_ALIASES,r)&&(c=LEGACY_ALIASES[r],r="%"+c[0]+"%"),hasOwn$1(INTRINSICS,r)){var d=INTRINSICS[r];if(d===needsEval&&(d=doEval(r)),typeof d>"u"&&!n)throw new $TypeError$1("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:c,name:r,value:d}}throw new $SyntaxError("intrinsic "+t+" does not exist!")},getIntrinsic=function(t,n){if(typeof t!="string"||t.length===0)throw new $TypeError$1("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new $TypeError$1('"allowMissing" argument must be a boolean');if($exec(/^%?[^%]*%?$/,t)===null)throw new $SyntaxError("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=stringToPath(t),c=r.length>0?r[0]:"",d=getBaseIntrinsic("%"+c+"%",n),g=d.name,o=d.value,v=!1,x=d.alias;x&&(c=x[0],$spliceApply(r,$concat$1([0,1],x)));for(var E=1,k=!0;E<r.length;E+=1){var S=r[E],N=$strSlice(S,0,1),L=$strSlice(S,-1);if((N==='"'||N==="'"||N==="`"||L==='"'||L==="'"||L==="`")&&N!==L)throw new $SyntaxError("property names with quotes must have matching quotes");if((S==="constructor"||!k)&&(v=!0),c+="."+S,g="%"+c+"%",hasOwn$1(INTRINSICS,g))o=INTRINSICS[g];else if(o!=null){if(!(S in o)){if(!n)throw new $TypeError$1("base intrinsic for "+t+" exists, but the property is not available.");return}if($gOPD&&E+1>=r.length){var P=$gOPD(o,S);k=!!P,k&&"get"in P&&!("originalValue"in P.get)?o=P.get:o=o[S]}else k=hasOwn$1(o,S),o=o[S];k&&!v&&(INTRINSICS[g]=o)}}return o},callBind$1={exports:{}};(function(e){var t=functionBind,n=getIntrinsic,r=n("%Function.prototype.apply%"),c=n("%Function.prototype.call%"),d=n("%Reflect.apply%",!0)||t.call(c,r),g=n("%Object.getOwnPropertyDescriptor%",!0),o=n("%Object.defineProperty%",!0),v=n("%Math.max%");if(o)try{o({},"a",{value:1})}catch{o=null}e.exports=function(k){var S=d(t,c,arguments);if(g&&o){var N=g(S,"length");N.configurable&&o(S,"length",{value:1+v(0,k.length-(arguments.length-1))})}return S};var x=function(){return d(t,r,arguments)};o?o(e.exports,"apply",{value:x}):e.exports.apply=x})(callBind$1);var GetIntrinsic$1=getIntrinsic,callBind=callBind$1.exports,$indexOf=callBind(GetIntrinsic$1("String.prototype.indexOf")),callBound$1=function(t,n){var r=GetIntrinsic$1(t,!!n);return typeof r=="function"&&$indexOf(t,".prototype.")>-1?callBind(r):r},util_inspect=require$$0__default$1.default.inspect,hasMap=typeof Map=="function"&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize=hasMap&&mapSizeDescriptor&&typeof mapSizeDescriptor.get=="function"?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet=typeof Set=="function"&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&typeof setSizeDescriptor.get=="function"?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,hasWeakMap=typeof WeakMap=="function"&&WeakMap.prototype,weakMapHas=hasWeakMap?WeakMap.prototype.has:null,hasWeakSet=typeof WeakSet=="function"&&WeakSet.prototype,weakSetHas=hasWeakSet?WeakSet.prototype.has:null,hasWeakRef=typeof WeakRef=="function"&&WeakRef.prototype,weakRefDeref=hasWeakRef?WeakRef.prototype.deref:null,booleanValueOf=Boolean.prototype.valueOf,objectToString=Object.prototype.toString,functionToString=Function.prototype.toString,$match=String.prototype.match,$slice=String.prototype.slice,$replace=String.prototype.replace,$toUpperCase=String.prototype.toUpperCase,$toLowerCase=String.prototype.toLowerCase,$test=RegExp.prototype.test,$concat=Array.prototype.concat,$join=Array.prototype.join,$arrSlice=Array.prototype.slice,$floor=Math.floor,bigIntValueOf=typeof BigInt=="function"?BigInt.prototype.valueOf:null,gOPS=Object.getOwnPropertySymbols,symToString=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,hasShammedSymbols=typeof Symbol=="function"&&typeof Symbol.iterator=="object",toStringTag=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===hasShammedSymbols?"object":"symbol")?Symbol.toStringTag:null,isEnumerable=Object.prototype.propertyIsEnumerable,gPO=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function addNumericSeparator(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||$test.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var r=e<0?-$floor(-e):$floor(e);if(r!==e){var c=String(r),d=$slice.call(t,c.length+1);return $replace.call(c,n,"$&_")+"."+$replace.call($replace.call(d,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $replace.call(t,n,"$&_")}var utilInspect=util_inspect,inspectCustom=utilInspect.custom,inspectSymbol=isSymbol(inspectCustom)?inspectCustom:null,objectInspect=function e(t,n,r,c){var d=n||{};if(has$3(d,"quoteStyle")&&d.quoteStyle!=="single"&&d.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has$3(d,"maxStringLength")&&(typeof d.maxStringLength=="number"?d.maxStringLength<0&&d.maxStringLength!==1/0:d.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var g=has$3(d,"customInspect")?d.customInspect:!0;if(typeof g!="boolean"&&g!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(has$3(d,"indent")&&d.indent!==null&&d.indent!=="	"&&!(parseInt(d.indent,10)===d.indent&&d.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(has$3(d,"numericSeparator")&&typeof d.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var o=d.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return inspectString(t,d);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var v=String(t);return o?addNumericSeparator(t,v):v}if(typeof t=="bigint"){var x=String(t)+"n";return o?addNumericSeparator(t,x):x}var E=typeof d.depth>"u"?5:d.depth;if(typeof r>"u"&&(r=0),r>=E&&E>0&&typeof t=="object")return isArray$3(t)?"[Array]":"[Object]";var k=getIndent(d,r);if(typeof c>"u")c=[];else if(indexOf(c,t)>=0)return"[Circular]";function S(Ce,Fe,it){if(Fe&&(c=$arrSlice.call(c),c.push(Fe)),it){var _e={depth:d.depth};return has$3(d,"quoteStyle")&&(_e.quoteStyle=d.quoteStyle),e(Ce,_e,r+1,c)}return e(Ce,d,r+1,c)}if(typeof t=="function"&&!isRegExp$1(t)){var N=nameOf(t),L=arrObjKeys(t,S);return"[Function"+(N?": "+N:" (anonymous)")+"]"+(L.length>0?" { "+$join.call(L,", ")+" }":"")}if(isSymbol(t)){var P=hasShammedSymbols?$replace.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):symToString.call(t);return typeof t=="object"&&!hasShammedSymbols?markBoxed(P):P}if(isElement(t)){for(var O="<"+$toLowerCase.call(String(t.nodeName)),V=t.attributes||[],z=0;z<V.length;z++)O+=" "+V[z].name+"="+wrapQuotes(quote(V[z].value),"double",d);return O+=">",t.childNodes&&t.childNodes.length&&(O+="..."),O+="</"+$toLowerCase.call(String(t.nodeName))+">",O}if(isArray$3(t)){if(t.length===0)return"[]";var U=arrObjKeys(t,S);return k&&!singleLineValues(U)?"["+indentedJoin(U,k)+"]":"[ "+$join.call(U,", ")+" ]"}if(isError(t)){var W=arrObjKeys(t,S);return!("cause"in Error.prototype)&&"cause"in t&&!isEnumerable.call(t,"cause")?"{ ["+String(t)+"] "+$join.call($concat.call("[cause]: "+S(t.cause),W),", ")+" }":W.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+$join.call(W,", ")+" }"}if(typeof t=="object"&&g){if(inspectSymbol&&typeof t[inspectSymbol]=="function"&&utilInspect)return utilInspect(t,{depth:E-r});if(g!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(isMap(t)){var Z=[];return mapForEach.call(t,function(Ce,Fe){Z.push(S(Fe,t,!0)+" => "+S(Ce,t))}),collectionOf("Map",mapSize.call(t),Z,k)}if(isSet(t)){var re=[];return setForEach.call(t,function(Ce){re.push(S(Ce,t))}),collectionOf("Set",setSize.call(t),re,k)}if(isWeakMap(t))return weakCollectionOf("WeakMap");if(isWeakSet(t))return weakCollectionOf("WeakSet");if(isWeakRef(t))return weakCollectionOf("WeakRef");if(isNumber(t))return markBoxed(S(Number(t)));if(isBigInt(t))return markBoxed(S(bigIntValueOf.call(t)));if(isBoolean(t))return markBoxed(booleanValueOf.call(t));if(isString(t))return markBoxed(S(String(t)));if(!isDate(t)&&!isRegExp$1(t)){var oe=arrObjKeys(t,S),se=gPO?gPO(t)===Object.prototype:t instanceof Object||t.constructor===Object,ce=t instanceof Object?"":"null prototype",me=!se&&toStringTag&&Object(t)===t&&toStringTag in t?$slice.call(toStr(t),8,-1):ce?"Object":"",we=se||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",ae=we+(me||ce?"["+$join.call($concat.call([],me||[],ce||[]),": ")+"] ":"");return oe.length===0?ae+"{}":k?ae+"{"+indentedJoin(oe,k)+"}":ae+"{ "+$join.call(oe,", ")+" }"}return String(t)};function wrapQuotes(e,t,n){var r=(n.quoteStyle||t)==="double"?'"':"'";return r+e+r}function quote(e){return $replace.call(String(e),/"/g,"&quot;")}function isArray$3(e){return toStr(e)==="[object Array]"&&(!toStringTag||!(typeof e=="object"&&toStringTag in e))}function isDate(e){return toStr(e)==="[object Date]"&&(!toStringTag||!(typeof e=="object"&&toStringTag in e))}function isRegExp$1(e){return toStr(e)==="[object RegExp]"&&(!toStringTag||!(typeof e=="object"&&toStringTag in e))}function isError(e){return toStr(e)==="[object Error]"&&(!toStringTag||!(typeof e=="object"&&toStringTag in e))}function isString(e){return toStr(e)==="[object String]"&&(!toStringTag||!(typeof e=="object"&&toStringTag in e))}function isNumber(e){return toStr(e)==="[object Number]"&&(!toStringTag||!(typeof e=="object"&&toStringTag in e))}function isBoolean(e){return toStr(e)==="[object Boolean]"&&(!toStringTag||!(typeof e=="object"&&toStringTag in e))}function isSymbol(e){if(hasShammedSymbols)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!symToString)return!1;try{return symToString.call(e),!0}catch{}return!1}function isBigInt(e){if(!e||typeof e!="object"||!bigIntValueOf)return!1;try{return bigIntValueOf.call(e),!0}catch{}return!1}var hasOwn=Object.prototype.hasOwnProperty||function(e){return e in this};function has$3(e,t){return hasOwn.call(e,t)}function toStr(e){return objectToString.call(e)}function nameOf(e){if(e.name)return e.name;var t=$match.call(functionToString.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function indexOf(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function isMap(e){if(!mapSize||!e||typeof e!="object")return!1;try{mapSize.call(e);try{setSize.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function isWeakMap(e){if(!weakMapHas||!e||typeof e!="object")return!1;try{weakMapHas.call(e,weakMapHas);try{weakSetHas.call(e,weakSetHas)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function isWeakRef(e){if(!weakRefDeref||!e||typeof e!="object")return!1;try{return weakRefDeref.call(e),!0}catch{}return!1}function isSet(e){if(!setSize||!e||typeof e!="object")return!1;try{setSize.call(e);try{mapSize.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function isWeakSet(e){if(!weakSetHas||!e||typeof e!="object")return!1;try{weakSetHas.call(e,weakSetHas);try{weakMapHas.call(e,weakMapHas)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function isElement(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function inspectString(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return inspectString($slice.call(e,0,t.maxStringLength),t)+r}var c=$replace.call($replace.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,lowbyte);return wrapQuotes(c,"single",t)}function lowbyte(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+$toUpperCase.call(t.toString(16))}function markBoxed(e){return"Object("+e+")"}function weakCollectionOf(e){return e+" { ? }"}function collectionOf(e,t,n,r){var c=r?indentedJoin(n,r):$join.call(n,", ");return e+" ("+t+") {"+c+"}"}function singleLineValues(e){for(var t=0;t<e.length;t++)if(indexOf(e[t],`
`)>=0)return!1;return!0}function getIndent(e,t){var n;if(e.indent==="	")n="	";else if(typeof e.indent=="number"&&e.indent>0)n=$join.call(Array(e.indent+1)," ");else return null;return{base:n,prev:$join.call(Array(t+1),n)}}function indentedJoin(e,t){if(e.length===0)return"";var n=`
`+t.prev+t.base;return n+$join.call(e,","+n)+`
`+t.prev}function arrObjKeys(e,t){var n=isArray$3(e),r=[];if(n){r.length=e.length;for(var c=0;c<e.length;c++)r[c]=has$3(e,c)?t(e[c],e):""}var d=typeof gOPS=="function"?gOPS(e):[],g;if(hasShammedSymbols){g={};for(var o=0;o<d.length;o++)g["$"+d[o]]=d[o]}for(var v in e)!has$3(e,v)||n&&String(Number(v))===v&&v<e.length||hasShammedSymbols&&g["$"+v]instanceof Symbol||($test.call(/[^\w$]/,v)?r.push(t(v,e)+": "+t(e[v],e)):r.push(v+": "+t(e[v],e)));if(typeof gOPS=="function")for(var x=0;x<d.length;x++)isEnumerable.call(e,d[x])&&r.push("["+t(d[x])+"]: "+t(e[d[x]],e));return r}var GetIntrinsic=getIntrinsic,callBound=callBound$1,inspect=objectInspect,$TypeError=GetIntrinsic("%TypeError%"),$WeakMap=GetIntrinsic("%WeakMap%",!0),$Map=GetIntrinsic("%Map%",!0),$weakMapGet=callBound("WeakMap.prototype.get",!0),$weakMapSet=callBound("WeakMap.prototype.set",!0),$weakMapHas=callBound("WeakMap.prototype.has",!0),$mapGet=callBound("Map.prototype.get",!0),$mapSet=callBound("Map.prototype.set",!0),$mapHas=callBound("Map.prototype.has",!0),listGetNode=function(e,t){for(var n=e,r;(r=n.next)!==null;n=r)if(r.key===t)return n.next=r.next,r.next=e.next,e.next=r,r},listGet=function(e,t){var n=listGetNode(e,t);return n&&n.value},listSet=function(e,t,n){var r=listGetNode(e,t);r?r.value=n:e.next={key:t,next:e.next,value:n}},listHas=function(e,t){return!!listGetNode(e,t)},sideChannel=function(){var t,n,r,c={assert:function(d){if(!c.has(d))throw new $TypeError("Side channel does not contain "+inspect(d))},get:function(d){if($WeakMap&&d&&(typeof d=="object"||typeof d=="function")){if(t)return $weakMapGet(t,d)}else if($Map){if(n)return $mapGet(n,d)}else if(r)return listGet(r,d)},has:function(d){if($WeakMap&&d&&(typeof d=="object"||typeof d=="function")){if(t)return $weakMapHas(t,d)}else if($Map){if(n)return $mapHas(n,d)}else if(r)return listHas(r,d);return!1},set:function(d,g){$WeakMap&&d&&(typeof d=="object"||typeof d=="function")?(t||(t=new $WeakMap),$weakMapSet(t,d,g)):$Map?(n||(n=new $Map),$mapSet(n,d,g)):(r||(r={key:{},next:null}),listSet(r,d,g))}};return c},replace=String.prototype.replace,percentTwenties=/%20/g,Format={RFC1738:"RFC1738",RFC3986:"RFC3986"},formats$3={default:Format.RFC3986,formatters:{RFC1738:function(e){return replace.call(e,percentTwenties,"+")},RFC3986:function(e){return String(e)}},RFC1738:Format.RFC1738,RFC3986:Format.RFC3986},formats$2=formats$3,has$2=Object.prototype.hasOwnProperty,isArray$2=Array.isArray,hexTable=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),compactQueue=function(t){for(;t.length>1;){var n=t.pop(),r=n.obj[n.prop];if(isArray$2(r)){for(var c=[],d=0;d<r.length;++d)typeof r[d]<"u"&&c.push(r[d]);n.obj[n.prop]=c}}},arrayToObject=function(t,n){for(var r=n&&n.plainObjects?Object.create(null):{},c=0;c<t.length;++c)typeof t[c]<"u"&&(r[c]=t[c]);return r},merge=function e(t,n,r){if(!n)return t;if(typeof n!="object"){if(isArray$2(t))t.push(n);else if(t&&typeof t=="object")(r&&(r.plainObjects||r.allowPrototypes)||!has$2.call(Object.prototype,n))&&(t[n]=!0);else return[t,n];return t}if(!t||typeof t!="object")return[t].concat(n);var c=t;return isArray$2(t)&&!isArray$2(n)&&(c=arrayToObject(t,r)),isArray$2(t)&&isArray$2(n)?(n.forEach(function(d,g){if(has$2.call(t,g)){var o=t[g];o&&typeof o=="object"&&d&&typeof d=="object"?t[g]=e(o,d,r):t.push(d)}else t[g]=d}),t):Object.keys(n).reduce(function(d,g){var o=n[g];return has$2.call(d,g)?d[g]=e(d[g],o,r):d[g]=o,d},c)},assign=function(t,n){return Object.keys(n).reduce(function(r,c){return r[c]=n[c],r},t)},decode=function(e,t,n){var r=e.replace(/\+/g," ");if(n==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},encode=function(t,n,r,c,d){if(t.length===0)return t;var g=t;if(typeof t=="symbol"?g=Symbol.prototype.toString.call(t):typeof t!="string"&&(g=String(t)),r==="iso-8859-1")return escape(g).replace(/%u[0-9a-f]{4}/gi,function(E){return"%26%23"+parseInt(E.slice(2),16)+"%3B"});for(var o="",v=0;v<g.length;++v){var x=g.charCodeAt(v);if(x===45||x===46||x===95||x===126||x>=48&&x<=57||x>=65&&x<=90||x>=97&&x<=122||d===formats$2.RFC1738&&(x===40||x===41)){o+=g.charAt(v);continue}if(x<128){o=o+hexTable[x];continue}if(x<2048){o=o+(hexTable[192|x>>6]+hexTable[128|x&63]);continue}if(x<55296||x>=57344){o=o+(hexTable[224|x>>12]+hexTable[128|x>>6&63]+hexTable[128|x&63]);continue}v+=1,x=65536+((x&1023)<<10|g.charCodeAt(v)&1023),o+=hexTable[240|x>>18]+hexTable[128|x>>12&63]+hexTable[128|x>>6&63]+hexTable[128|x&63]}return o},compact=function(t){for(var n=[{obj:{o:t},prop:"o"}],r=[],c=0;c<n.length;++c)for(var d=n[c],g=d.obj[d.prop],o=Object.keys(g),v=0;v<o.length;++v){var x=o[v],E=g[x];typeof E=="object"&&E!==null&&r.indexOf(E)===-1&&(n.push({obj:g,prop:x}),r.push(E))}return compactQueue(n),t},isRegExp=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},isBuffer=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},combine=function(t,n){return[].concat(t,n)},maybeMap=function(t,n){if(isArray$2(t)){for(var r=[],c=0;c<t.length;c+=1)r.push(n(t[c]));return r}return n(t)},utils$4={arrayToObject,assign,combine,compact,decode,encode,isBuffer,isRegExp,maybeMap,merge},getSideChannel=sideChannel,utils$3=utils$4,formats$1=formats$3,has$1=Object.prototype.hasOwnProperty,arrayPrefixGenerators={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,n){return t+"["+n+"]"},repeat:function(t){return t}},isArray$1=Array.isArray,split=String.prototype.split,push=Array.prototype.push,pushToArray=function(e,t){push.apply(e,isArray$1(t)?t:[t])},toISO=Date.prototype.toISOString,defaultFormat=formats$1.default,defaults$1={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:utils$3.encode,encodeValuesOnly:!1,format:defaultFormat,formatter:formats$1.formatters[defaultFormat],indices:!1,serializeDate:function(t){return toISO.call(t)},skipNulls:!1,strictNullHandling:!1},isNonNullishPrimitive=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},sentinel={},stringify$1=function e(t,n,r,c,d,g,o,v,x,E,k,S,N,L,P,O){for(var V=t,z=O,U=0,W=!1;(z=z.get(sentinel))!==void 0&&!W;){var Z=z.get(t);if(U+=1,typeof Z<"u"){if(Z===U)throw new RangeError("Cyclic object value");W=!0}typeof z.get(sentinel)>"u"&&(U=0)}if(typeof v=="function"?V=v(n,V):V instanceof Date?V=k(V):r==="comma"&&isArray$1(V)&&(V=utils$3.maybeMap(V,function(nt){return nt instanceof Date?k(nt):nt})),V===null){if(d)return o&&!L?o(n,defaults$1.encoder,P,"key",S):n;V=""}if(isNonNullishPrimitive(V)||utils$3.isBuffer(V)){if(o){var re=L?n:o(n,defaults$1.encoder,P,"key",S);if(r==="comma"&&L){for(var oe=split.call(String(V),","),se="",ce=0;ce<oe.length;++ce)se+=(ce===0?"":",")+N(o(oe[ce],defaults$1.encoder,P,"value",S));return[N(re)+(c&&isArray$1(V)&&oe.length===1?"[]":"")+"="+se]}return[N(re)+"="+N(o(V,defaults$1.encoder,P,"value",S))]}return[N(n)+"="+N(String(V))]}var me=[];if(typeof V>"u")return me;var we;if(r==="comma"&&isArray$1(V))we=[{value:V.length>0?V.join(",")||null:void 0}];else if(isArray$1(v))we=v;else{var ae=Object.keys(V);we=x?ae.sort(x):ae}for(var Ce=c&&isArray$1(V)&&V.length===1?n+"[]":n,Fe=0;Fe<we.length;++Fe){var it=we[Fe],_e=typeof it=="object"&&typeof it.value<"u"?it.value:V[it];if(!(g&&_e===null)){var ke=isArray$1(V)?typeof r=="function"?r(Ce,it):Ce:Ce+(E?"."+it:"["+it+"]");O.set(t,U);var ze=getSideChannel();ze.set(sentinel,O),pushToArray(me,e(_e,ke,r,c,d,g,o,v,x,E,k,S,N,L,P,ze))}}return me},normalizeStringifyOptions=function(t){if(!t)return defaults$1;if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=t.charset||defaults$1.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=formats$1.default;if(typeof t.format<"u"){if(!has$1.call(formats$1.formatters,t.format))throw new TypeError("Unknown format option provided.");r=t.format}var c=formats$1.formatters[r],d=defaults$1.filter;return(typeof t.filter=="function"||isArray$1(t.filter))&&(d=t.filter),{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:defaults$1.addQueryPrefix,allowDots:typeof t.allowDots>"u"?defaults$1.allowDots:!!t.allowDots,charset:n,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:defaults$1.charsetSentinel,delimiter:typeof t.delimiter>"u"?defaults$1.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:defaults$1.encode,encoder:typeof t.encoder=="function"?t.encoder:defaults$1.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:defaults$1.encodeValuesOnly,filter:d,format:r,formatter:c,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:defaults$1.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:defaults$1.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:defaults$1.strictNullHandling}},stringify_1=function(e,t){var n=e,r=normalizeStringifyOptions(t),c,d;typeof r.filter=="function"?(d=r.filter,n=d("",n)):isArray$1(r.filter)&&(d=r.filter,c=d);var g=[];if(typeof n!="object"||n===null)return"";var o;t&&t.arrayFormat in arrayPrefixGenerators?o=t.arrayFormat:t&&"indices"in t?o=t.indices?"indices":"repeat":o="indices";var v=arrayPrefixGenerators[o];if(t&&"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var x=v==="comma"&&t&&t.commaRoundTrip;c||(c=Object.keys(n)),r.sort&&c.sort(r.sort);for(var E=getSideChannel(),k=0;k<c.length;++k){var S=c[k];r.skipNulls&&n[S]===null||pushToArray(g,stringify$1(n[S],S,v,x,r.strictNullHandling,r.skipNulls,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,E))}var N=g.join(r.delimiter),L=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?L+="utf8=%26%2310003%3B&":L+="utf8=%E2%9C%93&"),N.length>0?L+N:""},utils$2=utils$4,has=Object.prototype.hasOwnProperty,isArray=Array.isArray,defaults={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:utils$2.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},interpretNumericEntities=function(e){return e.replace(/&#(\d+);/g,function(t,n){return String.fromCharCode(parseInt(n,10))})},parseArrayValue=function(e,t){return e&&typeof e=="string"&&t.comma&&e.indexOf(",")>-1?e.split(","):e},isoSentinel="utf8=%26%2310003%3B",charsetSentinel="utf8=%E2%9C%93",parseValues=function(t,n){var r={},c=n.ignoreQueryPrefix?t.replace(/^\?/,""):t,d=n.parameterLimit===1/0?void 0:n.parameterLimit,g=c.split(n.delimiter,d),o=-1,v,x=n.charset;if(n.charsetSentinel)for(v=0;v<g.length;++v)g[v].indexOf("utf8=")===0&&(g[v]===charsetSentinel?x="utf-8":g[v]===isoSentinel&&(x="iso-8859-1"),o=v,v=g.length);for(v=0;v<g.length;++v)if(v!==o){var E=g[v],k=E.indexOf("]="),S=k===-1?E.indexOf("="):k+1,N,L;S===-1?(N=n.decoder(E,defaults.decoder,x,"key"),L=n.strictNullHandling?null:""):(N=n.decoder(E.slice(0,S),defaults.decoder,x,"key"),L=utils$2.maybeMap(parseArrayValue(E.slice(S+1),n),function(P){return n.decoder(P,defaults.decoder,x,"value")})),L&&n.interpretNumericEntities&&x==="iso-8859-1"&&(L=interpretNumericEntities(L)),E.indexOf("[]=")>-1&&(L=isArray(L)?[L]:L),has.call(r,N)?r[N]=utils$2.combine(r[N],L):r[N]=L}return r},parseObject=function(e,t,n,r){for(var c=r?t:parseArrayValue(t,n),d=e.length-1;d>=0;--d){var g,o=e[d];if(o==="[]"&&n.parseArrays)g=[].concat(c);else{g=n.plainObjects?Object.create(null):{};var v=o.charAt(0)==="["&&o.charAt(o.length-1)==="]"?o.slice(1,-1):o,x=parseInt(v,10);!n.parseArrays&&v===""?g={0:c}:!isNaN(x)&&o!==v&&String(x)===v&&x>=0&&n.parseArrays&&x<=n.arrayLimit?(g=[],g[x]=c):v!=="__proto__"&&(g[v]=c)}c=g}return c},parseKeys=function(t,n,r,c){if(!!t){var d=r.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,g=/(\[[^[\]]*])/,o=/(\[[^[\]]*])/g,v=r.depth>0&&g.exec(d),x=v?d.slice(0,v.index):d,E=[];if(x){if(!r.plainObjects&&has.call(Object.prototype,x)&&!r.allowPrototypes)return;E.push(x)}for(var k=0;r.depth>0&&(v=o.exec(d))!==null&&k<r.depth;){if(k+=1,!r.plainObjects&&has.call(Object.prototype,v[1].slice(1,-1))&&!r.allowPrototypes)return;E.push(v[1])}return v&&E.push("["+d.slice(v.index)+"]"),parseObject(E,n,r,c)}},normalizeParseOptions=function(t){if(!t)return defaults;if(t.decoder!==null&&t.decoder!==void 0&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=typeof t.charset>"u"?defaults.charset:t.charset;return{allowDots:typeof t.allowDots>"u"?defaults.allowDots:!!t.allowDots,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:defaults.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:defaults.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:defaults.arrayLimit,charset:n,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:defaults.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:defaults.comma,decoder:typeof t.decoder=="function"?t.decoder:defaults.decoder,delimiter:typeof t.delimiter=="string"||utils$2.isRegExp(t.delimiter)?t.delimiter:defaults.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:defaults.depth,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:defaults.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:defaults.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:defaults.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:defaults.strictNullHandling}},parse$2=function(e,t){var n=normalizeParseOptions(t);if(e===""||e===null||typeof e>"u")return n.plainObjects?Object.create(null):{};for(var r=typeof e=="string"?parseValues(e,n):e,c=n.plainObjects?Object.create(null):{},d=Object.keys(r),g=0;g<d.length;++g){var o=d[g],v=parseKeys(o,r[o],n,typeof e=="string");c=utils$2.merge(c,v,n)}return n.allowSparse===!0?c:utils$2.compact(c)},stringify=stringify_1,parse$1=parse$2,formats=formats$3,lib$1={formats,parse:parse$1,stringify},lib={exports:{}},server={},canPromise$1=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},qrcode={},utils$1={};let toSJISFunction;const CODEWORDS_COUNT=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];utils$1.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};utils$1.getSymbolTotalCodewords=function(t){return CODEWORDS_COUNT[t]};utils$1.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};utils$1.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');toSJISFunction=t};utils$1.isKanjiModeEnabled=function(){return typeof toSJISFunction<"u"};utils$1.toSJIS=function(t){return toSJISFunction(t)};var errorCorrectionLevel={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+n)}}e.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},e.from=function(r,c){if(e.isValid(r))return r;try{return t(r)}catch{return c}}})(errorCorrectionLevel);function BitBuffer$1(){this.buffer=[],this.length=0}BitBuffer$1.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var bitBuffer=BitBuffer$1;function BitMatrix$1(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}BitMatrix$1.prototype.set=function(e,t,n,r){const c=e*this.size+t;this.data[c]=n,r&&(this.reservedBit[c]=!0)};BitMatrix$1.prototype.get=function(e,t){return this.data[e*this.size+t]};BitMatrix$1.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n};BitMatrix$1.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var bitMatrix=BitMatrix$1,alignmentPattern={};(function(e){const t=utils$1.getSymbolSize;e.getRowColCoords=function(r){if(r===1)return[];const c=Math.floor(r/7)+2,d=t(r),g=d===145?26:Math.ceil((d-13)/(2*c-2))*2,o=[d-7];for(let v=1;v<c-1;v++)o[v]=o[v-1]-g;return o.push(6),o.reverse()},e.getPositions=function(r){const c=[],d=e.getRowColCoords(r),g=d.length;for(let o=0;o<g;o++)for(let v=0;v<g;v++)o===0&&v===0||o===0&&v===g-1||o===g-1&&v===0||c.push([d[o],d[v]]);return c}})(alignmentPattern);var finderPattern={};const getSymbolSize=utils$1.getSymbolSize,FINDER_PATTERN_SIZE=7;finderPattern.getPositions=function(t){const n=getSymbolSize(t);return[[0,0],[n-FINDER_PATTERN_SIZE,0],[0,n-FINDER_PATTERN_SIZE]]};var maskPattern={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(c){return c!=null&&c!==""&&!isNaN(c)&&c>=0&&c<=7},e.from=function(c){return e.isValid(c)?parseInt(c,10):void 0},e.getPenaltyN1=function(c){const d=c.size;let g=0,o=0,v=0,x=null,E=null;for(let k=0;k<d;k++){o=v=0,x=E=null;for(let S=0;S<d;S++){let N=c.get(k,S);N===x?o++:(o>=5&&(g+=t.N1+(o-5)),x=N,o=1),N=c.get(S,k),N===E?v++:(v>=5&&(g+=t.N1+(v-5)),E=N,v=1)}o>=5&&(g+=t.N1+(o-5)),v>=5&&(g+=t.N1+(v-5))}return g},e.getPenaltyN2=function(c){const d=c.size;let g=0;for(let o=0;o<d-1;o++)for(let v=0;v<d-1;v++){const x=c.get(o,v)+c.get(o,v+1)+c.get(o+1,v)+c.get(o+1,v+1);(x===4||x===0)&&g++}return g*t.N2},e.getPenaltyN3=function(c){const d=c.size;let g=0,o=0,v=0;for(let x=0;x<d;x++){o=v=0;for(let E=0;E<d;E++)o=o<<1&2047|c.get(x,E),E>=10&&(o===1488||o===93)&&g++,v=v<<1&2047|c.get(E,x),E>=10&&(v===1488||v===93)&&g++}return g*t.N3},e.getPenaltyN4=function(c){let d=0;const g=c.data.length;for(let v=0;v<g;v++)d+=c.data[v];return Math.abs(Math.ceil(d*100/g/5)-10)*t.N4};function n(r,c,d){switch(r){case e.Patterns.PATTERN000:return(c+d)%2===0;case e.Patterns.PATTERN001:return c%2===0;case e.Patterns.PATTERN010:return d%3===0;case e.Patterns.PATTERN011:return(c+d)%3===0;case e.Patterns.PATTERN100:return(Math.floor(c/2)+Math.floor(d/3))%2===0;case e.Patterns.PATTERN101:return c*d%2+c*d%3===0;case e.Patterns.PATTERN110:return(c*d%2+c*d%3)%2===0;case e.Patterns.PATTERN111:return(c*d%3+(c+d)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}e.applyMask=function(c,d){const g=d.size;for(let o=0;o<g;o++)for(let v=0;v<g;v++)d.isReserved(v,o)||d.xor(v,o,n(c,v,o))},e.getBestMask=function(c,d){const g=Object.keys(e.Patterns).length;let o=0,v=1/0;for(let x=0;x<g;x++){d(x),e.applyMask(x,c);const E=e.getPenaltyN1(c)+e.getPenaltyN2(c)+e.getPenaltyN3(c)+e.getPenaltyN4(c);e.applyMask(x,c),E<v&&(v=E,o=x)}return o}})(maskPattern);var errorCorrectionCode={};const ECLevel$1=errorCorrectionLevel,EC_BLOCKS_TABLE=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],EC_CODEWORDS_TABLE=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];errorCorrectionCode.getBlocksCount=function(t,n){switch(n){case ECLevel$1.L:return EC_BLOCKS_TABLE[(t-1)*4+0];case ECLevel$1.M:return EC_BLOCKS_TABLE[(t-1)*4+1];case ECLevel$1.Q:return EC_BLOCKS_TABLE[(t-1)*4+2];case ECLevel$1.H:return EC_BLOCKS_TABLE[(t-1)*4+3];default:return}};errorCorrectionCode.getTotalCodewordsCount=function(t,n){switch(n){case ECLevel$1.L:return EC_CODEWORDS_TABLE[(t-1)*4+0];case ECLevel$1.M:return EC_CODEWORDS_TABLE[(t-1)*4+1];case ECLevel$1.Q:return EC_CODEWORDS_TABLE[(t-1)*4+2];case ECLevel$1.H:return EC_CODEWORDS_TABLE[(t-1)*4+3];default:return}};var polynomial={},galoisField={};const EXP_TABLE=new Uint8Array(512),LOG_TABLE=new Uint8Array(256);(function(){let t=1;for(let n=0;n<255;n++)EXP_TABLE[n]=t,LOG_TABLE[t]=n,t<<=1,t&256&&(t^=285);for(let n=255;n<512;n++)EXP_TABLE[n]=EXP_TABLE[n-255]})();galoisField.log=function(t){if(t<1)throw new Error("log("+t+")");return LOG_TABLE[t]};galoisField.exp=function(t){return EXP_TABLE[t]};galoisField.mul=function(t,n){return t===0||n===0?0:EXP_TABLE[LOG_TABLE[t]+LOG_TABLE[n]]};(function(e){const t=galoisField;e.mul=function(r,c){const d=new Uint8Array(r.length+c.length-1);for(let g=0;g<r.length;g++)for(let o=0;o<c.length;o++)d[g+o]^=t.mul(r[g],c[o]);return d},e.mod=function(r,c){let d=new Uint8Array(r);for(;d.length-c.length>=0;){const g=d[0];for(let v=0;v<c.length;v++)d[v]^=t.mul(c[v],g);let o=0;for(;o<d.length&&d[o]===0;)o++;d=d.slice(o)}return d},e.generateECPolynomial=function(r){let c=new Uint8Array([1]);for(let d=0;d<r;d++)c=e.mul(c,new Uint8Array([1,t.exp(d)]));return c}})(polynomial);const Polynomial=polynomial;function ReedSolomonEncoder$1(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}ReedSolomonEncoder$1.prototype.initialize=function(t){this.degree=t,this.genPoly=Polynomial.generateECPolynomial(this.degree)};ReedSolomonEncoder$1.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(t.length+this.degree);n.set(t);const r=Polynomial.mod(n,this.genPoly),c=this.degree-r.length;if(c>0){const d=new Uint8Array(this.degree);return d.set(r,c),d}return r};var reedSolomonEncoder=ReedSolomonEncoder$1,version={},mode={},versionCheck={};versionCheck.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var regex={};const numeric="[0-9]+",alphanumeric="[A-Z $%*+\\-./:]+";let kanji="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";kanji=kanji.replace(/u/g,"\\u");const byte="(?:(?![A-Z0-9 $%*+\\-./:]|"+kanji+`)(?:.|[\r
]))+`;regex.KANJI=new RegExp(kanji,"g");regex.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");regex.BYTE=new RegExp(byte,"g");regex.NUMERIC=new RegExp(numeric,"g");regex.ALPHANUMERIC=new RegExp(alphanumeric,"g");const TEST_KANJI=new RegExp("^"+kanji+"$"),TEST_NUMERIC=new RegExp("^"+numeric+"$"),TEST_ALPHANUMERIC=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");regex.testKanji=function(t){return TEST_KANJI.test(t)};regex.testNumeric=function(t){return TEST_NUMERIC.test(t)};regex.testAlphanumeric=function(t){return TEST_ALPHANUMERIC.test(t)};(function(e){const t=versionCheck,n=regex;e.NUMERIC={id:"Numeric",bit:1<<0,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:1<<1,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:1<<2,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:1<<3,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(d,g){if(!d.ccBits)throw new Error("Invalid mode: "+d);if(!t.isValid(g))throw new Error("Invalid version: "+g);return g>=1&&g<10?d.ccBits[0]:g<27?d.ccBits[1]:d.ccBits[2]},e.getBestModeForData=function(d){return n.testNumeric(d)?e.NUMERIC:n.testAlphanumeric(d)?e.ALPHANUMERIC:n.testKanji(d)?e.KANJI:e.BYTE},e.toString=function(d){if(d&&d.id)return d.id;throw new Error("Invalid mode")},e.isValid=function(d){return d&&d.bit&&d.ccBits};function r(c){if(typeof c!="string")throw new Error("Param is not a string");switch(c.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+c)}}e.from=function(d,g){if(e.isValid(d))return d;try{return r(d)}catch{return g}}})(mode);(function(e){const t=utils$1,n=errorCorrectionCode,r=errorCorrectionLevel,c=mode,d=versionCheck,g=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,o=t.getBCHDigit(g);function v(S,N,L){for(let P=1;P<=40;P++)if(N<=e.getCapacity(P,L,S))return P}function x(S,N){return c.getCharCountIndicator(S,N)+4}function E(S,N){let L=0;return S.forEach(function(P){const O=x(P.mode,N);L+=O+P.getBitsLength()}),L}function k(S,N){for(let L=1;L<=40;L++)if(E(S,L)<=e.getCapacity(L,N,c.MIXED))return L}e.from=function(N,L){return d.isValid(N)?parseInt(N,10):L},e.getCapacity=function(N,L,P){if(!d.isValid(N))throw new Error("Invalid QR Code version");typeof P>"u"&&(P=c.BYTE);const O=t.getSymbolTotalCodewords(N),V=n.getTotalCodewordsCount(N,L),z=(O-V)*8;if(P===c.MIXED)return z;const U=z-x(P,N);switch(P){case c.NUMERIC:return Math.floor(U/10*3);case c.ALPHANUMERIC:return Math.floor(U/11*2);case c.KANJI:return Math.floor(U/13);case c.BYTE:default:return Math.floor(U/8)}},e.getBestVersionForData=function(N,L){let P;const O=r.from(L,r.M);if(Array.isArray(N)){if(N.length>1)return k(N,O);if(N.length===0)return 1;P=N[0]}else P=N;return v(P.mode,P.getLength(),O)},e.getEncodedBits=function(N){if(!d.isValid(N)||N<7)throw new Error("Invalid QR Code version");let L=N<<12;for(;t.getBCHDigit(L)-o>=0;)L^=g<<t.getBCHDigit(L)-o;return N<<12|L}})(version);var formatInfo={};const Utils$3=utils$1,G15=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,G15_MASK=1<<14|1<<12|1<<10|1<<4|1<<1,G15_BCH=Utils$3.getBCHDigit(G15);formatInfo.getEncodedBits=function(t,n){const r=t.bit<<3|n;let c=r<<10;for(;Utils$3.getBCHDigit(c)-G15_BCH>=0;)c^=G15<<Utils$3.getBCHDigit(c)-G15_BCH;return(r<<10|c)^G15_MASK};var segments={};const Mode$4=mode;function NumericData(e){this.mode=Mode$4.NUMERIC,this.data=e.toString()}NumericData.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};NumericData.prototype.getLength=function(){return this.data.length};NumericData.prototype.getBitsLength=function(){return NumericData.getBitsLength(this.data.length)};NumericData.prototype.write=function(t){let n,r,c;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),c=parseInt(r,10),t.put(c,10);const d=this.data.length-n;d>0&&(r=this.data.substr(n),c=parseInt(r,10),t.put(c,d*3+1))};var numericData=NumericData;const Mode$3=mode,ALPHA_NUM_CHARS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function AlphanumericData(e){this.mode=Mode$3.ALPHANUMERIC,this.data=e}AlphanumericData.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};AlphanumericData.prototype.getLength=function(){return this.data.length};AlphanumericData.prototype.getBitsLength=function(){return AlphanumericData.getBitsLength(this.data.length)};AlphanumericData.prototype.write=function(t){let n;for(n=0;n+2<=this.data.length;n+=2){let r=ALPHA_NUM_CHARS.indexOf(this.data[n])*45;r+=ALPHA_NUM_CHARS.indexOf(this.data[n+1]),t.put(r,11)}this.data.length%2&&t.put(ALPHA_NUM_CHARS.indexOf(this.data[n]),6)};var alphanumericData=AlphanumericData,encodeUtf8$1=function(t){for(var n=[],r=t.length,c=0;c<r;c++){var d=t.charCodeAt(c);if(d>=55296&&d<=56319&&r>c+1){var g=t.charCodeAt(c+1);g>=56320&&g<=57343&&(d=(d-55296)*1024+g-56320+65536,c+=1)}if(d<128){n.push(d);continue}if(d<2048){n.push(d>>6|192),n.push(d&63|128);continue}if(d<55296||d>=57344&&d<65536){n.push(d>>12|224),n.push(d>>6&63|128),n.push(d&63|128);continue}if(d>=65536&&d<=1114111){n.push(d>>18|240),n.push(d>>12&63|128),n.push(d>>6&63|128),n.push(d&63|128);continue}n.push(239,191,189)}return new Uint8Array(n).buffer};const encodeUtf8=encodeUtf8$1,Mode$2=mode;function ByteData(e){this.mode=Mode$2.BYTE,typeof e=="string"&&(e=encodeUtf8(e)),this.data=new Uint8Array(e)}ByteData.getBitsLength=function(t){return t*8};ByteData.prototype.getLength=function(){return this.data.length};ByteData.prototype.getBitsLength=function(){return ByteData.getBitsLength(this.data.length)};ByteData.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)};var byteData=ByteData;const Mode$1=mode,Utils$2=utils$1;function KanjiData(e){this.mode=Mode$1.KANJI,this.data=e}KanjiData.getBitsLength=function(t){return t*13};KanjiData.prototype.getLength=function(){return this.data.length};KanjiData.prototype.getBitsLength=function(){return KanjiData.getBitsLength(this.data.length)};KanjiData.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=Utils$2.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),e.put(n,13)}};var kanjiData=KanjiData,dijkstra={exports:{}};(function(e){var t={single_source_shortest_paths:function(n,r,c){var d={},g={};g[r]=0;var o=t.PriorityQueue.make();o.push(r,0);for(var v,x,E,k,S,N,L,P,O;!o.empty();){v=o.pop(),x=v.value,k=v.cost,S=n[x]||{};for(E in S)S.hasOwnProperty(E)&&(N=S[E],L=k+N,P=g[E],O=typeof g[E]>"u",(O||P>L)&&(g[E]=L,o.push(E,L),d[E]=x))}if(typeof c<"u"&&typeof g[c]>"u"){var V=["Could not find a path from ",r," to ",c,"."].join("");throw new Error(V)}return d},extract_shortest_path_from_predecessor_list:function(n,r){for(var c=[],d=r;d;)c.push(d),n[d],d=n[d];return c.reverse(),c},find_path:function(n,r,c){var d=t.single_source_shortest_paths(n,r,c);return t.extract_shortest_path_from_predecessor_list(d,c)},PriorityQueue:{make:function(n){var r=t.PriorityQueue,c={},d;n=n||{};for(d in r)r.hasOwnProperty(d)&&(c[d]=r[d]);return c.queue=[],c.sorter=n.sorter||r.default_sorter,c},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var c={value:n,cost:r};this.queue.push(c),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(dijkstra);(function(e){const t=mode,n=numericData,r=alphanumericData,c=byteData,d=kanjiData,g=regex,o=utils$1,v=dijkstra.exports;function x(V){return unescape(encodeURIComponent(V)).length}function E(V,z,U){const W=[];let Z;for(;(Z=V.exec(U))!==null;)W.push({data:Z[0],index:Z.index,mode:z,length:Z[0].length});return W}function k(V){const z=E(g.NUMERIC,t.NUMERIC,V),U=E(g.ALPHANUMERIC,t.ALPHANUMERIC,V);let W,Z;return o.isKanjiModeEnabled()?(W=E(g.BYTE,t.BYTE,V),Z=E(g.KANJI,t.KANJI,V)):(W=E(g.BYTE_KANJI,t.BYTE,V),Z=[]),z.concat(U,W,Z).sort(function(oe,se){return oe.index-se.index}).map(function(oe){return{data:oe.data,mode:oe.mode,length:oe.length}})}function S(V,z){switch(z){case t.NUMERIC:return n.getBitsLength(V);case t.ALPHANUMERIC:return r.getBitsLength(V);case t.KANJI:return d.getBitsLength(V);case t.BYTE:return c.getBitsLength(V)}}function N(V){return V.reduce(function(z,U){const W=z.length-1>=0?z[z.length-1]:null;return W&&W.mode===U.mode?(z[z.length-1].data+=U.data,z):(z.push(U),z)},[])}function L(V){const z=[];for(let U=0;U<V.length;U++){const W=V[U];switch(W.mode){case t.NUMERIC:z.push([W,{data:W.data,mode:t.ALPHANUMERIC,length:W.length},{data:W.data,mode:t.BYTE,length:W.length}]);break;case t.ALPHANUMERIC:z.push([W,{data:W.data,mode:t.BYTE,length:W.length}]);break;case t.KANJI:z.push([W,{data:W.data,mode:t.BYTE,length:x(W.data)}]);break;case t.BYTE:z.push([{data:W.data,mode:t.BYTE,length:x(W.data)}])}}return z}function P(V,z){const U={},W={start:{}};let Z=["start"];for(let re=0;re<V.length;re++){const oe=V[re],se=[];for(let ce=0;ce<oe.length;ce++){const me=oe[ce],we=""+re+ce;se.push(we),U[we]={node:me,lastCount:0},W[we]={};for(let ae=0;ae<Z.length;ae++){const Ce=Z[ae];U[Ce]&&U[Ce].node.mode===me.mode?(W[Ce][we]=S(U[Ce].lastCount+me.length,me.mode)-S(U[Ce].lastCount,me.mode),U[Ce].lastCount+=me.length):(U[Ce]&&(U[Ce].lastCount=me.length),W[Ce][we]=S(me.length,me.mode)+4+t.getCharCountIndicator(me.mode,z))}}Z=se}for(let re=0;re<Z.length;re++)W[Z[re]].end=0;return{map:W,table:U}}function O(V,z){let U;const W=t.getBestModeForData(V);if(U=t.from(z,W),U!==t.BYTE&&U.bit<W.bit)throw new Error('"'+V+'" cannot be encoded with mode '+t.toString(U)+`.
 Suggested mode is: `+t.toString(W));switch(U===t.KANJI&&!o.isKanjiModeEnabled()&&(U=t.BYTE),U){case t.NUMERIC:return new n(V);case t.ALPHANUMERIC:return new r(V);case t.KANJI:return new d(V);case t.BYTE:return new c(V)}}e.fromArray=function(z){return z.reduce(function(U,W){return typeof W=="string"?U.push(O(W,null)):W.data&&U.push(O(W.data,W.mode)),U},[])},e.fromString=function(z,U){const W=k(z,o.isKanjiModeEnabled()),Z=L(W),re=P(Z,U),oe=v.find_path(re.map,"start","end"),se=[];for(let ce=1;ce<oe.length-1;ce++)se.push(re.table[oe[ce]].node);return e.fromArray(N(se))},e.rawSplit=function(z){return e.fromArray(k(z,o.isKanjiModeEnabled()))}})(segments);const Utils$1=utils$1,ECLevel=errorCorrectionLevel,BitBuffer=bitBuffer,BitMatrix=bitMatrix,AlignmentPattern=alignmentPattern,FinderPattern=finderPattern,MaskPattern=maskPattern,ECCode=errorCorrectionCode,ReedSolomonEncoder=reedSolomonEncoder,Version=version,FormatInfo=formatInfo,Mode=mode,Segments=segments;function setupFinderPattern(e,t){const n=e.size,r=FinderPattern.getPositions(t);for(let c=0;c<r.length;c++){const d=r[c][0],g=r[c][1];for(let o=-1;o<=7;o++)if(!(d+o<=-1||n<=d+o))for(let v=-1;v<=7;v++)g+v<=-1||n<=g+v||(o>=0&&o<=6&&(v===0||v===6)||v>=0&&v<=6&&(o===0||o===6)||o>=2&&o<=4&&v>=2&&v<=4?e.set(d+o,g+v,!0,!0):e.set(d+o,g+v,!1,!0))}}function setupTimingPattern(e){const t=e.size;for(let n=8;n<t-8;n++){const r=n%2===0;e.set(n,6,r,!0),e.set(6,n,r,!0)}}function setupAlignmentPattern(e,t){const n=AlignmentPattern.getPositions(t);for(let r=0;r<n.length;r++){const c=n[r][0],d=n[r][1];for(let g=-2;g<=2;g++)for(let o=-2;o<=2;o++)g===-2||g===2||o===-2||o===2||g===0&&o===0?e.set(c+g,d+o,!0,!0):e.set(c+g,d+o,!1,!0)}}function setupVersionInfo(e,t){const n=e.size,r=Version.getEncodedBits(t);let c,d,g;for(let o=0;o<18;o++)c=Math.floor(o/3),d=o%3+n-8-3,g=(r>>o&1)===1,e.set(c,d,g,!0),e.set(d,c,g,!0)}function setupFormatInfo(e,t,n){const r=e.size,c=FormatInfo.getEncodedBits(t,n);let d,g;for(d=0;d<15;d++)g=(c>>d&1)===1,d<6?e.set(d,8,g,!0):d<8?e.set(d+1,8,g,!0):e.set(r-15+d,8,g,!0),d<8?e.set(8,r-d-1,g,!0):d<9?e.set(8,15-d-1+1,g,!0):e.set(8,15-d-1,g,!0);e.set(r-8,8,1,!0)}function setupData(e,t){const n=e.size;let r=-1,c=n-1,d=7,g=0;for(let o=n-1;o>0;o-=2)for(o===6&&o--;;){for(let v=0;v<2;v++)if(!e.isReserved(c,o-v)){let x=!1;g<t.length&&(x=(t[g]>>>d&1)===1),e.set(c,o-v,x),d--,d===-1&&(g++,d=7)}if(c+=r,c<0||n<=c){c-=r,r=-r;break}}}function createData(e,t,n){const r=new BitBuffer;n.forEach(function(v){r.put(v.mode.bit,4),r.put(v.getLength(),Mode.getCharCountIndicator(v.mode,e)),v.write(r)});const c=Utils$1.getSymbolTotalCodewords(e),d=ECCode.getTotalCodewordsCount(e,t),g=(c-d)*8;for(r.getLengthInBits()+4<=g&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const o=(g-r.getLengthInBits())/8;for(let v=0;v<o;v++)r.put(v%2?17:236,8);return createCodewords(r,e,t)}function createCodewords(e,t,n){const r=Utils$1.getSymbolTotalCodewords(t),c=ECCode.getTotalCodewordsCount(t,n),d=r-c,g=ECCode.getBlocksCount(t,n),o=r%g,v=g-o,x=Math.floor(r/g),E=Math.floor(d/g),k=E+1,S=x-E,N=new ReedSolomonEncoder(S);let L=0;const P=new Array(g),O=new Array(g);let V=0;const z=new Uint8Array(e.buffer);for(let oe=0;oe<g;oe++){const se=oe<v?E:k;P[oe]=z.slice(L,L+se),O[oe]=N.encode(P[oe]),L+=se,V=Math.max(V,se)}const U=new Uint8Array(r);let W=0,Z,re;for(Z=0;Z<V;Z++)for(re=0;re<g;re++)Z<P[re].length&&(U[W++]=P[re][Z]);for(Z=0;Z<S;Z++)for(re=0;re<g;re++)U[W++]=O[re][Z];return U}function createSymbol(e,t,n,r){let c;if(Array.isArray(e))c=Segments.fromArray(e);else if(typeof e=="string"){let x=t;if(!x){const E=Segments.rawSplit(e);x=Version.getBestVersionForData(E,n)}c=Segments.fromString(e,x||40)}else throw new Error("Invalid data");const d=Version.getBestVersionForData(c,n);if(!d)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=d;else if(t<d)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+d+`.
`);const g=createData(t,n,c),o=Utils$1.getSymbolSize(t),v=new BitMatrix(o);return setupFinderPattern(v,t),setupTimingPattern(v),setupAlignmentPattern(v,t),setupFormatInfo(v,n,0),t>=7&&setupVersionInfo(v,t),setupData(v,g),isNaN(r)&&(r=MaskPattern.getBestMask(v,setupFormatInfo.bind(null,v,n))),MaskPattern.applyMask(r,v),setupFormatInfo(v,n,r),{modules:v,version:t,errorCorrectionLevel:n,maskPattern:r,segments:c}}qrcode.create=function(t,n){if(typeof t>"u"||t==="")throw new Error("No input text");let r=ECLevel.M,c,d;return typeof n<"u"&&(r=ECLevel.from(n.errorCorrectionLevel,ECLevel.M),c=Version.from(n.version),d=MaskPattern.from(n.maskPattern),n.toSJISFunc&&Utils$1.setToSJISFunction(n.toSJISFunc)),createSymbol(t,c,r,d)};var png$1={},png={},parserAsync={exports:{}},chunkstream={exports:{}};let util$4=require$$0__default$1.default,Stream$2=stream__default.default,ChunkStream$2=chunkstream.exports=function(){Stream$2.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};util$4.inherits(ChunkStream$2,Stream$2);ChunkStream$2.prototype.read=function(e,t){this._reads.push({length:Math.abs(e),allowLess:e<0,func:t}),process.nextTick(function(){this._process(),this._paused&&this._reads&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}.bind(this))};ChunkStream$2.prototype.write=function(e,t){if(!this.writable)return this.emit("error",new Error("Stream not writable")),!1;let n;return Buffer.isBuffer(e)?n=e:n=Buffer.from(e,t||this._encoding),this._buffers.push(n),this._buffered+=n.length,this._process(),this._reads&&this._reads.length===0&&(this._paused=!0),this.writable&&!this._paused};ChunkStream$2.prototype.end=function(e,t){e&&this.write(e,t),this.writable=!1,this._buffers&&(this._buffers.length===0?this._end():(this._buffers.push(null),this._process()))};ChunkStream$2.prototype.destroySoon=ChunkStream$2.prototype.end;ChunkStream$2.prototype._end=function(){this._reads.length>0&&this.emit("error",new Error("Unexpected end of input")),this.destroy()};ChunkStream$2.prototype.destroy=function(){!this._buffers||(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))};ChunkStream$2.prototype._processReadAllowingLess=function(e){this._reads.shift();let t=this._buffers[0];t.length>e.length?(this._buffered-=e.length,this._buffers[0]=t.slice(e.length),e.func.call(this,t.slice(0,e.length))):(this._buffered-=t.length,this._buffers.shift(),e.func.call(this,t))};ChunkStream$2.prototype._processRead=function(e){this._reads.shift();let t=0,n=0,r=Buffer.alloc(e.length);for(;t<e.length;){let c=this._buffers[n++],d=Math.min(c.length,e.length-t);c.copy(r,t,0,d),t+=d,d!==c.length&&(this._buffers[--n]=c.slice(d))}n>0&&this._buffers.splice(0,n),this._buffered-=e.length,e.func.call(this,r)};ChunkStream$2.prototype._process=function(){try{for(;this._buffered>0&&this._reads&&this._reads.length>0;){let e=this._reads[0];if(e.allowLess)this._processReadAllowingLess(e);else if(this._buffered>=e.length)this._processRead(e);else break}this._buffers&&!this.writable&&this._end()}catch(e){this.emit("error",e)}};var filterParseAsync={exports:{}},filterParse={exports:{}},interlace={};let imagePasses=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];interlace.getImagePasses=function(e,t){let n=[],r=e%8,c=t%8,d=(e-r)/8,g=(t-c)/8;for(let o=0;o<imagePasses.length;o++){let v=imagePasses[o],x=d*v.x.length,E=g*v.y.length;for(let k=0;k<v.x.length&&v.x[k]<r;k++)x++;for(let k=0;k<v.y.length&&v.y[k]<c;k++)E++;x>0&&E>0&&n.push({width:x,height:E,index:o})}return n};interlace.getInterlaceIterator=function(e){return function(t,n,r){let c=t%imagePasses[r].x.length,d=(t-c)/imagePasses[r].x.length*8+imagePasses[r].x[c],g=n%imagePasses[r].y.length,o=(n-g)/imagePasses[r].y.length*8+imagePasses[r].y[g];return d*4+o*e*4}};var paethPredictor$2=function(t,n,r){let c=t+n-r,d=Math.abs(c-t),g=Math.abs(c-n),o=Math.abs(c-r);return d<=g&&d<=o?t:g<=o?n:r};let interlaceUtils$1=interlace,paethPredictor$1=paethPredictor$2;function getByteWidth(e,t,n){let r=e*t;return n!==8&&(r=Math.ceil(r/(8/n))),r}let Filter$2=filterParse.exports=function(e,t){let n=e.width,r=e.height,c=e.interlace,d=e.bpp,g=e.depth;if(this.read=t.read,this.write=t.write,this.complete=t.complete,this._imageIndex=0,this._images=[],c){let o=interlaceUtils$1.getImagePasses(n,r);for(let v=0;v<o.length;v++)this._images.push({byteWidth:getByteWidth(o[v].width,d,g),height:o[v].height,lineIndex:0})}else this._images.push({byteWidth:getByteWidth(n,d,g),height:r,lineIndex:0});g===8?this._xComparison=d:g===16?this._xComparison=d*2:this._xComparison=1};Filter$2.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))};Filter$2.prototype._unFilterType1=function(e,t,n){let r=this._xComparison,c=r-1;for(let d=0;d<n;d++){let g=e[1+d],o=d>c?t[d-r]:0;t[d]=g+o}};Filter$2.prototype._unFilterType2=function(e,t,n){let r=this._lastLine;for(let c=0;c<n;c++){let d=e[1+c],g=r?r[c]:0;t[c]=d+g}};Filter$2.prototype._unFilterType3=function(e,t,n){let r=this._xComparison,c=r-1,d=this._lastLine;for(let g=0;g<n;g++){let o=e[1+g],v=d?d[g]:0,x=g>c?t[g-r]:0,E=Math.floor((x+v)/2);t[g]=o+E}};Filter$2.prototype._unFilterType4=function(e,t,n){let r=this._xComparison,c=r-1,d=this._lastLine;for(let g=0;g<n;g++){let o=e[1+g],v=d?d[g]:0,x=g>c?t[g-r]:0,E=g>c&&d?d[g-r]:0,k=paethPredictor$1(x,v,E);t[g]=o+k}};Filter$2.prototype._reverseFilterLine=function(e){let t=e[0],n,r=this._images[this._imageIndex],c=r.byteWidth;if(t===0)n=e.slice(1,c+1);else switch(n=Buffer.alloc(c),t){case 1:this._unFilterType1(e,n,c);break;case 2:this._unFilterType2(e,n,c);break;case 3:this._unFilterType3(e,n,c);break;case 4:this._unFilterType4(e,n,c);break;default:throw new Error("Unrecognised filter type - "+t)}this.write(n),r.lineIndex++,r.lineIndex>=r.height?(this._lastLine=null,this._imageIndex++,r=this._images[this._imageIndex]):this._lastLine=n,r?this.read(r.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())};let util$3=require$$0__default$1.default,ChunkStream$1=chunkstream.exports,Filter$1=filterParse.exports,FilterAsync$1=filterParseAsync.exports=function(e){ChunkStream$1.call(this);let t=[],n=this;this._filter=new Filter$1(e,{read:this.read.bind(this),write:function(r){t.push(r)},complete:function(){n.emit("complete",Buffer.concat(t))}}),this._filter.start()};util$3.inherits(FilterAsync$1,ChunkStream$1);var parser={exports:{}},constants$5={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5},crc={exports:{}};let crcTable=[];(function(){for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t&1?t=3988292384^t>>>1:t=t>>>1;crcTable[e]=t}})();let CrcCalculator$1=crc.exports=function(){this._crc=-1};CrcCalculator$1.prototype.write=function(e){for(let t=0;t<e.length;t++)this._crc=crcTable[(this._crc^e[t])&255]^this._crc>>>8;return!0};CrcCalculator$1.prototype.crc32=function(){return this._crc^-1};CrcCalculator$1.crc32=function(e){let t=-1;for(let n=0;n<e.length;n++)t=crcTable[(t^e[n])&255]^t>>>8;return t^-1};let constants$4=constants$5,CrcCalculator=crc.exports,Parser$3=parser.exports=function(e,t){this._options=e,e.checkCRC=e.checkCRC!==!1,this._hasIHDR=!1,this._hasIEND=!1,this._emittedHeadersFinished=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[constants$4.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[constants$4.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[constants$4.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[constants$4.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[constants$4.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[constants$4.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=t.read,this.error=t.error,this.metadata=t.metadata,this.gamma=t.gamma,this.transColor=t.transColor,this.palette=t.palette,this.parsed=t.parsed,this.inflateData=t.inflateData,this.finished=t.finished,this.simpleTransparency=t.simpleTransparency,this.headersFinished=t.headersFinished||function(){}};Parser$3.prototype.start=function(){this.read(constants$4.PNG_SIGNATURE.length,this._parseSignature.bind(this))};Parser$3.prototype._parseSignature=function(e){let t=constants$4.PNG_SIGNATURE;for(let n=0;n<t.length;n++)if(e[n]!==t[n]){this.error(new Error("Invalid file signature"));return}this.read(8,this._parseChunkBegin.bind(this))};Parser$3.prototype._parseChunkBegin=function(e){let t=e.readUInt32BE(0),n=e.readUInt32BE(4),r="";for(let d=4;d<8;d++)r+=String.fromCharCode(e[d]);let c=Boolean(e[4]&32);if(!this._hasIHDR&&n!==constants$4.TYPE_IHDR){this.error(new Error("Expected IHDR on beggining"));return}if(this._crc=new CrcCalculator,this._crc.write(Buffer.from(r)),this._chunks[n])return this._chunks[n](t);if(!c){this.error(new Error("Unsupported critical chunk type "+r));return}this.read(t+4,this._skipChunk.bind(this))};Parser$3.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))};Parser$3.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))};Parser$3.prototype._parseChunkEnd=function(e){let t=e.readInt32BE(0),n=this._crc.crc32();if(this._options.checkCRC&&n!==t){this.error(new Error("Crc error - "+t+" - "+n));return}this._hasIEND||this.read(8,this._parseChunkBegin.bind(this))};Parser$3.prototype._handleIHDR=function(e){this.read(e,this._parseIHDR.bind(this))};Parser$3.prototype._parseIHDR=function(e){this._crc.write(e);let t=e.readUInt32BE(0),n=e.readUInt32BE(4),r=e[8],c=e[9],d=e[10],g=e[11],o=e[12];if(r!==8&&r!==4&&r!==2&&r!==1&&r!==16){this.error(new Error("Unsupported bit depth "+r));return}if(!(c in constants$4.COLORTYPE_TO_BPP_MAP)){this.error(new Error("Unsupported color type"));return}if(d!==0){this.error(new Error("Unsupported compression method"));return}if(g!==0){this.error(new Error("Unsupported filter method"));return}if(o!==0&&o!==1){this.error(new Error("Unsupported interlace method"));return}this._colorType=c;let v=constants$4.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:t,height:n,depth:r,interlace:Boolean(o),palette:Boolean(c&constants$4.COLORTYPE_PALETTE),color:Boolean(c&constants$4.COLORTYPE_COLOR),alpha:Boolean(c&constants$4.COLORTYPE_ALPHA),bpp:v,colorType:c}),this._handleChunkEnd()};Parser$3.prototype._handlePLTE=function(e){this.read(e,this._parsePLTE.bind(this))};Parser$3.prototype._parsePLTE=function(e){this._crc.write(e);let t=Math.floor(e.length/3);for(let n=0;n<t;n++)this._palette.push([e[n*3],e[n*3+1],e[n*3+2],255]);this.palette(this._palette),this._handleChunkEnd()};Parser$3.prototype._handleTRNS=function(e){this.simpleTransparency(),this.read(e,this._parseTRNS.bind(this))};Parser$3.prototype._parseTRNS=function(e){if(this._crc.write(e),this._colorType===constants$4.COLORTYPE_PALETTE_COLOR){if(this._palette.length===0){this.error(new Error("Transparency chunk must be after palette"));return}if(e.length>this._palette.length){this.error(new Error("More transparent colors than palette size"));return}for(let t=0;t<e.length;t++)this._palette[t][3]=e[t];this.palette(this._palette)}this._colorType===constants$4.COLORTYPE_GRAYSCALE&&this.transColor([e.readUInt16BE(0)]),this._colorType===constants$4.COLORTYPE_COLOR&&this.transColor([e.readUInt16BE(0),e.readUInt16BE(2),e.readUInt16BE(4)]),this._handleChunkEnd()};Parser$3.prototype._handleGAMA=function(e){this.read(e,this._parseGAMA.bind(this))};Parser$3.prototype._parseGAMA=function(e){this._crc.write(e),this.gamma(e.readUInt32BE(0)/constants$4.GAMMA_DIVISION),this._handleChunkEnd()};Parser$3.prototype._handleIDAT=function(e){this._emittedHeadersFinished||(this._emittedHeadersFinished=!0,this.headersFinished()),this.read(-e,this._parseIDAT.bind(this,e))};Parser$3.prototype._parseIDAT=function(e,t){if(this._crc.write(t),this._colorType===constants$4.COLORTYPE_PALETTE_COLOR&&this._palette.length===0)throw new Error("Expected palette not found");this.inflateData(t);let n=e-t.length;n>0?this._handleIDAT(n):this._handleChunkEnd()};Parser$3.prototype._handleIEND=function(e){this.read(e,this._parseIEND.bind(this))};Parser$3.prototype._parseIEND=function(e){this._crc.write(e),this._hasIEND=!0,this._handleChunkEnd(),this.finished&&this.finished()};var bitmapper$2={};let interlaceUtils=interlace,pixelBppMapper=[function(){},function(e,t,n,r){if(r===t.length)throw new Error("Ran out of data");let c=t[r];e[n]=c,e[n+1]=c,e[n+2]=c,e[n+3]=255},function(e,t,n,r){if(r+1>=t.length)throw new Error("Ran out of data");let c=t[r];e[n]=c,e[n+1]=c,e[n+2]=c,e[n+3]=t[r+1]},function(e,t,n,r){if(r+2>=t.length)throw new Error("Ran out of data");e[n]=t[r],e[n+1]=t[r+1],e[n+2]=t[r+2],e[n+3]=255},function(e,t,n,r){if(r+3>=t.length)throw new Error("Ran out of data");e[n]=t[r],e[n+1]=t[r+1],e[n+2]=t[r+2],e[n+3]=t[r+3]}],pixelBppCustomMapper=[function(){},function(e,t,n,r){let c=t[0];e[n]=c,e[n+1]=c,e[n+2]=c,e[n+3]=r},function(e,t,n){let r=t[0];e[n]=r,e[n+1]=r,e[n+2]=r,e[n+3]=t[1]},function(e,t,n,r){e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=r},function(e,t,n){e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=t[3]}];function bitRetriever(e,t){let n=[],r=0;function c(){if(r===e.length)throw new Error("Ran out of data");let d=e[r];r++;let g,o,v,x,E,k,S,N;switch(t){default:throw new Error("unrecognised depth");case 16:S=e[r],r++,n.push((d<<8)+S);break;case 4:S=d&15,N=d>>4,n.push(N,S);break;case 2:E=d&3,k=d>>2&3,S=d>>4&3,N=d>>6&3,n.push(N,S,k,E);break;case 1:g=d&1,o=d>>1&1,v=d>>2&1,x=d>>3&1,E=d>>4&1,k=d>>5&1,S=d>>6&1,N=d>>7&1,n.push(N,S,k,E,x,v,o,g);break}}return{get:function(d){for(;n.length<d;)c();let g=n.slice(0,d);return n=n.slice(d),g},resetAfterLine:function(){n.length=0},end:function(){if(r!==e.length)throw new Error("extra data found")}}}function mapImage8Bit(e,t,n,r,c,d){let g=e.width,o=e.height,v=e.index;for(let x=0;x<o;x++)for(let E=0;E<g;E++){let k=n(E,x,v);pixelBppMapper[r](t,c,k,d),d+=r}return d}function mapImageCustomBit(e,t,n,r,c,d){let g=e.width,o=e.height,v=e.index;for(let x=0;x<o;x++){for(let E=0;E<g;E++){let k=c.get(r),S=n(E,x,v);pixelBppCustomMapper[r](t,k,S,d)}c.resetAfterLine()}}bitmapper$2.dataToBitMap=function(e,t){let n=t.width,r=t.height,c=t.depth,d=t.bpp,g=t.interlace,o;c!==8&&(o=bitRetriever(e,c));let v;c<=8?v=Buffer.alloc(n*r*4):v=new Uint16Array(n*r*4);let x=Math.pow(2,c)-1,E=0,k,S;if(g)k=interlaceUtils.getImagePasses(n,r),S=interlaceUtils.getInterlaceIterator(n,r);else{let N=0;S=function(){let L=N;return N+=4,L},k=[{width:n,height:r}]}for(let N=0;N<k.length;N++)c===8?E=mapImage8Bit(k[N],v,S,d,e,E):mapImageCustomBit(k[N],v,S,d,o,x);if(c===8){if(E!==e.length)throw new Error("extra data found")}else o.end();return v};function dePalette(e,t,n,r,c){let d=0;for(let g=0;g<r;g++)for(let o=0;o<n;o++){let v=c[e[d]];if(!v)throw new Error("index "+e[d]+" not in palette");for(let x=0;x<4;x++)t[d+x]=v[x];d+=4}}function replaceTransparentColor(e,t,n,r,c){let d=0;for(let g=0;g<r;g++)for(let o=0;o<n;o++){let v=!1;if(c.length===1?c[0]===e[d]&&(v=!0):c[0]===e[d]&&c[1]===e[d+1]&&c[2]===e[d+2]&&(v=!0),v)for(let x=0;x<4;x++)t[d+x]=0;d+=4}}function scaleDepth(e,t,n,r,c){let d=255,g=Math.pow(2,c)-1,o=0;for(let v=0;v<r;v++)for(let x=0;x<n;x++){for(let E=0;E<4;E++)t[o+E]=Math.floor(e[o+E]*d/g+.5);o+=4}}var formatNormaliser$2=function(e,t){let n=t.depth,r=t.width,c=t.height,d=t.colorType,g=t.transColor,o=t.palette,v=e;return d===3?dePalette(e,v,r,c,o):(g&&replaceTransparentColor(e,v,r,c,g),n!==8&&(n===16&&(v=Buffer.alloc(r*c*4)),scaleDepth(e,v,r,c,n))),v};let util$2=require$$0__default$1.default,zlib$3=zlib__default.default,ChunkStream=chunkstream.exports,FilterAsync=filterParseAsync.exports,Parser$2=parser.exports,bitmapper$1=bitmapper$2,formatNormaliser$1=formatNormaliser$2,ParserAsync=parserAsync.exports=function(e){ChunkStream.call(this),this._parser=new Parser$2(e,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this),simpleTransparency:this._simpleTransparency.bind(this),headersFinished:this._headersFinished.bind(this)}),this._options=e,this.writable=!0,this._parser.start()};util$2.inherits(ParserAsync,ChunkStream);ParserAsync.prototype._handleError=function(e){this.emit("error",e),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this._filter&&(this._filter.destroy(),this._filter.on("error",function(){})),this.errord=!0};ParserAsync.prototype._inflateData=function(e){if(!this._inflate)if(this._bitmapInfo.interlace)this._inflate=zlib$3.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter);else{let n=((this._bitmapInfo.width*this._bitmapInfo.bpp*this._bitmapInfo.depth+7>>3)+1)*this._bitmapInfo.height,r=Math.max(n,zlib$3.Z_MIN_CHUNK);this._inflate=zlib$3.createInflate({chunkSize:r});let c=n,d=this.emit.bind(this,"error");this._inflate.on("error",function(o){!c||d(o)}),this._filter.on("complete",this._complete.bind(this));let g=this._filter.write.bind(this._filter);this._inflate.on("data",function(o){!c||(o.length>c&&(o=o.slice(0,c)),c-=o.length,g(o))}),this._inflate.on("end",this._filter.end.bind(this._filter))}this._inflate.write(e)};ParserAsync.prototype._handleMetaData=function(e){this._metaData=e,this._bitmapInfo=Object.create(e),this._filter=new FilterAsync(this._bitmapInfo)};ParserAsync.prototype._handleTransColor=function(e){this._bitmapInfo.transColor=e};ParserAsync.prototype._handlePalette=function(e){this._bitmapInfo.palette=e};ParserAsync.prototype._simpleTransparency=function(){this._metaData.alpha=!0};ParserAsync.prototype._headersFinished=function(){this.emit("metadata",this._metaData)};ParserAsync.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit("error","No Inflate block"))};ParserAsync.prototype._complete=function(e){if(this.errord)return;let t;try{let n=bitmapper$1.dataToBitMap(e,this._bitmapInfo);t=formatNormaliser$1(n,this._bitmapInfo),n=null}catch(n){this._handleError(n);return}this.emit("parsed",t)};var packerAsync={exports:{}},packer={exports:{}};let constants$3=constants$5;var bitpacker=function(e,t,n,r){let c=[constants$3.COLORTYPE_COLOR_ALPHA,constants$3.COLORTYPE_ALPHA].indexOf(r.colorType)!==-1;if(r.colorType===r.inputColorType){let L=function(){let P=new ArrayBuffer(2);return new DataView(P).setInt16(0,256,!0),new Int16Array(P)[0]!==256}();if(r.bitDepth===8||r.bitDepth===16&&L)return e}let d=r.bitDepth!==16?e:new Uint16Array(e.buffer),g=255,o=constants$3.COLORTYPE_TO_BPP_MAP[r.inputColorType];o===4&&!r.inputHasAlpha&&(o=3);let v=constants$3.COLORTYPE_TO_BPP_MAP[r.colorType];r.bitDepth===16&&(g=65535,v*=2);let x=Buffer.alloc(t*n*v),E=0,k=0,S=r.bgColor||{};S.red===void 0&&(S.red=g),S.green===void 0&&(S.green=g),S.blue===void 0&&(S.blue=g);function N(){let L,P,O,V=g;switch(r.inputColorType){case constants$3.COLORTYPE_COLOR_ALPHA:V=d[E+3],L=d[E],P=d[E+1],O=d[E+2];break;case constants$3.COLORTYPE_COLOR:L=d[E],P=d[E+1],O=d[E+2];break;case constants$3.COLORTYPE_ALPHA:V=d[E+1],L=d[E],P=L,O=L;break;case constants$3.COLORTYPE_GRAYSCALE:L=d[E],P=L,O=L;break;default:throw new Error("input color type:"+r.inputColorType+" is not supported at present")}return r.inputHasAlpha&&(c||(V/=g,L=Math.min(Math.max(Math.round((1-V)*S.red+V*L),0),g),P=Math.min(Math.max(Math.round((1-V)*S.green+V*P),0),g),O=Math.min(Math.max(Math.round((1-V)*S.blue+V*O),0),g))),{red:L,green:P,blue:O,alpha:V}}for(let L=0;L<n;L++)for(let P=0;P<t;P++){let O=N();switch(r.colorType){case constants$3.COLORTYPE_COLOR_ALPHA:case constants$3.COLORTYPE_COLOR:r.bitDepth===8?(x[k]=O.red,x[k+1]=O.green,x[k+2]=O.blue,c&&(x[k+3]=O.alpha)):(x.writeUInt16BE(O.red,k),x.writeUInt16BE(O.green,k+2),x.writeUInt16BE(O.blue,k+4),c&&x.writeUInt16BE(O.alpha,k+6));break;case constants$3.COLORTYPE_ALPHA:case constants$3.COLORTYPE_GRAYSCALE:{let V=(O.red+O.green+O.blue)/3;r.bitDepth===8?(x[k]=V,c&&(x[k+1]=O.alpha)):(x.writeUInt16BE(V,k),c&&x.writeUInt16BE(O.alpha,k+2));break}default:throw new Error("unrecognised color Type "+r.colorType)}E+=o,k+=v}return x};let paethPredictor=paethPredictor$2;function filterNone(e,t,n,r,c){for(let d=0;d<n;d++)r[c+d]=e[t+d]}function filterSumNone(e,t,n){let r=0,c=t+n;for(let d=t;d<c;d++)r+=Math.abs(e[d]);return r}function filterSub(e,t,n,r,c,d){for(let g=0;g<n;g++){let o=g>=d?e[t+g-d]:0,v=e[t+g]-o;r[c+g]=v}}function filterSumSub(e,t,n,r){let c=0;for(let d=0;d<n;d++){let g=d>=r?e[t+d-r]:0,o=e[t+d]-g;c+=Math.abs(o)}return c}function filterUp(e,t,n,r,c){for(let d=0;d<n;d++){let g=t>0?e[t+d-n]:0,o=e[t+d]-g;r[c+d]=o}}function filterSumUp(e,t,n){let r=0,c=t+n;for(let d=t;d<c;d++){let g=t>0?e[d-n]:0,o=e[d]-g;r+=Math.abs(o)}return r}function filterAvg(e,t,n,r,c,d){for(let g=0;g<n;g++){let o=g>=d?e[t+g-d]:0,v=t>0?e[t+g-n]:0,x=e[t+g]-(o+v>>1);r[c+g]=x}}function filterSumAvg(e,t,n,r){let c=0;for(let d=0;d<n;d++){let g=d>=r?e[t+d-r]:0,o=t>0?e[t+d-n]:0,v=e[t+d]-(g+o>>1);c+=Math.abs(v)}return c}function filterPaeth(e,t,n,r,c,d){for(let g=0;g<n;g++){let o=g>=d?e[t+g-d]:0,v=t>0?e[t+g-n]:0,x=t>0&&g>=d?e[t+g-(n+d)]:0,E=e[t+g]-paethPredictor(o,v,x);r[c+g]=E}}function filterSumPaeth(e,t,n,r){let c=0;for(let d=0;d<n;d++){let g=d>=r?e[t+d-r]:0,o=t>0?e[t+d-n]:0,v=t>0&&d>=r?e[t+d-(n+r)]:0,x=e[t+d]-paethPredictor(g,o,v);c+=Math.abs(x)}return c}let filters={0:filterNone,1:filterSub,2:filterUp,3:filterAvg,4:filterPaeth},filterSums={0:filterSumNone,1:filterSumSub,2:filterSumUp,3:filterSumAvg,4:filterSumPaeth};var filterPack=function(e,t,n,r,c){let d;if(!("filterType"in r)||r.filterType===-1)d=[0,1,2,3,4];else if(typeof r.filterType=="number")d=[r.filterType];else throw new Error("unrecognised filter types");r.bitDepth===16&&(c*=2);let g=t*c,o=0,v=0,x=Buffer.alloc((g+1)*n),E=d[0];for(let k=0;k<n;k++){if(d.length>1){let S=1/0;for(let N=0;N<d.length;N++){let L=filterSums[d[N]](e,v,g,c);L<S&&(E=d[N],S=L)}}x[o]=E,o++,filters[E](e,v,g,x,o,c),o+=g,v+=g}return x};let constants$2=constants$5,CrcStream=crc.exports,bitPacker=bitpacker,filter=filterPack,zlib$2=zlib__default.default,Packer$3=packer.exports=function(e){if(this._options=e,e.deflateChunkSize=e.deflateChunkSize||32*1024,e.deflateLevel=e.deflateLevel!=null?e.deflateLevel:9,e.deflateStrategy=e.deflateStrategy!=null?e.deflateStrategy:3,e.inputHasAlpha=e.inputHasAlpha!=null?e.inputHasAlpha:!0,e.deflateFactory=e.deflateFactory||zlib$2.createDeflate,e.bitDepth=e.bitDepth||8,e.colorType=typeof e.colorType=="number"?e.colorType:constants$2.COLORTYPE_COLOR_ALPHA,e.inputColorType=typeof e.inputColorType=="number"?e.inputColorType:constants$2.COLORTYPE_COLOR_ALPHA,[constants$2.COLORTYPE_GRAYSCALE,constants$2.COLORTYPE_COLOR,constants$2.COLORTYPE_COLOR_ALPHA,constants$2.COLORTYPE_ALPHA].indexOf(e.colorType)===-1)throw new Error("option color type:"+e.colorType+" is not supported at present");if([constants$2.COLORTYPE_GRAYSCALE,constants$2.COLORTYPE_COLOR,constants$2.COLORTYPE_COLOR_ALPHA,constants$2.COLORTYPE_ALPHA].indexOf(e.inputColorType)===-1)throw new Error("option input color type:"+e.inputColorType+" is not supported at present");if(e.bitDepth!==8&&e.bitDepth!==16)throw new Error("option bit depth:"+e.bitDepth+" is not supported at present")};Packer$3.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}};Packer$3.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())};Packer$3.prototype.filterData=function(e,t,n){let r=bitPacker(e,t,n,this._options),c=constants$2.COLORTYPE_TO_BPP_MAP[this._options.colorType];return filter(r,t,n,this._options,c)};Packer$3.prototype._packChunk=function(e,t){let n=t?t.length:0,r=Buffer.alloc(n+12);return r.writeUInt32BE(n,0),r.writeUInt32BE(e,4),t&&t.copy(r,8),r.writeInt32BE(CrcStream.crc32(r.slice(4,r.length-4)),r.length-4),r};Packer$3.prototype.packGAMA=function(e){let t=Buffer.alloc(4);return t.writeUInt32BE(Math.floor(e*constants$2.GAMMA_DIVISION),0),this._packChunk(constants$2.TYPE_gAMA,t)};Packer$3.prototype.packIHDR=function(e,t){let n=Buffer.alloc(13);return n.writeUInt32BE(e,0),n.writeUInt32BE(t,4),n[8]=this._options.bitDepth,n[9]=this._options.colorType,n[10]=0,n[11]=0,n[12]=0,this._packChunk(constants$2.TYPE_IHDR,n)};Packer$3.prototype.packIDAT=function(e){return this._packChunk(constants$2.TYPE_IDAT,e)};Packer$3.prototype.packIEND=function(){return this._packChunk(constants$2.TYPE_IEND,null)};let util$1=require$$0__default$1.default,Stream$1=stream__default.default,constants$1=constants$5,Packer$2=packer.exports,PackerAsync=packerAsync.exports=function(e){Stream$1.call(this);let t=e||{};this._packer=new Packer$2(t),this._deflate=this._packer.createDeflate(),this.readable=!0};util$1.inherits(PackerAsync,Stream$1);PackerAsync.prototype.pack=function(e,t,n,r){this.emit("data",Buffer.from(constants$1.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(t,n)),r&&this.emit("data",this._packer.packGAMA(r));let c=this._packer.filterData(e,t,n);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",function(d){this.emit("data",this._packer.packIDAT(d))}.bind(this)),this._deflate.on("end",function(){this.emit("data",this._packer.packIEND()),this.emit("end")}.bind(this)),this._deflate.end(c)};var pngSync={},syncInflate={exports:{}};(function(e,t){let n=require$$4__default$1.default.ok,r=zlib__default.default,c=require$$0__default$1.default,d=require$$3__default$1.default.kMaxLength;function g(k){if(!(this instanceof g))return new g(k);k&&k.chunkSize<r.Z_MIN_CHUNK&&(k.chunkSize=r.Z_MIN_CHUNK),r.Inflate.call(this,k),this._offset=this._offset===void 0?this._outOffset:this._offset,this._buffer=this._buffer||this._outBuffer,k&&k.maxLength!=null&&(this._maxLength=k.maxLength)}function o(k){return new g(k)}function v(k,S){S&&process.nextTick(S),k._handle&&(k._handle.close(),k._handle=null)}g.prototype._processChunk=function(k,S,N){if(typeof N=="function")return r.Inflate._processChunk.call(this,k,S,N);let L=this,P=k&&k.length,O=this._chunkSize-this._offset,V=this._maxLength,z=0,U=[],W=0,Z;this.on("error",function(ce){Z=ce});function re(ce,me){if(L._hadError)return;let we=O-me;if(n(we>=0,"have should not go down"),we>0){let ae=L._buffer.slice(L._offset,L._offset+we);if(L._offset+=we,ae.length>V&&(ae=ae.slice(0,V)),U.push(ae),W+=ae.length,V-=ae.length,V===0)return!1}return(me===0||L._offset>=L._chunkSize)&&(O=L._chunkSize,L._offset=0,L._buffer=Buffer.allocUnsafe(L._chunkSize)),me===0?(z+=P-ce,P=ce,!0):!1}n(this._handle,"zlib binding closed");let oe;do oe=this._handle.writeSync(S,k,z,P,this._buffer,this._offset,O),oe=oe||this._writeState;while(!this._hadError&&re(oe[0],oe[1]));if(this._hadError)throw Z;if(W>=d)throw v(this),new RangeError("Cannot create final Buffer. It would be larger than 0x"+d.toString(16)+" bytes");let se=Buffer.concat(U,W);return v(this),se},c.inherits(g,r.Inflate);function x(k,S){if(typeof S=="string"&&(S=Buffer.from(S)),!(S instanceof Buffer))throw new TypeError("Not a string or buffer");let N=k._finishFlushFlag;return N==null&&(N=r.Z_FINISH),k._processChunk(S,N)}function E(k,S){return x(new g(S),k)}e.exports=t=E,t.Inflate=g,t.createInflate=o,t.inflateSync=E})(syncInflate,syncInflate.exports);var syncReader={exports:{}};let SyncReader$2=syncReader.exports=function(e){this._buffer=e,this._reads=[]};SyncReader$2.prototype.read=function(e,t){this._reads.push({length:Math.abs(e),allowLess:e<0,func:t})};SyncReader$2.prototype.process=function(){for(;this._reads.length>0&&this._buffer.length;){let e=this._reads[0];if(this._buffer.length&&(this._buffer.length>=e.length||e.allowLess)){this._reads.shift();let t=this._buffer;this._buffer=t.slice(e.length),e.func.call(this,t.slice(0,e.length))}else break}if(this._reads.length>0)return new Error("There are some read requests waitng on finished stream");if(this._buffer.length>0)return new Error("unrecognised content at end of stream")};var filterParseSync={};let SyncReader$1=syncReader.exports,Filter=filterParse.exports;filterParseSync.process=function(e,t){let n=[],r=new SyncReader$1(e);return new Filter(t,{read:r.read.bind(r),write:function(d){n.push(d)},complete:function(){}}).start(),r.process(),Buffer.concat(n)};let hasSyncZlib$1=!0,zlib$1=zlib__default.default,inflateSync=syncInflate.exports;zlib$1.deflateSync||(hasSyncZlib$1=!1);let SyncReader=syncReader.exports,FilterSync=filterParseSync,Parser$1=parser.exports,bitmapper=bitmapper$2,formatNormaliser=formatNormaliser$2;var parserSync=function(e,t){if(!hasSyncZlib$1)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let n;function r(W){n=W}let c;function d(W){c=W}function g(W){c.transColor=W}function o(W){c.palette=W}function v(){c.alpha=!0}let x;function E(W){x=W}let k=[];function S(W){k.push(W)}let N=new SyncReader(e);if(new Parser$1(t,{read:N.read.bind(N),error:r,metadata:d,gamma:E,palette:o,transColor:g,inflateData:S,simpleTransparency:v}).start(),N.process(),n)throw n;let P=Buffer.concat(k);k.length=0;let O;if(c.interlace)O=zlib$1.inflateSync(P);else{let Z=((c.width*c.bpp*c.depth+7>>3)+1)*c.height;O=inflateSync(P,{chunkSize:Z,maxLength:Z})}if(P=null,!O||!O.length)throw new Error("bad png - invalid inflate data response");let V=FilterSync.process(O,c);P=null;let z=bitmapper.dataToBitMap(V,c);V=null;let U=formatNormaliser(z,c);return c.data=U,c.gamma=x||0,c};let hasSyncZlib=!0,zlib=zlib__default.default;zlib.deflateSync||(hasSyncZlib=!1);let constants=constants$5,Packer$1=packer.exports;var packerSync=function(e,t){if(!hasSyncZlib)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let n=t||{},r=new Packer$1(n),c=[];c.push(Buffer.from(constants.PNG_SIGNATURE)),c.push(r.packIHDR(e.width,e.height)),e.gamma&&c.push(r.packGAMA(e.gamma));let d=r.filterData(e.data,e.width,e.height),g=zlib.deflateSync(d,r.getDeflateOptions());if(d=null,!g||!g.length)throw new Error("bad png - invalid compressed data response");return c.push(r.packIDAT(g)),c.push(r.packIEND()),Buffer.concat(c)};let parse=parserSync,pack=packerSync;pngSync.read=function(e,t){return parse(e,t||{})};pngSync.write=function(e,t){return pack(e,t)};let util=require$$0__default$1.default,Stream=stream__default.default,Parser=parserAsync.exports,Packer=packerAsync.exports,PNGSync=pngSync,PNG=png.PNG=function(e){Stream.call(this),e=e||{},this.width=e.width|0,this.height=e.height|0,this.data=this.width>0&&this.height>0?Buffer.alloc(4*this.width*this.height):null,e.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new Parser(e),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",function(t){this.data=t,this.emit("parsed",t)}.bind(this)),this._packer=new Packer(e),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};util.inherits(PNG,Stream);PNG.sync=PNGSync;PNG.prototype.pack=function(){return!this.data||!this.data.length?(this.emit("error","No data provided"),this):(process.nextTick(function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}.bind(this)),this)};PNG.prototype.parse=function(e,t){if(t){let n,r;n=function(c){this.removeListener("error",r),this.data=c,t(null,this)}.bind(this),r=function(c){this.removeListener("parsed",n),t(c,null)}.bind(this),this.once("parsed",n),this.once("error",r)}return this.end(e),this};PNG.prototype.write=function(e){return this._parser.write(e),!0};PNG.prototype.end=function(e){this._parser.end(e)};PNG.prototype._metadata=function(e){this.width=e.width,this.height=e.height,this.emit("metadata",e)};PNG.prototype._gamma=function(e){this.gamma=e};PNG.prototype._handleClose=function(){!this._parser.writable&&!this._packer.readable&&this.emit("close")};PNG.bitblt=function(e,t,n,r,c,d,g,o){if(n|=0,r|=0,c|=0,d|=0,g|=0,o|=0,n>e.width||r>e.height||n+c>e.width||r+d>e.height)throw new Error("bitblt reading outside image");if(g>t.width||o>t.height||g+c>t.width||o+d>t.height)throw new Error("bitblt writing outside image");for(let v=0;v<d;v++)e.data.copy(t.data,(o+v)*t.width+g<<2,(r+v)*e.width+n<<2,(r+v)*e.width+n+c<<2)};PNG.prototype.bitblt=function(e,t,n,r,c,d,g){return PNG.bitblt(this,e,t,n,r,c,d,g),this};PNG.adjustGamma=function(e){if(e.gamma){for(let t=0;t<e.height;t++)for(let n=0;n<e.width;n++){let r=e.width*t+n<<2;for(let c=0;c<3;c++){let d=e.data[r+c]/255;d=Math.pow(d,1/2.2/e.gamma),e.data[r+c]=Math.round(d*255)}}e.gamma=0}};PNG.prototype.adjustGamma=function(){PNG.adjustGamma(this)};var utils={};(function(e){function t(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(d){return[d,d]}))),r.length===6&&r.push("F","F");const c=parseInt(r.join(""),16);return{r:c>>24&255,g:c>>16&255,b:c>>8&255,a:c&255,hex:"#"+r.slice(0,6).join("")}}e.getOptions=function(r){r||(r={}),r.color||(r.color={});const c=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,d=r.width&&r.width>=21?r.width:void 0,g=r.scale||4;return{width:d,scale:d?4:g,margin:c,color:{dark:t(r.color.dark||"#000000ff"),light:t(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},e.getScale=function(r,c){return c.width&&c.width>=r+c.margin*2?c.width/(r+c.margin*2):c.scale},e.getImageWidth=function(r,c){const d=e.getScale(r,c);return Math.floor((r+c.margin*2)*d)},e.qrToImageData=function(r,c,d){const g=c.modules.size,o=c.modules.data,v=e.getScale(g,d),x=Math.floor((g+d.margin*2)*v),E=d.margin*v,k=[d.color.light,d.color.dark];for(let S=0;S<x;S++)for(let N=0;N<x;N++){let L=(S*x+N)*4,P=d.color.light;if(S>=E&&N>=E&&S<x-E&&N<x-E){const O=Math.floor((S-E)/v),V=Math.floor((N-E)/v);P=k[o[O*g+V]?1:0]}r[L++]=P.r,r[L++]=P.g,r[L++]=P.b,r[L]=P.a}}})(utils);(function(e){const t=require$$1__default$1.default,n=png.PNG,r=utils;e.render=function(d,g){const o=r.getOptions(g),v=o.rendererOpts,x=r.getImageWidth(d.modules.size,o);v.width=x,v.height=x;const E=new n(v);return r.qrToImageData(E.data,d,o),E},e.renderToDataURL=function(d,g,o){typeof o>"u"&&(o=g,g=void 0),e.renderToBuffer(d,g,function(v,x){v&&o(v);let E="data:image/png;base64,";E+=x.toString("base64"),o(null,E)})},e.renderToBuffer=function(d,g,o){typeof o>"u"&&(o=g,g=void 0);const v=e.render(d,g),x=[];v.on("error",o),v.on("data",function(E){x.push(E)}),v.on("end",function(){o(null,Buffer.concat(x))}),v.pack()},e.renderToFile=function(d,g,o,v){typeof v>"u"&&(v=o,o=void 0);let x=!1;const E=(...S)=>{x||(x=!0,v.apply(null,S))},k=t.createWriteStream(d);k.on("error",E),k.on("close",E),e.renderToFileStream(k,g,o)},e.renderToFileStream=function(d,g,o){e.render(g,o).pack().pipe(d)}})(png$1);var utf8={};(function(e){const t=utils,n={WW:" ",WB:"\u2584",BB:"\u2588",BW:"\u2580"},r={BB:" ",BW:"\u2584",WW:"\u2588",WB:"\u2580"};function c(d,g,o){return d&&g?o.BB:d&&!g?o.BW:!d&&g?o.WB:o.WW}e.render=function(d,g,o){const v=t.getOptions(g);let x=n;(v.color.dark.hex==="#ffffff"||v.color.light.hex==="#000000")&&(x=r);const E=d.modules.size,k=d.modules.data;let S="",N=Array(E+v.margin*2+1).join(x.WW);N=Array(v.margin/2+1).join(N+`
`);const L=Array(v.margin+1).join(x.WW);S+=N;for(let P=0;P<E;P+=2){S+=L;for(let O=0;O<E;O++){const V=k[P*E+O],z=k[(P+1)*E+O];S+=c(V,z,x)}S+=L+`
`}return S+=N.slice(0,-1),typeof o=="function"&&o(null,S),S},e.renderToFile=function(g,o,v,x){typeof x>"u"&&(x=v,v=void 0);const E=require$$1__default$1.default,k=e.render(o,v);E.writeFile(g,k,x)}})(utf8);var terminal$1={},terminal={};terminal.render=function(e,t,n){const r=e.modules.size,c=e.modules.data,d="\x1B[40m  \x1B[0m",g="\x1B[47m  \x1B[0m";let o="";const v=Array(r+3).join(g),x=Array(2).join(g);o+=v+`
`;for(let E=0;E<r;++E){o+=g;for(let k=0;k<r;k++)o+=c[E*r+k]?d:g;o+=x+`
`}return o+=v+`
`,typeof n=="function"&&n(null,o),o};var terminalSmall={};const backgroundWhite="\x1B[47m",backgroundBlack="\x1B[40m",foregroundWhite="\x1B[37m",foregroundBlack="\x1B[30m",reset="\x1B[0m",lineSetupNormal=backgroundWhite+foregroundBlack,lineSetupInverse=backgroundBlack+foregroundWhite,createPalette=function(e,t,n){return{"00":reset+" "+e,"01":reset+t+"\u2584"+e,"02":reset+n+"\u2584"+e,10:reset+t+"\u2580"+e,11:" ",12:"\u2584",20:reset+n+"\u2580"+e,21:"\u2580",22:"\u2588"}},mkCodePixel=function(e,t,n,r){const c=t+1;if(n>=c||r>=c||r<-1||n<-1)return"0";if(n>=t||r>=t||r<0||n<0)return"1";const d=r*t+n;return e[d]?"2":"1"},mkCode=function(e,t,n,r){return mkCodePixel(e,t,n,r)+mkCodePixel(e,t,n,r+1)};terminalSmall.render=function(e,t,n){const r=e.modules.size,c=e.modules.data,d=!!(t&&t.inverse),g=t&&t.inverse?lineSetupInverse:lineSetupNormal,x=createPalette(g,d?foregroundBlack:foregroundWhite,d?foregroundWhite:foregroundBlack),E=reset+`
`+g;let k=g;for(let S=-1;S<r+1;S+=2){for(let N=-1;N<r;N++)k+=x[mkCode(c,r,N,S)];k+=x[mkCode(c,r,r,S)]+E}return k+=reset,typeof n=="function"&&n(null,k),k};const big=terminal,small=terminalSmall;terminal$1.render=function(e,t,n){return t&&t.small?small.render(e,t,n):big.render(e,t,n)};var svg={},svgTag={};const Utils=utils;function getColorAttrib(e,t){const n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function svgCmd(e,t,n){let r=e+t;return typeof n<"u"&&(r+=" "+n),r}function qrToPath(e,t,n){let r="",c=0,d=!1,g=0;for(let o=0;o<e.length;o++){const v=Math.floor(o%t),x=Math.floor(o/t);!v&&!d&&(d=!0),e[o]?(g++,o>0&&v>0&&e[o-1]||(r+=d?svgCmd("M",v+n,.5+x+n):svgCmd("m",c,0),c=0,d=!1),v+1<t&&e[o+1]||(r+=svgCmd("h",g),g=0)):c++}return r}svgTag.render=function(t,n,r){const c=Utils.getOptions(n),d=t.modules.size,g=t.modules.data,o=d+c.margin*2,v=c.color.light.a?"<path "+getColorAttrib(c.color.light,"fill")+' d="M0 0h'+o+"v"+o+'H0z"/>':"",x="<path "+getColorAttrib(c.color.dark,"stroke")+' d="'+qrToPath(g,d,c.margin)+'"/>',E='viewBox="0 0 '+o+" "+o+'"',S='<svg xmlns="http://www.w3.org/2000/svg" '+(c.width?'width="'+c.width+'" height="'+c.width+'" ':"")+E+' shape-rendering="crispEdges">'+v+x+`</svg>
`;return typeof r=="function"&&r(null,S),S};(function(e){const t=svgTag;e.render=t.render,e.renderToFile=function(r,c,d,g){typeof g>"u"&&(g=d,d=void 0);const o=require$$1__default$1.default,x='<?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'+e.render(c,d);o.writeFile(r,x,g)}})(svg);var browser={},canvas={},hasRequiredCanvas;function requireCanvas(){return hasRequiredCanvas||(hasRequiredCanvas=1,function(e){const t=utils;function n(c,d,g){c.clearRect(0,0,d.width,d.height),d.style||(d.style={}),d.height=g,d.width=g,d.style.height=g+"px",d.style.width=g+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(d,g,o){let v=o,x=g;typeof v>"u"&&(!g||!g.getContext)&&(v=g,g=void 0),g||(x=r()),v=t.getOptions(v);const E=t.getImageWidth(d.modules.size,v),k=x.getContext("2d"),S=k.createImageData(E,E);return t.qrToImageData(S.data,d,v),n(k,x,E),k.putImageData(S,0,0),x},e.renderToDataURL=function(d,g,o){let v=o;typeof v>"u"&&(!g||!g.getContext)&&(v=g,g=void 0),v||(v={});const x=e.render(d,g,v),E=v.type||"image/png",k=v.rendererOpts||{};return x.toDataURL(E,k.quality)}}(canvas)),canvas}var hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser;hasRequiredBrowser=1;const e=canPromise$1,t=qrcode,n=requireCanvas(),r=svgTag;function c(d,g,o,v,x){const E=[].slice.call(arguments,1),k=E.length,S=typeof E[k-1]=="function";if(!S&&!e())throw new Error("Callback required as last argument");if(S){if(k<2)throw new Error("Too few arguments provided");k===2?(x=o,o=g,g=v=void 0):k===3&&(g.getContext&&typeof x>"u"?(x=v,v=void 0):(x=v,v=o,o=g,g=void 0))}else{if(k<1)throw new Error("Too few arguments provided");return k===1?(o=g,g=v=void 0):k===2&&!g.getContext&&(v=o,o=g,g=void 0),new Promise(function(N,L){try{const P=t.create(o,v);N(d(P,g,v))}catch(P){L(P)}})}try{const N=t.create(o,v);x(null,d(N,g,v))}catch(N){x(N)}}return browser.create=t.create,browser.toCanvas=c.bind(null,n.render),browser.toDataURL=c.bind(null,n.renderToDataURL),browser.toString=c.bind(null,function(d,g,o){return r.render(d,o)}),browser}const canPromise=canPromise$1,QRCode$1=qrcode,PngRenderer=png$1,Utf8Renderer=utf8,TerminalRenderer=terminal$1,SvgRenderer=svg;function checkParams(e,t,n){if(typeof e>"u")throw new Error("String required as first argument");if(typeof n>"u"&&(n=t,t={}),typeof n!="function")if(canPromise())t=n||{},n=null;else throw new Error("Callback required as last argument");return{opts:t,cb:n}}function getTypeFromFilename(e){return e.slice((e.lastIndexOf(".")-1>>>0)+2).toLowerCase()}function getRendererFromType(e){switch(e){case"svg":return SvgRenderer;case"txt":case"utf8":return Utf8Renderer;case"png":case"image/png":default:return PngRenderer}}function getStringRendererFromType(e){switch(e){case"svg":return SvgRenderer;case"terminal":return TerminalRenderer;case"utf8":default:return Utf8Renderer}}function render(e,t,n){if(!n.cb)return new Promise(function(r,c){try{const d=QRCode$1.create(t,n.opts);return e(d,n.opts,function(g,o){return g?c(g):r(o)})}catch(d){c(d)}});try{const r=QRCode$1.create(t,n.opts);return e(r,n.opts,n.cb)}catch(r){n.cb(r)}}server.create=QRCode$1.create;server.toCanvas=requireBrowser().toCanvas;server.toString=function(t,n,r){const c=checkParams(t,n,r),d=c.opts?c.opts.type:void 0,g=getStringRendererFromType(d);return render(g.render,t,c)};server.toDataURL=function(t,n,r){const c=checkParams(t,n,r),d=getRendererFromType(c.opts.type);return render(d.renderToDataURL,t,c)};server.toBuffer=function(t,n,r){const c=checkParams(t,n,r),d=getRendererFromType(c.opts.type);return render(d.renderToBuffer,t,c)};server.toFile=function(t,n,r,c){if(typeof t!="string"||!(typeof n=="string"||typeof n=="object"))throw new Error("Invalid argument");if(arguments.length<3&&!canPromise())throw new Error("Too few arguments provided");const d=checkParams(n,r,c),g=d.opts.type||getTypeFromFilename(t),v=getRendererFromType(g).renderToFile.bind(null,t);return render(v,n,d)};server.toFileStream=function(t,n,r){if(arguments.length<2)throw new Error("Too few arguments provided");const c=checkParams(n,r,t.emit.bind(t,"error")),g=getRendererFromType("png").renderToFileStream.bind(null,t);render(g,n,c)};(function(e){e.exports=server})(lib);const QRCode=getDefaultExportFromCjs(lib.exports);async function renderTextToQRCodeDataURL(e,t){return await QRCode.toDataURL(e,{errorCorrectionLevel:"H",type:"image/jpeg",width:260,...t})}const baseParams={scrollbars:0,status:0,menubar:0,resizable:2,location:0},paramsToString=(e={})=>Object.keys(e).map(t=>`${t}=${e[t]}`).join(","),openWindow=(e,t={})=>{const{name:n="",closeInterval:r=268,onClose:c,params:d={}}=t,g=Math.round(screen.availWidth/6*2),o=Math.round(screen.availHeight/5*2),v=Math.round((screen.availHeight-o)/2),x=Math.round((screen.availWidth-g)/2),k=paramsToString({...baseParams,...{width:g,height:o,top:v,left:x},...d}),S=window.open(e,n,k);if(S){if(c){const N=setInterval(()=>{S.closed&&(clearInterval(N),c())},r)}return S==null||S.focus(),S}},enableCopyrighter=()=>{window.__isEnabledCopyrighter=!0},disableCopyrighter=()=>{window.__isEnabledCopyrighter=!1},copy=e=>{var t;return disableCopyrighter(),(t=window.navigator.clipboard)==null?void 0:t.writeText(e).finally(()=>{enableCopyrighter()})};var SocialMedia=(e=>(e.Wechat="wechat",e.Weibo="weibo",e.Twitter="twitter",e.douban="douban",e.Evernote="evernote",e.Facebook="facebook",e.LinkedIn="linkedin",e))(SocialMedia||{});const socials=[{id:"wechat",name:"\u5FAE\u4FE1",class:"wechat",handler:async e=>{const t=await renderTextToQRCodeDataURL(e.url);window.$popup.vImage(t)}},{id:"weibo",name:"\u5FAE\u535A",class:"weibo",url:e=>"https://service.weibo.com/share/share.php?"+lib$1.stringify({url:e.url,source:e.url,sourceUrl:e.url,title:e.title,content:e.description})},{id:"twitter",name:"Twitter",class:"twitter",url:e=>"https://twitter.com/share?"+lib$1.stringify({url:e.url,text:e.title})},{id:"facebook",name:"Facebook",class:"facebook",url:e=>"https://www.facebook.com/share.php?"+lib$1.stringify({u:encodeURI(e.url)})},{id:"linkedin",name:"LinkedIn",class:"linkedin",url:e=>"https://www.linkedin.com/sharing/share-offsite/?"+lib$1.stringify({url:e.url})},{id:"douban",name:"\u8C46\u74E3",class:"douban",url:e=>"https://www.douban.com/share/service?"+lib$1.stringify({href:e.url,name:e.title})},{id:"evernote",name:"Evernote",class:"evernote",url:e=>"https://www.evernote.com/clip.action?"+lib$1.stringify({url:e.url,title:e.title})}],_sfc_main$1l=defineComponent({name:"Share",props:{socials:{type:Array,required:!1}},setup(e){const{route:t,gtag:n,i18n:r,isZhLang:c}=useEnhancer(),d=computed(()=>{var k;return(k=e.socials)!=null&&k.length?socials.filter(S=>{var N;return(N=e.socials)==null?void 0:N.includes(S.id)}):socials}),g=()=>getPageURL(t.fullPath),o=()=>document.title||META.title,v=()=>{var k,S;return((S=(k=document.getElementsByName("description"))==null?void 0:k[0])==null?void 0:S.getAttribute("content"))||r.t(LanguageKey.APP_SLOGAN)};return{enabledSocials:d,copyPageURL:()=>{const k=`${o()} - ${g()}`;copy(k).then(()=>{alert(c.value?"\u94FE\u63A5\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F\uFF01":"Link copied!")}),n==null||n.event("share_copy_url",{event_category:GAEventCategories.Share,event_label:k})},handleShare:k=>{n==null||n.event("share_social",{event_category:GAEventCategories.Share,event_label:k.id});const S={url:g(),title:o(),description:v()};k.handler?k.handler(S):openWindow(k.url(S),{name:`Share: ${META.title}`})}}}}),share_vue_vue_type_style_index_0_scoped_76ac3b7b_lang="";function _sfc_ssrRender$1l(e,t,n,r,c,d,g,o){t(`<div${ssrRenderAttrs(mergeProps({class:"share"},r))} data-v-76ac3b7b><!--[-->`),ssrRenderList(e.enabledSocials,(v,x)=>{t(`<button${ssrRenderAttr("title","Share to: "+v.name)} class="${ssrRenderClass([v.class,"share-ejector"])}" data-v-76ac3b7b><i class="${ssrRenderClass([`icon-${v.class}`,"iconfont"])}" data-v-76ac3b7b></i></button>`)}),t('<!--]--><button class="share-ejector link" title="Copy link" data-v-76ac3b7b><i class="iconfont icon-link" data-v-76ac3b7b></i></button></div>')}const _sfc_setup$1l=_sfc_main$1l.setup;_sfc_main$1l.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/share.vue"),_sfc_setup$1l?_sfc_setup$1l(e,t):void 0};const Share=_export_sfc(_sfc_main$1l,[["ssrRender",_sfc_ssrRender$1l],["__scopeId","data-v-76ac3b7b"]]),EMOJIS=["\u{1F603}","\u{1F602}","\u{1F605}","\u{1F609}","\u{1F60C}","\u{1F614}","\u{1F613}","\u{1F622}","\u{1F60D}","\u{1F618}","\u{1F61C}","\u{1F621}","\u{1F624}","\u{1F62D}","\u{1F631}","\u{1F633}","\u{1F635}","\u{1F31A}","\u{1F64F}","\u{1F446}","\u{1F447}","\u{1F44C}","\u{1F918}","\u{1F44D}","\u{1F44E}","\u{1F4AA}","\u{1F44F}","\u{1F33B}","\u{1F339}","\u{1F48A}","\u{1F436}","\u2764\uFE0F\u200D\u{1F525}","\u{1F494}","\u{1F4A9}","\u{1F47B}","\u{1F6A9}"];var CommentEvents=(e=>(e.Sort="sort",e.Page="page",e.Vote="vote",e.Blossom="blossom",e.Delete="delete",e.Reply="reply",e.CancelReply="cancelReply",e.Submit="submit",e))(CommentEvents||{});const getDisqusUserURL=e=>`https://disqus.com/by/${e}/`,HAHA_KEYWORDS=["2333","haha","\u54C8\u54C8"],SIX_KEYWORDS=["666","\u8D5E","\u68D2","\u4F18\u79C0"],HEHE_KEYWORDS=["\u5475\u5475"],luanchEmojiRain=e=>{const t=window.$luanchEmojiRain;HAHA_KEYWORDS.find(n=>e.includes(n))?t({speed:12,staggered:!0,increaseSpeed:.4,emoji:getTargetCDNURL("/images/emojis/haha.png")}):SIX_KEYWORDS.find(n=>e.includes(n))?t({speed:12,staggered:!0,increaseSpeed:.4,emoji:getTargetCDNURL("/images/emojis/666.png")}):HEHE_KEYWORDS.find(n=>e.includes(n))?t({staggered:!1,speed:8,increaseSpeed:.04,emoji:getTargetCDNURL("/images/emojis/hehe.png")}):Math.random()<=.5&&t({scale:.6,staggered:!0,speed:8,increaseSpeed:.04,emoji:getTargetCDNURL("/images/emojis/doge.png")})},_sfc_main$1k=defineComponent({name:"CommentTopbar",props:{postId:{type:Number,required:!0},sort:{type:Number,required:!0},total:{type:Number,default:0,required:!1},loaded:{type:Number,default:0,required:!1},fetching:{type:Boolean,required:!0},loading:{type:Boolean,required:!0},plain:{type:Boolean,default:!1}},emits:[CommentEvents.Sort],setup(e,t){const{gtag:n}=useEnhancer(),r=useIdentityStore(),c=computed(()=>r.user),d=computed(()=>e.loading?"\xB7\xB7\xB7":`${e.loaded} / ${e.total}`),g=new Map;return{user:c,statisticsText:d,VALUABLE_LINKS,LanguageKey,UserType,SortType,handleSort:S=>{n==null||n.event("comment_sort_switch",{event_category:GAEventCategories.Comment});const N=Number(S==null?void 0:S.value);N!==e.sort&&t.emit(CommentEvents.Sort,N)},handleDisqusLogin:()=>{n==null||n.event("disqus_login",{event_category:GAEventCategories.Comment,event_label:`id: ${e.postId}`}),openWindow(r.disqusConfig.authorize_url,{name:`Disqus Auth ${META.title}`,onClose:()=>{r.fetchDisqusUserInfo(),console.info("[disqus]","logined",r.user)}})},handleDisqusLogout:()=>{n==null||n.event("disqus_logout",{event_category:GAEventCategories.Comment,event_label:`id: ${e.postId}`}),console.log("[disqus]","logout"),r.fetchDisqusLogout()},handleDisqusThread:async()=>{if(n==null||n.event("disqus_thread_page",{event_category:GAEventCategories.Comment,event_label:`id: ${e.postId}`}),!g.has(e.postId)){const L=await nodepress$1.get("/disqus/thread",{params:{post_id:e.postId}});g.set(e.postId,L.result)}const S=r.disqusConfig.forum,N=g.get(e.postId).slug;window.open(`https://disqus.com/home/discussion/${S}/${N}/`)},handleClearLocalProfile:()=>{r.removeLocalUser()}}}}),topbar_vue_vue_type_style_index_0_scoped_d657e1f0_lang="";function _sfc_ssrRender$1k(e,t,n,r,c,d,g,o){const v=resolveComponent("placeholder"),x=resolveComponent("skeleton-line"),E=resolveComponent("i18n"),k=resolveComponent("divider"),S=resolveComponent("ulink");t(ssrRenderComponent(v,mergeProps({loading:e.fetching},r),{loading:withCtx((N,L,P,O)=>{if(L)L(`<div class="topbar-skeleton" data-v-d657e1f0${O}><div class="left" data-v-d657e1f0${O}>`),L(ssrRenderComponent(x,{class:"skeleton-item count"},null,P,O)),e.plain?L("<!---->"):L(ssrRenderComponent(x,{class:"skeleton-item sort"},null,P,O)),L(`</div><div class="right" data-v-d657e1f0${O}>`),L(ssrRenderComponent(x,{class:"skeleton-item user"},null,P,O)),L("</div></div>");else return[createVNode("div",{class:"topbar-skeleton",key:"skeleton"},[createVNode("div",{class:"left"},[createVNode(x,{class:"skeleton-item count"}),e.plain?createCommentVNode("",!0):(openBlock(),createBlock(x,{key:0,class:"skeleton-item sort"}))]),createVNode("div",{class:"right"},[createVNode(x,{class:"skeleton-item user"})])])]}),default:withCtx((N,L,P,O)=>{var V,z,U,W;if(L)L(`<div class="${ssrRenderClass([{plain:e.plain},"topbar"])}" data-v-d657e1f0${O}><div class="statistics" data-v-d657e1f0${O}><div class="${ssrRenderClass([{loading:e.loading},"total"])}" data-v-d657e1f0${O}><i class="iconfont icon-discussion" data-v-d657e1f0${O}></i>`),L(ssrRenderComponent(E,null,{zh:withCtx((Z,re,oe,se)=>{if(re)re(` \u5171 <span class="count" data-v-d657e1f0${se}>${ssrInterpolate(e.statisticsText)}</span> \u6761\u770B\u6CD5 `);else return[createTextVNode(" \u5171 "),createVNode("span",{class:"count"},toDisplayString(e.statisticsText),1),createTextVNode(" \u6761\u770B\u6CD5 ")]}),en:withCtx((Z,re,oe,se)=>{if(re)re(`<span class="count" data-v-d657e1f0${se}>${ssrInterpolate(e.statisticsText)}</span> comments `);else return[createVNode("span",{class:"count"},toDisplayString(e.statisticsText),1),createTextVNode(" comments ")]}),_:1},P,O)),L(`</div><select class="sort" name="sort"${ssrRenderAttr("value",e.sort)} data-v-d657e1f0${O}><option${ssrRenderAttr("value",e.SortType.Desc)} data-v-d657e1f0${O}>`),L(ssrRenderComponent(E,{k:e.LanguageKey.COMMENT_SORT_NEW},null,P,O)),L(`</option><option${ssrRenderAttr("value",e.SortType.Hottest)} data-v-d657e1f0${O}>`),L(ssrRenderComponent(E,{k:e.LanguageKey.COMMENT_SORT_HOT},null,P,O)),L(`</option><option${ssrRenderAttr("value",e.SortType.Asc)} data-v-d657e1f0${O}>`),L(ssrRenderComponent(E,{k:e.LanguageKey.COMMENT_SORT_OLD},null,P,O)),L(`</option></select><button class="disqus" data-v-d657e1f0${O}><i class="iconfont icon-disqus-logo" data-v-d657e1f0${O}></i></button></div><div class="user" data-v-d657e1f0${O}>`),e.user.type===e.UserType.Null?(L(`<div class="unlogin" data-v-d657e1f0${O}><span class="guest" data-v-d657e1f0${O}>`),L(ssrRenderComponent(E,{zh:"\u8BBF\u5BA2\u8EAB\u4EFD",en:"Guest"},null,P,O)),L("</span>"),L(ssrRenderComponent(k,{type:"vertical",size:"sm"},null,P,O)),L(`<button class="disqus" data-v-d657e1f0${O}>`),L(ssrRenderComponent(E,null,{zh:withCtx((Z,re,oe,se)=>{if(re)re(`\u4F7F\u7528<i class="iconfont icon-disqus" data-v-d657e1f0${se}></i>\u767B\u5F55`);else return[createTextVNode("\u4F7F\u7528"),createVNode("i",{class:"iconfont icon-disqus"}),createTextVNode("\u767B\u5F55")]}),en:withCtx((Z,re,oe,se)=>{if(re)re(`Login by<i class="iconfont icon-disqus right" data-v-d657e1f0${se}></i>`);else return[createTextVNode("Login by"),createVNode("i",{class:"iconfont icon-disqus right"})]}),_:1},P,O)),L("</button></div>")):(L(`<div class="logined" data-v-d657e1f0${O}>`),e.user.type===e.UserType.Local?(L(`<!--[--><div class="name" data-v-d657e1f0${O}><i class="icon guest iconfont icon-user" data-v-d657e1f0${O}></i><span class="text" data-v-d657e1f0${O}>${ssrInterpolate(((V=e.user.localProfile)==null?void 0:V.name)||"")}</span><i class="arrow iconfont icon-down-arrow" data-v-d657e1f0${O}></i></div><div class="user-menu" data-v-d657e1f0${O}><ul class="menus" data-v-d657e1f0${O}><li class="item" data-v-d657e1f0${O}><button class="button" data-v-d657e1f0${O}>`),L(ssrRenderComponent(E,null,{zh:withCtx((Z,re,oe,se)=>{if(re)re(`\u6362\u4E3A<i class="iconfont icon-disqus disqus" data-v-d657e1f0${se}></i>\u767B\u5F55`);else return[createTextVNode("\u6362\u4E3A"),createVNode("i",{class:"iconfont icon-disqus disqus"}),createTextVNode("\u767B\u5F55")]}),en:withCtx((Z,re,oe,se)=>{if(re)re(`Login by <i class="iconfont icon-disqus disqus" data-v-d657e1f0${se}></i>`);else return[createTextVNode("Login by "),createVNode("i",{class:"iconfont icon-disqus disqus"})]}),_:1},P,O)),L(`</button></li><li class="item" data-v-d657e1f0${O}><button class="button" data-v-d657e1f0${O}>`),L(ssrRenderComponent(E,{zh:"\u9000\u51FA\u672C\u5730\u8BBF\u5BA2\u8EAB\u4EFD",en:"Clean local profile"},null,P,O)),L("</button></li></ul></div><!--]-->")):e.user.type===e.UserType.Disqus?(L(`<!--[--><div class="name" data-v-d657e1f0${O}><i class="icon disqus iconfont icon-disqus-logo" data-v-d657e1f0${O}></i><span class="text" data-v-d657e1f0${O}>${ssrInterpolate(((z=e.user.disqusProfile)==null?void 0:z.name)||"")}</span><i class="arrow iconfont icon-down-arrow" data-v-d657e1f0${O}></i></div><div class="user-menu" data-v-d657e1f0${O}><ul class="menus" data-v-d657e1f0${O}><li class="item" data-v-d657e1f0${O}>`),L(ssrRenderComponent(S,{class:"button",href:e.user.disqusProfile.profileUrl},{default:withCtx((Z,re,oe,se)=>{if(re)re(ssrRenderComponent(E,{zh:"\u8BBF\u95EE Disqus \u4E3B\u9875",en:"Disqus profile"},null,oe,se));else return[createVNode(E,{zh:"\u8BBF\u95EE Disqus \u4E3B\u9875",en:"Disqus profile"})]}),_:1},P,O)),L(`</li><li class="item" data-v-d657e1f0${O}><button class="button" data-v-d657e1f0${O}>`),L(ssrRenderComponent(E,{zh:"\u6CE8\u9500\u6388\u6743\u8EAB\u4EFD",en:"Disqus logout"},null,P,O)),L("</button></li></ul></div><!--]-->")):L("<!---->"),L("</div>")),L("</div></div>");else return[createVNode("div",{class:["topbar",{plain:e.plain}],key:"element"},[createVNode("div",{class:"statistics"},[createVNode("div",{class:["total",{loading:e.loading}]},[createVNode("i",{class:"iconfont icon-discussion"}),createVNode(E,null,{zh:withCtx(()=>[createTextVNode(" \u5171 "),createVNode("span",{class:"count"},toDisplayString(e.statisticsText),1),createTextVNode(" \u6761\u770B\u6CD5 ")]),en:withCtx(()=>[createVNode("span",{class:"count"},toDisplayString(e.statisticsText),1),createTextVNode(" comments ")]),_:1})],2),createVNode("select",{class:"sort",name:"sort",value:e.sort,onChange:Z=>e.handleSort(Z.target)},[createVNode("option",{value:e.SortType.Desc},[createVNode(E,{k:e.LanguageKey.COMMENT_SORT_NEW},null,8,["k"])],8,["value"]),createVNode("option",{value:e.SortType.Hottest},[createVNode(E,{k:e.LanguageKey.COMMENT_SORT_HOT},null,8,["k"])],8,["value"]),createVNode("option",{value:e.SortType.Asc},[createVNode(E,{k:e.LanguageKey.COMMENT_SORT_OLD},null,8,["k"])],8,["value"])],40,["value","onChange"]),createVNode("button",{class:"disqus",onClick:e.handleDisqusThread},[createVNode("i",{class:"iconfont icon-disqus-logo"})],8,["onClick"])]),createVNode("div",{class:"user"},[e.user.type===e.UserType.Null?(openBlock(),createBlock("div",{key:0,class:"unlogin"},[createVNode("span",{class:"guest"},[createVNode(E,{zh:"\u8BBF\u5BA2\u8EAB\u4EFD",en:"Guest"})]),createVNode(k,{type:"vertical",size:"sm"}),createVNode("button",{class:"disqus",onClick:e.handleDisqusLogin},[createVNode(E,null,{zh:withCtx(()=>[createTextVNode("\u4F7F\u7528"),createVNode("i",{class:"iconfont icon-disqus"}),createTextVNode("\u767B\u5F55")]),en:withCtx(()=>[createTextVNode("Login by"),createVNode("i",{class:"iconfont icon-disqus right"})]),_:1})],8,["onClick"])])):(openBlock(),createBlock("div",{key:1,class:"logined"},[e.user.type===e.UserType.Local?(openBlock(),createBlock(Fragment,{key:0},[createVNode("div",{class:"name"},[createVNode("i",{class:"icon guest iconfont icon-user"}),createVNode("span",{class:"text"},toDisplayString(((U=e.user.localProfile)==null?void 0:U.name)||""),1),createVNode("i",{class:"arrow iconfont icon-down-arrow"})]),createVNode("div",{class:"user-menu"},[createVNode("ul",{class:"menus"},[createVNode("li",{class:"item"},[createVNode("button",{class:"button",onClick:e.handleDisqusLogin},[createVNode(E,null,{zh:withCtx(()=>[createTextVNode("\u6362\u4E3A"),createVNode("i",{class:"iconfont icon-disqus disqus"}),createTextVNode("\u767B\u5F55")]),en:withCtx(()=>[createTextVNode("Login by "),createVNode("i",{class:"iconfont icon-disqus disqus"})]),_:1})],8,["onClick"])]),createVNode("li",{class:"item"},[createVNode("button",{class:"button",onClick:e.handleClearLocalProfile},[createVNode(E,{zh:"\u9000\u51FA\u672C\u5730\u8BBF\u5BA2\u8EAB\u4EFD",en:"Clean local profile"})],8,["onClick"])])])])],64)):e.user.type===e.UserType.Disqus?(openBlock(),createBlock(Fragment,{key:1},[createVNode("div",{class:"name"},[createVNode("i",{class:"icon disqus iconfont icon-disqus-logo"}),createVNode("span",{class:"text"},toDisplayString(((W=e.user.disqusProfile)==null?void 0:W.name)||""),1),createVNode("i",{class:"arrow iconfont icon-down-arrow"})]),createVNode("div",{class:"user-menu"},[createVNode("ul",{class:"menus"},[createVNode("li",{class:"item"},[createVNode(S,{class:"button",href:e.user.disqusProfile.profileUrl},{default:withCtx(()=>[createVNode(E,{zh:"\u8BBF\u95EE Disqus \u4E3B\u9875",en:"Disqus profile"})]),_:1},8,["href"])]),createVNode("li",{class:"item"},[createVNode("button",{class:"button",onClick:e.handleDisqusLogout},[createVNode(E,{zh:"\u6CE8\u9500\u6388\u6743\u8EAB\u4EFD",en:"Disqus logout"})],8,["onClick"])])])])],64)):createCommentVNode("",!0)]))])],2)]}),_:1},n))}const _sfc_setup$1k=_sfc_main$1k.setup;_sfc_main$1k.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/comment/topbar.vue"),_sfc_setup$1k?_sfc_setup$1k(e,t):void 0};const CommentTopbar=_export_sfc(_sfc_main$1k,[["ssrRender",_sfc_ssrRender$1k],["__scopeId","data-v-d657e1f0"]]),_sfc_main$1j=defineComponent({name:"CommentMain",props:{fetching:{type:Boolean,default:!1},hasData:{type:Boolean,required:!0},skeletonCount:{type:Number,default:6}},setup(){return{LanguageKey}}}),main_vue_vue_type_style_index_0_scoped_31048f20_lang="";function _sfc_ssrRender$1j(e,t,n,r,c,d,g,o){const v=resolveComponent("placeholder"),x=resolveComponent("skeleton-base"),E=resolveComponent("skeleton-paragraph"),k=resolveComponent("i18n");t(ssrRenderComponent(v,mergeProps({loading:e.fetching,data:e.hasData},r),{loading:withCtx((S,N,L,P)=>{if(N)N(`<ul class="main-skeleton" data-v-31048f20${P}><!--[-->`),ssrRenderList(e.skeletonCount,O=>{N(`<li class="item" data-v-31048f20${P}><div class="avatar" data-v-31048f20${P}>`),N(ssrRenderComponent(x,null,null,L,P)),N(`</div><div class="content" data-v-31048f20${P}>`),N(ssrRenderComponent(E,{lines:4},null,L,P)),N("</div></li>")}),N("<!--]--></ul>");else return[createVNode("ul",{class:"main-skeleton"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.skeletonCount,O=>(openBlock(),createBlock("li",{key:O,class:"item"},[createVNode("div",{class:"avatar"},[createVNode(x)]),createVNode("div",{class:"content"},[createVNode(E,{lines:4})])]))),128))])]}),placeholder:withCtx((S,N,L,P)=>{if(N)N(`<div class="list-empty" data-v-31048f20${P}>`),N(ssrRenderComponent(k,{k:e.LanguageKey.COMMENT_LIST_EMPTY},null,L,P)),N("</div>");else return[createVNode("div",{class:"list-empty"},[createVNode(k,{k:e.LanguageKey.COMMENT_LIST_EMPTY},null,8,["k"])])]}),default:withCtx((S,N,L,P)=>{if(N)N(`<div class="main" data-v-31048f20${P}>`),ssrRenderSlot(e.$slots,"list",{},null,N,L,P),ssrRenderSlot(e.$slots,"pagination",{},null,N,L,P),N("</div>");else return[createVNode("div",{class:"main"},[renderSlot(e.$slots,"list",{},void 0,!0),renderSlot(e.$slots,"pagination",{},void 0,!0)])]}),_:3},n))}const _sfc_setup$1j=_sfc_main$1j.setup;_sfc_main$1j.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/comment/list/main.vue"),_sfc_setup$1j?_sfc_setup$1j(e,t):void 0};const CommentMain=_export_sfc(_sfc_main$1j,[["ssrRender",_sfc_ssrRender$1j],["__scopeId","data-v-31048f20"]]),getDefaultAvatar=()=>getTargetCDNURL("/images/gravatar.png"),getGravatarByHash=e=>{if(!e)return getDefaultAvatar();const t=`https://www.gravatar.com/avatar/${e}`;return isDev?t:getTargetProxyURL(t,ProxyModule.Default)},getDisqusAvatarByUsername=e=>{const t=`https://disqus.com/api/users/avatars/${e}.jpg`;return isSPA?t:getTargetProxyURL(t,ProxyModule.Disqus)},_sfc_main$1i=defineComponent({name:"Markdown",props:{markdown:String,html:String,tagMap:Object,relink:{type:Boolean,default:!1},sanitize:{type:Boolean,default:!1},plain:{type:Boolean,default:!1},compact:{type:Boolean,default:!1}},setup(e){const{isDarkTheme:t}=useEnhancer(),{element:n}=useLozad(),r=computed(()=>e.markdown?markdownToHTML(e.markdown,{sanitize:e.sanitize,relink:e.relink,tagMap:e.tagMap}):e.html||"");return{element:n,isDarkTheme:t,markdownHTML:r}}}),markdown_vue_vue_type_style_index_0_lang="";function _sfc_ssrRender$1i(e,t,n,r,c,d,g,o){t(`<section${ssrRenderAttrs(mergeProps({ref:"element",class:[e.plain?"global-markdown-plain":"global-markdown-html",{compact:e.compact,dark:e.isDarkTheme}]},r))}>${e.markdownHTML}</section>`)}const _sfc_setup$1i=_sfc_main$1i.setup;_sfc_main$1i.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/common/markdown.vue"),_sfc_setup$1i?_sfc_setup$1i(e,t):void 0};const Markdown=_export_sfc(_sfc_main$1i,[["ssrRender",_sfc_ssrRender$1i]]),_sfc_main$1h=defineComponent({name:"CommentItemLink",props:{href:String}});function _sfc_ssrRender$1h(e,t,n,r,c,d,g,o){e.href?(t(`<a${ssrRenderAttrs(mergeProps({target:"_blank",rel:"external nofollow noopener",href:e.href},e.$attrs,r))}>`),ssrRenderSlot(e.$slots,"default",{},null,t,n),t("</a>")):(t(`<span${ssrRenderAttrs(mergeProps(e.$attrs,r))}>`),ssrRenderSlot(e.$slots,"default",{},null,t,n),t("</span>"))}const _sfc_setup$1h=_sfc_main$1h.setup;_sfc_main$1h.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/comment/list/link.vue"),_sfc_setup$1h?_sfc_setup$1h(e,t):void 0};const CommentLink=_export_sfc(_sfc_main$1h,[["ssrRender",_sfc_ssrRender$1h]]),OFFSET=127397,countryCodeToEmoji=e=>e.toUpperCase().replace(/./g,t=>String.fromCodePoint(t.charCodeAt(0)+OFFSET)),municipalitys=["Shanghai","Beijing","Tianjin","Chongqing","Chungking"],_sfc_main$1g=defineComponent({name:"CommentItemLocation",props:{location:{type:Object,required:!0}},setup(e){const t=computed(()=>e.location.country_code||e.location.country),n=computed(()=>countryCodeToEmoji(e.location.country_code)),r=computed(()=>e.location.country_code==="CN"&&municipalitys.includes(e.location.region)?e.location.region:e.location.city);return{emojiText:n,countryText:t,cityText:r}}}),location_vue_vue_type_style_index_0_scoped_546f45d5_lang="";function _sfc_ssrRender$1g(e,t,n,r,c,d,g,o){t(`<span${ssrRenderAttrs(mergeProps({class:"location"},r))} data-v-546f45d5>`),e.emojiText?t(`<span class="emoji" data-v-546f45d5>${ssrInterpolate(e.emojiText)}</span>`):t('<i class="iconfont icon-earth" data-v-546f45d5></i>'),t(`<span data-v-546f45d5>${ssrInterpolate(e.countryText)}</span><span class="separator" data-v-546f45d5>\u2022</span><span class="city" data-v-546f45d5>${ssrInterpolate(e.cityText)}</span></span>`)}const _sfc_setup$1g=_sfc_main$1g.setup;_sfc_main$1g.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/comment/list/location.vue"),_sfc_setup$1g?_sfc_setup$1g(e,t):void 0};const CommentLocation=_export_sfc(_sfc_main$1g,[["ssrRender",_sfc_ssrRender$1g],["__scopeId","data-v-546f45d5"]]),osIconsNameMap={"Mac OS":"icon-apple",Windows:"icon-windows",Android:"icon-android",Ubuntu:"icon-ubuntu",Linux:"icon-linux",iOS:"icon-apple"},browersIconsNameMap={Chrome:"icon-chrome",Chromium:"icon-chrome",WeChat:"icon-wechat",QQ:"icon-qq",Safari:"icon-safari","Mobile Safari":"icon-safari",UCBrowser:"icon-uc",Maxthon:"icon-maxthon",Firefox:"icon-firefox",IE:"icon-ie",Opera:"icon-opera",Edge:"icon-edge"},_sfc_main$1f=defineComponent({name:"CommentItemUserAgent",props:{userAgent:{type:String,required:!0}},setup(e){const t=computed(()=>uaParser(e.userAgent)),n=computed(()=>{const c=t.value.result.os.name;return c&&osIconsNameMap[c]}),r=computed(()=>{const c=t.value.result.browser.name;return c?browersIconsNameMap[c]:null});return{uaResult:t,osIconName:n,browserIconName:r}}}),userAgent_vue_vue_type_style_index_0_scoped_e19c7474_lang="";function _sfc_ssrRender$1f(e,t,n,r,c,d,g,o){t(`<span${ssrRenderAttrs(mergeProps({class:"user-agent"},r))} data-v-e19c7474><span class="os" data-v-e19c7474>`),e.osIconName?t(`<i class="${ssrRenderClass([e.osIconName,"iconfont"])}" data-v-e19c7474></i>`):t("<!---->"),t(`<span data-v-e19c7474>${ssrInterpolate(e.uaResult.result.os.name)}</span></span><span class="browser" data-v-e19c7474>`),e.browserIconName?t(`<i class="${ssrRenderClass([e.browserIconName,"iconfont"])}" data-v-e19c7474></i>`):t("<!---->"),t(`<span data-v-e19c7474>${ssrInterpolate(e.uaResult.result.browser.name)}</span></span></span>`)}const _sfc_setup$1f=_sfc_main$1f.setup;_sfc_main$1f.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/comment/list/user-agent.vue"),_sfc_setup$1f?_sfc_setup$1f(e,t):void 0};const CommentUserAgent=_export_sfc(_sfc_main$1f,[["ssrRender",_sfc_ssrRender$1f],["__scopeId","data-v-e19c7474"]]),_sfc_main$1e=defineComponent({name:"CommentItem",components:{Markdown,CommentLink,CommentLocation,CommentUserAgent},props:{comment:{type:Object,required:!0},liked:{type:Boolean,default:!1},disliked:{type:Boolean,default:!1},isReply:{type:Boolean,default:!1},isChild:{type:Boolean,default:!1},hasChild:{type:Boolean,default:!1},hiddenAvatar:{type:Boolean,default:!1},hiddenUa:{type:Boolean,default:!1},plainVote:{type:Boolean,default:!1}},emits:[CommentEvents.Vote,CommentEvents.Delete,CommentEvents.Reply,CommentEvents.CancelReply],setup(e,t){const{i18n:n}=useEnhancer(),r=useCommentStore(),c=useIdentityStore(),d=computed(()=>r.deleting),g=computed(()=>getExtendValue(e.comment.extends,"disqus-author-id")),o=computed(()=>getExtendValue(e.comment.extends,"disqus-author-username")),v=computed(()=>Boolean(g.value)),x=computed(()=>Boolean(o.value)&&Boolean(c.disqusConfig)&&o.value===c.disqusConfig.admin_username),E=computed(()=>o.value?getDisqusAvatarByUsername(o.value):getGravatarByHash(e.comment.author.email_hash)),k=computed(()=>e.comment.author.site?e.comment.author.site:o.value?getDisqusUserURL(o.value):UNDEFINED),S=computed(()=>{var U;return c.user.type===UserType.Disqus&&g.value?((U=c.user.disqusProfile)==null?void 0:U.id)===g.value:!1});return{LanguageKey,isDeleting:d,isDisqusAuthor:v,isAdminAuthor:x,isDeleteable:S,authorAvatar:E,authorURL:k,getCommentItemElementID,getReplyParentCommentText:U=>{var oe;const W=(oe=r.comments.find(se=>se.id===U))==null?void 0:oe.author.name,Z=W?`@${W}`:"";return`${`#${U}`} ${Z}`},firstUpperCase,handleVote:U=>{t.emit(CommentEvents.Vote,e.comment.id,U)},handleDelete:()=>{window.confirm(n.t(LanguageKey.COMMENT_DELETE_CONFIRM))&&t.emit(CommentEvents.Delete,e.comment.id)},handleReply:()=>{t.emit(CommentEvents.Reply,e.comment.id)},handleCancelReply:()=>{t.emit(CommentEvents.CancelReply,e.comment.id)},scrollToCommentItem:U=>{scrollToAnchor(getCommentItemElementID(U),-300)}}}}),item_vue_vue_type_style_index_0_scoped_cac89891_lang="";function _sfc_ssrRender$1e(e,t,n,r,c,d,g,o){const v=resolveComponent("comment-link"),x=resolveComponent("i18n"),E=resolveComponent("comment-location"),k=resolveComponent("comment-user-agent"),S=resolveComponent("markdown"),N=resolveComponent("udate");t(`<li${ssrRenderAttrs(mergeProps({class:["comment-item",{"hide-avatar":e.hiddenAvatar,"is-child":e.isChild,"has-child":e.hasChild}],key:e.comment.id,id:e.getCommentItemElementID(e.comment.id)},r))} data-v-cac89891><div data-v-cac89891>`),e.hiddenAvatar?t("<!---->"):(t('<div class="cm-avatar" data-v-cac89891>'),t(ssrRenderComponent(v,{class:"link",href:e.authorURL},{default:withCtx((L,P,O,V)=>{if(P)P(`<img${ssrRenderAttr("src",e.authorAvatar)}${ssrRenderAttr("alt",e.comment.author.name)} draggable="false" data-v-cac89891${V}><span class="${ssrRenderClass([e.isDisqusAuthor?"disqus":"anonymous","role"])}" data-v-cac89891${V}>`),e.isDisqusAuthor?P(`<i class="iconfont icon-disqus-logo" data-v-cac89891${V}></i>`):P(`<i class="iconfont icon-user" data-v-cac89891${V}></i>`),P("</span>");else return[createVNode("img",{src:e.authorAvatar,alt:e.comment.author.name,draggable:"false"},null,8,["src","alt"]),createVNode("span",{class:["role",e.isDisqusAuthor?"disqus":"anonymous"]},[e.isDisqusAuthor?(openBlock(),createBlock("i",{key:0,class:"iconfont icon-disqus-logo"})):(openBlock(),createBlock("i",{key:1,class:"iconfont icon-user"}))],2)]}),_:1},n)),t("</div>")),t('<div class="cm-body" data-v-cac89891><div class="cm-header" data-v-cac89891><div class="left" data-v-cac89891>'),t(ssrRenderComponent(v,{class:["username",{url:Boolean(e.authorURL)}],href:e.authorURL},{default:withCtx((L,P,O,V)=>{if(P)P(`${ssrInterpolate(e.firstUpperCase(e.comment.author.name))}`);else return[createTextVNode(toDisplayString(e.firstUpperCase(e.comment.author.name)),1)]}),_:1},n)),e.isAdminAuthor?(t('<span class="moderator" data-v-cac89891>'),t(ssrRenderComponent(x,{k:e.LanguageKey.COMMENT_MODERATOR},null,n)),t("</span>")):t("<!---->"),t('<span class="author-info" data-v-cac89891>'),e.comment.ip_location?t(ssrRenderComponent(E,{location:e.comment.ip_location},null,n)):t("<!---->"),e.comment.agent&&!e.hiddenUa?t(ssrRenderComponent(k,{"user-agent":e.comment.agent},null,n)):t("<!---->"),t(`</span></div><div class="right" data-v-cac89891><span class="flool" data-v-cac89891>#${ssrInterpolate(e.comment.id)}</span></div></div><div class="cm-content" data-v-cac89891>`),e.comment.pid?(t('<p class="reply" data-v-cac89891><span class="text" data-v-cac89891>'),t(ssrRenderComponent(x,{k:e.LanguageKey.COMMENT_REPLY},null,n)),t(`</span><button class="parent" data-v-cac89891>${ssrInterpolate(e.getReplyParentCommentText(e.comment.pid))}</button>`),t(ssrRenderComponent(x,{zh:"\uFF1A",en:":"},null,n)),t("</p>")):t("<!---->"),t('<div class="markdown" data-v-cac89891>'),t(ssrRenderComponent(S,{markdown:e.comment.content,sanitize:!0,compact:!0},null,n)),t('</div></div><div class="cm-footer" data-v-cac89891><div class="left" data-v-cac89891><span class="create_at" data-v-cac89891>'),t(ssrRenderComponent(N,{to:"ago",date:e.comment.create_at},null,n)),t(`</span><button class="${ssrRenderClass([{actived:e.liked,alived:Boolean(e.comment.likes)},"vote"])}"${includeBooleanAttr(e.liked)?" disabled":""} data-v-cac89891><i class="iconfont icon-like" data-v-cac89891></i>`),e.plainVote?t("<!---->"):t(ssrRenderComponent(x,{k:e.LanguageKey.COMMENT_UPVOTE},null,n)),t(`<span class="count" data-v-cac89891>(${ssrInterpolate(e.comment.likes)})</span></button><button class="${ssrRenderClass([{actived:e.disliked,alived:Boolean(e.comment.dislikes)},"vote"])}"${includeBooleanAttr(e.disliked)?" disabled":""} data-v-cac89891><i class="iconfont icon-dislike" data-v-cac89891></i>`),e.plainVote?t("<!---->"):t(ssrRenderComponent(x,{k:e.LanguageKey.COMMENT_DOWNVOTE},null,n)),t(`<span class="count" data-v-cac89891>(${ssrInterpolate(e.comment.dislikes)})</span></button>`),e.isReply?(t('<button class="reply" data-v-cac89891><i class="iconfont icon-cancel" data-v-cac89891></i>'),t(ssrRenderComponent(x,{k:e.LanguageKey.COMMENT_REPLY_CANCEL},null,n)),t("</button>")):(t('<button class="reply" data-v-cac89891><i class="iconfont icon-reply" data-v-cac89891></i>'),t(ssrRenderComponent(x,{k:e.LanguageKey.COMMENT_REPLY},null,n)),t("</button>")),t('</div><div class="right" data-v-cac89891>'),e.isDeleteable?(t(`<button class="delete"${includeBooleanAttr(e.isDeleting)?" disabled":""} data-v-cac89891><i class="iconfont icon-delete" data-v-cac89891></i>`),t(ssrRenderComponent(x,{k:e.LanguageKey.COMMENT_DELETE},null,n)),t("</button>")):t("<!---->"),t("</div></div>"),e.isReply?(t('<div class="cm-reply" data-v-cac89891>'),ssrRenderSlot(e.$slots,"reply",{},null,t,n),t("</div>")):t("<!---->"),t('<div class="cm-children" data-v-cac89891>'),ssrRenderSlot(e.$slots,"children",{},null,t,n),t("</div></div></div></li>")}const _sfc_setup$1e=_sfc_main$1e.setup;_sfc_main$1e.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/comment/list/item.vue"),_sfc_setup$1e?_sfc_setup$1e(e,t):void 0};const CommentItem=_export_sfc(_sfc_main$1e,[["ssrRender",_sfc_ssrRender$1e],["__scopeId","data-v-cac89891"]]),_sfc_main$1d=defineComponent({name:"CommentList",components:{CommentItem},props:{comments:{type:Array,required:!0},replyPid:{type:Number,required:!0},isChildList:{type:Boolean,default:!1},hiddenAvatar:{type:Boolean,default:!1},hiddenUa:{type:Boolean,default:!1},plainVote:{type:Boolean,required:!1}},emits:[CommentEvents.Reply,CommentEvents.Delete,CommentEvents.CancelReply],setup(e,t){const{i18n:n,gtag:r}=useEnhancer(),{comment:c,identity:d}=useStores(),g=k=>{t.emit(CommentEvents.Reply,k)},o=k=>{t.emit(CommentEvents.CancelReply,k)},v=async k=>{t.emit(CommentEvents.Delete,k)},x=async(k,S)=>{if(r==null||r.event("vote_comment",{event_category:GAEventCategories.Comment,event_label:S?"like":"dislike"}),S&&d.isLikedComment(k)||!S&&d.isDislikedComment(k))return!1;try{await c.postCommentVote(k,S?1:-1),S?d.likeComment(k):d.dislikeComment(k)}catch(N){const L=n.t(LanguageKey.POST_ACTION_ERROR);console.warn(L,N),alert(L)}},E=k=>k.map(S=>({comment:S,children:[]}));return{isLikedComment:d.isLikedComment,isDislikedComment:d.isDislikedComment,handleVoteComment:x,handleDeleteComment:v,handleReplyComment:g,handleCancelReply:o,buildeCommentTree:E}}}),list_vue_vue_type_style_index_0_scoped_d3edbdab_lang="";function _sfc_ssrRender$1d(e,t,n,r,c,d,g,o){const v=resolveComponent("comment-item"),x=resolveComponent("comment-list");t(`<ul${ssrRenderAttrs(mergeProps({class:["comment-list",e.isChildList?"child":"root"]},r))} data-v-d3edbdab><!--[-->`),ssrRenderList(e.comments,E=>{t(ssrRenderComponent(v,{key:E.comment.id,comment:E.comment,liked:e.isLikedComment(E.comment.id),disliked:e.isDislikedComment(E.comment.id),"has-child":Boolean(E.children.length),"is-child":e.isChildList,"is-reply":e.replyPid===E.comment.id,"hidden-avatar":e.hiddenAvatar,"hidden-ua":e.hiddenUa,"plain-vote":e.plainVote,onVote:e.handleVoteComment,onDelete:e.handleDeleteComment,onReply:e.handleReplyComment,onCancelReply:e.handleCancelReply},createSlots({reply:withCtx((k,S,N,L)=>{if(S)ssrRenderSlot(e.$slots,"reply",{comment:E.comment,isChild:!1},null,S,N,L);else return[renderSlot(e.$slots,"reply",{comment:E.comment,isChild:!1},void 0,!0)]}),_:2},[E.children.length?{name:"children",fn:withCtx((k,S,N,L)=>{if(S)S(ssrRenderComponent(x,{comments:e.buildeCommentTree(E.children),"is-child-list":!0,"hidden-avatar":e.hiddenAvatar,"hidden-ua":e.hiddenUa,"plain-vote":e.plainVote,"reply-pid":e.replyPid,onDelete:e.handleDeleteComment,onReply:e.handleReplyComment,onCancelReply:e.handleCancelReply},{reply:withCtx((P,O,V,z)=>{if(O)ssrRenderSlot(e.$slots,"reply",{comment:E.comment,isChild:!0},null,O,V,z);else return[renderSlot(e.$slots,"reply",{comment:E.comment,isChild:!0},void 0,!0)]}),_:2},N,L));else return[createVNode(x,{comments:e.buildeCommentTree(E.children),"is-child-list":!0,"hidden-avatar":e.hiddenAvatar,"hidden-ua":e.hiddenUa,"plain-vote":e.plainVote,"reply-pid":e.replyPid,onDelete:e.handleDeleteComment,onReply:e.handleReplyComment,onCancelReply:e.handleCancelReply},{reply:withCtx(()=>[renderSlot(e.$slots,"reply",{comment:E.comment,isChild:!0},void 0,!0)]),_:2},1032,["comments","hidden-avatar","hidden-ua","plain-vote","reply-pid","onDelete","onReply","onCancelReply"])]}),key:"0"}:void 0]),n))}),t("<!--]--></ul>")}const _sfc_setup$1d=_sfc_main$1d.setup;_sfc_main$1d.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/comment/list/list.vue"),_sfc_setup$1d?_sfc_setup$1d(e,t):void 0};const CommentList=_export_sfc(_sfc_main$1d,[["ssrRender",_sfc_ssrRender$1d],["__scopeId","data-v-d3edbdab"]]),_sfc_main$1c=defineComponent({name:"CommentPagination",props:{fetching:{type:Boolean,required:!0},remain:{type:Number,required:!0},pagination:{type:Object,required:!1}},setup(e,t){const{gtag:n}=useEnhancer(),r=computed(()=>{var d,g,o;return((d=e.pagination)==null?void 0:d.total_page)>1&&((g=e.pagination)==null?void 0:g.current_page)!==((o=e.pagination)==null?void 0:o.total_page)});return{COMMENT_FOOTER_ELEMENT_ID,hasMore:r,handleLoadmore:()=>{n==null||n.event("loadmore",{event_category:GAEventCategories.Comment}),e.pagination&&t.emit(CommentEvents.Page,e.pagination.current_page+1)}}}}),loadmore_vue_vue_type_style_index_0_scoped_7dfa5296_lang="";function _sfc_ssrRender$1c(e,t,n,r,c,d,g,o){const v=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:"loadmore",id:e.COMMENT_FOOTER_ELEMENT_ID},r))} data-v-7dfa5296>`),e.hasMore?(t(`<button class="button"${includeBooleanAttr(e.fetching)?" disabled":""} data-v-7dfa5296>`),e.fetching?t(ssrRenderComponent(v,{zh:"\u52A0\u8F7D\u4E2D...",en:"Loading..."},null,n)):(t("<!--[-->"),t(ssrRenderComponent(v,null,{zh:withCtx((x,E,k,S)=>{if(E)E(`\u52A0\u8F7D\u66F4\u591A\u8BC4\u8BBA\uFF08\u5269 ${ssrInterpolate(e.remain)} \u6761\uFF09`);else return[createTextVNode("\u52A0\u8F7D\u66F4\u591A\u8BC4\u8BBA\uFF08\u5269 "+toDisplayString(e.remain)+" \u6761\uFF09",1)]}),en:withCtx((x,E,k,S)=>{if(E)E(`Loadmore (remain ${ssrInterpolate(e.remain)})`);else return[createTextVNode("Loadmore (remain "+toDisplayString(e.remain)+")",1)]}),_:1},n)),t('<i class="iconfont icon-loadmore" data-v-7dfa5296></i><!--]-->')),t("</button>")):(t('<span class="no-more" data-v-7dfa5296>'),t(ssrRenderComponent(v,{zh:"\u6C34\u5C3D\u5C71\u7A77",en:"NO MORE"},null,n)),t("</span>")),t("</div>")}const _sfc_setup$1c=_sfc_main$1c.setup;_sfc_main$1c.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/comment/loadmore.vue"),_sfc_setup$1c?_sfc_setup$1c(e,t):void 0};const CommentLoadmore=_export_sfc(_sfc_main$1c,[["ssrRender",_sfc_ssrRender$1c],["__scopeId","data-v-7dfa5296"]]),_sfc_main$1b=defineComponent({name:"CommentPublisherMain",props:{fetching:{type:Boolean,default:!1}}}),main_vue_vue_type_style_index_0_scoped_69c1136c_lang="";function _sfc_ssrRender$1b(e,t,n,r,c,d,g,o){const v=resolveComponent("placeholder"),x=resolveComponent("skeleton-base");t(ssrRenderComponent(v,mergeProps({loading:e.fetching},r),{loading:withCtx((E,k,S,N)=>{if(k)k(`<div class="publisher-skeleton" data-v-69c1136c${N}><div class="avatar" data-v-69c1136c${N}>`),k(ssrRenderComponent(x,null,null,S,N)),k(`</div><div class="content" data-v-69c1136c${N}>`),k(ssrRenderComponent(x,null,null,S,N)),k("</div></div>");else return[createVNode("div",{class:"publisher-skeleton",key:"skeleton"},[createVNode("div",{class:"avatar"},[createVNode(x)]),createVNode("div",{class:"content"},[createVNode(x)])])]}),default:withCtx((E,k,S,N)=>{if(k)ssrRenderSlot(e.$slots,"default",{},null,k,S,N);else return[renderSlot(e.$slots,"default",{},void 0,!0)]}),_:3},n))}const _sfc_setup$1b=_sfc_main$1b.setup;_sfc_main$1b.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/comment/publisher/main.vue"),_sfc_setup$1b?_sfc_setup$1b(e,t):void 0};const CommentPublisherMain=_export_sfc(_sfc_main$1b,[["ssrRender",_sfc_ssrRender$1b],["__scopeId","data-v-69c1136c"]]),_sfc_main$1a=defineComponent({name:"CommentPublisher",props:{id:{type:String,required:!1},disabled:{type:Boolean,default:!1},profile:{type:Object,required:!0},total:{type:Number,default:0,required:!1},bordered:{type:Boolean,default:!1},defaultBlossomed:{type:Boolean,default:!0},hiddenAvatar:{type:Boolean,required:!1},fixedAvatar:{type:Boolean,required:!1}},emits:[CommentEvents.Blossom,"update:profile"],setup(e,t){const{i18n:n,gtag:r}=useEnhancer(),{user:c}=pinia_prod.storeToRefs(useIdentityStore()),d=computed(()=>{var x,E;return c.value.type===UserType.Local?getGravatarByHash((x=c.value.localProfile)==null?void 0:x.email_hash):c.value.type===UserType.Disqus?getDisqusAvatarByUsername((E=c.value.disqusProfile)==null?void 0:E.username):getDefaultAvatar()}),g=(x,E)=>{t.emit("update:profile",{...e.profile,[x]:E.target.value})},o=ref(e.defaultBlossomed),v=()=>{o.value=!0,t.emit(CommentEvents.Blossom),r==null||r.event("focus_publisher",{event_category:GAEventCategories.Comment})};return{user:c,avatar:d,blossomed:o,UserType,LanguageKey,t:n.t,firstUpperCase,handleUpdateProfile:g,handleBlossom:v}}}),publisher_vue_vue_type_style_index_0_scoped_57e134b8_lang="";function _sfc_ssrRender$1a(e,t,n,r,c,d,g,o){const v=resolveComponent("uimage"),x=resolveComponent("i18n");t(`<form${ssrRenderAttrs(mergeProps({key:"publisher",class:["publisher",{"hidden-avatar":e.hiddenAvatar,"fixed-avatar":e.fixedAvatar,blossomed:e.blossomed,bordered:e.bordered}],name:"comment",id:e.id},r))} data-v-57e134b8>`),e.user.type===e.UserType.Null?t(`<div class="profile" style="${ssrRenderStyle(e.blossomed?null:{display:"none"})}" data-v-57e134b8><div class="name" data-v-57e134b8><input${ssrRenderAttr("value",e.profile.name)} required type="text" name="name" autocomplete="on"${includeBooleanAttr(e.disabled)?" disabled":""}${ssrRenderAttr("placeholder",e.t(e.LanguageKey.COMMENT_POST_NAME)+" *")} data-v-57e134b8></div><div class="email" data-v-57e134b8><input${ssrRenderAttr("value",e.profile.email)} required type="email" name="email" autocomplete="on"${includeBooleanAttr(e.disabled)?" disabled":""}${ssrRenderAttr("placeholder",e.t(e.LanguageKey.COMMENT_POST_EMAIL)+" *")} data-v-57e134b8></div><div class="site" data-v-57e134b8><input${ssrRenderAttr("value",e.profile.site)} type="url" name="url" autocomplete="on"${includeBooleanAttr(e.disabled)?" disabled":""}${ssrRenderAttr("placeholder",e.t(e.LanguageKey.COMMENT_POST_SITE))} data-v-57e134b8></div></div>`):t("<!---->"),t('<div class="postbox" data-v-57e134b8>'),e.hiddenAvatar?t("<!---->"):(t('<div class="avatar" data-v-57e134b8>'),t(ssrRenderComponent(v,{alt:e.profile.name,src:e.avatar},null,n)),t("</div>")),e.blossomed?(t('<div class="editor" data-v-57e134b8>'),ssrRenderSlot(e.$slots,"pen",{},null,t,n),t("</div>")):(t('<div class="placeholder" data-v-57e134b8>'),t(ssrRenderComponent(x,{zh:"\u5728\u4E0B\u6709\u4E00\u62D9\u89C1\uFF0C\u4E0D\u77E5...",en:`${e.total?"Join":"Start"} the discussion...`},null,n)),t("</div>")),t("</div></form>")}const _sfc_setup$1a=_sfc_main$1a.setup;_sfc_main$1a.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/comment/publisher/publisher.vue"),_sfc_setup$1a?_sfc_setup$1a(e,t):void 0};const CommentPublisher=_export_sfc(_sfc_main$1a,[["ssrRender",_sfc_ssrRender$1a],["__scopeId","data-v-57e134b8"]]),focusPosition=(e,t=0)=>{var d;if(!e)return;if(e.focus(),!t){const g=(d=window.getSelection())==null?void 0:d.getRangeAt(0),o=g.cloneRange();return o.selectNodeContents(e),o.setEnd(g.endContainer,g.endOffset),o.toString().length}let n=0,r=!1;const c=g=>{const o=g.childNodes;for(let v=0;v<o.length;++v){const x=o[v],E=x.nodeType===1&&x.tagName==="BR";if(x.nodeType!==3&&!E){c(x);return}if(n+=E?1:x.textContent.length,n>=t){if(r){c(x);return}r=!0;const k=document.getSelection(),S=document.createRange(),N=n-x.textContent.length;S.setStart(x,t-N),S.setEnd(x,t-N),k.removeAllRanges(),k.addRange(S);break}}};c(e)},insertContent=e=>{const{element:t,content:n}=e,[r,c]=Array.isArray(n)?n:[n];if(!t||!r&&!c)return!1;const d=t.innerText,g=(window.getSelection||document.getSelection)(),o=g==null?void 0:g.toString();if(o){const x=!!r&&!c?r:r+o+c,E=d.replace(o,x);t.innerText=E,focusPosition(t,E.indexOf(x)+x.length-1)}else{const v=r+c,x=(()=>{try{return g.getRangeAt(0)}catch{}})(),E=x==null?void 0:x.startOffset,k=x==null?void 0:x.endOffset;if(x&&E===k&&E>0){const S=[d.slice(0,E),v,d.slice(E)];t.innerText=S.join(""),focusPosition(t,S[0].length+S[1].length-1)}else{const S=d+v;t.innerText=S,focusPosition(t,S.length-1)}}},_sfc_main$19=defineComponent({name:"CommentPen",components:{Markdown},props:{modelValue:{type:String,required:!1},disabled:{type:Boolean,default:!1},previewed:{type:Boolean,default:!1},posting:{type:Boolean,required:!0},bordered:{type:Boolean,required:!1},autoFocus:{type:Boolean,default:!1},hiddenStationery:{type:Boolean,default:!1}},emits:["update:modelValue","update:previewed",CommentEvents.Submit],setup(e,t){const{i18n:n}=useEnhancer(),{user:r}=pinia_prod.storeToRefs(useIdentityStore()),c=ref(e.modelValue||""),d=ref(e.previewed||!1),g=ref();let o=null;const v=()=>{d.value=!d.value,t.emit("update:previewed",d.value)},x=()=>{var V;const O=(V=g.value)==null?void 0:V.innerText;O!==c.value&&(c.value=O,t.emit("update:modelValue",O))},E=O=>{O.preventDefault(),t.emit(CommentEvents.Submit,c.value)},k=(O,V="")=>{insertContent({element:g.value,content:[O,V]}),x()},S=O=>{k(` ${O} `)},N=()=>{k(" ![","](https://) ")},L=()=>{k(" [","](https://) ")},P=()=>{k("\n```javascript\n","\n```\n")};return watch(()=>e.modelValue,(O="")=>{O!==c.value&&(c.value=O,g.value&&(g.value.innerText=O))}),watch(()=>e.previewed,O=>{O!==d.value&&(d.value=O)}),onMounted(()=>{e.autoFocus&&nextTick$1().then(()=>{g.value&&focusPosition(g.value)}),o=new MutationObserver(()=>x()),o.observe(g.value,{attributes:!0,characterData:!0,childList:!0,subtree:!0})}),onBeforeUnmount(()=>{o==null||o.disconnect()}),{t:n.t,user:r,UserType,EMOJIS,VALUABLE_LINKS,LanguageKey,inputElement:g,content:c,isPreviewed:d,insertEmoji:S,insertImage:N,insertLink:L,insertCode:P,handleInputChange:x,handleTogglePreview:v,handleSubmit:E,enableCopyrighter,disableCopyrighter}}}),pen_vue_vue_type_style_index_0_scoped_41adcf04_lang="";function _sfc_ssrRender$19(e,t,n,r,c,d,g,o){const v=resolveComponent("markdown"),x=resolveComponent("ulink"),E=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:["pen",{bordered:e.bordered}]},r))} data-v-41adcf04><div class="markdown" data-v-41adcf04><div class="markdown-input"${ssrRenderAttr("contenteditable",!e.disabled)}${ssrRenderAttr("placeholder",e.t(e.LanguageKey.COMMENT_POST_PLACEHOLDER))} data-v-41adcf04></div>`),e.isPreviewed?(t('<div class="preview-content" data-v-41adcf04>'),t(ssrRenderComponent(v,{markdown:e.content,sanitize:!0,compact:!0},null,n)),t("</div>")):t("<!---->"),t('</div><div class="pencilbox" data-v-41adcf04><div class="stationery" data-v-41adcf04>'),t(ssrRenderComponent(x,{class:"markdown",title:"markdown",href:e.VALUABLE_LINKS.MARKDOWN},{default:withCtx((k,S,N,L)=>{if(S)S(`<i class="iconfont icon-markdown" data-v-41adcf04${L}></i>`);else return[createVNode("i",{class:"iconfont icon-markdown"})]}),_:1},n)),e.hiddenStationery?t("<!---->"):(t(`<!--[--><button class="emoji" title="emoji" type="button"${includeBooleanAttr(e.disabled||e.isPreviewed)?" disabled":""} data-v-41adcf04><i class="iconfont icon-emoji" data-v-41adcf04></i><div class="emoji-box" data-v-41adcf04><ul class="emoji-list" data-v-41adcf04><!--[-->`),ssrRenderList(e.EMOJIS,(k,S)=>{t(`<li class="item" data-v-41adcf04>${ssrInterpolate(k)}</li>`)}),t(`<!--]--></ul></div></button><button class="image" title="image"${includeBooleanAttr(e.disabled||e.isPreviewed)?" disabled":""} data-v-41adcf04><i class="iconfont icon-image" data-v-41adcf04></i></button><button class="link" title="link"${includeBooleanAttr(e.disabled||e.isPreviewed)?" disabled":""} data-v-41adcf04><i class="iconfont icon-link" data-v-41adcf04></i></button><button class="code" title="code"${includeBooleanAttr(e.disabled||e.isPreviewed)?" disabled":""} data-v-41adcf04><i class="iconfont icon-code" data-v-41adcf04></i></button><button title="preview" class="${ssrRenderClass([{actived:e.isPreviewed},"preview"])}"${includeBooleanAttr(e.disabled)?" disabled":""} data-v-41adcf04><i class="${ssrRenderClass([e.isPreviewed?"icon-eye-close":"icon-eye","iconfont"])}" data-v-41adcf04></i></button><!--]-->`)),t(`</div><button type="submit" class="submit"${includeBooleanAttr(e.disabled)?" disabled":""} data-v-41adcf04>`),e.posting?t(ssrRenderComponent(E,{zh:"\u53D1\u5E03\u4E2D...",en:"Posting..."},null,n)):e.user.type===e.UserType.Local?t(ssrRenderComponent(E,null,{zh:withCtx((k,S,N,L)=>{var P,O;if(S)S(`\u4EE5 ${ssrInterpolate((P=e.user.localProfile)==null?void 0:P.name)} \u7684\u8EAB\u4EFD\u53D1\u5E03`);else return[createTextVNode("\u4EE5 "+toDisplayString((O=e.user.localProfile)==null?void 0:O.name)+" \u7684\u8EAB\u4EFD\u53D1\u5E03",1)]}),en:withCtx((k,S,N,L)=>{var P,O;if(S)S(`Post as ${ssrInterpolate((P=e.user.localProfile)==null?void 0:P.name)}`);else return[createTextVNode("Post as "+toDisplayString((O=e.user.localProfile)==null?void 0:O.name),1)]}),_:1},n)):e.user.type===e.UserType.Disqus?t(ssrRenderComponent(E,null,{zh:withCtx((k,S,N,L)=>{var P,O;if(S)S(`\u4EE5 ${ssrInterpolate((P=e.user.disqusProfile)==null?void 0:P.name)} \u7684\u8EAB\u4EFD\u53D1\u5E03`);else return[createTextVNode("\u4EE5 "+toDisplayString((O=e.user.disqusProfile)==null?void 0:O.name)+" \u7684\u8EAB\u4EFD\u53D1\u5E03",1)]}),en:withCtx((k,S,N,L)=>{var P,O;if(S)S(`Post as ${ssrInterpolate((P=e.user.disqusProfile)==null?void 0:P.name)}`);else return[createTextVNode("Post as "+toDisplayString((O=e.user.disqusProfile)==null?void 0:O.name),1)]}),_:1},n)):t(ssrRenderComponent(E,{zh:"\u53D1\u5E03",en:"Publish"},null,n)),t('<i class="iconfont icon-mail-plane" data-v-41adcf04></i></button></div></div>')}const _sfc_setup$19=_sfc_main$19.setup;_sfc_main$19.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/comment/publisher/pen.vue"),_sfc_setup$19?_sfc_setup$19(e,t):void 0};const CommentPen=_export_sfc(_sfc_main$19,[["ssrRender",_sfc_ssrRender$19],["__scopeId","data-v-41adcf04"]]),_sfc_main$18=defineComponent({name:"Dsiqus",components:{CommentTopbar,CommentMain,CommentList,CommentLoadmore,CommentPublisherMain,CommentPublisher,CommentPen},props:{postId:{type:Number,required:!0},fetching:{type:Boolean,default:!1},plain:{type:Boolean,default:!1}},setup(e){const{i18n:t,gtag:n,globalState:r}=useEnhancer(),c=useIdentityStore(),d=useCommentStore(),g=computed(()=>d.posting),o=computed(()=>d.fetching),v=computed(()=>e.fetching||!d.comments.length&&d.fetching);let x;(ae=>{ae.Root="root",ae.Reply="reply"})(x||(x={}));const E=ref(),k=computed(()=>g.value&&E.value==="root"),S=computed(()=>g.value&&E.value==="reply"),N=reactive({sort:SortType.Desc,replyPID:0}),L=ref({name:"",email:"",site:""}),P=reactive({content:"",previewed:!1}),O=()=>{P.content=""},V=()=>{P.previewed=!1},z=()=>{N.replyPID=0},U=ae=>{N.replyPID=ae,n==null||n.event("reply_comment",{event_category:GAEventCategories.Comment})},W=(ae={},Ce)=>{const Fe={...ae,sort:N.sort,post_id:e.postId};return d.fetchList(Fe,Ce)},Z=ae=>{N.sort!==ae&&(N.sort=ae,W(),scrollToAnchor(COMMENT_ELEMENT_ID))},re=ae=>{const Ce=d.comments,Fe=getCommentItemElementID(Ce[Ce.length-2].id);W({page:ae},!0).then(()=>{nextTick$1().then(()=>{scrollToAnchor(Fe)})})},oe=ae=>{d.deleteComment(ae).catch(Ce=>{console.warn("delete comment failed",Ce),alert(Ce.message)})},se=async ae=>{if(n==null||n.event("submit_comment",{event_category:GAEventCategories.Comment}),!ae.content||!ae.content.trim())throw`${t.t(LanguageKey.COMMENT_POST_CONTENT)} ?`;if(ae.content.length>3e3)throw`${t.t(LanguageKey.COMMENT_POST_ERROR_CONTENT)} ?`;const Ce=c.user.type===UserType.Null,Fe=L.value;if(Ce){if(!Fe.name)throw t.t(LanguageKey.COMMENT_POST_NAME)+"?";if(!Fe.email)throw t.t(LanguageKey.COMMENT_POST_EMAIL)+"?"}const it=Ce?toRaw$1(Fe):c.user.type===UserType.Local?c.user.localProfile:{name:c.user.disqusProfile.name,site:c.user.disqusProfile.url};it.email||Reflect.deleteProperty(it,"email"),it.site||Reflect.deleteProperty(it,"site");try{const _e=await d.postComment({pid:ae.pid,post_id:e.postId,content:ae.content,agent:r.userAgent.original,author:it});Ce&&c.saveLocalUser({...it,email_hash:_e.author.email_hash}),luanchEmojiRain(ae.content)}catch(_e){throw console.warn("submit comment failed:",_e),_e.message}},ce=ae=>{const Ce=document.getElementById(ae),Fe=Ce.checkValidity();return Ce.reportValidity(),Fe?Promise.resolve():Promise.reject()},me=async ae=>{await ce(COMMENT_PUBLISHER_ELEMENT_ID),E.value="root";try{await se({content:ae,pid:0}),V(),O()}catch(Ce){alert(Ce)}finally{E.value=UNDEFINED}},we=async ae=>{await ce(COMMENT_REPLY_PUBLISHER_ELEMENT_ID),E.value="reply";try{await se({content:ae,pid:N.replyPID}),z()}catch(Ce){alert(Ce)}finally{E.value=UNDEFINED}};return watch(v,ae=>{ae&&z()}),onBeforeUnmount(()=>{z()}),onUnmounted(()=>{d.clearList()}),{ANCHOR:ANCHORS,isFetching:o,isLoading:v,isRootPosting:k,isReplyPosting:S,commentStore:d,commentState:N,rootPenState:P,guestProfile:L,replyComment:U,handleDeleteComment:oe,handleRootSubmit:me,handleReplySubmit:we,cancelCommentReply:z,fetchSortComments:Z,fetchPageComments:re}}}),index_vue_vue_type_style_index_0_scoped_e51b4cc1_lang="";function _sfc_ssrRender$18(e,t,n,r,c,d,g,o){var O;const v=resolveComponent("comment-topbar"),x=resolveComponent("divider"),E=resolveComponent("comment-publisher-main"),k=resolveComponent("comment-publisher"),S=resolveComponent("comment-pen"),N=resolveComponent("comment-main"),L=resolveComponent("comment-list"),P=resolveComponent("comment-loadmore");t(`<div${ssrRenderAttrs(mergeProps({id:e.ANCHOR.COMMENT_ELEMENT_ID,class:"comment-box"},r))} data-v-e51b4cc1>`),t(ssrRenderComponent(v,{total:(O=e.commentStore.pagination)==null?void 0:O.total,loaded:e.commentStore.comments.length,"post-id":e.postId,fetching:e.fetching,loading:e.isLoading,plain:e.plain,sort:e.commentState.sort,onSort:e.fetchSortComments},null,n)),t(ssrRenderComponent(x,{class:"divider",size:"lg"},null,n)),t(ssrRenderComponent(E,{fetching:e.fetching},{default:withCtx((V,z,U,W)=>{var Z,re;if(z)z(ssrRenderComponent(k,{profile:e.guestProfile,"onUpdate:profile":oe=>e.guestProfile=oe,id:e.ANCHOR.COMMENT_PUBLISHER_ELEMENT_ID,disabled:e.isLoading||e.isRootPosting,total:(Z=e.commentStore.pagination)==null?void 0:Z.total,"default-blossomed":!!e.plain,"hidden-avatar":e.plain},{pen:withCtx((oe,se,ce,me)=>{if(se)se(ssrRenderComponent(S,{modelValue:e.rootPenState.content,"onUpdate:modelValue":we=>e.rootPenState.content=we,previewed:e.rootPenState.previewed,"onUpdate:previewed":we=>e.rootPenState.previewed=we,"auto-focus":!e.plain,"hidden-stationery":e.plain,disabled:e.isRootPosting||e.isLoading,posting:e.isRootPosting,onSubmit:e.handleRootSubmit},null,ce,me));else return[createVNode(S,{modelValue:e.rootPenState.content,"onUpdate:modelValue":we=>e.rootPenState.content=we,previewed:e.rootPenState.previewed,"onUpdate:previewed":we=>e.rootPenState.previewed=we,"auto-focus":!e.plain,"hidden-stationery":e.plain,disabled:e.isRootPosting||e.isLoading,posting:e.isRootPosting,onSubmit:e.handleRootSubmit},null,8,["modelValue","onUpdate:modelValue","previewed","onUpdate:previewed","auto-focus","hidden-stationery","disabled","posting","onSubmit"])]}),_:1},U,W));else return[createVNode(k,{profile:e.guestProfile,"onUpdate:profile":oe=>e.guestProfile=oe,id:e.ANCHOR.COMMENT_PUBLISHER_ELEMENT_ID,disabled:e.isLoading||e.isRootPosting,total:(re=e.commentStore.pagination)==null?void 0:re.total,"default-blossomed":!!e.plain,"hidden-avatar":e.plain},{pen:withCtx(()=>[createVNode(S,{modelValue:e.rootPenState.content,"onUpdate:modelValue":oe=>e.rootPenState.content=oe,previewed:e.rootPenState.previewed,"onUpdate:previewed":oe=>e.rootPenState.previewed=oe,"auto-focus":!e.plain,"hidden-stationery":e.plain,disabled:e.isRootPosting||e.isLoading,posting:e.isRootPosting,onSubmit:e.handleRootSubmit},null,8,["modelValue","onUpdate:modelValue","previewed","onUpdate:previewed","auto-focus","hidden-stationery","disabled","posting","onSubmit"])]),_:1},8,["profile","onUpdate:profile","id","disabled","total","default-blossomed","hidden-avatar"])]}),_:1},n)),t(ssrRenderComponent(x,{class:"divider",size:"lg"},null,n)),t(ssrRenderComponent(N,{fetching:e.isLoading,"skeleton-count":e.plain?3:5,"has-data":Boolean(e.commentStore.commentTreeList.length)},{list:withCtx((V,z,U,W)=>{if(z)z(ssrRenderComponent(L,{comments:e.commentStore.commentTreeList,"reply-pid":e.commentState.replyPID,"hidden-avatar":e.plain,"hidden-ua":e.plain,"plain-vote":e.plain,onDelete:e.handleDeleteComment,onReply:e.replyComment,onCancelReply:e.cancelCommentReply},{reply:withCtx((Z,re,oe,se)=>{if(re)re(ssrRenderComponent(k,{profile:e.guestProfile,"onUpdate:profile":ce=>e.guestProfile=ce,id:e.ANCHOR.COMMENT_REPLY_PUBLISHER_ELEMENT_ID,disabled:!1,bordered:!0,"default-blossomed":!0,"hidden-avatar":e.plain,"fixed-avatar":Z.isChild},{pen:withCtx((ce,me,we,ae)=>{if(me)me(ssrRenderComponent(S,{posting:e.isReplyPosting,bordered:!0,"auto-focus":!0,"hidden-stationery":e.plain,onSubmit:e.handleReplySubmit},null,we,ae));else return[createVNode(S,{posting:e.isReplyPosting,bordered:!0,"auto-focus":!0,"hidden-stationery":e.plain,onSubmit:e.handleReplySubmit},null,8,["posting","hidden-stationery","onSubmit"])]}),_:2},oe,se));else return[createVNode(k,{profile:e.guestProfile,"onUpdate:profile":ce=>e.guestProfile=ce,id:e.ANCHOR.COMMENT_REPLY_PUBLISHER_ELEMENT_ID,disabled:!1,bordered:!0,"default-blossomed":!0,"hidden-avatar":e.plain,"fixed-avatar":Z.isChild},{pen:withCtx(()=>[createVNode(S,{posting:e.isReplyPosting,bordered:!0,"auto-focus":!0,"hidden-stationery":e.plain,onSubmit:e.handleReplySubmit},null,8,["posting","hidden-stationery","onSubmit"])]),_:2},1032,["profile","onUpdate:profile","id","hidden-avatar","fixed-avatar"])]}),_:1},U,W));else return[createVNode(L,{comments:e.commentStore.commentTreeList,"reply-pid":e.commentState.replyPID,"hidden-avatar":e.plain,"hidden-ua":e.plain,"plain-vote":e.plain,onDelete:e.handleDeleteComment,onReply:e.replyComment,onCancelReply:e.cancelCommentReply},{reply:withCtx(Z=>[createVNode(k,{profile:e.guestProfile,"onUpdate:profile":re=>e.guestProfile=re,id:e.ANCHOR.COMMENT_REPLY_PUBLISHER_ELEMENT_ID,disabled:!1,bordered:!0,"default-blossomed":!0,"hidden-avatar":e.plain,"fixed-avatar":Z.isChild},{pen:withCtx(()=>[createVNode(S,{posting:e.isReplyPosting,bordered:!0,"auto-focus":!0,"hidden-stationery":e.plain,onSubmit:e.handleReplySubmit},null,8,["posting","hidden-stationery","onSubmit"])]),_:2},1032,["profile","onUpdate:profile","id","hidden-avatar","fixed-avatar"])]),_:1},8,["comments","reply-pid","hidden-avatar","hidden-ua","plain-vote","onDelete","onReply","onCancelReply"])]}),pagination:withCtx((V,z,U,W)=>{var Z,re;if(z)z(ssrRenderComponent(P,{fetching:e.isFetching,pagination:e.commentStore.pagination,remain:((Z=e.commentStore.pagination)==null?void 0:Z.total)-e.commentStore.comments.length,onPage:e.fetchPageComments},null,U,W));else return[createVNode(P,{fetching:e.isFetching,pagination:e.commentStore.pagination,remain:((re=e.commentStore.pagination)==null?void 0:re.total)-e.commentStore.comments.length,onPage:e.fetchPageComments},null,8,["fetching","pagination","remain","onPage"])]}),_:1},n)),t("</div>")}const _sfc_setup$18=_sfc_main$18.setup;_sfc_main$18.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/comment/index.vue"),_sfc_setup$18?_sfc_setup$18(e,t):void 0};const Comment=_export_sfc(_sfc_main$18,[["ssrRender",_sfc_ssrRender$18],["__scopeId","data-v-e51b4cc1"]]),_sfc_main$17=defineComponent({name:"ArticleDetailSkeleton",props:{socialCount:{type:Number,required:!0},relatedCount:{type:Number,required:!0}}}),skeleton_vue_vue_type_style_index_0_scoped_a96e0f80_lang="";function _sfc_ssrRender$17(e,t,n,r,c,d,g,o){const v=resolveComponent("skeleton-line"),x=resolveComponent("skeleton-paragraph"),E=resolveComponent("skeleton-base");t(`<div${ssrRenderAttrs(mergeProps({class:"article-skeleton"},r))} data-v-a96e0f80><div class="module" data-v-a96e0f80><div class="content-skeleton" data-v-a96e0f80>`),t(ssrRenderComponent(v,{class:"title"},null,n)),t(ssrRenderComponent(x,{class:"content",lines:9,"line-height":"1.3em"},null,n)),t('</div></div><div class="module" data-v-a96e0f80><div class="share-skeleton" data-v-a96e0f80><!--[-->'),ssrRenderList(e.socialCount,k=>{t(ssrRenderComponent(E,{class:"item",key:k},null,n))}),t(`<!--]--></div></div><div class="module" data-v-a96e0f80><ul class="related-skeleton" style="${ssrRenderStyle({"grid-template-columns":`repeat(${e.relatedCount}, 1fr)`})}" data-v-a96e0f80><!--[-->`),ssrRenderList(e.relatedCount,k=>{t(ssrRenderComponent(E,{key:k,class:"item"},null,n))}),t("<!--]--></ul></div></div>")}const _sfc_setup$17=_sfc_main$17.setup;_sfc_main$17.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/article/skeleton.vue"),_sfc_setup$17?_sfc_setup$17(e,t):void 0};const ArticleSkeleton=_export_sfc(_sfc_main$17,[["ssrRender",_sfc_ssrRender$17],["__scopeId","data-v-a96e0f80"]]),_sfc_main$16=defineComponent({name:"ArticleContent",components:{Markdown},props:{article:{type:Object,required:!0},readmoreId:{type:String,required:!0}},emits:["rendered"],setup(e,t){const n=useArticleDetailStore(),r=computed(()=>isHybridType(e.article.origin)),c=computed(()=>isReprintType(e.article.origin)),d=computed(()=>isOriginalType(e.article.origin)),g=ref(),o=ref(!1),v=computed(()=>n.isLongContent&&!n.renderedFullContent),x=()=>{o.value=!0,nextTick$1(()=>{setTimeout(()=>{n.renderFullContent(),o.value=!1},0)})},E=()=>{t.emit("rendered",g.value)};return onMounted(()=>E()),onUpdated(()=>E()),{LanguageKey,element:g,isHybrid:r,isReprint:c,isOriginal:d,articleDetailStore:n,isRenderMoreEnabled:v,isRenderMoreContent:o,numberSplit,handleRenderMore:x,handleFullContentRendered:E}}}),content_vue_vue_type_style_index_0_scoped_897cc6b0_lang="";function _sfc_ssrRender$16(e,t,n,r,c,d,g,o){var N,L;const v=resolveComponent("i18n"),x=resolveComponent("responsive"),E=resolveComponent("divider"),k=resolveComponent("udate"),S=resolveComponent("markdown");t(`<div${ssrRenderAttrs(mergeProps({ref:"element",class:"detail"},r))} data-v-897cc6b0><div class="${ssrRenderClass([{original:e.isOriginal,reprint:e.isReprint,hybrid:e.isHybrid},"oirigin"])}" data-v-897cc6b0>`),e.isOriginal?t(ssrRenderComponent(v,{k:e.LanguageKey.ORIGIN_ORIGINAL},null,n)):e.isReprint?t(ssrRenderComponent(v,{k:e.LanguageKey.ORIGIN_REPRINT},null,n)):e.isHybrid?t(ssrRenderComponent(v,{k:e.LanguageKey.ORIGIN_HYBRID},null,n)):t("<!---->"),t(`</div><div class="knowledge" data-v-897cc6b0><div class="title" data-v-897cc6b0><h2 class="text" data-v-897cc6b0>${ssrInterpolate(e.article.title)}</h2><div class="meta" data-v-897cc6b0><i class="iconfont icon-t" data-v-897cc6b0></i>`),t(ssrRenderComponent(v,{zh:`\u5171 ${e.numberSplit(e.articleDetailStore.contentLength)} \u5B57\uFF0C\u9700\u9605\u8BFB ${e.articleDetailStore.readMinutes} \u5206\u949F`,en:`${e.numberSplit(e.articleDetailStore.contentLength)} words, ${e.articleDetailStore.readMinutes} min read`},null,n)),t(ssrRenderComponent(x,{desktop:""},{default:withCtx((P,O,V,z)=>{if(O)O(ssrRenderComponent(E,{type:"vertical",class:"vertical"},null,V,z)),O(`<span data-v-897cc6b0${z}><i class="iconfont icon-clock-outline" data-v-897cc6b0${z}></i>`),O(ssrRenderComponent(k,{to:"YMDm",date:e.article.create_at,separator:"/"},null,V,z)),O("</span>");else return[createVNode(E,{type:"vertical",class:"vertical"}),createVNode("span",null,[createVNode("i",{class:"iconfont icon-clock-outline"}),createVNode(k,{to:"YMDm",date:e.article.create_at,separator:"/"},null,8,["date"])])]}),_:1},n)),t(ssrRenderComponent(E,{type:"vertical",class:"vertical"},null,n)),t(`<span data-v-897cc6b0><i class="iconfont icon-eye" data-v-897cc6b0></i><span data-v-897cc6b0>${ssrInterpolate(e.numberSplit(e.article.meta.views))}\xA0</span>`),t(ssrRenderComponent(v,{k:e.LanguageKey.ARTICLE_VIEWS},null,n)),t("</span></div></div>"),t(ssrRenderComponent(S,{html:(N=e.articleDetailStore.defaultContent)==null?void 0:N.html},null,n)),e.isRenderMoreEnabled?(t(`<div${ssrRenderAttr("id",e.readmoreId)} class="readmore" data-v-897cc6b0><button class="readmore-btn"${includeBooleanAttr(e.isRenderMoreContent)?" disabled":""} data-v-897cc6b0>`),t(ssrRenderComponent(v,{k:e.isRenderMoreContent?e.LanguageKey.ARTICLE_RENDERING:e.LanguageKey.ARTICLE_READ_ALL},null,n)),t('<i class="iconfont icon-loadmore" data-v-897cc6b0></i></button></div>')):e.articleDetailStore.renderedFullContent?t(ssrRenderComponent(S,{html:(L=e.articleDetailStore.moreContent)==null?void 0:L.html},null,n)):t("<!---->"),t("</div></div>")}const _sfc_setup$16=_sfc_main$16.setup;_sfc_main$16.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/article/content.vue"),_sfc_setup$16?_sfc_setup$16(e,t):void 0};const ArticleContent=_export_sfc(_sfc_main$16,[["ssrRender",_sfc_ssrRender$16],["__scopeId","data-v-897cc6b0"]]),_sfc_main$15=defineComponent({name:"ArticleLikeShare",components:{BaseShare:Share},props:{socials:{type:Array,default:()=>[]}},setup(e){return{skeletonCount:e.socials.length?e.socials.length:Object.keys(SocialMedia).length,VALUABLE_LINKS}}}),share_vue_vue_type_style_index_0_scoped_fb5838fe_lang="";function _sfc_ssrRender$15(e,t,n,r,c,d,g,o){const v=resolveComponent("base-share");t(`<div${ssrRenderAttrs(mergeProps({class:"share-box"},r))} data-v-fb5838fe>`),t(ssrRenderComponent(v,{class:"share",socials:e.socials},null,n)),t("</div>")}const _sfc_setup$15=_sfc_main$15.setup;_sfc_main$15.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/article/share.vue"),_sfc_setup$15?_sfc_setup$15(e,t):void 0};const ArticleShare=_export_sfc(_sfc_main$15,[["ssrRender",_sfc_ssrRender$15],["__scopeId","data-v-fb5838fe"]]),_sfc_main$14=defineComponent({name:"ArticleMeta",props:{article:{type:Object,required:!0},plain:{type:Boolean,default:!1}},setup(e){const{i18n:t,gtag:n,globalState:r}=useEnhancer(),c=useIdentityStore(),d=useArticleDetailStore(),g=computed(()=>c.isLikedPage(e.article.id)),o=computed(()=>getPageURL(getArticleDetailRoute(e.article.id))),v=computed(()=>e.article.meta.likes);return{VALUABLE_LINKS,LanguageKey,articleURL:o,likes:v,copy,isLiked:g,tagEnName,firstUpperCase,handleLike:async()=>{if(g.value)return!1;n==null||n.event("article_like",{event_category:GAEventCategories.Article});try{await d.postArticleLike(e.article.id),c.likePage(e.article.id)}catch(S){const N=t.t(LanguageKey.POST_ACTION_ERROR);console.warn(N,S),alert(N)}},handleOpenSponsor:()=>{r.toggleSwitcher("sponsor",!0),n==null||n.event("article_sponsor",{event_category:GAEventCategories.Article})},getDateLink:S=>getDateFlowRoute(dateToYMD(new Date(S))),getTagFlowRoute,getCategoryFlowRoute}}}),meta_vue_vue_type_style_index_0_scoped_cb53ad3d_lang="";function _sfc_ssrRender$14(e,t,n,r,c,d,g,o){const v=resolveComponent("i18n"),x=resolveComponent("router-link"),E=resolveComponent("udate"),k=resolveComponent("divider"),S=resolveComponent("ulink");t(`<div${ssrRenderAttrs(mergeProps({class:["meta",{plain:e.plain}]},r))} data-v-cb53ad3d><div class="actions" data-v-cb53ad3d>`),ssrRenderSlot(e.$slots,"action",{},null,t,n),t('</div><div class="line" data-v-cb53ad3d>'),t(ssrRenderComponent(v,{zh:"\u672C\u6587\u4E8E",en:"Published at"},null,n)),t(ssrRenderComponent(x,{class:"link date",title:e.article.create_at,to:e.getDateLink(e.article.create_at)},{default:withCtx((N,L,P,O)=>{if(L)L(ssrRenderComponent(E,{to:"YMDm",date:e.article.create_at,separator:"/"},null,P,O));else return[createVNode(E,{to:"YMDm",date:e.article.create_at,separator:"/"},null,8,["date"])]}),_:1},n)),t(ssrRenderComponent(v,{zh:"\u53D1\u5E03\u5728",en:"in"},null,n)),t("<!--[-->"),ssrRenderList(e.article.category,(N,L)=>{t("<span data-v-cb53ad3d>"),t(ssrRenderComponent(x,{class:"link category",title:`${e.firstUpperCase(N.slug)} | ${N.description}`,to:e.getCategoryFlowRoute(N.slug)},{default:withCtx((P,O,V,z)=>{if(O)O(ssrRenderComponent(v,{zh:N.name,en:e.firstUpperCase(N.slug)},null,V,z));else return[createVNode(v,{zh:N.name,en:e.firstUpperCase(N.slug)},null,8,["zh","en"])]}),_:2},n)),e.article.category[L+1]?(t("<span data-v-cb53ad3d>"),t(ssrRenderComponent(v,{zh:"\u3001",en:","},null,n)),t("</span>")):t("<!---->"),t("</span>")}),t("<!--]-->"),e.article.category.length?t("<!---->"):(t("<span data-v-cb53ad3d>"),t(ssrRenderComponent(v,{zh:"\u672A\u77E5\u5206\u7C7B\u4E0B",en:"(no catgory)"},null,n)),t("</span>")),e.plain?t("<br data-v-cb53ad3d>"):t(ssrRenderComponent(k,{type:"vertical",size:"sm"},null,n)),t("<!--[-->"),ssrRenderList(e.article.tag,(N,L)=>{t("<span data-v-cb53ad3d>"),t(ssrRenderComponent(x,{class:"link tag",title:`${e.tagEnName(N)} | ${N.description}`,to:e.getTagFlowRoute(N.slug)},{default:withCtx((P,O,V,z)=>{if(O)O(ssrRenderComponent(v,{zh:`#${N.name}`,en:`#${e.tagEnName(N)}`},null,V,z));else return[createVNode(v,{zh:`#${N.name}`,en:`#${e.tagEnName(N)}`},null,8,["zh","en"])]}),_:2},n)),e.article.tag[L+1]?(t("<span data-v-cb53ad3d>"),t(ssrRenderComponent(v,{zh:"\u3001",en:","},null,n)),t("</span>")):t("<!---->"),t("</span>")}),t('<!--]--></div><div class="line" data-v-cb53ad3d><i class="icon iconfont icon-creative-commons" data-v-cb53ad3d></i>'),t(ssrRenderComponent(v,null,{zh:withCtx((N,L,P,O)=>{if(L)L(ssrRenderComponent(S,{class:"link copyright",href:"https://creativecommons.org/licenses/by-nc/4.0/deed.zh"},{default:withCtx((V,z,U,W)=>{if(z)z("\u81EA\u7531\u8F6C\u8F7D - \u7F72\u540D - \u975E\u5546\u4E1A\u6027\u4F7F\u7528");else return[createTextVNode("\u81EA\u7531\u8F6C\u8F7D - \u7F72\u540D - \u975E\u5546\u4E1A\u6027\u4F7F\u7528")]}),_:1},P,O));else return[createVNode(S,{class:"link copyright",href:"https://creativecommons.org/licenses/by-nc/4.0/deed.zh"},{default:withCtx(()=>[createTextVNode("\u81EA\u7531\u8F6C\u8F7D - \u7F72\u540D - \u975E\u5546\u4E1A\u6027\u4F7F\u7528")]),_:1})]}),en:withCtx((N,L,P,O)=>{if(L)L(ssrRenderComponent(S,{class:"link copyright",href:"https://creativecommons.org/licenses/by-nc/4.0/deed.en"},{default:withCtx((V,z,U,W)=>{if(z)z("Creative Commons BY-NC 4.0");else return[createTextVNode("Creative Commons BY-NC 4.0")]}),_:1},P,O));else return[createVNode(S,{class:"link copyright",href:"https://creativecommons.org/licenses/by-nc/4.0/deed.en"},{default:withCtx(()=>[createTextVNode("Creative Commons BY-NC 4.0")]),_:1})]}),_:1},n)),e.plain?t("<br data-v-cb53ad3d>"):t(ssrRenderComponent(k,{type:"vertical"},null,n)),t(`<span class="link permalink" data-v-cb53ad3d>${ssrInterpolate(e.articleURL)}</span></div></div>`)}const _sfc_setup$14=_sfc_main$14.setup;_sfc_main$14.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/article/meta.vue"),_sfc_setup$14?_sfc_setup$14(e,t):void 0};const ArticleMeta=_export_sfc(_sfc_main$14,[["ssrRender",_sfc_ssrRender$14],["__scopeId","data-v-cb53ad3d"]]),_sfc_main$13=defineComponent({name:"ArticleUpvote",props:{likes:{type:Number,required:!0},isLiked:{type:Boolean,required:!0},hiddenSponsor:{type:Boolean,default:!1},enabledParkinson:{type:Boolean,default:!1}},emits:["like","sponsor"],setup(e,t){const n=()=>{t.emit("sponsor")},r=ref(!1),c=()=>{r.value=!0};return{VALUABLE_LINKS,LanguageKey,handleLike:()=>{e.isLiked||t.emit("like",c)},handleSponsor:n,newliked:r}}}),upvote_vue_vue_type_style_index_0_scoped_059798fc_lang="";function _sfc_ssrRender$13(e,t,n,r,c,d,g,o){const v=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:"upvote"},r))} data-v-059798fc><div class="wrapper" data-v-059798fc><button class="${ssrRenderClass([{liked:e.isLiked,parkinson:e.enabledParkinson,newliked:e.newliked},"button like"])}"${includeBooleanAttr(e.isLiked)?" disabled":""} data-v-059798fc><i class="icon iconfont icon-like" data-v-059798fc></i><span class="text" data-v-059798fc>`),t(ssrRenderComponent(v,null,{zh:withCtx((x,E,k,S)=>{if(E)E(`\u771F\u68D2\uFF01${ssrInterpolate(e.likes)}`);else return[createTextVNode("\u771F\u68D2\uFF01"+toDisplayString(e.likes),1)]}),en:withCtx((x,E,k,S)=>{if(E)E(`${ssrInterpolate(e.isLiked?"Upvoted":"Upvote")} ${ssrInterpolate(e.likes)}`);else return[createTextVNode(toDisplayString(e.isLiked?"Upvoted":"Upvote")+" "+toDisplayString(e.likes),1)]}),_:1},n)),t("</span>"),e.enabledParkinson?t(`<!--[--><span class="parkinson-mask" data-v-059798fc><i class="${ssrRenderClass([e.newliked?"icon-like":"icon-like-pre","iconfont"])}" data-v-059798fc></i></span><div class="parkinson-likes" data-v-059798fc>+ 1</div><!--]-->`):t("<!---->"),t("</button>"),e.hiddenSponsor?t("<!---->"):t('<button class="button sponsor" data-v-059798fc><i class="icon iconfont icon-heart" data-v-059798fc></i></button>'),t("</div></div>")}const _sfc_setup$13=_sfc_main$13.setup;_sfc_main$13.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/article/upvote.vue"),_sfc_setup$13?_sfc_setup$13(e,t):void 0};const ArticleUpvote=_export_sfc(_sfc_main$13,[["ssrRender",_sfc_ssrRender$13],["__scopeId","data-v-059798fc"]]),_sfc_main$12=defineComponent({name:"ArticleRelated",props:{articles:{type:Array,default:()=>[]},columns:{type:Number,default:4},count:{type:Number,default:8}},setup(e){return{articleList:computed(()=>{const n=[...e.articles].slice(0,e.count);return n.length>=e.count?n:[...n,...new Array(e.count-n.length).fill({title:"-",description:"",id:null,_id:"",thumb:""})]}),getArticleDetailRoute,getMobileArticleListThumbnailURL}}}),related_vue_vue_type_style_index_0_scoped_618d364f_lang="";function _sfc_ssrRender$12(e,t,n,r,c,d,g,o){const v=resolveComponent("router-link");t(`<div${ssrRenderAttrs(mergeProps({class:"related"},r))} data-v-618d364f><ul class="articles" style="${ssrRenderStyle({gridTemplateColumns:`repeat(${e.columns}, 1fr)`})}" data-v-618d364f><!--[-->`),ssrRenderList(e.articleList,(x,E)=>{t(`<li class="${ssrRenderClass([{disabled:!x.id},"item"])}" data-v-618d364f>`),t(ssrRenderComponent(v,{class:"item-article",title:x.title,to:e.getArticleDetailRoute(x.id)},{default:withCtx((k,S,N,L)=>{if(S)S(`<div class="thumb" style="${ssrRenderStyle({backgroundImage:`url(${e.getMobileArticleListThumbnailURL(x.thumb)})`})}" data-v-618d364f${L}></div><div class="title" data-v-618d364f${L}>${ssrInterpolate(x.title)}</div><div class="description" data-v-618d364f${L}>${ssrInterpolate(x.description)}</div>`);else return[createVNode("div",{class:"thumb",style:{backgroundImage:`url(${e.getMobileArticleListThumbnailURL(x.thumb)})`}},null,4),createVNode("div",{class:"title"},toDisplayString(x.title),1),createVNode("div",{class:"description"},toDisplayString(x.description),1)]}),_:2},n)),t("</li>")}),t("<!--]--></ul></div>")}const _sfc_setup$12=_sfc_main$12.setup;_sfc_main$12.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/article/related.vue"),_sfc_setup$12?_sfc_setup$12(e,t):void 0};const ArticleRelated=_export_sfc(_sfc_main$12,[["ssrRender",_sfc_ssrRender$12],["__scopeId","data-v-618d364f"]]),_sfc_main$11=defineComponent({name:"ArticleNeighbour",props:{prev:Object,next:Object},setup(){return{getArticleDetailRoute}}}),neighbour_vue_vue_type_style_index_0_scoped_a071c63f_lang="";function _sfc_ssrRender$11(e,t,n,r,c,d,g,o){const v=resolveComponent("router-link"),x=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:"neighbour"},r))} data-v-a071c63f>`),e.prev?t(ssrRenderComponent(v,{class:"link prev",title:e.prev.title,to:e.getArticleDetailRoute(e.prev.id)},{default:withCtx((E,k,S,N)=>{if(k)k(`<div class="icon" data-v-a071c63f${N}><i class="iconfont icon-prev" data-v-a071c63f${N}></i></div><div class="content" data-v-a071c63f${N}><p class="title" data-v-a071c63f${N}>${ssrInterpolate(e.prev.title)}</p><p class="description" data-v-a071c63f${N}>${ssrInterpolate(e.prev.description)}</p></div>`);else return[createVNode("div",{class:"icon"},[createVNode("i",{class:"iconfont icon-prev"})]),createVNode("div",{class:"content"},[createVNode("p",{class:"title"},toDisplayString(e.prev.title),1),createVNode("p",{class:"description"},toDisplayString(e.prev.description),1)])]}),_:1},n)):(t('<div class="null" data-v-a071c63f>'),t(ssrRenderComponent(x,{zh:"\u5DF2\u662F\u6700\u65E9",en:"NULL"},null,n)),t("</div>")),e.next?t(ssrRenderComponent(v,{class:"link next",title:e.next.title,to:e.getArticleDetailRoute(e.next.id)},{default:withCtx((E,k,S,N)=>{if(k)k(`<div class="content" data-v-a071c63f${N}><p class="title" data-v-a071c63f${N}>${ssrInterpolate(e.next.title)}</p><p class="description" data-v-a071c63f${N}>${ssrInterpolate(e.next.description)}</p></div><div class="icon" data-v-a071c63f${N}><i class="iconfont icon-next" data-v-a071c63f${N}></i></div>`);else return[createVNode("div",{class:"content"},[createVNode("p",{class:"title"},toDisplayString(e.next.title),1),createVNode("p",{class:"description"},toDisplayString(e.next.description),1)]),createVNode("div",{class:"icon"},[createVNode("i",{class:"iconfont icon-next"})])]}),_:1},n)):(t('<div class="null" data-v-a071c63f>'),t(ssrRenderComponent(x,{zh:"\u5DF2\u662F\u6700\u65B0",en:"NULL"},null,n)),t("</div>")),t("</div>")}const _sfc_setup$11=_sfc_main$11.setup;_sfc_main$11.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/article/neighbour.vue"),_sfc_setup$11?_sfc_setup$11(e,t):void 0};const ArticleNeighbour=_export_sfc(_sfc_main$11,[["ssrRender",_sfc_ssrRender$11],["__scopeId","data-v-a071c63f"]]),_sfc_main$10=defineComponent({name:"ArticleDetail",components:{Comment,ArticleSkeleton,ArticleContent,ArticleShare,ArticleMeta,ArticleUpvote,ArticleRelated,ArticleNeighbour},props:{articleId:{type:Number,required:!0},isMobile:{type:Boolean,default:!1}},setup(e){const{i18n:t,head:n,gtag:r,globalState:c}=useEnhancer(),{identity:d,comment:g,articleDetail:o}=useStores(),v=computed(()=>o.article||UNDEFINED),x=computed(()=>o.fetching),E=computed(()=>Boolean(v.value&&d.isLikedPage(v.value.id))),k=()=>{c.toggleSwitcher("sponsor",!0),r==null||r.event("article_sponsor",{event_category:GAEventCategories.Article})},S=async O=>{if(E.value)return!1;r==null||r.event("article_like",{event_category:GAEventCategories.Article});try{await o.postArticleLike(v.value.id),d.likePage(v.value.id),O==null||O()}catch(V){const z=t.t(LanguageKey.POST_ACTION_ERROR);console.warn(z,V),alert(z)}},N=O=>Promise.all([o.fetchCompleteArticle({articleID:O}),g.fetchList({post_id:O})]),L=shallowRef(null),P=O=>{var V,z,U,W,Z;(z=(V=CUSTOM_ELEMENTS.verse).effect)==null||z.call(V,O),L.value=(Z=(W=(U=CUSTOM_ELEMENTS.verse).style)==null?void 0:W.call(U,O))!=null?Z:null};return n(()=>{var O,V,z,U,W,Z;return{pageTitle:(O=v.value)==null?void 0:O.title,description:((V=v.value)==null?void 0:V.description)||"",keywords:((U=(z=v.value)==null?void 0:z.keywords)==null?void 0:U.join(","))||((W=v.value)==null?void 0:W.title),ogType:"article",ogImage:(Z=v.value)==null?void 0:Z.thumb,ogImageWidth:1190,ogImageHeight:420,style:L.value?[{children:L.value}]:[]}}),onBeforeMount(()=>{watch(()=>e.articleId,O=>N(O),{flush:"post"})}),useUniversalFetch(()=>N(e.articleId)),{ANCHORS,SocialMedia,userAgent:c.userAgent,store:o,article:v,fetching:x,isLiked:E,handleLike:S,handleSponsor:k,handleContentRendered:P}}}),index_vue_vue_type_style_index_0_scoped_f554f2ba_lang="";function _sfc_ssrRender$10(e,t,n,r,c,d,g,o){const v=resolveComponent("placeholder"),x=resolveComponent("article-skeleton"),E=resolveComponent("article-content"),k=resolveComponent("article-meta"),S=resolveComponent("article-upvote"),N=resolveComponent("article-share"),L=resolveComponent("article-neighbour"),P=resolveComponent("article-related"),O=resolveComponent("comment");t(`<div${ssrRenderAttrs(mergeProps({class:"article-page"},r))} data-v-f554f2ba>`),t(ssrRenderComponent(v,{loading:e.fetching},{loading:withCtx((V,z,U,W)=>{if(z)z(ssrRenderComponent(x,{"social-count":e.isMobile?3:8,"related-count":e.isMobile?2:3},null,U,W));else return[createVNode(x,{"social-count":e.isMobile?3:8,"related-count":e.isMobile?2:3},null,8,["social-count","related-count"])]}),default:withCtx((V,z,U,W)=>{var Z,re,oe,se;if(z)e.article?(z(`<div data-v-f554f2ba${W}><div class="module margin background overflow" data-v-f554f2ba${W}>`),z(ssrRenderComponent(E,{id:e.ANCHORS.ARTICLE_CONTENT_ELEMENT_ID,"readmore-id":e.ANCHORS.ARTICLE_READMORE_ELEMENT_ID,article:e.article,onRendered:e.handleContentRendered},null,U,W)),z(`<div class="divider" data-v-f554f2ba${W}></div>`),z(ssrRenderComponent(k,{id:e.ANCHORS.ARTICLE_META_ELEMENT_ID,article:e.article,plain:e.isMobile},{action:withCtx((ce,me,we,ae)=>{if(me)me(ssrRenderComponent(S,{likes:e.article.meta.likes,"is-liked":e.isLiked,"hidden-sponsor":e.isMobile,"enabled-parkinson":!e.isMobile&&(e.userAgent.isChrome||e.userAgent.isFirefox),onLike:e.handleLike,onSponsor:e.handleSponsor},null,we,ae));else return[createVNode(S,{likes:e.article.meta.likes,"is-liked":e.isLiked,"hidden-sponsor":e.isMobile,"enabled-parkinson":!e.isMobile&&(e.userAgent.isChrome||e.userAgent.isFirefox),onLike:e.handleLike,onSponsor:e.handleSponsor},null,8,["likes","is-liked","hidden-sponsor","enabled-parkinson","onLike","onSponsor"])]}),_:1},U,W)),z(`</div><div class="module margin background" data-v-f554f2ba${W}><div class="bridge left" data-v-f554f2ba${W}></div><div class="bridge right" data-v-f554f2ba${W}></div>`),z(ssrRenderComponent(N,{id:e.ANCHORS.ARTICLE_SHARE_ELEMENT_ID,"article-id":e.articleId,likes:((re=(Z=e.article)==null?void 0:Z.meta)==null?void 0:re.likes)||0,socials:e.isMobile?[e.SocialMedia.Wechat,e.SocialMedia.Weibo,e.SocialMedia.Twitter]:[]},null,U,W)),z(`</div><div class="module margin overflow" data-v-f554f2ba${W}>`),z(ssrRenderComponent(L,{prev:e.store.prevArticle,next:e.store.nextArticle},null,U,W)),z(`</div><div class="module margin overflow" data-v-f554f2ba${W}>`),z(ssrRenderComponent(P,{id:e.ANCHORS.ARTICLE_RELATED_ELEMENT_ID,columns:e.isMobile?2:3,count:e.isMobile?4:6,articles:e.store.relatedArticles},null,U,W)),z("</div></div>")):z("<!---->");else return[e.article?(openBlock(),createBlock("div",{key:0},[createVNode("div",{class:"module margin background overflow"},[createVNode(E,{id:e.ANCHORS.ARTICLE_CONTENT_ELEMENT_ID,"readmore-id":e.ANCHORS.ARTICLE_READMORE_ELEMENT_ID,article:e.article,onRendered:e.handleContentRendered},null,8,["id","readmore-id","article","onRendered"]),createVNode("div",{class:"divider"}),createVNode(k,{id:e.ANCHORS.ARTICLE_META_ELEMENT_ID,article:e.article,plain:e.isMobile},{action:withCtx(()=>[createVNode(S,{likes:e.article.meta.likes,"is-liked":e.isLiked,"hidden-sponsor":e.isMobile,"enabled-parkinson":!e.isMobile&&(e.userAgent.isChrome||e.userAgent.isFirefox),onLike:e.handleLike,onSponsor:e.handleSponsor},null,8,["likes","is-liked","hidden-sponsor","enabled-parkinson","onLike","onSponsor"])]),_:1},8,["id","article","plain"])]),createVNode("div",{class:"module margin background"},[createVNode("div",{class:"bridge left"}),createVNode("div",{class:"bridge right"}),createVNode(N,{id:e.ANCHORS.ARTICLE_SHARE_ELEMENT_ID,"article-id":e.articleId,likes:((se=(oe=e.article)==null?void 0:oe.meta)==null?void 0:se.likes)||0,socials:e.isMobile?[e.SocialMedia.Wechat,e.SocialMedia.Weibo,e.SocialMedia.Twitter]:[]},null,8,["id","article-id","likes","socials"])]),createVNode("div",{class:"module margin overflow"},[createVNode(L,{prev:e.store.prevArticle,next:e.store.nextArticle},null,8,["prev","next"])]),createVNode("div",{class:"module margin overflow"},[createVNode(P,{id:e.ANCHORS.ARTICLE_RELATED_ELEMENT_ID,columns:e.isMobile?2:3,count:e.isMobile?4:6,articles:e.store.relatedArticles},null,8,["id","columns","count","articles"])])])):createCommentVNode("",!0)]}),_:1},n)),t('<div class="comment" data-v-f554f2ba>'),t(ssrRenderComponent(O,{plain:e.isMobile,fetching:e.fetching,"post-id":e.articleId},null,n)),t("</div></div>")}const _sfc_setup$10=_sfc_main$10.setup;_sfc_main$10.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/article/index.vue"),_sfc_setup$10?_sfc_setup$10(e,t):void 0};const ArticleDetailPage=_export_sfc(_sfc_main$10,[["ssrRender",_sfc_ssrRender$10],["__scopeId","data-v-f554f2ba"]]),useDoubanMoviesStore=defineFetchStore({id:"doubanMovies",initData:null,onlyOnce:!0,fetcher:()=>tunnel$1.dispatch(TunnelModule.DoubanMovies)}),useInstagramMediasStore=defineFetchStore({id:"instagramMedias",initData:[],fetcher(){return tunnel$1.dispatch(TunnelModule.InstagramMedias)}}),useYouTubePlayListStore=defineFetchStore({id:"youtubePlaylist",initData:[],async fetcher(){const e=await tunnel$1.dispatch(TunnelModule.YouTubePlaylist);return e.sort((t,n)=>t.snippet.position-n.snippet.position),e}}),fetchYouTubeVideoList=e=>tunnel$1.dispatch(TunnelModule.YouTubeVideoList,{id:e}),useTwitterUserinfoStore=defineFetchStore({id:"twitterUserinfo",initData:null,fetcher:()=>tunnel$1.dispatch(TunnelModule.TwitterUserInfo)}),useTwitterTweetsStore=defineFetchStore({id:"twitterTweets",initData:null,fetcher:()=>tunnel$1.dispatch(TunnelModule.TwitterTweets)}),useMyGoogleMapStore=defineFetchStore({id:"myGoogleMap",initData:null,onlyOnce:!0,fetcher:()=>tunnel$1.dispatch(TunnelModule.MyGoogleMap)}),_sfc_main$$=defineComponent({name:"AboutPageInstagram",setup(){const e=ref(!0),t=useInstagramMediasStore(),n=computed(()=>t.data.slice(0,23));return onMounted(()=>{t.fetch().finally(()=>{e.value=!1})}),{isVideoMediaIns,isAlbumMediaIns,getInstagramImage,LanguageKey,VALUABLE_LINKS,fetching:e,store:t,insMedias:n}}}),instagram_vue_vue_type_style_index_0_scoped_70dedccf_lang="";function _sfc_ssrRender$$(e,t,n,r,c,d,g,o){const v=resolveComponent("placeholder"),x=resolveComponent("skeleton-base"),E=resolveComponent("ulink"),k=resolveComponent("uimage");t(ssrRenderComponent(v,mergeProps({"i18n-key":e.LanguageKey.EMPTY_PLACEHOLDER,loading:e.fetching,data:e.insMedias},r),{loading:withCtx((S,N,L,P)=>{if(N)N(`<ul class="list" data-v-70dedccf${P}><!--[-->`),ssrRenderList(24,O=>{N(`<li class="item" data-v-70dedccf${P}>`),N(ssrRenderComponent(x,null,null,L,P)),N("</li>")}),N("<!--]--></ul>");else return[createVNode("ul",{class:"list"},[(openBlock(),createBlock(Fragment,null,renderList(24,O=>createVNode("li",{class:"item",key:O},[createVNode(x)])),64))])]}),default:withCtx((S,N,L,P)=>{if(N)N(`<ul class="list" data-v-70dedccf${P}><!--[-->`),ssrRenderList(e.insMedias,(O,V)=>{N(`<li class="item" data-v-70dedccf${P}>`),N(ssrRenderComponent(E,{class:"link",href:O.permalink,title:O.caption},{default:withCtx((z,U,W,Z)=>{if(U)U(ssrRenderComponent(k,{class:"cover",src:e.getInstagramImage(O,"t"),alt:O.caption},null,W,Z)),U(`<div class="type-icon" data-v-70dedccf${Z}>`),e.isVideoMediaIns(O)?U(`<i class="iconfont icon-video" data-v-70dedccf${Z}></i>`):U("<!---->"),e.isAlbumMediaIns(O)?U(`<i class="iconfont icon-album" data-v-70dedccf${Z}></i>`):U("<!---->"),U(`</div><div class="mask" data-v-70dedccf${Z}>`),e.isVideoMediaIns(O)?U(`<i class="iconfont icon-music-play" data-v-70dedccf${Z}></i>`):U(`<i class="iconfont icon-eye" data-v-70dedccf${Z}></i>`),U("</div>");else return[createVNode(k,{class:"cover",src:e.getInstagramImage(O,"t"),alt:O.caption},null,8,["src","alt"]),createVNode("div",{class:"type-icon"},[e.isVideoMediaIns(O)?(openBlock(),createBlock("i",{key:0,class:"iconfont icon-video"})):createCommentVNode("",!0),e.isAlbumMediaIns(O)?(openBlock(),createBlock("i",{key:1,class:"iconfont icon-album"})):createCommentVNode("",!0)]),createVNode("div",{class:"mask"},[e.isVideoMediaIns(O)?(openBlock(),createBlock("i",{key:0,class:"iconfont icon-music-play"})):(openBlock(),createBlock("i",{key:1,class:"iconfont icon-eye"}))])]}),_:2},L,P)),N("</li>")}),N(`<!--]--><li class="item" data-v-70dedccf${P}>`),N(ssrRenderComponent(E,{class:"link more",href:e.VALUABLE_LINKS.INSTAGRAM},{default:withCtx((O,V,z,U)=>{if(V)V("\u2022\u2022\u2022");else return[createTextVNode("\u2022\u2022\u2022")]}),_:1},L,P)),N("</li></ul>");else return[createVNode("ul",{class:"list"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.insMedias,(O,V)=>(openBlock(),createBlock("li",{class:"item",key:V},[createVNode(E,{class:"link",href:O.permalink,title:O.caption},{default:withCtx(()=>[createVNode(k,{class:"cover",src:e.getInstagramImage(O,"t"),alt:O.caption},null,8,["src","alt"]),createVNode("div",{class:"type-icon"},[e.isVideoMediaIns(O)?(openBlock(),createBlock("i",{key:0,class:"iconfont icon-video"})):createCommentVNode("",!0),e.isAlbumMediaIns(O)?(openBlock(),createBlock("i",{key:1,class:"iconfont icon-album"})):createCommentVNode("",!0)]),createVNode("div",{class:"mask"},[e.isVideoMediaIns(O)?(openBlock(),createBlock("i",{key:0,class:"iconfont icon-music-play"})):(openBlock(),createBlock("i",{key:1,class:"iconfont icon-eye"}))])]),_:2},1032,["href","title"])]))),128)),createVNode("li",{class:"item"},[createVNode(E,{class:"link more",href:e.VALUABLE_LINKS.INSTAGRAM},{default:withCtx(()=>[createTextVNode("\u2022\u2022\u2022")]),_:1},8,["href"])])])]}),_:1},n))}const _sfc_setup$$=_sfc_main$$.setup;_sfc_main$$.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/about/media/instagram.vue"),_sfc_setup$$?_sfc_setup$$(e,t):void 0};const InstagramMedia=_export_sfc(_sfc_main$$,[["ssrRender",_sfc_ssrRender$$],["__scopeId","data-v-70dedccf"]]),_sfc_main$_=defineComponent({name:"StatisticBase",props:{brand:String,icon:String,platform:String,href:String,fetching:Boolean,data:Object},setup(){const{isDarkTheme:e}=useEnhancer();return{LanguageKey,isDarkTheme:e}}}),StatisticCount=defineComponent({name:"StatisticCount",props:{count:[Number,String],primary:Boolean,large:Boolean,kilo:Boolean,split:Boolean},render(){const e=Number(this.$props.count),t=this.kilo?numberToKilo(e):this.split?numberSplit(e):String(e),n={primary:this.$props.primary,large:this.large};return h("span",{class:["count",n]},t)}}),base_vue_vue_type_style_index_0_scoped_39e494cb_lang="";function _sfc_ssrRender$_(e,t,n,r,c,d,g,o){const v=resolveComponent("placeholder"),x=resolveComponent("skeleton-base"),E=resolveComponent("ulink");t(`<div${ssrRenderAttrs(mergeProps({class:["statistic",[e.brand,{dark:e.isDarkTheme}]]},r))} data-v-39e494cb>`),t(ssrRenderComponent(v,{"i18n-key":e.LanguageKey.EMPTY_PLACEHOLDER,loading:e.fetching,data:e.data},{loading:withCtx((k,S,N,L)=>{if(S)S(`<ul class="skeletons" data-v-39e494cb${L}><!--[-->`),ssrRenderList(3,P=>{S(ssrRenderComponent(x,{key:P,class:"item"},null,N,L))}),S("<!--]--></ul>");else return[createVNode("ul",{class:"skeletons"},[(openBlock(),createBlock(Fragment,null,renderList(3,P=>createVNode(x,{key:P,class:"item"})),64))])]}),default:withCtx((k,S,N,L)=>{if(S)S(`<div class="content" data-v-39e494cb${L}>`),S(ssrRenderComponent(E,{class:"title",href:e.href},{default:withCtx((P,O,V,z)=>{if(O)O(`<span class="left" data-v-39e494cb${z}><i class="${ssrRenderClass([e.icon,"iconfont"])}" data-v-39e494cb${z}></i><span class="text" data-v-39e494cb${z}>${ssrInterpolate(e.platform)}</span></span><span class="right" data-v-39e494cb${z}><i class="iconfont icon-next" data-v-39e494cb${z}></i></span>`);else return[createVNode("span",{class:"left"},[createVNode("i",{class:["iconfont",e.icon]},null,2),createVNode("span",{class:"text"},toDisplayString(e.platform),1)]),createVNode("span",{class:"right"},[createVNode("i",{class:"iconfont icon-next"})])]}),_:1},N,L)),ssrRenderSlot(e.$slots,"default",{},null,S,N,L),S("</div>");else return[createVNode("div",{class:"content"},[createVNode(E,{class:"title",href:e.href},{default:withCtx(()=>[createVNode("span",{class:"left"},[createVNode("i",{class:["iconfont",e.icon]},null,2),createVNode("span",{class:"text"},toDisplayString(e.platform),1)]),createVNode("span",{class:"right"},[createVNode("i",{class:"iconfont icon-next"})])]),_:1},8,["href"]),renderSlot(e.$slots,"default",{},void 0,!0)])]}),_:3},n)),t("</div>")}const _sfc_setup$_=_sfc_main$_.setup;_sfc_main$_.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/about/statistic/base.vue"),_sfc_setup$_?_sfc_setup$_(e,t):void 0};const StatisticBase=_export_sfc(_sfc_main$_,[["ssrRender",_sfc_ssrRender$_],["__scopeId","data-v-39e494cb"]]),_sfc_main$Z=defineComponent({name:"AboutPageDoubanStatistic",components:{StatisticBase,StatisticCount},setup(){const{isZhLang:e}=useEnhancer(),t=useDoubanMoviesStore(),n=ref(!0),r=computed(()=>{var d,g;return Math.trunc((g=(d=t.data)==null?void 0:d.total_spent)!=null?g:0)}),c=computed(()=>{var d,g;return((g=(d=t.data)==null?void 0:d.weekly_avg)!=null?g:0).toFixed(2)});return onMounted(()=>{t.fetch().finally(()=>{n.value=!1})}),{VALUABLE_LINKS,isZhLang:e,fetching:n,store:t,totalSpent:r,weeklyAvg:c}}});function _sfc_ssrRender$Z(e,t,n,r,c,d,g,o){const v=resolveComponent("statistic-base"),x=resolveComponent("i18n"),E=resolveComponent("statistic-count");t(ssrRenderComponent(v,mergeProps({brand:"douban",icon:"icon-douban",data:e.store.data,fetching:e.fetching,href:e.VALUABLE_LINKS.DOUBAN_MOVIE,platform:e.isZhLang?"\u6211\u5728\u8C46\u74E3":"Douban Movie"},r),{default:withCtx((k,S,N,L)=>{if(S)S(`<p${L}><i class="iconfont icon-video-outline"${L}></i>`),S(ssrRenderComponent(x,null,{zh:withCtx((P,O,V,z)=>{if(O)O(`<span${z}>\u6807\u8BB0\u770B\u8FC7</span>`),O(ssrRenderComponent(E,{large:"",primary:"",split:"",count:e.store.data.total_collections},null,V,z)),O(`<span${z}>\u90E8\u5F71\u7247</span>`);else return[createVNode("span",null,"\u6807\u8BB0\u770B\u8FC7"),createVNode(E,{large:"",primary:"",split:"",count:e.store.data.total_collections},null,8,["count"]),createVNode("span",null,"\u90E8\u5F71\u7247")]}),en:withCtx((P,O,V,z)=>{if(O)O(ssrRenderComponent(E,{large:"",primary:"",split:"",count:e.store.data.total_collections},null,V,z)),O(`<span${z}>films marked</span>`);else return[createVNode(E,{large:"",primary:"",split:"",count:e.store.data.total_collections},null,8,["count"]),createVNode("span",null,"films marked")]}),_:1},N,L)),S(`</p><p${L}><i class="iconfont icon-clock-outline"${L}></i>`),S(ssrRenderComponent(x,null,{zh:withCtx((P,O,V,z)=>{if(O)O(`<span${z}>\u7D2F\u8BA1\u82B1\u8D39</span>`),O(ssrRenderComponent(E,{split:"",count:e.totalSpent},null,V,z)),O(`<span${z}>\u5C0F\u65F6</span>`);else return[createVNode("span",null,"\u7D2F\u8BA1\u82B1\u8D39"),createVNode(E,{split:"",count:e.totalSpent},null,8,["count"]),createVNode("span",null,"\u5C0F\u65F6")]}),en:withCtx((P,O,V,z)=>{if(O)O(ssrRenderComponent(E,{split:"",count:e.totalSpent},null,V,z)),O(`<span${z}>hrs watching</span>`);else return[createVNode(E,{split:"",count:e.totalSpent},null,8,["count"]),createVNode("span",null,"hrs watching")]}),_:1},N,L)),S(`</p><p${L}><i class="iconfont icon-week"${L}></i>`),S(ssrRenderComponent(x,null,{zh:withCtx((P,O,V,z)=>{if(O)O("\u5E73\u5747\u6BCF\u5468 "),O(ssrRenderComponent(E,{count:e.weeklyAvg},null,V,z)),O(" \u90E8\u5F71\u7247");else return[createTextVNode("\u5E73\u5747\u6BCF\u5468 "),createVNode(E,{count:e.weeklyAvg},null,8,["count"]),createTextVNode(" \u90E8\u5F71\u7247")]}),en:withCtx((P,O,V,z)=>{if(O)O(ssrRenderComponent(E,{count:e.weeklyAvg},null,V,z)),O(" films per week");else return[createVNode(E,{count:e.weeklyAvg},null,8,["count"]),createTextVNode(" films per week")]}),_:1},N,L)),S("</p>");else return[createVNode("p",null,[createVNode("i",{class:"iconfont icon-video-outline"}),createVNode(x,null,{zh:withCtx(()=>[createVNode("span",null,"\u6807\u8BB0\u770B\u8FC7"),createVNode(E,{large:"",primary:"",split:"",count:e.store.data.total_collections},null,8,["count"]),createVNode("span",null,"\u90E8\u5F71\u7247")]),en:withCtx(()=>[createVNode(E,{large:"",primary:"",split:"",count:e.store.data.total_collections},null,8,["count"]),createVNode("span",null,"films marked")]),_:1})]),createVNode("p",null,[createVNode("i",{class:"iconfont icon-clock-outline"}),createVNode(x,null,{zh:withCtx(()=>[createVNode("span",null,"\u7D2F\u8BA1\u82B1\u8D39"),createVNode(E,{split:"",count:e.totalSpent},null,8,["count"]),createVNode("span",null,"\u5C0F\u65F6")]),en:withCtx(()=>[createVNode(E,{split:"",count:e.totalSpent},null,8,["count"]),createVNode("span",null,"hrs watching")]),_:1})]),createVNode("p",null,[createVNode("i",{class:"iconfont icon-week"}),createVNode(x,null,{zh:withCtx(()=>[createTextVNode("\u5E73\u5747\u6BCF\u5468 "),createVNode(E,{count:e.weeklyAvg},null,8,["count"]),createTextVNode(" \u90E8\u5F71\u7247")]),en:withCtx(()=>[createVNode(E,{count:e.weeklyAvg},null,8,["count"]),createTextVNode(" films per week")]),_:1})])]}),_:1},n))}const _sfc_setup$Z=_sfc_main$Z.setup;_sfc_main$Z.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/about/statistic/douban.vue"),_sfc_setup$Z?_sfc_setup$Z(e,t):void 0};const DoubanStatistic=_export_sfc(_sfc_main$Z,[["ssrRender",_sfc_ssrRender$Z]]),_sfc_main$Y=defineComponent({name:"AboutPageGitHubStatistic",components:{StatisticBase,StatisticCount},setup(){const{isZhLang:e}=useEnhancer(),t=ref(!0),n=useGitHubStatisticStore();return onMounted(()=>{n.fetch().finally(()=>{t.value=!1})}),{VALUABLE_LINKS,isZhLang:e,fetching:t,store:n}}});function _sfc_ssrRender$Y(e,t,n,r,c,d,g,o){const v=resolveComponent("statistic-base"),x=resolveComponent("i18n"),E=resolveComponent("statistic-count");t(ssrRenderComponent(v,mergeProps({brand:"github",icon:"icon-github",data:e.store.data,fetching:e.fetching,href:e.VALUABLE_LINKS.GITHUB,platform:e.isZhLang?"\u6211\u5728 GitHub":"GitHub"},r),{default:withCtx((k,S,N,L)=>{if(S)S(`<p${L}><i class="iconfont icon-star-outline"${L}></i>`),S(ssrRenderComponent(x,null,{zh:withCtx((P,O,V,z)=>{var U,W;if(O)O(`<span${z}>\u5171\u83B7\u5F97</span>`),O(ssrRenderComponent(E,{large:"",primary:"",split:"",count:(U=e.store.data)==null?void 0:U.statistics.stars},null,V,z)),O(`<span${z}>\u4E2A star</span>`);else return[createVNode("span",null,"\u5171\u83B7\u5F97"),createVNode(E,{large:"",primary:"",split:"",count:(W=e.store.data)==null?void 0:W.statistics.stars},null,8,["count"]),createVNode("span",null,"\u4E2A star")]}),en:withCtx((P,O,V,z)=>{var U,W;if(O)O(ssrRenderComponent(E,{large:"",primary:"",split:"",count:(U=e.store.data)==null?void 0:U.statistics.stars},null,V,z)),O(`<span${z}>stars</span>`);else return[createVNode(E,{large:"",primary:"",split:"",count:(W=e.store.data)==null?void 0:W.statistics.stars},null,8,["count"]),createVNode("span",null,"stars")]}),_:1},N,L)),S(`</p><p${L}><i class="iconfont icon-repository"${L}></i>`),S(ssrRenderComponent(x,null,{zh:withCtx((P,O,V,z)=>{var U,W;if(O)O(`<span${z}>\u5171\u7EF4\u62A4</span>`),O(ssrRenderComponent(E,{count:(U=e.store.data)==null?void 0:U.repositories.length},null,V,z)),O(`<span${z}>\u4E2A\u5F00\u6E90\u9879\u76EE</span>`);else return[createVNode("span",null,"\u5171\u7EF4\u62A4"),createVNode(E,{count:(W=e.store.data)==null?void 0:W.repositories.length},null,8,["count"]),createVNode("span",null,"\u4E2A\u5F00\u6E90\u9879\u76EE")]}),en:withCtx((P,O,V,z)=>{var U,W;if(O)O(ssrRenderComponent(E,{count:(U=e.store.data)==null?void 0:U.repositories.length},null,V,z)),O(`<span${z}>repositories</span>`);else return[createVNode(E,{count:(W=e.store.data)==null?void 0:W.repositories.length},null,8,["count"]),createVNode("span",null,"repositories")]}),_:1},N,L)),S(`</p><p${L}><i class="iconfont icon-organization"${L}></i>`),S(ssrRenderComponent(x,null,{zh:withCtx((P,O,V,z)=>{var U,W;if(O)O(`<span${z}>\u7EF4\u62A4/\u53D1\u8D77</span>`),O(ssrRenderComponent(E,{count:(U=e.store.data)==null?void 0:U.organizations.length},null,V,z)),O(`<span${z}>\u4E2A\u5F00\u6E90\u7EC4\u7EC7</span>`);else return[createVNode("span",null,"\u7EF4\u62A4/\u53D1\u8D77"),createVNode(E,{count:(W=e.store.data)==null?void 0:W.organizations.length},null,8,["count"]),createVNode("span",null,"\u4E2A\u5F00\u6E90\u7EC4\u7EC7")]}),en:withCtx((P,O,V,z)=>{var U,W;if(O)O(ssrRenderComponent(E,{count:(U=e.store.data)==null?void 0:U.organizations.length},null,V,z)),O(`<span${z}>organizations</span>`);else return[createVNode(E,{count:(W=e.store.data)==null?void 0:W.organizations.length},null,8,["count"]),createVNode("span",null,"organizations")]}),_:1},N,L)),S("</p>");else return[createVNode("p",null,[createVNode("i",{class:"iconfont icon-star-outline"}),createVNode(x,null,{zh:withCtx(()=>{var P;return[createVNode("span",null,"\u5171\u83B7\u5F97"),createVNode(E,{large:"",primary:"",split:"",count:(P=e.store.data)==null?void 0:P.statistics.stars},null,8,["count"]),createVNode("span",null,"\u4E2A star")]}),en:withCtx(()=>{var P;return[createVNode(E,{large:"",primary:"",split:"",count:(P=e.store.data)==null?void 0:P.statistics.stars},null,8,["count"]),createVNode("span",null,"stars")]}),_:1})]),createVNode("p",null,[createVNode("i",{class:"iconfont icon-repository"}),createVNode(x,null,{zh:withCtx(()=>{var P;return[createVNode("span",null,"\u5171\u7EF4\u62A4"),createVNode(E,{count:(P=e.store.data)==null?void 0:P.repositories.length},null,8,["count"]),createVNode("span",null,"\u4E2A\u5F00\u6E90\u9879\u76EE")]}),en:withCtx(()=>{var P;return[createVNode(E,{count:(P=e.store.data)==null?void 0:P.repositories.length},null,8,["count"]),createVNode("span",null,"repositories")]}),_:1})]),createVNode("p",null,[createVNode("i",{class:"iconfont icon-organization"}),createVNode(x,null,{zh:withCtx(()=>{var P;return[createVNode("span",null,"\u7EF4\u62A4/\u53D1\u8D77"),createVNode(E,{count:(P=e.store.data)==null?void 0:P.organizations.length},null,8,["count"]),createVNode("span",null,"\u4E2A\u5F00\u6E90\u7EC4\u7EC7")]}),en:withCtx(()=>{var P;return[createVNode(E,{count:(P=e.store.data)==null?void 0:P.organizations.length},null,8,["count"]),createVNode("span",null,"organizations")]}),_:1})])]}),_:1},n))}const _sfc_setup$Y=_sfc_main$Y.setup;_sfc_main$Y.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/about/statistic/github.vue"),_sfc_setup$Y?_sfc_setup$Y(e,t):void 0};const GithubStatistic=_export_sfc(_sfc_main$Y,[["ssrRender",_sfc_ssrRender$Y]]),_sfc_main$X=defineComponent({name:"AboutPageTwitterStatistic",components:{StatisticBase,StatisticCount},setup(){const{isZhLang:e}=useEnhancer(),t=ref(!0),n=useTwitterUserinfoStore();return onMounted(()=>{n.fetch().finally(()=>{t.value=!1})}),{VALUABLE_LINKS,isZhLang:e,fetching:t,store:n}}});function _sfc_ssrRender$X(e,t,n,r,c,d,g,o){const v=resolveComponent("statistic-base"),x=resolveComponent("i18n"),E=resolveComponent("statistic-count");t(ssrRenderComponent(v,mergeProps({brand:"twitter",icon:"icon-twitter",data:e.store.data,fetching:e.fetching,href:e.VALUABLE_LINKS.TWITTER,platform:e.isZhLang?"\u6211\u5728\u63A8\u7279":"Twitter"},r),{default:withCtx((k,S,N,L)=>{if(S)S(`<p${L}><i class="iconfont icon-edit"${L}></i>`),S(ssrRenderComponent(x,null,{zh:withCtx((P,O,V,z)=>{var U,W;if(O)O(`<span${z}>\u53D1\u5E03\u4E86</span>`),O(ssrRenderComponent(E,{large:"",primary:"",split:"",count:(U=e.store.data)==null?void 0:U.public_metrics.tweet_count},null,V,z)),O(`<span${z}>\u6761\u63A8\u6587</span>`);else return[createVNode("span",null,"\u53D1\u5E03\u4E86"),createVNode(E,{large:"",primary:"",split:"",count:(W=e.store.data)==null?void 0:W.public_metrics.tweet_count},null,8,["count"]),createVNode("span",null,"\u6761\u63A8\u6587")]}),en:withCtx((P,O,V,z)=>{var U,W;if(O)O(ssrRenderComponent(E,{large:"",primary:"",split:"",count:(U=e.store.data)==null?void 0:U.public_metrics.tweet_count},null,V,z)),O(`<span${z}>tweets</span>`);else return[createVNode(E,{large:"",primary:"",split:"",count:(W=e.store.data)==null?void 0:W.public_metrics.tweet_count},null,8,["count"]),createVNode("span",null,"tweets")]}),_:1},N,L)),S(`</p><p${L}><i class="iconfont icon-following"${L}></i>`),S(ssrRenderComponent(x,null,{zh:withCtx((P,O,V,z)=>{var U,W;if(O)O(`<span${z}>\u5173\u6CE8\u4E86</span>`),O(ssrRenderComponent(E,{split:"",count:(U=e.store.data)==null?void 0:U.public_metrics.following_count},null,V,z)),O(`<span${z}>\u4E2A\u4EBA</span>`);else return[createVNode("span",null,"\u5173\u6CE8\u4E86"),createVNode(E,{split:"",count:(W=e.store.data)==null?void 0:W.public_metrics.following_count},null,8,["count"]),createVNode("span",null,"\u4E2A\u4EBA")]}),en:withCtx((P,O,V,z)=>{var U,W;if(O)O(ssrRenderComponent(E,{split:"",count:(U=e.store.data)==null?void 0:U.public_metrics.following_count},null,V,z)),O(`<span${z}>following</span>`);else return[createVNode(E,{split:"",count:(W=e.store.data)==null?void 0:W.public_metrics.following_count},null,8,["count"]),createVNode("span",null,"following")]}),_:1},N,L)),S(`</p><p${L}><i class="iconfont icon-follower"${L}></i>`),S(ssrRenderComponent(x,null,{zh:withCtx((P,O,V,z)=>{var U,W;if(O)O(`<span${z}>\u6536\u83B7\u4E86</span>`),O(ssrRenderComponent(E,{split:"",count:(U=e.store.data)==null?void 0:U.public_metrics.followers_count},null,V,z)),O(`<span${z}>\u4E2A\u7C89\u4E1D</span>`);else return[createVNode("span",null,"\u6536\u83B7\u4E86"),createVNode(E,{split:"",count:(W=e.store.data)==null?void 0:W.public_metrics.followers_count},null,8,["count"]),createVNode("span",null,"\u4E2A\u7C89\u4E1D")]}),en:withCtx((P,O,V,z)=>{var U,W;if(O)O(ssrRenderComponent(E,{split:"",count:(U=e.store.data)==null?void 0:U.public_metrics.followers_count},null,V,z)),O(`<span${z}>followers</span>`);else return[createVNode(E,{split:"",count:(W=e.store.data)==null?void 0:W.public_metrics.followers_count},null,8,["count"]),createVNode("span",null,"followers")]}),_:1},N,L)),S("</p>");else return[createVNode("p",null,[createVNode("i",{class:"iconfont icon-edit"}),createVNode(x,null,{zh:withCtx(()=>{var P;return[createVNode("span",null,"\u53D1\u5E03\u4E86"),createVNode(E,{large:"",primary:"",split:"",count:(P=e.store.data)==null?void 0:P.public_metrics.tweet_count},null,8,["count"]),createVNode("span",null,"\u6761\u63A8\u6587")]}),en:withCtx(()=>{var P;return[createVNode(E,{large:"",primary:"",split:"",count:(P=e.store.data)==null?void 0:P.public_metrics.tweet_count},null,8,["count"]),createVNode("span",null,"tweets")]}),_:1})]),createVNode("p",null,[createVNode("i",{class:"iconfont icon-following"}),createVNode(x,null,{zh:withCtx(()=>{var P;return[createVNode("span",null,"\u5173\u6CE8\u4E86"),createVNode(E,{split:"",count:(P=e.store.data)==null?void 0:P.public_metrics.following_count},null,8,["count"]),createVNode("span",null,"\u4E2A\u4EBA")]}),en:withCtx(()=>{var P;return[createVNode(E,{split:"",count:(P=e.store.data)==null?void 0:P.public_metrics.following_count},null,8,["count"]),createVNode("span",null,"following")]}),_:1})]),createVNode("p",null,[createVNode("i",{class:"iconfont icon-follower"}),createVNode(x,null,{zh:withCtx(()=>{var P;return[createVNode("span",null,"\u6536\u83B7\u4E86"),createVNode(E,{split:"",count:(P=e.store.data)==null?void 0:P.public_metrics.followers_count},null,8,["count"]),createVNode("span",null,"\u4E2A\u7C89\u4E1D")]}),en:withCtx(()=>{var P;return[createVNode(E,{split:"",count:(P=e.store.data)==null?void 0:P.public_metrics.followers_count},null,8,["count"]),createVNode("span",null,"followers")]}),_:1})])]}),_:1},n))}const _sfc_setup$X=_sfc_main$X.setup;_sfc_main$X.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/about/statistic/twitter.vue"),_sfc_setup$X?_sfc_setup$X(e,t):void 0};const TwitterStatistic=_export_sfc(_sfc_main$X,[["ssrRender",_sfc_ssrRender$X]]),_sfc_main$W=defineComponent({name:"AboutPageNPMStatistic",components:{StatisticBase,StatisticCount},setup(){const{isZhLang:e}=useEnhancer(),t=ref(!0),n=useNPMStatisticStore();return onMounted(()=>{n.fetch().finally(()=>{t.value=!1})}),{VALUABLE_LINKS,isZhLang:e,fetching:t,store:n}}}),npm_vue_vue_type_style_index_0_scoped_5f157c0c_lang="";function _sfc_ssrRender$W(e,t,n,r,c,d,g,o){const v=resolveComponent("statistic-base"),x=resolveComponent("i18n"),E=resolveComponent("statistic-count");t(ssrRenderComponent(v,mergeProps({brand:"npm",icon:"icon-npm",data:e.store.data,fetching:e.fetching,href:e.VALUABLE_LINKS.NPM_HOMEPAGE,platform:e.isZhLang?"\u6211\u5728 NPM":"NPM"},r),{default:withCtx((k,S,N,L)=>{if(S)S(`<p class="line-1" data-v-5f157c0c${L}><i class="iconfont icon-package" data-v-5f157c0c${L}></i>`),S(ssrRenderComponent(x,null,{zh:withCtx((P,O,V,z)=>{if(O)O(`<span data-v-5f157c0c${z}>\u53D1\u5E03\u4E86</span>`),O(ssrRenderComponent(E,{count:e.store.totalPackages},null,V,z)),O(`<span data-v-5f157c0c${z}>\u4E2A\u516C\u5171\u8F6F\u4EF6\u5305</span>`);else return[createVNode("span",null,"\u53D1\u5E03\u4E86"),createVNode(E,{count:e.store.totalPackages},null,8,["count"]),createVNode("span",null,"\u4E2A\u516C\u5171\u8F6F\u4EF6\u5305")]}),en:withCtx((P,O,V,z)=>{if(O)O(ssrRenderComponent(E,{count:e.store.totalPackages},null,V,z)),O(`<span data-v-5f157c0c${z}>packages</span>`);else return[createVNode(E,{count:e.store.totalPackages},null,8,["count"]),createVNode("span",null,"packages")]}),_:1},N,L)),S(`</p><p data-v-5f157c0c${L}><i class="iconfont icon-download" data-v-5f157c0c${L}></i>`),S(ssrRenderComponent(x,null,{zh:withCtx((P,O,V,z)=>{if(O)O(`<span data-v-5f157c0c${z}>\u88AB\u4E0B\u8F7D</span>`),O(ssrRenderComponent(E,{large:"",primary:"",split:"",count:e.store.totalDownloads},null,V,z)),O(`<span data-v-5f157c0c${z}>\u6B21</span>`);else return[createVNode("span",null,"\u88AB\u4E0B\u8F7D"),createVNode(E,{large:"",primary:"",split:"",count:e.store.totalDownloads},null,8,["count"]),createVNode("span",null,"\u6B21")]}),en:withCtx((P,O,V,z)=>{if(O)O(ssrRenderComponent(E,{large:"",primary:"",split:"",count:e.store.totalDownloads},null,V,z)),O(`<span data-v-5f157c0c${z}>downs</span>`);else return[createVNode(E,{large:"",primary:"",split:"",count:e.store.totalDownloads},null,8,["count"]),createVNode("span",null,"downs")]}),_:1},N,L)),S(`</p><p data-v-5f157c0c${L}><i class="iconfont icon-score" data-v-5f157c0c${L}></i>`),S(ssrRenderComponent(x,null,{zh:withCtx((P,O,V,z)=>{if(O)O(`<span data-v-5f157c0c${z}>\u5E73\u5747\u8BC4\u5206</span>`),O(ssrRenderComponent(E,{count:e.store.averageScore},null,V,z)),O(`<span data-v-5f157c0c${z}>\u5206</span>`);else return[createVNode("span",null,"\u5E73\u5747\u8BC4\u5206"),createVNode(E,{count:e.store.averageScore},null,8,["count"]),createVNode("span",null,"\u5206")]}),en:withCtx((P,O,V,z)=>{if(O)O(ssrRenderComponent(E,{count:e.store.averageScore},null,V,z)),O(`<span data-v-5f157c0c${z}>average score</span>`);else return[createVNode(E,{count:e.store.averageScore},null,8,["count"]),createVNode("span",null,"average score")]}),_:1},N,L)),S("</p>");else return[createVNode("p",{class:"line-1"},[createVNode("i",{class:"iconfont icon-package"}),createVNode(x,null,{zh:withCtx(()=>[createVNode("span",null,"\u53D1\u5E03\u4E86"),createVNode(E,{count:e.store.totalPackages},null,8,["count"]),createVNode("span",null,"\u4E2A\u516C\u5171\u8F6F\u4EF6\u5305")]),en:withCtx(()=>[createVNode(E,{count:e.store.totalPackages},null,8,["count"]),createVNode("span",null,"packages")]),_:1})]),createVNode("p",null,[createVNode("i",{class:"iconfont icon-download"}),createVNode(x,null,{zh:withCtx(()=>[createVNode("span",null,"\u88AB\u4E0B\u8F7D"),createVNode(E,{large:"",primary:"",split:"",count:e.store.totalDownloads},null,8,["count"]),createVNode("span",null,"\u6B21")]),en:withCtx(()=>[createVNode(E,{large:"",primary:"",split:"",count:e.store.totalDownloads},null,8,["count"]),createVNode("span",null,"downs")]),_:1})]),createVNode("p",null,[createVNode("i",{class:"iconfont icon-score"}),createVNode(x,null,{zh:withCtx(()=>[createVNode("span",null,"\u5E73\u5747\u8BC4\u5206"),createVNode(E,{count:e.store.averageScore},null,8,["count"]),createVNode("span",null,"\u5206")]),en:withCtx(()=>[createVNode(E,{count:e.store.averageScore},null,8,["count"]),createVNode("span",null,"average score")]),_:1})])]}),_:1},n))}const _sfc_setup$W=_sfc_main$W.setup;_sfc_main$W.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/about/statistic/npm.vue"),_sfc_setup$W?_sfc_setup$W(e,t):void 0};const NpmStatistic=_export_sfc(_sfc_main$W,[["ssrRender",_sfc_ssrRender$W],["__scopeId","data-v-5f157c0c"]]),_sfc_main$V=defineComponent({name:"AggregateCalendarDay",props:{date:{type:String,required:!0},tweets:{type:Number,required:!0},instagrams:{type:Number,required:!0},articles:{type:Number,required:!0},contributions:{type:Number,required:!0},githubColor:String},setup(e){const{isDarkTheme:t}=useEnhancer(),n=computed(()=>e.articles+e.tweets+e.contributions+e.instagrams);return{isDarkTheme:t,total:n,getPointHeightStyle:c=>isNaN(c)?0:`${Math.floor(c*100)}%`}}}),day_vue_vue_type_style_index_0_scoped_8767dbcf_lang="";function _sfc_ssrRender$V(e,t,n,r,c,d,g,o){t(`<div${ssrRenderAttrs(mergeProps({class:["day",{dark:e.isDarkTheme}],"data-date":e.date,"data-total-count":e.total,"data-article-count":e.articles,"data-tweet-count":e.tweets,"data-instagram-count":e.instagrams,"data-contribution-count":e.contributions},r))} data-v-8767dbcf><div class="point" data-v-8767dbcf><div class="item article" style="${ssrRenderStyle({height:e.getPointHeightStyle(e.articles/e.total)})}" data-v-8767dbcf></div><div class="item tweet" style="${ssrRenderStyle({height:e.getPointHeightStyle(e.tweets/e.total)})}" data-v-8767dbcf></div><div class="item instagram" style="${ssrRenderStyle({height:e.getPointHeightStyle(e.instagrams/e.total)})}" data-v-8767dbcf></div><div class="item contribution" style="${ssrRenderStyle({height:e.getPointHeightStyle(e.contributions/e.total),backgroundColor:e.githubColor})}" data-v-8767dbcf></div></div>`),e.total?t(`<div class="tooltip" data-v-8767dbcf><p class="date" data-v-8767dbcf>${ssrInterpolate(e.date)}</p><ul class="counts" data-v-8767dbcf><li class="item article" data-v-8767dbcf><i class="iconfont icon-quill" data-v-8767dbcf></i><span class="count" data-v-8767dbcf>${ssrInterpolate(e.articles)}</span> articles </li><li class="item tweet" data-v-8767dbcf><i class="iconfont icon-twitter" data-v-8767dbcf></i><span class="count" data-v-8767dbcf>${ssrInterpolate(e.tweets)}</span> tweets </li><li class="item instagram" data-v-8767dbcf><i class="iconfont icon-instagram" data-v-8767dbcf></i><span class="count" data-v-8767dbcf>${ssrInterpolate(e.instagrams)}</span> instagrams </li><li class="item contribution" data-v-8767dbcf><i class="iconfont icon-github" data-v-8767dbcf></i><span class="count" data-v-8767dbcf>${ssrInterpolate(e.contributions)}</span> contributions </li></ul></div>`):t("<!---->"),t("</div>")}const _sfc_setup$V=_sfc_main$V.setup;_sfc_main$V.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/about/calendar/day.vue"),_sfc_setup$V?_sfc_setup$V(e,t):void 0};const CalendarDay=_export_sfc(_sfc_main$V,[["ssrRender",_sfc_ssrRender$V],["__scopeId","data-v-8767dbcf"]]),_sfc_main$U=defineComponent({name:"AggregateCalendar",components:{CalendarDay},setup(){const{gtag:e}=useEnhancer(),{articleCalendar:t,twitterCalendar:n,instagramCalendar:r,githubCalendar:c}=useStores(),d=computed(()=>new Map(c.days.map(V=>[V.date,V]))),g=V=>{var z;return((z=d.value.get(V))==null?void 0:z.count)||0},o=V=>{var z;return(z=d.value.get(V))==null?void 0:z.color},v=V=>{var z;return((z=n.data.find(U=>U.date===V))==null?void 0:z.count)||0},x=V=>{var z;return((z=r.data.find(U=>U.date===V))==null?void 0:z.count)||0},E=V=>{var z;return((z=t.data.find(U=>U.date===V))==null?void 0:z.count)||0},k=()=>{e==null||e.event("aggregate_calendar",{event_category:GAEventCategories.About})},S=new Date,N=dateToHuman(S),L=Array.from({length:N.day}).map((V,z)=>humanDateToYMD({...N,day:z+1})),P=(V,z)=>{const U=new Date(V.year,V.month-z,0),W=U.getDate();return Array.from({length:W}).map((Z,re)=>humanDateToYMD({...dateToHuman(U),day:re+1}))},O=[P(N,11),P(N,10),P(N,9),P(N,8),P(N,7),P(N,6),P(N,5),P(N,4),P(N,3),P(N,2),P(N,1),L];return onMounted(()=>{t.fetch(),n.fetch(),r.fetch(),c.fetch()}),{months:O,handleHover:k,getDayTweets:v,getDayArticles:E,getDayInstagrams:x,getDayContributions:g,getDayGitHubColor:o}}}),index_vue_vue_type_style_index_0_scoped_0b5e9a9a_lang="";function _sfc_ssrRender$U(e,t,n,r,c,d,g,o){const v=resolveComponent("calendar-day");t(`<ul${ssrRenderAttrs(mergeProps({class:"aggregate-calendar"},r))} data-v-0b5e9a9a><!--[-->`),ssrRenderList(e.months,(x,E)=>{t('<li class="month" data-v-0b5e9a9a><!--[-->'),ssrRenderList(x,(k,S)=>{t(ssrRenderComponent(v,{key:S,date:k,articles:e.getDayArticles(k),tweets:e.getDayTweets(k),instagrams:e.getDayInstagrams(k),contributions:e.getDayContributions(k),"github-color":e.getDayGitHubColor(k)},null,n))}),t("<!--]--></li>")}),t("<!--]--></ul>")}const _sfc_setup$U=_sfc_main$U.setup;_sfc_main$U.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/about/calendar/index.vue"),_sfc_setup$U?_sfc_setup$U(e,t):void 0};const AggregateCalendar=_export_sfc(_sfc_main$U,[["ssrRender",_sfc_ssrRender$U],["__scopeId","data-v-0b5e9a9a"]]),getAdminAvatar=e=>e||getDefaultAvatar(),i18ns={footprint:{[Language.Chinese]:"\u8DEF\u4E3A\u7EB8\uFF0C\u5730\u6210\u518C\uFF0C\u884C\u4F5C\u7B14\uFF0C\u5FC3\u5F53\u58A8\uFF1B\u601D\u65E0\u754C\uFF0C\u884C\u6709\u7586",[Language.English]:"Every path i went astray built up my Rome."},sponsor:{[Language.Chinese]:"\u5411\u6211\u8D5E\u52A9",[Language.English]:"Sponsor"},statement:{[Language.Chinese]:"\u4F17\u800C\u5468\u77E5",[Language.English]:"Statement"},feedback:{[Language.Chinese]:"\u5411\u6211\u53CD\u9988",[Language.English]:"Feedback"},archive:{[Language.Chinese]:"\u7B14\u6587\u5B58\u6863",[Language.English]:"Archive"},lens:{[Language.Chinese]:"\u884C\u884C\u6444\u6444",[Language.English]:"Lens view"},guestbook:{[Language.Chinese]:"\u7ED9\u6211\u7559\u8A00",[Language.English]:"Guestbook"},nft:{[Language.Chinese]:"\u6570\u5B57\u85CF\u54C1",[Language.English]:"NFTs"},rss:{[Language.Chinese]:"\u957F\u671F\u8BA2\u9605",[Language.English]:"Subscribe"},discordGroup:{[Language.Chinese]:"\u56FD\u9645\u8054\u8C0A",[Language.English]:"Discord"},telegramGroup:{[Language.Chinese]:"\u81EA\u7531\u62A5\u793E",[Language.English]:"TG Group"}},useAboutPageMeta=()=>{const{i18n:e,head:t,isZhLang:n}=useEnhancer(),{adminInfo:r}=useStores();return t(()=>{var g;const c=firstUpperCase(e.t(LanguageKey.PAGE_ABOUT,Language.English));return{pageTitle:(n.value?[e.t(LanguageKey.PAGE_ABOUT),c]:[c]).join(" | "),description:`\u5173\u4E8E ${META.author}`,ogType:"profile",ogImage:getAdminAvatar((g=r.data)==null?void 0:g.avatar)}})},SPECIAL_LINKS=Object.freeze([{name:"GitHub",url:"https://github.com"},{name:"Vite",url:"https://vitejs.dev/"},{name:"Disqus",url:"https://disqus.com/"}]),gmmFoldersToGeoJSON=e=>({type:"FeatureCollection",features:e.map(t=>t.placemarks).flat().map(t=>({type:"Feature",geometry:{type:"Point",coordinates:t.coordinates},properties:{...t,icon:t.image?"attraction":"veterinary"}}))}),geoJSONFeatureToLayer=(e,t)=>({id:e,source:t,type:"symbol",layout:{"icon-allow-overlap":!0,"icon-size":1.2,"icon-image":["get","icon"],"text-field":["get","name"],"text-font":["Open Sans Bold","Arial Unicode MS Bold"],"text-size":11,"text-letter-spacing":.05,"text-offset":[0,1],"text-anchor":"top"},paint:{"text-color":"#202","text-halo-color":"#fff","text-halo-width":2}}),newMapboxPopup=(e,t,n)=>new e.Popup({closeButton:!1,offset:[0,-16],maxWidth:"280px"}).setLngLat(t).setHTML(n),mapboxGl$3="",_sfc_main$T=defineComponent({name:"FootprintMapbox",props:{gmGeoJson:Object},emits:["ready"],setup(e,t){const{isDarkTheme:n}=useEnhancer(),r=shallowRef(),c=shallowRef(),d=shallowRef(),g=shallowRef(!1),o=()=>n.value?MAPBOX_CONFIG.STYLE_DARK:MAPBOX_CONFIG.STYLE_LIGHT,v=()=>{var x;if(g.value&&(x=e.gmGeoJson)!=null&&x.features.length){const E=d.value,k="placemarks";E.getLayer(k)||(E.addLayer(geoJSONFeatureToLayer(k,{type:"geojson",data:e.gmGeoJson})),E.on("mouseenter",k,()=>{E.getCanvas().style.cursor="pointer"}),E.on("mouseleave",k,()=>{E.getCanvas().style.cursor=""}),E.on("click",k,S=>{const N=S.features[0].geometry.coordinates.slice(),L=S.features[0].properties.description;for(;Math.abs(S.lngLat.lng-N[0])>180;)N[0]+=S.lngLat.lng>N[0]?360:-360;newMapboxPopup(c.value,N,L).addTo(E)}))}};return watch(()=>n.value,()=>{var x;return(x=d.value)==null?void 0:x.setStyle(o())}),watch(()=>e.gmGeoJson,()=>v()),onMounted(()=>{Promise.all([Promise.resolve().then(()=>mapboxGl$1).then(x=>x.default),new Promise(x=>window.setTimeout(x,600))]).then(([x])=>{x.accessToken=MAPBOX_CONFIG.TOKEN,c.value=x,d.value=new x.Map({container:r.value,center:MAPBOX_CONFIG.CENTER,zoom:MAPBOX_CONFIG.ZOOM,attributionControl:!1,style:o()}),new x.Marker({color:META.primary,anchor:"bottom"}).setLngLat(GEO_INFO.coordinates).addTo(d.value),d.value.on("style.load",()=>{v()}),d.value.on("load",()=>{g.value=!0,v(),t.emit("ready",{map:d.value,lib:c.value})})})}),onBeforeUnmount(()=>{var x;(x=d.value)==null||x.remove()}),{mapboxRef:r}}}),mapbox_vue_vue_type_style_index_0_scoped_b2933bab_lang="";function _sfc_ssrRender$T(e,t,n,r,c,d,g,o){t(`<div${ssrRenderAttrs(mergeProps({class:"mapbox",ref:"mapboxRef"},r))} data-v-b2933bab></div>`)}const _sfc_setup$T=_sfc_main$T.setup;_sfc_main$T.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/about/footprint/mapbox.vue"),_sfc_setup$T?_sfc_setup$T(e,t):void 0};const Mapbox=_export_sfc(_sfc_main$T,[["ssrRender",_sfc_ssrRender$T],["__scopeId","data-v-b2933bab"]]),_sfc_main$S=defineComponent({name:"FootprintModal",components:{Mapbox},props:{name:String,description:String,gmGeoJson:Object,gmFolders:Array},setup(){const{isZhLang:e}=useEnhancer(),t=shallowRef(),n=shallowRef(),r=g=>{t.value=g.lib,n.value=g.map};let c=null;return{GEO_INFO,VALUABLE_LINKS,isZhLang:e,handlePlacemarkClick:g=>{n.value&&(c==null||c.remove(),c=newMapboxPopup(t.value,g.coordinates,g.description).addTo(n.value),n.value.flyTo({center:g.coordinates,zoom:10,speed:1.2,curve:1.2}))},handleMapboxReady:r}}}),modal_vue_vue_type_style_index_0_scoped_bb9201e7_lang="";function _sfc_ssrRender$S(e,t,n,r,c,d,g,o){var E,k;const v=resolveComponent("mapbox"),x=resolveComponent("uimage");t(`<div${ssrRenderAttrs(mergeProps({class:"modal"},r))} data-v-bb9201e7>`),t(ssrRenderComponent(v,{class:"mapbox","gm-geo-json":e.gmGeoJson,onReady:e.handleMapboxReady},null,n)),t(`<div class="panel" data-v-bb9201e7><div class="info" data-v-bb9201e7><h3 class="title" data-v-bb9201e7>${ssrInterpolate((E=e.name)!=null?E:"-")}</h3><p class="description" data-v-bb9201e7>${ssrInterpolate((k=e.description)!=null?k:"-")}</p></div><ul class="folders" data-v-bb9201e7><!--[-->`),ssrRenderList(e.gmFolders,(S,N)=>{t(`<li class="folder" data-v-bb9201e7><div class="title" data-v-bb9201e7><i class="iconfont icon-route" data-v-bb9201e7></i><span class="text" data-v-bb9201e7>${ssrInterpolate(S.name)}</span><span class="count" data-v-bb9201e7>(${ssrInterpolate(S.placemarks.length)})</span></div>`),S.placemarks.length?(t('<ul class="placemarks" data-v-bb9201e7><!--[-->'),ssrRenderList(S.placemarks,(L,P)=>{t('<li class="placemark" data-v-bb9201e7>'),t(ssrRenderComponent(x,{class:"icon",cdn:!0,src:`/images/third-party/mapbox-${L.image?"attraction":"veterinary"}.svg`},null,n)),t(`<span class="text" data-v-bb9201e7>${ssrInterpolate(L.name)}</span></li>`)}),t("<!--]--></ul>")):t('<div class="empty" data-v-bb9201e7>null</div>'),t("</li>")}),t("<!--]--></ul></div></div>")}const _sfc_setup$S=_sfc_main$S.setup;_sfc_main$S.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/about/footprint/modal.vue"),_sfc_setup$S?_sfc_setup$S(e,t):void 0};const FootprintModal=_export_sfc(_sfc_main$S,[["ssrRender",_sfc_ssrRender$S],["__scopeId","data-v-bb9201e7"]]),_sfc_main$R=defineComponent({name:"AboutPageFootprint",components:{Mapbox,FootprintModal},setup(){const{isZhLang:e}=useEnhancer(),t=shallowRef(),n=shallowRef(!1),r=useMyGoogleMapStore(),c=computed(()=>{var k,S;const E=[...(S=(k=r.data)==null?void 0:k.Folder)!=null?S:[]];return E.reverse(),E.map((N,L)=>{var V;const P=(V=N.Placemark)!=null?V:[],O=Array.isArray(P)?P:[P];return{name:N.name,placemarks:O.map((z,U)=>{var oe;const[W,Z]=z.Point.coordinates.split(",").map(Number),re=(oe=z.ExtendedData)==null?void 0:oe.Data;return{index:U,id:`placemark-${L}-${U}`,name:z.name,description:z.description,coordinates:[W,Z],image:(re==null?void 0:re["@name"])==="gx_media_links"?re==null?void 0:re.value:null}})}})}),d=computed(()=>gmmFoldersToGeoJSON(c.value)),g=()=>{n.value=!0},o=E=>{var N;const k=c.value[E],[S]=k.placemarks;S&&((N=t.value)==null||N.flyTo({center:S.coordinates,zoom:4,speed:1.2}))},v=E=>{t.value=E.map},x=()=>{var E;(E=t.value)==null||E.flyTo({center:GEO_INFO.coordinates,zoom:14})};return onMounted(()=>{r.fetch()}),{GEO_INFO,VALUABLE_LINKS,isZhLang:e,i18ns,modalVisible:n,gmStore:r,gmFolders:c,gmGeoJson:d,openModal:g,handleMapboxReady:v,handleFolderClick:o,handleLivingNow:x}}}),index_vue_vue_type_style_index_0_scoped_21a51e26_lang="";function _sfc_ssrRender$R(e,t,n,r,c,d,g,o){const v=resolveComponent("client-only"),x=resolveComponent("popup"),E=resolveComponent("footprint-modal"),k=resolveComponent("mapbox"),S=resolveComponent("ulink");t(`<div${ssrRenderAttrs(mergeProps({class:"footprint-map"},r))} data-v-21a51e26>`),t(ssrRenderComponent(v,null,{default:withCtx((N,L,P,O)=>{if(L)L(ssrRenderComponent(x,{visible:e.modalVisible,"onUpdate:visible":V=>e.modalVisible=V,"scroll-close":!1},{default:withCtx((V,z,U,W)=>{var Z,re,oe,se;if(z)z(ssrRenderComponent(E,{class:"footprint-modal",name:(Z=e.gmStore.data)==null?void 0:Z.name,description:(re=e.gmStore.data)==null?void 0:re.description,"gm-folders":e.gmFolders,"gm-geo-json":e.gmGeoJson},null,U,W));else return[createVNode(E,{class:"footprint-modal",name:(oe=e.gmStore.data)==null?void 0:oe.name,description:(se=e.gmStore.data)==null?void 0:se.description,"gm-folders":e.gmFolders,"gm-geo-json":e.gmGeoJson},null,8,["name","description","gm-folders","gm-geo-json"])]}),_:1},P,O));else return[createVNode(x,{visible:e.modalVisible,"onUpdate:visible":V=>e.modalVisible=V,"scroll-close":!1},{default:withCtx(()=>{var V,z;return[createVNode(E,{class:"footprint-modal",name:(V=e.gmStore.data)==null?void 0:V.name,description:(z=e.gmStore.data)==null?void 0:z.description,"gm-folders":e.gmFolders,"gm-geo-json":e.gmGeoJson},null,8,["name","description","gm-folders","gm-geo-json"])]}),_:1},8,["visible","onUpdate:visible"])]}),_:1},n)),t(`<div class="mapbox-wrapper"${ssrRenderAttr("placeholder",e.isZhLang?e.i18ns.footprint.zh:e.i18ns.footprint.en)} data-v-21a51e26>`),t(ssrRenderComponent(k,{class:"mapbox","gm-geo-json":e.gmGeoJson,onReady:e.handleMapboxReady},null,n)),t('<div class="toolbar" data-v-21a51e26>'),t(ssrRenderComponent(S,{class:"button",href:e.VALUABLE_LINKS.GOOGLE_MY_MAP},{default:withCtx((N,L,P,O)=>{if(L)L(`<i class="iconfont icon-google-maps" data-v-21a51e26${O}></i>`);else return[createVNode("i",{class:"iconfont icon-google-maps"})]}),_:1},n)),t(`<button class="button" data-v-21a51e26><i class="iconfont icon-fullscreen" data-v-21a51e26></i></button></div></div><div class="legends" data-v-21a51e26><div class="now" data-v-21a51e26><i class="iconfont icon-location" data-v-21a51e26></i><span class="text" data-v-21a51e26>${ssrInterpolate(e.isZhLang?e.GEO_INFO.zh_title:e.GEO_INFO.en_title)}</span></div>`),e.gmStore.data?(t('<ul class="folders" data-v-21a51e26><!--[-->'),ssrRenderList(e.gmFolders.slice(0,4),(N,L)=>{t(`<li class="item" data-v-21a51e26><i class="iconfont icon-route" data-v-21a51e26></i><span class="text" data-v-21a51e26>${ssrInterpolate(N.name)}</span><span class="count" data-v-21a51e26>(${ssrInterpolate(N.placemarks.length)})</span></li>`)}),t('<!--]--><li class="item" data-v-21a51e26><i class="iconfont icon-route" data-v-21a51e26></i><span class="text" data-v-21a51e26>\u2022\u2022\u2022</span></li></ul>')):t("<!---->"),t("</div></div>")}const _sfc_setup$R=_sfc_main$R.setup;_sfc_main$R.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/about/footprint/index.vue"),_sfc_setup$R?_sfc_setup$R(e,t):void 0};const FootprintMap=_export_sfc(_sfc_main$R,[["ssrRender",_sfc_ssrRender$R],["__scopeId","data-v-21a51e26"]]),_sfc_main$Q=defineComponent({name:"DesktopAboutPage",components:{FootprintMap,AggregateCalendar,DoubanStatistic,GithubStatistic,NpmStatistic,TwitterStatistic,InstagramMedia},setup(){const{gtag:e,globalState:t,isZhLang:n,isDarkTheme:r}=useEnhancer(),{adminInfo:c,appOption:d}=useStores(),g=L=>{e==null||e.event(L,{event_category:GAEventCategories.About})},o=reactive({wechat:!1}),v=()=>{o.wechat=!0,g("wechat_modal")},x=()=>{t.toggleSwitcher("sponsor",!0),g("sponsor_modal")},E=()=>{t.toggleSwitcher("statement",!0),g("statement_modal")},k=()=>{t.toggleSwitcher("feedback",!0),g("feedback_modal")},S=getTargetStaticURL("/assets/page-about-background.mp4");useAboutPageMeta(),useUniversalFetch(()=>Promise.all([c.fetch(),d.fetch()]));const N=[{class:"lens",icon:"icon-lens",i18n:i18ns.lens,route:getPageRoute(RouteName.Lens)},{class:"nft",icon:"icon-opensea",i18n:i18ns.nft,route:getPageRoute(RouteName.Nft)},{class:"archive",icon:"icon-quill",i18n:i18ns.archive,route:getPageRoute(RouteName.Archive)},{class:"guestbook",icon:"icon-comment",i18n:i18ns.guestbook,route:getPageRoute(RouteName.Guestbook)},{class:"feedback",icon:"icon-mail-plane",i18n:i18ns.feedback,onClick:k},{class:"telegram",icon:"icon-telegram",i18n:i18ns.telegramGroup,href:VALUABLE_LINKS.TELEGRAM_GROUP},{class:"discord",icon:"icon-discord",i18n:i18ns.discordGroup,href:VALUABLE_LINKS.DISCORD_GROUP},{class:"sponsor",icon:"icon-heart",i18n:i18ns.sponsor,onClick:x},{class:"statement",icon:"icon-faq",i18n:i18ns.statement,onClick:E},{class:"rss",icon:"icon-rss",i18n:i18ns.rss,href:VALUABLE_LINKS.RSS}];return{i18ns,links:N,META,VALUABLE_LINKS,SPECIAL_LINKS,isZhLang:n,isDarkTheme:r,modalState:o,backgroundVideo:S,adminInfo:c,appOption:d,getAdminAvatar,handleGTagEvent:g,handleFeedback:k,handleStatement:E,handleOpenWechat:v}}}),desktop_vue_vue_type_style_index_0_scoped_2981f956_lang="";function _sfc_ssrRender$Q(e,t,n,r,c,d,g,o){var oe,se,ce;const v=resolveComponent("uimage"),x=resolveComponent("webfont"),E=resolveComponent("ulink"),k=resolveComponent("client-only"),S=resolveComponent("popup"),N=resolveComponent("i18n"),L=resolveComponent("container"),P=resolveComponent("github-statistic"),O=resolveComponent("npm-statistic"),V=resolveComponent("twitter-statistic"),z=resolveComponent("douban-statistic"),U=resolveComponent("instagram-media"),W=resolveComponent("footprint-map"),Z=resolveComponent("aggregate-calendar"),re=resolveComponent("divider");t(`<div${ssrRenderAttrs(mergeProps({class:"about-page"},r))} data-v-2981f956><div class="page-banner" data-v-2981f956><div class="background" data-v-2981f956><video class="video" loop muted autoplay${includeBooleanAttr(!1)?" controls":""} data-v-2981f956><source${ssrRenderAttr("src",e.backgroundVideo)} type="video/mp4" data-v-2981f956></video></div><div class="content" data-v-2981f956>`),t(ssrRenderComponent(v,{class:"avatar",src:e.getAdminAvatar((oe=e.adminInfo.data)==null?void 0:oe.avatar)},null,n)),t(`<h1 class="name" data-v-2981f956>${ssrInterpolate(((se=e.adminInfo.data)==null?void 0:se.name)||"-")}</h1><p class="slogan" data-v-2981f956>${ssrInterpolate(((ce=e.adminInfo.data)==null?void 0:ce.slogan)||"-")}</p><p class="biography" data-v-2981f956>`),t(ssrRenderComponent(x,{bolder:""},{default:withCtx((me,we,ae,Ce)=>{if(we)we(`${ssrInterpolate(e.isZhLang?e.META.zh_biography:e.META.en_biography)}`);else return[createTextVNode(toDisplayString(e.isZhLang?e.META.zh_biography:e.META.en_biography),1)]}),_:1},n)),t('</p><div class="socials" data-v-2981f956><span class="normal" data-v-2981f956>'),t(ssrRenderComponent(E,{class:"item github",href:e.VALUABLE_LINKS.GITHUB},{default:withCtx((me,we,ae,Ce)=>{if(we)we(`<i class="iconfont icon-github" data-v-2981f956${Ce}></i><span class="text" data-v-2981f956${Ce}>GitHub</span>`);else return[createVNode("i",{class:"iconfont icon-github"}),createVNode("span",{class:"text"},"GitHub")]}),_:1},n)),t(ssrRenderComponent(E,{class:"item twitter",href:e.VALUABLE_LINKS.TWITTER},{default:withCtx((me,we,ae,Ce)=>{if(we)we(`<i class="iconfont icon-twitter" data-v-2981f956${Ce}></i><span class="text" data-v-2981f956${Ce}>Twitter</span>`);else return[createVNode("i",{class:"iconfont icon-twitter"}),createVNode("span",{class:"text"},"Twitter")]}),_:1},n)),t(ssrRenderComponent(E,{class:"item instagram",href:e.VALUABLE_LINKS.INSTAGRAM},{default:withCtx((me,we,ae,Ce)=>{if(we)we(`<i class="iconfont icon-instagram" data-v-2981f956${Ce}></i><span class="text" data-v-2981f956${Ce}>Instagram</span>`);else return[createVNode("i",{class:"iconfont icon-instagram"}),createVNode("span",{class:"text"},"Instagram")]}),_:1},n)),t(ssrRenderComponent(E,{class:"item youtube",href:e.VALUABLE_LINKS.YOUTUBE_CHANNEL},{default:withCtx((me,we,ae,Ce)=>{if(we)we(`<i class="iconfont icon-youtube" data-v-2981f956${Ce}></i><span class="text" data-v-2981f956${Ce}>YouTube</span>`);else return[createVNode("i",{class:"iconfont icon-youtube"}),createVNode("span",{class:"text"},"YouTube")]}),_:1},n)),t('</span><span class="mini" data-v-2981f956>'),t(ssrRenderComponent(E,{class:"item telegram",href:e.VALUABLE_LINKS.TELEGRAM},{default:withCtx((me,we,ae,Ce)=>{if(we)we(`<i class="iconfont icon-telegram" data-v-2981f956${Ce}></i>`);else return[createVNode("i",{class:"iconfont icon-telegram"})]}),_:1},n)),t('<button class="item wechat" data-v-2981f956><i class="iconfont icon-wechat" data-v-2981f956></i>'),t(ssrRenderComponent(k,null,{default:withCtx((me,we,ae,Ce)=>{if(we)we(ssrRenderComponent(S,{visible:e.modalState.wechat,"onUpdate:visible":Fe=>e.modalState.wechat=Fe,"scroll-close":!1},{default:withCtx((Fe,it,_e,ke)=>{if(it)it(`<div class="qrcode-modal wechat" data-v-2981f956${ke}><div class="background" data-v-2981f956${ke}></div>`),it(ssrRenderComponent(v,{class:"image",cdn:"",src:"/images/qrcodes/wechat.jpg"},null,_e,ke)),it(`<span class="text" data-v-2981f956${ke}> \u{1F44B} \xA0 `),it(ssrRenderComponent(N,{en:"Friend me on WeChat",zh:"\u626B\u7801\u52A0\u5FAE\uFF0C\u89E3\u9501\u7075\u9B42"},null,_e,ke)),it("</span></div>");else return[createVNode("div",{class:"qrcode-modal wechat"},[createVNode("div",{class:"background"}),createVNode(v,{class:"image",cdn:"",src:"/images/qrcodes/wechat.jpg"}),createVNode("span",{class:"text"},[createTextVNode(" \u{1F44B} \xA0 "),createVNode(N,{en:"Friend me on WeChat",zh:"\u626B\u7801\u52A0\u5FAE\uFF0C\u89E3\u9501\u7075\u9B42"})])])]}),_:1},ae,Ce));else return[createVNode(S,{visible:e.modalState.wechat,"onUpdate:visible":Fe=>e.modalState.wechat=Fe,"scroll-close":!1},{default:withCtx(()=>[createVNode("div",{class:"qrcode-modal wechat"},[createVNode("div",{class:"background"}),createVNode(v,{class:"image",cdn:"",src:"/images/qrcodes/wechat.jpg"}),createVNode("span",{class:"text"},[createTextVNode(" \u{1F44B} \xA0 "),createVNode(N,{en:"Friend me on WeChat",zh:"\u626B\u7801\u52A0\u5FAE\uFF0C\u89E3\u9501\u7075\u9B42"})])])]),_:1},8,["visible","onUpdate:visible"])]}),_:1},n)),t("</button>"),t(ssrRenderComponent(E,{class:"item linkedin",href:e.VALUABLE_LINKS.LINKEDIN},{default:withCtx((me,we,ae,Ce)=>{if(we)we(`<i class="iconfont icon-linkedin" data-v-2981f956${Ce}></i>`);else return[createVNode("i",{class:"iconfont icon-linkedin"})]}),_:1},n)),t(ssrRenderComponent(E,{class:"item douban",href:e.VALUABLE_LINKS.DOUBAN},{default:withCtx((me,we,ae,Ce)=>{if(we)we(`<i class="iconfont icon-douban" data-v-2981f956${Ce}></i>`);else return[createVNode("i",{class:"iconfont icon-douban"})]}),_:1},n)),t("</span></div></div></div>"),t(ssrRenderComponent(L,{class:"page-content"},{default:withCtx((me,we,ae,Ce)=>{var Fe,it;if(we)we(`<div class="links" data-v-2981f956${Ce}><!--[-->`),ssrRenderList(e.links,(_e,ke)=>{renderVNode(we,createVNode(resolveDynamicComponent(_e.onClick?"button":"ulink"),{class:["item",_e.class],href:_e.href,to:_e.route,onClick:_e.onClick},{default:withCtx((ze,nt,mt,qt)=>{if(nt)nt(`<span class="left" data-v-2981f956${qt}><i class="${ssrRenderClass([_e.icon,"iconfont"])}" data-v-2981f956${qt}></i><span class="text" data-v-2981f956${qt}>`),nt(ssrRenderComponent(N,_e.i18n,null,mt,qt)),nt(`</span></span><span class="right" data-v-2981f956${qt}><i class="iconfont icon-next" data-v-2981f956${qt}></i></span>`);else return[createVNode("span",{class:"left"},[createVNode("i",{class:["iconfont",_e.icon]},null,2),createVNode("span",{class:"text"},[createVNode(N,_e.i18n,null,16)])]),createVNode("span",{class:"right"},[createVNode("i",{class:"iconfont icon-next"})])]}),_:2}),ae,Ce)}),we(`<!--]--></div><div class="statistics" data-v-2981f956${Ce}>`),we(ssrRenderComponent(P,null,null,ae,Ce)),we(ssrRenderComponent(O,null,null,ae,Ce)),we(ssrRenderComponent(V,null,null,ae,Ce)),we(ssrRenderComponent(z,null,null,ae,Ce)),we(`</div><div class="plogs" data-v-2981f956${Ce}>`),we(ssrRenderComponent(U,null,null,ae,Ce)),we(`</div><div class="footprint" data-v-2981f956${Ce}>`),we(ssrRenderComponent(W,null,null,ae,Ce)),we(`</div><div class="calendar" data-v-2981f956${Ce}>`),we(ssrRenderComponent(Z,null,null,ae,Ce)),we(`</div><div class="footer-links" data-v-2981f956${Ce}><div class="friendlinks" data-v-2981f956${Ce}><!--[-->`),ssrRenderList(((Fe=e.appOption.data)==null?void 0:Fe.friend_links)||[],(_e,ke)=>{we("<!--[-->"),we(ke!==0?ssrRenderComponent(re,{type:"vertical",size:"lg"},null,ae,Ce):"<!---->"),we(`<a${ssrRenderAttr("href",_e.value)} class="item" target="_blank" rel="external nofollow noopener" data-v-2981f956${Ce}>${ssrInterpolate(_e.name)}</a><!--]-->`)}),we(`<!--]--></div><div class="speciallinks" data-v-2981f956${Ce}><!--[-->`),ssrRenderList(e.SPECIAL_LINKS,(_e,ke)=>{we("<!--[-->"),we(ke!==0?ssrRenderComponent(re,{type:"vertical",size:"lg"},null,ae,Ce):"<!---->"),we(`<a${ssrRenderAttr("href",_e.url)} class="item" target="_blank" rel="external nofollow noopener" data-v-2981f956${Ce}>${ssrInterpolate(_e.name)}</a><!--]-->`)}),we("<!--]--></div></div>");else return[createVNode("div",{class:"links"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.links,(_e,ke)=>(openBlock(),createBlock(resolveDynamicComponent(_e.onClick?"button":"ulink"),{key:ke,class:["item",_e.class],href:_e.href,to:_e.route,onClick:_e.onClick},{default:withCtx(()=>[createVNode("span",{class:"left"},[createVNode("i",{class:["iconfont",_e.icon]},null,2),createVNode("span",{class:"text"},[createVNode(N,_e.i18n,null,16)])]),createVNode("span",{class:"right"},[createVNode("i",{class:"iconfont icon-next"})])]),_:2},1032,["class","href","to","onClick"]))),128))]),createVNode("div",{class:"statistics"},[createVNode(P),createVNode(O),createVNode(V),createVNode(z)]),createVNode("div",{class:"plogs"},[createVNode(U)]),createVNode("div",{class:"footprint"},[createVNode(W)]),createVNode("div",{class:"calendar"},[createVNode(Z)]),createVNode("div",{class:"footer-links"},[createVNode("div",{class:"friendlinks"},[(openBlock(!0),createBlock(Fragment,null,renderList(((it=e.appOption.data)==null?void 0:it.friend_links)||[],(_e,ke)=>(openBlock(),createBlock(Fragment,{key:ke},[ke!==0?(openBlock(),createBlock(re,{key:0,type:"vertical",size:"lg"})):createCommentVNode("",!0),createVNode("a",{href:_e.value,class:"item",target:"_blank",rel:"external nofollow noopener"},toDisplayString(_e.name),9,["href"])],64))),128))]),createVNode("div",{class:"speciallinks"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.SPECIAL_LINKS,(_e,ke)=>(openBlock(),createBlock(Fragment,{key:ke},[ke!==0?(openBlock(),createBlock(re,{key:0,type:"vertical",size:"lg"})):createCommentVNode("",!0),createVNode("a",{href:_e.url,class:"item",target:"_blank",rel:"external nofollow noopener"},toDisplayString(_e.name),9,["href"])],64))),128))])])]}),_:1},n)),t("</div>")}const _sfc_setup$Q=_sfc_main$Q.setup;_sfc_main$Q.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/about/desktop.vue"),_sfc_setup$Q?_sfc_setup$Q(e,t):void 0};const DesktopAboutPage=_export_sfc(_sfc_main$Q,[["ssrRender",_sfc_ssrRender$Q],["__scopeId","data-v-2981f956"]]),_sfc_main$P=defineComponent({name:"MobileAboutPage",components:{PageBanner},setup(){const{isZhLang:e}=useEnhancer(),t=useAdminInfoStore();return useAboutPageMeta(),useUniversalFetch(()=>t.fetch()),{i18ns,META,VALUABLE_LINKS,LanguageKey,RouteName,isZhLang:e,adminInfo:t,getAdminAvatar,getPageRoute}}}),mobile_vue_vue_type_style_index_0_scoped_b694fd21_lang="";function _sfc_ssrRender$P(e,t,n,r,c,d,g,o){var P,O,V;const v=resolveComponent("page-banner"),x=resolveComponent("i18n"),E=resolveComponent("uimage"),k=resolveComponent("divider"),S=resolveComponent("webfont"),N=resolveComponent("router-link"),L=resolveComponent("ulink");t(`<div${ssrRenderAttrs(mergeProps({class:"about-page"},r))} data-v-b694fd21>`),t(ssrRenderComponent(v,{position:70,"is-mobile":!0,image:"/images/page-about/banner-mobile.jpg"},{title:withCtx((z,U,W,Z)=>{if(U)U(ssrRenderComponent(x,{k:e.LanguageKey.PAGE_ABOUT},null,W,Z));else return[createVNode(x,{k:e.LanguageKey.PAGE_ABOUT},null,8,["k"])]}),_:1},n)),t('<div class="profile" data-v-b694fd21><div class="avatar" data-v-b694fd21>'),t(ssrRenderComponent(E,{class:"image",src:e.getAdminAvatar((P=e.adminInfo.data)==null?void 0:P.avatar)},null,n)),t(`</div><h2 class="name" data-v-b694fd21>${ssrInterpolate(((O=e.adminInfo.data)==null?void 0:O.name)||"-")}</h2><h5 class="slogan" data-v-b694fd21>${ssrInterpolate(((V=e.adminInfo.data)==null?void 0:V.slogan)||"-")}</h5>`),t(ssrRenderComponent(k,{dashed:""},null,n)),t('<h4 class="bio" data-v-b694fd21>'),t(ssrRenderComponent(S,{bolder:""},{default:withCtx((z,U,W,Z)=>{if(U)U(`${ssrInterpolate(e.isZhLang?e.META.zh_biography:e.META.en_biography)}`);else return[createTextVNode(toDisplayString(e.isZhLang?e.META.zh_biography:e.META.en_biography),1)]}),_:1},n)),t('</h4></div><div class="links" data-v-b694fd21><div class="list col-2" data-v-b694fd21>'),t(ssrRenderComponent(N,{class:"item text-only",to:e.getPageRoute(e.RouteName.Archive)},{default:withCtx((z,U,W,Z)=>{if(U)U(`<i class="iconfont icon-quill" data-v-b694fd21${Z}></i>`),U(ssrRenderComponent(x,e.i18ns.archive,null,W,Z));else return[createVNode("i",{class:"iconfont icon-quill"}),createVNode(x,e.i18ns.archive,null,16)]}),_:1},n)),t(ssrRenderComponent(N,{class:"item text-only",to:e.getPageRoute(e.RouteName.Lens)},{default:withCtx((z,U,W,Z)=>{if(U)U(`<i class="iconfont icon-lens" data-v-b694fd21${Z}></i>`),U(ssrRenderComponent(x,e.i18ns.lens,null,W,Z));else return[createVNode("i",{class:"iconfont icon-lens"}),createVNode(x,e.i18ns.lens,null,16)]}),_:1},n)),t(ssrRenderComponent(N,{class:"item text-only",to:e.getPageRoute(e.RouteName.Nft)},{default:withCtx((z,U,W,Z)=>{if(U)U(`<i class="iconfont icon-opensea" data-v-b694fd21${Z}></i>`),U(ssrRenderComponent(x,e.i18ns.nft,null,W,Z));else return[createVNode("i",{class:"iconfont icon-opensea"}),createVNode(x,e.i18ns.nft,null,16)]}),_:1},n)),t(ssrRenderComponent(N,{class:"item text-only",to:e.getPageRoute(e.RouteName.Guestbook)},{default:withCtx((z,U,W,Z)=>{if(U)U(`<i class="iconfont icon-comment" data-v-b694fd21${Z}></i>`),U(ssrRenderComponent(x,e.i18ns.guestbook,null,W,Z));else return[createVNode("i",{class:"iconfont icon-comment"}),createVNode(x,e.i18ns.guestbook,null,16)]}),_:1},n)),t("</div>"),t(ssrRenderComponent(k,{dashed:""},null,n)),t('<div class="list col-2" data-v-b694fd21>'),t(ssrRenderComponent(L,{class:"item discord",href:e.VALUABLE_LINKS.DISCORD_GROUP},{default:withCtx((z,U,W,Z)=>{if(U)U(`<i class="iconfont icon-discord" data-v-b694fd21${Z}></i>`),U(ssrRenderComponent(x,e.i18ns.discordGroup,null,W,Z));else return[createVNode("i",{class:"iconfont icon-discord"}),createVNode(x,e.i18ns.discordGroup,null,16)]}),_:1},n)),t(ssrRenderComponent(L,{class:"item telegram",href:e.VALUABLE_LINKS.TELEGRAM_GROUP},{default:withCtx((z,U,W,Z)=>{if(U)U(`<i class="iconfont icon-telegram" data-v-b694fd21${Z}></i>`),U(ssrRenderComponent(x,e.i18ns.telegramGroup,null,W,Z));else return[createVNode("i",{class:"iconfont icon-telegram"}),createVNode(x,e.i18ns.telegramGroup,null,16)]}),_:1},n)),t('</div></div><div class="links" data-v-b694fd21><div class="list col-3" data-v-b694fd21>'),t(ssrRenderComponent(L,{class:"item center github",href:e.VALUABLE_LINKS.GITHUB},{default:withCtx((z,U,W,Z)=>{if(U)U(`<i class="iconfont icon-github" data-v-b694fd21${Z}></i><span class="text" data-v-b694fd21${Z}>GitHub</span>`);else return[createVNode("i",{class:"iconfont icon-github"}),createVNode("span",{class:"text"},"GitHub")]}),_:1},n)),t(ssrRenderComponent(L,{class:"item center twitter",href:e.VALUABLE_LINKS.TWITTER},{default:withCtx((z,U,W,Z)=>{if(U)U(`<i class="iconfont icon-twitter" data-v-b694fd21${Z}></i><span class="text" data-v-b694fd21${Z}>Twitter</span>`);else return[createVNode("i",{class:"iconfont icon-twitter"}),createVNode("span",{class:"text"},"Twitter")]}),_:1},n)),t(ssrRenderComponent(L,{class:"item center instagram",href:e.VALUABLE_LINKS.INSTAGRAM},{default:withCtx((z,U,W,Z)=>{if(U)U(`<i class="iconfont icon-instagram" data-v-b694fd21${Z}></i><span class="text" data-v-b694fd21${Z}>Instagram</span>`);else return[createVNode("i",{class:"iconfont icon-instagram"}),createVNode("span",{class:"text"},"Instagram")]}),_:1},n)),t("</div>"),t(ssrRenderComponent(k,{dashed:""},null,n)),t('<div class="list col-4" data-v-b694fd21>'),t(ssrRenderComponent(L,{class:"item telegram icon-only",href:e.VALUABLE_LINKS.TELEGRAM},{default:withCtx((z,U,W,Z)=>{if(U)U(`<i class="iconfont icon-telegram" data-v-b694fd21${Z}></i>`);else return[createVNode("i",{class:"iconfont icon-telegram"})]}),_:1},n)),t(ssrRenderComponent(L,{class:"item linkedin icon-only",href:e.VALUABLE_LINKS.LINKEDIN},{default:withCtx((z,U,W,Z)=>{if(U)U(`<i class="iconfont icon-linkedin" data-v-b694fd21${Z}></i>`);else return[createVNode("i",{class:"iconfont icon-linkedin"})]}),_:1},n)),t(ssrRenderComponent(L,{class:"item youtube icon-only",href:e.VALUABLE_LINKS.YOUTUBE_CHANNEL},{default:withCtx((z,U,W,Z)=>{if(U)U(`<i class="iconfont icon-youtube" data-v-b694fd21${Z}></i>`);else return[createVNode("i",{class:"iconfont icon-youtube"})]}),_:1},n)),t(ssrRenderComponent(L,{class:"item douban icon-only",href:e.VALUABLE_LINKS.DOUBAN_MOVIE},{default:withCtx((z,U,W,Z)=>{if(U)U(`<i class="iconfont icon-douban" data-v-b694fd21${Z}></i>`);else return[createVNode("i",{class:"iconfont icon-douban"})]}),_:1},n)),t('</div></div><div class="qrcodes" data-v-b694fd21><div class="item" data-v-b694fd21>'),t(ssrRenderComponent(E,{cdn:"",class:"image",src:"/images/qrcodes/wechat.jpg"},null,n)),t('</div><div class="item" data-v-b694fd21>'),t(ssrRenderComponent(E,{cdn:"",class:"image",src:"/images/qrcodes/wechat-channel.png"},null,n)),t("</div></div></div>")}const _sfc_setup$P=_sfc_main$P.setup;_sfc_main$P.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/about/mobile.vue"),_sfc_setup$P?_sfc_setup$P(e,t):void 0};const MobileAboutPage=_export_sfc(_sfc_main$P,[["ssrRender",_sfc_ssrRender$P],["__scopeId","data-v-b694fd21"]]),_sfc_main$O=defineComponent({name:"GuestbookPage",components:{PageBanner,Comment},props:{isMobile:{type:Boolean,default:!1}},setup(){const e=CommentPostID.Guestbook,{i18n:t,head:n,gtag:r,globalState:c,isDarkTheme:d,isZhLang:g}=useEnhancer(),{appOption:o,comment:v,identity:x}=useStores(),E=ref(isClient),k=computed(()=>x.isLikedPage(e)),S=computed(()=>{var O;return((O=o.data)==null?void 0:O.meta.likes)||0}),N="/images/page-guestbook/banner.jpg",L=async()=>{if(k.value)return!1;r==null||r.event("like_site",{event_category:GAEventCategories.Universal});try{await o.postSiteLike(),x.likePage(e)}catch(O){const V=t.t(LanguageKey.POST_ACTION_ERROR);console.warn(V,O),alert(V)}},P=()=>Promise.all([o.fetch(!0),v.fetchList({post_id:e})]).then(()=>{E.value=!1});return n(()=>{const O=firstUpperCase(t.t(LanguageKey.PAGE_GUESTBOOK,Language.English));return{pageTitle:(g.value?[t.t(LanguageKey.PAGE_GUESTBOOK),O]:[O]).join(" | "),description:`\u7ED9 ${META.author} \u7559\u8A00`,ogType:"bbs",ogImage:getTargetCDNURL(N)}}),useUniversalFetch(()=>P()),{LanguageKey,bannerImage:N,mockCommentLoading:E,isDarkTheme:d,isLiked:k,siteLikes:S,handleLike:L}}}),guestbook_vue_vue_type_style_index_0_scoped_5f357a33_lang="";function _sfc_ssrRender$O(e,t,n,r,c,d,g,o){const v=resolveComponent("responsive"),x=resolveComponent("uimage"),E=resolveComponent("webfont"),k=resolveComponent("i18n"),S=resolveComponent("page-banner"),N=resolveComponent("comment");t(`<div${ssrRenderAttrs(mergeProps({class:"guestbook-page"},r))} data-v-5f357a33>`),t(ssrRenderComponent(v,null,{desktop:withCtx((L,P,O,V)=>{if(P)P(`<div class="desktop-banner" data-v-5f357a33${V}>`),P(ssrRenderComponent(x,{cdn:"",class:"image",src:e.bannerImage},null,O,V)),P(`<button class="${ssrRenderClass([{liked:e.isLiked},"like"])}"${includeBooleanAttr(e.isLiked)?" disabled":""} data-v-5f357a33${V}><i class="icon iconfont icon-heart" data-v-5f357a33${V}></i><span class="count" data-v-5f357a33${V}>${ssrInterpolate(e.isLiked?`${e.siteLikes-1} + 1`:e.siteLikes)}</span></button><span class="slogan" data-v-5f357a33${V}>`),P(ssrRenderComponent(E,{class:["text",{dark:e.isDarkTheme}]},{default:withCtx((z,U,W,Z)=>{if(U)U(ssrRenderComponent(k,{k:e.LanguageKey.GUESTBOOK_SLOGAN},null,W,Z));else return[createVNode(k,{k:e.LanguageKey.GUESTBOOK_SLOGAN},null,8,["k"])]}),_:1},O,V)),P("</span></div>");else return[createVNode("div",{class:"desktop-banner"},[createVNode(x,{cdn:"",class:"image",src:e.bannerImage},null,8,["src"]),createVNode("button",{class:["like",{liked:e.isLiked}],disabled:e.isLiked,onClick:e.handleLike},[createVNode("i",{class:"icon iconfont icon-heart"}),createVNode("span",{class:"count"},toDisplayString(e.isLiked?`${e.siteLikes-1} + 1`:e.siteLikes),1)],10,["disabled","onClick"]),createVNode("span",{class:"slogan"},[createVNode(E,{class:["text",{dark:e.isDarkTheme}]},{default:withCtx(()=>[createVNode(k,{k:e.LanguageKey.GUESTBOOK_SLOGAN},null,8,["k"])]),_:1},8,["class"])])])]}),mobile:withCtx((L,P,O,V)=>{if(P)P(ssrRenderComponent(S,{class:"mobile-banner","is-mobile":!0,position:70,image:e.bannerImage},{title:withCtx((z,U,W,Z)=>{if(U)U(ssrRenderComponent(k,{k:e.LanguageKey.PAGE_GUESTBOOK},null,W,Z));else return[createVNode(k,{k:e.LanguageKey.PAGE_GUESTBOOK},null,8,["k"])]}),description:withCtx((z,U,W,Z)=>{if(U)U(ssrRenderComponent(k,{k:e.LanguageKey.GUESTBOOK_SLOGAN},null,W,Z));else return[createVNode(k,{k:e.LanguageKey.GUESTBOOK_SLOGAN},null,8,["k"])]}),_:1},O,V));else return[createVNode(S,{class:"mobile-banner","is-mobile":!0,position:70,image:e.bannerImage},{title:withCtx(()=>[createVNode(k,{k:e.LanguageKey.PAGE_GUESTBOOK},null,8,["k"])]),description:withCtx(()=>[createVNode(k,{k:e.LanguageKey.GUESTBOOK_SLOGAN},null,8,["k"])]),_:1},8,["image"])]}),_:1},n)),t('<div class="comment" data-v-5f357a33>'),t(ssrRenderComponent(N,{"post-id":0,plain:e.isMobile,fetching:e.mockCommentLoading},null,n)),t("</div></div>")}const _sfc_setup$O=_sfc_main$O.setup;_sfc_main$O.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/guestbook.vue"),_sfc_setup$O?_sfc_setup$O(e,t):void 0};const GuestbookPage=_export_sfc(_sfc_main$O,[["ssrRender",_sfc_ssrRender$O],["__scopeId","data-v-5f357a33"]]),_sfc_main$N=defineComponent({name:"AppPage",props:{isMobile:{type:Boolean,default:!1}},setup(){const{i18n:e,head:t,gtag:n,isZhLang:r}=useEnhancer();return t(()=>{const d=firstUpperCase(e.t(LanguageKey.PAGE_APP,Language.English));return{pageTitle:(r.value?[e.t(LanguageKey.PAGE_APP),d]:[d]).join(" | "),description:`${META.title} App \u4E0B\u8F7D`,ogImage:getTargetCDNURL("/images/page-app/logo.png")}}),{META,VALUABLE_LINKS,LanguageKey,handleAppEvent:d=>{n==null||n.event(d,{event_category:GAEventCategories.App})}}}}),app_vue_vue_type_style_index_0_scoped_5ce88d46_lang="";function _sfc_ssrRender$N(e,t,n,r,c,d,g,o){const v=resolveComponent("uimage"),x=resolveComponent("webfont"),E=resolveComponent("i18n"),k=resolveComponent("ulink");t(`<div${ssrRenderAttrs(mergeProps({class:["app-page",{mobile:e.isMobile}]},r))} data-v-5ce88d46><div class="app" data-v-5ce88d46><div class="logo" data-v-5ce88d46>`),t(ssrRenderComponent(v,{cdn:"",alt:"app-logo",src:"/images/page-app/logo.png"},null,n)),t(`</div><h2 class="title" data-v-5ce88d46>${ssrInterpolate(e.META.title)}</h2><p class="description" data-v-5ce88d46>`),t(ssrRenderComponent(x,null,{default:withCtx((S,N,L,P)=>{if(N)N(ssrRenderComponent(E,{k:e.LanguageKey.APP_SLOGAN},null,L,P));else return[createVNode(E,{k:e.LanguageKey.APP_SLOGAN},null,8,["k"])]}),_:1},n)),t('</p><div class="screen" data-v-5ce88d46>'),t(ssrRenderComponent(v,{cdn:"",alt:"app-hot",class:"screen-img",src:"/images/page-app/hot.png"},null,n)),t('<div class="download" data-v-5ce88d46>'),t(ssrRenderComponent(v,{cdn:"",class:"qrcode",alt:"qrcode",src:"/images/page-app/qrcode.png"},null,n)),t(ssrRenderComponent(k,{class:"button",href:e.VALUABLE_LINKS.APP_APK_FILE,onMousedown:S=>e.handleAppEvent("download_android_app")},{default:withCtx((S,N,L,P)=>{if(N)N(`<i class="icon iconfont icon-android" data-v-5ce88d46${P}></i><span class="text" data-v-5ce88d46${P}>Android</span><i class="new-window iconfont icon-new-window-s" data-v-5ce88d46${P}></i>`);else return[createVNode("i",{class:"icon iconfont icon-android"}),createVNode("span",{class:"text"},"Android"),createVNode("i",{class:"new-window iconfont icon-new-window-s"})]}),_:1},n)),t(ssrRenderComponent(k,{class:"button",href:e.VALUABLE_LINKS.GITHUB_SURMON_ME_NATIVE+"#ios",onMousedown:S=>e.handleAppEvent("download_ios_app")},{default:withCtx((S,N,L,P)=>{if(N)N(`<i class="icon iconfont icon-apple" data-v-5ce88d46${P}></i><span class="text" data-v-5ce88d46${P}>iOS</span><i class="new-window iconfont icon-new-window-s" data-v-5ce88d46${P}></i>`);else return[createVNode("i",{class:"icon iconfont icon-apple"}),createVNode("span",{class:"text"},"iOS"),createVNode("i",{class:"new-window iconfont icon-new-window-s"})]}),_:1},n)),t(ssrRenderComponent(k,{class:"source-code",href:e.VALUABLE_LINKS.GITHUB_SURMON_ME_NATIVE,onMousedown:S=>e.handleAppEvent("app_source_code")},{default:withCtx((S,N,L,P)=>{if(N)N(`<i class="iconfont icon-git" data-v-5ce88d46${P}></i> Source Code `);else return[createVNode("i",{class:"iconfont icon-git"}),createTextVNode(" Source Code ")]}),_:1},n)),t('</div></div><p class="rss" data-v-5ce88d46><span class="prefix" data-v-5ce88d46>'),t(ssrRenderComponent(E,{zh:"\uFF08",en:"["},null,n)),t('</span><span class="deprecated" data-v-5ce88d46>'),t(ssrRenderComponent(E,{zh:"\u6B64\u9879\u76EE\u5DF2\u5E9F\u5F03\uFF01",en:"DEPRECATED!"},null,n)),t("</span>"),t(ssrRenderComponent(E,{zh:"\u5EFA\u8BAE\u4F7F\u7528",en:"Recommend"},null,n)),t(`<a class="link"${ssrRenderAttr("href",e.VALUABLE_LINKS.RSS)} target="_blank" data-v-5ce88d46>`),t(ssrRenderComponent(E,{zh:"RSS \u8BA2\u9605",en:"RSS subscription"},null,n)),t('</a><span class="suffix" data-v-5ce88d46>'),t(ssrRenderComponent(E,{zh:"\uFF09",en:"]"},null,n)),t("</span></p></div></div>")}const _sfc_setup$N=_sfc_main$N.setup;_sfc_main$N.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/app.vue"),_sfc_setup$N?_sfc_setup$N(e,t):void 0};const AppPage=_export_sfc(_sfc_main$N,[["ssrRender",_sfc_ssrRender$N],["__scopeId","data-v-5ce88d46"]]);var ProviderId=(e=>(e.GitHub="github",e.PayPal="paypal",e.Alipay="alipay",e.WeChatPay="wechat-pay",e.BitCoin="bitcoin",e.Ethereum="ethereum",e))(ProviderId||{});const providerIds=Object.values(ProviderId),providers=[{id:"github",title:"GitHub Sponsors",logo:"/images/third-party/github-sponsors-logo.svg"},{id:"paypal",title:"PayPal me",link:VALUABLE_LINKS.PAYPAL,logo:"/images/third-party/paypal-logo.svg",qrcode:"/images/third-party/paypal-qrcode.png"},{id:"alipay",title:"\u652F\u4ED8\u5B9D",text:"\u901A\u8FC7\u652F\u4ED8\u5B9D\u5BA2\u6237\u7AEF\u626B\u7801",logo:"/images/third-party/alipay-logo.svg",qrcode:"/images/third-party/alipay-qrcode.png"},{id:"wechat-pay",title:"\u5FAE\u4FE1\u8D5E\u8D4F",text:"\u901A\u8FC7\u5FAE\u4FE1\u5BA2\u6237\u7AEF\u626B\u7801",logo:"/images/third-party/wechat-pay-logo.svg",qrcode:"/images/third-party/wechat-pay-qrcode.jpg"},{id:"bitcoin",title:"BTC",address:IDENTITIES.BTC_ADDRESS,logo:"/images/third-party/btc-logo.svg",qrcode:"/images/third-party/btc-qrcode.png"},{id:"ethereum",title:"ETH",address:IDENTITIES.ETH_ADDRESS,logo:"/images/third-party/eth-logo.svg",qrcode:"/images/third-party/eth-qrcode.png"}],useSponsorState=e=>{const{gtag:t}=useEnhancer(),n=ref(e&&providerIds.includes(e)?e:providers[0].id),r=computed(()=>providers.find(E=>E.id===n.value)),c=ref(!1),d=ref(null),g=computed(()=>{var E;return((E=d.value)==null?void 0:E.sponsors.edges.map(k=>k.node))||[]}),o=computed(()=>{var N;const E=((N=d.value)==null?void 0:N.sponsorsActivities.nodes)||[],k=g.value.map(L=>L.login);return E.filter(L=>Boolean(L)&&!k.includes(L.sponsor.login)&&L.sponsor.login!=="ghost"&&(L.action==="CANCELLED_SPONSORSHIP"||L.sponsorsTier.isOneTime)).map(L=>L.sponsor)}),v=()=>{d.value||c.value||(c.value=!0,tunnel$1.dispatch(TunnelModule.GitHubSponsors).then(E=>{d.value=E}).finally(()=>{c.value=!1}))},x=E=>{!providerIds.includes(E)||(n.value=E,E==="github"&&v(),t==null||t.event("sponsor_modal_switch",{event_category:GAEventCategories.Widget}))};return n.value==="github"&&v(),{activeId:n,activeProvider:r,setProviderId:x,githubSponsorsResponse:d,currentGitHubSponsors:g,pastGitHubSponsors:o,githubSponsorsLoading:c}},_sfc_main$M=defineComponent({name:"SponsorTabs",props:{state:{type:Object,required:!0},hideTitle:{type:Boolean,default:!1}},setup(e){return{providers,activeId:e.state.activeId,handleSwitch:e.state.setProviderId}}}),tabs_vue_vue_type_style_index_0_scoped_b6ca9e76_lang="";function _sfc_ssrRender$M(e,t,n,r,c,d,g,o){const v=resolveComponent("uimage");t(`<div${ssrRenderAttrs(mergeProps({class:["sponsor-tabs",e.activeId]},r))} data-v-b6ca9e76><!--[-->`),ssrRenderList(e.providers,(x,E)=>{t(`<button class="${ssrRenderClass([[x.id,{active:e.activeId===x.id}],"item"])}"${ssrRenderAttr("title",x.title)} data-v-b6ca9e76><span class="logo" data-v-b6ca9e76>`),t(ssrRenderComponent(v,{class:"image",alt:x.title,src:x.logo,cdn:""},null,n)),t("</span>"),e.hideTitle?t("<!---->"):t(`<span class="title" data-v-b6ca9e76>${ssrInterpolate(x.title)}</span>`),t("</button>")}),t("<!--]--></div>")}const _sfc_setup$M=_sfc_main$M.setup;_sfc_main$M.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/sponsor/tabs.vue"),_sfc_setup$M?_sfc_setup$M(e,t):void 0};const SponsorTabs=_export_sfc(_sfc_main$M,[["ssrRender",_sfc_ssrRender$M],["__scopeId","data-v-b6ca9e76"]]),_sfc_main$L=defineComponent({name:"SponsorProvider",props:{state:{type:Object,required:!0},maxSponsors:{type:Number,default:19}},setup(e){const{isZhLang:t}=useEnhancer(),n=computed(()=>e.state.activeProvider.value),r=computed(()=>e.state.currentGitHubSponsors.value),c=computed(()=>e.state.pastGitHubSponsors.value),d=computed(()=>[...r.value.map(o=>({active:!0,sponsor:o})),...c.value.map(o=>({active:!1,sponsor:o}))]);return{VALUABLE_LINKS,ProviderId,providers,activeProvider:n,currentGitHubSponsors:r,pastGitHubSponsors:c,allGitHubSponsors:d,handleCopyAddress:o=>{copy(o).then(()=>{alert(t.value?"\u5730\u5740\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F\uFF01":"Address copied!")})}}}}),provider_vue_vue_type_style_index_0_scoped_d1f6b1ad_lang="";function _sfc_ssrRender$L(e,t,n,r,c,d,g,o){const v=resolveComponent("ulink"),x=resolveComponent("uimage"),E=resolveComponent("i18n"),k=resolveComponent("client-only");t(`<div${ssrRenderAttrs(mergeProps({class:["sponsor-provider",e.activeProvider.id]},r))} data-v-d1f6b1ad>`),e.activeProvider.link||e.activeProvider.address||e.activeProvider.text?(t('<p class="external" data-v-d1f6b1ad>'),e.activeProvider.link?(t("<!--[-->"),t(ssrRenderComponent(v,{class:"link",href:e.activeProvider.link},{default:withCtx((S,N,L,P)=>{if(N)N(`<code data-v-d1f6b1ad${P}>${ssrInterpolate(e.activeProvider.link)}</code>`);else return[createVNode("code",null,toDisplayString(e.activeProvider.link),1)]}),_:1},n)),t('<i class="iconfont icon-new-window-s" data-v-d1f6b1ad></i><!--]-->')):t("<!---->"),e.activeProvider.address?t(`<!--[--><code class="link" data-v-d1f6b1ad>${ssrInterpolate(e.activeProvider.address)}</code><i class="iconfont icon-copy" data-v-d1f6b1ad></i><!--]-->`):t("<!---->"),e.activeProvider.text?t(`<!--[-->${ssrInterpolate(e.activeProvider.text)} <i class="iconfont icon-qrcode" data-v-d1f6b1ad></i><!--]-->`):t("<!---->"),t("</p>")):t("<!---->"),e.activeProvider.qrcode?t(ssrRenderComponent(x,{class:"qrcode",src:e.activeProvider.qrcode,cdn:""},null,n)):t("<!---->"),e.activeProvider.id==e.ProviderId.GitHub?(t('<div class="github-sponsors" data-v-d1f6b1ad>'),t(ssrRenderComponent(v,{class:"link",href:e.VALUABLE_LINKS.GITHUB_SPONSORS},{default:withCtx((S,N,L,P)=>{if(N)N(`<i class="iconfont icon-heart" data-v-d1f6b1ad${P}></i><span class="text" data-v-d1f6b1ad${P}>`),N(ssrRenderComponent(E,{en:"Sponsor me on GitHub",zh:"\u901A\u8FC7 GitHub Sponsor \u8D5E\u52A9\u6211"},null,L,P)),N("</span>");else return[createVNode("i",{class:"iconfont icon-heart"}),createVNode("span",{class:"text"},[createVNode(E,{en:"Sponsor me on GitHub",zh:"\u901A\u8FC7 GitHub Sponsor \u8D5E\u52A9\u6211"})])]}),_:1},n)),t(ssrRenderComponent(k,null,{default:withCtx((S,N,L,P)=>{if(N)N(""),e.allGitHubSponsors.length?(N(`<div class="sponsor-box" data-v-d1f6b1ad${P}><p class="total" data-v-d1f6b1ad${P}>`),N(ssrRenderComponent(E,null,{zh:withCtx((O,V,z,U)=>{if(V)V(` \u6211\u5728 GitHub Sponsors \u7D2F\u8BA1\u5DF2\u5F97\u5230 ${ssrInterpolate(e.pastGitHubSponsors.length)} <span class="current-total" data-v-d1f6b1ad${U}> + ${ssrInterpolate(e.currentGitHubSponsors.length)}</span> \u4F4D\u8D5E\u52A9\u8005\u7684\u652F\u6301 `);else return[createTextVNode(" \u6211\u5728 GitHub Sponsors \u7D2F\u8BA1\u5DF2\u5F97\u5230 "+toDisplayString(e.pastGitHubSponsors.length)+" ",1),createVNode("span",{class:"current-total"}," + "+toDisplayString(e.currentGitHubSponsors.length),1),createTextVNode(" \u4F4D\u8D5E\u52A9\u8005\u7684\u652F\u6301 ")]}),en:withCtx((O,V,z,U)=>{if(V)V(` I have accumulated ${ssrInterpolate(e.pastGitHubSponsors.length)} <span class="current-total" data-v-d1f6b1ad${U}> + ${ssrInterpolate(e.currentGitHubSponsors.length)}</span> backers on GitHub Sponsors `);else return[createTextVNode(" I have accumulated "+toDisplayString(e.pastGitHubSponsors.length)+" ",1),createVNode("span",{class:"current-total"}," + "+toDisplayString(e.currentGitHubSponsors.length),1),createTextVNode(" backers on GitHub Sponsors ")]}),_:1},L,P)),N(`</p><div class="sponsors" data-v-d1f6b1ad${P}><!--[-->`),ssrRenderList(e.allGitHubSponsors.slice(0,e.maxSponsors),(O,V)=>{N(ssrRenderComponent(v,{href:O.sponsor.url,title:O.sponsor.name,class:["item",O.active?"active":"inactive"],key:V},{default:withCtx((z,U,W,Z)=>{if(U)U(ssrRenderComponent(x,{class:"avatar",src:O.sponsor.avatarUrl,alt:"@"+O.sponsor.login},null,W,Z));else return[createVNode(x,{class:"avatar",src:O.sponsor.avatarUrl,alt:"@"+O.sponsor.login},null,8,["src","alt"])]}),_:2},L,P))}),N("<!--]-->"),e.allGitHubSponsors.length>e.maxSponsors?N(ssrRenderComponent(v,{class:"more-link",href:e.VALUABLE_LINKS.GITHUB_SPONSORS},{default:withCtx((O,V,z,U)=>{if(V)V(`+ ${ssrInterpolate(e.allGitHubSponsors.length-e.maxSponsors)}`);else return[createTextVNode("+ "+toDisplayString(e.allGitHubSponsors.length-e.maxSponsors),1)]}),_:1},L,P)):N("<!---->"),N("</div></div>")):N("<!---->");else return[createVNode(Transition,{name:"module"},{default:withCtx(()=>[e.allGitHubSponsors.length?(openBlock(),createBlock("div",{key:0,class:"sponsor-box"},[createVNode("p",{class:"total"},[createVNode(E,null,{zh:withCtx(()=>[createTextVNode(" \u6211\u5728 GitHub Sponsors \u7D2F\u8BA1\u5DF2\u5F97\u5230 "+toDisplayString(e.pastGitHubSponsors.length)+" ",1),createVNode("span",{class:"current-total"}," + "+toDisplayString(e.currentGitHubSponsors.length),1),createTextVNode(" \u4F4D\u8D5E\u52A9\u8005\u7684\u652F\u6301 ")]),en:withCtx(()=>[createTextVNode(" I have accumulated "+toDisplayString(e.pastGitHubSponsors.length)+" ",1),createVNode("span",{class:"current-total"}," + "+toDisplayString(e.currentGitHubSponsors.length),1),createTextVNode(" backers on GitHub Sponsors ")]),_:1})]),createVNode("div",{class:"sponsors"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.allGitHubSponsors.slice(0,e.maxSponsors),(O,V)=>(openBlock(),createBlock(v,{href:O.sponsor.url,title:O.sponsor.name,class:["item",O.active?"active":"inactive"],key:V},{default:withCtx(()=>[createVNode(x,{class:"avatar",src:O.sponsor.avatarUrl,alt:"@"+O.sponsor.login},null,8,["src","alt"])]),_:2},1032,["href","title","class"]))),128)),e.allGitHubSponsors.length>e.maxSponsors?(openBlock(),createBlock(v,{key:0,class:"more-link",href:e.VALUABLE_LINKS.GITHUB_SPONSORS},{default:withCtx(()=>[createTextVNode("+ "+toDisplayString(e.allGitHubSponsors.length-e.maxSponsors),1)]),_:1},8,["href"])):createCommentVNode("",!0)])])):createCommentVNode("",!0)]),_:1})]}),_:1},n)),t("</div>")):t("<!---->"),t("</div>")}const _sfc_setup$L=_sfc_main$L.setup;_sfc_main$L.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/sponsor/provider.vue"),_sfc_setup$L?_sfc_setup$L(e,t):void 0};const SponsorProvider=_export_sfc(_sfc_main$L,[["ssrRender",_sfc_ssrRender$L],["__scopeId","data-v-d1f6b1ad"]]),_sfc_main$K=defineComponent({name:"SponsorPage",components:{SponsorTabs,SponsorProvider,PageBanner},setup(){const{route:e,i18n:t,head:n,isZhLang:r}=useEnhancer(),c=useSponsorState();return n(()=>{const d=firstUpperCase(t.t(LanguageKey.PAGE_SPONSOR,Language.English));return{pageTitle:(r.value?[t.t(LanguageKey.PAGE_SPONSOR),d]:[d]).join(" | ")}}),onMounted(()=>{const d=e.hash.replace("#","");d&&c.setProviderId(d)}),{LanguageKey,sponsorState:c}}}),sponsor_vue_vue_type_style_index_0_scoped_e9bd1214_lang="";function _sfc_ssrRender$K(e,t,n,r,c,d,g,o){const v=resolveComponent("page-banner"),x=resolveComponent("webfont"),E=resolveComponent("i18n"),k=resolveComponent("container"),S=resolveComponent("sponsor-tabs"),N=resolveComponent("sponsor-provider");t(`<div${ssrRenderAttrs(mergeProps({class:"sponsor-page"},r))} data-v-e9bd1214>`),t(ssrRenderComponent(v,{image:"/images/page-sponsor/banner.webp"},{title:withCtx((L,P,O,V)=>{if(P)P(ssrRenderComponent(x,null,{default:withCtx((z,U,W,Z)=>{if(U)U(ssrRenderComponent(E,{zh:"\u8D60\u543E\u73AB\u7470\uFF0C\u624B\u7559\u4F59\u9999",en:"Become a sponsor to me"},null,W,Z));else return[createVNode(E,{zh:"\u8D60\u543E\u73AB\u7470\uFF0C\u624B\u7559\u4F59\u9999",en:"Become a sponsor to me"})]}),_:1},O,V));else return[createVNode(x,null,{default:withCtx(()=>[createVNode(E,{zh:"\u8D60\u543E\u73AB\u7470\uFF0C\u624B\u7559\u4F59\u9999",en:"Become a sponsor to me"})]),_:1})]}),description:withCtx((L,P,O,V)=>{if(P)P(ssrRenderComponent(E,{zh:"\u4F60\u7684\u6177\u6168\u8D5E\u52A9\u5C06\u662F\u6211\u6301\u7EED\u8F93\u51FA\u7684\u4E0D\u7AED\u52A8\u529B",en:"Your generous financial support is my motivation to keep moving forward"},null,O,V));else return[createVNode(E,{zh:"\u4F60\u7684\u6177\u6168\u8D5E\u52A9\u5C06\u662F\u6211\u6301\u7EED\u8F93\u51FA\u7684\u4E0D\u7AED\u52A8\u529B",en:"Your generous financial support is my motivation to keep moving forward"})]}),_:1},n)),t('<div class="page-content" data-v-e9bd1214>'),t(ssrRenderComponent(k,{class:"tabs-wrapper"},{default:withCtx((L,P,O,V)=>{if(P)P(ssrRenderComponent(S,{class:"sponsor-tabs",state:e.sponsorState},null,O,V));else return[createVNode(S,{class:"sponsor-tabs",state:e.sponsorState},null,8,["state"])]}),_:1},n)),t(ssrRenderComponent(N,{class:"sponsor-provider",state:e.sponsorState},null,n)),t("</div></div>")}const _sfc_setup$K=_sfc_main$K.setup;_sfc_main$K.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/sponsor.vue"),_sfc_setup$K?_sfc_setup$K(e,t):void 0};const SponsorPage=_export_sfc(_sfc_main$K,[["ssrRender",_sfc_ssrRender$K],["__scopeId","data-v-e9bd1214"]]),_sfc_main$J=defineComponent({name:"LensSkeleton",props:{columns:{type:Number,required:!0},rows:{type:Number,default:2},height:{type:Number,required:!0}}}),skeleton_vue_vue_type_style_index_0_scoped_c145d1cc_lang="";function _sfc_ssrRender$J(e,t,n,r,c,d,g,o){const v=resolveComponent("skeleton-base");t(`<ul${ssrRenderAttrs(mergeProps({class:"skeletons",style:{gridTemplateColumns:`repeat(${e.columns}, 1fr)`}},r))} data-v-c145d1cc><!--[-->`),ssrRenderList(e.columns*e.rows,x=>{t(`<div class="item" style="${ssrRenderStyle({height:`${e.height}px`})}" data-v-c145d1cc>`),t(ssrRenderComponent(v,null,null,n)),t("</div>")}),t("<!--]--></ul>")}const _sfc_setup$J=_sfc_main$J.setup;_sfc_main$J.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/lens/skeleton.vue"),_sfc_setup$J?_sfc_setup$J(e,t):void 0};const LensSkeleton=_export_sfc(_sfc_main$J,[["ssrRender",_sfc_ssrRender$J],["__scopeId","data-v-c145d1cc"]]),_sfc_main$I=defineComponent({name:"LensInstagramGallery",components:{Swiper,SwiperSlide},props:{medias:{type:Array,required:!0},index:{type:Number,default:0},visible:{type:Boolean,default:!1}},emits:["close"],setup(e,t){const n=ref(e.index),r=ref(),c=computed(()=>e.medias[n.value]);return{galleryActiveIndex:n,galleryActiveMedia:c,isVideoMediaIns,getInstagramImage,handleGalleryClose:()=>{t.emit("close")},handleGallerySwiperReady:E=>{r.value=E},handleGallerySwiperTransitionStart:()=>{var E;n.value=((E=r.value)==null?void 0:E.activeIndex)||0},galleryPrevSlide:()=>{var E;return(E=r.value)==null?void 0:E.slidePrev()},galleryNextSlide:()=>{var E;return(E=r.value)==null?void 0:E.slideNext()}}}}),gallery_vue_vue_type_style_index_0_scoped_242892fa_lang="";function _sfc_ssrRender$I(e,t,n,r,c,d,g,o){const v=resolveComponent("popup"),x=resolveComponent("udate"),E=resolveComponent("ulink"),k=resolveComponent("swiper"),S=resolveComponent("swiper-slide");t(ssrRenderComponent(v,mergeProps({visible:e.visible,onClose:e.handleGalleryClose},r),{default:withCtx((N,L,P,O)=>{if(L)L(`<div class="instagram-gallery" data-v-242892fa${O}><div class="topbar" data-v-242892fa${O}><div class="left" data-v-242892fa${O}><span class="timestamp" data-v-242892fa${O}><i class="iconfont icon-clock" data-v-242892fa${O}></i>`),L(ssrRenderComponent(x,{to:"YMDm",date:e.galleryActiveMedia.timestamp,separator:"/"},null,P,O)),L(`</span></div><div class="center" data-v-242892fa${O}><span class="pagination" data-v-242892fa${O}>${ssrInterpolate(e.galleryActiveIndex+1)} / ${ssrInterpolate(e.medias.length)}</span></div><div class="right" data-v-242892fa${O}><span class="caption" data-v-242892fa${O}>`),e.isVideoMediaIns(e.galleryActiveMedia)?L(`<i class="iconfont icon-video" data-v-242892fa${O}></i>`):L(`<i class="iconfont icon-camera" data-v-242892fa${O}></i>`),e.galleryActiveMedia.caption?L(`<!--[-->${ssrInterpolate(e.galleryActiveMedia.caption)}<!--]-->`):L("<!---->"),L("</span></div></div>"),L(ssrRenderComponent(E,{class:"postlink",href:e.galleryActiveMedia.permalink},{default:withCtx((V,z,U,W)=>{if(z)z(`<i class="iconfont icon-instagram" data-v-242892fa${W}></i>`);else return[createVNode("i",{class:"iconfont icon-instagram"})]}),_:1},P,O)),L(`<button class="navigation prev"${includeBooleanAttr(e.galleryActiveIndex===0)?" disabled":""} data-v-242892fa${O}><i class="iconfont icon-prev" data-v-242892fa${O}></i></button><button class="navigation next"${includeBooleanAttr(e.galleryActiveIndex===e.medias.length-1)?" disabled":""} data-v-242892fa${O}><i class="iconfont icon-next" data-v-242892fa${O}></i></button>`),L(ssrRenderComponent(k,{effect:"fade","fade-effect":{crossFade:!0},"initial-slide":e.index,mousewheel:!0,"observe-parents":!0,"grab-cursor":!1,"preload-images":!1,lazy:!0,"simulate-touch":!1,onSwiper:e.handleGallerySwiperReady,onTransitionStart:e.handleGallerySwiperTransitionStart},{default:withCtx((V,z,U,W)=>{if(z)z("<!--[-->"),ssrRenderList(e.medias,(Z,re)=>{z(ssrRenderComponent(S,{key:re},{default:withCtx(({isActive:oe},se,ce,me)=>{if(se)e.isVideoMediaIns(Z)?(se(`<div class="video" data-v-242892fa${me}>`),se(oe?`<video class="player"${ssrRenderAttr("src",Z.media_url)} controls autoplay data-v-242892fa${me}></video>`:"<!---->"),se("</div>")):se(`<!--[--><div class="image swiper-lazy"${ssrRenderAttr("data-background",e.getInstagramImage(Z))}${ssrRenderAttr("alt",Z.caption)} data-v-242892fa${me}></div><div class="swiper-lazy-preloader swiper-lazy-preloader-white" data-v-242892fa${me}></div><!--]-->`);else return[e.isVideoMediaIns(Z)?(openBlock(),createBlock("div",{key:0,class:"video"},[oe?(openBlock(),createBlock("video",{key:0,class:"player",src:Z.media_url,controls:"",autoplay:""},null,8,["src"])):createCommentVNode("",!0)])):(openBlock(),createBlock(Fragment,{key:1},[createVNode("div",{class:"image swiper-lazy","data-background":e.getInstagramImage(Z),alt:Z.caption},null,8,["data-background","alt"]),createVNode("div",{class:"swiper-lazy-preloader swiper-lazy-preloader-white"})],64))]}),_:2},U,W))}),z("<!--]-->");else return[(openBlock(!0),createBlock(Fragment,null,renderList(e.medias,(Z,re)=>(openBlock(),createBlock(S,{key:re},{default:withCtx(({isActive:oe})=>[e.isVideoMediaIns(Z)?(openBlock(),createBlock("div",{key:0,class:"video"},[oe?(openBlock(),createBlock("video",{key:0,class:"player",src:Z.media_url,controls:"",autoplay:""},null,8,["src"])):createCommentVNode("",!0)])):(openBlock(),createBlock(Fragment,{key:1},[createVNode("div",{class:"image swiper-lazy","data-background":e.getInstagramImage(Z),alt:Z.caption},null,8,["data-background","alt"]),createVNode("div",{class:"swiper-lazy-preloader swiper-lazy-preloader-white"})],64))]),_:2},1024))),128))]}),_:1},P,O)),L("</div>");else return[createVNode("div",{class:"instagram-gallery"},[createVNode("div",{class:"topbar"},[createVNode("div",{class:"left"},[createVNode("span",{class:"timestamp"},[createVNode("i",{class:"iconfont icon-clock"}),createVNode(x,{to:"YMDm",date:e.galleryActiveMedia.timestamp,separator:"/"},null,8,["date"])])]),createVNode("div",{class:"center"},[createVNode("span",{class:"pagination"},toDisplayString(e.galleryActiveIndex+1)+" / "+toDisplayString(e.medias.length),1)]),createVNode("div",{class:"right"},[createVNode("span",{class:"caption"},[e.isVideoMediaIns(e.galleryActiveMedia)?(openBlock(),createBlock("i",{key:0,class:"iconfont icon-video"})):(openBlock(),createBlock("i",{key:1,class:"iconfont icon-camera"})),e.galleryActiveMedia.caption?(openBlock(),createBlock(Fragment,{key:2},[createTextVNode(toDisplayString(e.galleryActiveMedia.caption),1)],64)):createCommentVNode("",!0)])])]),createVNode(E,{class:"postlink",href:e.galleryActiveMedia.permalink},{default:withCtx(()=>[createVNode("i",{class:"iconfont icon-instagram"})]),_:1},8,["href"]),createVNode("button",{class:"navigation prev",onClick:e.galleryPrevSlide,disabled:e.galleryActiveIndex===0},[createVNode("i",{class:"iconfont icon-prev"})],8,["onClick","disabled"]),createVNode("button",{class:"navigation next",onClick:e.galleryNextSlide,disabled:e.galleryActiveIndex===e.medias.length-1},[createVNode("i",{class:"iconfont icon-next"})],8,["onClick","disabled"]),createVNode(k,{effect:"fade","fade-effect":{crossFade:!0},"initial-slide":e.index,mousewheel:!0,"observe-parents":!0,"grab-cursor":!1,"preload-images":!1,lazy:!0,"simulate-touch":!1,onSwiper:e.handleGallerySwiperReady,onTransitionStart:e.handleGallerySwiperTransitionStart},{default:withCtx(()=>[(openBlock(!0),createBlock(Fragment,null,renderList(e.medias,(V,z)=>(openBlock(),createBlock(S,{key:z},{default:withCtx(({isActive:U})=>[e.isVideoMediaIns(V)?(openBlock(),createBlock("div",{key:0,class:"video"},[U?(openBlock(),createBlock("video",{key:0,class:"player",src:V.media_url,controls:"",autoplay:""},null,8,["src"])):createCommentVNode("",!0)])):(openBlock(),createBlock(Fragment,{key:1},[createVNode("div",{class:"image swiper-lazy","data-background":e.getInstagramImage(V),alt:V.caption},null,8,["data-background","alt"]),createVNode("div",{class:"swiper-lazy-preloader swiper-lazy-preloader-white"})],64))]),_:2},1024))),128))]),_:1},8,["initial-slide","onSwiper","onTransitionStart"])])]}),_:1},n))}const _sfc_setup$I=_sfc_main$I.setup;_sfc_main$I.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/lens/instagram/gallery.vue"),_sfc_setup$I?_sfc_setup$I(e,t):void 0};const Gallery=_export_sfc(_sfc_main$I,[["ssrRender",_sfc_ssrRender$I],["__scopeId","data-v-242892fa"]]),_sfc_main$H=defineComponent({name:"LensInstagramGrid",components:{Gallery},props:{medias:{type:Array,required:!0},limit:{type:Number,required:!0}},setup(e){const{gtag:t}=useEnhancer(),n=ref(),r=computed(()=>n.value!==UNDEFINED),c=computed(()=>e.medias.slice(0,e.limit-1)),d=computed(()=>c.value.length>1?e.medias.slice(e.limit-1,e.limit+2):[]);return{VALUABLE_LINKS,gridMedias:c,restMedias:d,isOnGallery:r,galleryActiveIndex:n,isVideoMediaIns,isAlbumMediaIns,getTargetCDNURL,getInstagramImage,openMediaGallery:v=>{n.value=v,t==null||t.event("instagram_view",{event_category:GAEventCategories.Lens})},closeMediaGallery:()=>{n.value=UNDEFINED}}}}),grid_vue_vue_type_style_index_0_scoped_f1bfd8b1_lang="";function _sfc_ssrRender$H(e,t,n,r,c,d,g,o){const v=resolveComponent("ulink"),x=resolveComponent("client-only"),E=resolveComponent("gallery"),k=resolveDirective("lozad");t(`<div${ssrRenderAttrs(mergeProps({class:"instagram-grid"},r))} data-v-f1bfd8b1><ul class="medias" data-v-f1bfd8b1><!--[-->`),ssrRenderList(e.gridMedias,(S,N)=>{t(`<li${ssrRenderAttr("title",S.caption)} class="${ssrRenderClass([e.isVideoMediaIns(S)?"video":"photo","media"])}" data-v-f1bfd8b1><div${ssrRenderAttrs(mergeProps({class:"background","data-background-image":e.getInstagramImage(S,"m")},ssrGetDirectiveProps(e,k)))} data-v-f1bfd8b1></div><div class="mask" data-v-f1bfd8b1><span class="icon" data-v-f1bfd8b1>`),e.isVideoMediaIns(S)?t('<i class="iconfont icon-music-play" data-v-f1bfd8b1></i>'):t('<i class="iconfont icon-eye" data-v-f1bfd8b1></i>'),t('</span></div><div class="type-icon" data-v-f1bfd8b1>'),e.isVideoMediaIns(S)?t('<i class="iconfont icon-video" data-v-f1bfd8b1></i>'):t("<!---->"),e.isAlbumMediaIns(S)?t('<i class="iconfont icon-album" data-v-f1bfd8b1></i>'):t("<!---->"),t("</div></li>")}),t('<!--]--><li class="more" data-v-f1bfd8b1><!--[-->'),ssrRenderList(e.restMedias,(S,N)=>{t(ssrRenderComponent(v,{class:"media",href:S.permalink,key:N,title:S.caption,style:{backgroundImage:`url(${e.getInstagramImage(S,"t")})`}},{default:withCtx((L,P,O,V)=>{if(P)P(`<div class="mask" data-v-f1bfd8b1${V}><i class="iconfont icon-new-window-s" data-v-f1bfd8b1${V}></i></div>`);else return[createVNode("div",{class:"mask"},[createVNode("i",{class:"iconfont icon-new-window-s"})])]}),_:2},n))}),t("<!--]--><!--[-->"),ssrRenderList(3-e.restMedias.length,S=>{t(ssrRenderComponent(v,{class:"media",href:e.VALUABLE_LINKS.INSTAGRAM,key:S,style:{backgroundImage:`url(${e.getTargetCDNURL("/images/page-lens/instagram-default.jpg")})`}},{default:withCtx((N,L,P,O)=>{if(L)L(`<div class="mask" data-v-f1bfd8b1${O}><i class="iconfont icon-new-window-s" data-v-f1bfd8b1${O}></i></div>`);else return[createVNode("div",{class:"mask"},[createVNode("i",{class:"iconfont icon-new-window-s"})])]}),_:2},n))}),t("<!--]-->"),t(ssrRenderComponent(v,{class:"link",href:e.VALUABLE_LINKS.INSTAGRAM},{default:withCtx((S,N,L,P)=>{if(N)N("\u2022\u2022\u2022");else return[createTextVNode("\u2022\u2022\u2022")]}),_:1},n)),t("</li></ul>"),t(ssrRenderComponent(x,null,{default:withCtx((S,N,L,P)=>{if(N)N(ssrRenderComponent(E,{medias:e.gridMedias,index:e.galleryActiveIndex,visible:e.isOnGallery,onClose:e.closeMediaGallery},null,L,P));else return[createVNode(E,{medias:e.gridMedias,index:e.galleryActiveIndex,visible:e.isOnGallery,onClose:e.closeMediaGallery},null,8,["medias","index","visible","onClose"])]}),_:1},n)),t("</div>")}const _sfc_setup$H=_sfc_main$H.setup;_sfc_main$H.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/lens/instagram/grid.vue"),_sfc_setup$H?_sfc_setup$H(e,t):void 0};const InstagramGrid=_export_sfc(_sfc_main$H,[["ssrRender",_sfc_ssrRender$H],["__scopeId","data-v-f1bfd8b1"]]),_sfc_main$G=defineComponent({name:"LensListSwiper",components:{Swiper,SwiperSlide},props:{data:{type:Array,required:!0},rows:{type:Number,default:2},columns:{type:Number,default:5}},setup(){const e=reactive({canPrev:!1,canNext:!0}),t=ref(),n=()=>{var g;return(g=t.value)==null?void 0:g.slidePrev()},r=()=>{var g;return(g=t.value)==null?void 0:g.slideNext()},c=g=>{e.canNext=!g.isEnd,e.canPrev=!g.isBeginning};return{handleListSwiperReady:g=>{t.value=g,c(g)},handleListSlideChange:c,listSwiperState:e,listPrevSlide:n,listNextSlide:r}}}),swiper_vue_vue_type_style_index_0_scoped_44fea3ed_lang="";function _sfc_ssrRender$G(e,t,n,r,c,d,g,o){const v=resolveComponent("swiper",!0),x=resolveComponent("swiper-slide");t(`<div${ssrRenderAttrs(mergeProps({class:"list-swiper"},r))} data-v-44fea3ed><div class="navigation prev" data-v-44fea3ed><button class="button"${includeBooleanAttr(!e.listSwiperState.canPrev)?" disabled":""} data-v-44fea3ed><i class="iconfont icon-prev" data-v-44fea3ed></i></button></div><div class="navigation next" data-v-44fea3ed><button class="button"${includeBooleanAttr(!e.listSwiperState.canNext)?" disabled":""} data-v-44fea3ed><i class="iconfont icon-next" data-v-44fea3ed></i></button></div>`),t(ssrRenderComponent(v,{class:"swiper",autoplay:!0,mousewheel:!1,"grab-cursor":!1,"allow-touch-move":!1,"slides-per-view":e.columns,"slides-per-group":e.columns,grid:{rows:e.rows,fill:"row"},"space-between":24,onSwiper:e.handleListSwiperReady,onSlideChange:e.handleListSlideChange},{default:withCtx((E,k,S,N)=>{if(k)k("<!--[-->"),ssrRenderList(e.data,(L,P)=>{k(ssrRenderComponent(x,{class:"slide-item",key:P},{default:withCtx((O,V,z,U)=>{if(V)ssrRenderSlot(e.$slots,"item",{item:L,index:P},null,V,z,U);else return[renderSlot(e.$slots,"item",{item:L,index:P},void 0,!0)]}),_:2},S,N))}),k("<!--]-->");else return[(openBlock(!0),createBlock(Fragment,null,renderList(e.data,(L,P)=>(openBlock(),createBlock(x,{class:"slide-item",key:P},{default:withCtx(()=>[renderSlot(e.$slots,"item",{item:L,index:P},void 0,!0)]),_:2},1024))),128))]}),_:3},n)),t("</div>")}const _sfc_setup$G=_sfc_main$G.setup;_sfc_main$G.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/lens/swiper.vue"),_sfc_setup$G?_sfc_setup$G(e,t):void 0};const ListSwiper=_export_sfc(_sfc_main$G,[["ssrRender",_sfc_ssrRender$G],["__scopeId","data-v-44fea3ed"]]),_sfc_main$F=defineComponent({name:"LensYoutubeVideoList",components:{ListSwiper},props:{playlistId:{type:String,required:!0}},emits:["view"],setup(e,t){const{gtag:n}=useEnhancer(),r=ref([]),c=ref(!0),d=async()=>{try{c.value=!0,r.value=await fetchYouTubeVideoList(e.playlistId)}catch{r.value=[]}finally{c.value=!1}},g=v=>{var E,k,S;const x=((E=v.high)==null?void 0:E.url)||((k=v.medium)==null?void 0:k.url)||((S=v.defult)==null?void 0:S.url);return x?getTargetProxyURL(x,ProxyModule.YouTube):""},o=v=>{t.emit("view",v),n==null||n.event("youtube_view",{event_category:GAEventCategories.Lens})};return onMounted(()=>{d()}),{LanguageKey,fetching:c,videos:r,getThumbURL:g,handleView:o}}}),videos_vue_vue_type_style_index_0_scoped_b28be25a_lang="";function _sfc_ssrRender$F(e,t,n,r,c,d,g,o){const v=resolveComponent("placeholder"),x=resolveComponent("list-swiper"),E=resolveComponent("udate"),k=resolveDirective("lozad");t(ssrRenderComponent(v,mergeProps({data:e.videos,loading:e.fetching},r),{placeholder:withCtx((S,N,L,P)=>{if(N)ssrRenderSlot(e.$slots,"empty",{},null,N,L,P);else return[renderSlot(e.$slots,"empty",{},void 0,!0)]}),loading:withCtx((S,N,L,P)=>{if(N)ssrRenderSlot(e.$slots,"loading",{},null,N,L,P);else return[renderSlot(e.$slots,"loading",{},void 0,!0)]}),default:withCtx((S,N,L,P)=>{if(N)N(ssrRenderComponent(x,{data:e.videos},{item:withCtx(({item:O},V,z,U)=>{if(V)V(`<div class="video" data-v-b28be25a${U}><div class="thumb" data-v-b28be25a${U}><div class="mask" data-v-b28be25a${U}><div class="button" data-v-b28be25a${U}><i class="iconfont icon-music-play" data-v-b28be25a${U}></i></div></div><span class="published-at" data-v-b28be25a${U}><i class="iconfont icon-clock" data-v-b28be25a${U}></i><span class="text" data-v-b28be25a${U}>`),V(ssrRenderComponent(E,{to:"ago",date:O.snippet.publishedAt},null,z,U)),V(`</span></span><div${ssrRenderAttrs(mergeProps({class:"background","data-background-image":e.getThumbURL(O.snippet.thumbnails)},ssrGetDirectiveProps(e,k)))} data-v-b28be25a${U}></div></div><h5 class="title" data-v-b28be25a${U}>${ssrInterpolate(O.snippet.title)}</h5><div class="description" data-v-b28be25a${U}>${ssrInterpolate(O.snippet.description||"-")}</div></div>`);else return[createVNode("div",{class:"video",onClick:W=>e.handleView(O)},[createVNode("div",{class:"thumb"},[createVNode("div",{class:"mask"},[createVNode("div",{class:"button"},[createVNode("i",{class:"iconfont icon-music-play"})])]),createVNode("span",{class:"published-at"},[createVNode("i",{class:"iconfont icon-clock"}),createVNode("span",{class:"text"},[createVNode(E,{to:"ago",date:O.snippet.publishedAt},null,8,["date"])])]),withDirectives(createVNode("div",{class:"background","data-background-image":e.getThumbURL(O.snippet.thumbnails)},null,8,["data-background-image"]),[[k]])]),createVNode("h5",{class:"title"},toDisplayString(O.snippet.title),1),createVNode("div",{class:"description"},toDisplayString(O.snippet.description||"-"),1)],8,["onClick"])]}),_:1},L,P));else return[createVNode(x,{data:e.videos},{item:withCtx(({item:O})=>[createVNode("div",{class:"video",onClick:V=>e.handleView(O)},[createVNode("div",{class:"thumb"},[createVNode("div",{class:"mask"},[createVNode("div",{class:"button"},[createVNode("i",{class:"iconfont icon-music-play"})])]),createVNode("span",{class:"published-at"},[createVNode("i",{class:"iconfont icon-clock"}),createVNode("span",{class:"text"},[createVNode(E,{to:"ago",date:O.snippet.publishedAt},null,8,["date"])])]),withDirectives(createVNode("div",{class:"background","data-background-image":e.getThumbURL(O.snippet.thumbnails)},null,8,["data-background-image"]),[[k]])]),createVNode("h5",{class:"title"},toDisplayString(O.snippet.title),1),createVNode("div",{class:"description"},toDisplayString(O.snippet.description||"-"),1)],8,["onClick"])]),_:1},8,["data"])]}),_:3},n))}const _sfc_setup$F=_sfc_main$F.setup;_sfc_main$F.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/lens/youtube/videos.vue"),_sfc_setup$F?_sfc_setup$F(e,t):void 0};const YoutubeVideoList=_export_sfc(_sfc_main$F,[["ssrRender",_sfc_ssrRender$F],["__scopeId","data-v-b28be25a"]]),_sfc_main$E=defineComponent({name:"LensPageYoutubePlaylist",components:{YoutubeVideoList},props:{playlists:{type:Array,required:!0}},setup(){const e=ref(null),t=computed(()=>Boolean(e.value)),n=computed(()=>{const d=e.value;return d?getYouTubeVideoEmbedURL(d.snippet.resourceId.videoId,d.snippet.playlistId):UNDEFINED});return{isOnYouTubeModal:t,youTubeModalURL:n,openYouTubeModal:d=>{e.value=d},closeYouTubeModal:()=>{e.value=null}}}}),playlist_vue_vue_type_style_index_0_scoped_d52714bd_lang="";function _sfc_ssrRender$E(e,t,n,r,c,d,g,o){const v=resolveComponent("youtube-video-list"),x=resolveComponent("client-only"),E=resolveComponent("popup");t(`<div${ssrRenderAttrs(mergeProps({class:"youtube-playlist"},r))} data-v-d52714bd><ul class="playlist" data-v-d52714bd><!--[-->`),ssrRenderList(e.playlists,(k,S)=>{t(`<li class="item"${ssrRenderAttr("title",k.title)} data-v-d52714bd>`),ssrRenderSlot(e.$slots,"title",{list:k,index:S},null,t,n),t(ssrRenderComponent(v,{"playlist-id":k.id,onView:e.openYouTubeModal},{empty:withCtx((N,L,P,O)=>{if(L)ssrRenderSlot(e.$slots,"empty",{},null,L,P,O);else return[renderSlot(e.$slots,"empty",{},void 0,!0)]}),loading:withCtx((N,L,P,O)=>{if(L)ssrRenderSlot(e.$slots,"loading",{},null,L,P,O);else return[renderSlot(e.$slots,"loading",{},void 0,!0)]}),_:2},n)),t("</li>")}),t("<!--]--></ul>"),t(ssrRenderComponent(x,null,{default:withCtx((k,S,N,L)=>{if(S)S(ssrRenderComponent(E,{visible:e.isOnYouTubeModal,"scroll-close":!1,onClose:e.closeYouTubeModal},{default:withCtx((P,O,V,z)=>{if(O)O(`<iframe class="youtube-modal"${ssrRenderAttr("src",e.youTubeModalURL)} data-v-d52714bd${z}></iframe>`);else return[createVNode("iframe",{class:"youtube-modal",src:e.youTubeModalURL},null,8,["src"])]}),_:1},N,L));else return[createVNode(E,{visible:e.isOnYouTubeModal,"scroll-close":!1,onClose:e.closeYouTubeModal},{default:withCtx(()=>[createVNode("iframe",{class:"youtube-modal",src:e.youTubeModalURL},null,8,["src"])]),_:1},8,["visible","onClose"])]}),_:1},n)),t("</div>")}const _sfc_setup$E=_sfc_main$E.setup;_sfc_main$E.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/lens/youtube/playlist.vue"),_sfc_setup$E?_sfc_setup$E(e,t):void 0};const YoutubePlaylist=_export_sfc(_sfc_main$E,[["ssrRender",_sfc_ssrRender$E],["__scopeId","data-v-d52714bd"]]),_sfc_main$D=defineComponent({name:"LensPage",components:{PageBanner,LensSkeleton,InstagramGrid,YoutubePlaylist},setup(){const{i18n:e,head:t,isZhLang:n}=useEnhancer(),{instagramMedias:r,youtubePlayList:c}=useStores(),d=computed(()=>c.data.filter(g=>g.contentDetails.itemCount>1));return t(()=>{const g=firstUpperCase(e.t(LanguageKey.PAGE_LENS,Language.English));return{pageTitle:(n.value?[e.t(LanguageKey.PAGE_LENS),g]:[g]).join(" | "),description:`${META.author} \u7684\u6D6E\u5149\u63A0\u5F71`}}),useUniversalFetch(()=>Promise.all([r.fetch().catch(()=>{}),c.fetch().catch(()=>{})])),{VALUABLE_LINKS,LanguageKey,instagramMedias:r,youtubePlaylistData:d,getYouTubePlaylistURL}}}),index_vue_vue_type_style_index_0_scoped_371177d9_lang="";function _sfc_ssrRender$D(e,t,n,r,c,d,g,o){const v=resolveComponent("page-banner"),x=resolveComponent("webfont"),E=resolveComponent("i18n"),k=resolveComponent("container"),S=resolveComponent("ulink"),N=resolveComponent("placeholder"),L=resolveComponent("empty"),P=resolveComponent("lens-skeleton"),O=resolveComponent("instagram-grid"),V=resolveComponent("youtube-playlist");t(`<div${ssrRenderAttrs(mergeProps({class:"lens-page"},r))} data-v-371177d9>`),t(ssrRenderComponent(v,{class:"page-banner",position:68,image:"/images/page-lens/banner.jpeg"},{title:withCtx((z,U,W,Z)=>{if(U)U(ssrRenderComponent(x,null,{default:withCtx((re,oe,se,ce)=>{if(oe)oe(ssrRenderComponent(E,{zh:"\u51E1\u5FC3\u6240\u5411\uFF0C\u7D20\u5C65\u4EE5\u5F80",en:"Because it's there"},null,se,ce));else return[createVNode(E,{zh:"\u51E1\u5FC3\u6240\u5411\uFF0C\u7D20\u5C65\u4EE5\u5F80",en:"Because it's there"})]}),_:1},W,Z));else return[createVNode(x,null,{default:withCtx(()=>[createVNode(E,{zh:"\u51E1\u5FC3\u6240\u5411\uFF0C\u7D20\u5C65\u4EE5\u5F80",en:"Because it's there"})]),_:1})]}),description:withCtx((z,U,W,Z)=>{if(U)U(ssrRenderComponent(E,null,{zh:withCtx((re,oe,se,ce)=>{if(oe)oe("\u751F\u5982\u9006\u65C5\uFF0C\u4E00\u82C7\u4EE5\u822A");else return[createTextVNode("\u751F\u5982\u9006\u65C5\uFF0C\u4E00\u82C7\u4EE5\u822A")]}),en:withCtx((re,oe,se,ce)=>{if(oe)oe("&quot;why did you want to climb mount Everest?&quot;");else return[createTextVNode('"why did you want to climb mount Everest?"')]}),_:1},W,Z));else return[createVNode(E,null,{zh:withCtx(()=>[createTextVNode("\u751F\u5982\u9006\u65C5\uFF0C\u4E00\u82C7\u4EE5\u822A")]),en:withCtx(()=>[createTextVNode('"why did you want to climb mount Everest?"')]),_:1})]}),_:1},n)),t(ssrRenderComponent(k,{class:"page-bridge"},null,n)),t(ssrRenderComponent(k,{class:"page-content"},{default:withCtx((z,U,W,Z)=>{if(U)U(`<h4 class="module-title instagram" data-v-371177d9${Z}>`),U(ssrRenderComponent(S,{class:"link",href:e.VALUABLE_LINKS.INSTAGRAM},{default:withCtx((re,oe,se,ce)=>{if(oe)oe("\u6D6E\u5149\u63A0\u5F71 | photography");else return[createTextVNode("\u6D6E\u5149\u63A0\u5F71 | photography")]}),_:1},W,Z)),U(ssrRenderComponent(S,{class:"brand",href:e.VALUABLE_LINKS.INSTAGRAM},{default:withCtx((re,oe,se,ce)=>{if(oe)oe(`<i class="iconfont icon-instagram" data-v-371177d9${ce}></i><span class="text" data-v-371177d9${ce}>Instagram</span>`);else return[createVNode("i",{class:"iconfont icon-instagram"}),createVNode("span",{class:"text"},"Instagram")]}),_:1},W,Z)),U("</h4>"),U(ssrRenderComponent(N,{data:e.instagramMedias,loading:e.instagramMedias.fetching},{placeholder:withCtx((re,oe,se,ce)=>{if(oe)oe(ssrRenderComponent(L,{class:"module-empty",key:"empty"},{default:withCtx((me,we,ae,Ce)=>{if(we)we(ssrRenderComponent(E,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,ae,Ce));else return[createVNode(E,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,8,["k"])]}),_:1},se,ce));else return[createVNode(L,{class:"module-empty",key:"empty"},{default:withCtx(()=>[createVNode(E,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,8,["k"])]),_:1})]}),loading:withCtx((re,oe,se,ce)=>{if(oe)oe(ssrRenderComponent(P,{columns:6,rows:2,height:155,key:"loading",class:"module-loading"},null,se,ce));else return[createVNode(P,{columns:6,rows:2,height:155,key:"loading",class:"module-loading"})]}),default:withCtx((re,oe,se,ce)=>{if(oe)oe(`<div class="module-content" data-v-371177d9${ce}>`),oe(ssrRenderComponent(O,{medias:e.instagramMedias.data,limit:24},null,se,ce)),oe("</div>");else return[createVNode("div",{class:"module-content"},[createVNode(O,{medias:e.instagramMedias.data,limit:24},null,8,["medias"])])]}),_:1},W,Z)),U(`<div class="module-content" data-v-371177d9${Z}>`),U(ssrRenderComponent(V,{playlists:e.youtubePlaylistData},{title:withCtx(({list:re},oe,se,ce)=>{if(oe)oe(`<h4 class="module-title youtube" data-v-371177d9${ce}>`),oe(ssrRenderComponent(S,{class:"link",href:e.getYouTubePlaylistURL(re.id)},{default:withCtx((me,we,ae,Ce)=>{if(we)we(`${ssrInterpolate(re.snippet.title)} (${ssrInterpolate(re.contentDetails.itemCount)}) `);else return[createTextVNode(toDisplayString(re.snippet.title)+" ("+toDisplayString(re.contentDetails.itemCount)+") ",1)]}),_:2},se,ce)),oe(ssrRenderComponent(S,{class:"brand",href:e.VALUABLE_LINKS.YOUTUBE_CHANNEL},{default:withCtx((me,we,ae,Ce)=>{if(we)we(`<i class="iconfont icon-youtube" data-v-371177d9${Ce}></i><span class="text" data-v-371177d9${Ce}>YouTube \xB7 Channel</span>`);else return[createVNode("i",{class:"iconfont icon-youtube"}),createVNode("span",{class:"text"},"YouTube \xB7 Channel")]}),_:2},se,ce)),oe("</h4>");else return[createVNode("h4",{class:"module-title youtube"},[createVNode(S,{class:"link",href:e.getYouTubePlaylistURL(re.id)},{default:withCtx(()=>[createTextVNode(toDisplayString(re.snippet.title)+" ("+toDisplayString(re.contentDetails.itemCount)+") ",1)]),_:2},1032,["href"]),createVNode(S,{class:"brand",href:e.VALUABLE_LINKS.YOUTUBE_CHANNEL},{default:withCtx(()=>[createVNode("i",{class:"iconfont icon-youtube"}),createVNode("span",{class:"text"},"YouTube \xB7 Channel")]),_:1},8,["href"])])]}),loading:withCtx((re,oe,se,ce)=>{if(oe)oe(ssrRenderComponent(P,{columns:5,rows:1,height:166,key:"loading",class:"module-loading"},null,se,ce));else return[createVNode(P,{columns:5,rows:1,height:166,key:"loading",class:"module-loading"})]}),empty:withCtx((re,oe,se,ce)=>{if(oe)oe(ssrRenderComponent(L,{class:"module-empty",key:"empty"},{default:withCtx((me,we,ae,Ce)=>{if(we)we(ssrRenderComponent(E,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,ae,Ce));else return[createVNode(E,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,8,["k"])]}),_:1},se,ce));else return[createVNode(L,{class:"module-empty",key:"empty"},{default:withCtx(()=>[createVNode(E,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,8,["k"])]),_:1})]}),_:1},W,Z)),U("</div>");else return[createVNode("h4",{class:"module-title instagram"},[createVNode(S,{class:"link",href:e.VALUABLE_LINKS.INSTAGRAM},{default:withCtx(()=>[createTextVNode("\u6D6E\u5149\u63A0\u5F71 | photography")]),_:1},8,["href"]),createVNode(S,{class:"brand",href:e.VALUABLE_LINKS.INSTAGRAM},{default:withCtx(()=>[createVNode("i",{class:"iconfont icon-instagram"}),createVNode("span",{class:"text"},"Instagram")]),_:1},8,["href"])]),createVNode(N,{data:e.instagramMedias,loading:e.instagramMedias.fetching},{placeholder:withCtx(()=>[createVNode(L,{class:"module-empty",key:"empty"},{default:withCtx(()=>[createVNode(E,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,8,["k"])]),_:1})]),loading:withCtx(()=>[createVNode(P,{columns:6,rows:2,height:155,key:"loading",class:"module-loading"})]),default:withCtx(()=>[createVNode("div",{class:"module-content"},[createVNode(O,{medias:e.instagramMedias.data,limit:24},null,8,["medias"])])]),_:1},8,["data","loading"]),createVNode("div",{class:"module-content"},[createVNode(V,{playlists:e.youtubePlaylistData},{title:withCtx(({list:re})=>[createVNode("h4",{class:"module-title youtube"},[createVNode(S,{class:"link",href:e.getYouTubePlaylistURL(re.id)},{default:withCtx(()=>[createTextVNode(toDisplayString(re.snippet.title)+" ("+toDisplayString(re.contentDetails.itemCount)+") ",1)]),_:2},1032,["href"]),createVNode(S,{class:"brand",href:e.VALUABLE_LINKS.YOUTUBE_CHANNEL},{default:withCtx(()=>[createVNode("i",{class:"iconfont icon-youtube"}),createVNode("span",{class:"text"},"YouTube \xB7 Channel")]),_:1},8,["href"])])]),loading:withCtx(()=>[createVNode(P,{columns:5,rows:1,height:166,key:"loading",class:"module-loading"})]),empty:withCtx(()=>[createVNode(L,{class:"module-empty",key:"empty"},{default:withCtx(()=>[createVNode(E,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,8,["k"])]),_:1})]),_:1},8,["playlists"])])]}),_:1},n)),t("</div>")}const _sfc_setup$D=_sfc_main$D.setup;_sfc_main$D.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/lens/index.vue"),_sfc_setup$D?_sfc_setup$D(e,t):void 0};const LensPage=_export_sfc(_sfc_main$D,[["ssrRender",_sfc_ssrRender$D],["__scopeId","data-v-371177d9"]]),getEtherscanURL=e=>`https://etherscan.io/address/${e}`,getOpenSeaCollectionURL=e=>`https://opensea.io/collection/${e}`,_sfc_main$C=defineComponent({name:"NftPage",components:{PageBanner,Markdown},setup(){const{i18n:e,head:t,gtag:n,isZhLang:r}=useEnhancer(),{openseaAssets:c,openseaCollections:d}=useStores(),g=(o,v)=>{n==null||n.event(o,{event_category:GAEventCategories.NFT,event_label:v})};return t(()=>{const o=e.t(LanguageKey.PAGE_NFT,Language.English);return{pageTitle:(r.value?[e.t(LanguageKey.PAGE_NFT),o]:[o]).join(" | "),description:`${META.author} \u94F8\u9020\u7684\u6570\u5B57\u85CF\u54C1`,ogType:"product"}}),useUniversalFetch(()=>Promise.all([c.fetch().catch(()=>{}),d.fetch().catch(()=>{})])),{VALUABLE_LINKS,LanguageKey,openseaAssets:c,openseaCollections:d,getTargetProxyURL,getEtherscanURL,getOpenSeaCollectionURL,handleGTagEvent:g}}}),nft_vue_vue_type_style_index_0_scoped_a933e24f_lang="";function _sfc_ssrRender$C(e,t,n,r,c,d,g,o){const v=resolveComponent("page-banner"),x=resolveComponent("webfont"),E=resolveComponent("i18n"),k=resolveComponent("container"),S=resolveComponent("skeleton-base"),N=resolveComponent("placeholder"),L=resolveComponent("empty"),P=resolveComponent("skeleton-paragraph"),O=resolveComponent("ulink"),V=resolveComponent("markdown");t(`<div${ssrRenderAttrs(mergeProps({class:"nft-page"},r))} data-v-a933e24f>`),t(ssrRenderComponent(v,{position:60,image:"/images/page-nft/banner.jpg"},{title:withCtx((z,U,W,Z)=>{if(U)U(ssrRenderComponent(x,null,{default:withCtx((re,oe,se,ce)=>{if(oe)oe(ssrRenderComponent(E,{zh:"\u65F7\u53E4\u65E0\u4E24\uFF0C\u6570\u5B57\u5178\u85CF",en:"NFT Bar"},null,se,ce));else return[createVNode(E,{zh:"\u65F7\u53E4\u65E0\u4E24\uFF0C\u6570\u5B57\u5178\u85CF",en:"NFT Bar"})]}),_:1},W,Z));else return[createVNode(x,null,{default:withCtx(()=>[createVNode(E,{zh:"\u65F7\u53E4\u65E0\u4E24\uFF0C\u6570\u5B57\u5178\u85CF",en:"NFT Bar"})]),_:1})]}),description:withCtx((z,U,W,Z)=>{if(U)U(ssrRenderComponent(E,{zh:"\u7531\u6211\u94F8\u9020 / \u6536\u85CF\u7684\u72EC\u4E00\u65E0\u4E8C\u7684\u6570\u5B57\u85CF\u54C1",en:"Unique NFTs minted by me"},null,W,Z));else return[createVNode(E,{zh:"\u7531\u6211\u94F8\u9020 / \u6536\u85CF\u7684\u72EC\u4E00\u65E0\u4E8C\u7684\u6570\u5B57\u85CF\u54C1",en:"Unique NFTs minted by me"})]}),_:1},n)),t(ssrRenderComponent(k,{class:"page-statistic"},{default:withCtx((z,U,W,Z)=>{if(U)U(""),e.openseaCollections.fetching?(U(`<div class="skeletons" data-v-a933e24f${Z}><!--[-->`),ssrRenderList(5,re=>{U(ssrRenderComponent(S,{class:"item",key:re},null,W,Z))}),U("<!--]--></div>")):(U(`<ul class="statistics" data-v-a933e24f${Z}><li class="item" data-v-a933e24f${Z}><p class="title" data-v-a933e24f${Z}>`),U(ssrRenderComponent(E,{zh:"\u603B\u4EA4\u6613\u91CF",en:"Total Volume"},null,W,Z)),U(`</p><h3 class="count" data-v-a933e24f${Z}>${ssrInterpolate(e.openseaCollections.totalVolume||"0.00")}</h3></li><li class="item" data-v-a933e24f${Z}><p class="title" data-v-a933e24f${Z}>`),U(ssrRenderComponent(E,{zh:"\u603B\u552E\u51FA\u91CF",en:"Total Sales"},null,W,Z)),U(`</p><h3 class="count" data-v-a933e24f${Z}>${ssrInterpolate(e.openseaCollections.totalSales||"0.00")}</h3></li><li class="item" data-v-a933e24f${Z}><p class="title" data-v-a933e24f${Z}>`),U(ssrRenderComponent(E,{zh:"NFTs / \u7CFB\u5217",en:"Assets / Colls"},null,W,Z)),U(`</p><h3 class="count" data-v-a933e24f${Z}>${ssrInterpolate(e.openseaCollections.assetsCount)} / ${ssrInterpolate(e.openseaCollections.data.length)}</h3></li><li class="item" data-v-a933e24f${Z}><p class="title" data-v-a933e24f${Z}>`),U(ssrRenderComponent(E,{zh:"\u5730\u677F\u4EF7",en:"floor price"},null,W,Z)),U(`</p><h3 class="count" data-v-a933e24f${Z}>${ssrInterpolate(e.openseaCollections.floorPrice||"0.00")}</h3></li><li class="item" data-v-a933e24f${Z}><p class="title" data-v-a933e24f${Z}>`),U(ssrRenderComponent(E,{zh:"\u5E73\u5747\u552E\u4EF7",en:"average price"},null,W,Z)),U(`</p><h3 class="count" data-v-a933e24f${Z}>${ssrInterpolate(e.openseaCollections.average_price||"0.00")}</h3></li></ul>`));else return[createVNode(Transition,{name:"module",mode:"out-in"},{default:withCtx(()=>[e.openseaCollections.fetching?(openBlock(),createBlock("div",{key:0,class:"skeletons"},[(openBlock(),createBlock(Fragment,null,renderList(5,re=>createVNode(S,{class:"item",key:re})),64))])):(openBlock(),createBlock("ul",{key:1,class:"statistics"},[createVNode("li",{class:"item"},[createVNode("p",{class:"title"},[createVNode(E,{zh:"\u603B\u4EA4\u6613\u91CF",en:"Total Volume"})]),createVNode("h3",{class:"count"},toDisplayString(e.openseaCollections.totalVolume||"0.00"),1)]),createVNode("li",{class:"item"},[createVNode("p",{class:"title"},[createVNode(E,{zh:"\u603B\u552E\u51FA\u91CF",en:"Total Sales"})]),createVNode("h3",{class:"count"},toDisplayString(e.openseaCollections.totalSales||"0.00"),1)]),createVNode("li",{class:"item"},[createVNode("p",{class:"title"},[createVNode(E,{zh:"NFTs / \u7CFB\u5217",en:"Assets / Colls"})]),createVNode("h3",{class:"count"},toDisplayString(e.openseaCollections.assetsCount)+" / "+toDisplayString(e.openseaCollections.data.length),1)]),createVNode("li",{class:"item"},[createVNode("p",{class:"title"},[createVNode(E,{zh:"\u5730\u677F\u4EF7",en:"floor price"})]),createVNode("h3",{class:"count"},toDisplayString(e.openseaCollections.floorPrice||"0.00"),1)]),createVNode("li",{class:"item"},[createVNode("p",{class:"title"},[createVNode(E,{zh:"\u5E73\u5747\u552E\u4EF7",en:"average price"})]),createVNode("h3",{class:"count"},toDisplayString(e.openseaCollections.average_price||"0.00"),1)])]))]),_:1})]}),_:1},n)),t(ssrRenderComponent(k,{class:"page-content"},{default:withCtx((z,U,W,Z)=>{if(U)U(ssrRenderComponent(N,{data:e.openseaAssets.assets.length,loading:e.openseaAssets.fetching},{placeholder:withCtx((re,oe,se,ce)=>{if(oe)oe(ssrRenderComponent(L,{class:"asset-empty",key:"empty"},{default:withCtx((me,we,ae,Ce)=>{if(we)we("NULL");else return[createTextVNode("NULL")]}),_:1},se,ce));else return[createVNode(L,{class:"asset-empty",key:"empty"},{default:withCtx(()=>[createTextVNode("NULL")]),_:1})]}),loading:withCtx((re,oe,se,ce)=>{if(oe)oe(`<ul class="asset-skeleton" data-v-a933e24f${ce}><!--[-->`),ssrRenderList(8,me=>{oe(`<li class="item" data-v-a933e24f${ce}>`),oe(ssrRenderComponent(S,{class:"image"},null,se,ce)),oe(ssrRenderComponent(P,{class:"paragraph",lines:4,align:!0,"line-height":"1em"},null,se,ce)),oe("</li>")}),oe("<!--]--></ul>");else return[createVNode("ul",{class:"asset-skeleton",key:"skeleton"},[(openBlock(),createBlock(Fragment,null,renderList(8,me=>createVNode("li",{key:me,class:"item"},[createVNode(S,{class:"image"}),createVNode(P,{class:"paragraph",lines:4,align:!0,"line-height":"1em"})])),64))])]}),default:withCtx((re,oe,se,ce)=>{if(oe)oe(`<ul class="asset-list" data-v-a933e24f${ce}><!--[-->`),ssrRenderList(e.openseaAssets.assets,(me,we)=>{oe(`<li class="asset" data-v-a933e24f${ce}><div class="image" style="${ssrRenderStyle({backgroundImage:`url('${e.getTargetProxyURL(me.image_url)}')`})}" data-v-a933e24f${ce}>`),oe(ssrRenderComponent(O,{class:"contract",href:e.getEtherscanURL(me.asset_contract.address),onClick:ae=>e.handleGTagEvent("asset_contract_link",me.name)},{default:withCtx((ae,Ce,Fe,it)=>{if(Ce)Ce(`<i class="iconfont icon-coin" data-v-a933e24f${it}></i><span class="text" data-v-a933e24f${it}>${ssrInterpolate(me.asset_contract.schema_name)}</span>`);else return[createVNode("i",{class:"iconfont icon-coin"}),createVNode("span",{class:"text"},toDisplayString(me.asset_contract.schema_name),1)]}),_:2},se,ce)),me.external_link?oe(ssrRenderComponent(O,{class:"external",href:me.external_link,onClick:ae=>e.handleGTagEvent("asset_external_link",me.name)},{default:withCtx((ae,Ce,Fe,it)=>{if(Ce)Ce(`<i class="iconfont icon-new-window-s" data-v-a933e24f${it}></i>`);else return[createVNode("i",{class:"iconfont icon-new-window-s"})]}),_:2},se,ce)):oe("<!---->"),oe(`<div class="links" data-v-a933e24f${ce}>`),me.collection.discord_url?oe(ssrRenderComponent(O,{class:"item",href:me.collection.discord_url,onClick:ae=>e.handleGTagEvent("asset_collection_discord_url",me.name)},{default:withCtx((ae,Ce,Fe,it)=>{if(Ce)Ce(`<i class="iconfont icon-discord" data-v-a933e24f${it}></i>`);else return[createVNode("i",{class:"iconfont icon-discord"})]}),_:2},se,ce)):oe("<!---->"),me.collection.telegram_url?oe(ssrRenderComponent(O,{class:"item",href:me.collection.telegram_url,onClick:ae=>e.handleGTagEvent("asset_collection_telegram_url",me.name)},{default:withCtx((ae,Ce,Fe,it)=>{if(Ce)Ce(`<i class="iconfont icon-telegram" data-v-a933e24f${it}></i>`);else return[createVNode("i",{class:"iconfont icon-telegram"})]}),_:2},se,ce)):oe("<!---->"),oe(`</div></div><div class="content" data-v-a933e24f${ce}>`),oe(ssrRenderComponent(O,{class:"name",title:me.name,href:me.permalink,onClick:ae=>e.handleGTagEvent("asset_name_link",me.name)},{default:withCtx((ae,Ce,Fe,it)=>{if(Ce)Ce(`${ssrInterpolate(me.name)}`);else return[createTextVNode(toDisplayString(me.name),1)]}),_:2},se,ce)),oe(ssrRenderComponent(O,{class:"collection",title:me.collection.name,href:e.getOpenSeaCollectionURL(me.collection.slug),onClick:ae=>e.handleGTagEvent("asset_collection_link",me.name)},{default:withCtx((ae,Ce,Fe,it)=>{if(Ce)Ce(`${ssrInterpolate(me.collection.name)}`);else return[createTextVNode(toDisplayString(me.collection.name),1)]}),_:2},se,ce)),oe(`<div class="description"${ssrRenderAttr("title",me.description)} data-v-a933e24f${ce}>`),oe(ssrRenderComponent(V,{markdown:me.description,sanitize:!0,compact:!0},null,se,ce)),oe("</div></div></li>")}),oe("<!--]--></ul>");else return[createVNode("ul",{class:"asset-list"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.openseaAssets.assets,(me,we)=>(openBlock(),createBlock("li",{class:"asset",key:we},[createVNode("div",{class:"image",style:{backgroundImage:`url('${e.getTargetProxyURL(me.image_url)}')`}},[createVNode(O,{class:"contract",href:e.getEtherscanURL(me.asset_contract.address),onClick:ae=>e.handleGTagEvent("asset_contract_link",me.name)},{default:withCtx(()=>[createVNode("i",{class:"iconfont icon-coin"}),createVNode("span",{class:"text"},toDisplayString(me.asset_contract.schema_name),1)]),_:2},1032,["href","onClick"]),me.external_link?(openBlock(),createBlock(O,{key:0,class:"external",href:me.external_link,onClick:ae=>e.handleGTagEvent("asset_external_link",me.name)},{default:withCtx(()=>[createVNode("i",{class:"iconfont icon-new-window-s"})]),_:2},1032,["href","onClick"])):createCommentVNode("",!0),createVNode("div",{class:"links"},[me.collection.discord_url?(openBlock(),createBlock(O,{key:0,class:"item",href:me.collection.discord_url,onClick:ae=>e.handleGTagEvent("asset_collection_discord_url",me.name)},{default:withCtx(()=>[createVNode("i",{class:"iconfont icon-discord"})]),_:2},1032,["href","onClick"])):createCommentVNode("",!0),me.collection.telegram_url?(openBlock(),createBlock(O,{key:1,class:"item",href:me.collection.telegram_url,onClick:ae=>e.handleGTagEvent("asset_collection_telegram_url",me.name)},{default:withCtx(()=>[createVNode("i",{class:"iconfont icon-telegram"})]),_:2},1032,["href","onClick"])):createCommentVNode("",!0)])],4),createVNode("div",{class:"content"},[createVNode(O,{class:"name",title:me.name,href:me.permalink,onClick:ae=>e.handleGTagEvent("asset_name_link",me.name)},{default:withCtx(()=>[createTextVNode(toDisplayString(me.name),1)]),_:2},1032,["title","href","onClick"]),createVNode(O,{class:"collection",title:me.collection.name,href:e.getOpenSeaCollectionURL(me.collection.slug),onClick:ae=>e.handleGTagEvent("asset_collection_link",me.name)},{default:withCtx(()=>[createTextVNode(toDisplayString(me.collection.name),1)]),_:2},1032,["title","href","onClick"]),createVNode("div",{class:"description",title:me.description},[createVNode(V,{markdown:me.description,sanitize:!0,compact:!0},null,8,["markdown"])],8,["title"])])]))),128))])]}),_:1},W,Z)),U(`<div class="viewmore" data-v-a933e24f${Z}>`),U(ssrRenderComponent(O,{class:"link",href:e.VALUABLE_LINKS.OPENSEA},{default:withCtx((re,oe,se,ce)=>{if(oe)oe(ssrRenderComponent(E,null,{zh:withCtx((me,we,ae,Ce)=>{if(we)we(` \u5728 <i class="iconfont icon-opensea" data-v-a933e24f${Ce}></i> OpenSea \u67E5\u770B\u66F4\u591A NFTs `);else return[createTextVNode(" \u5728 "),createVNode("i",{class:"iconfont icon-opensea"}),createTextVNode(" OpenSea \u67E5\u770B\u66F4\u591A NFTs ")]}),en:withCtx((me,we,ae,Ce)=>{if(we)we(` View all NFTs on <i class="iconfont icon-opensea" data-v-a933e24f${Ce}></i> OpenSea `);else return[createTextVNode(" View all NFTs on "),createVNode("i",{class:"iconfont icon-opensea"}),createTextVNode(" OpenSea ")]}),_:1},se,ce));else return[createVNode(E,null,{zh:withCtx(()=>[createTextVNode(" \u5728 "),createVNode("i",{class:"iconfont icon-opensea"}),createTextVNode(" OpenSea \u67E5\u770B\u66F4\u591A NFTs ")]),en:withCtx(()=>[createTextVNode(" View all NFTs on "),createVNode("i",{class:"iconfont icon-opensea"}),createTextVNode(" OpenSea ")]),_:1})]}),_:1},W,Z)),U("</div>");else return[createVNode(N,{data:e.openseaAssets.assets.length,loading:e.openseaAssets.fetching},{placeholder:withCtx(()=>[createVNode(L,{class:"asset-empty",key:"empty"},{default:withCtx(()=>[createTextVNode("NULL")]),_:1})]),loading:withCtx(()=>[createVNode("ul",{class:"asset-skeleton",key:"skeleton"},[(openBlock(),createBlock(Fragment,null,renderList(8,re=>createVNode("li",{key:re,class:"item"},[createVNode(S,{class:"image"}),createVNode(P,{class:"paragraph",lines:4,align:!0,"line-height":"1em"})])),64))])]),default:withCtx(()=>[createVNode("ul",{class:"asset-list"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.openseaAssets.assets,(re,oe)=>(openBlock(),createBlock("li",{class:"asset",key:oe},[createVNode("div",{class:"image",style:{backgroundImage:`url('${e.getTargetProxyURL(re.image_url)}')`}},[createVNode(O,{class:"contract",href:e.getEtherscanURL(re.asset_contract.address),onClick:se=>e.handleGTagEvent("asset_contract_link",re.name)},{default:withCtx(()=>[createVNode("i",{class:"iconfont icon-coin"}),createVNode("span",{class:"text"},toDisplayString(re.asset_contract.schema_name),1)]),_:2},1032,["href","onClick"]),re.external_link?(openBlock(),createBlock(O,{key:0,class:"external",href:re.external_link,onClick:se=>e.handleGTagEvent("asset_external_link",re.name)},{default:withCtx(()=>[createVNode("i",{class:"iconfont icon-new-window-s"})]),_:2},1032,["href","onClick"])):createCommentVNode("",!0),createVNode("div",{class:"links"},[re.collection.discord_url?(openBlock(),createBlock(O,{key:0,class:"item",href:re.collection.discord_url,onClick:se=>e.handleGTagEvent("asset_collection_discord_url",re.name)},{default:withCtx(()=>[createVNode("i",{class:"iconfont icon-discord"})]),_:2},1032,["href","onClick"])):createCommentVNode("",!0),re.collection.telegram_url?(openBlock(),createBlock(O,{key:1,class:"item",href:re.collection.telegram_url,onClick:se=>e.handleGTagEvent("asset_collection_telegram_url",re.name)},{default:withCtx(()=>[createVNode("i",{class:"iconfont icon-telegram"})]),_:2},1032,["href","onClick"])):createCommentVNode("",!0)])],4),createVNode("div",{class:"content"},[createVNode(O,{class:"name",title:re.name,href:re.permalink,onClick:se=>e.handleGTagEvent("asset_name_link",re.name)},{default:withCtx(()=>[createTextVNode(toDisplayString(re.name),1)]),_:2},1032,["title","href","onClick"]),createVNode(O,{class:"collection",title:re.collection.name,href:e.getOpenSeaCollectionURL(re.collection.slug),onClick:se=>e.handleGTagEvent("asset_collection_link",re.name)},{default:withCtx(()=>[createTextVNode(toDisplayString(re.collection.name),1)]),_:2},1032,["title","href","onClick"]),createVNode("div",{class:"description",title:re.description},[createVNode(V,{markdown:re.description,sanitize:!0,compact:!0},null,8,["markdown"])],8,["title"])])]))),128))])]),_:1},8,["data","loading"]),createVNode("div",{class:"viewmore"},[createVNode(O,{class:"link",href:e.VALUABLE_LINKS.OPENSEA},{default:withCtx(()=>[createVNode(E,null,{zh:withCtx(()=>[createTextVNode(" \u5728 "),createVNode("i",{class:"iconfont icon-opensea"}),createTextVNode(" OpenSea \u67E5\u770B\u66F4\u591A NFTs ")]),en:withCtx(()=>[createTextVNode(" View all NFTs on "),createVNode("i",{class:"iconfont icon-opensea"}),createTextVNode(" OpenSea ")]),_:1})]),_:1},8,["href"])])]}),_:1},n)),t("</div>")}const _sfc_setup$C=_sfc_main$C.setup;_sfc_main$C.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/nft.vue"),_sfc_setup$C?_sfc_setup$C(e,t):void 0};const NftPage=_export_sfc(_sfc_main$C,[["ssrRender",_sfc_ssrRender$C],["__scopeId","data-v-a933e24f"]]);var CategorySlug=(e=>(e.Code="code",e.Insight="insight",e))(CategorySlug||{}),RouteName=(e=>(e.Home="home",e.Article="article-detail",e.CategoryFlow="category-flow",e.TagFlow="tag-flow",e.DateFlow="date-flow",e.SearchFlow="search-flow",e.Archive="archive",e.Guestbook="guestbook",e.About="about",e.Lens="lens",e.App="app",e.Nft="nft",e.Sponsor="sponsor",e.Error="error",e))(RouteName||{});const routes=[{path:"/",name:"home",components:{default:IndexFlowPage,mobile:MobileFlow},meta:{responsive:!0,ssrCacheAge:60*2}},{path:"/article/:article_id",name:"article-detail",components:{default:ArticleDetailPage,mobile:ArticleDetailPage},props:{default:e=>({articleId:Number(e.params.article_id)}),mobile:e=>({isMobile:!0,articleId:Number(e.params.article_id)})},meta:{responsive:!0,ssrCacheAge:30,async validate({route:e,i18n:t}){if(!Number.isInteger(Number(e.params.article_id)))return Promise.reject({code:BAD_REQUEST,message:t.t(LanguageKey.QUERY_PARAMS_ERROR)+"Article ID \u2192 <number>"})}}},{path:"/category/:category_slug",name:"category-flow",components:{default:CategoryFlowPage,mobile:MobileFlow},props:{default:e=>({categorySlug:e.params.category_slug}),mobile:e=>({categorySlug:e.params.category_slug})},meta:{responsive:!0,ssrCacheAge:60*2,async validate({route:e,i18n:t}){const{category_slug:n}=e.params;if(!n)return Promise.reject({code:BAD_REQUEST,message:t.t(LanguageKey.QUERY_PARAMS_ERROR)+"Category slug \u2192 <string>"})}}},{path:"/tag/:tag_slug",name:"tag-flow",components:{default:TagFlowPage,mobile:MobileFlow},props:{default:e=>({tagSlug:e.params.tag_slug}),mobile:e=>({tagSlug:e.params.tag_slug})},meta:{responsive:!0,ssrCacheAge:60*2,async validate({route:e,i18n:t}){const{tag_slug:n}=e.params;if(!n)return Promise.reject({code:BAD_REQUEST,message:t.t(LanguageKey.QUERY_PARAMS_ERROR)+"Tag slug \u2192 <string>"})}}},{path:"/date/:date",name:"date-flow",components:{default:DateFlowPage,mobile:MobileFlow},props:{default:e=>({date:e.params.date}),mobile:e=>({date:e.params.date})},meta:{responsive:!0,ssrCacheAge:60*60*24,async validate({route:e,i18n:t}){const{date:n}=e.params;if(!n||!isValidDateParam(n))return Promise.reject({code:BAD_REQUEST,message:t.t(LanguageKey.QUERY_PARAMS_ERROR)+`Invalid date ${n||""}`})}}},{path:"/search/:keyword",name:"search-flow",components:{default:SearchFlowPage,mobile:MobileFlow},props:{default:e=>({keyword:e.params.keyword}),mobile:e=>({searchKeyword:e.params.keyword})},meta:{responsive:!0,ssrCacheAge:!1,async validate({route:e,i18n:t}){if(!e.params.keyword)return Promise.reject({code:BAD_REQUEST,message:t.t(LanguageKey.QUERY_PARAMS_ERROR)+"Keywords ?"})}}},{path:"/archive",name:"archive",components:{default:DesktopArchivePage,mobile:MobileArchivePage},meta:{responsive:!0,layout:LayoutColumn.Full,ssrCacheAge:60*60}},{path:"/about",name:"about",components:{default:DesktopAboutPage,mobile:MobileAboutPage},meta:{responsive:!0,layout:LayoutColumn.Full,ssrCacheAge:60*60*4}},{path:"/guestbook",name:"guestbook",components:{default:GuestbookPage,mobile:GuestbookPage},props:{mobile:{isMobile:!0}},meta:{responsive:!0,ssrCacheAge:60*1}},{path:"/app",name:"app",components:{default:AppPage,mobile:AppPage},props:{mobile:{isMobile:!0}},meta:{responsive:!0,layout:LayoutColumn.Full,ssrCacheAge:1/0}},{path:"/lens",name:"lens",component:LensPage,meta:{responsive:!1,layout:LayoutColumn.Full,ssrCacheAge:60*60*1}},{path:"/nft",name:"nft",component:NftPage,meta:{responsive:!1,layout:LayoutColumn.Full,ssrCacheAge:60*60*.5}},{path:"/sponsor",name:"sponsor",component:SponsorPage,meta:{responsive:!1,layout:LayoutColumn.Full,ssrCacheAge:1/0}},{name:"error",path:"/:error(.*)",component:{},meta:{ssrCacheAge:!1,async validate({i18n:e}){return Promise.reject({code:NOT_FOUND,message:e.t(LanguageKey.NOT_FOUND)})}}}],createUniversalRouter=e=>{const t=createRouter({routes,strict:!0,history:e.history,linkActiveClass:"link-active",scrollBehavior:()=>scrollToPageTop()});return e.beforeMiddleware&&(Array.isArray(e.beforeMiddleware)?e.beforeMiddleware.forEach(t.beforeResolve):t.beforeResolve(e.beforeMiddleware)),e.afterMiddleware&&(Array.isArray(e.afterMiddleware)?e.afterMiddleware.forEach(t.afterEach):t.afterEach(e.afterMiddleware)),t},getTagFlowRoute=e=>`/tag/${e}`,getCategoryFlowRoute=e=>`/category/${e}`,getDateFlowRoute=e=>`/date/${e}`,getArticleDetailRoute=e=>`/article/${e}`,getPageRoute=e=>`/${e}`,isArticleDetail=e=>e===RouteName.Article,isSearchFlow=e=>e===RouteName.SearchFlow,relink=(text,tagMap)=>{const tagNames=Object.keys(tagMap).sort((e,t)=>t.length-e.length),tagRegexp=eval(`/${tagNames.join("|")}/ig`);try{return new URL(text),text}catch(e){return text.replace(tagRegexp,t=>{const n=tagMap.get(t);if(!n||text[0]==="#")return t;const r=n.slug,c=getTagFlowRoute(r),d=`window.$app.config.globalProperties.$router.push({ path: '${c}' });return false`;return`<a href="${c}" title="${n.description}" onclick="${d}">${t}</a>`})}},trimHTML=e=>e.replace(/\s+/g," ").replace(/\n/g," "),sanitizeHTML=e=>e,getRenderer=e=>{const t=new Renderer;return t.text=n=>e!=null&&e.text?e.text(n):n,t.html=n=>{const r=n.trim(),c=CUSTOM_ELEMENT_LIST.reduce((d,g)=>g.transform(d),r);return e!=null&&e.sanitize?sanitizeHTML(escape$3(c)):c},t.heading=(n,r,c)=>{const d=e!=null&&e.headingID?`id="${e.headingID(n,r,c)}"`:"",g=escape$3(c);return`<h${r} ${d} alt="${g}" title="${g}">${n}</h${r}>`},t.paragraph=n=>{const r=n.trim();return["p","div","figure"].some(d=>r.startsWith(`<${d}`)&&r.endsWith(`</${d}>`))?n:`<p>${n}</p>`},t.checkbox=n=>n?'<i class="checkbox checked iconfont icon-checkbox-selected"></i>':'<i class="checkbox iconfont icon-checkbox-unselected"></i>',t.link=(n,r,c)=>{const d=n==null?void 0:n.startsWith(META.url),g=c.includes("<img"),o=e!=null&&e.sanitize?escape$3(c):c,v=e!=null&&e.sanitize?sanitizeUrl_1(n):n,x=e!=null&&e.sanitize?escape$3(r):r;return sanitizeHTML(trimHTML(`
        <a
          href="${v}"
          target="_blank"
          class="${g?"image-link":"link"}"
          title="${x||(g?v:o)}"
          ${d?"":'rel="external nofollow noopener"'}
        >${o}</a>
      `))},t.image=(n,r,c)=>{var v;const d=(v=sanitizeUrl_1(n))==null?void 0:v.replace(/^http:\/\//gi,`${API_CONFIG.PROXY}/`),g=sanitizeHTML(escape$3(r||c)),o=sanitizeHTML(escape$3(c));return trimHTML(`
      <div class="figure-wrapper">
        <figure class="image ${o?"caption":""}" data-status="loading">
          <div class="placeholder error">
            <i class="iconfont icon-image-error"></i>
          </div>
          <div class="placeholder loading">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
          <img
            class="${LOZAD_CLASS_NAME}"
            data-src="${d}"
            ${o?`alt="${o}"`:""}
            ${g?`title="${g}"`:""}
            onload="this.parentElement.dataset.status = 'loaded'"
            onerror="this.parentElement.dataset.status = 'error'"
            onclick="window.$popup.vImage(this.src)"
          />
          ${o?`<figcaption>${o}</figcaption>`:""}
        </figure>
      </div>
    `)},t.code=function(n,r,c){if(t.options.highlight){const o=t.options.highlight(n,r||"");o!=null&&o!==n&&(c=!0,n=o)}const d=n.split(`
`).map((o,v)=>`<li class="code-line-number">${v+1}</li>`.replace(/\s+/g," ")).join(""),g=`
      contenteditable="true"
      oncut="return false"
      onpaste="return false"
      onkeydown="if(event.metaKey) return true; return false;"
    `;return r?`
        <pre data-lang="${r}">
          <ul class="code-lines">${d}</ul>
          <code
            ${g}
            class="${t.options.langPrefix}${encodeURI(r)}"
          >${c?n:encodeURI(n)}
</code>
        </pre>

      `:`
        <pre>
          <ul class="code-lines">${d}</ul>
          <code ${g}>${c?n:encodeURI(n)}
</code>
        </pre>
      `},t};marked.setOptions({gfm:!0,breaks:!1,pedantic:!1,smartLists:!0,smartypants:!1,langPrefix:"hljs language-",highlight(e,t){return HighlightJS.getLanguage(t)?HighlightJS.highlight(e,{language:t}).value:HighlightJS.highlightAuto(e).value}});const markdownToHTML=(e,t)=>{if(!e||typeof e!="string")return"";const n={headingID:t==null?void 0:t.headingIDRenderer};return t!=null&&t.relink&&(n.text=r=>relink(r,t.tagMap)),t!=null&&t.sanitize&&(n.sanitize=!0),marked.parse(e,{renderer:getRenderer(n)})},ARTICLE_API_PATH="/article",useArticleListStore=pinia_prod.defineStore("articleList",{state:()=>({hotList:{fetched:!1,fetching:!1,data:[]},list:{fetching:!1,data:[],pagination:null}}),actions:{fetchList(e={}){const t=!e.page||e.page===1,n=!t&&e.page>1;return t&&(this.list.data=[],this.list.pagination=null),this.list.fetching=!0,nodepress$1.get(ARTICLE_API_PATH,{params:e}).then(d=>{n?(this.list.data.push(...d.result.data),this.list.pagination=d.result.pagination):(this.list.data=d.result.data,this.list.pagination=d.result.pagination)}).finally(()=>{this.list.fetching=!1})},fetchHottestList(){return this.hotList.fetched?Promise.resolve():(this.hotList.fetching=!0,nodepress$1.get(`${ARTICLE_API_PATH}/hottest`).then(e=>{this.hotList.data=e.result,this.hotList.fetched=!0}).finally(()=>{this.hotList.fetching=!1}))}}}),renderArticleMarkdown=e=>{const t=[];return{html:markdownToHTML(e,{sanitize:!1,relink:!1,headingIDRenderer:(r,c,d)=>{const g=getArticleContentHeadingElementID(c,d.toLowerCase().replace(/[^a-zA-Z0-9\u4E00-\u9FA5]+/g,"-"));return t.push({level:c,id:g,text:d}),g}}),headings:t}},useArticleDetailStore=pinia_prod.defineStore("articleDetail",{state:()=>({fetching:!1,article:null,prevArticle:null,nextArticle:null,relatedArticles:[],renderedFullContent:!0}),getters:{contentLength(){var e;return((e=this.article)==null?void 0:e.content.length)||0},readMinutes(){const e=Math.round(this.contentLength/400);return e<1?1:e},isLongContent(){return Boolean(this.article&&this.contentLength>=LONG_ARTICLE_THRESHOLD)},splitIndex(){if(!this.article||!this.isLongContent)return null;const e=Math.min(LONG_ARTICLE_THRESHOLD,Math.floor(this.contentLength/2)),t=this.article.content.substring(0,e),n=t.lastIndexOf(`
##### `),r=t.lastIndexOf(`
#### `),c=t.lastIndexOf(`
### `),d=t.lastIndexOf(`


`);return Math.max(n,r,c,d)},defaultContent(){if(!this.article)return null;const e=this.isLongContent?this.article.content.substring(0,this.splitIndex):this.article.content,{html:t,headings:n}=renderArticleMarkdown(e);return{markdown:e,html:t,headings:n}},moreContent(){if(this.article&&this.isLongContent){const e=this.article.content.substring(this.splitIndex),{html:t,headings:n}=renderArticleMarkdown(e);return{markdown:e,html:t,headings:n}}return null}},actions:{renderFullContent(){this.renderedFullContent=!0},fetchArticleDetail(e){return this.article=null,nodepress$1.get(`${ARTICLE_API_PATH}/${e}`).then(r=>{this.article=r.result,this.renderedFullContent=!this.isLongContent})},fetchArticleContext(e){return this.prevArticle=null,this.nextArticle=null,this.relatedArticles=[],nodepress$1.get(`${ARTICLE_API_PATH}/${e}/context`).then(t=>{this.prevArticle=t.result.prev_article,this.nextArticle=t.result.next_article,this.relatedArticles=t.result.related_articles})},fetchCompleteArticle(e){return this.fetching=!0,Promise.all([this.fetchArticleDetail(e.articleID),this.fetchArticleContext(e.articleID)]).finally(()=>{this.fetching=!1})},postArticleLike(e){const t=useIdentityStore();return nodepress$1.post("/vote/post",{post_id:e,vote:1,author:t.author}).then(n=>{this.article&&(this.article.meta.likes=n.result)})}}}),useAnnouncementStore=defineFetchStore({id:"announcement",initData:[],cleanWhenRefetch:!0,async fetcher(e){return(await nodepress$1.get("/announcement",{params:e})).result.data}}),useWallpaperStore=defineFetchStore({id:"wallpaper",initData:null,onlyOnce:!0,fetcher:()=>tunnel$1.dispatch(TunnelModule.BingWallpaper),getters:{papers:e=>t=>{var n;return(n=e.data)==null?void 0:n[t]}}}),useOpenSeaAssetsStore=defineFetchStore({id:"openseaAssets",initData:null,fetcher:()=>tunnel$1.dispatch(TunnelModule.OpenSeaAssets),getters:{assets:e=>{var t,n;return(n=(t=e.data)==null?void 0:t.assets)!=null?n:[]}}}),useOpenSeaCollectionsStore=defineFetchStore({id:"openseaCollections",initData:[],fetcher:()=>tunnel$1.dispatch(TunnelModule.OpenSeaCollections),getters:{assetsCount:e=>e.data.reduce((t,n)=>t+n.stats.count,0),totalVolume:e=>e.data.reduce((t,n)=>t+n.stats.total_volume,0),totalSales:e=>e.data.reduce((t,n)=>t+n.stats.total_sales,0),floorPrice:e=>Math.min(...e.data.map(t=>t.stats.floor_price)),average_price:e=>e.data.reduce((n,r)=>n+r.stats.average_price,0)/e.data.length}}),useArticleCalendarStore=defineFetchStore({id:"articleCalendar",initData:[],onlyOnce:!0,async fetcher(){return(await nodepress$1.get("/article/calendar",{params:{timezone:Intl.DateTimeFormat().resolvedOptions().timeZone}})).result}}),useTwitterCalendarStore=defineFetchStore({id:"twitterCalendar",initData:[],onlyOnce:!0,fetcher:()=>tunnel$1.dispatch(TunnelModule.TwitterCalendar)}),useInstagramCalendarStore=defineFetchStore({id:"instagramCalendar",initData:[],onlyOnce:!0,fetcher:()=>tunnel$1.dispatch(TunnelModule.InstagramCalendar)}),useGitHubCalendarStore=defineFetchStore({id:"githubContributionsCalendar",initData:null,onlyOnce:!0,fetcher:()=>tunnel$1.dispatch(TunnelModule.GitHubContributions),getters:{days(e){return e.data?e.data.weeks.map(t=>t.contributionDays).flat().map(t=>({date:t.date,count:t.contributionCount,color:t.color})):[]}}}),useStores=e=>({announcement:useAnnouncementStore(e),articleList:useArticleListStore(e),articleDetail:useArticleDetailStore(e),category:useCategoryStore(e),tag:useTagStore(e),comment:useCommentStore(e),archive:useArchiveStore(e),identity:useIdentityStore(e),adminInfo:useAdminInfoStore(e),appOption:useAppOptionStore(e),wallpaper:useWallpaperStore(e),nodepressStatistic:useNodepressStatisticStore(e),githubStatistic:useGitHubStatisticStore(e),npmStatistic:useNPMStatisticStore(e),articleCalendar:useArticleCalendarStore(e),twitterCalendar:useTwitterCalendarStore(e),instagramCalendar:useInstagramCalendarStore(e),githubCalendar:useGitHubCalendarStore(e),doubanMovies:useDoubanMoviesStore(e),instagramMedias:useInstagramMediasStore(e),youtubePlayList:useYouTubePlayListStore(e),twitterUserinfo:useTwitterUserinfoStore(e),twitterTweets:useTwitterTweetsStore(e),openseaAssets:useOpenSeaAssetsStore(e),openseaCollections:useOpenSeaCollectionsStore(e)}),createUniversalStore=e=>{const t=pinia_prod.createPinia(),n=()=>{const r=useStores(t),c=[r.category.fetch(),r.tag.fetch(),r.appOption.fetch()];return e.globalState.userAgent.isMobile||c.push(r.articleList.fetchHottestList()),Promise.all(c)};return{get stores(){return useStores(t)},state:t.state,install:t.install,serverPrefetch:n,initOnSSRClient(){const r=getSSRContext("store");r?t.state.value=r:n()},initOnSPAClient(){return useStores(t).identity.initOnClient(),n()}}},_sfc_main$B=defineComponent({name:"Webfont",props:{bolder:{type:Boolean,default:!1},boldZh:{type:Boolean,default:!1},boldEn:{type:Boolean,default:!0},uppercase:{type:Boolean,default:!1}},setup(){const{isZhLang:e}=useEnhancer();return{isZhLang:e}}}),webfont_vue_vue_type_style_index_0_scoped_90d3669c_lang="";function _sfc_ssrRender$B(e,t,n,r,c,d,g,o){t(`<span${ssrRenderAttrs(mergeProps({class:["webfont",[e.bolder?"bolder":"medium",e.isZhLang?"zh":"en",{boldZh:e.boldZh},{boldEn:e.boldEn},{uppercase:e.uppercase}]]},r))} data-v-90d3669c>`),ssrRenderSlot(e.$slots,"default",{},null,t,n),t("</span>")}const _sfc_setup$B=_sfc_main$B.setup;_sfc_main$B.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/common/webfont.vue"),_sfc_setup$B?_sfc_setup$B(e,t):void 0};const Webfont=_export_sfc(_sfc_main$B,[["ssrRender",_sfc_ssrRender$B],["__scopeId","data-v-90d3669c"]]),_sfc_main$A=defineComponent({name:"Spin",props:{loading:{type:Boolean,default:!0},color:{type:String,default:"rgba(197, 197, 197, 0.4)"},height:{type:String,default:"15px"},width:{type:String,default:"15px"},margin:{type:String,default:"5px"}},data(){return{spinnerStyle:{backgroundColor:this.color,height:this.height,width:this.width,margin:this.margin}}}}),spin_vue_vue_type_style_index_0_scoped_4ef1f0df_lang="";function _sfc_ssrRender$A(e,t,n,r,c,d,g,o){t(`<div${ssrRenderAttrs(mergeProps({style:e.loading?null:{display:"none"},class:"spinner-box"},r))} data-v-4ef1f0df><div class="spinner-inner" data-v-4ef1f0df><div class="la-ball-beat" data-v-4ef1f0df><div style="${ssrRenderStyle(e.spinnerStyle)}" data-v-4ef1f0df></div><div style="${ssrRenderStyle(e.spinnerStyle)}" data-v-4ef1f0df></div><div style="${ssrRenderStyle(e.spinnerStyle)}" data-v-4ef1f0df></div></div></div></div>`)}const _sfc_setup$A=_sfc_main$A.setup;_sfc_main$A.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/common/spin.vue"),_sfc_setup$A?_sfc_setup$A(e,t):void 0};const Spin=_export_sfc(_sfc_main$A,[["ssrRender",_sfc_ssrRender$A],["__scopeId","data-v-4ef1f0df"]]),_sfc_main$z=defineComponent({name:"Empty",props:{placeholder:String,i18nKey:String},setup(){return{LanguageKey}}}),empty_vue_vue_type_style_index_0_scoped_1a452937_lang="";function _sfc_ssrRender$z(e,t,n,r,c,d,g,o){const v=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:"empty"},r))} data-v-1a452937>`),ssrRenderSlot(e.$slots,"default",{},()=>{e.placeholder?t(`<!--[-->${ssrInterpolate(e.placeholder)}<!--]-->`):t(ssrRenderComponent(v,{k:e.i18nKey||e.LanguageKey.EMPTY_PLACEHOLDER},null,n))},t,n),t("</div>")}const _sfc_setup$z=_sfc_main$z.setup;_sfc_main$z.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/common/empty.vue"),_sfc_setup$z?_sfc_setup$z(e,t):void 0};const Empty=_export_sfc(_sfc_main$z,[["ssrRender",_sfc_ssrRender$z],["__scopeId","data-v-1a452937"]]),_sfc_main$y=defineComponent({name:"Divider",props:{type:{type:String,default:"horizontal"},dashed:{type:Boolean,default:!1},size:{type:String,default:"default"}}}),divider_vue_vue_type_style_index_0_scoped_baa38ba2_lang="";function _sfc_ssrRender$y(e,t,n,r,c,d,g,o){t(`<div${ssrRenderAttrs(mergeProps({role:"separator",class:["divider",[e.type,e.size,{dashed:e.dashed},{slot:e.$slots.default}]]},r))} data-v-baa38ba2>`),ssrRenderSlot(e.$slots,"default",{},null,t,n),t("</div>")}const _sfc_setup$y=_sfc_main$y.setup;_sfc_main$y.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/common/divider.vue"),_sfc_setup$y?_sfc_setup$y(e,t):void 0};const Divider=_export_sfc(_sfc_main$y,[["ssrRender",_sfc_ssrRender$y],["__scopeId","data-v-baa38ba2"]]),Udate=defineComponent({name:"Udate",props:{to:{type:String,required:!0},date:{type:[String,Number,Date],required:!0},separator:{type:String,default:"-"}},setup(e){const{i18n:t}=useEnhancer();return()=>{const n=e.date instanceof Date?e.date:new Date(e.date);if(e.to==="YMD")return dateToYMD(n,e.separator);if(e.to==="YMDm"){const r=dateToYMD(n,e.separator),c=n.getHours()>11?t.t(LanguageKey.MOMENT_PM):t.t(LanguageKey.MOMENT_AM);return`${r} ${c}`}if(e.to==="ago"){const r=(E,k)=>{const S=`${E} ${k}`;return t.t(LanguageKey.MOMENT_AGO,null,{date:S})},c=Date.now()/1e3-Number(n)/1e3,d=3600,g=d*24,o=g*7,v=g*30,x=v*12;return c<d?~~(c/60)===0?t.t(LanguageKey.MOMENT_JUST_NOW):r(~~(c/60),t.t(LanguageKey.MOMENT_MINUTES)):c<g?r(~~(c/d),t.t(LanguageKey.MOMENT_HOURS)):c<o?r(~~(c/g),t.t(LanguageKey.MOMENT_DAYS)):c<v?r(~~(c/o),t.t(LanguageKey.MOMENT_WEEKS)):c<x?r(~~(c/v),t.t(LanguageKey.MOMENT_MONTHS)):r(~~(c/x),t.t(LanguageKey.MOMENT_YEAR))}return null}}}),Ulink=defineComponent({name:"Ulink",props:{...RouterLink.props,to:String,href:String,external:{type:Boolean,default:!0},blank:{type:Boolean,default:!0}},setup(e,t){return()=>{var v,x;const{to:n,href:r,external:c,blank:d,...g}=e,o={...t.attrs};if(n&&!n.startsWith("http")){const E={to:n,...g};return h(RouterLink,E,t.slots.default)}return c&&(o.rel="external nofollow noopener"),d&&(o.target="_blank"),h("a",{...o,href:r||n},(x=(v=t.slots).default)==null?void 0:x.call(v))}}}),Uimage=defineComponent({name:"Uimage",props:{src:{type:String,required:!0},cdn:{type:Boolean,default:!1},proxy:{type:[Boolean,String],default:!1},defer:{type:Boolean,default:!1}},setup(e){useEnhancer();const t=ref(!1);return e.defer,()=>{const{src:n,cdn:r,proxy:c,defer:d,...g}=e;let o=n;return r&&(o=getTargetCDNURL(n)),c&&(o=getTargetProxyURL(n,c===!0?ProxyModule.Default:c)),d&&!t.value?null:h("img",{draggable:!1,...g,src:o})}}}),Placeholder=defineComponent({name:"Placeholder",props:{data:{type:[Array,Object,Boolean,Number],default:void 0},transition:{type:Boolean,default:!0},transitionName:{type:String,default:"module"},placeholder:String,i18nKey:String,loading:Boolean},emits:["after-enter"],setup(e,t){return()=>{const{data:n,placeholder:r,i18nKey:c,loading:d,transition:g,transitionName:o}=e,v=n!==void 0&&(Array.isArray(n)&&!n.length||!n),x=()=>{var N,L;return r||c?h(Empty,{placeholder:r,i18nKey:c}):(L=(N=t.slots).placeholder)==null?void 0:L.call(N)},E=()=>{var N,L;return v?x():(L=(N=t.slots).default)==null?void 0:L.call(N)},k=()=>{var N,L;return((L=(N=t.slots).loading)==null?void 0:L.call(N))||h(Spin,{loading:!0})},S=()=>d?k():E();return g?h(Transition,{name:o,mode:"out-in",onAfterEnter(...N){t.emit("after-enter",...N)}},()=>S()):S()}}}),ClientOnly=defineComponent({name:"ClientOnly",props:{placeholder:String,placeholderTag:{type:String,default:"div"},transition:{type:Boolean,default:!1},delay:{type:Number,default:0}},setup(e,t){const{globalState:n}=useEnhancer(),r=ref(!!n.isHydrated.value);onMounted(()=>{if(!n.isHydrated.value){const d=()=>{r.value=!0};e.delay?setTimeout(d,e.delay):d()}});const c=(d,g)=>{if(!e.transition||Array.isArray(d)&&d.length>1)return d;const o=Array.isArray(d)?d[0]:d;return h(Transition,{name:"client-only",mode:"out-in"},()=>o?cloneVNode(o,{key:g}):h("div",{key:"empty",class:"client-only-empty"}))};return()=>{var d,g;return r.value?c((g=(d=t.slots).default)==null?void 0:g.call(d),"result"):t.slots.placeholder?c(t.slots.placeholder(),"placeholder-slot"):e.placeholderTag&&e.placeholder?c(h(e.placeholderTag,{class:"client-only-placeholder"},e.placeholder),"placeholder"):c(null)}}}),Container=defineComponent({name:"Container",props:{tag:{type:String,default:"div"}},setup(e,t){return()=>{var n,r;return h(e.tag,[h("div",{class:"container"},[(r=(n=t.slots).default)==null?void 0:r.call(n)])])}}}),Responsive=defineComponent({name:"Responsive",props:{both:Boolean,desktop:Boolean,mobile:Boolean},setup(e,t){const n=useGlobalState();return()=>{var r,c,d,g,o,v,x,E,k,S;return e.both?(c=(r=t.slots).default)==null?void 0:c.call(r):e.desktop&&!n.userAgent.isMobile?(g=(d=t.slots).default)==null?void 0:g.call(d):e.mobile&&n.userAgent.isMobile?(v=(o=t.slots).default)==null?void 0:v.call(o):n.userAgent.isMobile?(E=(x=t.slots).mobile)==null?void 0:E.call(x):(S=(k=t.slots).desktop)==null?void 0:S.call(k)}}}),DesktopOnly=defineComponent({name:"DesktopOnly",setup(e,t){const n=useGlobalState();return()=>{var r,c;return!n.userAgent.isMobile&&((c=(r=t.slots).default)==null?void 0:c.call(r))}}}),_sfc_main$x=defineComponent({name:"SkeletonBase",props:{width:{type:Number},height:{type:Number},circle:{type:Boolean,default:!1},radius:{type:Number,default:2}},setup(e){return{style:computed(()=>({borderRadius:e.circle?"100%":`${e.radius}px`,...e.width&&{width:e.width+"px"},...e.height&&{height:e.height+"px"}}))}}}),base_vue_vue_type_style_index_0_scoped_f14fd56a_lang="";function _sfc_ssrRender$x(e,t,n,r,c,d,g,o){t(`<div${ssrRenderAttrs(mergeProps({class:"skeleton base",style:e.style},r))} data-v-f14fd56a></div>`)}const _sfc_setup$x=_sfc_main$x.setup;_sfc_main$x.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/common/skeleton/base.vue"),_sfc_setup$x?_sfc_setup$x(e,t):void 0};const SkeletonBase=_export_sfc(_sfc_main$x,[["ssrRender",_sfc_ssrRender$x],["__scopeId","data-v-f14fd56a"]]),_sfc_main$w=defineComponent({name:"SkeletonLine",components:{SkeletonBase},props:{width:{type:Number},height:{type:Number}},setup(e){return{style:computed(()=>({...e.width&&{width:e.width+"px"},...e.height&&{height:e.height+"px"}}))}}}),line_vue_vue_type_style_index_0_scoped_54e88d06_lang="";function _sfc_ssrRender$w(e,t,n,r,c,d,g,o){const v=resolveComponent("skeleton-base");t(`<div${ssrRenderAttrs(mergeProps({class:"skeleton line",style:e.style},r))} data-v-54e88d06>`),t(ssrRenderComponent(v,null,null,n)),t("</div>")}const _sfc_setup$w=_sfc_main$w.setup;_sfc_main$w.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/common/skeleton/line.vue"),_sfc_setup$w?_sfc_setup$w(e,t):void 0};const SkeletonLine=_export_sfc(_sfc_main$w,[["ssrRender",_sfc_ssrRender$w],["__scopeId","data-v-54e88d06"]]),_sfc_main$v=defineComponent({name:"SkeletonParagraph",components:{SkeletonLine},props:{lines:{type:Number,default:1},width:{type:Number},height:{type:Number},align:{type:Boolean,default:!1},lineHeight:{type:String,default:"1rem"}},setup(e){return{style:computed(()=>({...e.width&&{width:e.width+"px"},...e.height&&{height:e.height+"px"}})),getLineStyle:r=>{const c={height:e.lineHeight,marginBottom:r===e.lines-1?"0":`calc(${e.lineHeight} * 0.75)`},d=r%3;if(d){const g=15*d;c.width=`${100-g}%`,c.marginLeft=e.align?"0":"6%"}return c}}}});function _sfc_ssrRender$v(e,t,n,r,c,d,g,o){const v=resolveComponent("skeleton-line");t(`<div${ssrRenderAttrs(mergeProps({class:"skeleton paragraph",style:e.style},r))}><!--[-->`),ssrRenderList(e.lines,(x,E)=>{t(ssrRenderComponent(v,{key:E,style:e.getLineStyle(E),class:"paragraph-line"},null,n))}),t("<!--]--></div>")}const _sfc_setup$v=_sfc_main$v.setup;_sfc_main$v.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/common/skeleton/paragraph.vue"),_sfc_setup$v?_sfc_setup$v(e,t):void 0};const SkeletonParagraph=_export_sfc(_sfc_main$v,[["ssrRender",_sfc_ssrRender$v]]);function component(e){e.component(Webfont.name,Webfont),e.component(Spin.name,Spin),e.component(Empty.name,Empty),e.component(Divider.name,Divider),e.component(Udate.name,Udate),e.component(Ulink.name,Ulink),e.component(Uimage.name,Uimage),e.component(Placeholder.name,Placeholder),e.component(ClientOnly.name,ClientOnly),e.component(Responsive.name,Responsive),e.component(DesktopOnly.name,DesktopOnly),e.component(Container.name,Container),e.component(SkeletonBase.name,SkeletonBase),e.component(SkeletonLine.name,SkeletonLine),e.component(SkeletonParagraph.name,SkeletonParagraph)}const _sfc_main$u=defineComponent({name:"EmojiRain",setup(){const e=ref(null),t=reactive({chambering:!1,kichikuing:!1});return onMounted(()=>{window.$luanchEmojiRain=n=>{!t.chambering&&!t.kichikuing&&(t.chambering=!0,nextTick$1(()=>{e.value.width=document.documentElement.clientWidth||document.body.clientWidth,e.value.height=document.documentElement.clientHeight||document.body.clientHeight,new window.$Emoji233333({base:e.value,scale:.7,speed:12,increaseSpeed:.4,density:5,staggered:!0,emoji:getTargetCDNURL("/images/emojis/funny.png"),...n,onStart(){t.kichikuing=!0},onEnded(){t.kichikuing=!1,t.chambering=!1}}).launch()}))}}),{state:t,rainBase:e}}}),emojiRain_vue_vue_type_style_index_0_scoped_5e790b69_lang="";function _sfc_ssrRender$u(e,t,n,r,c,d,g,o){t(`<div${ssrRenderAttrs(mergeProps({id:"emoji-rain",class:{active:e.state.kichikuing}},r))} data-v-5e790b69>`),e.state.chambering?t('<canvas class="rain-base" data-v-5e790b69></canvas>'):t("<!---->"),t("</div>")}const _sfc_setup$u=_sfc_main$u.setup;_sfc_main$u.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/emoji-rain.vue"),_sfc_setup$u?_sfc_setup$u(e,t):void 0};const EmojiRain=_export_sfc(_sfc_main$u,[["ssrRender",_sfc_ssrRender$u],["__scopeId","data-v-5e790b69"]]),getLayoutByRouteMeta=e=>e.layout===LayoutColumn.Wide?LayoutColumn.Wide:e.layout===LayoutColumn.Full?LayoutColumn.Full:LayoutColumn.Normal,_sfc_main$t=defineComponent({name:"Error",props:{error:{type:Object,required:!0}},emits:["resolve"],setup(e,t){const{isDarkTheme:n}=useEnhancer();return{LanguageKey,isDarkTheme:n,handleResolveRoute:()=>{t.emit("resolve")}}}}),error_vue_vue_type_style_index_0_scoped_3386688e_lang="";function _sfc_ssrRender$t(e,t,n,r,c,d,g,o){const v=resolveComponent("i18n"),x=resolveComponent("uimage");t(`<div${ssrRenderAttrs(mergeProps({class:["error",{dark:e.isDarkTheme}]},r))} data-v-3386688e><h1 class="code" data-v-3386688e>${ssrInterpolate(e.error.code)}</h1><h3 class="message" data-v-3386688e>`),e.error.message?t(`<!--[-->${ssrInterpolate(e.error.message)}<!--]-->`):t(ssrRenderComponent(v,{k:e.LanguageKey.NOT_FOUND},null,n)),t('</h3><p class="link" data-v-3386688e>'),ssrRenderSlot(e.$slots,"resolve-text",{},null,t,n),t("</p>"),t(ssrRenderComponent(x,{cdn:"",class:"logo",src:"/images/logo.svg"},null,n)),t("</div>")}const _sfc_setup$t=_sfc_main$t.setup;_sfc_main$t.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/root/error.vue"),_sfc_setup$t?_sfc_setup$t(e,t):void 0};const ErrorComponent=_export_sfc(_sfc_main$t,[["ssrRender",_sfc_ssrRender$t],["__scopeId","data-v-3386688e"]]),_sfc_main$s=defineComponent({name:"Captured",components:{ErrorComponent},setup(){const{router:e,globalState:t}=useEnhancer(),n=()=>{e.push({name:RouteName.Home}).then(()=>{t.setLayoutColumn(getLayoutByRouteMeta(e.currentRoute.value.meta)),t.setRenderError(null)})};return onErrorCaptured(r=>(t.setRenderError(r),!1)),{error:t.renderError,handleResolveRoute:n,LanguageKey}}});function _sfc_ssrRender$s(e,t,n,r,c,d,g,o){const v=resolveComponent("error-component"),x=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:"captured"},r))}>`),e.error?t(ssrRenderComponent(v,{error:e.error,onResolve:e.handleResolveRoute},{"resolve-text":withCtx((E,k,S,N)=>{if(k)k(ssrRenderComponent(x,{k:e.LanguageKey.BACK_TO_HOME_PAGE},null,S,N));else return[createVNode(x,{k:e.LanguageKey.BACK_TO_HOME_PAGE},null,8,["k"])]}),_:1},n)):ssrRenderSlot(e.$slots,"default",{},null,t,n),t("</div>")}const _sfc_setup$s=_sfc_main$s.setup;_sfc_main$s.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/root/captured.vue"),_sfc_setup$s?_sfc_setup$s(e,t):void 0};const Captured=_export_sfc(_sfc_main$s,[["ssrRender",_sfc_ssrRender$s]]),MusicPlayerSymbol=Symbol("music-player"),useMusic=()=>inject(MusicPlayerSymbol),_sfc_main$r=defineComponent({name:"MusicPlayer",setup(){const t=computed(()=>Boolean(void 0)),n=computed(()=>{});return{VALUABLE_LINKS,player:null,muted:t,currentSong:n,handlePlayByIndex:d=>{},get163MusicSongDetailURL,getSecondsView:d=>{const g=String(Math.floor(d/60)).padStart(2,"0"),o=String(Math.floor(d%60)).padStart(2,"0");return`${g}:${o}`}}}}),player_vue_vue_type_style_index_0_scoped_db4ce6a8_lang="";function _sfc_ssrRender$r(e,t,n,r,c,d,g,o){var x,E,k,S,N,L,P,O,V;const v=resolveComponent("ulink");t(`<div${ssrRenderAttrs(mergeProps({class:"music-player"},r))} data-v-db4ce6a8><div class="panel" data-v-db4ce6a8><div class="song" data-v-db4ce6a8><img class="cover"${ssrRenderAttr("src",(x=e.currentSong)==null?void 0:x.cover_art_url)} draggable="false" data-v-db4ce6a8>`),e.currentSong&&e.player?t(`<div class="info" data-v-db4ce6a8><p class="title" data-v-db4ce6a8><span class="name" data-v-db4ce6a8>${ssrInterpolate(e.currentSong.name)}</span><span class="artist" data-v-db4ce6a8>${ssrInterpolate(e.currentSong.artist)}</span></p><p class="duration" data-v-db4ce6a8><span data-v-db4ce6a8>${ssrInterpolate(e.getSecondsView(e.player.state.speeds))}</span><span data-v-db4ce6a8> / </span><span data-v-db4ce6a8>${ssrInterpolate(e.getSecondsView(e.currentSong.duration/1e3))}</span></p></div>`):t("<!---->"),t(`</div><div class="control" data-v-db4ce6a8><button class="cut-song prev"${includeBooleanAttr(!((k=(E=e.player)==null?void 0:E.state)!=null&&k.ready))?" disabled":""} data-v-db4ce6a8><i class="iconfont icon-music-prev" data-v-db4ce6a8></i></button><button class="toggle-play"${includeBooleanAttr(!((S=e.player)!=null&&S.state.ready))?" disabled":""} data-v-db4ce6a8><i class="${ssrRenderClass([(N=e.player)!=null&&N.state.playing?"icon-music-pause":"icon-music-play","iconfont"])}" data-v-db4ce6a8></i></button><button class="cut-song next"${includeBooleanAttr(!((L=e.player)!=null&&L.state.ready))?" disabled":""} data-v-db4ce6a8><i class="iconfont icon-music-next" data-v-db4ce6a8></i></button></div><div class="tools" data-v-db4ce6a8>`),e.player?t(`<span class="indexed" data-v-db4ce6a8>${ssrInterpolate(e.player.state.index+1)} / ${ssrInterpolate((P=e.player)==null?void 0:P.state.count)}</span>`):t("<!---->"),t(ssrRenderComponent(v,{class:"list-link",href:e.VALUABLE_LINKS.MUSIC_163},{default:withCtx((z,U,W,Z)=>{if(U)U(`<i class="iconfont icon-new-window-s" data-v-db4ce6a8${Z}></i>`);else return[createVNode("i",{class:"iconfont icon-new-window-s"})]}),_:1},n)),t(`<button class="toggle-muted"${includeBooleanAttr(!((O=e.player)!=null&&O.state.ready))?" disabled":""} data-v-db4ce6a8><i class="${ssrRenderClass([e.muted?"icon-music-muted":"icon-music-unmuted","iconfont"])}" data-v-db4ce6a8></i></button></div></div><div class="progress" data-v-db4ce6a8>`),e.player?t(`<div class="played" style="${ssrRenderStyle({width:`${e.player.state.progress}%`})}" data-v-db4ce6a8></div>`):t("<!---->"),t('</div><div class="songs" data-v-db4ce6a8><ul class="list" data-v-db4ce6a8><!--[-->'),ssrRenderList((V=e.player)==null?void 0:V.state.songs,(z,U)=>{var W,Z;t(`<li class="${ssrRenderClass([{playing:((W=e.player)==null?void 0:W.state.index)===U},"item"])}" data-v-db4ce6a8><div class="index" data-v-db4ce6a8>${ssrInterpolate(String(U+1).padStart(2,"0"))}</div>`),((Z=e.player)==null?void 0:Z.state.index)===U?t('<span class="play" data-v-db4ce6a8><i class="iconfont icon-music-unmuted" data-v-db4ce6a8></i></span>'):t('<button class="play" data-v-db4ce6a8><i class="iconfont icon-music-play" data-v-db4ce6a8></i></button>'),t(ssrRenderComponent(v,{class:"name",title:z.name,href:e.get163MusicSongDetailURL(z.id)},{default:withCtx((re,oe,se,ce)=>{if(oe)oe(`<span class="text" data-v-db4ce6a8${ce}>${ssrInterpolate(z.name)}</span><i class="iconfont icon-new-window-s" data-v-db4ce6a8${ce}></i>`);else return[createVNode("span",{class:"text"},toDisplayString(z.name),1),createVNode("i",{class:"iconfont icon-new-window-s"})]}),_:2},n)),t(`<div class="artist"${ssrRenderAttr("title",z.artist)} data-v-db4ce6a8>${ssrInterpolate(z.artist)}</div><div class="duration" data-v-db4ce6a8>${ssrInterpolate(e.getSecondsView(z.duration/1e3))}</div></li>`)}),t("<!--]--></ul></div></div>")}const _sfc_setup$r=_sfc_main$r.setup;_sfc_main$r.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/music-player/player.vue"),_sfc_setup$r?_sfc_setup$r(e,t):void 0};const MusicPlayer=_export_sfc(_sfc_main$r,[["ssrRender",_sfc_ssrRender$r],["__scopeId","data-v-db4ce6a8"]]),_sfc_main$q=defineComponent({name:"MusicPlayerHandle",components:{MusicPlayer},setup(){const{gtag:e}=useEnhancer(),t=null,n=computed(()=>Boolean(t==null?void 0:t.muted.value)),r=computed(()=>t==null?void 0:t.currentSong.value),c=ref(!1);return{LanguageKey,isOnPlayerModel:c,music:t,muted:n,currentSong:r,togglePlayerModel:()=>{c.value=!c.value},handleTouchEvent:o=>{e==null||e.event("music_player_widget",{event_category:GAEventCategories.Widget,event_label:o})}}}}),handle_vue_vue_type_style_index_0_scoped_694321ff_lang="";function _sfc_ssrRender$q(e,t,n,r,c,d,g,o){var S,N;const v=resolveComponent("i18n"),x=resolveComponent("client-only"),E=resolveComponent("popup"),k=resolveComponent("music-player");t("<!--[-->"),(S=e.music)!=null&&S.currentSong.value?(t(`<div id="player" class="${ssrRenderClass({playing:e.music.state.playing})}" data-v-694321ff><div class="panel" data-v-694321ff><div class="control" data-v-694321ff><button class="prev-song button"${includeBooleanAttr(!e.music.state.ready)?" disabled":""} data-v-694321ff><i class="iconfont icon-music-prev" data-v-694321ff></i></button><button class="next-song button"${includeBooleanAttr(!e.music.state.ready)?" disabled":""} data-v-694321ff><i class="iconfont icon-music-next" data-v-694321ff></i></button><button class="muted-toggle button"${includeBooleanAttr(!e.music.state.ready)?" disabled":""} data-v-694321ff><i class="${ssrRenderClass([e.muted?"icon-music-muted":"icon-music-unmuted","iconfont"])}" data-v-694321ff></i></button><button class="player button" data-v-694321ff><i class="iconfont icon-netease-music" data-v-694321ff></i></button></div><button class="song-link" data-v-694321ff>`),e.currentSong?t(`<span data-v-694321ff>${ssrInterpolate(e.currentSong.name)}</span>`):t(ssrRenderComponent(v,{k:e.LanguageKey.MUSIC_PLACEHOLDER},null,n)),t(`</button></div><div class="cd" data-v-694321ff><img class="image"${ssrRenderAttr("src",(N=e.currentSong)==null?void 0:N.cover_art_url)} data-v-694321ff><button class="toggle-button"${includeBooleanAttr(!e.music.state.ready)?" disabled":""} data-v-694321ff><i class="${ssrRenderClass([e.music.state.playing?"icon-music-pause":"icon-music-play","iconfont"])}" data-v-694321ff></i></button></div><div class="trigger" data-v-694321ff><i class="iconfont icon-music" data-v-694321ff></i></div></div>`)):t("<!---->"),t(ssrRenderComponent(x,null,{default:withCtx((L,P,O,V)=>{if(P)P(ssrRenderComponent(E,{visible:e.isOnPlayerModel,"onUpdate:visible":z=>e.isOnPlayerModel=z,"scroll-close":!1},{default:withCtx((z,U,W,Z)=>{if(U)U(ssrRenderComponent(k,{onClose:e.togglePlayerModel},null,W,Z));else return[createVNode(k,{onClose:e.togglePlayerModel},null,8,["onClose"])]}),_:1},O,V));else return[createVNode(E,{visible:e.isOnPlayerModel,"onUpdate:visible":z=>e.isOnPlayerModel=z,"scroll-close":!1},{default:withCtx(()=>[createVNode(k,{onClose:e.togglePlayerModel},null,8,["onClose"])]),_:1},8,["visible","onUpdate:visible"])]}),_:1},n)),t("<!--]-->")}const _sfc_setup$q=_sfc_main$q.setup;_sfc_main$q.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/music-player/handle.vue"),_sfc_setup$q?_sfc_setup$q(e,t):void 0};const MusicPlayerHandle=_export_sfc(_sfc_main$q,[["ssrRender",_sfc_ssrRender$q],["__scopeId","data-v-694321ff"]]),_sfc_main$p=defineComponent({name:"WallFlowerItem",props:{options:{type:Object,required:!0},zIndex:{type:Number,required:!0}},emits:["ended"],setup(e,t){const n=reactive({delay:1,timer:null,playing:!1}),r=computed(()=>({top:e.options.y+"px",left:e.options.x+"px","z-index":99999+e.zIndex})),c=()=>{nextTick$1(()=>{setTimeout(()=>{n.playing=!0}),n.timer=window.setTimeout(()=>{n.playing=!1,nextTick$1(()=>{t.emit("ended",e.options.id)})},n.delay*1e3)})};return c(),onMounted(c),onBeforeUnmount(()=>{n.timer&&(clearTimeout(n.timer),n.timer=null)}),{state:n,styles:r}}}),flower_vue_vue_type_style_index_0_scoped_833e6cc4_lang="";function _sfc_ssrRender$p(e,t,n,r,c,d,g,o){const v=resolveComponent("webfont");t(`<li${ssrRenderAttrs(mergeProps({class:["flower-item",{playing:e.state.playing}],style:e.styles},r))} data-v-833e6cc4>`),t(ssrRenderComponent(v,{bolder:""},{default:withCtx((x,E,k,S)=>{if(E)E(`${ssrInterpolate(e.options.text)}`);else return[createTextVNode(toDisplayString(e.options.text),1)]}),_:1},n)),t("</li>")}const _sfc_setup$p=_sfc_main$p.setup;_sfc_main$p.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/wallflower/flower.vue"),_sfc_setup$p?_sfc_setup$p(e,t):void 0};const Flower=_export_sfc(_sfc_main$p,[["ssrRender",_sfc_ssrRender$p],["__scopeId","data-v-833e6cc4"]]),EN_FLOWERS=["\u{1F499}","\u{1F90D}","\u2764\uFE0F"],ZH_FLOWERS=["\u5BCC\u5F3A","\u6C11\u4E3B","\u6587\u660E","\u548C\u8C10","\u81EA\u7531","\u5E73\u7B49","\u516C\u6B63","\u6CD5\u6CBB","\u7231\u56FD","\u656C\u4E1A","\u8BDA\u4FE1","\u53CB\u5584"],_sfc_main$o=defineComponent({name:"WallFlowerGarden",components:{Flower},setup(){const{isZhLang:e}=useEnhancer(),t=reactive({id:0,flowers:[],contentIndex:-1}),n=c=>{const d=e.value?ZH_FLOWERS:EN_FLOWERS;t.contentIndex++,t.contentIndex>=d.length&&(t.contentIndex=0),t.flowers.push({id:++t.id,x:c.x||c.clientX,y:c.y||c.clientY,text:d[t.contentIndex]})},r=c=>{const d=t.flowers.findIndex(g=>g.id===c);d>-1&&t.flowers.splice(d,1)};return onMounted(()=>window.addEventListener("click",n)),onBeforeUnmount(()=>window.removeEventListener("click",n)),{state:t,handleAnimationEnd:r}}}),garden_vue_vue_type_style_index_0_scoped_19d2393a_lang="";function _sfc_ssrRender$o(e,t,n,r,c,d,g,o){const v=resolveComponent("flower");t(`<div${ssrRenderAttrs(mergeProps({id:"wallflower"},r))} data-v-19d2393a>`),e.state.flowers.length?(t('<ul class="garden-box" data-v-19d2393a><!--[-->'),ssrRenderList(e.state.flowers,(x,E)=>{t(ssrRenderComponent(v,{key:x.id,"z-index":E+1,options:x,onEnded:e.handleAnimationEnd},null,n))}),t("<!--]--></ul>")):t("<!---->"),t("</div>")}const _sfc_setup$o=_sfc_main$o.setup;_sfc_main$o.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/wallflower/garden.vue"),_sfc_setup$o?_sfc_setup$o(e,t):void 0};const Wallflower=_export_sfc(_sfc_main$o,[["ssrRender",_sfc_ssrRender$o],["__scopeId","data-v-19d2393a"]]),_sfc_main$n=defineComponent({name:"WallpaperWall",emits:["close"],setup(e,t){const{i18n:n}=useEnhancer(),r=useWallpaperStore(),c=computed(()=>r.papers(n.language.value)),d=ref(0),g=computed(()=>{var v,x;return((v=c.value)==null?void 0:v.length)&&((x=c.value)==null?void 0:x[d.value])});return{index:d,wallpapers:c,currentWallpaper:g,handleClose:()=>t.emit("close")}}}),wall_vue_vue_type_style_index_0_scoped_d33ed51e_lang="";function _sfc_ssrRender$n(e,t,n,r,c,d,g,o){const v=resolveComponent("ulink");t(`<div${ssrRenderAttrs(mergeProps({class:"wall"},r))} data-v-d33ed51e><div class="picture-box"${ssrRenderAttr("title",e.currentWallpaper.copyright)} style="${ssrRenderStyle({backgroundImage:`url(${e.currentWallpaper.humanizedImageUrl})`})}" data-v-d33ed51e></div><div class="story-box" data-v-d33ed51e>`),e.currentWallpaper.title?t(`<!--[--><h2 class="title" data-v-d33ed51e>${ssrInterpolate(e.currentWallpaper.title)}</h2><p class="sub-title" data-v-d33ed51e>${ssrInterpolate(e.currentWallpaper.copyright)}</p><!--]-->`):t(`<h2 class="title lonely" data-v-d33ed51e>${ssrInterpolate(e.currentWallpaper.copyright)}</h2>`),t(`<p class="desc" data-v-d33ed51e>${ssrInterpolate(e.currentWallpaper.desc)}</p><div class="tools" data-v-d33ed51e>`),t(ssrRenderComponent(v,{class:"button",href:e.currentWallpaper.humanizedCopyrightUrl,title:e.currentWallpaper.bsTitle},{default:withCtx((x,E,k,S)=>{if(E)E(`<i class="iconfont icon-bing" data-v-d33ed51e${S}></i>`);else return[createVNode("i",{class:"iconfont icon-bing"})]}),_:1},n)),t(`<button class="button" title="Prev"${includeBooleanAttr(e.index<=0)?" disabled":""} data-v-d33ed51e><i class="iconfont icon-prev" data-v-d33ed51e></i></button><button class="button" title="Next"${includeBooleanAttr(e.index>=e.wallpapers.length-1)?" disabled":""} data-v-d33ed51e><i class="iconfont icon-next" data-v-d33ed51e></i></button><button class="button" title="Close" data-v-d33ed51e><i class="iconfont icon-cancel" data-v-d33ed51e></i></button></div></div></div>`)}const _sfc_setup$n=_sfc_main$n.setup;_sfc_main$n.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/wallpaper/wall.vue"),_sfc_setup$n?_sfc_setup$n(e,t):void 0};const Wallpapers=_export_sfc(_sfc_main$n,[["ssrRender",_sfc_ssrRender$n],["__scopeId","data-v-d33ed51e"]]),_sfc_main$m=defineComponent({name:"Wallpaper",components:{Wallpapers},setup(){const{i18n:e,gtag:t,isDarkTheme:n}=useEnhancer(),r=useWallpaperStore(),c=computed(()=>r.papers(e.language.value)),d=ref(!1);return{isDarkTheme:n,isOnWallpaper:d,handleOpenWallpaper:()=>{var v;t==null||t.event("wallpaper_modal",{event_category:GAEventCategories.Widget}),(v=c.value)!=null&&v.length?d.value=!0:alert("Something went wrong\uFF01")},handleCloseWallpaper:()=>{d.value=!1}}}}),switcher_vue_vue_type_style_index_0_scoped_c5f131b0_lang="";function _sfc_ssrRender$m(e,t,n,r,c,d,g,o){const v=resolveComponent("client-only"),x=resolveComponent("popup"),E=resolveComponent("wallpapers");t(`<!--[--><div id="wallpaper" data-v-c5f131b0><div class="${ssrRenderClass([{dark:e.isDarkTheme},"switcher"])}" data-v-c5f131b0><div class="title" data-v-c5f131b0><i class="iconfont icon-bing" data-v-c5f131b0></i><span class="text" data-v-c5f131b0>BING</span></div></div></div>`),t(ssrRenderComponent(v,null,{default:withCtx((k,S,N,L)=>{if(S)S(ssrRenderComponent(x,{visible:e.isOnWallpaper,"onUpdate:visible":P=>e.isOnWallpaper=P,"mask-close":!1,"scroll-close":!1},{default:withCtx((P,O,V,z)=>{if(O)O(ssrRenderComponent(E,{onClose:e.handleCloseWallpaper},null,V,z));else return[createVNode(E,{onClose:e.handleCloseWallpaper},null,8,["onClose"])]}),_:1},N,L));else return[createVNode(x,{visible:e.isOnWallpaper,"onUpdate:visible":P=>e.isOnWallpaper=P,"mask-close":!1,"scroll-close":!1},{default:withCtx(()=>[createVNode(E,{onClose:e.handleCloseWallpaper},null,8,["onClose"])]),_:1},8,["visible","onUpdate:visible"])]}),_:1},n)),t("<!--]-->")}const _sfc_setup$m=_sfc_main$m.setup;_sfc_main$m.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/wallpaper/switcher.vue"),_sfc_setup$m?_sfc_setup$m(e,t):void 0};const Wallpaper=_export_sfc(_sfc_main$m,[["ssrRender",_sfc_ssrRender$m],["__scopeId","data-v-c5f131b0"]]),_sfc_main$l=defineComponent({name:"Background",setup(){const{isDarkTheme:e}=useEnhancer();return{isDarkTheme:e}}}),background_vue_vue_type_style_index_0_scoped_c1f03b1d_lang="";function _sfc_ssrRender$l(e,t,n,r,c,d,g,o){t(`<div${ssrRenderAttrs(mergeProps({id:"background"},r))} data-v-c1f03b1d><div class="${ssrRenderClass([{dark:e.isDarkTheme},"image"])}" data-v-c1f03b1d></div></div>`)}const _sfc_setup$l=_sfc_main$l.setup;_sfc_main$l.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/background.vue"),_sfc_setup$l?_sfc_setup$l(e,t):void 0};const Background=_export_sfc(_sfc_main$l,[["ssrRender",_sfc_ssrRender$l],["__scopeId","data-v-c1f03b1d"]]),_sfc_main$k=defineComponent({name:"Toolbox",setup(){const{i18n:e,gtag:t,globalState:n}=useEnhancer(),r=ref(0),c=ref(!1),d=ref(!1),g=()=>{t==null||t.event("rss",{event_category:GAEventCategories.Widget})},o=()=>{t==null||t.event("feedback_modal",{event_category:GAEventCategories.Widget}),n.toggleSwitcher("feedback",!0)},v=()=>{const x=()=>{let E=window.scrollY;const k=document.body.scrollHeight-window.innerHeight;if(d.value&&(E+=1),c.value&&(E-=1),E<0?E=0:E>=k&&(E=k),!(E>0&&E<k))return!1;if(window.scrollTo(0,E),d.value||c.value)r.value=window.requestAnimationFrame(x);else return window.cancelAnimationFrame(r.value),!1};r.value=window.requestAnimationFrame(x)};return{VALUABLE_LINKS,LanguageKey,t:e.translate,scrollToPageTop,scrollToNextScreen,handleFeedback:o,handleRSS:g,setTopButtonState(x,E=!1){c.value=x,window.cancelAnimationFrame(r.value),E&&v()},setBottomButtonState(x,E=!1){d.value=x,window.cancelAnimationFrame(r.value),E&&v()}}}}),toolbox_vue_vue_type_style_index_0_scoped_f61e9e36_lang="";function _sfc_ssrRender$k(e,t,n,r,c,d,g,o){const v=resolveComponent("ulink");t(`<div${ssrRenderAttrs(mergeProps({id:"toolbox"},r))} data-v-f61e9e36><div class="container" data-v-f61e9e36><div class="tools" data-v-f61e9e36>`),t(ssrRenderComponent(v,{class:"rss",href:e.VALUABLE_LINKS.RSS,onMousedown:e.handleRSS},{default:withCtx((x,E,k,S)=>{if(E)E(`<i class="iconfont icon-rss" data-v-f61e9e36${S}></i>`);else return[createVNode("i",{class:"iconfont icon-rss"})]}),_:1},n)),t(`<button class="feedback"${ssrRenderAttr("title",e.t(e.LanguageKey.FEEDBACK))} data-v-f61e9e36><i class="iconfont icon-mail-plane" data-v-f61e9e36></i></button><button class="to-page-top"${ssrRenderAttr("title",e.t(e.LanguageKey.TO_TOP))} data-v-f61e9e36><i class="iconfont icon-totop" data-v-f61e9e36></i></button><button class="to-page-bottom"${ssrRenderAttr("title",e.t(e.LanguageKey.TO_BOTTOM))} data-v-f61e9e36><i class="iconfont icon-tobottom" data-v-f61e9e36></i></button></div></div></div>`)}const _sfc_setup$k=_sfc_main$k.setup;_sfc_main$k.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/toolbox.vue"),_sfc_setup$k?_sfc_setup$k(e,t):void 0};const Toolbox=_export_sfc(_sfc_main$k,[["ssrRender",_sfc_ssrRender$k],["__scopeId","data-v-f61e9e36"]]),_sfc_main$j=defineComponent({name:"Feedback",emits:["close"],setup(e,t){const n=[{emoji:"\u{1F620}",value:1,en:"Terrible",zh:"\u5DEE\u52B2"},{emoji:"\u{1F641}",value:2,en:"Bad",zh:"\u4E0D\u559C\u6B22"},{emoji:"\u{1F610}",value:3,en:"Neutral",zh:"\u65E0\u611F"},{emoji:"\u{1F603}",value:4,en:"Great",zh:"\u559C\u6B22"},{emoji:"\u{1F970}",value:5,en:"Amazing",zh:"\u592A\u68D2\u4E86"}],{appOption:r,identity:c}=useStores(),{gtag:d,isZhLang:g}=useEnhancer(),o=computed(()=>c.feedbacks),v=reactive({emotion:null,content:"",submitting:!1,submitted:!1}),x=computed(()=>Number.isInteger(v.emotion)&&Boolean(v.content));return{LanguageKey,META,isZhLang:g,isSubmitable:x,emotions:n,state:v,historyFeedbacks:o,handleClose:()=>t.emit("close"),handleSubmit:()=>{x.value&&(d==null||d.event("submit_feedback",{event_category:GAEventCategories.Widget}),v.submitting=!0,r.postFeedback(toRaw$1(v)).then(S=>{c.addFeedback(S.result),v.submitted=!0}).catch(S=>{alert(S)}).finally(()=>{v.submitting=!1}))}}}}),feedback_vue_vue_type_style_index_0_scoped_3ccc5195_lang="";function _sfc_ssrRender$j(e,t,n,r,c,d,g,o){const v=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:"feedback"},r))} data-v-3ccc5195>`),e.state.submitted?(t('<div class="submitted" data-v-3ccc5195><div class="icon" data-v-3ccc5195><i class="iconfont icon-success" data-v-3ccc5195></i></div><div class="text" data-v-3ccc5195>'),t(ssrRenderComponent(v,null,{zh:withCtx((x,E,k,S)=>{if(E)E("\u611F\u8C22\u4F60\u7684\u53CD\u9988\u3002");else return[createTextVNode("\u611F\u8C22\u4F60\u7684\u53CD\u9988\u3002")]}),en:withCtx((x,E,k,S)=>{if(E)E("Thank U for your feedback.");else return[createTextVNode("Thank U for your feedback.")]}),_:1},n)),t('</div><button class="close" data-v-3ccc5195>'),t(ssrRenderComponent(v,{zh:"\u5173\u95ED\u7A97\u53E3",en:"Close"},null,n)),t("</button></div>")):(t('<!--[--><div class="title" data-v-3ccc5195>'),t(ssrRenderComponent(v,null,{zh:withCtx((x,E,k,S)=>{if(E)E(`\u4F60\u8BA4\u4E3A ${ssrInterpolate(e.META.title)} \u6574\u4F53\u600E\u4E48\u6837\uFF1F`);else return[createTextVNode("\u4F60\u8BA4\u4E3A "+toDisplayString(e.META.title)+" \u6574\u4F53\u600E\u4E48\u6837\uFF1F",1)]}),en:withCtx((x,E,k,S)=>{if(E)E(`How would you rate ${ssrInterpolate(e.META.title)}?`);else return[createTextVNode("How would you rate "+toDisplayString(e.META.title)+"?",1)]}),_:1},n)),t('</div><div class="emotions" data-v-3ccc5195><!--[-->'),ssrRenderList(e.emotions,x=>{t(`<li class="item" data-v-3ccc5195><label data-v-3ccc5195><input class="radio" type="radio"${ssrRenderAttr("value",x.value)}${includeBooleanAttr(e.state.submitting)?" disabled":""}${includeBooleanAttr(ssrLooseEqual(e.state.emotion,x.value))?" checked":""} data-v-3ccc5195><div class="${ssrRenderClass([{activated:e.state.emotion===x.value},"button"])}" data-v-3ccc5195><span class="emoji" data-v-3ccc5195>${ssrInterpolate(x.emoji)}</span><span class="text" data-v-3ccc5195>`),t(ssrRenderComponent(v,{zh:x.zh,en:x.en},null,n)),t("</span></div></label>"),e.state.emotion===x.value?t('<div class="arrow" data-v-3ccc5195></div>'):t("<!---->"),t("</li>")}),t(`<!--]--></div><div class="input" data-v-3ccc5195><textarea class="textarea" name="feedback" id="feedback" rows="10"${includeBooleanAttr(e.state.submitting)?" disabled":""}${ssrRenderAttr("placeholder",e.isZhLang?"\u4F60\u53EF\u5728\u6B64\u7545\u6240\u6B32\u8A00\uFF0C\u8FD9\u5C06\u4EC5\u5BF9\u535A\u4E3B\u53EF\u89C1":"Tell me about your opinion...")} data-v-3ccc5195>${ssrInterpolate(e.state.content)}</textarea><div class="buttons" data-v-3ccc5195><button class="item cancel"${includeBooleanAttr(e.state.submitting)?" disabled":""} data-v-3ccc5195><span class="text" data-v-3ccc5195>`),t(ssrRenderComponent(v,{zh:"\u53D6\u6D88",en:"Cancel"},null,n)),t(`</span></button><button class="item submit"${includeBooleanAttr(!e.isSubmitable||e.state.submitting)?" disabled":""} data-v-3ccc5195><i class="iconfont icon-mail-plane" data-v-3ccc5195></i><span class="text" data-v-3ccc5195>`),t(ssrRenderComponent(v,{k:e.state.submitting?e.LanguageKey.SUBMITTING:e.LanguageKey.SUBMIT},null,n)),t("</span></button></div></div><!--]-->")),e.historyFeedbacks.length?(t('<div class="history" data-v-3ccc5195>'),t(ssrRenderComponent(v,null,{zh:withCtx((x,E,k,S)=>{if(E)E(`\u4F60\u5DF2\u8FDB\u884C\u8FC7 ${ssrInterpolate(e.historyFeedbacks.length)} \u6B21\u53CD\u9988\u3002`);else return[createTextVNode("\u4F60\u5DF2\u8FDB\u884C\u8FC7 "+toDisplayString(e.historyFeedbacks.length)+" \u6B21\u53CD\u9988\u3002",1)]}),en:withCtx((x,E,k,S)=>{if(E)E(`You have ${ssrInterpolate(e.historyFeedbacks.length)} feedback history.`);else return[createTextVNode("You have "+toDisplayString(e.historyFeedbacks.length)+" feedback history.",1)]}),_:1},n)),t("</div>")):t("<!---->"),t("</div>")}const _sfc_setup$j=_sfc_main$j.setup;_sfc_main$j.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/feedback.vue"),_sfc_setup$j?_sfc_setup$j(e,t):void 0};const Feedback=_export_sfc(_sfc_main$j,[["ssrRender",_sfc_ssrRender$j],["__scopeId","data-v-3ccc5195"]]),emailLink=e=>{if(typeof e=="string")return`mailto:${e}`;const{email:t,...n}=e;return`mailto:${t}?`+lib$1.stringify(n)},_sfc_main$i=defineComponent({name:"Statement",components:{Markdown},setup(){const{appOption:e}=useStores();return{appOption:e,emailLink}}}),statement_vue_vue_type_style_index_0_scoped_ed0272f7_lang="";function _sfc_ssrRender$i(e,t,n,r,c,d,g,o){var x;const v=resolveComponent("markdown");t(`<div${ssrRenderAttrs(mergeProps({class:"statement"},r))} data-v-ed0272f7><div class="content" data-v-ed0272f7>`),t(ssrRenderComponent(v,{markdown:(x=e.appOption.data)==null?void 0:x.statement,compact:!0},null,n)),t("<br data-v-ed0272f7><hr data-v-ed0272f7>"),e.appOption.data?t(`<p class="email" data-v-ed0272f7><a${ssrRenderAttr("href",e.emailLink(e.appOption.data.site_email))} class="link" target="_blank" data-v-ed0272f7><i class="iconfont icon-mail" data-v-ed0272f7></i><span class="text" data-v-ed0272f7>${ssrInterpolate(e.appOption.data.site_email)}</span></a></p>`):t("<!---->"),t("</div></div>")}const _sfc_setup$i=_sfc_main$i.setup;_sfc_main$i.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/statement.vue"),_sfc_setup$i?_sfc_setup$i(e,t):void 0};const Statement=_export_sfc(_sfc_main$i,[["ssrRender",_sfc_ssrRender$i],["__scopeId","data-v-ed0272f7"]]),menus=[{id:RouteName.Home,route:"/",icon:"icon-home",i18nKey:LanguageKey.PAGE_HOME},{id:CategorySlug.Code,route:getCategoryFlowRoute(CategorySlug.Code),icon:"icon-code",i18nKey:LanguageKey.CATEGORY_CODE},{id:CategorySlug.Insight,route:getCategoryFlowRoute(CategorySlug.Insight),icon:"icon-insight",i18nKey:LanguageKey.CATEGORY_INSIGHT},{id:"github",url:VALUABLE_LINKS.GITHUB,icon:"icon-github",i18nKey:LanguageKey.PAGE_GITHUB,newWindow:!0},{id:RouteName.Lens,route:getPageRoute(RouteName.Lens),icon:"icon-lens",i18nKey:LanguageKey.PAGE_LENS},{id:RouteName.About,route:getPageRoute(RouteName.About),icon:"icon-swordsman",i18nKey:LanguageKey.PAGE_ABOUT},{id:RouteName.Guestbook,route:getPageRoute(RouteName.Guestbook),i18nKey:LanguageKey.PAGE_GUESTBOOK,icon:"icon-comment"},{id:RouteName.App,route:getPageRoute(RouteName.App),imageIcon:getTargetCDNURL("/images/page-app/logo.png"),i18nKey:LanguageKey.PAGE_APP,divider:!0},{id:"nft",route:getPageRoute(RouteName.Nft),imageIcon:getTargetCDNURL("/images/third-party/opensea.svg"),i18nKey:LanguageKey.PAGE_NFT,disabledUppercase:!0,hot:!0,divider:!0}],_sfc_main$h=defineComponent({name:"DesktopNav",setup(){const{adConfig:e}=useEnhancer();return{NAV_ELEMENT_ID,menus,adConfig:e}}}),nav_vue_vue_type_style_index_0_scoped_0fcafc3b_lang="";function _sfc_ssrRender$h(e,t,n,r,c,d,g,o){const v=resolveComponent("ulink"),x=resolveComponent("uimage"),E=resolveComponent("webfont"),k=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({id:e.NAV_ELEMENT_ID,class:"desktop-nav"},r))} data-v-0fcafc3b><nav class="nav-list" data-v-0fcafc3b><!--[-->`),ssrRenderList(e.menus,S=>{t("<!--[-->"),S.divider?t('<span class="divider" data-v-0fcafc3b></span>'):t("<!---->"),t(ssrRenderComponent(v,{class:["item",S.id],href:S.url,to:S.route},{default:withCtx((N,L,P,O)=>{if(L)S.imageIcon?L(ssrRenderComponent(x,{class:"image-icon",src:S.imageIcon},null,P,O)):S.icon?L(`<i class="${ssrRenderClass([S.icon,"font-icon iconfont"])}" data-v-0fcafc3b${O}></i>`):L("<!---->"),L(ssrRenderComponent(E,{class:"text",bolder:"",uppercase:!S.disabledUppercase},{default:withCtx((V,z,U,W)=>{if(z)z(ssrRenderComponent(k,{k:S.i18nKey},null,U,W));else return[createVNode(k,{k:S.i18nKey},null,8,["k"])]}),_:2},P,O)),S.newWindow?L(`<span class="superscript new-window" data-v-0fcafc3b${O}><i class="iconfont icon-new-window-s" data-v-0fcafc3b${O}></i></span>`):L("<!---->"),S.hot?L(`<span class="superscript hot" data-v-0fcafc3b${O}><i class="iconfont icon-hot-fill" data-v-0fcafc3b${O}></i></span>`):L("<!---->");else return[S.imageIcon?(openBlock(),createBlock(x,{key:0,class:"image-icon",src:S.imageIcon},null,8,["src"])):S.icon?(openBlock(),createBlock("i",{key:1,class:["font-icon iconfont",S.icon]},null,2)):createCommentVNode("",!0),createVNode(E,{class:"text",bolder:"",uppercase:!S.disabledUppercase},{default:withCtx(()=>[createVNode(k,{k:S.i18nKey},null,8,["k"])]),_:2},1032,["uppercase"]),S.newWindow?(openBlock(),createBlock("span",{key:2,class:"superscript new-window"},[createVNode("i",{class:"iconfont icon-new-window-s"})])):createCommentVNode("",!0),S.hot?(openBlock(),createBlock("span",{key:3,class:"superscript hot"},[createVNode("i",{class:"iconfont icon-hot-fill"})])):createCommentVNode("",!0)]}),_:2},n)),t("<!--]-->")}),t("<!--]--><!--[-->"),ssrRenderList(e.adConfig.PC_NAV,(S,N)=>{t('<!--[--><span class="divider" data-v-0fcafc3b></span>'),t(ssrRenderComponent(v,{class:"item",href:S.url,style:{color:S.color}},{default:withCtx((L,P,O,V)=>{if(P)P(`<i class="${ssrRenderClass([S.icon,"font-icon iconfont"])}" data-v-0fcafc3b${V}></i><span class="ad-text" data-v-0fcafc3b${V}>`),S.i18n?P(ssrRenderComponent(k,{zh:S.i18n.zh,en:S.i18n.en},null,O,V)):P(`<!--[-->${ssrInterpolate(S.text)}<!--]-->`),P(`</span><span class="superscript" data-v-0fcafc3b${V}><i class="iconfont icon-ad" data-v-0fcafc3b${V}></i></span>`);else return[createVNode("i",{class:["font-icon iconfont",S.icon]},null,2),createVNode("span",{class:"ad-text"},[S.i18n?(openBlock(),createBlock(k,{key:0,zh:S.i18n.zh,en:S.i18n.en},null,8,["zh","en"])):(openBlock(),createBlock(Fragment,{key:1},[createTextVNode(toDisplayString(S.text),1)],64))]),createVNode("span",{class:"superscript"},[createVNode("i",{class:"iconfont icon-ad"})])]}),_:2},n)),t("<!--]-->")}),t("<!--]--></nav></div>")}const _sfc_setup$h=_sfc_main$h.setup;_sfc_main$h.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/desktop/nav.vue"),_sfc_setup$h?_sfc_setup$h(e,t):void 0};const NavView=_export_sfc(_sfc_main$h,[["ssrRender",_sfc_ssrRender$h],["__scopeId","data-v-0fcafc3b"]]),_sfc_main$g=defineComponent({name:"DesktopAsideSearch",setup(){const{i18n:e,gtag:t,route:n,router:r}=useEnhancer(),c=ref(),d=ref("");return onMounted(()=>{isSearchFlow(n.name)&&(d.value=n.params.keyword)}),{LanguageKey,RouteName,formElement:c,i18n:e,keyword:d,handleSearch:o=>{var S,N;if(o.preventDefault(),!((S=c.value)==null?void 0:S.checkValidity())){(N=c.value)==null||N.reportValidity();return}const x=d.value,E=n.params.keyword,k=isSearchFlow(n.name);x&&(!k||E!==x)&&(r.push({name:RouteName.SearchFlow,params:{keyword:x}}),t==null||t.event("aside_search",{event_category:GAEventCategories.Universal,event_label:x}))}}}}),search_vue_vue_type_style_index_0_scoped_89d7447e_lang="";function _sfc_ssrRender$g(e,t,n,r,c,d,g,o){const v=resolveComponent("router-link");t(`<div${ssrRenderAttrs(mergeProps({class:"search"},r))} data-v-89d7447e><form class="search-box" data-v-89d7447e><input id="keyword" required type="search" name="search" maxlength="16" autocomplete="off"${ssrRenderAttr("value",e.keyword)} class="${ssrRenderClass([e.i18n.language,"search-input"])}"${ssrRenderAttr("placeholder",e.i18n.t(e.LanguageKey.SEARCH_PLACEHOLDER))} data-v-89d7447e><button type="submit" class="search-btn" data-v-89d7447e><i class="iconfont icon-search" data-v-89d7447e></i></button></form>`),t(ssrRenderComponent(v,{class:"extra-btn",to:{name:e.RouteName.Sponsor}},{default:withCtx((x,E,k,S)=>{if(E)E(`<i class="iconfont icon-peachblossom" data-v-89d7447e${S}></i>`);else return[createVNode("i",{class:"iconfont icon-peachblossom"})]}),_:1},n)),t("</div>")}const _sfc_setup$g=_sfc_main$g.setup;_sfc_main$g.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/desktop/aside/search.vue"),_sfc_setup$g?_sfc_setup$g(e,t):void 0};const AsideSearch=_export_sfc(_sfc_main$g,[["ssrRender",_sfc_ssrRender$g],["__scopeId","data-v-89d7447e"]]),StatisticSkeleton=defineComponent({props:{fetching:Boolean,count:Number},setup(e){return()=>h(Transition,{name:"module",mode:"out-in",duration:280},()=>{var t;return e.fetching?h("p",{class:"skeleton",key:"skeleton"},"\u2022\u2022\u2022"):h("p",{class:"count",key:"count"},(t=e.count)!=null?t:"-")})}}),_sfc_main$f=defineComponent({name:"DesktopAsideStatistic",components:{StatisticSkeleton},setup(){const e=ref(!0),t=useNodepressStatisticStore();return onMounted(()=>{t.fetch().finally(()=>{e.value=!1})}),{LanguageKey,RouteName,fetching:e,store:t}}}),statistic_vue_vue_type_style_index_0_scoped_4a21524b_lang="";function _sfc_ssrRender$f(e,t,n,r,c,d,g,o){const v=resolveComponent("router-link"),x=resolveComponent("statistic-skeleton"),E=resolveComponent("i18n"),k=resolveComponent("divider");t(ssrRenderComponent(v,mergeProps({class:"statistic",to:{name:e.RouteName.Archive}},r),{default:withCtx((S,N,L,P)=>{var O,V,z,U,W,Z;if(N)N(`<div class="item" data-v-4a21524b${P}>`),N(ssrRenderComponent(x,{fetching:e.fetching,count:(O=e.store.data)==null?void 0:O.articles},null,L,P)),N(`<span class="title" data-v-4a21524b${P}>`),N(ssrRenderComponent(E,{k:e.LanguageKey.STATISTIC_ARTICLES},null,L,P)),N("</span></div>"),N(ssrRenderComponent(k,{type:"vertical"},null,L,P)),N(`<div class="item" data-v-4a21524b${P}>`),N(ssrRenderComponent(x,{fetching:e.fetching,count:(V=e.store.data)==null?void 0:V.todayViews},null,L,P)),N(`<span class="title" data-v-4a21524b${P}>`),N(ssrRenderComponent(E,{k:e.LanguageKey.STATISTIC_TODAY_VIEWS},null,L,P)),N("</span></div>"),N(ssrRenderComponent(k,{type:"vertical"},null,L,P)),N(`<div class="item" data-v-4a21524b${P}>`),N(ssrRenderComponent(x,{fetching:e.fetching,count:(z=e.store.data)==null?void 0:z.comments},null,L,P)),N(`<span class="title" data-v-4a21524b${P}>`),N(ssrRenderComponent(E,{k:e.LanguageKey.STATISTIC_COMMENTS},null,L,P)),N("</span></div>");else return[createVNode("div",{class:"item"},[createVNode(x,{fetching:e.fetching,count:(U=e.store.data)==null?void 0:U.articles},null,8,["fetching","count"]),createVNode("span",{class:"title"},[createVNode(E,{k:e.LanguageKey.STATISTIC_ARTICLES},null,8,["k"])])]),createVNode(k,{type:"vertical"}),createVNode("div",{class:"item"},[createVNode(x,{fetching:e.fetching,count:(W=e.store.data)==null?void 0:W.todayViews},null,8,["fetching","count"]),createVNode("span",{class:"title"},[createVNode(E,{k:e.LanguageKey.STATISTIC_TODAY_VIEWS},null,8,["k"])])]),createVNode(k,{type:"vertical"}),createVNode("div",{class:"item"},[createVNode(x,{fetching:e.fetching,count:(Z=e.store.data)==null?void 0:Z.comments},null,8,["fetching","count"]),createVNode("span",{class:"title"},[createVNode(E,{k:e.LanguageKey.STATISTIC_COMMENTS},null,8,["k"])])])]}),_:1},n))}const _sfc_setup$f=_sfc_main$f.setup;_sfc_main$f.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/desktop/aside/statistic.vue"),_sfc_setup$f?_sfc_setup$f(e,t):void 0};const AsideStatistic=_export_sfc(_sfc_main$f,[["ssrRender",_sfc_ssrRender$f],["__scopeId","data-v-4a21524b"]]),PER_PAGE=8,_sfc_main$e=defineComponent({name:"DesktopAsideArticle",setup(){const e=useArticleListStore(),t=computed(()=>e.hotList.fetching),n=computed(()=>e.hotList.data.slice(0,PER_PAGE*2).map((g,o)=>({...g,i:o+1}))),r=ref(0),c=computed(()=>{const g=r.value*PER_PAGE;return n.value.map((o,v)=>({...o,i:v+1})).slice(g,g+PER_PAGE)});return{LanguageKey,isFetching:t,articles:c,switchHotPage:()=>{const g=n.value.length,o=Math.ceil(g/PER_PAGE);r.value<o-1?r.value++:r.value=0},getArticleDetailRoute,numberToKilo,dateToYMD}}}),article_vue_vue_type_style_index_0_scoped_acd8d22e_lang="";function _sfc_ssrRender$e(e,t,n,r,c,d,g,o){const v=resolveComponent("webfont"),x=resolveComponent("i18n"),E=resolveComponent("placeholder"),k=resolveComponent("skeleton-line"),S=resolveComponent("router-link");t(`<div${ssrRenderAttrs(mergeProps({class:"article"},r))} data-v-acd8d22e><div class="header" data-v-acd8d22e><span class="title" data-v-acd8d22e><i class="iconfont icon-hotfill" data-v-acd8d22e></i>`),t(ssrRenderComponent(v,{class:"text"},{default:withCtx((N,L,P,O)=>{if(L)L(ssrRenderComponent(x,{k:e.LanguageKey.HOT_ARTICLE_LIST_TITLE},null,P,O));else return[createVNode(x,{k:e.LanguageKey.HOT_ARTICLE_LIST_TITLE},null,8,["k"])]}),_:1},n)),t('</span><button class="switch" data-v-acd8d22e><i class="iconfont icon-switch" data-v-acd8d22e></i></button></div>'),t(ssrRenderComponent(E,{data:e.articles,loading:e.isFetching,"i18n-key":e.LanguageKey.ARTICLE_PLACEHOLDER},{loading:withCtx((N,L,P,O)=>{if(L)L(`<ul class="article-list-skeleton" data-v-acd8d22e${O}><!--[-->`),ssrRenderList(5,V=>{L(`<li class="item" data-v-acd8d22e${O}>`),L(ssrRenderComponent(k,null,null,P,O)),L("</li>")}),L("<!--]--></ul>");else return[createVNode("ul",{class:"article-list-skeleton",key:"skeleton"},[(openBlock(),createBlock(Fragment,null,renderList(5,V=>createVNode("li",{key:V,class:"item"},[createVNode(k)])),64))])]}),default:withCtx((N,L,P,O)=>{if(L)L(`<ul class="article-list" data-v-acd8d22e${O}><!--[-->`),ssrRenderList(e.articles,V=>{L(`<li class="item" data-v-acd8d22e${O}><span class="${ssrRenderClass([{small:V.i>=10},"index"])}"${ssrRenderAttr("data-index",V.i)} data-v-acd8d22e${O}>${ssrInterpolate(V.i)}</span><div class="content" data-v-acd8d22e${O}>`),L(ssrRenderComponent(S,{class:"title",to:e.getArticleDetailRoute(V.id),title:V.title},{default:withCtx((z,U,W,Z)=>{if(U)U(`${ssrInterpolate(V.title)}`);else return[createTextVNode(toDisplayString(V.title),1)]}),_:2},P,O)),L(`<div class="meta" data-v-acd8d22e${O}><span class="item date" data-v-acd8d22e${O}>${ssrInterpolate(e.dateToYMD(V.create_at))}</span><span class="item views" data-v-acd8d22e${O}><i class="iconfont icon-eye" data-v-acd8d22e${O}></i> ${ssrInterpolate(e.numberToKilo(V.meta.views))}</span><span class="item comments" data-v-acd8d22e${O}><i class="iconfont icon-comment" data-v-acd8d22e${O}></i> ${ssrInterpolate(V.meta.comments)}</span></div></div></li>`)}),L("<!--]--></ul>");else return[createVNode("ul",{class:"article-list",key:"list"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.articles,V=>(openBlock(),createBlock("li",{key:V.id,class:"item"},[createVNode("span",{class:["index",{small:V.i>=10}],"data-index":V.i},toDisplayString(V.i),11,["data-index"]),createVNode("div",{class:"content"},[createVNode(S,{class:"title",to:e.getArticleDetailRoute(V.id),title:V.title},{default:withCtx(()=>[createTextVNode(toDisplayString(V.title),1)]),_:2},1032,["to","title"]),createVNode("div",{class:"meta"},[createVNode("span",{class:"item date"},toDisplayString(e.dateToYMD(V.create_at)),1),createVNode("span",{class:"item views"},[createVNode("i",{class:"iconfont icon-eye"}),createTextVNode(" "+toDisplayString(e.numberToKilo(V.meta.views)),1)]),createVNode("span",{class:"item comments"},[createVNode("i",{class:"iconfont icon-comment"}),createTextVNode(" "+toDisplayString(V.meta.comments),1)])])])]))),128))])]}),_:1},n)),t("</div>")}const _sfc_setup$e=_sfc_main$e.setup;_sfc_main$e.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/desktop/aside/article.vue"),_sfc_setup$e?_sfc_setup$e(e,t):void 0};const AsideArticle=_export_sfc(_sfc_main$e,[["ssrRender",_sfc_ssrRender$e],["__scopeId","data-v-acd8d22e"]]),_sfc_main$d=defineComponent({name:"DesktopAsideMammon",components:{Swiper,SwiperSlide},props:{index:{type:Number,default:0},ready:{type:Object}},emits:["ready","update:index","index-change"],setup(e,t){const{adConfig:n}=useEnhancer(),r=ref();return{adConfig:n,updateSwiper:g=>{r.value=g,t.emit("ready",r.value)},handleSlideChange:()=>{var o;const g=(o=r.value)==null?void 0:o.realIndex;t.emit("update:index",g),t.emit("index-change",g)}}}}),mammon_vue_vue_type_style_index_0_scoped_1b8fd532_lang="";function _sfc_ssrRender$d(e,t,n,r,c,d,g,o){const v=resolveComponent("swiper"),x=resolveComponent("swiper-slide"),E=resolveComponent("ulink"),k=resolveComponent("uimage");t(`<div${ssrRenderAttrs(mergeProps({class:"mammon"},r))} data-v-1b8fd532>`),t(ssrRenderComponent(v,{class:"swiper",direction:"vertical","initial-slide":e.index,loop:!0,"simulate-touch":!1,autoplay:{delay:2800,disableOnInteraction:!1},pagination:{clickable:!0},"set-wrapper-size":!0,"auto-height":!0,mousewheel:!0,"observe-parents":!0,"preload-images":!1,lazy:!0,onSwiper:e.updateSwiper,onSlideChangeTransitionEnd:e.handleSlideChange},{default:withCtx((S,N,L,P)=>{if(N)N("<!--[-->"),ssrRenderList(e.adConfig.PC_ASIDE_SWIPER,(O,V)=>{N(ssrRenderComponent(x,{class:"swiper-slide",key:V},{default:withCtx((z,U,W,Z)=>{if(U)U(ssrRenderComponent(E,{class:"content",href:O.url},{default:withCtx((re,oe,se,ce)=>{if(oe)oe(ssrRenderComponent(k,{src:O.src,alt:"aside-swiper-ad"},null,se,ce)),oe(`<i class="iconfont icon-ad" data-v-1b8fd532${ce}></i>`);else return[createVNode(k,{src:O.src,alt:"aside-swiper-ad"},null,8,["src"]),createVNode("i",{class:"iconfont icon-ad"})]}),_:2},W,Z));else return[createVNode(E,{class:"content",href:O.url},{default:withCtx(()=>[createVNode(k,{src:O.src,alt:"aside-swiper-ad"},null,8,["src"]),createVNode("i",{class:"iconfont icon-ad"})]),_:2},1032,["href"])]}),_:2},L,P))}),N("<!--]-->");else return[(openBlock(!0),createBlock(Fragment,null,renderList(e.adConfig.PC_ASIDE_SWIPER,(O,V)=>(openBlock(),createBlock(x,{class:"swiper-slide",key:V},{default:withCtx(()=>[createVNode(E,{class:"content",href:O.url},{default:withCtx(()=>[createVNode(k,{src:O.src,alt:"aside-swiper-ad"},null,8,["src"]),createVNode("i",{class:"iconfont icon-ad"})]),_:2},1032,["href"])]),_:2},1024))),128))]}),_:1},n)),t("</div>")}const _sfc_setup$d=_sfc_main$d.setup;_sfc_main$d.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/desktop/aside/mammon.vue"),_sfc_setup$d?_sfc_setup$d(e,t):void 0};const AsideMammon=_export_sfc(_sfc_main$d,[["ssrRender",_sfc_ssrRender$d],["__scopeId","data-v-1b8fd532"]]),_sfc_main$c=defineComponent({name:"DesktopAsideTag",setup(){const e=useTagStore();return{LanguageKey,tagStore:e,tagEnName,getTagIcon:n=>getExtendValue(n.extends||[],"icon")||"icon-tag",getTagFlowRoute}}}),tag_vue_vue_type_style_index_0_scoped_dfb959e3_lang="";function _sfc_ssrRender$c(e,t,n,r,c,d,g,o){const v=resolveComponent("placeholder"),x=resolveComponent("skeleton-line"),E=resolveComponent("router-link"),k=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:"tag"},r))} data-v-dfb959e3>`),t(ssrRenderComponent(v,{data:e.tagStore.sorted.length,fetching:e.tagStore.fetching,"i18n-key":e.LanguageKey.TAG_PLACEHOLDER},{loading:withCtx((S,N,L,P)=>{if(N)N(`<ul class="tag-list-skeleton" data-v-dfb959e3${P}><!--[-->`),ssrRenderList(14,O=>{N(`<li class="item" data-v-dfb959e3${P}>`),N(ssrRenderComponent(x,null,null,L,P)),N("</li>")}),N("<!--]--></ul>");else return[createVNode("ul",{class:"tag-list-skeleton",key:"skeleton"},[(openBlock(),createBlock(Fragment,null,renderList(14,O=>createVNode("li",{key:O,class:"item"},[createVNode(x)])),64))])]}),default:withCtx((S,N,L,P)=>{if(N)N(`<div class="tag-list" data-v-dfb959e3${P}><!--[-->`),ssrRenderList(e.tagStore.sorted,(O,V)=>{N(ssrRenderComponent(E,{class:"item",title:`${e.tagEnName(O)} | ${O.description}`,to:e.getTagFlowRoute(O.slug),key:V},{default:withCtx((z,U,W,Z)=>{if(U)U(`<i class="${ssrRenderClass([e.getTagIcon(O),"iconfont"])}" data-v-dfb959e3${Z}></i><span class="name" data-v-dfb959e3${Z}>`),U(ssrRenderComponent(k,{zh:O.name,en:e.tagEnName(O)},null,W,Z)),U(`<span class="count" data-v-dfb959e3${Z}>(${ssrInterpolate(O.articles_count||0)})</span></span>`);else return[createVNode("i",{class:["iconfont",e.getTagIcon(O)]},null,2),createVNode("span",{class:"name"},[createVNode(k,{zh:O.name,en:e.tagEnName(O)},null,8,["zh","en"]),createVNode("span",{class:"count"},"("+toDisplayString(O.articles_count||0)+")",1)])]}),_:2},L,P))}),N("<!--]--></div>");else return[createVNode("div",{class:"tag-list",key:"list"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.tagStore.sorted,(O,V)=>(openBlock(),createBlock(E,{class:"item",title:`${e.tagEnName(O)} | ${O.description}`,to:e.getTagFlowRoute(O.slug),key:V},{default:withCtx(()=>[createVNode("i",{class:["iconfont",e.getTagIcon(O)]},null,2),createVNode("span",{class:"name"},[createVNode(k,{zh:O.name,en:e.tagEnName(O)},null,8,["zh","en"]),createVNode("span",{class:"count"},"("+toDisplayString(O.articles_count||0)+")",1)])]),_:2},1032,["title","to"]))),128))])]}),_:1},n)),t("</div>")}const _sfc_setup$c=_sfc_main$c.setup;_sfc_main$c.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/desktop/aside/tag.vue"),_sfc_setup$c?_sfc_setup$c(e,t):void 0};const AsideTag=_export_sfc(_sfc_main$c,[["ssrRender",_sfc_ssrRender$c],["__scopeId","data-v-dfb959e3"]]),_sfc_main$b=defineComponent({name:"DesktopAsideAnchor",setup(){const e=useArticleDetailStore(),t=computed(()=>e.article),n=computed(()=>{var g,o;const d=[...((g=e.defaultContent)==null?void 0:g.headings)||[]];return e.isLongContent&&e.renderedFullContent&&d.push(...((o=e.moreContent)==null?void 0:o.headings)||[]),d}),r=computed(()=>Math.min(...n.value.map(d=>d.level)));return{ANCHORS,LanguageKey,article:t,store:e,headings:n,minHeadingLevel:r,numberSplit,handleAnchor:d=>{scrollToAnchor(d)}}}}),anchor_vue_vue_type_style_index_0_scoped_45ed501a_lang="";function _sfc_ssrRender$b(e,t,n,r,c,d,g,o){const v=resolveComponent("i18n"),x=resolveComponent("divider");e.article?(t(`<div${ssrRenderAttrs(mergeProps({class:"anchor"},r))} data-v-45ed501a><button class="header"${ssrRenderAttr("title",e.article.title)} data-v-45ed501a><div class="title" data-v-45ed501a>${ssrInterpolate(e.article.title)}</div><div class="read" data-v-45ed501a>`),t(ssrRenderComponent(v,null,{zh:withCtx((E,k,S,N)=>{if(k)k(`\u5171 ${ssrInterpolate(e.numberSplit(e.store.contentLength))} \u5B57\uFF0C\u9700\u9605\u8BFB ${ssrInterpolate(e.store.readMinutes)} \u5206\u949F`);else return[createTextVNode("\u5171 "+toDisplayString(e.numberSplit(e.store.contentLength))+" \u5B57\uFF0C\u9700\u9605\u8BFB "+toDisplayString(e.store.readMinutes)+" \u5206\u949F",1)]}),en:withCtx((E,k,S,N)=>{if(k)k(`${ssrInterpolate(e.numberSplit(e.store.contentLength))} words, ${ssrInterpolate(e.store.readMinutes)} min read`);else return[createTextVNode(toDisplayString(e.numberSplit(e.store.contentLength))+" words, "+toDisplayString(e.store.readMinutes)+" min read",1)]}),_:1},n)),t("</div></button>"),e.headings.length?(t(`<div class="catalogue" data-v-45ed501a><ul class="${ssrRenderClass([`indent-${e.minHeadingLevel}`,"list"])}" data-v-45ed501a><!--[-->`),ssrRenderList(e.headings,(E,k)=>{t(`<li${ssrRenderAttr("title",E.text)} class="${ssrRenderClass([`level-${E.level}`,"item"])}" data-v-45ed501a><i class="${ssrRenderClass([`icon-h-${E.level}`,"level iconfont"])}" data-v-45ed501a></i><span class="text" data-v-45ed501a>${ssrInterpolate(E.text)}</span></li>`)}),t("<!--]-->"),e.store.isLongContent&&!e.store.renderedFullContent?(t(`<li class="${ssrRenderClass([`level-${e.minHeadingLevel}`,"item readmore"])}" data-v-45ed501a><i class="level iconfont icon-loadmore" data-v-45ed501a></i><span class="text" data-v-45ed501a>`),t(ssrRenderComponent(v,{k:e.LanguageKey.ARTICLE_READ_ALL},null,n)),t("</span></li>")):t("<!---->"),t("</ul></div>")):t("<!---->"),t('<button class="link" data-v-45ed501a><i class="iconfont icon-heart" data-v-45ed501a></i>'),t(ssrRenderComponent(v,{zh:"\u6441\u8D5E",en:"Meta"},null,n)),t(ssrRenderComponent(x,{type:"vertical"},null,n)),t(`<span class="meta" data-v-45ed501a><i class="iconfont icon-like" data-v-45ed501a></i><span class="count" data-v-45ed501a>${ssrInterpolate(e.article.meta.likes)}</span></span>`),t(ssrRenderComponent(x,{type:"vertical"},null,n)),t(`<span class="meta" data-v-45ed501a><i class="iconfont icon-eye" data-v-45ed501a></i><span class="count" data-v-45ed501a>${ssrInterpolate(e.numberSplit(e.article.meta.views))}</span></span></button><button class="link" data-v-45ed501a><i class="iconfont icon-category" data-v-45ed501a></i>`),t(ssrRenderComponent(v,{zh:"\u76F8\u5173",en:"Related"},null,n)),t(ssrRenderComponent(x,{type:"vertical"},null,n)),t(`<span class="count" data-v-45ed501a>${ssrInterpolate(e.store.relatedArticles.length)}</span></button><button class="link" data-v-45ed501a><i class="iconfont icon-comment" data-v-45ed501a></i>`),t(ssrRenderComponent(v,{zh:"\u8BC4\u8BBA",en:"Comments"},null,n)),t(ssrRenderComponent(x,{type:"vertical"},null,n)),t(`<span class="count" data-v-45ed501a>${ssrInterpolate(e.article.meta.comments)}</span></button></div>`)):t("<!---->")}const _sfc_setup$b=_sfc_main$b.setup;_sfc_main$b.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/desktop/aside/anchor.vue"),_sfc_setup$b?_sfc_setup$b(e,t):void 0};const AsideAnchor=_export_sfc(_sfc_main$b,[["ssrRender",_sfc_ssrRender$b],["__scopeId","data-v-45ed501a"]]),_sfc_main$a=defineComponent({name:"DesktopAsideCalendar",setup(){const{i18n:e,isZhLang:t}=useEnhancer(),n=dateToHuman(new Date),r=reactive({month:0,year:1970,table:[]}),c={[Language.English]:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],[Language.Chinese]:["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u65E5"]},d=computed(()=>c[e.language.value]),g=computed(()=>{const k=r.year===n.year,S=r.month===n.month,N=k&&S;if(t.value){const L=`${r.year} \u5E74`,P=` ${r.month} \u6708`,O=N?` ${n.day} \u65E5`:"";return L+P+O}return humanDateToYMD(N?n:r," / ")}),o=k=>{const S=[],N=humanToDate({...k,day:1}),L=dateToHuman(N).week;for(let O=L-1;O>=0;O--){const V=cloneDate(N);V.setDate(V.getDate()-O),S.push(dateToHuman(V))}const P=35-S.length;for(let O=1;O<=P;O++){const V=cloneDate(N);V.setDate(V.getDate()+O),S.push(dateToHuman(V))}Object.assign(r,{year:k.year,month:k.month,table:S})},v=()=>{const k=r.month-1<=0;o({year:r.year-(k?1:0),month:k?12:r.month-1})},x=()=>{const k=r.month+1>=13;o({year:r.year+(k?1:0),month:k?1:r.month+1})},E=k=>{k.month<r.month?v():k.month>r.month&&x()};return o({year:n.year,month:n.month}),{tableView:r,headerText:g,weekDayTexts:d,toPrevMonth:v,toNextMonth:x,handleDayClick:E,isToday:k=>isSameHumanDay(k,n)}}}),calendar_vue_vue_type_style_index_0_scoped_48981900_lang="";function _sfc_ssrRender$a(e,t,n,r,c,d,g,o){t(`<div${ssrRenderAttrs(mergeProps({class:"calendar"},r))} data-v-48981900><div class="header" data-v-48981900><button class="item arrow" data-v-48981900><i class="iconfont icon-prev" data-v-48981900></i></button><span class="item year-month" data-v-48981900>${ssrInterpolate(e.headerText)}</span><button class="item arrow" data-v-48981900><i class="iconfont icon-next" data-v-48981900></i></button></div><ul class="weekdays" data-v-48981900><!--[-->`),ssrRenderList(e.weekDayTexts,(v,x)=>{t(`<li data-v-48981900>${ssrInterpolate(v)}</li>`)}),t('<!--]--></ul><ul class="days" data-v-48981900><!--[-->'),ssrRenderList(e.tableView.table,(v,x)=>{t(`<li data-v-48981900><div class="${ssrRenderClass([{today:e.isToday(v),other:v.month!==e.tableView.month},"item"])}" data-v-48981900>`),ssrRenderSlot(e.$slots,"day",v,()=>{t(`${ssrInterpolate(v.day)}`)},t,n),t("</div></li>")}),t("<!--]--></ul></div>")}const _sfc_setup$a=_sfc_main$a.setup;_sfc_main$a.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/calendar.vue"),_sfc_setup$a?_sfc_setup$a(e,t):void 0};const Calendar=_export_sfc(_sfc_main$a,[["ssrRender",_sfc_ssrRender$a],["__scopeId","data-v-48981900"]]),_sfc_main$9=defineComponent({name:"DesktopAsideCalendar",components:{Calendar},setup(){const{articleCalendar:e}=useStores(),t=r=>{var d;const c=humanDateToYMD(r);return((d=e.data.find(g=>g.date===c))==null?void 0:d.count)||0},n=r=>getDateFlowRoute(humanDateToYMD(r));return onMounted(()=>e.fetch()),{articlesIn:t,getDateRoute:n}}}),calendar_vue_vue_type_style_index_0_scoped_6248cde4_lang="";function _sfc_ssrRender$9(e,t,n,r,c,d,g,o){const v=resolveComponent("calendar",!0),x=resolveComponent("router-link");t(ssrRenderComponent(v,mergeProps({class:"calendar"},r),{day:withCtx((E,k,S,N)=>{if(k)e.articlesIn(E)>0?k(ssrRenderComponent(x,{class:"date-link",to:e.getDateRoute(E)},{default:withCtx((L,P,O,V)=>{if(P)P(`${ssrInterpolate(E.day)}`);else return[createTextVNode(toDisplayString(E.day),1)]}),_:2},S,N)):k(`<span class="date-span" data-v-6248cde4${N}>${ssrInterpolate(E.day)}</span>`);else return[e.articlesIn(E)>0?(openBlock(),createBlock(x,{key:0,class:"date-link",to:e.getDateRoute(E)},{default:withCtx(()=>[createTextVNode(toDisplayString(E.day),1)]),_:2},1032,["to"])):(openBlock(),createBlock("span",{key:1,class:"date-span"},toDisplayString(E.day),1))]}),_:1},n))}const _sfc_setup$9=_sfc_main$9.setup;_sfc_main$9.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/desktop/aside/calendar.vue"),_sfc_setup$9?_sfc_setup$9(e,t):void 0};const AsideCalendar=_export_sfc(_sfc_main$9,[["ssrRender",_sfc_ssrRender$9],["__scopeId","data-v-6248cde4"]]),ASIDE_STICKY_ELEMENT_ID="aside-sticky-module",_sfc_main$8=defineComponent({name:"DesktopAside",components:{AsideSearch,AsideStatistic,AsideArticle,AsideMammon,AsideCalendar,AsideTag,AsideAnchor},setup(){const e=useRoute(),t=computed(()=>isArticleDetail(e.name));let n=null;const r=ref(null),c=d=>{var o,v;r.value.clientHeight;const g=(v=(o=document.getElementById(MAIN_CONTENT_ELEMENT_ID))==null?void 0:o.children)==null?void 0:v[0];g&&g.clientHeight};return onMounted(()=>{nextTick$1(()=>{var d,g;n=new window.$StickyEvents({enabled:!0,stickySelector:`#${ASIDE_STICKY_ELEMENT_ID}`}),(g=(d=n.stickyElements)==null?void 0:d[0])==null||g.addEventListener(window.$StickyEvents.CHANGE,c)})}),onBeforeUnmount(()=>{var d,g;(g=(d=n.stickyElements)==null?void 0:d[0])==null||g.removeEventListener(window.$StickyEvents.CHANGE,c),n.disableEvents(!1),n=null}),{isArticlePage:t,ASIDE_ELEMENT_ID,ASIDE_STICKY_ELEMENT_ID,element:r}}}),index_vue_vue_type_style_index_0_scoped_798f01a9_lang="";function _sfc_ssrRender$8(e,t,n,r,c,d,g,o){const v=resolveComponent("aside-search"),x=resolveComponent("aside-statistic"),E=resolveComponent("aside-article"),k=resolveComponent("client-only"),S=resolveComponent("aside-mammon"),N=resolveComponent("aside-calendar"),L=resolveComponent("Adsense"),P=resolveComponent("aside-anchor"),O=resolveComponent("aside-tag");t(`<aside${ssrRenderAttrs(mergeProps({id:e.ASIDE_ELEMENT_ID,class:"desktop-aside",ref:"element"},r))} data-v-798f01a9><div class="module" data-v-798f01a9>`),t(ssrRenderComponent(v,null,null,n)),t('</div><div class="module" data-v-798f01a9>'),t(ssrRenderComponent(x,null,null,n)),t('</div><div class="module" data-v-798f01a9>'),t(ssrRenderComponent(E,null,null,n)),t("</div>"),t(ssrRenderComponent(k,{transition:""},{default:withCtx((V,z,U,W)=>{if(z)z(`<div class="module mammon" data-v-798f01a9${W}>`),z(ssrRenderComponent(S,null,null,U,W)),z("</div>");else return[createVNode("div",{class:"module mammon"},[createVNode(S)])]}),_:1},n)),t('<div class="module" data-v-798f01a9>'),t(ssrRenderComponent(N,null,null,n)),t(`</div><div${ssrRenderAttr("id",e.ASIDE_STICKY_ELEMENT_ID)} class="aside-sticky-box" data-v-798f01a9><div class="module mammon-square" data-v-798f01a9>`),t(ssrRenderComponent(k,null,{default:withCtx((V,z,U,W)=>{if(z)z(ssrRenderComponent(L,{"ins-style":"display:inline-block;width:250px;height:250px","data-ad-slot":"6138120718",class:"content"},null,U,W));else return[createVNode(L,{"ins-style":"display:inline-block;width:250px;height:250px","data-ad-slot":"6138120718",class:"content"})]}),_:1},n)),t('</div><div class="module" data-v-798f01a9>'),e.isArticlePage?t(ssrRenderComponent(k,null,{default:withCtx((V,z,U,W)=>{if(z)z(ssrRenderComponent(P,{class:"sticky-module"},null,U,W));else return[createVNode(P,{class:"sticky-module"})]}),_:1},n)):t(ssrRenderComponent(O,{class:"sticky-module"},null,n)),t("</div></div></aside>")}const _sfc_setup$8=_sfc_main$8.setup;_sfc_main$8.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/desktop/aside/index.vue"),_sfc_setup$8?_sfc_setup$8(e,t):void 0};const AsideView$1=_export_sfc(_sfc_main$8,[["ssrRender",_sfc_ssrRender$8],["__scopeId","data-v-798f01a9"]]),_sfc_main$7=defineComponent({name:"DesktopHeader",setup(){const{i18n:e,gtag:t,theme:n,globalState:r}=useEnhancer(),c=computed(()=>!r.layoutColumn.value.isNormal),d=n.theme,g=computed(()=>({[Theme.Light]:"icon-sun",[Theme.Dark]:"icon-moon"})[d.value]),o=()=>{n.toggle(),t==null||t.event("switch_theme",{event_category:GAEventCategories.Widget,event_label:n.theme.value})},v=()=>{var E;e.toggle(),t==null||t.event("switch_language",{event_category:GAEventCategories.Widget,event_label:(E=e.l.value)==null?void 0:E.name})};return{menus,META,HEADER_ELEMENT_ID,LanguageKey,isEnabledNav:c,handleRootNavEvent:()=>{t==null||t.event("root_header_home_nav",{event_category:GAEventCategories.Universal})},t:e.t,language:e.language,tooggleLanguage:v,theme:d,themeIcon:g,toggleTheme:o}}}),header_vue_vue_type_style_index_0_scoped_f5622f08_lang="";function _sfc_ssrRender$7(e,t,n,r,c,d,g,o){const v=resolveComponent("uimage"),x=resolveComponent("webfont"),E=resolveComponent("i18n"),k=resolveComponent("router-link"),S=resolveComponent("ulink");t(`<header${ssrRenderAttrs(mergeProps({id:e.HEADER_ELEMENT_ID,class:["header",{"enable-nav":e.isEnabledNav}]},r))} data-v-f5622f08><div class="header-container container" data-v-f5622f08><div class="header-header" data-v-f5622f08>`),t(ssrRenderComponent(v,{cdn:"",src:"/images/logo.svg",class:"header-logo",alt:e.META.title},null,n)),t(ssrRenderComponent(x,{class:"header-slogan"},{default:withCtx((N,L,P,O)=>{if(L)L(ssrRenderComponent(E,{k:e.LanguageKey.APP_SLOGAN},null,P,O));else return[createVNode(E,{k:e.LanguageKey.APP_SLOGAN},null,8,["k"])]}),_:1},n)),t(ssrRenderComponent(k,{to:"/",class:"header-link",title:e.META.title,onMousedown:e.handleRootNavEvent},null,n)),t('</div><div class="toolbox" data-v-f5622f08>'),e.isEnabledNav?t('<button class="button menu" data-v-f5622f08><i class="iconfont icon-top-menu" data-v-f5622f08></i></button>'):t("<!---->"),t(`<button class="button language" title="Switch language" data-v-f5622f08>${ssrInterpolate(e.language||"-")}</button><button class="${ssrRenderClass([e.theme,"button theme"])}" data-v-f5622f08><i class="${ssrRenderClass([e.themeIcon,"iconfont"])}" data-v-f5622f08></i></button></div></div><div class="header-nav" data-v-f5622f08><nav class="nav-list container" data-v-f5622f08><!--[-->`),ssrRenderList(e.menus,(N,L)=>{t("<!--[-->"),L>0?t('<span class="divider" data-v-f5622f08></span>'):t("<!---->"),t(ssrRenderComponent(S,{class:["item",N.id],to:N.route,href:N.url},{default:withCtx((P,O,V,z)=>{if(O)N.imageIcon?O(ssrRenderComponent(v,{class:"image-icon",src:N.imageIcon},null,V,z)):N.icon?O(`<i class="${ssrRenderClass([N.icon,"font-icon iconfont"])}" data-v-f5622f08${z}></i>`):O("<!---->"),O(ssrRenderComponent(x,{class:"text",bolder:"",uppercase:!N.disabledUppercase},{default:withCtx((U,W,Z,re)=>{if(W)W(ssrRenderComponent(E,{k:N.i18nKey},null,Z,re));else return[createVNode(E,{k:N.i18nKey},null,8,["k"])]}),_:2},V,z)),N.hot?O(`<span class="superscript" data-v-f5622f08${z}><i class="iconfont icon-hot-fill" data-v-f5622f08${z}></i></span>`):O("<!---->"),N.newWindow?O(`<span class="new-window" data-v-f5622f08${z}><i class="iconfont icon-new-window-s" data-v-f5622f08${z}></i></span>`):O("<!---->");else return[N.imageIcon?(openBlock(),createBlock(v,{key:0,class:"image-icon",src:N.imageIcon},null,8,["src"])):N.icon?(openBlock(),createBlock("i",{key:1,class:["font-icon iconfont",N.icon]},null,2)):createCommentVNode("",!0),createVNode(x,{class:"text",bolder:"",uppercase:!N.disabledUppercase},{default:withCtx(()=>[createVNode(E,{k:N.i18nKey},null,8,["k"])]),_:2},1032,["uppercase"]),N.hot?(openBlock(),createBlock("span",{key:2,class:"superscript"},[createVNode("i",{class:"iconfont icon-hot-fill"})])):createCommentVNode("",!0),N.newWindow?(openBlock(),createBlock("span",{key:3,class:"new-window"},[createVNode("i",{class:"iconfont icon-new-window-s"})])):createCommentVNode("",!0)]}),_:2},n)),t("<!--]-->")}),t("<!--]--></nav></div></header>")}const _sfc_setup$7=_sfc_main$7.setup;_sfc_main$7.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/desktop/header.vue"),_sfc_setup$7?_sfc_setup$7(e,t):void 0};const HeaderView$1=_export_sfc(_sfc_main$7,[["ssrRender",_sfc_ssrRender$7],["__scopeId","data-v-f5622f08"]]),_sfc_main$6=defineComponent({name:"DesktopFooter",setup(){const{globalState:e,gtag:t}=useEnhancer();return{FOOTER_ELEMENT_ID,VALUABLE_LINKS,handleStatementModal:()=>{e.toggleSwitcher("statement",!0),t==null||t.event("statement_modal",{event_category:GAEventCategories.Universal})}}}}),footer_vue_vue_type_style_index_0_scoped_a7213f47_lang="";function _sfc_ssrRender$6(e,t,n,r,c,d,g,o){const v=resolveComponent("container"),x=resolveComponent("ulink"),E=resolveComponent("divider"),k=resolveComponent("i18n");t(ssrRenderComponent(v,mergeProps({tag:"footer",id:e.FOOTER_ELEMENT_ID,class:"footer"},r),{default:withCtx((S,N,L,P)=>{if(N)N(ssrRenderComponent(x,{class:"sitemap-btn",href:e.VALUABLE_LINKS.SITE_MAP},{default:withCtx((O,V,z,U)=>{if(V)V("sitemap.xml");else return[createTextVNode("sitemap.xml")]}),_:1},L,P)),N(ssrRenderComponent(E,{type:"vertical"},null,L,P)),N(ssrRenderComponent(k,{zh:"\u7531 ",en:"Powered By "},null,L,P)),N(ssrRenderComponent(x,{class:"item",href:e.VALUABLE_LINKS.GITHUB_BLOG_STAR_LIST},{default:withCtx((O,V,z,U)=>{if(V)V("NodePress");else return[createTextVNode("NodePress")]}),_:1},L,P)),N(ssrRenderComponent(k,{zh:"\u3001",en:", "},null,L,P)),N(ssrRenderComponent(x,{class:"item",href:e.VALUABLE_LINKS.GITHUB_SURMON_ME},{default:withCtx((O,V,z,U)=>{if(V)V("Vue");else return[createTextVNode("Vue")]}),_:1},L,P)),N(ssrRenderComponent(k,{zh:" \u548C \u65E5\u6708\u661F\u8FB0 \u5F3A\u529B\u9A71\u52A8",en:""},null,L,P)),N(ssrRenderComponent(E,{type:"vertical"},null,L,P)),N(`<a class="statement" href="javascript:void(0)" data-v-a7213f47${P}>`),N(ssrRenderComponent(k,{zh:"\u5468\u77E5",en:"FAQ"},null,L,P)),N("</a>"),N(ssrRenderComponent(E,{type:"vertical"},null,L,P)),N(ssrRenderComponent(x,{href:e.VALUABLE_LINKS.UPTIME_STATUS},{default:withCtx((O,V,z,U)=>{if(V)V(ssrRenderComponent(k,{zh:"\u5B9E\u6001",en:"STATUS"},null,z,U));else return[createVNode(k,{zh:"\u5B9E\u6001",en:"STATUS"})]}),_:1},L,P));else return[createVNode(x,{class:"sitemap-btn",href:e.VALUABLE_LINKS.SITE_MAP},{default:withCtx(()=>[createTextVNode("sitemap.xml")]),_:1},8,["href"]),createVNode(E,{type:"vertical"}),createVNode(k,{zh:"\u7531 ",en:"Powered By "}),createVNode(x,{class:"item",href:e.VALUABLE_LINKS.GITHUB_BLOG_STAR_LIST},{default:withCtx(()=>[createTextVNode("NodePress")]),_:1},8,["href"]),createVNode(k,{zh:"\u3001",en:", "}),createVNode(x,{class:"item",href:e.VALUABLE_LINKS.GITHUB_SURMON_ME},{default:withCtx(()=>[createTextVNode("Vue")]),_:1},8,["href"]),createVNode(k,{zh:" \u548C \u65E5\u6708\u661F\u8FB0 \u5F3A\u529B\u9A71\u52A8",en:""}),createVNode(E,{type:"vertical"}),createVNode("a",{class:"statement",href:"javascript:void(0)",onClick:e.handleStatementModal},[createVNode(k,{zh:"\u5468\u77E5",en:"FAQ"})],8,["onClick"]),createVNode(E,{type:"vertical"}),createVNode(x,{href:e.VALUABLE_LINKS.UPTIME_STATUS},{default:withCtx(()=>[createVNode(k,{zh:"\u5B9E\u6001",en:"STATUS"})]),_:1},8,["href"])]}),_:1},n))}const _sfc_setup$6=_sfc_main$6.setup;_sfc_main$6.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/desktop/footer.vue"),_sfc_setup$6?_sfc_setup$6(e,t):void 0};const FooterView$1=_export_sfc(_sfc_main$6,[["ssrRender",_sfc_ssrRender$6],["__scopeId","data-v-a7213f47"]]),_sfc_main$5=defineComponent({name:"DesktopMain",components:{Share,Feedback,Wallpaper,Statement,SponsorTabs,SponsorProvider,MusicPlayerHandle,Toolbox,Wallflower,Background,HeaderView:HeaderView$1,FooterView:FooterView$1,AsideView:AsideView$1,NavView},setup(){const e=useSponsorState(),t=useWallpaperStore(),{route:n,globalState:r}=useEnhancer(),c=()=>{r.setLayoutColumn(getLayoutByRouteMeta(n.meta))},d=()=>{r.toggleSwitcher("sponsor",!1)},g=()=>{r.toggleSwitcher("feedback",!1)},o=()=>{r.toggleSwitcher("statement",!1)};return onMounted(()=>{t.fetch(),useMusic().init()}),{LanguageKey,MAIN_ELEMENT_ID,MAIN_CONTENT_ELEMENT_ID,switcher:r.switcher,layoutColumn:r.layoutColumn,sponsorState:e,handlePageTransitionDone:c,handleSponsorModalClose:d,handleFeedbackModalClose:g,handleStatementModalClose:o}}}),main_vue_vue_type_style_index_0_scoped_3051c403_lang="";function _sfc_ssrRender$5(e,t,n,r,c,d,g,o){const v=resolveComponent("background"),x=resolveComponent("wallflower"),E=resolveComponent("client-only"),k=resolveComponent("popup"),S=resolveComponent("sponsor-tabs"),N=resolveComponent("sponsor-provider"),L=resolveComponent("feedback"),P=resolveComponent("statement"),O=resolveComponent("share"),V=resolveComponent("wallpaper"),z=resolveComponent("toolbox"),U=resolveComponent("music-player-handle"),W=resolveComponent("header-view"),Z=resolveComponent("nav-view"),re=resolveComponent("aside-view"),oe=resolveComponent("router-view"),se=resolveComponent("footer-view");t(`<div${ssrRenderAttrs(mergeProps({class:"desktop-main"},r))} data-v-3051c403>`),t(ssrRenderComponent(v,null,null,n)),t(ssrRenderComponent(x,null,null,n)),t(ssrRenderComponent(E,null,{default:withCtx((ce,me,we,ae)=>{if(me)me(ssrRenderComponent(k,{visible:e.switcher.sponsor,onClose:e.handleSponsorModalClose},{default:withCtx((Ce,Fe,it,_e)=>{if(Fe)Fe(`<div class="sponsor-modal" data-v-3051c403${_e}><div class="sponsor" data-v-3051c403${_e}>`),Fe(ssrRenderComponent(S,{class:"tabs",state:e.sponsorState,"hide-title":!0},null,it,_e)),Fe(ssrRenderComponent(N,{class:"provider",state:e.sponsorState,"max-sponsors":9},null,it,_e)),Fe("</div></div>");else return[createVNode("div",{class:"sponsor-modal"},[createVNode("div",{class:"sponsor"},[createVNode(S,{class:"tabs",state:e.sponsorState,"hide-title":!0},null,8,["state"]),createVNode(N,{class:"provider",state:e.sponsorState,"max-sponsors":9},null,8,["state"])])])]}),_:1},we,ae)),me(ssrRenderComponent(k,{visible:e.switcher.feedback,"mask-close":!1,"scroll-close":!1,onClose:e.handleFeedbackModalClose},{default:withCtx((Ce,Fe,it,_e)=>{if(Fe)Fe(ssrRenderComponent(L,{onClose:e.handleFeedbackModalClose},null,it,_e));else return[createVNode(L,{onClose:e.handleFeedbackModalClose},null,8,["onClose"])]}),_:1},we,ae)),me(ssrRenderComponent(k,{visible:e.switcher.statement,"scroll-close":!1,onClose:e.handleStatementModalClose},{default:withCtx((Ce,Fe,it,_e)=>{if(Fe)Fe(ssrRenderComponent(P,null,null,it,_e));else return[createVNode(P)]}),_:1},we,ae));else return[createVNode(k,{visible:e.switcher.sponsor,onClose:e.handleSponsorModalClose},{default:withCtx(()=>[createVNode("div",{class:"sponsor-modal"},[createVNode("div",{class:"sponsor"},[createVNode(S,{class:"tabs",state:e.sponsorState,"hide-title":!0},null,8,["state"]),createVNode(N,{class:"provider",state:e.sponsorState,"max-sponsors":9},null,8,["state"])])])]),_:1},8,["visible","onClose"]),createVNode(k,{visible:e.switcher.feedback,"mask-close":!1,"scroll-close":!1,onClose:e.handleFeedbackModalClose},{default:withCtx(()=>[createVNode(L,{onClose:e.handleFeedbackModalClose},null,8,["onClose"])]),_:1},8,["visible","onClose"]),createVNode(k,{visible:e.switcher.statement,"scroll-close":!1,onClose:e.handleStatementModalClose},{default:withCtx(()=>[createVNode(P)]),_:1},8,["visible","onClose"])]}),_:1},n)),e.layoutColumn.isFull?t("<!---->"):(t("<!--[-->"),t(ssrRenderComponent(O,{class:"main-share"},null,n)),t(ssrRenderComponent(V,null,null,n)),t(ssrRenderComponent(z,null,null,n)),t(ssrRenderComponent(E,null,{default:withCtx((ce,me,we,ae)=>{if(me)me(ssrRenderComponent(U,null,null,we,ae));else return[createVNode(U)]}),_:1},n)),t("<!--]-->")),t(ssrRenderComponent(W,null,null,n)),t(`<main${ssrRenderAttr("id",e.MAIN_ELEMENT_ID)} class="${ssrRenderClass([{"full-page":e.layoutColumn.isFull},"main-container"])}" data-v-3051c403>`),e.layoutColumn.isNormal?t(ssrRenderComponent(Z,{class:"nav-view"},null,n)):t("<!---->"),e.layoutColumn.isNormal?t(ssrRenderComponent(re,{class:"aside-view"},null,n)):t("<!---->"),t(`<div${ssrRenderAttr("id",e.MAIN_CONTENT_ELEMENT_ID)} class="${ssrRenderClass([{"layout-normal":e.layoutColumn.isNormal,"layout-wide":e.layoutColumn.isWide,"layout-full":e.layoutColumn.isFull},"main-view"])}" data-v-3051c403>`),t(ssrRenderComponent(oe,null,{default:withCtx(({Component:ce,route:me},we,ae,Ce)=>{if(we)we(`<div class="router-view" data-v-3051c403${Ce}>`),ssrRenderSuspense(we,{default:()=>{renderVNode(we,createVNode(resolveDynamicComponent(ce),{key:me.name},null),ae,Ce)},_:2}),we("</div>");else return[createVNode("div",{class:"router-view"},[createVNode(Transition,{name:"page",mode:"out-in",onBeforeEnter:e.handlePageTransitionDone},{default:withCtx(()=>[(openBlock(),createBlock(Suspense,null,{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(ce),{key:me.name}))]),_:2},1024))]),_:2},1032,["onBeforeEnter"])])]}),_:1},n)),t("</div></main>"),t(ssrRenderComponent(se,{class:"footer-view"},null,n)),t("</div>")}const _sfc_setup$5=_sfc_main$5.setup;_sfc_main$5.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/desktop/main.vue"),_sfc_setup$5?_sfc_setup$5(e,t):void 0};const DesktopMain=_export_sfc(_sfc_main$5,[["ssrRender",_sfc_ssrRender$5],["__scopeId","data-v-3051c403"]]),_sfc_main$4=defineComponent({name:"MobileHeader",props:{opened:{type:Boolean,required:!0}},emits:["open","close"],setup(e,t){const{i18n:n,route:r,router:c}=useEnhancer(),d=ref(null),g=reactive({open:!1,keyword:""});onMounted(()=>{isSearchFlow(r.name)&&(g.keyword=r.params.keyword)});const o=()=>{t.emit(e.opened?"close":"open")},v=()=>{g.open=!0,nextTick$1(()=>{d.value.focus()})},x=()=>{g.open=!1},E=()=>{const k=g.keyword.trim();k&&c.push({name:RouteName.SearchFlow,params:{keyword:k}})};return watch(()=>c.currentRoute.value,()=>{nextTick$1(()=>{x(),t.emit("close")})}),{t:n.t,LanguageKey,searchState:g,inputElement:d,openSearch:v,submitSearch:E,cancelSearch:x,handleMenuToggle:o}}}),header_vue_vue_type_style_index_0_scoped_b60ccaa0_lang="";function _sfc_ssrRender$4(e,t,n,r,c,d,g,o){const v=resolveComponent("router-link"),x=resolveComponent("uimage");t(`<header${ssrRenderAttrs(mergeProps({class:"header"},r))} data-v-b60ccaa0><div class="${ssrRenderClass([{actived:e.searchState.open},"search"])}" data-v-b60ccaa0><input class="input" autocomplete="off" type="text" maxlength="16" required${ssrRenderAttr("placeholder",e.t(e.LanguageKey.SEARCH_PLACEHOLDER))}${ssrRenderAttr("value",e.searchState.keyword)} data-v-b60ccaa0><span class="close" data-v-b60ccaa0><i class="iconfont icon-cancel" data-v-b60ccaa0></i></span></div>`),e.searchState.open?t('<div class="search-mask" data-v-b60ccaa0></div>'):t("<!---->"),t('<nav class="navbar" data-v-b60ccaa0><button class="navbar-menu" data-v-b60ccaa0><i class="iconfont icon-menu" data-v-b60ccaa0></i></button>'),t(ssrRenderComponent(v,{to:"/",class:"navbar-logo"},{default:withCtx((E,k,S,N)=>{if(k)k(ssrRenderComponent(x,{class:"image",cdn:"",src:"/images/logo.svg"},null,S,N));else return[createVNode(x,{class:"image",cdn:"",src:"/images/logo.svg"})]}),_:1},n)),t('<button class="navbar-search" data-v-b60ccaa0><i class="iconfont icon-search" data-v-b60ccaa0></i></button></nav></header>')}const _sfc_setup$4=_sfc_main$4.setup;_sfc_main$4.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/mobile/header.vue"),_sfc_setup$4?_sfc_setup$4(e,t):void 0};const HeaderView=_export_sfc(_sfc_main$4,[["ssrRender",_sfc_ssrRender$4],["__scopeId","data-v-b60ccaa0"]]),_sfc_main$3=defineComponent({name:"MobileFooter",setup(){return{title:META.title,year:new Date().getFullYear()}}}),footer_vue_vue_type_style_index_0_scoped_9d9db550_lang="";function _sfc_ssrRender$3(e,t,n,r,c,d,g,o){t(`<footer${ssrRenderAttrs(mergeProps({class:"footer"},r))} data-v-9d9db550><div class="footer-content" data-v-9d9db550>\xA9${ssrInterpolate(e.year)}\xA0\xA0${ssrInterpolate(e.title)}</div></footer>`)}const _sfc_setup$3=_sfc_main$3.setup;_sfc_main$3.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/mobile/footer.vue"),_sfc_setup$3?_sfc_setup$3(e,t):void 0};const FooterView=_export_sfc(_sfc_main$3,[["ssrRender",_sfc_ssrRender$3],["__scopeId","data-v-9d9db550"]]),_sfc_main$2=defineComponent({name:"MobileAside",setup(){const{theme:e,i18n:t}=useEnhancer(),n=useAdminInfoStore(),r=computed(()=>{var g;return((g=n.data)==null?void 0:g.avatar)||getDefaultAvatar()}),c=computed(()=>({[Theme.Light]:"icon-sun",[Theme.Dark]:"icon-moon"})[e.theme.value]),d=computed(()=>({[Language.Chinese]:"icon-chinese",[Language.English]:"icon-english"})[t.language.value]);return useUniversalFetch(()=>n.fetch()),{VALUABLE_LINKS,LanguageKey,RouteName,CategorySlug,getPageRoute,getCategoryFlowRoute,avatar:r,author:META.author,themeIcon:c,languageIcon:d,toggleTheme:e.toggle,tooggleLanguage:t.toggle}}}),aside_vue_vue_type_style_index_0_scoped_0c4c875b_lang="";function _sfc_ssrRender$2(e,t,n,r,c,d,g,o){const v=resolveComponent("uimage"),x=resolveComponent("webfont"),E=resolveComponent("i18n"),k=resolveComponent("router-link"),S=resolveComponent("ulink");t(`<aside${ssrRenderAttrs(mergeProps({class:"aside"},r))} data-v-0c4c875b><div class="aside-user" data-v-0c4c875b><div class="avatar" data-v-0c4c875b>`),t(ssrRenderComponent(v,{src:e.avatar,alt:e.author},null,n)),t(`</div><div class="profile" data-v-0c4c875b><h3 class="name" data-v-0c4c875b>${ssrInterpolate(e.author)}</h3>`),t(ssrRenderComponent(x,{class:"slogan"},{default:withCtx((N,L,P,O)=>{if(L)L(ssrRenderComponent(E,{k:e.LanguageKey.APP_SLOGAN},null,P,O));else return[createVNode(E,{k:e.LanguageKey.APP_SLOGAN},null,8,["k"])]}),_:1},n)),t(`</div></div><div class="aside-tool" data-v-0c4c875b><div class="item" data-v-0c4c875b><i class="${ssrRenderClass([e.themeIcon,"iconfont"])}" data-v-0c4c875b></i></div><div class="item" data-v-0c4c875b><i class="${ssrRenderClass([e.languageIcon,"iconfont"])}" data-v-0c4c875b></i></div></div><div class="aside-nav" data-v-0c4c875b><nav class="nav-list" data-v-0c4c875b>`),t(ssrRenderComponent(k,{to:"/",class:"item"},{default:withCtx((N,L,P,O)=>{if(L)L(`<i class="iconfont icon-home" data-v-0c4c875b${O}></i>`),L(ssrRenderComponent(x,{bolder:"",uppercase:""},{default:withCtx((V,z,U,W)=>{if(z)z(ssrRenderComponent(E,{k:e.LanguageKey.PAGE_HOME},null,U,W));else return[createVNode(E,{k:e.LanguageKey.PAGE_HOME},null,8,["k"])]}),_:1},P,O));else return[createVNode("i",{class:"iconfont icon-home"}),createVNode(x,{bolder:"",uppercase:""},{default:withCtx(()=>[createVNode(E,{k:e.LanguageKey.PAGE_HOME},null,8,["k"])]),_:1})]}),_:1},n)),t(ssrRenderComponent(k,{class:"item",to:e.getCategoryFlowRoute(e.CategorySlug.Code)},{default:withCtx((N,L,P,O)=>{if(L)L(`<i class="iconfont icon-code" data-v-0c4c875b${O}></i>`),L(ssrRenderComponent(x,{bolder:"",uppercase:""},{default:withCtx((V,z,U,W)=>{if(z)z(ssrRenderComponent(E,{k:e.LanguageKey.CATEGORY_CODE},null,U,W));else return[createVNode(E,{k:e.LanguageKey.CATEGORY_CODE},null,8,["k"])]}),_:1},P,O));else return[createVNode("i",{class:"iconfont icon-code"}),createVNode(x,{bolder:"",uppercase:""},{default:withCtx(()=>[createVNode(E,{k:e.LanguageKey.CATEGORY_CODE},null,8,["k"])]),_:1})]}),_:1},n)),t(ssrRenderComponent(k,{class:"item",to:e.getCategoryFlowRoute(e.CategorySlug.Insight)},{default:withCtx((N,L,P,O)=>{if(L)L(`<i class="iconfont icon-insight" data-v-0c4c875b${O}></i>`),L(ssrRenderComponent(x,{bolder:"",uppercase:""},{default:withCtx((V,z,U,W)=>{if(z)z(ssrRenderComponent(E,{k:e.LanguageKey.CATEGORY_INSIGHT},null,U,W));else return[createVNode(E,{k:e.LanguageKey.CATEGORY_INSIGHT},null,8,["k"])]}),_:1},P,O));else return[createVNode("i",{class:"iconfont icon-insight"}),createVNode(x,{bolder:"",uppercase:""},{default:withCtx(()=>[createVNode(E,{k:e.LanguageKey.CATEGORY_INSIGHT},null,8,["k"])]),_:1})]}),_:1},n)),t(ssrRenderComponent(S,{class:"item",href:e.VALUABLE_LINKS.GITHUB},{default:withCtx((N,L,P,O)=>{if(L)L(`<i class="iconfont icon-github" data-v-0c4c875b${O}></i>`),L(ssrRenderComponent(x,{bolder:"",uppercase:""},{default:withCtx((V,z,U,W)=>{if(z)z(ssrRenderComponent(E,{k:e.LanguageKey.PAGE_GITHUB},null,U,W));else return[createVNode(E,{k:e.LanguageKey.PAGE_GITHUB},null,8,["k"])]}),_:1},P,O)),L(`<span class="newscript" data-v-0c4c875b${O}><i class="iconfont icon-new-window-s" data-v-0c4c875b${O}></i></span>`);else return[createVNode("i",{class:"iconfont icon-github"}),createVNode(x,{bolder:"",uppercase:""},{default:withCtx(()=>[createVNode(E,{k:e.LanguageKey.PAGE_GITHUB},null,8,["k"])]),_:1}),createVNode("span",{class:"newscript"},[createVNode("i",{class:"iconfont icon-new-window-s"})])]}),_:1},n)),t(ssrRenderComponent(k,{class:"item",to:e.getPageRoute(e.RouteName.Archive)},{default:withCtx((N,L,P,O)=>{if(L)L(`<i class="iconfont icon-quill" data-v-0c4c875b${O}></i>`),L(ssrRenderComponent(x,{bolder:"",uppercase:""},{default:withCtx((V,z,U,W)=>{if(z)z(ssrRenderComponent(E,{k:e.LanguageKey.PAGE_ARCHIVE},null,U,W));else return[createVNode(E,{k:e.LanguageKey.PAGE_ARCHIVE},null,8,["k"])]}),_:1},P,O));else return[createVNode("i",{class:"iconfont icon-quill"}),createVNode(x,{bolder:"",uppercase:""},{default:withCtx(()=>[createVNode(E,{k:e.LanguageKey.PAGE_ARCHIVE},null,8,["k"])]),_:1})]}),_:1},n)),t(ssrRenderComponent(k,{class:"item",to:e.getPageRoute(e.RouteName.About)},{default:withCtx((N,L,P,O)=>{if(L)L(`<i class="iconfont icon-swordsman" data-v-0c4c875b${O}></i>`),L(ssrRenderComponent(x,{bolder:"",uppercase:""},{default:withCtx((V,z,U,W)=>{if(z)z(ssrRenderComponent(E,{k:e.LanguageKey.PAGE_ABOUT},null,U,W));else return[createVNode(E,{k:e.LanguageKey.PAGE_ABOUT},null,8,["k"])]}),_:1},P,O));else return[createVNode("i",{class:"iconfont icon-swordsman"}),createVNode(x,{bolder:"",uppercase:""},{default:withCtx(()=>[createVNode(E,{k:e.LanguageKey.PAGE_ABOUT},null,8,["k"])]),_:1})]}),_:1},n)),t(ssrRenderComponent(k,{class:"item guestbook",to:e.getPageRoute(e.RouteName.Guestbook)},{default:withCtx((N,L,P,O)=>{if(L)L(`<i class="iconfont icon-comment" data-v-0c4c875b${O}></i>`),L(ssrRenderComponent(x,{bolder:"",uppercase:""},{default:withCtx((V,z,U,W)=>{if(z)z(ssrRenderComponent(E,{k:e.LanguageKey.PAGE_GUESTBOOK},null,U,W));else return[createVNode(E,{k:e.LanguageKey.PAGE_GUESTBOOK},null,8,["k"])]}),_:1},P,O));else return[createVNode("i",{class:"iconfont icon-comment"}),createVNode(x,{bolder:"",uppercase:""},{default:withCtx(()=>[createVNode(E,{k:e.LanguageKey.PAGE_GUESTBOOK},null,8,["k"])]),_:1})]}),_:1},n)),t(ssrRenderComponent(k,{class:"item app",to:e.getPageRoute(e.RouteName.App)},{default:withCtx((N,L,P,O)=>{if(L)L(ssrRenderComponent(v,{cdn:"",class:"icon",src:"/images/page-app/logo.png"},null,P,O)),L(ssrRenderComponent(x,{bolder:"",uppercase:""},{default:withCtx((V,z,U,W)=>{if(z)z(ssrRenderComponent(E,{k:e.LanguageKey.PAGE_APP},null,U,W));else return[createVNode(E,{k:e.LanguageKey.PAGE_APP},null,8,["k"])]}),_:1},P,O));else return[createVNode(v,{cdn:"",class:"icon",src:"/images/page-app/logo.png"}),createVNode(x,{bolder:"",uppercase:""},{default:withCtx(()=>[createVNode(E,{k:e.LanguageKey.PAGE_APP},null,8,["k"])]),_:1})]}),_:1},n)),t("</nav></div></aside>")}const _sfc_setup$2=_sfc_main$2.setup;_sfc_main$2.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/mobile/aside.vue"),_sfc_setup$2?_sfc_setup$2(e,t):void 0};const AsideView=_export_sfc(_sfc_main$2,[["ssrRender",_sfc_ssrRender$2],["__scopeId","data-v-0c4c875b"]]),_sfc_main$1=defineComponent({name:"MobileMain",components:{HeaderView,FooterView,AsideView},setup(){const{route:e}=useEnhancer(),t=computed(()=>getPageURL(e.fullPath)),n=ref(!1),r=()=>n.value=!0,c=()=>n.value=!1;return watch(n,d=>{}),{pageURL:t,isOpenedAside:n,openAside:r,closeAside:c}}}),main_vue_vue_type_style_index_0_scoped_72a5036f_lang="";function _sfc_ssrRender$1(e,t,n,r,c,d,g,o){const v=resolveComponent("aside-view"),x=resolveComponent("header-view"),E=resolveComponent("router-view"),k=resolveComponent("i18n"),S=resolveComponent("footer-view");t(`<div${ssrRenderAttrs(mergeProps({class:"mobile-main"},r))} data-v-72a5036f><div class="${ssrRenderClass([{opened:e.isOpenedAside},"asider"])}" data-v-72a5036f>`),t(ssrRenderComponent(v,{class:"aside"},null,n)),t(`</div><div class="${ssrRenderClass([{opened:e.isOpenedAside},"main"])}" data-v-72a5036f>`),e.isOpenedAside?t('<div class="close-mask" data-v-72a5036f></div>'):t("<!---->"),t(ssrRenderComponent(x,{opened:e.isOpenedAside,onClose:e.closeAside,onOpen:e.openAside},null,n)),t('<main class="main-container" data-v-72a5036f>'),t(ssrRenderComponent(E,{name:"mobile"},{default:withCtx(({Component:N,route:L},P,O,V)=>{if(P)L.meta.responsive?(P(`<div class="route-view" data-v-72a5036f${V}>`),renderVNode(P,createVNode(resolveDynamicComponent(N),{key:L.name},null),O,V),P("</div>")):(P(`<div class="fallback" data-v-72a5036f${V}><i class="iconfont icon-desktop" data-v-72a5036f${V}></i><p class="text" data-v-72a5036f${V}>`),P(ssrRenderComponent(k,{zh:"\u8BF7\u5728 PC \u7AEF\u8BBF\u95EE\u4EE5\u83B7\u5F97\u6700\u4F73\u4F53\u9A8C",en:"This page only support visit on PC"},null,O,V)),P(`</p><a class="link"${ssrRenderAttr("href",e.pageURL)} data-v-72a5036f${V}>${ssrInterpolate(e.pageURL)}</a></div>`));else return[L.meta.responsive?(openBlock(),createBlock("div",{key:0,class:"route-view"},[(openBlock(),createBlock(resolveDynamicComponent(N),{key:L.name}))])):(openBlock(),createBlock("div",{key:1,class:"fallback"},[createVNode("i",{class:"iconfont icon-desktop"}),createVNode("p",{class:"text"},[createVNode(k,{zh:"\u8BF7\u5728 PC \u7AEF\u8BBF\u95EE\u4EE5\u83B7\u5F97\u6700\u4F73\u4F53\u9A8C",en:"This page only support visit on PC"})]),createVNode("a",{class:"link",href:e.pageURL},toDisplayString(e.pageURL),9,["href"])]))]}),_:1},n)),t("</main>"),t(ssrRenderComponent(S,null,null,n)),t("</div></div>")}const _sfc_setup$1=_sfc_main$1.setup;_sfc_main$1.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/mobile/main.vue"),_sfc_setup$1?_sfc_setup$1(e,t):void 0};const MobileMain=_export_sfc(_sfc_main$1,[["ssrRender",_sfc_ssrRender$1],["__scopeId","data-v-72a5036f"]]),_sfc_main=defineComponent({name:"App",components:{EmojiRain,Captured,DesktopMain,MobileMain},setup(){const{isMobile:e}=useEnhancer();return{isMobile:e}}}),index_vue_vue_type_style_index_0_lang="";function _sfc_ssrRender(e,t,n,r,c,d,g,o){const v=resolveComponent("client-only"),x=resolveComponent("progress-bar"),E=resolveComponent("emoji-rain"),k=resolveComponent("popup-root"),S=resolveComponent("captured"),N=resolveComponent("responsive"),L=resolveComponent("desktop-main"),P=resolveComponent("mobile-main");t(`<div${ssrRenderAttrs(mergeProps({class:"app-root"},r))}>`),t(ssrRenderComponent(v,null,{default:withCtx((O,V,z,U)=>{if(V)V(ssrRenderComponent(x,{spin:!e.isMobile},null,z,U)),V(ssrRenderComponent(E,null,null,z,U)),V(ssrRenderComponent(k,null,null,z,U));else return[createVNode(x,{spin:!e.isMobile},null,8,["spin"]),createVNode(E),createVNode(k)]}),_:1},n)),t(ssrRenderComponent(S,null,{default:withCtx((O,V,z,U)=>{if(V)V(ssrRenderComponent(N,null,{desktop:withCtx((W,Z,re,oe)=>{if(Z)Z(ssrRenderComponent(L,null,null,re,oe));else return[createVNode(L)]}),mobile:withCtx((W,Z,re,oe)=>{if(Z)Z(ssrRenderComponent(P,null,null,re,oe));else return[createVNode(P)]}),_:1},z,U));else return[createVNode(N,null,{desktop:withCtx(()=>[createVNode(L)]),mobile:withCtx(()=>[createVNode(P)]),_:1})]}),_:1},n)),t("</div>")}const _sfc_setup=_sfc_main.setup;_sfc_main.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/app/index.vue"),_sfc_setup?_sfc_setup(e,t):void 0};const App=_export_sfc(_sfc_main,[["ssrRender",_sfc_ssrRender]]);console.info("[APP INITED]:",{NODE_ENV,mode:isSSR?"SSR":"SPA"},API_CONFIG);const createVueApp=e=>{var v,x,E;const t=e.appCreator(App);rebirthSSRContext(t);const n=createGlobalState({userAgent:e.userAgent||"",language:e.language||"",layout:(v=e.layout)!=null?v:LayoutColumn.Normal}),r=createUniversalStore({globalState:n}),c=createUniversalRouter({beforeMiddleware:(x=e.routerBeforeMiddleware)==null?void 0:x.call(e,n),afterMiddleware:(E=e.routerAfterMiddleware)==null?void 0:E.call(e,n),history:e.historyCreator()}),d=createTheme(e.theme),g=createI18n({default:n.userAgent.isZhUser?Language.Chinese:Language.English,keys:Object.values(LanguageKey),languages:languages$1}),o=createHead({titler:k=>`${k} | ${META.title}`});return o.addReactiveEntry(()=>{var k,S;return{htmlAttrs:{lang:(S=(k=g.l.value)==null?void 0:k.iso)!=null?S:"","data-theme":d.theme.value,"data-device":n.userAgent.isMobile?"mobile":"desktop"}}}),t.config.errorHandler=k=>n.setRenderError(k),c.onError(n.setRenderError),c.beforeEach((k,S,N)=>{k.meta.validate?k.meta.validate({route:k,i18n:g,store:r}).then(N).catch(L=>{const P=new Error;P.code=L.code,P.message=L.message,N(P)}):N()}),t.use(c),t.use(r),t.use(n),t.use(g),t.use(o),t.use(d),t.use(component),{app:t,router:c,store:r,globalState:n,i18n:g,head:o,theme:d,component}},devDebug=(...e)=>isDev&&console.debug("-",...e),getCacheKey=(e,t)=>{const{i18n:n,theme:r,globalState:c}=e,d=n.language.value,g=r.theme.value,o=c.userAgent.isMobile?"mobile":"desktop";return`ssr_${d}_${o}_${g}_${t}`},createApp=e=>{const{headers:t}=e,n=createVueApp({appCreator:createSSRApp,historyCreator:createMemoryHistory,language:t["accept-language"],userAgent:t["user-agent"],theme:e.cookies[THEME_STORAGE_KEY]||Theme.Light}),r=["lozad"],c=["progress-bar","popup-root","popup","Adsense"];return r.forEach(d=>n.app.directive(d,{})),c.forEach(d=>n.app.component(d,{})),n},renderScripts=e=>{const t=renderSSRSymbleScript();return[renderSSRContextScript(serializeJavascript(e)),t].join(`
`)},renderHTML=async(e,t)=>{devDebug(`renderHTML: ${t}`);const{app:n,router:r,store:c,head:d,theme:g,globalState:o}=e;devDebug("1. route.push.validate"),await r.push(t),await r.isReady(),devDebug("2. store.serverInit"),await c.serverPrefetch(),devDebug("3. set layout"),o.setLayoutColumn(getLayoutByRouteMeta(r.currentRoute.value.meta)),devDebug("4. renderToString");const x=await renderToString(n,{});if(o.renderError.value){const S=new Error(o.renderError.value.message);throw S.code=o.renderError.value.code,S}devDebug("5. renderHeadString");const E=await d.renderToString();devDebug("6. HTML & SSR context script");const k=renderScripts({heads:E,url:t,layout:o.layoutColumn.value.layout,theme:g.theme.value,store:c.state.value,...getSSRContextByApp(n)});return{html:x,heads:E,scripts:k}},renderError=async(e,t)=>{var g;const{app:n,head:r,globalState:c,theme:d}=createApp(e);return c.setRenderError(t),r.push({title:`Server Error: ${t.message||String(t)||"unknow"}`}),{code:(g=t.code)!=null?g:INVALID_ERROR,html:await renderToString(n),heads:await r.renderToString(),scripts:renderScripts({theme:d.theme.value,...getSSRContextByApp(n)})}},renderApp=async(e,t)=>{var o;const n=createApp(e),{originalUrl:r}=e,c=200,d=getCacheKey(n,r),g=await t.has(d);if(devDebug("cache key:",d,g),g)return{...await t.get(d),code:c};try{const v=await renderHTML(n,r),x=(o=n.router.currentRoute.value.meta)==null?void 0:o.ssrCacheAge;return x!==!1&&typeof x=="number"&&x>0&&(x===1/0?t.set(d,v):t.set(d,v,x)),{code:c,...v}}catch(v){return renderError(e,v)}};var mapboxGl$2={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(commonjsGlobal,function(){var n,r,c;function d(o,v){if(!n)n=v;else if(!r)r=v;else{var x="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+n+")(sharedChunk); ("+r+")(sharedChunk); self.onerror = null;",E={};n(E),c=v(E),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(c.workerUrl=window.URL.createObjectURL(new Blob([x],{type:"text/javascript"})))}}d(["exports"],function(o){var v=typeof self<"u"?self:{},x="2.11.1";let E;const k={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(E==null){const s=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{E=process.env.API_URL_REGEX!=null?new RegExp(process.env.API_URL_REGEX):s}catch{E=s}}return E},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},S={supported:!1,testSupport:function(s){!P&&L&&(O?V(s):N=s)}};let N,L,P=!1,O=!1;function V(s){const i=s.createTexture();s.bindTexture(s.TEXTURE_2D,i);try{if(s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,L),s.isContextLost())return;S.supported=!0}catch{}s.deleteTexture(i),P=!0}v.document&&(L=v.document.createElement("img"),L.onload=function(){N&&V(N),N=null,O=!0},L.onerror=function(){P=!0,N=null},L.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const z="01";var U=W;function W(s,i,a,u){this.cx=3*s,this.bx=3*(a-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(u-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=i,this.p2x=a,this.p2y=u}W.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,i){if(i===void 0&&(i=1e-6),s<0)return 0;if(s>1)return 1;for(var a=s,u=0;u<8;u++){var m=this.sampleCurveX(a)-s;if(Math.abs(m)<i)return a;var y=this.sampleCurveDerivativeX(a);if(Math.abs(y)<1e-6)break;a-=m/y}var w=0,R=1;for(a=s,u=0;u<20&&(m=this.sampleCurveX(a),!(Math.abs(m-s)<i));u++)s>m?w=a:R=a,a=.5*(R-w)+w;return a},solve:function(s,i){return this.sampleCurveY(this.solveCurveX(s,i))}};var Z=re;function re(s,i){this.x=s,this.y=i}re.prototype={clone:function(){return new re(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,i){return this.clone()._rotateAround(s,i)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var i=s.x-this.x,a=s.y-this.y;return i*i+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,i){return Math.atan2(this.x*i-this.y*s,this.x*s+this.y*i)},_matMult:function(s){var i=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=i,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var i=Math.cos(s),a=Math.sin(s),u=a*this.x+i*this.y;return this.x=i*this.x-a*this.y,this.y=u,this},_rotateAround:function(s,i){var a=Math.cos(s),u=Math.sin(s),m=i.y+u*(this.x-i.x)+a*(this.y-i.y);return this.x=i.x+a*(this.x-i.x)-u*(this.y-i.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},re.convert=function(s){return s instanceof re?s:Array.isArray(s)?new re(s[0],s[1]):s};const oe=Math.PI/180,se=180/Math.PI;function ce(s){return s*oe}function me(s){return s*se}const we=[[0,0],[1,0],[1,1],[0,1]];function ae(s){if(s<=0)return 0;if(s>=1)return 1;const i=s*s,a=i*s;return 4*(s<.5?a:3*(s-i)+a-.75)}function Ce(s,i,a,u){const m=new U(s,i,a,u);return function(y){return m.solve(y)}}const Fe=Ce(.25,.1,.25,1);function it(s,i,a){return Math.min(a,Math.max(i,s))}function _e(s,i,a){return(a=it((a-s)/(i-s),0,1))*a*(3-2*a)}function ke(s,i,a){const u=a-i,m=((s-i)%u+u)%u+i;return m===i?a:m}function ze(s,i,a){if(!s.length)return a(null,[]);let u=s.length;const m=new Array(s.length);let y=null;s.forEach((w,R)=>{i(w,(I,D)=>{I&&(y=I),m[R]=D,--u==0&&a(y,m)})})}function nt(s){const i=[];for(const a in s)i.push(s[a]);return i}function mt(s,...i){for(const a of i)for(const u in a)s[u]=a[u];return s}let qt=1;function un(){return qt++}function fn(){return function s(i){return i?(i^Math.random()*(16>>i/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,s)}()}function vn(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))}function at(s){return!!s&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(s)}function Ot(s,i){s.forEach(a=>{i[a]&&(i[a]=i[a].bind(i))})}function bt(s,i){return s.indexOf(i,s.length-i.length)!==-1}function jt(s,i,a){const u={};for(const m in s)u[m]=i.call(a||this,s[m],m,s);return u}function gn(s,i,a){const u={};for(const m in s)i.call(a||this,s[m],m,s)&&(u[m]=s[m]);return u}function dn(s){return Array.isArray(s)?s.map(dn):typeof s=="object"&&s?jt(s,dn):s}const hn={};function Ht(s){hn[s]||(typeof console<"u"&&console.warn(s),hn[s]=!0)}function Ee(s,i,a){return(a.y-s.y)*(i.x-s.x)>(i.y-s.y)*(a.x-s.x)}function Ne(s){let i=0;for(let a,u,m=0,y=s.length,w=y-1;m<y;w=m++)a=s[m],u=s[w],i+=(u.x-a.x)*(a.y+u.y);return i}function et(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function xt(s){const i={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,u,m,y)=>{const w=m||y;return i[u]=!w||w.toLowerCase(),""}),i["max-age"]){const a=parseInt(i["max-age"],10);isNaN(a)?delete i["max-age"]:i["max-age"]=a}return i}let Ke=null;function Rt(s){if(Ke==null){const i=s.navigator?s.navigator.userAgent:null;Ke=!!s.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return Ke}function gt(s){try{const i=v[s];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch{return!1}}function tt(s,i){return[s[4*i],s[4*i+1],s[4*i+2],s[4*i+3]]}const kt="mapbox-tiles";let dt,Et,$t=500,Je=50;function ut(){try{return v.caches}catch{}}function pt(){ut()&&!dt&&(dt=v.caches.open(kt))}function Xt(s){const i=s.indexOf("?");if(i<0)return s;const a=function(m){const y=m.indexOf("?");return y>0?m.slice(y+1).split("&"):[]}(s),u=a.filter(m=>{const y=m.split("=");return y[0]==="language"||y[0]==="worldview"});return u.length?`${s.slice(0,i)}?${u.join("&")}`:s.slice(0,i)}let Kt=1/0;const yn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(yn);class Gn extends Error{constructor(i,a,u){a===401&&bo(u)&&(i+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(i),this.status=a,this.url=u}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const gi=et()?()=>self.worker&&self.worker.referrer:()=>(v.location.protocol==="blob:"?v.parent:v).location.href,Ii=function(s,i){if(!(/^file:/.test(a=s.url)||/^file:/.test(gi())&&!/^\w+:/.test(a))){if(v.fetch&&v.Request&&v.AbortController&&v.Request.prototype.hasOwnProperty("signal"))return function(u,m){const y=new v.AbortController,w=new v.Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:gi(),signal:y.signal});let R=!1,I=!1;const D=(j=w.url).indexOf("sku=")>0&&bo(j);var j;u.type==="json"&&w.headers.set("Accept","application/json");const q=(J,Q,ne)=>{if(I)return;if(J&&J.message!=="SecurityError"&&Ht(J),Q&&ne)return K(Q);const ue=Date.now();v.fetch(w).then(Te=>{if(Te.ok){const Oe=D?Te.clone():null;return K(Te,Oe,ue)}return m(new Gn(Te.statusText,Te.status,u.url))}).catch(Te=>{Te.code!==20&&m(new Error(Te.message))})},K=(J,Q,ne)=>{(u.type==="arrayBuffer"?J.arrayBuffer():u.type==="json"?J.json():J.text()).then(ue=>{I||(Q&&ne&&function(Te,Oe,Se){if(pt(),!dt)return;const $e={status:Oe.status,statusText:Oe.statusText,headers:new v.Headers};Oe.headers.forEach((Qe,Ye)=>$e.headers.set(Ye,Qe));const Be=xt(Oe.headers.get("Cache-Control")||"");if(Be["no-store"])return;Be["max-age"]&&$e.headers.set("Expires",new Date(Se+1e3*Be["max-age"]).toUTCString());const Me=$e.headers.get("Expires");Me&&(new Date(Me).getTime()-Se<42e4||function(Qe,Ye){if(Et===void 0)try{new Response(new ReadableStream),Et=!0}catch{Et=!1}Et?Ye(Qe.body):Qe.blob().then(Ye)}(Oe,Qe=>{const Ye=new v.Response(Qe,$e);pt(),dt&&dt.then(ct=>ct.put(Xt(Te.url),Ye)).catch(ct=>Ht(ct.message))}))}(w,Q,ne),R=!0,m(null,ue,J.headers.get("Cache-Control"),J.headers.get("Expires")))}).catch(ue=>{I||m(new Error(ue.message))})};return D?function(J,Q){if(pt(),!dt)return Q(null);const ne=Xt(J.url);dt.then(ue=>{ue.match(ne).then(Te=>{const Oe=function(Se){if(!Se)return!1;const $e=new Date(Se.headers.get("Expires")||0),Be=xt(Se.headers.get("Cache-Control")||"");return $e>Date.now()&&!Be["no-cache"]}(Te);ue.delete(ne),Oe&&ue.put(ne,Te.clone()),Q(null,Te,Oe)}).catch(Q)}).catch(Q)}(w,q):q(null,null),{cancel:()=>{I=!0,R||y.abort()}}}(s,i);if(et()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,i,void 0,!0)}var a;return function(u,m){const y=new v.XMLHttpRequest;y.open(u.method||"GET",u.url,!0),u.type==="arrayBuffer"&&(y.responseType="arraybuffer");for(const w in u.headers)y.setRequestHeader(w,u.headers[w]);return u.type==="json"&&(y.responseType="text",y.setRequestHeader("Accept","application/json")),y.withCredentials=u.credentials==="include",y.onerror=()=>{m(new Error(y.statusText))},y.onload=()=>{if((y.status>=200&&y.status<300||y.status===0)&&y.response!==null){let w=y.response;if(u.type==="json")try{w=JSON.parse(y.response)}catch(R){return m(R)}m(null,w,y.getResponseHeader("Cache-Control"),y.getResponseHeader("Expires"))}else m(new Gn(y.statusText,y.status,u.url))},y.send(u.body),{cancel:()=>y.abort()}}(s,i)},Li=function(s,i){return Ii(mt(s,{type:"arrayBuffer"}),i)};function Mr(s){const i=v.document.createElement("a");return i.href=s,i.protocol===v.document.location.protocol&&i.host===v.document.location.host}const ci="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let _i,Yi;_i=[],Yi=0;const vo=function(s,i){if(S.supported&&(s.headers||(s.headers={}),s.headers.accept="image/webp,*/*"),Yi>=k.MAX_PARALLEL_IMAGE_REQUESTS){const y={requestParameters:s,callback:i,cancelled:!1,cancel(){this.cancelled=!0}};return _i.push(y),y}Yi++;let a=!1;const u=()=>{if(!a)for(a=!0,Yi--;_i.length&&Yi<k.MAX_PARALLEL_IMAGE_REQUESTS;){const y=_i.shift(),{requestParameters:w,callback:R,cancelled:I}=y;I||(y.cancel=vo(w,R).cancel)}},m=Li(s,(y,w,R,I)=>{u(),y?i(y):w&&(v.createImageBitmap?function(D,j){const q=new v.Blob([new Uint8Array(D)],{type:"image/png"});v.createImageBitmap(q).then(K=>{j(null,K)}).catch(K=>{j(new Error(`Could not load image because of ${K.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(w,(D,j)=>i(D,j,R,I)):function(D,j){const q=new v.Image,K=v.URL;q.onload=()=>{j(null,q),K.revokeObjectURL(q.src),q.onload=null,v.requestAnimationFrame(()=>{q.src=ci})},q.onerror=()=>j(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const J=new v.Blob([new Uint8Array(D)],{type:"image/png"});q.src=D.byteLength?K.createObjectURL(J):ci}(w,(D,j)=>i(D,j,R,I)))});return{cancel:()=>{m.cancel(),u()}}},yo="NO_ACCESS_TOKEN";function Xi(s){return s.indexOf("mapbox:")===0}function bo(s){return k.API_URL_REGEX.test(s)}function $s(s){return k.API_STYLE_REGEX.test(s)&&!xo(s)}function xo(s){return k.API_SPRITE_REGEX.test(s)}const wo=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Oi(s){const i=s.match(wo);if(!i)throw new Error("Unable to parse URL object");return{protocol:i[1],authority:i[2],path:i[3]||"/",params:i[4]?i[4].split("&"):[]}}function Xr(s){const i=s.params.length?`?${s.params.join("&")}`:"";return`${s.protocol}://${s.authority}${s.path}${i}`}function Ko(s){if(!s)return null;const i=s.split(".");if(!i||i.length!==3)return null;try{return JSON.parse(decodeURIComponent(v.atob(i[1]).split("").map(a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Jr{constructor(i){this.type=i,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(i){const a=Ko(k.ACCESS_TOKEN);let u="";return u=a&&a.u?v.btoa(encodeURIComponent(a.u).replace(/%([0-9A-F]{2})/g,(m,y)=>String.fromCharCode(Number("0x"+y)))):k.ACCESS_TOKEN||"",i?`mapbox.eventData.${i}:${u}`:`mapbox.eventData:${u}`}fetchEventData(){const i=gt("localStorage"),a=this.getStorageKey(),u=this.getStorageKey("uuid");if(i)try{const m=v.localStorage.getItem(a);m&&(this.eventData=JSON.parse(m));const y=v.localStorage.getItem(u);y&&(this.anonId=y)}catch{Ht("Unable to read from LocalStorage")}}saveEventData(){const i=gt("localStorage"),a=this.getStorageKey(),u=this.getStorageKey("uuid");if(i)try{v.localStorage.setItem(u,this.anonId),Object.keys(this.eventData).length>=1&&v.localStorage.setItem(a,JSON.stringify(this.eventData))}catch{Ht("Unable to write to LocalStorage")}}processRequests(i){}postEvent(i,a,u,m){if(!k.EVENTS_URL)return;const y=Oi(k.EVENTS_URL);y.params.push(`access_token=${m||k.ACCESS_TOKEN||""}`);const w={event:this.type,created:new Date(i).toISOString()},R=a?mt(w,a):w,I={url:Xr(y),headers:{"Content-Type":"text/plain"},body:JSON.stringify([R])};this.pendingRequest=function(D,j){return Ii(mt(D,{method:"POST"}),j)}(I,D=>{this.pendingRequest=null,u(D),this.saveEventData(),this.processRequests(m)})}queueRequest(i,a){this.queue.push(i),this.processRequests(a)}}const xe=new class extends Jr{constructor(s){super("appUserTurnstile"),this._customAccessToken=s}postTurnstileEvent(s,i){k.EVENTS_URL&&k.ACCESS_TOKEN&&Array.isArray(s)&&s.some(a=>Xi(a)||bo(a))&&this.queueRequest(Date.now(),i)}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const i=Ko(k.ACCESS_TOKEN),a=i?i.u:k.ACCESS_TOKEN;let u=a!==this.eventData.tokenU;at(this.anonId)||(this.anonId=fn(),u=!0);const m=this.queue.shift();if(this.eventData.lastSuccess){const y=new Date(this.eventData.lastSuccess),w=new Date(m),R=(m-this.eventData.lastSuccess)/864e5;u=u||R>=1||R<-1||y.getDate()!==w.getDate()}else u=!0;u?this.postEvent(m,{sdkIdentifier:"mapbox-gl-js",sdkVersion:x,skuId:z,"enabled.telemetry":!1,userId:this.anonId},y=>{y||(this.eventData.lastSuccess=m,this.eventData.tokenU=a)},s):this.processRequests()}},ee=xe.postTurnstileEvent.bind(xe),ie=new class extends Jr{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(s,i,a,u){this.skuToken=i,this.errorCb=u,k.EVENTS_URL&&(a||k.ACCESS_TOKEN?this.queueRequest({id:s,timestamp:Date.now()},a):this.errorCb(new Error(yo)))}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:a}=this.queue.shift();i&&this.success[i]||(this.anonId||this.fetchEventData(),at(this.anonId)||(this.anonId=fn()),this.postEvent(a,{sdkIdentifier:"mapbox-gl-js",sdkVersion:x,skuId:z,skuToken:this.skuToken,userId:this.anonId},u=>{u?this.errorCb(u):i&&(this.success[i]=!0)},s))}},ye=ie.postMapLoadEvent.bind(ie),Re=new class extends Jr{constructor(){super("gljs.performance")}postPerformanceEvent(s,i){k.EVENTS_URL&&(s||k.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:i},s)}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:i,performanceData:a}=this.queue.shift(),u=function(m){const y=v.performance.getEntriesByType("resource"),w=v.performance.getEntriesByType("mark"),R=function(K){const J={};if(K){for(const Q in K)if(Q!=="other")for(const ne of K[Q]){const ue=`${Q}RequestCount`,Te=`${Q}ResolveRangeMin`,Oe=`${Q}ResolveRangeMax`;J[Te]=Math.min(J[Te]||1/0,ne.startTime),J[Oe]=Math.max(J[Oe]||-1/0,ne.responseEnd),J[ue]===void 0&&(J[ue]=0),++J[ue]}}return J}(function(K,J){const Q={};if(K)for(const ne of K){const ue=J(ne);Q[ue]===void 0&&(Q[ue]=[]),Q[ue].push(ne)}return Q}(y,Vt)),I=v.devicePixelRatio,D=v.navigator.connection||v.navigator.mozConnection||v.navigator.webkitConnection,j={counters:[],metadata:[],attributes:[]},q=(K,J,Q)=>{Q!=null&&K.push({name:J,value:Q.toString()})};for(const K in R)q(j.counters,K,R[K]);if(m.interactionRange[0]!==1/0&&m.interactionRange[1]!==-1/0&&(q(j.counters,"interactionRangeMin",m.interactionRange[0]),q(j.counters,"interactionRangeMax",m.interactionRange[1])),w)for(const K of Object.keys(Ze)){const J=Ze[K],Q=w.find(ne=>ne.name===J);Q&&q(j.counters,J,Q.startTime)}return q(j.counters,"visibilityHidden",m.visibilityHidden),q(j.attributes,"style",function(K){if(K)for(const J of K){const Q=J.name.split("?")[0];if($s(Q)){const ne=Q.split("/").slice(-2);if(ne.length===2)return`mapbox://styles/${ne[0]}/${ne[1]}`}}}(y)),q(j.attributes,"terrainEnabled",m.terrainEnabled?"true":"false"),q(j.attributes,"fogEnabled",m.fogEnabled?"true":"false"),q(j.attributes,"projection",m.projection.name),q(j.attributes,"zoom",m.zoom),q(j.metadata,"devicePixelRatio",I),q(j.metadata,"connectionEffectiveType",D?D.effectiveType:void 0),q(j.metadata,"navigatorUserAgent",v.navigator.userAgent),q(j.metadata,"screenWidth",v.screen.width),q(j.metadata,"screenHeight",v.screen.height),q(j.metadata,"windowWidth",v.innerWidth),q(j.metadata,"windowHeight",v.innerHeight),q(j.metadata,"mapWidth",m.width/I),q(j.metadata,"mapHeight",m.height/I),q(j.metadata,"webglRenderer",m.renderer),q(j.metadata,"webglVendor",m.vendor),q(j.metadata,"sdkVersion",x),q(j.metadata,"sdkIdentifier","mapbox-gl-js"),j}(a);for(const m of u.metadata);for(const m of u.counters);for(const m of u.attributes);this.postEvent(i,u,()=>{},s)}},De=Re.postPerformanceEvent.bind(Re),He=new class extends Jr{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(s,i,a,u){if(!k.API_URL||!k.SESSION_PATH)return;const m=Oi(k.API_URL+k.SESSION_PATH);m.params.push(`sku=${i||""}`),m.params.push(`access_token=${u||k.ACCESS_TOKEN||""}`);const y={url:Xr(m),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(w,R){return Ii(mt(w,{method:"GET"}),R)}(y,w=>{this.pendingRequest=null,a(w),this.saveEventData(),this.processRequests(u)})}getSessionAPI(s,i,a,u){this.skuToken=i,this.errorCb=u,k.SESSION_PATH&&k.API_URL&&(a||k.ACCESS_TOKEN?this.queueRequest({id:s,timestamp:Date.now()},a):this.errorCb(new Error(yo)))}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:a}=this.queue.shift();i&&this.success[i]||this.getSession(a,this.skuToken,u=>{u?this.errorCb(u):i&&(this.success[i]=!0)},s)}},Ge=He.getSessionAPI.bind(He),Ve=new Set,Ze={create:"create",load:"load",fullLoad:"fullLoad"},yt={mark(s){v.performance.mark(s)},measure(s,i,a){v.performance.measure(s,i,a)}};function Vt(s){const i=s.name.split("?")[0];return i.includes("mapbox-gl.js")?"javascript":i.includes("mapbox-gl.css")?"css":function(a){return k.API_FONTS_REGEX.test(a)}(i)?"fontRange":xo(i)?"sprite":$s(i)?"style":function(a){return k.API_TILEJSON_REGEX.test(a)}(i)?"tilejson":"other"}const Ct=v.performance;function en(s){const i=s?s.url.toString():void 0;return Ct.getEntriesByName(i)}let Qt,Jt,ln,En;const Nn={now:()=>ln!==void 0?ln:v.performance.now(),setNow(s){ln=s},restoreNow(){ln=void 0},frame(s){const i=v.requestAnimationFrame(s);return{cancel:()=>v.cancelAnimationFrame(i)}},getImageData(s,i=0){const{width:a,height:u}=s;En||(En=v.document.createElement("canvas"));const m=En.getContext("2d");if(!m)throw new Error("failed to create canvas 2d context");return(a>En.width||u>En.height)&&(En.width=a,En.height=u),m.clearRect(-i,-i,a+2*i,u+2*i),m.drawImage(s,0,0,a,u),m.getImageData(-i,-i,a+2*i,u+2*i)},resolveURL:s=>(Qt||(Qt=v.document.createElement("a")),Qt.href=s,Qt.href),get devicePixelRatio(){return v.devicePixelRatio},get prefersReducedMotion(){return!!v.matchMedia&&(Jt==null&&(Jt=v.matchMedia("(prefers-reduced-motion: reduce)")),Jt.matches)}};function rn(s,i,a){a[s]&&a[s].indexOf(i)!==-1||(a[s]=a[s]||[],a[s].push(i))}function Bn(s,i,a){if(a&&a[s]){const u=a[s].indexOf(i);u!==-1&&a[s].splice(u,1)}}class zn{constructor(i,a={}){mt(this,a),this.type=i}}class Ir extends zn{constructor(i,a={}){super("error",mt({error:i},a))}}class vr{on(i,a){return this._listeners=this._listeners||{},rn(i,a,this._listeners),this}off(i,a){return Bn(i,a,this._listeners),Bn(i,a,this._oneTimeListeners),this}once(i,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},rn(i,a,this._oneTimeListeners),this):new Promise(u=>this.once(i,u))}fire(i,a){typeof i=="string"&&(i=new zn(i,a||{}));const u=i.type;if(this.listens(u)){i.target=this;const m=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const R of m)R.call(this,i);const y=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const R of y)Bn(u,R,this._oneTimeListeners),R.call(this,i);const w=this._eventedParent;w&&(mt(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),w.fire(i))}else i instanceof Ir&&console.error(i.error);return this}listens(i){return!!(this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i))}setEventedParent(i,a){return this._eventedParent=i,this._eventedParentData=a,this}}var lt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":true,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"cross-faded"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"cross-faded":{"type":"property-type"},"cross-faded-data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function yr(s,...i){for(const a of i)for(const u in a)s[u]=a[u];return s}function oi(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function Lr(s){if(Array.isArray(s))return s.map(Lr);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const i={};for(const a in s)i[a]=Lr(s[a]);return i}return oi(s)}class fc extends Error{constructor(i,a){super(a),this.message=a,this.key=i}}var or=fc;class Eo{constructor(i,a=[]){this.parent=i,this.bindings={};for(const[u,m]of a)this.bindings[u]=m}concat(i){return new Eo(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}var hc=Eo;const Co={kind:"null"},zt={kind:"number"},Cn={kind:"string"},Sn={kind:"boolean"},sr={kind:"color"},So={kind:"object"},Tn={kind:"value"},Wo={kind:"collator"},To={kind:"formatted"},Ao={kind:"resolvedImage"};function ji(s,i){return{kind:"array",itemType:s,N:i}}function Xn(s){if(s.kind==="array"){const i=Xn(s.itemType);return typeof s.N=="number"?`array<${i}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${i}>`}return s.kind}const Zu=[Co,zt,Cn,Sn,sr,To,So,ji(Tn),Ao];function Ji(s,i){if(i.kind==="error")return null;if(s.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!Ji(s.itemType,i.itemType))&&(typeof s.N!="number"||s.N===i.N))return null}else{if(s.kind===i.kind)return null;if(s.kind==="value"){for(const a of Zu)if(!Ji(a,i))return null}}return`Expected ${Xn(s)} but found ${Xn(i)} instead.`}function Ns(s,i){return i.some(a=>a.kind===s.kind)}function Pi(s,i){return i.some(a=>a==="null"?s===null:a==="array"?Array.isArray(s):a==="object"?s&&!Array.isArray(s)&&typeof s=="object":a===typeof s)}var Ba,Ms={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Is(s){return(s=Math.round(s))<0?0:s>255?255:s}function Zo(s){return Is(s[s.length-1]==="%"?parseFloat(s)/100*255:parseInt(s))}function Yo(s){return(i=s[s.length-1]==="%"?parseFloat(s)/100:parseFloat(s))<0?0:i>1?1:i;var i}function Qr(s,i,a){return a<0?a+=1:a>1&&(a-=1),6*a<1?s+(i-s)*a*6:2*a<1?i:3*a<2?s+(i-s)*(2/3-a)*6:s}try{Ba={}.parseCSSColor=function(s){var i,a=s.replace(/ /g,"").toLowerCase();if(a in Ms)return Ms[a].slice();if(a[0]==="#")return a.length===4?(i=parseInt(a.substr(1),16))>=0&&i<=4095?[(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1]:null:a.length===7&&(i=parseInt(a.substr(1),16))>=0&&i<=16777215?[(16711680&i)>>16,(65280&i)>>8,255&i,1]:null;var u=a.indexOf("("),m=a.indexOf(")");if(u!==-1&&m+1===a.length){var y=a.substr(0,u),w=a.substr(u+1,m-(u+1)).split(","),R=1;switch(y){case"rgba":if(w.length!==4)return null;R=Yo(w.pop());case"rgb":return w.length!==3?null:[Zo(w[0]),Zo(w[1]),Zo(w[2]),R];case"hsla":if(w.length!==4)return null;R=Yo(w.pop());case"hsl":if(w.length!==3)return null;var I=(parseFloat(w[0])%360+360)%360/360,D=Yo(w[1]),j=Yo(w[2]),q=j<=.5?j*(D+1):j+D-j*D,K=2*j-q;return[Is(255*Qr(K,q,I+1/3)),Is(255*Qr(K,q,I)),Is(255*Qr(K,q,I-1/3)),R];default:return null}}return null}}catch{}class Ci{constructor(i,a,u,m=1){this.r=i,this.g=a,this.b=u,this.a=m}static parse(i){if(!i)return;if(i instanceof Ci)return i;if(typeof i!="string")return;const a=Ba(i);return a?new Ci(a[0]/255*a[3],a[1]/255*a[3],a[2]/255*a[3],a[3]):void 0}toString(){const[i,a,u,m]=this.toArray();return`rgba(${Math.round(i)},${Math.round(a)},${Math.round(u)},${m})`}toArray(){const{r:i,g:a,b:u,a:m}=this;return m===0?[0,0,0,0]:[255*i/m,255*a/m,255*u/m,m]}toArray01(){const{r:i,g:a,b:u,a:m}=this;return m===0?[0,0,0,0]:[i/m,a/m,u/m,m]}toArray01PremultipliedAlpha(){const{r:i,g:a,b:u,a:m}=this;return[i,a,u,m]}}Ci.black=new Ci(0,0,0,1),Ci.white=new Ci(1,1,1,1),Ci.transparent=new Ci(0,0,0,0),Ci.red=new Ci(1,0,0,1),Ci.blue=new Ci(0,0,1,1);var ii=Ci;class za{constructor(i,a,u){this.sensitivity=i?a?"variant":"case":a?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,a){return this.collator.compare(i,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Fa{constructor(i,a,u,m,y){this.text=i.normalize?i.normalize():i,this.image=a,this.scale=u,this.fontStack=m,this.textColor=y}}class Ri{constructor(i){this.sections=i}static fromString(i){return new Ri([new Fa(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof Ri?i:Ri.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}serialize(){const i=["format"];for(const a of this.sections){if(a.image){i.push(["image",a.image.name]);continue}i.push(a.text);const u={};a.fontStack&&(u["text-font"]=["literal",a.fontStack.split(",")]),a.scale&&(u["font-scale"]=a.scale),a.textColor&&(u["text-color"]=["rgba"].concat(a.textColor.toArray())),i.push(u)}return i}}class Di{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new Di({name:i,available:!1}):null}serialize(){return["image",this.name]}}function mc(s,i,a,u){return typeof s=="number"&&s>=0&&s<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof a=="number"&&a>=0&&a<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:`Invalid rgba value [${[s,i,a,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof u=="number"?[s,i,a,u]:[s,i,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function eo(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof ii||s instanceof za||s instanceof Ri||s instanceof Di)return!0;if(Array.isArray(s)){for(const i of s)if(!eo(i))return!1;return!0}if(typeof s=="object"){for(const i in s)if(!eo(s[i]))return!1;return!0}return!1}function ui(s){if(s===null)return Co;if(typeof s=="string")return Cn;if(typeof s=="boolean")return Sn;if(typeof s=="number")return zt;if(s instanceof ii)return sr;if(s instanceof za)return Wo;if(s instanceof Ri)return To;if(s instanceof Di)return Ao;if(Array.isArray(s)){const i=s.length;let a;for(const u of s){const m=ui(u);if(a){if(a===m)continue;a=Tn;break}a=m}return ji(a||Tn,i)}return So}function Xo(s){const i=typeof s;return s===null?"":i==="string"||i==="number"||i==="boolean"?String(s):s instanceof ii||s instanceof Ri||s instanceof Di?s.toString():JSON.stringify(s)}class Va{constructor(i,a){this.type=i,this.value=a}static parse(i,a){if(i.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!eo(i[1]))return a.error("invalid value");const u=i[1];let m=ui(u);const y=a.expectedType;return m.kind!=="array"||m.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(m=y),new Va(m,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof ii?["rgba"].concat(this.value.toArray()):this.value instanceof Ri?this.value.serialize():this.value}}var Jo=Va,vi=class{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}};const Ua={string:Cn,number:zt,boolean:Sn,object:So};class ja{constructor(i,a){this.type=i,this.args=a}static parse(i,a){if(i.length<2)return a.error("Expected at least one argument.");let u,m=1;const y=i[0];if(y==="array"){let R,I;if(i.length>2){const D=i[1];if(typeof D!="string"||!(D in Ua)||D==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);R=Ua[D],m++}else R=Tn;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return a.error('The length argument to "array" must be a positive integer literal',2);I=i[2],m++}u=ji(R,I)}else u=Ua[y];const w=[];for(;m<i.length;m++){const R=a.parse(i[m],m,Tn);if(!R)return null;w.push(R)}return new ja(u,w)}evaluate(i){for(let a=0;a<this.args.length;a++){const u=this.args[a].evaluate(i);if(!Ji(this.type,ui(u)))return u;if(a===this.args.length-1)throw new vi(`Expected value to be of type ${Xn(this.type)}, but found ${Xn(ui(u))} instead.`)}return null}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=this.type,a=[i.kind];if(i.kind==="array"){const u=i.itemType;if(u.kind==="string"||u.kind==="number"||u.kind==="boolean"){a.push(u.kind);const m=i.N;(typeof m=="number"||this.args.length>1)&&a.push(m)}}return a.concat(this.args.map(u=>u.serialize()))}}var ar=ja;class Or{constructor(i){this.type=To,this.sections=i}static parse(i,a){if(i.length<2)return a.error("Expected at least one argument.");const u=i[1];if(!Array.isArray(u)&&typeof u=="object")return a.error("First argument must be an image or text section.");const m=[];let y=!1;for(let w=1;w<=i.length-1;++w){const R=i[w];if(y&&typeof R=="object"&&!Array.isArray(R)){y=!1;let I=null;if(R["font-scale"]&&(I=a.parse(R["font-scale"],1,zt),!I))return null;let D=null;if(R["text-font"]&&(D=a.parse(R["text-font"],1,ji(Cn)),!D))return null;let j=null;if(R["text-color"]&&(j=a.parse(R["text-color"],1,sr),!j))return null;const q=m[m.length-1];q.scale=I,q.font=D,q.textColor=j}else{const I=a.parse(i[w],1,Tn);if(!I)return null;const D=I.type.kind;if(D!=="string"&&D!=="value"&&D!=="null"&&D!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,m.push({content:I,scale:null,font:null,textColor:null})}}return new Or(m)}evaluate(i){return new Ri(this.sections.map(a=>{const u=a.content.evaluate(i);return ui(u)===Ao?new Fa("",u,null,null,null):new Fa(Xo(u),null,a.scale?a.scale.evaluate(i):null,a.font?a.font.evaluate(i).join(","):null,a.textColor?a.textColor.evaluate(i):null)}))}eachChild(i){for(const a of this.sections)i(a.content),a.scale&&i(a.scale),a.font&&i(a.font),a.textColor&&i(a.textColor)}outputDefined(){return!1}serialize(){const i=["format"];for(const a of this.sections){i.push(a.content.serialize());const u={};a.scale&&(u["font-scale"]=a.scale.serialize()),a.font&&(u["text-font"]=a.font.serialize()),a.textColor&&(u["text-color"]=a.textColor.serialize()),i.push(u)}return i}}class Ls{constructor(i){this.type=Ao,this.input=i}static parse(i,a){if(i.length!==2)return a.error("Expected two arguments.");const u=a.parse(i[1],1,Cn);return u?new Ls(u):a.error("No image name provided.")}evaluate(i){const a=this.input.evaluate(i),u=Di.fromString(a);return u&&i.availableImages&&(u.available=i.availableImages.indexOf(a)>-1),u}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Yu={"to-boolean":Sn,"to-color":sr,"to-number":zt,"to-string":Cn};class Ga{constructor(i,a){this.type=i,this.args=a}static parse(i,a){if(i.length<2)return a.error("Expected at least one argument.");const u=i[0];if((u==="to-boolean"||u==="to-string")&&i.length!==2)return a.error("Expected one argument.");const m=Yu[u],y=[];for(let w=1;w<i.length;w++){const R=a.parse(i[w],w,Tn);if(!R)return null;y.push(R)}return new Ga(m,y)}evaluate(i){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(i));if(this.type.kind==="color"){let a,u;for(const m of this.args){if(a=m.evaluate(i),u=null,a instanceof ii)return a;if(typeof a=="string"){const y=i.parseColor(a);if(y)return y}else if(Array.isArray(a)&&(u=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:mc(a[0],a[1],a[2],a[3]),!u))return new ii(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new vi(u||`Could not parse color from value '${typeof a=="string"?a:String(JSON.stringify(a))}'`)}if(this.type.kind==="number"){let a=null;for(const u of this.args){if(a=u.evaluate(i),a===null)return 0;const m=Number(a);if(!isNaN(m))return m}throw new vi(`Could not convert ${JSON.stringify(a)} to number.`)}return this.type.kind==="formatted"?Ri.fromString(Xo(this.args[0].evaluate(i))):this.type.kind==="resolvedImage"?Di.fromString(Xo(this.args[0].evaluate(i))):Xo(this.args[0].evaluate(i))}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Or([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Ls(this.args[0]).serialize();const i=[`to-${this.type.kind}`];return this.eachChild(a=>{i.push(a.serialize())}),i}}var ko=Ga;const Xu=["Unknown","Point","LineString","Polygon"];var gc=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Xu[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const s=this.featureDistanceData.center,i=this.featureDistanceData.scale,{x:a,y:u}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(a*i-s[0])+this.featureDistanceData.bearing[1]*(u*i-s[1])}return 0}parseColor(s){let i=this._parseColorCache[s];return i||(i=this._parseColorCache[s]=ii.parse(s)),i}};class to{constructor(i,a,u,m){this.name=i,this.type=a,this._evaluate=u,this.args=m}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(i=>i.serialize()))}static parse(i,a){const u=i[0],m=to.definitions[u];if(!m)return a.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const y=Array.isArray(m)?m[0]:m.type,w=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,R=w.filter(([D])=>!Array.isArray(D)||D.length===i.length-1);let I=null;for(const[D,j]of R){I=new Ja(a.registry,a.path,null,a.scope);const q=[];let K=!1;for(let J=1;J<i.length;J++){const Q=i[J],ne=Array.isArray(D)?D[J-1]:D.type,ue=I.parse(Q,1+q.length,ne);if(!ue){K=!0;break}q.push(ue)}if(!K)if(Array.isArray(D)&&D.length!==q.length)I.error(`Expected ${D.length} arguments, but found ${q.length} instead.`);else{for(let J=0;J<q.length;J++){const Q=Array.isArray(D)?D[J]:D.type,ne=q[J];I.concat(J+1).checkSubtype(Q,ne.type)}if(I.errors.length===0)return new to(u,y,j,q)}}if(R.length===1)a.errors.push(...I.errors);else{const D=(R.length?R:w).map(([q])=>{return K=q,Array.isArray(K)?`(${K.map(Xn).join(", ")})`:`(${Xn(K.type)}...)`;var K}).join(" | "),j=[];for(let q=1;q<i.length;q++){const K=a.parse(i[q],1+j.length);if(!K)return null;j.push(Xn(K.type))}a.error(`Expected arguments of type ${D}, but found (${j.join(", ")}) instead.`)}return null}static register(i,a){to.definitions=a;for(const u in a)i[u]=to}}var Qi=to;class Os{constructor(i,a,u){this.type=Wo,this.locale=u,this.caseSensitive=i,this.diacriticSensitive=a}static parse(i,a){if(i.length!==2)return a.error("Expected one argument.");const u=i[1];if(typeof u!="object"||Array.isArray(u))return a.error("Collator options argument must be an object.");const m=a.parse(u["case-sensitive"]!==void 0&&u["case-sensitive"],1,Sn);if(!m)return null;const y=a.parse(u["diacritic-sensitive"]!==void 0&&u["diacritic-sensitive"],1,Sn);if(!y)return null;let w=null;return u.locale&&(w=a.parse(u.locale,1,Cn),!w)?null:new Os(m,y,w)}evaluate(i){return new za(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}serialize(){const i={};return i["case-sensitive"]=this.caseSensitive.serialize(),i["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(i.locale=this.locale.serialize()),["collator",i]}}const Pr=8192;function Ha(s,i){s[0]=Math.min(s[0],i[0]),s[1]=Math.min(s[1],i[1]),s[2]=Math.max(s[2],i[0]),s[3]=Math.max(s[3],i[1])}function Ps(s,i){return!(s[0]<=i[0]||s[2]>=i[2]||s[1]<=i[1]||s[3]>=i[3])}function lr(s,i){const a=(180+s[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,m=Math.pow(2,i.z);return[Math.round(a*m*Pr),Math.round(u*m*Pr)]}function _c(s,i,a){const u=s[0]-i[0],m=s[1]-i[1],y=s[0]-a[0],w=s[1]-a[1];return u*w-y*m==0&&u*y<=0&&m*w<=0}function Ds(s,i){let a=!1;for(let w=0,R=i.length;w<R;w++){const I=i[w];for(let D=0,j=I.length;D<j-1;D++){if(_c(s,I[D],I[D+1]))return!1;(m=I[D])[1]>(u=s)[1]!=(y=I[D+1])[1]>u[1]&&u[0]<(y[0]-m[0])*(u[1]-m[1])/(y[1]-m[1])+m[0]&&(a=!a)}}var u,m,y;return a}function vc(s,i){for(let a=0;a<i.length;a++)if(Ds(s,i[a]))return!0;return!1}function qa(s,i,a,u){const m=u[0]-a[0],y=u[1]-a[1],w=(s[0]-a[0])*y-m*(s[1]-a[1]),R=(i[0]-a[0])*y-m*(i[1]-a[1]);return w>0&&R<0||w<0&&R>0}function yc(s,i,a){for(const D of a)for(let j=0;j<D.length-1;++j)if((R=[(w=D[j+1])[0]-(y=D[j])[0],w[1]-y[1]])[0]*(I=[(m=i)[0]-(u=s)[0],m[1]-u[1]])[1]-R[1]*I[0]!=0&&qa(u,m,y,w)&&qa(y,w,u,m))return!0;var u,m,y,w,R,I;return!1}function Ka(s,i){for(let a=0;a<s.length;++a)if(!Ds(s[a],i))return!1;for(let a=0;a<s.length-1;++a)if(yc(s[a],s[a+1],i))return!1;return!0}function Wa(s,i){for(let a=0;a<i.length;a++)if(Ka(s,i[a]))return!0;return!1}function no(s,i,a){const u=[];for(let m=0;m<s.length;m++){const y=[];for(let w=0;w<s[m].length;w++){const R=lr(s[m][w],a);Ha(i,R),y.push(R)}u.push(y)}return u}function Za(s,i,a){const u=[];for(let m=0;m<s.length;m++){const y=no(s[m],i,a);u.push(y)}return u}function Ya(s,i,a,u){if(s[0]<a[0]||s[0]>a[2]){const m=.5*u;let y=s[0]-a[0]>m?-u:a[0]-s[0]>m?u:0;y===0&&(y=s[0]-a[2]>m?-u:a[2]-s[0]>m?u:0),s[0]+=y}Ha(i,s)}function Bs(s,i,a,u){const m=Math.pow(2,u.z)*Pr,y=[u.x*Pr,u.y*Pr],w=[];if(!s)return w;for(const R of s)for(const I of R){const D=[I.x+y[0],I.y+y[1]];Ya(D,i,a,m),w.push(D)}return w}function Xa(s,i,a,u){const m=Math.pow(2,u.z)*Pr,y=[u.x*Pr,u.y*Pr],w=[];if(!s)return w;for(const I of s){const D=[];for(const j of I){const q=[j.x+y[0],j.y+y[1]];Ha(i,q),D.push(q)}w.push(D)}if(i[2]-i[0]<=m/2){(R=i)[0]=R[1]=1/0,R[2]=R[3]=-1/0;for(const I of w)for(const D of I)Ya(D,i,a,m)}var R;return w}class cr{constructor(i,a){this.type=Sn,this.geojson=i,this.geometries=a}static parse(i,a){if(i.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(eo(i[1])){const u=i[1];if(u.type==="FeatureCollection")for(let m=0;m<u.features.length;++m){const y=u.features[m].geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new cr(u,u.features[m].geometry)}else if(u.type==="Feature"){const m=u.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new cr(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new cr(u,u)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(a,u){const m=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],w=a.canonicalID();if(!w)return!1;if(u.type==="Polygon"){const R=no(u.coordinates,y,w),I=Bs(a.geometry(),m,y,w);if(!Ps(m,y))return!1;for(const D of I)if(!Ds(D,R))return!1}if(u.type==="MultiPolygon"){const R=Za(u.coordinates,y,w),I=Bs(a.geometry(),m,y,w);if(!Ps(m,y))return!1;for(const D of I)if(!vc(D,R))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(a,u){const m=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],w=a.canonicalID();if(!w)return!1;if(u.type==="Polygon"){const R=no(u.coordinates,y,w),I=Xa(a.geometry(),m,y,w);if(!Ps(m,y))return!1;for(const D of I)if(!Ka(D,R))return!1}if(u.type==="MultiPolygon"){const R=Za(u.coordinates,y,w),I=Xa(a.geometry(),m,y,w);if(!Ps(m,y))return!1;for(const D of I)if(!Wa(D,R))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Mn=cr;function Qo(s){if(s instanceof Qi&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof Mn)return!1;let i=!0;return s.eachChild(a=>{i&&!Qo(a)&&(i=!1)}),i}function zs(s){if(s instanceof Qi&&s.name==="feature-state")return!1;let i=!0;return s.eachChild(a=>{i&&!zs(a)&&(i=!1)}),i}function Fs(s,i){if(s instanceof Qi&&i.indexOf(s.name)>=0)return!1;let a=!0;return s.eachChild(u=>{a&&!Fs(u,i)&&(a=!1)}),a}class Vs{constructor(i,a){this.type=a.type,this.name=i,this.boundExpression=a}static parse(i,a){if(i.length!==2||typeof i[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const u=i[1];return a.scope.has(u)?new Vs(u,a.scope.get(u)):a.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var bc=Vs;class Us{constructor(i,a=[],u,m=new hc,y=[]){this.registry=i,this.path=a,this.key=a.map(w=>`[${w}]`).join(""),this.scope=m,this.errors=y,this.expectedType=u}parse(i,a,u,m,y={}){return a?this.concat(a,u,m)._parse(i,y):this._parse(i,y)}_parse(i,a){function u(m,y,w){return w==="assert"?new ar(y,[m]):w==="coerce"?new ko(y,[m]):m}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=i[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const y=this.registry[m];if(y){let w=y.parse(i,this);if(!w)return null;if(this.expectedType){const R=this.expectedType,I=w.type;if(R.kind!=="string"&&R.kind!=="number"&&R.kind!=="boolean"&&R.kind!=="object"&&R.kind!=="array"||I.kind!=="value")if(R.kind!=="color"&&R.kind!=="formatted"&&R.kind!=="resolvedImage"||I.kind!=="value"&&I.kind!=="string"){if(this.checkSubtype(R,I))return null}else w=u(w,R,a.typeAnnotation||"coerce");else w=u(w,R,a.typeAnnotation||"assert")}if(!(w instanceof Jo)&&w.type.kind!=="resolvedImage"&&js(w)){const R=new gc;try{w=new Jo(w.type,w.evaluate(R))}catch(I){return this.error(I.message),null}}return w}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,a,u){const m=typeof i=="number"?this.path.concat(i):this.path,y=u?this.scope.concat(u):this.scope;return new Us(this.registry,m,a||null,y,this.errors)}error(i,...a){const u=`${this.key}${a.map(m=>`[${m}]`).join("")}`;this.errors.push(new or(u,i))}checkSubtype(i,a){const u=Ji(i,a);return u&&this.error(u),u}}var Ja=Us;function js(s){if(s instanceof bc)return js(s.boundExpression);if(s instanceof Qi&&s.name==="error"||s instanceof Os||s instanceof Mn)return!1;const i=s instanceof ko||s instanceof ar;let a=!0;return s.eachChild(u=>{a=i?a&&js(u):a&&u instanceof Jo}),!!a&&Qo(s)&&Fs(s,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function es(s,i){const a=s.length-1;let u,m,y=0,w=a,R=0;for(;y<=w;)if(R=Math.floor((y+w)/2),u=s[R],m=s[R+1],u<=i){if(R===a||i<m)return R;y=R+1}else{if(!(u>i))throw new vi("Input is not a number.");w=R-1}return 0}class Dr{constructor(i,a,u){this.type=i,this.input=a,this.labels=[],this.outputs=[];for(const[m,y]of u)this.labels.push(m),this.outputs.push(y)}static parse(i,a){if(i.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return a.error("Expected an even number of arguments.");const u=a.parse(i[1],1,zt);if(!u)return null;const m=[];let y=null;a.expectedType&&a.expectedType.kind!=="value"&&(y=a.expectedType);for(let w=1;w<i.length;w+=2){const R=w===1?-1/0:i[w],I=i[w+1],D=w,j=w+1;if(typeof R!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(m.length&&m[m.length-1][0]>=R)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);const q=a.parse(I,j,y);if(!q)return null;y=y||q.type,m.push([R,q])}return new Dr(y,u,m)}evaluate(i){const a=this.labels,u=this.outputs;if(a.length===1)return u[0].evaluate(i);const m=this.input.evaluate(i);if(m<=a[0])return u[0].evaluate(i);const y=a.length;return m>=a[y-1]?u[y-1].evaluate(i):u[es(a,m)].evaluate(i)}eachChild(i){i(this.input);for(const a of this.outputs)i(a)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){const i=["step",this.input.serialize()];for(let a=0;a<this.labels.length;a++)a>0&&i.push(this.labels[a]),i.push(this.outputs[a].serialize());return i}}var Ro=Dr;function Rn(s,i,a){return s*(1-a)+i*a}var $o=Object.freeze({__proto__:null,number:Rn,color:function(s,i,a){return new ii(Rn(s.r,i.r,a),Rn(s.g,i.g,a),Rn(s.b,i.b,a),Rn(s.a,i.a,a))},array:function(s,i,a){return s.map((u,m)=>Rn(u,i[m],a))}});const Qa=.95047,xc=1.08883,wc=4/29,Gs=6/29,Ec=3*Gs*Gs,Cc=Math.PI/180,Sc=180/Math.PI;function el(s){return s>.008856451679035631?Math.pow(s,1/3):s/Ec+wc}function Hs(s){return s>Gs?s*s*s:Ec*(s-wc)}function tl(s){return 255*(s<=.0031308?12.92*s:1.055*Math.pow(s,1/2.4)-.055)}function qs(s){return(s/=255)<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function nl(s){const i=qs(s.r),a=qs(s.g),u=qs(s.b),m=el((.4124564*i+.3575761*a+.1804375*u)/Qa),y=el((.2126729*i+.7151522*a+.072175*u)/1);return{l:116*y-16,a:500*(m-y),b:200*(y-el((.0193339*i+.119192*a+.9503041*u)/xc)),alpha:s.a}}function Tc(s){let i=(s.l+16)/116,a=isNaN(s.a)?i:i+s.a/500,u=isNaN(s.b)?i:i-s.b/200;return i=1*Hs(i),a=Qa*Hs(a),u=xc*Hs(u),new ii(tl(3.2404542*a-1.5371385*i-.4985314*u),tl(-.969266*a+1.8760108*i+.041556*u),tl(.0556434*a-.2040259*i+1.0572252*u),s.alpha)}function Ju(s,i,a){const u=i-s;return s+a*(u>180||u<-180?u-360*Math.round(u/360):u)}const ts={forward:nl,reverse:Tc,interpolate:function(s,i,a){return{l:Rn(s.l,i.l,a),a:Rn(s.a,i.a,a),b:Rn(s.b,i.b,a),alpha:Rn(s.alpha,i.alpha,a)}}},ns={forward:function(s){const{l:i,a,b:u}=nl(s),m=Math.atan2(u,a)*Sc;return{h:m<0?m+360:m,c:Math.sqrt(a*a+u*u),l:i,alpha:s.a}},reverse:function(s){const i=s.h*Cc,a=s.c;return Tc({l:s.l,a:Math.cos(i)*a,b:Math.sin(i)*a,alpha:s.alpha})},interpolate:function(s,i,a){return{h:Ju(s.h,i.h,a),c:Rn(s.c,i.c,a),l:Rn(s.l,i.l,a),alpha:Rn(s.alpha,i.alpha,a)}}};var Ac=Object.freeze({__proto__:null,lab:ts,hcl:ns});class Ks{constructor(i,a,u,m,y){this.type=i,this.operator=a,this.interpolation=u,this.input=m,this.labels=[],this.outputs=[];for(const[w,R]of y)this.labels.push(w),this.outputs.push(R)}static interpolationFactor(i,a,u,m){let y=0;if(i.name==="exponential")y=Ws(a,i.base,u,m);else if(i.name==="linear")y=Ws(a,1,u,m);else if(i.name==="cubic-bezier"){const w=i.controlPoints;y=new U(w[0],w[1],w[2],w[3]).solve(Ws(a,1,u,m))}return y}static parse(i,a){let[u,m,y,...w]=i;if(!Array.isArray(m)||m.length===0)return a.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const D=m[1];if(typeof D!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:D}}else{if(m[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const D=m.slice(1);if(D.length!==4||D.some(j=>typeof j!="number"||j<0||j>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:D}}}if(i.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(y=a.parse(y,2,zt),!y)return null;const R=[];let I=null;u==="interpolate-hcl"||u==="interpolate-lab"?I=sr:a.expectedType&&a.expectedType.kind!=="value"&&(I=a.expectedType);for(let D=0;D<w.length;D+=2){const j=w[D],q=w[D+1],K=D+3,J=D+4;if(typeof j!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',K);if(R.length&&R[R.length-1][0]>=j)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',K);const Q=a.parse(q,J,I);if(!Q)return null;I=I||Q.type,R.push([j,Q])}return I.kind==="number"||I.kind==="color"||I.kind==="array"&&I.itemType.kind==="number"&&typeof I.N=="number"?new Ks(I,u,m,y,R):a.error(`Type ${Xn(I)} is not interpolatable.`)}evaluate(i){const a=this.labels,u=this.outputs;if(a.length===1)return u[0].evaluate(i);const m=this.input.evaluate(i);if(m<=a[0])return u[0].evaluate(i);const y=a.length;if(m>=a[y-1])return u[y-1].evaluate(i);const w=es(a,m),R=Ks.interpolationFactor(this.interpolation,m,a[w],a[w+1]),I=u[w].evaluate(i),D=u[w+1].evaluate(i);return this.operator==="interpolate"?$o[this.type.kind.toLowerCase()](I,D,R):this.operator==="interpolate-hcl"?ns.reverse(ns.interpolate(ns.forward(I),ns.forward(D),R)):ts.reverse(ts.interpolate(ts.forward(I),ts.forward(D),R))}eachChild(i){i(this.input);for(const a of this.outputs)i(a)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){let i;i=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const a=[this.operator,i,this.input.serialize()];for(let u=0;u<this.labels.length;u++)a.push(this.labels[u],this.outputs[u].serialize());return a}}function Ws(s,i,a,u){const m=u-a,y=s-a;return m===0?0:i===1?y/m:(Math.pow(i,y)-1)/(Math.pow(i,m)-1)}var ur=Ks;class il{constructor(i,a){this.type=i,this.args=a}static parse(i,a){if(i.length<2)return a.error("Expectected at least one argument.");let u=null;const m=a.expectedType;m&&m.kind!=="value"&&(u=m);const y=[];for(const R of i.slice(1)){const I=a.parse(R,1+y.length,u,void 0,{typeAnnotation:"omit"});if(!I)return null;u=u||I.type,y.push(I)}const w=m&&y.some(R=>Ji(m,R.type));return new il(w?Tn:u,y)}evaluate(i){let a,u=null,m=0;for(const y of this.args){if(m++,u=y.evaluate(i),u&&u instanceof Di&&!u.available&&(a||(a=u),u=null,m===this.args.length))return a;if(u!==null)break}return u}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=["coalesce"];return this.eachChild(a=>{i.push(a.serialize())}),i}}var kc=il;class rl{constructor(i,a){this.type=a.type,this.bindings=[].concat(i),this.result=a}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const a of this.bindings)i(a[1]);i(this.result)}static parse(i,a){if(i.length<4)return a.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const u=[];for(let y=1;y<i.length-1;y+=2){const w=i[y];if(typeof w!="string")return a.error(`Expected string, but found ${typeof w} instead.`,y);if(/[^a-zA-Z0-9_]/.test(w))return a.error("Variable names must contain only alphanumeric characters or '_'.",y);const R=a.parse(i[y+1],y+1);if(!R)return null;u.push([w,R])}const m=a.parse(i[i.length-1],i.length-1,a.expectedType,u);return m?new rl(u,m):null}outputDefined(){return this.result.outputDefined()}serialize(){const i=["let"];for(const[a,u]of this.bindings)i.push(a,u.serialize());return i.push(this.result.serialize()),i}}var ol=rl;class Zs{constructor(i,a,u){this.type=i,this.index=a,this.input=u}static parse(i,a){if(i.length!==3)return a.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const u=a.parse(i[1],1,zt),m=a.parse(i[2],2,ji(a.expectedType||Tn));return u&&m?new Zs(m.type.itemType,u,m):null}evaluate(i){const a=this.index.evaluate(i),u=this.input.evaluate(i);if(a<0)throw new vi(`Array index out of bounds: ${a} < 0.`);if(a>=u.length)throw new vi(`Array index out of bounds: ${a} > ${u.length-1}.`);if(a!==Math.floor(a))throw new vi(`Array index must be an integer, but found ${a} instead.`);return u[a]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Rc=Zs;class sl{constructor(i,a){this.type=Sn,this.needle=i,this.haystack=a}static parse(i,a){if(i.length!==3)return a.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const u=a.parse(i[1],1,Tn),m=a.parse(i[2],2,Tn);return u&&m?Ns(u.type,[Sn,Cn,zt,Co,Tn])?new sl(u,m):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Xn(u.type)} instead`):null}evaluate(i){const a=this.needle.evaluate(i),u=this.haystack.evaluate(i);if(u==null)return!1;if(!Pi(a,["boolean","string","number","null"]))throw new vi(`Expected first argument to be of type boolean, string, number or null, but found ${Xn(ui(a))} instead.`);if(!Pi(u,["string","array"]))throw new vi(`Expected second argument to be of type array or string, but found ${Xn(ui(u))} instead.`);return u.indexOf(a)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Qu=sl;class rs{constructor(i,a,u){this.type=zt,this.needle=i,this.haystack=a,this.fromIndex=u}static parse(i,a){if(i.length<=2||i.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const u=a.parse(i[1],1,Tn),m=a.parse(i[2],2,Tn);if(!u||!m)return null;if(!Ns(u.type,[Sn,Cn,zt,Co,Tn]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Xn(u.type)} instead`);if(i.length===4){const y=a.parse(i[3],3,zt);return y?new rs(u,m,y):null}return new rs(u,m)}evaluate(i){const a=this.needle.evaluate(i),u=this.haystack.evaluate(i);if(!Pi(a,["boolean","string","number","null"]))throw new vi(`Expected first argument to be of type boolean, string, number or null, but found ${Xn(ui(a))} instead.`);if(!Pi(u,["string","array"]))throw new vi(`Expected second argument to be of type array or string, but found ${Xn(ui(u))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(i);return u.indexOf(a,m)}return u.indexOf(a)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const i=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),i]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var $c=rs;class Ys{constructor(i,a,u,m,y,w){this.inputType=i,this.type=a,this.input=u,this.cases=m,this.outputs=y,this.otherwise=w}static parse(i,a){if(i.length<5)return a.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return a.error("Expected an even number of arguments.");let u,m;a.expectedType&&a.expectedType.kind!=="value"&&(m=a.expectedType);const y={},w=[];for(let D=2;D<i.length-1;D+=2){let j=i[D];const q=i[D+1];Array.isArray(j)||(j=[j]);const K=a.concat(D);if(j.length===0)return K.error("Expected at least one branch label.");for(const Q of j){if(typeof Q!="number"&&typeof Q!="string")return K.error("Branch labels must be numbers or strings.");if(typeof Q=="number"&&Math.abs(Q)>Number.MAX_SAFE_INTEGER)return K.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Q=="number"&&Math.floor(Q)!==Q)return K.error("Numeric branch labels must be integer values.");if(u){if(K.checkSubtype(u,ui(Q)))return null}else u=ui(Q);if(y[String(Q)]!==void 0)return K.error("Branch labels must be unique.");y[String(Q)]=w.length}const J=a.parse(q,D,m);if(!J)return null;m=m||J.type,w.push(J)}const R=a.parse(i[1],1,Tn);if(!R)return null;const I=a.parse(i[i.length-1],i.length-1,m);return I?R.type.kind!=="value"&&a.concat(1).checkSubtype(u,R.type)?null:new Ys(u,m,R,y,w,I):null}evaluate(i){const a=this.input.evaluate(i);return(ui(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["match",this.input.serialize()],a=Object.keys(this.cases).sort(),u=[],m={};for(const w of a){const R=m[this.cases[w]];R===void 0?(m[this.cases[w]]=u.length,u.push([this.cases[w],[w]])):u[R][1].push(w)}const y=w=>this.inputType.kind==="number"?Number(w):w;for(const[w,R]of u)i.push(R.length===1?y(R[0]):R.map(y)),i.push(this.outputs[w].serialize());return i.push(this.otherwise.serialize()),i}}var ed=Ys;class al{constructor(i,a,u){this.type=i,this.branches=a,this.otherwise=u}static parse(i,a){if(i.length<4)return a.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return a.error("Expected an odd number of arguments.");let u;a.expectedType&&a.expectedType.kind!=="value"&&(u=a.expectedType);const m=[];for(let w=1;w<i.length-1;w+=2){const R=a.parse(i[w],w,Sn);if(!R)return null;const I=a.parse(i[w+1],w+1,u);if(!I)return null;m.push([R,I]),u=u||I.type}const y=a.parse(i[i.length-1],i.length-1,u);return y?new al(u,m,y):null}evaluate(i){for(const[a,u]of this.branches)if(a.evaluate(i))return u.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[a,u]of this.branches)i(a),i(u);i(this.otherwise)}outputDefined(){return this.branches.every(([i,a])=>a.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["case"];return this.eachChild(a=>{i.push(a.serialize())}),i}}var td=al;class Xs{constructor(i,a,u,m){this.type=i,this.input=a,this.beginIndex=u,this.endIndex=m}static parse(i,a){if(i.length<=2||i.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const u=a.parse(i[1],1,Tn),m=a.parse(i[2],2,zt);if(!u||!m)return null;if(!Ns(u.type,[ji(Tn),Cn,Tn]))return a.error(`Expected first argument to be of type array or string, but found ${Xn(u.type)} instead`);if(i.length===4){const y=a.parse(i[3],3,zt);return y?new Xs(u.type,u,m,y):null}return new Xs(u.type,u,m)}evaluate(i){const a=this.input.evaluate(i),u=this.beginIndex.evaluate(i);if(!Pi(a,["string","array"]))throw new vi(`Expected first argument to be of type array or string, but found ${Xn(ui(a))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(i);return a.slice(u,m)}return a.slice(u)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const i=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),i]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Js=Xs;function ll(s,i){return s==="=="||s==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function cl(s,i,a,u){return u.compare(i,a)===0}function No(s,i,a){const u=s!=="=="&&s!=="!=";return class Wh{constructor(y,w,R){this.type=Sn,this.lhs=y,this.rhs=w,this.collator=R,this.hasUntypedArgument=y.type.kind==="value"||w.type.kind==="value"}static parse(y,w){if(y.length!==3&&y.length!==4)return w.error("Expected two or three arguments.");const R=y[0];let I=w.parse(y[1],1,Tn);if(!I)return null;if(!ll(R,I.type))return w.concat(1).error(`"${R}" comparisons are not supported for type '${Xn(I.type)}'.`);let D=w.parse(y[2],2,Tn);if(!D)return null;if(!ll(R,D.type))return w.concat(2).error(`"${R}" comparisons are not supported for type '${Xn(D.type)}'.`);if(I.type.kind!==D.type.kind&&I.type.kind!=="value"&&D.type.kind!=="value")return w.error(`Cannot compare types '${Xn(I.type)}' and '${Xn(D.type)}'.`);u&&(I.type.kind==="value"&&D.type.kind!=="value"?I=new ar(D.type,[I]):I.type.kind!=="value"&&D.type.kind==="value"&&(D=new ar(I.type,[D])));let j=null;if(y.length===4){if(I.type.kind!=="string"&&D.type.kind!=="string"&&I.type.kind!=="value"&&D.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(j=w.parse(y[3],3,Wo),!j)return null}return new Wh(I,D,j)}evaluate(y){const w=this.lhs.evaluate(y),R=this.rhs.evaluate(y);if(u&&this.hasUntypedArgument){const I=ui(w),D=ui(R);if(I.kind!==D.kind||I.kind!=="string"&&I.kind!=="number")throw new vi(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${I.kind}, ${D.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const I=ui(w),D=ui(R);if(I.kind!=="string"||D.kind!=="string")return i(y,w,R)}return this.collator?a(y,w,R,this.collator.evaluate(y)):i(y,w,R)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}serialize(){const y=[s];return this.eachChild(w=>{y.push(w.serialize())}),y}}}const nd=No("==",function(s,i,a){return i===a},cl),id=No("!=",function(s,i,a){return i!==a},function(s,i,a,u){return!cl(0,i,a,u)}),Nc=No("<",function(s,i,a){return i<a},function(s,i,a,u){return u.compare(i,a)<0}),Mc=No(">",function(s,i,a){return i>a},function(s,i,a,u){return u.compare(i,a)>0}),Ic=No("<=",function(s,i,a){return i<=a},function(s,i,a,u){return u.compare(i,a)<=0}),ul=No(">=",function(s,i,a){return i>=a},function(s,i,a,u){return u.compare(i,a)>=0});class dl{constructor(i,a,u,m,y,w){this.type=Cn,this.number=i,this.locale=a,this.currency=u,this.unit=m,this.minFractionDigits=y,this.maxFractionDigits=w}static parse(i,a){if(i.length!==3)return a.error("Expected two arguments.");const u=a.parse(i[1],1,zt);if(!u)return null;const m=i[2];if(typeof m!="object"||Array.isArray(m))return a.error("NumberFormat options argument must be an object.");let y=null;if(m.locale&&(y=a.parse(m.locale,1,Cn),!y))return null;let w=null;if(m.currency&&(w=a.parse(m.currency,1,Cn),!w))return null;let R=null;if(m.unit&&(R=a.parse(m.unit,1,Cn),!R))return null;let I=null;if(m["min-fraction-digits"]&&(I=a.parse(m["min-fraction-digits"],1,zt),!I))return null;let D=null;return m["max-fraction-digits"]&&(D=a.parse(m["max-fraction-digits"],1,zt),!D)?null:new dl(u,y,w,R,I,D)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(i):void 0,unit:this.unit?this.unit.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.unit&&i(this.unit),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const i={};return this.locale&&(i.locale=this.locale.serialize()),this.currency&&(i.currency=this.currency.serialize()),this.unit&&(i.unit=this.unit.serialize()),this.minFractionDigits&&(i["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(i["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),i]}}class pl{constructor(i){this.type=zt,this.input=i}static parse(i,a){if(i.length!==2)return a.error(`Expected 1 argument, but found ${i.length-1} instead.`);const u=a.parse(i[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${Xn(u.type)} instead.`):new pl(u):null}evaluate(i){const a=this.input.evaluate(i);if(typeof a=="string"||Array.isArray(a))return a.length;throw new vi(`Expected value to be of type string or array, but found ${Xn(ui(a))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){const i=["length"];return this.eachChild(a=>{i.push(a.serialize())}),i}}const Lc={"==":nd,"!=":id,">":Mc,"<":Nc,">=":ul,"<=":Ic,array:ar,at:Rc,boolean:ar,case:td,coalesce:kc,collator:Os,format:Or,image:Ls,in:Qu,"index-of":$c,interpolate:ur,"interpolate-hcl":ur,"interpolate-lab":ur,length:pl,let:ol,literal:Jo,match:ed,number:ar,"number-format":dl,object:ar,slice:Js,step:Ro,string:ar,"to-boolean":ko,"to-color":ko,"to-number":ko,"to-string":ko,var:bc,within:Mn};function Oc(s,[i,a,u,m]){i=i.evaluate(s),a=a.evaluate(s),u=u.evaluate(s);const y=m?m.evaluate(s):1,w=mc(i,a,u,y);if(w)throw new vi(w);return new ii(i/255*y,a/255*y,u/255*y,y)}function Pc(s,i){return s in i}function fl(s,i){const a=i[s];return a===void 0?null:a}function io(s){return{type:s}}Qi.register(Lc,{error:[{kind:"error"},[Cn],(s,[i])=>{throw new vi(i.evaluate(s))}],typeof:[Cn,[Tn],(s,[i])=>Xn(ui(i.evaluate(s)))],"to-rgba":[ji(zt,4),[sr],(s,[i])=>i.evaluate(s).toArray()],rgb:[sr,[zt,zt,zt],Oc],rgba:[sr,[zt,zt,zt,zt],Oc],has:{type:Sn,overloads:[[[Cn],(s,[i])=>Pc(i.evaluate(s),s.properties())],[[Cn,So],(s,[i,a])=>Pc(i.evaluate(s),a.evaluate(s))]]},get:{type:Tn,overloads:[[[Cn],(s,[i])=>fl(i.evaluate(s),s.properties())],[[Cn,So],(s,[i,a])=>fl(i.evaluate(s),a.evaluate(s))]]},"feature-state":[Tn,[Cn],(s,[i])=>fl(i.evaluate(s),s.featureState||{})],properties:[So,[],s=>s.properties()],"geometry-type":[Cn,[],s=>s.geometryType()],id:[Tn,[],s=>s.id()],zoom:[zt,[],s=>s.globals.zoom],pitch:[zt,[],s=>s.globals.pitch||0],"distance-from-center":[zt,[],s=>s.distanceFromCenter()],"heatmap-density":[zt,[],s=>s.globals.heatmapDensity||0],"line-progress":[zt,[],s=>s.globals.lineProgress||0],"sky-radial-progress":[zt,[],s=>s.globals.skyRadialProgress||0],accumulated:[Tn,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[zt,io(zt),(s,i)=>{let a=0;for(const u of i)a+=u.evaluate(s);return a}],"*":[zt,io(zt),(s,i)=>{let a=1;for(const u of i)a*=u.evaluate(s);return a}],"-":{type:zt,overloads:[[[zt,zt],(s,[i,a])=>i.evaluate(s)-a.evaluate(s)],[[zt],(s,[i])=>-i.evaluate(s)]]},"/":[zt,[zt,zt],(s,[i,a])=>i.evaluate(s)/a.evaluate(s)],"%":[zt,[zt,zt],(s,[i,a])=>i.evaluate(s)%a.evaluate(s)],ln2:[zt,[],()=>Math.LN2],pi:[zt,[],()=>Math.PI],e:[zt,[],()=>Math.E],"^":[zt,[zt,zt],(s,[i,a])=>Math.pow(i.evaluate(s),a.evaluate(s))],sqrt:[zt,[zt],(s,[i])=>Math.sqrt(i.evaluate(s))],log10:[zt,[zt],(s,[i])=>Math.log(i.evaluate(s))/Math.LN10],ln:[zt,[zt],(s,[i])=>Math.log(i.evaluate(s))],log2:[zt,[zt],(s,[i])=>Math.log(i.evaluate(s))/Math.LN2],sin:[zt,[zt],(s,[i])=>Math.sin(i.evaluate(s))],cos:[zt,[zt],(s,[i])=>Math.cos(i.evaluate(s))],tan:[zt,[zt],(s,[i])=>Math.tan(i.evaluate(s))],asin:[zt,[zt],(s,[i])=>Math.asin(i.evaluate(s))],acos:[zt,[zt],(s,[i])=>Math.acos(i.evaluate(s))],atan:[zt,[zt],(s,[i])=>Math.atan(i.evaluate(s))],min:[zt,io(zt),(s,i)=>Math.min(...i.map(a=>a.evaluate(s)))],max:[zt,io(zt),(s,i)=>Math.max(...i.map(a=>a.evaluate(s)))],abs:[zt,[zt],(s,[i])=>Math.abs(i.evaluate(s))],round:[zt,[zt],(s,[i])=>{const a=i.evaluate(s);return a<0?-Math.round(-a):Math.round(a)}],floor:[zt,[zt],(s,[i])=>Math.floor(i.evaluate(s))],ceil:[zt,[zt],(s,[i])=>Math.ceil(i.evaluate(s))],"filter-==":[Sn,[Cn,Tn],(s,[i,a])=>s.properties()[i.value]===a.value],"filter-id-==":[Sn,[Tn],(s,[i])=>s.id()===i.value],"filter-type-==":[Sn,[Cn],(s,[i])=>s.geometryType()===i.value],"filter-<":[Sn,[Cn,Tn],(s,[i,a])=>{const u=s.properties()[i.value],m=a.value;return typeof u==typeof m&&u<m}],"filter-id-<":[Sn,[Tn],(s,[i])=>{const a=s.id(),u=i.value;return typeof a==typeof u&&a<u}],"filter->":[Sn,[Cn,Tn],(s,[i,a])=>{const u=s.properties()[i.value],m=a.value;return typeof u==typeof m&&u>m}],"filter-id->":[Sn,[Tn],(s,[i])=>{const a=s.id(),u=i.value;return typeof a==typeof u&&a>u}],"filter-<=":[Sn,[Cn,Tn],(s,[i,a])=>{const u=s.properties()[i.value],m=a.value;return typeof u==typeof m&&u<=m}],"filter-id-<=":[Sn,[Tn],(s,[i])=>{const a=s.id(),u=i.value;return typeof a==typeof u&&a<=u}],"filter->=":[Sn,[Cn,Tn],(s,[i,a])=>{const u=s.properties()[i.value],m=a.value;return typeof u==typeof m&&u>=m}],"filter-id->=":[Sn,[Tn],(s,[i])=>{const a=s.id(),u=i.value;return typeof a==typeof u&&a>=u}],"filter-has":[Sn,[Tn],(s,[i])=>i.value in s.properties()],"filter-has-id":[Sn,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[Sn,[ji(Cn)],(s,[i])=>i.value.indexOf(s.geometryType())>=0],"filter-id-in":[Sn,[ji(Tn)],(s,[i])=>i.value.indexOf(s.id())>=0],"filter-in-small":[Sn,[Cn,ji(Tn)],(s,[i,a])=>a.value.indexOf(s.properties()[i.value])>=0],"filter-in-large":[Sn,[Cn,ji(Tn)],(s,[i,a])=>function(u,m,y,w){for(;y<=w;){const R=y+w>>1;if(m[R]===u)return!0;m[R]>u?w=R-1:y=R+1}return!1}(s.properties()[i.value],a.value,0,a.value.length-1)],all:{type:Sn,overloads:[[[Sn,Sn],(s,[i,a])=>i.evaluate(s)&&a.evaluate(s)],[io(Sn),(s,i)=>{for(const a of i)if(!a.evaluate(s))return!1;return!0}]]},any:{type:Sn,overloads:[[[Sn,Sn],(s,[i,a])=>i.evaluate(s)||a.evaluate(s)],[io(Sn),(s,i)=>{for(const a of i)if(a.evaluate(s))return!0;return!1}]]},"!":[Sn,[Sn],(s,[i])=>!i.evaluate(s)],"is-supported-script":[Sn,[Cn],(s,[i])=>{const a=s.globals&&s.globals.isSupportedScript;return!a||a(i.evaluate(s))}],upcase:[Cn,[Cn],(s,[i])=>i.evaluate(s).toUpperCase()],downcase:[Cn,[Cn],(s,[i])=>i.evaluate(s).toLowerCase()],concat:[Cn,io(Tn),(s,i)=>i.map(a=>Xo(a.evaluate(s))).join("")],"resolved-locale":[Cn,[Wo],(s,[i])=>i.evaluate(s).resolvedLocale()]});var Mo=Lc;function hl(s){return{result:"success",value:s}}function br(s){return{result:"error",value:s}}function Io(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function Dc(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function dr(s){return!!s.expression&&s.expression.interpolated}function In(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function xr(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function rd(s){return s}function Bc(s,i){const a=i.type==="color",u=s.stops&&typeof s.stops[0][0]=="object",m=u||!(u||s.property!==void 0),y=s.type||(dr(i)?"exponential":"interval");if(a&&((s=yr({},s)).stops&&(s.stops=s.stops.map(D=>[D[0],ii.parse(D[1])])),s.default=ii.parse(s.default?s.default:i.default)),s.colorSpace&&s.colorSpace!=="rgb"&&!Ac[s.colorSpace])throw new Error(`Unknown color space: ${s.colorSpace}`);let w,R,I;if(y==="exponential")w=gl;else if(y==="interval")w=ml;else if(y==="categorical"){w=od,R=Object.create(null);for(const D of s.stops)R[D[0]]=D[1];I=typeof s.stops[0][0]}else{if(y!=="identity")throw new Error(`Unknown function type "${y}"`);w=_l}if(u){const D={},j=[];for(let J=0;J<s.stops.length;J++){const Q=s.stops[J],ne=Q[0].zoom;D[ne]===void 0&&(D[ne]={zoom:ne,type:s.type,property:s.property,default:s.default,stops:[]},j.push(ne)),D[ne].stops.push([Q[0].value,Q[1]])}const q=[];for(const J of j)q.push([D[J].zoom,Bc(D[J],i)]);const K={name:"linear"};return{kind:"composite",interpolationType:K,interpolationFactor:ur.interpolationFactor.bind(void 0,K),zoomStops:q.map(J=>J[0]),evaluate:({zoom:J},Q)=>gl({stops:q,base:s.base},i,J).evaluate(J,Q)}}if(m){const D=y==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:D,interpolationFactor:ur.interpolationFactor.bind(void 0,D),zoomStops:s.stops.map(j=>j[0]),evaluate:({zoom:j})=>w(s,i,j,R,I)}}return{kind:"source",evaluate(D,j){const q=j&&j.properties?j.properties[s.property]:void 0;return q===void 0?Lo(s.default,i.default):w(s,i,q,R,I)}}}function Lo(s,i,a){return s!==void 0?s:i!==void 0?i:a!==void 0?a:void 0}function od(s,i,a,u,m){return Lo(typeof a===m?u[a]:void 0,s.default,i.default)}function ml(s,i,a){if(In(a)!=="number")return Lo(s.default,i.default);const u=s.stops.length;if(u===1||a<=s.stops[0][0])return s.stops[0][1];if(a>=s.stops[u-1][0])return s.stops[u-1][1];const m=es(s.stops.map(y=>y[0]),a);return s.stops[m][1]}function gl(s,i,a){const u=s.base!==void 0?s.base:1;if(In(a)!=="number")return Lo(s.default,i.default);const m=s.stops.length;if(m===1||a<=s.stops[0][0])return s.stops[0][1];if(a>=s.stops[m-1][0])return s.stops[m-1][1];const y=es(s.stops.map(j=>j[0]),a),w=function(j,q,K,J){const Q=J-K,ne=j-K;return Q===0?0:q===1?ne/Q:(Math.pow(q,ne)-1)/(Math.pow(q,Q)-1)}(a,u,s.stops[y][0],s.stops[y+1][0]),R=s.stops[y][1],I=s.stops[y+1][1];let D=$o[i.type]||rd;if(s.colorSpace&&s.colorSpace!=="rgb"){const j=Ac[s.colorSpace];D=(q,K)=>j.reverse(j.interpolate(j.forward(q),j.forward(K),w))}return typeof R.evaluate=="function"?{evaluate(...j){const q=R.evaluate.apply(void 0,j),K=I.evaluate.apply(void 0,j);if(q!==void 0&&K!==void 0)return D(q,K,w)}}:D(R,I,w)}function _l(s,i,a){return i.type==="color"?a=ii.parse(a):i.type==="formatted"?a=Ri.fromString(a.toString()):i.type==="resolvedImage"?a=Di.fromString(a.toString()):In(a)===i.type||i.type==="enum"&&i.values[a]||(a=void 0),Lo(a,s.default,i.default)}class os{constructor(i,a){this.expression=i,this._warningHistory={},this._evaluator=new gc,this._defaultValue=a?function(u){return u.type==="color"&&(xr(u.default)||Array.isArray(u.default))?new ii(0,0,0,0):u.type==="color"?ii.parse(u.default)||null:u.default===void 0?null:u.default}(a):null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(i,a,u,m,y,w,R,I){return this._evaluator.globals=i,this._evaluator.feature=a,this._evaluator.featureState=u,this._evaluator.canonical=m||null,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=w,this._evaluator.featureTileCoord=R||null,this._evaluator.featureDistanceData=I||null,this.expression.evaluate(this._evaluator)}evaluate(i,a,u,m,y,w,R,I){this._evaluator.globals=i,this._evaluator.feature=a||null,this._evaluator.featureState=u||null,this._evaluator.canonical=m||null,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=w||null,this._evaluator.featureTileCoord=R||null,this._evaluator.featureDistanceData=I||null;try{const D=this.expression.evaluate(this._evaluator);if(D==null||typeof D=="number"&&D!=D)return this._defaultValue;if(this._enumValues&&!(D in this._enumValues))throw new vi(`Expected value to be one of ${Object.keys(this._enumValues).map(j=>JSON.stringify(j)).join(", ")}, but found ${JSON.stringify(D)} instead.`);return D}catch(D){return this._warningHistory[D.message]||(this._warningHistory[D.message]=!0,typeof console<"u"&&console.warn(D.message)),this._defaultValue}}}function ss(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in Mo}function ro(s,i){const a=new Ja(Mo,[],i?function(m){const y={color:sr,string:Cn,number:zt,enum:Cn,boolean:Sn,formatted:To,resolvedImage:Ao};return m.type==="array"?ji(y[m.value]||Tn,m.length):y[m.type]}(i):void 0),u=a.parse(s,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?hl(new os(u,i)):br(a.errors)}class Qs{constructor(i,a){this.kind=i,this._styleExpression=a,this.isStateDependent=i!=="constant"&&!zs(a.expression)}evaluateWithoutErrorHandling(i,a,u,m,y,w){return this._styleExpression.evaluateWithoutErrorHandling(i,a,u,m,y,w)}evaluate(i,a,u,m,y,w){return this._styleExpression.evaluate(i,a,u,m,y,w)}}class ea{constructor(i,a,u,m){this.kind=i,this.zoomStops=u,this._styleExpression=a,this.isStateDependent=i!=="camera"&&!zs(a.expression),this.interpolationType=m}evaluateWithoutErrorHandling(i,a,u,m,y,w){return this._styleExpression.evaluateWithoutErrorHandling(i,a,u,m,y,w)}evaluate(i,a,u,m,y,w){return this._styleExpression.evaluate(i,a,u,m,y,w)}interpolationFactor(i,a,u){return this.interpolationType?ur.interpolationFactor(this.interpolationType,i,a,u):0}}function as(s,i){if((s=ro(s,i)).result==="error")return s;const a=s.value.expression,u=Qo(a);if(!u&&!Io(i))return br([new or("","data expressions not supported")]);const m=Fs(a,["zoom","pitch","distance-from-center"]);if(!m&&!Dc(i))return br([new or("","zoom expressions not supported")]);const y=ls(a);return y||m?y instanceof or?br([y]):y instanceof ur&&!dr(i)?br([new or("",'"interpolate" expressions cannot be used with this property')]):hl(y?new ea(u?"camera":"composite",s.value,y.labels,y instanceof ur?y.interpolation:void 0):new Qs(u?"constant":"source",s.value)):br([new or("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class wr{constructor(i,a){this._parameters=i,this._specification=a,yr(this,Bc(this._parameters,this._specification))}static deserialize(i){return new wr(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function ls(s){let i=null;if(s instanceof ol)i=ls(s.result);else if(s instanceof kc){for(const a of s.args)if(i=ls(a),i)break}else(s instanceof Ro||s instanceof ur)&&s.input instanceof Qi&&s.input.name==="zoom"&&(i=s);return i instanceof or||s.eachChild(a=>{const u=ls(a);u instanceof or?i=u:!i&&u?i=new or("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&u&&i!==u&&(i=new or("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}class Ut{constructor(i,a,u,m){this.message=(i?`${i}: `:"")+u,m&&(this.identifier=m),a!=null&&a.__line__&&(this.line=a.__line__)}}function Gi(s){const i=s.key,a=s.value,u=s.valueSpec||{},m=s.objectElementValidators||{},y=s.style,w=s.styleSpec;let R=[];const I=In(a);if(I!=="object")return[new Ut(i,a,`object expected, ${I} found`)];for(const D in a){const j=D.split(".")[0],q=u[j]||u["*"];let K;m[j]?K=m[j]:u[j]?K=Si:m["*"]?K=m["*"]:u["*"]&&(K=Si),K?R=R.concat(K({key:(i&&`${i}.`)+D,value:a[D],valueSpec:q,style:y,styleSpec:w,object:a,objectKey:D},a)):R.push(new Ut(i,a[D],`unknown property "${D}"`))}for(const D in u)m[D]||u[D].required&&u[D].default===void 0&&a[D]===void 0&&R.push(new Ut(i,a,`missing required property "${D}"`));return R}function vl(s){const i=s.value,a=s.valueSpec,u=s.style,m=s.styleSpec,y=s.key,w=s.arrayElementValidator||Si;if(In(i)!=="array")return[new Ut(y,i,`array expected, ${In(i)} found`)];if(a.length&&i.length!==a.length)return[new Ut(y,i,`array length ${a.length} expected, length ${i.length} found`)];if(a["min-length"]&&i.length<a["min-length"])return[new Ut(y,i,`array length at least ${a["min-length"]} expected, length ${i.length} found`)];let R={type:a.value,values:a.values,minimum:a.minimum,maximum:a.maximum,function:void 0};m.$version<7&&(R.function=a.function),In(a.value)==="object"&&(R=a.value);let I=[];for(let D=0;D<i.length;D++)I=I.concat(w({array:i,arrayIndex:D,value:i[D],valueSpec:R,style:u,styleSpec:m,key:`${y}[${D}]`}));return I}function zc(s){const i=s.key,a=s.value,u=s.valueSpec;let m=In(a);if(m==="number"&&a!=a&&(m="NaN"),m!=="number")return[new Ut(i,a,`number expected, ${m} found`)];if("minimum"in u){let y=u.minimum;if(In(u.minimum)==="array"&&(y=u.minimum[s.arrayIndex]),a<y)return[new Ut(i,a,`${a} is less than the minimum value ${y}`)]}if("maximum"in u){let y=u.maximum;if(In(u.maximum)==="array"&&(y=u.maximum[s.arrayIndex]),a>y)return[new Ut(i,a,`${a} is greater than the maximum value ${y}`)]}return[]}function yl(s){const i=s.valueSpec,a=oi(s.value.type);let u,m,y,w={};const R=a!=="categorical"&&s.value.property===void 0,I=!R,D=In(s.value.stops)==="array"&&In(s.value.stops[0])==="array"&&In(s.value.stops[0][0])==="object",j=Gi({key:s.key,value:s.value,valueSpec:s.styleSpec.function,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(J){if(a==="identity")return[new Ut(J.key,J.value,'identity function may not have a "stops" property')];let Q=[];const ne=J.value;return Q=Q.concat(vl({key:J.key,value:ne,valueSpec:J.valueSpec,style:J.style,styleSpec:J.styleSpec,arrayElementValidator:q})),In(ne)==="array"&&ne.length===0&&Q.push(new Ut(J.key,ne,"array must have at least one stop")),Q},default:function(J){return Si({key:J.key,value:J.value,valueSpec:i,style:J.style,styleSpec:J.styleSpec})}}});return a==="identity"&&R&&j.push(new Ut(s.key,s.value,'missing required property "property"')),a==="identity"||s.value.stops||j.push(new Ut(s.key,s.value,'missing required property "stops"')),a==="exponential"&&s.valueSpec.expression&&!dr(s.valueSpec)&&j.push(new Ut(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(I&&!Io(s.valueSpec)?j.push(new Ut(s.key,s.value,"property functions not supported")):R&&!Dc(s.valueSpec)&&j.push(new Ut(s.key,s.value,"zoom functions not supported"))),a!=="categorical"&&!D||s.value.property!==void 0||j.push(new Ut(s.key,s.value,'"property" property is required')),j;function q(J){let Q=[];const ne=J.value,ue=J.key;if(In(ne)!=="array")return[new Ut(ue,ne,`array expected, ${In(ne)} found`)];if(ne.length!==2)return[new Ut(ue,ne,`array length 2 expected, length ${ne.length} found`)];if(D){if(In(ne[0])!=="object")return[new Ut(ue,ne,`object expected, ${In(ne[0])} found`)];if(ne[0].zoom===void 0)return[new Ut(ue,ne,"object stop key must have zoom")];if(ne[0].value===void 0)return[new Ut(ue,ne,"object stop key must have value")];const Te=oi(ne[0].zoom);if(typeof Te!="number")return[new Ut(ue,ne[0].zoom,"stop zoom values must be numbers")];if(y&&y>Te)return[new Ut(ue,ne[0].zoom,"stop zoom values must appear in ascending order")];Te!==y&&(y=Te,m=void 0,w={}),Q=Q.concat(Gi({key:`${ue}[0]`,value:ne[0],valueSpec:{zoom:{}},style:J.style,styleSpec:J.styleSpec,objectElementValidators:{zoom:zc,value:K}}))}else Q=Q.concat(K({key:`${ue}[0]`,value:ne[0],valueSpec:{},style:J.style,styleSpec:J.styleSpec},ne));return ss(Lr(ne[1]))?Q.concat([new Ut(`${ue}[1]`,ne[1],"expressions are not allowed in function stops.")]):Q.concat(Si({key:`${ue}[1]`,value:ne[1],valueSpec:i,style:J.style,styleSpec:J.styleSpec}))}function K(J,Q){const ne=In(J.value),ue=oi(J.value),Te=J.value!==null?J.value:Q;if(u){if(ne!==u)return[new Ut(J.key,Te,`${ne} stop domain type must match previous stop domain type ${u}`)]}else u=ne;if(ne!=="number"&&ne!=="string"&&ne!=="boolean"&&typeof ue!="number"&&typeof ue!="string"&&typeof ue!="boolean")return[new Ut(J.key,Te,"stop domain value must be a number, string, or boolean")];if(ne!=="number"&&a!=="categorical"){let Oe=`number expected, ${ne} found`;return Io(i)&&a===void 0&&(Oe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ut(J.key,Te,Oe)]}return a!=="categorical"||ne!=="number"||typeof ue=="number"&&isFinite(ue)&&Math.floor(ue)===ue?a!=="categorical"&&ne==="number"&&typeof ue=="number"&&typeof m=="number"&&m!==void 0&&ue<m?[new Ut(J.key,Te,"stop domain values must appear in ascending order")]:(m=ue,a==="categorical"&&ue in w?[new Ut(J.key,Te,"stop domain values must be unique")]:(w[ue]=!0,[])):[new Ut(J.key,Te,`integer expected, found ${String(ue)}`)]}}function Er(s){const i=(s.expressionContext==="property"?as:ro)(Lr(s.value),s.valueSpec);if(i.result==="error")return i.value.map(u=>new Ut(`${s.key}${u.key}`,s.value,u.message));const a=i.value.expression||i.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!a.outputDefined())return[new Ut(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!zs(a))return[new Ut(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter")return Fc(a,s);if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!Fs(a,["zoom","feature-state"]))return[new Ut(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!Qo(a))return[new Ut(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Fc(s,i){const a=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(i.valueSpec&&i.valueSpec.expression)for(const m of i.valueSpec.expression.parameters)a.delete(m);if(a.size===0)return[];const u=[];return s instanceof Qi&&a.has(s.name)?[new Ut(i.key,i.value,`["${s.name}"] expression is not supported in a filter for a ${i.object.type} layer with id: ${i.object.id}`)]:(s.eachChild(m=>{u.push(...Fc(m,i))}),u)}function ta(s){const i=s.key,a=s.value,u=s.valueSpec,m=[];return Array.isArray(u.values)?u.values.indexOf(oi(a))===-1&&m.push(new Ut(i,a,`expected one of [${u.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(u.values).indexOf(oi(a))===-1&&m.push(new Ut(i,a,`expected one of [${Object.keys(u.values).join(", ")}], ${JSON.stringify(a)} found`)),m}function bl(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const i of s.slice(1))if(!bl(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}function na(s,i="fill"){if(s==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};bl(s)||(s=ra(s));const a=s;let u=!0;try{u=function(D){if(!Cr(D))return D;let j=Lr(D);return cs(j),j=Vc(j),j}(a)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(a,null,2)}
        `)}const m=lt[`filter_${i}`],y=ro(u,m);let w=null;if(y.result==="error")throw new Error(y.value.map(D=>`${D.key}: ${D.message}`).join(", "));w=(D,j,q)=>y.value.evaluate(D,j,{},q);let R=null,I=null;if(u!==a){const D=ro(a,m);if(D.result==="error")throw new Error(D.value.map(j=>`${j.key}: ${j.message}`).join(", "));R=(j,q,K,J,Q)=>D.value.evaluate(j,q,{},K,void 0,void 0,J,Q),I=!Qo(D.value.expression)}return{filter:w,dynamicFilter:R||void 0,needGeometry:Uc(u),needFeature:!!I}}function Vc(s){if(!Array.isArray(s))return s;const i=function(a){if(Hi.has(a[0])){for(let u=1;u<a.length;u++)if(Cr(a[u]))return!0}return a}(s);return i===!0?i:i.map(a=>Vc(a))}function cs(s){let i=!1;const a=[];if(s[0]==="case"){for(let u=1;u<s.length-1;u+=2)i=i||Cr(s[u]),a.push(s[u+1]);a.push(s[s.length-1])}else if(s[0]==="match"){i=i||Cr(s[1]);for(let u=2;u<s.length-1;u+=2)a.push(s[u+1]);a.push(s[s.length-1])}else if(s[0]==="step"){i=i||Cr(s[1]);for(let u=1;u<s.length-1;u+=2)a.push(s[u+1])}i&&(s.length=0,s.push("any",...a));for(let u=1;u<s.length;u++)cs(s[u])}function Cr(s){if(!Array.isArray(s))return!1;if((i=s[0])==="pitch"||i==="distance-from-center")return!0;var i;for(let a=1;a<s.length;a++)if(Cr(s[a]))return!0;return!1}const Hi=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function ia(s,i){return s<i?-1:s>i?1:0}function Uc(s){if(!Array.isArray(s))return!1;if(s[0]==="within")return!0;for(let i=1;i<s.length;i++)if(Uc(s[i]))return!0;return!1}function ra(s){if(!s)return!0;const i=s[0];return s.length<=1?i!=="any":i==="=="?xl(s[1],s[2],"=="):i==="!="?sa(xl(s[1],s[2],"==")):i==="<"||i===">"||i==="<="||i===">="?xl(s[1],s[2],i):i==="any"?(a=s.slice(1),["any"].concat(a.map(ra))):i==="all"?["all"].concat(s.slice(1).map(ra)):i==="none"?["all"].concat(s.slice(1).map(ra).map(sa)):i==="in"?jc(s[1],s.slice(2)):i==="!in"?sa(jc(s[1],s.slice(2))):i==="has"?oa(s[1]):i==="!has"?sa(oa(s[1])):i!=="within"||s;var a}function xl(s,i,a){switch(s){case"$type":return[`filter-type-${a}`,i];case"$id":return[`filter-id-${a}`,i];default:return[`filter-${a}`,s,i]}}function jc(s,i){if(i.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(a=>typeof a!=typeof i[0])?["filter-in-large",s,["literal",i.sort(ia)]]:["filter-in-small",s,["literal",i]]}}function oa(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function sa(s){return["!",s]}function us(s){return bl(Lr(s.value))?Er(yr({},s,{expressionContext:"filter",valueSpec:s.styleSpec[`filter_${s.layerType||"fill"}`]})):Gc(s)}function Gc(s){const i=s.value,a=s.key;if(In(i)!=="array")return[new Ut(a,i,`array expected, ${In(i)} found`)];const u=s.styleSpec;let m,y=[];if(i.length<1)return[new Ut(a,i,"filter array must have at least 1 element")];switch(y=y.concat(ta({key:`${a}[0]`,value:i[0],valueSpec:u.filter_operator,style:s.style,styleSpec:s.styleSpec})),oi(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&oi(i[1])==="$type"&&y.push(new Ut(a,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&y.push(new Ut(a,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(m=In(i[1]),m!=="string"&&y.push(new Ut(`${a}[1]`,i[1],`string expected, ${m} found`)));for(let w=2;w<i.length;w++)m=In(i[w]),oi(i[1])==="$type"?y=y.concat(ta({key:`${a}[${w}]`,value:i[w],valueSpec:u.geometry_type,style:s.style,styleSpec:s.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&y.push(new Ut(`${a}[${w}]`,i[w],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let w=1;w<i.length;w++)y=y.concat(Gc({key:`${a}[${w}]`,value:i[w],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":m=In(i[1]),i.length!==2?y.push(new Ut(a,i,`filter array for "${i[0]}" operator must have 2 elements`)):m!=="string"&&y.push(new Ut(`${a}[1]`,i[1],`string expected, ${m} found`));break;case"within":m=In(i[1]),i.length!==2?y.push(new Ut(a,i,`filter array for "${i[0]}" operator must have 2 elements`)):m!=="object"&&y.push(new Ut(`${a}[1]`,i[1],`object expected, ${m} found`))}return y}function Hc(s,i){const a=s.key,u=s.style,m=s.styleSpec,y=s.value,w=s.objectKey,R=m[`${i}_${s.layerType}`];if(!R)return[];const I=w.match(/^(.*)-transition$/);if(i==="paint"&&I&&R[I[1]]&&R[I[1]].transition)return Si({key:a,value:y,valueSpec:m.transition,style:u,styleSpec:m});const D=s.valueSpec||R[w];if(!D)return[new Ut(a,y,`unknown property "${w}"`)];let j;if(In(y)==="string"&&Io(D)&&!D.tokens&&(j=/^{([^}]+)}$/.exec(y)))return[new Ut(a,y,`"${w}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(j[1])} }\`.`)];const q=[];return s.layerType==="symbol"&&(w==="text-field"&&u&&!u.glyphs&&q.push(new Ut(a,y,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&xr(Lr(y))&&oi(y.type)==="identity"&&q.push(new Ut(a,y,'"text-font" does not support identity functions'))),q.concat(Si({key:s.key,value:y,valueSpec:D,style:u,styleSpec:m,expressionContext:"property",propertyType:i,propertyKey:w}))}function aa(s){return Hc(s,"paint")}function qc(s){return Hc(s,"layout")}function wl(s){let i=[];const a=s.value,u=s.key,m=s.style,y=s.styleSpec;a.type||a.ref||i.push(new Ut(u,a,'either "type" or "ref" is required'));let w=oi(a.type);const R=oi(a.ref);if(a.id){const I=oi(a.id);for(let D=0;D<s.arrayIndex;D++){const j=m.layers[D];oi(j.id)===I&&i.push(new Ut(u,a.id,`duplicate layer id "${a.id}", previously used at line ${j.id.__line__}`))}}if("ref"in a){let I;["type","source","source-layer","filter","layout"].forEach(D=>{D in a&&i.push(new Ut(u,a[D],`"${D}" is prohibited for ref layers`))}),m.layers.forEach(D=>{oi(D.id)===R&&(I=D)}),I?I.ref?i.push(new Ut(u,a.ref,"ref cannot reference another ref layer")):w=oi(I.type):typeof R=="string"&&i.push(new Ut(u,a.ref,`ref layer "${R}" not found`))}else if(w!=="background"&&w!=="sky")if(a.source){const I=m.sources&&m.sources[a.source],D=I&&oi(I.type);I?D==="vector"&&w==="raster"?i.push(new Ut(u,a.source,`layer "${a.id}" requires a raster source`)):D==="raster"&&w!=="raster"?i.push(new Ut(u,a.source,`layer "${a.id}" requires a vector source`)):D!=="vector"||a["source-layer"]?D==="raster-dem"&&w!=="hillshade"?i.push(new Ut(u,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):w!=="line"||!a.paint||!a.paint["line-gradient"]&&!a.paint["line-trim-offset"]||D==="geojson"&&I.lineMetrics||i.push(new Ut(u,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new Ut(u,a,`layer "${a.id}" must specify a "source-layer"`)):i.push(new Ut(u,a.source,`source "${a.source}" not found`))}else i.push(new Ut(u,a,'missing required property "source"'));return i=i.concat(Gi({key:u,value:a,valueSpec:y.layer,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Si({key:`${u}.type`,value:a.type,valueSpec:y.layer.type,style:s.style,styleSpec:s.styleSpec,object:a,objectKey:"type"}),filter:I=>us(yr({layerType:w},I)),layout:I=>Gi({layer:a,key:I.key,value:I.value,valueSpec:{},style:I.style,styleSpec:I.styleSpec,objectElementValidators:{"*":D=>qc(yr({layerType:w},D))}}),paint:I=>Gi({layer:a,key:I.key,value:I.value,valueSpec:{},style:I.style,styleSpec:I.styleSpec,objectElementValidators:{"*":D=>aa(yr({layerType:w},D))}})}})),i}function oo(s){const i=s.value,a=s.key,u=In(i);return u!=="string"?[new Ut(a,i,`string expected, ${u} found`)]:[]}const Kc={promoteId:function({key:s,value:i}){if(In(i)==="string")return oo({key:s,value:i});{const a=[];for(const u in i)a.push(...oo({key:`${s}.${u}`,value:i[u]}));return a}}};function la(s){const i=s.value,a=s.key,u=s.styleSpec,m=s.style;if(!i.type)return[new Ut(a,i,'"type" is required')];const y=oi(i.type);let w;switch(y){case"vector":case"raster":case"raster-dem":return w=Gi({key:a,value:i,valueSpec:u[`source_${y.replace("-","_")}`],style:s.style,styleSpec:u,objectElementValidators:Kc}),w;case"geojson":if(w=Gi({key:a,value:i,valueSpec:u.source_geojson,style:m,styleSpec:u,objectElementValidators:Kc}),i.cluster)for(const R in i.clusterProperties){const[I,D]=i.clusterProperties[R],j=typeof I=="string"?[I,["accumulated"],["get",R]]:I;w.push(...Er({key:`${a}.${R}.map`,value:D,expressionContext:"cluster-map"})),w.push(...Er({key:`${a}.${R}.reduce`,value:j,expressionContext:"cluster-reduce"}))}return w;case"video":return Gi({key:a,value:i,valueSpec:u.source_video,style:m,styleSpec:u});case"image":return Gi({key:a,value:i,valueSpec:u.source_image,style:m,styleSpec:u});case"canvas":return[new Ut(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ta({key:`${a}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,styleSpec:u})}}function ds(s){const i=s.value,a=s.styleSpec,u=a.light,m=s.style;let y=[];const w=In(i);if(i===void 0)return y;if(w!=="object")return y=y.concat([new Ut("light",i,`object expected, ${w} found`)]),y;for(const R in i){const I=R.match(/^(.*)-transition$/);y=y.concat(I&&u[I[1]]&&u[I[1]].transition?Si({key:R,value:i[R],valueSpec:a.transition,style:m,styleSpec:a}):u[R]?Si({key:R,value:i[R],valueSpec:u[R],style:m,styleSpec:a}):[new Ut(R,i[R],`unknown property "${R}"`)])}return y}function El(s){const i=s.value,a=s.key,u=s.style,m=s.styleSpec,y=m.terrain;let w=[];const R=In(i);if(i===void 0)return w;if(R!=="object")return w=w.concat([new Ut("terrain",i,`object expected, ${R} found`)]),w;for(const I in i){const D=I.match(/^(.*)-transition$/);w=w.concat(D&&y[D[1]]&&y[D[1]].transition?Si({key:I,value:i[I],valueSpec:m.transition,style:u,styleSpec:m}):y[I]?Si({key:I,value:i[I],valueSpec:y[I],style:u,styleSpec:m}):[new Ut(I,i[I],`unknown property "${I}"`)])}if(i.source){const I=u.sources&&u.sources[i.source],D=I&&oi(I.type);I?D!=="raster-dem"&&w.push(new Ut(a,i.source,`terrain cannot be used with a source of type ${String(D)}, it only be used with a "raster-dem" source type`)):w.push(new Ut(a,i.source,`source "${i.source}" not found`))}else w.push(new Ut(a,i,'terrain is missing required property "source"'));return w}function Wc(s){const i=s.value,a=s.style,u=s.styleSpec,m=u.fog;let y=[];const w=In(i);if(i===void 0)return y;if(w!=="object")return y=y.concat([new Ut("fog",i,`object expected, ${w} found`)]),y;for(const R in i){const I=R.match(/^(.*)-transition$/);y=y.concat(I&&m[I[1]]&&m[I[1]].transition?Si({key:R,value:i[R],valueSpec:u.transition,style:a,styleSpec:u}):m[R]?Si({key:R,value:i[R],valueSpec:m[R],style:a,styleSpec:u}):[new Ut(R,i[R],`unknown property "${R}"`)])}return y}const Cl={"*":()=>[],array:vl,boolean:function(s){const i=s.value,a=s.key,u=In(i);return u!=="boolean"?[new Ut(a,i,`boolean expected, ${u} found`)]:[]},number:zc,color:function(s){const i=s.key,a=s.value,u=In(a);return u!=="string"?[new Ut(i,a,`color expected, ${u} found`)]:Ba(a)===null?[new Ut(i,a,`color expected, "${a}" found`)]:[]},enum:ta,filter:us,function:yl,layer:wl,object:Gi,source:la,light:ds,terrain:El,fog:Wc,string:oo,formatted:function(s){return oo(s).length===0?[]:Er(s)},resolvedImage:function(s){return oo(s).length===0?[]:Er(s)},projection:function(s){const i=s.value,a=s.styleSpec,u=a.projection,m=s.style;let y=[];const w=In(i);if(w==="object")for(const R in i)y=y.concat(Si({key:R,value:i[R],valueSpec:u[R],style:m,styleSpec:a}));else w!=="string"&&(y=y.concat([new Ut("projection",i,`object or string expected, ${w} found`)]));return y}};function Si(s){const i=s.value,a=s.valueSpec,u=s.styleSpec;return a.expression&&xr(oi(i))?yl(s):a.expression&&ss(Lr(i))?Er(s):a.type&&Cl[a.type]?Cl[a.type](s):Gi(yr({},s,{valueSpec:a.type?u[a.type]:a}))}function Sl(s){const i=s.value,a=s.key,u=oo(s);return u.length||(i.indexOf("{fontstack}")===-1&&u.push(new Ut(a,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&u.push(new Ut(a,i,'"glyphs" url must include a "{range}" token'))),u}function Zc(s,i=lt){return Sr(Si({key:"",value:s,valueSpec:i.$root,styleSpec:i,style:s,objectElementValidators:{glyphs:Sl,"*":()=>[]}}))}const sd=s=>Sr(aa(s)),ad=s=>Sr(qc(s));function Sr(s){return s.slice().sort((i,a)=>i.line&&a.line?i.line-a.line:0)}function Tl(s,i){let a=!1;if(i&&i.length)for(const u of i)s.fire(new Ir(new Error(u.message))),a=!0;return a}var Oo=pr;function pr(s,i,a){var u=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;var m=new Int32Array(this.arrayBuffer);s=m[0],this.d=(i=m[1])+2*(a=m[2]);for(var y=0;y<this.d*this.d;y++){var w=m[3+y],R=m[3+y+1];u.push(w===R?null:m.subarray(w,R))}var I=m[3+u.length+1];this.keys=m.subarray(m[3+u.length],I),this.bboxes=m.subarray(I),this.insert=this._insertReadonly}else{this.d=i+2*a;for(var D=0;D<this.d*this.d;D++)u.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=s,this.padding=a,this.scale=i/s,this.uid=0;var j=a/i*s;this.min=-j,this.max=s+j}pr.prototype.insert=function(s,i,a,u,m){this._forEachCell(i,a,u,m,this._insertCell,this.uid++),this.keys.push(s),this.bboxes.push(i),this.bboxes.push(a),this.bboxes.push(u),this.bboxes.push(m)},pr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},pr.prototype._insertCell=function(s,i,a,u,m,y){this.cells[m].push(y)},pr.prototype.query=function(s,i,a,u,m){var y=this.min,w=this.max;if(s<=y&&i<=y&&w<=a&&w<=u&&!m)return Array.prototype.slice.call(this.keys);var R=[];return this._forEachCell(s,i,a,u,this._queryCell,R,{},m),R},pr.prototype._queryCell=function(s,i,a,u,m,y,w,R){var I=this.cells[m];if(I!==null)for(var D=this.keys,j=this.bboxes,q=0;q<I.length;q++){var K=I[q];if(w[K]===void 0){var J=4*K;(R?R(j[J+0],j[J+1],j[J+2],j[J+3]):s<=j[J+2]&&i<=j[J+3]&&a>=j[J+0]&&u>=j[J+1])?(w[K]=!0,y.push(D[K])):w[K]=!1}}},pr.prototype._forEachCell=function(s,i,a,u,m,y,w,R){for(var I=this._convertToCellCoord(s),D=this._convertToCellCoord(i),j=this._convertToCellCoord(a),q=this._convertToCellCoord(u),K=I;K<=j;K++)for(var J=D;J<=q;J++){var Q=this.d*J+K;if((!R||R(this._convertFromCellCoord(K),this._convertFromCellCoord(J),this._convertFromCellCoord(K+1),this._convertFromCellCoord(J+1)))&&m.call(this,s,i,a,u,Q,y,w,R))return}},pr.prototype._convertFromCellCoord=function(s){return(s-this.padding)/this.scale},pr.prototype._convertToCellCoord=function(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))},pr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var s=this.cells,i=3+this.cells.length+1+1,a=0,u=0;u<this.cells.length;u++)a+=this.cells[u].length;var m=new Int32Array(i+a+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;for(var y=i,w=0;w<s.length;w++){var R=s[w];m[3+w]=y,m.set(R,y),y+=R.length}return m[3+s.length]=y,m.set(this.keys,y),m[3+s.length+1]=y+=this.keys.length,m.set(this.bboxes,y),y+=this.bboxes.length,m.buffer};const ca={};function Gt(s,i,a={}){Object.defineProperty(s,"_classRegistryKey",{value:i,writeable:!1}),ca[i]={klass:s,omit:a.omit||[]}}Gt(Object,"Object"),Oo.serialize=function(s,i){const a=s.toArrayBuffer();return i&&i.push(a),{buffer:a}},Oo.deserialize=function(s){return new Oo(s.buffer)},Object.defineProperty(Oo,"name",{value:"Grid"}),Gt(Oo,"Grid"),Gt(ii,"Color"),Gt(Error,"Error"),Gt(Gn,"AJAXError"),Gt(Di,"ResolvedImage"),Gt(wr,"StylePropertyFunction"),Gt(os,"StyleExpression",{omit:["_evaluator"]}),Gt(ea,"ZoomDependentExpression"),Gt(Qs,"ZoomConstantExpression"),Gt(Qi,"CompoundExpression",{omit:["_evaluate"]});for(const s in Mo)ca[Mo[s]._classRegistryKey]||Gt(Mo[s],`Expression${s}`);function Yc(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function Xc(s){return v.ImageBitmap&&s instanceof v.ImageBitmap}function ps(s,i){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp)return s;if(Yc(s)||Xc(s))return i&&i.push(s),s;if(ArrayBuffer.isView(s)){const a=s;return i&&i.push(a.buffer),a}if(s instanceof v.ImageData)return i&&i.push(s.data.buffer),s;if(Array.isArray(s)){const a=[];for(const u of s)a.push(ps(u,i));return a}if(typeof s=="object"){const a=s.constructor,u=a._classRegistryKey;if(!u)throw new Error(`can't serialize object of unregistered class ${u}`);const m=a.serialize?a.serialize(s,i):{};if(!a.serialize){for(const y in s)s.hasOwnProperty(y)&&(ca[u].omit.indexOf(y)>=0||(m[y]=ps(s[y],i)));s instanceof Error&&(m.message=s.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(m.$name=u),m}throw new Error("can't serialize object of type "+typeof s)}function Br(s){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||Yc(s)||Xc(s)||ArrayBuffer.isView(s)||s instanceof v.ImageData)return s;if(Array.isArray(s))return s.map(Br);if(typeof s=="object"){const i=s.$name||"Object",{klass:a}=ca[i];if(!a)throw new Error(`can't deserialize unregistered class ${i}`);if(a.deserialize)return a.deserialize(s);const u=Object.create(a.prototype);for(const m of Object.keys(s))m!=="$name"&&(u[m]=Br(s[m]));return u}throw new Error("can't deserialize object of type "+typeof s)}class Jc{constructor(){this.first=!0}update(i,a){const u=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=u,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=u,!0):(this.lastFloorZoom>u?(this.lastIntegerZoom=u+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<u&&(this.lastIntegerZoom=u,this.lastIntegerZoomTime=a),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=u,!0))}}const Qc=s=>s>=1536&&s<=1791,hs=s=>s>=1872&&s<=1919,eu=s=>s>=2208&&s<=2303,Al=s=>s>=11904&&s<=12031,tu=s=>s>=12032&&s<=12255,kl=s=>s>=12272&&s<=12287,gs=s=>s>=12288&&s<=12351,ua=s=>s>=12352&&s<=12447,_s=s=>s>=12448&&s<=12543,da=s=>s>=12544&&s<=12591,pa=s=>s>=12704&&s<=12735,nu=s=>s>=12736&&s<=12783,iu=s=>s>=12784&&s<=12799,Rl=s=>s>=12800&&s<=13055,ru=s=>s>=13056&&s<=13311,ou=s=>s>=13312&&s<=19903,$l=s=>s>=19968&&s<=40959,fa=s=>s>=40960&&s<=42127,su=s=>s>=42128&&s<=42191,au=s=>s>=44032&&s<=55215,lu=s=>s>=63744&&s<=64255,Nl=s=>s>=64336&&s<=65023,cu=s=>s>=65040&&s<=65055,ha=s=>s>=65072&&s<=65103,vs=s=>s>=65104&&s<=65135,_=s=>s>=65136&&s<=65279,l=s=>s>=65280&&s<=65519;function f(s){for(const i of s)if(M(i.charCodeAt(0)))return!0;return!1}function b(s){for(const i of s)if(!T(i.charCodeAt(0)))return!1;return!0}function T(s){return!(Qc(s)||hs(s)||eu(s)||Nl(s)||_(s))}function M(s){return!(s!==746&&s!==747&&(s<4352||!(pa(s)||da(s)||ha(s)&&!(s>=65097&&s<=65103)||lu(s)||ru(s)||Al(s)||nu(s)||!(!gs(s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||ou(s)||$l(s)||Rl(s)||(i=>i>=12592&&i<=12687)(s)||(i=>i>=43360&&i<=43391)(s)||(i=>i>=55216&&i<=55295)(s)||(i=>i>=4352&&i<=4607)(s)||au(s)||ua(s)||kl(s)||(i=>i>=12688&&i<=12703)(s)||tu(s)||iu(s)||_s(s)&&s!==12540||!(!l(s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!vs(s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||(i=>i>=5120&&i<=5759)(s)||(i=>i>=6320&&i<=6399)(s)||cu(s)||(i=>i>=19904&&i<=19967)(s)||fa(s)||su(s))))}function F(s){return!(M(s)||function(i){return!!((a=>a>=128&&a<=255)(i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||(a=>a>=8192&&a<=8303)(i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||(a=>a>=8448&&a<=8527)(i)||(a=>a>=8528&&a<=8591)(i)||(a=>a>=8960&&a<=9215)(i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||(a=>a>=9216&&a<=9279)(i)&&i!==9251||(a=>a>=9280&&a<=9311)(i)||(a=>a>=9312&&a<=9471)(i)||(a=>a>=9632&&a<=9727)(i)||(a=>a>=9728&&a<=9983)(i)&&!(i>=9754&&i<=9759)||(a=>a>=11008&&a<=11263)(i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||gs(i)||_s(i)||(a=>a>=57344&&a<=63743)(i)||ha(i)||vs(i)||l(i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(s))}function G(s){return s>=1424&&s<=2303||Nl(s)||_(s)}function H(s,i){return!(!i&&G(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||(a=>a>=6016&&a<=6143)(s))}function Y(s){for(const i of s)if(G(i.charCodeAt(0)))return!0;return!1}const X="deferred",te="loading",le="loaded";let ge=null,pe="unavailable",ve=null;const fe=function(s){s&&typeof s=="string"&&s.indexOf("NetworkError")>-1&&(pe="error"),ge&&ge(s)};function de(){be.fire(new zn("pluginStateChange",{pluginStatus:pe,pluginURL:ve}))}const be=new vr,he=function(){return pe},Ie=function(){if(pe!==X||!ve)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");pe=te,de(),ve&&Li({url:ve},s=>{s?fe(s):(pe=le,de())})},Le={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>pe===le||Le.applyArabicShaping!=null,isLoading:()=>pe===te,setState(s){pe=s.pluginStatus,ve=s.pluginURL},isParsed:()=>Le.applyArabicShaping!=null&&Le.processBidirectionalText!=null&&Le.processStyledBidirectionalText!=null,getPluginURL:()=>ve};class Ae{constructor(i,a){this.zoom=i,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition,this.pitch=a.pitch):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Jc,this.transition={},this.pitch=0)}isSupportedScript(i){return function(a,u){for(const m of a)if(!H(m.charCodeAt(0),u))return!1;return!0}(i,Le.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const i=this.zoom,a=i-Math.floor(i),u=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*u}:{fromScale:.5,toScale:1,t:1-(1-u)*a}}}class Pe{constructor(i,a){this.property=i,this.value=a,this.expression=function(u,m){if(xr(u))return new wr(u,m);if(ss(u)){const y=as(u,m);if(y.result==="error")throw new Error(y.value.map(w=>`${w.key}: ${w.message}`).join(", "));return y.value}{let y=u;return typeof u=="string"&&m.type==="color"&&(y=ii.parse(u)),{kind:"constant",evaluate:()=>y}}}(a===void 0?i.specification.default:a,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,a,u){return this.property.possiblyEvaluate(this,i,a,u)}}class qe{constructor(i){this.property=i,this.value=new Pe(i,void 0)}transitioned(i,a){return new Xe(this.property,this.value,a,mt({},i.transition,this.transition),i.now)}untransitioned(){return new Xe(this.property,this.value,null,{},0)}}class rt{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return dn(this._values[i].value.value)}setValue(i,a){this._values.hasOwnProperty(i)||(this._values[i]=new qe(this._values[i].property)),this._values[i].value=new Pe(this._values[i].property,a===null?void 0:dn(a))}getTransition(i){return dn(this._values[i].transition)}setTransition(i,a){this._values.hasOwnProperty(i)||(this._values[i]=new qe(this._values[i].property)),this._values[i].transition=dn(a)||void 0}serialize(){const i={};for(const a of Object.keys(this._values)){const u=this.getValue(a);u!==void 0&&(i[a]=u);const m=this.getTransition(a);m!==void 0&&(i[`${a}-transition`]=m)}return i}transitioned(i,a){const u=new St(this._properties);for(const m of Object.keys(this._values))u._values[m]=this._values[m].transitioned(i,a._values[m]);return u}untransitioned(){const i=new St(this._properties);for(const a of Object.keys(this._values))i._values[a]=this._values[a].untransitioned();return i}}class Xe{constructor(i,a,u,m,y){const w=m.delay||0,R=m.duration||0;y=y||0,this.property=i,this.value=a,this.begin=y+w,this.end=this.begin+R,i.specification.transition&&(m.delay||m.duration)&&(this.prior=u)}possiblyEvaluate(i,a,u){const m=i.now||0,y=this.value.possiblyEvaluate(i,a,u),w=this.prior;if(w){if(m>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(m<this.begin)return w.possiblyEvaluate(i,a,u);{const R=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(i,a,u),y,ae(R))}}return y}}class St{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,a,u){const m=new ht(this._properties);for(const y of Object.keys(this._values))m._values[y]=this._values[y].possiblyEvaluate(i,a,u);return m}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class je{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}getValue(i){return dn(this._values[i].value)}setValue(i,a){this._values[i]=new Pe(this._values[i].property,a===null?void 0:dn(a))}serialize(){const i={};for(const a of Object.keys(this._values)){const u=this.getValue(a);u!==void 0&&(i[a]=u)}return i}possiblyEvaluate(i,a,u){const m=new ht(this._properties);for(const y of Object.keys(this._values))m._values[y]=this._values[y].possiblyEvaluate(i,a,u);return m}}class _t{constructor(i,a,u){this.property=i,this.value=a,this.parameters=u}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,a,u,m){return this.property.evaluate(this.value,this.parameters,i,a,u,m)}}class ht{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class We{constructor(i){this.specification=i}possiblyEvaluate(i,a){return i.expression.evaluate(a)}interpolate(i,a,u){const m=$o[this.specification.type];return m?m(i,a,u):i}}class Ue{constructor(i,a){this.specification=i,this.overrides=a}possiblyEvaluate(i,a,u,m){return new _t(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(a,null,{},u,m)}:i.expression,a)}interpolate(i,a,u){if(i.value.kind!=="constant"||a.value.kind!=="constant")return i;if(i.value.value===void 0||a.value.value===void 0)return new _t(this,{kind:"constant",value:void 0},i.parameters);const m=$o[this.specification.type];return m?new _t(this,{kind:"constant",value:m(i.value.value,a.value.value,u)},i.parameters):i}evaluate(i,a,u,m,y,w){return i.kind==="constant"?i.value:i.evaluate(a,u,m,y,w)}}class Dt extends Ue{possiblyEvaluate(i,a,u,m){if(i.value===void 0)return new _t(this,{kind:"constant",value:void 0},a);if(i.expression.kind==="constant"){const y=i.expression.evaluate(a,null,{},u,m),w=i.property.specification.type==="resolvedImage"&&typeof y!="string"?y.name:y,R=this._calculate(w,w,w,a);return new _t(this,{kind:"constant",value:R},a)}if(i.expression.kind==="camera"){const y=this._calculate(i.expression.evaluate({zoom:a.zoom-1}),i.expression.evaluate({zoom:a.zoom}),i.expression.evaluate({zoom:a.zoom+1}),a);return new _t(this,{kind:"constant",value:y},a)}return new _t(this,i.expression,a)}evaluate(i,a,u,m,y,w){if(i.kind==="source"){const R=i.evaluate(a,u,m,y,w);return this._calculate(R,R,R,a)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(a.zoom)-1},u,m),i.evaluate({zoom:Math.floor(a.zoom)},u,m),i.evaluate({zoom:Math.floor(a.zoom)+1},u,m),a):i.value}_calculate(i,a,u,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:i,to:a,other:u}:{from:u,to:a,other:i}}interpolate(i){return i}}class Nt{constructor(i){this.specification=i}possiblyEvaluate(i,a,u,m){if(i.value!==void 0){if(i.expression.kind==="constant"){const y=i.expression.evaluate(a,null,{},u,m);return this._calculate(y,y,y,a)}return this._calculate(i.expression.evaluate(new Ae(Math.floor(a.zoom-1),a)),i.expression.evaluate(new Ae(Math.floor(a.zoom),a)),i.expression.evaluate(new Ae(Math.floor(a.zoom+1),a)),a)}}_calculate(i,a,u,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:i,to:a}:{from:u,to:a}}interpolate(i){return i}}class Lt{constructor(i){this.specification=i}possiblyEvaluate(i,a,u,m){return!!i.expression.evaluate(a,null,{},u,m)}interpolate(){return!1}}class Mt{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const a=new Ae(0,{});for(const u in i){const m=i[u];m.specification.overridable&&this.overridableProperties.push(u);const y=this.defaultPropertyValues[u]=new Pe(m,void 0),w=this.defaultTransitionablePropertyValues[u]=new qe(m);this.defaultTransitioningPropertyValues[u]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=y.possiblyEvaluate(a)}}}function Zt(s,i){return 256*(s=it(Math.floor(s),0,255))+it(Math.floor(i),0,255)}Gt(Ue,"DataDrivenProperty"),Gt(We,"DataConstantProperty"),Gt(Dt,"CrossFadedDataDrivenProperty"),Gt(Nt,"CrossFadedProperty"),Gt(Lt,"ColorRampProperty");const an={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class tn{constructor(i,a){this._structArray=i,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Yt{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,a){return i._trim(),a&&(i.isTransferred=!0,a.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const a=Object.create(this.prototype);return a.arrayBuffer=i.arrayBuffer,a.length=i.length,a.capacity=i.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function It(s,i=1){let a=0,u=0;return{members:s.map(m=>{const y=an[m.type].BYTES_PER_ELEMENT,w=a=pn(a,Math.max(i,y)),R=m.components||1;return u=Math.max(u,y),a+=y*R,{name:m.name,type:m.type,components:R,offset:w}}),size:pn(a,Math.max(u,i)),alignment:i}}function pn(s,i){return Math.ceil(s/i)*i}class xn extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a){const u=this.length;return this.resize(u+1),this.emplace(u,i,a)}emplace(i,a,u){const m=2*i;return this.int16[m+0]=a,this.int16[m+1]=u,i}}xn.prototype.bytesPerElement=4,Gt(xn,"StructArrayLayout2i4");class Fn extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,u){const m=this.length;return this.resize(m+1),this.emplace(m,i,a,u)}emplace(i,a,u,m){const y=3*i;return this.int16[y+0]=a,this.int16[y+1]=u,this.int16[y+2]=m,i}}Fn.prototype.bytesPerElement=6,Gt(Fn,"StructArrayLayout3i6");class Vn extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,u,m){const y=this.length;return this.resize(y+1),this.emplace(y,i,a,u,m)}emplace(i,a,u,m,y){const w=4*i;return this.int16[w+0]=a,this.int16[w+1]=u,this.int16[w+2]=m,this.int16[w+3]=y,i}}Vn.prototype.bytesPerElement=8,Gt(Vn,"StructArrayLayout4i8");class Pn extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,u,m,y,w,R){const I=this.length;return this.resize(I+1),this.emplace(I,i,a,u,m,y,w,R)}emplace(i,a,u,m,y,w,R,I){const D=6*i,j=12*i,q=3*i;return this.int16[D+0]=a,this.int16[D+1]=u,this.uint8[j+4]=m,this.uint8[j+5]=y,this.uint8[j+6]=w,this.uint8[j+7]=R,this.float32[q+2]=I,i}}Pn.prototype.bytesPerElement=12,Gt(Pn,"StructArrayLayout2i4ub1f12");class hi extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,u,m){const y=this.length;return this.resize(y+1),this.emplace(y,i,a,u,m)}emplace(i,a,u,m,y){const w=4*i;return this.float32[w+0]=a,this.float32[w+1]=u,this.float32[w+2]=m,this.float32[w+3]=y,i}}hi.prototype.bytesPerElement=16,Gt(hi,"StructArrayLayout4f16");class $i extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,u,m,y,w,R,I,D,j){const q=this.length;return this.resize(q+1),this.emplace(q,i,a,u,m,y,w,R,I,D,j)}emplace(i,a,u,m,y,w,R,I,D,j,q){const K=10*i;return this.uint16[K+0]=a,this.uint16[K+1]=u,this.uint16[K+2]=m,this.uint16[K+3]=y,this.uint16[K+4]=w,this.uint16[K+5]=R,this.uint16[K+6]=I,this.uint16[K+7]=D,this.uint16[K+8]=j,this.uint16[K+9]=q,i}}$i.prototype.bytesPerElement=20,Gt($i,"StructArrayLayout10ui20");class fr extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,u,m,y,w,R,I){const D=this.length;return this.resize(D+1),this.emplace(D,i,a,u,m,y,w,R,I)}emplace(i,a,u,m,y,w,R,I,D){const j=8*i;return this.uint16[j+0]=a,this.uint16[j+1]=u,this.uint16[j+2]=m,this.uint16[j+3]=y,this.uint16[j+4]=w,this.uint16[j+5]=R,this.uint16[j+6]=I,this.uint16[j+7]=D,i}}fr.prototype.bytesPerElement=16,Gt(fr,"StructArrayLayout8ui16");class Wn extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,u,m,y,w){const R=this.length;return this.resize(R+1),this.emplace(R,i,a,u,m,y,w)}emplace(i,a,u,m,y,w,R){const I=6*i;return this.int16[I+0]=a,this.int16[I+1]=u,this.int16[I+2]=m,this.int16[I+3]=y,this.int16[I+4]=w,this.int16[I+5]=R,i}}Wn.prototype.bytesPerElement=12,Gt(Wn,"StructArrayLayout6i12");class ei extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,u,m,y,w,R,I,D,j,q,K){const J=this.length;return this.resize(J+1),this.emplace(J,i,a,u,m,y,w,R,I,D,j,q,K)}emplace(i,a,u,m,y,w,R,I,D,j,q,K,J){const Q=12*i;return this.int16[Q+0]=a,this.int16[Q+1]=u,this.int16[Q+2]=m,this.int16[Q+3]=y,this.uint16[Q+4]=w,this.uint16[Q+5]=R,this.uint16[Q+6]=I,this.uint16[Q+7]=D,this.int16[Q+8]=j,this.int16[Q+9]=q,this.int16[Q+10]=K,this.int16[Q+11]=J,i}}ei.prototype.bytesPerElement=24,Gt(ei,"StructArrayLayout4i4ui4i24");class On extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,u,m,y,w){const R=this.length;return this.resize(R+1),this.emplace(R,i,a,u,m,y,w)}emplace(i,a,u,m,y,w,R){const I=10*i,D=5*i;return this.int16[I+0]=a,this.int16[I+1]=u,this.int16[I+2]=m,this.float32[D+2]=y,this.float32[D+3]=w,this.float32[D+4]=R,i}}On.prototype.bytesPerElement=20,Gt(On,"StructArrayLayout3i3f20");class si extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const a=this.length;return this.resize(a+1),this.emplace(a,i)}emplace(i,a){return this.uint32[1*i+0]=a,i}}si.prototype.bytesPerElement=4,Gt(si,"StructArrayLayout1ul4");class Ti extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,u,m,y,w,R,I,D,j,q,K,J){const Q=this.length;return this.resize(Q+1),this.emplace(Q,i,a,u,m,y,w,R,I,D,j,q,K,J)}emplace(i,a,u,m,y,w,R,I,D,j,q,K,J,Q){const ne=20*i,ue=10*i;return this.int16[ne+0]=a,this.int16[ne+1]=u,this.int16[ne+2]=m,this.int16[ne+3]=y,this.int16[ne+4]=w,this.float32[ue+3]=R,this.float32[ue+4]=I,this.float32[ue+5]=D,this.float32[ue+6]=j,this.int16[ne+14]=q,this.uint32[ue+8]=K,this.uint16[ne+18]=J,this.uint16[ne+19]=Q,i}}Ti.prototype.bytesPerElement=40,Gt(Ti,"StructArrayLayout5i4f1i1ul2ui40");class Hn extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,u,m,y,w,R){const I=this.length;return this.resize(I+1),this.emplace(I,i,a,u,m,y,w,R)}emplace(i,a,u,m,y,w,R,I){const D=8*i;return this.int16[D+0]=a,this.int16[D+1]=u,this.int16[D+2]=m,this.int16[D+4]=y,this.int16[D+5]=w,this.int16[D+6]=R,this.int16[D+7]=I,i}}Hn.prototype.bytesPerElement=16,Gt(Hn,"StructArrayLayout3i2i2i16");class Bi extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,u,m,y){const w=this.length;return this.resize(w+1),this.emplace(w,i,a,u,m,y)}emplace(i,a,u,m,y,w){const R=4*i,I=8*i;return this.float32[R+0]=a,this.float32[R+1]=u,this.float32[R+2]=m,this.int16[I+6]=y,this.int16[I+7]=w,i}}Bi.prototype.bytesPerElement=16,Gt(Bi,"StructArrayLayout2f1f2i16");class so extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,u,m){const y=this.length;return this.resize(y+1),this.emplace(y,i,a,u,m)}emplace(i,a,u,m,y){const w=12*i,R=3*i;return this.uint8[w+0]=a,this.uint8[w+1]=u,this.float32[R+1]=m,this.float32[R+2]=y,i}}so.prototype.bytesPerElement=12,Gt(so,"StructArrayLayout2ub2f12");class er extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,u){const m=this.length;return this.resize(m+1),this.emplace(m,i,a,u)}emplace(i,a,u,m){const y=3*i;return this.float32[y+0]=a,this.float32[y+1]=u,this.float32[y+2]=m,i}}er.prototype.bytesPerElement=12,Gt(er,"StructArrayLayout3f12");class Ni extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,u){const m=this.length;return this.resize(m+1),this.emplace(m,i,a,u)}emplace(i,a,u,m){const y=3*i;return this.uint16[y+0]=a,this.uint16[y+1]=u,this.uint16[y+2]=m,i}}Ni.prototype.bytesPerElement=6,Gt(Ni,"StructArrayLayout3ui6");class Po extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,a,u,m,y,w,R,I,D,j,q,K,J,Q,ne,ue,Te,Oe,Se,$e,Be){const Me=this.length;return this.resize(Me+1),this.emplace(Me,i,a,u,m,y,w,R,I,D,j,q,K,J,Q,ne,ue,Te,Oe,Se,$e,Be)}emplace(i,a,u,m,y,w,R,I,D,j,q,K,J,Q,ne,ue,Te,Oe,Se,$e,Be,Me){const Qe=30*i,Ye=15*i,ct=60*i;return this.int16[Qe+0]=a,this.int16[Qe+1]=u,this.int16[Qe+2]=m,this.float32[Ye+2]=y,this.float32[Ye+3]=w,this.uint16[Qe+8]=R,this.uint16[Qe+9]=I,this.uint32[Ye+5]=D,this.uint32[Ye+6]=j,this.uint32[Ye+7]=q,this.uint16[Qe+16]=K,this.uint16[Qe+17]=J,this.uint16[Qe+18]=Q,this.float32[Ye+10]=ne,this.float32[Ye+11]=ue,this.uint8[ct+48]=Te,this.uint8[ct+49]=Oe,this.uint8[ct+50]=Se,this.uint32[Ye+13]=$e,this.int16[Qe+28]=Be,this.uint8[ct+58]=Me,i}}Po.prototype.bytesPerElement=60,Gt(Po,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class zr extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,a,u,m,y,w,R,I,D,j,q,K,J,Q,ne,ue,Te,Oe,Se,$e,Be,Me,Qe,Ye,ct,Tt,ot,ft,vt,wt){const At=this.length;return this.resize(At+1),this.emplace(At,i,a,u,m,y,w,R,I,D,j,q,K,J,Q,ne,ue,Te,Oe,Se,$e,Be,Me,Qe,Ye,ct,Tt,ot,ft,vt,wt)}emplace(i,a,u,m,y,w,R,I,D,j,q,K,J,Q,ne,ue,Te,Oe,Se,$e,Be,Me,Qe,Ye,ct,Tt,ot,ft,vt,wt,At){const st=38*i,Pt=19*i;return this.int16[st+0]=a,this.int16[st+1]=u,this.int16[st+2]=m,this.float32[Pt+2]=y,this.float32[Pt+3]=w,this.int16[st+8]=R,this.int16[st+9]=I,this.int16[st+10]=D,this.int16[st+11]=j,this.int16[st+12]=q,this.int16[st+13]=K,this.uint16[st+14]=J,this.uint16[st+15]=Q,this.uint16[st+16]=ne,this.uint16[st+17]=ue,this.uint16[st+18]=Te,this.uint16[st+19]=Oe,this.uint16[st+20]=Se,this.uint16[st+21]=$e,this.uint16[st+22]=Be,this.uint16[st+23]=Me,this.uint16[st+24]=Qe,this.uint16[st+25]=Ye,this.uint16[st+26]=ct,this.uint16[st+27]=Tt,this.uint16[st+28]=ot,this.uint32[Pt+15]=ft,this.float32[Pt+16]=vt,this.float32[Pt+17]=wt,this.float32[Pt+18]=At,i}}zr.prototype.bytesPerElement=76,Gt(zr,"StructArrayLayout3i2f6i15ui1ul3f76");class yi extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const a=this.length;return this.resize(a+1),this.emplace(a,i)}emplace(i,a){return this.float32[1*i+0]=a,i}}yi.prototype.bytesPerElement=4,Gt(yi,"StructArrayLayout1f4");class hr extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,u,m,y){const w=this.length;return this.resize(w+1),this.emplace(w,i,a,u,m,y)}emplace(i,a,u,m,y,w){const R=5*i;return this.float32[R+0]=a,this.float32[R+1]=u,this.float32[R+2]=m,this.float32[R+3]=y,this.float32[R+4]=w,i}}hr.prototype.bytesPerElement=20,Gt(hr,"StructArrayLayout5f20");class Fr extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,u,m){const y=this.length;return this.resize(y+1),this.emplace(y,i,a,u,m)}emplace(i,a,u,m,y){const w=6*i;return this.uint32[3*i+0]=a,this.uint16[w+2]=u,this.uint16[w+3]=m,this.uint16[w+4]=y,i}}Fr.prototype.bytesPerElement=12,Gt(Fr,"StructArrayLayout1ul3ui12");class tr extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a){const u=this.length;return this.resize(u+1),this.emplace(u,i,a)}emplace(i,a,u){const m=2*i;return this.uint16[m+0]=a,this.uint16[m+1]=u,i}}tr.prototype.bytesPerElement=4,Gt(tr,"StructArrayLayout2ui4");class Ml extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const a=this.length;return this.resize(a+1),this.emplace(a,i)}emplace(i,a){return this.uint16[1*i+0]=a,i}}Ml.prototype.bytesPerElement=2,Gt(Ml,"StructArrayLayout1ui2");class uu extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a){const u=this.length;return this.resize(u+1),this.emplace(u,i,a)}emplace(i,a,u){const m=2*i;return this.float32[m+0]=a,this.float32[m+1]=u,i}}uu.prototype.bytesPerElement=8,Gt(uu,"StructArrayLayout2f8");class dp extends tn{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}dp.prototype.size=12;class pp extends Wn{get(i){return new dp(this,i)}}Gt(pp,"FillExtrusionExtArray");class fp extends tn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}fp.prototype.size=40;class ld extends Ti{get(i){return new fp(this,i)}}Gt(ld,"CollisionBoxArray");class hp extends tn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(i){this._structArray.uint8[this._pos1+49]=i}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(i){this._structArray.uint8[this._pos1+50]=i}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(i){this._structArray.uint32[this._pos4+13]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(i){this._structArray.uint8[this._pos1+58]=i}}hp.prototype.size=60;class mp extends Po{get(i){return new hp(this,i)}}Gt(mp,"PlacedSymbolArray");class gp extends tn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(i){this._structArray.uint32[this._pos4+15]=i}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}gp.prototype.size=76;class _p extends zr{get(i){return new gp(this,i)}}Gt(_p,"SymbolInstanceArray");class vp extends yi{getoffsetX(i){return this.float32[1*i+0]}}Gt(vp,"GlyphOffsetArray");class yp extends Fn{getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}Gt(yp,"SymbolLineVertexArray");class bp extends tn{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}bp.prototype.size=12;class xp extends Fr{get(i){return new bp(this,i)}}Gt(xp,"FeatureIndexArray");class wp extends tn{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}wp.prototype.size=4;class Ep extends tr{get(i){return new wp(this,i)}}Gt(Ep,"FillExtrusionCentroidArray");class Cp extends tn{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}Cp.prototype.size=12;class Sp extends Wn{get(i){return new Cp(this,i)}}Gt(Sp,"CircleGlobeExtArray");const Zh=It([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),Yh=It([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var ma={exports:{}},Tp={exports:{}};Tp.exports=function(s,i){var a,u,m,y,w,R,I,D;for(u=s.length-(a=3&s.length),m=i,w=3432918353,R=461845907,D=0;D<u;)I=255&s.charCodeAt(D)|(255&s.charCodeAt(++D))<<8|(255&s.charCodeAt(++D))<<16|(255&s.charCodeAt(++D))<<24,++D,m=27492+(65535&(y=5*(65535&(m=(m^=I=(65535&(I=(I=(65535&I)*w+(((I>>>16)*w&65535)<<16)&4294967295)<<15|I>>>17))*R+(((I>>>16)*R&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(y>>>16)&65535)<<16);switch(I=0,a){case 3:I^=(255&s.charCodeAt(D+2))<<16;case 2:I^=(255&s.charCodeAt(D+1))<<8;case 1:m^=I=(65535&(I=(I=(65535&(I^=255&s.charCodeAt(D)))*w+(((I>>>16)*w&65535)<<16)&4294967295)<<15|I>>>17))*R+(((I>>>16)*R&65535)<<16)&4294967295}return m^=s.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var Ap={exports:{}};Ap.exports=function(s,i){for(var a,u=s.length,m=i^u,y=0;u>=4;)a=1540483477*(65535&(a=255&s.charCodeAt(y)|(255&s.charCodeAt(++y))<<8|(255&s.charCodeAt(++y))<<16|(255&s.charCodeAt(++y))<<24))+((1540483477*(a>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),u-=4,++y;switch(u){case 3:m^=(255&s.charCodeAt(y+2))<<16;case 2:m^=(255&s.charCodeAt(y+1))<<8;case 1:m=1540483477*(65535&(m^=255&s.charCodeAt(y)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var kp=Tp.exports,Xh=Ap.exports;ma.exports=kp,ma.exports.murmur3=kp,ma.exports.murmur2=Xh;class du{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,a,u,m){this.ids.push(Rp(i)),this.positions.push(a,u,m)}getPositions(i){const a=Rp(i);let u=0,m=this.ids.length-1;for(;u<m;){const w=u+m>>1;this.ids[w]>=a?m=w:u=w+1}const y=[];for(;this.ids[u]===a;)y.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return y}static serialize(i,a){const u=new Float64Array(i.ids),m=new Uint32Array(i.positions);return cd(u,m,0,u.length-1),a&&a.push(u.buffer,m.buffer),{ids:u,positions:m}}static deserialize(i){const a=new du;return a.ids=i.ids,a.positions=i.positions,a.indexed=!0,a}}function Rp(s){const i=+s;return!isNaN(i)&&Number.MIN_SAFE_INTEGER<=i&&i<=Number.MAX_SAFE_INTEGER?i:ma.exports(String(s))}function cd(s,i,a,u){for(;a<u;){const m=s[a+u>>1];let y=a-1,w=u+1;for(;;){do y++;while(s[y]<m);do w--;while(s[w]>m);if(y>=w)break;pu(s,y,w),pu(i,3*y,3*w),pu(i,3*y+1,3*w+1),pu(i,3*y+2,3*w+2)}w-a<u-w?(cd(s,i,a,w),a=w+1):(cd(s,i,w+1,u),u=w)}}function pu(s,i,a){const u=s[i];s[i]=s[a],s[a]=u}Gt(du,"FeaturePositionMap");class ao{constructor(i){this.gl=i.gl,this.initialized=!1}fetchUniformLocation(i,a){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(i,a),this.initialized=!0),!!this.location}}class fu extends ao{constructor(i){super(i),this.current=0}set(i,a,u){this.fetchUniformLocation(i,a)&&this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class $p extends ao{constructor(i){super(i),this.current=[0,0,0,0]}set(i,a,u){this.fetchUniformLocation(i,a)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3])))}}class Np extends ao{constructor(i){super(i),this.current=ii.transparent}set(i,a,u){this.fetchUniformLocation(i,a)&&(u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a)))}}const Jh=new Float32Array(16),Qh=new Float32Array(9),em=new Float32Array(4);function ud(s){return[Zt(255*s.r,255*s.g),Zt(255*s.b,255*s.a)]}class Il{constructor(i,a,u){this.value=i,this.uniformNames=a.map(m=>`u_${m}`),this.type=u}setUniform(i,a,u,m,y){a.set(i,y,m.constantOr(this.value))}getBinding(i,a){return this.type==="color"?new Np(i):new fu(i)}}class ga{constructor(i,a){this.uniformNames=a.map(u=>`u_${u}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,a){this.pixelRatioFrom=a.pixelRatio||1,this.pixelRatioTo=i.pixelRatio||1,this.patternFrom=a.tl.concat(a.br),this.patternTo=i.tl.concat(i.br)}setUniform(i,a,u,m,y){const w=y==="u_pattern_to"||y==="u_dash_to"?this.patternTo:y==="u_pattern_from"||y==="u_dash_from"?this.patternFrom:y==="u_pixel_ratio_to"?this.pixelRatioTo:y==="u_pixel_ratio_from"?this.pixelRatioFrom:null;w&&a.set(i,y,w)}getBinding(i,a){return a==="u_pattern_from"||a==="u_pattern_to"||a==="u_dash_from"||a==="u_dash_to"?new $p(i):new fu(i)}}class lo{constructor(i,a,u,m){this.expression=i,this.type=u,this.maxValue=0,this.paintVertexAttributes=a.map(y=>({name:`a_${y}`,type:"Float32",components:u==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(i,a,u,m,y,w){const R=this.paintVertexArray.length,I=this.expression.evaluate(new Ae(0),a,{},y,m,w);this.paintVertexArray.resize(i),this._setPaintValue(R,i,I)}updatePaintArray(i,a,u,m,y){const w=this.expression.evaluate({zoom:0},u,m,void 0,y);this._setPaintValue(i,a,w)}_setPaintValue(i,a,u){if(this.type==="color"){const m=ud(u);for(let y=i;y<a;y++)this.paintVertexArray.emplace(y,m[0],m[1])}else{for(let m=i;m<a;m++)this.paintVertexArray.emplace(m,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Tr{constructor(i,a,u,m,y,w){this.expression=i,this.uniformNames=a.map(R=>`u_${R}_t`),this.type=u,this.useIntegerZoom=m,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=a.map(R=>({name:`a_${R}`,type:"Float32",components:u==="color"?4:2,offset:0})),this.paintVertexArray=new w}populatePaintArray(i,a,u,m,y,w){const R=this.expression.evaluate(new Ae(this.zoom),a,{},y,m,w),I=this.expression.evaluate(new Ae(this.zoom+1),a,{},y,m,w),D=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(D,i,R,I)}updatePaintArray(i,a,u,m,y){const w=this.expression.evaluate({zoom:this.zoom},u,m,void 0,y),R=this.expression.evaluate({zoom:this.zoom+1},u,m,void 0,y);this._setPaintValue(i,a,w,R)}_setPaintValue(i,a,u,m){if(this.type==="color"){const y=ud(u),w=ud(m);for(let R=i;R<a;R++)this.paintVertexArray.emplace(R,y[0],y[1],w[0],w[1])}else{for(let y=i;y<a;y++)this.paintVertexArray.emplace(y,u,m);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(m))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,a,u,m,y){const w=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,R=it(this.expression.interpolationFactor(w,this.zoom,this.zoom+1),0,1);a.set(i,y,R)}getBinding(i,a){return new fu(i)}}class Do{constructor(i,a,u,m,y,w,R){this.expression=i,this.type=u,this.useIntegerZoom=m,this.zoom=y,this.layerId=R,this.paintVertexAttributes=(u==="array"?Yh:Zh).members;for(let I=0;I<a.length;++I);this.zoomInPaintVertexArray=new w,this.zoomOutPaintVertexArray=new w}populatePaintArray(i,a,u){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(m,i,a.patterns&&a.patterns[this.layerId],u)}updatePaintArray(i,a,u,m,y,w){this._setPaintValues(i,a,u.patterns&&u.patterns[this.layerId],w)}_setPaintValues(i,a,u,m){if(!m||!u)return;const{min:y,mid:w,max:R}=u,I=m[y],D=m[w],j=m[R];if(I&&D&&j)for(let q=i;q<a;q++)this._setPaintValue(this.zoomInPaintVertexArray,q,D,I),this._setPaintValue(this.zoomOutPaintVertexArray,q,D,j)}_setPaintValue(i,a,u,m){i.emplace(a,u.tl[0],u.tl[1],u.br[0],u.br[1],m.tl[0],m.tl[1],m.br[0],m.br[1],u.pixelRatio,m.pixelRatio)}upload(i){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Bo{constructor(i,a,u=()=>!0){this.binders={},this._buffers=[];const m=[];for(const y in i.paint._values){if(!u(y))continue;const w=i.paint.get(y);if(!(w instanceof _t&&Io(w.property.specification)))continue;const R=nm(y,i.type),I=w.value,D=w.property.specification.type,j=w.property.useIntegerZoom,q=w.property.specification["property-type"],K=q==="cross-faded"||q==="cross-faded-data-driven",J=String(y)==="line-dasharray"&&i.layout.get("line-cap").value.kind!=="constant";if(I.kind!=="constant"||J)if(I.kind==="source"||J||K){const Q=Mp(y,D,"source");this.binders[y]=K?new Do(I,R,D,j,a,Q,i.id):new lo(I,R,D,Q),m.push(`/a_${y}`)}else{const Q=Mp(y,D,"composite");this.binders[y]=new Tr(I,R,D,j,a,Q),m.push(`/z_${y}`)}else this.binders[y]=K?new ga(I.value,R):new Il(I.value,R,D),m.push(`/u_${y}`)}this.cacheKey=m.sort().join("")}getMaxValue(i){const a=this.binders[i];return a instanceof lo||a instanceof Tr?a.maxValue:0}populatePaintArrays(i,a,u,m,y,w){for(const R in this.binders){const I=this.binders[R];(I instanceof lo||I instanceof Tr||I instanceof Do)&&I.populatePaintArray(i,a,u,m,y,w)}}setConstantPatternPositions(i,a){for(const u in this.binders){const m=this.binders[u];m instanceof ga&&m.setConstantPatternPositions(i,a)}}updatePaintArrays(i,a,u,m,y,w){let R=!1;for(const I in i){const D=a.getPositions(I);for(const j of D){const q=u.feature(j.index);for(const K in this.binders){const J=this.binders[K];if((J instanceof lo||J instanceof Tr||J instanceof Do)&&J.expression.isStateDependent===!0){const Q=m.paint.get(K);J.expression=Q.value,J.updatePaintArray(j.start,j.end,q,i[I],y,w),R=!0}}}}return R}defines(){const i=[];for(const a in this.binders){const u=this.binders[a];(u instanceof Il||u instanceof ga)&&i.push(...u.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return i}getBinderAttributes(){const i=[];for(const a in this.binders){const u=this.binders[a];if(u instanceof lo||u instanceof Tr||u instanceof Do)for(let m=0;m<u.paintVertexAttributes.length;m++)i.push(u.paintVertexAttributes[m].name)}return i}getBinderUniforms(){const i=[];for(const a in this.binders){const u=this.binders[a];if(u instanceof Il||u instanceof ga||u instanceof Tr)for(const m of u.uniformNames)i.push(m)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i){const a=[];for(const u in this.binders){const m=this.binders[u];if(m instanceof Il||m instanceof ga||m instanceof Tr)for(const y of m.uniformNames)a.push({name:y,property:u,binding:m.getBinding(i,y)})}return a}setUniforms(i,a,u,m,y){for(const{name:w,property:R,binding:I}of u)this.binders[R].setUniform(i,I,y,m.get(R),w)}updatePaintBuffers(i){this._buffers=[];for(const a in this.binders){const u=this.binders[a];if(i&&u instanceof Do){const m=i.fromScale===2?u.zoomInPaintVertexBuffer:u.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(u instanceof lo||u instanceof Tr)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(i){for(const a in this.binders){const u=this.binders[a];(u instanceof lo||u instanceof Tr||u instanceof Do)&&u.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const a=this.binders[i];(a instanceof lo||a instanceof Tr||a instanceof Do)&&a.destroy()}}}class ys{constructor(i,a,u=()=>!0){this.programConfigurations={};for(const m of i)this.programConfigurations[m.id]=new Bo(m,a,u);this.needsUpload=!1,this._featureMap=new du,this._bufferOffset=0}populatePaintArrays(i,a,u,m,y,w,R){for(const I in this.programConfigurations)this.programConfigurations[I].populatePaintArrays(i,a,m,y,w,R);a.id!==void 0&&this._featureMap.add(a.id,u,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,a,u,m,y){for(const w of u)this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(i,this._featureMap,a,w,m,y)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}const tm={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function nm(s,i){return tm[s]||[s.replace(`${i}-`,"").replace(/-/g,"_")]}const im={"line-pattern":{source:$i,composite:$i},"fill-pattern":{source:$i,composite:$i},"fill-extrusion-pattern":{source:$i,composite:$i},"line-dasharray":{source:fr,composite:fr}},rm={color:{source:uu,composite:hi},number:{source:yi,composite:uu}};function Mp(s,i,a){const u=im[s];return u&&u[a]||rm[i][a]}Gt(Il,"ConstantBinder"),Gt(ga,"CrossFadedConstantBinder"),Gt(lo,"SourceExpressionBinder"),Gt(Do,"CrossFadedCompositeBinder"),Gt(Tr,"CompositeExpressionBinder"),Gt(Bo,"ProgramConfiguration",{omit:["_buffers"]}),Gt(ys,"ProgramConfigurationSet");const hu="-transition";class Ar extends vr{constructor(i,a){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&i.type!=="sky"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),a.layout&&(this._unevaluatedLayout=new je(a.layout)),a.paint)){this._transitionablePaint=new rt(a.paint);for(const u in i.paint)this.setPaintProperty(u,i.paint[u],{validate:!1});for(const u in i.layout)this.setLayoutProperty(u,i.layout[u],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ht(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,a,u={}){a!=null&&this._validate(ad,`layers.${this.id}.layout.${i}`,i,a,u)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,a):this.visibility=a)}getPaintProperty(i){return bt(i,hu)?this._transitionablePaint.getTransition(i.slice(0,-hu.length)):this._transitionablePaint.getValue(i)}setPaintProperty(i,a,u={}){if(a!=null&&this._validate(sd,`layers.${this.id}.paint.${i}`,i,a,u))return!1;if(bt(i,hu))return this._transitionablePaint.setTransition(i.slice(0,-hu.length),a||void 0),!1;{const m=this._transitionablePaint._values[i],y=m.property.specification["property-type"]==="cross-faded-data-driven",w=m.value.isDataDriven(),R=m.value;this._transitionablePaint.setValue(i,a),this._handleSpecialPaintPropertyUpdate(i);const I=this._transitionablePaint._values[i].value;return I.isDataDriven()||w||y||this._handleOverridablePaintPropertyUpdate(i,R,I)}}_handleSpecialPaintPropertyUpdate(i){}getProgramIds(){return null}getProgramConfiguration(i){return null}_handleOverridablePaintPropertyUpdate(i,a,u){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,a){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,a)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),gn(i,(a,u)=>!(a===void 0||u==="layout"&&!Object.keys(a).length||u==="paint"&&!Object.keys(a).length))}_validate(i,a,u,m,y={}){return(!y||y.validate!==!1)&&Tl(this,i.call(Zc,{key:a,layerType:this.type,objectKey:u,value:m,styleSpec:lt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const a=this.paint.get(i);if(a instanceof _t&&Io(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=na(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const om=It([{name:"a_pos",components:2,type:"Int16"}],4),sm=It([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class di{constructor(i=[]){this.segments=i}prepareSegment(i,a,u,m){let y=this.segments[this.segments.length-1];return i>di.MAX_VERTEX_ARRAY_LENGTH&&Ht(`Max vertices per segment is ${di.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!y||y.vertexLength+i>di.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==m)&&(y={vertexOffset:a.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0},m!==void 0&&(y.sortKey=m),this.segments.push(y)),y}get(){return this.segments}destroy(){for(const i of this.segments)for(const a in i.vaos)i.vaos[a].destroy()}static simpleSegment(i,a,u,m){return new di([{vertexOffset:i,primitiveOffset:a,vertexLength:u,primitiveLength:m,vaos:{},sortKey:0}])}}di.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Gt(di,"SegmentVector");var cn=8192;class zo{constructor(i,a){i&&(a?this.setSouthWest(i).setNorthEast(a):i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1]))}setNorthEast(i){return this._ne=i instanceof Ln?new Ln(i.lng,i.lat):Ln.convert(i),this}setSouthWest(i){return this._sw=i instanceof Ln?new Ln(i.lng,i.lat):Ln.convert(i),this}extend(i){const a=this._sw,u=this._ne;let m,y;if(i instanceof Ln)m=i,y=i;else{if(!(i instanceof zo))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(zo.convert(i)):this.extend(Ln.convert(i)):typeof i=="object"&&i!==null&&i.hasOwnProperty("lat")&&i.hasOwnProperty("lon")?this.extend(Ln.convert(i)):this;if(m=i._sw,y=i._ne,!m||!y)return this}return a||u?(a.lng=Math.min(m.lng,a.lng),a.lat=Math.min(m.lat,a.lat),u.lng=Math.max(y.lng,u.lng),u.lat=Math.max(y.lat,u.lat)):(this._sw=new Ln(m.lng,m.lat),this._ne=new Ln(y.lng,y.lat)),this}getCenter(){return new Ln((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ln(this.getWest(),this.getNorth())}getSouthEast(){return new Ln(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:a,lat:u}=Ln.convert(i);let m=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&m}static convert(i){return!i||i instanceof zo?i:new zo(i)}}const mu=63710088e-1;class Ln{constructor(i,a){if(isNaN(i)||isNaN(a))throw new Error(`Invalid LngLat object: (${i}, ${a})`);if(this.lng=+i,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ln(ke(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const a=Math.PI/180,u=this.lat*a,m=i.lat*a,y=Math.sin(u)*Math.sin(m)+Math.cos(u)*Math.cos(m)*Math.cos((i.lng-this.lng)*a);return mu*Math.acos(Math.min(y,1))}toBounds(i=0){const a=360*i/40075017,u=a/Math.cos(Math.PI/180*this.lat);return new zo(new Ln(this.lng-u,this.lat-a),new Ln(this.lng+u,this.lat+a))}static convert(i){if(i instanceof Ln)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new Ln(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new Ln(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Ip=2*Math.PI*mu;function dd(s){return Ip*Math.cos(s*Math.PI/180)}function Vr(s){return(180+s)/360}function Ur(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function mr(s,i){return s/dd(i)}function nr(s){return 360*s-180}function Ai(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}function Lp(s,i){return s*dd(Ai(i))}const jr=85.051129;function Op(s){return 1/Math.cos(s*Math.PI/180)}class va{constructor(i,a,u=0){this.x=+i,this.y=+a,this.z=+u}static fromLngLat(i,a=0){const u=Ln.convert(i);return new va(Vr(u.lng),Ur(u.lat),mr(a,u.lat))}toLngLat(){return new Ln(nr(this.x),Ai(this.y))}toAltitude(){return Lp(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Ip*Op(Ai(this.y))}}function pd(s,i,a,u,m,y,w,R,I){const D=(i+u)/2,j=(a+m)/2,q=new Z(D,j);R(q),function(K,J,Q,ne,ue,Te){const Oe=Q-ue,Se=ne-Te;return Math.abs((ne-J)*Oe-(Q-K)*Se)/Math.hypot(Oe,Se)}(q.x,q.y,y.x,y.y,w.x,w.y)>=I?(pd(s,i,a,D,j,y,q,R,I),pd(s,D,j,u,m,q,w,R,I)):s.push(w)}function Pp(s,i,a){let u=s[0],m=u.x,y=u.y;i(u);const w=[u];for(let R=1;R<s.length;R++){const I=s[R],{x:D,y:j}=I;i(I),pd(w,m,y,D,j,u,I,i,a),m=D,y=j,u=I}return w}function fd(s,i,a,u){if(u(i,a)){const m=i.add(a)._mult(.5);fd(s,i,m,u),fd(s,m,a,u)}else s.push(a)}function am(s,i){let a=s[0];const u=[a];for(let m=1;m<s.length;m++){const y=s[m];fd(u,a,y,i),a=y}return u}const hd=Math.pow(2,14)-1,Dp=-hd-1;function lm(s,i){const a=Math.round(s.x*i),u=Math.round(s.y*i);return s.x=it(a,Dp,hd),s.y=it(u,Dp,hd),(a<s.x||a>s.x+1||u<s.y||u>s.y+1)&&Ht("Geometry exceeds allowed extent, reduce your vector tile buffer size"),s}function co(s,i,a){const u=s.loadGeometry(),m=s.extent,y=cn/m;if(i&&a&&a.projection.isReprojectedInTileSpace){const w=1<<i.z,{scale:R,x:I,y:D,projection:j}=a,q=K=>{const J=nr((i.x+K.x/m)/w),Q=Ai((i.y+K.y/m)/w),ne=j.project(J,Q);K.x=(ne.x*R-I)*m,K.y=(ne.y*R-D)*m};for(let K=0;K<u.length;K++)if(s.type!==1)u[K]=Pp(u[K],q,1);else{const J=[];for(const Q of u[K])Q.x<0||Q.x>=m||Q.y<0||Q.y>=m||(q(Q),J.push(Q));u[K]=J}}for(const w of u)for(const R of w)lm(R,y);return u}function bs(s,i){return{type:s.type,id:s.id,properties:s.properties,geometry:i?co(s):[]}}function gu(s,i,a,u,m){s.emplaceBack(2*i+(u+1)/2,2*a+(m+1)/2)}function _u(s,i,a){s.emplaceBack(i.x,i.y,i.z,a[0]*16384,a[1]*16384,a[2]*16384)}class md{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(a=>a.id),this.index=i.index,this.hasPattern=!1,this.projection=i.projection,this.layoutVertexArray=new xn,this.indexArray=new Ni,this.segments=new di,this.programConfigurations=new ys(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(i,a,u,m){const y=this.layers[0],w=[];let R=null;y.type==="circle"&&(R=y.layout.get("circle-sort-key"));for(const{feature:D,id:j,index:q,sourceLayerIndex:K}of i){const J=this.layers[0]._featureFilter.needGeometry,Q=bs(D,J);if(!this.layers[0]._featureFilter.filter(new Ae(this.zoom),Q,u))continue;const ne=R?R.evaluate(Q,{},u):void 0,ue={id:j,properties:D.properties,type:D.type,sourceLayerIndex:K,index:q,geometry:J?Q.geometry:co(D,u,m),patterns:{},sortKey:ne};w.push(ue)}R&&w.sort((D,j)=>D.sortKey-j.sortKey);let I=null;m.projection.name==="globe"&&(this.globeExtVertexArray=new Sp,I=m.projection);for(const D of w){const{geometry:j,index:q,sourceLayerIndex:K}=D,J=i[q].feature;this.addFeature(D,j,q,a.availableImages,u,I),a.featureIndex.insert(J,j,q,K,this.index)}}update(i,a,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,a,this.stateDependentLayers,u,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,om.members),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,sm.members))),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(i,a,u,m,y,w){for(const R of a)for(const I of R){const D=I.x,j=I.y;if(D<0||D>=cn||j<0||j>=cn)continue;if(w){const J=w.projectTilePoint(D,j,y),Q=w.upVector(y,D,j),ne=this.globeExtVertexArray;_u(ne,J,Q),_u(ne,J,Q),_u(ne,J,Q),_u(ne,J,Q)}const q=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),K=q.vertexLength;gu(this.layoutVertexArray,D,j,-1,-1),gu(this.layoutVertexArray,D,j,1,-1),gu(this.layoutVertexArray,D,j,1,1),gu(this.layoutVertexArray,D,j,-1,1),this.indexArray.emplaceBack(K,K+1,K+2),this.indexArray.emplaceBack(K,K+2,K+3),q.vertexLength+=4,q.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,u,{},m,y)}}function Bp(s,i){for(let a=0;a<s.length;a++)if(xs(i,s[a]))return!0;for(let a=0;a<i.length;a++)if(xs(s,i[a]))return!0;return!!gd(s,i)}function cm(s,i,a){return!!xs(s,i)||!!_d(i,s,a)}function zp(s,i){if(s.length===1)return Vp(i,s[0]);for(let a=0;a<i.length;a++){const u=i[a];for(let m=0;m<u.length;m++)if(xs(s,u[m]))return!0}for(let a=0;a<s.length;a++)if(Vp(i,s[a]))return!0;for(let a=0;a<i.length;a++)if(gd(s,i[a]))return!0;return!1}function um(s,i,a){if(s.length>1){if(gd(s,i))return!0;for(let u=0;u<i.length;u++)if(_d(i[u],s,a))return!0}for(let u=0;u<s.length;u++)if(_d(s[u],i,a))return!0;return!1}function gd(s,i){if(s.length===0||i.length===0)return!1;for(let a=0;a<s.length-1;a++){const u=s[a],m=s[a+1];for(let y=0;y<i.length-1;y++)if(dm(u,m,i[y],i[y+1]))return!0}return!1}function dm(s,i,a,u){return Ee(s,a,u)!==Ee(i,a,u)&&Ee(s,i,a)!==Ee(s,i,u)}function _d(s,i,a){const u=a*a;if(i.length===1)return s.distSqr(i[0])<u;for(let m=1;m<i.length;m++)if(Fp(s,i[m-1],i[m])<u)return!0;return!1}function Fp(s,i,a){const u=i.distSqr(a);if(u===0)return s.distSqr(i);const m=((s.x-i.x)*(a.x-i.x)+(s.y-i.y)*(a.y-i.y))/u;return s.distSqr(m<0?i:m>1?a:a.sub(i)._mult(m)._add(i))}function Vp(s,i){let a,u,m,y=!1;for(let w=0;w<s.length;w++){a=s[w];for(let R=0,I=a.length-1;R<a.length;I=R++)u=a[R],m=a[I],u.y>i.y!=m.y>i.y&&i.x<(m.x-u.x)*(i.y-u.y)/(m.y-u.y)+u.x&&(y=!y)}return y}function xs(s,i){let a=!1;for(let u=0,m=s.length-1;u<s.length;m=u++){const y=s[u],w=s[m];y.y>i.y!=w.y>i.y&&i.x<(w.x-y.x)*(i.y-y.y)/(w.y-y.y)+y.x&&(a=!a)}return a}function Up(s,i,a,u,m){for(const w of s)if(i<=w.x&&a<=w.y&&u>=w.x&&m>=w.y)return!0;const y=[new Z(i,a),new Z(i,m),new Z(u,m),new Z(u,a)];if(s.length>2){for(const w of y)if(xs(s,w))return!0}for(let w=0;w<s.length-1;w++)if(pm(s[w],s[w+1],y))return!0;return!1}function pm(s,i,a){const u=a[0],m=a[2];if(s.x<u.x&&i.x<u.x||s.x>m.x&&i.x>m.x||s.y<u.y&&i.y<u.y||s.y>m.y&&i.y>m.y)return!1;const y=Ee(s,i,a[0]);return y!==Ee(s,i,a[1])||y!==Ee(s,i,a[2])||y!==Ee(s,i,a[3])}function ya(s,i,a){const u=i.paint.get(s).value;return u.kind==="constant"?u.value:a.programConfigurations.get(i.id).getMaxValue(s)}function vu(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function jp(s,i,a,u,m){if(!i[0]&&!i[1])return s;const y=Z.convert(i)._mult(m);a==="viewport"&&y._rotate(-u);const w=[];for(let R=0;R<s.length;R++)w.push(s[R].sub(y));return w}function Gp(s,i,a,u){const m=Z.convert(s)._mult(u);return i==="viewport"&&m._rotate(-a),m}Gt(md,"CircleBucket",{omit:["layers"]});const fm=new Mt({"circle-sort-key":new Ue(lt.layout_circle["circle-sort-key"])});var hm={paint:new Mt({"circle-radius":new Ue(lt.paint_circle["circle-radius"]),"circle-color":new Ue(lt.paint_circle["circle-color"]),"circle-blur":new Ue(lt.paint_circle["circle-blur"]),"circle-opacity":new Ue(lt.paint_circle["circle-opacity"]),"circle-translate":new We(lt.paint_circle["circle-translate"]),"circle-translate-anchor":new We(lt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new We(lt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new We(lt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ue(lt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ue(lt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ue(lt.paint_circle["circle-stroke-opacity"])}),layout:fm},yu=1e-6,qi=typeof Float32Array<"u"?Float32Array:Array;function Hp(){var s=new qi(9);return qi!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[5]=0,s[6]=0,s[7]=0),s[0]=1,s[4]=1,s[8]=1,s}function qp(s,i,a){var u=i[0],m=i[1],y=i[2],w=i[3],R=i[4],I=i[5],D=i[6],j=i[7],q=i[8],K=a[0],J=a[1],Q=a[2],ne=a[3],ue=a[4],Te=a[5],Oe=a[6],Se=a[7],$e=a[8];return s[0]=K*u+J*w+Q*D,s[1]=K*m+J*R+Q*j,s[2]=K*y+J*I+Q*q,s[3]=ne*u+ue*w+Te*D,s[4]=ne*m+ue*R+Te*j,s[5]=ne*y+ue*I+Te*q,s[6]=Oe*u+Se*w+$e*D,s[7]=Oe*m+Se*R+$e*j,s[8]=Oe*y+Se*I+$e*q,s}function Gr(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function vd(s,i){var a=i[0],u=i[1],m=i[2],y=i[3],w=i[4],R=i[5],I=i[6],D=i[7],j=i[8],q=i[9],K=i[10],J=i[11],Q=i[12],ne=i[13],ue=i[14],Te=i[15],Oe=a*R-u*w,Se=a*I-m*w,$e=a*D-y*w,Be=u*I-m*R,Me=u*D-y*R,Qe=m*D-y*I,Ye=j*ne-q*Q,ct=j*ue-K*Q,Tt=j*Te-J*Q,ot=q*ue-K*ne,ft=q*Te-J*ne,vt=K*Te-J*ue,wt=Oe*vt-Se*ft+$e*ot+Be*Tt-Me*ct+Qe*Ye;return wt?(s[0]=(R*vt-I*ft+D*ot)*(wt=1/wt),s[1]=(m*ft-u*vt-y*ot)*wt,s[2]=(ne*Qe-ue*Me+Te*Be)*wt,s[3]=(K*Me-q*Qe-J*Be)*wt,s[4]=(I*Tt-w*vt-D*ct)*wt,s[5]=(a*vt-m*Tt+y*ct)*wt,s[6]=(ue*$e-Q*Qe-Te*Se)*wt,s[7]=(j*Qe-K*$e+J*Se)*wt,s[8]=(w*ft-R*Tt+D*Ye)*wt,s[9]=(u*Tt-a*ft-y*Ye)*wt,s[10]=(Q*Me-ne*$e+Te*Oe)*wt,s[11]=(q*$e-j*Me-J*Oe)*wt,s[12]=(R*ct-w*ot-I*Ye)*wt,s[13]=(a*ot-u*ct+m*Ye)*wt,s[14]=(ne*Se-Q*Be-ue*Oe)*wt,s[15]=(j*Be-q*Se+K*Oe)*wt,s):null}function ba(s,i,a){var u=i[0],m=i[1],y=i[2],w=i[3],R=i[4],I=i[5],D=i[6],j=i[7],q=i[8],K=i[9],J=i[10],Q=i[11],ne=i[12],ue=i[13],Te=i[14],Oe=i[15],Se=a[0],$e=a[1],Be=a[2],Me=a[3];return s[0]=Se*u+$e*R+Be*q+Me*ne,s[1]=Se*m+$e*I+Be*K+Me*ue,s[2]=Se*y+$e*D+Be*J+Me*Te,s[3]=Se*w+$e*j+Be*Q+Me*Oe,s[4]=(Se=a[4])*u+($e=a[5])*R+(Be=a[6])*q+(Me=a[7])*ne,s[5]=Se*m+$e*I+Be*K+Me*ue,s[6]=Se*y+$e*D+Be*J+Me*Te,s[7]=Se*w+$e*j+Be*Q+Me*Oe,s[8]=(Se=a[8])*u+($e=a[9])*R+(Be=a[10])*q+(Me=a[11])*ne,s[9]=Se*m+$e*I+Be*K+Me*ue,s[10]=Se*y+$e*D+Be*J+Me*Te,s[11]=Se*w+$e*j+Be*Q+Me*Oe,s[12]=(Se=a[12])*u+($e=a[13])*R+(Be=a[14])*q+(Me=a[15])*ne,s[13]=Se*m+$e*I+Be*K+Me*ue,s[14]=Se*y+$e*D+Be*J+Me*Te,s[15]=Se*w+$e*j+Be*Q+Me*Oe,s}function Ll(s,i,a){var u,m,y,w,R,I,D,j,q,K,J,Q,ne=a[0],ue=a[1],Te=a[2];return i===s?(s[12]=i[0]*ne+i[4]*ue+i[8]*Te+i[12],s[13]=i[1]*ne+i[5]*ue+i[9]*Te+i[13],s[14]=i[2]*ne+i[6]*ue+i[10]*Te+i[14],s[15]=i[3]*ne+i[7]*ue+i[11]*Te+i[15]):(m=i[1],y=i[2],w=i[3],R=i[4],I=i[5],D=i[6],j=i[7],q=i[8],K=i[9],J=i[10],Q=i[11],s[0]=u=i[0],s[1]=m,s[2]=y,s[3]=w,s[4]=R,s[5]=I,s[6]=D,s[7]=j,s[8]=q,s[9]=K,s[10]=J,s[11]=Q,s[12]=u*ne+R*ue+q*Te+i[12],s[13]=m*ne+I*ue+K*Te+i[13],s[14]=y*ne+D*ue+J*Te+i[14],s[15]=w*ne+j*ue+Q*Te+i[15]),s}function ws(s,i,a){var u=a[0],m=a[1],y=a[2];return s[0]=i[0]*u,s[1]=i[1]*u,s[2]=i[2]*u,s[3]=i[3]*u,s[4]=i[4]*m,s[5]=i[5]*m,s[6]=i[6]*m,s[7]=i[7]*m,s[8]=i[8]*y,s[9]=i[9]*y,s[10]=i[10]*y,s[11]=i[11]*y,s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15],s}function yd(s,i,a){var u=Math.sin(a),m=Math.cos(a),y=i[4],w=i[5],R=i[6],I=i[7],D=i[8],j=i[9],q=i[10],K=i[11];return i!==s&&(s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[4]=y*m+D*u,s[5]=w*m+j*u,s[6]=R*m+q*u,s[7]=I*m+K*u,s[8]=D*m-y*u,s[9]=j*m-w*u,s[10]=q*m-R*u,s[11]=K*m-I*u,s}function bu(s,i,a){var u=Math.sin(a),m=Math.cos(a),y=i[0],w=i[1],R=i[2],I=i[3],D=i[8],j=i[9],q=i[10],K=i[11];return i!==s&&(s[4]=i[4],s[5]=i[5],s[6]=i[6],s[7]=i[7],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[0]=y*m-D*u,s[1]=w*m-j*u,s[2]=R*m-q*u,s[3]=I*m-K*u,s[8]=y*u+D*m,s[9]=w*u+j*m,s[10]=R*u+q*m,s[11]=I*u+K*m,s}function Kp(s,i){return s[0]=i[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=i[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=i[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function Wp(s,i,a){var u,m,y,w=a[0],R=a[1],I=a[2],D=Math.hypot(w,R,I);return D<yu?null:(w*=D=1/D,R*=D,I*=D,u=Math.sin(i),m=Math.cos(i),s[0]=w*w*(y=1-m)+m,s[1]=R*w*y+I*u,s[2]=I*w*y-R*u,s[3]=0,s[4]=w*R*y-I*u,s[5]=R*R*y+m,s[6]=I*R*y+w*u,s[7]=0,s[8]=w*I*y+R*u,s[9]=R*I*y-w*u,s[10]=I*I*y+m,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s)}Math.hypot||(Math.hypot=function(){for(var s=0,i=arguments.length;i--;)s+=arguments[i]*arguments[i];return Math.sqrt(s)});var mm=ba;function bd(){var s=new qi(3);return qi!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s}function Zp(s){var i=new qi(3);return i[0]=s[0],i[1]=s[1],i[2]=s[2],i}function Ol(s){return Math.hypot(s[0],s[1],s[2])}function xa(s,i,a){var u=new qi(3);return u[0]=s,u[1]=i,u[2]=a,u}function uo(s,i,a){return s[0]=i[0]+a[0],s[1]=i[1]+a[1],s[2]=i[2]+a[2],s}function xd(s,i,a){return s[0]=i[0]-a[0],s[1]=i[1]-a[1],s[2]=i[2]-a[2],s}function Yp(s,i,a){return s[0]=i[0]*a[0],s[1]=i[1]*a[1],s[2]=i[2]*a[2],s}function Pl(s,i,a){return s[0]=Math.min(i[0],a[0]),s[1]=Math.min(i[1],a[1]),s[2]=Math.min(i[2],a[2]),s}function Dl(s,i,a){return s[0]=Math.max(i[0],a[0]),s[1]=Math.max(i[1],a[1]),s[2]=Math.max(i[2],a[2]),s}function ir(s,i,a){return s[0]=i[0]*a,s[1]=i[1]*a,s[2]=i[2]*a,s}function Bl(s,i,a,u){return s[0]=i[0]+a[0]*u,s[1]=i[1]+a[1]*u,s[2]=i[2]+a[2]*u,s}function zi(s,i){var a=i[0],u=i[1],m=i[2],y=a*a+u*u+m*m;return y>0&&(y=1/Math.sqrt(y)),s[0]=i[0]*y,s[1]=i[1]*y,s[2]=i[2]*y,s}function gr(s,i){return s[0]*i[0]+s[1]*i[1]+s[2]*i[2]}function wd(s,i,a){var u=i[0],m=i[1],y=i[2],w=a[0],R=a[1],I=a[2];return s[0]=m*I-y*R,s[1]=y*w-u*I,s[2]=u*R-m*w,s}function pi(s,i,a){var u=i[0],m=i[1],y=i[2],w=a[3]*u+a[7]*m+a[11]*y+a[15];return s[0]=(a[0]*u+a[4]*m+a[8]*y+a[12])/(w=w||1),s[1]=(a[1]*u+a[5]*m+a[9]*y+a[13])/w,s[2]=(a[2]*u+a[6]*m+a[10]*y+a[14])/w,s}function Xp(s,i,a){var u=a[0],m=a[1],y=a[2],w=i[0],R=i[1],I=i[2],D=m*I-y*R,j=y*w-u*I,q=u*R-m*w,K=m*q-y*j,J=y*D-u*q,Q=u*j-m*D,ne=2*a[3];return j*=ne,q*=ne,J*=2,Q*=2,s[0]=w+(D*=ne)+(K*=2),s[1]=R+j+J,s[2]=I+q+Q,s}var zl,kr=xd,gm=Yp,_m=Ol;function Jp(s,i,a){return s[0]=i[0]*a,s[1]=i[1]*a,s[2]=i[2]*a,s[3]=i[3]*a,s}function Qp(s,i){var a=i[0],u=i[1],m=i[2],y=i[3],w=a*a+u*u+m*m+y*y;return w>0&&(w=1/Math.sqrt(w)),s[0]=a*w,s[1]=u*w,s[2]=m*w,s[3]=y*w,s}function Es(s,i,a){var u=i[0],m=i[1],y=i[2],w=i[3];return s[0]=a[0]*u+a[4]*m+a[8]*y+a[12]*w,s[1]=a[1]*u+a[5]*m+a[9]*y+a[13]*w,s[2]=a[2]*u+a[6]*m+a[10]*y+a[14]*w,s[3]=a[3]*u+a[7]*m+a[11]*y+a[15]*w,s}function ef(){var s=new qi(4);return qi!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s[3]=1,s}function tf(s){return s[0]=0,s[1]=0,s[2]=0,s[3]=1,s}function nf(s,i,a){a*=.5;var u=i[0],m=i[1],y=i[2],w=i[3],R=Math.sin(a),I=Math.cos(a);return s[0]=u*I+w*R,s[1]=m*I+y*R,s[2]=y*I-m*R,s[3]=w*I-u*R,s}function rf(s,i,a){a*=.5;var u=i[0],m=i[1],y=i[2],w=i[3],R=Math.sin(a),I=Math.cos(a);return s[0]=u*I-y*R,s[1]=m*I+w*R,s[2]=y*I+u*R,s[3]=w*I-m*R,s}bd(),zl=new qi(4),qi!=Float32Array&&(zl[0]=0,zl[1]=0,zl[2]=0,zl[3]=0);var vm=Qp;bd(),xa(1,0,0),xa(0,1,0),ef(),ef(),Hp();class Ed{constructor(i,a){this.pos=i,this.dir=a}intersectsPlane(i,a,u){const m=gr(a,this.dir);if(Math.abs(m)<1e-6)return!1;const y=((i[0]-this.pos[0])*a[0]+(i[1]-this.pos[1])*a[1]+(i[2]-this.pos[2])*a[2])/m;return u[0]=this.pos[0]+this.dir[0]*y,u[1]=this.pos[1]+this.dir[1]*y,u[2]=this.pos[2]+this.dir[2]*y,!0}closestPointOnSphere(i,a,u){if(function(J,Q){var ne=J[0],ue=J[1],Te=J[2],Oe=Q[0],Se=Q[1],$e=Q[2];return Math.abs(ne-Oe)<=yu*Math.max(1,Math.abs(ne),Math.abs(Oe))&&Math.abs(ue-Se)<=yu*Math.max(1,Math.abs(ue),Math.abs(Se))&&Math.abs(Te-$e)<=yu*Math.max(1,Math.abs(Te),Math.abs($e))}(this.pos,i)||a===0)return u[0]=u[1]=u[2]=0,!1;const[m,y,w]=this.dir,R=this.pos[0]-i[0],I=this.pos[1]-i[1],D=this.pos[2]-i[2],j=m*m+y*y+w*w,q=2*(R*m+I*y+D*w),K=q*q-4*j*(R*R+I*I+D*D-a*a);if(K<0){const J=Math.max(-q/2,0),Q=R+m*J,ne=I+y*J,ue=D+w*J,Te=Math.hypot(Q,ne,ue);return u[0]=Q*a/Te,u[1]=ne*a/Te,u[2]=ue*a/Te,!1}{const J=(-q-Math.sqrt(K))/(2*j);if(J<0){const Q=Math.hypot(R,I,D);return u[0]=R*a/Q,u[1]=I*a/Q,u[2]=D*a/Q,!1}return u[0]=R+m*J,u[1]=I+y*J,u[2]=D+w*J,!0}}}class Cd{constructor(i,a,u,m,y){this.TL=i,this.TR=a,this.BR=u,this.BL=m,this.horizon=y}static fromInvProjectionMatrix(i,a,u){const m=[-1,1,1],y=[1,1,1],w=[1,-1,1],R=[-1,-1,1],I=pi(m,m,i),D=pi(y,y,i),j=pi(w,w,i),q=pi(R,R,i);return new Cd(I,D,j,q,a/u)}}class Sd{constructor(i,a){this.points=i,this.planes=a}static fromInvProjectionMatrix(i,a,u,m){const y=Math.pow(2,u),w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(I=>{const D=Es([],I,i),j=1/D[3]/a*y;return function(q,K,J){return q[0]=K[0]*J[0],q[1]=K[1]*J[1],q[2]=K[2]*J[2],q[3]=K[3]*J[3],q}(D,D,[j,j,m?1/D[3]:j,j])}),R=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(I=>{const D=zi([],wd([],kr([],w[I[0]],w[I[1]]),kr([],w[I[2]],w[I[1]]))),j=-gr(D,w[I[1]]);return D.concat(j)});return new Sd(w,R)}}class Fi{static fromPoints(i){const a=[1/0,1/0,1/0],u=[-1/0,-1/0,-1/0];for(const m of i)Pl(a,a,m),Dl(u,u,m);return new Fi(a,u)}static applyTransform(i,a){const u=i.getCorners();for(let m=0;m<u.length;++m)pi(u[m],u[m],a);return Fi.fromPoints(u)}constructor(i,a){this.min=i,this.max=a,this.center=ir([],uo([],this.min,this.max),.5)}quadrant(i){const a=[i%2==0,i<2],u=Zp(this.min),m=Zp(this.max);for(let y=0;y<a.length;y++)u[y]=a[y]?this.min[y]:this.center[y],m[y]=a[y]?this.center[y]:this.max[y];return m[2]=this.max[2],new Fi(u,m)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}distanceZ(i){return Math.max(Math.min(this.max[2],i[2]),this.min[2])-i[2]}getCorners(){const i=this.min,a=this.max;return[[i[0],i[1],i[2]],[a[0],i[1],i[2]],[a[0],a[1],i[2]],[i[0],a[1],i[2]],[i[0],i[1],a[2]],[a[0],i[1],a[2]],[a[0],a[1],a[2]],[i[0],a[1],a[2]]]}intersects(i){const a=this.getCorners();let u=!0;for(let m=0;m<i.planes.length;m++){const y=i.planes[m];let w=0;for(let R=0;R<a.length;R++)w+=gr(y,a[R])+y[3]>=0;if(w===0)return 0;w!==a.length&&(u=!1)}if(u)return 2;for(let m=0;m<3;m++){let y=Number.MAX_VALUE,w=-Number.MAX_VALUE;for(let R=0;R<i.points.length;R++){const I=i.points[R][m]-this.min[m];y=Math.min(y,I),w=Math.max(w,I)}if(w<0||y>this.max[m]-this.min[m])return 0}return 1}}function of(s,i,a,u,m,y,w,R,I){if(y&&s.queryGeometry.isAboveHorizon)return!1;y&&(I*=s.pixelToTileUnitsFactor);const D=s.tileID.canonical,j=a.projection.upVectorScale(D,a.center.lat,a.worldSize).metersToTile;for(const q of i)for(const K of q){const J=K.add(R),Q=m&&a.elevation?a.elevation.exaggeration()*m.getElevationAt(J.x,J.y,!0):0,ne=a.projection.projectTilePoint(J.x,J.y,D);if(Q>0){const Se=a.projection.upVector(D,J.x,J.y);ne.x+=Se[0]*j*Q,ne.y+=Se[1]*j*Q,ne.z+=Se[2]*j*Q}const ue=y?J:ym(ne.x,ne.y,ne.z,u),Te=y?s.tilespaceRays.map(Se=>xm(Se,Q)):s.queryGeometry.screenGeometry,Oe=Es([],[ne.x,ne.y,ne.z,1],u);if(!w&&y?I*=Oe[3]/a.cameraToCenterDistance:w&&!y&&(I*=a.cameraToCenterDistance/Oe[3]),y){const Se=Ai((K.y/cn+D.y)/(1<<D.z));I/=a.projection.pixelsPerMeter(Se,1)/mr(1,Se)}if(cm(Te,ue,I))return!0}return!1}function ym(s,i,a,u){const m=Es([],[s,i,a,1],u);return new Z(m[0]/m[3],m[1]/m[3])}const sf=xa(0,0,0),bm=xa(0,0,1);function xm(s,i){const a=bd();return sf[2]=i,s.intersectsPlane(sf,bm,a),new Z(a[0],a[1])}class af extends md{}function lf(s,{width:i,height:a},u,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==i*a*u)throw new RangeError("mismatched image size")}else m=new Uint8Array(i*a*u);return s.width=i,s.height=a,s.data=m,s}function cf(s,i,a){const{width:u,height:m}=i;u===s.width&&m===s.height||(Td(s,i,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,u),height:Math.min(s.height,m)},a),s.width=u,s.height=m,s.data=i.data)}function Td(s,i,a,u,m,y){if(m.width===0||m.height===0)return i;if(m.width>s.width||m.height>s.height||a.x>s.width-m.width||a.y>s.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>i.width||m.height>i.height||u.x>i.width-m.width||u.y>i.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const w=s.data,R=i.data;for(let I=0;I<m.height;I++){const D=((a.y+I)*s.width+a.x)*y,j=((u.y+I)*i.width+u.x)*y;for(let q=0;q<m.width*y;q++)R[j+q]=w[D+q]}return i}Gt(af,"HeatmapBucket",{omit:["layers"]});class po{constructor(i,a){lf(this,i,1,a)}resize(i){cf(this,new po(i),1)}clone(){return new po({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,a,u,m,y){Td(i,a,u,m,y,1)}}class Ki{constructor(i,a){lf(this,i,4,a)}resize(i){cf(this,new Ki(i),4)}replace(i,a){a?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new Ki({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,a,u,m,y){Td(i,a,u,m,y,4)}}Gt(po,"AlphaImage"),Gt(Ki,"RGBAImage");var wm={paint:new Mt({"heatmap-radius":new Ue(lt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ue(lt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new We(lt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Lt(lt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new We(lt.paint_heatmap["heatmap-opacity"])})};function Ad(s){const i={},a=s.resolution||256,u=s.clips?s.clips.length:1,m=s.image||new Ki({width:a,height:u}),y=(w,R,I)=>{i[s.evaluationKey]=I;const D=s.expression.evaluate(i);m.data[w+R+0]=Math.floor(255*D.r/D.a),m.data[w+R+1]=Math.floor(255*D.g/D.a),m.data[w+R+2]=Math.floor(255*D.b/D.a),m.data[w+R+3]=Math.floor(255*D.a)};if(s.clips)for(let w=0,R=0;w<u;++w,R+=4*a)for(let I=0,D=0;I<a;I++,D+=4){const j=I/(a-1),{start:q,end:K}=s.clips[w];y(R,D,q*(1-j)+K*j)}else for(let w=0,R=0;w<a;w++,R+=4)y(0,R,w/(a-1));return m}var Em={paint:new Mt({"hillshade-illumination-direction":new We(lt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new We(lt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new We(lt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new We(lt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new We(lt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new We(lt.paint_hillshade["hillshade-accent-color"])})};const Cm=It([{name:"a_pos",components:2,type:"Int16"}],4),{members:Sm}=Cm;var Fl={exports:{}};function xu(s,i,a){a=a||2;var u,m,y,w,R,I,D,j=i&&i.length,q=j?i[0]*a:s.length,K=uf(s,0,q,a,!0),J=[];if(!K||K.next===K.prev)return J;if(j&&(K=function(ne,ue,Te,Oe){var Se,$e,Be,Me=[];for(Se=0,$e=ue.length;Se<$e;Se++)(Be=uf(ne,ue[Se]*Oe,Se<$e-1?ue[Se+1]*Oe:ne.length,Oe,!1))===Be.next&&(Be.steiner=!0),Me.push(Im(Be));for(Me.sort($m),Se=0;Se<Me.length;Se++)Te=Nm(Me[Se],Te);return Te}(s,i,K,a)),s.length>80*a){u=y=s[0],m=w=s[1];for(var Q=a;Q<q;Q+=a)(R=s[Q])<u&&(u=R),(I=s[Q+1])<m&&(m=I),R>y&&(y=R),I>w&&(w=I);D=(D=Math.max(y-u,w-m))!==0?32767/D:0}return Vl(K,J,a,u,m,D,0),J}function uf(s,i,a,u,m){var y,w;if(m===$d(s,i,a,u)>0)for(y=i;y<a;y+=u)w=ff(y,s[y],s[y+1],w);else for(y=a-u;y>=i;y-=u)w=ff(y,s[y],s[y+1],w);return w&&wu(w,w.next)&&(jl(w),w=w.next),w}function Cs(s,i){if(!s)return s;i||(i=s);var a,u=s;do if(a=!1,u.steiner||!wu(u,u.next)&&ai(u.prev,u,u.next)!==0)u=u.next;else{if(jl(u),(u=i=u.prev)===u.next)break;a=!0}while(a||u!==i);return i}function Vl(s,i,a,u,m,y,w){if(s){!w&&y&&function(j,q,K,J){var Q=j;do Q.z===0&&(Q.z=kd(Q.x,Q.y,q,K,J)),Q.prevZ=Q.prev,Q.nextZ=Q.next,Q=Q.next;while(Q!==j);Q.prevZ.nextZ=null,Q.prevZ=null,function(ne){var ue,Te,Oe,Se,$e,Be,Me,Qe,Ye=1;do{for(Te=ne,ne=null,$e=null,Be=0;Te;){for(Be++,Oe=Te,Me=0,ue=0;ue<Ye&&(Me++,Oe=Oe.nextZ);ue++);for(Qe=Ye;Me>0||Qe>0&&Oe;)Me!==0&&(Qe===0||!Oe||Te.z<=Oe.z)?(Se=Te,Te=Te.nextZ,Me--):(Se=Oe,Oe=Oe.nextZ,Qe--),$e?$e.nextZ=Se:ne=Se,Se.prevZ=$e,$e=Se;Te=Oe}$e.nextZ=null,Ye*=2}while(Be>1)}(Q)}(s,u,m,y);for(var R,I,D=s;s.prev!==s.next;)if(R=s.prev,I=s.next,y?Am(s,u,m,y):Tm(s))i.push(R.i/a|0),i.push(s.i/a|0),i.push(I.i/a|0),jl(s),s=I.next,D=I.next;else if((s=I)===D){w?w===1?Vl(s=km(Cs(s),i,a),i,a,u,m,y,2):w===2&&Rm(s,i,a,u,m,y):Vl(Cs(s),i,a,u,m,y,1);break}}}function Tm(s){var i=s.prev,a=s,u=s.next;if(ai(i,a,u)>=0)return!1;for(var m=i.x,y=a.x,w=u.x,R=i.y,I=a.y,D=u.y,j=m<y?m<w?m:w:y<w?y:w,q=R<I?R<D?R:D:I<D?I:D,K=m>y?m>w?m:w:y>w?y:w,J=R>I?R>D?R:D:I>D?I:D,Q=u.next;Q!==i;){if(Q.x>=j&&Q.x<=K&&Q.y>=q&&Q.y<=J&&wa(m,R,y,I,w,D,Q.x,Q.y)&&ai(Q.prev,Q,Q.next)>=0)return!1;Q=Q.next}return!0}function Am(s,i,a,u){var m=s.prev,y=s,w=s.next;if(ai(m,y,w)>=0)return!1;for(var R=m.x,I=y.x,D=w.x,j=m.y,q=y.y,K=w.y,J=R<I?R<D?R:D:I<D?I:D,Q=j<q?j<K?j:K:q<K?q:K,ne=R>I?R>D?R:D:I>D?I:D,ue=j>q?j>K?j:K:q>K?q:K,Te=kd(J,Q,i,a,u),Oe=kd(ne,ue,i,a,u),Se=s.prevZ,$e=s.nextZ;Se&&Se.z>=Te&&$e&&$e.z<=Oe;){if(Se.x>=J&&Se.x<=ne&&Se.y>=Q&&Se.y<=ue&&Se!==m&&Se!==w&&wa(R,j,I,q,D,K,Se.x,Se.y)&&ai(Se.prev,Se,Se.next)>=0||(Se=Se.prevZ,$e.x>=J&&$e.x<=ne&&$e.y>=Q&&$e.y<=ue&&$e!==m&&$e!==w&&wa(R,j,I,q,D,K,$e.x,$e.y)&&ai($e.prev,$e,$e.next)>=0))return!1;$e=$e.nextZ}for(;Se&&Se.z>=Te;){if(Se.x>=J&&Se.x<=ne&&Se.y>=Q&&Se.y<=ue&&Se!==m&&Se!==w&&wa(R,j,I,q,D,K,Se.x,Se.y)&&ai(Se.prev,Se,Se.next)>=0)return!1;Se=Se.prevZ}for(;$e&&$e.z<=Oe;){if($e.x>=J&&$e.x<=ne&&$e.y>=Q&&$e.y<=ue&&$e!==m&&$e!==w&&wa(R,j,I,q,D,K,$e.x,$e.y)&&ai($e.prev,$e,$e.next)>=0)return!1;$e=$e.nextZ}return!0}function km(s,i,a){var u=s;do{var m=u.prev,y=u.next.next;!wu(m,y)&&df(m,u,u.next,y)&&Ul(m,y)&&Ul(y,m)&&(i.push(m.i/a|0),i.push(u.i/a|0),i.push(y.i/a|0),jl(u),jl(u.next),u=s=y),u=u.next}while(u!==s);return Cs(u)}function Rm(s,i,a,u,m,y){var w=s;do{for(var R=w.next.next;R!==w.prev;){if(w.i!==R.i&&Lm(w,R)){var I=pf(w,R);return w=Cs(w,w.next),I=Cs(I,I.next),Vl(w,i,a,u,m,y,0),void Vl(I,i,a,u,m,y,0)}R=R.next}w=w.next}while(w!==s)}function $m(s,i){return s.x-i.x}function Nm(s,i){var a=function(m,y){var w,R=y,I=m.x,D=m.y,j=-1/0;do{if(D<=R.y&&D>=R.next.y&&R.next.y!==R.y){var q=R.x+(D-R.y)*(R.next.x-R.x)/(R.next.y-R.y);if(q<=I&&q>j&&(j=q,w=R.x<R.next.x?R:R.next,q===I))return w}R=R.next}while(R!==y);if(!w)return null;var K,J=w,Q=w.x,ne=w.y,ue=1/0;R=w;do I>=R.x&&R.x>=Q&&I!==R.x&&wa(D<ne?I:j,D,Q,ne,D<ne?j:I,D,R.x,R.y)&&(K=Math.abs(D-R.y)/(I-R.x),Ul(R,m)&&(K<ue||K===ue&&(R.x>w.x||R.x===w.x&&Mm(w,R)))&&(w=R,ue=K)),R=R.next;while(R!==J);return w}(s,i);if(!a)return i;var u=pf(a,s);return Cs(u,u.next),Cs(a,a.next)}function Mm(s,i){return ai(s.prev,s,i.prev)<0&&ai(i.next,s,s.next)<0}function kd(s,i,a,u,m){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-a)*m|0)|s<<8))|s<<4))|s<<2))|s<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-u)*m|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function Im(s){var i=s,a=s;do(i.x<a.x||i.x===a.x&&i.y<a.y)&&(a=i),i=i.next;while(i!==s);return a}function wa(s,i,a,u,m,y,w,R){return(m-w)*(i-R)>=(s-w)*(y-R)&&(s-w)*(u-R)>=(a-w)*(i-R)&&(a-w)*(y-R)>=(m-w)*(u-R)}function Lm(s,i){return s.next.i!==i.i&&s.prev.i!==i.i&&!function(a,u){var m=a;do{if(m.i!==a.i&&m.next.i!==a.i&&m.i!==u.i&&m.next.i!==u.i&&df(m,m.next,a,u))return!0;m=m.next}while(m!==a);return!1}(s,i)&&(Ul(s,i)&&Ul(i,s)&&function(a,u){var m=a,y=!1,w=(a.x+u.x)/2,R=(a.y+u.y)/2;do m.y>R!=m.next.y>R&&m.next.y!==m.y&&w<(m.next.x-m.x)*(R-m.y)/(m.next.y-m.y)+m.x&&(y=!y),m=m.next;while(m!==a);return y}(s,i)&&(ai(s.prev,s,i.prev)||ai(s,i.prev,i))||wu(s,i)&&ai(s.prev,s,s.next)>0&&ai(i.prev,i,i.next)>0)}function ai(s,i,a){return(i.y-s.y)*(a.x-i.x)-(i.x-s.x)*(a.y-i.y)}function wu(s,i){return s.x===i.x&&s.y===i.y}function df(s,i,a,u){var m=Cu(ai(s,i,a)),y=Cu(ai(s,i,u)),w=Cu(ai(a,u,s)),R=Cu(ai(a,u,i));return m!==y&&w!==R||!(m!==0||!Eu(s,a,i))||!(y!==0||!Eu(s,u,i))||!(w!==0||!Eu(a,s,u))||!(R!==0||!Eu(a,i,u))}function Eu(s,i,a){return i.x<=Math.max(s.x,a.x)&&i.x>=Math.min(s.x,a.x)&&i.y<=Math.max(s.y,a.y)&&i.y>=Math.min(s.y,a.y)}function Cu(s){return s>0?1:s<0?-1:0}function Ul(s,i){return ai(s.prev,s,s.next)<0?ai(s,i,s.next)>=0&&ai(s,s.prev,i)>=0:ai(s,i,s.prev)<0||ai(s,s.next,i)<0}function pf(s,i){var a=new Rd(s.i,s.x,s.y),u=new Rd(i.i,i.x,i.y),m=s.next,y=i.prev;return s.next=i,i.prev=s,a.next=m,m.prev=a,u.next=a,a.prev=u,y.next=u,u.prev=y,u}function ff(s,i,a,u){var m=new Rd(s,i,a);return u?(m.next=u.next,m.prev=u,u.next.prev=m,u.next=m):(m.prev=m,m.next=m),m}function jl(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function Rd(s,i,a){this.i=s,this.x=i,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function $d(s,i,a,u){for(var m=0,y=i,w=a-u;y<a;y+=u)m+=(s[w]-s[y])*(s[y+1]+s[w+1]),w=y;return m}function Om(s,i,a,u,m){hf(s,i,a||0,u||s.length-1,m||Pm)}function hf(s,i,a,u,m){for(;u>a;){if(u-a>600){var y=u-a+1,w=i-a+1,R=Math.log(y),I=.5*Math.exp(2*R/3),D=.5*Math.sqrt(R*I*(y-I)/y)*(w-y/2<0?-1:1);hf(s,i,Math.max(a,Math.floor(i-w*I/y+D)),Math.min(u,Math.floor(i+(y-w)*I/y+D)),m)}var j=s[i],q=a,K=u;for(Gl(s,a,i),m(s[u],j)>0&&Gl(s,a,u);q<K;){for(Gl(s,q,K),q++,K--;m(s[q],j)<0;)q++;for(;m(s[K],j)>0;)K--}m(s[a],j)===0?Gl(s,a,K):Gl(s,++K,u),K<=i&&(a=K+1),i<=K&&(u=K-1)}}function Gl(s,i,a){var u=s[i];s[i]=s[a],s[a]=u}function Pm(s,i){return s<i?-1:s>i?1:0}function Nd(s,i){const a=s.length;if(a<=1)return[s];const u=[];let m,y;for(let w=0;w<a;w++){const R=Ne(s[w]);R!==0&&(s[w].area=Math.abs(R),y===void 0&&(y=R<0),y===R<0?(m&&u.push(m),m=[s[w]]):m.push(s[w]))}if(m&&u.push(m),i>1)for(let w=0;w<u.length;w++)u[w].length<=i||(Om(u[w],i,1,u[w].length-1,Dm),u[w]=u[w].slice(0,i));return u}function Dm(s,i){return i.area-s.area}function Md(s,i,a){const u=a.patternDependencies;let m=!1;for(const y of i){const w=y.paint.get(`${s}-pattern`);w.isConstant()||(m=!0);const R=w.constantOr(null);R&&(m=!0,u[R.to]=!0,u[R.from]=!0)}return m}function Id(s,i,a,u,m){const y=m.patternDependencies;for(const w of i){const R=w.paint.get(`${s}-pattern`).value;if(R.kind!=="constant"){let I=R.evaluate({zoom:u-1},a,{},m.availableImages),D=R.evaluate({zoom:u},a,{},m.availableImages),j=R.evaluate({zoom:u+1},a,{},m.availableImages);I=I&&I.name?I.name:I,D=D&&D.name?D.name:D,j=j&&j.name?j.name:j,y[I]=!0,y[D]=!0,y[j]=!0,a.patterns[w.id]={min:I,mid:D,max:j}}}return a}Fl.exports=xu,Fl.exports.default=xu,xu.deviation=function(s,i,a,u){var m=i&&i.length,y=Math.abs($d(s,0,m?i[0]*a:s.length,a));if(m)for(var w=0,R=i.length;w<R;w++)y-=Math.abs($d(s,i[w]*a,w<R-1?i[w+1]*a:s.length,a));var I=0;for(w=0;w<u.length;w+=3){var D=u[w]*a,j=u[w+1]*a,q=u[w+2]*a;I+=Math.abs((s[D]-s[q])*(s[j+1]-s[D+1])-(s[D]-s[j])*(s[q+1]-s[D+1]))}return y===0&&I===0?0:Math.abs((I-y)/y)},xu.flatten=function(s){for(var i=s[0][0].length,a={vertices:[],holes:[],dimensions:i},u=0,m=0;m<s.length;m++){for(var y=0;y<s[m].length;y++)for(var w=0;w<i;w++)a.vertices.push(s[m][y][w]);m>0&&a.holes.push(u+=s[m-1].length)}return a};class Su{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(a=>a.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new xn,this.indexArray=new Ni,this.indexArray2=new tr,this.programConfigurations=new ys(i.layers,i.zoom),this.segments=new di,this.segments2=new di,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.projection=i.projection}populate(i,a,u,m){this.hasPattern=Md("fill",this.layers,a);const y=this.layers[0].layout.get("fill-sort-key"),w=[];for(const{feature:R,id:I,index:D,sourceLayerIndex:j}of i){const q=this.layers[0]._featureFilter.needGeometry,K=bs(R,q);if(!this.layers[0]._featureFilter.filter(new Ae(this.zoom),K,u))continue;const J=y?y.evaluate(K,{},u,a.availableImages):void 0,Q={id:I,properties:R.properties,type:R.type,sourceLayerIndex:j,index:D,geometry:q?K.geometry:co(R,u,m),patterns:{},sortKey:J};w.push(Q)}y&&w.sort((R,I)=>R.sortKey-I.sortKey);for(const R of w){const{geometry:I,index:D,sourceLayerIndex:j}=R;if(this.hasPattern){const q=Id("fill",this.layers,R,this.zoom,a);this.patternFeatures.push(q)}else this.addFeature(R,I,D,u,{},a.availableImages);a.featureIndex.insert(i[D].feature,I,D,j,this.index)}}update(i,a,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,a,this.stateDependentLayers,u,m)}addFeatures(i,a,u,m,y){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,a,u,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Sm),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,a,u,m,y,w=[]){for(const R of Nd(a,500)){let I=0;for(const Q of R)I+=Q.length;const D=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray),j=D.vertexLength,q=[],K=[];for(const Q of R){if(Q.length===0)continue;Q!==R[0]&&K.push(q.length/2);const ne=this.segments2.prepareSegment(Q.length,this.layoutVertexArray,this.indexArray2),ue=ne.vertexLength;this.layoutVertexArray.emplaceBack(Q[0].x,Q[0].y),this.indexArray2.emplaceBack(ue+Q.length-1,ue),q.push(Q[0].x),q.push(Q[0].y);for(let Te=1;Te<Q.length;Te++)this.layoutVertexArray.emplaceBack(Q[Te].x,Q[Te].y),this.indexArray2.emplaceBack(ue+Te-1,ue+Te),q.push(Q[Te].x),q.push(Q[Te].y);ne.vertexLength+=Q.length,ne.primitiveLength+=Q.length}const J=Fl.exports(q,K);for(let Q=0;Q<J.length;Q+=3)this.indexArray.emplaceBack(j+J[Q],j+J[Q+1],j+J[Q+2]);D.vertexLength+=I,D.primitiveLength+=J.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,u,y,w,m)}}Gt(Su,"FillBucket",{omit:["layers","patternFeatures"]});const Bm=new Mt({"fill-sort-key":new Ue(lt.layout_fill["fill-sort-key"])});var zm={paint:new Mt({"fill-antialias":new We(lt.paint_fill["fill-antialias"]),"fill-opacity":new Ue(lt.paint_fill["fill-opacity"]),"fill-color":new Ue(lt.paint_fill["fill-color"]),"fill-outline-color":new Ue(lt.paint_fill["fill-outline-color"]),"fill-translate":new We(lt.paint_fill["fill-translate"]),"fill-translate-anchor":new We(lt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Dt(lt.paint_fill["fill-pattern"])}),layout:Bm};const Fm=It([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Vm=It([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Um=It([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:jm}=Fm;var Tu={},Gm=Z,mf=Ea;function Ea(s,i,a,u,m){this.properties={},this.extent=a,this.type=0,this._pbf=s,this._geometry=-1,this._keys=u,this._values=m,s.readFields(Hm,this,i)}function Hm(s,i,a){s==1?i.id=a.readVarint():s==2?function(u,m){for(var y=u.readVarint()+u.pos;u.pos<y;){var w=m._keys[u.readVarint()],R=m._values[u.readVarint()];m.properties[w]=R}}(a,i):s==3?i.type=a.readVarint():s==4&&(i._geometry=a.pos)}function qm(s){for(var i,a,u=0,m=0,y=s.length,w=y-1;m<y;w=m++)u+=((a=s[w]).x-(i=s[m]).x)*(i.y+a.y);return u}Ea.types=["Unknown","Point","LineString","Polygon"],Ea.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var i,a=s.readVarint()+s.pos,u=1,m=0,y=0,w=0,R=[];s.pos<a;){if(m<=0){var I=s.readVarint();u=7&I,m=I>>3}if(m--,u===1||u===2)y+=s.readSVarint(),w+=s.readSVarint(),u===1&&(i&&R.push(i),i=[]),i.push(new Gm(y,w));else{if(u!==7)throw new Error("unknown command "+u);i&&i.push(i[0].clone())}}return i&&R.push(i),R},Ea.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var i=s.readVarint()+s.pos,a=1,u=0,m=0,y=0,w=1/0,R=-1/0,I=1/0,D=-1/0;s.pos<i;){if(u<=0){var j=s.readVarint();a=7&j,u=j>>3}if(u--,a===1||a===2)(m+=s.readSVarint())<w&&(w=m),m>R&&(R=m),(y+=s.readSVarint())<I&&(I=y),y>D&&(D=y);else if(a!==7)throw new Error("unknown command "+a)}return[w,I,R,D]},Ea.prototype.toGeoJSON=function(s,i,a){var u,m,y=this.extent*Math.pow(2,a),w=this.extent*s,R=this.extent*i,I=this.loadGeometry(),D=Ea.types[this.type];function j(J){for(var Q=0;Q<J.length;Q++){var ne=J[Q];J[Q]=[360*(ne.x+w)/y-180,360/Math.PI*Math.atan(Math.exp((180-360*(ne.y+R)/y)*Math.PI/180))-90]}}switch(this.type){case 1:var q=[];for(u=0;u<I.length;u++)q[u]=I[u][0];j(I=q);break;case 2:for(u=0;u<I.length;u++)j(I[u]);break;case 3:for(I=function(J){var Q=J.length;if(Q<=1)return[J];for(var ne,ue,Te=[],Oe=0;Oe<Q;Oe++){var Se=qm(J[Oe]);Se!==0&&(ue===void 0&&(ue=Se<0),ue===Se<0?(ne&&Te.push(ne),ne=[J[Oe]]):ne.push(J[Oe]))}return ne&&Te.push(ne),Te}(I),u=0;u<I.length;u++)for(m=0;m<I[u].length;m++)j(I[u][m])}I.length===1?I=I[0]:D="Multi"+D;var K={type:"Feature",geometry:{type:D,coordinates:I},properties:this.properties};return"id"in this&&(K.id=this.id),K};var Km=mf,gf=_f;function _f(s,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(Wm,this,i),this.length=this._features.length}function Wm(s,i,a){s===15?i.version=a.readVarint():s===1?i.name=a.readString():s===5?i.extent=a.readVarint():s===2?i._features.push(a.pos):s===3?i._keys.push(a.readString()):s===4&&i._values.push(function(u){for(var m=null,y=u.readVarint()+u.pos;u.pos<y;){var w=u.readVarint()>>3;m=w===1?u.readString():w===2?u.readFloat():w===3?u.readDouble():w===4?u.readVarint64():w===5?u.readVarint():w===6?u.readSVarint():w===7?u.readBoolean():null}return m}(a))}_f.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var i=this._pbf.readVarint()+this._pbf.pos;return new Km(this._pbf,i,this.extent,this._keys,this._values)};var Zm=gf;function Ym(s,i,a){if(s===3){var u=new Zm(a,a.readVarint()+a.pos);u.length&&(i[u.name]=u)}}var Ld=Tu.VectorTile=function(s,i){this.layers=s.readFields(Ym,{},i)},Au=Tu.VectorTileFeature=mf;function ku(s,i,a,u){const m=[],y=u===0?(w,R,I,D,j,q)=>{w.push(new Z(q,I+(q-R)/(D-R)*(j-I)))}:(w,R,I,D,j,q)=>{w.push(new Z(R+(q-I)/(j-I)*(D-R),q))};for(const w of s){const R=[];for(const I of w){if(I.length<=2)continue;const D=[];for(let K=0;K<I.length-1;K++){const J=I[K].x,Q=I[K].y,ne=I[K+1].x,ue=I[K+1].y,Te=u===0?J:Q,Oe=u===0?ne:ue;Te<i?Oe>i&&y(D,J,Q,ne,ue,i):Te>a?Oe<a&&y(D,J,Q,ne,ue,a):D.push(I[K]),Oe<i&&Te>=i&&y(D,J,Q,ne,ue,i),Oe>a&&Te<=a&&y(D,J,Q,ne,ue,a)}let j=I[I.length-1];const q=u===0?j.x:j.y;q>=i&&q<=a&&D.push(j),D.length&&(j=D[D.length-1],D[0].x===j.x&&D[0].y===j.y||D.push(D[0]),R.push(D))}R.length&&m.push(R)}return m}Tu.VectorTileLayer=gf;const Xm=Au.types,Jm=Math.pow(2,13);function Hl(s,i,a,u,m,y,w,R){s.emplaceBack((i<<1)+w,(a<<1)+y,(Math.floor(u*Jm)<<1)+m,Math.round(R))}function ql(s,i,a){s.emplaceBack(i.x,i.y,i.z,a[0]*16384,a[1]*16384,a[2]*16384)}class vf{constructor(){this.acc=new Z(0,0),this.polyCount=[]}startRing(i){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new Z(i.x,i.y),this.max=new Z(i.x,i.y))}append(i,a){this.currentPolyCount.edges++,this.acc._add(i);const u=this.min,m=this.max;i.x<u.x?u.x=i.x:i.x>m.x&&(m.x=i.x),i.y<u.y?u.y=i.y:i.y>m.y&&(m.y=i.y),((i.x===0||i.x===cn)&&i.x===a.x)!=((i.y===0||i.y===cn)&&i.y===a.y)&&this.processBorderOverlap(i,a),a.x<0!=i.x<0&&this.addBorderIntersection(0,Rn(a.y,i.y,(0-a.x)/(i.x-a.x))),a.x>cn!=i.x>cn&&this.addBorderIntersection(1,Rn(a.y,i.y,(cn-a.x)/(i.x-a.x))),a.y<0!=i.y<0&&this.addBorderIntersection(2,Rn(a.x,i.x,(0-a.y)/(i.y-a.y))),a.y>cn!=i.y>cn&&this.addBorderIntersection(3,Rn(a.x,i.x,(cn-a.y)/(i.y-a.y)))}addBorderIntersection(i,a){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const u=this.borders[i];a<u[0]&&(u[0]=a),a>u[1]&&(u[1]=a)}processBorderOverlap(i,a){if(i.x===a.x){if(i.y===a.y)return;const u=i.x===0?0:1;this.addBorderIntersection(u,a.y),this.addBorderIntersection(u,i.y)}else{const u=i.y===0?2:3;this.addBorderIntersection(u,a.x),this.addBorderIntersection(u,i.x)}}centroid(){const i=this.polyCount.reduce((a,u)=>a+u.edges,0);return i!==0?this.acc.div(i)._round():new Z(0,0)}span(){return new Z(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((i,a)=>i+ +(a[0]!==Number.MAX_VALUE),0)}}class Kl{constructor(i){this.zoom=i.zoom,this.canonical=i.canonical,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(a=>a.id),this.index=i.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=i.projection,this.layoutVertexArray=new Vn,this.centroidVertexArray=new Ep,this.indexArray=new Ni,this.programConfigurations=new ys(i.layers,i.zoom),this.segments=new di,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.enableTerrain=i.enableTerrain}populate(i,a,u,m){this.features=[],this.hasPattern=Md("fill-extrusion",this.layers,a),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(y){const w=Math.exp(Math.PI*(1-y.y/(1<<y.z)*2));return 80150034*w/(w*w+1)/cn/(1<<y.z)}(u),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:y,id:w,index:R,sourceLayerIndex:I}of i){const D=this.layers[0]._featureFilter.needGeometry,j=bs(y,D);if(!this.layers[0]._featureFilter.filter(new Ae(this.zoom),j,u))continue;const q={id:w,sourceLayerIndex:I,index:R,geometry:D?j.geometry:co(y,u,m),properties:y.properties,type:y.type,patterns:{}},K=this.layoutVertexArray.length;this.hasPattern?this.features.push(Id("fill-extrusion",this.layers,q,this.zoom,a)):this.addFeature(q,q.geometry,R,u,{},a.availableImages,m),a.featureIndex.insert(y,q.geometry,R,I,this.index,K)}this.sortBorders()}addFeatures(i,a,u,m,y){for(const w of this.features){const{geometry:R}=w;this.addFeature(w,R,w.index,a,u,m,y)}this.sortBorders()}update(i,a,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,a,this.stateDependentLayers,u,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,jm),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=i.createVertexBuffer(this.layoutVertexExtArray,Um.members,!0))),this.programConfigurations.upload(i),this.uploaded=!0}uploadCentroid(i){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,Vm.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,a,u,m,y,w,R){const I=[new Z(0,0),new Z(cn,cn)],D=R.projection,j=D.name==="globe",q=this.enableTerrain&&!j?new vf:null,K=Xm[i.type]==="Polygon";j&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new pp);const J=Nd(a,500);for(let Te=J.length-1;Te>=0;Te--){const Oe=J[Te];(Oe.length===0||(Q=Oe[0]).every(Se=>Se.x<=0)||Q.every(Se=>Se.x>=cn)||Q.every(Se=>Se.y<=0)||Q.every(Se=>Se.y>=cn))&&J.splice(Te,1)}var Q;let ne;if(j)ne=Sf(J,I,m);else{ne=[];for(const Te of J)ne.push({polygon:Te,bounds:I})}const ue=K?this.edgeRadius:0;for(const{polygon:Te,bounds:Oe}of ne){let Se=0,$e=0;for(const Me of Te)K&&!Me[0].equals(Me[Me.length-1])&&Me.push(Me[0]),$e+=K?Me.length-1:Me.length;const Be=this.segments.prepareSegment((K?5:4)*$e,this.layoutVertexArray,this.indexArray);if(K){const Me=[],Qe=[];Se=Be.vertexLength;for(const ct of Te){let Tt,ot;ct.length&&ct!==Te[0]&&Qe.push(Me.length/2),Tt=ct[1].sub(ct[0])._perp()._unit();for(let ft=1;ft<ct.length;ft++){const vt=ct[ft],wt=ct[ft===ct.length-1?1:ft+1];let{x:At,y:st}=vt;if(ue){ot=wt.sub(vt)._perp()._unit();const Pt=Tt.add(ot)._unit(),nn=ue*Math.min(4,1/(Tt.x*Pt.x+Tt.y*Pt.y));At+=nn*Pt.x,st+=nn*Pt.y,Tt=ot}Hl(this.layoutVertexArray,At,st,0,0,1,1,0),Be.vertexLength++,Me.push(vt.x,vt.y),j&&ql(this.layoutVertexExtArray,D.projectTilePoint(At,st,m),D.upVector(m,At,st))}}const Ye=Fl.exports(Me,Qe);for(let ct=0;ct<Ye.length;ct+=3)this.indexArray.emplaceBack(Se+Ye[ct],Se+Ye[ct+2],Se+Ye[ct+1]),Be.primitiveLength++}for(const Me of Te){q&&Me.length&&q.startRing(Me[0]);let Qe,Ye,ct,Tt=Me.length>4&&wf(Me[Me.length-2],Me[0],Me[1]),ot=ue?Qm(Me[Me.length-2],Me[0],Me[1],ue):0;Ye=Me[1].sub(Me[0])._perp()._unit();let ft=!0;for(let vt=1,wt=0;vt<Me.length;vt++){let At=Me[vt-1],st=Me[vt];const Pt=Me[vt===Me.length-1?1:vt+1];if(q&&K&&q.currentPolyCount.top++,xf(st,At,Oe)){ue&&(Ye=Pt.sub(st)._perp()._unit(),ft=!ft);continue}q&&q.append(st,At);const nn=st.sub(At)._perp(),Ft=nn.x/(Math.abs(nn.x)+Math.abs(nn.y)),Wt=nn.y>0?1:0,Bt=At.dist(st);if(wt+Bt>32768&&(wt=0),ue){ct=Pt.sub(st)._perp()._unit();let kn=bf(At,st,Pt,yf(Ye,ct),ue);isNaN(kn)&&(kn=0);const mn=st.sub(At)._unit();At=At.add(mn.mult(ot))._round(),st=st.add(mn.mult(-kn))._round(),ot=kn,Ye=ct}const sn=Be.vertexLength,_n=Me.length>4&&wf(At,st,Pt);let bn=Ef(wt,Tt,ft);if(Hl(this.layoutVertexArray,At.x,At.y,Ft,Wt,0,0,bn),Hl(this.layoutVertexArray,At.x,At.y,Ft,Wt,0,1,bn),wt+=Bt,bn=Ef(wt,_n,!ft),Tt=_n,Hl(this.layoutVertexArray,st.x,st.y,Ft,Wt,0,0,bn),Hl(this.layoutVertexArray,st.x,st.y,Ft,Wt,0,1,bn),Be.vertexLength+=4,this.indexArray.emplaceBack(sn+0,sn+1,sn+2),this.indexArray.emplaceBack(sn+1,sn+3,sn+2),Be.primitiveLength+=2,ue){const kn=Se+(vt===1?Me.length-2:vt-2),mn=vt===1?Se:kn+1;if(this.indexArray.emplaceBack(sn+1,kn,sn+3),this.indexArray.emplaceBack(kn,mn,sn+3),Be.primitiveLength+=2,Qe===void 0&&(Qe=sn),!xf(Pt,Me[vt],Oe)){const Jn=vt===Me.length-1?Qe:Be.vertexLength;this.indexArray.emplaceBack(sn+2,sn+3,Jn),this.indexArray.emplaceBack(sn+3,Jn+1,Jn),this.indexArray.emplaceBack(sn+3,mn,Jn+1),Be.primitiveLength+=3}ft=!ft}if(j){const kn=this.layoutVertexExtArray,mn=D.projectTilePoint(At.x,At.y,m),Jn=D.projectTilePoint(st.x,st.y,m),wn=D.upVector(m,At.x,At.y),An=D.upVector(m,st.x,st.y);ql(kn,mn,wn),ql(kn,mn,wn),ql(kn,Jn,An),ql(kn,Jn,An)}}K&&(Se+=Me.length-1)}}if(q&&q.polyCount.length>0){if(q.borders){q.vertexArrayOffset=this.centroidVertexArray.length;const Te=q.borders,Oe=this.featuresOnBorder.push(q)-1;for(let Se=0;Se<4;Se++)Te[Se][0]!==Number.MAX_VALUE&&this.borders[Se].push(Oe)}this.encodeCentroid(q.borders?void 0:q.centroid(),q)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,u,y,w,m)}sortBorders(){for(let i=0;i<4;i++)this.borders[i].sort((a,u)=>this.featuresOnBorder[a].borders[i][0]-this.featuresOnBorder[u].borders[i][0])}encodeCentroid(i,a,u=!0){let m,y;if(i)if(i.y!==0){const R=a.span()._mult(this.tileToMeter);m=(Math.max(i.x,1)<<3)+Math.min(7,Math.round(R.x/10)),y=(Math.max(i.y,1)<<3)+Math.min(7,Math.round(R.y/10))}else m=Math.ceil(7*(i.x+450)),y=0;else m=0,y=+u;let w=u?this.centroidVertexArray.length:a.vertexArrayOffset;for(const R of a.polyCount){u&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*R.edges+R.top);for(let I=0;I<R.top;I++)this.centroidVertexArray.emplace(w++,m,y);for(let I=0;I<2*R.edges;I++)this.centroidVertexArray.emplace(w++,0,y),this.centroidVertexArray.emplace(w++,m,y)}}}function yf(s,i){const a=s.add(i)._unit();return s.x*a.x+s.y*a.y}function Qm(s,i,a,u){const m=i.sub(s)._perp()._unit(),y=a.sub(i)._perp()._unit();return bf(s,i,a,yf(m,y),u)}function bf(s,i,a,u,m){const y=Math.sqrt(1-u*u);return Math.min(s.dist(i)/3,i.dist(a)/3,m*y/u)}function xf(s,i,a){return s.x<a[0].x&&i.x<a[0].x||s.x>a[1].x&&i.x>a[1].x||s.y<a[0].y&&i.y<a[0].y||s.y>a[1].y&&i.y>a[1].y}function wf(s,i,a){if(s.x<0||s.x>=cn||i.x<0||i.x>=cn||a.x<0||a.x>=cn)return!1;const u=a.sub(i),m=u.perp(),y=s.sub(i);return(u.x*y.x+u.y*y.y)/Math.sqrt((u.x*u.x+u.y*u.y)*(y.x*y.x+y.y*y.y))>-.866&&m.x*y.x+m.y*y.y<0}function Ef(s,i,a){const u=i?2|s:-3&s;return a?1|u:-2&u}function Cf(){const s=Math.PI/32,i=Math.tan(s),a=mu;return a*Math.sqrt(1+2*i*i)-a}function Sf(s,i,a){const u=1<<a.z,m=nr(a.x/u),y=nr((a.x+1)/u),w=Ai(a.y/u),R=Ai((a.y+1)/u);return function(I,D,j,q,K=0,J){const Q=[];if(!I.length||!j||!q)return Q;const ne=(Me,Qe)=>{for(const Ye of Me)Q.push({polygon:Ye,bounds:Qe})},ue=Math.ceil(Math.log2(j)),Te=Math.ceil(Math.log2(q)),Oe=ue-Te,Se=[];for(let Me=0;Me<Math.abs(Oe);Me++)Se.push(Oe>0?0:1);for(let Me=0;Me<Math.min(ue,Te);Me++)Se.push(0),Se.push(1);let $e=I;if($e=ku($e,D[0].y-K,D[1].y+K,1),$e=ku($e,D[0].x-K,D[1].x+K,0),!$e.length)return Q;const Be=[];for(Se.length?Be.push({polygons:$e,bounds:D,depth:0}):ne($e,D);Be.length;){const Me=Be.pop(),Qe=Me.depth,Ye=Se[Qe],ct=Me.bounds[0],Tt=Me.bounds[1],ot=Ye===0?ct.x:ct.y,ft=Ye===0?Tt.x:Tt.y,vt=J?J(Ye,ot,ft):.5*(ot+ft),wt=ku(Me.polygons,ot-K,vt+K,Ye),At=ku(Me.polygons,vt-K,ft+K,Ye);if(wt.length){const st=[ct,new Z(Ye===0?vt:Tt.x,Ye===1?vt:Tt.y)];Se.length>Qe+1?Be.push({polygons:wt,bounds:st,depth:Qe+1}):ne(wt,st)}if(At.length){const st=[new Z(Ye===0?vt:ct.x,Ye===1?vt:ct.y),Tt];Se.length>Qe+1?Be.push({polygons:At,bounds:st,depth:Qe+1}):ne(At,st)}}return Q}(s,i,Math.ceil((y-m)/11.25),Math.ceil((w-R)/11.25),1,(I,D,j)=>{if(I===0)return .5*(D+j);{const q=Ai((a.y+D/cn)/u);return(Ur(.5*(Ai((a.y+j/cn)/u)+q))*u-a.y)*cn}})}Gt(Kl,"FillExtrusionBucket",{omit:["layers","features"]}),Gt(vf,"PartMetadata");const eg=new Mt({"fill-extrusion-edge-radius":new We(lt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var tg={paint:new Mt({"fill-extrusion-opacity":new We(lt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ue(lt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new We(lt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new We(lt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Dt(lt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ue(lt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ue(lt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new We(lt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new We(lt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new We(lt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:eg};function Tf(s,i,a){var u=2*Math.PI*6378137/256/Math.pow(2,a);return[s*u-2*Math.PI*6378137/2,i*u-2*Math.PI*6378137/2]}class Ru{constructor(i,a,u){this.z=i,this.x=a,this.y=u,this.key=Wl(0,i,i,a,u)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,a){const u=function(y,w,R){var I=Tf(256*y,256*(w=Math.pow(2,R)-w-1),R),D=Tf(256*(y+1),256*(w+1),R);return I[0]+","+I[1]+","+D[0]+","+D[1]}(this.x,this.y,this.z),m=function(y,w,R){let I,D="";for(let j=y;j>0;j--)I=1<<j-1,D+=(w&I?1:0)+(R&I?2:0);return D}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(a==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",m).replace("{bbox-epsg-3857}",u)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Af{constructor(i,a){this.wrap=i,this.canonical=a,this.key=Wl(i,a.z,a.z,a.x,a.y)}}class Vi{constructor(i,a,u,m,y){this.overscaledZ=i,this.wrap=a,this.canonical=new Ru(u,+m,+y),this.key=a===0&&i===u?this.canonical.key:Wl(a,i,u,m,y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){const a=this.canonical.z-i;return i>this.canonical.z?new Vi(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Vi(i,this.wrap,i,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(i,a=!0){if(this.overscaledZ===i&&a)return this.key;if(i>this.canonical.z)return Wl(this.wrap*+a,i,this.canonical.z,this.canonical.x,this.canonical.y);{const u=this.canonical.z-i;return Wl(this.wrap*+a,i,i,this.canonical.x>>u,this.canonical.y>>u)}}isChildOf(i){if(i.wrap!==this.wrap)return!1;const a=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>a&&i.canonical.y===this.canonical.y>>a}children(i){if(this.overscaledZ>=i)return[new Vi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,u=2*this.canonical.x,m=2*this.canonical.y;return[new Vi(a,this.wrap,a,u,m),new Vi(a,this.wrap,a,u+1,m),new Vi(a,this.wrap,a,u,m+1),new Vi(a,this.wrap,a,u+1,m+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new Vi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new Vi(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Af(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Wl(s,i,a,u,m){const y=1<<Math.min(a,22);let w=y*(m%y)+u%y;return s&&a<22&&(w+=y*y*((s<0?-2*s-1:2*s)%(1<<2*(22-a)))),16*(32*w+a)+(i-a)}Gt(Ru,"CanonicalTileID"),Gt(Vi,"OverscaledTileID",{omit:["projMatrix"]});class Ca extends Z{constructor(i,a,u){super(i,a),this.z=u}}function Zl(s,i){return s.x*i.x+s.y*i.y}function kf(s,i){if(s.length===1){let a=0;const u=i[a++];let m;for(;!m||u.equals(m);)if(m=i[a++],!m)return 1/0;for(;a<i.length;a++){const y=i[a],w=s[0],R=m.sub(u),I=y.sub(u),D=w.sub(u),j=Zl(R,R),q=Zl(R,I),K=Zl(I,I),J=Zl(D,R),Q=Zl(D,I),ne=j*K-q*q,ue=(K*J-q*Q)/ne,Te=(j*Q-q*J)/ne,Oe=u.z*(1-ue-Te)+m.z*ue+y.z*Te;if(isFinite(Oe))return Oe}return 1/0}{let a=1/0;for(const u of i)a=Math.min(a,u.z);return a}}function Rf(s,i,a,u,m,y,w,R){const I=w*m.getElevationAt(s,i,!0,!0),D=y[0]!==0,j=D?y[1]===0?w*(y[0]/7-450):w*function(q,K,J){const Q=Math.floor(K[0]/8),ne=Math.floor(K[1]/8),ue=10*(K[0]-8*Q),Te=10*(K[1]-8*ne),Oe=q.getElevationAt(Q,ne,!0,!0),Se=q.getMeterToDEM(J),$e=Math.floor(.5*(ue*Se-1)),Be=Math.floor(.5*(Te*Se-1)),Me=q.tileCoordToPixel(Q,ne),Qe=2*$e+1,Ye=2*Be+1,ct=function(At,st,Pt,nn,Ft){return[At.getElevationAtPixel(st,Pt,!0),At.getElevationAtPixel(st+Ft,Pt,!0),At.getElevationAtPixel(st,Pt+Ft,!0),At.getElevationAtPixel(st+nn,Pt+Ft,!0)]}(q,Me.x-$e,Me.y-Be,Qe,Ye),Tt=Math.abs(ct[0]-ct[1]),ot=Math.abs(ct[2]-ct[3]),ft=Math.abs(ct[0]-ct[2])+Math.abs(ct[1]-ct[3]),vt=Math.min(.25,.5*Se*(Tt+ot)/Qe),wt=Math.min(.25,.5*Se*ft/Ye);return Oe+Math.max(vt*ue,wt*Te)}(m,y,R):I;return{base:I+(a===0)?-1:a,top:D?Math.max(j+u,I+a+2):I+u}}const ng=It([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:ig}=ng,rg=It([{name:"a_packed",components:4,type:"Float32"}]),{members:og}=rg,sg=Au.types,ag=Math.cos(Math.PI/180*37.5);class $u{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(a=>a.id),this.index=i.index,this.projection=i.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new Pn,this.layoutVertexArray2=new hi,this.indexArray=new Ni,this.programConfigurations=new ys(i.layers,i.zoom),this.segments=new di,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(i,a,u,m){this.hasPattern=Md("line",this.layers,a);const y=this.layers[0].layout.get("line-sort-key"),w=[];for(const{feature:j,id:q,index:K,sourceLayerIndex:J}of i){const Q=this.layers[0]._featureFilter.needGeometry,ne=bs(j,Q);if(!this.layers[0]._featureFilter.filter(new Ae(this.zoom),ne,u))continue;const ue=y?y.evaluate(ne,{},u):void 0,Te={id:q,properties:j.properties,type:j.type,sourceLayerIndex:J,index:K,geometry:Q?ne.geometry:co(j,u,m),patterns:{},sortKey:ue};w.push(Te)}y&&w.sort((j,q)=>j.sortKey-q.sortKey);const{lineAtlas:R,featureIndex:I}=a,D=this.addConstantDashes(R);for(const j of w){const{geometry:q,index:K,sourceLayerIndex:J}=j;if(D&&this.addFeatureDashes(j,R),this.hasPattern){const Q=Id("line",this.layers,j,this.zoom,a);this.patternFeatures.push(Q)}else this.addFeature(j,q,K,u,R.positions,a.availableImages);I.insert(i[K].feature,q,K,J,this.index)}}addConstantDashes(i){let a=!1;for(const u of this.layers){const m=u.paint.get("line-dasharray").value,y=u.layout.get("line-cap").value;if(m.kind!=="constant"||y.kind!=="constant")a=!0;else{const w=y.value,R=m.value;if(!R)continue;i.addDash(R.from,w),i.addDash(R.to,w),R.other&&i.addDash(R.other,w)}}return a}addFeatureDashes(i,a){const u=this.zoom;for(const m of this.layers){const y=m.paint.get("line-dasharray").value,w=m.layout.get("line-cap").value;if(y.kind==="constant"&&w.kind==="constant")continue;let R,I,D,j,q,K;if(y.kind==="constant"){const ue=y.value;if(!ue)continue;R=ue.other||ue.to,I=ue.to,D=ue.from}else R=y.evaluate({zoom:u-1},i),I=y.evaluate({zoom:u},i),D=y.evaluate({zoom:u+1},i);w.kind==="constant"?j=q=K=w.value:(j=w.evaluate({zoom:u-1},i),q=w.evaluate({zoom:u},i),K=w.evaluate({zoom:u+1},i)),a.addDash(R,j),a.addDash(I,q),a.addDash(D,K);const J=a.getKey(R,j),Q=a.getKey(I,q),ne=a.getKey(D,K);i.patterns[m.id]={min:J,mid:Q,max:ne}}}update(i,a,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,a,this.stateDependentLayers,u,m)}addFeatures(i,a,u,m,y){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,a,u,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,og)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,ig),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&i.properties.hasOwnProperty("mapbox_clip_start")&&i.properties.hasOwnProperty("mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,a,u,m,y,w){const R=this.layers[0].layout,I=R.get("line-join").evaluate(i,{}),D=R.get("line-cap").evaluate(i,{}),j=R.get("line-miter-limit"),q=R.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const K of a)this.addLine(K,i,I,D,j,q);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,u,y,w,m)}addLine(i,a,u,m,y,w){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Te=0;Te<i.length-1;Te++)this.totalDistance+=i[Te].dist(i[Te+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const R=sg[a.type]==="Polygon";let I=i.length;for(;I>=2&&i[I-1].equals(i[I-2]);)I--;let D=0;for(;D<I-1&&i[D].equals(i[D+1]);)D++;if(I<(R?3:2))return;u==="bevel"&&(y=1.05);const j=this.overscaling<=16?122880/(512*this.overscaling):0,q=this.segments.prepareSegment(10*I,this.layoutVertexArray,this.indexArray);let K,J,Q,ne,ue;this.e1=this.e2=-1,R&&(K=i[I-2],ue=i[D].sub(K)._unit()._perp());for(let Te=D;Te<I;Te++){if(Q=Te===I-1?R?i[D+1]:void 0:i[Te+1],Q&&i[Te].equals(Q))continue;ue&&(ne=ue),K&&(J=K),K=i[Te],ue=Q?Q.sub(K)._unit()._perp():ne,ne=ne||ue;let Oe=ne.add(ue);Oe.x===0&&Oe.y===0||Oe._unit();const Se=ne.x*ue.x+ne.y*ue.y,$e=Oe.x*ue.x+Oe.y*ue.y,Be=$e!==0?1/$e:1/0,Me=2*Math.sqrt(2-2*$e),Qe=$e<ag&&J&&Q,Ye=ne.x*ue.y-ne.y*ue.x>0;if(Qe&&Te>D){const ot=K.dist(J);if(ot>2*j){const ft=K.sub(K.sub(J)._mult(j/ot)._round());this.updateDistance(J,ft),this.addCurrentVertex(ft,ne,0,0,q),J=ft}}const ct=J&&Q;let Tt=ct?u:R?"butt":m;if(ct&&Tt==="round"&&(Be<w?Tt="miter":Be<=2&&(Tt="fakeround")),Tt==="miter"&&Be>y&&(Tt="bevel"),Tt==="bevel"&&(Be>2&&(Tt="flipbevel"),Be<y&&(Tt="miter")),J&&this.updateDistance(J,K),Tt==="miter")Oe._mult(Be),this.addCurrentVertex(K,Oe,0,0,q);else if(Tt==="flipbevel"){if(Be>100)Oe=ue.mult(-1);else{const ot=Be*ne.add(ue).mag()/ne.sub(ue).mag();Oe._perp()._mult(ot*(Ye?-1:1))}this.addCurrentVertex(K,Oe,0,0,q),this.addCurrentVertex(K,Oe.mult(-1),0,0,q)}else if(Tt==="bevel"||Tt==="fakeround"){const ot=-Math.sqrt(Be*Be-1),ft=Ye?ot:0,vt=Ye?0:ot;if(J&&this.addCurrentVertex(K,ne,ft,vt,q),Tt==="fakeround"){const wt=Math.round(180*Me/Math.PI/20);for(let At=1;At<wt;At++){let st=At/wt;if(st!==.5){const nn=st-.5;st+=st*nn*(st-1)*((1.0904+Se*(Se*(3.55645-1.43519*Se)-3.2452))*nn*nn+(.848013+Se*(.215638*Se-1.06021)))}const Pt=ue.sub(ne)._mult(st)._add(ne)._unit()._mult(Ye?-1:1);this.addHalfVertex(K,Pt.x,Pt.y,!1,Ye,0,q)}}Q&&this.addCurrentVertex(K,ue,-ft,-vt,q)}else if(Tt==="butt")this.addCurrentVertex(K,Oe,0,0,q);else if(Tt==="square"){const ot=J?1:-1;J||this.addCurrentVertex(K,Oe,ot,ot,q),this.addCurrentVertex(K,Oe,0,0,q),J&&this.addCurrentVertex(K,Oe,ot,ot,q)}else Tt==="round"&&(J&&(this.addCurrentVertex(K,ne,0,0,q),this.addCurrentVertex(K,ne,1,1,q,!0)),Q&&(this.addCurrentVertex(K,ue,-1,-1,q,!0),this.addCurrentVertex(K,ue,0,0,q)));if(Qe&&Te<I-1){const ot=K.dist(Q);if(ot>2*j){const ft=K.add(Q.sub(K)._mult(j/ot)._round());this.updateDistance(K,ft),this.addCurrentVertex(ft,ue,0,0,q),K=ft}}}}addCurrentVertex(i,a,u,m,y,w=!1){const R=a.y*m-a.x,I=-a.y-a.x*m;this.addHalfVertex(i,a.x+a.y*u,a.y-a.x*u,w,!1,u,y),this.addHalfVertex(i,R,I,w,!0,-m,y)}addHalfVertex({x:i,y:a},u,m,y,w,R,I){this.layoutVertexArray.emplaceBack((i<<1)+(y?1:0),(a<<1)+(w?1:0),Math.round(63*u)+128,Math.round(63*m)+128,1+(R===0?0:R<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const D=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,D),I.primitiveLength++),w?this.e2=D:this.e1=D}updateScaledDistance(){if(this.lineClips){const i=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=i*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(i,a){this.distance+=i.dist(a),this.updateScaledDistance()}}Gt($u,"LineBucket",{omit:["layers","patternFeatures"]});const lg=new Mt({"line-cap":new Ue(lt.layout_line["line-cap"]),"line-join":new Ue(lt.layout_line["line-join"]),"line-miter-limit":new We(lt.layout_line["line-miter-limit"]),"line-round-limit":new We(lt.layout_line["line-round-limit"]),"line-sort-key":new Ue(lt.layout_line["line-sort-key"])});var $f={paint:new Mt({"line-opacity":new Ue(lt.paint_line["line-opacity"]),"line-color":new Ue(lt.paint_line["line-color"]),"line-translate":new We(lt.paint_line["line-translate"]),"line-translate-anchor":new We(lt.paint_line["line-translate-anchor"]),"line-width":new Ue(lt.paint_line["line-width"]),"line-gap-width":new Ue(lt.paint_line["line-gap-width"]),"line-offset":new Ue(lt.paint_line["line-offset"]),"line-blur":new Ue(lt.paint_line["line-blur"]),"line-dasharray":new Dt(lt.paint_line["line-dasharray"]),"line-pattern":new Dt(lt.paint_line["line-pattern"]),"line-gradient":new Lt(lt.paint_line["line-gradient"]),"line-trim-offset":new We(lt.paint_line["line-trim-offset"])}),layout:lg};const Nf=new class extends Ue{possiblyEvaluate(s,i){return i=new Ae(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,zoomHistory:i.zoomHistory,transition:i.transition}),super.possiblyEvaluate(s,i)}evaluate(s,i,a,u){return i=mt({},i,{zoom:Math.floor(i.zoom)}),super.evaluate(s,i,a,u)}}($f.paint.properties["line-width"].specification);function Mf(s,i){return i>0?i+2*s:s}Nf.useIntegerZoom=!0;const cg=It([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ug=It([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),dg=It([{name:"a_projected_pos",components:4,type:"Float32"}],4);It([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const pg=It([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),fg=It([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);It([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const If=It([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),hg=It([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);It([{name:"triangle",components:3,type:"Uint16"}]),It([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),It([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),It([{type:"Float32",name:"offsetX"}]),It([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var ki=24;const Hr=128;function Od(s,i){const{expression:a}=i;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new Ae(s+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:u,interpolationType:m}=a;let y=0;for(;y<u.length&&u[y]<=s;)y++;y=Math.max(0,y-1);let w=y;for(;w<u.length&&u[w]<s+1;)w++;w=Math.min(u.length-1,w);const R=u[y],I=u[w];return a.kind==="composite"?{kind:"composite",minZoom:R,maxZoom:I,interpolationType:m}:{kind:"camera",minZoom:R,maxZoom:I,minSize:a.evaluate(new Ae(R)),maxSize:a.evaluate(new Ae(I)),interpolationType:m}}}function Nu(s,{uSize:i,uSizeT:a},{lowerSize:u,upperSize:m}){return s.kind==="source"?u/Hr:s.kind==="composite"?Rn(u/Hr,m/Hr,a):i}function Sa(s,i){let a=0,u=0;if(s.kind==="constant")u=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:m,minZoom:y,maxZoom:w}=s,R=m?it(ur.interpolationFactor(m,i,y,w),0,1):0;s.kind==="camera"?u=Rn(s.minSize,s.maxSize,R):a=R}return{uSizeT:a,uSize:u}}var mg=Object.freeze({__proto__:null,getSizeData:Od,evaluateSizeForFeature:Nu,evaluateSizeForZoom:Sa,SIZE_PACK_FACTOR:Hr});function gg(s,i,a){return s.sections.forEach(u=>{u.text=function(m,y,w){const R=y.layout.get("text-transform").evaluate(w,{});return R==="uppercase"?m=m.toLocaleUpperCase():R==="lowercase"&&(m=m.toLocaleLowerCase()),Le.applyArabicShaping&&(m=Le.applyArabicShaping(m)),m}(u.text,i,a)}),s}const Yl={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function _g(s){return s==="\uFE36"||s==="\uFE48"||s==="\uFE38"||s==="\uFE44"||s==="\uFE42"||s==="\uFE3E"||s==="\uFE3C"||s==="\uFE3A"||s==="\uFE18"||s==="\uFE40"||s==="\uFE10"||s==="\uFE13"||s==="\uFE14"||s==="\uFF40"||s==="\uFFE3"||s==="\uFE11"||s==="\uFE12"}function vg(s){return s==="\uFE35"||s==="\uFE47"||s==="\uFE37"||s==="\uFE43"||s==="\uFE41"||s==="\uFE3D"||s==="\uFE3B"||s==="\uFE39"||s==="\uFE17"||s==="\uFE3F"}var Xl=qn,Lf=function(s,i,a,u,m){var y,w,R=8*m-u-1,I=(1<<R)-1,D=I>>1,j=-7,q=a?m-1:0,K=a?-1:1,J=s[i+q];for(q+=K,y=J&(1<<-j)-1,J>>=-j,j+=R;j>0;y=256*y+s[i+q],q+=K,j-=8);for(w=y&(1<<-j)-1,y>>=-j,j+=u;j>0;w=256*w+s[i+q],q+=K,j-=8);if(y===0)y=1-D;else{if(y===I)return w?NaN:1/0*(J?-1:1);w+=Math.pow(2,u),y-=D}return(J?-1:1)*w*Math.pow(2,y-u)},Of=function(s,i,a,u,m,y){var w,R,I,D=8*y-m-1,j=(1<<D)-1,q=j>>1,K=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,J=u?0:y-1,Q=u?1:-1,ne=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(R=isNaN(i)?1:0,w=j):(w=Math.floor(Math.log(i)/Math.LN2),i*(I=Math.pow(2,-w))<1&&(w--,I*=2),(i+=w+q>=1?K/I:K*Math.pow(2,1-q))*I>=2&&(w++,I/=2),w+q>=j?(R=0,w=j):w+q>=1?(R=(i*I-1)*Math.pow(2,m),w+=q):(R=i*Math.pow(2,q-1)*Math.pow(2,m),w=0));m>=8;s[a+J]=255&R,J+=Q,R/=256,m-=8);for(w=w<<m|R,D+=m;D>0;s[a+J]=255&w,J+=Q,w/=256,D-=8);s[a+J-Q]|=128*ne};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function qn(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}qn.Varint=0,qn.Fixed64=1,qn.Bytes=2,qn.Fixed32=5;var Pd=4294967296,Pf=1/Pd,Df=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function fo(s){return s.type===qn.Bytes?s.readVarint()+s.pos:s.pos+1}function Ta(s,i,a){return a?4294967296*i+(s>>>0):4294967296*(i>>>0)+(s>>>0)}function Bf(s,i,a){var u=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));a.realloc(u);for(var m=a.pos-1;m>=s;m--)a.buf[m+u]=a.buf[m]}function yg(s,i){for(var a=0;a<s.length;a++)i.writeVarint(s[a])}function bg(s,i){for(var a=0;a<s.length;a++)i.writeSVarint(s[a])}function xg(s,i){for(var a=0;a<s.length;a++)i.writeFloat(s[a])}function wg(s,i){for(var a=0;a<s.length;a++)i.writeDouble(s[a])}function Eg(s,i){for(var a=0;a<s.length;a++)i.writeBoolean(s[a])}function Cg(s,i){for(var a=0;a<s.length;a++)i.writeFixed32(s[a])}function Sg(s,i){for(var a=0;a<s.length;a++)i.writeSFixed32(s[a])}function Tg(s,i){for(var a=0;a<s.length;a++)i.writeFixed64(s[a])}function Ag(s,i){for(var a=0;a<s.length;a++)i.writeSFixed64(s[a])}function Mu(s,i){return(s[i]|s[i+1]<<8|s[i+2]<<16)+16777216*s[i+3]}function Aa(s,i,a){s[a]=i,s[a+1]=i>>>8,s[a+2]=i>>>16,s[a+3]=i>>>24}function zf(s,i){return(s[i]|s[i+1]<<8|s[i+2]<<16)+(s[i+3]<<24)}function kg(s,i,a){i.glyphs=[],s===1&&a.readMessage(Rg,i)}function Rg(s,i,a){if(s===3){const{id:u,bitmap:m,width:y,height:w,left:R,top:I,advance:D}=a.readMessage($g,{});i.glyphs.push({id:u,bitmap:new po({width:y+6,height:w+6},m),metrics:{width:y,height:w,left:R,top:I,advance:D}})}else s===4?i.ascender=a.readSVarint():s===5&&(i.descender=a.readSVarint())}function $g(s,i,a){s===1?i.id=a.readVarint():s===2?i.bitmap=a.readBytes():s===3?i.width=a.readVarint():s===4?i.height=a.readVarint():s===5?i.left=a.readSVarint():s===6?i.top=a.readSVarint():s===7&&(i.advance=a.readVarint())}function Dd(s){let i=0,a=0;for(const w of s)i+=w.w*w.h,a=Math.max(a,w.w);s.sort((w,R)=>R.h-w.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),a),h:1/0}];let m=0,y=0;for(const w of s)for(let R=u.length-1;R>=0;R--){const I=u[R];if(!(w.w>I.w||w.h>I.h)){if(w.x=I.x,w.y=I.y,y=Math.max(y,w.y+w.h),m=Math.max(m,w.x+w.w),w.w===I.w&&w.h===I.h){const D=u.pop();R<u.length&&(u[R]=D)}else w.h===I.h?(I.x+=w.w,I.w-=w.w):w.w===I.w?(I.y+=w.h,I.h-=w.h):(u.push({x:I.x+w.w,y:I.y,w:I.w-w.w,h:w.h}),I.y+=w.h,I.h-=w.h);break}}return{w:m,h:y,fill:i/(m*y)||0}}qn.prototype={destroy:function(){this.buf=null},readFields:function(s,i,a){for(a=a||this.length;this.pos<a;){var u=this.readVarint(),m=u>>3,y=this.pos;this.type=7&u,s(m,i,this),this.pos===y&&this.skip(u)}return i},readMessage:function(s,i){return this.readFields(s,i,this.readVarint()+this.pos)},readFixed32:function(){var s=Mu(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=zf(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=Mu(this.buf,this.pos)+Mu(this.buf,this.pos+4)*Pd;return this.pos+=8,s},readSFixed64:function(){var s=Mu(this.buf,this.pos)+zf(this.buf,this.pos+4)*Pd;return this.pos+=8,s},readFloat:function(){var s=Lf(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=Lf(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var i,a,u=this.buf;return i=127&(a=u[this.pos++]),a<128?i:(i|=(127&(a=u[this.pos++]))<<7,a<128?i:(i|=(127&(a=u[this.pos++]))<<14,a<128?i:(i|=(127&(a=u[this.pos++]))<<21,a<128?i:function(m,y,w){var R,I,D=w.buf;if(R=(112&(I=D[w.pos++]))>>4,I<128||(R|=(127&(I=D[w.pos++]))<<3,I<128)||(R|=(127&(I=D[w.pos++]))<<10,I<128)||(R|=(127&(I=D[w.pos++]))<<17,I<128)||(R|=(127&(I=D[w.pos++]))<<24,I<128)||(R|=(1&(I=D[w.pos++]))<<31,I<128))return Ta(m,R,y);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(a=u[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var s=this.readVarint()+this.pos,i=this.pos;return this.pos=s,s-i>=12&&Df?function(a,u,m){return Df.decode(a.subarray(u,m))}(this.buf,i,s):function(a,u,m){for(var y="",w=u;w<m;){var R,I,D,j=a[w],q=null,K=j>239?4:j>223?3:j>191?2:1;if(w+K>m)break;K===1?j<128&&(q=j):K===2?(192&(R=a[w+1]))==128&&(q=(31&j)<<6|63&R)<=127&&(q=null):K===3?(I=a[w+2],(192&(R=a[w+1]))==128&&(192&I)==128&&((q=(15&j)<<12|(63&R)<<6|63&I)<=2047||q>=55296&&q<=57343)&&(q=null)):K===4&&(I=a[w+2],D=a[w+3],(192&(R=a[w+1]))==128&&(192&I)==128&&(192&D)==128&&((q=(15&j)<<18|(63&R)<<12|(63&I)<<6|63&D)<=65535||q>=1114112)&&(q=null)),q===null?(q=65533,K=1):q>65535&&(q-=65536,y+=String.fromCharCode(q>>>10&1023|55296),q=56320|1023&q),y+=String.fromCharCode(q),w+=K}return y}(this.buf,i,s)},readBytes:function(){var s=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,s);return this.pos=s,i},readPackedVarint:function(s,i){if(this.type!==qn.Bytes)return s.push(this.readVarint(i));var a=fo(this);for(s=s||[];this.pos<a;)s.push(this.readVarint(i));return s},readPackedSVarint:function(s){if(this.type!==qn.Bytes)return s.push(this.readSVarint());var i=fo(this);for(s=s||[];this.pos<i;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==qn.Bytes)return s.push(this.readBoolean());var i=fo(this);for(s=s||[];this.pos<i;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==qn.Bytes)return s.push(this.readFloat());var i=fo(this);for(s=s||[];this.pos<i;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==qn.Bytes)return s.push(this.readDouble());var i=fo(this);for(s=s||[];this.pos<i;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==qn.Bytes)return s.push(this.readFixed32());var i=fo(this);for(s=s||[];this.pos<i;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==qn.Bytes)return s.push(this.readSFixed32());var i=fo(this);for(s=s||[];this.pos<i;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==qn.Bytes)return s.push(this.readFixed64());var i=fo(this);for(s=s||[];this.pos<i;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==qn.Bytes)return s.push(this.readSFixed64());var i=fo(this);for(s=s||[];this.pos<i;)s.push(this.readSFixed64());return s},skip:function(s){var i=7&s;if(i===qn.Varint)for(;this.buf[this.pos++]>127;);else if(i===qn.Bytes)this.pos=this.readVarint()+this.pos;else if(i===qn.Fixed32)this.pos+=4;else{if(i!==qn.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(s,i){this.writeVarint(s<<3|i)},realloc:function(s){for(var i=this.length||16;i<this.pos+s;)i*=2;if(i!==this.length){var a=new Uint8Array(i);a.set(this.buf),this.buf=a,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),Aa(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),Aa(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),Aa(this.buf,-1&s,this.pos),Aa(this.buf,Math.floor(s*Pf),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),Aa(this.buf,-1&s,this.pos),Aa(this.buf,Math.floor(s*Pf),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(i,a){var u,m;if(i>=0?(u=i%4294967296|0,m=i/4294967296|0):(m=~(-i/4294967296),4294967295^(u=~(-i%4294967296))?u=u+1|0:(u=0,m=m+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),function(y,w,R){R.buf[R.pos++]=127&y|128,y>>>=7,R.buf[R.pos++]=127&y|128,y>>>=7,R.buf[R.pos++]=127&y|128,y>>>=7,R.buf[R.pos++]=127&y|128,R.buf[R.pos]=127&(y>>>=7)}(u,0,a),function(y,w){var R=(7&y)<<4;w.buf[w.pos++]|=R|((y>>>=3)?128:0),y&&(w.buf[w.pos++]=127&y|((y>>>=7)?128:0),y&&(w.buf[w.pos++]=127&y|((y>>>=7)?128:0),y&&(w.buf[w.pos++]=127&y|((y>>>=7)?128:0),y&&(w.buf[w.pos++]=127&y|((y>>>=7)?128:0),y&&(w.buf[w.pos++]=127&y)))))}(m,a)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(Boolean(s))},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var i=this.pos;this.pos=function(u,m,y){for(var w,R,I=0;I<m.length;I++){if((w=m.charCodeAt(I))>55295&&w<57344){if(!R){w>56319||I+1===m.length?(u[y++]=239,u[y++]=191,u[y++]=189):R=w;continue}if(w<56320){u[y++]=239,u[y++]=191,u[y++]=189,R=w;continue}w=R-55296<<10|w-56320|65536,R=null}else R&&(u[y++]=239,u[y++]=191,u[y++]=189,R=null);w<128?u[y++]=w:(w<2048?u[y++]=w>>6|192:(w<65536?u[y++]=w>>12|224:(u[y++]=w>>18|240,u[y++]=w>>12&63|128),u[y++]=w>>6&63|128),u[y++]=63&w|128)}return y}(this.buf,s,this.pos);var a=this.pos-i;a>=128&&Bf(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeFloat:function(s){this.realloc(4),Of(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),Of(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var i=s.length;this.writeVarint(i),this.realloc(i);for(var a=0;a<i;a++)this.buf[this.pos++]=s[a]},writeRawMessage:function(s,i){this.pos++;var a=this.pos;s(i,this);var u=this.pos-a;u>=128&&Bf(a,u,this),this.pos=a-1,this.writeVarint(u),this.pos+=u},writeMessage:function(s,i,a){this.writeTag(s,qn.Bytes),this.writeRawMessage(i,a)},writePackedVarint:function(s,i){i.length&&this.writeMessage(s,yg,i)},writePackedSVarint:function(s,i){i.length&&this.writeMessage(s,bg,i)},writePackedBoolean:function(s,i){i.length&&this.writeMessage(s,Eg,i)},writePackedFloat:function(s,i){i.length&&this.writeMessage(s,xg,i)},writePackedDouble:function(s,i){i.length&&this.writeMessage(s,wg,i)},writePackedFixed32:function(s,i){i.length&&this.writeMessage(s,Cg,i)},writePackedSFixed32:function(s,i){i.length&&this.writeMessage(s,Sg,i)},writePackedFixed64:function(s,i){i.length&&this.writeMessage(s,Tg,i)},writePackedSFixed64:function(s,i){i.length&&this.writeMessage(s,Ag,i)},writeBytesField:function(s,i){this.writeTag(s,qn.Bytes),this.writeBytes(i)},writeFixed32Field:function(s,i){this.writeTag(s,qn.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(s,i){this.writeTag(s,qn.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(s,i){this.writeTag(s,qn.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(s,i){this.writeTag(s,qn.Fixed64),this.writeSFixed64(i)},writeVarintField:function(s,i){this.writeTag(s,qn.Varint),this.writeVarint(i)},writeSVarintField:function(s,i){this.writeTag(s,qn.Varint),this.writeSVarint(i)},writeStringField:function(s,i){this.writeTag(s,qn.Bytes),this.writeString(i)},writeFloatField:function(s,i){this.writeTag(s,qn.Fixed32),this.writeFloat(i)},writeDoubleField:function(s,i){this.writeTag(s,qn.Fixed64),this.writeDouble(i)},writeBooleanField:function(s,i){this.writeVarintField(s,Boolean(i))}};class Bd{constructor(i,{pixelRatio:a,version:u,stretchX:m,stretchY:y,content:w}){this.paddedRect=i,this.pixelRatio=a,this.stretchX=m,this.stretchY=y,this.content=w,this.version=u}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Ff{constructor(i,a){const u={},m={};this.haveRenderCallbacks=[];const y=[];this.addImages(i,u,y),this.addImages(a,m,y);const{w,h:R}=Dd(y),I=new Ki({width:w||1,height:R||1});for(const D in i){const j=i[D],q=u[D].paddedRect;Ki.copy(j.data,I,{x:0,y:0},{x:q.x+1,y:q.y+1},j.data)}for(const D in a){const j=a[D],q=m[D].paddedRect,K=q.x+1,J=q.y+1,Q=j.data.width,ne=j.data.height;Ki.copy(j.data,I,{x:0,y:0},{x:K,y:J},j.data),Ki.copy(j.data,I,{x:0,y:ne-1},{x:K,y:J-1},{width:Q,height:1}),Ki.copy(j.data,I,{x:0,y:0},{x:K,y:J+ne},{width:Q,height:1}),Ki.copy(j.data,I,{x:Q-1,y:0},{x:K-1,y:J},{width:1,height:ne}),Ki.copy(j.data,I,{x:0,y:0},{x:K+Q,y:J},{width:1,height:ne})}this.image=I,this.iconPositions=u,this.patternPositions=m}addImages(i,a,u){for(const m in i){const y=i[m],w={x:0,y:0,w:y.data.width+2,h:y.data.height+2};u.push(w),a[m]=new Bd(w,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(i,a){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(u=>i.hasImage(u)),i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const u in i.updatedImages)this.patchUpdatedImage(this.iconPositions[u],i.getImage(u),a),this.patchUpdatedImage(this.patternPositions[u],i.getImage(u),a)}patchUpdatedImage(i,a,u){if(!i||!a||i.version===a.version)return;i.version=a.version;const[m,y]=i.tl;u.update(a.data,void 0,{x:m,y})}}Gt(Bd,"ImagePosition"),Gt(Ff,"ImageAtlas");const rr={horizontal:1,vertical:2,horizontalOnly:3};class Jl{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(i,a){const u=new Jl;return u.scale=i||1,u.fontStack=a,u}static forImage(i){const a=new Jl;return a.imageName=i,a}}class ka{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,a){const u=new ka;for(let m=0;m<i.sections.length;m++){const y=i.sections[m];y.image?u.addImageSection(y):u.addTextSection(y,a)}return u}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSections(){return this.sections}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(i){this.text=function(a,u){let m="";for(let y=0;y<a.length;y++){const w=a.charCodeAt(y+1)||null,R=a.charCodeAt(y-1)||null;m+=!u&&(w&&F(w)&&!Yl[a[y+1]]||R&&F(R)&&!Yl[a[y-1]])||!Yl[a[y]]?a[y]:Yl[a[y]]}return m}(this.text,i)}trim(){let i=0;for(let u=0;u<this.text.length&&Iu[this.text.charCodeAt(u)];u++)i++;let a=this.text.length;for(let u=this.text.length-1;u>=0&&u>=i&&Iu[this.text.charCodeAt(u)];u--)a--;this.text=this.text.substring(i,a),this.sectionIndex=this.sectionIndex.slice(i,a)}substring(i,a){const u=new ka;return u.text=this.text.substring(i,a),u.sectionIndex=this.sectionIndex.slice(i,a),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,a)=>Math.max(i,this.sections[a].scale),0)}addTextSection(i,a){this.text+=i.text,this.sections.push(Jl.forText(i.scale,i.fontStack||a));const u=this.sections.length-1;for(let m=0;m<i.text.length;++m)this.sectionIndex.push(u)}addImageSection(i){const a=i.image?i.image.name:"";if(a.length===0)return void Ht("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push(Jl.forImage(a)),this.sectionIndex.push(this.sections.length-1)):Ht("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function zd(s,i,a,u,m,y,w,R,I,D,j,q,K,J,Q){const ne=ka.fromFeature(s,m);q===rr.vertical&&ne.verticalizePunctuation(K);let ue=[];const Te=function(Me,Qe,Ye,ct,Tt,ot){if(!Me)return[];const ft=[],vt=function(Pt,nn,Ft,Wt,Bt,sn){let _n=0;for(let bn=0;bn<Pt.length();bn++){const kn=Pt.getSection(bn);_n+=Vf(Pt.getCharCode(bn),kn,Wt,Bt,nn,sn)}return _n/Math.max(1,Math.ceil(_n/Ft))}(Me,Qe,Ye,ct,Tt,ot),wt=Me.text.indexOf("\u200B")>=0;let At=0;for(let Pt=0;Pt<Me.length();Pt++){const nn=Me.getSection(Pt),Ft=Me.getCharCode(Pt);if(Iu[Ft]||(At+=Vf(Ft,nn,ct,Tt,Qe,ot)),Pt<Me.length()-1){const Wt=!((st=Ft)<11904||!(pa(st)||da(st)||ha(st)||lu(st)||ru(st)||Al(st)||nu(st)||gs(st)||ou(st)||$l(st)||Rl(st)||l(st)||ua(st)||kl(st)||tu(st)||iu(st)||_s(st)||cu(st)||su(st)||fa(st)));(Ng[Ft]||Wt||nn.imageName)&&ft.push(jf(Pt+1,At,vt,ft,Mg(Ft,Me.getCharCode(Pt+1),Wt&&wt),!1))}}var st;return Gf(jf(Me.length(),At,vt,ft,0,!0))}(ne,D,y,i,u,J),{processBidirectionalText:Oe,processStyledBidirectionalText:Se}=Le;if(Oe&&ne.sections.length===1){const Me=Oe(ne.toString(),Te);for(const Qe of Me){const Ye=new ka;Ye.text=Qe,Ye.sections=ne.sections;for(let ct=0;ct<Qe.length;ct++)Ye.sectionIndex.push(0);ue.push(Ye)}}else if(Se){const Me=Se(ne.text,ne.sectionIndex,Te);for(const Qe of Me){const Ye=new ka;Ye.text=Qe[0],Ye.sectionIndex=Qe[1],Ye.sections=ne.sections,ue.push(Ye)}}else ue=function(Me,Qe){const Ye=[],ct=Me.text;let Tt=0;for(const ot of Qe)Ye.push(Me.substring(Tt,ot)),Tt=ot;return Tt<ct.length&&Ye.push(Me.substring(Tt,ct.length)),Ye}(ne,Te);const $e=[],Be={positionedLines:$e,text:ne.toString(),top:j[1],bottom:j[1],left:j[0],right:j[0],writingMode:q,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Me,Qe,Ye,ct,Tt,ot,ft,vt,wt,At,st,Pt){let nn=0,Ft=0,Wt=0;const Bt=vt==="right"?1:vt==="left"?0:.5;let sn=!1;for(const wn of Tt){const An=wn.getSections();for(const Un of An){if(Un.imageName)continue;const Zn=Qe[Un.fontStack];if(Zn&&(sn=Zn.ascender!==void 0&&Zn.descender!==void 0,!sn))break}if(!sn)break}let _n=0;for(const wn of Tt){wn.trim();const An=wn.getMaxScale(),Un=(An-1)*ki,Zn={positionedGlyphs:[],lineOffset:0};Me.positionedLines[_n]=Zn;const Kn=Zn.positionedGlyphs;let Yn=0;if(!wn.length()){Ft+=ot,++_n;continue}let Qn=0,ni=0;for(let Dn=0;Dn<wn.length();Dn++){const fi=wn.getSection(Dn),li=wn.getSectionIndex(Dn),$n=wn.getCharCode(Dn);let ti=fi.scale,mi=null,jn=null,ri=null,Mi=ki,xi=0;const wi=!(wt===rr.horizontal||!st&&!M($n)||st&&(Iu[$n]||(bn=$n,Qc(bn)||hs(bn)||eu(bn)||Nl(bn)||_(bn))));if(fi.imageName){const Ui=ct[fi.imageName];if(!Ui)continue;ri=fi.imageName,Me.iconsInText=Me.iconsInText||!0,jn=Ui.paddedRect;const Ei=Ui.displaySize;ti=ti*ki/Pt,mi={width:Ei[0],height:Ei[1],left:1,top:-3,advance:wi?Ei[1]:Ei[0],localGlyph:!1},xi=sn?-mi.height*ti:An*ki-17-Ei[1]*ti,Mi=mi.advance;const _o=(wi?Ei[0]:Ei[1])*ti-ki*An;_o>0&&_o>Yn&&(Yn=_o)}else{const Ui=Ye[fi.fontStack];if(!Ui)continue;Ui[$n]&&(jn=Ui[$n]);const Ei=Qe[fi.fontStack];if(!Ei)continue;const _o=Ei.glyphs[$n];if(!_o)continue;if(mi=_o.metrics,Mi=$n!==8203?ki:0,sn){const Da=Ei.ascender!==void 0?Math.abs(Ei.ascender):0,uc=Ei.descender!==void 0?Math.abs(Ei.descender):0,dc=(Da+uc)*ti;Qn<dc&&(Qn=dc,ni=(Da-uc)/2*ti),xi=-Da*ti}else xi=(An-ti)*ki-17}wi?(Me.verticalizable=!0,Kn.push({glyph:$n,imageName:ri,x:nn,y:Ft+xi,vertical:wi,scale:ti,localGlyph:mi.localGlyph,fontStack:fi.fontStack,sectionIndex:li,metrics:mi,rect:jn}),nn+=Mi*ti+At):(Kn.push({glyph:$n,imageName:ri,x:nn,y:Ft+xi,vertical:wi,scale:ti,localGlyph:mi.localGlyph,fontStack:fi.fontStack,sectionIndex:li,metrics:mi,rect:jn}),nn+=mi.advance*ti+At)}Kn.length!==0&&(Wt=Math.max(nn-At,Wt),sn?Hf(Kn,Bt,Yn,ni,ot*An/2):Hf(Kn,Bt,Yn,0,ot/2)),nn=0;const bi=ot*An+Yn;Zn.lineOffset=Math.max(Yn,Un),Ft+=bi,++_n}var bn;const kn=Ft,{horizontalAlign:mn,verticalAlign:Jn}=Fd(ft);(function(wn,An,Un,Zn,Kn,Yn){const Qn=(An-Un)*Kn,ni=-Yn*Zn;for(const bi of wn)for(const Dn of bi.positionedGlyphs)Dn.x+=Qn,Dn.y+=ni})(Me.positionedLines,Bt,mn,Jn,Wt,kn),Me.top+=-Jn*kn,Me.bottom=Me.top+kn,Me.left+=-mn*Wt,Me.right=Me.left+Wt,Me.hasBaseline=sn}(Be,i,a,u,ue,w,R,I,q,D,K,Q),!function(Me){for(const Qe of Me)if(Qe.positionedGlyphs.length!==0)return!1;return!0}($e)&&Be}const Iu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ng={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Vf(s,i,a,u,m,y){if(i.imageName){const w=u[i.imageName];return w?w.displaySize[0]*i.scale*ki/y+m:0}{const w=a[i.fontStack],R=w&&w.glyphs[s];return R?R.metrics.advance*i.scale+m:0}}function Uf(s,i,a,u){const m=Math.pow(s-i,2);return u?s<i?m/2:2*m:m+Math.abs(a)*a}function Mg(s,i,a){let u=0;return s===10&&(u-=1e4),a&&(u+=150),s!==40&&s!==65288||(u+=50),i!==41&&i!==65289||(u+=50),u}function jf(s,i,a,u,m,y){let w=null,R=Uf(i,a,m,y);for(const I of u){const D=Uf(i-I.x,a,m,y)+I.badness;D<=R&&(w=I,R=D)}return{index:s,x:i,priorBreak:w,badness:R}}function Gf(s){return s?Gf(s.priorBreak).concat(s.index):[]}function Fd(s){let i=.5,a=.5;switch(s){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:i,verticalAlign:a}}function Hf(s,i,a,u,m){if(!(i||a||u||m))return;const y=s.length-1,w=s[y],R=(w.x+w.metrics.advance*w.scale)*i;for(let I=0;I<=y;I++)s[I].x-=R,s[I].y+=a+u+m}function Ig(s,i,a){const{horizontalAlign:u,verticalAlign:m}=Fd(a),y=i[0]-s.displaySize[0]*u,w=i[1]-s.displaySize[1]*m;return{image:s,top:w,bottom:w+s.displaySize[1],left:y,right:y+s.displaySize[0]}}function qf(s,i,a,u,m,y){const w=s.image;let R;if(w.content){const ue=w.content,Te=w.pixelRatio||1;R=[ue[0]/Te,ue[1]/Te,w.displaySize[0]-ue[2]/Te,w.displaySize[1]-ue[3]/Te]}const I=i.left*y,D=i.right*y;let j,q,K,J;a==="width"||a==="both"?(J=m[0]+I-u[3],q=m[0]+D+u[1]):(J=m[0]+(I+D-w.displaySize[0])/2,q=J+w.displaySize[0]);const Q=i.top*y,ne=i.bottom*y;return a==="height"||a==="both"?(j=m[1]+Q-u[0],K=m[1]+ne+u[2]):(j=m[1]+(Q+ne-w.displaySize[1])/2,K=j+w.displaySize[1]),{image:w,top:j,right:q,bottom:K,left:J,collisionPadding:R}}class ho extends Z{constructor(i,a,u,m,y){super(i,a),this.angle=m,this.z=u,y!==void 0&&(this.segment=y)}clone(){return new ho(this.x,this.y,this.z,this.angle,this.segment)}}function Kf(s,i,a,u,m){if(i.segment===void 0)return!0;let y=i,w=i.segment+1,R=0;for(;R>-a/2;){if(w--,w<0)return!1;R-=s[w].dist(y),y=s[w]}R+=s[w].dist(s[w+1]),w++;const I=[];let D=0;for(;R<a/2;){const j=s[w],q=s[w+1];if(!q)return!1;let K=s[w-1].angleTo(j)-j.angleTo(q);for(K=Math.abs((K+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:R,angleDelta:K}),D+=K;R-I[0].distance>u;)D-=I.shift().angleDelta;if(D>m)return!1;w++,R+=j.dist(q)}return!0}function Wf(s){let i=0;for(let a=0;a<s.length-1;a++)i+=s[a].dist(s[a+1]);return i}function Zf(s,i,a){return s?.6*i*a:0}function Yf(s,i){return Math.max(s?s.right-s.left:0,i?i.right-i.left:0)}function Lg(s,i,a,u,m,y){const w=Zf(a,m,y),R=Yf(a,u)*y;let I=0;const D=Wf(s)/2;for(let j=0;j<s.length-1;j++){const q=s[j],K=s[j+1],J=q.dist(K);if(I+J>D){const Q=(D-I)/J,ne=Rn(q.x,K.x,Q),ue=Rn(q.y,K.y,Q),Te=new ho(ne,ue,0,K.angleTo(q),j);return!w||Kf(s,Te,R,w,i)?Te:void 0}I+=J}}function Og(s,i,a,u,m,y,w,R,I){const D=Zf(u,y,w),j=Yf(u,m),q=j*w,K=s[0].x===0||s[0].x===I||s[0].y===0||s[0].y===I;return i-q<i/4&&(i=q+i/4),Xf(s,K?i/2*R%i:(j/2+2*y)*w*R%i,i,D,a,q,K,!1,I)}function Xf(s,i,a,u,m,y,w,R,I){const D=y/2,j=Wf(s);let q=0,K=i-a,J=[];for(let Q=0;Q<s.length-1;Q++){const ne=s[Q],ue=s[Q+1],Te=ne.dist(ue),Oe=ue.angleTo(ne);for(;K+a<q+Te;){K+=a;const Se=(K-q)/Te,$e=Rn(ne.x,ue.x,Se),Be=Rn(ne.y,ue.y,Se);if($e>=0&&$e<I&&Be>=0&&Be<I&&K-D>=0&&K+D<=j){const Me=new ho($e,Be,0,Oe,Q);Me._round(),u&&!Kf(s,Me,y,u,m)||J.push(Me)}}q+=Te}return R||J.length||w||(J=Xf(s,q/2,a,u,m,y,w,!0,I)),J}function Jf(s,i,a,u,m){const y=[];for(let w=0;w<s.length;w++){const R=s[w];let I;for(let D=0;D<R.length-1;D++){let j=R[D],q=R[D+1];j.x<i&&q.x<i||(j.x<i?j=new Z(i,j.y+(i-j.x)/(q.x-j.x)*(q.y-j.y))._round():q.x<i&&(q=new Z(i,j.y+(i-j.x)/(q.x-j.x)*(q.y-j.y))._round()),j.y<a&&q.y<a||(j.y<a?j=new Z(j.x+(a-j.y)/(q.y-j.y)*(q.x-j.x),a)._round():q.y<a&&(q=new Z(j.x+(a-j.y)/(q.y-j.y)*(q.x-j.x),a)._round()),j.x>=u&&q.x>=u||(j.x>=u?j=new Z(u,j.y+(u-j.x)/(q.x-j.x)*(q.y-j.y))._round():q.x>=u&&(q=new Z(u,j.y+(u-j.x)/(q.x-j.x)*(q.y-j.y))._round()),j.y>=m&&q.y>=m||(j.y>=m?j=new Z(j.x+(m-j.y)/(q.y-j.y)*(q.x-j.x),m)._round():q.y>=m&&(q=new Z(j.x+(m-j.y)/(q.y-j.y)*(q.x-j.x),m)._round()),I&&j.equals(I[I.length-1])||(I=[j],y.push(I)),I.push(q)))))}}return y}Gt(ho,"Anchor");const Ql=1e20;function Qf(s,i,a,u,m,y,w,R,I){for(let D=i;D<i+u;D++)eh(s,a*y+D,y,m,w,R,I);for(let D=a;D<a+m;D++)eh(s,D*y+i,1,u,w,R,I)}function eh(s,i,a,u,m,y,w){y[0]=0,w[0]=-Ql,w[1]=Ql,m[0]=s[i];for(let R=1,I=0,D=0;R<u;R++){m[R]=s[i+R*a];const j=R*R;do{const q=y[I];D=(m[R]-m[q]+j-q*q)/(R-q)/2}while(D<=w[I]&&--I>-1);I++,y[I]=R,w[I]=D,w[I+1]=Ql}for(let R=0,I=0;R<u;R++){for(;w[I+1]<R;)I++;const D=y[I],j=R-D;s[i+R*a]=m[D]+j*j}}const Vd={none:0,ideographs:1,all:2};class Ra{constructor(i,a,u){this.requestManager=i,this.localGlyphMode=a,this.localFontFamily=u,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(i){this.url=i}getGlyphs(i,a){const u=[];for(const m in i)for(const y of i[m])u.push({stack:m,id:y});ze(u,({stack:m,id:y},w)=>{let R=this.entries[m];R||(R=this.entries[m]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let I=R.glyphs[y];if(I!==void 0)return void w(null,{stack:m,id:y,glyph:I});if(I=this._tinySDF(R,m,y),I)return R.glyphs[y]=I,void w(null,{stack:m,id:y,glyph:I});const D=Math.floor(y/256);if(256*D>65535)return void w(new Error("glyphs > 65535 not supported"));if(R.ranges[D])return void w(null,{stack:m,id:y,glyph:I});let j=R.requests[D];j||(j=R.requests[D]=[],Ra.loadGlyphRange(m,D,this.url,this.requestManager,(q,K)=>{if(K){R.ascender=K.ascender,R.descender=K.descender;for(const J in K.glyphs)this._doesCharSupportLocalGlyph(+J)||(R.glyphs[+J]=K.glyphs[+J]);R.ranges[D]=!0}for(const J of j)J(q,K);delete R.requests[D]})),j.push((q,K)=>{q?w(q):K&&w(null,{stack:m,id:y,glyph:K.glyphs[y]||null})})},(m,y)=>{if(m)a(m);else if(y){const w={};for(const{stack:R,id:I,glyph:D}of y)w[R]===void 0&&(w[R]={}),w[R].glyphs===void 0&&(w[R].glyphs={}),w[R].glyphs[I]=D&&{id:D.id,bitmap:D.bitmap.clone(),metrics:D.metrics},w[R].ascender=this.entries[R].ascender,w[R].descender=this.entries[R].descender;a(null,w)}})}_doesCharSupportLocalGlyph(i){return this.localGlyphMode!==Vd.none&&(this.localGlyphMode===Vd.all?!!this.localFontFamily:!!this.localFontFamily&&($l(i)||au(i)||ua(i)||_s(i)||gs(i)))}_tinySDF(i,a,u){const m=this.localFontFamily;if(!m||!this._doesCharSupportLocalGlyph(u))return;let y=i.tinySDF;if(!y){let ne="400";/bold/i.test(a)?ne="900":/medium/i.test(a)?ne="500":/light/i.test(a)&&(ne="200"),y=i.tinySDF=new Ra.TinySDF({fontFamily:m,fontWeight:ne,fontSize:48,buffer:6,radius:16}),y.fontWeight=ne}if(this.localGlyphs[y.fontWeight][u])return this.localGlyphs[y.fontWeight][u];const w=String.fromCharCode(u),{data:R,width:I,height:D,glyphWidth:j,glyphHeight:q,glyphLeft:K,glyphTop:J,glyphAdvance:Q}=y.draw(w);return this.localGlyphs[y.fontWeight][u]={id:u,bitmap:new po({width:I,height:D},R),metrics:{width:j/2,height:q/2,left:K/2,top:J/2-27,advance:Q/2,localGlyph:!0}}}}function th(s,i,a,u){const m=[],y=s.image,w=y.pixelRatio,R=y.paddedRect.w-2,I=y.paddedRect.h-2,D=s.right-s.left,j=s.bottom-s.top,q=y.stretchX||[[0,R]],K=y.stretchY||[[0,I]],J=(ot,ft)=>ot+ft[1]-ft[0],Q=q.reduce(J,0),ne=K.reduce(J,0),ue=R-Q,Te=I-ne;let Oe=0,Se=Q,$e=0,Be=ne,Me=0,Qe=ue,Ye=0,ct=Te;if(y.content&&u){const ot=y.content;Oe=Lu(q,0,ot[0]),$e=Lu(K,0,ot[1]),Se=Lu(q,ot[0],ot[2]),Be=Lu(K,ot[1],ot[3]),Me=ot[0]-Oe,Ye=ot[1]-$e,Qe=ot[2]-ot[0]-Se,ct=ot[3]-ot[1]-Be}const Tt=(ot,ft,vt,wt)=>{const At=Ou(ot.stretch-Oe,Se,D,s.left),st=Pu(ot.fixed-Me,Qe,ot.stretch,Q),Pt=Ou(ft.stretch-$e,Be,j,s.top),nn=Pu(ft.fixed-Ye,ct,ft.stretch,ne),Ft=Ou(vt.stretch-Oe,Se,D,s.left),Wt=Pu(vt.fixed-Me,Qe,vt.stretch,Q),Bt=Ou(wt.stretch-$e,Be,j,s.top),sn=Pu(wt.fixed-Ye,ct,wt.stretch,ne),_n=new Z(At,Pt),bn=new Z(Ft,Pt),kn=new Z(Ft,Bt),mn=new Z(At,Bt),Jn=new Z(st/w,nn/w),wn=new Z(Wt/w,sn/w),An=i*Math.PI/180;if(An){const Kn=Math.sin(An),Yn=Math.cos(An),Qn=[Yn,-Kn,Kn,Yn];_n._matMult(Qn),bn._matMult(Qn),mn._matMult(Qn),kn._matMult(Qn)}const Un=ot.stretch+ot.fixed,Zn=ft.stretch+ft.fixed;return{tl:_n,tr:bn,bl:mn,br:kn,tex:{x:y.paddedRect.x+1+Un,y:y.paddedRect.y+1+Zn,w:vt.stretch+vt.fixed-Un,h:wt.stretch+wt.fixed-Zn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Jn,pixelOffsetBR:wn,minFontScaleX:Qe/w/D,minFontScaleY:ct/w/j,isSDF:a}};if(u&&(y.stretchX||y.stretchY)){const ot=nh(q,ue,Q),ft=nh(K,Te,ne);for(let vt=0;vt<ot.length-1;vt++){const wt=ot[vt],At=ot[vt+1];for(let st=0;st<ft.length-1;st++)m.push(Tt(wt,ft[st],At,ft[st+1]))}}else m.push(Tt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:R+1},{fixed:0,stretch:I+1}));return m}function Lu(s,i,a){let u=0;for(const m of s)u+=Math.max(i,Math.min(a,m[1]))-Math.max(i,Math.min(a,m[0]));return u}function nh(s,i,a){const u=[{fixed:-1,stretch:0}];for(const[m,y]of s){const w=u[u.length-1];u.push({fixed:m-w.stretch,stretch:w.stretch}),u.push({fixed:m-w.stretch,stretch:w.stretch+(y-m)})}return u.push({fixed:i+1,stretch:a}),u}function Ou(s,i,a,u){return s/i*a+u}function Pu(s,i,a,u){return s-i*a/u}function Pg(s,i,a,u){const m=i+s.positionedLines[u].lineOffset;return u===0?a+m/2:a+(m+(i+s.positionedLines[u-1].lineOffset))/2}Ra.loadGlyphRange=function(s,i,a,u,m){const y=256*i,w=y+255,R=u.transformRequest(u.normalizeGlyphsURL(a).replace("{fontstack}",s).replace("{range}",`${y}-${w}`),yn.Glyphs);Li(R,(I,D)=>{if(I)m(I);else if(D){const j={},q=function(K){return new Xl(K).readFields(kg,{})}(D);for(const K of q.glyphs)j[K.id]=K;m(null,{glyphs:j,ascender:q.ascender,descender:q.descender})}})},Ra.TinySDF=class{constructor({fontSize:s=24,buffer:i=3,radius:a=8,cutoff:u=.25,fontFamily:m="sans-serif",fontWeight:y="normal",fontStyle:w="normal"}={}){this.buffer=i,this.cutoff=u,this.radius=a;const R=this.size=s+4*i,I=this._createCanvas(R),D=this.ctx=I.getContext("2d",{willReadFrequently:!0});D.font=`${w} ${y} ${s}px ${m}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(R*R),this.gridInner=new Float64Array(R*R),this.f=new Float64Array(R),this.z=new Float64Array(R+1),this.v=new Uint16Array(R)}_createCanvas(s){const i=document.createElement("canvas");return i.width=i.height=s,i}draw(s){const{width:i,actualBoundingBoxAscent:a,actualBoundingBoxDescent:u,actualBoundingBoxLeft:m,actualBoundingBoxRight:y}=this.ctx.measureText(s),w=Math.ceil(a),R=Math.min(this.size-this.buffer,Math.ceil(y-m)),I=Math.min(this.size-this.buffer,w+Math.ceil(u)),D=R+2*this.buffer,j=I+2*this.buffer,q=Math.max(D*j,0),K=new Uint8ClampedArray(q),J={data:K,width:D,height:j,glyphWidth:R,glyphHeight:I,glyphTop:w,glyphLeft:0,glyphAdvance:i};if(R===0||I===0)return J;const{ctx:Q,buffer:ne,gridInner:ue,gridOuter:Te}=this;Q.clearRect(ne,ne,R,I),Q.fillText(s,ne,ne+w);const Oe=Q.getImageData(ne,ne,R,I);Te.fill(Ql,0,q),ue.fill(0,0,q);for(let Se=0;Se<I;Se++)for(let $e=0;$e<R;$e++){const Be=Oe.data[4*(Se*R+$e)+3]/255;if(Be===0)continue;const Me=(Se+ne)*D+$e+ne;if(Be===1)Te[Me]=0,ue[Me]=Ql;else{const Qe=.5-Be;Te[Me]=Qe>0?Qe*Qe:0,ue[Me]=Qe<0?Qe*Qe:0}}Qf(Te,0,0,D,j,D,this.f,this.v,this.z),Qf(ue,ne,ne,R,I,D,this.f,this.v,this.z);for(let Se=0;Se<q;Se++){const $e=Math.sqrt(Te[Se])-Math.sqrt(ue[Se]);K[Se]=Math.round(255-255*($e/this.radius+this.cutoff))}return J}};class Dg{constructor(i=[],a=Bg){if(this.data=i,this.length=this.data.length,this.compare=a,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(i){this.data.push(i),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const i=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:a,compare:u}=this,m=a[i];for(;i>0;){const y=i-1>>1,w=a[y];if(u(m,w)>=0)break;a[i]=w,i=y}a[i]=m}_down(i){const{data:a,compare:u}=this,m=this.length>>1,y=a[i];for(;i<m;){let w=1+(i<<1),R=a[w];const I=w+1;if(I<this.length&&u(a[I],R)<0&&(w=I,R=a[I]),u(R,y)>=0)break;a[i]=R,i=w}a[i]=y}}function Bg(s,i){return s<i?-1:s>i?1:0}function zg(s,i=1,a=!1){let u=1/0,m=1/0,y=-1/0,w=-1/0;const R=s[0];for(let J=0;J<R.length;J++){const Q=R[J];(!J||Q.x<u)&&(u=Q.x),(!J||Q.y<m)&&(m=Q.y),(!J||Q.x>y)&&(y=Q.x),(!J||Q.y>w)&&(w=Q.y)}const I=Math.min(y-u,w-m);let D=I/2;const j=new Dg([],Fg);if(I===0)return new Z(u,m);for(let J=u;J<y;J+=I)for(let Q=m;Q<w;Q+=I)j.push(new $a(J+D,Q+D,D,s));let q=function(J){let Q=0,ne=0,ue=0;const Te=J[0];for(let Oe=0,Se=Te.length,$e=Se-1;Oe<Se;$e=Oe++){const Be=Te[Oe],Me=Te[$e],Qe=Be.x*Me.y-Me.x*Be.y;ne+=(Be.x+Me.x)*Qe,ue+=(Be.y+Me.y)*Qe,Q+=3*Qe}return new $a(ne/Q,ue/Q,0,J)}(s),K=j.length;for(;j.length;){const J=j.pop();(J.d>q.d||!q.d)&&(q=J,a&&console.log("found best %d after %d probes",Math.round(1e4*J.d)/1e4,K)),J.max-q.d<=i||(D=J.h/2,j.push(new $a(J.p.x-D,J.p.y-D,D,s)),j.push(new $a(J.p.x+D,J.p.y-D,D,s)),j.push(new $a(J.p.x-D,J.p.y+D,D,s)),j.push(new $a(J.p.x+D,J.p.y+D,D,s)),K+=4)}return a&&(console.log(`num probes: ${K}`),console.log(`best distance: ${q.d}`)),q.p}function Fg(s,i){return i.max-s.max}function $a(s,i,a,u){this.p=new Z(s,i),this.h=a,this.d=function(m,y){let w=!1,R=1/0;for(let I=0;I<y.length;I++){const D=y[I];for(let j=0,q=D.length,K=q-1;j<q;K=j++){const J=D[j],Q=D[K];J.y>m.y!=Q.y>m.y&&m.x<(Q.x-J.x)*(m.y-J.y)/(Q.y-J.y)+J.x&&(w=!w),R=Math.min(R,Fp(m,J,Q))}}return(w?1:-1)*Math.sqrt(R)}(this.p,u),this.max=this.d+this.h*Math.SQRT2}const Ud=Number.POSITIVE_INFINITY,Vg=Math.sqrt(2);function ih(s,i){return i[1]!==Ud?function(a,u,m){let y=0,w=0;switch(u=Math.abs(u),m=Math.abs(m),a){case"top-right":case"top-left":case"top":w=m-7;break;case"bottom-right":case"bottom-left":case"bottom":w=7-m}switch(a){case"top-right":case"bottom-right":case"right":y=-u;break;case"top-left":case"bottom-left":case"left":y=u}return[y,w]}(s,i[0],i[1]):function(a,u){let m=0,y=0;u<0&&(u=0);const w=u/Vg;switch(a){case"top-right":case"top-left":y=w-7;break;case"bottom-right":case"bottom-left":y=7-w;break;case"bottom":y=7-u;break;case"top":y=u-7}switch(a){case"top-right":case"bottom-right":m=-w;break;case"top-left":case"bottom-left":m=w;break;case"left":m=u;break;case"right":m=-u}return[m,y]}(s,i[0])}function Ug(s,i,a,u,m,y,w,R,I,D){s.createArrays(),s.tilePixelRatio=cn/(512*s.overscaling),s.compareText={},s.iconsNeedLinear=!1;const j=s.layers[0].layout,q=s.layers[0]._unevaluatedLayout._values,K={};if(s.textSizeData.kind==="composite"){const{minZoom:ne,maxZoom:ue}=s.textSizeData;K.compositeTextSizes=[q["text-size"].possiblyEvaluate(new Ae(ne),R),q["text-size"].possiblyEvaluate(new Ae(ue),R)]}if(s.iconSizeData.kind==="composite"){const{minZoom:ne,maxZoom:ue}=s.iconSizeData;K.compositeIconSizes=[q["icon-size"].possiblyEvaluate(new Ae(ne),R),q["icon-size"].possiblyEvaluate(new Ae(ue),R)]}K.layoutTextSize=q["text-size"].possiblyEvaluate(new Ae(I+1),R),K.layoutIconSize=q["icon-size"].possiblyEvaluate(new Ae(I+1),R),K.textMaxSize=q["text-size"].possiblyEvaluate(new Ae(18),R);const J=j.get("text-rotation-alignment")==="map"&&j.get("symbol-placement")!=="point",Q=j.get("text-size");for(const ne of s.features){const ue=j.get("text-font").evaluate(ne,{},R).join(","),Te=Q.evaluate(ne,{},R),Oe=K.layoutTextSize.evaluate(ne,{},R),Se=(K.layoutIconSize.evaluate(ne,{},R),{horizontal:{},vertical:void 0}),$e=ne.text;let Be,Me=[0,0];if($e){const ct=$e.toString(),Tt=j.get("text-letter-spacing").evaluate(ne,{},R)*ki,ot=j.get("text-line-height").evaluate(ne,{},R)*ki,ft=b(ct)?Tt:0,vt=j.get("text-anchor").evaluate(ne,{},R),wt=j.get("text-variable-anchor");if(!wt){const Ft=j.get("text-radial-offset").evaluate(ne,{},R);Me=Ft?ih(vt,[Ft*ki,Ud]):j.get("text-offset").evaluate(ne,{},R).map(Wt=>Wt*ki)}let At=J?"center":j.get("text-justify").evaluate(ne,{},R);const st=j.get("symbol-placement")==="point",Pt=st?j.get("text-max-width").evaluate(ne,{},R)*ki:1/0,nn=Ft=>{s.allowVerticalPlacement&&f(ct)&&(Se.vertical=zd($e,i,a,m,ue,Pt,ot,vt,Ft,ft,Me,rr.vertical,!0,Oe,Te))};if(!J&&wt){const Ft=At==="auto"?wt.map(Bt=>jd(Bt)):[At];let Wt=!1;for(let Bt=0;Bt<Ft.length;Bt++){const sn=Ft[Bt];if(!Se.horizontal[sn])if(Wt)Se.horizontal[sn]=Se.horizontal[0];else{const _n=zd($e,i,a,m,ue,Pt,ot,"center",sn,ft,Me,rr.horizontal,!1,Oe,Te);_n&&(Se.horizontal[sn]=_n,Wt=_n.positionedLines.length===1)}}nn("left")}else{if(At==="auto"&&(At=jd(vt)),st||j.get("text-writing-mode").indexOf("horizontal")>=0||!f(ct)){const Ft=zd($e,i,a,m,ue,Pt,ot,vt,At,ft,Me,rr.horizontal,!1,Oe,Te);Ft&&(Se.horizontal[At]=Ft)}nn(st?"left":At)}}let Qe=!1;if(ne.icon&&ne.icon.name){const ct=u[ne.icon.name];ct&&(Be=Ig(m[ne.icon.name],j.get("icon-offset").evaluate(ne,{},R),j.get("icon-anchor").evaluate(ne,{},R)),Qe=ct.sdf,s.sdfIcons===void 0?s.sdfIcons=ct.sdf:s.sdfIcons!==ct.sdf&&Ht("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ct.pixelRatio!==s.pixelRatio||j.get("icon-rotate").constantOr(1)!==0)&&(s.iconsNeedLinear=!0))}const Ye=oh(Se.horizontal)||Se.vertical;s.iconsInText||(s.iconsInText=!!Ye&&Ye.iconsInText),(Ye||Be)&&jg(s,ne,Se,Be,u,K,Oe,0,Me,Qe,w,R,D)}y&&s.generateCollisionDebugBuffers(I,s.collisionBoxArray)}function jd(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function jg(s,i,a,u,m,y,w,R,I,D,j,q,K){let J=y.textMaxSize.evaluate(i,{},q);J===void 0&&(J=w);const Q=s.layers[0].layout,ne=Q.get("icon-offset").evaluate(i,{},q),ue=oh(a.horizontal)||a.vertical,Te=K.name==="globe",Oe=w/24,Se=s.tilePixelRatio*J/24,$e=(ft=s.overscaling,s.zoom>18&&ft>2&&(ft>>=1),Math.max(cn/(512*ft),1)*Q.get("symbol-spacing")),Be=Q.get("text-padding")*s.tilePixelRatio,Me=Q.get("icon-padding")*s.tilePixelRatio,Qe=ce(Q.get("text-max-angle")),Ye=Q.get("text-rotation-alignment")==="map"&&Q.get("symbol-placement")!=="point",ct=Q.get("icon-rotation-alignment")==="map"&&Q.get("symbol-placement")!=="point",Tt=Q.get("symbol-placement"),ot=$e/2;var ft;const vt=Q.get("icon-text-fit");let wt;u&&vt!=="none"&&(s.allowVerticalPlacement&&a.vertical&&(wt=qf(u,a.vertical,vt,Q.get("icon-text-fit-padding"),ne,Oe)),ue&&(u=qf(u,ue,vt,Q.get("icon-text-fit-padding"),ne,Oe)));const At=(st,Pt,nn)=>{if(Pt.x<0||Pt.x>=cn||Pt.y<0||Pt.y>=cn)return;let Ft=null;if(Te){const{x:Wt,y:Bt,z:sn}=K.projectTilePoint(Pt.x,Pt.y,nn);Ft={anchor:new ho(Wt,Bt,sn,0,void 0),up:K.upVector(nn,Pt.x,Pt.y)}}(function(Wt,Bt,sn,_n,bn,kn,mn,Jn,wn,An,Un,Zn,Kn,Yn,Qn,ni,bi,Dn,fi,li,$n,ti,mi,jn,ri){const Mi=Wt.addToLineVertexArray(Bt,_n);let xi,wi,Ui,Ei,_o,Da,uc,dc=0,jh=0,Gh=0,Hh=0,op=-1,sp=-1;const Yr={};let qh=ma.exports("");const ks=sn?sn.anchor:Bt;let ap=0,lp=0;if(wn._unevaluatedLayout.getValue("text-radial-offset")===void 0?[ap,lp]=wn.layout.get("text-offset").evaluate($n,{},ri).map(Wi=>Wi*ki):(ap=wn.layout.get("text-radial-offset").evaluate($n,{},ri)*ki,lp=Ud),Wt.allowVerticalPlacement&&bn.vertical){const Wi=bn.vertical;if(Qn)Da=Gd(Wi),Jn&&(uc=Gd(Jn));else{const Zi=wn.layout.get("text-rotate").evaluate($n,{},ri)+90;Ui=Du(An,ks,Bt,Un,Zn,Kn,Wi,Yn,Zi,ni),Jn&&(Ei=Du(An,ks,Bt,Un,Zn,Kn,Jn,Dn,Zi))}}if(kn){const Wi=wn.layout.get("icon-rotate").evaluate($n,{},ri),Zi=wn.layout.get("icon-text-fit")!=="none",pc=th(kn,Wi,mi,Zi),up=Jn?th(Jn,Wi,mi,Zi):void 0;wi=Du(An,ks,Bt,Un,Zn,Kn,kn,Dn,Wi),dc=4*pc.length;const Kh=Wt.iconSizeData;let Rs=null;Kh.kind==="source"?(Rs=[Hr*wn.layout.get("icon-size").evaluate($n,{},ri)],Rs[0]>Fo&&Ht(`${Wt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Kh.kind==="composite"&&(Rs=[Hr*ti.compositeIconSizes[0].evaluate($n,{},ri),Hr*ti.compositeIconSizes[1].evaluate($n,{},ri)],(Rs[0]>Fo||Rs[1]>Fo)&&Ht(`${Wt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Wt.addSymbols(Wt.icon,pc,Rs,li,fi,$n,!1,sn,Bt,Mi.lineStartIndex,Mi.lineLength,-1,jn,ri),op=Wt.icon.placedSymbolArray.length-1,up&&(jh=4*up.length,Wt.addSymbols(Wt.icon,up,Rs,li,fi,$n,rr.vertical,sn,Bt,Mi.lineStartIndex,Mi.lineLength,-1,jn,ri),sp=Wt.icon.placedSymbolArray.length-1)}for(const Wi in bn.horizontal){const Zi=bn.horizontal[Wi];xi||(qh=ma.exports(Zi.text),Qn?_o=Gd(Zi):xi=Du(An,ks,Bt,Un,Zn,Kn,Zi,Yn,wn.layout.get("text-rotate").evaluate($n,{},ri),ni));const pc=Zi.positionedLines.length===1;if(Gh+=rh(Wt,sn,Bt,Zi,mn,wn,Qn,$n,ni,Mi,bn.vertical?rr.horizontal:rr.horizontalOnly,pc?Object.keys(bn.horizontal):[Wi],Yr,op,ti,jn,ri),pc)break}bn.vertical&&(Hh+=rh(Wt,sn,Bt,bn.vertical,mn,wn,Qn,$n,ni,Mi,rr.vertical,["vertical"],Yr,sp,ti,jn,ri));let qo=-1;const cp=(Wi,Zi)=>Wi?Math.max(Wi,Zi):Zi;qo=cp(_o,qo),qo=cp(Da,qo),qo=cp(uc,qo);const x_=qo>-1?1:0;Wt.glyphOffsetArray.length>=Uo.MAX_GLYPHS&&Ht("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),$n.sortKey!==void 0&&Wt.addToSortKeyRanges(Wt.symbolInstances.length,$n.sortKey),Wt.symbolInstances.emplaceBack(ks.x,ks.y,ks.z,Bt.x,Bt.y,Yr.right>=0?Yr.right:-1,Yr.center>=0?Yr.center:-1,Yr.left>=0?Yr.left:-1,Yr.vertical>=0?Yr.vertical:-1,op,sp,qh,xi!==void 0?xi:Wt.collisionBoxArray.length,xi!==void 0?xi+1:Wt.collisionBoxArray.length,Ui!==void 0?Ui:Wt.collisionBoxArray.length,Ui!==void 0?Ui+1:Wt.collisionBoxArray.length,wi!==void 0?wi:Wt.collisionBoxArray.length,wi!==void 0?wi+1:Wt.collisionBoxArray.length,Ei||Wt.collisionBoxArray.length,Ei?Ei+1:Wt.collisionBoxArray.length,Un,Gh,Hh,dc,jh,x_,0,ap,lp,qo)})(s,Pt,Ft,st,a,u,m,wt,s.layers[0],s.collisionBoxArray,i.index,i.sourceLayerIndex,s.index,Be,Ye,I,0,Me,ct,ne,i,y,D,j,q)};if(Tt==="line")for(const st of Jf(i.geometry,0,0,cn,cn)){const Pt=Og(st,$e,Qe,a.vertical||ue,u,24,Se,s.overscaling,cn);for(const nn of Pt){const Ft=ue;Ft&&Gg(s,Ft.text,ot,nn)||At(st,nn,q)}}else if(Tt==="line-center"){for(const st of i.geometry)if(st.length>1){const Pt=Lg(st,Qe,a.vertical||ue,u,24,Se);Pt&&At(st,Pt,q)}}else if(i.type==="Polygon")for(const st of Nd(i.geometry,0)){const Pt=zg(st,16);At(st[0],new ho(Pt.x,Pt.y,0,0,void 0),q)}else if(i.type==="LineString")for(const st of i.geometry)At(st,new ho(st[0].x,st[0].y,0,0,void 0),q);else if(i.type==="Point")for(const st of i.geometry)for(const Pt of st)At([Pt],new ho(Pt.x,Pt.y,0,0,void 0),q)}const Fo=32640;function rh(s,i,a,u,m,y,w,R,I,D,j,q,K,J,Q,ne,ue){const Te=function($e,Be,Me,Qe,Ye,ct,Tt,ot){const ft=[];if(Be.positionedLines.length===0)return ft;const vt=Qe.layout.get("text-rotate").evaluate(ct,{})*Math.PI/180,wt=function(Ft){const Wt=Ft[0],Bt=Ft[1],sn=Wt*Bt;return sn>0?[Wt,-Bt]:sn<0?[-Wt,Bt]:Wt===0?[Bt,Wt]:[Bt,-Wt]}(Me);let At=Math.abs(Be.top-Be.bottom);for(const Ft of Be.positionedLines)At-=Ft.lineOffset;const st=Be.positionedLines.length,Pt=At/st;let nn=Be.top-Me[1];for(let Ft=0;Ft<st;++Ft){const Wt=Be.positionedLines[Ft];nn=Pg(Be,Pt,nn,Ft);for(const Bt of Wt.positionedGlyphs){if(!Bt.rect)continue;const sn=Bt.rect||{};let _n=4,bn=!0,kn=1,mn=0;if(Bt.imageName){const jn=Tt[Bt.imageName];if(!jn)continue;if(jn.sdf){Ht("SDF images are not supported in formatted text and will be ignored.");continue}bn=!1,kn=jn.pixelRatio,_n=1/kn}const Jn=(Ye||ot)&&Bt.vertical,wn=Bt.metrics.advance*Bt.scale/2,An=Bt.metrics,Un=Bt.rect;if(Un===null)continue;ot&&Be.verticalizable&&(mn=Bt.imageName?wn-Bt.metrics.width*Bt.scale/2:0);const Zn=Ye?[Bt.x+wn,Bt.y]:[0,0];let Kn=[0,0],Yn=[0,0],Qn=!1;Ye||(Jn?(Yn=[Bt.x+wn+wt[0],Bt.y+wt[1]-mn],Qn=!0):Kn=[Bt.x+wn+Me[0],Bt.y+Me[1]-mn]);const ni=Un.w*Bt.scale/(kn*(Bt.localGlyph?2:1)),bi=Un.h*Bt.scale/(kn*(Bt.localGlyph?2:1));let Dn,fi,li,$n;if(Jn){const jn=Bt.y-nn,ri=new Z(-wn,wn-jn),Mi=-Math.PI/2,xi=new Z(...Yn);Dn=new Z(-wn+Kn[0],Kn[1]),Dn._rotateAround(Mi,ri)._add(xi),Dn.x+=-jn+wn,Dn.y-=(An.left-_n)*Bt.scale;const wi=Bt.imageName?An.advance*Bt.scale:ki*Bt.scale,Ui=String.fromCharCode(Bt.glyph);_g(Ui)?Dn.x+=(1-_n)*Bt.scale:vg(Ui)?Dn.x+=wi-An.height*Bt.scale+(-_n-1)*Bt.scale:Dn.x+=Bt.imageName||An.width+2*_n===Un.w&&An.height+2*_n===Un.h?(wi-bi)/2:(wi-(An.height+2*_n)*Bt.scale)/2,fi=new Z(Dn.x,Dn.y-ni),li=new Z(Dn.x+bi,Dn.y),$n=new Z(Dn.x+bi,Dn.y-ni)}else{const jn=(An.left-_n)*Bt.scale-wn+Kn[0],ri=(-An.top-_n)*Bt.scale+Kn[1],Mi=jn+ni,xi=ri+bi;Dn=new Z(jn,ri),fi=new Z(Mi,ri),li=new Z(jn,xi),$n=new Z(Mi,xi)}if(vt){let jn;jn=Ye?new Z(0,0):Qn?new Z(wt[0],wt[1]):new Z(Me[0],Me[1]),Dn._rotateAround(vt,jn),fi._rotateAround(vt,jn),li._rotateAround(vt,jn),$n._rotateAround(vt,jn)}const ti=new Z(0,0),mi=new Z(0,0);ft.push({tl:Dn,tr:fi,bl:li,br:$n,tex:sn,writingMode:Be.writingMode,glyphOffset:Zn,sectionIndex:Bt.sectionIndex,isSDF:bn,pixelOffsetTL:ti,pixelOffsetBR:mi,minFontScaleX:0,minFontScaleY:0})}}return ft}(0,u,I,y,w,R,m,s.allowVerticalPlacement),Oe=s.textSizeData;let Se=null;Oe.kind==="source"?(Se=[Hr*y.layout.get("text-size").evaluate(R,{},ue)],Se[0]>Fo&&Ht(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Oe.kind==="composite"&&(Se=[Hr*Q.compositeTextSizes[0].evaluate(R,{},ue),Hr*Q.compositeTextSizes[1].evaluate(R,{},ue)],(Se[0]>Fo||Se[1]>Fo)&&Ht(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),s.addSymbols(s.text,Te,Se,I,w,R,j,i,a,D.lineStartIndex,D.lineLength,J,ne,ue);for(const $e of q)K[$e]=s.text.placedSymbolArray.length-1;return 4*Te.length}function oh(s){for(const i in s)return s[i];return null}function Du(s,i,a,u,m,y,w,R,I,D){let j=w.top,q=w.bottom,K=w.left,J=w.right;const Q=w.collisionPadding;if(Q&&(K-=Q[0],j-=Q[1],J+=Q[2],q+=Q[3]),I){const ne=new Z(K,j),ue=new Z(J,j),Te=new Z(K,q),Oe=new Z(J,q),Se=ce(I);let $e=new Z(0,0);D&&($e=new Z(D[0],D[1])),ne._rotateAround(Se,$e),ue._rotateAround(Se,$e),Te._rotateAround(Se,$e),Oe._rotateAround(Se,$e),K=Math.min(ne.x,ue.x,Te.x,Oe.x),J=Math.max(ne.x,ue.x,Te.x,Oe.x),j=Math.min(ne.y,ue.y,Te.y,Oe.y),q=Math.max(ne.y,ue.y,Te.y,Oe.y)}return s.emplaceBack(i.x,i.y,i.z,a.x,a.y,K,j,J,q,R,u,m,y),s.length-1}function Gd(s){s.collisionPadding&&(s.top-=s.collisionPadding[1],s.bottom+=s.collisionPadding[3]);const i=s.bottom-s.top;return i>0?Math.max(10,i):null}function Gg(s,i,a,u){const m=s.compareText;if(i in m){const y=m[i];for(let w=y.length-1;w>=0;w--)if(u.dist(y[w])<a)return!0}else m[i]=[];return m[i].push(u),!1}const Hg=It([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:sh}=Hg,ah=It([{name:"a_pos_3",components:3,type:"Int16"}]);var ec=It([{name:"a_pos",type:"Int16",components:2}]);const mo=cn/Math.PI/2,Hd=2*mr(1,0)*mo*Math.PI,Na=64,Ma=[Na,32,16],Rr=-mo,$r=mo,qg=[new Fi([Rr,Rr,Rr],[$r,$r,$r]),new Fi([Rr,Rr,Rr],[0,0,$r]),new Fi([0,Rr,Rr],[$r,0,$r]),new Fi([Rr,0,Rr],[0,$r,$r]),new Fi([0,0,Rr],[$r,$r,$r])];function lh(s,i,a,u=!0){const m=ir([],s._camera.position,s.worldSize),y=[i,a,1,1];Es(y,y,s.pixelMatrixInverse),Jp(y,y,1/y[3]);const w=zi([],kr([],y,m)),R=s.globeMatrix,I=[R[12],R[13],R[14]],D=kr([],I,m),j=Ol(D),q=zi([],D),K=s.worldSize/(2*Math.PI),J=gr(q,w),Q=Math.asin(K/j);if(Q<Math.acos(J)){if(!u)return null;const Tt=[],ot=[];ir(Tt,w,j/J),zi(ot,kr(ot,Tt,D)),zi(w,uo(w,D,ir(w,ot,Math.tan(Q)*j)))}const ne=[];new Ed(m,w).closestPointOnSphere(I,K,ne);const ue=zi([],tt(R,0)),Te=zi([],tt(R,1)),Oe=zi([],tt(R,2)),Se=gr(ue,ne),$e=gr(Te,ne),Be=gr(Oe,ne),Me=me(Math.asin(-$e/K));let Qe=me(Math.atan2(Se,Be));Qe=s.center.lng+function(Tt,ot){const ft=(ot-Tt+180)%360-180;return ft<-180?ft+360:ft}(s.center.lng,Qe);const Ye=Vr(Qe),ct=it(Ur(Me),0,1);return new va(Ye,ct)}class Kg{constructor(i,a,u){this.a=kr([],i,u),this.b=kr([],a,u),this.center=u;const m=zi([],this.a),y=zi([],this.b);this.angle=Math.acos(gr(m,y))}}function qd(s,i){if(s.angle===0)return null;let a;return a=s.a[i]===0?1/s.angle*.5*Math.PI:1/s.angle*Math.atan(s.b[i]/s.a[i]/Math.sin(s.angle)-1/Math.tan(s.angle)),a<0||a>1?null:function(u,m,y,w){const R=Math.sin(y);return u*(Math.sin((1-w)*y)/R)+m*(Math.sin(w*y)/R)}(s.a[i],s.b[i],s.angle,it(a,0,1))+s.center[i]}function qr(s){if(s.z<=1)return qg[s.z+2*s.y+s.x];const i=Kd(Bu(s));return Fi.fromPoints(i)}function Ss(s,i,a){return ir(s,s,1-a),Bl(s,s,i,a)}function ch(s,i){const a=La(i.zoom);if(a===0)return qr(s);const u=Bu(s),m=Kd(u),y=Vr(u.getWest())*i.worldSize,w=Vr(u.getEast())*i.worldSize,R=Ur(u.getNorth())*i.worldSize,I=Ur(u.getSouth())*i.worldSize,D=[y,R,0],j=[w,R,0],q=[y,I,0],K=[w,I,0],J=vd([],i.globeMatrix);return pi(D,D,J),pi(j,j,J),pi(q,q,J),pi(K,K,J),m[0]=Ss(m[0],q,a),m[1]=Ss(m[1],K,a),m[2]=Ss(m[2],j,a),m[3]=Ss(m[3],D,a),Fi.fromPoints(m)}function uh(s,i,a){for(const u of s)pi(u,u,i),ir(u,u,a)}function Wg(s,i,a){const u=i/s.worldSize,m=s.globeMatrix;if(a.z<=1){const Ye=qr(a).getCorners();return uh(Ye,m,u),Fi.fromPoints(Ye)}const y=Bu(a),w=Kd(y);uh(w,m,u);const R=Number.MAX_VALUE,I=[-R,-R,-R],D=[R,R,R];if(y.contains(s.center)){for(const Tt of w)Pl(D,D,Tt),Dl(I,I,Tt);I[2]=0;const Ye=s.point,ct=[Ye.x*u,Ye.y*u,0];return Pl(D,D,ct),Dl(I,I,ct),new Fi(D,I)}const j=[m[12]*u,m[13]*u,m[14]*u],q=y.getCenter(),K=it(s.center.lat,-85.051129,jr),J=it(q.lat,-85.051129,jr),Q=Vr(s.center.lng),ne=Ur(K);let ue=Q-Vr(q.lng);const Te=ne-Ur(J);ue>.5?ue-=1:ue<-.5&&(ue+=1);let Oe=0;Math.abs(ue)>Math.abs(Te)?Oe=ue>=0?1:3:(Oe=Te>=0?0:2,Bl(j,j,[m[4]*u,m[5]*u,m[6]*u],-Math.sin(ce(Te>=0?y.getSouth():y.getNorth()))*mo));const Se=w[Oe],$e=w[(Oe+1)%4],Be=new Kg(Se,$e,j),Me=[qd(Be,0)||Se[0],qd(Be,1)||Se[1],qd(Be,2)||Se[2]],Qe=La(s.zoom);if(Qe>0){const Ye=function({x:Tt,y:ot,z:ft},vt,wt,At,st){const Pt=1/(1<<ft);let nn=Tt*Pt,Ft=nn+Pt,Wt=ot*Pt,Bt=Wt+Pt,sn=0;const _n=(nn+Ft)/2-At;return _n>.5?sn=-1:_n<-.5&&(sn=1),nn=((nn+sn)*vt-(At*=vt))*wt+At,Ft=((Ft+sn)*vt-At)*wt+At,Wt=(Wt*vt-(st*=vt))*wt+st,Bt=(Bt*vt-st)*wt+st,[[nn,Bt,0],[Ft,Bt,0],[Ft,Wt,0],[nn,Wt,0]]}(a,i,s._pixelsPerMercatorPixel,Q,ne);for(let Tt=0;Tt<w.length;Tt++)Ss(w[Tt],Ye[Tt],Qe);const ct=uo([],Ye[Oe],Ye[(Oe+1)%4]);ir(ct,ct,.5),Ss(Me,ct,Qe)}for(const Ye of w)Pl(D,D,Ye),Dl(I,I,Ye);return D[2]=Math.min(Se[2],$e[2]),Pl(D,D,Me),Dl(I,I,Me),new Fi(D,I)}function Bu({x:s,y:i,z:a}){const u=1/(1<<a),m=new Ln(nr(s*u),Ai((i+1)*u)),y=new Ln(nr((s+1)*u),Ai(i*u));return new zo(m,y)}function Kd(s){const i=ce(s.getNorth()),a=ce(s.getSouth()),u=Math.cos(i),m=Math.cos(a),y=Math.sin(i),w=Math.sin(a),R=s.getWest(),I=s.getEast();return[Ia(m,w,R),Ia(m,w,I),Ia(u,y,I),Ia(u,y,R)]}function Ia(s,i,a,u=mo){return a=ce(a),[s*Math.sin(a)*u,-i*u,s*Math.cos(a)*u]}function tc(s,i,a){return Ia(Math.cos(ce(s)),Math.sin(ce(s)),i,a)}function nc(s,i,a,u){const m=1<<a.z,y=(s/cn+a.x)/m;return tc(Ai((i/cn+a.y)/m),nr(y),u)}function zu({min:s,max:i}){return 16383/Math.max(i[0]-s[0],i[1]-s[1],i[2]-s[2])}const dh=new Float64Array(16);function ic(s){const i=zu(s),a=Kp(dh,[i,i,i]);return Ll(a,a,((u=[])[0]=-(m=s.min)[0],u[1]=-m[1],u[2]=-m[2],u));var u,m}function Wd(s){const i=(u=s.min,(a=dh)[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=u[0],a[13]=u[1],a[14]=u[2],a[15]=1,a);var a,u;const m=1/zu(s);return ws(i,i,[m,m,m])}function ph(s,i,a,u,m){const y=function(I){const D=cn/(2*Math.PI);return I/(2*Math.PI)/D}(a),w=[s,i,-a/(2*Math.PI)],R=Gr(new Float64Array(16));return Ll(R,R,w),ws(R,R,[y,y,y]),yd(R,R,ce(-m)),bu(R,R,ce(-u)),R}function La(s){return _e(5,6,s)}function fh(s,i){const a=tc(i.lat,i.lng),u=function(Q){const ne=tc(Q._center.lat,Q._center.lng);let ue=wd([],xa(0,1,0),ne);const Te=Wp([],-Q.angle,ne);ue=pi(ue,ue,Te),Wp(Te,-Q._pitch,ue);const Oe=zi([],ne);return ir(Oe,Oe,Q.cameraToCenterDistance/Q.pixelsPerMeter*Hd),pi(Oe,Oe,Te),uo([],ne,Oe)}(s);return w=(m=xd([],u,a))[0],R=m[1],I=m[2],D=(y=a)[0],j=y[1],q=y[2],J=(K=Math.sqrt(w*w+R*R+I*I)*Math.sqrt(D*D+j*j+q*q))&&gr(m,y)/K,Math.acos(Math.min(Math.max(J,-1),1));var m,y,w,R,I,D,j,q,K,J}const hh=ce(85),Zg=Math.cos(hh),Yg=Math.sin(hh);function mh(s,i){const a=s.fovAboveCenter,u=s.elevation?s.elevation.getMinElevationBelowMSL()*i:0,m=(s._camera.position[2]*s.worldSize-u)/Math.cos(s._pitch),y=Math.sin(a)*m/Math.sin(Math.max(Math.PI/2-s._pitch-a,.01)),w=Math.sin(s._pitch)*y+m;return Math.min(1.01*w,m*(1/s._horizonShift))}function Ts(s,i){if(!i.isReprojectedInTileSpace)return{scale:1<<s.z,x:s.x,y:s.y,x2:s.x+1,y2:s.y+1,projection:i};const a=Math.pow(2,-s.z),u=s.x*a,m=(s.x+1)*a,y=s.y*a,w=(s.y+1)*a,R=nr(u),I=nr(m),D=Ai(y),j=Ai(w),q=i.project(R,D),K=i.project(I,D),J=i.project(I,j),Q=i.project(R,j);let ne=Math.min(q.x,K.x,J.x,Q.x),ue=Math.min(q.y,K.y,J.y,Q.y),Te=Math.max(q.x,K.x,J.x,Q.x),Oe=Math.max(q.y,K.y,J.y,Q.y);const Se=a/16;function $e(Me,Qe,Ye,ct,Tt,ot){const ft=(Ye+Tt)/2,vt=(ct+ot)/2,wt=i.project(nr(ft),Ai(vt)),At=Math.max(0,ne-wt.x,ue-wt.y,wt.x-Te,wt.y-Oe);ne=Math.min(ne,wt.x),Te=Math.max(Te,wt.x),ue=Math.min(ue,wt.y),Oe=Math.max(Oe,wt.y),At>Se&&($e(Me,wt,Ye,ct,ft,vt),$e(wt,Qe,ft,vt,Tt,ot))}$e(q,K,u,y,m,y),$e(K,J,m,y,m,w),$e(J,Q,m,w,u,w),$e(Q,q,u,w,u,y),ne-=Se,ue-=Se,Te+=Se,Oe+=Se;const Be=1/Math.max(Te-ne,Oe-ue);return{scale:Be,x:ne*Be,y:ue*Be,x2:Te*Be,y2:Oe*Be,projection:i}}const Xg=Gr(new Float32Array(16));class Vo{constructor(i){this.spec=i,this.name=i.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(i,a){return{x:0,y:0,z:0}}unproject(i,a){return new Ln(0,0)}projectTilePoint(i,a,u){return{x:i,y:a,z:0}}locationPoint(i,a,u=!0){return i._coordinatePoint(i.locationCoordinate(a),u)}pixelsPerMeter(i,a){return mr(1,i)*a}pixelSpaceConversion(i,a,u){return 1}farthestPixelDistance(i){return mh(i,i.pixelsPerMeter)}pointCoordinate(i,a,u,m){const y=i.horizonLineFromTop(!1),w=new Z(a,Math.max(y,u));return i.rayIntersectionCoordinate(i.pointRayIntersection(w,m))}pointCoordinate3D(i,a,u){const m=new Z(a,u);if(i.elevation)return i.elevation.pointCoordinate(m);{const y=this.pointCoordinate(i,m.x,m.y,0);return[y.x,y.y,y.z]}}isPointAboveHorizon(i,a){if(i.elevation)return!this.pointCoordinate3D(i,a.x,a.y);const u=i.horizonLineFromTop();return a.y<u}createInversionMatrix(i,a){return Xg}createTileMatrix(i,a,u){let m,y,w;const R=u.canonical,I=Gr(new Float64Array(16));if(this.isReprojectedInTileSpace){const D=Ts(R,this);m=1,y=D.x+u.wrap*D.scale,w=D.y,ws(I,I,[m/D.scale,m/D.scale,i.pixelsPerMeter/a])}else m=a/i.zoomScale(R.z),y=(R.x+Math.pow(2,R.z)*u.wrap)*m,w=R.y*m;return Ll(I,I,[y,w,0]),ws(I,I,[m/cn,m/cn,1]),I}upVector(i,a,u){return[0,0,1]}upVectorScale(i,a,u){return{metersToTile:1}}}class Jg extends Vo{constructor(i){super(i),this.range=[4,7],this.center=i.center||[-96,37.5];const[a,u]=this.parallels=i.parallels||[29.5,45.5],m=Math.sin(ce(a));this.n=(m+Math.sin(ce(u)))/2,this.c=1+m*(2*this.n-m),this.r0=Math.sqrt(this.c)/this.n}project(i,a){const{n:u,c:m,r0:y}=this,w=ce(i-this.center[0]),R=ce(a),I=Math.sqrt(m-2*u*Math.sin(R))/u;return{x:I*Math.sin(w*u),y:I*Math.cos(w*u)-y,z:0}}unproject(i,a){const{n:u,c:m,r0:y}=this,w=y+a;let R=Math.atan2(i,Math.abs(w))*Math.sign(w);w*u<0&&(R-=Math.PI*Math.sign(i)*Math.sign(w));const I=ce(this.center[0])*u;R=ke(R,-Math.PI-I,Math.PI-I);const D=it(me(R/u)+this.center[0],-180,180),j=Math.asin(it((m-(i*i+w*w)*u*u)/(2*u),-1,1)),q=it(me(j),-85.051129,jr);return new Ln(D,q)}}const rc=1.340264,oc=-.081106,sc=893e-6,ac=.003796,Fu=Math.sqrt(3)/2;class Qg extends Vo{project(i,a){a=a/180*Math.PI,i=i/180*Math.PI;const u=Math.asin(Fu*Math.sin(a)),m=u*u,y=m*m*m;return{x:.5*(i*Math.cos(u)/(Fu*(rc+3*oc*m+y*(7*sc+9*ac*m)))/Math.PI+.5),y:1-.5*(u*(rc+oc*m+y*(sc+ac*m))/Math.PI+1),z:0}}unproject(i,a){i=(2*i-.5)*Math.PI;let u=a=(2*(1-a)-1)*Math.PI,m=u*u,y=m*m*m;for(let j,q,K,J=0;J<12&&(q=u*(rc+oc*m+y*(sc+ac*m))-a,K=rc+3*oc*m+y*(7*sc+9*ac*m),j=q/K,u=it(u-j,-Math.PI/3,Math.PI/3),m=u*u,y=m*m*m,!(Math.abs(j)<1e-12));++J);const w=Fu*i*(rc+3*oc*m+y*(7*sc+9*ac*m))/Math.cos(u),R=Math.asin(Math.sin(u)/Fu),I=it(180*w/Math.PI,-180,180),D=it(180*R/Math.PI,-85.051129,jr);return new Ln(I,D)}}class e_ extends Vo{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0}project(i,a){return{x:.5+i/360,y:.5-a/360,z:0}}unproject(i,a){const u=360*(i-.5),m=it(360*(.5-a),-85.051129,jr);return new Ln(u,m)}}const Oa=Math.PI/2;function Vu(s){return Math.tan((Oa+s)/2)}class t_ extends Vo{constructor(i){super(i),this.center=i.center||[0,30];const[a,u]=this.parallels=i.parallels||[30,30];let m=ce(a),y=ce(u);this.southernCenter=m+y<0,this.southernCenter&&(m=-m,y=-y);const w=Math.cos(m),R=Vu(m);this.n=m===y?Math.sin(m):Math.log(w/Math.cos(y))/Math.log(Vu(y)/R),this.f=w*Math.pow(Vu(m),this.n)/this.n}project(i,a){a=ce(a),this.southernCenter&&(a=-a),i=ce(i-this.center[0]);const u=1e-6,{n:m,f:y}=this;y>0?a<-Oa+u&&(a=-Oa+u):a>Oa-u&&(a=Oa-u);const w=y/Math.pow(Vu(a),m);let R=w*Math.sin(m*i),I=y-w*Math.cos(m*i);return R=.5*(R/Math.PI+.5),I=.5*(I/Math.PI+.5),{x:R,y:this.southernCenter?I:1-I,z:0}}unproject(i,a){i=(2*i-.5)*Math.PI,this.southernCenter&&(a=1-a),a=(2*(1-a)-.5)*Math.PI;const{n:u,f:m}=this,y=m-a,w=Math.sign(y),R=Math.sign(u)*Math.sqrt(i*i+y*y);let I=Math.atan2(i,Math.abs(y))*w;y*u<0&&(I-=Math.PI*Math.sign(i)*w);const D=it(me(I/u)+this.center[0],-180,180),j=it(me(2*Math.atan(Math.pow(m/R,1/u))-Oa),-85.051129,jr);return new Ln(D,this.southernCenter?-j:j)}}class gh extends Vo{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(i,a){return{x:Vr(i),y:Ur(a),z:0}}unproject(i,a){const u=nr(i),m=Ai(a);return new Ln(u,m)}}const _h=ce(jr);class n_ extends Vo{project(i,a){const u=(a=ce(a))*a,m=u*u;return{x:.5*((i=ce(i))*(.8707-.131979*u+m*(m*(.003971*u-.001529*m)-.013791))/Math.PI+.5),y:1-.5*(a*(1.007226+u*(.015085+m*(.028874*u-.044475-.005916*m)))/Math.PI+1),z:0}}unproject(i,a){i=(2*i-.5)*Math.PI;let u=a=(2*(1-a)-1)*Math.PI,m=25,y=0,w=u*u;do{w=u*u;const D=w*w;y=(u*(1.007226+w*(.015085+D*(.028874*w-.044475-.005916*D)))-a)/(1.007226+w*(.045255+D*(.259866*w-.311325-.005916*11*D))),u=it(u-y,-_h,_h)}while(Math.abs(y)>1e-6&&--m>0);w=u*u;const R=it(me(i/(.8707+w*(w*(w*w*w*(.003971-.001529*w)-.013791)-.131979))),-180,180),I=me(u);return new Ln(R,I)}}const vh=ce(jr);class i_ extends Vo{project(i,a){a=ce(a),i=ce(i);const u=Math.cos(a),m=2/Math.PI,y=Math.acos(u*Math.cos(i/2)),w=Math.sin(y)/y,R=.5*(i*m+2*u*Math.sin(i/2)/w)||0,I=.5*(a+Math.sin(a)/w)||0;return{x:.5*(R/Math.PI+.5),y:1-.5*(I/Math.PI+1),z:0}}unproject(i,a){let u=i=(2*i-.5)*Math.PI,m=a=(2*(1-a)-1)*Math.PI,y=25;const w=1e-6;let R=0,I=0;do{const D=Math.cos(m),j=Math.sin(m),q=2*j*D,K=j*j,J=D*D,Q=Math.cos(u/2),ne=Math.sin(u/2),ue=2*Q*ne,Te=ne*ne,Oe=1-J*Q*Q,Se=Oe?1/Oe:0,$e=Oe?Math.acos(D*Q)*Math.sqrt(1/Oe):0,Be=.5*(2*$e*D*ne+2*u/Math.PI)-i,Me=.5*($e*j+m)-a,Qe=.5*Se*(J*Te+$e*D*Q*K)+1/Math.PI,Ye=Se*(ue*q/4-$e*j*ne),ct=.125*Se*(q*ne-$e*j*J*ue),Tt=.5*Se*(K*Q+$e*Te*D)+.5,ot=Ye*ct-Tt*Qe;R=(Me*Ye-Be*Tt)/ot,I=(Be*ct-Me*Qe)/ot,u=it(u-R,-Math.PI,Math.PI),m=it(m-I,-vh,vh)}while((Math.abs(R)>w||Math.abs(I)>w)&&--y>0);return new Ln(me(u),me(m))}}class yh extends Vo{constructor(i){super(i),this.center=i.center||[0,0],this.parallels=i.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(ce(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(i,a){const{scale:u,cosPhi:m}=this;return{x:ce(i)*m*u+.5,y:-Math.sin(ce(a))/m*u+.5,z:0}}unproject(i,a){const{scale:u,cosPhi:m}=this,y=-(a-.5)/u,w=it(me((i-.5)/u)/m,-180,180),R=Math.asin(it(y*m,-1,1)),I=it(me(R),-85.051129,jr);return new Ln(w,I)}}class r_ extends gh{constructor(i){super(i),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug","custom"],this.range=[3,5]}projectTilePoint(i,a,u){const m=nc(i,a,u);return pi(m,m,ic(qr(u))),{x:m[0],y:m[1],z:m[2]}}locationPoint(i,a){const u=tc(a.lat,a.lng),m=zi([],u),y=i.elevation?i.elevation.getAtPointOrZero(i.locationCoordinate(a),i._centerAltitude):i._centerAltitude;Bl(u,u,m,mr(1,0)*cn*y);const w=Gr(new Float64Array(16));return ba(w,i.pixelMatrix,i.globeMatrix),pi(u,u,w),new Z(u[0],u[1])}pixelsPerMeter(i,a){return mr(1,0)*a}pixelSpaceConversion(i,a,u){const m=mr(1,i)*a,y=Rn(mr(1,45)*a,m,u);return this.pixelsPerMeter(i,a)/y}createTileMatrix(i,a,u){const m=Wd(qr(u.canonical));return ba(new Float64Array(16),i.globeMatrix,m)}createInversionMatrix(i,a){const{center:u}=i,m=ic(qr(a));return bu(m,m,ce(u.lng)),yd(m,m,ce(u.lat)),ws(m,m,[i._pixelsPerMercatorPixel,i._pixelsPerMercatorPixel,1]),Float32Array.from(m)}pointCoordinate(i,a,u,m){return lh(i,a,u,!0)||new va(0,0)}pointCoordinate3D(i,a,u){const m=this.pointCoordinate(i,a,u,0);return[m.x,m.y,m.z]}isPointAboveHorizon(i,a){return!lh(i,a.x,a.y,!1)}farthestPixelDistance(i){const a=function(m,y){const w=m.cameraToCenterDistance,R=m._centerAltitude*y,I=m._camera,D=m._camera.forward(),j=uo([],ir([],D,-w),[0,0,R]),q=m.worldSize/(2*Math.PI),K=[0,0,-q],J=m.width/m.height,Q=Math.tan(m.fovAboveCenter),ne=ir([],I.up(),Q),ue=ir([],I.right(),Q*J),Te=zi([],uo([],uo([],D,ne),ue)),Oe=[];let Se;if(new Ed(j,Te).closestPointOnSphere(K,q,Oe)){const $e=uo([],Oe,K),Be=kr([],$e,j);Se=Math.cos(m.fovAboveCenter)*Ol(Be)}else{const $e=kr([],j,K),Be=kr([],K,j);zi(Be,Be);const Me=Ol($e)-q;Se=Math.sqrt(Me*(Me+2*q));const Qe=Math.acos(Se/(q+Me))-Math.acos(gr(D,Be));Se*=Math.cos(Qe)}return 1.01*Se}(i,this.pixelsPerMeter(i.center.lat,i.worldSize)),u=La(i.zoom);if(u>0){const m=mh(i,mr(1,i.center.lat)*i.worldSize),y=i.worldSize/(2*Math.PI),w=Math.max(i.width,i.height)/i.worldSize*Math.PI;return Rn(a,m+y*(1-Math.cos(w)),Math.pow(u,10))}return a}upVector(i,a,u){return nc(a,u,i,1)}upVectorScale(i){return{metersToTile:Hd*zu(qr(i))}}}function bh(s){const i=s.parallels,a=!!i&&Math.abs(i[0]+i[1])<.01;switch(s.name){case"mercator":return new gh(s);case"equirectangular":return new e_(s);case"naturalEarth":return new n_(s);case"equalEarth":return new Qg(s);case"winkelTripel":return new i_(s);case"albers":return a?new yh(s):new Jg(s);case"lambertConformalConic":return a?new yh(s):new t_(s);case"globe":return new r_(s)}throw new Error(`Invalid projection name: ${s.name}`)}const o_=Au.types,s_=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Uu(s,i,a,u,m,y,w,R,I,D,j,q,K){const J=R?Math.min(Fo,Math.round(R[0])):0,Q=R?Math.min(Fo,Math.round(R[1])):0;s.emplaceBack(i,a,Math.round(32*u),Math.round(32*m),y,w,(J<<1)+(I?1:0),Q,16*D,16*j,256*q,256*K)}function ju(s,i,a,u,m,y,w){s.emplaceBack(i,a,u,m,y,w)}function Gu(s,i,a,u,m){s.emplaceBack(i,a,u,m),s.emplaceBack(i,a,u,m),s.emplaceBack(i,a,u,m),s.emplaceBack(i,a,u,m)}function a_(s){for(const i of s.sections)if(Y(i.text))return!0;return!1}class Zd{constructor(i){this.layoutVertexArray=new ei,this.indexArray=new Ni,this.programConfigurations=i,this.segments=new di,this.dynamicLayoutVertexArray=new hi,this.opacityVertexArray=new si,this.placedSymbolArray=new mp,this.globeExtVertexArray=new On}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,a,u,m){this.isEmpty()||(u&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,cg.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,dg.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,s_,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,ug.members,!0)),this.opacityVertexBuffer.itemSize=1),(u||m)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Gt(Zd,"SymbolBuffers");class Yd{constructor(i,a,u){this.layoutVertexArray=new i,this.layoutAttributes=a,this.indexArray=new u,this.segments=new di,this.collisionVertexArray=new so,this.collisionVertexArrayExt=new er}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,pg.members,!0),this.collisionVertexBufferExt=i.createVertexBuffer(this.collisionVertexArrayExt,fg.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Gt(Yd,"CollisionBuffers");class Uo{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(w=>w.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Gr([]),this.placementViewportMatrix=Gr([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Od(this.zoom,a["text-size"]),this.iconSizeData=Od(this.zoom,a["icon-size"]);const u=this.layers[0].layout,m=u.get("symbol-sort-key"),y=u.get("symbol-z-order");this.canOverlap=u.get("text-allow-overlap")||u.get("icon-allow-overlap")||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&m.constantOr(1)!==void 0,this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=u.get("text-writing-mode").map(w=>rr[w]),this.stateDependentLayerIds=this.layers.filter(w=>w.isStateDependent()).map(w=>w.id),this.sourceID=i.sourceID,this.projection=i.projection}createArrays(){this.text=new Zd(new ys(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new Zd(new ys(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new vp,this.lineVertexArray=new yp,this.symbolInstances=new _p}calculateGlyphDependencies(i,a,u,m,y){for(let w=0;w<i.length;w++)if(a[i.charCodeAt(w)]=!0,m&&y){const R=Yl[i.charAt(w)];R&&(a[R.charCodeAt(0)]=!0)}}populate(i,a,u,m){const y=this.layers[0],w=y.layout,R=this.projection.name==="globe",I=w.get("text-font"),D=w.get("text-field"),j=w.get("icon-image"),q=(D.value.kind!=="constant"||D.value.value instanceof Ri&&!D.value.value.isEmpty()||D.value.value.toString().length>0)&&(I.value.kind!=="constant"||I.value.value.length>0),K=j.value.kind!=="constant"||!!j.value.value||Object.keys(j.parameters).length>0,J=w.get("symbol-sort-key");if(this.features=[],!q&&!K)return;const Q=a.iconDependencies,ne=a.glyphDependencies,ue=a.availableImages,Te=new Ae(this.zoom);for(const{feature:Oe,id:Se,index:$e,sourceLayerIndex:Be}of i){const Me=y._featureFilter.needGeometry,Qe=bs(Oe,Me);if(!y._featureFilter.filter(Te,Qe,u))continue;if(Me||(Qe.geometry=co(Oe,u,m)),R&&Oe.type!==1&&u.z<=5){const ot=Qe.geometry,ft=.98078528056,vt=(wt,At)=>gr(nc(wt.x,wt.y,u,1),nc(At.x,At.y,u,1))<ft;for(let wt=0;wt<ot.length;wt++)ot[wt]=am(ot[wt],vt)}let Ye,ct;if(q){const ot=y.getValueAndResolveTokens("text-field",Qe,u,ue),ft=Ri.factory(ot);a_(ft)&&(this.hasRTLText=!0),(!this.hasRTLText||he()==="unavailable"||this.hasRTLText&&Le.isParsed())&&(Ye=gg(ft,y,Qe))}if(K){const ot=y.getValueAndResolveTokens("icon-image",Qe,u,ue);ct=ot instanceof Di?ot:Di.fromString(ot)}if(!Ye&&!ct)continue;const Tt=this.sortFeaturesByKey?J.evaluate(Qe,{},u):void 0;if(this.features.push({id:Se,text:Ye,icon:ct,index:$e,sourceLayerIndex:Be,geometry:Qe.geometry,properties:Oe.properties,type:o_[Oe.type],sortKey:Tt}),ct&&(Q[ct.name]=!0),Ye){const ot=I.evaluate(Qe,{},u).join(","),ft=w.get("text-rotation-alignment")==="map"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(rr.vertical)>=0;for(const vt of Ye.sections)if(vt.image)Q[vt.image.name]=!0;else{const wt=f(Ye.toString()),At=vt.fontStack||ot,st=ne[At]=ne[At]||{};this.calculateGlyphDependencies(vt.text,st,ft,this.allowVerticalPlacement,wt)}}}w.get("symbol-placement")==="line"&&(this.features=function(Oe){const Se={},$e={},Be=[];let Me=0;function Qe(ot){Be.push(Oe[ot]),Me++}function Ye(ot,ft,vt){const wt=$e[ot];return delete $e[ot],$e[ft]=wt,Be[wt].geometry[0].pop(),Be[wt].geometry[0]=Be[wt].geometry[0].concat(vt[0]),wt}function ct(ot,ft,vt){const wt=Se[ft];return delete Se[ft],Se[ot]=wt,Be[wt].geometry[0].shift(),Be[wt].geometry[0]=vt[0].concat(Be[wt].geometry[0]),wt}function Tt(ot,ft,vt){const wt=vt?ft[0][ft[0].length-1]:ft[0][0];return`${ot}:${wt.x}:${wt.y}`}for(let ot=0;ot<Oe.length;ot++){const ft=Oe[ot],vt=ft.geometry,wt=ft.text?ft.text.toString():null;if(!wt){Qe(ot);continue}const At=Tt(wt,vt),st=Tt(wt,vt,!0);if(At in $e&&st in Se&&$e[At]!==Se[st]){const Pt=ct(At,st,vt),nn=Ye(At,st,Be[Pt].geometry);delete Se[At],delete $e[st],$e[Tt(wt,Be[nn].geometry,!0)]=nn,Be[Pt].geometry=null}else At in $e?Ye(At,st,vt):st in Se?ct(At,st,vt):(Qe(ot),Se[At]=Me-1,$e[st]=Me-1)}return Be.filter(ot=>ot.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Oe,Se)=>Oe.sortKey-Se.sortKey)}update(i,a,u,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,a,this.layers,u,m),this.icon.programConfigurations.updatePaintArrays(i,a,this.layers,u,m))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=bh(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,a){const u=this.lineVertexArray.length,m=i.segment;if(m!==void 0){let y=i.dist(a[m+1]),w=i.dist(a[m]);const R={};for(let I=m+1;I<a.length;I++)R[I]={x:a[I].x,y:a[I].y,tileUnitDistanceFromAnchor:y},I<a.length-1&&(y+=a[I+1].dist(a[I]));for(let I=m||0;I>=0;I--)R[I]={x:a[I].x,y:a[I].y,tileUnitDistanceFromAnchor:w},I>0&&(w+=a[I-1].dist(a[I]));for(let I=0;I<a.length;I++){const D=R[I];this.lineVertexArray.emplaceBack(D.x,D.y,D.tileUnitDistanceFromAnchor)}}return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(i,a,u,m,y,w,R,I,D,j,q,K,J,Q){const ne=i.indexArray,ue=i.layoutVertexArray,Te=i.globeExtVertexArray,Oe=i.segments.prepareSegment(4*a.length,ue,ne,this.canOverlap?w.sortKey:void 0),Se=this.glyphOffsetArray.length,$e=Oe.vertexLength,Be=this.allowVerticalPlacement&&R===rr.vertical?Math.PI/2:0,Me=w.text&&w.text.sections;for(let Ye=0;Ye<a.length;Ye++){const{tl:ct,tr:Tt,bl:ot,br:ft,tex:vt,pixelOffsetTL:wt,pixelOffsetBR:At,minFontScaleX:st,minFontScaleY:Pt,glyphOffset:nn,isSDF:Ft,sectionIndex:Wt}=a[Ye],Bt=Oe.vertexLength,sn=nn[1];if(Uu(ue,D.x,D.y,ct.x,sn+ct.y,vt.x,vt.y,u,Ft,wt.x,wt.y,st,Pt),Uu(ue,D.x,D.y,Tt.x,sn+Tt.y,vt.x+vt.w,vt.y,u,Ft,At.x,wt.y,st,Pt),Uu(ue,D.x,D.y,ot.x,sn+ot.y,vt.x,vt.y+vt.h,u,Ft,wt.x,At.y,st,Pt),Uu(ue,D.x,D.y,ft.x,sn+ft.y,vt.x+vt.w,vt.y+vt.h,u,Ft,At.x,At.y,st,Pt),I){const _n=I.anchor,bn=I.up;ju(Te,_n.x,_n.y,_n.z,bn[0],bn[1],bn[2]),ju(Te,_n.x,_n.y,_n.z,bn[0],bn[1],bn[2]),ju(Te,_n.x,_n.y,_n.z,bn[0],bn[1],bn[2]),ju(Te,_n.x,_n.y,_n.z,bn[0],bn[1],bn[2]),Gu(i.dynamicLayoutVertexArray,_n.x,_n.y,_n.z,Be)}else Gu(i.dynamicLayoutVertexArray,D.x,D.y,D.z,Be);ne.emplaceBack(Bt,Bt+1,Bt+2),ne.emplaceBack(Bt+1,Bt+2,Bt+3),Oe.vertexLength+=4,Oe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(nn[0]),Ye!==a.length-1&&Wt===a[Ye+1].sectionIndex||i.programConfigurations.populatePaintArrays(ue.length,w,w.index,{},J,Q,Me&&Me[Wt])}const Qe=I?I.anchor:D;i.placedSymbolArray.emplaceBack(Qe.x,Qe.y,Qe.z,D.x,D.y,Se,this.glyphOffsetArray.length-Se,$e,j,q,D.segment,u?u[0]:0,u?u[1]:0,m[0],m[1],R,0,!1,0,K,0)}_commitLayoutVertex(i,a,u,m,y,w,R){i.emplaceBack(a,u,m,y,w,Math.round(R.x),Math.round(R.y))}_addCollisionDebugVertices(i,a,u,m,y,w,R){const I=u.segments.prepareSegment(4,u.layoutVertexArray,u.indexArray),D=I.vertexLength,j=R.tileAnchorX,q=R.tileAnchorY;for(let J=0;J<4;J++)u.collisionVertexArray.emplaceBack(0,0,0,0);u.collisionVertexArrayExt.emplaceBack(a,-i.padding,-i.padding),u.collisionVertexArrayExt.emplaceBack(a,i.padding,-i.padding),u.collisionVertexArrayExt.emplaceBack(a,i.padding,i.padding),u.collisionVertexArrayExt.emplaceBack(a,-i.padding,i.padding),this._commitLayoutVertex(u.layoutVertexArray,m,y,w,j,q,new Z(i.x1,i.y1)),this._commitLayoutVertex(u.layoutVertexArray,m,y,w,j,q,new Z(i.x2,i.y1)),this._commitLayoutVertex(u.layoutVertexArray,m,y,w,j,q,new Z(i.x2,i.y2)),this._commitLayoutVertex(u.layoutVertexArray,m,y,w,j,q,new Z(i.x1,i.y2)),I.vertexLength+=4;const K=u.indexArray;K.emplaceBack(D,D+1),K.emplaceBack(D+1,D+2),K.emplaceBack(D+2,D+3),K.emplaceBack(D+3,D),I.primitiveLength+=4}_addTextDebugCollisionBoxes(i,a,u,m,y,w){for(let R=m;R<y;R++){const I=u.get(R),D=this.getSymbolInstanceTextSize(i,w,a,R);this._addCollisionDebugVertices(I,D,this.textCollisionBox,I.projectedAnchorX,I.projectedAnchorY,I.projectedAnchorZ,w)}}_addIconDebugCollisionBoxes(i,a,u,m,y,w){for(let R=m;R<y;R++){const I=u.get(R),D=this.getSymbolInstanceIconSize(i,a,w.placedIconSymbolIndex);this._addCollisionDebugVertices(I,D,this.iconCollisionBox,I.projectedAnchorX,I.projectedAnchorY,I.projectedAnchorZ,w)}}generateCollisionDebugBuffers(i,a){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Yd(Hn,If.members,tr),this.iconCollisionBox=new Yd(Hn,If.members,tr);const u=Sa(this.iconSizeData,i),m=Sa(this.textSizeData,i);for(let y=0;y<this.symbolInstances.length;y++){const w=this.symbolInstances.get(y);this._addTextDebugCollisionBoxes(m,i,a,w.textBoxStartIndex,w.textBoxEndIndex,w),this._addTextDebugCollisionBoxes(m,i,a,w.verticalTextBoxStartIndex,w.verticalTextBoxEndIndex,w),this._addIconDebugCollisionBoxes(u,i,a,w.iconBoxStartIndex,w.iconBoxEndIndex,w),this._addIconDebugCollisionBoxes(u,i,a,w.verticalIconBoxStartIndex,w.verticalIconBoxEndIndex,w)}}getSymbolInstanceTextSize(i,a,u,m){const y=this.text.placedSymbolArray.get(a.rightJustifiedTextSymbolIndex>=0?a.rightJustifiedTextSymbolIndex:a.centerJustifiedTextSymbolIndex>=0?a.centerJustifiedTextSymbolIndex:a.leftJustifiedTextSymbolIndex>=0?a.leftJustifiedTextSymbolIndex:a.verticalPlacedTextSymbolIndex>=0?a.verticalPlacedTextSymbolIndex:m),w=Nu(this.textSizeData,i,y)/ki;return this.tilePixelRatio*w}getSymbolInstanceIconSize(i,a,u){const m=this.icon.placedSymbolArray.get(u),y=Nu(this.iconSizeData,i,m);return this.tilePixelRatio*y}_commitDebugCollisionVertexUpdate(i,a,u){i.emplaceBack(a,-u,-u),i.emplaceBack(a,u,-u),i.emplaceBack(a,u,u),i.emplaceBack(a,-u,u)}_updateTextDebugCollisionBoxes(i,a,u,m,y,w){for(let R=m;R<y;R++){const I=u.get(R),D=this.getSymbolInstanceTextSize(i,w,a,R);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,D,I.padding)}}_updateIconDebugCollisionBoxes(i,a,u,m,y,w){for(let R=m;R<y;R++){const I=u.get(R),D=this.getSymbolInstanceIconSize(i,a,w);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,D,I.padding)}}updateCollisionDebugBuffers(i,a){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const u=Sa(this.iconSizeData,i),m=Sa(this.textSizeData,i);for(let y=0;y<this.symbolInstances.length;y++){const w=this.symbolInstances.get(y);this._updateTextDebugCollisionBoxes(m,i,a,w.textBoxStartIndex,w.textBoxEndIndex,w),this._updateTextDebugCollisionBoxes(m,i,a,w.verticalTextBoxStartIndex,w.verticalTextBoxEndIndex,w),this._updateIconDebugCollisionBoxes(u,i,a,w.iconBoxStartIndex,w.iconBoxEndIndex,w.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(u,i,a,w.verticalIconBoxStartIndex,w.verticalIconBoxEndIndex,w.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(i,a,u,m,y,w,R,I,D){const j={};for(let q=a;q<u;q++){const K=i.get(q);j.textBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,padding:K.padding,projectedAnchorX:K.projectedAnchorX,projectedAnchorY:K.projectedAnchorY,projectedAnchorZ:K.projectedAnchorZ,tileAnchorX:K.tileAnchorX,tileAnchorY:K.tileAnchorY},j.textFeatureIndex=K.featureIndex;break}for(let q=m;q<y;q++){const K=i.get(q);j.verticalTextBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,padding:K.padding,projectedAnchorX:K.projectedAnchorX,projectedAnchorY:K.projectedAnchorY,projectedAnchorZ:K.projectedAnchorZ,tileAnchorX:K.tileAnchorX,tileAnchorY:K.tileAnchorY},j.verticalTextFeatureIndex=K.featureIndex;break}for(let q=w;q<R;q++){const K=i.get(q);j.iconBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,padding:K.padding,projectedAnchorX:K.projectedAnchorX,projectedAnchorY:K.projectedAnchorY,projectedAnchorZ:K.projectedAnchorZ,tileAnchorX:K.tileAnchorX,tileAnchorY:K.tileAnchorY},j.iconFeatureIndex=K.featureIndex;break}for(let q=I;q<D;q++){const K=i.get(q);j.verticalIconBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,padding:K.padding,projectedAnchorX:K.projectedAnchorX,projectedAnchorY:K.projectedAnchorY,projectedAnchorZ:K.projectedAnchorZ,tileAnchorX:K.tileAnchorX,tileAnchorY:K.tileAnchorY},j.verticalIconFeatureIndex=K.featureIndex;break}return j}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const u=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,a){const u=i.placedSymbolArray.get(a),m=u.vertexStartIndex+4*u.numGlyphs;for(let y=u.vertexStartIndex;y<m;y+=4)i.indexArray.emplaceBack(y,y+1,y+2),i.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(i),u=Math.cos(i),m=[],y=[],w=[];for(let R=0;R<this.symbolInstances.length;++R){w.push(R);const I=this.symbolInstances.get(R);m.push(0|Math.round(a*I.tileAnchorX+u*I.tileAnchorY)),y.push(I.featureIndex)}return w.sort((R,I)=>m[R]-m[I]||y[I]-y[R]),w}addToSortKeyRanges(i,a){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===a?u.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const u=this.symbolInstances.get(a);this.featureSortOrder.push(u.featureIndex),[u.rightJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.leftJustifiedTextSymbolIndex].forEach((m,y,w)=>{m>=0&&w.indexOf(m)===y&&this.addIndicesForPlacedSymbol(this.text,m)}),u.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,u.verticalPlacedTextSymbolIndex),u.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,u.placedIconSymbolIndex),u.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,u.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Gt(Uo,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Uo.MAX_GLYPHS=65535,Uo.addDynamicAttributes=Gu;const l_=new Mt({"symbol-placement":new We(lt.layout_symbol["symbol-placement"]),"symbol-spacing":new We(lt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new We(lt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ue(lt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new We(lt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new We(lt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new We(lt.layout_symbol["icon-ignore-placement"]),"icon-optional":new We(lt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new We(lt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ue(lt.layout_symbol["icon-size"]),"icon-text-fit":new We(lt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new We(lt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ue(lt.layout_symbol["icon-image"]),"icon-rotate":new Ue(lt.layout_symbol["icon-rotate"]),"icon-padding":new We(lt.layout_symbol["icon-padding"]),"icon-keep-upright":new We(lt.layout_symbol["icon-keep-upright"]),"icon-offset":new Ue(lt.layout_symbol["icon-offset"]),"icon-anchor":new Ue(lt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new We(lt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new We(lt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new We(lt.layout_symbol["text-rotation-alignment"]),"text-field":new Ue(lt.layout_symbol["text-field"]),"text-font":new Ue(lt.layout_symbol["text-font"]),"text-size":new Ue(lt.layout_symbol["text-size"]),"text-max-width":new Ue(lt.layout_symbol["text-max-width"]),"text-line-height":new Ue(lt.layout_symbol["text-line-height"]),"text-letter-spacing":new Ue(lt.layout_symbol["text-letter-spacing"]),"text-justify":new Ue(lt.layout_symbol["text-justify"]),"text-radial-offset":new Ue(lt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new We(lt.layout_symbol["text-variable-anchor"]),"text-anchor":new Ue(lt.layout_symbol["text-anchor"]),"text-max-angle":new We(lt.layout_symbol["text-max-angle"]),"text-writing-mode":new We(lt.layout_symbol["text-writing-mode"]),"text-rotate":new Ue(lt.layout_symbol["text-rotate"]),"text-padding":new We(lt.layout_symbol["text-padding"]),"text-keep-upright":new We(lt.layout_symbol["text-keep-upright"]),"text-transform":new Ue(lt.layout_symbol["text-transform"]),"text-offset":new Ue(lt.layout_symbol["text-offset"]),"text-allow-overlap":new We(lt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new We(lt.layout_symbol["text-ignore-placement"]),"text-optional":new We(lt.layout_symbol["text-optional"])});var Xd={paint:new Mt({"icon-opacity":new Ue(lt.paint_symbol["icon-opacity"]),"icon-color":new Ue(lt.paint_symbol["icon-color"]),"icon-halo-color":new Ue(lt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ue(lt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ue(lt.paint_symbol["icon-halo-blur"]),"icon-translate":new We(lt.paint_symbol["icon-translate"]),"icon-translate-anchor":new We(lt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ue(lt.paint_symbol["text-opacity"]),"text-color":new Ue(lt.paint_symbol["text-color"],{runtimeType:sr,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new Ue(lt.paint_symbol["text-halo-color"]),"text-halo-width":new Ue(lt.paint_symbol["text-halo-width"]),"text-halo-blur":new Ue(lt.paint_symbol["text-halo-blur"]),"text-translate":new We(lt.paint_symbol["text-translate"]),"text-translate-anchor":new We(lt.paint_symbol["text-translate-anchor"])}),layout:l_};class xh{constructor(i){this.type=i.property.overrides?i.property.overrides.runtimeType:Co,this.defaultValue=i}evaluate(i){if(i.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(i.formattedSection))return a.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Gt(xh,"FormatSectionOverride",{omit:["defaultValue"]});class Hu extends Ar{constructor(i){super(i,Xd)}recalculate(i,a){super.recalculate(i,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const u=this.layout.get("text-writing-mode");if(u){const m=[];for(const y of u)m.indexOf(y)<0&&m.push(y);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(i,a,u,m){const y=this.layout.get(i).evaluate(a,{},u,m),w=this._unevaluatedLayout._values[i];return w.isDataDriven()||ss(w.value)||!y?y:function(R,I){return I.replace(/{([^{}]+)}/g,(D,j)=>j in R?String(R[j]):"")}(a.properties,y)}createBucket(i){return new Uo(i)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const i of Xd.paint.overridableProperties){if(!Hu.hasPaintOverride(this.layout,i))continue;const a=this.paint.get(i),u=new xh(a),m=new os(u,a.property.specification);let y=null;y=a.value.kind==="constant"||a.value.kind==="source"?new Qs("source",m):new ea("composite",m,a.value.zoomStops,a.value._interpolationType),this.paint._values[i]=new _t(a.property,y,a.parameters)}}_handleOverridablePaintPropertyUpdate(i,a,u){return!(!this.layout||a.isDataDriven()||u.isDataDriven())&&Hu.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,a){const u=i.get("text-field"),m=Xd.paint.properties[a];let y=!1;const w=R=>{for(const I of R)if(m.overrides&&m.overrides.hasOverride(I))return void(y=!0)};if(u.value.kind==="constant"&&u.value.value instanceof Ri)w(u.value.value.sections);else if(u.value.kind==="source"){const R=D=>{y||(D instanceof Jo&&ui(D.value)===To?w(D.value.sections):D instanceof Or?w(D.sections):D.eachChild(R))},I=u.value;I._styleExpression&&R(I._styleExpression.expression)}return y}getProgramConfiguration(i){return new Bo(this,i)}}var c_={paint:new Mt({"background-color":new We(lt.paint_background["background-color"]),"background-pattern":new Nt(lt.paint_background["background-pattern"]),"background-opacity":new We(lt.paint_background["background-opacity"])})},u_={paint:new Mt({"raster-opacity":new We(lt.paint_raster["raster-opacity"]),"raster-hue-rotate":new We(lt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new We(lt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new We(lt.paint_raster["raster-brightness-max"]),"raster-saturation":new We(lt.paint_raster["raster-saturation"]),"raster-contrast":new We(lt.paint_raster["raster-contrast"]),"raster-resampling":new We(lt.paint_raster["raster-resampling"]),"raster-fade-duration":new We(lt.paint_raster["raster-fade-duration"])})};class d_ extends Ar{constructor(i){super(i,{}),this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)}onRemove(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)}}var p_={paint:new Mt({"sky-type":new We(lt.paint_sky["sky-type"]),"sky-atmosphere-sun":new We(lt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new We(lt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new We(lt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new We(lt.paint_sky["sky-gradient-radius"]),"sky-gradient":new Lt(lt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new We(lt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new We(lt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new We(lt.paint_sky["sky-opacity"])})};function Jd(s,i,a){const u=[0,0,1],m=tf([]);return rf(m,m,a?-ce(s)+Math.PI:ce(s)),nf(m,m,-ce(i)),Xp(u,u,m),zi(u,u)}const f_={circle:class extends Ar{constructor(s){super(s,hm)}createBucket(s){return new md(s)}queryRadius(s){const i=s;return ya("circle-radius",this,i)+ya("circle-stroke-width",this,i)+vu(this.paint.get("circle-translate"))}queryIntersectsFeature(s,i,a,u,m,y,w,R){const I=Gp(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),y.angle,s.pixelToTileUnitsFactor),D=this.paint.get("circle-radius").evaluate(i,a)+this.paint.get("circle-stroke-width").evaluate(i,a);return of(s,u,y,w,R,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",I,D)}getProgramIds(){return["circle"]}getProgramConfiguration(s){return new Bo(this,s)}},heatmap:class extends Ar{createBucket(s){return new af(s)}constructor(s){super(s,wm),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Ad({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(s){return ya("heatmap-radius",this,s)}queryIntersectsFeature(s,i,a,u,m,y,w,R){const I=this.paint.get("heatmap-radius").evaluate(i,a);return of(s,u,y,w,R,!0,!0,new Z(0,0),I)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(s){return new Bo(this,s)}},hillshade:class extends Ar{constructor(s){super(s,Em)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Ar{constructor(s){super(s,zm)}getProgramIds(){const s=this.paint.get("fill-pattern"),i=s&&s.constantOr(1),a=[i?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&a.push(i&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),a}getProgramConfiguration(s){return new Bo(this,s)}recalculate(s,i){super.recalculate(s,i);const a=this.paint._values["fill-outline-color"];a.value.kind==="constant"&&a.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new Su(s)}queryRadius(){return vu(this.paint.get("fill-translate"))}queryIntersectsFeature(s,i,a,u,m,y){return!s.queryGeometry.isAboveHorizon&&zp(jp(s.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),y.angle,s.pixelToTileUnitsFactor),u)}isTileClipped(){return!0}},"fill-extrusion":class extends Ar{constructor(s){super(s,tg)}createBucket(s){return new Kl(s)}queryRadius(){return vu(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(s){return new Bo(this,s)}queryIntersectsFeature(s,i,a,u,m,y,w,R,I){const D=Gp(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),y.angle,s.pixelToTileUnitsFactor),j=this.paint.get("fill-extrusion-height").evaluate(i,a),q=this.paint.get("fill-extrusion-base").evaluate(i,a),K=[0,0],J=R&&y.elevation,Q=y.elevation?y.elevation.exaggeration():1,ne=s.tile.getBucket(this);if(J&&ne instanceof Kl){const $e=ne.centroidVertexArray,Be=I+1;if(Be<$e.length){const Me=$e.get(Be);K[0]=Me.a_centroid_pos0,K[1]=Me.a_centroid_pos1}}if(K[0]===0&&K[1]===1)return!1;y.projection.name==="globe"&&(u=Sf([u],[new Z(0,0),new Z(cn,cn)],s.tileID.canonical).map($e=>$e.polygon).flat());const ue=J?R:null,[Te,Oe]=function($e,Be,Me,Qe,Ye,ct,Tt,ot,ft,vt,wt){return $e.projection.name==="globe"?function(At,st,Pt,nn,Ft,Wt,Bt,sn,_n,bn,kn){const mn=[],Jn=[],wn=At.projection.upVectorScale(kn,At.center.lat,At.worldSize).metersToTile,An=[0,0,0,1],Un=[0,0,0,1],Zn=(Yn,Qn,ni,bi)=>{Yn[0]=Qn,Yn[1]=ni,Yn[2]=bi,Yn[3]=1},Kn=Cf();Pt>0&&(Pt+=Kn),nn+=Kn;for(const Yn of st){const Qn=[],ni=[];for(const bi of Yn){const Dn=bi.x+Ft.x,fi=bi.y+Ft.y,li=At.projection.projectTilePoint(Dn,fi,kn),$n=At.projection.upVector(kn,bi.x,bi.y);let ti=Pt,mi=nn;if(Bt){const jn=Rf(Dn,fi,Pt,nn,Bt,sn,_n,bn);ti+=jn.base,mi+=jn.top}Pt!==0?Zn(An,li.x+$n[0]*wn*ti,li.y+$n[1]*wn*ti,li.z+$n[2]*wn*ti):Zn(An,li.x,li.y,li.z),Zn(Un,li.x+$n[0]*wn*mi,li.y+$n[1]*wn*mi,li.z+$n[2]*wn*mi),pi(An,An,Wt),pi(Un,Un,Wt),Qn.push(new Ca(An[0],An[1],An[2])),ni.push(new Ca(Un[0],Un[1],Un[2]))}mn.push(Qn),Jn.push(ni)}return[mn,Jn]}($e,Be,Me,Qe,Ye,ct,Tt,ot,ft,vt,wt):Tt?function(At,st,Pt,nn,Ft,Wt,Bt,sn,_n){const bn=[],kn=[],mn=[0,0,0,1];for(const Jn of At){const wn=[],An=[];for(const Un of Jn){const Zn=Un.x+nn.x,Kn=Un.y+nn.y,Yn=Rf(Zn,Kn,st,Pt,Wt,Bt,sn,_n);mn[0]=Zn,mn[1]=Kn,mn[2]=Yn.base,mn[3]=1,Es(mn,mn,Ft),mn[3]=Math.max(mn[3],1e-5);const Qn=new Ca(mn[0]/mn[3],mn[1]/mn[3],mn[2]/mn[3]);mn[0]=Zn,mn[1]=Kn,mn[2]=Yn.top,mn[3]=1,Es(mn,mn,Ft),mn[3]=Math.max(mn[3],1e-5);const ni=new Ca(mn[0]/mn[3],mn[1]/mn[3],mn[2]/mn[3]);wn.push(Qn),An.push(ni)}bn.push(wn),kn.push(An)}return[bn,kn]}(Be,Me,Qe,Ye,ct,Tt,ot,ft,vt):function(At,st,Pt,nn,Ft){const Wt=[],Bt=[],sn=Ft[8]*st,_n=Ft[9]*st,bn=Ft[10]*st,kn=Ft[11]*st,mn=Ft[8]*Pt,Jn=Ft[9]*Pt,wn=Ft[10]*Pt,An=Ft[11]*Pt;for(const Un of At){const Zn=[],Kn=[];for(const Yn of Un){const Qn=Yn.x+nn.x,ni=Yn.y+nn.y,bi=Ft[0]*Qn+Ft[4]*ni+Ft[12],Dn=Ft[1]*Qn+Ft[5]*ni+Ft[13],fi=Ft[2]*Qn+Ft[6]*ni+Ft[14],li=Ft[3]*Qn+Ft[7]*ni+Ft[15],$n=bi+sn,ti=Dn+_n,mi=fi+bn,jn=Math.max(li+kn,1e-5),ri=bi+mn,Mi=Dn+Jn,xi=fi+wn,wi=Math.max(li+An,1e-5);Zn.push(new Ca($n/jn,ti/jn,mi/jn)),Kn.push(new Ca(ri/wi,Mi/wi,xi/wi))}Wt.push(Zn),Bt.push(Kn)}return[Wt,Bt]}(Be,Me,Qe,Ye,ct)}(y,u,q,j,D,w,ue,K,Q,y.center.lat,s.tileID.canonical),Se=s.queryGeometry;return function($e,Be,Me){let Qe=1/0;zp(Me,Be)&&(Qe=kf(Me,Be[0]));for(let Ye=0;Ye<Be.length;Ye++){const ct=Be[Ye],Tt=$e[Ye];for(let ot=0;ot<ct.length-1;ot++){const ft=ct[ot],vt=[ft,ct[ot+1],Tt[ot+1],Tt[ot],ft];Bp(Me,vt)&&(Qe=Math.min(Qe,kf(Me,vt)))}}return Qe!==1/0&&Qe}(Te,Oe,Se.isPointQuery()?Se.screenBounds:Se.screenGeometry)}},line:class extends Ar{constructor(s){super(s,$f),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(s){if(s==="line-gradient"){const i=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=i._styleExpression&&i._styleExpression.expression instanceof Ro,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(s,i){super.recalculate(s,i),this.paint._values["line-floorwidth"]=Nf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new $u(s)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(s){return new Bo(this,s)}queryRadius(s){const i=s,a=Mf(ya("line-width",this,i),ya("line-gap-width",this,i)),u=ya("line-offset",this,i);return a/2+Math.abs(u)+vu(this.paint.get("line-translate"))}queryIntersectsFeature(s,i,a,u,m,y){if(s.queryGeometry.isAboveHorizon)return!1;const w=jp(s.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),y.angle,s.pixelToTileUnitsFactor),R=s.pixelToTileUnitsFactor/2*Mf(this.paint.get("line-width").evaluate(i,a),this.paint.get("line-gap-width").evaluate(i,a)),I=this.paint.get("line-offset").evaluate(i,a);return I&&(u=function(D,j){const q=[],K=new Z(0,0);for(let J=0;J<D.length;J++){const Q=D[J],ne=[];for(let ue=0;ue<Q.length;ue++){const Te=Q[ue-1],Oe=Q[ue],Se=Q[ue+1],$e=ue===0?K:Oe.sub(Te)._unit()._perp(),Be=ue===Q.length-1?K:Se.sub(Oe)._unit()._perp(),Me=$e._add(Be)._unit();Me._mult(1/(Me.x*Be.x+Me.y*Be.y)),ne.push(Me._mult(j)._add(Oe))}q.push(ne)}return q}(u,I*s.pixelToTileUnitsFactor)),function(D,j,q){for(let K=0;K<j.length;K++){const J=j[K];if(D.length>=3){for(let Q=0;Q<J.length;Q++)if(xs(D,J[Q]))return!0}if(um(D,J,q))return!0}return!1}(w,u,R)}isTileClipped(){return!0}},symbol:Hu,background:class extends Ar{constructor(s){super(s,c_)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Ar{constructor(s){super(s,u_)}getProgramIds(){return["raster"]}},sky:class extends Ar{constructor(s){super(s,p_),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="sky-gradient"?this._updateColorRamp():s!=="sky-atmosphere-sun"&&s!=="sky-atmosphere-halo-color"&&s!=="sky-atmosphere-color"&&s!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Ad({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(s){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const i=s.style.light.properties.get("position");return this._lightPosition.azimuthal!==i.azimuthal||this._lightPosition.polar!==i.polar}return!1}getCenter(s,i){if(this.paint.get("sky-type")==="atmosphere"){const u=this.paint.get("sky-atmosphere-sun"),m=!u,y=s.style.light,w=y.properties.get("position");return m&&y.properties.get("anchor")==="viewport"&&Ht("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),m?Jd(w.azimuthal,90-w.polar,i):Jd(u[0],90-u[1],i)}const a=this.paint.get("sky-gradient-center");return Jd(a[0],90-a[1],i)}is3D(){return!1}isSky(){return!0}markSkyboxValid(s){this._skyboxInvalidated=!1,this._lightPosition=s.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const s=this.paint.get("sky-type");return s==="atmosphere"?["skyboxCapture","skybox"]:s==="gradient"?["skyboxGradient"]:null}}};class lc{constructor(i,a,u,m){this.context=i,this.format=u,this.texture=i.gl.createTexture(),this.update(a,m)}update(i,a,u){const{width:m,height:y}=i,{context:w}=this,{gl:R}=w,{HTMLImageElement:I,HTMLCanvasElement:D,HTMLVideoElement:j,ImageData:q,ImageBitmap:K}=v;if(R.bindTexture(R.TEXTURE_2D,this.texture),w.pixelStoreUnpackFlipY.set(!1),w.pixelStoreUnpack.set(1),w.pixelStoreUnpackPremultiplyAlpha.set(this.format===R.RGBA&&(!a||a.premultiply!==!1)),u||this.size&&this.size[0]===m&&this.size[1]===y){const{x:J,y:Q}=u||{x:0,y:0};i instanceof I||i instanceof D||i instanceof j||i instanceof q||K&&i instanceof K?R.texSubImage2D(R.TEXTURE_2D,0,J,Q,R.RGBA,R.UNSIGNED_BYTE,i):R.texSubImage2D(R.TEXTURE_2D,0,J,Q,m,y,R.RGBA,R.UNSIGNED_BYTE,i.data)}else this.size=[m,y],i instanceof I||i instanceof D||i instanceof j||i instanceof q||K&&i instanceof K?R.texImage2D(R.TEXTURE_2D,0,this.format,this.format,R.UNSIGNED_BYTE,i):R.texImage2D(R.TEXTURE_2D,0,this.format,m,y,0,this.format,R.UNSIGNED_BYTE,i.data);this.useMipmap=Boolean(a&&a.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&R.generateMipmap(R.TEXTURE_2D)}bind(i,a){const{context:u}=this,{gl:m}=u;m.bindTexture(m.TEXTURE_2D,this.texture),i!==this.filter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,i),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,this.useMipmap?i===m.NEAREST?m.NEAREST_MIPMAP_NEAREST:m.LINEAR_MIPMAP_NEAREST:i),this.filter=i),a!==this.wrap&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,a),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,a),this.wrap=a)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}class h_{constructor(i){this._callback=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class m_{constructor(){this.tasks={},this.taskQueue=[],Ot(["process"],this),this.invoker=new h_(this.process),this.nextId=0}add(i,a){const u=this.nextId++,m=function({type:y,isSymbolTile:w,zoom:R}){return R=R||0,y==="message"?0:y!=="maybePrepare"||w?y!=="parseTile"||w?y==="parseTile"&&w?300-R:y==="maybePrepare"&&w?400-R:500:200-R:100-R}(a);if(m===0){et();try{i()}finally{}return{cancel:()=>{}}}return this.tasks[u]={fn:i,metadata:a,priority:m,id:u},this.taskQueue.push(u),this.invoker.trigger(),{cancel:()=>{delete this.tasks[u]}}}process(){et();try{if(this.taskQueue=this.taskQueue.filter(u=>!!this.tasks[u]),!this.taskQueue.length)return;const i=this.pick();if(i===null)return;const a=this.tasks[i];if(delete this.tasks[i],this.taskQueue.length&&this.invoker.trigger(),!a)return;a.fn()}finally{}}pick(){let i=null,a=1/0;for(let m=0;m<this.taskQueue.length;m++){const y=this.tasks[this.taskQueue[m]];y.priority<a&&(a=y.priority,i=m)}if(i===null)return null;const u=this.taskQueue[i];return this.taskQueue.splice(i,1),u}remove(){this.invoker.remove()}}class wh{constructor(i){this._stringToNumber={},this._numberToString=[];for(let a=0;a<i.length;a++){const u=i[a];this._stringToNumber[u]=a,this._numberToString[a]=u}}encode(i){return this._stringToNumber[i]}decode(i){return this._numberToString[i]}}const g_=["tile","layer","source","sourceLayer","state"];class Eh{constructor(i,a,u,m,y){this.type="Feature",this._vectorTileFeature=i,this._z=a,this._x=u,this._y=m,this.properties=i.properties,this.id=y}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={type:"Feature",geometry:this.geometry,properties:this.properties};this.id!==void 0&&(i.id=this.id);for(const a of g_)this[a]!==void 0&&(i[a]=this[a]);return i}}const _r=32,Kr=33,jo=new Uint16Array(8184);for(let s=0;s<2046;s++){let i=s+2,a=0,u=0,m=0,y=0,w=0,R=0;for(1&i?m=y=w=_r:a=u=R=_r;(i>>=1)>1;){const D=a+m>>1,j=u+y>>1;1&i?(m=a,y=u,a=w,u=R):(a=m,u=y,m=w,y=R),w=D,R=j}const I=4*s;jo[I+0]=a,jo[I+1]=u,jo[I+2]=m,jo[I+3]=y}const Wr=new Uint16Array(2178),Go=new Uint8Array(1089),qu=new Uint16Array(1089);function Ch(s){return s===0?-.03125:s===32?.03125:0}var Sh=It([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Th={type:2,extent:cn,loadGeometry:()=>[[new Z(0,0),new Z(8193,0),new Z(8193,8193),new Z(0,8193),new Z(0,0)]]};class Qd{constructor(i,a,u,m,y){this.tileID=i,this.uid=un(),this.uses=0,this.tileSize=a,this.tileZoom=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=y,this.expiredRequestCount=0,this.state="loading",m&&m.transform&&(this.projection=m.transform.projection)}registerFadeDuration(i){const a=i+this.timeAdded;a<Nn.now()||this.fadeEndTime&&a<this.fadeEndTime||(this.fadeEndTime=a)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Ts(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(i,a,u){if(this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(m,y){const w={};if(!y)return w;for(const R of m){const I=R.layerIds.map(D=>y.getLayer(D)).filter(Boolean);if(I.length!==0){R.layers=I,R.stateDependentLayerIds&&(R.stateDependentLayers=R.stateDependentLayerIds.map(D=>I.filter(j=>j.id===D)[0]));for(const D of I)w[D.id]=R}}return w}(i.buckets,a.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const y=this.buckets[m];if(y instanceof Uo){if(this.hasSymbolBuckets=!0,!u)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const y=this.buckets[m];if(y instanceof Uo&&y.hasRTLText){this.hasRTLText=!0,Le.isLoading()||Le.isLoaded()||he()!=="deferred"||Ie();break}}this.queryPadding=0;for(const m in this.buckets){const y=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(m).queryRadius(y))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage),i.lineAtlas&&(this.lineAtlas=i.lineAtlas)}else this.collisionBoxArray=new ld}unloadVectorData(){if(this.hasData()){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(i){return this.buckets[i.id]}upload(i){for(const u in this.buckets){const m=this.buckets[u];m.uploadPending()&&m.upload(i)}const a=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new lc(i,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new lc(i,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new lc(i,this.lineAtlas.image,a.ALPHA),this.lineAtlas.uploaded=!0)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,a,u,m,y,w,R,I){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:m,pixelPosMatrix:R,transform:w,params:y,tileTransform:this.tileTransform},i,a,u):{}}querySourceFeatures(i,a){const u=this.latestFeatureIndex;if(!u||!u.rawTileData)return;const m=u.loadVTLayers(),y=a?a.sourceLayer:"",w=m._geojsonTileLayer||m[y];if(!w)return;const R=na(a&&a.filter),{z:I,x:D,y:j}=this.tileID.canonical,q={z:I,x:D,y:j};for(let K=0;K<w.length;K++){const J=w.feature(K);if(R.needGeometry){const ue=bs(J,!0);if(!R.filter(new Ae(this.tileID.overscaledZ),ue,this.tileID.canonical))continue}else if(!R.filter(new Ae(this.tileID.overscaledZ),J))continue;const Q=u.getId(J,y),ne=new Eh(J,I,D,j,Q);ne.tile=q,i.push(ne)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const a=this.expirationTime;if(i.cacheControl){const u=xt(i.cacheControl);u["max-age"]&&(this.expirationTime=Date.now()+1e3*u["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const u=Date.now();let m=!1;if(this.expirationTime>u)m=!1;else if(a)if(this.expirationTime<a)m=!0;else{const y=this.expirationTime-a;y?this.expirationTime=u+Math.max(y,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,a){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0||!a)return;const u=this.latestFeatureIndex.loadVTLayers(),m=a.style.listImages();for(const y in this.buckets){if(!a.style.hasLayer(y))continue;const w=this.buckets[y],R=w.layers[0].sourceLayer||"_geojsonTileLayer",I=u[R],D=i[R];if(!I||!D||Object.keys(D).length===0)continue;if(w.update(D,I,m,this.imageAtlas&&this.imageAtlas.patternPositions||{}),w instanceof $u||w instanceof Su){const q=a.style._getSourceCache(w.layers[0].source);a._terrain&&a._terrain.enabled&&q&&w.programConfigurations.needsUpload&&a._terrain._clearRenderCacheForTile(q.id,this.tileID)}const j=a&&a.style&&a.style.getLayer(y);j&&(this.queryPadding=Math.max(this.queryPadding,j.queryRadius(w)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Nn.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=Nn.now()+i}setTexture(i,a){const u=a.context,m=u.gl;this.texture=this.texture||a.getTileTexture(i.width),this.texture?this.texture.update(i,{useMipmap:!0}):(this.texture=new lc(u,i,m.RGBA,{useMipmap:!0}),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE),u.extTextureFilterAnisotropic&&m.texParameterf(m.TEXTURE_2D,u.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,u.extTextureFilterAnisotropicMax))}setDependencies(i,a){const u={};for(const m of a)u[m]=!0;this.dependencies[i]=u}hasDependency(i,a){for(const u of i){const m=this.dependencies[u];if(m){for(const y of a)if(m[y])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(i,a){if(!a||a.name==="mercator"||this._tileDebugBuffer)return;const u=co(Th,this.tileID.canonical,this.tileTransform)[0],m=new xn,y=new Ml;for(let w=0;w<u.length;w++){const{x:R,y:I}=u[w];m.emplaceBack(R,I),y.emplaceBack(w)}y.emplaceBack(0),this._tileDebugIndexBuffer=i.createIndexBuffer(y),this._tileDebugBuffer=i.createVertexBuffer(m,ec.members),this._tileDebugSegments=di.simpleSegment(0,0,m.length,y.length)}_makeTileBoundsBuffers(i,a){if(this._tileBoundsBuffer||!a||a.name==="mercator")return;const u=co(Th,this.tileID.canonical,this.tileTransform)[0];let m,y;if(this.isRaster){const w=function(R,I){const D=Ts(R,I),j=Math.pow(2,R.z);for(let ue=0;ue<Kr;ue++)for(let Te=0;Te<Kr;Te++){const Oe=nr((R.x+(Te+Ch(Te))/_r)/j),Se=Ai((R.y+(ue+Ch(ue))/_r)/j),$e=I.project(Oe,Se),Be=ue*Kr+Te;Wr[2*Be+0]=Math.round(($e.x*D.scale-D.x)*cn),Wr[2*Be+1]=Math.round(($e.y*D.scale-D.y)*cn)}Go.fill(0),qu.fill(0);for(let ue=2045;ue>=0;ue--){const Te=4*ue,Oe=jo[Te+0],Se=jo[Te+1],$e=jo[Te+2],Be=jo[Te+3],Me=Oe+$e>>1,Qe=Se+Be>>1,Ye=Me+Qe-Se,ct=Qe+Oe-Me,Tt=Se*Kr+Oe,ot=Be*Kr+$e,ft=Qe*Kr+Me,vt=Math.hypot((Wr[2*Tt+0]+Wr[2*ot+0])/2-Wr[2*ft+0],(Wr[2*Tt+1]+Wr[2*ot+1])/2-Wr[2*ft+1])>=16;if(Go[ft]=Go[ft]||(vt?1:0),ue<1022){const wt=(Se+ct>>1)*Kr+(Oe+Ye>>1),At=(Be+ct>>1)*Kr+($e+Ye>>1);Go[ft]=Go[ft]||Go[wt]||Go[At]}}const q=new Vn,K=new Ni;let J=0;function Q(ue,Te){const Oe=Te*Kr+ue;return qu[Oe]===0&&(q.emplaceBack(Wr[2*Oe+0],Wr[2*Oe+1],ue*cn/_r,Te*cn/_r),qu[Oe]=++J),qu[Oe]-1}function ne(ue,Te,Oe,Se,$e,Be){const Me=ue+Oe>>1,Qe=Te+Se>>1;if(Math.abs(ue-$e)+Math.abs(Te-Be)>1&&Go[Qe*Kr+Me])ne($e,Be,ue,Te,Me,Qe),ne(Oe,Se,$e,Be,Me,Qe);else{const Ye=Q(ue,Te),ct=Q(Oe,Se),Tt=Q($e,Be);K.emplaceBack(Ye,ct,Tt)}}return ne(0,0,_r,_r,_r,0),ne(_r,_r,0,0,0,_r),{vertices:q,indices:K}}(this.tileID.canonical,a);m=w.vertices,y=w.indices}else{m=new Vn,y=new Ni;for(const{x:R,y:I}of u)m.emplaceBack(R,I,0,0);const w=Fl.exports(m.int16,void 0,4);for(let R=0;R<w.length;R+=3)y.emplaceBack(w[R],w[R+1],w[R+2])}this._tileBoundsBuffer=i.createVertexBuffer(m,Sh.members),this._tileBoundsIndexBuffer=i.createIndexBuffer(y),this._tileBoundsSegments=di.simpleSegment(0,0,m.length,y.length)}_makeGlobeTileDebugBuffers(i,a){const u=a.projection;if(!u||u.name!=="globe"||a.freezeTileCoverage)return;const m=this.tileID.canonical,y=ic(ch(m,a)),w=La(a.zoom);let R;w>0&&(R=vd(new Float64Array(16),a.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(i,m,a,y,R,w),this._makeGlobeTileDebugTextBuffer(i,m,a,y,R,w)}_globePoint(i,a,u,m,y,w,R){let I=nc(i,a,u);if(w){const D=1<<u.z,j=Vr(m.center.lng),q=Ur(m.center.lat),K=(u.x+.5)/D-j;let J=0;K>.5?J=-1:K<-.5&&(J=1);let Q=(i/cn+u.x)/D+J,ne=(a/cn+u.y)/D;Q=(Q-j)*m._pixelsPerMercatorPixel+j,ne=(ne-q)*m._pixelsPerMercatorPixel+q;const ue=[Q*m.worldSize,ne*m.worldSize,0];pi(ue,ue,w),I=Ss(I,ue,R)}return pi(I,I,y)}_makeGlobeTileDebugBorderBuffer(i,a,u,m,y,w){const R=new xn,I=new Ml,D=new Fn,j=(K,J,Q,ne,ue)=>{const Te=(Q-K)/(ue-1),Oe=(ne-J)/(ue-1),Se=R.length;for(let $e=0;$e<ue;$e++){const Be=K+$e*Te,Me=J+$e*Oe;R.emplaceBack(Be,Me);const Qe=this._globePoint(Be,Me,a,u,m,y,w);D.emplaceBack(Qe[0],Qe[1],Qe[2]),I.emplaceBack(Se+$e)}},q=cn;j(0,0,q,0,16),j(q,0,q,q,16),j(q,q,0,q,16),j(0,q,0,0,16),this._tileDebugIndexBuffer=i.createIndexBuffer(I),this._tileDebugBuffer=i.createVertexBuffer(R,ec.members),this._globeTileDebugBorderBuffer=i.createVertexBuffer(D,ah.members),this._tileDebugSegments=di.simpleSegment(0,0,R.length,I.length)}_makeGlobeTileDebugTextBuffer(i,a,u,m,y,w){const R=new xn,I=new Ni,D=new Fn,j=25;I.reserve(32),R.reserve(j),D.reserve(j);const q=(K,J)=>j*K+J;for(let K=0;K<j;K++){const J=2048*K;for(let Q=0;Q<j;Q++){const ne=2048*Q;R.emplaceBack(ne,J);const ue=this._globePoint(ne,J,a,u,m,y,w);D.emplaceBack(ue[0],ue[1],ue[2])}}for(let K=0;K<4;K++)for(let J=0;J<4;J++){const Q=q(K,J),ne=q(K,J+1),ue=q(K+1,J),Te=q(K+1,J+1);I.emplaceBack(Q,ne,ue),I.emplaceBack(ue,ne,Te)}this._tileDebugTextIndexBuffer=i.createIndexBuffer(I),this._tileDebugTextBuffer=i.createVertexBuffer(R,ec.members),this._globeTileDebugTextBuffer=i.createVertexBuffer(D,ah.members),this._tileDebugTextSegments=di.simpleSegment(0,0,j,32)}}class __{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,a,u){const m=String(a);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][m]=this.stateChanges[i][m]||{},mt(this.stateChanges[i][m],u),this.deletedStates[i]===null){this.deletedStates[i]={};for(const y in this.state[i])y!==m&&(this.deletedStates[i][y]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][m]===null){this.deletedStates[i][m]={};for(const y in this.state[i][m])u[y]||(this.deletedStates[i][m][y]=null)}else for(const y in u)this.deletedStates[i]&&this.deletedStates[i][m]&&this.deletedStates[i][m][y]===null&&delete this.deletedStates[i][m][y]}removeFeatureState(i,a,u){if(this.deletedStates[i]===null)return;const m=String(a);if(this.deletedStates[i]=this.deletedStates[i]||{},u&&a!==void 0)this.deletedStates[i][m]!==null&&(this.deletedStates[i][m]=this.deletedStates[i][m]||{},this.deletedStates[i][m][u]=null);else if(a!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][m])for(u in this.deletedStates[i][m]={},this.stateChanges[i][m])this.deletedStates[i][m][u]=null;else this.deletedStates[i][m]=null;else this.deletedStates[i]=null}getState(i,a){const u=String(a),m=mt({},(this.state[i]||{})[u],(this.stateChanges[i]||{})[u]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const y=this.deletedStates[i][a];if(y===null)return{};for(const w in y)delete m[w]}return m}initializeTileState(i,a){i.setFeatureState(this.state,a)}coalesceChanges(i,a){const u={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const y={};for(const w in this.stateChanges[m])this.state[m][w]||(this.state[m][w]={}),mt(this.state[m][w],this.stateChanges[m][w]),y[w]=this.state[m][w];u[m]=y}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const y={};if(this.deletedStates[m]===null)for(const w in this.state[m])y[w]={},this.state[m][w]={};else for(const w in this.deletedStates[m]){if(this.deletedStates[m][w]===null)this.state[m][w]={};else for(const R of Object.keys(this.deletedStates[m][w]))delete this.state[m][w][R];y[w]=this.state[m][w]}u[m]=u[m]||{},mt(u[m],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(u).length!==0)for(const m in i)i[m].setFeatureState(u,a)}}class Ah{constructor(i){this.size=i,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(i,a){const u=this.toIdx(i,a);return{min:this.minimums[u],max:this.maximums[u]}}isLeaf(i,a){return this.leaves[this.toIdx(i,a)]}toIdx(i,a){return a*this.size+i}}function kh(s,i,a,u){let m=0,y=Number.MAX_VALUE;for(let w=0;w<3;w++)if(Math.abs(u[w])<1e-15){if(a[w]<s[w]||a[w]>i[w])return null}else{const R=1/u[w];let I=(s[w]-a[w])*R,D=(i[w]-a[w])*R;if(I>D){const j=I;I=D,D=j}if(I>m&&(m=I),D<y&&(y=D),m>y)return null}return m}function Rh(s,i,a,u,m,y,w,R,I,D,j){const q=u-s,K=m-i,J=y-a,Q=w-s,ne=R-i,ue=I-a,Te=j[1]*ue-j[2]*ne,Oe=j[2]*Q-j[0]*ue,Se=j[0]*ne-j[1]*Q,$e=q*Te+K*Oe+J*Se;if(Math.abs($e)<1e-15)return null;const Be=1/$e,Me=D[0]-s,Qe=D[1]-i,Ye=D[2]-a,ct=(Me*Te+Qe*Oe+Ye*Se)*Be;if(ct<0||ct>1)return null;const Tt=Qe*J-Ye*K,ot=Ye*q-Me*J,ft=Me*K-Qe*q,vt=(j[0]*Tt+j[1]*ot+j[2]*ft)*Be;return vt<0||ct+vt>1?null:(Q*Tt+ne*ot+ue*ft)*Be}function $h(s,i,a){return(s-i)/(a-i)}function Nh(s,i,a,u,m,y,w,R,I){const D=1<<a,j=y-u,q=w-m,K=(s+1)/D*j+u,J=(i+0)/D*q+m,Q=(i+1)/D*q+m;R[0]=(s+0)/D*j+u,R[1]=J,I[0]=K,I[1]=Q}class Mh{constructor(i){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=i,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const a=function(y){const w=Math.ceil(Math.log2(y.dim/8)),R=[];let I=Math.ceil(Math.pow(2,w));const D=1/I,j=(J,Q,ne,ue,Te)=>{const Oe=ue?1:0,Se=(J+1)*ne-Oe,$e=Q*ne,Be=(Q+1)*ne-Oe;Te[0]=J*ne,Te[1]=$e,Te[2]=Se,Te[3]=Be};let q=new Ah(I);const K=[];for(let J=0;J<I*I;J++){j(J%I,Math.floor(J/I),D,!1,K);const Q=Ho(K[0],K[1],y),ne=Ho(K[2],K[1],y),ue=Ho(K[2],K[3],y),Te=Ho(K[0],K[3],y);q.minimums.push(Math.min(Q,ne,ue,Te)),q.maximums.push(Math.max(Q,ne,ue,Te)),q.leaves.push(1)}for(R.push(q),I/=2;I>=1;I/=2){const J=R[R.length-1];q=new Ah(I);for(let Q=0;Q<I*I;Q++){j(Q%I,Math.floor(Q/I),2,!0,K);const ne=J.getElevation(K[0],K[1]),ue=J.getElevation(K[2],K[1]),Te=J.getElevation(K[2],K[3]),Oe=J.getElevation(K[0],K[3]),Se=J.isLeaf(K[0],K[1]),$e=J.isLeaf(K[2],K[1]),Be=J.isLeaf(K[2],K[3]),Me=J.isLeaf(K[0],K[3]),Qe=Math.min(ne.min,ue.min,Te.min,Oe.min),Ye=Math.max(ne.max,ue.max,Te.max,Oe.max),ct=Se&&$e&&Be&&Me;q.maximums.push(Ye),q.minimums.push(Qe),q.leaves.push(Ye-Qe<=5&&ct?1:0)}R.push(q)}return R}(this.dem),u=a.length-1,m=a[u];this._addNode(m.minimums[0],m.maximums[0],m.leaves[0]),this._construct(a,0,0,u,0)}raycastRoot(i,a,u,m,y,w,R=1){return kh([i,a,-100],[u,m,this.maximums[0]*R],y,w)}raycast(i,a,u,m,y,w,R=1){if(!this.nodeCount)return null;const I=this.raycastRoot(i,a,u,m,y,w,R);if(I==null)return null;const D=[],j=[],q=[],K=[],J=[{idx:0,t:I,nodex:0,nodey:0,depth:0}];for(;J.length>0;){const{idx:Q,t:ne,nodex:ue,nodey:Te,depth:Oe}=J.pop();if(this.leaves[Q]){Nh(ue,Te,Oe,i,a,u,m,q,K);const $e=1<<Oe,Be=(ue+0)/$e,Me=(ue+1)/$e,Qe=(Te+0)/$e,Ye=(Te+1)/$e,ct=Ho(Be,Qe,this.dem)*R,Tt=Ho(Me,Qe,this.dem)*R,ot=Ho(Me,Ye,this.dem)*R,ft=Ho(Be,Ye,this.dem)*R,vt=Rh(q[0],q[1],ct,K[0],q[1],Tt,K[0],K[1],ot,y,w),wt=Rh(K[0],K[1],ot,q[0],K[1],ft,q[0],q[1],ct,y,w),At=Math.min(vt!==null?vt:Number.MAX_VALUE,wt!==null?wt:Number.MAX_VALUE);if(At!==Number.MAX_VALUE)return At;{const st=Bl([],y,w,ne);if(Ih(ct,Tt,ft,ot,$h(st[0],q[0],K[0]),$h(st[1],q[1],K[1]))>=st[2])return ne}continue}let Se=0;for(let $e=0;$e<this._siblingOffset.length;$e++){Nh((ue<<1)+this._siblingOffset[$e][0],(Te<<1)+this._siblingOffset[$e][1],Oe+1,i,a,u,m,q,K),q[2]=-100,K[2]=this.maximums[this.childOffsets[Q]+$e]*R;const Be=kh(q,K,y,w);if(Be!=null){const Me=Be;D[$e]=Me;let Qe=!1;for(let Ye=0;Ye<Se&&!Qe;Ye++)Me>=D[j[Ye]]&&(j.splice(Ye,0,$e),Qe=!0);Qe||(j[Se]=$e),Se++}}for(let $e=0;$e<Se;$e++){const Be=j[$e];J.push({idx:this.childOffsets[Q]+Be,t:D[Be],nodex:(ue<<1)+this._siblingOffset[Be][0],nodey:(Te<<1)+this._siblingOffset[Be][1],depth:Oe+1})}}return null}_addNode(i,a,u){return this.minimums.push(i),this.maximums.push(a),this.leaves.push(u),this.childOffsets.push(0),this.nodeCount++}_construct(i,a,u,m,y){if(i[m].isLeaf(a,u)===1)return;this.childOffsets[y]||(this.childOffsets[y]=this.nodeCount);const w=m-1,R=i[w];let I=0,D=0;for(let j=0;j<this._siblingOffset.length;j++){const q=2*a+this._siblingOffset[j][0],K=2*u+this._siblingOffset[j][1],J=R.getElevation(q,K),Q=R.isLeaf(q,K),ne=this._addNode(J.min,J.max,Q);Q&&(I|=1<<j),D||(D=ne)}for(let j=0;j<this._siblingOffset.length;j++)I&1<<j||this._construct(i,2*a+this._siblingOffset[j][0],2*u+this._siblingOffset[j][1],w,D+j)}}function Ih(s,i,a,u,m,y){return Rn(Rn(s,a,y),Rn(i,u,y),m)}function Ho(s,i,a){const u=a.dim,m=it(s*u-.5,0,u-1),y=it(i*u-.5,0,u-1),w=Math.floor(m),R=Math.floor(y),I=Math.min(w+1,u-1),D=Math.min(R+1,u-1);return Ih(a.get(w,R),a.get(I,R),a.get(w,D),a.get(I,D),m-w,y-R)}const Lh={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class Ku{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(i,a,u,m=!1,y=!1){if(this.uid=i,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(u&&u!=="mapbox"&&u!=="terrarium")return Ht(`"${u}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=a.height;const w=this.dim=a.height-2,R=new Uint32Array(a.data.buffer);if(this.pixels=new Uint8Array(a.data.buffer),this.encoding=u||"mapbox",this.borderReady=m,!m){for(let I=0;I<w;I++)R[this._idx(-1,I)]=R[this._idx(0,I)],R[this._idx(w,I)]=R[this._idx(w-1,I)],R[this._idx(I,-1)]=R[this._idx(I,0)],R[this._idx(I,w)]=R[this._idx(I,w-1)];R[this._idx(-1,-1)]=R[this._idx(0,0)],R[this._idx(w,-1)]=R[this._idx(w-1,0)],R[this._idx(-1,w)]=R[this._idx(0,w-1)],R[this._idx(w,w)]=R[this._idx(w-1,w-1)],y&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Mh(this)}get(i,a,u=!1){u&&(i=it(i,-1,this.dim),a=it(a,-1,this.dim));const m=4*this._idx(i,a);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(this.pixels[m],this.pixels[m+1],this.pixels[m+2])}static getUnpackVector(i){return Lh[i]}get unpackVector(){return Lh[this.encoding]}_idx(i,a){if(i<-1||i>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(i+1)}_unpackMapbox(i,a,u){return(256*i*256+256*a+u)/10-1e4}_unpackTerrarium(i,a,u){return 256*i+a+u/256-32768}static pack(i,a){const u=[0,0,0,0],m=Ku.getUnpackVector(a);let y=Math.floor((i+m[3])/m[2]);return u[2]=y%256,y=Math.floor(y/256),u[1]=y%256,y=Math.floor(y/256),u[0]=y,u}getPixels(){return new Ki({width:this.stride,height:this.stride},this.pixels)}backfillBorder(i,a,u){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let m=a*this.dim,y=a*this.dim+this.dim,w=u*this.dim,R=u*this.dim+this.dim;switch(a){case-1:m=y-1;break;case 1:y=m+1}switch(u){case-1:w=R-1;break;case 1:R=w+1}const I=-a*this.dim,D=-u*this.dim;for(let j=w;j<R;j++)for(let q=m;q<y;q++){const K=4*this._idx(q,j),J=4*this._idx(q+I,j+D);this.pixels[K+0]=i.pixels[J+0],this.pixels[K+1]=i.pixels[J+1],this.pixels[K+2]=i.pixels[J+2],this.pixels[K+3]=i.pixels[J+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Gt(Ku,"DEMData"),Gt(Mh,"DemMinMaxQuadTree",{omit:["dem"]});class v_{constructor(i,a){this.max=i,this.onRemove=a,this.reset()}reset(){for(const i in this.data)for(const a of this.data[i])a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);return this.data={},this.order=[],this}add(i,a,u){const m=i.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const y={value:a,timeout:void 0};if(u!==void 0&&(y.timeout=setTimeout(()=>{this.remove(i,y)},u)),this.data[m].push(y),this.order.push(m),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const a=this.data[i].shift();return a.timeout&&clearTimeout(a.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),a.value}getByKey(i){const a=this.data[i];return a?a[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,a){if(!this.has(i))return this;const u=i.wrapped().key,m=a===void 0?0:this.data[u].indexOf(a),y=this.data[u][m];return this.data[u].splice(m,1),y.timeout&&clearTimeout(y.timeout),this.data[u].length===0&&delete this.data[u],this.onRemove(y.value),this.order.splice(this.order.indexOf(u),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}filter(i){const a=[];for(const u in this.data)for(const m of this.data[u])i(m.value)||a.push(m);for(const u of a)this.remove(u.value.tileID,u)}}class Pa{constructor(i,a,u){this.func=i,this.mask=a,this.range=u}}Pa.ReadOnly=!1,Pa.ReadWrite=!0,Pa.disabled=new Pa(519,Pa.ReadOnly,[0,1]);const ep=7680;class tp{constructor(i,a,u,m,y,w){this.test=i,this.ref=a,this.mask=u,this.fail=m,this.depthFail=y,this.pass=w}}tp.disabled=new tp({func:519,mask:0},0,0,ep,ep,ep);class Zr{constructor(i,a,u){this.blendFunction=i,this.blendColor=a,this.mask=u}}Zr.Replace=[1,0],Zr.disabled=new Zr(Zr.Replace,ii.transparent,[!1,!1,!1,!1]),Zr.unblended=new Zr(Zr.Replace,ii.transparent,[!0,!0,!0,!0]),Zr.alphaBlended=new Zr([1,771],ii.transparent,[!0,!0,!0,!0]);const np=1029,ip=2305;class Nr{constructor(i,a,u){this.enable=i,this.mode=a,this.frontFace=u}}Nr.disabled=new Nr(!1,np,ip),Nr.backCCW=new Nr(!0,np,ip),Nr.backCW=new Nr(!0,np,2304),Nr.frontCW=new Nr(!0,1028,2304),Nr.frontCCW=new Nr(!0,1028,ip);class As extends vr{constructor(i,a,u){super(),this.id=i,this._onlySymbols=u,a.on("data",m=>{m.dataType==="source"&&m.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&m.dataType==="source"&&m.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),a.on("error",()=>{this._sourceErrored=!0}),this._source=a,this._tiles={},this._cache=new v_(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=a.minTileCacheSize,this._maxTileCacheSize=a.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new __,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(i){this.map=i,this._minTileCacheSize=this._minTileCacheSize===void 0&&i?i._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&i?i._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles){const a=this._tiles[i];if(a.state!=="loaded"&&a.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(i,a){return i.isSymbolTile=this._onlySymbols,this._source.loadTile(i,a)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){if(this._source.abortTile)return this._source.abortTile(i,()=>{})}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const a in this._tiles){const u=this._tiles[a];u.upload(i),u.prepare(this.map.style.imageManager)}}getIds(){return nt(this._tiles).map(i=>i.tileID).sort(Oh).map(i=>i.key)}getRenderableIds(i){const a=[];for(const u in this._tiles)this._isIdRenderable(+u,i)&&a.push(this._tiles[u]);return i?a.sort((u,m)=>{const y=u.tileID,w=m.tileID,R=new Z(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),I=new Z(w.canonical.x,w.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-w.overscaledZ||I.y-R.y||I.x-R.x}).map(u=>u.tileID.key):a.map(u=>u.tileID).sort(Oh).map(u=>u.key)}hasRenderableParent(i){const a=this.findLoadedParent(i,0);return!!a&&this._isIdRenderable(a.tileID.key)}_isIdRenderable(i,a){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(a||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(+i,"reloading")}}_reloadTile(i,a){const u=this._tiles[i];u&&(u.state!=="loading"&&(u.state=a),this._loadTile(u,this._tileLoaded.bind(this,u,i,a)))}_tileLoaded(i,a,u,m){if(m)if(i.state="errored",m.status!==404)this._source.fire(new Ir(m,{tile:i}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const y=this.map.painter.terrain;this.update(this.transform,y.getScaledDemTileSize(),!0),y.resetTileLookupCache(this.id)}else this.update(this.transform);else i.timeAdded=Nn.now(),u==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(a,i),this._source.type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),this._source.fire(new zn("data",{dataType:"source",tile:i,coord:i.tileID,sourceCacheId:this.id}))}_backfillDEM(i){const a=this.getRenderableIds();for(let m=0;m<a.length;m++){const y=a[m];if(i.neighboringTiles&&i.neighboringTiles[y]){const w=this.getTileByID(y);u(i,w),u(w,i)}}function u(m,y){if(!m.dem||m.dem.borderReady)return;m.needsHillshadePrepare=!0,m.needsDEMTextureUpload=!0;let w=y.tileID.canonical.x-m.tileID.canonical.x;const R=y.tileID.canonical.y-m.tileID.canonical.y,I=Math.pow(2,m.tileID.canonical.z),D=y.tileID.key;w===0&&R===0||Math.abs(R)>1||(Math.abs(w)>1&&(Math.abs(w+I)===1?w+=I:Math.abs(w-I)===1&&(w-=I)),y.dem&&m.dem&&(m.dem.backfillBorder(y.dem,w,R),m.neighboringTiles&&m.neighboringTiles[D]&&(m.neighboringTiles[D].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,a,u,m){for(const y in this._tiles){let w=this._tiles[y];if(m[y]||!w.hasData()||w.tileID.overscaledZ<=a||w.tileID.overscaledZ>u)continue;let R=w.tileID;for(;w&&w.tileID.overscaledZ>a+1;){const D=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[D.key],w&&w.hasData()&&(R=D)}let I=R;for(;I.overscaledZ>a;)if(I=I.scaledTo(I.overscaledZ-1),i[I.key]){m[R.key]=R;break}}}findLoadedParent(i,a){if(i.key in this._loadedParentTiles){const u=this._loadedParentTiles[i.key];return u&&u.tileID.overscaledZ>=a?u:null}for(let u=i.overscaledZ-1;u>=a;u--){const m=i.scaledTo(u),y=this._getLoadedTile(m);if(y)return y}}_getLoadedTile(i){const a=this._tiles[i.key];return a&&a.hasData()?a:this._cache.getByKey(this._source.reparseOverscaled?i.wrapped().key:i.canonical.key)}updateCacheSize(i,a){a=a||this._source.tileSize;const u=Math.ceil(i.width/a)+1,m=Math.ceil(i.height/a)+1,y=Math.floor(u*m*5),w=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,y):y,R=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(R)}handleWrapJump(i){const a=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,a){const u={};for(const m in this._tiles){const y=this._tiles[m];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+a),u[y.tileID.key]=y}this._tiles=u;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(+m,this._tiles[m])}}update(i,a,u){if(this.transform=i,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!u)return;let m;this.updateCacheSize(i,a),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?m=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(R=>new Vi(R.canonical.z,R.wrap,R.canonical.z,R.canonical.x,R.canonical.y)):(m=i.coveringTiles({tileSize:a||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!u,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(m=m.filter(R=>this._source.hasTile(R)))):m=[];const y=this._updateRetainedTiles(m);if(Ph(this._source.type)&&m.length!==0){const R={},I={},D=Object.keys(y);for(const q of D){const K=y[q],J=this._tiles[q];if(!J||J.fadeEndTime&&J.fadeEndTime<=Nn.now())continue;const Q=this.findLoadedParent(K,Math.max(K.overscaledZ-As.maxOverzooming,this._source.minzoom));Q&&(this._addTile(Q.tileID),R[Q.tileID.key]=Q.tileID),I[q]=K}const j=m[m.length-1].overscaledZ;for(const q in this._tiles){const K=this._tiles[q];if(y[q]||!K.hasData())continue;let J=K.tileID;for(;J.overscaledZ>j;){J=J.scaledTo(J.overscaledZ-1);const Q=this._tiles[J.key];if(Q&&Q.hasData()&&I[J.key]){y[q]=K.tileID;break}}}for(const q in R)y[q]||(this._coveredTiles[q]=!0,y[q]=R[q])}for(const R in y)this._tiles[R].clearFadeHold();const w=function(R,I){const D=[];for(const j in R)j in I||D.push(j);return D}(this._tiles,y);for(const R of w){const I=this._tiles[R];I.hasSymbolBuckets&&!I.holdingForFade()?I.setHoldDuration(this.map._fadeDuration):I.hasSymbolBuckets&&!I.symbolFadeFinished()||this._removeTile(+R)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(+i)}_updateRetainedTiles(i){const a={};if(i.length===0)return a;const u={},m=i.reduce((D,j)=>Math.min(D,j.overscaledZ),1/0),y=i[0].overscaledZ,w=Math.max(y-As.maxOverzooming,this._source.minzoom),R=Math.max(y+As.maxUnderzooming,this._source.minzoom),I={};for(const D of i){const j=this._addTile(D);a[D.key]=D,j.hasData()||m<this._source.maxzoom&&(I[D.key]=D)}this._retainLoadedChildren(I,m,R,a);for(const D of i){let j=this._tiles[D.key];if(j.hasData())continue;if(D.canonical.z>=this._source.maxzoom){const K=D.children(this._source.maxzoom)[0],J=this.getTile(K);if(J&&J.hasData()){a[K.key]=K;continue}}else{const K=D.children(this._source.maxzoom);if(a[K[0].key]&&a[K[1].key]&&a[K[2].key]&&a[K[3].key])continue}let q=j.wasRequested();for(let K=D.overscaledZ-1;K>=w;--K){const J=D.scaledTo(K);if(u[J.key]||(u[J.key]=!0,j=this.getTile(J),!j&&q&&(j=this._addTile(J)),j&&(a[J.key]=J,q=j.wasRequested(),j.hasData())))break}}return a}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const a=[];let u,m=this._tiles[i].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){u=this._loadedParentTiles[m.key];break}a.push(m.key);const y=m.scaledTo(m.overscaledZ-1);if(u=this._getLoadedTile(y),u)break;m=y}for(const y of a)this._loadedParentTiles[y]=u}}_addTile(i){let a=this._tiles[i.key];if(a)return a;a=this._cache.getAndRemove(i),a&&(this._setTileReloadTimer(i.key,a),a.tileID=i,this._state.initializeTileState(a,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,a)));const u=Boolean(a);if(!u){const m=this.map?this.map.painter:null;a=new Qd(i,this._source.tileSize*i.overscaleFactor(),this.transform.tileZoom,m,this._isRaster),this._loadTile(a,this._tileLoaded.bind(this,a,i.key,a.state))}return a?(a.uses++,this._tiles[i.key]=a,u||this._source.fire(new zn("dataloading",{tile:a,coord:a.tileID,dataType:"source"})),a):null}_setTileReloadTimer(i,a){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const u=a.getExpiryTimeout();u&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},u))}_removeTile(i){const a=this._tiles[i];a&&(a.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),a.uses>0||(a.hasData()&&a.state!=="reloading"?this._cache.add(a.tileID,a,a.getExpiryTimeout()):(a.aborted=!0,this._abortTile(a),this._unloadTile(a))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(+i);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(i,a,u){const m=[],y=this.transform;if(!y)return m;const w=y.projection.name==="globe",R=Vr(y.center.lng);for(const I in this._tiles){const D=this._tiles[I];if(u&&D.clearQueryDebugViz(),D.holdingForFade())continue;let j;if(w){const q=D.tileID.canonical;if(q.z===0){const K=[Math.abs(it(R,...cc(q,-1))-R),Math.abs(it(R,...cc(q,1))-R)];j=[0,2*K.indexOf(Math.min(...K))-1]}else{const K=[Math.abs(it(R,...cc(q,-1))-R),Math.abs(it(R,...cc(q,0))-R),Math.abs(it(R,...cc(q,1))-R)];j=[K.indexOf(Math.min(...K))-1]}}else j=[0];for(const q of j){const K=i.containsTile(D,y,a,q);K&&m.push(K)}}return m}getVisibleCoordinates(i){const a=this.getRenderableIds(i).map(u=>this._tiles[u].tileID);for(const u of a)u.projMatrix=this.transform.calculateProjMatrix(u.toUnwrapped());return a}hasTransition(){if(this._source.hasTransition())return!0;if(Ph(this._source.type))for(const i in this._tiles){const a=this._tiles[i];if(a.fadeEndTime!==void 0&&a.fadeEndTime>=Nn.now())return!0}return!1}setFeatureState(i,a,u){this._state.updateState(i=i||"_geojsonTileLayer",a,u)}removeFeatureState(i,a,u){this._state.removeFeatureState(i=i||"_geojsonTileLayer",a,u)}getFeatureState(i,a){return this._state.getState(i=i||"_geojsonTileLayer",a)}setDependencies(i,a,u){const m=this._tiles[i];m&&m.setDependencies(a,u)}reloadTilesForDependencies(i,a){for(const u in this._tiles)this._tiles[u].hasDependency(i,a)&&this._reloadTile(+u,"reloading");this._cache.filter(u=>!u.hasDependency(i,a))}_preloadTiles(i,a){const u=new Map,m=Array.isArray(i)?i:[i],y=this.map.painter.terrain,w=this.usedForTerrain&&y?y.getScaledDemTileSize():this._source.tileSize;for(const R of m){const I=R.coveringTiles({tileSize:w,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const D of I)u.set(D.key,D);this.usedForTerrain&&R.updateElevation(!1)}ze(Array.from(u.values()),(R,I)=>{const D=new Qd(R,this._source.tileSize*R.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(D,j=>{this._source.type==="raster-dem"&&D.dem&&this._backfillDEM(D),I(j,D)})},a)}}function Oh(s,i){const a=Math.abs(2*s.wrap)-+(s.wrap<0),u=Math.abs(2*i.wrap)-+(i.wrap<0);return s.overscaledZ-i.overscaledZ||u-a||i.canonical.y-s.canonical.y||i.canonical.x-s.canonical.x}function Ph(s){return s==="raster"||s==="image"||s==="video"||s==="custom"}function cc(s,i){const a=1<<s.z;return[s.x/a+i,(s.x+1)/a+i]}As.maxOverzooming=10,As.maxUnderzooming=3;class Wu{constructor(i,a,u){this._demTile=i,this._dem=this._demTile.dem,this._scale=a,this._offset=u}static create(i,a,u){const m=u||i.findDEMTileFor(a);if(!m||!m.dem)return;const y=m.dem,w=m.tileID,R=1<<a.canonical.z-w.canonical.z;return new Wu(m,m.tileSize/cn/R,[(a.canonical.x/R-w.canonical.x)*y.dim,(a.canonical.y/R-w.canonical.y)*y.dim])}tileCoordToPixel(i,a){const u=a*this._scale+this._offset[1],m=Math.floor(i*this._scale+this._offset[0]),y=Math.floor(u);return new Z(m,y)}getElevationAt(i,a,u,m){const y=i*this._scale+this._offset[0],w=a*this._scale+this._offset[1],R=Math.floor(y),I=Math.floor(w),D=this._dem;return m=!!m,u?Rn(Rn(D.get(R,I,m),D.get(R,I+1,m),w-I),Rn(D.get(R+1,I,m),D.get(R+1,I+1,m),w-I),y-R):D.get(R,I,m)}getElevationAtPixel(i,a,u){return this._dem.get(i,a,!!u)}getMeterToDEM(i){return(1<<this._demTile.tileID.canonical.z)*mr(1,i)*this._dem.stride}}class Dh{constructor(i,a){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new Oo(cn,16,0),this.featureIndexArray=new xp,this.promoteId=a}insert(i,a,u,m,y,w=0){const R=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,m,y,w);const I=this.grid;for(let D=0;D<a.length;D++){const j=a[D],q=[1/0,1/0,-1/0,-1/0];for(let K=0;K<j.length;K++){const J=j[K];q[0]=Math.min(q[0],J.x),q[1]=Math.min(q[1],J.y),q[2]=Math.max(q[2],J.x),q[3]=Math.max(q[3],J.y)}q[0]<cn&&q[1]<cn&&q[2]>=0&&q[3]>=0&&I.insert(R,q[0],q[1],q[2],q[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Ld(new Xl(this.rawTileData)).layers,this.sourceLayerCoder=new wh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const i in this.vtLayers)this.vtFeatures[i]=[]}return this.vtLayers}query(i,a,u,m){this.loadVTLayers();const y=i.params||{},w=na(y.filter),R=i.tileResult,I=i.transform,D=R.bufferedTilespaceBounds,j=this.grid.query(D.min.x,D.min.y,D.max.x,D.max.y,(Q,ne,ue,Te)=>Up(R.bufferedTilespaceGeometry,Q,ne,ue,Te));j.sort(y_);let q=null;I.elevation&&j.length>0&&(q=Wu.create(I.elevation,this.tileID));const K={};let J;for(let Q=0;Q<j.length;Q++){const ne=j[Q];if(ne===J)continue;J=ne;const ue=this.featureIndexArray.get(ne);let Te=null;this.loadMatchingFeature(K,ue,w,y.layers,y.availableImages,a,u,m,(Oe,Se,$e,Be=0)=>(Te||(Te=co(Oe,this.tileID.canonical,i.tileTransform)),Se.queryIntersectsFeature(R,Oe,$e,Te,this.z,i.transform,i.pixelPosMatrix,q,Be)))}return K}loadMatchingFeature(i,a,u,m,y,w,R,I,D){const{featureIndex:j,bucketIndex:q,sourceLayerIndex:K,layoutVertexArrayOffset:J}=a,Q=this.bucketLayerIDs[q];if(m&&!function(Oe,Se){for(let $e=0;$e<Oe.length;$e++)if(Se.indexOf(Oe[$e])>=0)return!0;return!1}(m,Q))return;const ne=this.sourceLayerCoder.decode(K),ue=this.vtLayers[ne].feature(j);if(u.needGeometry){const Oe=bs(ue,!0);if(!u.filter(new Ae(this.tileID.overscaledZ),Oe,this.tileID.canonical))return}else if(!u.filter(new Ae(this.tileID.overscaledZ),ue))return;const Te=this.getId(ue,ne);for(let Oe=0;Oe<Q.length;Oe++){const Se=Q[Oe];if(m&&m.indexOf(Se)<0)continue;const $e=w[Se];if(!$e)continue;let Be={};Te!==void 0&&I&&(Be=I.getState($e.sourceLayer||"_geojsonTileLayer",Te));const Me=mt({},R[Se]);Me.paint=Bh(Me.paint,$e.paint,ue,Be,y),Me.layout=Bh(Me.layout,$e.layout,ue,Be,y);const Qe=!D||D(ue,$e,Be,J);if(!Qe)continue;const Ye=new Eh(ue,this.z,this.x,this.y,Te);Ye.layer=Me;let ct=i[Se];ct===void 0&&(ct=i[Se]=[]),ct.push({featureIndex:j,feature:Ye,intersectionZ:Qe})}}lookupSymbolFeatures(i,a,u,m,y,w,R,I){const D={};this.loadVTLayers();const j=na(y);for(const q of i)this.loadMatchingFeature(D,{bucketIndex:u,sourceLayerIndex:m,featureIndex:q,layoutVertexArrayOffset:0},j,w,R,I,a);return D}loadFeature(i){const{featureIndex:a,sourceLayerIndex:u}=i;this.loadVTLayers();const m=this.sourceLayerCoder.decode(u),y=this.vtFeatures[m];if(y[a])return y[a];const w=this.vtLayers[m].feature(a);return y[a]=w,w}hasLayer(i){for(const a of this.bucketLayerIDs)for(const u of a)if(i===u)return!0;return!1}getId(i,a){let u=i.id;if(this.promoteId){const m=typeof this.promoteId=="string"?this.promoteId:this.promoteId[a];m!=null&&(u=i.properties[m]),typeof u=="boolean"&&(u=Number(u))}return u}}function Bh(s,i,a,u,m){return jt(s,(y,w)=>{const R=i instanceof ht?i.get(w):null;return R&&R.evaluate?R.evaluate(a,u,m):R})}function y_(s,i){return i-s}Gt(Dh,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class zh{constructor(i,a){this.width=i,this.height=a,this.nextRow=0,this.image=new po({width:i,height:a}),this.positions={},this.uploaded=!1}getDash(i,a){const u=this.getKey(i,a);return this.positions[u]}trim(){const i=this.width,a=this.height=vn(this.nextRow);this.image.resize({width:i,height:a})}getKey(i,a){return i.join(",")+a}getDashRanges(i,a,u){const m=[];let y=i.length%2==1?-i[i.length-1]*u:0,w=i[0]*u,R=!0;m.push({left:y,right:w,isDash:R,zeroLength:i[0]===0});let I=i[0];for(let D=1;D<i.length;D++){R=!R;const j=i[D];y=I*u,I+=j,w=I*u,m.push({left:y,right:w,isDash:R,zeroLength:j===0})}return m}addRoundDash(i,a,u){const m=a/2;for(let y=-u;y<=u;y++){const w=this.width*(this.nextRow+u+y);let R=0,I=i[R];for(let D=0;D<this.width;D++){D/I.right>1&&(I=i[++R]);const j=Math.abs(D-I.left),q=Math.abs(D-I.right),K=Math.min(j,q);let J;const Q=y/u*(m+1);if(I.isDash){const ne=m-Math.abs(Q);J=Math.sqrt(K*K+ne*ne)}else J=m-Math.sqrt(K*K+Q*Q);this.image.data[w+D]=Math.max(0,Math.min(255,J+128))}}}addRegularDash(i,a){for(let I=i.length-1;I>=0;--I){const D=i[I],j=i[I+1];D.zeroLength?i.splice(I,1):j&&j.isDash===D.isDash&&(j.left=D.left,i.splice(I,1))}const u=i[0],m=i[i.length-1];u.isDash===m.isDash&&(u.left=m.left-this.width,m.right=u.right+this.width);const y=this.width*this.nextRow;let w=0,R=i[w];for(let I=0;I<this.width;I++){I/R.right>1&&(R=i[++w]);const D=Math.abs(I-R.left),j=Math.abs(I-R.right),q=Math.min(D,j);this.image.data[y+I]=Math.max(0,Math.min(255,(R.isDash?q:-q)+a+128))}}addDash(i,a){const u=this.getKey(i,a);if(this.positions[u])return this.positions[u];const m=a==="round",y=m?7:0,w=2*y+1;if(this.nextRow+w>this.height)return Ht("LineAtlas out of space"),null;i.length===0&&i.push(1);let R=0;for(let j=0;j<i.length;j++)i[j]<0&&(Ht("Negative value is found in line dasharray, replacing values with 0"),i[j]=0),R+=i[j];if(R!==0){const j=this.width/R,q=this.getDashRanges(i,this.width,j);m?this.addRoundDash(q,j,y):this.addRegularDash(q,a==="square"?.5*j:0)}const I=this.nextRow+y;this.nextRow+=w;const D={tl:[I,y],br:[R,0]};return this.positions[u]=D,D}}Gt(zh,"LineAtlas");class Fh{constructor(i){const a={},u=[];for(const R in i){const I=i[R],D=a[R]={};for(const j in I.glyphs){const q=I.glyphs[+j];if(!q||q.bitmap.width===0||q.bitmap.height===0)continue;const K=q.metrics.localGlyph?2:1,J={x:0,y:0,w:q.bitmap.width+2*K,h:q.bitmap.height+2*K};u.push(J),D[j]=J}}const{w:m,h:y}=Dd(u),w=new po({width:m||1,height:y||1});for(const R in i){const I=i[R];for(const D in I.glyphs){const j=I.glyphs[+D];if(!j||j.bitmap.width===0||j.bitmap.height===0)continue;const q=a[R][D],K=j.metrics.localGlyph?2:1;po.copy(j.bitmap,w,{x:0,y:0},{x:q.x+K,y:q.y+K},j.bitmap)}}this.image=w,this.positions=a}}Gt(Fh,"GlyphAtlas");class b_{constructor(i){this.tileID=new Vi(i.tileID.overscaledZ,i.tileID.wrap,i.tileID.canonical.z,i.tileID.canonical.x,i.tileID.canonical.y),this.tileZoom=i.tileZoom,this.uid=i.uid,this.zoom=i.zoom,this.canonical=i.tileID.canonical,this.pixelRatio=i.pixelRatio,this.tileSize=i.tileSize,this.source=i.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=i.showCollisionBoxes,this.collectResourceTiming=!!i.collectResourceTiming,this.returnDependencies=!!i.returnDependencies,this.promoteId=i.promoteId,this.enableTerrain=!!i.enableTerrain,this.isSymbolTile=i.isSymbolTile,this.tileTransform=Ts(i.tileID.canonical,i.projection),this.projection=i.projection}parse(i,a,u,m,y){this.status="parsing",this.data=i,this.collisionBoxArray=new ld;const w=new wh(Object.keys(i.layers).sort()),R=new Dh(this.tileID,this.promoteId);R.bucketLayerIDs=[];const I={},D=new zh(256,256),j={featureIndex:R,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:D,availableImages:u},q=a.familiesBySource[this.source];for(const Be in q){const Me=i.layers[Be];if(!Me)continue;let Qe=!1,Ye=!1;for(const ot of q[Be])ot[0].type==="symbol"?Qe=!0:Ye=!0;if(this.isSymbolTile===!0&&!Qe||this.isSymbolTile===!1&&!Ye)continue;Me.version===1&&Ht(`Vector tile source "${this.source}" layer "${Be}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ct=w.encode(Be),Tt=[];for(let ot=0;ot<Me.length;ot++){const ft=Me.feature(ot),vt=R.getId(ft,Be);Tt.push({feature:ft,id:vt,index:ot,sourceLayerIndex:ct})}for(const ot of q[Be]){const ft=ot[0];this.isSymbolTile!==void 0&&ft.type==="symbol"!==this.isSymbolTile||ft.minzoom&&this.zoom<Math.floor(ft.minzoom)||ft.maxzoom&&this.zoom>=ft.maxzoom||ft.visibility!=="none"&&(rp(ot,this.zoom,u),(I[ft.id]=ft.createBucket({index:R.bucketLayerIDs.length,layers:ot,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ct,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:u})).populate(Tt,j,this.tileID.canonical,this.tileTransform),R.bucketLayerIDs.push(ot.map(vt=>vt.id)))}}let K,J,Q,ne;D.trim();const ue={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Te=jt(j.glyphDependencies,Be=>Object.keys(Be).map(Number));Object.keys(Te).length?m.send("getGlyphs",{uid:this.uid,stacks:Te},(Be,Me)=>{K||(K=Be,J=Me,$e.call(this))},void 0,!1,ue):J={};const Oe=Object.keys(j.iconDependencies);Oe.length?m.send("getImages",{icons:Oe,source:this.source,tileID:this.tileID,type:"icons"},(Be,Me)=>{K||(K=Be,Q=Me,$e.call(this))},void 0,!1,ue):Q={};const Se=Object.keys(j.patternDependencies);function $e(){if(K)return y(K);if(J&&Q&&ne){const Be=new Fh(J),Me=new Ff(Q,ne);for(const Qe in I){const Ye=I[Qe];Ye instanceof Uo?(rp(Ye.layers,this.zoom,u),Ug(Ye,J,Be.positions,Q,Me.iconPositions,this.showCollisionBoxes,u,this.tileID.canonical,this.tileZoom,this.projection)):Ye.hasPattern&&(Ye instanceof $u||Ye instanceof Su||Ye instanceof Kl)&&(rp(Ye.layers,this.zoom,u),Ye.addFeatures(j,this.tileID.canonical,Me.patternPositions,u,this.tileTransform))}this.status="done",y(null,{buckets:nt(I).filter(Qe=>!Qe.isEmpty()),featureIndex:R,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Be.image,lineAtlas:D,imageAtlas:Me,glyphMap:this.returnDependencies?J:null,iconMap:this.returnDependencies?Q:null,glyphPositions:this.returnDependencies?Be.positions:null})}}Se.length?m.send("getImages",{icons:Se,source:this.source,tileID:this.tileID,type:"patterns"},(Be,Me)=>{K||(K=Be,ne=Me,$e.call(this))},void 0,!1,ue):ne={},$e.call(this)}}function rp(s,i,a){const u=new Ae(i);for(const m of s)m.recalculate(u,a)}class Vh{constructor(i){this.entries={},this.scheduler=i}request(i,a,u,m){const y=this.entries[i]=this.entries[i]||{callbacks:[]};if(y.result){const[w,R]=y.result;return this.scheduler?this.scheduler.add(()=>{m(w,R)},a):m(w,R),()=>{}}return y.callbacks.push(m),y.cancel||(y.cancel=u((w,R)=>{y.result=[w,R];for(const I of y.callbacks)this.scheduler?this.scheduler.add(()=>{I(w,R)},a):I(w,R);setTimeout(()=>delete this.entries[i],3e3)})),()=>{y.result||(y.callbacks=y.callbacks.filter(w=>w!==m),y.callbacks.length||(y.cancel(),delete this.entries[i]))}}}function Uh(s,i,a){const u=JSON.stringify(s.request);return s.data&&(this.deduped.entries[u]={result:[null,s.data]}),this.deduped.request(u,{type:"parseTile",isSymbolTile:s.isSymbolTile,zoom:s.tileZoom},m=>{const y=Li(s.request,(w,R,I,D)=>{w?m(w):R&&m(null,{vectorTile:a?void 0:new Ld(new Xl(R)),rawData:R,cacheControl:I,expires:D})});return()=>{y.cancel(),m()}},i)}o.ARRAY_TYPE=qi,o.AUTH_ERR_MSG=yo,o.Aabb=Fi,o.Actor=class{constructor(s,i,a){this.target=s,this.parent=i,this.mapId=a,this.callbacks={},this.cancelCallbacks={},Ot(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=et()?s:v,this.scheduler=new m_}send(s,i,a,u,m=!1,y){const w=Math.round(1e18*Math.random()).toString(36).substring(0,10);a&&(a.metadata=y,this.callbacks[w]=a);const R=Rt(this.globalScope)?void 0:[];return this.target.postMessage({id:w,type:s,hasCallback:!!a,targetMapId:u,mustQueue:m,sourceMapId:this.mapId,data:ps(i,R)},R),{cancel:()=>{a&&delete this.callbacks[w],this.target.postMessage({id:w,type:"<cancel>",targetMapId:u,sourceMapId:this.mapId})}}}receive(s){const i=s.data,a=i.id;if(a&&(!i.targetMapId||this.mapId===i.targetMapId))if(i.type==="<cancel>"){const u=this.cancelCallbacks[a];delete this.cancelCallbacks[a],u&&u.cancel()}else if(i.mustQueue||et()){const u=this.callbacks[a];this.cancelCallbacks[a]=this.scheduler.add(()=>this.processTask(a,i),u&&u.metadata||{type:"message"})}else this.processTask(a,i)}processTask(s,i){if(i.type==="<response>"){const a=this.callbacks[s];delete this.callbacks[s],a&&(i.error?a(Br(i.error)):a(null,Br(i.data)))}else{const a=Rt(this.globalScope)?void 0:[],u=i.hasCallback?(y,w)=>{delete this.cancelCallbacks[s],this.target.postMessage({id:s,type:"<response>",sourceMapId:this.mapId,error:y?ps(y):null,data:ps(w,a)},a)}:y=>{},m=Br(i.data);if(this.parent[i.type])this.parent[i.type](i.sourceMapId,m,u);else if(this.parent.getWorkerSource){const y=i.type.split(".");this.parent.getWorkerSource(i.sourceMapId,y[0],m.source)[y[1]](m,u)}else u(new Error(`Could not find function ${i.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},o.CanonicalTileID=Ru,o.Color=ii,o.ColorMode=Zr,o.CullFaceMode=Nr,o.DEMData=Ku,o.DataConstantProperty=We,o.DedupedRequest=Vh,o.DepthMode=Pa,o.EXTENT=cn,o.Elevation=class{isDataAvailableAtPoint(s){const i=this._source();if(this.isUsingMockSource()||!i||s.y<0||s.y>1)return!1;const a=i.getSource().maxzoom,u=1<<a,m=Math.floor(s.x),y=Math.floor((s.x-m)*u),w=Math.floor(s.y*u),R=this.findDEMTileFor(new Vi(a,m,a,y,w));return!(!R||!R.dem)}getAtPointOrZero(s,i=0){return this.getAtPoint(s,i)||0}getAtPoint(s,i,a=!0){if(this.isUsingMockSource())return null;i==null&&(i=null);const u=this._source();if(!u||s.y<0||s.y>1)return i;const m=u.getSource().maxzoom,y=1<<m,w=Math.floor(s.x),R=s.x-w,I=new Vi(m,w,m,Math.floor(R*y),Math.floor(s.y*y)),D=this.findDEMTileFor(I);if(!D||!D.dem)return i;const j=D.dem,q=1<<D.tileID.canonical.z,K=(R*q-D.tileID.canonical.x)*j.dim,J=(s.y*q-D.tileID.canonical.y)*j.dim,Q=Math.floor(K),ne=Math.floor(J);return(a?this.exaggeration():1)*Rn(Rn(j.get(Q,ne),j.get(Q,ne+1),J-ne),Rn(j.get(Q+1,ne),j.get(Q+1,ne+1),J-ne),K-Q)}getAtTileOffset(s,i,a){const u=1<<s.canonical.z;return this.getAtPointOrZero(new va(s.wrap+(s.canonical.x+i/cn)/u,(s.canonical.y+a/cn)/u))}getAtTileOffsetFunc(s,i,a,u){return m=>{const y=this.getAtTileOffset(s,m.x,m.y),w=u.upVector(s.canonical,m.x,m.y);return ir(w,w,y*u.upVectorScale(s.canonical,i,a).metersToTile),w}}getForTilePoints(s,i,a,u){if(this.isUsingMockSource())return!1;const m=Wu.create(this,s,u);return!!m&&(i.forEach(y=>{y[2]=this.exaggeration()*m.getElevationAt(y[0],y[1],a)}),!0)}getMinMaxForTile(s){if(this.isUsingMockSource())return null;const i=this.findDEMTileFor(s);if(!i||!i.dem)return null;const a=i.dem.tree,u=i.tileID,m=1<<s.canonical.z-u.canonical.z;let y=s.canonical.x/m-u.canonical.x,w=s.canonical.y/m-u.canonical.y,R=0;for(let I=0;I<s.canonical.z-u.canonical.z&&!a.leaves[R];I++){y*=2,w*=2;const D=2*Math.floor(w)+Math.floor(y);R=a.childOffsets[R]+D,y%=1,w%=1}return{min:this.exaggeration()*a.minimums[R],max:this.exaggeration()*a.maximums[R]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(s,i,a){throw new Error("Pure virtual method called.")}pointCoordinate(s){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(s){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},o.ErrorEvent=Ir,o.EvaluationParameters=Ae,o.Event=zn,o.Evented=vr,o.FillExtrusionBucket=Kl,o.Frustum=Sd,o.FrustumCorners=Cd,o.GLOBE_METERS_TO_ECEF=Hd,o.GLOBE_RADIUS=mo,o.GLOBE_SCALE_MATCH_LATITUDE=45,o.GLOBE_ZOOM_THRESHOLD_MAX=6,o.GLOBE_ZOOM_THRESHOLD_MIN=5,o.GlobeSharedBuffers=class{constructor(s){this._createGrid(s),this._createPoles(s)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const s of this._poleSegments)s.destroy();for(const s of this._gridSegments)s.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const s of this._wireframeSegments)s.destroy()}}_createGrid(s){const i=new xn,a=new Ni,u=65;for(let m=0;m<u;m++)for(let y=0;y<u;y++)i.emplaceBack(y,m);this._gridSegments=[];for(let m=0,y=0;m<Ma.length;m++){const w=Ma[m];for(let I=0;I<w;I++)for(let D=0;D<64;D++){const j=I*u+D;a.emplaceBack(j+1,j,j+u),a.emplaceBack(j+u,j+u+1,j+1)}const R=64*w*2;this._gridSegments.push(di.simpleSegment(0,y,(w+1)*u,R)),y+=R}this._gridBuffer=s.createVertexBuffer(i,ec.members),this._gridIndexBuffer=s.createIndexBuffer(a,!0)}_createPoles(s){const i=new Ni;for(let m=0;m<=Na;m++)i.emplaceBack(0,m+1,m+2);this._poleIndexBuffer=s.createIndexBuffer(i,!0);const a=new hr,u=new hr;this._poleSegments=[];for(let m=0,y=0;m<5;m++){const w=360/(1<<m);a.emplaceBack(0,-mo,0,.5,0),u.emplaceBack(0,-mo,0,.5,1);for(let R=0;R<=Na;R++){const I=R/Na,D=Rn(0,w,I),[j,q,K]=Ia(Zg,Yg,D,mo);a.emplaceBack(j,q,K,I,0),u.emplaceBack(j,q,K,I,1)}this._poleSegments.push(di.simpleSegment(y,0,66,64)),y+=66}this._poleNorthVertexBuffer=s.createVertexBuffer(a,sh,!1),this._poleSouthVertexBuffer=s.createVertexBuffer(u,sh,!1)}getGridBuffers(s){return[this._gridBuffer,this._gridIndexBuffer,this._gridSegments[s]]}getPoleBuffers(s){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[s]]}getWirefameBuffers(s,i){if(!this._wireframeSegments){const a=new tr,u=Na,m=u+1;this._wireframeSegments=[];for(let y=0,w=0;y<Ma.length;y++){const R=Ma[y];for(let D=0;D<R;D++)for(let j=0;j<u;j++){const q=D*m+j;a.emplaceBack(q,q+1),a.emplaceBack(q,q+m),a.emplaceBack(q,q+m+1)}const I=R*u*3;this._wireframeSegments.push(di.simpleSegment(0,w,(R+1)*m,I)),w+=I}this._wireframeIndexBuffer=s.createIndexBuffer(a)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[i]]}},o.GlyphManager=Ra,o.ImagePosition=Bd,o.LivePerformanceUtils=yt,o.LngLat=Ln,o.LngLatBounds=zo,o.LocalGlyphMode=Vd,o.MAX_MERCATOR_LATITUDE=jr,o.MercatorCoordinate=va,o.ONE_EM=ki,o.OverscaledTileID=Vi,o.PerformanceMarkers=Ze,o.Properties=Mt,o.RGBAImage=Ki,o.Ray=Ed,o.RequestManager=class{constructor(s,i,a){this._transformRequestFn=s,this._customAccessToken=i,this._silenceAuthErrors=!!a,this._createSkuToken()}_createSkuToken(){const s=function(){let i="";for(let a=0;a<10;a++)i+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",z,i].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=s.token,this._skuTokenExpiresAt=s.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(s,i){return this._transformRequestFn&&this._transformRequestFn(s,i)||{url:s}}normalizeStyleURL(s,i){if(!Xi(s))return s;const a=Oi(s);return a.path=`/styles/v1${a.path}`,this._makeAPIURL(a,this._customAccessToken||i)}normalizeGlyphsURL(s,i){if(!Xi(s))return s;const a=Oi(s);return a.path=`/fonts/v1${a.path}`,this._makeAPIURL(a,this._customAccessToken||i)}normalizeSourceURL(s,i,a,u){if(!Xi(s))return s;const m=Oi(s);return m.path=`/v4/${m.authority}.json`,m.params.push("secure"),a&&m.params.push(`language=${a}`),u&&m.params.push(`worldview=${u}`),this._makeAPIURL(m,this._customAccessToken||i)}normalizeSpriteURL(s,i,a,u){const m=Oi(s);return Xi(s)?(m.path=`/styles/v1${m.path}/sprite${i}${a}`,this._makeAPIURL(m,this._customAccessToken||u)):(m.path+=`${i}${a}`,Xr(m))}normalizeTileURL(s,i,a){if(this._isSkuTokenExpired()&&this._createSkuToken(),s&&!Xi(s))return s;const u=Oi(s);u.path=u.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${i||a&&u.authority!=="raster"&&a===512?"@2x":""}${S.supported?".webp":"$1"}`),u.authority==="raster"?u.path=`/${k.RASTER_URL_PREFIX}${u.path}`:(u.path=u.path.replace(/^.+\/v4\//,"/"),u.path=`/${k.TILE_URL_VERSION}${u.path}`);const m=this._customAccessToken||function(y){for(const w of y){const R=w.match(/^access_token=(.*)$/);if(R)return R[1]}return null}(u.params)||k.ACCESS_TOKEN;return k.REQUIRE_ACCESS_TOKEN&&m&&this._skuToken&&u.params.push(`sku=${this._skuToken}`),this._makeAPIURL(u,m)}canonicalizeTileURL(s,i){const a=Oi(s);if(!a.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!a.path.match(/\.[\w]+$/))return s;let u="mapbox://";a.path.match(/^\/raster\/v1\//)?u+=`raster/${a.path.replace(`/${k.RASTER_URL_PREFIX}/`,"")}`:u+=`tiles/${a.path.replace(`/${k.TILE_URL_VERSION}/`,"")}`;let m=a.params;return i&&(m=m.filter(y=>!y.match(/^access_token=/))),m.length&&(u+=`?${m.join("&")}`),u}canonicalizeTileset(s,i){const a=!!i&&Xi(i),u=[];for(const m of s.tiles||[])bo(m)?u.push(this.canonicalizeTileURL(m,a)):u.push(m);return u}_makeAPIURL(s,i){const a="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",u=Oi(k.API_URL);if(s.protocol=u.protocol,s.authority=u.authority,s.protocol==="http"){const m=s.params.indexOf("secure");m>=0&&s.params.splice(m,1)}if(u.path!=="/"&&(s.path=`${u.path}${s.path}`),!k.REQUIRE_ACCESS_TOKEN)return Xr(s);if(i=i||k.ACCESS_TOKEN,!this._silenceAuthErrors){if(!i)throw new Error(`An API access token is required to use Mapbox GL. ${a}`);if(i[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${a}`)}return s.params=s.params.filter(m=>m.indexOf("access_token")===-1),s.params.push(`access_token=${i||""}`),Xr(s)}},o.ResourceType=yn,o.SegmentVector=di,o.SourceCache=As,o.StencilMode=tp,o.StructArrayLayout1ui2=Ml,o.StructArrayLayout2f1f2i16=Bi,o.StructArrayLayout2i4=xn,o.StructArrayLayout2ui4=tr,o.StructArrayLayout3f12=er,o.StructArrayLayout3ui6=Ni,o.StructArrayLayout4i8=Vn,o.StructArrayLayout5f20=hr,o.Texture=lc,o.Tile=Qd,o.Transitionable=rt,o.Uniform1f=fu,o.Uniform1i=class extends ao{constructor(s){super(s),this.current=0}set(s,i,a){this.fetchUniformLocation(s,i)&&this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},o.Uniform2f=class extends ao{constructor(s){super(s),this.current=[0,0]}set(s,i,a){this.fetchUniformLocation(s,i)&&(a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1])))}},o.Uniform3f=class extends ao{constructor(s){super(s),this.current=[0,0,0]}set(s,i,a){this.fetchUniformLocation(s,i)&&(a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2])))}},o.Uniform4f=$p,o.UniformColor=Np,o.UniformMatrix2f=class extends ao{constructor(s){super(s),this.current=em}set(s,i,a){if(this.fetchUniformLocation(s,i)){for(let u=0;u<4;u++)if(a[u]!==this.current[u]){this.current=a,this.gl.uniformMatrix2fv(this.location,!1,a);break}}}},o.UniformMatrix3f=class extends ao{constructor(s){super(s),this.current=Qh}set(s,i,a){if(this.fetchUniformLocation(s,i)){for(let u=0;u<9;u++)if(a[u]!==this.current[u]){this.current=a,this.gl.uniformMatrix3fv(this.location,!1,a);break}}}},o.UniformMatrix4f=class extends ao{constructor(s){super(s),this.current=Jh}set(s,i,a){if(this.fetchUniformLocation(s,i)){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let u=1;u<16;u++)if(a[u]!==this.current[u]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}}},o.UnwrappedTileID=Af,o.ValidationError=Ut,o.VectorTileFeature=Au,o.VectorTileWorkerSource=class extends vr{constructor(s,i,a,u,m){super(),this.actor=s,this.layerIndex=i,this.availableImages=a,this.loadVectorData=m||Uh,this.loading={},this.loaded={},this.deduped=new Vh(s.scheduler),this.isSpriteLoaded=u,this.scheduler=s.scheduler}loadTile(s,i){const a=s.uid,u=s&&s.request,m=u&&u.collectResourceTiming,y=this.loading[a]=new b_(s);y.abort=this.loadVectorData(s,(w,R)=>{const I=!this.loading[a];if(delete this.loading[a],I||w||!R)return y.status="done",I||(this.loaded[a]=y),i(w);const D=R.rawData,j={};R.expires&&(j.expires=R.expires),R.cacheControl&&(j.cacheControl=R.cacheControl),y.vectorTile=R.vectorTile||new Ld(new Xl(D));const q=()=>{y.parse(y.vectorTile,this.layerIndex,this.availableImages,this.actor,(K,J)=>{if(K||!J)return i(K);const Q={};if(m){const ne=en(u);ne.length>0&&(Q.resourceTiming=JSON.parse(JSON.stringify(ne)))}i(null,mt({rawTileData:D.slice(0)},J,j,Q))})};this.isSpriteLoaded?q():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(q,{type:"parseTile",isSymbolTile:s.isSymbolTile,zoom:s.tileZoom}):q()}),this.loaded=this.loaded||{},this.loaded[a]=y})}reloadTile(s,i){const a=this.loaded,u=s.uid,m=this;if(a&&a[u]){const y=a[u];y.showCollisionBoxes=s.showCollisionBoxes,y.enableTerrain=!!s.enableTerrain,y.projection=s.projection,y.tileTransform=Ts(s.tileID.canonical,s.projection);const w=(R,I)=>{const D=y.reloadCallback;D&&(delete y.reloadCallback,y.parse(y.vectorTile,m.layerIndex,this.availableImages,m.actor,D)),i(R,I)};y.status==="parsing"?y.reloadCallback=w:y.status==="done"&&(y.vectorTile?y.parse(y.vectorTile,this.layerIndex,this.availableImages,this.actor,w):w())}}abortTile(s,i){const a=s.uid,u=this.loading[a];u&&(u.abort&&u.abort(),delete this.loading[a]),i()}removeTile(s,i){const a=this.loaded,u=s.uid;a&&a[u]&&delete a[u],i()}},o.WritingMode=rr,o.ZoomHistory=Jc,o.add=uo,o.addDynamicAttributes=Gu,o.adjoint=function(s,i){var a=i[0],u=i[1],m=i[2],y=i[3],w=i[4],R=i[5],I=i[6],D=i[7],j=i[8];return s[0]=w*j-R*D,s[1]=m*D-u*j,s[2]=u*R-m*w,s[3]=R*I-y*j,s[4]=a*j-m*I,s[5]=m*y-a*R,s[6]=y*D-w*I,s[7]=u*I-a*D,s[8]=a*w-u*y,s},o.asyncAll=ze,o.bezier=Ce,o.bindAll=Ot,o.boundsAttributes=Sh,o.bufferConvexPolygon=function(s,i){const a=[];for(let u=0;u<s.length;u++){const m=ke(u-1,-1,s.length-1),y=ke(u+1,-1,s.length-1),w=s[u],R=s[y],I=s[m].sub(w).unit(),D=R.sub(w).unit(),j=D.angleWithSep(I.x,I.y),q=I.add(D).unit().mult(-1*i/Math.sin(j/2));a.push(w.add(q))}return a},o.cacheEntryPossiblyAdded=function(s){Kt++,Kt>Je&&(s.getActor().send("enforceCacheSizeLimit",$t),Kt=0)},o.calculateGlobeLabelMatrix=function(s,i){const{x:a,y:u}=s.point,m=ph(a,u,s.worldSize/s._pixelsPerMercatorPixel,0,0);return ba(m,m,Wd(qr(i)))},o.calculateGlobeMatrix=function(s){const{x:i,y:a}=s.point,{lng:u,lat:m}=s._center;return ph(i,a,s.worldSize,u,m)},o.calculateGlobeMercatorMatrix=function(s){const i=s.pixelsPerMeter,a=i/mr(1,s.center.lat),u=Gr(new Float64Array(16));return Ll(u,u,[s.point.x,s.point.y,0]),ws(u,u,[a,a,i]),Float32Array.from(u)},o.circumferenceAtLatitude=dd,o.clamp=it,o.clearTileCache=function(s){if(!ut())return;const i=v.caches.delete(kt);s&&i.catch(s).then(()=>s())},o.clipLine=Jf,o.clone=function(s){var i=new qi(16);return i[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],i[4]=s[4],i[5]=s[5],i[6]=s[6],i[7]=s[7],i[8]=s[8],i[9]=s[9],i[10]=s[10],i[11]=s[11],i[12]=s[12],i[13]=s[13],i[14]=s[14],i[15]=s[15],i},o.clone$1=dn,o.collisionCircleLayout=hg,o.config=k,o.conjugate=function(s,i){return s[0]=-i[0],s[1]=-i[1],s[2]=-i[2],s[3]=i[3],s},o.create=function(){var s=new qi(16);return qi!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},o.create$1=Hp,o.createExpression=ro,o.createLayout=It,o.createStyleLayer=function(s){return s.type==="custom"?new d_(s):new f_[s.type](s)},o.cross=wd,o.degToRad=ce,o.distance=function(s,i){return Math.hypot(i[0]-s[0],i[1]-s[1],i[2]-s[2])},o.div=function(s,i,a){return s[0]=i[0]/a[0],s[1]=i[1]/a[1],s[2]=i[2]/a[2],s},o.dot=gr,o.earthRadius=mu,o.ease=Fe,o.easeCubicInOut=ae,o.ecefToLatLng=function([s,i,a]){const u=Math.hypot(s,i,a),m=Math.atan2(s,a),y=.5*Math.PI-Math.acos(-i/u);return new Ln(me(m),me(y))},o.emitValidationErrors=Tl,o.endsWith=bt,o.enforceCacheSizeLimit=function(s){pt(),dt&&dt.then(i=>{i.keys().then(a=>{for(let u=0;u<a.length-s;u++)i.delete(a[u])})})},o.evaluateSizeForFeature=Nu,o.evaluateSizeForZoom=Sa,o.evaluateVariableOffset=ih,o.evented=be,o.exactEquals=function(s,i){return s[0]===i[0]&&s[1]===i[1]&&s[2]===i[2]&&s[3]===i[3]},o.exactEquals$1=function(s,i){return s[0]===i[0]&&s[1]===i[1]&&s[2]===i[2]},o.exported=Nn,o.exported$1=S,o.extend=mt,o.extend$1=yr,o.fillExtrusionHeightLift=Cf,o.filterObject=gn,o.fromMat4=function(s,i){return s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[4],s[4]=i[5],s[5]=i[6],s[6]=i[8],s[7]=i[9],s[8]=i[10],s},o.fromQuat=function(s,i){var a=i[0],u=i[1],m=i[2],y=i[3],w=a+a,R=u+u,I=m+m,D=a*w,j=u*w,q=u*R,K=m*w,J=m*R,Q=m*I,ne=y*w,ue=y*R,Te=y*I;return s[0]=1-q-Q,s[1]=j+Te,s[2]=K-ue,s[3]=0,s[4]=j-Te,s[5]=1-D-Q,s[6]=J+ne,s[7]=0,s[8]=K+ue,s[9]=J-ne,s[10]=1-D-q,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},o.fromRotation=function(s,i){var a=Math.sin(i),u=Math.cos(i);return s[0]=u,s[1]=a,s[2]=0,s[3]=-a,s[4]=u,s[5]=0,s[6]=0,s[7]=0,s[8]=1,s},o.fromScaling=Kp,o.furthestTileCorner=function(s){const i=Math.round((s+45+360)%360/90)%4;return we[i]},o.getAABBPointSquareDist=function(s,i,a){let u=0;for(let m=0;m<2;++m){const y=a?a[m]:0;s[m]>y&&(u+=(s[m]-y)*(s[m]-y)),i[m]<y&&(u+=(y-i[m])*(y-i[m]))}return u},o.getAnchorAlignment=Fd,o.getAnchorJustification=jd,o.getBounds=function(s){let i=1/0,a=1/0,u=-1/0,m=-1/0;for(const y of s)i=Math.min(i,y.x),a=Math.min(a,y.y),u=Math.max(u,y.x),m=Math.max(m,y.y);return{min:new Z(i,a),max:new Z(u,m)}},o.getColumn=tt,o.getGridMatrix=function(s,i,a,u){const m=i.getNorth(),y=i.getSouth(),w=i.getWest(),R=i.getEast(),I=1<<s.z,D=R-w,j=m-y,q=D/Na,K=-j/Ma[a],J=[0,q,0,K,0,0,m,w,0];if(s.z>0){const Q=180/u;qp(J,J,[Q/D+1,0,0,0,Q/j+1,0,-.5*Q/q,.5*Q/K,1])}return J[2]=I,J[5]=s.x,J[8]=s.y,J},o.getImage=vo,o.getJSON=function(s,i){return Ii(mt(s,{type:"json"}),i)},o.getLatitudinalLod=function(s){const i=80.051129;s=it(s,-80.051129,i)/i*90;const a=Math.pow(Math.abs(Math.sin(ce(s))),3);return Math.round(a*(Ma.length-1))},o.getMapSessionAPI=Ge,o.getPerformanceMeasurement=en,o.getProjection=bh,o.getRTLTextPluginStatus=he,o.getReferrer=gi,o.getTilePoint=function(s,{x:i,y:a},u=0){return new Z(((i-u)*s.scale-s.x)*cn,(a*s.scale-s.y)*cn)},o.getTileVec3=function(s,i,a=0){return xa(((i.x-a)*s.scale-s.x)*cn,(i.y*s.scale-s.y)*cn,Lp(i.z,i.y))},o.getVideo=function(s,i){const a=v.document.createElement("video");a.muted=!0,a.onloadstart=function(){i(null,a)};for(let u=0;u<s.length;u++){const m=v.document.createElement("source");Mr(s[u])||(a.crossOrigin="Anonymous"),m.src=s[u],a.appendChild(m)}return{cancel:()=>{}}},o.globeCenterToScreenPoint=function(s){const i=[0,0,0],a=Gr(new Float64Array(16));return ba(a,s.pixelMatrix,s.globeMatrix),pi(i,i,a),new Z(i[0],i[1])},o.globeDenormalizeECEF=Wd,o.globeECEFOrigin=function(s,i){const a=[0,0,0];return pi(a,a,ic(qr(i.canonical))),pi(a,a,s),a},o.globeNormalizeECEF=ic,o.globePixelsToTileUnits=function(s,i){return cn/(512*Math.pow(2,s))*zu(qr(i))},o.globePoleMatrixForTile=function(s,i,a){const u=Gr(new Float64Array(16)),m=(i/(1<<s)-.5)*Math.PI*2;return bu(u,a.globeMatrix,m),Float32Array.from(u)},o.globeTileBounds=qr,o.globeTiltAtLngLat=fh,o.globeToMercatorTransition=La,o.globeUseCustomAntiAliasing=function(s,i,a){const u=La(a.zoom),m=s.style.map._antialias,y=!!i.extStandardDerivatives,w=i.extStandardDerivativesForceOff||s.terrain&&s.terrain.exaggeration()>0;return u===0&&!m&&!w&&y},o.identity=Gr,o.identity$1=tf,o.invert=vd,o.isFullscreen=function(){return!!v.document.fullscreenElement||!!v.document.webkitFullscreenElement},o.isLngLatBehindGlobe=function(s,i){return fh(s,i)>Math.PI/2*1.01},o.isMapAuthenticated=function(s){return Ve.has(s)},o.isMapboxURL=Xi,o.isSafariWithAntialiasingBug=function(s){const i=s.navigator?s.navigator.userAgent:null;return!!Rt(s)&&i&&(i.match("Version/15.4")||i.match("Version/15.5")||i.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},o.latFromMercatorY=Ai,o.latLngToECEF=tc,o.len=_m,o.length=Ol,o.length$1=function(s){return Math.hypot(s[0],s[1],s[2],s[3])},o.lngFromMercatorX=nr,o.loadVectorTile=Uh,o.makeRequest=Ii,o.mapValue=function(s,i,a,u,m){return it((s-i)/(a-i)*(m-u)+u,u,m)},o.mercatorScale=Op,o.mercatorXfromLng=Vr,o.mercatorYfromLat=Ur,o.mercatorZfromAltitude=mr,o.mul=mm,o.mul$1=gm,o.multiply=ba,o.multiply$1=qp,o.multiply$2=Yp,o.nextPowerOfTwo=vn,o.normalize=zi,o.normalize$1=vm,o.normalize$2=Qp,o.number=Rn,o.ortho=function(s,i,a,u,m,y,w){var R=1/(i-a),I=1/(u-m),D=1/(y-w);return s[0]=-2*R,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*I,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*D,s[11]=0,s[12]=(i+a)*R,s[13]=(m+u)*I,s[14]=(w+y)*D,s[15]=1,s},o.pbf=Xl,o.perspective=function(s,i,a,u,m){var y,w=1/Math.tan(i/2);return s[0]=w/a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=w,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,m!=null&&m!==1/0?(s[10]=(m+u)*(y=1/(u-m)),s[14]=2*m*u*y):(s[10]=-1,s[14]=-2*u),s},o.pick=function(s,i){const a={};for(let u=0;u<i.length;u++){const m=i[u];m in s&&(a[m]=s[m])}return a},o.plugin=Le,o.pointGeometry=Z,o.polygonContainsPoint=xs,o.polygonIntersectsBox=Up,o.polygonIntersectsPolygon=Bp,o.polygonizeBounds=function(s,i,a=0,u=!0){const m=new Z(a,a),y=s.sub(m),w=i.add(m),R=[y,new Z(w.x,y.y),w,new Z(y.x,w.y)];return u&&R.push(y.clone()),R},o.posAttributes=ec,o.postMapLoadEvent=ye,o.postPerformanceEvent=De,o.postTurnstileEvent=ee,o.potpack=Dd,o.prevPowerOfTwo=function(s){return s<=1?1:Math.pow(2,Math.floor(Math.log(s)/Math.LN2))},o.radToDeg=me,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.registerForPluginStateChange=function(s){return s({pluginStatus:pe,pluginURL:ve}),be.on("pluginStateChange",s),s},o.removeAuthState=function(s){Ve.delete(s)},o.renderColorRamp=Ad,o.resample=Pp,o.rotateX=yd,o.rotateX$1=nf,o.rotateY=bu,o.rotateY$1=rf,o.rotateZ=function(s,i,a){var u=Math.sin(a),m=Math.cos(a),y=i[0],w=i[1],R=i[2],I=i[3],D=i[4],j=i[5],q=i[6],K=i[7];return i!==s&&(s[8]=i[8],s[9]=i[9],s[10]=i[10],s[11]=i[11],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[0]=y*m+D*u,s[1]=w*m+j*u,s[2]=R*m+q*u,s[3]=I*m+K*u,s[4]=D*m-y*u,s[5]=j*m-w*u,s[6]=q*m-R*u,s[7]=K*m-I*u,s},o.rotateZ$1=function(s,i,a){a*=.5;var u=i[0],m=i[1],y=i[2],w=i[3],R=Math.sin(a),I=Math.cos(a);return s[0]=u*I+m*R,s[1]=m*I-u*R,s[2]=y*I+w*R,s[3]=w*I-y*R,s},o.scale=ws,o.scale$1=Jp,o.scale$2=ir,o.scaleAndAdd=Bl,o.set=function(s,i,a,u){return s[0]=i,s[1]=a,s[2]=u,s},o.setCacheLimits=function(s,i){$t=s,Je=i},o.setColumn=function(s,i,a){s[4*i+0]=a[0],s[4*i+1]=a[1],s[4*i+2]=a[2],s[4*i+3]=a[3]},o.setRTLTextPlugin=function(s,i,a=!1){if(pe===X||pe===te||pe===le)throw new Error("setRTLTextPlugin cannot be called multiple times.");ve=Nn.resolveURL(s),pe=X,ge=i,de(),a||Ie()},o.smoothstep=_e,o.spec=lt,o.squaredLength=function(s){var i=s[0],a=s[1],u=s[2];return i*i+a*a+u*u},o.storeAuthState=function(s,i){i?Ve.add(s):Ve.delete(s)},o.sub=kr,o.subtract=xd,o.symbolSize=mg,o.tileAABB=function(s,i,a,u,m,y,w,R,I){if(I.name==="globe")return Wg(s,i,new Ru(a,u,m));const D=Ts({z:a,x:u,y:m},I);return new Fi([(y+D.x/D.scale)*i,i*(D.y/D.scale),w],[(y+D.x2/D.scale)*i,i*(D.y2/D.scale),R])},o.tileCornersToBounds=Bu,o.tileTransform=Ts,o.transformMat3=function(s,i,a){var u=i[0],m=i[1],y=i[2];return s[0]=u*a[0]+m*a[3]+y*a[6],s[1]=u*a[1]+m*a[4]+y*a[7],s[2]=u*a[2]+m*a[5]+y*a[8],s},o.transformMat4=pi,o.transformMat4$1=Es,o.transformQuat=Xp,o.transitionTileAABBinECEF=ch,o.translate=Ll,o.transpose=function(s,i){if(s===i){var a=i[1],u=i[2],m=i[5];s[1]=i[3],s[2]=i[6],s[3]=a,s[5]=i[7],s[6]=u,s[7]=m}else s[0]=i[0],s[1]=i[3],s[2]=i[6],s[3]=i[1],s[4]=i[4],s[5]=i[7],s[6]=i[2],s[7]=i[5],s[8]=i[8];return s},o.triggerPluginCompletionEvent=fe,o.uniqueId=un,o.updateGlobeVertexNormal=function(s,i,a,u,m){const y=5*i+2;s.float32[y+0]=a,s.float32[y+1]=u,s.float32[y+2]=m},o.validateCustomStyleLayer=function(s){const i=[],a=s.id;return a===void 0&&i.push({message:`layers.${a}: missing required property "id"`}),s.render===void 0&&i.push({message:`layers.${a}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&i.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),i},o.validateFilter=s=>Sr(us(s)),o.validateFog=s=>Sr(Wc(s)),o.validateLayer=s=>Sr(wl(s)),o.validateLight=s=>Sr(ds(s)),o.validateSource=s=>Sr(la(s)),o.validateStyle=Zc,o.validateTerrain=s=>Sr(El(s)),o.values=nt,o.vectorTile=Tu,o.version=x,o.warnOnce=Ht,o.window=v,o.wrap=ke}),d(["./shared"],function(o){function v(xe){if(typeof xe=="number"||typeof xe=="boolean"||typeof xe=="string"||xe==null)return JSON.stringify(xe);if(Array.isArray(xe)){let ie="[";for(const ye of xe)ie+=`${v(ye)},`;return`${ie}]`}let ee="{";for(const ie of Object.keys(xe).sort())ee+=`${ie}:${v(xe[ie])},`;return`${ee}}`}function x(xe){let ee="";for(const ie of o.refProperties)ee+=`/${v(xe[ie])}`;return ee}class E{constructor(ee){this.keyCache={},ee&&this.replace(ee)}replace(ee){this._layerConfigs={},this._layers={},this.update(ee,[])}update(ee,ie){for(const Re of ee)this._layerConfigs[Re.id]=Re,(this._layers[Re.id]=o.createStyleLayer(Re)).compileFilter(),this.keyCache[Re.id]&&delete this.keyCache[Re.id];for(const Re of ie)delete this.keyCache[Re],delete this._layerConfigs[Re],delete this._layers[Re];this.familiesBySource={};const ye=function(Re,De){const He={};for(let Ve=0;Ve<Re.length;Ve++){const Ze=De&&De[Re[Ve].id]||x(Re[Ve]);De&&(De[Re[Ve].id]=Ze);let yt=He[Ze];yt||(yt=He[Ze]=[]),yt.push(Re[Ve])}const Ge=[];for(const Ve in He)Ge.push(He[Ve]);return Ge}(o.values(this._layerConfigs),this.keyCache);for(const Re of ye){const De=Re.map(Vt=>this._layers[Vt.id]),He=De[0];if(He.visibility==="none")continue;const Ge=He.source||"";let Ve=this.familiesBySource[Ge];Ve||(Ve=this.familiesBySource[Ge]={});const Ze=He.sourceLayer||"_geojsonTileLayer";let yt=Ve[Ze];yt||(yt=Ve[Ze]=[]),yt.push(De)}}}class k{loadTile(ee,ie){const{uid:ye,encoding:Re,rawImageData:De,padding:He,buildQuadTree:Ge}=ee,Ve=o.window.ImageBitmap&&De instanceof o.window.ImageBitmap?this.getImageData(De,He):De;ie(null,new o.DEMData(ye,Ve,Re,He<1,Ge))}getImageData(ee,ie){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ee.width,ee.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=ee.width,this.offscreenCanvas.height=ee.height,this.offscreenCanvasContext.drawImage(ee,0,0,ee.width,ee.height);const ye=this.offscreenCanvasContext.getImageData(-ie,-ie,ee.width+2*ie,ee.height+2*ie);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),ye}}var S=function xe(ee,ie){var ye,Re=ee&&ee.type;if(Re==="FeatureCollection")for(ye=0;ye<ee.features.length;ye++)xe(ee.features[ye],ie);else if(Re==="GeometryCollection")for(ye=0;ye<ee.geometries.length;ye++)xe(ee.geometries[ye],ie);else if(Re==="Feature")xe(ee.geometry,ie);else if(Re==="Polygon")N(ee.coordinates,ie);else if(Re==="MultiPolygon")for(ye=0;ye<ee.coordinates.length;ye++)N(ee.coordinates[ye],ie);return ee};function N(xe,ee){if(xe.length!==0){L(xe[0],ee);for(var ie=1;ie<xe.length;ie++)L(xe[ie],!ee)}}function L(xe,ee){for(var ie=0,ye=0,Re=0,De=xe.length,He=De-1;Re<De;He=Re++){var Ge=(xe[Re][0]-xe[He][0])*(xe[He][1]+xe[Re][1]),Ve=ie+Ge;ye+=Math.abs(ie)>=Math.abs(Ge)?ie-Ve+Ge:Ge-Ve+ie,ie=Ve}ie+ye>=0!=!!ee&&xe.reverse()}const P=o.VectorTileFeature.prototype.toGeoJSON;class O{constructor(ee){this._feature=ee,this.extent=o.EXTENT,this.type=ee.type,this.properties=ee.tags,"id"in ee&&!isNaN(ee.id)&&(this.id=parseInt(ee.id,10))}loadGeometry(){if(this._feature.type===1){const ee=[];for(const ie of this._feature.geometry)ee.push([new o.pointGeometry(ie[0],ie[1])]);return ee}{const ee=[];for(const ie of this._feature.geometry){const ye=[];for(const Re of ie)ye.push(new o.pointGeometry(Re[0],Re[1]));ee.push(ye)}return ee}}toGeoJSON(ee,ie,ye){return P.call(this,ee,ie,ye)}}class V{constructor(ee){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=ee.length,this._features=ee}feature(ee){return new O(this._features[ee])}}var z={exports:{}},U=o.pointGeometry,W=o.vectorTile.VectorTileFeature,Z=re;function re(xe,ee){this.options=ee||{},this.features=xe,this.length=xe.length}function oe(xe,ee){this.id=typeof xe.id=="number"?xe.id:void 0,this.type=xe.type,this.rawGeometry=xe.type===1?[xe.geometry]:xe.geometry,this.properties=xe.tags,this.extent=ee||4096}re.prototype.feature=function(xe){return new oe(this.features[xe],this.options.extent)},oe.prototype.loadGeometry=function(){var xe=this.rawGeometry;this.geometry=[];for(var ee=0;ee<xe.length;ee++){for(var ie=xe[ee],ye=[],Re=0;Re<ie.length;Re++)ye.push(new U(ie[Re][0],ie[Re][1]));this.geometry.push(ye)}return this.geometry},oe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var xe=this.geometry,ee=1/0,ie=-1/0,ye=1/0,Re=-1/0,De=0;De<xe.length;De++)for(var He=xe[De],Ge=0;Ge<He.length;Ge++){var Ve=He[Ge];ee=Math.min(ee,Ve.x),ie=Math.max(ie,Ve.x),ye=Math.min(ye,Ve.y),Re=Math.max(Re,Ve.y)}return[ee,ye,ie,Re]},oe.prototype.toGeoJSON=W.prototype.toGeoJSON;var se=o.pbf,ce=Z;function me(xe){var ee=new se;return function(ie,ye){for(var Re in ie.layers)ye.writeMessage(3,we,ie.layers[Re])}(xe,ee),ee.finish()}function we(xe,ee){var ie;ee.writeVarintField(15,xe.version||1),ee.writeStringField(1,xe.name||""),ee.writeVarintField(5,xe.extent||4096);var ye={keys:[],values:[],keycache:{},valuecache:{}};for(ie=0;ie<xe.length;ie++)ye.feature=xe.feature(ie),ee.writeMessage(2,ae,ye);var Re=ye.keys;for(ie=0;ie<Re.length;ie++)ee.writeStringField(3,Re[ie]);var De=ye.values;for(ie=0;ie<De.length;ie++)ee.writeMessage(4,ke,De[ie])}function ae(xe,ee){var ie=xe.feature;ie.id!==void 0&&ee.writeVarintField(1,ie.id),ee.writeMessage(2,Ce,xe),ee.writeVarintField(3,ie.type),ee.writeMessage(4,_e,ie)}function Ce(xe,ee){var ie=xe.feature,ye=xe.keys,Re=xe.values,De=xe.keycache,He=xe.valuecache;for(var Ge in ie.properties){var Ve=ie.properties[Ge],Ze=De[Ge];if(Ve!==null){Ze===void 0&&(ye.push(Ge),De[Ge]=Ze=ye.length-1),ee.writeVarint(Ze);var yt=typeof Ve;yt!=="string"&&yt!=="boolean"&&yt!=="number"&&(Ve=JSON.stringify(Ve));var Vt=yt+":"+Ve,Ct=He[Vt];Ct===void 0&&(Re.push(Ve),He[Vt]=Ct=Re.length-1),ee.writeVarint(Ct)}}}function Fe(xe,ee){return(ee<<3)+(7&xe)}function it(xe){return xe<<1^xe>>31}function _e(xe,ee){for(var ie=xe.loadGeometry(),ye=xe.type,Re=0,De=0,He=ie.length,Ge=0;Ge<He;Ge++){var Ve=ie[Ge],Ze=1;ye===1&&(Ze=Ve.length),ee.writeVarint(Fe(1,Ze));for(var yt=ye===3?Ve.length-1:Ve.length,Vt=0;Vt<yt;Vt++){Vt===1&&ye!==1&&ee.writeVarint(Fe(2,yt-1));var Ct=Ve[Vt].x-Re,en=Ve[Vt].y-De;ee.writeVarint(it(Ct)),ee.writeVarint(it(en)),Re+=Ct,De+=en}ye===3&&ee.writeVarint(Fe(7,1))}}function ke(xe,ee){var ie=typeof xe;ie==="string"?ee.writeStringField(1,xe):ie==="boolean"?ee.writeBooleanField(7,xe):ie==="number"&&(xe%1!=0?ee.writeDoubleField(3,xe):xe<0?ee.writeSVarintField(6,xe):ee.writeVarintField(5,xe))}function ze(xe,ee,ie,ye,Re,De){if(Re-ye<=ie)return;const He=ye+Re>>1;nt(xe,ee,He,ye,Re,De%2),ze(xe,ee,ie,ye,He-1,De+1),ze(xe,ee,ie,He+1,Re,De+1)}function nt(xe,ee,ie,ye,Re,De){for(;Re>ye;){if(Re-ye>600){const Ze=Re-ye+1,yt=ie-ye+1,Vt=Math.log(Ze),Ct=.5*Math.exp(2*Vt/3),en=.5*Math.sqrt(Vt*Ct*(Ze-Ct)/Ze)*(yt-Ze/2<0?-1:1);nt(xe,ee,ie,Math.max(ye,Math.floor(ie-yt*Ct/Ze+en)),Math.min(Re,Math.floor(ie+(Ze-yt)*Ct/Ze+en)),De)}const He=ee[2*ie+De];let Ge=ye,Ve=Re;for(mt(xe,ee,ye,ie),ee[2*Re+De]>He&&mt(xe,ee,ye,Re);Ge<Ve;){for(mt(xe,ee,Ge,Ve),Ge++,Ve--;ee[2*Ge+De]<He;)Ge++;for(;ee[2*Ve+De]>He;)Ve--}ee[2*ye+De]===He?mt(xe,ee,ye,Ve):(Ve++,mt(xe,ee,Ve,Re)),Ve<=ie&&(ye=Ve+1),ie<=Ve&&(Re=Ve-1)}}function mt(xe,ee,ie,ye){qt(xe,ie,ye),qt(ee,2*ie,2*ye),qt(ee,2*ie+1,2*ye+1)}function qt(xe,ee,ie){const ye=xe[ee];xe[ee]=xe[ie],xe[ie]=ye}function un(xe,ee,ie,ye){const Re=xe-ie,De=ee-ye;return Re*Re+De*De}z.exports=me,z.exports.fromVectorTileJs=me,z.exports.fromGeojsonVt=function(xe,ee){ee=ee||{};var ie={};for(var ye in xe)ie[ye]=new ce(xe[ye].features,ee),ie[ye].name=ye,ie[ye].version=ee.version,ie[ye].extent=ee.extent;return me({layers:ie})},z.exports.GeoJSONWrapper=ce;const fn=xe=>xe[0],vn=xe=>xe[1];class at{constructor(ee,ie=fn,ye=vn,Re=64,De=Float64Array){this.nodeSize=Re,this.points=ee;const He=ee.length<65536?Uint16Array:Uint32Array,Ge=this.ids=new He(ee.length),Ve=this.coords=new De(2*ee.length);for(let Ze=0;Ze<ee.length;Ze++)Ge[Ze]=Ze,Ve[2*Ze]=ie(ee[Ze]),Ve[2*Ze+1]=ye(ee[Ze]);ze(Ge,Ve,Re,0,Ge.length-1,0)}range(ee,ie,ye,Re){return function(De,He,Ge,Ve,Ze,yt,Vt){const Ct=[0,De.length-1,0],en=[];let Qt,Jt;for(;Ct.length;){const ln=Ct.pop(),En=Ct.pop(),Nn=Ct.pop();if(En-Nn<=Vt){for(let zn=Nn;zn<=En;zn++)Qt=He[2*zn],Jt=He[2*zn+1],Qt>=Ge&&Qt<=Ze&&Jt>=Ve&&Jt<=yt&&en.push(De[zn]);continue}const rn=Math.floor((Nn+En)/2);Qt=He[2*rn],Jt=He[2*rn+1],Qt>=Ge&&Qt<=Ze&&Jt>=Ve&&Jt<=yt&&en.push(De[rn]);const Bn=(ln+1)%2;(ln===0?Ge<=Qt:Ve<=Jt)&&(Ct.push(Nn),Ct.push(rn-1),Ct.push(Bn)),(ln===0?Ze>=Qt:yt>=Jt)&&(Ct.push(rn+1),Ct.push(En),Ct.push(Bn))}return en}(this.ids,this.coords,ee,ie,ye,Re,this.nodeSize)}within(ee,ie,ye){return function(Re,De,He,Ge,Ve,Ze){const yt=[0,Re.length-1,0],Vt=[],Ct=Ve*Ve;for(;yt.length;){const en=yt.pop(),Qt=yt.pop(),Jt=yt.pop();if(Qt-Jt<=Ze){for(let Bn=Jt;Bn<=Qt;Bn++)un(De[2*Bn],De[2*Bn+1],He,Ge)<=Ct&&Vt.push(Re[Bn]);continue}const ln=Math.floor((Jt+Qt)/2),En=De[2*ln],Nn=De[2*ln+1];un(En,Nn,He,Ge)<=Ct&&Vt.push(Re[ln]);const rn=(en+1)%2;(en===0?He-Ve<=En:Ge-Ve<=Nn)&&(yt.push(Jt),yt.push(ln-1),yt.push(rn)),(en===0?He+Ve>=En:Ge+Ve>=Nn)&&(yt.push(ln+1),yt.push(Qt),yt.push(rn))}return Vt}(this.ids,this.coords,ee,ie,ye,this.nodeSize)}}const Ot={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:xe=>xe},bt=Math.fround||(jt=new Float32Array(1),xe=>(jt[0]=+xe,jt[0]));var jt;class gn{constructor(ee){this.options=Ke(Object.create(Ot),ee),this.trees=new Array(this.options.maxZoom+1)}load(ee){const{log:ie,minZoom:ye,maxZoom:Re,nodeSize:De}=this.options;ie&&console.time("total time");const He=`prepare ${ee.length} points`;ie&&console.time(He),this.points=ee;let Ge=[];for(let Ve=0;Ve<ee.length;Ve++)ee[Ve].geometry&&Ge.push(hn(ee[Ve],Ve));this.trees[Re+1]=new at(Ge,Rt,gt,De,Float32Array),ie&&console.timeEnd(He);for(let Ve=Re;Ve>=ye;Ve--){const Ze=+Date.now();Ge=this._cluster(Ge,Ve),this.trees[Ve]=new at(Ge,Rt,gt,De,Float32Array),ie&&console.log("z%d: %d clusters in %dms",Ve,Ge.length,+Date.now()-Ze)}return ie&&console.timeEnd("total time"),this}getClusters(ee,ie){let ye=((ee[0]+180)%360+360)%360-180;const Re=Math.max(-90,Math.min(90,ee[1]));let De=ee[2]===180?180:((ee[2]+180)%360+360)%360-180;const He=Math.max(-90,Math.min(90,ee[3]));if(ee[2]-ee[0]>=360)ye=-180,De=180;else if(ye>De){const yt=this.getClusters([ye,Re,180,He],ie),Vt=this.getClusters([-180,Re,De,He],ie);return yt.concat(Vt)}const Ge=this.trees[this._limitZoom(ie)],Ve=Ge.range(Ne(ye),et(He),Ne(De),et(Re)),Ze=[];for(const yt of Ve){const Vt=Ge.points[yt];Ze.push(Vt.numPoints?Ht(Vt):this.points[Vt.index])}return Ze}getChildren(ee){const ie=this._getOriginId(ee),ye=this._getOriginZoom(ee),Re="No cluster with the specified id.",De=this.trees[ye];if(!De)throw new Error(Re);const He=De.points[ie];if(!He)throw new Error(Re);const Ge=this.options.radius/(this.options.extent*Math.pow(2,ye-1)),Ve=De.within(He.x,He.y,Ge),Ze=[];for(const yt of Ve){const Vt=De.points[yt];Vt.parentId===ee&&Ze.push(Vt.numPoints?Ht(Vt):this.points[Vt.index])}if(Ze.length===0)throw new Error(Re);return Ze}getLeaves(ee,ie,ye){const Re=[];return this._appendLeaves(Re,ee,ie=ie||10,ye=ye||0,0),Re}getTile(ee,ie,ye){const Re=this.trees[this._limitZoom(ee)],De=Math.pow(2,ee),{extent:He,radius:Ge}=this.options,Ve=Ge/He,Ze=(ye-Ve)/De,yt=(ye+1+Ve)/De,Vt={features:[]};return this._addTileFeatures(Re.range((ie-Ve)/De,Ze,(ie+1+Ve)/De,yt),Re.points,ie,ye,De,Vt),ie===0&&this._addTileFeatures(Re.range(1-Ve/De,Ze,1,yt),Re.points,De,ye,De,Vt),ie===De-1&&this._addTileFeatures(Re.range(0,Ze,Ve/De,yt),Re.points,-1,ye,De,Vt),Vt.features.length?Vt:null}getClusterExpansionZoom(ee){let ie=this._getOriginZoom(ee)-1;for(;ie<=this.options.maxZoom;){const ye=this.getChildren(ee);if(ie++,ye.length!==1)break;ee=ye[0].properties.cluster_id}return ie}_appendLeaves(ee,ie,ye,Re,De){const He=this.getChildren(ie);for(const Ge of He){const Ve=Ge.properties;if(Ve&&Ve.cluster?De+Ve.point_count<=Re?De+=Ve.point_count:De=this._appendLeaves(ee,Ve.cluster_id,ye,Re,De):De<Re?De++:ee.push(Ge),ee.length===ye)break}return De}_addTileFeatures(ee,ie,ye,Re,De,He){for(const Ge of ee){const Ve=ie[Ge],Ze=Ve.numPoints;let yt,Vt,Ct;if(Ze)yt=Ee(Ve),Vt=Ve.x,Ct=Ve.y;else{const Jt=this.points[Ve.index];yt=Jt.properties,Vt=Ne(Jt.geometry.coordinates[0]),Ct=et(Jt.geometry.coordinates[1])}const en={type:1,geometry:[[Math.round(this.options.extent*(Vt*De-ye)),Math.round(this.options.extent*(Ct*De-Re))]],tags:yt};let Qt;Ze?Qt=Ve.id:this.options.generateId?Qt=Ve.index:this.points[Ve.index].id&&(Qt=this.points[Ve.index].id),Qt!==void 0&&(en.id=Qt),He.features.push(en)}}_limitZoom(ee){return Math.max(this.options.minZoom,Math.min(Math.floor(+ee),this.options.maxZoom+1))}_cluster(ee,ie){const ye=[],{radius:Re,extent:De,reduce:He,minPoints:Ge}=this.options,Ve=Re/(De*Math.pow(2,ie));for(let Ze=0;Ze<ee.length;Ze++){const yt=ee[Ze];if(yt.zoom<=ie)continue;yt.zoom=ie;const Vt=this.trees[ie+1],Ct=Vt.within(yt.x,yt.y,Ve),en=yt.numPoints||1;let Qt=en;for(const Jt of Ct){const ln=Vt.points[Jt];ln.zoom>ie&&(Qt+=ln.numPoints||1)}if(Qt>en&&Qt>=Ge){let Jt=yt.x*en,ln=yt.y*en,En=He&&en>1?this._map(yt,!0):null;const Nn=(Ze<<5)+(ie+1)+this.points.length;for(const rn of Ct){const Bn=Vt.points[rn];if(Bn.zoom<=ie)continue;Bn.zoom=ie;const zn=Bn.numPoints||1;Jt+=Bn.x*zn,ln+=Bn.y*zn,Bn.parentId=Nn,He&&(En||(En=this._map(yt,!0)),He(En,this._map(Bn)))}yt.parentId=Nn,ye.push(dn(Jt/Qt,ln/Qt,Nn,Qt,En))}else if(ye.push(yt),Qt>1)for(const Jt of Ct){const ln=Vt.points[Jt];ln.zoom<=ie||(ln.zoom=ie,ye.push(ln))}}return ye}_getOriginId(ee){return ee-this.points.length>>5}_getOriginZoom(ee){return(ee-this.points.length)%32}_map(ee,ie){if(ee.numPoints)return ie?Ke({},ee.properties):ee.properties;const ye=this.points[ee.index].properties,Re=this.options.map(ye);return ie&&Re===ye?Ke({},Re):Re}}function dn(xe,ee,ie,ye,Re){return{x:bt(xe),y:bt(ee),zoom:1/0,id:ie,parentId:-1,numPoints:ye,properties:Re}}function hn(xe,ee){const[ie,ye]=xe.geometry.coordinates;return{x:bt(Ne(ie)),y:bt(et(ye)),zoom:1/0,index:ee,parentId:-1}}function Ht(xe){return{type:"Feature",id:xe.id,properties:Ee(xe),geometry:{type:"Point",coordinates:[(ee=xe.x,360*(ee-.5)),xt(xe.y)]}};var ee}function Ee(xe){const ee=xe.numPoints,ie=ee>=1e4?`${Math.round(ee/1e3)}k`:ee>=1e3?Math.round(ee/100)/10+"k":ee;return Ke(Ke({},xe.properties),{cluster:!0,cluster_id:xe.id,point_count:ee,point_count_abbreviated:ie})}function Ne(xe){return xe/360+.5}function et(xe){const ee=Math.sin(xe*Math.PI/180),ie=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return ie<0?0:ie>1?1:ie}function xt(xe){const ee=(180-360*xe)*Math.PI/180;return 360*Math.atan(Math.exp(ee))/Math.PI-90}function Ke(xe,ee){for(const ie in ee)xe[ie]=ee[ie];return xe}function Rt(xe){return xe.x}function gt(xe){return xe.y}function tt(xe,ee,ie,ye){for(var Re,De=ye,He=ie-ee>>1,Ge=ie-ee,Ve=xe[ee],Ze=xe[ee+1],yt=xe[ie],Vt=xe[ie+1],Ct=ee+3;Ct<ie;Ct+=3){var en=kt(xe[Ct],xe[Ct+1],Ve,Ze,yt,Vt);if(en>De)Re=Ct,De=en;else if(en===De){var Qt=Math.abs(Ct-He);Qt<Ge&&(Re=Ct,Ge=Qt)}}De>ye&&(Re-ee>3&&tt(xe,ee,Re,ye),xe[Re+2]=De,ie-Re>3&&tt(xe,Re,ie,ye))}function kt(xe,ee,ie,ye,Re,De){var He=Re-ie,Ge=De-ye;if(He!==0||Ge!==0){var Ve=((xe-ie)*He+(ee-ye)*Ge)/(He*He+Ge*Ge);Ve>1?(ie=Re,ye=De):Ve>0&&(ie+=He*Ve,ye+=Ge*Ve)}return(He=xe-ie)*He+(Ge=ee-ye)*Ge}function dt(xe,ee,ie,ye){var Re={id:xe===void 0?null:xe,type:ee,geometry:ie,tags:ye,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(De){var He=De.geometry,Ge=De.type;if(Ge==="Point"||Ge==="MultiPoint"||Ge==="LineString")Et(De,He);else if(Ge==="Polygon"||Ge==="MultiLineString")for(var Ve=0;Ve<He.length;Ve++)Et(De,He[Ve]);else if(Ge==="MultiPolygon")for(Ve=0;Ve<He.length;Ve++)for(var Ze=0;Ze<He[Ve].length;Ze++)Et(De,He[Ve][Ze])}(Re),Re}function Et(xe,ee){for(var ie=0;ie<ee.length;ie+=3)xe.minX=Math.min(xe.minX,ee[ie]),xe.minY=Math.min(xe.minY,ee[ie+1]),xe.maxX=Math.max(xe.maxX,ee[ie]),xe.maxY=Math.max(xe.maxY,ee[ie+1])}function $t(xe,ee,ie,ye){if(ee.geometry){var Re=ee.geometry.coordinates,De=ee.geometry.type,He=Math.pow(ie.tolerance/((1<<ie.maxZoom)*ie.extent),2),Ge=[],Ve=ee.id;if(ie.promoteId?Ve=ee.properties[ie.promoteId]:ie.generateId&&(Ve=ye||0),De==="Point")Je(Re,Ge);else if(De==="MultiPoint")for(var Ze=0;Ze<Re.length;Ze++)Je(Re[Ze],Ge);else if(De==="LineString")ut(Re,Ge,He,!1);else if(De==="MultiLineString"){if(ie.lineMetrics){for(Ze=0;Ze<Re.length;Ze++)ut(Re[Ze],Ge=[],He,!1),xe.push(dt(Ve,"LineString",Ge,ee.properties));return}pt(Re,Ge,He,!1)}else if(De==="Polygon")pt(Re,Ge,He,!0);else{if(De!=="MultiPolygon"){if(De==="GeometryCollection"){for(Ze=0;Ze<ee.geometry.geometries.length;Ze++)$t(xe,{id:Ve,geometry:ee.geometry.geometries[Ze],properties:ee.properties},ie,ye);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ze=0;Ze<Re.length;Ze++){var yt=[];pt(Re[Ze],yt,He,!0),Ge.push(yt)}}xe.push(dt(Ve,De,Ge,ee.properties))}}function Je(xe,ee){ee.push(Xt(xe[0])),ee.push(Kt(xe[1])),ee.push(0)}function ut(xe,ee,ie,ye){for(var Re,De,He=0,Ge=0;Ge<xe.length;Ge++){var Ve=Xt(xe[Ge][0]),Ze=Kt(xe[Ge][1]);ee.push(Ve),ee.push(Ze),ee.push(0),Ge>0&&(He+=ye?(Re*Ze-Ve*De)/2:Math.sqrt(Math.pow(Ve-Re,2)+Math.pow(Ze-De,2))),Re=Ve,De=Ze}var yt=ee.length-3;ee[2]=1,tt(ee,0,yt,ie),ee[yt+2]=1,ee.size=Math.abs(He),ee.start=0,ee.end=ee.size}function pt(xe,ee,ie,ye){for(var Re=0;Re<xe.length;Re++){var De=[];ut(xe[Re],De,ie,ye),ee.push(De)}}function Xt(xe){return xe/360+.5}function Kt(xe){var ee=Math.sin(xe*Math.PI/180),ie=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return ie<0?0:ie>1?1:ie}function yn(xe,ee,ie,ye,Re,De,He,Ge){if(ye/=ee,De>=(ie/=ee)&&He<ye)return xe;if(He<ie||De>=ye)return null;for(var Ve=[],Ze=0;Ze<xe.length;Ze++){var yt=xe[Ze],Vt=yt.geometry,Ct=yt.type,en=Re===0?yt.minX:yt.minY,Qt=Re===0?yt.maxX:yt.maxY;if(en>=ie&&Qt<ye)Ve.push(yt);else if(!(Qt<ie||en>=ye)){var Jt=[];if(Ct==="Point"||Ct==="MultiPoint")Gn(Vt,Jt,ie,ye,Re);else if(Ct==="LineString")gi(Vt,Jt,ie,ye,Re,!1,Ge.lineMetrics);else if(Ct==="MultiLineString")Li(Vt,Jt,ie,ye,Re,!1);else if(Ct==="Polygon")Li(Vt,Jt,ie,ye,Re,!0);else if(Ct==="MultiPolygon")for(var ln=0;ln<Vt.length;ln++){var En=[];Li(Vt[ln],En,ie,ye,Re,!0),En.length&&Jt.push(En)}if(Jt.length){if(Ge.lineMetrics&&Ct==="LineString"){for(ln=0;ln<Jt.length;ln++)Ve.push(dt(yt.id,Ct,Jt[ln],yt.tags));continue}Ct!=="LineString"&&Ct!=="MultiLineString"||(Jt.length===1?(Ct="LineString",Jt=Jt[0]):Ct="MultiLineString"),Ct!=="Point"&&Ct!=="MultiPoint"||(Ct=Jt.length===3?"Point":"MultiPoint"),Ve.push(dt(yt.id,Ct,Jt,yt.tags))}}}return Ve.length?Ve:null}function Gn(xe,ee,ie,ye,Re){for(var De=0;De<xe.length;De+=3){var He=xe[De+Re];He>=ie&&He<=ye&&(ee.push(xe[De]),ee.push(xe[De+1]),ee.push(xe[De+2]))}}function gi(xe,ee,ie,ye,Re,De,He){for(var Ge,Ve,Ze=Ii(xe),yt=Re===0?ci:_i,Vt=xe.start,Ct=0;Ct<xe.length-3;Ct+=3){var en=xe[Ct],Qt=xe[Ct+1],Jt=xe[Ct+2],ln=xe[Ct+3],En=xe[Ct+4],Nn=Re===0?en:Qt,rn=Re===0?ln:En,Bn=!1;He&&(Ge=Math.sqrt(Math.pow(en-ln,2)+Math.pow(Qt-En,2))),Nn<ie?rn>ie&&(Ve=yt(Ze,en,Qt,ln,En,ie),He&&(Ze.start=Vt+Ge*Ve)):Nn>ye?rn<ye&&(Ve=yt(Ze,en,Qt,ln,En,ye),He&&(Ze.start=Vt+Ge*Ve)):Mr(Ze,en,Qt,Jt),rn<ie&&Nn>=ie&&(Ve=yt(Ze,en,Qt,ln,En,ie),Bn=!0),rn>ye&&Nn<=ye&&(Ve=yt(Ze,en,Qt,ln,En,ye),Bn=!0),!De&&Bn&&(He&&(Ze.end=Vt+Ge*Ve),ee.push(Ze),Ze=Ii(xe)),He&&(Vt+=Ge)}var zn=xe.length-3;en=xe[zn],Qt=xe[zn+1],Jt=xe[zn+2],(Nn=Re===0?en:Qt)>=ie&&Nn<=ye&&Mr(Ze,en,Qt,Jt),zn=Ze.length-3,De&&zn>=3&&(Ze[zn]!==Ze[0]||Ze[zn+1]!==Ze[1])&&Mr(Ze,Ze[0],Ze[1],Ze[2]),Ze.length&&ee.push(Ze)}function Ii(xe){var ee=[];return ee.size=xe.size,ee.start=xe.start,ee.end=xe.end,ee}function Li(xe,ee,ie,ye,Re,De){for(var He=0;He<xe.length;He++)gi(xe[He],ee,ie,ye,Re,De,!1)}function Mr(xe,ee,ie,ye){xe.push(ee),xe.push(ie),xe.push(ye)}function ci(xe,ee,ie,ye,Re,De){var He=(De-ee)/(ye-ee);return xe.push(De),xe.push(ie+(Re-ie)*He),xe.push(1),He}function _i(xe,ee,ie,ye,Re,De){var He=(De-ie)/(Re-ie);return xe.push(ee+(ye-ee)*He),xe.push(De),xe.push(1),He}function Yi(xe,ee){for(var ie=[],ye=0;ye<xe.length;ye++){var Re,De=xe[ye],He=De.type;if(He==="Point"||He==="MultiPoint"||He==="LineString")Re=vo(De.geometry,ee);else if(He==="MultiLineString"||He==="Polygon"){Re=[];for(var Ge=0;Ge<De.geometry.length;Ge++)Re.push(vo(De.geometry[Ge],ee))}else if(He==="MultiPolygon")for(Re=[],Ge=0;Ge<De.geometry.length;Ge++){for(var Ve=[],Ze=0;Ze<De.geometry[Ge].length;Ze++)Ve.push(vo(De.geometry[Ge][Ze],ee));Re.push(Ve)}ie.push(dt(De.id,He,Re,De.tags))}return ie}function vo(xe,ee){var ie=[];ie.size=xe.size,xe.start!==void 0&&(ie.start=xe.start,ie.end=xe.end);for(var ye=0;ye<xe.length;ye+=3)ie.push(xe[ye]+ee,xe[ye+1],xe[ye+2]);return ie}function yo(xe,ee){if(xe.transformed)return xe;var ie,ye,Re,De=1<<xe.z,He=xe.x,Ge=xe.y;for(ie=0;ie<xe.features.length;ie++){var Ve=xe.features[ie],Ze=Ve.geometry,yt=Ve.type;if(Ve.geometry=[],yt===1)for(ye=0;ye<Ze.length;ye+=2)Ve.geometry.push(Xi(Ze[ye],Ze[ye+1],ee,De,He,Ge));else for(ye=0;ye<Ze.length;ye++){var Vt=[];for(Re=0;Re<Ze[ye].length;Re+=2)Vt.push(Xi(Ze[ye][Re],Ze[ye][Re+1],ee,De,He,Ge));Ve.geometry.push(Vt)}}return xe.transformed=!0,xe}function Xi(xe,ee,ie,ye,Re,De){return[Math.round(ie*(xe*ye-Re)),Math.round(ie*(ee*ye-De))]}function bo(xe,ee,ie,ye,Re){for(var De=ee===Re.maxZoom?0:Re.tolerance/((1<<ee)*Re.extent),He={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ie,y:ye,z:ee,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ge=0;Ge<xe.length;Ge++){He.numFeatures++,$s(He,xe[Ge],De,Re);var Ve=xe[Ge].minX,Ze=xe[Ge].minY,yt=xe[Ge].maxX,Vt=xe[Ge].maxY;Ve<He.minX&&(He.minX=Ve),Ze<He.minY&&(He.minY=Ze),yt>He.maxX&&(He.maxX=yt),Vt>He.maxY&&(He.maxY=Vt)}return He}function $s(xe,ee,ie,ye){var Re=ee.geometry,De=ee.type,He=[];if(De==="Point"||De==="MultiPoint")for(var Ge=0;Ge<Re.length;Ge+=3)He.push(Re[Ge]),He.push(Re[Ge+1]),xe.numPoints++,xe.numSimplified++;else if(De==="LineString")xo(He,Re,xe,ie,!1,!1);else if(De==="MultiLineString"||De==="Polygon")for(Ge=0;Ge<Re.length;Ge++)xo(He,Re[Ge],xe,ie,De==="Polygon",Ge===0);else if(De==="MultiPolygon")for(var Ve=0;Ve<Re.length;Ve++){var Ze=Re[Ve];for(Ge=0;Ge<Ze.length;Ge++)xo(He,Ze[Ge],xe,ie,!0,Ge===0)}if(He.length){var yt=ee.tags||null;if(De==="LineString"&&ye.lineMetrics){for(var Vt in yt={},ee.tags)yt[Vt]=ee.tags[Vt];yt.mapbox_clip_start=Re.start/Re.size,yt.mapbox_clip_end=Re.end/Re.size}var Ct={geometry:He,type:De==="Polygon"||De==="MultiPolygon"?3:De==="LineString"||De==="MultiLineString"?2:1,tags:yt};ee.id!==null&&(Ct.id=ee.id),xe.features.push(Ct)}}function xo(xe,ee,ie,ye,Re,De){var He=ye*ye;if(ye>0&&ee.size<(Re?He:ye))ie.numPoints+=ee.length/3;else{for(var Ge=[],Ve=0;Ve<ee.length;Ve+=3)(ye===0||ee[Ve+2]>He)&&(ie.numSimplified++,Ge.push(ee[Ve]),Ge.push(ee[Ve+1])),ie.numPoints++;Re&&function(Ze,yt){for(var Vt=0,Ct=0,en=Ze.length,Qt=en-2;Ct<en;Qt=Ct,Ct+=2)Vt+=(Ze[Ct]-Ze[Qt])*(Ze[Ct+1]+Ze[Qt+1]);if(Vt>0===yt)for(Ct=0,en=Ze.length;Ct<en/2;Ct+=2){var Jt=Ze[Ct],ln=Ze[Ct+1];Ze[Ct]=Ze[en-2-Ct],Ze[Ct+1]=Ze[en-1-Ct],Ze[en-2-Ct]=Jt,Ze[en-1-Ct]=ln}}(Ge,De),xe.push(Ge)}}function wo(xe,ee){var ie=(ee=this.options=function(Re,De){for(var He in De)Re[He]=De[He];return Re}(Object.create(this.options),ee)).debug;if(ie&&console.time("preprocess data"),ee.maxZoom<0||ee.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ee.promoteId&&ee.generateId)throw new Error("promoteId and generateId cannot be used together.");var ye=function(Re,De){var He=[];if(Re.type==="FeatureCollection")for(var Ge=0;Ge<Re.features.length;Ge++)$t(He,Re.features[Ge],De,Ge);else $t(He,Re.type==="Feature"?Re:{geometry:Re},De);return He}(xe,ee);this.tiles={},this.tileCoords=[],ie&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ee.indexMaxZoom,ee.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ye=function(Re,De){var He=De.buffer/De.extent,Ge=Re,Ve=yn(Re,1,-1-He,He,0,-1,2,De),Ze=yn(Re,1,1-He,2+He,0,-1,2,De);return(Ve||Ze)&&(Ge=yn(Re,1,-He,1+He,0,-1,2,De)||[],Ve&&(Ge=Yi(Ve,1).concat(Ge)),Ze&&(Ge=Ge.concat(Yi(Ze,-1)))),Ge}(ye,ee),ye.length&&this.splitTile(ye,0,0,0),ie&&(ye.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Oi(xe,ee,ie){return 32*((1<<xe)*ie+ee)+xe}function Xr(xe,ee){const ie=xe.tileID.canonical;if(!this._geoJSONIndex)return ee(null,null);const ye=this._geoJSONIndex.getTile(ie.z,ie.x,ie.y);if(!ye)return ee(null,null);const Re=new V(ye.features);let De=z.exports(Re);De.byteOffset===0&&De.byteLength===De.buffer.byteLength||(De=new Uint8Array(De)),ee(null,{vectorTile:Re,rawData:De.buffer})}wo.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},wo.prototype.splitTile=function(xe,ee,ie,ye,Re,De,He){for(var Ge=[xe,ee,ie,ye],Ve=this.options,Ze=Ve.debug;Ge.length;){ye=Ge.pop(),ie=Ge.pop(),ee=Ge.pop(),xe=Ge.pop();var yt=1<<ee,Vt=Oi(ee,ie,ye),Ct=this.tiles[Vt];if(!Ct&&(Ze>1&&console.time("creation"),Ct=this.tiles[Vt]=bo(xe,ee,ie,ye,Ve),this.tileCoords.push({z:ee,x:ie,y:ye}),Ze)){Ze>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ee,ie,ye,Ct.numFeatures,Ct.numPoints,Ct.numSimplified),console.timeEnd("creation"));var en="z"+ee;this.stats[en]=(this.stats[en]||0)+1,this.total++}if(Ct.source=xe,Re){if(ee===Ve.maxZoom||ee===Re)continue;var Qt=1<<Re-ee;if(ie!==Math.floor(De/Qt)||ye!==Math.floor(He/Qt))continue}else if(ee===Ve.indexMaxZoom||Ct.numPoints<=Ve.indexMaxPoints)continue;if(Ct.source=null,xe.length!==0){Ze>1&&console.time("clipping");var Jt,ln,En,Nn,rn,Bn,zn=.5*Ve.buffer/Ve.extent,Ir=.5-zn,vr=.5+zn,lt=1+zn;Jt=ln=En=Nn=null,rn=yn(xe,yt,ie-zn,ie+vr,0,Ct.minX,Ct.maxX,Ve),Bn=yn(xe,yt,ie+Ir,ie+lt,0,Ct.minX,Ct.maxX,Ve),xe=null,rn&&(Jt=yn(rn,yt,ye-zn,ye+vr,1,Ct.minY,Ct.maxY,Ve),ln=yn(rn,yt,ye+Ir,ye+lt,1,Ct.minY,Ct.maxY,Ve),rn=null),Bn&&(En=yn(Bn,yt,ye-zn,ye+vr,1,Ct.minY,Ct.maxY,Ve),Nn=yn(Bn,yt,ye+Ir,ye+lt,1,Ct.minY,Ct.maxY,Ve),Bn=null),Ze>1&&console.timeEnd("clipping"),Ge.push(Jt||[],ee+1,2*ie,2*ye),Ge.push(ln||[],ee+1,2*ie,2*ye+1),Ge.push(En||[],ee+1,2*ie+1,2*ye),Ge.push(Nn||[],ee+1,2*ie+1,2*ye+1)}}},wo.prototype.getTile=function(xe,ee,ie){var ye=this.options,Re=ye.extent,De=ye.debug;if(xe<0||xe>24)return null;var He=1<<xe,Ge=Oi(xe,ee=(ee%He+He)%He,ie);if(this.tiles[Ge])return yo(this.tiles[Ge],Re);De>1&&console.log("drilling down to z%d-%d-%d",xe,ee,ie);for(var Ve,Ze=xe,yt=ee,Vt=ie;!Ve&&Ze>0;)Ze--,yt=Math.floor(yt/2),Vt=Math.floor(Vt/2),Ve=this.tiles[Oi(Ze,yt,Vt)];return Ve&&Ve.source?(De>1&&console.log("found parent tile z%d-%d-%d",Ze,yt,Vt),De>1&&console.time("drilling down"),this.splitTile(Ve.source,Ze,yt,Vt,xe,ee,ie),De>1&&console.timeEnd("drilling down"),this.tiles[Ge]?yo(this.tiles[Ge],Re):null):null};class Ko extends o.VectorTileWorkerSource{constructor(ee,ie,ye,Re,De){super(ee,ie,ye,Re,Xr),De&&(this.loadGeoJSON=De)}loadData(ee,ie){const ye=ee&&ee.request,Re=ye&&ye.collectResourceTiming;this.loadGeoJSON(ee,(De,He)=>{if(De||!He)return ie(De);if(typeof He!="object")return ie(new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`));{S(He,!0);try{if(ee.filter){const Ve=o.createExpression(ee.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ve.result==="error")throw new Error(Ve.value.map(yt=>`${yt.key}: ${yt.message}`).join(", "));He={type:"FeatureCollection",features:He.features.filter(yt=>Ve.value.evaluate({zoom:0},yt))}}this._geoJSONIndex=ee.cluster?new gn(function({superclusterOptions:Ve,clusterProperties:Ze}){if(!Ze||!Ve)return Ve;const yt={},Vt={},Ct={accumulated:null,zoom:0},en={properties:null},Qt=Object.keys(Ze);for(const Jt of Qt){const[ln,En]=Ze[Jt],Nn=o.createExpression(En),rn=o.createExpression(typeof ln=="string"?[ln,["accumulated"],["get",Jt]]:ln);yt[Jt]=Nn.value,Vt[Jt]=rn.value}return Ve.map=Jt=>{en.properties=Jt;const ln={};for(const En of Qt)ln[En]=yt[En].evaluate(Ct,en);return ln},Ve.reduce=(Jt,ln)=>{en.properties=ln;for(const En of Qt)Ct.accumulated=Jt[En],Jt[En]=Vt[En].evaluate(Ct,en)},Ve}(ee)).load(He.features):function(Ve,Ze){return new wo(Ve,Ze)}(He,ee.geojsonVtOptions)}catch(Ve){return ie(Ve)}this.loaded={};const Ge={};if(Re){const Ve=o.getPerformanceMeasurement(ye);Ve&&(Ge.resourceTiming={},Ge.resourceTiming[ee.source]=JSON.parse(JSON.stringify(Ve)))}ie(null,Ge)}})}reloadTile(ee,ie){const ye=this.loaded;return ye&&ye[ee.uid]?super.reloadTile(ee,ie):this.loadTile(ee,ie)}loadGeoJSON(ee,ie){if(ee.request)o.getJSON(ee.request,ie);else{if(typeof ee.data!="string")return ie(new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`));try{return ie(null,JSON.parse(ee.data))}catch{return ie(new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(ee,ie){try{ie(null,this._geoJSONIndex.getClusterExpansionZoom(ee.clusterId))}catch(ye){ie(ye)}}getClusterChildren(ee,ie){try{ie(null,this._geoJSONIndex.getChildren(ee.clusterId))}catch(ye){ie(ye)}}getClusterLeaves(ee,ie){try{ie(null,this._geoJSONIndex.getLeaves(ee.clusterId,ee.limit,ee.offset))}catch(ye){ie(ye)}}}class Jr{constructor(ee){this.self=ee,this.actor=new o.Actor(ee,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=o.getProjection({name:"mercator"}),this.workerSourceTypes={vector:o.VectorTileWorkerSource,geojson:Ko},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ie,ye)=>{if(this.workerSourceTypes[ie])throw new Error(`Worker source with name "${ie}" already registered.`);this.workerSourceTypes[ie]=ye},this.self.registerRTLTextPlugin=ie=>{if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=ie.applyArabicShaping,o.plugin.processBidirectionalText=ie.processBidirectionalText,o.plugin.processStyledBidirectionalText=ie.processStyledBidirectionalText}}clearCaches(ee,ie,ye){delete this.layerIndexes[ee],delete this.availableImages[ee],delete this.workerSources[ee],delete this.demWorkerSources[ee],ye()}checkIfReady(ee,ie,ye){ye()}setReferrer(ee,ie){this.referrer=ie}spriteLoaded(ee,ie){this.isSpriteLoaded[ee]=ie;for(const ye in this.workerSources[ee]){const Re=this.workerSources[ee][ye];for(const De in Re)Re[De]instanceof o.VectorTileWorkerSource&&(Re[De].isSpriteLoaded=ie,Re[De].fire(new o.Event("isSpriteLoaded")))}}setImages(ee,ie,ye){this.availableImages[ee]=ie;for(const Re in this.workerSources[ee]){const De=this.workerSources[ee][Re];for(const He in De)De[He].availableImages=ie}ye()}enableTerrain(ee,ie,ye){this.terrain=ie,ye()}setProjection(ee,ie){this.projections[ee]=o.getProjection(ie)}setLayers(ee,ie,ye){this.getLayerIndex(ee).replace(ie),ye()}updateLayers(ee,ie,ye){this.getLayerIndex(ee).update(ie.layers,ie.removedIds),ye()}loadTile(ee,ie,ye){const Re=this.enableTerrain?o.extend({enableTerrain:this.terrain},ie):ie;Re.projection=this.projections[ee]||this.defaultProjection,this.getWorkerSource(ee,ie.type,ie.source).loadTile(Re,ye)}loadDEMTile(ee,ie,ye){const Re=this.enableTerrain?o.extend({buildQuadTree:this.terrain},ie):ie;this.getDEMWorkerSource(ee,ie.source).loadTile(Re,ye)}reloadTile(ee,ie,ye){const Re=this.enableTerrain?o.extend({enableTerrain:this.terrain},ie):ie;Re.projection=this.projections[ee]||this.defaultProjection,this.getWorkerSource(ee,ie.type,ie.source).reloadTile(Re,ye)}abortTile(ee,ie,ye){this.getWorkerSource(ee,ie.type,ie.source).abortTile(ie,ye)}removeTile(ee,ie,ye){this.getWorkerSource(ee,ie.type,ie.source).removeTile(ie,ye)}removeSource(ee,ie,ye){if(!this.workerSources[ee]||!this.workerSources[ee][ie.type]||!this.workerSources[ee][ie.type][ie.source])return;const Re=this.workerSources[ee][ie.type][ie.source];delete this.workerSources[ee][ie.type][ie.source],Re.removeSource!==void 0?Re.removeSource(ie,ye):ye()}loadWorkerSource(ee,ie,ye){try{this.self.importScripts(ie.url),ye()}catch(Re){ye(Re.toString())}}syncRTLPluginState(ee,ie,ye){try{o.plugin.setState(ie);const Re=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&Re!=null){this.self.importScripts(Re);const De=o.plugin.isParsed();ye(De?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Re}`),De)}}catch(Re){ye(Re.toString())}}getAvailableImages(ee){let ie=this.availableImages[ee];return ie||(ie=[]),ie}getLayerIndex(ee){let ie=this.layerIndexes[ee];return ie||(ie=this.layerIndexes[ee]=new E),ie}getWorkerSource(ee,ie,ye){if(this.workerSources[ee]||(this.workerSources[ee]={}),this.workerSources[ee][ie]||(this.workerSources[ee][ie]={}),!this.workerSources[ee][ie][ye]){const Re={send:(De,He,Ge,Ve,Ze,yt)=>{this.actor.send(De,He,Ge,ee,Ze,yt)},scheduler:this.actor.scheduler};this.workerSources[ee][ie][ye]=new this.workerSourceTypes[ie](Re,this.getLayerIndex(ee),this.getAvailableImages(ee),this.isSpriteLoaded[ee])}return this.workerSources[ee][ie][ye]}getDEMWorkerSource(ee,ie){return this.demWorkerSources[ee]||(this.demWorkerSources[ee]={}),this.demWorkerSources[ee][ie]||(this.demWorkerSources[ee][ie]=new k),this.demWorkerSources[ee][ie]}enforceCacheSizeLimit(ee,ie){o.enforceCacheSizeLimit(ie)}getWorkerPerformanceMetrics(ee,ie,ye){ye(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Jr(self)),Jr}),d(["./shared"],function(o){function v(_,l){if(Array.isArray(_)){if(!Array.isArray(l)||_.length!==l.length)return!1;for(let f=0;f<_.length;f++)if(!v(_[f],l[f]))return!1;return!0}if(typeof _=="object"&&_!==null&&l!==null){if(typeof l!="object"||Object.keys(_).length!==Object.keys(l).length)return!1;for(const f in _)if(!v(_[f],l[f]))return!1;return!0}return _===l}var x=E;function E(_){return!function(l){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var b,T,M=new Blob([""],{type:"text/javascript"}),F=URL.createObjectURL(M);try{T=new Worker(F),b=!0}catch{b=!1}return T&&T.terminate(),URL.revokeObjectURL(F),b}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var b=document.createElement("canvas");b.width=b.height=1;var T=b.getContext("2d");if(!T)return!1;var M=T.getImageData(0,0,1,1);return M&&M.width===b.width}()?(k[f=l&&l.failIfMajorPerformanceCaveat]===void 0&&(k[f]=function(b){var T,M=function(F){var G=document.createElement("canvas"),H=Object.create(E.webGLContextAttributes);return H.failIfMajorPerformanceCaveat=F,G.getContext("webgl",H)||G.getContext("experimental-webgl",H)}(b);if(!M)return!1;try{T=M.createShader(M.VERTEX_SHADER)}catch{return!1}return!(!T||M.isContextLost())&&(M.shaderSource(T,"void main() {}"),M.compileShader(T),M.getShaderParameter(T,M.COMPILE_STATUS)===!0)}(f)),k[f]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var f}(_)}var k={};function S(_,l,f){const b=o.window.document.createElement(_);return l!==void 0&&(b.className=l),f&&f.appendChild(b),b}function N(_,l,f){const b=o.window.document.createElementNS("http://www.w3.org/2000/svg",_);for(const T of Object.keys(l))b.setAttributeNS(null,T,l[T]);return f&&f.appendChild(b),b}E.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const L=o.window.document&&o.window.document.documentElement.style,P=L&&L.userSelect!==void 0?"userSelect":"WebkitUserSelect";let O;function V(){L&&P&&(O=L[P],L[P]="none")}function z(){L&&P&&(L[P]=O)}function U(_){_.preventDefault(),_.stopPropagation(),o.window.removeEventListener("click",U,!0)}function W(){o.window.addEventListener("click",U,!0),o.window.setTimeout(()=>{o.window.removeEventListener("click",U,!0)},0)}function Z(_,l){const f=_.getBoundingClientRect();return se(_,f,l)}function re(_,l){const f=_.getBoundingClientRect(),b=[];for(let T=0;T<l.length;T++)b.push(se(_,f,l[T]));return b}function oe(_){return o.window.InstallTrigger!==void 0&&_.button===2&&_.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:_.button}function se(_,l,f){const b=_.offsetWidth===l.width?1:_.offsetWidth/l.width;return new o.pointGeometry((f.clientX-l.left)*b,(f.clientY-l.top)*b)}function ce(_,l){var f=l[0],b=l[1],T=l[2],M=l[3],F=f*M-T*b;return F?(_[0]=M*(F=1/F),_[1]=-b*F,_[2]=-T*F,_[3]=f*F,_):null}function me(_){const{userImage:l}=_;return!!(l&&l.render&&l.render())&&(_.data.replace(new Uint8Array(l.data.buffer)),!0)}class we extends o.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:f,callback:b}of this.requestors)this._notify(f,b);this.requestors=[]}}hasImage(l){return!!this.getImage(l)}getImage(l){return this.images[l]}addImage(l,f){this._validate(l,f)&&(this.images[l]=f)}_validate(l,f){let b=!0;return this._validateStretch(f.stretchX,f.data&&f.data.width)||(this.fire(new o.ErrorEvent(new Error(`Image "${l}" has invalid "stretchX" value`))),b=!1),this._validateStretch(f.stretchY,f.data&&f.data.height)||(this.fire(new o.ErrorEvent(new Error(`Image "${l}" has invalid "stretchY" value`))),b=!1),this._validateContent(f.content,f)||(this.fire(new o.ErrorEvent(new Error(`Image "${l}" has invalid "content" value`))),b=!1),b}_validateStretch(l,f){if(!l)return!0;let b=0;for(const T of l){if(T[0]<b||T[1]<T[0]||f<T[1])return!1;b=T[1]}return!0}_validateContent(l,f){return!(l&&(l.length!==4||l[0]<0||f.data.width<l[0]||l[1]<0||f.data.height<l[1]||l[2]<0||f.data.width<l[2]||l[3]<0||f.data.height<l[3]||l[2]<l[0]||l[3]<l[1]))}updateImage(l,f){f.version=this.images[l].version+1,this.images[l]=f,this.updatedImages[l]=!0}removeImage(l){const f=this.images[l];delete this.images[l],delete this.patterns[l],f.userImage&&f.userImage.onRemove&&f.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l,f){let b=!0;if(!this.isLoaded())for(const T of l)this.images[T]||(b=!1);this.isLoaded()||b?this._notify(l,f):this.requestors.push({ids:l,callback:f})}_notify(l,f){const b={};for(const T of l){this.images[T]||this.fire(new o.Event("styleimagemissing",{id:T}));const M=this.images[T];M?b[T]={data:M.data.clone(),pixelRatio:M.pixelRatio,sdf:M.sdf,version:M.version,stretchX:M.stretchX,stretchY:M.stretchY,content:M.content,hasRenderCallback:Boolean(M.userImage&&M.userImage.render)}:o.warnOnce(`Image "${T}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}f(null,b)}getPixelSize(){const{width:l,height:f}=this.atlasImage;return{width:l,height:f}}getPattern(l){const f=this.patterns[l],b=this.getImage(l);if(!b)return null;if(f&&f.position.version===b.version)return f.position;if(f)f.position.version=b.version;else{const T={w:b.data.width+2,h:b.data.height+2,x:0,y:0},M=new o.ImagePosition(T,b);this.patterns[l]={bin:T,position:M}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const f=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(l,this.atlasImage,f.RGBA),this.atlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const M in this.patterns)l.push(this.patterns[M].bin);const{w:f,h:b}=o.potpack(l),T=this.atlasImage;T.resize({width:f||1,height:b||1});for(const M in this.patterns){const{bin:F}=this.patterns[M],G=F.x+1,H=F.y+1,Y=this.images[M].data,X=Y.width,te=Y.height;o.RGBAImage.copy(Y,T,{x:0,y:0},{x:G,y:H},{width:X,height:te}),o.RGBAImage.copy(Y,T,{x:0,y:te-1},{x:G,y:H-1},{width:X,height:1}),o.RGBAImage.copy(Y,T,{x:0,y:0},{x:G,y:H+te},{width:X,height:1}),o.RGBAImage.copy(Y,T,{x:X-1,y:0},{x:G-1,y:H},{width:1,height:te}),o.RGBAImage.copy(Y,T,{x:0,y:0},{x:G+X,y:H},{width:1,height:te})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const f of l){if(this.callbackDispatchedThisFrame[f])continue;this.callbackDispatchedThisFrame[f]=!0;const b=this.images[f];me(b)&&this.updateImage(f,b)}}}const ae=new o.Properties({anchor:new o.DataConstantProperty(o.spec.light.anchor),position:new class{constructor(){this.specification=o.spec.light.position}possiblyEvaluate(_,l){return function([f,b,T]){const M=o.degToRad(b+90),F=o.degToRad(T);return{x:f*Math.cos(M)*Math.sin(F),y:f*Math.sin(M)*Math.sin(F),z:f*Math.cos(F),azimuthal:b,polar:T}}(_.expression.evaluate(l))}interpolate(_,l,f){return{x:o.number(_.x,l.x,f),y:o.number(_.y,l.y,f),z:o.number(_.z,l.z,f),azimuthal:o.number(_.azimuthal,l.azimuthal,f),polar:o.number(_.polar,l.polar,f)}}},color:new o.DataConstantProperty(o.spec.light.color),intensity:new o.DataConstantProperty(o.spec.light.intensity)}),Ce="-transition";class Fe extends o.Evented{constructor(l){super(),this._transitionable=new o.Transitionable(ae),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,f={}){if(!this._validate(o.validateLight,l,f))for(const b in l){const T=l[b];o.endsWith(b,Ce)?this._transitionable.setTransition(b.slice(0,-Ce.length),T):this._transitionable.setValue(b,T)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,f,b){return(!b||b.validate!==!1)&&o.emitValidationErrors(this,l.call(o.validateStyle,o.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}const it=new o.Properties({source:new o.DataConstantProperty(o.spec.terrain.source),exaggeration:new o.DataConstantProperty(o.spec.terrain.exaggeration)}),_e="-transition";class ke extends o.Evented{constructor(l,f){super(),this._transitionable=new o.Transitionable(it),this.set(l),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=f}get(){return this._transitionable.serialize()}set(l){for(const f in l){const b=l[f];o.endsWith(f,_e)?this._transitionable.setTransition(f.slice(0,-_e.length),b):this._transitionable.setValue(f,b)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}}function ze(_,l,f,b){const T=o.smoothstep(45,65,f),[M,F]=nt(_,b),G=o.length(l);let H=1-Math.min(1,Math.exp((G-M)/(F-M)*-6));return H*=H*H,H=Math.min(1,1.00747*H),H*T*_.alpha}function nt(_,l){const f=.5/Math.tan(.5*l);return[_.range[0]+f,_.range[1]+f]}const mt=new o.Properties({range:new o.DataConstantProperty(o.spec.fog.range),color:new o.DataConstantProperty(o.spec.fog.color),"high-color":new o.DataConstantProperty(o.spec.fog["high-color"]),"space-color":new o.DataConstantProperty(o.spec.fog["space-color"]),"horizon-blend":new o.DataConstantProperty(o.spec.fog["horizon-blend"]),"star-intensity":new o.DataConstantProperty(o.spec.fog["star-intensity"])}),qt="-transition";class un extends o.Evented{constructor(l,f){super(),this._transitionable=new o.Transitionable(mt),this.set(l),this._transitioning=this._transitionable.untransitioned(),this._transform=f}get state(){const l=this._transform,f=l.projection.name==="globe",b=o.globeToMercatorTransition(l.zoom),T=this.properties.get("range"),M=[.5,3];return{range:f?[o.number(M[0],T[0],b),o.number(M[1],T[1],b)]:T,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(l,f={}){if(!this._validate(o.validateFog,l,f)){for(const b of Object.keys(o.spec.fog))l&&l[b]===void 0&&(l[b]=o.spec.fog[b].default);for(const b in l){const T=l[b];o.endsWith(b,qt)?this._transitionable.setTransition(b.slice(0,-qt.length),T):this._transitionable.setValue(b,T)}}}getOpacity(l){if(!this._transform.projection.supportsFog)return 0;const f=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:o.smoothstep(45,65,l))*f.a}getOpacityAtLatLng(l,f){return this._transform.projection.supportsFog?function(b,T,M){const F=o.MercatorCoordinate.fromLngLat(T),G=M.elevation?M.elevation.getAtPointOrZero(F):0,H=[F.x,F.y,G];return o.transformMat4(H,H,M.mercatorFogMatrix),ze(b,H,M.pitch,M._fov)}(this.state,l,f):0}getFovAdjustedRange(l){return this._transform.projection.supportsFog?nt(this.state,l):[0,1]}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,f,b){return(!b||b.validate!==!1)&&o.emitValidationErrors(this,l.call(o.validateStyle,o.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}class fn{constructor(l,f){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=o.uniqueId();const b=this.workerPool.acquire(this.id);for(let T=0;T<b.length;T++){const M=new fn.Actor(b[T],f,this.id);M.name=`Worker ${T}`,this.actors.push(M)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(l,f,b){o.asyncAll(this.actors,(T,M)=>{T.send(l,f,M)},b=b||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(l=>{l.remove()}),this.actors=[],this.workerPool.release(this.id)}}function vn(_,l,f){return l*(o.EXTENT/(_.tileSize*Math.pow(2,f-_.tileID.overscaledZ)))}fn.Actor=o.Actor;class at{constructor(l,f,b,T){this.screenBounds=l,this.cameraPoint=f,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=b,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,T)}static createFromScreenPoints(l,f){let b,T;if(l instanceof o.pointGeometry||typeof l[0]=="number"){const M=o.pointGeometry.convert(l);b=[M],T=f.isPointAboveHorizon(M)}else{const M=o.pointGeometry.convert(l[0]),F=o.pointGeometry.convert(l[1]);b=[M,F],T=o.polygonizeBounds(M,F).every(G=>f.isPointAboveHorizon(G))}return new at(b,f.getCameraPoint(),T,f)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(l){return o.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],l)}bufferedCameraGeometry(l){const f=this.screenBounds[0],b=this.screenBounds.length===1?this.screenBounds[0].add(new o.pointGeometry(1,1)):this.screenBounds[1],T=o.polygonizeBounds(f,b,0,!1);return this.cameraPoint.y>b.y&&(this.cameraPoint.x>f.x&&this.cameraPoint.x<b.x?T.splice(3,0,this.cameraPoint):this.cameraPoint.x>=b.x?T[2]=this.cameraPoint:this.cameraPoint.x<=f.x&&(T[3]=this.cameraPoint)),o.bufferConvexPolygon(T,l)}bufferedCameraGeometryGlobe(l){const f=this.screenBounds[0],b=this.screenBounds.length===1?this.screenBounds[0].add(new o.pointGeometry(1,1)):this.screenBounds[1],T=o.polygonizeBounds(f,b,l),M=this.cameraPoint.clone();switch(3*((M.y>f.y)+(M.y>b.y))+((M.x>f.x)+(M.x>b.x))){case 0:T[0]=M,T[4]=M.clone();break;case 1:T.splice(1,0,M);break;case 2:T[1]=M;break;case 3:T.splice(4,0,M);break;case 5:T.splice(2,0,M);break;case 6:T[3]=M;break;case 7:T.splice(3,0,M);break;case 8:T[2]=M}return T}containsTile(l,f,b,T=0){const M=l.queryPadding/f._pixelsPerMercatorPixel+1,F=b?this._bufferedCameraMercator(M,f):this._bufferedScreenMercator(M,f);let G=l.tileID.wrap+(F.unwrapped?T:0);const H=F.polygon.map(fe=>o.getTilePoint(l.tileTransform,fe,G));if(!o.polygonIntersectsBox(H,0,0,o.EXTENT,o.EXTENT))return;G=l.tileID.wrap+(this.screenGeometryMercator.unwrapped?T:0);const Y=this.screenGeometryMercator.polygon.map(fe=>o.getTileVec3(l.tileTransform,fe,G)),X=Y.map(fe=>new o.pointGeometry(fe[0],fe[1])),te=f.getFreeCameraOptions().position||new o.MercatorCoordinate(0,0,0),le=o.getTileVec3(l.tileTransform,te,G),ge=Y.map(fe=>{const de=o.sub(fe,fe,le);return o.normalize(de,de),new o.Ray(le,de)}),pe=vn(l,1,f.zoom)*f._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:X,tilespaceRays:ge,bufferedTilespaceGeometry:H,bufferedTilespaceBounds:(ve=o.getBounds(H),ve.min.x=o.clamp(ve.min.x,0,o.EXTENT),ve.min.y=o.clamp(ve.min.y,0,o.EXTENT),ve.max.x=o.clamp(ve.max.x,0,o.EXTENT),ve.max.y=o.clamp(ve.max.y,0,o.EXTENT),ve),tile:l,tileID:l.tileID,pixelToTileUnitsFactor:pe};var ve}_bufferedScreenMercator(l,f){const b=jt(l);if(this._screenRaycastCache[b])return this._screenRaycastCache[b];{let T;return T=f.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(l),f):{polygon:this.bufferedScreenGeometry(l).map(M=>f.pointCoordinate3D(M)),unwrapped:!0},this._screenRaycastCache[b]=T,T}}_bufferedCameraMercator(l,f){const b=jt(l);if(this._cameraRaycastCache[b])return this._cameraRaycastCache[b];{let T;return T=f.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(l),f):{polygon:this.bufferedCameraGeometry(l).map(M=>f.pointCoordinate3D(M)),unwrapped:!0},this._cameraRaycastCache[b]=T,T}}_projectAndResample(l,f){const b=function(M,F){const G=o.multiply([],F.pixelMatrix,F.globeMatrix),H=[0,-o.GLOBE_RADIUS,0,1],Y=[0,o.GLOBE_RADIUS,0,1],X=[0,0,0,1];o.transformMat4$1(H,H,G),o.transformMat4$1(Y,Y,G),o.transformMat4$1(X,X,G);const te=new o.pointGeometry(H[0]/H[3],H[1]/H[3]),le=new o.pointGeometry(Y[0]/Y[3],Y[1]/Y[3]),ge=o.polygonContainsPoint(M,te)&&H[3]<X[3],pe=o.polygonContainsPoint(M,le)&&Y[3]<X[3];if(!ge&&!pe)return null;const ve=function(Pe,qe,rt){for(let Xe=1;Xe<Pe.length;Xe++){const St=bt(qe.pointCoordinate3D(Pe[Xe-1]).x),je=bt(qe.pointCoordinate3D(Pe[Xe]).x);if(rt<0){if(St<je)return{idx:Xe,t:-St/(je-1-St)}}else if(je<St)return{idx:Xe,t:(1-St)/(je+1-St)}}return null}(M,F,ge?-1:1);if(!ve)return null;const{idx:fe,t:de}=ve;let be=fe>1?Ot(M.slice(0,fe),F):[],he=fe<M.length?Ot(M.slice(fe),F):[];be=be.map(Pe=>new o.pointGeometry(bt(Pe.x),Pe.y)),he=he.map(Pe=>new o.pointGeometry(bt(Pe.x),Pe.y));const Ie=[...be];Ie.length===0&&Ie.push(he[he.length-1]);const Le=o.number(Ie[Ie.length-1].y,(he.length===0?be[0]:he[0]).y,de);let Ae;return Ae=ge?[new o.pointGeometry(0,Le),new o.pointGeometry(0,0),new o.pointGeometry(1,0),new o.pointGeometry(1,Le)]:[new o.pointGeometry(1,Le),new o.pointGeometry(1,1),new o.pointGeometry(0,1),new o.pointGeometry(0,Le)],Ie.push(...Ae),he.length===0?Ie.push(be[0]):Ie.push(...he),{polygon:Ie.map(Pe=>new o.MercatorCoordinate(Pe.x,Pe.y)),unwrapped:!1}}(l,f);if(b)return b;const T=function(M,F){let G=!1,H=-1/0,Y=0;for(let te=0;te<M.length-1;te++)M[te].x>H&&(H=M[te].x,Y=te);for(let te=0;te<M.length-1;te++){const le=(Y+te)%(M.length-1),ge=M[le],pe=M[le+1];Math.abs(ge.x-pe.x)>.5&&(ge.x<pe.x?(ge.x+=1,le===0&&(M[M.length-1].x+=1)):(pe.x+=1,le+1===M.length-1&&(M[0].x+=1)),G=!0)}const X=o.mercatorXfromLng(F.center.lng);return G&&X<Math.abs(X-1)&&M.forEach(te=>{te.x-=1}),{polygon:M,unwrapped:G}}(Ot(l,f).map(M=>new o.pointGeometry(bt(M.x),M.y)),f);return{polygon:T.polygon.map(M=>new o.MercatorCoordinate(M.x,M.y)),unwrapped:T.unwrapped}}}function Ot(_,l){return o.resample(_,f=>{const b=l.pointCoordinate3D(f);f.x=b.x,f.y=b.y},1/256)}function bt(_){return _<0?1+_%1:_%1}function jt(_){return 100*_|0}function gn(_,l,f,b,T){const M=function(F,G){if(F)return T(F);if(G){_.url&&G.tiles&&_.tiles&&delete _.tiles;const H=o.pick(o.extend(G,_),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);G.vector_layers&&(H.vectorLayers=G.vector_layers,H.vectorLayerIds=H.vectorLayers.map(Y=>Y.id)),H.tiles=l.canonicalizeTileset(H,_.url),T(null,H)}};return _.url?o.getJSON(l.transformRequest(l.normalizeSourceURL(_.url,null,f,b),o.ResourceType.Source),M):o.exported.frame(()=>M(null,_))}class dn{constructor(l,f,b){this.bounds=o.LngLatBounds.convert(this.validateBounds(l)),this.minzoom=f||0,this.maxzoom=b||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const f=Math.pow(2,l.z),b=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*f),T=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*f),M=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*f),F=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*f);return l.x>=b&&l.x<M&&l.y>=T&&l.y<F}}class hn{constructor(l,f,b){this.context=l;const T=l.gl;this.buffer=T.createBuffer(),this.dynamicDraw=Boolean(b),this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),T.bufferData(T.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||f.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const f=this.context.gl;this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ht={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ee{constructor(l,f,b,T){this.length=f.length,this.attributes=b,this.itemSize=f.bytesPerElement,this.dynamicDraw=T,this.context=l;const M=l.gl;this.buffer=M.createBuffer(),l.bindVertexBuffer.set(this.buffer),M.bufferData(M.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?M.DYNAMIC_DRAW:M.STATIC_DRAW),this.dynamicDraw||f.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){const f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,f){for(let b=0;b<this.attributes.length;b++){const T=f.attributes[this.attributes[b].name];T!==void 0&&l.enableVertexAttribArray(T)}}setVertexAttribPointers(l,f,b){for(let T=0;T<this.attributes.length;T++){const M=this.attributes[T],F=f.attributes[M.name];F!==void 0&&l.vertexAttribPointer(F,M.components,l[Ht[M.type]],!1,this.itemSize,M.offset+this.itemSize*(b||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ne{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class et extends Ne{getDefault(){return o.Color.transparent}set(l){const f=this.current;(l.r!==f.r||l.g!==f.g||l.b!==f.b||l.a!==f.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class xt extends Ne{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class Ke extends Ne{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class Rt extends Ne{getDefault(){return[!0,!0,!0,!0]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||l[2]!==f[2]||l[3]!==f[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class gt extends Ne{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class tt extends Ne{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class kt extends Ne{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const f=this.current;(l.func!==f.func||l.ref!==f.ref||l.mask!==f.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class dt extends Ne{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||l[2]!==f[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class Et extends Ne{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this.current=l,this.dirty=!1}}class $t extends Ne{getDefault(){return[0,1]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class Je extends Ne{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this.current=l,this.dirty=!1}}class ut extends Ne{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class pt extends Ne{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.BLEND):f.disable(f.BLEND),this.current=l,this.dirty=!1}}class Xt extends Ne{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class Kt extends Ne{getDefault(){return o.Color.transparent}set(l){const f=this.current;(l.r!==f.r||l.g!==f.g||l.b!==f.b||l.a!==f.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class yn extends Ne{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class Gn extends Ne{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this.current=l,this.dirty=!1}}class gi extends Ne{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class Ii extends Ne{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class Li extends Ne{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class Mr extends Ne{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class ci extends Ne{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||l[2]!==f[2]||l[3]!==f[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class _i extends Ne{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class Yi extends Ne{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindRenderbuffer(f.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class vo extends Ne{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindTexture(f.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class yo extends Ne{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Xi extends Ne{getDefault(){return null}set(l){const f=this.gl;f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class bo extends Ne{constructor(l){super(l),this.vao=l.extVertexArrayObject}getDefault(){return null}set(l){this.vao&&(l!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(l),this.current=l,this.dirty=!1)}}class $s extends Ne{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class xo extends Ne{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class wo extends Ne{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class Oi extends Ne{constructor(l,f){super(l),this.context=l,this.parent=f}getDefault(){return null}}class Xr extends Oi{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class Ko extends Oi{attachment(){return this.gl.DEPTH_ATTACHMENT}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,this.attachment(),f.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Jr extends Ko{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class xe{constructor(l,f,b,T){this.context=l,this.width=f,this.height=b;const M=this.framebuffer=l.gl.createFramebuffer();this.colorAttachment=new Xr(l,M),T&&(this.depthAttachment=new Ko(l,M))}destroy(){const l=this.context.gl,f=this.colorAttachment.get();if(f&&l.deleteTexture(f),this.depthAttachment){const b=this.depthAttachment.get();b&&l.deleteRenderbuffer(b)}l.deleteFramebuffer(this.framebuffer)}}class ee{constructor(l){this.gl=l,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new et(this),this.clearDepth=new xt(this),this.clearStencil=new Ke(this),this.colorMask=new Rt(this),this.depthMask=new gt(this),this.stencilMask=new tt(this),this.stencilFunc=new kt(this),this.stencilOp=new dt(this),this.stencilTest=new Et(this),this.depthRange=new $t(this),this.depthTest=new Je(this),this.depthFunc=new ut(this),this.blend=new pt(this),this.blendFunc=new Xt(this),this.blendColor=new Kt(this),this.blendEquation=new yn(this),this.cullFace=new Gn(this),this.cullFaceSide=new gi(this),this.frontFace=new Ii(this),this.program=new Li(this),this.activeTexture=new Mr(this),this.viewport=new ci(this),this.bindFramebuffer=new _i(this),this.bindRenderbuffer=new Yi(this),this.bindTexture=new vo(this),this.bindVertexBuffer=new yo(this),this.bindElementBuffer=new Xi(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new bo(this),this.pixelStoreUnpack=new $s(this),this.pixelStoreUnpackPremultiplyAlpha=new xo(this),this.pixelStoreUnpackFlipY=new wo(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=l.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=l.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=l.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.extTextureHalfFloat=l.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(l.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=l.getExtension("OES_standard_derivatives"),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,f){return new hn(this,l,f)}createVertexBuffer(l,f,b){return new Ee(this,l,f,b)}createRenderbuffer(l,f,b){const T=this.gl,M=T.createRenderbuffer();return this.bindRenderbuffer.set(M),T.renderbufferStorage(T.RENDERBUFFER,l,f,b),this.bindRenderbuffer.set(null),M}createFramebuffer(l,f,b){return new xe(this,l,f,b)}clear({color:l,depth:f,stencil:b}){const T=this.gl;let M=0;l&&(M|=T.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),f!==void 0&&(M|=T.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),b!==void 0&&(M|=T.STENCIL_BUFFER_BIT,this.clearStencil.set(b),this.stencilMask.set(255)),T.clear(M)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){v(l.blendFunction,o.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class ie extends o.Evented{constructor(l,f,b,T){super(),this.id=l,this.dispatcher=b,this.setEventedParent(T),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},f),o.extend(this,o.pick(f,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=gn(this._options,this.map._requestManager,null,null,(l,f)=>{this._tileJSONRequest=null,this._loaded=!0,l?this.fire(new o.ErrorEvent(l)):f&&(o.extend(this,f),f.bounds&&(this.tileBounds=new dn(f.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(f.tiles),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return o.extend({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,f){const b=o.exported.devicePixelRatio>=2,T=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),b,this.tileSize);l.request=o.getImage(this.map._requestManager.transformRequest(T,o.ResourceType.Tile),(M,F,G,H)=>(delete l.request,l.aborted?(l.state="unloaded",f(null)):M?(l.state="errored",f(M)):F?(this.map._refreshExpiredTiles&&l.setExpiryData({cacheControl:G,expires:H}),l.setTexture(F,this.map.painter),l.state="loaded",o.cacheEntryPossiblyAdded(this.dispatcher),void f(null)):f(null)))}static loadTileData(l,f,b){l.setTexture(f,b)}static unloadTileData(l,f){l.texture&&f.saveTileTexture(l.texture)}abortTile(l,f){l.request&&(l.request.cancel(),delete l.request),f()}unloadTile(l,f){l.texture&&this.map.painter.saveTileTexture(l.texture),f()}hasTransition(){return!1}}let ye;function Re(_,l,f,b,T,M,F,G){const H=[_,f,T,l,b,M,1,1,1],Y=[F,G,1],X=o.adjoint([],H),[te,le,ge]=o.transformMat3(Y,Y,o.transpose(X,X));return o.multiply$1(H,[te,0,0,0,le,0,0,0,ge],H)}class De extends o.Evented{constructor(l,f,b,T){super(),this.id=l,this.dispatcher=b,this.coordinates=f.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(T),this.options=f,this._dirty=!1}load(l,f){this._loaded=f||!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),(b,T)=>{if(this._imageRequest=null,this._loaded=!0,b)this.fire(new o.ErrorEvent(b));else if(T){const{HTMLImageElement:M}=o.window;this.image=T instanceof M?o.exported.getImageData(T):T,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,l&&(this.coordinates=l),this._finishLoading()}})}loaded(){return this._loaded}updateImage(l){return this.image&&l.url?(this._imageRequest&&l.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=l.url,this.load(l.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(l){this.coordinates=l,this._boundsArray=void 0;const f=l.map(o.MercatorCoordinate.fromLngLat);return this.tileID=function(b){let T=1/0,M=1/0,F=-1/0,G=-1/0;for(const te of b)T=Math.min(T,te.x),M=Math.min(M,te.y),F=Math.max(F,te.x),G=Math.max(G,te.y);const H=Math.max(F-T,G-M),Y=Math.max(0,Math.floor(-Math.log(H)/Math.LN2)),X=Math.pow(2,Y);return new o.CanonicalTileID(Y,Math.floor((T+F)/2*X),Math.floor((M+G)/2*X))}(f),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(l){for(const H in this.tiles){const Y=this.tiles[H];Y.state!=="loaded"&&(Y.state="loaded",Y.texture=this.texture)}if(this._boundsArray)return;const f=o.tileTransform(this.tileID,this.map.transform.projection),[b,T,M,F]=this.coordinates.map(H=>{const Y=f.projection.project(H[0],H[1]);return o.getTilePoint(f,Y)._round()});this.perspectiveTransform=function(H,Y,X,te,le,ge,pe,ve,fe,de){const be=Re(0,0,H,0,0,Y,H,Y),he=Re(X,te,le,ge,pe,ve,fe,de);return o.multiply$1(he,o.adjoint(be,be),he),[he[6]/he[8]*H/o.EXTENT,he[7]/he[8]*Y/o.EXTENT]}(this.width,this.height,b.x,b.y,T.x,T.y,F.x,F.y,M.x,M.y);const G=this._boundsArray=new o.StructArrayLayout4i8;G.emplaceBack(b.x,b.y,0,0),G.emplaceBack(T.x,T.y,o.EXTENT,0),G.emplaceBack(F.x,F.y,0,o.EXTENT),G.emplaceBack(M.x,M.y,o.EXTENT,o.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=l.createVertexBuffer(G,o.boundsAttributes.members),this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,f=l.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new o.Texture(l,this.image,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(l)}loadTile(l,f){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={},f(null)):(l.state="errored",f(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const He={vector:class extends o.Evented{constructor(_,l,f,b){if(super(),this.id=_,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(l,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(b),this._tileWorkers={},this._deduped=new o.DedupedRequest}load(_){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"}));const l=Array.isArray(this.map._language)?this.map._language.join():this.map._language,f=this.map._worldview;this._tileJSONRequest=gn(this._options,this.map._requestManager,l,f,(b,T)=>{this._tileJSONRequest=null,this._loaded=!0,b?(l&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${l}`),f&&f.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${f}`),this.fire(new o.ErrorEvent(b))):T&&(o.extend(this,T),T.bounds&&(this.tileBounds=new dn(T.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(T.tiles,this.map._requestManager._customAccessToken),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),_&&_(b)})}loaded(){return this._loaded}hasTile(_){return!this.tileBounds||this.tileBounds.contains(_.canonical)}onAdd(_){this.map=_,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>{const _=this.map.style._getSourceCaches(this.id);for(const l of _)l.clearTiles()})}setSourceProperty(_){_(),this.reload()}setTiles(_){return this._options.tiles=_,this.reload(),this}setUrl(_){return this.url=_,this._options.url=_,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.extend({},this._options)}loadTile(_,l){const f=this.map._requestManager.normalizeTileURL(_.tileID.canonical.url(this.tiles,this.scheme)),b={request:this.map._requestManager.transformRequest(f,o.ResourceType.Tile),data:void 0,uid:_.uid,tileID:_.tileID,tileZoom:_.tileZoom,zoom:_.tileID.overscaledZ,tileSize:this.tileSize*_.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:_.isSymbolTile};if(b.request.collectResourceTiming=this._collectResourceTiming,_.actor&&_.state!=="expired")_.state==="loading"?_.reloadCallback=l:_.request=_.actor.send("reloadTile",b,T.bind(this));else if(_.actor=this._tileWorkers[f]=this._tileWorkers[f]||this.dispatcher.getActor(),this.dispatcher.ready)_.request=_.actor.send("loadTile",b,T.bind(this),void 0,!0);else{const M=o.loadVectorTile.call({deduped:this._deduped},b,(F,G)=>{F||!G?T.call(this,F):(b.data={cacheControl:G.cacheControl,expires:G.expires,rawData:G.rawData.slice(0)},_.actor&&_.actor.send("loadTile",b,T.bind(this),void 0,!0))},!0);_.request={cancel:M}}function T(M,F){return delete _.request,_.aborted?l(null):M&&M.status!==404?l(M):(F&&F.resourceTiming&&(_.resourceTiming=F.resourceTiming),this.map._refreshExpiredTiles&&F&&_.setExpiryData(F),_.loadVectorData(F,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),l(null),void(_.reloadCallback&&(this.loadTile(_,_.reloadCallback),_.reloadCallback=null)))}}abortTile(_){_.request&&(_.request.cancel(),delete _.request),_.actor&&_.actor.send("abortTile",{uid:_.uid,type:this.type,source:this.id})}unloadTile(_){_.unloadVectorData(),_.actor&&_.actor.send("removeTile",{uid:_.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}},raster:ie,"raster-dem":class extends ie{constructor(_,l,f,b){super(_,l,f,b),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox"}loadTile(_,l){const f=this.map._requestManager.normalizeTileURL(_.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function b(T,M){T&&(_.state="errored",l(T)),M&&(_.dem=M,_.dem.onDeserialize(),_.needsHillshadePrepare=!0,_.needsDEMTextureUpload=!0,_.state="loaded",l(null))}_.request=o.getImage(this.map._requestManager.transformRequest(f,o.ResourceType.Tile),function(T,M,F,G){if(delete _.request,_.aborted)_.state="unloaded",l(null);else if(T)_.state="errored",l(T);else if(M){this.map._refreshExpiredTiles&&_.setExpiryData({cacheControl:F,expires:G});const H=o.window.ImageBitmap&&M instanceof o.window.ImageBitmap&&(ye==null&&(ye=o.window.OffscreenCanvas&&new o.window.OffscreenCanvas(1,1).getContext("2d")&&typeof o.window.createImageBitmap=="function"),ye),Y=1-(M.width-o.prevPowerOfTwo(M.width))/2;Y<1||_.neighboringTiles||(_.neighboringTiles=this._getNeighboringTiles(_.tileID));const X=H?M:o.exported.getImageData(M,Y),te={uid:_.uid,coord:_.tileID,source:this.id,rawImageData:X,encoding:this.encoding,padding:Y};_.actor&&_.state!=="expired"||(_.actor=this.dispatcher.getActor(),_.actor.send("loadDEMTile",te,b.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(_){const l=_.canonical,f=Math.pow(2,l.z),b=(l.x-1+f)%f,T=l.x===0?_.wrap-1:_.wrap,M=(l.x+1+f)%f,F=l.x+1===f?_.wrap+1:_.wrap,G={};return G[new o.OverscaledTileID(_.overscaledZ,T,l.z,b,l.y).key]={backfilled:!1},G[new o.OverscaledTileID(_.overscaledZ,F,l.z,M,l.y).key]={backfilled:!1},l.y>0&&(G[new o.OverscaledTileID(_.overscaledZ,T,l.z,b,l.y-1).key]={backfilled:!1},G[new o.OverscaledTileID(_.overscaledZ,_.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},G[new o.OverscaledTileID(_.overscaledZ,F,l.z,M,l.y-1).key]={backfilled:!1}),l.y+1<f&&(G[new o.OverscaledTileID(_.overscaledZ,T,l.z,b,l.y+1).key]={backfilled:!1},G[new o.OverscaledTileID(_.overscaledZ,_.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},G[new o.OverscaledTileID(_.overscaledZ,F,l.z,M,l.y+1).key]={backfilled:!1}),G}unloadTile(_){_.demTexture&&this.map.painter.saveTileTexture(_.demTexture),_.fbo&&(_.fbo.destroy(),delete _.fbo),_.dem&&delete _.dem,delete _.neighboringTiles,_.state="unloaded"}},geojson:class extends o.Evented{constructor(_,l,f,b){super(),this.id=_,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=f.getActor(),this.setEventedParent(b),this._data=l.data,this._options=o.extend({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const T=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*T,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*T,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:o.EXTENT,radius:(l.clusterRadius!==void 0?l.clusterRadius:50)*T,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions)}onAdd(_){this.map=_,this.setData(this._data)}setData(_){return this._data=_,this._updateWorkerData(),this}getClusterExpansionZoom(_,l){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:_,source:this.id},l),this}getClusterChildren(_,l){return this.actor.send("geojson.getClusterChildren",{clusterId:_,source:this.id},l),this}getClusterLeaves(_,l,f,b){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:_,limit:l,offset:f},b),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new o.Event("dataloading",{dataType:"source"})),this._loaded=!1;const _=o.extend({},this.workerOptions),l=this._data;typeof l=="string"?(_.request=this.map._requestManager.transformRequest(o.exported.resolveURL(l),o.ResourceType.Source),_.request.collectResourceTiming=this._collectResourceTiming):_.data=JSON.stringify(l),this._pendingLoad=this.actor.send(`${this.type}.loadData`,_,(f,b)=>{if(this._loaded=!0,this._pendingLoad=null,f)this.fire(new o.ErrorEvent(f));else{const T={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&b&&b.resourceTiming&&b.resourceTiming[this.id]&&(T.resourceTiming=b.resourceTiming[this.id]),this.fire(new o.Event("data",T)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(_,l){const f=_.actor?"reloadTile":"loadTile";_.actor=this.actor,_.request=this.actor.send(f,{type:this.type,uid:_.uid,tileID:_.tileID,tileZoom:_.tileZoom,zoom:_.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(b,T)=>(delete _.request,_.unloadVectorData(),_.aborted?l(null):b?l(b):(_.loadVectorData(T,this.map.painter,f==="reloadTile"),l(null))),void 0,f==="loadTile")}abortTile(_){_.request&&(_.request.cancel(),delete _.request),_.aborted=!0}unloadTile(_){_.unloadVectorData(),this.actor.send("removeTile",{uid:_.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return o.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends De{constructor(_,l,f,b){super(_,l,f,b),this.roundZoom=!0,this.type="video",this.options=l}load(){this._loaded=!1;const _=this.options;this.urls=[];for(const l of _.urls)this.urls.push(this.map._requestManager.transformRequest(l,o.ResourceType.Source).url);o.getVideo(this.urls,(l,f)=>{this._loaded=!0,l?this.fire(new o.ErrorEvent(l)):f&&(this.video=f,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(_){if(this.video){const l=this.video.seekable;_<l.start(0)||_>l.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=_}}getVideo(){return this.video}onAdd(_){this.map||(this.map=_,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _=this.map.painter.context,l=_.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(_,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(_)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:De,canvas:class extends De{constructor(_,l,f,b){super(_,l,f,b),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(T=>!Array.isArray(T)||T.length!==2||T.some(M=>typeof M!="number"))||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${_}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${_}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${_}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${_}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${_}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(_){this.map=_,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context;this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(l,this.canvas,l.gl.RGBA,{premultiply:!0}),this._prepareData(l)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const _ of[this.canvas.width,this.canvas.height])if(isNaN(_)||_<=0)return!0;return!1}},custom:class extends o.Evented{constructor(_,l,f,b){super(),this.id=_,this.type="custom",this._dataType="raster",this._dispatcher=f,this._implementation=l,this.setEventedParent(b),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new o.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new o.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new dn(this._implementation.bounds,this.minzoom,this.maxzoom)),l.update=this._update.bind(this),l.clearTiles=this._clearTiles.bind(this),l.coveringTiles=this._coveringTiles.bind(this),o.extend(this,o.pick(l,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return o.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(_){this._map=_,this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(_),this.load()}onRemove(_){this._implementation.onRemove&&this._implementation.onRemove(_)}hasTile(_){if(this._implementation.hasTile){const{x:l,y:f,z:b}=_.canonical;return this._implementation.hasTile({x:l,y:f,z:b})}return!this.tileBounds||this.tileBounds.contains(_.canonical)}loadTile(_,l){const{x:f,y:b,z:T}=_.tileID.canonical,M=new o.window.AbortController;_.request=Promise.resolve(this._implementation.loadTile({x:f,y:b,z:T},{signal:M.signal})).then(function(F){return delete _.request,_.aborted?(_.state="unloaded",l(null)):F===void 0?(_.state="errored",l(null)):F===null?(this.loadTileData(_,{width:this.tileSize,height:this.tileSize,data:null}),_.state="loaded",l(null)):function(G){return G instanceof o.window.ImageData||G instanceof o.window.HTMLCanvasElement||G instanceof o.window.ImageBitmap||G instanceof o.window.HTMLImageElement}(F)?(this.loadTileData(_,F),_.state="loaded",void l(null)):(_.state="errored",l(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch(F=>{F.code!==20&&(_.state="errored",l(F))}),_.request.cancel=()=>M.abort()}loadTileData(_,l){ie.loadTileData(_,l,this._map.painter)}unloadTileData(_){ie.unloadTileData(_,this._map.painter)}unloadTile(_,l){if(this.unloadTileData(_),this._implementation.unloadTile){const{x:f,y:b,z:T}=_.tileID.canonical;this._implementation.unloadTile({x:f,y:b,z:T})}l()}abortTile(_,l){_.request&&_.request.cancel&&(_.request.cancel(),delete _.request),l()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(_=>({x:_.canonical.x,y:_.canonical.y,z:_.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Ge=function(_,l,f,b){const T=new He[l.type](_,l,f,b);if(T.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${T.id}`);return o.bindAll(["load","abort","unload","serialize","prepare"],T),T};function Ve(_,l){const f=o.identity([]);return o.scale(f,f,[.5*_.width,.5*-_.height,1]),o.translate(f,f,[1,-1,0]),o.multiply(f,f,_.calculateProjMatrix(l.toUnwrapped())),Float32Array.from(f)}function Ze(_,l,f,b,T,M,F,G=!1){const H=_.tilesIn(b,F,G);H.sort(Vt);const Y=[];for(const te of H)Y.push({wrappedTileID:te.tile.tileID.wrapped().key,queryResults:te.tile.queryRenderedFeatures(l,f,_._state,te,T,M,Ve(_.transform,te.tile.tileID),G)});const X=function(te){const le={},ge={};for(const pe of te){const ve=pe.queryResults,fe=pe.wrappedTileID,de=ge[fe]=ge[fe]||{};for(const be in ve){const he=ve[be],Ie=de[be]=de[be]||{},Le=le[be]=le[be]||[];for(const Ae of he)Ie[Ae.featureIndex]||(Ie[Ae.featureIndex]=!0,Le.push(Ae))}}return le}(Y);for(const te in X)X[te].forEach(le=>{const ge=le.feature,pe=ge.layer;pe&&pe.type!=="background"&&pe.type!=="sky"&&(ge.source=pe.source,pe["source-layer"]&&(ge.sourceLayer=pe["source-layer"]),ge.state=ge.id!==void 0?_.getFeatureState(pe["source-layer"],ge.id):{})});return X}function yt(_,l){const f=_.getRenderableIds().map(M=>_.getTileByID(M)),b=[],T={};for(let M=0;M<f.length;M++){const F=f[M],G=F.tileID.canonical.key;T[G]||(T[G]=!0,F.querySourceFeatures(b,l))}return b}function Vt(_,l){const f=_.tileID,b=l.tileID;return f.overscaledZ-b.overscaledZ||f.canonical.y-b.canonical.y||f.wrap-b.wrap||f.canonical.x-b.canonical.x}function Ct(){return vs.workerClass!=null?new vs.workerClass:new o.window.Worker(vs.workerUrl)}const en="mapboxgl_preloaded_worker_pool";class Qt{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<Qt.workerCount;)this.workers.push(new Ct);return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(f=>{f.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[en]}numActive(){return Object.keys(this.active).length}}let Jt;function ln(){return Jt||(Jt=new Qt),Jt}function En(_,l){const f={};for(const b in _)b!=="ref"&&(f[b]=_[b]);return o.refProperties.forEach(b=>{b in l&&(f[b]=l[b])}),f}function Nn(_){_=_.slice();const l=Object.create(null);for(let f=0;f<_.length;f++)l[_[f].id]=_[f];for(let f=0;f<_.length;f++)"ref"in _[f]&&(_[f]=En(_[f],l[_[f].ref]));return _}Qt.workerCount=2;const rn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Bn(_,l,f){f.push({command:rn.addSource,args:[_,l[_]]})}function zn(_,l,f){l.push({command:rn.removeSource,args:[_]}),f[_]=!0}function Ir(_,l,f,b){zn(_,f,b),Bn(_,l,f)}function vr(_,l,f){let b;for(b in _[f])if(_[f].hasOwnProperty(b)&&b!=="data"&&!v(_[f][b],l[f][b]))return!1;for(b in l[f])if(l[f].hasOwnProperty(b)&&b!=="data"&&!v(_[f][b],l[f][b]))return!1;return!0}function lt(_,l,f,b,T,M){let F;for(F in l=l||{},_=_||{})_.hasOwnProperty(F)&&(v(_[F],l[F])||f.push({command:M,args:[b,F,l[F],T]}));for(F in l)l.hasOwnProperty(F)&&!_.hasOwnProperty(F)&&(v(_[F],l[F])||f.push({command:M,args:[b,F,l[F],T]}))}function yr(_){return _.id}function oi(_,l){return _[l.id]=l,_}class Lr{constructor(l,f){this.reset(l,f)}reset(l,f){this.points=l||[],this._distances=[0];for(let b=1;b<this.points.length;b++)this._distances[b]=this._distances[b-1]+this.points[b].dist(this.points[b-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=o.clamp(l,0,1);let f=1,b=this._distances[f];const T=l*this.paddedLength+this.padding;for(;b<T&&f<this._distances.length;)b=this._distances[++f];const M=f-1,F=this._distances[M],G=b-F,H=G>0?(T-F)/G:0;return this.points[M].mult(1-H).add(this.points[f].mult(H))}}class fc{constructor(l,f,b){const T=this.boxCells=[],M=this.circleCells=[];this.xCellCount=Math.ceil(l/b),this.yCellCount=Math.ceil(f/b);for(let F=0;F<this.xCellCount*this.yCellCount;F++)T.push([]),M.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=f,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,f,b,T,M){this._forEachCell(f,b,T,M,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(f),this.bboxes.push(b),this.bboxes.push(T),this.bboxes.push(M)}insertCircle(l,f,b,T){this._forEachCell(f-T,b-T,f+T,b+T,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(f),this.circles.push(b),this.circles.push(T)}_insertBoxCell(l,f,b,T,M,F){this.boxCells[M].push(F)}_insertCircleCell(l,f,b,T,M,F){this.circleCells[M].push(F)}_query(l,f,b,T,M,F){if(b<0||l>this.width||T<0||f>this.height)return!M&&[];const G=[];if(l<=0&&f<=0&&this.width<=b&&this.height<=T){if(M)return!0;for(let H=0;H<this.boxKeys.length;H++)G.push({key:this.boxKeys[H],x1:this.bboxes[4*H],y1:this.bboxes[4*H+1],x2:this.bboxes[4*H+2],y2:this.bboxes[4*H+3]});for(let H=0;H<this.circleKeys.length;H++){const Y=this.circles[3*H],X=this.circles[3*H+1],te=this.circles[3*H+2];G.push({key:this.circleKeys[H],x1:Y-te,y1:X-te,x2:Y+te,y2:X+te})}return F?G.filter(F):G}return this._forEachCell(l,f,b,T,this._queryCell,G,{hitTest:M,seenUids:{box:{},circle:{}}},F),M?G.length>0:G}_queryCircle(l,f,b,T,M){const F=l-b,G=l+b,H=f-b,Y=f+b;if(G<0||F>this.width||Y<0||H>this.height)return!T&&[];const X=[];return this._forEachCell(F,H,G,Y,this._queryCellCircle,X,{hitTest:T,circle:{x:l,y:f,radius:b},seenUids:{box:{},circle:{}}},M),T?X.length>0:X}query(l,f,b,T,M){return this._query(l,f,b,T,!1,M)}hitTest(l,f,b,T,M){return this._query(l,f,b,T,!0,M)}hitTestCircle(l,f,b,T){return this._queryCircle(l,f,b,!0,T)}_queryCell(l,f,b,T,M,F,G,H){const Y=G.seenUids,X=this.boxCells[M];if(X!==null){const le=this.bboxes;for(const ge of X)if(!Y.box[ge]){Y.box[ge]=!0;const pe=4*ge;if(l<=le[pe+2]&&f<=le[pe+3]&&b>=le[pe+0]&&T>=le[pe+1]&&(!H||H(this.boxKeys[ge]))){if(G.hitTest)return F.push(!0),!0;F.push({key:this.boxKeys[ge],x1:le[pe],y1:le[pe+1],x2:le[pe+2],y2:le[pe+3]})}}}const te=this.circleCells[M];if(te!==null){const le=this.circles;for(const ge of te)if(!Y.circle[ge]){Y.circle[ge]=!0;const pe=3*ge;if(this._circleAndRectCollide(le[pe],le[pe+1],le[pe+2],l,f,b,T)&&(!H||H(this.circleKeys[ge]))){if(G.hitTest)return F.push(!0),!0;{const ve=le[pe],fe=le[pe+1],de=le[pe+2];F.push({key:this.circleKeys[ge],x1:ve-de,y1:fe-de,x2:ve+de,y2:fe+de})}}}}}_queryCellCircle(l,f,b,T,M,F,G,H){const Y=G.circle,X=G.seenUids,te=this.boxCells[M];if(te!==null){const ge=this.bboxes;for(const pe of te)if(!X.box[pe]){X.box[pe]=!0;const ve=4*pe;if(this._circleAndRectCollide(Y.x,Y.y,Y.radius,ge[ve+0],ge[ve+1],ge[ve+2],ge[ve+3])&&(!H||H(this.boxKeys[pe])))return F.push(!0),!0}}const le=this.circleCells[M];if(le!==null){const ge=this.circles;for(const pe of le)if(!X.circle[pe]){X.circle[pe]=!0;const ve=3*pe;if(this._circlesCollide(ge[ve],ge[ve+1],ge[ve+2],Y.x,Y.y,Y.radius)&&(!H||H(this.circleKeys[pe])))return F.push(!0),!0}}}_forEachCell(l,f,b,T,M,F,G,H){const Y=this._convertToXCellCoord(l),X=this._convertToYCellCoord(f),te=this._convertToXCellCoord(b),le=this._convertToYCellCoord(T);for(let ge=Y;ge<=te;ge++)for(let pe=X;pe<=le;pe++)if(M.call(this,l,f,b,T,this.xCellCount*pe+ge,F,G,H))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,f,b,T,M,F){const G=T-l,H=M-f,Y=b+F;return Y*Y>G*G+H*H}_circleAndRectCollide(l,f,b,T,M,F,G){const H=(F-T)/2,Y=Math.abs(l-(T+H));if(Y>H+b)return!1;const X=(G-M)/2,te=Math.abs(f-(M+X));if(te>X+b)return!1;if(Y<=H||te<=X)return!0;const le=Y-H,ge=te-X;return le*le+ge*ge<=b*b}}const or=Math.tan(85*Math.PI/180);function Eo(_,l,f,b,T,M,F){const G=o.create();if(f)if(M.name==="globe"){const H=o.calculateGlobeLabelMatrix(T,l);o.multiply(G,G,H)}else{const H=ce([],F);G[0]=H[0],G[1]=H[1],G[4]=H[2],G[5]=H[3],b||o.rotateZ(G,G,T.angle)}else o.multiply(G,T.labelPlaneMatrix,_);return G}function hc(_,l,f,b,T,M,F){const G=Eo(_,l,f,b,T,M,F);return M.name==="globe"&&f||(G[2]=G[6]=G[10]=G[14]=0),G}function Co(_,l,f,b,T,M,F){if(f){if(M.name==="globe"){const G=Eo(_,l,f,b,T,M,F);return o.invert(G,G),o.multiply(G,_,G),G}{const G=o.clone(_),H=o.identity([]);return H[0]=F[0],H[1]=F[1],H[4]=F[2],H[5]=F[3],o.multiply(G,G,H),b||o.rotateZ(G,G,-T.angle),G}}return T.glCoordMatrix}function zt(_,l,f=0){const b=[_.x,_.y,f,1];f?o.transformMat4$1(b,b,l):Ns(b,b,l);const T=b[3];return{point:[b[0]/T,b[1]/T,b[2]/T],signedDistanceFromCamera:T}}function Cn(_,l){const f=[_[0],_[1],_[2],1];o.transformMat4$1(f,f,l);const b=f[3];return{point:[f[0]/b,f[1]/b,f[2]/b],signedDistanceFromCamera:b}}function Sn(_,l){return Math.min(.5+_/l*.5,1.5)}function sr(_,l){const f=_[0]/_[3],b=_[1]/_[3];return f>=-l[0]&&f<=l[0]&&b>=-l[1]&&b<=l[1]}function So(_,l,f,b,T,M,F,G,H,Y){const X=f.transform,te=b?_.textSizeData:_.iconSizeData,le=o.evaluateSizeForZoom(te,f.transform.zoom),ge=X.projection.name==="globe",pe=[256/f.width*2+1,256/f.height*2+1],ve=b?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;ve.clear();let fe=null;ge&&(fe=b?_.text.globeExtVertexArray:_.icon.globeExtVertexArray);const de=_.lineVertexArray,be=b?_.text.placedSymbolArray:_.icon.placedSymbolArray,he=f.transform.width/f.transform.height;let Ie=!1;for(let Le=0;Le<be.length;Le++){const Ae=be.get(Le);if(Ae.writingMode!==o.WritingMode.vertical||Ie||Le!==0&&be.get(Le-1).writingMode===o.WritingMode.horizontal||(Ie=!0),(Ae.hidden||Ae.writingMode===o.WritingMode.vertical)&&!Ie){Ji(Ae.numGlyphs,ve);continue}Ie=!1;const Pe=new o.pointGeometry(Ae.tileAnchorX,Ae.tileAnchorY),qe=H?H(Pe):[0,0,0],rt=X.projection.projectTilePoint(Pe.x,Pe.y,Y.canonical),Xe=[rt.x+qe[0],rt.y+qe[1],rt.z+qe[2]],St=[...Xe,1];if(o.transformMat4$1(St,St,l),!sr(St,pe)){Ji(Ae.numGlyphs,ve);continue}const je=Sn(f.transform.cameraToCenterDistance,St[3]),_t=o.evaluateSizeForFeature(te,le,Ae),ht=F?_t/je:_t*je,We=zt(new o.pointGeometry(Xe[0],Xe[1]),T,Xe[2]);if(We.signedDistanceFromCamera<=0){Ji(Ae.numGlyphs,ve);continue}let Ue={};const Dt=F?null:H,Nt=To(Ae,ht,!1,G,l,T,M,_.glyphOffsetArray,de,ve,fe,We.point,Pe,Ue,he,Dt,X.projection,Y,F);Ie=Nt.useVertical,Dt&&Nt.needsFlipping&&(Ue={}),(Nt.notEnoughRoom||Ie||Nt.needsFlipping&&To(Ae,ht,!0,G,l,T,M,_.glyphOffsetArray,de,ve,fe,We.point,Pe,Ue,he,Dt,X.projection,Y,F).notEnoughRoom)&&Ji(Ae.numGlyphs,ve)}b?(_.text.dynamicLayoutVertexBuffer.updateData(ve),fe&&_.text.globeExtVertexBuffer.updateData(fe)):(_.icon.dynamicLayoutVertexBuffer.updateData(ve),fe&&_.icon.globeExtVertexBuffer.updateData(fe))}function Tn(_,l,f,b,T,M,F,G,H,Y,X,te,le,ge,pe,ve){const fe=G.glyphStartIndex+G.numGlyphs,de=G.lineStartIndex,be=G.lineStartIndex+G.lineLength,he=l.getoffsetX(G.glyphStartIndex),Ie=l.getoffsetX(fe-1),Le=Xn(_*he,f,b,T,M,F,G.segment,de,be,H,Y,X,te,le,!0,ge,pe,ve);if(!Le)return null;const Ae=Xn(_*Ie,f,b,T,M,F,G.segment,de,be,H,Y,X,te,le,!0,ge,pe,ve);return Ae?{first:Le,last:Ae}:null}function Wo(_,l,f,b){return _.writingMode===o.WritingMode.horizontal&&Math.abs(f.y-l.y)>Math.abs(f.x-l.x)*b?{useVertical:!0}:_.writingMode===o.WritingMode.vertical?l.y<f.y?{needsFlipping:!0}:null:_.flipState!==0&&function(T,M,F){const G=(M.x-T.x)*F;return G===0||Math.abs((M.y-T.y)/G)>or}(l,f,b)?_.flipState===1?{needsFlipping:!0}:null:l.x>f.x?{needsFlipping:!0}:null}function To(_,l,f,b,T,M,F,G,H,Y,X,te,le,ge,pe,ve,fe,de,be){const he=l/24,Ie=_.lineOffsetX*he,Le=_.lineOffsetY*he;let Ae=[];if(_.numGlyphs>1){const Pe=_.glyphStartIndex+_.numGlyphs,qe=_.lineStartIndex,rt=_.lineStartIndex+_.lineLength,Xe=Tn(he,G,Ie,Le,f,te,le,_,H,M,ge,ve,!1,fe,de,be);if(!Xe)return{notEnoughRoom:!0};const St=Cn(Xe.first.point,F).point,je=Cn(Xe.last.point,F).point,_t=new o.pointGeometry(St[0],St[1]),ht=new o.pointGeometry(je[0],je[1]);if(b&&!f){const We=Wo(_,_t,ht,pe);if(_.flipState=We&&We.needsFlipping?1:2,We)return We}Ae=[Xe.first];for(let We=_.glyphStartIndex+1;We<Pe-1;We++){const Ue=Xn(he*G.getoffsetX(We),Ie,Le,f,te,le,_.segment,qe,rt,H,M,ge,ve,!1,!1,fe,de,be);if(!Ue)return{notEnoughRoom:!0};Ae.push(Ue)}Ae.push(Xe.last)}else{if(b&&!f){const qe=zt(le,T).point,rt=_.lineStartIndex+_.segment+1,Xe=new o.pointGeometry(H.getx(rt),H.gety(rt)),St=zt(Xe,T),je=St.signedDistanceFromCamera>0?St.point:ji(le,Xe,qe,1,T,void 0,fe,de.canonical),_t=Wo(_,new o.pointGeometry(qe[0],qe[1]),new o.pointGeometry(je[0],je[1]),pe);if(_.flipState=_t&&_t.needsFlipping?1:2,_t)return _t}const Pe=Xn(he*G.getoffsetX(_.glyphStartIndex),Ie,Le,f,te,le,_.segment,_.lineStartIndex,_.lineStartIndex+_.lineLength,H,M,ge,ve,!1,!1,fe,de,be);if(!Pe)return{notEnoughRoom:!0};Ae=[Pe]}if(X)for(const Pe of Ae)o.updateGlobeVertexNormal(X,Y.length+0,Pe.up[0],Pe.up[1],Pe.up[2]),o.updateGlobeVertexNormal(X,Y.length+1,Pe.up[0],Pe.up[1],Pe.up[2]),o.updateGlobeVertexNormal(X,Y.length+2,Pe.up[0],Pe.up[1],Pe.up[2]),o.updateGlobeVertexNormal(X,Y.length+3,Pe.up[0],Pe.up[1],Pe.up[2]),o.addDynamicAttributes(Y,Pe.point[0],Pe.point[1],Pe.point[2],Pe.angle);else for(const Pe of Ae)o.addDynamicAttributes(Y,Pe.point[0],Pe.point[1],Pe.point[2],Pe.angle);return{}}function Ao(_,l,f,b,T){const M=b.projectTilePoint(_.x,_.y,l);if(!T)return zt(M,f,M.z);const F=T(_);return zt(new o.pointGeometry(M.x+F[0],M.y+F[1]),f,M.z+F[2])}function ji(_,l,f,b,T,M,F,G){const H=Ao(_.add(_.sub(l)._unit()),G,T,F,M).point,Y=o.sub([],f,H);return o.scaleAndAdd([],f,Y,b/o.length(Y))}function Xn(_,l,f,b,T,M,F,G,H,Y,X,te,le,ge,pe,ve,fe,de){const be=b?_-l:_+l;let he=be>0?1:-1,Ie=0;b&&(he*=-1,Ie=Math.PI),he<0&&(Ie+=Math.PI);let Le=he>0?G+F:G+F+1,Ae=T,Pe=T,qe=0,rt=0;const Xe=Math.abs(be),St=[],je=[];let _t=M;const ht=()=>{const It=Le-he;return qe===0?M:new o.pointGeometry(Y.getx(It),Y.gety(It))},We=()=>{const It=ht();return ji(It,_t||It,Pe,Xe-qe+1,X,le,ve,fe.canonical)};for(;qe+rt<=Xe;){if(Le+=he,Le<G||Le>=H)return null;if(Pe=Ae,St.push(Ae),ge&&je.push(_t||ht()),Ae=te[Le],Ae===void 0){_t=new o.pointGeometry(Y.getx(Le),Y.gety(Le));const It=Ao(_t,fe.canonical,X,ve,le);Ae=It.signedDistanceFromCamera>0?te[Le]=It.point:We()}else _t=null;qe+=rt,rt=o.distance(Pe,Ae)}_t=_t||new o.pointGeometry(Y.getx(Le),Y.gety(Le));const Ue=ht();pe&&le&&(te[Le]=Ae=te[Le]===void 0?Ae:We(),rt=o.distance(Pe,Ae));const Dt=(Xe-qe)/rt,Nt=_t.sub(Ue).mult(Dt)._add(Ue),Lt=o.sub([],Ae,Pe),Mt=o.scaleAndAdd([],Pe,Lt,Dt);let Zt=[0,0,1],an=Lt[0],tn=Lt[1];if(de&&(Zt=ve.upVector(fe.canonical,Nt.x,Nt.y),Zt[0]!==0||Zt[1]!==0||Zt[2]!==1)){const It=[1,0,0],pn=[0,1,0];It[0]=Zt[2],It[1]=0,It[2]=-Zt[0],o.cross(pn,Zt,It),o.normalize(It,It),o.normalize(pn,pn),an=o.dot(Lt,It),tn=o.dot(Lt,pn)}if(f){const It=o.cross([],Zt,Lt);o.normalize(It,It),o.scaleAndAdd(Mt,Mt,It,f*he)}const Yt=Ie+Math.atan2(tn,an);return St.push(Mt),ge&&je.push(Nt),{point:Mt,angle:Yt,path:St,tilePath:je,up:Zt}}const Zu=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ji(_,l){for(let f=0;f<_;f++){const b=l.length;l.resize(b+4),l.float32.set(Zu,4*b)}}function Ns(_,l,f){const b=l[0],T=l[1];return _[0]=f[0]*b+f[4]*T+f[12],_[1]=f[1]*b+f[5]*T+f[13],_[3]=f[3]*b+f[7]*T+f[15],_}const Pi=100;class Ba{constructor(l,f,b=new fc(l.width+200,l.height+200,25),T=new fc(l.width+200,l.height+200,25)){this.transform=l,this.grid=b,this.ignoredGrid=T,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+Pi,this.screenBottomBoundary=l.height+Pi,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.fogState=f}placeCollisionBox(l,f,b,T,M,F,G,H){let Y=b.projectedAnchorX,X=b.projectedAnchorY,te=b.projectedAnchorZ;const le=b.elevation,ge=b.tileID;if(le&&ge){const Le=l.getProjection().upVector(ge.canonical,b.tileAnchorX,b.tileAnchorY),Ae=l.getProjection().upVectorScale(ge.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;Y+=Le[0]*le*Ae,X+=Le[1]*le*Ae,te+=Le[2]*le*Ae}const pe=this.projectAndGetPerspectiveRatio(G,[Y,X,te],b.tileID,l.projection.name==="globe"||!!le||this.transform.pitch>0,l.getProjection()),ve=F*pe.perspectiveRatio,fe=(b.x1*f+T.x-b.padding)*ve+pe.point.x,de=(b.y1*f+T.y-b.padding)*ve+pe.point.y,be=(b.x2*f+T.x+b.padding)*ve+pe.point.x,he=(b.y2*f+T.y+b.padding)*ve+pe.point.y,Ie=pe.perspectiveRatio<=.55||pe.occluded;return!this.isInsideGrid(fe,de,be,he)||!M&&this.grid.hitTest(fe,de,be,he,H)||Ie?{box:[],offscreen:!1,occluded:pe.occluded}:{box:[fe,de,be,he],offscreen:this.isOffscreen(fe,de,be,he),occluded:!1}}placeCollisionCircles(l,f,b,T,M,F,G,H,Y,X,te,le,ge,pe,ve){const fe=[],de=this.transform.elevation,be=de?de.getAtTileOffsetFunc(ve,this.transform.center.lat,this.transform.worldSize,l.getProjection()):Ue=>[0,0,0],he=new o.pointGeometry(b.tileAnchorX,b.tileAnchorY),Ie=l.getProjection().projectTilePoint(b.tileAnchorX,b.tileAnchorY,ve.canonical),Le=be(he),Ae=[Ie.x+Le[0],Ie.y+Le[1],Ie.z+Le[2]],Pe=l.projection.name==="globe",qe=this.projectAndGetPerspectiveRatio(G,[Ae[0],Ae[1],Ae[2]],ve,Pe||!!de||this.transform.pitch>0,l.getProjection()),{perspectiveRatio:rt}=qe,Xe=(te?F/rt:F*rt)/o.ONE_EM,St=zt(new o.pointGeometry(Ae[0],Ae[1]),H,Ae[2]).point,je=qe.signedDistanceFromCamera>0?Tn(Xe,M,b.lineOffsetX*Xe,b.lineOffsetY*Xe,!1,St,he,b,T,H,{},de&&!te?be:null,te&&!!de,l.getProjection(),ve,te):null;let _t=!1,ht=!1,We=!0;if(je&&!qe.occluded){const Ue=.5*ge*rt+pe,Dt=new o.pointGeometry(-100,-100),Nt=new o.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Lt=new Lr,Mt=je.first,Zt=je.last;let an=[];for(let It=Mt.path.length-1;It>=1;It--)an.push(Mt.path[It]);for(let It=1;It<Zt.path.length;It++)an.push(Zt.path[It]);const tn=2.5*Ue;if(Y){const It=an.map(de&&!Pe?(pn,xn)=>{const Fn=be(xn<Mt.path.length-1?Mt.tilePath[Mt.path.length-1-xn]:Zt.tilePath[xn-Mt.path.length+2]);return pn[2]=Fn[2],Cn(pn,Y)}:pn=>Cn(pn,Y));an=It.some(pn=>pn.signedDistanceFromCamera<=0)?[]:It.map(pn=>pn.point)}let Yt=[];if(an.length>0){const It=an.map(Pn=>new o.pointGeometry(Pn[0],Pn[1]));let pn=1/0,xn=-1/0,Fn=1/0,Vn=-1/0;for(let Pn=0;Pn<It.length;Pn++)pn=Math.min(pn,It[Pn].x),Fn=Math.min(Fn,It[Pn].y),xn=Math.max(xn,It[Pn].x),Vn=Math.max(Vn,It[Pn].y);Yt=pn>=Dt.x&&xn<=Nt.x&&Fn>=Dt.y&&Vn<=Nt.y?[It]:xn<Dt.x||pn>Nt.x||Vn<Dt.y||Fn>Nt.y?[]:o.clipLine([It],Dt.x,Dt.y,Nt.x,Nt.y)}for(const It of Yt){Lt.reset(It,.25*Ue);let pn=0;pn=Lt.length<=.5*Ue?1:Math.ceil(Lt.paddedLength/tn)+1;for(let xn=0;xn<pn;xn++){const Fn=xn/Math.max(pn-1,1),Vn=Lt.lerp(Fn),Pn=Vn.x+Pi,hi=Vn.y+Pi;fe.push(Pn,hi,Ue,0);const $i=Pn-Ue,fr=hi-Ue,Wn=Pn+Ue,ei=hi+Ue;if(We=We&&this.isOffscreen($i,fr,Wn,ei),ht=ht||this.isInsideGrid($i,fr,Wn,ei),!f&&this.grid.hitTestCircle(Pn,hi,Ue,le)&&(_t=!0,!X))return{circles:[],offscreen:!1,collisionDetected:_t,occluded:!1}}}}return{circles:!X&&_t||!ht?[]:fe,offscreen:We,collisionDetected:_t,occluded:qe.occluded}}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const f=[];let b=1/0,T=1/0,M=-1/0,F=-1/0;for(const X of l){const te=new o.pointGeometry(X.x+Pi,X.y+Pi);b=Math.min(b,te.x),T=Math.min(T,te.y),M=Math.max(M,te.x),F=Math.max(F,te.y),f.push(te)}const G=this.grid.query(b,T,M,F).concat(this.ignoredGrid.query(b,T,M,F)),H={},Y={};for(const X of G){const te=X.key;if(H[te.bucketInstanceId]===void 0&&(H[te.bucketInstanceId]={}),H[te.bucketInstanceId][te.featureIndex])continue;const le=[new o.pointGeometry(X.x1,X.y1),new o.pointGeometry(X.x2,X.y1),new o.pointGeometry(X.x2,X.y2),new o.pointGeometry(X.x1,X.y2)];o.polygonIntersectsPolygon(f,le)&&(H[te.bucketInstanceId][te.featureIndex]=!0,Y[te.bucketInstanceId]===void 0&&(Y[te.bucketInstanceId]=[]),Y[te.bucketInstanceId].push(te.featureIndex))}return Y}insertCollisionBox(l,f,b,T,M){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:b,featureIndex:T,collisionGroupID:M},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,f,b,T,M){const F=f?this.ignoredGrid:this.grid,G={bucketInstanceId:b,featureIndex:T,collisionGroupID:M};for(let H=0;H<l.length;H+=4)F.insertCircle(G,l[H],l[H+1],l[H+2])}projectAndGetPerspectiveRatio(l,f,b,T,M){const F=[f[0],f[1],f[2],1];let G=!1;if(f[2]||this.transform.pitch>0){o.transformMat4$1(F,F,l);const H=M.name==="globe";this.fogState&&b&&!H&&(G=function(Y,X,te,le,ge,pe){const ve=pe.calculateFogTileMatrix(ge),fe=[X,te,le];return o.transformMat4(fe,fe,ve),ze(Y,fe,pe.pitch,pe._fov)}(this.fogState,f[0],f[1],f[2],b.toUnwrapped(),this.transform)>.9)}else Ns(F,F,l);return{point:new o.pointGeometry((F[0]/F[3]+1)/2*this.transform.width+Pi,(-F[1]/F[3]+1)/2*this.transform.height+Pi),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(M)/F[3]*.5,1.5),signedDistanceFromCamera:F[3],occluded:T&&F[2]>F[3]||G}}isOffscreen(l,f,b,T){return b<Pi||l>=this.screenRightBoundary||T<Pi||f>this.screenBottomBoundary}isInsideGrid(l,f,b,T){return b>=0&&l<this.gridRightBoundary&&T>=0&&f<this.gridBottomBoundary}getViewportMatrix(){const l=o.identity([]);return o.translate(l,l,[-100,-100,0]),l}}function Ms(_,l,f){const b=l.createTileMatrix(_,_.worldSize,f.toUnwrapped());return o.multiply(new Float32Array(16),_.projMatrix,b)}function Is(_,l,f){if(l.projection.name===f.projection.name)return _.projMatrix;const b=f.clone();return b.setProjection(l.projection),Ms(b,l.getProjection(),_)}function Zo(_,l,f){return l.name===f.projection.name?_.projMatrix:Ms(f,l,_)}class Yo{constructor(l,f,b,T){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?f:-f))):T&&b?1:0,this.placed=b}isHidden(){return this.opacity===0&&!this.placed}}class Qr{constructor(l,f,b,T,M,F=!1){this.text=new Yo(l?l.text:null,f,b,M),this.icon=new Yo(l?l.icon:null,f,T,M),this.clipped=F}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ci{constructor(l,f,b,T=!1){this.text=l,this.icon=f,this.skipFade=b,this.clipped=T}}class ii{constructor(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]}}class za{constructor(l,f,b,T,M){this.bucketInstanceId=l,this.featureIndex=f,this.sourceLayerIndex=b,this.bucketIndex=T,this.tileID=M}}class Fa{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const f=++this.maxGroupID;this.collisionGroups[l]={ID:f,predicate:b=>b.collisionGroupID===f}}return this.collisionGroups[l]}}function Ri(_,l,f,b,T){const{horizontalAlign:M,verticalAlign:F}=o.getAnchorAlignment(_),G=-(M-.5)*l,H=-(F-.5)*f,Y=o.evaluateVariableOffset(_,b);return new o.pointGeometry(G+Y[0]*T,H+Y[1]*T)}function Di(_,l,f,b,T){const M=new o.pointGeometry(_,l);return f&&M._rotate(b?T:-T),M}class mc{constructor(l,f,b,T,M){this.transform=l.clone(),this.projection=l.projection.name,this.collisionIndex=new Ba(this.transform,M),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new Fa(b),this.collisionCircleArrays={},this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(l,f,b,T){const M=b.getBucket(f),F=b.latestFeatureIndex;if(!M||!F||f.id!==M.layerIds[0])return;const G=M.layers[0].layout,H=b.collisionBoxArray,Y=Math.pow(2,this.transform.zoom-b.tileID.overscaledZ),X=b.tileSize/o.EXTENT,te=b.tileID.toUnwrapped();this.transform.setProjection(M.projection);const le=(ge=b.tileID,pe=M.getProjection(),ve=this.transform,pe.name===this.projection?ve.calculateProjMatrix(ge.toUnwrapped()):Ms(ve,pe,ge));var ge,pe,ve;const fe=G.get("text-pitch-alignment")==="map",de=G.get("text-rotation-alignment")==="map";f.compileFilter();const be=f.dynamicFilter(),he=f.dynamicFilterNeedsFeature(),Ie=this.transform.calculatePixelsToTileUnitsMatrix(b),Le=hc(le,b.tileID.canonical,fe,de,this.transform,M.getProjection(),Ie);let Ae=null;if(fe){const rt=Co(le,b.tileID.canonical,fe,de,this.transform,M.getProjection(),Ie);Ae=o.multiply([],this.transform.labelPlaneMatrix,rt)}let Pe=null;be&&b.latestFeatureIndex&&(Pe={unwrappedTileID:te,dynamicFilter:be,dynamicFilterNeedsFeature:he,featureIndex:b.latestFeatureIndex}),this.retainedQueryData[M.bucketInstanceId]=new za(M.bucketInstanceId,F,M.sourceLayerIndex,M.index,b.tileID);const qe={bucket:M,layout:G,posMatrix:le,textLabelPlaneMatrix:Le,labelToScreenMatrix:Ae,clippingData:Pe,scale:Y,textPixelRatio:X,holdingForFade:b.holdingForFade(),collisionBoxArray:H,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(M.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:o.evaluateSizeForZoom(M.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(M.sourceID)};if(T)for(const rt of M.sortKeyRanges){const{sortKey:Xe,symbolInstanceStart:St,symbolInstanceEnd:je}=rt;l.push({sortKey:Xe,symbolInstanceStart:St,symbolInstanceEnd:je,parameters:qe})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:M.symbolInstances.length,parameters:qe})}attemptAnchorPlacement(l,f,b,T,M,F,G,H,Y,X,te,le,ge,pe,ve,fe,de,be){const he=[le.textOffset0,le.textOffset1],Ie=Ri(l,b,T,he,M),Le=this.collisionIndex.placeCollisionBox(pe,M,f,Di(Ie.x,Ie.y,F,G,this.transform.angle),te,H,Y,X.predicate);if(fe){const Ae=pe.getSymbolInstanceIconSize(be,this.transform.zoom,le.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(pe,Ae,fe,Di(Ie.x,Ie.y,F,G,this.transform.angle),te,H,Y,X.predicate).box.length===0)return}if(Le.box.length>0){let Ae;return this.prevPlacement&&this.prevPlacement.variableOffsets[le.crossTileID]&&this.prevPlacement.placements[le.crossTileID]&&this.prevPlacement.placements[le.crossTileID].text&&(Ae=this.prevPlacement.variableOffsets[le.crossTileID].anchor),this.variableOffsets[le.crossTileID]={textOffset:he,width:b,height:T,anchor:l,textScale:M,prevAnchor:Ae},this.markUsedJustification(pe,l,le,ve),pe.allowVerticalPlacement&&(this.markUsedOrientation(pe,ve,le),this.placedOrientations[le.crossTileID]=ve),{shift:Ie,placedGlyphBoxes:Le}}}placeLayerBucketPart(l,f,b,T){const{bucket:M,layout:F,posMatrix:G,textLabelPlaneMatrix:H,labelToScreenMatrix:Y,clippingData:X,textPixelRatio:te,holdingForFade:le,collisionBoxArray:ge,partiallyEvaluatedTextSize:pe,partiallyEvaluatedIconSize:ve,collisionGroup:fe}=l.parameters,de=F.get("text-optional"),be=F.get("icon-optional"),he=F.get("text-allow-overlap"),Ie=F.get("icon-allow-overlap"),Le=F.get("text-rotation-alignment")==="map",Ae=F.get("text-pitch-alignment")==="map",Pe=F.get("icon-text-fit")!=="none",qe=F.get("symbol-z-order")==="viewport-y";this.transform.setProjection(M.projection);let rt=he&&(Ie||!M.hasIconData()||be),Xe=Ie&&(he||!M.hasTextData()||de);!M.collisionArrays&&ge&&M.deserializeCollisionBoxes(ge),b&&T&&M.updateCollisionDebugBuffers(this.transform.zoom,ge);const St=(je,_t,ht)=>{if(X){const Wn={zoom:this.transform.zoom,pitch:this.transform.pitch};let ei=null;if(X.dynamicFilterNeedsFeature){const On=this.retainedQueryData[M.bucketInstanceId];ei=X.featureIndex.loadFeature({featureIndex:je.featureIndex,bucketIndex:On.bucketIndex,sourceLayerIndex:On.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,X.dynamicFilter)(Wn,ei,this.retainedQueryData[M.bucketInstanceId].tileID.canonical,new o.pointGeometry(je.tileAnchorX,je.tileAnchorY),this.transform.calculateDistanceTileData(X.unwrappedTileID)))return this.placements[je.crossTileID]=new Ci(!1,!1,!1,!0),void(f[je.crossTileID]=!0)}if(f[je.crossTileID])return;if(le)return void(this.placements[je.crossTileID]=new Ci(!1,!1,!1));let We=!1,Ue=!1,Dt=!0,Nt=!1,Lt=!1,Mt=null,Zt={box:null,offscreen:null,occluded:null},an={box:null,offscreen:null,occluded:null},tn=null,Yt=null,It=null,pn=0,xn=0,Fn=0;ht.textFeatureIndex?pn=ht.textFeatureIndex:je.useRuntimeCollisionCircles&&(pn=je.featureIndex),ht.verticalTextFeatureIndex&&(xn=ht.verticalTextFeatureIndex);const Vn=Wn=>{Wn.tileID=this.retainedQueryData[M.bucketInstanceId].tileID,(this.transform.elevation||Wn.elevation)&&(Wn.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[M.bucketInstanceId].tileID,Wn.tileAnchorX,Wn.tileAnchorY):0)},Pn=ht.textBox;if(Pn){Vn(Pn);const Wn=On=>{let si=o.WritingMode.horizontal;if(M.allowVerticalPlacement&&!On&&this.prevPlacement){const Ti=this.prevPlacement.placedOrientations[je.crossTileID];Ti&&(this.placedOrientations[je.crossTileID]=Ti,si=Ti,this.markUsedOrientation(M,si,je))}return si},ei=(On,si)=>{if(M.allowVerticalPlacement&&je.numVerticalGlyphVertices>0&&ht.verticalTextBox){for(const Ti of M.writingModes)if(Ti===o.WritingMode.vertical?(Zt=si(),an=Zt):Zt=On(),Zt&&Zt.box&&Zt.box.length)break}else Zt=On()};if(F.get("text-variable-anchor")){let On=F.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[je.crossTileID]){const Hn=this.prevPlacement.variableOffsets[je.crossTileID];On.indexOf(Hn.anchor)>0&&(On=On.filter(Bi=>Bi!==Hn.anchor),On.unshift(Hn.anchor))}const si=(Hn,Bi,so)=>{const er=M.getSymbolInstanceTextSize(pe,je,this.transform.zoom,_t),Ni=(Hn.x2-Hn.x1)*er+2*Hn.padding,Po=(Hn.y2-Hn.y1)*er+2*Hn.padding,zr=Pe&&!Ie?Bi:null;zr&&Vn(zr);let yi={box:[],offscreen:!1,occluded:!1};const hr=he?2*On.length:On.length;for(let Fr=0;Fr<hr;++Fr){const tr=this.attemptAnchorPlacement(On[Fr%On.length],Hn,Ni,Po,er,Le,Ae,te,G,fe,Fr>=On.length,je,_t,M,so,zr,pe,ve);if(tr&&(yi=tr.placedGlyphBoxes,yi&&yi.box&&yi.box.length)){We=!0,Mt=tr.shift;break}}return yi};ei(()=>si(Pn,ht.iconBox,o.WritingMode.horizontal),()=>{const Hn=ht.verticalTextBox;return Hn&&Vn(Hn),M.allowVerticalPlacement&&!(Zt&&Zt.box&&Zt.box.length)&&je.numVerticalGlyphVertices>0&&Hn?si(Hn,ht.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Zt&&(We=Zt.box,Dt=Zt.offscreen,Nt=Zt.occluded);const Ti=Wn(Zt&&Zt.box);if(!We&&this.prevPlacement){const Hn=this.prevPlacement.variableOffsets[je.crossTileID];Hn&&(this.variableOffsets[je.crossTileID]=Hn,this.markUsedJustification(M,Hn.anchor,je,Ti))}}else{const On=(si,Ti)=>{const Hn=M.getSymbolInstanceTextSize(pe,je,this.transform.zoom,_t),Bi=this.collisionIndex.placeCollisionBox(M,Hn,si,new o.pointGeometry(0,0),he,te,G,fe.predicate);return Bi&&Bi.box&&Bi.box.length&&(this.markUsedOrientation(M,Ti,je),this.placedOrientations[je.crossTileID]=Ti),Bi};ei(()=>On(Pn,o.WritingMode.horizontal),()=>{const si=ht.verticalTextBox;return M.allowVerticalPlacement&&je.numVerticalGlyphVertices>0&&si?(Vn(si),On(si,o.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Wn(Zt&&Zt.box&&Zt.box.length)}}if(tn=Zt,We=tn&&tn.box&&tn.box.length>0,Dt=tn&&tn.offscreen,Nt=tn&&tn.occluded,je.useRuntimeCollisionCircles){const Wn=M.text.placedSymbolArray.get(je.centerJustifiedTextSymbolIndex>=0?je.centerJustifiedTextSymbolIndex:je.verticalPlacedTextSymbolIndex),ei=o.evaluateSizeForFeature(M.textSizeData,pe,Wn),On=F.get("text-padding");Yt=this.collisionIndex.placeCollisionCircles(M,he,Wn,M.lineVertexArray,M.glyphOffsetArray,ei,G,H,Y,b,Ae,fe.predicate,je.collisionCircleDiameter*ei/o.ONE_EM,On,this.retainedQueryData[M.bucketInstanceId].tileID),We=he||Yt.circles.length>0&&!Yt.collisionDetected,Dt=Dt&&Yt.offscreen,Nt=Yt.occluded}if(ht.iconFeatureIndex&&(Fn=ht.iconFeatureIndex),ht.iconBox){const Wn=ei=>{Vn(ei);const On=Pe&&Mt?Di(Mt.x,Mt.y,Le,Ae,this.transform.angle):new o.pointGeometry(0,0),si=M.getSymbolInstanceIconSize(ve,this.transform.zoom,je.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(M,si,ei,On,Ie,te,G,fe.predicate)};an&&an.box&&an.box.length&&ht.verticalIconBox?(It=Wn(ht.verticalIconBox),Ue=It.box.length>0):(It=Wn(ht.iconBox),Ue=It.box.length>0),Dt=Dt&&It.offscreen,Lt=It.occluded}const hi=de||je.numHorizontalGlyphVertices===0&&je.numVerticalGlyphVertices===0,$i=be||je.numIconVertices===0;if(hi||$i?$i?hi||(Ue=Ue&&We):We=Ue&&We:Ue=We=Ue&&We,We&&tn&&tn.box&&this.collisionIndex.insertCollisionBox(tn.box,F.get("text-ignore-placement"),M.bucketInstanceId,an&&an.box&&xn?xn:pn,fe.ID),Ue&&It&&this.collisionIndex.insertCollisionBox(It.box,F.get("icon-ignore-placement"),M.bucketInstanceId,Fn,fe.ID),Yt&&(We&&this.collisionIndex.insertCollisionCircles(Yt.circles,F.get("text-ignore-placement"),M.bucketInstanceId,pn,fe.ID),b)){const Wn=M.bucketInstanceId;let ei=this.collisionCircleArrays[Wn];ei===void 0&&(ei=this.collisionCircleArrays[Wn]=new ii);for(let On=0;On<Yt.circles.length;On+=4)ei.circles.push(Yt.circles[On+0]),ei.circles.push(Yt.circles[On+1]),ei.circles.push(Yt.circles[On+2]),ei.circles.push(Yt.collisionDetected?1:0)}const fr=M.projection.name!=="globe";rt=rt&&(fr||!Nt),Xe=Xe&&(fr||!Lt),this.placements[je.crossTileID]=new Ci(We||rt,Ue||Xe,Dt||M.justReloaded),f[je.crossTileID]=!0};if(qe){const je=M.getSortedSymbolIndexes(this.transform.angle);for(let _t=je.length-1;_t>=0;--_t){const ht=je[_t];St(M.symbolInstances.get(ht),ht,M.collisionArrays[ht])}}else for(let je=l.symbolInstanceStart;je<l.symbolInstanceEnd;je++)St(M.symbolInstances.get(je),je,M.collisionArrays[je]);if(b&&M.bucketInstanceId in this.collisionCircleArrays){const je=this.collisionCircleArrays[M.bucketInstanceId];o.invert(je.invProjMatrix,G),je.viewportMatrix=this.collisionIndex.getViewportMatrix()}M.justReloaded=!1}markUsedJustification(l,f,b,T){let M;M=T===o.WritingMode.vertical?b.verticalPlacedTextSymbolIndex:{left:b.leftJustifiedTextSymbolIndex,center:b.centerJustifiedTextSymbolIndex,right:b.rightJustifiedTextSymbolIndex}[o.getAnchorJustification(f)];const F=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex,b.verticalPlacedTextSymbolIndex];for(const G of F)G>=0&&(l.text.placedSymbolArray.get(G).crossTileID=M>=0&&G!==M?0:b.crossTileID)}markUsedOrientation(l,f,b){const T=f===o.WritingMode.horizontal||f===o.WritingMode.horizontalOnly?f:0,M=f===o.WritingMode.vertical?f:0,F=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex].filter(G=>G!==-1);for(const G of F)l.text.placedSymbolArray.get(G).placedOrientation=T;b.verticalPlacedTextSymbolIndex!==-1&&(l.text.placedSymbolArray.get(b.verticalPlacedTextSymbolIndex).placedOrientation=M)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const f=this.prevPlacement;let b=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;const T=f?f.symbolFadeChange(l):1,M=f?f.opacities:{},F=f?f.variableOffsets:{},G=f?f.placedOrientations:{};for(const H in this.placements){const Y=this.placements[H],X=M[H];X?(this.opacities[H]=new Qr(X,T,Y.text,Y.icon,null,Y.clipped),b=b||Y.text!==X.text.placed||Y.icon!==X.icon.placed):(this.opacities[H]=new Qr(null,T,Y.text,Y.icon,Y.skipFade,Y.clipped),b=b||Y.text||Y.icon)}for(const H in M){const Y=M[H];if(!this.opacities[H]){const X=new Qr(Y,T,!1,!1);X.isHidden()||(this.opacities[H]=X,b=b||Y.text.placed||Y.icon.placed)}}for(const H in F)this.variableOffsets[H]||!this.opacities[H]||this.opacities[H].isHidden()||(this.variableOffsets[H]=F[H]);for(const H in G)this.placedOrientations[H]||!this.opacities[H]||this.opacities[H].isHidden()||(this.placedOrientations[H]=G[H]);b?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:l)}updateLayerOpacities(l,f){const b={};for(const T of f){const M=T.getBucket(l);M&&T.latestFeatureIndex&&l.id===M.layerIds[0]&&this.updateBucketOpacities(M,b,T.collisionBoxArray)}}updateBucketOpacities(l,f,b){l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const T=l.layers[0].layout,M=!!l.layers[0].dynamicFilter(),F=new Qr(null,0,!1,!1,!0),G=T.get("text-allow-overlap"),H=T.get("icon-allow-overlap"),Y=T.get("text-variable-anchor"),X=T.get("text-rotation-alignment")==="map",te=T.get("text-pitch-alignment")==="map",le=T.get("icon-text-fit")!=="none",ge=new Qr(null,0,G&&(H||!l.hasIconData()||T.get("icon-optional")),H&&(G||!l.hasTextData()||T.get("text-optional")),!0);!l.collisionArrays&&b&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(b);const pe=(fe,de,be)=>{for(let he=0;he<de/4;he++)fe.opacityVertexArray.emplaceBack(be)};let ve=0;for(let fe=0;fe<l.symbolInstances.length;fe++){const de=l.symbolInstances.get(fe),{numHorizontalGlyphVertices:be,numVerticalGlyphVertices:he,crossTileID:Ie}=de;let Le=this.opacities[Ie];f[Ie]?Le=F:Le||(Le=ge,this.opacities[Ie]=Le),f[Ie]=!0;const Ae=be>0||he>0,Pe=de.numIconVertices>0,qe=this.placedOrientations[de.crossTileID],rt=qe===o.WritingMode.vertical,Xe=qe===o.WritingMode.horizontal||qe===o.WritingMode.horizontalOnly;if(!Ae&&!Pe||Le.isHidden()||ve++,Ae){const St=ar(Le.text);pe(l.text,be,rt?Or:St),pe(l.text,he,Xe?Or:St);const je=Le.text.isHidden();[de.rightJustifiedTextSymbolIndex,de.centerJustifiedTextSymbolIndex,de.leftJustifiedTextSymbolIndex].forEach(We=>{We>=0&&(l.text.placedSymbolArray.get(We).hidden=je||rt?1:0)}),de.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(de.verticalPlacedTextSymbolIndex).hidden=je||Xe?1:0);const _t=this.variableOffsets[de.crossTileID];_t&&this.markUsedJustification(l,_t.anchor,de,qe);const ht=this.placedOrientations[de.crossTileID];ht&&(this.markUsedJustification(l,"left",de,ht),this.markUsedOrientation(l,ht,de))}if(Pe){const St=ar(Le.icon);de.placedIconSymbolIndex>=0&&(pe(l.icon,de.numIconVertices,rt?Or:St),l.icon.placedSymbolArray.get(de.placedIconSymbolIndex).hidden=Le.icon.isHidden()),de.verticalPlacedIconSymbolIndex>=0&&(pe(l.icon,de.numVerticalIconVertices,Xe?Or:St),l.icon.placedSymbolArray.get(de.verticalPlacedIconSymbolIndex).hidden=Le.icon.isHidden())}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const St=l.collisionArrays[fe];if(St){let je=new o.pointGeometry(0,0),_t=!0;if(St.textBox||St.verticalTextBox){if(Y){const We=this.variableOffsets[Ie];We?(je=Ri(We.anchor,We.width,We.height,We.textOffset,We.textScale),X&&je._rotate(te?this.transform.angle:-this.transform.angle)):_t=!1}M&&(_t=!Le.clipped),St.textBox&&eo(l.textCollisionBox.collisionVertexArray,Le.text.placed,!_t||rt,je.x,je.y),St.verticalTextBox&&eo(l.textCollisionBox.collisionVertexArray,Le.text.placed,!_t||Xe,je.x,je.y)}const ht=_t&&Boolean(!Xe&&St.verticalIconBox);St.iconBox&&eo(l.iconCollisionBox.collisionVertexArray,Le.icon.placed,ht,le?je.x:0,le?je.y:0),St.verticalIconBox&&eo(l.iconCollisionBox.collisionVertexArray,Le.icon.placed,!ht,le?je.x:0,le?je.y:0)}}}if(l.fullyClipped=ve===0,l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){const fe=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=fe.invProjMatrix,l.placementViewportMatrix=fe.viewportMatrix,l.collisionCircleArray=fe.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,f){const b=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*b>l}setStale(){this.stale=!0}}function eo(_,l,f,b,T){_.emplaceBack(l?1:0,f?1:0,b||0,T||0),_.emplaceBack(l?1:0,f?1:0,b||0,T||0),_.emplaceBack(l?1:0,f?1:0,b||0,T||0),_.emplaceBack(l?1:0,f?1:0,b||0,T||0)}const ui=Math.pow(2,25),Xo=Math.pow(2,24),Va=Math.pow(2,17),Jo=Math.pow(2,16),vi=Math.pow(2,9),Ua=Math.pow(2,8),ja=Math.pow(2,1);function ar(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const l=_.placed?1:0,f=Math.floor(127*_.opacity);return f*ui+l*Xo+f*Va+l*Jo+f*vi+l*Ua+f*ja+l}const Or=0;class Ls{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&l.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,f,b,T,M){const F=this._bucketParts;for(;this._currentTileIndex<l.length;)if(f.getBucketParts(F,T,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,M())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,F.sort((G,H)=>G.sortKey-H.sortKey));this._currentPartIndex<F.length;){const G=F[this._currentPartIndex];if(f.placeLayerBucketPart(G,this._seenCrossTileIDs,b,G.symbolInstanceStart===0),this._currentPartIndex++,M())return!0}return!1}}class Yu{constructor(l,f,b,T,M,F,G,H){this.placement=new mc(l,M,F,G,H),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=b,this._showCollisionBoxes=T,this._done=!1}isDone(){return this._done}continuePlacement(l,f,b){const T=o.exported.now(),M=()=>{const F=o.exported.now()-T;return!this._forceFullPlacement&&F>2};for(;this._currentPlacementIndex>=0;){const F=f[l[this._currentPlacementIndex]],G=this.placement.collisionIndex.transform.zoom;if(F.type==="symbol"&&(!F.minzoom||F.minzoom<=G)&&(!F.maxzoom||F.maxzoom>G)){if(this._inProgressLayer||(this._inProgressLayer=new Ls(F)),this._inProgressLayer.continuePlacement(b[F.source],this.placement,this._showCollisionBoxes,F,M))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const Ga=512/o.EXTENT/2;class ko{constructor(l,f,b){this.tileID=l,this.indexedSymbolInstances={},this.bucketInstanceId=b;for(let T=0;T<f.length;T++){const M=f.get(T),F=M.key;this.indexedSymbolInstances[F]||(this.indexedSymbolInstances[F]=[]),this.indexedSymbolInstances[F].push({crossTileID:M.crossTileID,coord:this.getScaledCoordinates(M,l)})}}getScaledCoordinates(l,f){const b=Ga/Math.pow(2,f.canonical.z-this.tileID.canonical.z);return{x:Math.floor((f.canonical.x*o.EXTENT+l.tileAnchorX)*b),y:Math.floor((f.canonical.y*o.EXTENT+l.tileAnchorY)*b)}}findMatches(l,f,b){const T=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z);for(let M=0;M<l.length;M++){const F=l.get(M);if(F.crossTileID)continue;const G=this.indexedSymbolInstances[F.key];if(!G)continue;const H=this.getScaledCoordinates(F,f);for(const Y of G)if(Math.abs(Y.coord.x-H.x)<=T&&Math.abs(Y.coord.y-H.y)<=T&&!b[Y.crossTileID]){b[Y.crossTileID]=!0,F.crossTileID=Y.crossTileID;break}}}}class Xu{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class gc{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const f=Math.round((l-this.lng)/360);if(f!==0)for(const b in this.indexes){const T=this.indexes[b],M={};for(const F in T){const G=T[F];G.tileID=G.tileID.unwrapTo(G.tileID.wrap+f),M[G.tileID.key]=G}this.indexes[b]=M}this.lng=l}addBucket(l,f,b){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let M=0;M<f.symbolInstances.length;M++)f.symbolInstances.get(M).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const T=this.usedCrossTileIDs[l.overscaledZ];for(const M in this.indexes){const F=this.indexes[M];if(Number(M)>l.overscaledZ)for(const G in F){const H=F[G];H.tileID.isChildOf(l)&&H.findMatches(f.symbolInstances,l,T)}else{const G=F[l.scaledTo(Number(M)).key];G&&G.findMatches(f.symbolInstances,l,T)}}for(let M=0;M<f.symbolInstances.length;M++){const F=f.symbolInstances.get(M);F.crossTileID||(F.crossTileID=b.generate(),T[F.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new ko(l,f.symbolInstances,f.bucketInstanceId),!0}removeBucketCrossTileIDs(l,f){for(const b in f.indexedSymbolInstances)for(const T of f.indexedSymbolInstances[b])delete this.usedCrossTileIDs[l][T.crossTileID]}removeStaleBuckets(l){let f=!1;for(const b in this.indexes){const T=this.indexes[b];for(const M in T)l[T[M].bucketInstanceId]||(this.removeBucketCrossTileIDs(b,T[M]),delete T[M],f=!0)}return f}}class to{constructor(){this.layerIndexes={},this.crossTileIDs=new Xu,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,f,b,T){let M=this.layerIndexes[l.id];M===void 0&&(M=this.layerIndexes[l.id]=new gc);let F=!1;const G={};T.name!=="globe"&&M.handleWrapJump(b);for(const H of f){const Y=H.getBucket(l);Y&&l.id===Y.layerIds[0]&&(Y.bucketInstanceId||(Y.bucketInstanceId=++this.maxBucketInstanceId),M.addBucket(H.tileID,Y,this.crossTileIDs)&&(F=!0),G[Y.bucketInstanceId]=!0)}return M.removeStaleBuckets(G)&&(F=!0),F}pruneUnusedLayers(l){const f={};l.forEach(b=>{f[b]=!0});for(const b in this.layerIndexes)f[b]||delete this.layerIndexes[b]}}const Qi=(_,l)=>o.emitValidationErrors(_,l&&l.filter(f=>f.identifier!=="source.canvas")),Os=o.pick(rn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Pr=o.pick(rn,["setCenter","setZoom","setBearing","setPitch"]),Ha={version:8,layers:[],sources:{}},Ps={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class lr extends o.Evented{constructor(l,f={}){super(),this.map=l,this.dispatcher=new fn(ln(),this),this.imageManager=new we,this.imageManager.setEventedParent(this),this.glyphManager=new o.GlyphManager(l._requestManager,f.localFontFamily?o.LocalGlyphMode.all:f.localIdeographFontFamily?o.LocalGlyphMode.ideographs:o.LocalGlyphMode.none,f.localFontFamily||f.localIdeographFontFamily),this.crossTileSymbolIndex=new to,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new o.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());const b=this;this._rtlTextPluginCallback=lr.registerForPluginStateChange(T=>{b.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:T.pluginStatus,pluginURL:T.pluginURL},(M,F)=>{if(o.triggerPluginCompletionEvent(M),F&&F.every(G=>G))for(const G in b._sourceCaches){const H=b._sourceCaches[G],Y=H.getSource().type;Y!=="vector"&&Y!=="geojson"||H.reload()}})}),this.on("data",T=>{if(T.dataType!=="source"||T.sourceDataType!=="metadata")return;const M=this.getSource(T.sourceId);if(M&&M.vectorLayerIds)for(const F in this._layers){const G=this._layers[F];G.source===M.id&&this._validateLayer(G)}})}loadURL(l,f={}){this.fire(new o.Event("dataloading",{dataType:"style"}));const b=typeof f.validate=="boolean"?f.validate:!o.isMapboxURL(l);l=this.map._requestManager.normalizeStyleURL(l,f.accessToken);const T=this.map._requestManager.transformRequest(l,o.ResourceType.Style);this._request=o.getJSON(T,(M,F)=>{this._request=null,M?this.fire(new o.ErrorEvent(M)):F&&this._load(F,b)})}loadJSON(l,f={}){this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.exported.frame(()=>{this._request=null,this._load(l,f.validate!==!1)})}loadEmpty(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(Ha,!1)}_updateLayerCount(l,f){const b=f?1:-1;l.is3D()&&(this._num3DLayers+=b),l.type==="circle"&&(this._numCircleLayers+=b),l.type==="symbol"&&(this._numSymbolLayers+=b)}_load(l,f){if(f&&Qi(this,o.validateStyle(l)))return;this._loaded=!0,this.stylesheet=o.clone$1(l),this._updateMapProjection();for(const T in l.sources)this.addSource(T,l.sources[T],{validate:!1});this._changed=!1,l.sprite?this._loadSprite(l.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(l.glyphs);const b=Nn(this.stylesheet.layers);this._order=b.map(T=>T.id),this._layers={},this._serializedLayers={};for(let T of b)T=o.createStyleLayer(T),T.setEventedParent(this,{layer:{id:T.id}}),this._layers[T.id]=T,this._serializedLayers[T.id]=T.serialize(),this._updateLayerCount(T,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Fe(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(l){l?this.stylesheet.projection=l:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(l){this._spriteRequest=function(f,b,T){let M,F,G;const H=o.exported.devicePixelRatio>1?"@2x":"";let Y=o.getJSON(b.transformRequest(b.normalizeSpriteURL(f,H,".json"),o.ResourceType.SpriteJSON),(le,ge)=>{Y=null,G||(G=le,M=ge,te())}),X=o.getImage(b.transformRequest(b.normalizeSpriteURL(f,H,".png"),o.ResourceType.SpriteImage),(le,ge)=>{X=null,G||(G=le,F=ge,te())});function te(){if(G)T(G);else if(M&&F){const le=o.exported.getImageData(F),ge={};for(const pe in M){const{width:ve,height:fe,x:de,y:be,sdf:he,pixelRatio:Ie,stretchX:Le,stretchY:Ae,content:Pe}=M[pe],qe=new o.RGBAImage({width:ve,height:fe});o.RGBAImage.copy(le,qe,{x:de,y:be},{x:0,y:0},{width:ve,height:fe}),ge[pe]={data:qe,pixelRatio:Ie,sdf:he,stretchX:Le,stretchY:Ae,content:Pe}}T(null,ge)}}return{cancel(){Y&&(Y.cancel(),Y=null),X&&(X.cancel(),X=null)}}}(l,this.map._requestManager,(f,b)=>{if(this._spriteRequest=null,f)this.fire(new o.ErrorEvent(f));else if(b)for(const T in b)this.imageManager.addImage(T,b[T]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new o.Event("data",{dataType:"style"}))})}_validateLayer(l){const f=this.getSource(l.source);if(!f)return;const b=l.sourceLayer;b&&(f.type==="geojson"||f.vectorLayerIds&&f.vectorLayerIds.indexOf(b)===-1)&&this.fire(new o.ErrorEvent(new Error(`Source layer "${b}" does not exist on source "${f.id}" as specified by style layer "${l.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this._sourceCaches)if(!this._sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(l){const f=[];for(const b of l){const T=this._layers[b];T.type!=="custom"&&f.push(T.serialize())}return f}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const l in this._sourceCaches)if(this._sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(l){return!!this.terrain&&Ps[l.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(l){if(!this._loaded)return;const f=this._changed;if(this._changed){const T=Object.keys(this._updatedLayers),M=Object.keys(this._removedLayers);(T.length||M.length)&&this._updateWorkerLayers(T,M);for(const F in this._updatedSources){const G=this._updatedSources[F];G==="reload"?this._reloadSource(F):G==="clear"&&this._clearSource(F)}this._updateTilesForChangedImages();for(const F in this._updatedPaintProps)this._layers[F].updateTransitions(l);this.light.updateTransitions(l),this.fog&&this.fog.updateTransitions(l),this._resetUpdates()}const b={};for(const T in this._sourceCaches){const M=this._sourceCaches[T];b[T]=M.used,M.used=!1}for(const T of this._order){const M=this._layers[T];if(M.recalculate(l,this._availableImages),!M.isHidden(l.zoom)){const G=this._getLayerSourceCache(M);G&&(G.used=!0)}const F=this.map.painter;if(F){const G=M.getProgramIds();if(!G)continue;const H=M.getProgramConfiguration(l.zoom);for(const Y of G)F.useProgram(Y,H)}}for(const T in b){const M=this._sourceCaches[T];b[T]!==M.used&&M.getSource().fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:M.getSource().id}))}this.light.recalculate(l),this.terrain&&this.terrain.recalculate(l),this.fog&&this.fog.recalculate(l),this.z=l.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),f&&this.fire(new o.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const f in this._sourceCaches)this._sourceCaches[f].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateWorkerLayers(l,f){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(l),removedIds:f})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(l){if(this._checkLoaded(),Qi(this,o.validateStyle(l)))return!1;(l=o.clone$1(l)).layers=Nn(l.layers);const f=function(T,M){if(!T)return[{command:rn.setStyle,args:[M]}];let F=[];try{if(!v(T.version,M.version))return[{command:rn.setStyle,args:[M]}];v(T.center,M.center)||F.push({command:rn.setCenter,args:[M.center]}),v(T.zoom,M.zoom)||F.push({command:rn.setZoom,args:[M.zoom]}),v(T.bearing,M.bearing)||F.push({command:rn.setBearing,args:[M.bearing]}),v(T.pitch,M.pitch)||F.push({command:rn.setPitch,args:[M.pitch]}),v(T.sprite,M.sprite)||F.push({command:rn.setSprite,args:[M.sprite]}),v(T.glyphs,M.glyphs)||F.push({command:rn.setGlyphs,args:[M.glyphs]}),v(T.transition,M.transition)||F.push({command:rn.setTransition,args:[M.transition]}),v(T.light,M.light)||F.push({command:rn.setLight,args:[M.light]}),v(T.fog,M.fog)||F.push({command:rn.setFog,args:[M.fog]}),v(T.projection,M.projection)||F.push({command:rn.setProjection,args:[M.projection]});const G={},H=[];(function(te,le,ge,pe){let ve;for(ve in le=le||{},te=te||{})te.hasOwnProperty(ve)&&(le.hasOwnProperty(ve)||zn(ve,ge,pe));for(ve in le)le.hasOwnProperty(ve)&&(te.hasOwnProperty(ve)?v(te[ve],le[ve])||(te[ve].type==="geojson"&&le[ve].type==="geojson"&&vr(te,le,ve)?ge.push({command:rn.setGeoJSONSourceData,args:[ve,le[ve].data]}):Ir(ve,le,ge,pe)):Bn(ve,le,ge))})(T.sources,M.sources,H,G);const Y=[];T.layers&&T.layers.forEach(te=>{te.source&&G[te.source]?F.push({command:rn.removeLayer,args:[te.id]}):Y.push(te)});let X=T.terrain;X&&G[X.source]&&(F.push({command:rn.setTerrain,args:[void 0]}),X=void 0),F=F.concat(H),v(X,M.terrain)||F.push({command:rn.setTerrain,args:[M.terrain]}),function(te,le,ge){le=le||[];const pe=(te=te||[]).map(yr),ve=le.map(yr),fe=te.reduce(oi,{}),de=le.reduce(oi,{}),be=pe.slice(),he=Object.create(null);let Ie,Le,Ae,Pe,qe,rt,Xe;for(Ie=0,Le=0;Ie<pe.length;Ie++)Ae=pe[Ie],de.hasOwnProperty(Ae)?Le++:(ge.push({command:rn.removeLayer,args:[Ae]}),be.splice(be.indexOf(Ae,Le),1));for(Ie=0,Le=0;Ie<ve.length;Ie++)Ae=ve[ve.length-1-Ie],be[be.length-1-Ie]!==Ae&&(fe.hasOwnProperty(Ae)?(ge.push({command:rn.removeLayer,args:[Ae]}),be.splice(be.lastIndexOf(Ae,be.length-Le),1)):Le++,rt=be[be.length-Ie],ge.push({command:rn.addLayer,args:[de[Ae],rt]}),be.splice(be.length-Ie,0,Ae),he[Ae]=!0);for(Ie=0;Ie<ve.length;Ie++)if(Ae=ve[Ie],Pe=fe[Ae],qe=de[Ae],!he[Ae]&&!v(Pe,qe))if(v(Pe.source,qe.source)&&v(Pe["source-layer"],qe["source-layer"])&&v(Pe.type,qe.type)){for(Xe in lt(Pe.layout,qe.layout,ge,Ae,null,rn.setLayoutProperty),lt(Pe.paint,qe.paint,ge,Ae,null,rn.setPaintProperty),v(Pe.filter,qe.filter)||ge.push({command:rn.setFilter,args:[Ae,qe.filter]}),v(Pe.minzoom,qe.minzoom)&&v(Pe.maxzoom,qe.maxzoom)||ge.push({command:rn.setLayerZoomRange,args:[Ae,qe.minzoom,qe.maxzoom]}),Pe)Pe.hasOwnProperty(Xe)&&Xe!=="layout"&&Xe!=="paint"&&Xe!=="filter"&&Xe!=="metadata"&&Xe!=="minzoom"&&Xe!=="maxzoom"&&(Xe.indexOf("paint.")===0?lt(Pe[Xe],qe[Xe],ge,Ae,Xe.slice(6),rn.setPaintProperty):v(Pe[Xe],qe[Xe])||ge.push({command:rn.setLayerProperty,args:[Ae,Xe,qe[Xe]]}));for(Xe in qe)qe.hasOwnProperty(Xe)&&!Pe.hasOwnProperty(Xe)&&Xe!=="layout"&&Xe!=="paint"&&Xe!=="filter"&&Xe!=="metadata"&&Xe!=="minzoom"&&Xe!=="maxzoom"&&(Xe.indexOf("paint.")===0?lt(Pe[Xe],qe[Xe],ge,Ae,Xe.slice(6),rn.setPaintProperty):v(Pe[Xe],qe[Xe])||ge.push({command:rn.setLayerProperty,args:[Ae,Xe,qe[Xe]]}))}else ge.push({command:rn.removeLayer,args:[Ae]}),rt=be[be.lastIndexOf(Ae)+1],ge.push({command:rn.addLayer,args:[qe,rt]})}(Y,M.layers,F)}catch(G){console.warn("Unable to compute style diff:",G),F=[{command:rn.setStyle,args:[M]}]}return F}(this.serialize(),l).filter(T=>!(T.command in Pr));if(f.length===0)return!1;const b=f.filter(T=>!(T.command in Os));if(b.length>0)throw new Error(`Unimplemented: ${b.map(T=>T.command).join(", ")}.`);return f.forEach(T=>{T.command!=="setTransition"&&T.command!=="setProjection"&&this[T.command].apply(this,T.args)}),this.stylesheet=l,this._updateMapProjection(),!0}addImage(l,f){return this.getImage(l)?this.fire(new o.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(l,f),this._afterImageUpdated(l),this)}updateImage(l,f){this.imageManager.updateImage(l,f)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){return this.getImage(l)?(this.imageManager.removeImage(l),this._afterImageUpdated(l),this):this.fire(new o.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(l,f,b={}){if(this._checkLoaded(),this.getSource(l)!==void 0)throw new Error("There is already a source with this ID");if(!f.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(f).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(f.type)>=0&&this._validate(o.validateSource,`sources.${l}`,f,null,b))return;this.map&&this.map._collectResourceTiming&&(f.collectResourceTiming=!0);const T=Ge(l,f,this.dispatcher,this);T.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(l),source:T.serialize(),sourceId:l}));const M=F=>{const G=(F?"symbol:":"other:")+l,H=this._sourceCaches[G]=new o.SourceCache(G,T,F);(F?this._symbolSourceCaches:this._otherSourceCaches)[l]=H,H.style=this,H.onAdd(this.map)};M(!1),f.type!=="vector"&&f.type!=="geojson"||M(!0),T.onAdd&&T.onAdd(this.map),this._changed=!0}removeSource(l){this._checkLoaded();const f=this.getSource(l);if(!f)throw new Error("There is no source with this ID");for(const T in this._layers)if(this._layers[T].source===l)return this.fire(new o.ErrorEvent(new Error(`Source "${l}" cannot be removed while layer "${T}" is using it.`)));if(this.terrain&&this.terrain.get().source===l)return this.fire(new o.ErrorEvent(new Error(`Source "${l}" cannot be removed while terrain is using it.`)));const b=this._getSourceCaches(l);for(const T of b)delete this._sourceCaches[T.id],delete this._updatedSources[T.id],T.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:T.getSource().id})),T.setEventedParent(null),T.clearTiles();return delete this._otherSourceCaches[l],delete this._symbolSourceCaches[l],f.setEventedParent(null),f.onRemove&&f.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(l,f){this._checkLoaded(),this.getSource(l).setData(f),this._changed=!0}getSource(l){const f=this._getSourceCache(l);return f&&f.getSource()}_getSources(){const l=[];for(const f in this._otherSourceCaches){const b=this._getSourceCache(f);b&&l.push(b.getSource())}return l}addLayer(l,f,b={}){this._checkLoaded();const T=l.id;if(this.getLayer(T))return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${T}" already exists on this map`)));let M;if(l.type==="custom"){if(Qi(this,o.validateCustomStyleLayer(l)))return;M=o.createStyleLayer(l)}else{if(typeof l.source=="object"&&(this.addSource(T,l.source),l=o.clone$1(l),l=o.extend(l,{source:T})),this._validate(o.validateLayer,`layers.${T}`,l,{arrayIndex:-1},b))return;M=o.createStyleLayer(l),this._validateLayer(M),M.setEventedParent(this,{layer:{id:T}}),this._serializedLayers[M.id]=M.serialize(),this._updateLayerCount(M,!0)}const F=f?this._order.indexOf(f):this._order.length;if(f&&F===-1)return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${f}" does not exist on this map.`)));this._order.splice(F,0,T),this._layerOrderChanged=!0,this._layers[T]=M;const G=this._getLayerSourceCache(M);if(this._removedLayers[T]&&M.source&&G&&M.type!=="custom"){const H=this._removedLayers[T];delete this._removedLayers[T],H.type!==M.type?this._updatedSources[M.source]="clear":(this._updatedSources[M.source]="reload",G.pause())}this._updateLayer(M),M.onAdd&&M.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(l,f){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===f)return;const b=this._order.indexOf(l);this._order.splice(b,1);const T=f?this._order.indexOf(f):this._order.length;f&&T===-1?this.fire(new o.ErrorEvent(new Error(`Layer with id "${f}" does not exist on this map.`))):(this._order.splice(T,0,l),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(l){this._checkLoaded();const f=this._layers[l];if(!f)return void this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be removed.`)));f.setEventedParent(null),this._updateLayerCount(f,!1);const b=this._order.indexOf(l);this._order.splice(b,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=f,delete this._layers[l],delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],f.onRemove&&f.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(l){return this._layers[l]}hasLayer(l){return l in this._layers}hasLayerType(l){for(const f in this._layers)if(this._layers[f].type===l)return!0;return!1}setLayerZoomRange(l,f,b){this._checkLoaded();const T=this.getLayer(l);T?T.minzoom===f&&T.maxzoom===b||(f!=null&&(T.minzoom=f),b!=null&&(T.maxzoom=b),this._updateLayer(T)):this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(l,f,b={}){this._checkLoaded();const T=this.getLayer(l);if(T){if(!v(T.filter,f))return f==null?(T.filter=void 0,void this._updateLayer(T)):void(this._validate(o.validateFilter,`layers.${T.id}.filter`,f,{layerType:T.type},b)||(T.filter=o.clone$1(f),this._updateLayer(T)))}else this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be filtered.`)))}getFilter(l){const f=this.getLayer(l);return f&&o.clone$1(f.filter)}setLayoutProperty(l,f,b,T={}){this._checkLoaded();const M=this.getLayer(l);M?v(M.getLayoutProperty(f),b)||(M.setLayoutProperty(f,b,T),this._updateLayer(M)):this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(l,f){const b=this.getLayer(l);if(b)return b.getLayoutProperty(f);this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style.`)))}setPaintProperty(l,f,b,T={}){this._checkLoaded();const M=this.getLayer(l);M?v(M.getPaintProperty(f),b)||(M.setPaintProperty(f,b,T)&&this._updateLayer(M),this._changed=!0,this._updatedPaintProps[l]=!0):this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(l,f){const b=this.getLayer(l);return b&&b.getPaintProperty(f)}setFeatureState(l,f){this._checkLoaded();const b=l.source,T=l.sourceLayer,M=this.getSource(b);if(!M)return void this.fire(new o.ErrorEvent(new Error(`The source '${b}' does not exist in the map's style.`)));const F=M.type;if(F==="geojson"&&T)return void this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(F==="vector"&&!T)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));l.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided.")));const G=this._getSourceCaches(b);for(const H of G)H.setFeatureState(T,l.id,f)}removeFeatureState(l,f){this._checkLoaded();const b=l.source,T=this.getSource(b);if(!T)return void this.fire(new o.ErrorEvent(new Error(`The source '${b}' does not exist in the map's style.`)));const M=T.type,F=M==="vector"?l.sourceLayer:void 0;if(M==="vector"&&!F)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(f&&typeof l.id!="string"&&typeof l.id!="number")return void this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const G=this._getSourceCaches(b);for(const H of G)H.removeFeatureState(F,l.id,f)}getFeatureState(l){this._checkLoaded();const f=l.source,b=l.sourceLayer,T=this.getSource(f);if(T){if(T.type!=="vector"||b)return l.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(f)[0].getFeatureState(b,l.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)))}getTransition(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const l={};for(const f in this._sourceCaches){const b=this._sourceCaches[f].getSource();l[b.id]||(l[b.id]=b.serialize())}return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:l,layers:this._serializeLayers(this._order)},f=>f!==void 0)}_updateLayer(l){this._updatedLayers[l.id]=!0;const f=this._getLayerSourceCache(l);l.source&&!this._updatedSources[l.source]&&f&&f.getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",f.pause()),this._changed=!0,l.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(l){const f=F=>this._layers[F].type==="fill-extrusion",b={},T=[];for(let F=this._order.length-1;F>=0;F--){const G=this._order[F];if(f(G)){b[G]=F;for(const H of l){const Y=H[G];if(Y)for(const X of Y)T.push(X)}}}T.sort((F,G)=>G.intersectionZ-F.intersectionZ);const M=[];for(let F=this._order.length-1;F>=0;F--){const G=this._order[F];if(f(G))for(let H=T.length-1;H>=0;H--){const Y=T[H].feature;if(b[Y.layer.id]<F)break;M.push(Y),T.pop()}else for(const H of l){const Y=H[G];if(Y)for(const X of Y)M.push(X.feature)}}return M}queryRenderedFeatures(l,f,b){f&&f.filter&&this._validate(o.validateFilter,"queryRenderedFeatures.filter",f.filter,null,f);const T={};if(f&&f.layers){if(!Array.isArray(f.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const H of f.layers){const Y=this._layers[H];if(!Y)return this.fire(new o.ErrorEvent(new Error(`The layer '${H}' does not exist in the map's style and cannot be queried for features.`))),[];T[Y.source]=!0}}const M=[];f.availableImages=this._availableImages;const F=f&&f.layers?f.layers.some(H=>{const Y=this.getLayer(H);return Y&&Y.is3D()}):this.has3DLayers(),G=at.createFromScreenPoints(l,b);for(const H in this._sourceCaches){const Y=this._sourceCaches[H].getSource().id;f.layers&&!T[Y]||M.push(Ze(this._sourceCaches[H],this._layers,this._serializedLayers,G,f,b,F,!!this.map._showQueryGeometry))}return this.placement&&M.push(function(H,Y,X,te,le,ge,pe){const ve={},fe=ge.queryRenderedSymbols(te),de=[];for(const be of Object.keys(fe).map(Number))de.push(pe[be]);de.sort(Vt);for(const be of de){const he=be.featureIndex.lookupSymbolFeatures(fe[be.bucketInstanceId],Y,be.bucketIndex,be.sourceLayerIndex,le.filter,le.layers,le.availableImages,H);for(const Ie in he){const Le=ve[Ie]=ve[Ie]||[],Ae=he[Ie];Ae.sort((Pe,qe)=>{const rt=be.featureSortOrder;if(rt){const Xe=rt.indexOf(Pe.featureIndex);return rt.indexOf(qe.featureIndex)-Xe}return qe.featureIndex-Pe.featureIndex});for(const Pe of Ae)Le.push(Pe)}}for(const be in ve)ve[be].forEach(he=>{const Ie=he.feature,Le=X(H[be]).getFeatureState(Ie.layer["source-layer"],Ie.id);Ie.source=Ie.layer.source,Ie.layer["source-layer"]&&(Ie.sourceLayer=Ie.layer["source-layer"]),Ie.state=Le});return ve}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),G.screenGeometry,f,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(M)}querySourceFeatures(l,f){f&&f.filter&&this._validate(o.validateFilter,"querySourceFeatures.filter",f.filter,null,f);const b=this._getSourceCaches(l);let T=[];for(const M of b)T=T.concat(yt(M,f));return T}addSourceType(l,f,b){return lr.getSourceType(l)?b(new Error(`A source type called "${l}" already exists.`)):(lr.setSourceType(l,f),f.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:f.workerSourceURL},b):b(null,null))}getLight(){return this.light.getLight()}setLight(l,f={}){this._checkLoaded();const b=this.light.getLight();let T=!1;for(const F in l)if(!v(l[F],b[F])){T=!0;break}if(!T)return;const M=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(l,f),this.light.updateTransitions(M)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(l,f=1){if(this._checkLoaded(),!l)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(f===1){if(typeof l.source=="object"){const b="terrain-dem-src";this.addSource(b,l.source),l=o.clone$1(l),l=o.extend(l,{source:b})}if(this._validate(o.validateTerrain,"terrain",l))return}if(!this.terrain||this.terrain&&f!==this.terrain.drapeRenderMode)this._createTerrain(l,f);else{const b=this.terrain,T=b.get();for(const M of Object.keys(o.spec.terrain))!l.hasOwnProperty(M)&&o.spec.terrain[M].default&&(l[M]=o.spec.terrain[M].default);for(const M in l)if(!v(l[M],T[M])){b.set(l),this.stylesheet.terrain=l;const F=this._setTransitionParameters({duration:0});b.updateTransitions(F);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(l){const f=this.fog=new un(l,this.map.transform);this.stylesheet.fog=l;const b=this._setTransitionParameters({duration:0});f.updateTransitions(b)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const l of this.map._markers)l._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(l){if(this._checkLoaded(),!l)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const f=this.fog,b=f.get();Object.keys(l).length===0&&f.set(l);for(const T in l)if(!v(l[T],b[T])){f.set(l),this.stylesheet.fog=l;const M=this._setTransitionParameters({duration:0});f.updateTransitions(M);break}}else this._createFog(l);this._markersNeedUpdate=!0}_setTransitionParameters(l){return{now:o.exported.now(),transition:o.extend(l,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const l=this._order.filter(b=>this.isLayerDraped(this._layers[b])),f=this._order.filter(b=>!this.isLayerDraped(this._layers[b]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...l),this._drapedFirstOrder.push(...f)}_createTerrain(l,f){const b=this.terrain=new ke(l,f);this.stylesheet.terrain=l,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const T=this._setTransitionParameters({duration:0});b.updateTransitions(T)}_force3DLayerUpdate(){for(const l in this._layers){const f=this._layers[l];f.type==="fill-extrusion"&&this._updateLayer(f)}}_forceSymbolLayerUpdate(){for(const l in this._layers){const f=this._layers[l];f.type==="symbol"&&this._updateLayer(f)}}_validate(l,f,b,T,M={}){return(!M||M.validate!==!1)&&Qi(this,l.call(o.validateStyle,o.extend({key:f,style:this.serialize(),value:b,styleSpec:o.spec},T)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this._sourceCaches)this._sourceCaches[l].clearTiles(),this._sourceCaches[l].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(l){const f=this._getSourceCaches(l);for(const b of f)b.clearTiles()}_reloadSource(l){const f=this._getSourceCaches(l);for(const b of f)b.resume(),b.reload()}_reloadSources(){for(const l of this._getSources())l.reload&&l.reload()}_updateSources(l){for(const f in this._sourceCaches)this._sourceCaches[f].update(l)}_generateCollisionBoxes(){for(const l in this._sourceCaches){const f=this._sourceCaches[l];f.resume(),f.reload()}}_updatePlacement(l,f,b,T,M=!1){let F=!1,G=!1;const H={};for(const Y of this._order){const X=this._layers[Y];if(X.type!=="symbol")continue;if(!H[X.source]){const le=this._getLayerSourceCache(X);if(!le)continue;H[X.source]=le.getRenderableIds(!0).map(ge=>le.getTileByID(ge)).sort((ge,pe)=>pe.tileID.overscaledZ-ge.tileID.overscaledZ||(ge.tileID.isLessThan(pe.tileID)?-1:1))}const te=this.crossTileSymbolIndex.addLayer(X,H[X.source],l.center.lng,l.projection);F=F||te}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),M=M||this._layerOrderChanged||b===0,this._layerOrderChanged&&this.fire(new o.Event("neworder")),(M||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.exported.now(),l.zoom))&&(this.pauseablePlacement=new Yu(l,this._order,M,f,b,T,this.placement,this.fog&&l.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,H),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.exported.now()),G=!0),F&&this.pauseablePlacement.placement.setStale()),G||F)for(const Y of this._order){const X=this._layers[Y];X.type==="symbol"&&this.placement.updateLayerOpacities(X,H[X.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.exported.now())}_releaseSymbolFadeTiles(){for(const l in this._sourceCaches)this._sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,f,b){this.imageManager.getImages(f.icons,b),this._updateTilesForChangedImages();const T=M=>{M&&M.setDependencies(f.tileID.key,f.type,f.icons)};T(this._otherSourceCaches[f.source]),T(this._symbolSourceCaches[f.source])}getGlyphs(l,f,b){this.glyphManager.getGlyphs(f.stacks,b)}getResource(l,f,b){return o.makeRequest(f,b)}_getSourceCache(l){return this._otherSourceCaches[l]}_getLayerSourceCache(l){return l.type==="symbol"?this._symbolSourceCaches[l.source]:this._otherSourceCaches[l.source]}_getSourceCaches(l){const f=[];return this._otherSourceCaches[l]&&f.push(this._otherSourceCaches[l]),this._symbolSourceCaches[l]&&f.push(this._symbolSourceCaches[l]),f}_isSourceCacheLoaded(l){const f=this._getSourceCaches(l);return f.length===0?(this.fire(new o.ErrorEvent(new Error(`There is no source with ID '${l}'`))),!1):f.every(b=>b.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}lr.getSourceType=function(_){return He[_]},lr.setSourceType=function(_,l){He[_]=l},lr.registerForPluginStateChange=o.registerForPluginStateChange;var _c=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,Ds="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",vc=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,qa=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,yc=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let Ka={},Wa={};const no=[];cr(_c,no),cr(vc,no),cr(qa,no),cr(yc,no),Ka=Mn("",vc),Wa=Mn(yc,qa);const Za=Mn(`
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),Ya=_c,Bs=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var Xa={background:Mn(`uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Mn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Mn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Mn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Mn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Mn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Mn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Mn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Mn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Mn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Mn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Mn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Mn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Mn(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);float roof_radiance=clamp(u_lightpos.z,0.0,1.0);roof_radiance=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roof_radiance);v_roof_color.rgb+=clamp(color.rgb*roof_radiance*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:Mn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:Mn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Mn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Mn(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
#ifdef RENDER_LINE_GRADIENT
highp vec4 out_color=texture2D(u_gradient_image,v_uv.xy);
#else
vec4 out_color=color;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);}}
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Mn(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Mn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:Mn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:Mn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:Mn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:Mn(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=u_skirt_height*u_skirt_height*wireframeOffset;
#endif
vec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:Mn(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Mn(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ds),skyboxGradient:Mn(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ds),skyboxCapture:Mn(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Mn(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;
#ifdef GLOBE_POLES
vec3 up_vector=normalize(globe_pos)*u_tile_up_scale;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Mn(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function cr(_,l){const f=_.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let b of f)if(b=b.trim(),b[0]==="#"&&b.includes("if")&&!b.includes("endif")){b=b.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const T=b.split(" ");for(const M of T)l.includes(M)||l.push(M)}}function Mn(_,l){const f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,b=l.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),T={},M=[...no];return cr(_,M),cr(l,M),{fragmentSource:_=_.replace(f,(F,G,H,Y,X)=>(T[X]=!0,G==="define"?`
#ifndef HAS_UNIFORM_u_${X}
varying ${H} ${Y} ${X};
#else
uniform ${H} ${Y} u_${X};
#endif
`:`
#ifdef HAS_UNIFORM_u_${X}
    ${H} ${Y} ${X} = u_${X};
#endif
`)),vertexSource:l=l.replace(f,(F,G,H,Y,X)=>{const te=Y==="float"?"vec2":"vec4",le=X.match(/color/)?"color":te;return T[X]?G==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${H} ${te} a_${X};
varying ${H} ${Y} ${X};
#else
uniform ${H} ${Y} u_${X};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = a_${X};
#else
    ${H} ${Y} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = unpack_mix_${le}(a_${X}, u_${X}_t);
#else
    ${H} ${Y} ${X} = u_${X};
#endif
`:G==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${H} ${te} a_${X};
#else
uniform ${H} ${Y} u_${X};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${H} ${Y} ${X} = a_${X};
#else
    ${H} ${Y} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${H} ${Y} ${X} = unpack_mix_${le}(a_${X}, u_${X}_t);
#else
    ${H} ${Y} ${X} = u_${X};
#endif
`}),staticAttributes:b,usedDefines:M}}class Qo{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(l,f,b,T,M,F,G){this.context=l;let H=this.boundPaintVertexBuffers.length!==T.length;for(let X=0;!H&&X<T.length;X++)this.boundPaintVertexBuffers[X]!==T[X]&&(H=!0);let Y=this.boundDynamicVertexBuffers.length!==G.length;for(let X=0;!Y&&X<G.length;X++)this.boundDynamicVertexBuffers[X]!==G[X]&&(Y=!0);if(!l.extVertexArrayObject||!this.vao||this.boundProgram!==f||this.boundLayoutVertexBuffer!==b||H||Y||this.boundIndexBuffer!==M||this.boundVertexOffset!==F)this.freshBind(f,b,T,M,F,G);else{l.bindVertexArrayOES.set(this.vao);for(const X of G)X&&X.bind();M&&M.dynamicDraw&&M.bind()}}freshBind(l,f,b,T,M,F){let G;const H=l.numAttributes,Y=this.context,X=Y.gl;if(Y.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Y.extVertexArrayObject.createVertexArrayOES(),Y.bindVertexArrayOES.set(this.vao),G=0,this.boundProgram=l,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=b,this.boundIndexBuffer=T,this.boundVertexOffset=M,this.boundDynamicVertexBuffers=F;else{G=Y.currentNumAttributes||0;for(let te=H;te<G;te++)X.disableVertexAttribArray(te)}f.enableAttributes(X,l),f.bind(),f.setVertexAttribPointers(X,l,M);for(const te of b)te.enableAttributes(X,l),te.bind(),te.setVertexAttribPointers(X,l,M);for(const te of F)te&&(te.enableAttributes(X,l),te.bind(),te.setVertexAttribPointers(X,l,M));T&&T.bind(),Y.currentNumAttributes=H}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function zs(_,l){const f=Math.pow(2,l.canonical.z),b=l.canonical.y;return[new o.MercatorCoordinate(0,b/f).toLngLat().lat,new o.MercatorCoordinate(0,(b+1)/f).toLngLat().lat]}function Fs(_,l,f,b,T,M,F){const G=_.context,H=G.gl,Y=f.fbo;if(!Y)return;_.prepareDrawTile();const X=_.useProgram("hillshade");G.activeTexture.set(H.TEXTURE0),H.bindTexture(H.TEXTURE_2D,Y.colorAttachment.get());const te=((ve,fe,de,be)=>{const he=de.paint.get("hillshade-shadow-color"),Ie=de.paint.get("hillshade-highlight-color"),Le=de.paint.get("hillshade-accent-color");let Ae=de.paint.get("hillshade-illumination-direction")*(Math.PI/180);de.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ae-=ve.transform.angle);const Pe=!ve.options.moving;return{u_matrix:be||ve.transform.calculateProjMatrix(fe.tileID.toUnwrapped(),Pe),u_image:0,u_latrange:zs(0,fe.tileID),u_light:[de.paint.get("hillshade-exaggeration"),Ae],u_shadow:he,u_highlight:Ie,u_accent:Le}})(_,f,b,_.terrain?l.projMatrix:null);_.prepareDrawProgram(G,X,l.toUnwrapped());const{tileBoundsBuffer:le,tileBoundsIndexBuffer:ge,tileBoundsSegments:pe}=_.getTileBoundsBuffers(f);X.draw(G,H.TRIANGLES,T,M,F,o.CullFaceMode.disabled,te,b.id,le,ge,pe)}function Vs(_,l,f){if(!l.needsDEMTextureUpload)return;const b=_.context,T=b.gl;b.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||_.getTileTexture(f.stride);const M=f.getPixels();l.demTexture?l.demTexture.update(M,{premultiply:!1}):l.demTexture=new o.Texture(b,M,T.RGBA,{premultiply:!1}),l.needsDEMTextureUpload=!1}function bc(_,l,f,b,T,M){const F=_.context,G=F.gl;if(!l.dem)return;const H=l.dem;if(F.activeTexture.set(G.TEXTURE1),Vs(_,l,H),!l.demTexture)return;l.demTexture.bind(G.NEAREST,G.CLAMP_TO_EDGE);const Y=H.dim;F.activeTexture.set(G.TEXTURE0);let X=l.fbo;if(!X){const pe=new o.Texture(F,{width:Y,height:Y,data:null},G.RGBA);pe.bind(G.LINEAR,G.CLAMP_TO_EDGE),X=l.fbo=F.createFramebuffer(Y,Y,!0),X.colorAttachment.set(pe.texture)}F.bindFramebuffer.set(X.framebuffer),F.viewport.set([0,0,Y,Y]);const{tileBoundsBuffer:te,tileBoundsIndexBuffer:le,tileBoundsSegments:ge}=_.getMercatorTileBoundsBuffers();_.useProgram("hillshadePrepare").draw(F,G.TRIANGLES,b,T,M,o.CullFaceMode.disabled,((pe,ve)=>{const fe=ve.stride,de=o.create();return o.ortho(de,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(de,de,[0,-o.EXTENT,0]),{u_matrix:de,u_image:1,u_dimension:[fe,fe],u_zoom:pe.overscaledZ,u_unpack:ve.unpackVector}})(l.tileID,H),f.id,te,le,ge),l.needsHillshadePrepare=!1}const Us=_=>({u_matrix:new o.UniformMatrix4f(_),u_image0:new o.Uniform1i(_),u_skirt_height:new o.Uniform1f(_)}),Ja=(_,l)=>({u_matrix:_,u_image0:0,u_skirt_height:l}),js=(_,l,f,b,T,M,F,G,H,Y,X,te,le,ge)=>({u_proj_matrix:Float32Array.from(_),u_globe_matrix:l,u_normalize_matrix:Float32Array.from(b),u_merc_matrix:f,u_zoom_transition:T,u_merc_center:M,u_image0:0,u_frustum_tl:F,u_frustum_tr:G,u_frustum_br:H,u_frustum_bl:Y,u_globe_pos:X,u_globe_radius:te,u_viewport:le,u_grid_matrix:ge?Float32Array.from(ge):new Float32Array(9)});function es(_,l){return _!=null&&l!=null&&!(!_.hasData()||!l.hasData())&&_.demTexture!=null&&l.demTexture!=null&&_.tileID.key!==l.tileID.key}const Dr=new class{constructor(){this.operations={}}newMorphing(_,l,f,b,T){if(_ in this.operations){const M=this.operations[_];M.to.tileID.key!==f.tileID.key&&(M.queued=f)}else this.operations[_]={startTime:b,phase:0,duration:T,from:l,to:f,queued:null}}getMorphValuesForProxy(_){if(!(_ in this.operations))return null;const l=this.operations[_];return{from:l.from,to:l.to,phase:l.phase}}update(_){for(const l in this.operations){const f=this.operations[l];for(f.phase=(_-f.startTime)/f.duration;f.phase>=1||!this._validOp(f);)if(!this._nextOp(f,_)){delete this.operations[l];break}}}_nextOp(_,l){return!!_.queued&&(_.from=_.to,_.to=_.queued,_.queued=null,_.phase=0,_.startTime=l,!0)}_validOp(_){return _.from.hasData()&&_.to.hasData()}},Ro={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Rn(_,l){const f=1<<_.z;return!l&&(_.x===0||_.x===f-1)||_.y===0||_.y===f-1}const $o=_=>({u_matrix:_});function Qa(_,l,f,b,T){if(T>0){const M=o.exported.now(),F=(M-_.timeAdded)/T,G=l?(M-l.timeAdded)/T:-1,H=f.getSource(),Y=b.coveringZoomLevel({tileSize:H.tileSize,roundZoom:H.roundZoom}),X=!l||Math.abs(l.tileID.overscaledZ-Y)>Math.abs(_.tileID.overscaledZ-Y),te=X&&_.refreshedUponExpiration?1:o.clamp(X?F:1-G,0,1);return _.refreshedUponExpiration&&F>=1&&(_.refreshedUponExpiration=!1),l?{opacity:1,mix:1-te}:{opacity:te,mix:0}}return{opacity:1,mix:0}}class xc extends o.SourceCache{constructor(l){const f={type:"raster-dem",maxzoom:l.transform.maxZoom},b=new fn(ln(),null),T=Ge("mock-dem",f,b,l.style);super("mock-dem",T,!1),T.setEventedParent(this),this._sourceLoaded=!0}_loadTile(l,f){l.state="loaded",f(null)}}class wc extends o.SourceCache{constructor(l){const f=Ge("proxy",{type:"geojson",maxzoom:l.transform.maxZoom},new fn(ln(),null),l.style);super("proxy",f,!1),f.setEventedParent(this),this.map=this.getSource().map=l,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(l,f,b){if(l.freezeTileCoverage)return;this.transform=l;const T=l.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((M,F)=>{if(M[F.key]="",!this._tiles[F.key]){const G=new o.Tile(F,this._source.tileSize*F.overscaleFactor(),l.tileZoom);G.state="loaded",this._tiles[F.key]=G}return M},{});for(const M in this._tiles)M in T||(this.freeFBO(M),this._tiles[M].unloadVectorData(),delete this._tiles[M])}freeFBO(l){const f=this.proxyCachedFBO[l];if(f!==void 0){const b=Object.values(f);this.renderCachePool.push(...b),delete this.proxyCachedFBO[l]}}deallocRenderCache(){this.renderCache.forEach(l=>l.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Gs extends o.OverscaledTileID{constructor(l,f,b){super(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,l.canonical.y),this.proxyTileKey=f,this.projMatrix=b}}class Ec extends o.Elevation{constructor(l,f){super(),this.painter=l,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[b,T,M]=function(H){const Y=new o.StructArrayLayout4i8,X=new o.StructArrayLayout3ui6,te=131;Y.reserve(17161),X.reserve(33800);const le=o.EXTENT/128,ge=o.EXTENT+le/2,pe=ge+le;for(let fe=-le;fe<pe;fe+=le)for(let de=-le;de<pe;de+=le){const be=de<0||de>ge||fe<0||fe>ge?24575:0,he=o.clamp(Math.round(de),0,o.EXTENT),Ie=o.clamp(Math.round(fe),0,o.EXTENT);Y.emplaceBack(he+be,Ie,he,Ie)}const ve=(fe,de)=>{const be=de*te+fe;X.emplaceBack(be+1,be,be+te),X.emplaceBack(be+te,be+te+1,be+1)};for(let fe=1;fe<129;fe++)for(let de=1;de<129;de++)ve(de,fe);return[0,129].forEach(fe=>{for(let de=0;de<130;de++)ve(de,fe),ve(fe,de)}),[Y,X,32768]}(),F=l.context;this.gridBuffer=F.createVertexBuffer(b,o.boundsAttributes.members),this.gridIndexBuffer=F.createIndexBuffer(T),this.gridSegments=o.SegmentVector.simpleSegment(0,0,b.length,T.length),this.gridNoSkirtSegments=o.SegmentVector.simpleSegment(0,0,b.length,M),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new wc(f.map),this.orthoMatrix=o.create(),o.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,o.EXTENT,0,o.EXTENT,0,1);const G=F.gl;this._overlapStencilMode=new o.StencilMode({func:G.GEQUAL,mask:255},0,255,G.KEEP,G.KEEP,G.REPLACE),this._previousZoom=l.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=f,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new xc(f.map)}set style(l){l.on("data",this._onStyleDataEvent.bind(this)),l.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=l,this._checkRenderCacheEfficiency()}update(l,f,b){if(l&&l.terrain){this._style!==l&&(this.style=l),this.enabled=!0;const T=l.terrain.properties;this.sourceCache=l.terrain.drapeRenderMode===0?this._mockSourceCache:l._getSourceCache(T.get("source")),this._exaggeration=T.get("exaggeration");const M=()=>{this.sourceCache.used&&o.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const F=this.getScaledDemTileSize();this.sourceCache.update(f,F,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,M(),this._initializing=!0),M(),f.updateElevation(!b),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(f),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(l){this._findCoveringTileCache[l]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const l=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||l.efficiency!==100&&o.warnOnce(`Terrain render cache efficiency is not optimal (${l.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${l.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(l){l.coord&&l.dataType==="source"?this._clearRenderCacheForTile(l.sourceCacheId,l.coord):l.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const l in this._style._sourceCaches)this._style._sourceCaches[l].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(l=>l.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const l=2*this.proxySourceCache.getSource().tileSize;return[l,l]}set useVertexMorphing(l){this._useVertexMorphing=l}updateTileBinding(l){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const f=this.proxySourceCache,b=this.painter.transform;this._initializing&&(this._initializing=b._centerAltitude===0&&this.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(b.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const T=this.proxyCoords=f.getIds().map(H=>{const Y=f.getTileByID(H).tileID;return Y.projMatrix=b.calculateProjMatrix(Y.toUnwrapped()),Y});(function(H,Y){const X=Y.transform.pointCoordinate(Y.transform.getCameraPoint()),te=new o.pointGeometry(X.x,X.y);H.sort((le,ge)=>{if(ge.overscaledZ-le.overscaledZ)return ge.overscaledZ-le.overscaledZ;const pe=new o.pointGeometry(le.canonical.x+(1<<le.canonical.z)*le.wrap,le.canonical.y),ve=new o.pointGeometry(ge.canonical.x+(1<<ge.canonical.z)*ge.wrap,ge.canonical.y),fe=te.mult(1<<le.canonical.z);return fe.x-=.5,fe.y-=.5,fe.distSqr(pe)-fe.distSqr(ve)})})(T,this.painter),this._previousZoom=b.zoom;const M=this.proxyToSource||{};this.proxyToSource={},T.forEach(H=>{this.proxyToSource[H.key]={}}),this.terrainTileForTile={};const F=this._style._sourceCaches;for(const H in F){const Y=F[H];if(!Y.used||(Y!==this.sourceCache&&this.resetTileLookupCache(Y.id),this._setupProxiedCoordsForOrtho(Y,l[H],M),Y.usedForTerrain))continue;const X=l[H];Y.getSource().reparseOverscaled&&this._assignTerrainTiles(X)}this.proxiedCoords[f.id]=T.map(H=>new Gs(H,H.key,this.orthoMatrix)),this._assignTerrainTiles(T),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(M),this.renderingToTexture=!1,this._updateTimestamp=o.exported.now();const G={};this._visibleDemTiles=[];for(const H of this.proxyCoords){const Y=this.terrainTileForTile[H.key];if(!Y)continue;const X=Y.tileID.key;X in G||(this._visibleDemTiles.push(Y),G[X]=X)}}_assignTerrainTiles(l){this._initializing||l.forEach(f=>{if(this.terrainTileForTile[f.key])return;const b=this._findTileCoveringTileID(f,this.sourceCache);b&&(this.terrainTileForTile[f.key]=b)})}_prepareDEMTextures(){const l=this.painter.context,f=l.gl;for(const b in this.terrainTileForTile){const T=this.terrainTileForTile[b],M=T.dem;!M||T.demTexture&&!T.needsDEMTextureUpload||(l.activeTexture.set(f.TEXTURE1),Vs(this.painter,T,M))}}_prepareDemTileUniforms(l,f,b,T){if(!f||f.demTexture==null)return!1;const M=l.tileID.canonical,F=Math.pow(2,f.tileID.canonical.z-M.z),G=T||"";return b[`u_dem_tl${G}`]=[M.x*F%1,M.y*F%1],b[`u_dem_scale${G}`]=F,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const l=this.painter.context,f=l.gl;if(!this._emptyDepthBufferTexture){const b=new o.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new o.Texture(l,b,f.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let l=0;const f=this._visibleDemTiles.reduce((b,T)=>{if(!T.dem)return b;const M=T.dem.tree.minimums[0];return M>0&&l++,b+M},0);return l?f/l:0}_updateEmptyDEMTexture(){const l=this.painter.context,f=l.gl;l.activeTexture.set(f.TEXTURE2);const b=this._getLoadedAreaMinimum(),T=new o.RGBAImage({width:1,height:1},new Uint8Array(o.DEMData.pack(b,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let M=this._emptyDEMTexture;return M?M.update(T,{premultiply:!1}):M=this._emptyDEMTexture=new o.Texture(l,T,f.RGBA,{premultiply:!1}),M}setupElevationDraw(l,f,b){const T=this.painter.context,M=T.gl,F=(G=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:o.DEMData.getUnpackVector(G),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var G;F.u_dem_size=this.sourceCache.getSource().tileSize,F.u_exaggeration=this.exaggeration();let H=null,Y=null,X=1;if(b&&b.morphing&&this._useVertexMorphing){const te=b.morphing.srcDemTile,le=b.morphing.dstDemTile;X=b.morphing.phase,te&&le&&(this._prepareDemTileUniforms(l,te,F,"_prev")&&(Y=te),this._prepareDemTileUniforms(l,le,F)&&(H=le))}if(Y&&H?(T.activeTexture.set(M.TEXTURE2),H.demTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE,M.NEAREST),T.activeTexture.set(M.TEXTURE4),Y.demTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE,M.NEAREST),F.u_dem_lerp=X):(H=this.terrainTileForTile[l.tileID.key],T.activeTexture.set(M.TEXTURE2),(this._prepareDemTileUniforms(l,H,F)?H.demTexture:this.emptyDEMTexture).bind(M.NEAREST,M.CLAMP_TO_EDGE)),T.activeTexture.set(M.TEXTURE3),b&&b.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE),this._depthFBO&&(F.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE),F.u_depth_size_inv=[1,1]),b&&b.useMeterToDem&&H){const te=(1<<H.tileID.canonical.z)*o.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;F.u_meter_to_dem=te}if(b&&b.labelPlaneMatrixInv&&(F.u_label_plane_matrix_inv=b.labelPlaneMatrixInv),f.setTerrainUniformValues(T,F),this.painter.transform.projection.name==="globe"){const te=this.globeUniformValues(this.painter.transform,l.tileID.canonical,b&&b.useDenormalizedUpVectorScale);f.setGlobeUniformValues(T,te)}}globeUniformValues(l,f,b){const T=l.projection;return{u_tile_tl_up:T.upVector(f,0,0),u_tile_tr_up:T.upVector(f,o.EXTENT,0),u_tile_br_up:T.upVector(f,o.EXTENT,o.EXTENT),u_tile_bl_up:T.upVector(f,0,o.EXTENT),u_tile_up_scale:b?o.GLOBE_METERS_TO_ECEF:T.upVectorScale(f,l.center.lat,l.worldSize).metersToTile}}renderToBackBuffer(l){const f=this.painter,b=this.painter.context;l.length!==0&&(b.bindFramebuffer.set(null),b.viewport.set([0,0,f.width,f.height]),f.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(T,M,F,G,H){if(T.transform.projection.name==="globe")(function(Y,X,te,le,ge){const pe=Y.context,ve=pe.gl;let fe,de;const be=Y.options.showTerrainWireframe?2:0,he=Y.transform,Ie=o.globeUseCustomAntiAliasing(Y,pe,he),Le=(We,Ue)=>{if(de===We)return;const Dt=[Ro[We],"PROJECTION_GLOBE_VIEW"];Ie&&Dt.push("CUSTOM_ANTIALIASING"),Ue&&Dt.push(Ro[be]),fe=Y.useProgram("globeRaster",null,Dt),de=We},Ae=Y.colorModeForRenderPass(),Pe=new o.DepthMode(ve.LEQUAL,o.DepthMode.ReadWrite,Y.depthRangeFor3D);Dr.update(ge);const qe=o.calculateGlobeMercatorMatrix(he),rt=[o.mercatorXfromLng(he.center.lng),o.mercatorYfromLat(he.center.lat)],Xe=be?[!1,!0]:[!1],St=Y.globeSharedBuffers,je=[he.width*o.exported.devicePixelRatio,he.height*o.exported.devicePixelRatio],_t=Float32Array.from(he.globeMatrix),ht={useDenormalizedUpVectorScale:!0};if(Xe.forEach(We=>{de=-1;const Ue=We?ve.LINES:ve.TRIANGLES;for(const Dt of le){const Nt=te.getTile(Dt),Lt=o.StencilMode.disabled,Mt=X.prevTerrainTileForTile[Dt.key],Zt=X.terrainTileForTile[Dt.key];es(Mt,Zt)&&Dr.newMorphing(Dt.key,Mt,Zt,ge,250),pe.activeTexture.set(ve.TEXTURE0),Nt.texture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE);const an=Dr.getMorphValuesForProxy(Dt.key),tn=an?1:0;an&&o.extend$1(ht,{morphing:{srcDemTile:an.from,dstDemTile:an.to,phase:o.easeCubicInOut(an.phase)}});const Yt=o.tileCornersToBounds(Dt.canonical),It=o.getLatitudinalLod(Yt.getCenter().lat),pn=o.getGridMatrix(Dt.canonical,Yt,It,he.worldSize/he._pixelsPerMercatorPixel),xn=o.globeNormalizeECEF(o.globeTileBounds(Dt.canonical)),Fn=js(he.projMatrix,_t,qe,xn,o.globeToMercatorTransition(he.zoom),rt,he.frustumCorners.TL,he.frustumCorners.TR,he.frustumCorners.BR,he.frustumCorners.BL,he.globeCenterInViewSpace,he.globeRadius,je,pn);if(Le(tn,We),X.setupElevationDraw(Nt,fe,ht),Y.prepareDrawProgram(pe,fe,Dt.toUnwrapped()),St){const[Vn,Pn,hi]=We?St.getWirefameBuffers(Y.context,It):St.getGridBuffers(It);fe.draw(pe,Ue,Pe,Lt,Ae,o.CullFaceMode.backCCW,Fn,"globe_raster",Vn,Pn,hi)}}}),St){const We=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Ie&&We.push("CUSTOM_ANTIALIASING"),fe=Y.useProgram("globeRaster",null,We);for(const Ue of le){const{x:Dt,y:Nt,z:Lt}=Ue.canonical,Mt=Nt===0,Zt=Nt===(1<<Lt)-1,[an,tn,Yt,It]=St.getPoleBuffers(Lt);if(It&&(Mt||Zt)){const pn=te.getTile(Ue);pe.activeTexture.set(ve.TEXTURE0),pn.texture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE);let xn=o.globePoleMatrixForTile(Lt,Dt,he);const Fn=o.globeNormalizeECEF(o.globeTileBounds(Ue.canonical)),Vn=(Pn,hi)=>Pn.draw(pe,ve.TRIANGLES,Pe,o.StencilMode.disabled,Ae,o.CullFaceMode.disabled,js(he.projMatrix,xn,xn,Fn,0,rt,he.frustumCorners.TL,he.frustumCorners.TR,he.frustumCorners.BR,he.frustumCorners.BL,he.globeCenterInViewSpace,he.globeRadius,je),"globe_pole_raster",hi,Yt,It);X.setupElevationDraw(pn,fe,ht),Y.prepareDrawProgram(pe,fe,Ue.toUnwrapped()),Mt&&Vn(fe,an),Zt&&(xn=o.scale(o.create(),xn,[1,-1,1]),Vn(fe,tn))}}}})(T,M,F,G,H);else{const Y=T.context,X=Y.gl;let te,le;const ge=T.options.showTerrainWireframe?2:0,pe=(he,Ie)=>{if(le===he)return;const Le=[Ro[he]];Ie&&Le.push(Ro[ge]),te=T.useProgram("terrainRaster",null,Le),le=he},ve=T.colorModeForRenderPass(),fe=new o.DepthMode(X.LEQUAL,o.DepthMode.ReadWrite,T.depthRangeFor3D);Dr.update(H);const de=T.transform,be=6*Math.pow(1.5,22-de.zoom)*M.exaggeration();(ge?[!1,!0]:[!1]).forEach(he=>{le=-1;const Ie=he?X.LINES:X.TRIANGLES,[Le,Ae]=he?M.getWirefameBuffer():[M.gridIndexBuffer,M.gridSegments];for(const Pe of G){const qe=F.getTile(Pe),rt=o.StencilMode.disabled,Xe=M.prevTerrainTileForTile[Pe.key],St=M.terrainTileForTile[Pe.key];es(Xe,St)&&Dr.newMorphing(Pe.key,Xe,St,H,250),Y.activeTexture.set(X.TEXTURE0),qe.texture.bind(X.LINEAR,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST);const je=Dr.getMorphValuesForProxy(Pe.key),_t=je?1:0;let ht;je&&(ht={morphing:{srcDemTile:je.from,dstDemTile:je.to,phase:o.easeCubicInOut(je.phase)}});const We=Ja(Pe.projMatrix,Rn(Pe.canonical,de.renderWorldCopies)?be/10:be);pe(_t,he),M.setupElevationDraw(qe,te,ht),T.prepareDrawProgram(Y,te,Pe.toUnwrapped()),te.draw(Y,Ie,fe,rt,ve,o.CullFaceMode.backCCW,We,"terrain_raster",M.gridBuffer,Le,Ae)}})}}(f,this,this.proxySourceCache,l,this._updateTimestamp),this.renderingToTexture=!0,f.gpuTimingDeferredRenderEnd(),l.splice(0,l.length))}renderBatch(l){if(this._drapedRenderBatches.length===0)return l+1;this.renderingToTexture=!0;const f=this.painter,b=this.painter.context,T=this.proxySourceCache,M=this.proxiedCoords[T.id],F=this._drapedRenderBatches.shift(),G=[],H=f.style.order;let Y=0;for(const X of M){const te=T.getTileByID(X.proxyTileKey),le=T.proxyCachedFBO[X.key]?T.proxyCachedFBO[X.key][l]:void 0,ge=le!==void 0?T.renderCache[le]:this.pool[Y++],pe=le!==void 0;if(te.texture=ge.tex,pe&&!ge.dirty){G.push(te.tileID);continue}let ve;b.bindFramebuffer.set(ge.fb.framebuffer),this.renderedToTile=!1,ge.dirty&&(b.clear({color:o.Color.transparent,stencil:0}),ge.dirty=!1);for(let fe=F.start;fe<=F.end;++fe){const de=f.style._layers[H[fe]];if(de.isHidden(f.transform.zoom))continue;const be=f.style._getLayerSourceCache(de),he=be?this.proxyToSource[X.key][be.id]:[X];if(!he)continue;const Ie=he;b.viewport.set([0,0,ge.fb.width,ge.fb.height]),ve!==(be?be.id:null)&&(this._setupStencil(ge,he,de,be),ve=be?be.id:null),f.renderLayer(f,be,de,Ie)}this.renderedToTile?(ge.dirty=!0,G.push(te.tileID)):pe||--Y,Y===5&&(Y=0,this.renderToBackBuffer(G))}return this.renderToBackBuffer(G),this.renderingToTexture=!1,b.bindFramebuffer.set(null),b.viewport.set([0,0,f.width,f.height]),F.end+1}postRender(){}renderCacheEfficiency(l){const f=l.order.length;if(f===0)return{efficiency:100};let b,T=0,M=0,F=!1;for(let G=0;G<f;++G){const H=l._layers[l.order[G]];this._style.isLayerDraped(H)?(F&&++T,++M):F||(F=!0,b=H.id)}return M===0?{efficiency:100}:{efficiency:100*(1-T/M),firstUndrapedLayer:b}}getMinElevationBelowMSL(){let l=0;return this._visibleDemTiles.filter(f=>f.dem).forEach(f=>{l=Math.min(l,f.dem.tree.minimums[0])}),l===0?l:(l-30)*this._exaggeration}raycast(l,f,b){if(!this._visibleDemTiles)return null;const T=this._visibleDemTiles.filter(M=>M.dem).map(M=>{const F=M.tileID,G=1<<F.overscaledZ,{x:H,y:Y}=F.canonical,X=H/G,te=(H+1)/G,le=Y/G,ge=(Y+1)/G;return{minx:X,miny:le,maxx:te,maxy:ge,t:M.dem.tree.raycastRoot(X,le,te,ge,l,f,b),tile:M}});T.sort((M,F)=>(M.t!==null?M.t:Number.MAX_VALUE)-(F.t!==null?F.t:Number.MAX_VALUE));for(const M of T){if(M.t==null)return null;const F=M.tile.dem.tree.raycast(M.minx,M.miny,M.maxx,M.maxy,l,f,b);if(F!=null)return F}return null}_createFBO(){const l=this.painter.context,f=l.gl,b=this.drapeBufferSize;l.activeTexture.set(f.TEXTURE0);const T=new o.Texture(l,{width:b[0],height:b[1],data:null},f.RGBA);T.bind(f.LINEAR,f.CLAMP_TO_EDGE);const M=l.createFramebuffer(b[0],b[1],!1);return M.colorAttachment.set(T.texture),M.depthAttachment=new Jr(l,M.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=l.createRenderbuffer(l.gl.DEPTH_STENCIL,b[0],b[1]),this._stencilRef=0,M.depthAttachment.set(this._sharedDepthStencil),l.clear({stencil:0})):M.depthAttachment.set(this._sharedDepthStencil),l.extTextureFilterAnisotropic&&!l.extTextureFilterAnisotropicForceOff&&f.texParameterf(f.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax),{fb:M,tex:T,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const l in this._style._sourceCaches)if(this._style._sourceCaches[l].hasTransition())return!0;return this._style.order.some(l=>{const f=this._style._layers[l],b=f.isHidden(this.painter.transform.zoom),T=f.getCrossfadeParameters(),M=!!T&&T.t!==1,F=f.hasTransition();return f.type!=="custom"&&!b&&(M||F)})}_clearRasterFadeFromRenderCache(){let l=!1;for(const f in this._style._sourceCaches)if(this._style._sourceCaches[f]._source instanceof ie){l=!0;break}if(l)for(let f=0;f<this._style.order.length;++f){const b=this._style._layers[this._style.order[f]],T=b.isHidden(this.painter.transform.zoom),M=this._style._getLayerSourceCache(b);if(b.type!=="raster"||T||!M)continue;const F=b.paint.get("raster-fade-duration");for(const G of this.proxyCoords){const H=this.proxyToSource[G.key][M.id];if(H)for(const Y of H){const X=Qa(M.getTile(Y),M.findLoadedParent(Y,0),M,this.painter.transform,F);(X.opacity!==1||X.mix!==0)&&this._clearRenderCacheForTile(M.id,Y)}}}}_setupDrapedRenderBatches(){const l=this._style.order,f=l.length;if(f===0)return;const b=[];let T,M=0,F=this._style._layers[l[M]];for(;!this._style.isLayerDraped(F)&&F.isHidden(this.painter.transform.zoom)&&++M<f;)F=this._style._layers[l[M]];for(;M<f;++M){const G=this._style._layers[l[M]];G.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(G)?T===void 0&&(T=M):T!==void 0&&(b.push({start:T,end:M-1}),T=void 0))}T!==void 0&&b.push({start:T,end:M-1}),this._drapedRenderBatches=b}_setupRenderCache(l){const f=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,f.renderCache.length>f.renderCachePool.length){const F=Object.values(f.proxyCachedFBO);f.proxyCachedFBO={};for(let G=0;G<F.length;++G){const H=Object.values(F[G]);f.renderCachePool.push(...H)}}return}this._clearRasterFadeFromRenderCache();const b=this.proxyCoords,T=this._tilesDirty;for(let F=b.length-1;F>=0;F--){const G=b[F];if(f.getTileByID(G.key),f.proxyCachedFBO[G.key]!==void 0){const H=l[G.key],Y=this.proxyToSource[G.key];let X=0;for(const te in Y){const le=Y[te],ge=H[te];if(!ge||ge.length!==le.length||le.some((pe,ve)=>pe!==ge[ve]||T[te]&&T[te].hasOwnProperty(pe.key))){X=-1;break}++X}for(const te in f.proxyCachedFBO[G.key])f.renderCache[f.proxyCachedFBO[G.key][te]].dirty=X<0||X!==Object.values(H).length}}const M=[...this._drapedRenderBatches];M.sort((F,G)=>G.end-G.start-(F.end-F.start));for(const F of M)for(const G of b){if(f.proxyCachedFBO[G.key])continue;let H=f.renderCachePool.pop();H===void 0&&f.renderCache.length<50&&(H=f.renderCache.length,f.renderCache.push(this._createFBO())),H!==void 0&&(f.proxyCachedFBO[G.key]={},f.proxyCachedFBO[G.key][F.start]=H,f.renderCache[H].dirty=!0)}this._tilesDirty={}}_setupStencil(l,f,b,T){if(!T||!this._sourceTilesOverlap[T.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const M=this.painter.context,F=M.gl;if(f.length<=1)return void(this._overlapStencilType=!1);let G;if(b.isTileClipped())G=f.length,this._overlapStencilMode.test={func:F.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(f[0].overscaledZ>f[f.length-1].overscaledZ))return void(this._overlapStencilType=!1);G=1,this._overlapStencilMode.test={func:F.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+G>255&&(M.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=G,this._overlapStencilMode.ref=this._stencilRef,b.isTileClipped()&&this._renderTileClippingMasks(f,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(l){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[l.key]),this._overlapStencilMode):o.StencilMode.disabled}_renderTileClippingMasks(l,f){const b=this.painter,T=this.painter.context,M=T.gl;b._tileClippingMaskIDs={},T.setColorMode(o.ColorMode.disabled),T.setDepthMode(o.DepthMode.disabled);const F=b.useProgram("clippingMask");for(const G of l){const H=b._tileClippingMaskIDs[G.key]=--f;F.draw(T,M.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:M.ALWAYS,mask:0},H,255,M.KEEP,M.KEEP,M.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,$o(G.projMatrix),"$clipping",b.tileExtentBuffer,b.quadTriangleIndexBuffer,b.tileExtentSegments)}}pointCoordinate(l){const f=this.painter.transform;if(l.x<0||l.x>f.width||l.y<0||l.y>f.height)return null;const b=[l.x,l.y,1,1];o.transformMat4$1(b,b,f.pixelMatrixInverse),o.scale$1(b,b,1/b[3]),b[0]/=f.worldSize,b[1]/=f.worldSize;const T=f._camera.position,M=o.mercatorZfromAltitude(1,f.center.lat),F=[T[0],T[1],T[2]/M,0],G=o.subtract([],b.slice(0,3),F);o.normalize(G,G);const H=this.raycast(F,G,this._exaggeration);return H!==null&&H?(o.scaleAndAdd(F,F,G,H),F[3]=F[2],F[2]*=M,F):null}drawDepth(){const l=this.painter,f=l.context,b=this.proxySourceCache,T=Math.ceil(l.width),M=Math.ceil(l.height);if(!this._depthFBO||this._depthFBO.width===T&&this._depthFBO.height===M||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const F=f.gl,G=f.createFramebuffer(T,M,!0);f.activeTexture.set(F.TEXTURE0);const H=new o.Texture(f,{width:T,height:M,data:null},F.RGBA);H.bind(F.NEAREST,F.CLAMP_TO_EDGE),G.colorAttachment.set(H.texture);const Y=f.createRenderbuffer(f.gl.DEPTH_COMPONENT16,T,M);G.depthAttachment.set(Y),this._depthFBO=G,this._depthTexture=H}f.bindFramebuffer.set(this._depthFBO.framebuffer),f.viewport.set([0,0,T,M]),function(F,G,H,Y){if(F.transform.projection.name==="globe")return;const X=F.context,te=X.gl;X.clear({depth:1});const le=F.useProgram("terrainDepth"),ge=new o.DepthMode(te.LESS,o.DepthMode.ReadWrite,F.depthRangeFor3D);for(const pe of Y){const ve=H.getTile(pe),fe=Ja(pe.projMatrix,0);G.setupElevationDraw(ve,le),le.draw(X,te.TRIANGLES,ge,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.backCCW,fe,"terrain_depth",G.gridBuffer,G.gridIndexBuffer,G.gridNoSkirtSegments)}}(l,this,b,this.proxyCoords)}_setupProxiedCoordsForOrtho(l,f,b){if(l.getSource()instanceof De)return this._setupProxiedCoordsForImageSource(l,f,b);this._findCoveringTileCache[l.id]=this._findCoveringTileCache[l.id]||{};const T=this.proxiedCoords[l.id]=[],M=this.proxyCoords;for(let G=0;G<M.length;G++){const H=M[G],Y=this._findTileCoveringTileID(H,l);if(Y){const X=this._createProxiedId(H,Y,b[H.key]&&b[H.key][l.id]);T.push(X),this.proxyToSource[H.key][l.id]=[X]}}let F=!1;for(let G=0;G<f.length;G++){const H=l.getTile(f[G]);if(!H||!H.hasData())continue;const Y=this._findTileCoveringTileID(H.tileID,this.proxySourceCache);if(Y&&Y.tileID.canonical.z!==H.tileID.canonical.z){const X=this.proxyToSource[Y.tileID.key][l.id],te=this._createProxiedId(Y.tileID,H,b[Y.tileID.key]&&b[Y.tileID.key][l.id]);X?X.splice(X.length-1,0,te):this.proxyToSource[Y.tileID.key][l.id]=[te],T.push(te),F=!0}}this._sourceTilesOverlap[l.id]=F}_setupProxiedCoordsForImageSource(l,f,b){if(!l.getSource().loaded())return;const T=this.proxiedCoords[l.id]=[],M=this.proxyCoords,F=l.getSource(),G=new o.pointGeometry(F.tileID.x,F.tileID.y)._div(1<<F.tileID.z),H=F.coordinates.map(o.MercatorCoordinate.fromLngLat).reduce((X,te)=>(X.min.x=Math.min(X.min.x,te.x-G.x),X.min.y=Math.min(X.min.y,te.y-G.y),X.max.x=Math.max(X.max.x,te.x-G.x),X.max.y=Math.max(X.max.y,te.y-G.y),X),{min:new o.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new o.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),Y=(X,te)=>{const le=X.wrap+X.canonical.x/(1<<X.canonical.z),ge=X.canonical.y/(1<<X.canonical.z),pe=o.EXTENT/(1<<X.canonical.z),ve=te.wrap+te.canonical.x/(1<<te.canonical.z),fe=te.canonical.y/(1<<te.canonical.z);return le+pe<ve+H.min.x||le>ve+H.max.x||ge+pe<fe+H.min.y||ge>fe+H.max.y};for(let X=0;X<M.length;X++){const te=M[X];for(let le=0;le<f.length;le++){const ge=l.getTile(f[le]);if(!ge||!ge.hasData()||Y(te,ge.tileID))continue;const pe=this._createProxiedId(te,ge,b[te.key]&&b[te.key][l.id]),ve=this.proxyToSource[te.key][l.id];ve?ve.push(pe):this.proxyToSource[te.key][l.id]=[pe],T.push(pe)}}}_createProxiedId(l,f,b){let T=this.orthoMatrix;if(b){const M=b.find(F=>F.key===f.tileID.key);if(M)return M}if(f.tileID.key!==l.key){const M=l.canonical.z-f.tileID.canonical.z;let F,G,H;T=o.create();const Y=f.tileID.wrap-l.wrap<<l.overscaledZ;M>0?(F=o.EXTENT>>M,G=F*((f.tileID.canonical.x<<M)-l.canonical.x+Y),H=F*((f.tileID.canonical.y<<M)-l.canonical.y)):(F=o.EXTENT<<-M,G=o.EXTENT*(f.tileID.canonical.x-(l.canonical.x+Y<<-M)),H=o.EXTENT*(f.tileID.canonical.y-(l.canonical.y<<-M))),o.ortho(T,0,F,0,F,0,1),o.translate(T,T,[G,H,0])}return new Gs(f.tileID,l.key,T)}_findTileCoveringTileID(l,f){let b=f.getTile(l);if(b&&b.hasData())return b;const T=this._findCoveringTileCache[f.id],M=T[l.key];if(b=M?f.getTileByID(M):null,b&&b.hasData()||M===null)return b;let F=b?b.tileID:l,G=F.overscaledZ;const H=f.getSource().minzoom,Y=[];if(!M){const te=f.getSource().maxzoom;if(l.canonical.z>=te){const le=l.canonical.z-te;f.getSource().reparseOverscaled?(G=Math.max(l.canonical.z+2,f.transform.tileZoom),F=new o.OverscaledTileID(G,l.wrap,te,l.canonical.x>>le,l.canonical.y>>le)):le!==0&&(G=te,F=new o.OverscaledTileID(G,l.wrap,te,l.canonical.x>>le,l.canonical.y>>le))}F.key!==l.key&&(Y.push(F.key),b=f.getTile(F))}const X=te=>{Y.forEach(le=>{T[le]=te}),Y.length=0};for(G-=1;G>=H&&(!b||!b.hasData());G--){b&&X(b.tileID.key);const te=F.calculateScaledKey(G);if(b=f.getTileByID(te),b&&b.hasData())break;const le=T[te];if(le===null)break;le===void 0?Y.push(te):b=f.getTileByID(le)}return X(b?b.tileID.key:null),b&&b.hasData()?b:null}findDEMTileFor(l){return this.enabled?this._findTileCoveringTileID(l,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(l,f){let b=this._tilesDirty[l];b||(b=this._tilesDirty[l]={}),b[f.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const l=function(f){let b=0;const T=new o.StructArrayLayout2ui4,M=131;for(let F=1;F<129;F++){for(let G=1;G<129;G++)b=F*M+G,T.emplaceBack(b,b+1),T.emplaceBack(b,b+M),T.emplaceBack(b+1,b+M),F===128&&T.emplaceBack(b+M,b+M+1);T.emplaceBack(b+1,b+1+M)}return T}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(l),this.wireframeSegments=o.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,l.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Cc{static cacheKey(l,f,b,T){let M=`${f}${T?T.cacheKey:""}`;for(const F of b)l.usedDefines.includes(F)&&(M+=`/${F}`);return M}constructor(l,f,b,T,M,F){const G=l.gl;this.program=G.createProgram();const H=function(fe){const de=[];for(let be=0;be<fe.length;be++){if(fe[be]===null)continue;const he=fe[be].split(" ");de.push(he.pop())}return de}(b.staticAttributes),Y=T?T.getBinderAttributes():[],X=H.concat(Y);let te=T?T.defines():[];te=te.concat(F.map(fe=>`#define ${fe}`));const le=te.concat(l.extStandardDerivatives?`#extension GL_OES_standard_derivatives : enable
`.concat(Bs):Bs,Bs,Ya,Za.fragmentSource,Wa.fragmentSource,b.fragmentSource).join(`
`),ge=te.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,Ya,Za.vertexSource,Wa.vertexSource,Ka.vertexSource,b.vertexSource).join(`
`),pe=G.createShader(G.FRAGMENT_SHADER);if(G.isContextLost())return void(this.failedToCreate=!0);G.shaderSource(pe,le),G.compileShader(pe),G.attachShader(this.program,pe);const ve=G.createShader(G.VERTEX_SHADER);if(G.isContextLost())this.failedToCreate=!0;else{G.shaderSource(ve,ge),G.compileShader(ve),G.attachShader(this.program,ve),this.attributes={},this.numAttributes=X.length;for(let fe=0;fe<this.numAttributes;fe++)X[fe]&&(G.bindAttribLocation(this.program,fe,X[fe]),this.attributes[X[fe]]=fe);G.linkProgram(this.program),G.deleteShader(ve),G.deleteShader(pe),this.fixedUniforms=M(l),this.binderUniforms=T?T.getUniforms(l):[],F.includes("TERRAIN")&&(this.terrainUniforms=(fe=>({u_dem:new o.Uniform1i(fe),u_dem_prev:new o.Uniform1i(fe),u_dem_unpack:new o.Uniform4f(fe),u_dem_tl:new o.Uniform2f(fe),u_dem_scale:new o.Uniform1f(fe),u_dem_tl_prev:new o.Uniform2f(fe),u_dem_scale_prev:new o.Uniform1f(fe),u_dem_size:new o.Uniform1f(fe),u_dem_lerp:new o.Uniform1f(fe),u_exaggeration:new o.Uniform1f(fe),u_depth:new o.Uniform1i(fe),u_depth_size_inv:new o.Uniform2f(fe),u_meter_to_dem:new o.Uniform1f(fe),u_label_plane_matrix_inv:new o.UniformMatrix4f(fe)}))(l)),F.includes("GLOBE")&&(this.globeUniforms=(fe=>({u_tile_tl_up:new o.Uniform3f(fe),u_tile_tr_up:new o.Uniform3f(fe),u_tile_br_up:new o.Uniform3f(fe),u_tile_bl_up:new o.Uniform3f(fe),u_tile_up_scale:new o.Uniform1f(fe)}))(l)),F.includes("FOG")&&(this.fogUniforms=(fe=>({u_fog_matrix:new o.UniformMatrix4f(fe),u_fog_range:new o.Uniform2f(fe),u_fog_color:new o.Uniform4f(fe),u_fog_horizon_blend:new o.Uniform1f(fe),u_fog_temporal_offset:new o.Uniform1f(fe),u_frustum_tl:new o.Uniform3f(fe),u_frustum_tr:new o.Uniform3f(fe),u_frustum_br:new o.Uniform3f(fe),u_frustum_bl:new o.Uniform3f(fe),u_globe_pos:new o.Uniform3f(fe),u_globe_radius:new o.Uniform1f(fe),u_globe_transition:new o.Uniform1f(fe),u_is_globe:new o.Uniform1i(fe),u_viewport:new o.Uniform2f(fe)}))(l))}}setTerrainUniformValues(l,f){if(!this.terrainUniforms)return;const b=this.terrainUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const T in f)b[T]&&b[T].set(this.program,T,f[T])}}setGlobeUniformValues(l,f){if(!this.globeUniforms)return;const b=this.globeUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const T in f)b[T]&&b[T].set(this.program,T,f[T])}}setFogUniformValues(l,f){if(!this.fogUniforms)return;const b=this.fogUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const T in f)b[T].set(this.program,T,f[T])}}draw(l,f,b,T,M,F,G,H,Y,X,te,le,ge,pe,ve){const fe=l.gl;if(this.failedToCreate)return;l.program.set(this.program),l.setDepthMode(b),l.setStencilMode(T),l.setColorMode(M),l.setCullFace(F);for(const be of Object.keys(this.fixedUniforms))this.fixedUniforms[be].set(this.program,be,G[be]);pe&&pe.setUniforms(this.program,l,this.binderUniforms,le,{zoom:ge});const de={[fe.LINES]:2,[fe.TRIANGLES]:3,[fe.LINE_STRIP]:1}[f];for(const be of te.get()){const he=be.vaos||(be.vaos={});(he[H]||(he[H]=new Qo)).bind(l,this,Y,pe?pe.getPaintVertexBuffers():[],X,be.vertexOffset,ve||[]),fe.drawElements(f,be.primitiveLength*de,fe.UNSIGNED_SHORT,be.primitiveOffset*de*2)}}}function Sc(_,l,f){const b=1/vn(f,1,l.transform.tileZoom),T=Math.pow(2,f.tileID.overscaledZ),M=f.tileSize*Math.pow(2,l.transform.tileZoom)/T,F=M*(f.tileID.canonical.x+f.tileID.wrap*T),G=M*f.tileID.canonical.y;return{u_image:0,u_texsize:f.imageAtlasTexture.size,u_scale:[b,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[F>>16,G>>16],u_pixel_coord_lower:[65535&F,65535&G]}}const el=o.create(),Hs=(_,l,f,b,T,M,F,G,H,Y,X)=>{const te=l.style.light,le=te.properties.get("position"),ge=[le.x,le.y,le.z],pe=o.create$1();te.properties.get("anchor")==="viewport"&&(o.fromRotation(pe,-l.transform.angle),o.transformMat3(ge,ge,pe));const ve=te.properties.get("color"),fe=l.transform,de={u_matrix:_,u_lightpos:ge,u_lightintensity:te.properties.get("intensity"),u_lightcolor:[ve.r,ve.g,ve.b],u_vertical_gradient:+f,u_opacity:b,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:el,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:T,u_edge_radius:M};return fe.projection.name==="globe"&&(de.u_tile_id=[F.canonical.x,F.canonical.y,1<<F.canonical.z],de.u_zoom_transition=H,de.u_inv_rot_matrix=X,de.u_merc_center=Y,de.u_up_dir=fe.projection.upVector(new o.CanonicalTileID(0,0,0),Y[0]*o.EXTENT,Y[1]*o.EXTENT),de.u_height_lift=G),de},tl=(_,l,f,b,T,M,F,G,H,Y,X,te,le)=>{const ge=Hs(_,l,f,b,T,M,F,Y,X,te,le),pe={u_height_factor:-Math.pow(2,F.overscaledZ)/H.tileSize/8};return o.extend(ge,Sc(G,l,H),pe)},qs=_=>({u_matrix:_}),nl=(_,l,f,b)=>o.extend(qs(_),Sc(f,l,b)),Tc=(_,l)=>({u_matrix:_,u_world:l}),Ju=(_,l,f,b,T)=>o.extend(nl(_,l,f,b),{u_world:T}),ts=o.create(),ns=(_,l,f,b,T,M)=>{const F=_.transform,G=F.projection.name==="globe";let H;if(M.paint.get("circle-pitch-alignment")==="map")if(G){const X=o.globePixelsToTileUnits(F.zoom,l.canonical)*F._pixelsPerMercatorPixel;H=Float32Array.from([X,0,0,X])}else H=F.calculatePixelsToTileUnitsMatrix(f);else H=new Float32Array([F.pixelsToGLUnits[0],0,0,F.pixelsToGLUnits[1]]);const Y={u_camera_to_center_distance:F.cameraToCenterDistance,u_matrix:_.translatePosMatrix(l.projMatrix,f,M.paint.get("circle-translate"),M.paint.get("circle-translate-anchor")),u_device_pixel_ratio:o.exported.devicePixelRatio,u_extrude_scale:H,u_inv_rot_matrix:ts,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(G){Y.u_inv_rot_matrix=b,Y.u_merc_center=T,Y.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],Y.u_zoom_transition=o.globeToMercatorTransition(F.zoom);const X=T[0]*o.EXTENT,te=T[1]*o.EXTENT;Y.u_up_dir=F.projection.upVector(new o.CanonicalTileID(0,0,0),X,te)}return Y},Ac=_=>{const l=[];return _.paint.get("circle-pitch-alignment")==="map"&&l.push("PITCH_WITH_MAP"),_.paint.get("circle-pitch-scale")==="map"&&l.push("SCALE_WITH_MAP"),l},Ks=(_,l,f,b)=>{const T=o.EXTENT/f.tileSize;return{u_matrix:_,u_camera_to_center_distance:l.getCameraToCenterDistance(b),u_extrude_scale:[l.pixelsToGLUnits[0]/T,l.pixelsToGLUnits[1]/T]}},Ws=(_,l,f=1)=>({u_matrix:_,u_color:l,u_overlay:0,u_overlay_scale:f}),ur=o.create(),il=(_,l,f,b,T,M,F)=>{const G=_.transform,H=G.projection.name==="globe",Y=H?o.globePixelsToTileUnits(G.zoom,l.canonical)*G._pixelsPerMercatorPixel:vn(f,1,M),X={u_matrix:l.projMatrix,u_extrude_scale:Y,u_intensity:F,u_inv_rot_matrix:ur,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(H){X.u_inv_rot_matrix=b,X.u_merc_center=T,X.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],X.u_zoom_transition=o.globeToMercatorTransition(G.zoom);const te=T[0]*o.EXTENT,le=T[1]*o.EXTENT;X.u_up_dir=G.projection.upVector(new o.CanonicalTileID(0,0,0),te,le)}return X},kc=(_,l,f,b,T,M,F,G)=>{const H=_.transform,Y=H.calculatePixelsToTileUnitsMatrix(l),X={u_matrix:Zs(_,l,f,T),u_pixels_to_tile_units:Y,u_device_pixel_ratio:F,u_units_to_pixels:[1/H.pixelsToGLUnits[0],1/H.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:M,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0,u_alpha_discard_threshold:0,u_trim_offset:G};if(Rc(f)){const te=ol(l,_.transform);X.u_texsize=l.lineAtlasTexture.size,X.u_scale=[te,b.fromScale,b.toScale],X.u_mix=b.t}return X},rl=(_,l,f,b,T,M)=>{const F=_.transform,G=ol(l,F);return{u_matrix:Zs(_,l,f,T),u_texsize:l.imageAtlasTexture.size,u_pixels_to_tile_units:F.calculatePixelsToTileUnitsMatrix(l),u_device_pixel_ratio:M,u_image:0,u_scale:[G,b.fromScale,b.toScale],u_fade:b.t,u_units_to_pixels:[1/F.pixelsToGLUnits[0],1/F.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function ol(_,l){return 1/vn(_,1,l.tileZoom)}function Zs(_,l,f,b){return _.translatePosMatrix(b||l.tileID.projMatrix,l,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}function Rc(_){const l=_.paint.get("line-dasharray").value;return l.value||l.kind!=="constant"}const sl=(_,l,f,b,T,M)=>{return{u_matrix:_,u_tl_parent:l,u_scale_parent:f,u_fade_t:b.mix,u_opacity:b.opacity*T.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:T.paint.get("raster-brightness-min"),u_brightness_high:T.paint.get("raster-brightness-max"),u_saturation_factor:(G=T.paint.get("raster-saturation"),G>0?1-1/(1.001-G):-G),u_contrast_factor:(F=T.paint.get("raster-contrast"),F>0?1/(1-F):1+F),u_spin_weights:Qu(T.paint.get("raster-hue-rotate")),u_perspective_transform:M};var F,G};function Qu(_){_*=Math.PI/180;const l=Math.sin(_),f=Math.cos(_);return[(2*f+1)/3,(-Math.sqrt(3)*l-f+1)/3,(Math.sqrt(3)*l-f+1)/3]}const rs=o.create(),$c=(_,l,f,b,T,M,F,G,H,Y,X,te,le,ge,pe,ve)=>{const fe=T.transform,de={u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:fe.cameraToCenterDistance,u_rotate_symbol:+f,u_aspect_ratio:fe.width/fe.height,u_fade_change:T.options.fadeDuration?T.symbolFadeChange:1,u_matrix:M,u_label_plane_matrix:F,u_coord_matrix:G,u_is_text:+H,u_pitch_with_map:+b,u_texsize:Y,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:rs,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:rs,u_up_vector:[0,-1,0]};return ve.name==="globe"&&(de.u_tile_id=[X.canonical.x,X.canonical.y,1<<X.canonical.z],de.u_zoom_transition=te,de.u_inv_rot_matrix=ge,de.u_merc_center=le,de.u_camera_forward=fe._camera.forward(),de.u_ecef_origin=o.globeECEFOrigin(fe.globeMatrix,X.toUnwrapped()),de.u_tile_matrix=Float32Array.from(fe.globeMatrix),de.u_up_vector=pe),de},Ys=(_,l,f,b,T,M,F,G,H,Y,X,te,le,ge,pe,ve,fe)=>o.extend($c(_,l,f,b,T,M,F,G,H,Y,te,le,ge,pe,ve,fe),{u_gamma_scale:b?T.transform.cameraToCenterDistance*Math.cos(T.terrain?0:T.transform._pitch):1,u_device_pixel_ratio:o.exported.devicePixelRatio,u_is_halo:+X}),ed=(_,l,f,b,T,M,F,G,H,Y,X,te,le,ge,pe,ve)=>o.extend(Ys(_,l,f,b,T,M,F,G,!0,H,!0,X,te,le,ge,pe,ve),{u_texsize_icon:Y,u_texture_icon:1}),al=(_,l,f)=>({u_matrix:_,u_opacity:l,u_color:f}),td=(_,l,f,b,T,M)=>o.extend(function(F,G,H,Y){const X=H.imageManager.getPattern(F.from.toString()),te=H.imageManager.getPattern(F.to.toString()),{width:le,height:ge}=H.imageManager.getPixelSize(),pe=Math.pow(2,Y.tileID.overscaledZ),ve=Y.tileSize*Math.pow(2,H.transform.tileZoom)/pe,fe=ve*(Y.tileID.canonical.x+Y.tileID.wrap*pe),de=ve*Y.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:X.tl,u_pattern_br_a:X.br,u_pattern_tl_b:te.tl,u_pattern_br_b:te.br,u_texsize:[le,ge],u_mix:G.t,u_pattern_size_a:X.displaySize,u_pattern_size_b:te.displaySize,u_scale_a:G.fromScale,u_scale_b:G.toScale,u_tile_units_to_pixels:1/vn(Y,1,H.transform.tileZoom),u_pixel_coord_upper:[fe>>16,de>>16],u_pixel_coord_lower:[65535&fe,65535&de]}}(b,M,f,T),{u_matrix:_,u_opacity:l}),Xs={fillExtrusion:_=>({u_matrix:new o.UniformMatrix4f(_),u_lightpos:new o.Uniform3f(_),u_lightintensity:new o.Uniform1f(_),u_lightcolor:new o.Uniform3f(_),u_vertical_gradient:new o.Uniform1f(_),u_opacity:new o.Uniform1f(_),u_edge_radius:new o.Uniform1f(_),u_ao:new o.Uniform2f(_),u_tile_id:new o.Uniform3f(_),u_zoom_transition:new o.Uniform1f(_),u_inv_rot_matrix:new o.UniformMatrix4f(_),u_merc_center:new o.Uniform2f(_),u_up_dir:new o.Uniform3f(_),u_height_lift:new o.Uniform1f(_)}),fillExtrusionPattern:_=>({u_matrix:new o.UniformMatrix4f(_),u_lightpos:new o.Uniform3f(_),u_lightintensity:new o.Uniform1f(_),u_lightcolor:new o.Uniform3f(_),u_vertical_gradient:new o.Uniform1f(_),u_height_factor:new o.Uniform1f(_),u_edge_radius:new o.Uniform1f(_),u_ao:new o.Uniform2f(_),u_tile_id:new o.Uniform3f(_),u_zoom_transition:new o.Uniform1f(_),u_inv_rot_matrix:new o.UniformMatrix4f(_),u_merc_center:new o.Uniform2f(_),u_up_dir:new o.Uniform3f(_),u_height_lift:new o.Uniform1f(_),u_image:new o.Uniform1i(_),u_texsize:new o.Uniform2f(_),u_pixel_coord_upper:new o.Uniform2f(_),u_pixel_coord_lower:new o.Uniform2f(_),u_scale:new o.Uniform3f(_),u_fade:new o.Uniform1f(_),u_opacity:new o.Uniform1f(_)}),fill:_=>({u_matrix:new o.UniformMatrix4f(_)}),fillPattern:_=>({u_matrix:new o.UniformMatrix4f(_),u_image:new o.Uniform1i(_),u_texsize:new o.Uniform2f(_),u_pixel_coord_upper:new o.Uniform2f(_),u_pixel_coord_lower:new o.Uniform2f(_),u_scale:new o.Uniform3f(_),u_fade:new o.Uniform1f(_)}),fillOutline:_=>({u_matrix:new o.UniformMatrix4f(_),u_world:new o.Uniform2f(_)}),fillOutlinePattern:_=>({u_matrix:new o.UniformMatrix4f(_),u_world:new o.Uniform2f(_),u_image:new o.Uniform1i(_),u_texsize:new o.Uniform2f(_),u_pixel_coord_upper:new o.Uniform2f(_),u_pixel_coord_lower:new o.Uniform2f(_),u_scale:new o.Uniform3f(_),u_fade:new o.Uniform1f(_)}),circle:_=>({u_camera_to_center_distance:new o.Uniform1f(_),u_extrude_scale:new o.UniformMatrix2f(_),u_device_pixel_ratio:new o.Uniform1f(_),u_matrix:new o.UniformMatrix4f(_),u_inv_rot_matrix:new o.UniformMatrix4f(_),u_merc_center:new o.Uniform2f(_),u_tile_id:new o.Uniform3f(_),u_zoom_transition:new o.Uniform1f(_),u_up_dir:new o.Uniform3f(_)}),collisionBox:_=>({u_matrix:new o.UniformMatrix4f(_),u_camera_to_center_distance:new o.Uniform1f(_),u_extrude_scale:new o.Uniform2f(_)}),collisionCircle:_=>({u_matrix:new o.UniformMatrix4f(_),u_inv_matrix:new o.UniformMatrix4f(_),u_camera_to_center_distance:new o.Uniform1f(_),u_viewport_size:new o.Uniform2f(_)}),debug:_=>({u_color:new o.UniformColor(_),u_matrix:new o.UniformMatrix4f(_),u_overlay:new o.Uniform1i(_),u_overlay_scale:new o.Uniform1f(_)}),clippingMask:_=>({u_matrix:new o.UniformMatrix4f(_)}),heatmap:_=>({u_extrude_scale:new o.Uniform1f(_),u_intensity:new o.Uniform1f(_),u_matrix:new o.UniformMatrix4f(_),u_inv_rot_matrix:new o.UniformMatrix4f(_),u_merc_center:new o.Uniform2f(_),u_tile_id:new o.Uniform3f(_),u_zoom_transition:new o.Uniform1f(_),u_up_dir:new o.Uniform3f(_)}),heatmapTexture:_=>({u_image:new o.Uniform1i(_),u_color_ramp:new o.Uniform1i(_),u_opacity:new o.Uniform1f(_)}),hillshade:_=>({u_matrix:new o.UniformMatrix4f(_),u_image:new o.Uniform1i(_),u_latrange:new o.Uniform2f(_),u_light:new o.Uniform2f(_),u_shadow:new o.UniformColor(_),u_highlight:new o.UniformColor(_),u_accent:new o.UniformColor(_)}),hillshadePrepare:_=>({u_matrix:new o.UniformMatrix4f(_),u_image:new o.Uniform1i(_),u_dimension:new o.Uniform2f(_),u_zoom:new o.Uniform1f(_),u_unpack:new o.Uniform4f(_)}),line:_=>({u_matrix:new o.UniformMatrix4f(_),u_pixels_to_tile_units:new o.UniformMatrix2f(_),u_device_pixel_ratio:new o.Uniform1f(_),u_units_to_pixels:new o.Uniform2f(_),u_dash_image:new o.Uniform1i(_),u_gradient_image:new o.Uniform1i(_),u_image_height:new o.Uniform1f(_),u_texsize:new o.Uniform2f(_),u_scale:new o.Uniform3f(_),u_mix:new o.Uniform1f(_),u_alpha_discard_threshold:new o.Uniform1f(_),u_trim_offset:new o.Uniform2f(_)}),linePattern:_=>({u_matrix:new o.UniformMatrix4f(_),u_texsize:new o.Uniform2f(_),u_pixels_to_tile_units:new o.UniformMatrix2f(_),u_device_pixel_ratio:new o.Uniform1f(_),u_image:new o.Uniform1i(_),u_units_to_pixels:new o.Uniform2f(_),u_scale:new o.Uniform3f(_),u_fade:new o.Uniform1f(_),u_alpha_discard_threshold:new o.Uniform1f(_)}),raster:_=>({u_matrix:new o.UniformMatrix4f(_),u_tl_parent:new o.Uniform2f(_),u_scale_parent:new o.Uniform1f(_),u_fade_t:new o.Uniform1f(_),u_opacity:new o.Uniform1f(_),u_image0:new o.Uniform1i(_),u_image1:new o.Uniform1i(_),u_brightness_low:new o.Uniform1f(_),u_brightness_high:new o.Uniform1f(_),u_saturation_factor:new o.Uniform1f(_),u_contrast_factor:new o.Uniform1f(_),u_spin_weights:new o.Uniform3f(_),u_perspective_transform:new o.Uniform2f(_)}),symbolIcon:_=>({u_is_size_zoom_constant:new o.Uniform1i(_),u_is_size_feature_constant:new o.Uniform1i(_),u_size_t:new o.Uniform1f(_),u_size:new o.Uniform1f(_),u_camera_to_center_distance:new o.Uniform1f(_),u_rotate_symbol:new o.Uniform1i(_),u_aspect_ratio:new o.Uniform1f(_),u_fade_change:new o.Uniform1f(_),u_matrix:new o.UniformMatrix4f(_),u_label_plane_matrix:new o.UniformMatrix4f(_),u_coord_matrix:new o.UniformMatrix4f(_),u_is_text:new o.Uniform1i(_),u_pitch_with_map:new o.Uniform1i(_),u_texsize:new o.Uniform2f(_),u_tile_id:new o.Uniform3f(_),u_zoom_transition:new o.Uniform1f(_),u_inv_rot_matrix:new o.UniformMatrix4f(_),u_merc_center:new o.Uniform2f(_),u_camera_forward:new o.Uniform3f(_),u_tile_matrix:new o.UniformMatrix4f(_),u_up_vector:new o.Uniform3f(_),u_ecef_origin:new o.Uniform3f(_),u_texture:new o.Uniform1i(_)}),symbolSDF:_=>({u_is_size_zoom_constant:new o.Uniform1i(_),u_is_size_feature_constant:new o.Uniform1i(_),u_size_t:new o.Uniform1f(_),u_size:new o.Uniform1f(_),u_camera_to_center_distance:new o.Uniform1f(_),u_rotate_symbol:new o.Uniform1i(_),u_aspect_ratio:new o.Uniform1f(_),u_fade_change:new o.Uniform1f(_),u_matrix:new o.UniformMatrix4f(_),u_label_plane_matrix:new o.UniformMatrix4f(_),u_coord_matrix:new o.UniformMatrix4f(_),u_is_text:new o.Uniform1i(_),u_pitch_with_map:new o.Uniform1i(_),u_texsize:new o.Uniform2f(_),u_texture:new o.Uniform1i(_),u_gamma_scale:new o.Uniform1f(_),u_device_pixel_ratio:new o.Uniform1f(_),u_tile_id:new o.Uniform3f(_),u_zoom_transition:new o.Uniform1f(_),u_inv_rot_matrix:new o.UniformMatrix4f(_),u_merc_center:new o.Uniform2f(_),u_camera_forward:new o.Uniform3f(_),u_tile_matrix:new o.UniformMatrix4f(_),u_up_vector:new o.Uniform3f(_),u_ecef_origin:new o.Uniform3f(_),u_is_halo:new o.Uniform1i(_)}),symbolTextAndIcon:_=>({u_is_size_zoom_constant:new o.Uniform1i(_),u_is_size_feature_constant:new o.Uniform1i(_),u_size_t:new o.Uniform1f(_),u_size:new o.Uniform1f(_),u_camera_to_center_distance:new o.Uniform1f(_),u_rotate_symbol:new o.Uniform1i(_),u_aspect_ratio:new o.Uniform1f(_),u_fade_change:new o.Uniform1f(_),u_matrix:new o.UniformMatrix4f(_),u_label_plane_matrix:new o.UniformMatrix4f(_),u_coord_matrix:new o.UniformMatrix4f(_),u_is_text:new o.Uniform1i(_),u_pitch_with_map:new o.Uniform1i(_),u_texsize:new o.Uniform2f(_),u_texsize_icon:new o.Uniform2f(_),u_texture:new o.Uniform1i(_),u_texture_icon:new o.Uniform1i(_),u_gamma_scale:new o.Uniform1f(_),u_device_pixel_ratio:new o.Uniform1f(_),u_is_halo:new o.Uniform1i(_)}),background:_=>({u_matrix:new o.UniformMatrix4f(_),u_opacity:new o.Uniform1f(_),u_color:new o.UniformColor(_)}),backgroundPattern:_=>({u_matrix:new o.UniformMatrix4f(_),u_opacity:new o.Uniform1f(_),u_image:new o.Uniform1i(_),u_pattern_tl_a:new o.Uniform2f(_),u_pattern_br_a:new o.Uniform2f(_),u_pattern_tl_b:new o.Uniform2f(_),u_pattern_br_b:new o.Uniform2f(_),u_texsize:new o.Uniform2f(_),u_mix:new o.Uniform1f(_),u_pattern_size_a:new o.Uniform2f(_),u_pattern_size_b:new o.Uniform2f(_),u_scale_a:new o.Uniform1f(_),u_scale_b:new o.Uniform1f(_),u_pixel_coord_upper:new o.Uniform2f(_),u_pixel_coord_lower:new o.Uniform2f(_),u_tile_units_to_pixels:new o.Uniform1f(_)}),terrainRaster:Us,terrainDepth:Us,skybox:_=>({u_matrix:new o.UniformMatrix4f(_),u_sun_direction:new o.Uniform3f(_),u_cubemap:new o.Uniform1i(_),u_opacity:new o.Uniform1f(_),u_temporal_offset:new o.Uniform1f(_)}),skyboxGradient:_=>({u_matrix:new o.UniformMatrix4f(_),u_color_ramp:new o.Uniform1i(_),u_center_direction:new o.Uniform3f(_),u_radius:new o.Uniform1f(_),u_opacity:new o.Uniform1f(_),u_temporal_offset:new o.Uniform1f(_)}),skyboxCapture:_=>({u_matrix_3f:new o.UniformMatrix3f(_),u_sun_direction:new o.Uniform3f(_),u_sun_intensity:new o.Uniform1f(_),u_color_tint_r:new o.Uniform4f(_),u_color_tint_m:new o.Uniform4f(_),u_luminance:new o.Uniform1f(_)}),globeRaster:_=>({u_proj_matrix:new o.UniformMatrix4f(_),u_globe_matrix:new o.UniformMatrix4f(_),u_normalize_matrix:new o.UniformMatrix4f(_),u_merc_matrix:new o.UniformMatrix4f(_),u_zoom_transition:new o.Uniform1f(_),u_merc_center:new o.Uniform2f(_),u_image0:new o.Uniform1i(_),u_grid_matrix:new o.UniformMatrix3f(_),u_frustum_tl:new o.Uniform3f(_),u_frustum_tr:new o.Uniform3f(_),u_frustum_br:new o.Uniform3f(_),u_frustum_bl:new o.Uniform3f(_),u_globe_pos:new o.Uniform3f(_),u_globe_radius:new o.Uniform1f(_),u_viewport:new o.Uniform2f(_)}),globeAtmosphere:_=>({u_frustum_tl:new o.Uniform3f(_),u_frustum_tr:new o.Uniform3f(_),u_frustum_br:new o.Uniform3f(_),u_frustum_bl:new o.Uniform3f(_),u_horizon:new o.Uniform1f(_),u_transition:new o.Uniform1f(_),u_fadeout_range:new o.Uniform1f(_),u_color:new o.Uniform4f(_),u_high_color:new o.Uniform4f(_),u_space_color:new o.Uniform4f(_),u_star_intensity:new o.Uniform1f(_),u_star_density:new o.Uniform1f(_),u_star_size:new o.Uniform1f(_),u_temporal_offset:new o.Uniform1f(_),u_horizon_angle:new o.Uniform1f(_),u_rotation_matrix:new o.UniformMatrix4f(_)})};let Js;function ll(_,l,f,b,T,M,F){const G=_.context,H=G.gl,Y=_.transform,X=_.useProgram("collisionBox"),te=[];let le=0,ge=0;for(let Ie=0;Ie<b.length;Ie++){const Le=b[Ie],Ae=l.getTile(Le),Pe=Ae.getBucket(f);if(!Pe)continue;const qe=Is(Le,Pe,Y);let rt=qe;T[0]===0&&T[1]===0||(rt=_.translatePosMatrix(qe,Ae,T,M));const Xe=F?Pe.textCollisionBox:Pe.iconCollisionBox,St=Pe.collisionCircleArray;if(St.length>0){const je=o.create(),_t=rt;o.mul(je,Pe.placementInvProjMatrix,Y.glCoordMatrix),o.mul(je,je,Pe.placementViewportMatrix),te.push({circleArray:St,circleOffset:ge,transform:_t,invTransform:je,projection:Pe.getProjection()}),le+=St.length/4,ge=le}Xe&&(_.terrain&&_.terrain.setupElevationDraw(Ae,X),X.draw(G,H.LINES,o.DepthMode.disabled,o.StencilMode.disabled,_.colorModeForRenderPass(),o.CullFaceMode.disabled,Ks(rt,Y,Ae,Pe.getProjection()),f.id,Xe.layoutVertexBuffer,Xe.indexBuffer,Xe.segments,null,Y.zoom,null,[Xe.collisionVertexBuffer,Xe.collisionVertexBufferExt]))}if(!F||!te.length)return;const pe=_.useProgram("collisionCircle"),ve=new o.StructArrayLayout2f1f2i16;ve.resize(4*le),ve._trim();let fe=0;for(const Ie of te)for(let Le=0;Le<Ie.circleArray.length/4;Le++){const Ae=4*Le,Pe=Ie.circleArray[Ae+0],qe=Ie.circleArray[Ae+1],rt=Ie.circleArray[Ae+2],Xe=Ie.circleArray[Ae+3];ve.emplace(fe++,Pe,qe,rt,Xe,0),ve.emplace(fe++,Pe,qe,rt,Xe,1),ve.emplace(fe++,Pe,qe,rt,Xe,2),ve.emplace(fe++,Pe,qe,rt,Xe,3)}(!Js||Js.length<2*le)&&(Js=function(Ie){const Le=2*Ie,Ae=new o.StructArrayLayout3ui6;Ae.resize(Le),Ae._trim();for(let Pe=0;Pe<Le;Pe++){const qe=6*Pe;Ae.uint16[qe+0]=4*Pe+0,Ae.uint16[qe+1]=4*Pe+1,Ae.uint16[qe+2]=4*Pe+2,Ae.uint16[qe+3]=4*Pe+2,Ae.uint16[qe+4]=4*Pe+3,Ae.uint16[qe+5]=4*Pe+0}return Ae}(le));const de=G.createIndexBuffer(Js,!0),be=G.createVertexBuffer(ve,o.collisionCircleLayout.members,!0);for(const Ie of te){const Le={u_matrix:Ie.transform,u_inv_matrix:Ie.invTransform,u_camera_to_center_distance:(he=Y).getCameraToCenterDistance(Ie.projection),u_viewport_size:[he.width,he.height]};pe.draw(G,H.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,_.colorModeForRenderPass(),o.CullFaceMode.disabled,Le,f.id,be,de,o.SegmentVector.simpleSegment(0,2*Ie.circleOffset,Ie.circleArray.length,Ie.circleArray.length/2),null,Y.zoom)}var he;be.destroy(),de.destroy()}const cl=o.create();function No(_,l,f,b,T,M){const{horizontalAlign:F,verticalAlign:G}=o.getAnchorAlignment(_),H=-(F-.5)*l,Y=-(G-.5)*f,X=o.evaluateVariableOffset(_,b);return new o.pointGeometry((H/T+X[0])*M,(Y/T+X[1])*M)}function nd(_,l,f,b,T,M,F,G,H,Y,X){const te=_.text.placedSymbolArray,le=_.text.dynamicLayoutVertexArray,ge=_.icon.dynamicLayoutVertexArray,pe={},ve=Zo(G,_.getProjection(),M),fe=M.elevation,de=_.getProjection().upVectorScale(G.canonical,M.center.lat,M.worldSize);le.clear();for(let be=0;be<te.length;be++){const he=te.get(be),Ie=_.allowVerticalPlacement&&!he.placedOrientation,Le=he.hidden||!he.crossTileID||Ie?null:b[he.crossTileID];if(Le){const Ae=new o.pointGeometry(he.tileAnchorX,he.tileAnchorY),Pe=_.getProjection().upVector(G.canonical,Ae.x,Ae.y),qe=fe?fe.getAtTileOffset(G,Ae.x,Ae.y):0,rt=Cn([he.projectedAnchorX+qe*Pe[0]*de.metersToTile,he.projectedAnchorY+qe*Pe[1]*de.metersToTile,he.projectedAnchorZ+qe*Pe[2]*de.metersToTile],f?ve:F),Xe=Sn(M.getCameraToCenterDistance(_.getProjection()),rt.signedDistanceFromCamera);let St=T.evaluateSizeForFeature(_.textSizeData,Y,he)*Xe/o.ONE_EM;f&&(St*=_.tilePixelRatio/H);const{width:je,height:_t,anchor:ht,textOffset:We,textScale:Ue}=Le,Dt=No(ht,je,_t,We,Ue,St);let Nt;if(f){const Mt=Ae.add(Dt),{x:Zt,y:an,z:tn}=_.getProjection().projectTilePoint(Mt.x,Mt.y,G.canonical);Nt=Cn([Zt+qe*Pe[0]*de.metersToTile,an+qe*Pe[1]*de.metersToTile,tn+qe*Pe[2]*de.metersToTile],F).point}else{const Mt=l?Dt.rotate(-M.angle):Dt;Nt=[rt.point[0]+Mt.x,rt.point[1]+Mt.y,0]}const Lt=_.allowVerticalPlacement&&he.placedOrientation===o.WritingMode.vertical?Math.PI/2:0;for(let Mt=0;Mt<he.numGlyphs;Mt++)o.addDynamicAttributes(le,Nt[0],Nt[1],Nt[2],Lt);X&&he.associatedIconIndex>=0&&(pe[he.associatedIconIndex]={shiftedAnchor:Nt,angle:Lt})}else Ji(he.numGlyphs,le)}if(X){ge.clear();const be=_.icon.placedSymbolArray;for(let he=0;he<be.length;he++){const Ie=be.get(he);if(Ie.hidden)Ji(Ie.numGlyphs,ge);else{const Le=pe[he];if(Le)for(let Ae=0;Ae<Ie.numGlyphs;Ae++)o.addDynamicAttributes(ge,Le.shiftedAnchor[0],Le.shiftedAnchor[1],Le.shiftedAnchor[2],Le.angle);else Ji(Ie.numGlyphs,ge)}}_.icon.dynamicLayoutVertexBuffer.updateData(ge)}_.text.dynamicLayoutVertexBuffer.updateData(le)}function id(_,l,f){return f.iconsInText&&l?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function Nc(_,l,f,b,T,M,F,G,H,Y,X,te){const le=_.context,ge=le.gl,pe=_.transform,ve=G==="map",fe=H==="map",de=ve&&f.layout.get("symbol-placement")!=="point",be=ve&&!fe&&!de,he=f.layout.get("symbol-sort-key").constantOr(1)!==void 0;let Ie=!1;const Le=_.depthModeForSublayer(0,o.DepthMode.ReadOnly),Ae=[o.mercatorXfromLng(pe.center.lng),o.mercatorYfromLat(pe.center.lat)],Pe=f.layout.get("text-variable-anchor"),qe=pe.projection.name==="globe",rt=[],Xe=[0,-1,0];let St=Xe;!qe&&!pe.mercatorFromTransition||ve||(St=function(je){const _t=je._camera.getWorldToCamera(je.worldSize,1),ht=o.multiply([],_t,je.globeMatrix);o.invert(ht,ht);const We=[0,0,0],Ue=[0,1,0,0];return o.transformMat4$1(Ue,Ue,ht),We[0]=Ue[0],We[1]=Ue[1],We[2]=Ue[2],o.normalize(We,We),We}(pe));for(const je of b){const _t=l.getTile(je),ht=_t.getBucket(f);if(!ht||ht.projection.name==="mercator"&&qe)continue;const We=T?ht.text:ht.icon;if(!We||ht.fullyClipped||!We.segments.get().length)continue;const Ue=We.programConfigurations.get(f.id),Dt=T||ht.sdfIcons,Nt=T?ht.textSizeData:ht.iconSizeData,Lt=fe||pe.pitch!==0,Mt=o.evaluateSizeForZoom(Nt,pe.zoom);let Zt,an,tn,Yt,It=[0,0],pn=null;if(T){if(an=_t.glyphAtlasTexture,tn=ge.LINEAR,Zt=_t.glyphAtlasTexture.size,ht.iconsInText){It=_t.imageAtlasTexture.size,pn=_t.imageAtlasTexture;const yi=Nt.kind==="composite"||Nt.kind==="camera";Yt=Lt||_.options.rotating||_.options.zooming||yi?ge.LINEAR:ge.NEAREST}}else{const yi=f.layout.get("icon-size").constantOr(0)!==1||ht.iconsNeedLinear;an=_t.imageAtlasTexture,tn=Dt||_.options.rotating||_.options.zooming||yi||Lt?ge.LINEAR:ge.NEAREST,Zt=_t.imageAtlasTexture.size}const xn=ht.projection.name==="globe",Fn=xn?St:Xe,Vn=xn?o.globeToMercatorTransition(pe.zoom):0,Pn=Zo(je,ht.getProjection(),pe),hi=pe.calculatePixelsToTileUnitsMatrix(_t),$i=Eo(Pn,_t.tileID.canonical,fe,ve,pe,ht.getProjection(),hi),fr=_.terrain&&fe&&de?o.invert(o.create(),$i):cl,Wn=Co(Pn,_t.tileID.canonical,fe,ve,pe,ht.getProjection(),hi),ei=Pe&&ht.hasTextData(),On=f.layout.get("icon-text-fit")!=="none"&&ei&&ht.hasIconData();if(de){const yi=pe.elevation,hr=yi?yi.getAtTileOffsetFunc(je,pe.center.lat,pe.worldSize,ht.getProjection()):tr=>[0,0,0],Fr=hc(Pn,_t.tileID.canonical,fe,ve,pe,ht.getProjection(),hi);So(ht,Pn,_,T,Fr,Wn,fe,Y,hr,je)}const si=de||T&&Pe||On,Ti=_.translatePosMatrix(Pn,_t,M,F),Hn=si?cl:$i,Bi=_.translatePosMatrix(Wn,_t,M,F,!0),so=ht.getProjection().createInversionMatrix(pe,je.canonical),er=[];_.terrainRenderModeElevated()&&fe&&er.push("PITCH_WITH_MAP_TERRAIN"),xn&&er.push("PROJECTION_GLOBE_VIEW"),si&&er.push("PROJECTED_POS_ON_VIEWPORT");const Ni=Dt&&f.paint.get(T?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Po;Po=Dt?ht.iconsInText?ed(Nt.kind,Mt,be,fe,_,Ti,Hn,Bi,Zt,It,je,Vn,Ae,so,Fn,ht.getProjection()):Ys(Nt.kind,Mt,be,fe,_,Ti,Hn,Bi,T,Zt,!0,je,Vn,Ae,so,Fn,ht.getProjection()):$c(Nt.kind,Mt,be,fe,_,Ti,Hn,Bi,T,Zt,je,Vn,Ae,so,Fn,ht.getProjection());const zr={program:_.useProgram(id(Dt,T,ht),Ue,er),buffers:We,uniformValues:Po,atlasTexture:an,atlasTextureIcon:pn,atlasInterpolation:tn,atlasInterpolationIcon:Yt,isSDF:Dt,hasHalo:Ni,tile:_t,labelPlaneMatrixInv:fr};if(he&&ht.canOverlap){Ie=!0;const yi=We.segments.get();for(const hr of yi)rt.push({segments:new o.SegmentVector([hr]),sortKey:hr.sortKey,state:zr})}else rt.push({segments:We.segments,sortKey:0,state:zr})}Ie&&rt.sort((je,_t)=>je.sortKey-_t.sortKey);for(const je of rt){const _t=je.state;if(_.terrain&&_.terrain.setupElevationDraw(_t.tile,_t.program,{useDepthForOcclusion:!qe,labelPlaneMatrixInv:_t.labelPlaneMatrixInv}),le.activeTexture.set(ge.TEXTURE0),_t.atlasTexture.bind(_t.atlasInterpolation,ge.CLAMP_TO_EDGE),_t.atlasTextureIcon&&(le.activeTexture.set(ge.TEXTURE1),_t.atlasTextureIcon&&_t.atlasTextureIcon.bind(_t.atlasInterpolationIcon,ge.CLAMP_TO_EDGE)),_t.isSDF){const ht=_t.uniformValues;_t.hasHalo&&(ht.u_is_halo=1,Mc(_t.buffers,je.segments,f,_,_t.program,Le,X,te,ht)),ht.u_is_halo=0}Mc(_t.buffers,je.segments,f,_,_t.program,Le,X,te,_t.uniformValues)}}function Mc(_,l,f,b,T,M,F,G,H){const Y=b.context,X=[_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer,_.globeExtVertexBuffer];T.draw(Y,Y.gl.TRIANGLES,M,F,G,o.CullFaceMode.disabled,H,f.id,_.layoutVertexBuffer,_.indexBuffer,l,f.paint,b.transform.zoom,_.programConfigurations.get(f.id),X)}function Ic(_,l,f,b,T,M,F){const G=_.context.gl,H=f.paint.get("fill-pattern"),Y=H&&H.constantOr(1),X=f.getCrossfadeParameters();let te,le,ge,pe,ve;F?(le=Y&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",te=G.LINES):(le=Y?"fillPattern":"fill",te=G.TRIANGLES);for(const fe of b){const de=l.getTile(fe);if(Y&&!de.patternsLoaded())continue;const be=de.getBucket(f);if(!be)continue;_.prepareDrawTile();const he=be.programConfigurations.get(f.id),Ie=_.useProgram(le,he);Y&&(_.context.activeTexture.set(G.TEXTURE0),de.imageAtlasTexture.bind(G.LINEAR,G.CLAMP_TO_EDGE),he.updatePaintBuffers(X));const Le=H.constantOr(null);if(Le&&de.imageAtlas){const Pe=de.imageAtlas,qe=Pe.patternPositions[Le.to.toString()],rt=Pe.patternPositions[Le.from.toString()];qe&&rt&&he.setConstantPatternPositions(qe,rt)}const Ae=_.translatePosMatrix(fe.projMatrix,de,f.paint.get("fill-translate"),f.paint.get("fill-translate-anchor"));if(F){pe=be.indexBuffer2,ve=be.segments2;const Pe=_.terrain&&_.terrain.renderingToTexture?_.terrain.drapeBufferSize:[G.drawingBufferWidth,G.drawingBufferHeight];ge=le==="fillOutlinePattern"&&Y?Ju(Ae,_,X,de,Pe):Tc(Ae,Pe)}else pe=be.indexBuffer,ve=be.segments,ge=Y?nl(Ae,_,X,de):qs(Ae);_.prepareDrawProgram(_.context,Ie,fe.toUnwrapped()),Ie.draw(_.context,te,T,_.stencilModeForClipping(fe),M,o.CullFaceMode.disabled,ge,f.id,be.layoutVertexBuffer,pe,ve,f.paint,_.transform.zoom,he)}}function ul(_,l,f,b,T,M,F){const G=_.context,H=G.gl,Y=_.transform,X=f.paint.get("fill-extrusion-pattern"),te=X.constantOr(1),le=f.getCrossfadeParameters(),ge=f.paint.get("fill-extrusion-opacity"),pe=[f.paint.get("fill-extrusion-ambient-occlusion-intensity"),f.paint.get("fill-extrusion-ambient-occlusion-radius")],ve=f.layout.get("fill-extrusion-edge-radius"),fe=Y.projection.name==="globe"?o.fillExtrusionHeightLift():0,de=Y.projection.name==="globe",be=de?o.globeToMercatorTransition(Y.zoom):0,he=[o.mercatorXfromLng(Y.center.lng),o.mercatorYfromLat(Y.center.lat)],Ie=[];de&&(Ie.push("PROJECTION_GLOBE_VIEW"),_.style.terrainSetForDrapingOnly()&&Ie.push("TERRAIN")),pe[0]>0&&Ie.push("FAUX_AO");for(const Le of b){const Ae=l.getTile(Le),Pe=Ae.getBucket(f);if(!Pe||Pe.projection.name!==Y.projection.name)continue;const qe=Pe.programConfigurations.get(f.id),rt=_.useProgram(te?"fillExtrusionPattern":"fillExtrusion",qe,Ie);if(_.terrain){const Ue=_.terrain;if(_.style.terrainSetForDrapingOnly())Ue.setupElevationDraw(Ae,rt,{useMeterToDem:!0});else{if(!Pe.enableTerrain)continue;if(Ue.setupElevationDraw(Ae,rt,{useMeterToDem:!0}),dl(G,l,Le,Pe,f,Ue),!Pe.centroidVertexBuffer){const Dt=rt.attributes.a_centroid_pos;Dt!==void 0&&H.vertexAttrib2f(Dt,0,0)}}}te&&(_.context.activeTexture.set(H.TEXTURE0),Ae.imageAtlasTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),qe.updatePaintBuffers(le));const Xe=X.constantOr(null);if(Xe&&Ae.imageAtlas){const Ue=Ae.imageAtlas,Dt=Ue.patternPositions[Xe.to.toString()],Nt=Ue.patternPositions[Xe.from.toString()];Dt&&Nt&&qe.setConstantPatternPositions(Dt,Nt)}const St=_.translatePosMatrix(Le.projMatrix,Ae,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),je=Y.projection.createInversionMatrix(Y,Le.canonical),_t=f.paint.get("fill-extrusion-vertical-gradient"),ht=te?tl(St,_,_t,ge,pe,ve,Le,le,Ae,fe,be,he,je):Hs(St,_,_t,ge,pe,ve,Le,fe,be,he,je);_.prepareDrawProgram(G,rt,Le.toUnwrapped());const We=[];_.terrain&&We.push(Pe.centroidVertexBuffer),de&&We.push(Pe.layoutVertexExtBuffer),rt.draw(G,G.gl.TRIANGLES,T,M,F,o.CullFaceMode.backCCW,ht,f.id,Pe.layoutVertexBuffer,Pe.indexBuffer,Pe.segments,f.paint,_.transform.zoom,qe,We)}}function dl(_,l,f,b,T,M){const F=[de=>{let be=de.canonical.x-1,he=de.wrap;return be<0&&(be=(1<<de.canonical.z)-1,he--),new o.OverscaledTileID(de.overscaledZ,he,de.canonical.z,be,de.canonical.y)},de=>{let be=de.canonical.x+1,he=de.wrap;return be===1<<de.canonical.z&&(be=0,he++),new o.OverscaledTileID(de.overscaledZ,he,de.canonical.z,be,de.canonical.y)},de=>new o.OverscaledTileID(de.overscaledZ,de.wrap,de.canonical.z,de.canonical.x,(de.canonical.y===0?1<<de.canonical.z:de.canonical.y)-1),de=>new o.OverscaledTileID(de.overscaledZ,de.wrap,de.canonical.z,de.canonical.x,de.canonical.y===(1<<de.canonical.z)-1?0:de.canonical.y+1)],G=de=>{const be=l.getSource().minzoom,he=Le=>{const Ae=l.getTileByID(Le);if(Ae&&Ae.hasData())return Ae.getBucket(T)},Ie=[0,-1,1];for(const Le of Ie){if(de.overscaledZ+Le<be)continue;const Ae=he(de.calculateScaledKey(de.overscaledZ+Le));if(Ae)return Ae}},H=[0,0,0],Y=(de,be)=>(H[0]=Math.min(de.min.y,be.min.y),H[1]=Math.max(de.max.y,be.max.y),H[2]=o.EXTENT-be.min.x>de.max.x?be.min.x-o.EXTENT:de.max.x,H),X=(de,be)=>(H[0]=Math.min(de.min.x,be.min.x),H[1]=Math.max(de.max.x,be.max.x),H[2]=o.EXTENT-be.min.y>de.max.y?be.min.y-o.EXTENT:de.max.y,H),te=[(de,be)=>Y(de,be),(de,be)=>Y(be,de),(de,be)=>X(de,be),(de,be)=>X(be,de)],le=new o.pointGeometry(0,0);let ge,pe,ve;const fe=(de,be,he,Ie,Le)=>{const Ae=[[Ie?he:de,Ie?de:he,0],[Ie?he:be,Ie?be:he,0]],Pe=Le<0?o.EXTENT+Le:Le,qe=[Ie?Pe:(de+be)/2,Ie?(de+be)/2:Pe,0];return he===0&&Le<0||he!==0&&Le>0?M.getForTilePoints(ve,[qe],!0,pe):Ae.push(qe),M.getForTilePoints(f,Ae,!0,ge),Math.max(Ae[0][2],Ae[1][2],qe[2])/M.exaggeration()};for(let de=0;de<4;de++){const be=(de<2?1:5)-de,he=b.borders[de];if(he.length===0)continue;const Ie=ve=F[de](f),Le=G(Ie);if(!(Le&&Le instanceof o.FillExtrusionBucket&&Le.enableTerrain)||b.borderDoneWithNeighborZ[de]===Le.canonical.z&&Le.borderDoneWithNeighborZ[be]===b.canonical.z||(pe=M.findDEMTileFor(Ie),!pe||!pe.dem))continue;if(!ge){const rt=M.findDEMTileFor(f);if(!rt||!rt.dem)return;ge=rt}const Ae=Le.borders[be];let Pe=0;const qe=Le.borderDoneWithNeighborZ[be]!==b.canonical.z;if(b.canonical.z===Le.canonical.z){for(let rt=0;rt<he.length;rt++){const Xe=b.featuresOnBorder[he[rt]],St=Xe.borders[de];let je;for(;Pe<Ae.length&&(je=Le.featuresOnBorder[Ae[Pe]],!(je.borders[be][1]>St[0]+3));)qe&&Le.encodeCentroid(void 0,je,!1),Pe++;if(je&&Pe<Ae.length){const _t=Pe;let ht=0;for(;!(je.borders[be][0]>St[1]-3)&&(ht++,++Pe!==Ae.length);)je=Le.featuresOnBorder[Ae[Pe]];if(je=Le.featuresOnBorder[Ae[_t]],Xe.intersectsCount()>1||je.intersectsCount()>1||ht!==1){ht!==1&&(Pe=_t),b.encodeCentroid(void 0,Xe,!1),qe&&Le.encodeCentroid(void 0,je,!1);continue}const We=te[de](Xe,je),Ue=de%2?o.EXTENT-1:0;le.x=fe(We[0],Math.min(o.EXTENT-1,We[1]),Ue,de<2,We[2]),le.y=0,b.encodeCentroid(le,Xe,!1),qe&&Le.encodeCentroid(le,je,!1)}else b.encodeCentroid(void 0,Xe,!1)}b.borderDoneWithNeighborZ[de]=Le.canonical.z,b.needsCentroidUpdate=!0,qe&&(Le.borderDoneWithNeighborZ[be]=b.canonical.z,Le.needsCentroidUpdate=!0)}else{for(const rt of he)b.encodeCentroid(void 0,b.featuresOnBorder[rt],!1);if(qe){for(const rt of Ae)Le.encodeCentroid(void 0,Le.featuresOnBorder[rt],!1);Le.borderDoneWithNeighborZ[be]=b.canonical.z,Le.needsCentroidUpdate=!0}b.borderDoneWithNeighborZ[de]=Le.canonical.z,b.needsCentroidUpdate=!0}}(b.needsCentroidUpdate||!b.centroidVertexBuffer&&b.centroidVertexArray.length!==0)&&b.uploadCentroid(_)}const pl=new o.Color(1,0,0,1),Lc=new o.Color(0,1,0,1),Oc=new o.Color(0,0,1,1),Pc=new o.Color(1,0,1,1),fl=new o.Color(0,1,1,1);function io(_,l,f){const b=_.context,T=_.transform,M=b.gl,F=T.projection.name==="globe",G=F?["PROJECTION_GLOBE_VIEW"]:null;let H=f.projMatrix;if(F&&o.globeToMercatorTransition(T.zoom)>0){const Xe=o.transitionTileAABBinECEF(f.canonical,T),St=o.globeDenormalizeECEF(Xe);H=o.multiply(new Float32Array(16),T.globeMatrix,St),o.multiply(H,T.projMatrix,H)}const Y=_.useProgram("debug",null,G),X=l.getTileByID(f.key);_.terrain&&_.terrain.setupElevationDraw(X,Y);const te=o.DepthMode.disabled,le=o.StencilMode.disabled,ge=_.colorModeForRenderPass(),pe="$debug";b.activeTexture.set(M.TEXTURE0),_.emptyTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),F?X._makeGlobeTileDebugBuffers(_.context,T):X._makeDebugTileBoundsBuffers(_.context,T.projection);const ve=X._tileDebugBuffer||_.debugBuffer,fe=X._tileDebugIndexBuffer||_.debugIndexBuffer,de=X._tileDebugSegments||_.debugSegments;Y.draw(b,M.LINE_STRIP,te,le,ge,o.CullFaceMode.disabled,Ws(H,o.Color.red),pe,ve,fe,de,null,null,null,[X._globeTileDebugBorderBuffer]);const be=X.latestRawTileData,he=Math.floor((be&&be.byteLength||0)/1024),Ie=l.getTile(f).tileSize,Le=512/Math.min(Ie,512)*(f.overscaledZ/T.zoom)*.5;let Ae=f.canonical.toString();f.overscaledZ!==f.canonical.z&&(Ae+=` => ${f.overscaledZ}`),Ae+=` ${he}kb`,function(Xe,St){Xe.initDebugOverlayCanvas();const je=Xe.debugOverlayCanvas,_t=Xe.context.gl,ht=Xe.debugOverlayCanvas.getContext("2d");ht.clearRect(0,0,je.width,je.height),ht.shadowColor="white",ht.shadowBlur=2,ht.lineWidth=1.5,ht.strokeStyle="white",ht.textBaseline="top",ht.font="bold 36px Open Sans, sans-serif",ht.fillText(St,5,5),ht.strokeText(St,5,5),Xe.debugOverlayTexture.update(je),Xe.debugOverlayTexture.bind(_t.LINEAR,_t.CLAMP_TO_EDGE)}(_,Ae);const Pe=X._tileDebugTextBuffer||_.debugBuffer,qe=X._tileDebugTextIndexBuffer||_.quadTriangleIndexBuffer,rt=X._tileDebugTextSegments||_.debugSegments;Y.draw(b,M.TRIANGLES,te,le,o.ColorMode.alphaBlended,o.CullFaceMode.disabled,Ws(H,o.Color.transparent,Le),pe,Pe,qe,rt,null,null,null,[X._globeTileDebugTextBuffer])}function Mo(_,l,f,b){br(_,0,l+f/2,_.transform.width,f,b)}function hl(_,l,f,b){br(_,l-f/2,0,f,_.transform.height,b)}function br(_,l,f,b,T,M){const F=_.context,G=F.gl;G.enable(G.SCISSOR_TEST),G.scissor(l*o.exported.devicePixelRatio,f*o.exported.devicePixelRatio,b*o.exported.devicePixelRatio,T*o.exported.devicePixelRatio),F.clear({color:M}),G.disable(G.SCISSOR_TEST)}const Io=o.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Dc}=Io;function dr(_,l,f,b){_.emplaceBack(l,f,b)}class In{constructor(l){this.vertexArray=new o.StructArrayLayout3f12,this.indices=new o.StructArrayLayout3ui6,dr(this.vertexArray,-1,-1,1),dr(this.vertexArray,1,-1,1),dr(this.vertexArray,-1,1,1),dr(this.vertexArray,1,1,1),dr(this.vertexArray,-1,-1,-1),dr(this.vertexArray,1,-1,-1),dr(this.vertexArray,-1,1,-1),dr(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=l.createVertexBuffer(this.vertexArray,Dc),this.indexBuffer=l.createIndexBuffer(this.indices),this.segment=o.SegmentVector.simpleSegment(0,0,36,12)}}function xr(_,l,f,b,T,M){const F=_.gl,G=l.paint.get("sky-atmosphere-color"),H=l.paint.get("sky-atmosphere-halo-color"),Y=l.paint.get("sky-atmosphere-sun-intensity"),X=((te,le,ge,pe,ve)=>({u_matrix_3f:te,u_sun_direction:le,u_sun_intensity:ge,u_color_tint_r:[pe.r,pe.g,pe.b,pe.a],u_color_tint_m:[ve.r,ve.g,ve.b,ve.a],u_luminance:5e-5}))(o.fromMat4(o.create$1(),b),T,Y,G,H);F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_CUBE_MAP_POSITIVE_X+M,l.skyboxTexture,0),f.draw(_,F.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.frontCW,X,"skyboxCapture",l.skyboxGeometry.vertexBuffer,l.skyboxGeometry.indexBuffer,l.skyboxGeometry.segment)}const rd=o.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Bc{constructor(l){const f=new o.StructArrayLayout5f20;f.emplaceBack(-1,1,1,0,0),f.emplaceBack(1,1,1,1,0),f.emplaceBack(1,-1,1,1,1),f.emplaceBack(-1,-1,1,0,1);const b=new o.StructArrayLayout3ui6;b.emplaceBack(0,1,2),b.emplaceBack(2,3,0),this.vertexBuffer=l.createVertexBuffer(f,rd.members),this.indexBuffer=l.createIndexBuffer(b),this.segments=o.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Lo={symbol:function(_,l,f,b,T){if(_.renderPass!=="translucent")return;const M=o.StencilMode.disabled,F=_.colorModeForRenderPass();f.layout.get("text-variable-anchor")&&function(G,H,Y,X,te,le,ge){const pe=H.transform,ve=te==="map",fe=le==="map";for(const de of G){const be=X.getTile(de),he=be.getBucket(Y);if(!he||!he.text||!he.text.segments.get().length)continue;const Ie=o.evaluateSizeForZoom(he.textSizeData,pe.zoom),Le=Zo(de,he.getProjection(),pe),Ae=pe.calculatePixelsToTileUnitsMatrix(be),Pe=Eo(Le,be.tileID.canonical,fe,ve,pe,he.getProjection(),Ae),qe=Y.layout.get("icon-text-fit")!=="none"&&he.hasIconData();if(Ie){const rt=Math.pow(2,pe.zoom-be.tileID.overscaledZ);nd(he,ve,fe,ge,o.symbolSize,pe,Pe,de,rt,Ie,qe)}}}(b,_,f,l,f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),T),f.paint.get("icon-opacity").constantOr(1)!==0&&Nc(_,l,f,b,!1,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),f.layout.get("icon-rotation-alignment"),f.layout.get("icon-pitch-alignment"),f.layout.get("icon-keep-upright"),M,F),f.paint.get("text-opacity").constantOr(1)!==0&&Nc(_,l,f,b,!0,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),f.layout.get("text-keep-upright"),M,F),l.map.showCollisionBoxes&&(ll(_,l,f,b,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),!0),ll(_,l,f,b,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),!1))},circle:function(_,l,f,b){if(_.renderPass!=="translucent")return;const T=f.paint.get("circle-opacity"),M=f.paint.get("circle-stroke-width"),F=f.paint.get("circle-stroke-opacity"),G=f.layout.get("circle-sort-key").constantOr(1)!==void 0;if(T.constantOr(1)===0&&(M.constantOr(1)===0||F.constantOr(1)===0))return;const H=_.context,Y=H.gl,X=_.transform,te=_.depthModeForSublayer(0,o.DepthMode.ReadOnly),le=o.StencilMode.disabled,ge=_.colorModeForRenderPass(),pe=X.projection.name==="globe",ve=[o.mercatorXfromLng(X.center.lng),o.mercatorYfromLat(X.center.lat)],fe=[];for(let be=0;be<b.length;be++){const he=b[be],Ie=l.getTile(he),Le=Ie.getBucket(f);if(!Le||Le.projection.name!==X.projection.name)continue;const Ae=Le.programConfigurations.get(f.id),Pe=Ac(f);pe&&Pe.push("PROJECTION_GLOBE_VIEW");const qe=_.useProgram("circle",Ae,Pe),rt=Le.layoutVertexBuffer,Xe=Le.globeExtVertexBuffer,St=Le.indexBuffer,je=X.projection.createInversionMatrix(X,he.canonical),_t={programConfiguration:Ae,program:qe,layoutVertexBuffer:rt,globeExtVertexBuffer:Xe,indexBuffer:St,uniformValues:ns(_,he,Ie,je,ve,f),tile:Ie};if(G){const ht=Le.segments.get();for(const We of ht)fe.push({segments:new o.SegmentVector([We]),sortKey:We.sortKey,state:_t})}else fe.push({segments:Le.segments,sortKey:0,state:_t})}G&&fe.sort((be,he)=>be.sortKey-he.sortKey);const de={useDepthForOcclusion:!pe};for(const be of fe){const{programConfiguration:he,program:Ie,layoutVertexBuffer:Le,globeExtVertexBuffer:Ae,indexBuffer:Pe,uniformValues:qe,tile:rt}=be.state,Xe=be.segments;_.terrain&&_.terrain.setupElevationDraw(rt,Ie,de),_.prepareDrawProgram(H,Ie,rt.tileID.toUnwrapped()),Ie.draw(H,Y.TRIANGLES,te,le,ge,o.CullFaceMode.disabled,qe,f.id,Le,Pe,Xe,f.paint,X.zoom,he,[Ae])}},heatmap:function(_,l,f,b){if(f.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const T=_.context,M=T.gl,F=o.StencilMode.disabled,G=new o.ColorMode([M.ONE,M.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(ge,pe,ve,fe){const de=ge.gl,be=pe.width*fe,he=pe.height*fe;ge.activeTexture.set(de.TEXTURE1),ge.viewport.set([0,0,be,he]);let Ie=ve.heatmapFbo;if(!Ie||Ie&&(Ie.width!==be||Ie.height!==he)){Ie&&Ie.destroy();const Le=de.createTexture();de.bindTexture(de.TEXTURE_2D,Le),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_WRAP_S,de.CLAMP_TO_EDGE),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_WRAP_T,de.CLAMP_TO_EDGE),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_MIN_FILTER,de.LINEAR),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_MAG_FILTER,de.LINEAR),Ie=ve.heatmapFbo=ge.createFramebuffer(be,he,!1),function(Ae,Pe,qe,rt,Xe,St){const je=Ae.gl;je.texImage2D(je.TEXTURE_2D,0,je.RGBA,Xe,St,0,je.RGBA,Ae.extRenderToTextureHalfFloat?Ae.extTextureHalfFloat.HALF_FLOAT_OES:je.UNSIGNED_BYTE,null),rt.colorAttachment.set(qe)}(ge,0,Le,Ie,be,he)}else de.bindTexture(de.TEXTURE_2D,Ie.colorAttachment.get()),ge.bindFramebuffer.set(Ie.framebuffer)})(T,_,f,_.transform.projection.name==="globe"?.5:.25),T.clear({color:o.Color.transparent});const H=_.transform,Y=H.projection.name==="globe",X=Y?["PROJECTION_GLOBE_VIEW"]:null,te=Y?o.CullFaceMode.frontCCW:o.CullFaceMode.disabled,le=[o.mercatorXfromLng(H.center.lng),o.mercatorYfromLat(H.center.lat)];for(let ge=0;ge<b.length;ge++){const pe=b[ge];if(l.hasRenderableParent(pe))continue;const ve=l.getTile(pe),fe=ve.getBucket(f);if(!fe||fe.projection.name!==H.projection.name)continue;const de=fe.programConfigurations.get(f.id),be=_.useProgram("heatmap",de,X),{zoom:he}=_.transform;_.terrain&&_.terrain.setupElevationDraw(ve,be),_.prepareDrawProgram(T,be,pe.toUnwrapped());const Ie=H.projection.createInversionMatrix(H,pe.canonical);be.draw(T,M.TRIANGLES,o.DepthMode.disabled,F,G,te,il(_,pe,ve,Ie,le,he,f.paint.get("heatmap-intensity")),f.id,fe.layoutVertexBuffer,fe.indexBuffer,fe.segments,f.paint,_.transform.zoom,de,Y?[fe.globeExtVertexBuffer]:null)}T.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(T,M){const F=T.context,G=F.gl,H=M.heatmapFbo;if(!H)return;F.activeTexture.set(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,H.colorAttachment.get()),F.activeTexture.set(G.TEXTURE1);let Y=M.colorRampTexture;Y||(Y=M.colorRampTexture=new o.Texture(F,M.colorRamp,G.RGBA)),Y.bind(G.LINEAR,G.CLAMP_TO_EDGE),T.useProgram("heatmapTexture").draw(F,G.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,T.colorModeForRenderPass(),o.CullFaceMode.disabled,((X,te,le,ge)=>({u_image:0,u_color_ramp:1,u_opacity:te.paint.get("heatmap-opacity")}))(0,M),M.id,T.viewportBuffer,T.quadTriangleIndexBuffer,T.viewportSegments,M.paint,T.transform.zoom)}(_,f))},line:function(_,l,f,b){if(_.renderPass!=="translucent")return;const T=f.paint.get("line-opacity"),M=f.paint.get("line-width");if(T.constantOr(1)===0||M.constantOr(1)===0)return;const F=_.depthModeForSublayer(0,o.DepthMode.ReadOnly),G=_.colorModeForRenderPass(),H=_.terrain&&_.terrain.renderingToTexture?1:o.exported.devicePixelRatio,Y=f.paint.get("line-dasharray"),X=Y.constantOr(1),te=f.layout.get("line-cap"),le=f.paint.get("line-pattern"),ge=le.constantOr(1),pe=f.paint.get("line-gradient"),ve=f.getCrossfadeParameters(),fe=ge?"linePattern":"line",de=_.context,be=de.gl,he=(Le=>{const Ae=[];Rc(Le)&&Ae.push("RENDER_LINE_DASH"),Le.paint.get("line-gradient")&&Ae.push("RENDER_LINE_GRADIENT");const Pe=Le.paint.get("line-trim-offset");Pe[0]===0&&Pe[1]===0||Ae.push("RENDER_LINE_TRIM_OFFSET");const qe=Le.paint.get("line-pattern").constantOr(1),rt=Le.paint.get("line-opacity").constantOr(1)!==1;return!qe&&rt&&Ae.push("RENDER_LINE_ALPHA_DISCARD"),Ae})(f);let Ie=he.includes("RENDER_LINE_ALPHA_DISCARD");_.terrain&&_.terrain.clipOrMaskOverlapStencilType()&&(Ie=!1);for(const Le of b){const Ae=l.getTile(Le);if(ge&&!Ae.patternsLoaded())continue;const Pe=Ae.getBucket(f);if(!Pe)continue;_.prepareDrawTile();const qe=Pe.programConfigurations.get(f.id),rt=_.useProgram(fe,qe,he),Xe=le.constantOr(null);if(Xe&&Ae.imageAtlas){const Nt=Ae.imageAtlas,Lt=Nt.patternPositions[Xe.to.toString()],Mt=Nt.patternPositions[Xe.from.toString()];Lt&&Mt&&qe.setConstantPatternPositions(Lt,Mt)}const St=Y.constantOr(null),je=te.constantOr(null);if(!ge&&St&&je&&Ae.lineAtlas){const Nt=Ae.lineAtlas,Lt=Nt.getDash(St.to,je),Mt=Nt.getDash(St.from,je);Lt&&Mt&&qe.setConstantPatternPositions(Lt,Mt)}let[_t,ht]=f.paint.get("line-trim-offset");(je==="round"||je==="square")&&_t!==ht&&(_t===0&&(_t-=1),ht===1&&(ht+=1));const We=_.terrain?Le.projMatrix:null,Ue=ge?rl(_,Ae,f,ve,We,H):kc(_,Ae,f,ve,We,Pe.lineClipsArray.length,H,[_t,ht]);if(pe){const Nt=Pe.gradients[f.id];let Lt=Nt.texture;if(f.gradientVersion!==Nt.version){let Mt=256;if(f.stepInterpolant){const Zt=l.getSource().maxzoom,an=Le.canonical.z===Zt?Math.ceil(1<<_.transform.maxZoom-Le.canonical.z):1;Mt=o.clamp(o.nextPowerOfTwo(Pe.maxLineLength/o.EXTENT*1024*an),256,de.maxTextureSize)}Nt.gradient=o.renderColorRamp({expression:f.gradientExpression(),evaluationKey:"lineProgress",resolution:Mt,image:Nt.gradient||void 0,clips:Pe.lineClipsArray}),Nt.texture?Nt.texture.update(Nt.gradient):Nt.texture=new o.Texture(de,Nt.gradient,be.RGBA),Nt.version=f.gradientVersion,Lt=Nt.texture}de.activeTexture.set(be.TEXTURE1),Lt.bind(f.stepInterpolant?be.NEAREST:be.LINEAR,be.CLAMP_TO_EDGE)}X&&(de.activeTexture.set(be.TEXTURE0),Ae.lineAtlasTexture.bind(be.LINEAR,be.REPEAT),qe.updatePaintBuffers(ve)),ge&&(de.activeTexture.set(be.TEXTURE0),Ae.imageAtlasTexture.bind(be.LINEAR,be.CLAMP_TO_EDGE),qe.updatePaintBuffers(ve)),_.prepareDrawProgram(de,rt,Le.toUnwrapped());const Dt=Nt=>{rt.draw(de,be.TRIANGLES,F,Nt,G,o.CullFaceMode.disabled,Ue,f.id,Pe.layoutVertexBuffer,Pe.indexBuffer,Pe.segments,f.paint,_.transform.zoom,qe,[Pe.layoutVertexBuffer2])};if(Ie){const Nt=_.stencilModeForClipping(Le).ref;Nt===0&&_.terrain&&de.clear({stencil:0});const Lt={func:be.EQUAL,mask:255};Ue.u_alpha_discard_threshold=.8,Dt(new o.StencilMode(Lt,Nt,255,be.KEEP,be.KEEP,be.INVERT)),Ue.u_alpha_discard_threshold=0,Dt(new o.StencilMode(Lt,Nt,255,be.KEEP,be.KEEP,be.KEEP))}else Dt(_.stencilModeForClipping(Le))}Ie&&(_.resetStencilClippingMasks(),_.terrain&&de.clear({stencil:0}))},fill:function(_,l,f,b){const T=f.paint.get("fill-color"),M=f.paint.get("fill-opacity");if(M.constantOr(1)===0)return;const F=_.colorModeForRenderPass(),G=f.paint.get("fill-pattern"),H=_.opaquePassEnabledForLayer()&&!G.constantOr(1)&&T.constantOr(o.Color.transparent).a===1&&M.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===H){const Y=_.depthModeForSublayer(1,_.renderPass==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly);Ic(_,l,f,b,Y,F,!1)}if(_.renderPass==="translucent"&&f.paint.get("fill-antialias")){const Y=_.depthModeForSublayer(f.getPaintProperty("fill-outline-color")?2:0,o.DepthMode.ReadOnly);Ic(_,l,f,b,Y,F,!0)}},"fill-extrusion":function(_,l,f,b){const T=f.paint.get("fill-extrusion-opacity");if(T!==0&&_.renderPass==="translucent"){const M=new o.DepthMode(_.context.gl.LEQUAL,o.DepthMode.ReadWrite,_.depthRangeFor3D);if(T!==1||f.paint.get("fill-extrusion-pattern").constantOr(1))ul(_,l,f,b,M,o.StencilMode.disabled,o.ColorMode.disabled),ul(_,l,f,b,M,_.stencilModeFor3D(),_.colorModeForRenderPass()),_.resetStencilClippingMasks();else{const F=_.colorModeForRenderPass();ul(_,l,f,b,M,o.StencilMode.disabled,F)}}},hillshade:function(_,l,f,b){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const T=_.context,M=_.depthModeForSublayer(0,o.DepthMode.ReadOnly),F=_.colorModeForRenderPass(),G=_.terrain&&_.terrain.renderingToTexture,[H,Y]=_.renderPass!=="translucent"||G?[{},b]:_.stencilConfigForOverlap(b);for(const X of Y){const te=l.getTile(X);if(te.needsHillshadePrepare&&_.renderPass==="offscreen")bc(_,te,f,M,o.StencilMode.disabled,F);else if(_.renderPass==="translucent"){const le=G&&_.terrain?_.terrain.stencilModeForRTTOverlap(X):H[X.overscaledZ];Fs(_,X,te,f,M,le,F)}}T.viewport.set([0,0,_.width,_.height]),_.resetStencilClippingMasks()},raster:function(_,l,f,b,T,M){if(_.renderPass!=="translucent"||f.paint.get("raster-opacity")===0||!b.length)return;const F=_.context,G=F.gl,H=l.getSource(),Y=_.useProgram("raster"),X=_.colorModeForRenderPass(),te=_.terrain&&_.terrain.renderingToTexture,[le,ge]=H instanceof De||te?[{},b]:_.stencilConfigForOverlap(b),pe=ge[ge.length-1].overscaledZ,ve=!_.options.moving;for(const fe of ge){const de=te?o.DepthMode.disabled:_.depthModeForSublayer(fe.overscaledZ-pe,f.paint.get("raster-opacity")===1?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly,G.LESS),be=fe.toUnwrapped(),he=l.getTile(fe);if(te&&(!he||!he.hasData()))continue;const Ie=te?fe.projMatrix:_.transform.calculateProjMatrix(be,ve),Le=_.terrain&&te?_.terrain.stencilModeForRTTOverlap(fe):le[fe.overscaledZ],Ae=M?0:f.paint.get("raster-fade-duration");he.registerFadeDuration(Ae);const Pe=l.findLoadedParent(fe,0),qe=Qa(he,Pe,l,_.transform,Ae);let rt,Xe;_.terrain&&_.terrain.prepareDrawTile();const St=f.paint.get("raster-resampling")==="nearest"?G.NEAREST:G.LINEAR;F.activeTexture.set(G.TEXTURE0),he.texture.bind(St,G.CLAMP_TO_EDGE),F.activeTexture.set(G.TEXTURE1),Pe?(Pe.texture.bind(St,G.CLAMP_TO_EDGE),rt=Math.pow(2,Pe.tileID.overscaledZ-he.tileID.overscaledZ),Xe=[he.tileID.canonical.x*rt%1,he.tileID.canonical.y*rt%1]):he.texture.bind(St,G.CLAMP_TO_EDGE);const je=sl(Ie,Xe||[0,0],rt||1,qe,f,H instanceof De?H.perspectiveTransform:[0,0]);if(_.prepareDrawProgram(F,Y,be),H instanceof De)H.boundsBuffer&&H.boundsSegments&&Y.draw(F,G.TRIANGLES,de,o.StencilMode.disabled,X,o.CullFaceMode.disabled,je,f.id,H.boundsBuffer,_.quadTriangleIndexBuffer,H.boundsSegments);else{const{tileBoundsBuffer:_t,tileBoundsIndexBuffer:ht,tileBoundsSegments:We}=_.getTileBoundsBuffers(he);Y.draw(F,G.TRIANGLES,de,Le,X,o.CullFaceMode.disabled,je,f.id,_t,ht,We)}}_.resetStencilClippingMasks()},background:function(_,l,f,b){const T=f.paint.get("background-color"),M=f.paint.get("background-opacity");if(M===0)return;const F=_.context,G=F.gl,H=_.transform,Y=H.tileSize,X=f.paint.get("background-pattern");if(_.isPatternMissing(X))return;const te=!X&&T.a===1&&M===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==te)return;const le=o.StencilMode.disabled,ge=_.depthModeForSublayer(0,te==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly),pe=_.colorModeForRenderPass(),ve=_.useProgram(X?"backgroundPattern":"background");let fe,de=b;de||(fe=_.getBackgroundTiles(),de=Object.values(fe).map(he=>he.tileID)),X&&(F.activeTexture.set(G.TEXTURE0),_.imageManager.bind(_.context));const be=f.getCrossfadeParameters();for(const he of de){const Ie=he.toUnwrapped(),Le=b?he.projMatrix:_.transform.calculateProjMatrix(Ie);_.prepareDrawTile();const Ae=l?l.getTile(he):fe?fe[he.key]:new o.Tile(he,Y,H.zoom,_),Pe=X?td(Le,M,_,X,{tileID:he,tileSize:Y},be):al(Le,M,T);_.prepareDrawProgram(F,ve,Ie);const{tileBoundsBuffer:qe,tileBoundsIndexBuffer:rt,tileBoundsSegments:Xe}=_.getTileBoundsBuffers(Ae);ve.draw(F,G.TRIANGLES,ge,le,pe,o.CullFaceMode.disabled,Pe,f.id,qe,rt,Xe)}},sky:function(_,l,f){const b=_.transform,T=b.projection.name==="mercator"||b.projection.name==="globe"?1:o.smoothstep(7,8,b.zoom),M=f.paint.get("sky-opacity")*T;if(M===0)return;const F=_.context,G=f.paint.get("sky-type"),H=new o.DepthMode(F.gl.LEQUAL,o.DepthMode.ReadOnly,[0,1]),Y=_.frameCounter/1e3%1;G==="atmosphere"?_.renderPass==="offscreen"?f.needsSkyboxCapture(_)&&(function(X,te,le,ge){const pe=X.context,ve=pe.gl;let fe=te.skyboxFbo;if(!fe){fe=te.skyboxFbo=pe.createFramebuffer(32,32,!1),te.skyboxGeometry=new In(pe),te.skyboxTexture=pe.gl.createTexture(),ve.bindTexture(ve.TEXTURE_CUBE_MAP,te.skyboxTexture),ve.texParameteri(ve.TEXTURE_CUBE_MAP,ve.TEXTURE_WRAP_S,ve.CLAMP_TO_EDGE),ve.texParameteri(ve.TEXTURE_CUBE_MAP,ve.TEXTURE_WRAP_T,ve.CLAMP_TO_EDGE),ve.texParameteri(ve.TEXTURE_CUBE_MAP,ve.TEXTURE_MIN_FILTER,ve.LINEAR),ve.texParameteri(ve.TEXTURE_CUBE_MAP,ve.TEXTURE_MAG_FILTER,ve.LINEAR);for(let Ie=0;Ie<6;++Ie)ve.texImage2D(ve.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,ve.RGBA,32,32,0,ve.RGBA,ve.UNSIGNED_BYTE,null)}pe.bindFramebuffer.set(fe.framebuffer),pe.viewport.set([0,0,32,32]);const de=te.getCenter(X,!0),be=X.useProgram("skyboxCapture"),he=new Float64Array(16);o.identity(he),o.rotateY(he,he,.5*-Math.PI),xr(pe,te,be,he,de,0),o.identity(he),o.rotateY(he,he,.5*Math.PI),xr(pe,te,be,he,de,1),o.identity(he),o.rotateX(he,he,.5*-Math.PI),xr(pe,te,be,he,de,2),o.identity(he),o.rotateX(he,he,.5*Math.PI),xr(pe,te,be,he,de,3),o.identity(he),xr(pe,te,be,he,de,4),o.identity(he),o.rotateY(he,he,Math.PI),xr(pe,te,be,he,de,5),pe.viewport.set([0,0,X.width,X.height])}(_,f),f.markSkyboxValid(_)):_.renderPass==="sky"&&function(X,te,le,ge,pe){const ve=X.context,fe=ve.gl,de=X.transform,be=X.useProgram("skybox");ve.activeTexture.set(fe.TEXTURE0),fe.bindTexture(fe.TEXTURE_CUBE_MAP,te.skyboxTexture);const he=((Ie,Le,Ae,Pe,qe)=>({u_matrix:Ie,u_sun_direction:Le,u_cubemap:0,u_opacity:Pe,u_temporal_offset:qe}))(de.skyboxMatrix,te.getCenter(X,!1),0,ge,pe);X.prepareDrawProgram(ve,be),be.draw(ve,fe.TRIANGLES,le,o.StencilMode.disabled,X.colorModeForRenderPass(),o.CullFaceMode.backCW,he,"skybox",te.skyboxGeometry.vertexBuffer,te.skyboxGeometry.indexBuffer,te.skyboxGeometry.segment)}(_,f,H,M,Y):G==="gradient"&&_.renderPass==="sky"&&function(X,te,le,ge,pe){const ve=X.context,fe=ve.gl,de=X.transform,be=X.useProgram("skyboxGradient");te.skyboxGeometry||(te.skyboxGeometry=new In(ve)),ve.activeTexture.set(fe.TEXTURE0);let he=te.colorRampTexture;he||(he=te.colorRampTexture=new o.Texture(ve,te.colorRamp,fe.RGBA)),he.bind(fe.LINEAR,fe.CLAMP_TO_EDGE);const Ie=((Le,Ae,Pe,qe,rt)=>({u_matrix:Le,u_color_ramp:0,u_center_direction:Ae,u_radius:o.degToRad(Pe),u_opacity:qe,u_temporal_offset:rt}))(de.skyboxMatrix,te.getCenter(X,!1),te.paint.get("sky-gradient-radius"),ge,pe);X.prepareDrawProgram(ve,be),be.draw(ve,fe.TRIANGLES,le,o.StencilMode.disabled,X.colorModeForRenderPass(),o.CullFaceMode.backCW,Ie,"skyboxGradient",te.skyboxGeometry.vertexBuffer,te.skyboxGeometry.indexBuffer,te.skyboxGeometry.segment)}(_,f,H,M,Y)},debug:function(_,l,f){for(let b=0;b<f.length;b++)io(_,l,f[b])},custom:function(_,l,f){const b=_.context,T=f.implementation;if(_.transform.projection.unsupportedLayers&&_.transform.projection.unsupportedLayers.includes("custom"))o.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if(_.renderPass==="offscreen"){const M=T.prerender;M&&(_.setCustomLayerDefaults(),b.setColorMode(_.colorModeForRenderPass()),M.call(T,b.gl,_.transform.customLayerMatrix()),b.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),b.setColorMode(_.colorModeForRenderPass()),b.setStencilMode(o.StencilMode.disabled);const M=T.renderingMode==="3d"?new o.DepthMode(_.context.gl.LEQUAL,o.DepthMode.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,o.DepthMode.ReadOnly);b.setDepthMode(M),T.render(b.gl,_.transform.customLayerMatrix()),b.setDirty(),_.setBaseState(),b.bindFramebuffer.set(null)}}};class od{constructor(l,f){this.context=new ee(l),this.transform=f,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=o.SourceCache.maxUnderzooming+o.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new to,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(l,f){const b=!!l&&!!l.terrain&&this.transform.projection.supportsTerrain;if(!(b||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Ec(this,l));const T=this._terrain;this.transform.elevation=b?T:null,T.update(l,this.transform,f)}_updateFog(l){const f=l.fog;if(!f||this.transform.projection.name==="globe"||f.getOpacity(this.transform.pitch)<1||f.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[b,T]=f.getFovAdjustedRange(this.transform._fov);if(b>T)return void(this.transform.fogCullDistSq=null);const M=b+.78*(T-b);this.transform.fogCullDistSq=M*M}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(l,f){if(this.width=l*o.exported.devicePixelRatio,this.height=f*o.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const b of this.style.order)this.style._layers[b].resize()}setup(){const l=this.context,f=new o.StructArrayLayout2i4;f.emplaceBack(0,0),f.emplaceBack(o.EXTENT,0),f.emplaceBack(0,o.EXTENT),f.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(f,o.posAttributes.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);const b=new o.StructArrayLayout2i4;b.emplaceBack(0,0),b.emplaceBack(o.EXTENT,0),b.emplaceBack(0,o.EXTENT),b.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=l.createVertexBuffer(b,o.posAttributes.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);const T=new o.StructArrayLayout2i4;T.emplaceBack(-1,-1),T.emplaceBack(1,-1),T.emplaceBack(-1,1),T.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(T,o.posAttributes.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);const M=new o.StructArrayLayout4i8;M.emplaceBack(0,0,0,0),M.emplaceBack(o.EXTENT,0,o.EXTENT,0),M.emplaceBack(0,o.EXTENT,0,o.EXTENT),M.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.mercatorBoundsBuffer=l.createVertexBuffer(M,o.boundsAttributes.members),this.mercatorBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);const F=new o.StructArrayLayout3ui6;F.emplaceBack(0,1,2),F.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(F);const G=new o.StructArrayLayout1ui2;for(const Y of[0,1,3,2,0])G.emplaceBack(Y);this.debugIndexBuffer=l.createIndexBuffer(G),this.emptyTexture=new o.Texture(l,new o.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),l.gl.RGBA),this.identityMat=o.create();const H=this.context.gl;this.stencilClearMode=new o.StencilMode({func:H.ALWAYS,mask:0},0,255,H.ZERO,H.ZERO,H.ZERO),this.loadTimeStamps.push(o.window.performance.now()),this.atmosphereBuffer=new Bc(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(l){return l._makeTileBoundsBuffers(this.context,this.transform.projection),l._tileBoundsBuffer?{tileBoundsBuffer:l._tileBoundsBuffer,tileBoundsIndexBuffer:l._tileBoundsIndexBuffer,tileBoundsSegments:l._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const l=this.context,f=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(l,f.TRIANGLES,o.DepthMode.disabled,this.stencilClearMode,o.ColorMode.disabled,o.CullFaceMode.disabled,$o(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(l,f,b){if(!f||this.currentStencilSource===f.id||!l.isTileClipped()||!b||b.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let G=!1;for(const H of b)if(this._tileClippingMaskIDs[H.key]===void 0){G=!0;break}if(!G)return}this.currentStencilSource=f.id;const T=this.context,M=T.gl;this.nextStencilID+b.length>256&&this.clearStencil(),T.setColorMode(o.ColorMode.disabled),T.setDepthMode(o.DepthMode.disabled);const F=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const G of b){const H=f.getTile(G),Y=this._tileClippingMaskIDs[G.key]=this.nextStencilID++,{tileBoundsBuffer:X,tileBoundsIndexBuffer:te,tileBoundsSegments:le}=this.getTileBoundsBuffers(H);F.draw(T,M.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:M.ALWAYS,mask:0},Y,255,M.KEEP,M.KEEP,M.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,$o(G.projMatrix),"$clipping",X,te,le)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,f=this.context.gl;return new o.StencilMode({func:f.NOTEQUAL,mask:255},l,255,f.KEEP,f.KEEP,f.REPLACE)}stencilModeForClipping(l){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(l);const f=this.context.gl;return new o.StencilMode({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,f.KEEP,f.KEEP,f.REPLACE)}stencilConfigForOverlap(l){const f=this.context.gl,b=l.sort((F,G)=>G.overscaledZ-F.overscaledZ),T=b[b.length-1].overscaledZ,M=b[0].overscaledZ-T+1;if(M>1){this.currentStencilSource=void 0,this.nextStencilID+M>256&&this.clearStencil();const F={};for(let G=0;G<M;G++)F[G+T]=new o.StencilMode({func:f.GEQUAL,mask:255},G+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=M,[F,b]}return[{[T]:o.StencilMode.disabled},b]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new o.ColorMode([l.CONSTANT_COLOR,l.ONE],new o.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?o.ColorMode.unblended:o.ColorMode.alphaBlended}depthModeForSublayer(l,f,b){if(!this.opaquePassEnabledForLayer())return o.DepthMode.disabled;const T=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new o.DepthMode(b||this.context.gl.LEQUAL,f,[T,T])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,f){this.style=l,this.options=f,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(o.exported.now()),this.imageManager.beginFrame();const b=this.style.order,T=this.style._sourceCaches;for(const H in T){const Y=T[H];Y.used&&Y.prepare(this.context)}const M={},F={},G={};for(const H in T){const Y=T[H];M[H]=Y.getVisibleCoordinates(),F[H]=M[H].slice().reverse(),G[H]=Y.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let H=0;H<b.length;H++)if(this.style._layers[b[H]].is3D()){this.opaquePassCutoff=H;break}if(this.terrain&&(this.terrain.updateTileBinding(G),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new o.GlobeSharedBuffers(this.context)),o.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";for(const H of b){const Y=this.style._layers[H],X=l._getLayerSourceCache(Y);if(!Y.hasOffscreenPass()||Y.isHidden(this.transform.zoom))continue;const te=X?F[X.id]:void 0;(Y.type==="custom"||Y.isSky()||te&&te.length)&&this.renderLayer(this,X,Y,te)}if(this.depthRangeFor3D=[0,1-(l.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:f.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=f.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){const H=this.style._layers[b[this.currentLayer]],Y=l._getLayerSourceCache(H);if(H.isSky())continue;const X=Y?F[Y.id]:void 0;this._renderTileClippingMasks(H,Y,X),this.renderLayer(this,Y,H,X)}if(this.style.fog&&this.transform.projection.supportsFog&&function(H,Y){const X=H.context,te=X.gl,le=H.transform,ge=new o.DepthMode(te.LEQUAL,o.DepthMode.ReadOnly,[0,1]),pe=H.useProgram("globeAtmosphere",null,le.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),ve=o.globeToMercatorTransition(le.zoom),fe=Y.properties.get("color").toArray01(),de=Y.properties.get("high-color").toArray01(),be=Y.properties.get("space-color").toArray01PremultipliedAlpha(),he=o.identity$1([]);o.rotateY$1(he,he,-o.degToRad(le._center.lng)),o.rotateX$1(he,he,o.degToRad(le._center.lat)),o.rotateZ$1(he,he,le.angle),o.rotateX$1(he,he,-le._pitch);const Ie=o.fromQuat(new Float32Array(16),he),Le=o.mapValue(Y.properties.get("star-intensity"),0,1,0,.25),Ae=5e-4,Pe=o.mapValue(Y.properties.get("horizon-blend"),0,1,Ae,.25),qe=o.globeUseCustomAntiAliasing(H,X,le)&&Pe===Ae?le.worldSize/(2*Math.PI*1.025)-1:le.globeRadius,rt=H.frameCounter/1e3%1,Xe=o.length(le.globeCenterInViewSpace),St=Math.sqrt(Math.pow(Xe,2)-Math.pow(qe,2)),je=Math.acos(St/Xe),_t=((We,Ue,Dt,Nt,Lt,Mt,Zt,an,tn,Yt,It,pn,xn,Fn)=>({u_frustum_tl:We,u_frustum_tr:Ue,u_frustum_br:Dt,u_frustum_bl:Nt,u_horizon:Lt,u_transition:Mt,u_fadeout_range:Zt,u_color:an,u_high_color:tn,u_space_color:Yt,u_star_intensity:It,u_star_size:5*o.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:pn,u_horizon_angle:xn,u_rotation_matrix:Fn}))(le.frustumCorners.TL,le.frustumCorners.TR,le.frustumCorners.BR,le.frustumCorners.BL,le.frustumCorners.horizon,ve,Pe,fe,de,be,Le,rt,je,Ie);H.prepareDrawProgram(X,pe);const ht=H.atmosphereBuffer;ht&&pe.draw(X,te.TRIANGLES,ge,o.StencilMode.disabled,o.ColorMode.alphaBlended,o.CullFaceMode.backCW,_t,"skybox",ht.vertexBuffer,ht.indexBuffer,ht.segments)}(this,this.style.fog),this.renderPass="sky",(o.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){const H=this.style._layers[b[this.currentLayer]],Y=l._getLayerSourceCache(H);H.isSky()&&this.renderLayer(this,Y,H,Y?F[Y.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<b.length;){const H=this.style._layers[b[this.currentLayer]],Y=l._getLayerSourceCache(H);if(H.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(H)){if(H.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const X=Y?(H.type==="symbol"?G:F)[Y.id]:void 0;this._renderTileClippingMasks(H,Y,Y?M[Y.id]:void 0),this.renderLayer(this,Y,H,X),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let H=null;o.values(this.style._layers).forEach(Y=>{const X=l._getLayerSourceCache(Y);X&&!Y.isHidden(this.transform.zoom)&&(!H||H.getSource().maxzoom<X.getSource().maxzoom)&&(H=X)}),H&&this.options.showTileBoundaries&&Lo.debug(this,H,H.getVisibleCoordinates())}this.options.showPadding&&function(H){const Y=H.transform.padding;Mo(H,H.transform.height-(Y.top||0),3,pl),Mo(H,Y.bottom||0,3,Lc),hl(H,Y.left||0,3,Oc),hl(H,H.transform.width-(Y.right||0),3,Pc);const X=H.transform.centerPoint;(function(te,le,ge,pe){br(te,le-1,ge-10,2,20,pe),br(te,le-10,ge-1,20,2,pe)})(H,X.x,H.transform.height-X.y,fl)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(o.window.performance.now()),this.saveCanvasCopy())}}renderLayer(l,f,b,T){b.isHidden(this.transform.zoom)||(b.type==="background"||b.type==="sky"||b.type==="custom"||T&&T.length)&&(this.id=b.id,this.gpuTimingStart(b),l.transform.projection.unsupportedLayers&&l.transform.projection.unsupportedLayers.includes(b.type)||Lo[b.type](l,f,b,T,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(l){if(!this.options.gpuTiming)return;const f=this.context.extTimerQuery;let b=this.gpuTimers[l.id];b||(b=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:f.createQueryEXT()}),b.calls++,f.beginQueryEXT(f.TIME_ELAPSED_EXT,b.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const l=this.context.extTimerQuery,f=l.createQueryEXT();this.deferredRenderGpuTimeQueries.push(f),l.beginQueryEXT(l.TIME_ELAPSED_EXT,f)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}collectGpuTimers(){const l=this.gpuTimers;return this.gpuTimers={},l}collectDeferredRenderGpuQueries(){const l=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],l}queryGpuTimers(l){const f={};for(const b in l){const T=l[b],M=this.context.extTimerQuery,F=M.getQueryObjectEXT(T.query,M.QUERY_RESULT_EXT)/1e6;M.deleteQueryEXT(T.query),f[b]=F}return f}queryGpuTimeDeferredRender(l){if(!this.options.gpuTimingDeferredRender)return 0;const f=this.context.extTimerQuery;let b=0;for(const T of l)b+=f.getQueryObjectEXT(T,f.QUERY_RESULT_EXT)/1e6,f.deleteQueryEXT(T);return b}translatePosMatrix(l,f,b,T,M){if(!b[0]&&!b[1])return l;const F=M?T==="map"?this.transform.angle:0:T==="viewport"?-this.transform.angle:0;if(F){const Y=Math.sin(F),X=Math.cos(F);b=[b[0]*X-b[1]*Y,b[0]*Y+b[1]*X]}const G=[M?b[0]:vn(f,b[0],this.transform.zoom),M?b[1]:vn(f,b[1],this.transform.zoom),0],H=new Float32Array(16);return o.translate(H,l,G),H}saveTileTexture(l){const f=this._tileTextures[l.size[0]];f?f.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const f=this._tileTextures[l];return f&&f.length>0?f.pop():null}isPatternMissing(l){if(!l)return!1;if(!l.from||!l.to)return!0;const f=this.imageManager.getPattern(l.from.toString()),b=this.imageManager.getPattern(l.to.toString());return!f||!b}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const l=this.terrain&&this.terrain.renderingToTexture,f=this.style&&this.style.fog,b=[];return this.terrainRenderModeElevated()&&b.push("TERRAIN"),this.transform.projection.name==="globe"&&b.push("GLOBE"),f&&!l&&f.getOpacity(this.transform.pitch)!==0&&b.push("FOG"),l&&b.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&b.push("OVERDRAW_INSPECTOR"),b}useProgram(l,f,b){this.cache=this.cache||{};const T=b||[],M=this.currentGlobalDefines().concat(T),F=Cc.cacheKey(Xa[l],l,M,f);return this.cache[F]||(this.cache[F]=new Cc(this.context,l,Xa[l],f,Xs[l],M)),this.cache[F]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(l,f,b){if(this.terrain&&this.terrain.renderingToTexture)return;const T=this.style.fog;if(T){const M=T.getOpacity(this.transform.pitch),F=((G,H,Y,X,te,le,ge,pe,ve,fe,de)=>{const be=G.transform,he=H.properties.get("color").toArray01();he[3]=X;const Ie=G.frameCounter/1e3%1;return{u_fog_matrix:Y?be.calculateFogTileMatrix(Y):G.identityMat,u_fog_range:H.getFovAdjustedRange(be._fov),u_fog_color:he,u_fog_horizon_blend:H.properties.get("horizon-blend"),u_fog_temporal_offset:Ie,u_frustum_tl:te,u_frustum_tr:le,u_frustum_br:ge,u_frustum_bl:pe,u_globe_pos:ve,u_globe_radius:fe,u_viewport:de,u_globe_transition:o.globeToMercatorTransition(be.zoom),u_is_globe:+(be.projection.name==="globe")}})(this,T,b,M,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*o.exported.devicePixelRatio,this.transform.height*o.exported.devicePixelRatio]);f.setFogUniformValues(l,F)}}setTileLoadedFlag(l){this.tileLoaded=l}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const l=this.context.gl,f=l.createTexture();return l.bindTexture(l.TEXTURE_2D,f),l.copyTexImage2D(l.TEXTURE_2D,0,l.RGBA,0,0,l.drawingBufferWidth,l.drawingBufferHeight,0),f}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const l=this.style&&this.style.fog;return!!l&&l.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const l=this._backgroundTiles,f=this._backgroundTiles={},b=this.transform.coveringTiles({tileSize:512});for(const T of b)f[T.key]=l[T.key]||new o.Tile(T,512,this.transform.tileZoom,this);return f}clearBackgroundTiles(){this._backgroundTiles={}}}class ml{constructor(l=0,f=0,b=0,T=0){if(isNaN(l)||l<0||isNaN(f)||f<0||isNaN(b)||b<0||isNaN(T)||T<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=f,this.left=b,this.right=T}interpolate(l,f,b){return f.top!=null&&l.top!=null&&(this.top=o.number(l.top,f.top,b)),f.bottom!=null&&l.bottom!=null&&(this.bottom=o.number(l.bottom,f.bottom,b)),f.left!=null&&l.left!=null&&(this.left=o.number(l.left,f.left,b)),f.right!=null&&l.right!=null&&(this.right=o.number(l.right,f.right,b)),this}getCenter(l,f){const b=o.clamp((this.left+l-this.right)/2,0,l),T=o.clamp((this.top+f-this.bottom)/2,0,f);return new o.pointGeometry(b,T)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new ml(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function gl(_,l){const f=o.getColumn(_,3);o.fromQuat(_,l),o.setColumn(_,3,f)}function _l(_,l){const f=o.identity$1([]);return o.rotateZ$1(f,f,-l),o.rotateX$1(f,f,-_),f}function os(_,l){const f=[_[0],_[1],0],b=[l[0],l[1],0];if(o.length(f)>=1e-15){const F=o.normalize([],f);o.scale$2(b,F,o.dot(b,F)),l[0]=b[0],l[1]=b[1]}const T=o.cross([],l,_);if(o.len(T)<1e-15)return null;const M=Math.atan2(-T[1],T[0]);return _l(Math.atan2(Math.sqrt(_[0]*_[0]+_[1]*_[1]),-_[2]),M)}class ss{constructor(l,f){this.position=l,this.orientation=f}get position(){return this._position}set position(l){if(l){const f=l instanceof o.MercatorCoordinate?l:new o.MercatorCoordinate(l[0],l[1],l[2]);this._renderWorldCopies&&(f.x=o.wrap(f.x,0,1)),this._position=f}else this._position=null}lookAtPoint(l,f){if(this.orientation=null,!this.position)return;const b=this._elevation?this._elevation.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(l)):0,T=this.position,M=o.MercatorCoordinate.fromLngLat(l,b),F=[M.x-T.x,M.y-T.y,M.z-T.z];f||(f=[0,0,1]),f[2]=Math.abs(f[2]),this.orientation=os(F,f)}setPitchBearing(l,f){this.orientation=_l(o.degToRad(l),o.degToRad(-f))}}class ro{constructor(l,f){this._transform=o.identity([]),this.orientation=f,this.position=l}get mercatorPosition(){const l=this.position;return new o.MercatorCoordinate(l[0],l[1],l[2])}get position(){const l=o.getColumn(this._transform,3);return[l[0],l[1],l[2]]}set position(l){var f;l&&o.setColumn(this._transform,3,[(f=l)[0],f[1],f[2],1])}get orientation(){return this._orientation}set orientation(l){this._orientation=l||o.identity$1([]),l&&gl(this._transform,this._orientation)}getPitchBearing(){const l=this.forward(),f=this.right();return{bearing:Math.atan2(-f[1],f[0]),pitch:Math.atan2(Math.sqrt(l[0]*l[0]+l[1]*l[1]),-l[2])}}setPitchBearing(l,f){this._orientation=_l(l,f),gl(this._transform,this._orientation)}forward(){const l=o.getColumn(this._transform,2);return[-l[0],-l[1],-l[2]]}up(){const l=o.getColumn(this._transform,1);return[-l[0],-l[1],-l[2]]}right(){const l=o.getColumn(this._transform,0);return[l[0],l[1],l[2]]}getCameraToWorld(l,f){const b=new Float64Array(16);return o.invert(b,this.getWorldToCamera(l,f)),b}getWorldToCameraPosition(l,f,b){const T=this.position;o.scale$2(T,T,-l);const M=new Float64Array(16);return o.fromScaling(M,[b,b,b]),o.translate(M,M,T),M[10]*=f,M}getWorldToCamera(l,f){const b=new Float64Array(16),T=new Float64Array(4),M=this.position;return o.conjugate(T,this._orientation),o.scale$2(M,M,-l),o.fromQuat(b,T),o.translate(b,b,M),b[1]*=-1,b[5]*=-1,b[9]*=-1,b[13]*=-1,b[8]*=f,b[9]*=f,b[10]*=f,b[11]*=f,b}getCameraToClipPerspective(l,f,b,T){const M=new Float64Array(16);return o.perspective(M,l,f,b,T),M}getDistanceToElevation(l){const f=l===0?0:o.mercatorZfromAltitude(l,this.position[1]),b=this.forward();return(f-this.position[2])/b[2]}clone(){return new ro([...this.position],[...this.orientation])}}function Qs(_,l){const f=as(_.projection,_.zoom,_.width,_.height),b=function(M,F,G,H,Y){const X=new o.LngLat(G.lng-180*wr,G.lat),te=new o.LngLat(G.lng+180*wr,G.lat),le=M.project(X.lng,X.lat),ge=M.project(te.lng,te.lat),pe=-Math.atan2(ge.y-le.y,ge.x-le.x),ve=o.MercatorCoordinate.fromLngLat(G);ve.y=o.clamp(ve.y,-.999975,.999975);const fe=ve.toLngLat(),de=M.project(fe.lng,fe.lat),be=o.MercatorCoordinate.fromLngLat(fe);be.x+=wr;const he=be.toLngLat(),Ie=M.project(he.lng,he.lat),Le=Ut(Ie.x-de.x,Ie.y-de.y,pe),Ae=o.MercatorCoordinate.fromLngLat(fe);Ae.y+=wr;const Pe=Ae.toLngLat(),qe=M.project(Pe.lng,Pe.lat),rt=Ut(qe.x-de.x,qe.y-de.y,pe),Xe=Math.abs(Le.x)/Math.abs(rt.y),St=o.identity([]);o.rotateZ(St,St,-pe*(1-(Y?0:H)));const je=o.identity([]);return o.scale(je,je,[1,1-(1-Xe)*H,1]),je[4]=-rt.x/rt.y*H,o.rotateZ(je,je,pe),o.multiply(je,St,je),je}(_.projection,0,_.center,f,l),T=ea(_);return o.scale(b,b,[T,T,1]),b}function ea(_){const l=_.projection,f=as(_.projection,_.zoom,_.width,_.height),b=ls(l,_.center),T=ls(l,o.LngLat.convert(l.center));return Math.pow(2,b*f+(1-f)*T)}function as(_,l,f,b,T=1/0){const M=_.range;if(!M)return 0;const F=Math.min(T,Math.max(f,b)),G=Math.log(F/1024)/Math.LN2;return o.smoothstep(M[0]+G,M[1]+G,l)}const wr=1/4e4;function ls(_,l){const f=o.clamp(l.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),b=new o.LngLat(l.lng-180*wr,f),T=new o.LngLat(l.lng+180*wr,f),M=_.project(b.lng,f),F=_.project(T.lng,f),G=o.MercatorCoordinate.fromLngLat(b),H=o.MercatorCoordinate.fromLngLat(T),Y=F.x-M.x,X=F.y-M.y,te=H.x-G.x,le=H.y-G.y,ge=Math.sqrt((te*te+le*le)/(Y*Y+X*X));return Math.log(ge)/Math.LN2}function Ut(_,l,f){const b=Math.cos(f),T=Math.sin(f);return{x:_*b-l*T,y:_*T+l*b}}class Gi{constructor(l,f,b,T,M,F,G){this.tileSize=512,this._renderWorldCopies=M===void 0||M,this._minZoom=l||0,this._maxZoom=f||22,this._minPitch=b==null?0:b,this._maxPitch=T==null?60:T,this.setProjection(F),this.setMaxBounds(G),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new ml,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new ro,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const l=new Gi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return l._elevation=this._elevation,l._centerAltitude=this._centerAltitude,l._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,l.tileSize=this.tileSize,l.mercatorFromTransition=this.mercatorFromTransition,l.width=this.width,l.height=this.height,l.cameraElevationReference=this.cameraElevationReference,l._center=this._center,l._setZoom(this.zoom),l._seaLevelZoom=this._seaLevelZoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._nearZ=this._nearZ,l._farZ=this._farZ,l._averageElevation=this._averageElevation,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._camera=this._camera.clone(),l._calcMatrices(),l.freezeTileCoverage=this.freezeTileCoverage,l.frustumCorners=this.frustumCorners,l}get elevation(){return this._elevation}set elevation(l){this._elevation!==l&&(this._elevation=l,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(l){const f=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||f)&&this._updateCameraOnTerrain(),(l||f)&&this._constrainCameraAltitude(),this._calcMatrices()}getProjection(){return o.pick(this.projection,["name","center","parallels"])}setProjection(l){this.projectionOptions=l||{name:"mercator"};const f=this.projection?this.getProjection():void 0;this.projection=o.getProjection(this.projectionOptions);const b=!v(f,this.getProjection());return b&&this._calcMatrices(),this.mercatorFromTransition=!1,b}setMercatorFromTransition(){const l=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=o.getProjection({name:"mercator"});const f=l!==this.projection.name;return f&&this._calcMatrices(),f}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return o.mercatorZfromAltitude(this.center.lat,this.cameraWorldSize)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.pointGeometry(this.width,this.height)}get bearing(){return o.wrap(this.rotation,-180,180)}set bearing(l){this.rotation=l}get rotation(){return-this.angle/Math.PI*180}set rotation(l){const f=-l*Math.PI/180;var b;this.angle!==f&&(this._unmodified=!1,this.angle=f,this._calcMatrices(),this.rotationMatrix=(b=new o.ARRAY_TYPE(4),o.ARRAY_TYPE!=Float32Array&&(b[1]=0,b[2]=0),b[0]=1,b[3]=1,b),function(T,M,F){var G=M[0],H=M[1],Y=M[2],X=M[3],te=Math.sin(F),le=Math.cos(F);T[0]=G*le+Y*te,T[1]=H*le+X*te,T[2]=G*-te+Y*le,T[3]=H*-te+X*le}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const f=o.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==f&&(this._unmodified=!1,this._pitch=f,this._calcMatrices())}get aspect(){return this.width/this.height}get fovX(){return this._fov}get fovY(){const l=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/l)}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=o.degToRad(l),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(l){this._averageElevation=l,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(l){const f=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==f&&(this._unmodified=!1,this._setZoom(f),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(l){this._zoom=l,this.scale=this.zoomScale(l),this.tileZoom=Math.floor(l),this.zoomFraction=l-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const l=this._elevation;this._centerAltitude=l.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=l.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const l=this._elevation,f=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],b=this.horizonLineFromTop();let T=0,M=0;for(let F=0;F<f.length;F++){const G=new o.pointGeometry(f[F][0]*this.width,b+f[F][1]*(this.height-b)),H=l.pointCoordinate(G);if(!H)continue;const Y=1/Math.hypot(H[0]-this._camera.position[0],H[1]-this._camera.position[1]);T+=H[3]*Y,M+=Y}return M===0?NaN:T/M}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const l=this._seaLevelZoom,f=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),b=this.pixelsPerMeter/this.worldSize*f,T=this._mercatorZfromZoom(l),M=this._mercatorZfromZoom(this._maxZoom),F=Math.max(T-b,M);this._setZoom(this._zoomFromMercatorZ(F))}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}computeZoomRelativeTo(l){const f=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,l.toAltitude()));let b;b=l.z<this._camera.position[2]?[f.x,f.y,f.z]:[l.x,l.y,l.z];const T=o.length(o.sub([],this._camera.position,b));return o.clamp(this._zoomFromMercatorZ(T),this._minZoom,this._maxZoom)}setFreeCameraOptions(l){if(!this.height||!l.position&&!l.orientation)return;this._updateCameraState();let f=!1;if(l.orientation&&!o.exactEquals(l.orientation,this._camera.orientation)&&(f=this._setCameraOrientation(l.orientation)),l.position){const b=[l.position.x,l.position.y,l.position.z];o.exactEquals$1(b,this._camera.position)||(this._setCameraPosition(b),f=!0)}f&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const l=this._camera.position,f=new ss;return f.position=new o.MercatorCoordinate(l[0],l[1],l[2]),f.orientation=this._camera.orientation,f._elevation=this.elevation,f._renderWorldCopies=this.renderWorldCopies,f}_setCameraOrientation(l){if(!o.length$1(l))return!1;o.normalize$1(l,l);const f=o.transformQuat([],[0,0,-1],l),b=o.transformQuat([],[0,-1,0],l);if(b[2]<0)return!1;const T=os(f,b);return!!T&&(this._camera.orientation=T,!0)}_setCameraPosition(l){const f=this.zoomScale(this.minZoom)*this.tileSize,b=this.zoomScale(this.maxZoom)*this.tileSize,T=this.cameraToCenterDistance;l[2]=o.clamp(l[2],T/b,T/f),this._camera.position=l}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,f,b){this._unmodified=!1,this._edgeInsets.interpolate(l,f,b),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const f=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,f)}getVisibleUnwrappedCoordinates(l){const f=[new o.UnwrappedTileID(0,l)];if(this.renderWorldCopies){const b=this.pointCoordinate(new o.pointGeometry(0,0)),T=this.pointCoordinate(new o.pointGeometry(this.width,0)),M=this.pointCoordinate(new o.pointGeometry(this.width,this.height)),F=this.pointCoordinate(new o.pointGeometry(0,this.height)),G=Math.floor(Math.min(b.x,T.x,M.x,F.x)),H=Math.floor(Math.max(b.x,T.x,M.x,F.x)),Y=1;for(let X=G-Y;X<=H+Y;X++)X!==0&&f.push(new o.UnwrappedTileID(X,l))}return f}coveringTiles(l){let f=this.coveringZoomLevel(l);const b=f,T=this.elevation&&!l.isTerrainDEM,M=this.projection.name==="mercator";if(l.minzoom!==void 0&&f<l.minzoom)return[];l.maxzoom!==void 0&&f>l.maxzoom&&(f=l.maxzoom);const F=this.locationCoordinate(this.center),G=this.center.lat,H=1<<f,Y=[H*F.x,H*F.y,0],X=this.projection.name==="globe",te=!X,le=o.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,f,te),ge=X?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),pe=H*o.mercatorZfromAltitude(1,this.center.lat),ve=this._camera.position[2]/o.mercatorZfromAltitude(1,this.center.lat),fe=[H*ge.x,H*ge.y,ve*(te?1:pe)],de=this.cameraToCenterDistance/l.tileSize*(l.roundZoom?1:.502),be=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?f:0,he=l.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,Ie=l.isTerrainDEM?-he:this._elevation?this._elevation.getMinElevationBelowMSL():0,Le=this.projection.isReprojectedInTileSpace?ea(this):1,Ae=Ue=>{const Nt=new o.MercatorCoordinate(Ue.x+25e-6,Ue.y,Ue.z),Lt=new o.MercatorCoordinate(Ue.x,Ue.y+25e-6,Ue.z),Mt=Ue.toLngLat(),Zt=Nt.toLngLat(),an=Lt.toLngLat(),tn=this.locationCoordinate(Mt),Yt=this.locationCoordinate(Zt),It=this.locationCoordinate(an),pn=Math.hypot(Yt.x-tn.x,Yt.y-tn.y),xn=Math.hypot(It.x-tn.x,It.y-tn.y);return Math.sqrt(pn*xn)*Le/25e-6},Pe=Ue=>{const Dt=he,Nt=Ie;return{aabb:o.tileAABB(this,H,0,0,0,Ue,Nt,Dt,this.projection),zoom:0,x:0,y:0,minZ:Nt,maxZ:Dt,wrap:Ue,fullyVisible:!1}},qe=[];let rt=[];const Xe=f,St=l.reparseOverscaled?b:f,je=Ue=>Ue*Ue,_t=je((ve-this._centerAltitude)*pe),ht=Ue=>{if(!this._elevation||!Ue.tileID||!M)return;const Dt=this._elevation.getMinMaxForTile(Ue.tileID),Nt=Ue.aabb;Dt?(Nt.min[2]=Dt.min,Nt.max[2]=Dt.max,Nt.center[2]=(Nt.min[2]+Nt.max[2])/2):(Ue.shouldSplit=We(Ue),Ue.shouldSplit||(Nt.min[2]=Nt.max[2]=Nt.center[2]=this._centerAltitude))},We=Ue=>{if(Ue.zoom<be)return!0;if(Ue.zoom===Xe)return!1;if(Ue.shouldSplit!=null)return Ue.shouldSplit;const Dt=Ue.aabb.distanceX(fe),Nt=Ue.aabb.distanceY(fe);let Lt=_t,Mt=1;if(X){Lt=je(Ue.aabb.distanceZ(fe));const tn=Math.pow(2,Ue.zoom),Yt=o.latFromMercatorY((Ue.y+1)/tn),It=o.latFromMercatorY(Ue.y/tn),pn=Math.min(Math.max(G,Yt),It),xn=o.circumferenceAtLatitude(pn)/o.circumferenceAtLatitude(G);if(Mt=pn===G?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,xn/this._mercatorScaleRatio),this.zoom<=o.GLOBE_ZOOM_THRESHOLD_MIN&&Ue.zoom===Xe-1&&xn>=.9)return!0}else if(T&&(Lt=je(Ue.aabb.distanceZ(fe)*pe)),this.projection.isReprojectedInTileSpace&&b<=5){const tn=Math.pow(2,Ue.zoom),Yt=Ae(new o.MercatorCoordinate((Ue.x+.5)/tn,(Ue.y+.5)/tn));Mt=Yt>.85?1:Yt}const Zt=Dt*Dt+Nt*Nt+Lt,an=je((1<<Xe-Ue.zoom)*de*Mt*((tn,Yt)=>{if(Yt*je(.707)<tn)return 1;const It=Math.sqrt(Yt/tn);return It/(1.4144271570014144+(Math.pow(1.1,It-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Lt,_t),Zt));return Zt<an};if(this.renderWorldCopies)for(let Ue=1;Ue<=3;Ue++)qe.push(Pe(-Ue)),qe.push(Pe(Ue));for(qe.push(Pe(0));qe.length>0;){const Ue=qe.pop(),Dt=Ue.x,Nt=Ue.y;let Lt=Ue.fullyVisible;if(!Lt){const Mt=Ue.aabb.intersects(le);if(Mt===0)continue;Lt=Mt===2}if(Ue.zoom!==Xe&&We(Ue))for(let Mt=0;Mt<4;Mt++){const Zt=(Dt<<1)+Mt%2,an=(Nt<<1)+(Mt>>1),tn={aabb:M?Ue.aabb.quadrant(Mt):o.tileAABB(this,H,Ue.zoom+1,Zt,an,Ue.wrap,Ue.minZ,Ue.maxZ,this.projection),zoom:Ue.zoom+1,x:Zt,y:an,wrap:Ue.wrap,fullyVisible:Lt,tileID:void 0,shouldSplit:void 0,minZ:Ue.minZ,maxZ:Ue.maxZ};T&&!X&&(tn.tileID=new o.OverscaledTileID(Ue.zoom+1===Xe?St:Ue.zoom+1,Ue.wrap,Ue.zoom+1,Zt,an),ht(tn)),qe.push(tn)}else{const Mt=Ue.zoom===Xe?St:Ue.zoom;if(l.minzoom&&l.minzoom>Mt)continue;const Zt=Y[0]-(.5+Dt+(Ue.wrap<<Ue.zoom))*(1<<f-Ue.zoom),an=Y[1]-.5-Nt,tn=Ue.tileID?Ue.tileID:new o.OverscaledTileID(Mt,Ue.wrap,Ue.zoom,Dt,Nt);rt.push({tileID:tn,distanceSq:Zt*Zt+an*an})}}if(this.fogCullDistSq){const Ue=this.fogCullDistSq,Dt=this.horizonLineFromTop();rt=rt.filter(Nt=>{const Lt=[0,0,0,1],Mt=[o.EXTENT,o.EXTENT,0,1],Zt=this.calculateFogTileMatrix(Nt.tileID.toUnwrapped());o.transformMat4$1(Lt,Lt,Zt),o.transformMat4$1(Mt,Mt,Zt);const an=o.getAABBPointSquareDist(Lt,Mt);if(an===0)return!0;let tn=!1;const Yt=this._elevation;if(Yt&&an>Ue&&Dt!==0){const It=this.calculateProjMatrix(Nt.tileID.toUnwrapped());let pn;l.isTerrainDEM||(pn=Yt.getMinMaxForTile(Nt.tileID)),pn||(pn={min:Ie,max:he});const xn=o.furthestTileCorner(this.rotation),Fn=[xn[0]*o.EXTENT,xn[1]*o.EXTENT,pn.max];o.transformMat4(Fn,Fn,It),tn=(1-Fn[1])*this.height*.5<Dt}return an<Ue||tn})}return rt.sort((Ue,Dt)=>Ue.distanceSq-Dt.distanceSq).map(Ue=>Ue.tileID)}resize(l,f){this.width=l,this.height=f,this.pixelsToGLUnits=[2/l,-2/f],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const f=o.clamp(l.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),b=this.projection.project(l.lng,f);return new o.pointGeometry(b.x*this.worldSize,b.y*this.worldSize)}unproject(l){return this.projection.unproject(l.x/this.worldSize,l.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(l,f){let b,T;const M=this.centerPoint;if(this.projection.name==="globe"){const G=this.worldSize;b=(f.x-M.x)/G,T=(f.y-M.y)/G}else{const G=this.pointCoordinate(f),H=this.pointCoordinate(M);b=G.x-H.x,T=G.y-H.y}const F=this.locationCoordinate(l);this.setLocation(new o.MercatorCoordinate(F.x-b,F.y-T))}setLocation(l){this.center=this.coordinateLocation(l),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(l){return this.projection.locationPoint(this,l)}locationPoint3D(l){return this.projection.locationPoint(this,l,!0)}pointLocation(l){return this.coordinateLocation(this.pointCoordinate(l))}pointLocation3D(l){return this.coordinateLocation(this.pointCoordinate3D(l))}locationCoordinate(l,f){const b=f?o.mercatorZfromAltitude(f,l.lat):void 0,T=this.projection.project(l.lng,l.lat);return new o.MercatorCoordinate(T.x,T.y,b)}coordinateLocation(l){return this.projection.unproject(l.x,l.y)}pointRayIntersection(l,f){const b=f!=null?f:this._centerAltitude,T=[l.x,l.y,0,1],M=[l.x,l.y,1,1];o.transformMat4$1(T,T,this.pixelMatrixInverse),o.transformMat4$1(M,M,this.pixelMatrixInverse);const F=M[3];o.scale$1(T,T,1/T[3]),o.scale$1(M,M,1/F);const G=T[2],H=M[2];return{p0:T,p1:M,t:G===H?0:(b-G)/(H-G)}}screenPointToMercatorRay(l){const f=[l.x,l.y,0,1],b=[l.x,l.y,1,1];return o.transformMat4$1(f,f,this.pixelMatrixInverse),o.transformMat4$1(b,b,this.pixelMatrixInverse),o.scale$1(f,f,1/f[3]),o.scale$1(b,b,1/b[3]),f[2]=o.mercatorZfromAltitude(f[2],this._center.lat)*this.worldSize,b[2]=o.mercatorZfromAltitude(b[2],this._center.lat)*this.worldSize,o.scale$1(f,f,1/this.worldSize),o.scale$1(b,b,1/this.worldSize),new o.Ray([f[0],f[1],f[2]],o.normalize([],o.sub([],b,f)))}rayIntersectionCoordinate(l){const{p0:f,p1:b,t:T}=l,M=o.mercatorZfromAltitude(f[2],this._center.lat),F=o.mercatorZfromAltitude(b[2],this._center.lat);return new o.MercatorCoordinate(o.number(f[0],b[0],T)/this.worldSize,o.number(f[1],b[1],T)/this.worldSize,o.number(M,F,T))}pointCoordinate(l,f=this._centerAltitude){return this.projection.pointCoordinate(this,l.x,l.y,f)}pointCoordinate3D(l){if(!this.elevation)return this.pointCoordinate(l);let f=this.projection.pointCoordinate3D(this,l.x,l.y);if(f)return new o.MercatorCoordinate(f[0],f[1],f[2]);let b=0,T=this.horizonLineFromTop();if(l.y>T)return this.pointCoordinate(l);const M=.02*T,F=l.clone();for(let G=0;G<10&&T-b>M;G++){F.y=o.number(b,T,.66);const H=this.projection.pointCoordinate3D(this,F.x,F.y);H?(T=F.y,f=H):b=F.y}return f?new o.MercatorCoordinate(f[0],f[1],f[2]):this.pointCoordinate(l)}isPointAboveHorizon(l){return this.projection.isPointAboveHorizon(this,l)}_coordinatePoint(l,f){const b=f&&this.elevation?this.elevation.getAtPointOrZero(l,this._centerAltitude):this._centerAltitude,T=[l.x*this.worldSize,l.y*this.worldSize,b+l.toAltitude(),1];return o.transformMat4$1(T,T,this.pixelMatrix),T[3]>0?new o.pointGeometry(T[0]/T[3],T[1]/T[3]):new o.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getGlobeBounds(){const{top:l,left:f}=this._edgeInsets,b=this.height-this._edgeInsets.bottom,T=this.width-this._edgeInsets.right,M=this.pointCoordinate3D(new o.pointGeometry(f,l)),F=this.pointCoordinate3D(new o.pointGeometry(T,l)),G=this.pointCoordinate3D(new o.pointGeometry(T,b)),H=this.pointCoordinate3D(new o.pointGeometry(f,b));let Y=Math.min(M.x,H.x),X=Math.max(F.x,G.x),te=Math.min(M.y,F.y),le=Math.max(H.y,G.y);const ge=Math.pow(2,-this.zoom)/16,pe=(de,be,he,Ie)=>{const Le=(de+he)/2,Ae=(be+Ie)/2,Pe=new o.pointGeometry(Le,Ae),qe=this.pointCoordinate3D(Pe),rt=Math.max(0,Y-qe.x,te-qe.y,qe.x-X,qe.y-le);Y=Math.min(Y,qe.x),X=Math.max(X,qe.x),te=Math.min(te,qe.y),le=Math.max(le,qe.y),rt>ge&&(pe(de,be,Le,Ae),pe(Le,Ae,he,Ie))};pe(f,l,T,l),pe(T,l,T,b),pe(T,b,f,b),pe(f,b,f,l);const ve=new o.LngLat(o.lngFromMercatorX(X),o.latFromMercatorY(te)),fe=new o.LngLat(o.lngFromMercatorX(Y),o.latFromMercatorY(le));return new o.LngLatBounds(fe,ve)}_getBounds(l,f){if(this.projection.name==="globe")return this._getGlobeBounds();const b=new o.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),T=new o.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),M=new o.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),F=new o.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let G=this.pointCoordinate(b,l),H=this.pointCoordinate(T,l);const Y=this.pointCoordinate(M,f),X=this.pointCoordinate(F,f),te=(le,ge)=>(ge.y-le.y)/(ge.x-le.x);return G.y>1&&H.y>=0?G=new o.MercatorCoordinate((1-X.y)/te(X,G)+X.x,1):G.y<0&&H.y<=1&&(G=new o.MercatorCoordinate(-X.y/te(X,G)+X.x,0)),H.y>1&&G.y>=0?H=new o.MercatorCoordinate((1-Y.y)/te(Y,H)+Y.x,1):H.y<0&&G.y<=1&&(H=new o.MercatorCoordinate(-Y.y/te(Y,H)+Y.x,0)),new o.LngLatBounds().extend(this.coordinateLocation(G)).extend(this.coordinateLocation(H)).extend(this.coordinateLocation(X)).extend(this.coordinateLocation(Y))}_getBounds3D(){const l=this.elevation;if(!l.visibleDemTiles.length||l.isUsingMockSource())return this._getBounds(0,0);const f=l.visibleDemTiles.reduce((b,T)=>{if(T.dem){const M=T.dem.tree;b.min=Math.min(b.min,M.minimums[0]),b.max=Math.max(b.max,M.maximums[0])}return b},{min:Number.MAX_VALUE,max:0});return this._getBounds(f.min*l.exaggeration(),f.max*l.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(l=!0){const f=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,b=this.height/2-f*(1-this._horizonShift);return l?Math.max(0,b):b}getMaxBounds(){return this.maxBounds}setMaxBounds(l){this.maxBounds=l,this.minLat=-o.MAX_MERCATOR_LATITUDE,this.maxLat=o.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,l&&(this.minLat=l.getSouth(),this.maxLat=l.getNorth(),this.minLng=l.getWest(),this.maxLng=l.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=o.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=o.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=o.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=o.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(l,f){return this.projection.createTileMatrix(this,f,l)}calculateDistanceTileData(l){const f=l.key,b=this._distanceTileDataCache;if(b[f])return b[f];const T=l.canonical,M=1/this.height,F=this.cameraWorldSize/this.zoomScale(T.z),G=(T.x+Math.pow(2,T.z)*l.wrap)*F,H=T.y*F,Y=this.point,X=this.angle,te=Math.sin(-X),le=-Math.cos(-X);return b[f]={bearing:[te,le],center:[(Y.x-G)*M,(Y.y-H)*M],scale:F/o.EXTENT*M},b[f]}calculateFogTileMatrix(l){const f=l.key,b=this._fogTileMatrixCache;if(b[f])return b[f];const T=this.projection.createTileMatrix(this,this.cameraWorldSize,l);return o.multiply(T,this.worldToFogMatrix,T),b[f]=new Float32Array(T),b[f]}calculateProjMatrix(l,f=!1){const b=l.key,T=f?this._alignedProjMatrixCache:this._projMatrixCache;if(T[b])return T[b];const M=this.calculatePosMatrix(l,this.worldSize);return o.multiply(M,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:f?this.alignedProjMatrix:this.projMatrix,M),T[b]=new Float32Array(M),T[b]}calculatePixelsToTileUnitsMatrix(l){const f=l.tileID.key,b=this._pixelsToTileUnitsCache;if(b[f])return b[f];const T=function(M,F){const{scale:G}=M.tileTransform,H=G*o.EXTENT/(M.tileSize*Math.pow(2,F.zoom-M.tileID.overscaledZ+M.tileID.canonical.z));return Y=new Float32Array(4),le=(X=F.inverseAdjustmentMatrix)[1],ge=X[2],pe=X[3],fe=(te=[H,H])[1],Y[0]=X[0]*(ve=te[0]),Y[1]=le*ve,Y[2]=ge*fe,Y[3]=pe*fe,Y;var Y,X,te,le,ge,pe,ve,fe}(l,this);return b[f]=T,b[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const l=this._elevation;this._updateCameraState();const f=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,b=this._computeCameraPosition(f),T=this._camera.forward(),M=o.mercatorZfromAltitude(1,this._center.lat);b[2]/=M,T[2]/=M,o.normalize(T,T);const F=l.raycast(b,T,l.exaggeration());if(F){const G=o.scaleAndAdd([],b,T,F),H=new o.MercatorCoordinate(G[0],G[1],o.mercatorZfromAltitude(G[2],o.latFromMercatorY(G[1]))),Y=(H.z+o.length([H.x-b[0],H.y-b[1],H.z-b[2]*M]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(Y),this._centerAltitude=H.toAltitude(),this._center=this.coordinateLocation(H),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const l=this._elevation;this._updateCameraState();const f=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,b=this._computeCameraPosition(f),T=l.getAtPointOrZero(new o.MercatorCoordinate(...b)),M=this._minimumHeightOverTerrain()*Math.cos(o.degToRad(this._maxPitch)),F=this._camera.position[2]-this.pixelsPerMeter/this.worldSize*T;if(F<M){const G=this.locationCoordinate(this._center,this._centerAltitude),H=[G.x-b[0],G.y-b[1],G.z-b[2]],Y=o.length(H);H[2]-=(M-F)/this._pixelsPerMercatorPixel;const X=o.length(H);if(X===0)return;o.scale$2(H,H,Y/X*this._pixelsPerMercatorPixel),this._camera.position=[G.x-H[0],G.y-H[1],G.z*this._pixelsPerMercatorPixel-H[2]],this._camera.orientation=os(H,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const l=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||l){const le=this.center;return le.lat=o.clamp(le.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!l)&&(le.lng=o.clamp(le.lng,this.minLng,this.maxLng)),this.center=le,void(this._constraining=!1)}const f=this._unmodified,{x:b,y:T}=this.point;let M=0,F=b,G=T;const H=this.width/2,Y=this.height/2,X=this.worldMinY*this.scale,te=this.worldMaxY*this.scale;if(T-Y<X&&(G=X+Y),T+Y>te&&(G=te-Y),te-X<this.height&&(M=Math.max(M,this.height/(te-X)),G=(te+X)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const le=this.worldMinX*this.scale,ge=this.worldMaxX*this.scale,pe=this.worldSize/2-(le+ge)/2;F=(b+pe+this.worldSize)%this.worldSize-pe,F-H<le&&(F=le+H),F+H>ge&&(F=ge-H),ge-le<this.width&&(M=Math.max(M,this.width/(ge-le)),F=(ge+le)/2)}F===b&&G===T||(this.center=this.unproject(new o.pointGeometry(F,G))),M&&(this.zoom+=this.scaleZoom(M)),this._constrainCameraAltitude(),this._unmodified=f,this._constraining=!1}_minZoomForBounds(){let l=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(l=Math.max(l,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),l}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,f=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=o.mercatorZfromAltitude(1,this.center.lat)/o.mercatorZfromAltitude(1,o.GLOBE_SCALE_MATCH_LATITUDE));const b=as(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,b),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const T=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?f:1),M=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);M[8]=2*-l.x/this.width,M[9]=2*l.y/this.height;let F=o.mul([],M,T);if(this.projection.isReprojectedInTileSpace){const Le=this.locationCoordinate(this.center),Ae=o.identity([]);o.translate(Ae,Ae,[Le.x*this.worldSize,Le.y*this.worldSize,0]),o.multiply(Ae,Ae,Qs(this)),o.translate(Ae,Ae,[-Le.x*this.worldSize,-Le.y*this.worldSize,0]),o.multiply(F,F,Ae),this.inverseAdjustmentMatrix=function(Pe){const qe=Qs(Pe,!0);return ce([],[qe[0],qe[1],qe[4],qe[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=o.scale([],F,[this.worldSize,this.worldSize,this.worldSize/f,1]),this.projMatrix=F,this.invProjMatrix=o.invert(new Float64Array(16),this.projMatrix);const G=o.invert([],M);this.frustumCorners=o.FrustumCorners.fromInvProjectionMatrix(G,this.horizonLineFromTop(),this.height);const H=new Float32Array(16);o.identity(H),o.scale(H,H,[1,-1,1]),o.rotateX(H,H,this._pitch),o.rotateZ(H,H,this.angle);const Y=o.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),X=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;Y[8]=2*-l.x/this.width,Y[9]=2*(l.y+X)/this.height,this.skyboxMatrix=o.multiply(H,Y,H);const te=this.point,le=te.x,ge=te.y,pe=this.width%2/2,ve=this.height%2/2,fe=Math.cos(this.angle),de=Math.sin(this.angle),be=le-Math.round(le)+fe*pe+de*ve,he=ge-Math.round(ge)+fe*ve+de*pe,Ie=new Float64Array(F);if(o.translate(Ie,Ie,[be>.5?be-1:be,he>.5?he-1:he,0]),this.alignedProjMatrix=Ie,F=o.create(),o.scale(F,F,[this.width/2,-this.height/2,1]),o.translate(F,F,[1,-1,0]),this.labelPlaneMatrix=F,F=o.create(),o.scale(F,F,[1,-1,1]),o.translate(F,F,[-1,-1,0]),o.scale(F,F,[2/this.width,2/this.height,1]),this.glCoordMatrix=F,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},F=o.invert(new Float64Array(16),this.pixelMatrix),!F)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=F,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=o.calculateGlobeMatrix(this);const Le=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=o.transformMat4(Le,Le,T),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=F;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const l=this.cameraWorldSize,f=this.cameraPixelsPerMeter,b=this._camera.position,T=1/this.height/this._pixelsPerMercatorPixel,M=[l,l,f];o.scale$2(M,M,T),o.scale$2(b,b,-1),o.multiply$2(b,b,M);const F=o.create();o.translate(F,F,b),o.scale(F,F,M),this.mercatorFogMatrix=F,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(l,f,T)}_computeCameraPosition(l){const f=(l=l||this.pixelsPerMeter)/this.pixelsPerMeter,b=this._camera.forward(),T=this.point,M=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*f-l/this.worldSize*this._centerAltitude;return[T.x/this.worldSize-b[0]*M,T.y/this.worldSize-b[1]*M,l/this.worldSize*this._centerAltitude-b[2]*M]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(l){const f=this._maxCameraBoundsDistance()*Math.cos(this._pitch),b=this._camera.position[2],T=l[2];let M=1;this.projection.wrap&&(this.center=this.center.wrap()),T>0&&(M=Math.min((f-b)/T,1)),this._camera.position=o.scaleAndAdd([],this._camera.position,l,M),this._updateStateFromCamera()}_updateStateFromCamera(){const l=this._camera.position,f=this._camera.forward(),{pitch:b,bearing:T}=this._camera.getPitchBearing(),M=o.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,F=this._mercatorZfromZoom(this._maxZoom)*Math.cos(o.degToRad(this._maxPitch)),G=Math.max((l[2]-M)/Math.cos(b),F),H=this._zoomFromMercatorZ(G);o.scaleAndAdd(l,l,f,G),this._pitch=o.clamp(b,o.degToRad(this.minPitch),o.degToRad(this.maxPitch)),this.angle=o.wrap(T,-Math.PI,Math.PI),this._setZoom(o.clamp(H,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new o.MercatorCoordinate(l[0],l[1],l[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(l){return Math.pow(2,l)*this.tileSize}_mercatorZfromZoom(l){return this.cameraToCenterDistance/this._worldSizeFromZoom(l)}_minimumHeightOverTerrain(){const l=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(l)}_zoomFromMercatorZ(l){return this.scaleZoom(this.cameraToCenterDistance/(l*this.tileSize))}zoomFromMercatorZAdjusted(l){const f=F=>{const G=this.getCameraToCenterDistance(this.projection,F);return this.scaleZoom(G/(l*this.tileSize))};let b,T=f(this.zoom),M=Math.abs(T-f(T));for(;b!==M;)T=f(T),b=M,M=Math.abs(T-f(T));return T}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(o.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(l,f){const b=Math.min(l.x,f.x),T=Math.max(l.x,f.x),M=Math.min(l.y,f.y),F=Math.max(l.y,f.y);if(M<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const G=[new o.pointGeometry(b,M),new o.pointGeometry(T,F),new o.pointGeometry(b,F),new o.pointGeometry(T,M)],H=this.renderWorldCopies?-3:0,Y=this.renderWorldCopies?4:1;for(const X of G){const te=this.pointRayIntersection(X);if(te.t<0)return!0;const le=this.rayIntersectionCoordinate(te);if(le.x<H||le.y<0||le.x>Y||le.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+o.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new o.pointGeometry(0,0),new o.pointGeometry(this.width,this.height))}zoomDeltaToMovement(l,f){const b=o.length(o.sub([],this._camera.position,l)),T=this._zoomFromMercatorZ(b)+f;return b-this._mercatorZfromZoom(T)}getCameraPoint(){if(this.projection.name==="globe"){const l=function(f,b){const T=[f[0],f[1],f[2],1];o.transformMat4$1(T,T,b);const M=Math.max(T[3],1e-6);return[T[0]/M,T[1]/M,T[2]/M,M]}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new o.pointGeometry(l[0],l[1])}{const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.pointGeometry(0,l))}}getCameraToCenterDistance(l,f=this.zoom){const b=as(l,f,this.width,this.height,1024),T=l.pixelSpaceConversion(this.center.lat,this.worldSize,b);return .5/Math.tan(.5*this._fov)*this.height*T}getWorldToCameraMatrix(){const l=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&o.multiply(l,l,this.globeMatrix),l}}function vl(_,l){let f=!1,b=null;const T=()=>{b=null,f&&(_(),b=setTimeout(T,l),f=!1)};return()=>(f=!0,b||T(),b)}class zc{constructor(l){this._hashName=l&&encodeURIComponent(l),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=vl(this._updateHashUnthrottled.bind(this),300)}addTo(l){return this._map=l,o.window.addEventListener("hashchange",this._onHashChange,!1),l.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),o.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const l=this._map;if(!l)return"";const f=yl(l);if(this._hashName){const b=this._hashName;let T=!1;const M=o.window.location.hash.slice(1).split("&").map(F=>{const G=F.split("=")[0];return G===b?(T=!0,`${G}=${f}`):F}).filter(F=>F);return T||M.push(`${b}=${f}`),`#${M.join("&")}`}return`#${f}`}_getCurrentHash(){const l=o.window.location.hash.replace("#","");if(this._hashName){let f;return l.split("&").map(b=>b.split("=")).forEach(b=>{b[0]===this._hashName&&(f=b)}),(f&&f[1]||"").split("/")}return l.split("/")}_onHashChange(){const l=this._map;if(!l)return!1;const f=this._getCurrentHash();if(f.length>=3&&!f.some(b=>isNaN(b))){const b=l.dragRotate.isEnabled()&&l.touchZoomRotate.isEnabled()?+(f[3]||0):l.getBearing();return l.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:b,pitch:+(f[4]||0)}),!0}return!1}_updateHashUnthrottled(){const l=o.window.location.href.replace(/(#.+)?$/,this.getHashString());o.window.history.replaceState(o.window.history.state,null,l)}}function yl(_,l){const f=_.getCenter(),b=Math.round(100*_.getZoom())/100,T=Math.ceil((b*Math.LN2+Math.log(512/360/.5))/Math.LN10),M=Math.pow(10,T),F=Math.round(f.lng*M)/M,G=Math.round(f.lat*M)/M,H=_.getBearing(),Y=_.getPitch();let X=l?`/${F}/${G}/${b}`:`${b}/${G}/${F}`;return(H||Y)&&(X+="/"+Math.round(10*H)/10),Y&&(X+=`/${Math.round(Y)}`),X}const Er={linearity:.3,easing:o.bezier(0,0,.3,1)},Fc=o.extend({deceleration:2500,maxSpeed:1400},Er),ta=o.extend({deceleration:20,maxSpeed:1400},Er),bl=o.extend({deceleration:1e3,maxSpeed:360},Er),na=o.extend({deceleration:1e3,maxSpeed:90},Er);class Vc{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.exported.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,f=o.exported.now();for(;l.length>0&&f-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const f={zoom:0,bearing:0,pitch:0,pan:new o.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:M}of this._inertiaBuffer)f.zoom+=M.zoomDelta||0,f.bearing+=M.bearingDelta||0,f.pitch+=M.pitchDelta||0,M.panDelta&&f.pan._add(M.panDelta),M.around&&(f.around=M.around),M.pinchAround&&(f.pinchAround=M.pinchAround);const b=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,T={};if(f.pan.mag()){const M=Cr(f.pan.mag(),b,o.extend({},Fc,l||{}));T.offset=f.pan.mult(M.amount/f.pan.mag()),T.center=this._map.transform.center,cs(T,M)}if(f.zoom){const M=Cr(f.zoom,b,ta);T.zoom=this._map.transform.zoom+M.amount,cs(T,M)}if(f.bearing){const M=Cr(f.bearing,b,bl);T.bearing=this._map.transform.bearing+o.clamp(M.amount,-179,179),cs(T,M)}if(f.pitch){const M=Cr(f.pitch,b,na);T.pitch=this._map.transform.pitch+M.amount,cs(T,M)}if(T.zoom||T.bearing){const M=f.pinchAround===void 0?f.around:f.pinchAround;T.around=M?this._map.unproject(M):this._map.getCenter()}return this.clear(),T.noMoveStart=!0,T}}function cs(_,l){(!_.duration||_.duration<l.duration)&&(_.duration=l.duration,_.easing=l.easing)}function Cr(_,l,f){const{maxSpeed:b,linearity:T,deceleration:M}=f,F=o.clamp(_*T/(l/1e3),-b,b),G=Math.abs(F)/(M*T);return{easing:f.easing,duration:1e3*G,amount:F*(G/2)}}class Hi extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,f,b,T={}){const M=Z(f.getCanvasContainer(),b),F=f.unproject(M);super(l,o.extend({point:M,lngLat:F,originalEvent:b},T)),this._defaultPrevented=!1,this.target=f}}class ia extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,f,b){const T=l==="touchend"?b.changedTouches:b.touches,M=re(f.getCanvasContainer(),T),F=M.map(H=>f.unproject(H)),G=M.reduce((H,Y,X,te)=>H.add(Y.div(te.length)),new o.pointGeometry(0,0));super(l,{points:M,point:G,lngLats:F,lngLat:f.unproject(G),originalEvent:b}),this._defaultPrevented=!1}}class Uc extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,f,b){super(l,{originalEvent:b}),this._defaultPrevented=!1}}class ra{constructor(l,f){this._map=l,this._clickTolerance=f.clickTolerance}reset(){this._mousedownPos=void 0}wheel(l){return this._firePreventable(new Uc(l.type,this._map,l))}mousedown(l,f){return this._mousedownPos=f,this._firePreventable(new Hi(l.type,this._map,l))}mouseup(l){this._map.fire(new Hi(l.type,this._map,l))}preclick(l){const f=o.extend({},l);f.type="preclick",this._map.fire(new Hi(f.type,this._map,f))}click(l,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||(this.preclick(l),this._map.fire(new Hi(l.type,this._map,l)))}dblclick(l){return this._firePreventable(new Hi(l.type,this._map,l))}mouseover(l){this._map.fire(new Hi(l.type,this._map,l))}mouseout(l){this._map.fire(new Hi(l.type,this._map,l))}touchstart(l){return this._firePreventable(new ia(l.type,this._map,l))}touchmove(l){this._map.fire(new ia(l.type,this._map,l))}touchend(l){this._map.fire(new ia(l.type,this._map,l))}touchcancel(l){this._map.fire(new ia(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class xl{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(l){this._map.fire(new Hi(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Hi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new Hi(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class jc{constructor(l,f){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=f.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,f){this.isEnabled()&&l.shiftKey&&l.button===0&&(V(),this._startPos=this._lastPos=f,this._active=!0)}mousemoveWindow(l,f){if(!this._active)return;const b=f,T=this._startPos,M=this._lastPos;if(!T||!M||M.equals(b)||!this._box&&b.dist(T)<this._clickTolerance)return;this._lastPos=b,this._box||(this._box=S("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));const F=Math.min(T.x,b.x),G=Math.max(T.x,b.x),H=Math.min(T.y,b.y),Y=Math.max(T.y,b.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${F}px,${H}px)`,this._box.style.width=G-F+"px",this._box.style.height=Y-H+"px")})}mouseupWindow(l,f){if(!this._active)return;const b=this._startPos,T=f;if(b&&l.button===0){if(this.reset(),W(),b.x!==T.x||b.y!==T.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:M=>M.fitScreenCoordinates(b,T,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",l)}}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),z(),delete this._startPos,delete this._lastPos}_fireEvent(l,f){return this._map.fire(new o.Event(l,{originalEvent:f}))}}function oa(_,l){const f={};for(let b=0;b<_.length;b++)f[_[b].identifier]=l[b];return f}class sa{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(l,f,b){(this.centroid||b.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=l.timeStamp),b.length===this.numTouches&&(this.centroid=function(T){const M=new o.pointGeometry(0,0);for(const F of T)M._add(F);return M.div(T.length)}(f),this.touches=oa(b,f)))}touchmove(l,f,b){if(this.aborted||!this.centroid)return;const T=oa(b,f);for(const M in this.touches){const F=this.touches[M],G=T[M];(!G||G.dist(F)>30)&&(this.aborted=!0)}}touchend(l,f,b){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),b.length===0){const T=!this.aborted&&this.centroid;if(this.reset(),T)return T}}}class us{constructor(l){this.singleTap=new sa(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(l,f,b){this.singleTap.touchstart(l,f,b)}touchmove(l,f,b){this.singleTap.touchmove(l,f,b)}touchend(l,f,b){const T=this.singleTap.touchend(l,f,b);if(T){const M=l.timeStamp-this.lastTime<500,F=!this.lastTap||this.lastTap.dist(T)<30;if(M&&F||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=T,this.count===this.numTaps)return this.reset(),T}}}class Gc{constructor(){this._zoomIn=new us({numTouches:1,numTaps:2}),this._zoomOut=new us({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,f,b){this._zoomIn.touchstart(l,f,b),this._zoomOut.touchstart(l,f,b)}touchmove(l,f,b){this._zoomIn.touchmove(l,f,b),this._zoomOut.touchmove(l,f,b)}touchend(l,f,b){const T=this._zoomIn.touchend(l,f,b),M=this._zoomOut.touchend(l,f,b);return T?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:F=>F.easeTo({duration:300,zoom:F.getZoom()+1,around:F.unproject(T)},{originalEvent:l})}):M?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:F=>F.easeTo({duration:300,zoom:F.getZoom()-1,around:F.unproject(M)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Hc={0:1,2:2};class aa{constructor(l){this.reset(),this._clickTolerance=l.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(l,f){return!1}_move(l,f){return{}}mousedown(l,f){if(this._lastPoint)return;const b=oe(l);this._correctButton(l,b)&&(this._lastPoint=f,this._eventButton=b)}mousemoveWindow(l,f){const b=this._lastPoint;if(b){if(l.preventDefault(),this._eventButton!=null&&function(T,M){const F=Hc[M];return T.buttons===void 0||(T.buttons&F)!==F}(l,this._eventButton))this.reset();else if(this._moved||!(f.dist(b)<this._clickTolerance))return this._moved=!0,this._lastPoint=f,this._move(b,f)}}mouseupWindow(l){this._lastPoint&&oe(l)===this._eventButton&&(this._moved&&W(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qc extends aa{mousedown(l,f){super.mousedown(l,f),this._lastPoint&&(this._active=!0)}_correctButton(l,f){return f===0&&!l.ctrlKey}_move(l,f){return{around:f,panDelta:f.sub(l)}}}class wl extends aa{_correctButton(l,f){return f===0&&l.ctrlKey||f===2}_move(l,f){const b=.8*(f.x-l.x);if(b)return this._active=!0,{bearingDelta:b}}contextmenu(l){l.preventDefault()}}class oo extends aa{_correctButton(l,f){return f===0&&l.ctrlKey||f===2}_move(l,f){const b=-.5*(f.y-l.y);if(b)return this._active=!0,{pitchDelta:b}}contextmenu(l){l.preventDefault()}}class Kc{constructor(l,f){this._map=l,this._el=l.getCanvasContainer(),this._minTouches=1,this._clickTolerance=f.clickTolerance||1,this.reset(),o.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new o.pointGeometry(0,0)}touchstart(l,f,b){return this._calculateTransform(l,f,b)}touchmove(l,f,b){if(this._active&&!(b.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(b.length===1&&!o.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return l.cancelable&&l.preventDefault(),this._calculateTransform(l,f,b)}}touchend(l,f,b){this._calculateTransform(l,f,b),this._active&&b.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,f,b){b.length>0&&(this._active=!0);const T=oa(b,f),M=new o.pointGeometry(0,0),F=new o.pointGeometry(0,0);let G=0;for(const Y in T){const X=T[Y],te=this._touches[Y];te&&(M._add(X),F._add(X.sub(te)),G++,T[Y]=X)}if(this._touches=T,G<this._minTouches||!F.mag())return;const H=F.div(G);return this._sum._add(H),this._sum.mag()<this._clickTolerance?void 0:{around:M.div(G),panDelta:H}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=S("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class la{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(l){}_move(l,f,b){return{}}touchstart(l,f,b){this._firstTwoTouches||b.length<2||(this._firstTwoTouches=[b[0].identifier,b[1].identifier],this._start([f[0],f[1]]))}touchmove(l,f,b){const T=this._firstTwoTouches;if(!T)return;l.preventDefault();const[M,F]=T,G=ds(b,f,M),H=ds(b,f,F);if(!G||!H)return;const Y=this._aroundCenter?null:G.add(H).div(2);return this._move([G,H],Y,l)}touchend(l,f,b){if(!this._firstTwoTouches)return;const[T,M]=this._firstTwoTouches,F=ds(b,f,T),G=ds(b,f,M);F&&G||(this._active&&W(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function ds(_,l,f){for(let b=0;b<_.length;b++)if(_[b].identifier===f)return l[b]}function El(_,l){return Math.log(_/l)/Math.LN2}class Wc extends la{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,f){const b=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(El(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:El(this._distance,b),pinchAround:f}}}function Cl(_,l){return 180*_.angleWith(l)/Math.PI}class Si extends la{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,f){const b=this._vector;if(this._vector=l[0].sub(l[1]),b&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Cl(this._vector,b),pinchAround:f}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const f=25/(Math.PI*this._minDiameter)*360,b=this._startVector;if(!b)return!1;const T=Cl(l,b);return Math.abs(T)<f}}function Sl(_){return Math.abs(_.y)>Math.abs(_.x)}class Zc extends la{constructor(l){super(),this._map=l}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(l){this._lastPoints=l,Sl(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,f,b){const T=this._lastPoints;if(!T)return;const M=l[0].sub(T[0]),F=l[1].sub(T[1]);return this._map._cooperativeGestures&&!o.isFullscreen()&&b.touches.length<3||(this._valid=this.gestureBeginsVertically(M,F,b.timeStamp),!this._valid)?void 0:(this._lastPoints=l,this._active=!0,{pitchDelta:(M.y+F.y)/2*-.5})}gestureBeginsVertically(l,f,b){if(this._valid!==void 0)return this._valid;const T=l.mag()>=2,M=f.mag()>=2;if(!T&&!M)return;if(!T||!M)return this._firstMove==null&&(this._firstMove=b),b-this._firstMove<100&&void 0;const F=l.y>0==f.y>0;return Sl(l)&&Sl(f)&&F}}const sd={panStep:100,bearingStep:15,pitchStep:10};class ad{constructor(){const l=sd;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let f=0,b=0,T=0,M=0,F=0;switch(l.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:l.shiftKey?b=-1:(l.preventDefault(),M=-1);break;case 39:l.shiftKey?b=1:(l.preventDefault(),M=1);break;case 38:l.shiftKey?T=1:(l.preventDefault(),F=-1);break;case 40:l.shiftKey?T=-1:(l.preventDefault(),F=1);break;default:return}return this._rotationDisabled&&(b=0,T=0),{cameraAnimation:G=>{const H=G.getZoom();G.easeTo({duration:300,easeId:"keyboardHandler",easing:Sr,zoom:f?Math.round(H)+f*(l.shiftKey?2:1):H,bearing:G.getBearing()+b*this._bearingStep,pitch:G.getPitch()+T*this._pitchStep,offset:[-M*this._panStep,-F*this._panStep],center:G.getCenter()},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Sr(_){return _*(2-_)}const Tl=4.000244140625;class Oo{constructor(l,f){this._map=l,this._el=l.getCanvasContainer(),this._handler=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(l){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(l.ctrlKey||l.metaKey||this.isZooming()||o.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let f=l.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const b=o.exported.now(),T=b-(this._lastWheelEventTime||0);this._lastWheelEventTime=b,f!==0&&f%Tl==0?this._type="wheel":f!==0&&Math.abs(f)<4?this._type="trackpad":T>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(T*f)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),l.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=l,this._delta-=f,this._active||this._start(l)),l.preventDefault()}_onTimeout(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const f=Z(this._el,l);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:f,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._map.transform;this._type==="wheel"&&l.projection.wrap&&(l._center.lng>=180||l._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const f=()=>l._terrainEnabled()&&this._aroundCoord?l.computeZoomRelativeTo(this._aroundCoord):l.zoom;if(this._delta!==0){const H=this._type==="wheel"&&Math.abs(this._delta)>Tl?this._wheelZoomRate:this._defaultZoomRate;let Y=2/(1+Math.exp(-Math.abs(this._delta*H)));this._delta<0&&Y!==0&&(Y=1/Y);const X=f(),te=Math.pow(2,X),le=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):te;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(le*Y))),this._type==="wheel"&&(this._startZoom=X,this._easing=this._smoothOutEasing(200)),this._delta=0}const b=typeof this._targetZoom=="number"?this._targetZoom:f(),T=this._startZoom,M=this._easing;let F,G=!1;if(this._type==="wheel"&&T&&M){const H=Math.min((o.exported.now()-this._lastWheelEventTime)/200,1),Y=M(H);F=o.number(T,b,Y),H<1?this._frameId||(this._frameId=!0):G=!0}else F=b,G=!0;return this._active=!0,G&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!G,zoomDelta:F-f(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let f=o.ease;if(this._prevEase){const b=this._prevEase,T=(o.exported.now()-b.start)/b.duration,M=b.easing(T+.01)-b.easing(T),F=.27/Math.sqrt(M*M+1e-4)*.01,G=Math.sqrt(.0729-F*F);f=o.bezier(F,G,.25,1)}return this._prevEase={start:o.exported.now(),duration:l,easing:f},f}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=S("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(o.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class pr{constructor(l,f){this._clickZoom=l,this._tapZoom=f}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ca{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(l,f){return l.preventDefault(),{cameraAnimation:b=>{b.easeTo({duration:300,zoom:b.getZoom()+(l.shiftKey?-1:1),around:b.unproject(f)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gt{constructor(){this._tap=new us({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(l,f,b){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?b.length>0&&(this._swipePoint=f[0],this._swipeTouch=b[0].identifier):this._tap.touchstart(l,f,b))}touchmove(l,f,b){if(this._tapTime){if(this._swipePoint){if(b[0].identifier!==this._swipeTouch)return;const T=f[0],M=T.y-this._swipePoint.y;return this._swipePoint=T,l.preventDefault(),this._active=!0,{zoomDelta:M/128}}}else this._tap.touchmove(l,f,b)}touchend(l,f,b){this._tapTime?this._swipePoint&&b.length===0&&this.reset():this._tap.touchend(l,f,b)&&(this._tapTime=l.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yc{constructor(l,f,b){this._el=l,this._mousePan=f,this._touchPan=b}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Xc{constructor(l,f,b){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=f,this._mousePitch=b}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ps{constructor(l,f,b,T){this._el=l,this._touchZoom=f,this._touchRotate=b,this._tapDragZoom=T,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Br=_=>_.zoom||_.drag||_.pitch||_.rotate;class Jc extends o.Event{}class Qc{constructor(){this.constants=[1,1,.01],this.radius=0}setup(l,f){const b=o.sub([],f,l);this.radius=o.length(b[2]<0?o.div([],b,this.constants):[b[0],b[1],0])}projectRay(l){o.div(l,l,this.constants),o.normalize(l,l),o.mul$1(l,l,this.constants);const f=o.scale$2([],l,this.radius);if(f[2]>0){const b=o.scale$2([],[0,0,1],o.dot(f,[0,0,1])),T=o.scale$2([],o.normalize([],[f[0],f[1],0]),this.radius),M=o.add([],f,o.scale$2([],o.sub([],o.add([],T,b),f),2));f[0]=M[0],f[1]=M[1]}return f}}function hs(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class eu{constructor(l,f){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Vc(l),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Qc,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(f),o.bindAll(["handleEvent","handleWindowEvent"],this);const b=this._el;this._listeners=[[b,"touchstart",{passive:!0}],[b,"touchmove",{passive:!1}],[b,"touchend",void 0],[b,"touchcancel",void 0],[b,"mousedown",void 0],[b,"mousemove",void 0],[b,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[b,"mouseover",void 0],[b,"mouseout",void 0],[b,"dblclick",void 0],[b,"click",void 0],[b,"keydown",{capture:!1}],[b,"keyup",void 0],[b,"wheel",{passive:!1}],[b,"contextmenu",void 0],[o.window,"blur",void 0]];for(const[T,M,F]of this._listeners)T.addEventListener(M,T===o.window.document?this.handleWindowEvent:this.handleEvent,F)}destroy(){for(const[l,f,b]of this._listeners)l.removeEventListener(f,l===o.window.document?this.handleWindowEvent:this.handleEvent,b)}_addDefaultHandlers(l){const f=this._map,b=f.getCanvasContainer();this._add("mapEvent",new ra(f,l));const T=f.boxZoom=new jc(f,l);this._add("boxZoom",T);const M=new Gc,F=new ca;f.doubleClickZoom=new pr(F,M),this._add("tapZoom",M),this._add("clickZoom",F);const G=new Gt;this._add("tapDragZoom",G);const H=f.touchPitch=new Zc(f);this._add("touchPitch",H);const Y=new wl(l),X=new oo(l);f.dragRotate=new Xc(l,Y,X),this._add("mouseRotate",Y,["mousePitch"]),this._add("mousePitch",X,["mouseRotate"]);const te=new qc(l),le=new Kc(f,l);f.dragPan=new Yc(b,te,le),this._add("mousePan",te),this._add("touchPan",le,["touchZoom","touchRotate"]);const ge=new Si,pe=new Wc;f.touchZoomRotate=new ps(b,pe,ge,G),this._add("touchRotate",ge,["touchPan","touchZoom"]),this._add("touchZoom",pe,["touchPan","touchRotate"]),this._add("blockableMapEvent",new xl(f));const ve=f.scrollZoom=new Oo(f,this);this._add("scrollZoom",ve,["mousePan"]);const fe=f.keyboard=new ad;this._add("keyboard",fe);for(const de of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])l.interactive&&l[de]&&f[de].enable(l[de])}_add(l,f,b){this._handlers.push({handlerName:l,handler:f,allowed:b}),this._handlersById[l]=f}stop(l){if(!this._updatingCamera){for(const{handler:f}of this._handlers)f.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Br(this._eventsInProgress)||this.isZooming()}_blockedByActive(l,f,b){for(const T in l)if(T!==b&&(!f||f.indexOf(T)<0))return!0;return!1}handleWindowEvent(l){this.handleEvent(l,`${l.type}Window`)}_getMapTouches(l){const f=[];for(const b of l)this._el.contains(b.target)&&f.push(b);return f}handleEvent(l,f){this._updatingCamera=!0;const b=l.type==="renderFrame",T=b?void 0:l,M={needsRenderFrame:!1},F={},G={},H=l.touches?this._getMapTouches(l.touches):void 0,Y=H?re(this._el,H):b?void 0:Z(this._el,l);for(const{handlerName:le,handler:ge,allowed:pe}of this._handlers){if(!ge.isEnabled())continue;let ve;this._blockedByActive(G,pe,le)?ge.reset():ge[f||l.type]&&(ve=ge[f||l.type](l,Y,H),this.mergeHandlerResult(M,F,ve,le,T),ve&&ve.needsRenderFrame&&this._triggerRenderFrame()),(ve||ge.isActive())&&(G[le]=ge)}const X={};for(const le in this._previousActiveHandlers)G[le]||(X[le]=T);this._previousActiveHandlers=G,(Object.keys(X).length||hs(M))&&(this._changes.push([M,F,X]),this._triggerRenderFrame()),(Object.keys(G).length||hs(M))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:te}=M;te&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],te(this._map))}mergeHandlerResult(l,f,b,T,M){if(!b)return;o.extend(l,b);const F={handlerName:T,originalEvent:b.originalEvent||M};b.zoomDelta!==void 0&&(f.zoom=F),b.panDelta!==void 0&&(f.drag=F),b.pitchDelta!==void 0&&(f.pitch=F),b.bearingDelta!==void 0&&(f.rotate=F)}_applyChanges(){const l={},f={},b={};for(const[T,M,F]of this._changes)T.panDelta&&(l.panDelta=(l.panDelta||new o.pointGeometry(0,0))._add(T.panDelta)),T.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+T.zoomDelta),T.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+T.bearingDelta),T.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+T.pitchDelta),T.around!==void 0&&(l.around=T.around),T.aroundCoord!==void 0&&(l.aroundCoord=T.aroundCoord),T.pinchAround!==void 0&&(l.pinchAround=T.pinchAround),T.noInertia&&(l.noInertia=T.noInertia),o.extend(f,M),o.extend(b,F);this._updateMapTransform(l,f,b),this._changes=[]}_updateMapTransform(l,f,b){const T=this._map,M=T.transform,F=be=>[be.x,be.y,be.z];if((be=>{const he=this._eventsInProgress.drag;return he&&!this._handlersById[he.handlerName].isActive()})()&&!hs(l)){const be=M.zoom;M.cameraElevationReference="sea",M.recenterOnTerrain(),M.cameraElevationReference="ground",be!==M.zoom&&this._map._update(!0)}if(!hs(l))return void this._fireEvents(f,b,!0);let{panDelta:G,zoomDelta:H,bearingDelta:Y,pitchDelta:X,around:te,aroundCoord:le,pinchAround:ge}=l;ge!==void 0&&(te=ge),(be=>f.drag&&!this._eventsInProgress.drag)()&&te&&(this._dragOrigin=F(M.pointCoordinate3D(te)),this._trackingEllipsoid.setup(M._camera.position,this._dragOrigin)),M.cameraElevationReference="sea",T._stop(!0),te=te||T.transform.centerPoint,Y&&(M.bearing+=Y),X&&(M.pitch+=X),M._updateCameraState();const pe=[0,0,0];if(G)if(M.projection.name==="mercator"){const be=this._trackingEllipsoid.projectRay(M.screenPointToMercatorRay(te).dir),he=this._trackingEllipsoid.projectRay(M.screenPointToMercatorRay(te.sub(G)).dir);pe[0]=he[0]-be[0],pe[1]=he[1]-be[1]}else{const be=M.pointCoordinate(te);if(M.projection.name==="globe"){G=G.rotate(-M.angle);const he=M._pixelsPerMercatorPixel/M.worldSize;pe[0]=-G.x*o.mercatorScale(o.latFromMercatorY(be.y))*he,pe[1]=-G.y*o.mercatorScale(M.center.lat)*he}else{const he=M.pointCoordinate(te.sub(G));be&&he&&(pe[0]=he.x-be.x,pe[1]=he.y-be.y)}}const ve=M.zoom,fe=[0,0,0];if(H){const be=F(le||M.pointCoordinate3D(te)),he={dir:o.normalize([],o.sub([],be,M._camera.position))};if(he.dir[2]<0){const Ie=M.zoomDeltaToMovement(be,H);o.scale$2(fe,he.dir,Ie)}}const de=o.add(pe,pe,fe);M._translateCameraConstrained(de),H&&Math.abs(M.zoom-ve)>1e-4&&M.recenterOnTerrain(),M.cameraElevationReference="ground",this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(f,b,!0)}_fireEvents(l,f,b){const T=Br(this._eventsInProgress),M=Br(l),F={};for(const X in l){const{originalEvent:te}=l[X];this._eventsInProgress[X]||(F[`${X}start`]=te),this._eventsInProgress[X]=l[X]}!T&&M&&this._fireEvent("movestart",M.originalEvent);for(const X in F)this._fireEvent(X,F[X]);M&&this._fireEvent("move",M.originalEvent);for(const X in l){const{originalEvent:te}=l[X];this._fireEvent(X,te)}const G={};let H;for(const X in this._eventsInProgress){const{handlerName:te,originalEvent:le}=this._eventsInProgress[X];this._handlersById[te].isActive()||(delete this._eventsInProgress[X],H=f[te]||le,G[`${X}end`]=H)}for(const X in G)this._fireEvent(X,G[X]);const Y=Br(this._eventsInProgress);if(b&&(T||M)&&!Y){this._updatingCamera=!0;const X=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),te=le=>le!==0&&-this._bearingSnap<le&&le<this._bearingSnap;X?(te(X.bearing||this._map.getBearing())&&(X.bearing=0),this._map.easeTo(X,{originalEvent:H})):(this._map.fire(new o.Event("moveend",{originalEvent:H})),te(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(l,f){this._map.fire(new o.Event(l,f?{originalEvent:f}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{this._frameId=void 0,this.handleEvent(new Jc("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Al="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class tu extends o.Evented{constructor(l,f){super(),this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=f.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}getCenter(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(l,f){return this.jumpTo({center:l},f)}panBy(l,f,b){return l=o.pointGeometry.convert(l).mult(-1),this.panTo(this.transform.center,o.extend({offset:l},f),b)}panTo(l,f,b){return this.easeTo(o.extend({center:l},f),b)}getZoom(){return this.transform.zoom}setZoom(l,f){return this.jumpTo({zoom:l},f),this}zoomTo(l,f,b){return this.easeTo(o.extend({zoom:l},f),b)}zoomIn(l,f){return this.zoomTo(this.getZoom()+1,l,f),this}zoomOut(l,f){return this.zoomTo(this.getZoom()-1,l,f),this}getBearing(){return this.transform.bearing}setBearing(l,f){return this.jumpTo({bearing:l},f),this}getPadding(){return this.transform.padding}setPadding(l,f){return this.jumpTo({padding:l},f),this}rotateTo(l,f,b){return this.easeTo(o.extend({bearing:l},f),b)}resetNorth(l,f){return this.rotateTo(0,o.extend({duration:1e3},l),f),this}resetNorthPitch(l,f){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},l),f),this}snapToNorth(l,f){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,f):this}getPitch(){return this.transform.pitch}setPitch(l,f){return this.jumpTo({pitch:l},f),this}cameraForBounds(l,f){l=o.LngLatBounds.convert(l);const b=f&&f.bearing||0,T=l.getNorthWest(),M=l.getSouthEast();return this._cameraForBounds(this.transform,T,M,b,f)}_extendCameraOptions(l){const f={top:0,bottom:0,right:0,left:0};if(typeof(l=o.extend({padding:f,offset:[0,0],maxZoom:this.transform.maxZoom},l)).padding=="number"){const b=l.padding;l.padding={top:b,bottom:b,right:b,left:b}}return l.padding=o.extend(f,l.padding),l}_minimumAABBFrustumDistance(l,f){const b=f.max[0]-f.min[0],T=f.max[1]-f.min[1];return b/T>l.aspect?b/(2*Math.tan(.5*l.fovX)*l.aspect):T/(2*Math.tan(.5*l.fovY)*l.aspect)}_cameraForBoundsOnGlobe(l,f,b,T,M){const F=l.clone(),G=this._extendCameraOptions(M);F.bearing=T;const H=o.LngLat.convert(f),Y=o.LngLat.convert(b),X=.5*(H.lat+Y.lat),te=.5*(H.lng+Y.lng),le=o.latLngToECEF(X,te),ge=o.normalize([],le),pe=o.normalize([],o.cross([],ge,[0,1,0])),ve=o.cross([],pe,ge),fe=[pe[0],pe[1],pe[2],0,ve[0],ve[1],ve[2],0,ge[0],ge[1],ge[2],0,0,0,0,1],de=[le,o.latLngToECEF(H.lat,H.lng),o.latLngToECEF(Y.lat,H.lng),o.latLngToECEF(Y.lat,Y.lng),o.latLngToECEF(H.lat,Y.lng),o.latLngToECEF(X,H.lng),o.latLngToECEF(X,Y.lng),o.latLngToECEF(H.lat,te),o.latLngToECEF(Y.lat,te)];let be=o.Aabb.fromPoints(de.map(Nt=>[o.dot(pe,Nt),o.dot(ve,Nt),o.dot(ge,Nt)]));const he=o.transformMat4([],be.center,fe);o.squaredLength(he)===0&&o.set(he,0,0,1),o.normalize(he,he),o.scale$2(he,he,o.GLOBE_RADIUS),F.center=o.ecefToLatLng(he);const Ie=F.getWorldToCameraMatrix(),Le=o.invert(new Float64Array(16),Ie);be=o.Aabb.applyTransform(be,o.multiply([],Ie,fe)),o.transformMat4(he,he,Ie);const Ae=.5*(be.max[2]-be.min[2]),Pe=this._minimumAABBFrustumDistance(F,be),qe=o.scale$2([],[0,0,1],Ae),rt=o.add(qe,he,qe),Xe=Pe+(F.pitch===0?0:o.distance(he,rt)),St=F.globeCenterInViewSpace,je=o.sub([],he,[St[0],St[1],St[2]]);o.normalize(je,je),o.scale$2(je,je,Xe);const _t=o.add([],he,je);o.transformMat4(_t,_t,Le);const ht=o.earthRadius/o.GLOBE_RADIUS,We=o.length(_t),Ue=o.mercatorZfromAltitude(We*ht-o.earthRadius,0),Dt=Math.min(F.zoomFromMercatorZAdjusted(Ue),G.maxZoom);return Dt>.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(F.setProjection({name:"mercator"}),F.zoom=Dt,this._cameraForBounds(F,f,b,T,M)):{center:F.center,zoom:Dt,bearing:T}}queryTerrainElevation(l,f){const b=this.transform.elevation;return b?(f=o.extend({},{exaggerated:!0},f),b.getAtPoint(o.MercatorCoordinate.fromLngLat(l),null,f.exaggerated)):null}_cameraForBounds(l,f,b,T,M){if(l.projection.name==="globe")return this._cameraForBoundsOnGlobe(l,f,b,T,M);const F=l.clone(),G=this._extendCameraOptions(M),H=F.padding;F.bearing=T;const Y=o.LngLat.convert(f),X=o.LngLat.convert(b),te=new o.LngLat(Y.lng,X.lat),le=new o.LngLat(X.lng,Y.lat),ge=F.project(Y),pe=F.project(X),ve=this.queryTerrainElevation(Y),fe=this.queryTerrainElevation(X),de=this.queryTerrainElevation(te),be=this.queryTerrainElevation(le),he=[[ge.x,ge.y,Math.min(ve||0,fe||0,de||0,be||0)],[pe.x,pe.y,Math.max(ve||0,fe||0,de||0,be||0)]];let Ie=o.Aabb.fromPoints(he);const Le=F.getWorldToCameraMatrix(),Ae=o.invert(new Float64Array(16),Le);Ie=o.Aabb.applyTransform(Ie,Le);const Pe=o.sub([],Ie.max,Ie.min),qe=H.left||0,rt=H.right||0,Xe=H.bottom||0,St=H.top||0,{left:je,right:_t,top:ht,bottom:We}=G.padding,Ue=.5*(qe+rt),Dt=.5*(St+Xe),Nt=Math.min(F.scaleZoom(F.scale*Math.min((F.width-(qe+rt+je+_t))/Pe[0],(F.height-(Xe+St+We+ht))/Pe[1])),G.maxZoom),Lt=F.scale/F.zoomScale(Nt);Ie=new o.Aabb([Ie.min[0]-(je+Ue)*Lt,Ie.min[1]-(We+Dt)*Lt,Ie.min[2]],[Ie.max[0]+(_t+Ue)*Lt,Ie.max[1]+(ht+Dt)*Lt,Ie.max[2]]);const Mt=.5*Pe[2],Zt=this._minimumAABBFrustumDistance(F,Ie),an=[0,0,1,0];o.transformMat4$1(an,an,Le),o.normalize$2(an,an);const tn=o.scale$2([],an,Zt+Mt),Yt=o.add([],Ie.center,tn),It=(typeof G.offset.x=="number"&&typeof G.offset.y=="number"?new o.pointGeometry(G.offset.x,G.offset.y):o.pointGeometry.convert(G.offset)).rotate(-o.degToRad(T));Ie.center[0]-=It.x*Lt,Ie.center[1]+=It.y*Lt,o.transformMat4(Ie.center,Ie.center,Ae),o.transformMat4(Yt,Yt,Ae);const pn=[Ie.center[0],Ie.center[1],Yt[2]*F.pixelsPerMeter];o.scale$2(pn,pn,1/F.worldSize);const xn=o.lngFromMercatorX(pn[0]),Fn=o.latFromMercatorY(pn[1]),Vn=Math.min(F._zoomFromMercatorZ(pn[2]),G.maxZoom),Pn=new o.LngLat(xn,Fn);return F.mercatorFromTransition&&Vn<.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(F.setProjection({name:"globe"}),F.zoom=Vn,this._cameraForBounds(F,f,b,T,M)):{center:Pn,zoom:Vn,bearing:T}}fitBounds(l,f,b){const T=this.cameraForBounds(l,f);return this._fitInternal(T,f,b)}fitScreenCoordinates(l,f,b,T,M){const F=o.pointGeometry.convert(l),G=o.pointGeometry.convert(f),H=new o.pointGeometry(Math.min(F.x,G.x),Math.min(F.y,G.y)),Y=new o.pointGeometry(Math.max(F.x,G.x),Math.max(F.y,G.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(F,G))return this;const X=this.transform.pointLocation3D(H),te=this.transform.pointLocation3D(Y),le=this.transform.pointLocation3D(new o.pointGeometry(H.x,Y.y)),ge=this.transform.pointLocation3D(new o.pointGeometry(Y.x,H.y)),pe=[Math.min(X.lng,te.lng,le.lng,ge.lng),Math.min(X.lat,te.lat,le.lat,ge.lat)],ve=[Math.max(X.lng,te.lng,le.lng,ge.lng),Math.max(X.lat,te.lat,le.lat,ge.lat)],fe=this._cameraForBounds(this.transform,pe,ve,b,T);return this._fitInternal(fe,T,M)}_fitInternal(l,f,b){return l?(delete(f=o.extend(l,f)).padding,f.linear?this.easeTo(f,b):this.flyTo(f,b)):this}jumpTo(l,f){this.stop();const b=l.preloadOnly?this.transform.clone():this.transform;let T=!1,M=!1,F=!1;return"zoom"in l&&b.zoom!==+l.zoom&&(T=!0,b.zoom=+l.zoom),l.center!==void 0&&(b.center=o.LngLat.convert(l.center)),"bearing"in l&&b.bearing!==+l.bearing&&(M=!0,b.bearing=+l.bearing),"pitch"in l&&b.pitch!==+l.pitch&&(F=!0,b.pitch=+l.pitch),l.padding==null||b.isPaddingEqual(l.padding)||(b.padding=l.padding),l.preloadOnly?(this._preloadTiles(b),this):(this.fire(new o.Event("movestart",f)).fire(new o.Event("move",f)),T&&this.fire(new o.Event("zoomstart",f)).fire(new o.Event("zoom",f)).fire(new o.Event("zoomend",f)),M&&this.fire(new o.Event("rotatestart",f)).fire(new o.Event("rotate",f)).fire(new o.Event("rotateend",f)),F&&this.fire(new o.Event("pitchstart",f)).fire(new o.Event("pitch",f)).fire(new o.Event("pitchend",f)),this.fire(new o.Event("moveend",f)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||o.warnOnce(Al),this.transform.getFreeCameraOptions()}setFreeCameraOptions(l,f){const b=this.transform;if(!b.projection.supportsFreeCamera)return o.warnOnce(Al),this;this.stop();const T=b.zoom,M=b.pitch,F=b.bearing;b.setFreeCameraOptions(l);const G=T!==b.zoom,H=M!==b.pitch,Y=F!==b.bearing;return this.fire(new o.Event("movestart",f)).fire(new o.Event("move",f)),G&&this.fire(new o.Event("zoomstart",f)).fire(new o.Event("zoom",f)).fire(new o.Event("zoomend",f)),Y&&this.fire(new o.Event("rotatestart",f)).fire(new o.Event("rotate",f)).fire(new o.Event("rotateend",f)),H&&this.fire(new o.Event("pitchstart",f)).fire(new o.Event("pitch",f)).fire(new o.Event("pitchend",f)),this.fire(new o.Event("moveend",f)),this}easeTo(l,f){this._stop(!1,l.easeId),((l=o.extend({offset:[0,0],duration:500,easing:o.ease},l)).animate===!1||!l.essential&&o.exported.prefersReducedMotion)&&(l.duration=0);const b=this.transform,T=this.getZoom(),M=this.getBearing(),F=this.getPitch(),G=this.getPadding(),H="zoom"in l?+l.zoom:T,Y="bearing"in l?this._normalizeBearing(l.bearing,M):M,X="pitch"in l?+l.pitch:F,te="padding"in l?l.padding:b.padding,le=o.pointGeometry.convert(l.offset);let ge,pe,ve;if(b.projection.name==="globe"){const rt=o.MercatorCoordinate.fromLngLat(b.center),Xe=le.rotate(-b.angle);rt.x+=Xe.x/b.worldSize,rt.y+=Xe.y/b.worldSize;const St=rt.toLngLat(),je=o.LngLat.convert(l.center||St);this._normalizeCenter(je),ge=b.centerPoint.add(Xe),pe=new o.pointGeometry(rt.x,rt.y).mult(b.worldSize),ve=new o.pointGeometry(o.mercatorXfromLng(je.lng),o.mercatorYfromLat(je.lat)).mult(b.worldSize).sub(pe)}else{ge=b.centerPoint.add(le);const rt=b.pointLocation(ge),Xe=o.LngLat.convert(l.center||rt);this._normalizeCenter(Xe),pe=b.project(rt),ve=b.project(Xe).sub(pe)}const fe=b.zoomScale(H-T);let de,be;l.around&&(de=o.LngLat.convert(l.around),be=b.locationPoint(de));const he=this._zooming||H!==T,Ie=this._rotating||M!==Y,Le=this._pitching||X!==F,Ae=!b.isPaddingEqual(te),Pe=rt=>Xe=>{if(he&&(rt.zoom=o.number(T,H,Xe)),Ie&&(rt.bearing=o.number(M,Y,Xe)),Le&&(rt.pitch=o.number(F,X,Xe)),Ae&&(rt.interpolatePadding(G,te,Xe),ge=rt.centerPoint.add(le)),de)rt.setLocationAtPoint(de,be);else{const St=rt.zoomScale(rt.zoom-T),je=H>T?Math.min(2,fe):Math.max(.5,fe),_t=Math.pow(je,1-Xe),ht=rt.unproject(pe.add(ve.mult(Xe*_t)).mult(St));rt.setLocationAtPoint(rt.renderWorldCopies?ht.wrap():ht,ge)}return l.preloadOnly||this._fireMoveEvents(f),rt};if(l.preloadOnly){const rt=this._emulate(Pe,l.duration,b);return this._preloadTiles(rt),this}const qe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=he,this._rotating=Ie,this._pitching=Le,this._padding=Ae,this._easeId=l.easeId,this._prepareEase(f,l.noMoveStart,qe),this._ease(Pe(b),rt=>{b.recenterOnTerrain(),this._afterEase(f,rt)},l),this}_prepareEase(l,f,b={}){this._moving=!0,this.transform.cameraElevationReference="sea",f||b.moving||this.fire(new o.Event("movestart",l)),this._zooming&&!b.zooming&&this.fire(new o.Event("zoomstart",l)),this._rotating&&!b.rotating&&this.fire(new o.Event("rotatestart",l)),this._pitching&&!b.pitching&&this.fire(new o.Event("pitchstart",l))}_fireMoveEvents(l){this.fire(new o.Event("move",l)),this._zooming&&this.fire(new o.Event("zoom",l)),this._rotating&&this.fire(new o.Event("rotate",l)),this._pitching&&this.fire(new o.Event("pitch",l))}_afterEase(l,f){if(this._easeId&&f&&this._easeId===f)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const b=this._zooming,T=this._rotating,M=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,b&&this.fire(new o.Event("zoomend",l)),T&&this.fire(new o.Event("rotateend",l)),M&&this.fire(new o.Event("pitchend",l)),this.fire(new o.Event("moveend",l))}flyTo(l,f){if(!l.essential&&o.exported.prefersReducedMotion){const Lt=o.pick(l,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Lt,f)}this.stop(),l=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},l);const b=this.transform,T=this.getZoom(),M=this.getBearing(),F=this.getPitch(),G=this.getPadding(),H="zoom"in l?o.clamp(+l.zoom,b.minZoom,b.maxZoom):T,Y="bearing"in l?this._normalizeBearing(l.bearing,M):M,X="pitch"in l?+l.pitch:F,te="padding"in l?l.padding:b.padding,le=b.zoomScale(H-T),ge=o.pointGeometry.convert(l.offset);let pe=b.centerPoint.add(ge);const ve=b.pointLocation(pe),fe=o.LngLat.convert(l.center||ve);this._normalizeCenter(fe);const de=b.project(ve),be=b.project(fe).sub(de);let he=l.curve;const Ie=Math.max(b.width,b.height),Le=Ie/le,Ae=be.mag();if("minZoom"in l){const Lt=o.clamp(Math.min(l.minZoom,T,H),b.minZoom,b.maxZoom),Mt=Ie/b.zoomScale(Lt-T);he=Math.sqrt(Mt/Ae*2)}const Pe=he*he;function qe(Lt){const Mt=(Le*Le-Ie*Ie+(Lt?-1:1)*Pe*Pe*Ae*Ae)/(2*(Lt?Le:Ie)*Pe*Ae);return Math.log(Math.sqrt(Mt*Mt+1)-Mt)}function rt(Lt){return(Math.exp(Lt)-Math.exp(-Lt))/2}function Xe(Lt){return(Math.exp(Lt)+Math.exp(-Lt))/2}const St=qe(0);let je=function(Lt){return Xe(St)/Xe(St+he*Lt)},_t=function(Lt){return Ie*((Xe(St)*(rt(Mt=St+he*Lt)/Xe(Mt))-rt(St))/Pe)/Ae;var Mt},ht=(qe(1)-St)/he;if(Math.abs(Ae)<1e-6||!isFinite(ht)){if(Math.abs(Ie-Le)<1e-6)return this.easeTo(l,f);const Lt=Le<Ie?-1:1;ht=Math.abs(Math.log(Le/Ie))/he,_t=function(){return 0},je=function(Mt){return Math.exp(Lt*he*Mt)}}l.duration="duration"in l?+l.duration:1e3*ht/("screenSpeed"in l?+l.screenSpeed/he:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0);const We=M!==Y,Ue=X!==F,Dt=!b.isPaddingEqual(te),Nt=Lt=>Mt=>{const Zt=Mt*ht,an=1/je(Zt);Lt.zoom=Mt===1?H:T+Lt.scaleZoom(an),We&&(Lt.bearing=o.number(M,Y,Mt)),Ue&&(Lt.pitch=o.number(F,X,Mt)),Dt&&(Lt.interpolatePadding(G,te,Mt),pe=Lt.centerPoint.add(ge));const tn=Mt===1?fe:Lt.unproject(de.add(be.mult(_t(Zt))).mult(an));return Lt.setLocationAtPoint(Lt.renderWorldCopies?tn.wrap():tn,pe),Lt._updateCameraOnTerrain(),l.preloadOnly||this._fireMoveEvents(f),Lt};if(l.preloadOnly){const Lt=this._emulate(Nt,l.duration,b);return this._preloadTiles(Lt),this}return this._zooming=!0,this._rotating=We,this._pitching=Ue,this._padding=Dt,this._prepareEase(f,!1),this._ease(Nt(b),()=>this._afterEase(f),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,f){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const b=this._onEaseEnd;this._onEaseEnd=void 0,b.call(this,f)}if(!l){const b=this.handlers;b&&b.stop(!1)}return this}_ease(l,f,b){b.animate===!1||b.duration===0?(l(1),f()):(this._easeStart=o.exported.now(),this._easeOptions=b,this._onEaseFrame=l,this._onEaseEnd=f,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const l=Math.min((o.exported.now()-this._easeStart)/this._easeOptions.duration,1),f=this._onEaseFrame;f&&f(this._easeOptions.easing(l)),l<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(l,f){l=o.wrap(l,-180,180);const b=Math.abs(l-f);return Math.abs(l-360-f)<b&&(l-=360),Math.abs(l+360-f)<b&&(l+=360),l}_normalizeCenter(l){const f=this.transform;if(!f.renderWorldCopies||f.maxBounds)return;const b=l.lng-f.center.lng;l.lng+=b>180?-360:b<-180?360:0}_emulate(l,f,b){const T=Math.ceil(15*f/1e3),M=[],F=l(b.clone());for(let G=0;G<=T;G++){const H=F(G/T);M.push(H.clone())}return M}}class kl{constructor(l={}){this.options=l,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(l){const f=this.options&&this.options.compact;return this._map=l,this._container=S("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=S("button","mapboxgl-ctrl-attrib-button",this._container),S("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=S("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),f&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),f===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(l,f){const b=this._map._getUIString(`AttributionControl.${f}`);l.setAttribute("aria-label",b),l.removeAttribute("title"),l.firstElementChild&&l.firstElementChild.setAttribute("title",b)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));const f=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(l){const b=f.reduce((T,M,F)=>(M.value&&(T+=`${M.key}=${M.value}${F<f.length-1?"&":""}`),T),"?");l.href=`${o.config.FEEDBACK_URL}/${b}#${yl(this._map,!0)}`,l.rel="noopener nofollow",this._setElementTitle(l,"MapFeedback")}}_updateData(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let l=[];if(this._map.style.stylesheet){const T=this._map.style.stylesheet;this.styleOwner=T.owner,this.styleId=T.id}const f=this._map.style._sourceCaches;for(const T in f){const M=f[T];if(M.used){const F=M.getSource();F.attribution&&l.indexOf(F.attribution)<0&&l.push(F.attribution)}}l.sort((T,M)=>T.length-M.length),l=l.filter((T,M)=>{for(let F=M+1;F<l.length;F++)if(l[F].indexOf(T)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=[...this.options.customAttribution,...l]:l.unshift(this.options.customAttribution));const b=l.join(" | ");b!==this._attribHTML&&(this._attribHTML=b,l.length?(this._innerContainer.innerHTML=b,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class gs{constructor(){o.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(l){this._map=l,this._container=S("div","mapboxgl-ctrl");const f=S("a","mapboxgl-ctrl-logo");return f.target="_blank",f.rel="noopener nofollow",f.href="https://www.mapbox.com/",f.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),f.setAttribute("rel","noopener nofollow"),this._container.appendChild(f),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(l){l&&l.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const l=this._map.style._sourceCaches;if(Object.entries(l).length===0)return!0;for(const f in l){const b=l[f].getSource();if(b.hasOwnProperty("mapbox_logo")&&!b.mapbox_logo)return!1}return!0}_updateCompact(){const l=this._container.children;if(l.length){const f=l[0];this._map.getCanvasContainer().offsetWidth<250?f.classList.add("mapboxgl-compact"):f.classList.remove("mapboxgl-compact")}}}class ua{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const f=++this._id;return this._queue.push({callback:l,id:f,cancelled:!1}),f}remove(l){const f=this._currentlyRunning,b=f?this._queue.concat(f):this._queue;for(const T of b)if(T.id===l)return void(T.cancelled=!0)}run(l=0){const f=this._currentlyRunning=this._queue;this._queue=[];for(const b of f)if(!b.cancelled&&(b.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function _s(_,l,f){if(_=new o.LngLat(_.lng,_.lat),l){const b=new o.LngLat(_.lng-360,_.lat),T=new o.LngLat(_.lng+360,_.lat),M=360*Math.ceil(Math.abs(_.lng-f.center.lng)/360),F=f.locationPoint(_).distSqr(l),G=l.x<0||l.y<0||l.x>f.width||l.y>f.height;f.locationPoint(b).distSqr(l)<F&&(G||Math.abs(b.lng-f.center.lng)<M)?_=b:f.locationPoint(T).distSqr(l)<F&&(G||Math.abs(T.lng-f.center.lng)<M)&&(_=T)}for(;Math.abs(_.lng-f.center.lng)>180;){const b=f.locationPoint(_);if(b.x>=0&&b.y>=0&&b.x<=f.width&&b.y<=f.height)break;_.lng>f.center.lng?_.lng-=360:_.lng+=360}return _}const da={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class pa extends o.Evented{constructor(l,f){if(super(),(l instanceof o.window.HTMLElement||f)&&(l=o.extend({element:l},f)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=l&&l.occludedOpacity||.2,l&&l.element)this._element=l.element,this._offset=o.pointGeometry.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=S("div");const T=41,M=27,F=N("svg",{display:"block",height:T*this._scale+"px",width:M*this._scale+"px",viewBox:`0 0 ${M} ${T}`},this._element),G=N("radialGradient",{id:"shadowGradient"},N("defs",{},F));N("stop",{offset:"10%","stop-opacity":.4},G),N("stop",{offset:"100%","stop-opacity":.05},G),N("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},F),N("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},F),N("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},F),N("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},F),this._offset=o.pointGeometry.convert(l&&l.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",T=>{T.preventDefault()}),this._element.addEventListener("mousedown",T=>{T.preventDefault()});const b=this._element.classList;for(const T in da)b.remove(`mapboxgl-marker-anchor-${T}`);b.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(l){return l===this._map||(this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._updateMoving),l.on("moveend",this._update),l.on("remove",this._clearFadeTimer),l._addMarker(this),this.setDraggable(this._draggable),this._update(),l.on("click",this._onMapClick)),this}remove(){const l=this._map;return l&&(l.off("click",this._onMapClick),l.off("move",this._updateMoving),l.off("moveend",this._update),l.off("mousedown",this._addDragHandler),l.off("touchstart",this._addDragHandler),l.off("mouseup",this._onUp),l.off("touchend",this._onUp),l.off("mousemove",this._onMove),l.off("touchmove",this._onMove),l.off("remove",this._clearFadeTimer),l._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=o.LngLat.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const T=Math.sqrt(Math.pow(13.5,2)/2);l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[T,-1*(38.1-13.5+T)],"bottom-right":[-T,-1*(38.1-13.5+T)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,l._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(l){const f=l.code,b=l.charCode||l.keyCode;f!=="Space"&&f!=="Enter"&&b!==32&&b!==13||this.togglePopup()}_onMapClick(l){const f=l.originalEvent.target,b=this._element;this._popup&&(f===b||b.contains(f))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?(l.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(l.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const l=this._map,f=this._pos;if(!l||!f)return!1;const b=l.unproject(f),T=l.getFreeCameraOptions();if(!T.position)return!1;const M=T.position.toLngLat();return M.distanceTo(b)<.9*M.distanceTo(this._lngLat)}_evaluateOpacity(){const l=this._map;if(!l)return;const f=this._pos;if(!f||f.x<0||f.x>l.transform.width||f.y<0||f.y>l.transform.height)return void this._clearFadeTimer();const b=l.unproject(f);let T;l._showingGlobe()&&o.isLngLatBehindGlobe(l.transform,this._lngLat)?T=0:(T=1-l._queryFogOpacity(b),l.transform._terrainEnabled()&&l.getTerrain()&&this._behindTerrain()&&(T*=this._occludedOpacity)),this._element.style.opacity=`${T}`,this._element.style.pointerEvents=T>0?"auto":"none",this._popup&&this._popup._setOpacity(T),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const l=this._pos;if(!l||!this._map)return;const f=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${l.x}px,${l.y}px)
            ${da[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${f.x}px,${f.y}px)
        `}_calculateXYTransform(){const l=this._pos,f=this._map,b=this.getPitchAlignment();if(!f||!l||b!=="map")return"";if(!f._showingGlobe()){const H=f.getPitch();return H?`rotateX(${H}deg)`:""}const T=o.radToDeg(o.globeTiltAtLngLat(f.transform,this._lngLat)),M=l.sub(o.globeCenterToScreenPoint(f.transform)),F=Math.abs(M.x)+Math.abs(M.y);if(F===0)return"";const G=T/F;return`rotateX(${-M.y*G}deg) rotateY(${M.x*G}deg)`}_calculateZTransform(){const l=this._pos,f=this._map;if(!f||!l)return"";let b=0;const T=this.getRotationAlignment();if(T==="map")if(f._showingGlobe()){const M=f.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),F=f.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(M);b=o.radToDeg(Math.atan2(F.y,F.x))-90}else b=-f.getBearing();else if(T==="horizon"){const M=o.smoothstep(4,6,f.getZoom()),F=o.globeCenterToScreenPoint(f.transform);F.y+=M*f.transform.height;const G=l.sub(F),H=o.radToDeg(Math.atan2(G.y,G.x));b=(H>90?H-270:H+90)*(1-M)}return b+=this._rotation,b?`rotateZ(${b}deg)`:""}_update(l){o.window.cancelAnimationFrame(this._updateFrameId);const f=this._map;f&&(f.transform.renderWorldCopies&&(this._lngLat=_s(this._lngLat,this._pos,f.transform)),this._pos=f.project(this._lngLat),l===!0?this._updateFrameId=o.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),f._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(f._showingGlobe()||f.getTerrain()||f.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(l){return this._offset=o.pointGeometry.convert(l),this._update(),this}_onMove(l){const f=this._map;if(!f)return;const b=this._pointerdownPos,T=this._positionDelta;if(b&&T){if(!this._isDragging){const M=this._clickTolerance||f._clickTolerance;if(l.point.dist(b)<M)return;this._isDragging=!0}this._pos=l.point.sub(T),this._lngLat=f.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const l=this._map;l&&(l.off("mousemove",this._onMove),l.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"}_addDragHandler(l){const f=this._map,b=this._pos;f&&b&&this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(b),this._pointerdownPos=l.point,this._state="pending",f.on("mousemove",this._onMove),f.on("touchmove",this._onMove),f.once("mouseup",this._onUp),f.once("touchend",this._onUp))}setDraggable(l){this._draggable=!!l;const f=this._map;return f&&(l?(f.on("mousedown",this._addDragHandler),f.on("touchstart",this._addDragHandler)):(f.off("mousedown",this._addDragHandler),f.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(l){return this._occludedOpacity=l||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const nu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},iu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Rl(_=new o.pointGeometry(0,0),l="bottom"){if(typeof _=="number"){const f=Math.round(Math.sqrt(.5*Math.pow(_,2)));switch(l){case"top":return new o.pointGeometry(0,_);case"top-left":return new o.pointGeometry(f,f);case"top-right":return new o.pointGeometry(-f,f);case"bottom":return new o.pointGeometry(0,-_);case"bottom-left":return new o.pointGeometry(f,-f);case"bottom-right":return new o.pointGeometry(-f,-f);case"left":return new o.pointGeometry(_,0);case"right":return new o.pointGeometry(-_,0)}return new o.pointGeometry(0,0)}return _ instanceof o.pointGeometry||Array.isArray(_)?o.pointGeometry.convert(_):o.pointGeometry.convert(_[l]||[0,0])}class ru{constructor(l){this.jumpTo(l)}getValue(l){if(l<=this._startTime)return this._start;if(l>=this._endTime)return this._end;const f=o.easeCubicInOut((l-this._startTime)/(this._endTime-this._startTime));return this._start*(1-f)+this._end*f}isEasing(l){return l>=this._startTime&&l<=this._endTime}jumpTo(l){this._startTime=-1/0,this._endTime=-1/0,this._start=l,this._end=l}easeTo(l,f,b){this._start=this.getValue(f),this._end=l,this._startTime=f,this._endTime=f+b}}const ou={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},$l={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function fa(_){_.parentNode&&_.parentNode.removeChild(_)}const su={showCompass:!0,showZoom:!0,visualizePitch:!1};class au{constructor(l,f,b=!1){this._clickTolerance=10,this.element=f,this.mouseRotate=new wl({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,b&&(this.mousePitch=new oo({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),f.addEventListener("mousedown",this.mousedown),f.addEventListener("touchstart",this.touchstart,{passive:!1}),f.addEventListener("touchmove",this.touchmove),f.addEventListener("touchend",this.touchend),f.addEventListener("touchcancel",this.reset)}down(l,f){this.mouseRotate.mousedown(l,f),this.mousePitch&&this.mousePitch.mousedown(l,f),V()}move(l,f){const b=this.map,T=this.mouseRotate.mousemoveWindow(l,f),M=T&&T.bearingDelta;if(M&&b.setBearing(b.getBearing()+M),this.mousePitch){const F=this.mousePitch.mousemoveWindow(l,f),G=F&&F.pitchDelta;G&&b.setPitch(b.getPitch()+G)}}off(){const l=this.element;l.removeEventListener("mousedown",this.mousedown),l.removeEventListener("touchstart",this.touchstart,{passive:!1}),l.removeEventListener("touchmove",this.touchmove),l.removeEventListener("touchend",this.touchend),l.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){z(),o.window.removeEventListener("mousemove",this.mousemove),o.window.removeEventListener("mouseup",this.mouseup)}mousedown(l){this.down(o.extend({},l,{ctrlKey:!0,preventDefault:()=>l.preventDefault()}),Z(this.element,l)),o.window.addEventListener("mousemove",this.mousemove),o.window.addEventListener("mouseup",this.mouseup)}mousemove(l){this.move(l,Z(this.element,l))}mouseup(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()}touchstart(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=re(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>l.preventDefault()},this._startPos))}touchmove(l){l.targetTouches.length!==1?this.reset():(this._lastPos=re(this.element,l.targetTouches)[0],this.move({preventDefault:()=>l.preventDefault()},this._lastPos))}touchend(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const lu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Nl={maxWidth:100,unit:"metric"};function cu(_,l,f){const b=ha(l),T=b/l,M={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[f];this._map._requestDomTask(()=>{this._container.style.width=_*T+"px",this._container.innerHTML=`${b}&nbsp;${M}`})}function ha(_){const l=Math.pow(10,`${Math.floor(_)}`.length-1);let f=_/l;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:f>=1?1:function(b){const T=Math.pow(10,Math.ceil(-Math.log(b)/Math.LN10));return Math.round(b*T)/T}(f),l*f}const vs={version:o.version,supported:x,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:class extends tu{constructor(_){if(o.LivePerformanceUtils.mark(o.PerformanceMarkers.create),(_=o.extend({},$l,_)).minZoom!=null&&_.maxZoom!=null&&_.minZoom>_.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(_.minPitch!=null&&_.maxPitch!=null&&_.minPitch>_.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(_.minPitch!=null&&_.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(_.maxPitch!=null&&_.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(_.antialias&&o.isSafariWithAntialiasingBug(o.window)&&(_.antialias=!1,o.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Gi(_.minZoom,_.maxZoom,_.minPitch,_.maxPitch,_.renderWorldCopies),_),this._interactive=_.interactive,this._minTileCacheSize=_.minTileCacheSize,this._maxTileCacheSize=_.maxTileCacheSize,this._failIfMajorPerformanceCaveat=_.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=_.preserveDrawingBuffer,this._antialias=_.antialias,this._trackResize=_.trackResize,this._bearingSnap=_.bearingSnap,this._refreshExpiredTiles=_.refreshExpiredTiles,this._fadeDuration=_.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=_.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=_.collectResourceTiming,this._optimizeForTerrain=_.optimizeForTerrain,this._language=this._parseLanguage(_.language),this._worldview=_.worldview,this._renderTaskQueue=new ua,this._domRenderTaskQueue=new ua,this._controls=[],this._markers=[],this._popups=[],this._mapId=o.uniqueId(),this._locale=o.extend({},ou,_.locale),this._clickTolerance=_.clickTolerance,this._cooperativeGestures=_.cooperativeGestures,this._performanceMetricsCollection=_.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new ru(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new o.RequestManager(_.transformRequest,_.accessToken,_.testMode),this._silenceAuthErrors=!!_.testMode,typeof _.container=="string"){if(this._container=o.window.document.getElementById(_.container),!this._container)throw new Error(`Container '${_.container}' not found.`)}else{if(!(_.container instanceof o.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=_.container}if(this._container.childNodes.length>0&&o.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),_.maxBounds&&this.setMaxBounds(_.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1),o.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new eu(this,_),this._localFontFamily=_.localFontFamily,this._localIdeographFontFamily=_.localIdeographFontFamily,_.style&&this.setStyle(_.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),_.projection&&this.setProjection(_.projection),this._hash=_.hash&&new zc(typeof _.hash=="string"&&_.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch}),_.bounds&&(this.resize(),this.fitBounds(_.bounds,o.extend({},_.fitBoundsOptions,{duration:0})))),this.resize(),_.attributionControl&&this.addControl(new kl({customAttribution:_.customAttribution})),this._logoControl=new gs,this.addControl(this._logoControl,_.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",l=>{this._update(l.dataType==="style"),this.fire(new o.Event(`${l.dataType}data`,l))}),this.on("dataloading",l=>{this.fire(new o.Event(`${l.dataType}dataloading`,l))})}_getMapId(){return this._mapId}addControl(_,l){if(l===void 0&&(l=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const f=_.onAdd(this);this._controls.push(_);const b=this._controlPositions[l];return l.indexOf("bottom")!==-1?b.insertBefore(f,b.firstChild):b.appendChild(f),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(_);return l>-1&&this._controls.splice(l,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(_){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const l=!this._moving;return l&&this.fire(new o.Event("movestart",_)).fire(new o.Event("move",_)),this.fire(new o.Event("resize",_)),l&&this.fire(new o.Event("moveend",_)),this}getBounds(){return this.transform.projection.name==="globe"&&o.warnOnce('Globe projection does not support getBounds API, this API may behave unexpectedly when viewing the poles."'),this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(_){return this.transform.setMaxBounds(o.LngLatBounds.convert(_)),this._update()}setMinZoom(_){if((_=_==null?-2:_)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_?this.setZoom(_):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_==null?22:_)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_?this.setZoom(_):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_==null?0:_)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_?this.setPitch(_):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_==null?85:_)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_?this.setPitch(_):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(_){return _==="auto"?o.window.navigator.language:Array.isArray(_)?_.length===0?void 0:_.map(l=>l==="auto"?o.window.navigator.language:l):_}setLanguage(_){const l=this._parseLanguage(_);if(!this.style||l===this._language)return this;this._language=l,this.style._reloadSources();for(const f of this._controls)f._setLanguage&&f._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(_){return this.style&&_!==this._worldview?(this._worldview=_,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(_){return this._lazyInitEmptyStyle(),_?typeof _=="string"&&(_={name:_}):_=null,this._useExplicitProjection=!!_,this._prioritizeAndUpdateProjection(_,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const _=this.transform,l=_.projection.name;let f;l==="globe"&&_.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?(_.setMercatorFromTransition(),f=!0):l==="mercator"&&_.zoom<o.GLOBE_ZOOM_THRESHOLD_MAX&&(_.setProjection({name:"globe"}),f=!0),f&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(_,l){return this._updateProjection(_||l||{name:"mercator"})}_updateProjection(_){let l;if(l=_.name==="globe"&&this.transform.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(_),this.style.applyProjectionUpdate(),l){this.painter.clearBackgroundTiles();for(const f in this.style._sourceCaches)this.style._sourceCaches[f].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(_){return this.transform.locationPoint3D(o.LngLat.convert(_))}unproject(_){return this.transform.pointLocation3D(o.pointGeometry.convert(_))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_createDelegatedListener(_,l,f){if(_==="mouseenter"||_==="mouseover"){let b=!1;const T=F=>{const G=l.filter(Y=>this.getLayer(Y)),H=G.length?this.queryRenderedFeatures(F.point,{layers:G}):[];H.length?b||(b=!0,f.call(this,new Hi(_,this,F.originalEvent,{features:H}))):b=!1},M=()=>{b=!1};return{layers:new Set(l),listener:f,delegates:{mousemove:T,mouseout:M}}}if(_==="mouseleave"||_==="mouseout"){let b=!1;const T=F=>{const G=l.filter(H=>this.getLayer(H));(G.length?this.queryRenderedFeatures(F.point,{layers:G}):[]).length?b=!0:b&&(b=!1,f.call(this,new Hi(_,this,F.originalEvent)))},M=F=>{b&&(b=!1,f.call(this,new Hi(_,this,F.originalEvent)))};return{layers:new Set(l),listener:f,delegates:{mousemove:T,mouseout:M}}}{const b=T=>{const M=l.filter(G=>this.getLayer(G)),F=M.length?this.queryRenderedFeatures(T.point,{layers:M}):[];F.length&&(T.features=F,f.call(this,T),delete T.features)};return{layers:new Set(l),listener:f,delegates:{[_]:b}}}}on(_,l,f){if(f===void 0)return super.on(_,l);Array.isArray(l)||(l=[l]);const b=this._createDelegatedListener(_,l,f);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(b);for(const T in b.delegates)this.on(T,b.delegates[T]);return this}once(_,l,f){if(f===void 0)return super.once(_,l);Array.isArray(l)||(l=[l]);const b=this._createDelegatedListener(_,l,f);for(const T in b.delegates)this.once(T,b.delegates[T]);return this}off(_,l,f){if(f===void 0)return super.off(_,l);l=new Set(Array.isArray(l)?l:[l]);const b=(M,F)=>{if(M.size!==F.size)return!1;for(const G of M)if(!F.has(G))return!1;return!0},T=this._delegatedListeners?this._delegatedListeners[_]:void 0;return T&&(M=>{for(let F=0;F<M.length;F++){const G=M[F];if(G.listener===f&&b(G.layers,l)){for(const H in G.delegates)this.off(H,G.delegates[H]);return M.splice(F,1),this}}})(T),this}queryRenderedFeatures(_,l){return this.style?(l!==void 0||_===void 0||_ instanceof o.pointGeometry||Array.isArray(_)||(l=_,_=void 0),this.style.queryRenderedFeatures(_=_||[[0,0],[this.transform.width,this.transform.height]],l=l||{},this.transform)):[]}querySourceFeatures(_,l){return this.style.querySourceFeatures(_,l)}setStyle(_,l){return(l=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&l.localFontFamily===this._localFontFamily&&this.style&&_?(this._diffStyle(_,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._localFontFamily=l.localFontFamily,this._updateStyle(_,l))}_getUIString(_){const l=this._locale[_];if(l==null)throw new Error(`Missing UI string '${_}'`);return l}_updateStyle(_,l){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),_&&(this.style=new lr(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_):this.style.loadJSON(_)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new lr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,l){if(typeof _=="string"){const f=this._requestManager.normalizeStyleURL(_),b=this._requestManager.transformRequest(f,o.ResourceType.Style);o.getJSON(b,(T,M)=>{T?this.fire(new o.ErrorEvent(T)):M&&this._updateDiff(M,l)})}else typeof _=="object"&&this._updateDiff(_,l)}_updateDiff(_,l){try{this.style.setState(_)&&this._update(!0)}catch(f){o.warnOnce(`Unable to perform style diff: ${f.message||f.error||f}.  Rebuilding the style from scratch.`),this._updateStyle(_,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(o.warnOnce("There is no style added to the map."),!1)}addSource(_,l){return this._lazyInitEmptyStyle(),this.style.addSource(_,l),this._update(!0)}isSourceLoaded(_){return!!this.style&&this.style._isSourceCacheLoaded(_)}areTilesLoaded(){const _=this.style&&this.style._sourceCaches;for(const l in _){const f=_[l]._tiles;for(const b in f){const T=f[b];if(T.state!=="loaded"&&T.state!=="errored")return!1}}return!0}addSourceType(_,l,f){this._lazyInitEmptyStyle(),this.style.addSourceType(_,l,f)}removeSource(_){return this.style.removeSource(_),this._updateTerrain(),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,l,{pixelRatio:f=1,sdf:b=!1,stretchX:T,stretchY:M,content:F}={}){if(this._lazyInitEmptyStyle(),l instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&l instanceof o.window.ImageBitmap){const{width:G,height:H,data:Y}=o.exported.getImageData(l);this.style.addImage(_,{data:new o.RGBAImage({width:G,height:H},Y),pixelRatio:f,stretchX:T,stretchY:M,content:F,sdf:b,version:0})}else if(l.width===void 0||l.height===void 0)this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:G,height:H}=l,Y=l;this.style.addImage(_,{data:new o.RGBAImage({width:G,height:H},new Uint8Array(Y.data)),pixelRatio:f,stretchX:T,stretchY:M,content:F,sdf:b,version:0,userImage:Y}),Y.onAdd&&Y.onAdd(this,_)}}updateImage(_,l){const f=this.style.getImage(_);if(!f)return void this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const b=l instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&l instanceof o.window.ImageBitmap?o.exported.getImageData(l):l,{width:T,height:M}=b;T!==void 0&&M!==void 0?T===f.data.width&&M===f.data.height?(f.data.replace(b.data,!(l instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&l instanceof o.window.ImageBitmap)),this.style.updateImage(_,f)):this.fire(new o.ErrorEvent(new Error(`The width and height of the updated image (${T}, ${M})
                must be that same as the previous version of the image
                (${f.data.width}, ${f.data.height})`))):this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_,l){o.getImage(this._requestManager.transformRequest(_,o.ResourceType.Image),(f,b)=>{l(f,b instanceof o.window.HTMLImageElement?o.exported.getImageData(b):b)})}listImages(){return this.style.listImages()}addLayer(_,l){return this._lazyInitEmptyStyle(),this.style.addLayer(_,l),this._update(!0)}moveLayer(_,l){return this.style.moveLayer(_,l),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}setLayerZoomRange(_,l,f){return this.style.setLayerZoomRange(_,l,f),this._update(!0)}setFilter(_,l,f={}){return this.style.setFilter(_,l,f),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,l,f,b={}){return this.style.setPaintProperty(_,l,f,b),this._update(!0)}getPaintProperty(_,l){return this.style.getPaintProperty(_,l)}setLayoutProperty(_,l,f,b={}){return this.style.setLayoutProperty(_,l,f,b),this._update(!0)}getLayoutProperty(_,l){return this.style.getLayoutProperty(_,l)}setLight(_,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,l),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(_){return this._lazyInitEmptyStyle(),!_&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(_),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(_){return this._lazyInitEmptyStyle(),this.style.setFog(_),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(_){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(o.LngLat.convert(_),this.transform):0}setFeatureState(_,l){return this.style.setFeatureState(_,l),this._update()}removeFeatureState(_,l){return this.style.removeFeatureState(_,l),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}_updateContainerDimensions(){if(!this._container)return;const _=this._container.getBoundingClientRect().width||400,l=this._container.getBoundingClientRect().height||300;let f,b,T,M=this._container;for(;M&&(!b||!T);){const F=o.window.getComputedStyle(M).transform;F&&F!=="none"&&(f=F.match(/matrix.*\((.+)\)/)[1].split(", "),f[0]&&f[0]!=="0"&&f[0]!=="1"&&(b=f[0]),f[3]&&f[3]!=="0"&&f[3]!=="1"&&(T=f[3])),M=M.parentElement}this._containerWidth=b?Math.abs(_/b):_,this._containerHeight=T?Math.abs(l/T):l}_detectMissingCSS(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const _=this._container;_.classList.add("mapboxgl-map"),(this._missingCSSCanary=S("div","mapboxgl-canary",_)).style.visibility="hidden",this._detectMissingCSS();const l=this._canvasContainer=S("div","mapboxgl-canvas-container",_);this._interactive&&l.classList.add("mapboxgl-interactive"),this._canvas=S("canvas","mapboxgl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const f=this._controlContainer=S("div","mapboxgl-control-container",_),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(T=>{b[T]=S("div",`mapboxgl-ctrl-${T}`,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,l){const f=o.exported.devicePixelRatio||1;this._canvas.width=f*Math.ceil(_),this._canvas.height=f*Math.ceil(l),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${l}px`}_addMarker(_){this._markers.push(_)}_removeMarker(_){const l=this._markers.indexOf(_);l!==-1&&this._markers.splice(l,1)}_addPopup(_){this._popups.push(_)}_removePopup(_){const l=this._popups.indexOf(_);l!==-1&&this._popups.splice(l,1)}_setupPainter(){const _=o.extend({},x.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),l=this._canvas.getContext("webgl",_)||this._canvas.getContext("experimental-webgl",_);l?(o.storeAuthState(l,!0),this.painter=new od(l,this.transform),this.on("data",f=>{f.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),o.exported$1.testSupport(l)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(_){_.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:_}))}_contextRestored(_){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:_}))}_onMapScroll(_){if(_.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_requestDomTask(_){!this.loaded()||this.loaded()&&!this.isMoving()?_():this._domRenderTaskQueue.add(_)}_render(_){let l;const f=this.painter.context.extTimerQuery,b=o.exported.now();if(this.listens("gpu-timing-frame")&&(l=f.createQueryEXT(),f.beginQueryEXT(f.TIME_ELAPSED_EXT,l)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],o.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],o.window.performance.now())),this._renderTaskQueue.run(_),this._domRenderTaskQueue.run(_),this._removed)return;this._updateProjectionTransition();let T=!1;const M=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const H=this.transform.zoom,Y=this.transform.pitch,X=o.exported.now();this.style.zoomHistory.update(H,X);const te=new o.EvaluationParameters(H,{now:X,fadeDuration:M,pitch:Y,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),le=te.crossFadingFactor();le===1&&le===this._crossFadingFactor||(T=!0,this._crossFadingFactor=le),this.style.update(te)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let F=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),F=this._updateAverageElevation(b),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):F=this._updateAverageElevation(b),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,M,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:M,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&(this.style.hasTransitions()||T)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),l){const H=o.exported.now()-b;f.endQueryEXT(f.TIME_ELAPSED_EXT,l),setTimeout(()=>{const Y=f.getQueryObjectEXT(l,f.QUERY_RESULT_EXT)/1e6;f.deleteQueryEXT(l),this.fire(new o.Event("gpu-timing-frame",{cpuTime:H,gpuTime:Y})),o.window.performance.mark("frame-gpu",{startTime:b,detail:{gpuTime:Y}})},50)}if(this.listens("gpu-timing-layer")){const H=this.painter.collectGpuTimers();setTimeout(()=>{const Y=this.painter.queryGpuTimers(H);this.fire(new o.Event("gpu-timing-layer",{layerTimes:Y}))},50)}if(this.listens("gpu-timing-deferred-render")){const H=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const Y=this.painter.queryGpuTimeDeferredRender(H);this.fire(new o.Event("gpu-timing-deferred-render",{gpuTime:Y}))},50)}const G=this._sourcesDirty||this._styleDirty||this._placementDirty||F;if(G||this._repaint)this.triggerRepaint();else{const H=!this.isMoving()&&this.loaded();if(H&&(F=this._updateAverageElevation(b,!0)),F)this.triggerRepaint();else if(this._triggerFrame(!1),H&&(this.fire(new o.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const Y=this._calculateSpeedIndex();this.fire(new o.Event("speedindexcompleted",{speedIndex:Y})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||G||(this._fullyLoaded=!0,o.LivePerformanceUtils.mark(o.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&o.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.painter.transform.projection,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(_){for(const l of this._markers)_&&!this.getRenderWorldCopies()&&(l._lngLat=l._lngLat.wrap()),l._update();for(const l of this._popups)!_||this.getRenderWorldCopies()||l._trackPointer||(l._lngLat=l._lngLat.wrap()),l._update()}_updateAverageElevation(_,l=!1){const f=b=>(this.transform.averageElevation=b,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&f(0);if((l||_-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(_)){const b=this.transform.averageElevation;let T=this.transform.sampleAverageElevation(),M=!1;this.transform.elevation&&(M=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(T)?T=0:this._averageElevationLastSampledAt=_;const F=Math.abs(b-T);if(F>1){if(this._isInitialLoad||M)return this._averageElevation.jumpTo(T),f(T);this._averageElevation.easeTo(T,_,300)}else if(F>1e-4)return this._averageElevation.jumpTo(T),f(T)}return!!this._averageElevation.isEasing(_)&&f(this._averageElevation.getValue(_))}_authenticate(){o.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,_=>{if(_&&(_.message===o.AUTH_ERR_MSG||_.status===401)){const l=this.painter.context.gl;o.storeAuthState(l,!1),this._logoControl instanceof gs&&this._logoControl._updateLogo(),l&&l.clear(l.DEPTH_BUFFER_BIT|l.COLOR_BUFFER_BIT|l.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new o.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),o.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const _=this.painter.canvasCopy(),l=this.painter.getCanvasCopiesAndTimestamps();l.timeStamps.push(performance.now());const f=this.painter.context.gl,b=f.createFramebuffer();function T(M){f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,M,0);const F=new Uint8Array(f.drawingBufferWidth*f.drawingBufferHeight*4);return f.readPixels(0,0,f.drawingBufferWidth,f.drawingBufferHeight,f.RGBA,f.UNSIGNED_BYTE,F),F}return f.bindFramebuffer(f.FRAMEBUFFER,b),this._canvasPixelComparison(T(_),l.canvasCopies.map(T),l.timeStamps)}_canvasPixelComparison(_,l,f){let b=f[1]-f[0];const T=_.length/4;for(let M=0;M<l.length;M++){const F=l[M];let G=0;for(let H=0;H<F.length;H+=4)F[H]===_[H]&&F[H+1]===_[H+1]&&F[H+2]===_[H+2]&&F[H+3]===_[H+3]&&(G+=1);b+=(f[M+2]-f[M+1])*(1-G/T)}return b}remove(){this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1),o.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const _=this.painter.context.gl.getExtension("WEBGL_lose_context");_&&_.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),fa(this._canvasContainer),fa(this._controlContainer),fa(this._missingCSSCanary),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),o.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new o.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(_){this._renderNextFrame=this._renderNextFrame||_,this.style&&!this._frame&&(this._frame=o.exported.frame(l=>{const f=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,f&&this._render(l)}))}_preloadTiles(_){const l=this.style?Object.values(this.style._sourceCaches):[];return o.asyncAll(l,(f,b)=>f._preloadTiles(_,b),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(_){this._trackResize&&this.resize({originalEvent:_})._update()}_onVisibilityChange(){o.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(_){this._showTerrainWireframe!==_&&(this._showTerrainWireframe=_,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(_){this._speedIndexTiming!==_&&(this._speedIndexTiming=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(_){this._showTileAABBs!==_&&(this._showTileAABBs=_,_&&this._update())}_setCacheLimits(_,l){o.setCacheLimits(_,l)}get version(){return o.version}},NavigationControl:class{constructor(_){this.options=o.extend({},su,_),this._container=S("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",l=>{this._map&&this._map.zoomIn({},{originalEvent:l})}),S("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",l=>{this._map&&this._map.zoomOut({},{originalEvent:l})}),S("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",l=>{const f=this._map;f&&(this.options.visualizePitch?f.resetNorthPitch({},{originalEvent:l}):f.resetNorth({},{originalEvent:l}))}),this._compassIcon=S("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const _=this._map;if(!_)return;const l=_.getZoom(),f=l===_.getMaxZoom(),b=l===_.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=b,this._zoomInButton.setAttribute("aria-disabled",f.toString()),this._zoomOutButton.setAttribute("aria-disabled",b.toString())}_rotateCompassArrow(){const _=this._map;if(!_)return;const l=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(_.transform.pitch*(Math.PI/180)),.5)}) rotateX(${_.transform.pitch}deg) rotateZ(${_.transform.angle*(180/Math.PI)}deg)`:`rotate(${_.transform.angle*(180/Math.PI)}deg)`;_._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=l)})}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),_.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&_.on("pitch",this._rotateCompassArrow),_.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new au(_,this._compass,this.options.visualizePitch)),this._container}onRemove(){const _=this._map;_&&(this._container.remove(),this.options.showZoom&&_.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&_.off("pitch",this._rotateCompassArrow),_.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(_,l){const f=S("button",_,this._container);return f.type="button",f.addEventListener("click",l),f}_setButtonTitle(_,l){if(!this._map)return;const f=this._map._getUIString(`NavigationControl.${l}`);_.setAttribute("aria-label",f),_.firstElementChild&&_.firstElementChild.setAttribute("title",f)}},GeolocateControl:class extends o.Evented{constructor(_){super(),this.options=o.extend({geolocation:o.window.navigator.geolocation},lu,_),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=vl(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(_){return this._map=_,this._container=S("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(_){const l=(f=!!this.options.geolocation)=>{this._supportsGeolocation=f,_(f)};this._supportsGeolocation!==void 0?_(this._supportsGeolocation):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(f=>l(f.state!=="denied")).catch(()=>l()):l()}_isOutOfMapMaxBounds(_){const l=this._map.getMaxBounds(),f=_.coords;return!!l&&(f.longitude<l.getWest()||f.longitude>l.getEast()||f.latitude<l.getSouth()||f.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(_){if(this._map){if(this._isOutOfMapMaxBounds(_))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",_)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=_,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(_),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(_),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",_)),this._finish()}}_updateCamera(_){const l=new o.LngLat(_.coords.longitude,_.coords.latitude),f=_.coords.accuracy,b=this._map.getBearing(),T=o.extend({bearing:b},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(f),T,{geolocateSource:!0})}_updateMarker(_){if(_){const l=new o.LngLat(_.coords.longitude,_.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=_.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const _=this._map.transform,l=o.mercatorZfromAltitude(1,_._center.lat)*_.worldSize,f=Math.ceil(2*this._accuracy*l);this._circleElement.style.width=`${f}px`,this._circleElement.style.height=`${f}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(_){if(this._map){if(this.options.trackUserLocation)if(_.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(_.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",_)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(_){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=S("button","mapboxgl-ctrl-geolocate",this._container),S("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",_===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=S("div","mapboxgl-user-location"),this._dotElement.appendChild(S("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(S("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new pa({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=S("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new pa({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new o.Event("trackuserlocationend")))})}_onDeviceOrientation(_){this._userLocationDotMarker&&(_.webkitCompassHeading?this._heading=_.webkitCompassHeading:_.absolute===!0&&(this._heading=-1*_.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(_={maximumAge:6e5,timeout:0},this._noTimeout=!0):(_=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,_),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const _=()=>{o.window.addEventListener("ondeviceorientationabsolute"in o.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};o.window.DeviceMotionEvent!==void 0&&typeof o.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(l=>{l==="granted"&&_()}).catch(console.error):_()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),o.window.removeEventListener("deviceorientation",this._onDeviceOrientation),o.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:kl,ScaleControl:class{constructor(_){this.options=o.extend({},Nl,_),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch{return!1}}()||(this._setScale=cu.bind(this)),o.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const _=this.options.maxWidth||100,l=this._map,f=l._containerHeight/2,b=l._containerWidth/2-_/2,T=l.unproject([b,f]),M=l.unproject([b+_,f]),F=T.distanceTo(M);if(this.options.unit==="imperial"){const G=3.2808*F;G>5280?this._setScale(_,G/5280,"mile"):this._setScale(_,G,"foot")}else this.options.unit==="nautical"?this._setScale(_,F/1852,"nautical-mile"):F>=1e3?this._setScale(_,F/1e3,"kilometer"):this._setScale(_,F,"meter")}_setScale(_,l,f){const b=ha(l),T=b/l;this._map._requestDomTask(()=>{this._container.style.width=_*T+"px",this._container.innerHTML=f!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:f}).format(b):`${b}&nbsp;nm`})}onAdd(_){return this._map=_,this._language=_.getLanguage(),this._container=S("div","mapboxgl-ctrl mapboxgl-ctrl-scale",_.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(_){this._language=_,this._update()}setUnit(_){this.options.unit=_,this._update()}},FullscreenControl:class{constructor(_){this._fullscreen=!1,_&&_.container&&(_.container instanceof o.window.HTMLElement?this._container=_.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in o.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=S("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!o.window.document.fullscreenEnabled&&!o.window.document.webkitFullscreenEnabled)}_setupUI(){const _=this._fullscreenButton=S("button","mapboxgl-ctrl-fullscreen",this._controlContainer);S("span","mapboxgl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",_)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(o.window.document.fullscreenElement||o.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends o.Evented{constructor(_){super(),this.options=o.extend(Object.create(nu),_),o.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(_&&_.className?_.className.trim().split(/\s+/):[])}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&_.on("preclick",this._onClose),this.options.closeOnMove&&_.on("move",this._onClose),_.on("remove",this.remove),this._update(),_._addPopup(this),this._focusFirstElement(),this._trackPointer?(_.on("mousemove",this._onMouseEvent),_.on("mouseup",this._onMouseEvent),_._canvasContainer.classList.add("mapboxgl-track-pointer")):_.on("move",this._update),this.fire(new o.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const _=this._map;return _&&(_.off("move",this._update),_.off("move",this._onClose),_.off("preclick",this._onClose),_.off("click",this._onClose),_.off("remove",this.remove),_.off("mousemove",this._onMouseEvent),_.off("mouseup",this._onMouseEvent),_.off("drag",this._onMouseEvent),_._canvasContainer&&_._canvasContainer.classList.remove("mapboxgl-track-pointer"),_._removePopup(this),this._map=void 0),this.fire(new o.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(_){this._lngLat=o.LngLat.convert(_),this._pos=null,this._trackPointer=!1,this._update();const l=this._map;return l&&(l.on("move",this._update),l.off("mousemove",this._onMouseEvent),l._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const _=this._map;return _&&(_.off("move",this._update),_.on("mousemove",this._onMouseEvent),_.on("drag",this._onMouseEvent),_._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(o.window.document.createTextNode(_))}setHTML(_){const l=o.window.document.createDocumentFragment(),f=o.window.document.createElement("body");let b;for(f.innerHTML=_;b=f.firstChild,b;)l.appendChild(b);return this.setDOMContent(l)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){let l=this._content;if(l)for(;l.hasChildNodes();)l.firstChild&&l.removeChild(l.firstChild);else l=this._content=S("div","mapboxgl-popup-content",this._container||void 0);if(l.appendChild(_),this.options.closeButton){const f=this._closeButton=S("button","mapboxgl-popup-close-button",l);f.type="button",f.setAttribute("aria-label","Close popup"),f.setAttribute("aria-hidden","true"),f.innerHTML="&#215;",f.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(_){return this._classList.add(_),this._updateClassList(),this}removeClassName(_){return this._classList.delete(_),this._updateClassList(),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){let l;return this._classList.delete(_)?l=!1:(this._classList.add(_),l=!0),this._updateClassList(),l}_onMouseEvent(_){this._update(_.point)}_getAnchor(_){if(this.options.anchor)return this.options.anchor;const l=this._map,f=this._container,b=this._pos;if(!l||!f||!b)return"bottom";const T=f.offsetWidth,M=f.offsetHeight,F=b.x<T/2,G=b.x>l.transform.width-T/2;if(b.y+_<M)return F?"top-left":G?"top-right":"top";if(b.y>l.transform.height-M){if(F)return"bottom-left";if(G)return"bottom-right"}return F?"left":G?"right":"bottom"}_updateClassList(){const _=this._container;if(!_)return;const l=[...this._classList];l.push("mapboxgl-popup"),this._anchor&&l.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&l.push("mapboxgl-popup-track-pointer"),_.className=l.join(" ")}_update(_){const l=this._map,f=this._content;if(!l||!this._lngLat&&!this._trackPointer||!f)return;let b=this._container;if(b||(b=this._container=S("div","mapboxgl-popup",l.getContainer()),this._tip=S("div","mapboxgl-popup-tip",b),b.appendChild(f)),this.options.maxWidth&&b.style.maxWidth!==this.options.maxWidth&&(b.style.maxWidth=this.options.maxWidth),l.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=_s(this._lngLat,this._pos,l.transform)),!this._trackPointer||_){const T=this._pos=this._trackPointer&&_?_:l.project(this._lngLat),M=Rl(this.options.offset),F=this._anchor=this._getAnchor(M.y),G=Rl(this.options.offset,F),H=T.add(G).round();l._requestDomTask(()=>{this._container&&F&&(this._container.style.transform=`${da[F]} translate(${H.x}px,${H.y}px)`)})}if(!this._marker&&l._showingGlobe()){const T=o.isLngLatBehindGlobe(l.transform,this._lngLat)?0:1;this._setOpacity(T)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(iu);_&&_.focus()}_onClose(){this.remove()}_setOpacity(_){this._container&&(this._container.style.opacity=`${_}`),this._content&&(this._content.style.pointerEvents=_?"auto":"none")}},Marker:pa,Style:lr,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.pointGeometry,MercatorCoordinate:o.MercatorCoordinate,FreeCameraOptions:ss,Evented:o.Evented,config:o.config,prewarm:function(){ln().acquire(en)},clearPrewarmedResources:function(){const _=Jt;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(en),Jt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(_){o.config.ACCESS_TOKEN=_},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(_){o.config.API_URL=_},get workerCount(){return Qt.workerCount},set workerCount(_){Qt.workerCount=_},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(_){o.config.MAX_PARALLEL_IMAGE_REQUESTS=_},clearStorage(_){o.clearTileCache(_)},workerUrl:"",workerClass:null,setNow:o.exported.setNow,restoreNow:o.exported.restoreNow};return vs});var g=c;return g})})(mapboxGl$2);const mapboxGl=mapboxGl$2.exports,mapboxGl$1=_mergeNamespaces({__proto__:null,default:mapboxGl},[mapboxGl$2.exports]);exports.renderApp=renderApp;exports.renderError=renderError;
//# sourceMappingURL=ssr.js.map
