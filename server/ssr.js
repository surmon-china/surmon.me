"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const require$$0$2=require("crypto"),require$$1$2=require("http"),require$$2=require("https"),require$$0$5=require("url"),require$$1$1=require("stream"),require$$4=require("assert"),require$$1=require("tty"),require$$0$4=require("util"),require$$0$3=require("os"),require$$1$3=require("zlib"),require$$1$4=require("path"),require$$1$5=require("fs"),require$$3=require("buffer"),_interopDefaultLegacy=e=>e&&typeof e=="object"&&"default"in e?e:{default:e};function _mergeNamespaces(e,t){for(var i=0;i<t.length;i++){const s=t[i];if(typeof s!="string"&&!Array.isArray(s)){for(const c in s)if(c!=="default"&&!(c in e)){const d=Object.getOwnPropertyDescriptor(s,c);d&&Object.defineProperty(e,c,d.get?d:{enumerable:!0,get:()=>s[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const require$$0__default=_interopDefaultLegacy(require$$0$2),require$$1__default$2=_interopDefaultLegacy(require$$1$2),require$$2__default=_interopDefaultLegacy(require$$2),require$$0__default$3=_interopDefaultLegacy(require$$0$5),require$$1__default$1=_interopDefaultLegacy(require$$1$1),require$$4__default=_interopDefaultLegacy(require$$4),require$$1__default=_interopDefaultLegacy(require$$1),require$$0__default$2=_interopDefaultLegacy(require$$0$4),require$$0__default$1=_interopDefaultLegacy(require$$0$3),require$$1__default$3=_interopDefaultLegacy(require$$1$3),require$$1__default$4=_interopDefaultLegacy(require$$1$4),require$$1__default$5=_interopDefaultLegacy(require$$1$5),require$$3__default=_interopDefaultLegacy(require$$3);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){var t=e.default;if(typeof t=="function"){var i=function(){return t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var c=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(i,s,c.get?c:{enumerable:!0,get:function(){return e[s]}})}),i}var randombytes=require$$0__default.default.randomBytes,randomBytes=randombytes,UID_LENGTH=16,UID=generateUID(),PLACE_HOLDER_REGEXP=new RegExp('(\\\\)?"@__(F|R|D|M|S|A|U|I|B|L)-'+UID+'-(\\d+)__@"',"g"),IS_NATIVE_CODE_REGEXP=/\{\s*\[native code\]\s*\}/g,IS_PURE_FUNCTION=/function.*?\(/,IS_ARROW_FUNCTION=/.*?=>.*?/,UNSAFE_CHARS_REGEXP=/[<>\/\u2028\u2029]/g,RESERVED_SYMBOLS=["*","async"],ESCAPED_CHARS={"<":"\\u003C",">":"\\u003E","/":"\\u002F","\u2028":"\\u2028","\u2029":"\\u2029"};function escapeUnsafeChars(e){return ESCAPED_CHARS[e]}function generateUID(){for(var e=randomBytes(UID_LENGTH),t="",i=0;i<UID_LENGTH;++i)t+=e[i].toString(16);return t}function deleteFunctions(e){var t=[];for(var i in e)typeof e[i]=="function"&&t.push(i);for(var s=0;s<t.length;s++)delete e[t[s]]}var serializeJavascript=function e(t,i){i||(i={}),(typeof i=="number"||typeof i=="string")&&(i={space:i});var s=[],c=[],d=[],g=[],r=[],y=[],E=[],w=[],k=[],S=[];function I(O,V){if(i.ignoreFunction&&deleteFunctions(V),!V&&V!==void 0)return V;var z=this[O],U=typeof z;if(U==="object"){if(z instanceof RegExp)return"@__R-"+UID+"-"+(c.push(z)-1)+"__@";if(z instanceof Date)return"@__D-"+UID+"-"+(d.push(z)-1)+"__@";if(z instanceof Map)return"@__M-"+UID+"-"+(g.push(z)-1)+"__@";if(z instanceof Set)return"@__S-"+UID+"-"+(r.push(z)-1)+"__@";if(z instanceof Array){var Z=z.filter(function(){return!0}).length!==z.length;if(Z)return"@__A-"+UID+"-"+(y.push(z)-1)+"__@"}if(z instanceof URL)return"@__L-"+UID+"-"+(S.push(z)-1)+"__@"}return U==="function"?"@__F-"+UID+"-"+(s.push(z)-1)+"__@":U==="undefined"?"@__U-"+UID+"-"+(E.push(z)-1)+"__@":U==="number"&&!isNaN(z)&&!isFinite(z)?"@__I-"+UID+"-"+(w.push(z)-1)+"__@":U==="bigint"?"@__B-"+UID+"-"+(k.push(z)-1)+"__@":V}function L(O){var V=O.toString();if(IS_NATIVE_CODE_REGEXP.test(V))throw new TypeError("Serializing native function: "+O.name);if(IS_PURE_FUNCTION.test(V)||IS_ARROW_FUNCTION.test(V))return V;var z=V.indexOf("("),U=V.substr(0,z).trim().split(" ").filter(function(W){return W.length>0}),Z=U.filter(function(W){return RESERVED_SYMBOLS.indexOf(W)===-1});return Z.length>0?(U.indexOf("async")>-1?"async ":"")+"function"+(U.join("").indexOf("*")>-1?"*":"")+V.substr(z):V}if(i.ignoreFunction&&typeof t=="function"&&(t=void 0),t===void 0)return String(t);var D;return i.isJSON&&!i.space?D=JSON.stringify(t):D=JSON.stringify(t,i.isJSON?null:I,i.space),typeof D!="string"?String(D):(i.unsafe!==!0&&(D=D.replace(UNSAFE_CHARS_REGEXP,escapeUnsafeChars)),s.length===0&&c.length===0&&d.length===0&&g.length===0&&r.length===0&&y.length===0&&E.length===0&&w.length===0&&k.length===0&&S.length===0?D:D.replace(PLACE_HOLDER_REGEXP,function(O,V,z,U){if(V)return O;if(z==="D")return'new Date("'+d[U].toISOString()+'")';if(z==="R")return"new RegExp("+e(c[U].source)+', "'+c[U].flags+'")';if(z==="M")return"new Map("+e(Array.from(g[U].entries()),i)+")";if(z==="S")return"new Set("+e(Array.from(r[U].values()),i)+")";if(z==="A")return"Array.prototype.slice.call("+e(Object.assign({length:y[U].length},y[U]),i)+")";if(z==="U")return"undefined";if(z==="I")return w[U];if(z==="B")return'BigInt("'+k[U]+'")';if(z==="L")return'new URL("'+S[U].toString()+'")';var Z=s[U];return L(Z)}))};function makeMap(e,t){const i=Object.create(null),s=e.split(",");for(let c=0;c<s.length;c++)i[s[c]]=!0;return t?c=>!!i[c.toLowerCase()]:c=>!!i[c]}const GLOBALS_WHITE_LISTED="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",isGloballyWhitelisted=makeMap(GLOBALS_WHITE_LISTED),specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs),isBooleanAttr=makeMap(specialBooleanAttrs+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected");function includeBooleanAttr(e){return!!e||e===""}const unsafeAttrCharRE=/[>/="'\u0009\u000a\u000c\u0020]/,attrValidationCache={};function isSSRSafeAttrName(e){if(attrValidationCache.hasOwnProperty(e))return attrValidationCache[e];const t=unsafeAttrCharRE.test(e);return t&&console.error(`unsafe attribute name: ${e}`),attrValidationCache[e]=!t}const propsToAttrMap={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},isNoUnitNumericStyleProp=makeMap("animation-iteration-count,border-image-outset,border-image-slice,border-image-width,box-flex,box-flex-group,box-ordinal-group,column-count,columns,flex,flex-grow,flex-positive,flex-shrink,flex-negative,flex-order,grid-row,grid-row-end,grid-row-span,grid-row-start,grid-column,grid-column-end,grid-column-span,grid-column-start,font-weight,line-clamp,line-height,opacity,order,orphans,tab-size,widows,z-index,zoom,fill-opacity,flood-opacity,stop-opacity,stroke-dasharray,stroke-dashoffset,stroke-miterlimit,stroke-opacity,stroke-width");function normalizeStyle(e){if(isArray$7(e)){const t={};for(let i=0;i<e.length;i++){const s=e[i],c=isString$2(s)?parseStringStyle(s):normalizeStyle(s);if(c)for(const d in c)t[d]=c[d]}return t}else{if(isString$2(e))return e;if(isObject$6(e))return e}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:(.+)/;function parseStringStyle(e){const t={};return e.split(listDelimiterRE).forEach(i=>{if(i){const s=i.split(propertyDelimiterRE);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function stringifyStyle(e){let t="";if(!e||isString$2(e))return t;for(const i in e){const s=e[i],c=i.startsWith("--")?i:hyphenate(i);(isString$2(s)||typeof s=="number"&&isNoUnitNumericStyleProp(c))&&(t+=`${c}:${s};`)}return t}function normalizeClass(e){let t="";if(isString$2(e))t=e;else if(isArray$7(e))for(let i=0;i<e.length;i++){const s=normalizeClass(e[i]);s&&(t+=s+" ")}else if(isObject$6(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}function normalizeProps(e){if(!e)return null;let{class:t,style:i}=e;return t&&!isString$2(t)&&(e.class=normalizeClass(t)),i&&(e.style=normalizeStyle(i)),e}const HTML_TAGS="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",SVG_TAGS="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",VOID_TAGS="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",isHTMLTag=makeMap(HTML_TAGS),isSVGTag=makeMap(SVG_TAGS),isVoidTag=makeMap(VOID_TAGS),escapeRE=/["'&<>]/;function escapeHtml(e){const t=""+e,i=escapeRE.exec(t);if(!i)return t;let s="",c,d,g=0;for(d=i.index;d<t.length;d++){switch(t.charCodeAt(d)){case 34:c="&quot;";break;case 38:c="&amp;";break;case 39:c="&#39;";break;case 60:c="&lt;";break;case 62:c="&gt;";break;default:continue}g!==d&&(s+=t.slice(g,d)),g=d+1,s+=c}return g!==d?s+t.slice(g,d):s}const commentStripRE=/^-?>|<!--|-->|--!>|<!-$/g;function escapeHtmlComment(e){return e.replace(commentStripRE,"")}function looseCompareArrays(e,t){if(e.length!==t.length)return!1;let i=!0;for(let s=0;i&&s<e.length;s++)i=looseEqual(e[s],t[s]);return i}function looseEqual(e,t){if(e===t)return!0;let i=isDate$2(e),s=isDate$2(t);if(i||s)return i&&s?e.getTime()===t.getTime():!1;if(i=isSymbol$4(e),s=isSymbol$4(t),i||s)return e===t;if(i=isArray$7(e),s=isArray$7(t),i||s)return i&&s?looseCompareArrays(e,t):!1;if(i=isObject$6(e),s=isObject$6(t),i||s){if(!i||!s)return!1;const c=Object.keys(e).length,d=Object.keys(t).length;if(c!==d)return!1;for(const g in e){const r=e.hasOwnProperty(g),y=t.hasOwnProperty(g);if(r&&!y||!r&&y||!looseEqual(e[g],t[g]))return!1}}return String(e)===String(t)}function looseIndexOf(e,t){return e.findIndex(i=>looseEqual(i,t))}const toDisplayString=e=>isString$2(e)?e:e==null?"":isArray$7(e)||isObject$6(e)&&(e.toString===objectToString$3||!isFunction$1(e.toString))?JSON.stringify(e,replacer,2):String(e),replacer=(e,t)=>t&&t.__v_isRef?replacer(e,t.value):isMap$1(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[s,c])=>(i[`${s} =>`]=c,i),{})}:isSet$1(t)?{[`Set(${t.size})`]:[...t.values()]}:isObject$6(t)&&!isArray$7(t)&&!isPlainObject$1(t)?String(t):t,EMPTY_OBJ=process.env.NODE_ENV!=="production"?Object.freeze({}):{},EMPTY_ARR=process.env.NODE_ENV!=="production"?Object.freeze([]):[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=e=>onRE.test(e),isModelListener=e=>e.startsWith("onUpdate:"),extend$4=Object.assign,remove$2=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn$2=(e,t)=>hasOwnProperty$1.call(e,t),isArray$7=Array.isArray,isMap$1=e=>toTypeString(e)==="[object Map]",isSet$1=e=>toTypeString(e)==="[object Set]",isDate$2=e=>toTypeString(e)==="[object Date]",isFunction$1=e=>typeof e=="function",isString$2=e=>typeof e=="string",isSymbol$4=e=>typeof e=="symbol",isObject$6=e=>e!==null&&typeof e=="object",isPromise=e=>isObject$6(e)&&isFunction$1(e.then)&&isFunction$1(e.catch),objectToString$3=Object.prototype.toString,toTypeString=e=>objectToString$3.call(e),toRawType=e=>toTypeString(e).slice(8,-1),isPlainObject$1=e=>toTypeString(e)==="[object Object]",isIntegerKey=e=>isString$2(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),isBuiltInDirective=makeMap("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),cacheStringFunction=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(e=>e.replace(camelizeRE,(t,i)=>i?i.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(e=>e.replace(hyphenateRE,"-$1").toLowerCase()),capitalize$1=cacheStringFunction(e=>e.charAt(0).toUpperCase()+e.slice(1)),toHandlerKey=cacheStringFunction(e=>e?`on${capitalize$1(e)}`:""),hasChanged=(e,t)=>!Object.is(e,t),invokeArrayFns=(e,t)=>{for(let i=0;i<e.length;i++)e[i](t)},def=(e,t,i)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:i})},toNumber$2=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function warn$3(e,...t){console.warn(`[Vue warn] ${e}`,...t)}let activeEffectScope;class EffectScope{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&activeEffectScope&&(this.parent=activeEffectScope,this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(t){if(this.active){const i=activeEffectScope;try{return activeEffectScope=this,t()}finally{activeEffectScope=i}}else process.env.NODE_ENV!=="production"&&warn$3("cannot run an inactive effect scope.")}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(t){if(this.active){let i,s;for(i=0,s=this.effects.length;i<s;i++)this.effects[i].stop();for(i=0,s=this.cleanups.length;i<s;i++)this.cleanups[i]();if(this.scopes)for(i=0,s=this.scopes.length;i<s;i++)this.scopes[i].stop(!0);if(this.parent&&!t){const c=this.parent.scopes.pop();c&&c!==this&&(this.parent.scopes[this.index]=c,c.index=this.index)}this.active=!1}}}function effectScope(e){return new EffectScope(e)}function recordEffectScope(e,t=activeEffectScope){t&&t.active&&t.effects.push(e)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(e){activeEffectScope?activeEffectScope.cleanups.push(e):process.env.NODE_ENV!=="production"&&warn$3("onScopeDispose() is called when there is no active effect scope to be associated with.")}const createDep=e=>{const t=new Set(e);return t.w=0,t.n=0,t},wasTracked=e=>(e.w&trackOpBit)>0,newTracked=e=>(e.n&trackOpBit)>0,initDepMarkers=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=trackOpBit},finalizeDepMarkers=e=>{const{deps:t}=e;if(t.length){let i=0;for(let s=0;s<t.length;s++){const c=t[s];wasTracked(c)&&!newTracked(c)?c.delete(e):t[i++]=c,c.w&=~trackOpBit,c.n&=~trackOpBit}t.length=i}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(process.env.NODE_ENV!=="production"?"iterate":""),MAP_KEY_ITERATE_KEY=Symbol(process.env.NODE_ENV!=="production"?"Map key iterate":"");class ReactiveEffect{constructor(t,i=null,s){this.fn=t,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,s)}run(){if(!this.active)return this.fn();let t=activeEffect,i=shouldTrack;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(e){const{deps:t}=e;if(t.length){for(let i=0;i<t.length;i++)t[i].delete(e);t.length=0}}function effect(e,t){e.effect&&(e=e.effect.fn);const i=new ReactiveEffect(e);t&&(extend$4(i,t),t.scope&&recordEffectScope(i,t.scope)),(!t||!t.lazy)&&i.run();const s=i.run.bind(i);return s.effect=i,s}function stop(e){e.effect.stop()}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=e===void 0?!0:e}function track(e,t,i){if(shouldTrack&&activeEffect){let s=targetMap.get(e);s||targetMap.set(e,s=new Map);let c=s.get(i);c||s.set(i,c=createDep());const d=process.env.NODE_ENV!=="production"?{effect:activeEffect,target:e,type:t,key:i}:void 0;trackEffects(c,d)}}function trackEffects(e,t){let i=!1;effectTrackDepth<=maxMarkerBits?newTracked(e)||(e.n|=trackOpBit,i=!wasTracked(e)):i=!e.has(activeEffect),i&&(e.add(activeEffect),activeEffect.deps.push(e),process.env.NODE_ENV!=="production"&&activeEffect.onTrack&&activeEffect.onTrack(Object.assign({effect:activeEffect},t)))}function trigger$1(e,t,i,s,c,d){const g=targetMap.get(e);if(!g)return;let r=[];if(t==="clear")r=[...g.values()];else if(i==="length"&&isArray$7(e))g.forEach((E,w)=>{(w==="length"||w>=s)&&r.push(E)});else switch(i!==void 0&&r.push(g.get(i)),t){case"add":isArray$7(e)?isIntegerKey(i)&&r.push(g.get("length")):(r.push(g.get(ITERATE_KEY)),isMap$1(e)&&r.push(g.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$7(e)||(r.push(g.get(ITERATE_KEY)),isMap$1(e)&&r.push(g.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap$1(e)&&r.push(g.get(ITERATE_KEY));break}const y=process.env.NODE_ENV!=="production"?{target:e,type:t,key:i,newValue:s,oldValue:c,oldTarget:d}:void 0;if(r.length===1)r[0]&&(process.env.NODE_ENV!=="production"?triggerEffects(r[0],y):triggerEffects(r[0]));else{const E=[];for(const w of r)w&&E.push(...w);process.env.NODE_ENV!=="production"?triggerEffects(createDep(E),y):triggerEffects(createDep(E))}}function triggerEffects(e,t){const i=isArray$7(e)?e:[...e];for(const s of i)s.computed&&triggerEffect(s,t);for(const s of i)s.computed||triggerEffect(s,t)}function triggerEffect(e,t){(e!==activeEffect||e.allowRecurse)&&(process.env.NODE_ENV!=="production"&&e.onTrigger&&e.onTrigger(extend$4({effect:e},t)),e.scheduler?e.scheduler():e.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(isSymbol$4)),get$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),shallowReadonlyGet=createGetter(!0,!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...i){const s=toRaw$1(this);for(let d=0,g=this.length;d<g;d++)track(s,"get",d+"");const c=s[t](...i);return c===-1||c===!1?s[t](...i.map(toRaw$1)):c}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...i){pauseTracking();const s=toRaw$1(this)[t].apply(this,i);return resetTracking(),s}}),e}function createGetter(e=!1,t=!1){return function(s,c,d){if(c==="__v_isReactive")return!e;if(c==="__v_isReadonly")return e;if(c==="__v_isShallow")return t;if(c==="__v_raw"&&d===(e?t?shallowReadonlyMap:readonlyMap:t?shallowReactiveMap:reactiveMap).get(s))return s;const g=isArray$7(s);if(!e&&g&&hasOwn$2(arrayInstrumentations,c))return Reflect.get(arrayInstrumentations,c,d);const r=Reflect.get(s,c,d);return(isSymbol$4(c)?builtInSymbols.has(c):isNonTrackableKeys(c))||(e||track(s,"get",c),t)?r:isRef$1(r)?g&&isIntegerKey(c)?r:r.value:isObject$6(r)?e?readonly(r):reactive(r):r}}const set$1=createSetter(),shallowSet=createSetter(!0);function createSetter(e=!1){return function(i,s,c,d){let g=i[s];if(isReadonly(g)&&isRef$1(g)&&!isRef$1(c))return!1;if(!e&&!isReadonly(c)&&(isShallow$1(c)||(c=toRaw$1(c),g=toRaw$1(g)),!isArray$7(i)&&isRef$1(g)&&!isRef$1(c)))return g.value=c,!0;const r=isArray$7(i)&&isIntegerKey(s)?Number(s)<i.length:hasOwn$2(i,s),y=Reflect.set(i,s,c,d);return i===toRaw$1(d)&&(r?hasChanged(c,g)&&trigger$1(i,"set",s,c,g):trigger$1(i,"add",s,c)),y}}function deleteProperty(e,t){const i=hasOwn$2(e,t),s=e[t],c=Reflect.deleteProperty(e,t);return c&&i&&trigger$1(e,"delete",t,void 0,s),c}function has$4(e,t){const i=Reflect.has(e,t);return(!isSymbol$4(t)||!builtInSymbols.has(t))&&track(e,"has",t),i}function ownKeys(e){return track(e,"iterate",isArray$7(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}const mutableHandlers={get:get$1,set:set$1,deleteProperty,has:has$4,ownKeys},readonlyHandlers={get:readonlyGet,set(e,t){return process.env.NODE_ENV!=="production"&&warn$3(`Set operation on key "${String(t)}" failed: target is readonly.`,e),!0},deleteProperty(e,t){return process.env.NODE_ENV!=="production"&&warn$3(`Delete operation on key "${String(t)}" failed: target is readonly.`,e),!0}},shallowReactiveHandlers=extend$4({},mutableHandlers,{get:shallowGet,set:shallowSet}),shallowReadonlyHandlers=extend$4({},readonlyHandlers,{get:shallowReadonlyGet}),toShallow=e=>e,getProto$1=e=>Reflect.getPrototypeOf(e);function get$1$1(e,t,i=!1,s=!1){e=e.__v_raw;const c=toRaw$1(e),d=toRaw$1(t);i||(t!==d&&track(c,"get",t),track(c,"get",d));const{has:g}=getProto$1(c),r=s?toShallow:i?toReadonly:toReactive;if(g.call(c,t))return r(e.get(t));if(g.call(c,d))return r(e.get(d));e!==c&&e.get(t)}function has$1$1(e,t=!1){const i=this.__v_raw,s=toRaw$1(i),c=toRaw$1(e);return t||(e!==c&&track(s,"has",e),track(s,"has",c)),e===c?i.has(e):i.has(e)||i.has(c)}function size(e,t=!1){return e=e.__v_raw,!t&&track(toRaw$1(e),"iterate",ITERATE_KEY),Reflect.get(e,"size",e)}function add(e){e=toRaw$1(e);const t=toRaw$1(this);return getProto$1(t).has.call(t,e)||(t.add(e),trigger$1(t,"add",e,e)),this}function set$1$1(e,t){t=toRaw$1(t);const i=toRaw$1(this),{has:s,get:c}=getProto$1(i);let d=s.call(i,e);d?process.env.NODE_ENV!=="production"&&checkIdentityKeys(i,s,e):(e=toRaw$1(e),d=s.call(i,e));const g=c.call(i,e);return i.set(e,t),d?hasChanged(t,g)&&trigger$1(i,"set",e,t,g):trigger$1(i,"add",e,t),this}function deleteEntry(e){const t=toRaw$1(this),{has:i,get:s}=getProto$1(t);let c=i.call(t,e);c?process.env.NODE_ENV!=="production"&&checkIdentityKeys(t,i,e):(e=toRaw$1(e),c=i.call(t,e));const d=s?s.call(t,e):void 0,g=t.delete(e);return c&&trigger$1(t,"delete",e,void 0,d),g}function clear(){const e=toRaw$1(this),t=e.size!==0,i=process.env.NODE_ENV!=="production"?isMap$1(e)?new Map(e):new Set(e):void 0,s=e.clear();return t&&trigger$1(e,"clear",void 0,void 0,i),s}function createForEach(e,t){return function(s,c){const d=this,g=d.__v_raw,r=toRaw$1(g),y=t?toShallow:e?toReadonly:toReactive;return!e&&track(r,"iterate",ITERATE_KEY),g.forEach((E,w)=>s.call(c,y(E),y(w),d))}}function createIterableMethod(e,t,i){return function(...s){const c=this.__v_raw,d=toRaw$1(c),g=isMap$1(d),r=e==="entries"||e===Symbol.iterator&&g,y=e==="keys"&&g,E=c[e](...s),w=i?toShallow:t?toReadonly:toReactive;return!t&&track(d,"iterate",y?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:k,done:S}=E.next();return S?{value:k,done:S}:{value:r?[w(k[0]),w(k[1])]:w(k),done:S}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...t){if(process.env.NODE_ENV!=="production"){const i=t[0]?`on key "${t[0]}" `:"";console.warn(`${capitalize$1(e)} operation ${i}failed: target is readonly.`,toRaw$1(this))}return e==="delete"?!1:this}}function createInstrumentations(){const e={get(d){return get$1$1(this,d)},get size(){return size(this)},has:has$1$1,add,set:set$1$1,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},t={get(d){return get$1$1(this,d,!1,!0)},get size(){return size(this)},has:has$1$1,add,set:set$1$1,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},i={get(d){return get$1$1(this,d,!0)},get size(){return size(this,!0)},has(d){return has$1$1.call(this,d,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},s={get(d){return get$1$1(this,d,!0,!0)},get size(){return size(this,!0)},has(d){return has$1$1.call(this,d,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(d=>{e[d]=createIterableMethod(d,!1,!1),i[d]=createIterableMethod(d,!0,!1),t[d]=createIterableMethod(d,!1,!0),s[d]=createIterableMethod(d,!0,!0)}),[e,i,t,s]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(e,t){const i=t?e?shallowReadonlyInstrumentations:shallowInstrumentations:e?readonlyInstrumentations:mutableInstrumentations;return(s,c,d)=>c==="__v_isReactive"?!e:c==="__v_isReadonly"?e:c==="__v_raw"?s:Reflect.get(hasOwn$2(i,c)&&c in s?i:s,c,d)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)};function checkIdentityKeys(e,t,i){const s=toRaw$1(i);if(s!==i&&t.call(e,s)){const c=toRawType(e);console.warn(`Reactive ${c} contains both the raw and reactive versions of the same object${c==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(e){return createReactiveObject(e,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(e,t,i,s,c){if(!isObject$6(e))return process.env.NODE_ENV!=="production"&&console.warn(`value cannot be made reactive: ${String(e)}`),e;if(e.__v_raw&&!(t&&e.__v_isReactive))return e;const d=c.get(e);if(d)return d;const g=getTargetType(e);if(g===0)return e;const r=new Proxy(e,g===2?s:i);return c.set(e,r),r}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!!(e&&e.__v_isReactive)}function isReadonly(e){return!!(e&&e.__v_isReadonly)}function isShallow$1(e){return!!(e&&e.__v_isShallow)}function isProxy(e){return isReactive(e)||isReadonly(e)}function toRaw$1(e){const t=e&&e.__v_raw;return t?toRaw$1(t):e}function markRaw(e){return def(e,"__v_skip",!0),e}const toReactive=e=>isObject$6(e)?reactive(e):e,toReadonly=e=>isObject$6(e)?readonly(e):e;function trackRefValue(e){shouldTrack&&activeEffect&&(e=toRaw$1(e),process.env.NODE_ENV!=="production"?trackEffects(e.dep||(e.dep=createDep()),{target:e,type:"get",key:"value"}):trackEffects(e.dep||(e.dep=createDep())))}function triggerRefValue(e,t){e=toRaw$1(e),e.dep&&(process.env.NODE_ENV!=="production"?triggerEffects(e.dep,{target:e,type:"set",key:"value",newValue:t}):triggerEffects(e.dep))}function isRef$1(e){return!!(e&&e.__v_isRef===!0)}function ref(e){return createRef(e,!1)}function shallowRef(e){return createRef(e,!0)}function createRef(e,t){return isRef$1(e)?e:new RefImpl(e,t)}class RefImpl{constructor(t,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?t:toRaw$1(t),this._value=i?t:toReactive(t)}get value(){return trackRefValue(this),this._value}set value(t){t=this.__v_isShallow?t:toRaw$1(t),hasChanged(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:toReactive(t),triggerRefValue(this,t))}}function triggerRef(e){triggerRefValue(e,process.env.NODE_ENV!=="production"?e.value:void 0)}function unref(e){return isRef$1(e)?e.value:e}const shallowUnwrapHandlers={get:(e,t,i)=>unref(Reflect.get(e,t,i)),set:(e,t,i,s)=>{const c=e[t];return isRef$1(c)&&!isRef$1(i)?(c.value=i,!0):Reflect.set(e,t,i,s)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}class CustomRefImpl{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:i,set:s}=t(()=>trackRefValue(this),()=>triggerRefValue(this));this._get=i,this._set=s}get value(){return this._get()}set value(t){this._set(t)}}function customRef(e){return new CustomRefImpl(e)}function toRefs(e){process.env.NODE_ENV!=="production"&&!isProxy(e)&&console.warn("toRefs() expects a reactive object but received a plain one.");const t=isArray$7(e)?new Array(e.length):{};for(const i in e)t[i]=toRef(e,i);return t}class ObjectRefImpl{constructor(t,i,s){this._object=t,this._key=i,this._defaultValue=s,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function toRef(e,t,i){const s=e[t];return isRef$1(s)?s:new ObjectRefImpl(e,t,i)}class ComputedRefImpl{constructor(t,i,s,c){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new ReactiveEffect(t,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!c,this.__v_isReadonly=s}get value(){const t=toRaw$1(this);return trackRefValue(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function computed$1(e,t,i=!1){let s,c;const d=isFunction$1(e);d?(s=e,c=process.env.NODE_ENV!=="production"?()=>{console.warn("Write operation failed: computed value is readonly")}:NOOP):(s=e.get,c=e.set);const g=new ComputedRefImpl(s,c,d||!c,i);return process.env.NODE_ENV!=="production"&&t&&!i&&(g.effect.onTrack=t.onTrack,g.effect.onTrigger=t.onTrigger),g}const stack$1=[];function pushWarningContext$1(e){stack$1.push(e)}function popWarningContext$1(){stack$1.pop()}function warn$2(e,...t){pauseTracking();const i=stack$1.length?stack$1[stack$1.length-1].component:null,s=i&&i.appContext.config.warnHandler,c=getComponentTrace$1();if(s)callWithErrorHandling$1(s,i,11,[e+t.join(""),i&&i.proxy,c.map(({vnode:d})=>`at <${formatComponentName$1(i,d.type)}>`).join(`
`),c]);else{const d=[`[Vue warn]: ${e}`,...t];c.length&&d.push(`
`,...formatTrace$1(c)),console.warn(...d)}resetTracking()}function getComponentTrace$1(){let e=stack$1[stack$1.length-1];if(!e)return[];const t=[];for(;e;){const i=t[0];i&&i.vnode===e?i.recurseCount++:t.push({vnode:e,recurseCount:0});const s=e.component&&e.component.parent;e=s&&s.vnode}return t}function formatTrace$1(e){const t=[];return e.forEach((i,s)=>{t.push(...s===0?[]:[`
`],...formatTraceEntry$1(i))}),t}function formatTraceEntry$1({vnode:e,recurseCount:t}){const i=t>0?`... (${t} recursive calls)`:"",s=e.component?e.component.parent==null:!1,c=` at <${formatComponentName$1(e.component,e.type,s)}`,d=">"+i;return e.props?[c,...formatProps$1(e.props),d]:[c+d]}function formatProps$1(e){const t=[],i=Object.keys(e);return i.slice(0,3).forEach(s=>{t.push(...formatProp$1(s,e[s]))}),i.length>3&&t.push(" ..."),t}function formatProp$1(e,t,i){return isString$2(t)?(t=JSON.stringify(t),i?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?i?t:[`${e}=${t}`]:isRef$1(t)?(t=formatProp$1(e,toRaw$1(t.value),!0),i?t:[`${e}=Ref<`,t,">"]):isFunction$1(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=toRaw$1(t),i?t:[`${e}=`,t])}const ErrorTypeStrings$1={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",[0]:"setup function",[1]:"render function",[2]:"watcher getter",[3]:"watcher callback",[4]:"watcher cleanup function",[5]:"native event handler",[6]:"component event handler",[7]:"vnode hook",[8]:"directive hook",[9]:"transition hook",[10]:"app errorHandler",[11]:"app warnHandler",[12]:"ref function",[13]:"async component loader",[14]:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/core"};function callWithErrorHandling$1(e,t,i,s){let c;try{c=s?e(...s):e()}catch(d){handleError$1(d,t,i)}return c}function callWithAsyncErrorHandling(e,t,i,s){if(isFunction$1(e)){const d=callWithErrorHandling$1(e,t,i,s);return d&&isPromise(d)&&d.catch(g=>{handleError$1(g,t,i)}),d}const c=[];for(let d=0;d<e.length;d++)c.push(callWithAsyncErrorHandling(e[d],t,i,s));return c}function handleError$1(e,t,i,s=!0){const c=t?t.vnode:null;if(t){let d=t.parent;const g=t.proxy,r=process.env.NODE_ENV!=="production"?ErrorTypeStrings$1[i]:i;for(;d;){const E=d.ec;if(E){for(let w=0;w<E.length;w++)if(E[w](e,g,r)===!1)return}d=d.parent}const y=t.appContext.config.errorHandler;if(y){callWithErrorHandling$1(y,null,10,[e,g,r]);return}}logError$1(e,i,c,s)}function logError$1(e,t,i,s=!0){if(process.env.NODE_ENV!=="production"){const c=ErrorTypeStrings$1[t];if(i&&pushWarningContext$1(i),warn$2(`Unhandled error${c?` during execution of ${c}`:""}`),i&&popWarningContext$1(),s)throw e;console.error(e)}else console.error(e)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPreFlushCbs=[];let activePreFlushCbs=null,preFlushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null,currentPreFlushParentJob=null;const RECURSION_LIMIT=100;function nextTick$1(e){const t=currentFlushPromise||resolvedPromise;return e?t.then(this?e.bind(this):e):t}function findInsertionIndex(e){let t=flushIndex+1,i=queue.length;for(;t<i;){const s=t+i>>>1;getId(queue[s])<e?t=s+1:i=s}return t}function queueJob(e){(!queue.length||!queue.includes(e,isFlushing&&e.allowRecurse?flushIndex+1:flushIndex))&&e!==currentPreFlushParentJob&&(e.id==null?queue.push(e):queue.splice(findInsertionIndex(e.id),0,e),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(e){const t=queue.indexOf(e);t>flushIndex&&queue.splice(t,1)}function queueCb(e,t,i,s){isArray$7(e)?i.push(...e):(!t||!t.includes(e,e.allowRecurse?s+1:s))&&i.push(e),queueFlush()}function queuePreFlushCb(e){queueCb(e,activePreFlushCbs,pendingPreFlushCbs,preFlushIndex)}function queuePostFlushCb(e){queueCb(e,activePostFlushCbs,pendingPostFlushCbs,postFlushIndex)}function flushPreFlushCbs(e,t=null){if(pendingPreFlushCbs.length){for(currentPreFlushParentJob=t,activePreFlushCbs=[...new Set(pendingPreFlushCbs)],pendingPreFlushCbs.length=0,process.env.NODE_ENV!=="production"&&(e=e||new Map),preFlushIndex=0;preFlushIndex<activePreFlushCbs.length;preFlushIndex++)process.env.NODE_ENV!=="production"&&checkRecursiveUpdates(e,activePreFlushCbs[preFlushIndex])||activePreFlushCbs[preFlushIndex]();activePreFlushCbs=null,preFlushIndex=0,currentPreFlushParentJob=null,flushPreFlushCbs(e,t)}}function flushPostFlushCbs(e){if(flushPreFlushCbs(),pendingPostFlushCbs.length){const t=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...t);return}for(activePostFlushCbs=t,process.env.NODE_ENV!=="production"&&(e=e||new Map),activePostFlushCbs.sort((i,s)=>getId(i)-getId(s)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)process.env.NODE_ENV!=="production"&&checkRecursiveUpdates(e,activePostFlushCbs[postFlushIndex])||activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>e.id==null?1/0:e.id;function flushJobs(e){isFlushPending=!1,isFlushing=!0,process.env.NODE_ENV!=="production"&&(e=e||new Map),flushPreFlushCbs(e),queue.sort((i,s)=>getId(i)-getId(s));const t=process.env.NODE_ENV!=="production"?i=>checkRecursiveUpdates(e,i):NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const i=queue[flushIndex];if(i&&i.active!==!1){if(process.env.NODE_ENV!=="production"&&t(i))continue;callWithErrorHandling$1(i,null,14)}}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(e),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPreFlushCbs.length||pendingPostFlushCbs.length)&&flushJobs(e)}}function checkRecursiveUpdates(e,t){if(!e.has(t))e.set(t,1);else{const i=e.get(t);if(i>RECURSION_LIMIT){const s=t.ownerInstance,c=s&&getComponentName$1(s.type);return warn$2(`Maximum recursive updates exceeded${c?` in component <${c}>`:""}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`),!0}else e.set(t,i+1)}}let isHmrUpdating=!1;const hmrDirtyComponents=new Set;process.env.NODE_ENV!=="production"&&(getGlobalThis().__VUE_HMR_RUNTIME__={createRecord:tryWrap(createRecord),rerender:tryWrap(rerender),reload:tryWrap(reload)});const map=new Map;function registerHMR(e){const t=e.type.__hmrId;let i=map.get(t);i||(createRecord(t,e.type),i=map.get(t)),i.instances.add(e)}function unregisterHMR(e){map.get(e.type.__hmrId).instances.delete(e)}function createRecord(e,t){return map.has(e)?!1:(map.set(e,{initialDef:normalizeClassComponent(t),instances:new Set}),!0)}function normalizeClassComponent(e){return isClassComponent(e)?e.__vccOpts:e}function rerender(e,t){const i=map.get(e);!i||(i.initialDef.render=t,[...i.instances].forEach(s=>{t&&(s.render=t,normalizeClassComponent(s.type).render=t),s.renderCache=[],isHmrUpdating=!0,s.update(),isHmrUpdating=!1}))}function reload(e,t){const i=map.get(e);if(!i)return;t=normalizeClassComponent(t),updateComponentDef(i.initialDef,t);const s=[...i.instances];for(const c of s){const d=normalizeClassComponent(c.type);hmrDirtyComponents.has(d)||(d!==i.initialDef&&updateComponentDef(d,t),hmrDirtyComponents.add(d)),c.appContext.optionsCache.delete(c.type),c.ceReload?(hmrDirtyComponents.add(d),c.ceReload(t.styles),hmrDirtyComponents.delete(d)):c.parent?(queueJob(c.parent.update),c.parent.type.__asyncLoader&&c.parent.ceReload&&c.parent.ceReload(t.styles)):c.appContext.reload?c.appContext.reload():typeof window<"u"?window.location.reload():console.warn("[HMR] Root or manually mounted instance modified. Full reload required.")}queuePostFlushCb(()=>{for(const c of s)hmrDirtyComponents.delete(normalizeClassComponent(c.type))})}function updateComponentDef(e,t){extend$4(e,t);for(const i in e)i!=="__file"&&!(i in t)&&delete e[i]}function tryWrap(e){return(t,i)=>{try{return e(t,i)}catch(s){console.error(s),console.warn("[HMR] Something went wrong during Vue component hot-reload. Full reload required.")}}}let devtools,buffer=[],devtoolsNotInstalled=!1;function emit(e,...t){devtools?devtools.emit(e,...t):devtoolsNotInstalled||buffer.push({event:e,args:t})}function setDevtoolsHook(e,t){var i,s;devtools=e,devtools?(devtools.enabled=!0,buffer.forEach(({event:c,args:d})=>devtools.emit(c,...d)),buffer=[]):typeof window<"u"&&window.HTMLElement&&!(!((s=(i=window.navigator)===null||i===void 0?void 0:i.userAgent)===null||s===void 0)&&s.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(d=>{setDevtoolsHook(d,t)}),setTimeout(()=>{devtools||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,devtoolsNotInstalled=!0,buffer=[])},3e3)):(devtoolsNotInstalled=!0,buffer=[])}function devtoolsInitApp(e,t){emit("app:init",e,t,{Fragment,Text,Comment:Comment$1,Static})}function devtoolsUnmountApp(e){emit("app:unmount",e)}const devtoolsComponentAdded=createDevtoolsComponentHook("component:added"),devtoolsComponentUpdated=createDevtoolsComponentHook("component:updated"),devtoolsComponentRemoved=createDevtoolsComponentHook("component:removed");function createDevtoolsComponentHook(e){return t=>{emit(e,t.appContext.app,t.uid,t.parent?t.parent.uid:void 0,t)}}const devtoolsPerfStart=createDevtoolsPerformanceHook("perf:start"),devtoolsPerfEnd=createDevtoolsPerformanceHook("perf:end");function createDevtoolsPerformanceHook(e){return(t,i,s)=>{emit(e,t.appContext.app,t.uid,t,i,s)}}function devtoolsComponentEmit(e,t,i){emit("component:emit",e.appContext.app,e,t,i)}function emit$1(e,t,...i){if(e.isUnmounted)return;const s=e.vnode.props||EMPTY_OBJ;if(process.env.NODE_ENV!=="production"){const{emitsOptions:w,propsOptions:[k]}=e;if(w)if(!(t in w))(!k||!(toHandlerKey(t)in k))&&warn$2(`Component emitted event "${t}" but it is neither declared in the emits option nor as an "${toHandlerKey(t)}" prop.`);else{const S=w[t];isFunction$1(S)&&(S(...i)||warn$2(`Invalid event arguments: event validation failed for event "${t}".`))}}let c=i;const d=t.startsWith("update:"),g=d&&t.slice(7);if(g&&g in s){const w=`${g==="modelValue"?"model":g}Modifiers`,{number:k,trim:S}=s[w]||EMPTY_OBJ;S&&(c=i.map(I=>I.trim())),k&&(c=i.map(toNumber$2))}if(process.env.NODE_ENV!=="production"&&devtoolsComponentEmit(e,t,c),process.env.NODE_ENV!=="production"){const w=t.toLowerCase();w!==t&&s[toHandlerKey(w)]&&warn$2(`Event "${w}" is emitted in component ${formatComponentName$1(e,e.type)} but the handler is registered for "${t}". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "${hyphenate(t)}" instead of "${t}".`)}let r,y=s[r=toHandlerKey(t)]||s[r=toHandlerKey(camelize(t))];!y&&d&&(y=s[r=toHandlerKey(hyphenate(t))]),y&&callWithAsyncErrorHandling(y,e,6,c);const E=s[r+"Once"];if(E){if(!e.emitted)e.emitted={};else if(e.emitted[r])return;e.emitted[r]=!0,callWithAsyncErrorHandling(E,e,6,c)}}function normalizeEmitsOptions(e,t,i=!1){const s=t.emitsCache,c=s.get(e);if(c!==void 0)return c;const d=e.emits;let g={},r=!1;if(!isFunction$1(e)){const y=E=>{const w=normalizeEmitsOptions(E,t,!0);w&&(r=!0,extend$4(g,w))};!i&&t.mixins.length&&t.mixins.forEach(y),e.extends&&y(e.extends),e.mixins&&e.mixins.forEach(y)}return!d&&!r?(s.set(e,null),null):(isArray$7(d)?d.forEach(y=>g[y]=null):extend$4(g,d),s.set(e,g),g)}function isEmitListener(e,t){return!e||!isOn(t)?!1:(t=t.slice(2).replace(/Once$/,""),hasOwn$2(e,t[0].toLowerCase()+t.slice(1))||hasOwn$2(e,hyphenate(t))||hasOwn$2(e,t))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance$1(e){const t=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,t}function pushScopeId(e){currentScopeId=e}function popScopeId(){currentScopeId=null}const withScopeId=e=>withCtx;function withCtx(e,t=currentRenderingInstance,i){if(!t||e._n)return e;const s=(...c)=>{s._d&&setBlockTracking(-1);const d=setCurrentRenderingInstance$1(t),g=e(...c);return setCurrentRenderingInstance$1(d),s._d&&setBlockTracking(1),process.env.NODE_ENV!=="production"&&devtoolsComponentUpdated(t),g};return s._n=!0,s._c=!0,s._d=!0,s}let accessedAttrs=!1;function markAttrsAccessed(){accessedAttrs=!0}function renderComponentRoot$1(e){const{type:t,vnode:i,proxy:s,withProxy:c,props:d,propsOptions:[g],slots:r,attrs:y,emit:E,render:w,renderCache:k,data:S,setupState:I,ctx:L,inheritAttrs:D}=e;let O,V;const z=setCurrentRenderingInstance$1(e);process.env.NODE_ENV!=="production"&&(accessedAttrs=!1);try{if(i.shapeFlag&4){const W=c||s;O=normalizeVNode$1(w.call(W,W,k,d,I,S,L)),V=y}else{const W=t;process.env.NODE_ENV!=="production"&&y===d&&markAttrsAccessed(),O=normalizeVNode$1(W.length>1?W(d,process.env.NODE_ENV!=="production"?{get attrs(){return markAttrsAccessed(),y},slots:r,emit:E}:{attrs:y,slots:r,emit:E}):W(d,null)),V=t.props?y:getFunctionalFallthrough(y)}}catch(W){blockStack.length=0,handleError$1(W,e,1),O=createVNode(Comment$1)}let U=O,Z;if(process.env.NODE_ENV!=="production"&&O.patchFlag>0&&O.patchFlag&2048&&([U,Z]=getChildRoot(O)),V&&D!==!1){const W=Object.keys(V),{shapeFlag:ne}=U;if(W.length){if(ne&7)g&&W.some(isModelListener)&&(V=filterModelListeners(V,g)),U=cloneVNode(U,V);else if(process.env.NODE_ENV!=="production"&&!accessedAttrs&&U.type!==Comment$1){const re=Object.keys(y),ie=[],Ce=[];for(let we=0,fe=re.length;we<fe;we++){const de=re[we];isOn(de)?isModelListener(de)||ie.push(de[2].toLowerCase()+de.slice(3)):Ce.push(de)}Ce.length&&warn$2(`Extraneous non-props attributes (${Ce.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes.`),ie.length&&warn$2(`Extraneous non-emits event listeners (${ie.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes. If the listener is intended to be a component custom event listener only, declare it using the "emits" option.`)}}}return i.dirs&&(process.env.NODE_ENV!=="production"&&!isElementRoot(U)&&warn$2("Runtime directive used on component with non-element root node. The directives will not function as intended."),U=cloneVNode(U),U.dirs=U.dirs?U.dirs.concat(i.dirs):i.dirs),i.transition&&(process.env.NODE_ENV!=="production"&&!isElementRoot(U)&&warn$2("Component inside <Transition> renders non-element root node that cannot be animated."),U.transition=i.transition),process.env.NODE_ENV!=="production"&&Z?Z(U):O=U,setCurrentRenderingInstance$1(z),O}const getChildRoot=e=>{const t=e.children,i=e.dynamicChildren,s=filterSingleRoot(t);if(!s)return[e,void 0];const c=t.indexOf(s),d=i?i.indexOf(s):-1,g=r=>{t[c]=r,i&&(d>-1?i[d]=r:r.patchFlag>0&&(e.dynamicChildren=[...i,r]))};return[normalizeVNode$1(s),g]};function filterSingleRoot(e){let t;for(let i=0;i<e.length;i++){const s=e[i];if(isVNode$1(s)){if(s.type!==Comment$1||s.children==="v-if"){if(t)return;t=s}}else return}return t}const getFunctionalFallthrough=e=>{let t;for(const i in e)(i==="class"||i==="style"||isOn(i))&&((t||(t={}))[i]=e[i]);return t},filterModelListeners=(e,t)=>{const i={};for(const s in e)(!isModelListener(s)||!(s.slice(9)in t))&&(i[s]=e[s]);return i},isElementRoot=e=>e.shapeFlag&7||e.type===Comment$1;function shouldUpdateComponent(e,t,i){const{props:s,children:c,component:d}=e,{props:g,children:r,patchFlag:y}=t,E=d.emitsOptions;if(process.env.NODE_ENV!=="production"&&(c||r)&&isHmrUpdating||t.dirs||t.transition)return!0;if(i&&y>=0){if(y&1024)return!0;if(y&16)return s?hasPropsChanged(s,g,E):!!g;if(y&8){const w=t.dynamicProps;for(let k=0;k<w.length;k++){const S=w[k];if(g[S]!==s[S]&&!isEmitListener(E,S))return!0}}}else return(c||r)&&(!r||!r.$stable)?!0:s===g?!1:s?g?hasPropsChanged(s,g,E):!0:!!g;return!1}function hasPropsChanged(e,t,i){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let c=0;c<s.length;c++){const d=s[c];if(t[d]!==e[d]&&!isEmitListener(i,d))return!0}return!1}function updateHOCHostEl({vnode:e,parent:t},i){for(;t&&t.subTree===e;)(e=t.vnode).el=i,t=t.parent}const isSuspense=e=>e.__isSuspense,SuspenseImpl={name:"Suspense",__isSuspense:!0,process(e,t,i,s,c,d,g,r,y,E){e==null?mountSuspense(t,i,s,c,d,g,r,y,E):patchSuspense(e,t,i,s,c,g,r,y,E)},hydrate:hydrateSuspense,create:createSuspenseBoundary,normalize:normalizeSuspenseChildren},Suspense=SuspenseImpl;function triggerEvent(e,t){const i=e.props&&e.props[t];isFunction$1(i)&&i()}function mountSuspense(e,t,i,s,c,d,g,r,y){const{p:E,o:{createElement:w}}=y,k=w("div"),S=e.suspense=createSuspenseBoundary(e,c,s,t,k,i,d,g,r,y);E(null,S.pendingBranch=e.ssContent,k,null,s,S,d,g),S.deps>0?(triggerEvent(e,"onPending"),triggerEvent(e,"onFallback"),E(null,e.ssFallback,t,i,s,null,d,g),setActiveBranch(S,e.ssFallback)):S.resolve()}function patchSuspense(e,t,i,s,c,d,g,r,{p:y,um:E,o:{createElement:w}}){const k=t.suspense=e.suspense;k.vnode=t,t.el=e.el;const S=t.ssContent,I=t.ssFallback,{activeBranch:L,pendingBranch:D,isInFallback:O,isHydrating:V}=k;if(D)k.pendingBranch=S,isSameVNodeType(S,D)?(y(D,S,k.hiddenContainer,null,c,k,d,g,r),k.deps<=0?k.resolve():O&&(y(L,I,i,s,c,null,d,g,r),setActiveBranch(k,I))):(k.pendingId++,V?(k.isHydrating=!1,k.activeBranch=D):E(D,c,k),k.deps=0,k.effects.length=0,k.hiddenContainer=w("div"),O?(y(null,S,k.hiddenContainer,null,c,k,d,g,r),k.deps<=0?k.resolve():(y(L,I,i,s,c,null,d,g,r),setActiveBranch(k,I))):L&&isSameVNodeType(S,L)?(y(L,S,i,s,c,k,d,g,r),k.resolve(!0)):(y(null,S,k.hiddenContainer,null,c,k,d,g,r),k.deps<=0&&k.resolve()));else if(L&&isSameVNodeType(S,L))y(L,S,i,s,c,k,d,g,r),setActiveBranch(k,S);else if(triggerEvent(t,"onPending"),k.pendingBranch=S,k.pendingId++,y(null,S,k.hiddenContainer,null,c,k,d,g,r),k.deps<=0)k.resolve();else{const{timeout:z,pendingId:U}=k;z>0?setTimeout(()=>{k.pendingId===U&&k.fallback(I)},z):z===0&&k.fallback(I)}}let hasWarned=!1;function createSuspenseBoundary(e,t,i,s,c,d,g,r,y,E,w=!1){process.env.NODE_ENV!=="production"&&!0&&!hasWarned&&(hasWarned=!0,console[console.info?"info":"log"]("<Suspense> is an experimental feature and its API will likely change."));const{p:k,m:S,um:I,n:L,o:{parentNode:D,remove:O}}=E,V=toNumber$2(e.props&&e.props.timeout),z={vnode:e,parent:t,parentComponent:i,isSVG:g,container:s,hiddenContainer:c,anchor:d,deps:0,pendingId:0,timeout:typeof V=="number"?V:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:w,isUnmounted:!1,effects:[],resolve(U=!1){if(process.env.NODE_ENV!=="production"){if(!U&&!z.pendingBranch)throw new Error("suspense.resolve() is called without a pending branch.");if(z.isUnmounted)throw new Error("suspense.resolve() is called on an already unmounted suspense boundary.")}const{vnode:Z,activeBranch:W,pendingBranch:ne,pendingId:re,effects:ie,parentComponent:Ce,container:we}=z;if(z.isHydrating)z.isHydrating=!1;else if(!U){const Le=W&&ne.transition&&ne.transition.mode==="out-in";Le&&(W.transition.afterLeave=()=>{re===z.pendingId&&S(ne,we,Ge,0)});let{anchor:Ge}=z;W&&(Ge=L(W),I(W,Ce,z,!0)),Le||S(ne,we,Ge,0)}setActiveBranch(z,ne),z.pendingBranch=null,z.isInFallback=!1;let fe=z.parent,de=!1;for(;fe;){if(fe.pendingBranch){fe.effects.push(...ie),de=!0;break}fe=fe.parent}de||queuePostFlushCb(ie),z.effects=[],triggerEvent(Z,"onResolve")},fallback(U){if(!z.pendingBranch)return;const{vnode:Z,activeBranch:W,parentComponent:ne,container:re,isSVG:ie}=z;triggerEvent(Z,"onFallback");const Ce=L(W),we=()=>{!z.isInFallback||(k(null,U,re,Ce,ne,null,ie,r,y),setActiveBranch(z,U))},fe=U.transition&&U.transition.mode==="out-in";fe&&(W.transition.afterLeave=we),z.isInFallback=!0,I(W,ne,null,!0),fe||we()},move(U,Z,W){z.activeBranch&&S(z.activeBranch,U,Z,W),z.container=U},next(){return z.activeBranch&&L(z.activeBranch)},registerDep(U,Z){const W=!!z.pendingBranch;W&&z.deps++;const ne=U.vnode.el;U.asyncDep.catch(re=>{handleError$1(re,U,0)}).then(re=>{if(U.isUnmounted||z.isUnmounted||z.pendingId!==U.suspenseId)return;U.asyncResolved=!0;const{vnode:ie}=U;process.env.NODE_ENV!=="production"&&pushWarningContext$1(ie),handleSetupResult(U,re,!1),ne&&(ie.el=ne);const Ce=!ne&&U.subTree.el;Z(U,ie,D(ne||U.subTree.el),ne?null:L(U.subTree),z,g,y),Ce&&O(Ce),updateHOCHostEl(U,ie.el),process.env.NODE_ENV!=="production"&&popWarningContext$1(),W&&--z.deps===0&&z.resolve()})},unmount(U,Z){z.isUnmounted=!0,z.activeBranch&&I(z.activeBranch,i,U,Z),z.pendingBranch&&I(z.pendingBranch,i,U,Z)}};return z}function hydrateSuspense(e,t,i,s,c,d,g,r,y){const E=t.suspense=createSuspenseBoundary(t,s,i,e.parentNode,document.createElement("div"),null,c,d,g,r,!0),w=y(e,E.pendingBranch=t.ssContent,i,E,d,g);return E.deps===0&&E.resolve(),w}function normalizeSuspenseChildren(e){const{shapeFlag:t,children:i}=e,s=t&32;e.ssContent=normalizeSuspenseSlot(s?i.default:i),e.ssFallback=s?normalizeSuspenseSlot(i.fallback):createVNode(Comment$1)}function normalizeSuspenseSlot(e){let t;if(isFunction$1(e)){const i=isBlockTreeEnabled&&e._c;i&&(e._d=!1,openBlock()),e=e(),i&&(e._d=!0,t=currentBlock,closeBlock())}if(isArray$7(e)){const i=filterSingleRoot(e);process.env.NODE_ENV!=="production"&&!i&&warn$2("<Suspense> slots expect a single root node."),e=i}return e=normalizeVNode$1(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(i=>i!==e)),e}function queueEffectWithSuspense(e,t){t&&t.pendingBranch?isArray$7(e)?t.effects.push(...e):t.effects.push(e):queuePostFlushCb(e)}function setActiveBranch(e,t){e.activeBranch=t;const{vnode:i,parentComponent:s}=e,c=i.el=t.el;s&&s.subTree===i&&(s.vnode.el=c,updateHOCHostEl(s,c))}function provide(e,t){if(!currentInstance)process.env.NODE_ENV!=="production"&&warn$2("provide() can only be used inside setup().");else{let i=currentInstance.provides;const s=currentInstance.parent&&currentInstance.parent.provides;s===i&&(i=currentInstance.provides=Object.create(s)),i[e]=t}}function inject(e,t,i=!1){const s=currentInstance||currentRenderingInstance;if(s){const c=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(c&&e in c)return c[e];if(arguments.length>1)return i&&isFunction$1(t)?t.call(s.proxy):t;process.env.NODE_ENV!=="production"&&warn$2(`injection "${String(e)}" not found.`)}else process.env.NODE_ENV!=="production"&&warn$2("inject() can only be used inside setup() or functional components.")}function watchEffect(e,t){return doWatch(e,null,t)}function watchPostEffect(e,t){return doWatch(e,null,process.env.NODE_ENV!=="production"?Object.assign(Object.assign({},t),{flush:"post"}):{flush:"post"})}function watchSyncEffect(e,t){return doWatch(e,null,process.env.NODE_ENV!=="production"?Object.assign(Object.assign({},t),{flush:"sync"}):{flush:"sync"})}const INITIAL_WATCHER_VALUE={};function watch(e,t,i){return process.env.NODE_ENV!=="production"&&!isFunction$1(t)&&warn$2("`watch(fn, options?)` signature has been moved to a separate API. Use `watchEffect(fn, options?)` instead. `watch` now only supports `watch(source, cb, options?) signature."),doWatch(e,t,i)}function doWatch(e,t,{immediate:i,deep:s,flush:c,onTrack:d,onTrigger:g}=EMPTY_OBJ){process.env.NODE_ENV!=="production"&&!t&&(i!==void 0&&warn$2('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),s!==void 0&&warn$2('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'));const r=z=>{warn$2("Invalid watch source: ",z,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},y=currentInstance;let E,w=!1,k=!1;if(isRef$1(e)?(E=()=>e.value,w=isShallow$1(e)):isReactive(e)?(E=()=>e,s=!0):isArray$7(e)?(k=!0,w=e.some(z=>isReactive(z)||isShallow$1(z)),E=()=>e.map(z=>{if(isRef$1(z))return z.value;if(isReactive(z))return traverse(z);if(isFunction$1(z))return callWithErrorHandling$1(z,y,2);process.env.NODE_ENV!=="production"&&r(z)})):isFunction$1(e)?t?E=()=>callWithErrorHandling$1(e,y,2):E=()=>{if(!(y&&y.isUnmounted))return S&&S(),callWithAsyncErrorHandling(e,y,3,[I])}:(E=NOOP,process.env.NODE_ENV!=="production"&&r(e)),t&&s){const z=E;E=()=>traverse(z())}let S,I=z=>{S=V.onStop=()=>{callWithErrorHandling$1(z,y,4)}};if(isInSSRComponentSetup)return I=NOOP,t?i&&callWithAsyncErrorHandling(t,y,3,[E(),k?[]:void 0,I]):E(),NOOP;let L=k?[]:INITIAL_WATCHER_VALUE;const D=()=>{if(!!V.active)if(t){const z=V.run();(s||w||(k?z.some((U,Z)=>hasChanged(U,L[Z])):hasChanged(z,L)))&&(S&&S(),callWithAsyncErrorHandling(t,y,3,[z,L===INITIAL_WATCHER_VALUE?void 0:L,I]),L=z)}else V.run()};D.allowRecurse=!!t;let O;c==="sync"?O=D:c==="post"?O=()=>queuePostRenderEffect(D,y&&y.suspense):O=()=>queuePreFlushCb(D);const V=new ReactiveEffect(E,O);return process.env.NODE_ENV!=="production"&&(V.onTrack=d,V.onTrigger=g),t?i?D():L=V.run():c==="post"?queuePostRenderEffect(V.run.bind(V),y&&y.suspense):V.run(),()=>{V.stop(),y&&y.scope&&remove$2(y.scope.effects,V)}}function instanceWatch(e,t,i){const s=this.proxy,c=isString$2(e)?e.includes(".")?createPathGetter(s,e):()=>s[e]:e.bind(s,s);let d;isFunction$1(t)?d=t:(d=t.handler,i=t);const g=currentInstance;setCurrentInstance(this);const r=doWatch(c,d.bind(s),i);return g?setCurrentInstance(g):unsetCurrentInstance(),r}function createPathGetter(e,t){const i=t.split(".");return()=>{let s=e;for(let c=0;c<i.length&&s;c++)s=s[i[c]];return s}}function traverse(e,t){if(!isObject$6(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),isRef$1(e))traverse(e.value,t);else if(isArray$7(e))for(let i=0;i<e.length;i++)traverse(e[i],t);else if(isSet$1(e)||isMap$1(e))e.forEach(i=>{traverse(i,t)});else if(isPlainObject$1(e))for(const i in e)traverse(e[i],t);return e}function useTransitionState(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{e.isMounted=!0}),onBeforeUnmount(()=>{e.isUnmounting=!0}),e}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(e,{slots:t}){const i=getCurrentInstance(),s=useTransitionState();let c;return()=>{const d=t.default&&getTransitionRawChildren(t.default(),!0);if(!d||!d.length)return;let g=d[0];if(d.length>1){let D=!1;for(const O of d)if(O.type!==Comment$1){if(process.env.NODE_ENV!=="production"&&D){warn$2("<transition> can only be used on a single element or component. Use <transition-group> for lists.");break}if(g=O,D=!0,process.env.NODE_ENV==="production")break}}const r=toRaw$1(e),{mode:y}=r;if(process.env.NODE_ENV!=="production"&&y&&y!=="in-out"&&y!=="out-in"&&y!=="default"&&warn$2(`invalid <transition> mode: ${y}`),s.isLeaving)return emptyPlaceholder(g);const E=getKeepAliveChild(g);if(!E)return emptyPlaceholder(g);const w=resolveTransitionHooks(E,r,s,i);setTransitionHooks(E,w);const k=i.subTree,S=k&&getKeepAliveChild(k);let I=!1;const{getTransitionKey:L}=E.type;if(L){const D=L();c===void 0?c=D:D!==c&&(c=D,I=!0)}if(S&&S.type!==Comment$1&&(!isSameVNodeType(E,S)||I)){const D=resolveTransitionHooks(S,r,s,i);if(setTransitionHooks(S,D),y==="out-in")return s.isLeaving=!0,D.afterLeave=()=>{s.isLeaving=!1,i.update()},emptyPlaceholder(g);y==="in-out"&&E.type!==Comment$1&&(D.delayLeave=(O,V,z)=>{const U=getLeavingNodesForType(s,S);U[String(S.key)]=S,O._leaveCb=()=>{V(),O._leaveCb=void 0,delete w.delayedLeave},w.delayedLeave=z})}return g}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(e,t){const{leavingVNodes:i}=e;let s=i.get(t.type);return s||(s=Object.create(null),i.set(t.type,s)),s}function resolveTransitionHooks(e,t,i,s){const{appear:c,mode:d,persisted:g=!1,onBeforeEnter:r,onEnter:y,onAfterEnter:E,onEnterCancelled:w,onBeforeLeave:k,onLeave:S,onAfterLeave:I,onLeaveCancelled:L,onBeforeAppear:D,onAppear:O,onAfterAppear:V,onAppearCancelled:z}=t,U=String(e.key),Z=getLeavingNodesForType(i,e),W=(ie,Ce)=>{ie&&callWithAsyncErrorHandling(ie,s,9,Ce)},ne=(ie,Ce)=>{const we=Ce[1];W(ie,Ce),isArray$7(ie)?ie.every(fe=>fe.length<=1)&&we():ie.length<=1&&we()},re={mode:d,persisted:g,beforeEnter(ie){let Ce=r;if(!i.isMounted)if(c)Ce=D||r;else return;ie._leaveCb&&ie._leaveCb(!0);const we=Z[U];we&&isSameVNodeType(e,we)&&we.el._leaveCb&&we.el._leaveCb(),W(Ce,[ie])},enter(ie){let Ce=y,we=E,fe=w;if(!i.isMounted)if(c)Ce=O||y,we=V||E,fe=z||w;else return;let de=!1;const Le=ie._enterCb=Ge=>{de||(de=!0,Ge?W(fe,[ie]):W(we,[ie]),re.delayedLeave&&re.delayedLeave(),ie._enterCb=void 0)};Ce?ne(Ce,[ie,Le]):Le()},leave(ie,Ce){const we=String(e.key);if(ie._enterCb&&ie._enterCb(!0),i.isUnmounting)return Ce();W(k,[ie]);let fe=!1;const de=ie._leaveCb=Le=>{fe||(fe=!0,Ce(),Le?W(L,[ie]):W(I,[ie]),ie._leaveCb=void 0,Z[we]===e&&delete Z[we])};Z[we]=e,S?ne(S,[ie,de]):de()},clone(ie){return resolveTransitionHooks(ie,t,i,s)}};return re}function emptyPlaceholder(e){if(isKeepAlive(e))return e=cloneVNode(e),e.children=null,e}function getKeepAliveChild(e){return isKeepAlive(e)?e.children?e.children[0]:void 0:e}function setTransitionHooks(e,t){e.shapeFlag&6&&e.component?setTransitionHooks(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function getTransitionRawChildren(e,t=!1,i){let s=[],c=0;for(let d=0;d<e.length;d++){let g=e[d];const r=i==null?g.key:String(i)+String(g.key!=null?g.key:d);g.type===Fragment?(g.patchFlag&128&&c++,s=s.concat(getTransitionRawChildren(g.children,t,r))):(t||g.type!==Comment$1)&&s.push(r!=null?cloneVNode(g,{key:r}):g)}if(c>1)for(let d=0;d<s.length;d++)s[d].patchFlag=-2;return s}function defineComponent(e){return isFunction$1(e)?{setup:e,name:e.name}:e}const isAsyncWrapper=e=>!!e.type.__asyncLoader;function defineAsyncComponent(e){isFunction$1(e)&&(e={loader:e});const{loader:t,loadingComponent:i,errorComponent:s,delay:c=200,timeout:d,suspensible:g=!0,onError:r}=e;let y=null,E,w=0;const k=()=>(w++,y=null,S()),S=()=>{let I;return y||(I=y=t().catch(L=>{if(L=L instanceof Error?L:new Error(String(L)),r)return new Promise((D,O)=>{r(L,()=>D(k()),()=>O(L),w+1)});throw L}).then(L=>{if(I!==y&&y)return y;if(process.env.NODE_ENV!=="production"&&!L&&warn$2("Async component loader resolved to undefined. If you are using retry(), make sure to return its return value."),L&&(L.__esModule||L[Symbol.toStringTag]==="Module")&&(L=L.default),process.env.NODE_ENV!=="production"&&L&&!isObject$6(L)&&!isFunction$1(L))throw new Error(`Invalid async component load result: ${L}`);return E=L,L}))};return defineComponent({name:"AsyncComponentWrapper",__asyncLoader:S,get __asyncResolved(){return E},setup(){const I=currentInstance;if(E)return()=>createInnerComp(E,I);const L=z=>{y=null,handleError$1(z,I,13,!s)};if(g&&I.suspense||isInSSRComponentSetup)return S().then(z=>()=>createInnerComp(z,I)).catch(z=>(L(z),()=>s?createVNode(s,{error:z}):null));const D=ref(!1),O=ref(),V=ref(!!c);return c&&setTimeout(()=>{V.value=!1},c),d!=null&&setTimeout(()=>{if(!D.value&&!O.value){const z=new Error(`Async component timed out after ${d}ms.`);L(z),O.value=z}},d),S().then(()=>{D.value=!0,I.parent&&isKeepAlive(I.parent.vnode)&&queueJob(I.parent.update)}).catch(z=>{L(z),O.value=z}),()=>{if(D.value&&E)return createInnerComp(E,I);if(O.value&&s)return createVNode(s,{error:O.value});if(i&&!V.value)return createVNode(i)}}})}function createInnerComp(e,{vnode:{ref:t,props:i,children:s,shapeFlag:c},parent:d}){const g=createVNode(e,i,s);return g.ref=t,g}const isKeepAlive=e=>e.type.__isKeepAlive,KeepAliveImpl={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const i=getCurrentInstance(),s=i.ctx;if(!s.renderer)return()=>{const z=t.default&&t.default();return z&&z.length===1?z[0]:z};const c=new Map,d=new Set;let g=null;process.env.NODE_ENV!=="production"&&(i.__v_cache=c);const r=i.suspense,{renderer:{p:y,m:E,um:w,o:{createElement:k}}}=s,S=k("div");s.activate=(z,U,Z,W,ne)=>{const re=z.component;E(z,U,Z,0,r),y(re.vnode,z,U,Z,re,r,W,z.slotScopeIds,ne),queuePostRenderEffect(()=>{re.isDeactivated=!1,re.a&&invokeArrayFns(re.a);const ie=z.props&&z.props.onVnodeMounted;ie&&invokeVNodeHook(ie,re.parent,z)},r),process.env.NODE_ENV!=="production"&&devtoolsComponentAdded(re)},s.deactivate=z=>{const U=z.component;E(z,S,null,1,r),queuePostRenderEffect(()=>{U.da&&invokeArrayFns(U.da);const Z=z.props&&z.props.onVnodeUnmounted;Z&&invokeVNodeHook(Z,U.parent,z),U.isDeactivated=!0},r),process.env.NODE_ENV!=="production"&&devtoolsComponentAdded(U)};function I(z){resetShapeFlag(z),w(z,i,r,!0)}function L(z){c.forEach((U,Z)=>{const W=getComponentName$1(U.type);W&&(!z||!z(W))&&D(Z)})}function D(z){const U=c.get(z);!g||U.type!==g.type?I(U):g&&resetShapeFlag(g),c.delete(z),d.delete(z)}watch(()=>[e.include,e.exclude],([z,U])=>{z&&L(Z=>matches(z,Z)),U&&L(Z=>!matches(U,Z))},{flush:"post",deep:!0});let O=null;const V=()=>{O!=null&&c.set(O,getInnerChild(i.subTree))};return onMounted(V),onUpdated(V),onBeforeUnmount(()=>{c.forEach(z=>{const{subTree:U,suspense:Z}=i,W=getInnerChild(U);if(z.type===W.type){resetShapeFlag(W);const ne=W.component.da;ne&&queuePostRenderEffect(ne,Z);return}I(z)})}),()=>{if(O=null,!t.default)return null;const z=t.default(),U=z[0];if(z.length>1)return process.env.NODE_ENV!=="production"&&warn$2("KeepAlive should contain exactly one component child."),g=null,z;if(!isVNode$1(U)||!(U.shapeFlag&4)&&!(U.shapeFlag&128))return g=null,U;let Z=getInnerChild(U);const W=Z.type,ne=getComponentName$1(isAsyncWrapper(Z)?Z.type.__asyncResolved||{}:W),{include:re,exclude:ie,max:Ce}=e;if(re&&(!ne||!matches(re,ne))||ie&&ne&&matches(ie,ne))return g=Z,U;const we=Z.key==null?W:Z.key,fe=c.get(we);return Z.el&&(Z=cloneVNode(Z),U.shapeFlag&128&&(U.ssContent=Z)),O=we,fe?(Z.el=fe.el,Z.component=fe.component,Z.transition&&setTransitionHooks(Z,Z.transition),Z.shapeFlag|=512,d.delete(we),d.add(we)):(d.add(we),Ce&&d.size>parseInt(Ce,10)&&D(d.values().next().value)),Z.shapeFlag|=256,g=Z,isSuspense(U.type)?U:Z}}},KeepAlive=KeepAliveImpl;function matches(e,t){return isArray$7(e)?e.some(i=>matches(i,t)):isString$2(e)?e.split(",").includes(t):e.test?e.test(t):!1}function onActivated(e,t){registerKeepAliveHook(e,"a",t)}function onDeactivated(e,t){registerKeepAliveHook(e,"da",t)}function registerKeepAliveHook(e,t,i=currentInstance){const s=e.__wdc||(e.__wdc=()=>{let c=i;for(;c;){if(c.isDeactivated)return;c=c.parent}return e()});if(injectHook(t,s,i),i){let c=i.parent;for(;c&&c.parent;)isKeepAlive(c.parent.vnode)&&injectToKeepAliveRoot(s,t,i,c),c=c.parent}}function injectToKeepAliveRoot(e,t,i,s){const c=injectHook(t,e,s,!0);onUnmounted(()=>{remove$2(s[t],c)},i)}function resetShapeFlag(e){let t=e.shapeFlag;t&256&&(t-=256),t&512&&(t-=512),e.shapeFlag=t}function getInnerChild(e){return e.shapeFlag&128?e.ssContent:e}function injectHook(e,t,i=currentInstance,s=!1){if(i){const c=i[e]||(i[e]=[]),d=t.__weh||(t.__weh=(...g)=>{if(i.isUnmounted)return;pauseTracking(),setCurrentInstance(i);const r=callWithAsyncErrorHandling(t,i,e,g);return unsetCurrentInstance(),resetTracking(),r});return s?c.unshift(d):c.push(d),d}else if(process.env.NODE_ENV!=="production"){const c=toHandlerKey(ErrorTypeStrings$1[e].replace(/ hook$/,""));warn$2(`${c} is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.`)}}const createHook=e=>(t,i=currentInstance)=>(!isInSSRComponentSetup||e==="sp")&&injectHook(e,t,i),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,t=currentInstance){injectHook("ec",e,t)}function validateDirectiveName(e){isBuiltInDirective(e)&&warn$2("Do not use built-in directive ids as custom directive id: "+e)}function withDirectives(e,t){const i=currentRenderingInstance;if(i===null)return process.env.NODE_ENV!=="production"&&warn$2("withDirectives can only be used inside render functions."),e;const s=getExposeProxy(i)||i.proxy,c=e.dirs||(e.dirs=[]);for(let d=0;d<t.length;d++){let[g,r,y,E=EMPTY_OBJ]=t[d];isFunction$1(g)&&(g={mounted:g,updated:g}),g.deep&&traverse(r),c.push({dir:g,instance:s,value:r,oldValue:void 0,arg:y,modifiers:E})}return e}function invokeDirectiveHook(e,t,i,s){const c=e.dirs,d=t&&t.dirs;for(let g=0;g<c.length;g++){const r=c[g];d&&(r.oldValue=d[g].value);let y=r.dir[s];y&&(pauseTracking(),callWithAsyncErrorHandling(y,i,8,[e.el,r,e,t]),resetTracking())}}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(e,t){return resolveAsset(COMPONENTS,e,!0,t)||e}const NULL_DYNAMIC_COMPONENT=Symbol();function resolveDynamicComponent(e){return isString$2(e)?resolveAsset(COMPONENTS,e,!1)||e:e||NULL_DYNAMIC_COMPONENT}function resolveDirective(e){return resolveAsset(DIRECTIVES,e)}function resolveAsset(e,t,i=!0,s=!1){const c=currentRenderingInstance||currentInstance;if(c){const d=c.type;if(e===COMPONENTS){const r=getComponentName$1(d,!1);if(r&&(r===t||r===camelize(t)||r===capitalize$1(camelize(t))))return d}const g=resolve(c[e]||d[e],t)||resolve(c.appContext[e],t);if(!g&&s)return d;if(process.env.NODE_ENV!=="production"&&i&&!g){const r=e===COMPONENTS?`
If this is a native custom element, make sure to exclude it from component resolution via compilerOptions.isCustomElement.`:"";warn$2(`Failed to resolve ${e.slice(0,-1)}: ${t}${r}`)}return g}else process.env.NODE_ENV!=="production"&&warn$2(`resolve${capitalize$1(e.slice(0,-1))} can only be used in render() or setup().`)}function resolve(e,t){return e&&(e[t]||e[camelize(t)]||e[capitalize$1(camelize(t))])}function renderList(e,t,i,s){let c;const d=i&&i[s];if(isArray$7(e)||isString$2(e)){c=new Array(e.length);for(let g=0,r=e.length;g<r;g++)c[g]=t(e[g],g,void 0,d&&d[g])}else if(typeof e=="number"){process.env.NODE_ENV!=="production"&&!Number.isInteger(e)&&warn$2(`The v-for range expect an integer value but got ${e}.`),c=new Array(e);for(let g=0;g<e;g++)c[g]=t(g+1,g,void 0,d&&d[g])}else if(isObject$6(e))if(e[Symbol.iterator])c=Array.from(e,(g,r)=>t(g,r,void 0,d&&d[r]));else{const g=Object.keys(e);c=new Array(g.length);for(let r=0,y=g.length;r<y;r++){const E=g[r];c[r]=t(e[E],E,r,d&&d[r])}}else c=[];return i&&(i[s]=c),c}function createSlots(e,t){for(let i=0;i<t.length;i++){const s=t[i];if(isArray$7(s))for(let c=0;c<s.length;c++)e[s[c].name]=s[c].fn;else s&&(e[s.name]=s.fn)}return e}function renderSlot(e,t,i={},s,c){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return createVNode("slot",t==="default"?null:{name:t},s&&s());let d=e[t];process.env.NODE_ENV!=="production"&&d&&d.length>1&&(warn$2("SSR-optimized slot function detected in a non-SSR-optimized render function. You need to mark this component with $dynamic-slots in the parent template."),d=()=>[]),d&&d._c&&(d._d=!1),openBlock();const g=d&&ensureValidVNode(d(i)),r=createBlock(Fragment,{key:i.key||`_${t}`},g||(s?s():[]),g&&e._===1?64:-2);return!c&&r.scopeId&&(r.slotScopeIds=[r.scopeId+"-s"]),d&&d._c&&(d._d=!0),r}function ensureValidVNode(e){return e.some(t=>isVNode$1(t)?!(t.type===Comment$1||t.type===Fragment&&!ensureValidVNode(t.children)):!0)?e:null}function toHandlers(e){const t={};if(process.env.NODE_ENV!=="production"&&!isObject$6(e))return warn$2("v-on with no argument expects an object value."),t;for(const i in e)t[toHandlerKey(i)]=e[i];return t}const getPublicInstance=e=>e?isStatefulComponent(e)?getExposeProxy(e)||e.proxy:getPublicInstance(e.parent):null,publicPropertiesMap=extend$4(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>process.env.NODE_ENV!=="production"?shallowReadonly(e.props):e.props,$attrs:e=>process.env.NODE_ENV!=="production"?shallowReadonly(e.attrs):e.attrs,$slots:e=>process.env.NODE_ENV!=="production"?shallowReadonly(e.slots):e.slots,$refs:e=>process.env.NODE_ENV!=="production"?shallowReadonly(e.refs):e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>queueJob(e.update)),$nextTick:e=>e.n||(e.n=nextTick$1.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),isReservedPrefix=e=>e==="_"||e==="$",PublicInstanceProxyHandlers={get({_:e},t){const{ctx:i,setupState:s,data:c,props:d,accessCache:g,type:r,appContext:y}=e;if(process.env.NODE_ENV!=="production"&&t==="__isVue")return!0;if(process.env.NODE_ENV!=="production"&&s!==EMPTY_OBJ&&s.__isScriptSetup&&hasOwn$2(s,t))return s[t];let E;if(t[0]!=="$"){const I=g[t];if(I!==void 0)switch(I){case 1:return s[t];case 2:return c[t];case 4:return i[t];case 3:return d[t]}else{if(s!==EMPTY_OBJ&&hasOwn$2(s,t))return g[t]=1,s[t];if(c!==EMPTY_OBJ&&hasOwn$2(c,t))return g[t]=2,c[t];if((E=e.propsOptions[0])&&hasOwn$2(E,t))return g[t]=3,d[t];if(i!==EMPTY_OBJ&&hasOwn$2(i,t))return g[t]=4,i[t];shouldCacheAccess&&(g[t]=0)}}const w=publicPropertiesMap[t];let k,S;if(w)return t==="$attrs"&&(track(e,"get",t),process.env.NODE_ENV!=="production"&&markAttrsAccessed()),w(e);if((k=r.__cssModules)&&(k=k[t]))return k;if(i!==EMPTY_OBJ&&hasOwn$2(i,t))return g[t]=4,i[t];if(S=y.config.globalProperties,hasOwn$2(S,t))return S[t];process.env.NODE_ENV!=="production"&&currentRenderingInstance&&(!isString$2(t)||t.indexOf("__v")!==0)&&(c!==EMPTY_OBJ&&isReservedPrefix(t[0])&&hasOwn$2(c,t)?warn$2(`Property ${JSON.stringify(t)} must be accessed via $data because it starts with a reserved character ("$" or "_") and is not proxied on the render context.`):e===currentRenderingInstance&&warn$2(`Property ${JSON.stringify(t)} was accessed during render but is not defined on instance.`))},set({_:e},t,i){const{data:s,setupState:c,ctx:d}=e;return c!==EMPTY_OBJ&&hasOwn$2(c,t)?(c[t]=i,!0):s!==EMPTY_OBJ&&hasOwn$2(s,t)?(s[t]=i,!0):hasOwn$2(e.props,t)?(process.env.NODE_ENV!=="production"&&warn$2(`Attempting to mutate prop "${t}". Props are readonly.`,e),!1):t[0]==="$"&&t.slice(1)in e?(process.env.NODE_ENV!=="production"&&warn$2(`Attempting to mutate public property "${t}". Properties starting with $ are reserved and readonly.`,e),!1):(process.env.NODE_ENV!=="production"&&t in e.appContext.config.globalProperties?Object.defineProperty(d,t,{enumerable:!0,configurable:!0,value:i}):d[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:s,appContext:c,propsOptions:d}},g){let r;return!!i[g]||e!==EMPTY_OBJ&&hasOwn$2(e,g)||t!==EMPTY_OBJ&&hasOwn$2(t,g)||(r=d[0])&&hasOwn$2(r,g)||hasOwn$2(s,g)||hasOwn$2(publicPropertiesMap,g)||hasOwn$2(c.config.globalProperties,g)},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:hasOwn$2(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};process.env.NODE_ENV!=="production"&&(PublicInstanceProxyHandlers.ownKeys=e=>(warn$2("Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead."),Reflect.ownKeys(e)));const RuntimeCompiledPublicInstanceProxyHandlers=extend$4({},PublicInstanceProxyHandlers,{get(e,t){if(t!==Symbol.unscopables)return PublicInstanceProxyHandlers.get(e,t,e)},has(e,t){const i=t[0]!=="_"&&!isGloballyWhitelisted(t);return process.env.NODE_ENV!=="production"&&!i&&PublicInstanceProxyHandlers.has(e,t)&&warn$2(`Property ${JSON.stringify(t)} should not start with _ which is a reserved prefix for Vue internals.`),i}});function createDevRenderContext(e){const t={};return Object.defineProperty(t,"_",{configurable:!0,enumerable:!1,get:()=>e}),Object.keys(publicPropertiesMap).forEach(i=>{Object.defineProperty(t,i,{configurable:!0,enumerable:!1,get:()=>publicPropertiesMap[i](e),set:NOOP})}),t}function exposePropsOnRenderContext(e){const{ctx:t,propsOptions:[i]}=e;i&&Object.keys(i).forEach(s=>{Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>e.props[s],set:NOOP})})}function exposeSetupStateOnRenderContext(e){const{ctx:t,setupState:i}=e;Object.keys(toRaw$1(i)).forEach(s=>{if(!i.__isScriptSetup){if(isReservedPrefix(s[0])){warn$2(`setup() return property ${JSON.stringify(s)} should not start with "$" or "_" which are reserved prefixes for Vue internals.`);return}Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>i[s],set:NOOP})}})}function createDuplicateChecker(){const e=Object.create(null);return(t,i)=>{e[i]?warn$2(`${t} property "${i}" is already defined in ${e[i]}.`):e[i]=t}}let shouldCacheAccess=!0;function applyOptions(e){const t=resolveMergedOptions(e),i=e.proxy,s=e.ctx;shouldCacheAccess=!1,t.beforeCreate&&callHook$1(t.beforeCreate,e,"bc");const{data:c,computed:d,methods:g,watch:r,provide:y,inject:E,created:w,beforeMount:k,mounted:S,beforeUpdate:I,updated:L,activated:D,deactivated:O,beforeDestroy:V,beforeUnmount:z,destroyed:U,unmounted:Z,render:W,renderTracked:ne,renderTriggered:re,errorCaptured:ie,serverPrefetch:Ce,expose:we,inheritAttrs:fe,components:de,directives:Le,filters:Ge}=t,wt=process.env.NODE_ENV!=="production"?createDuplicateChecker():null;if(process.env.NODE_ENV!=="production"){const[ze]=e.propsOptions;if(ze)for(const Ke in ze)wt("Props",Ke)}if(E&&resolveInjections(E,s,wt,e.appContext.config.unwrapInjectedRef),g)for(const ze in g){const Ke=g[ze];isFunction$1(Ke)?(process.env.NODE_ENV!=="production"?Object.defineProperty(s,ze,{value:Ke.bind(i),configurable:!0,enumerable:!0,writable:!0}):s[ze]=Ke.bind(i),process.env.NODE_ENV!=="production"&&wt("Methods",ze)):process.env.NODE_ENV!=="production"&&warn$2(`Method "${ze}" has type "${typeof Ke}" in the component definition. Did you reference the function correctly?`)}if(c){process.env.NODE_ENV!=="production"&&!isFunction$1(c)&&warn$2("The data option must be a function. Plain object usage is no longer supported.");const ze=c.call(i,i);if(process.env.NODE_ENV!=="production"&&isPromise(ze)&&warn$2("data() returned a Promise - note data() cannot be async; If you intend to perform data fetching before component renders, use async setup() + <Suspense>."),!isObject$6(ze))process.env.NODE_ENV!=="production"&&warn$2("data() should return an object.");else if(e.data=reactive(ze),process.env.NODE_ENV!=="production")for(const Ke in ze)wt("Data",Ke),isReservedPrefix(Ke[0])||Object.defineProperty(s,Ke,{configurable:!0,enumerable:!0,get:()=>ze[Ke],set:NOOP})}if(shouldCacheAccess=!0,d)for(const ze in d){const Ke=d[ze],ut=isFunction$1(Ke)?Ke.bind(i,i):isFunction$1(Ke.get)?Ke.get.bind(i,i):NOOP;process.env.NODE_ENV!=="production"&&ut===NOOP&&warn$2(`Computed property "${ze}" has no getter.`);const Nt=!isFunction$1(Ke)&&isFunction$1(Ke.set)?Ke.set.bind(i):process.env.NODE_ENV!=="production"?()=>{warn$2(`Write operation failed: computed property "${ze}" is readonly.`)}:NOOP,an=computed({get:ut,set:Nt});Object.defineProperty(s,ze,{enumerable:!0,configurable:!0,get:()=>an.value,set:un=>an.value=un}),process.env.NODE_ENV!=="production"&&wt("Computed",ze)}if(r)for(const ze in r)createWatcher(r[ze],s,i,ze);if(y){const ze=isFunction$1(y)?y.call(i):y;Reflect.ownKeys(ze).forEach(Ke=>{provide(Ke,ze[Ke])})}w&&callHook$1(w,e,"c");function Te(ze,Ke){isArray$7(Ke)?Ke.forEach(ut=>ze(ut.bind(i))):Ke&&ze(Ke.bind(i))}if(Te(onBeforeMount,k),Te(onMounted,S),Te(onBeforeUpdate,I),Te(onUpdated,L),Te(onActivated,D),Te(onDeactivated,O),Te(onErrorCaptured,ie),Te(onRenderTracked,ne),Te(onRenderTriggered,re),Te(onBeforeUnmount,z),Te(onUnmounted,Z),Te(onServerPrefetch,Ce),isArray$7(we))if(we.length){const ze=e.exposed||(e.exposed={});we.forEach(Ke=>{Object.defineProperty(ze,Ke,{get:()=>i[Ke],set:ut=>i[Ke]=ut})})}else e.exposed||(e.exposed={});W&&e.render===NOOP&&(e.render=W),fe!=null&&(e.inheritAttrs=fe),de&&(e.components=de),Le&&(e.directives=Le)}function resolveInjections(e,t,i=NOOP,s=!1){isArray$7(e)&&(e=normalizeInject(e));for(const c in e){const d=e[c];let g;isObject$6(d)?"default"in d?g=inject(d.from||c,d.default,!0):g=inject(d.from||c):g=inject(d),isRef$1(g)?s?Object.defineProperty(t,c,{enumerable:!0,configurable:!0,get:()=>g.value,set:r=>g.value=r}):(process.env.NODE_ENV!=="production"&&warn$2(`injected property "${c}" is a ref and will be auto-unwrapped and no longer needs \`.value\` in the next minor release. To opt-in to the new behavior now, set \`app.config.unwrapInjectedRef = true\` (this config is temporary and will not be needed in the future.)`),t[c]=g):t[c]=g,process.env.NODE_ENV!=="production"&&i("Inject",c)}}function callHook$1(e,t,i){callWithAsyncErrorHandling(isArray$7(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,i)}function createWatcher(e,t,i,s){const c=s.includes(".")?createPathGetter(i,s):()=>i[s];if(isString$2(e)){const d=t[e];isFunction$1(d)?watch(c,d):process.env.NODE_ENV!=="production"&&warn$2(`Invalid watch handler specified by key "${e}"`,d)}else if(isFunction$1(e))watch(c,e.bind(i));else if(isObject$6(e))if(isArray$7(e))e.forEach(d=>createWatcher(d,t,i,s));else{const d=isFunction$1(e.handler)?e.handler.bind(i):t[e.handler];isFunction$1(d)?watch(c,d,e):process.env.NODE_ENV!=="production"&&warn$2(`Invalid watch handler specified by key "${e.handler}"`,d)}else process.env.NODE_ENV!=="production"&&warn$2(`Invalid watch option: "${s}"`,e)}function resolveMergedOptions(e){const t=e.type,{mixins:i,extends:s}=t,{mixins:c,optionsCache:d,config:{optionMergeStrategies:g}}=e.appContext,r=d.get(t);let y;return r?y=r:!c.length&&!i&&!s?y=t:(y={},c.length&&c.forEach(E=>mergeOptions(y,E,g,!0)),mergeOptions(y,t,g)),d.set(t,y),y}function mergeOptions(e,t,i,s=!1){const{mixins:c,extends:d}=t;d&&mergeOptions(e,d,i,!0),c&&c.forEach(g=>mergeOptions(e,g,i,!0));for(const g in t)if(s&&g==="expose")process.env.NODE_ENV!=="production"&&warn$2('"expose" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.');else{const r=internalOptionMergeStrats[g]||i&&i[g];e[g]=r?r(e[g],t[g]):t[g]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,t){return t?e?function(){return extend$4(isFunction$1(e)?e.call(this,this):e,isFunction$1(t)?t.call(this,this):t)}:t:e}function mergeInject(e,t){return mergeObjectOptions(normalizeInject(e),normalizeInject(t))}function normalizeInject(e){if(isArray$7(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function mergeAsArray(e,t){return e?[...new Set([].concat(e,t))]:t}function mergeObjectOptions(e,t){return e?extend$4(extend$4(Object.create(null),e),t):t}function mergeWatchOptions(e,t){if(!e)return t;if(!t)return e;const i=extend$4(Object.create(null),e);for(const s in t)i[s]=mergeAsArray(e[s],t[s]);return i}function initProps(e,t,i,s=!1){const c={},d={};def(d,InternalObjectKey,1),e.propsDefaults=Object.create(null),setFullProps(e,t,c,d);for(const g in e.propsOptions[0])g in c||(c[g]=void 0);process.env.NODE_ENV!=="production"&&validateProps(t||{},c,e),i?e.props=s?c:shallowReactive(c):e.type.props?e.props=c:e.props=d,e.attrs=d}function updateProps(e,t,i,s){const{props:c,attrs:d,vnode:{patchFlag:g}}=e,r=toRaw$1(c),[y]=e.propsOptions;let E=!1;if(!(process.env.NODE_ENV!=="production"&&(e.type.__hmrId||e.parent&&e.parent.type.__hmrId))&&(s||g>0)&&!(g&16)){if(g&8){const w=e.vnode.dynamicProps;for(let k=0;k<w.length;k++){let S=w[k];if(isEmitListener(e.emitsOptions,S))continue;const I=t[S];if(y)if(hasOwn$2(d,S))I!==d[S]&&(d[S]=I,E=!0);else{const L=camelize(S);c[L]=resolvePropValue(y,r,L,I,e,!1)}else I!==d[S]&&(d[S]=I,E=!0)}}}else{setFullProps(e,t,c,d)&&(E=!0);let w;for(const k in r)(!t||!hasOwn$2(t,k)&&((w=hyphenate(k))===k||!hasOwn$2(t,w)))&&(y?i&&(i[k]!==void 0||i[w]!==void 0)&&(c[k]=resolvePropValue(y,r,k,void 0,e,!0)):delete c[k]);if(d!==r)for(const k in d)(!t||!hasOwn$2(t,k)&&!0)&&(delete d[k],E=!0)}E&&trigger$1(e,"set","$attrs"),process.env.NODE_ENV!=="production"&&validateProps(t||{},c,e)}function setFullProps(e,t,i,s){const[c,d]=e.propsOptions;let g=!1,r;if(t)for(let y in t){if(isReservedProp(y))continue;const E=t[y];let w;c&&hasOwn$2(c,w=camelize(y))?!d||!d.includes(w)?i[w]=E:(r||(r={}))[w]=E:isEmitListener(e.emitsOptions,y)||(!(y in s)||E!==s[y])&&(s[y]=E,g=!0)}if(d){const y=toRaw$1(i),E=r||EMPTY_OBJ;for(let w=0;w<d.length;w++){const k=d[w];i[k]=resolvePropValue(c,y,k,E[k],e,!hasOwn$2(E,k))}}return g}function resolvePropValue(e,t,i,s,c,d){const g=e[i];if(g!=null){const r=hasOwn$2(g,"default");if(r&&s===void 0){const y=g.default;if(g.type!==Function&&isFunction$1(y)){const{propsDefaults:E}=c;i in E?s=E[i]:(setCurrentInstance(c),s=E[i]=y.call(null,t),unsetCurrentInstance())}else s=y}g[0]&&(d&&!r?s=!1:g[1]&&(s===""||s===hyphenate(i))&&(s=!0))}return s}function normalizePropsOptions(e,t,i=!1){const s=t.propsCache,c=s.get(e);if(c)return c;const d=e.props,g={},r=[];let y=!1;if(!isFunction$1(e)){const w=k=>{y=!0;const[S,I]=normalizePropsOptions(k,t,!0);extend$4(g,S),I&&r.push(...I)};!i&&t.mixins.length&&t.mixins.forEach(w),e.extends&&w(e.extends),e.mixins&&e.mixins.forEach(w)}if(!d&&!y)return s.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray$7(d))for(let w=0;w<d.length;w++){process.env.NODE_ENV!=="production"&&!isString$2(d[w])&&warn$2("props must be strings when using array syntax.",d[w]);const k=camelize(d[w]);validatePropName(k)&&(g[k]=EMPTY_OBJ)}else if(d){process.env.NODE_ENV!=="production"&&!isObject$6(d)&&warn$2("invalid props options",d);for(const w in d){const k=camelize(w);if(validatePropName(k)){const S=d[w],I=g[k]=isArray$7(S)||isFunction$1(S)?{type:S}:S;if(I){const L=getTypeIndex(Boolean,I.type),D=getTypeIndex(String,I.type);I[0]=L>-1,I[1]=D<0||L<D,(L>-1||hasOwn$2(I,"default"))&&r.push(k)}}}}const E=[g,r];return s.set(e,E),E}function validatePropName(e){return e[0]!=="$"?!0:(process.env.NODE_ENV!=="production"&&warn$2(`Invalid prop name: "${e}" is a reserved property.`),!1)}function getType(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function isSameType(e,t){return getType(e)===getType(t)}function getTypeIndex(e,t){return isArray$7(t)?t.findIndex(i=>isSameType(i,e)):isFunction$1(t)&&isSameType(t,e)?0:-1}function validateProps(e,t,i){const s=toRaw$1(t),c=i.propsOptions[0];for(const d in c){let g=c[d];g!=null&&validateProp(d,s[d],g,!hasOwn$2(e,d)&&!hasOwn$2(e,hyphenate(d)))}}function validateProp(e,t,i,s){const{type:c,required:d,validator:g}=i;if(d&&s){warn$2('Missing required prop: "'+e+'"');return}if(!(t==null&&!i.required)){if(c!=null&&c!==!0){let r=!1;const y=isArray$7(c)?c:[c],E=[];for(let w=0;w<y.length&&!r;w++){const{valid:k,expectedType:S}=assertType(t,y[w]);E.push(S||""),r=k}if(!r){warn$2(getInvalidTypeMessage(e,t,E));return}}g&&!g(t)&&warn$2('Invalid prop: custom validator check failed for prop "'+e+'".')}}const isSimpleType=makeMap("String,Number,Boolean,Function,Symbol,BigInt");function assertType(e,t){let i;const s=getType(t);if(isSimpleType(s)){const c=typeof e;i=c===s.toLowerCase(),!i&&c==="object"&&(i=e instanceof t)}else s==="Object"?i=isObject$6(e):s==="Array"?i=isArray$7(e):s==="null"?i=e===null:i=e instanceof t;return{valid:i,expectedType:s}}function getInvalidTypeMessage(e,t,i){let s=`Invalid prop: type check failed for prop "${e}". Expected ${i.map(capitalize$1).join(" | ")}`;const c=i[0],d=toRawType(t),g=styleValue(t,c),r=styleValue(t,d);return i.length===1&&isExplicable(c)&&!isBoolean$1(c,d)&&(s+=` with value ${g}`),s+=`, got ${d} `,isExplicable(d)&&(s+=`with value ${r}.`),s}function styleValue(e,t){return t==="String"?`"${e}"`:t==="Number"?`${Number(e)}`:`${e}`}function isExplicable(e){return["string","number","boolean"].some(i=>e.toLowerCase()===i)}function isBoolean$1(...e){return e.some(t=>t.toLowerCase()==="boolean")}const isInternalKey=e=>e[0]==="_"||e==="$stable",normalizeSlotValue=e=>isArray$7(e)?e.map(normalizeVNode$1):[normalizeVNode$1(e)],normalizeSlot=(e,t,i)=>{if(t._n)return t;const s=withCtx((...c)=>(process.env.NODE_ENV!=="production"&&currentInstance&&warn$2(`Slot "${e}" invoked outside of the render function: this will not track dependencies used in the slot. Invoke the slot function inside the render function instead.`),normalizeSlotValue(t(...c))),i);return s._c=!1,s},normalizeObjectSlots=(e,t,i)=>{const s=e._ctx;for(const c in e){if(isInternalKey(c))continue;const d=e[c];if(isFunction$1(d))t[c]=normalizeSlot(c,d,s);else if(d!=null){process.env.NODE_ENV!=="production"&&warn$2(`Non-function value encountered for slot "${c}". Prefer function slots for better performance.`);const g=normalizeSlotValue(d);t[c]=()=>g}}},normalizeVNodeSlots=(e,t)=>{process.env.NODE_ENV!=="production"&&!isKeepAlive(e.vnode)&&warn$2("Non-function value encountered for default slot. Prefer function slots for better performance.");const i=normalizeSlotValue(t);e.slots.default=()=>i},initSlots=(e,t)=>{if(e.vnode.shapeFlag&32){const i=t._;i?(e.slots=toRaw$1(t),def(t,"_",i)):normalizeObjectSlots(t,e.slots={})}else e.slots={},t&&normalizeVNodeSlots(e,t);def(e.slots,InternalObjectKey,1)},updateSlots=(e,t,i)=>{const{vnode:s,slots:c}=e;let d=!0,g=EMPTY_OBJ;if(s.shapeFlag&32){const r=t._;r?process.env.NODE_ENV!=="production"&&isHmrUpdating?extend$4(c,t):i&&r===1?d=!1:(extend$4(c,t),!i&&r===1&&delete c._):(d=!t.$stable,normalizeObjectSlots(t,c)),g=t}else t&&(normalizeVNodeSlots(e,t),g={default:1});if(d)for(const r in c)!isInternalKey(r)&&!(r in g)&&delete c[r]};function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid=0;function createAppAPI(e,t){return function(s,c=null){isFunction$1(s)||(s=Object.assign({},s)),c!=null&&!isObject$6(c)&&(process.env.NODE_ENV!=="production"&&warn$2("root props passed to app.mount() must be an object."),c=null);const d=createAppContext(),g=new Set;let r=!1;const y=d.app={_uid:uid++,_component:s,_props:c,_container:null,_context:d,_instance:null,version:version$2,get config(){return d.config},set config(E){process.env.NODE_ENV!=="production"&&warn$2("app.config cannot be replaced. Modify individual options instead.")},use(E,...w){return g.has(E)?process.env.NODE_ENV!=="production"&&warn$2("Plugin has already been applied to target app."):E&&isFunction$1(E.install)?(g.add(E),E.install(y,...w)):isFunction$1(E)?(g.add(E),E(y,...w)):process.env.NODE_ENV!=="production"&&warn$2('A plugin must either be a function or an object with an "install" function.'),y},mixin(E){return d.mixins.includes(E)?process.env.NODE_ENV!=="production"&&warn$2("Mixin has already been applied to target app"+(E.name?`: ${E.name}`:"")):d.mixins.push(E),y},component(E,w){return process.env.NODE_ENV!=="production"&&validateComponentName(E,d.config),w?(process.env.NODE_ENV!=="production"&&d.components[E]&&warn$2(`Component "${E}" has already been registered in target app.`),d.components[E]=w,y):d.components[E]},directive(E,w){return process.env.NODE_ENV!=="production"&&validateDirectiveName(E),w?(process.env.NODE_ENV!=="production"&&d.directives[E]&&warn$2(`Directive "${E}" has already been registered in target app.`),d.directives[E]=w,y):d.directives[E]},mount(E,w,k){if(r)process.env.NODE_ENV!=="production"&&warn$2("App has already been mounted.\nIf you want to remount the same app, move your app creation logic into a factory function and create fresh app instances for each mount - e.g. `const createMyApp = () => createApp(App)`");else{process.env.NODE_ENV!=="production"&&E.__vue_app__&&warn$2("There is already an app instance mounted on the host container.\n If you want to mount another app on the same host container, you need to unmount the previous app by calling `app.unmount()` first.");const S=createVNode(s,c);return S.appContext=d,process.env.NODE_ENV!=="production"&&(d.reload=()=>{e(cloneVNode(S),E,k)}),w&&t?t(S,E):e(S,E,k),r=!0,y._container=E,E.__vue_app__=y,process.env.NODE_ENV!=="production"&&(y._instance=S.component,devtoolsInitApp(y,version$2)),getExposeProxy(S.component)||S.component.proxy}},unmount(){r?(e(null,y._container),process.env.NODE_ENV!=="production"&&(y._instance=null,devtoolsUnmountApp(y)),delete y._container.__vue_app__):process.env.NODE_ENV!=="production"&&warn$2("Cannot unmount an app that is not mounted.")},provide(E,w){return process.env.NODE_ENV!=="production"&&E in d.provides&&warn$2(`App already provides property with key "${String(E)}". It will be overwritten with the new value.`),d.provides[E]=w,y}};return y}}function setRef(e,t,i,s,c=!1){if(isArray$7(e)){e.forEach((S,I)=>setRef(S,t&&(isArray$7(t)?t[I]:t),i,s,c));return}if(isAsyncWrapper(s)&&!c)return;const d=s.shapeFlag&4?getExposeProxy(s.component)||s.component.proxy:s.el,g=c?null:d,{i:r,r:y}=e;if(process.env.NODE_ENV!=="production"&&!r){warn$2("Missing ref owner context. ref cannot be used on hoisted vnodes. A vnode with ref must be created inside the render function.");return}const E=t&&t.r,w=r.refs===EMPTY_OBJ?r.refs={}:r.refs,k=r.setupState;if(E!=null&&E!==y&&(isString$2(E)?(w[E]=null,hasOwn$2(k,E)&&(k[E]=null)):isRef$1(E)&&(E.value=null)),isFunction$1(y))callWithErrorHandling$1(y,r,12,[g,w]);else{const S=isString$2(y),I=isRef$1(y);if(S||I){const L=()=>{if(e.f){const D=S?w[y]:y.value;c?isArray$7(D)&&remove$2(D,d):isArray$7(D)?D.includes(d)||D.push(d):S?(w[y]=[d],hasOwn$2(k,y)&&(k[y]=w[y])):(y.value=[d],e.k&&(w[e.k]=y.value))}else S?(w[y]=g,hasOwn$2(k,y)&&(k[y]=g)):I?(y.value=g,e.k&&(w[e.k]=g)):process.env.NODE_ENV!=="production"&&warn$2("Invalid template ref type:",y,`(${typeof y})`)};g?(L.id=-1,queuePostRenderEffect(L,i)):L()}else process.env.NODE_ENV!=="production"&&warn$2("Invalid template ref type:",y,`(${typeof y})`)}}let hasMismatch=!1;const isSVGContainer=e=>/svg/.test(e.namespaceURI)&&e.tagName!=="foreignObject",isComment$1=e=>e.nodeType===8;function createHydrationFunctions(e){const{mt:t,p:i,o:{patchProp:s,createText:c,nextSibling:d,parentNode:g,remove:r,insert:y,createComment:E}}=e,w=(V,z)=>{if(!z.hasChildNodes()){process.env.NODE_ENV!=="production"&&warn$2("Attempting to hydrate existing markup but container is empty. Performing full mount instead."),i(null,V,z),flushPostFlushCbs(),z._vnode=V;return}hasMismatch=!1,k(z.firstChild,V,null,null,null),flushPostFlushCbs(),z._vnode=V,hasMismatch&&console.error("Hydration completed but contains mismatches.")},k=(V,z,U,Z,W,ne=!1)=>{const re=isComment$1(V)&&V.data==="[",ie=()=>D(V,z,U,Z,W,re),{type:Ce,ref:we,shapeFlag:fe,patchFlag:de}=z,Le=V.nodeType;z.el=V,de===-2&&(ne=!1,z.dynamicChildren=null);let Ge=null;switch(Ce){case Text:Le!==3?z.children===""?(y(z.el=c(""),g(V),V),Ge=V):Ge=ie():(V.data!==z.children&&(hasMismatch=!0,process.env.NODE_ENV!=="production"&&warn$2(`Hydration text mismatch:
- Client: ${JSON.stringify(V.data)}
- Server: ${JSON.stringify(z.children)}`),V.data=z.children),Ge=d(V));break;case Comment$1:Le!==8||re?Ge=ie():Ge=d(V);break;case Static:if(Le!==1&&Le!==3)Ge=ie();else{Ge=V;const wt=!z.children.length;for(let Te=0;Te<z.staticCount;Te++)wt&&(z.children+=Ge.nodeType===1?Ge.outerHTML:Ge.data),Te===z.staticCount-1&&(z.anchor=Ge),Ge=d(Ge);return Ge}break;case Fragment:re?Ge=L(V,z,U,Z,W,ne):Ge=ie();break;default:if(fe&1)Le!==1||z.type.toLowerCase()!==V.tagName.toLowerCase()?Ge=ie():Ge=S(V,z,U,Z,W,ne);else if(fe&6){z.slotScopeIds=W;const wt=g(V);if(t(z,wt,null,U,Z,isSVGContainer(wt),ne),Ge=re?O(V):d(V),Ge&&isComment$1(Ge)&&Ge.data==="teleport end"&&(Ge=d(Ge)),isAsyncWrapper(z)){let Te;re?(Te=createVNode(Fragment),Te.anchor=Ge?Ge.previousSibling:wt.lastChild):Te=V.nodeType===3?createTextVNode(""):createVNode("div"),Te.el=V,z.component.subTree=Te}}else fe&64?Le!==8?Ge=ie():Ge=z.type.hydrate(V,z,U,Z,W,ne,e,I):fe&128?Ge=z.type.hydrate(V,z,U,Z,isSVGContainer(g(V)),W,ne,e,k):process.env.NODE_ENV!=="production"&&warn$2("Invalid HostVNode type:",Ce,`(${typeof Ce})`)}return we!=null&&setRef(we,null,Z,z),Ge},S=(V,z,U,Z,W,ne)=>{ne=ne||!!z.dynamicChildren;const{type:re,props:ie,patchFlag:Ce,shapeFlag:we,dirs:fe}=z,de=re==="input"&&fe||re==="option";if(process.env.NODE_ENV!=="production"||de||Ce!==-1){if(fe&&invokeDirectiveHook(z,null,U,"created"),ie)if(de||!ne||Ce&48)for(const Ge in ie)(de&&Ge.endsWith("value")||isOn(Ge)&&!isReservedProp(Ge))&&s(V,Ge,null,ie[Ge],!1,void 0,U);else ie.onClick&&s(V,"onClick",null,ie.onClick,!1,void 0,U);let Le;if((Le=ie&&ie.onVnodeBeforeMount)&&invokeVNodeHook(Le,U,z),fe&&invokeDirectiveHook(z,null,U,"beforeMount"),((Le=ie&&ie.onVnodeMounted)||fe)&&queueEffectWithSuspense(()=>{Le&&invokeVNodeHook(Le,U,z),fe&&invokeDirectiveHook(z,null,U,"mounted")},Z),we&16&&!(ie&&(ie.innerHTML||ie.textContent))){let Ge=I(V.firstChild,z,V,U,Z,W,ne),wt=!1;for(;Ge;){hasMismatch=!0,process.env.NODE_ENV!=="production"&&!wt&&(warn$2(`Hydration children mismatch in <${z.type}>: server rendered element contains more child nodes than client vdom.`),wt=!0);const Te=Ge;Ge=Ge.nextSibling,r(Te)}}else we&8&&V.textContent!==z.children&&(hasMismatch=!0,process.env.NODE_ENV!=="production"&&warn$2(`Hydration text content mismatch in <${z.type}>:
- Client: ${V.textContent}
- Server: ${z.children}`),V.textContent=z.children)}return V.nextSibling},I=(V,z,U,Z,W,ne,re)=>{re=re||!!z.dynamicChildren;const ie=z.children,Ce=ie.length;let we=!1;for(let fe=0;fe<Ce;fe++){const de=re?ie[fe]:ie[fe]=normalizeVNode$1(ie[fe]);if(V)V=k(V,de,Z,W,ne,re);else{if(de.type===Text&&!de.children)continue;hasMismatch=!0,process.env.NODE_ENV!=="production"&&!we&&(warn$2(`Hydration children mismatch in <${U.tagName.toLowerCase()}>: server rendered element contains fewer child nodes than client vdom.`),we=!0),i(null,de,U,null,Z,W,isSVGContainer(U),ne)}}return V},L=(V,z,U,Z,W,ne)=>{const{slotScopeIds:re}=z;re&&(W=W?W.concat(re):re);const ie=g(V),Ce=I(d(V),z,ie,U,Z,W,ne);return Ce&&isComment$1(Ce)&&Ce.data==="]"?d(z.anchor=Ce):(hasMismatch=!0,y(z.anchor=E("]"),ie,Ce),Ce)},D=(V,z,U,Z,W,ne)=>{if(hasMismatch=!0,process.env.NODE_ENV!=="production"&&warn$2(`Hydration node mismatch:
- Client vnode:`,z.type,`
- Server rendered DOM:`,V,V.nodeType===3?"(text)":isComment$1(V)&&V.data==="["?"(start of fragment)":""),z.el=null,ne){const Ce=O(V);for(;;){const we=d(V);if(we&&we!==Ce)r(we);else break}}const re=d(V),ie=g(V);return r(V),i(null,z,ie,re,U,Z,isSVGContainer(ie),W),re},O=V=>{let z=0;for(;V;)if(V=d(V),V&&isComment$1(V)&&(V.data==="["&&z++,V.data==="]")){if(z===0)return d(V);z--}return V};return[w,k]}let supported,perf;function startMeasure(e,t){e.appContext.config.performance&&isSupported()&&perf.mark(`vue-${t}-${e.uid}`),process.env.NODE_ENV!=="production"&&devtoolsPerfStart(e,t,isSupported()?perf.now():Date.now())}function endMeasure(e,t){if(e.appContext.config.performance&&isSupported()){const i=`vue-${t}-${e.uid}`,s=i+":end";perf.mark(s),perf.measure(`<${formatComponentName$1(e,e.type)}> ${t}`,i,s),perf.clearMarks(i),perf.clearMarks(s)}process.env.NODE_ENV!=="production"&&devtoolsPerfEnd(e,t,isSupported()?perf.now():Date.now())}function isSupported(){return supported!==void 0||(typeof window<"u"&&window.performance?(supported=!0,perf=window.performance):supported=!1),supported}function initFeatureFlags(){const e=[];if(process.env.NODE_ENV!=="production"&&e.length){const t=e.length>1;console.warn(`Feature flag${t?"s":""} ${e.join(", ")} ${t?"are":"is"} not explicitly defined. You are running the esm-bundler build of Vue, which expects these compile-time feature flags to be globally injected via the bundler config in order to get better tree-shaking in the production bundle.

For more details, see https://link.vuejs.org/feature-flags.`)}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function createHydrationRenderer(e){return baseCreateRenderer(e,createHydrationFunctions)}function baseCreateRenderer(e,t){initFeatureFlags();const i=getGlobalThis();i.__VUE__=!0,process.env.NODE_ENV!=="production"&&setDevtoolsHook(i.__VUE_DEVTOOLS_GLOBAL_HOOK__,i);const{insert:s,remove:c,patchProp:d,createElement:g,createText:r,createComment:y,setText:E,setElementText:w,parentNode:k,nextSibling:S,setScopeId:I=NOOP,cloneNode:L,insertStaticContent:D}=e,O=(ve,Ve,pt,Ze=null,mt=null,Qe=null,Ue=!1,vt=null,dt=process.env.NODE_ENV!=="production"&&isHmrUpdating?!1:!!Ve.dynamicChildren)=>{if(ve===Ve)return;ve&&!isSameVNodeType(ve,Ve)&&(Ze=Xn(ve),An(ve,mt,Qe,!0),ve=null),Ve.patchFlag===-2&&(dt=!1,Ve.dynamicChildren=null);const{type:ct,ref:Tt,shapeFlag:tt}=Ve;switch(ct){case Text:V(ve,Ve,pt,Ze);break;case Comment$1:z(ve,Ve,pt,Ze);break;case Static:ve==null?U(Ve,pt,Ze,Ue):process.env.NODE_ENV!=="production"&&Z(ve,Ve,pt,Ue);break;case Fragment:Ge(ve,Ve,pt,Ze,mt,Qe,Ue,vt,dt);break;default:tt&1?re(ve,Ve,pt,Ze,mt,Qe,Ue,vt,dt):tt&6?wt(ve,Ve,pt,Ze,mt,Qe,Ue,vt,dt):tt&64||tt&128?ct.process(ve,Ve,pt,Ze,mt,Qe,Ue,vt,dt,gi):process.env.NODE_ENV!=="production"&&warn$2("Invalid VNode type:",ct,`(${typeof ct})`)}Tt!=null&&mt&&setRef(Tt,ve&&ve.ref,Qe,Ve||ve,!Ve)},V=(ve,Ve,pt,Ze)=>{if(ve==null)s(Ve.el=r(Ve.children),pt,Ze);else{const mt=Ve.el=ve.el;Ve.children!==ve.children&&E(mt,Ve.children)}},z=(ve,Ve,pt,Ze)=>{ve==null?s(Ve.el=y(Ve.children||""),pt,Ze):Ve.el=ve.el},U=(ve,Ve,pt,Ze)=>{[ve.el,ve.anchor]=D(ve.children,Ve,pt,Ze,ve.el,ve.anchor)},Z=(ve,Ve,pt,Ze)=>{if(Ve.children!==ve.children){const mt=S(ve.anchor);ne(ve),[Ve.el,Ve.anchor]=D(Ve.children,pt,mt,Ze)}else Ve.el=ve.el,Ve.anchor=ve.anchor},W=({el:ve,anchor:Ve},pt,Ze)=>{let mt;for(;ve&&ve!==Ve;)mt=S(ve),s(ve,pt,Ze),ve=mt;s(Ve,pt,Ze)},ne=({el:ve,anchor:Ve})=>{let pt;for(;ve&&ve!==Ve;)pt=S(ve),c(ve),ve=pt;c(Ve)},re=(ve,Ve,pt,Ze,mt,Qe,Ue,vt,dt)=>{Ue=Ue||Ve.type==="svg",ve==null?ie(Ve,pt,Ze,mt,Qe,Ue,vt,dt):fe(ve,Ve,mt,Qe,Ue,vt,dt)},ie=(ve,Ve,pt,Ze,mt,Qe,Ue,vt)=>{let dt,ct;const{type:Tt,props:tt,shapeFlag:st,transition:Et,patchFlag:It,dirs:dn}=ve;if(process.env.NODE_ENV==="production"&&ve.el&&L!==void 0&&It===-1)dt=ve.el=L(ve.el);else{if(dt=ve.el=g(ve.type,Qe,tt&&tt.is,tt),st&8?w(dt,ve.children):st&16&&we(ve.children,dt,null,Ze,mt,Qe&&Tt!=="foreignObject",Ue,vt),dn&&invokeDirectiveHook(ve,null,Ze,"created"),tt){for(const Un in tt)Un!=="value"&&!isReservedProp(Un)&&d(dt,Un,null,tt[Un],Qe,ve.children,Ze,mt,ni);"value"in tt&&d(dt,"value",null,tt.value),(ct=tt.onVnodeBeforeMount)&&invokeVNodeHook(ct,Ze,ve)}Ce(dt,ve,ve.scopeId,Ue,Ze)}process.env.NODE_ENV!=="production"&&(Object.defineProperty(dt,"__vnode",{value:ve,enumerable:!1}),Object.defineProperty(dt,"__vueParentComponent",{value:Ze,enumerable:!1})),dn&&invokeDirectiveHook(ve,null,Ze,"beforeMount");const gn=(!mt||mt&&!mt.pendingBranch)&&Et&&!Et.persisted;gn&&Et.beforeEnter(dt),s(dt,Ve,pt),((ct=tt&&tt.onVnodeMounted)||gn||dn)&&queuePostRenderEffect(()=>{ct&&invokeVNodeHook(ct,Ze,ve),gn&&Et.enter(dt),dn&&invokeDirectiveHook(ve,null,Ze,"mounted")},mt)},Ce=(ve,Ve,pt,Ze,mt)=>{if(pt&&I(ve,pt),Ze)for(let Qe=0;Qe<Ze.length;Qe++)I(ve,Ze[Qe]);if(mt){let Qe=mt.subTree;if(process.env.NODE_ENV!=="production"&&Qe.patchFlag>0&&Qe.patchFlag&2048&&(Qe=filterSingleRoot(Qe.children)||Qe),Ve===Qe){const Ue=mt.vnode;Ce(ve,Ue,Ue.scopeId,Ue.slotScopeIds,mt.parent)}}},we=(ve,Ve,pt,Ze,mt,Qe,Ue,vt,dt=0)=>{for(let ct=dt;ct<ve.length;ct++){const Tt=ve[ct]=vt?cloneIfMounted(ve[ct]):normalizeVNode$1(ve[ct]);O(null,Tt,Ve,pt,Ze,mt,Qe,Ue,vt)}},fe=(ve,Ve,pt,Ze,mt,Qe,Ue)=>{const vt=Ve.el=ve.el;let{patchFlag:dt,dynamicChildren:ct,dirs:Tt}=Ve;dt|=ve.patchFlag&16;const tt=ve.props||EMPTY_OBJ,st=Ve.props||EMPTY_OBJ;let Et;pt&&toggleRecurse(pt,!1),(Et=st.onVnodeBeforeUpdate)&&invokeVNodeHook(Et,pt,Ve,ve),Tt&&invokeDirectiveHook(Ve,ve,pt,"beforeUpdate"),pt&&toggleRecurse(pt,!0),process.env.NODE_ENV!=="production"&&isHmrUpdating&&(dt=0,Ue=!1,ct=null);const It=mt&&Ve.type!=="foreignObject";if(ct?(de(ve.dynamicChildren,ct,vt,pt,Ze,It,Qe),process.env.NODE_ENV!=="production"&&pt&&pt.type.__hmrId&&traverseStaticChildren(ve,Ve)):Ue||Nt(ve,Ve,vt,null,pt,Ze,It,Qe,!1),dt>0){if(dt&16)Le(vt,Ve,tt,st,pt,Ze,mt);else if(dt&2&&tt.class!==st.class&&d(vt,"class",null,st.class,mt),dt&4&&d(vt,"style",tt.style,st.style,mt),dt&8){const dn=Ve.dynamicProps;for(let gn=0;gn<dn.length;gn++){const Un=dn[gn],oi=tt[Un],Ui=st[Un];(Ui!==oi||Un==="value")&&d(vt,Un,oi,Ui,mt,ve.children,pt,Ze,ni)}}dt&1&&ve.children!==Ve.children&&w(vt,Ve.children)}else!Ue&&ct==null&&Le(vt,Ve,tt,st,pt,Ze,mt);((Et=st.onVnodeUpdated)||Tt)&&queuePostRenderEffect(()=>{Et&&invokeVNodeHook(Et,pt,Ve,ve),Tt&&invokeDirectiveHook(Ve,ve,pt,"updated")},Ze)},de=(ve,Ve,pt,Ze,mt,Qe,Ue)=>{for(let vt=0;vt<Ve.length;vt++){const dt=ve[vt],ct=Ve[vt],Tt=dt.el&&(dt.type===Fragment||!isSameVNodeType(dt,ct)||dt.shapeFlag&70)?k(dt.el):pt;O(dt,ct,Tt,null,Ze,mt,Qe,Ue,!0)}},Le=(ve,Ve,pt,Ze,mt,Qe,Ue)=>{if(pt!==Ze){for(const vt in Ze){if(isReservedProp(vt))continue;const dt=Ze[vt],ct=pt[vt];dt!==ct&&vt!=="value"&&d(ve,vt,ct,dt,Ue,Ve.children,mt,Qe,ni)}if(pt!==EMPTY_OBJ)for(const vt in pt)!isReservedProp(vt)&&!(vt in Ze)&&d(ve,vt,pt[vt],null,Ue,Ve.children,mt,Qe,ni);"value"in Ze&&d(ve,"value",pt.value,Ze.value)}},Ge=(ve,Ve,pt,Ze,mt,Qe,Ue,vt,dt)=>{const ct=Ve.el=ve?ve.el:r(""),Tt=Ve.anchor=ve?ve.anchor:r("");let{patchFlag:tt,dynamicChildren:st,slotScopeIds:Et}=Ve;process.env.NODE_ENV!=="production"&&(isHmrUpdating||tt&2048)&&(tt=0,dt=!1,st=null),Et&&(vt=vt?vt.concat(Et):Et),ve==null?(s(ct,pt,Ze),s(Tt,pt,Ze),we(Ve.children,pt,Tt,mt,Qe,Ue,vt,dt)):tt>0&&tt&64&&st&&ve.dynamicChildren?(de(ve.dynamicChildren,st,pt,mt,Qe,Ue,vt),process.env.NODE_ENV!=="production"&&mt&&mt.type.__hmrId?traverseStaticChildren(ve,Ve):(Ve.key!=null||mt&&Ve===mt.subTree)&&traverseStaticChildren(ve,Ve,!0)):Nt(ve,Ve,pt,Tt,mt,Qe,Ue,vt,dt)},wt=(ve,Ve,pt,Ze,mt,Qe,Ue,vt,dt)=>{Ve.slotScopeIds=vt,ve==null?Ve.shapeFlag&512?mt.ctx.activate(Ve,pt,Ze,Ue,dt):Te(Ve,pt,Ze,mt,Qe,Ue,dt):ze(ve,Ve,dt)},Te=(ve,Ve,pt,Ze,mt,Qe,Ue)=>{const vt=ve.component=createComponentInstance$1(ve,Ze,mt);if(process.env.NODE_ENV!=="production"&&vt.type.__hmrId&&registerHMR(vt),process.env.NODE_ENV!=="production"&&(pushWarningContext$1(ve),startMeasure(vt,"mount")),isKeepAlive(ve)&&(vt.ctx.renderer=gi),process.env.NODE_ENV!=="production"&&startMeasure(vt,"init"),setupComponent$1(vt),process.env.NODE_ENV!=="production"&&endMeasure(vt,"init"),vt.asyncDep){if(mt&&mt.registerDep(vt,Ke),!ve.el){const dt=vt.subTree=createVNode(Comment$1);z(null,dt,Ve,pt)}return}Ke(vt,ve,Ve,pt,mt,Qe,Ue),process.env.NODE_ENV!=="production"&&(popWarningContext$1(),endMeasure(vt,"mount"))},ze=(ve,Ve,pt)=>{const Ze=Ve.component=ve.component;if(shouldUpdateComponent(ve,Ve,pt))if(Ze.asyncDep&&!Ze.asyncResolved){process.env.NODE_ENV!=="production"&&pushWarningContext$1(Ve),ut(Ze,Ve,pt),process.env.NODE_ENV!=="production"&&popWarningContext$1();return}else Ze.next=Ve,invalidateJob(Ze.update),Ze.update();else Ve.el=ve.el,Ze.vnode=Ve},Ke=(ve,Ve,pt,Ze,mt,Qe,Ue)=>{const vt=()=>{if(ve.isMounted){let{next:Tt,bu:tt,u:st,parent:Et,vnode:It}=ve,dn=Tt,gn;process.env.NODE_ENV!=="production"&&pushWarningContext$1(Tt||ve.vnode),toggleRecurse(ve,!1),Tt?(Tt.el=It.el,ut(ve,Tt,Ue)):Tt=It,tt&&invokeArrayFns(tt),(gn=Tt.props&&Tt.props.onVnodeBeforeUpdate)&&invokeVNodeHook(gn,Et,Tt,It),toggleRecurse(ve,!0),process.env.NODE_ENV!=="production"&&startMeasure(ve,"render");const Un=renderComponentRoot$1(ve);process.env.NODE_ENV!=="production"&&endMeasure(ve,"render");const oi=ve.subTree;ve.subTree=Un,process.env.NODE_ENV!=="production"&&startMeasure(ve,"patch"),O(oi,Un,k(oi.el),Xn(oi),ve,mt,Qe),process.env.NODE_ENV!=="production"&&endMeasure(ve,"patch"),Tt.el=Un.el,dn===null&&updateHOCHostEl(ve,Un.el),st&&queuePostRenderEffect(st,mt),(gn=Tt.props&&Tt.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(gn,Et,Tt,It),mt),process.env.NODE_ENV!=="production"&&devtoolsComponentUpdated(ve),process.env.NODE_ENV!=="production"&&popWarningContext$1()}else{let Tt;const{el:tt,props:st}=Ve,{bm:Et,m:It,parent:dn}=ve,gn=isAsyncWrapper(Ve);if(toggleRecurse(ve,!1),Et&&invokeArrayFns(Et),!gn&&(Tt=st&&st.onVnodeBeforeMount)&&invokeVNodeHook(Tt,dn,Ve),toggleRecurse(ve,!0),tt&&Ei){const Un=()=>{process.env.NODE_ENV!=="production"&&startMeasure(ve,"render"),ve.subTree=renderComponentRoot$1(ve),process.env.NODE_ENV!=="production"&&endMeasure(ve,"render"),process.env.NODE_ENV!=="production"&&startMeasure(ve,"hydrate"),Ei(tt,ve.subTree,ve,mt,null),process.env.NODE_ENV!=="production"&&endMeasure(ve,"hydrate")};gn?Ve.type.__asyncLoader().then(()=>!ve.isUnmounted&&Un()):Un()}else{process.env.NODE_ENV!=="production"&&startMeasure(ve,"render");const Un=ve.subTree=renderComponentRoot$1(ve);process.env.NODE_ENV!=="production"&&endMeasure(ve,"render"),process.env.NODE_ENV!=="production"&&startMeasure(ve,"patch"),O(null,Un,pt,Ze,ve,mt,Qe),process.env.NODE_ENV!=="production"&&endMeasure(ve,"patch"),Ve.el=Un.el}if(It&&queuePostRenderEffect(It,mt),!gn&&(Tt=st&&st.onVnodeMounted)){const Un=Ve;queuePostRenderEffect(()=>invokeVNodeHook(Tt,dn,Un),mt)}(Ve.shapeFlag&256||dn&&isAsyncWrapper(dn.vnode)&&dn.vnode.shapeFlag&256)&&ve.a&&queuePostRenderEffect(ve.a,mt),ve.isMounted=!0,process.env.NODE_ENV!=="production"&&devtoolsComponentAdded(ve),Ve=pt=Ze=null}},dt=ve.effect=new ReactiveEffect(vt,()=>queueJob(ct),ve.scope),ct=ve.update=()=>dt.run();ct.id=ve.uid,toggleRecurse(ve,!0),process.env.NODE_ENV!=="production"&&(dt.onTrack=ve.rtc?Tt=>invokeArrayFns(ve.rtc,Tt):void 0,dt.onTrigger=ve.rtg?Tt=>invokeArrayFns(ve.rtg,Tt):void 0,ct.ownerInstance=ve),ct()},ut=(ve,Ve,pt)=>{Ve.component=ve;const Ze=ve.vnode.props;ve.vnode=Ve,ve.next=null,updateProps(ve,Ve.props,Ze,pt),updateSlots(ve,Ve.children,pt),pauseTracking(),flushPreFlushCbs(void 0,ve.update),resetTracking()},Nt=(ve,Ve,pt,Ze,mt,Qe,Ue,vt,dt=!1)=>{const ct=ve&&ve.children,Tt=ve?ve.shapeFlag:0,tt=Ve.children,{patchFlag:st,shapeFlag:Et}=Ve;if(st>0){if(st&128){un(ct,tt,pt,Ze,mt,Qe,Ue,vt,dt);return}else if(st&256){an(ct,tt,pt,Ze,mt,Qe,Ue,vt,dt);return}}Et&8?(Tt&16&&ni(ct,mt,Qe),tt!==ct&&w(pt,tt)):Tt&16?Et&16?un(ct,tt,pt,Ze,mt,Qe,Ue,vt,dt):ni(ct,mt,Qe,!0):(Tt&8&&w(pt,""),Et&16&&we(tt,pt,Ze,mt,Qe,Ue,vt,dt))},an=(ve,Ve,pt,Ze,mt,Qe,Ue,vt,dt)=>{ve=ve||EMPTY_ARR,Ve=Ve||EMPTY_ARR;const ct=ve.length,Tt=Ve.length,tt=Math.min(ct,Tt);let st;for(st=0;st<tt;st++){const Et=Ve[st]=dt?cloneIfMounted(Ve[st]):normalizeVNode$1(Ve[st]);O(ve[st],Et,pt,null,mt,Qe,Ue,vt,dt)}ct>Tt?ni(ve,mt,Qe,!0,!1,tt):we(Ve,pt,Ze,mt,Qe,Ue,vt,dt,tt)},un=(ve,Ve,pt,Ze,mt,Qe,Ue,vt,dt)=>{let ct=0;const Tt=Ve.length;let tt=ve.length-1,st=Tt-1;for(;ct<=tt&&ct<=st;){const Et=ve[ct],It=Ve[ct]=dt?cloneIfMounted(Ve[ct]):normalizeVNode$1(Ve[ct]);if(isSameVNodeType(Et,It))O(Et,It,pt,null,mt,Qe,Ue,vt,dt);else break;ct++}for(;ct<=tt&&ct<=st;){const Et=ve[tt],It=Ve[st]=dt?cloneIfMounted(Ve[st]):normalizeVNode$1(Ve[st]);if(isSameVNodeType(Et,It))O(Et,It,pt,null,mt,Qe,Ue,vt,dt);else break;tt--,st--}if(ct>tt){if(ct<=st){const Et=st+1,It=Et<Tt?Ve[Et].el:Ze;for(;ct<=st;)O(null,Ve[ct]=dt?cloneIfMounted(Ve[ct]):normalizeVNode$1(Ve[ct]),pt,It,mt,Qe,Ue,vt,dt),ct++}}else if(ct>st)for(;ct<=tt;)An(ve[ct],mt,Qe,!0),ct++;else{const Et=ct,It=ct,dn=new Map;for(ct=It;ct<=st;ct++){const Ti=Ve[ct]=dt?cloneIfMounted(Ve[ct]):normalizeVNode$1(Ve[ct]);Ti.key!=null&&(process.env.NODE_ENV!=="production"&&dn.has(Ti.key)&&warn$2("Duplicate keys found during update:",JSON.stringify(Ti.key),"Make sure keys are unique."),dn.set(Ti.key,ct))}let gn,Un=0;const oi=st-It+1;let Ui=!1,Wr=0;const fr=new Array(oi);for(ct=0;ct<oi;ct++)fr[ct]=0;for(ct=Et;ct<=tt;ct++){const Ti=ve[ct];if(Un>=oi){An(Ti,mt,Qe,!0);continue}let ji;if(Ti.key!=null)ji=dn.get(Ti.key);else for(gn=It;gn<=st;gn++)if(fr[gn-It]===0&&isSameVNodeType(Ti,Ve[gn])){ji=gn;break}ji===void 0?An(Ti,mt,Qe,!0):(fr[ji-It]=ct+1,ji>=Wr?Wr=ji:Ui=!0,O(Ti,Ve[ji],pt,null,mt,Qe,Ue,vt,dt),Un++)}const Dr=Ui?getSequence(fr):EMPTY_ARR;for(gn=Dr.length-1,ct=oi-1;ct>=0;ct--){const Ti=It+ct,ji=Ve[Ti],Zr=Ti+1<Tt?Ve[Ti+1].el:Ze;fr[ct]===0?O(null,ji,pt,Zr,mt,Qe,Ue,vt,dt):Ui&&(gn<0||ct!==Dr[gn]?wn(ji,pt,Zr,2):gn--)}}},wn=(ve,Ve,pt,Ze,mt=null)=>{const{el:Qe,type:Ue,transition:vt,children:dt,shapeFlag:ct}=ve;if(ct&6){wn(ve.component.subTree,Ve,pt,Ze);return}if(ct&128){ve.suspense.move(Ve,pt,Ze);return}if(ct&64){Ue.move(ve,Ve,pt,gi);return}if(Ue===Fragment){s(Qe,Ve,pt);for(let tt=0;tt<dt.length;tt++)wn(dt[tt],Ve,pt,Ze);s(ve.anchor,Ve,pt);return}if(Ue===Static){W(ve,Ve,pt);return}if(Ze!==2&&ct&1&&vt)if(Ze===0)vt.beforeEnter(Qe),s(Qe,Ve,pt),queuePostRenderEffect(()=>vt.enter(Qe),mt);else{const{leave:tt,delayLeave:st,afterLeave:Et}=vt,It=()=>s(Qe,Ve,pt),dn=()=>{tt(Qe,()=>{It(),Et&&Et()})};st?st(Qe,It,dn):dn()}else s(Qe,Ve,pt)},An=(ve,Ve,pt,Ze=!1,mt=!1)=>{const{type:Qe,props:Ue,ref:vt,children:dt,dynamicChildren:ct,shapeFlag:Tt,patchFlag:tt,dirs:st}=ve;if(vt!=null&&setRef(vt,null,pt,ve,!0),Tt&256){Ve.ctx.deactivate(ve);return}const Et=Tt&1&&st,It=!isAsyncWrapper(ve);let dn;if(It&&(dn=Ue&&Ue.onVnodeBeforeUnmount)&&invokeVNodeHook(dn,Ve,ve),Tt&6)Vn(ve.component,pt,Ze);else{if(Tt&128){ve.suspense.unmount(pt,Ze);return}Et&&invokeDirectiveHook(ve,null,Ve,"beforeUnmount"),Tt&64?ve.type.remove(ve,Ve,pt,mt,gi,Ze):ct&&(Qe!==Fragment||tt>0&&tt&64)?ni(ct,Ve,pt,!1,!0):(Qe===Fragment&&tt&384||!mt&&Tt&16)&&ni(dt,Ve,pt),Ze&&kn(ve)}(It&&(dn=Ue&&Ue.onVnodeUnmounted)||Et)&&queuePostRenderEffect(()=>{dn&&invokeVNodeHook(dn,Ve,ve),Et&&invokeDirectiveHook(ve,null,Ve,"unmounted")},pt)},kn=ve=>{const{type:Ve,el:pt,anchor:Ze,transition:mt}=ve;if(Ve===Fragment){process.env.NODE_ENV!=="production"&&ve.patchFlag>0&&ve.patchFlag&2048&&mt&&!mt.persisted?ve.children.forEach(Ue=>{Ue.type===Comment$1?c(Ue.el):kn(Ue)}):En(pt,Ze);return}if(Ve===Static){ne(ve);return}const Qe=()=>{c(pt),mt&&!mt.persisted&&mt.afterLeave&&mt.afterLeave()};if(ve.shapeFlag&1&&mt&&!mt.persisted){const{leave:Ue,delayLeave:vt}=mt,dt=()=>Ue(pt,Qe);vt?vt(ve.el,Qe,dt):dt()}else Qe()},En=(ve,Ve)=>{let pt;for(;ve!==Ve;)pt=S(ve),c(ve),ve=pt;c(Ve)},Vn=(ve,Ve,pt)=>{process.env.NODE_ENV!=="production"&&ve.type.__hmrId&&unregisterHMR(ve);const{bum:Ze,scope:mt,update:Qe,subTree:Ue,um:vt}=ve;Ze&&invokeArrayFns(Ze),mt.stop(),Qe&&(Qe.active=!1,An(Ue,ve,Ve,pt)),vt&&queuePostRenderEffect(vt,Ve),queuePostRenderEffect(()=>{ve.isUnmounted=!0},Ve),Ve&&Ve.pendingBranch&&!Ve.isUnmounted&&ve.asyncDep&&!ve.asyncResolved&&ve.suspenseId===Ve.pendingId&&(Ve.deps--,Ve.deps===0&&Ve.resolve()),process.env.NODE_ENV!=="production"&&devtoolsComponentRemoved(ve)},ni=(ve,Ve,pt,Ze=!1,mt=!1,Qe=0)=>{for(let Ue=Qe;Ue<ve.length;Ue++)An(ve[Ue],Ve,pt,Ze,mt)},Xn=ve=>ve.shapeFlag&6?Xn(ve.component.subTree):ve.shapeFlag&128?ve.suspense.next():S(ve.anchor||ve.el),Ln=(ve,Ve,pt)=>{ve==null?Ve._vnode&&An(Ve._vnode,null,null,!0):O(Ve._vnode||null,ve,Ve,null,null,null,pt),flushPostFlushCbs(),Ve._vnode=ve},gi={p:O,um:An,m:wn,r:kn,mt:Te,mc:we,pc:Nt,pbc:de,n:Xn,o:e};let yi,Ei;return t&&([yi,Ei]=t(gi)),{render:Ln,hydrate:yi,createApp:createAppAPI(Ln,yi)}}function toggleRecurse({effect:e,update:t},i){e.allowRecurse=t.allowRecurse=i}function traverseStaticChildren(e,t,i=!1){const s=e.children,c=t.children;if(isArray$7(s)&&isArray$7(c))for(let d=0;d<s.length;d++){const g=s[d];let r=c[d];r.shapeFlag&1&&!r.dynamicChildren&&((r.patchFlag<=0||r.patchFlag===32)&&(r=c[d]=cloneIfMounted(c[d]),r.el=g.el),i||traverseStaticChildren(g,r)),process.env.NODE_ENV!=="production"&&r.type===Comment$1&&!r.el&&(r.el=g.el)}}function getSequence(e){const t=e.slice(),i=[0];let s,c,d,g,r;const y=e.length;for(s=0;s<y;s++){const E=e[s];if(E!==0){if(c=i[i.length-1],e[c]<E){t[s]=c,i.push(s);continue}for(d=0,g=i.length-1;d<g;)r=d+g>>1,e[i[r]]<E?d=r+1:g=r;E<e[i[d]]&&(d>0&&(t[s]=i[d-1]),i[d]=s)}}for(d=i.length,g=i[d-1];d-- >0;)i[d]=g,g=t[g];return i}const isTeleport=e=>e.__isTeleport,isTeleportDisabled=e=>e&&(e.disabled||e.disabled===""),isTargetSVG=e=>typeof SVGElement<"u"&&e instanceof SVGElement,resolveTarget=(e,t)=>{const i=e&&e.to;if(isString$2(i))if(t){const s=t(i);return s||process.env.NODE_ENV!=="production"&&warn$2(`Failed to locate Teleport target with selector "${i}". Note the target element must exist before the component is mounted - i.e. the target cannot be rendered by the component itself, and ideally should be outside of the entire Vue component tree.`),s}else return process.env.NODE_ENV!=="production"&&warn$2("Current renderer does not support string target for Teleports. (missing querySelector renderer option)"),null;else return process.env.NODE_ENV!=="production"&&!i&&!isTeleportDisabled(e)&&warn$2(`Invalid Teleport target: ${i}`),i},TeleportImpl={__isTeleport:!0,process(e,t,i,s,c,d,g,r,y,E){const{mc:w,pc:k,pbc:S,o:{insert:I,querySelector:L,createText:D,createComment:O}}=E,V=isTeleportDisabled(t.props);let{shapeFlag:z,children:U,dynamicChildren:Z}=t;if(process.env.NODE_ENV!=="production"&&isHmrUpdating&&(y=!1,Z=null),e==null){const W=t.el=process.env.NODE_ENV!=="production"?O("teleport start"):D(""),ne=t.anchor=process.env.NODE_ENV!=="production"?O("teleport end"):D("");I(W,i,s),I(ne,i,s);const re=t.target=resolveTarget(t.props,L),ie=t.targetAnchor=D("");re?(I(ie,re),g=g||isTargetSVG(re)):process.env.NODE_ENV!=="production"&&!V&&warn$2("Invalid Teleport target on mount:",re,`(${typeof re})`);const Ce=(we,fe)=>{z&16&&w(U,we,fe,c,d,g,r,y)};V?Ce(i,ne):re&&Ce(re,ie)}else{t.el=e.el;const W=t.anchor=e.anchor,ne=t.target=e.target,re=t.targetAnchor=e.targetAnchor,ie=isTeleportDisabled(e.props),Ce=ie?i:ne,we=ie?W:re;if(g=g||isTargetSVG(ne),Z?(S(e.dynamicChildren,Z,Ce,c,d,g,r),traverseStaticChildren(e,t,!0)):y||k(e,t,Ce,we,c,d,g,r,!1),V)ie||moveTeleport(t,i,W,E,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const fe=t.target=resolveTarget(t.props,L);fe?moveTeleport(t,fe,null,E,0):process.env.NODE_ENV!=="production"&&warn$2("Invalid Teleport target on update:",ne,`(${typeof ne})`)}else ie&&moveTeleport(t,ne,re,E,1)}},remove(e,t,i,s,{um:c,o:{remove:d}},g){const{shapeFlag:r,children:y,anchor:E,targetAnchor:w,target:k,props:S}=e;if(k&&d(w),(g||!isTeleportDisabled(S))&&(d(E),r&16))for(let I=0;I<y.length;I++){const L=y[I];c(L,t,i,!0,!!L.dynamicChildren)}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(e,t,i,{o:{insert:s},m:c},d=2){d===0&&s(e.targetAnchor,t,i);const{el:g,anchor:r,shapeFlag:y,children:E,props:w}=e,k=d===2;if(k&&s(g,t,i),(!k||isTeleportDisabled(w))&&y&16)for(let S=0;S<E.length;S++)c(E[S],t,i,2);k&&s(r,t,i)}function hydrateTeleport(e,t,i,s,c,d,{o:{nextSibling:g,parentNode:r,querySelector:y}},E){const w=t.target=resolveTarget(t.props,y);if(w){const k=w._lpa||w.firstChild;if(t.shapeFlag&16)if(isTeleportDisabled(t.props))t.anchor=E(g(e),t,r(e),i,s,c,d),t.targetAnchor=k;else{t.anchor=g(e);let S=k;for(;S;)if(S=g(S),S&&S.nodeType===8&&S.data==="teleport anchor"){t.targetAnchor=S,w._lpa=t.targetAnchor&&g(t.targetAnchor);break}E(k,t,w,i,s,c,d)}}return t.anchor&&g(t.anchor)}const Teleport=TeleportImpl,Fragment=Symbol(process.env.NODE_ENV!=="production"?"Fragment":void 0),Text=Symbol(process.env.NODE_ENV!=="production"?"Text":void 0),Comment$1=Symbol(process.env.NODE_ENV!=="production"?"Comment":void 0),Static=Symbol(process.env.NODE_ENV!=="production"?"Static":void 0),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e){isBlockTreeEnabled+=e}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,t,i,s,c,d){return setupBlock(createBaseVNode(e,t,i,s,c,d,!0))}function createBlock(e,t,i,s,c){return setupBlock(createVNode(e,t,i,s,c,!0))}function isVNode$1(e){return e?e.__v_isVNode===!0:!1}function isSameVNodeType(e,t){return process.env.NODE_ENV!=="production"&&t.shapeFlag&6&&hmrDirtyComponents.has(t.type)?!1:e.type===t.type&&e.key===t.key}let vnodeArgsTransformer;function transformVNodeArgs(e){vnodeArgsTransformer=e}const createVNodeWithArgsTransform=(...e)=>_createVNode(...vnodeArgsTransformer?vnodeArgsTransformer(e,currentRenderingInstance):e),InternalObjectKey="__vInternal",normalizeKey=({key:e})=>e!=null?e:null,normalizeRef=({ref:e,ref_key:t,ref_for:i})=>e!=null?isString$2(e)||isRef$1(e)||isFunction$1(e)?{i:currentRenderingInstance,r:e,k:t,f:!!i}:e:null;function createBaseVNode(e,t=null,i=null,s=0,c=null,d=e===Fragment?0:1,g=!1,r=!1){const y={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&normalizeKey(t),ref:t&&normalizeRef(t),scopeId:currentScopeId,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:d,patchFlag:s,dynamicProps:c,dynamicChildren:null,appContext:null};return r?(normalizeChildren(y,i),d&128&&e.normalize(y)):i&&(y.shapeFlag|=isString$2(i)?8:16),process.env.NODE_ENV!=="production"&&y.key!==y.key&&warn$2("VNode created with invalid key (NaN). VNode type:",y.type),isBlockTreeEnabled>0&&!g&&currentBlock&&(y.patchFlag>0||d&6)&&y.patchFlag!==32&&currentBlock.push(y),y}const createVNode=process.env.NODE_ENV!=="production"?createVNodeWithArgsTransform:_createVNode;function _createVNode(e,t=null,i=null,s=0,c=null,d=!1){if((!e||e===NULL_DYNAMIC_COMPONENT)&&(process.env.NODE_ENV!=="production"&&!e&&warn$2(`Invalid vnode type when creating vnode: ${e}.`),e=Comment$1),isVNode$1(e)){const r=cloneVNode(e,t,!0);return i&&normalizeChildren(r,i),isBlockTreeEnabled>0&&!d&&currentBlock&&(r.shapeFlag&6?currentBlock[currentBlock.indexOf(e)]=r:currentBlock.push(r)),r.patchFlag|=-2,r}if(isClassComponent(e)&&(e=e.__vccOpts),t){t=guardReactiveProps(t);let{class:r,style:y}=t;r&&!isString$2(r)&&(t.class=normalizeClass(r)),isObject$6(y)&&(isProxy(y)&&!isArray$7(y)&&(y=extend$4({},y)),t.style=normalizeStyle(y))}const g=isString$2(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject$6(e)?4:isFunction$1(e)?2:0;return process.env.NODE_ENV!=="production"&&g&4&&isProxy(e)&&(e=toRaw$1(e),warn$2("Vue received a Component which was made a reactive object. This can lead to unnecessary performance overhead, and should be avoided by marking the component with `markRaw` or using `shallowRef` instead of `ref`.",`
Component that was made reactive: `,e)),createBaseVNode(e,t,i,s,c,g,d,!0)}function guardReactiveProps(e){return e?isProxy(e)||InternalObjectKey in e?extend$4({},e):e:null}function cloneVNode(e,t,i=!1){const{props:s,ref:c,patchFlag:d,children:g}=e,r=t?mergeProps(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:r,key:r&&normalizeKey(r),ref:t&&t.ref?i&&c?isArray$7(c)?c.concat(normalizeRef(t)):[c,normalizeRef(t)]:normalizeRef(t):c,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:process.env.NODE_ENV!=="production"&&d===-1&&isArray$7(g)?g.map(deepCloneVNode):g,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fragment?d===-1?16:d|16:d,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor}}function deepCloneVNode(e){const t=cloneVNode(e);return isArray$7(e.children)&&(t.children=e.children.map(deepCloneVNode)),t}function createTextVNode(e=" ",t=0){return createVNode(Text,null,e,t)}function createStaticVNode(e,t){const i=createVNode(Static,null,e);return i.staticCount=t,i}function createCommentVNode(e="",t=!1){return t?(openBlock(),createBlock(Comment$1,null,e)):createVNode(Comment$1,null,e)}function normalizeVNode$1(e){return e==null||typeof e=="boolean"?createVNode(Comment$1):isArray$7(e)?createVNode(Fragment,null,e.slice()):typeof e=="object"?cloneIfMounted(e):createVNode(Text,null,String(e))}function cloneIfMounted(e){return e.el===null||e.memo?e:cloneVNode(e)}function normalizeChildren(e,t){let i=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(isArray$7(t))i=16;else if(typeof t=="object")if(s&65){const c=t.default;c&&(c._c&&(c._d=!1),normalizeChildren(e,c()),c._c&&(c._d=!0));return}else{i=32;const c=t._;!c&&!(InternalObjectKey in t)?t._ctx=currentRenderingInstance:c===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else isFunction$1(t)?(t={default:t,_ctx:currentRenderingInstance},i=32):(t=String(t),s&64?(i=16,t=[createTextVNode(t)]):i=8);e.children=t,e.shapeFlag|=i}function mergeProps(...e){const t={};for(let i=0;i<e.length;i++){const s=e[i];for(const c in s)if(c==="class")t.class!==s.class&&(t.class=normalizeClass([t.class,s.class]));else if(c==="style")t.style=normalizeStyle([t.style,s.style]);else if(isOn(c)){const d=t[c],g=s[c];g&&d!==g&&!(isArray$7(d)&&d.includes(g))&&(t[c]=d?[].concat(d,g):g)}else c!==""&&(t[c]=s[c])}return t}function invokeVNodeHook(e,t,i,s=null){callWithAsyncErrorHandling(e,t,7,[i,s])}const emptyAppContext=createAppContext();let uid$1=0;function createComponentInstance$1(e,t,i){const s=e.type,c=(t?t.appContext:e.appContext)||emptyAppContext,d={uid:uid$1++,vnode:e,type:s,parent:t,appContext:c,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(c.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(s,c),emitsOptions:normalizeEmitsOptions(s,c),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:s.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return process.env.NODE_ENV!=="production"?d.ctx=createDevRenderContext(d):d.ctx={_:d},d.root=t?t.root:d,d.emit=emit$1.bind(null,d),e.ce&&e.ce(d),d}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=e=>{currentInstance=e,e.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null},isBuiltInTag=makeMap("slot,component");function validateComponentName(e,t){const i=t.isNativeTag||NO;(isBuiltInTag(e)||i(e))&&warn$2("Do not use built-in or reserved HTML elements as component id: "+e)}function isStatefulComponent(e){return e.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent$1(e,t=!1){isInSSRComponentSetup=t;const{props:i,children:s}=e.vnode,c=isStatefulComponent(e);initProps(e,i,c,t),initSlots(e,s);const d=c?setupStatefulComponent(e,t):void 0;return isInSSRComponentSetup=!1,d}function setupStatefulComponent(e,t){var i;const s=e.type;if(process.env.NODE_ENV!=="production"){if(s.name&&validateComponentName(s.name,e.appContext.config),s.components){const d=Object.keys(s.components);for(let g=0;g<d.length;g++)validateComponentName(d[g],e.appContext.config)}if(s.directives){const d=Object.keys(s.directives);for(let g=0;g<d.length;g++)validateDirectiveName(d[g])}s.compilerOptions&&isRuntimeOnly()&&warn$2('"compilerOptions" is only supported when using a build of Vue that includes the runtime compiler. Since you are using a runtime-only build, the options should be passed via your build tool config instead.')}e.accessCache=Object.create(null),e.proxy=markRaw(new Proxy(e.ctx,PublicInstanceProxyHandlers)),process.env.NODE_ENV!=="production"&&exposePropsOnRenderContext(e);const{setup:c}=s;if(c){const d=e.setupContext=c.length>1?createSetupContext(e):null;setCurrentInstance(e),pauseTracking();const g=callWithErrorHandling$1(c,e,0,[process.env.NODE_ENV!=="production"?shallowReadonly(e.props):e.props,d]);if(resetTracking(),unsetCurrentInstance(),isPromise(g)){if(g.then(unsetCurrentInstance,unsetCurrentInstance),t)return g.then(r=>{handleSetupResult(e,r,t)}).catch(r=>{handleError$1(r,e,0)});if(e.asyncDep=g,process.env.NODE_ENV!=="production"&&!e.suspense){const r=(i=s.name)!==null&&i!==void 0?i:"Anonymous";warn$2(`Component <${r}>: setup function returned a promise, but no <Suspense> boundary was found in the parent component tree. A component with async setup() must be nested in a <Suspense> in order to be rendered.`)}}else handleSetupResult(e,g,t)}else finishComponentSetup(e,t)}function handleSetupResult(e,t,i){isFunction$1(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:isObject$6(t)?(process.env.NODE_ENV!=="production"&&isVNode$1(t)&&warn$2("setup() should not return VNodes directly - return a render function instead."),process.env.NODE_ENV!=="production"&&(e.devtoolsRawSetupState=t),e.setupState=proxyRefs(t),process.env.NODE_ENV!=="production"&&exposeSetupStateOnRenderContext(e)):process.env.NODE_ENV!=="production"&&t!==void 0&&warn$2(`setup() should return an object. Received: ${t===null?"null":typeof t}`),finishComponentSetup(e,i)}let compile$1,installWithProxy;function registerRuntimeCompiler(e){compile$1=e,installWithProxy=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,RuntimeCompiledPublicInstanceProxyHandlers))}}const isRuntimeOnly=()=>!compile$1;function finishComponentSetup(e,t,i){const s=e.type;if(!e.render){if(!t&&compile$1&&!s.render){const c=s.template;if(c){process.env.NODE_ENV!=="production"&&startMeasure(e,"compile");const{isCustomElement:d,compilerOptions:g}=e.appContext.config,{delimiters:r,compilerOptions:y}=s,E=extend$4(extend$4({isCustomElement:d,delimiters:r},g),y);s.render=compile$1(c,E),process.env.NODE_ENV!=="production"&&endMeasure(e,"compile")}}e.render=s.render||NOOP,installWithProxy&&installWithProxy(e)}setCurrentInstance(e),pauseTracking(),applyOptions(e),resetTracking(),unsetCurrentInstance(),process.env.NODE_ENV!=="production"&&!s.render&&e.render===NOOP&&!t&&(!compile$1&&s.template?warn$2('Component provided template option but runtime compilation is not supported in this build of Vue. Configure your bundler to alias "vue" to "vue/dist/vue.esm-bundler.js".'):warn$2("Component is missing template or render function."))}function createAttrsProxy(e){return new Proxy(e.attrs,process.env.NODE_ENV!=="production"?{get(t,i){return markAttrsAccessed(),track(e,"get","$attrs"),t[i]},set(){return warn$2("setupContext.attrs is readonly."),!1},deleteProperty(){return warn$2("setupContext.attrs is readonly."),!1}}:{get(t,i){return track(e,"get","$attrs"),t[i]}})}function createSetupContext(e){const t=s=>{process.env.NODE_ENV!=="production"&&e.exposed&&warn$2("expose() should be called only once per setup()."),e.exposed=s||{}};let i;return process.env.NODE_ENV!=="production"?Object.freeze({get attrs(){return i||(i=createAttrsProxy(e))},get slots(){return shallowReadonly(e.slots)},get emit(){return(s,...c)=>e.emit(s,...c)},expose:t}):{get attrs(){return i||(i=createAttrsProxy(e))},slots:e.slots,emit:e.emit,expose:t}}function getExposeProxy(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in publicPropertiesMap)return publicPropertiesMap[i](e)}}))}const classifyRE$1=/(?:^|[-_])(\w)/g,classify$1=e=>e.replace(classifyRE$1,t=>t.toUpperCase()).replace(/[-_]/g,"");function getComponentName$1(e,t=!0){return isFunction$1(e)?e.displayName||e.name:e.name||t&&e.__name}function formatComponentName$1(e,t,i=!1){let s=getComponentName$1(t);if(!s&&t.__file){const c=t.__file.match(/([^/\\]+)\.\w+$/);c&&(s=c[1])}if(!s&&e&&e.parent){const c=d=>{for(const g in d)if(d[g]===t)return g};s=c(e.components||e.parent.type.components)||c(e.appContext.components)}return s?classify$1(s):i?"App":"Anonymous"}function isClassComponent(e){return isFunction$1(e)&&"__vccOpts"in e}const computed=(e,t)=>computed$1(e,t,isInSSRComponentSetup),warnRuntimeUsage=e=>warn$2(`${e}() is a compiler-hint helper that is only usable inside <script setup> of a single file component. Its arguments should be compiled away and passing it at runtime has no effect.`);function defineProps(){return process.env.NODE_ENV!=="production"&&warnRuntimeUsage("defineProps"),null}function defineEmits(){return process.env.NODE_ENV!=="production"&&warnRuntimeUsage("defineEmits"),null}function defineExpose(e){process.env.NODE_ENV!=="production"&&warnRuntimeUsage("defineExpose")}function withDefaults(e,t){return process.env.NODE_ENV!=="production"&&warnRuntimeUsage("withDefaults"),null}function useSlots(){return getContext().slots}function useAttrs(){return getContext().attrs}function getContext(){const e=getCurrentInstance();return process.env.NODE_ENV!=="production"&&!e&&warn$2("useContext() called without active instance."),e.setupContext||(e.setupContext=createSetupContext(e))}function mergeDefaults(e,t){const i=isArray$7(e)?e.reduce((s,c)=>(s[c]={},s),{}):e;for(const s in t){const c=i[s];c?isArray$7(c)||isFunction$1(c)?i[s]={type:c,default:t[s]}:c.default=t[s]:c===null?i[s]={default:t[s]}:process.env.NODE_ENV!=="production"&&warn$2(`props default key "${s}" has no corresponding declaration.`)}return i}function createPropsRestProxy(e,t){const i={};for(const s in e)t.includes(s)||Object.defineProperty(i,s,{enumerable:!0,get:()=>e[s]});return i}function withAsyncContext(e){const t=getCurrentInstance();process.env.NODE_ENV!=="production"&&!t&&warn$2("withAsyncContext called without active current instance. This is likely a bug.");let i=e();return unsetCurrentInstance(),isPromise(i)&&(i=i.catch(s=>{throw setCurrentInstance(t),s})),[i,()=>setCurrentInstance(t)]}function h(e,t,i){const s=arguments.length;return s===2?isObject$6(t)&&!isArray$7(t)?isVNode$1(t)?createVNode(e,null,[t]):createVNode(e,t):createVNode(e,null,t):(s>3?i=Array.prototype.slice.call(arguments,2):s===3&&isVNode$1(i)&&(i=[i]),createVNode(e,t,i))}const ssrContextKey=Symbol(process.env.NODE_ENV!=="production"?"ssrContext":""),useSSRContext=()=>{{const e=inject(ssrContextKey);return e||warn$2("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),e}};function isShallow(e){return!!(e&&e.__v_isShallow)}function initCustomFormatter(){if(process.env.NODE_ENV==="production"||typeof window>"u")return;const e={style:"color:#3ba776"},t={style:"color:#0b1bc9"},i={style:"color:#b62e24"},s={style:"color:#9d288c"},c={header(k){return isObject$6(k)?k.__isVue?["div",e,"VueInstance"]:isRef$1(k)?["div",{},["span",e,w(k)],"<",r(k.value),">"]:isReactive(k)?["div",{},["span",e,isShallow(k)?"ShallowReactive":"Reactive"],"<",r(k),`>${isReadonly(k)?" (readonly)":""}`]:isReadonly(k)?["div",{},["span",e,isShallow(k)?"ShallowReadonly":"Readonly"],"<",r(k),">"]:null:null},hasBody(k){return k&&k.__isVue},body(k){if(k&&k.__isVue)return["div",{},...d(k.$)]}};function d(k){const S=[];k.type.props&&k.props&&S.push(g("props",toRaw$1(k.props))),k.setupState!==EMPTY_OBJ&&S.push(g("setup",k.setupState)),k.data!==EMPTY_OBJ&&S.push(g("data",toRaw$1(k.data)));const I=y(k,"computed");I&&S.push(g("computed",I));const L=y(k,"inject");return L&&S.push(g("injected",L)),S.push(["div",{},["span",{style:s.style+";opacity:0.66"},"$ (internal): "],["object",{object:k}]]),S}function g(k,S){return S=extend$4({},S),Object.keys(S).length?["div",{style:"line-height:1.25em;margin-bottom:0.6em"},["div",{style:"color:#476582"},k],["div",{style:"padding-left:1.25em"},...Object.keys(S).map(I=>["div",{},["span",s,I+": "],r(S[I],!1)])]]:["span",{}]}function r(k,S=!0){return typeof k=="number"?["span",t,k]:typeof k=="string"?["span",i,JSON.stringify(k)]:typeof k=="boolean"?["span",s,k]:isObject$6(k)?["object",{object:S?toRaw$1(k):k}]:["span",i,String(k)]}function y(k,S){const I=k.type;if(isFunction$1(I))return;const L={};for(const D in k.ctx)E(I,D,S)&&(L[D]=k.ctx[D]);return L}function E(k,S,I){const L=k[I];if(isArray$7(L)&&L.includes(S)||isObject$6(L)&&S in L||k.extends&&E(k.extends,S,I)||k.mixins&&k.mixins.some(D=>E(D,S,I)))return!0}function w(k){return isShallow(k)?"ShallowRef":k.effect?"ComputedRef":"Ref"}window.devtoolsFormatters?window.devtoolsFormatters.push(c):window.devtoolsFormatters=[c]}function withMemo(e,t,i,s){const c=i[s];if(c&&isMemoSame(c,e))return c;const d=t();return d.memo=e.slice(),i[s]=d}function isMemoSame(e,t){const i=e.memo;if(i.length!=t.length)return!1;for(let s=0;s<i.length;s++)if(hasChanged(i[s],t[s]))return!1;return isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),!0}const version$2="3.2.37",_ssrUtils={createComponentInstance:createComponentInstance$1,setupComponent:setupComponent$1,renderComponentRoot:renderComponentRoot$1,setCurrentRenderingInstance:setCurrentRenderingInstance$1,isVNode:isVNode$1,normalizeVNode:normalizeVNode$1},ssrUtils=_ssrUtils,resolveFilter=null,compatUtils=null,svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,s)=>{const c=t?doc.createElementNS(svgNS,e):doc.createElement(e,i?{is:i}:void 0);return e==="select"&&s&&s.multiple!=null&&c.setAttribute("multiple",s.multiple),c},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,i,s,c,d){const g=i?i.previousSibling:t.lastChild;if(c&&(c===d||c.nextSibling))for(;t.insertBefore(c.cloneNode(!0),i),!(c===d||!(c=c.nextSibling)););else{templateContainer.innerHTML=s?`<svg>${e}</svg>`:e;const r=templateContainer.content;if(s){const y=r.firstChild;for(;y.firstChild;)r.appendChild(y.firstChild);r.removeChild(y)}t.insertBefore(r,i)}return[g?g.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}};function patchClass(e,t,i){const s=e._vtc;s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}function patchStyle(e,t,i){const s=e.style,c=isString$2(i);if(i&&!c){for(const d in i)setStyle(s,d,i[d]);if(t&&!isString$2(t))for(const d in t)i[d]==null&&setStyle(s,d,"")}else{const d=s.display;c?t!==i&&(s.cssText=i):t&&e.removeAttribute("style"),"_vod"in e&&(s.display=d)}}const importantRE=/\s*!important$/;function setStyle(e,t,i){if(isArray$7(i))i.forEach(s=>setStyle(e,t,s));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const s=autoPrefix(e,t);importantRE.test(i)?e.setProperty(hyphenate(s),i.replace(importantRE,""),"important"):e[s]=i}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,t){const i=prefixCache[t];if(i)return i;let s=camelize(t);if(s!=="filter"&&s in e)return prefixCache[t]=s;s=capitalize$1(s);for(let c=0;c<prefixes.length;c++){const d=prefixes[c]+s;if(d in e)return prefixCache[t]=d}return t}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,t,i,s,c){if(s&&t.startsWith("xlink:"))i==null?e.removeAttributeNS(xlinkNS,t.slice(6,t.length)):e.setAttributeNS(xlinkNS,t,i);else{const d=isSpecialBooleanAttr(t);i==null||d&&!includeBooleanAttr(i)?e.removeAttribute(t):e.setAttribute(t,d?"":i)}}function patchDOMProp(e,t,i,s,c,d,g){if(t==="innerHTML"||t==="textContent"){s&&g(s,c,d),e[t]=i==null?"":i;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=i;const y=i==null?"":i;(e.value!==y||e.tagName==="OPTION")&&(e.value=y),i==null&&e.removeAttribute(t);return}let r=!1;if(i===""||i==null){const y=typeof e[t];y==="boolean"?i=includeBooleanAttr(i):i==null&&y==="string"?(i="",r=!0):y==="number"&&(i=0,r=!0)}try{e[t]=i}catch(y){process.env.NODE_ENV!=="production"&&warn$2(`Failed setting prop "${t}" on <${e.tagName.toLowerCase()}>: value ${i} is invalid.`,y)}r&&e.removeAttribute(t)}const[_getNow,skipTimestampCheck]=(()=>{let e=Date.now,t=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const i=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(i&&Number(i[1])<=53)}return[e,t]})();let cachedNow=0;const p=Promise.resolve(),reset$1=()=>{cachedNow=0},getNow=()=>cachedNow||(p.then(reset$1),cachedNow=_getNow());function addEventListener(e,t,i,s){e.addEventListener(t,i,s)}function removeEventListener(e,t,i,s){e.removeEventListener(t,i,s)}function patchEvent(e,t,i,s,c=null){const d=e._vei||(e._vei={}),g=d[t];if(s&&g)g.value=s;else{const[r,y]=parseName(t);if(s){const E=d[t]=createInvoker(s,c);addEventListener(e,r,E,y)}else g&&(removeEventListener(e,r,g,y),d[t]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let t;if(optionsModifierRE.test(e)){t={};let i;for(;i=e.match(optionsModifierRE);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[hyphenate(e.slice(2)),t]}function createInvoker(e,t){const i=s=>{const c=s.timeStamp||_getNow();(skipTimestampCheck||c>=i.attached-1)&&callWithAsyncErrorHandling(patchStopImmediatePropagation(s,i.value),t,5,[s])};return i.value=e,i.attached=getNow(),i}function patchStopImmediatePropagation(e,t){if(isArray$7(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(s=>c=>!c._stopped&&s&&s(c))}else return t}const nativeOnRE=/^on[a-z]/,patchProp=(e,t,i,s,c=!1,d,g,r,y)=>{t==="class"?patchClass(e,s,c):t==="style"?patchStyle(e,i,s):isOn(t)?isModelListener(t)||patchEvent(e,t,i,s,g):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):shouldSetAsProp(e,t,s,c))?patchDOMProp(e,t,s,d,g,r,y):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),patchAttr(e,t,s,c))};function shouldSetAsProp(e,t,i,s){return s?!!(t==="innerHTML"||t==="textContent"||t in e&&nativeOnRE.test(t)&&isFunction$1(i)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||nativeOnRE.test(t)&&isString$2(i)?!1:t in e}function defineCustomElement(e,t){const i=defineComponent(e);class s extends VueElement{constructor(d){super(i,d,t)}}return s.def=i,s}const defineSSRCustomElement=e=>defineCustomElement(e,hydrate),BaseClass=typeof HTMLElement<"u"?HTMLElement:class{};class VueElement extends BaseClass{constructor(t,i={},s){super(),this._def=t,this._props=i,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&s?s(this._createVNode(),this.shadowRoot):(process.env.NODE_ENV!=="production"&&this.shadowRoot&&warn$2("Custom element has pre-rendered declarative shadow root but is not defined as hydratable. Use `defineSSRCustomElement`."),this.attachShadow({mode:"open"}))}connectedCallback(){this._connected=!0,this._instance||this._resolveDef()}disconnectedCallback(){this._connected=!1,nextTick$1(()=>{this._connected||(render$1(null,this.shadowRoot),this._instance=null)})}_resolveDef(){if(this._resolved)return;this._resolved=!0;for(let s=0;s<this.attributes.length;s++)this._setAttr(this.attributes[s].name);new MutationObserver(s=>{for(const c of s)this._setAttr(c.attributeName)}).observe(this,{attributes:!0});const t=s=>{const{props:c,styles:d}=s,g=!isArray$7(c),r=c?g?Object.keys(c):c:[];let y;if(g)for(const E in this._props){const w=c[E];(w===Number||w&&w.type===Number)&&(this._props[E]=toNumber$2(this._props[E]),(y||(y=Object.create(null)))[E]=!0)}this._numberProps=y;for(const E of Object.keys(this))E[0]!=="_"&&this._setProp(E,this[E],!0,!1);for(const E of r.map(camelize))Object.defineProperty(this,E,{get(){return this._getProp(E)},set(w){this._setProp(E,w)}});this._applyStyles(d),this._update()},i=this._def.__asyncLoader;i?i().then(t):t(this._def)}_setAttr(t){let i=this.getAttribute(t);this._numberProps&&this._numberProps[t]&&(i=toNumber$2(i)),this._setProp(camelize(t),i,!1)}_getProp(t){return this._props[t]}_setProp(t,i,s=!0,c=!0){i!==this._props[t]&&(this._props[t]=i,c&&this._instance&&this._update(),s&&(i===!0?this.setAttribute(hyphenate(t),""):typeof i=="string"||typeof i=="number"?this.setAttribute(hyphenate(t),i+""):i||this.removeAttribute(hyphenate(t))))}_update(){render$1(this._createVNode(),this.shadowRoot)}_createVNode(){const t=createVNode(this._def,extend$4({},this._props));return this._instance||(t.ce=i=>{this._instance=i,i.isCE=!0,process.env.NODE_ENV!=="production"&&(i.ceReload=c=>{this._styles&&(this._styles.forEach(d=>this.shadowRoot.removeChild(d)),this._styles.length=0),this._applyStyles(c),this._def.__asyncLoader||(this._instance=null,this._update())}),i.emit=(c,...d)=>{this.dispatchEvent(new CustomEvent(c,{detail:d}))};let s=this;for(;s=s&&(s.parentNode||s.host);)if(s instanceof VueElement){i.parent=s._instance;break}}),t}_applyStyles(t){t&&t.forEach(i=>{const s=document.createElement("style");s.textContent=i,this.shadowRoot.appendChild(s),process.env.NODE_ENV!=="production"&&(this._styles||(this._styles=[])).push(s)})}}function useCssModule(e="$style"){{const t=getCurrentInstance();if(!t)return process.env.NODE_ENV!=="production"&&warn$2("useCssModule must be called inside setup()"),EMPTY_OBJ;const i=t.type.__cssModules;if(!i)return process.env.NODE_ENV!=="production"&&warn$2("Current instance does not have CSS modules injected."),EMPTY_OBJ;const s=i[e];return s||(process.env.NODE_ENV!=="production"&&warn$2(`Current instance does not have CSS module named "${e}".`),EMPTY_OBJ)}}function useCssVars(e){const t=getCurrentInstance();if(!t){process.env.NODE_ENV!=="production"&&warn$2("useCssVars is called without current active component instance.");return}const i=()=>setVarsOnVNode(t.subTree,e(t.proxy));watchPostEffect(i),onMounted(()=>{const s=new MutationObserver(i);s.observe(t.subTree.el.parentNode,{childList:!0}),onUnmounted(()=>s.disconnect())})}function setVarsOnVNode(e,t){if(e.shapeFlag&128){const i=e.suspense;e=i.activeBranch,i.pendingBranch&&!i.isHydrating&&i.effects.push(()=>{setVarsOnVNode(i.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)setVarsOnNode(e.el,t);else if(e.type===Fragment)e.children.forEach(i=>setVarsOnVNode(i,t));else if(e.type===Static){let{el:i,anchor:s}=e;for(;i&&(setVarsOnNode(i,t),i!==s);)i=i.nextSibling}}function setVarsOnNode(e,t){if(e.nodeType===1){const i=e.style;for(const s in t)i.setProperty(`--${s}`,t[s])}}const TRANSITION="transition",ANIMATION="animation",Transition=(e,{slots:t})=>h(BaseTransition,resolveTransitionProps(e),t);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=Transition.props=extend$4({},BaseTransition.props,DOMTransitionPropsValidators),callHook=(e,t=[])=>{isArray$7(e)?e.forEach(i=>i(...t)):e&&e(...t)},hasExplicitCallback=e=>e?isArray$7(e)?e.some(t=>t.length>1):e.length>1:!1;function resolveTransitionProps(e){const t={};for(const de in e)de in DOMTransitionPropsValidators||(t[de]=e[de]);if(e.css===!1)return t;const{name:i="v",type:s,duration:c,enterFromClass:d=`${i}-enter-from`,enterActiveClass:g=`${i}-enter-active`,enterToClass:r=`${i}-enter-to`,appearFromClass:y=d,appearActiveClass:E=g,appearToClass:w=r,leaveFromClass:k=`${i}-leave-from`,leaveActiveClass:S=`${i}-leave-active`,leaveToClass:I=`${i}-leave-to`}=e,L=normalizeDuration(c),D=L&&L[0],O=L&&L[1],{onBeforeEnter:V,onEnter:z,onEnterCancelled:U,onLeave:Z,onLeaveCancelled:W,onBeforeAppear:ne=V,onAppear:re=z,onAppearCancelled:ie=U}=t,Ce=(de,Le,Ge)=>{removeTransitionClass(de,Le?w:r),removeTransitionClass(de,Le?E:g),Ge&&Ge()},we=(de,Le)=>{de._isLeaving=!1,removeTransitionClass(de,k),removeTransitionClass(de,I),removeTransitionClass(de,S),Le&&Le()},fe=de=>(Le,Ge)=>{const wt=de?re:z,Te=()=>Ce(Le,de,Ge);callHook(wt,[Le,Te]),nextFrame(()=>{removeTransitionClass(Le,de?y:d),addTransitionClass(Le,de?w:r),hasExplicitCallback(wt)||whenTransitionEnds(Le,s,D,Te)})};return extend$4(t,{onBeforeEnter(de){callHook(V,[de]),addTransitionClass(de,d),addTransitionClass(de,g)},onBeforeAppear(de){callHook(ne,[de]),addTransitionClass(de,y),addTransitionClass(de,E)},onEnter:fe(!1),onAppear:fe(!0),onLeave(de,Le){de._isLeaving=!0;const Ge=()=>we(de,Le);addTransitionClass(de,k),forceReflow(),addTransitionClass(de,S),nextFrame(()=>{!de._isLeaving||(removeTransitionClass(de,k),addTransitionClass(de,I),hasExplicitCallback(Z)||whenTransitionEnds(de,s,O,Ge))}),callHook(Z,[de,Ge])},onEnterCancelled(de){Ce(de,!1),callHook(U,[de])},onAppearCancelled(de){Ce(de,!0),callHook(ie,[de])},onLeaveCancelled(de){we(de),callHook(W,[de])}})}function normalizeDuration(e){if(e==null)return null;if(isObject$6(e))return[NumberOf(e.enter),NumberOf(e.leave)];{const t=NumberOf(e);return[t,t]}}function NumberOf(e){const t=toNumber$2(e);return process.env.NODE_ENV!=="production"&&validateDuration(t),t}function validateDuration(e){typeof e!="number"?warn$2(`<transition> explicit duration is not a valid number - got ${JSON.stringify(e)}.`):isNaN(e)&&warn$2("<transition> explicit duration is NaN - the duration expression might be incorrect.")}function addTransitionClass(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.add(i)),(e._vtc||(e._vtc=new Set)).add(t)}function removeTransitionClass(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const{_vtc:i}=e;i&&(i.delete(t),i.size||(e._vtc=void 0))}function nextFrame(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let endId=0;function whenTransitionEnds(e,t,i,s){const c=e._endId=++endId,d=()=>{c===e._endId&&s()};if(i)return setTimeout(d,i);const{type:g,timeout:r,propCount:y}=getTransitionInfo(e,t);if(!g)return s();const E=g+"end";let w=0;const k=()=>{e.removeEventListener(E,S),d()},S=I=>{I.target===e&&++w>=y&&k()};setTimeout(()=>{w<y&&k()},r+1),e.addEventListener(E,S)}function getTransitionInfo(e,t){const i=window.getComputedStyle(e),s=L=>(i[L]||"").split(", "),c=s(TRANSITION+"Delay"),d=s(TRANSITION+"Duration"),g=getTimeout(c,d),r=s(ANIMATION+"Delay"),y=s(ANIMATION+"Duration"),E=getTimeout(r,y);let w=null,k=0,S=0;t===TRANSITION?g>0&&(w=TRANSITION,k=g,S=d.length):t===ANIMATION?E>0&&(w=ANIMATION,k=E,S=y.length):(k=Math.max(g,E),w=k>0?g>E?TRANSITION:ANIMATION:null,S=w?w===TRANSITION?d.length:y.length:0);const I=w===TRANSITION&&/\b(transform|all)(,|$)/.test(i[TRANSITION+"Property"]);return{type:w,timeout:k,propCount:S,hasTransform:I}}function getTimeout(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((i,s)=>toMs(i)+toMs(e[s])))}function toMs(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}const positionMap=new WeakMap,newPositionMap=new WeakMap,TransitionGroupImpl={name:"TransitionGroup",props:extend$4({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(e,{slots:t}){const i=getCurrentInstance(),s=useTransitionState();let c,d;return onUpdated(()=>{if(!c.length)return;const g=e.moveClass||`${e.name||"v"}-move`;if(!hasCSSTransform(c[0].el,i.vnode.el,g))return;c.forEach(callPendingCbs),c.forEach(recordPosition);const r=c.filter(applyTranslation);forceReflow(),r.forEach(y=>{const E=y.el,w=E.style;addTransitionClass(E,g),w.transform=w.webkitTransform=w.transitionDuration="";const k=E._moveCb=S=>{S&&S.target!==E||(!S||/transform$/.test(S.propertyName))&&(E.removeEventListener("transitionend",k),E._moveCb=null,removeTransitionClass(E,g))};E.addEventListener("transitionend",k)})}),()=>{const g=toRaw$1(e),r=resolveTransitionProps(g);let y=g.tag||Fragment;c=d,d=t.default?getTransitionRawChildren(t.default()):[];for(let E=0;E<d.length;E++){const w=d[E];w.key!=null?setTransitionHooks(w,resolveTransitionHooks(w,r,s,i)):process.env.NODE_ENV!=="production"&&warn$2("<TransitionGroup> children must be keyed.")}if(c)for(let E=0;E<c.length;E++){const w=c[E];setTransitionHooks(w,resolveTransitionHooks(w,r,s,i)),positionMap.set(w,w.el.getBoundingClientRect())}return createVNode(y,null,d)}}},TransitionGroup=TransitionGroupImpl;function callPendingCbs(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function recordPosition(e){newPositionMap.set(e,e.el.getBoundingClientRect())}function applyTranslation(e){const t=positionMap.get(e),i=newPositionMap.get(e),s=t.left-i.left,c=t.top-i.top;if(s||c){const d=e.el.style;return d.transform=d.webkitTransform=`translate(${s}px,${c}px)`,d.transitionDuration="0s",e}}function hasCSSTransform(e,t,i){const s=e.cloneNode();e._vtc&&e._vtc.forEach(g=>{g.split(/\s+/).forEach(r=>r&&s.classList.remove(r))}),i.split(/\s+/).forEach(g=>g&&s.classList.add(g)),s.style.display="none";const c=t.nodeType===1?t:t.parentNode;c.appendChild(s);const{hasTransform:d}=getTransitionInfo(s);return c.removeChild(s),d}const getModelAssigner=e=>{const t=e.props["onUpdate:modelValue"]||!1;return isArray$7(t)?i=>invokeArrayFns(t,i):t};function onCompositionStart(e){e.target.composing=!0}function onCompositionEnd(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const vModelText={created(e,{modifiers:{lazy:t,trim:i,number:s}},c){e._assign=getModelAssigner(c);const d=s||c.props&&c.props.type==="number";addEventListener(e,t?"change":"input",g=>{if(g.target.composing)return;let r=e.value;i&&(r=r.trim()),d&&(r=toNumber$2(r)),e._assign(r)}),i&&addEventListener(e,"change",()=>{e.value=e.value.trim()}),t||(addEventListener(e,"compositionstart",onCompositionStart),addEventListener(e,"compositionend",onCompositionEnd),addEventListener(e,"change",onCompositionEnd))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:i,trim:s,number:c}},d){if(e._assign=getModelAssigner(d),e.composing||document.activeElement===e&&e.type!=="range"&&(i||s&&e.value.trim()===t||(c||e.type==="number")&&toNumber$2(e.value)===t))return;const g=t==null?"":t;e.value!==g&&(e.value=g)}},vModelCheckbox={deep:!0,created(e,t,i){e._assign=getModelAssigner(i),addEventListener(e,"change",()=>{const s=e._modelValue,c=getValue$1(e),d=e.checked,g=e._assign;if(isArray$7(s)){const r=looseIndexOf(s,c),y=r!==-1;if(d&&!y)g(s.concat(c));else if(!d&&y){const E=[...s];E.splice(r,1),g(E)}}else if(isSet$1(s)){const r=new Set(s);d?r.add(c):r.delete(c),g(r)}else g(getCheckboxValue(e,d))})},mounted:setChecked,beforeUpdate(e,t,i){e._assign=getModelAssigner(i),setChecked(e,t,i)}};function setChecked(e,{value:t,oldValue:i},s){e._modelValue=t,isArray$7(t)?e.checked=looseIndexOf(t,s.props.value)>-1:isSet$1(t)?e.checked=t.has(s.props.value):t!==i&&(e.checked=looseEqual(t,getCheckboxValue(e,!0)))}const vModelRadio={created(e,{value:t},i){e.checked=looseEqual(t,i.props.value),e._assign=getModelAssigner(i),addEventListener(e,"change",()=>{e._assign(getValue$1(e))})},beforeUpdate(e,{value:t,oldValue:i},s){e._assign=getModelAssigner(s),t!==i&&(e.checked=looseEqual(t,s.props.value))}},vModelSelect={deep:!0,created(e,{value:t,modifiers:{number:i}},s){const c=isSet$1(t);addEventListener(e,"change",()=>{const d=Array.prototype.filter.call(e.options,g=>g.selected).map(g=>i?toNumber$2(getValue$1(g)):getValue$1(g));e._assign(e.multiple?c?new Set(d):d:d[0])}),e._assign=getModelAssigner(s)},mounted(e,{value:t}){setSelected(e,t)},beforeUpdate(e,t,i){e._assign=getModelAssigner(i)},updated(e,{value:t}){setSelected(e,t)}};function setSelected(e,t){const i=e.multiple;if(i&&!isArray$7(t)&&!isSet$1(t)){process.env.NODE_ENV!=="production"&&warn$2(`<select multiple v-model> expects an Array or Set value for its binding, but got ${Object.prototype.toString.call(t).slice(8,-1)}.`);return}for(let s=0,c=e.options.length;s<c;s++){const d=e.options[s],g=getValue$1(d);if(i)isArray$7(t)?d.selected=looseIndexOf(t,g)>-1:d.selected=t.has(g);else if(looseEqual(getValue$1(d),t)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!i&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}function getValue$1(e){return"_value"in e?e._value:e.value}function getCheckboxValue(e,t){const i=t?"_trueValue":"_falseValue";return i in e?e[i]:t}const vModelDynamic={created(e,t,i){callModelHook(e,t,i,null,"created")},mounted(e,t,i){callModelHook(e,t,i,null,"mounted")},beforeUpdate(e,t,i,s){callModelHook(e,t,i,s,"beforeUpdate")},updated(e,t,i,s){callModelHook(e,t,i,s,"updated")}};function resolveDynamicModel(e,t){switch(e){case"SELECT":return vModelSelect;case"TEXTAREA":return vModelText;default:switch(t){case"checkbox":return vModelCheckbox;case"radio":return vModelRadio;default:return vModelText}}}function callModelHook(e,t,i,s,c){const g=resolveDynamicModel(e.tagName,i.props&&i.props.type)[c];g&&g(e,t,i,s)}function initVModelForSSR(){vModelText.getSSRProps=({value:e})=>({value:e}),vModelRadio.getSSRProps=({value:e},t)=>{if(t.props&&looseEqual(t.props.value,e))return{checked:!0}},vModelCheckbox.getSSRProps=({value:e},t)=>{if(isArray$7(e)){if(t.props&&looseIndexOf(e,t.props.value)>-1)return{checked:!0}}else if(isSet$1(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},vModelDynamic.getSSRProps=(e,t)=>{if(typeof t.type!="string")return;const i=resolveDynamicModel(t.type.toUpperCase(),t.props&&t.props.type);if(i.getSSRProps)return i.getSSRProps(e,t)}}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>systemModifiers.some(i=>e[`${i}Key`]&&!t.includes(i))},withModifiers=(e,t)=>(i,...s)=>{for(let c=0;c<t.length;c++){const d=modifierGuards[t[c]];if(d&&d(i,t))return}return e(i,...s)},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(e,t)=>i=>{if(!("key"in i))return;const s=hyphenate(i.key);if(t.some(c=>c===s||keyNames[c]===s))return e(i)},vShow={beforeMount(e,{value:t},{transition:i}){e._vod=e.style.display==="none"?"":e.style.display,i&&t?i.beforeEnter(e):setDisplay(e,t)},mounted(e,{value:t},{transition:i}){i&&t&&i.enter(e)},updated(e,{value:t,oldValue:i},{transition:s}){!t!=!i&&(s?t?(s.beforeEnter(e),setDisplay(e,!0),s.enter(e)):s.leave(e,()=>{setDisplay(e,!1)}):setDisplay(e,t))},beforeUnmount(e,{value:t}){setDisplay(e,t)}};function setDisplay(e,t){e.style.display=t?e._vod:"none"}function initVShowForSSR(){vShow.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const rendererOptions=extend$4({patchProp},nodeOps);let renderer,enabledHydration=!1;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}function ensureHydrationRenderer(){return renderer=enabledHydration?renderer:createHydrationRenderer(rendererOptions),enabledHydration=!0,renderer}const render$1=(...e)=>{ensureRenderer().render(...e)},hydrate=(...e)=>{ensureHydrationRenderer().hydrate(...e)},createApp$1=(...e)=>{const t=ensureRenderer().createApp(...e);process.env.NODE_ENV!=="production"&&(injectNativeTagCheck(t),injectCompilerOptionsCheck(t));const{mount:i}=t;return t.mount=s=>{const c=normalizeContainer(s);if(!c)return;const d=t._component;!isFunction$1(d)&&!d.render&&!d.template&&(d.template=c.innerHTML),c.innerHTML="";const g=i(c,!1,c instanceof SVGElement);return c instanceof Element&&(c.removeAttribute("v-cloak"),c.setAttribute("data-v-app","")),g},t},createSSRApp=(...e)=>{const t=ensureHydrationRenderer().createApp(...e);process.env.NODE_ENV!=="production"&&(injectNativeTagCheck(t),injectCompilerOptionsCheck(t));const{mount:i}=t;return t.mount=s=>{const c=normalizeContainer(s);if(c)return i(c,!0,c instanceof SVGElement)},t};function injectNativeTagCheck(e){Object.defineProperty(e.config,"isNativeTag",{value:t=>isHTMLTag(t)||isSVGTag(t),writable:!1})}function injectCompilerOptionsCheck(e){if(isRuntimeOnly()){const t=e.config.isCustomElement;Object.defineProperty(e.config,"isCustomElement",{get(){return t},set(){warn$2("The `isCustomElement` config option is deprecated. Use `compilerOptions.isCustomElement` instead.")}});const i=e.config.compilerOptions,s='The `compilerOptions` config option is only respected when using a build of Vue.js that includes the runtime compiler (aka "full build"). Since you are using the runtime-only build, `compilerOptions` must be passed to `@vue/compiler-dom` in the build setup instead.\n- For vue-loader: pass it via vue-loader\'s `compilerOptions` loader option.\n- For vue-cli: see https://cli.vuejs.org/guide/webpack.html#modifying-options-of-a-loader\n- For vite: pass it via @vitejs/plugin-vue options. See https://github.com/vitejs/vite/tree/main/packages/plugin-vue#example-for-passing-options-to-vuecompiler-dom';Object.defineProperty(e.config,"compilerOptions",{get(){return warn$2(s),i},set(){warn$2(s)}})}}function normalizeContainer(e){if(isString$2(e)){const t=document.querySelector(e);return process.env.NODE_ENV!=="production"&&!t&&warn$2(`Failed to mount app: mount target selector "${e}" returned null.`),t}return process.env.NODE_ENV!=="production"&&window.ShadowRoot&&e instanceof window.ShadowRoot&&e.mode==="closed"&&warn$2('mounting on a ShadowRoot with `{mode: "closed"}` may lead to unpredictable bugs'),e}let ssrDirectiveInitialized=!1;const initDirectivesForSSR=()=>{ssrDirectiveInitialized||(ssrDirectiveInitialized=!0,initVModelForSSR(),initVShowForSSR())};function initDev(){initCustomFormatter()}process.env.NODE_ENV!=="production"&&initDev();const compile=()=>{process.env.NODE_ENV!=="production"&&warn$2('Runtime compilation is not supported in this build of Vue. Configure your bundler to alias "vue" to "vue/dist/vue.esm-bundler.js".')},vue_runtime_esmBundler=Object.freeze(Object.defineProperty({__proto__:null,compile,EffectScope,ReactiveEffect,customRef,effect,effectScope,getCurrentScope,isProxy,isReactive,isReadonly,isRef:isRef$1,isShallow:isShallow$1,markRaw,onScopeDispose,proxyRefs,reactive,readonly,ref,shallowReactive,shallowReadonly,shallowRef,stop,toRaw:toRaw$1,toRef,toRefs,triggerRef,unref,camelize,capitalize:capitalize$1,normalizeClass,normalizeProps,normalizeStyle,toDisplayString,toHandlerKey,BaseTransition,Comment:Comment$1,Fragment,KeepAlive,Static,Suspense,Teleport,Text,callWithAsyncErrorHandling,callWithErrorHandling:callWithErrorHandling$1,cloneVNode,compatUtils,computed,createBlock,createCommentVNode,createElementBlock,createElementVNode:createBaseVNode,createHydrationRenderer,createPropsRestProxy,createRenderer,createSlots,createStaticVNode,createTextVNode,createVNode,defineAsyncComponent,defineComponent,defineEmits,defineExpose,defineProps,get devtools(){return devtools},getCurrentInstance,getTransitionRawChildren,guardReactiveProps,h,handleError:handleError$1,initCustomFormatter,inject,isMemoSame,isRuntimeOnly,isVNode:isVNode$1,mergeDefaults,mergeProps,nextTick:nextTick$1,onActivated,onBeforeMount,onBeforeUnmount,onBeforeUpdate,onDeactivated,onErrorCaptured,onMounted,onRenderTracked,onRenderTriggered,onServerPrefetch,onUnmounted,onUpdated,openBlock,popScopeId,provide,pushScopeId,queuePostFlushCb,registerRuntimeCompiler,renderList,renderSlot,resolveComponent,resolveDirective,resolveDynamicComponent,resolveFilter,resolveTransitionHooks,setBlockTracking,setDevtoolsHook,setTransitionHooks,ssrContextKey,ssrUtils,toHandlers,transformVNodeArgs,useAttrs,useSSRContext,useSlots,useTransitionState,version:version$2,warn:warn$2,watch,watchEffect,watchPostEffect,watchSyncEffect,withAsyncContext,withCtx,withDefaults,withDirectives,withMemo,withScopeId,Transition,TransitionGroup,VueElement,createApp:createApp$1,createSSRApp,defineCustomElement,defineSSRCustomElement,hydrate,initDirectivesForSSR,render:render$1,useCssModule,useCssVars,vModelCheckbox,vModelDynamic,vModelRadio,vModelSelect,vModelText,vShow,withKeys,withModifiers},Symbol.toStringTag,{value:"Module"}));var vueRouter_prod={};const require$$0$1=getAugmentedNamespace(vue_runtime_esmBundler);/*!
  * vue-router v4.1.3
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=require$$0$1;const i=typeof window<"u";function s(me){return me.__esModule||me[Symbol.toStringTag]==="Module"}const c=Object.assign;function d(me,Ne){const He={};for(const rt in Ne){const ft=Ne[rt];He[rt]=r(ft)?ft.map(me):me(ft)}return He}const g=()=>{},r=Array.isArray,y=/\/$/,E=me=>me.replace(y,"");function w(me,Ne,He="/"){let rt,ft={},Ut="",Jt="";const Xt=Ne.indexOf("#");let Dt=Ne.indexOf("?");return Xt<Dt&&Xt>=0&&(Dt=-1),Dt>-1&&(rt=Ne.slice(0,Dt),Ut=Ne.slice(Dt+1,Xt>-1?Xt:Ne.length),ft=me(Ut)),Xt>-1&&(rt=rt||Ne.slice(0,Xt),Jt=Ne.slice(Xt,Ne.length)),rt=z(rt!=null?rt:Ne,He),{fullPath:rt+(Ut&&"?")+Ut+Jt,path:rt,query:ft,hash:Jt}}function k(me,Ne){const He=Ne.query?me(Ne.query):"";return Ne.path+(He&&"?")+He+(Ne.hash||"")}function S(me,Ne){return!Ne||!me.toLowerCase().startsWith(Ne.toLowerCase())?me:me.slice(Ne.length)||"/"}function I(me,Ne,He){const rt=Ne.matched.length-1,ft=He.matched.length-1;return rt>-1&&rt===ft&&L(Ne.matched[rt],He.matched[ft])&&D(Ne.params,He.params)&&me(Ne.query)===me(He.query)&&Ne.hash===He.hash}function L(me,Ne){return(me.aliasOf||me)===(Ne.aliasOf||Ne)}function D(me,Ne){if(Object.keys(me).length!==Object.keys(Ne).length)return!1;for(const He in me)if(!O(me[He],Ne[He]))return!1;return!0}function O(me,Ne){return r(me)?V(me,Ne):r(Ne)?V(Ne,me):me===Ne}function V(me,Ne){return r(Ne)?me.length===Ne.length&&me.every((He,rt)=>He===Ne[rt]):me.length===1&&me[0]===Ne}function z(me,Ne){if(me.startsWith("/"))return me;if(!me)return Ne;const He=Ne.split("/"),rt=me.split("/");let ft=He.length-1,Ut,Jt;for(Ut=0;Ut<rt.length;Ut++)if(Jt=rt[Ut],Jt!==".")if(Jt==="..")ft>1&&ft--;else break;return He.slice(0,ft).join("/")+"/"+rt.slice(Ut-(Ut===rt.length?1:0)).join("/")}var U;(function(me){me.pop="pop",me.push="push"})(U||(U={}));var Z;(function(me){me.back="back",me.forward="forward",me.unknown=""})(Z||(Z={}));const W="";function ne(me){if(!me)if(i){const Ne=document.querySelector("base");me=Ne&&Ne.getAttribute("href")||"/",me=me.replace(/^\w+:\/\/[^\/]+/,"")}else me="/";return me[0]!=="/"&&me[0]!=="#"&&(me="/"+me),E(me)}const re=/^[^#]+#/;function ie(me,Ne){return me.replace(re,"#")+Ne}function Ce(me,Ne){const He=document.documentElement.getBoundingClientRect(),rt=me.getBoundingClientRect();return{behavior:Ne.behavior,left:rt.left-He.left-(Ne.left||0),top:rt.top-He.top-(Ne.top||0)}}const we=()=>({left:window.pageXOffset,top:window.pageYOffset});function fe(me){let Ne;if("el"in me){const He=me.el,rt=typeof He=="string"&&He.startsWith("#"),ft=typeof He=="string"?rt?document.getElementById(He.slice(1)):document.querySelector(He):He;if(!ft)return;Ne=Ce(ft,me)}else Ne=me;"scrollBehavior"in document.documentElement.style?window.scrollTo(Ne):window.scrollTo(Ne.left!=null?Ne.left:window.pageXOffset,Ne.top!=null?Ne.top:window.pageYOffset)}function de(me,Ne){return(history.state?history.state.position-Ne:-1)+me}const Le=new Map;function Ge(me,Ne){Le.set(me,Ne)}function wt(me){const Ne=Le.get(me);return Le.delete(me),Ne}let Te=()=>location.protocol+"//"+location.host;function ze(me,Ne){const{pathname:He,search:rt,hash:ft}=Ne,Ut=me.indexOf("#");if(Ut>-1){let Xt=ft.includes(me.slice(Ut))?me.slice(Ut).length:1,Dt=ft.slice(Xt);return Dt[0]!=="/"&&(Dt="/"+Dt),S(Dt,"")}return S(He,me)+rt+ft}function Ke(me,Ne,He,rt){let ft=[],Ut=[],Jt=null;const Xt=({state:Pt})=>{const sn=ze(me,location),Pn=He.value,jn=Ne.value;let Wn=0;if(Pt){if(He.value=sn,Ne.value=Pt,Jt&&Jt===Pn){Jt=null;return}Wn=jn?Pt.position-jn.position:0}else rt(sn);ft.forEach(Qn=>{Qn(He.value,Pn,{delta:Wn,type:U.pop,direction:Wn?Wn>0?Z.forward:Z.back:Z.unknown})})};function Dt(){Jt=He.value}function Ht(Pt){ft.push(Pt);const sn=()=>{const Pn=ft.indexOf(Pt);Pn>-1&&ft.splice(Pn,1)};return Ut.push(sn),sn}function At(){const{history:Pt}=window;!Pt.state||Pt.replaceState(c({},Pt.state,{scroll:we()}),"")}function Lt(){for(const Pt of Ut)Pt();Ut=[],window.removeEventListener("popstate",Xt),window.removeEventListener("beforeunload",At)}return window.addEventListener("popstate",Xt),window.addEventListener("beforeunload",At),{pauseListeners:Dt,listen:Ht,destroy:Lt}}function ut(me,Ne,He,rt=!1,ft=!1){return{back:me,current:Ne,forward:He,replaced:rt,position:window.history.length,scroll:ft?we():null}}function Nt(me){const{history:Ne,location:He}=window,rt={value:ze(me,He)},ft={value:Ne.state};ft.value||Ut(rt.value,{back:null,current:rt.value,forward:null,position:Ne.length-1,replaced:!0,scroll:null},!0);function Ut(Dt,Ht,At){const Lt=me.indexOf("#"),Pt=Lt>-1?(He.host&&document.querySelector("base")?me:me.slice(Lt))+Dt:Te()+me+Dt;try{Ne[At?"replaceState":"pushState"](Ht,"",Pt),ft.value=Ht}catch(sn){console.error(sn),He[At?"replace":"assign"](Pt)}}function Jt(Dt,Ht){const At=c({},Ne.state,ut(ft.value.back,Dt,ft.value.forward,!0),Ht,{position:ft.value.position});Ut(Dt,At,!0),rt.value=Dt}function Xt(Dt,Ht){const At=c({},ft.value,Ne.state,{forward:Dt,scroll:we()});Ut(At.current,At,!0);const Lt=c({},ut(rt.value,Dt,null),{position:At.position+1},Ht);Ut(Dt,Lt,!1),rt.value=Dt}return{location:rt,state:ft,push:Xt,replace:Jt}}function an(me){me=ne(me);const Ne=Nt(me),He=Ke(me,Ne.state,Ne.location,Ne.replace);function rt(Ut,Jt=!0){Jt||He.pauseListeners(),history.go(Ut)}const ft=c({location:"",base:me,go:rt,createHref:ie.bind(null,me)},Ne,He);return Object.defineProperty(ft,"location",{enumerable:!0,get:()=>Ne.location.value}),Object.defineProperty(ft,"state",{enumerable:!0,get:()=>Ne.state.value}),ft}function un(me=""){let Ne=[],He=[W],rt=0;me=ne(me);function ft(Xt){rt++,rt===He.length||He.splice(rt),He.push(Xt)}function Ut(Xt,Dt,{direction:Ht,delta:At}){const Lt={direction:Ht,delta:At,type:U.pop};for(const Pt of Ne)Pt(Xt,Dt,Lt)}const Jt={location:W,state:{},base:me,createHref:ie.bind(null,me),replace(Xt){He.splice(rt--,1),ft(Xt)},push(Xt,Dt){ft(Xt)},listen(Xt){return Ne.push(Xt),()=>{const Dt=Ne.indexOf(Xt);Dt>-1&&Ne.splice(Dt,1)}},destroy(){Ne=[],He=[W],rt=0},go(Xt,Dt=!0){const Ht=this.location,At=Xt<0?Z.back:Z.forward;rt=Math.max(0,Math.min(rt+Xt,He.length-1)),Dt&&Ut(this.location,Ht,{direction:At,delta:Xt})}};return Object.defineProperty(Jt,"location",{enumerable:!0,get:()=>He[rt]}),Jt}function wn(me){return me=location.host?me||location.pathname+location.search:"",me.includes("#")||(me+="#"),an(me)}function An(me){return typeof me=="string"||me&&typeof me=="object"}function kn(me){return typeof me=="string"||typeof me=="symbol"}const En={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Vn=Symbol("");e.NavigationFailureType=void 0,function(me){me[me.aborted=4]="aborted",me[me.cancelled=8]="cancelled",me[me.duplicated=16]="duplicated"}(e.NavigationFailureType||(e.NavigationFailureType={}));const ni={[1]({location:me,currentLocation:Ne}){return`No match for
 ${JSON.stringify(me)}${Ne?`
while being at
`+JSON.stringify(Ne):""}`},[2]({from:me,to:Ne}){return`Redirected from "${me.fullPath}" to "${yi(Ne)}" via a navigation guard.`},[4]({from:me,to:Ne}){return`Navigation aborted from "${me.fullPath}" to "${Ne.fullPath}" via a navigation guard.`},[8]({from:me,to:Ne}){return`Navigation cancelled from "${me.fullPath}" to "${Ne.fullPath}" with a new navigation.`},[16]({from:me,to:Ne}){return`Avoided redundant navigation to current location: "${me.fullPath}".`}};function Xn(me,Ne){return c(new Error(ni[me](Ne)),{type:me,[Vn]:!0},Ne)}function Ln(me,Ne){return me instanceof Error&&Vn in me&&(Ne==null||!!(me.type&Ne))}const gi=["params","query","hash"];function yi(me){if(typeof me=="string")return me;if("path"in me)return me.path;const Ne={};for(const He of gi)He in me&&(Ne[He]=me[He]);return JSON.stringify(Ne,null,2)}const Ei="[^/]+?",ve={sensitive:!1,strict:!1,start:!0,end:!0},Ve=/[.+*?^${}()[\]/\\]/g;function pt(me,Ne){const He=c({},ve,Ne),rt=[];let ft=He.start?"^":"";const Ut=[];for(const Ht of me){const At=Ht.length?[]:[90];He.strict&&!Ht.length&&(ft+="/");for(let Lt=0;Lt<Ht.length;Lt++){const Pt=Ht[Lt];let sn=40+(He.sensitive?.25:0);if(Pt.type===0)Lt||(ft+="/"),ft+=Pt.value.replace(Ve,"\\$&"),sn+=40;else if(Pt.type===1){const{value:Pn,repeatable:jn,optional:Wn,regexp:Qn}=Pt;Ut.push({name:Pn,repeatable:jn,optional:Wn});const Zn=Qn||Ei;if(Zn!==Ei){sn+=10;try{new RegExp(`(${Zn})`)}catch(Fi){throw new Error(`Invalid custom RegExp for param "${Pn}" (${Zn}): `+Fi.message)}}let zn=jn?`((?:${Zn})(?:/(?:${Zn}))*)`:`(${Zn})`;Lt||(zn=Wn&&Ht.length<2?`(?:/${zn})`:"/"+zn),Wn&&(zn+="?"),ft+=zn,sn+=20,Wn&&(sn+=-8),jn&&(sn+=-20),Zn===".*"&&(sn+=-50)}At.push(sn)}rt.push(At)}if(He.strict&&He.end){const Ht=rt.length-1;rt[Ht][rt[Ht].length-1]+=.7000000000000001}He.strict||(ft+="/?"),He.end?ft+="$":He.strict&&(ft+="(?:/|$)");const Jt=new RegExp(ft,He.sensitive?"":"i");function Xt(Ht){const At=Ht.match(Jt),Lt={};if(!At)return null;for(let Pt=1;Pt<At.length;Pt++){const sn=At[Pt]||"",Pn=Ut[Pt-1];Lt[Pn.name]=sn&&Pn.repeatable?sn.split("/"):sn}return Lt}function Dt(Ht){let At="",Lt=!1;for(const Pt of me){(!Lt||!At.endsWith("/"))&&(At+="/"),Lt=!1;for(const sn of Pt)if(sn.type===0)At+=sn.value;else if(sn.type===1){const{value:Pn,repeatable:jn,optional:Wn}=sn,Qn=Pn in Ht?Ht[Pn]:"";if(r(Qn)&&!jn)throw new Error(`Provided param "${Pn}" is an array but it is not repeatable (* or + modifiers)`);const Zn=r(Qn)?Qn.join("/"):Qn;if(!Zn)if(Wn)Pt.length<2&&(At.endsWith("/")?At=At.slice(0,-1):Lt=!0);else throw new Error(`Missing required param "${Pn}"`);At+=Zn}}return At||"/"}return{re:Jt,score:rt,keys:Ut,parse:Xt,stringify:Dt}}function Ze(me,Ne){let He=0;for(;He<me.length&&He<Ne.length;){const rt=Ne[He]-me[He];if(rt)return rt;He++}return me.length<Ne.length?me.length===1&&me[0]===40+40?-1:1:me.length>Ne.length?Ne.length===1&&Ne[0]===40+40?1:-1:0}function mt(me,Ne){let He=0;const rt=me.score,ft=Ne.score;for(;He<rt.length&&He<ft.length;){const Ut=Ze(rt[He],ft[He]);if(Ut)return Ut;He++}if(Math.abs(ft.length-rt.length)===1){if(Qe(rt))return 1;if(Qe(ft))return-1}return ft.length-rt.length}function Qe(me){const Ne=me[me.length-1];return me.length>0&&Ne[Ne.length-1]<0}const Ue={type:0,value:""},vt=/[a-zA-Z0-9_]/;function dt(me){if(!me)return[[]];if(me==="/")return[[Ue]];if(!me.startsWith("/"))throw new Error(`Invalid path "${me}"`);function Ne(sn){throw new Error(`ERR (${He})/"${Ht}": ${sn}`)}let He=0,rt=He;const ft=[];let Ut;function Jt(){Ut&&ft.push(Ut),Ut=[]}let Xt=0,Dt,Ht="",At="";function Lt(){!Ht||(He===0?Ut.push({type:0,value:Ht}):He===1||He===2||He===3?(Ut.length>1&&(Dt==="*"||Dt==="+")&&Ne(`A repeatable param (${Ht}) must be alone in its segment. eg: '/:ids+.`),Ut.push({type:1,value:Ht,regexp:At,repeatable:Dt==="*"||Dt==="+",optional:Dt==="*"||Dt==="?"})):Ne("Invalid state to consume buffer"),Ht="")}function Pt(){Ht+=Dt}for(;Xt<me.length;){if(Dt=me[Xt++],Dt==="\\"&&He!==2){rt=He,He=4;continue}switch(He){case 0:Dt==="/"?(Ht&&Lt(),Jt()):Dt===":"?(Lt(),He=1):Pt();break;case 4:Pt(),He=rt;break;case 1:Dt==="("?He=2:vt.test(Dt)?Pt():(Lt(),He=0,Dt!=="*"&&Dt!=="?"&&Dt!=="+"&&Xt--);break;case 2:Dt===")"?At[At.length-1]=="\\"?At=At.slice(0,-1)+Dt:He=3:At+=Dt;break;case 3:Lt(),He=0,Dt!=="*"&&Dt!=="?"&&Dt!=="+"&&Xt--,At="";break;default:Ne("Unknown state");break}}return He===2&&Ne(`Unfinished custom RegExp for param "${Ht}"`),Lt(),Jt(),ft}function ct(me,Ne,He){const rt=pt(dt(me.path),He),ft=c(rt,{record:me,parent:Ne,children:[],alias:[]});return Ne&&!ft.record.aliasOf==!Ne.record.aliasOf&&Ne.children.push(ft),ft}function Tt(me,Ne){const He=[],rt=new Map;Ne=gn({strict:!1,end:!0,sensitive:!1},Ne);function ft(At){return rt.get(At)}function Ut(At,Lt,Pt){const sn=!Pt,Pn=st(At);Pn.aliasOf=Pt&&Pt.record;const jn=gn(Ne,At),Wn=[Pn];if("alias"in At){const zn=typeof At.alias=="string"?[At.alias]:At.alias;for(const Fi of zn)Wn.push(c({},Pn,{components:Pt?Pt.record.components:Pn.components,path:Fi,aliasOf:Pt?Pt.record:Pn}))}let Qn,Zn;for(const zn of Wn){const{path:Fi}=zn;if(Lt&&Fi[0]!=="/"){const Mr=Lt.record.path,tr=Mr[Mr.length-1]==="/"?"":"/";zn.path=Lt.record.path+(Fi&&tr+Fi)}if(Qn=ct(zn,Lt,jn),Pt?Pt.alias.push(Qn):(Zn=Zn||Qn,Zn!==Qn&&Zn.alias.push(Qn),sn&&At.name&&!It(Qn)&&Jt(At.name)),Pn.children){const Mr=Pn.children;for(let tr=0;tr<Mr.length;tr++)Ut(Mr[tr],Qn,Pt&&Pt.children[tr])}Pt=Pt||Qn,Dt(Qn)}return Zn?()=>{Jt(Zn)}:g}function Jt(At){if(kn(At)){const Lt=rt.get(At);Lt&&(rt.delete(At),He.splice(He.indexOf(Lt),1),Lt.children.forEach(Jt),Lt.alias.forEach(Jt))}else{const Lt=He.indexOf(At);Lt>-1&&(He.splice(Lt,1),At.record.name&&rt.delete(At.record.name),At.children.forEach(Jt),At.alias.forEach(Jt))}}function Xt(){return He}function Dt(At){let Lt=0;for(;Lt<He.length&&mt(At,He[Lt])>=0&&(At.record.path!==He[Lt].record.path||!Un(At,He[Lt]));)Lt++;He.splice(Lt,0,At),At.record.name&&!It(At)&&rt.set(At.record.name,At)}function Ht(At,Lt){let Pt,sn={},Pn,jn;if("name"in At&&At.name){if(Pt=rt.get(At.name),!Pt)throw Xn(1,{location:At});jn=Pt.record.name,sn=c(tt(Lt.params,Pt.keys.filter(Zn=>!Zn.optional).map(Zn=>Zn.name)),At.params),Pn=Pt.stringify(sn)}else if("path"in At)Pn=At.path,Pt=He.find(Zn=>Zn.re.test(Pn)),Pt&&(sn=Pt.parse(Pn),jn=Pt.record.name);else{if(Pt=Lt.name?rt.get(Lt.name):He.find(Zn=>Zn.re.test(Lt.path)),!Pt)throw Xn(1,{location:At,currentLocation:Lt});jn=Pt.record.name,sn=c({},Lt.params,At.params),Pn=Pt.stringify(sn)}const Wn=[];let Qn=Pt;for(;Qn;)Wn.unshift(Qn.record),Qn=Qn.parent;return{name:jn,path:Pn,params:sn,matched:Wn,meta:dn(Wn)}}return me.forEach(At=>Ut(At)),{addRoute:Ut,resolve:Ht,removeRoute:Jt,getRoutes:Xt,getRecordMatcher:ft}}function tt(me,Ne){const He={};for(const rt of Ne)rt in me&&(He[rt]=me[rt]);return He}function st(me){return{path:me.path,redirect:me.redirect,name:me.name,meta:me.meta||{},aliasOf:void 0,beforeEnter:me.beforeEnter,props:Et(me),children:me.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in me?me.components||null:me.component&&{default:me.component}}}function Et(me){const Ne={},He=me.props||!1;if("component"in me)Ne.default=He;else for(const rt in me.components)Ne[rt]=typeof He=="boolean"?He:He[rt];return Ne}function It(me){for(;me;){if(me.record.aliasOf)return!0;me=me.parent}return!1}function dn(me){return me.reduce((Ne,He)=>c(Ne,He.meta),{})}function gn(me,Ne){const He={};for(const rt in me)He[rt]=rt in Ne?Ne[rt]:me[rt];return He}function Un(me,Ne){return Ne.children.some(He=>He===me||Un(me,He))}const oi=/#/g,Ui=/&/g,Wr=/\//g,fr=/=/g,Dr=/\?/g,Ti=/\+/g,ji=/%5B/g,Zr=/%5D/g,wo=/%5E/g,bs=/%60/g,Rr=/%7B/g,$r=/%7C/g,Yr=/%7D/g,Uo=/%20/g;function Gi(me){return encodeURI(""+me).replace($r,"|").replace(ji,"[").replace(Zr,"]")}function Eo(me){return Gi(me).replace(Rr,"{").replace(Yr,"}").replace(wo,"^")}function ye(me){return Gi(me).replace(Ti,"%2B").replace(Uo,"+").replace(oi,"%23").replace(Ui,"%26").replace(bs,"`").replace(Rr,"{").replace(Yr,"}").replace(wo,"^")}function ee(me){return ye(me).replace(fr,"%3D")}function oe(me){return Gi(me).replace(oi,"%23").replace(Dr,"%3F")}function be(me){return me==null?"":oe(me).replace(Wr,"%2F")}function ke(me){try{return decodeURIComponent(""+me)}catch{}return""+me}function Oe(me){const Ne={};if(me===""||me==="?")return Ne;const rt=(me[0]==="?"?me.slice(1):me).split("&");for(let ft=0;ft<rt.length;++ft){const Ut=rt[ft].replace(Ti," "),Jt=Ut.indexOf("="),Xt=ke(Jt<0?Ut:Ut.slice(0,Jt)),Dt=Jt<0?null:ke(Ut.slice(Jt+1));if(Xt in Ne){let Ht=Ne[Xt];r(Ht)||(Ht=Ne[Xt]=[Ht]),Ht.push(Dt)}else Ne[Xt]=Dt}return Ne}function Ye(me){let Ne="";for(let He in me){const rt=me[He];if(He=ee(He),rt==null){rt!==void 0&&(Ne+=(Ne.length?"&":"")+He);continue}(r(rt)?rt.map(Ut=>Ut&&ye(Ut)):[rt&&ye(rt)]).forEach(Ut=>{Ut!==void 0&&(Ne+=(Ne.length?"&":"")+He,Ut!=null&&(Ne+="="+Ut))})}return Ne}function We(me){const Ne={};for(const He in me){const rt=me[He];rt!==void 0&&(Ne[He]=r(rt)?rt.map(ft=>ft==null?null:""+ft):rt==null?rt:""+rt)}return Ne}const Be=Symbol(""),Xe=Symbol(""),xt=Symbol(""),jt=Symbol(""),Ct=Symbol("");function tn(){let me=[];function Ne(rt){return me.push(rt),()=>{const ft=me.indexOf(rt);ft>-1&&me.splice(ft,1)}}function He(){me=[]}return{add:Ne,list:()=>me,reset:He}}function pn(me,Ne,He){const rt=()=>{me[Ne].delete(He)};t.onUnmounted(rt),t.onDeactivated(rt),t.onActivated(()=>{me[Ne].add(He)}),me[Ne].add(He)}function ln(me){const Ne=t.inject(Be,{}).value;!Ne||pn(Ne,"leaveGuards",me)}function _n(me){const Ne=t.inject(Be,{}).value;!Ne||pn(Ne,"updateGuards",me)}function bn(me,Ne,He,rt,ft){const Ut=rt&&(rt.enterCallbacks[ft]=rt.enterCallbacks[ft]||[]);return()=>new Promise((Jt,Xt)=>{const Dt=Lt=>{Lt===!1?Xt(Xn(4,{from:He,to:Ne})):Lt instanceof Error?Xt(Lt):An(Lt)?Xt(Xn(2,{from:Ne,to:Lt})):(Ut&&rt.enterCallbacks[ft]===Ut&&typeof Lt=="function"&&Ut.push(Lt),Jt())},Ht=me.call(rt&&rt.instances[ft],Ne,He,Dt);let At=Promise.resolve(Ht);me.length<3&&(At=At.then(Dt)),At.catch(Lt=>Xt(Lt))})}function Bn(me,Ne,He,rt){const ft=[];for(const Ut of me)for(const Jt in Ut.components){let Xt=Ut.components[Jt];if(!(Ne!=="beforeRouteEnter"&&!Ut.instances[Jt]))if(ui(Xt)){const Ht=(Xt.__vccOpts||Xt)[Ne];Ht&&ft.push(bn(Ht,He,rt,Ut,Jt))}else{let Dt=Xt();ft.push(()=>Dt.then(Ht=>{if(!Ht)return Promise.reject(new Error(`Couldn't resolve component "${Jt}" at "${Ut.path}"`));const At=s(Ht)?Ht.default:Ht;Ut.components[Jt]=At;const Pt=(At.__vccOpts||At)[Ne];return Pt&&bn(Pt,He,rt,Ut,Jt)()}))}}return ft}function ui(me){return typeof me=="object"||"displayName"in me||"props"in me||"__vccOpts"in me}function Jn(me){return me.matched.every(Ne=>Ne.redirect)?Promise.reject(new Error("Cannot load a route that redirects.")):Promise.all(me.matched.map(Ne=>Ne.components&&Promise.all(Object.keys(Ne.components).reduce((He,rt)=>{const ft=Ne.components[rt];return typeof ft=="function"&&!("displayName"in ft)&&He.push(ft().then(Ut=>{if(!Ut)return Promise.reject(new Error(`Couldn't resolve component "${rt}" at "${Ne.path}". Ensure you passed a function that returns a promise.`));const Jt=s(Ut)?Ut.default:Ut;Ne.components[rt]=Jt})),He},[])))).then(()=>me)}function qe(me){const Ne=t.inject(xt),He=t.inject(jt),rt=t.computed(()=>Ne.resolve(t.unref(me.to))),ft=t.computed(()=>{const{matched:Dt}=rt.value,{length:Ht}=Dt,At=Dt[Ht-1],Lt=He.matched;if(!At||!Lt.length)return-1;const Pt=Lt.findIndex(L.bind(null,At));if(Pt>-1)return Pt;const sn=Yi(Dt[Ht-2]);return Ht>1&&Yi(At)===sn&&Lt[Lt.length-1].path!==sn?Lt.findIndex(L.bind(null,Dt[Ht-2])):Pt}),Ut=t.computed(()=>ft.value>-1&&Ja(He.params,rt.value.params)),Jt=t.computed(()=>ft.value>-1&&ft.value===He.matched.length-1&&D(He.params,rt.value.params));function Xt(Dt={}){return or(Dt)?Ne[t.unref(me.replace)?"replace":"push"](t.unref(me.to)).catch(g):Promise.resolve()}return{route:rt,href:t.computed(()=>rt.value.href),isActive:Ut,isExactActive:Jt,navigate:Xt}}const mi=t.defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:qe,setup(me,{slots:Ne}){const He=t.reactive(qe(me)),{options:rt}=t.inject(xt),ft=t.computed(()=>({[Co(me.activeClass,rt.linkActiveClass,"router-link-active")]:He.isActive,[Co(me.exactActiveClass,rt.linkExactActiveClass,"router-link-exact-active")]:He.isExactActive}));return()=>{const Ut=Ne.default&&Ne.default(He);return me.custom?Ut:t.h("a",{"aria-current":He.isExactActive?me.ariaCurrentValue:null,href:He.href,onClick:He.navigate,class:ft.value},Ut)}}});function or(me){if(!(me.metaKey||me.altKey||me.ctrlKey||me.shiftKey)&&!me.defaultPrevented&&!(me.button!==void 0&&me.button!==0)){if(me.currentTarget&&me.currentTarget.getAttribute){const Ne=me.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(Ne))return}return me.preventDefault&&me.preventDefault(),!0}}function Ja(me,Ne){for(const He in Ne){const rt=Ne[He],ft=me[He];if(typeof rt=="string"){if(rt!==ft)return!1}else if(!r(ft)||ft.length!==rt.length||rt.some((Ut,Jt)=>Ut!==ft[Jt]))return!1}return!0}function Yi(me){return me?me.aliasOf?me.aliasOf.path:me.path:""}const Co=(me,Ne,He)=>me!=null?me:Ne!=null?Ne:He,Qs=t.defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(me,{attrs:Ne,slots:He}){const rt=t.inject(Ct),ft=t.computed(()=>me.route||rt.value),Ut=t.inject(Xe,0),Jt=t.computed(()=>{let Ht=t.unref(Ut);const{matched:At}=ft.value;let Lt;for(;(Lt=At[Ht])&&!Lt.components;)Ht++;return Ht}),Xt=t.computed(()=>ft.value.matched[Jt.value]);t.provide(Xe,t.computed(()=>Jt.value+1)),t.provide(Be,Xt),t.provide(Ct,ft);const Dt=t.ref();return t.watch(()=>[Dt.value,Xt.value,me.name],([Ht,At,Lt],[Pt,sn,Pn])=>{At&&(At.instances[Lt]=Ht,sn&&sn!==At&&Ht&&Ht===Pt&&(At.leaveGuards.size||(At.leaveGuards=sn.leaveGuards),At.updateGuards.size||(At.updateGuards=sn.updateGuards))),Ht&&At&&(!sn||!L(At,sn)||!Pt)&&(At.enterCallbacks[Lt]||[]).forEach(jn=>jn(Ht))},{flush:"post"}),()=>{const Ht=ft.value,At=me.name,Lt=Xt.value,Pt=Lt&&Lt.components[At];if(!Pt)return so(He.default,{Component:Pt,route:Ht});const sn=Lt.props[At],Pn=sn?sn===!0?Ht.params:typeof sn=="function"?sn(Ht):sn:null,jn=Qn=>{Qn.component.isUnmounted&&(Lt.instances[At]=null)},Wn=t.h(Pt,c({},Pn,Ne,{onVnodeUnmounted:jn,ref:Dt}));return so(He.default,{Component:Wn,route:Ht})||Wn}}});function so(me,Ne){if(!me)return null;const He=me(Ne);return He.length===1?He[0]:He}const qt=Qs;function On(me){const Ne=Tt(me.routes,me),He=me.parseQuery||Oe,rt=me.stringifyQuery||Ye,ft=me.history,Ut=tn(),Jt=tn(),Xt=tn(),Dt=t.shallowRef(En);let Ht=En;i&&me.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const At=d.bind(null,Ot=>""+Ot),Lt=d.bind(null,be),Pt=d.bind(null,ke);function sn(Ot,hn){let Qt,vn;return kn(Ot)?(Qt=Ne.getRecordMatcher(Ot),vn=hn):vn=Ot,Ne.addRoute(vn,Qt)}function Pn(Ot){const hn=Ne.getRecordMatcher(Ot);hn&&Ne.removeRoute(hn)}function jn(){return Ne.getRoutes().map(Ot=>Ot.record)}function Wn(Ot){return!!Ne.getRecordMatcher(Ot)}function Qn(Ot,hn){if(hn=c({},hn||Dt.value),typeof Ot=="string"){const Dn=w(He,Ot,hn.path),ai=Ne.resolve({path:Dn.path},hn),Qr=ft.createHref(Dn.fullPath);return c(Dn,ai,{params:Pt(ai.params),hash:ke(Dn.hash),redirectedFrom:void 0,href:Qr})}let Qt;if("path"in Ot)Qt=c({},Ot,{path:w(He,Ot.path,hn.path).path});else{const Dn=c({},Ot.params);for(const ai in Dn)Dn[ai]==null&&delete Dn[ai];Qt=c({},Ot,{params:Lt(Ot.params)}),hn.params=Lt(hn.params)}const vn=Ne.resolve(Qt,hn),bi=Ot.hash||"";vn.params=At(Pt(vn.params));const $i=k(rt,c({},Ot,{hash:Eo(bi),path:vn.path})),Yn=ft.createHref($i);return c({fullPath:$i,hash:bi,query:rt===Ye?We(Ot.query):Ot.query||{}},vn,{redirectedFrom:void 0,href:Yn})}function Zn(Ot){return typeof Ot=="string"?w(He,Ot,Dt.value.path):c({},Ot)}function zn(Ot,hn){if(Ht!==Ot)return Xn(8,{from:hn,to:Ot})}function Fi(Ot){return Ai(Ot)}function Mr(Ot){return Fi(c(Zn(Ot),{replace:!0}))}function tr(Ot){const hn=Ot.matched[Ot.matched.length-1];if(hn&&hn.redirect){const{redirect:Qt}=hn;let vn=typeof Qt=="function"?Qt(Ot):Qt;return typeof vn=="string"&&(vn=vn.includes("?")||vn.includes("#")?vn=Zn(vn):{path:vn},vn.params={}),c({query:Ot.query,hash:Ot.hash,params:"path"in vn?{}:Ot.params},vn)}}function Ai(Ot,hn){const Qt=Ht=Qn(Ot),vn=Dt.value,bi=Ot.state,$i=Ot.force,Yn=Ot.replace===!0,Dn=tr(Qt);if(Dn)return Ai(c(Zn(Dn),{state:bi,force:$i,replace:Yn}),hn||Qt);const ai=Qt;ai.redirectedFrom=hn;let Qr;return!$i&&I(rt,vn,Qt)&&(Qr=Xn(16,{to:ai,from:vn}),zr(vn,vn,!0,!1)),(Qr?Promise.resolve(Qr):ao(ai,vn)).catch(Xi=>Ln(Xi)?Ln(Xi,2)?Xi:mr(Xi):qo(Xi,ai,vn)).then(Xi=>{if(Xi){if(Ln(Xi,2))return Ai(c({replace:Yn},Zn(Xi.to),{state:bi,force:$i}),hn||ai)}else Xi=Ir(ai,vn,!0,Yn,bi);return vr(ai,vn,Xi),Xi})}function jo(Ot,hn){const Qt=zn(Ot,hn);return Qt?Promise.reject(Qt):Promise.resolve()}function ao(Ot,hn){let Qt;const[vn,bi,$i]=hr(Ot,hn);Qt=Bn(vn.reverse(),"beforeRouteLeave",Ot,hn);for(const Dn of vn)Dn.leaveGuards.forEach(ai=>{Qt.push(bn(ai,Ot,hn))});const Yn=jo.bind(null,Ot,hn);return Qt.push(Yn),xn(Qt).then(()=>{Qt=[];for(const Dn of Ut.list())Qt.push(bn(Dn,Ot,hn));return Qt.push(Yn),xn(Qt)}).then(()=>{Qt=Bn(bi,"beforeRouteUpdate",Ot,hn);for(const Dn of bi)Dn.updateGuards.forEach(ai=>{Qt.push(bn(ai,Ot,hn))});return Qt.push(Yn),xn(Qt)}).then(()=>{Qt=[];for(const Dn of Ot.matched)if(Dn.beforeEnter&&!hn.matched.includes(Dn))if(r(Dn.beforeEnter))for(const ai of Dn.beforeEnter)Qt.push(bn(ai,Ot,hn));else Qt.push(bn(Dn.beforeEnter,Ot,hn));return Qt.push(Yn),xn(Qt)}).then(()=>(Ot.matched.forEach(Dn=>Dn.enterCallbacks={}),Qt=Bn($i,"beforeRouteEnter",Ot,hn),Qt.push(Yn),xn(Qt))).then(()=>{Qt=[];for(const Dn of Jt.list())Qt.push(bn(Dn,Ot,hn));return Qt.push(Yn),xn(Qt)}).catch(Dn=>Ln(Dn,8)?Dn:Promise.reject(Dn))}function vr(Ot,hn,Qt){for(const vn of Xt.list())vn(Ot,hn,Qt)}function Ir(Ot,hn,Qt,vn,bi){const $i=zn(Ot,hn);if($i)return $i;const Yn=hn===En,Dn=i?history.state:{};Qt&&(vn||Yn?ft.replace(Ot.fullPath,c({scroll:Yn&&Dn&&Dn.scroll},bi)):ft.push(Ot.fullPath,bi)),Dt.value=Ot,zr(Ot,hn,Qt,Yn),mr()}let Br;function Qa(){Br||(Br=ft.listen((Ot,hn,Qt)=>{if(!ea.listening)return;const vn=Qn(Ot),bi=tr(vn);if(bi){Ai(c(bi,{replace:!0}),vn).catch(g);return}Ht=vn;const $i=Dt.value;i&&Ge(de($i.fullPath,Qt.delta),we()),ao(vn,$i).catch(Yn=>Ln(Yn,12)?Yn:Ln(Yn,2)?(Ai(Yn.to,vn).then(Dn=>{Ln(Dn,20)&&!Qt.delta&&Qt.type===U.pop&&ft.go(-1,!1)}).catch(g),Promise.reject()):(Qt.delta&&ft.go(-Qt.delta,!1),qo(Yn,vn,$i))).then(Yn=>{Yn=Yn||Ir(vn,$i,!1),Yn&&(Qt.delta&&!Ln(Yn,8)?ft.go(-Qt.delta,!1):Qt.type===U.pop&&Ln(Yn,20)&&ft.go(-1,!1)),vr(vn,$i,Yn)}).catch(g)}))}let So=tn(),Jr=tn(),Go;function qo(Ot,hn,Qt){mr(Ot);const vn=Jr.list();return vn.length?vn.forEach(bi=>bi(Ot,hn,Qt)):console.error(Ot),Promise.reject(Ot)}function lo(){return Go&&Dt.value!==En?Promise.resolve():new Promise((Ot,hn)=>{So.add([Ot,hn])})}function mr(Ot){return Go||(Go=!Ot,Qa(),So.list().forEach(([hn,Qt])=>Ot?Qt(Ot):hn()),So.reset()),Ot}function zr(Ot,hn,Qt,vn){const{scrollBehavior:bi}=me;if(!i||!bi)return Promise.resolve();const $i=!Qt&&wt(de(Ot.fullPath,0))||(vn||!Qt)&&history.state&&history.state.scroll||null;return t.nextTick().then(()=>bi(Ot,hn,$i)).then(Yn=>Yn&&fe(Yn)).catch(Yn=>qo(Yn,Ot,hn))}const yr=Ot=>ft.go(Ot);let To;const co=new Set,ea={currentRoute:Dt,listening:!0,addRoute:sn,removeRoute:Pn,hasRoute:Wn,getRoutes:jn,resolve:Qn,options:me,push:Fi,replace:Mr,go:yr,back:()=>yr(-1),forward:()=>yr(1),beforeEach:Ut.add,beforeResolve:Jt.add,afterEach:Xt.add,onError:Jr.add,isReady:lo,install(Ot){const hn=this;Ot.component("RouterLink",mi),Ot.component("RouterView",qt),Ot.config.globalProperties.$router=hn,Object.defineProperty(Ot.config.globalProperties,"$route",{enumerable:!0,get:()=>t.unref(Dt)}),i&&!To&&Dt.value===En&&(To=!0,Fi(ft.location).catch(bi=>{}));const Qt={};for(const bi in En)Qt[bi]=t.computed(()=>Dt.value[bi]);Ot.provide(xt,hn),Ot.provide(jt,t.reactive(Qt)),Ot.provide(Ct,Dt);const vn=Ot.unmount;co.add(Ot),Ot.unmount=function(){co.delete(Ot),co.size<1&&(Ht=En,Br&&Br(),Br=null,Dt.value=En,To=!1,Go=!1),vn()}}};return ea}function xn(me){return me.reduce((Ne,He)=>Ne.then(()=>He()),Promise.resolve())}function hr(me,Ne){const He=[],rt=[],ft=[],Ut=Math.max(Ne.matched.length,me.matched.length);for(let Jt=0;Jt<Ut;Jt++){const Xt=Ne.matched[Jt];Xt&&(me.matched.find(Ht=>L(Ht,Xt))?rt.push(Xt):He.push(Xt));const Dt=me.matched[Jt];Dt&&(Ne.matched.find(Ht=>L(Ht,Dt))||ft.push(Dt))}return[He,rt,ft]}function Xr(){return t.inject(xt)}function Cn(){return t.inject(jt)}e.RouterLink=mi,e.RouterView=qt,e.START_LOCATION=En,e.createMemoryHistory=un,e.createRouter=On,e.createRouterMatcher=Tt,e.createWebHashHistory=wn,e.createWebHistory=an,e.isNavigationFailure=Ln,e.loadRouteLocation=Jn,e.matchedRouteKey=Be,e.onBeforeRouteLeave=ln,e.onBeforeRouteUpdate=_n,e.parseQuery=Oe,e.routeLocationKey=jt,e.routerKey=xt,e.routerViewLocationKey=Ct,e.stringifyQuery=Ye,e.useLink=qe,e.useRoute=Cn,e.useRouter=Xr,e.viewDepthKey=Xe})(vueRouter_prod);const shouldIgnoreProp=makeMap(",key,ref,innerHTML,textContent,ref_key,ref_for");function ssrRenderAttrs(e,t){let i="";for(const s in e){if(shouldIgnoreProp(s)||isOn(s)||t==="textarea"&&s==="value")continue;const c=e[s];s==="class"?i+=` class="${ssrRenderClass(c)}"`:s==="style"?i+=` style="${ssrRenderStyle(c)}"`:i+=ssrRenderDynamicAttr(s,c,t)}return i}function ssrRenderDynamicAttr(e,t,i){if(!isRenderableValue(t))return"";const s=i&&i.indexOf("-")>0?e:propsToAttrMap[e]||e.toLowerCase();return isBooleanAttr(s)?includeBooleanAttr(t)?` ${s}`:"":isSSRSafeAttrName(s)?t===""?` ${s}`:` ${s}="${escapeHtml(t)}"`:(console.warn(`[@vue/server-renderer] Skipped rendering unsafe attribute name: ${s}`),"")}function ssrRenderAttr(e,t){return isRenderableValue(t)?` ${e}="${escapeHtml(t)}"`:""}function isRenderableValue(e){if(e==null)return!1;const t=typeof e;return t==="string"||t==="number"||t==="boolean"}function ssrRenderClass(e){return escapeHtml(normalizeClass(e))}function ssrRenderStyle(e){if(!e)return"";if(isString$2(e))return escapeHtml(e);const t=normalizeStyle(e);return escapeHtml(stringifyStyle(t))}function ssrCompile(e,t){throw new Error("On-the-fly template compilation is not supported in the ESM build of @vue/server-renderer. All templates must be pre-compiled into render functions.")}function ssrRenderTeleport(e,t,i,s,c){e("<!--teleport start-->");const d=c.appContext.provides[ssrContextKey],g=d.__teleportBuffers||(d.__teleportBuffers={}),r=g[i]||(g[i]=[]),y=r.length;let E;if(s)t(e),E="<!--teleport anchor-->";else{const{getBuffer:w,push:k}=createBuffer();t(k),k("<!--teleport anchor-->"),E=w()}r.splice(y,0,E),e("<!--teleport end-->")}const{createComponentInstance,setCurrentRenderingInstance,setupComponent,renderComponentRoot,normalizeVNode}=ssrUtils;function createBuffer(){let e=!1;const t=[];return{getBuffer(){return t},push(i){const s=isString$2(i);e&&s?t[t.length-1]+=i:t.push(i),e=s,(isPromise(i)||isArray$7(i)&&i.hasAsync)&&(t.hasAsync=!0)}}}function renderComponentVNode(e,t=null,i){const s=createComponentInstance(e,t,null),c=setupComponent(s,!0),d=isPromise(c),g=s.sp;if(d||g){let r=d?c:Promise.resolve();return g&&(r=r.then(()=>Promise.all(g.map(y=>y.call(s.proxy)))).catch(()=>{})),r.then(()=>renderComponentSubTree(s,i))}else return renderComponentSubTree(s,i)}function renderComponentSubTree(e,t){const i=e.type,{getBuffer:s,push:c}=createBuffer();if(isFunction$1(i)){let d=renderComponentRoot(e);if(!i.props)for(const g in e.attrs)g.startsWith("data-v-")&&((d.props||(d.props={}))[g]="");renderVNode(c,e.subTree=d,e,t)}else{(!e.render||e.render===NOOP)&&!e.ssrRender&&!i.ssrRender&&isString$2(i.template)&&(i.ssrRender=ssrCompile(i.template));for(const g of e.scope.effects)g.computed&&(g.computed._cacheable=!0);const d=e.ssrRender||i.ssrRender;if(d){let g=e.inheritAttrs!==!1?e.attrs:void 0,r=!1,y=e;for(;;){const w=y.vnode.scopeId;w&&(r||(g={...g},r=!0),g[w]="");const k=y.parent;if(k&&k.subTree&&k.subTree===y.vnode)y=k;else break}t&&(r||(g={...g}),g[t.trim()]="");const E=setCurrentRenderingInstance(e);d(e.proxy,c,e,g,e.props,e.setupState,e.data,e.ctx),setCurrentRenderingInstance(E)}else if(e.render&&e.render!==NOOP)renderVNode(c,e.subTree=renderComponentRoot(e),e,t);else{const g=i.name||i.__file||"<Anonymous>";warn$2(`Component ${g} is missing template or render function.`),c("<!---->")}}return s()}function renderVNode(e,t,i,s){const{type:c,shapeFlag:d,children:g}=t;switch(c){case Text:e(escapeHtml(g));break;case Comment$1:e(g?`<!--${escapeHtmlComment(g)}-->`:"<!---->");break;case Static:e(g);break;case Fragment:t.slotScopeIds&&(s=(s?s+" ":"")+t.slotScopeIds.join(" ")),e("<!--[-->"),renderVNodeChildren(e,g,i,s),e("<!--]-->");break;default:d&1?renderElementVNode(e,t,i,s):d&6?e(renderComponentVNode(t,i,s)):d&64?renderTeleportVNode(e,t,i,s):d&128?renderVNode(e,t.ssContent,i,s):warn$2("[@vue/server-renderer] Invalid VNode type:",c,`(${typeof c})`)}}function renderVNodeChildren(e,t,i,s){for(let c=0;c<t.length;c++)renderVNode(e,normalizeVNode(t[c]),i,s)}function renderElementVNode(e,t,i,s){const c=t.type;let{props:d,children:g,shapeFlag:r,scopeId:y,dirs:E}=t,w=`<${c}`;E&&(d=applySSRDirectives(t,d,E)),d&&(w+=ssrRenderAttrs(d,c)),y&&(w+=` ${y}`);let k=i,S=t;for(;k&&S===k.subTree;)S=k.vnode,S.scopeId&&(w+=` ${S.scopeId}`),k=k.parent;if(s&&(w+=` ${s}`),e(w+">"),!isVoidTag(c)){let I=!1;d&&(d.innerHTML?(I=!0,e(d.innerHTML)):d.textContent?(I=!0,e(escapeHtml(d.textContent))):c==="textarea"&&d.value&&(I=!0,e(escapeHtml(d.value)))),I||(r&8?e(escapeHtml(g)):r&16&&renderVNodeChildren(e,g,i,s)),e(`</${c}>`)}}function applySSRDirectives(e,t,i){const s=[];for(let c=0;c<i.length;c++){const d=i[c],{dir:{getSSRProps:g}}=d;if(g){const r=g(d,e);r&&s.push(r)}}return mergeProps(t||{},...s)}function renderTeleportVNode(e,t,i,s){const c=t.props&&t.props.to,d=t.props&&t.props.disabled;if(!c)return d||warn$2("[@vue/server-renderer] Teleport is missing target prop."),[];if(!isString$2(c))return warn$2("[@vue/server-renderer] Teleport target must be a query selector string."),[];ssrRenderTeleport(e,g=>{renderVNodeChildren(g,t.children,i,s)},c,d||d==="",i)}const{isVNode}=ssrUtils;async function unrollBuffer(e){if(e.hasAsync){let t="";for(let i=0;i<e.length;i++){let s=e[i];isPromise(s)&&(s=await s),isString$2(s)?t+=s:t+=await unrollBuffer(s)}return t}else return unrollBufferSync(e)}function unrollBufferSync(e){let t="";for(let i=0;i<e.length;i++){let s=e[i];isString$2(s)?t+=s:t+=unrollBufferSync(s)}return t}async function renderToString(e,t={}){if(isVNode(e))return renderToString(createApp$1({render:()=>e}),t);const i=createVNode(e._component,e._props);i.appContext=e._context,e.provide(ssrContextKey,t);const s=await renderComponentVNode(i),c=await unrollBuffer(s);return await resolveTeleports(t),c}async function resolveTeleports(e){if(e.__teleportBuffers){e.teleports=e.teleports||{};for(const t in e.__teleportBuffers)e.teleports[t]=await unrollBuffer(await Promise.all(e.__teleportBuffers[t]))}}function ssrRenderComponent(e,t=null,i=null,s=null,c){return renderComponentVNode(createVNode(e,t,i),s,c)}function ssrRenderSlot(e,t,i,s,c,d,g){c("<!--[-->"),ssrRenderSlotInner(e,t,i,s,c,d,g),c("<!--]-->")}function ssrRenderSlotInner(e,t,i,s,c,d,g,r){const y=e[t];if(y){const E=[],k=y(i,S=>{E.push(S)},d,g?" "+g:"");if(isArray$7(k))renderVNodeChildren(c,k,d,g);else{let S=!0;if(r)S=!1;else for(let I=0;I<E.length;I++)if(!isComment(E[I])){S=!1;break}if(S)s&&s();else for(let I=0;I<E.length;I++)c(E[I])}}else s&&s()}const commentRE=/<!--[^]*?-->/gm;function isComment(e){return typeof e=="string"&&commentRE.test(e)&&!e.replace(commentRE,"").trim()}function ssrInterpolate(e){return escapeHtml(toDisplayString(e))}function toRaw(e){const t=e&&e.__v_raw;return t?toRaw(t):e}function isRef(e){return!!(e&&e.__v_isRef===!0)}const stack=[];function pushWarningContext(e){stack.push(e)}function popWarningContext(){stack.pop()}function warn$1(e,...t){const i=stack.length?stack[stack.length-1].component:null,s=i&&i.appContext.config.warnHandler,c=getComponentTrace();if(s)callWithErrorHandling(s,i,11,[e+t.join(""),i&&i.proxy,c.map(({vnode:d})=>`at <${formatComponentName(i,d.type)}>`).join(`
`),c]);else{const d=[`[Vue warn]: ${e}`,...t];c.length&&d.push(`
`,...formatTrace(c)),console.warn(...d)}}function getComponentTrace(){let e=stack[stack.length-1];if(!e)return[];const t=[];for(;e;){const i=t[0];i&&i.vnode===e?i.recurseCount++:t.push({vnode:e,recurseCount:0});const s=e.component&&e.component.parent;e=s&&s.vnode}return t}function formatTrace(e){const t=[];return e.forEach((i,s)=>{t.push(...s===0?[]:[`
`],...formatTraceEntry(i))}),t}function formatTraceEntry({vnode:e,recurseCount:t}){const i=t>0?`... (${t} recursive calls)`:"",s=e.component?e.component.parent==null:!1,c=` at <${formatComponentName(e.component,e.type,s)}`,d=">"+i;return e.props?[c,...formatProps(e.props),d]:[c+d]}function formatProps(e){const t=[],i=Object.keys(e);return i.slice(0,3).forEach(s=>{t.push(...formatProp(s,e[s]))}),i.length>3&&t.push(" ..."),t}function formatProp(e,t,i){return isString$2(t)?(t=JSON.stringify(t),i?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?i?t:[`${e}=${t}`]:isRef(t)?(t=formatProp(e,toRaw(t.value),!0),i?t:[`${e}=Ref<`,t,">"]):isFunction$1(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=toRaw(t),i?t:[`${e}=`,t])}const ErrorTypeStrings={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",[0]:"setup function",[1]:"render function",[2]:"watcher getter",[3]:"watcher callback",[4]:"watcher cleanup function",[5]:"native event handler",[6]:"component event handler",[7]:"vnode hook",[8]:"directive hook",[9]:"transition hook",[10]:"app errorHandler",[11]:"app warnHandler",[12]:"ref function",[13]:"async component loader",[14]:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/core"};function callWithErrorHandling(e,t,i,s){let c;try{c=s?e(...s):e()}catch(d){handleError(d,t,i)}return c}function handleError(e,t,i,s=!0){const c=t?t.vnode:null;if(t){let d=t.parent;const g=t.proxy,r=process.env.NODE_ENV!=="production"?ErrorTypeStrings[i]:i;for(;d;){const E=d.ec;if(E){for(let w=0;w<E.length;w++)if(E[w](e,g,r)===!1)return}d=d.parent}const y=t.appContext.config.errorHandler;if(y){callWithErrorHandling(y,null,10,[e,g,r]);return}}logError(e,i,c,s)}function logError(e,t,i,s=!0){if(process.env.NODE_ENV!=="production"){const c=ErrorTypeStrings[t];if(i&&pushWarningContext(i),warn$1(`Unhandled error${c?` during execution of ${c}`:""}`),i&&popWarningContext(),s)throw e;console.error(e)}else console.error(e)}const classifyRE=/(?:^|[-_])(\w)/g,classify=e=>e.replace(classifyRE,t=>t.toUpperCase()).replace(/[-_]/g,"");function getComponentName(e,t=!0){return isFunction$1(e)?e.displayName||e.name:e.name||t&&e.__name}function formatComponentName(e,t,i=!1){let s=getComponentName(t);if(!s&&t.__file){const c=t.__file.match(/([^/\\]+)\.\w+$/);c&&(s=c[1])}if(!s&&e&&e.parent){const c=d=>{for(const g in d)if(d[g]===t)return g};s=c(e.components||e.parent.type.components)||c(e.appContext.components)}return s?classify(s):i?"App":"Anonymous"}function ssrRenderList(e,t){if(isArray$7(e)||isString$2(e))for(let i=0,s=e.length;i<s;i++)t(e[i],i);else if(typeof e=="number"){if(process.env.NODE_ENV!=="production"&&!Number.isInteger(e)){warn$1(`The v-for range expect an integer value but got ${e}.`);return}for(let i=0;i<e;i++)t(i+1,i)}else if(isObject$6(e))if(e[Symbol.iterator]){const i=Array.from(e);for(let s=0,c=i.length;s<c;s++)t(i[s],s)}else{const i=Object.keys(e);for(let s=0,c=i.length;s<c;s++){const d=i[s];t(e[d],d,s)}}}async function ssrRenderSuspense(e,{default:t}){t?t():e("<!---->")}function ssrGetDirectiveProps(e,t,i,s,c={}){return typeof t!="function"&&t.getSSRProps?t.getSSRProps({dir:t,instance:e,value:i,oldValue:void 0,arg:s,modifiers:c},null)||{}:{}}const ssrLooseEqual=looseEqual;initDirectivesForSSR();const NODE_ENV=process.env.NODE_ENV,isDev=process.env.NODE_ENV==="development";process.env.NODE_ENV;process.env.NODE_ENV;const SSR_SYMBLE_KEY="__SSR__",renderSSRSymbleScript=()=>`<script>window.${SSR_SYMBLE_KEY} = true<\/script>`,getSSRSymbleStatus=()=>Boolean(window[SSR_SYMBLE_KEY]),SSR_CONTEXT_KEY="__INITIAL_SSR_CONTEXT__",renderSSRContextScript=e=>`<script>window.${SSR_CONTEXT_KEY} = ${e}<\/script>`;let ssrContext={};const setSSRContext=(e,t)=>{ssrContext[e]=t&&JSON.parse(JSON.stringify(t))},getSSRContext=e=>ssrContext[e];function rebirthSSRContext(e){return ssrContext=Object.assign({},{}),e.config.globalProperties.$ssrContext=ssrContext,ssrContext}function getSSRContextByApp(e){return e.config.globalProperties.$ssrContext||ssrContext}const isSSR=typeof window>"u"||getSSRSymbleStatus(),isSPA=!isSSR,isServer=!0,isClient=!isServer,API_PROXY_URL="/api",API_LOCAL_URL="http://localhost:8000",API_ONLINE_URL="https://api.surmon.me",DEV_API=isSPA?API_PROXY_URL:API_ONLINE_URL,PROD_API=isSPA?API_ONLINE_URL:API_LOCAL_URL,API_CONFIG={FE:"https://surmon.me",CDN:"https://cdn.surmon.me",PROXY:"https://cdn.surmon.me/_proxy",STATIC:"https://static.surmon.me",NODEPRESS:isDev?DEV_API:PROD_API},LONG_ARTICLE_THRESHOLD=16688,META=Object.freeze({title:"Surmon.me",zh_sub_title:"\u6765\u82CF\u4E4B\u671B",en_sub_title:"Because the mountain is there",zh_biography:"\u672C\u662F\u6D6A\u8776\u6E38\u8702\uFF0C\u81EA\u7559\u534A\u4EA9\u77F3\u6C60\uFF0C\u4F46\u6C42\u76F4\u6292\u80F8\u81C6\uFF0C\u6325\u58A8\u4E5D\u4E91\u4E4B\u4E2D",en_biography:"Either write something worth reading or do something worth writing.",url:"https://surmon.me",domain:"surmon.me",author:"Surmon",primary:"#0088f5"}),GEO_INFO=Object.freeze({zh_title:"\u82DF\u6D3B\u4E8E\u6B64\uFF0C\u517B\u4E24\u6761\u72D7",en_title:"Omicron prison, Shanghai",coordinates:[121.55152956275738,31.215855513780504]}),MAPBOX_CONFIG=Object.freeze({TOKEN:"pk.eyJ1Ijoic3VybW9uIiwiYSI6ImNsNDE4YmkzNjB2Z2wzY3F5dWg2M2tqeWIifQ.JhgYGFI4zsuNiX9dH-pBDg",STYLE_LIGHT:"mapbox://styles/surmon/cl41fktzn000f14pet94oo1u4",STYLE_DARK:"mapbox://styles/surmon/cl41gy1qo000l15ry20j5ae0k",ZOOM:11.337439,CENTER:[121.4930539351185,31.227570979004497]}),IDENTITIES=Object.freeze({GOOGLE_ANALYTICS_TRACKING_ID:"UA-84887611-3",GOOGLE_ADSENSE_PUBLISHER_ID:"ca-pub-4710915636313788",YOUTUBE_CHANNEL_ID:"UCoL-j6T28PLSJ2U6ZdONS0w",MUSIC_163_BGM_ALBUM_ID:"638949385",DOUBAN_USER_ID:"56647958",GITHUB_USER_NAME:"surmon-china",TWITTER_USER_NAME:"surmon7788",INSTAGRAM_USERNAME:"surmon666",INSTAGRAM_FB_ID:"17841405600281893",BTC_ADDRESS:"bc1qhpdu03tnexkj4xsm3lqzyjdddz6z0rj2n7fsze",ETH_ADDRESS:"0xaD556974D449126efdeF23f4FF581861C301cB77"}),VALUABLE_LINKS=Object.freeze({RSS:"/rss.xml",SITE_MAP:"/sitemap.xml",UPTIME_STATUS:"https://stats.uptimerobot.com/Q2k7OTXxJN",NPM_HOMEPAGE:"https://www.npmjs.com/~surmon",PAYPAL:"https://paypal.me/surmon",GITHUB_SPONSORS:`https://github.com/sponsors/${IDENTITIES.GITHUB_USER_NAME}`,GITHUB:`https://github.com/${IDENTITIES.GITHUB_USER_NAME}`,GITHUB_SURMON_ME:"https://github.com/surmon-china/surmon.me",GITHUB_NODEPRESS:"https://github.com/surmon-china/nodepress",GITHUB_SURMON_ME_NATIVE:"https://github.com/surmon-china/surmon.me.native",GITHUB_BLOG_STAR_LIST:"https://github.com/stars/surmon-china/lists/surmon-me",APP_APK_FILE:"https://raw.githubusercontent.com/surmon-china/surmon.me.native/master/dist/android/surmon.me.apk",UPWORK:"https://www.upwork.com/freelancers/~0142e621258ac1770d",MARKDOWN:"https://daringfireball.net/projects/markdown/",GOOGLE_MY_MAP:"https://www.google.com/maps/d/embed?mid=1sRx6t0Yj1TutbwORCvjwTMgr70r62Z6w&z=3",GOOGLE_MY_MAP_KML:"https://www.google.com/maps/d/u/0/kml?forcekml=1&mid=1sRx6t0Yj1TutbwORCvjwTMgr70r62Z6w",DISCORD_GROUP:"https://discord.surmon.me",TELEGRAM_GROUP:"https://t.me/+Z2wsxogVbYM2ZmE1",MUSIC_163:`https://music.163.com/#/playlist?id=${IDENTITIES.MUSIC_163_BGM_ALBUM_ID}`,YOUTUBE_CHANNEL:`https://www.youtube.com/channel/${IDENTITIES.YOUTUBE_CHANNEL_ID}`,TELEGRAM:"https://t.me/surmon",OPENSEA:"https://opensea.io/surmon",DOUBAN:"https://www.douban.com/people/nocower",DOUBAN_MOVIE:`https://m.douban.com/people/${IDENTITIES.DOUBAN_USER_ID}/movie_charts`,QUORA:"https://www.quora.com/profile/Surmon",LINKEDIN:"https://www.linkedin.com/in/surmon",INSTAGRAM:`https://www.instagram.com/${IDENTITIES.INSTAGRAM_USERNAME}`,TWITTER:`https://twitter.com/${IDENTITIES.TWITTER_USER_NAME}`});var LanguageKey=(e=>(e.APP_SLOGAN="app-slogan",e.CATEGORY_INSIGHT="insight",e.CATEGORY_CODE="code",e.PAGE_HOME="home",e.PAGE_GITHUB="github",e.PAGE_OPENSEA="opensea",e.PAGE_LENS="lens",e.PAGE_JOB="job",e.PAGE_MERCH="merch",e.PAGE_ABOUT="about",e.PAGE_SPONSOR="sponsor",e.PAGE_FREELANCER="freelancer",e.PAGE_GUESTBOOK="guestbook",e.PAGE_APP="app",e.PAGE_ARCHIVE="archive",e.STATISTIC_ARTICLES="statistic-articles",e.STATISTIC_COMMENTS="statistic-comments",e.STATISTIC_TAGS="statistic-tags",e.STATISTIC_TODAY_VIEWS="statistic-today-views",e.STATISTIC_TOTAL_VIEWS="statistic-total-views",e.STATISTIC_TOTAL_UPVOTES="statistic-total-upvotes",e.STATISTIC_AVERAGE_EMOTION="statistic-average-emotion",e.EMPTY_PLACEHOLDER="common-empty-placeholder",e.NOT_FOUND="not-found",e.BACK_TO_HOME_PAGE="back-to-home-page",e.GUESTBOOK_SLOGAN="guestbook-banner-slogan",e.PAGE_FREELANCER_SLOGAN="freelancer-page-banner-slogan",e.PAGE_FREELANCER_EMAIL_ME="freelancer-email-me",e.AD="ad",e.BARRAGE="barrage",e.FEEDBACK="feedback",e.TO_TOP="to-page-top",e.TO_BOTTOM="to-page-bottom",e.ORIGIN_ORIGINAL="original",e.ORIGIN_REPRINT="reprint",e.ORIGIN_HYBRID="hybrid",e.ACTION_ON="on",e.ACTION_OFF="off",e.MUSIC_PLACEHOLDER="music-placeholder",e.SEARCH_PLACEHOLDER="search-input-placeholder",e.HOT_ARTICLE_LIST_TITLE="hot-article-list-title",e.ANNOUNCEMENT_PLACEHOLDER="announcement-empty-placeholder",e.CATEGORY_UNCATEGORIZED="category-uncategorized",e.TAG_PLACEHOLDER="tag-placeholder",e.ARTICLE_TITLE="article-title",e.ARTICLE_VIEWS="article-views",e.ARTICLE_PLACEHOLDER="article-empty-placeholder",e.ARTICLE_READ_ALL="read-all-article-content",e.ARTICLE_RENDERING="rendering",e.ARTICLE_LIST_LOADMORE="loadmore",e.ARTICLE_LIST_LOADING="loading",e.ARTICLE_LIST_NO_MORE="no-more",e.COMMENT_LIST_EMPTY="comment-list-placeholder",e.COMMENT_UPVOTE="comment-likes",e.COMMENT_DOWNVOTE="comment-dislikes",e.COMMENT_REPLY="reply-comment",e.COMMENT_DELETE="delete-comment",e.COMMENT_DELETE_CONFIRM="delete-comment-confirm",e.COMMENT_REPLY_CANCEL="cancel-reply-comment",e.COMMENT_MODERATOR="comment-moderator",e.COMMENT_SORT_OLD="oldest-comments",e.COMMENT_SORT_NEW="newest-comments",e.COMMENT_SORT_HOT="hottest-comments",e.COMMENT_POST_NAME="comment-author-name",e.COMMENT_POST_EMAIL="comment-author-email",e.COMMENT_POST_SITE="comment-author-site-url",e.COMMENT_POST_CONTENT="comment-content",e.COMMENT_POST_PLACEHOLDER="comment-box-placeholder",e.COMMENT_POST_ERROR_CONTENT="comment-submit-failed-of-content-error",e.QUERY_PARAMS_ERROR="query-params-error",e.POST_ACTION_ERROR="post-requiest-failed-of-other-error",e.SUBMIT="submit-data",e.SUBMITTING="submitting",e.MOMENT_AM="moment-am",e.MOMENT_PM="moment-pm",e.MOMENT_JUST_NOW="moment-just-now",e.MOMENT_MINUTES="moment-minutes",e.MOMENT_HOURS="moment-hours",e.MOMENT_WEEKS="moment-weeks",e.MOMENT_DAYS="moment-days",e.MOMENT_MONTHS="moment-months",e.MOMENT_YEAR="moment-year",e.MOMENT_AGO="moment-ago",e))(LanguageKey||{});const zhLangMap={[LanguageKey.APP_SLOGAN]:META.zh_sub_title,[LanguageKey.CATEGORY_INSIGHT]:"\u65E0\u8272\u5EB5",[LanguageKey.CATEGORY_CODE]:"\u5B81\u9759\u5BFA",[LanguageKey.PAGE_HOME]:"\u660E\u6BBF",[LanguageKey.PAGE_GITHUB]:"\u4E39\u9752\u9601",[LanguageKey.PAGE_OPENSEA]:"\u85CF\u54C1",[LanguageKey.PAGE_ARCHIVE]:"\u4E07\u8C61\u6BBF",[LanguageKey.PAGE_ABOUT]:"\u72C2\u6D6A\u751F",[LanguageKey.PAGE_GUESTBOOK]:"\u56DB\u65B9\u9986",[LanguageKey.PAGE_APP]:"\u5BA2\u6237\u7AEF",[LanguageKey.PAGE_LENS]:"\u832B\u6DAF",[LanguageKey.PAGE_JOB]:"\u4F2F\u4E50",[LanguageKey.PAGE_MERCH]:"\u5468\u8FB9",[LanguageKey.PAGE_SPONSOR]:"\u8D5E\u52A9",[LanguageKey.PAGE_FREELANCER]:"\u5584\u5DE7\u5802",[LanguageKey.STATISTIC_ARTICLES]:"\u5168\u7AD9\u6587\u7AE0",[LanguageKey.STATISTIC_COMMENTS]:"\u5168\u7AD9\u8BC4\u8BBA",[LanguageKey.STATISTIC_TAGS]:"\u5168\u7AD9\u6807\u7B7E",[LanguageKey.STATISTIC_TODAY_VIEWS]:"\u4ECA\u65E5\u9605\u8BFB",[LanguageKey.STATISTIC_TOTAL_VIEWS]:"\u7D2F\u8BA1\u9605\u8BFB",[LanguageKey.STATISTIC_TOTAL_UPVOTES]:"\u5171\u83B7\u70B9\u8D5E",[LanguageKey.STATISTIC_AVERAGE_EMOTION]:"\u7AD9\u70B9\u8BC4\u5206",[LanguageKey.EMPTY_PLACEHOLDER]:"\u7A7A\u7A7A\u5982\u4E5F",[LanguageKey.NOT_FOUND]:"\u4F17\u91CC\u5BFB\u4ED6 \u6211\u5DF2\u4E0D\u518D",[LanguageKey.BACK_TO_HOME_PAGE]:"\u5C71\u6CB3\u4E07\u91CC \u957F\u6B4C\u5F52\u6545",[LanguageKey.GUESTBOOK_SLOGAN]:"\u6B64\u5FC3\u5149\u660E \u4EA6\u590D\u4F55\u8A00",[LanguageKey.PAGE_FREELANCER_SLOGAN]:"\u4E3A\u6211\u4E00\u6325\u624B\uFF0C\u5982\u4E34\u4E07\u58D1\u677E",[LanguageKey.PAGE_FREELANCER_EMAIL_ME]:"\u653E\u7801\u8FC7\u6765",[LanguageKey.AD]:"\u5E7F\u800C\u544A\u4E4B",[LanguageKey.BARRAGE]:"\u7545\u8A00",[LanguageKey.FEEDBACK]:"\u53CD\u9988",[LanguageKey.TO_TOP]:"\u56DE\u5230\u9876\u90E8",[LanguageKey.TO_BOTTOM]:"\u4E0B\u4E00\u5C4F",[LanguageKey.ORIGIN_ORIGINAL]:"\u539F\u521B",[LanguageKey.ORIGIN_REPRINT]:"\u8F6C\u8F7D",[LanguageKey.ORIGIN_HYBRID]:"\u884D\u751F",[LanguageKey.ACTION_ON]:"\u5F00",[LanguageKey.ACTION_OFF]:"\u5173",[LanguageKey.MUSIC_PLACEHOLDER]:"\u4E94\u97F3\u516D\u5F8B\uFF0C\u4E03\u5F26\u516B\u5EA6",[LanguageKey.SEARCH_PLACEHOLDER]:"\u4E0A\u4E0B\u6C42\u7D22",[LanguageKey.ANNOUNCEMENT_PLACEHOLDER]:"\u7A7A\u7A7A\u5982\u4E5F",[LanguageKey.CATEGORY_UNCATEGORIZED]:"\u672A\u5206\u7C7B",[LanguageKey.TAG_PLACEHOLDER]:"\u65E0\u6807\u7B7E",[LanguageKey.ARTICLE_TITLE]:"\u6587\u4E0D\u52A0\u70B9",[LanguageKey.ARTICLE_VIEWS]:"\u6B21\u9605\u8BFB",[LanguageKey.ARTICLE_PLACEHOLDER]:"\u7A7A\u7A7A\u5982\u4E5F",[LanguageKey.ARTICLE_READ_ALL]:"\u9605\u8BFB\u4F59\u4E0B\u5168\u6587",[LanguageKey.ARTICLE_RENDERING]:"\u6E32\u67D3\u4E2D..",[LanguageKey.HOT_ARTICLE_LIST_TITLE]:"\u7FA4\u8D24\u6BD5\u81F3",[LanguageKey.ARTICLE_LIST_LOADMORE]:"\u5C71\u6CB3\u5165\u68A6",[LanguageKey.ARTICLE_LIST_LOADING]:"\u4EBA\u9762\u6843\u82B1",[LanguageKey.ARTICLE_LIST_NO_MORE]:"\u6625\u5C3D\u6C5F\u5357",[LanguageKey.COMMENT_LIST_EMPTY]:"\u671F\u5F85\u4F60\u7684\u6377\u8DB3\u5148\u767B",[LanguageKey.COMMENT_UPVOTE]:"\u8D5E",[LanguageKey.COMMENT_DOWNVOTE]:"\u8E29",[LanguageKey.COMMENT_DELETE]:"\u5220\u9664",[LanguageKey.COMMENT_DELETE_CONFIRM]:"\u786E\u5B9A\u8981\u5220\u9664\u6B64\u8BC4\u8BBA\u5417\uFF1F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u6062\u590D",[LanguageKey.COMMENT_REPLY]:"\u56DE\u590D",[LanguageKey.COMMENT_REPLY_CANCEL]:"\u53D6\u6D88\u56DE\u590D",[LanguageKey.COMMENT_MODERATOR]:"\u535A\u4E3B",[LanguageKey.COMMENT_SORT_OLD]:"\u6700\u65E9",[LanguageKey.COMMENT_SORT_NEW]:"\u6700\u65B0",[LanguageKey.COMMENT_SORT_HOT]:"\u6700\u70ED",[LanguageKey.COMMENT_POST_NAME]:"\u540D\u5B57",[LanguageKey.COMMENT_POST_EMAIL]:"\u90AE\u7BB1",[LanguageKey.COMMENT_POST_SITE]:"\u7F51\u5740",[LanguageKey.COMMENT_POST_CONTENT]:"\u5185\u5BB9",[LanguageKey.COMMENT_POST_PLACEHOLDER]:"\u613F\u4F60\u7684\u89C1\u89E3\u4E00\u9488\u89C1\u8840",[LanguageKey.COMMENT_POST_ERROR_CONTENT]:"\u5185\u5BB9\u9700\u8981\u5728 3000 \u5B57\u4EE5\u5185",[LanguageKey.QUERY_PARAMS_ERROR]:"\u8BF7\u6C42\u53C2\u6570\u9519\u8BEF\uFF1A",[LanguageKey.POST_ACTION_ERROR]:"\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BE6\u7EC6\u539F\u56E0 > \u63A7\u5236\u53F0",[LanguageKey.SUBMIT]:"\u63D0\u4EA4",[LanguageKey.SUBMITTING]:"\u63D0\u4EA4\u4E2D...",[LanguageKey.MOMENT_AM]:"\u4E0A\u5348",[LanguageKey.MOMENT_PM]:"\u4E0B\u5348",[LanguageKey.MOMENT_JUST_NOW]:"\u521A\u521A",[LanguageKey.MOMENT_MINUTES]:"\u5206\u949F",[LanguageKey.MOMENT_HOURS]:"\u5C0F\u65F6",[LanguageKey.MOMENT_WEEKS]:"\u5468",[LanguageKey.MOMENT_DAYS]:"\u5929",[LanguageKey.MOMENT_MONTHS]:"\u4E2A\u6708",[LanguageKey.MOMENT_YEAR]:"\u5E74",[LanguageKey.MOMENT_AGO]:e=>`${e.date}\u524D`},enLangMap={[LanguageKey.APP_SLOGAN]:META.en_sub_title,[LanguageKey.CATEGORY_INSIGHT]:"Insight",[LanguageKey.CATEGORY_CODE]:"Code",[LanguageKey.PAGE_HOME]:"Home",[LanguageKey.PAGE_GITHUB]:"GitHub",[LanguageKey.PAGE_OPENSEA]:"OpenSea",[LanguageKey.PAGE_ARCHIVE]:"Archive",[LanguageKey.PAGE_ABOUT]:"About",[LanguageKey.PAGE_GUESTBOOK]:"Guestbook",[LanguageKey.PAGE_APP]:"APP",[LanguageKey.PAGE_LENS]:"Lens",[LanguageKey.PAGE_JOB]:"Job",[LanguageKey.PAGE_MERCH]:"Merch",[LanguageKey.PAGE_SPONSOR]:"Sponsor",[LanguageKey.PAGE_FREELANCER]:"Freelancer",[LanguageKey.STATISTIC_ARTICLES]:"Articles",[LanguageKey.STATISTIC_COMMENTS]:"Comments",[LanguageKey.STATISTIC_TAGS]:"Tags",[LanguageKey.STATISTIC_TODAY_VIEWS]:"Today views",[LanguageKey.STATISTIC_TOTAL_VIEWS]:"Total views",[LanguageKey.STATISTIC_TOTAL_UPVOTES]:"Total upvotes",[LanguageKey.STATISTIC_AVERAGE_EMOTION]:"Rating",[LanguageKey.EMPTY_PLACEHOLDER]:"Null",[LanguageKey.NOT_FOUND]:"Arrives here at last",[LanguageKey.BACK_TO_HOME_PAGE]:"Drive by",[LanguageKey.GUESTBOOK_SLOGAN]:"You have come a long way",[LanguageKey.PAGE_FREELANCER_SLOGAN]:"Talk is cheap. Show me the code",[LanguageKey.PAGE_FREELANCER_EMAIL_ME]:"Email me",[LanguageKey.AD]:"AD",[LanguageKey.BARRAGE]:"Barrage",[LanguageKey.FEEDBACK]:"Feedback",[LanguageKey.TO_TOP]:"To top",[LanguageKey.TO_BOTTOM]:"Next screen",[LanguageKey.ORIGIN_ORIGINAL]:"OG",[LanguageKey.ORIGIN_REPRINT]:"RPT",[LanguageKey.ORIGIN_HYBRID]:"HY",[LanguageKey.ACTION_ON]:"on",[LanguageKey.ACTION_OFF]:"off",[LanguageKey.MUSIC_PLACEHOLDER]:"The music, the soul of man",[LanguageKey.SEARCH_PLACEHOLDER]:"Search...",[LanguageKey.CATEGORY_UNCATEGORIZED]:"Uncategorized",[LanguageKey.ANNOUNCEMENT_PLACEHOLDER]:"No announcements",[LanguageKey.TAG_PLACEHOLDER]:"No tags",[LanguageKey.ARTICLE_PLACEHOLDER]:"No articles",[LanguageKey.ARTICLE_TITLE]:"Articles",[LanguageKey.ARTICLE_VIEWS]:"views",[LanguageKey.ARTICLE_READ_ALL]:"Render all",[LanguageKey.ARTICLE_RENDERING]:"Rendering...",[LanguageKey.HOT_ARTICLE_LIST_TITLE]:"Hottest",[LanguageKey.ARTICLE_LIST_LOADMORE]:"Loadmore",[LanguageKey.ARTICLE_LIST_LOADING]:"Loading...",[LanguageKey.ARTICLE_LIST_NO_MORE]:"No more",[LanguageKey.COMMENT_LIST_EMPTY]:"Be the first to comment",[LanguageKey.COMMENT_UPVOTE]:"upvote",[LanguageKey.COMMENT_DOWNVOTE]:"downvote",[LanguageKey.COMMENT_DELETE]:"delete",[LanguageKey.COMMENT_DELETE_CONFIRM]:"Are you sure you want to delete this comment? You cannot undo this action.",[LanguageKey.COMMENT_REPLY]:"reply",[LanguageKey.COMMENT_REPLY_CANCEL]:"cancel reply",[LanguageKey.COMMENT_MODERATOR]:"Moderator",[LanguageKey.COMMENT_SORT_OLD]:"Oldest",[LanguageKey.COMMENT_SORT_NEW]:"Newest",[LanguageKey.COMMENT_SORT_HOT]:"Hottest",[LanguageKey.COMMENT_POST_NAME]:"name",[LanguageKey.COMMENT_POST_EMAIL]:"email",[LanguageKey.COMMENT_POST_SITE]:"site",[LanguageKey.COMMENT_POST_CONTENT]:"content",[LanguageKey.COMMENT_POST_PLACEHOLDER]:"Hit the nail on the head",[LanguageKey.COMMENT_POST_ERROR_CONTENT]:"Content requirements are within 3000 words!",[LanguageKey.QUERY_PARAMS_ERROR]:"Invalid query params: ",[LanguageKey.POST_ACTION_ERROR]:"Failed! Get error detail in console",[LanguageKey.SUBMIT]:"Submit",[LanguageKey.SUBMITTING]:"Submitting...",[LanguageKey.MOMENT_AM]:"AM",[LanguageKey.MOMENT_PM]:"PM",[LanguageKey.MOMENT_JUST_NOW]:"Just now",[LanguageKey.MOMENT_MINUTES]:"minutes",[LanguageKey.MOMENT_HOURS]:"hours",[LanguageKey.MOMENT_WEEKS]:"weeks",[LanguageKey.MOMENT_DAYS]:"days",[LanguageKey.MOMENT_MONTHS]:"months",[LanguageKey.MOMENT_YEAR]:"year",[LanguageKey.MOMENT_AGO]:e=>`${e.date} ago`};var Language=(e=>(e.English="en",e.Chinese="zh",e))(Language||{});const languages$1=[{code:"zh",iso:"zh-CN",name:"\u7B80\u4F53\u4E2D\u6587",data:zhLangMap},{code:"en",iso:"en-US",name:"English",data:enLangMap}],setRefData=(e,t)=>{setSSRContext("refs",{...getSSRContext("refs"),[e]:t})},getValue=e=>e instanceof Function?e():e,isProxyable=e=>Boolean(e)&&typeof e=="object",universalRef=(e,t)=>{if(isSPA)return ref(getValue(t));let i=getValue(t);t instanceof Function&&setRefData(e,i);const s=(c,d,g)=>new Proxy(g,{get(r,y){if(c(),isProxyable(r[y]))return s(c,d,r[y]);const E=Reflect.get(r,y);return typeof E=="function"?E.bind(r):E},set(r,y,E){const w=Reflect.set(r,y,E);return setRefData(e,i),d(),w}});return customRef((c,d)=>({get:()=>(c(),isProxyable(i)?s(c,d,i):i),set:g=>{setRefData(e,g),i=g,d()}}))},BAD_REQUEST=400,NOT_FOUND=404,INVALID_ERROR=500;var uaParser$1={exports:{}};(function(e,t){(function(i,s){var c="1.0.2",d="",g="?",r="function",y="undefined",E="object",w="string",k="major",S="model",I="name",L="type",D="vendor",O="version",V="architecture",z="console",U="mobile",Z="tablet",W="smarttv",ne="wearable",re="embedded",ie=255,Ce="Amazon",we="Apple",fe="ASUS",de="BlackBerry",Le="Browser",Ge="Chrome",wt="Edge",Te="Firefox",ze="Google",Ke="Huawei",ut="LG",Nt="Microsoft",an="Motorola",un="Opera",wn="Samsung",An="Sony",kn="Xiaomi",En="Zebra",Vn="Facebook",ni=function(dt,ct){var Tt={};for(var tt in dt)ct[tt]&&ct[tt].length%2===0?Tt[tt]=ct[tt].concat(dt[tt]):Tt[tt]=dt[tt];return Tt},Xn=function(dt){for(var ct={},Tt=0;Tt<dt.length;Tt++)ct[dt[Tt].toUpperCase()]=dt[Tt];return ct},Ln=function(dt,ct){return typeof dt===w?gi(ct).indexOf(gi(dt))!==-1:!1},gi=function(dt){return dt.toLowerCase()},yi=function(dt){return typeof dt===w?dt.replace(/[^\d\.]/g,d).split(".")[0]:s},Ei=function(dt,ct){if(typeof dt===w)return dt=dt.replace(/^\s\s*/,d).replace(/\s\s*$/,d),typeof ct===y?dt:dt.substring(0,ie)},ve=function(dt,ct){for(var Tt=0,tt,st,Et,It,dn,gn;Tt<ct.length&&!dn;){var Un=ct[Tt],oi=ct[Tt+1];for(tt=st=0;tt<Un.length&&!dn;)if(dn=Un[tt++].exec(dt),dn)for(Et=0;Et<oi.length;Et++)gn=dn[++st],It=oi[Et],typeof It===E&&It.length>0?It.length===2?typeof It[1]==r?this[It[0]]=It[1].call(this,gn):this[It[0]]=It[1]:It.length===3?typeof It[1]===r&&!(It[1].exec&&It[1].test)?this[It[0]]=gn?It[1].call(this,gn,It[2]):s:this[It[0]]=gn?gn.replace(It[1],It[2]):s:It.length===4&&(this[It[0]]=gn?It[3].call(this,gn.replace(It[1],It[2])):s):this[It]=gn||s;Tt+=2}},Ve=function(dt,ct){for(var Tt in ct)if(typeof ct[Tt]===E&&ct[Tt].length>0){for(var tt=0;tt<ct[Tt].length;tt++)if(Ln(ct[Tt][tt],dt))return Tt===g?s:Tt}else if(Ln(ct[Tt],dt))return Tt===g?s:Tt;return dt},pt={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Ze={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},mt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[O,[I,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[O,[I,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[I,O],[/opios[\/ ]+([\w\.]+)/i],[O,[I,un+" Mini"]],[/\bopr\/([\w\.]+)/i],[O,[I,un]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[I,O],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[O,[I,"UC"+Le]],[/\bqbcore\/([\w\.]+)/i],[O,[I,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[O,[I,"WeChat"]],[/konqueror\/([\w\.]+)/i],[O,[I,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[O,[I,"IE"]],[/yabrowser\/([\w\.]+)/i],[O,[I,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[I,/(.+)/,"$1 Secure "+Le],O],[/\bfocus\/([\w\.]+)/i],[O,[I,Te+" Focus"]],[/\bopt\/([\w\.]+)/i],[O,[I,un+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[O,[I,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[O,[I,"Dolphin"]],[/coast\/([\w\.]+)/i],[O,[I,un+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[O,[I,"MIUI "+Le]],[/fxios\/([-\w\.]+)/i],[O,[I,Te]],[/\bqihu|(qi?ho?o?|360)browser/i],[[I,"360 "+Le]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[I,/(.+)/,"$1 "+Le],O],[/(comodo_dragon)\/([\w\.]+)/i],[[I,/_/g," "],O],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[I,O],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[I],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[I,Vn],O],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[I,O],[/\bgsa\/([\w\.]+) .*safari\//i],[O,[I,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[O,[I,Ge+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[I,Ge+" WebView"],O],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[O,[I,"Android "+Le]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[I,O],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[O,[I,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[O,I],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[I,[O,Ve,pt]],[/(webkit|khtml)\/([\w\.]+)/i],[I,O],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[I,"Netscape"],O],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[O,[I,Te+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[I,O]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[V,"amd64"]],[/(ia32(?=;))/i],[[V,gi]],[/((?:i[346]|x)86)[;\)]/i],[[V,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[V,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[V,"armhf"]],[/windows (ce|mobile); ppc;/i],[[V,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[V,/ower/,d,gi]],[/(sun4\w)[;\)]/i],[[V,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[V,gi]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[S,[D,wn],[L,Z]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[S,[D,wn],[L,U]],[/\((ip(?:hone|od)[\w ]*);/i],[S,[D,we],[L,U]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[S,[D,we],[L,Z]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[S,[D,Ke],[L,Z]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[S,[D,Ke],[L,U]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[S,/_/g," "],[D,kn],[L,U]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[S,/_/g," "],[D,kn],[L,Z]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[S,[D,"OPPO"],[L,U]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[S,[D,"Vivo"],[L,U]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[S,[D,"Realme"],[L,U]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[S,[D,an],[L,U]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[S,[D,an],[L,Z]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[S,[D,ut],[L,Z]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[S,[D,ut],[L,U]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[S,[D,"Lenovo"],[L,Z]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[S,/_/g," "],[D,"Nokia"],[L,U]],[/(pixel c)\b/i],[S,[D,ze],[L,Z]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[S,[D,ze],[L,U]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[S,[D,An],[L,U]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[S,"Xperia Tablet"],[D,An],[L,Z]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[S,[D,"OnePlus"],[L,U]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[S,[D,Ce],[L,Z]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[S,/(.+)/g,"Fire Phone $1"],[D,Ce],[L,U]],[/(playbook);[-\w\),; ]+(rim)/i],[S,D,[L,Z]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[S,[D,de],[L,U]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[S,[D,fe],[L,Z]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[S,[D,fe],[L,U]],[/(nexus 9)/i],[S,[D,"HTC"],[L,Z]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[D,[S,/_/g," "],[L,U]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[S,[D,"Acer"],[L,Z]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[S,[D,"Meizu"],[L,U]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[S,[D,"Sharp"],[L,U]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[D,S,[L,U]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[D,S,[L,Z]],[/(surface duo)/i],[S,[D,Nt],[L,Z]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[S,[D,"Fairphone"],[L,U]],[/(u304aa)/i],[S,[D,"AT&T"],[L,U]],[/\bsie-(\w*)/i],[S,[D,"Siemens"],[L,U]],[/\b(rct\w+) b/i],[S,[D,"RCA"],[L,Z]],[/\b(venue[\d ]{2,7}) b/i],[S,[D,"Dell"],[L,Z]],[/\b(q(?:mv|ta)\w+) b/i],[S,[D,"Verizon"],[L,Z]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[S,[D,"Barnes & Noble"],[L,Z]],[/\b(tm\d{3}\w+) b/i],[S,[D,"NuVision"],[L,Z]],[/\b(k88) b/i],[S,[D,"ZTE"],[L,Z]],[/\b(nx\d{3}j) b/i],[S,[D,"ZTE"],[L,U]],[/\b(gen\d{3}) b.+49h/i],[S,[D,"Swiss"],[L,U]],[/\b(zur\d{3}) b/i],[S,[D,"Swiss"],[L,Z]],[/\b((zeki)?tb.*\b) b/i],[S,[D,"Zeki"],[L,Z]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[D,"Dragon Touch"],S,[L,Z]],[/\b(ns-?\w{0,9}) b/i],[S,[D,"Insignia"],[L,Z]],[/\b((nxa|next)-?\w{0,9}) b/i],[S,[D,"NextBook"],[L,Z]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[D,"Voice"],S,[L,U]],[/\b(lvtel\-)?(v1[12]) b/i],[[D,"LvTel"],S,[L,U]],[/\b(ph-1) /i],[S,[D,"Essential"],[L,U]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[S,[D,"Envizen"],[L,Z]],[/\b(trio[-\w\. ]+) b/i],[S,[D,"MachSpeed"],[L,Z]],[/\btu_(1491) b/i],[S,[D,"Rotor"],[L,Z]],[/(shield[\w ]+) b/i],[S,[D,"Nvidia"],[L,Z]],[/(sprint) (\w+)/i],[D,S,[L,U]],[/(kin\.[onetw]{3})/i],[[S,/\./g," "],[D,Nt],[L,U]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[S,[D,En],[L,Z]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[S,[D,En],[L,U]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[D,S,[L,z]],[/droid.+; (shield) bui/i],[S,[D,"Nvidia"],[L,z]],[/(playstation [345portablevi]+)/i],[S,[D,An],[L,z]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[S,[D,Nt],[L,z]],[/smart-tv.+(samsung)/i],[D,[L,W]],[/hbbtv.+maple;(\d+)/i],[[S,/^/,"SmartTV"],[D,wn],[L,W]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[D,ut],[L,W]],[/(apple) ?tv/i],[D,[S,we+" TV"],[L,W]],[/crkey/i],[[S,Ge+"cast"],[D,ze],[L,W]],[/droid.+aft(\w)( bui|\))/i],[S,[D,Ce],[L,W]],[/\(dtv[\);].+(aquos)/i],[S,[D,"Sharp"],[L,W]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[D,Ei],[S,Ei],[L,W]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[L,W]],[/((pebble))app/i],[D,S,[L,ne]],[/droid.+; (glass) \d/i],[S,[D,ze],[L,ne]],[/droid.+; (wt63?0{2,3})\)/i],[S,[D,En],[L,ne]],[/(quest( 2)?)/i],[S,[D,Vn],[L,ne]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[D,[L,re]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[S,[L,U]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[S,[L,Z]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[L,Z]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[L,U]],[/(android[-\w\. ]{0,9});.+buil/i],[S,[D,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[O,[I,wt+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[O,[I,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[I,O],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[O,I]],os:[[/microsoft (windows) (vista|xp)/i],[I,O],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[I,[O,Ve,Ze]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[I,"Windows"],[O,Ve,Ze]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[O,/_/g,"."],[I,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[I,"Mac OS"],[O,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[O,I],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[I,O],[/\(bb(10);/i],[O,[I,de]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[O,[I,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[O,[I,Te+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[O,[I,"webOS"]],[/crkey\/([\d\.]+)/i],[O,[I,Ge+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[I,"Chromium OS"],O],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[I,O],[/(sunos) ?([\w\.\d]*)/i],[[I,"Solaris"],O],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[I,O]]},Qe=function(dt,ct){if(typeof dt===E&&(ct=dt,dt=s),!(this instanceof Qe))return new Qe(dt,ct).getResult();var Tt=dt||(typeof i!==y&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:d),tt=ct?ni(mt,ct):mt;return this.getBrowser=function(){var st={};return st[I]=s,st[O]=s,ve.call(st,Tt,tt.browser),st.major=yi(st.version),st},this.getCPU=function(){var st={};return st[V]=s,ve.call(st,Tt,tt.cpu),st},this.getDevice=function(){var st={};return st[D]=s,st[S]=s,st[L]=s,ve.call(st,Tt,tt.device),st},this.getEngine=function(){var st={};return st[I]=s,st[O]=s,ve.call(st,Tt,tt.engine),st},this.getOS=function(){var st={};return st[I]=s,st[O]=s,ve.call(st,Tt,tt.os),st},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Tt},this.setUA=function(st){return Tt=typeof st===w&&st.length>ie?Ei(st,ie):st,this},this.setUA(Tt),this};Qe.VERSION=c,Qe.BROWSER=Xn([I,O,k]),Qe.CPU=Xn([V]),Qe.DEVICE=Xn([S,D,L,z,U,W,Z,ne,re]),Qe.ENGINE=Qe.OS=Xn([I,O]),e.exports&&(t=e.exports=Qe),t.UAParser=Qe;var Ue=typeof i!==y&&(i.jQuery||i.Zepto);if(Ue&&!Ue.ua){var vt=new Qe;Ue.ua=vt.getResult(),Ue.ua.get=function(){return vt.getUA()},Ue.ua.set=function(dt){vt.setUA(dt);var ct=vt.getResult();for(var Tt in ct)Ue.ua[Tt]=ct[Tt]}}})(typeof window=="object"?window:commonjsGlobal)})(uaParser$1,uaParser$1.exports);const parser$1=uaParser$1.exports,uaParser=e=>{const t=parser$1(e||""),i=String(t.browser.name).toLowerCase(),s=c=>c.some(d=>d.toLowerCase()===i);return{result:t,isIE:s(["compatible","MSIE","IE"]),isEdge:s(["Edge"]),isFirefox:s(["Firefox"]),isChrome:s(["Chrome","Chromium"]),isSafari:s(["Safari"]),isWechat:s(["Wechat"]),isIos:t.os.name==="iOS",isAndroid:t.os.name==="Android",isMobile:t.device.type==="mobile"}},isTargetLanguageUser=(e,t)=>typeof e=="string"?e.includes(t):Array.isArray(e)?e.some(i=>i.includes(t)):!1,isZhUser=e=>e?isTargetLanguageUser(e,Language.Chinese):!0;var LayoutColumn=(e=>(e[e.Normal=0]="Normal",e[e.Wide=1]="Wide",e[e.Full=2]="Full",e))(LayoutColumn||{});const GlobalStateSymbol=Symbol("globalState"),createGlobalState=e=>{const t=universalRef("error",()=>null),i={code:INVALID_ERROR},s=D=>{var O;D?D instanceof Error?t.value={code:(O=D.code)!=null?O:i.code,message:D.message}:typeof D=="string"?t.value={...i,message:D}:t.value={...D,code:D.status||D.status||i.code}:t.value=null},c=ref(!1),d=()=>{c.value=!0},g=reactive({original:e.userAgent,language:e.language,isZhUser:isZhUser(e.language),...uaParser(e.userAgent)}),r=ref(e.layout),y=computed(()=>({layout:r.value,isNormal:r.value===0,isWide:r.value===1,isFull:r.value===2})),E=D=>{D!==r.value&&(r.value=D)},w=computed(()=>{const D=g.isMobile||g.isWechat||g.isSafari?"jpeg":"webp";return{ext:D,isJpg:D==="jpeg",isWebP:D==="webp"}}),k=reactive({sponsor:!1,feedback:!1,statement:!1}),S=(D,O)=>{k[D]=O},L={toRawState:()=>({renderError:t.value,userAgent:g.original,language:g.language,layout:r.value}),renderError:readonly(t),setRenderError:s,isHydrated:readonly(c),setHydrate:d,layoutColumn:y,setLayoutColumn:E,userAgent:readonly(g),imageExt:w,switcher:readonly(k),toggleSwitcher:S};return{...L,install(D){D.provide(GlobalStateSymbol,L)}}},useGlobalState=()=>inject(GlobalStateSymbol),useUniversalFetch=e=>{const t=useGlobalState(),i=()=>{onBeforeMount(()=>e())};if(isSPA){i();return}{onServerPrefetch(()=>e().catch(s=>(t.setRenderError(s),Promise.reject(s))));return}};var pinia_prod={},lib$2={};(function(e){var t=require$$0$1;Object.keys(t).forEach(function(i){e[i]=t[i]}),e.set=function(i,s,c){return Array.isArray(i)?(i.length=Math.max(i.length,s),i.splice(s,1,c),c):(i[s]=c,c)},e.del=function(i,s){if(Array.isArray(i)){i.splice(s,1);return}delete i[s]},e.Vue=t,e.Vue2=void 0,e.isVue2=!1,e.isVue3=!0,e.install=function(){}})(lib$2);/*!
  * pinia v2.0.20
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=lib$2;let i;const s=Te=>i=Te,c=()=>t.getCurrentInstance()&&t.inject(d)||i,d=Symbol();function g(Te){return Te&&typeof Te=="object"&&Object.prototype.toString.call(Te)==="[object Object]"&&typeof Te.toJSON!="function"}e.MutationType=void 0,function(Te){Te.direct="direct",Te.patchObject="patch object",Te.patchFunction="patch function"}(e.MutationType||(e.MutationType={}));const r=typeof window<"u";function y(){const Te=t.effectScope(!0),ze=Te.run(()=>t.ref({}));let Ke=[],ut=[];const Nt=t.markRaw({install(an){s(Nt),t.isVue2||(Nt._a=an,an.provide(d,Nt),an.config.globalProperties.$pinia=Nt,ut.forEach(un=>Ke.push(un)),ut=[])},use(an){return!this._a&&!t.isVue2?ut.push(an):Ke.push(an),this},_p:Ke,_a:null,_e:Te,_s:new Map,state:ze});return Nt}function E(Te,ze){return()=>{}}const w=()=>{};function k(Te,ze,Ke,ut=w){Te.push(ze);const Nt=()=>{const an=Te.indexOf(ze);an>-1&&(Te.splice(an,1),ut())};return!Ke&&t.getCurrentInstance()&&t.onUnmounted(Nt),Nt}function S(Te,...ze){Te.slice().forEach(Ke=>{Ke(...ze)})}function I(Te,ze){for(const Ke in ze){if(!ze.hasOwnProperty(Ke))continue;const ut=ze[Ke],Nt=Te[Ke];g(Nt)&&g(ut)&&Te.hasOwnProperty(Ke)&&!t.isRef(ut)&&!t.isReactive(ut)?Te[Ke]=I(Nt,ut):Te[Ke]=ut}return Te}const L=Symbol(),D=new WeakMap;function O(Te){return t.isVue2?D.set(Te,1)&&Te:Object.defineProperty(Te,L,{})}function V(Te){return t.isVue2?!D.has(Te):!g(Te)||!Te.hasOwnProperty(L)}const{assign:z}=Object;function U(Te){return!!(t.isRef(Te)&&Te.effect)}function Z(Te,ze,Ke,ut){const{state:Nt,actions:an,getters:un}=ze,wn=Ke.state.value[Te];let An;function kn(){wn||(t.isVue2?t.set(Ke.state.value,Te,Nt?Nt():{}):Ke.state.value[Te]=Nt?Nt():{});const En=t.toRefs(Ke.state.value[Te]);return z(En,an,Object.keys(un||{}).reduce((Vn,ni)=>(Vn[ni]=t.markRaw(t.computed(()=>{s(Ke);const Xn=Ke._s.get(Te);if(!(t.isVue2&&!Xn._r))return un[ni].call(Xn,Xn)})),Vn),{}))}return An=W(Te,kn,ze,Ke,ut,!0),An.$reset=function(){const Vn=Nt?Nt():{};this.$patch(ni=>{z(ni,Vn)})},An}function W(Te,ze,Ke={},ut,Nt,an){let un;const wn=z({actions:{}},Ke),An={deep:!0};let kn,En,Vn=t.markRaw([]),ni=t.markRaw([]),Xn;const Ln=ut.state.value[Te];!an&&!Ln&&(t.isVue2?t.set(ut.state.value,Te,{}):ut.state.value[Te]={}),t.ref({});let gi;function yi(Qe){let Ue;kn=En=!1,typeof Qe=="function"?(Qe(ut.state.value[Te]),Ue={type:e.MutationType.patchFunction,storeId:Te,events:Xn}):(I(ut.state.value[Te],Qe),Ue={type:e.MutationType.patchObject,payload:Qe,storeId:Te,events:Xn});const vt=gi=Symbol();t.nextTick().then(()=>{gi===vt&&(kn=!0)}),En=!0,S(Vn,Ue,ut.state.value[Te])}const Ei=w;function ve(){un.stop(),Vn=[],ni=[],ut._s.delete(Te)}function Ve(Qe,Ue){return function(){s(ut);const vt=Array.from(arguments),dt=[],ct=[];function Tt(Et){dt.push(Et)}function tt(Et){ct.push(Et)}S(ni,{args:vt,name:Qe,store:Ze,after:Tt,onError:tt});let st;try{st=Ue.apply(this&&this.$id===Te?this:Ze,vt)}catch(Et){throw S(ct,Et),Et}return st instanceof Promise?st.then(Et=>(S(dt,Et),Et)).catch(Et=>(S(ct,Et),Promise.reject(Et))):(S(dt,st),st)}}const pt={_p:ut,$id:Te,$onAction:k.bind(null,ni),$patch:yi,$reset:Ei,$subscribe(Qe,Ue={}){const vt=k(Vn,Qe,Ue.detached,()=>dt()),dt=un.run(()=>t.watch(()=>ut.state.value[Te],ct=>{(Ue.flush==="sync"?En:kn)&&Qe({storeId:Te,type:e.MutationType.direct,events:Xn},ct)},z({},An,Ue)));return vt},$dispose:ve};t.isVue2&&(pt._r=!1);const Ze=t.reactive(z({},pt));ut._s.set(Te,Ze);const mt=ut._e.run(()=>(un=t.effectScope(),un.run(()=>ze())));for(const Qe in mt){const Ue=mt[Qe];if(t.isRef(Ue)&&!U(Ue)||t.isReactive(Ue))an||(Ln&&V(Ue)&&(t.isRef(Ue)?Ue.value=Ln[Qe]:I(Ue,Ln[Qe])),t.isVue2?t.set(ut.state.value[Te],Qe,Ue):ut.state.value[Te][Qe]=Ue);else if(typeof Ue=="function"){const vt=Ve(Qe,Ue);t.isVue2?t.set(mt,Qe,vt):mt[Qe]=vt,wn.actions[Qe]=Ue}}return t.isVue2?Object.keys(mt).forEach(Qe=>{t.set(Ze,Qe,mt[Qe])}):(z(Ze,mt),z(t.toRaw(Ze),mt)),Object.defineProperty(Ze,"$state",{get:()=>ut.state.value[Te],set:Qe=>{yi(Ue=>{z(Ue,Qe)})}}),t.isVue2&&(Ze._r=!0),ut._p.forEach(Qe=>{z(Ze,un.run(()=>Qe({store:Ze,app:ut._a,pinia:ut,options:wn})))}),Ln&&an&&Ke.hydrate&&Ke.hydrate(Ze.$state,Ln),kn=!0,En=!0,Ze}function ne(Te,ze,Ke){let ut,Nt;const an=typeof ze=="function";typeof Te=="string"?(ut=Te,Nt=an?Ke:ze):(Nt=Te,ut=Te.id);function un(wn,An){const kn=t.getCurrentInstance();return wn=(process.env.NODE_ENV==="test"&&i&&i._testing?null:wn)||kn&&t.inject(d),wn&&s(wn),wn=i,wn._s.has(ut)||(an?W(ut,ze,Nt,wn):Z(ut,Nt,wn)),wn._s.get(ut)}return un.$id=ut,un}let re="Store";function ie(Te){re=Te}function Ce(...Te){return Te.reduce((ze,Ke)=>(ze[Ke.$id+re]=function(){return Ke(this.$pinia)},ze),{})}function we(Te,ze){return Array.isArray(ze)?ze.reduce((Ke,ut)=>(Ke[ut]=function(){return Te(this.$pinia)[ut]},Ke),{}):Object.keys(ze).reduce((Ke,ut)=>(Ke[ut]=function(){const Nt=Te(this.$pinia),an=ze[ut];return typeof an=="function"?an.call(this,Nt):Nt[an]},Ke),{})}const fe=we;function de(Te,ze){return Array.isArray(ze)?ze.reduce((Ke,ut)=>(Ke[ut]=function(...Nt){return Te(this.$pinia)[ut](...Nt)},Ke),{}):Object.keys(ze).reduce((Ke,ut)=>(Ke[ut]=function(...Nt){return Te(this.$pinia)[ze[ut]](...Nt)},Ke),{})}function Le(Te,ze){return Array.isArray(ze)?ze.reduce((Ke,ut)=>(Ke[ut]={get(){return Te(this.$pinia)[ut]},set(Nt){return Te(this.$pinia)[ut]=Nt}},Ke),{}):Object.keys(ze).reduce((Ke,ut)=>(Ke[ut]={get(){return Te(this.$pinia)[ze[ut]]},set(Nt){return Te(this.$pinia)[ze[ut]]=Nt}},Ke),{})}function Ge(Te){if(t.isVue2)return t.toRefs(Te);{Te=t.toRaw(Te);const ze={};for(const Ke in Te){const ut=Te[Ke];(t.isRef(ut)||t.isReactive(ut))&&(ze[Ke]=t.toRef(Te,Ke))}return ze}}const wt=function(Te){Te.mixin({beforeCreate(){const ze=this.$options;if(ze.pinia){const Ke=ze.pinia;if(!this._provided){const ut={};Object.defineProperty(this,"_provided",{get:()=>ut,set:Nt=>Object.assign(ut,Nt)})}this._provided[d]=Ke,this.$pinia||(this.$pinia=Ke),Ke._a=this,r&&s(Ke)}else!this.$pinia&&ze.parent&&ze.parent.$pinia&&(this.$pinia=ze.parent.$pinia)},destroyed(){delete this._pStores}})};e.PiniaVuePlugin=wt,e.acceptHMRUpdate=E,e.createPinia=y,e.defineStore=ne,e.getActivePinia=c,e.mapActions=de,e.mapGetters=fe,e.mapState=we,e.mapStores=Ce,e.mapWritableState=Le,e.setActivePinia=s,e.setMapStoreSuffix=ie,e.skipHydrate=O,e.storeToRefs=Ge})(pinia_prod);function defineFetchStore(e){var t;return pinia_prod.defineStore({id:e.id,state:()=>({fetching:!1,fetched:!1,data:e.initData}),getters:(t=e.getters)!=null?t:{},actions:{async fetch(i){if(!(e.onlyOnce&&this.fetched)){e.cleanWhenRefetch&&(this.data=e.initData),this.fetching=!0;try{const s=await e.fetcher(i);this.data=s!=null?s:null,this.fetched=!0}finally{this.fetching=!1}}}}})}function basePropertyOf$2(e){return function(t){return e==null?void 0:e[t]}}var _basePropertyOf=basePropertyOf$2,basePropertyOf$1=_basePropertyOf,htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},escapeHtmlChar$1=basePropertyOf$1(htmlEscapes),_escapeHtmlChar=escapeHtmlChar$1,freeGlobal$1=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$1=freeGlobal||freeSelf||Function("return this")(),_root=root$1,root=_root,Symbol$4=root.Symbol,_Symbol=Symbol$4;function arrayMap$1(e,t){for(var i=-1,s=e==null?0:e.length,c=Array(s);++i<s;)c[i]=t(e[i],i,e);return c}var _arrayMap=arrayMap$1,isArray$6=Array.isArray,isArray_1=isArray$6,Symbol$3=_Symbol,objectProto$1=Object.prototype,hasOwnProperty=objectProto$1.hasOwnProperty,nativeObjectToString$1=objectProto$1.toString,symToStringTag$1=Symbol$3?Symbol$3.toStringTag:void 0;function getRawTag$1(e){var t=hasOwnProperty.call(e,symToStringTag$1),i=e[symToStringTag$1];try{e[symToStringTag$1]=void 0;var s=!0}catch{}var c=nativeObjectToString$1.call(e);return s&&(t?e[symToStringTag$1]=i:delete e[symToStringTag$1]),c}var _getRawTag=getRawTag$1,objectProto=Object.prototype,nativeObjectToString=objectProto.toString;function objectToString$2(e){return nativeObjectToString.call(e)}var _objectToString=objectToString$2,Symbol$2=_Symbol,getRawTag=_getRawTag,objectToString$1=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag$1(e){return e==null?e===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(e)?getRawTag(e):objectToString$1(e)}var _baseGetTag=baseGetTag$1;function isObjectLike$1(e){return e!=null&&typeof e=="object"}var isObjectLike_1=isObjectLike$1,baseGetTag=_baseGetTag,isObjectLike=isObjectLike_1,symbolTag="[object Symbol]";function isSymbol$3(e){return typeof e=="symbol"||isObjectLike(e)&&baseGetTag(e)==symbolTag}var isSymbol_1=isSymbol$3,Symbol$1=_Symbol,arrayMap=_arrayMap,isArray$5=isArray_1,isSymbol$2=isSymbol_1,INFINITY$1=1/0,symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString$2(e){if(typeof e=="string")return e;if(isArray$5(e))return arrayMap(e,baseToString$2)+"";if(isSymbol$2(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return t=="0"&&1/e==-INFINITY$1?"-0":t}var _baseToString=baseToString$2,baseToString$1=_baseToString;function toString$6(e){return e==null?"":baseToString$1(e)}var toString_1=toString$6,escapeHtmlChar=_escapeHtmlChar,toString$5=toString_1,reUnescapedHtml=/[&<>"']/g,reHasUnescapedHtml=RegExp(reUnescapedHtml.source);function escape$4(e){return e=toString$5(e),e&&reHasUnescapedHtml.test(e)?e.replace(reUnescapedHtml,escapeHtmlChar):e}var _escape=escape$4,basePropertyOf=_basePropertyOf,htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},unescapeHtmlChar$1=basePropertyOf(htmlUnescapes),_unescapeHtmlChar=unescapeHtmlChar$1,toString$4=toString_1,unescapeHtmlChar=_unescapeHtmlChar,reEscapedHtml=/&(?:amp|lt|gt|quot|#39);/g,reHasEscapedHtml=RegExp(reEscapedHtml.source);function unescape$3(e){return e=toString$4(e),e&&reHasEscapedHtml.test(e)?e.replace(reEscapedHtml,unescapeHtmlChar):e}var _unescape=unescape$3;function baseSlice$1(e,t,i){var s=-1,c=e.length;t<0&&(t=-t>c?0:c+t),i=i>c?c:i,i<0&&(i+=c),c=t>i?0:i-t>>>0,t>>>=0;for(var d=Array(c);++s<c;)d[s]=e[s+t];return d}var _baseSlice=baseSlice$1,baseSlice=_baseSlice;function castSlice$2(e,t,i){var s=e.length;return i=i===void 0?s:i,!t&&i>=s?e:baseSlice(e,t,i)}var _castSlice=castSlice$2,rsAstralRange$2="\\ud800-\\udfff",rsComboMarksRange$2="\\u0300-\\u036f",reComboHalfMarksRange$2="\\ufe20-\\ufe2f",rsComboSymbolsRange$2="\\u20d0-\\u20ff",rsComboRange$2=rsComboMarksRange$2+reComboHalfMarksRange$2+rsComboSymbolsRange$2,rsVarRange$2="\\ufe0e\\ufe0f",rsZWJ$2="\\u200d",reHasUnicode=RegExp("["+rsZWJ$2+rsAstralRange$2+rsComboRange$2+rsVarRange$2+"]");function hasUnicode$4(e){return reHasUnicode.test(e)}var _hasUnicode=hasUnicode$4;function isObject$5(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var isObject_1=isObject$5,_nodeUtil={exports:{}};(function(e,t){var i=_freeGlobal,s=t&&!t.nodeType&&t,c=s&&!0&&e&&!e.nodeType&&e,d=c&&c.exports===s,g=d&&i.process,r=function(){try{var y=c&&c.require&&c.require("util").types;return y||g&&g.binding&&g.binding("util")}catch{}}();e.exports=r})(_nodeUtil,_nodeUtil.exports);var nodeUtil=_nodeUtil.exports;nodeUtil&&nodeUtil.isRegExp;function baseProperty$1(e){return function(t){return t==null?void 0:t[e]}}var _baseProperty=baseProperty$1,baseProperty=_baseProperty,asciiSize$1=baseProperty("length"),_asciiSize=asciiSize$1,rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsVarRange$1="\\ufe0e\\ufe0f",rsAstral$1="["+rsAstralRange$1+"]",rsCombo$1="["+rsComboRange$1+"]",rsFitz$1="\\ud83c[\\udffb-\\udfff]",rsModifier$1="(?:"+rsCombo$1+"|"+rsFitz$1+")",rsNonAstral$1="[^"+rsAstralRange$1+"]",rsRegional$1="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair$1="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ$1="\\u200d",reOptMod$1=rsModifier$1+"?",rsOptVar$1="["+rsVarRange$1+"]?",rsOptJoin$1="(?:"+rsZWJ$1+"(?:"+[rsNonAstral$1,rsRegional$1,rsSurrPair$1].join("|")+")"+rsOptVar$1+reOptMod$1+")*",rsSeq$1=rsOptVar$1+reOptMod$1+rsOptJoin$1,rsSymbol$1="(?:"+[rsNonAstral$1+rsCombo$1+"?",rsCombo$1,rsRegional$1,rsSurrPair$1,rsAstral$1].join("|")+")",reUnicode$1=RegExp(rsFitz$1+"(?="+rsFitz$1+")|"+rsSymbol$1+rsSeq$1,"g");function unicodeSize$1(e){for(var t=reUnicode$1.lastIndex=0;reUnicode$1.test(e);)++t;return t}var _unicodeSize=unicodeSize$1,asciiSize=_asciiSize,hasUnicode$3=_hasUnicode,unicodeSize=_unicodeSize;function stringSize$2(e){return hasUnicode$3(e)?unicodeSize(e):asciiSize(e)}var _stringSize=stringSize$2;function asciiToArray$1(e){return e.split("")}var _asciiToArray=asciiToArray$1,rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsVarRange="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange+"]",rsCombo="["+rsComboRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ="\\u200d",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");function unicodeToArray$1(e){return e.match(reUnicode)||[]}var _unicodeToArray=unicodeToArray$1,asciiToArray=_asciiToArray,hasUnicode$2=_hasUnicode,unicodeToArray=_unicodeToArray;function stringToArray$2(e){return hasUnicode$2(e)?unicodeToArray(e):asciiToArray(e)}var _stringToArray=stringToArray$2,reWhitespace=/\s/;function trimmedEndIndex$1(e){for(var t=e.length;t--&&reWhitespace.test(e.charAt(t)););return t}var _trimmedEndIndex=trimmedEndIndex$1,trimmedEndIndex=_trimmedEndIndex,reTrimStart=/^\s+/;function baseTrim$1(e){return e&&e.slice(0,trimmedEndIndex(e)+1).replace(reTrimStart,"")}var _baseTrim=baseTrim$1,baseTrim=_baseTrim,isObject$4=isObject_1,isSymbol$1=isSymbol_1,NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber$1(e){if(typeof e=="number")return e;if(isSymbol$1(e))return NAN;if(isObject$4(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=isObject$4(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=baseTrim(e);var i=reIsBinary.test(e);return i||reIsOctal.test(e)?freeParseInt(e.slice(2),i?2:8):reIsBadHex.test(e)?NAN:+e}var toNumber_1=toNumber$1,toNumber=toNumber_1,INFINITY=1/0,MAX_INTEGER=17976931348623157e292;function toFinite$1(e){if(!e)return e===0?e:0;if(e=toNumber(e),e===INFINITY||e===-INFINITY){var t=e<0?-1:1;return t*MAX_INTEGER}return e===e?e:0}var toFinite_1=toFinite$1,toFinite=toFinite_1;function toInteger$1(e){var t=toFinite(e),i=t%1;return t===t?i?t-i:t:0}var toInteger_1=toInteger$1,castSlice$1=_castSlice,hasUnicode$1=_hasUnicode,stringToArray$1=_stringToArray,toString$3=toString_1;function createCaseFirst$1(e){return function(t){t=toString$3(t);var i=hasUnicode$1(t)?stringToArray$1(t):void 0,s=i?i[0]:t.charAt(0),c=i?castSlice$1(i,1).join(""):t.slice(1);return s[e]()+c}}var _createCaseFirst=createCaseFirst$1,createCaseFirst=_createCaseFirst,upperFirst$1=createCaseFirst("toUpperCase"),upperFirst_1=upperFirst$1,toString$2=toString_1,upperFirst=upperFirst_1;function capitalize(e){return upperFirst(toString$2(e).toLowerCase())}var capitalize_1=capitalize,MAX_SAFE_INTEGER=9007199254740991,nativeFloor=Math.floor;function baseRepeat$1(e,t){var i="";if(!e||t<1||t>MAX_SAFE_INTEGER)return i;do t%2&&(i+=e),t=nativeFloor(t/2),t&&(e+=e);while(t);return i}var _baseRepeat=baseRepeat$1,baseRepeat=_baseRepeat,baseToString=_baseToString,castSlice=_castSlice,hasUnicode=_hasUnicode,stringSize$1=_stringSize,stringToArray=_stringToArray,nativeCeil=Math.ceil;function createPadding$1(e,t){t=t===void 0?" ":baseToString(t);var i=t.length;if(i<2)return i?baseRepeat(t,e):t;var s=baseRepeat(t,nativeCeil(e/stringSize$1(t)));return hasUnicode(t)?castSlice(stringToArray(s),0,e).join(""):s.slice(0,e)}var _createPadding=createPadding$1,createPadding=_createPadding,stringSize=_stringSize,toInteger=toInteger_1,toString$1=toString_1;function padStart$1(e,t,i){e=toString$1(e),t=toInteger(t);var s=t?stringSize(e):0;return t&&s<t?createPadding(t-s,i)+e:e}var padStart_1=padStart$1;const escape$3=_escape,unescape$2=_unescape,padStart=padStart_1,firstUpperCase=capitalize_1;function numberToKilo(e){return e>1e3?`${parseFloat((e/1e3).toFixed(2))}k`:String(e)}function numberSplit(e){return String(e).replace(/.{1,3}(?=(.{3})+$)/g,"$&,")}const CHINESE_NUMBER_TEXT="\u3007\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D\u5341".split(""),CHINESE_NUMBER_CAPITAL_TEXT="\u96F6\u58F9\u8D30\u53C1\u8086\u4F0D\u9646\u67D2\u634C\u7396\u62FE".split(""),numberToChinese=(e,t=!1)=>{const i=t?CHINESE_NUMBER_CAPITAL_TEXT:CHINESE_NUMBER_TEXT;return String(e).split("").map(s=>i[Number(s)]).join("")};var axios$3={exports:{}},axios$2={exports:{}},bind$4=function(t,i){return function(){for(var c=new Array(arguments.length),d=0;d<c.length;d++)c[d]=arguments[d];return t.apply(i,c)}},bind$3=bind$4,toString=Object.prototype.toString,kindOf=function(e){return function(t){var i=toString.call(t);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())}}(Object.create(null));function kindOfTest(e){return e=e.toLowerCase(),function(i){return kindOf(i)===e}}function isArray$4(e){return Array.isArray(e)}function isUndefined$1(e){return typeof e>"u"}function isBuffer$1(e){return e!==null&&!isUndefined$1(e)&&e.constructor!==null&&!isUndefined$1(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&isArrayBuffer(e.buffer),t}function isString$1(e){return typeof e=="string"}function isNumber$1(e){return typeof e=="number"}function isObject$3(e){return e!==null&&typeof e=="object"}function isPlainObject(e){if(kindOf(e)!=="object")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}var isDate$1=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList");function isFunction(e){return toString.call(e)==="[object Function]"}function isStream(e){return isObject$3(e)&&isFunction(e.pipe)}function isFormData(e){var t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||toString.call(e)===t||isFunction(e.toString)&&e.toString()===t)}var isURLSearchParams=kindOfTest("URLSearchParams");function trim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function forEach(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),isArray$4(e))for(var i=0,s=e.length;i<s;i++)t.call(null,e[i],i,e);else for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(null,e[c],c,e)}function merge$2(){var e={};function t(c,d){isPlainObject(e[d])&&isPlainObject(c)?e[d]=merge$2(e[d],c):isPlainObject(c)?e[d]=merge$2({},c):isArray$4(c)?e[d]=c.slice():e[d]=c}for(var i=0,s=arguments.length;i<s;i++)forEach(arguments[i],t);return e}function extend$3(e,t,i){return forEach(t,function(c,d){i&&typeof c=="function"?e[d]=bind$3(c,i):e[d]=c}),e}function stripBOM(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}function inherits(e,t,i,s){e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,i&&Object.assign(e.prototype,i)}function toFlatObject(e,t,i){var s,c,d,g={};t=t||{};do{for(s=Object.getOwnPropertyNames(e),c=s.length;c-- >0;)d=s[c],g[d]||(t[d]=e[d],g[d]=!0);e=Object.getPrototypeOf(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t}function endsWith(e,t,i){e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=t.length;var s=e.indexOf(t,i);return s!==-1&&s===i}function toArray(e){if(!e)return null;var t=e.length;if(isUndefined$1(t))return null;for(var i=new Array(t);t-- >0;)i[t]=e[t];return i}var isTypedArray=function(e){return function(t){return e&&t instanceof e}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),utils$g={isArray:isArray$4,isArrayBuffer,isBuffer:isBuffer$1,isFormData,isArrayBufferView,isString:isString$1,isNumber:isNumber$1,isObject:isObject$3,isPlainObject,isUndefined:isUndefined$1,isDate:isDate$1,isFile,isBlob,isFunction,isStream,isURLSearchParams,isStandardBrowserEnv,forEach,merge:merge$2,extend:extend$3,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,isTypedArray,isFileList},utils$f=utils$g;function encode$1(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$1=function(t,i,s){if(!i)return t;var c;if(s)c=s(i);else if(utils$f.isURLSearchParams(i))c=i.toString();else{var d=[];utils$f.forEach(i,function(y,E){y===null||typeof y>"u"||(utils$f.isArray(y)?E=E+"[]":y=[y],utils$f.forEach(y,function(k){utils$f.isDate(k)?k=k.toISOString():utils$f.isObject(k)&&(k=JSON.stringify(k)),d.push(encode$1(E)+"="+encode$1(k))}))}),c=d.join("&")}if(c){var g=t.indexOf("#");g!==-1&&(t=t.slice(0,g)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t},utils$e=utils$g;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function(t,i,s){return this.handlers.push({fulfilled:t,rejected:i,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1};InterceptorManager$1.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};InterceptorManager$1.prototype.forEach=function(t){utils$e.forEach(this.handlers,function(s){s!==null&&t(s)})};var InterceptorManager_1=InterceptorManager$1,utils$d=utils$g,normalizeHeaderName$1=function(t,i){utils$d.forEach(t,function(c,d){d!==i&&d.toUpperCase()===i.toUpperCase()&&(t[i]=c,delete t[d])})},utils$c=utils$g;function AxiosError$2(e,t,i,s,c){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),s&&(this.request=s),c&&(this.response=c)}utils$c.inherits(AxiosError$2,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var prototype=AxiosError$2.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(e){descriptors[e]={value:e}});Object.defineProperties(AxiosError$2,descriptors);Object.defineProperty(prototype,"isAxiosError",{value:!0});AxiosError$2.from=function(e,t,i,s,c,d){var g=Object.create(prototype);return utils$c.toFlatObject(e,g,function(y){return y!==Error.prototype}),AxiosError$2.call(g,e.message,t,i,s,c),g.name=e.name,d&&Object.assign(g,d),g};var AxiosError_1=AxiosError$2,transitional={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},utils$b=utils$g;function toFormData$1(e,t){t=t||new FormData;var i=[];function s(d){return d===null?"":utils$b.isDate(d)?d.toISOString():utils$b.isArrayBuffer(d)||utils$b.isTypedArray(d)?typeof Blob=="function"?new Blob([d]):Buffer.from(d):d}function c(d,g){if(utils$b.isPlainObject(d)||utils$b.isArray(d)){if(i.indexOf(d)!==-1)throw Error("Circular reference detected in "+g);i.push(d),utils$b.forEach(d,function(y,E){if(!utils$b.isUndefined(y)){var w=g?g+"."+E:E,k;if(y&&!g&&typeof y=="object"){if(utils$b.endsWith(E,"{}"))y=JSON.stringify(y);else if(utils$b.endsWith(E,"[]")&&(k=utils$b.toArray(y))){k.forEach(function(S){!utils$b.isUndefined(S)&&t.append(w,s(S))});return}}c(y,w)}}),i.pop()}else t.append(g,s(d))}return c(e),t}var toFormData_1=toFormData$1,settle,hasRequiredSettle;function requireSettle(){if(hasRequiredSettle)return settle;hasRequiredSettle=1;var e=AxiosError_1;return settle=function(i,s,c){var d=c.config.validateStatus;!c.status||!d||d(c.status)?i(c):s(new e("Request failed with status code "+c.status,[e.ERR_BAD_REQUEST,e.ERR_BAD_RESPONSE][Math.floor(c.status/100)-4],c.config,c.request,c))},settle}var cookies,hasRequiredCookies;function requireCookies(){if(hasRequiredCookies)return cookies;hasRequiredCookies=1;var e=utils$g;return cookies=e.isStandardBrowserEnv()?function(){return{write:function(s,c,d,g,r,y){var E=[];E.push(s+"="+encodeURIComponent(c)),e.isNumber(d)&&E.push("expires="+new Date(d).toGMTString()),e.isString(g)&&E.push("path="+g),e.isString(r)&&E.push("domain="+r),y===!0&&E.push("secure"),document.cookie=E.join("; ")},read:function(s){var c=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(s){this.write(s,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),cookies}var isAbsoluteURL$1=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)},combineURLs$1=function(t,i){return i?t.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):t},isAbsoluteURL=isAbsoluteURL$1,combineURLs=combineURLs$1,buildFullPath$1=function(t,i){return t&&!isAbsoluteURL(i)?combineURLs(t,i):i},parseHeaders,hasRequiredParseHeaders;function requireParseHeaders(){if(hasRequiredParseHeaders)return parseHeaders;hasRequiredParseHeaders=1;var e=utils$g,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return parseHeaders=function(s){var c={},d,g,r;return s&&e.forEach(s.split(`
`),function(E){if(r=E.indexOf(":"),d=e.trim(E.substr(0,r)).toLowerCase(),g=e.trim(E.substr(r+1)),d){if(c[d]&&t.indexOf(d)>=0)return;d==="set-cookie"?c[d]=(c[d]?c[d]:[]).concat([g]):c[d]=c[d]?c[d]+", "+g:g}}),c},parseHeaders}var isURLSameOrigin,hasRequiredIsURLSameOrigin;function requireIsURLSameOrigin(){if(hasRequiredIsURLSameOrigin)return isURLSameOrigin;hasRequiredIsURLSameOrigin=1;var e=utils$g;return isURLSameOrigin=e.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a"),c;function d(g){var r=g;return i&&(s.setAttribute("href",r),r=s.href),s.setAttribute("href",r),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:s.pathname.charAt(0)==="/"?s.pathname:"/"+s.pathname}}return c=d(window.location.href),function(r){var y=e.isString(r)?d(r):r;return y.protocol===c.protocol&&y.host===c.host}}():function(){return function(){return!0}}(),isURLSameOrigin}var CanceledError_1,hasRequiredCanceledError;function requireCanceledError(){if(hasRequiredCanceledError)return CanceledError_1;hasRequiredCanceledError=1;var e=AxiosError_1,t=utils$g;function i(s){e.call(this,s==null?"canceled":s,e.ERR_CANCELED),this.name="CanceledError"}return t.inherits(i,e,{__CANCEL__:!0}),CanceledError_1=i,CanceledError_1}var parseProtocol,hasRequiredParseProtocol;function requireParseProtocol(){return hasRequiredParseProtocol||(hasRequiredParseProtocol=1,parseProtocol=function(t){var i=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return i&&i[1]||""}),parseProtocol}var xhr,hasRequiredXhr;function requireXhr(){if(hasRequiredXhr)return xhr;hasRequiredXhr=1;var e=utils$g,t=requireSettle(),i=requireCookies(),s=buildURL$1,c=buildFullPath$1,d=requireParseHeaders(),g=requireIsURLSameOrigin(),r=transitional,y=AxiosError_1,E=requireCanceledError(),w=requireParseProtocol();return xhr=function(S){return new Promise(function(L,D){var O=S.data,V=S.headers,z=S.responseType,U;function Z(){S.cancelToken&&S.cancelToken.unsubscribe(U),S.signal&&S.signal.removeEventListener("abort",U)}e.isFormData(O)&&e.isStandardBrowserEnv()&&delete V["Content-Type"];var W=new XMLHttpRequest;if(S.auth){var ne=S.auth.username||"",re=S.auth.password?unescape(encodeURIComponent(S.auth.password)):"";V.Authorization="Basic "+btoa(ne+":"+re)}var ie=c(S.baseURL,S.url);W.open(S.method.toUpperCase(),s(ie,S.params,S.paramsSerializer),!0),W.timeout=S.timeout;function Ce(){if(!!W){var de="getAllResponseHeaders"in W?d(W.getAllResponseHeaders()):null,Le=!z||z==="text"||z==="json"?W.responseText:W.response,Ge={data:Le,status:W.status,statusText:W.statusText,headers:de,config:S,request:W};t(function(Te){L(Te),Z()},function(Te){D(Te),Z()},Ge),W=null}}if("onloadend"in W?W.onloadend=Ce:W.onreadystatechange=function(){!W||W.readyState!==4||W.status===0&&!(W.responseURL&&W.responseURL.indexOf("file:")===0)||setTimeout(Ce)},W.onabort=function(){!W||(D(new y("Request aborted",y.ECONNABORTED,S,W)),W=null)},W.onerror=function(){D(new y("Network Error",y.ERR_NETWORK,S,W,W)),W=null},W.ontimeout=function(){var Le=S.timeout?"timeout of "+S.timeout+"ms exceeded":"timeout exceeded",Ge=S.transitional||r;S.timeoutErrorMessage&&(Le=S.timeoutErrorMessage),D(new y(Le,Ge.clarifyTimeoutError?y.ETIMEDOUT:y.ECONNABORTED,S,W)),W=null},e.isStandardBrowserEnv()){var we=(S.withCredentials||g(ie))&&S.xsrfCookieName?i.read(S.xsrfCookieName):void 0;we&&(V[S.xsrfHeaderName]=we)}"setRequestHeader"in W&&e.forEach(V,function(Le,Ge){typeof O>"u"&&Ge.toLowerCase()==="content-type"?delete V[Ge]:W.setRequestHeader(Ge,Le)}),e.isUndefined(S.withCredentials)||(W.withCredentials=!!S.withCredentials),z&&z!=="json"&&(W.responseType=S.responseType),typeof S.onDownloadProgress=="function"&&W.addEventListener("progress",S.onDownloadProgress),typeof S.onUploadProgress=="function"&&W.upload&&W.upload.addEventListener("progress",S.onUploadProgress),(S.cancelToken||S.signal)&&(U=function(de){!W||(D(!de||de&&de.type?new E:de),W.abort(),W=null)},S.cancelToken&&S.cancelToken.subscribe(U),S.signal&&(S.signal.aborted?U():S.signal.addEventListener("abort",U))),O||(O=null);var fe=w(ie);if(fe&&["http","https","file"].indexOf(fe)===-1){D(new y("Unsupported protocol "+fe+":",y.ERR_BAD_REQUEST,S));return}W.send(O)})},xhr}var followRedirects={exports:{}},src$2={exports:{}},browser$2={exports:{}},ms$1,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms$1;hasRequiredMs=1;var e=1e3,t=e*60,i=t*60,s=i*24,c=s*7,d=s*365.25;ms$1=function(w,k){k=k||{};var S=typeof w;if(S==="string"&&w.length>0)return g(w);if(S==="number"&&isFinite(w))return k.long?y(w):r(w);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(w))};function g(w){if(w=String(w),!(w.length>100)){var k=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(w);if(!!k){var S=parseFloat(k[1]),I=(k[2]||"ms").toLowerCase();switch(I){case"years":case"year":case"yrs":case"yr":case"y":return S*d;case"weeks":case"week":case"w":return S*c;case"days":case"day":case"d":return S*s;case"hours":case"hour":case"hrs":case"hr":case"h":return S*i;case"minutes":case"minute":case"mins":case"min":case"m":return S*t;case"seconds":case"second":case"secs":case"sec":case"s":return S*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return S;default:return}}}}function r(w){var k=Math.abs(w);return k>=s?Math.round(w/s)+"d":k>=i?Math.round(w/i)+"h":k>=t?Math.round(w/t)+"m":k>=e?Math.round(w/e)+"s":w+"ms"}function y(w){var k=Math.abs(w);return k>=s?E(w,k,s,"day"):k>=i?E(w,k,i,"hour"):k>=t?E(w,k,t,"minute"):k>=e?E(w,k,e,"second"):w+" ms"}function E(w,k,S,I){var L=k>=S*1.5;return Math.round(w/S)+" "+I+(L?"s":"")}return ms$1}var common,hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;function e(t){s.debug=s,s.default=s,s.coerce=E,s.disable=g,s.enable=d,s.enabled=r,s.humanize=requireMs(),s.destroy=w,Object.keys(t).forEach(k=>{s[k]=t[k]}),s.names=[],s.skips=[],s.formatters={};function i(k){let S=0;for(let I=0;I<k.length;I++)S=(S<<5)-S+k.charCodeAt(I),S|=0;return s.colors[Math.abs(S)%s.colors.length]}s.selectColor=i;function s(k){let S,I=null,L,D;function O(...V){if(!O.enabled)return;const z=O,U=Number(new Date),Z=U-(S||U);z.diff=Z,z.prev=S,z.curr=U,S=U,V[0]=s.coerce(V[0]),typeof V[0]!="string"&&V.unshift("%O");let W=0;V[0]=V[0].replace(/%([a-zA-Z%])/g,(re,ie)=>{if(re==="%%")return"%";W++;const Ce=s.formatters[ie];if(typeof Ce=="function"){const we=V[W];re=Ce.call(z,we),V.splice(W,1),W--}return re}),s.formatArgs.call(z,V),(z.log||s.log).apply(z,V)}return O.namespace=k,O.useColors=s.useColors(),O.color=s.selectColor(k),O.extend=c,O.destroy=s.destroy,Object.defineProperty(O,"enabled",{enumerable:!0,configurable:!1,get:()=>I!==null?I:(L!==s.namespaces&&(L=s.namespaces,D=s.enabled(k)),D),set:V=>{I=V}}),typeof s.init=="function"&&s.init(O),O}function c(k,S){const I=s(this.namespace+(typeof S>"u"?":":S)+k);return I.log=this.log,I}function d(k){s.save(k),s.namespaces=k,s.names=[],s.skips=[];let S;const I=(typeof k=="string"?k:"").split(/[\s,]+/),L=I.length;for(S=0;S<L;S++)!I[S]||(k=I[S].replace(/\*/g,".*?"),k[0]==="-"?s.skips.push(new RegExp("^"+k.slice(1)+"$")):s.names.push(new RegExp("^"+k+"$")))}function g(){const k=[...s.names.map(y),...s.skips.map(y).map(S=>"-"+S)].join(",");return s.enable(""),k}function r(k){if(k[k.length-1]==="*")return!0;let S,I;for(S=0,I=s.skips.length;S<I;S++)if(s.skips[S].test(k))return!1;for(S=0,I=s.names.length;S<I;S++)if(s.names[S].test(k))return!0;return!1}function y(k){return k.toString().substring(2,k.toString().length-2).replace(/\.\*\?$/,"*")}function E(k){return k instanceof Error?k.stack||k.message:k}function w(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s.enable(s.load()),s}return common=e,common}var hasRequiredBrowser$1;function requireBrowser$1(){return hasRequiredBrowser$1||(hasRequiredBrowser$1=1,function(e,t){t.formatArgs=s,t.save=c,t.load=d,t.useColors=i,t.storage=g(),t.destroy=(()=>{let y=!1;return()=>{y||(y=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function s(y){if(y[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+y[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const E="color: "+this.color;y.splice(1,0,E,"color: inherit");let w=0,k=0;y[0].replace(/%[a-zA-Z%]/g,S=>{S!=="%%"&&(w++,S==="%c"&&(k=w))}),y.splice(k,0,E)}t.log=console.debug||console.log||(()=>{});function c(y){try{y?t.storage.setItem("debug",y):t.storage.removeItem("debug")}catch{}}function d(){let y;try{y=t.storage.getItem("debug")}catch{}return!y&&typeof process<"u"&&"env"in process&&(y=process.env.DEBUG),y}function g(){try{return localStorage}catch{}}e.exports=requireCommon()(t);const{formatters:r}=e.exports;r.j=function(y){try{return JSON.stringify(y)}catch(E){return"[UnexpectedJSONParseError]: "+E.message}}}(browser$2,browser$2.exports)),browser$2.exports}var node={exports:{}},hasFlag,hasRequiredHasFlag;function requireHasFlag(){return hasRequiredHasFlag||(hasRequiredHasFlag=1,hasFlag=(e,t=process.argv)=>{const i=e.startsWith("-")?"":e.length===1?"-":"--",s=t.indexOf(i+e),c=t.indexOf("--");return s!==-1&&(c===-1||s<c)}),hasFlag}var supportsColor_1,hasRequiredSupportsColor;function requireSupportsColor(){if(hasRequiredSupportsColor)return supportsColor_1;hasRequiredSupportsColor=1;const e=require$$0__default$1.default,t=require$$1__default.default,i=requireHasFlag(),{env:s}=process;let c;i("no-color")||i("no-colors")||i("color=false")||i("color=never")?c=0:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(c=1),"FORCE_COLOR"in s&&(s.FORCE_COLOR==="true"?c=1:s.FORCE_COLOR==="false"?c=0:c=s.FORCE_COLOR.length===0?1:Math.min(parseInt(s.FORCE_COLOR,10),3));function d(y){return y===0?!1:{level:y,hasBasic:!0,has256:y>=2,has16m:y>=3}}function g(y,E){if(c===0)return 0;if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2;if(y&&!E&&c===void 0)return 0;const w=c||0;if(s.TERM==="dumb")return w;if(process.platform==="win32"){const k=e.release().split(".");return Number(k[0])>=10&&Number(k[2])>=10586?Number(k[2])>=14931?3:2:1}if("CI"in s)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(k=>k in s)||s.CI_NAME==="codeship"?1:w;if("TEAMCITY_VERSION"in s)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(s.TEAMCITY_VERSION)?1:0;if(s.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in s){const k=parseInt((s.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(s.TERM_PROGRAM){case"iTerm.app":return k>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(s.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(s.TERM)||"COLORTERM"in s?1:w}function r(y){const E=g(y,y&&y.isTTY);return d(E)}return supportsColor_1={supportsColor:r,stdout:d(g(!0,t.isatty(1))),stderr:d(g(!0,t.isatty(2)))},supportsColor_1}var hasRequiredNode;function requireNode(){return hasRequiredNode||(hasRequiredNode=1,function(e,t){const i=require$$1__default.default,s=require$$0__default$2.default;t.init=w,t.log=r,t.formatArgs=d,t.save=y,t.load=E,t.useColors=c,t.destroy=s.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const S=requireSupportsColor();S&&(S.stderr||S).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}t.inspectOpts=Object.keys(process.env).filter(S=>/^debug_/i.test(S)).reduce((S,I)=>{const L=I.substring(6).toLowerCase().replace(/_([a-z])/g,(O,V)=>V.toUpperCase());let D=process.env[I];return/^(yes|on|true|enabled)$/i.test(D)?D=!0:/^(no|off|false|disabled)$/i.test(D)?D=!1:D==="null"?D=null:D=Number(D),S[L]=D,S},{});function c(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):i.isatty(process.stderr.fd)}function d(S){const{namespace:I,useColors:L}=this;if(L){const D=this.color,O="\x1B[3"+(D<8?D:"8;5;"+D),V=`  ${O};1m${I} \x1B[0m`;S[0]=V+S[0].split(`
`).join(`
`+V),S.push(O+"m+"+e.exports.humanize(this.diff)+"\x1B[0m")}else S[0]=g()+I+" "+S[0]}function g(){return t.inspectOpts.hideDate?"":new Date().toISOString()+" "}function r(...S){return process.stderr.write(s.format(...S)+`
`)}function y(S){S?process.env.DEBUG=S:delete process.env.DEBUG}function E(){return process.env.DEBUG}function w(S){S.inspectOpts={};const I=Object.keys(t.inspectOpts);for(let L=0;L<I.length;L++)S.inspectOpts[I[L]]=t.inspectOpts[I[L]]}e.exports=requireCommon()(t);const{formatters:k}=e.exports;k.o=function(S){return this.inspectOpts.colors=this.useColors,s.inspect(S,this.inspectOpts).split(`
`).map(I=>I.trim()).join(" ")},k.O=function(S){return this.inspectOpts.colors=this.useColors,s.inspect(S,this.inspectOpts)}}(node,node.exports)),node.exports}var hasRequiredSrc;function requireSrc(){return hasRequiredSrc||(hasRequiredSrc=1,function(e){typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?e.exports=requireBrowser$1():e.exports=requireNode()}(src$2)),src$2.exports}var debug_1,hasRequiredDebug;function requireDebug(){if(hasRequiredDebug)return debug_1;hasRequiredDebug=1;var e;return debug_1=function(){if(!e){try{e=requireSrc()("follow-redirects")}catch{}typeof e!="function"&&(e=function(){})}e.apply(null,arguments)},debug_1}var hasRequiredFollowRedirects;function requireFollowRedirects(){if(hasRequiredFollowRedirects)return followRedirects.exports;hasRequiredFollowRedirects=1;var e=require$$0__default$3.default,t=e.URL,i=require$$1__default$2.default,s=require$$2__default.default,c=require$$1__default$1.default.Writable,d=require$$4__default.default,g=requireDebug(),r=["abort","aborted","connect","error","socket","timeout"],y=Object.create(null);r.forEach(function(W){y[W]=function(ne,re,ie){this._redirectable.emit(W,ne,re,ie)}});var E=z("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),w=z("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),k=z("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),S=z("ERR_STREAM_WRITE_AFTER_END","write after end");function I(W,ne){c.call(this),this._sanitizeOptions(W),this._options=W,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],ne&&this.on("response",ne);var re=this;this._onNativeResponse=function(ie){re._processResponse(ie)},this._performRequest()}I.prototype=Object.create(c.prototype),I.prototype.abort=function(){U(this._currentRequest),this.emit("abort")},I.prototype.write=function(W,ne,re){if(this._ending)throw new S;if(!(typeof W=="string"||typeof W=="object"&&"length"in W))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof ne=="function"&&(re=ne,ne=null),W.length===0){re&&re();return}this._requestBodyLength+W.length<=this._options.maxBodyLength?(this._requestBodyLength+=W.length,this._requestBodyBuffers.push({data:W,encoding:ne}),this._currentRequest.write(W,ne,re)):(this.emit("error",new k),this.abort())},I.prototype.end=function(W,ne,re){if(typeof W=="function"?(re=W,W=ne=null):typeof ne=="function"&&(re=ne,ne=null),!W)this._ended=this._ending=!0,this._currentRequest.end(null,null,re);else{var ie=this,Ce=this._currentRequest;this.write(W,ne,function(){ie._ended=!0,Ce.end(null,null,re)}),this._ending=!0}},I.prototype.setHeader=function(W,ne){this._options.headers[W]=ne,this._currentRequest.setHeader(W,ne)},I.prototype.removeHeader=function(W){delete this._options.headers[W],this._currentRequest.removeHeader(W)},I.prototype.setTimeout=function(W,ne){var re=this;function ie(fe){fe.setTimeout(W),fe.removeListener("timeout",fe.destroy),fe.addListener("timeout",fe.destroy)}function Ce(fe){re._timeout&&clearTimeout(re._timeout),re._timeout=setTimeout(function(){re.emit("timeout"),we()},W),ie(fe)}function we(){re._timeout&&(clearTimeout(re._timeout),re._timeout=null),re.removeListener("abort",we),re.removeListener("error",we),re.removeListener("response",we),ne&&re.removeListener("timeout",ne),re.socket||re._currentRequest.removeListener("socket",Ce)}return ne&&this.on("timeout",ne),this.socket?Ce(this.socket):this._currentRequest.once("socket",Ce),this.on("socket",ie),this.on("abort",we),this.on("error",we),this.on("response",we),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(W){I.prototype[W]=function(ne,re){return this._currentRequest[W](ne,re)}}),["aborted","connection","socket"].forEach(function(W){Object.defineProperty(I.prototype,W,{get:function(){return this._currentRequest[W]}})}),I.prototype._sanitizeOptions=function(W){if(W.headers||(W.headers={}),W.host&&(W.hostname||(W.hostname=W.host),delete W.host),!W.pathname&&W.path){var ne=W.path.indexOf("?");ne<0?W.pathname=W.path:(W.pathname=W.path.substring(0,ne),W.search=W.path.substring(ne))}},I.prototype._performRequest=function(){var W=this._options.protocol,ne=this._options.nativeProtocols[W];if(!ne){this.emit("error",new TypeError("Unsupported protocol "+W));return}if(this._options.agents){var re=W.slice(0,-1);this._options.agent=this._options.agents[re]}var ie=this._currentRequest=ne.request(this._options,this._onNativeResponse);ie._redirectable=this;for(var Ce of r)ie.on(Ce,y[Ce]);if(this._currentUrl=/^\//.test(this._options.path)?e.format(this._options):this._currentUrl=this._options.path,this._isRedirect){var we=0,fe=this,de=this._requestBodyBuffers;(function Le(Ge){if(ie===fe._currentRequest)if(Ge)fe.emit("error",Ge);else if(we<de.length){var wt=de[we++];ie.finished||ie.write(wt.data,wt.encoding,Le)}else fe._ended&&ie.end()})()}},I.prototype._processResponse=function(W){var ne=W.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:W.headers,statusCode:ne});var re=W.headers.location;if(!re||this._options.followRedirects===!1||ne<300||ne>=400){W.responseUrl=this._currentUrl,W.redirects=this._redirects,this.emit("response",W),this._requestBodyBuffers=[];return}if(U(this._currentRequest),W.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new w);return}var ie,Ce=this._options.beforeRedirect;Ce&&(ie=Object.assign({Host:W.req.getHeader("host")},this._options.headers));var we=this._options.method;((ne===301||ne===302)&&this._options.method==="POST"||ne===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],V(/^content-/i,this._options.headers));var fe=V(/^host$/i,this._options.headers),de=e.parse(this._currentUrl),Le=fe||de.host,Ge=/^\w+:/.test(re)?this._currentUrl:e.format(Object.assign(de,{host:Le})),wt;try{wt=e.resolve(Ge,re)}catch(ut){this.emit("error",new E(ut));return}g("redirecting to",wt),this._isRedirect=!0;var Te=e.parse(wt);if(Object.assign(this._options,Te),(Te.protocol!==de.protocol&&Te.protocol!=="https:"||Te.host!==Le&&!Z(Te.host,Le))&&V(/^(?:authorization|cookie)$/i,this._options.headers),typeof Ce=="function"){var ze={headers:W.headers,statusCode:ne},Ke={url:Ge,method:we,headers:ie};try{Ce(this._options,ze,Ke)}catch(ut){this.emit("error",ut);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(ut){this.emit("error",new E(ut))}};function L(W){var ne={maxRedirects:21,maxBodyLength:10485760},re={};return Object.keys(W).forEach(function(ie){var Ce=ie+":",we=re[Ce]=W[ie],fe=ne[ie]=Object.create(we);function de(Ge,wt,Te){if(typeof Ge=="string"){var ze=Ge;try{Ge=O(new t(ze))}catch{Ge=e.parse(ze)}}else t&&Ge instanceof t?Ge=O(Ge):(Te=wt,wt=Ge,Ge={protocol:Ce});return typeof wt=="function"&&(Te=wt,wt=null),wt=Object.assign({maxRedirects:ne.maxRedirects,maxBodyLength:ne.maxBodyLength},Ge,wt),wt.nativeProtocols=re,d.equal(wt.protocol,Ce,"protocol mismatch"),g("options",wt),new I(wt,Te)}function Le(Ge,wt,Te){var ze=fe.request(Ge,wt,Te);return ze.end(),ze}Object.defineProperties(fe,{request:{value:de,configurable:!0,enumerable:!0,writable:!0},get:{value:Le,configurable:!0,enumerable:!0,writable:!0}})}),ne}function D(){}function O(W){var ne={protocol:W.protocol,hostname:W.hostname.startsWith("[")?W.hostname.slice(1,-1):W.hostname,hash:W.hash,search:W.search,pathname:W.pathname,path:W.pathname+W.search,href:W.href};return W.port!==""&&(ne.port=Number(W.port)),ne}function V(W,ne){var re;for(var ie in ne)W.test(ie)&&(re=ne[ie],delete ne[ie]);return re===null||typeof re>"u"?void 0:String(re).trim()}function z(W,ne){function re(ie){Error.captureStackTrace(this,this.constructor),ie?(this.message=ne+": "+ie.message,this.cause=ie):this.message=ne}return re.prototype=new Error,re.prototype.constructor=re,re.prototype.name="Error ["+W+"]",re.prototype.code=W,re}function U(W){for(var ne of r)W.removeListener(ne,y[ne]);W.on("error",D),W.abort()}function Z(W,ne){const re=W.length-ne.length-1;return re>0&&W[re]==="."&&W.endsWith(ne)}return followRedirects.exports=L({http:i,https:s}),followRedirects.exports.wrap=L,followRedirects.exports}var data,hasRequiredData;function requireData(){return hasRequiredData||(hasRequiredData=1,data={version:"0.27.2"}),data}var http_1,hasRequiredHttp;function requireHttp(){if(hasRequiredHttp)return http_1;hasRequiredHttp=1;var e=utils$g,t=requireSettle(),i=buildFullPath$1,s=buildURL$1,c=require$$1__default$2.default,d=require$$2__default.default,g=requireFollowRedirects().http,r=requireFollowRedirects().https,y=require$$0__default$3.default,E=require$$1__default$3.default,w=requireData().version,k=transitional,S=AxiosError_1,I=requireCanceledError(),L=/https:?/,D=["http:","https:","file:"];function O(V,z,U){if(V.hostname=z.host,V.host=z.host,V.port=z.port,V.path=U,z.auth){var Z=Buffer.from(z.auth.username+":"+z.auth.password,"utf8").toString("base64");V.headers["Proxy-Authorization"]="Basic "+Z}V.beforeRedirect=function(ne){ne.headers.host=ne.host,O(ne,z,ne.href)}}return http_1=function(z){return new Promise(function(Z,W){var ne;function re(){z.cancelToken&&z.cancelToken.unsubscribe(ne),z.signal&&z.signal.removeEventListener("abort",ne)}var ie=function(Ue){re(),Z(Ue)},Ce=!1,we=function(Ue){re(),Ce=!0,W(Ue)},fe=z.data,de=z.headers,Le={};if(Object.keys(de).forEach(function(Ue){Le[Ue.toLowerCase()]=Ue}),"user-agent"in Le?de[Le["user-agent"]]||delete de[Le["user-agent"]]:de["User-Agent"]="axios/"+w,e.isFormData(fe)&&e.isFunction(fe.getHeaders))Object.assign(de,fe.getHeaders());else if(fe&&!e.isStream(fe)){if(!Buffer.isBuffer(fe))if(e.isArrayBuffer(fe))fe=Buffer.from(new Uint8Array(fe));else if(e.isString(fe))fe=Buffer.from(fe,"utf-8");else return we(new S("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",S.ERR_BAD_REQUEST,z));if(z.maxBodyLength>-1&&fe.length>z.maxBodyLength)return we(new S("Request body larger than maxBodyLength limit",S.ERR_BAD_REQUEST,z));Le["content-length"]||(de["Content-Length"]=fe.length)}var Ge=void 0;if(z.auth){var wt=z.auth.username||"",Te=z.auth.password||"";Ge=wt+":"+Te}var ze=i(z.baseURL,z.url),Ke=y.parse(ze),ut=Ke.protocol||D[0];if(D.indexOf(ut)===-1)return we(new S("Unsupported protocol "+ut,S.ERR_BAD_REQUEST,z));if(!Ge&&Ke.auth){var Nt=Ke.auth.split(":"),an=Nt[0]||"",un=Nt[1]||"";Ge=an+":"+un}Ge&&Le.authorization&&delete de[Le.authorization];var wn=L.test(ut),An=wn?z.httpsAgent:z.httpAgent;try{s(Ke.path,z.params,z.paramsSerializer).replace(/^\?/,"")}catch(Qe){var kn=new Error(Qe.message);kn.config=z,kn.url=z.url,kn.exists=!0,we(kn)}var En={path:s(Ke.path,z.params,z.paramsSerializer).replace(/^\?/,""),method:z.method.toUpperCase(),headers:de,agent:An,agents:{http:z.httpAgent,https:z.httpsAgent},auth:Ge};z.socketPath?En.socketPath=z.socketPath:(En.hostname=Ke.hostname,En.port=Ke.port);var Vn=z.proxy;if(!Vn&&Vn!==!1){var ni=ut.slice(0,-1)+"_proxy",Xn=process.env[ni]||process.env[ni.toUpperCase()];if(Xn){var Ln=y.parse(Xn),gi=process.env.no_proxy||process.env.NO_PROXY,yi=!0;if(gi){var Ei=gi.split(",").map(function(Ue){return Ue.trim()});yi=!Ei.some(function(Ue){return Ue?Ue==="*"||Ue[0]==="."&&Ke.hostname.substr(Ke.hostname.length-Ue.length)===Ue?!0:Ke.hostname===Ue:!1})}if(yi&&(Vn={host:Ln.hostname,port:Ln.port,protocol:Ln.protocol},Ln.auth)){var ve=Ln.auth.split(":");Vn.auth={username:ve[0],password:ve[1]}}}}Vn&&(En.headers.host=Ke.hostname+(Ke.port?":"+Ke.port:""),O(En,Vn,ut+"//"+Ke.hostname+(Ke.port?":"+Ke.port:"")+En.path));var Ve,pt=wn&&(Vn?L.test(Vn.protocol):!0);z.transport?Ve=z.transport:z.maxRedirects===0?Ve=pt?d:c:(z.maxRedirects&&(En.maxRedirects=z.maxRedirects),z.beforeRedirect&&(En.beforeRedirect=z.beforeRedirect),Ve=pt?r:g),z.maxBodyLength>-1&&(En.maxBodyLength=z.maxBodyLength),z.insecureHTTPParser&&(En.insecureHTTPParser=z.insecureHTTPParser);var Ze=Ve.request(En,function(Ue){if(!Ze.aborted){var vt=Ue,dt=Ue.req||Ze;if(Ue.statusCode!==204&&dt.method!=="HEAD"&&z.decompress!==!1)switch(Ue.headers["content-encoding"]){case"gzip":case"compress":case"deflate":vt=vt.pipe(E.createUnzip()),delete Ue.headers["content-encoding"];break}var ct={status:Ue.statusCode,statusText:Ue.statusMessage,headers:Ue.headers,config:z,request:dt};if(z.responseType==="stream")ct.data=vt,t(ie,we,ct);else{var Tt=[],tt=0;vt.on("data",function(Et){Tt.push(Et),tt+=Et.length,z.maxContentLength>-1&&tt>z.maxContentLength&&(Ce=!0,vt.destroy(),we(new S("maxContentLength size of "+z.maxContentLength+" exceeded",S.ERR_BAD_RESPONSE,z,dt)))}),vt.on("aborted",function(){Ce||(vt.destroy(),we(new S("maxContentLength size of "+z.maxContentLength+" exceeded",S.ERR_BAD_RESPONSE,z,dt)))}),vt.on("error",function(Et){Ze.aborted||we(S.from(Et,null,z,dt))}),vt.on("end",function(){try{var Et=Tt.length===1?Tt[0]:Buffer.concat(Tt);z.responseType!=="arraybuffer"&&(Et=Et.toString(z.responseEncoding),(!z.responseEncoding||z.responseEncoding==="utf8")&&(Et=e.stripBOM(Et))),ct.data=Et}catch(It){we(S.from(It,null,z,ct.request,ct))}t(ie,we,ct)})}}});if(Ze.on("error",function(Ue){we(S.from(Ue,null,z,Ze))}),Ze.on("socket",function(Ue){Ue.setKeepAlive(!0,1e3*60)}),z.timeout){var mt=parseInt(z.timeout,10);if(isNaN(mt)){we(new S("error trying to parse `config.timeout` to int",S.ERR_BAD_OPTION_VALUE,z,Ze));return}Ze.setTimeout(mt,function(){Ze.abort();var Ue=z.transitional||k;we(new S("timeout of "+mt+"ms exceeded",Ue.clarifyTimeoutError?S.ETIMEDOUT:S.ECONNABORTED,z,Ze))})}(z.cancelToken||z.signal)&&(ne=function(Qe){Ze.aborted||(Ze.abort(),we(!Qe||Qe&&Qe.type?new I:Qe))},z.cancelToken&&z.cancelToken.subscribe(ne),z.signal&&(z.signal.aborted?ne():z.signal.addEventListener("abort",ne))),e.isStream(fe)?fe.on("error",function(Ue){we(S.from(Ue,z,null,Ze))}).pipe(Ze):Ze.end(fe)})},http_1}var FormData$1={exports:{}},delayed_stream,hasRequiredDelayed_stream;function requireDelayed_stream(){if(hasRequiredDelayed_stream)return delayed_stream;hasRequiredDelayed_stream=1;var e=require$$1__default$1.default.Stream,t=require$$0__default$2.default;delayed_stream=i;function i(){this.source=null,this.dataSize=0,this.maxDataSize=1024*1024,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}return t.inherits(i,e),i.create=function(s,c){var d=new this;c=c||{};for(var g in c)d[g]=c[g];d.source=s;var r=s.emit;return s.emit=function(){return d._handleEmit(arguments),r.apply(s,arguments)},s.on("error",function(){}),d.pauseStream&&s.pause(),d},Object.defineProperty(i.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}}),i.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)},i.prototype.resume=function(){this._released||this.release(),this.source.resume()},i.prototype.pause=function(){this.source.pause()},i.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(s){this.emit.apply(this,s)}.bind(this)),this._bufferedEvents=[]},i.prototype.pipe=function(){var s=e.prototype.pipe.apply(this,arguments);return this.resume(),s},i.prototype._handleEmit=function(s){if(this._released){this.emit.apply(this,s);return}s[0]==="data"&&(this.dataSize+=s[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(s)},i.prototype._checkIfMaxDataSizeExceeded=function(){if(!this._maxDataSizeExceeded&&!(this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var s="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(s))}},delayed_stream}var combined_stream,hasRequiredCombined_stream;function requireCombined_stream(){if(hasRequiredCombined_stream)return combined_stream;hasRequiredCombined_stream=1;var e=require$$0__default$2.default,t=require$$1__default$1.default.Stream,i=requireDelayed_stream();combined_stream=s;function s(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2*1024*1024,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null,this._insideLoop=!1,this._pendingNext=!1}return e.inherits(s,t),s.create=function(c){var d=new this;c=c||{};for(var g in c)d[g]=c[g];return d},s.isStreamLike=function(c){return typeof c!="function"&&typeof c!="string"&&typeof c!="boolean"&&typeof c!="number"&&!Buffer.isBuffer(c)},s.prototype.append=function(c){var d=s.isStreamLike(c);if(d){if(!(c instanceof i)){var g=i.create(c,{maxDataSize:1/0,pauseStream:this.pauseStreams});c.on("data",this._checkDataSize.bind(this)),c=g}this._handleErrors(c),this.pauseStreams&&c.pause()}return this._streams.push(c),this},s.prototype.pipe=function(c,d){return t.prototype.pipe.call(this,c,d),this.resume(),c},s.prototype._getNext=function(){if(this._currentStream=null,this._insideLoop){this._pendingNext=!0;return}this._insideLoop=!0;try{do this._pendingNext=!1,this._realGetNext();while(this._pendingNext)}finally{this._insideLoop=!1}},s.prototype._realGetNext=function(){var c=this._streams.shift();if(typeof c>"u"){this.end();return}if(typeof c!="function"){this._pipeNext(c);return}var d=c;d(function(g){var r=s.isStreamLike(g);r&&(g.on("data",this._checkDataSize.bind(this)),this._handleErrors(g)),this._pipeNext(g)}.bind(this))},s.prototype._pipeNext=function(c){this._currentStream=c;var d=s.isStreamLike(c);if(d){c.on("end",this._getNext.bind(this)),c.pipe(this,{end:!1});return}var g=c;this.write(g),this._getNext()},s.prototype._handleErrors=function(c){var d=this;c.on("error",function(g){d._emitError(g)})},s.prototype.write=function(c){this.emit("data",c)},s.prototype.pause=function(){!this.pauseStreams||(this.pauseStreams&&this._currentStream&&typeof this._currentStream.pause=="function"&&this._currentStream.pause(),this.emit("pause"))},s.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&typeof this._currentStream.resume=="function"&&this._currentStream.resume(),this.emit("resume")},s.prototype.end=function(){this._reset(),this.emit("end")},s.prototype.destroy=function(){this._reset(),this.emit("close")},s.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null},s.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var c="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(c))}},s.prototype._updateDataSize=function(){this.dataSize=0;var c=this;this._streams.forEach(function(d){!d.dataSize||(c.dataSize+=d.dataSize)}),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)},s.prototype._emitError=function(c){this._reset(),this.emit("error",c)},combined_stream}var mimeTypes={},mimeDb={exports:{}};const require$$0={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}};/*!
 * mime-db
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015-2022 Douglas Christopher Wilson
 * MIT Licensed
 */var hasRequiredMimeDb;function requireMimeDb(){return hasRequiredMimeDb||(hasRequiredMimeDb=1,function(e){e.exports=require$$0}(mimeDb)),mimeDb.exports}/*!
 * mime-types
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var hasRequiredMimeTypes;function requireMimeTypes(){return hasRequiredMimeTypes||(hasRequiredMimeTypes=1,function(e){var t=requireMimeDb(),i=require$$1__default$4.default.extname,s=/^\s*([^;\s]*)(?:;|\s|$)/,c=/^text\//i;e.charset=d,e.charsets={lookup:d},e.contentType=g,e.extension=r,e.extensions=Object.create(null),e.lookup=y,e.types=Object.create(null),E(e.extensions,e.types);function d(w){if(!w||typeof w!="string")return!1;var k=s.exec(w),S=k&&t[k[1].toLowerCase()];return S&&S.charset?S.charset:k&&c.test(k[1])?"UTF-8":!1}function g(w){if(!w||typeof w!="string")return!1;var k=w.indexOf("/")===-1?e.lookup(w):w;if(!k)return!1;if(k.indexOf("charset")===-1){var S=e.charset(k);S&&(k+="; charset="+S.toLowerCase())}return k}function r(w){if(!w||typeof w!="string")return!1;var k=s.exec(w),S=k&&e.extensions[k[1].toLowerCase()];return!S||!S.length?!1:S[0]}function y(w){if(!w||typeof w!="string")return!1;var k=i("x."+w).toLowerCase().substr(1);return k&&e.types[k]||!1}function E(w,k){var S=["nginx","apache",void 0,"iana"];Object.keys(t).forEach(function(L){var D=t[L],O=D.extensions;if(!(!O||!O.length)){w[L]=O;for(var V=0;V<O.length;V++){var z=O[V];if(k[z]){var U=S.indexOf(t[k[z]].source),Z=S.indexOf(D.source);if(k[z]!=="application/octet-stream"&&(U>Z||U===Z&&k[z].substr(0,12)==="application/"))continue}k[z]=L}}})}}(mimeTypes)),mimeTypes}var defer_1,hasRequiredDefer;function requireDefer(){if(hasRequiredDefer)return defer_1;hasRequiredDefer=1,defer_1=e;function e(t){var i=typeof setImmediate=="function"?setImmediate:typeof process=="object"&&typeof process.nextTick=="function"?process.nextTick:null;i?i(t):setTimeout(t,0)}return defer_1}var async_1,hasRequiredAsync;function requireAsync(){if(hasRequiredAsync)return async_1;hasRequiredAsync=1;var e=requireDefer();async_1=t;function t(i){var s=!1;return e(function(){s=!0}),function(d,g){s?i(d,g):e(function(){i(d,g)})}}return async_1}var abort_1,hasRequiredAbort;function requireAbort(){if(hasRequiredAbort)return abort_1;hasRequiredAbort=1,abort_1=e;function e(i){Object.keys(i.jobs).forEach(t.bind(i)),i.jobs={}}function t(i){typeof this.jobs[i]=="function"&&this.jobs[i]()}return abort_1}var iterate_1,hasRequiredIterate;function requireIterate(){if(hasRequiredIterate)return iterate_1;hasRequiredIterate=1;var e=requireAsync(),t=requireAbort();iterate_1=i;function i(c,d,g,r){var y=g.keyedList?g.keyedList[g.index]:g.index;g.jobs[y]=s(d,y,c[y],function(E,w){y in g.jobs&&(delete g.jobs[y],E?t(g):g.results[y]=w,r(E,g.results))})}function s(c,d,g,r){var y;return c.length==2?y=c(g,e(r)):y=c(g,d,e(r)),y}return iterate_1}var state_1,hasRequiredState;function requireState(){if(hasRequiredState)return state_1;hasRequiredState=1,state_1=e;function e(t,i){var s=!Array.isArray(t),c={index:0,keyedList:s||i?Object.keys(t):null,jobs:{},results:s?{}:[],size:s?Object.keys(t).length:t.length};return i&&c.keyedList.sort(s?i:function(d,g){return i(t[d],t[g])}),c}return state_1}var terminator_1,hasRequiredTerminator;function requireTerminator(){if(hasRequiredTerminator)return terminator_1;hasRequiredTerminator=1;var e=requireAbort(),t=requireAsync();terminator_1=i;function i(s){!Object.keys(this.jobs).length||(this.index=this.size,e(this),t(s)(null,this.results))}return terminator_1}var parallel_1,hasRequiredParallel;function requireParallel(){if(hasRequiredParallel)return parallel_1;hasRequiredParallel=1;var e=requireIterate(),t=requireState(),i=requireTerminator();parallel_1=s;function s(c,d,g){for(var r=t(c);r.index<(r.keyedList||c).length;)e(c,d,r,function(y,E){if(y){g(y,E);return}if(Object.keys(r.jobs).length===0){g(null,r.results);return}}),r.index++;return i.bind(r,g)}return parallel_1}var serialOrdered={exports:{}},hasRequiredSerialOrdered;function requireSerialOrdered(){if(hasRequiredSerialOrdered)return serialOrdered.exports;hasRequiredSerialOrdered=1;var e=requireIterate(),t=requireState(),i=requireTerminator();serialOrdered.exports=s,serialOrdered.exports.ascending=c,serialOrdered.exports.descending=d;function s(g,r,y,E){var w=t(g,y);return e(g,r,w,function k(S,I){if(S){E(S,I);return}if(w.index++,w.index<(w.keyedList||g).length){e(g,r,w,k);return}E(null,w.results)}),i.bind(w,E)}function c(g,r){return g<r?-1:g>r?1:0}function d(g,r){return-1*c(g,r)}return serialOrdered.exports}var serial_1,hasRequiredSerial;function requireSerial(){if(hasRequiredSerial)return serial_1;hasRequiredSerial=1;var e=requireSerialOrdered();serial_1=t;function t(i,s,c){return e(i,s,null,c)}return serial_1}var asynckit,hasRequiredAsynckit;function requireAsynckit(){return hasRequiredAsynckit||(hasRequiredAsynckit=1,asynckit={parallel:requireParallel(),serial:requireSerial(),serialOrdered:requireSerialOrdered()}),asynckit}var populate,hasRequiredPopulate;function requirePopulate(){return hasRequiredPopulate||(hasRequiredPopulate=1,populate=function(e,t){return Object.keys(t).forEach(function(i){e[i]=e[i]||t[i]}),e}),populate}var form_data,hasRequiredForm_data;function requireForm_data(){if(hasRequiredForm_data)return form_data;hasRequiredForm_data=1;var e=requireCombined_stream(),t=require$$0__default$2.default,i=require$$1__default$4.default,s=require$$1__default$2.default,c=require$$2__default.default,d=require$$0__default$3.default.parse,g=require$$1__default$5.default,r=require$$1__default$1.default.Stream,y=requireMimeTypes(),E=requireAsynckit(),w=requirePopulate();form_data=k,t.inherits(k,e);function k(S){if(!(this instanceof k))return new k(S);this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],e.call(this),S=S||{};for(var I in S)this[I]=S[I]}return k.LINE_BREAK=`\r
`,k.DEFAULT_CONTENT_TYPE="application/octet-stream",k.prototype.append=function(S,I,L){L=L||{},typeof L=="string"&&(L={filename:L});var D=e.prototype.append.bind(this);if(typeof I=="number"&&(I=""+I),t.isArray(I)){this._error(new Error("Arrays are not supported."));return}var O=this._multiPartHeader(S,I,L),V=this._multiPartFooter();D(O),D(I),D(V),this._trackLength(O,I,L)},k.prototype._trackLength=function(S,I,L){var D=0;L.knownLength!=null?D+=+L.knownLength:Buffer.isBuffer(I)?D=I.length:typeof I=="string"&&(D=Buffer.byteLength(I)),this._valueLength+=D,this._overheadLength+=Buffer.byteLength(S)+k.LINE_BREAK.length,!(!I||!I.path&&!(I.readable&&I.hasOwnProperty("httpVersion"))&&!(I instanceof r))&&(L.knownLength||this._valuesToMeasure.push(I))},k.prototype._lengthRetriever=function(S,I){S.hasOwnProperty("fd")?S.end!=null&&S.end!=1/0&&S.start!=null?I(null,S.end+1-(S.start?S.start:0)):g.stat(S.path,function(L,D){var O;if(L){I(L);return}O=D.size-(S.start?S.start:0),I(null,O)}):S.hasOwnProperty("httpVersion")?I(null,+S.headers["content-length"]):S.hasOwnProperty("httpModule")?(S.on("response",function(L){S.pause(),I(null,+L.headers["content-length"])}),S.resume()):I("Unknown stream")},k.prototype._multiPartHeader=function(S,I,L){if(typeof L.header=="string")return L.header;var D=this._getContentDisposition(I,L),O=this._getContentType(I,L),V="",z={"Content-Disposition":["form-data",'name="'+S+'"'].concat(D||[]),"Content-Type":[].concat(O||[])};typeof L.header=="object"&&w(z,L.header);var U;for(var Z in z)!z.hasOwnProperty(Z)||(U=z[Z],U!=null&&(Array.isArray(U)||(U=[U]),U.length&&(V+=Z+": "+U.join("; ")+k.LINE_BREAK)));return"--"+this.getBoundary()+k.LINE_BREAK+V+k.LINE_BREAK},k.prototype._getContentDisposition=function(S,I){var L,D;return typeof I.filepath=="string"?L=i.normalize(I.filepath).replace(/\\/g,"/"):I.filename||S.name||S.path?L=i.basename(I.filename||S.name||S.path):S.readable&&S.hasOwnProperty("httpVersion")&&(L=i.basename(S.client._httpMessage.path||"")),L&&(D='filename="'+L+'"'),D},k.prototype._getContentType=function(S,I){var L=I.contentType;return!L&&S.name&&(L=y.lookup(S.name)),!L&&S.path&&(L=y.lookup(S.path)),!L&&S.readable&&S.hasOwnProperty("httpVersion")&&(L=S.headers["content-type"]),!L&&(I.filepath||I.filename)&&(L=y.lookup(I.filepath||I.filename)),!L&&typeof S=="object"&&(L=k.DEFAULT_CONTENT_TYPE),L},k.prototype._multiPartFooter=function(){return function(S){var I=k.LINE_BREAK,L=this._streams.length===0;L&&(I+=this._lastBoundary()),S(I)}.bind(this)},k.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+k.LINE_BREAK},k.prototype.getHeaders=function(S){var I,L={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(I in S)S.hasOwnProperty(I)&&(L[I.toLowerCase()]=S[I]);return L},k.prototype.setBoundary=function(S){this._boundary=S},k.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary},k.prototype.getBuffer=function(){for(var S=new Buffer.alloc(0),I=this.getBoundary(),L=0,D=this._streams.length;L<D;L++)typeof this._streams[L]!="function"&&(Buffer.isBuffer(this._streams[L])?S=Buffer.concat([S,this._streams[L]]):S=Buffer.concat([S,Buffer.from(this._streams[L])]),(typeof this._streams[L]!="string"||this._streams[L].substring(2,I.length+2)!==I)&&(S=Buffer.concat([S,Buffer.from(k.LINE_BREAK)])));return Buffer.concat([S,Buffer.from(this._lastBoundary())])},k.prototype._generateBoundary=function(){for(var S="--------------------------",I=0;I<24;I++)S+=Math.floor(Math.random()*10).toString(16);this._boundary=S},k.prototype.getLengthSync=function(){var S=this._overheadLength+this._valueLength;return this._streams.length&&(S+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),S},k.prototype.hasKnownLength=function(){var S=!0;return this._valuesToMeasure.length&&(S=!1),S},k.prototype.getLength=function(S){var I=this._overheadLength+this._valueLength;if(this._streams.length&&(I+=this._lastBoundary().length),!this._valuesToMeasure.length){process.nextTick(S.bind(this,null,I));return}E.parallel(this._valuesToMeasure,this._lengthRetriever,function(L,D){if(L){S(L);return}D.forEach(function(O){I+=O}),S(null,I)})},k.prototype.submit=function(S,I){var L,D,O={method:"post"};return typeof S=="string"?(S=d(S),D=w({port:S.port,path:S.pathname,host:S.hostname,protocol:S.protocol},O)):(D=w(S,O),D.port||(D.port=D.protocol=="https:"?443:80)),D.headers=this.getHeaders(S.headers),D.protocol=="https:"?L=c.request(D):L=s.request(D),this.getLength(function(V,z){if(V&&V!=="Unknown stream"){this._error(V);return}if(z&&L.setHeader("Content-Length",z),this.pipe(L),I){var U,Z=function(W,ne){return L.removeListener("error",Z),L.removeListener("response",U),I.call(this,W,ne)};U=Z.bind(this,null),L.on("error",Z),L.on("response",U)}}.bind(this)),L},k.prototype._error=function(S){this.error||(this.error=S,this.pause(),this.emit("error",S))},k.prototype.toString=function(){return"[object FormData]"},form_data}var hasRequiredFormData;function requireFormData(){return hasRequiredFormData||(hasRequiredFormData=1,function(e){e.exports=requireForm_data()}(FormData$1)),FormData$1.exports}var utils$a=utils$g,normalizeHeaderName=normalizeHeaderName$1,AxiosError$1=AxiosError_1,transitionalDefaults=transitional,toFormData=toFormData_1,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(e,t){!utils$a.isUndefined(e)&&utils$a.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function getDefaultAdapter(){var e;return typeof XMLHttpRequest<"u"?e=requireXhr():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(e=requireHttp()),e}function stringifySafely(e,t,i){if(utils$a.isString(e))try{return(t||JSON.parse)(e),utils$a.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(i||JSON.stringify)(e)}var defaults$7={transitional:transitionalDefaults,adapter:getDefaultAdapter(),transformRequest:[function(t,i){if(normalizeHeaderName(i,"Accept"),normalizeHeaderName(i,"Content-Type"),utils$a.isFormData(t)||utils$a.isArrayBuffer(t)||utils$a.isBuffer(t)||utils$a.isStream(t)||utils$a.isFile(t)||utils$a.isBlob(t))return t;if(utils$a.isArrayBufferView(t))return t.buffer;if(utils$a.isURLSearchParams(t))return setContentTypeIfUnset(i,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var s=utils$a.isObject(t),c=i&&i["Content-Type"],d;if((d=utils$a.isFileList(t))||s&&c==="multipart/form-data"){var g=this.env&&this.env.FormData;return toFormData(d?{"files[]":t}:t,g&&new g)}else if(s||c==="application/json")return setContentTypeIfUnset(i,"application/json"),stringifySafely(t);return t}],transformResponse:[function(t){var i=this.transitional||defaults$7.transitional,s=i&&i.silentJSONParsing,c=i&&i.forcedJSONParsing,d=!s&&this.responseType==="json";if(d||c&&utils$a.isString(t)&&t.length)try{return JSON.parse(t)}catch(g){if(d)throw g.name==="SyntaxError"?AxiosError$1.from(g,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):g}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:requireFormData()},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils$a.forEach(["delete","get","head"],function(t){defaults$7.headers[t]={}});utils$a.forEach(["post","put","patch"],function(t){defaults$7.headers[t]=utils$a.merge(DEFAULT_CONTENT_TYPE)});var defaults_1=defaults$7,utils$9=utils$g,defaults$6=defaults_1,transformData$1=function(t,i,s){var c=this||defaults$6;return utils$9.forEach(s,function(g){t=g.call(c,t,i)}),t},isCancel$1,hasRequiredIsCancel;function requireIsCancel(){return hasRequiredIsCancel||(hasRequiredIsCancel=1,isCancel$1=function(t){return!!(t&&t.__CANCEL__)}),isCancel$1}var utils$8=utils$g,transformData=transformData$1,isCancel=requireIsCancel(),defaults$5=defaults_1,CanceledError=requireCanceledError();function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new CanceledError}var dispatchRequest$1=function(t){throwIfCancellationRequested(t),t.headers=t.headers||{},t.data=transformData.call(t,t.data,t.headers,t.transformRequest),t.headers=utils$8.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),utils$8.forEach(["delete","get","head","post","put","patch","common"],function(c){delete t.headers[c]});var i=t.adapter||defaults$5.adapter;return i(t).then(function(c){return throwIfCancellationRequested(t),c.data=transformData.call(t,c.data,c.headers,t.transformResponse),c},function(c){return isCancel(c)||(throwIfCancellationRequested(t),c&&c.response&&(c.response.data=transformData.call(t,c.response.data,c.response.headers,t.transformResponse))),Promise.reject(c)})},utils$7=utils$g,mergeConfig$2=function(t,i){i=i||{};var s={};function c(w,k){return utils$7.isPlainObject(w)&&utils$7.isPlainObject(k)?utils$7.merge(w,k):utils$7.isPlainObject(k)?utils$7.merge({},k):utils$7.isArray(k)?k.slice():k}function d(w){if(utils$7.isUndefined(i[w])){if(!utils$7.isUndefined(t[w]))return c(void 0,t[w])}else return c(t[w],i[w])}function g(w){if(!utils$7.isUndefined(i[w]))return c(void 0,i[w])}function r(w){if(utils$7.isUndefined(i[w])){if(!utils$7.isUndefined(t[w]))return c(void 0,t[w])}else return c(void 0,i[w])}function y(w){if(w in i)return c(t[w],i[w]);if(w in t)return c(void 0,t[w])}var E={url:g,method:g,data:g,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:y};return utils$7.forEach(Object.keys(t).concat(Object.keys(i)),function(k){var S=E[k]||d,I=S(k);utils$7.isUndefined(I)&&S!==y||(s[k]=I)}),s},VERSION=requireData().version,AxiosError=AxiosError_1,validators$1={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){validators$1[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});var deprecatedWarnings={};validators$1.transitional=function(t,i,s){function c(d,g){return"[Axios v"+VERSION+"] Transitional option '"+d+"'"+g+(s?". "+s:"")}return function(d,g,r){if(t===!1)throw new AxiosError(c(g," has been removed"+(i?" in "+i:"")),AxiosError.ERR_DEPRECATED);return i&&!deprecatedWarnings[g]&&(deprecatedWarnings[g]=!0,console.warn(c(g," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(d,g,r):!0}};function assertOptions(e,t,i){if(typeof e!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);for(var s=Object.keys(e),c=s.length;c-- >0;){var d=s[c],g=t[d];if(g){var r=e[d],y=r===void 0||g(r,d,e);if(y!==!0)throw new AxiosError("option "+d+" must be "+y,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new AxiosError("Unknown option "+d,AxiosError.ERR_BAD_OPTION)}}var validator$1={assertOptions,validators:validators$1},utils$6=utils$g,buildURL=buildURL$1,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2,buildFullPath=buildFullPath$1,validator=validator$1,validators=validator.validators;function Axios$1(e){this.defaults=e,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function(t,i){typeof t=="string"?(i=i||{},i.url=t):i=t||{},i=mergeConfig$1(this.defaults,i),i.method?i.method=i.method.toLowerCase():this.defaults.method?i.method=this.defaults.method.toLowerCase():i.method="get";var s=i.transitional;s!==void 0&&validator.assertOptions(s,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1);var c=[],d=!0;this.interceptors.request.forEach(function(I){typeof I.runWhen=="function"&&I.runWhen(i)===!1||(d=d&&I.synchronous,c.unshift(I.fulfilled,I.rejected))});var g=[];this.interceptors.response.forEach(function(I){g.push(I.fulfilled,I.rejected)});var r;if(!d){var y=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(y,c),y=y.concat(g),r=Promise.resolve(i);y.length;)r=r.then(y.shift(),y.shift());return r}for(var E=i;c.length;){var w=c.shift(),k=c.shift();try{E=w(E)}catch(S){k(S);break}}try{r=dispatchRequest(E)}catch(S){return Promise.reject(S)}for(;g.length;)r=r.then(g.shift(),g.shift());return r};Axios$1.prototype.getUri=function(t){t=mergeConfig$1(this.defaults,t);var i=buildFullPath(t.baseURL,t.url);return buildURL(i,t.params,t.paramsSerializer)};utils$6.forEach(["delete","get","head","options"],function(t){Axios$1.prototype[t]=function(i,s){return this.request(mergeConfig$1(s||{},{method:t,url:i,data:(s||{}).data}))}});utils$6.forEach(["post","put","patch"],function(t){function i(s){return function(d,g,r){return this.request(mergeConfig$1(r||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:d,data:g}))}}Axios$1.prototype[t]=i(),Axios$1.prototype[t+"Form"]=i(!0)});var Axios_1=Axios$1,CancelToken_1,hasRequiredCancelToken;function requireCancelToken(){if(hasRequiredCancelToken)return CancelToken_1;hasRequiredCancelToken=1;var e=requireCanceledError();function t(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var s;this.promise=new Promise(function(g){s=g});var c=this;this.promise.then(function(d){if(!!c._listeners){var g,r=c._listeners.length;for(g=0;g<r;g++)c._listeners[g](d);c._listeners=null}}),this.promise.then=function(d){var g,r=new Promise(function(y){c.subscribe(y),g=y}).then(d);return r.cancel=function(){c.unsubscribe(g)},r},i(function(g){c.reason||(c.reason=new e(g),s(c.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]},t.prototype.unsubscribe=function(s){if(!!this._listeners){var c=this._listeners.indexOf(s);c!==-1&&this._listeners.splice(c,1)}},t.source=function(){var s,c=new t(function(g){s=g});return{token:c,cancel:s}},CancelToken_1=t,CancelToken_1}var spread,hasRequiredSpread;function requireSpread(){return hasRequiredSpread||(hasRequiredSpread=1,spread=function(t){return function(s){return t.apply(null,s)}}),spread}var isAxiosError,hasRequiredIsAxiosError;function requireIsAxiosError(){if(hasRequiredIsAxiosError)return isAxiosError;hasRequiredIsAxiosError=1;var e=utils$g;return isAxiosError=function(i){return e.isObject(i)&&i.isAxiosError===!0},isAxiosError}var utils$5=utils$g,bind$2=bind$4,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults$4=defaults_1;function createInstance(e){var t=new Axios(e),i=bind$2(Axios.prototype.request,t);return utils$5.extend(i,Axios.prototype,t),utils$5.extend(i,t),i.create=function(c){return createInstance(mergeConfig(e,c))},i}var axios$1=createInstance(defaults$4);axios$1.Axios=Axios;axios$1.CanceledError=requireCanceledError();axios$1.CancelToken=requireCancelToken();axios$1.isCancel=requireIsCancel();axios$1.VERSION=requireData().version;axios$1.toFormData=toFormData_1;axios$1.AxiosError=AxiosError_1;axios$1.Cancel=axios$1.CanceledError;axios$1.all=function(t){return Promise.all(t)};axios$1.spread=requireSpread();axios$1.isAxiosError=requireIsAxiosError();axios$2.exports=axios$1;axios$2.exports.default=axios$1;(function(e){e.exports=axios$2.exports})(axios$3);const axios=getDefaultExportFromCjs(axios$3.exports),nodepress=axios.create({baseURL:API_CONFIG.NODEPRESS,withCredentials:!0});nodepress.interceptors.response.use(e=>e.headers["content-type"].includes("json")&&e.data.status!=="success"?Promise.reject(e.data):e.data,e=>{var c,d,g,r,y,E;const t=e.toJSON(),i={...t,config:e.config,code:t.status||((c=e.response)==null?void 0:c.status)||BAD_REQUEST,message:((g=(d=e.response)==null?void 0:d.data)==null?void 0:g.error)||((r=e.response)==null?void 0:r.statusText)||t.message},s={axiosName:t.name,axiosMessage:t.message,npError:i.message,npMessage:((E=(y=e.response)==null?void 0:y.data)==null?void 0:E.message)||"",status:i.code,method:t.config.method,baseURL:t.config.baseURL,url:t.config.url,params:t.config.params,data:t.config.data,headers:t.config.headers};return console.debug("axios error:",s),Promise.reject(i)});const overwrite=e=>(...t)=>nodepress[e](...t),nodepress$1={$:nodepress,request:overwrite("request"),head:overwrite("head"),get:overwrite("get"),post:overwrite("post"),put:overwrite("put"),patch:overwrite("patch"),delete:overwrite("delete"),options:overwrite("options")},tagEnName=e=>/.*[\u4e00-\u9fa5]+.*$/.test(e.name)?e.slug.includes("-")?e.slug:firstUpperCase(e.slug):e.name,useTagStore=defineFetchStore({id:"tag",initData:[],onlyOnce:!0,fetcher:()=>nodepress$1.get("/tag/all").then(e=>e.result),getters:{sorted:e=>{const t=[...e.data];return t.sort((i,s)=>s.articles_count-i.articles_count),t},fullNameTags:e=>{const t=new Map;return e.data.forEach(i=>{t.set(i.name,i),t.set(i.name.toLowerCase(),i),t.set(i.name.toUpperCase(),i),t.set(firstUpperCase(i.name),i)}),t}}}),useCategoryStore=defineFetchStore({id:"category",initData:[],onlyOnce:!0,async fetcher(){return(await nodepress$1.get("/category",{params:{per_page:50}})).result.data}}),NULL=null,UNDEFINED=void 0,isNull=e=>e===NULL,isUndefined=e=>e===UNDEFINED;var OriginState=(e=>(e[e.Original=0]="Original",e[e.Reprint=1]="Reprint",e[e.Hybrid=2]="Hybrid",e))(OriginState||{}),CommentPostID=(e=>(e[e.Guestbook=0]="Guestbook",e))(CommentPostID||{}),CommentParentType=(e=>(e[e.Self=0]="Self",e))(CommentParentType||{}),SortType=(e=>(e[e.Asc=1]="Asc",e[e.Desc=-1]="Desc",e[e.Hottest=2]="Hottest",e))(SortType||{});const get=e=>localStorage.getItem(e),set=(e,t)=>localStorage.setItem(e,t),remove$1=e=>localStorage.removeItem(e),setJSON=(e,t)=>set(e,JSON.stringify(t)),getJSON=e=>{const t=get(e);return typeof t=="string"?JSON.parse(t):null},storage={get,set,remove:remove$1,setJSON,getJSON};var UserType=(e=>(e[e.Null=0]="Null",e[e.Local=1]="Local",e[e.Disqus=2]="Disqus",e))(UserType||{});const LOCAL_STORGAE_KEY="identity-state",useIdentityStore=pinia_prod.defineStore("identity",{state:()=>({disqusConfig:null,user:{type:0,localProfile:null,disqusProfile:null},vote:{likedPages:[],likedComments:[],dislikedComments:[]},feedbacks:[]}),getters:{isLikedPage:e=>t=>e.vote.likedPages.includes(t),isLikedComment:e=>t=>e.vote.likedComments.includes(t),isDislikedComment:e=>t=>e.vote.dislikedComments.includes(t),author:e=>{var t,i,s;return e.user.type===1?e.user.localProfile:e.user.type===2?{name:(t=e.user.disqusProfile)==null?void 0:t.name,site:((i=e.user.disqusProfile)==null?void 0:i.url)||((s=e.user.disqusProfile)==null?void 0:s.profileUrl)}:null}},actions:{likeComment(e){this.vote.likedComments.push(e)},dislikeComment(e){this.vote.dislikedComments.push(e)},likePage(e){this.vote.likedPages.push(e)},addFeedback(e){this.feedbacks.push(e)},fromStorage(){try{this.$state=getJSON(LOCAL_STORGAE_KEY)||this.$state}catch{remove$1(LOCAL_STORGAE_KEY)}},initOnClient(){this.fromStorage(),this.$subscribe(()=>setJSON(LOCAL_STORGAE_KEY,this.$state)),window.addEventListener("storage",e=>{e.key===LOCAL_STORGAE_KEY&&this.fromStorage()}),this.$state.user.type===2?this.fetchDisqusUserInfo().catch(()=>{this.user.disqusProfile=null,this.user.type=0}):this.user.disqusProfile=null,this.fetchDisqusConfig()},saveLocalUser(e){this.user.localProfile={...e},this.user.type=1},removeLocalUser(){this.user.localProfile=null,this.user.type=0},fetchDisqusLogout(){return nodepress$1.get("/disqus/oauth-logout").then(()=>{this.user.disqusProfile=null,this.user.type=0})},fetchDisqusUserInfo(){return nodepress$1.get("/disqus/user-info").then(e=>{this.user.disqusProfile=e.result,this.user.type=2})},fetchDisqusConfig(){return nodepress$1.get("/disqus/config").then(e=>{this.disqusConfig=e.result})}}}),COMMENT_API_PATH="/comment",COMMENT_EMPTY_PID=CommentParentType.Self,useCommentStore=pinia_prod.defineStore("comment",{state:()=>({fetching:!1,posting:!1,deleting:!1,comments:[],pagination:null}),getters:{commentTreeList:e=>{const t=e.comments.map(r=>r.id),i=e.comments.filter(r=>r.pid===COMMENT_EMPTY_PID||!t.includes(r.pid)),s=e.comments.filter(r=>r.pid!==COMMENT_EMPTY_PID&&t.includes(r.pid)),c=new Map(e.comments.map(r=>[r.id,r])),d=new Map(i.map(r=>[r.id,{comment:r,children:[]}])),g=r=>{const y=c.get(r);return y?y.pid===COMMENT_EMPTY_PID?y.id:g(y.pid):UNDEFINED};return s.forEach(r=>{const y=g(r.pid);if(y&&d.has(y)){const E=d.get(y);d.set(y,{...E,children:[r,...E.children]})}}),Array.from(d.values())}},actions:{clearList(){this.comments=[],this.pagination=null},fetchList(e={},t=!1){return e={page:1,per_page:50,sort:SortType.Desc,...e},e.page===1&&this.clearList(),this.fetching=!0,nodepress$1.get(COMMENT_API_PATH,{params:e}).then(c=>{this.pagination=c.result.pagination,t?this.comments.push(...c.result.data):this.comments=c.result.data}).finally(()=>{this.fetching=!1})},postComment(e){return this.posting=!0,nodepress$1.post("/disqus/comment",e).then(t=>(this.comments.unshift(t.result),this.pagination&&this.pagination.total++,t.result)).finally(()=>{this.posting=!1})},deleteComment(e){return this.deleting=!0,nodepress$1.delete("/disqus/comment",{data:{comment_id:e}}).then(()=>{const t=this.comments.findIndex(i=>i.id===e);t>-1&&(this.comments.splice(t,1),this.pagination.total--)}).finally(()=>{this.deleting=!1})},postCommentVote(e,t){const i=useIdentityStore();return nodepress$1.post("/vote/comment",{comment_id:e,vote:t,author:i.author}).then(()=>{const s=this.comments.find(c=>c.id===e);s&&(t>0?s.likes++:s.dislikes++)})}}}),HEADER_ELEMENT_ID="A_header",NAV_ELEMENT_ID="A_nav",MAIN_ELEMENT_ID="A_main",MAIN_CONTENT_ELEMENT_ID="A_main",ASIDE_ELEMENT_ID="A_aside",FOOTER_ELEMENT_ID="A_footer",ARTICLE_CONTENT_ELEMENT_ID="A_article_content",ARTICLE_READMORE_ELEMENT_ID="A_article_readmore",ARTICLE_META_ELEMENT_ID="A_article_meta",ARTICLE_SHARE_ELEMENT_ID="A_article_share",ARTICLE_RELATED_ELEMENT_ID="A_article_related",ARTICLE_CONTENT_HEADING_ELEMENT_ID_PREFIX="A_article_content_heading",getArticleContentHeadingElementID=(e,t)=>`${ARTICLE_CONTENT_HEADING_ELEMENT_ID_PREFIX}_${e}_${t}`,COMMENT_ELEMENT_ID="A_comment_warpper",COMMENT_PUBLISHER_ELEMENT_ID="A_comment_publisher",COMMENT_REPLY_PUBLISHER_ELEMENT_ID="A_comment_reply_publisher",COMMENT_FOOTER_ELEMENT_ID="A_comment_footer",COMMENT_ITEM_ELEMENT_ID_PREFIX="A_comment_content_item",getCommentItemElementID=e=>`${COMMENT_ITEM_ELEMENT_ID_PREFIX}_${e}`,ANCHORS=Object.freeze(Object.defineProperty({__proto__:null,HEADER_ELEMENT_ID,NAV_ELEMENT_ID,MAIN_ELEMENT_ID,MAIN_CONTENT_ELEMENT_ID,ASIDE_ELEMENT_ID,FOOTER_ELEMENT_ID,ARTICLE_CONTENT_ELEMENT_ID,ARTICLE_READMORE_ELEMENT_ID,ARTICLE_META_ELEMENT_ID,ARTICLE_SHARE_ELEMENT_ID,ARTICLE_RELATED_ELEMENT_ID,ARTICLE_CONTENT_HEADING_ELEMENT_ID_PREFIX,getArticleContentHeadingElementID,COMMENT_ELEMENT_ID,COMMENT_PUBLISHER_ELEMENT_ID,COMMENT_REPLY_PUBLISHER_ELEMENT_ID,COMMENT_FOOTER_ELEMENT_ID,COMMENT_ITEM_ELEMENT_ID_PREFIX,getCommentItemElementID},Symbol.toStringTag,{value:"Module"}));var deepFreezeEs6={exports:{}};function deepFreeze(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach(function(t){var i=e[t];typeof i=="object"&&!Object.isFrozen(i)&&deepFreeze(i)}),e}deepFreezeEs6.exports=deepFreeze;deepFreezeEs6.exports.default=deepFreeze;class Response$1{constructor(t){t.data===void 0&&(t.data={}),this.data=t.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function escapeHTML(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function inherit$1(e,...t){const i=Object.create(null);for(const s in e)i[s]=e[s];return t.forEach(function(s){for(const c in s)i[c]=s[c]}),i}const SPAN_CLOSE="</span>",emitsWrappingTags=e=>!!e.scope||e.sublanguage&&e.language,scopeToCSSClass=(e,{prefix:t})=>{if(e.includes(".")){const i=e.split(".");return[`${t}${i.shift()}`,...i.map((s,c)=>`${s}${"_".repeat(c+1)}`)].join(" ")}return`${t}${e}`};class HTMLRenderer{constructor(t,i){this.buffer="",this.classPrefix=i.classPrefix,t.walk(this)}addText(t){this.buffer+=escapeHTML(t)}openNode(t){if(!emitsWrappingTags(t))return;let i="";t.sublanguage?i=`language-${t.language}`:i=scopeToCSSClass(t.scope,{prefix:this.classPrefix}),this.span(i)}closeNode(t){!emitsWrappingTags(t)||(this.buffer+=SPAN_CLOSE)}value(){return this.buffer}span(t){this.buffer+=`<span class="${t}">`}}const newNode=(e={})=>{const t={children:[]};return Object.assign(t,e),t};class TokenTree{constructor(){this.rootNode=newNode(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(t){this.top.children.push(t)}openNode(t){const i=newNode({scope:t});this.add(i),this.stack.push(i)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(t){return this.constructor._walk(t,this.rootNode)}static _walk(t,i){return typeof i=="string"?t.addText(i):i.children&&(t.openNode(i),i.children.forEach(s=>this._walk(t,s)),t.closeNode(i)),t}static _collapse(t){typeof t!="string"&&(!t.children||(t.children.every(i=>typeof i=="string")?t.children=[t.children.join("")]:t.children.forEach(i=>{TokenTree._collapse(i)})))}}class TokenTreeEmitter extends TokenTree{constructor(t){super(),this.options=t}addKeyword(t,i){t!==""&&(this.openNode(i),this.addText(t),this.closeNode())}addText(t){t!==""&&this.add(t)}addSublanguage(t,i){const s=t.root;s.sublanguage=!0,s.language=i,this.add(s)}toHTML(){return new HTMLRenderer(this,this.options).value()}finalize(){return!0}}function source(e){return e?typeof e=="string"?e:e.source:null}function lookahead(e){return concat("(?=",e,")")}function anyNumberOfTimes(e){return concat("(?:",e,")*")}function optional(e){return concat("(?:",e,")?")}function concat(...e){return e.map(i=>source(i)).join("")}function stripOptionsFromArgs(e){const t=e[e.length-1];return typeof t=="object"&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function either(...e){const t=stripOptionsFromArgs(e);return"("+(t.capture?"":"?:")+e.map(s=>source(s)).join("|")+")"}function countMatchGroups(e){return new RegExp(e.toString()+"|").exec("").length-1}function startsWith(e,t){const i=e&&e.exec(t);return i&&i.index===0}const BACKREF_RE=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function _rewriteBackreferences(e,{joinWith:t}){let i=0;return e.map(s=>{i+=1;const c=i;let d=source(s),g="";for(;d.length>0;){const r=BACKREF_RE.exec(d);if(!r){g+=d;break}g+=d.substring(0,r.index),d=d.substring(r.index+r[0].length),r[0][0]==="\\"&&r[1]?g+="\\"+String(Number(r[1])+c):(g+=r[0],r[0]==="("&&i++)}return g}).map(s=>`(${s})`).join(t)}const MATCH_NOTHING_RE=/\b\B/,IDENT_RE$2="[a-zA-Z]\\w*",UNDERSCORE_IDENT_RE="[a-zA-Z_]\\w*",NUMBER_RE="\\b\\d+(\\.\\d+)?",C_NUMBER_RE="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",BINARY_NUMBER_RE="\\b(0b[01]+)",RE_STARTERS_RE="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",SHEBANG=(e={})=>{const t=/^#![ ]*\//;return e.binary&&(e.begin=concat(t,/.*\b/,e.binary,/\b.*/)),inherit$1({scope:"meta",begin:t,end:/$/,relevance:0,"on:begin":(i,s)=>{i.index!==0&&s.ignoreMatch()}},e)},BACKSLASH_ESCAPE={begin:"\\\\[\\s\\S]",relevance:0},APOS_STRING_MODE={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[BACKSLASH_ESCAPE]},QUOTE_STRING_MODE={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[BACKSLASH_ESCAPE]},PHRASAL_WORDS_MODE={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},COMMENT=function(e,t,i={}){const s=inherit$1({scope:"comment",begin:e,end:t,contains:[]},i);s.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const c=either("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return s.contains.push({begin:concat(/[ ]+/,"(",c,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),s},C_LINE_COMMENT_MODE=COMMENT("//","$"),C_BLOCK_COMMENT_MODE=COMMENT("/\\*","\\*/"),HASH_COMMENT_MODE=COMMENT("#","$"),NUMBER_MODE={scope:"number",begin:NUMBER_RE,relevance:0},C_NUMBER_MODE={scope:"number",begin:C_NUMBER_RE,relevance:0},BINARY_NUMBER_MODE={scope:"number",begin:BINARY_NUMBER_RE,relevance:0},REGEXP_MODE={begin:/(?=\/[^/\n]*\/)/,contains:[{scope:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[BACKSLASH_ESCAPE]}]}]},TITLE_MODE={scope:"title",begin:IDENT_RE$2,relevance:0},UNDERSCORE_TITLE_MODE={scope:"title",begin:UNDERSCORE_IDENT_RE,relevance:0},METHOD_GUARD={begin:"\\.\\s*"+UNDERSCORE_IDENT_RE,relevance:0},END_SAME_AS_BEGIN=function(e){return Object.assign(e,{"on:begin":(t,i)=>{i.data._beginMatch=t[1]},"on:end":(t,i)=>{i.data._beginMatch!==t[1]&&i.ignoreMatch()}})};var MODES$4=Object.freeze({__proto__:null,MATCH_NOTHING_RE,IDENT_RE:IDENT_RE$2,UNDERSCORE_IDENT_RE,NUMBER_RE,C_NUMBER_RE,BINARY_NUMBER_RE,RE_STARTERS_RE,SHEBANG,BACKSLASH_ESCAPE,APOS_STRING_MODE,QUOTE_STRING_MODE,PHRASAL_WORDS_MODE,COMMENT,C_LINE_COMMENT_MODE,C_BLOCK_COMMENT_MODE,HASH_COMMENT_MODE,NUMBER_MODE,C_NUMBER_MODE,BINARY_NUMBER_MODE,REGEXP_MODE,TITLE_MODE,UNDERSCORE_TITLE_MODE,METHOD_GUARD,END_SAME_AS_BEGIN});function skipIfHasPrecedingDot(e,t){e.input[e.index-1]==="."&&t.ignoreMatch()}function scopeClassName(e,t){e.className!==void 0&&(e.scope=e.className,delete e.className)}function beginKeywords(e,t){!t||!e.beginKeywords||(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=skipIfHasPrecedingDot,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,e.relevance===void 0&&(e.relevance=0))}function compileIllegal(e,t){!Array.isArray(e.illegal)||(e.illegal=either(...e.illegal))}function compileMatch(e,t){if(!!e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function compileRelevance(e,t){e.relevance===void 0&&(e.relevance=1)}const beforeMatchExt=(e,t)=>{if(!e.beforeMatch)return;if(e.starts)throw new Error("beforeMatch cannot be used with starts");const i=Object.assign({},e);Object.keys(e).forEach(s=>{delete e[s]}),e.keywords=i.keywords,e.begin=concat(i.beforeMatch,lookahead(i.begin)),e.starts={relevance:0,contains:[Object.assign(i,{endsParent:!0})]},e.relevance=0,delete i.beforeMatch},COMMON_KEYWORDS=["of","and","for","in","not","or","if","then","parent","list","value"],DEFAULT_KEYWORD_SCOPE="keyword";function compileKeywords(e,t,i=DEFAULT_KEYWORD_SCOPE){const s=Object.create(null);return typeof e=="string"?c(i,e.split(" ")):Array.isArray(e)?c(i,e):Object.keys(e).forEach(function(d){Object.assign(s,compileKeywords(e[d],t,d))}),s;function c(d,g){t&&(g=g.map(r=>r.toLowerCase())),g.forEach(function(r){const y=r.split("|");s[y[0]]=[d,scoreForKeyword(y[0],y[1])]})}}function scoreForKeyword(e,t){return t?Number(t):commonKeyword(e)?0:1}function commonKeyword(e){return COMMON_KEYWORDS.includes(e.toLowerCase())}const seenDeprecations={},error=e=>{console.error(e)},warn=(e,...t)=>{console.log(`WARN: ${e}`,...t)},deprecated=(e,t)=>{seenDeprecations[`${e}/${t}`]||(console.log(`Deprecated as of ${e}. ${t}`),seenDeprecations[`${e}/${t}`]=!0)},MultiClassError=new Error;function remapScopeNames(e,t,{key:i}){let s=0;const c=e[i],d={},g={};for(let r=1;r<=t.length;r++)g[r+s]=c[r],d[r+s]=!0,s+=countMatchGroups(t[r-1]);e[i]=g,e[i]._emit=d,e[i]._multi=!0}function beginMultiClass(e){if(!!Array.isArray(e.begin)){if(e.skip||e.excludeBegin||e.returnBegin)throw error("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),MultiClassError;if(typeof e.beginScope!="object"||e.beginScope===null)throw error("beginScope must be object"),MultiClassError;remapScopeNames(e,e.begin,{key:"beginScope"}),e.begin=_rewriteBackreferences(e.begin,{joinWith:""})}}function endMultiClass(e){if(!!Array.isArray(e.end)){if(e.skip||e.excludeEnd||e.returnEnd)throw error("skip, excludeEnd, returnEnd not compatible with endScope: {}"),MultiClassError;if(typeof e.endScope!="object"||e.endScope===null)throw error("endScope must be object"),MultiClassError;remapScopeNames(e,e.end,{key:"endScope"}),e.end=_rewriteBackreferences(e.end,{joinWith:""})}}function scopeSugar(e){e.scope&&typeof e.scope=="object"&&e.scope!==null&&(e.beginScope=e.scope,delete e.scope)}function MultiClass(e){scopeSugar(e),typeof e.beginScope=="string"&&(e.beginScope={_wrap:e.beginScope}),typeof e.endScope=="string"&&(e.endScope={_wrap:e.endScope}),beginMultiClass(e),endMultiClass(e)}function compileLanguage(e){function t(g,r){return new RegExp(source(g),"m"+(e.case_insensitive?"i":"")+(e.unicodeRegex?"u":"")+(r?"g":""))}class i{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(r,y){y.position=this.position++,this.matchIndexes[this.matchAt]=y,this.regexes.push([y,r]),this.matchAt+=countMatchGroups(r)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const r=this.regexes.map(y=>y[1]);this.matcherRe=t(_rewriteBackreferences(r,{joinWith:"|"}),!0),this.lastIndex=0}exec(r){this.matcherRe.lastIndex=this.lastIndex;const y=this.matcherRe.exec(r);if(!y)return null;const E=y.findIndex((k,S)=>S>0&&k!==void 0),w=this.matchIndexes[E];return y.splice(0,E),Object.assign(y,w)}}class s{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(r){if(this.multiRegexes[r])return this.multiRegexes[r];const y=new i;return this.rules.slice(r).forEach(([E,w])=>y.addRule(E,w)),y.compile(),this.multiRegexes[r]=y,y}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(r,y){this.rules.push([r,y]),y.type==="begin"&&this.count++}exec(r){const y=this.getMatcher(this.regexIndex);y.lastIndex=this.lastIndex;let E=y.exec(r);if(this.resumingScanAtSamePosition()&&!(E&&E.index===this.lastIndex)){const w=this.getMatcher(0);w.lastIndex=this.lastIndex+1,E=w.exec(r)}return E&&(this.regexIndex+=E.position+1,this.regexIndex===this.count&&this.considerAll()),E}}function c(g){const r=new s;return g.contains.forEach(y=>r.addRule(y.begin,{rule:y,type:"begin"})),g.terminatorEnd&&r.addRule(g.terminatorEnd,{type:"end"}),g.illegal&&r.addRule(g.illegal,{type:"illegal"}),r}function d(g,r){const y=g;if(g.isCompiled)return y;[scopeClassName,compileMatch,MultiClass,beforeMatchExt].forEach(w=>w(g,r)),e.compilerExtensions.forEach(w=>w(g,r)),g.__beforeBegin=null,[beginKeywords,compileIllegal,compileRelevance].forEach(w=>w(g,r)),g.isCompiled=!0;let E=null;return typeof g.keywords=="object"&&g.keywords.$pattern&&(g.keywords=Object.assign({},g.keywords),E=g.keywords.$pattern,delete g.keywords.$pattern),E=E||/\w+/,g.keywords&&(g.keywords=compileKeywords(g.keywords,e.case_insensitive)),y.keywordPatternRe=t(E,!0),r&&(g.begin||(g.begin=/\B|\b/),y.beginRe=t(y.begin),!g.end&&!g.endsWithParent&&(g.end=/\B|\b/),g.end&&(y.endRe=t(y.end)),y.terminatorEnd=source(y.end)||"",g.endsWithParent&&r.terminatorEnd&&(y.terminatorEnd+=(g.end?"|":"")+r.terminatorEnd)),g.illegal&&(y.illegalRe=t(g.illegal)),g.contains||(g.contains=[]),g.contains=[].concat(...g.contains.map(function(w){return expandOrCloneMode(w==="self"?g:w)})),g.contains.forEach(function(w){d(w,y)}),g.starts&&d(g.starts,r),y.matcher=c(y),y}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=inherit$1(e.classNameAliases||{}),d(e)}function dependencyOnParent(e){return e?e.endsWithParent||dependencyOnParent(e.starts):!1}function expandOrCloneMode(e){return e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map(function(t){return inherit$1(e,{variants:null},t)})),e.cachedVariants?e.cachedVariants:dependencyOnParent(e)?inherit$1(e,{starts:e.starts?inherit$1(e.starts):null}):Object.isFrozen(e)?inherit$1(e):e}var version$1="11.6.0";class HTMLInjectionError extends Error{constructor(t,i){super(t),this.name="HTMLInjectionError",this.html=i}}const escape$2=escapeHTML,inherit=inherit$1,NO_MATCH=Symbol("nomatch"),MAX_KEYWORD_HITS=7,HLJS=function(e){const t=Object.create(null),i=Object.create(null),s=[];let c=!0;const d="Could not find the language '{}', did you forget to load/include a language module?",g={disableAutodetect:!0,name:"Plain text",contains:[]};let r={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:TokenTreeEmitter};function y(Te){return r.noHighlightRe.test(Te)}function E(Te){let ze=Te.className+" ";ze+=Te.parentNode?Te.parentNode.className:"";const Ke=r.languageDetectRe.exec(ze);if(Ke){const ut=Ce(Ke[1]);return ut||(warn(d.replace("{}",Ke[1])),warn("Falling back to no-highlight mode for this block.",Te)),ut?Ke[1]:"no-highlight"}return ze.split(/\s+/).find(ut=>y(ut)||Ce(ut))}function w(Te,ze,Ke){let ut="",Nt="";typeof ze=="object"?(ut=Te,Ke=ze.ignoreIllegals,Nt=ze.language):(deprecated("10.7.0","highlight(lang, code, ...args) has been deprecated."),deprecated("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),Nt=Te,ut=ze),Ke===void 0&&(Ke=!0);const an={code:ut,language:Nt};Ge("before:highlight",an);const un=an.result?an.result:k(an.language,an.code,Ke);return un.code=an.code,Ge("after:highlight",un),un}function k(Te,ze,Ke,ut){const Nt=Object.create(null);function an(tt,st){return tt.keywords[st]}function un(){if(!Ze.keywords){Qe.addText(Ue);return}let tt=0;Ze.keywordPatternRe.lastIndex=0;let st=Ze.keywordPatternRe.exec(Ue),Et="";for(;st;){Et+=Ue.substring(tt,st.index);const It=ve.case_insensitive?st[0].toLowerCase():st[0],dn=an(Ze,It);if(dn){const[gn,Un]=dn;if(Qe.addText(Et),Et="",Nt[It]=(Nt[It]||0)+1,Nt[It]<=MAX_KEYWORD_HITS&&(vt+=Un),gn.startsWith("_"))Et+=st[0];else{const oi=ve.classNameAliases[gn]||gn;Qe.addKeyword(st[0],oi)}}else Et+=st[0];tt=Ze.keywordPatternRe.lastIndex,st=Ze.keywordPatternRe.exec(Ue)}Et+=Ue.substring(tt),Qe.addText(Et)}function wn(){if(Ue==="")return;let tt=null;if(typeof Ze.subLanguage=="string"){if(!t[Ze.subLanguage]){Qe.addText(Ue);return}tt=k(Ze.subLanguage,Ue,!0,mt[Ze.subLanguage]),mt[Ze.subLanguage]=tt._top}else tt=I(Ue,Ze.subLanguage.length?Ze.subLanguage:null);Ze.relevance>0&&(vt+=tt.relevance),Qe.addSublanguage(tt._emitter,tt.language)}function An(){Ze.subLanguage!=null?wn():un(),Ue=""}function kn(tt,st){let Et=1;const It=st.length-1;for(;Et<=It;){if(!tt._emit[Et]){Et++;continue}const dn=ve.classNameAliases[tt[Et]]||tt[Et],gn=st[Et];dn?Qe.addKeyword(gn,dn):(Ue=gn,un(),Ue=""),Et++}}function En(tt,st){return tt.scope&&typeof tt.scope=="string"&&Qe.openNode(ve.classNameAliases[tt.scope]||tt.scope),tt.beginScope&&(tt.beginScope._wrap?(Qe.addKeyword(Ue,ve.classNameAliases[tt.beginScope._wrap]||tt.beginScope._wrap),Ue=""):tt.beginScope._multi&&(kn(tt.beginScope,st),Ue="")),Ze=Object.create(tt,{parent:{value:Ze}}),Ze}function Vn(tt,st,Et){let It=startsWith(tt.endRe,Et);if(It){if(tt["on:end"]){const dn=new Response$1(tt);tt["on:end"](st,dn),dn.isMatchIgnored&&(It=!1)}if(It){for(;tt.endsParent&&tt.parent;)tt=tt.parent;return tt}}if(tt.endsWithParent)return Vn(tt.parent,st,Et)}function ni(tt){return Ze.matcher.regexIndex===0?(Ue+=tt[0],1):(Tt=!0,0)}function Xn(tt){const st=tt[0],Et=tt.rule,It=new Response$1(Et),dn=[Et.__beforeBegin,Et["on:begin"]];for(const gn of dn)if(!!gn&&(gn(tt,It),It.isMatchIgnored))return ni(st);return Et.skip?Ue+=st:(Et.excludeBegin&&(Ue+=st),An(),!Et.returnBegin&&!Et.excludeBegin&&(Ue=st)),En(Et,tt),Et.returnBegin?0:st.length}function Ln(tt){const st=tt[0],Et=ze.substring(tt.index),It=Vn(Ze,tt,Et);if(!It)return NO_MATCH;const dn=Ze;Ze.endScope&&Ze.endScope._wrap?(An(),Qe.addKeyword(st,Ze.endScope._wrap)):Ze.endScope&&Ze.endScope._multi?(An(),kn(Ze.endScope,tt)):dn.skip?Ue+=st:(dn.returnEnd||dn.excludeEnd||(Ue+=st),An(),dn.excludeEnd&&(Ue=st));do Ze.scope&&Qe.closeNode(),!Ze.skip&&!Ze.subLanguage&&(vt+=Ze.relevance),Ze=Ze.parent;while(Ze!==It.parent);return It.starts&&En(It.starts,tt),dn.returnEnd?0:st.length}function gi(){const tt=[];for(let st=Ze;st!==ve;st=st.parent)st.scope&&tt.unshift(st.scope);tt.forEach(st=>Qe.openNode(st))}let yi={};function Ei(tt,st){const Et=st&&st[0];if(Ue+=tt,Et==null)return An(),0;if(yi.type==="begin"&&st.type==="end"&&yi.index===st.index&&Et===""){if(Ue+=ze.slice(st.index,st.index+1),!c){const It=new Error(`0 width match regex (${Te})`);throw It.languageName=Te,It.badRule=yi.rule,It}return 1}if(yi=st,st.type==="begin")return Xn(st);if(st.type==="illegal"&&!Ke){const It=new Error('Illegal lexeme "'+Et+'" for mode "'+(Ze.scope||"<unnamed>")+'"');throw It.mode=Ze,It}else if(st.type==="end"){const It=Ln(st);if(It!==NO_MATCH)return It}if(st.type==="illegal"&&Et==="")return 1;if(ct>1e5&&ct>st.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Ue+=Et,Et.length}const ve=Ce(Te);if(!ve)throw error(d.replace("{}",Te)),new Error('Unknown language: "'+Te+'"');const Ve=compileLanguage(ve);let pt="",Ze=ut||Ve;const mt={},Qe=new r.__emitter(r);gi();let Ue="",vt=0,dt=0,ct=0,Tt=!1;try{for(Ze.matcher.considerAll();;){ct++,Tt?Tt=!1:Ze.matcher.considerAll(),Ze.matcher.lastIndex=dt;const tt=Ze.matcher.exec(ze);if(!tt)break;const st=ze.substring(dt,tt.index),Et=Ei(st,tt);dt=tt.index+Et}return Ei(ze.substring(dt)),Qe.closeAllNodes(),Qe.finalize(),pt=Qe.toHTML(),{language:Te,value:pt,relevance:vt,illegal:!1,_emitter:Qe,_top:Ze}}catch(tt){if(tt.message&&tt.message.includes("Illegal"))return{language:Te,value:escape$2(ze),illegal:!0,relevance:0,_illegalBy:{message:tt.message,index:dt,context:ze.slice(dt-100,dt+100),mode:tt.mode,resultSoFar:pt},_emitter:Qe};if(c)return{language:Te,value:escape$2(ze),illegal:!1,relevance:0,errorRaised:tt,_emitter:Qe,_top:Ze};throw tt}}function S(Te){const ze={value:escape$2(Te),illegal:!1,relevance:0,_top:g,_emitter:new r.__emitter(r)};return ze._emitter.addText(Te),ze}function I(Te,ze){ze=ze||r.languages||Object.keys(t);const Ke=S(Te),ut=ze.filter(Ce).filter(fe).map(An=>k(An,Te,!1));ut.unshift(Ke);const Nt=ut.sort((An,kn)=>{if(An.relevance!==kn.relevance)return kn.relevance-An.relevance;if(An.language&&kn.language){if(Ce(An.language).supersetOf===kn.language)return 1;if(Ce(kn.language).supersetOf===An.language)return-1}return 0}),[an,un]=Nt,wn=an;return wn.secondBest=un,wn}function L(Te,ze,Ke){const ut=ze&&i[ze]||Ke;Te.classList.add("hljs"),Te.classList.add(`language-${ut}`)}function D(Te){let ze=null;const Ke=E(Te);if(y(Ke))return;if(Ge("before:highlightElement",{el:Te,language:Ke}),Te.children.length>0&&(r.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(Te)),r.throwUnescapedHTML))throw new HTMLInjectionError("One of your code blocks includes unescaped HTML.",Te.innerHTML);ze=Te;const ut=ze.textContent,Nt=Ke?w(ut,{language:Ke,ignoreIllegals:!0}):I(ut);Te.innerHTML=Nt.value,L(Te,Ke,Nt.language),Te.result={language:Nt.language,re:Nt.relevance,relevance:Nt.relevance},Nt.secondBest&&(Te.secondBest={language:Nt.secondBest.language,relevance:Nt.secondBest.relevance}),Ge("after:highlightElement",{el:Te,result:Nt,text:ut})}function O(Te){r=inherit(r,Te)}const V=()=>{Z(),deprecated("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function z(){Z(),deprecated("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let U=!1;function Z(){if(document.readyState==="loading"){U=!0;return}document.querySelectorAll(r.cssSelector).forEach(D)}function W(){U&&Z()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",W,!1);function ne(Te,ze){let Ke=null;try{Ke=ze(e)}catch(ut){if(error("Language definition for '{}' could not be registered.".replace("{}",Te)),c)error(ut);else throw ut;Ke=g}Ke.name||(Ke.name=Te),t[Te]=Ke,Ke.rawDefinition=ze.bind(null,e),Ke.aliases&&we(Ke.aliases,{languageName:Te})}function re(Te){delete t[Te];for(const ze of Object.keys(i))i[ze]===Te&&delete i[ze]}function ie(){return Object.keys(t)}function Ce(Te){return Te=(Te||"").toLowerCase(),t[Te]||t[i[Te]]}function we(Te,{languageName:ze}){typeof Te=="string"&&(Te=[Te]),Te.forEach(Ke=>{i[Ke.toLowerCase()]=ze})}function fe(Te){const ze=Ce(Te);return ze&&!ze.disableAutodetect}function de(Te){Te["before:highlightBlock"]&&!Te["before:highlightElement"]&&(Te["before:highlightElement"]=ze=>{Te["before:highlightBlock"](Object.assign({block:ze.el},ze))}),Te["after:highlightBlock"]&&!Te["after:highlightElement"]&&(Te["after:highlightElement"]=ze=>{Te["after:highlightBlock"](Object.assign({block:ze.el},ze))})}function Le(Te){de(Te),s.push(Te)}function Ge(Te,ze){const Ke=Te;s.forEach(function(ut){ut[Ke]&&ut[Ke](ze)})}function wt(Te){return deprecated("10.7.0","highlightBlock will be removed entirely in v12.0"),deprecated("10.7.0","Please use highlightElement now."),D(Te)}Object.assign(e,{highlight:w,highlightAuto:I,highlightAll:Z,highlightElement:D,highlightBlock:wt,configure:O,initHighlighting:V,initHighlightingOnLoad:z,registerLanguage:ne,unregisterLanguage:re,listLanguages:ie,getLanguage:Ce,registerAliases:we,autoDetection:fe,inherit,addPlugin:Le}),e.debugMode=function(){c=!1},e.safeMode=function(){c=!0},e.versionString=version$1,e.regex={concat,lookahead,either,optional,anyNumberOfTimes};for(const Te in MODES$4)typeof MODES$4[Te]=="object"&&deepFreezeEs6.exports(MODES$4[Te]);return Object.assign(e,MODES$4),e};var highlight=HLJS({}),core=highlight;highlight.HighlightJS=highlight;highlight.default=highlight;const HighlightJS=core;function go(e){const d={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:d,illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"string",variants:[e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{begin:e.C_NUMBER_RE+"[i]",relevance:1},e.C_NUMBER_MODE]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[e.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:d,illegal:/["']/}]}]}}const MODES$3=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z][A-Za-z0-9_-]*/}}),TAGS$3=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],MEDIA_FEATURES$3=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],PSEUDO_CLASSES$3=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],PSEUDO_ELEMENTS$3=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],ATTRIBUTES$3=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function css$1(e){const t=e.regex,i=MODES$3(e),s={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},c="and or not only",d=/@-?\w[\w]*(-\w+)*/,g="[a-zA-Z-][a-zA-Z0-9_-]*",r=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[i.BLOCK_COMMENT,s,i.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+g,relevance:0},i.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+PSEUDO_CLASSES$3.join("|")+")"},{begin:":(:)?("+PSEUDO_ELEMENTS$3.join("|")+")"}]},i.CSS_VARIABLE,{className:"attribute",begin:"\\b("+ATTRIBUTES$3.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[i.BLOCK_COMMENT,i.HEXCOLOR,i.IMPORTANT,i.CSS_NUMBER_MODE,...r,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...r,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},i.FUNCTION_DISPATCH]},{begin:t.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:d},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:c,attribute:MEDIA_FEATURES$3.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...r,i.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+TAGS$3.join("|")+")\\b"}]}}function sql(e){const t=e.regex,i=e.COMMENT("--","$"),s={className:"string",variants:[{begin:/'/,end:/'/,contains:[{begin:/''/}]}]},c={begin:/"/,end:/"/,contains:[{begin:/""/}]},d=["true","false","unknown"],g=["double precision","large object","with timezone","without timezone"],r=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],y=["add","asc","collation","desc","final","first","last","view"],E=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],w=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],k=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],S=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],I=w,L=[...E,...y].filter(U=>!w.includes(U)),D={className:"variable",begin:/@[a-z0-9]+/},O={className:"operator",begin:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},V={begin:t.concat(/\b/,t.either(...I),/\s*\(/),relevance:0,keywords:{built_in:I}};function z(U,{exceptions:Z,when:W}={}){const ne=W;return Z=Z||[],U.map(re=>re.match(/\|\d+$/)||Z.includes(re)?re:ne(re)?`${re}|0`:re)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:z(L,{when:U=>U.length<3}),literal:d,type:r,built_in:k},contains:[{begin:t.either(...S),relevance:0,keywords:{$pattern:/[\w\.]+/,keyword:L.concat(S),literal:d,type:r}},{className:"type",begin:t.either(...g)},V,D,s,c,e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,i,O]}}function php(e){const t=e.regex,i=/(?![A-Za-z0-9])(?![$])/,s=t.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,i),c=t.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,i),d={scope:"variable",match:"\\$+"+s},g={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},r={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},y=e.inherit(e.APOS_STRING_MODE,{illegal:null}),E=e.inherit(e.QUOTE_STRING_MODE,{illegal:null,contains:e.QUOTE_STRING_MODE.contains.concat(r)}),w=e.END_SAME_AS_BEGIN({begin:/<<<[ \t]*(\w+)\n/,end:/[ \t]*(\w+)\b/,contains:e.QUOTE_STRING_MODE.contains.concat(r)}),k=`[ 	
]`,S={scope:"string",variants:[E,y,w]},I={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},L=["false","null","true"],D=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],O=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],z={keyword:D,literal:(de=>{const Le=[];return de.forEach(Ge=>{Le.push(Ge),Ge.toLowerCase()===Ge?Le.push(Ge.toUpperCase()):Le.push(Ge.toLowerCase())}),Le})(L),built_in:O},U=de=>de.map(Le=>Le.replace(/\|\d+$/,"")),Z={variants:[{match:[/new/,t.concat(k,"+"),t.concat("(?!",U(O).join("\\b|"),"\\b)"),c],scope:{1:"keyword",4:"title.class"}}]},W=t.concat(s,"\\b(?!\\()"),ne={variants:[{match:[t.concat(/::/,t.lookahead(/(?!class\b)/)),W],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[c,t.concat(/::/,t.lookahead(/(?!class\b)/)),W],scope:{1:"title.class",3:"variable.constant"}},{match:[c,t.concat("::",t.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[c,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},re={scope:"attr",match:t.concat(s,t.lookahead(":"),t.lookahead(/(?!::)/))},ie={relevance:0,begin:/\(/,end:/\)/,keywords:z,contains:[re,d,ne,e.C_BLOCK_COMMENT_MODE,S,I,Z]},Ce={relevance:0,match:[/\b/,t.concat("(?!fn\\b|function\\b|",U(D).join("\\b|"),"|",U(O).join("\\b|"),"\\b)"),s,t.concat(k,"*"),t.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[ie]};ie.contains.push(Ce);const we=[re,ne,e.C_BLOCK_COMMENT_MODE,S,I,Z],fe={begin:t.concat(/#\[\s*/,c),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:L,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:L,keyword:["new","array"]},contains:["self",...we]},...we,{scope:"meta",match:c}]};return{case_insensitive:!1,keywords:z,contains:[fe,e.HASH_COMMENT_MODE,e.COMMENT("//","$"),e.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:e.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},g,{scope:"variable.language",match:/\$this\b/},d,Ce,ne,{match:[/const/,/\s/,s],scope:{1:"keyword",3:"variable.constant"}},Z,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},e.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:z,contains:["self",d,ne,e.C_BLOCK_COMMENT_MODE,S,I]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[e.inherit(e.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},e.UNDERSCORE_TITLE_MODE]},S,I]}}function xml(e){const t=e.regex,i=t.concat(/[\p{L}_]/u,t.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),s=/[\p{L}0-9._:-]+/u,c={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},d={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},g=e.inherit(d,{begin:/\(/,end:/\)/}),r=e.inherit(e.APOS_STRING_MODE,{className:"string"}),y=e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),E={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:s,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[c]},{begin:/'/,end:/'/,contains:[c]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[d,y,r,g,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[d,g,y,r]}]}]},e.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},c,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[y]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[E],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[E],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:t.concat(/</,t.lookahead(t.concat(i,t.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:i,relevance:0,starts:E}]},{className:"tag",begin:t.concat(/<\//,t.lookahead(t.concat(i,/>/))),contains:[{className:"name",begin:i,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function yaml(e){const t="true false yes no null",i="[\\w#;/?:@&=+$,.~*'()[\\]]+",s={className:"attr",variants:[{begin:"\\w[\\w :\\/.-]*:(?=[ 	]|$)"},{begin:'"\\w[\\w :\\/.-]*":(?=[ 	]|$)'},{begin:"'\\w[\\w :\\/.-]*':(?=[ 	]|$)"}]},c={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},d={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[e.BACKSLASH_ESCAPE,c]},g=e.inherit(d,{variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),r="[0-9]{4}(-[0-9][0-9]){0,2}",y="([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?",E="(\\.[0-9]*)?",w="([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?",k={className:"number",begin:"\\b"+r+y+E+w+"\\b"},S={end:",",endsWithParent:!0,excludeEnd:!0,keywords:t,relevance:0},I={begin:/\{/,end:/\}/,contains:[S],illegal:"\\n",relevance:0},L={begin:"\\[",end:"\\]",contains:[S],illegal:"\\n",relevance:0},D=[s,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+i},{className:"type",begin:"!<"+i+">"},{className:"type",begin:"!"+i},{className:"type",begin:"!!"+i},{className:"meta",begin:"&"+e.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+e.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},e.HASH_COMMENT_MODE,{beginKeywords:t,keywords:{literal:t}},k,{className:"number",begin:e.C_NUMBER_RE+"\\b",relevance:0},I,L,d],O=[...D];return O.pop(),O.push(g),S.contains=O,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:D}}function json(e){const t={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},i={match:/[{}[\],:]/,className:"punctuation",relevance:0},s=["true","false","null"],c={scope:"literal",beginKeywords:s.join(" ")};return{name:"JSON",keywords:{literal:s},contains:[t,i,e.QUOTE_STRING_MODE,c,e.C_NUMBER_MODE,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}function bash(e){const t=e.regex,i={},s={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[i]}]};Object.assign(i,{className:"variable",variants:[{begin:t.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},s]});const c={className:"subst",begin:/\$\(/,end:/\)/,contains:[e.BACKSLASH_ESCAPE]},d={begin:/<<-?\s*(?=\w+)/,starts:{contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},g={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,i,c]};c.contains.push(g);const r={className:"",begin:/\\"/},y={className:"string",begin:/'/,end:/'/},E={begin:/\$\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},e.NUMBER_MODE,i]},w=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],k=e.SHEBANG({binary:`(${w.join("|")})`,relevance:10}),S={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[e.inherit(e.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},I=["if","then","else","elif","fi","for","while","in","do","done","case","esac","function"],L=["true","false"],D={match:/(\/[a-z._-]+)+/},O=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],V=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","type","typeset","ulimit","unalias"],z=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],U=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:I,literal:L,built_in:[...O,...V,"set","shopt",...z,...U]},contains:[k,e.SHEBANG(),S,E,e.HASH_COMMENT_MODE,d,D,g,r,y,i]}}const MODES$2=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z][A-Za-z0-9_-]*/}}),TAGS$2=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],MEDIA_FEATURES$2=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],PSEUDO_CLASSES$2=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],PSEUDO_ELEMENTS$2=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],ATTRIBUTES$2=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse(),PSEUDO_SELECTORS=PSEUDO_CLASSES$2.concat(PSEUDO_ELEMENTS$2);function less(e){const t=MODES$2(e),i=PSEUDO_SELECTORS,s="and or not only",c="[\\w-]+",d="("+c+"|@\\{"+c+"\\})",g=[],r=[],y=function(U){return{className:"string",begin:"~?"+U+".*?"+U}},E=function(U,Z,W){return{className:U,begin:Z,relevance:W}},w={$pattern:/[a-z-]+/,keyword:s,attribute:MEDIA_FEATURES$2.join(" ")},k={begin:"\\(",end:"\\)",contains:r,keywords:w,relevance:0};r.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,y("'"),y('"'),t.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},t.HEXCOLOR,k,E("variable","@@?"+c,10),E("variable","@\\{"+c+"\\}"),E("built_in","~?`[^`]*?`"),{className:"attribute",begin:c+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},t.IMPORTANT,{beginKeywords:"and not"},t.FUNCTION_DISPATCH);const S=r.concat({begin:/\{/,end:/\}/,contains:g}),I={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(r)},L={begin:d+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+ATTRIBUTES$2.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:r}}]},D={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:w,returnEnd:!0,contains:r,relevance:0}},O={className:"variable",variants:[{begin:"@"+c+"\\s*:",relevance:15},{begin:"@"+c}],starts:{end:"[;}]",returnEnd:!0,contains:S}},V={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:d,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,I,E("keyword","all\\b"),E("variable","@\\{"+c+"\\}"),{begin:"\\b("+TAGS$2.join("|")+")\\b",className:"selector-tag"},t.CSS_NUMBER_MODE,E("selector-tag",d,0),E("selector-id","#"+d),E("selector-class","\\."+d,0),E("selector-tag","&",0),t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+PSEUDO_CLASSES$2.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+PSEUDO_ELEMENTS$2.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:S},{begin:"!important"},t.FUNCTION_DISPATCH]},z={begin:c+`:(:)?(${i.join("|")})`,returnBegin:!0,contains:[V]};return g.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,D,O,z,L,V,I,t.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:g}}const MODES$1=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z][A-Za-z0-9_-]*/}}),TAGS$1=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],MEDIA_FEATURES$1=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],PSEUDO_CLASSES$1=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],PSEUDO_ELEMENTS$1=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],ATTRIBUTES$1=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function scss(e){const t=MODES$1(e),i=PSEUDO_ELEMENTS$1,s=PSEUDO_CLASSES$1,c="@[a-z-]+",d="and or not only",r={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,t.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+TAGS$1.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+s.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+i.join("|")+")"},r,{begin:/\(/,end:/\)/,contains:[t.CSS_NUMBER_MODE]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+ATTRIBUTES$1.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[t.BLOCK_COMMENT,r,t.HEXCOLOR,t.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.IMPORTANT,t.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:c,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:d,attribute:MEDIA_FEATURES$1.join(" ")},contains:[{begin:c,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},r,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.HEXCOLOR,t.CSS_NUMBER_MODE]},t.FUNCTION_DISPATCH]}}function rust(e){const t=e.regex,i={className:"title.function.invoke",relevance:0,begin:t.concat(/\b/,/(?!let\b)/,e.IDENT_RE,t.lookahead(/\s*\(/))},s="([ui](8|16|32|64|128|size)|f(32|64))?",c=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","unsafe","unsized","use","virtual","where","while","yield"],d=["true","false","Some","None","Ok","Err"],g=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],r=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:e.IDENT_RE+"!?",type:r,keyword:c,literal:d,built_in:g},illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.COMMENT("/\\*","\\*/",{contains:["self"]}),e.inherit(e.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'\\?(x\w{2}|u\w{4}|U\w{8}|.)'/}]},{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*/},{className:"number",variants:[{begin:"\\b0b([01_]+)"+s},{begin:"\\b0o([0-7_]+)"+s},{begin:"\\b0x([A-Fa-f0-9_]+)"+s},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+s}],relevance:0},{begin:[/fn/,/\s+/,e.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,e.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,e.UNDERSCORE_IDENT_RE,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,e.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,e.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"title.class"}},{begin:e.IDENT_RE+"::",keywords:{keyword:"Self",built_in:g,type:r}},{className:"punctuation",begin:"->"},i]}}var decimalDigits="[0-9](_*[0-9])*",frac=`\\.(${decimalDigits})`,hexDigits="[0-9a-fA-F](_*[0-9a-fA-F])*",NUMERIC={className:"number",variants:[{begin:`(\\b(${decimalDigits})((${frac})|\\.)?|(${frac}))[eE][+-]?(${decimalDigits})[fFdD]?\\b`},{begin:`\\b(${decimalDigits})((${frac})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${frac})[fFdD]?\\b`},{begin:`\\b(${decimalDigits})[fFdD]\\b`},{begin:`\\b0[xX]((${hexDigits})\\.?|(${hexDigits})?\\.(${hexDigits}))[pP][+-]?(${decimalDigits})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${hexDigits})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function recurRegex(e,t,i){return i===-1?"":e.replace(t,s=>recurRegex(e,t,i-1))}function java(e){const t=e.regex,i="[\xC0-\u02B8a-zA-Z_$][\xC0-\u02B8a-zA-Z_$0-9]*",s=i+recurRegex("(?:<"+i+"~~~(?:\\s*,\\s*"+i+"~~~)*>)?",/~~~/g,2),y={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},E={className:"meta",begin:"@"+i,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},w={className:"params",begin:/\(/,end:/\)/,keywords:y,relevance:0,contains:[e.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:y,illegal:/<\/|#/,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[e.BACKSLASH_ESCAPE]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,i],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[t.concat(/(?!else)/,i),/\s+/,i,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,i],className:{1:"keyword",3:"title.class"},contains:[w,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+s+"\\s+)",e.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:y,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:y,relevance:0,contains:[E,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,NUMERIC,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},NUMERIC,E]}}function shell(e){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function nginx(e){const t=e.regex,i={className:"variable",variants:[{begin:/\$\d+/},{begin:/\$\{\w+\}/},{begin:t.concat(/[$@]/,e.UNDERSCORE_IDENT_RE)}]},c={endsWithParent:!0,keywords:{$pattern:/[a-z_]{2,}|\/dev\/poll/,literal:["on","off","yes","no","true","false","none","blocked","debug","info","notice","warn","error","crit","select","break","last","permanent","redirect","kqueue","rtsig","epoll","poll","/dev/poll"]},relevance:0,illegal:"=>",contains:[e.HASH_COMMENT_MODE,{className:"string",contains:[e.BACKSLASH_ESCAPE,i],variants:[{begin:/"/,end:/"/},{begin:/'/,end:/'/}]},{begin:"([a-z]+):/",end:"\\s",endsWithParent:!0,excludeEnd:!0,contains:[i]},{className:"regexp",contains:[e.BACKSLASH_ESCAPE,i],variants:[{begin:"\\s\\^",end:"\\s|\\{|;",returnEnd:!0},{begin:"~\\*?\\s+",end:"\\s|\\{|;",returnEnd:!0},{begin:"\\*(\\.[a-z\\-]+)+"},{begin:"([a-z\\-]+\\.)+\\*"}]},{className:"number",begin:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{className:"number",begin:"\\b\\d+[kKmMgGdshdwy]?\\b",relevance:0},i]};return{name:"Nginx config",aliases:["nginxconf"],contains:[e.HASH_COMMENT_MODE,{beginKeywords:"upstream location",end:/;|\{/,contains:c.contains,keywords:{section:"upstream location"}},{className:"section",begin:t.concat(e.UNDERSCORE_IDENT_RE+t.lookahead(/\s+\{/)),relevance:0},{begin:t.lookahead(e.UNDERSCORE_IDENT_RE+"\\s"),end:";|\\{",contains:[{className:"attribute",begin:e.UNDERSCORE_IDENT_RE,starts:c}],relevance:0}],illegal:"[^\\s\\}\\{]"}}const MODES=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z][A-Za-z0-9_-]*/}}),TAGS=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],MEDIA_FEATURES=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],PSEUDO_CLASSES=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],PSEUDO_ELEMENTS=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],ATTRIBUTES=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function stylus(e){const t=MODES(e),i="and or not only",s={className:"variable",begin:"\\$"+e.IDENT_RE},c=["charset","css","debug","extend","font-face","for","import","include","keyframes","media","mixin","page","warn","while"],d="(?=[.\\s\\n[:,(])";return{name:"Stylus",aliases:["styl"],case_insensitive:!1,keywords:"if else for in",illegal:"("+["\\?","(\\bReturn\\b)","(\\bEnd\\b)","(\\bend\\b)","(\\bdef\\b)",";","#\\s","\\*\\s","===\\s","\\|","%"].join("|")+")",contains:[e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,t.HEXCOLOR,{begin:"\\.[a-zA-Z][a-zA-Z0-9_-]*"+d,className:"selector-class"},{begin:"#[a-zA-Z][a-zA-Z0-9_-]*"+d,className:"selector-id"},{begin:"\\b("+TAGS.join("|")+")"+d,className:"selector-tag"},{className:"selector-pseudo",begin:"&?:("+PSEUDO_CLASSES.join("|")+")"+d},{className:"selector-pseudo",begin:"&?:(:)?("+PSEUDO_ELEMENTS.join("|")+")"+d},t.ATTRIBUTE_SELECTOR_MODE,{className:"keyword",begin:/@media/,starts:{end:/[{;}]/,keywords:{$pattern:/[a-z-]+/,keyword:i,attribute:MEDIA_FEATURES.join(" ")},contains:[t.CSS_NUMBER_MODE]}},{className:"keyword",begin:"@((-(o|moz|ms|webkit)-)?("+c.join("|")+"))\\b"},s,t.CSS_NUMBER_MODE,{className:"function",begin:"^[a-zA-Z][a-zA-Z0-9_-]*\\(.*\\)",illegal:"[\\n]",returnBegin:!0,contains:[{className:"title",begin:"\\b[a-zA-Z][a-zA-Z0-9_-]*"},{className:"params",begin:/\(/,end:/\)/,contains:[t.HEXCOLOR,s,e.APOS_STRING_MODE,t.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE]}]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+ATTRIBUTES.join("|")+")\\b",starts:{end:/;|$/,contains:[t.HEXCOLOR,s,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,t.CSS_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,t.IMPORTANT,t.FUNCTION_DISPATCH],illegal:/\./,relevance:0}},t.FUNCTION_DISPATCH]}}function python(e){const t=e.regex,i=/[\p{XID_Start}_]\p{XID_Continue}*/u,s=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],r={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:s,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},y={className:"meta",begin:/^(>>>|\.\.\.) /},E={className:"subst",begin:/\{/,end:/\}/,keywords:r,illegal:/#/},w={begin:/\{\{/,relevance:0},k={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,y],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,y],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,y,w,E]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,y,w,E]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[e.BACKSLASH_ESCAPE,w,E]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,w,E]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},S="[0-9](_?[0-9])*",I=`(\\b(${S}))?\\.(${S})|\\b(${S})\\.`,L=`\\b|${s.join("|")}`,D={className:"number",relevance:0,variants:[{begin:`(\\b(${S})|(${I}))[eE][+-]?(${S})[jJ]?(?=${L})`},{begin:`(${I})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${L})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${L})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${L})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${L})`},{begin:`\\b(${S})[jJ](?=${L})`}]},O={className:"comment",begin:t.lookahead(/# type:/),end:/$/,keywords:r,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},V={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:r,contains:["self",y,D,k,e.HASH_COMMENT_MODE]}]};return E.contains=[k,D,y],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:r,illegal:/(<\/|->|\?)|=>/,contains:[y,D,{begin:/\bself\b/},{beginKeywords:"if",relevance:0},k,O,e.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,i],scope:{1:"keyword",3:"title.function"},contains:[V]},{variants:[{match:[/\bclass/,/\s+/,i,/\s*/,/\(\s*/,i,/\s*\)/]},{match:[/\bclass/,/\s+/,i]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[D,V,k]}]}}const IDENT_RE$1="[A-Za-z$_][0-9A-Za-z$_]*",KEYWORDS$1=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],LITERALS$1=["true","false","null","undefined","NaN","Infinity"],TYPES$1=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],ERROR_TYPES$1=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],BUILT_IN_GLOBALS$1=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],BUILT_IN_VARIABLES$1=["arguments","this","super","console","window","document","localStorage","module","global"],BUILT_INS$1=[].concat(BUILT_IN_GLOBALS$1,TYPES$1,ERROR_TYPES$1);function javascript$1(e){const t=e.regex,i=(ze,{after:Ke})=>{const ut="</"+ze[0].slice(1);return ze.input.indexOf(ut,Ke)!==-1},s=IDENT_RE$1,c={begin:"<>",end:"</>"},d=/<[A-Za-z0-9\\._:-]+\s*\/>/,g={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(ze,Ke)=>{const ut=ze[0].length+ze.index,Nt=ze.input[ut];if(Nt==="<"||Nt===","){Ke.ignoreMatch();return}Nt===">"&&(i(ze,{after:ut})||Ke.ignoreMatch());let an;if((an=ze.input.substring(ut).match(/^\s+extends\s+/))&&an.index===0){Ke.ignoreMatch();return}}},r={$pattern:IDENT_RE$1,keyword:KEYWORDS$1,literal:LITERALS$1,built_in:BUILT_INS$1,"variable.language":BUILT_IN_VARIABLES$1},y="[0-9](_?[0-9])*",E=`\\.(${y})`,w="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",k={className:"number",variants:[{begin:`(\\b(${w})((${E})|\\.)?|(${E}))[eE][+-]?(${y})\\b`},{begin:`\\b(${w})\\b((${E})\\b|\\.)?|(${E})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},S={className:"subst",begin:"\\$\\{",end:"\\}",keywords:r,contains:[]},I={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,S],subLanguage:"xml"}},L={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,S],subLanguage:"css"}},D={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,S]},O=e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:s+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),V={className:"comment",variants:[O,e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},z=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,I,L,D,k];S.contains=z.concat({begin:/\{/,end:/\}/,keywords:r,contains:["self"].concat(z)});const U=[].concat(V,S.contains),Z=U.concat([{begin:/\(/,end:/\)/,keywords:r,contains:["self"].concat(U)}]),W={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:r,contains:Z},ne={variants:[{match:[/class/,/\s+/,s,/\s+/,/extends/,/\s+/,t.concat(s,"(",t.concat(/\./,s),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,s],scope:{1:"keyword",3:"title.class"}}]},re={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...TYPES$1,...ERROR_TYPES$1]}},ie={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},Ce={variants:[{match:[/function/,/\s+/,s,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[W],illegal:/%/},we={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function fe(ze){return t.concat("(?!",ze.join("|"),")")}const de={match:t.concat(/\b/,fe([...BUILT_IN_GLOBALS$1,"super"]),s,t.lookahead(/\(/)),className:"title.function",relevance:0},Le={begin:t.concat(/\./,t.lookahead(t.concat(s,/(?![0-9A-Za-z$_(])/))),end:s,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},Ge={match:[/get|set/,/\s+/,s,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},W]},wt="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",Te={match:[/const|var|let/,/\s+/,s,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(wt)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[W]};return{name:"Javascript",aliases:["js","jsx","mjs","cjs"],keywords:r,exports:{PARAMS_CONTAINS:Z,CLASS_REFERENCE:re},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),ie,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,I,L,D,V,k,re,{className:"attr",begin:s+t.lookahead(":"),relevance:0},Te,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[V,e.REGEXP_MODE,{className:"function",begin:wt,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:r,contains:Z}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:c.begin,end:c.end},{match:d},{begin:g.begin,"on:begin":g.isTrulyOpeningTag,end:g.end}],subLanguage:"xml",contains:[{begin:g.begin,end:g.end,skip:!0,contains:["self"]}]}]},Ce,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[W,e.inherit(e.TITLE_MODE,{begin:s,className:"title.function"})]},{match:/\.\.\./,relevance:0},Le,{match:"\\$"+s,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[W]},de,we,ne,Ge,{match:/\$[(.]/}]}}const IDENT_RE="[A-Za-z$_][0-9A-Za-z$_]*",KEYWORDS=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],LITERALS=["true","false","null","undefined","NaN","Infinity"],TYPES=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],ERROR_TYPES=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],BUILT_IN_GLOBALS=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],BUILT_IN_VARIABLES=["arguments","this","super","console","window","document","localStorage","module","global"],BUILT_INS=[].concat(BUILT_IN_GLOBALS,TYPES,ERROR_TYPES);function javascript(e){const t=e.regex,i=(ze,{after:Ke})=>{const ut="</"+ze[0].slice(1);return ze.input.indexOf(ut,Ke)!==-1},s=IDENT_RE,c={begin:"<>",end:"</>"},d=/<[A-Za-z0-9\\._:-]+\s*\/>/,g={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(ze,Ke)=>{const ut=ze[0].length+ze.index,Nt=ze.input[ut];if(Nt==="<"||Nt===","){Ke.ignoreMatch();return}Nt===">"&&(i(ze,{after:ut})||Ke.ignoreMatch());let an;if((an=ze.input.substring(ut).match(/^\s+extends\s+/))&&an.index===0){Ke.ignoreMatch();return}}},r={$pattern:IDENT_RE,keyword:KEYWORDS,literal:LITERALS,built_in:BUILT_INS,"variable.language":BUILT_IN_VARIABLES},y="[0-9](_?[0-9])*",E=`\\.(${y})`,w="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",k={className:"number",variants:[{begin:`(\\b(${w})((${E})|\\.)?|(${E}))[eE][+-]?(${y})\\b`},{begin:`\\b(${w})\\b((${E})\\b|\\.)?|(${E})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},S={className:"subst",begin:"\\$\\{",end:"\\}",keywords:r,contains:[]},I={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,S],subLanguage:"xml"}},L={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,S],subLanguage:"css"}},D={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,S]},O=e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:s+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),V={className:"comment",variants:[O,e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},z=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,I,L,D,k];S.contains=z.concat({begin:/\{/,end:/\}/,keywords:r,contains:["self"].concat(z)});const U=[].concat(V,S.contains),Z=U.concat([{begin:/\(/,end:/\)/,keywords:r,contains:["self"].concat(U)}]),W={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:r,contains:Z},ne={variants:[{match:[/class/,/\s+/,s,/\s+/,/extends/,/\s+/,t.concat(s,"(",t.concat(/\./,s),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,s],scope:{1:"keyword",3:"title.class"}}]},re={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...TYPES,...ERROR_TYPES]}},ie={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},Ce={variants:[{match:[/function/,/\s+/,s,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[W],illegal:/%/},we={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function fe(ze){return t.concat("(?!",ze.join("|"),")")}const de={match:t.concat(/\b/,fe([...BUILT_IN_GLOBALS,"super"]),s,t.lookahead(/\(/)),className:"title.function",relevance:0},Le={begin:t.concat(/\./,t.lookahead(t.concat(s,/(?![0-9A-Za-z$_(])/))),end:s,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},Ge={match:[/get|set/,/\s+/,s,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},W]},wt="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",Te={match:[/const|var|let/,/\s+/,s,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(wt)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[W]};return{name:"Javascript",aliases:["js","jsx","mjs","cjs"],keywords:r,exports:{PARAMS_CONTAINS:Z,CLASS_REFERENCE:re},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),ie,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,I,L,D,V,k,re,{className:"attr",begin:s+t.lookahead(":"),relevance:0},Te,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[V,e.REGEXP_MODE,{className:"function",begin:wt,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:r,contains:Z}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:c.begin,end:c.end},{match:d},{begin:g.begin,"on:begin":g.isTrulyOpeningTag,end:g.end}],subLanguage:"xml",contains:[{begin:g.begin,end:g.end,skip:!0,contains:["self"]}]}]},Ce,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[W,e.inherit(e.TITLE_MODE,{begin:s,className:"title.function"})]},{match:/\.\.\./,relevance:0},Le,{match:"\\$"+s,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[W]},de,we,ne,Ge,{match:/\$[(.]/}]}}function typescript(e){const t=javascript(e),i=IDENT_RE,s=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],c={beginKeywords:"namespace",end:/\{/,excludeEnd:!0,contains:[t.exports.CLASS_REFERENCE]},d={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:s},contains:[t.exports.CLASS_REFERENCE]},g={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},r=["type","namespace","interface","public","private","protected","implements","declare","abstract","readonly","enum","override"],y={$pattern:IDENT_RE,keyword:KEYWORDS.concat(r),literal:LITERALS,built_in:BUILT_INS.concat(s),"variable.language":BUILT_IN_VARIABLES},E={className:"meta",begin:"@"+i},w=(S,I,L)=>{const D=S.contains.findIndex(O=>O.label===I);if(D===-1)throw new Error("can not find mode to replace");S.contains.splice(D,1,L)};Object.assign(t.keywords,y),t.exports.PARAMS_CONTAINS.push(E),t.contains=t.contains.concat([E,c,d]),w(t,"shebang",e.SHEBANG()),w(t,"use_strict",g);const k=t.contains.find(S=>S.label==="func.def");return k.relevance=0,Object.assign(t,{name:"TypeScript",aliases:["ts","tsx"]}),t}const languages={go,css:css$1,sql,php,xml,yaml,json,bash,less,scss,rust,java,shell,nginx,stylus,python,javascript:javascript$1,typescript};Object.keys(languages).forEach(e=>HighlightJS.registerLanguage(e,languages[e]));function getDefaults(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let defaults$3=getDefaults();function changeDefaults(e){defaults$3=e}const escapeTest=/[&<>"']/,escapeReplace=/[&<>"']/g,escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g,escapeReplacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},getEscapeReplacement=e=>escapeReplacements[e];function escape$1(e,t){if(t){if(escapeTest.test(e))return e.replace(escapeReplace,getEscapeReplacement)}else if(escapeTestNoEncode.test(e))return e.replace(escapeReplaceNoEncode,getEscapeReplacement);return e}const unescapeTest=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function unescape$1(e){return e.replace(unescapeTest,(t,i)=>(i=i.toLowerCase(),i==="colon"?":":i.charAt(0)==="#"?i.charAt(1)==="x"?String.fromCharCode(parseInt(i.substring(2),16)):String.fromCharCode(+i.substring(1)):""))}const caret=/(^|[^\[])\^/g;function edit(e,t){e=typeof e=="string"?e:e.source,t=t||"";const i={replace:(s,c)=>(c=c.source||c,c=c.replace(caret,"$1"),e=e.replace(s,c),i),getRegex:()=>new RegExp(e,t)};return i}const nonWordAndColonTest=/[^\w:]/g,originIndependentUrl=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function cleanUrl(e,t,i){if(e){let s;try{s=decodeURIComponent(unescape$1(i)).replace(nonWordAndColonTest,"").toLowerCase()}catch{return null}if(s.indexOf("javascript:")===0||s.indexOf("vbscript:")===0||s.indexOf("data:")===0)return null}t&&!originIndependentUrl.test(i)&&(i=resolveUrl(t,i));try{i=encodeURI(i).replace(/%25/g,"%")}catch{return null}return i}const baseUrls={},justDomain=/^[^:]+:\/*[^/]*$/,protocol=/^([^:]+:)[\s\S]*$/,domain=/^([^:]+:\/*[^/]*)[\s\S]*$/;function resolveUrl(e,t){baseUrls[" "+e]||(justDomain.test(e)?baseUrls[" "+e]=e+"/":baseUrls[" "+e]=rtrim(e,"/",!0)),e=baseUrls[" "+e];const i=e.indexOf(":")===-1;return t.substring(0,2)==="//"?i?t:e.replace(protocol,"$1")+t:t.charAt(0)==="/"?i?t:e.replace(domain,"$1")+t:e+t}const noopTest={exec:function(){}};function merge$1(e){let t=1,i,s;for(;t<arguments.length;t++){i=arguments[t];for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e}function splitCells(e,t){const i=e.replace(/\|/g,(d,g,r)=>{let y=!1,E=g;for(;--E>=0&&r[E]==="\\";)y=!y;return y?"|":" |"}),s=i.split(/ \|/);let c=0;if(s[0].trim()||s.shift(),s.length>0&&!s[s.length-1].trim()&&s.pop(),s.length>t)s.splice(t);else for(;s.length<t;)s.push("");for(;c<s.length;c++)s[c]=s[c].trim().replace(/\\\|/g,"|");return s}function rtrim(e,t,i){const s=e.length;if(s===0)return"";let c=0;for(;c<s;){const d=e.charAt(s-c-1);if(d===t&&!i)c++;else if(d!==t&&i)c++;else break}return e.slice(0,s-c)}function findClosingBracket(e,t){if(e.indexOf(t[1])===-1)return-1;const i=e.length;let s=0,c=0;for(;c<i;c++)if(e[c]==="\\")c++;else if(e[c]===t[0])s++;else if(e[c]===t[1]&&(s--,s<0))return c;return-1}function checkSanitizeDeprecation(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function repeatString(e,t){if(t<1)return"";let i="";for(;t>1;)t&1&&(i+=e),t>>=1,e+=e;return i+e}function outputLink(e,t,i,s){const c=t.href,d=t.title?escape$1(t.title):null,g=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){s.state.inLink=!0;const r={type:"link",raw:i,href:c,title:d,text:g,tokens:s.inlineTokens(g,[])};return s.state.inLink=!1,r}return{type:"image",raw:i,href:c,title:d,text:escape$1(g)}}function indentCodeCompensation(e,t){const i=e.match(/^(\s+)(?:```)/);if(i===null)return t;const s=i[1];return t.split(`
`).map(c=>{const d=c.match(/^\s+/);if(d===null)return c;const[g]=d;return g.length>=s.length?c.slice(s.length):c}).join(`
`)}class Tokenizer{constructor(t){this.options=t||defaults$3}space(t){const i=this.rules.block.newline.exec(t);if(i&&i[0].length>0)return{type:"space",raw:i[0]}}code(t){const i=this.rules.block.code.exec(t);if(i){const s=i[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:i[0],codeBlockStyle:"indented",text:this.options.pedantic?s:rtrim(s,`
`)}}}fences(t){const i=this.rules.block.fences.exec(t);if(i){const s=i[0],c=indentCodeCompensation(s,i[3]||"");return{type:"code",raw:s,lang:i[2]?i[2].trim():i[2],text:c}}}heading(t){const i=this.rules.block.heading.exec(t);if(i){let s=i[2].trim();if(/#$/.test(s)){const d=rtrim(s,"#");(this.options.pedantic||!d||/ $/.test(d))&&(s=d.trim())}const c={type:"heading",raw:i[0],depth:i[1].length,text:s,tokens:[]};return this.lexer.inline(c.text,c.tokens),c}}hr(t){const i=this.rules.block.hr.exec(t);if(i)return{type:"hr",raw:i[0]}}blockquote(t){const i=this.rules.block.blockquote.exec(t);if(i){const s=i[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:i[0],tokens:this.lexer.blockTokens(s,[]),text:s}}}list(t){let i=this.rules.block.list.exec(t);if(i){let s,c,d,g,r,y,E,w,k,S,I,L,D=i[1].trim();const O=D.length>1,V={type:"list",raw:"",ordered:O,start:O?+D.slice(0,-1):"",loose:!1,items:[]};D=O?`\\d{1,9}\\${D.slice(-1)}`:`\\${D}`,this.options.pedantic&&(D=O?D:"[*+-]");const z=new RegExp(`^( {0,3}${D})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;t&&(L=!1,!(!(i=z.exec(t))||this.rules.block.hr.test(t)));){if(s=i[0],t=t.substring(s.length),w=i[2].split(`
`,1)[0],k=t.split(`
`,1)[0],this.options.pedantic?(g=2,I=w.trimLeft()):(g=i[2].search(/[^ ]/),g=g>4?1:g,I=w.slice(g),g+=i[1].length),y=!1,!w&&/^ *$/.test(k)&&(s+=k+`
`,t=t.substring(k.length+1),L=!0),!L){const Z=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))`),W=new RegExp(`^ {0,${Math.min(3,g-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),ne=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:\`\`\`|~~~)`),re=new RegExp(`^ {0,${Math.min(3,g-1)}}#`);for(;t&&(S=t.split(`
`,1)[0],w=S,this.options.pedantic&&(w=w.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(ne.test(w)||re.test(w)||Z.test(w)||W.test(t)));){if(w.search(/[^ ]/)>=g||!w.trim())I+=`
`+w.slice(g);else if(!y)I+=`
`+w;else break;!y&&!w.trim()&&(y=!0),s+=S+`
`,t=t.substring(S.length+1)}}V.loose||(E?V.loose=!0:/\n *\n *$/.test(s)&&(E=!0)),this.options.gfm&&(c=/^\[[ xX]\] /.exec(I),c&&(d=c[0]!=="[ ] ",I=I.replace(/^\[[ xX]\] +/,""))),V.items.push({type:"list_item",raw:s,task:!!c,checked:d,loose:!1,text:I}),V.raw+=s}V.items[V.items.length-1].raw=s.trimRight(),V.items[V.items.length-1].text=I.trimRight(),V.raw=V.raw.trimRight();const U=V.items.length;for(r=0;r<U;r++){this.lexer.state.top=!1,V.items[r].tokens=this.lexer.blockTokens(V.items[r].text,[]);const Z=V.items[r].tokens.filter(ne=>ne.type==="space"),W=Z.every(ne=>{const re=ne.raw.split("");let ie=0;for(const Ce of re)if(Ce===`
`&&(ie+=1),ie>1)return!0;return!1});!V.loose&&Z.length&&W&&(V.loose=!0,V.items[r].loose=!0)}return V}}html(t){const i=this.rules.block.html.exec(t);if(i){const s={type:"html",raw:i[0],pre:!this.options.sanitizer&&(i[1]==="pre"||i[1]==="script"||i[1]==="style"),text:i[0]};return this.options.sanitize&&(s.type="paragraph",s.text=this.options.sanitizer?this.options.sanitizer(i[0]):escape$1(i[0]),s.tokens=[],this.lexer.inline(s.text,s.tokens)),s}}def(t){const i=this.rules.block.def.exec(t);if(i){i[3]&&(i[3]=i[3].substring(1,i[3].length-1));const s=i[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:s,raw:i[0],href:i[2],title:i[3]}}}table(t){const i=this.rules.block.table.exec(t);if(i){const s={type:"table",header:splitCells(i[1]).map(c=>({text:c})),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:i[3]&&i[3].trim()?i[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(s.header.length===s.align.length){s.raw=i[0];let c=s.align.length,d,g,r,y;for(d=0;d<c;d++)/^ *-+: *$/.test(s.align[d])?s.align[d]="right":/^ *:-+: *$/.test(s.align[d])?s.align[d]="center":/^ *:-+ *$/.test(s.align[d])?s.align[d]="left":s.align[d]=null;for(c=s.rows.length,d=0;d<c;d++)s.rows[d]=splitCells(s.rows[d],s.header.length).map(E=>({text:E}));for(c=s.header.length,g=0;g<c;g++)s.header[g].tokens=[],this.lexer.inline(s.header[g].text,s.header[g].tokens);for(c=s.rows.length,g=0;g<c;g++)for(y=s.rows[g],r=0;r<y.length;r++)y[r].tokens=[],this.lexer.inline(y[r].text,y[r].tokens);return s}}}lheading(t){const i=this.rules.block.lheading.exec(t);if(i){const s={type:"heading",raw:i[0],depth:i[2].charAt(0)==="="?1:2,text:i[1],tokens:[]};return this.lexer.inline(s.text,s.tokens),s}}paragraph(t){const i=this.rules.block.paragraph.exec(t);if(i){const s={type:"paragraph",raw:i[0],text:i[1].charAt(i[1].length-1)===`
`?i[1].slice(0,-1):i[1],tokens:[]};return this.lexer.inline(s.text,s.tokens),s}}text(t){const i=this.rules.block.text.exec(t);if(i){const s={type:"text",raw:i[0],text:i[0],tokens:[]};return this.lexer.inline(s.text,s.tokens),s}}escape(t){const i=this.rules.inline.escape.exec(t);if(i)return{type:"escape",raw:i[0],text:escape$1(i[1])}}tag(t){const i=this.rules.inline.tag.exec(t);if(i)return!this.lexer.state.inLink&&/^<a /i.test(i[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(i[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(i[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(i[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:i[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):escape$1(i[0]):i[0]}}link(t){const i=this.rules.inline.link.exec(t);if(i){const s=i[2].trim();if(!this.options.pedantic&&/^</.test(s)){if(!/>$/.test(s))return;const g=rtrim(s.slice(0,-1),"\\");if((s.length-g.length)%2===0)return}else{const g=findClosingBracket(i[2],"()");if(g>-1){const y=(i[0].indexOf("!")===0?5:4)+i[1].length+g;i[2]=i[2].substring(0,g),i[0]=i[0].substring(0,y).trim(),i[3]=""}}let c=i[2],d="";if(this.options.pedantic){const g=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(c);g&&(c=g[1],d=g[3])}else d=i[3]?i[3].slice(1,-1):"";return c=c.trim(),/^</.test(c)&&(this.options.pedantic&&!/>$/.test(s)?c=c.slice(1):c=c.slice(1,-1)),outputLink(i,{href:c&&c.replace(this.rules.inline._escapes,"$1"),title:d&&d.replace(this.rules.inline._escapes,"$1")},i[0],this.lexer)}}reflink(t,i){let s;if((s=this.rules.inline.reflink.exec(t))||(s=this.rules.inline.nolink.exec(t))){let c=(s[2]||s[1]).replace(/\s+/g," ");if(c=i[c.toLowerCase()],!c||!c.href){const d=s[0].charAt(0);return{type:"text",raw:d,text:d}}return outputLink(s,c,s[0],this.lexer)}}emStrong(t,i,s=""){let c=this.rules.inline.emStrong.lDelim.exec(t);if(!c||c[3]&&s.match(/[\p{L}\p{N}]/u))return;const d=c[1]||c[2]||"";if(!d||d&&(s===""||this.rules.inline.punctuation.exec(s))){const g=c[0].length-1;let r,y,E=g,w=0;const k=c[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(k.lastIndex=0,i=i.slice(-1*t.length+g);(c=k.exec(i))!=null;){if(r=c[1]||c[2]||c[3]||c[4]||c[5]||c[6],!r)continue;if(y=r.length,c[3]||c[4]){E+=y;continue}else if((c[5]||c[6])&&g%3&&!((g+y)%3)){w+=y;continue}if(E-=y,E>0)continue;if(y=Math.min(y,y+E+w),Math.min(g,y)%2){const I=t.slice(1,g+c.index+y);return{type:"em",raw:t.slice(0,g+c.index+y+1),text:I,tokens:this.lexer.inlineTokens(I,[])}}const S=t.slice(2,g+c.index+y-1);return{type:"strong",raw:t.slice(0,g+c.index+y+1),text:S,tokens:this.lexer.inlineTokens(S,[])}}}}codespan(t){const i=this.rules.inline.code.exec(t);if(i){let s=i[2].replace(/\n/g," ");const c=/[^ ]/.test(s),d=/^ /.test(s)&&/ $/.test(s);return c&&d&&(s=s.substring(1,s.length-1)),s=escape$1(s,!0),{type:"codespan",raw:i[0],text:s}}}br(t){const i=this.rules.inline.br.exec(t);if(i)return{type:"br",raw:i[0]}}del(t){const i=this.rules.inline.del.exec(t);if(i)return{type:"del",raw:i[0],text:i[2],tokens:this.lexer.inlineTokens(i[2],[])}}autolink(t,i){const s=this.rules.inline.autolink.exec(t);if(s){let c,d;return s[2]==="@"?(c=escape$1(this.options.mangle?i(s[1]):s[1]),d="mailto:"+c):(c=escape$1(s[1]),d=c),{type:"link",raw:s[0],text:c,href:d,tokens:[{type:"text",raw:c,text:c}]}}}url(t,i){let s;if(s=this.rules.inline.url.exec(t)){let c,d;if(s[2]==="@")c=escape$1(this.options.mangle?i(s[0]):s[0]),d="mailto:"+c;else{let g;do g=s[0],s[0]=this.rules.inline._backpedal.exec(s[0])[0];while(g!==s[0]);c=escape$1(s[0]),s[1]==="www."?d="http://"+c:d=c}return{type:"link",raw:s[0],text:c,href:d,tokens:[{type:"text",raw:c,text:c}]}}}inlineText(t,i){const s=this.rules.inline.text.exec(t);if(s){let c;return this.lexer.state.inRawBlock?c=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):escape$1(s[0]):s[0]:c=escape$1(this.options.smartypants?i(s[0]):s[0]),{type:"text",raw:s[0],text:c}}}}const block={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:noopTest,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};block._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;block._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;block.def=edit(block.def).replace("label",block._label).replace("title",block._title).getRegex();block.bullet=/(?:[*+-]|\d{1,9}[.)])/;block.listItemStart=edit(/^( *)(bull) */).replace("bull",block.bullet).getRegex();block.list=edit(block.list).replace(/bull/g,block.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+block.def.source+")").getRegex();block._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";block._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;block.html=edit(block.html,"i").replace("comment",block._comment).replace("tag",block._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();block.paragraph=edit(block._paragraph).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.blockquote=edit(block.blockquote).replace("paragraph",block.paragraph).getRegex();block.normal=merge$1({},block);block.gfm=merge$1({},block.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});block.gfm.table=edit(block.gfm.table).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.gfm.paragraph=edit(block._paragraph).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",block.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.pedantic=merge$1({},block.normal,{html:edit(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",block._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:noopTest,paragraph:edit(block.normal._paragraph).replace("hr",block.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",block.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const inline={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:noopTest,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:noopTest,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};inline._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";inline.punctuation=edit(inline.punctuation).replace(/punctuation/g,inline._punctuation).getRegex();inline.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;inline.escapedEmSt=/\\\*|\\_/g;inline._comment=edit(block._comment).replace("(?:-->|$)","-->").getRegex();inline.emStrong.lDelim=edit(inline.emStrong.lDelim).replace(/punct/g,inline._punctuation).getRegex();inline.emStrong.rDelimAst=edit(inline.emStrong.rDelimAst,"g").replace(/punct/g,inline._punctuation).getRegex();inline.emStrong.rDelimUnd=edit(inline.emStrong.rDelimUnd,"g").replace(/punct/g,inline._punctuation).getRegex();inline._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;inline._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;inline._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;inline.autolink=edit(inline.autolink).replace("scheme",inline._scheme).replace("email",inline._email).getRegex();inline._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;inline.tag=edit(inline.tag).replace("comment",inline._comment).replace("attribute",inline._attribute).getRegex();inline._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;inline._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;inline._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;inline.link=edit(inline.link).replace("label",inline._label).replace("href",inline._href).replace("title",inline._title).getRegex();inline.reflink=edit(inline.reflink).replace("label",inline._label).replace("ref",block._label).getRegex();inline.nolink=edit(inline.nolink).replace("ref",block._label).getRegex();inline.reflinkSearch=edit(inline.reflinkSearch,"g").replace("reflink",inline.reflink).replace("nolink",inline.nolink).getRegex();inline.normal=merge$1({},inline);inline.pedantic=merge$1({},inline.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:edit(/^!?\[(label)\]\((.*?)\)/).replace("label",inline._label).getRegex(),reflink:edit(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",inline._label).getRegex()});inline.gfm=merge$1({},inline.normal,{escape:edit(inline.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});inline.gfm.url=edit(inline.gfm.url,"i").replace("email",inline.gfm._extended_email).getRegex();inline.breaks=merge$1({},inline.gfm,{br:edit(inline.br).replace("{2,}","*").getRegex(),text:edit(inline.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function smartypants(e){return e.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function mangle(e){let t="",i,s;const c=e.length;for(i=0;i<c;i++)s=e.charCodeAt(i),Math.random()>.5&&(s="x"+s.toString(16)),t+="&#"+s+";";return t}class Lexer{constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||defaults$3,this.options.tokenizer=this.options.tokenizer||new Tokenizer,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const i={block:block.normal,inline:inline.normal};this.options.pedantic?(i.block=block.pedantic,i.inline=inline.pedantic):this.options.gfm&&(i.block=block.gfm,this.options.breaks?i.inline=inline.breaks:i.inline=inline.gfm),this.tokenizer.rules=i}static get rules(){return{block,inline}}static lex(t,i){return new Lexer(i).lex(t)}static lexInline(t,i){return new Lexer(i).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);let i;for(;i=this.inlineQueue.shift();)this.inlineTokens(i.src,i.tokens);return this.tokens}blockTokens(t,i=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(r,y,E)=>y+"    ".repeat(E.length));let s,c,d,g;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(r=>(s=r.call({lexer:this},t,i))?(t=t.substring(s.raw.length),i.push(s),!0):!1))){if(s=this.tokenizer.space(t)){t=t.substring(s.raw.length),s.raw.length===1&&i.length>0?i[i.length-1].raw+=`
`:i.push(s);continue}if(s=this.tokenizer.code(t)){t=t.substring(s.raw.length),c=i[i.length-1],c&&(c.type==="paragraph"||c.type==="text")?(c.raw+=`
`+s.raw,c.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=c.text):i.push(s);continue}if(s=this.tokenizer.fences(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.heading(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.hr(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.blockquote(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.list(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.html(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.def(t)){t=t.substring(s.raw.length),c=i[i.length-1],c&&(c.type==="paragraph"||c.type==="text")?(c.raw+=`
`+s.raw,c.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=c.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.lheading(t)){t=t.substring(s.raw.length),i.push(s);continue}if(d=t,this.options.extensions&&this.options.extensions.startBlock){let r=1/0;const y=t.slice(1);let E;this.options.extensions.startBlock.forEach(function(w){E=w.call({lexer:this},y),typeof E=="number"&&E>=0&&(r=Math.min(r,E))}),r<1/0&&r>=0&&(d=t.substring(0,r+1))}if(this.state.top&&(s=this.tokenizer.paragraph(d))){c=i[i.length-1],g&&c.type==="paragraph"?(c.raw+=`
`+s.raw,c.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=c.text):i.push(s),g=d.length!==t.length,t=t.substring(s.raw.length);continue}if(s=this.tokenizer.text(t)){t=t.substring(s.raw.length),c=i[i.length-1],c&&c.type==="text"?(c.raw+=`
`+s.raw,c.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=c.text):i.push(s);continue}if(t){const r="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(r);break}else throw new Error(r)}}return this.state.top=!0,i}inline(t,i=[]){return this.inlineQueue.push({src:t,tokens:i}),i}inlineTokens(t,i=[]){let s,c,d,g=t,r,y,E;if(this.tokens.links){const w=Object.keys(this.tokens.links);if(w.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(g))!=null;)w.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(g=g.slice(0,r.index)+"["+repeatString("a",r[0].length-2)+"]"+g.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.blockSkip.exec(g))!=null;)g=g.slice(0,r.index)+"["+repeatString("a",r[0].length-2)+"]"+g.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(r=this.tokenizer.rules.inline.escapedEmSt.exec(g))!=null;)g=g.slice(0,r.index)+"++"+g.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;t;)if(y||(E=""),y=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(w=>(s=w.call({lexer:this},t,i))?(t=t.substring(s.raw.length),i.push(s),!0):!1))){if(s=this.tokenizer.escape(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.tag(t)){t=t.substring(s.raw.length),c=i[i.length-1],c&&s.type==="text"&&c.type==="text"?(c.raw+=s.raw,c.text+=s.text):i.push(s);continue}if(s=this.tokenizer.link(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(s.raw.length),c=i[i.length-1],c&&s.type==="text"&&c.type==="text"?(c.raw+=s.raw,c.text+=s.text):i.push(s);continue}if(s=this.tokenizer.emStrong(t,g,E)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.codespan(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.br(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.del(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.autolink(t,mangle)){t=t.substring(s.raw.length),i.push(s);continue}if(!this.state.inLink&&(s=this.tokenizer.url(t,mangle))){t=t.substring(s.raw.length),i.push(s);continue}if(d=t,this.options.extensions&&this.options.extensions.startInline){let w=1/0;const k=t.slice(1);let S;this.options.extensions.startInline.forEach(function(I){S=I.call({lexer:this},k),typeof S=="number"&&S>=0&&(w=Math.min(w,S))}),w<1/0&&w>=0&&(d=t.substring(0,w+1))}if(s=this.tokenizer.inlineText(d,smartypants)){t=t.substring(s.raw.length),s.raw.slice(-1)!=="_"&&(E=s.raw.slice(-1)),y=!0,c=i[i.length-1],c&&c.type==="text"?(c.raw+=s.raw,c.text+=s.text):i.push(s);continue}if(t){const w="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(w);break}else throw new Error(w)}}return i}}class Renderer{constructor(t){this.options=t||defaults$3}code(t,i,s){const c=(i||"").match(/\S*/)[0];if(this.options.highlight){const d=this.options.highlight(t,c);d!=null&&d!==t&&(s=!0,t=d)}return t=t.replace(/\n$/,"")+`
`,c?'<pre><code class="'+this.options.langPrefix+escape$1(c,!0)+'">'+(s?t:escape$1(t,!0))+`</code></pre>
`:"<pre><code>"+(s?t:escape$1(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t){return t}heading(t,i,s,c){if(this.options.headerIds){const d=this.options.headerPrefix+c.slug(s);return`<h${i} id="${d}">${t}</h${i}>
`}return`<h${i}>${t}</h${i}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(t,i,s){const c=i?"ol":"ul",d=i&&s!==1?' start="'+s+'"':"";return"<"+c+d+`>
`+t+"</"+c+`>
`}listitem(t){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(t){return`<p>${t}</p>
`}table(t,i){return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,i){const s=i.header?"th":"td";return(i.align?`<${s} align="${i.align}">`:`<${s}>`)+t+`</${s}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return`<del>${t}</del>`}link(t,i,s){if(t=cleanUrl(this.options.sanitize,this.options.baseUrl,t),t===null)return s;let c='<a href="'+escape$1(t)+'"';return i&&(c+=' title="'+i+'"'),c+=">"+s+"</a>",c}image(t,i,s){if(t=cleanUrl(this.options.sanitize,this.options.baseUrl,t),t===null)return s;let c=`<img src="${t}" alt="${s}"`;return i&&(c+=` title="${i}"`),c+=this.options.xhtml?"/>":">",c}text(t){return t}}class TextRenderer{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,i,s){return""+s}image(t,i,s){return""+s}br(){return""}}class Slugger{constructor(){this.seen={}}serialize(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(t,i){let s=t,c=0;if(this.seen.hasOwnProperty(s)){c=this.seen[t];do c++,s=t+"-"+c;while(this.seen.hasOwnProperty(s))}return i||(this.seen[t]=c,this.seen[s]=0),s}slug(t,i={}){const s=this.serialize(t);return this.getNextSafeSlug(s,i.dryrun)}}class Parser$4{constructor(t){this.options=t||defaults$3,this.options.renderer=this.options.renderer||new Renderer,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new TextRenderer,this.slugger=new Slugger}static parse(t,i){return new Parser$4(i).parse(t)}static parseInline(t,i){return new Parser$4(i).parseInline(t)}parse(t,i=!0){let s="",c,d,g,r,y,E,w,k,S,I,L,D,O,V,z,U,Z,W,ne;const re=t.length;for(c=0;c<re;c++){if(I=t[c],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[I.type]&&(ne=this.options.extensions.renderers[I.type].call({parser:this},I),ne!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(I.type))){s+=ne||"";continue}switch(I.type){case"space":continue;case"hr":{s+=this.renderer.hr();continue}case"heading":{s+=this.renderer.heading(this.parseInline(I.tokens),I.depth,unescape$1(this.parseInline(I.tokens,this.textRenderer)),this.slugger);continue}case"code":{s+=this.renderer.code(I.text,I.lang,I.escaped);continue}case"table":{for(k="",w="",r=I.header.length,d=0;d<r;d++)w+=this.renderer.tablecell(this.parseInline(I.header[d].tokens),{header:!0,align:I.align[d]});for(k+=this.renderer.tablerow(w),S="",r=I.rows.length,d=0;d<r;d++){for(E=I.rows[d],w="",y=E.length,g=0;g<y;g++)w+=this.renderer.tablecell(this.parseInline(E[g].tokens),{header:!1,align:I.align[g]});S+=this.renderer.tablerow(w)}s+=this.renderer.table(k,S);continue}case"blockquote":{S=this.parse(I.tokens),s+=this.renderer.blockquote(S);continue}case"list":{for(L=I.ordered,D=I.start,O=I.loose,r=I.items.length,S="",d=0;d<r;d++)z=I.items[d],U=z.checked,Z=z.task,V="",z.task&&(W=this.renderer.checkbox(U),O?z.tokens.length>0&&z.tokens[0].type==="paragraph"?(z.tokens[0].text=W+" "+z.tokens[0].text,z.tokens[0].tokens&&z.tokens[0].tokens.length>0&&z.tokens[0].tokens[0].type==="text"&&(z.tokens[0].tokens[0].text=W+" "+z.tokens[0].tokens[0].text)):z.tokens.unshift({type:"text",text:W}):V+=W),V+=this.parse(z.tokens,O),S+=this.renderer.listitem(V,Z,U);s+=this.renderer.list(S,L,D);continue}case"html":{s+=this.renderer.html(I.text);continue}case"paragraph":{s+=this.renderer.paragraph(this.parseInline(I.tokens));continue}case"text":{for(S=I.tokens?this.parseInline(I.tokens):I.text;c+1<re&&t[c+1].type==="text";)I=t[++c],S+=`
`+(I.tokens?this.parseInline(I.tokens):I.text);s+=i?this.renderer.paragraph(S):S;continue}default:{const ie='Token with "'+I.type+'" type was not found.';if(this.options.silent){console.error(ie);return}else throw new Error(ie)}}}return s}parseInline(t,i){i=i||this.renderer;let s="",c,d,g;const r=t.length;for(c=0;c<r;c++){if(d=t[c],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[d.type]&&(g=this.options.extensions.renderers[d.type].call({parser:this},d),g!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(d.type))){s+=g||"";continue}switch(d.type){case"escape":{s+=i.text(d.text);break}case"html":{s+=i.html(d.text);break}case"link":{s+=i.link(d.href,d.title,this.parseInline(d.tokens,i));break}case"image":{s+=i.image(d.href,d.title,d.text);break}case"strong":{s+=i.strong(this.parseInline(d.tokens,i));break}case"em":{s+=i.em(this.parseInline(d.tokens,i));break}case"codespan":{s+=i.codespan(d.text);break}case"br":{s+=i.br();break}case"del":{s+=i.del(this.parseInline(d.tokens,i));break}case"text":{s+=i.text(d.text);break}default:{const y='Token with "'+d.type+'" type was not found.';if(this.options.silent){console.error(y);return}else throw new Error(y)}}}return s}}function marked(e,t,i){if(typeof e>"u"||e===null)throw new Error("marked(): input parameter is undefined or null");if(typeof e!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(typeof t=="function"&&(i=t,t=null),t=merge$1({},marked.defaults,t||{}),checkSanitizeDeprecation(t),i){const s=t.highlight;let c;try{c=Lexer.lex(e,t)}catch(r){return i(r)}const d=function(r){let y;if(!r)try{t.walkTokens&&marked.walkTokens(c,t.walkTokens),y=Parser$4.parse(c,t)}catch(E){r=E}return t.highlight=s,r?i(r):i(null,y)};if(!s||s.length<3||(delete t.highlight,!c.length))return d();let g=0;marked.walkTokens(c,function(r){r.type==="code"&&(g++,setTimeout(()=>{s(r.text,r.lang,function(y,E){if(y)return d(y);E!=null&&E!==r.text&&(r.text=E,r.escaped=!0),g--,g===0&&d()})},0))}),g===0&&d();return}try{const s=Lexer.lex(e,t);return t.walkTokens&&marked.walkTokens(s,t.walkTokens),Parser$4.parse(s,t)}catch(s){if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,t.silent)return"<p>An error occurred:</p><pre>"+escape$1(s.message+"",!0)+"</pre>";throw s}}marked.options=marked.setOptions=function(e){return merge$1(marked.defaults,e),changeDefaults(marked.defaults),marked};marked.getDefaults=getDefaults;marked.defaults=defaults$3;marked.use=function(...e){const t=merge$1({},...e),i=marked.defaults.extensions||{renderers:{},childTokens:{}};let s;e.forEach(c=>{if(c.extensions&&(s=!0,c.extensions.forEach(d=>{if(!d.name)throw new Error("extension name required");if(d.renderer){const g=i.renderers?i.renderers[d.name]:null;g?i.renderers[d.name]=function(...r){let y=d.renderer.apply(this,r);return y===!1&&(y=g.apply(this,r)),y}:i.renderers[d.name]=d.renderer}if(d.tokenizer){if(!d.level||d.level!=="block"&&d.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");i[d.level]?i[d.level].unshift(d.tokenizer):i[d.level]=[d.tokenizer],d.start&&(d.level==="block"?i.startBlock?i.startBlock.push(d.start):i.startBlock=[d.start]:d.level==="inline"&&(i.startInline?i.startInline.push(d.start):i.startInline=[d.start]))}d.childTokens&&(i.childTokens[d.name]=d.childTokens)})),c.renderer){const d=marked.defaults.renderer||new Renderer;for(const g in c.renderer){const r=d[g];d[g]=(...y)=>{let E=c.renderer[g].apply(d,y);return E===!1&&(E=r.apply(d,y)),E}}t.renderer=d}if(c.tokenizer){const d=marked.defaults.tokenizer||new Tokenizer;for(const g in c.tokenizer){const r=d[g];d[g]=(...y)=>{let E=c.tokenizer[g].apply(d,y);return E===!1&&(E=r.apply(d,y)),E}}t.tokenizer=d}if(c.walkTokens){const d=marked.defaults.walkTokens;t.walkTokens=function(g){c.walkTokens.call(this,g),d&&d.call(this,g)}}s&&(t.extensions=i),marked.setOptions(t)})};marked.walkTokens=function(e,t){for(const i of e)switch(t.call(marked,i),i.type){case"table":{for(const s of i.header)marked.walkTokens(s.tokens,t);for(const s of i.rows)for(const c of s)marked.walkTokens(c.tokens,t);break}case"list":{marked.walkTokens(i.items,t);break}default:marked.defaults.extensions&&marked.defaults.extensions.childTokens&&marked.defaults.extensions.childTokens[i.type]?marked.defaults.extensions.childTokens[i.type].forEach(function(s){marked.walkTokens(i[s],t)}):i.tokens&&marked.walkTokens(i.tokens,t)}};marked.parseInline=function(e,t){if(typeof e>"u"||e===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof e!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");t=merge$1({},marked.defaults,t||{}),checkSanitizeDeprecation(t);try{const i=Lexer.lexInline(e,t);return t.walkTokens&&marked.walkTokens(i,t.walkTokens),Parser$4.parseInline(i,t)}catch(i){if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,t.silent)return"<p>An error occurred:</p><pre>"+escape$1(i.message+"",!0)+"</pre>";throw i}};marked.Parser=Parser$4;marked.parser=Parser$4.parse;marked.Renderer=Renderer;marked.TextRenderer=TextRenderer;marked.Lexer=Lexer;marked.lexer=Lexer.lex;marked.Tokenizer=Tokenizer;marked.Slugger=Slugger;marked.parse=marked;marked.options;marked.setOptions;marked.use;marked.walkTokens;marked.parseInline;Parser$4.parse;Lexer.lex;var dist={};Object.defineProperty(dist,"__esModule",{value:!0});var sanitizeUrl_1=dist.sanitizeUrl=void 0,invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,urlSchemeRegex=/^([^:]+):/gm,relativeFirstCharacters=[".","/"];function isRelativeUrlWithoutProtocol(e){return relativeFirstCharacters.indexOf(e[0])>-1}function decodeHtmlCharacters(e){return e.replace(htmlEntitiesRegex,function(t,i){return String.fromCharCode(i)})}function sanitizeUrl(e){var t=decodeHtmlCharacters(e||"").replace(ctrlCharactersRegex,"").trim();if(!t)return"about:blank";if(isRelativeUrlWithoutProtocol(t))return t;var i=t.match(urlSchemeRegex);if(!i)return t;var s=i[0];return invalidProtocolRegex.test(s)?"about:blank":t}sanitizeUrl_1=dist.sanitizeUrl=sanitizeUrl;/*! lozad.js - v1.16.0 - 2020-09-06
* https://github.com/ApoorvSaxena/lozad.js
* Copyright (c) 2020 Apoorv Saxena; Licensed MIT */const isIE=typeof document<"u"&&document.documentMode,defaultConfig={rootMargin:"0px",threshold:0,load(e){if(e.nodeName.toLowerCase()==="picture"){let i=e.querySelector("img"),s=!1;i===null&&(i=document.createElement("img"),s=!0),isIE&&e.getAttribute("data-iesrc")&&(i.src=e.getAttribute("data-iesrc")),e.getAttribute("data-alt")&&(i.alt=e.getAttribute("data-alt")),s&&e.append(i)}if(e.nodeName.toLowerCase()==="video"&&!e.getAttribute("data-src")&&e.children){const i=e.children;let s;for(let c=0;c<=i.length-1;c++)s=i[c].getAttribute("data-src"),s&&(i[c].src=s);e.load()}e.getAttribute("data-poster")&&(e.poster=e.getAttribute("data-poster")),e.getAttribute("data-src")&&(e.src=e.getAttribute("data-src")),e.getAttribute("data-srcset")&&e.setAttribute("srcset",e.getAttribute("data-srcset"));let t=",";if(e.getAttribute("data-background-delimiter")&&(t=e.getAttribute("data-background-delimiter")),e.getAttribute("data-background-image"))e.style.backgroundImage=`url('${e.getAttribute("data-background-image").split(t).join("'),url('")}')`;else if(e.getAttribute("data-background-image-set")){const i=e.getAttribute("data-background-image-set").split(t);let s=i[0].substr(0,i[0].indexOf(" "))||i[0];s=s.indexOf("url(")===-1?`url(${s})`:s,i.length===1?e.style.backgroundImage=s:e.setAttribute("style",(e.getAttribute("style")||"")+`background-image: ${s}; background-image: -webkit-image-set(${i}); background-image: image-set(${i})`)}e.getAttribute("data-toggle-class")&&e.classList.toggle(e.getAttribute("data-toggle-class"))},loaded(){}};function markAsLoaded(e){e.setAttribute("data-loaded",!0)}function preLoad(e){e.getAttribute("data-placeholder-background")&&(e.style.background=e.getAttribute("data-placeholder-background"))}const isLoaded=e=>e.getAttribute("data-loaded")==="true",onIntersection=(e,t)=>(i,s)=>{i.forEach(c=>{(c.intersectionRatio>0||c.isIntersecting)&&(s.unobserve(c.target),isLoaded(c.target)||(e(c.target),markAsLoaded(c.target),t(c.target)))})},getElements=(e,t=document)=>e instanceof Element?[e]:e instanceof NodeList?e:t.querySelectorAll(e);function lozad(e=".lozad",t={}){const{root:i,rootMargin:s,threshold:c,load:d,loaded:g}=Object.assign({},defaultConfig,t);let r;typeof window<"u"&&window.IntersectionObserver&&(r=new IntersectionObserver(onIntersection(d,g),{root:i,rootMargin:s,threshold:c}));const y=getElements(e,i);for(let E=0;E<y.length;E++)preLoad(y[E]);return{observe(){const E=getElements(e,i);for(let w=0;w<E.length;w++)if(!isLoaded(E[w])){if(r){r.observe(E[w]);continue}d(E[w]),markAsLoaded(E[w]),g(E[w])}},triggerLoad(E){isLoaded(E)||(d(E),markAsLoaded(E),g(E))},observer:r}}const LOZAD_CLASS_NAME="lozad",LOADED_CLASS_NAME="loaded",lozadObserve=e=>{const t=lozad(e,{loaded:i=>i.classList.add(LOADED_CLASS_NAME)});return t.observe(),t},useLozad=e=>{const t=ref(),i=ref(null),s=()=>{var r;const d=(e==null?void 0:e.className)||LOZAD_CLASS_NAME,g=((r=e==null?void 0:e.elementor)==null?void 0:r.call(e))||t.value;if(g!=null&&g.querySelectorAll){const y=g.querySelectorAll(`.${d}`);y!=null&&y.length&&(i.value=lozadObserve(y))}},c=()=>{i.value&&(i.value.observer.disconnect(),i.value=null)};return onMounted(()=>{var d;((d=e==null?void 0:e.immediate)==null||d)&&s()}),onBeforeUnmount(()=>{c()}),{element:t,observer:i,observe:s,unobserve:c}},isValidDateParam=e=>{const t=e.split("-");if(t.length!==3||!t.every(d=>Number.isInteger(Number(d))))return!1;const[i,s,c]=t;return!(i.length!==4||s.length!==2||c.length!==2)};var NEWTON_ITERATIONS=4,NEWTON_MIN_SLOPE=.001,SUBDIVISION_PRECISION=1e-7,SUBDIVISION_MAX_ITERATIONS=10,kSplineTableSize=11,kSampleStepSize=1/(kSplineTableSize-1),float32ArraySupported=typeof Float32Array=="function";function A(e,t){return 1-3*t+3*e}function B(e,t){return 3*t-6*e}function C(e){return 3*e}function calcBezier(e,t,i){return((A(t,i)*e+B(t,i))*e+C(t))*e}function getSlope(e,t,i){return 3*A(t,i)*e*e+2*B(t,i)*e+C(t)}function binarySubdivide(e,t,i,s,c){var d,g,r=0;do g=t+(i-t)/2,d=calcBezier(g,s,c)-e,d>0?i=g:t=g;while(Math.abs(d)>SUBDIVISION_PRECISION&&++r<SUBDIVISION_MAX_ITERATIONS);return g}function newtonRaphsonIterate(e,t,i,s){for(var c=0;c<NEWTON_ITERATIONS;++c){var d=getSlope(t,i,s);if(d===0)return t;var g=calcBezier(t,i,s)-e;t-=g/d}return t}function LinearEasing(e){return e}var src$1=function(t,i,s,c){if(!(0<=t&&t<=1&&0<=s&&s<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===i&&s===c)return LinearEasing;for(var d=float32ArraySupported?new Float32Array(kSplineTableSize):new Array(kSplineTableSize),g=0;g<kSplineTableSize;++g)d[g]=calcBezier(g*kSampleStepSize,t,s);function r(y){for(var E=0,w=1,k=kSplineTableSize-1;w!==k&&d[w]<=y;++w)E+=kSampleStepSize;--w;var S=(y-d[w])/(d[w+1]-d[w]),I=E+S*kSampleStepSize,L=getSlope(I,t,s);return L>=NEWTON_MIN_SLOPE?newtonRaphsonIterate(y,I,t,s):L===0?I:binarySubdivide(y,E,E+kSampleStepSize,t,s)}return function(E){return E===0?0:E===1?1:calcBezier(r(E),i,c)}};const Easing={ease:[.25,.1,.25,1],linear:[0,0,1,1],easeIn:[.42,0,1,1],easeOut:[0,0,.58,1],easeInOut:[.42,0,.58,1]},triggerEvents=["scroll","mousedown","wheel","DOMMouseScroll","mousewheel","keyup","touchmove"],listener={on(e,t,i){t.forEach(s=>{e.addEventListener(s,i,{passive:!0})})},off(e,t,i){t.forEach(s=>{e.removeEventListener(s,i)})}},scrollToElement=e=>{var z,U,Z;const{target:t,onCancel:i,onDone:s}=e,c=(z=e.offset)!=null?z:0,d=(U=e.duration)!=null?U:500,g=(Z=e.easing)!=null?Z:Easing.ease,r=typeof t=="string"?document.querySelector(t):t,y=document.body;let E=!1;const w=()=>{E=!0};listener.on(y,triggerEvents,w);const k=()=>{listener.off(y,triggerEvents,w),E?i==null||i():s==null||s()},S=window.pageYOffset,I=S+r.getBoundingClientRect().top,D=(document.body.scrollHeight-I<window.innerHeight?document.body.scrollHeight-window.innerHeight:I)+c-S;if(!D)return;const O=Reflect.apply(src$1,src$1,g);let V;window.requestAnimationFrame(function W(ne){if(E)return k();V||(V=ne);const re=ne-V;let ie=Math.min(re/d,1);ie=O(ie),window.scrollTo(0,S+D*ie),re<d?window.requestAnimationFrame(W):k()})},scrollToAnchor=(e,t)=>{const i=document.getElementById(e);i&&scrollToElement({target:i,duration:200,offset:t!=null?t:-74})},scrollToPageTop=()=>{scrollToElement({target:document.body,duration:280,offset:0,easing:Easing.ease})},scrollToNextScreen=()=>{nextTick$1(()=>{scrollToElement({target:document.body,offset:window.scrollY+window.innerHeight*.68,duration:300,easing:Easing.easeIn})})},I18nSymbol=Symbol("i18n"),createI18nStore=e=>{const t=ref(e.default),i=e.languages.map(y=>y.code),s=computed(()=>e.languages.find(y=>y.code===t.value)),c=e.keys.reduce((y,E)=>({...y,[E]:e.languages.reduce((w,k)=>({...w,[k.code]:k.data[E]}),{})}),{}),d=y=>{i.includes(y)&&t.value!==y&&(t.value=y)},g=()=>{const y=i.findIndex(w=>w===t.value),E=y<i.length-1?y+1:0;y!==E&&d(i[E])},r=(y,E,...w)=>{var S;const k=(S=c[y])==null?void 0:S[E!=null?E:t.value];if(!!k)return typeof k=="string"?k:k(...w)};return{language:readonly(t),l:s,set:d,toggle:g,translate:r,t:r}},createI18n=e=>{const t=createI18nStore(e),i=defineComponent({name:"I18n",props:{k:[String,Number,Symbol]},render(){var s,c;if(this.$props.k)return t.t(this.$props.k,null,this.$attrs);{const d=t.language.value;return this.$attrs[d]||((c=(s=this.$slots)[d])==null?void 0:c.call(s))}}});return{...t,install(s){s.config.globalProperties.$i18n=t,s.provide(I18nSymbol,t),s.component(i.name,i)}}},useI18n=()=>inject(I18nSymbol);var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,i)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,__spreadValues=(e,t)=>{for(var i in t||(t={}))__hasOwnProp.call(t,i)&&__defNormalProp(e,i,t[i]);if(__getOwnPropSymbols)for(var i of __getOwnPropSymbols(t))__propIsEnum.call(t,i)&&__defNormalProp(e,i,t[i]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t)),PROVIDE_KEY="usehead",HEAD_COUNT_KEY="head:count",HEAD_ATTRS_KEY="data-head-attrs",SELF_CLOSING_TAGS=["meta","link","base"],BODY_TAG_ATTR_NAME="data-meta-body",createElement=(e,t,i)=>{const s=i.createElement(e);for(const c of Object.keys(t))if(c==="body"&&t.body===!0)s.setAttribute(BODY_TAG_ATTR_NAME,"true");else{let d=t[c];if(c==="key"||d===!1)continue;c==="children"?s.textContent=d:s.setAttribute(c,d)}return s},htmlEscape=e=>e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),stringifyAttrs=e=>{const t=[];for(let[i,s]of Object.entries(e)){if(i==="children"||i==="key"||s===!1||s==null)continue;let c=htmlEscape(i);s!==!0&&(c+=`="${htmlEscape(String(s))}"`),t.push(c)}return t.length>0?" "+t.join(" "):""};function isEqualNode(e,t){if(e instanceof HTMLElement&&t instanceof HTMLElement){const i=t.getAttribute("nonce");if(i&&!e.getAttribute("nonce")){const s=t.cloneNode(!0);return s.setAttribute("nonce",""),s.nonce=i,i===e.nonce&&e.isEqualNode(s)}}return e.isEqualNode(t)}var getTagKey=e=>{const t=["key","id","name","property"];for(const i of t){const s=typeof e.getAttribute=="function"?e.hasAttribute(i)?e.getAttribute(i):void 0:e[i];if(s!==void 0)return{name:i,value:s}}},injectHead=()=>{const e=inject(PROVIDE_KEY);if(!e)throw new Error("You may forget to apply app.use(head)");return e},acceptFields=["title","meta","link","base","style","script","noscript","htmlAttrs","bodyAttrs"],renderTemplate=(e,t)=>e==null?"":typeof e=="string"?e.replace("%s",t!=null?t:""):e(unref(t)),headObjToTags=e=>{const t=[],i=Object.keys(e);for(const s of i)if(e[s]!=null)switch(s){case"title":t.push({tag:s,props:{children:e[s]}});break;case"titleTemplate":break;case"base":t.push({tag:s,props:__spreadValues({key:"default"},e[s])});break;default:if(acceptFields.includes(s)){const c=e[s];Array.isArray(c)?c.forEach(d=>{t.push({tag:s,props:d})}):c&&t.push({tag:s,props:c})}break}return t},setAttrs=(e,t)=>{const i=e.getAttribute(HEAD_ATTRS_KEY);if(i)for(const c of i.split(","))c in t||e.removeAttribute(c);const s=[];for(const c in t){const d=t[c];d!=null&&(d===!1?e.removeAttribute(c):e.setAttribute(c,d),s.push(c))}s.length?e.setAttribute(HEAD_ATTRS_KEY,s.join(",")):e.removeAttribute(HEAD_ATTRS_KEY)},updateElements=(e=window.document,t,i)=>{var s,c;const d=e.head,g=e.body;let r=d.querySelector(`meta[name="${HEAD_COUNT_KEY}"]`),y=g.querySelectorAll(`[${BODY_TAG_ATTR_NAME}]`);const E=r?Number(r.getAttribute("content")):0,w=[],k=[];if(y)for(let I=0;I<y.length;I++)y[I]&&((s=y[I].tagName)==null?void 0:s.toLowerCase())===t&&k.push(y[I]);if(r)for(let I=0,L=r.previousElementSibling;I<E;I++,L=(L==null?void 0:L.previousElementSibling)||null)((c=L==null?void 0:L.tagName)==null?void 0:c.toLowerCase())===t&&w.push(L);else r=e.createElement("meta"),r.setAttribute("name",HEAD_COUNT_KEY),r.setAttribute("content","0"),d.append(r);let S=i.map(I=>{var L;return{element:createElement(I.tag,I.props,e),body:(L=I.props.body)!=null?L:!1}});S=S.filter(I=>{for(let L=0;L<w.length;L++){const D=w[L];if(isEqualNode(D,I.element))return w.splice(L,1),!1}for(let L=0;L<k.length;L++){const D=k[L];if(isEqualNode(D,I.element))return k.splice(L,1),!1}return!0}),k.forEach(I=>{var L;return(L=I.parentNode)==null?void 0:L.removeChild(I)}),w.forEach(I=>{var L;return(L=I.parentNode)==null?void 0:L.removeChild(I)}),S.forEach(I=>{I.body===!0?g.insertAdjacentElement("beforeend",I.element):d.insertBefore(I.element,r)}),r.setAttribute("content",""+(E-w.length+S.filter(I=>!I.body).length))},createHead=e=>{let t=[],i=new Set;e&&t.push(shallowRef(e));const s={install(c){c.config.globalProperties.$head=s,c.provide(PROVIDE_KEY,s)},get headTags(){const c=[],d=t.map(g=>unref(g).titleTemplate).reverse().find(g=>g!=null);return t.forEach(g=>{headObjToTags(unref(g)).forEach(y=>{if(y.tag==="meta"||y.tag==="base"||y.tag==="script"){const E=getTagKey(y.props);if(E){let w=-1;for(let k=0;k<c.length;k++){const S=c[k],I=S.props[E.name],L=y.props[E.name];if(S.tag===y.tag&&I===L){w=k;break}}w!==-1&&c.splice(w,1)}}d&&y.tag==="title"&&(y.props.children=renderTemplate(d,y.props.children)),c.push(y)})}),c},addHeadObjs(c){t.push(c)},removeHeadObjs(c){t=t.filter(d=>d!==c)},updateDOM(c=window.document){let d,g={},r={};const y={};for(const w of s.headTags){if(w.tag==="title"){d=w.props.children;continue}if(w.tag==="htmlAttrs"){Object.assign(g,w.props);continue}if(w.tag==="bodyAttrs"){Object.assign(r,w.props);continue}y[w.tag]=y[w.tag]||[],y[w.tag].push(w)}d!==void 0&&(c.title=d),setAttrs(c.documentElement,g),setAttrs(c.body,r);const E=new Set([...Object.keys(y),...i]);for(const w of E)updateElements(c,w,y[w]||[]);i.clear(),Object.keys(y).forEach(w=>i.add(w))}};return s},IS_BROWSER=typeof window<"u",useHead=e=>{const t=injectHead(),i=ref(e);t.addHeadObjs(i),IS_BROWSER&&(watchEffect(()=>{t.updateDOM()}),onBeforeUnmount(()=>{t.removeHeadObjs(i),t.updateDOM()}))},tagToString=e=>{let t=!1;e.props.body&&(t=!0,delete e.props.body);let i=stringifyAttrs(e.props);return SELF_CLOSING_TAGS.includes(e.tag)?`<${e.tag}${i}${t?`  ${BODY_TAG_ATTR_NAME}="true"`:""}>`:`<${e.tag}${i}${t?` ${BODY_TAG_ATTR_NAME}="true"`:""}>${e.props.children||""}</${e.tag}>`},renderHeadToString=e=>{const t=[];let i="",s={},c={},d=[];for(const g of e.headTags)g.tag==="title"?i=tagToString(g):g.tag==="htmlAttrs"?Object.assign(s,g.props):g.tag==="bodyAttrs"?Object.assign(c,g.props):g.props.body?d.push(tagToString(g)):t.push(tagToString(g));return t.push(`<meta name="${HEAD_COUNT_KEY}" content="${t.length}">`),{get headTags(){return i+t.join("")},get htmlAttrs(){return stringifyAttrs(__spreadProps(__spreadValues({},s),{[HEAD_ATTRS_KEY]:Object.keys(s).join(",")}))},get bodyAttrs(){return stringifyAttrs(__spreadProps(__spreadValues({},c),{[HEAD_ATTRS_KEY]:Object.keys(c).join(",")}))},get bodyTags(){return d.join("")}}};const MetaTitlerSymbol=Symbol("meta-titler"),createMeta=e=>{const t=createHead();return{...t,renderToString(){return renderHeadToString(t)},install(i,...s){return i.provide(MetaTitlerSymbol,(e==null?void 0:e.titler)||(c=>c)),i.use(t,...s),t}}};function useMeta(e){const t=useI18n(),i=inject(MetaTitlerSymbol),s=computed(()=>{var I;const c=typeof e=="function"?e():e,{title:d,pageTitle:g,keywords:r,description:y,...E}=c,w=d||(g?i(g):""),k=E.meta||[];r&&k.push({key:"keywords",name:"keywords",content:r}),y&&k.push({key:"description",name:"description",content:y});const S={lang:(I=t.l.value)==null?void 0:I.iso,...E.htmlAttrs};return{...E,title:w,meta:k,htmlAttrs:S}});return useHead(s)}/*! js-cookie v3.0.1 | MIT */function assign$1(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)e[s]=i[s]}return e}var defaultConverter={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function init(e,t){function i(c,d,g){if(!(typeof document>"u")){g=assign$1({},t,g),typeof g.expires=="number"&&(g.expires=new Date(Date.now()+g.expires*864e5)),g.expires&&(g.expires=g.expires.toUTCString()),c=encodeURIComponent(c).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var r="";for(var y in g)!g[y]||(r+="; "+y,g[y]!==!0&&(r+="="+g[y].split(";")[0]));return document.cookie=c+"="+e.write(d,c)+r}}function s(c){if(!(typeof document>"u"||arguments.length&&!c)){for(var d=document.cookie?document.cookie.split("; "):[],g={},r=0;r<d.length;r++){var y=d[r].split("="),E=y.slice(1).join("=");try{var w=decodeURIComponent(y[0]);if(g[w]=e.read(E,w),c===w)break}catch{}}return c?g[c]:g}}return Object.create({set:i,get:s,remove:function(c,d){i(c,"",assign$1({},d,{expires:-1}))},withAttributes:function(c){return init(this.converter,assign$1({},this.attributes,c))},withConverter:function(c){return init(assign$1({},this.converter,c),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var api=init(defaultConverter,{path:"/"}),Theme=(e=>(e.Light="light",e.Dark="dark",e))(Theme||{});const DARK_THEME_QUERY="(prefers-color-scheme: dark)",LIGHT_THEME_QUERY="(prefers-color-scheme: light)",THEME_STORAGE_KEY="theme",ThemeSymbol=Symbol("theme"),themes=["light","dark"],createTheme=e=>{const t=ref(e==="dark"?"dark":"light"),i=g=>{themes.includes(g)&&g!==t.value&&(t.value=g,api.set(THEME_STORAGE_KEY,g),storage.set(THEME_STORAGE_KEY,g))},s=()=>i(t.value==="dark"?"light":"dark"),c=()=>{window.matchMedia(DARK_THEME_QUERY).addEventListener("change",({matches:g})=>g&&i("dark")),window.matchMedia(LIGHT_THEME_QUERY).addEventListener("change",({matches:g})=>g&&i("light"))},d={theme:readonly(t),set:i,toggle:s,bindClientSystem:c};return{...d,install(g){g.provide(ThemeSymbol,d)}}},useTheme=()=>inject(ThemeSymbol),_sfc_main$1D=defineComponent({name:"ProgressBar",props:{spin:{type:Boolean,default:!1}},setup(){return{loading:useLoading()}}}),progress_vue_vue_type_style_index_0_scoped_41e28920_lang="",_export_sfc=(e,t)=>{const i=e.__vccOpts||e;for(const[s,c]of t)i[s]=c;return i},_sfc_setup$1D=_sfc_main$1D.setup;_sfc_main$1D.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/composables/loading/progress.vue"),_sfc_setup$1D?_sfc_setup$1D(e,t):void 0};const LoadingSymbol=Symbol("loading"),useLoading=()=>inject(LoadingSymbol),defaultAdConfig={PC_CARROUSEL:!1,PC_NAV:[],PC_ASIDE_SWIPER:[],PC_MERCH_PRODUCTS:{}},useAdminInfoStore=defineFetchStore({id:"adminInfo",initData:null,fetcher:()=>nodepress$1.get("/auth/admin").then(e=>e.result)}),useAppOptionStore=pinia_prod.defineStore({id:"appOption",state:()=>({fetched:!1,fetching:!1,data:null}),getters:{adConfig:e=>{var s;const t=(s=e.data)==null?void 0:s.ad_config,i={...defaultAdConfig,...t?JSON.parse(t):{}};return i.PC_NAV=i.PC_NAV.filter(c=>!c.disabled),i.PC_ASIDE_SWIPER=i.PC_ASIDE_SWIPER.filter(c=>!c.disabled),i}},actions:{fetch(e=!1){return!e&&this.fetched?Promise.resolve():(this.fetching=!0,nodepress$1.get("/option").then(t=>{this.data=t.result,this.fetched=!0}).finally(()=>{this.fetching=!1}))},postSiteLike(){const e=useIdentityStore();return nodepress$1.post("/vote/post",{post_id:CommentPostID.Guestbook,vote:1,author:e.author}).then(t=>{this.data&&(this.data.meta.likes=t.result)})},postFeedback(e){var s,c;const t=useIdentityStore(),i=((s=t.author)==null?void 0:s.name)||null;return nodepress$1.post("/feedback",{...e,tid:0,user_name:i?`${i} (${UserType[t.user.type]})`:null,user_email:((c=t.author)==null?void 0:c.email)||null})}}}),useEnhancer=()=>{const e=vueRouter_prod.useRoute(),t=vueRouter_prod.useRouter(),i=useI18n(),s=useTheme(),c=useGlobalState(),d=useAppOptionStore(),g=computed(()=>d.adConfig),r=computed(()=>c.userAgent.isMobile),y=computed(()=>s.theme.value===Theme.Dark),E=computed(()=>i.language.value===Language.Chinese);return{route:e,router:t,globalState:c,i18n:i,meta:useMeta,theme:s,adConfig:g,isMobile:r,isDarkTheme:y,isZhLang:E,defer:UNDEFINED,popup:UNDEFINED,gtag:UNDEFINED,loading:UNDEFINED}};var ProxyModule=(e=>(e.Default="default",e.Douban="douban",e.NetEaseMusic="netease-music",e.Instagram="instagram",e.YouTube="youtube",e.Disqus="disqus",e))(ProxyModule||{});const getTargetCDNURL=e=>`${API_CONFIG.CDN}${e}`,getTargetProxyURL=(e,t=ProxyModule.Default)=>`${API_CONFIG.PROXY}/${t}/${encodeURIComponent(e)}`,getTargetStaticURL=e=>`${API_CONFIG.STATIC}${e}`,getPageURL=e=>`${API_CONFIG.FE}${e}`,WebPArgs="format,webp/",getArticleBannerThumbnailURL=(e,t)=>{if(!e)return getTargetCDNURL("/images/thumbnail/carrousel.jpg");const i=1190,s=420;return`${e}?image_process=${t?WebPArgs:""}quality,q_88/resize,w_${i},h_${s}/crop,mid,w_${i},h_${s}/watermark,text_U3VybW9uLm1l,type_bm90b3NhbnM,color_ffffff,size_31,g_sw,t_26,x_30,y_18`},getMobileArticleListThumbnailURL=(e,t=!1)=>{if(!e)return"";const i=700,s=247;return`${e}?image_process=${t?WebPArgs:""}quality,q_82/resize,w_${i},h_${s}/crop,mid,w_${i},h_${s}/watermark,text_U3VybW9uLm1l,type_bm90b3NhbnM,color_ffffff,size_28,g_sw,t_26,x_22,y_18`},getArticleListThumbnailURL=(e,t)=>{if(!e)return"";const i=350,s=238;return`${e}?image_process=${t?WebPArgs:""}quality,q_80/resize,w_${i},h_${s}/crop,mid,w_${i},h_${s}`},isOriginalType=e=>isNull(e)||isUndefined(null)||e===OriginState.Original,isHybridType=e=>e===OriginState.Hybrid,isReprintType=e=>e===OriginState.Reprint,getExtendsObject=e=>e!=null&&e.length?e.reduce((t,i)=>({...t,[i.name]:i.value}),{}):{},getExtendValue=(e,t)=>e.length?getExtendsObject(e)[t]:UNDEFINED,_sfc_main$1C=defineComponent({name:"FlowArticleListItem",props:{article:{type:Object,required:!0}},setup(e){const{router:t,globalState:i}=useEnhancer(),s=useIdentityStore(),c=computed(()=>s.isLikedPage(e.article.id)),d=isHybridType(e.article.origin),g=isReprintType(e.article.origin),r=isOriginalType(e.article.origin);return{LanguageKey,isLiked:c,isHybrid:d,isReprint:g,isOriginal:r,numberSplit,getThumbnailURL:w=>getMobileArticleListThumbnailURL(w,i.imageExt.value.isWebP),getArticleDetailRoute,handleClick:()=>{t.push(getArticleDetailRoute(e.article.id))}}}}),item_vue_vue_type_style_index_0_scoped_ca6df77d_lang="";function _sfc_ssrRender$1C(e,t,i,s,c,d,g,r){const y=resolveComponent("i18n"),E=resolveComponent("router-link"),w=resolveComponent("udate");t(`<div${ssrRenderAttrs(mergeProps({class:"article-item"},s))} data-v-ca6df77d><div class="thumbnail" data-v-ca6df77d><span class="${ssrRenderClass([{original:e.isOriginal,reprint:e.isReprint,hybrid:e.isHybrid},"oirigin"])}" data-v-ca6df77d>`),e.isOriginal?t(ssrRenderComponent(y,{k:e.LanguageKey.ORIGIN_ORIGINAL},null,i)):e.isReprint?t(ssrRenderComponent(y,{k:e.LanguageKey.ORIGIN_REPRINT},null,i)):e.isHybrid?t(ssrRenderComponent(y,{k:e.LanguageKey.ORIGIN_HYBRID},null,i)):t("<!---->"),t(`</span><div class="image" style="${ssrRenderStyle({backgroundImage:`url(${e.getThumbnailURL(e.article.thumb)})`})}"${ssrRenderAttr("alt",e.article.title)}${ssrRenderAttr("title",e.article.title)} data-v-ca6df77d></div></div><div class="content" data-v-ca6df77d><div class="body" data-v-ca6df77d><h4 class="title" data-v-ca6df77d>`),t(ssrRenderComponent(E,{class:"link",to:e.getArticleDetailRoute(e.article.id),title:e.article.title},{default:withCtx((k,S,I,L)=>{if(S)S(`${ssrInterpolate(e.article.title)}`);else return[createTextVNode(toDisplayString(e.article.title),1)]}),_:1},i)),t(`</h4><p class="description" style="${ssrRenderStyle({"-webkit-box-orient":"vertical"})}" data-v-ca6df77d>${e.article.description}</p></div><div class="meta" data-v-ca6df77d><span class="date" data-v-ca6df77d><i class="iconfont icon-clock" data-v-ca6df77d></i>`),t(ssrRenderComponent(w,{to:"ago",date:e.article.create_at},null,i)),t(`</span><span class="views" data-v-ca6df77d><i class="iconfont icon-eye" data-v-ca6df77d></i><span data-v-ca6df77d>${ssrInterpolate(e.numberSplit(e.article.meta.views))}</span></span><span class="comments" data-v-ca6df77d><i class="iconfont icon-comment" data-v-ca6df77d></i><span data-v-ca6df77d>${ssrInterpolate(e.article.meta.comments)}</span></span><span class="likes" data-v-ca6df77d><i class="${ssrRenderClass([{liked:e.isLiked},"iconfont icon-like"])}" data-v-ca6df77d></i><span data-v-ca6df77d>${ssrInterpolate(e.article.meta.likes)}</span></span></div></div></div>`)}const _sfc_setup$1C=_sfc_main$1C.setup;_sfc_main$1C.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/flow/mobile/item.vue"),_sfc_setup$1C?_sfc_setup$1C(e,t):void 0};const ListItem$1=_export_sfc(_sfc_main$1C,[["ssrRender",_sfc_ssrRender$1C],["__scopeId","data-v-ca6df77d"]]),_sfc_main$1B=defineComponent({name:"MobileFlowArticleList",components:{ListItem:ListItem$1},props:{tagSlug:{type:String,required:!1},categorySlug:{type:String,required:!1},searchKeyword:{type:String,required:!1},date:{type:String,required:!1}},setup(e){const{meta:t,i18n:i}=useEnhancer(),s=useAppOptionStore(),c=useTagStore(),d=useCategoryStore(),g=useArticleListStore(),r=computed(()=>e.categorySlug?d.data.find(I=>I.slug===e.categorySlug):null),y=computed(()=>e.tagSlug?c.data.find(I=>I.slug===e.tagSlug):null),E=computed(()=>g.list.data),w=computed(()=>{const I=g.list.pagination;return I?I.current_page<I.total_page:!1});t(()=>{var L,D;const I=Object.values(e).filter(Boolean).map(O=>firstUpperCase(O));return I.length?{pageTitle:I.join(" | ")}:{title:`${META.title} - ${i.t(LanguageKey.APP_SLOGAN)}`,description:(L=s.data)==null?void 0:L.description,keywords:(D=s.data)==null?void 0:D.keywords.join(",")}});const k=async(I={})=>{await g.fetchList({category_slug:e.categorySlug,tag_slug:e.tagSlug,date:e.date,keyword:e.searchKeyword,...I})},S=async()=>{await k({page:g.list.pagination.current_page+1})};return onBeforeMount(()=>{watch(()=>e,()=>k(),{flush:"post",deep:!0})}),useUniversalFetch(()=>k()),{LanguageKey,tagEnName,tag:y,category:r,articles:E,articleListStore:g,hasMoreArticles:w,loadmoreArticles:S,firstUpperCase}}}),index_vue_vue_type_style_index_0_scoped_04970b01_lang="";function _sfc_ssrRender$1B(e,t,i,s,c,d,g,r){const y=resolveComponent("i18n"),E=resolveComponent("router-link"),w=resolveComponent("placeholder"),k=resolveComponent("skeleton-base"),S=resolveComponent("skeleton-line"),I=resolveComponent("empty"),L=resolveComponent("list-item");t(`<div${ssrRenderAttrs(mergeProps({class:"articles"},s))} data-v-04970b01>`),e.tagSlug||e.categorySlug||e.date||e.searchKeyword?(t('<div class="header" data-v-04970b01><div class="content" data-v-04970b01>'),e.categorySlug?(t("<!--[-->"),e.category?t(ssrRenderComponent(y,null,{zh:withCtx((D,O,V,z)=>{if(O)O(`\u5206\u7C7B \u201C${ssrInterpolate(e.category.name)}\u201D \u7684\u8FC7\u6EE4\u7ED3\u679C`);else return[createTextVNode("\u5206\u7C7B \u201C"+toDisplayString(e.category.name)+"\u201D \u7684\u8FC7\u6EE4\u7ED3\u679C",1)]}),en:withCtx((D,O,V,z)=>{if(O)O(`Category &quot;${ssrInterpolate(e.firstUpperCase(e.category.slug))}&quot; &#39;s result`);else return[createTextVNode('Category "'+toDisplayString(e.firstUpperCase(e.category.slug))+`" 's result`,1)]}),_:1},i)):t(`<span data-v-04970b01>${ssrInterpolate(e.categorySlug)}</span>`),t("<!--]-->")):t("<!---->"),e.tagSlug?(t("<!--[-->"),e.tag?t(ssrRenderComponent(y,null,{zh:withCtx((D,O,V,z)=>{if(O)O(`\u6807\u7B7E \u201C${ssrInterpolate(e.tag.name)}\u201D \u7684\u8FC7\u6EE4\u7ED3\u679C`);else return[createTextVNode("\u6807\u7B7E \u201C"+toDisplayString(e.tag.name)+"\u201D \u7684\u8FC7\u6EE4\u7ED3\u679C",1)]}),en:withCtx((D,O,V,z)=>{if(O)O(`Tag &quot;${ssrInterpolate(e.tagEnName(e.tag))}&quot; &#39;s result`);else return[createTextVNode('Tag "'+toDisplayString(e.tagEnName(e.tag))+`" 's result`,1)]}),_:1},i)):t(`<span data-v-04970b01>${ssrInterpolate(e.tagSlug)}</span>`),t("<!--]-->")):t("<!---->"),e.date?t(ssrRenderComponent(y,null,{zh:withCtx((D,O,V,z)=>{if(O)O(`\u65E5\u671F \u201C${ssrInterpolate(e.date)}\u201D \u7684\u8FC7\u6EE4\u7ED3\u679C`);else return[createTextVNode("\u65E5\u671F \u201C"+toDisplayString(e.date)+"\u201D \u7684\u8FC7\u6EE4\u7ED3\u679C",1)]}),en:withCtx((D,O,V,z)=>{if(O)O(`Date &quot;${ssrInterpolate(e.date)}&quot; &#39;s result`);else return[createTextVNode('Date "'+toDisplayString(e.date)+`" 's result`,1)]}),_:1},i)):t("<!---->"),e.searchKeyword?t(ssrRenderComponent(y,null,{zh:withCtx((D,O,V,z)=>{if(O)O(`\u5173\u952E\u8BCD \u201C${ssrInterpolate(e.searchKeyword)}\u201D \u7684\u8FC7\u6EE4\u7ED3\u679C`);else return[createTextVNode("\u5173\u952E\u8BCD \u201C"+toDisplayString(e.searchKeyword)+"\u201D \u7684\u8FC7\u6EE4\u7ED3\u679C",1)]}),en:withCtx((D,O,V,z)=>{if(O)O(`Search keyword &quot;${ssrInterpolate(e.searchKeyword)}&quot; &#39;s result`);else return[createTextVNode('Search keyword "'+toDisplayString(e.searchKeyword)+`" 's result`,1)]}),_:1},i)):t("<!---->"),t("</div>"),t(ssrRenderComponent(E,{to:"/",class:"close"},{default:withCtx((D,O,V,z)=>{if(O)O(`<i class="iconfont icon-cancel" data-v-04970b01${z}></i>`);else return[createVNode("i",{class:"iconfont icon-cancel"})]}),_:1},i)),t("</div>")):t("<!---->"),t(ssrRenderComponent(w,{data:e.articles.length,loading:!e.articles.length&&e.articleListStore.list.fetching},{loading:withCtx((D,O,V,z)=>{if(O)O(`<ul class="skeletons" data-v-04970b01${z}><!--[-->`),ssrRenderList(3,U=>{O(`<li class="item" data-v-04970b01${z}><div class="thumb" data-v-04970b01${z}>`),O(ssrRenderComponent(k,null,null,V,z)),O(`</div><div class="content" data-v-04970b01${z}><div class="title" data-v-04970b01${z}>`),O(ssrRenderComponent(S,null,null,V,z)),O(`</div><div class="description" data-v-04970b01${z}>`),O(ssrRenderComponent(S,null,null,V,z)),O("</div></div></li>")}),O("<!--]--></ul>");else return[createVNode("ul",{class:"skeletons",key:"skeleton"},[(openBlock(),createBlock(Fragment,null,renderList(3,U=>createVNode("li",{key:U,class:"item"},[createVNode("div",{class:"thumb"},[createVNode(k)]),createVNode("div",{class:"content"},[createVNode("div",{class:"title"},[createVNode(S)]),createVNode("div",{class:"description"},[createVNode(S)])])])),64))])]}),placeholder:withCtx((D,O,V,z)=>{if(O)O(ssrRenderComponent(I,{class:"empty","i18n-key":e.LanguageKey.ARTICLE_PLACEHOLDER},null,V,z));else return[createVNode(I,{class:"empty","i18n-key":e.LanguageKey.ARTICLE_PLACEHOLDER},null,8,["i18n-key"])]}),default:withCtx((D,O,V,z)=>{if(O)O(`<div data-v-04970b01${z}><div${ssrRenderAttrs({key:"list",name:"list-fade",class:"list"})}>`),ssrRenderList(e.articles,(U,Z)=>{O(ssrRenderComponent(L,{class:"list-item",article:U,key:Z},null,V,z))}),O(`</div><div class="loadmore" data-v-04970b01${z}><button class="button"${includeBooleanAttr(e.articleListStore.list.fetching||!e.hasMoreArticles)?" disabled":""} data-v-04970b01${z}><div class="text" data-v-04970b01${z}>`),e.articleListStore.list.fetching?O(ssrRenderComponent(y,{k:e.LanguageKey.ARTICLE_LIST_LOADING},null,V,z)):e.hasMoreArticles?O(ssrRenderComponent(y,{k:e.LanguageKey.ARTICLE_LIST_LOADMORE},null,V,z)):O(ssrRenderComponent(y,{k:e.LanguageKey.ARTICLE_LIST_NO_MORE},null,V,z)),O("</div>"),e.hasMoreArticles?O(`<span class="icon" data-v-04970b01${z}><i class="iconfont icon-loadmore" data-v-04970b01${z}></i></span>`):O("<!---->"),O("</button></div></div>");else return[createVNode("div",null,[createVNode(TransitionGroup,{key:"list",name:"list-fade",tag:"div",class:"list"},{default:withCtx(()=>[(openBlock(!0),createBlock(Fragment,null,renderList(e.articles,(U,Z)=>(openBlock(),createBlock(L,{class:"list-item",article:U,key:Z},null,8,["article"]))),128))]),_:1}),createVNode("div",{class:"loadmore"},[createVNode("button",{class:"button",disabled:e.articleListStore.list.fetching||!e.hasMoreArticles,onClick:e.loadmoreArticles},[createVNode("div",{class:"text"},[e.articleListStore.list.fetching?(openBlock(),createBlock(y,{key:0,k:e.LanguageKey.ARTICLE_LIST_LOADING},null,8,["k"])):e.hasMoreArticles?(openBlock(),createBlock(y,{key:1,k:e.LanguageKey.ARTICLE_LIST_LOADMORE},null,8,["k"])):(openBlock(),createBlock(y,{key:2,k:e.LanguageKey.ARTICLE_LIST_NO_MORE},null,8,["k"]))]),e.hasMoreArticles?(openBlock(),createBlock("span",{key:0,class:"icon"},[createVNode("i",{class:"iconfont icon-loadmore"})])):createCommentVNode("",!0)],8,["disabled","onClick"])])])]}),_:1},i)),t("</div>")}const _sfc_setup$1B=_sfc_main$1B.setup;_sfc_main$1B.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/flow/mobile/index.vue"),_sfc_setup$1B?_sfc_setup$1B(e,t):void 0};const MobileFlow=_export_sfc(_sfc_main$1B,[["ssrRender",_sfc_ssrRender$1B],["__scopeId","data-v-04970b01"]]),_sfc_main$1A=defineComponent({name:"FlowArticleListItem",props:{article:{type:Object,required:!0}},setup(e){const{globalState:t}=useEnhancer(),i=useIdentityStore(),s=computed(()=>i.isLikedPage(e.article.id)),c=isHybridType(e.article.origin),d=isReprintType(e.article.origin),g=isOriginalType(e.article.origin);return{LanguageKey,isLiked:s,isHybrid:c,isReprint:d,isOriginal:g,numberSplit,getThumbnailURL:E=>getArticleListThumbnailURL(E,t.imageExt.value.isWebP),getLanguageText:E=>E===Language.Chinese?"\u4E2D\u6587":"EN",getArticleDetailRoute,getCategoryFlowRoute,getTagFlowRoute}}}),item_vue_vue_type_style_index_0_scoped_c31daa80_lang="";function _sfc_ssrRender$1A(e,t,i,s,c,d,g,r){const y=resolveComponent("router-link"),E=resolveComponent("i18n"),w=resolveComponent("udate"),k=resolveComponent("placeholder");t(`<div${ssrRenderAttrs(mergeProps({class:"article-item"},s))} data-v-c31daa80><div class="item-background" style="${ssrRenderStyle({backgroundImage:`url(${e.getThumbnailURL(e.article.thumb)})`})}" data-v-c31daa80></div><div class="item-content" data-v-c31daa80>`),t(ssrRenderComponent(y,{class:"item-thumb",to:e.getArticleDetailRoute(e.article.id)},{default:withCtx((S,I,L,D)=>{if(I)I(`<span class="${ssrRenderClass([{original:e.isOriginal,hybrid:e.isHybrid,reprint:e.isReprint},"item-oirigin"])}" data-v-c31daa80${D}>`),e.isOriginal?I(ssrRenderComponent(E,{k:e.LanguageKey.ORIGIN_ORIGINAL},null,L,D)):e.isReprint?I(ssrRenderComponent(E,{k:e.LanguageKey.ORIGIN_REPRINT},null,L,D)):e.isHybrid?I(ssrRenderComponent(E,{k:e.LanguageKey.ORIGIN_HYBRID},null,L,D)):I("<!---->"),I(`</span><div class="image" style="${ssrRenderStyle({backgroundImage:`url(${e.getThumbnailURL(e.article.thumb)})`})}"${ssrRenderAttr("alt",e.article.title)}${ssrRenderAttr("title",e.article.title)} data-v-c31daa80${D}></div>`);else return[createVNode("span",{class:["item-oirigin",{original:e.isOriginal,hybrid:e.isHybrid,reprint:e.isReprint}]},[e.isOriginal?(openBlock(),createBlock(E,{key:0,k:e.LanguageKey.ORIGIN_ORIGINAL},null,8,["k"])):e.isReprint?(openBlock(),createBlock(E,{key:1,k:e.LanguageKey.ORIGIN_REPRINT},null,8,["k"])):e.isHybrid?(openBlock(),createBlock(E,{key:2,k:e.LanguageKey.ORIGIN_HYBRID},null,8,["k"])):createCommentVNode("",!0)],2),createVNode("div",{class:"image",style:{backgroundImage:`url(${e.getThumbnailURL(e.article.thumb)})`},alt:e.article.title,title:e.article.title},null,12,["alt","title"])]}),_:1},i)),t('<div class="item-body" data-v-c31daa80><div class="item-content" data-v-c31daa80><h5 class="title" data-v-c31daa80>'),t(ssrRenderComponent(y,{class:"link",to:e.getArticleDetailRoute(e.article.id),title:e.article.title},{default:withCtx((S,I,L,D)=>{if(I)I(`${ssrInterpolate(e.article.title)}`);else return[createTextVNode(toDisplayString(e.article.title),1)]}),_:1},i)),t(`<span class="language" data-v-c31daa80>${ssrInterpolate(e.getLanguageText(e.article.lang))}</span></h5><p class="description" style="${ssrRenderStyle({"-webkit-box-orient":"vertical"})}" data-v-c31daa80>${e.article.description}</p></div><div class="item-meta" data-v-c31daa80><span class="date" data-v-c31daa80><i class="iconfont icon-clock" data-v-c31daa80></i>`),t(ssrRenderComponent(w,{to:"ago",date:e.article.create_at},null,i)),t(`</span><span class="views" data-v-c31daa80><i class="iconfont icon-eye" data-v-c31daa80></i><span data-v-c31daa80>${ssrInterpolate(e.numberSplit(e.article.meta.views))}</span></span><span class="comments" data-v-c31daa80><i class="iconfont icon-comment" data-v-c31daa80></i><span data-v-c31daa80>${ssrInterpolate(e.article.meta.comments)}</span></span><span class="likes" data-v-c31daa80><i class="${ssrRenderClass([{liked:e.isLiked},"iconfont icon-like"])}" data-v-c31daa80></i><span data-v-c31daa80>${ssrInterpolate(e.article.meta.likes)}</span></span><span class="categories" data-v-c31daa80><i class="iconfont icon-category" data-v-c31daa80></i>`),t(ssrRenderComponent(k,{transition:!1,data:e.article.category.length},{placeholder:withCtx((S,I,L,D)=>{if(I)I(ssrRenderComponent(E,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,L,D));else return[createVNode(E,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,8,["k"])]}),default:withCtx((S,I,L,D)=>{if(I)I("<!--[-->"),ssrRenderList(e.article.category.slice(0,1),(O,V)=>{I(ssrRenderComponent(y,{key:V,to:e.getCategoryFlowRoute(O.slug)},{default:withCtx((z,U,Z,W)=>{if(U)U(ssrRenderComponent(E,{zh:O.name,en:O.slug},null,Z,W));else return[createVNode(E,{zh:O.name,en:O.slug},null,8,["zh","en"])]}),_:2},L,D))}),I("<!--]-->");else return[(openBlock(!0),createBlock(Fragment,null,renderList(e.article.category.slice(0,1),(O,V)=>(openBlock(),createBlock(y,{key:V,to:e.getCategoryFlowRoute(O.slug)},{default:withCtx(()=>[createVNode(E,{zh:O.name,en:O.slug},null,8,["zh","en"])]),_:2},1032,["to"]))),128))]}),_:1},i)),t("</span></div></div></div></div>")}const _sfc_setup$1A=_sfc_main$1A.setup;_sfc_main$1A.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/flow/desktop/item.vue"),_sfc_setup$1A?_sfc_setup$1A(e,t):void 0};const ListItem=_export_sfc(_sfc_main$1A,[["ssrRender",_sfc_ssrRender$1A],["__scopeId","data-v-c31daa80"]]),_sfc_main$1z=defineComponent({name:"FlowArticleList",components:{ListItem},props:{articles:{type:Array,required:!0},pagination:Object,fetching:{type:Boolean,required:!0},mammon:{type:Boolean,default:!0}},emits:["loadmore"],setup(e,t){const{isDarkTheme:i}=useEnhancer(),s=computed(()=>e.pagination?e.pagination.current_page<e.pagination.total_page:!1);return{LanguageKey,isDarkTheme:i,isLoadMoreEnabled:s,handleLoadmore:()=>{t.emit("loadmore")}}}}),list_vue_vue_type_style_index_0_scoped_b343d68d_lang="";function _sfc_ssrRender$1z(e,t,i,s,c,d,g,r){var V;const y=resolveComponent("placeholder"),E=resolveComponent("skeleton-base"),w=resolveComponent("skeleton-line"),k=resolveComponent("empty"),S=resolveComponent("client-only"),I=resolveComponent("Adsense"),L=resolveComponent("list-item"),D=resolveComponent("webfont"),O=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:"articles"},s))} data-v-b343d68d><div class="article-list" data-v-b343d68d>`),t(ssrRenderComponent(y,{data:e.articles.length,loading:!e.articles.length&&e.fetching},{loading:withCtx((z,U,Z,W)=>{if(U)U(`<ul class="article-list-skeleton" data-v-b343d68d${W}><!--[-->`),ssrRenderList(6,ne=>{U(`<li class="item" data-v-b343d68d${W}><div class="thumb" data-v-b343d68d${W}>`),U(ssrRenderComponent(E,null,null,Z,W)),U(`</div><div class="content" data-v-b343d68d${W}><div class="title" data-v-b343d68d${W}>`),U(ssrRenderComponent(w,null,null,Z,W)),U(`</div><div class="description" data-v-b343d68d${W}><!--[-->`),ssrRenderList(2,re=>{U(`<div class="line-item" data-v-b343d68d${W}>`),U(ssrRenderComponent(w,null,null,Z,W)),U("</div>")}),U("<!--]--></div>"),U(ssrRenderComponent(w,{class:"meta"},null,Z,W)),U("</div></li>")}),U("<!--]--></ul>");else return[createVNode("ul",{class:"article-list-skeleton",key:"skeleton"},[(openBlock(),createBlock(Fragment,null,renderList(6,ne=>createVNode("li",{key:ne,class:"item"},[createVNode("div",{class:"thumb"},[createVNode(E)]),createVNode("div",{class:"content"},[createVNode("div",{class:"title"},[createVNode(w)]),createVNode("div",{class:"description"},[(openBlock(),createBlock(Fragment,null,renderList(2,re=>createVNode("div",{class:"line-item",key:re},[createVNode(w)])),64))]),createVNode(w,{class:"meta"})])])),64))])]}),placeholder:withCtx((z,U,Z,W)=>{if(U)U(ssrRenderComponent(k,{class:"empty","i18n-key":e.LanguageKey.ARTICLE_PLACEHOLDER},null,Z,W));else return[createVNode(k,{class:"empty","i18n-key":e.LanguageKey.ARTICLE_PLACEHOLDER},null,8,["i18n-key"])]}),default:withCtx((z,U,Z,W)=>{if(U)U(`<div data-v-b343d68d${W}>`),U(ssrRenderComponent(S,null,{default:withCtx((ne,re,ie,Ce)=>{if(re)e.mammon?(re("<!--[-->"),e.isDarkTheme?re(ssrRenderComponent(I,{"ins-class":"mammon-ins","data-ad-format":"fluid","data-ad-layout-key":"-hj-9+3a-97+6s","data-ad-slot":"1765379407",class:"article-list-mammon"},null,ie,Ce)):re(ssrRenderComponent(I,{"ins-class":"mammon-ins","data-ad-format":"fluid","data-ad-layout-key":"-hj-9+3a-97+6s","data-ad-slot":"1148538406",class:"article-list-mammon"},null,ie,Ce)),re("<!--]-->")):re("<!---->");else return[e.mammon?(openBlock(),createBlock(Fragment,{key:0},[e.isDarkTheme?(openBlock(),createBlock(I,{key:0,"ins-class":"mammon-ins","data-ad-format":"fluid","data-ad-layout-key":"-hj-9+3a-97+6s","data-ad-slot":"1765379407",class:"article-list-mammon"})):(openBlock(),createBlock(I,{key:1,"ins-class":"mammon-ins","data-ad-format":"fluid","data-ad-layout-key":"-hj-9+3a-97+6s","data-ad-slot":"1148538406",class:"article-list-mammon"}))],64)):createCommentVNode("",!0)]}),_:1},Z,W)),U("<!--[-->"),ssrRenderList(e.articles,ne=>{U(ssrRenderComponent(L,{class:"list-item",key:ne.id,article:ne},null,Z,W))}),U("<!--]--></div>");else return[createVNode("div",{key:"list"},[createVNode(S,null,{default:withCtx(()=>[e.mammon?(openBlock(),createBlock(Fragment,{key:0},[e.isDarkTheme?(openBlock(),createBlock(I,{key:0,"ins-class":"mammon-ins","data-ad-format":"fluid","data-ad-layout-key":"-hj-9+3a-97+6s","data-ad-slot":"1765379407",class:"article-list-mammon"})):(openBlock(),createBlock(I,{key:1,"ins-class":"mammon-ins","data-ad-format":"fluid","data-ad-layout-key":"-hj-9+3a-97+6s","data-ad-slot":"1148538406",class:"article-list-mammon"}))],64)):createCommentVNode("",!0)]),_:1}),createVNode(TransitionGroup,{name:"list-fade"},{default:withCtx(()=>[(openBlock(!0),createBlock(Fragment,null,renderList(e.articles,ne=>(openBlock(),createBlock(L,{class:"list-item",key:ne.id,article:ne},null,8,["article"]))),128))]),_:1})])]}),_:1},i)),t(`</div><button class="article-load"${includeBooleanAttr(e.fetching||!e.isLoadMoreEnabled)?" disabled":""} data-v-b343d68d><div class="background" data-v-b343d68d><span class="left" data-v-b343d68d></span><span class="right" data-v-b343d68d></span></div><div class="content" data-v-b343d68d><span class="left" data-v-b343d68d>`),e.fetching?t("<!--[-->\u2022\u2022\u2022<!--]-->"):t(`<!--[-->${ssrInterpolate(e.articles.length)} / ${ssrInterpolate((V=e.pagination)==null?void 0:V.total)}<!--]-->`),t('</span><span class="right" data-v-b343d68d>'),t(ssrRenderComponent(D,{bolder:"",uppercase:""},{default:withCtx((z,U,Z,W)=>{if(U)e.fetching?U(ssrRenderComponent(O,{k:e.LanguageKey.ARTICLE_LIST_LOADING},null,Z,W)):e.isLoadMoreEnabled?U(ssrRenderComponent(O,{k:e.LanguageKey.ARTICLE_LIST_LOADMORE},null,Z,W)):U(ssrRenderComponent(O,{k:e.LanguageKey.ARTICLE_LIST_NO_MORE},null,Z,W));else return[e.fetching?(openBlock(),createBlock(O,{key:0,k:e.LanguageKey.ARTICLE_LIST_LOADING},null,8,["k"])):e.isLoadMoreEnabled?(openBlock(),createBlock(O,{key:1,k:e.LanguageKey.ARTICLE_LIST_LOADMORE},null,8,["k"])):(openBlock(),createBlock(O,{key:2,k:e.LanguageKey.ARTICLE_LIST_NO_MORE},null,8,["k"]))]}),_:1},i)),t('<i class="iconfont icon-loadmore" data-v-b343d68d></i></span></div></button></div>')}const _sfc_setup$1z=_sfc_main$1z.setup;_sfc_main$1z.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/flow/desktop/list.vue"),_sfc_setup$1z?_sfc_setup$1z(e,t):void 0};const ArticleList=_export_sfc(_sfc_main$1z,[["ssrRender",_sfc_ssrRender$1z],["__scopeId","data-v-b343d68d"]]);function isObject$2(e){return e!==null&&typeof e=="object"&&"constructor"in e&&e.constructor===Object}function extend$2(e={},t={}){Object.keys(t).forEach(i=>{typeof e[i]>"u"?e[i]=t[i]:isObject$2(t[i])&&isObject$2(e[i])&&Object.keys(t[i]).length>0&&extend$2(e[i],t[i])})}const ssrDocument={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function getDocument(){const e=typeof document<"u"?document:{};return extend$2(e,ssrDocument),e}const ssrWindow={document:ssrDocument,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(e){return typeof setTimeout>"u"?(e(),null):setTimeout(e,0)},cancelAnimationFrame(e){typeof setTimeout>"u"||clearTimeout(e)}};function getWindow(){const e=typeof window<"u"?window:{};return extend$2(e,ssrWindow),e}function makeReactive(e){const t=e.__proto__;Object.defineProperty(e,"__proto__",{get(){return t},set(i){t.__proto__=i}})}class Dom7 extends Array{constructor(t){typeof t=="number"?super(t):(super(...t||[]),makeReactive(this))}}function arrayFlat(e=[]){const t=[];return e.forEach(i=>{Array.isArray(i)?t.push(...arrayFlat(i)):t.push(i)}),t}function arrayFilter(e,t){return Array.prototype.filter.call(e,t)}function arrayUnique(e){const t=[];for(let i=0;i<e.length;i+=1)t.indexOf(e[i])===-1&&t.push(e[i]);return t}function qsa(e,t){if(typeof e!="string")return[e];const i=[],s=t.querySelectorAll(e);for(let c=0;c<s.length;c+=1)i.push(s[c]);return i}function $(e,t){const i=getWindow(),s=getDocument();let c=[];if(!t&&e instanceof Dom7)return e;if(!e)return new Dom7(c);if(typeof e=="string"){const d=e.trim();if(d.indexOf("<")>=0&&d.indexOf(">")>=0){let g="div";d.indexOf("<li")===0&&(g="ul"),d.indexOf("<tr")===0&&(g="tbody"),(d.indexOf("<td")===0||d.indexOf("<th")===0)&&(g="tr"),d.indexOf("<tbody")===0&&(g="table"),d.indexOf("<option")===0&&(g="select");const r=s.createElement(g);r.innerHTML=d;for(let y=0;y<r.childNodes.length;y+=1)c.push(r.childNodes[y])}else c=qsa(e.trim(),t||s)}else if(e.nodeType||e===i||e===s)c.push(e);else if(Array.isArray(e)){if(e instanceof Dom7)return e;c=e}return new Dom7(arrayUnique(c))}$.fn=Dom7.prototype;function addClass(...e){const t=arrayFlat(e.map(i=>i.split(" ")));return this.forEach(i=>{i.classList.add(...t)}),this}function removeClass(...e){const t=arrayFlat(e.map(i=>i.split(" ")));return this.forEach(i=>{i.classList.remove(...t)}),this}function toggleClass(...e){const t=arrayFlat(e.map(i=>i.split(" ")));this.forEach(i=>{t.forEach(s=>{i.classList.toggle(s)})})}function hasClass(...e){const t=arrayFlat(e.map(i=>i.split(" ")));return arrayFilter(this,i=>t.filter(s=>i.classList.contains(s)).length>0).length>0}function attr(e,t){if(arguments.length===1&&typeof e=="string")return this[0]?this[0].getAttribute(e):void 0;for(let i=0;i<this.length;i+=1)if(arguments.length===2)this[i].setAttribute(e,t);else for(const s in e)this[i][s]=e[s],this[i].setAttribute(s,e[s]);return this}function removeAttr(e){for(let t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this}function transform(e){for(let t=0;t<this.length;t+=1)this[t].style.transform=e;return this}function transition$1(e){for(let t=0;t<this.length;t+=1)this[t].style.transitionDuration=typeof e!="string"?`${e}ms`:e;return this}function on(...e){let[t,i,s,c]=e;typeof e[1]=="function"&&([t,s,c]=e,i=void 0),c||(c=!1);function d(E){const w=E.target;if(!w)return;const k=E.target.dom7EventData||[];if(k.indexOf(E)<0&&k.unshift(E),$(w).is(i))s.apply(w,k);else{const S=$(w).parents();for(let I=0;I<S.length;I+=1)$(S[I]).is(i)&&s.apply(S[I],k)}}function g(E){const w=E&&E.target?E.target.dom7EventData||[]:[];w.indexOf(E)<0&&w.unshift(E),s.apply(this,w)}const r=t.split(" ");let y;for(let E=0;E<this.length;E+=1){const w=this[E];if(i)for(y=0;y<r.length;y+=1){const k=r[y];w.dom7LiveListeners||(w.dom7LiveListeners={}),w.dom7LiveListeners[k]||(w.dom7LiveListeners[k]=[]),w.dom7LiveListeners[k].push({listener:s,proxyListener:d}),w.addEventListener(k,d,c)}else for(y=0;y<r.length;y+=1){const k=r[y];w.dom7Listeners||(w.dom7Listeners={}),w.dom7Listeners[k]||(w.dom7Listeners[k]=[]),w.dom7Listeners[k].push({listener:s,proxyListener:g}),w.addEventListener(k,g,c)}}return this}function off(...e){let[t,i,s,c]=e;typeof e[1]=="function"&&([t,s,c]=e,i=void 0),c||(c=!1);const d=t.split(" ");for(let g=0;g<d.length;g+=1){const r=d[g];for(let y=0;y<this.length;y+=1){const E=this[y];let w;if(!i&&E.dom7Listeners?w=E.dom7Listeners[r]:i&&E.dom7LiveListeners&&(w=E.dom7LiveListeners[r]),w&&w.length)for(let k=w.length-1;k>=0;k-=1){const S=w[k];s&&S.listener===s||s&&S.listener&&S.listener.dom7proxy&&S.listener.dom7proxy===s?(E.removeEventListener(r,S.proxyListener,c),w.splice(k,1)):s||(E.removeEventListener(r,S.proxyListener,c),w.splice(k,1))}}}return this}function trigger(...e){const t=getWindow(),i=e[0].split(" "),s=e[1];for(let c=0;c<i.length;c+=1){const d=i[c];for(let g=0;g<this.length;g+=1){const r=this[g];if(t.CustomEvent){const y=new t.CustomEvent(d,{detail:s,bubbles:!0,cancelable:!0});r.dom7EventData=e.filter((E,w)=>w>0),r.dispatchEvent(y),r.dom7EventData=[],delete r.dom7EventData}}}return this}function transitionEnd$1(e){const t=this;function i(s){s.target===this&&(e.call(this,s),t.off("transitionend",i))}return e&&t.on("transitionend",i),this}function outerWidth(e){if(this.length>0){if(e){const t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null}function outerHeight(e){if(this.length>0){if(e){const t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null}function offset(){if(this.length>0){const e=getWindow(),t=getDocument(),i=this[0],s=i.getBoundingClientRect(),c=t.body,d=i.clientTop||c.clientTop||0,g=i.clientLeft||c.clientLeft||0,r=i===e?e.scrollY:i.scrollTop,y=i===e?e.scrollX:i.scrollLeft;return{top:s.top+r-d,left:s.left+y-g}}return null}function styles(){const e=getWindow();return this[0]?e.getComputedStyle(this[0],null):{}}function css(e,t){const i=getWindow();let s;if(arguments.length===1)if(typeof e=="string"){if(this[0])return i.getComputedStyle(this[0],null).getPropertyValue(e)}else{for(s=0;s<this.length;s+=1)for(const c in e)this[s].style[c]=e[c];return this}if(arguments.length===2&&typeof e=="string"){for(s=0;s<this.length;s+=1)this[s].style[e]=t;return this}return this}function each(e){return e?(this.forEach((t,i)=>{e.apply(t,[t,i])}),this):this}function filter$1(e){const t=arrayFilter(this,e);return $(t)}function html(e){if(typeof e>"u")return this[0]?this[0].innerHTML:null;for(let t=0;t<this.length;t+=1)this[t].innerHTML=e;return this}function text(e){if(typeof e>"u")return this[0]?this[0].textContent.trim():null;for(let t=0;t<this.length;t+=1)this[t].textContent=e;return this}function is(e){const t=getWindow(),i=getDocument(),s=this[0];let c,d;if(!s||typeof e>"u")return!1;if(typeof e=="string"){if(s.matches)return s.matches(e);if(s.webkitMatchesSelector)return s.webkitMatchesSelector(e);if(s.msMatchesSelector)return s.msMatchesSelector(e);for(c=$(e),d=0;d<c.length;d+=1)if(c[d]===s)return!0;return!1}if(e===i)return s===i;if(e===t)return s===t;if(e.nodeType||e instanceof Dom7){for(c=e.nodeType?[e]:e,d=0;d<c.length;d+=1)if(c[d]===s)return!0;return!1}return!1}function index(){let e=this[0],t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function eq(e){if(typeof e>"u")return this;const t=this.length;if(e>t-1)return $([]);if(e<0){const i=t+e;return i<0?$([]):$([this[i]])}return $([this[e]])}function append(...e){let t;const i=getDocument();for(let s=0;s<e.length;s+=1){t=e[s];for(let c=0;c<this.length;c+=1)if(typeof t=="string"){const d=i.createElement("div");for(d.innerHTML=t;d.firstChild;)this[c].appendChild(d.firstChild)}else if(t instanceof Dom7)for(let d=0;d<t.length;d+=1)this[c].appendChild(t[d]);else this[c].appendChild(t)}return this}function prepend(e){const t=getDocument();let i,s;for(i=0;i<this.length;i+=1)if(typeof e=="string"){const c=t.createElement("div");for(c.innerHTML=e,s=c.childNodes.length-1;s>=0;s-=1)this[i].insertBefore(c.childNodes[s],this[i].childNodes[0])}else if(e instanceof Dom7)for(s=0;s<e.length;s+=1)this[i].insertBefore(e[s],this[i].childNodes[0]);else this[i].insertBefore(e,this[i].childNodes[0]);return this}function next(e){return this.length>0?e?this[0].nextElementSibling&&$(this[0].nextElementSibling).is(e)?$([this[0].nextElementSibling]):$([]):this[0].nextElementSibling?$([this[0].nextElementSibling]):$([]):$([])}function nextAll(e){const t=[];let i=this[0];if(!i)return $([]);for(;i.nextElementSibling;){const s=i.nextElementSibling;e?$(s).is(e)&&t.push(s):t.push(s),i=s}return $(t)}function prev(e){if(this.length>0){const t=this[0];return e?t.previousElementSibling&&$(t.previousElementSibling).is(e)?$([t.previousElementSibling]):$([]):t.previousElementSibling?$([t.previousElementSibling]):$([])}return $([])}function prevAll(e){const t=[];let i=this[0];if(!i)return $([]);for(;i.previousElementSibling;){const s=i.previousElementSibling;e?$(s).is(e)&&t.push(s):t.push(s),i=s}return $(t)}function parent(e){const t=[];for(let i=0;i<this.length;i+=1)this[i].parentNode!==null&&(e?$(this[i].parentNode).is(e)&&t.push(this[i].parentNode):t.push(this[i].parentNode));return $(t)}function parents(e){const t=[];for(let i=0;i<this.length;i+=1){let s=this[i].parentNode;for(;s;)e?$(s).is(e)&&t.push(s):t.push(s),s=s.parentNode}return $(t)}function closest(e){let t=this;return typeof e>"u"?$([]):(t.is(e)||(t=t.parents(e).eq(0)),t)}function find(e){const t=[];for(let i=0;i<this.length;i+=1){const s=this[i].querySelectorAll(e);for(let c=0;c<s.length;c+=1)t.push(s[c])}return $(t)}function children(e){const t=[];for(let i=0;i<this.length;i+=1){const s=this[i].children;for(let c=0;c<s.length;c+=1)(!e||$(s[c]).is(e))&&t.push(s[c])}return $(t)}function remove(){for(let e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}const Methods={addClass,removeClass,hasClass,toggleClass,attr,removeAttr,transform,transition:transition$1,on,off,trigger,transitionEnd:transitionEnd$1,outerWidth,outerHeight,styles,offset,css,each,html,text,is,index,eq,append,prepend,next,nextAll,prev,prevAll,parent,parents,closest,find,children,filter:filter$1,remove};Object.keys(Methods).forEach(e=>{Object.defineProperty($.fn,e,{value:Methods[e],writable:!0})});function deleteProps(e){const t=e;Object.keys(t).forEach(i=>{try{t[i]=null}catch{}try{delete t[i]}catch{}})}function nextTick(e,t){return t===void 0&&(t=0),setTimeout(e,t)}function now(){return Date.now()}function getComputedStyle$1(e){const t=getWindow();let i;return t.getComputedStyle&&(i=t.getComputedStyle(e,null)),!i&&e.currentStyle&&(i=e.currentStyle),i||(i=e.style),i}function getTranslate(e,t){t===void 0&&(t="x");const i=getWindow();let s,c,d;const g=getComputedStyle$1(e);return i.WebKitCSSMatrix?(c=g.transform||g.webkitTransform,c.split(",").length>6&&(c=c.split(", ").map(r=>r.replace(",",".")).join(", ")),d=new i.WebKitCSSMatrix(c==="none"?"":c)):(d=g.MozTransform||g.OTransform||g.MsTransform||g.msTransform||g.transform||g.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),s=d.toString().split(",")),t==="x"&&(i.WebKitCSSMatrix?c=d.m41:s.length===16?c=parseFloat(s[12]):c=parseFloat(s[4])),t==="y"&&(i.WebKitCSSMatrix?c=d.m42:s.length===16?c=parseFloat(s[13]):c=parseFloat(s[5])),c||0}function isObject$1(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function isNode(e){return typeof window<"u"&&typeof window.HTMLElement<"u"?e instanceof HTMLElement:e&&(e.nodeType===1||e.nodeType===11)}function extend$1(){const e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let i=1;i<arguments.length;i+=1){const s=i<0||arguments.length<=i?void 0:arguments[i];if(s!=null&&!isNode(s)){const c=Object.keys(Object(s)).filter(d=>t.indexOf(d)<0);for(let d=0,g=c.length;d<g;d+=1){const r=c[d],y=Object.getOwnPropertyDescriptor(s,r);y!==void 0&&y.enumerable&&(isObject$1(e[r])&&isObject$1(s[r])?s[r].__swiper__?e[r]=s[r]:extend$1(e[r],s[r]):!isObject$1(e[r])&&isObject$1(s[r])?(e[r]={},s[r].__swiper__?e[r]=s[r]:extend$1(e[r],s[r])):e[r]=s[r])}}}return e}function setCSSProperty(e,t,i){e.style.setProperty(t,i)}function animateCSSModeScroll(e){let{swiper:t,targetPosition:i,side:s}=e;const c=getWindow(),d=-t.translate;let g=null,r;const y=t.params.speed;t.wrapperEl.style.scrollSnapType="none",c.cancelAnimationFrame(t.cssModeFrameID);const E=i>d?"next":"prev",w=(S,I)=>E==="next"&&S>=I||E==="prev"&&S<=I,k=()=>{r=new Date().getTime(),g===null&&(g=r);const S=Math.max(Math.min((r-g)/y,1),0),I=.5-Math.cos(S*Math.PI)/2;let L=d+I*(i-d);if(w(L,i)&&(L=i),t.wrapperEl.scrollTo({[s]:L}),w(L,i)){t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[s]:L})}),c.cancelAnimationFrame(t.cssModeFrameID);return}t.cssModeFrameID=c.requestAnimationFrame(k)};k()}let support;function calcSupport(){const e=getWindow(),t=getDocument();return{smoothScroll:t.documentElement&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),passiveListener:function(){let s=!1;try{const c=Object.defineProperty({},"passive",{get(){s=!0}});e.addEventListener("testPassiveListener",null,c)}catch{}return s}(),gestures:function(){return"ongesturestart"in e}()}}function getSupport(){return support||(support=calcSupport()),support}let deviceCached;function calcDevice(e){let{userAgent:t}=e===void 0?{}:e;const i=getSupport(),s=getWindow(),c=s.navigator.platform,d=t||s.navigator.userAgent,g={ios:!1,android:!1},r=s.screen.width,y=s.screen.height,E=d.match(/(Android);?[\s\/]+([\d.]+)?/);let w=d.match(/(iPad).*OS\s([\d_]+)/);const k=d.match(/(iPod)(.*OS\s([\d_]+))?/),S=!w&&d.match(/(iPhone\sOS|iOS)\s([\d_]+)/),I=c==="Win32";let L=c==="MacIntel";const D=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!w&&L&&i.touch&&D.indexOf(`${r}x${y}`)>=0&&(w=d.match(/(Version)\/([\d.]+)/),w||(w=[0,1,"13_0_0"]),L=!1),E&&!I&&(g.os="android",g.android=!0),(w||S||k)&&(g.os="ios",g.ios=!0),g}function getDevice(e){return e===void 0&&(e={}),deviceCached||(deviceCached=calcDevice(e)),deviceCached}let browser$1;function calcBrowser(){const e=getWindow();function t(){const i=e.navigator.userAgent.toLowerCase();return i.indexOf("safari")>=0&&i.indexOf("chrome")<0&&i.indexOf("android")<0}return{isSafari:t(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}function getBrowser(){return browser$1||(browser$1=calcBrowser()),browser$1}function Resize(e){let{swiper:t,on:i,emit:s}=e;const c=getWindow();let d=null,g=null;const r=()=>{!t||t.destroyed||!t.initialized||(s("beforeResize"),s("resize"))},y=()=>{!t||t.destroyed||!t.initialized||(d=new ResizeObserver(k=>{g=c.requestAnimationFrame(()=>{const{width:S,height:I}=t;let L=S,D=I;k.forEach(O=>{let{contentBoxSize:V,contentRect:z,target:U}=O;U&&U!==t.el||(L=z?z.width:(V[0]||V).inlineSize,D=z?z.height:(V[0]||V).blockSize)}),(L!==S||D!==I)&&r()})}),d.observe(t.el))},E=()=>{g&&c.cancelAnimationFrame(g),d&&d.unobserve&&t.el&&(d.unobserve(t.el),d=null)},w=()=>{!t||t.destroyed||!t.initialized||s("orientationchange")};i("init",()=>{if(t.params.resizeObserver&&typeof c.ResizeObserver<"u"){y();return}c.addEventListener("resize",r),c.addEventListener("orientationchange",w)}),i("destroy",()=>{E(),c.removeEventListener("resize",r),c.removeEventListener("orientationchange",w)})}function Observer(e){let{swiper:t,extendParams:i,on:s,emit:c}=e;const d=[],g=getWindow(),r=function(w,k){k===void 0&&(k={});const S=g.MutationObserver||g.WebkitMutationObserver,I=new S(L=>{if(L.length===1){c("observerUpdate",L[0]);return}const D=function(){c("observerUpdate",L[0])};g.requestAnimationFrame?g.requestAnimationFrame(D):g.setTimeout(D,0)});I.observe(w,{attributes:typeof k.attributes>"u"?!0:k.attributes,childList:typeof k.childList>"u"?!0:k.childList,characterData:typeof k.characterData>"u"?!0:k.characterData}),d.push(I)},y=()=>{if(!!t.params.observer){if(t.params.observeParents){const w=t.$el.parents();for(let k=0;k<w.length;k+=1)r(w[k])}r(t.$el[0],{childList:t.params.observeSlideChildren}),r(t.$wrapperEl[0],{attributes:!1})}},E=()=>{d.forEach(w=>{w.disconnect()}),d.splice(0,d.length)};i({observer:!1,observeParents:!1,observeSlideChildren:!1}),s("init",y),s("destroy",E)}const eventsEmitter={on(e,t,i){const s=this;if(!s.eventsListeners||s.destroyed||typeof t!="function")return s;const c=i?"unshift":"push";return e.split(" ").forEach(d=>{s.eventsListeners[d]||(s.eventsListeners[d]=[]),s.eventsListeners[d][c](t)}),s},once(e,t,i){const s=this;if(!s.eventsListeners||s.destroyed||typeof t!="function")return s;function c(){s.off(e,c),c.__emitterProxy&&delete c.__emitterProxy;for(var d=arguments.length,g=new Array(d),r=0;r<d;r++)g[r]=arguments[r];t.apply(s,g)}return c.__emitterProxy=t,s.on(e,c,i)},onAny(e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;const s=t?"unshift":"push";return i.eventsAnyListeners.indexOf(e)<0&&i.eventsAnyListeners[s](e),i},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsAnyListeners)return t;const i=t.eventsAnyListeners.indexOf(e);return i>=0&&t.eventsAnyListeners.splice(i,1),t},off(e,t){const i=this;return!i.eventsListeners||i.destroyed||!i.eventsListeners||e.split(" ").forEach(s=>{typeof t>"u"?i.eventsListeners[s]=[]:i.eventsListeners[s]&&i.eventsListeners[s].forEach((c,d)=>{(c===t||c.__emitterProxy&&c.__emitterProxy===t)&&i.eventsListeners[s].splice(d,1)})}),i},emit(){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsListeners)return e;let t,i,s;for(var c=arguments.length,d=new Array(c),g=0;g<c;g++)d[g]=arguments[g];return typeof d[0]=="string"||Array.isArray(d[0])?(t=d[0],i=d.slice(1,d.length),s=e):(t=d[0].events,i=d[0].data,s=d[0].context||e),i.unshift(s),(Array.isArray(t)?t:t.split(" ")).forEach(y=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(E=>{E.apply(s,[y,...i])}),e.eventsListeners&&e.eventsListeners[y]&&e.eventsListeners[y].forEach(E=>{E.apply(s,i)})}),e}};function updateSize(){const e=this;let t,i;const s=e.$el;typeof e.params.width<"u"&&e.params.width!==null?t=e.params.width:t=s[0].clientWidth,typeof e.params.height<"u"&&e.params.height!==null?i=e.params.height:i=s[0].clientHeight,!(t===0&&e.isHorizontal()||i===0&&e.isVertical())&&(t=t-parseInt(s.css("padding-left")||0,10)-parseInt(s.css("padding-right")||0,10),i=i-parseInt(s.css("padding-top")||0,10)-parseInt(s.css("padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(i)&&(i=0),Object.assign(e,{width:t,height:i,size:e.isHorizontal()?t:i}))}function updateSlides(){const e=this;function t(we){return e.isHorizontal()?we:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[we]}function i(we,fe){return parseFloat(we.getPropertyValue(t(fe))||0)}const s=e.params,{$wrapperEl:c,size:d,rtlTranslate:g,wrongRTL:r}=e,y=e.virtual&&s.virtual.enabled,E=y?e.virtual.slides.length:e.slides.length,w=c.children(`.${e.params.slideClass}`),k=y?e.virtual.slides.length:w.length;let S=[];const I=[],L=[];let D=s.slidesOffsetBefore;typeof D=="function"&&(D=s.slidesOffsetBefore.call(e));let O=s.slidesOffsetAfter;typeof O=="function"&&(O=s.slidesOffsetAfter.call(e));const V=e.snapGrid.length,z=e.slidesGrid.length;let U=s.spaceBetween,Z=-D,W=0,ne=0;if(typeof d>"u")return;typeof U=="string"&&U.indexOf("%")>=0&&(U=parseFloat(U.replace("%",""))/100*d),e.virtualSize=-U,g?w.css({marginLeft:"",marginBottom:"",marginTop:""}):w.css({marginRight:"",marginBottom:"",marginTop:""}),s.centeredSlides&&s.cssMode&&(setCSSProperty(e.wrapperEl,"--swiper-centered-offset-before",""),setCSSProperty(e.wrapperEl,"--swiper-centered-offset-after",""));const re=s.grid&&s.grid.rows>1&&e.grid;re&&e.grid.initSlides(k);let ie;const Ce=s.slidesPerView==="auto"&&s.breakpoints&&Object.keys(s.breakpoints).filter(we=>typeof s.breakpoints[we].slidesPerView<"u").length>0;for(let we=0;we<k;we+=1){ie=0;const fe=w.eq(we);if(re&&e.grid.updateSlide(we,fe,k,t),fe.css("display")!=="none"){if(s.slidesPerView==="auto"){Ce&&(w[we].style[t("width")]="");const de=getComputedStyle(fe[0]),Le=fe[0].style.transform,Ge=fe[0].style.webkitTransform;if(Le&&(fe[0].style.transform="none"),Ge&&(fe[0].style.webkitTransform="none"),s.roundLengths)ie=e.isHorizontal()?fe.outerWidth(!0):fe.outerHeight(!0);else{const wt=i(de,"width"),Te=i(de,"padding-left"),ze=i(de,"padding-right"),Ke=i(de,"margin-left"),ut=i(de,"margin-right"),Nt=de.getPropertyValue("box-sizing");if(Nt&&Nt==="border-box")ie=wt+Ke+ut;else{const{clientWidth:an,offsetWidth:un}=fe[0];ie=wt+Te+ze+Ke+ut+(un-an)}}Le&&(fe[0].style.transform=Le),Ge&&(fe[0].style.webkitTransform=Ge),s.roundLengths&&(ie=Math.floor(ie))}else ie=(d-(s.slidesPerView-1)*U)/s.slidesPerView,s.roundLengths&&(ie=Math.floor(ie)),w[we]&&(w[we].style[t("width")]=`${ie}px`);w[we]&&(w[we].swiperSlideSize=ie),L.push(ie),s.centeredSlides?(Z=Z+ie/2+W/2+U,W===0&&we!==0&&(Z=Z-d/2-U),we===0&&(Z=Z-d/2-U),Math.abs(Z)<1/1e3&&(Z=0),s.roundLengths&&(Z=Math.floor(Z)),ne%s.slidesPerGroup===0&&S.push(Z),I.push(Z)):(s.roundLengths&&(Z=Math.floor(Z)),(ne-Math.min(e.params.slidesPerGroupSkip,ne))%e.params.slidesPerGroup===0&&S.push(Z),I.push(Z),Z=Z+ie+U),e.virtualSize+=ie+U,W=ie,ne+=1}}if(e.virtualSize=Math.max(e.virtualSize,d)+O,g&&r&&(s.effect==="slide"||s.effect==="coverflow")&&c.css({width:`${e.virtualSize+s.spaceBetween}px`}),s.setWrapperSize&&c.css({[t("width")]:`${e.virtualSize+s.spaceBetween}px`}),re&&e.grid.updateWrapperSize(ie,S,t),!s.centeredSlides){const we=[];for(let fe=0;fe<S.length;fe+=1){let de=S[fe];s.roundLengths&&(de=Math.floor(de)),S[fe]<=e.virtualSize-d&&we.push(de)}S=we,Math.floor(e.virtualSize-d)-Math.floor(S[S.length-1])>1&&S.push(e.virtualSize-d)}if(S.length===0&&(S=[0]),s.spaceBetween!==0){const we=e.isHorizontal()&&g?"marginLeft":t("marginRight");w.filter((fe,de)=>s.cssMode?de!==w.length-1:!0).css({[we]:`${U}px`})}if(s.centeredSlides&&s.centeredSlidesBounds){let we=0;L.forEach(de=>{we+=de+(s.spaceBetween?s.spaceBetween:0)}),we-=s.spaceBetween;const fe=we-d;S=S.map(de=>de<0?-D:de>fe?fe+O:de)}if(s.centerInsufficientSlides){let we=0;if(L.forEach(fe=>{we+=fe+(s.spaceBetween?s.spaceBetween:0)}),we-=s.spaceBetween,we<d){const fe=(d-we)/2;S.forEach((de,Le)=>{S[Le]=de-fe}),I.forEach((de,Le)=>{I[Le]=de+fe})}}if(Object.assign(e,{slides:w,snapGrid:S,slidesGrid:I,slidesSizesGrid:L}),s.centeredSlides&&s.cssMode&&!s.centeredSlidesBounds){setCSSProperty(e.wrapperEl,"--swiper-centered-offset-before",`${-S[0]}px`),setCSSProperty(e.wrapperEl,"--swiper-centered-offset-after",`${e.size/2-L[L.length-1]/2}px`);const we=-e.snapGrid[0],fe=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map(de=>de+we),e.slidesGrid=e.slidesGrid.map(de=>de+fe)}if(k!==E&&e.emit("slidesLengthChange"),S.length!==V&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),I.length!==z&&e.emit("slidesGridLengthChange"),s.watchSlidesProgress&&e.updateSlidesOffset(),!y&&!s.cssMode&&(s.effect==="slide"||s.effect==="fade")){const we=`${s.containerModifierClass}backface-hidden`,fe=e.$el.hasClass(we);k<=s.maxBackfaceHiddenSlides?fe||e.$el.addClass(we):fe&&e.$el.removeClass(we)}}function updateAutoHeight(e){const t=this,i=[],s=t.virtual&&t.params.virtual.enabled;let c=0,d;typeof e=="number"?t.setTransition(e):e===!0&&t.setTransition(t.params.speed);const g=r=>s?t.slides.filter(y=>parseInt(y.getAttribute("data-swiper-slide-index"),10)===r)[0]:t.slides.eq(r)[0];if(t.params.slidesPerView!=="auto"&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||$([])).each(r=>{i.push(r)});else for(d=0;d<Math.ceil(t.params.slidesPerView);d+=1){const r=t.activeIndex+d;if(r>t.slides.length&&!s)break;i.push(g(r))}else i.push(g(t.activeIndex));for(d=0;d<i.length;d+=1)if(typeof i[d]<"u"){const r=i[d].offsetHeight;c=r>c?r:c}(c||c===0)&&t.$wrapperEl.css("height",`${c}px`)}function updateSlidesOffset(){const e=this,t=e.slides;for(let i=0;i<t.length;i+=1)t[i].swiperSlideOffset=e.isHorizontal()?t[i].offsetLeft:t[i].offsetTop}function updateSlidesProgress(e){e===void 0&&(e=this&&this.translate||0);const t=this,i=t.params,{slides:s,rtlTranslate:c,snapGrid:d}=t;if(s.length===0)return;typeof s[0].swiperSlideOffset>"u"&&t.updateSlidesOffset();let g=-e;c&&(g=e),s.removeClass(i.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(let r=0;r<s.length;r+=1){const y=s[r];let E=y.swiperSlideOffset;i.cssMode&&i.centeredSlides&&(E-=s[0].swiperSlideOffset);const w=(g+(i.centeredSlides?t.minTranslate():0)-E)/(y.swiperSlideSize+i.spaceBetween),k=(g-d[0]+(i.centeredSlides?t.minTranslate():0)-E)/(y.swiperSlideSize+i.spaceBetween),S=-(g-E),I=S+t.slidesSizesGrid[r];(S>=0&&S<t.size-1||I>1&&I<=t.size||S<=0&&I>=t.size)&&(t.visibleSlides.push(y),t.visibleSlidesIndexes.push(r),s.eq(r).addClass(i.slideVisibleClass)),y.progress=c?-w:w,y.originalProgress=c?-k:k}t.visibleSlides=$(t.visibleSlides)}function updateProgress(e){const t=this;if(typeof e>"u"){const E=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*E||0}const i=t.params,s=t.maxTranslate()-t.minTranslate();let{progress:c,isBeginning:d,isEnd:g}=t;const r=d,y=g;s===0?(c=0,d=!0,g=!0):(c=(e-t.minTranslate())/s,d=c<=0,g=c>=1),Object.assign(t,{progress:c,isBeginning:d,isEnd:g}),(i.watchSlidesProgress||i.centeredSlides&&i.autoHeight)&&t.updateSlidesProgress(e),d&&!r&&t.emit("reachBeginning toEdge"),g&&!y&&t.emit("reachEnd toEdge"),(r&&!d||y&&!g)&&t.emit("fromEdge"),t.emit("progress",c)}function updateSlidesClasses(){const e=this,{slides:t,params:i,$wrapperEl:s,activeIndex:c,realIndex:d}=e,g=e.virtual&&i.virtual.enabled;t.removeClass(`${i.slideActiveClass} ${i.slideNextClass} ${i.slidePrevClass} ${i.slideDuplicateActiveClass} ${i.slideDuplicateNextClass} ${i.slideDuplicatePrevClass}`);let r;g?r=e.$wrapperEl.find(`.${i.slideClass}[data-swiper-slide-index="${c}"]`):r=t.eq(c),r.addClass(i.slideActiveClass),i.loop&&(r.hasClass(i.slideDuplicateClass)?s.children(`.${i.slideClass}:not(.${i.slideDuplicateClass})[data-swiper-slide-index="${d}"]`).addClass(i.slideDuplicateActiveClass):s.children(`.${i.slideClass}.${i.slideDuplicateClass}[data-swiper-slide-index="${d}"]`).addClass(i.slideDuplicateActiveClass));let y=r.nextAll(`.${i.slideClass}`).eq(0).addClass(i.slideNextClass);i.loop&&y.length===0&&(y=t.eq(0),y.addClass(i.slideNextClass));let E=r.prevAll(`.${i.slideClass}`).eq(0).addClass(i.slidePrevClass);i.loop&&E.length===0&&(E=t.eq(-1),E.addClass(i.slidePrevClass)),i.loop&&(y.hasClass(i.slideDuplicateClass)?s.children(`.${i.slideClass}:not(.${i.slideDuplicateClass})[data-swiper-slide-index="${y.attr("data-swiper-slide-index")}"]`).addClass(i.slideDuplicateNextClass):s.children(`.${i.slideClass}.${i.slideDuplicateClass}[data-swiper-slide-index="${y.attr("data-swiper-slide-index")}"]`).addClass(i.slideDuplicateNextClass),E.hasClass(i.slideDuplicateClass)?s.children(`.${i.slideClass}:not(.${i.slideDuplicateClass})[data-swiper-slide-index="${E.attr("data-swiper-slide-index")}"]`).addClass(i.slideDuplicatePrevClass):s.children(`.${i.slideClass}.${i.slideDuplicateClass}[data-swiper-slide-index="${E.attr("data-swiper-slide-index")}"]`).addClass(i.slideDuplicatePrevClass)),e.emitSlidesClasses()}function updateActiveIndex(e){const t=this,i=t.rtlTranslate?t.translate:-t.translate,{slidesGrid:s,snapGrid:c,params:d,activeIndex:g,realIndex:r,snapIndex:y}=t;let E=e,w;if(typeof E>"u"){for(let S=0;S<s.length;S+=1)typeof s[S+1]<"u"?i>=s[S]&&i<s[S+1]-(s[S+1]-s[S])/2?E=S:i>=s[S]&&i<s[S+1]&&(E=S+1):i>=s[S]&&(E=S);d.normalizeSlideIndex&&(E<0||typeof E>"u")&&(E=0)}if(c.indexOf(i)>=0)w=c.indexOf(i);else{const S=Math.min(d.slidesPerGroupSkip,E);w=S+Math.floor((E-S)/d.slidesPerGroup)}if(w>=c.length&&(w=c.length-1),E===g){w!==y&&(t.snapIndex=w,t.emit("snapIndexChange"));return}const k=parseInt(t.slides.eq(E).attr("data-swiper-slide-index")||E,10);Object.assign(t,{snapIndex:w,realIndex:k,previousIndex:g,activeIndex:E}),t.emit("activeIndexChange"),t.emit("snapIndexChange"),r!==k&&t.emit("realIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&t.emit("slideChange")}function updateClickedSlide(e){const t=this,i=t.params,s=$(e).closest(`.${i.slideClass}`)[0];let c=!1,d;if(s){for(let g=0;g<t.slides.length;g+=1)if(t.slides[g]===s){c=!0,d=g;break}}if(s&&c)t.clickedSlide=s,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt($(s).attr("data-swiper-slide-index"),10):t.clickedIndex=d;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}i.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}const update={updateSize,updateSlides,updateAutoHeight,updateSlidesOffset,updateSlidesProgress,updateProgress,updateSlidesClasses,updateActiveIndex,updateClickedSlide};function getSwiperTranslate(e){e===void 0&&(e=this.isHorizontal()?"x":"y");const t=this,{params:i,rtlTranslate:s,translate:c,$wrapperEl:d}=t;if(i.virtualTranslate)return s?-c:c;if(i.cssMode)return c;let g=getTranslate(d[0],e);return s&&(g=-g),g||0}function setTranslate(e,t){const i=this,{rtlTranslate:s,params:c,$wrapperEl:d,wrapperEl:g,progress:r}=i;let y=0,E=0;const w=0;i.isHorizontal()?y=s?-e:e:E=e,c.roundLengths&&(y=Math.floor(y),E=Math.floor(E)),c.cssMode?g[i.isHorizontal()?"scrollLeft":"scrollTop"]=i.isHorizontal()?-y:-E:c.virtualTranslate||d.transform(`translate3d(${y}px, ${E}px, ${w}px)`),i.previousTranslate=i.translate,i.translate=i.isHorizontal()?y:E;let k;const S=i.maxTranslate()-i.minTranslate();S===0?k=0:k=(e-i.minTranslate())/S,k!==r&&i.updateProgress(e),i.emit("setTranslate",i.translate,t)}function minTranslate(){return-this.snapGrid[0]}function maxTranslate(){return-this.snapGrid[this.snapGrid.length-1]}function translateTo(e,t,i,s,c){e===void 0&&(e=0),t===void 0&&(t=this.params.speed),i===void 0&&(i=!0),s===void 0&&(s=!0);const d=this,{params:g,wrapperEl:r}=d;if(d.animating&&g.preventInteractionOnTransition)return!1;const y=d.minTranslate(),E=d.maxTranslate();let w;if(s&&e>y?w=y:s&&e<E?w=E:w=e,d.updateProgress(w),g.cssMode){const k=d.isHorizontal();if(t===0)r[k?"scrollLeft":"scrollTop"]=-w;else{if(!d.support.smoothScroll)return animateCSSModeScroll({swiper:d,targetPosition:-w,side:k?"left":"top"}),!0;r.scrollTo({[k?"left":"top"]:-w,behavior:"smooth"})}return!0}return t===0?(d.setTransition(0),d.setTranslate(w),i&&(d.emit("beforeTransitionStart",t,c),d.emit("transitionEnd"))):(d.setTransition(t),d.setTranslate(w),i&&(d.emit("beforeTransitionStart",t,c),d.emit("transitionStart")),d.animating||(d.animating=!0,d.onTranslateToWrapperTransitionEnd||(d.onTranslateToWrapperTransitionEnd=function(S){!d||d.destroyed||S.target===this&&(d.$wrapperEl[0].removeEventListener("transitionend",d.onTranslateToWrapperTransitionEnd),d.$wrapperEl[0].removeEventListener("webkitTransitionEnd",d.onTranslateToWrapperTransitionEnd),d.onTranslateToWrapperTransitionEnd=null,delete d.onTranslateToWrapperTransitionEnd,i&&d.emit("transitionEnd"))}),d.$wrapperEl[0].addEventListener("transitionend",d.onTranslateToWrapperTransitionEnd),d.$wrapperEl[0].addEventListener("webkitTransitionEnd",d.onTranslateToWrapperTransitionEnd))),!0}const translate={getTranslate:getSwiperTranslate,setTranslate,minTranslate,maxTranslate,translateTo};function setTransition(e,t){const i=this;i.params.cssMode||i.$wrapperEl.transition(e),i.emit("setTransition",e,t)}function transitionEmit(e){let{swiper:t,runCallbacks:i,direction:s,step:c}=e;const{activeIndex:d,previousIndex:g}=t;let r=s;if(r||(d>g?r="next":d<g?r="prev":r="reset"),t.emit(`transition${c}`),i&&d!==g){if(r==="reset"){t.emit(`slideResetTransition${c}`);return}t.emit(`slideChangeTransition${c}`),r==="next"?t.emit(`slideNextTransition${c}`):t.emit(`slidePrevTransition${c}`)}}function transitionStart(e,t){e===void 0&&(e=!0);const i=this,{params:s}=i;s.cssMode||(s.autoHeight&&i.updateAutoHeight(),transitionEmit({swiper:i,runCallbacks:e,direction:t,step:"Start"}))}function transitionEnd(e,t){e===void 0&&(e=!0);const i=this,{params:s}=i;i.animating=!1,!s.cssMode&&(i.setTransition(0),transitionEmit({swiper:i,runCallbacks:e,direction:t,step:"End"}))}const transition={setTransition,transitionStart,transitionEnd};function slideTo(e,t,i,s,c){if(e===void 0&&(e=0),t===void 0&&(t=this.params.speed),i===void 0&&(i=!0),typeof e!="number"&&typeof e!="string")throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof e}] given.`);if(typeof e=="string"){const U=parseInt(e,10);if(!isFinite(U))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${e}] given.`);e=U}const d=this;let g=e;g<0&&(g=0);const{params:r,snapGrid:y,slidesGrid:E,previousIndex:w,activeIndex:k,rtlTranslate:S,wrapperEl:I,enabled:L}=d;if(d.animating&&r.preventInteractionOnTransition||!L&&!s&&!c)return!1;const D=Math.min(d.params.slidesPerGroupSkip,g);let O=D+Math.floor((g-D)/d.params.slidesPerGroup);O>=y.length&&(O=y.length-1),(k||r.initialSlide||0)===(w||0)&&i&&d.emit("beforeSlideChangeStart");const V=-y[O];if(d.updateProgress(V),r.normalizeSlideIndex)for(let U=0;U<E.length;U+=1){const Z=-Math.floor(V*100),W=Math.floor(E[U]*100),ne=Math.floor(E[U+1]*100);typeof E[U+1]<"u"?Z>=W&&Z<ne-(ne-W)/2?g=U:Z>=W&&Z<ne&&(g=U+1):Z>=W&&(g=U)}if(d.initialized&&g!==k&&(!d.allowSlideNext&&V<d.translate&&V<d.minTranslate()||!d.allowSlidePrev&&V>d.translate&&V>d.maxTranslate()&&(k||0)!==g))return!1;let z;if(g>k?z="next":g<k?z="prev":z="reset",S&&-V===d.translate||!S&&V===d.translate)return d.updateActiveIndex(g),r.autoHeight&&d.updateAutoHeight(),d.updateSlidesClasses(),r.effect!=="slide"&&d.setTranslate(V),z!=="reset"&&(d.transitionStart(i,z),d.transitionEnd(i,z)),!1;if(r.cssMode){const U=d.isHorizontal(),Z=S?V:-V;if(t===0){const W=d.virtual&&d.params.virtual.enabled;W&&(d.wrapperEl.style.scrollSnapType="none",d._immediateVirtual=!0),I[U?"scrollLeft":"scrollTop"]=Z,W&&requestAnimationFrame(()=>{d.wrapperEl.style.scrollSnapType="",d._swiperImmediateVirtual=!1})}else{if(!d.support.smoothScroll)return animateCSSModeScroll({swiper:d,targetPosition:Z,side:U?"left":"top"}),!0;I.scrollTo({[U?"left":"top"]:Z,behavior:"smooth"})}return!0}return d.setTransition(t),d.setTranslate(V),d.updateActiveIndex(g),d.updateSlidesClasses(),d.emit("beforeTransitionStart",t,s),d.transitionStart(i,z),t===0?d.transitionEnd(i,z):d.animating||(d.animating=!0,d.onSlideToWrapperTransitionEnd||(d.onSlideToWrapperTransitionEnd=function(Z){!d||d.destroyed||Z.target===this&&(d.$wrapperEl[0].removeEventListener("transitionend",d.onSlideToWrapperTransitionEnd),d.$wrapperEl[0].removeEventListener("webkitTransitionEnd",d.onSlideToWrapperTransitionEnd),d.onSlideToWrapperTransitionEnd=null,delete d.onSlideToWrapperTransitionEnd,d.transitionEnd(i,z))}),d.$wrapperEl[0].addEventListener("transitionend",d.onSlideToWrapperTransitionEnd),d.$wrapperEl[0].addEventListener("webkitTransitionEnd",d.onSlideToWrapperTransitionEnd)),!0}function slideToLoop(e,t,i,s){if(e===void 0&&(e=0),t===void 0&&(t=this.params.speed),i===void 0&&(i=!0),typeof e=="string"){const g=parseInt(e,10);if(!isFinite(g))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${e}] given.`);e=g}const c=this;let d=e;return c.params.loop&&(d+=c.loopedSlides),c.slideTo(d,t,i,s)}function slideNext(e,t,i){e===void 0&&(e=this.params.speed),t===void 0&&(t=!0);const s=this,{animating:c,enabled:d,params:g}=s;if(!d)return s;let r=g.slidesPerGroup;g.slidesPerView==="auto"&&g.slidesPerGroup===1&&g.slidesPerGroupAuto&&(r=Math.max(s.slidesPerViewDynamic("current",!0),1));const y=s.activeIndex<g.slidesPerGroupSkip?1:r;if(g.loop){if(c&&g.loopPreventsSlide)return!1;s.loopFix(),s._clientLeft=s.$wrapperEl[0].clientLeft}return g.rewind&&s.isEnd?s.slideTo(0,e,t,i):s.slideTo(s.activeIndex+y,e,t,i)}function slidePrev(e,t,i){e===void 0&&(e=this.params.speed),t===void 0&&(t=!0);const s=this,{params:c,animating:d,snapGrid:g,slidesGrid:r,rtlTranslate:y,enabled:E}=s;if(!E)return s;if(c.loop){if(d&&c.loopPreventsSlide)return!1;s.loopFix(),s._clientLeft=s.$wrapperEl[0].clientLeft}const w=y?s.translate:-s.translate;function k(O){return O<0?-Math.floor(Math.abs(O)):Math.floor(O)}const S=k(w),I=g.map(O=>k(O));let L=g[I.indexOf(S)-1];if(typeof L>"u"&&c.cssMode){let O;g.forEach((V,z)=>{S>=V&&(O=z)}),typeof O<"u"&&(L=g[O>0?O-1:O])}let D=0;if(typeof L<"u"&&(D=r.indexOf(L),D<0&&(D=s.activeIndex-1),c.slidesPerView==="auto"&&c.slidesPerGroup===1&&c.slidesPerGroupAuto&&(D=D-s.slidesPerViewDynamic("previous",!0)+1,D=Math.max(D,0))),c.rewind&&s.isBeginning){const O=s.params.virtual&&s.params.virtual.enabled&&s.virtual?s.virtual.slides.length-1:s.slides.length-1;return s.slideTo(O,e,t,i)}return s.slideTo(D,e,t,i)}function slideReset(e,t,i){e===void 0&&(e=this.params.speed),t===void 0&&(t=!0);const s=this;return s.slideTo(s.activeIndex,e,t,i)}function slideToClosest(e,t,i,s){e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),s===void 0&&(s=.5);const c=this;let d=c.activeIndex;const g=Math.min(c.params.slidesPerGroupSkip,d),r=g+Math.floor((d-g)/c.params.slidesPerGroup),y=c.rtlTranslate?c.translate:-c.translate;if(y>=c.snapGrid[r]){const E=c.snapGrid[r],w=c.snapGrid[r+1];y-E>(w-E)*s&&(d+=c.params.slidesPerGroup)}else{const E=c.snapGrid[r-1],w=c.snapGrid[r];y-E<=(w-E)*s&&(d-=c.params.slidesPerGroup)}return d=Math.max(d,0),d=Math.min(d,c.slidesGrid.length-1),c.slideTo(d,e,t,i)}function slideToClickedSlide(){const e=this,{params:t,$wrapperEl:i}=e,s=t.slidesPerView==="auto"?e.slidesPerViewDynamic():t.slidesPerView;let c=e.clickedIndex,d;if(t.loop){if(e.animating)return;d=parseInt($(e.clickedSlide).attr("data-swiper-slide-index"),10),t.centeredSlides?c<e.loopedSlides-s/2||c>e.slides.length-e.loopedSlides+s/2?(e.loopFix(),c=i.children(`.${t.slideClass}[data-swiper-slide-index="${d}"]:not(.${t.slideDuplicateClass})`).eq(0).index(),nextTick(()=>{e.slideTo(c)})):e.slideTo(c):c>e.slides.length-s?(e.loopFix(),c=i.children(`.${t.slideClass}[data-swiper-slide-index="${d}"]:not(.${t.slideDuplicateClass})`).eq(0).index(),nextTick(()=>{e.slideTo(c)})):e.slideTo(c)}else e.slideTo(c)}const slide={slideTo,slideToLoop,slideNext,slidePrev,slideReset,slideToClosest,slideToClickedSlide};function loopCreate(){const e=this,t=getDocument(),{params:i,$wrapperEl:s}=e,c=s.children().length>0?$(s.children()[0].parentNode):s;c.children(`.${i.slideClass}.${i.slideDuplicateClass}`).remove();let d=c.children(`.${i.slideClass}`);if(i.loopFillGroupWithBlank){const y=i.slidesPerGroup-d.length%i.slidesPerGroup;if(y!==i.slidesPerGroup){for(let E=0;E<y;E+=1){const w=$(t.createElement("div")).addClass(`${i.slideClass} ${i.slideBlankClass}`);c.append(w)}d=c.children(`.${i.slideClass}`)}}i.slidesPerView==="auto"&&!i.loopedSlides&&(i.loopedSlides=d.length),e.loopedSlides=Math.ceil(parseFloat(i.loopedSlides||i.slidesPerView,10)),e.loopedSlides+=i.loopAdditionalSlides,e.loopedSlides>d.length&&e.params.loopedSlidesLimit&&(e.loopedSlides=d.length);const g=[],r=[];d.each((y,E)=>{$(y).attr("data-swiper-slide-index",E)});for(let y=0;y<e.loopedSlides;y+=1){const E=y-Math.floor(y/d.length)*d.length;r.push(d.eq(E)[0]),g.unshift(d.eq(d.length-E-1)[0])}for(let y=0;y<r.length;y+=1)c.append($(r[y].cloneNode(!0)).addClass(i.slideDuplicateClass));for(let y=g.length-1;y>=0;y-=1)c.prepend($(g[y].cloneNode(!0)).addClass(i.slideDuplicateClass))}function loopFix(){const e=this;e.emit("beforeLoopFix");const{activeIndex:t,slides:i,loopedSlides:s,allowSlidePrev:c,allowSlideNext:d,snapGrid:g,rtlTranslate:r}=e;let y;e.allowSlidePrev=!0,e.allowSlideNext=!0;const w=-g[t]-e.getTranslate();t<s?(y=i.length-s*3+t,y+=s,e.slideTo(y,0,!1,!0)&&w!==0&&e.setTranslate((r?-e.translate:e.translate)-w)):t>=i.length-s&&(y=-i.length+t+s,y+=s,e.slideTo(y,0,!1,!0)&&w!==0&&e.setTranslate((r?-e.translate:e.translate)-w)),e.allowSlidePrev=c,e.allowSlideNext=d,e.emit("loopFix")}function loopDestroy(){const e=this,{$wrapperEl:t,params:i,slides:s}=e;t.children(`.${i.slideClass}.${i.slideDuplicateClass},.${i.slideClass}.${i.slideBlankClass}`).remove(),s.removeAttr("data-swiper-slide-index")}const loop={loopCreate,loopFix,loopDestroy};function setGrabCursor(e){const t=this;if(t.support.touch||!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const i=t.params.touchEventsTarget==="container"?t.el:t.wrapperEl;i.style.cursor="move",i.style.cursor=e?"grabbing":"grab"}function unsetGrabCursor(){const e=this;e.support.touch||e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e[e.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="")}const grabCursor={setGrabCursor,unsetGrabCursor};function closestElement(e,t){t===void 0&&(t=this);function i(s){if(!s||s===getDocument()||s===getWindow())return null;s.assignedSlot&&(s=s.assignedSlot);const c=s.closest(e);return!c&&!s.getRootNode?null:c||i(s.getRootNode().host)}return i(t)}function onTouchStart(e){const t=this,i=getDocument(),s=getWindow(),c=t.touchEventsData,{params:d,touches:g,enabled:r}=t;if(!r||t.animating&&d.preventInteractionOnTransition)return;!t.animating&&d.cssMode&&d.loop&&t.loopFix();let y=e;y.originalEvent&&(y=y.originalEvent);let E=$(y.target);if(d.touchEventsTarget==="wrapper"&&!E.closest(t.wrapperEl).length||(c.isTouchEvent=y.type==="touchstart",!c.isTouchEvent&&"which"in y&&y.which===3)||!c.isTouchEvent&&"button"in y&&y.button>0||c.isTouched&&c.isMoved)return;!!d.noSwipingClass&&d.noSwipingClass!==""&&y.target&&y.target.shadowRoot&&e.path&&e.path[0]&&(E=$(e.path[0]));const k=d.noSwipingSelector?d.noSwipingSelector:`.${d.noSwipingClass}`,S=!!(y.target&&y.target.shadowRoot);if(d.noSwiping&&(S?closestElement(k,E[0]):E.closest(k)[0])){t.allowClick=!0;return}if(d.swipeHandler&&!E.closest(d.swipeHandler)[0])return;g.currentX=y.type==="touchstart"?y.targetTouches[0].pageX:y.pageX,g.currentY=y.type==="touchstart"?y.targetTouches[0].pageY:y.pageY;const I=g.currentX,L=g.currentY,D=d.edgeSwipeDetection||d.iOSEdgeSwipeDetection,O=d.edgeSwipeThreshold||d.iOSEdgeSwipeThreshold;if(D&&(I<=O||I>=s.innerWidth-O))if(D==="prevent")e.preventDefault();else return;if(Object.assign(c,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),g.startX=I,g.startY=L,c.touchStartTime=now(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,d.threshold>0&&(c.allowThresholdMove=!1),y.type!=="touchstart"){let V=!0;E.is(c.focusableElements)&&(V=!1,E[0].nodeName==="SELECT"&&(c.isTouched=!1)),i.activeElement&&$(i.activeElement).is(c.focusableElements)&&i.activeElement!==E[0]&&i.activeElement.blur();const z=V&&t.allowTouchMove&&d.touchStartPreventDefault;(d.touchStartForcePreventDefault||z)&&!E[0].isContentEditable&&y.preventDefault()}t.params.freeMode&&t.params.freeMode.enabled&&t.freeMode&&t.animating&&!d.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",y)}function onTouchMove(e){const t=getDocument(),i=this,s=i.touchEventsData,{params:c,touches:d,rtlTranslate:g,enabled:r}=i;if(!r)return;let y=e;if(y.originalEvent&&(y=y.originalEvent),!s.isTouched){s.startMoving&&s.isScrolling&&i.emit("touchMoveOpposite",y);return}if(s.isTouchEvent&&y.type!=="touchmove")return;const E=y.type==="touchmove"&&y.targetTouches&&(y.targetTouches[0]||y.changedTouches[0]),w=y.type==="touchmove"?E.pageX:y.pageX,k=y.type==="touchmove"?E.pageY:y.pageY;if(y.preventedByNestedSwiper){d.startX=w,d.startY=k;return}if(!i.allowTouchMove){$(y.target).is(s.focusableElements)||(i.allowClick=!1),s.isTouched&&(Object.assign(d,{startX:w,startY:k,currentX:w,currentY:k}),s.touchStartTime=now());return}if(s.isTouchEvent&&c.touchReleaseOnEdges&&!c.loop){if(i.isVertical()){if(k<d.startY&&i.translate<=i.maxTranslate()||k>d.startY&&i.translate>=i.minTranslate()){s.isTouched=!1,s.isMoved=!1;return}}else if(w<d.startX&&i.translate<=i.maxTranslate()||w>d.startX&&i.translate>=i.minTranslate())return}if(s.isTouchEvent&&t.activeElement&&y.target===t.activeElement&&$(y.target).is(s.focusableElements)){s.isMoved=!0,i.allowClick=!1;return}if(s.allowTouchCallbacks&&i.emit("touchMove",y),y.targetTouches&&y.targetTouches.length>1)return;d.currentX=w,d.currentY=k;const S=d.currentX-d.startX,I=d.currentY-d.startY;if(i.params.threshold&&Math.sqrt(S**2+I**2)<i.params.threshold)return;if(typeof s.isScrolling>"u"){let V;i.isHorizontal()&&d.currentY===d.startY||i.isVertical()&&d.currentX===d.startX?s.isScrolling=!1:S*S+I*I>=25&&(V=Math.atan2(Math.abs(I),Math.abs(S))*180/Math.PI,s.isScrolling=i.isHorizontal()?V>c.touchAngle:90-V>c.touchAngle)}if(s.isScrolling&&i.emit("touchMoveOpposite",y),typeof s.startMoving>"u"&&(d.currentX!==d.startX||d.currentY!==d.startY)&&(s.startMoving=!0),s.isScrolling){s.isTouched=!1;return}if(!s.startMoving)return;i.allowClick=!1,!c.cssMode&&y.cancelable&&y.preventDefault(),c.touchMoveStopPropagation&&!c.nested&&y.stopPropagation(),s.isMoved||(c.loop&&!c.cssMode&&i.loopFix(),s.startTranslate=i.getTranslate(),i.setTransition(0),i.animating&&i.$wrapperEl.trigger("webkitTransitionEnd transitionend"),s.allowMomentumBounce=!1,c.grabCursor&&(i.allowSlideNext===!0||i.allowSlidePrev===!0)&&i.setGrabCursor(!0),i.emit("sliderFirstMove",y)),i.emit("sliderMove",y),s.isMoved=!0;let L=i.isHorizontal()?S:I;d.diff=L,L*=c.touchRatio,g&&(L=-L),i.swipeDirection=L>0?"prev":"next",s.currentTranslate=L+s.startTranslate;let D=!0,O=c.resistanceRatio;if(c.touchReleaseOnEdges&&(O=0),L>0&&s.currentTranslate>i.minTranslate()?(D=!1,c.resistance&&(s.currentTranslate=i.minTranslate()-1+(-i.minTranslate()+s.startTranslate+L)**O)):L<0&&s.currentTranslate<i.maxTranslate()&&(D=!1,c.resistance&&(s.currentTranslate=i.maxTranslate()+1-(i.maxTranslate()-s.startTranslate-L)**O)),D&&(y.preventedByNestedSwiper=!0),!i.allowSlideNext&&i.swipeDirection==="next"&&s.currentTranslate<s.startTranslate&&(s.currentTranslate=s.startTranslate),!i.allowSlidePrev&&i.swipeDirection==="prev"&&s.currentTranslate>s.startTranslate&&(s.currentTranslate=s.startTranslate),!i.allowSlidePrev&&!i.allowSlideNext&&(s.currentTranslate=s.startTranslate),c.threshold>0)if(Math.abs(L)>c.threshold||s.allowThresholdMove){if(!s.allowThresholdMove){s.allowThresholdMove=!0,d.startX=d.currentX,d.startY=d.currentY,s.currentTranslate=s.startTranslate,d.diff=i.isHorizontal()?d.currentX-d.startX:d.currentY-d.startY;return}}else{s.currentTranslate=s.startTranslate;return}!c.followFinger||c.cssMode||((c.freeMode&&c.freeMode.enabled&&i.freeMode||c.watchSlidesProgress)&&(i.updateActiveIndex(),i.updateSlidesClasses()),i.params.freeMode&&c.freeMode.enabled&&i.freeMode&&i.freeMode.onTouchMove(),i.updateProgress(s.currentTranslate),i.setTranslate(s.currentTranslate))}function onTouchEnd(e){const t=this,i=t.touchEventsData,{params:s,touches:c,rtlTranslate:d,slidesGrid:g,enabled:r}=t;if(!r)return;let y=e;if(y.originalEvent&&(y=y.originalEvent),i.allowTouchCallbacks&&t.emit("touchEnd",y),i.allowTouchCallbacks=!1,!i.isTouched){i.isMoved&&s.grabCursor&&t.setGrabCursor(!1),i.isMoved=!1,i.startMoving=!1;return}s.grabCursor&&i.isMoved&&i.isTouched&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!1);const E=now(),w=E-i.touchStartTime;if(t.allowClick){const z=y.path||y.composedPath&&y.composedPath();t.updateClickedSlide(z&&z[0]||y.target),t.emit("tap click",y),w<300&&E-i.lastClickTime<300&&t.emit("doubleTap doubleClick",y)}if(i.lastClickTime=now(),nextTick(()=>{t.destroyed||(t.allowClick=!0)}),!i.isTouched||!i.isMoved||!t.swipeDirection||c.diff===0||i.currentTranslate===i.startTranslate){i.isTouched=!1,i.isMoved=!1,i.startMoving=!1;return}i.isTouched=!1,i.isMoved=!1,i.startMoving=!1;let k;if(s.followFinger?k=d?t.translate:-t.translate:k=-i.currentTranslate,s.cssMode)return;if(t.params.freeMode&&s.freeMode.enabled){t.freeMode.onTouchEnd({currentPos:k});return}let S=0,I=t.slidesSizesGrid[0];for(let z=0;z<g.length;z+=z<s.slidesPerGroupSkip?1:s.slidesPerGroup){const U=z<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;typeof g[z+U]<"u"?k>=g[z]&&k<g[z+U]&&(S=z,I=g[z+U]-g[z]):k>=g[z]&&(S=z,I=g[g.length-1]-g[g.length-2])}let L=null,D=null;s.rewind&&(t.isBeginning?D=t.params.virtual&&t.params.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(L=0));const O=(k-g[S])/I,V=S<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;if(w>s.longSwipesMs){if(!s.longSwipes){t.slideTo(t.activeIndex);return}t.swipeDirection==="next"&&(O>=s.longSwipesRatio?t.slideTo(s.rewind&&t.isEnd?L:S+V):t.slideTo(S)),t.swipeDirection==="prev"&&(O>1-s.longSwipesRatio?t.slideTo(S+V):D!==null&&O<0&&Math.abs(O)>s.longSwipesRatio?t.slideTo(D):t.slideTo(S))}else{if(!s.shortSwipes){t.slideTo(t.activeIndex);return}t.navigation&&(y.target===t.navigation.nextEl||y.target===t.navigation.prevEl)?y.target===t.navigation.nextEl?t.slideTo(S+V):t.slideTo(S):(t.swipeDirection==="next"&&t.slideTo(L!==null?L:S+V),t.swipeDirection==="prev"&&t.slideTo(D!==null?D:S))}}function onResize(){const e=this,{params:t,el:i}=e;if(i&&i.offsetWidth===0)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:s,allowSlidePrev:c,snapGrid:d}=e;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),(t.slidesPerView==="auto"||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.run(),e.allowSlidePrev=c,e.allowSlideNext=s,e.params.watchOverflow&&d!==e.snapGrid&&e.checkOverflow()}function onClick(e){const t=this;!t.enabled||t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))}function onScroll(){const e=this,{wrapperEl:t,rtlTranslate:i,enabled:s}=e;if(!s)return;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,e.translate===0&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();let c;const d=e.maxTranslate()-e.minTranslate();d===0?c=0:c=(e.translate-e.minTranslate())/d,c!==e.progress&&e.updateProgress(i?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}let dummyEventAttached=!1;function dummyEventListener(){}const events=(e,t)=>{const i=getDocument(),{params:s,touchEvents:c,el:d,wrapperEl:g,device:r,support:y}=e,E=!!s.nested,w=t==="on"?"addEventListener":"removeEventListener",k=t;if(!y.touch)d[w](c.start,e.onTouchStart,!1),i[w](c.move,e.onTouchMove,E),i[w](c.end,e.onTouchEnd,!1);else{const S=c.start==="touchstart"&&y.passiveListener&&s.passiveListeners?{passive:!0,capture:!1}:!1;d[w](c.start,e.onTouchStart,S),d[w](c.move,e.onTouchMove,y.passiveListener?{passive:!1,capture:E}:E),d[w](c.end,e.onTouchEnd,S),c.cancel&&d[w](c.cancel,e.onTouchEnd,S)}(s.preventClicks||s.preventClicksPropagation)&&d[w]("click",e.onClick,!0),s.cssMode&&g[w]("scroll",e.onScroll),s.updateOnWindowResize?e[k](r.ios||r.android?"resize orientationchange observerUpdate":"resize observerUpdate",onResize,!0):e[k]("observerUpdate",onResize,!0)};function attachEvents(){const e=this,t=getDocument(),{params:i,support:s}=e;e.onTouchStart=onTouchStart.bind(e),e.onTouchMove=onTouchMove.bind(e),e.onTouchEnd=onTouchEnd.bind(e),i.cssMode&&(e.onScroll=onScroll.bind(e)),e.onClick=onClick.bind(e),s.touch&&!dummyEventAttached&&(t.addEventListener("touchstart",dummyEventListener),dummyEventAttached=!0),events(e,"on")}function detachEvents(){events(this,"off")}const events$1={attachEvents,detachEvents},isGridEnabled=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;function setBreakpoint(){const e=this,{activeIndex:t,initialized:i,loopedSlides:s=0,params:c,$el:d}=e,g=c.breakpoints;if(!g||g&&Object.keys(g).length===0)return;const r=e.getBreakpoint(g,e.params.breakpointsBase,e.el);if(!r||e.currentBreakpoint===r)return;const E=(r in g?g[r]:void 0)||e.originalParams,w=isGridEnabled(e,c),k=isGridEnabled(e,E),S=c.enabled;w&&!k?(d.removeClass(`${c.containerModifierClass}grid ${c.containerModifierClass}grid-column`),e.emitContainerClasses()):!w&&k&&(d.addClass(`${c.containerModifierClass}grid`),(E.grid.fill&&E.grid.fill==="column"||!E.grid.fill&&c.grid.fill==="column")&&d.addClass(`${c.containerModifierClass}grid-column`),e.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(O=>{const V=c[O]&&c[O].enabled,z=E[O]&&E[O].enabled;V&&!z&&e[O].disable(),!V&&z&&e[O].enable()});const I=E.direction&&E.direction!==c.direction,L=c.loop&&(E.slidesPerView!==c.slidesPerView||I);I&&i&&e.changeDirection(),extend$1(e.params,E);const D=e.params.enabled;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),S&&!D?e.disable():!S&&D&&e.enable(),e.currentBreakpoint=r,e.emit("_beforeBreakpoint",E),L&&i&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-s+e.loopedSlides,0,!1)),e.emit("breakpoint",E)}function getBreakpoint(e,t,i){if(t===void 0&&(t="window"),!e||t==="container"&&!i)return;let s=!1;const c=getWindow(),d=t==="window"?c.innerHeight:i.clientHeight,g=Object.keys(e).map(r=>{if(typeof r=="string"&&r.indexOf("@")===0){const y=parseFloat(r.substr(1));return{value:d*y,point:r}}return{value:r,point:r}});g.sort((r,y)=>parseInt(r.value,10)-parseInt(y.value,10));for(let r=0;r<g.length;r+=1){const{point:y,value:E}=g[r];t==="window"?c.matchMedia(`(min-width: ${E}px)`).matches&&(s=y):E<=i.clientWidth&&(s=y)}return s||"max"}const breakpoints={setBreakpoint,getBreakpoint};function prepareClasses(e,t){const i=[];return e.forEach(s=>{typeof s=="object"?Object.keys(s).forEach(c=>{s[c]&&i.push(t+c)}):typeof s=="string"&&i.push(t+s)}),i}function addClasses(){const e=this,{classNames:t,params:i,rtl:s,$el:c,device:d,support:g}=e,r=prepareClasses(["initialized",i.direction,{"pointer-events":!g.touch},{"free-mode":e.params.freeMode&&i.freeMode.enabled},{autoheight:i.autoHeight},{rtl:s},{grid:i.grid&&i.grid.rows>1},{"grid-column":i.grid&&i.grid.rows>1&&i.grid.fill==="column"},{android:d.android},{ios:d.ios},{"css-mode":i.cssMode},{centered:i.cssMode&&i.centeredSlides},{"watch-progress":i.watchSlidesProgress}],i.containerModifierClass);t.push(...r),c.addClass([...t].join(" ")),e.emitContainerClasses()}function removeClasses(){const e=this,{$el:t,classNames:i}=e;t.removeClass(i.join(" ")),e.emitContainerClasses()}const classes={addClasses,removeClasses};function loadImage(e,t,i,s,c,d){const g=getWindow();let r;function y(){d&&d()}!$(e).parent("picture")[0]&&(!e.complete||!c)&&t?(r=new g.Image,r.onload=y,r.onerror=y,s&&(r.sizes=s),i&&(r.srcset=i),t&&(r.src=t)):y()}function preloadImages(){const e=this;e.imagesToLoad=e.$el.find("img");function t(){typeof e>"u"||e===null||!e||e.destroyed||(e.imagesLoaded!==void 0&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}for(let i=0;i<e.imagesToLoad.length;i+=1){const s=e.imagesToLoad[i];e.loadImage(s,s.currentSrc||s.getAttribute("src"),s.srcset||s.getAttribute("srcset"),s.sizes||s.getAttribute("sizes"),!0,t)}}const images={loadImage,preloadImages};function checkOverflow(){const e=this,{isLocked:t,params:i}=e,{slidesOffsetBefore:s}=i;if(s){const c=e.slides.length-1,d=e.slidesGrid[c]+e.slidesSizesGrid[c]+s*2;e.isLocked=e.size>d}else e.isLocked=e.snapGrid.length===1;i.allowSlideNext===!0&&(e.allowSlideNext=!e.isLocked),i.allowSlidePrev===!0&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}const checkOverflow$1={checkOverflow},defaults$2={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function moduleExtendParams(e,t){return function(s){s===void 0&&(s={});const c=Object.keys(s)[0],d=s[c];if(typeof d!="object"||d===null){extend$1(t,s);return}if(["navigation","pagination","scrollbar"].indexOf(c)>=0&&e[c]===!0&&(e[c]={auto:!0}),!(c in e&&"enabled"in d)){extend$1(t,s);return}e[c]===!0&&(e[c]={enabled:!0}),typeof e[c]=="object"&&!("enabled"in e[c])&&(e[c].enabled=!0),e[c]||(e[c]={enabled:!1}),extend$1(t,s)}}const prototypes={eventsEmitter,update,translate,transition,slide,loop,grabCursor,events:events$1,breakpoints,checkOverflow:checkOverflow$1,classes,images},extendedDefaults={};class Swiper$1{constructor(){let t,i;for(var s=arguments.length,c=new Array(s),d=0;d<s;d++)c[d]=arguments[d];if(c.length===1&&c[0].constructor&&Object.prototype.toString.call(c[0]).slice(8,-1)==="Object"?i=c[0]:[t,i]=c,i||(i={}),i=extend$1({},i),t&&!i.el&&(i.el=t),i.el&&$(i.el).length>1){const E=[];return $(i.el).each(w=>{const k=extend$1({},i,{el:w});E.push(new Swiper$1(k))}),E}const g=this;g.__swiper__=!0,g.support=getSupport(),g.device=getDevice({userAgent:i.userAgent}),g.browser=getBrowser(),g.eventsListeners={},g.eventsAnyListeners=[],g.modules=[...g.__modules__],i.modules&&Array.isArray(i.modules)&&g.modules.push(...i.modules);const r={};g.modules.forEach(E=>{E({swiper:g,extendParams:moduleExtendParams(i,r),on:g.on.bind(g),once:g.once.bind(g),off:g.off.bind(g),emit:g.emit.bind(g)})});const y=extend$1({},defaults$2,r);return g.params=extend$1({},y,extendedDefaults,i),g.originalParams=extend$1({},g.params),g.passedParams=extend$1({},i),g.params&&g.params.on&&Object.keys(g.params.on).forEach(E=>{g.on(E,g.params.on[E])}),g.params&&g.params.onAny&&g.onAny(g.params.onAny),g.$=$,Object.assign(g,{enabled:g.params.enabled,el:t,classNames:[],slides:$(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return g.params.direction==="horizontal"},isVertical(){return g.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:g.params.allowSlideNext,allowSlidePrev:g.params.allowSlidePrev,touchEvents:function(){const w=["touchstart","touchmove","touchend","touchcancel"],k=["pointerdown","pointermove","pointerup"];return g.touchEventsTouch={start:w[0],move:w[1],end:w[2],cancel:w[3]},g.touchEventsDesktop={start:k[0],move:k[1],end:k[2]},g.support.touch||!g.params.simulateTouch?g.touchEventsTouch:g.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:g.params.focusableElements,lastClickTime:now(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:g.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),g.emit("_swiper"),g.params.init&&g.init(),g}enable(){const t=this;t.enabled||(t.enabled=!0,t.params.grabCursor&&t.setGrabCursor(),t.emit("enable"))}disable(){const t=this;!t.enabled||(t.enabled=!1,t.params.grabCursor&&t.unsetGrabCursor(),t.emit("disable"))}setProgress(t,i){const s=this;t=Math.min(Math.max(t,0),1);const c=s.minTranslate(),g=(s.maxTranslate()-c)*t+c;s.translateTo(g,typeof i>"u"?0:i),s.updateActiveIndex(),s.updateSlidesClasses()}emitContainerClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const i=t.el.className.split(" ").filter(s=>s.indexOf("swiper")===0||s.indexOf(t.params.containerModifierClass)===0);t.emit("_containerClasses",i.join(" "))}getSlideClasses(t){const i=this;return i.destroyed?"":t.className.split(" ").filter(s=>s.indexOf("swiper-slide")===0||s.indexOf(i.params.slideClass)===0).join(" ")}emitSlidesClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const i=[];t.slides.each(s=>{const c=t.getSlideClasses(s);i.push({slideEl:s,classNames:c}),t.emit("_slideClass",s,c)}),t.emit("_slideClasses",i)}slidesPerViewDynamic(t,i){t===void 0&&(t="current"),i===void 0&&(i=!1);const s=this,{params:c,slides:d,slidesGrid:g,slidesSizesGrid:r,size:y,activeIndex:E}=s;let w=1;if(c.centeredSlides){let k=d[E].swiperSlideSize,S;for(let I=E+1;I<d.length;I+=1)d[I]&&!S&&(k+=d[I].swiperSlideSize,w+=1,k>y&&(S=!0));for(let I=E-1;I>=0;I-=1)d[I]&&!S&&(k+=d[I].swiperSlideSize,w+=1,k>y&&(S=!0))}else if(t==="current")for(let k=E+1;k<d.length;k+=1)(i?g[k]+r[k]-g[E]<y:g[k]-g[E]<y)&&(w+=1);else for(let k=E-1;k>=0;k-=1)g[E]-g[k]<y&&(w+=1);return w}update(){const t=this;if(!t||t.destroyed)return;const{snapGrid:i,params:s}=t;s.breakpoints&&t.setBreakpoint(),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses();function c(){const g=t.rtlTranslate?t.translate*-1:t.translate,r=Math.min(Math.max(g,t.maxTranslate()),t.minTranslate());t.setTranslate(r),t.updateActiveIndex(),t.updateSlidesClasses()}let d;t.params.freeMode&&t.params.freeMode.enabled?(c(),t.params.autoHeight&&t.updateAutoHeight()):((t.params.slidesPerView==="auto"||t.params.slidesPerView>1)&&t.isEnd&&!t.params.centeredSlides?d=t.slideTo(t.slides.length-1,0,!1,!0):d=t.slideTo(t.activeIndex,0,!1,!0),d||c()),s.watchOverflow&&i!==t.snapGrid&&t.checkOverflow(),t.emit("update")}changeDirection(t,i){i===void 0&&(i=!0);const s=this,c=s.params.direction;return t||(t=c==="horizontal"?"vertical":"horizontal"),t===c||t!=="horizontal"&&t!=="vertical"||(s.$el.removeClass(`${s.params.containerModifierClass}${c}`).addClass(`${s.params.containerModifierClass}${t}`),s.emitContainerClasses(),s.params.direction=t,s.slides.each(d=>{t==="vertical"?d.style.width="":d.style.height=""}),s.emit("changeDirection"),i&&s.update()),s}changeLanguageDirection(t){const i=this;i.rtl&&t==="rtl"||!i.rtl&&t==="ltr"||(i.rtl=t==="rtl",i.rtlTranslate=i.params.direction==="horizontal"&&i.rtl,i.rtl?(i.$el.addClass(`${i.params.containerModifierClass}rtl`),i.el.dir="rtl"):(i.$el.removeClass(`${i.params.containerModifierClass}rtl`),i.el.dir="ltr"),i.update())}mount(t){const i=this;if(i.mounted)return!0;const s=$(t||i.params.el);if(t=s[0],!t)return!1;t.swiper=i;const c=()=>`.${(i.params.wrapperClass||"").trim().split(" ").join(".")}`;let g=(()=>{if(t&&t.shadowRoot&&t.shadowRoot.querySelector){const r=$(t.shadowRoot.querySelector(c()));return r.children=y=>s.children(y),r}return s.children?s.children(c()):$(s).children(c())})();if(g.length===0&&i.params.createElements){const y=getDocument().createElement("div");g=$(y),y.className=i.params.wrapperClass,s.append(y),s.children(`.${i.params.slideClass}`).each(E=>{g.append(E)})}return Object.assign(i,{$el:s,el:t,$wrapperEl:g,wrapperEl:g[0],mounted:!0,rtl:t.dir.toLowerCase()==="rtl"||s.css("direction")==="rtl",rtlTranslate:i.params.direction==="horizontal"&&(t.dir.toLowerCase()==="rtl"||s.css("direction")==="rtl"),wrongRTL:g.css("display")==="-webkit-box"}),!0}init(t){const i=this;return i.initialized||i.mount(t)===!1||(i.emit("beforeInit"),i.params.breakpoints&&i.setBreakpoint(),i.addClasses(),i.params.loop&&i.loopCreate(),i.updateSize(),i.updateSlides(),i.params.watchOverflow&&i.checkOverflow(),i.params.grabCursor&&i.enabled&&i.setGrabCursor(),i.params.preloadImages&&i.preloadImages(),i.params.loop?i.slideTo(i.params.initialSlide+i.loopedSlides,0,i.params.runCallbacksOnInit,!1,!0):i.slideTo(i.params.initialSlide,0,i.params.runCallbacksOnInit,!1,!0),i.attachEvents(),i.initialized=!0,i.emit("init"),i.emit("afterInit")),i}destroy(t,i){t===void 0&&(t=!0),i===void 0&&(i=!0);const s=this,{params:c,$el:d,$wrapperEl:g,slides:r}=s;return typeof s.params>"u"||s.destroyed||(s.emit("beforeDestroy"),s.initialized=!1,s.detachEvents(),c.loop&&s.loopDestroy(),i&&(s.removeClasses(),d.removeAttr("style"),g.removeAttr("style"),r&&r.length&&r.removeClass([c.slideVisibleClass,c.slideActiveClass,c.slideNextClass,c.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),s.emit("destroy"),Object.keys(s.eventsListeners).forEach(y=>{s.off(y)}),t!==!1&&(s.$el[0].swiper=null,deleteProps(s)),s.destroyed=!0),null}static extendDefaults(t){extend$1(extendedDefaults,t)}static get extendedDefaults(){return extendedDefaults}static get defaults(){return defaults$2}static installModule(t){Swiper$1.prototype.__modules__||(Swiper$1.prototype.__modules__=[]);const i=Swiper$1.prototype.__modules__;typeof t=="function"&&i.indexOf(t)<0&&i.push(t)}static use(t){return Array.isArray(t)?(t.forEach(i=>Swiper$1.installModule(i)),Swiper$1):(Swiper$1.installModule(t),Swiper$1)}}Object.keys(prototypes).forEach(e=>{Object.keys(prototypes[e]).forEach(t=>{Swiper$1.prototype[t]=prototypes[e][t]})});Swiper$1.use([Resize,Observer]);function Mousewheel(e){let{swiper:t,extendParams:i,on:s,emit:c}=e;const d=getWindow();i({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null}}),t.mousewheel={enabled:!1};let g,r=now(),y;const E=[];function w(U){let re=0,ie=0,Ce=0,we=0;return"detail"in U&&(ie=U.detail),"wheelDelta"in U&&(ie=-U.wheelDelta/120),"wheelDeltaY"in U&&(ie=-U.wheelDeltaY/120),"wheelDeltaX"in U&&(re=-U.wheelDeltaX/120),"axis"in U&&U.axis===U.HORIZONTAL_AXIS&&(re=ie,ie=0),Ce=re*10,we=ie*10,"deltaY"in U&&(we=U.deltaY),"deltaX"in U&&(Ce=U.deltaX),U.shiftKey&&!Ce&&(Ce=we,we=0),(Ce||we)&&U.deltaMode&&(U.deltaMode===1?(Ce*=40,we*=40):(Ce*=800,we*=800)),Ce&&!re&&(re=Ce<1?-1:1),we&&!ie&&(ie=we<1?-1:1),{spinX:re,spinY:ie,pixelX:Ce,pixelY:we}}function k(){!t.enabled||(t.mouseEntered=!0)}function S(){!t.enabled||(t.mouseEntered=!1)}function I(U){return t.params.mousewheel.thresholdDelta&&U.delta<t.params.mousewheel.thresholdDelta||t.params.mousewheel.thresholdTime&&now()-r<t.params.mousewheel.thresholdTime?!1:U.delta>=6&&now()-r<60?!0:(U.direction<0?(!t.isEnd||t.params.loop)&&!t.animating&&(t.slideNext(),c("scroll",U.raw)):(!t.isBeginning||t.params.loop)&&!t.animating&&(t.slidePrev(),c("scroll",U.raw)),r=new d.Date().getTime(),!1)}function L(U){const Z=t.params.mousewheel;if(U.direction<0){if(t.isEnd&&!t.params.loop&&Z.releaseOnEdges)return!0}else if(t.isBeginning&&!t.params.loop&&Z.releaseOnEdges)return!0;return!1}function D(U){let Z=U,W=!0;if(!t.enabled)return;const ne=t.params.mousewheel;t.params.cssMode&&Z.preventDefault();let re=t.$el;if(t.params.mousewheel.eventsTarget!=="container"&&(re=$(t.params.mousewheel.eventsTarget)),!t.mouseEntered&&!re[0].contains(Z.target)&&!ne.releaseOnEdges)return!0;Z.originalEvent&&(Z=Z.originalEvent);let ie=0;const Ce=t.rtlTranslate?-1:1,we=w(Z);if(ne.forceToAxis)if(t.isHorizontal())if(Math.abs(we.pixelX)>Math.abs(we.pixelY))ie=-we.pixelX*Ce;else return!0;else if(Math.abs(we.pixelY)>Math.abs(we.pixelX))ie=-we.pixelY;else return!0;else ie=Math.abs(we.pixelX)>Math.abs(we.pixelY)?-we.pixelX*Ce:-we.pixelY;if(ie===0)return!0;ne.invert&&(ie=-ie);let fe=t.getTranslate()+ie*ne.sensitivity;if(fe>=t.minTranslate()&&(fe=t.minTranslate()),fe<=t.maxTranslate()&&(fe=t.maxTranslate()),W=t.params.loop?!0:!(fe===t.minTranslate()||fe===t.maxTranslate()),W&&t.params.nested&&Z.stopPropagation(),!t.params.freeMode||!t.params.freeMode.enabled){const de={time:now(),delta:Math.abs(ie),direction:Math.sign(ie),raw:U};E.length>=2&&E.shift();const Le=E.length?E[E.length-1]:void 0;if(E.push(de),Le?(de.direction!==Le.direction||de.delta>Le.delta||de.time>Le.time+150)&&I(de):I(de),L(de))return!0}else{const de={time:now(),delta:Math.abs(ie),direction:Math.sign(ie)},Le=y&&de.time<y.time+500&&de.delta<=y.delta&&de.direction===y.direction;if(!Le){y=void 0,t.params.loop&&t.loopFix();let Ge=t.getTranslate()+ie*ne.sensitivity;const wt=t.isBeginning,Te=t.isEnd;if(Ge>=t.minTranslate()&&(Ge=t.minTranslate()),Ge<=t.maxTranslate()&&(Ge=t.maxTranslate()),t.setTransition(0),t.setTranslate(Ge),t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses(),(!wt&&t.isBeginning||!Te&&t.isEnd)&&t.updateSlidesClasses(),t.params.freeMode.sticky){clearTimeout(g),g=void 0,E.length>=15&&E.shift();const ze=E.length?E[E.length-1]:void 0,Ke=E[0];if(E.push(de),ze&&(de.delta>ze.delta||de.direction!==ze.direction))E.splice(0);else if(E.length>=15&&de.time-Ke.time<500&&Ke.delta-de.delta>=1&&de.delta<=6){const ut=ie>0?.8:.2;y=de,E.splice(0),g=nextTick(()=>{t.slideToClosest(t.params.speed,!0,void 0,ut)},0)}g||(g=nextTick(()=>{y=de,E.splice(0),t.slideToClosest(t.params.speed,!0,void 0,.5)},500))}if(Le||c("scroll",Z),t.params.autoplay&&t.params.autoplayDisableOnInteraction&&t.autoplay.stop(),Ge===t.minTranslate()||Ge===t.maxTranslate())return!0}}return Z.preventDefault?Z.preventDefault():Z.returnValue=!1,!1}function O(U){let Z=t.$el;t.params.mousewheel.eventsTarget!=="container"&&(Z=$(t.params.mousewheel.eventsTarget)),Z[U]("mouseenter",k),Z[U]("mouseleave",S),Z[U]("wheel",D)}function V(){return t.params.cssMode?(t.wrapperEl.removeEventListener("wheel",D),!0):t.mousewheel.enabled?!1:(O("on"),t.mousewheel.enabled=!0,!0)}function z(){return t.params.cssMode?(t.wrapperEl.addEventListener(event,D),!0):t.mousewheel.enabled?(O("off"),t.mousewheel.enabled=!1,!0):!1}s("init",()=>{!t.params.mousewheel.enabled&&t.params.cssMode&&z(),t.params.mousewheel.enabled&&V()}),s("destroy",()=>{t.params.cssMode&&V(),t.mousewheel.enabled&&z()}),Object.assign(t.mousewheel,{enable:V,disable:z})}function createElementIfNotDefined(e,t,i,s){const c=getDocument();return e.params.createElements&&Object.keys(s).forEach(d=>{if(!i[d]&&i.auto===!0){let g=e.$el.children(`.${s[d]}`)[0];g||(g=c.createElement("div"),g.className=s[d],e.$el.append(g)),i[d]=g,t[d]=g}}),i}function Navigation(e){let{swiper:t,extendParams:i,on:s,emit:c}=e;i({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,$nextEl:null,prevEl:null,$prevEl:null};function d(L){let D;return L&&(D=$(L),t.params.uniqueNavElements&&typeof L=="string"&&D.length>1&&t.$el.find(L).length===1&&(D=t.$el.find(L))),D}function g(L,D){const O=t.params.navigation;L&&L.length>0&&(L[D?"addClass":"removeClass"](O.disabledClass),L[0]&&L[0].tagName==="BUTTON"&&(L[0].disabled=D),t.params.watchOverflow&&t.enabled&&L[t.isLocked?"addClass":"removeClass"](O.lockClass))}function r(){if(t.params.loop)return;const{$nextEl:L,$prevEl:D}=t.navigation;g(D,t.isBeginning&&!t.params.rewind),g(L,t.isEnd&&!t.params.rewind)}function y(L){L.preventDefault(),!(t.isBeginning&&!t.params.loop&&!t.params.rewind)&&(t.slidePrev(),c("navigationPrev"))}function E(L){L.preventDefault(),!(t.isEnd&&!t.params.loop&&!t.params.rewind)&&(t.slideNext(),c("navigationNext"))}function w(){const L=t.params.navigation;if(t.params.navigation=createElementIfNotDefined(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(L.nextEl||L.prevEl))return;const D=d(L.nextEl),O=d(L.prevEl);D&&D.length>0&&D.on("click",E),O&&O.length>0&&O.on("click",y),Object.assign(t.navigation,{$nextEl:D,nextEl:D&&D[0],$prevEl:O,prevEl:O&&O[0]}),t.enabled||(D&&D.addClass(L.lockClass),O&&O.addClass(L.lockClass))}function k(){const{$nextEl:L,$prevEl:D}=t.navigation;L&&L.length&&(L.off("click",E),L.removeClass(t.params.navigation.disabledClass)),D&&D.length&&(D.off("click",y),D.removeClass(t.params.navigation.disabledClass))}s("init",()=>{t.params.navigation.enabled===!1?I():(w(),r())}),s("toEdge fromEdge lock unlock",()=>{r()}),s("destroy",()=>{k()}),s("enable disable",()=>{const{$nextEl:L,$prevEl:D}=t.navigation;L&&L[t.enabled?"removeClass":"addClass"](t.params.navigation.lockClass),D&&D[t.enabled?"removeClass":"addClass"](t.params.navigation.lockClass)}),s("click",(L,D)=>{const{$nextEl:O,$prevEl:V}=t.navigation,z=D.target;if(t.params.navigation.hideOnClick&&!$(z).is(V)&&!$(z).is(O)){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===z||t.pagination.el.contains(z)))return;let U;O?U=O.hasClass(t.params.navigation.hiddenClass):V&&(U=V.hasClass(t.params.navigation.hiddenClass)),c(U===!0?"navigationShow":"navigationHide"),O&&O.toggleClass(t.params.navigation.hiddenClass),V&&V.toggleClass(t.params.navigation.hiddenClass)}});const S=()=>{t.$el.removeClass(t.params.navigation.navigationDisabledClass),w(),r()},I=()=>{t.$el.addClass(t.params.navigation.navigationDisabledClass),k()};Object.assign(t.navigation,{enable:S,disable:I,update:r,init:w,destroy:k})}function classesToSelector(e){return e===void 0&&(e=""),`.${e.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}`}function Pagination(e){let{swiper:t,extendParams:i,on:s,emit:c}=e;const d="swiper-pagination";i({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:O=>O,formatFractionTotal:O=>O,bulletClass:`${d}-bullet`,bulletActiveClass:`${d}-bullet-active`,modifierClass:`${d}-`,currentClass:`${d}-current`,totalClass:`${d}-total`,hiddenClass:`${d}-hidden`,progressbarFillClass:`${d}-progressbar-fill`,progressbarOppositeClass:`${d}-progressbar-opposite`,clickableClass:`${d}-clickable`,lockClass:`${d}-lock`,horizontalClass:`${d}-horizontal`,verticalClass:`${d}-vertical`,paginationDisabledClass:`${d}-disabled`}}),t.pagination={el:null,$el:null,bullets:[]};let g,r=0;function y(){return!t.params.pagination.el||!t.pagination.el||!t.pagination.$el||t.pagination.$el.length===0}function E(O,V){const{bulletActiveClass:z}=t.params.pagination;O[V]().addClass(`${z}-${V}`)[V]().addClass(`${z}-${V}-${V}`)}function w(){const O=t.rtl,V=t.params.pagination;if(y())return;const z=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,U=t.pagination.$el;let Z;const W=t.params.loop?Math.ceil((z-t.loopedSlides*2)/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?(Z=Math.ceil((t.activeIndex-t.loopedSlides)/t.params.slidesPerGroup),Z>z-1-t.loopedSlides*2&&(Z-=z-t.loopedSlides*2),Z>W-1&&(Z-=W),Z<0&&t.params.paginationType!=="bullets"&&(Z=W+Z)):typeof t.snapIndex<"u"?Z=t.snapIndex:Z=t.activeIndex||0,V.type==="bullets"&&t.pagination.bullets&&t.pagination.bullets.length>0){const ne=t.pagination.bullets;let re,ie,Ce;if(V.dynamicBullets&&(g=ne.eq(0)[t.isHorizontal()?"outerWidth":"outerHeight"](!0),U.css(t.isHorizontal()?"width":"height",`${g*(V.dynamicMainBullets+4)}px`),V.dynamicMainBullets>1&&t.previousIndex!==void 0&&(r+=Z-(t.previousIndex-t.loopedSlides||0),r>V.dynamicMainBullets-1?r=V.dynamicMainBullets-1:r<0&&(r=0)),re=Math.max(Z-r,0),ie=re+(Math.min(ne.length,V.dynamicMainBullets)-1),Ce=(ie+re)/2),ne.removeClass(["","-next","-next-next","-prev","-prev-prev","-main"].map(we=>`${V.bulletActiveClass}${we}`).join(" ")),U.length>1)ne.each(we=>{const fe=$(we),de=fe.index();de===Z&&fe.addClass(V.bulletActiveClass),V.dynamicBullets&&(de>=re&&de<=ie&&fe.addClass(`${V.bulletActiveClass}-main`),de===re&&E(fe,"prev"),de===ie&&E(fe,"next"))});else{const we=ne.eq(Z),fe=we.index();if(we.addClass(V.bulletActiveClass),V.dynamicBullets){const de=ne.eq(re),Le=ne.eq(ie);for(let Ge=re;Ge<=ie;Ge+=1)ne.eq(Ge).addClass(`${V.bulletActiveClass}-main`);if(t.params.loop)if(fe>=ne.length){for(let Ge=V.dynamicMainBullets;Ge>=0;Ge-=1)ne.eq(ne.length-Ge).addClass(`${V.bulletActiveClass}-main`);ne.eq(ne.length-V.dynamicMainBullets-1).addClass(`${V.bulletActiveClass}-prev`)}else E(de,"prev"),E(Le,"next");else E(de,"prev"),E(Le,"next")}}if(V.dynamicBullets){const we=Math.min(ne.length,V.dynamicMainBullets+4),fe=(g*we-g)/2-Ce*g,de=O?"right":"left";ne.css(t.isHorizontal()?de:"top",`${fe}px`)}}if(V.type==="fraction"&&(U.find(classesToSelector(V.currentClass)).text(V.formatFractionCurrent(Z+1)),U.find(classesToSelector(V.totalClass)).text(V.formatFractionTotal(W))),V.type==="progressbar"){let ne;V.progressbarOpposite?ne=t.isHorizontal()?"vertical":"horizontal":ne=t.isHorizontal()?"horizontal":"vertical";const re=(Z+1)/W;let ie=1,Ce=1;ne==="horizontal"?ie=re:Ce=re,U.find(classesToSelector(V.progressbarFillClass)).transform(`translate3d(0,0,0) scaleX(${ie}) scaleY(${Ce})`).transition(t.params.speed)}V.type==="custom"&&V.renderCustom?(U.html(V.renderCustom(t,Z+1,W)),c("paginationRender",U[0])):c("paginationUpdate",U[0]),t.params.watchOverflow&&t.enabled&&U[t.isLocked?"addClass":"removeClass"](V.lockClass)}function k(){const O=t.params.pagination;if(y())return;const V=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,z=t.pagination.$el;let U="";if(O.type==="bullets"){let Z=t.params.loop?Math.ceil((V-t.loopedSlides*2)/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&t.params.freeMode.enabled&&!t.params.loop&&Z>V&&(Z=V);for(let W=0;W<Z;W+=1)O.renderBullet?U+=O.renderBullet.call(t,W,O.bulletClass):U+=`<${O.bulletElement} class="${O.bulletClass}"></${O.bulletElement}>`;z.html(U),t.pagination.bullets=z.find(classesToSelector(O.bulletClass))}O.type==="fraction"&&(O.renderFraction?U=O.renderFraction.call(t,O.currentClass,O.totalClass):U=`<span class="${O.currentClass}"></span> / <span class="${O.totalClass}"></span>`,z.html(U)),O.type==="progressbar"&&(O.renderProgressbar?U=O.renderProgressbar.call(t,O.progressbarFillClass):U=`<span class="${O.progressbarFillClass}"></span>`,z.html(U)),O.type!=="custom"&&c("paginationRender",t.pagination.$el[0])}function S(){t.params.pagination=createElementIfNotDefined(t,t.originalParams.pagination,t.params.pagination,{el:"swiper-pagination"});const O=t.params.pagination;if(!O.el)return;let V=$(O.el);V.length!==0&&(t.params.uniqueNavElements&&typeof O.el=="string"&&V.length>1&&(V=t.$el.find(O.el),V.length>1&&(V=V.filter(z=>$(z).parents(".swiper")[0]===t.el))),O.type==="bullets"&&O.clickable&&V.addClass(O.clickableClass),V.addClass(O.modifierClass+O.type),V.addClass(t.isHorizontal()?O.horizontalClass:O.verticalClass),O.type==="bullets"&&O.dynamicBullets&&(V.addClass(`${O.modifierClass}${O.type}-dynamic`),r=0,O.dynamicMainBullets<1&&(O.dynamicMainBullets=1)),O.type==="progressbar"&&O.progressbarOpposite&&V.addClass(O.progressbarOppositeClass),O.clickable&&V.on("click",classesToSelector(O.bulletClass),function(U){U.preventDefault();let Z=$(this).index()*t.params.slidesPerGroup;t.params.loop&&(Z+=t.loopedSlides),t.slideTo(Z)}),Object.assign(t.pagination,{$el:V,el:V[0]}),t.enabled||V.addClass(O.lockClass))}function I(){const O=t.params.pagination;if(y())return;const V=t.pagination.$el;V.removeClass(O.hiddenClass),V.removeClass(O.modifierClass+O.type),V.removeClass(t.isHorizontal()?O.horizontalClass:O.verticalClass),t.pagination.bullets&&t.pagination.bullets.removeClass&&t.pagination.bullets.removeClass(O.bulletActiveClass),O.clickable&&V.off("click",classesToSelector(O.bulletClass))}s("init",()=>{t.params.pagination.enabled===!1?D():(S(),k(),w())}),s("activeIndexChange",()=>{(t.params.loop||typeof t.snapIndex>"u")&&w()}),s("snapIndexChange",()=>{t.params.loop||w()}),s("slidesLengthChange",()=>{t.params.loop&&(k(),w())}),s("snapGridLengthChange",()=>{t.params.loop||(k(),w())}),s("destroy",()=>{I()}),s("enable disable",()=>{const{$el:O}=t.pagination;O&&O[t.enabled?"removeClass":"addClass"](t.params.pagination.lockClass)}),s("lock unlock",()=>{w()}),s("click",(O,V)=>{const z=V.target,{$el:U}=t.pagination;if(t.params.pagination.el&&t.params.pagination.hideOnClick&&U&&U.length>0&&!$(z).hasClass(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&z===t.navigation.nextEl||t.navigation.prevEl&&z===t.navigation.prevEl))return;const Z=U.hasClass(t.params.pagination.hiddenClass);c(Z===!0?"paginationShow":"paginationHide"),U.toggleClass(t.params.pagination.hiddenClass)}});const L=()=>{t.$el.removeClass(t.params.pagination.paginationDisabledClass),t.pagination.$el&&t.pagination.$el.removeClass(t.params.pagination.paginationDisabledClass),S(),k(),w()},D=()=>{t.$el.addClass(t.params.pagination.paginationDisabledClass),t.pagination.$el&&t.pagination.$el.addClass(t.params.pagination.paginationDisabledClass),I()};Object.assign(t.pagination,{enable:L,disable:D,render:k,update:w,init:S,destroy:I})}function Lazy(e){let{swiper:t,extendParams:i,on:s,emit:c}=e;i({lazy:{checkInView:!1,enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,scrollingElement:"",elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}}),t.lazy={};let d=!1,g=!1;function r(w,k){k===void 0&&(k=!0);const S=t.params.lazy;if(typeof w>"u"||t.slides.length===0)return;const L=t.virtual&&t.params.virtual.enabled?t.$wrapperEl.children(`.${t.params.slideClass}[data-swiper-slide-index="${w}"]`):t.slides.eq(w),D=L.find(`.${S.elementClass}:not(.${S.loadedClass}):not(.${S.loadingClass})`);L.hasClass(S.elementClass)&&!L.hasClass(S.loadedClass)&&!L.hasClass(S.loadingClass)&&D.push(L[0]),D.length!==0&&D.each(O=>{const V=$(O);V.addClass(S.loadingClass);const z=V.attr("data-background"),U=V.attr("data-src"),Z=V.attr("data-srcset"),W=V.attr("data-sizes"),ne=V.parent("picture");t.loadImage(V[0],U||z,Z,W,!1,()=>{if(!(typeof t>"u"||t===null||!t||t&&!t.params||t.destroyed)){if(z?(V.css("background-image",`url("${z}")`),V.removeAttr("data-background")):(Z&&(V.attr("srcset",Z),V.removeAttr("data-srcset")),W&&(V.attr("sizes",W),V.removeAttr("data-sizes")),ne.length&&ne.children("source").each(re=>{const ie=$(re);ie.attr("data-srcset")&&(ie.attr("srcset",ie.attr("data-srcset")),ie.removeAttr("data-srcset"))}),U&&(V.attr("src",U),V.removeAttr("data-src"))),V.addClass(S.loadedClass).removeClass(S.loadingClass),L.find(`.${S.preloaderClass}`).remove(),t.params.loop&&k){const re=L.attr("data-swiper-slide-index");if(L.hasClass(t.params.slideDuplicateClass)){const ie=t.$wrapperEl.children(`[data-swiper-slide-index="${re}"]:not(.${t.params.slideDuplicateClass})`);r(ie.index(),!1)}else{const ie=t.$wrapperEl.children(`.${t.params.slideDuplicateClass}[data-swiper-slide-index="${re}"]`);r(ie.index(),!1)}}c("lazyImageReady",L[0],V[0]),t.params.autoHeight&&t.updateAutoHeight()}}),c("lazyImageLoad",L[0],V[0])})}function y(){const{$wrapperEl:w,params:k,slides:S,activeIndex:I}=t,L=t.virtual&&k.virtual.enabled,D=k.lazy;let O=k.slidesPerView;O==="auto"&&(O=0);function V(U){if(L){if(w.children(`.${k.slideClass}[data-swiper-slide-index="${U}"]`).length)return!0}else if(S[U])return!0;return!1}function z(U){return L?$(U).attr("data-swiper-slide-index"):$(U).index()}if(g||(g=!0),t.params.watchSlidesProgress)w.children(`.${k.slideVisibleClass}`).each(U=>{const Z=L?$(U).attr("data-swiper-slide-index"):$(U).index();r(Z)});else if(O>1)for(let U=I;U<I+O;U+=1)V(U)&&r(U);else r(I);if(D.loadPrevNext)if(O>1||D.loadPrevNextAmount&&D.loadPrevNextAmount>1){const U=D.loadPrevNextAmount,Z=Math.ceil(O),W=Math.min(I+Z+Math.max(U,Z),S.length),ne=Math.max(I-Math.max(Z,U),0);for(let re=I+Z;re<W;re+=1)V(re)&&r(re);for(let re=ne;re<I;re+=1)V(re)&&r(re)}else{const U=w.children(`.${k.slideNextClass}`);U.length>0&&r(z(U));const Z=w.children(`.${k.slidePrevClass}`);Z.length>0&&r(z(Z))}}function E(){const w=getWindow();if(!t||t.destroyed)return;const k=t.params.lazy.scrollingElement?$(t.params.lazy.scrollingElement):$(w),S=k[0]===w,I=S?w.innerWidth:k[0].offsetWidth,L=S?w.innerHeight:k[0].offsetHeight,D=t.$el.offset(),{rtlTranslate:O}=t;let V=!1;O&&(D.left-=t.$el[0].scrollLeft);const z=[[D.left,D.top],[D.left+t.width,D.top],[D.left,D.top+t.height],[D.left+t.width,D.top+t.height]];for(let Z=0;Z<z.length;Z+=1){const W=z[Z];if(W[0]>=0&&W[0]<=I&&W[1]>=0&&W[1]<=L){if(W[0]===0&&W[1]===0)continue;V=!0}}const U=t.touchEvents.start==="touchstart"&&t.support.passiveListener&&t.params.passiveListeners?{passive:!0,capture:!1}:!1;V?(y(),k.off("scroll",E,U)):d||(d=!0,k.on("scroll",E,U))}s("beforeInit",()=>{t.params.lazy.enabled&&t.params.preloadImages&&(t.params.preloadImages=!1)}),s("init",()=>{t.params.lazy.enabled&&(t.params.lazy.checkInView?E():y())}),s("scroll",()=>{t.params.freeMode&&t.params.freeMode.enabled&&!t.params.freeMode.sticky&&y()}),s("scrollbarDragMove resize _freeModeNoMomentumRelease",()=>{t.params.lazy.enabled&&(t.params.lazy.checkInView?E():y())}),s("transitionStart",()=>{t.params.lazy.enabled&&(t.params.lazy.loadOnTransitionStart||!t.params.lazy.loadOnTransitionStart&&!g)&&(t.params.lazy.checkInView?E():y())}),s("transitionEnd",()=>{t.params.lazy.enabled&&!t.params.lazy.loadOnTransitionStart&&(t.params.lazy.checkInView?E():y())}),s("slideChange",()=>{const{lazy:w,cssMode:k,watchSlidesProgress:S,touchReleaseOnEdges:I,resistanceRatio:L}=t.params;w.enabled&&(k||S&&(I||L===0))&&y()}),s("destroy",()=>{!t.$el||t.$el.find(`.${t.params.lazy.loadingClass}`).removeClass(t.params.lazy.loadingClass)}),Object.assign(t.lazy,{load:y,loadInSlide:r})}function A11y(e){let{swiper:t,extendParams:i,on:s}=e;i({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}});let c=null;function d(fe){const de=c;de.length!==0&&(de.html(""),de.html(fe))}function g(fe){fe===void 0&&(fe=16);const de=()=>Math.round(16*Math.random()).toString(16);return"x".repeat(fe).replace(/x/g,de)}function r(fe){fe.attr("tabIndex","0")}function y(fe){fe.attr("tabIndex","-1")}function E(fe,de){fe.attr("role",de)}function w(fe,de){fe.attr("aria-roledescription",de)}function k(fe,de){fe.attr("aria-controls",de)}function S(fe,de){fe.attr("aria-label",de)}function I(fe,de){fe.attr("id",de)}function L(fe,de){fe.attr("aria-live",de)}function D(fe){fe.attr("aria-disabled",!0)}function O(fe){fe.attr("aria-disabled",!1)}function V(fe){if(fe.keyCode!==13&&fe.keyCode!==32)return;const de=t.params.a11y,Le=$(fe.target);t.navigation&&t.navigation.$nextEl&&Le.is(t.navigation.$nextEl)&&(t.isEnd&&!t.params.loop||t.slideNext(),t.isEnd?d(de.lastSlideMessage):d(de.nextSlideMessage)),t.navigation&&t.navigation.$prevEl&&Le.is(t.navigation.$prevEl)&&(t.isBeginning&&!t.params.loop||t.slidePrev(),t.isBeginning?d(de.firstSlideMessage):d(de.prevSlideMessage)),t.pagination&&Le.is(classesToSelector(t.params.pagination.bulletClass))&&Le[0].click()}function z(){if(t.params.loop||t.params.rewind||!t.navigation)return;const{$nextEl:fe,$prevEl:de}=t.navigation;de&&de.length>0&&(t.isBeginning?(D(de),y(de)):(O(de),r(de))),fe&&fe.length>0&&(t.isEnd?(D(fe),y(fe)):(O(fe),r(fe)))}function U(){return t.pagination&&t.pagination.bullets&&t.pagination.bullets.length}function Z(){return U()&&t.params.pagination.clickable}function W(){const fe=t.params.a11y;!U()||t.pagination.bullets.each(de=>{const Le=$(de);t.params.pagination.clickable&&(r(Le),t.params.pagination.renderBullet||(E(Le,"button"),S(Le,fe.paginationBulletMessage.replace(/\{\{index\}\}/,Le.index()+1)))),Le.is(`.${t.params.pagination.bulletActiveClass}`)?Le.attr("aria-current","true"):Le.removeAttr("aria-current")})}const ne=(fe,de,Le)=>{r(fe),fe[0].tagName!=="BUTTON"&&(E(fe,"button"),fe.on("keydown",V)),S(fe,Le),k(fe,de)},re=fe=>{const de=fe.target.closest(`.${t.params.slideClass}`);if(!de||!t.slides.includes(de))return;const Le=t.slides.indexOf(de)===t.activeIndex,Ge=t.params.watchSlidesProgress&&t.visibleSlides&&t.visibleSlides.includes(de);Le||Ge||(t.isHorizontal()?t.el.scrollLeft=0:t.el.scrollTop=0,t.slideTo(t.slides.indexOf(de),0))},ie=()=>{const fe=t.params.a11y;fe.itemRoleDescriptionMessage&&w($(t.slides),fe.itemRoleDescriptionMessage),fe.slideRole&&E($(t.slides),fe.slideRole);const de=t.params.loop?t.slides.filter(Le=>!Le.classList.contains(t.params.slideDuplicateClass)).length:t.slides.length;fe.slideLabelMessage&&t.slides.each((Le,Ge)=>{const wt=$(Le),Te=t.params.loop?parseInt(wt.attr("data-swiper-slide-index"),10):Ge,ze=fe.slideLabelMessage.replace(/\{\{index\}\}/,Te+1).replace(/\{\{slidesLength\}\}/,de);S(wt,ze)})},Ce=()=>{const fe=t.params.a11y;t.$el.append(c);const de=t.$el;fe.containerRoleDescriptionMessage&&w(de,fe.containerRoleDescriptionMessage),fe.containerMessage&&S(de,fe.containerMessage);const Le=t.$wrapperEl,Ge=fe.id||Le.attr("id")||`swiper-wrapper-${g(16)}`,wt=t.params.autoplay&&t.params.autoplay.enabled?"off":"polite";I(Le,Ge),L(Le,wt),ie();let Te,ze;t.navigation&&t.navigation.$nextEl&&(Te=t.navigation.$nextEl),t.navigation&&t.navigation.$prevEl&&(ze=t.navigation.$prevEl),Te&&Te.length&&ne(Te,Ge,fe.nextSlideMessage),ze&&ze.length&&ne(ze,Ge,fe.prevSlideMessage),Z()&&t.pagination.$el.on("keydown",classesToSelector(t.params.pagination.bulletClass),V),t.$el.on("focus",re,!0)};function we(){c&&c.length>0&&c.remove();let fe,de;t.navigation&&t.navigation.$nextEl&&(fe=t.navigation.$nextEl),t.navigation&&t.navigation.$prevEl&&(de=t.navigation.$prevEl),fe&&fe.off("keydown",V),de&&de.off("keydown",V),Z()&&t.pagination.$el.off("keydown",classesToSelector(t.params.pagination.bulletClass),V),t.$el.off("focus",re,!0)}s("beforeInit",()=>{c=$(`<span class="${t.params.a11y.notificationClass}" aria-live="assertive" aria-atomic="true"></span>`)}),s("afterInit",()=>{!t.params.a11y.enabled||Ce()}),s("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{!t.params.a11y.enabled||ie()}),s("fromEdge toEdge afterInit lock unlock",()=>{!t.params.a11y.enabled||z()}),s("paginationUpdate",()=>{!t.params.a11y.enabled||W()}),s("destroy",()=>{!t.params.a11y.enabled||we()})}function Autoplay(e){let{swiper:t,extendParams:i,on:s,emit:c}=e,d;t.autoplay={running:!1,paused:!1},i({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});function g(){if(!t.size){t.autoplay.running=!1,t.autoplay.paused=!1;return}const O=t.slides.eq(t.activeIndex);let V=t.params.autoplay.delay;O.attr("data-swiper-autoplay")&&(V=O.attr("data-swiper-autoplay")||t.params.autoplay.delay),clearTimeout(d),d=nextTick(()=>{let z;t.params.autoplay.reverseDirection?t.params.loop?(t.loopFix(),z=t.slidePrev(t.params.speed,!0,!0),c("autoplay")):t.isBeginning?t.params.autoplay.stopOnLastSlide?y():(z=t.slideTo(t.slides.length-1,t.params.speed,!0,!0),c("autoplay")):(z=t.slidePrev(t.params.speed,!0,!0),c("autoplay")):t.params.loop?(t.loopFix(),z=t.slideNext(t.params.speed,!0,!0),c("autoplay")):t.isEnd?t.params.autoplay.stopOnLastSlide?y():(z=t.slideTo(0,t.params.speed,!0,!0),c("autoplay")):(z=t.slideNext(t.params.speed,!0,!0),c("autoplay")),(t.params.cssMode&&t.autoplay.running||z===!1)&&g()},V)}function r(){return typeof d<"u"||t.autoplay.running?!1:(t.autoplay.running=!0,c("autoplayStart"),g(),!0)}function y(){return!t.autoplay.running||typeof d>"u"?!1:(d&&(clearTimeout(d),d=void 0),t.autoplay.running=!1,c("autoplayStop"),!0)}function E(O){!t.autoplay.running||t.autoplay.paused||(d&&clearTimeout(d),t.autoplay.paused=!0,O===0||!t.params.autoplay.waitForTransition?(t.autoplay.paused=!1,g()):["transitionend","webkitTransitionEnd"].forEach(V=>{t.$wrapperEl[0].addEventListener(V,k)}))}function w(){const O=getDocument();O.visibilityState==="hidden"&&t.autoplay.running&&E(),O.visibilityState==="visible"&&t.autoplay.paused&&(g(),t.autoplay.paused=!1)}function k(O){!t||t.destroyed||!t.$wrapperEl||O.target===t.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach(V=>{t.$wrapperEl[0].removeEventListener(V,k)}),t.autoplay.paused=!1,t.autoplay.running?g():y())}function S(){t.params.autoplay.disableOnInteraction?y():(c("autoplayPause"),E()),["transitionend","webkitTransitionEnd"].forEach(O=>{t.$wrapperEl[0].removeEventListener(O,k)})}function I(){t.params.autoplay.disableOnInteraction||(t.autoplay.paused=!1,c("autoplayResume"),g())}function L(){t.params.autoplay.pauseOnMouseEnter&&(t.$el.on("mouseenter",S),t.$el.on("mouseleave",I))}function D(){t.$el.off("mouseenter",S),t.$el.off("mouseleave",I)}s("init",()=>{t.params.autoplay.enabled&&(r(),getDocument().addEventListener("visibilitychange",w),L())}),s("beforeTransitionStart",(O,V,z)=>{t.autoplay.running&&(z||!t.params.autoplay.disableOnInteraction?t.autoplay.pause(V):y())}),s("sliderFirstMove",()=>{t.autoplay.running&&(t.params.autoplay.disableOnInteraction?y():E())}),s("touchEnd",()=>{t.params.cssMode&&t.autoplay.paused&&!t.params.autoplay.disableOnInteraction&&g()}),s("destroy",()=>{D(),t.autoplay.running&&y(),getDocument().removeEventListener("visibilitychange",w)}),Object.assign(t.autoplay,{pause:E,run:g,start:r,stop:y})}function Grid(e){let{swiper:t,extendParams:i}=e;i({grid:{rows:1,fill:"column"}});let s,c,d;const g=E=>{const{slidesPerView:w}=t.params,{rows:k,fill:S}=t.params.grid;c=s/k,d=Math.floor(E/k),Math.floor(E/k)===E/k?s=E:s=Math.ceil(E/k)*k,w!=="auto"&&S==="row"&&(s=Math.max(s,w*k))},r=(E,w,k,S)=>{const{slidesPerGroup:I,spaceBetween:L}=t.params,{rows:D,fill:O}=t.params.grid;let V,z,U;if(O==="row"&&I>1){const Z=Math.floor(E/(I*D)),W=E-D*I*Z,ne=Z===0?I:Math.min(Math.ceil((k-Z*D*I)/D),I);U=Math.floor(W/ne),z=W-U*ne+Z*I,V=z+U*s/D,w.css({"-webkit-order":V,order:V})}else O==="column"?(z=Math.floor(E/D),U=E-z*D,(z>d||z===d&&U===D-1)&&(U+=1,U>=D&&(U=0,z+=1))):(U=Math.floor(E/c),z=E-U*c);w.css(S("margin-top"),U!==0?L&&`${L}px`:"")},y=(E,w,k)=>{const{spaceBetween:S,centeredSlides:I,roundLengths:L}=t.params,{rows:D}=t.params.grid;if(t.virtualSize=(E+S)*s,t.virtualSize=Math.ceil(t.virtualSize/D)-S,t.$wrapperEl.css({[k("width")]:`${t.virtualSize+S}px`}),I){w.splice(0,w.length);const O=[];for(let V=0;V<w.length;V+=1){let z=w[V];L&&(z=Math.floor(z)),w[V]<t.virtualSize+w[0]&&O.push(z)}w.push(...O)}};t.grid={initSlides:g,updateSlide:r,updateWrapperSize:y}}function effectInit(e){const{effect:t,swiper:i,on:s,setTranslate:c,setTransition:d,overwriteParams:g,perspective:r,recreateShadows:y,getEffectParams:E}=e;s("beforeInit",()=>{if(i.params.effect!==t)return;i.classNames.push(`${i.params.containerModifierClass}${t}`),r&&r()&&i.classNames.push(`${i.params.containerModifierClass}3d`);const k=g?g():{};Object.assign(i.params,k),Object.assign(i.originalParams,k)}),s("setTranslate",()=>{i.params.effect===t&&c()}),s("setTransition",(k,S)=>{i.params.effect===t&&d(S)}),s("transitionEnd",()=>{if(i.params.effect===t&&y){if(!E||!E().slideShadows)return;i.slides.each(k=>{i.$(k).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").remove()}),y()}});let w;s("virtualUpdate",()=>{i.params.effect===t&&(i.slides.length||(w=!0),requestAnimationFrame(()=>{w&&i.slides&&i.slides.length&&(c(),w=!1)}))})}function effectTarget(e,t){return e.transformEl?t.find(e.transformEl).css({"backface-visibility":"hidden","-webkit-backface-visibility":"hidden"}):t}function effectVirtualTransitionEnd(e){let{swiper:t,duration:i,transformEl:s,allSlides:c}=e;const{slides:d,activeIndex:g,$wrapperEl:r}=t;if(t.params.virtualTranslate&&i!==0){let y=!1,E;c?E=s?d.find(s):d:E=s?d.eq(g).find(s):d.eq(g),E.transitionEnd(()=>{if(y||!t||t.destroyed)return;y=!0,t.animating=!1;const w=["webkitTransitionEnd","transitionend"];for(let k=0;k<w.length;k+=1)r.trigger(w[k])})}}function EffectFade(e){let{swiper:t,extendParams:i,on:s}=e;i({fadeEffect:{crossFade:!1,transformEl:null}}),effectInit({effect:"fade",swiper:t,on:s,setTranslate:()=>{const{slides:g}=t,r=t.params.fadeEffect;for(let y=0;y<g.length;y+=1){const E=t.slides.eq(y);let k=-E[0].swiperSlideOffset;t.params.virtualTranslate||(k-=t.translate);let S=0;t.isHorizontal()||(S=k,k=0);const I=t.params.fadeEffect.crossFade?Math.max(1-Math.abs(E[0].progress),0):1+Math.min(Math.max(E[0].progress,-1),0);effectTarget(r,E).css({opacity:I}).transform(`translate3d(${k}px, ${S}px, 0px)`)}},setTransition:g=>{const{transformEl:r}=t.params.fadeEffect;(r?t.slides.find(r):t.slides).transition(g),effectVirtualTransitionEnd({swiper:t,duration:g,transformEl:r,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!t.params.cssMode})})}function isObject(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function extend(e,t){const i=["__proto__","constructor","prototype"];Object.keys(t).filter(s=>i.indexOf(s)<0).forEach(s=>{typeof e[s]>"u"?e[s]=t[s]:isObject(t[s])&&isObject(e[s])&&Object.keys(t[s]).length>0?t[s].__swiper__?e[s]=t[s]:extend(e[s],t[s]):e[s]=t[s]})}function needsNavigation(e){return e===void 0&&(e={}),e.navigation&&typeof e.navigation.nextEl>"u"&&typeof e.navigation.prevEl>"u"}function needsPagination(e){return e===void 0&&(e={}),e.pagination&&typeof e.pagination.el>"u"}function needsScrollbar(e){return e===void 0&&(e={}),e.scrollbar&&typeof e.scrollbar.el>"u"}function uniqueClasses(e){e===void 0&&(e="");const t=e.split(" ").map(s=>s.trim()).filter(s=>!!s),i=[];return t.forEach(s=>{i.indexOf(s)<0&&i.push(s)}),i.join(" ")}const paramsList=["modules","init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopedSlidesLimit","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];function getParams(e,t){e===void 0&&(e={}),t===void 0&&(t=!0);const i={on:{}},s={},c={};extend(i,Swiper$1.defaults),extend(i,Swiper$1.extendedDefaults),i._emitClasses=!0,i.init=!1;const d={},g=paramsList.map(y=>y.replace(/_/,"")),r=Object.assign({},e);return Object.keys(r).forEach(y=>{typeof e[y]>"u"||(g.indexOf(y)>=0?isObject(e[y])?(i[y]={},c[y]={},extend(i[y],e[y]),extend(c[y],e[y])):(i[y]=e[y],c[y]=e[y]):y.search(/on[A-Z]/)===0&&typeof e[y]=="function"?t?s[`${y[2].toLowerCase()}${y.substr(3)}`]=e[y]:i.on[`${y[2].toLowerCase()}${y.substr(3)}`]=e[y]:d[y]=e[y])}),["navigation","pagination","scrollbar"].forEach(y=>{i[y]===!0&&(i[y]={}),i[y]===!1&&delete i[y]}),{params:i,passedParams:c,rest:d,events:s}}function mountSwiper(e,t){let{el:i,nextEl:s,prevEl:c,paginationEl:d,scrollbarEl:g,swiper:r}=e;needsNavigation(t)&&s&&c&&(r.params.navigation.nextEl=s,r.originalParams.navigation.nextEl=s,r.params.navigation.prevEl=c,r.originalParams.navigation.prevEl=c),needsPagination(t)&&d&&(r.params.pagination.el=d,r.originalParams.pagination.el=d),needsScrollbar(t)&&g&&(r.params.scrollbar.el=g,r.originalParams.scrollbar.el=g),r.init(i)}function calcLoopedSlides(e,t){let i=t.slidesPerView;if(t.breakpoints){const c=Swiper$1.prototype.getBreakpoint(t.breakpoints),d=c in t.breakpoints?t.breakpoints[c]:void 0;d&&d.slidesPerView&&(i=d.slidesPerView)}let s=Math.ceil(parseFloat(t.loopedSlides||i,10));return s+=t.loopAdditionalSlides,s>e.length&&t.loopedSlidesLimit&&(s=e.length),s}function renderLoop(e,t,i){const s=t.map((y,E)=>(y.props||(y.props={}),y.props.swiperRef=e,y.props["data-swiper-slide-index"]=E,y));function c(y,E,w){return y.props||(y.props={}),h(y.type,{...y.props,key:`${y.key}-duplicate-${E}-${w}`,class:`${y.props.className||""} ${i.slideDuplicateClass} ${y.props.class||""}`},y.children)}if(i.loopFillGroupWithBlank){const y=i.slidesPerGroup-s.length%i.slidesPerGroup;if(y!==i.slidesPerGroup)for(let E=0;E<y;E+=1){const w=h("div",{class:`${i.slideClass} ${i.slideBlankClass}`});s.push(w)}}i.slidesPerView==="auto"&&!i.loopedSlides&&(i.loopedSlides=s.length);const d=calcLoopedSlides(s,i),g=[],r=[];for(let y=0;y<d;y+=1){const E=y-Math.floor(y/s.length)*s.length;r.push(c(s[E],y,"append")),g.unshift(c(s[s.length-E-1],y,"prepend"))}return e.value&&(e.value.loopedSlides=d),[...g,...s,...r]}function getChangedParams(e,t,i,s,c){const d=[];if(!t)return d;const g=y=>{d.indexOf(y)<0&&d.push(y)};if(i&&s){const y=s.map(c),E=i.map(c);y.join("")!==E.join("")&&g("children"),s.length!==i.length&&g("children")}return paramsList.filter(y=>y[0]==="_").map(y=>y.replace(/_/,"")).forEach(y=>{if(y in e&&y in t)if(isObject(e[y])&&isObject(t[y])){const E=Object.keys(e[y]),w=Object.keys(t[y]);E.length!==w.length?g(y):(E.forEach(k=>{e[y][k]!==t[y][k]&&g(y)}),w.forEach(k=>{e[y][k]!==t[y][k]&&g(y)}))}else e[y]!==t[y]&&g(y)}),d}function getChildren(e,t,i){e===void 0&&(e={});const s=[],c={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]},d=(g,r)=>{!Array.isArray(g)||g.forEach(y=>{const E=typeof y.type=="symbol";r==="default"&&(r="container-end"),E&&y.children?d(y.children,"default"):y.type&&(y.type.name==="SwiperSlide"||y.type.name==="AsyncComponentWrapper")?s.push(y):c[r]&&c[r].push(y)})};return Object.keys(e).forEach(g=>{if(typeof e[g]!="function")return;const r=e[g]();d(r,g)}),i.value=t.value,t.value=s,{slides:s,slots:c}}function updateSwiper(e){let{swiper:t,slides:i,passedParams:s,changedParams:c,nextEl:d,prevEl:g,scrollbarEl:r,paginationEl:y}=e;const E=c.filter(ne=>ne!=="children"&&ne!=="direction"),{params:w,pagination:k,navigation:S,scrollbar:I,virtual:L,thumbs:D}=t;let O,V,z,U,Z;c.includes("thumbs")&&s.thumbs&&s.thumbs.swiper&&w.thumbs&&!w.thumbs.swiper&&(O=!0),c.includes("controller")&&s.controller&&s.controller.control&&w.controller&&!w.controller.control&&(V=!0),c.includes("pagination")&&s.pagination&&(s.pagination.el||y)&&(w.pagination||w.pagination===!1)&&k&&!k.el&&(z=!0),c.includes("scrollbar")&&s.scrollbar&&(s.scrollbar.el||r)&&(w.scrollbar||w.scrollbar===!1)&&I&&!I.el&&(U=!0),c.includes("navigation")&&s.navigation&&(s.navigation.prevEl||g)&&(s.navigation.nextEl||d)&&(w.navigation||w.navigation===!1)&&S&&!S.prevEl&&!S.nextEl&&(Z=!0);const W=ne=>{!t[ne]||(t[ne].destroy(),ne==="navigation"?(w[ne].prevEl=void 0,w[ne].nextEl=void 0,t[ne].prevEl=void 0,t[ne].nextEl=void 0):(w[ne].el=void 0,t[ne].el=void 0))};E.forEach(ne=>{if(isObject(w[ne])&&isObject(s[ne]))extend(w[ne],s[ne]);else{const re=s[ne];(re===!0||re===!1)&&(ne==="navigation"||ne==="pagination"||ne==="scrollbar")?re===!1&&W(ne):w[ne]=s[ne]}}),E.includes("controller")&&!V&&t.controller&&t.controller.control&&w.controller&&w.controller.control&&(t.controller.control=w.controller.control),c.includes("children")&&i&&L&&w.virtual.enabled?(L.slides=i,L.update(!0)):c.includes("children")&&t.lazy&&t.params.lazy.enabled&&t.lazy.load(),O&&D.init()&&D.update(!0),V&&(t.controller.control=w.controller.control),z&&(y&&(w.pagination.el=y),k.init(),k.render(),k.update()),U&&(r&&(w.scrollbar.el=r),I.init(),I.updateSize(),I.setTranslate()),Z&&(d&&(w.navigation.nextEl=d),g&&(w.navigation.prevEl=g),S.init(),S.update()),c.includes("allowSlideNext")&&(t.allowSlideNext=s.allowSlideNext),c.includes("allowSlidePrev")&&(t.allowSlidePrev=s.allowSlidePrev),c.includes("direction")&&t.changeDirection(s.direction,!1),t.update()}function renderVirtual(e,t,i){if(!i)return null;const s=e.value.isHorizontal()?{[e.value.rtlTranslate?"right":"left"]:`${i.offset}px`}:{top:`${i.offset}px`};return t.filter((c,d)=>d>=i.from&&d<=i.to).map(c=>(c.props||(c.props={}),c.props.style||(c.props.style={}),c.props.swiperRef=e,c.props.style=s,h(c.type,{...c.props},c.children)))}const updateOnVirtualData=e=>{!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.lazy&&e.params.lazy.enabled&&e.lazy.load(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())},Swiper={name:"Swiper",props:{tag:{type:String,default:"div"},wrapperTag:{type:String,default:"div"},modules:{type:Array,default:void 0},init:{type:Boolean,default:void 0},direction:{type:String,default:void 0},touchEventsTarget:{type:String,default:void 0},initialSlide:{type:Number,default:void 0},speed:{type:Number,default:void 0},cssMode:{type:Boolean,default:void 0},updateOnWindowResize:{type:Boolean,default:void 0},resizeObserver:{type:Boolean,default:void 0},nested:{type:Boolean,default:void 0},focusableElements:{type:String,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},preventInteractionOnTransition:{type:Boolean,default:void 0},userAgent:{type:String,default:void 0},url:{type:String,default:void 0},edgeSwipeDetection:{type:[Boolean,String],default:void 0},edgeSwipeThreshold:{type:Number,default:void 0},autoHeight:{type:Boolean,default:void 0},setWrapperSize:{type:Boolean,default:void 0},virtualTranslate:{type:Boolean,default:void 0},effect:{type:String,default:void 0},breakpoints:{type:Object,default:void 0},spaceBetween:{type:Number,default:void 0},slidesPerView:{type:[Number,String],default:void 0},maxBackfaceHiddenSlides:{type:Number,default:void 0},slidesPerGroup:{type:Number,default:void 0},slidesPerGroupSkip:{type:Number,default:void 0},slidesPerGroupAuto:{type:Boolean,default:void 0},centeredSlides:{type:Boolean,default:void 0},centeredSlidesBounds:{type:Boolean,default:void 0},slidesOffsetBefore:{type:Number,default:void 0},slidesOffsetAfter:{type:Number,default:void 0},normalizeSlideIndex:{type:Boolean,default:void 0},centerInsufficientSlides:{type:Boolean,default:void 0},watchOverflow:{type:Boolean,default:void 0},roundLengths:{type:Boolean,default:void 0},touchRatio:{type:Number,default:void 0},touchAngle:{type:Number,default:void 0},simulateTouch:{type:Boolean,default:void 0},shortSwipes:{type:Boolean,default:void 0},longSwipes:{type:Boolean,default:void 0},longSwipesRatio:{type:Number,default:void 0},longSwipesMs:{type:Number,default:void 0},followFinger:{type:Boolean,default:void 0},allowTouchMove:{type:Boolean,default:void 0},threshold:{type:Number,default:void 0},touchMoveStopPropagation:{type:Boolean,default:void 0},touchStartPreventDefault:{type:Boolean,default:void 0},touchStartForcePreventDefault:{type:Boolean,default:void 0},touchReleaseOnEdges:{type:Boolean,default:void 0},uniqueNavElements:{type:Boolean,default:void 0},resistance:{type:Boolean,default:void 0},resistanceRatio:{type:Number,default:void 0},watchSlidesProgress:{type:Boolean,default:void 0},grabCursor:{type:Boolean,default:void 0},preventClicks:{type:Boolean,default:void 0},preventClicksPropagation:{type:Boolean,default:void 0},slideToClickedSlide:{type:Boolean,default:void 0},preloadImages:{type:Boolean,default:void 0},updateOnImagesReady:{type:Boolean,default:void 0},loop:{type:Boolean,default:void 0},loopAdditionalSlides:{type:Number,default:void 0},loopedSlides:{type:Number,default:void 0},loopedSlidesLimit:{type:Boolean,default:!0},loopFillGroupWithBlank:{type:Boolean,default:void 0},loopPreventsSlide:{type:Boolean,default:void 0},rewind:{type:Boolean,default:void 0},allowSlidePrev:{type:Boolean,default:void 0},allowSlideNext:{type:Boolean,default:void 0},swipeHandler:{type:Boolean,default:void 0},noSwiping:{type:Boolean,default:void 0},noSwipingClass:{type:String,default:void 0},noSwipingSelector:{type:String,default:void 0},passiveListeners:{type:Boolean,default:void 0},containerModifierClass:{type:String,default:void 0},slideClass:{type:String,default:void 0},slideBlankClass:{type:String,default:void 0},slideActiveClass:{type:String,default:void 0},slideDuplicateActiveClass:{type:String,default:void 0},slideVisibleClass:{type:String,default:void 0},slideDuplicateClass:{type:String,default:void 0},slideNextClass:{type:String,default:void 0},slideDuplicateNextClass:{type:String,default:void 0},slidePrevClass:{type:String,default:void 0},slideDuplicatePrevClass:{type:String,default:void 0},wrapperClass:{type:String,default:void 0},runCallbacksOnInit:{type:Boolean,default:void 0},observer:{type:Boolean,default:void 0},observeParents:{type:Boolean,default:void 0},observeSlideChildren:{type:Boolean,default:void 0},a11y:{type:[Boolean,Object],default:void 0},autoplay:{type:[Boolean,Object],default:void 0},controller:{type:Object,default:void 0},coverflowEffect:{type:Object,default:void 0},cubeEffect:{type:Object,default:void 0},fadeEffect:{type:Object,default:void 0},flipEffect:{type:Object,default:void 0},creativeEffect:{type:Object,default:void 0},cardsEffect:{type:Object,default:void 0},hashNavigation:{type:[Boolean,Object],default:void 0},history:{type:[Boolean,Object],default:void 0},keyboard:{type:[Boolean,Object],default:void 0},lazy:{type:[Boolean,Object],default:void 0},mousewheel:{type:[Boolean,Object],default:void 0},navigation:{type:[Boolean,Object],default:void 0},pagination:{type:[Boolean,Object],default:void 0},parallax:{type:[Boolean,Object],default:void 0},scrollbar:{type:[Boolean,Object],default:void 0},thumbs:{type:Object,default:void 0},virtual:{type:[Boolean,Object],default:void 0},zoom:{type:[Boolean,Object],default:void 0},grid:{type:[Object],default:void 0},freeMode:{type:[Boolean,Object],default:void 0},enabled:{type:Boolean,default:void 0}},emits:["_beforeBreakpoint","_containerClasses","_slideClass","_slideClasses","_swiper","_freeModeNoMomentumRelease","activeIndexChange","afterInit","autoplay","autoplayStart","autoplayStop","autoplayPause","autoplayResume","beforeDestroy","beforeInit","beforeLoopFix","beforeResize","beforeSlideChangeStart","beforeTransitionStart","breakpoint","changeDirection","click","disable","doubleTap","doubleClick","destroy","enable","fromEdge","hashChange","hashSet","imagesReady","init","keyPress","lazyImageLoad","lazyImageReady","lock","loopFix","momentumBounce","navigationHide","navigationShow","navigationPrev","navigationNext","observerUpdate","orientationchange","paginationHide","paginationRender","paginationShow","paginationUpdate","progress","reachBeginning","reachEnd","realIndexChange","resize","scroll","scrollbarDragEnd","scrollbarDragMove","scrollbarDragStart","setTransition","setTranslate","slideChange","slideChangeTransitionEnd","slideChangeTransitionStart","slideNextTransitionEnd","slideNextTransitionStart","slidePrevTransitionEnd","slidePrevTransitionStart","slideResetTransitionStart","slideResetTransitionEnd","sliderMove","sliderFirstMove","slidesLengthChange","slidesGridLengthChange","snapGridLengthChange","snapIndexChange","swiper","tap","toEdge","touchEnd","touchMove","touchMoveOpposite","touchStart","transitionEnd","transitionStart","unlock","update","virtualUpdate","zoomChange"],setup(e,t){let{slots:i,emit:s}=t;const{tag:c,wrapperTag:d}=e,g=ref("swiper"),r=ref(null),y=ref(!1),E=ref(!1),w=ref(null),k=ref(null),S=ref(null),I={value:[]},L={value:[]},D=ref(null),O=ref(null),V=ref(null),z=ref(null),{params:U,passedParams:Z}=getParams(e,!1);getChildren(i,I,L),S.value=Z,L.value=I.value;const W=()=>{getChildren(i,I,L),y.value=!0};if(U.onAny=function(re){for(var ie=arguments.length,Ce=new Array(ie>1?ie-1:0),we=1;we<ie;we++)Ce[we-1]=arguments[we];s(re,...Ce)},Object.assign(U.on,{_beforeBreakpoint:W,_containerClasses(re,ie){g.value=ie}}),k.value=new Swiper$1(U),k.value.loopCreate=()=>{},k.value.loopDestroy=()=>{},U.loop&&(k.value.loopedSlides=calcLoopedSlides(I.value,U)),k.value.virtual&&k.value.params.virtual.enabled){k.value.virtual.slides=I.value;const re={cache:!1,slides:I.value,renderExternal:ie=>{r.value=ie},renderExternalUpdate:!1};extend(k.value.params.virtual,re),extend(k.value.originalParams.virtual,re)}onUpdated(()=>{!E.value&&k.value&&(k.value.emitSlidesClasses(),E.value=!0);const{passedParams:re}=getParams(e,!1),ie=getChangedParams(re,S.value,I.value,L.value,Ce=>Ce.props&&Ce.props.key);S.value=re,(ie.length||y.value)&&k.value&&!k.value.destroyed&&updateSwiper({swiper:k.value,slides:I.value,passedParams:re,changedParams:ie,nextEl:D.value,prevEl:O.value,scrollbarEl:z.value,paginationEl:V.value}),y.value=!1}),provide("swiper",k),watch(r,()=>{nextTick$1(()=>{updateOnVirtualData(k.value)})}),onMounted(()=>{!w.value||(mountSwiper({el:w.value,nextEl:D.value,prevEl:O.value,paginationEl:V.value,scrollbarEl:z.value,swiper:k.value},U),s("swiper",k.value))}),onBeforeUnmount(()=>{k.value&&!k.value.destroyed&&k.value.destroy(!0,!1)});function ne(re){return U.virtual?renderVirtual(k,re,r.value):!U.loop||k.value&&k.value.destroyed?(re.forEach(ie=>{ie.props||(ie.props={}),ie.props.swiperRef=k}),re):renderLoop(k,re,U)}return()=>{const{slides:re,slots:ie}=getChildren(i,I,L);return h(c,{ref:w,class:uniqueClasses(g.value)},[ie["container-start"],h(d,{class:"swiper-wrapper"},[ie["wrapper-start"],ne(re),ie["wrapper-end"]]),needsNavigation(e)&&[h("div",{ref:O,class:"swiper-button-prev"}),h("div",{ref:D,class:"swiper-button-next"})],needsScrollbar(e)&&h("div",{ref:z,class:"swiper-scrollbar"}),needsPagination(e)&&h("div",{ref:V,class:"swiper-pagination"}),ie["container-end"]])}}},SwiperSlide={name:"SwiperSlide",props:{tag:{type:String,default:"div"},swiperRef:{type:Object,required:!1},zoom:{type:Boolean,default:void 0},virtualIndex:{type:[String,Number],default:void 0}},setup(e,t){let{slots:i}=t,s=!1;const{swiperRef:c}=e,d=ref(null),g=ref("swiper-slide");function r(E,w,k){w===d.value&&(g.value=k)}onMounted(()=>{!c.value||(c.value.on("_slideClass",r),s=!0)}),onBeforeUpdate(()=>{s||!c||!c.value||(c.value.on("_slideClass",r),s=!0)}),onUpdated(()=>{!d.value||!c||!c.value||c.value.destroyed&&g.value!=="swiper-slide"&&(g.value="swiper-slide")}),onBeforeUnmount(()=>{!c||!c.value||c.value.off("_slideClass",r)});const y=computed(()=>({isActive:g.value.indexOf("swiper-slide-active")>=0||g.value.indexOf("swiper-slide-duplicate-active")>=0,isVisible:g.value.indexOf("swiper-slide-visible")>=0,isDuplicate:g.value.indexOf("swiper-slide-duplicate")>=0,isPrev:g.value.indexOf("swiper-slide-prev")>=0||g.value.indexOf("swiper-slide-duplicate-prev")>=0,isNext:g.value.indexOf("swiper-slide-next")>=0||g.value.indexOf("swiper-slide-duplicate-next")>=0}));return provide("swiperSlide",y),()=>h(e.tag,{class:uniqueClasses(`${g.value}`),ref:d,"data-swiper-slide-index":e.virtualIndex},e.zoom?h("div",{class:"swiper-zoom-container","data-swiper-zoom":typeof e.zoom=="number"?e.zoom:void 0},i.default&&i.default(y.value)):i.default&&i.default(y.value))}};Swiper$1.use([Grid,Pagination,Navigation,Mousewheel,Autoplay,A11y,Lazy,EffectFade]);const _sfc_main$1y=defineComponent({name:"IndexCarrousel",components:{Swiper,SwiperSlide},props:{articles:{type:Array,required:!0},fetching:{type:Boolean,required:!0}},setup(e){const{globalState:t,adConfig:i,isDarkTheme:s}=useEnhancer(),c=computed(()=>{const g=[...e.articles].slice(0,9);if(i.value.PC_CARROUSEL){const{index:r,...y}=i.value.PC_CARROUSEL;g.length&&g.splice(r,0,{ad:!0,...y})}return g});return{LanguageKey,isDarkTheme:s,articleList:c,getArticleDetailRoute,getThumbURL:g=>getArticleBannerThumbnailURL(g,t.imageExt.value.isWebP)}}}),carrousel_vue_vue_type_style_index_0_scoped_d084dfc6_lang="";function _sfc_ssrRender$1y(e,t,i,s,c,d,g,r){const y=resolveComponent("placeholder"),E=resolveComponent("empty"),w=resolveComponent("i18n"),k=resolveComponent("skeleton-line"),S=resolveComponent("swiper"),I=resolveComponent("swiper-slide"),L=resolveComponent("ulink"),D=resolveComponent("router-link");t(`<div${ssrRenderAttrs(mergeProps({class:["carrousel",{dark:e.isDarkTheme}]},s))} data-v-d084dfc6>`),t(ssrRenderComponent(y,{data:e.articleList.length,loading:e.fetching},{placeholder:withCtx((O,V,z,U)=>{if(V)V(ssrRenderComponent(E,{class:"article-empty",key:"empty"},{default:withCtx((Z,W,ne,re)=>{if(W)W(ssrRenderComponent(w,{k:e.LanguageKey.ARTICLE_PLACEHOLDER},null,ne,re));else return[createVNode(w,{k:e.LanguageKey.ARTICLE_PLACEHOLDER},null,8,["k"])]}),_:1},z,U));else return[createVNode(E,{class:"article-empty",key:"empty"},{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.ARTICLE_PLACEHOLDER},null,8,["k"])]),_:1})]}),loading:withCtx((O,V,z,U)=>{if(V)V(`<div class="article-skeleton" data-v-d084dfc6${U}><div class="title" data-v-d084dfc6${U}>`),V(ssrRenderComponent(k,null,null,z,U)),V(`</div><div class="content" data-v-d084dfc6${U}><div class="first" data-v-d084dfc6${U}>`),V(ssrRenderComponent(k,null,null,z,U)),V("</div><!--[-->"),ssrRenderList(3,(Z,W)=>{V(`<div class="line" data-v-d084dfc6${U}>`),V(ssrRenderComponent(k,{class:"line-item"},null,z,U)),V("</div>")}),V("<!--]--></div></div>");else return[createVNode("div",{class:"article-skeleton",key:"skeleton"},[createVNode("div",{class:"title"},[createVNode(k)]),createVNode("div",{class:"content"},[createVNode("div",{class:"first"},[createVNode(k)]),(openBlock(),createBlock(Fragment,null,renderList(3,(Z,W)=>createVNode("div",{class:"line",key:W},[createVNode(k,{class:"line-item"})])),64))])])]}),default:withCtx((O,V,z,U)=>{if(V)V(ssrRenderComponent(S,{class:"swiper","set-wrapper-size":!0,mousewheel:!0,"observe-parents":!0,"grab-cursor":!1,"simulate-touch":!1,"preload-images":!1,lazy:!1,pagination:{clickable:!0},autoplay:{delay:3500,disableOnInteraction:!1}},{default:withCtx((Z,W,ne,re)=>{if(W)W("<!--[-->"),ssrRenderList(e.articleList.slice(0,9),(ie,Ce)=>{W(ssrRenderComponent(I,{key:Ce},{default:withCtx((we,fe,de,Le)=>{if(fe)fe(`<div class="content" data-v-d084dfc6${Le}>`),ie.ad?fe(ssrRenderComponent(L,{class:"link",href:ie.url},{default:withCtx((Ge,wt,Te,ze)=>{if(wt)wt(`<img${ssrRenderAttr("src",ie.src)}${ssrRenderAttr("alt",ie.title)} data-v-d084dfc6${ze}><div class="title" data-v-d084dfc6${ze}><div class="background" data-v-d084dfc6${ze}></div><div class="prospect" data-v-d084dfc6${ze}><span class="text" style="${ssrRenderStyle({backgroundImage:`url('${e.getThumbURL(ie.src)}')`})}" data-v-d084dfc6${ze}>${ssrInterpolate(ie.title)}</span></div></div><span class="ad-symbol" data-v-d084dfc6${ze}>`),wt(ssrRenderComponent(w,{k:e.LanguageKey.AD},null,Te,ze)),wt("</span>");else return[createVNode("img",{src:ie.src,alt:ie.title},null,8,["src","alt"]),createVNode("div",{class:"title"},[createVNode("div",{class:"background"}),createVNode("div",{class:"prospect"},[createVNode("span",{class:"text",style:{backgroundImage:`url('${e.getThumbURL(ie.src)}')`}},toDisplayString(ie.title),5)])]),createVNode("span",{class:"ad-symbol"},[createVNode(w,{k:e.LanguageKey.AD},null,8,["k"])])]}),_:2},de,Le)):fe(ssrRenderComponent(D,{to:e.getArticleDetailRoute(ie.id),class:"link"},{default:withCtx((Ge,wt,Te,ze)=>{if(wt)wt(`<img${ssrRenderAttr("src",e.getThumbURL(ie.thumb))}${ssrRenderAttr("alt",ie.title)} draggable="false" data-v-d084dfc6${ze}><div class="title" data-v-d084dfc6${ze}><div class="background" data-v-d084dfc6${ze}></div><div class="prospect" data-v-d084dfc6${ze}><span class="text" style="${ssrRenderStyle({backgroundImage:`url('${e.getThumbURL(ie.thumb)}')`})}" data-v-d084dfc6${ze}>${ssrInterpolate(ie.title)}</span></div></div>`);else return[createVNode("img",{src:e.getThumbURL(ie.thumb),alt:ie.title,draggable:"false"},null,8,["src","alt"]),createVNode("div",{class:"title"},[createVNode("div",{class:"background"}),createVNode("div",{class:"prospect"},[createVNode("span",{class:"text",style:{backgroundImage:`url('${e.getThumbURL(ie.thumb)}')`}},toDisplayString(ie.title),5)])])]}),_:2},de,Le)),fe("</div>");else return[createVNode("div",{class:"content"},[ie.ad?(openBlock(),createBlock(L,{key:0,class:"link",href:ie.url},{default:withCtx(()=>[createVNode("img",{src:ie.src,alt:ie.title},null,8,["src","alt"]),createVNode("div",{class:"title"},[createVNode("div",{class:"background"}),createVNode("div",{class:"prospect"},[createVNode("span",{class:"text",style:{backgroundImage:`url('${e.getThumbURL(ie.src)}')`}},toDisplayString(ie.title),5)])]),createVNode("span",{class:"ad-symbol"},[createVNode(w,{k:e.LanguageKey.AD},null,8,["k"])])]),_:2},1032,["href"])):(openBlock(),createBlock(D,{key:1,to:e.getArticleDetailRoute(ie.id),class:"link"},{default:withCtx(()=>[createVNode("img",{src:e.getThumbURL(ie.thumb),alt:ie.title,draggable:"false"},null,8,["src","alt"]),createVNode("div",{class:"title"},[createVNode("div",{class:"background"}),createVNode("div",{class:"prospect"},[createVNode("span",{class:"text",style:{backgroundImage:`url('${e.getThumbURL(ie.thumb)}')`}},toDisplayString(ie.title),5)])])]),_:2},1032,["to"]))])]}),_:2},ne,re))}),W("<!--]-->");else return[(openBlock(!0),createBlock(Fragment,null,renderList(e.articleList.slice(0,9),(ie,Ce)=>(openBlock(),createBlock(I,{key:Ce},{default:withCtx(()=>[createVNode("div",{class:"content"},[ie.ad?(openBlock(),createBlock(L,{key:0,class:"link",href:ie.url},{default:withCtx(()=>[createVNode("img",{src:ie.src,alt:ie.title},null,8,["src","alt"]),createVNode("div",{class:"title"},[createVNode("div",{class:"background"}),createVNode("div",{class:"prospect"},[createVNode("span",{class:"text",style:{backgroundImage:`url('${e.getThumbURL(ie.src)}')`}},toDisplayString(ie.title),5)])]),createVNode("span",{class:"ad-symbol"},[createVNode(w,{k:e.LanguageKey.AD},null,8,["k"])])]),_:2},1032,["href"])):(openBlock(),createBlock(D,{key:1,to:e.getArticleDetailRoute(ie.id),class:"link"},{default:withCtx(()=>[createVNode("img",{src:e.getThumbURL(ie.thumb),alt:ie.title,draggable:"false"},null,8,["src","alt"]),createVNode("div",{class:"title"},[createVNode("div",{class:"background"}),createVNode("div",{class:"prospect"},[createVNode("span",{class:"text",style:{backgroundImage:`url('${e.getThumbURL(ie.thumb)}')`}},toDisplayString(ie.title),5)])])]),_:2},1032,["to"]))])]),_:2},1024))),128))]}),_:1},z,U));else return[createVNode(S,{class:"swiper","set-wrapper-size":!0,mousewheel:!0,"observe-parents":!0,"grab-cursor":!1,"simulate-touch":!1,"preload-images":!1,lazy:!1,pagination:{clickable:!0},autoplay:{delay:3500,disableOnInteraction:!1}},{default:withCtx(()=>[(openBlock(!0),createBlock(Fragment,null,renderList(e.articleList.slice(0,9),(Z,W)=>(openBlock(),createBlock(I,{key:W},{default:withCtx(()=>[createVNode("div",{class:"content"},[Z.ad?(openBlock(),createBlock(L,{key:0,class:"link",href:Z.url},{default:withCtx(()=>[createVNode("img",{src:Z.src,alt:Z.title},null,8,["src","alt"]),createVNode("div",{class:"title"},[createVNode("div",{class:"background"}),createVNode("div",{class:"prospect"},[createVNode("span",{class:"text",style:{backgroundImage:`url('${e.getThumbURL(Z.src)}')`}},toDisplayString(Z.title),5)])]),createVNode("span",{class:"ad-symbol"},[createVNode(w,{k:e.LanguageKey.AD},null,8,["k"])])]),_:2},1032,["href"])):(openBlock(),createBlock(D,{key:1,to:e.getArticleDetailRoute(Z.id),class:"link"},{default:withCtx(()=>[createVNode("img",{src:e.getThumbURL(Z.thumb),alt:Z.title,draggable:"false"},null,8,["src","alt"]),createVNode("div",{class:"title"},[createVNode("div",{class:"background"}),createVNode("div",{class:"prospect"},[createVNode("span",{class:"text",style:{backgroundImage:`url('${e.getThumbURL(Z.thumb)}')`}},toDisplayString(Z.title),5)])])]),_:2},1032,["to"]))])]),_:2},1024))),128))]),_:1})]}),_:1},i)),t("</div>")}const _sfc_setup$1y=_sfc_main$1y.setup;_sfc_main$1y.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/index/carrousel.vue"),_sfc_setup$1y?_sfc_setup$1y(e,t):void 0};const Carrousel=_export_sfc(_sfc_main$1y,[["ssrRender",_sfc_ssrRender$1y],["__scopeId","data-v-d084dfc6"]]);var GAEventCategories=(e=>(e.Comment="comment",e.Share="share",e.Widget="widget",e.Universal="global",e.Article="page_article",e.Index="page_index",e.App="page_app",e.About="page_about",e.Lens="page_lens",e))(GAEventCategories||{});const isVideoMediaIns=e=>e.media_type==="VIDEO",getInstagramImage=(e,t)=>isVideoMediaIns(e)?getTargetProxyURL(e.thumbnail_url,ProxyModule.Instagram):getTargetProxyURL(t?`${e.permalink}media/?size=${t}`:e.media_url,ProxyModule.Instagram),getYouTubePlaylistURL=e=>`https://www.youtube.com/playlist?list=${e}`,getYouTubeVideoEmbedURL=(e,t)=>{const i=t?`?list=${t}`:"";return`https://www.youtube.com/embed/${e}${i}`},getTwitterTweetDetailURL=(e,t)=>`https://twitter.com/${e}/status/${t}`,get163MusicSongDetailURL=e=>`https://music.163.com/#/song?id=${e}`,_sfc_main$1x=defineComponent({name:"IndexTwitter",components:{Swiper,SwiperSlide},props:{userinfo:{type:Object,default:null},tweets:{type:Object,default:null},fetching:{type:Boolean,required:!0}},setup(e){const{gtag:t}=useEnhancer(),i=ref(),s=()=>{var S;return(S=i.value)==null?void 0:S.slidePrev()},c=()=>{var S;return(S=i.value)==null?void 0:S.slideNext()},d=S=>{i.value=S},g=ref(0),r=()=>{var S;g.value=((S=i.value)==null?void 0:S.activeIndex)||0},y=S=>{t==null||t.event(S,{event_category:GAEventCategories.Index})},E=S=>{var I;if((I=S.geo)!=null&&I.place_id){const D=(e.tweets.includes.places||[]).find(O=>{var V;return O.id===((V=S.geo)==null?void 0:V.place_id)});if(D)return`${D.country_code} \xB7 ${D.name}`}return null},w=S=>{var L;const I=((L=S.attachments)==null?void 0:L.media_keys)||[];if(I.length){const D=e.tweets.includes.media||[];return I.map(O=>D.find(V=>V.media_key===O)).filter(Boolean)}return[]},k=computed(()=>{const S=e.tweets;return S!=null&&S.data?S.data.map(I=>{var D,O;const L={tweet:I,url:getTwitterTweetDetailURL(IDENTITIES.TWITTER_USER_NAME,I.id),location:E(I),medias:w(I),html:unescape$2(I.text)};return(O=(D=I.entities)==null?void 0:D.urls)==null||O.forEach(V=>{var z,U;((z=V.display_url)==null?void 0:z.startsWith("pic.twitter.com/"))||((U=V.display_url)==null?void 0:U.startsWith("twitter.com/"))?L.html=L.html.replace(V.url,""):L.html=L.html.replace(V.url,`<a
                    class="link"
                    target="_blank"
                    rel="external nofollow noopener"
                    title="${V.expanded_url}"
                    href="${V.url}"
                  >
                    <span class="text">[${V.display_url}]</span>
                  </a>
                `)}),L}):[]});return{VALUABLE_LINKS,LanguageKey,completedTweets:k,activeIndex:g,numberSplit,padStart,prevSlide:s,nextSlide:c,handleSwiperReady:d,handleSwiperTransitionStart:r,handleGtagEvent:y}}}),twitter_vue_vue_type_style_index_0_scoped_c8c1ccd2_lang="";function _sfc_ssrRender$1x(e,t,i,s,c,d,g,r){const y=resolveComponent("placeholder"),E=resolveComponent("empty"),w=resolveComponent("i18n"),k=resolveComponent("skeleton-line"),S=resolveComponent("ulink"),I=resolveComponent("uimage"),L=resolveComponent("swiper"),D=resolveComponent("swiper-slide"),O=resolveComponent("udate");t(`<div${ssrRenderAttrs(mergeProps({class:"twitter"},s))} data-v-c8c1ccd2>`),t(ssrRenderComponent(y,{data:e.completedTweets.length,loading:e.fetching},{placeholder:withCtx((V,z,U,Z)=>{if(z)z(`<div class="twitter-empty" data-v-c8c1ccd2${Z}>`),z(ssrRenderComponent(E,{class:"empty-content"},{default:withCtx((W,ne,re,ie)=>{if(ne)ne(ssrRenderComponent(w,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,re,ie));else return[createVNode(w,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,8,["k"])]}),_:1},U,Z)),z("</div>");else return[createVNode("div",{class:"twitter-empty",key:"empty"},[createVNode(E,{class:"empty-content"},{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,8,["k"])]),_:1})])]}),loading:withCtx((V,z,U,Z)=>{if(z)z(`<div class="twitter-skeleton" data-v-c8c1ccd2${Z}><div class="left" data-v-c8c1ccd2${Z}>`),z(ssrRenderComponent(k,null,null,U,Z)),z(`</div><div class="right" data-v-c8c1ccd2${Z}>`),z(ssrRenderComponent(k,null,null,U,Z)),z("</div></div>");else return[createVNode("div",{class:"twitter-skeleton",key:"skeleton"},[createVNode("div",{class:"left"},[createVNode(k)]),createVNode("div",{class:"right"},[createVNode(k)])])]}),default:withCtx((V,z,U,Z)=>{if(z)z(`<div class="twitter-content" data-v-c8c1ccd2${Z}>`),e.userinfo?(z(`<div class="userinfo"${ssrRenderAttr("title",e.userinfo.username)} data-v-c8c1ccd2${Z}>`),z(ssrRenderComponent(S,{class:"logo-link",href:e.VALUABLE_LINKS.TWITTER,onMousedown:W=>e.handleGtagEvent("twitter_homepage")},{default:withCtx((W,ne,re,ie)=>{if(ne)ne(ssrRenderComponent(I,{class:"avatar",proxy:"",src:e.userinfo.profile_image_url},null,re,ie)),ne(`<span class="logo" data-v-c8c1ccd2${ie}><i class="iconfont icon-twitter" data-v-c8c1ccd2${ie}></i></span>`);else return[createVNode(I,{class:"avatar",proxy:"",src:e.userinfo.profile_image_url},null,8,["src"]),createVNode("span",{class:"logo"},[createVNode("i",{class:"iconfont icon-twitter"})])]}),_:1},U,Z)),z(`<div class="counts" data-v-c8c1ccd2${Z}><div class="item count" data-v-c8c1ccd2${Z}>${ssrInterpolate(e.padStart(e.numberSplit(e.userinfo.public_metrics.tweet_count),3,"0"))}</div><div class="item text" data-v-c8c1ccd2${Z}>Tweets</div></div></div>`)):z("<!---->"),e.completedTweets.length?z(ssrRenderComponent(L,{class:"tweets",direction:"vertical",height:66,mousewheel:!0,"allow-touch-move":!1,"slides-per-view":1,"prevent-clicks":!1,autoplay:{delay:3500,disableOnInteraction:!1},onTransitionStart:e.handleSwiperTransitionStart,onSwiper:e.handleSwiperReady},{default:withCtx((W,ne,re,ie)=>{if(ne)ne("<!--[-->"),ssrRenderList(e.completedTweets,(Ce,we)=>{ne(ssrRenderComponent(D,{class:"tweet-item",key:we},{default:withCtx((fe,de,Le,Ge)=>{var wt,Te;if(de)de(`<div class="content"${ssrRenderAttr("title",Ce.tweet.text)} data-v-c8c1ccd2${Ge}>`),(wt=Ce.tweet.referenced_tweets)!=null&&wt.length?(de(`<div class="reference"${ssrRenderAttr("title",Ce.tweet.referenced_tweets[0].type)} data-v-c8c1ccd2${Ge}>`),["quoted","retweeted"].includes(Ce.tweet.referenced_tweets[0].type)?de(`<i class="iconfont icon-retweet" data-v-c8c1ccd2${Ge}></i>`):de(`<i class="iconfont icon-follow-up" data-v-c8c1ccd2${Ge}></i>`),de("</div>")):de("<!---->"),Ce.html?de(`<div class="${ssrRenderClass([{"has-media":Ce.medias.length},"main"])}" data-v-c8c1ccd2${Ge}>${Ce.html}</div>`):de("<!---->"),Ce.medias.length?de(ssrRenderComponent(S,{class:["end-link",{empty:!Ce.html}],href:Ce.url,onMousedown:ze=>e.handleGtagEvent("twitter_image_link")},{default:withCtx((ze,Ke,ut,Nt)=>{if(Ke)Ce.medias.find(an=>an.type==="video")?Ke(`<i class="iconfont media icon-video" data-v-c8c1ccd2${Nt}></i>`):Ke(`<i class="iconfont media icon-image" data-v-c8c1ccd2${Nt}></i>`),Ke(`<span class="text" data-v-c8c1ccd2${Nt}>[${ssrInterpolate(Ce.medias.length)}]</span><i class="iconfont window icon-new-window-s" data-v-c8c1ccd2${Nt}></i>`);else return[Ce.medias.find(an=>an.type==="video")?(openBlock(),createBlock("i",{key:0,class:"iconfont media icon-video"})):(openBlock(),createBlock("i",{key:1,class:"iconfont media icon-image"})),createVNode("span",{class:"text"},"["+toDisplayString(Ce.medias.length)+"]",1),createVNode("i",{class:"iconfont window icon-new-window-s"})]}),_:2},Le,Ge)):de("<!---->"),de(`</div><div class="meta" data-v-c8c1ccd2${Ge}>`),de(ssrRenderComponent(S,{class:"item link",title:"To Tweet",href:Ce.url,onMousedown:ze=>e.handleGtagEvent("twitter_detail_link")},{default:withCtx((ze,Ke,ut,Nt)=>{if(Ke)Ke(`<i class="iconfont twitter icon-twitter" data-v-c8c1ccd2${Nt}></i><span data-v-c8c1ccd2${Nt}>Tweet</span><i class="iconfont window icon-new-window-s" data-v-c8c1ccd2${Nt}></i>`);else return[createVNode("i",{class:"iconfont twitter icon-twitter"}),createVNode("span",null,"Tweet"),createVNode("i",{class:"iconfont window icon-new-window-s"})]}),_:2},Le,Ge)),de(`<span class="item reply" data-v-c8c1ccd2${Ge}><i class="iconfont icon-comment" data-v-c8c1ccd2${Ge}></i><span data-v-c8c1ccd2${Ge}>${ssrInterpolate(Ce.tweet.public_metrics.reply_count)}</span></span><span class="item like" data-v-c8c1ccd2${Ge}><i class="iconfont icon-heart" data-v-c8c1ccd2${Ge}></i><span data-v-c8c1ccd2${Ge}>${ssrInterpolate(Ce.tweet.public_metrics.like_count)}</span></span><span class="item date" data-v-c8c1ccd2${Ge}><i class="iconfont icon-clock" data-v-c8c1ccd2${Ge}></i>`),de(ssrRenderComponent(O,{to:"ago",date:Ce.tweet.created_at},null,Le,Ge)),de("</span></div>");else return[createVNode("div",{class:"content",title:Ce.tweet.text},[(Te=Ce.tweet.referenced_tweets)!=null&&Te.length?(openBlock(),createBlock("div",{key:0,class:"reference",title:Ce.tweet.referenced_tweets[0].type},[["quoted","retweeted"].includes(Ce.tweet.referenced_tweets[0].type)?(openBlock(),createBlock("i",{key:0,class:"iconfont icon-retweet"})):(openBlock(),createBlock("i",{key:1,class:"iconfont icon-follow-up"}))],8,["title"])):createCommentVNode("",!0),Ce.html?(openBlock(),createBlock("div",{key:1,class:["main",{"has-media":Ce.medias.length}],innerHTML:Ce.html},null,10,["innerHTML"])):createCommentVNode("",!0),Ce.medias.length?(openBlock(),createBlock(S,{key:2,class:["end-link",{empty:!Ce.html}],href:Ce.url,onMousedown:ze=>e.handleGtagEvent("twitter_image_link")},{default:withCtx(()=>[Ce.medias.find(ze=>ze.type==="video")?(openBlock(),createBlock("i",{key:0,class:"iconfont media icon-video"})):(openBlock(),createBlock("i",{key:1,class:"iconfont media icon-image"})),createVNode("span",{class:"text"},"["+toDisplayString(Ce.medias.length)+"]",1),createVNode("i",{class:"iconfont window icon-new-window-s"})]),_:2},1032,["class","href","onMousedown"])):createCommentVNode("",!0)],8,["title"]),createVNode("div",{class:"meta"},[createVNode(S,{class:"item link",title:"To Tweet",href:Ce.url,onMousedown:ze=>e.handleGtagEvent("twitter_detail_link")},{default:withCtx(()=>[createVNode("i",{class:"iconfont twitter icon-twitter"}),createVNode("span",null,"Tweet"),createVNode("i",{class:"iconfont window icon-new-window-s"})]),_:2},1032,["href","onMousedown"]),createVNode("span",{class:"item reply"},[createVNode("i",{class:"iconfont icon-comment"}),createVNode("span",null,toDisplayString(Ce.tweet.public_metrics.reply_count),1)]),createVNode("span",{class:"item like"},[createVNode("i",{class:"iconfont icon-heart"}),createVNode("span",null,toDisplayString(Ce.tweet.public_metrics.like_count),1)]),createVNode("span",{class:"item date"},[createVNode("i",{class:"iconfont icon-clock"}),createVNode(O,{to:"ago",date:Ce.tweet.created_at},null,8,["date"])])])]}),_:2},re,ie))}),ne("<!--]-->");else return[(openBlock(!0),createBlock(Fragment,null,renderList(e.completedTweets,(Ce,we)=>(openBlock(),createBlock(D,{class:"tweet-item",key:we},{default:withCtx(()=>{var fe;return[createVNode("div",{class:"content",title:Ce.tweet.text},[(fe=Ce.tweet.referenced_tweets)!=null&&fe.length?(openBlock(),createBlock("div",{key:0,class:"reference",title:Ce.tweet.referenced_tweets[0].type},[["quoted","retweeted"].includes(Ce.tweet.referenced_tweets[0].type)?(openBlock(),createBlock("i",{key:0,class:"iconfont icon-retweet"})):(openBlock(),createBlock("i",{key:1,class:"iconfont icon-follow-up"}))],8,["title"])):createCommentVNode("",!0),Ce.html?(openBlock(),createBlock("div",{key:1,class:["main",{"has-media":Ce.medias.length}],innerHTML:Ce.html},null,10,["innerHTML"])):createCommentVNode("",!0),Ce.medias.length?(openBlock(),createBlock(S,{key:2,class:["end-link",{empty:!Ce.html}],href:Ce.url,onMousedown:de=>e.handleGtagEvent("twitter_image_link")},{default:withCtx(()=>[Ce.medias.find(de=>de.type==="video")?(openBlock(),createBlock("i",{key:0,class:"iconfont media icon-video"})):(openBlock(),createBlock("i",{key:1,class:"iconfont media icon-image"})),createVNode("span",{class:"text"},"["+toDisplayString(Ce.medias.length)+"]",1),createVNode("i",{class:"iconfont window icon-new-window-s"})]),_:2},1032,["class","href","onMousedown"])):createCommentVNode("",!0)],8,["title"]),createVNode("div",{class:"meta"},[createVNode(S,{class:"item link",title:"To Tweet",href:Ce.url,onMousedown:de=>e.handleGtagEvent("twitter_detail_link")},{default:withCtx(()=>[createVNode("i",{class:"iconfont twitter icon-twitter"}),createVNode("span",null,"Tweet"),createVNode("i",{class:"iconfont window icon-new-window-s"})]),_:2},1032,["href","onMousedown"]),createVNode("span",{class:"item reply"},[createVNode("i",{class:"iconfont icon-comment"}),createVNode("span",null,toDisplayString(Ce.tweet.public_metrics.reply_count),1)]),createVNode("span",{class:"item like"},[createVNode("i",{class:"iconfont icon-heart"}),createVNode("span",null,toDisplayString(Ce.tweet.public_metrics.like_count),1)]),createVNode("span",{class:"item date"},[createVNode("i",{class:"iconfont icon-clock"}),createVNode(O,{to:"ago",date:Ce.tweet.created_at},null,8,["date"])])])]}),_:2},1024))),128))]}),_:1},U,Z)):z("<!---->"),z(`<div class="navigation" data-v-c8c1ccd2${Z}><button class="button prev"${includeBooleanAttr(e.activeIndex===0)?" disabled":""} data-v-c8c1ccd2${Z}><i class="iconfont icon-totop" data-v-c8c1ccd2${Z}></i></button><button class="button next"${includeBooleanAttr(e.activeIndex===e.completedTweets.length-1)?" disabled":""} data-v-c8c1ccd2${Z}><i class="iconfont icon-tobottom" data-v-c8c1ccd2${Z}></i></button></div></div>`);else return[createVNode("div",{class:"twitter-content",key:"content"},[e.userinfo?(openBlock(),createBlock("div",{key:0,class:"userinfo",title:e.userinfo.username},[createVNode(S,{class:"logo-link",href:e.VALUABLE_LINKS.TWITTER,onMousedown:W=>e.handleGtagEvent("twitter_homepage")},{default:withCtx(()=>[createVNode(I,{class:"avatar",proxy:"",src:e.userinfo.profile_image_url},null,8,["src"]),createVNode("span",{class:"logo"},[createVNode("i",{class:"iconfont icon-twitter"})])]),_:1},8,["href","onMousedown"]),createVNode("div",{class:"counts"},[createVNode("div",{class:"item count"},toDisplayString(e.padStart(e.numberSplit(e.userinfo.public_metrics.tweet_count),3,"0")),1),createVNode("div",{class:"item text"},"Tweets")])],8,["title"])):createCommentVNode("",!0),e.completedTweets.length?(openBlock(),createBlock(L,{key:1,class:"tweets",direction:"vertical",height:66,mousewheel:!0,"allow-touch-move":!1,"slides-per-view":1,"prevent-clicks":!1,autoplay:{delay:3500,disableOnInteraction:!1},onTransitionStart:e.handleSwiperTransitionStart,onSwiper:e.handleSwiperReady},{default:withCtx(()=>[(openBlock(!0),createBlock(Fragment,null,renderList(e.completedTweets,(W,ne)=>(openBlock(),createBlock(D,{class:"tweet-item",key:ne},{default:withCtx(()=>{var re;return[createVNode("div",{class:"content",title:W.tweet.text},[(re=W.tweet.referenced_tweets)!=null&&re.length?(openBlock(),createBlock("div",{key:0,class:"reference",title:W.tweet.referenced_tweets[0].type},[["quoted","retweeted"].includes(W.tweet.referenced_tweets[0].type)?(openBlock(),createBlock("i",{key:0,class:"iconfont icon-retweet"})):(openBlock(),createBlock("i",{key:1,class:"iconfont icon-follow-up"}))],8,["title"])):createCommentVNode("",!0),W.html?(openBlock(),createBlock("div",{key:1,class:["main",{"has-media":W.medias.length}],innerHTML:W.html},null,10,["innerHTML"])):createCommentVNode("",!0),W.medias.length?(openBlock(),createBlock(S,{key:2,class:["end-link",{empty:!W.html}],href:W.url,onMousedown:ie=>e.handleGtagEvent("twitter_image_link")},{default:withCtx(()=>[W.medias.find(ie=>ie.type==="video")?(openBlock(),createBlock("i",{key:0,class:"iconfont media icon-video"})):(openBlock(),createBlock("i",{key:1,class:"iconfont media icon-image"})),createVNode("span",{class:"text"},"["+toDisplayString(W.medias.length)+"]",1),createVNode("i",{class:"iconfont window icon-new-window-s"})]),_:2},1032,["class","href","onMousedown"])):createCommentVNode("",!0)],8,["title"]),createVNode("div",{class:"meta"},[createVNode(S,{class:"item link",title:"To Tweet",href:W.url,onMousedown:ie=>e.handleGtagEvent("twitter_detail_link")},{default:withCtx(()=>[createVNode("i",{class:"iconfont twitter icon-twitter"}),createVNode("span",null,"Tweet"),createVNode("i",{class:"iconfont window icon-new-window-s"})]),_:2},1032,["href","onMousedown"]),createVNode("span",{class:"item reply"},[createVNode("i",{class:"iconfont icon-comment"}),createVNode("span",null,toDisplayString(W.tweet.public_metrics.reply_count),1)]),createVNode("span",{class:"item like"},[createVNode("i",{class:"iconfont icon-heart"}),createVNode("span",null,toDisplayString(W.tweet.public_metrics.like_count),1)]),createVNode("span",{class:"item date"},[createVNode("i",{class:"iconfont icon-clock"}),createVNode(O,{to:"ago",date:W.tweet.created_at},null,8,["date"])])])]}),_:2},1024))),128))]),_:1},8,["onTransitionStart","onSwiper"])):createCommentVNode("",!0),createVNode("div",{class:"navigation"},[createVNode("button",{class:"button prev",disabled:e.activeIndex===0,onClick:e.prevSlide},[createVNode("i",{class:"iconfont icon-totop"})],8,["disabled","onClick"]),createVNode("button",{class:"button next",disabled:e.activeIndex===e.completedTweets.length-1,onClick:e.nextSlide},[createVNode("i",{class:"iconfont icon-tobottom"})],8,["disabled","onClick"])])])]}),_:1},i)),t("</div>")}const _sfc_setup$1x=_sfc_main$1x.setup;_sfc_main$1x.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/index/twitter.vue"),_sfc_setup$1x?_sfc_setup$1x(e,t):void 0};const Twitter=_export_sfc(_sfc_main$1x,[["ssrRender",_sfc_ssrRender$1x],["__scopeId","data-v-c8c1ccd2"]]),_sfc_main$1w=defineComponent({name:"IndexPage",components:{Carrousel,Twitter,ArticleList},setup(){const{meta:e,i18n:t}=useEnhancer(),{articleList:i,appOption:s,twitterUserinfo:c,twitterTweets:d}=useStores();e(()=>{var r,y;return{title:`${META.title} - ${t.t(LanguageKey.APP_SLOGAN)}`,description:(r=s.data)==null?void 0:r.description,keywords:(y=s.data)==null?void 0:y.keywords.join(",")}});const g=async()=>{var y;const r=((y=i.list.pagination)==null?void 0:y.current_page)+1;await i.fetchList({page:r})};return useUniversalFetch(()=>Promise.all([i.fetchList(),c.fetch().catch(()=>{}),d.fetch().catch(()=>{})])),{twitterUserinfo:c,twitterTweets:d,articleListStore:i,loadmoreArticles:g}}}),index_vue_vue_type_style_index_0_scoped_0101d081_lang="";function _sfc_ssrRender$1w(e,t,i,s,c,d,g,r){var k,S;const y=resolveComponent("carrousel"),E=resolveComponent("twitter"),w=resolveComponent("article-list");t(`<div${ssrRenderAttrs(mergeProps({class:"index-page"},s))} data-v-0101d081>`),t(ssrRenderComponent(y,{class:"carrousel",articles:e.articleListStore.list.data,fetching:e.articleListStore.list.fetching},null,i)),t(ssrRenderComponent(E,{class:"twitter",userinfo:(k=e.twitterUserinfo.data)!=null?k:void 0,tweets:(S=e.twitterTweets.data)!=null?S:void 0,fetching:e.twitterUserinfo.fetching||e.twitterTweets.fetching||e.articleListStore.list.fetching},null,i)),t(ssrRenderComponent(w,{mammon:!1,fetching:e.articleListStore.list.fetching,articles:e.articleListStore.list.data,pagination:e.articleListStore.list.pagination,onLoadmore:e.loadmoreArticles},null,i)),t("</div>")}const _sfc_setup$1w=_sfc_main$1w.setup;_sfc_main$1w.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/index/index.vue"),_sfc_setup$1w?_sfc_setup$1w(e,t):void 0};const IndexFlowPage=_export_sfc(_sfc_main$1w,[["ssrRender",_sfc_ssrRender$1w],["__scopeId","data-v-0101d081"]]),_sfc_main$1v=defineComponent({name:"FlowArticleListHeader",props:{backgroundColor:{type:String,default:""},backgroundImage:{type:String,default:""},icon:{type:String,required:!0}},setup(e){const t=computed(()=>e.backgroundImage||getTargetCDNURL("/images/thumbnail/carrousel.jpg"));return{LanguageKey,backgroundImageUrl:t}}}),header_vue_vue_type_style_index_0_scoped_2cee1445_lang="";function _sfc_ssrRender$1v(e,t,i,s,c,d,g,r){t(`<div${ssrRenderAttrs(mergeProps({class:"header"},s))} data-v-2cee1445><div class="background" style="${ssrRenderStyle({backgroundColor:e.backgroundColor,backgroundImage:`url(${e.backgroundImageUrl})`})}" data-v-2cee1445></div><div class="content" data-v-2cee1445><div class="logo" data-v-2cee1445><i class="${ssrRenderClass([e.icon,"iconfont"])}" data-v-2cee1445></i></div><div class="title" data-v-2cee1445><div class="text" data-v-2cee1445>`),ssrRenderSlot(e.$slots,"default",{},null,t,i),t("</div></div></div></div>")}const _sfc_setup$1v=_sfc_main$1v.setup;_sfc_main$1v.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/flow/desktop/header.vue"),_sfc_setup$1v?_sfc_setup$1v(e,t):void 0};const ArticleListHeader=_export_sfc(_sfc_main$1v,[["ssrRender",_sfc_ssrRender$1v],["__scopeId","data-v-2cee1445"]]),_sfc_main$1u=defineComponent({name:"CategoryPage",components:{ArticleListHeader,ArticleList},props:{categorySlug:{type:String,required:!0}},setup(e){const{i18n:t,meta:i,isZhLang:s}=useEnhancer(),c=useArticleListStore(),d=useCategoryStore(),g=computed(()=>d.data.find(k=>k.slug===e.categorySlug)),r=computed(()=>{var k;return getExtendValue(((k=g.value)==null?void 0:k.extends)||[],"icon")||"icon-category"}),y=computed(()=>{var k;return getExtendValue(((k=g.value)==null?void 0:k.extends)||[],"background")}),E=computed(()=>{var k;return getExtendValue(((k=g.value)==null?void 0:k.extends)||[],"bgcolor")}),w=async()=>{await c.fetchList({category_slug:e.categorySlug,page:c.list.pagination.current_page+1}),scrollToNextScreen()};return i(()=>{var D;const k=firstUpperCase(e.categorySlug),S=t.t(e.categorySlug),I=s.value?[S,k]:[k,"Category"],L=((D=g.value)==null?void 0:D.description)||I.join(",");return{pageTitle:I.join(" | "),description:L}}),onBeforeMount(()=>{watch(()=>e.categorySlug,k=>c.fetchList({category_slug:k}),{flush:"post"})}),useUniversalFetch(()=>c.fetchList({category_slug:e.categorySlug})),{articleListStore:c,currentCategory:g,currentCategoryIcon:r,currentCategoryImage:y,currentCategoryColor:E,loadmoreArticles:w,firstUpperCase}}}),category_vue_vue_type_style_index_0_scoped_48fd7957_lang="";function _sfc_ssrRender$1u(e,t,i,s,c,d,g,r){const y=resolveComponent("article-list-header"),E=resolveComponent("i18n"),w=resolveComponent("divider"),k=resolveComponent("article-list");t(`<div${ssrRenderAttrs(mergeProps({class:"category-flow-page"},s))} data-v-48fd7957>`),t(ssrRenderComponent(y,{"background-color":e.currentCategoryColor,"background-image":e.currentCategoryImage,icon:e.currentCategoryIcon},{default:withCtx((S,I,L,D)=>{if(I)e.currentCategory?I(ssrRenderComponent(E,null,{zh:withCtx((O,V,z,U)=>{if(V)V(`<span data-v-48fd7957${U}>${ssrInterpolate(e.currentCategory.name)}</span>`),V(ssrRenderComponent(w,{class:"divider",type:"vertical"},null,z,U)),V(`<span data-v-48fd7957${U}>${ssrInterpolate(e.currentCategory.description||"...")}</span>`);else return[createVNode("span",null,toDisplayString(e.currentCategory.name),1),createVNode(w,{class:"divider",type:"vertical"}),createVNode("span",null,toDisplayString(e.currentCategory.description||"..."),1)]}),en:withCtx((O,V,z,U)=>{if(V)V(`<span data-v-48fd7957${U}>Category</span>`),V(ssrRenderComponent(w,{class:"divider",type:"vertical"},null,z,U)),V(`<span data-v-48fd7957${U}>${ssrInterpolate(e.firstUpperCase(e.currentCategory.slug))}</span>`);else return[createVNode("span",null,"Category"),createVNode(w,{class:"divider",type:"vertical"}),createVNode("span",null,toDisplayString(e.firstUpperCase(e.currentCategory.slug)),1)]}),_:1},L,D)):I("<!---->");else return[e.currentCategory?(openBlock(),createBlock(E,{key:0},{zh:withCtx(()=>[createVNode("span",null,toDisplayString(e.currentCategory.name),1),createVNode(w,{class:"divider",type:"vertical"}),createVNode("span",null,toDisplayString(e.currentCategory.description||"..."),1)]),en:withCtx(()=>[createVNode("span",null,"Category"),createVNode(w,{class:"divider",type:"vertical"}),createVNode("span",null,toDisplayString(e.firstUpperCase(e.currentCategory.slug)),1)]),_:1})):createCommentVNode("",!0)]}),_:1},i)),t(ssrRenderComponent(k,{fetching:e.articleListStore.list.fetching,articles:e.articleListStore.list.data,pagination:e.articleListStore.list.pagination,onLoadmore:e.loadmoreArticles},null,i)),t("</div>")}const _sfc_setup$1u=_sfc_main$1u.setup;_sfc_main$1u.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/category.vue"),_sfc_setup$1u?_sfc_setup$1u(e,t):void 0};const CategoryFlowPage=_export_sfc(_sfc_main$1u,[["ssrRender",_sfc_ssrRender$1u],["__scopeId","data-v-48fd7957"]]),_sfc_main$1t=defineComponent({name:"TagPage",components:{ArticleListHeader,ArticleList},props:{tagSlug:{type:String,required:!0}},setup(e){const{meta:t,isZhLang:i}=useEnhancer(),s=useTagStore(),c=useArticleListStore(),d=computed(()=>s.data.find(w=>w.slug===e.tagSlug)),g=computed(()=>{var w;return getExtendValue(((w=d.value)==null?void 0:w.extends)||[],"icon")||"icon-tag"}),r=computed(()=>{var w;return getExtendValue(((w=d.value)==null?void 0:w.extends)||[],"background")}),y=computed(()=>{var w;return getExtendValue(((w=d.value)==null?void 0:w.extends)||[],"bgcolor")}),E=async()=>{await c.fetchList({tag_slug:e.tagSlug,page:c.list.pagination.current_page+1}),scrollToNextScreen()};return t(()=>{var L,D;const w=firstUpperCase(e.tagSlug),k=(L=d.value)==null?void 0:L.name,S=i.value?[k,w]:[w,"Tag"],I=((D=d.value)==null?void 0:D.description)||S.join(",");return{pageTitle:S.join(" | "),description:I}}),onBeforeMount(()=>{watch(()=>e.tagSlug,w=>c.fetchList({tag_slug:w}),{flush:"post"})}),useUniversalFetch(()=>c.fetchList({tag_slug:e.tagSlug})),{articleListStore:c,tagEnName,currentTag:d,currentTagIcon:g,currentTagImage:r,currentTagColor:y,loadmoreArticles:E}}}),tag_vue_vue_type_style_index_0_scoped_3d7f1a9a_lang="";function _sfc_ssrRender$1t(e,t,i,s,c,d,g,r){const y=resolveComponent("article-list-header"),E=resolveComponent("i18n"),w=resolveComponent("divider"),k=resolveComponent("article-list");t(`<div${ssrRenderAttrs(mergeProps({class:"tag-flow-page"},s))} data-v-3d7f1a9a>`),t(ssrRenderComponent(y,{"background-color":e.currentTagColor,"background-image":e.currentTagImage,icon:e.currentTagIcon},{default:withCtx((S,I,L,D)=>{if(I)e.currentTag?(I(`<span class="header" data-v-3d7f1a9a${D}>`),I(ssrRenderComponent(E,null,{zh:withCtx((O,V,z,U)=>{if(V)V(`<span data-v-3d7f1a9a${U}>#${ssrInterpolate(e.currentTag.name)}</span>`),V(ssrRenderComponent(w,{class:"divider",type:"vertical"},null,z,U)),V(`<span data-v-3d7f1a9a${U}>${ssrInterpolate(e.currentTag.description||"...")}</span>`);else return[createVNode("span",null,"#"+toDisplayString(e.currentTag.name),1),createVNode(w,{class:"divider",type:"vertical"}),createVNode("span",null,toDisplayString(e.currentTag.description||"..."),1)]}),en:withCtx((O,V,z,U)=>{if(V)V(`<span data-v-3d7f1a9a${U}>Tag</span>`),V(ssrRenderComponent(w,{class:"divider",type:"vertical"},null,z,U)),V(`<span data-v-3d7f1a9a${U}>#${ssrInterpolate(e.tagEnName(e.currentTag))}</span>`);else return[createVNode("span",null,"Tag"),createVNode(w,{class:"divider",type:"vertical"}),createVNode("span",null,"#"+toDisplayString(e.tagEnName(e.currentTag)),1)]}),_:1},L,D)),I("</span>")):I("<!---->");else return[e.currentTag?(openBlock(),createBlock("span",{key:0,class:"header"},[createVNode(E,null,{zh:withCtx(()=>[createVNode("span",null,"#"+toDisplayString(e.currentTag.name),1),createVNode(w,{class:"divider",type:"vertical"}),createVNode("span",null,toDisplayString(e.currentTag.description||"..."),1)]),en:withCtx(()=>[createVNode("span",null,"Tag"),createVNode(w,{class:"divider",type:"vertical"}),createVNode("span",null,"#"+toDisplayString(e.tagEnName(e.currentTag)),1)]),_:1})])):createCommentVNode("",!0)]}),_:1},i)),t(ssrRenderComponent(k,{fetching:e.articleListStore.list.fetching,articles:e.articleListStore.list.data,pagination:e.articleListStore.list.pagination,onLoadmore:e.loadmoreArticles},null,i)),t("</div>")}const _sfc_setup$1t=_sfc_main$1t.setup;_sfc_main$1t.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/tag.vue"),_sfc_setup$1t?_sfc_setup$1t(e,t):void 0};const TagFlowPage=_export_sfc(_sfc_main$1t,[["ssrRender",_sfc_ssrRender$1t],["__scopeId","data-v-3d7f1a9a"]]),_sfc_main$1s=defineComponent({name:"DatePage",components:{ArticleListHeader,ArticleList},props:{date:{type:String,required:!0}},setup(e){const{meta:t}=useEnhancer();t(()=>({pageTitle:`${e.date} | Date`}));const i=useArticleListStore(),s=async()=>{await i.fetchList({date:e.date,page:i.list.pagination.current_page+1}),scrollToNextScreen()};return onBeforeMount(()=>{watch(()=>e.date,c=>i.fetchList({date:c}),{flush:"post"})}),useUniversalFetch(()=>i.fetchList({date:e.date})),{articleListStore:i,loadmoreArticles:s}}});function _sfc_ssrRender$1s(e,t,i,s,c,d,g,r){const y=resolveComponent("article-list-header"),E=resolveComponent("i18n"),w=resolveComponent("article-list");t(`<div${ssrRenderAttrs(mergeProps({class:"date-flow-page"},s))}>`),t(ssrRenderComponent(y,{icon:"icon-clock"},{default:withCtx((k,S,I,L)=>{if(S)S(ssrRenderComponent(E,{zh:`\u53D1\u5E03\u4E8E ${e.date} \u7684\u6240\u6709\u6587\u7AE0`,en:`Articles published at ${e.date}`},null,I,L));else return[createVNode(E,{zh:`\u53D1\u5E03\u4E8E ${e.date} \u7684\u6240\u6709\u6587\u7AE0`,en:`Articles published at ${e.date}`},null,8,["zh","en"])]}),_:1},i)),t(ssrRenderComponent(w,{fetching:e.articleListStore.list.fetching,articles:e.articleListStore.list.data,pagination:e.articleListStore.list.pagination,onLoadmore:e.loadmoreArticles},null,i)),t("</div>")}const _sfc_setup$1s=_sfc_main$1s.setup;_sfc_main$1s.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/date.vue"),_sfc_setup$1s?_sfc_setup$1s(e,t):void 0};const DateFlowPage=_export_sfc(_sfc_main$1s,[["ssrRender",_sfc_ssrRender$1s]]),_sfc_main$1r=defineComponent({name:"SearchPage",components:{ArticleListHeader,ArticleList},props:{keyword:{type:String,required:!0}},setup(e){const{meta:t}=useEnhancer();t(()=>({pageTitle:`${e.keyword} | Search`}));const i=useArticleListStore(),s=async()=>{await i.fetchList({keyword:e.keyword,page:i.list.pagination.current_page+1}),scrollToNextScreen()};return onBeforeMount(()=>{watch(()=>e.keyword,c=>i.fetchList({keyword:c}),{flush:"post"})}),useUniversalFetch(()=>i.fetchList({keyword:e.keyword})),{articleListStore:i,loadmoreArticles:s}}});function _sfc_ssrRender$1r(e,t,i,s,c,d,g,r){const y=resolveComponent("article-list-header"),E=resolveComponent("i18n"),w=resolveComponent("article-list");t(`<div${ssrRenderAttrs(mergeProps({class:"search-flow-page"},s))}>`),t(ssrRenderComponent(y,{icon:"icon-search"},{default:withCtx((k,S,I,L)=>{if(S)S(ssrRenderComponent(E,{zh:`\u548C \u201C${e.keyword}\u201D \u6709\u5173\u7684\u6240\u6709\u6587\u7AE0`,en:`Keyword "${e.keyword}"'s result`},null,I,L));else return[createVNode(E,{zh:`\u548C \u201C${e.keyword}\u201D \u6709\u5173\u7684\u6240\u6709\u6587\u7AE0`,en:`Keyword "${e.keyword}"'s result`},null,8,["zh","en"])]}),_:1},i)),t(ssrRenderComponent(w,{fetching:e.articleListStore.list.fetching,articles:e.articleListStore.list.data,pagination:e.articleListStore.list.pagination,onLoadmore:e.loadmoreArticles},null,i)),t("</div>")}const _sfc_setup$1r=_sfc_main$1r.setup;_sfc_main$1r.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/search.vue"),_sfc_setup$1r?_sfc_setup$1r(e,t):void 0};const SearchFlowPage=_export_sfc(_sfc_main$1r,[["ssrRender",_sfc_ssrRender$1r]]);var shams=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},i=Symbol("test"),s=Object(i);if(typeof i=="string"||Object.prototype.toString.call(i)!=="[object Symbol]"||Object.prototype.toString.call(s)!=="[object Symbol]")return!1;var c=42;t[i]=c;for(i in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var d=Object.getOwnPropertySymbols(t);if(d.length!==1||d[0]!==i||!Object.prototype.propertyIsEnumerable.call(t,i))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var g=Object.getOwnPropertyDescriptor(t,i);if(g.value!==c||g.enumerable!==!0)return!1}return!0},origSymbol=typeof Symbol<"u"&&Symbol,hasSymbolSham=shams,hasSymbols$1=function(){return typeof origSymbol!="function"||typeof Symbol!="function"||typeof origSymbol("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hasSymbolSham()},ERROR_MESSAGE="Function.prototype.bind called on incompatible ",slice=Array.prototype.slice,toStr$1=Object.prototype.toString,funcType="[object Function]",implementation$1=function(t){var i=this;if(typeof i!="function"||toStr$1.call(i)!==funcType)throw new TypeError(ERROR_MESSAGE+i);for(var s=slice.call(arguments,1),c,d=function(){if(this instanceof c){var w=i.apply(this,s.concat(slice.call(arguments)));return Object(w)===w?w:this}else return i.apply(t,s.concat(slice.call(arguments)))},g=Math.max(0,i.length-s.length),r=[],y=0;y<g;y++)r.push("$"+y);if(c=Function("binder","return function ("+r.join(",")+"){ return binder.apply(this,arguments); }")(d),i.prototype){var E=function(){};E.prototype=i.prototype,c.prototype=new E,E.prototype=null}return c},implementation=implementation$1,functionBind=Function.prototype.bind||implementation,bind$1=functionBind,src=bind$1.call(Function.call,Object.prototype.hasOwnProperty),undefined$1,$SyntaxError=SyntaxError,$Function=Function,$TypeError$1=TypeError,getEvalledConstructor=function(e){try{return $Function('"use strict"; return ('+e+").constructor;")()}catch{}},$gOPD=Object.getOwnPropertyDescriptor;if($gOPD)try{$gOPD({},"")}catch{$gOPD=null}var throwTypeError=function(){throw new $TypeError$1},ThrowTypeError=$gOPD?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols=hasSymbols$1(),getProto=Object.getPrototypeOf||function(e){return e.__proto__},needsEval={},TypedArray=typeof Uint8Array>"u"?undefined$1:getProto(Uint8Array),INTRINSICS={"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols?getProto([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols?getProto(getProto([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols?undefined$1:getProto(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols?undefined$1:getProto(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols?getProto(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols?Symbol:undefined$1,"%SyntaxError%":$SyntaxError,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$1,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet},doEval=function e(t){var i;if(t==="%AsyncFunction%")i=getEvalledConstructor("async function () {}");else if(t==="%GeneratorFunction%")i=getEvalledConstructor("function* () {}");else if(t==="%AsyncGeneratorFunction%")i=getEvalledConstructor("async function* () {}");else if(t==="%AsyncGenerator%"){var s=e("%AsyncGeneratorFunction%");s&&(i=s.prototype)}else if(t==="%AsyncIteratorPrototype%"){var c=e("%AsyncGenerator%");c&&(i=getProto(c.prototype))}return INTRINSICS[t]=i,i},LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind=functionBind,hasOwn$1=src,$concat$1=bind.call(Function.call,Array.prototype.concat),$spliceApply=bind.call(Function.apply,Array.prototype.splice),$replace$1=bind.call(Function.call,String.prototype.replace),$strSlice=bind.call(Function.call,String.prototype.slice),$exec=bind.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function(t){var i=$strSlice(t,0,1),s=$strSlice(t,-1);if(i==="%"&&s!=="%")throw new $SyntaxError("invalid intrinsic syntax, expected closing `%`");if(s==="%"&&i!=="%")throw new $SyntaxError("invalid intrinsic syntax, expected opening `%`");var c=[];return $replace$1(t,rePropName,function(d,g,r,y){c[c.length]=r?$replace$1(y,reEscapeChar,"$1"):g||d}),c},getBaseIntrinsic=function(t,i){var s=t,c;if(hasOwn$1(LEGACY_ALIASES,s)&&(c=LEGACY_ALIASES[s],s="%"+c[0]+"%"),hasOwn$1(INTRINSICS,s)){var d=INTRINSICS[s];if(d===needsEval&&(d=doEval(s)),typeof d>"u"&&!i)throw new $TypeError$1("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:c,name:s,value:d}}throw new $SyntaxError("intrinsic "+t+" does not exist!")},getIntrinsic=function(t,i){if(typeof t!="string"||t.length===0)throw new $TypeError$1("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof i!="boolean")throw new $TypeError$1('"allowMissing" argument must be a boolean');if($exec(/^%?[^%]*%?$/g,t)===null)throw new $SyntaxError("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var s=stringToPath(t),c=s.length>0?s[0]:"",d=getBaseIntrinsic("%"+c+"%",i),g=d.name,r=d.value,y=!1,E=d.alias;E&&(c=E[0],$spliceApply(s,$concat$1([0,1],E)));for(var w=1,k=!0;w<s.length;w+=1){var S=s[w],I=$strSlice(S,0,1),L=$strSlice(S,-1);if((I==='"'||I==="'"||I==="`"||L==='"'||L==="'"||L==="`")&&I!==L)throw new $SyntaxError("property names with quotes must have matching quotes");if((S==="constructor"||!k)&&(y=!0),c+="."+S,g="%"+c+"%",hasOwn$1(INTRINSICS,g))r=INTRINSICS[g];else if(r!=null){if(!(S in r)){if(!i)throw new $TypeError$1("base intrinsic for "+t+" exists, but the property is not available.");return}if($gOPD&&w+1>=s.length){var D=$gOPD(r,S);k=!!D,k&&"get"in D&&!("originalValue"in D.get)?r=D.get:r=r[S]}else k=hasOwn$1(r,S),r=r[S];k&&!y&&(INTRINSICS[g]=r)}}return r},callBind$1={exports:{}};(function(e){var t=functionBind,i=getIntrinsic,s=i("%Function.prototype.apply%"),c=i("%Function.prototype.call%"),d=i("%Reflect.apply%",!0)||t.call(c,s),g=i("%Object.getOwnPropertyDescriptor%",!0),r=i("%Object.defineProperty%",!0),y=i("%Math.max%");if(r)try{r({},"a",{value:1})}catch{r=null}e.exports=function(k){var S=d(t,c,arguments);if(g&&r){var I=g(S,"length");I.configurable&&r(S,"length",{value:1+y(0,k.length-(arguments.length-1))})}return S};var E=function(){return d(t,s,arguments)};r?r(e.exports,"apply",{value:E}):e.exports.apply=E})(callBind$1);var GetIntrinsic$1=getIntrinsic,callBind=callBind$1.exports,$indexOf=callBind(GetIntrinsic$1("String.prototype.indexOf")),callBound$1=function(t,i){var s=GetIntrinsic$1(t,!!i);return typeof s=="function"&&$indexOf(t,".prototype.")>-1?callBind(s):s},util_inspect=require$$0__default$2.default.inspect,hasMap=typeof Map=="function"&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize=hasMap&&mapSizeDescriptor&&typeof mapSizeDescriptor.get=="function"?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet=typeof Set=="function"&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&typeof setSizeDescriptor.get=="function"?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,hasWeakMap=typeof WeakMap=="function"&&WeakMap.prototype,weakMapHas=hasWeakMap?WeakMap.prototype.has:null,hasWeakSet=typeof WeakSet=="function"&&WeakSet.prototype,weakSetHas=hasWeakSet?WeakSet.prototype.has:null,hasWeakRef=typeof WeakRef=="function"&&WeakRef.prototype,weakRefDeref=hasWeakRef?WeakRef.prototype.deref:null,booleanValueOf=Boolean.prototype.valueOf,objectToString=Object.prototype.toString,functionToString=Function.prototype.toString,$match=String.prototype.match,$slice=String.prototype.slice,$replace=String.prototype.replace,$toUpperCase=String.prototype.toUpperCase,$toLowerCase=String.prototype.toLowerCase,$test=RegExp.prototype.test,$concat=Array.prototype.concat,$join=Array.prototype.join,$arrSlice=Array.prototype.slice,$floor=Math.floor,bigIntValueOf=typeof BigInt=="function"?BigInt.prototype.valueOf:null,gOPS=Object.getOwnPropertySymbols,symToString=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,hasShammedSymbols=typeof Symbol=="function"&&typeof Symbol.iterator=="object",toStringTag=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===hasShammedSymbols?"object":"symbol")?Symbol.toStringTag:null,isEnumerable=Object.prototype.propertyIsEnumerable,gPO=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function addNumericSeparator(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||$test.call(/e/,t))return t;var i=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var s=e<0?-$floor(-e):$floor(e);if(s!==e){var c=String(s),d=$slice.call(t,c.length+1);return $replace.call(c,i,"$&_")+"."+$replace.call($replace.call(d,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $replace.call(t,i,"$&_")}var utilInspect=util_inspect,inspectCustom=utilInspect.custom,inspectSymbol=isSymbol(inspectCustom)?inspectCustom:null,objectInspect=function e(t,i,s,c){var d=i||{};if(has$3(d,"quoteStyle")&&d.quoteStyle!=="single"&&d.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has$3(d,"maxStringLength")&&(typeof d.maxStringLength=="number"?d.maxStringLength<0&&d.maxStringLength!==1/0:d.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var g=has$3(d,"customInspect")?d.customInspect:!0;if(typeof g!="boolean"&&g!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(has$3(d,"indent")&&d.indent!==null&&d.indent!=="	"&&!(parseInt(d.indent,10)===d.indent&&d.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(has$3(d,"numericSeparator")&&typeof d.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var r=d.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return inspectString(t,d);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var y=String(t);return r?addNumericSeparator(t,y):y}if(typeof t=="bigint"){var E=String(t)+"n";return r?addNumericSeparator(t,E):E}var w=typeof d.depth>"u"?5:d.depth;if(typeof s>"u"&&(s=0),s>=w&&w>0&&typeof t=="object")return isArray$3(t)?"[Array]":"[Object]";var k=getIndent(d,s);if(typeof c>"u")c=[];else if(indexOf(c,t)>=0)return"[Circular]";function S(Le,Ge,wt){if(Ge&&(c=$arrSlice.call(c),c.push(Ge)),wt){var Te={depth:d.depth};return has$3(d,"quoteStyle")&&(Te.quoteStyle=d.quoteStyle),e(Le,Te,s+1,c)}return e(Le,d,s+1,c)}if(typeof t=="function"&&!isRegExp$1(t)){var I=nameOf(t),L=arrObjKeys(t,S);return"[Function"+(I?": "+I:" (anonymous)")+"]"+(L.length>0?" { "+$join.call(L,", ")+" }":"")}if(isSymbol(t)){var D=hasShammedSymbols?$replace.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):symToString.call(t);return typeof t=="object"&&!hasShammedSymbols?markBoxed(D):D}if(isElement(t)){for(var O="<"+$toLowerCase.call(String(t.nodeName)),V=t.attributes||[],z=0;z<V.length;z++)O+=" "+V[z].name+"="+wrapQuotes(quote(V[z].value),"double",d);return O+=">",t.childNodes&&t.childNodes.length&&(O+="..."),O+="</"+$toLowerCase.call(String(t.nodeName))+">",O}if(isArray$3(t)){if(t.length===0)return"[]";var U=arrObjKeys(t,S);return k&&!singleLineValues(U)?"["+indentedJoin(U,k)+"]":"[ "+$join.call(U,", ")+" ]"}if(isError(t)){var Z=arrObjKeys(t,S);return!("cause"in Error.prototype)&&"cause"in t&&!isEnumerable.call(t,"cause")?"{ ["+String(t)+"] "+$join.call($concat.call("[cause]: "+S(t.cause),Z),", ")+" }":Z.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+$join.call(Z,", ")+" }"}if(typeof t=="object"&&g){if(inspectSymbol&&typeof t[inspectSymbol]=="function"&&utilInspect)return utilInspect(t,{depth:w-s});if(g!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(isMap(t)){var W=[];return mapForEach.call(t,function(Le,Ge){W.push(S(Ge,t,!0)+" => "+S(Le,t))}),collectionOf("Map",mapSize.call(t),W,k)}if(isSet(t)){var ne=[];return setForEach.call(t,function(Le){ne.push(S(Le,t))}),collectionOf("Set",setSize.call(t),ne,k)}if(isWeakMap(t))return weakCollectionOf("WeakMap");if(isWeakSet(t))return weakCollectionOf("WeakSet");if(isWeakRef(t))return weakCollectionOf("WeakRef");if(isNumber(t))return markBoxed(S(Number(t)));if(isBigInt(t))return markBoxed(S(bigIntValueOf.call(t)));if(isBoolean(t))return markBoxed(booleanValueOf.call(t));if(isString(t))return markBoxed(S(String(t)));if(!isDate(t)&&!isRegExp$1(t)){var re=arrObjKeys(t,S),ie=gPO?gPO(t)===Object.prototype:t instanceof Object||t.constructor===Object,Ce=t instanceof Object?"":"null prototype",we=!ie&&toStringTag&&Object(t)===t&&toStringTag in t?$slice.call(toStr(t),8,-1):Ce?"Object":"",fe=ie||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",de=fe+(we||Ce?"["+$join.call($concat.call([],we||[],Ce||[]),": ")+"] ":"");return re.length===0?de+"{}":k?de+"{"+indentedJoin(re,k)+"}":de+"{ "+$join.call(re,", ")+" }"}return String(t)};function wrapQuotes(e,t,i){var s=(i.quoteStyle||t)==="double"?'"':"'";return s+e+s}function quote(e){return $replace.call(String(e),/"/g,"&quot;")}function isArray$3(e){return toStr(e)==="[object Array]"&&(!toStringTag||!(typeof e=="object"&&toStringTag in e))}function isDate(e){return toStr(e)==="[object Date]"&&(!toStringTag||!(typeof e=="object"&&toStringTag in e))}function isRegExp$1(e){return toStr(e)==="[object RegExp]"&&(!toStringTag||!(typeof e=="object"&&toStringTag in e))}function isError(e){return toStr(e)==="[object Error]"&&(!toStringTag||!(typeof e=="object"&&toStringTag in e))}function isString(e){return toStr(e)==="[object String]"&&(!toStringTag||!(typeof e=="object"&&toStringTag in e))}function isNumber(e){return toStr(e)==="[object Number]"&&(!toStringTag||!(typeof e=="object"&&toStringTag in e))}function isBoolean(e){return toStr(e)==="[object Boolean]"&&(!toStringTag||!(typeof e=="object"&&toStringTag in e))}function isSymbol(e){if(hasShammedSymbols)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!symToString)return!1;try{return symToString.call(e),!0}catch{}return!1}function isBigInt(e){if(!e||typeof e!="object"||!bigIntValueOf)return!1;try{return bigIntValueOf.call(e),!0}catch{}return!1}var hasOwn=Object.prototype.hasOwnProperty||function(e){return e in this};function has$3(e,t){return hasOwn.call(e,t)}function toStr(e){return objectToString.call(e)}function nameOf(e){if(e.name)return e.name;var t=$match.call(functionToString.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function indexOf(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1}function isMap(e){if(!mapSize||!e||typeof e!="object")return!1;try{mapSize.call(e);try{setSize.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function isWeakMap(e){if(!weakMapHas||!e||typeof e!="object")return!1;try{weakMapHas.call(e,weakMapHas);try{weakSetHas.call(e,weakSetHas)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function isWeakRef(e){if(!weakRefDeref||!e||typeof e!="object")return!1;try{return weakRefDeref.call(e),!0}catch{}return!1}function isSet(e){if(!setSize||!e||typeof e!="object")return!1;try{setSize.call(e);try{mapSize.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function isWeakSet(e){if(!weakSetHas||!e||typeof e!="object")return!1;try{weakSetHas.call(e,weakSetHas);try{weakMapHas.call(e,weakMapHas)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function isElement(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function inspectString(e,t){if(e.length>t.maxStringLength){var i=e.length-t.maxStringLength,s="... "+i+" more character"+(i>1?"s":"");return inspectString($slice.call(e,0,t.maxStringLength),t)+s}var c=$replace.call($replace.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,lowbyte);return wrapQuotes(c,"single",t)}function lowbyte(e){var t=e.charCodeAt(0),i={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return i?"\\"+i:"\\x"+(t<16?"0":"")+$toUpperCase.call(t.toString(16))}function markBoxed(e){return"Object("+e+")"}function weakCollectionOf(e){return e+" { ? }"}function collectionOf(e,t,i,s){var c=s?indentedJoin(i,s):$join.call(i,", ");return e+" ("+t+") {"+c+"}"}function singleLineValues(e){for(var t=0;t<e.length;t++)if(indexOf(e[t],`
`)>=0)return!1;return!0}function getIndent(e,t){var i;if(e.indent==="	")i="	";else if(typeof e.indent=="number"&&e.indent>0)i=$join.call(Array(e.indent+1)," ");else return null;return{base:i,prev:$join.call(Array(t+1),i)}}function indentedJoin(e,t){if(e.length===0)return"";var i=`
`+t.prev+t.base;return i+$join.call(e,","+i)+`
`+t.prev}function arrObjKeys(e,t){var i=isArray$3(e),s=[];if(i){s.length=e.length;for(var c=0;c<e.length;c++)s[c]=has$3(e,c)?t(e[c],e):""}var d=typeof gOPS=="function"?gOPS(e):[],g;if(hasShammedSymbols){g={};for(var r=0;r<d.length;r++)g["$"+d[r]]=d[r]}for(var y in e)!has$3(e,y)||i&&String(Number(y))===y&&y<e.length||hasShammedSymbols&&g["$"+y]instanceof Symbol||($test.call(/[^\w$]/,y)?s.push(t(y,e)+": "+t(e[y],e)):s.push(y+": "+t(e[y],e)));if(typeof gOPS=="function")for(var E=0;E<d.length;E++)isEnumerable.call(e,d[E])&&s.push("["+t(d[E])+"]: "+t(e[d[E]],e));return s}var GetIntrinsic=getIntrinsic,callBound=callBound$1,inspect=objectInspect,$TypeError=GetIntrinsic("%TypeError%"),$WeakMap=GetIntrinsic("%WeakMap%",!0),$Map=GetIntrinsic("%Map%",!0),$weakMapGet=callBound("WeakMap.prototype.get",!0),$weakMapSet=callBound("WeakMap.prototype.set",!0),$weakMapHas=callBound("WeakMap.prototype.has",!0),$mapGet=callBound("Map.prototype.get",!0),$mapSet=callBound("Map.prototype.set",!0),$mapHas=callBound("Map.prototype.has",!0),listGetNode=function(e,t){for(var i=e,s;(s=i.next)!==null;i=s)if(s.key===t)return i.next=s.next,s.next=e.next,e.next=s,s},listGet=function(e,t){var i=listGetNode(e,t);return i&&i.value},listSet=function(e,t,i){var s=listGetNode(e,t);s?s.value=i:e.next={key:t,next:e.next,value:i}},listHas=function(e,t){return!!listGetNode(e,t)},sideChannel=function(){var t,i,s,c={assert:function(d){if(!c.has(d))throw new $TypeError("Side channel does not contain "+inspect(d))},get:function(d){if($WeakMap&&d&&(typeof d=="object"||typeof d=="function")){if(t)return $weakMapGet(t,d)}else if($Map){if(i)return $mapGet(i,d)}else if(s)return listGet(s,d)},has:function(d){if($WeakMap&&d&&(typeof d=="object"||typeof d=="function")){if(t)return $weakMapHas(t,d)}else if($Map){if(i)return $mapHas(i,d)}else if(s)return listHas(s,d);return!1},set:function(d,g){$WeakMap&&d&&(typeof d=="object"||typeof d=="function")?(t||(t=new $WeakMap),$weakMapSet(t,d,g)):$Map?(i||(i=new $Map),$mapSet(i,d,g)):(s||(s={key:{},next:null}),listSet(s,d,g))}};return c},replace=String.prototype.replace,percentTwenties=/%20/g,Format={RFC1738:"RFC1738",RFC3986:"RFC3986"},formats$3={default:Format.RFC3986,formatters:{RFC1738:function(e){return replace.call(e,percentTwenties,"+")},RFC3986:function(e){return String(e)}},RFC1738:Format.RFC1738,RFC3986:Format.RFC3986},formats$2=formats$3,has$2=Object.prototype.hasOwnProperty,isArray$2=Array.isArray,hexTable=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),compactQueue=function(t){for(;t.length>1;){var i=t.pop(),s=i.obj[i.prop];if(isArray$2(s)){for(var c=[],d=0;d<s.length;++d)typeof s[d]<"u"&&c.push(s[d]);i.obj[i.prop]=c}}},arrayToObject=function(t,i){for(var s=i&&i.plainObjects?Object.create(null):{},c=0;c<t.length;++c)typeof t[c]<"u"&&(s[c]=t[c]);return s},merge=function e(t,i,s){if(!i)return t;if(typeof i!="object"){if(isArray$2(t))t.push(i);else if(t&&typeof t=="object")(s&&(s.plainObjects||s.allowPrototypes)||!has$2.call(Object.prototype,i))&&(t[i]=!0);else return[t,i];return t}if(!t||typeof t!="object")return[t].concat(i);var c=t;return isArray$2(t)&&!isArray$2(i)&&(c=arrayToObject(t,s)),isArray$2(t)&&isArray$2(i)?(i.forEach(function(d,g){if(has$2.call(t,g)){var r=t[g];r&&typeof r=="object"&&d&&typeof d=="object"?t[g]=e(r,d,s):t.push(d)}else t[g]=d}),t):Object.keys(i).reduce(function(d,g){var r=i[g];return has$2.call(d,g)?d[g]=e(d[g],r,s):d[g]=r,d},c)},assign=function(t,i){return Object.keys(i).reduce(function(s,c){return s[c]=i[c],s},t)},decode=function(e,t,i){var s=e.replace(/\+/g," ");if(i==="iso-8859-1")return s.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(s)}catch{return s}},encode=function(t,i,s,c,d){if(t.length===0)return t;var g=t;if(typeof t=="symbol"?g=Symbol.prototype.toString.call(t):typeof t!="string"&&(g=String(t)),s==="iso-8859-1")return escape(g).replace(/%u[0-9a-f]{4}/gi,function(w){return"%26%23"+parseInt(w.slice(2),16)+"%3B"});for(var r="",y=0;y<g.length;++y){var E=g.charCodeAt(y);if(E===45||E===46||E===95||E===126||E>=48&&E<=57||E>=65&&E<=90||E>=97&&E<=122||d===formats$2.RFC1738&&(E===40||E===41)){r+=g.charAt(y);continue}if(E<128){r=r+hexTable[E];continue}if(E<2048){r=r+(hexTable[192|E>>6]+hexTable[128|E&63]);continue}if(E<55296||E>=57344){r=r+(hexTable[224|E>>12]+hexTable[128|E>>6&63]+hexTable[128|E&63]);continue}y+=1,E=65536+((E&1023)<<10|g.charCodeAt(y)&1023),r+=hexTable[240|E>>18]+hexTable[128|E>>12&63]+hexTable[128|E>>6&63]+hexTable[128|E&63]}return r},compact=function(t){for(var i=[{obj:{o:t},prop:"o"}],s=[],c=0;c<i.length;++c)for(var d=i[c],g=d.obj[d.prop],r=Object.keys(g),y=0;y<r.length;++y){var E=r[y],w=g[E];typeof w=="object"&&w!==null&&s.indexOf(w)===-1&&(i.push({obj:g,prop:E}),s.push(w))}return compactQueue(i),t},isRegExp=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},isBuffer=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},combine=function(t,i){return[].concat(t,i)},maybeMap=function(t,i){if(isArray$2(t)){for(var s=[],c=0;c<t.length;c+=1)s.push(i(t[c]));return s}return i(t)},utils$4={arrayToObject,assign,combine,compact,decode,encode,isBuffer,isRegExp,maybeMap,merge},getSideChannel=sideChannel,utils$3=utils$4,formats$1=formats$3,has$1=Object.prototype.hasOwnProperty,arrayPrefixGenerators={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,i){return t+"["+i+"]"},repeat:function(t){return t}},isArray$1=Array.isArray,split=String.prototype.split,push=Array.prototype.push,pushToArray=function(e,t){push.apply(e,isArray$1(t)?t:[t])},toISO=Date.prototype.toISOString,defaultFormat=formats$1.default,defaults$1={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:utils$3.encode,encodeValuesOnly:!1,format:defaultFormat,formatter:formats$1.formatters[defaultFormat],indices:!1,serializeDate:function(t){return toISO.call(t)},skipNulls:!1,strictNullHandling:!1},isNonNullishPrimitive=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},sentinel={},stringify$1=function e(t,i,s,c,d,g,r,y,E,w,k,S,I,L,D,O){for(var V=t,z=O,U=0,Z=!1;(z=z.get(sentinel))!==void 0&&!Z;){var W=z.get(t);if(U+=1,typeof W<"u"){if(W===U)throw new RangeError("Cyclic object value");Z=!0}typeof z.get(sentinel)>"u"&&(U=0)}if(typeof y=="function"?V=y(i,V):V instanceof Date?V=k(V):s==="comma"&&isArray$1(V)&&(V=utils$3.maybeMap(V,function(ut){return ut instanceof Date?k(ut):ut})),V===null){if(d)return r&&!L?r(i,defaults$1.encoder,D,"key",S):i;V=""}if(isNonNullishPrimitive(V)||utils$3.isBuffer(V)){if(r){var ne=L?i:r(i,defaults$1.encoder,D,"key",S);if(s==="comma"&&L){for(var re=split.call(String(V),","),ie="",Ce=0;Ce<re.length;++Ce)ie+=(Ce===0?"":",")+I(r(re[Ce],defaults$1.encoder,D,"value",S));return[I(ne)+(c&&isArray$1(V)&&re.length===1?"[]":"")+"="+ie]}return[I(ne)+"="+I(r(V,defaults$1.encoder,D,"value",S))]}return[I(i)+"="+I(String(V))]}var we=[];if(typeof V>"u")return we;var fe;if(s==="comma"&&isArray$1(V))fe=[{value:V.length>0?V.join(",")||null:void 0}];else if(isArray$1(y))fe=y;else{var de=Object.keys(V);fe=E?de.sort(E):de}for(var Le=c&&isArray$1(V)&&V.length===1?i+"[]":i,Ge=0;Ge<fe.length;++Ge){var wt=fe[Ge],Te=typeof wt=="object"&&typeof wt.value<"u"?wt.value:V[wt];if(!(g&&Te===null)){var ze=isArray$1(V)?typeof s=="function"?s(Le,wt):Le:Le+(w?"."+wt:"["+wt+"]");O.set(t,U);var Ke=getSideChannel();Ke.set(sentinel,O),pushToArray(we,e(Te,ze,s,c,d,g,r,y,E,w,k,S,I,L,D,Ke))}}return we},normalizeStringifyOptions=function(t){if(!t)return defaults$1;if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var i=t.charset||defaults$1.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var s=formats$1.default;if(typeof t.format<"u"){if(!has$1.call(formats$1.formatters,t.format))throw new TypeError("Unknown format option provided.");s=t.format}var c=formats$1.formatters[s],d=defaults$1.filter;return(typeof t.filter=="function"||isArray$1(t.filter))&&(d=t.filter),{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:defaults$1.addQueryPrefix,allowDots:typeof t.allowDots>"u"?defaults$1.allowDots:!!t.allowDots,charset:i,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:defaults$1.charsetSentinel,delimiter:typeof t.delimiter>"u"?defaults$1.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:defaults$1.encode,encoder:typeof t.encoder=="function"?t.encoder:defaults$1.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:defaults$1.encodeValuesOnly,filter:d,format:s,formatter:c,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:defaults$1.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:defaults$1.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:defaults$1.strictNullHandling}},stringify_1=function(e,t){var i=e,s=normalizeStringifyOptions(t),c,d;typeof s.filter=="function"?(d=s.filter,i=d("",i)):isArray$1(s.filter)&&(d=s.filter,c=d);var g=[];if(typeof i!="object"||i===null)return"";var r;t&&t.arrayFormat in arrayPrefixGenerators?r=t.arrayFormat:t&&"indices"in t?r=t.indices?"indices":"repeat":r="indices";var y=arrayPrefixGenerators[r];if(t&&"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var E=y==="comma"&&t&&t.commaRoundTrip;c||(c=Object.keys(i)),s.sort&&c.sort(s.sort);for(var w=getSideChannel(),k=0;k<c.length;++k){var S=c[k];s.skipNulls&&i[S]===null||pushToArray(g,stringify$1(i[S],S,y,E,s.strictNullHandling,s.skipNulls,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,w))}var I=g.join(s.delimiter),L=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?L+="utf8=%26%2310003%3B&":L+="utf8=%E2%9C%93&"),I.length>0?L+I:""},utils$2=utils$4,has=Object.prototype.hasOwnProperty,isArray=Array.isArray,defaults={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:utils$2.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},interpretNumericEntities=function(e){return e.replace(/&#(\d+);/g,function(t,i){return String.fromCharCode(parseInt(i,10))})},parseArrayValue=function(e,t){return e&&typeof e=="string"&&t.comma&&e.indexOf(",")>-1?e.split(","):e},isoSentinel="utf8=%26%2310003%3B",charsetSentinel="utf8=%E2%9C%93",parseValues=function(t,i){var s={},c=i.ignoreQueryPrefix?t.replace(/^\?/,""):t,d=i.parameterLimit===1/0?void 0:i.parameterLimit,g=c.split(i.delimiter,d),r=-1,y,E=i.charset;if(i.charsetSentinel)for(y=0;y<g.length;++y)g[y].indexOf("utf8=")===0&&(g[y]===charsetSentinel?E="utf-8":g[y]===isoSentinel&&(E="iso-8859-1"),r=y,y=g.length);for(y=0;y<g.length;++y)if(y!==r){var w=g[y],k=w.indexOf("]="),S=k===-1?w.indexOf("="):k+1,I,L;S===-1?(I=i.decoder(w,defaults.decoder,E,"key"),L=i.strictNullHandling?null:""):(I=i.decoder(w.slice(0,S),defaults.decoder,E,"key"),L=utils$2.maybeMap(parseArrayValue(w.slice(S+1),i),function(D){return i.decoder(D,defaults.decoder,E,"value")})),L&&i.interpretNumericEntities&&E==="iso-8859-1"&&(L=interpretNumericEntities(L)),w.indexOf("[]=")>-1&&(L=isArray(L)?[L]:L),has.call(s,I)?s[I]=utils$2.combine(s[I],L):s[I]=L}return s},parseObject=function(e,t,i,s){for(var c=s?t:parseArrayValue(t,i),d=e.length-1;d>=0;--d){var g,r=e[d];if(r==="[]"&&i.parseArrays)g=[].concat(c);else{g=i.plainObjects?Object.create(null):{};var y=r.charAt(0)==="["&&r.charAt(r.length-1)==="]"?r.slice(1,-1):r,E=parseInt(y,10);!i.parseArrays&&y===""?g={0:c}:!isNaN(E)&&r!==y&&String(E)===y&&E>=0&&i.parseArrays&&E<=i.arrayLimit?(g=[],g[E]=c):y!=="__proto__"&&(g[y]=c)}c=g}return c},parseKeys=function(t,i,s,c){if(!!t){var d=s.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,g=/(\[[^[\]]*])/,r=/(\[[^[\]]*])/g,y=s.depth>0&&g.exec(d),E=y?d.slice(0,y.index):d,w=[];if(E){if(!s.plainObjects&&has.call(Object.prototype,E)&&!s.allowPrototypes)return;w.push(E)}for(var k=0;s.depth>0&&(y=r.exec(d))!==null&&k<s.depth;){if(k+=1,!s.plainObjects&&has.call(Object.prototype,y[1].slice(1,-1))&&!s.allowPrototypes)return;w.push(y[1])}return y&&w.push("["+d.slice(y.index)+"]"),parseObject(w,i,s,c)}},normalizeParseOptions=function(t){if(!t)return defaults;if(t.decoder!==null&&t.decoder!==void 0&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=typeof t.charset>"u"?defaults.charset:t.charset;return{allowDots:typeof t.allowDots>"u"?defaults.allowDots:!!t.allowDots,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:defaults.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:defaults.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:defaults.arrayLimit,charset:i,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:defaults.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:defaults.comma,decoder:typeof t.decoder=="function"?t.decoder:defaults.decoder,delimiter:typeof t.delimiter=="string"||utils$2.isRegExp(t.delimiter)?t.delimiter:defaults.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:defaults.depth,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:defaults.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:defaults.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:defaults.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:defaults.strictNullHandling}},parse$2=function(e,t){var i=normalizeParseOptions(t);if(e===""||e===null||typeof e>"u")return i.plainObjects?Object.create(null):{};for(var s=typeof e=="string"?parseValues(e,i):e,c=i.plainObjects?Object.create(null):{},d=Object.keys(s),g=0;g<d.length;++g){var r=d[g],y=parseKeys(r,s[r],i,typeof e=="string");c=utils$2.merge(c,y,i)}return i.allowSparse===!0?c:utils$2.compact(c)},stringify=stringify_1,parse$1=parse$2,formats=formats$3,lib$1={formats,parse:parse$1,stringify},lib={exports:{}},server={},canPromise$1=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},qrcode={},utils$1={};let toSJISFunction;const CODEWORDS_COUNT=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];utils$1.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};utils$1.getSymbolTotalCodewords=function(t){return CODEWORDS_COUNT[t]};utils$1.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};utils$1.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');toSJISFunction=t};utils$1.isKanjiModeEnabled=function(){return typeof toSJISFunction<"u"};utils$1.toSJIS=function(t){return toSJISFunction(t)};var errorCorrectionLevel={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+i)}}e.isValid=function(s){return s&&typeof s.bit<"u"&&s.bit>=0&&s.bit<4},e.from=function(s,c){if(e.isValid(s))return s;try{return t(s)}catch{return c}}})(errorCorrectionLevel);function BitBuffer$1(){this.buffer=[],this.length=0}BitBuffer$1.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let i=0;i<t;i++)this.putBit((e>>>t-i-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var bitBuffer=BitBuffer$1;function BitMatrix$1(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}BitMatrix$1.prototype.set=function(e,t,i,s){const c=e*this.size+t;this.data[c]=i,s&&(this.reservedBit[c]=!0)};BitMatrix$1.prototype.get=function(e,t){return this.data[e*this.size+t]};BitMatrix$1.prototype.xor=function(e,t,i){this.data[e*this.size+t]^=i};BitMatrix$1.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var bitMatrix=BitMatrix$1,alignmentPattern={};(function(e){const t=utils$1.getSymbolSize;e.getRowColCoords=function(s){if(s===1)return[];const c=Math.floor(s/7)+2,d=t(s),g=d===145?26:Math.ceil((d-13)/(2*c-2))*2,r=[d-7];for(let y=1;y<c-1;y++)r[y]=r[y-1]-g;return r.push(6),r.reverse()},e.getPositions=function(s){const c=[],d=e.getRowColCoords(s),g=d.length;for(let r=0;r<g;r++)for(let y=0;y<g;y++)r===0&&y===0||r===0&&y===g-1||r===g-1&&y===0||c.push([d[r],d[y]]);return c}})(alignmentPattern);var finderPattern={};const getSymbolSize=utils$1.getSymbolSize,FINDER_PATTERN_SIZE=7;finderPattern.getPositions=function(t){const i=getSymbolSize(t);return[[0,0],[i-FINDER_PATTERN_SIZE,0],[0,i-FINDER_PATTERN_SIZE]]};var maskPattern={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(c){return c!=null&&c!==""&&!isNaN(c)&&c>=0&&c<=7},e.from=function(c){return e.isValid(c)?parseInt(c,10):void 0},e.getPenaltyN1=function(c){const d=c.size;let g=0,r=0,y=0,E=null,w=null;for(let k=0;k<d;k++){r=y=0,E=w=null;for(let S=0;S<d;S++){let I=c.get(k,S);I===E?r++:(r>=5&&(g+=t.N1+(r-5)),E=I,r=1),I=c.get(S,k),I===w?y++:(y>=5&&(g+=t.N1+(y-5)),w=I,y=1)}r>=5&&(g+=t.N1+(r-5)),y>=5&&(g+=t.N1+(y-5))}return g},e.getPenaltyN2=function(c){const d=c.size;let g=0;for(let r=0;r<d-1;r++)for(let y=0;y<d-1;y++){const E=c.get(r,y)+c.get(r,y+1)+c.get(r+1,y)+c.get(r+1,y+1);(E===4||E===0)&&g++}return g*t.N2},e.getPenaltyN3=function(c){const d=c.size;let g=0,r=0,y=0;for(let E=0;E<d;E++){r=y=0;for(let w=0;w<d;w++)r=r<<1&2047|c.get(E,w),w>=10&&(r===1488||r===93)&&g++,y=y<<1&2047|c.get(w,E),w>=10&&(y===1488||y===93)&&g++}return g*t.N3},e.getPenaltyN4=function(c){let d=0;const g=c.data.length;for(let y=0;y<g;y++)d+=c.data[y];return Math.abs(Math.ceil(d*100/g/5)-10)*t.N4};function i(s,c,d){switch(s){case e.Patterns.PATTERN000:return(c+d)%2===0;case e.Patterns.PATTERN001:return c%2===0;case e.Patterns.PATTERN010:return d%3===0;case e.Patterns.PATTERN011:return(c+d)%3===0;case e.Patterns.PATTERN100:return(Math.floor(c/2)+Math.floor(d/3))%2===0;case e.Patterns.PATTERN101:return c*d%2+c*d%3===0;case e.Patterns.PATTERN110:return(c*d%2+c*d%3)%2===0;case e.Patterns.PATTERN111:return(c*d%3+(c+d)%2)%2===0;default:throw new Error("bad maskPattern:"+s)}}e.applyMask=function(c,d){const g=d.size;for(let r=0;r<g;r++)for(let y=0;y<g;y++)d.isReserved(y,r)||d.xor(y,r,i(c,y,r))},e.getBestMask=function(c,d){const g=Object.keys(e.Patterns).length;let r=0,y=1/0;for(let E=0;E<g;E++){d(E),e.applyMask(E,c);const w=e.getPenaltyN1(c)+e.getPenaltyN2(c)+e.getPenaltyN3(c)+e.getPenaltyN4(c);e.applyMask(E,c),w<y&&(y=w,r=E)}return r}})(maskPattern);var errorCorrectionCode={};const ECLevel$1=errorCorrectionLevel,EC_BLOCKS_TABLE=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],EC_CODEWORDS_TABLE=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];errorCorrectionCode.getBlocksCount=function(t,i){switch(i){case ECLevel$1.L:return EC_BLOCKS_TABLE[(t-1)*4+0];case ECLevel$1.M:return EC_BLOCKS_TABLE[(t-1)*4+1];case ECLevel$1.Q:return EC_BLOCKS_TABLE[(t-1)*4+2];case ECLevel$1.H:return EC_BLOCKS_TABLE[(t-1)*4+3];default:return}};errorCorrectionCode.getTotalCodewordsCount=function(t,i){switch(i){case ECLevel$1.L:return EC_CODEWORDS_TABLE[(t-1)*4+0];case ECLevel$1.M:return EC_CODEWORDS_TABLE[(t-1)*4+1];case ECLevel$1.Q:return EC_CODEWORDS_TABLE[(t-1)*4+2];case ECLevel$1.H:return EC_CODEWORDS_TABLE[(t-1)*4+3];default:return}};var polynomial={},galoisField={};const EXP_TABLE=new Uint8Array(512),LOG_TABLE=new Uint8Array(256);(function(){let t=1;for(let i=0;i<255;i++)EXP_TABLE[i]=t,LOG_TABLE[t]=i,t<<=1,t&256&&(t^=285);for(let i=255;i<512;i++)EXP_TABLE[i]=EXP_TABLE[i-255]})();galoisField.log=function(t){if(t<1)throw new Error("log("+t+")");return LOG_TABLE[t]};galoisField.exp=function(t){return EXP_TABLE[t]};galoisField.mul=function(t,i){return t===0||i===0?0:EXP_TABLE[LOG_TABLE[t]+LOG_TABLE[i]]};(function(e){const t=galoisField;e.mul=function(s,c){const d=new Uint8Array(s.length+c.length-1);for(let g=0;g<s.length;g++)for(let r=0;r<c.length;r++)d[g+r]^=t.mul(s[g],c[r]);return d},e.mod=function(s,c){let d=new Uint8Array(s);for(;d.length-c.length>=0;){const g=d[0];for(let y=0;y<c.length;y++)d[y]^=t.mul(c[y],g);let r=0;for(;r<d.length&&d[r]===0;)r++;d=d.slice(r)}return d},e.generateECPolynomial=function(s){let c=new Uint8Array([1]);for(let d=0;d<s;d++)c=e.mul(c,new Uint8Array([1,t.exp(d)]));return c}})(polynomial);const Polynomial=polynomial;function ReedSolomonEncoder$1(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}ReedSolomonEncoder$1.prototype.initialize=function(t){this.degree=t,this.genPoly=Polynomial.generateECPolynomial(this.degree)};ReedSolomonEncoder$1.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(t.length+this.degree);i.set(t);const s=Polynomial.mod(i,this.genPoly),c=this.degree-s.length;if(c>0){const d=new Uint8Array(this.degree);return d.set(s,c),d}return s};var reedSolomonEncoder=ReedSolomonEncoder$1,version={},mode={},versionCheck={};versionCheck.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var regex={};const numeric="[0-9]+",alphanumeric="[A-Z $%*+\\-./:]+";let kanji="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";kanji=kanji.replace(/u/g,"\\u");const byte="(?:(?![A-Z0-9 $%*+\\-./:]|"+kanji+`)(?:.|[\r
]))+`;regex.KANJI=new RegExp(kanji,"g");regex.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");regex.BYTE=new RegExp(byte,"g");regex.NUMERIC=new RegExp(numeric,"g");regex.ALPHANUMERIC=new RegExp(alphanumeric,"g");const TEST_KANJI=new RegExp("^"+kanji+"$"),TEST_NUMERIC=new RegExp("^"+numeric+"$"),TEST_ALPHANUMERIC=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");regex.testKanji=function(t){return TEST_KANJI.test(t)};regex.testNumeric=function(t){return TEST_NUMERIC.test(t)};regex.testAlphanumeric=function(t){return TEST_ALPHANUMERIC.test(t)};(function(e){const t=versionCheck,i=regex;e.NUMERIC={id:"Numeric",bit:1<<0,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:1<<1,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:1<<2,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:1<<3,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(d,g){if(!d.ccBits)throw new Error("Invalid mode: "+d);if(!t.isValid(g))throw new Error("Invalid version: "+g);return g>=1&&g<10?d.ccBits[0]:g<27?d.ccBits[1]:d.ccBits[2]},e.getBestModeForData=function(d){return i.testNumeric(d)?e.NUMERIC:i.testAlphanumeric(d)?e.ALPHANUMERIC:i.testKanji(d)?e.KANJI:e.BYTE},e.toString=function(d){if(d&&d.id)return d.id;throw new Error("Invalid mode")},e.isValid=function(d){return d&&d.bit&&d.ccBits};function s(c){if(typeof c!="string")throw new Error("Param is not a string");switch(c.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+c)}}e.from=function(d,g){if(e.isValid(d))return d;try{return s(d)}catch{return g}}})(mode);(function(e){const t=utils$1,i=errorCorrectionCode,s=errorCorrectionLevel,c=mode,d=versionCheck,g=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,r=t.getBCHDigit(g);function y(S,I,L){for(let D=1;D<=40;D++)if(I<=e.getCapacity(D,L,S))return D}function E(S,I){return c.getCharCountIndicator(S,I)+4}function w(S,I){let L=0;return S.forEach(function(D){L+=E(D.mode,I)+D.getBitsLength()}),L}function k(S,I){for(let L=1;L<=40;L++)if(w(S,L)<=e.getCapacity(L,I,c.MIXED))return L}e.from=function(I,L){return d.isValid(I)?parseInt(I,10):L},e.getCapacity=function(I,L,D){if(!d.isValid(I))throw new Error("Invalid QR Code version");typeof D>"u"&&(D=c.BYTE);const O=t.getSymbolTotalCodewords(I),V=i.getTotalCodewordsCount(I,L),z=(O-V)*8;if(D===c.MIXED)return z;const U=z-E(D,I);switch(D){case c.NUMERIC:return Math.floor(U/10*3);case c.ALPHANUMERIC:return Math.floor(U/11*2);case c.KANJI:return Math.floor(U/13);case c.BYTE:default:return Math.floor(U/8)}},e.getBestVersionForData=function(I,L){let D;const O=s.from(L,s.M);if(Array.isArray(I)){if(I.length>1)return k(I,O);if(I.length===0)return 1;D=I[0]}else D=I;return y(D.mode,D.getLength(),O)},e.getEncodedBits=function(I){if(!d.isValid(I)||I<7)throw new Error("Invalid QR Code version");let L=I<<12;for(;t.getBCHDigit(L)-r>=0;)L^=g<<t.getBCHDigit(L)-r;return I<<12|L}})(version);var formatInfo={};const Utils$3=utils$1,G15=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,G15_MASK=1<<14|1<<12|1<<10|1<<4|1<<1,G15_BCH=Utils$3.getBCHDigit(G15);formatInfo.getEncodedBits=function(t,i){const s=t.bit<<3|i;let c=s<<10;for(;Utils$3.getBCHDigit(c)-G15_BCH>=0;)c^=G15<<Utils$3.getBCHDigit(c)-G15_BCH;return(s<<10|c)^G15_MASK};var segments={};const Mode$4=mode;function NumericData(e){this.mode=Mode$4.NUMERIC,this.data=e.toString()}NumericData.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};NumericData.prototype.getLength=function(){return this.data.length};NumericData.prototype.getBitsLength=function(){return NumericData.getBitsLength(this.data.length)};NumericData.prototype.write=function(t){let i,s,c;for(i=0;i+3<=this.data.length;i+=3)s=this.data.substr(i,3),c=parseInt(s,10),t.put(c,10);const d=this.data.length-i;d>0&&(s=this.data.substr(i),c=parseInt(s,10),t.put(c,d*3+1))};var numericData=NumericData;const Mode$3=mode,ALPHA_NUM_CHARS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function AlphanumericData(e){this.mode=Mode$3.ALPHANUMERIC,this.data=e}AlphanumericData.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};AlphanumericData.prototype.getLength=function(){return this.data.length};AlphanumericData.prototype.getBitsLength=function(){return AlphanumericData.getBitsLength(this.data.length)};AlphanumericData.prototype.write=function(t){let i;for(i=0;i+2<=this.data.length;i+=2){let s=ALPHA_NUM_CHARS.indexOf(this.data[i])*45;s+=ALPHA_NUM_CHARS.indexOf(this.data[i+1]),t.put(s,11)}this.data.length%2&&t.put(ALPHA_NUM_CHARS.indexOf(this.data[i]),6)};var alphanumericData=AlphanumericData,encodeUtf8$1=function(t){for(var i=[],s=t.length,c=0;c<s;c++){var d=t.charCodeAt(c);if(d>=55296&&d<=56319&&s>c+1){var g=t.charCodeAt(c+1);g>=56320&&g<=57343&&(d=(d-55296)*1024+g-56320+65536,c+=1)}if(d<128){i.push(d);continue}if(d<2048){i.push(d>>6|192),i.push(d&63|128);continue}if(d<55296||d>=57344&&d<65536){i.push(d>>12|224),i.push(d>>6&63|128),i.push(d&63|128);continue}if(d>=65536&&d<=1114111){i.push(d>>18|240),i.push(d>>12&63|128),i.push(d>>6&63|128),i.push(d&63|128);continue}i.push(239,191,189)}return new Uint8Array(i).buffer};const encodeUtf8=encodeUtf8$1,Mode$2=mode;function ByteData(e){this.mode=Mode$2.BYTE,typeof e=="string"&&(e=encodeUtf8(e)),this.data=new Uint8Array(e)}ByteData.getBitsLength=function(t){return t*8};ByteData.prototype.getLength=function(){return this.data.length};ByteData.prototype.getBitsLength=function(){return ByteData.getBitsLength(this.data.length)};ByteData.prototype.write=function(e){for(let t=0,i=this.data.length;t<i;t++)e.put(this.data[t],8)};var byteData=ByteData;const Mode$1=mode,Utils$2=utils$1;function KanjiData(e){this.mode=Mode$1.KANJI,this.data=e}KanjiData.getBitsLength=function(t){return t*13};KanjiData.prototype.getLength=function(){return this.data.length};KanjiData.prototype.getBitsLength=function(){return KanjiData.getBitsLength(this.data.length)};KanjiData.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let i=Utils$2.toSJIS(this.data[t]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);i=(i>>>8&255)*192+(i&255),e.put(i,13)}};var kanjiData=KanjiData,dijkstra={exports:{}};(function(e){var t={single_source_shortest_paths:function(i,s,c){var d={},g={};g[s]=0;var r=t.PriorityQueue.make();r.push(s,0);for(var y,E,w,k,S,I,L,D,O;!r.empty();){y=r.pop(),E=y.value,k=y.cost,S=i[E]||{};for(w in S)S.hasOwnProperty(w)&&(I=S[w],L=k+I,D=g[w],O=typeof g[w]>"u",(O||D>L)&&(g[w]=L,r.push(w,L),d[w]=E))}if(typeof c<"u"&&typeof g[c]>"u"){var V=["Could not find a path from ",s," to ",c,"."].join("");throw new Error(V)}return d},extract_shortest_path_from_predecessor_list:function(i,s){for(var c=[],d=s;d;)c.push(d),i[d],d=i[d];return c.reverse(),c},find_path:function(i,s,c){var d=t.single_source_shortest_paths(i,s,c);return t.extract_shortest_path_from_predecessor_list(d,c)},PriorityQueue:{make:function(i){var s=t.PriorityQueue,c={},d;i=i||{};for(d in s)s.hasOwnProperty(d)&&(c[d]=s[d]);return c.queue=[],c.sorter=i.sorter||s.default_sorter,c},default_sorter:function(i,s){return i.cost-s.cost},push:function(i,s){var c={value:i,cost:s};this.queue.push(c),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(dijkstra);(function(e){const t=mode,i=numericData,s=alphanumericData,c=byteData,d=kanjiData,g=regex,r=utils$1,y=dijkstra.exports;function E(V){return unescape(encodeURIComponent(V)).length}function w(V,z,U){const Z=[];let W;for(;(W=V.exec(U))!==null;)Z.push({data:W[0],index:W.index,mode:z,length:W[0].length});return Z}function k(V){const z=w(g.NUMERIC,t.NUMERIC,V),U=w(g.ALPHANUMERIC,t.ALPHANUMERIC,V);let Z,W;return r.isKanjiModeEnabled()?(Z=w(g.BYTE,t.BYTE,V),W=w(g.KANJI,t.KANJI,V)):(Z=w(g.BYTE_KANJI,t.BYTE,V),W=[]),z.concat(U,Z,W).sort(function(re,ie){return re.index-ie.index}).map(function(re){return{data:re.data,mode:re.mode,length:re.length}})}function S(V,z){switch(z){case t.NUMERIC:return i.getBitsLength(V);case t.ALPHANUMERIC:return s.getBitsLength(V);case t.KANJI:return d.getBitsLength(V);case t.BYTE:return c.getBitsLength(V)}}function I(V){return V.reduce(function(z,U){const Z=z.length-1>=0?z[z.length-1]:null;return Z&&Z.mode===U.mode?(z[z.length-1].data+=U.data,z):(z.push(U),z)},[])}function L(V){const z=[];for(let U=0;U<V.length;U++){const Z=V[U];switch(Z.mode){case t.NUMERIC:z.push([Z,{data:Z.data,mode:t.ALPHANUMERIC,length:Z.length},{data:Z.data,mode:t.BYTE,length:Z.length}]);break;case t.ALPHANUMERIC:z.push([Z,{data:Z.data,mode:t.BYTE,length:Z.length}]);break;case t.KANJI:z.push([Z,{data:Z.data,mode:t.BYTE,length:E(Z.data)}]);break;case t.BYTE:z.push([{data:Z.data,mode:t.BYTE,length:E(Z.data)}])}}return z}function D(V,z){const U={},Z={start:{}};let W=["start"];for(let ne=0;ne<V.length;ne++){const re=V[ne],ie=[];for(let Ce=0;Ce<re.length;Ce++){const we=re[Ce],fe=""+ne+Ce;ie.push(fe),U[fe]={node:we,lastCount:0},Z[fe]={};for(let de=0;de<W.length;de++){const Le=W[de];U[Le]&&U[Le].node.mode===we.mode?(Z[Le][fe]=S(U[Le].lastCount+we.length,we.mode)-S(U[Le].lastCount,we.mode),U[Le].lastCount+=we.length):(U[Le]&&(U[Le].lastCount=we.length),Z[Le][fe]=S(we.length,we.mode)+4+t.getCharCountIndicator(we.mode,z))}}W=ie}for(let ne=0;ne<W.length;ne++)Z[W[ne]].end=0;return{map:Z,table:U}}function O(V,z){let U;const Z=t.getBestModeForData(V);if(U=t.from(z,Z),U!==t.BYTE&&U.bit<Z.bit)throw new Error('"'+V+'" cannot be encoded with mode '+t.toString(U)+`.
 Suggested mode is: `+t.toString(Z));switch(U===t.KANJI&&!r.isKanjiModeEnabled()&&(U=t.BYTE),U){case t.NUMERIC:return new i(V);case t.ALPHANUMERIC:return new s(V);case t.KANJI:return new d(V);case t.BYTE:return new c(V)}}e.fromArray=function(z){return z.reduce(function(U,Z){return typeof Z=="string"?U.push(O(Z,null)):Z.data&&U.push(O(Z.data,Z.mode)),U},[])},e.fromString=function(z,U){const Z=k(z,r.isKanjiModeEnabled()),W=L(Z),ne=D(W,U),re=y.find_path(ne.map,"start","end"),ie=[];for(let Ce=1;Ce<re.length-1;Ce++)ie.push(ne.table[re[Ce]].node);return e.fromArray(I(ie))},e.rawSplit=function(z){return e.fromArray(k(z,r.isKanjiModeEnabled()))}})(segments);const Utils$1=utils$1,ECLevel=errorCorrectionLevel,BitBuffer=bitBuffer,BitMatrix=bitMatrix,AlignmentPattern=alignmentPattern,FinderPattern=finderPattern,MaskPattern=maskPattern,ECCode=errorCorrectionCode,ReedSolomonEncoder=reedSolomonEncoder,Version=version,FormatInfo=formatInfo,Mode=mode,Segments=segments;function setupFinderPattern(e,t){const i=e.size,s=FinderPattern.getPositions(t);for(let c=0;c<s.length;c++){const d=s[c][0],g=s[c][1];for(let r=-1;r<=7;r++)if(!(d+r<=-1||i<=d+r))for(let y=-1;y<=7;y++)g+y<=-1||i<=g+y||(r>=0&&r<=6&&(y===0||y===6)||y>=0&&y<=6&&(r===0||r===6)||r>=2&&r<=4&&y>=2&&y<=4?e.set(d+r,g+y,!0,!0):e.set(d+r,g+y,!1,!0))}}function setupTimingPattern(e){const t=e.size;for(let i=8;i<t-8;i++){const s=i%2===0;e.set(i,6,s,!0),e.set(6,i,s,!0)}}function setupAlignmentPattern(e,t){const i=AlignmentPattern.getPositions(t);for(let s=0;s<i.length;s++){const c=i[s][0],d=i[s][1];for(let g=-2;g<=2;g++)for(let r=-2;r<=2;r++)g===-2||g===2||r===-2||r===2||g===0&&r===0?e.set(c+g,d+r,!0,!0):e.set(c+g,d+r,!1,!0)}}function setupVersionInfo(e,t){const i=e.size,s=Version.getEncodedBits(t);let c,d,g;for(let r=0;r<18;r++)c=Math.floor(r/3),d=r%3+i-8-3,g=(s>>r&1)===1,e.set(c,d,g,!0),e.set(d,c,g,!0)}function setupFormatInfo(e,t,i){const s=e.size,c=FormatInfo.getEncodedBits(t,i);let d,g;for(d=0;d<15;d++)g=(c>>d&1)===1,d<6?e.set(d,8,g,!0):d<8?e.set(d+1,8,g,!0):e.set(s-15+d,8,g,!0),d<8?e.set(8,s-d-1,g,!0):d<9?e.set(8,15-d-1+1,g,!0):e.set(8,15-d-1,g,!0);e.set(s-8,8,1,!0)}function setupData(e,t){const i=e.size;let s=-1,c=i-1,d=7,g=0;for(let r=i-1;r>0;r-=2)for(r===6&&r--;;){for(let y=0;y<2;y++)if(!e.isReserved(c,r-y)){let E=!1;g<t.length&&(E=(t[g]>>>d&1)===1),e.set(c,r-y,E),d--,d===-1&&(g++,d=7)}if(c+=s,c<0||i<=c){c-=s,s=-s;break}}}function createData(e,t,i){const s=new BitBuffer;i.forEach(function(y){s.put(y.mode.bit,4),s.put(y.getLength(),Mode.getCharCountIndicator(y.mode,e)),y.write(s)});const c=Utils$1.getSymbolTotalCodewords(e),d=ECCode.getTotalCodewordsCount(e,t),g=(c-d)*8;for(s.getLengthInBits()+4<=g&&s.put(0,4);s.getLengthInBits()%8!==0;)s.putBit(0);const r=(g-s.getLengthInBits())/8;for(let y=0;y<r;y++)s.put(y%2?17:236,8);return createCodewords(s,e,t)}function createCodewords(e,t,i){const s=Utils$1.getSymbolTotalCodewords(t),c=ECCode.getTotalCodewordsCount(t,i),d=s-c,g=ECCode.getBlocksCount(t,i),r=s%g,y=g-r,E=Math.floor(s/g),w=Math.floor(d/g),k=w+1,S=E-w,I=new ReedSolomonEncoder(S);let L=0;const D=new Array(g),O=new Array(g);let V=0;const z=new Uint8Array(e.buffer);for(let re=0;re<g;re++){const ie=re<y?w:k;D[re]=z.slice(L,L+ie),O[re]=I.encode(D[re]),L+=ie,V=Math.max(V,ie)}const U=new Uint8Array(s);let Z=0,W,ne;for(W=0;W<V;W++)for(ne=0;ne<g;ne++)W<D[ne].length&&(U[Z++]=D[ne][W]);for(W=0;W<S;W++)for(ne=0;ne<g;ne++)U[Z++]=O[ne][W];return U}function createSymbol(e,t,i,s){let c;if(Array.isArray(e))c=Segments.fromArray(e);else if(typeof e=="string"){let E=t;if(!E){const w=Segments.rawSplit(e);E=Version.getBestVersionForData(w,i)}c=Segments.fromString(e,E||40)}else throw new Error("Invalid data");const d=Version.getBestVersionForData(c,i);if(!d)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=d;else if(t<d)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+d+`.
`);const g=createData(t,i,c),r=Utils$1.getSymbolSize(t),y=new BitMatrix(r);return setupFinderPattern(y,t),setupTimingPattern(y),setupAlignmentPattern(y,t),setupFormatInfo(y,i,0),t>=7&&setupVersionInfo(y,t),setupData(y,g),isNaN(s)&&(s=MaskPattern.getBestMask(y,setupFormatInfo.bind(null,y,i))),MaskPattern.applyMask(s,y),setupFormatInfo(y,i,s),{modules:y,version:t,errorCorrectionLevel:i,maskPattern:s,segments:c}}qrcode.create=function(t,i){if(typeof t>"u"||t==="")throw new Error("No input text");let s=ECLevel.M,c,d;return typeof i<"u"&&(s=ECLevel.from(i.errorCorrectionLevel,ECLevel.M),c=Version.from(i.version),d=MaskPattern.from(i.maskPattern),i.toSJISFunc&&Utils$1.setToSJISFunction(i.toSJISFunc)),createSymbol(t,c,s,d)};var png$1={},png={},parserAsync={exports:{}},chunkstream={exports:{}};let util$4=require$$0__default$2.default,Stream$2=require$$1__default$1.default,ChunkStream$2=chunkstream.exports=function(){Stream$2.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};util$4.inherits(ChunkStream$2,Stream$2);ChunkStream$2.prototype.read=function(e,t){this._reads.push({length:Math.abs(e),allowLess:e<0,func:t}),process.nextTick(function(){this._process(),this._paused&&this._reads&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}.bind(this))};ChunkStream$2.prototype.write=function(e,t){if(!this.writable)return this.emit("error",new Error("Stream not writable")),!1;let i;return Buffer.isBuffer(e)?i=e:i=Buffer.from(e,t||this._encoding),this._buffers.push(i),this._buffered+=i.length,this._process(),this._reads&&this._reads.length===0&&(this._paused=!0),this.writable&&!this._paused};ChunkStream$2.prototype.end=function(e,t){e&&this.write(e,t),this.writable=!1,this._buffers&&(this._buffers.length===0?this._end():(this._buffers.push(null),this._process()))};ChunkStream$2.prototype.destroySoon=ChunkStream$2.prototype.end;ChunkStream$2.prototype._end=function(){this._reads.length>0&&this.emit("error",new Error("Unexpected end of input")),this.destroy()};ChunkStream$2.prototype.destroy=function(){!this._buffers||(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))};ChunkStream$2.prototype._processReadAllowingLess=function(e){this._reads.shift();let t=this._buffers[0];t.length>e.length?(this._buffered-=e.length,this._buffers[0]=t.slice(e.length),e.func.call(this,t.slice(0,e.length))):(this._buffered-=t.length,this._buffers.shift(),e.func.call(this,t))};ChunkStream$2.prototype._processRead=function(e){this._reads.shift();let t=0,i=0,s=Buffer.alloc(e.length);for(;t<e.length;){let c=this._buffers[i++],d=Math.min(c.length,e.length-t);c.copy(s,t,0,d),t+=d,d!==c.length&&(this._buffers[--i]=c.slice(d))}i>0&&this._buffers.splice(0,i),this._buffered-=e.length,e.func.call(this,s)};ChunkStream$2.prototype._process=function(){try{for(;this._buffered>0&&this._reads&&this._reads.length>0;){let e=this._reads[0];if(e.allowLess)this._processReadAllowingLess(e);else if(this._buffered>=e.length)this._processRead(e);else break}this._buffers&&!this.writable&&this._end()}catch(e){this.emit("error",e)}};var filterParseAsync={exports:{}},filterParse={exports:{}},interlace={};let imagePasses=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];interlace.getImagePasses=function(e,t){let i=[],s=e%8,c=t%8,d=(e-s)/8,g=(t-c)/8;for(let r=0;r<imagePasses.length;r++){let y=imagePasses[r],E=d*y.x.length,w=g*y.y.length;for(let k=0;k<y.x.length&&y.x[k]<s;k++)E++;for(let k=0;k<y.y.length&&y.y[k]<c;k++)w++;E>0&&w>0&&i.push({width:E,height:w,index:r})}return i};interlace.getInterlaceIterator=function(e){return function(t,i,s){let c=t%imagePasses[s].x.length,d=(t-c)/imagePasses[s].x.length*8+imagePasses[s].x[c],g=i%imagePasses[s].y.length,r=(i-g)/imagePasses[s].y.length*8+imagePasses[s].y[g];return d*4+r*e*4}};var paethPredictor$2=function(t,i,s){let c=t+i-s,d=Math.abs(c-t),g=Math.abs(c-i),r=Math.abs(c-s);return d<=g&&d<=r?t:g<=r?i:s};let interlaceUtils$1=interlace,paethPredictor$1=paethPredictor$2;function getByteWidth(e,t,i){let s=e*t;return i!==8&&(s=Math.ceil(s/(8/i))),s}let Filter$2=filterParse.exports=function(e,t){let i=e.width,s=e.height,c=e.interlace,d=e.bpp,g=e.depth;if(this.read=t.read,this.write=t.write,this.complete=t.complete,this._imageIndex=0,this._images=[],c){let r=interlaceUtils$1.getImagePasses(i,s);for(let y=0;y<r.length;y++)this._images.push({byteWidth:getByteWidth(r[y].width,d,g),height:r[y].height,lineIndex:0})}else this._images.push({byteWidth:getByteWidth(i,d,g),height:s,lineIndex:0});g===8?this._xComparison=d:g===16?this._xComparison=d*2:this._xComparison=1};Filter$2.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))};Filter$2.prototype._unFilterType1=function(e,t,i){let s=this._xComparison,c=s-1;for(let d=0;d<i;d++){let g=e[1+d],r=d>c?t[d-s]:0;t[d]=g+r}};Filter$2.prototype._unFilterType2=function(e,t,i){let s=this._lastLine;for(let c=0;c<i;c++){let d=e[1+c],g=s?s[c]:0;t[c]=d+g}};Filter$2.prototype._unFilterType3=function(e,t,i){let s=this._xComparison,c=s-1,d=this._lastLine;for(let g=0;g<i;g++){let r=e[1+g],y=d?d[g]:0,E=g>c?t[g-s]:0,w=Math.floor((E+y)/2);t[g]=r+w}};Filter$2.prototype._unFilterType4=function(e,t,i){let s=this._xComparison,c=s-1,d=this._lastLine;for(let g=0;g<i;g++){let r=e[1+g],y=d?d[g]:0,E=g>c?t[g-s]:0,w=g>c&&d?d[g-s]:0,k=paethPredictor$1(E,y,w);t[g]=r+k}};Filter$2.prototype._reverseFilterLine=function(e){let t=e[0],i,s=this._images[this._imageIndex],c=s.byteWidth;if(t===0)i=e.slice(1,c+1);else switch(i=Buffer.alloc(c),t){case 1:this._unFilterType1(e,i,c);break;case 2:this._unFilterType2(e,i,c);break;case 3:this._unFilterType3(e,i,c);break;case 4:this._unFilterType4(e,i,c);break;default:throw new Error("Unrecognised filter type - "+t)}this.write(i),s.lineIndex++,s.lineIndex>=s.height?(this._lastLine=null,this._imageIndex++,s=this._images[this._imageIndex]):this._lastLine=i,s?this.read(s.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())};let util$3=require$$0__default$2.default,ChunkStream$1=chunkstream.exports,Filter$1=filterParse.exports,FilterAsync$1=filterParseAsync.exports=function(e){ChunkStream$1.call(this);let t=[],i=this;this._filter=new Filter$1(e,{read:this.read.bind(this),write:function(s){t.push(s)},complete:function(){i.emit("complete",Buffer.concat(t))}}),this._filter.start()};util$3.inherits(FilterAsync$1,ChunkStream$1);var parser={exports:{}},constants$5={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5},crc={exports:{}};let crcTable=[];(function(){for(let e=0;e<256;e++){let t=e;for(let i=0;i<8;i++)t&1?t=3988292384^t>>>1:t=t>>>1;crcTable[e]=t}})();let CrcCalculator$1=crc.exports=function(){this._crc=-1};CrcCalculator$1.prototype.write=function(e){for(let t=0;t<e.length;t++)this._crc=crcTable[(this._crc^e[t])&255]^this._crc>>>8;return!0};CrcCalculator$1.prototype.crc32=function(){return this._crc^-1};CrcCalculator$1.crc32=function(e){let t=-1;for(let i=0;i<e.length;i++)t=crcTable[(t^e[i])&255]^t>>>8;return t^-1};let constants$4=constants$5,CrcCalculator=crc.exports,Parser$3=parser.exports=function(e,t){this._options=e,e.checkCRC=e.checkCRC!==!1,this._hasIHDR=!1,this._hasIEND=!1,this._emittedHeadersFinished=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[constants$4.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[constants$4.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[constants$4.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[constants$4.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[constants$4.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[constants$4.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=t.read,this.error=t.error,this.metadata=t.metadata,this.gamma=t.gamma,this.transColor=t.transColor,this.palette=t.palette,this.parsed=t.parsed,this.inflateData=t.inflateData,this.finished=t.finished,this.simpleTransparency=t.simpleTransparency,this.headersFinished=t.headersFinished||function(){}};Parser$3.prototype.start=function(){this.read(constants$4.PNG_SIGNATURE.length,this._parseSignature.bind(this))};Parser$3.prototype._parseSignature=function(e){let t=constants$4.PNG_SIGNATURE;for(let i=0;i<t.length;i++)if(e[i]!==t[i]){this.error(new Error("Invalid file signature"));return}this.read(8,this._parseChunkBegin.bind(this))};Parser$3.prototype._parseChunkBegin=function(e){let t=e.readUInt32BE(0),i=e.readUInt32BE(4),s="";for(let d=4;d<8;d++)s+=String.fromCharCode(e[d]);let c=Boolean(e[4]&32);if(!this._hasIHDR&&i!==constants$4.TYPE_IHDR){this.error(new Error("Expected IHDR on beggining"));return}if(this._crc=new CrcCalculator,this._crc.write(Buffer.from(s)),this._chunks[i])return this._chunks[i](t);if(!c){this.error(new Error("Unsupported critical chunk type "+s));return}this.read(t+4,this._skipChunk.bind(this))};Parser$3.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))};Parser$3.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))};Parser$3.prototype._parseChunkEnd=function(e){let t=e.readInt32BE(0),i=this._crc.crc32();if(this._options.checkCRC&&i!==t){this.error(new Error("Crc error - "+t+" - "+i));return}this._hasIEND||this.read(8,this._parseChunkBegin.bind(this))};Parser$3.prototype._handleIHDR=function(e){this.read(e,this._parseIHDR.bind(this))};Parser$3.prototype._parseIHDR=function(e){this._crc.write(e);let t=e.readUInt32BE(0),i=e.readUInt32BE(4),s=e[8],c=e[9],d=e[10],g=e[11],r=e[12];if(s!==8&&s!==4&&s!==2&&s!==1&&s!==16){this.error(new Error("Unsupported bit depth "+s));return}if(!(c in constants$4.COLORTYPE_TO_BPP_MAP)){this.error(new Error("Unsupported color type"));return}if(d!==0){this.error(new Error("Unsupported compression method"));return}if(g!==0){this.error(new Error("Unsupported filter method"));return}if(r!==0&&r!==1){this.error(new Error("Unsupported interlace method"));return}this._colorType=c;let y=constants$4.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:t,height:i,depth:s,interlace:Boolean(r),palette:Boolean(c&constants$4.COLORTYPE_PALETTE),color:Boolean(c&constants$4.COLORTYPE_COLOR),alpha:Boolean(c&constants$4.COLORTYPE_ALPHA),bpp:y,colorType:c}),this._handleChunkEnd()};Parser$3.prototype._handlePLTE=function(e){this.read(e,this._parsePLTE.bind(this))};Parser$3.prototype._parsePLTE=function(e){this._crc.write(e);let t=Math.floor(e.length/3);for(let i=0;i<t;i++)this._palette.push([e[i*3],e[i*3+1],e[i*3+2],255]);this.palette(this._palette),this._handleChunkEnd()};Parser$3.prototype._handleTRNS=function(e){this.simpleTransparency(),this.read(e,this._parseTRNS.bind(this))};Parser$3.prototype._parseTRNS=function(e){if(this._crc.write(e),this._colorType===constants$4.COLORTYPE_PALETTE_COLOR){if(this._palette.length===0){this.error(new Error("Transparency chunk must be after palette"));return}if(e.length>this._palette.length){this.error(new Error("More transparent colors than palette size"));return}for(let t=0;t<e.length;t++)this._palette[t][3]=e[t];this.palette(this._palette)}this._colorType===constants$4.COLORTYPE_GRAYSCALE&&this.transColor([e.readUInt16BE(0)]),this._colorType===constants$4.COLORTYPE_COLOR&&this.transColor([e.readUInt16BE(0),e.readUInt16BE(2),e.readUInt16BE(4)]),this._handleChunkEnd()};Parser$3.prototype._handleGAMA=function(e){this.read(e,this._parseGAMA.bind(this))};Parser$3.prototype._parseGAMA=function(e){this._crc.write(e),this.gamma(e.readUInt32BE(0)/constants$4.GAMMA_DIVISION),this._handleChunkEnd()};Parser$3.prototype._handleIDAT=function(e){this._emittedHeadersFinished||(this._emittedHeadersFinished=!0,this.headersFinished()),this.read(-e,this._parseIDAT.bind(this,e))};Parser$3.prototype._parseIDAT=function(e,t){if(this._crc.write(t),this._colorType===constants$4.COLORTYPE_PALETTE_COLOR&&this._palette.length===0)throw new Error("Expected palette not found");this.inflateData(t);let i=e-t.length;i>0?this._handleIDAT(i):this._handleChunkEnd()};Parser$3.prototype._handleIEND=function(e){this.read(e,this._parseIEND.bind(this))};Parser$3.prototype._parseIEND=function(e){this._crc.write(e),this._hasIEND=!0,this._handleChunkEnd(),this.finished&&this.finished()};var bitmapper$2={};let interlaceUtils=interlace,pixelBppMapper=[function(){},function(e,t,i,s){if(s===t.length)throw new Error("Ran out of data");let c=t[s];e[i]=c,e[i+1]=c,e[i+2]=c,e[i+3]=255},function(e,t,i,s){if(s+1>=t.length)throw new Error("Ran out of data");let c=t[s];e[i]=c,e[i+1]=c,e[i+2]=c,e[i+3]=t[s+1]},function(e,t,i,s){if(s+2>=t.length)throw new Error("Ran out of data");e[i]=t[s],e[i+1]=t[s+1],e[i+2]=t[s+2],e[i+3]=255},function(e,t,i,s){if(s+3>=t.length)throw new Error("Ran out of data");e[i]=t[s],e[i+1]=t[s+1],e[i+2]=t[s+2],e[i+3]=t[s+3]}],pixelBppCustomMapper=[function(){},function(e,t,i,s){let c=t[0];e[i]=c,e[i+1]=c,e[i+2]=c,e[i+3]=s},function(e,t,i){let s=t[0];e[i]=s,e[i+1]=s,e[i+2]=s,e[i+3]=t[1]},function(e,t,i,s){e[i]=t[0],e[i+1]=t[1],e[i+2]=t[2],e[i+3]=s},function(e,t,i){e[i]=t[0],e[i+1]=t[1],e[i+2]=t[2],e[i+3]=t[3]}];function bitRetriever(e,t){let i=[],s=0;function c(){if(s===e.length)throw new Error("Ran out of data");let d=e[s];s++;let g,r,y,E,w,k,S,I;switch(t){default:throw new Error("unrecognised depth");case 16:S=e[s],s++,i.push((d<<8)+S);break;case 4:S=d&15,I=d>>4,i.push(I,S);break;case 2:w=d&3,k=d>>2&3,S=d>>4&3,I=d>>6&3,i.push(I,S,k,w);break;case 1:g=d&1,r=d>>1&1,y=d>>2&1,E=d>>3&1,w=d>>4&1,k=d>>5&1,S=d>>6&1,I=d>>7&1,i.push(I,S,k,w,E,y,r,g);break}}return{get:function(d){for(;i.length<d;)c();let g=i.slice(0,d);return i=i.slice(d),g},resetAfterLine:function(){i.length=0},end:function(){if(s!==e.length)throw new Error("extra data found")}}}function mapImage8Bit(e,t,i,s,c,d){let g=e.width,r=e.height,y=e.index;for(let E=0;E<r;E++)for(let w=0;w<g;w++){let k=i(w,E,y);pixelBppMapper[s](t,c,k,d),d+=s}return d}function mapImageCustomBit(e,t,i,s,c,d){let g=e.width,r=e.height,y=e.index;for(let E=0;E<r;E++){for(let w=0;w<g;w++){let k=c.get(s),S=i(w,E,y);pixelBppCustomMapper[s](t,k,S,d)}c.resetAfterLine()}}bitmapper$2.dataToBitMap=function(e,t){let i=t.width,s=t.height,c=t.depth,d=t.bpp,g=t.interlace,r;c!==8&&(r=bitRetriever(e,c));let y;c<=8?y=Buffer.alloc(i*s*4):y=new Uint16Array(i*s*4);let E=Math.pow(2,c)-1,w=0,k,S;if(g)k=interlaceUtils.getImagePasses(i,s),S=interlaceUtils.getInterlaceIterator(i,s);else{let I=0;S=function(){let L=I;return I+=4,L},k=[{width:i,height:s}]}for(let I=0;I<k.length;I++)c===8?w=mapImage8Bit(k[I],y,S,d,e,w):mapImageCustomBit(k[I],y,S,d,r,E);if(c===8){if(w!==e.length)throw new Error("extra data found")}else r.end();return y};function dePalette(e,t,i,s,c){let d=0;for(let g=0;g<s;g++)for(let r=0;r<i;r++){let y=c[e[d]];if(!y)throw new Error("index "+e[d]+" not in palette");for(let E=0;E<4;E++)t[d+E]=y[E];d+=4}}function replaceTransparentColor(e,t,i,s,c){let d=0;for(let g=0;g<s;g++)for(let r=0;r<i;r++){let y=!1;if(c.length===1?c[0]===e[d]&&(y=!0):c[0]===e[d]&&c[1]===e[d+1]&&c[2]===e[d+2]&&(y=!0),y)for(let E=0;E<4;E++)t[d+E]=0;d+=4}}function scaleDepth(e,t,i,s,c){let d=255,g=Math.pow(2,c)-1,r=0;for(let y=0;y<s;y++)for(let E=0;E<i;E++){for(let w=0;w<4;w++)t[r+w]=Math.floor(e[r+w]*d/g+.5);r+=4}}var formatNormaliser$2=function(e,t){let i=t.depth,s=t.width,c=t.height,d=t.colorType,g=t.transColor,r=t.palette,y=e;return d===3?dePalette(e,y,s,c,r):(g&&replaceTransparentColor(e,y,s,c,g),i!==8&&(i===16&&(y=Buffer.alloc(s*c*4)),scaleDepth(e,y,s,c,i))),y};let util$2=require$$0__default$2.default,zlib$3=require$$1__default$3.default,ChunkStream=chunkstream.exports,FilterAsync=filterParseAsync.exports,Parser$2=parser.exports,bitmapper$1=bitmapper$2,formatNormaliser$1=formatNormaliser$2,ParserAsync=parserAsync.exports=function(e){ChunkStream.call(this),this._parser=new Parser$2(e,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this),simpleTransparency:this._simpleTransparency.bind(this),headersFinished:this._headersFinished.bind(this)}),this._options=e,this.writable=!0,this._parser.start()};util$2.inherits(ParserAsync,ChunkStream);ParserAsync.prototype._handleError=function(e){this.emit("error",e),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this._filter&&(this._filter.destroy(),this._filter.on("error",function(){})),this.errord=!0};ParserAsync.prototype._inflateData=function(e){if(!this._inflate)if(this._bitmapInfo.interlace)this._inflate=zlib$3.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter);else{let i=((this._bitmapInfo.width*this._bitmapInfo.bpp*this._bitmapInfo.depth+7>>3)+1)*this._bitmapInfo.height,s=Math.max(i,zlib$3.Z_MIN_CHUNK);this._inflate=zlib$3.createInflate({chunkSize:s});let c=i,d=this.emit.bind(this,"error");this._inflate.on("error",function(r){!c||d(r)}),this._filter.on("complete",this._complete.bind(this));let g=this._filter.write.bind(this._filter);this._inflate.on("data",function(r){!c||(r.length>c&&(r=r.slice(0,c)),c-=r.length,g(r))}),this._inflate.on("end",this._filter.end.bind(this._filter))}this._inflate.write(e)};ParserAsync.prototype._handleMetaData=function(e){this._metaData=e,this._bitmapInfo=Object.create(e),this._filter=new FilterAsync(this._bitmapInfo)};ParserAsync.prototype._handleTransColor=function(e){this._bitmapInfo.transColor=e};ParserAsync.prototype._handlePalette=function(e){this._bitmapInfo.palette=e};ParserAsync.prototype._simpleTransparency=function(){this._metaData.alpha=!0};ParserAsync.prototype._headersFinished=function(){this.emit("metadata",this._metaData)};ParserAsync.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit("error","No Inflate block"))};ParserAsync.prototype._complete=function(e){if(this.errord)return;let t;try{let i=bitmapper$1.dataToBitMap(e,this._bitmapInfo);t=formatNormaliser$1(i,this._bitmapInfo),i=null}catch(i){this._handleError(i);return}this.emit("parsed",t)};var packerAsync={exports:{}},packer={exports:{}};let constants$3=constants$5;var bitpacker=function(e,t,i,s){let c=[constants$3.COLORTYPE_COLOR_ALPHA,constants$3.COLORTYPE_ALPHA].indexOf(s.colorType)!==-1;if(s.colorType===s.inputColorType){let L=function(){let D=new ArrayBuffer(2);return new DataView(D).setInt16(0,256,!0),new Int16Array(D)[0]!==256}();if(s.bitDepth===8||s.bitDepth===16&&L)return e}let d=s.bitDepth!==16?e:new Uint16Array(e.buffer),g=255,r=constants$3.COLORTYPE_TO_BPP_MAP[s.inputColorType];r===4&&!s.inputHasAlpha&&(r=3);let y=constants$3.COLORTYPE_TO_BPP_MAP[s.colorType];s.bitDepth===16&&(g=65535,y*=2);let E=Buffer.alloc(t*i*y),w=0,k=0,S=s.bgColor||{};S.red===void 0&&(S.red=g),S.green===void 0&&(S.green=g),S.blue===void 0&&(S.blue=g);function I(){let L,D,O,V=g;switch(s.inputColorType){case constants$3.COLORTYPE_COLOR_ALPHA:V=d[w+3],L=d[w],D=d[w+1],O=d[w+2];break;case constants$3.COLORTYPE_COLOR:L=d[w],D=d[w+1],O=d[w+2];break;case constants$3.COLORTYPE_ALPHA:V=d[w+1],L=d[w],D=L,O=L;break;case constants$3.COLORTYPE_GRAYSCALE:L=d[w],D=L,O=L;break;default:throw new Error("input color type:"+s.inputColorType+" is not supported at present")}return s.inputHasAlpha&&(c||(V/=g,L=Math.min(Math.max(Math.round((1-V)*S.red+V*L),0),g),D=Math.min(Math.max(Math.round((1-V)*S.green+V*D),0),g),O=Math.min(Math.max(Math.round((1-V)*S.blue+V*O),0),g))),{red:L,green:D,blue:O,alpha:V}}for(let L=0;L<i;L++)for(let D=0;D<t;D++){let O=I();switch(s.colorType){case constants$3.COLORTYPE_COLOR_ALPHA:case constants$3.COLORTYPE_COLOR:s.bitDepth===8?(E[k]=O.red,E[k+1]=O.green,E[k+2]=O.blue,c&&(E[k+3]=O.alpha)):(E.writeUInt16BE(O.red,k),E.writeUInt16BE(O.green,k+2),E.writeUInt16BE(O.blue,k+4),c&&E.writeUInt16BE(O.alpha,k+6));break;case constants$3.COLORTYPE_ALPHA:case constants$3.COLORTYPE_GRAYSCALE:{let V=(O.red+O.green+O.blue)/3;s.bitDepth===8?(E[k]=V,c&&(E[k+1]=O.alpha)):(E.writeUInt16BE(V,k),c&&E.writeUInt16BE(O.alpha,k+2));break}default:throw new Error("unrecognised color Type "+s.colorType)}w+=r,k+=y}return E};let paethPredictor=paethPredictor$2;function filterNone(e,t,i,s,c){for(let d=0;d<i;d++)s[c+d]=e[t+d]}function filterSumNone(e,t,i){let s=0,c=t+i;for(let d=t;d<c;d++)s+=Math.abs(e[d]);return s}function filterSub(e,t,i,s,c,d){for(let g=0;g<i;g++){let r=g>=d?e[t+g-d]:0,y=e[t+g]-r;s[c+g]=y}}function filterSumSub(e,t,i,s){let c=0;for(let d=0;d<i;d++){let g=d>=s?e[t+d-s]:0,r=e[t+d]-g;c+=Math.abs(r)}return c}function filterUp(e,t,i,s,c){for(let d=0;d<i;d++){let g=t>0?e[t+d-i]:0,r=e[t+d]-g;s[c+d]=r}}function filterSumUp(e,t,i){let s=0,c=t+i;for(let d=t;d<c;d++){let g=t>0?e[d-i]:0,r=e[d]-g;s+=Math.abs(r)}return s}function filterAvg(e,t,i,s,c,d){for(let g=0;g<i;g++){let r=g>=d?e[t+g-d]:0,y=t>0?e[t+g-i]:0,E=e[t+g]-(r+y>>1);s[c+g]=E}}function filterSumAvg(e,t,i,s){let c=0;for(let d=0;d<i;d++){let g=d>=s?e[t+d-s]:0,r=t>0?e[t+d-i]:0,y=e[t+d]-(g+r>>1);c+=Math.abs(y)}return c}function filterPaeth(e,t,i,s,c,d){for(let g=0;g<i;g++){let r=g>=d?e[t+g-d]:0,y=t>0?e[t+g-i]:0,E=t>0&&g>=d?e[t+g-(i+d)]:0,w=e[t+g]-paethPredictor(r,y,E);s[c+g]=w}}function filterSumPaeth(e,t,i,s){let c=0;for(let d=0;d<i;d++){let g=d>=s?e[t+d-s]:0,r=t>0?e[t+d-i]:0,y=t>0&&d>=s?e[t+d-(i+s)]:0,E=e[t+d]-paethPredictor(g,r,y);c+=Math.abs(E)}return c}let filters={0:filterNone,1:filterSub,2:filterUp,3:filterAvg,4:filterPaeth},filterSums={0:filterSumNone,1:filterSumSub,2:filterSumUp,3:filterSumAvg,4:filterSumPaeth};var filterPack=function(e,t,i,s,c){let d;if(!("filterType"in s)||s.filterType===-1)d=[0,1,2,3,4];else if(typeof s.filterType=="number")d=[s.filterType];else throw new Error("unrecognised filter types");s.bitDepth===16&&(c*=2);let g=t*c,r=0,y=0,E=Buffer.alloc((g+1)*i),w=d[0];for(let k=0;k<i;k++){if(d.length>1){let S=1/0;for(let I=0;I<d.length;I++){let L=filterSums[d[I]](e,y,g,c);L<S&&(w=d[I],S=L)}}E[r]=w,r++,filters[w](e,y,g,E,r,c),r+=g,y+=g}return E};let constants$2=constants$5,CrcStream=crc.exports,bitPacker=bitpacker,filter=filterPack,zlib$2=require$$1__default$3.default,Packer$3=packer.exports=function(e){if(this._options=e,e.deflateChunkSize=e.deflateChunkSize||32*1024,e.deflateLevel=e.deflateLevel!=null?e.deflateLevel:9,e.deflateStrategy=e.deflateStrategy!=null?e.deflateStrategy:3,e.inputHasAlpha=e.inputHasAlpha!=null?e.inputHasAlpha:!0,e.deflateFactory=e.deflateFactory||zlib$2.createDeflate,e.bitDepth=e.bitDepth||8,e.colorType=typeof e.colorType=="number"?e.colorType:constants$2.COLORTYPE_COLOR_ALPHA,e.inputColorType=typeof e.inputColorType=="number"?e.inputColorType:constants$2.COLORTYPE_COLOR_ALPHA,[constants$2.COLORTYPE_GRAYSCALE,constants$2.COLORTYPE_COLOR,constants$2.COLORTYPE_COLOR_ALPHA,constants$2.COLORTYPE_ALPHA].indexOf(e.colorType)===-1)throw new Error("option color type:"+e.colorType+" is not supported at present");if([constants$2.COLORTYPE_GRAYSCALE,constants$2.COLORTYPE_COLOR,constants$2.COLORTYPE_COLOR_ALPHA,constants$2.COLORTYPE_ALPHA].indexOf(e.inputColorType)===-1)throw new Error("option input color type:"+e.inputColorType+" is not supported at present");if(e.bitDepth!==8&&e.bitDepth!==16)throw new Error("option bit depth:"+e.bitDepth+" is not supported at present")};Packer$3.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}};Packer$3.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())};Packer$3.prototype.filterData=function(e,t,i){let s=bitPacker(e,t,i,this._options),c=constants$2.COLORTYPE_TO_BPP_MAP[this._options.colorType];return filter(s,t,i,this._options,c)};Packer$3.prototype._packChunk=function(e,t){let i=t?t.length:0,s=Buffer.alloc(i+12);return s.writeUInt32BE(i,0),s.writeUInt32BE(e,4),t&&t.copy(s,8),s.writeInt32BE(CrcStream.crc32(s.slice(4,s.length-4)),s.length-4),s};Packer$3.prototype.packGAMA=function(e){let t=Buffer.alloc(4);return t.writeUInt32BE(Math.floor(e*constants$2.GAMMA_DIVISION),0),this._packChunk(constants$2.TYPE_gAMA,t)};Packer$3.prototype.packIHDR=function(e,t){let i=Buffer.alloc(13);return i.writeUInt32BE(e,0),i.writeUInt32BE(t,4),i[8]=this._options.bitDepth,i[9]=this._options.colorType,i[10]=0,i[11]=0,i[12]=0,this._packChunk(constants$2.TYPE_IHDR,i)};Packer$3.prototype.packIDAT=function(e){return this._packChunk(constants$2.TYPE_IDAT,e)};Packer$3.prototype.packIEND=function(){return this._packChunk(constants$2.TYPE_IEND,null)};let util$1=require$$0__default$2.default,Stream$1=require$$1__default$1.default,constants$1=constants$5,Packer$2=packer.exports,PackerAsync=packerAsync.exports=function(e){Stream$1.call(this);let t=e||{};this._packer=new Packer$2(t),this._deflate=this._packer.createDeflate(),this.readable=!0};util$1.inherits(PackerAsync,Stream$1);PackerAsync.prototype.pack=function(e,t,i,s){this.emit("data",Buffer.from(constants$1.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(t,i)),s&&this.emit("data",this._packer.packGAMA(s));let c=this._packer.filterData(e,t,i);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",function(d){this.emit("data",this._packer.packIDAT(d))}.bind(this)),this._deflate.on("end",function(){this.emit("data",this._packer.packIEND()),this.emit("end")}.bind(this)),this._deflate.end(c)};var pngSync={},syncInflate={exports:{}};(function(e,t){let i=require$$4__default.default.ok,s=require$$1__default$3.default,c=require$$0__default$2.default,d=require$$3__default.default.kMaxLength;function g(k){if(!(this instanceof g))return new g(k);k&&k.chunkSize<s.Z_MIN_CHUNK&&(k.chunkSize=s.Z_MIN_CHUNK),s.Inflate.call(this,k),this._offset=this._offset===void 0?this._outOffset:this._offset,this._buffer=this._buffer||this._outBuffer,k&&k.maxLength!=null&&(this._maxLength=k.maxLength)}function r(k){return new g(k)}function y(k,S){S&&process.nextTick(S),k._handle&&(k._handle.close(),k._handle=null)}g.prototype._processChunk=function(k,S,I){if(typeof I=="function")return s.Inflate._processChunk.call(this,k,S,I);let L=this,D=k&&k.length,O=this._chunkSize-this._offset,V=this._maxLength,z=0,U=[],Z=0,W;this.on("error",function(Ce){W=Ce});function ne(Ce,we){if(L._hadError)return;let fe=O-we;if(i(fe>=0,"have should not go down"),fe>0){let de=L._buffer.slice(L._offset,L._offset+fe);if(L._offset+=fe,de.length>V&&(de=de.slice(0,V)),U.push(de),Z+=de.length,V-=de.length,V===0)return!1}return(we===0||L._offset>=L._chunkSize)&&(O=L._chunkSize,L._offset=0,L._buffer=Buffer.allocUnsafe(L._chunkSize)),we===0?(z+=D-Ce,D=Ce,!0):!1}i(this._handle,"zlib binding closed");let re;do re=this._handle.writeSync(S,k,z,D,this._buffer,this._offset,O),re=re||this._writeState;while(!this._hadError&&ne(re[0],re[1]));if(this._hadError)throw W;if(Z>=d)throw y(this),new RangeError("Cannot create final Buffer. It would be larger than 0x"+d.toString(16)+" bytes");let ie=Buffer.concat(U,Z);return y(this),ie},c.inherits(g,s.Inflate);function E(k,S){if(typeof S=="string"&&(S=Buffer.from(S)),!(S instanceof Buffer))throw new TypeError("Not a string or buffer");let I=k._finishFlushFlag;return I==null&&(I=s.Z_FINISH),k._processChunk(S,I)}function w(k,S){return E(new g(S),k)}e.exports=t=w,t.Inflate=g,t.createInflate=r,t.inflateSync=w})(syncInflate,syncInflate.exports);var syncReader={exports:{}};let SyncReader$2=syncReader.exports=function(e){this._buffer=e,this._reads=[]};SyncReader$2.prototype.read=function(e,t){this._reads.push({length:Math.abs(e),allowLess:e<0,func:t})};SyncReader$2.prototype.process=function(){for(;this._reads.length>0&&this._buffer.length;){let e=this._reads[0];if(this._buffer.length&&(this._buffer.length>=e.length||e.allowLess)){this._reads.shift();let t=this._buffer;this._buffer=t.slice(e.length),e.func.call(this,t.slice(0,e.length))}else break}if(this._reads.length>0)return new Error("There are some read requests waitng on finished stream");if(this._buffer.length>0)return new Error("unrecognised content at end of stream")};var filterParseSync={};let SyncReader$1=syncReader.exports,Filter=filterParse.exports;filterParseSync.process=function(e,t){let i=[],s=new SyncReader$1(e);return new Filter(t,{read:s.read.bind(s),write:function(d){i.push(d)},complete:function(){}}).start(),s.process(),Buffer.concat(i)};let hasSyncZlib$1=!0,zlib$1=require$$1__default$3.default,inflateSync=syncInflate.exports;zlib$1.deflateSync||(hasSyncZlib$1=!1);let SyncReader=syncReader.exports,FilterSync=filterParseSync,Parser$1=parser.exports,bitmapper=bitmapper$2,formatNormaliser=formatNormaliser$2;var parserSync=function(e,t){if(!hasSyncZlib$1)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let i;function s(Z){i=Z}let c;function d(Z){c=Z}function g(Z){c.transColor=Z}function r(Z){c.palette=Z}function y(){c.alpha=!0}let E;function w(Z){E=Z}let k=[];function S(Z){k.push(Z)}let I=new SyncReader(e);if(new Parser$1(t,{read:I.read.bind(I),error:s,metadata:d,gamma:w,palette:r,transColor:g,inflateData:S,simpleTransparency:y}).start(),I.process(),i)throw i;let D=Buffer.concat(k);k.length=0;let O;if(c.interlace)O=zlib$1.inflateSync(D);else{let W=((c.width*c.bpp*c.depth+7>>3)+1)*c.height;O=inflateSync(D,{chunkSize:W,maxLength:W})}if(D=null,!O||!O.length)throw new Error("bad png - invalid inflate data response");let V=FilterSync.process(O,c);D=null;let z=bitmapper.dataToBitMap(V,c);V=null;let U=formatNormaliser(z,c);return c.data=U,c.gamma=E||0,c};let hasSyncZlib=!0,zlib=require$$1__default$3.default;zlib.deflateSync||(hasSyncZlib=!1);let constants=constants$5,Packer$1=packer.exports;var packerSync=function(e,t){if(!hasSyncZlib)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let i=t||{},s=new Packer$1(i),c=[];c.push(Buffer.from(constants.PNG_SIGNATURE)),c.push(s.packIHDR(e.width,e.height)),e.gamma&&c.push(s.packGAMA(e.gamma));let d=s.filterData(e.data,e.width,e.height),g=zlib.deflateSync(d,s.getDeflateOptions());if(d=null,!g||!g.length)throw new Error("bad png - invalid compressed data response");return c.push(s.packIDAT(g)),c.push(s.packIEND()),Buffer.concat(c)};let parse=parserSync,pack=packerSync;pngSync.read=function(e,t){return parse(e,t||{})};pngSync.write=function(e,t){return pack(e,t)};let util=require$$0__default$2.default,Stream=require$$1__default$1.default,Parser=parserAsync.exports,Packer=packerAsync.exports,PNGSync=pngSync,PNG=png.PNG=function(e){Stream.call(this),e=e||{},this.width=e.width|0,this.height=e.height|0,this.data=this.width>0&&this.height>0?Buffer.alloc(4*this.width*this.height):null,e.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new Parser(e),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",function(t){this.data=t,this.emit("parsed",t)}.bind(this)),this._packer=new Packer(e),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};util.inherits(PNG,Stream);PNG.sync=PNGSync;PNG.prototype.pack=function(){return!this.data||!this.data.length?(this.emit("error","No data provided"),this):(process.nextTick(function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}.bind(this)),this)};PNG.prototype.parse=function(e,t){if(t){let i,s;i=function(c){this.removeListener("error",s),this.data=c,t(null,this)}.bind(this),s=function(c){this.removeListener("parsed",i),t(c,null)}.bind(this),this.once("parsed",i),this.once("error",s)}return this.end(e),this};PNG.prototype.write=function(e){return this._parser.write(e),!0};PNG.prototype.end=function(e){this._parser.end(e)};PNG.prototype._metadata=function(e){this.width=e.width,this.height=e.height,this.emit("metadata",e)};PNG.prototype._gamma=function(e){this.gamma=e};PNG.prototype._handleClose=function(){!this._parser.writable&&!this._packer.readable&&this.emit("close")};PNG.bitblt=function(e,t,i,s,c,d,g,r){if(i|=0,s|=0,c|=0,d|=0,g|=0,r|=0,i>e.width||s>e.height||i+c>e.width||s+d>e.height)throw new Error("bitblt reading outside image");if(g>t.width||r>t.height||g+c>t.width||r+d>t.height)throw new Error("bitblt writing outside image");for(let y=0;y<d;y++)e.data.copy(t.data,(r+y)*t.width+g<<2,(s+y)*e.width+i<<2,(s+y)*e.width+i+c<<2)};PNG.prototype.bitblt=function(e,t,i,s,c,d,g){return PNG.bitblt(this,e,t,i,s,c,d,g),this};PNG.adjustGamma=function(e){if(e.gamma){for(let t=0;t<e.height;t++)for(let i=0;i<e.width;i++){let s=e.width*t+i<<2;for(let c=0;c<3;c++){let d=e.data[s+c]/255;d=Math.pow(d,1/2.2/e.gamma),e.data[s+c]=Math.round(d*255)}}e.gamma=0}};PNG.prototype.adjustGamma=function(){PNG.adjustGamma(this)};var utils={};(function(e){function t(i){if(typeof i=="number"&&(i=i.toString()),typeof i!="string")throw new Error("Color should be defined as hex string");let s=i.slice().replace("#","").split("");if(s.length<3||s.length===5||s.length>8)throw new Error("Invalid hex color: "+i);(s.length===3||s.length===4)&&(s=Array.prototype.concat.apply([],s.map(function(d){return[d,d]}))),s.length===6&&s.push("F","F");const c=parseInt(s.join(""),16);return{r:c>>24&255,g:c>>16&255,b:c>>8&255,a:c&255,hex:"#"+s.slice(0,6).join("")}}e.getOptions=function(s){s||(s={}),s.color||(s.color={});const c=typeof s.margin>"u"||s.margin===null||s.margin<0?4:s.margin,d=s.width&&s.width>=21?s.width:void 0,g=s.scale||4;return{width:d,scale:d?4:g,margin:c,color:{dark:t(s.color.dark||"#000000ff"),light:t(s.color.light||"#ffffffff")},type:s.type,rendererOpts:s.rendererOpts||{}}},e.getScale=function(s,c){return c.width&&c.width>=s+c.margin*2?c.width/(s+c.margin*2):c.scale},e.getImageWidth=function(s,c){const d=e.getScale(s,c);return Math.floor((s+c.margin*2)*d)},e.qrToImageData=function(s,c,d){const g=c.modules.size,r=c.modules.data,y=e.getScale(g,d),E=Math.floor((g+d.margin*2)*y),w=d.margin*y,k=[d.color.light,d.color.dark];for(let S=0;S<E;S++)for(let I=0;I<E;I++){let L=(S*E+I)*4,D=d.color.light;if(S>=w&&I>=w&&S<E-w&&I<E-w){const O=Math.floor((S-w)/y),V=Math.floor((I-w)/y);D=k[r[O*g+V]?1:0]}s[L++]=D.r,s[L++]=D.g,s[L++]=D.b,s[L]=D.a}}})(utils);(function(e){const t=require$$1__default$5.default,i=png.PNG,s=utils;e.render=function(d,g){const r=s.getOptions(g),y=r.rendererOpts,E=s.getImageWidth(d.modules.size,r);y.width=E,y.height=E;const w=new i(y);return s.qrToImageData(w.data,d,r),w},e.renderToDataURL=function(d,g,r){typeof r>"u"&&(r=g,g=void 0),e.renderToBuffer(d,g,function(y,E){y&&r(y);let w="data:image/png;base64,";w+=E.toString("base64"),r(null,w)})},e.renderToBuffer=function(d,g,r){typeof r>"u"&&(r=g,g=void 0);const y=e.render(d,g),E=[];y.on("error",r),y.on("data",function(w){E.push(w)}),y.on("end",function(){r(null,Buffer.concat(E))}),y.pack()},e.renderToFile=function(d,g,r,y){typeof y>"u"&&(y=r,r=void 0);let E=!1;const w=(...S)=>{E||(E=!0,y.apply(null,S))},k=t.createWriteStream(d);k.on("error",w),k.on("close",w),e.renderToFileStream(k,g,r)},e.renderToFileStream=function(d,g,r){e.render(g,r).pack().pipe(d)}})(png$1);var utf8={};(function(e){const t=utils,i={WW:" ",WB:"\u2584",BB:"\u2588",BW:"\u2580"},s={BB:" ",BW:"\u2584",WW:"\u2588",WB:"\u2580"};function c(d,g,r){return d&&g?r.BB:d&&!g?r.BW:!d&&g?r.WB:r.WW}e.render=function(d,g,r){const y=t.getOptions(g);let E=i;(y.color.dark.hex==="#ffffff"||y.color.light.hex==="#000000")&&(E=s);const w=d.modules.size,k=d.modules.data;let S="",I=Array(w+y.margin*2+1).join(E.WW);I=Array(y.margin/2+1).join(I+`
`);const L=Array(y.margin+1).join(E.WW);S+=I;for(let D=0;D<w;D+=2){S+=L;for(let O=0;O<w;O++){const V=k[D*w+O],z=k[(D+1)*w+O];S+=c(V,z,E)}S+=L+`
`}return S+=I.slice(0,-1),typeof r=="function"&&r(null,S),S},e.renderToFile=function(g,r,y,E){typeof E>"u"&&(E=y,y=void 0);const w=require$$1__default$5.default,k=e.render(r,y);w.writeFile(g,k,E)}})(utf8);var terminal$1={},terminal={};terminal.render=function(e,t,i){const s=e.modules.size,c=e.modules.data,d="\x1B[40m  \x1B[0m",g="\x1B[47m  \x1B[0m";let r="";const y=Array(s+3).join(g),E=Array(2).join(g);r+=y+`
`;for(let w=0;w<s;++w){r+=g;for(let k=0;k<s;k++)r+=c[w*s+k]?d:g;r+=E+`
`}return r+=y+`
`,typeof i=="function"&&i(null,r),r};var terminalSmall={};const backgroundWhite="\x1B[47m",backgroundBlack="\x1B[40m",foregroundWhite="\x1B[37m",foregroundBlack="\x1B[30m",reset="\x1B[0m",lineSetupNormal=backgroundWhite+foregroundBlack,lineSetupInverse=backgroundBlack+foregroundWhite,createPalette=function(e,t,i){return{"00":reset+" "+e,"01":reset+t+"\u2584"+e,"02":reset+i+"\u2584"+e,10:reset+t+"\u2580"+e,11:" ",12:"\u2584",20:reset+i+"\u2580"+e,21:"\u2580",22:"\u2588"}},mkCodePixel=function(e,t,i,s){const c=t+1;if(i>=c||s>=c||s<-1||i<-1)return"0";if(i>=t||s>=t||s<0||i<0)return"1";const d=s*t+i;return e[d]?"2":"1"},mkCode=function(e,t,i,s){return mkCodePixel(e,t,i,s)+mkCodePixel(e,t,i,s+1)};terminalSmall.render=function(e,t,i){const s=e.modules.size,c=e.modules.data,d=!!(t&&t.inverse),g=t&&t.inverse?lineSetupInverse:lineSetupNormal,E=createPalette(g,d?foregroundBlack:foregroundWhite,d?foregroundWhite:foregroundBlack),w=reset+`
`+g;let k=g;for(let S=-1;S<s+1;S+=2){for(let I=-1;I<s;I++)k+=E[mkCode(c,s,I,S)];k+=E[mkCode(c,s,s,S)]+w}return k+=reset,typeof i=="function"&&i(null,k),k};const big=terminal,small=terminalSmall;terminal$1.render=function(e,t,i){return t&&t.small?small.render(e,t,i):big.render(e,t,i)};var svg={},svgTag={};const Utils=utils;function getColorAttrib(e,t){const i=e.a/255,s=t+'="'+e.hex+'"';return i<1?s+" "+t+'-opacity="'+i.toFixed(2).slice(1)+'"':s}function svgCmd(e,t,i){let s=e+t;return typeof i<"u"&&(s+=" "+i),s}function qrToPath(e,t,i){let s="",c=0,d=!1,g=0;for(let r=0;r<e.length;r++){const y=Math.floor(r%t),E=Math.floor(r/t);!y&&!d&&(d=!0),e[r]?(g++,r>0&&y>0&&e[r-1]||(s+=d?svgCmd("M",y+i,.5+E+i):svgCmd("m",c,0),c=0,d=!1),y+1<t&&e[r+1]||(s+=svgCmd("h",g),g=0)):c++}return s}svgTag.render=function(t,i,s){const c=Utils.getOptions(i),d=t.modules.size,g=t.modules.data,r=d+c.margin*2,y=c.color.light.a?"<path "+getColorAttrib(c.color.light,"fill")+' d="M0 0h'+r+"v"+r+'H0z"/>':"",E="<path "+getColorAttrib(c.color.dark,"stroke")+' d="'+qrToPath(g,d,c.margin)+'"/>',w='viewBox="0 0 '+r+" "+r+'"',k=c.width?'width="'+c.width+'" height="'+c.width+'" ':"",S='<svg xmlns="http://www.w3.org/2000/svg" '+k+w+' shape-rendering="crispEdges">'+y+E+`</svg>
`;return typeof s=="function"&&s(null,S),S};(function(e){const t=svgTag;e.render=t.render,e.renderToFile=function(s,c,d,g){typeof g>"u"&&(g=d,d=void 0);const r=require$$1__default$5.default,y=e.render(c,d),E='<?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'+y;r.writeFile(s,E,g)}})(svg);var browser={},canvas={},hasRequiredCanvas;function requireCanvas(){return hasRequiredCanvas||(hasRequiredCanvas=1,function(e){const t=utils;function i(c,d,g){c.clearRect(0,0,d.width,d.height),d.style||(d.style={}),d.height=g,d.width=g,d.style.height=g+"px",d.style.width=g+"px"}function s(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(d,g,r){let y=r,E=g;typeof y>"u"&&(!g||!g.getContext)&&(y=g,g=void 0),g||(E=s()),y=t.getOptions(y);const w=t.getImageWidth(d.modules.size,y),k=E.getContext("2d"),S=k.createImageData(w,w);return t.qrToImageData(S.data,d,y),i(k,E,w),k.putImageData(S,0,0),E},e.renderToDataURL=function(d,g,r){let y=r;typeof y>"u"&&(!g||!g.getContext)&&(y=g,g=void 0),y||(y={});const E=e.render(d,g,y),w=y.type||"image/png",k=y.rendererOpts||{};return E.toDataURL(w,k.quality)}}(canvas)),canvas}var hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser;hasRequiredBrowser=1;const e=canPromise$1,t=qrcode,i=requireCanvas(),s=svgTag;function c(d,g,r,y,E){const w=[].slice.call(arguments,1),k=w.length,S=typeof w[k-1]=="function";if(!S&&!e())throw new Error("Callback required as last argument");if(S){if(k<2)throw new Error("Too few arguments provided");k===2?(E=r,r=g,g=y=void 0):k===3&&(g.getContext&&typeof E>"u"?(E=y,y=void 0):(E=y,y=r,r=g,g=void 0))}else{if(k<1)throw new Error("Too few arguments provided");return k===1?(r=g,g=y=void 0):k===2&&!g.getContext&&(y=r,r=g,g=void 0),new Promise(function(I,L){try{const D=t.create(r,y);I(d(D,g,y))}catch(D){L(D)}})}try{const I=t.create(r,y);E(null,d(I,g,y))}catch(I){E(I)}}return browser.create=t.create,browser.toCanvas=c.bind(null,i.render),browser.toDataURL=c.bind(null,i.renderToDataURL),browser.toString=c.bind(null,function(d,g,r){return s.render(d,r)}),browser}const canPromise=canPromise$1,QRCode$1=qrcode,PngRenderer=png$1,Utf8Renderer=utf8,TerminalRenderer=terminal$1,SvgRenderer=svg;function checkParams(e,t,i){if(typeof e>"u")throw new Error("String required as first argument");if(typeof i>"u"&&(i=t,t={}),typeof i!="function")if(canPromise())t=i||{},i=null;else throw new Error("Callback required as last argument");return{opts:t,cb:i}}function getTypeFromFilename(e){return e.slice((e.lastIndexOf(".")-1>>>0)+2).toLowerCase()}function getRendererFromType(e){switch(e){case"svg":return SvgRenderer;case"txt":case"utf8":return Utf8Renderer;case"png":case"image/png":default:return PngRenderer}}function getStringRendererFromType(e){switch(e){case"svg":return SvgRenderer;case"terminal":return TerminalRenderer;case"utf8":default:return Utf8Renderer}}function render(e,t,i){if(!i.cb)return new Promise(function(s,c){try{const d=QRCode$1.create(t,i.opts);return e(d,i.opts,function(g,r){return g?c(g):s(r)})}catch(d){c(d)}});try{const s=QRCode$1.create(t,i.opts);return e(s,i.opts,i.cb)}catch(s){i.cb(s)}}server.create=QRCode$1.create;server.toCanvas=requireBrowser().toCanvas;server.toString=function(t,i,s){const c=checkParams(t,i,s),d=c.opts?c.opts.type:void 0,g=getStringRendererFromType(d);return render(g.render,t,c)};server.toDataURL=function(t,i,s){const c=checkParams(t,i,s),d=getRendererFromType(c.opts.type);return render(d.renderToDataURL,t,c)};server.toBuffer=function(t,i,s){const c=checkParams(t,i,s),d=getRendererFromType(c.opts.type);return render(d.renderToBuffer,t,c)};server.toFile=function(t,i,s,c){if(typeof t!="string"||!(typeof i=="string"||typeof i=="object"))throw new Error("Invalid argument");if(arguments.length<3&&!canPromise())throw new Error("Too few arguments provided");const d=checkParams(i,s,c),g=d.opts.type||getTypeFromFilename(t),y=getRendererFromType(g).renderToFile.bind(null,t);return render(y,i,d)};server.toFileStream=function(t,i,s){if(arguments.length<2)throw new Error("Too few arguments provided");const c=checkParams(i,s,t.emit.bind(t,"error")),g=getRendererFromType("png").renderToFileStream.bind(null,t);render(g,i,c)};(function(e){e.exports=server})(lib);const QRCode=getDefaultExportFromCjs(lib.exports);async function renderTextToQRCodeDataURL(e,t){return await QRCode.toDataURL(e,{scale:6,...t})}const baseParams={scrollbars:0,status:0,menubar:0,resizable:2,location:0},paramsToString=(e={})=>Object.keys(e).map(t=>`${t}=${e[t]}`).join(","),openWindow=(e,t={})=>{const{name:i="",closeInterval:s=268,onClose:c,params:d={}}=t,g=Math.round(screen.availWidth/6*2),r=Math.round(screen.availHeight/5*2),y=Math.round((screen.availHeight-r)/2),E=Math.round((screen.availWidth-g)/2),k=paramsToString({...baseParams,...{width:g,height:r,top:y,left:E},...d}),S=window.open(e,i,k);if(S){if(c){const I=setInterval(()=>{S.closed&&(clearInterval(I),c())},s)}return S==null||S.focus(),S}},enableCopyrighter=()=>{window.__isEnabledCopyrighter=!0},disableCopyrighter=()=>{window.__isEnabledCopyrighter=!1},copy=e=>{var t;return disableCopyrighter(),(t=window.navigator.clipboard)==null?void 0:t.writeText(e).finally(()=>{enableCopyrighter()})};var SocialMedia=(e=>(e.Wechat="wechat",e.Weibo="weibo",e.Twitter="twitter",e.douban="douban",e.Evernote="evernote",e.Facebook="facebook",e.LinkedIn="linkedin",e))(SocialMedia||{});const socials=[{id:"wechat",name:"\u5FAE\u4FE1",class:"wechat",handler:async e=>{const t=await renderTextToQRCodeDataURL(e.url);window.$popup.vImage(t)}},{id:"weibo",name:"\u5FAE\u535A",class:"weibo",url:e=>"https://service.weibo.com/share/share.php?"+lib$1.stringify({url:e.url,source:e.url,sourceUrl:e.url,title:e.title,content:e.description})},{id:"twitter",name:"Twitter",class:"twitter",url:e=>"https://twitter.com/share?"+lib$1.stringify({url:e.url,text:e.title})},{id:"facebook",name:"Facebook",class:"facebook",url:e=>"https://www.facebook.com/sharer/sharer.php?"+lib$1.stringify({u:encodeURI(e.url)})},{id:"linkedin",name:"LinkedIn",class:"linkedin",url:e=>"https://www.linkedin.com/sharing/share-offsite/?"+lib$1.stringify({url:e.url})},{id:"douban",name:"\u8C46\u74E3",class:"douban",url:e=>"https://www.douban.com/recommend/?"+lib$1.stringify({url:e.url,title:e.title,v:1})},{id:"evernote",name:"\u5370\u8C61\u7B14\u8BB0",class:"evernote",url:e=>"https://www.evernote.com/clip.action?"+lib$1.stringify({url:e.url,title:e.title})}],_sfc_main$1q=defineComponent({name:"Share",props:{socials:{type:Array,required:!1}},setup(e){const{route:t,gtag:i,i18n:s}=useEnhancer(),c=computed(()=>{var w;return(w=e.socials)!=null&&w.length?socials.filter(k=>{var S;return(S=e.socials)==null?void 0:S.includes(k.id)}):socials}),d=()=>getPageURL(t.fullPath),g=()=>document.title||META.title,r=()=>{var w,k;return((k=(w=document.getElementsByName("description"))==null?void 0:w[0])==null?void 0:k.getAttribute("content"))||s.t(LanguageKey.APP_SLOGAN)};return{enabledSocials:c,copyPageURL:()=>{const w=`${g()} - ${d()}`;copy(w),i==null||i.event("share_copy_url",{event_category:GAEventCategories.Share,event_label:w})},handleShare:w=>{i==null||i.event("share_social",{event_category:GAEventCategories.Share,event_label:w.id});const k={url:d(),title:g(),description:r()};w.handler?w.handler(k):openWindow(w.url(k),{name:`Share: ${META.title}`})}}}}),share_vue_vue_type_style_index_0_scoped_360ff78f_lang="";function _sfc_ssrRender$1q(e,t,i,s,c,d,g,r){t(`<div${ssrRenderAttrs(mergeProps({class:"share"},s))} data-v-360ff78f><!--[-->`),ssrRenderList(e.enabledSocials,(y,E)=>{t(`<button${ssrRenderAttr("title","Share to: "+y.name)} class="${ssrRenderClass([y.class,"share-ejector"])}" data-v-360ff78f><i class="${ssrRenderClass([`icon-${y.class}`,"iconfont"])}" data-v-360ff78f></i></button>`)}),t('<!--]--><button class="share-ejector link" data-v-360ff78f><i class="iconfont icon-link" data-v-360ff78f></i></button></div>')}const _sfc_setup$1q=_sfc_main$1q.setup;_sfc_main$1q.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/widget/share.vue"),_sfc_setup$1q?_sfc_setup$1q(e,t):void 0};const Share=_export_sfc(_sfc_main$1q,[["ssrRender",_sfc_ssrRender$1q],["__scopeId","data-v-360ff78f"]]),EMOJIS=["\u{1F603}","\u{1F602}","\u{1F605}","\u{1F609}","\u{1F60C}","\u{1F614}","\u{1F613}","\u{1F622}","\u{1F60D}","\u{1F618}","\u{1F61C}","\u{1F621}","\u{1F624}","\u{1F62D}","\u{1F631}","\u{1F633}","\u{1F635}","\u{1F31A}","\u{1F64F}","\u{1F446}","\u{1F447}","\u{1F44C}","\u{1F918}","\u{1F44D}","\u{1F44E}","\u{1F4AA}","\u{1F44F}","\u{1F33B}","\u{1F339}","\u{1F48A}","\u{1F436}","\u2764\uFE0F\u200D\u{1F525}","\u{1F494}","\u{1F4A9}","\u{1F47B}","\u{1F6A9}"];var CommentEvents=(e=>(e.Sort="sort",e.Page="page",e.Vote="vote",e.Blossom="blossom",e.Delete="delete",e.Reply="reply",e.CancelReply="cancelReply",e.Submit="submit",e))(CommentEvents||{});const getDisqusUserURL=e=>`https://disqus.com/by/${e}/`,HAHA_KEYWORDS=["2333","haha","\u54C8\u54C8"],SIX_KEYWORDS=["666","\u8D5E","\u68D2","\u4F18\u79C0"],HEHE_KEYWORDS=["\u5475\u5475"],luanchEmojiRain=e=>{const t=window.$luanchEmojiRain;HAHA_KEYWORDS.find(i=>e.includes(i))?t({speed:12,staggered:!0,increaseSpeed:.4,emoji:getTargetCDNURL("/images/emojis/haha.png")}):SIX_KEYWORDS.find(i=>e.includes(i))?t({speed:12,staggered:!0,increaseSpeed:.4,emoji:getTargetCDNURL("/images/emojis/666.png")}):HEHE_KEYWORDS.find(i=>e.includes(i))?t({staggered:!1,speed:8,increaseSpeed:.04,emoji:getTargetCDNURL("/images/emojis/hehe.png")}):Math.random()<=.5&&t({scale:.6,staggered:!0,speed:8,increaseSpeed:.04,emoji:getTargetCDNURL("/images/emojis/doge.png")})},_sfc_main$1p=defineComponent({name:"CommentTopbar",props:{postId:{type:Number,required:!0},sort:{type:Number,required:!0},total:{type:Number,default:0,required:!1},loaded:{type:Number,default:0,required:!1},fetching:{type:Boolean,required:!0},loading:{type:Boolean,required:!0},plain:{type:Boolean,default:!1}},emits:[CommentEvents.Sort],setup(e,t){const{gtag:i}=useEnhancer(),s=useIdentityStore(),c=computed(()=>s.user),d=computed(()=>e.loading?"\xB7\xB7\xB7":`${e.loaded} / ${e.total}`),g=new Map;return{user:c,statisticsText:d,VALUABLE_LINKS,LanguageKey,UserType,SortType,handleSort:S=>{i==null||i.event("comment_sort_switch",{event_category:GAEventCategories.Comment});const I=Number(S==null?void 0:S.value);I!==e.sort&&t.emit(CommentEvents.Sort,I)},handleDisqusLogin:()=>{i==null||i.event("disqus_login",{event_category:GAEventCategories.Comment,event_label:`id: ${e.postId}`}),openWindow(s.disqusConfig.authorize_url,{name:`Disqus Auth ${META.title}`,onClose:()=>{s.fetchDisqusUserInfo(),console.info("[disqus]","logined",s.user)}})},handleDisqusLogout:()=>{i==null||i.event("disqus_logout",{event_category:GAEventCategories.Comment,event_label:`id: ${e.postId}`}),console.log("[disqus]","logout"),s.fetchDisqusLogout()},handleDisqusThread:async()=>{if(i==null||i.event("disqus_thread_page",{event_category:GAEventCategories.Comment,event_label:`id: ${e.postId}`}),!g.has(e.postId)){const L=await nodepress$1.get("/disqus/thread",{params:{post_id:e.postId}});g.set(e.postId,L.result)}const S=s.disqusConfig.forum,I=g.get(e.postId).slug;window.open(`https://disqus.com/home/discussion/${S}/${I}/`)},handleClearLocalProfile:()=>{s.removeLocalUser()}}}}),topbar_vue_vue_type_style_index_0_scoped_d657e1f0_lang="";function _sfc_ssrRender$1p(e,t,i,s,c,d,g,r){const y=resolveComponent("placeholder"),E=resolveComponent("skeleton-line"),w=resolveComponent("i18n"),k=resolveComponent("divider"),S=resolveComponent("ulink");t(ssrRenderComponent(y,mergeProps({loading:e.fetching},s),{loading:withCtx((I,L,D,O)=>{if(L)L(`<div class="topbar-skeleton" data-v-d657e1f0${O}><div class="left" data-v-d657e1f0${O}>`),L(ssrRenderComponent(E,{class:"skeleton-item count"},null,D,O)),e.plain?L("<!---->"):L(ssrRenderComponent(E,{class:"skeleton-item sort"},null,D,O)),L(`</div><div class="right" data-v-d657e1f0${O}>`),L(ssrRenderComponent(E,{class:"skeleton-item user"},null,D,O)),L("</div></div>");else return[createVNode("div",{class:"topbar-skeleton",key:"skeleton"},[createVNode("div",{class:"left"},[createVNode(E,{class:"skeleton-item count"}),e.plain?createCommentVNode("",!0):(openBlock(),createBlock(E,{key:0,class:"skeleton-item sort"}))]),createVNode("div",{class:"right"},[createVNode(E,{class:"skeleton-item user"})])])]}),default:withCtx((I,L,D,O)=>{var V,z,U,Z;if(L)L(`<div class="${ssrRenderClass([{plain:e.plain},"topbar"])}" data-v-d657e1f0${O}><div class="statistics" data-v-d657e1f0${O}><div class="${ssrRenderClass([{loading:e.loading},"total"])}" data-v-d657e1f0${O}><i class="iconfont icon-discussion" data-v-d657e1f0${O}></i>`),L(ssrRenderComponent(w,null,{zh:withCtx((W,ne,re,ie)=>{if(ne)ne(` \u5171 <span class="count" data-v-d657e1f0${ie}>${ssrInterpolate(e.statisticsText)}</span> \u6761\u770B\u6CD5 `);else return[createTextVNode(" \u5171 "),createVNode("span",{class:"count"},toDisplayString(e.statisticsText),1),createTextVNode(" \u6761\u770B\u6CD5 ")]}),en:withCtx((W,ne,re,ie)=>{if(ne)ne(`<span class="count" data-v-d657e1f0${ie}>${ssrInterpolate(e.statisticsText)}</span> comments `);else return[createVNode("span",{class:"count"},toDisplayString(e.statisticsText),1),createTextVNode(" comments ")]}),_:1},D,O)),L(`</div><select class="sort" name="sort"${ssrRenderAttr("value",e.sort)} data-v-d657e1f0${O}><option${ssrRenderAttr("value",e.SortType.Desc)} data-v-d657e1f0${O}>`),L(ssrRenderComponent(w,{k:e.LanguageKey.COMMENT_SORT_NEW},null,D,O)),L(`</option><option${ssrRenderAttr("value",e.SortType.Hottest)} data-v-d657e1f0${O}>`),L(ssrRenderComponent(w,{k:e.LanguageKey.COMMENT_SORT_HOT},null,D,O)),L(`</option><option${ssrRenderAttr("value",e.SortType.Asc)} data-v-d657e1f0${O}>`),L(ssrRenderComponent(w,{k:e.LanguageKey.COMMENT_SORT_OLD},null,D,O)),L(`</option></select><button class="disqus" data-v-d657e1f0${O}><i class="iconfont icon-disqus-logo" data-v-d657e1f0${O}></i></button></div><div class="user" data-v-d657e1f0${O}>`),e.user.type===e.UserType.Null?(L(`<div class="unlogin" data-v-d657e1f0${O}><span class="guest" data-v-d657e1f0${O}>`),L(ssrRenderComponent(w,{zh:"\u8BBF\u5BA2\u8EAB\u4EFD",en:"Guest"},null,D,O)),L("</span>"),L(ssrRenderComponent(k,{type:"vertical",size:"sm"},null,D,O)),L(`<button class="disqus" data-v-d657e1f0${O}>`),L(ssrRenderComponent(w,null,{zh:withCtx((W,ne,re,ie)=>{if(ne)ne(`\u4F7F\u7528<i class="iconfont icon-disqus" data-v-d657e1f0${ie}></i>\u767B\u5F55`);else return[createTextVNode("\u4F7F\u7528"),createVNode("i",{class:"iconfont icon-disqus"}),createTextVNode("\u767B\u5F55")]}),en:withCtx((W,ne,re,ie)=>{if(ne)ne(`Login by<i class="iconfont icon-disqus right" data-v-d657e1f0${ie}></i>`);else return[createTextVNode("Login by"),createVNode("i",{class:"iconfont icon-disqus right"})]}),_:1},D,O)),L("</button></div>")):(L(`<div class="logined" data-v-d657e1f0${O}>`),e.user.type===e.UserType.Local?(L(`<!--[--><div class="name" data-v-d657e1f0${O}><i class="icon guest iconfont icon-user" data-v-d657e1f0${O}></i><span class="text" data-v-d657e1f0${O}>${ssrInterpolate(((V=e.user.localProfile)==null?void 0:V.name)||"")}</span><i class="arrow iconfont icon-down-arrow" data-v-d657e1f0${O}></i></div><div class="user-menu" data-v-d657e1f0${O}><ul class="menus" data-v-d657e1f0${O}><li class="item" data-v-d657e1f0${O}><button class="button" data-v-d657e1f0${O}>`),L(ssrRenderComponent(w,null,{zh:withCtx((W,ne,re,ie)=>{if(ne)ne(`\u6362\u4E3A<i class="iconfont icon-disqus disqus" data-v-d657e1f0${ie}></i>\u767B\u5F55`);else return[createTextVNode("\u6362\u4E3A"),createVNode("i",{class:"iconfont icon-disqus disqus"}),createTextVNode("\u767B\u5F55")]}),en:withCtx((W,ne,re,ie)=>{if(ne)ne(`Login by <i class="iconfont icon-disqus disqus" data-v-d657e1f0${ie}></i>`);else return[createTextVNode("Login by "),createVNode("i",{class:"iconfont icon-disqus disqus"})]}),_:1},D,O)),L(`</button></li><li class="item" data-v-d657e1f0${O}><button class="button" data-v-d657e1f0${O}>`),L(ssrRenderComponent(w,{zh:"\u9000\u51FA\u672C\u5730\u8BBF\u5BA2\u8EAB\u4EFD",en:"Clean local profile"},null,D,O)),L("</button></li></ul></div><!--]-->")):e.user.type===e.UserType.Disqus?(L(`<!--[--><div class="name" data-v-d657e1f0${O}><i class="icon disqus iconfont icon-disqus-logo" data-v-d657e1f0${O}></i><span class="text" data-v-d657e1f0${O}>${ssrInterpolate(((z=e.user.disqusProfile)==null?void 0:z.name)||"")}</span><i class="arrow iconfont icon-down-arrow" data-v-d657e1f0${O}></i></div><div class="user-menu" data-v-d657e1f0${O}><ul class="menus" data-v-d657e1f0${O}><li class="item" data-v-d657e1f0${O}>`),L(ssrRenderComponent(S,{class:"button",href:e.user.disqusProfile.profileUrl},{default:withCtx((W,ne,re,ie)=>{if(ne)ne(ssrRenderComponent(w,{zh:"\u8BBF\u95EE Disqus \u4E3B\u9875",en:"Disqus profile"},null,re,ie));else return[createVNode(w,{zh:"\u8BBF\u95EE Disqus \u4E3B\u9875",en:"Disqus profile"})]}),_:1},D,O)),L(`</li><li class="item" data-v-d657e1f0${O}><button class="button" data-v-d657e1f0${O}>`),L(ssrRenderComponent(w,{zh:"\u6CE8\u9500\u6388\u6743\u8EAB\u4EFD",en:"Disqus logout"},null,D,O)),L("</button></li></ul></div><!--]-->")):L("<!---->"),L("</div>")),L("</div></div>");else return[createVNode("div",{class:["topbar",{plain:e.plain}],key:"element"},[createVNode("div",{class:"statistics"},[createVNode("div",{class:["total",{loading:e.loading}]},[createVNode("i",{class:"iconfont icon-discussion"}),createVNode(w,null,{zh:withCtx(()=>[createTextVNode(" \u5171 "),createVNode("span",{class:"count"},toDisplayString(e.statisticsText),1),createTextVNode(" \u6761\u770B\u6CD5 ")]),en:withCtx(()=>[createVNode("span",{class:"count"},toDisplayString(e.statisticsText),1),createTextVNode(" comments ")]),_:1})],2),createVNode("select",{class:"sort",name:"sort",value:e.sort,onChange:W=>e.handleSort(W.target)},[createVNode("option",{value:e.SortType.Desc},[createVNode(w,{k:e.LanguageKey.COMMENT_SORT_NEW},null,8,["k"])],8,["value"]),createVNode("option",{value:e.SortType.Hottest},[createVNode(w,{k:e.LanguageKey.COMMENT_SORT_HOT},null,8,["k"])],8,["value"]),createVNode("option",{value:e.SortType.Asc},[createVNode(w,{k:e.LanguageKey.COMMENT_SORT_OLD},null,8,["k"])],8,["value"])],40,["value","onChange"]),createVNode("button",{class:"disqus",onClick:e.handleDisqusThread},[createVNode("i",{class:"iconfont icon-disqus-logo"})],8,["onClick"])]),createVNode("div",{class:"user"},[e.user.type===e.UserType.Null?(openBlock(),createBlock("div",{key:0,class:"unlogin"},[createVNode("span",{class:"guest"},[createVNode(w,{zh:"\u8BBF\u5BA2\u8EAB\u4EFD",en:"Guest"})]),createVNode(k,{type:"vertical",size:"sm"}),createVNode("button",{class:"disqus",onClick:e.handleDisqusLogin},[createVNode(w,null,{zh:withCtx(()=>[createTextVNode("\u4F7F\u7528"),createVNode("i",{class:"iconfont icon-disqus"}),createTextVNode("\u767B\u5F55")]),en:withCtx(()=>[createTextVNode("Login by"),createVNode("i",{class:"iconfont icon-disqus right"})]),_:1})],8,["onClick"])])):(openBlock(),createBlock("div",{key:1,class:"logined"},[e.user.type===e.UserType.Local?(openBlock(),createBlock(Fragment,{key:0},[createVNode("div",{class:"name"},[createVNode("i",{class:"icon guest iconfont icon-user"}),createVNode("span",{class:"text"},toDisplayString(((U=e.user.localProfile)==null?void 0:U.name)||""),1),createVNode("i",{class:"arrow iconfont icon-down-arrow"})]),createVNode("div",{class:"user-menu"},[createVNode("ul",{class:"menus"},[createVNode("li",{class:"item"},[createVNode("button",{class:"button",onClick:e.handleDisqusLogin},[createVNode(w,null,{zh:withCtx(()=>[createTextVNode("\u6362\u4E3A"),createVNode("i",{class:"iconfont icon-disqus disqus"}),createTextVNode("\u767B\u5F55")]),en:withCtx(()=>[createTextVNode("Login by "),createVNode("i",{class:"iconfont icon-disqus disqus"})]),_:1})],8,["onClick"])]),createVNode("li",{class:"item"},[createVNode("button",{class:"button",onClick:e.handleClearLocalProfile},[createVNode(w,{zh:"\u9000\u51FA\u672C\u5730\u8BBF\u5BA2\u8EAB\u4EFD",en:"Clean local profile"})],8,["onClick"])])])])],64)):e.user.type===e.UserType.Disqus?(openBlock(),createBlock(Fragment,{key:1},[createVNode("div",{class:"name"},[createVNode("i",{class:"icon disqus iconfont icon-disqus-logo"}),createVNode("span",{class:"text"},toDisplayString(((Z=e.user.disqusProfile)==null?void 0:Z.name)||""),1),createVNode("i",{class:"arrow iconfont icon-down-arrow"})]),createVNode("div",{class:"user-menu"},[createVNode("ul",{class:"menus"},[createVNode("li",{class:"item"},[createVNode(S,{class:"button",href:e.user.disqusProfile.profileUrl},{default:withCtx(()=>[createVNode(w,{zh:"\u8BBF\u95EE Disqus \u4E3B\u9875",en:"Disqus profile"})]),_:1},8,["href"])]),createVNode("li",{class:"item"},[createVNode("button",{class:"button",onClick:e.handleDisqusLogout},[createVNode(w,{zh:"\u6CE8\u9500\u6388\u6743\u8EAB\u4EFD",en:"Disqus logout"})],8,["onClick"])])])])],64)):createCommentVNode("",!0)]))])],2)]}),_:1},i))}const _sfc_setup$1p=_sfc_main$1p.setup;_sfc_main$1p.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/comment/topbar.vue"),_sfc_setup$1p?_sfc_setup$1p(e,t):void 0};const CommentTopbar=_export_sfc(_sfc_main$1p,[["ssrRender",_sfc_ssrRender$1p],["__scopeId","data-v-d657e1f0"]]),_sfc_main$1o=defineComponent({name:"CommentMain",props:{fetching:{type:Boolean,default:!1},hasData:{type:Boolean,required:!0},skeletonCount:{type:Number,default:6}},setup(){return{LanguageKey}}}),main_vue_vue_type_style_index_0_scoped_31048f20_lang="";function _sfc_ssrRender$1o(e,t,i,s,c,d,g,r){const y=resolveComponent("placeholder"),E=resolveComponent("skeleton-base"),w=resolveComponent("skeleton-paragraph"),k=resolveComponent("i18n");t(ssrRenderComponent(y,mergeProps({loading:e.fetching,data:e.hasData},s),{loading:withCtx((S,I,L,D)=>{if(I)I(`<ul class="main-skeleton" data-v-31048f20${D}><!--[-->`),ssrRenderList(e.skeletonCount,O=>{I(`<li class="item" data-v-31048f20${D}><div class="avatar" data-v-31048f20${D}>`),I(ssrRenderComponent(E,null,null,L,D)),I(`</div><div class="content" data-v-31048f20${D}>`),I(ssrRenderComponent(w,{lines:4},null,L,D)),I("</div></li>")}),I("<!--]--></ul>");else return[createVNode("ul",{class:"main-skeleton"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.skeletonCount,O=>(openBlock(),createBlock("li",{key:O,class:"item"},[createVNode("div",{class:"avatar"},[createVNode(E)]),createVNode("div",{class:"content"},[createVNode(w,{lines:4})])]))),128))])]}),placeholder:withCtx((S,I,L,D)=>{if(I)I(`<div class="list-empty" data-v-31048f20${D}>`),I(ssrRenderComponent(k,{k:e.LanguageKey.COMMENT_LIST_EMPTY},null,L,D)),I("</div>");else return[createVNode("div",{class:"list-empty"},[createVNode(k,{k:e.LanguageKey.COMMENT_LIST_EMPTY},null,8,["k"])])]}),default:withCtx((S,I,L,D)=>{if(I)I(`<div class="main" data-v-31048f20${D}>`),ssrRenderSlot(e.$slots,"list",{},null,I,L,D),ssrRenderSlot(e.$slots,"pagination",{},null,I,L,D),I("</div>");else return[createVNode("div",{class:"main"},[renderSlot(e.$slots,"list",{},void 0,!0),renderSlot(e.$slots,"pagination",{},void 0,!0)])]}),_:3},i))}const _sfc_setup$1o=_sfc_main$1o.setup;_sfc_main$1o.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/comment/list/main.vue"),_sfc_setup$1o?_sfc_setup$1o(e,t):void 0};const CommentMain=_export_sfc(_sfc_main$1o,[["ssrRender",_sfc_ssrRender$1o],["__scopeId","data-v-31048f20"]]),getDefaultAvatar=()=>getTargetCDNURL("/images/gravatar.png"),getGravatarByHash=e=>{if(!e)return getDefaultAvatar();const t=`https://www.gravatar.com/avatar/${e}`;return isDev?t:getTargetProxyURL(t,ProxyModule.Default)},getDisqusAvatarByUsername=e=>{const t=`https://disqus.com/api/users/avatars/${e}.jpg`;return isSPA?t:getTargetProxyURL(t,ProxyModule.Disqus)},_sfc_main$1n=defineComponent({name:"Markdown",props:{markdown:String,html:String,tagMap:Object,relink:{type:Boolean,default:!1},sanitize:{type:Boolean,default:!1},plain:{type:Boolean,default:!1},compact:{type:Boolean,default:!1}},setup(e){const{isDarkTheme:t}=useEnhancer(),{element:i}=useLozad(),s=computed(()=>e.markdown?markdownToHTML(e.markdown,{sanitize:e.sanitize,relink:e.relink,tagMap:e.tagMap}):e.html||"");return{element:i,isDarkTheme:t,markdownHTML:s}}}),markdown_vue_vue_type_style_index_0_lang="";function _sfc_ssrRender$1n(e,t,i,s,c,d,g,r){t(`<section${ssrRenderAttrs(mergeProps({ref:"element",class:[e.plain?"global-markdown-plain":"global-markdown-html",{compact:e.compact,dark:e.isDarkTheme}]},s))}>${e.markdownHTML}</section>`)}const _sfc_setup$1n=_sfc_main$1n.setup;_sfc_main$1n.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/common/markdown.vue"),_sfc_setup$1n?_sfc_setup$1n(e,t):void 0};const Markdown=_export_sfc(_sfc_main$1n,[["ssrRender",_sfc_ssrRender$1n]]),_sfc_main$1m=defineComponent({name:"CommentItemLink",props:{href:String}});function _sfc_ssrRender$1m(e,t,i,s,c,d,g,r){e.href?(t(`<a${ssrRenderAttrs(mergeProps({target:"_blank",rel:"external nofollow noopener",href:e.href},e.$attrs,s))}>`),ssrRenderSlot(e.$slots,"default",{},null,t,i),t("</a>")):(t(`<span${ssrRenderAttrs(mergeProps(e.$attrs,s))}>`),ssrRenderSlot(e.$slots,"default",{},null,t,i),t("</span>"))}const _sfc_setup$1m=_sfc_main$1m.setup;_sfc_main$1m.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/comment/list/link.vue"),_sfc_setup$1m?_sfc_setup$1m(e,t):void 0};const CommentLink=_export_sfc(_sfc_main$1m,[["ssrRender",_sfc_ssrRender$1m]]),OFFSET=127397,countryCodeToEmoji=e=>e.toUpperCase().replace(/./g,t=>String.fromCodePoint(t.charCodeAt(0)+OFFSET)),municipalitys=["Shanghai","Beijing","Tianjin","Chongqing","Chungking"],_sfc_main$1l=defineComponent({name:"CommentItemLocation",props:{location:{type:Object,required:!0}},setup(e){const t=computed(()=>e.location.country_code||e.location.country),i=computed(()=>countryCodeToEmoji(e.location.country_code)),s=computed(()=>e.location.country_code==="CN"&&municipalitys.includes(e.location.region)?e.location.region:e.location.city);return{emojiText:i,countryText:t,cityText:s}}}),location_vue_vue_type_style_index_0_scoped_546f45d5_lang="";function _sfc_ssrRender$1l(e,t,i,s,c,d,g,r){t(`<span${ssrRenderAttrs(mergeProps({class:"location"},s))} data-v-546f45d5>`),e.emojiText?t(`<span class="emoji" data-v-546f45d5>${ssrInterpolate(e.emojiText)}</span>`):t('<i class="iconfont icon-earth" data-v-546f45d5></i>'),t(`<span data-v-546f45d5>${ssrInterpolate(e.countryText)}</span><span class="separator" data-v-546f45d5>\u2022</span><span class="city" data-v-546f45d5>${ssrInterpolate(e.cityText)}</span></span>`)}const _sfc_setup$1l=_sfc_main$1l.setup;_sfc_main$1l.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/comment/list/location.vue"),_sfc_setup$1l?_sfc_setup$1l(e,t):void 0};const CommentLocation=_export_sfc(_sfc_main$1l,[["ssrRender",_sfc_ssrRender$1l],["__scopeId","data-v-546f45d5"]]),osIconsNameMap={"Mac OS":"icon-apple",Windows:"icon-windows",Android:"icon-android",Ubuntu:"icon-ubuntu",Linux:"icon-linux",iOS:"icon-apple"},browersIconsNameMap={Chrome:"icon-chrome",Chromium:"icon-chrome",WeChat:"icon-wechat",QQ:"icon-qq",Safari:"icon-safari","Mobile Safari":"icon-safari",UCBrowser:"icon-uc",Maxthon:"icon-maxthon",Firefox:"icon-firefox",IE:"icon-ie",Opera:"icon-opera",Edge:"icon-edge"},_sfc_main$1k=defineComponent({name:"CommentItemUserAgent",props:{userAgent:{type:String,required:!0}},setup(e){const t=computed(()=>uaParser(e.userAgent)),i=computed(()=>{const c=t.value.result.os.name;return c&&osIconsNameMap[c]}),s=computed(()=>{const c=t.value.result.browser.name;return c?browersIconsNameMap[c]:null});return{uaResult:t,osIconName:i,browserIconName:s}}}),userAgent_vue_vue_type_style_index_0_scoped_e19c7474_lang="";function _sfc_ssrRender$1k(e,t,i,s,c,d,g,r){t(`<span${ssrRenderAttrs(mergeProps({class:"user-agent"},s))} data-v-e19c7474><span class="os" data-v-e19c7474>`),e.osIconName?t(`<i class="${ssrRenderClass([e.osIconName,"iconfont"])}" data-v-e19c7474></i>`):t("<!---->"),t(`<span data-v-e19c7474>${ssrInterpolate(e.uaResult.result.os.name)}</span></span><span class="browser" data-v-e19c7474>`),e.browserIconName?t(`<i class="${ssrRenderClass([e.browserIconName,"iconfont"])}" data-v-e19c7474></i>`):t("<!---->"),t(`<span data-v-e19c7474>${ssrInterpolate(e.uaResult.result.browser.name)}</span></span></span>`)}const _sfc_setup$1k=_sfc_main$1k.setup;_sfc_main$1k.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/comment/list/user-agent.vue"),_sfc_setup$1k?_sfc_setup$1k(e,t):void 0};const CommentUserAgent=_export_sfc(_sfc_main$1k,[["ssrRender",_sfc_ssrRender$1k],["__scopeId","data-v-e19c7474"]]),_sfc_main$1j=defineComponent({name:"CommentItem",components:{Markdown,CommentLink,CommentLocation,CommentUserAgent},props:{comment:{type:Object,required:!0},liked:{type:Boolean,default:!1},disliked:{type:Boolean,default:!1},isReply:{type:Boolean,default:!1},isChild:{type:Boolean,default:!1},hasChild:{type:Boolean,default:!1},hiddenAvatar:{type:Boolean,default:!1},hiddenUa:{type:Boolean,default:!1},plainVote:{type:Boolean,default:!1}},emits:[CommentEvents.Vote,CommentEvents.Delete,CommentEvents.Reply,CommentEvents.CancelReply],setup(e,t){const{i18n:i}=useEnhancer(),s=useCommentStore(),c=useIdentityStore(),d=computed(()=>s.deleting),g=computed(()=>getExtendValue(e.comment.extends,"disqus-author-id")),r=computed(()=>getExtendValue(e.comment.extends,"disqus-author-username")),y=computed(()=>Boolean(g.value)),E=computed(()=>Boolean(r.value)&&Boolean(c.disqusConfig)&&r.value===c.disqusConfig.admin_username),w=computed(()=>r.value?getDisqusAvatarByUsername(r.value):getGravatarByHash(e.comment.author.email_hash)),k=computed(()=>e.comment.author.site?e.comment.author.site:r.value?getDisqusUserURL(r.value):UNDEFINED),S=computed(()=>{var U;return c.user.type===UserType.Disqus&&g.value?((U=c.user.disqusProfile)==null?void 0:U.id)===g.value:!1});return{LanguageKey,isDeleting:d,isDisqusAuthor:y,isAdminAuthor:E,isDeleteable:S,authorAvatar:w,authorURL:k,getCommentItemElementID,getReplyParentCommentText:U=>{var re;const Z=(re=s.comments.find(ie=>ie.id===U))==null?void 0:re.author.name,W=Z?`@${Z}`:"";return`${`#${U}`} ${W}`},firstUpperCase,handleVote:U=>{t.emit(CommentEvents.Vote,e.comment.id,U)},handleDelete:()=>{window.confirm(i.t(LanguageKey.COMMENT_DELETE_CONFIRM))&&t.emit(CommentEvents.Delete,e.comment.id)},handleReply:()=>{t.emit(CommentEvents.Reply,e.comment.id)},handleCancelReply:()=>{t.emit(CommentEvents.CancelReply,e.comment.id)},scrollToCommentItem:U=>{scrollToAnchor(getCommentItemElementID(U),-300)}}}}),item_vue_vue_type_style_index_0_scoped_16681e28_lang="";function _sfc_ssrRender$1j(e,t,i,s,c,d,g,r){const y=resolveComponent("comment-link"),E=resolveComponent("i18n"),w=resolveComponent("comment-location"),k=resolveComponent("comment-user-agent"),S=resolveComponent("markdown"),I=resolveComponent("udate");t(`<li${ssrRenderAttrs(mergeProps({class:["comment-item",{"hide-avatar":e.hiddenAvatar,"is-child":e.isChild,"has-child":e.hasChild}],key:e.comment.id,id:e.getCommentItemElementID(e.comment.id)},s))} data-v-16681e28><div data-v-16681e28>`),e.hiddenAvatar?t("<!---->"):(t('<div class="cm-avatar" data-v-16681e28>'),t(ssrRenderComponent(y,{class:"link",href:e.authorURL},{default:withCtx((L,D,O,V)=>{if(D)D(`<img${ssrRenderAttr("src",e.authorAvatar)}${ssrRenderAttr("alt",e.comment.author.name)} draggable="false" data-v-16681e28${V}><span class="${ssrRenderClass([e.isDisqusAuthor?"disqus":"anonymous","role"])}" data-v-16681e28${V}>`),e.isDisqusAuthor?D(`<i class="iconfont icon-disqus-logo" data-v-16681e28${V}></i>`):D(`<i class="iconfont icon-user" data-v-16681e28${V}></i>`),D("</span>");else return[createVNode("img",{src:e.authorAvatar,alt:e.comment.author.name,draggable:"false"},null,8,["src","alt"]),createVNode("span",{class:["role",e.isDisqusAuthor?"disqus":"anonymous"]},[e.isDisqusAuthor?(openBlock(),createBlock("i",{key:0,class:"iconfont icon-disqus-logo"})):(openBlock(),createBlock("i",{key:1,class:"iconfont icon-user"}))],2)]}),_:1},i)),t("</div>")),t('<div class="cm-body" data-v-16681e28><div class="cm-header" data-v-16681e28><div class="left" data-v-16681e28>'),t(ssrRenderComponent(y,{class:["username",{url:Boolean(e.authorURL)}],href:e.authorURL},{default:withCtx((L,D,O,V)=>{if(D)D(`${ssrInterpolate(e.firstUpperCase(e.comment.author.name))}`);else return[createTextVNode(toDisplayString(e.firstUpperCase(e.comment.author.name)),1)]}),_:1},i)),e.isAdminAuthor?(t('<span class="moderator" data-v-16681e28>'),t(ssrRenderComponent(E,{k:e.LanguageKey.COMMENT_MODERATOR},null,i)),t("</span>")):t("<!---->"),t('<span class="author-info" data-v-16681e28>'),e.comment.ip_location?t(ssrRenderComponent(w,{location:e.comment.ip_location},null,i)):t("<!---->"),e.comment.agent&&!e.hiddenUa?t(ssrRenderComponent(k,{"user-agent":e.comment.agent},null,i)):t("<!---->"),t(`</span></div><div class="right" data-v-16681e28><span class="flool" data-v-16681e28>#${ssrInterpolate(e.comment.id)}</span></div></div><div class="cm-content" data-v-16681e28>`),e.comment.pid?(t('<p class="reply" data-v-16681e28><span class="text" data-v-16681e28>'),t(ssrRenderComponent(E,{k:e.LanguageKey.COMMENT_REPLY},null,i)),t(`</span><button class="parent" data-v-16681e28>${ssrInterpolate(e.getReplyParentCommentText(e.comment.pid))}</button>`),t(ssrRenderComponent(E,{zh:"\uFF1A",en:":"},null,i)),t("</p>")):t("<!---->"),t('<div class="markdown" data-v-16681e28>'),t(ssrRenderComponent(S,{markdown:e.comment.content,sanitize:!0,compact:!0},null,i)),t('</div></div><div class="cm-footer" data-v-16681e28><div class="left" data-v-16681e28><span class="create_at" data-v-16681e28>'),t(ssrRenderComponent(I,{to:"ago",date:e.comment.create_at},null,i)),t(`</span><button class="${ssrRenderClass([{actived:e.liked,alived:Boolean(e.comment.likes)},"vote"])}"${includeBooleanAttr(e.liked)?" disabled":""} data-v-16681e28><i class="iconfont icon-like" data-v-16681e28></i>`),e.plainVote?t("<!---->"):t(ssrRenderComponent(E,{k:e.LanguageKey.COMMENT_UPVOTE},null,i)),t(`<span class="count" data-v-16681e28>(${ssrInterpolate(e.comment.likes)})</span></button><button class="${ssrRenderClass([{actived:e.disliked,alived:Boolean(e.comment.dislikes)},"vote"])}"${includeBooleanAttr(e.disliked)?" disabled":""} data-v-16681e28><i class="iconfont icon-dislike" data-v-16681e28></i>`),e.plainVote?t("<!---->"):t(ssrRenderComponent(E,{k:e.LanguageKey.COMMENT_DOWNVOTE},null,i)),t(`<span class="count" data-v-16681e28>(${ssrInterpolate(e.comment.dislikes)})</span></button>`),e.isReply?(t('<button class="reply" data-v-16681e28><i class="iconfont icon-cancel" data-v-16681e28></i>'),t(ssrRenderComponent(E,{k:e.LanguageKey.COMMENT_REPLY_CANCEL},null,i)),t("</button>")):(t('<button class="reply" data-v-16681e28><i class="iconfont icon-reply" data-v-16681e28></i>'),t(ssrRenderComponent(E,{k:e.LanguageKey.COMMENT_REPLY},null,i)),t("</button>")),t('</div><div class="right" data-v-16681e28>'),e.isDeleteable?(t(`<button class="delete"${includeBooleanAttr(e.isDeleting)?" disabled":""} data-v-16681e28><i class="iconfont icon-delete" data-v-16681e28></i>`),t(ssrRenderComponent(E,{k:e.LanguageKey.COMMENT_DELETE},null,i)),t("</button>")):t("<!---->"),t("</div></div>"),e.isReply?(t('<div class="cm-reply" data-v-16681e28>'),ssrRenderSlot(e.$slots,"reply",{},null,t,i),t("</div>")):t("<!---->"),t('<div class="cm-children" data-v-16681e28>'),ssrRenderSlot(e.$slots,"children",{},null,t,i),t("</div></div></div></li>")}const _sfc_setup$1j=_sfc_main$1j.setup;_sfc_main$1j.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/comment/list/item.vue"),_sfc_setup$1j?_sfc_setup$1j(e,t):void 0};const CommentItem=_export_sfc(_sfc_main$1j,[["ssrRender",_sfc_ssrRender$1j],["__scopeId","data-v-16681e28"]]),_sfc_main$1i=defineComponent({name:"CommentList",components:{CommentItem},props:{comments:{type:Array,required:!0},replyPid:{type:Number,required:!0},isChildList:{type:Boolean,default:!1},hiddenAvatar:{type:Boolean,default:!1},hiddenUa:{type:Boolean,default:!1},plainVote:{type:Boolean,required:!1}},emits:[CommentEvents.Reply,CommentEvents.Delete,CommentEvents.CancelReply],setup(e,t){const{i18n:i,gtag:s}=useEnhancer(),{comment:c,identity:d}=useStores(),g=k=>{t.emit(CommentEvents.Reply,k)},r=k=>{t.emit(CommentEvents.CancelReply,k)},y=async k=>{t.emit(CommentEvents.Delete,k)},E=async(k,S)=>{if(s==null||s.event("vote_comment",{event_category:GAEventCategories.Comment,event_label:S?"like":"dislike"}),S&&d.isLikedComment(k)||!S&&d.isDislikedComment(k))return!1;try{await c.postCommentVote(k,S?1:-1),S?d.likeComment(k):d.dislikeComment(k)}catch(I){const L=i.t(LanguageKey.POST_ACTION_ERROR);console.warn(L,I),alert(L)}},w=k=>k.map(S=>({comment:S,children:[]}));return{isLikedComment:d.isLikedComment,isDislikedComment:d.isDislikedComment,handleVoteComment:E,handleDeleteComment:y,handleReplyComment:g,handleCancelReply:r,buildeCommentTree:w}}}),list_vue_vue_type_style_index_0_scoped_d3edbdab_lang="";function _sfc_ssrRender$1i(e,t,i,s,c,d,g,r){const y=resolveComponent("comment-item"),E=resolveComponent("comment-list");t(`<ul${ssrRenderAttrs(mergeProps({class:["comment-list",e.isChildList?"child":"root"]},s))} data-v-d3edbdab><!--[-->`),ssrRenderList(e.comments,w=>{t(ssrRenderComponent(y,{key:w.comment.id,comment:w.comment,liked:e.isLikedComment(w.comment.id),disliked:e.isDislikedComment(w.comment.id),"has-child":Boolean(w.children.length),"is-child":e.isChildList,"is-reply":e.replyPid===w.comment.id,"hidden-avatar":e.hiddenAvatar,"hidden-ua":e.hiddenUa,"plain-vote":e.plainVote,onVote:e.handleVoteComment,onDelete:e.handleDeleteComment,onReply:e.handleReplyComment,onCancelReply:e.handleCancelReply},createSlots({reply:withCtx((k,S,I,L)=>{if(S)ssrRenderSlot(e.$slots,"reply",{comment:w.comment,isChild:!1},null,S,I,L);else return[renderSlot(e.$slots,"reply",{comment:w.comment,isChild:!1},void 0,!0)]}),_:2},[w.children.length?{name:"children",fn:withCtx((k,S,I,L)=>{if(S)S(ssrRenderComponent(E,{comments:e.buildeCommentTree(w.children),"is-child-list":!0,"hidden-avatar":e.hiddenAvatar,"hidden-ua":e.hiddenUa,"plain-vote":e.plainVote,"reply-pid":e.replyPid,onDelete:e.handleDeleteComment,onReply:e.handleReplyComment,onCancelReply:e.handleCancelReply},{reply:withCtx((D,O,V,z)=>{if(O)ssrRenderSlot(e.$slots,"reply",{comment:w.comment,isChild:!0},null,O,V,z);else return[renderSlot(e.$slots,"reply",{comment:w.comment,isChild:!0},void 0,!0)]}),_:2},I,L));else return[createVNode(E,{comments:e.buildeCommentTree(w.children),"is-child-list":!0,"hidden-avatar":e.hiddenAvatar,"hidden-ua":e.hiddenUa,"plain-vote":e.plainVote,"reply-pid":e.replyPid,onDelete:e.handleDeleteComment,onReply:e.handleReplyComment,onCancelReply:e.handleCancelReply},{reply:withCtx(()=>[renderSlot(e.$slots,"reply",{comment:w.comment,isChild:!0},void 0,!0)]),_:2},1032,["comments","hidden-avatar","hidden-ua","plain-vote","reply-pid","onDelete","onReply","onCancelReply"])]})}:void 0]),i))}),t("<!--]--></ul>")}const _sfc_setup$1i=_sfc_main$1i.setup;_sfc_main$1i.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/comment/list/list.vue"),_sfc_setup$1i?_sfc_setup$1i(e,t):void 0};const CommentList=_export_sfc(_sfc_main$1i,[["ssrRender",_sfc_ssrRender$1i],["__scopeId","data-v-d3edbdab"]]),_sfc_main$1h=defineComponent({name:"CommentPagination",props:{fetching:{type:Boolean,required:!0},remain:{type:Number,required:!0},pagination:{type:Object,required:!1}},setup(e,t){const{gtag:i}=useEnhancer(),s=computed(()=>{var d,g,r;return((d=e.pagination)==null?void 0:d.total_page)>1&&((g=e.pagination)==null?void 0:g.current_page)!==((r=e.pagination)==null?void 0:r.total_page)});return{COMMENT_FOOTER_ELEMENT_ID,hasMore:s,handleLoadmore:()=>{i==null||i.event("loadmore",{event_category:GAEventCategories.Comment}),e.pagination&&t.emit(CommentEvents.Page,e.pagination.current_page+1)}}}}),loadmore_vue_vue_type_style_index_0_scoped_7dfa5296_lang="";function _sfc_ssrRender$1h(e,t,i,s,c,d,g,r){const y=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:"loadmore",id:e.COMMENT_FOOTER_ELEMENT_ID},s))} data-v-7dfa5296>`),e.hasMore?(t(`<button class="button"${includeBooleanAttr(e.fetching)?" disabled":""} data-v-7dfa5296>`),e.fetching?t(ssrRenderComponent(y,{zh:"\u52A0\u8F7D\u4E2D...",en:"Loading..."},null,i)):(t("<!--[-->"),t(ssrRenderComponent(y,null,{zh:withCtx((E,w,k,S)=>{if(w)w(`\u52A0\u8F7D\u66F4\u591A\u8BC4\u8BBA\uFF08\u5269 ${ssrInterpolate(e.remain)} \u6761\uFF09`);else return[createTextVNode("\u52A0\u8F7D\u66F4\u591A\u8BC4\u8BBA\uFF08\u5269 "+toDisplayString(e.remain)+" \u6761\uFF09",1)]}),en:withCtx((E,w,k,S)=>{if(w)w(`Loadmore (remain ${ssrInterpolate(e.remain)})`);else return[createTextVNode("Loadmore (remain "+toDisplayString(e.remain)+")",1)]}),_:1},i)),t('<i class="iconfont icon-loadmore" data-v-7dfa5296></i><!--]-->')),t("</button>")):(t('<span class="no-more" data-v-7dfa5296>'),t(ssrRenderComponent(y,{zh:"\u6C34\u5C3D\u5C71\u7A77",en:"NO MORE"},null,i)),t("</span>")),t("</div>")}const _sfc_setup$1h=_sfc_main$1h.setup;_sfc_main$1h.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/comment/loadmore.vue"),_sfc_setup$1h?_sfc_setup$1h(e,t):void 0};const CommentLoadmore=_export_sfc(_sfc_main$1h,[["ssrRender",_sfc_ssrRender$1h],["__scopeId","data-v-7dfa5296"]]),_sfc_main$1g=defineComponent({name:"CommentPublisherMain",props:{fetching:{type:Boolean,default:!1}}}),main_vue_vue_type_style_index_0_scoped_69c1136c_lang="";function _sfc_ssrRender$1g(e,t,i,s,c,d,g,r){const y=resolveComponent("placeholder"),E=resolveComponent("skeleton-base");t(ssrRenderComponent(y,mergeProps({loading:e.fetching},s),{loading:withCtx((w,k,S,I)=>{if(k)k(`<div class="publisher-skeleton" data-v-69c1136c${I}><div class="avatar" data-v-69c1136c${I}>`),k(ssrRenderComponent(E,null,null,S,I)),k(`</div><div class="content" data-v-69c1136c${I}>`),k(ssrRenderComponent(E,null,null,S,I)),k("</div></div>");else return[createVNode("div",{class:"publisher-skeleton",key:"skeleton"},[createVNode("div",{class:"avatar"},[createVNode(E)]),createVNode("div",{class:"content"},[createVNode(E)])])]}),default:withCtx((w,k,S,I)=>{if(k)ssrRenderSlot(e.$slots,"default",{},null,k,S,I);else return[renderSlot(e.$slots,"default",{},void 0,!0)]}),_:3},i))}const _sfc_setup$1g=_sfc_main$1g.setup;_sfc_main$1g.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/comment/publisher/main.vue"),_sfc_setup$1g?_sfc_setup$1g(e,t):void 0};const CommentPublisherMain=_export_sfc(_sfc_main$1g,[["ssrRender",_sfc_ssrRender$1g],["__scopeId","data-v-69c1136c"]]),_sfc_main$1f=defineComponent({name:"CommentPublisher",props:{id:{type:String,required:!1},disabled:{type:Boolean,default:!1},profile:{type:Object,required:!0},total:{type:Number,default:0,required:!1},bordered:{type:Boolean,default:!1},defaultBlossomed:{type:Boolean,default:!0},hiddenAvatar:{type:Boolean,required:!1},fixedAvatar:{type:Boolean,required:!1}},emits:[CommentEvents.Blossom,"update:profile"],setup(e,t){const{i18n:i,gtag:s}=useEnhancer(),{user:c}=pinia_prod.storeToRefs(useIdentityStore()),d=computed(()=>{var E,w;return c.value.type===UserType.Local?getGravatarByHash((E=c.value.localProfile)==null?void 0:E.email_hash):c.value.type===UserType.Disqus?getDisqusAvatarByUsername((w=c.value.disqusProfile)==null?void 0:w.username):getDefaultAvatar()}),g=(E,w)=>{t.emit("update:profile",{...e.profile,[E]:w.target.value})},r=ref(e.defaultBlossomed),y=()=>{r.value=!0,t.emit(CommentEvents.Blossom),s==null||s.event("focus_publisher",{event_category:GAEventCategories.Comment})};return{user:c,avatar:d,blossomed:r,UserType,LanguageKey,t:i.t,firstUpperCase,handleUpdateProfile:g,handleBlossom:y}}}),publisher_vue_vue_type_style_index_0_scoped_57e134b8_lang="";function _sfc_ssrRender$1f(e,t,i,s,c,d,g,r){const y=resolveComponent("uimage"),E=resolveComponent("i18n");t(`<form${ssrRenderAttrs(mergeProps({key:"publisher",class:["publisher",{"hidden-avatar":e.hiddenAvatar,"fixed-avatar":e.fixedAvatar,blossomed:e.blossomed,bordered:e.bordered}],name:"comment",id:e.id},s))} data-v-57e134b8>`),e.user.type===e.UserType.Null?t(`<div class="profile" style="${ssrRenderStyle(e.blossomed?null:{display:"none"})}" data-v-57e134b8><div class="name" data-v-57e134b8><input${ssrRenderAttr("value",e.profile.name)} required type="text" name="name" autocomplete="on"${includeBooleanAttr(e.disabled)?" disabled":""}${ssrRenderAttr("placeholder",e.t(e.LanguageKey.COMMENT_POST_NAME)+" *")} data-v-57e134b8></div><div class="email" data-v-57e134b8><input${ssrRenderAttr("value",e.profile.email)} required type="email" name="email" autocomplete="on"${includeBooleanAttr(e.disabled)?" disabled":""}${ssrRenderAttr("placeholder",e.t(e.LanguageKey.COMMENT_POST_EMAIL)+" *")} data-v-57e134b8></div><div class="site" data-v-57e134b8><input${ssrRenderAttr("value",e.profile.site)} type="url" name="url" autocomplete="on"${includeBooleanAttr(e.disabled)?" disabled":""}${ssrRenderAttr("placeholder",e.t(e.LanguageKey.COMMENT_POST_SITE))} data-v-57e134b8></div></div>`):t("<!---->"),t('<div class="postbox" data-v-57e134b8>'),e.hiddenAvatar?t("<!---->"):(t('<div class="avatar" data-v-57e134b8>'),t(ssrRenderComponent(y,{alt:e.profile.name,src:e.avatar},null,i)),t("</div>")),e.blossomed?(t('<div class="editor" data-v-57e134b8>'),ssrRenderSlot(e.$slots,"pen",{},null,t,i),t("</div>")):(t('<div class="placeholder" data-v-57e134b8>'),t(ssrRenderComponent(E,{zh:"\u5728\u4E0B\u6709\u4E00\u62D9\u89C1\uFF0C\u4E0D\u77E5...",en:`${e.total?"Join":"Start"} the discussion...`},null,i)),t("</div>")),t("</div></form>")}const _sfc_setup$1f=_sfc_main$1f.setup;_sfc_main$1f.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/comment/publisher/publisher.vue"),_sfc_setup$1f?_sfc_setup$1f(e,t):void 0};const CommentPublisher=_export_sfc(_sfc_main$1f,[["ssrRender",_sfc_ssrRender$1f],["__scopeId","data-v-57e134b8"]]),focusPosition=(e,t=0)=>{var d;if(!e)return;if(e.focus(),!t){const g=(d=window.getSelection())==null?void 0:d.getRangeAt(0),r=g.cloneRange();return r.selectNodeContents(e),r.setEnd(g.endContainer,g.endOffset),r.toString().length}let i=0,s=!1;const c=g=>{const r=g.childNodes;for(let y=0;y<r.length;++y){const E=r[y],w=E.nodeType===1&&E.tagName==="BR";if(E.nodeType!==3&&!w){c(E);return}if(i+=w?1:E.textContent.length,i>=t){if(s){c(E);return}s=!0;const k=document.getSelection(),S=document.createRange(),I=i-E.textContent.length;S.setStart(E,t-I),S.setEnd(E,t-I),k.removeAllRanges(),k.addRange(S);break}}};c(e)},insertContent=e=>{const{element:t,content:i}=e,[s,c]=Array.isArray(i)?i:[i];if(!t||!s&&!c)return!1;const d=t.innerText,g=(window.getSelection||document.getSelection)(),r=g==null?void 0:g.toString();if(r){const E=!!s&&!c?s:s+r+c,w=d.replace(r,E);t.innerText=w,focusPosition(t,w.indexOf(E)+E.length-1)}else{const y=s+c,E=(()=>{try{return g.getRangeAt(0)}catch{}})(),w=E==null?void 0:E.startOffset,k=E==null?void 0:E.endOffset;if(E&&w===k&&w>0){const S=[d.slice(0,w),y,d.slice(w)];t.innerText=S.join(""),focusPosition(t,S[0].length+S[1].length-1)}else{const S=d+y;t.innerText=S,focusPosition(t,S.length-1)}}},_sfc_main$1e=defineComponent({name:"CommentPen",components:{Markdown},props:{modelValue:{type:String,required:!1},disabled:{type:Boolean,default:!1},previewed:{type:Boolean,default:!1},posting:{type:Boolean,required:!0},bordered:{type:Boolean,required:!1},autoFocus:{type:Boolean,default:!1},hiddenStationery:{type:Boolean,default:!1}},emits:["update:modelValue","update:previewed",CommentEvents.Submit],setup(e,t){const{i18n:i}=useEnhancer(),{user:s}=pinia_prod.storeToRefs(useIdentityStore()),c=ref(e.modelValue||""),d=ref(e.previewed||!1),g=ref();let r=null;const y=()=>{d.value=!d.value,t.emit("update:previewed",d.value)},E=()=>{var V;const O=(V=g.value)==null?void 0:V.innerText;O!==c.value&&(c.value=O,t.emit("update:modelValue",O))},w=O=>{O.preventDefault(),t.emit(CommentEvents.Submit,c.value)},k=(O,V="")=>{insertContent({element:g.value,content:[O,V]}),E()},S=O=>{k(` ${O} `)},I=()=>{k(" ![","](https://) ")},L=()=>{k(" [","](https://) ")},D=()=>{k("\n```javascript\n","\n```\n")};return watch(()=>e.modelValue,(O="")=>{O!==c.value&&(c.value=O,g.value&&(g.value.innerText=O))}),watch(()=>e.previewed,O=>{O!==d.value&&(d.value=O)}),onMounted(()=>{e.autoFocus&&nextTick$1().then(()=>{g.value&&focusPosition(g.value)}),r=new MutationObserver(()=>E()),r.observe(g.value,{attributes:!0,characterData:!0,childList:!0,subtree:!0})}),onBeforeUnmount(()=>{r==null||r.disconnect()}),{t:i.t,user:s,UserType,EMOJIS,VALUABLE_LINKS,LanguageKey,inputElement:g,content:c,isPreviewed:d,insertEmoji:S,insertImage:I,insertLink:L,insertCode:D,handleInputChange:E,handleTogglePreview:y,handleSubmit:w,enableCopyrighter,disableCopyrighter}}}),pen_vue_vue_type_style_index_0_scoped_41adcf04_lang="";function _sfc_ssrRender$1e(e,t,i,s,c,d,g,r){const y=resolveComponent("markdown"),E=resolveComponent("ulink"),w=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:["pen",{bordered:e.bordered}]},s))} data-v-41adcf04><div class="markdown" data-v-41adcf04><div class="markdown-input"${ssrRenderAttr("contenteditable",!e.disabled)}${ssrRenderAttr("placeholder",e.t(e.LanguageKey.COMMENT_POST_PLACEHOLDER))} data-v-41adcf04></div>`),e.isPreviewed?(t('<div class="preview-content" data-v-41adcf04>'),t(ssrRenderComponent(y,{markdown:e.content,sanitize:!0,compact:!0},null,i)),t("</div>")):t("<!---->"),t('</div><div class="pencilbox" data-v-41adcf04><div class="stationery" data-v-41adcf04>'),t(ssrRenderComponent(E,{class:"markdown",title:"markdown",href:e.VALUABLE_LINKS.MARKDOWN},{default:withCtx((k,S,I,L)=>{if(S)S(`<i class="iconfont icon-markdown" data-v-41adcf04${L}></i>`);else return[createVNode("i",{class:"iconfont icon-markdown"})]}),_:1},i)),e.hiddenStationery?t("<!---->"):(t(`<!--[--><button class="emoji" title="emoji" type="button"${includeBooleanAttr(e.disabled||e.isPreviewed)?" disabled":""} data-v-41adcf04><i class="iconfont icon-emoji" data-v-41adcf04></i><div class="emoji-box" data-v-41adcf04><ul class="emoji-list" data-v-41adcf04><!--[-->`),ssrRenderList(e.EMOJIS,(k,S)=>{t(`<li class="item" data-v-41adcf04>${ssrInterpolate(k)}</li>`)}),t(`<!--]--></ul></div></button><button class="image" title="image"${includeBooleanAttr(e.disabled||e.isPreviewed)?" disabled":""} data-v-41adcf04><i class="iconfont icon-image" data-v-41adcf04></i></button><button class="link" title="link"${includeBooleanAttr(e.disabled||e.isPreviewed)?" disabled":""} data-v-41adcf04><i class="iconfont icon-link" data-v-41adcf04></i></button><button class="code" title="code"${includeBooleanAttr(e.disabled||e.isPreviewed)?" disabled":""} data-v-41adcf04><i class="iconfont icon-code" data-v-41adcf04></i></button><button title="preview" class="${ssrRenderClass([{actived:e.isPreviewed},"preview"])}"${includeBooleanAttr(e.disabled)?" disabled":""} data-v-41adcf04><i class="${ssrRenderClass([e.isPreviewed?"icon-eye-close":"icon-eye","iconfont"])}" data-v-41adcf04></i></button><!--]-->`)),t(`</div><button type="submit" class="submit"${includeBooleanAttr(e.disabled)?" disabled":""} data-v-41adcf04>`),e.posting?t(ssrRenderComponent(w,{zh:"\u53D1\u5E03\u4E2D...",en:"Posting..."},null,i)):e.user.type===e.UserType.Local?t(ssrRenderComponent(w,null,{zh:withCtx((k,S,I,L)=>{var D,O;if(S)S(`\u4EE5 ${ssrInterpolate((D=e.user.localProfile)==null?void 0:D.name)} \u7684\u8EAB\u4EFD\u53D1\u5E03`);else return[createTextVNode("\u4EE5 "+toDisplayString((O=e.user.localProfile)==null?void 0:O.name)+" \u7684\u8EAB\u4EFD\u53D1\u5E03",1)]}),en:withCtx((k,S,I,L)=>{var D,O;if(S)S(`Post as ${ssrInterpolate((D=e.user.localProfile)==null?void 0:D.name)}`);else return[createTextVNode("Post as "+toDisplayString((O=e.user.localProfile)==null?void 0:O.name),1)]}),_:1},i)):e.user.type===e.UserType.Disqus?t(ssrRenderComponent(w,null,{zh:withCtx((k,S,I,L)=>{var D,O;if(S)S(`\u4EE5 ${ssrInterpolate((D=e.user.disqusProfile)==null?void 0:D.name)} \u7684\u8EAB\u4EFD\u53D1\u5E03`);else return[createTextVNode("\u4EE5 "+toDisplayString((O=e.user.disqusProfile)==null?void 0:O.name)+" \u7684\u8EAB\u4EFD\u53D1\u5E03",1)]}),en:withCtx((k,S,I,L)=>{var D,O;if(S)S(`Post as ${ssrInterpolate((D=e.user.disqusProfile)==null?void 0:D.name)}`);else return[createTextVNode("Post as "+toDisplayString((O=e.user.disqusProfile)==null?void 0:O.name),1)]}),_:1},i)):t(ssrRenderComponent(w,{zh:"\u53D1\u5E03",en:"Publish"},null,i)),t('<i class="iconfont icon-mail-plane" data-v-41adcf04></i></button></div></div>')}const _sfc_setup$1e=_sfc_main$1e.setup;_sfc_main$1e.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/comment/publisher/pen.vue"),_sfc_setup$1e?_sfc_setup$1e(e,t):void 0};const CommentPen=_export_sfc(_sfc_main$1e,[["ssrRender",_sfc_ssrRender$1e],["__scopeId","data-v-41adcf04"]]),_sfc_main$1d=defineComponent({name:"Dsiqus",components:{CommentTopbar,CommentMain,CommentList,CommentLoadmore,CommentPublisherMain,CommentPublisher,CommentPen},props:{postId:{type:Number,required:!0},fetching:{type:Boolean,default:!1},plain:{type:Boolean,default:!1}},setup(e){const{i18n:t,gtag:i,globalState:s}=useEnhancer(),c=useIdentityStore(),d=useCommentStore(),g=computed(()=>d.posting),r=computed(()=>d.fetching),y=computed(()=>e.fetching||!d.comments.length&&d.fetching);let E;(de=>{de.Root="root",de.Reply="reply"})(E||(E={}));const w=ref(),k=computed(()=>g.value&&w.value==="root"),S=computed(()=>g.value&&w.value==="reply"),I=reactive({sort:SortType.Desc,replyPID:0}),L=ref({name:"",email:"",site:""}),D=reactive({content:"",previewed:!1}),O=()=>{D.content=""},V=()=>{D.previewed=!1},z=()=>{I.replyPID=0},U=de=>{I.replyPID=de,i==null||i.event("reply_comment",{event_category:GAEventCategories.Comment})},Z=(de={},Le)=>{const Ge={...de,sort:I.sort,post_id:e.postId};return d.fetchList(Ge,Le)},W=de=>{I.sort!==de&&(I.sort=de,Z(),scrollToAnchor(COMMENT_ELEMENT_ID))},ne=de=>{const Le=d.comments,Ge=getCommentItemElementID(Le[Le.length-2].id);Z({page:de},!0).then(()=>{nextTick$1().then(()=>{scrollToAnchor(Ge)})})},re=de=>{d.deleteComment(de).catch(Le=>{console.warn("delete comment failed",Le),alert(Le.message)})},ie=async de=>{if(i==null||i.event("submit_comment",{event_category:GAEventCategories.Comment}),!de.content||!de.content.trim())throw`${t.t(LanguageKey.COMMENT_POST_CONTENT)} ?`;if(de.content.length>3e3)throw`${t.t(LanguageKey.COMMENT_POST_ERROR_CONTENT)} ?`;const Le=c.user.type===UserType.Null,Ge=L.value;if(Le){if(!Ge.name)throw t.t(LanguageKey.COMMENT_POST_NAME)+"?";if(!Ge.email)throw t.t(LanguageKey.COMMENT_POST_EMAIL)+"?"}const wt=Le?toRaw$1(Ge):c.user.type===UserType.Local?c.user.localProfile:{name:c.user.disqusProfile.name,site:c.user.disqusProfile.url};wt.email||Reflect.deleteProperty(wt,"email"),wt.site||Reflect.deleteProperty(wt,"site");try{const Te=await d.postComment({pid:de.pid,post_id:e.postId,content:de.content,agent:s.userAgent.original,author:wt});Le&&c.saveLocalUser({...wt,email_hash:Te.author.email_hash}),luanchEmojiRain(de.content)}catch(Te){throw console.warn("submit comment failed:",Te),Te.message}},Ce=de=>{const Le=document.getElementById(de),Ge=Le.checkValidity();return Le.reportValidity(),Ge?Promise.resolve():Promise.reject()},we=async de=>{await Ce(COMMENT_PUBLISHER_ELEMENT_ID),w.value="root";try{await ie({content:de,pid:0}),V(),O()}catch(Le){alert(Le)}finally{w.value=UNDEFINED}},fe=async de=>{await Ce(COMMENT_REPLY_PUBLISHER_ELEMENT_ID),w.value="reply";try{await ie({content:de,pid:I.replyPID}),z()}catch(Le){alert(Le)}finally{w.value=UNDEFINED}};return watch(y,de=>{de&&z()}),onBeforeUnmount(()=>{z()}),onUnmounted(()=>{d.clearList()}),{ANCHOR:ANCHORS,isFetching:r,isLoading:y,isRootPosting:k,isReplyPosting:S,commentStore:d,commentState:I,rootPenState:D,guestProfile:L,replyComment:U,handleDeleteComment:re,handleRootSubmit:we,handleReplySubmit:fe,cancelCommentReply:z,fetchSortComments:W,fetchPageComments:ne}}}),index_vue_vue_type_style_index_0_scoped_e51b4cc1_lang="";function _sfc_ssrRender$1d(e,t,i,s,c,d,g,r){var O;const y=resolveComponent("comment-topbar"),E=resolveComponent("divider"),w=resolveComponent("comment-publisher-main"),k=resolveComponent("comment-publisher"),S=resolveComponent("comment-pen"),I=resolveComponent("comment-main"),L=resolveComponent("comment-list"),D=resolveComponent("comment-loadmore");t(`<div${ssrRenderAttrs(mergeProps({id:e.ANCHOR.COMMENT_ELEMENT_ID,class:"comment-box"},s))} data-v-e51b4cc1>`),t(ssrRenderComponent(y,{total:(O=e.commentStore.pagination)==null?void 0:O.total,loaded:e.commentStore.comments.length,"post-id":e.postId,fetching:e.fetching,loading:e.isLoading,plain:e.plain,sort:e.commentState.sort,onSort:e.fetchSortComments},null,i)),t(ssrRenderComponent(E,{class:"divider",size:"lg"},null,i)),t(ssrRenderComponent(w,{fetching:e.fetching},{default:withCtx((V,z,U,Z)=>{var W,ne;if(z)z(ssrRenderComponent(k,{profile:e.guestProfile,"onUpdate:profile":re=>e.guestProfile=re,id:e.ANCHOR.COMMENT_PUBLISHER_ELEMENT_ID,disabled:e.isLoading||e.isRootPosting,total:(W=e.commentStore.pagination)==null?void 0:W.total,"default-blossomed":!!e.plain,"hidden-avatar":e.plain},{pen:withCtx((re,ie,Ce,we)=>{if(ie)ie(ssrRenderComponent(S,{modelValue:e.rootPenState.content,"onUpdate:modelValue":fe=>e.rootPenState.content=fe,previewed:e.rootPenState.previewed,"onUpdate:previewed":fe=>e.rootPenState.previewed=fe,"auto-focus":!e.plain,"hidden-stationery":e.plain,disabled:e.isRootPosting||e.isLoading,posting:e.isRootPosting,onSubmit:e.handleRootSubmit},null,Ce,we));else return[createVNode(S,{modelValue:e.rootPenState.content,"onUpdate:modelValue":fe=>e.rootPenState.content=fe,previewed:e.rootPenState.previewed,"onUpdate:previewed":fe=>e.rootPenState.previewed=fe,"auto-focus":!e.plain,"hidden-stationery":e.plain,disabled:e.isRootPosting||e.isLoading,posting:e.isRootPosting,onSubmit:e.handleRootSubmit},null,8,["modelValue","onUpdate:modelValue","previewed","onUpdate:previewed","auto-focus","hidden-stationery","disabled","posting","onSubmit"])]}),_:1},U,Z));else return[createVNode(k,{profile:e.guestProfile,"onUpdate:profile":re=>e.guestProfile=re,id:e.ANCHOR.COMMENT_PUBLISHER_ELEMENT_ID,disabled:e.isLoading||e.isRootPosting,total:(ne=e.commentStore.pagination)==null?void 0:ne.total,"default-blossomed":!!e.plain,"hidden-avatar":e.plain},{pen:withCtx(()=>[createVNode(S,{modelValue:e.rootPenState.content,"onUpdate:modelValue":re=>e.rootPenState.content=re,previewed:e.rootPenState.previewed,"onUpdate:previewed":re=>e.rootPenState.previewed=re,"auto-focus":!e.plain,"hidden-stationery":e.plain,disabled:e.isRootPosting||e.isLoading,posting:e.isRootPosting,onSubmit:e.handleRootSubmit},null,8,["modelValue","onUpdate:modelValue","previewed","onUpdate:previewed","auto-focus","hidden-stationery","disabled","posting","onSubmit"])]),_:1},8,["profile","onUpdate:profile","id","disabled","total","default-blossomed","hidden-avatar"])]}),_:1},i)),t(ssrRenderComponent(E,{class:"divider",size:"lg"},null,i)),t(ssrRenderComponent(I,{fetching:e.isLoading,"skeleton-count":e.plain?3:5,"has-data":Boolean(e.commentStore.commentTreeList.length)},{list:withCtx((V,z,U,Z)=>{if(z)z(ssrRenderComponent(L,{comments:e.commentStore.commentTreeList,"reply-pid":e.commentState.replyPID,"hidden-avatar":e.plain,"hidden-ua":e.plain,"plain-vote":e.plain,onDelete:e.handleDeleteComment,onReply:e.replyComment,onCancelReply:e.cancelCommentReply},{reply:withCtx((W,ne,re,ie)=>{if(ne)ne(ssrRenderComponent(k,{profile:e.guestProfile,"onUpdate:profile":Ce=>e.guestProfile=Ce,id:e.ANCHOR.COMMENT_REPLY_PUBLISHER_ELEMENT_ID,disabled:!1,bordered:!0,"default-blossomed":!0,"hidden-avatar":e.plain,"fixed-avatar":W.isChild},{pen:withCtx((Ce,we,fe,de)=>{if(we)we(ssrRenderComponent(S,{posting:e.isReplyPosting,bordered:!0,"auto-focus":!0,"hidden-stationery":e.plain,onSubmit:e.handleReplySubmit},null,fe,de));else return[createVNode(S,{posting:e.isReplyPosting,bordered:!0,"auto-focus":!0,"hidden-stationery":e.plain,onSubmit:e.handleReplySubmit},null,8,["posting","hidden-stationery","onSubmit"])]}),_:2},re,ie));else return[createVNode(k,{profile:e.guestProfile,"onUpdate:profile":Ce=>e.guestProfile=Ce,id:e.ANCHOR.COMMENT_REPLY_PUBLISHER_ELEMENT_ID,disabled:!1,bordered:!0,"default-blossomed":!0,"hidden-avatar":e.plain,"fixed-avatar":W.isChild},{pen:withCtx(()=>[createVNode(S,{posting:e.isReplyPosting,bordered:!0,"auto-focus":!0,"hidden-stationery":e.plain,onSubmit:e.handleReplySubmit},null,8,["posting","hidden-stationery","onSubmit"])]),_:2},1032,["profile","onUpdate:profile","id","hidden-avatar","fixed-avatar"])]}),_:1},U,Z));else return[createVNode(L,{comments:e.commentStore.commentTreeList,"reply-pid":e.commentState.replyPID,"hidden-avatar":e.plain,"hidden-ua":e.plain,"plain-vote":e.plain,onDelete:e.handleDeleteComment,onReply:e.replyComment,onCancelReply:e.cancelCommentReply},{reply:withCtx(W=>[createVNode(k,{profile:e.guestProfile,"onUpdate:profile":ne=>e.guestProfile=ne,id:e.ANCHOR.COMMENT_REPLY_PUBLISHER_ELEMENT_ID,disabled:!1,bordered:!0,"default-blossomed":!0,"hidden-avatar":e.plain,"fixed-avatar":W.isChild},{pen:withCtx(()=>[createVNode(S,{posting:e.isReplyPosting,bordered:!0,"auto-focus":!0,"hidden-stationery":e.plain,onSubmit:e.handleReplySubmit},null,8,["posting","hidden-stationery","onSubmit"])]),_:2},1032,["profile","onUpdate:profile","id","hidden-avatar","fixed-avatar"])]),_:1},8,["comments","reply-pid","hidden-avatar","hidden-ua","plain-vote","onDelete","onReply","onCancelReply"])]}),pagination:withCtx((V,z,U,Z)=>{var W,ne;if(z)z(ssrRenderComponent(D,{fetching:e.isFetching,pagination:e.commentStore.pagination,remain:((W=e.commentStore.pagination)==null?void 0:W.total)-e.commentStore.comments.length,onPage:e.fetchPageComments},null,U,Z));else return[createVNode(D,{fetching:e.isFetching,pagination:e.commentStore.pagination,remain:((ne=e.commentStore.pagination)==null?void 0:ne.total)-e.commentStore.comments.length,onPage:e.fetchPageComments},null,8,["fetching","pagination","remain","onPage"])]}),_:1},i)),t("</div>")}const _sfc_setup$1d=_sfc_main$1d.setup;_sfc_main$1d.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/comment/index.vue"),_sfc_setup$1d?_sfc_setup$1d(e,t):void 0};const Comment=_export_sfc(_sfc_main$1d,[["ssrRender",_sfc_ssrRender$1d],["__scopeId","data-v-e51b4cc1"]]),_sfc_main$1c=defineComponent({name:"ArticleDetailSkeleton",props:{socialCount:{type:Number,required:!0},relatedCount:{type:Number,required:!0}}}),skeleton_vue_vue_type_style_index_0_scoped_a96e0f80_lang="";function _sfc_ssrRender$1c(e,t,i,s,c,d,g,r){const y=resolveComponent("skeleton-line"),E=resolveComponent("skeleton-paragraph"),w=resolveComponent("skeleton-base");t(`<div${ssrRenderAttrs(mergeProps({class:"article-skeleton"},s))} data-v-a96e0f80><div class="module" data-v-a96e0f80><div class="content-skeleton" data-v-a96e0f80>`),t(ssrRenderComponent(y,{class:"title"},null,i)),t(ssrRenderComponent(E,{class:"content",lines:9,"line-height":"1.3em"},null,i)),t('</div></div><div class="module" data-v-a96e0f80><div class="share-skeleton" data-v-a96e0f80><!--[-->'),ssrRenderList(e.socialCount,k=>{t(ssrRenderComponent(w,{class:"item",key:k},null,i))}),t(`<!--]--></div></div><div class="module" data-v-a96e0f80><ul class="related-skeleton" style="${ssrRenderStyle({"grid-template-columns":`repeat(${e.relatedCount}, 1fr)`})}" data-v-a96e0f80><!--[-->`),ssrRenderList(e.relatedCount,k=>{t(ssrRenderComponent(w,{key:k,class:"item"},null,i))}),t("<!--]--></ul></div></div>")}const _sfc_setup$1c=_sfc_main$1c.setup;_sfc_main$1c.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/article/skeleton.vue"),_sfc_setup$1c?_sfc_setup$1c(e,t):void 0};const ArticleSkeleton=_export_sfc(_sfc_main$1c,[["ssrRender",_sfc_ssrRender$1c],["__scopeId","data-v-a96e0f80"]]),_sfc_main$1b=defineComponent({name:"ArticleContent",components:{Markdown},props:{article:{type:Object,required:!0},readmoreId:{type:String,required:!0}},setup(e){const{i18n:t}=useEnhancer(),i=useArticleDetailStore(),s=computed(()=>isHybridType(e.article.origin)),c=computed(()=>isReprintType(e.article.origin)),d=computed(()=>isOriginalType(e.article.origin)),g=ref(),r=ref(!1),y=computed(()=>i.isLongContent&&!i.renderedFullContent);return{LanguageKey,i18n:t,element:g,isHybrid:s,isReprint:c,isOriginal:d,articleDetailStore:i,isRenderMoreEnabled:y,isRenderMoreContent:r,numberSplit,handleRenderMore:()=>{r.value=!0,nextTick$1(()=>{setTimeout(()=>{i.renderFullContent(),r.value=!1},0)})}}}}),content_vue_vue_type_style_index_0_scoped_c5d2116b_lang="";function _sfc_ssrRender$1b(e,t,i,s,c,d,g,r){var I,L;const y=resolveComponent("i18n"),E=resolveComponent("responsive"),w=resolveComponent("divider"),k=resolveComponent("udate"),S=resolveComponent("markdown");t(`<div${ssrRenderAttrs(mergeProps({ref:"element",class:"detail"},s))} data-v-c5d2116b><div class="${ssrRenderClass([{original:e.isOriginal,reprint:e.isReprint,hybrid:e.isHybrid},"oirigin"])}" data-v-c5d2116b>`),e.isOriginal?t(ssrRenderComponent(y,{k:e.LanguageKey.ORIGIN_ORIGINAL},null,i)):e.isReprint?t(ssrRenderComponent(y,{k:e.LanguageKey.ORIGIN_REPRINT},null,i)):e.isHybrid?t(ssrRenderComponent(y,{k:e.LanguageKey.ORIGIN_HYBRID},null,i)):t("<!---->"),t(`</div><div class="knowledge" data-v-c5d2116b><div class="title" data-v-c5d2116b><h2 class="text" data-v-c5d2116b>${ssrInterpolate(e.article.title)}</h2><div class="meta" data-v-c5d2116b><i class="iconfont icon-t" data-v-c5d2116b></i>`),t(ssrRenderComponent(y,{zh:`\u5171 ${e.numberSplit(e.articleDetailStore.contentLength)} \u5B57\uFF0C\u9700\u9605\u8BFB ${e.articleDetailStore.readMinutes} \u5206\u949F`,en:`${e.numberSplit(e.articleDetailStore.contentLength)} words, ${e.articleDetailStore.readMinutes} min read`},null,i)),t(ssrRenderComponent(E,{desktop:""},{default:withCtx((D,O,V,z)=>{if(O)O(ssrRenderComponent(w,{type:"vertical",class:"vertical"},null,V,z)),O(`<span data-v-c5d2116b${z}><i class="iconfont icon-clock-outline" data-v-c5d2116b${z}></i>`),O(ssrRenderComponent(k,{to:"YMDm",date:e.article.create_at,separator:"/"},null,V,z)),O("</span>");else return[createVNode(w,{type:"vertical",class:"vertical"}),createVNode("span",null,[createVNode("i",{class:"iconfont icon-clock-outline"}),createVNode(k,{to:"YMDm",date:e.article.create_at,separator:"/"},null,8,["date"])])]}),_:1},i)),t(ssrRenderComponent(w,{type:"vertical",class:"vertical"},null,i)),t(`<span data-v-c5d2116b><i class="iconfont icon-eye" data-v-c5d2116b></i><span data-v-c5d2116b>${ssrInterpolate(e.numberSplit(e.article.meta.views))}\xA0</span>`),t(ssrRenderComponent(y,{k:e.LanguageKey.ARTICLE_VIEWS},null,i)),t("</span></div></div>"),t(ssrRenderComponent(S,{html:(I=e.articleDetailStore.defaultContent)==null?void 0:I.html},null,i)),e.isRenderMoreEnabled?(t(`<div${ssrRenderAttr("id",e.readmoreId)} class="readmore" data-v-c5d2116b><button class="readmore-btn"${includeBooleanAttr(e.isRenderMoreContent)?" disabled":""} data-v-c5d2116b>`),t(ssrRenderComponent(y,{k:e.isRenderMoreContent?e.LanguageKey.ARTICLE_RENDERING:e.LanguageKey.ARTICLE_READ_ALL},null,i)),t('<i class="iconfont icon-loadmore" data-v-c5d2116b></i></button></div>')):e.articleDetailStore.renderedFullContent?t(ssrRenderComponent(S,{html:(L=e.articleDetailStore.moreContent)==null?void 0:L.html},null,i)):t("<!---->"),t("</div></div>")}const _sfc_setup$1b=_sfc_main$1b.setup;_sfc_main$1b.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/article/content.vue"),_sfc_setup$1b?_sfc_setup$1b(e,t):void 0};const ArticleContent=_export_sfc(_sfc_main$1b,[["ssrRender",_sfc_ssrRender$1b],["__scopeId","data-v-c5d2116b"]]),_sfc_main$1a=defineComponent({name:"ArticleLikeShare",components:{BaseShare:Share},props:{socials:{type:Array,default:()=>[]}},setup(e){return{skeletonCount:e.socials.length?e.socials.length:Object.keys(SocialMedia).length,VALUABLE_LINKS}}}),share_vue_vue_type_style_index_0_scoped_fb5838fe_lang="";function _sfc_ssrRender$1a(e,t,i,s,c,d,g,r){const y=resolveComponent("base-share");t(`<div${ssrRenderAttrs(mergeProps({class:"share-box"},s))} data-v-fb5838fe>`),t(ssrRenderComponent(y,{class:"share",socials:e.socials},null,i)),t("</div>")}const _sfc_setup$1a=_sfc_main$1a.setup;_sfc_main$1a.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/article/share.vue"),_sfc_setup$1a?_sfc_setup$1a(e,t):void 0};const ArticleShare=_export_sfc(_sfc_main$1a,[["ssrRender",_sfc_ssrRender$1a],["__scopeId","data-v-fb5838fe"]]),cloneDate=e=>new Date(e.getTime()),dateToHuman=e=>{const t=e.getDay();return{day:e.getDate(),week:t===0?7:t,month:e.getMonth()+1,year:e.getFullYear()}},isSameHumanDay=(e,t)=>{const i=e.day===t.day,s=e.month===t.month,c=e.year===t.year;return i&&s&&c},humanToDate=e=>{const t=new Date;return t.setDate(e.day),t.setFullYear(e.year),t.setMonth(e.month-1),t},humanDateToYMD=({year:e,month:t,day:i},s="-")=>{const c=t?s+String(t).padStart(2,"0"):"",d=i?s+String(i).padStart(2,"0"):"";return`${e}${c}${d}`},dateToYMD=(e,t)=>{const i=typeof e=="string"?new Date(e):e;return humanDateToYMD(dateToHuman(i),t)},_sfc_main$19=defineComponent({name:"ArticleMeta",props:{article:{type:Object,required:!0},plain:{type:Boolean,default:!1}},setup(e){const{i18n:t,gtag:i,globalState:s}=useEnhancer(),c=useIdentityStore(),d=useArticleDetailStore(),g=computed(()=>c.isLikedPage(e.article.id)),r=computed(()=>getPageURL(getArticleDetailRoute(e.article.id))),y=computed(()=>e.article.meta.likes);return{VALUABLE_LINKS,LanguageKey,articleURL:r,likes:y,copy,isLiked:g,tagEnName,firstUpperCase,handleLike:async()=>{if(g.value)return!1;i==null||i.event("article_like",{event_category:GAEventCategories.Article});try{await d.postArticleLike(e.article.id),c.likePage(e.article.id)}catch(S){const I=t.t(LanguageKey.POST_ACTION_ERROR);console.warn(I,S),alert(I)}},handleOpenSponsor:()=>{s.toggleSwitcher("sponsor",!0),i==null||i.event("article_sponsor",{event_category:GAEventCategories.Article})},getDateLink:S=>getDateFlowRoute(dateToYMD(new Date(S))),getTagFlowRoute,getCategoryFlowRoute}}}),meta_vue_vue_type_style_index_0_scoped_ef3ca324_lang="";function _sfc_ssrRender$19(e,t,i,s,c,d,g,r){const y=resolveComponent("i18n"),E=resolveComponent("router-link"),w=resolveComponent("udate"),k=resolveComponent("divider"),S=resolveComponent("ulink");t(`<div${ssrRenderAttrs(mergeProps({class:["meta",{plain:e.plain}]},s))} data-v-ef3ca324><div class="actions" data-v-ef3ca324>`),ssrRenderSlot(e.$slots,"action",{},null,t,i),t('</div><div class="line" data-v-ef3ca324>'),t(ssrRenderComponent(y,{zh:"\u672C\u6587\u4E8E",en:"Published at"},null,i)),t(ssrRenderComponent(E,{class:"link date",title:e.article.create_at,to:e.getDateLink(e.article.create_at)},{default:withCtx((I,L,D,O)=>{if(L)L(ssrRenderComponent(w,{to:"YMDm",date:e.article.create_at,separator:"/"},null,D,O));else return[createVNode(w,{to:"YMDm",date:e.article.create_at,separator:"/"},null,8,["date"])]}),_:1},i)),t(ssrRenderComponent(y,{zh:"\u53D1\u5E03\u5728",en:"in"},null,i)),t("<!--[-->"),ssrRenderList(e.article.category,(I,L)=>{t("<span data-v-ef3ca324>"),t(ssrRenderComponent(E,{class:"link category",title:`${e.firstUpperCase(I.slug)} | ${I.description}`,to:e.getCategoryFlowRoute(I.slug)},{default:withCtx((D,O,V,z)=>{if(O)O(ssrRenderComponent(y,{zh:I.name,en:e.firstUpperCase(I.slug)},null,V,z));else return[createVNode(y,{zh:I.name,en:e.firstUpperCase(I.slug)},null,8,["zh","en"])]}),_:2},i)),e.article.category[L+1]?(t("<span data-v-ef3ca324>"),t(ssrRenderComponent(y,{zh:"\u3001",en:","},null,i)),t("</span>")):t("<!---->"),t("</span>")}),t("<!--]-->"),e.article.category.length?t("<!---->"):(t("<span data-v-ef3ca324>"),t(ssrRenderComponent(y,{zh:"\u672A\u77E5\u5206\u7C7B\u4E0B",en:"(no catgory)"},null,i)),t("</span>")),e.plain?t("<br data-v-ef3ca324>"):t(ssrRenderComponent(k,{type:"vertical",size:"sm"},null,i)),t("<!--[-->"),ssrRenderList(e.article.tag,(I,L)=>{t("<span data-v-ef3ca324>"),t(ssrRenderComponent(E,{class:"link tag",title:`${e.tagEnName(I)} | ${I.description}`,to:e.getTagFlowRoute(I.slug)},{default:withCtx((D,O,V,z)=>{if(O)O(ssrRenderComponent(y,{zh:`#${I.name}`,en:`#${e.tagEnName(I)}`},null,V,z));else return[createVNode(y,{zh:`#${I.name}`,en:`#${e.tagEnName(I)}`},null,8,["zh","en"])]}),_:2},i)),e.article.tag[L+1]?(t("<span data-v-ef3ca324>"),t(ssrRenderComponent(y,{zh:"\u3001",en:","},null,i)),t("</span>")):t("<!---->"),t("</span>")}),t('<!--]--></div><div class="line" data-v-ef3ca324><i class="icon iconfont icon-copyright" data-v-ef3ca324></i>'),t(ssrRenderComponent(y,null,{zh:withCtx((I,L,D,O)=>{if(L)L(ssrRenderComponent(S,{class:"link copyright",href:"https://creativecommons.org/licenses/by-nc/3.0/cn/deed.zh"},{default:withCtx((V,z,U,Z)=>{if(z)z("\u81EA\u7531\u8F6C\u8F7D - \u7F72\u540D - \u975E\u5546\u4E1A\u6027\u4F7F\u7528");else return[createTextVNode("\u81EA\u7531\u8F6C\u8F7D - \u7F72\u540D - \u975E\u5546\u4E1A\u6027\u4F7F\u7528")]}),_:1},D,O));else return[createVNode(S,{class:"link copyright",href:"https://creativecommons.org/licenses/by-nc/3.0/cn/deed.zh"},{default:withCtx(()=>[createTextVNode("\u81EA\u7531\u8F6C\u8F7D - \u7F72\u540D - \u975E\u5546\u4E1A\u6027\u4F7F\u7528")]),_:1})]}),en:withCtx((I,L,D,O)=>{if(L)L(ssrRenderComponent(S,{class:"link copyright",href:"https://creativecommons.org/licenses/by-nc/3.0/cn/deed.en"},{default:withCtx((V,z,U,Z)=>{if(z)z("Creative Commons BY-NC 3.0 CN");else return[createTextVNode("Creative Commons BY-NC 3.0 CN")]}),_:1},D,O));else return[createVNode(S,{class:"link copyright",href:"https://creativecommons.org/licenses/by-nc/3.0/cn/deed.en"},{default:withCtx(()=>[createTextVNode("Creative Commons BY-NC 3.0 CN")]),_:1})]}),_:1},i)),e.plain?t("<br data-v-ef3ca324>"):t(ssrRenderComponent(k,{type:"vertical"},null,i)),t(`<span class="link permalink" data-v-ef3ca324>${ssrInterpolate(e.articleURL)}</span></div></div>`)}const _sfc_setup$19=_sfc_main$19.setup;_sfc_main$19.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/article/meta.vue"),_sfc_setup$19?_sfc_setup$19(e,t):void 0};const ArticleMeta=_export_sfc(_sfc_main$19,[["ssrRender",_sfc_ssrRender$19],["__scopeId","data-v-ef3ca324"]]),_sfc_main$18=defineComponent({name:"ArticleUpvote",props:{likes:{type:Number,required:!0},isLiked:{type:Boolean,required:!0},hiddenSponsor:{type:Boolean,default:!1},enabledParkinson:{type:Boolean,default:!1}},emits:["like","sponsor"],setup(e,t){const i=()=>{t.emit("sponsor")},s=ref(!1),c=()=>{s.value=!0};return{VALUABLE_LINKS,LanguageKey,handleLike:()=>{e.isLiked||t.emit("like",c)},handleSponsor:i,newliked:s}}}),upvote_vue_vue_type_style_index_0_scoped_059798fc_lang="";function _sfc_ssrRender$18(e,t,i,s,c,d,g,r){const y=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:"upvote"},s))} data-v-059798fc><div class="wrapper" data-v-059798fc><button class="${ssrRenderClass([{liked:e.isLiked,parkinson:e.enabledParkinson,newliked:e.newliked},"button like"])}"${includeBooleanAttr(e.isLiked)?" disabled":""} data-v-059798fc><i class="icon iconfont icon-like" data-v-059798fc></i><span class="text" data-v-059798fc>`),t(ssrRenderComponent(y,null,{zh:withCtx((E,w,k,S)=>{if(w)w(`\u771F\u68D2\uFF01${ssrInterpolate(e.likes)}`);else return[createTextVNode("\u771F\u68D2\uFF01"+toDisplayString(e.likes),1)]}),en:withCtx((E,w,k,S)=>{if(w)w(`${ssrInterpolate(e.isLiked?"Upvoted":"Upvote")} ${ssrInterpolate(e.likes)}`);else return[createTextVNode(toDisplayString(e.isLiked?"Upvoted":"Upvote")+" "+toDisplayString(e.likes),1)]}),_:1},i)),t("</span>"),e.enabledParkinson?t(`<!--[--><span class="parkinson-mask" data-v-059798fc><i class="${ssrRenderClass([e.newliked?"icon-like":"icon-like-pre","iconfont"])}" data-v-059798fc></i></span><div class="parkinson-likes" data-v-059798fc>+ 1</div><!--]-->`):t("<!---->"),t("</button>"),e.hiddenSponsor?t("<!---->"):t('<button class="button sponsor" data-v-059798fc><i class="icon iconfont icon-heart" data-v-059798fc></i></button>'),t("</div></div>")}const _sfc_setup$18=_sfc_main$18.setup;_sfc_main$18.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/article/upvote.vue"),_sfc_setup$18?_sfc_setup$18(e,t):void 0};const ArticleUpvote=_export_sfc(_sfc_main$18,[["ssrRender",_sfc_ssrRender$18],["__scopeId","data-v-059798fc"]]),_sfc_main$17=defineComponent({name:"ArticleRelated",props:{articles:{type:Array,default:()=>[]},columns:{type:Number,default:4},count:{type:Number,default:8}},setup(e){return{articleList:computed(()=>{const i=[...e.articles].slice(0,e.count);return i.length>=e.count?i:[...i,...new Array(e.count-i.length).fill({title:"-",description:"",id:null,_id:"",thumb:""})]}),getArticleDetailRoute,getMobileArticleListThumbnailURL}}}),related_vue_vue_type_style_index_0_scoped_618d364f_lang="";function _sfc_ssrRender$17(e,t,i,s,c,d,g,r){const y=resolveComponent("router-link");t(`<div${ssrRenderAttrs(mergeProps({class:"related"},s))} data-v-618d364f><ul class="articles" style="${ssrRenderStyle({gridTemplateColumns:`repeat(${e.columns}, 1fr)`})}" data-v-618d364f><!--[-->`),ssrRenderList(e.articleList,(E,w)=>{t(`<li class="${ssrRenderClass([{disabled:!E.id},"item"])}" data-v-618d364f>`),t(ssrRenderComponent(y,{class:"item-article",title:E.title,to:e.getArticleDetailRoute(E.id)},{default:withCtx((k,S,I,L)=>{if(S)S(`<div class="thumb" style="${ssrRenderStyle({backgroundImage:`url(${e.getMobileArticleListThumbnailURL(E.thumb)})`})}" data-v-618d364f${L}></div><div class="title" data-v-618d364f${L}>${ssrInterpolate(E.title)}</div><div class="description" data-v-618d364f${L}>${ssrInterpolate(E.description)}</div>`);else return[createVNode("div",{class:"thumb",style:{backgroundImage:`url(${e.getMobileArticleListThumbnailURL(E.thumb)})`}},null,4),createVNode("div",{class:"title"},toDisplayString(E.title),1),createVNode("div",{class:"description"},toDisplayString(E.description),1)]}),_:2},i)),t("</li>")}),t("<!--]--></ul></div>")}const _sfc_setup$17=_sfc_main$17.setup;_sfc_main$17.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/article/related.vue"),_sfc_setup$17?_sfc_setup$17(e,t):void 0};const ArticleRelated=_export_sfc(_sfc_main$17,[["ssrRender",_sfc_ssrRender$17],["__scopeId","data-v-618d364f"]]),_sfc_main$16=defineComponent({name:"ArticleNeighbour",props:{prev:Object,next:Object},setup(){return{getArticleDetailRoute}}}),neighbour_vue_vue_type_style_index_0_scoped_a071c63f_lang="";function _sfc_ssrRender$16(e,t,i,s,c,d,g,r){const y=resolveComponent("router-link"),E=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:"neighbour"},s))} data-v-a071c63f>`),e.prev?t(ssrRenderComponent(y,{class:"link prev",title:e.prev.title,to:e.getArticleDetailRoute(e.prev.id)},{default:withCtx((w,k,S,I)=>{if(k)k(`<div class="icon" data-v-a071c63f${I}><i class="iconfont icon-prev" data-v-a071c63f${I}></i></div><div class="content" data-v-a071c63f${I}><p class="title" data-v-a071c63f${I}>${ssrInterpolate(e.prev.title)}</p><p class="description" data-v-a071c63f${I}>${ssrInterpolate(e.prev.description)}</p></div>`);else return[createVNode("div",{class:"icon"},[createVNode("i",{class:"iconfont icon-prev"})]),createVNode("div",{class:"content"},[createVNode("p",{class:"title"},toDisplayString(e.prev.title),1),createVNode("p",{class:"description"},toDisplayString(e.prev.description),1)])]}),_:1},i)):(t('<div class="null" data-v-a071c63f>'),t(ssrRenderComponent(E,{zh:"\u5DF2\u662F\u6700\u65E9",en:"NULL"},null,i)),t("</div>")),e.next?t(ssrRenderComponent(y,{class:"link next",title:e.next.title,to:e.getArticleDetailRoute(e.next.id)},{default:withCtx((w,k,S,I)=>{if(k)k(`<div class="content" data-v-a071c63f${I}><p class="title" data-v-a071c63f${I}>${ssrInterpolate(e.next.title)}</p><p class="description" data-v-a071c63f${I}>${ssrInterpolate(e.next.description)}</p></div><div class="icon" data-v-a071c63f${I}><i class="iconfont icon-next" data-v-a071c63f${I}></i></div>`);else return[createVNode("div",{class:"content"},[createVNode("p",{class:"title"},toDisplayString(e.next.title),1),createVNode("p",{class:"description"},toDisplayString(e.next.description),1)]),createVNode("div",{class:"icon"},[createVNode("i",{class:"iconfont icon-next"})])]}),_:1},i)):(t('<div class="null" data-v-a071c63f>'),t(ssrRenderComponent(E,{zh:"\u5DF2\u662F\u6700\u65B0",en:"NULL"},null,i)),t("</div>")),t("</div>")}const _sfc_setup$16=_sfc_main$16.setup;_sfc_main$16.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/article/neighbour.vue"),_sfc_setup$16?_sfc_setup$16(e,t):void 0};const ArticleNeighbour=_export_sfc(_sfc_main$16,[["ssrRender",_sfc_ssrRender$16],["__scopeId","data-v-a071c63f"]]),_sfc_main$15=defineComponent({name:"ArticleDetail",components:{Comment,ArticleSkeleton,ArticleContent,ArticleShare,ArticleMeta,ArticleUpvote,ArticleRelated,ArticleNeighbour},props:{articleId:{type:Number,required:!0},isMobile:{type:Boolean,default:!1}},setup(e){const{i18n:t,meta:i,gtag:s,globalState:c}=useEnhancer(),{identity:d,comment:g,articleDetail:r}=useStores(),y=computed(()=>r.article||UNDEFINED),E=computed(()=>r.fetching),w=computed(()=>Boolean(y.value&&d.isLikedPage(y.value.id))),k=()=>{c.toggleSwitcher("sponsor",!0),s==null||s.event("article_sponsor",{event_category:GAEventCategories.Article})},S=async L=>{if(w.value)return!1;s==null||s.event("article_like",{event_category:GAEventCategories.Article});try{await r.postArticleLike(y.value.id),d.likePage(y.value.id),L==null||L()}catch(D){const O=t.t(LanguageKey.POST_ACTION_ERROR);console.warn(O,D),alert(O)}},I=L=>Promise.all([r.fetchCompleteArticle({articleID:L}),g.fetchList({post_id:L})]);return i(()=>{var L,D,O,V,z;return{pageTitle:(L=y.value)==null?void 0:L.title,description:((D=y.value)==null?void 0:D.description)||"",keywords:((V=(O=y.value)==null?void 0:O.keywords)==null?void 0:V.join(","))||((z=y.value)==null?void 0:z.title)}}),onBeforeMount(()=>{watch(()=>e.articleId,L=>I(L),{flush:"post"})}),useUniversalFetch(()=>I(e.articleId)),{ANCHORS,SocialMedia,userAgent:c.userAgent,store:r,article:y,fetching:E,isLiked:w,handleLike:S,handleSponsor:k}}}),index_vue_vue_type_style_index_0_scoped_70ad20c0_lang="";function _sfc_ssrRender$15(e,t,i,s,c,d,g,r){const y=resolveComponent("placeholder"),E=resolveComponent("article-skeleton"),w=resolveComponent("article-content"),k=resolveComponent("article-meta"),S=resolveComponent("article-upvote"),I=resolveComponent("article-share"),L=resolveComponent("article-neighbour"),D=resolveComponent("article-related"),O=resolveComponent("comment");t(`<div${ssrRenderAttrs(mergeProps({class:"article-page"},s))} data-v-70ad20c0>`),t(ssrRenderComponent(y,{loading:e.fetching},{loading:withCtx((V,z,U,Z)=>{if(z)z(ssrRenderComponent(E,{"social-count":e.isMobile?3:8,"related-count":e.isMobile?2:3},null,U,Z));else return[createVNode(E,{"social-count":e.isMobile?3:8,"related-count":e.isMobile?2:3},null,8,["social-count","related-count"])]}),default:withCtx((V,z,U,Z)=>{var W,ne,re,ie;if(z)e.article?(z(`<div data-v-70ad20c0${Z}><div class="module margin background overflow" data-v-70ad20c0${Z}>`),z(ssrRenderComponent(w,{id:e.ANCHORS.ARTICLE_CONTENT_ELEMENT_ID,"readmore-id":e.ANCHORS.ARTICLE_READMORE_ELEMENT_ID,article:e.article},null,U,Z)),z(`<div class="divider" data-v-70ad20c0${Z}></div>`),z(ssrRenderComponent(k,{id:e.ANCHORS.ARTICLE_META_ELEMENT_ID,article:e.article,plain:e.isMobile},{action:withCtx((Ce,we,fe,de)=>{if(we)we(ssrRenderComponent(S,{likes:e.article.meta.likes,"is-liked":e.isLiked,"hidden-sponsor":e.isMobile,"enabled-parkinson":!e.isMobile&&(e.userAgent.isChrome||e.userAgent.isFirefox),onLike:e.handleLike,onSponsor:e.handleSponsor},null,fe,de));else return[createVNode(S,{likes:e.article.meta.likes,"is-liked":e.isLiked,"hidden-sponsor":e.isMobile,"enabled-parkinson":!e.isMobile&&(e.userAgent.isChrome||e.userAgent.isFirefox),onLike:e.handleLike,onSponsor:e.handleSponsor},null,8,["likes","is-liked","hidden-sponsor","enabled-parkinson","onLike","onSponsor"])]}),_:1},U,Z)),z(`</div><div class="module margin background" data-v-70ad20c0${Z}><div class="bridge left" data-v-70ad20c0${Z}></div><div class="bridge right" data-v-70ad20c0${Z}></div>`),z(ssrRenderComponent(I,{id:e.ANCHORS.ARTICLE_SHARE_ELEMENT_ID,"article-id":e.articleId,likes:((ne=(W=e.article)==null?void 0:W.meta)==null?void 0:ne.likes)||0,socials:e.isMobile?[e.SocialMedia.Wechat,e.SocialMedia.Weibo,e.SocialMedia.Twitter]:[]},null,U,Z)),z(`</div><div class="module margin overflow" data-v-70ad20c0${Z}>`),z(ssrRenderComponent(L,{prev:e.store.prevArticle,next:e.store.nextArticle},null,U,Z)),z(`</div><div class="module margin overflow" data-v-70ad20c0${Z}>`),z(ssrRenderComponent(D,{id:e.ANCHORS.ARTICLE_RELATED_ELEMENT_ID,columns:e.isMobile?2:3,count:e.isMobile?4:6,articles:e.store.relatedArticles},null,U,Z)),z("</div></div>")):z("<!---->");else return[e.article?(openBlock(),createBlock("div",{key:0},[createVNode("div",{class:"module margin background overflow"},[createVNode(w,{id:e.ANCHORS.ARTICLE_CONTENT_ELEMENT_ID,"readmore-id":e.ANCHORS.ARTICLE_READMORE_ELEMENT_ID,article:e.article},null,8,["id","readmore-id","article"]),createVNode("div",{class:"divider"}),createVNode(k,{id:e.ANCHORS.ARTICLE_META_ELEMENT_ID,article:e.article,plain:e.isMobile},{action:withCtx(()=>[createVNode(S,{likes:e.article.meta.likes,"is-liked":e.isLiked,"hidden-sponsor":e.isMobile,"enabled-parkinson":!e.isMobile&&(e.userAgent.isChrome||e.userAgent.isFirefox),onLike:e.handleLike,onSponsor:e.handleSponsor},null,8,["likes","is-liked","hidden-sponsor","enabled-parkinson","onLike","onSponsor"])]),_:1},8,["id","article","plain"])]),createVNode("div",{class:"module margin background"},[createVNode("div",{class:"bridge left"}),createVNode("div",{class:"bridge right"}),createVNode(I,{id:e.ANCHORS.ARTICLE_SHARE_ELEMENT_ID,"article-id":e.articleId,likes:((ie=(re=e.article)==null?void 0:re.meta)==null?void 0:ie.likes)||0,socials:e.isMobile?[e.SocialMedia.Wechat,e.SocialMedia.Weibo,e.SocialMedia.Twitter]:[]},null,8,["id","article-id","likes","socials"])]),createVNode("div",{class:"module margin overflow"},[createVNode(L,{prev:e.store.prevArticle,next:e.store.nextArticle},null,8,["prev","next"])]),createVNode("div",{class:"module margin overflow"},[createVNode(D,{id:e.ANCHORS.ARTICLE_RELATED_ELEMENT_ID,columns:e.isMobile?2:3,count:e.isMobile?4:6,articles:e.store.relatedArticles},null,8,["id","columns","count","articles"])])])):createCommentVNode("",!0)]}),_:1},i)),t('<div class="comment" data-v-70ad20c0>'),t(ssrRenderComponent(O,{plain:e.isMobile,fetching:e.fetching,"post-id":e.articleId},null,i)),t("</div></div>")}const _sfc_setup$15=_sfc_main$15.setup;_sfc_main$15.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/article/index.vue"),_sfc_setup$15?_sfc_setup$15(e,t):void 0};const ArticleDetailPage=_export_sfc(_sfc_main$15,[["ssrRender",_sfc_ssrRender$15],["__scopeId","data-v-70ad20c0"]]);var TunnelModule=(e=>(e.TwitterUserInfo="twitter_userinfo",e.TwitterTweets="twitter_tweets",e.TwitterCalendar="twitter_calendar",e.YouTubePlaylist="youtube_playlist",e.YouTubeVideoList="youtube_video_list",e.InstagramMedias="instagram_medias",e.InstagramCalendar="instagram_calendar",e.BingWallpaper="bing_wallpaper",e.GitHubSponsors="github_sponsors",e.GitHubContributions="github_contributions",e.NetEaseMusic="netease_music",e.DoubanMovies="douban_movies",e.MyGoogleMap="my_google_map",e.OpenSourceGitHubStatistic="open_source_github_statistic",e.OpenSourceNPMStatistic="open_source_npm_statistic",e))(TunnelModule||{});const BFF_TUNNEL_PREFIX="/_tunnel",getBFFServerPort=()=>Number(process.env.PORT||3e3),tunnel=axios.create({baseURL:BFF_TUNNEL_PREFIX,proxy:{host:"localhost",port:getBFFServerPort()}});tunnel.interceptors.response.use(e=>e.data);const tunnel$1={$:tunnel,request:(...e)=>tunnel.request(...e),dispatch:(e,t)=>tunnel.get(e,{params:t})},useDoubanMoviesStore=defineFetchStore({id:"doubanMovies",initData:null,onlyOnce:!0,fetcher:()=>tunnel$1.dispatch(TunnelModule.DoubanMovies)}),useInstagramMediasStore=defineFetchStore({id:"instagramMedias",initData:[],fetcher(){return tunnel$1.dispatch(TunnelModule.InstagramMedias)}}),useYouTubePlayListStore=defineFetchStore({id:"youtubePlaylist",initData:[],async fetcher(){const e=await tunnel$1.dispatch(TunnelModule.YouTubePlaylist);return e.sort((t,i)=>t.snippet.position-i.snippet.position),e}}),fetchYouTubeVideoList=e=>tunnel$1.dispatch(TunnelModule.YouTubeVideoList,{id:e}),useTwitterUserinfoStore=defineFetchStore({id:"twitterUserinfo",initData:null,fetcher:()=>tunnel$1.dispatch(TunnelModule.TwitterUserInfo)}),useTwitterTweetsStore=defineFetchStore({id:"twitterTweets",initData:null,fetcher:()=>tunnel$1.dispatch(TunnelModule.TwitterTweets)}),useMyGoogleMapStore=defineFetchStore({id:"myGoogleMap",initData:null,onlyOnce:!0,fetcher:()=>tunnel$1.dispatch(TunnelModule.MyGoogleMap)}),_sfc_main$14=defineComponent({name:"AboutPageInstagram",setup(){const e=ref(!0),t=useInstagramMediasStore(),i=computed(()=>t.data.slice(0,23));return onMounted(()=>{t.fetch().finally(()=>{e.value=!1})}),{isVideoMediaIns,getInstagramImage,LanguageKey,VALUABLE_LINKS,fetching:e,store:t,insMedias:i}}}),instagram_vue_vue_type_style_index_0_scoped_3d914aba_lang="";function _sfc_ssrRender$14(e,t,i,s,c,d,g,r){const y=resolveComponent("placeholder"),E=resolveComponent("skeleton-base"),w=resolveComponent("ulink"),k=resolveComponent("uimage");t(ssrRenderComponent(y,mergeProps({"i18n-key":e.LanguageKey.EMPTY_PLACEHOLDER,loading:e.fetching,data:e.insMedias},s),{loading:withCtx((S,I,L,D)=>{if(I)I(`<ul class="list" data-v-3d914aba${D}><!--[-->`),ssrRenderList(24,O=>{I(`<li class="item" data-v-3d914aba${D}>`),I(ssrRenderComponent(E,null,null,L,D)),I("</li>")}),I("<!--]--></ul>");else return[createVNode("ul",{class:"list"},[(openBlock(),createBlock(Fragment,null,renderList(24,O=>createVNode("li",{class:"item",key:O},[createVNode(E)])),64))])]}),default:withCtx((S,I,L,D)=>{if(I)I(`<ul class="list" data-v-3d914aba${D}><!--[-->`),ssrRenderList(e.insMedias,(O,V)=>{I(`<li class="item" data-v-3d914aba${D}>`),I(ssrRenderComponent(w,{class:"link",href:O.permalink,title:O.caption},{default:withCtx((z,U,Z,W)=>{if(U)U(ssrRenderComponent(k,{class:"cover",src:e.getInstagramImage(O,"t"),alt:O.caption},null,Z,W)),e.isVideoMediaIns(O)?U(`<div class="video-icon" data-v-3d914aba${W}><i class="iconfont icon-video" data-v-3d914aba${W}></i></div>`):U("<!---->"),U(`<div class="mask" data-v-3d914aba${W}><i class="iconfont icon-eye" data-v-3d914aba${W}></i></div>`);else return[createVNode(k,{class:"cover",src:e.getInstagramImage(O,"t"),alt:O.caption},null,8,["src","alt"]),e.isVideoMediaIns(O)?(openBlock(),createBlock("div",{key:0,class:"video-icon"},[createVNode("i",{class:"iconfont icon-video"})])):createCommentVNode("",!0),createVNode("div",{class:"mask"},[createVNode("i",{class:"iconfont icon-eye"})])]}),_:2},L,D)),I("</li>")}),I(`<!--]--><li class="item" data-v-3d914aba${D}>`),I(ssrRenderComponent(w,{class:"link more",href:e.VALUABLE_LINKS.INSTAGRAM},{default:withCtx((O,V,z,U)=>{if(V)V("\u2022\u2022\u2022");else return[createTextVNode("\u2022\u2022\u2022")]}),_:1},L,D)),I("</li></ul>");else return[createVNode("ul",{class:"list"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.insMedias,(O,V)=>(openBlock(),createBlock("li",{class:"item",key:V},[createVNode(w,{class:"link",href:O.permalink,title:O.caption},{default:withCtx(()=>[createVNode(k,{class:"cover",src:e.getInstagramImage(O,"t"),alt:O.caption},null,8,["src","alt"]),e.isVideoMediaIns(O)?(openBlock(),createBlock("div",{key:0,class:"video-icon"},[createVNode("i",{class:"iconfont icon-video"})])):createCommentVNode("",!0),createVNode("div",{class:"mask"},[createVNode("i",{class:"iconfont icon-eye"})])]),_:2},1032,["href","title"])]))),128)),createVNode("li",{class:"item"},[createVNode(w,{class:"link more",href:e.VALUABLE_LINKS.INSTAGRAM},{default:withCtx(()=>[createTextVNode("\u2022\u2022\u2022")]),_:1},8,["href"])])])]}),_:1},i))}const _sfc_setup$14=_sfc_main$14.setup;_sfc_main$14.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/about/media/instagram.vue"),_sfc_setup$14?_sfc_setup$14(e,t):void 0};const InstagramMedia=_export_sfc(_sfc_main$14,[["ssrRender",_sfc_ssrRender$14],["__scopeId","data-v-3d914aba"]]),_sfc_main$13=defineComponent({name:"StatisticBase",props:{brand:String,icon:String,platform:String,href:String,fetching:Boolean,data:Object},setup(){const{isDarkTheme:e}=useEnhancer();return{LanguageKey,isDarkTheme:e}}}),StatisticCount=defineComponent({name:"StatisticCount",props:{count:[Number,String],primary:Boolean,large:Boolean,kilo:Boolean,split:Boolean},render(){const e=Number(this.$props.count),t=this.kilo?numberToKilo(e):this.split?numberSplit(e):String(e),i={primary:this.$props.primary,large:this.large};return h("span",{class:["count",i]},t)}}),base_vue_vue_type_style_index_0_scoped_39e494cb_lang="";function _sfc_ssrRender$13(e,t,i,s,c,d,g,r){const y=resolveComponent("placeholder"),E=resolveComponent("skeleton-base"),w=resolveComponent("ulink");t(`<div${ssrRenderAttrs(mergeProps({class:["statistic",[e.brand,{dark:e.isDarkTheme}]]},s))} data-v-39e494cb>`),t(ssrRenderComponent(y,{"i18n-key":e.LanguageKey.EMPTY_PLACEHOLDER,loading:e.fetching,data:e.data},{loading:withCtx((k,S,I,L)=>{if(S)S(`<ul class="skeletons" data-v-39e494cb${L}><!--[-->`),ssrRenderList(3,D=>{S(ssrRenderComponent(E,{key:D,class:"item"},null,I,L))}),S("<!--]--></ul>");else return[createVNode("ul",{class:"skeletons"},[(openBlock(),createBlock(Fragment,null,renderList(3,D=>createVNode(E,{key:D,class:"item"})),64))])]}),default:withCtx((k,S,I,L)=>{if(S)S(`<div class="content" data-v-39e494cb${L}>`),S(ssrRenderComponent(w,{class:"title",href:e.href},{default:withCtx((D,O,V,z)=>{if(O)O(`<span class="left" data-v-39e494cb${z}><i class="${ssrRenderClass([e.icon,"iconfont"])}" data-v-39e494cb${z}></i><span class="text" data-v-39e494cb${z}>${ssrInterpolate(e.platform)}</span></span><span class="right" data-v-39e494cb${z}><i class="iconfont icon-next" data-v-39e494cb${z}></i></span>`);else return[createVNode("span",{class:"left"},[createVNode("i",{class:["iconfont",e.icon]},null,2),createVNode("span",{class:"text"},toDisplayString(e.platform),1)]),createVNode("span",{class:"right"},[createVNode("i",{class:"iconfont icon-next"})])]}),_:1},I,L)),ssrRenderSlot(e.$slots,"default",{},null,S,I,L),S("</div>");else return[createVNode("div",{class:"content"},[createVNode(w,{class:"title",href:e.href},{default:withCtx(()=>[createVNode("span",{class:"left"},[createVNode("i",{class:["iconfont",e.icon]},null,2),createVNode("span",{class:"text"},toDisplayString(e.platform),1)]),createVNode("span",{class:"right"},[createVNode("i",{class:"iconfont icon-next"})])]),_:1},8,["href"]),renderSlot(e.$slots,"default",{},void 0,!0)])]}),_:3},i)),t("</div>")}const _sfc_setup$13=_sfc_main$13.setup;_sfc_main$13.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/about/statistic/base.vue"),_sfc_setup$13?_sfc_setup$13(e,t):void 0};const StatisticBase=_export_sfc(_sfc_main$13,[["ssrRender",_sfc_ssrRender$13],["__scopeId","data-v-39e494cb"]]),_sfc_main$12=defineComponent({name:"AboutPageDoubanStatistic",components:{StatisticBase,StatisticCount},setup(){const{isZhLang:e}=useEnhancer(),t=useDoubanMoviesStore(),i=ref(!0),s=computed(()=>{var d,g;return Math.trunc((g=(d=t.data)==null?void 0:d.total_spent)!=null?g:0)}),c=computed(()=>{var d,g;return((g=(d=t.data)==null?void 0:d.weekly_avg)!=null?g:0).toFixed(2)});return onMounted(()=>{t.fetch().finally(()=>{i.value=!1})}),{VALUABLE_LINKS,isZhLang:e,fetching:i,store:t,totalSpent:s,weeklyAvg:c}}});function _sfc_ssrRender$12(e,t,i,s,c,d,g,r){const y=resolveComponent("statistic-base"),E=resolveComponent("i18n"),w=resolveComponent("statistic-count");t(ssrRenderComponent(y,mergeProps({brand:"douban",icon:"icon-douban",data:e.store.data,fetching:e.fetching,href:e.VALUABLE_LINKS.DOUBAN_MOVIE,platform:e.isZhLang?"\u6211\u5728\u8C46\u74E3":"Douban Movie"},s),{default:withCtx((k,S,I,L)=>{if(S)S(`<p${L}><i class="iconfont icon-video-outline"${L}></i>`),S(ssrRenderComponent(E,null,{zh:withCtx((D,O,V,z)=>{if(O)O(`<span${z}>\u6807\u8BB0\u770B\u8FC7</span>`),O(ssrRenderComponent(w,{large:"",primary:"",split:"",count:e.store.data.total_collections},null,V,z)),O(`<span${z}>\u90E8\u5F71\u7247</span>`);else return[createVNode("span",null,"\u6807\u8BB0\u770B\u8FC7"),createVNode(w,{large:"",primary:"",split:"",count:e.store.data.total_collections},null,8,["count"]),createVNode("span",null,"\u90E8\u5F71\u7247")]}),en:withCtx((D,O,V,z)=>{if(O)O(ssrRenderComponent(w,{large:"",primary:"",split:"",count:e.store.data.total_collections},null,V,z)),O(`<span${z}>films marked</span>`);else return[createVNode(w,{large:"",primary:"",split:"",count:e.store.data.total_collections},null,8,["count"]),createVNode("span",null,"films marked")]}),_:1},I,L)),S(`</p><p${L}><i class="iconfont icon-clock-outline"${L}></i>`),S(ssrRenderComponent(E,null,{zh:withCtx((D,O,V,z)=>{if(O)O(`<span${z}>\u7D2F\u8BA1\u82B1\u8D39</span>`),O(ssrRenderComponent(w,{split:"",count:e.totalSpent},null,V,z)),O(`<span${z}>\u5C0F\u65F6</span>`);else return[createVNode("span",null,"\u7D2F\u8BA1\u82B1\u8D39"),createVNode(w,{split:"",count:e.totalSpent},null,8,["count"]),createVNode("span",null,"\u5C0F\u65F6")]}),en:withCtx((D,O,V,z)=>{if(O)O(ssrRenderComponent(w,{split:"",count:e.totalSpent},null,V,z)),O(`<span${z}>hrs watching</span>`);else return[createVNode(w,{split:"",count:e.totalSpent},null,8,["count"]),createVNode("span",null,"hrs watching")]}),_:1},I,L)),S(`</p><p${L}><i class="iconfont icon-week"${L}></i>`),S(ssrRenderComponent(E,null,{zh:withCtx((D,O,V,z)=>{if(O)O("\u5E73\u5747\u6BCF\u5468 "),O(ssrRenderComponent(w,{count:e.weeklyAvg},null,V,z)),O(" \u90E8\u5F71\u7247");else return[createTextVNode("\u5E73\u5747\u6BCF\u5468 "),createVNode(w,{count:e.weeklyAvg},null,8,["count"]),createTextVNode(" \u90E8\u5F71\u7247")]}),en:withCtx((D,O,V,z)=>{if(O)O(ssrRenderComponent(w,{count:e.weeklyAvg},null,V,z)),O(" films per week");else return[createVNode(w,{count:e.weeklyAvg},null,8,["count"]),createTextVNode(" films per week")]}),_:1},I,L)),S("</p>");else return[createVNode("p",null,[createVNode("i",{class:"iconfont icon-video-outline"}),createVNode(E,null,{zh:withCtx(()=>[createVNode("span",null,"\u6807\u8BB0\u770B\u8FC7"),createVNode(w,{large:"",primary:"",split:"",count:e.store.data.total_collections},null,8,["count"]),createVNode("span",null,"\u90E8\u5F71\u7247")]),en:withCtx(()=>[createVNode(w,{large:"",primary:"",split:"",count:e.store.data.total_collections},null,8,["count"]),createVNode("span",null,"films marked")]),_:1})]),createVNode("p",null,[createVNode("i",{class:"iconfont icon-clock-outline"}),createVNode(E,null,{zh:withCtx(()=>[createVNode("span",null,"\u7D2F\u8BA1\u82B1\u8D39"),createVNode(w,{split:"",count:e.totalSpent},null,8,["count"]),createVNode("span",null,"\u5C0F\u65F6")]),en:withCtx(()=>[createVNode(w,{split:"",count:e.totalSpent},null,8,["count"]),createVNode("span",null,"hrs watching")]),_:1})]),createVNode("p",null,[createVNode("i",{class:"iconfont icon-week"}),createVNode(E,null,{zh:withCtx(()=>[createTextVNode("\u5E73\u5747\u6BCF\u5468 "),createVNode(w,{count:e.weeklyAvg},null,8,["count"]),createTextVNode(" \u90E8\u5F71\u7247")]),en:withCtx(()=>[createVNode(w,{count:e.weeklyAvg},null,8,["count"]),createTextVNode(" films per week")]),_:1})])]}),_:1},i))}const _sfc_setup$12=_sfc_main$12.setup;_sfc_main$12.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/about/statistic/douban.vue"),_sfc_setup$12?_sfc_setup$12(e,t):void 0};const DoubanStatistic=_export_sfc(_sfc_main$12,[["ssrRender",_sfc_ssrRender$12]]),useNodepressStatisticStore=defineFetchStore({id:"nodepressStatistic",initData:null,fetcher(){return nodepress$1.get("/expansion/statistic").then(e=>e.result)}}),useGitHubStatisticStore=defineFetchStore({id:"openSourceGitHubStatisticStore",initData:null,onlyOnce:!0,fetcher:()=>tunnel$1.dispatch(TunnelModule.OpenSourceGitHubStatistic)}),useNPMStatisticStore=defineFetchStore({id:"openSourceNPMStatisticStore",initData:null,onlyOnce:!0,fetcher:()=>tunnel$1.dispatch(TunnelModule.OpenSourceNPMStatistic),getters:{totalPackages(e){return e.data?Object.keys(e.data.downloads).length:0},totalDownloads(e){let t=0;return e.data&&Object.values(e.data.downloads).forEach(i=>{t+=i}),t},averageScore(e){if(!e.data)return 0;let t=0;return e.data.packages.forEach(i=>{t+=i.score.final}),(t/e.data.packages.length).toFixed(3)}}}),_sfc_main$11=defineComponent({name:"AboutPageGitHubStatistic",components:{StatisticBase,StatisticCount},setup(){const{isZhLang:e}=useEnhancer(),t=ref(!0),i=useGitHubStatisticStore();return onMounted(()=>{i.fetch().finally(()=>{t.value=!1})}),{VALUABLE_LINKS,isZhLang:e,fetching:t,store:i}}});function _sfc_ssrRender$11(e,t,i,s,c,d,g,r){const y=resolveComponent("statistic-base"),E=resolveComponent("i18n"),w=resolveComponent("statistic-count");t(ssrRenderComponent(y,mergeProps({brand:"github",icon:"icon-github",data:e.store.data,fetching:e.fetching,href:e.VALUABLE_LINKS.GITHUB,platform:e.isZhLang?"\u6211\u5728 GitHub":"GitHub"},s),{default:withCtx((k,S,I,L)=>{if(S)S(`<p${L}><i class="iconfont icon-star-outline"${L}></i>`),S(ssrRenderComponent(E,null,{zh:withCtx((D,O,V,z)=>{var U,Z;if(O)O(`<span${z}>\u5171\u83B7\u5F97</span>`),O(ssrRenderComponent(w,{large:"",primary:"",split:"",count:(U=e.store.data)==null?void 0:U.statistics.stars},null,V,z)),O(`<span${z}>\u4E2A star</span>`);else return[createVNode("span",null,"\u5171\u83B7\u5F97"),createVNode(w,{large:"",primary:"",split:"",count:(Z=e.store.data)==null?void 0:Z.statistics.stars},null,8,["count"]),createVNode("span",null,"\u4E2A star")]}),en:withCtx((D,O,V,z)=>{var U,Z;if(O)O(ssrRenderComponent(w,{large:"",primary:"",split:"",count:(U=e.store.data)==null?void 0:U.statistics.stars},null,V,z)),O(`<span${z}>stars</span>`);else return[createVNode(w,{large:"",primary:"",split:"",count:(Z=e.store.data)==null?void 0:Z.statistics.stars},null,8,["count"]),createVNode("span",null,"stars")]}),_:1},I,L)),S(`</p><p${L}><i class="iconfont icon-repository"${L}></i>`),S(ssrRenderComponent(E,null,{zh:withCtx((D,O,V,z)=>{var U,Z;if(O)O(`<span${z}>\u5171\u7EF4\u62A4</span>`),O(ssrRenderComponent(w,{count:(U=e.store.data)==null?void 0:U.repositories.length},null,V,z)),O(`<span${z}>\u4E2A\u5F00\u6E90\u9879\u76EE</span>`);else return[createVNode("span",null,"\u5171\u7EF4\u62A4"),createVNode(w,{count:(Z=e.store.data)==null?void 0:Z.repositories.length},null,8,["count"]),createVNode("span",null,"\u4E2A\u5F00\u6E90\u9879\u76EE")]}),en:withCtx((D,O,V,z)=>{var U,Z;if(O)O(ssrRenderComponent(w,{count:(U=e.store.data)==null?void 0:U.repositories.length},null,V,z)),O(`<span${z}>repositories</span>`);else return[createVNode(w,{count:(Z=e.store.data)==null?void 0:Z.repositories.length},null,8,["count"]),createVNode("span",null,"repositories")]}),_:1},I,L)),S(`</p><p${L}><i class="iconfont icon-organization"${L}></i>`),S(ssrRenderComponent(E,null,{zh:withCtx((D,O,V,z)=>{var U,Z;if(O)O(`<span${z}>\u7EF4\u62A4/\u53D1\u8D77</span>`),O(ssrRenderComponent(w,{count:(U=e.store.data)==null?void 0:U.organizations.length},null,V,z)),O(`<span${z}>\u4E2A\u5F00\u6E90\u7EC4\u7EC7</span>`);else return[createVNode("span",null,"\u7EF4\u62A4/\u53D1\u8D77"),createVNode(w,{count:(Z=e.store.data)==null?void 0:Z.organizations.length},null,8,["count"]),createVNode("span",null,"\u4E2A\u5F00\u6E90\u7EC4\u7EC7")]}),en:withCtx((D,O,V,z)=>{var U,Z;if(O)O(ssrRenderComponent(w,{count:(U=e.store.data)==null?void 0:U.organizations.length},null,V,z)),O(`<span${z}>organizations</span>`);else return[createVNode(w,{count:(Z=e.store.data)==null?void 0:Z.organizations.length},null,8,["count"]),createVNode("span",null,"organizations")]}),_:1},I,L)),S("</p>");else return[createVNode("p",null,[createVNode("i",{class:"iconfont icon-star-outline"}),createVNode(E,null,{zh:withCtx(()=>{var D;return[createVNode("span",null,"\u5171\u83B7\u5F97"),createVNode(w,{large:"",primary:"",split:"",count:(D=e.store.data)==null?void 0:D.statistics.stars},null,8,["count"]),createVNode("span",null,"\u4E2A star")]}),en:withCtx(()=>{var D;return[createVNode(w,{large:"",primary:"",split:"",count:(D=e.store.data)==null?void 0:D.statistics.stars},null,8,["count"]),createVNode("span",null,"stars")]}),_:1})]),createVNode("p",null,[createVNode("i",{class:"iconfont icon-repository"}),createVNode(E,null,{zh:withCtx(()=>{var D;return[createVNode("span",null,"\u5171\u7EF4\u62A4"),createVNode(w,{count:(D=e.store.data)==null?void 0:D.repositories.length},null,8,["count"]),createVNode("span",null,"\u4E2A\u5F00\u6E90\u9879\u76EE")]}),en:withCtx(()=>{var D;return[createVNode(w,{count:(D=e.store.data)==null?void 0:D.repositories.length},null,8,["count"]),createVNode("span",null,"repositories")]}),_:1})]),createVNode("p",null,[createVNode("i",{class:"iconfont icon-organization"}),createVNode(E,null,{zh:withCtx(()=>{var D;return[createVNode("span",null,"\u7EF4\u62A4/\u53D1\u8D77"),createVNode(w,{count:(D=e.store.data)==null?void 0:D.organizations.length},null,8,["count"]),createVNode("span",null,"\u4E2A\u5F00\u6E90\u7EC4\u7EC7")]}),en:withCtx(()=>{var D;return[createVNode(w,{count:(D=e.store.data)==null?void 0:D.organizations.length},null,8,["count"]),createVNode("span",null,"organizations")]}),_:1})])]}),_:1},i))}const _sfc_setup$11=_sfc_main$11.setup;_sfc_main$11.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/about/statistic/github.vue"),_sfc_setup$11?_sfc_setup$11(e,t):void 0};const GithubStatistic=_export_sfc(_sfc_main$11,[["ssrRender",_sfc_ssrRender$11]]),_sfc_main$10=defineComponent({name:"AboutPageTwitterStatistic",components:{StatisticBase,StatisticCount},setup(){const{isZhLang:e}=useEnhancer(),t=ref(!0),i=useTwitterUserinfoStore();return onMounted(()=>{i.fetch().finally(()=>{t.value=!1})}),{VALUABLE_LINKS,isZhLang:e,fetching:t,store:i}}});function _sfc_ssrRender$10(e,t,i,s,c,d,g,r){const y=resolveComponent("statistic-base"),E=resolveComponent("i18n"),w=resolveComponent("statistic-count");t(ssrRenderComponent(y,mergeProps({brand:"twitter",icon:"icon-twitter",data:e.store.data,fetching:e.fetching,href:e.VALUABLE_LINKS.TWITTER,platform:e.isZhLang?"\u6211\u5728\u63A8\u7279":"Twitter"},s),{default:withCtx((k,S,I,L)=>{if(S)S(`<p${L}><i class="iconfont icon-edit"${L}></i>`),S(ssrRenderComponent(E,null,{zh:withCtx((D,O,V,z)=>{var U,Z;if(O)O(`<span${z}>\u53D1\u5E03\u4E86</span>`),O(ssrRenderComponent(w,{large:"",primary:"",split:"",count:(U=e.store.data)==null?void 0:U.public_metrics.tweet_count},null,V,z)),O(`<span${z}>\u6761\u63A8\u6587</span>`);else return[createVNode("span",null,"\u53D1\u5E03\u4E86"),createVNode(w,{large:"",primary:"",split:"",count:(Z=e.store.data)==null?void 0:Z.public_metrics.tweet_count},null,8,["count"]),createVNode("span",null,"\u6761\u63A8\u6587")]}),en:withCtx((D,O,V,z)=>{var U,Z;if(O)O(ssrRenderComponent(w,{large:"",primary:"",split:"",count:(U=e.store.data)==null?void 0:U.public_metrics.tweet_count},null,V,z)),O(`<span${z}>tweets</span>`);else return[createVNode(w,{large:"",primary:"",split:"",count:(Z=e.store.data)==null?void 0:Z.public_metrics.tweet_count},null,8,["count"]),createVNode("span",null,"tweets")]}),_:1},I,L)),S(`</p><p${L}><i class="iconfont icon-following"${L}></i>`),S(ssrRenderComponent(E,null,{zh:withCtx((D,O,V,z)=>{var U,Z;if(O)O(`<span${z}>\u5173\u6CE8\u4E86</span>`),O(ssrRenderComponent(w,{split:"",count:(U=e.store.data)==null?void 0:U.public_metrics.following_count},null,V,z)),O(`<span${z}>\u4E2A\u4EBA</span>`);else return[createVNode("span",null,"\u5173\u6CE8\u4E86"),createVNode(w,{split:"",count:(Z=e.store.data)==null?void 0:Z.public_metrics.following_count},null,8,["count"]),createVNode("span",null,"\u4E2A\u4EBA")]}),en:withCtx((D,O,V,z)=>{var U,Z;if(O)O(ssrRenderComponent(w,{split:"",count:(U=e.store.data)==null?void 0:U.public_metrics.following_count},null,V,z)),O(`<span${z}>following</span>`);else return[createVNode(w,{split:"",count:(Z=e.store.data)==null?void 0:Z.public_metrics.following_count},null,8,["count"]),createVNode("span",null,"following")]}),_:1},I,L)),S(`</p><p${L}><i class="iconfont icon-follower"${L}></i>`),S(ssrRenderComponent(E,null,{zh:withCtx((D,O,V,z)=>{var U,Z;if(O)O(`<span${z}>\u6536\u83B7\u4E86</span>`),O(ssrRenderComponent(w,{split:"",count:(U=e.store.data)==null?void 0:U.public_metrics.followers_count},null,V,z)),O(`<span${z}>\u4E2A\u7C89\u4E1D</span>`);else return[createVNode("span",null,"\u6536\u83B7\u4E86"),createVNode(w,{split:"",count:(Z=e.store.data)==null?void 0:Z.public_metrics.followers_count},null,8,["count"]),createVNode("span",null,"\u4E2A\u7C89\u4E1D")]}),en:withCtx((D,O,V,z)=>{var U,Z;if(O)O(ssrRenderComponent(w,{split:"",count:(U=e.store.data)==null?void 0:U.public_metrics.followers_count},null,V,z)),O(`<span${z}>followers</span>`);else return[createVNode(w,{split:"",count:(Z=e.store.data)==null?void 0:Z.public_metrics.followers_count},null,8,["count"]),createVNode("span",null,"followers")]}),_:1},I,L)),S("</p>");else return[createVNode("p",null,[createVNode("i",{class:"iconfont icon-edit"}),createVNode(E,null,{zh:withCtx(()=>{var D;return[createVNode("span",null,"\u53D1\u5E03\u4E86"),createVNode(w,{large:"",primary:"",split:"",count:(D=e.store.data)==null?void 0:D.public_metrics.tweet_count},null,8,["count"]),createVNode("span",null,"\u6761\u63A8\u6587")]}),en:withCtx(()=>{var D;return[createVNode(w,{large:"",primary:"",split:"",count:(D=e.store.data)==null?void 0:D.public_metrics.tweet_count},null,8,["count"]),createVNode("span",null,"tweets")]}),_:1})]),createVNode("p",null,[createVNode("i",{class:"iconfont icon-following"}),createVNode(E,null,{zh:withCtx(()=>{var D;return[createVNode("span",null,"\u5173\u6CE8\u4E86"),createVNode(w,{split:"",count:(D=e.store.data)==null?void 0:D.public_metrics.following_count},null,8,["count"]),createVNode("span",null,"\u4E2A\u4EBA")]}),en:withCtx(()=>{var D;return[createVNode(w,{split:"",count:(D=e.store.data)==null?void 0:D.public_metrics.following_count},null,8,["count"]),createVNode("span",null,"following")]}),_:1})]),createVNode("p",null,[createVNode("i",{class:"iconfont icon-follower"}),createVNode(E,null,{zh:withCtx(()=>{var D;return[createVNode("span",null,"\u6536\u83B7\u4E86"),createVNode(w,{split:"",count:(D=e.store.data)==null?void 0:D.public_metrics.followers_count},null,8,["count"]),createVNode("span",null,"\u4E2A\u7C89\u4E1D")]}),en:withCtx(()=>{var D;return[createVNode(w,{split:"",count:(D=e.store.data)==null?void 0:D.public_metrics.followers_count},null,8,["count"]),createVNode("span",null,"followers")]}),_:1})])]}),_:1},i))}const _sfc_setup$10=_sfc_main$10.setup;_sfc_main$10.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/about/statistic/twitter.vue"),_sfc_setup$10?_sfc_setup$10(e,t):void 0};const TwitterStatistic=_export_sfc(_sfc_main$10,[["ssrRender",_sfc_ssrRender$10]]),_sfc_main$$=defineComponent({name:"AboutPageNPMStatistic",components:{StatisticBase,StatisticCount},setup(){const{isZhLang:e}=useEnhancer(),t=ref(!0),i=useNPMStatisticStore();return onMounted(()=>{i.fetch().finally(()=>{t.value=!1})}),{VALUABLE_LINKS,isZhLang:e,fetching:t,store:i}}}),npm_vue_vue_type_style_index_0_scoped_5f157c0c_lang="";function _sfc_ssrRender$$(e,t,i,s,c,d,g,r){const y=resolveComponent("statistic-base"),E=resolveComponent("i18n"),w=resolveComponent("statistic-count");t(ssrRenderComponent(y,mergeProps({brand:"npm",icon:"icon-npm",data:e.store.data,fetching:e.fetching,href:e.VALUABLE_LINKS.NPM_HOMEPAGE,platform:e.isZhLang?"\u6211\u5728 NPM":"NPM"},s),{default:withCtx((k,S,I,L)=>{if(S)S(`<p class="line-1" data-v-5f157c0c${L}><i class="iconfont icon-package" data-v-5f157c0c${L}></i>`),S(ssrRenderComponent(E,null,{zh:withCtx((D,O,V,z)=>{if(O)O(`<span data-v-5f157c0c${z}>\u53D1\u5E03\u4E86</span>`),O(ssrRenderComponent(w,{count:e.store.totalPackages},null,V,z)),O(`<span data-v-5f157c0c${z}>\u4E2A\u516C\u5171\u8F6F\u4EF6\u5305</span>`);else return[createVNode("span",null,"\u53D1\u5E03\u4E86"),createVNode(w,{count:e.store.totalPackages},null,8,["count"]),createVNode("span",null,"\u4E2A\u516C\u5171\u8F6F\u4EF6\u5305")]}),en:withCtx((D,O,V,z)=>{if(O)O(ssrRenderComponent(w,{count:e.store.totalPackages},null,V,z)),O(`<span data-v-5f157c0c${z}>packages</span>`);else return[createVNode(w,{count:e.store.totalPackages},null,8,["count"]),createVNode("span",null,"packages")]}),_:1},I,L)),S(`</p><p data-v-5f157c0c${L}><i class="iconfont icon-download" data-v-5f157c0c${L}></i>`),S(ssrRenderComponent(E,null,{zh:withCtx((D,O,V,z)=>{if(O)O(`<span data-v-5f157c0c${z}>\u88AB\u4E0B\u8F7D</span>`),O(ssrRenderComponent(w,{large:"",primary:"",split:"",count:e.store.totalDownloads},null,V,z)),O(`<span data-v-5f157c0c${z}>\u6B21</span>`);else return[createVNode("span",null,"\u88AB\u4E0B\u8F7D"),createVNode(w,{large:"",primary:"",split:"",count:e.store.totalDownloads},null,8,["count"]),createVNode("span",null,"\u6B21")]}),en:withCtx((D,O,V,z)=>{if(O)O(ssrRenderComponent(w,{large:"",primary:"",split:"",count:e.store.totalDownloads},null,V,z)),O(`<span data-v-5f157c0c${z}>downs</span>`);else return[createVNode(w,{large:"",primary:"",split:"",count:e.store.totalDownloads},null,8,["count"]),createVNode("span",null,"downs")]}),_:1},I,L)),S(`</p><p data-v-5f157c0c${L}><i class="iconfont icon-score" data-v-5f157c0c${L}></i>`),S(ssrRenderComponent(E,null,{zh:withCtx((D,O,V,z)=>{if(O)O(`<span data-v-5f157c0c${z}>\u5E73\u5747\u8BC4\u5206</span>`),O(ssrRenderComponent(w,{count:e.store.averageScore},null,V,z)),O(`<span data-v-5f157c0c${z}>\u5206</span>`);else return[createVNode("span",null,"\u5E73\u5747\u8BC4\u5206"),createVNode(w,{count:e.store.averageScore},null,8,["count"]),createVNode("span",null,"\u5206")]}),en:withCtx((D,O,V,z)=>{if(O)O(ssrRenderComponent(w,{count:e.store.averageScore},null,V,z)),O(`<span data-v-5f157c0c${z}>average score</span>`);else return[createVNode(w,{count:e.store.averageScore},null,8,["count"]),createVNode("span",null,"average score")]}),_:1},I,L)),S("</p>");else return[createVNode("p",{class:"line-1"},[createVNode("i",{class:"iconfont icon-package"}),createVNode(E,null,{zh:withCtx(()=>[createVNode("span",null,"\u53D1\u5E03\u4E86"),createVNode(w,{count:e.store.totalPackages},null,8,["count"]),createVNode("span",null,"\u4E2A\u516C\u5171\u8F6F\u4EF6\u5305")]),en:withCtx(()=>[createVNode(w,{count:e.store.totalPackages},null,8,["count"]),createVNode("span",null,"packages")]),_:1})]),createVNode("p",null,[createVNode("i",{class:"iconfont icon-download"}),createVNode(E,null,{zh:withCtx(()=>[createVNode("span",null,"\u88AB\u4E0B\u8F7D"),createVNode(w,{large:"",primary:"",split:"",count:e.store.totalDownloads},null,8,["count"]),createVNode("span",null,"\u6B21")]),en:withCtx(()=>[createVNode(w,{large:"",primary:"",split:"",count:e.store.totalDownloads},null,8,["count"]),createVNode("span",null,"downs")]),_:1})]),createVNode("p",null,[createVNode("i",{class:"iconfont icon-score"}),createVNode(E,null,{zh:withCtx(()=>[createVNode("span",null,"\u5E73\u5747\u8BC4\u5206"),createVNode(w,{count:e.store.averageScore},null,8,["count"]),createVNode("span",null,"\u5206")]),en:withCtx(()=>[createVNode(w,{count:e.store.averageScore},null,8,["count"]),createVNode("span",null,"average score")]),_:1})])]}),_:1},i))}const _sfc_setup$$=_sfc_main$$.setup;_sfc_main$$.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/about/statistic/npm.vue"),_sfc_setup$$?_sfc_setup$$(e,t):void 0};const NpmStatistic=_export_sfc(_sfc_main$$,[["ssrRender",_sfc_ssrRender$$],["__scopeId","data-v-5f157c0c"]]),_sfc_main$_=defineComponent({name:"AggregateCalendarDay",props:{date:{type:String,required:!0},tweets:{type:Number,required:!0},instagrams:{type:Number,required:!0},articles:{type:Number,required:!0},contributions:{type:Number,required:!0},githubColor:String},setup(e){const{isDarkTheme:t}=useEnhancer(),i=computed(()=>e.articles+e.tweets+e.contributions+e.instagrams);return{isDarkTheme:t,total:i,getPointHeightStyle:c=>isNaN(c)?0:`${Math.floor(c*100)}%`}}}),day_vue_vue_type_style_index_0_scoped_8767dbcf_lang="";function _sfc_ssrRender$_(e,t,i,s,c,d,g,r){t(`<div${ssrRenderAttrs(mergeProps({class:["day",{dark:e.isDarkTheme}],"data-date":e.date,"data-total-count":e.total,"data-article-count":e.articles,"data-tweet-count":e.tweets,"data-instagram-count":e.instagrams,"data-contribution-count":e.contributions},s))} data-v-8767dbcf><div class="point" data-v-8767dbcf><div class="item article" style="${ssrRenderStyle({height:e.getPointHeightStyle(e.articles/e.total)})}" data-v-8767dbcf></div><div class="item tweet" style="${ssrRenderStyle({height:e.getPointHeightStyle(e.tweets/e.total)})}" data-v-8767dbcf></div><div class="item instagram" style="${ssrRenderStyle({height:e.getPointHeightStyle(e.instagrams/e.total)})}" data-v-8767dbcf></div><div class="item contribution" style="${ssrRenderStyle({height:e.getPointHeightStyle(e.contributions/e.total),backgroundColor:e.githubColor})}" data-v-8767dbcf></div></div>`),e.total?t(`<div class="tooltip" data-v-8767dbcf><p class="date" data-v-8767dbcf>${ssrInterpolate(e.date)}</p><ul class="counts" data-v-8767dbcf><li class="item article" data-v-8767dbcf><i class="iconfont icon-quill" data-v-8767dbcf></i><span class="count" data-v-8767dbcf>${ssrInterpolate(e.articles)}</span> articles </li><li class="item tweet" data-v-8767dbcf><i class="iconfont icon-twitter" data-v-8767dbcf></i><span class="count" data-v-8767dbcf>${ssrInterpolate(e.tweets)}</span> tweets </li><li class="item instagram" data-v-8767dbcf><i class="iconfont icon-instagram" data-v-8767dbcf></i><span class="count" data-v-8767dbcf>${ssrInterpolate(e.instagrams)}</span> instagrams </li><li class="item contribution" data-v-8767dbcf><i class="iconfont icon-github" data-v-8767dbcf></i><span class="count" data-v-8767dbcf>${ssrInterpolate(e.contributions)}</span> contributions </li></ul></div>`):t("<!---->"),t("</div>")}const _sfc_setup$_=_sfc_main$_.setup;_sfc_main$_.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/about/calendar/day.vue"),_sfc_setup$_?_sfc_setup$_(e,t):void 0};const CalendarDay=_export_sfc(_sfc_main$_,[["ssrRender",_sfc_ssrRender$_],["__scopeId","data-v-8767dbcf"]]),_sfc_main$Z=defineComponent({name:"AggregateCalendar",components:{CalendarDay},setup(){const{gtag:e}=useEnhancer(),{articleCalendar:t,twitterCalendar:i,instagramCalendar:s,githubCalendar:c}=useStores(),d=computed(()=>new Map(c.days.map(V=>[V.date,V]))),g=V=>{var z;return((z=d.value.get(V))==null?void 0:z.count)||0},r=V=>{var z;return(z=d.value.get(V))==null?void 0:z.color},y=V=>{var z;return((z=i.data.find(U=>U.date===V))==null?void 0:z.count)||0},E=V=>{var z;return((z=s.data.find(U=>U.date===V))==null?void 0:z.count)||0},w=V=>{var z;return((z=t.data.find(U=>U.date===V))==null?void 0:z.count)||0},k=()=>{e==null||e.event("aggregate_calendar",{event_category:GAEventCategories.About})},S=new Date,I=dateToHuman(S),L=Array.from({length:I.day}).map((V,z)=>humanDateToYMD({...I,day:z+1})),D=(V,z)=>{const U=new Date(V.year,V.month-z,0),Z=U.getDate();return Array.from({length:Z}).map((W,ne)=>humanDateToYMD({...dateToHuman(U),day:ne+1}))},O=[D(I,11),D(I,10),D(I,9),D(I,8),D(I,7),D(I,6),D(I,5),D(I,4),D(I,3),D(I,2),D(I,1),L];return onMounted(()=>{t.fetch(),i.fetch(),s.fetch(),c.fetch()}),{months:O,handleHover:k,getDayTweets:y,getDayArticles:w,getDayInstagrams:E,getDayContributions:g,getDayGitHubColor:r}}}),index_vue_vue_type_style_index_0_scoped_0b5e9a9a_lang="";function _sfc_ssrRender$Z(e,t,i,s,c,d,g,r){const y=resolveComponent("calendar-day");t(`<ul${ssrRenderAttrs(mergeProps({class:"aggregate-calendar"},s))} data-v-0b5e9a9a><!--[-->`),ssrRenderList(e.months,(E,w)=>{t('<li class="month" data-v-0b5e9a9a><!--[-->'),ssrRenderList(E,(k,S)=>{t(ssrRenderComponent(y,{key:S,date:k,articles:e.getDayArticles(k),tweets:e.getDayTweets(k),instagrams:e.getDayInstagrams(k),contributions:e.getDayContributions(k),"github-color":e.getDayGitHubColor(k)},null,i))}),t("<!--]--></li>")}),t("<!--]--></ul>")}const _sfc_setup$Z=_sfc_main$Z.setup;_sfc_main$Z.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/about/calendar/index.vue"),_sfc_setup$Z?_sfc_setup$Z(e,t):void 0};const AggregateCalendar=_export_sfc(_sfc_main$Z,[["ssrRender",_sfc_ssrRender$Z],["__scopeId","data-v-0b5e9a9a"]]),getAdminAvatar=e=>e||getDefaultAvatar(),i18ns$1={footprint:{[Language.Chinese]:"\u8DEF\u4E3A\u7EB8\uFF0C\u5730\u6210\u518C\uFF0C\u884C\u4F5C\u7B14\uFF0C\u5FC3\u5F53\u58A8\uFF1B\u601D\u65E0\u754C\uFF0C\u884C\u6709\u7586",[Language.English]:"Every path i went astray built up my Rome."},freelancer:{[Language.Chinese]:"\u4E0E\u6211\u5408\u4F5C",[Language.English]:"Freelancer"},sponsor:{[Language.Chinese]:"\u5411\u6211\u8D5E\u52A9",[Language.English]:"Sponsor"},statement:{[Language.Chinese]:"\u4F17\u800C\u5468\u77E5",[Language.English]:"Statement"},feedback:{[Language.Chinese]:"\u5411\u6211\u53CD\u9988",[Language.English]:"Feedback"},archive:{[Language.Chinese]:"\u7B14\u6587\u5B58\u6863",[Language.English]:"Archive"},lens:{[Language.Chinese]:"\u884C\u884C\u6444\u6444",[Language.English]:"Lens view"},guestbook:{[Language.Chinese]:"\u7ED9\u6211\u7559\u8A00",[Language.English]:"Guestbook"},merchBar:{[Language.Chinese]:"\u5468\u8FB9\u597D\u7269",[Language.English]:"Merch bar"},rss:{[Language.Chinese]:"\u957F\u671F\u8BA2\u9605",[Language.English]:"Subscribe"},discordGroup:{[Language.Chinese]:"\u56FD\u9645\u8054\u8C0A",[Language.English]:"Discord"},telegramGroup:{[Language.Chinese]:"\u81EA\u7531\u62A5\u793E",[Language.English]:"TG group"}},useAboutPageMeta=()=>{const{i18n:e,meta:t,isZhLang:i}=useEnhancer();return t(()=>{const s=firstUpperCase(e.t(LanguageKey.PAGE_ABOUT,Language.English));return{pageTitle:(i.value?[e.t(LanguageKey.PAGE_ABOUT),s]:[s]).join(" | "),description:`\u5173\u4E8E ${META.author}`}})},SPECIAL_LINKS=Object.freeze([{name:"GitHub",url:"https://github.com"},{name:"PM2",url:"https://pm2.keymetrics.io/"},{name:"Vite",url:"https://vitejs.dev/"},{name:"Disqus",url:"https://disqus.com/"}]),gmmFoldersToGeoJSON=e=>({type:"FeatureCollection",features:e.map(t=>t.placemarks).flat().map(t=>({type:"Feature",geometry:{type:"Point",coordinates:t.coordinates},properties:{...t,icon:t.image?"attraction":"veterinary"}}))}),geoJSONFeatureToLayer=(e,t)=>({id:e,source:t,type:"symbol",layout:{"icon-allow-overlap":!0,"icon-size":1.2,"icon-image":["get","icon"],"text-field":["get","name"],"text-font":["Open Sans Bold","Arial Unicode MS Bold"],"text-size":11,"text-letter-spacing":.05,"text-offset":[0,1],"text-anchor":"top"},paint:{"text-color":"#202","text-halo-color":"#fff","text-halo-width":2}}),newMapboxPopup=(e,t,i)=>new e.Popup({closeButton:!1,offset:[0,-16],maxWidth:"280px"}).setLngLat(t).setHTML(i),mapboxGl$3="",_sfc_main$Y=defineComponent({name:"FootprintMapbox",props:{gmGeoJson:Object},emits:["ready"],setup(e,t){const{isDarkTheme:i}=useEnhancer(),s=shallowRef(),c=shallowRef(),d=shallowRef(),g=shallowRef(!1),r=()=>i.value?MAPBOX_CONFIG.STYLE_DARK:MAPBOX_CONFIG.STYLE_LIGHT,y=()=>{var E;if(g.value&&(E=e.gmGeoJson)!=null&&E.features.length){const w=d.value,k="placemarks";w.getLayer(k)||(w.addLayer(geoJSONFeatureToLayer(k,{type:"geojson",data:e.gmGeoJson})),w.on("mouseenter",k,()=>{w.getCanvas().style.cursor="pointer"}),w.on("mouseleave",k,()=>{w.getCanvas().style.cursor=""}),w.on("click",k,S=>{const I=S.features[0].geometry.coordinates.slice(),L=S.features[0].properties.description;for(;Math.abs(S.lngLat.lng-I[0])>180;)I[0]+=S.lngLat.lng>I[0]?360:-360;newMapboxPopup(c.value,I,L).addTo(w)}))}};return watch(()=>i.value,()=>{var E;return(E=d.value)==null?void 0:E.setStyle(r())}),watch(()=>e.gmGeoJson,()=>y()),onMounted(()=>{Promise.all([Promise.resolve().then(()=>mapboxGl$1).then(E=>E.default),new Promise(E=>window.setTimeout(E,600))]).then(([E])=>{E.accessToken=MAPBOX_CONFIG.TOKEN,c.value=E,d.value=new E.Map({container:s.value,center:MAPBOX_CONFIG.CENTER,zoom:MAPBOX_CONFIG.ZOOM,attributionControl:!1,style:r()}),new E.Marker({color:META.primary,anchor:"bottom"}).setLngLat(GEO_INFO.coordinates).addTo(d.value),d.value.on("style.load",()=>{y()}),d.value.on("load",()=>{g.value=!0,y(),t.emit("ready",{map:d.value,lib:c.value})})})}),onBeforeUnmount(()=>{var E;(E=d.value)==null||E.remove()}),{mapboxRef:s}}}),mapbox_vue_vue_type_style_index_0_scoped_b2933bab_lang="";function _sfc_ssrRender$Y(e,t,i,s,c,d,g,r){t(`<div${ssrRenderAttrs(mergeProps({class:"mapbox",ref:"mapboxRef"},s))} data-v-b2933bab></div>`)}const _sfc_setup$Y=_sfc_main$Y.setup;_sfc_main$Y.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/about/footprint/mapbox.vue"),_sfc_setup$Y?_sfc_setup$Y(e,t):void 0};const Mapbox=_export_sfc(_sfc_main$Y,[["ssrRender",_sfc_ssrRender$Y],["__scopeId","data-v-b2933bab"]]),_sfc_main$X=defineComponent({name:"FootprintModal",components:{Mapbox},props:{name:String,description:String,gmGeoJson:Object,gmFolders:Array},setup(){const{isZhLang:e}=useEnhancer(),t=shallowRef(),i=shallowRef(),s=g=>{t.value=g.lib,i.value=g.map};let c=null;return{GEO_INFO,VALUABLE_LINKS,isZhLang:e,handlePlacemarkClick:g=>{i.value&&(c==null||c.remove(),c=newMapboxPopup(t.value,g.coordinates,g.description).addTo(i.value),i.value.flyTo({center:g.coordinates,zoom:10,speed:1.2,curve:1.2}))},handleMapboxReady:s}}}),modal_vue_vue_type_style_index_0_scoped_283b533b_lang="";function _sfc_ssrRender$X(e,t,i,s,c,d,g,r){var w,k;const y=resolveComponent("mapbox"),E=resolveComponent("uimage");t(`<div${ssrRenderAttrs(mergeProps({class:"modal"},s))} data-v-283b533b>`),t(ssrRenderComponent(y,{class:"mapbox","gm-geo-json":e.gmGeoJson,onReady:e.handleMapboxReady},null,i)),t(`<div class="panel" data-v-283b533b><div class="info" data-v-283b533b><h3 class="title" data-v-283b533b>${ssrInterpolate((w=e.name)!=null?w:"-")}</h3><p class="description" data-v-283b533b>${ssrInterpolate((k=e.description)!=null?k:"-")}</p></div><ul class="folders" data-v-283b533b><!--[-->`),ssrRenderList(e.gmFolders,(S,I)=>{t(`<li class="folder" data-v-283b533b><div class="title" data-v-283b533b><i class="iconfont icon-route" data-v-283b533b></i><span class="text" data-v-283b533b>${ssrInterpolate(S.name)}</span><span class="count" data-v-283b533b>(${ssrInterpolate(S.placemarks.length)})</span></div>`),S.placemarks.length?(t('<ul class="placemarks" data-v-283b533b><!--[-->'),ssrRenderList(S.placemarks,(L,D)=>{t('<li class="placemark" data-v-283b533b>'),t(ssrRenderComponent(E,{class:"icon",cdn:!0,src:`/images/third-party/mapbox-${L.image?"attraction":"veterinary"}.svg`},null,i)),t(`<span class="text" data-v-283b533b>${ssrInterpolate(L.name)}</span></li>`)}),t("<!--]--></ul>")):t('<div class="empty" data-v-283b533b>null</div>'),t("</li>")}),t("<!--]--></ul></div></div>")}const _sfc_setup$X=_sfc_main$X.setup;_sfc_main$X.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/about/footprint/modal.vue"),_sfc_setup$X?_sfc_setup$X(e,t):void 0};const FootprintModal=_export_sfc(_sfc_main$X,[["ssrRender",_sfc_ssrRender$X],["__scopeId","data-v-283b533b"]]),_sfc_main$W=defineComponent({name:"AboutPageFootprint",components:{Mapbox,FootprintModal},setup(){const{isZhLang:e}=useEnhancer(),t=shallowRef(),i=shallowRef(!1),s=useMyGoogleMapStore(),c=computed(()=>{var k,S;const w=[...(S=(k=s.data)==null?void 0:k.Folder)!=null?S:[]];return w.reverse(),w.map((I,L)=>{var V;const D=(V=I.Placemark)!=null?V:[],O=Array.isArray(D)?D:[D];return{name:I.name,placemarks:O.map((z,U)=>{var re;const[Z,W]=z.Point.coordinates.split(",").map(Number),ne=(re=z.ExtendedData)==null?void 0:re.Data;return{index:U,id:`placemark-${L}-${U}`,name:z.name,description:z.description,coordinates:[Z,W],image:(ne==null?void 0:ne["@name"])==="gx_media_links"?ne==null?void 0:ne.value:null}})}})}),d=computed(()=>gmmFoldersToGeoJSON(c.value)),g=()=>{i.value=!0},r=w=>{var I;const k=c.value[w],[S]=k.placemarks;S&&((I=t.value)==null||I.flyTo({center:S.coordinates,zoom:4,speed:1.2}))},y=w=>{t.value=w.map},E=()=>{var w;(w=t.value)==null||w.flyTo({center:GEO_INFO.coordinates,zoom:14})};return onMounted(()=>{s.fetch()}),{GEO_INFO,VALUABLE_LINKS,isZhLang:e,i18ns:i18ns$1,modalVisible:i,gmStore:s,gmFolders:c,gmGeoJson:d,openModal:g,handleMapboxReady:y,handleFolderClick:r,handleLivingNow:E}}}),index_vue_vue_type_style_index_0_scoped_21a51e26_lang="";function _sfc_ssrRender$W(e,t,i,s,c,d,g,r){const y=resolveComponent("client-only"),E=resolveComponent("popup"),w=resolveComponent("footprint-modal"),k=resolveComponent("mapbox"),S=resolveComponent("ulink");t(`<div${ssrRenderAttrs(mergeProps({class:"footprint-map"},s))} data-v-21a51e26>`),t(ssrRenderComponent(y,null,{default:withCtx((I,L,D,O)=>{if(L)L(ssrRenderComponent(E,{visible:e.modalVisible,"onUpdate:visible":V=>e.modalVisible=V,"scroll-close":!1},{default:withCtx((V,z,U,Z)=>{var W,ne,re,ie;if(z)z(ssrRenderComponent(w,{class:"footprint-modal",name:(W=e.gmStore.data)==null?void 0:W.name,description:(ne=e.gmStore.data)==null?void 0:ne.description,"gm-folders":e.gmFolders,"gm-geo-json":e.gmGeoJson},null,U,Z));else return[createVNode(w,{class:"footprint-modal",name:(re=e.gmStore.data)==null?void 0:re.name,description:(ie=e.gmStore.data)==null?void 0:ie.description,"gm-folders":e.gmFolders,"gm-geo-json":e.gmGeoJson},null,8,["name","description","gm-folders","gm-geo-json"])]}),_:1},D,O));else return[createVNode(E,{visible:e.modalVisible,"onUpdate:visible":V=>e.modalVisible=V,"scroll-close":!1},{default:withCtx(()=>{var V,z;return[createVNode(w,{class:"footprint-modal",name:(V=e.gmStore.data)==null?void 0:V.name,description:(z=e.gmStore.data)==null?void 0:z.description,"gm-folders":e.gmFolders,"gm-geo-json":e.gmGeoJson},null,8,["name","description","gm-folders","gm-geo-json"])]}),_:1},8,["visible","onUpdate:visible"])]}),_:1},i)),t(`<div class="mapbox-wrapper"${ssrRenderAttr("placeholder",e.isZhLang?e.i18ns.footprint.zh:e.i18ns.footprint.en)} data-v-21a51e26>`),t(ssrRenderComponent(k,{class:"mapbox","gm-geo-json":e.gmGeoJson,onReady:e.handleMapboxReady},null,i)),t('<div class="toolbar" data-v-21a51e26>'),t(ssrRenderComponent(S,{class:"button",href:e.VALUABLE_LINKS.GOOGLE_MY_MAP},{default:withCtx((I,L,D,O)=>{if(L)L(`<i class="iconfont icon-google-maps" data-v-21a51e26${O}></i>`);else return[createVNode("i",{class:"iconfont icon-google-maps"})]}),_:1},i)),t(`<button class="button" data-v-21a51e26><i class="iconfont icon-fullscreen" data-v-21a51e26></i></button></div></div><div class="legends" data-v-21a51e26><div class="now" data-v-21a51e26><i class="iconfont icon-location" data-v-21a51e26></i><span class="text" data-v-21a51e26>${ssrInterpolate(e.isZhLang?e.GEO_INFO.zh_title:e.GEO_INFO.en_title)}</span></div>`),e.gmStore.data?(t('<ul class="folders" data-v-21a51e26><!--[-->'),ssrRenderList(e.gmFolders.slice(0,4),(I,L)=>{t(`<li class="item" data-v-21a51e26><i class="iconfont icon-route" data-v-21a51e26></i><span class="text" data-v-21a51e26>${ssrInterpolate(I.name)}</span><span class="count" data-v-21a51e26>(${ssrInterpolate(I.placemarks.length)})</span></li>`)}),t('<!--]--><li class="item" data-v-21a51e26><i class="iconfont icon-route" data-v-21a51e26></i><span class="text" data-v-21a51e26>\u2022\u2022\u2022</span></li></ul>')):t("<!---->"),t("</div></div>")}const _sfc_setup$W=_sfc_main$W.setup;_sfc_main$W.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/about/footprint/index.vue"),_sfc_setup$W?_sfc_setup$W(e,t):void 0};const FootprintMap=_export_sfc(_sfc_main$W,[["ssrRender",_sfc_ssrRender$W],["__scopeId","data-v-21a51e26"]]),_sfc_main$V=defineComponent({name:"DesktopAboutPage",components:{FootprintMap,AggregateCalendar,DoubanStatistic,GithubStatistic,NpmStatistic,TwitterStatistic,InstagramMedia},setup(){const{gtag:e,globalState:t,isZhLang:i,isDarkTheme:s}=useEnhancer(),{adminInfo:c,appOption:d}=useStores(),g=L=>{e==null||e.event(L,{event_category:GAEventCategories.About})},r=reactive({wechat:!1}),y=()=>{r.wechat=!0,g("wechat_modal")},E=()=>{t.toggleSwitcher("sponsor",!0),g("sponsor_modal")},w=()=>{t.toggleSwitcher("statement",!0),g("statement_modal")},k=()=>{t.toggleSwitcher("feedback",!0),g("feedback_modal")},S=getTargetStaticURL("/assets/page-about-background.mp4");useAboutPageMeta(),useUniversalFetch(()=>Promise.all([c.fetch(),d.fetch()]));const I=[{class:"lens",icon:"icon-lens",i18n:i18ns$1.lens,route:getPageRoute(RouteName.Lens)},{class:"merch",icon:"icon-rubik",i18n:i18ns$1.merchBar,route:getPageRoute(RouteName.Merch)},{class:"archive",icon:"icon-quill",i18n:i18ns$1.archive,route:getPageRoute(RouteName.Archive)},{class:"guestbook",icon:"icon-comment",i18n:i18ns$1.guestbook,route:getPageRoute(RouteName.Guestbook)},{class:"feedback",icon:"icon-mail-plane",i18n:i18ns$1.feedback,onClick:k},{class:"telegram",icon:"icon-telegram",i18n:i18ns$1.telegramGroup,href:VALUABLE_LINKS.TELEGRAM_GROUP},{class:"discord",icon:"icon-discord",i18n:i18ns$1.discordGroup,href:VALUABLE_LINKS.DISCORD_GROUP},{class:"sponsor",icon:"icon-heart",i18n:i18ns$1.sponsor,onClick:E},{class:"statement",icon:"icon-faq",i18n:i18ns$1.statement,onClick:w},{class:"rss",icon:"icon-rss",i18n:i18ns$1.rss,href:VALUABLE_LINKS.RSS}];return{i18ns:i18ns$1,links:I,META,VALUABLE_LINKS,SPECIAL_LINKS,isZhLang:i,isDarkTheme:s,modalState:r,backgroundVideo:S,adminInfo:c,appOption:d,getAdminAvatar,handleGTagEvent:g,handleFeedback:k,handleStatement:w,handleOpenWechat:y}}}),desktop_vue_vue_type_style_index_0_scoped_4d56b26e_lang="";function _sfc_ssrRender$V(e,t,i,s,c,d,g,r){var ne,re,ie,Ce;const y=resolveComponent("uimage"),E=resolveComponent("webfont"),w=resolveComponent("ulink"),k=resolveComponent("client-only"),S=resolveComponent("popup"),I=resolveComponent("i18n"),L=resolveComponent("github-statistic"),D=resolveComponent("npm-statistic"),O=resolveComponent("twitter-statistic"),V=resolveComponent("douban-statistic"),z=resolveComponent("instagram-media"),U=resolveComponent("footprint-map"),Z=resolveComponent("aggregate-calendar"),W=resolveComponent("divider");t(`<div${ssrRenderAttrs(mergeProps({class:"about-page"},s))} data-v-4d56b26e><div class="banner" data-v-4d56b26e><div class="background" data-v-4d56b26e><video class="video" loop muted autoplay${includeBooleanAttr(!1)?" controls":""} data-v-4d56b26e><source${ssrRenderAttr("src",e.backgroundVideo)} type="video/mp4" data-v-4d56b26e></video></div><div class="avatar" data-v-4d56b26e>`),t(ssrRenderComponent(y,{class:"image",src:e.getAdminAvatar((ne=e.adminInfo.data)==null?void 0:ne.avatar)},null,i)),t(`<h1 class="name" data-v-4d56b26e>${ssrInterpolate(((re=e.adminInfo.data)==null?void 0:re.name)||"-")}</h1><p class="role" data-v-4d56b26e>${ssrInterpolate(((ie=e.adminInfo.data)==null?void 0:ie.slogan)||"-")}</p><p class="bio-text" data-v-4d56b26e>`),t(ssrRenderComponent(E,{bolder:""},{default:withCtx((we,fe,de,Le)=>{if(fe)fe(`${ssrInterpolate(e.isZhLang?e.META.zh_biography:e.META.en_biography)}`);else return[createTextVNode(toDisplayString(e.isZhLang?e.META.zh_biography:e.META.en_biography),1)]}),_:1},i)),t('</p><div class="socials" data-v-4d56b26e><span class="normal" data-v-4d56b26e>'),t(ssrRenderComponent(w,{class:"item github",href:e.VALUABLE_LINKS.GITHUB},{default:withCtx((we,fe,de,Le)=>{if(fe)fe(`<i class="iconfont icon-github" data-v-4d56b26e${Le}></i><span class="text" data-v-4d56b26e${Le}>GitHub</span>`);else return[createVNode("i",{class:"iconfont icon-github"}),createVNode("span",{class:"text"},"GitHub")]}),_:1},i)),t(ssrRenderComponent(w,{class:"item twitter",href:e.VALUABLE_LINKS.TWITTER},{default:withCtx((we,fe,de,Le)=>{if(fe)fe(`<i class="iconfont icon-twitter" data-v-4d56b26e${Le}></i><span class="text" data-v-4d56b26e${Le}>Twitter</span>`);else return[createVNode("i",{class:"iconfont icon-twitter"}),createVNode("span",{class:"text"},"Twitter")]}),_:1},i)),t(ssrRenderComponent(w,{class:"item instagram",href:e.VALUABLE_LINKS.INSTAGRAM},{default:withCtx((we,fe,de,Le)=>{if(fe)fe(`<i class="iconfont icon-instagram" data-v-4d56b26e${Le}></i><span class="text" data-v-4d56b26e${Le}>Instagram</span>`);else return[createVNode("i",{class:"iconfont icon-instagram"}),createVNode("span",{class:"text"},"Instagram")]}),_:1},i)),t(ssrRenderComponent(w,{class:"item youtube",href:e.VALUABLE_LINKS.YOUTUBE_CHANNEL},{default:withCtx((we,fe,de,Le)=>{if(fe)fe(`<i class="iconfont icon-youtube" data-v-4d56b26e${Le}></i><span class="text" data-v-4d56b26e${Le}>YouTube</span>`);else return[createVNode("i",{class:"iconfont icon-youtube"}),createVNode("span",{class:"text"},"YouTube")]}),_:1},i)),t('</span><span class="mini" data-v-4d56b26e>'),t(ssrRenderComponent(w,{class:"item telegram",href:e.VALUABLE_LINKS.TELEGRAM},{default:withCtx((we,fe,de,Le)=>{if(fe)fe(`<i class="iconfont icon-telegram" data-v-4d56b26e${Le}></i>`);else return[createVNode("i",{class:"iconfont icon-telegram"})]}),_:1},i)),t('<button class="item wechat" data-v-4d56b26e><i class="iconfont icon-wechat" data-v-4d56b26e></i>'),t(ssrRenderComponent(k,null,{default:withCtx((we,fe,de,Le)=>{if(fe)fe(ssrRenderComponent(S,{visible:e.modalState.wechat,"onUpdate:visible":Ge=>e.modalState.wechat=Ge,"scroll-close":!1},{default:withCtx((Ge,wt,Te,ze)=>{if(wt)wt(`<div class="qrcode-modal wechat" data-v-4d56b26e${ze}><div class="background" data-v-4d56b26e${ze}></div>`),wt(ssrRenderComponent(y,{class:"image",cdn:"",src:"/images/qrcodes/wechat.jpg"},null,Te,ze)),wt(`<span class="text" data-v-4d56b26e${ze}> \u{1F44B} \xA0 `),wt(ssrRenderComponent(I,{en:"Friend me on WeChat",zh:"\u626B\u7801\u52A0\u5FAE\uFF0C\u89E3\u9501\u7075\u9B42"},null,Te,ze)),wt("</span></div>");else return[createVNode("div",{class:"qrcode-modal wechat"},[createVNode("div",{class:"background"}),createVNode(y,{class:"image",cdn:"",src:"/images/qrcodes/wechat.jpg"}),createVNode("span",{class:"text"},[createTextVNode(" \u{1F44B} \xA0 "),createVNode(I,{en:"Friend me on WeChat",zh:"\u626B\u7801\u52A0\u5FAE\uFF0C\u89E3\u9501\u7075\u9B42"})])])]}),_:1},de,Le));else return[createVNode(S,{visible:e.modalState.wechat,"onUpdate:visible":Ge=>e.modalState.wechat=Ge,"scroll-close":!1},{default:withCtx(()=>[createVNode("div",{class:"qrcode-modal wechat"},[createVNode("div",{class:"background"}),createVNode(y,{class:"image",cdn:"",src:"/images/qrcodes/wechat.jpg"}),createVNode("span",{class:"text"},[createTextVNode(" \u{1F44B} \xA0 "),createVNode(I,{en:"Friend me on WeChat",zh:"\u626B\u7801\u52A0\u5FAE\uFF0C\u89E3\u9501\u7075\u9B42"})])])]),_:1},8,["visible","onUpdate:visible"])]}),_:1},i)),t("</button>"),t(ssrRenderComponent(w,{class:"item linkedin",href:e.VALUABLE_LINKS.LINKEDIN},{default:withCtx((we,fe,de,Le)=>{if(fe)fe(`<i class="iconfont icon-linkedin" data-v-4d56b26e${Le}></i>`);else return[createVNode("i",{class:"iconfont icon-linkedin"})]}),_:1},i)),t(ssrRenderComponent(w,{class:"item douban",href:e.VALUABLE_LINKS.DOUBAN},{default:withCtx((we,fe,de,Le)=>{if(fe)fe(`<i class="iconfont icon-douban" data-v-4d56b26e${Le}></i>`);else return[createVNode("i",{class:"iconfont icon-douban"})]}),_:1},i)),t('</span></div></div></div><div class="container" data-v-4d56b26e><div class="links" data-v-4d56b26e><!--[-->'),ssrRenderList(e.links,(we,fe)=>{renderVNode(t,createVNode(resolveDynamicComponent(we.onClick?"button":"ulink"),{class:["item",we.class],href:we.href,to:we.route,onClick:we.onClick},{default:withCtx((de,Le,Ge,wt)=>{if(Le)Le(`<span class="left" data-v-4d56b26e${wt}><i class="${ssrRenderClass([we.icon,"iconfont"])}" data-v-4d56b26e${wt}></i><span class="text" data-v-4d56b26e${wt}>`),Le(ssrRenderComponent(I,we.i18n,null,Ge,wt)),Le(`</span></span><span class="right" data-v-4d56b26e${wt}><i class="iconfont icon-next" data-v-4d56b26e${wt}></i></span>`);else return[createVNode("span",{class:"left"},[createVNode("i",{class:["iconfont",we.icon]},null,2),createVNode("span",{class:"text"},[createVNode(I,we.i18n,null,16)])]),createVNode("span",{class:"right"},[createVNode("i",{class:"iconfont icon-next"})])]}),_:2}),i)}),t('<!--]--></div><div class="statistics" data-v-4d56b26e>'),t(ssrRenderComponent(L,null,null,i)),t(ssrRenderComponent(D,null,null,i)),t(ssrRenderComponent(O,null,null,i)),t(ssrRenderComponent(V,null,null,i)),t('</div><div class="plogs" data-v-4d56b26e>'),t(ssrRenderComponent(z,null,null,i)),t('</div><div class="footprint" data-v-4d56b26e>'),t(ssrRenderComponent(U,null,null,i)),t('</div><div class="calendar" data-v-4d56b26e>'),t(ssrRenderComponent(Z,null,null,i)),t('</div><div class="footer-links" data-v-4d56b26e><div class="friendlinks" data-v-4d56b26e><!--[-->'),ssrRenderList(((Ce=e.appOption.data)==null?void 0:Ce.friend_links)||[],(we,fe)=>{t("<!--[-->"),t(fe!==0?ssrRenderComponent(W,{type:"vertical",size:"lg"},null,i):"<!---->"),t(`<a${ssrRenderAttr("href",we.value)} class="item" target="_blank" rel="external nofollow noopener" data-v-4d56b26e>${ssrInterpolate(we.name)}</a><!--]-->`)}),t('<!--]--></div><div class="speciallinks" data-v-4d56b26e><!--[-->'),ssrRenderList(e.SPECIAL_LINKS,(we,fe)=>{t("<!--[-->"),t(fe!==0?ssrRenderComponent(W,{type:"vertical",size:"lg"},null,i):"<!---->"),t(`<a${ssrRenderAttr("href",we.url)} class="item" target="_blank" rel="external nofollow noopener" data-v-4d56b26e>${ssrInterpolate(we.name)}</a><!--]-->`)}),t("<!--]--></div></div></div></div>")}const _sfc_setup$V=_sfc_main$V.setup;_sfc_main$V.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/about/desktop.vue"),_sfc_setup$V?_sfc_setup$V(e,t):void 0};const AboutDesktopPage=_export_sfc(_sfc_main$V,[["ssrRender",_sfc_ssrRender$V],["__scopeId","data-v-4d56b26e"]]),_sfc_main$U=defineComponent({name:"FullPageBanner",props:{position:{type:Number,default:20},image:{type:String,required:!0},blur:{type:Boolean,default:!0},isMobile:{type:Boolean,default:!1}},setup(e){const{isDarkTheme:t}=useEnhancer();return{isDarkTheme:t,imageURL:getTargetCDNURL(e.image)}}}),banner_vue_vue_type_style_index_0_scoped_caea9073_lang="";function _sfc_ssrRender$U(e,t,i,s,c,d,g,r){t(`<div${ssrRenderAttrs(mergeProps({class:["banner",{dark:e.isDarkTheme,mobile:e.isMobile}],style:{backgroundImage:`url(${e.imageURL})`,backgroundPositionY:`${e.position}%`}},s))} data-v-caea9073><div class="${ssrRenderClass([{blur:e.blur},"content"])}" data-v-caea9073><h2 class="title" data-v-caea9073>`),ssrRenderSlot(e.$slots,"title",{},null,t,i),t('</h2><div class="description" data-v-caea9073>'),ssrRenderSlot(e.$slots,"description",{},null,t,i),t("</div></div></div>")}const _sfc_setup$U=_sfc_main$U.setup;_sfc_main$U.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/common/fullpage/banner.vue"),_sfc_setup$U?_sfc_setup$U(e,t):void 0};const PageBanner=_export_sfc(_sfc_main$U,[["ssrRender",_sfc_ssrRender$U],["__scopeId","data-v-caea9073"]]),_sfc_main$T=defineComponent({name:"MobileAboutPage",components:{PageBanner},setup(){const{isZhLang:e}=useEnhancer(),t=useAdminInfoStore();return useAboutPageMeta(),useUniversalFetch(()=>t.fetch()),{i18ns:i18ns$1,META,VALUABLE_LINKS,LanguageKey,RouteName,isZhLang:e,adminInfo:t,getAdminAvatar,getPageRoute}}}),mobile_vue_vue_type_style_index_0_scoped_ac94f13a_lang="";function _sfc_ssrRender$T(e,t,i,s,c,d,g,r){var D,O,V;const y=resolveComponent("page-banner"),E=resolveComponent("i18n"),w=resolveComponent("uimage"),k=resolveComponent("divider"),S=resolveComponent("webfont"),I=resolveComponent("router-link"),L=resolveComponent("ulink");t(`<div${ssrRenderAttrs(mergeProps({class:"about-page"},s))} data-v-ac94f13a>`),t(ssrRenderComponent(y,{position:70,blur:!1,"is-mobile":!0,image:"/images/page-about/banner-mobile.jpg"},{title:withCtx((z,U,Z,W)=>{if(U)U(ssrRenderComponent(E,{k:e.LanguageKey.PAGE_ABOUT},null,Z,W));else return[createVNode(E,{k:e.LanguageKey.PAGE_ABOUT},null,8,["k"])]}),_:1},i)),t('<div class="profile" data-v-ac94f13a><div class="avatar" data-v-ac94f13a>'),t(ssrRenderComponent(w,{class:"image",src:e.getAdminAvatar((D=e.adminInfo.data)==null?void 0:D.avatar)},null,i)),t(`</div><h2 class="name" data-v-ac94f13a>${ssrInterpolate(((O=e.adminInfo.data)==null?void 0:O.name)||"-")}</h2><h5 class="slogan" data-v-ac94f13a>${ssrInterpolate(((V=e.adminInfo.data)==null?void 0:V.slogan)||"-")}</h5>`),t(ssrRenderComponent(k,{dashed:""},null,i)),t('<h4 class="bio" data-v-ac94f13a>'),t(ssrRenderComponent(S,{bolder:""},{default:withCtx((z,U,Z,W)=>{if(U)U(`${ssrInterpolate(e.isZhLang?e.META.zh_biography:e.META.en_biography)}`);else return[createTextVNode(toDisplayString(e.isZhLang?e.META.zh_biography:e.META.en_biography),1)]}),_:1},i)),t('</h4></div><div class="links" data-v-ac94f13a><div class="list col-2" data-v-ac94f13a>'),t(ssrRenderComponent(I,{class:"item text-only",to:e.getPageRoute(e.RouteName.Archive)},{default:withCtx((z,U,Z,W)=>{if(U)U(`<i class="iconfont icon-quill" data-v-ac94f13a${W}></i>`),U(ssrRenderComponent(E,e.i18ns.archive,null,Z,W));else return[createVNode("i",{class:"iconfont icon-quill"}),createVNode(E,e.i18ns.archive,null,16)]}),_:1},i)),t(ssrRenderComponent(I,{class:"item text-only",to:e.getPageRoute(e.RouteName.Lens)},{default:withCtx((z,U,Z,W)=>{if(U)U(`<i class="iconfont icon-lens" data-v-ac94f13a${W}></i>`),U(ssrRenderComponent(E,e.i18ns.lens,null,Z,W));else return[createVNode("i",{class:"iconfont icon-lens"}),createVNode(E,e.i18ns.lens,null,16)]}),_:1},i)),t(ssrRenderComponent(I,{class:"item text-only",to:e.getPageRoute(e.RouteName.Merch)},{default:withCtx((z,U,Z,W)=>{if(U)U(`<i class="iconfont icon-rubik" data-v-ac94f13a${W}></i>`),U(ssrRenderComponent(E,e.i18ns.merchBar,null,Z,W));else return[createVNode("i",{class:"iconfont icon-rubik"}),createVNode(E,e.i18ns.merchBar,null,16)]}),_:1},i)),t(ssrRenderComponent(I,{class:"item text-only",to:e.getPageRoute(e.RouteName.Guestbook)},{default:withCtx((z,U,Z,W)=>{if(U)U(`<i class="iconfont icon-comment" data-v-ac94f13a${W}></i>`),U(ssrRenderComponent(E,e.i18ns.guestbook,null,Z,W));else return[createVNode("i",{class:"iconfont icon-comment"}),createVNode(E,e.i18ns.guestbook,null,16)]}),_:1},i)),t("</div>"),t(ssrRenderComponent(k,{dashed:""},null,i)),t('<div class="list col-2" data-v-ac94f13a>'),t(ssrRenderComponent(L,{class:"item discord",href:e.VALUABLE_LINKS.DISCORD_GROUP},{default:withCtx((z,U,Z,W)=>{if(U)U(`<i class="iconfont icon-discord" data-v-ac94f13a${W}></i>`),U(ssrRenderComponent(E,e.i18ns.discordGroup,null,Z,W));else return[createVNode("i",{class:"iconfont icon-discord"}),createVNode(E,e.i18ns.discordGroup,null,16)]}),_:1},i)),t(ssrRenderComponent(L,{class:"item telegram",href:e.VALUABLE_LINKS.TELEGRAM_GROUP},{default:withCtx((z,U,Z,W)=>{if(U)U(`<i class="iconfont icon-telegram" data-v-ac94f13a${W}></i>`),U(ssrRenderComponent(E,e.i18ns.telegramGroup,null,Z,W));else return[createVNode("i",{class:"iconfont icon-telegram"}),createVNode(E,e.i18ns.telegramGroup,null,16)]}),_:1},i)),t('</div></div><div class="links" data-v-ac94f13a><div class="list col-3" data-v-ac94f13a>'),t(ssrRenderComponent(L,{class:"item center github",href:e.VALUABLE_LINKS.GITHUB},{default:withCtx((z,U,Z,W)=>{if(U)U(`<i class="iconfont icon-github" data-v-ac94f13a${W}></i><span class="text" data-v-ac94f13a${W}>GitHub</span>`);else return[createVNode("i",{class:"iconfont icon-github"}),createVNode("span",{class:"text"},"GitHub")]}),_:1},i)),t(ssrRenderComponent(L,{class:"item center twitter",href:e.VALUABLE_LINKS.TWITTER},{default:withCtx((z,U,Z,W)=>{if(U)U(`<i class="iconfont icon-twitter" data-v-ac94f13a${W}></i><span class="text" data-v-ac94f13a${W}>Twitter</span>`);else return[createVNode("i",{class:"iconfont icon-twitter"}),createVNode("span",{class:"text"},"Twitter")]}),_:1},i)),t(ssrRenderComponent(L,{class:"item center instagram",href:e.VALUABLE_LINKS.INSTAGRAM},{default:withCtx((z,U,Z,W)=>{if(U)U(`<i class="iconfont icon-instagram" data-v-ac94f13a${W}></i><span class="text" data-v-ac94f13a${W}>Instagram</span>`);else return[createVNode("i",{class:"iconfont icon-instagram"}),createVNode("span",{class:"text"},"Instagram")]}),_:1},i)),t("</div>"),t(ssrRenderComponent(k,{dashed:""},null,i)),t('<div class="list col-4" data-v-ac94f13a>'),t(ssrRenderComponent(L,{class:"item telegram icon-only",href:e.VALUABLE_LINKS.TELEGRAM},{default:withCtx((z,U,Z,W)=>{if(U)U(`<i class="iconfont icon-telegram" data-v-ac94f13a${W}></i>`);else return[createVNode("i",{class:"iconfont icon-telegram"})]}),_:1},i)),t(ssrRenderComponent(L,{class:"item linkedin icon-only",href:e.VALUABLE_LINKS.LINKEDIN},{default:withCtx((z,U,Z,W)=>{if(U)U(`<i class="iconfont icon-linkedin" data-v-ac94f13a${W}></i>`);else return[createVNode("i",{class:"iconfont icon-linkedin"})]}),_:1},i)),t(ssrRenderComponent(L,{class:"item youtube icon-only",href:e.VALUABLE_LINKS.YOUTUBE_CHANNEL},{default:withCtx((z,U,Z,W)=>{if(U)U(`<i class="iconfont icon-youtube" data-v-ac94f13a${W}></i>`);else return[createVNode("i",{class:"iconfont icon-youtube"})]}),_:1},i)),t(ssrRenderComponent(L,{class:"item douban icon-only",href:e.VALUABLE_LINKS.DOUBAN_MOVIE},{default:withCtx((z,U,Z,W)=>{if(U)U(`<i class="iconfont icon-douban" data-v-ac94f13a${W}></i>`);else return[createVNode("i",{class:"iconfont icon-douban"})]}),_:1},i)),t('</div></div><div class="qrcodes" data-v-ac94f13a><div class="item" data-v-ac94f13a>'),t(ssrRenderComponent(w,{cdn:"",class:"image",src:"/images/qrcodes/wechat.jpg"},null,i)),t('</div><div class="item" data-v-ac94f13a>'),t(ssrRenderComponent(w,{cdn:"",class:"image",src:"/images/qrcodes/wechat-channel.png"},null,i)),t("</div></div></div>")}const _sfc_setup$T=_sfc_main$T.setup;_sfc_main$T.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/about/mobile.vue"),_sfc_setup$T?_sfc_setup$T(e,t):void 0};const AboutMobilePage=_export_sfc(_sfc_main$T,[["ssrRender",_sfc_ssrRender$T],["__scopeId","data-v-ac94f13a"]]),useArchiveStore=defineFetchStore({id:"archive",initData:null,onlyOnce:!0,async fetcher(){return(await nodepress$1.get("/archive")).result},getters:{hydrated:e=>{if(!e.data)return null;const{articles:t,tags:i,categories:s}=e.data,c=new Map(i.map(g=>[g._id,{...g,articles_count:0}])),d=new Map(s.map(g=>[g._id,{...g,articles_count:0}]));return t.forEach(g=>{g.tag.forEach(r=>{c.has(r)&&c.get(r).articles_count++}),g.category.forEach(r=>{d.has(r)&&d.get(r).articles_count++})}),{tags:Array.from(c.values()),categories:Array.from(d.values())}},tree:e=>{var i;const t=[];return(i=e.data)==null||i.articles.map(s=>({...s,createAt:dateToHuman(new Date(s.create_at))})).sort(({create_at:s},{create_at:c})=>Date.parse(c)-Date.parse(s)).forEach(s=>{const{createAt:c}=s;let g=t.find(E=>E.year===c.year);g||(g={year:c.year,months:[]},t.push(g));let y=g.months.find(E=>E.month===c.month);y||(y={month:c.month,articles:[]},g.months.push(y)),y.articles.push(s)}),t}}}),ms=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthNameI18ns=ms.map((e,t)=>({[Language.English]:e,[Language.Chinese]:t===9?"\u5341\u6708":t==10?"\u5341\u4E00":t==11?"\u5341\u4E8C":numberToChinese(t+1)+"\u6708"})),getMonthNameI18n=e=>monthNameI18ns[e-1],i18ns={title:{[Language.Chinese]:"\u4E07\u7269\u4E4B\u4E2D\uFF0C\u5E0C\u671B\u81F3\u7F8E",[Language.English]:"Hope is a good thing"},description:{[Language.Chinese]:"\u81F3\u7F8E\u4E4B\u7269\uFF0C\u6C38\u4E0D\u51CB\u96F6",[Language.English]:"Maybe the best of things and no good thing ever dies"}},_sfc_main$S=defineComponent({name:"ArchivePage",components:{PageBanner},props:{isMobile:Boolean},setup(){const{i18n:e,meta:t,isZhLang:i}=useEnhancer();t(()=>{const r=firstUpperCase(e.t(LanguageKey.PAGE_ARCHIVE,Language.English));return{pageTitle:(i.value?[e.t(LanguageKey.PAGE_ARCHIVE),r]:[r]).join(" | "),description:`${META.title} \u6570\u636E\u5F52\u6863`}});const s=useArchiveStore(),c=useNodepressStatisticStore(),d=computed(()=>{var r,y,E,w,k,S;return[{icon:"icon-quill",title:e.t(LanguageKey.STATISTIC_ARTICLES),content:numberSplit(((r=c.data)==null?void 0:r.articles)||0)},{icon:"icon-eye",title:e.t(LanguageKey.STATISTIC_TODAY_VIEWS),content:numberSplit(((y=c.data)==null?void 0:y.todayViews)||0)},{icon:"icon-comment",title:e.t(LanguageKey.STATISTIC_COMMENTS),content:numberSplit(((E=c.data)==null?void 0:E.comments)||0)},{icon:"icon-like",title:e.t(LanguageKey.STATISTIC_TOTAL_UPVOTES),content:numberSplit(((w=c.data)==null?void 0:w.totalLikes)||0)},{icon:"icon-emoji",title:e.t(LanguageKey.STATISTIC_AVERAGE_EMOTION),content:String((S=(k=c.data)==null?void 0:k.averageEmotion)!=null?S:"-")}]}),g=ref(!0);return onMounted(()=>{c.fetch().finally(()=>{g.value=!1})}),useUniversalFetch(()=>s.fetch()),{LanguageKey,numberSplit,numberToChinese,getArticleDetailRoute,getMonthNameI18n,i18ns,archiveStore:s,statisticFetching:g,statistics:d}}}),archive_vue_vue_type_style_index_0_scoped_ef319821_lang="";function _sfc_ssrRender$S(e,t,i,s,c,d,g,r){var V;const y=resolveComponent("responsive"),E=resolveComponent("page-banner"),w=resolveComponent("webfont"),k=resolveComponent("i18n"),S=resolveComponent("skeleton-base"),I=resolveComponent("placeholder"),L=resolveComponent("empty"),D=resolveComponent("skeleton-line"),O=resolveComponent("divider");t(`<div${ssrRenderAttrs(mergeProps({class:["archive-page",{mobile:e.isMobile}]},s))} data-v-ef319821>`),t(ssrRenderComponent(y,null,{desktop:withCtx((z,U,Z,W)=>{if(U)U(ssrRenderComponent(E,{blur:!1,position:32,image:"/images/page-archive/banner.jpg"},{title:withCtx((ne,re,ie,Ce)=>{if(re)re(ssrRenderComponent(w,null,{default:withCtx((we,fe,de,Le)=>{if(fe)fe(ssrRenderComponent(k,e.i18ns.title,null,de,Le));else return[createVNode(k,e.i18ns.title,null,16)]}),_:1},ie,Ce));else return[createVNode(w,null,{default:withCtx(()=>[createVNode(k,e.i18ns.title,null,16)]),_:1})]}),description:withCtx((ne,re,ie,Ce)=>{if(re)re(ssrRenderComponent(k,e.i18ns.description,null,ie,Ce));else return[createVNode(k,e.i18ns.description,null,16)]}),_:1},Z,W));else return[createVNode(E,{blur:!1,position:32,image:"/images/page-archive/banner.jpg"},{title:withCtx(()=>[createVNode(w,null,{default:withCtx(()=>[createVNode(k,e.i18ns.title,null,16)]),_:1})]),description:withCtx(()=>[createVNode(k,e.i18ns.description,null,16)]),_:1})]}),mobile:withCtx((z,U,Z,W)=>{if(U)U(ssrRenderComponent(E,{position:80,blur:!1,"is-mobile":!0,image:"/images/page-archive/banner-mobile.jpg"},{title:withCtx((ne,re,ie,Ce)=>{if(re)re(ssrRenderComponent(k,{k:e.LanguageKey.PAGE_ARCHIVE},null,ie,Ce));else return[createVNode(k,{k:e.LanguageKey.PAGE_ARCHIVE},null,8,["k"])]}),description:withCtx((ne,re,ie,Ce)=>{if(re)re(ssrRenderComponent(k,e.i18ns.title,null,ie,Ce));else return[createVNode(k,e.i18ns.title,null,16)]}),_:1},Z,W));else return[createVNode(E,{position:80,blur:!1,"is-mobile":!0,image:"/images/page-archive/banner-mobile.jpg"},{title:withCtx(()=>[createVNode(k,{k:e.LanguageKey.PAGE_ARCHIVE},null,8,["k"])]),description:withCtx(()=>[createVNode(k,e.i18ns.title,null,16)]),_:1})]}),_:1},i)),t('<div class="page-content" data-v-ef319821><div class="statistic-warpper" data-v-ef319821><div class="container" data-v-ef319821>'),e.statisticFetching?(t('<div class="skeletons" data-v-ef319821>'),t(ssrRenderComponent(y,null,{desktop:withCtx((z,U,Z,W)=>{if(U)U("<!--[-->"),ssrRenderList(e.statistics.length,ne=>{U(ssrRenderComponent(S,{class:"skeleton",key:ne},null,Z,W))}),U("<!--]-->");else return[(openBlock(!0),createBlock(Fragment,null,renderList(e.statistics.length,ne=>(openBlock(),createBlock(S,{class:"skeleton",key:ne}))),128))]}),mobile:withCtx((z,U,Z,W)=>{if(U)U(ssrRenderComponent(S,{class:"skeleton"},null,Z,W));else return[createVNode(S,{class:"skeleton"})]}),_:1},i)),t("</div>")):(t('<div class="statistics" data-v-ef319821><!--[-->'),ssrRenderList(e.statistics,(z,U)=>{t(`<div class="item" data-v-ef319821><p class="title" data-v-ef319821><span class="text" data-v-ef319821>${ssrInterpolate(z.title)}</span><i class="${ssrRenderClass([z.icon,"iconfont"])}" data-v-ef319821></i></p><div class="content" data-v-ef319821>${ssrInterpolate(z.content)}</div></div>`)}),t("<!--]--></div>")),t('</div></div><div class="archive-warpper" data-v-ef319821><div class="container" data-v-ef319821>'),t(ssrRenderComponent(I,{data:(V=e.archiveStore.data)==null?void 0:V.articles.length,loading:e.archiveStore.fetching},{placeholder:withCtx((z,U,Z,W)=>{if(U)U(ssrRenderComponent(L,{class:"archive-empty",key:"empty"},{default:withCtx((ne,re,ie,Ce)=>{if(re)re(ssrRenderComponent(k,{k:e.LanguageKey.ARTICLE_PLACEHOLDER},null,ie,Ce));else return[createVNode(k,{k:e.LanguageKey.ARTICLE_PLACEHOLDER},null,8,["k"])]}),_:1},Z,W));else return[createVNode(L,{class:"archive-empty",key:"empty"},{default:withCtx(()=>[createVNode(k,{k:e.LanguageKey.ARTICLE_PLACEHOLDER},null,8,["k"])]),_:1})]}),loading:withCtx((z,U,Z,W)=>{if(U)U(`<ul class="archive-skeleton" data-v-ef319821${W}><!--[-->`),ssrRenderList(3,ne=>{U(`<li class="item" data-v-ef319821${W}><!--[-->`),ssrRenderList(3,re=>{U(ssrRenderComponent(D,{key:re,class:"line"},null,Z,W))}),U("<!--]--></li>")}),U("<!--]--></ul>");else return[createVNode("ul",{class:"archive-skeleton",key:"skeleton"},[(openBlock(),createBlock(Fragment,null,renderList(3,ne=>createVNode("li",{key:ne,class:"item"},[(openBlock(),createBlock(Fragment,null,renderList(3,re=>createVNode(D,{key:re,class:"line"})),64))])),64))])]}),default:withCtx((z,U,Z,W)=>{if(U)U(`<div class="archive-content" data-v-ef319821${W}><!--[-->`),ssrRenderList(e.archiveStore.tree,ne=>{U(`<ul class="month-list" data-v-ef319821${W}><!--[-->`),ssrRenderList(ne.months,re=>{U(`<li class="month" data-v-ef319821${W}><h1 class="archive-title"${ssrRenderAttr("level",1)} data-v-ef319821${W}>`),U(ssrRenderComponent(k,null,{zh:withCtx((ie,Ce,we,fe)=>{if(Ce)Ce(`${ssrInterpolate(e.numberToChinese(ne.year))}<span class="dot" data-v-ef319821${fe}>\u2022</span>${ssrInterpolate(e.getMonthNameI18n(re.month).zh)}\uFF08${ssrInterpolate(re.articles.length)}\uFF09 `);else return[createTextVNode(toDisplayString(e.numberToChinese(ne.year)),1),createVNode("span",{class:"dot"},"\u2022"),createTextVNode(toDisplayString(e.getMonthNameI18n(re.month).zh)+"\uFF08"+toDisplayString(re.articles.length)+"\uFF09 ",1)]}),en:withCtx((ie,Ce,we,fe)=>{if(Ce)Ce(`${ssrInterpolate(ne.year)} #${ssrInterpolate(e.getMonthNameI18n(re.month).en)} (${ssrInterpolate(re.articles.length)}) `);else return[createTextVNode(toDisplayString(ne.year)+" #"+toDisplayString(e.getMonthNameI18n(re.month).en)+" ("+toDisplayString(re.articles.length)+") ",1)]}),_:2},Z,W)),U(`</h1><ul class="article-list" data-v-ef319821${W}><!--[-->`),ssrRenderList(re.articles,(ie,Ce)=>{U(`<li class="article" data-v-ef319821${W}><div class="left" data-v-ef319821${W}><h3 class="article-title" data-v-ef319821${W}><span class="date" data-v-ef319821${W}>D${ssrInterpolate(String(ie.createAt.day).padStart(2,"0"))}</span><a class="link" target="_blank"${ssrRenderAttr("title",ie.title)}${ssrRenderAttr("href",e.getArticleDetailRoute(ie.id))} data-v-ef319821${W}>${ssrInterpolate(ie.title)}</a></h3><p class="description" data-v-ef319821${W}>${ie.description}</p></div>`),U(ssrRenderComponent(y,{desktop:""},{default:withCtx((we,fe,de,Le)=>{if(fe)fe(`<div class="metas" data-v-ef319821${Le}><div class="item views" data-v-ef319821${Le}><i class="iconfont icon-eye" data-v-ef319821${Le}></i><span class="text" data-v-ef319821${Le}>${ssrInterpolate(e.numberSplit(ie.meta.views))}</span></div>`),fe(ssrRenderComponent(O,{type:"vertical"},null,de,Le)),fe(`<div class="item likes" data-v-ef319821${Le}><i class="like-icon iconfont icon-like" data-v-ef319821${Le}></i><span class="text" data-v-ef319821${Le}>${ssrInterpolate(ie.meta.likes)}</span></div>`),fe(ssrRenderComponent(O,{type:"vertical"},null,de,Le)),fe(`<div class="item comments" data-v-ef319821${Le}><i class="iconfont icon-comment" data-v-ef319821${Le}></i><span class="text" data-v-ef319821${Le}>${ssrInterpolate(ie.meta.comments)}</span></div></div>`);else return[createVNode("div",{class:"metas"},[createVNode("div",{class:"item views"},[createVNode("i",{class:"iconfont icon-eye"}),createVNode("span",{class:"text"},toDisplayString(e.numberSplit(ie.meta.views)),1)]),createVNode(O,{type:"vertical"}),createVNode("div",{class:"item likes"},[createVNode("i",{class:"like-icon iconfont icon-like"}),createVNode("span",{class:"text"},toDisplayString(ie.meta.likes),1)]),createVNode(O,{type:"vertical"}),createVNode("div",{class:"item comments"},[createVNode("i",{class:"iconfont icon-comment"}),createVNode("span",{class:"text"},toDisplayString(ie.meta.comments),1)])])]}),_:2},Z,W)),U("</li>")}),U("<!--]--></ul></li>")}),U("<!--]--></ul>")}),U("<!--]--></div>");else return[createVNode("div",{class:"archive-content",key:"content"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.archiveStore.tree,ne=>(openBlock(),createBlock("ul",{class:"month-list",key:ne.year},[(openBlock(!0),createBlock(Fragment,null,renderList(ne.months,re=>(openBlock(),createBlock("li",{key:re.month,class:"month"},[createVNode("h1",{class:"archive-title",level:1},[createVNode(k,null,{zh:withCtx(()=>[createTextVNode(toDisplayString(e.numberToChinese(ne.year)),1),createVNode("span",{class:"dot"},"\u2022"),createTextVNode(toDisplayString(e.getMonthNameI18n(re.month).zh)+"\uFF08"+toDisplayString(re.articles.length)+"\uFF09 ",1)]),en:withCtx(()=>[createTextVNode(toDisplayString(ne.year)+" #"+toDisplayString(e.getMonthNameI18n(re.month).en)+" ("+toDisplayString(re.articles.length)+") ",1)]),_:2},1024)]),createVNode("ul",{class:"article-list"},[(openBlock(!0),createBlock(Fragment,null,renderList(re.articles,(ie,Ce)=>(openBlock(),createBlock("li",{key:Ce,class:"article"},[createVNode("div",{class:"left"},[createVNode("h3",{class:"article-title"},[createVNode("span",{class:"date"},"D"+toDisplayString(String(ie.createAt.day).padStart(2,"0")),1),createVNode("a",{class:"link",target:"_blank",title:ie.title,href:e.getArticleDetailRoute(ie.id)},toDisplayString(ie.title),9,["title","href"])]),createVNode("p",{class:"description",innerHTML:ie.description},null,8,["innerHTML"])]),createVNode(y,{desktop:""},{default:withCtx(()=>[createVNode("div",{class:"metas"},[createVNode("div",{class:"item views"},[createVNode("i",{class:"iconfont icon-eye"}),createVNode("span",{class:"text"},toDisplayString(e.numberSplit(ie.meta.views)),1)]),createVNode(O,{type:"vertical"}),createVNode("div",{class:"item likes"},[createVNode("i",{class:"like-icon iconfont icon-like"}),createVNode("span",{class:"text"},toDisplayString(ie.meta.likes),1)]),createVNode(O,{type:"vertical"}),createVNode("div",{class:"item comments"},[createVNode("i",{class:"iconfont icon-comment"}),createVNode("span",{class:"text"},toDisplayString(ie.meta.comments),1)])])]),_:2},1024)]))),128))])]))),128))]))),128))])]}),_:1},i)),t("</div></div></div></div>")}const _sfc_setup$S=_sfc_main$S.setup;_sfc_main$S.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/archive.vue"),_sfc_setup$S?_sfc_setup$S(e,t):void 0};const ArchivePage=_export_sfc(_sfc_main$S,[["ssrRender",_sfc_ssrRender$S],["__scopeId","data-v-ef319821"]]),_sfc_main$R=defineComponent({name:"GuestbookPage",components:{PageBanner,Comment},props:{isMobile:{type:Boolean,default:!1}},setup(){const e=CommentPostID.Guestbook,{i18n:t,meta:i,gtag:s,globalState:c,isDarkTheme:d,isZhLang:g}=useEnhancer(),{appOption:r,comment:y,identity:E}=useStores(),w=ref(isClient),k=computed(()=>E.isLikedPage(e)),S=computed(()=>{var O;return((O=r.data)==null?void 0:O.meta.likes)||0}),I="/images/page-guestbook/banner.jpg",L=async()=>{if(k.value)return!1;s==null||s.event("like_site",{event_category:GAEventCategories.Universal});try{await r.postSiteLike(),E.likePage(e)}catch(O){const V=t.t(LanguageKey.POST_ACTION_ERROR);console.warn(V,O),alert(V)}},D=()=>Promise.all([r.fetch(!0),y.fetchList({post_id:e})]).then(()=>{w.value=!1});return i(()=>{const O=firstUpperCase(t.t(LanguageKey.PAGE_GUESTBOOK,Language.English));return{pageTitle:(g.value?[t.t(LanguageKey.PAGE_GUESTBOOK),O]:[O]).join(" | "),description:`\u7ED9 ${META.author} \u7559\u8A00`}}),useUniversalFetch(()=>D()),{LanguageKey,bannerImage:I,mockCommentLoading:w,isDarkTheme:d,isLiked:k,siteLikes:S,handleLike:L}}}),guestbook_vue_vue_type_style_index_0_scoped_d8529546_lang="";function _sfc_ssrRender$R(e,t,i,s,c,d,g,r){const y=resolveComponent("responsive"),E=resolveComponent("uimage"),w=resolveComponent("webfont"),k=resolveComponent("i18n"),S=resolveComponent("page-banner"),I=resolveComponent("comment");t(`<div${ssrRenderAttrs(mergeProps({class:"guestbook-page"},s))} data-v-d8529546>`),t(ssrRenderComponent(y,null,{desktop:withCtx((L,D,O,V)=>{if(D)D(`<div class="desktop-banner" data-v-d8529546${V}>`),D(ssrRenderComponent(E,{cdn:"",class:"image",src:e.bannerImage},null,O,V)),D(`<button class="${ssrRenderClass([{liked:e.isLiked},"like"])}"${includeBooleanAttr(e.isLiked)?" disabled":""} data-v-d8529546${V}><i class="icon iconfont icon-heart" data-v-d8529546${V}></i><span class="count" data-v-d8529546${V}>${ssrInterpolate(e.isLiked?`${e.siteLikes-1} + 1`:e.siteLikes)}</span></button><span class="slogan" data-v-d8529546${V}>`),D(ssrRenderComponent(w,{class:["text",{dark:e.isDarkTheme}]},{default:withCtx((z,U,Z,W)=>{if(U)U(ssrRenderComponent(k,{k:e.LanguageKey.GUESTBOOK_SLOGAN},null,Z,W));else return[createVNode(k,{k:e.LanguageKey.GUESTBOOK_SLOGAN},null,8,["k"])]}),_:1},O,V)),D("</span></div>");else return[createVNode("div",{class:"desktop-banner"},[createVNode(E,{cdn:"",class:"image",src:e.bannerImage},null,8,["src"]),createVNode("button",{class:["like",{liked:e.isLiked}],disabled:e.isLiked,onClick:e.handleLike},[createVNode("i",{class:"icon iconfont icon-heart"}),createVNode("span",{class:"count"},toDisplayString(e.isLiked?`${e.siteLikes-1} + 1`:e.siteLikes),1)],10,["disabled","onClick"]),createVNode("span",{class:"slogan"},[createVNode(w,{class:["text",{dark:e.isDarkTheme}]},{default:withCtx(()=>[createVNode(k,{k:e.LanguageKey.GUESTBOOK_SLOGAN},null,8,["k"])]),_:1},8,["class"])])])]}),mobile:withCtx((L,D,O,V)=>{if(D)D(ssrRenderComponent(S,{class:"mobile-banner","is-mobile":!0,position:70,blur:!1,image:e.bannerImage},{title:withCtx((z,U,Z,W)=>{if(U)U(ssrRenderComponent(k,{k:e.LanguageKey.PAGE_GUESTBOOK},null,Z,W));else return[createVNode(k,{k:e.LanguageKey.PAGE_GUESTBOOK},null,8,["k"])]}),description:withCtx((z,U,Z,W)=>{if(U)U(ssrRenderComponent(k,{k:e.LanguageKey.GUESTBOOK_SLOGAN},null,Z,W));else return[createVNode(k,{k:e.LanguageKey.GUESTBOOK_SLOGAN},null,8,["k"])]}),_:1},O,V));else return[createVNode(S,{class:"mobile-banner","is-mobile":!0,position:70,blur:!1,image:e.bannerImage},{title:withCtx(()=>[createVNode(k,{k:e.LanguageKey.PAGE_GUESTBOOK},null,8,["k"])]),description:withCtx(()=>[createVNode(k,{k:e.LanguageKey.GUESTBOOK_SLOGAN},null,8,["k"])]),_:1},8,["image"])]}),_:1},i)),t('<div class="comment" data-v-d8529546>'),t(ssrRenderComponent(I,{"post-id":0,plain:e.isMobile,fetching:e.mockCommentLoading},null,i)),t("</div></div>")}const _sfc_setup$R=_sfc_main$R.setup;_sfc_main$R.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/guestbook.vue"),_sfc_setup$R?_sfc_setup$R(e,t):void 0};const GuestbookPage=_export_sfc(_sfc_main$R,[["ssrRender",_sfc_ssrRender$R],["__scopeId","data-v-d8529546"]]),_sfc_main$Q=defineComponent({name:"AppPage",props:{isMobile:{type:Boolean,default:!1}},setup(){const{i18n:e,meta:t,gtag:i,isZhLang:s}=useEnhancer();return t(()=>{const d=firstUpperCase(e.t(LanguageKey.PAGE_APP,Language.English));return{pageTitle:(s.value?[e.t(LanguageKey.PAGE_APP),d]:[d]).join(" | "),description:`${META.title} App \u4E0B\u8F7D`}}),{META,VALUABLE_LINKS,LanguageKey,handleAppEvent:d=>{i==null||i.event(d,{event_category:GAEventCategories.App})}}}}),app_vue_vue_type_style_index_0_scoped_d10e1cc1_lang="";function _sfc_ssrRender$Q(e,t,i,s,c,d,g,r){const y=resolveComponent("uimage"),E=resolveComponent("webfont"),w=resolveComponent("i18n"),k=resolveComponent("ulink");t(`<div${ssrRenderAttrs(mergeProps({class:["app-page",{mobile:e.isMobile}]},s))} data-v-d10e1cc1><div class="app" data-v-d10e1cc1><div class="logo" data-v-d10e1cc1>`),t(ssrRenderComponent(y,{cdn:"",alt:"app-logo",src:"/images/page-app/logo.png"},null,i)),t(`</div><h2 class="title" data-v-d10e1cc1>${ssrInterpolate(e.META.title)}</h2><p class="description" data-v-d10e1cc1>`),t(ssrRenderComponent(E,null,{default:withCtx((S,I,L,D)=>{if(I)I(ssrRenderComponent(w,{k:e.LanguageKey.APP_SLOGAN},null,L,D));else return[createVNode(w,{k:e.LanguageKey.APP_SLOGAN},null,8,["k"])]}),_:1},i)),t('</p><div class="screen" data-v-d10e1cc1>'),t(ssrRenderComponent(y,{cdn:"",alt:"app-hot",class:"screen-img",src:"/images/page-app/hot.png"},null,i)),t('<div class="download" data-v-d10e1cc1>'),t(ssrRenderComponent(y,{cdn:"",class:"qrcode",alt:"qrcode",src:"/images/page-app/qrcode.png"},null,i)),t(ssrRenderComponent(k,{class:"button",href:e.VALUABLE_LINKS.APP_APK_FILE,onMousedown:S=>e.handleAppEvent("download_android_app")},{default:withCtx((S,I,L,D)=>{if(I)I(`<i class="icon iconfont icon-android" data-v-d10e1cc1${D}></i><span class="text" data-v-d10e1cc1${D}>Android</span><i class="new-window iconfont icon-new-window-s" data-v-d10e1cc1${D}></i>`);else return[createVNode("i",{class:"icon iconfont icon-android"}),createVNode("span",{class:"text"},"Android"),createVNode("i",{class:"new-window iconfont icon-new-window-s"})]}),_:1},i)),t(ssrRenderComponent(k,{class:"button",href:e.VALUABLE_LINKS.GITHUB_SURMON_ME_NATIVE+"#ios",onMousedown:S=>e.handleAppEvent("download_ios_app")},{default:withCtx((S,I,L,D)=>{if(I)I(`<i class="icon iconfont icon-apple" data-v-d10e1cc1${D}></i><span class="text" data-v-d10e1cc1${D}>iOS</span><i class="new-window iconfont icon-new-window-s" data-v-d10e1cc1${D}></i>`);else return[createVNode("i",{class:"icon iconfont icon-apple"}),createVNode("span",{class:"text"},"iOS"),createVNode("i",{class:"new-window iconfont icon-new-window-s"})]}),_:1},i)),t(ssrRenderComponent(k,{class:"source-code",href:e.VALUABLE_LINKS.GITHUB_SURMON_ME_NATIVE,onMousedown:S=>e.handleAppEvent("app_source_code")},{default:withCtx((S,I,L,D)=>{if(I)I(`<i class="iconfont icon-git" data-v-d10e1cc1${D}></i> Source Code `);else return[createVNode("i",{class:"iconfont icon-git"}),createTextVNode(" Source Code ")]}),_:1},i)),t('</div></div><p class="rss" data-v-d10e1cc1><span class="prefix" data-v-d10e1cc1>'),t(ssrRenderComponent(w,{zh:"\uFF08",en:"["},null,i)),t('</span><span class="deprecated" data-v-d10e1cc1>'),t(ssrRenderComponent(w,{zh:"\u6B64\u9879\u76EE\u5DF2\u5E9F\u5F03\uFF01",en:"DEPRECATED!"},null,i)),t("</span>"),t(ssrRenderComponent(w,{zh:"\u5EFA\u8BAE\u4F7F\u7528",en:"Recommend"},null,i)),t(`<a class="link"${ssrRenderAttr("href",e.VALUABLE_LINKS.RSS)} target="_blank" data-v-d10e1cc1>`),t(ssrRenderComponent(w,{zh:"RSS \u8BA2\u9605",en:"RSS subscription"},null,i)),t('</a><span class="suffix" data-v-d10e1cc1>'),t(ssrRenderComponent(w,{zh:"\uFF09",en:"]"},null,i)),t("</span></p></div></div>")}const _sfc_setup$Q=_sfc_main$Q.setup;_sfc_main$Q.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/app.vue"),_sfc_setup$Q?_sfc_setup$Q(e,t):void 0};const AppPage=_export_sfc(_sfc_main$Q,[["ssrRender",_sfc_ssrRender$Q],["__scopeId","data-v-d10e1cc1"]]),emailLink=e=>{if(typeof e=="string")return`mailto:${e}`;const{email:t,...i}=e;return`mailto:${t}?`+lib$1.stringify(i)},_sfc_main$P=defineComponent({name:"FreelancerPage",components:{PageBanner},setup(){const{i18n:e,meta:t,gtag:i,isZhLang:s}=useEnhancer(),c=useAppOptionStore();return t(()=>{const y=firstUpperCase(e.t(LanguageKey.PAGE_FREELANCER,Language.English));return{pageTitle:(s.value?[e.t(LanguageKey.PAGE_FREELANCER),y]:[y]).join(" | ")}}),{VALUABLE_LINKS,LanguageKey,services:[{id:"web",iconfont:"icon-html5",name:{zh:"Web \u5BA2\u6237\u7AEF",en:"Web Client"},descriptions:[{zh:"Vue \u5E94\u7528\u5F00\u53D1",en:"Vue application"},{en:"React application",zh:"React \u5E94\u7528\u5F00\u53D1"},{en:"Angular application",zh:"Angular \u5E94\u7528\u5F00\u53D1"}]},{id:"nodejs",iconfont:"icon-nodejs",name:"Node.js",descriptions:[{en:"Node.js application",zh:"Node.js \u6574\u7AD9\u5EFA\u8BBE"},{en:"Node.js online bussniess",zh:"Node.js Web \u670D\u52A1\u5F00\u53D1"},{en:"Node.js CLI application",zh:"Node.js \u547D\u4EE4\u884C\u5DE5\u5177\u5F00\u53D1"}]},{id:"app",iconfont:"icon-app",name:{zh:"\u6DF7\u5408\u5E94\u7528",en:"Hybrid App"},descriptions:[{en:"Flutter application",zh:"Flutter \u5E94\u7528\u5F00\u53D1"},{en:"React Native application",zh:"React Native \u5E94\u7528\u5F00\u53D1"},{en:"Electron application",zh:"Electron \u5E94\u7528\u5F00\u53D1"}]},{id:"wechat",iconfont:"icon-wechat",name:{zh:"\u5FAE\u4FE1\u5468\u8FB9",en:"WeChat"},descriptions:[{en:"HTML5 web page",zh:"H5 \u5F00\u53D1"},{en:"WeChat official account",zh:"\u516C\u4F17\u53F7\u5F00\u53D1"},{en:"WeChat mini program",zh:"\u5C0F\u7A0B\u5E8F\u5F00\u53D1"}]},{id:"consult",iconfont:"icon-tool",name:{zh:"\u6280\u672F\u54A8\u8BE2",en:"Consultant"},descriptions:[{en:"Everything about web",zh:"\u8BED\u8A00\u3001\u6846\u67B6\u7591\u96BE\u6742\u75C7"},{en:"Business and technical",zh:"\u4E1A\u52A1\u4E0E\u6280\u672F\u65B9\u6848\u8BBE\u8BA1"},{en:"Technical consultant",zh:"\u957F\u671F\u6280\u672F\u987E\u95EE\u6307\u5BFC"}]}],steps:[{name:{zh:"1. \u63D0\u4EA4\u9700\u6C42",en:"1. Consult"},descriptions:[{en:"Product requirements document",zh:"\u63D0\u4F9B\u6784\u601D\u6210\u719F\u7684\u9700\u6C42\u6587\u6863"},{en:"Prototype design document",zh:"\u6E05\u6670\u53EF\u7528\u7684\u8BBE\u8BA1\u56FE\u6216\u539F\u578B"}]},{name:{zh:"2. \u786E\u8BA4\u9700\u6C42",en:"2. Confirm"},descriptions:[{en:"Price and schedule",zh:"\u786E\u8BA4\u62A5\u4EF7\u53CA\u5F00\u53D1\u5468\u671F"},{en:"Development cycle",zh:"\u534F\u5546\u5F00\u53D1\u5468\u671F\u548C\u8981\u70B9"}]},{name:{zh:"3. \u9884\u4ED8\u5F00\u53D1",en:"3. Develop"},descriptions:[{en:"Payment the trust and deposit",zh:"\u9884\u4ED8\u90E8\u5206\u6216\u5168\u90E8"},{en:"Develop project",zh:"\u8FDB\u5165\u5F00\u53D1\u6D41\u7A0B"}]},{name:{zh:"4. \u9884\u6536\u4FEE\u6B63",en:"4. Review"},descriptions:[{en:"Review and experience",zh:"\u63D0\u4F9B\u9884\u89C8\u6F14\u793A"},{en:"Fixbug and optimize",zh:"\u7EC6\u8282\u4FEE\u6B63\u8C03\u4F18"}]},{name:{zh:"5. \u4EA4\u4ED8\u7EF4\u62A4",en:"5. Delivery"},descriptions:[{en:"Pay balance",zh:"\u4ED8\u6E05\u5C3E\u6B3E\uFF0C\u4EA4\u4ED8\u9879\u76EE"},{en:"Maintenance cycle",zh:"\u4E00\u5B9A\u5468\u671F\u5185\u6301\u7EED\u7EF4\u62A4"}]}],handleSubmitEmail:()=>{var y;i==null||i.event("freelance_send_email",{event_category:GAEventCategories.Universal}),window.open(emailLink({email:(y=c.data)==null?void 0:y.site_email,subject:s.value?"\u55E8\uFF01Surmon\uFF0C\u4E45\u4EF0\u5927\u540D\uFF01":`Technical consultant / ${META.title}`,body:s.value?`\u6211\u6709\u4E00\u4E2A\u9700\u6C42\uFF1A

 - \u9700\u6C42\u7B80\u8FF0\uFF1A 
 - \u9700\u6C42\u6587\u6863\uFF1A
 - \u9884\u7B97\u91D1\u989D\uFF1A
 - \u9884\u7B97\u5468\u671F\uFF1A`:"Hi! Surmon, I'm ?"}))}}}}),freelancer_vue_vue_type_style_index_0_scoped_d6f7d55e_lang="";function _sfc_ssrRender$P(e,t,i,s,c,d,g,r){const y=resolveComponent("page-banner"),E=resolveComponent("webfont"),w=resolveComponent("i18n"),k=resolveComponent("ulink"),S=resolveComponent("client-only"),I=resolveComponent("Adsense");t(`<div${ssrRenderAttrs(mergeProps({class:"freelancer-page"},s))} data-v-d6f7d55e>`),t(ssrRenderComponent(y,{position:66,class:"page-banner",image:"/images/page-feeelancer/banner.jpg"},{title:withCtx((L,D,O,V)=>{if(D)D(ssrRenderComponent(E,null,{default:withCtx((z,U,Z,W)=>{if(U)U(ssrRenderComponent(w,{k:e.LanguageKey.PAGE_FREELANCER_SLOGAN},null,Z,W));else return[createVNode(w,{k:e.LanguageKey.PAGE_FREELANCER_SLOGAN},null,8,["k"])]}),_:1},O,V));else return[createVNode(E,null,{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.PAGE_FREELANCER_SLOGAN},null,8,["k"])]),_:1})]}),description:withCtx((L,D,O,V)=>{if(D)D(`<div class="desc" data-v-d6f7d55e${V}><button class="submit-email" title="Email me" data-v-d6f7d55e${V}>`),D(ssrRenderComponent(w,{k:e.LanguageKey.PAGE_FREELANCER_EMAIL_ME},null,O,V)),D("</button>"),D(ssrRenderComponent(k,{class:"upwork",href:e.VALUABLE_LINKS.UPWORK},{default:withCtx((z,U,Z,W)=>{if(U)U(ssrRenderComponent(w,null,{zh:withCtx((ne,re,ie,Ce)=>{if(re)re(`\u6216\u5728<i class="iconfont icon-upwork" data-v-d6f7d55e${Ce}></i>\u96C7\u4F63\u6211`);else return[createTextVNode("\u6216\u5728"),createVNode("i",{class:"iconfont icon-upwork"}),createTextVNode("\u96C7\u4F63\u6211")]}),en:withCtx((ne,re,ie,Ce)=>{if(re)re(`Hire me on<i class="iconfont icon-upwork" data-v-d6f7d55e${Ce}></i>`);else return[createTextVNode("Hire me on"),createVNode("i",{class:"iconfont icon-upwork"})]}),_:1},Z,W));else return[createVNode(w,null,{zh:withCtx(()=>[createTextVNode("\u6216\u5728"),createVNode("i",{class:"iconfont icon-upwork"}),createTextVNode("\u96C7\u4F63\u6211")]),en:withCtx(()=>[createTextVNode("Hire me on"),createVNode("i",{class:"iconfont icon-upwork"})]),_:1})]}),_:1},O,V)),D("</div>");else return[createVNode("div",{class:"desc"},[createVNode("button",{class:"submit-email",title:"Email me",onClick:e.handleSubmitEmail},[createVNode(w,{k:e.LanguageKey.PAGE_FREELANCER_EMAIL_ME},null,8,["k"])],8,["onClick"]),createVNode(k,{class:"upwork",href:e.VALUABLE_LINKS.UPWORK},{default:withCtx(()=>[createVNode(w,null,{zh:withCtx(()=>[createTextVNode("\u6216\u5728"),createVNode("i",{class:"iconfont icon-upwork"}),createTextVNode("\u96C7\u4F63\u6211")]),en:withCtx(()=>[createTextVNode("Hire me on"),createVNode("i",{class:"iconfont icon-upwork"})]),_:1})]),_:1},8,["href"])])]}),_:1},i)),t(`<div class="tip" data-v-d6f7d55e>${ssrInterpolate('"Any application that can be written in JavaScript, will eventually be written in JavaScript." - Jeff Atwood')}</div><div class="module" data-v-d6f7d55e><div class="container" data-v-d6f7d55e><ul class="module-list" data-v-d6f7d55e><!--[-->`),ssrRenderList(e.services,(L,D)=>{t(`<li class="item" data-v-d6f7d55e><p class="${ssrRenderClass([L.id,"icon"])}" data-v-d6f7d55e><i class="${ssrRenderClass([L.iconfont,"iconfont"])}" data-v-d6f7d55e></i></p><h3 class="name" data-v-d6f7d55e>`),typeof L.name=="string"?t(`<span data-v-d6f7d55e>${ssrInterpolate(L.name)}</span>`):t(ssrRenderComponent(w,{en:L.name.en,zh:L.name.zh},null,i)),t("</h3><!--[-->"),ssrRenderList(L.descriptions,(O,V)=>{t('<p class="desc" data-v-d6f7d55e>'),t(ssrRenderComponent(w,{en:O.en,zh:O.zh},null,i)),t("</p>")}),t("<!--]--></li>")}),t("<!--]--></ul></div></div>"),t(ssrRenderComponent(S,{transition:""},{default:withCtx((L,D,O,V)=>{if(D)D(`<div class="module" data-v-d6f7d55e${V}><div class="container" data-v-d6f7d55e${V}>`),D(ssrRenderComponent(I,{class:"mammon","ins-class":"mammon-ins","ins-style":"display:inline-block;width:1026px;height:200px","data-ad-slot":"3013952710"},null,O,V)),D("</div></div>");else return[createVNode("div",{class:"module"},[createVNode("div",{class:"container"},[createVNode(I,{class:"mammon","ins-class":"mammon-ins","ins-style":"display:inline-block;width:1026px;height:200px","data-ad-slot":"3013952710"})])])]}),_:1},i)),t('<div class="step" data-v-d6f7d55e><div class="step-content container" data-v-d6f7d55e><ul class="step-list" data-v-d6f7d55e><!--[-->'),ssrRenderList(e.steps,(L,D)=>{t('<li class="item" data-v-d6f7d55e><h3 class="name" data-v-d6f7d55e>'),t(ssrRenderComponent(w,{zh:L.name.zh,en:L.name.en},null,i)),t("</h3><!--[-->"),ssrRenderList(L.descriptions,(O,V)=>{t('<p class="desc" data-v-d6f7d55e>'),t(ssrRenderComponent(w,{en:O.en,zh:O.zh},null,i)),t("</p>")}),t("<!--]--></li>")}),t("<!--]--></ul></div></div></div>")}const _sfc_setup$P=_sfc_main$P.setup;_sfc_main$P.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/freelancer.vue"),_sfc_setup$P?_sfc_setup$P(e,t):void 0};const FreelancerPage=_export_sfc(_sfc_main$P,[["ssrRender",_sfc_ssrRender$P],["__scopeId","data-v-d6f7d55e"]]),_sfc_main$O=defineComponent({name:"FullPageTitle",props:{level:{type:Number,default:3}}}),title_vue_vue_type_style_index_0_scoped_4d2838e5_lang="";function _sfc_ssrRender$O(e,t,i,s,c,d,g,r){t(`<div${ssrRenderAttrs(mergeProps({class:["title",`heading-${e.level}`]},s))} data-v-4d2838e5><div class="left" data-v-4d2838e5>`),ssrRenderSlot(e.$slots,"left",{},null,t,i),t('</div><div class="center" data-v-4d2838e5>'),ssrRenderSlot(e.$slots,"default",{},null,t,i),t('</div><div class="right" data-v-4d2838e5>'),ssrRenderSlot(e.$slots,"right",{},null,t,i),t("</div></div>")}const _sfc_setup$O=_sfc_main$O.setup;_sfc_main$O.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/common/fullpage/title.vue"),_sfc_setup$O?_sfc_setup$O(e,t):void 0};const PageTitle=_export_sfc(_sfc_main$O,[["ssrRender",_sfc_ssrRender$O],["__scopeId","data-v-4d2838e5"]]),_sfc_main$N=defineComponent({name:"LensSkeleton",props:{columns:{type:Number,required:!0},rows:{type:Number,default:2},height:{type:Number,required:!0}}}),skeleton_vue_vue_type_style_index_0_scoped_c145d1cc_lang="";function _sfc_ssrRender$N(e,t,i,s,c,d,g,r){const y=resolveComponent("skeleton-base");t(`<ul${ssrRenderAttrs(mergeProps({class:"skeletons",style:{gridTemplateColumns:`repeat(${e.columns}, 1fr)`}},s))} data-v-c145d1cc><!--[-->`),ssrRenderList(e.columns*e.rows,E=>{t(`<div class="item" style="${ssrRenderStyle({height:`${e.height}px`})}" data-v-c145d1cc>`),t(ssrRenderComponent(y,null,null,i)),t("</div>")}),t("<!--]--></ul>")}const _sfc_setup$N=_sfc_main$N.setup;_sfc_main$N.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/lens/skeleton.vue"),_sfc_setup$N?_sfc_setup$N(e,t):void 0};const LensSkeleton=_export_sfc(_sfc_main$N,[["ssrRender",_sfc_ssrRender$N],["__scopeId","data-v-c145d1cc"]]),_sfc_main$M=defineComponent({name:"LensInstagramGallery",components:{Swiper,SwiperSlide},props:{medias:{type:Array,required:!0},index:{type:Number,default:0},visible:{type:Boolean,default:!1}},emits:["close"],setup(e,t){const i=ref(e.index),s=ref(),c=computed(()=>e.medias[i.value]);return{galleryActiveIndex:i,galleryActiveMedia:c,isVideoMediaIns,getInstagramImage,handleGalleryClose:()=>{t.emit("close")},handleGallerySwiperReady:w=>{s.value=w},handleGallerySwiperTransitionStart:()=>{var w;i.value=((w=s.value)==null?void 0:w.activeIndex)||0},galleryPrevSlide:()=>{var w;return(w=s.value)==null?void 0:w.slidePrev()},galleryNextSlide:()=>{var w;return(w=s.value)==null?void 0:w.slideNext()}}}}),gallery_vue_vue_type_style_index_0_scoped_9c2e34ca_lang="";function _sfc_ssrRender$M(e,t,i,s,c,d,g,r){const y=resolveComponent("popup"),E=resolveComponent("udate"),w=resolveComponent("ulink"),k=resolveComponent("swiper"),S=resolveComponent("swiper-slide");t(ssrRenderComponent(y,mergeProps({visible:e.visible,onClose:e.handleGalleryClose},s),{default:withCtx((I,L,D,O)=>{if(L)L(`<div class="instagram-gallery" data-v-9c2e34ca${O}><div class="topbar" data-v-9c2e34ca${O}><div class="left" data-v-9c2e34ca${O}><span class="timestamp" data-v-9c2e34ca${O}><i class="iconfont icon-clock" data-v-9c2e34ca${O}></i>`),L(ssrRenderComponent(E,{to:"YMDm",date:e.galleryActiveMedia.timestamp,separator:"/"},null,D,O)),L(`</span></div><div class="center" data-v-9c2e34ca${O}><span class="pagination" data-v-9c2e34ca${O}>${ssrInterpolate(e.galleryActiveIndex+1)} / ${ssrInterpolate(e.medias.length)}</span></div><div class="right" data-v-9c2e34ca${O}><span class="caption" data-v-9c2e34ca${O}>`),e.isVideoMediaIns(e.galleryActiveMedia)?L(`<i class="iconfont icon-video" data-v-9c2e34ca${O}></i>`):L(`<i class="iconfont icon-camera" data-v-9c2e34ca${O}></i>`),e.galleryActiveMedia.caption?L(`<!--[-->${ssrInterpolate(e.galleryActiveMedia.caption)}<!--]-->`):L("<!---->"),L("</span></div></div>"),L(ssrRenderComponent(w,{class:"postlink",href:e.galleryActiveMedia.permalink},{default:withCtx((V,z,U,Z)=>{if(z)z(`<i class="iconfont icon-instagram" data-v-9c2e34ca${Z}></i>`);else return[createVNode("i",{class:"iconfont icon-instagram"})]}),_:1},D,O)),L(`<button class="navigation prev"${includeBooleanAttr(e.galleryActiveIndex===0)?" disabled":""} data-v-9c2e34ca${O}><i class="iconfont icon-prev" data-v-9c2e34ca${O}></i></button><button class="navigation next"${includeBooleanAttr(e.galleryActiveIndex===e.medias.length-1)?" disabled":""} data-v-9c2e34ca${O}><i class="iconfont icon-next" data-v-9c2e34ca${O}></i></button>`),L(ssrRenderComponent(k,{effect:"fade","fade-effect":{crossFade:!0},"initial-slide":e.index,mousewheel:!0,"observe-parents":!0,"grab-cursor":!1,"preload-images":!1,lazy:!0,"simulate-touch":!1,onSwiper:e.handleGallerySwiperReady,onTransitionStart:e.handleGallerySwiperTransitionStart},{default:withCtx((V,z,U,Z)=>{if(z)z("<!--[-->"),ssrRenderList(e.medias,(W,ne)=>{z(ssrRenderComponent(S,{key:ne},{default:withCtx(({isActive:re},ie,Ce,we)=>{if(ie)e.isVideoMediaIns(W)?(ie(`<div class="video" data-v-9c2e34ca${we}>`),ie(re?`<video class="player"${ssrRenderAttr("src",W.media_url)} controls autoplay data-v-9c2e34ca${we}></video>`:"<!---->"),ie("</div>")):ie(`<!--[--><div class="image swiper-lazy"${ssrRenderAttr("data-background",e.getInstagramImage(W))}${ssrRenderAttr("alt",W.caption)} data-v-9c2e34ca${we}></div><div class="swiper-lazy-preloader swiper-lazy-preloader-white" data-v-9c2e34ca${we}></div><!--]-->`);else return[e.isVideoMediaIns(W)?(openBlock(),createBlock("div",{key:0,class:"video"},[re?(openBlock(),createBlock("video",{key:0,class:"player",src:W.media_url,controls:"",autoplay:""},null,8,["src"])):createCommentVNode("",!0)])):(openBlock(),createBlock(Fragment,{key:1},[createVNode("div",{class:"image swiper-lazy","data-background":e.getInstagramImage(W),alt:W.caption},null,8,["data-background","alt"]),createVNode("div",{class:"swiper-lazy-preloader swiper-lazy-preloader-white"})],64))]}),_:2},U,Z))}),z("<!--]-->");else return[(openBlock(!0),createBlock(Fragment,null,renderList(e.medias,(W,ne)=>(openBlock(),createBlock(S,{key:ne},{default:withCtx(({isActive:re})=>[e.isVideoMediaIns(W)?(openBlock(),createBlock("div",{key:0,class:"video"},[re?(openBlock(),createBlock("video",{key:0,class:"player",src:W.media_url,controls:"",autoplay:""},null,8,["src"])):createCommentVNode("",!0)])):(openBlock(),createBlock(Fragment,{key:1},[createVNode("div",{class:"image swiper-lazy","data-background":e.getInstagramImage(W),alt:W.caption},null,8,["data-background","alt"]),createVNode("div",{class:"swiper-lazy-preloader swiper-lazy-preloader-white"})],64))]),_:2},1024))),128))]}),_:1},D,O)),L("</div>");else return[createVNode("div",{class:"instagram-gallery"},[createVNode("div",{class:"topbar"},[createVNode("div",{class:"left"},[createVNode("span",{class:"timestamp"},[createVNode("i",{class:"iconfont icon-clock"}),createVNode(E,{to:"YMDm",date:e.galleryActiveMedia.timestamp,separator:"/"},null,8,["date"])])]),createVNode("div",{class:"center"},[createVNode("span",{class:"pagination"},toDisplayString(e.galleryActiveIndex+1)+" / "+toDisplayString(e.medias.length),1)]),createVNode("div",{class:"right"},[createVNode("span",{class:"caption"},[e.isVideoMediaIns(e.galleryActiveMedia)?(openBlock(),createBlock("i",{key:0,class:"iconfont icon-video"})):(openBlock(),createBlock("i",{key:1,class:"iconfont icon-camera"})),e.galleryActiveMedia.caption?(openBlock(),createBlock(Fragment,{key:2},[createTextVNode(toDisplayString(e.galleryActiveMedia.caption),1)],64)):createCommentVNode("",!0)])])]),createVNode(w,{class:"postlink",href:e.galleryActiveMedia.permalink},{default:withCtx(()=>[createVNode("i",{class:"iconfont icon-instagram"})]),_:1},8,["href"]),createVNode("button",{class:"navigation prev",disabled:e.galleryActiveIndex===0,onClick:e.galleryPrevSlide},[createVNode("i",{class:"iconfont icon-prev"})],8,["disabled","onClick"]),createVNode("button",{class:"navigation next",disabled:e.galleryActiveIndex===e.medias.length-1,onClick:e.galleryNextSlide},[createVNode("i",{class:"iconfont icon-next"})],8,["disabled","onClick"]),createVNode(k,{effect:"fade","fade-effect":{crossFade:!0},"initial-slide":e.index,mousewheel:!0,"observe-parents":!0,"grab-cursor":!1,"preload-images":!1,lazy:!0,"simulate-touch":!1,onSwiper:e.handleGallerySwiperReady,onTransitionStart:e.handleGallerySwiperTransitionStart},{default:withCtx(()=>[(openBlock(!0),createBlock(Fragment,null,renderList(e.medias,(V,z)=>(openBlock(),createBlock(S,{key:z},{default:withCtx(({isActive:U})=>[e.isVideoMediaIns(V)?(openBlock(),createBlock("div",{key:0,class:"video"},[U?(openBlock(),createBlock("video",{key:0,class:"player",src:V.media_url,controls:"",autoplay:""},null,8,["src"])):createCommentVNode("",!0)])):(openBlock(),createBlock(Fragment,{key:1},[createVNode("div",{class:"image swiper-lazy","data-background":e.getInstagramImage(V),alt:V.caption},null,8,["data-background","alt"]),createVNode("div",{class:"swiper-lazy-preloader swiper-lazy-preloader-white"})],64))]),_:2},1024))),128))]),_:1},8,["initial-slide","onSwiper","onTransitionStart"])])]}),_:1},i))}const _sfc_setup$M=_sfc_main$M.setup;_sfc_main$M.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/lens/instagram/gallery.vue"),_sfc_setup$M?_sfc_setup$M(e,t):void 0};const Gallery=_export_sfc(_sfc_main$M,[["ssrRender",_sfc_ssrRender$M],["__scopeId","data-v-9c2e34ca"]]),_sfc_main$L=defineComponent({name:"LensInstagramGrid",components:{Gallery},props:{medias:{type:Array,required:!0}},setup(){const{gtag:e}=useEnhancer(),t=ref(),i=computed(()=>t.value!==UNDEFINED);return{VALUABLE_LINKS,isOnGallery:i,galleryActiveIndex:t,isVideoMediaIns,getInstagramImage,openMediaGallery:d=>{t.value=d,e==null||e.event("instagram_view",{event_category:GAEventCategories.Lens})},closeMediaGallery:()=>{t.value=UNDEFINED}}}}),grid_vue_vue_type_style_index_0_scoped_b02727bf_lang="";function _sfc_ssrRender$L(e,t,i,s,c,d,g,r){const y=resolveComponent("ulink"),E=resolveComponent("client-only"),w=resolveComponent("gallery"),k=resolveDirective("lozad");t(`<div${ssrRenderAttrs(mergeProps({class:"instagram-grid"},s))} data-v-b02727bf><ul class="medias" data-v-b02727bf><!--[-->`),ssrRenderList(e.medias,(S,I)=>{t(`<li${ssrRenderAttr("title",S.caption)} class="${ssrRenderClass([e.isVideoMediaIns(S)?"video":"photo","media"])}" data-v-b02727bf><div class="mask" data-v-b02727bf><span class="icon" data-v-b02727bf>`),e.isVideoMediaIns(S)?t('<i class="iconfont icon-music-play" data-v-b02727bf></i>'):t('<i class="iconfont icon-eye" data-v-b02727bf></i>'),t(`</span></div><div${ssrRenderAttrs(mergeProps({class:"background","data-background-image":e.getInstagramImage(S,"m")},ssrGetDirectiveProps(e,k)))} data-v-b02727bf></div>`),e.isVideoMediaIns(S)?t('<div class="video-icon" data-v-b02727bf><i class="iconfont icon-video" data-v-b02727bf></i></div>'):t("<!---->"),t("</li>")}),t('<!--]--><li class="media more" data-v-b02727bf>'),t(ssrRenderComponent(y,{class:"link",href:e.VALUABLE_LINKS.INSTAGRAM},{default:withCtx((S,I,L,D)=>{if(I)I("\u2022\u2022\u2022");else return[createTextVNode("\u2022\u2022\u2022")]}),_:1},i)),t("</li></ul>"),t(ssrRenderComponent(E,null,{default:withCtx((S,I,L,D)=>{if(I)I(ssrRenderComponent(w,{medias:e.medias,index:e.galleryActiveIndex,visible:e.isOnGallery,onClose:e.closeMediaGallery},null,L,D));else return[createVNode(w,{medias:e.medias,index:e.galleryActiveIndex,visible:e.isOnGallery,onClose:e.closeMediaGallery},null,8,["medias","index","visible","onClose"])]}),_:1},i)),t("</div>")}const _sfc_setup$L=_sfc_main$L.setup;_sfc_main$L.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/lens/instagram/grid.vue"),_sfc_setup$L?_sfc_setup$L(e,t):void 0};const InstagramGrid=_export_sfc(_sfc_main$L,[["ssrRender",_sfc_ssrRender$L],["__scopeId","data-v-b02727bf"]]),_sfc_main$K=defineComponent({name:"LensListSwiper",components:{Swiper,SwiperSlide},props:{data:{type:Array,required:!0},rows:{type:Number,default:2},columns:{type:Number,default:5}},setup(){const e=reactive({canPrev:!1,canNext:!0}),t=ref(),i=()=>{var g;return(g=t.value)==null?void 0:g.slidePrev()},s=()=>{var g;return(g=t.value)==null?void 0:g.slideNext()},c=g=>{e.canNext=!g.isEnd,e.canPrev=!g.isBeginning};return{handleListSwiperReady:g=>{t.value=g,c(g)},handleListSlideChange:c,listSwiperState:e,listPrevSlide:i,listNextSlide:s}}}),swiper_vue_vue_type_style_index_0_scoped_44fea3ed_lang="";function _sfc_ssrRender$K(e,t,i,s,c,d,g,r){const y=resolveComponent("swiper",!0),E=resolveComponent("swiper-slide");t(`<div${ssrRenderAttrs(mergeProps({class:"list-swiper"},s))} data-v-44fea3ed><div class="navigation prev" data-v-44fea3ed><button class="button"${includeBooleanAttr(!e.listSwiperState.canPrev)?" disabled":""} data-v-44fea3ed><i class="iconfont icon-prev" data-v-44fea3ed></i></button></div><div class="navigation next" data-v-44fea3ed><button class="button"${includeBooleanAttr(!e.listSwiperState.canNext)?" disabled":""} data-v-44fea3ed><i class="iconfont icon-next" data-v-44fea3ed></i></button></div>`),t(ssrRenderComponent(y,{class:"swiper",autoplay:!0,mousewheel:!1,"grab-cursor":!1,"allow-touch-move":!1,"slides-per-view":e.columns,"slides-per-group":e.columns,grid:{rows:e.rows,fill:"row"},"space-between":24,onSwiper:e.handleListSwiperReady,onSlideChange:e.handleListSlideChange},{default:withCtx((w,k,S,I)=>{if(k)k("<!--[-->"),ssrRenderList(e.data,(L,D)=>{k(ssrRenderComponent(E,{class:"slide-item",key:D},{default:withCtx((O,V,z,U)=>{if(V)ssrRenderSlot(e.$slots,"item",{item:L,index:D},null,V,z,U);else return[renderSlot(e.$slots,"item",{item:L,index:D},void 0,!0)]}),_:2},S,I))}),k("<!--]-->");else return[(openBlock(!0),createBlock(Fragment,null,renderList(e.data,(L,D)=>(openBlock(),createBlock(E,{class:"slide-item",key:D},{default:withCtx(()=>[renderSlot(e.$slots,"item",{item:L,index:D},void 0,!0)]),_:2},1024))),128))]}),_:3},i)),t("</div>")}const _sfc_setup$K=_sfc_main$K.setup;_sfc_main$K.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/lens/swiper.vue"),_sfc_setup$K?_sfc_setup$K(e,t):void 0};const ListSwiper=_export_sfc(_sfc_main$K,[["ssrRender",_sfc_ssrRender$K],["__scopeId","data-v-44fea3ed"]]),_sfc_main$J=defineComponent({name:"LensYoutubeVideoList",components:{ListSwiper},props:{playlistId:{type:String,required:!0}},emits:["view"],setup(e,t){const{gtag:i}=useEnhancer(),s=ref([]),c=ref(!0),d=async()=>{try{c.value=!0,s.value=await fetchYouTubeVideoList(e.playlistId)}catch{s.value=[]}finally{c.value=!1}},g=y=>{var w,k,S;const E=((w=y.high)==null?void 0:w.url)||((k=y.medium)==null?void 0:k.url)||((S=y.defult)==null?void 0:S.url);return E?getTargetProxyURL(E,ProxyModule.YouTube):""},r=y=>{t.emit("view",y),i==null||i.event("youtube_view",{event_category:GAEventCategories.Lens})};return onMounted(()=>{d()}),{LanguageKey,fetching:c,videos:s,getThumbURL:g,handleView:r}}}),videos_vue_vue_type_style_index_0_scoped_b28be25a_lang="";function _sfc_ssrRender$J(e,t,i,s,c,d,g,r){const y=resolveComponent("placeholder"),E=resolveComponent("list-swiper"),w=resolveComponent("udate"),k=resolveDirective("lozad");t(ssrRenderComponent(y,mergeProps({data:e.videos,loading:e.fetching},s),{placeholder:withCtx((S,I,L,D)=>{if(I)ssrRenderSlot(e.$slots,"empty",{},null,I,L,D);else return[renderSlot(e.$slots,"empty",{},void 0,!0)]}),loading:withCtx((S,I,L,D)=>{if(I)ssrRenderSlot(e.$slots,"loading",{},null,I,L,D);else return[renderSlot(e.$slots,"loading",{},void 0,!0)]}),default:withCtx((S,I,L,D)=>{if(I)I(ssrRenderComponent(E,{data:e.videos},{item:withCtx(({item:O},V,z,U)=>{if(V)V(`<div class="video" data-v-b28be25a${U}><div class="thumb" data-v-b28be25a${U}><div class="mask" data-v-b28be25a${U}><div class="button" data-v-b28be25a${U}><i class="iconfont icon-music-play" data-v-b28be25a${U}></i></div></div><span class="published-at" data-v-b28be25a${U}><i class="iconfont icon-clock" data-v-b28be25a${U}></i><span class="text" data-v-b28be25a${U}>`),V(ssrRenderComponent(w,{to:"ago",date:O.snippet.publishedAt},null,z,U)),V(`</span></span><div${ssrRenderAttrs(mergeProps({class:"background","data-background-image":e.getThumbURL(O.snippet.thumbnails)},ssrGetDirectiveProps(e,k)))} data-v-b28be25a${U}></div></div><h5 class="title" data-v-b28be25a${U}>${ssrInterpolate(O.snippet.title)}</h5><div class="description" data-v-b28be25a${U}>${ssrInterpolate(O.snippet.description||"-")}</div></div>`);else return[createVNode("div",{class:"video",onClick:Z=>e.handleView(O)},[createVNode("div",{class:"thumb"},[createVNode("div",{class:"mask"},[createVNode("div",{class:"button"},[createVNode("i",{class:"iconfont icon-music-play"})])]),createVNode("span",{class:"published-at"},[createVNode("i",{class:"iconfont icon-clock"}),createVNode("span",{class:"text"},[createVNode(w,{to:"ago",date:O.snippet.publishedAt},null,8,["date"])])]),withDirectives(createVNode("div",{class:"background","data-background-image":e.getThumbURL(O.snippet.thumbnails)},null,8,["data-background-image"]),[[k]])]),createVNode("h5",{class:"title"},toDisplayString(O.snippet.title),1),createVNode("div",{class:"description"},toDisplayString(O.snippet.description||"-"),1)],8,["onClick"])]}),_:1},L,D));else return[createVNode(E,{data:e.videos},{item:withCtx(({item:O})=>[createVNode("div",{class:"video",onClick:V=>e.handleView(O)},[createVNode("div",{class:"thumb"},[createVNode("div",{class:"mask"},[createVNode("div",{class:"button"},[createVNode("i",{class:"iconfont icon-music-play"})])]),createVNode("span",{class:"published-at"},[createVNode("i",{class:"iconfont icon-clock"}),createVNode("span",{class:"text"},[createVNode(w,{to:"ago",date:O.snippet.publishedAt},null,8,["date"])])]),withDirectives(createVNode("div",{class:"background","data-background-image":e.getThumbURL(O.snippet.thumbnails)},null,8,["data-background-image"]),[[k]])]),createVNode("h5",{class:"title"},toDisplayString(O.snippet.title),1),createVNode("div",{class:"description"},toDisplayString(O.snippet.description||"-"),1)],8,["onClick"])]),_:1},8,["data"])]}),_:3},i))}const _sfc_setup$J=_sfc_main$J.setup;_sfc_main$J.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/lens/youtube/videos.vue"),_sfc_setup$J?_sfc_setup$J(e,t):void 0};const YoutubeVideoList=_export_sfc(_sfc_main$J,[["ssrRender",_sfc_ssrRender$J],["__scopeId","data-v-b28be25a"]]),_sfc_main$I=defineComponent({name:"LensPageYoutubePlaylist",components:{YoutubeVideoList},props:{playlists:{type:Array,required:!0}},setup(){const e=ref(null),t=computed(()=>Boolean(e.value)),i=computed(()=>{const d=e.value;return d?getYouTubeVideoEmbedURL(d.snippet.resourceId.videoId,d.snippet.playlistId):UNDEFINED});return{isOnYouTubeModal:t,youTubeModalURL:i,openYouTubeModal:d=>{e.value=d},closeYouTubeModal:()=>{e.value=null}}}}),playlist_vue_vue_type_style_index_0_scoped_90a9b55b_lang="";function _sfc_ssrRender$I(e,t,i,s,c,d,g,r){const y=resolveComponent("youtube-video-list"),E=resolveComponent("client-only"),w=resolveComponent("popup");t(`<div${ssrRenderAttrs(mergeProps({class:"youtube-playlist"},s))} data-v-90a9b55b><ul class="playlist" data-v-90a9b55b><!--[-->`),ssrRenderList(e.playlists,(k,S)=>{t(`<li class="item"${ssrRenderAttr("title",k.title)} data-v-90a9b55b>`),ssrRenderSlot(e.$slots,"title",{list:k,index:S},null,t,i),t(ssrRenderComponent(y,{"playlist-id":k.id,onView:e.openYouTubeModal},{empty:withCtx((I,L,D,O)=>{if(L)ssrRenderSlot(e.$slots,"empty",{},null,L,D,O);else return[renderSlot(e.$slots,"empty",{},void 0,!0)]}),loading:withCtx((I,L,D,O)=>{if(L)ssrRenderSlot(e.$slots,"loading",{},null,L,D,O);else return[renderSlot(e.$slots,"loading",{},void 0,!0)]}),_:2},i)),t("</li>")}),t("<!--]--></ul>"),t(ssrRenderComponent(E,null,{default:withCtx((k,S,I,L)=>{if(S)S(ssrRenderComponent(w,{visible:e.isOnYouTubeModal,onClose:e.closeYouTubeModal},{default:withCtx((D,O,V,z)=>{if(O)O(`<iframe class="youtube-modal"${ssrRenderAttr("src",e.youTubeModalURL)} data-v-90a9b55b${z}></iframe>`);else return[createVNode("iframe",{class:"youtube-modal",src:e.youTubeModalURL},null,8,["src"])]}),_:1},I,L));else return[createVNode(w,{visible:e.isOnYouTubeModal,onClose:e.closeYouTubeModal},{default:withCtx(()=>[createVNode("iframe",{class:"youtube-modal",src:e.youTubeModalURL},null,8,["src"])]),_:1},8,["visible","onClose"])]}),_:1},i)),t("</div>")}const _sfc_setup$I=_sfc_main$I.setup;_sfc_main$I.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/lens/youtube/playlist.vue"),_sfc_setup$I?_sfc_setup$I(e,t):void 0};const YoutubePlaylist=_export_sfc(_sfc_main$I,[["ssrRender",_sfc_ssrRender$I],["__scopeId","data-v-90a9b55b"]]),_sfc_main$H=defineComponent({name:"LensPage",components:{PageBanner,PageTitle,LensSkeleton,InstagramGrid,YoutubePlaylist},setup(){const{i18n:e,meta:t,isZhLang:i}=useEnhancer();t(()=>{const r=firstUpperCase(e.t(LanguageKey.PAGE_LENS,Language.English));return{pageTitle:(i.value?[e.t(LanguageKey.PAGE_LENS),r]:[r]).join(" | "),description:`${META.author} \u7684\u89C6\u9891\u521B\u4F5C`}});const{instagramMedias:s,youtubePlayList:c}=useStores(),d=computed(()=>s.data.slice(0,23)),g=computed(()=>c.data.filter(r=>r.contentDetails.itemCount>1));return useUniversalFetch(()=>Promise.all([s.fetch().catch(()=>{}),c.fetch().catch(()=>{})])),{VALUABLE_LINKS,LanguageKey,getYouTubePlaylistURL,insStore:s,insMediasData:d,ytPlaylistData:g}}}),index_vue_vue_type_style_index_0_scoped_17b561ca_lang="";function _sfc_ssrRender$H(e,t,i,s,c,d,g,r){const y=resolveComponent("page-banner"),E=resolveComponent("webfont"),w=resolveComponent("i18n"),k=resolveComponent("page-title"),S=resolveComponent("ulink"),I=resolveComponent("placeholder"),L=resolveComponent("empty"),D=resolveComponent("lens-skeleton"),O=resolveComponent("instagram-grid"),V=resolveComponent("youtube-playlist");t(`<div${ssrRenderAttrs(mergeProps({class:"lens-page"},s))} data-v-17b561ca>`),t(ssrRenderComponent(y,{blur:!1,position:68,image:"/images/page-lens/banner.jpeg"},{title:withCtx((z,U,Z,W)=>{if(U)U(ssrRenderComponent(E,null,{default:withCtx((ne,re,ie,Ce)=>{if(re)re(ssrRenderComponent(w,{zh:"\u51E1\u5FC3\u6240\u5411\uFF0C\u7D20\u5C65\u4EE5\u5F80",en:"Because it's there"},null,ie,Ce));else return[createVNode(w,{zh:"\u51E1\u5FC3\u6240\u5411\uFF0C\u7D20\u5C65\u4EE5\u5F80",en:"Because it's there"})]}),_:1},Z,W));else return[createVNode(E,null,{default:withCtx(()=>[createVNode(w,{zh:"\u51E1\u5FC3\u6240\u5411\uFF0C\u7D20\u5C65\u4EE5\u5F80",en:"Because it's there"})]),_:1})]}),description:withCtx((z,U,Z,W)=>{if(U)U(ssrRenderComponent(w,null,{zh:withCtx((ne,re,ie,Ce)=>{if(re)re("\u751F\u5982\u9006\u65C5\uFF0C\u4E00\u82C7\u4EE5\u822A");else return[createTextVNode("\u751F\u5982\u9006\u65C5\uFF0C\u4E00\u82C7\u4EE5\u822A")]}),en:withCtx((ne,re,ie,Ce)=>{if(re)re("&quot;why did you want to climb mount Everest?&quot;");else return[createTextVNode('"why did you want to climb mount Everest?"')]}),_:1},Z,W));else return[createVNode(w,null,{zh:withCtx(()=>[createTextVNode("\u751F\u5982\u9006\u65C5\uFF0C\u4E00\u82C7\u4EE5\u822A")]),en:withCtx(()=>[createTextVNode('"why did you want to climb mount Everest?"')]),_:1})]}),_:1},i)),t('<div class="container" data-v-17b561ca>'),t(ssrRenderComponent(k,{class:"module-title instagram",level:4},{default:withCtx((z,U,Z,W)=>{if(U)U(ssrRenderComponent(S,{class:"link",href:e.VALUABLE_LINKS.INSTAGRAM},{default:withCtx((ne,re,ie,Ce)=>{if(re)re("Newest \xB7 instagram");else return[createTextVNode("Newest \xB7 instagram")]}),_:1},Z,W));else return[createVNode(S,{class:"link",href:e.VALUABLE_LINKS.INSTAGRAM},{default:withCtx(()=>[createTextVNode("Newest \xB7 instagram")]),_:1},8,["href"])]}),_:1},i)),t(ssrRenderComponent(I,{data:e.insMediasData,loading:e.insStore.fetching},{placeholder:withCtx((z,U,Z,W)=>{if(U)U(ssrRenderComponent(L,{class:"module-empty",key:"empty"},{default:withCtx((ne,re,ie,Ce)=>{if(re)re(ssrRenderComponent(w,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,ie,Ce));else return[createVNode(w,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,8,["k"])]}),_:1},Z,W));else return[createVNode(L,{class:"module-empty",key:"empty"},{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,8,["k"])]),_:1})]}),loading:withCtx((z,U,Z,W)=>{if(U)U(ssrRenderComponent(D,{columns:6,rows:2,height:155,key:"loading",class:"module-loading"},null,Z,W));else return[createVNode(D,{columns:6,rows:2,height:155,key:"loading",class:"module-loading"})]}),default:withCtx((z,U,Z,W)=>{if(U)U(`<div class="module-content" data-v-17b561ca${W}>`),U(ssrRenderComponent(O,{medias:e.insMediasData},null,Z,W)),U("</div>");else return[createVNode("div",{class:"module-content"},[createVNode(O,{medias:e.insMediasData},null,8,["medias"])])]}),_:1},i)),t('<div class="module-content" data-v-17b561ca>'),t(ssrRenderComponent(V,{playlists:e.ytPlaylistData},{title:withCtx(({list:z},U,Z,W)=>{if(U)U(ssrRenderComponent(k,{class:"module-title youtube",level:5},{left:withCtx((ne,re,ie,Ce)=>{if(re)re(ssrRenderComponent(S,{class:"link",href:e.getYouTubePlaylistURL(z.id)},{default:withCtx((we,fe,de,Le)=>{if(fe)fe(`${ssrInterpolate(z.snippet.title)} (${ssrInterpolate(z.contentDetails.itemCount)}) `);else return[createTextVNode(toDisplayString(z.snippet.title)+" ("+toDisplayString(z.contentDetails.itemCount)+") ",1)]}),_:2},ie,Ce));else return[createVNode(S,{class:"link",href:e.getYouTubePlaylistURL(z.id)},{default:withCtx(()=>[createTextVNode(toDisplayString(z.snippet.title)+" ("+toDisplayString(z.contentDetails.itemCount)+") ",1)]),_:2},1032,["href"])]}),right:withCtx((ne,re,ie,Ce)=>{if(re)re(`<span class="brand" data-v-17b561ca${Ce}>YouTube \xB7 Channel</span>`);else return[createVNode("span",{class:"brand"},"YouTube \xB7 Channel")]}),_:2},Z,W));else return[createVNode(k,{class:"module-title youtube",level:5},{left:withCtx(()=>[createVNode(S,{class:"link",href:e.getYouTubePlaylistURL(z.id)},{default:withCtx(()=>[createTextVNode(toDisplayString(z.snippet.title)+" ("+toDisplayString(z.contentDetails.itemCount)+") ",1)]),_:2},1032,["href"])]),right:withCtx(()=>[createVNode("span",{class:"brand"},"YouTube \xB7 Channel")]),_:2},1024)]}),loading:withCtx((z,U,Z,W)=>{if(U)U(ssrRenderComponent(D,{columns:5,rows:1,height:166,key:"loading",class:"module-loading"},null,Z,W));else return[createVNode(D,{columns:5,rows:1,height:166,key:"loading",class:"module-loading"})]}),empty:withCtx((z,U,Z,W)=>{if(U)U(ssrRenderComponent(L,{class:"module-empty",key:"empty"},{default:withCtx((ne,re,ie,Ce)=>{if(re)re(ssrRenderComponent(w,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,ie,Ce));else return[createVNode(w,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,8,["k"])]}),_:1},Z,W));else return[createVNode(L,{class:"module-empty",key:"empty"},{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,8,["k"])]),_:1})]}),_:1},i)),t("</div></div></div>")}const _sfc_setup$H=_sfc_main$H.setup;_sfc_main$H.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/lens/index.vue"),_sfc_setup$H?_sfc_setup$H(e,t):void 0};const LensPage=_export_sfc(_sfc_main$H,[["ssrRender",_sfc_ssrRender$H],["__scopeId","data-v-17b561ca"]]),_sfc_main$G=defineComponent({name:"MerchProductItem",props:{product:{type:Object,required:!0},imageStyle:{type:Object,required:!1}},setup(){const{gtag:e}=useEnhancer();return{handleGTagEvent:(i,s)=>{e==null||e.event(i,{event_category:GAEventCategories.Universal,event_label:s})}}}}),product_vue_vue_type_style_index_0_scoped_e0b93e59_lang="";function _sfc_ssrRender$G(e,t,i,s,c,d,g,r){const y=resolveComponent("ulink");t(`<li${ssrRenderAttrs(mergeProps({class:"product"},s))} data-v-e0b93e59><div class="image" style="${ssrRenderStyle({backgroundImage:`url('${e.product.src}')`,...e.imageStyle})}" data-v-e0b93e59></div><div class="content" data-v-e0b93e59>`),t(ssrRenderComponent(y,{class:"title",href:e.product.url},{default:withCtx((E,w,k,S)=>{if(w)w(`${ssrInterpolate(e.product.name)}`);else return[createTextVNode(toDisplayString(e.product.name),1)]}),_:1},i)),t(`<p class="description" data-v-e0b93e59>${e.product.description}</p></div><div class="detail" data-v-e0b93e59><p class="text" data-v-e0b93e59>${ssrInterpolate(e.product.detail||"\u6682\u65E0\u63CF\u8FF0")}</p>`),t(ssrRenderComponent(y,{class:"link",href:e.product.url,onMousedown:E=>e.handleGTagEvent("merch_product_link",e.product.name)},{default:withCtx((E,w,k,S)=>{if(w)w(` \u53BB\u770B\u770B <i class="iconfont icon-new-window" data-v-e0b93e59${S}></i>`);else return[createTextVNode(" \u53BB\u770B\u770B "),createVNode("i",{class:"iconfont icon-new-window"})]}),_:1},i)),t("</div></li>")}const _sfc_setup$G=_sfc_main$G.setup;_sfc_main$G.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/merch/product.vue"),_sfc_setup$G?_sfc_setup$G(e,t):void 0};const ProductItem=_export_sfc(_sfc_main$G,[["ssrRender",_sfc_ssrRender$G],["__scopeId","data-v-e0b93e59"]]),_sfc_main$F=defineComponent({name:"MerchPage",components:{PageBanner,PageTitle,ProductItem},setup(){const{i18n:e,meta:t,isZhLang:i,adConfig:s}=useEnhancer(),c=computed(()=>s.value.PC_MERCH_PRODUCTS);return t(()=>{const d=firstUpperCase(e.t(LanguageKey.PAGE_MERCH,Language.English));return{pageTitle:(i.value?[e.t(LanguageKey.PAGE_MERCH),d]:[d]).join(" | "),description:`${META.author} \u7684\u5468\u8FB9\u597D\u7269`}}),{products:c}}}),index_vue_vue_type_style_index_0_scoped_ab749115_lang="";function _sfc_ssrRender$F(e,t,i,s,c,d,g,r){const y=resolveComponent("page-banner"),E=resolveComponent("webfont"),w=resolveComponent("i18n"),k=resolveComponent("page-title"),S=resolveComponent("product-item");t(`<div${ssrRenderAttrs(mergeProps({class:"merch-page"},s))} data-v-ab749115>`),t(ssrRenderComponent(y,{blur:!1,position:70,image:"/images/page-merch/banner.jpg"},{title:withCtx((I,L,D,O)=>{if(L)L(ssrRenderComponent(E,null,{default:withCtx((V,z,U,Z)=>{if(z)z(ssrRenderComponent(w,{zh:"\u4EB2\u8EAB\u4F53\u9A8C\uFF0C\u771F\u5B9E\u4E0D\u865A",en:"Merch Bar"},null,U,Z));else return[createVNode(w,{zh:"\u4EB2\u8EAB\u4F53\u9A8C\uFF0C\u771F\u5B9E\u4E0D\u865A",en:"Merch Bar"})]}),_:1},D,O));else return[createVNode(E,null,{default:withCtx(()=>[createVNode(w,{zh:"\u4EB2\u8EAB\u4F53\u9A8C\uFF0C\u771F\u5B9E\u4E0D\u865A",en:"Merch Bar"})]),_:1})]}),description:withCtx((I,L,D,O)=>{if(L)L(ssrRenderComponent(w,{zh:"\u624B\u52A8\u7EF4\u62A4\uFF0C\u672A\u7528\u4E0D\u63A8",en:"Maybe you will like it"},null,D,O));else return[createVNode(w,{zh:"\u624B\u52A8\u7EF4\u62A4\uFF0C\u672A\u7528\u4E0D\u63A8",en:"Maybe you will like it"})]}),_:1},i)),t('<div class="container" data-v-ab749115><!--[-->'),ssrRenderList(e.products,(I,L)=>{t("<!--[-->"),t(ssrRenderComponent(k,{class:"title",id:"products"},{default:withCtx((D,O,V,z)=>{if(O)O(`${ssrInterpolate(L||"-")}`);else return[createTextVNode(toDisplayString(L||"-"),1)]}),_:2},i)),t('<ul class="product-list" data-v-ab749115><!--[-->'),ssrRenderList(I,(D,O)=>{var V;t(ssrRenderComponent(S,{key:O,product:D,"image-style":{backgroundSize:(V=D.size)!=null?V:"cover"}},null,i))}),t("<!--]--></ul><!--]-->")}),t('<!--]--><div class="end" data-v-ab749115></div></div></div>')}const _sfc_setup$F=_sfc_main$F.setup;_sfc_main$F.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/merch/index.vue"),_sfc_setup$F?_sfc_setup$F(e,t):void 0};const MerchPage=_export_sfc(_sfc_main$F,[["ssrRender",_sfc_ssrRender$F],["__scopeId","data-v-ab749115"]]);var ProviderId=(e=>(e.GitHub="github",e.PayPal="paypal",e.Alipay="alipay",e.WeChatPay="wechat-pay",e.BitCoin="bitcoin",e.Ethereum="ethereum",e))(ProviderId||{});const providerIds=Object.values(ProviderId),providers=[{id:"github",title:"GitHub Sponsors",logo:"/images/third-party/github-sponsors-logo.svg"},{id:"paypal",title:"PayPal me",link:VALUABLE_LINKS.PAYPAL,logo:"/images/third-party/paypal-logo.svg",qrcode:"/images/third-party/paypal-qrcode.png"},{id:"alipay",title:"\u652F\u4ED8\u5B9D",text:"\u901A\u8FC7\u652F\u4ED8\u5B9D\u5BA2\u6237\u7AEF\u626B\u7801",logo:"/images/third-party/alipay-logo.svg",qrcode:"/images/third-party/alipay-qrcode.png"},{id:"wechat-pay",title:"\u5FAE\u4FE1\u8D5E\u8D4F",text:"\u901A\u8FC7\u5FAE\u4FE1\u5BA2\u6237\u7AEF\u626B\u7801",logo:"/images/third-party/wechat-pay-logo.svg",qrcode:"/images/third-party/wechat-pay-qrcode.jpg"},{id:"bitcoin",title:"BTC",address:IDENTITIES.BTC_ADDRESS,logo:"/images/third-party/btc-logo.svg",qrcode:"/images/third-party/btc-qrcode.png"},{id:"ethereum",title:"ETH",address:IDENTITIES.ETH_ADDRESS,logo:"/images/third-party/eth-logo.svg",qrcode:"/images/third-party/eth-qrcode.png"}],createSponsorState=e=>{const{gtag:t}=useEnhancer(),i=ref(e&&providerIds.includes(e)?e:providers[0].id),s=computed(()=>providers.find(y=>y.id===i.value)),c=ref(null),d=ref(!1),g=()=>{c.value||d.value||(d.value=!0,tunnel$1.dispatch(TunnelModule.GitHubSponsors).then(y=>{c.value=y}).finally(()=>{d.value=!1}))},r=y=>{i.value=y,y==="github"&&g(),t==null||t.event("sponsor_modal_switch",{event_category:GAEventCategories.Widget})};return i.value==="github"&&g(),{activeId:i,activeProvider:s,setProviderId:r,ghSponsors:c,ghSponsorsLoading:d}},_sfc_main$E=defineComponent({name:"SponsorTabs",props:{state:{type:Object,required:!0},hideTitle:{type:Boolean,default:!1}},setup(e){return{providers,activeId:e.state.activeId,handleSwitch:e.state.setProviderId}}}),tabs_vue_vue_type_style_index_0_scoped_b6ca9e76_lang="";function _sfc_ssrRender$E(e,t,i,s,c,d,g,r){const y=resolveComponent("uimage");t(`<div${ssrRenderAttrs(mergeProps({class:["sponsor-tabs",e.activeId]},s))} data-v-b6ca9e76><!--[-->`),ssrRenderList(e.providers,(E,w)=>{t(`<button class="${ssrRenderClass([[E.id,{active:e.activeId===E.id}],"item"])}"${ssrRenderAttr("title",E.title)} data-v-b6ca9e76><span class="logo" data-v-b6ca9e76>`),t(ssrRenderComponent(y,{class:"image",alt:E.title,src:E.logo,cdn:""},null,i)),t("</span>"),e.hideTitle?t("<!---->"):t(`<span class="title" data-v-b6ca9e76>${ssrInterpolate(E.title)}</span>`),t("</button>")}),t("<!--]--></div>")}const _sfc_setup$E=_sfc_main$E.setup;_sfc_main$E.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/widget/sponsor/tabs.vue"),_sfc_setup$E?_sfc_setup$E(e,t):void 0};const SponsorTabs=_export_sfc(_sfc_main$E,[["ssrRender",_sfc_ssrRender$E],["__scopeId","data-v-b6ca9e76"]]),_sfc_main$D=defineComponent({name:"SponsorProvider",props:{state:{type:Object,required:!0},maxSponsors:{type:Number,default:20}},setup(e){const t=i=>{copy(i).then(()=>{alert("Address copied to clipboard")})};return{VALUABLE_LINKS,ProviderId,providers,activeProvider:e.state.activeProvider,ghSponsors:e.state.ghSponsors,ghSponsorsLoading:e.state.ghSponsorsLoading,handleCopyAddress:t}}}),provider_vue_vue_type_style_index_0_scoped_8b339ef3_lang="";function _sfc_ssrRender$D(e,t,i,s,c,d,g,r){const y=resolveComponent("ulink"),E=resolveComponent("uimage"),w=resolveComponent("i18n"),k=resolveComponent("client-only");t(`<div${ssrRenderAttrs(mergeProps({class:["sponsor-provider",e.activeProvider.id]},s))} data-v-8b339ef3><p class="external" data-v-8b339ef3>`),e.activeProvider.link?(t("<!--[-->"),t(ssrRenderComponent(y,{class:"link",href:e.activeProvider.link},{default:withCtx((S,I,L,D)=>{if(I)I(`<code data-v-8b339ef3${D}>${ssrInterpolate(e.activeProvider.link)}</code>`);else return[createVNode("code",null,toDisplayString(e.activeProvider.link),1)]}),_:1},i)),t('<i class="iconfont icon-new-window-s" data-v-8b339ef3></i><!--]-->')):t("<!---->"),e.activeProvider.address?t(`<!--[--><code class="link" data-v-8b339ef3>${ssrInterpolate(e.activeProvider.address)}</code><i class="iconfont icon-copy" data-v-8b339ef3></i><!--]-->`):t("<!---->"),e.activeProvider.text?t(`<!--[-->${ssrInterpolate(e.activeProvider.text)} <i class="iconfont icon-qrcode" data-v-8b339ef3></i><!--]-->`):t("<!---->"),t("</p>"),e.activeProvider.qrcode?t(ssrRenderComponent(E,{class:"qrcode",src:e.activeProvider.qrcode,cdn:""},null,i)):t("<!---->"),e.activeProvider.id==e.ProviderId.GitHub?(t('<div class="github-sponsors" data-v-8b339ef3>'),t(ssrRenderComponent(y,{class:"link",href:e.VALUABLE_LINKS.GITHUB_SPONSORS},{default:withCtx((S,I,L,D)=>{if(I)I(`<i class="iconfont icon-heart" data-v-8b339ef3${D}></i><span class="text" data-v-8b339ef3${D}>`),I(ssrRenderComponent(w,{en:"Sponsor me on GitHub",zh:"\u901A\u8FC7 GitHub Sponsor \u8D5E\u52A9\u6211"},null,L,D)),I("</span>");else return[createVNode("i",{class:"iconfont icon-heart"}),createVNode("span",{class:"text"},[createVNode(w,{en:"Sponsor me on GitHub",zh:"\u901A\u8FC7 GitHub Sponsor \u8D5E\u52A9\u6211"})])]}),_:1},i)),t(ssrRenderComponent(k,null,{default:withCtx((S,I,L,D)=>{if(I)I(""),e.ghSponsors?(I(`<div data-v-8b339ef3${D}><p class="total" data-v-8b339ef3${D}>`),I(ssrRenderComponent(w,null,{zh:withCtx((O,V,z,U)=>{if(V)V(` \u6211\u5728 GitHub Sponsors \u5DF2\u5F97\u5230 ${ssrInterpolate(e.ghSponsors.totalCount)} \u4F4D\u8D5E\u52A9\u8005\u7684\u652F\u6301\u3002 `);else return[createTextVNode(" \u6211\u5728 GitHub Sponsors \u5DF2\u5F97\u5230 "+toDisplayString(e.ghSponsors.totalCount)+" \u4F4D\u8D5E\u52A9\u8005\u7684\u652F\u6301\u3002 ",1)]}),en:withCtx((O,V,z,U)=>{if(V)V(` I have ${ssrInterpolate(e.ghSponsors.totalCount)} backers on GitHub Sponsors. `);else return[createTextVNode(" I have "+toDisplayString(e.ghSponsors.totalCount)+" backers on GitHub Sponsors. ",1)]}),_:1},L,D)),I(`</p><div class="users" data-v-8b339ef3${D}><!--[-->`),ssrRenderList(e.ghSponsors.edges.slice(0,e.maxSponsors),(O,V)=>{I(ssrRenderComponent(y,{class:"item",href:O.node.url,title:O.node.name,key:V},{default:withCtx((z,U,Z,W)=>{if(U)U(ssrRenderComponent(E,{class:"avatar",src:O.node.avatarUrl,alt:O.node.name},null,Z,W));else return[createVNode(E,{class:"avatar",src:O.node.avatarUrl,alt:O.node.name},null,8,["src","alt"])]}),_:2},L,D))}),I("<!--]-->"),e.ghSponsors.edges.length>e.maxSponsors?I(ssrRenderComponent(y,{class:"more-link",href:e.VALUABLE_LINKS.GITHUB_SPONSORS+"#sponsors"},{default:withCtx((O,V,z,U)=>{if(V)V(` + ${ssrInterpolate(e.ghSponsors.edges.length-e.maxSponsors)}`);else return[createTextVNode(" + "+toDisplayString(e.ghSponsors.edges.length-e.maxSponsors),1)]}),_:1},L,D)):I("<!---->"),I("</div></div>")):I("<!---->");else return[createVNode(Transition,{name:"module"},{default:withCtx(()=>[e.ghSponsors?(openBlock(),createBlock("div",{key:0},[createVNode("p",{class:"total"},[createVNode(w,null,{zh:withCtx(()=>[createTextVNode(" \u6211\u5728 GitHub Sponsors \u5DF2\u5F97\u5230 "+toDisplayString(e.ghSponsors.totalCount)+" \u4F4D\u8D5E\u52A9\u8005\u7684\u652F\u6301\u3002 ",1)]),en:withCtx(()=>[createTextVNode(" I have "+toDisplayString(e.ghSponsors.totalCount)+" backers on GitHub Sponsors. ",1)]),_:1})]),createVNode("div",{class:"users"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.ghSponsors.edges.slice(0,e.maxSponsors),(O,V)=>(openBlock(),createBlock(y,{class:"item",href:O.node.url,title:O.node.name,key:V},{default:withCtx(()=>[createVNode(E,{class:"avatar",src:O.node.avatarUrl,alt:O.node.name},null,8,["src","alt"])]),_:2},1032,["href","title"]))),128)),e.ghSponsors.edges.length>e.maxSponsors?(openBlock(),createBlock(y,{key:0,class:"more-link",href:e.VALUABLE_LINKS.GITHUB_SPONSORS+"#sponsors"},{default:withCtx(()=>[createTextVNode(" + "+toDisplayString(e.ghSponsors.edges.length-e.maxSponsors),1)]),_:1},8,["href"])):createCommentVNode("",!0)])])):createCommentVNode("",!0)]),_:1})]}),_:1},i)),t("</div>")):t("<!---->"),t("</div>")}const _sfc_setup$D=_sfc_main$D.setup;_sfc_main$D.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/widget/sponsor/provider.vue"),_sfc_setup$D?_sfc_setup$D(e,t):void 0};const SponsorProvider=_export_sfc(_sfc_main$D,[["ssrRender",_sfc_ssrRender$D],["__scopeId","data-v-8b339ef3"]]),_sfc_main$C=defineComponent({name:"SponsorPage",components:{SponsorTabs,SponsorProvider,PageBanner},setup(){const{route:e,i18n:t,meta:i,isZhLang:s}=useEnhancer(),c=createSponsorState(e.hash.replace("#",""));return i(()=>{const d=firstUpperCase(t.t(LanguageKey.PAGE_SPONSOR,Language.English));return{pageTitle:(s.value?[t.t(LanguageKey.PAGE_SPONSOR),d]:[d]).join(" | ")}}),{LanguageKey,sponsorState:c}}}),sponsor_vue_vue_type_style_index_0_scoped_70e9e41c_lang="";function _sfc_ssrRender$C(e,t,i,s,c,d,g,r){const y=resolveComponent("page-banner"),E=resolveComponent("webfont"),w=resolveComponent("i18n"),k=resolveComponent("sponsor-tabs"),S=resolveComponent("sponsor-provider");t(`<div${ssrRenderAttrs(mergeProps({class:"sponsor-page"},s))} data-v-70e9e41c>`),t(ssrRenderComponent(y,{image:"/images/page-sponsor/banner.webp",blur:!1},{title:withCtx((I,L,D,O)=>{if(L)L(ssrRenderComponent(E,null,{default:withCtx((V,z,U,Z)=>{if(z)z(ssrRenderComponent(w,{zh:"\u8D60\u543E\u73AB\u7470\uFF0C\u624B\u7559\u4F59\u9999",en:"Become a sponsor to me"},null,U,Z));else return[createVNode(w,{zh:"\u8D60\u543E\u73AB\u7470\uFF0C\u624B\u7559\u4F59\u9999",en:"Become a sponsor to me"})]}),_:1},D,O));else return[createVNode(E,null,{default:withCtx(()=>[createVNode(w,{zh:"\u8D60\u543E\u73AB\u7470\uFF0C\u624B\u7559\u4F59\u9999",en:"Become a sponsor to me"})]),_:1})]}),description:withCtx((I,L,D,O)=>{if(L)L(ssrRenderComponent(w,{zh:"\u613F\u6211\u7684\u8F93\u51FA\u5BF9\u4F60\u6709\u6240\u5E2E\u52A9\uFF0C\u5BF9\u6211\u6765\u8BF4\u90A3\u662F\u6700\u597D\u7684\u8912\u5956\u548C\u9F13\u52B1",en:"Your generous financial support is my motivation to keep moving forward"},null,D,O));else return[createVNode(w,{zh:"\u613F\u6211\u7684\u8F93\u51FA\u5BF9\u4F60\u6709\u6240\u5E2E\u52A9\uFF0C\u5BF9\u6211\u6765\u8BF4\u90A3\u662F\u6700\u597D\u7684\u8912\u5956\u548C\u9F13\u52B1",en:"Your generous financial support is my motivation to keep moving forward"})]}),_:1},i)),t('<div class="sponsor-wrapper" data-v-70e9e41c><div class="tabs-wrapper" data-v-70e9e41c><div class="container" data-v-70e9e41c>'),t(ssrRenderComponent(k,{class:"tabs",state:e.sponsorState},null,i)),t("</div></div>"),t(ssrRenderComponent(S,{class:"provider",state:e.sponsorState},null,i)),t("</div></div>")}const _sfc_setup$C=_sfc_main$C.setup;_sfc_main$C.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/pages/sponsor.vue"),_sfc_setup$C?_sfc_setup$C(e,t):void 0};const SponsorPage=_export_sfc(_sfc_main$C,[["ssrRender",_sfc_ssrRender$C],["__scopeId","data-v-70e9e41c"]]);var CategorySlug=(e=>(e.Code="code",e.Insight="insight",e))(CategorySlug||{}),RouteName=(e=>(e.Home="home",e.Article="article-detail",e.CategoryFlow="category-flow",e.TagFlow="tag-flow",e.DateFlow="date-flow",e.SearchFlow="search-flow",e.Archive="archive",e.Guestbook="guestbook",e.About="about",e.App="app",e.Freelancer="freelancer",e.Merch="merch",e.Lens="lens",e.Sponsor="sponsor",e.Error="error",e))(RouteName||{});const routes=[{path:"/",name:"home",components:{default:IndexFlowPage,mobile:MobileFlow},meta:{responsive:!0,ssrCacheAge:60*2}},{path:"/article/:article_id",name:"article-detail",components:{default:ArticleDetailPage,mobile:ArticleDetailPage},props:{default:e=>({articleId:Number(e.params.article_id)}),mobile:e=>({isMobile:!0,articleId:Number(e.params.article_id)})},meta:{responsive:!0,ssrCacheAge:30,async validate({route:e,i18n:t}){if(!Number.isInteger(Number(e.params.article_id)))return Promise.reject({code:BAD_REQUEST,message:t.t(LanguageKey.QUERY_PARAMS_ERROR)+"Article ID \u2192 <number>"})}}},{path:"/category/:category_slug",name:"category-flow",components:{default:CategoryFlowPage,mobile:MobileFlow},props:{default:e=>({categorySlug:e.params.category_slug}),mobile:e=>({categorySlug:e.params.category_slug})},meta:{responsive:!0,ssrCacheAge:60*2,async validate({route:e,i18n:t}){const{category_slug:i}=e.params;if(!i)return Promise.reject({code:BAD_REQUEST,message:t.t(LanguageKey.QUERY_PARAMS_ERROR)+"Category slug \u2192 <string>"})}}},{path:"/tag/:tag_slug",name:"tag-flow",components:{default:TagFlowPage,mobile:MobileFlow},props:{default:e=>({tagSlug:e.params.tag_slug}),mobile:e=>({tagSlug:e.params.tag_slug})},meta:{responsive:!0,ssrCacheAge:60*2,async validate({route:e,i18n:t}){const{tag_slug:i}=e.params;if(!i)return Promise.reject({code:BAD_REQUEST,message:t.t(LanguageKey.QUERY_PARAMS_ERROR)+"Tag slug \u2192 <string>"})}}},{path:"/date/:date",name:"date-flow",components:{default:DateFlowPage,mobile:MobileFlow},props:{default:e=>({date:e.params.date}),mobile:e=>({date:e.params.date})},meta:{responsive:!0,ssrCacheAge:60*60*24,async validate({route:e,i18n:t}){const{date:i}=e.params;if(!i||!isValidDateParam(i))return Promise.reject({code:BAD_REQUEST,message:t.t(LanguageKey.QUERY_PARAMS_ERROR)+`Invalid date ${i||""}`})}}},{path:"/search/:keyword",name:"search-flow",components:{default:SearchFlowPage,mobile:MobileFlow},props:{default:e=>({keyword:e.params.keyword}),mobile:e=>({searchKeyword:e.params.keyword})},meta:{responsive:!0,ssrCacheAge:!1,async validate({route:e,i18n:t}){if(!e.params.keyword)return Promise.reject({code:BAD_REQUEST,message:t.t(LanguageKey.QUERY_PARAMS_ERROR)+"Keywords ?"})}}},{path:"/archive",name:"archive",components:{default:ArchivePage,mobile:ArchivePage},props:{mobile:{isMobile:!0}},meta:{responsive:!0,layout:LayoutColumn.Full,ssrCacheAge:60*60}},{path:"/about",name:"about",components:{default:AboutDesktopPage,mobile:AboutMobilePage},meta:{responsive:!0,layout:LayoutColumn.Full,ssrCacheAge:60*60*4}},{path:"/guestbook",name:"guestbook",components:{default:GuestbookPage,mobile:GuestbookPage},props:{mobile:{isMobile:!0}},meta:{responsive:!0,ssrCacheAge:60*1}},{path:"/app",name:"app",components:{default:AppPage,mobile:AppPage},props:{mobile:{isMobile:!0}},meta:{responsive:!0,layout:LayoutColumn.Full,ssrCacheAge:1/0}},{path:"/merch",name:"merch",component:MerchPage,meta:{responsive:!1,layout:LayoutColumn.Full,ssrCacheAge:60*60*12}},{path:"/lens",name:"lens",component:LensPage,meta:{responsive:!1,layout:LayoutColumn.Full,ssrCacheAge:60*60*1}},{path:"/freelancer",name:"freelancer",component:FreelancerPage,meta:{responsive:!1,layout:LayoutColumn.Full,ssrCacheAge:1/0}},{path:"/sponsor",name:"sponsor",component:SponsorPage,meta:{responsive:!1,layout:LayoutColumn.Full,ssrCacheAge:1/0}},{name:"error",path:"/:error(.*)",component:{},meta:{ssrCacheAge:!1,async validate({i18n:e}){return Promise.reject({code:NOT_FOUND,message:e.t(LanguageKey.NOT_FOUND)})}}}],createUniversalRouter=e=>{const t=vueRouter_prod.createRouter({routes,strict:!0,history:e.history,linkActiveClass:"link-active",scrollBehavior:()=>scrollToPageTop()});return e.beforeMiddleware&&(Array.isArray(e.beforeMiddleware)?e.beforeMiddleware.forEach(t.beforeResolve):t.beforeResolve(e.beforeMiddleware)),e.afterMiddleware&&(Array.isArray(e.afterMiddleware)?e.afterMiddleware.forEach(t.afterEach):t.afterEach(e.afterMiddleware)),t},getTagFlowRoute=e=>`/tag/${e}`,getCategoryFlowRoute=e=>`/category/${e}`,getDateFlowRoute=e=>`/date/${e}`,getArticleDetailRoute=e=>`/article/${e}`,getPageRoute=e=>`/${e}`,isArticleDetail=e=>e===RouteName.Article,isSearchFlow=e=>e===RouteName.SearchFlow,relink=(text,tagMap)=>{const tagNames=Object.keys(tagMap).sort((e,t)=>t.length-e.length),tagRegexp=eval(`/${tagNames.join("|")}/ig`);try{return new URL(text),text}catch(e){return text.replace(tagRegexp,t=>{const i=tagMap.get(t);if(!i||text[0]==="#")return t;const s=i.slug,c=getTagFlowRoute(s),d=`window.$app.config.globalProperties.$router.push({ path: '${c}' });return false`;return`<a href="${c}" title="${i.description}" onclick="${d}">${t}</a>`})}},trimHTML=e=>e.replace(/\s+/g," ").replace(/\n/g," "),sanitizeHTML=e=>e,getRenderer=e=>{const t=new Renderer;return t.text=i=>e!=null&&e.text?e.text(i):i,t.html=i=>e!=null&&e.sanitize?sanitizeHTML(escape$3(i)):i,t.heading=(i,s,c)=>{const d=e!=null&&e.headingID?`id="${e.headingID(i,s,c)}"`:"",g=escape$3(c);return`<h${s} ${d} alt="${g}" title="${g}">${i}</h${s}>`},t.paragraph=i=>{const s=i.trim(),c=s.startsWith("<figure")&&s.endsWith("</figure>"),d=s.startsWith("<div")&&s.endsWith("</div>");return c||d?i:`<p>${i}</p>`},t.checkbox=i=>i?'<i class="checkbox checked iconfont icon-checkbox-selected"></i>':'<i class="checkbox iconfont icon-checkbox-unselected"></i>',t.link=(i,s,c)=>{const d=i==null?void 0:i.startsWith(META.url),g=c.includes("<img"),r=e!=null&&e.sanitize?escape$3(c):c,y=e!=null&&e.sanitize?sanitizeUrl_1(i):i,E=e!=null&&e.sanitize?escape$3(s):s;return sanitizeHTML(trimHTML(`
        <a
          href="${y}"
          target="_blank"
          class="${g?"image-link":"link"}"
          title="${E||(g?y:r)}"
          ${d?"":'rel="external nofollow noopener"'}
        >${r}</a>
      `))},t.image=(i,s,c)=>{var y;const d=(y=sanitizeUrl_1(i))==null?void 0:y.replace(/^http:\/\//gi,`${API_CONFIG.PROXY}/`),g=sanitizeHTML(escape$3(s||c)),r=sanitizeHTML(escape$3(c));return trimHTML(`
      <div class="figure-wrapper">
        <figure class="image ${r?"caption":""}" data-status="loading">
          <div class="placeholder error">
            <i class="iconfont icon-image-error"></i>
          </div>
          <div class="placeholder loading">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
          <img
            class="${LOZAD_CLASS_NAME}"
            data-src="${d}"
            ${r?`alt="${r}"`:""}
            ${g?`title="${g}"`:""}
            onload="this.parentElement.dataset.status = 'loaded'"
            onerror="this.parentElement.dataset.status = 'error'"
            onclick="window.$popup.vImage(this.src)"
          />
          ${r?`<figcaption>${r}</figcaption>`:""}
        </figure>
      </div>
    `)},t.code=function(i,s,c){if(t.options.highlight){const r=t.options.highlight(i,s||"");r!=null&&r!==i&&(c=!0,i=r)}const d=i.split(`
`).map((r,y)=>`<li class="code-line-number">${y+1}</li>`.replace(/\s+/g," ")).join(""),g=`
      contenteditable="true"
      oncut="return false"
      onpaste="return false"
      onkeydown="if(event.metaKey) return true; return false;"
    `;return s?`
        <pre data-lang="${s}">
          <ul class="code-lines">${d}</ul>
          <code
            ${g}
            class="${t.options.langPrefix}${encodeURI(s)}"
          >${c?i:encodeURI(i)}
</code>
        </pre>

      `:`
        <pre>
          <ul class="code-lines">${d}</ul>
          <code ${g}>${c?i:encodeURI(i)}
</code>
        </pre>
      `},t};marked.setOptions({gfm:!0,breaks:!1,pedantic:!1,smartLists:!0,smartypants:!1,langPrefix:"hljs language-",highlight(e,t){return HighlightJS.getLanguage(t)?HighlightJS.highlight(e,{language:t}).value:HighlightJS.highlightAuto(e).value}});const markdownToHTML=(e,t)=>{if(!e||typeof e!="string")return"";const i={headingID:t==null?void 0:t.headingIDRenderer};return t!=null&&t.relink&&(i.text=s=>relink(s,t.tagMap)),t!=null&&t.sanitize&&(i.sanitize=!0),marked.parse(e,{renderer:getRenderer(i)})},ARTICLE_API_PATH="/article",useArticleListStore=pinia_prod.defineStore("articleList",{state:()=>({hotList:{fetched:!1,fetching:!1,data:[]},list:{fetching:!1,data:[],pagination:null}}),actions:{fetchList(e={}){const t=!e.page||e.page===1,i=!t&&e.page>1;return t&&(this.list.data=[],this.list.pagination=null),this.list.fetching=!0,nodepress$1.get(ARTICLE_API_PATH,{params:e}).then(d=>{i?(this.list.data.push(...d.result.data),this.list.pagination=d.result.pagination):(this.list.data=d.result.data,this.list.pagination=d.result.pagination)}).finally(()=>{this.list.fetching=!1})},fetchHottestList(){return this.hotList.fetched?Promise.resolve():(this.hotList.fetching=!0,nodepress$1.get(`${ARTICLE_API_PATH}/hottest`).then(e=>{this.hotList.data=e.result,this.hotList.fetched=!0}).finally(()=>{this.hotList.fetching=!1}))}}}),renderArticleMarkdown=e=>{const t=[];return{html:markdownToHTML(e,{sanitize:!1,relink:!1,headingIDRenderer:(s,c,d)=>{const g=getArticleContentHeadingElementID(c,d.toLowerCase().replace(/[^a-zA-Z0-9\u4E00-\u9FA5]+/g,"-"));return t.push({level:c,id:g,text:d}),g}}),headings:t}},useArticleDetailStore=pinia_prod.defineStore("articleDetail",{state:()=>({fetching:!1,article:null,prevArticle:null,nextArticle:null,relatedArticles:[],renderedFullContent:!0}),getters:{contentLength(){var e;return((e=this.article)==null?void 0:e.content.length)||0},readMinutes(){const e=Math.round(this.contentLength/400);return e<1?1:e},isLongContent(){return Boolean(this.article&&this.contentLength>=LONG_ARTICLE_THRESHOLD)},splitIndex(){if(!this.article||!this.isLongContent)return null;const e=Math.min(LONG_ARTICLE_THRESHOLD,Math.floor(this.contentLength/2)),t=this.article.content.substring(0,e),i=t.lastIndexOf(`
##### `),s=t.lastIndexOf(`
#### `),c=t.lastIndexOf(`
### `),d=t.lastIndexOf(`


`);return Math.max(i,s,c,d)},defaultContent(){if(!this.article)return null;const e=this.isLongContent?this.article.content.substring(0,this.splitIndex):this.article.content,{html:t,headings:i}=renderArticleMarkdown(e);return{markdown:e,html:t,headings:i}},moreContent(){if(this.article&&this.isLongContent){const e=this.article.content.substring(this.splitIndex),{html:t,headings:i}=renderArticleMarkdown(e);return{markdown:e,html:t,headings:i}}return null}},actions:{renderFullContent(){this.renderedFullContent=!0},fetchArticleDetail(e){return this.article=null,nodepress$1.get(`${ARTICLE_API_PATH}/${e}`).then(s=>{this.article=s.result,this.renderedFullContent=!this.isLongContent})},fetchArticleContext(e){return this.prevArticle=null,this.nextArticle=null,this.relatedArticles=[],nodepress$1.get(`${ARTICLE_API_PATH}/${e}/context`).then(t=>{this.prevArticle=t.result.prev_article,this.nextArticle=t.result.next_article,this.relatedArticles=t.result.related_articles})},fetchCompleteArticle(e){return this.fetching=!0,Promise.all([this.fetchArticleDetail(e.articleID),this.fetchArticleContext(e.articleID)]).finally(()=>{this.fetching=!1})},postArticleLike(e){const t=useIdentityStore();return nodepress$1.post("/vote/post",{post_id:e,vote:1,author:t.author}).then(i=>{this.article&&(this.article.meta.likes=i.result)})}}}),useAnnouncementStore=defineFetchStore({id:"announcement",initData:[],cleanWhenRefetch:!0,async fetcher(e){return(await nodepress$1.get("/announcement",{params:e})).result.data}}),useWallpaperStore=defineFetchStore({id:"wallpaper",initData:null,onlyOnce:!0,fetcher:()=>tunnel$1.dispatch(TunnelModule.BingWallpaper),getters:{papers:e=>t=>{var i;return(i=e.data)==null?void 0:i[t]}}}),useArticleCalendarStore=defineFetchStore({id:"articleCalendar",initData:[],onlyOnce:!0,async fetcher(){return(await nodepress$1.get("/article/calendar",{params:{timezone:Intl.DateTimeFormat().resolvedOptions().timeZone}})).result}}),useTwitterCalendarStore=defineFetchStore({id:"twitterCalendar",initData:[],onlyOnce:!0,fetcher:()=>tunnel$1.dispatch(TunnelModule.TwitterCalendar)}),useInstagramCalendarStore=defineFetchStore({id:"instagramCalendar",initData:[],onlyOnce:!0,fetcher:()=>tunnel$1.dispatch(TunnelModule.InstagramCalendar)}),useGitHubCalendarStore=defineFetchStore({id:"githubContributionsCalendar",initData:null,onlyOnce:!0,fetcher:()=>tunnel$1.dispatch(TunnelModule.GitHubContributions),getters:{days(e){return e.data?e.data.weeks.map(t=>t.contributionDays).flat().map(t=>({date:t.date,count:t.contributionCount,color:t.color})):[]}}}),useStores=e=>({announcement:useAnnouncementStore(e),articleList:useArticleListStore(e),articleDetail:useArticleDetailStore(e),category:useCategoryStore(e),tag:useTagStore(e),comment:useCommentStore(e),archive:useArchiveStore(e),identity:useIdentityStore(e),adminInfo:useAdminInfoStore(e),appOption:useAppOptionStore(e),wallpaper:useWallpaperStore(e),nodepressStatistic:useNodepressStatisticStore(e),githubStatistic:useGitHubStatisticStore(e),npmStatistic:useNPMStatisticStore(e),articleCalendar:useArticleCalendarStore(e),twitterCalendar:useTwitterCalendarStore(e),instagramCalendar:useInstagramCalendarStore(e),githubCalendar:useGitHubCalendarStore(e),doubanMovies:useDoubanMoviesStore(e),instagramMedias:useInstagramMediasStore(e),youtubePlayList:useYouTubePlayListStore(e),twitterUserinfo:useTwitterUserinfoStore(e),twitterTweets:useTwitterTweetsStore(e)}),createUniversalStore=e=>{const t=pinia_prod.createPinia(),i=()=>{const s=useStores(t),c=[s.category.fetch(),s.tag.fetch(),s.appOption.fetch()];return e.globalState.userAgent.isMobile||c.push(s.articleList.fetchHottestList()),Promise.all(c)};return{get stores(){return useStores(t)},state:t.state,install:t.install,serverPrefetch:i,initOnSSRClient(){const s=getSSRContext("store");s?t.state.value=s:i()},initOnSPAClient(){return useStores(t).identity.initOnClient(),i()}}},_sfc_main$B=defineComponent({name:"Webfont",props:{bolder:{type:Boolean,default:!1},boldZh:{type:Boolean,default:!1},boldEn:{type:Boolean,default:!0},uppercase:{type:Boolean,default:!1}},setup(){const{isZhLang:e}=useEnhancer();return{isZhLang:e}}}),webfont_vue_vue_type_style_index_0_scoped_90d3669c_lang="";function _sfc_ssrRender$B(e,t,i,s,c,d,g,r){t(`<span${ssrRenderAttrs(mergeProps({class:["webfont",[e.bolder?"bolder":"medium",e.isZhLang?"zh":"en",{boldZh:e.boldZh},{boldEn:e.boldEn},{uppercase:e.uppercase}]]},s))} data-v-90d3669c>`),ssrRenderSlot(e.$slots,"default",{},null,t,i),t("</span>")}const _sfc_setup$B=_sfc_main$B.setup;_sfc_main$B.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/common/webfont.vue"),_sfc_setup$B?_sfc_setup$B(e,t):void 0};const Webfont=_export_sfc(_sfc_main$B,[["ssrRender",_sfc_ssrRender$B],["__scopeId","data-v-90d3669c"]]),_sfc_main$A=defineComponent({name:"Spin",props:{loading:{type:Boolean,default:!0},color:{type:String,default:"rgba(197, 197, 197, 0.4)"},height:{type:String,default:"15px"},width:{type:String,default:"15px"},margin:{type:String,default:"5px"}},data(){return{spinnerStyle:{backgroundColor:this.color,height:this.height,width:this.width,margin:this.margin}}}}),spin_vue_vue_type_style_index_0_scoped_4ef1f0df_lang="";function _sfc_ssrRender$A(e,t,i,s,c,d,g,r){t(`<div${ssrRenderAttrs(mergeProps({style:e.loading?null:{display:"none"},class:"spinner-box"},s))} data-v-4ef1f0df><div class="spinner-inner" data-v-4ef1f0df><div class="la-ball-beat" data-v-4ef1f0df><div style="${ssrRenderStyle(e.spinnerStyle)}" data-v-4ef1f0df></div><div style="${ssrRenderStyle(e.spinnerStyle)}" data-v-4ef1f0df></div><div style="${ssrRenderStyle(e.spinnerStyle)}" data-v-4ef1f0df></div></div></div></div>`)}const _sfc_setup$A=_sfc_main$A.setup;_sfc_main$A.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/common/spin.vue"),_sfc_setup$A?_sfc_setup$A(e,t):void 0};const Spin=_export_sfc(_sfc_main$A,[["ssrRender",_sfc_ssrRender$A],["__scopeId","data-v-4ef1f0df"]]),_sfc_main$z=defineComponent({name:"Empty",props:{placeholder:String,i18nKey:String},setup(){return{LanguageKey}}}),empty_vue_vue_type_style_index_0_scoped_1a452937_lang="";function _sfc_ssrRender$z(e,t,i,s,c,d,g,r){const y=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:"empty"},s))} data-v-1a452937>`),ssrRenderSlot(e.$slots,"default",{},()=>{e.placeholder?t(`<!--[-->${ssrInterpolate(e.placeholder)}<!--]-->`):t(ssrRenderComponent(y,{k:e.i18nKey||e.LanguageKey.EMPTY_PLACEHOLDER},null,i))},t,i),t("</div>")}const _sfc_setup$z=_sfc_main$z.setup;_sfc_main$z.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/common/empty.vue"),_sfc_setup$z?_sfc_setup$z(e,t):void 0};const Empty=_export_sfc(_sfc_main$z,[["ssrRender",_sfc_ssrRender$z],["__scopeId","data-v-1a452937"]]),_sfc_main$y=defineComponent({name:"Divider",props:{type:{type:String,default:"horizontal"},dashed:{type:Boolean,default:!1},size:{type:String,default:"default"}}}),divider_vue_vue_type_style_index_0_scoped_baa38ba2_lang="";function _sfc_ssrRender$y(e,t,i,s,c,d,g,r){t(`<div${ssrRenderAttrs(mergeProps({role:"separator",class:["divider",[e.type,e.size,{dashed:e.dashed},{slot:e.$slots.default}]]},s))} data-v-baa38ba2>`),ssrRenderSlot(e.$slots,"default",{},null,t,i),t("</div>")}const _sfc_setup$y=_sfc_main$y.setup;_sfc_main$y.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/common/divider.vue"),_sfc_setup$y?_sfc_setup$y(e,t):void 0};const Divider=_export_sfc(_sfc_main$y,[["ssrRender",_sfc_ssrRender$y],["__scopeId","data-v-baa38ba2"]]),Udate=defineComponent({name:"Udate",props:{to:{type:String,required:!0},date:{type:[String,Number,Date],required:!0},separator:{type:String,default:"-"}},setup(e){const{i18n:t}=useEnhancer();return()=>{const i=e.date instanceof Date?e.date:new Date(e.date);if(e.to==="YMD")return dateToYMD(i,e.separator);if(e.to==="YMDm"){const s=dateToYMD(i,e.separator),c=i.getHours()>11?t.t(LanguageKey.MOMENT_PM):t.t(LanguageKey.MOMENT_AM);return`${s} ${c}`}if(e.to==="ago"){const s=(w,k)=>{const S=`${w} ${k}`;return t.t(LanguageKey.MOMENT_AGO,null,{date:S})},c=Date.now()/1e3-Number(i)/1e3,d=3600,g=d*24,r=g*7,y=g*30,E=y*12;return c<d?~~(c/60)===0?t.t(LanguageKey.MOMENT_JUST_NOW):s(~~(c/60),t.t(LanguageKey.MOMENT_MINUTES)):c<g?s(~~(c/d),t.t(LanguageKey.MOMENT_HOURS)):c<r?s(~~(c/g),t.t(LanguageKey.MOMENT_DAYS)):c<y?s(~~(c/r),t.t(LanguageKey.MOMENT_WEEKS)):c<E?s(~~(c/y),t.t(LanguageKey.MOMENT_MONTHS)):s(~~(c/E),t.t(LanguageKey.MOMENT_YEAR))}return null}}}),Ulink=defineComponent({name:"Ulink",props:{...vueRouter_prod.RouterLink.props,to:String,href:String,external:{type:Boolean,default:!0},blank:{type:Boolean,default:!0}},setup(e,t){return()=>{var y,E;const{to:i,href:s,external:c,blank:d,...g}=e,r={...t.attrs};if(i&&!i.startsWith("http")){const w={to:i,...g};return h(vueRouter_prod.RouterLink,w,t.slots.default)}return c&&(r.rel="external nofollow noopener"),d&&(r.target="_blank"),h("a",{...r,href:s||i},(E=(y=t.slots).default)==null?void 0:E.call(y))}}}),Uimage=defineComponent({name:"Uimage",props:{src:{type:String,required:!0},cdn:{type:Boolean,default:!1},proxy:{type:[Boolean,String],default:!1},defer:{type:Boolean,default:!1}},setup(e){useEnhancer();const t=ref(!1);return e.defer,()=>{const{src:i,cdn:s,proxy:c,defer:d,...g}=e;let r=i;return s&&(r=getTargetCDNURL(i)),c&&(r=getTargetProxyURL(i,c===!0?ProxyModule.Default:c)),d&&!t.value?null:h("img",{draggable:!1,...g,src:r})}}}),Placeholder=defineComponent({name:"Placeholder",props:{data:{type:[Array,Object,Boolean,Number],default:void 0},transition:{type:Boolean,default:!0},transitionName:{type:String,default:"module"},placeholder:String,i18nKey:String,loading:Boolean},emits:["after-enter"],setup(e,t){return()=>{const{data:i,placeholder:s,i18nKey:c,loading:d,transition:g,transitionName:r}=e,y=i!==void 0&&(Array.isArray(i)&&!i.length||!i),E=()=>{var I,L;return s||c?h(Empty,{placeholder:s,i18nKey:c}):(L=(I=t.slots).placeholder)==null?void 0:L.call(I)},w=()=>{var I,L;return y?E():(L=(I=t.slots).default)==null?void 0:L.call(I)},k=()=>{var I,L;return((L=(I=t.slots).loading)==null?void 0:L.call(I))||h(Spin,{loading:!0})},S=()=>d?k():w();return g?h(Transition,{name:r,mode:"out-in",onAfterEnter(...I){t.emit("after-enter",...I)}},()=>S()):S()}}}),_sfc_main$x=defineComponent({name:"SkeletonBase",props:{width:{type:Number},height:{type:Number},circle:{type:Boolean,default:!1},radius:{type:Number,default:2}},setup(e){return{style:computed(()=>({borderRadius:e.circle?"100%":`${e.radius}px`,...e.width&&{width:e.width+"px"},...e.height&&{height:e.height+"px"}}))}}}),base_vue_vue_type_style_index_0_scoped_f14fd56a_lang="";function _sfc_ssrRender$x(e,t,i,s,c,d,g,r){t(`<div${ssrRenderAttrs(mergeProps({class:"skeleton base",style:e.style},s))} data-v-f14fd56a></div>`)}const _sfc_setup$x=_sfc_main$x.setup;_sfc_main$x.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/common/skeleton/base.vue"),_sfc_setup$x?_sfc_setup$x(e,t):void 0};const SkeletonBase=_export_sfc(_sfc_main$x,[["ssrRender",_sfc_ssrRender$x],["__scopeId","data-v-f14fd56a"]]),_sfc_main$w=defineComponent({name:"SkeletonLine",components:{SkeletonBase},props:{width:{type:Number},height:{type:Number}},setup(e){return{style:computed(()=>({...e.width&&{width:e.width+"px"},...e.height&&{height:e.height+"px"}}))}}}),line_vue_vue_type_style_index_0_scoped_54e88d06_lang="";function _sfc_ssrRender$w(e,t,i,s,c,d,g,r){const y=resolveComponent("skeleton-base");t(`<div${ssrRenderAttrs(mergeProps({class:"skeleton line",style:e.style},s))} data-v-54e88d06>`),t(ssrRenderComponent(y,null,null,i)),t("</div>")}const _sfc_setup$w=_sfc_main$w.setup;_sfc_main$w.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/common/skeleton/line.vue"),_sfc_setup$w?_sfc_setup$w(e,t):void 0};const SkeletonLine=_export_sfc(_sfc_main$w,[["ssrRender",_sfc_ssrRender$w],["__scopeId","data-v-54e88d06"]]),_sfc_main$v=defineComponent({name:"SkeletonParagraph",components:{SkeletonLine},props:{lines:{type:Number,default:1},width:{type:Number},height:{type:Number},align:{type:Boolean,default:!1},lineHeight:{type:String,default:"1rem"}},setup(e){return{style:computed(()=>({...e.width&&{width:e.width+"px"},...e.height&&{height:e.height+"px"}})),getLineStyle:s=>{const c={height:e.lineHeight,marginBottom:s===e.lines-1?"0":`calc(${e.lineHeight} * 0.75)`},d=s%3;if(d){const g=15*d;c.width=`${100-g}%`,c.marginLeft=e.align?"0":"6%"}return c}}}});function _sfc_ssrRender$v(e,t,i,s,c,d,g,r){const y=resolveComponent("skeleton-line");t(`<div${ssrRenderAttrs(mergeProps({class:"skeleton paragraph",style:e.style},s))}><!--[-->`),ssrRenderList(e.lines,(E,w)=>{t(ssrRenderComponent(y,{key:w,style:e.getLineStyle(w),class:"paragraph-line"},null,i))}),t("<!--]--></div>")}const _sfc_setup$v=_sfc_main$v.setup;_sfc_main$v.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/common/skeleton/paragraph.vue"),_sfc_setup$v?_sfc_setup$v(e,t):void 0};const SkeletonParagraph=_export_sfc(_sfc_main$v,[["ssrRender",_sfc_ssrRender$v]]),Responsive=defineComponent({name:"Responsive",props:{both:Boolean,desktop:Boolean,mobile:Boolean},setup(e,t){const i=useGlobalState();return()=>{var s,c,d,g,r,y,E,w,k,S;return e.both?(c=(s=t.slots).default)==null?void 0:c.call(s):e.desktop&&!i.userAgent.isMobile?(g=(d=t.slots).default)==null?void 0:g.call(d):e.mobile&&i.userAgent.isMobile?(y=(r=t.slots).default)==null?void 0:y.call(r):i.userAgent.isMobile?(w=(E=t.slots).mobile)==null?void 0:w.call(E):(S=(k=t.slots).desktop)==null?void 0:S.call(k)}}}),DesktopOnly=defineComponent({name:"DesktopOnly",setup(e,t){const i=useGlobalState();return()=>{var s,c;return!i.userAgent.isMobile&&((c=(s=t.slots).default)==null?void 0:c.call(s))}}}),ClientOnly=defineComponent({name:"ClientOnly",props:{placeholder:String,placeholderTag:{type:String,default:"div"},transition:{type:Boolean,default:!1},delay:{type:Number,default:0}},setup(e,t){const{globalState:i}=useEnhancer(),s=ref(!!i.isHydrated.value);onMounted(()=>{if(!i.isHydrated.value){const d=()=>{s.value=!0};e.delay?setTimeout(d,e.delay):d()}});const c=(d,g)=>{if(!e.transition||Array.isArray(d)&&d.length>1)return d;const r=Array.isArray(d)?d[0]:d;return h(Transition,{name:"client-only",mode:"out-in"},()=>r?cloneVNode(r,{key:g}):h("div",{key:"empty",class:"client-only-empty"}))};return()=>{var d,g;return s.value?c((g=(d=t.slots).default)==null?void 0:g.call(d),"result"):t.slots.placeholder?c(t.slots.placeholder(),"placeholder-slot"):e.placeholderTag&&e.placeholder?c(h(e.placeholderTag,{class:"client-only-placeholder"},e.placeholder),"placeholder"):c(null)}}});function component(e){e.component(Webfont.name,Webfont),e.component(Spin.name,Spin),e.component(Empty.name,Empty),e.component(Divider.name,Divider),e.component(Udate.name,Udate),e.component(Ulink.name,Ulink),e.component(Uimage.name,Uimage),e.component(Placeholder.name,Placeholder),e.component(ClientOnly.name,ClientOnly),e.component(Responsive.name,Responsive),e.component(DesktopOnly.name,DesktopOnly),e.component(SkeletonBase.name,SkeletonBase),e.component(SkeletonLine.name,SkeletonLine),e.component(SkeletonParagraph.name,SkeletonParagraph)}const _sfc_main$u=defineComponent({name:"EmojiRain",setup(){const e=ref(null),t=reactive({chambering:!1,kichikuing:!1});return onMounted(()=>{window.$luanchEmojiRain=i=>{!t.chambering&&!t.kichikuing&&(t.chambering=!0,nextTick$1(()=>{e.value.width=document.documentElement.clientWidth||document.body.clientWidth,e.value.height=document.documentElement.clientHeight||document.body.clientHeight,new window.$Emoji233333({base:e.value,scale:.7,speed:12,increaseSpeed:.4,density:5,staggered:!0,emoji:getTargetCDNURL("/images/emojis/funny.png"),...i,onStart(){t.kichikuing=!0},onEnded(){t.kichikuing=!1,t.chambering=!1}}).launch()}))}}),{state:t,rainBase:e}}}),emojiRain_vue_vue_type_style_index_0_scoped_5e790b69_lang="";function _sfc_ssrRender$u(e,t,i,s,c,d,g,r){t(`<div${ssrRenderAttrs(mergeProps({id:"emoji-rain",class:{active:e.state.kichikuing}},s))} data-v-5e790b69>`),e.state.chambering?t('<canvas class="rain-base" data-v-5e790b69></canvas>'):t("<!---->"),t("</div>")}const _sfc_setup$u=_sfc_main$u.setup;_sfc_main$u.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/widget/emoji-rain.vue"),_sfc_setup$u?_sfc_setup$u(e,t):void 0};const EmojiRain=_export_sfc(_sfc_main$u,[["ssrRender",_sfc_ssrRender$u],["__scopeId","data-v-5e790b69"]]),getLayoutByRouteMeta=e=>e.layout===LayoutColumn.Wide?LayoutColumn.Wide:e.layout===LayoutColumn.Full?LayoutColumn.Full:LayoutColumn.Normal,_sfc_main$t=defineComponent({name:"Error",props:{error:{type:Object,required:!0}},emits:["resolve"],setup(e,t){const{isDarkTheme:i}=useEnhancer();return{LanguageKey,isDarkTheme:i,handleResolveRoute:()=>{t.emit("resolve")}}}}),error_vue_vue_type_style_index_0_scoped_970807ba_lang="";function _sfc_ssrRender$t(e,t,i,s,c,d,g,r){const y=resolveComponent("i18n"),E=resolveComponent("uimage");t(`<div${ssrRenderAttrs(mergeProps({class:["error",{dark:e.isDarkTheme}]},s))} data-v-970807ba><h1 class="code" data-v-970807ba>${ssrInterpolate(e.error.code)}</h1><h3 class="message" data-v-970807ba>`),e.error.message?t(`<!--[-->${ssrInterpolate(e.error.message)}<!--]-->`):t(ssrRenderComponent(y,{k:e.LanguageKey.NOT_FOUND},null,i)),t('</h3><p class="link" data-v-970807ba>'),ssrRenderSlot(e.$slots,"resolve-text",{},null,t,i),t("</p>"),t(ssrRenderComponent(E,{cdn:"",class:"logo",src:"/images/logo.svg"},null,i)),t("</div>")}const _sfc_setup$t=_sfc_main$t.setup;_sfc_main$t.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/root/error.vue"),_sfc_setup$t?_sfc_setup$t(e,t):void 0};const ErrorComponent=_export_sfc(_sfc_main$t,[["ssrRender",_sfc_ssrRender$t],["__scopeId","data-v-970807ba"]]),_sfc_main$s=defineComponent({name:"Captured",components:{ErrorComponent},setup(){const{router:e,globalState:t}=useEnhancer(),i=()=>{e.push({name:RouteName.Home}).then(()=>{t.setLayoutColumn(getLayoutByRouteMeta(e.currentRoute.value.meta)),t.setRenderError(null)})};return onErrorCaptured(s=>(t.setRenderError(s),!1)),{error:t.renderError,handleResolveRoute:i,LanguageKey}}});function _sfc_ssrRender$s(e,t,i,s,c,d,g,r){const y=resolveComponent("error-component"),E=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:"captured"},s))}>`),e.error?t(ssrRenderComponent(y,{error:e.error,onResolve:e.handleResolveRoute},{"resolve-text":withCtx((w,k,S,I)=>{if(k)k(ssrRenderComponent(E,{k:e.LanguageKey.BACK_TO_HOME_PAGE},null,S,I));else return[createVNode(E,{k:e.LanguageKey.BACK_TO_HOME_PAGE},null,8,["k"])]}),_:1},i)):ssrRenderSlot(e.$slots,"default",{},null,t,i),t("</div>")}const _sfc_setup$s=_sfc_main$s.setup;_sfc_main$s.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/root/captured.vue"),_sfc_setup$s?_sfc_setup$s(e,t):void 0};const Captured=_export_sfc(_sfc_main$s,[["ssrRender",_sfc_ssrRender$s]]),MusicPlayerSymbol=Symbol("music-player"),useMusic=()=>inject(MusicPlayerSymbol),_sfc_main$r=defineComponent({name:"MusicPlayer",setup(){const t=computed(()=>Boolean(void 0)),i=computed(()=>{});return{VALUABLE_LINKS,player:null,muted:t,currentSong:i,handlePlayByIndex:d=>{},get163MusicSongDetailURL,getSecondsView:d=>{const g=String(Math.floor(d/60)).padStart(2,"0"),r=String(Math.floor(d%60)).padStart(2,"0");return`${g}:${r}`}}}}),player_vue_vue_type_style_index_0_scoped_db4ce6a8_lang="";function _sfc_ssrRender$r(e,t,i,s,c,d,g,r){var E,w,k,S,I,L,D,O,V;const y=resolveComponent("ulink");t(`<div${ssrRenderAttrs(mergeProps({class:"music-player"},s))} data-v-db4ce6a8><div class="panel" data-v-db4ce6a8><div class="song" data-v-db4ce6a8><img class="cover"${ssrRenderAttr("src",(E=e.currentSong)==null?void 0:E.cover_art_url)} draggable="false" data-v-db4ce6a8>`),e.currentSong&&e.player?t(`<div class="info" data-v-db4ce6a8><p class="title" data-v-db4ce6a8><span class="name" data-v-db4ce6a8>${ssrInterpolate(e.currentSong.name)}</span><span class="artist" data-v-db4ce6a8>${ssrInterpolate(e.currentSong.artist)}</span></p><p class="duration" data-v-db4ce6a8><span data-v-db4ce6a8>${ssrInterpolate(e.getSecondsView(e.player.state.speeds))}</span><span data-v-db4ce6a8> / </span><span data-v-db4ce6a8>${ssrInterpolate(e.getSecondsView(e.currentSong.duration/1e3))}</span></p></div>`):t("<!---->"),t(`</div><div class="control" data-v-db4ce6a8><button class="cut-song prev"${includeBooleanAttr(!((k=(w=e.player)==null?void 0:w.state)!=null&&k.ready))?" disabled":""} data-v-db4ce6a8><i class="iconfont icon-music-prev" data-v-db4ce6a8></i></button><button class="toggle-play"${includeBooleanAttr(!((S=e.player)!=null&&S.state.ready))?" disabled":""} data-v-db4ce6a8><i class="${ssrRenderClass([(I=e.player)!=null&&I.state.playing?"icon-music-pause":"icon-music-play","iconfont"])}" data-v-db4ce6a8></i></button><button class="cut-song next"${includeBooleanAttr(!((L=e.player)!=null&&L.state.ready))?" disabled":""} data-v-db4ce6a8><i class="iconfont icon-music-next" data-v-db4ce6a8></i></button></div><div class="tools" data-v-db4ce6a8>`),e.player?t(`<span class="indexed" data-v-db4ce6a8>${ssrInterpolate(e.player.state.index+1)} / ${ssrInterpolate((D=e.player)==null?void 0:D.state.count)}</span>`):t("<!---->"),t(ssrRenderComponent(y,{class:"list-link",href:e.VALUABLE_LINKS.MUSIC_163},{default:withCtx((z,U,Z,W)=>{if(U)U(`<i class="iconfont icon-new-window-s" data-v-db4ce6a8${W}></i>`);else return[createVNode("i",{class:"iconfont icon-new-window-s"})]}),_:1},i)),t(`<button class="toggle-muted"${includeBooleanAttr(!((O=e.player)!=null&&O.state.ready))?" disabled":""} data-v-db4ce6a8><i class="${ssrRenderClass([e.muted?"icon-music-muted":"icon-music-unmuted","iconfont"])}" data-v-db4ce6a8></i></button></div></div><div class="progress" data-v-db4ce6a8>`),e.player?t(`<div class="played" style="${ssrRenderStyle({width:`${e.player.state.progress}%`})}" data-v-db4ce6a8></div>`):t("<!---->"),t('</div><div class="songs" data-v-db4ce6a8><ul class="list" data-v-db4ce6a8><!--[-->'),ssrRenderList((V=e.player)==null?void 0:V.state.songs,(z,U)=>{var Z,W;t(`<li class="${ssrRenderClass([{playing:((Z=e.player)==null?void 0:Z.state.index)===U},"item"])}" data-v-db4ce6a8><div class="index" data-v-db4ce6a8>${ssrInterpolate(String(U+1).padStart(2,"0"))}</div>`),((W=e.player)==null?void 0:W.state.index)===U?t('<span class="play" data-v-db4ce6a8><i class="iconfont icon-music-unmuted" data-v-db4ce6a8></i></span>'):t('<button class="play" data-v-db4ce6a8><i class="iconfont icon-music-play" data-v-db4ce6a8></i></button>'),t(ssrRenderComponent(y,{class:"name",title:z.name,href:e.get163MusicSongDetailURL(z.id)},{default:withCtx((ne,re,ie,Ce)=>{if(re)re(`<span class="text" data-v-db4ce6a8${Ce}>${ssrInterpolate(z.name)}</span><i class="iconfont icon-new-window-s" data-v-db4ce6a8${Ce}></i>`);else return[createVNode("span",{class:"text"},toDisplayString(z.name),1),createVNode("i",{class:"iconfont icon-new-window-s"})]}),_:2},i)),t(`<div class="artist"${ssrRenderAttr("title",z.artist)} data-v-db4ce6a8>${ssrInterpolate(z.artist)}</div><div class="duration" data-v-db4ce6a8>${ssrInterpolate(e.getSecondsView(z.duration/1e3))}</div></li>`)}),t("<!--]--></ul></div></div>")}const _sfc_setup$r=_sfc_main$r.setup;_sfc_main$r.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/widget/music-player/player.vue"),_sfc_setup$r?_sfc_setup$r(e,t):void 0};const MusicPlayer=_export_sfc(_sfc_main$r,[["ssrRender",_sfc_ssrRender$r],["__scopeId","data-v-db4ce6a8"]]),_sfc_main$q=defineComponent({name:"MusicPlayerHandle",components:{MusicPlayer},setup(){const{gtag:e}=useEnhancer(),t=null,i=computed(()=>Boolean(t==null?void 0:t.muted.value)),s=computed(()=>t==null?void 0:t.currentSong.value),c=ref(!1);return{LanguageKey,isOnPlayerModel:c,music:t,muted:i,currentSong:s,togglePlayerModel:()=>{c.value=!c.value},handleTouchEvent:r=>{e==null||e.event("music_player_widget",{event_category:GAEventCategories.Widget,event_label:r})}}}}),handle_vue_vue_type_style_index_0_scoped_694321ff_lang="";function _sfc_ssrRender$q(e,t,i,s,c,d,g,r){var S,I;const y=resolveComponent("i18n"),E=resolveComponent("client-only"),w=resolveComponent("popup"),k=resolveComponent("music-player");t("<!--[-->"),(S=e.music)!=null&&S.currentSong.value?(t(`<div id="player" class="${ssrRenderClass({playing:e.music.state.playing})}" data-v-694321ff><div class="panel" data-v-694321ff><div class="control" data-v-694321ff><button class="prev-song button"${includeBooleanAttr(!e.music.state.ready)?" disabled":""} data-v-694321ff><i class="iconfont icon-music-prev" data-v-694321ff></i></button><button class="next-song button"${includeBooleanAttr(!e.music.state.ready)?" disabled":""} data-v-694321ff><i class="iconfont icon-music-next" data-v-694321ff></i></button><button class="muted-toggle button"${includeBooleanAttr(!e.music.state.ready)?" disabled":""} data-v-694321ff><i class="${ssrRenderClass([e.muted?"icon-music-muted":"icon-music-unmuted","iconfont"])}" data-v-694321ff></i></button><button class="player button" data-v-694321ff><i class="iconfont icon-netease-music" data-v-694321ff></i></button></div><button class="song-link" data-v-694321ff>`),e.currentSong?t(`<span data-v-694321ff>${ssrInterpolate(e.currentSong.name)}</span>`):t(ssrRenderComponent(y,{k:e.LanguageKey.MUSIC_PLACEHOLDER},null,i)),t(`</button></div><div class="cd" data-v-694321ff><img class="image"${ssrRenderAttr("src",(I=e.currentSong)==null?void 0:I.cover_art_url)} data-v-694321ff><button class="toggle-button"${includeBooleanAttr(!e.music.state.ready)?" disabled":""} data-v-694321ff><i class="${ssrRenderClass([e.music.state.playing?"icon-music-pause":"icon-music-play","iconfont"])}" data-v-694321ff></i></button></div><div class="trigger" data-v-694321ff><i class="iconfont icon-music" data-v-694321ff></i></div></div>`)):t("<!---->"),t(ssrRenderComponent(E,null,{default:withCtx((L,D,O,V)=>{if(D)D(ssrRenderComponent(w,{visible:e.isOnPlayerModel,"onUpdate:visible":z=>e.isOnPlayerModel=z,"scroll-close":!1},{default:withCtx((z,U,Z,W)=>{if(U)U(ssrRenderComponent(k,{onClose:e.togglePlayerModel},null,Z,W));else return[createVNode(k,{onClose:e.togglePlayerModel},null,8,["onClose"])]}),_:1},O,V));else return[createVNode(w,{visible:e.isOnPlayerModel,"onUpdate:visible":z=>e.isOnPlayerModel=z,"scroll-close":!1},{default:withCtx(()=>[createVNode(k,{onClose:e.togglePlayerModel},null,8,["onClose"])]),_:1},8,["visible","onUpdate:visible"])]}),_:1},i)),t("<!--]-->")}const _sfc_setup$q=_sfc_main$q.setup;_sfc_main$q.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/widget/music-player/handle.vue"),_sfc_setup$q?_sfc_setup$q(e,t):void 0};const MusicPlayerHandle=_export_sfc(_sfc_main$q,[["ssrRender",_sfc_ssrRender$q],["__scopeId","data-v-694321ff"]]),_sfc_main$p=defineComponent({name:"WallFlowerItem",props:{options:{type:Object,required:!0},zIndex:{type:Number,required:!0}},emits:["ended"],setup(e,t){const i=reactive({delay:1,timer:null,playing:!1}),s=computed(()=>({top:e.options.y+"px",left:e.options.x+"px","z-index":99999+e.zIndex})),c=()=>{nextTick$1(()=>{setTimeout(()=>{i.playing=!0}),i.timer=window.setTimeout(()=>{i.playing=!1,nextTick$1(()=>{t.emit("ended",e.options.id)})},i.delay*1e3)})};return c(),onMounted(c),onBeforeUnmount(()=>{i.timer&&(clearTimeout(i.timer),i.timer=null)}),{state:i,styles:s}}}),flower_vue_vue_type_style_index_0_scoped_833e6cc4_lang="";function _sfc_ssrRender$p(e,t,i,s,c,d,g,r){const y=resolveComponent("webfont");t(`<li${ssrRenderAttrs(mergeProps({class:["flower-item",{playing:e.state.playing}],style:e.styles},s))} data-v-833e6cc4>`),t(ssrRenderComponent(y,{bolder:""},{default:withCtx((E,w,k,S)=>{if(w)w(`${ssrInterpolate(e.options.text)}`);else return[createTextVNode(toDisplayString(e.options.text),1)]}),_:1},i)),t("</li>")}const _sfc_setup$p=_sfc_main$p.setup;_sfc_main$p.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/widget/wallflower/flower.vue"),_sfc_setup$p?_sfc_setup$p(e,t):void 0};const Flower=_export_sfc(_sfc_main$p,[["ssrRender",_sfc_ssrRender$p],["__scopeId","data-v-833e6cc4"]]),EN_FLOWERS=["\u{1F499}","\u{1F90D}","\u2764\uFE0F"],ZH_FLOWERS=["\u5BCC\u5F3A","\u6C11\u4E3B","\u6587\u660E","\u548C\u8C10","\u81EA\u7531","\u5E73\u7B49","\u516C\u6B63","\u6CD5\u6CBB","\u7231\u56FD","\u656C\u4E1A","\u8BDA\u4FE1","\u53CB\u5584"],_sfc_main$o=defineComponent({name:"WallFlowerGarden",components:{Flower},setup(){const{isZhLang:e}=useEnhancer(),t=reactive({id:0,flowers:[],contentIndex:-1}),i=c=>{const d=e.value?ZH_FLOWERS:EN_FLOWERS;t.contentIndex++,t.contentIndex>=d.length&&(t.contentIndex=0),t.flowers.push({id:++t.id,x:c.x||c.clientX,y:c.y||c.clientY,text:d[t.contentIndex]})},s=c=>{const d=t.flowers.findIndex(g=>g.id===c);d>-1&&t.flowers.splice(d,1)};return onMounted(()=>window.addEventListener("click",i)),onBeforeUnmount(()=>window.removeEventListener("click",i)),{state:t,handleAnimationEnd:s}}}),garden_vue_vue_type_style_index_0_scoped_19d2393a_lang="";function _sfc_ssrRender$o(e,t,i,s,c,d,g,r){const y=resolveComponent("flower");t(`<div${ssrRenderAttrs(mergeProps({id:"wallflower"},s))} data-v-19d2393a>`),e.state.flowers.length?(t('<ul class="garden-box" data-v-19d2393a><!--[-->'),ssrRenderList(e.state.flowers,(E,w)=>{t(ssrRenderComponent(y,{key:E.id,"z-index":w+1,options:E,onEnded:e.handleAnimationEnd},null,i))}),t("<!--]--></ul>")):t("<!---->"),t("</div>")}const _sfc_setup$o=_sfc_main$o.setup;_sfc_main$o.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/widget/wallflower/garden.vue"),_sfc_setup$o?_sfc_setup$o(e,t):void 0};const Wallflower=_export_sfc(_sfc_main$o,[["ssrRender",_sfc_ssrRender$o],["__scopeId","data-v-19d2393a"]]),_sfc_main$n=defineComponent({name:"WallpaperWall",emits:["close"],setup(e,t){const{i18n:i}=useEnhancer(),s=useWallpaperStore(),c=computed(()=>s.papers(i.language.value)),d=ref(0),g=computed(()=>{var y,E;return((y=c.value)==null?void 0:y.length)&&((E=c.value)==null?void 0:E[d.value])});return{index:d,wallpapers:c,currentWallpaper:g,handleClose:()=>t.emit("close")}}}),wall_vue_vue_type_style_index_0_scoped_d33ed51e_lang="";function _sfc_ssrRender$n(e,t,i,s,c,d,g,r){const y=resolveComponent("ulink");t(`<div${ssrRenderAttrs(mergeProps({class:"wall"},s))} data-v-d33ed51e><div class="picture-box"${ssrRenderAttr("title",e.currentWallpaper.copyright)} style="${ssrRenderStyle({backgroundImage:`url(${e.currentWallpaper.humanizedImageUrl})`})}" data-v-d33ed51e></div><div class="story-box" data-v-d33ed51e>`),e.currentWallpaper.title?t(`<!--[--><h2 class="title" data-v-d33ed51e>${ssrInterpolate(e.currentWallpaper.title)}</h2><p class="sub-title" data-v-d33ed51e>${ssrInterpolate(e.currentWallpaper.copyright)}</p><!--]-->`):t(`<h2 class="title lonely" data-v-d33ed51e>${ssrInterpolate(e.currentWallpaper.copyright)}</h2>`),t(`<p class="desc" data-v-d33ed51e>${ssrInterpolate(e.currentWallpaper.desc)}</p><div class="tools" data-v-d33ed51e>`),t(ssrRenderComponent(y,{class:"button",href:e.currentWallpaper.humanizedCopyrightUrl,title:e.currentWallpaper.bsTitle},{default:withCtx((E,w,k,S)=>{if(w)w(`<i class="iconfont icon-bing" data-v-d33ed51e${S}></i>`);else return[createVNode("i",{class:"iconfont icon-bing"})]}),_:1},i)),t(`<button class="button" title="Prev"${includeBooleanAttr(e.index<=0)?" disabled":""} data-v-d33ed51e><i class="iconfont icon-prev" data-v-d33ed51e></i></button><button class="button" title="Next"${includeBooleanAttr(e.index>=e.wallpapers.length-1)?" disabled":""} data-v-d33ed51e><i class="iconfont icon-next" data-v-d33ed51e></i></button><button class="button" title="Close" data-v-d33ed51e><i class="iconfont icon-cancel" data-v-d33ed51e></i></button></div></div></div>`)}const _sfc_setup$n=_sfc_main$n.setup;_sfc_main$n.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/widget/wallpaper/wall.vue"),_sfc_setup$n?_sfc_setup$n(e,t):void 0};const Wallpapers=_export_sfc(_sfc_main$n,[["ssrRender",_sfc_ssrRender$n],["__scopeId","data-v-d33ed51e"]]),_sfc_main$m=defineComponent({name:"Wallpaper",components:{Wallpapers},setup(){const{i18n:e,gtag:t,isDarkTheme:i}=useEnhancer(),s=useWallpaperStore(),c=computed(()=>s.papers(e.language.value)),d=ref(!1);return{isDarkTheme:i,isOnWallpaper:d,handleOpenWallpaper:()=>{var y;t==null||t.event("wallpaper_modal",{event_category:GAEventCategories.Widget}),(y=c.value)!=null&&y.length?d.value=!0:alert("Something went wrong\uFF01")},handleCloseWallpaper:()=>{d.value=!1}}}}),switcher_vue_vue_type_style_index_0_scoped_c5f131b0_lang="";function _sfc_ssrRender$m(e,t,i,s,c,d,g,r){const y=resolveComponent("client-only"),E=resolveComponent("popup"),w=resolveComponent("wallpapers");t(`<!--[--><div id="wallpaper" data-v-c5f131b0><div class="${ssrRenderClass([{dark:e.isDarkTheme},"switcher"])}" data-v-c5f131b0><div class="title" data-v-c5f131b0><i class="iconfont icon-bing" data-v-c5f131b0></i><span class="text" data-v-c5f131b0>BING</span></div></div></div>`),t(ssrRenderComponent(y,null,{default:withCtx((k,S,I,L)=>{if(S)S(ssrRenderComponent(E,{visible:e.isOnWallpaper,"onUpdate:visible":D=>e.isOnWallpaper=D,"mask-close":!1,"scroll-close":!1},{default:withCtx((D,O,V,z)=>{if(O)O(ssrRenderComponent(w,{onClose:e.handleCloseWallpaper},null,V,z));else return[createVNode(w,{onClose:e.handleCloseWallpaper},null,8,["onClose"])]}),_:1},I,L));else return[createVNode(E,{visible:e.isOnWallpaper,"onUpdate:visible":D=>e.isOnWallpaper=D,"mask-close":!1,"scroll-close":!1},{default:withCtx(()=>[createVNode(w,{onClose:e.handleCloseWallpaper},null,8,["onClose"])]),_:1},8,["visible","onUpdate:visible"])]}),_:1},i)),t("<!--]-->")}const _sfc_setup$m=_sfc_main$m.setup;_sfc_main$m.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/widget/wallpaper/switcher.vue"),_sfc_setup$m?_sfc_setup$m(e,t):void 0};const Wallpaper=_export_sfc(_sfc_main$m,[["ssrRender",_sfc_ssrRender$m],["__scopeId","data-v-c5f131b0"]]),_sfc_main$l=defineComponent({name:"Background",setup(){const{isDarkTheme:e}=useEnhancer();return{isDarkTheme:e}}}),background_vue_vue_type_style_index_0_scoped_c1f03b1d_lang="";function _sfc_ssrRender$l(e,t,i,s,c,d,g,r){t(`<div${ssrRenderAttrs(mergeProps({id:"background"},s))} data-v-c1f03b1d><div class="${ssrRenderClass([{dark:e.isDarkTheme},"image"])}" data-v-c1f03b1d></div></div>`)}const _sfc_setup$l=_sfc_main$l.setup;_sfc_main$l.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/widget/background.vue"),_sfc_setup$l?_sfc_setup$l(e,t):void 0};const Background=_export_sfc(_sfc_main$l,[["ssrRender",_sfc_ssrRender$l],["__scopeId","data-v-c1f03b1d"]]),_sfc_main$k=defineComponent({name:"Toolbox",setup(){const{i18n:e,gtag:t,globalState:i}=useEnhancer(),s=ref(0),c=ref(!1),d=ref(!1),g=()=>{t==null||t.event("rss",{event_category:GAEventCategories.Widget})},r=()=>{t==null||t.event("feedback_modal",{event_category:GAEventCategories.Widget}),i.toggleSwitcher("feedback",!0)},y=()=>{const E=()=>{let w=window.scrollY;const k=document.body.scrollHeight-window.innerHeight;if(d.value&&(w+=1),c.value&&(w-=1),w<0?w=0:w>=k&&(w=k),!(w>0&&w<k))return!1;if(window.scrollTo(0,w),d.value||c.value)s.value=window.requestAnimationFrame(E);else return window.cancelAnimationFrame(s.value),!1};s.value=window.requestAnimationFrame(E)};return{VALUABLE_LINKS,LanguageKey,t:e.translate,scrollToPageTop,scrollToNextScreen,handleFeedback:r,handleRSS:g,setTopButtonState(E,w=!1){c.value=E,window.cancelAnimationFrame(s.value),w&&y()},setBottomButtonState(E,w=!1){d.value=E,window.cancelAnimationFrame(s.value),w&&y()}}}}),toolbox_vue_vue_type_style_index_0_scoped_f61e9e36_lang="";function _sfc_ssrRender$k(e,t,i,s,c,d,g,r){const y=resolveComponent("ulink");t(`<div${ssrRenderAttrs(mergeProps({id:"toolbox"},s))} data-v-f61e9e36><div class="container" data-v-f61e9e36><div class="tools" data-v-f61e9e36>`),t(ssrRenderComponent(y,{class:"rss",href:e.VALUABLE_LINKS.RSS,onMousedown:e.handleRSS},{default:withCtx((E,w,k,S)=>{if(w)w(`<i class="iconfont icon-rss" data-v-f61e9e36${S}></i>`);else return[createVNode("i",{class:"iconfont icon-rss"})]}),_:1},i)),t(`<button class="feedback"${ssrRenderAttr("title",e.t(e.LanguageKey.FEEDBACK))} data-v-f61e9e36><i class="iconfont icon-mail-plane" data-v-f61e9e36></i></button><button class="to-page-top"${ssrRenderAttr("title",e.t(e.LanguageKey.TO_TOP))} data-v-f61e9e36><i class="iconfont icon-totop" data-v-f61e9e36></i></button><button class="to-page-bottom"${ssrRenderAttr("title",e.t(e.LanguageKey.TO_BOTTOM))} data-v-f61e9e36><i class="iconfont icon-tobottom" data-v-f61e9e36></i></button></div></div></div>`)}const _sfc_setup$k=_sfc_main$k.setup;_sfc_main$k.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/widget/toolbox.vue"),_sfc_setup$k?_sfc_setup$k(e,t):void 0};const Toolbox=_export_sfc(_sfc_main$k,[["ssrRender",_sfc_ssrRender$k],["__scopeId","data-v-f61e9e36"]]),_sfc_main$j=defineComponent({name:"Feedback",emits:["close"],setup(e,t){const i=[{emoji:"\u{1F620}",value:1,en:"Terrible",zh:"\u5DEE\u52B2"},{emoji:"\u{1F641}",value:2,en:"Bad",zh:"\u4E0D\u559C\u6B22"},{emoji:"\u{1F610}",value:3,en:"Neutral",zh:"\u65E0\u611F"},{emoji:"\u{1F603}",value:4,en:"Great",zh:"\u559C\u6B22"},{emoji:"\u{1F970}",value:5,en:"Amazing",zh:"\u592A\u68D2\u4E86"}],{appOption:s,identity:c}=useStores(),{gtag:d,isZhLang:g}=useEnhancer(),r=computed(()=>c.feedbacks),y=reactive({emotion:null,content:"",submitting:!1,submitted:!1}),E=computed(()=>Number.isInteger(y.emotion)&&Boolean(y.content));return{LanguageKey,META,isZhLang:g,isSubmitable:E,emotions:i,state:y,historyFeedbacks:r,handleClose:()=>t.emit("close"),handleSubmit:()=>{E.value&&(d==null||d.event("submit_feedback",{event_category:GAEventCategories.Widget}),y.submitting=!0,s.postFeedback(toRaw$1(y)).then(S=>{c.addFeedback(S.result),y.submitted=!0}).catch(S=>{alert(S)}).finally(()=>{y.submitting=!1}))}}}}),feedback_vue_vue_type_style_index_0_scoped_3ccc5195_lang="";function _sfc_ssrRender$j(e,t,i,s,c,d,g,r){const y=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:"feedback"},s))} data-v-3ccc5195>`),e.state.submitted?(t('<div class="submitted" data-v-3ccc5195><div class="icon" data-v-3ccc5195><i class="iconfont icon-success" data-v-3ccc5195></i></div><div class="text" data-v-3ccc5195>'),t(ssrRenderComponent(y,null,{zh:withCtx((E,w,k,S)=>{if(w)w("\u611F\u8C22\u4F60\u7684\u53CD\u9988\u3002");else return[createTextVNode("\u611F\u8C22\u4F60\u7684\u53CD\u9988\u3002")]}),en:withCtx((E,w,k,S)=>{if(w)w("Thank U for your feedback.");else return[createTextVNode("Thank U for your feedback.")]}),_:1},i)),t('</div><button class="close" data-v-3ccc5195>'),t(ssrRenderComponent(y,{zh:"\u5173\u95ED\u7A97\u53E3",en:"Close"},null,i)),t("</button></div>")):(t('<!--[--><div class="title" data-v-3ccc5195>'),t(ssrRenderComponent(y,null,{zh:withCtx((E,w,k,S)=>{if(w)w(`\u4F60\u8BA4\u4E3A ${ssrInterpolate(e.META.title)} \u6574\u4F53\u600E\u4E48\u6837\uFF1F`);else return[createTextVNode("\u4F60\u8BA4\u4E3A "+toDisplayString(e.META.title)+" \u6574\u4F53\u600E\u4E48\u6837\uFF1F",1)]}),en:withCtx((E,w,k,S)=>{if(w)w(`How would you rate ${ssrInterpolate(e.META.title)}?`);else return[createTextVNode("How would you rate "+toDisplayString(e.META.title)+"?",1)]}),_:1},i)),t('</div><div class="emotions" data-v-3ccc5195><!--[-->'),ssrRenderList(e.emotions,E=>{t(`<li class="item" data-v-3ccc5195><label data-v-3ccc5195><input class="radio" type="radio"${ssrRenderAttr("value",E.value)}${includeBooleanAttr(e.state.submitting)?" disabled":""}${includeBooleanAttr(ssrLooseEqual(e.state.emotion,E.value))?" checked":""} data-v-3ccc5195><div class="${ssrRenderClass([{activated:e.state.emotion===E.value},"button"])}" data-v-3ccc5195><span class="emoji" data-v-3ccc5195>${ssrInterpolate(E.emoji)}</span><span class="text" data-v-3ccc5195>`),t(ssrRenderComponent(y,{zh:E.zh,en:E.en},null,i)),t("</span></div></label>"),e.state.emotion===E.value?t('<div class="arrow" data-v-3ccc5195></div>'):t("<!---->"),t("</li>")}),t(`<!--]--></div><div class="input" data-v-3ccc5195><textarea class="textarea" name="feedback" id="feedback" rows="10"${includeBooleanAttr(e.state.submitting)?" disabled":""}${ssrRenderAttr("placeholder",e.isZhLang?"\u4F60\u53EF\u5728\u6B64\u7545\u6240\u6B32\u8A00\uFF0C\u8FD9\u5C06\u4EC5\u5BF9\u535A\u4E3B\u53EF\u89C1":"Tell me about your opinion...")} data-v-3ccc5195>${ssrInterpolate(e.state.content)}</textarea><div class="buttons" data-v-3ccc5195><button class="item cancel"${includeBooleanAttr(e.state.submitting)?" disabled":""} data-v-3ccc5195><span class="text" data-v-3ccc5195>`),t(ssrRenderComponent(y,{zh:"\u53D6\u6D88",en:"Cancel"},null,i)),t(`</span></button><button class="item submit"${includeBooleanAttr(!e.isSubmitable||e.state.submitting)?" disabled":""} data-v-3ccc5195><i class="iconfont icon-mail-plane" data-v-3ccc5195></i><span class="text" data-v-3ccc5195>`),t(ssrRenderComponent(y,{k:e.state.submitting?e.LanguageKey.SUBMITTING:e.LanguageKey.SUBMIT},null,i)),t("</span></button></div></div><!--]-->")),e.historyFeedbacks.length?(t('<div class="history" data-v-3ccc5195>'),t(ssrRenderComponent(y,null,{zh:withCtx((E,w,k,S)=>{if(w)w(`\u4F60\u5DF2\u8FDB\u884C\u8FC7 ${ssrInterpolate(e.historyFeedbacks.length)} \u6B21\u53CD\u9988\u3002`);else return[createTextVNode("\u4F60\u5DF2\u8FDB\u884C\u8FC7 "+toDisplayString(e.historyFeedbacks.length)+" \u6B21\u53CD\u9988\u3002",1)]}),en:withCtx((E,w,k,S)=>{if(w)w(`You have ${ssrInterpolate(e.historyFeedbacks.length)} feedback history.`);else return[createTextVNode("You have "+toDisplayString(e.historyFeedbacks.length)+" feedback history.",1)]}),_:1},i)),t("</div>")):t("<!---->"),t("</div>")}const _sfc_setup$j=_sfc_main$j.setup;_sfc_main$j.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/widget/feedback.vue"),_sfc_setup$j?_sfc_setup$j(e,t):void 0};const Feedback=_export_sfc(_sfc_main$j,[["ssrRender",_sfc_ssrRender$j],["__scopeId","data-v-3ccc5195"]]),_sfc_main$i=defineComponent({name:"Statement",components:{Markdown},setup(){const{appOption:e}=useStores();return{appOption:e,emailLink}}}),statement_vue_vue_type_style_index_0_scoped_ed0272f7_lang="";function _sfc_ssrRender$i(e,t,i,s,c,d,g,r){var E;const y=resolveComponent("markdown");t(`<div${ssrRenderAttrs(mergeProps({class:"statement"},s))} data-v-ed0272f7><div class="content" data-v-ed0272f7>`),t(ssrRenderComponent(y,{markdown:(E=e.appOption.data)==null?void 0:E.statement,compact:!0},null,i)),t("<br data-v-ed0272f7><hr data-v-ed0272f7>"),e.appOption.data?t(`<p class="email" data-v-ed0272f7><a${ssrRenderAttr("href",e.emailLink(e.appOption.data.site_email))} class="link" target="_blank" data-v-ed0272f7><i class="iconfont icon-mail" data-v-ed0272f7></i><span class="text" data-v-ed0272f7>${ssrInterpolate(e.appOption.data.site_email)}</span></a></p>`):t("<!---->"),t("</div></div>")}const _sfc_setup$i=_sfc_main$i.setup;_sfc_main$i.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/widget/statement.vue"),_sfc_setup$i?_sfc_setup$i(e,t):void 0};const Statement=_export_sfc(_sfc_main$i,[["ssrRender",_sfc_ssrRender$i],["__scopeId","data-v-ed0272f7"]]),menus=[{id:RouteName.Home,route:"/",icon:"icon-home-fill",i18nKey:LanguageKey.PAGE_HOME},{id:CategorySlug.Code,route:getCategoryFlowRoute(CategorySlug.Code),icon:"icon-code",i18nKey:LanguageKey.CATEGORY_CODE},{id:CategorySlug.Insight,route:getCategoryFlowRoute(CategorySlug.Insight),icon:"icon-insight",i18nKey:LanguageKey.CATEGORY_INSIGHT},{id:"github",url:VALUABLE_LINKS.GITHUB,icon:"icon-github",i18nKey:LanguageKey.PAGE_GITHUB,newWindow:!0},{id:RouteName.Lens,route:getPageRoute(RouteName.Lens),icon:"icon-lens",i18nKey:LanguageKey.PAGE_LENS},{id:RouteName.About,route:getPageRoute(RouteName.About),icon:"icon-swordsman",i18nKey:LanguageKey.PAGE_ABOUT},{id:RouteName.Guestbook,route:getPageRoute(RouteName.Guestbook),i18nKey:LanguageKey.PAGE_GUESTBOOK,icon:"icon-comment"},{id:RouteName.App,route:getPageRoute(RouteName.App),imageIcon:getTargetCDNURL("/images/page-app/logo.png"),i18nKey:LanguageKey.PAGE_APP,divider:!0},{id:RouteName.Merch,route:getPageRoute(RouteName.Merch),i18nKey:LanguageKey.PAGE_MERCH,icon:"icon-rubik",divider:!0,hot:!0}],_sfc_main$h=defineComponent({name:"DesktopNav",setup(){const{adConfig:e}=useEnhancer();return{NAV_ELEMENT_ID,menus,adConfig:e}}}),nav_vue_vue_type_style_index_0_scoped_57a2df23_lang="";function _sfc_ssrRender$h(e,t,i,s,c,d,g,r){const y=resolveComponent("ulink"),E=resolveComponent("uimage"),w=resolveComponent("webfont"),k=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({id:e.NAV_ELEMENT_ID,class:"desktop-nav"},s))} data-v-57a2df23><nav class="nav-list" data-v-57a2df23><!--[-->`),ssrRenderList(e.menus,S=>{t("<!--[-->"),S.divider?t('<span class="divider" data-v-57a2df23></span>'):t("<!---->"),t(ssrRenderComponent(y,{class:["item",[S.id,{hot:S.hot}]],href:S.url,to:S.route},{default:withCtx((I,L,D,O)=>{if(L)S.imageIcon?L(ssrRenderComponent(E,{class:"image-icon",src:S.imageIcon},null,D,O)):S.icon?L(`<i class="${ssrRenderClass([S.icon,"iconfont"])}" data-v-57a2df23${O}></i>`):L("<!---->"),L(ssrRenderComponent(w,{class:"text",bolder:"",uppercase:""},{default:withCtx((V,z,U,Z)=>{if(z)z(ssrRenderComponent(k,{k:S.i18nKey},null,U,Z));else return[createVNode(k,{k:S.i18nKey},null,8,["k"])]}),_:2},D,O)),S.newWindow?L(`<span class="newscript" data-v-57a2df23${O}><i class="iconfont icon-new-window-s" data-v-57a2df23${O}></i></span>`):L("<!---->"),S.hot?L(`<span class="superscript" data-v-57a2df23${O}><i class="iconfont icon-hot-fill" data-v-57a2df23${O}></i></span>`):L("<!---->");else return[S.imageIcon?(openBlock(),createBlock(E,{key:0,class:"image-icon",src:S.imageIcon},null,8,["src"])):S.icon?(openBlock(),createBlock("i",{key:1,class:["iconfont",S.icon]},null,2)):createCommentVNode("",!0),createVNode(w,{class:"text",bolder:"",uppercase:""},{default:withCtx(()=>[createVNode(k,{k:S.i18nKey},null,8,["k"])]),_:2},1024),S.newWindow?(openBlock(),createBlock("span",{key:2,class:"newscript"},[createVNode("i",{class:"iconfont icon-new-window-s"})])):createCommentVNode("",!0),S.hot?(openBlock(),createBlock("span",{key:3,class:"superscript"},[createVNode("i",{class:"iconfont icon-hot-fill"})])):createCommentVNode("",!0)]}),_:2},i)),t("<!--]-->")}),t("<!--]--><!--[-->"),ssrRenderList(e.adConfig.PC_NAV,(S,I)=>{t('<!--[--><span class="divider" data-v-57a2df23></span>'),t(ssrRenderComponent(y,{class:"item",href:S.url},{default:withCtx((L,D,O,V)=>{if(D)D(`<i class="${ssrRenderClass([S.icon,"iconfont"])}" style="${ssrRenderStyle({color:S.color})}" data-v-57a2df23${V}></i><span class="ad-text" style="${ssrRenderStyle({color:S.color})}" data-v-57a2df23${V}>`),S.i18n?D(ssrRenderComponent(k,{zh:S.i18n.zh,en:S.i18n.en},null,O,V)):D(`<!--[-->${ssrInterpolate(S.text)}<!--]-->`),D(`</span><span class="superscript" data-v-57a2df23${V}><i class="iconfont icon-ad" data-v-57a2df23${V}></i></span>`);else return[createVNode("i",{class:["iconfont",S.icon],style:{color:S.color}},null,6),createVNode("span",{class:"ad-text",style:{color:S.color}},[S.i18n?(openBlock(),createBlock(k,{key:0,zh:S.i18n.zh,en:S.i18n.en},null,8,["zh","en"])):(openBlock(),createBlock(Fragment,{key:1},[createTextVNode(toDisplayString(S.text),1)],64))],4),createVNode("span",{class:"superscript"},[createVNode("i",{class:"iconfont icon-ad"})])]}),_:2},i)),t("<!--]-->")}),t("<!--]--></nav></div>")}const _sfc_setup$h=_sfc_main$h.setup;_sfc_main$h.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/layout/desktop/nav.vue"),_sfc_setup$h?_sfc_setup$h(e,t):void 0};const NavView=_export_sfc(_sfc_main$h,[["ssrRender",_sfc_ssrRender$h],["__scopeId","data-v-57a2df23"]]),_sfc_main$g=defineComponent({name:"DesktopAsideSearch",setup(){const{i18n:e,gtag:t,route:i,router:s}=useEnhancer(),c=ref(),d=ref("");return onMounted(()=>{isSearchFlow(i.name)&&(d.value=i.params.keyword)}),{LanguageKey,RouteName,formElement:c,i18n:e,keyword:d,handleSearch:r=>{var S,I;if(r.preventDefault(),!((S=c.value)==null?void 0:S.checkValidity())){(I=c.value)==null||I.reportValidity();return}const E=d.value,w=i.params.keyword,k=isSearchFlow(i.name);E&&(!k||w!==E)&&(s.push({name:RouteName.SearchFlow,params:{keyword:E}}),t==null||t.event("aside_search",{event_category:GAEventCategories.Universal,event_label:E}))}}}}),search_vue_vue_type_style_index_0_scoped_89d7447e_lang="";function _sfc_ssrRender$g(e,t,i,s,c,d,g,r){const y=resolveComponent("router-link");t(`<div${ssrRenderAttrs(mergeProps({class:"search"},s))} data-v-89d7447e><form class="search-box" data-v-89d7447e><input id="keyword" required type="search" name="search" maxlength="16" autocomplete="off"${ssrRenderAttr("value",e.keyword)} class="${ssrRenderClass([e.i18n.language,"search-input"])}"${ssrRenderAttr("placeholder",e.i18n.t(e.LanguageKey.SEARCH_PLACEHOLDER))} data-v-89d7447e><button type="submit" class="search-btn" data-v-89d7447e><i class="iconfont icon-search" data-v-89d7447e></i></button></form>`),t(ssrRenderComponent(y,{class:"extra-btn",to:{name:e.RouteName.Sponsor}},{default:withCtx((E,w,k,S)=>{if(w)w(`<i class="iconfont icon-peachblossom" data-v-89d7447e${S}></i>`);else return[createVNode("i",{class:"iconfont icon-peachblossom"})]}),_:1},i)),t("</div>")}const _sfc_setup$g=_sfc_main$g.setup;_sfc_main$g.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/layout/desktop/aside/search.vue"),_sfc_setup$g?_sfc_setup$g(e,t):void 0};const AsideSearch=_export_sfc(_sfc_main$g,[["ssrRender",_sfc_ssrRender$g],["__scopeId","data-v-89d7447e"]]),StatisticSkeleton=defineComponent({props:{fetching:Boolean,count:Number},setup(e){return()=>h(Transition,{name:"module",mode:"out-in",duration:280},()=>{var t;return e.fetching?h("p",{class:"skeleton",key:"skeleton"},"\u2022\u2022\u2022"):h("p",{class:"count",key:"count"},(t=e.count)!=null?t:"-")})}}),_sfc_main$f=defineComponent({name:"DesktopAsideStatistic",components:{StatisticSkeleton},setup(){const e=ref(!0),t=useNodepressStatisticStore();return onMounted(()=>{t.fetch().finally(()=>{e.value=!1})}),{LanguageKey,RouteName,fetching:e,store:t}}}),statistic_vue_vue_type_style_index_0_scoped_4a21524b_lang="";function _sfc_ssrRender$f(e,t,i,s,c,d,g,r){const y=resolveComponent("router-link"),E=resolveComponent("statistic-skeleton"),w=resolveComponent("i18n"),k=resolveComponent("divider");t(ssrRenderComponent(y,mergeProps({class:"statistic",to:{name:e.RouteName.Archive}},s),{default:withCtx((S,I,L,D)=>{var O,V,z,U,Z,W;if(I)I(`<div class="item" data-v-4a21524b${D}>`),I(ssrRenderComponent(E,{fetching:e.fetching,count:(O=e.store.data)==null?void 0:O.articles},null,L,D)),I(`<span class="title" data-v-4a21524b${D}>`),I(ssrRenderComponent(w,{k:e.LanguageKey.STATISTIC_ARTICLES},null,L,D)),I("</span></div>"),I(ssrRenderComponent(k,{type:"vertical"},null,L,D)),I(`<div class="item" data-v-4a21524b${D}>`),I(ssrRenderComponent(E,{fetching:e.fetching,count:(V=e.store.data)==null?void 0:V.todayViews},null,L,D)),I(`<span class="title" data-v-4a21524b${D}>`),I(ssrRenderComponent(w,{k:e.LanguageKey.STATISTIC_TODAY_VIEWS},null,L,D)),I("</span></div>"),I(ssrRenderComponent(k,{type:"vertical"},null,L,D)),I(`<div class="item" data-v-4a21524b${D}>`),I(ssrRenderComponent(E,{fetching:e.fetching,count:(z=e.store.data)==null?void 0:z.comments},null,L,D)),I(`<span class="title" data-v-4a21524b${D}>`),I(ssrRenderComponent(w,{k:e.LanguageKey.STATISTIC_COMMENTS},null,L,D)),I("</span></div>");else return[createVNode("div",{class:"item"},[createVNode(E,{fetching:e.fetching,count:(U=e.store.data)==null?void 0:U.articles},null,8,["fetching","count"]),createVNode("span",{class:"title"},[createVNode(w,{k:e.LanguageKey.STATISTIC_ARTICLES},null,8,["k"])])]),createVNode(k,{type:"vertical"}),createVNode("div",{class:"item"},[createVNode(E,{fetching:e.fetching,count:(Z=e.store.data)==null?void 0:Z.todayViews},null,8,["fetching","count"]),createVNode("span",{class:"title"},[createVNode(w,{k:e.LanguageKey.STATISTIC_TODAY_VIEWS},null,8,["k"])])]),createVNode(k,{type:"vertical"}),createVNode("div",{class:"item"},[createVNode(E,{fetching:e.fetching,count:(W=e.store.data)==null?void 0:W.comments},null,8,["fetching","count"]),createVNode("span",{class:"title"},[createVNode(w,{k:e.LanguageKey.STATISTIC_COMMENTS},null,8,["k"])])])]}),_:1},i))}const _sfc_setup$f=_sfc_main$f.setup;_sfc_main$f.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/layout/desktop/aside/statistic.vue"),_sfc_setup$f?_sfc_setup$f(e,t):void 0};const AsideStatistic=_export_sfc(_sfc_main$f,[["ssrRender",_sfc_ssrRender$f],["__scopeId","data-v-4a21524b"]]),PER_PAGE=8,_sfc_main$e=defineComponent({name:"DesktopAsideArticle",setup(){const e=useArticleListStore(),t=computed(()=>e.hotList.fetching),i=computed(()=>e.hotList.data.slice(0,PER_PAGE*2).map((g,r)=>({...g,i:r+1}))),s=ref(0),c=computed(()=>{const g=s.value*PER_PAGE;return i.value.map((r,y)=>({...r,i:y+1})).slice(g,g+PER_PAGE)});return{LanguageKey,isFetching:t,articles:c,switchHotPage:()=>{const g=i.value.length,r=Math.ceil(g/PER_PAGE);s.value<r-1?s.value++:s.value=0},getArticleDetailRoute,numberToKilo,dateToYMD}}}),article_vue_vue_type_style_index_0_scoped_acd8d22e_lang="";function _sfc_ssrRender$e(e,t,i,s,c,d,g,r){const y=resolveComponent("webfont"),E=resolveComponent("i18n"),w=resolveComponent("placeholder"),k=resolveComponent("skeleton-line"),S=resolveComponent("router-link");t(`<div${ssrRenderAttrs(mergeProps({class:"article"},s))} data-v-acd8d22e><div class="header" data-v-acd8d22e><span class="title" data-v-acd8d22e><i class="iconfont icon-hotfill" data-v-acd8d22e></i>`),t(ssrRenderComponent(y,{class:"text"},{default:withCtx((I,L,D,O)=>{if(L)L(ssrRenderComponent(E,{k:e.LanguageKey.HOT_ARTICLE_LIST_TITLE},null,D,O));else return[createVNode(E,{k:e.LanguageKey.HOT_ARTICLE_LIST_TITLE},null,8,["k"])]}),_:1},i)),t('</span><button class="switch" data-v-acd8d22e><i class="iconfont icon-switch" data-v-acd8d22e></i></button></div>'),t(ssrRenderComponent(w,{data:e.articles,loading:e.isFetching,"i18n-key":e.LanguageKey.ARTICLE_PLACEHOLDER},{loading:withCtx((I,L,D,O)=>{if(L)L(`<ul class="article-list-skeleton" data-v-acd8d22e${O}><!--[-->`),ssrRenderList(5,V=>{L(`<li class="item" data-v-acd8d22e${O}>`),L(ssrRenderComponent(k,null,null,D,O)),L("</li>")}),L("<!--]--></ul>");else return[createVNode("ul",{class:"article-list-skeleton",key:"skeleton"},[(openBlock(),createBlock(Fragment,null,renderList(5,V=>createVNode("li",{key:V,class:"item"},[createVNode(k)])),64))])]}),default:withCtx((I,L,D,O)=>{if(L)L(`<ul class="article-list" data-v-acd8d22e${O}><!--[-->`),ssrRenderList(e.articles,V=>{L(`<li class="item" data-v-acd8d22e${O}><span class="${ssrRenderClass([{small:V.i>=10},"index"])}"${ssrRenderAttr("data-index",V.i)} data-v-acd8d22e${O}>${ssrInterpolate(V.i)}</span><div class="content" data-v-acd8d22e${O}>`),L(ssrRenderComponent(S,{class:"title",to:e.getArticleDetailRoute(V.id),title:V.title},{default:withCtx((z,U,Z,W)=>{if(U)U(`${ssrInterpolate(V.title)}`);else return[createTextVNode(toDisplayString(V.title),1)]}),_:2},D,O)),L(`<div class="meta" data-v-acd8d22e${O}><span class="item date" data-v-acd8d22e${O}>${ssrInterpolate(e.dateToYMD(V.create_at))}</span><span class="item views" data-v-acd8d22e${O}><i class="iconfont icon-eye" data-v-acd8d22e${O}></i> ${ssrInterpolate(e.numberToKilo(V.meta.views))}</span><span class="item comments" data-v-acd8d22e${O}><i class="iconfont icon-comment" data-v-acd8d22e${O}></i> ${ssrInterpolate(V.meta.comments)}</span></div></div></li>`)}),L("<!--]--></ul>");else return[createVNode("ul",{class:"article-list",key:"list"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.articles,V=>(openBlock(),createBlock("li",{key:V.id,class:"item"},[createVNode("span",{class:["index",{small:V.i>=10}],"data-index":V.i},toDisplayString(V.i),11,["data-index"]),createVNode("div",{class:"content"},[createVNode(S,{class:"title",to:e.getArticleDetailRoute(V.id),title:V.title},{default:withCtx(()=>[createTextVNode(toDisplayString(V.title),1)]),_:2},1032,["to","title"]),createVNode("div",{class:"meta"},[createVNode("span",{class:"item date"},toDisplayString(e.dateToYMD(V.create_at)),1),createVNode("span",{class:"item views"},[createVNode("i",{class:"iconfont icon-eye"}),createTextVNode(" "+toDisplayString(e.numberToKilo(V.meta.views)),1)]),createVNode("span",{class:"item comments"},[createVNode("i",{class:"iconfont icon-comment"}),createTextVNode(" "+toDisplayString(V.meta.comments),1)])])])]))),128))])]}),_:1},i)),t("</div>")}const _sfc_setup$e=_sfc_main$e.setup;_sfc_main$e.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/layout/desktop/aside/article.vue"),_sfc_setup$e?_sfc_setup$e(e,t):void 0};const AsideArticle=_export_sfc(_sfc_main$e,[["ssrRender",_sfc_ssrRender$e],["__scopeId","data-v-acd8d22e"]]),_sfc_main$d=defineComponent({name:"DesktopAsideMammon",components:{Swiper,SwiperSlide},props:{index:{type:Number,default:0},ready:{type:Object}},emits:["ready","update:index","index-change"],setup(e,t){const{adConfig:i}=useEnhancer(),s=ref();return{adConfig:i,updateSwiper:g=>{s.value=g,t.emit("ready",s.value)},handleSlideChange:()=>{var r;const g=(r=s.value)==null?void 0:r.realIndex;t.emit("update:index",g),t.emit("index-change",g)}}}}),mammon_vue_vue_type_style_index_0_scoped_1b8fd532_lang="";function _sfc_ssrRender$d(e,t,i,s,c,d,g,r){const y=resolveComponent("swiper"),E=resolveComponent("swiper-slide"),w=resolveComponent("ulink"),k=resolveComponent("uimage");t(`<div${ssrRenderAttrs(mergeProps({class:"mammon"},s))} data-v-1b8fd532>`),t(ssrRenderComponent(y,{class:"swiper",direction:"vertical","initial-slide":e.index,loop:!0,"simulate-touch":!1,autoplay:{delay:2800,disableOnInteraction:!1},pagination:{clickable:!0},"set-wrapper-size":!0,"auto-height":!0,mousewheel:!0,"observe-parents":!0,"preload-images":!1,lazy:!0,onSwiper:e.updateSwiper,onSlideChangeTransitionEnd:e.handleSlideChange},{default:withCtx((S,I,L,D)=>{if(I)I("<!--[-->"),ssrRenderList(e.adConfig.PC_ASIDE_SWIPER,(O,V)=>{I(ssrRenderComponent(E,{class:"swiper-slide",key:V},{default:withCtx((z,U,Z,W)=>{if(U)U(ssrRenderComponent(w,{class:"content",href:O.url},{default:withCtx((ne,re,ie,Ce)=>{if(re)re(ssrRenderComponent(k,{src:O.src,alt:"aside-swiper-ad"},null,ie,Ce)),re(`<i class="iconfont icon-ad" data-v-1b8fd532${Ce}></i>`);else return[createVNode(k,{src:O.src,alt:"aside-swiper-ad"},null,8,["src"]),createVNode("i",{class:"iconfont icon-ad"})]}),_:2},Z,W));else return[createVNode(w,{class:"content",href:O.url},{default:withCtx(()=>[createVNode(k,{src:O.src,alt:"aside-swiper-ad"},null,8,["src"]),createVNode("i",{class:"iconfont icon-ad"})]),_:2},1032,["href"])]}),_:2},L,D))}),I("<!--]-->");else return[(openBlock(!0),createBlock(Fragment,null,renderList(e.adConfig.PC_ASIDE_SWIPER,(O,V)=>(openBlock(),createBlock(E,{class:"swiper-slide",key:V},{default:withCtx(()=>[createVNode(w,{class:"content",href:O.url},{default:withCtx(()=>[createVNode(k,{src:O.src,alt:"aside-swiper-ad"},null,8,["src"]),createVNode("i",{class:"iconfont icon-ad"})]),_:2},1032,["href"])]),_:2},1024))),128))]}),_:1},i)),t("</div>")}const _sfc_setup$d=_sfc_main$d.setup;_sfc_main$d.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/layout/desktop/aside/mammon.vue"),_sfc_setup$d?_sfc_setup$d(e,t):void 0};const AsideMammon=_export_sfc(_sfc_main$d,[["ssrRender",_sfc_ssrRender$d],["__scopeId","data-v-1b8fd532"]]),_sfc_main$c=defineComponent({name:"DesktopAsideTag",setup(){const e=useTagStore();return{LanguageKey,tagStore:e,tagEnName,getTagIcon:i=>getExtendValue(i.extends||[],"icon")||"icon-tag",getTagFlowRoute}}}),tag_vue_vue_type_style_index_0_scoped_dfb959e3_lang="";function _sfc_ssrRender$c(e,t,i,s,c,d,g,r){const y=resolveComponent("placeholder"),E=resolveComponent("skeleton-line"),w=resolveComponent("router-link"),k=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:"tag"},s))} data-v-dfb959e3>`),t(ssrRenderComponent(y,{data:e.tagStore.sorted.length,fetching:e.tagStore.fetching,"i18n-key":e.LanguageKey.TAG_PLACEHOLDER},{loading:withCtx((S,I,L,D)=>{if(I)I(`<ul class="tag-list-skeleton" data-v-dfb959e3${D}><!--[-->`),ssrRenderList(14,O=>{I(`<li class="item" data-v-dfb959e3${D}>`),I(ssrRenderComponent(E,null,null,L,D)),I("</li>")}),I("<!--]--></ul>");else return[createVNode("ul",{class:"tag-list-skeleton",key:"skeleton"},[(openBlock(),createBlock(Fragment,null,renderList(14,O=>createVNode("li",{key:O,class:"item"},[createVNode(E)])),64))])]}),default:withCtx((S,I,L,D)=>{if(I)I(`<div class="tag-list" data-v-dfb959e3${D}><!--[-->`),ssrRenderList(e.tagStore.sorted,(O,V)=>{I(ssrRenderComponent(w,{class:"item",title:`${e.tagEnName(O)} | ${O.description}`,to:e.getTagFlowRoute(O.slug),key:V},{default:withCtx((z,U,Z,W)=>{if(U)U(`<i class="${ssrRenderClass([e.getTagIcon(O),"iconfont"])}" data-v-dfb959e3${W}></i><span class="name" data-v-dfb959e3${W}>`),U(ssrRenderComponent(k,{zh:O.name,en:e.tagEnName(O)},null,Z,W)),U(`<span class="count" data-v-dfb959e3${W}>(${ssrInterpolate(O.articles_count||0)})</span></span>`);else return[createVNode("i",{class:["iconfont",e.getTagIcon(O)]},null,2),createVNode("span",{class:"name"},[createVNode(k,{zh:O.name,en:e.tagEnName(O)},null,8,["zh","en"]),createVNode("span",{class:"count"},"("+toDisplayString(O.articles_count||0)+")",1)])]}),_:2},L,D))}),I("<!--]--></div>");else return[createVNode("div",{class:"tag-list",key:"list"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.tagStore.sorted,(O,V)=>(openBlock(),createBlock(w,{class:"item",title:`${e.tagEnName(O)} | ${O.description}`,to:e.getTagFlowRoute(O.slug),key:V},{default:withCtx(()=>[createVNode("i",{class:["iconfont",e.getTagIcon(O)]},null,2),createVNode("span",{class:"name"},[createVNode(k,{zh:O.name,en:e.tagEnName(O)},null,8,["zh","en"]),createVNode("span",{class:"count"},"("+toDisplayString(O.articles_count||0)+")",1)])]),_:2},1032,["title","to"]))),128))])]}),_:1},i)),t("</div>")}const _sfc_setup$c=_sfc_main$c.setup;_sfc_main$c.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/layout/desktop/aside/tag.vue"),_sfc_setup$c?_sfc_setup$c(e,t):void 0};const AsideTag=_export_sfc(_sfc_main$c,[["ssrRender",_sfc_ssrRender$c],["__scopeId","data-v-dfb959e3"]]),_sfc_main$b=defineComponent({name:"DesktopAsideAnchor",setup(){const e=useArticleDetailStore(),t=computed(()=>e.article),i=computed(()=>{var g,r;const d=[...((g=e.defaultContent)==null?void 0:g.headings)||[]];return e.isLongContent&&e.renderedFullContent&&d.push(...((r=e.moreContent)==null?void 0:r.headings)||[]),d}),s=computed(()=>Math.min(...i.value.map(d=>d.level)));return{ANCHORS,LanguageKey,article:t,store:e,headings:i,minHeadingLevel:s,numberSplit,handleAnchor:d=>{scrollToAnchor(d)}}}}),anchor_vue_vue_type_style_index_0_scoped_cbe5d919_lang="";function _sfc_ssrRender$b(e,t,i,s,c,d,g,r){const y=resolveComponent("i18n"),E=resolveComponent("divider");e.article?(t(`<div${ssrRenderAttrs(mergeProps({class:"anchor"},s))} data-v-cbe5d919><button class="header"${ssrRenderAttr("title",e.article.title)} data-v-cbe5d919><div class="title" data-v-cbe5d919>${ssrInterpolate(e.article.title)}</div><div class="read" data-v-cbe5d919>`),t(ssrRenderComponent(y,null,{zh:withCtx((w,k,S,I)=>{if(k)k(`\u5171 ${ssrInterpolate(e.numberSplit(e.store.contentLength))} \u5B57\uFF0C\u9700\u9605\u8BFB ${ssrInterpolate(e.store.readMinutes)} \u5206\u949F`);else return[createTextVNode("\u5171 "+toDisplayString(e.numberSplit(e.store.contentLength))+" \u5B57\uFF0C\u9700\u9605\u8BFB "+toDisplayString(e.store.readMinutes)+" \u5206\u949F",1)]}),en:withCtx((w,k,S,I)=>{if(k)k(`${ssrInterpolate(e.numberSplit(e.store.contentLength))} words, ${ssrInterpolate(e.store.readMinutes)} min read`);else return[createTextVNode(toDisplayString(e.numberSplit(e.store.contentLength))+" words, "+toDisplayString(e.store.readMinutes)+" min read",1)]}),_:1},i)),t("</div></button>"),e.headings.length?(t(`<div class="catalogue" data-v-cbe5d919><ul class="${ssrRenderClass([`indent-${e.minHeadingLevel}`,"list"])}" data-v-cbe5d919><!--[-->`),ssrRenderList(e.headings,(w,k)=>{t(`<li${ssrRenderAttr("title",w.text)} class="${ssrRenderClass([`level-${w.level}`,"item"])}" data-v-cbe5d919><i class="${ssrRenderClass([`icon-h-${w.level}`,"level iconfont"])}" data-v-cbe5d919></i><span class="text" data-v-cbe5d919>${ssrInterpolate(w.text)}</span></li>`)}),t("<!--]-->"),e.store.isLongContent&&!e.store.renderedFullContent?(t(`<li class="${ssrRenderClass([`level-${e.minHeadingLevel}`,"item readmore"])}" data-v-cbe5d919><i class="level iconfont icon-loadmore" data-v-cbe5d919></i><span class="text" data-v-cbe5d919>`),t(ssrRenderComponent(y,{k:e.LanguageKey.ARTICLE_READ_ALL},null,i)),t("</span></li>")):t("<!---->"),t("</ul></div>")):t("<!---->"),t('<button class="link" data-v-cbe5d919><i class="iconfont icon-heart" data-v-cbe5d919></i>'),t(ssrRenderComponent(y,{zh:"\u6441\u8D5E",en:"Meta"},null,i)),t(ssrRenderComponent(E,{type:"vertical"},null,i)),t(`<span class="meta" data-v-cbe5d919><i class="iconfont icon-like" data-v-cbe5d919></i><span class="count" data-v-cbe5d919>${ssrInterpolate(e.article.meta.likes)}</span></span>`),t(ssrRenderComponent(E,{type:"vertical"},null,i)),t(`<span class="meta" data-v-cbe5d919><i class="iconfont icon-eye" data-v-cbe5d919></i><span class="count" data-v-cbe5d919>${ssrInterpolate(e.numberSplit(e.article.meta.views))}</span></span></button><button class="link" data-v-cbe5d919><i class="iconfont icon-category" data-v-cbe5d919></i>`),t(ssrRenderComponent(y,{zh:"\u76F8\u5173",en:"Related"},null,i)),t(ssrRenderComponent(E,{type:"vertical"},null,i)),t(`<span class="count" data-v-cbe5d919>${ssrInterpolate(e.store.relatedArticles.length)}</span></button><button class="link" data-v-cbe5d919><i class="iconfont icon-comment" data-v-cbe5d919></i>`),t(ssrRenderComponent(y,{zh:"\u8BC4\u8BBA",en:"Comments"},null,i)),t(ssrRenderComponent(E,{type:"vertical"},null,i)),t(`<span class="count" data-v-cbe5d919>${ssrInterpolate(e.article.meta.comments)}</span></button></div>`)):t("<!---->")}const _sfc_setup$b=_sfc_main$b.setup;_sfc_main$b.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/layout/desktop/aside/anchor.vue"),_sfc_setup$b?_sfc_setup$b(e,t):void 0};const AsideAnchor=_export_sfc(_sfc_main$b,[["ssrRender",_sfc_ssrRender$b],["__scopeId","data-v-cbe5d919"]]),_sfc_main$a=defineComponent({name:"DesktopAsideCalendar",setup(){const{i18n:e,isZhLang:t}=useEnhancer(),i=dateToHuman(new Date),s=reactive({month:0,year:1970,table:[]}),c={[Language.English]:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],[Language.Chinese]:["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u65E5"]},d=computed(()=>c[e.language.value]),g=computed(()=>{const k=s.year===i.year,S=s.month===i.month,I=k&&S;if(t.value){const L=`${s.year} \u5E74`,D=` ${s.month} \u6708`,O=I?` ${i.day} \u65E5`:"";return L+D+O}return humanDateToYMD(I?i:s," / ")}),r=k=>{const S=[],I=humanToDate({...k,day:1}),L=dateToHuman(I).week;for(let O=L-1;O>=0;O--){const V=cloneDate(I);V.setDate(V.getDate()-O),S.push(dateToHuman(V))}const D=35-S.length;for(let O=1;O<=D;O++){const V=cloneDate(I);V.setDate(V.getDate()+O),S.push(dateToHuman(V))}Object.assign(s,{year:k.year,month:k.month,table:S})},y=()=>{const k=s.month-1<=0;r({year:s.year-(k?1:0),month:k?12:s.month-1})},E=()=>{const k=s.month+1>=13;r({year:s.year+(k?1:0),month:k?1:s.month+1})},w=k=>{k.month<s.month?y():k.month>s.month&&E()};return r({year:i.year,month:i.month}),{tableView:s,headerText:g,weekDayTexts:d,toPrevMonth:y,toNextMonth:E,handleDayClick:w,isToday:k=>isSameHumanDay(k,i)}}}),calendar_vue_vue_type_style_index_0_scoped_48981900_lang="";function _sfc_ssrRender$a(e,t,i,s,c,d,g,r){t(`<div${ssrRenderAttrs(mergeProps({class:"calendar"},s))} data-v-48981900><div class="header" data-v-48981900><button class="item arrow" data-v-48981900><i class="iconfont icon-prev" data-v-48981900></i></button><span class="item year-month" data-v-48981900>${ssrInterpolate(e.headerText)}</span><button class="item arrow" data-v-48981900><i class="iconfont icon-next" data-v-48981900></i></button></div><ul class="weekdays" data-v-48981900><!--[-->`),ssrRenderList(e.weekDayTexts,(y,E)=>{t(`<li data-v-48981900>${ssrInterpolate(y)}</li>`)}),t('<!--]--></ul><ul class="days" data-v-48981900><!--[-->'),ssrRenderList(e.tableView.table,(y,E)=>{t(`<li data-v-48981900><div class="${ssrRenderClass([{today:e.isToday(y),other:y.month!==e.tableView.month},"item"])}" data-v-48981900>`),ssrRenderSlot(e.$slots,"day",y,()=>{t(`${ssrInterpolate(y.day)}`)},t,i),t("</div></li>")}),t("<!--]--></ul></div>")}const _sfc_setup$a=_sfc_main$a.setup;_sfc_main$a.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/widget/calendar.vue"),_sfc_setup$a?_sfc_setup$a(e,t):void 0};const Calendar=_export_sfc(_sfc_main$a,[["ssrRender",_sfc_ssrRender$a],["__scopeId","data-v-48981900"]]),_sfc_main$9=defineComponent({name:"DesktopAsideCalendar",components:{Calendar},setup(){const{articleCalendar:e}=useStores(),t=s=>{var d;const c=humanDateToYMD(s);return((d=e.data.find(g=>g.date===c))==null?void 0:d.count)||0},i=s=>getDateFlowRoute(humanDateToYMD(s));return onMounted(()=>e.fetch()),{articlesIn:t,getDateRoute:i}}}),calendar_vue_vue_type_style_index_0_scoped_6248cde4_lang="";function _sfc_ssrRender$9(e,t,i,s,c,d,g,r){const y=resolveComponent("calendar",!0),E=resolveComponent("router-link");t(ssrRenderComponent(y,mergeProps({class:"calendar"},s),{day:withCtx((w,k,S,I)=>{if(k)e.articlesIn(w)>0?k(ssrRenderComponent(E,{class:"date-link",to:e.getDateRoute(w)},{default:withCtx((L,D,O,V)=>{if(D)D(`${ssrInterpolate(w.day)}`);else return[createTextVNode(toDisplayString(w.day),1)]}),_:2},S,I)):k(`<span class="date-span" data-v-6248cde4${I}>${ssrInterpolate(w.day)}</span>`);else return[e.articlesIn(w)>0?(openBlock(),createBlock(E,{key:0,class:"date-link",to:e.getDateRoute(w)},{default:withCtx(()=>[createTextVNode(toDisplayString(w.day),1)]),_:2},1032,["to"])):(openBlock(),createBlock("span",{key:1,class:"date-span"},toDisplayString(w.day),1))]}),_:1},i))}const _sfc_setup$9=_sfc_main$9.setup;_sfc_main$9.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/layout/desktop/aside/calendar.vue"),_sfc_setup$9?_sfc_setup$9(e,t):void 0};const AsideCalendar=_export_sfc(_sfc_main$9,[["ssrRender",_sfc_ssrRender$9],["__scopeId","data-v-6248cde4"]]),ASIDE_STICKY_ELEMENT_ID="aside-sticky-module",_sfc_main$8=defineComponent({name:"DesktopAside",components:{AsideSearch,AsideStatistic,AsideArticle,AsideMammon,AsideCalendar,AsideTag,AsideAnchor},setup(){const e=vueRouter_prod.useRoute(),t=computed(()=>isArticleDetail(e.name));let i=null;const s=ref(null),c=d=>{var r,y;s.value.clientHeight;const g=(y=(r=document.getElementById(MAIN_CONTENT_ELEMENT_ID))==null?void 0:r.children)==null?void 0:y[0];g&&g.clientHeight};return onMounted(()=>{nextTick$1(()=>{var d,g;i=new window.$StickyEvents({enabled:!0,stickySelector:`#${ASIDE_STICKY_ELEMENT_ID}`}),(g=(d=i.stickyElements)==null?void 0:d[0])==null||g.addEventListener(window.$StickyEvents.CHANGE,c)})}),onBeforeUnmount(()=>{var d,g;(g=(d=i.stickyElements)==null?void 0:d[0])==null||g.removeEventListener(window.$StickyEvents.CHANGE,c),i.disableEvents(!1),i=null}),{isArticlePage:t,ASIDE_ELEMENT_ID,ASIDE_STICKY_ELEMENT_ID,element:s}}}),index_vue_vue_type_style_index_0_scoped_798f01a9_lang="";function _sfc_ssrRender$8(e,t,i,s,c,d,g,r){const y=resolveComponent("aside-search"),E=resolveComponent("aside-statistic"),w=resolveComponent("aside-article"),k=resolveComponent("client-only"),S=resolveComponent("aside-mammon"),I=resolveComponent("aside-calendar"),L=resolveComponent("Adsense"),D=resolveComponent("aside-anchor"),O=resolveComponent("aside-tag");t(`<aside${ssrRenderAttrs(mergeProps({id:e.ASIDE_ELEMENT_ID,class:"desktop-aside",ref:"element"},s))} data-v-798f01a9><div class="module" data-v-798f01a9>`),t(ssrRenderComponent(y,null,null,i)),t('</div><div class="module" data-v-798f01a9>'),t(ssrRenderComponent(E,null,null,i)),t('</div><div class="module" data-v-798f01a9>'),t(ssrRenderComponent(w,null,null,i)),t("</div>"),t(ssrRenderComponent(k,{transition:""},{default:withCtx((V,z,U,Z)=>{if(z)z(`<div class="module mammon" data-v-798f01a9${Z}>`),z(ssrRenderComponent(S,null,null,U,Z)),z("</div>");else return[createVNode("div",{class:"module mammon"},[createVNode(S)])]}),_:1},i)),t('<div class="module" data-v-798f01a9>'),t(ssrRenderComponent(I,null,null,i)),t(`</div><div${ssrRenderAttr("id",e.ASIDE_STICKY_ELEMENT_ID)} class="aside-sticky-box" data-v-798f01a9><div class="module mammon-square" data-v-798f01a9>`),t(ssrRenderComponent(k,null,{default:withCtx((V,z,U,Z)=>{if(z)z(ssrRenderComponent(L,{"ins-style":"display:inline-block;width:250px;height:250px","data-ad-slot":"6138120718",class:"content"},null,U,Z));else return[createVNode(L,{"ins-style":"display:inline-block;width:250px;height:250px","data-ad-slot":"6138120718",class:"content"})]}),_:1},i)),t('</div><div class="module" data-v-798f01a9>'),e.isArticlePage?t(ssrRenderComponent(k,null,{default:withCtx((V,z,U,Z)=>{if(z)z(ssrRenderComponent(D,{class:"sticky-module"},null,U,Z));else return[createVNode(D,{class:"sticky-module"})]}),_:1},i)):t(ssrRenderComponent(O,{class:"sticky-module"},null,i)),t("</div></div></aside>")}const _sfc_setup$8=_sfc_main$8.setup;_sfc_main$8.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/layout/desktop/aside/index.vue"),_sfc_setup$8?_sfc_setup$8(e,t):void 0};const AsideView$1=_export_sfc(_sfc_main$8,[["ssrRender",_sfc_ssrRender$8],["__scopeId","data-v-798f01a9"]]),_sfc_main$7=defineComponent({name:"DesktopHeader",setup(){const{i18n:e,gtag:t,theme:i,globalState:s}=useEnhancer(),c=computed(()=>!s.layoutColumn.value.isNormal),d=i.theme,g=computed(()=>({[Theme.Light]:"icon-sun",[Theme.Dark]:"icon-moon"})[d.value]),r=()=>{i.toggle(),t==null||t.event("switch_theme",{event_category:GAEventCategories.Widget,event_label:i.theme.value})},y=()=>{var w;e.toggle(),t==null||t.event("switch_language",{event_category:GAEventCategories.Widget,event_label:(w=e.l.value)==null?void 0:w.name})};return{menus,HEADER_ELEMENT_ID,LanguageKey,isEnabledNav:c,handleRootNavEvent:()=>{t==null||t.event("root_header_home_nav",{event_category:GAEventCategories.Universal})},t:e.t,language:e.language,tooggleLanguage:y,theme:d,themeIcon:g,toggleTheme:r}}}),header_vue_vue_type_style_index_0_scoped_39e0e786_lang="";function _sfc_ssrRender$7(e,t,i,s,c,d,g,r){const y=resolveComponent("uimage"),E=resolveComponent("webfont"),w=resolveComponent("i18n"),k=resolveComponent("router-link"),S=resolveComponent("ulink");t(`<header${ssrRenderAttrs(mergeProps({id:e.HEADER_ELEMENT_ID,class:["header",{"enable-nav":e.isEnabledNav}]},s))} data-v-39e0e786><div class="header-container container" data-v-39e0e786><div class="header-header" data-v-39e0e786>`),t(ssrRenderComponent(y,{cdn:"",src:"/images/logo.svg",class:"header-logo"},null,i)),t(ssrRenderComponent(E,{class:"header-slogan"},{default:withCtx((I,L,D,O)=>{if(L)L(ssrRenderComponent(w,{k:e.LanguageKey.APP_SLOGAN},null,D,O));else return[createVNode(w,{k:e.LanguageKey.APP_SLOGAN},null,8,["k"])]}),_:1},i)),t(ssrRenderComponent(k,{to:"/",class:"header-link",title:e.t(e.LanguageKey.APP_SLOGAN),onMousedown:e.handleRootNavEvent},null,i)),t('</div><div class="toolbox" data-v-39e0e786>'),e.isEnabledNav?t('<button class="button menu" data-v-39e0e786><i class="iconfont icon-top-menu" data-v-39e0e786></i></button>'):t("<!---->"),t(`<button class="button language" title="Switch language" data-v-39e0e786>${ssrInterpolate(e.language||"-")}</button><button class="${ssrRenderClass([e.theme,"button theme"])}" data-v-39e0e786><i class="${ssrRenderClass([e.themeIcon,"iconfont"])}" data-v-39e0e786></i></button></div></div><div class="header-nav" data-v-39e0e786><nav class="nav-list container" data-v-39e0e786><!--[-->`),ssrRenderList(e.menus,(I,L)=>{t("<!--[-->"),L>0?t('<span class="divider" data-v-39e0e786></span>'):t("<!---->"),t(ssrRenderComponent(S,{class:["item",[I.id,{hot:I.hot,new:I.newWindow}]],to:I.route,href:I.url},{default:withCtx((D,O,V,z)=>{if(O)I.imageIcon?O(ssrRenderComponent(y,{class:"image-icon",src:I.imageIcon},null,V,z)):I.icon?O(`<i class="${ssrRenderClass([I.icon,"iconfont"])}" data-v-39e0e786${z}></i>`):O("<!---->"),O(ssrRenderComponent(E,{class:"text",bolder:"",uppercase:""},{default:withCtx((U,Z,W,ne)=>{if(Z)Z(ssrRenderComponent(w,{k:I.i18nKey},null,W,ne));else return[createVNode(w,{k:I.i18nKey},null,8,["k"])]}),_:2},V,z)),I.hot?O(`<span class="superscript" data-v-39e0e786${z}><i class="iconfont icon-hot-fill" data-v-39e0e786${z}></i></span>`):O("<!---->"),I.newWindow?O(`<sup class="newscript" data-v-39e0e786${z}><i class="iconfont icon-new-window-s" data-v-39e0e786${z}></i></sup>`):O("<!---->");else return[I.imageIcon?(openBlock(),createBlock(y,{key:0,class:"image-icon",src:I.imageIcon},null,8,["src"])):I.icon?(openBlock(),createBlock("i",{key:1,class:["iconfont",I.icon]},null,2)):createCommentVNode("",!0),createVNode(E,{class:"text",bolder:"",uppercase:""},{default:withCtx(()=>[createVNode(w,{k:I.i18nKey},null,8,["k"])]),_:2},1024),I.hot?(openBlock(),createBlock("span",{key:2,class:"superscript"},[createVNode("i",{class:"iconfont icon-hot-fill"})])):createCommentVNode("",!0),I.newWindow?(openBlock(),createBlock("sup",{key:3,class:"newscript"},[createVNode("i",{class:"iconfont icon-new-window-s"})])):createCommentVNode("",!0)]}),_:2},i)),t("<!--]-->")}),t("<!--]--></nav></div></header>")}const _sfc_setup$7=_sfc_main$7.setup;_sfc_main$7.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/layout/desktop/header.vue"),_sfc_setup$7?_sfc_setup$7(e,t):void 0};const HeaderView$1=_export_sfc(_sfc_main$7,[["ssrRender",_sfc_ssrRender$7],["__scopeId","data-v-39e0e786"]]),_sfc_main$6=defineComponent({name:"DesktopFooter",setup(){const{globalState:e,gtag:t}=useEnhancer();return{FOOTER_ELEMENT_ID,VALUABLE_LINKS,handleStatementModal:()=>{e.toggleSwitcher("statement",!0),t==null||t.event("statement_modal",{event_category:GAEventCategories.Universal})}}}}),footer_vue_vue_type_style_index_0_scoped_54736299_lang="";function _sfc_ssrRender$6(e,t,i,s,c,d,g,r){const y=resolveComponent("ulink"),E=resolveComponent("divider"),w=resolveComponent("i18n");t(`<footer${ssrRenderAttrs(mergeProps({id:e.FOOTER_ELEMENT_ID,class:"footer"},s))} data-v-54736299><div class="container" data-v-54736299>`),t(ssrRenderComponent(y,{class:"sitemap-btn",href:e.VALUABLE_LINKS.SITE_MAP},{default:withCtx((k,S,I,L)=>{if(S)S("sitemap.xml");else return[createTextVNode("sitemap.xml")]}),_:1},i)),t(ssrRenderComponent(E,{type:"vertical"},null,i)),t(ssrRenderComponent(w,{zh:"\u7531 ",en:"Powered By "},null,i)),t(ssrRenderComponent(y,{class:"item",href:e.VALUABLE_LINKS.GITHUB_BLOG_STAR_LIST},{default:withCtx((k,S,I,L)=>{if(S)S("NodePress");else return[createTextVNode("NodePress")]}),_:1},i)),t(ssrRenderComponent(w,{zh:"\u3001",en:", "},null,i)),t(ssrRenderComponent(y,{class:"item",href:e.VALUABLE_LINKS.GITHUB_SURMON_ME},{default:withCtx((k,S,I,L)=>{if(S)S("Vue");else return[createTextVNode("Vue")]}),_:1},i)),t(ssrRenderComponent(w,{zh:" \u548C \u65E5\u6708\u661F\u8FB0 \u5F3A\u529B\u9A71\u52A8",en:""},null,i)),t(ssrRenderComponent(E,{type:"vertical"},null,i)),t('<a class="statement" href="javascript:void(0)" data-v-54736299>'),t(ssrRenderComponent(w,{zh:"\u5468\u77E5",en:"FAQ"},null,i)),t("</a>"),t(ssrRenderComponent(E,{type:"vertical"},null,i)),t(ssrRenderComponent(y,{href:e.VALUABLE_LINKS.UPTIME_STATUS},{default:withCtx((k,S,I,L)=>{if(S)S(ssrRenderComponent(w,{zh:"\u5B9E\u6001",en:"STATUS"},null,I,L));else return[createVNode(w,{zh:"\u5B9E\u6001",en:"STATUS"})]}),_:1},i)),t("</div></footer>")}const _sfc_setup$6=_sfc_main$6.setup;_sfc_main$6.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/layout/desktop/footer.vue"),_sfc_setup$6?_sfc_setup$6(e,t):void 0};const FooterView$1=_export_sfc(_sfc_main$6,[["ssrRender",_sfc_ssrRender$6],["__scopeId","data-v-54736299"]]),_sfc_main$5=defineComponent({name:"DesktopMain",components:{Share,Feedback,Wallpaper,Statement,SponsorTabs,SponsorProvider,MusicPlayerHandle,Toolbox,Wallflower,Background,HeaderView:HeaderView$1,FooterView:FooterView$1,AsideView:AsideView$1,NavView},setup(){const e=createSponsorState(),t=useWallpaperStore(),{route:i,globalState:s}=useEnhancer(),c=()=>{s.setLayoutColumn(getLayoutByRouteMeta(i.meta))},d=()=>{s.toggleSwitcher("sponsor",!1)},g=()=>{s.toggleSwitcher("feedback",!1)},r=()=>{s.toggleSwitcher("statement",!1)};return onMounted(()=>{t.fetch(),useMusic().init()}),{LanguageKey,MAIN_ELEMENT_ID,MAIN_CONTENT_ELEMENT_ID,switcher:s.switcher,layoutColumn:s.layoutColumn,sponsorState:e,handlePageTransitionDone:c,handleSponsorModalClose:d,handleFeedbackModalClose:g,handleStatementModalClose:r}}}),main_vue_vue_type_style_index_0_scoped_72c57406_lang="";function _sfc_ssrRender$5(e,t,i,s,c,d,g,r){const y=resolveComponent("background"),E=resolveComponent("wallflower"),w=resolveComponent("client-only"),k=resolveComponent("popup"),S=resolveComponent("sponsor-tabs"),I=resolveComponent("sponsor-provider"),L=resolveComponent("feedback"),D=resolveComponent("statement"),O=resolveComponent("share"),V=resolveComponent("wallpaper"),z=resolveComponent("toolbox"),U=resolveComponent("music-player-handle"),Z=resolveComponent("header-view"),W=resolveComponent("nav-view"),ne=resolveComponent("aside-view"),re=resolveComponent("router-view"),ie=resolveComponent("footer-view");t(`<div${ssrRenderAttrs(mergeProps({class:"desktop-main"},s))} data-v-72c57406>`),t(ssrRenderComponent(y,null,null,i)),t(ssrRenderComponent(E,null,null,i)),t(ssrRenderComponent(w,null,{default:withCtx((Ce,we,fe,de)=>{if(we)we(ssrRenderComponent(k,{visible:e.switcher.sponsor,onClose:e.handleSponsorModalClose},{default:withCtx((Le,Ge,wt,Te)=>{if(Ge)Ge(`<div class="sponsor-modal" data-v-72c57406${Te}><div class="sponsor" data-v-72c57406${Te}>`),Ge(ssrRenderComponent(S,{class:"tabs",state:e.sponsorState,"hide-title":!0},null,wt,Te)),Ge(ssrRenderComponent(I,{class:"provider",state:e.sponsorState,"max-sponsors":8},null,wt,Te)),Ge("</div></div>");else return[createVNode("div",{class:"sponsor-modal"},[createVNode("div",{class:"sponsor"},[createVNode(S,{class:"tabs",state:e.sponsorState,"hide-title":!0},null,8,["state"]),createVNode(I,{class:"provider",state:e.sponsorState,"max-sponsors":8},null,8,["state"])])])]}),_:1},fe,de)),we(ssrRenderComponent(k,{visible:e.switcher.feedback,"mask-close":!1,"scroll-close":!1,onClose:e.handleFeedbackModalClose},{default:withCtx((Le,Ge,wt,Te)=>{if(Ge)Ge(ssrRenderComponent(L,{onClose:e.handleFeedbackModalClose},null,wt,Te));else return[createVNode(L,{onClose:e.handleFeedbackModalClose},null,8,["onClose"])]}),_:1},fe,de)),we(ssrRenderComponent(k,{visible:e.switcher.statement,"scroll-close":!1,onClose:e.handleStatementModalClose},{default:withCtx((Le,Ge,wt,Te)=>{if(Ge)Ge(ssrRenderComponent(D,null,null,wt,Te));else return[createVNode(D)]}),_:1},fe,de));else return[createVNode(k,{visible:e.switcher.sponsor,onClose:e.handleSponsorModalClose},{default:withCtx(()=>[createVNode("div",{class:"sponsor-modal"},[createVNode("div",{class:"sponsor"},[createVNode(S,{class:"tabs",state:e.sponsorState,"hide-title":!0},null,8,["state"]),createVNode(I,{class:"provider",state:e.sponsorState,"max-sponsors":8},null,8,["state"])])])]),_:1},8,["visible","onClose"]),createVNode(k,{visible:e.switcher.feedback,"mask-close":!1,"scroll-close":!1,onClose:e.handleFeedbackModalClose},{default:withCtx(()=>[createVNode(L,{onClose:e.handleFeedbackModalClose},null,8,["onClose"])]),_:1},8,["visible","onClose"]),createVNode(k,{visible:e.switcher.statement,"scroll-close":!1,onClose:e.handleStatementModalClose},{default:withCtx(()=>[createVNode(D)]),_:1},8,["visible","onClose"])]}),_:1},i)),e.layoutColumn.isFull?t("<!---->"):(t("<!--[-->"),t(ssrRenderComponent(O,{class:"main-share"},null,i)),t(ssrRenderComponent(V,null,null,i)),t(ssrRenderComponent(z,null,null,i)),t(ssrRenderComponent(w,null,{default:withCtx((Ce,we,fe,de)=>{if(we)we(ssrRenderComponent(U,null,null,fe,de));else return[createVNode(U)]}),_:1},i)),t("<!--]-->")),t(ssrRenderComponent(Z,null,null,i)),t(`<main${ssrRenderAttr("id",e.MAIN_ELEMENT_ID)} class="${ssrRenderClass([{"full-page":e.layoutColumn.isFull},"main-container"])}" data-v-72c57406>`),e.layoutColumn.isNormal?t(ssrRenderComponent(W,{class:"nav-view"},null,i)):t("<!---->"),e.layoutColumn.isNormal?t(ssrRenderComponent(ne,{class:"aside-view"},null,i)):t("<!---->"),t(`<div${ssrRenderAttr("id",e.MAIN_CONTENT_ELEMENT_ID)} class="${ssrRenderClass([{"layout-normal":e.layoutColumn.isNormal,"layout-wide":e.layoutColumn.isWide,"layout-full":e.layoutColumn.isFull},"main-view"])}" data-v-72c57406>`),t(ssrRenderComponent(re,null,{default:withCtx(({Component:Ce,route:we},fe,de,Le)=>{if(fe)fe(`<div class="router-view" data-v-72c57406${Le}>`),ssrRenderSuspense(fe,{default:()=>{renderVNode(fe,createVNode(resolveDynamicComponent(Ce),{key:we.name},null),de,Le)},_:2}),fe("</div>");else return[createVNode("div",{class:"router-view"},[createVNode(Transition,{name:"page",mode:"out-in",onBeforeEnter:e.handlePageTransitionDone},{default:withCtx(()=>[(openBlock(),createBlock(Suspense,null,{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(Ce),{key:we.name}))]),_:2},1024))]),_:2},1032,["onBeforeEnter"])])]}),_:1},i)),t("</div></main>"),t(ssrRenderComponent(ie,{class:"footer-view"},null,i)),t("</div>")}const _sfc_setup$5=_sfc_main$5.setup;_sfc_main$5.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/layout/desktop/main.vue"),_sfc_setup$5?_sfc_setup$5(e,t):void 0};const DesktopMain=_export_sfc(_sfc_main$5,[["ssrRender",_sfc_ssrRender$5],["__scopeId","data-v-72c57406"]]),_sfc_main$4=defineComponent({name:"MobileHeader",props:{opened:{type:Boolean,required:!0}},emits:["open","close"],setup(e,t){const{i18n:i,route:s,router:c}=useEnhancer(),d=ref(null),g=reactive({open:!1,keyword:""});onMounted(()=>{isSearchFlow(s.name)&&(g.keyword=s.params.keyword)});const r=()=>{t.emit(e.opened?"close":"open")},y=()=>{g.open=!0,nextTick$1(()=>{d.value.focus()})},E=()=>{g.open=!1},w=()=>{const k=g.keyword.trim();k&&c.push({name:RouteName.SearchFlow,params:{keyword:k}})};return watch(()=>c.currentRoute.value,()=>{nextTick$1(()=>{E(),t.emit("close")})}),{t:i.t,LanguageKey,searchState:g,inputElement:d,openSearch:y,submitSearch:w,cancelSearch:E,handleMenuToggle:r}}}),header_vue_vue_type_style_index_0_scoped_b60ccaa0_lang="";function _sfc_ssrRender$4(e,t,i,s,c,d,g,r){const y=resolveComponent("router-link"),E=resolveComponent("uimage");t(`<header${ssrRenderAttrs(mergeProps({class:"header"},s))} data-v-b60ccaa0><div class="${ssrRenderClass([{actived:e.searchState.open},"search"])}" data-v-b60ccaa0><input class="input" autocomplete="off" type="text" maxlength="16" required${ssrRenderAttr("placeholder",e.t(e.LanguageKey.SEARCH_PLACEHOLDER))}${ssrRenderAttr("value",e.searchState.keyword)} data-v-b60ccaa0><span class="close" data-v-b60ccaa0><i class="iconfont icon-cancel" data-v-b60ccaa0></i></span></div>`),e.searchState.open?t('<div class="search-mask" data-v-b60ccaa0></div>'):t("<!---->"),t('<nav class="navbar" data-v-b60ccaa0><button class="navbar-menu" data-v-b60ccaa0><i class="iconfont icon-menu" data-v-b60ccaa0></i></button>'),t(ssrRenderComponent(y,{to:"/",class:"navbar-logo"},{default:withCtx((w,k,S,I)=>{if(k)k(ssrRenderComponent(E,{class:"image",cdn:"",src:"/images/logo.svg"},null,S,I));else return[createVNode(E,{class:"image",cdn:"",src:"/images/logo.svg"})]}),_:1},i)),t('<button class="navbar-search" data-v-b60ccaa0><i class="iconfont icon-search" data-v-b60ccaa0></i></button></nav></header>')}const _sfc_setup$4=_sfc_main$4.setup;_sfc_main$4.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/layout/mobile/header.vue"),_sfc_setup$4?_sfc_setup$4(e,t):void 0};const HeaderView=_export_sfc(_sfc_main$4,[["ssrRender",_sfc_ssrRender$4],["__scopeId","data-v-b60ccaa0"]]),_sfc_main$3=defineComponent({name:"MobileFooter",setup(){return{title:META.title,year:new Date().getFullYear()}}}),footer_vue_vue_type_style_index_0_scoped_9d9db550_lang="";function _sfc_ssrRender$3(e,t,i,s,c,d,g,r){t(`<footer${ssrRenderAttrs(mergeProps({class:"footer"},s))} data-v-9d9db550><div class="footer-content" data-v-9d9db550>\xA9${ssrInterpolate(e.year)}\xA0\xA0${ssrInterpolate(e.title)}</div></footer>`)}const _sfc_setup$3=_sfc_main$3.setup;_sfc_main$3.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/layout/mobile/footer.vue"),_sfc_setup$3?_sfc_setup$3(e,t):void 0};const FooterView=_export_sfc(_sfc_main$3,[["ssrRender",_sfc_ssrRender$3],["__scopeId","data-v-9d9db550"]]),_sfc_main$2=defineComponent({name:"MobileAside",setup(){const{theme:e,i18n:t}=useEnhancer(),i=useAdminInfoStore(),s=computed(()=>{var g;return((g=i.data)==null?void 0:g.avatar)||getDefaultAvatar()}),c=computed(()=>({[Theme.Light]:"icon-sun",[Theme.Dark]:"icon-moon"})[e.theme.value]),d=computed(()=>({[Language.Chinese]:"icon-chinese",[Language.English]:"icon-english"})[t.language.value]);return useUniversalFetch(()=>i.fetch()),{VALUABLE_LINKS,LanguageKey,RouteName,CategorySlug,getPageRoute,getCategoryFlowRoute,avatar:s,author:META.author,themeIcon:c,languageIcon:d,toggleTheme:e.toggle,tooggleLanguage:t.toggle}}}),aside_vue_vue_type_style_index_0_scoped_404012b5_lang="";function _sfc_ssrRender$2(e,t,i,s,c,d,g,r){const y=resolveComponent("uimage"),E=resolveComponent("webfont"),w=resolveComponent("i18n"),k=resolveComponent("router-link"),S=resolveComponent("ulink");t(`<aside${ssrRenderAttrs(mergeProps({class:"aside"},s))} data-v-404012b5><div class="aside-user" data-v-404012b5><div class="avatar" data-v-404012b5>`),t(ssrRenderComponent(y,{src:e.avatar,alt:e.author},null,i)),t(`</div><div class="profile" data-v-404012b5><h3 class="name" data-v-404012b5>${ssrInterpolate(e.author)}</h3>`),t(ssrRenderComponent(E,{class:"slogan"},{default:withCtx((I,L,D,O)=>{if(L)L(ssrRenderComponent(w,{k:e.LanguageKey.APP_SLOGAN},null,D,O));else return[createVNode(w,{k:e.LanguageKey.APP_SLOGAN},null,8,["k"])]}),_:1},i)),t(`</div></div><div class="aside-tool" data-v-404012b5><div class="item" data-v-404012b5><i class="${ssrRenderClass([e.themeIcon,"iconfont"])}" data-v-404012b5></i></div><div class="item" data-v-404012b5><i class="${ssrRenderClass([e.languageIcon,"iconfont"])}" data-v-404012b5></i></div></div><div class="aside-nav" data-v-404012b5><nav class="nav-list" data-v-404012b5>`),t(ssrRenderComponent(k,{to:"/",class:"item"},{default:withCtx((I,L,D,O)=>{if(L)L(`<i class="iconfont icon-home-fill" data-v-404012b5${O}></i>`),L(ssrRenderComponent(E,{bolder:"",uppercase:""},{default:withCtx((V,z,U,Z)=>{if(z)z(ssrRenderComponent(w,{k:e.LanguageKey.PAGE_HOME},null,U,Z));else return[createVNode(w,{k:e.LanguageKey.PAGE_HOME},null,8,["k"])]}),_:1},D,O));else return[createVNode("i",{class:"iconfont icon-home-fill"}),createVNode(E,{bolder:"",uppercase:""},{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.PAGE_HOME},null,8,["k"])]),_:1})]}),_:1},i)),t(ssrRenderComponent(k,{class:"item",to:e.getCategoryFlowRoute(e.CategorySlug.Code)},{default:withCtx((I,L,D,O)=>{if(L)L(`<i class="iconfont icon-code" data-v-404012b5${O}></i>`),L(ssrRenderComponent(E,{bolder:"",uppercase:""},{default:withCtx((V,z,U,Z)=>{if(z)z(ssrRenderComponent(w,{k:e.LanguageKey.CATEGORY_CODE},null,U,Z));else return[createVNode(w,{k:e.LanguageKey.CATEGORY_CODE},null,8,["k"])]}),_:1},D,O));else return[createVNode("i",{class:"iconfont icon-code"}),createVNode(E,{bolder:"",uppercase:""},{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.CATEGORY_CODE},null,8,["k"])]),_:1})]}),_:1},i)),t(ssrRenderComponent(k,{class:"item",to:e.getCategoryFlowRoute(e.CategorySlug.Insight)},{default:withCtx((I,L,D,O)=>{if(L)L(`<i class="iconfont icon-insight" data-v-404012b5${O}></i>`),L(ssrRenderComponent(E,{bolder:"",uppercase:""},{default:withCtx((V,z,U,Z)=>{if(z)z(ssrRenderComponent(w,{k:e.LanguageKey.CATEGORY_INSIGHT},null,U,Z));else return[createVNode(w,{k:e.LanguageKey.CATEGORY_INSIGHT},null,8,["k"])]}),_:1},D,O));else return[createVNode("i",{class:"iconfont icon-insight"}),createVNode(E,{bolder:"",uppercase:""},{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.CATEGORY_INSIGHT},null,8,["k"])]),_:1})]}),_:1},i)),t(ssrRenderComponent(S,{class:"item",href:e.VALUABLE_LINKS.GITHUB},{default:withCtx((I,L,D,O)=>{if(L)L(`<i class="iconfont icon-github" data-v-404012b5${O}></i>`),L(ssrRenderComponent(E,{bolder:"",uppercase:""},{default:withCtx((V,z,U,Z)=>{if(z)z(ssrRenderComponent(w,{k:e.LanguageKey.PAGE_GITHUB},null,U,Z));else return[createVNode(w,{k:e.LanguageKey.PAGE_GITHUB},null,8,["k"])]}),_:1},D,O)),L(`<span class="newscript" data-v-404012b5${O}><i class="iconfont icon-new-window-s" data-v-404012b5${O}></i></span>`);else return[createVNode("i",{class:"iconfont icon-github"}),createVNode(E,{bolder:"",uppercase:""},{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.PAGE_GITHUB},null,8,["k"])]),_:1}),createVNode("span",{class:"newscript"},[createVNode("i",{class:"iconfont icon-new-window-s"})])]}),_:1},i)),t(ssrRenderComponent(k,{class:"item",to:e.getPageRoute(e.RouteName.Archive)},{default:withCtx((I,L,D,O)=>{if(L)L(`<i class="iconfont icon-quill" data-v-404012b5${O}></i>`),L(ssrRenderComponent(E,{bolder:"",uppercase:""},{default:withCtx((V,z,U,Z)=>{if(z)z(ssrRenderComponent(w,{k:e.LanguageKey.PAGE_ARCHIVE},null,U,Z));else return[createVNode(w,{k:e.LanguageKey.PAGE_ARCHIVE},null,8,["k"])]}),_:1},D,O));else return[createVNode("i",{class:"iconfont icon-quill"}),createVNode(E,{bolder:"",uppercase:""},{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.PAGE_ARCHIVE},null,8,["k"])]),_:1})]}),_:1},i)),t(ssrRenderComponent(k,{class:"item",to:e.getPageRoute(e.RouteName.About)},{default:withCtx((I,L,D,O)=>{if(L)L(`<i class="iconfont icon-swordsman" data-v-404012b5${O}></i>`),L(ssrRenderComponent(E,{bolder:"",uppercase:""},{default:withCtx((V,z,U,Z)=>{if(z)z(ssrRenderComponent(w,{k:e.LanguageKey.PAGE_ABOUT},null,U,Z));else return[createVNode(w,{k:e.LanguageKey.PAGE_ABOUT},null,8,["k"])]}),_:1},D,O));else return[createVNode("i",{class:"iconfont icon-swordsman"}),createVNode(E,{bolder:"",uppercase:""},{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.PAGE_ABOUT},null,8,["k"])]),_:1})]}),_:1},i)),t(ssrRenderComponent(k,{class:"item guestbook",to:e.getPageRoute(e.RouteName.Guestbook)},{default:withCtx((I,L,D,O)=>{if(L)L(`<i class="iconfont icon-comment" data-v-404012b5${O}></i>`),L(ssrRenderComponent(E,{bolder:"",uppercase:""},{default:withCtx((V,z,U,Z)=>{if(z)z(ssrRenderComponent(w,{k:e.LanguageKey.PAGE_GUESTBOOK},null,U,Z));else return[createVNode(w,{k:e.LanguageKey.PAGE_GUESTBOOK},null,8,["k"])]}),_:1},D,O));else return[createVNode("i",{class:"iconfont icon-comment"}),createVNode(E,{bolder:"",uppercase:""},{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.PAGE_GUESTBOOK},null,8,["k"])]),_:1})]}),_:1},i)),t(ssrRenderComponent(k,{class:"item app",to:e.getPageRoute(e.RouteName.App)},{default:withCtx((I,L,D,O)=>{if(L)L(ssrRenderComponent(y,{cdn:"",class:"icon",src:"/images/page-app/logo.png"},null,D,O)),L(ssrRenderComponent(E,{bolder:"",uppercase:""},{default:withCtx((V,z,U,Z)=>{if(z)z(ssrRenderComponent(w,{k:e.LanguageKey.PAGE_APP},null,U,Z));else return[createVNode(w,{k:e.LanguageKey.PAGE_APP},null,8,["k"])]}),_:1},D,O));else return[createVNode(y,{cdn:"",class:"icon",src:"/images/page-app/logo.png"}),createVNode(E,{bolder:"",uppercase:""},{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.PAGE_APP},null,8,["k"])]),_:1})]}),_:1},i)),t("</nav></div></aside>")}const _sfc_setup$2=_sfc_main$2.setup;_sfc_main$2.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/layout/mobile/aside.vue"),_sfc_setup$2?_sfc_setup$2(e,t):void 0};const AsideView=_export_sfc(_sfc_main$2,[["ssrRender",_sfc_ssrRender$2],["__scopeId","data-v-404012b5"]]),_sfc_main$1=defineComponent({name:"MobileMain",components:{HeaderView,FooterView,AsideView},setup(){const{route:e}=useEnhancer(),t=computed(()=>getPageURL(e.fullPath)),i=ref(!1),s=()=>i.value=!0,c=()=>i.value=!1;return watch(i,d=>{}),{pageURL:t,isOpenedAside:i,openAside:s,closeAside:c}}}),main_vue_vue_type_style_index_0_scoped_b85511b5_lang="";function _sfc_ssrRender$1(e,t,i,s,c,d,g,r){const y=resolveComponent("aside-view"),E=resolveComponent("header-view"),w=resolveComponent("router-view"),k=resolveComponent("i18n"),S=resolveComponent("footer-view");t(`<div${ssrRenderAttrs(mergeProps({class:"mobile-main"},s))} data-v-b85511b5><div class="${ssrRenderClass([{opened:e.isOpenedAside},"asider"])}" data-v-b85511b5>`),t(ssrRenderComponent(y,{class:"aside"},null,i)),t(`</div><div class="${ssrRenderClass([{opened:e.isOpenedAside},"main"])}" data-v-b85511b5>`),e.isOpenedAside?t('<div class="close-mask" data-v-b85511b5></div>'):t("<!---->"),t(ssrRenderComponent(E,{opened:e.isOpenedAside,onClose:e.closeAside,onOpen:e.openAside},null,i)),t('<main class="main-container" data-v-b85511b5>'),t(ssrRenderComponent(w,{name:"mobile"},{default:withCtx(({Component:I,route:L},D,O,V)=>{if(D)L.meta.responsive?(D(`<div class="route-view" data-v-b85511b5${V}>`),renderVNode(D,createVNode(resolveDynamicComponent(I),{key:L.name},null),O,V),D("</div>")):(D(`<div class="fallback" data-v-b85511b5${V}><i class="iconfont icon-desktop" data-v-b85511b5${V}></i><p class="text" data-v-b85511b5${V}>`),D(ssrRenderComponent(k,{zh:"\u8BF7\u5728 PC \u7AEF\u8BBF\u95EE\u4EE5\u83B7\u5F97\u6700\u4F73\u4F53\u9A8C",en:"This page only support visit on PC"},null,O,V)),D(`</p><a class="link"${ssrRenderAttr("href",e.pageURL)} data-v-b85511b5${V}>${ssrInterpolate(e.pageURL)}</a></div>`));else return[L.meta.responsive?(openBlock(),createBlock("div",{key:0,class:"route-view"},[(openBlock(),createBlock(resolveDynamicComponent(I),{key:L.name}))])):(openBlock(),createBlock("div",{key:1,class:"fallback"},[createVNode("i",{class:"iconfont icon-desktop"}),createVNode("p",{class:"text"},[createVNode(k,{zh:"\u8BF7\u5728 PC \u7AEF\u8BBF\u95EE\u4EE5\u83B7\u5F97\u6700\u4F73\u4F53\u9A8C",en:"This page only support visit on PC"})]),createVNode("a",{class:"link",href:e.pageURL},toDisplayString(e.pageURL),9,["href"])]))]}),_:1},i)),t("</main>"),t(ssrRenderComponent(S,null,null,i)),t("</div></div>")}const _sfc_setup$1=_sfc_main$1.setup;_sfc_main$1.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/components/layout/mobile/main.vue"),_sfc_setup$1?_sfc_setup$1(e,t):void 0};const MobileMain=_export_sfc(_sfc_main$1,[["ssrRender",_sfc_ssrRender$1],["__scopeId","data-v-b85511b5"]]),_sfc_main=defineComponent({name:"App",components:{EmojiRain,Captured,DesktopMain,MobileMain},setup(){const{isMobile:e}=useEnhancer();return{isMobile:e}}}),index_vue_vue_type_style_index_0_lang="";function _sfc_ssrRender(e,t,i,s,c,d,g,r){const y=resolveComponent("client-only"),E=resolveComponent("progress-bar"),w=resolveComponent("emoji-rain"),k=resolveComponent("popup-root"),S=resolveComponent("captured"),I=resolveComponent("responsive"),L=resolveComponent("desktop-main"),D=resolveComponent("mobile-main");t(`<div${ssrRenderAttrs(mergeProps({class:"app-root"},s))}>`),t(ssrRenderComponent(y,null,{default:withCtx((O,V,z,U)=>{if(V)V(ssrRenderComponent(E,{spin:!e.isMobile},null,z,U)),V(ssrRenderComponent(w,null,null,z,U)),V(ssrRenderComponent(k,null,null,z,U));else return[createVNode(E,{spin:!e.isMobile},null,8,["spin"]),createVNode(w),createVNode(k)]}),_:1},i)),t(ssrRenderComponent(S,null,{default:withCtx((O,V,z,U)=>{if(V)V(ssrRenderComponent(I,null,{desktop:withCtx((Z,W,ne,re)=>{if(W)W(ssrRenderComponent(L,null,null,ne,re));else return[createVNode(L)]}),mobile:withCtx((Z,W,ne,re)=>{if(W)W(ssrRenderComponent(D,null,null,ne,re));else return[createVNode(D)]}),_:1},z,U));else return[createVNode(I,null,{desktop:withCtx(()=>[createVNode(L)]),mobile:withCtx(()=>[createVNode(D)]),_:1})]}),_:1},i)),t("</div>")}const _sfc_setup=_sfc_main.setup;_sfc_main.setup=(e,t)=>{const i=useSSRContext();return(i.modules||(i.modules=new Set)).add("src/app/index.vue"),_sfc_setup?_sfc_setup(e,t):void 0};const App=_export_sfc(_sfc_main,[["ssrRender",_sfc_ssrRender]]);console.info("[APP INITED]:",{NODE_ENV,mode:isSSR?"SSR":"SPA"},API_CONFIG);const createVueApp=e=>{var y,E,w;const t=e.appCreator(App);rebirthSSRContext(t);const i=createGlobalState({userAgent:e.userAgent||"",language:e.language||"",layout:(y=e.layout)!=null?y:LayoutColumn.Normal}),s=createUniversalStore({globalState:i}),c=createUniversalRouter({beforeMiddleware:(E=e.routerBeforeMiddleware)==null?void 0:E.call(e,i),afterMiddleware:(w=e.routerAfterMiddleware)==null?void 0:w.call(e,i),history:e.historyCreator()}),d=createMeta({titler:k=>`${k} | ${META.title}`}),g=createTheme(e.theme),r=createI18n({default:i.userAgent.isZhUser?Language.Chinese:Language.English,keys:Object.values(LanguageKey),languages:languages$1});return d.addHeadObjs(computed(()=>({htmlAttrs:{"data-theme":g.theme.value,"data-device":i.userAgent.isMobile?"mobile":"desktop"}}))),t.config.errorHandler=k=>i.setRenderError(k),c.onError(i.setRenderError),c.beforeEach((k,S,I)=>{k.meta.validate?k.meta.validate({route:k,i18n:r,store:s}).then(I).catch(L=>{const D=new Error;D.code=L.code,D.message=L.message,I(D)}):I()}),t.use(c),t.use(s),t.use(i),t.use(r),t.use(d),t.use(g),t.use(component),{app:t,router:c,store:s,globalState:i,i18n:r,meta:d,theme:g,component}},devDebug=(...e)=>isDev&&console.debug("-",...e),getCacheKey=(e,t)=>{const{i18n:i,theme:s,globalState:c}=e,d=i.language.value,g=s.theme.value,r=c.userAgent.isMobile?"mobile":"desktop";return`ssr_${d}_${r}_${g}_${t}`},createApp=e=>{const{headers:t}=e,i=createVueApp({appCreator:createSSRApp,historyCreator:vueRouter_prod.createMemoryHistory,language:t["accept-language"],userAgent:t["user-agent"],theme:e.cookies[THEME_STORAGE_KEY]||Theme.Light}),s=["lozad"],c=["progress-bar","popup-root","popup","Adsense"];return s.forEach(d=>i.app.directive(d,{})),c.forEach(d=>i.app.component(d,{})),i},renderScripts=e=>{const t=renderSSRSymbleScript();return[renderSSRContextScript(serializeJavascript(e)),t].join(`
`)},renderHTML=async(e,t)=>{devDebug(`renderHTML: ${t}`);const{app:i,router:s,store:c,meta:d,theme:g,globalState:r}=e;devDebug("1. route.push.validate"),await s.push(t),await s.isReady(),devDebug("2. store.serverInit"),await c.serverPrefetch(),devDebug("3. set layout"),r.setLayoutColumn(getLayoutByRouteMeta(s.currentRoute.value.meta)),devDebug("4. renderToString");const E=await renderToString(i,{});if(r.renderError.value){const S=new Error(r.renderError.value.message);throw S.code=r.renderError.value.code,S}devDebug("5. renderMetaString");const w=await d.renderToString();devDebug("6. HTML & SSR context script");const k=renderScripts({metas:w,url:t,layout:r.layoutColumn.value.layout,theme:g.theme.value,store:c.state.value,...getSSRContextByApp(i)});return{html:E,metas:w,scripts:k}},renderError=async(e,t)=>{var g;const{app:i,meta:s,globalState:c,theme:d}=createApp(e);return c.setRenderError(t),s.addHeadObjs(ref({title:`Server Error: ${t.message||String(t)||"unknow"}`})),{code:(g=t.code)!=null?g:INVALID_ERROR,html:await renderToString(i),metas:await s.renderToString(),scripts:renderScripts({theme:d.theme.value,...getSSRContextByApp(i)})}},renderApp=async(e,t)=>{var r;const i=createApp(e),{originalUrl:s}=e,c=200,d=getCacheKey(i,s),g=await t.has(d);if(devDebug("cache key:",d,g),g)return{...await t.get(d),code:c};try{const y=await renderHTML(i,s),E=(r=i.router.currentRoute.value.meta)==null?void 0:r.ssrCacheAge;return E!==!1&&typeof E=="number"&&E>0&&(E===1/0?t.set(d,y):t.set(d,y,E)),{code:c,...y}}catch(y){return renderError(e,y)}};var mapboxGl$2={exports:{}};(function(e,t){(function(i,s){e.exports=s()})(commonjsGlobal,function(){var i,s,c;function d(r,y){if(!i)i=y;else if(!s)s=y;else{var E="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+i+")(sharedChunk); ("+s+")(sharedChunk); self.onerror = null;",w={};i(w),c=y(w),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(c.workerUrl=window.URL.createObjectURL(new Blob([E],{type:"text/javascript"})))}}d(["exports"],function(r){var y=typeof self<"u"?self:{},E=w;function w(a,n,l,u){this.cx=3*a,this.bx=3*(l-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(u-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=u,this.p2x=l,this.p2y=u}w.prototype.sampleCurveX=function(a){return((this.ax*a+this.bx)*a+this.cx)*a},w.prototype.sampleCurveY=function(a){return((this.ay*a+this.by)*a+this.cy)*a},w.prototype.sampleCurveDerivativeX=function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},w.prototype.solveCurveX=function(a,n){var l,u,m,v,x;for(n===void 0&&(n=1e-6),m=a,x=0;x<8;x++){if(v=this.sampleCurveX(m)-a,Math.abs(v)<n)return m;var R=this.sampleCurveDerivativeX(m);if(Math.abs(R)<1e-6)break;m-=v/R}if((m=a)<(l=0))return l;if(m>(u=1))return u;for(;l<u;){if(v=this.sampleCurveX(m),Math.abs(v-a)<n)return m;a>v?l=m:u=m,m=.5*(u-l)+l}return m},w.prototype.solve=function(a,n){return this.sampleCurveY(this.solveCurveX(a,n))};var k=S;function S(a,n){this.x=a,this.y=n}S.prototype={clone:function(){return new S(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,n){return this.clone()._rotateAround(a,n)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var n=a.x-this.x,l=a.y-this.y;return n*n+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,n){return Math.atan2(this.x*n-this.y*a,this.x*a+this.y*n)},_matMult:function(a){var n=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=n,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var n=Math.cos(a),l=Math.sin(a),u=l*this.x+n*this.y;return this.x=n*this.x-l*this.y,this.y=u,this},_rotateAround:function(a,n){var l=Math.cos(a),u=Math.sin(a),m=n.y+u*(this.x-n.x)+l*(this.y-n.y);return this.x=n.x+l*(this.x-n.x)-u*(this.y-n.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},S.convert=function(a){return a instanceof S?a:Array.isArray(a)?new S(a[0],a[1]):a};const I=Math.PI/180,L=180/Math.PI;function D(a){return a*I}function O(a){return a*L}const V=[[0,0],[1,0],[1,1],[0,1]];function z(a){if(a<=0)return 0;if(a>=1)return 1;const n=a*a,l=n*a;return 4*(a<.5?l:3*(a-n)+l-.75)}function U(a,n,l,u){const m=new E(a,n,l,u);return function(v){return m.solve(v)}}const Z=U(.25,.1,.25,1);function W(a,n,l){return Math.min(l,Math.max(n,a))}function ne(a,n,l){return(l=W((l-a)/(n-a),0,1))*l*(3-2*l)}function re(a,n,l){const u=l-n,m=((a-n)%u+u)%u+n;return m===n?l:m}function ie(a,n,l){if(!a.length)return l(null,[]);let u=a.length;const m=new Array(a.length);let v=null;a.forEach((x,R)=>{n(x,(N,P)=>{N&&(v=N),m[R]=P,--u==0&&l(v,m)})})}function Ce(a){const n=[];for(const l in a)n.push(a[l]);return n}function we(a,...n){for(const l of n)for(const u in l)a[u]=l[u];return a}let fe=1;function de(){return fe++}function Le(){return function a(n){return n?(n^Math.random()*(16>>n/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,a)}()}function Ge(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function wt(a){return!!a&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(a)}function Te(a,n){a.forEach(l=>{n[l]&&(n[l]=n[l].bind(n))})}function ze(a,n){return a.indexOf(n,a.length-n.length)!==-1}function Ke(a,n,l){const u={};for(const m in a)u[m]=n.call(l||this,a[m],m,a);return u}function ut(a,n,l){const u={};for(const m in a)n.call(l||this,a[m],m,a)&&(u[m]=a[m]);return u}function Nt(a){return Array.isArray(a)?a.map(Nt):typeof a=="object"&&a?Ke(a,Nt):a}const an={};function un(a){an[a]||(typeof console<"u"&&console.warn(a),an[a]=!0)}function wn(a,n,l){return(l.y-a.y)*(n.x-a.x)>(n.y-a.y)*(l.x-a.x)}function An(a){let n=0;for(let l,u,m=0,v=a.length,x=v-1;m<v;x=m++)l=a[m],u=a[x],n+=(u.x-l.x)*(l.y+u.y);return n}function kn(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function En(a){const n={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,u,m,v)=>{const x=m||v;return n[u]=!x||x.toLowerCase(),""}),n["max-age"]){const l=parseInt(n["max-age"],10);isNaN(l)?delete n["max-age"]:n["max-age"]=l}return n}let Vn=null;function ni(a){if(Vn==null){const n=a.navigator?a.navigator.userAgent:null;Vn=!!a.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Vn}function Xn(a){try{const n=y[a];return n.setItem("_mapbox_test_",1),n.removeItem("_mapbox_test_"),!0}catch{return!1}}function Ln(a,n){return[a[4*n],a[4*n+1],a[4*n+2],a[4*n+3]]}const gi=y.performance;function yi(a){const n=a?a.url.toString():void 0;return gi.getEntriesByName(n)}var Ei="2.9.2";let ve,Ve,pt,Ze;const mt={now:()=>pt!==void 0?pt:y.performance.now(),setNow(a){pt=a},restoreNow(){pt=void 0},frame(a){const n=y.requestAnimationFrame(a);return{cancel:()=>y.cancelAnimationFrame(n)}},getImageData(a,n=0){const{width:l,height:u}=a;Ze||(Ze=y.document.createElement("canvas"));const m=Ze.getContext("2d");if(!m)throw new Error("failed to create canvas 2d context");return(l>Ze.width||u>Ze.height)&&(Ze.width=l,Ze.height=u),m.clearRect(-n,-n,l+2*n,u+2*n),m.drawImage(a,0,0,l,u),m.getImageData(-n,-n,l+2*n,u+2*n)},resolveURL:a=>(ve||(ve=y.document.createElement("a")),ve.href=a,ve.href),get devicePixelRatio(){return y.devicePixelRatio},get prefersReducedMotion(){return!!y.matchMedia&&(Ve==null&&(Ve=y.matchMedia("(prefers-reduced-motion: reduce)")),Ve.matches)}};let Qe;const Ue={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(Qe==null){const a=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{Qe=process.env.API_URL_REGEX!=null?new RegExp(process.env.API_URL_REGEX):a}catch{Qe=a}}return Qe},get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},vt={supported:!1,testSupport:function(a){!Tt&&ct&&(tt?st(a):dt=a)}};let dt,ct,Tt=!1,tt=!1;function st(a){const n=a.createTexture();a.bindTexture(a.TEXTURE_2D,n);try{if(a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,ct),a.isContextLost())return;vt.supported=!0}catch{}a.deleteTexture(n),Tt=!0}y.document&&(ct=y.document.createElement("img"),ct.onload=function(){dt&&st(dt),dt=null,tt=!0},ct.onerror=function(){Tt=!0,dt=null},ct.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Et="01",It="NO_ACCESS_TOKEN";function dn(a){return a.indexOf("mapbox:")===0}function gn(a){return Ue.API_URL_REGEX.test(a)}const Un=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function oi(a){const n=a.match(Un);if(!n)throw new Error("Unable to parse URL object");return{protocol:n[1],authority:n[2],path:n[3]||"/",params:n[4]?n[4].split("&"):[]}}function Ui(a){const n=a.params.length?`?${a.params.join("&")}`:"";return`${a.protocol}://${a.authority}${a.path}${n}`}function Wr(a){if(!a)return null;const n=a.split(".");if(!n||n.length!==3)return null;try{return JSON.parse(decodeURIComponent(y.atob(n[1]).split("").map(l=>"%"+("00"+l.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class fr{constructor(n){this.type=n,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(n){const l=Wr(Ue.ACCESS_TOKEN);let u="";return u=l&&l.u?y.btoa(encodeURIComponent(l.u).replace(/%([0-9A-F]{2})/g,(m,v)=>String.fromCharCode(Number("0x"+v)))):Ue.ACCESS_TOKEN||"",n?`mapbox.eventData.${n}:${u}`:`mapbox.eventData:${u}`}fetchEventData(){const n=Xn("localStorage"),l=this.getStorageKey(),u=this.getStorageKey("uuid");if(n)try{const m=y.localStorage.getItem(l);m&&(this.eventData=JSON.parse(m));const v=y.localStorage.getItem(u);v&&(this.anonId=v)}catch{un("Unable to read from LocalStorage")}}saveEventData(){const n=Xn("localStorage"),l=this.getStorageKey(),u=this.getStorageKey("uuid");if(n)try{y.localStorage.setItem(u,this.anonId),Object.keys(this.eventData).length>=1&&y.localStorage.setItem(l,JSON.stringify(this.eventData))}catch{un("Unable to write to LocalStorage")}}processRequests(n){}postEvent(n,l,u,m){if(!Ue.EVENTS_URL)return;const v=oi(Ue.EVENTS_URL);v.params.push(`access_token=${m||Ue.ACCESS_TOKEN||""}`);const x={event:this.type,created:new Date(n).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:Ei,skuId:Et,userId:this.anonId},R=l?we(x,l):x,N={url:Ui(v),headers:{"Content-Type":"text/plain"},body:JSON.stringify([R])};this.pendingRequest=Xe(N,P=>{this.pendingRequest=null,u(P),this.saveEventData(),this.processRequests(m)})}queueRequest(n,l){this.queue.push(n),this.processRequests(l)}}const Dr=new class extends fr{constructor(a){super("appUserTurnstile"),this._customAccessToken=a}postTurnstileEvent(a,n){Ue.EVENTS_URL&&Ue.ACCESS_TOKEN&&Array.isArray(a)&&a.some(l=>dn(l)||gn(l))&&this.queueRequest(Date.now(),n)}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const n=Wr(Ue.ACCESS_TOKEN),l=n?n.u:Ue.ACCESS_TOKEN;let u=l!==this.eventData.tokenU;wt(this.anonId)||(this.anonId=Le(),u=!0);const m=this.queue.shift();if(this.eventData.lastSuccess){const v=new Date(this.eventData.lastSuccess),x=new Date(m),R=(m-this.eventData.lastSuccess)/864e5;u=u||R>=1||R<-1||v.getDate()!==x.getDate()}else u=!0;u?this.postEvent(m,{"enabled.telemetry":!1},v=>{v||(this.eventData.lastSuccess=m,this.eventData.tokenU=l)},a):this.processRequests()}},Ti=Dr.postTurnstileEvent.bind(Dr),ji=new class extends fr{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(a,n,l,u){this.skuToken=n,this.errorCb=u,Ue.EVENTS_URL&&(l||Ue.ACCESS_TOKEN?this.queueRequest({id:a,timestamp:Date.now()},l):this.errorCb(new Error(It)))}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;const{id:n,timestamp:l}=this.queue.shift();n&&this.success[n]||(this.anonId||this.fetchEventData(),wt(this.anonId)||(this.anonId=Le()),this.postEvent(l,{skuToken:this.skuToken},u=>{u?this.errorCb(u):n&&(this.success[n]=!0)},a))}},Zr=ji.postMapLoadEvent.bind(ji),wo=new class extends fr{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(a,n,l,u){if(!Ue.API_URL||!Ue.SESSION_PATH)return;const m=oi(Ue.API_URL+Ue.SESSION_PATH);m.params.push(`sku=${n||""}`),m.params.push(`access_token=${u||Ue.ACCESS_TOKEN||""}`);const v={url:Ui(m),headers:{"Content-Type":"text/plain"}};this.pendingRequest=xt(v,x=>{this.pendingRequest=null,l(x),this.saveEventData(),this.processRequests(u)})}getSessionAPI(a,n,l,u){this.skuToken=n,this.errorCb=u,Ue.SESSION_PATH&&Ue.API_URL&&(l||Ue.ACCESS_TOKEN?this.queueRequest({id:a,timestamp:Date.now()},l):this.errorCb(new Error(It)))}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;const{id:n,timestamp:l}=this.queue.shift();n&&this.success[n]||this.getSession(l,this.skuToken,u=>{u?this.errorCb(u):n&&(this.success[n]=!0)},a)}},bs=wo.getSessionAPI.bind(wo),Rr=new Set;let $r,Yr=500,Uo=50,Gi={};function Eo(a){const n=ee(a);let l,u;n&&n.forEach(v=>{const x=v.split("=");x[0]==="language"?l=x[1]:x[0]==="worldview"&&(u=x[1])});let m="mapbox-tiles";return l&&(m+=`-${l}`),u&&(m+=`-${u}`),m}function ye(a){y.caches&&!Gi[a]&&(Gi[a]=y.caches.open(a))}function ee(a){const n=a.indexOf("?");return n>0?a.slice(n+1).split("&"):[]}function oe(a){const n=a.indexOf("?");if(n<0)return a;const l=ee(a).filter(u=>{const m=u.split("=");return m[0]==="language"||m[0]==="worldview"});return l.length?`${a.slice(0,n)}?${l.join("&")}`:a.slice(0,n)}let be=1/0;const ke={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ke);class Oe extends Error{constructor(n,l,u){l===401&&gn(u)&&(n+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(n),this.status=l,this.url=u}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Ye=kn()?()=>self.worker&&self.worker.referrer:()=>(y.location.protocol==="blob:"?y.parent:y).location.href,We=function(a,n){if(!(/^file:/.test(l=a.url)||/^file:/.test(Ye())&&!/^\w+:/.test(l))){if(y.fetch&&y.Request&&y.AbortController&&y.Request.prototype.hasOwnProperty("signal"))return function(u,m){const v=new y.AbortController,x=new y.Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:Ye(),signal:v.signal});let R=!1,N=!1;const P=(G=x.url).indexOf("sku=")>0&&gn(G);var G;u.type==="json"&&x.headers.set("Accept","application/json");const H=(X,Q,se)=>{if(N)return;if(X&&X.message!=="SecurityError"&&un(X),Q&&se)return K(Q);const he=Date.now();y.fetch(x).then(xe=>{if(xe.ok){const Ie=P?xe.clone():null;return K(xe,Ie,he)}return m(new Oe(xe.statusText,xe.status,u.url))}).catch(xe=>{xe.code!==20&&m(new Error(xe.message))})},K=(X,Q,se)=>{(u.type==="arrayBuffer"?X.arrayBuffer():u.type==="json"?X.json():X.text()).then(he=>{N||(Q&&se&&function(xe,Ie,Me){const Pe=Eo(xe.url);if(ye(Pe),!Gi[Pe])return;const Fe={status:Ie.status,statusText:Ie.statusText,headers:new y.Headers};Ie.headers.forEach((lt,_t)=>Fe.headers.set(_t,lt));const je=En(Ie.headers.get("Cache-Control")||"");if(je["no-store"])return;je["max-age"]&&Fe.headers.set("Expires",new Date(Me+1e3*je["max-age"]).toUTCString());const ot=Fe.headers.get("Expires");ot&&(new Date(ot).getTime()-Me<42e4||function(lt,_t){if($r===void 0)try{new Response(new ReadableStream),$r=!0}catch{$r=!1}$r?_t(lt.body):lt.blob().then(_t)}(Ie,lt=>{const _t=new y.Response(lt,Fe);ye(Pe),Gi[Pe]&&Gi[Pe].then(kt=>kt.put(oe(xe.url),_t)).catch(kt=>un(kt.message))}))}(x,Q,se),R=!0,m(null,he,X.headers.get("Cache-Control"),X.headers.get("Expires")))}).catch(he=>{N||m(new Error(he.message))})};return P?function(X,Q){const se=Eo(X.url);if(ye(se),!Gi[se])return Q(null);const he=oe(X.url);Gi[se].then(xe=>{xe.match(he).then(Ie=>{const Me=function(Pe){if(!Pe)return!1;const Fe=new Date(Pe.headers.get("Expires")||0),je=En(Pe.headers.get("Cache-Control")||"");return Fe>Date.now()&&!je["no-cache"]}(Ie);xe.delete(he),Me&&xe.put(he,Ie.clone()),Q(null,Ie,Me)}).catch(Q)}).catch(Q)}(x,H):H(null,null),{cancel:()=>{N=!0,R||v.abort()}}}(a,n);if(kn()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,n,void 0,!0)}var l;return function(u,m){const v=new y.XMLHttpRequest;v.open(u.method||"GET",u.url,!0),u.type==="arrayBuffer"&&(v.responseType="arraybuffer");for(const x in u.headers)v.setRequestHeader(x,u.headers[x]);return u.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=u.credentials==="include",v.onerror=()=>{m(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let x=v.response;if(u.type==="json")try{x=JSON.parse(v.response)}catch(R){return m(R)}m(null,x,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else m(new Oe(v.statusText,v.status,u.url))},v.send(u.body),{cancel:()=>v.abort()}}(a,n)},Be=function(a,n){return We(we(a,{type:"arrayBuffer"}),n)},Xe=function(a,n){return We(we(a,{method:"POST"}),n)},xt=function(a,n){return We(we(a,{method:"GET"}),n)};function jt(a){const n=y.document.createElement("a");return n.href=a,n.protocol===y.document.location.protocol&&n.host===y.document.location.host}const Ct="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let tn,pn;tn=[],pn=0;const ln=function(a,n){if(vt.supported&&(a.headers||(a.headers={}),a.headers.accept="image/webp,*/*"),pn>=Ue.MAX_PARALLEL_IMAGE_REQUESTS){const v={requestParameters:a,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return tn.push(v),v}pn++;let l=!1;const u=()=>{if(!l)for(l=!0,pn--;tn.length&&pn<Ue.MAX_PARALLEL_IMAGE_REQUESTS;){const v=tn.shift(),{requestParameters:x,callback:R,cancelled:N}=v;N||(v.cancel=ln(x,R).cancel)}},m=Be(a,(v,x,R,N)=>{u(),v?n(v):x&&(y.createImageBitmap?function(P,G){const H=new y.Blob([new Uint8Array(P)],{type:"image/png"});y.createImageBitmap(H).then(K=>{G(null,K)}).catch(K=>{G(new Error(`Could not load image because of ${K.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(x,(P,G)=>n(P,G,R,N)):function(P,G){const H=new y.Image,K=y.URL;H.onload=()=>{G(null,H),K.revokeObjectURL(H.src),H.onload=null,y.requestAnimationFrame(()=>{H.src=Ct})},H.onerror=()=>G(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const X=new y.Blob([new Uint8Array(P)],{type:"image/png"});H.src=P.byteLength?K.createObjectURL(X):Ct}(x,(P,G)=>n(P,G,R,N)))});return{cancel:()=>{m.cancel(),u()}}};function _n(a,n,l){l[a]&&l[a].indexOf(n)!==-1||(l[a]=l[a]||[],l[a].push(n))}function bn(a,n,l){if(l&&l[a]){const u=l[a].indexOf(n);u!==-1&&l[a].splice(u,1)}}class Bn{constructor(n,l={}){we(this,l),this.type=n}}class ui extends Bn{constructor(n,l={}){super("error",we({error:n},l))}}class Jn{on(n,l){return this._listeners=this._listeners||{},_n(n,l,this._listeners),this}off(n,l){return bn(n,l,this._listeners),bn(n,l,this._oneTimeListeners),this}once(n,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},_n(n,l,this._oneTimeListeners),this):new Promise(u=>this.once(n,u))}fire(n,l){typeof n=="string"&&(n=new Bn(n,l||{}));const u=n.type;if(this.listens(u)){n.target=this;const m=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const R of m)R.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const R of v)bn(u,R,this._oneTimeListeners),R.call(this,n);const x=this._eventedParent;x&&(we(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof ui&&console.error(n.error);return this}listens(n){return!!(this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n))}setEventedParent(n,l){return this._eventedParent=n,this._eventedParentData=l,this}}var qe=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":true,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"cross-faded"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"cross-faded":{"type":"property-type"},"cross-faded-data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function rr(a,...n){for(const l of n)for(const u in l)a[u]=l[u];return a}function mi(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function or(a){if(Array.isArray(a))return a.map(or);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const n={};for(const l in a)n[l]=or(a[l]);return n}return mi(a)}class Ja extends Error{constructor(n,l){super(l),this.message=l,this.key=n}}var Yi=Ja;class Co{constructor(n,l=[]){this.parent=n,this.bindings={};for(const[u,m]of l)this.bindings[u]=m}concat(n){return new Co(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}var Qs=Co;const so={kind:"null"},qt={kind:"number"},On={kind:"string"},xn={kind:"boolean"},hr={kind:"color"},Xr={kind:"object"},Cn={kind:"value"},me={kind:"collator"},Ne={kind:"formatted"},He={kind:"resolvedImage"};function rt(a,n){return{kind:"array",itemType:a,N:n}}function ft(a){if(a.kind==="array"){const n=ft(a.itemType);return typeof a.N=="number"?`array<${n}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${n}>`}return a.kind}const Ut=[so,qt,On,xn,hr,Ne,Xr,rt(Cn),He];function Jt(a,n){if(n.kind==="error")return null;if(a.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!Jt(a.itemType,n.itemType))&&(typeof a.N!="number"||a.N===n.N))return null}else{if(a.kind===n.kind)return null;if(a.kind==="value"){for(const l of Ut)if(!Jt(l,n))return null}}return`Expected ${ft(a)} but found ${ft(n)} instead.`}function Xt(a,n){return n.some(l=>l.kind===a.kind)}function Dt(a,n){return n.some(l=>l==="null"?a===null:l==="array"?Array.isArray(a):l==="object"?a&&!Array.isArray(a)&&typeof a=="object":l===typeof a)}function Ht(a){var n={exports:{}};return a(n,n.exports),n.exports}var At=Ht(function(a,n){var l={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function u(R){return(R=Math.round(R))<0?0:R>255?255:R}function m(R){return u(R[R.length-1]==="%"?parseFloat(R)/100*255:parseInt(R))}function v(R){return(N=R[R.length-1]==="%"?parseFloat(R)/100:parseFloat(R))<0?0:N>1?1:N;var N}function x(R,N,P){return P<0?P+=1:P>1&&(P-=1),6*P<1?R+(N-R)*P*6:2*P<1?N:3*P<2?R+(N-R)*(2/3-P)*6:R}try{n.parseCSSColor=function(R){var N,P=R.replace(/ /g,"").toLowerCase();if(P in l)return l[P].slice();if(P[0]==="#")return P.length===4?(N=parseInt(P.substr(1),16))>=0&&N<=4095?[(3840&N)>>4|(3840&N)>>8,240&N|(240&N)>>4,15&N|(15&N)<<4,1]:null:P.length===7&&(N=parseInt(P.substr(1),16))>=0&&N<=16777215?[(16711680&N)>>16,(65280&N)>>8,255&N,1]:null;var G=P.indexOf("("),H=P.indexOf(")");if(G!==-1&&H+1===P.length){var K=P.substr(0,G),X=P.substr(G+1,H-(G+1)).split(","),Q=1;switch(K){case"rgba":if(X.length!==4)return null;Q=v(X.pop());case"rgb":return X.length!==3?null:[m(X[0]),m(X[1]),m(X[2]),Q];case"hsla":if(X.length!==4)return null;Q=v(X.pop());case"hsl":if(X.length!==3)return null;var se=(parseFloat(X[0])%360+360)%360/360,he=v(X[1]),xe=v(X[2]),Ie=xe<=.5?xe*(he+1):xe+he-xe*he,Me=2*xe-Ie;return[u(255*x(Me,Ie,se+1/3)),u(255*x(Me,Ie,se)),u(255*x(Me,Ie,se-1/3)),Q];default:return null}}return null}}catch{}});class Lt{constructor(n,l,u,m=1){this.r=n,this.g=l,this.b=u,this.a=m}static parse(n){if(!n)return;if(n instanceof Lt)return n;if(typeof n!="string")return;const l=At.parseCSSColor(n);return l?new Lt(l[0]/255*l[3],l[1]/255*l[3],l[2]/255*l[3],l[3]):void 0}toString(){const[n,l,u,m]=this.toArray();return`rgba(${Math.round(n)},${Math.round(l)},${Math.round(u)},${m})`}toArray(){const{r:n,g:l,b:u,a:m}=this;return m===0?[0,0,0,0]:[255*n/m,255*l/m,255*u/m,m]}toArray01(){const{r:n,g:l,b:u,a:m}=this;return m===0?[0,0,0,0]:[n/m,l/m,u/m,m]}toArray01PremultipliedAlpha(){const{r:n,g:l,b:u,a:m}=this;return[n,l,u,m]}}Lt.black=new Lt(0,0,0,1),Lt.white=new Lt(1,1,1,1),Lt.transparent=new Lt(0,0,0,0),Lt.red=new Lt(1,0,0,1),Lt.blue=new Lt(0,0,1,1);var Pt=Lt;class sn{constructor(n,l,u){this.sensitivity=n?l?"variant":"case":l?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,l){return this.collator.compare(n,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Pn{constructor(n,l,u,m,v){this.text=n.normalize?n.normalize():n,this.image=l,this.scale=u,this.fontStack=m,this.textColor=v}}class jn{constructor(n){this.sections=n}static fromString(n){return new jn([new Pn(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof jn?n:jn.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}serialize(){const n=["format"];for(const l of this.sections){if(l.image){n.push(["image",l.image.name]);continue}n.push(l.text);const u={};l.fontStack&&(u["text-font"]=["literal",l.fontStack.split(",")]),l.scale&&(u["font-scale"]=l.scale),l.textColor&&(u["text-color"]=["rgba"].concat(l.textColor.toArray())),n.push(u)}return n}}class Wn{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Wn({name:n,available:!1}):null}serialize(){return["image",this.name]}}function Qn(a,n,l,u){return typeof a=="number"&&a>=0&&a<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof l=="number"&&l>=0&&l<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:`Invalid rgba value [${[a,n,l,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof u=="number"?[a,n,l,u]:[a,n,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Zn(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof Pt||a instanceof sn||a instanceof jn||a instanceof Wn)return!0;if(Array.isArray(a)){for(const n of a)if(!Zn(n))return!1;return!0}if(typeof a=="object"){for(const n in a)if(!Zn(a[n]))return!1;return!0}return!1}function zn(a){if(a===null)return so;if(typeof a=="string")return On;if(typeof a=="boolean")return xn;if(typeof a=="number")return qt;if(a instanceof Pt)return hr;if(a instanceof sn)return me;if(a instanceof jn)return Ne;if(a instanceof Wn)return He;if(Array.isArray(a)){const n=a.length;let l;for(const u of a){const m=zn(u);if(l){if(l===m)continue;l=Cn;break}l=m}return rt(l||Cn,n)}return Xr}function Fi(a){const n=typeof a;return a===null?"":n==="string"||n==="number"||n==="boolean"?String(a):a instanceof Pt||a instanceof jn||a instanceof Wn?a.toString():JSON.stringify(a)}class Mr{constructor(n,l){this.type=n,this.value=l}static parse(n,l){if(n.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Zn(n[1]))return l.error("invalid value");const u=n[1];let m=zn(u);const v=l.expectedType;return m.kind!=="array"||m.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(m=v),new Mr(m,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Pt?["rgba"].concat(this.value.toArray()):this.value instanceof jn?this.value.serialize():this.value}}var tr=Mr,Ai=class{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}};const jo={string:On,number:qt,boolean:xn,object:Xr};class ao{constructor(n,l){this.type=n,this.args=l}static parse(n,l){if(n.length<2)return l.error("Expected at least one argument.");let u,m=1;const v=n[0];if(v==="array"){let R,N;if(n.length>2){const P=n[1];if(typeof P!="string"||!(P in jo)||P==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);R=jo[P],m++}else R=Cn;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return l.error('The length argument to "array" must be a positive integer literal',2);N=n[2],m++}u=rt(R,N)}else u=jo[v];const x=[];for(;m<n.length;m++){const R=l.parse(n[m],m,Cn);if(!R)return null;x.push(R)}return new ao(u,x)}evaluate(n){for(let l=0;l<this.args.length;l++){const u=this.args[l].evaluate(n);if(!Jt(this.type,zn(u)))return u;if(l===this.args.length-1)throw new Ai(`Expected value to be of type ${ft(this.type)}, but found ${ft(zn(u))} instead.`)}return null}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=this.type,l=[n.kind];if(n.kind==="array"){const u=n.itemType;if(u.kind==="string"||u.kind==="number"||u.kind==="boolean"){l.push(u.kind);const m=n.N;(typeof m=="number"||this.args.length>1)&&l.push(m)}}return l.concat(this.args.map(u=>u.serialize()))}}var vr=ao;class Ir{constructor(n){this.type=Ne,this.sections=n}static parse(n,l){if(n.length<2)return l.error("Expected at least one argument.");const u=n[1];if(!Array.isArray(u)&&typeof u=="object")return l.error("First argument must be an image or text section.");const m=[];let v=!1;for(let x=1;x<=n.length-1;++x){const R=n[x];if(v&&typeof R=="object"&&!Array.isArray(R)){v=!1;let N=null;if(R["font-scale"]&&(N=l.parse(R["font-scale"],1,qt),!N))return null;let P=null;if(R["text-font"]&&(P=l.parse(R["text-font"],1,rt(On)),!P))return null;let G=null;if(R["text-color"]&&(G=l.parse(R["text-color"],1,hr),!G))return null;const H=m[m.length-1];H.scale=N,H.font=P,H.textColor=G}else{const N=l.parse(n[x],1,Cn);if(!N)return null;const P=N.type.kind;if(P!=="string"&&P!=="value"&&P!=="null"&&P!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,m.push({content:N,scale:null,font:null,textColor:null})}}return new Ir(m)}evaluate(n){return new jn(this.sections.map(l=>{const u=l.content.evaluate(n);return zn(u)===He?new Pn("",u,null,null,null):new Pn(Fi(u),null,l.scale?l.scale.evaluate(n):null,l.font?l.font.evaluate(n).join(","):null,l.textColor?l.textColor.evaluate(n):null)}))}eachChild(n){for(const l of this.sections)n(l.content),l.scale&&n(l.scale),l.font&&n(l.font),l.textColor&&n(l.textColor)}outputDefined(){return!1}serialize(){const n=["format"];for(const l of this.sections){n.push(l.content.serialize());const u={};l.scale&&(u["font-scale"]=l.scale.serialize()),l.font&&(u["text-font"]=l.font.serialize()),l.textColor&&(u["text-color"]=l.textColor.serialize()),n.push(u)}return n}}class Br{constructor(n){this.type=He,this.input=n}static parse(n,l){if(n.length!==2)return l.error("Expected two arguments.");const u=l.parse(n[1],1,On);return u?new Br(u):l.error("No image name provided.")}evaluate(n){const l=this.input.evaluate(n),u=Wn.fromString(l);return u&&n.availableImages&&(u.available=n.availableImages.indexOf(l)>-1),u}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Qa={"to-boolean":xn,"to-color":hr,"to-number":qt,"to-string":On};class So{constructor(n,l){this.type=n,this.args=l}static parse(n,l){if(n.length<2)return l.error("Expected at least one argument.");const u=n[0];if((u==="to-boolean"||u==="to-string")&&n.length!==2)return l.error("Expected one argument.");const m=Qa[u],v=[];for(let x=1;x<n.length;x++){const R=l.parse(n[x],x,Cn);if(!R)return null;v.push(R)}return new So(m,v)}evaluate(n){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(n));if(this.type.kind==="color"){let l,u;for(const m of this.args){if(l=m.evaluate(n),u=null,l instanceof Pt)return l;if(typeof l=="string"){const v=n.parseColor(l);if(v)return v}else if(Array.isArray(l)&&(u=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:Qn(l[0],l[1],l[2],l[3]),!u))return new Pt(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new Ai(u||`Could not parse color from value '${typeof l=="string"?l:String(JSON.stringify(l))}'`)}if(this.type.kind==="number"){let l=null;for(const u of this.args){if(l=u.evaluate(n),l===null)return 0;const m=Number(l);if(!isNaN(m))return m}throw new Ai(`Could not convert ${JSON.stringify(l)} to number.`)}return this.type.kind==="formatted"?jn.fromString(Fi(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?Wn.fromString(Fi(this.args[0].evaluate(n))):Fi(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Ir([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Br(this.args[0]).serialize();const n=[`to-${this.type.kind}`];return this.eachChild(l=>{n.push(l.serialize())}),n}}var Jr=So;const Go=["Unknown","Point","LineString","Polygon"];var qo=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&"id"in this.feature&&this.feature.id?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Go[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const a=this.featureDistanceData.center,n=this.featureDistanceData.scale,{x:l,y:u}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(l*n-a[0])+this.featureDistanceData.bearing[1]*(u*n-a[1])}return 0}parseColor(a){let n=this._parseColorCache[a];return n||(n=this._parseColorCache[a]=Pt.parse(a)),n}};class lo{constructor(n,l,u,m){this.name=n,this.type=l,this._evaluate=u,this.args=m}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(n=>n.serialize()))}static parse(n,l){const u=n[0],m=lo.definitions[u];if(!m)return l.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(m)?m[0]:m.type,x=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,R=x.filter(([P])=>!Array.isArray(P)||P.length===n.length-1);let N=null;for(const[P,G]of R){N=new ac(l.registry,l.path,null,l.scope);const H=[];let K=!1;for(let X=1;X<n.length;X++){const Q=n[X],se=Array.isArray(P)?P[X-1]:P.type,he=N.parse(Q,1+H.length,se);if(!he){K=!0;break}H.push(he)}if(!K)if(Array.isArray(P)&&P.length!==H.length)N.error(`Expected ${P.length} arguments, but found ${H.length} instead.`);else{for(let X=0;X<H.length;X++){const Q=Array.isArray(P)?P[X]:P.type,se=H[X];N.concat(X+1).checkSubtype(Q,se.type)}if(N.errors.length===0)return new lo(u,v,G,H)}}if(R.length===1)l.errors.push(...N.errors);else{const P=(R.length?R:x).map(([H])=>{return K=H,Array.isArray(K)?`(${K.map(ft).join(", ")})`:`(${ft(K.type)}...)`;var K}).join(" | "),G=[];for(let H=1;H<n.length;H++){const K=l.parse(n[H],1+G.length);if(!K)return null;G.push(ft(K.type))}l.error(`Expected arguments of type ${P}, but found (${G.join(", ")}) instead.`)}return null}static register(n,l){lo.definitions=l;for(const u in l)n[u]=lo}}var mr=lo;class zr{constructor(n,l,u){this.type=me,this.locale=u,this.caseSensitive=n,this.diacriticSensitive=l}static parse(n,l){if(n.length!==2)return l.error("Expected one argument.");const u=n[1];if(typeof u!="object"||Array.isArray(u))return l.error("Collator options argument must be an object.");const m=l.parse(u["case-sensitive"]!==void 0&&u["case-sensitive"],1,xn);if(!m)return null;const v=l.parse(u["diacritic-sensitive"]!==void 0&&u["diacritic-sensitive"],1,xn);if(!v)return null;let x=null;return u.locale&&(x=l.parse(u.locale,1,On),!x)?null:new zr(m,v,x)}evaluate(n){return new sn(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}serialize(){const n={};return n["case-sensitive"]=this.caseSensitive.serialize(),n["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(n.locale=this.locale.serialize()),["collator",n]}}const yr=8192;function To(a,n){a[0]=Math.min(a[0],n[0]),a[1]=Math.min(a[1],n[1]),a[2]=Math.max(a[2],n[0]),a[3]=Math.max(a[3],n[1])}function co(a,n){return!(a[0]<=n[0]||a[2]>=n[2]||a[1]<=n[1]||a[3]>=n[3])}function ea(a,n){const l=(180+a[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,m=Math.pow(2,n.z);return[Math.round(l*m*yr),Math.round(u*m*yr)]}function Ot(a,n,l){const u=a[0]-n[0],m=a[1]-n[1],v=a[0]-l[0],x=a[1]-l[1];return u*x-v*m==0&&u*v<=0&&m*x<=0}function hn(a,n){let l=!1;for(let x=0,R=n.length;x<R;x++){const N=n[x];for(let P=0,G=N.length;P<G-1;P++){if(Ot(a,N[P],N[P+1]))return!1;(m=N[P])[1]>(u=a)[1]!=(v=N[P+1])[1]>u[1]&&u[0]<(v[0]-m[0])*(u[1]-m[1])/(v[1]-m[1])+m[0]&&(l=!l)}}var u,m,v;return l}function Qt(a,n){for(let l=0;l<n.length;l++)if(hn(a,n[l]))return!0;return!1}function vn(a,n,l,u){const m=u[0]-l[0],v=u[1]-l[1],x=(a[0]-l[0])*v-m*(a[1]-l[1]),R=(n[0]-l[0])*v-m*(n[1]-l[1]);return x>0&&R<0||x<0&&R>0}function bi(a,n,l){for(const P of l)for(let G=0;G<P.length-1;++G)if((R=[(x=P[G+1])[0]-(v=P[G])[0],x[1]-v[1]])[0]*(N=[(m=n)[0]-(u=a)[0],m[1]-u[1]])[1]-R[1]*N[0]!=0&&vn(u,m,v,x)&&vn(v,x,u,m))return!0;var u,m,v,x,R,N;return!1}function $i(a,n){for(let l=0;l<a.length;++l)if(!hn(a[l],n))return!1;for(let l=0;l<a.length-1;++l)if(bi(a[l],a[l+1],n))return!1;return!0}function Yn(a,n){for(let l=0;l<n.length;l++)if($i(a,n[l]))return!0;return!1}function Dn(a,n,l){const u=[];for(let m=0;m<a.length;m++){const v=[];for(let x=0;x<a[m].length;x++){const R=ea(a[m][x],l);To(n,R),v.push(R)}u.push(v)}return u}function ai(a,n,l){const u=[];for(let m=0;m<a.length;m++){const v=Dn(a[m],n,l);u.push(v)}return u}function Qr(a,n,l,u){if(a[0]<l[0]||a[0]>l[2]){const m=.5*u;let v=a[0]-l[0]>m?-u:l[0]-a[0]>m?u:0;v===0&&(v=a[0]-l[2]>m?-u:l[2]-a[0]>m?u:0),a[0]+=v}To(n,a)}function Xi(a,n,l,u){const m=Math.pow(2,u.z)*yr,v=[u.x*yr,u.y*yr],x=[];if(!a)return x;for(const R of a)for(const N of R){const P=[N.x+v[0],N.y+v[1]];Qr(P,n,l,m),x.push(P)}return x}function xs(a,n,l,u){const m=Math.pow(2,u.z)*yr,v=[u.x*yr,u.y*yr],x=[];if(!a)return x;for(const N of a){const P=[];for(const G of N){const H=[G.x+v[0],G.y+v[1]];To(n,H),P.push(H)}x.push(P)}if(n[2]-n[0]<=m/2){(R=n)[0]=R[1]=1/0,R[2]=R[3]=-1/0;for(const N of x)for(const P of N)Qr(P,n,l,m)}var R;return x}class eo{constructor(n,l){this.type=xn,this.geojson=n,this.geometries=l}static parse(n,l){if(n.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Zn(n[1])){const u=n[1];if(u.type==="FeatureCollection")for(let m=0;m<u.features.length;++m){const v=u.features[m].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new eo(u,u.features[m].geometry)}else if(u.type==="Feature"){const m=u.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new eo(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new eo(u,u)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(l,u){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(!x)return!1;if(u.type==="Polygon"){const R=Dn(u.coordinates,v,x),N=Xi(l.geometry(),m,v,x);if(!co(m,v))return!1;for(const P of N)if(!hn(P,R))return!1}if(u.type==="MultiPolygon"){const R=ai(u.coordinates,v,x),N=Xi(l.geometry(),m,v,x);if(!co(m,v))return!1;for(const P of N)if(!Qt(P,R))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(l,u){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(!x)return!1;if(u.type==="Polygon"){const R=Dn(u.coordinates,v,x),N=xs(l.geometry(),m,v,x);if(!co(m,v))return!1;for(const P of N)if(!$i(P,R))return!1}if(u.type==="MultiPolygon"){const R=ai(u.coordinates,v,x),N=xs(l.geometry(),m,v,x);if(!co(m,v))return!1;for(const P of N)if(!Yn(P,R))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var ta=eo;function Ho(a){if(a instanceof mr&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof ta)return!1;let n=!0;return a.eachChild(l=>{n&&!Ho(l)&&(n=!1)}),n}function Ko(a){if(a instanceof mr&&a.name==="feature-state")return!1;let n=!0;return a.eachChild(l=>{n&&!Ko(l)&&(n=!1)}),n}function na(a,n){if(a instanceof mr&&n.indexOf(a.name)>=0)return!1;let l=!0;return a.eachChild(u=>{l&&!na(u,n)&&(l=!1)}),l}class ei{constructor(n,l){this.type=l.type,this.name=n,this.boundExpression=l}static parse(n,l){if(n.length!==2||typeof n[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const u=n[1];return l.scope.has(u)?new ei(u,l.scope.get(u)):l.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var sc=ei;class el{constructor(n,l=[],u,m=new Qs,v=[]){this.registry=n,this.path=l,this.key=l.map(x=>`[${x}]`).join(""),this.scope=m,this.errors=v,this.expectedType=u}parse(n,l,u,m,v={}){return l?this.concat(l,u,m)._parse(n,v):this._parse(n,v)}_parse(n,l){function u(m,v,x){return x==="assert"?new vr(v,[m]):x==="coerce"?new Jr(v,[m]):m}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=n[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[m];if(v){let x=v.parse(n,this);if(!x)return null;if(this.expectedType){const R=this.expectedType,N=x.type;if(R.kind!=="string"&&R.kind!=="number"&&R.kind!=="boolean"&&R.kind!=="object"&&R.kind!=="array"||N.kind!=="value")if(R.kind!=="color"&&R.kind!=="formatted"&&R.kind!=="resolvedImage"||N.kind!=="value"&&N.kind!=="string"){if(this.checkSubtype(R,N))return null}else x=u(x,R,l.typeAnnotation||"coerce");else x=u(x,R,l.typeAnnotation||"assert")}if(!(x instanceof tr)&&x.type.kind!=="resolvedImage"&&ia(x)){const R=new qo;try{x=new tr(x.type,x.evaluate(R))}catch(N){return this.error(N.message),null}}return x}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,l,u){const m=typeof n=="number"?this.path.concat(n):this.path,v=u?this.scope.concat(u):this.scope;return new el(this.registry,m,l||null,v,this.errors)}error(n,...l){const u=`${this.key}${l.map(m=>`[${m}]`).join("")}`;this.errors.push(new Yi(u,n))}checkSubtype(n,l){const u=Jt(n,l);return u&&this.error(u),u}}var ac=el;function ia(a){if(a instanceof sc)return ia(a.boundExpression);if(a instanceof mr&&a.name==="error"||a instanceof zr||a instanceof ta)return!1;const n=a instanceof Jr||a instanceof vr;let l=!0;return a.eachChild(u=>{l=n?l&&ia(u):l&&u instanceof tr}),!!l&&Ho(a)&&na(a,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function ra(a,n){const l=a.length-1;let u,m,v=0,x=l,R=0;for(;v<=x;)if(R=Math.floor((v+x)/2),u=a[R],m=a[R+1],u<=n){if(R===l||n<m)return R;v=R+1}else{if(!(u>n))throw new Ai("Input is not a number.");x=R-1}return 0}class oa{constructor(n,l,u){this.type=n,this.input=l,this.labels=[],this.outputs=[];for(const[m,v]of u)this.labels.push(m),this.outputs.push(v)}static parse(n,l){if(n.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return l.error("Expected an even number of arguments.");const u=l.parse(n[1],1,qt);if(!u)return null;const m=[];let v=null;l.expectedType&&l.expectedType.kind!=="value"&&(v=l.expectedType);for(let x=1;x<n.length;x+=2){const R=x===1?-1/0:n[x],N=n[x+1],P=x,G=x+1;if(typeof R!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(m.length&&m[m.length-1][0]>=R)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',P);const H=l.parse(N,G,v);if(!H)return null;v=v||H.type,m.push([R,H])}return new oa(v,u,m)}evaluate(n){const l=this.labels,u=this.outputs;if(l.length===1)return u[0].evaluate(n);const m=this.input.evaluate(n);if(m<=l[0])return u[0].evaluate(n);const v=l.length;return m>=l[v-1]?u[v-1].evaluate(n):u[ra(l,m)].evaluate(n)}eachChild(n){n(this.input);for(const l of this.outputs)n(l)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){const n=["step",this.input.serialize()];for(let l=0;l<this.labels.length;l++)l>0&&n.push(this.labels[l]),n.push(this.outputs[l].serialize());return n}}var sa=oa;function qn(a,n,l){return a*(1-l)+n*l}var ws=Object.freeze({__proto__:null,number:qn,color:function(a,n,l){return new Pt(qn(a.r,n.r,l),qn(a.g,n.g,l),qn(a.b,n.b,l),qn(a.a,n.a,l))},array:function(a,n,l){return a.map((u,m)=>qn(u,n[m],l))}});const Ao=.95047,Es=1.08883,lc=4/29,Cs=6/29,tl=3*Cs*Cs,Nu=Math.PI/180,Lu=180/Math.PI;function aa(a){return a>.008856451679035631?Math.pow(a,1/3):a/tl+lc}function nl(a){return a>Cs?a*a*a:tl*(a-lc)}function la(a){return 255*(a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function ca(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function il(a){const n=ca(a.r),l=ca(a.g),u=ca(a.b),m=aa((.4124564*n+.3575761*l+.1804375*u)/Ao),v=aa((.2126729*n+.7151522*l+.072175*u)/1);return{l:116*v-16,a:500*(m-v),b:200*(v-aa((.0193339*n+.119192*l+.9503041*u)/Es)),alpha:a.a}}function cc(a){let n=(a.l+16)/116,l=isNaN(a.a)?n:n+a.a/500,u=isNaN(a.b)?n:n-a.b/200;return n=1*nl(n),l=Ao*nl(l),u=Es*nl(u),new Pt(la(3.2404542*l-1.5371385*n-.4985314*u),la(-.969266*l+1.8760108*n+.041556*u),la(.0556434*l-.2040259*n+1.0572252*u),a.alpha)}function uc(a,n,l){const u=n-a;return a+l*(u>180||u<-180?u-360*Math.round(u/360):u)}const Ss={forward:il,reverse:cc,interpolate:function(a,n,l){return{l:qn(a.l,n.l,l),a:qn(a.a,n.a,l),b:qn(a.b,n.b,l),alpha:qn(a.alpha,n.alpha,l)}}},Wo={forward:function(a){const{l:n,a:l,b:u}=il(a),m=Math.atan2(u,l)*Lu;return{h:m<0?m+360:m,c:Math.sqrt(l*l+u*u),l:n,alpha:a.a}},reverse:function(a){const n=a.h*Nu,l=a.c;return cc({l:a.l,a:Math.cos(n)*l,b:Math.sin(n)*l,alpha:a.alpha})},interpolate:function(a,n,l){return{h:uc(a.h,n.h,l),c:qn(a.c,n.c,l),l:qn(a.l,n.l,l),alpha:qn(a.alpha,n.alpha,l)}}};var rl=Object.freeze({__proto__:null,lab:Ss,hcl:Wo});class ua{constructor(n,l,u,m,v){this.type=n,this.operator=l,this.interpolation=u,this.input=m,this.labels=[],this.outputs=[];for(const[x,R]of v)this.labels.push(x),this.outputs.push(R)}static interpolationFactor(n,l,u,m){let v=0;if(n.name==="exponential")v=ol(l,n.base,u,m);else if(n.name==="linear")v=ol(l,1,u,m);else if(n.name==="cubic-bezier"){const x=n.controlPoints;v=new E(x[0],x[1],x[2],x[3]).solve(ol(l,1,u,m))}return v}static parse(n,l){let[u,m,v,...x]=n;if(!Array.isArray(m)||m.length===0)return l.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const P=m[1];if(typeof P!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:P}}else{if(m[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const P=m.slice(1);if(P.length!==4||P.some(G=>typeof G!="number"||G<0||G>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:P}}}if(n.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(v=l.parse(v,2,qt),!v)return null;const R=[];let N=null;u==="interpolate-hcl"||u==="interpolate-lab"?N=hr:l.expectedType&&l.expectedType.kind!=="value"&&(N=l.expectedType);for(let P=0;P<x.length;P+=2){const G=x[P],H=x[P+1],K=P+3,X=P+4;if(typeof G!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',K);if(R.length&&R[R.length-1][0]>=G)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',K);const Q=l.parse(H,X,N);if(!Q)return null;N=N||Q.type,R.push([G,Q])}return N.kind==="number"||N.kind==="color"||N.kind==="array"&&N.itemType.kind==="number"&&typeof N.N=="number"?new ua(N,u,m,v,R):l.error(`Type ${ft(N)} is not interpolatable.`)}evaluate(n){const l=this.labels,u=this.outputs;if(l.length===1)return u[0].evaluate(n);const m=this.input.evaluate(n);if(m<=l[0])return u[0].evaluate(n);const v=l.length;if(m>=l[v-1])return u[v-1].evaluate(n);const x=ra(l,m),R=ua.interpolationFactor(this.interpolation,m,l[x],l[x+1]),N=u[x].evaluate(n),P=u[x+1].evaluate(n);return this.operator==="interpolate"?ws[this.type.kind.toLowerCase()](N,P,R):this.operator==="interpolate-hcl"?Wo.reverse(Wo.interpolate(Wo.forward(N),Wo.forward(P),R)):Ss.reverse(Ss.interpolate(Ss.forward(N),Ss.forward(P),R))}eachChild(n){n(this.input);for(const l of this.outputs)n(l)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){let n;n=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const l=[this.operator,n,this.input.serialize()];for(let u=0;u<this.labels.length;u++)l.push(this.labels[u],this.outputs[u].serialize());return l}}function ol(a,n,l,u){const m=u-l,v=a-l;return m===0?0:n===1?v/m:(Math.pow(n,v)-1)/(Math.pow(n,m)-1)}var Fr=ua;class sl{constructor(n,l){this.type=n,this.args=l}static parse(n,l){if(n.length<2)return l.error("Expectected at least one argument.");let u=null;const m=l.expectedType;m&&m.kind!=="value"&&(u=m);const v=[];for(const R of n.slice(1)){const N=l.parse(R,1+v.length,u,void 0,{typeAnnotation:"omit"});if(!N)return null;u=u||N.type,v.push(N)}const x=m&&v.some(R=>Jt(m,R.type));return new sl(x?Cn:u,v)}evaluate(n){let l,u=null,m=0;for(const v of this.args){if(m++,u=v.evaluate(n),u&&u instanceof Wn&&!u.available&&(l||(l=u),u=null,m===this.args.length))return l;if(u!==null)break}return u}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=["coalesce"];return this.eachChild(l=>{n.push(l.serialize())}),n}}var dc=sl;class al{constructor(n,l){this.type=l.type,this.bindings=[].concat(n),this.result=l}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const l of this.bindings)n(l[1]);n(this.result)}static parse(n,l){if(n.length<4)return l.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const u=[];for(let v=1;v<n.length-1;v+=2){const x=n[v];if(typeof x!="string")return l.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return l.error("Variable names must contain only alphanumeric characters or '_'.",v);const R=l.parse(n[v+1],v+1);if(!R)return null;u.push([x,R])}const m=l.parse(n[n.length-1],n.length-1,l.expectedType,u);return m?new al(u,m):null}outputDefined(){return this.result.outputDefined()}serialize(){const n=["let"];for(const[l,u]of this.bindings)n.push(l,u.serialize());return n.push(this.result.serialize()),n}}var ll=al;class cl{constructor(n,l,u){this.type=n,this.index=l,this.input=u}static parse(n,l){if(n.length!==3)return l.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const u=l.parse(n[1],1,qt),m=l.parse(n[2],2,rt(l.expectedType||Cn));return u&&m?new cl(m.type.itemType,u,m):null}evaluate(n){const l=this.index.evaluate(n),u=this.input.evaluate(n);if(l<0)throw new Ai(`Array index out of bounds: ${l} < 0.`);if(l>=u.length)throw new Ai(`Array index out of bounds: ${l} > ${u.length-1}.`);if(l!==Math.floor(l))throw new Ai(`Array index must be an integer, but found ${l} instead.`);return u[l]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Ou=cl;class ul{constructor(n,l){this.type=xn,this.needle=n,this.haystack=l}static parse(n,l){if(n.length!==3)return l.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const u=l.parse(n[1],1,Cn),m=l.parse(n[2],2,Cn);return u&&m?Xt(u.type,[xn,On,qt,so,Cn])?new ul(u,m):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${ft(u.type)} instead`):null}evaluate(n){const l=this.needle.evaluate(n),u=this.haystack.evaluate(n);if(u==null)return!1;if(!Dt(l,["boolean","string","number","null"]))throw new Ai(`Expected first argument to be of type boolean, string, number or null, but found ${ft(zn(l))} instead.`);if(!Dt(u,["string","array"]))throw new Ai(`Expected second argument to be of type array or string, but found ${ft(zn(u))} instead.`);return u.indexOf(l)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Pu=ul;class Ts{constructor(n,l,u){this.type=qt,this.needle=n,this.haystack=l,this.fromIndex=u}static parse(n,l){if(n.length<=2||n.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const u=l.parse(n[1],1,Cn),m=l.parse(n[2],2,Cn);if(!u||!m)return null;if(!Xt(u.type,[xn,On,qt,so,Cn]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${ft(u.type)} instead`);if(n.length===4){const v=l.parse(n[3],3,qt);return v?new Ts(u,m,v):null}return new Ts(u,m)}evaluate(n){const l=this.needle.evaluate(n),u=this.haystack.evaluate(n);if(!Dt(l,["boolean","string","number","null"]))throw new Ai(`Expected first argument to be of type boolean, string, number or null, but found ${ft(zn(l))} instead.`);if(!Dt(u,["string","array"]))throw new Ai(`Expected second argument to be of type array or string, but found ${ft(zn(u))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(n);return u.indexOf(l,m)}return u.indexOf(l)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const n=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),n]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var pc=Ts;class da{constructor(n,l,u,m,v,x){this.inputType=n,this.type=l,this.input=u,this.cases=m,this.outputs=v,this.otherwise=x}static parse(n,l){if(n.length<5)return l.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return l.error("Expected an even number of arguments.");let u,m;l.expectedType&&l.expectedType.kind!=="value"&&(m=l.expectedType);const v={},x=[];for(let P=2;P<n.length-1;P+=2){let G=n[P];const H=n[P+1];Array.isArray(G)||(G=[G]);const K=l.concat(P);if(G.length===0)return K.error("Expected at least one branch label.");for(const Q of G){if(typeof Q!="number"&&typeof Q!="string")return K.error("Branch labels must be numbers or strings.");if(typeof Q=="number"&&Math.abs(Q)>Number.MAX_SAFE_INTEGER)return K.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Q=="number"&&Math.floor(Q)!==Q)return K.error("Numeric branch labels must be integer values.");if(u){if(K.checkSubtype(u,zn(Q)))return null}else u=zn(Q);if(v[String(Q)]!==void 0)return K.error("Branch labels must be unique.");v[String(Q)]=x.length}const X=l.parse(H,P,m);if(!X)return null;m=m||X.type,x.push(X)}const R=l.parse(n[1],1,Cn);if(!R)return null;const N=l.parse(n[n.length-1],n.length-1,m);return N?R.type.kind!=="value"&&l.concat(1).checkSubtype(u,R.type)?null:new da(u,m,R,v,x,N):null}evaluate(n){const l=this.input.evaluate(n);return(zn(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["match",this.input.serialize()],l=Object.keys(this.cases).sort(),u=[],m={};for(const x of l){const R=m[this.cases[x]];R===void 0?(m[this.cases[x]]=u.length,u.push([this.cases[x],[x]])):u[R][1].push(x)}const v=x=>this.inputType.kind==="number"?Number(x):x;for(const[x,R]of u)n.push(R.length===1?v(R[0]):R.map(v)),n.push(this.outputs[x].serialize());return n.push(this.otherwise.serialize()),n}}var Du=da;class dl{constructor(n,l,u){this.type=n,this.branches=l,this.otherwise=u}static parse(n,l){if(n.length<4)return l.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return l.error("Expected an odd number of arguments.");let u;l.expectedType&&l.expectedType.kind!=="value"&&(u=l.expectedType);const m=[];for(let x=1;x<n.length-1;x+=2){const R=l.parse(n[x],x,xn);if(!R)return null;const N=l.parse(n[x+1],x+1,u);if(!N)return null;m.push([R,N]),u=u||N.type}const v=l.parse(n[n.length-1],n.length-1,u);return v?new dl(u,m,v):null}evaluate(n){for(const[l,u]of this.branches)if(l.evaluate(n))return u.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[l,u]of this.branches)n(l),n(u);n(this.otherwise)}outputDefined(){return this.branches.every(([n,l])=>l.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["case"];return this.eachChild(l=>{n.push(l.serialize())}),n}}var fc=dl;class As{constructor(n,l,u,m){this.type=n,this.input=l,this.beginIndex=u,this.endIndex=m}static parse(n,l){if(n.length<=2||n.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const u=l.parse(n[1],1,Cn),m=l.parse(n[2],2,qt);if(!u||!m)return null;if(!Xt(u.type,[rt(Cn),On,Cn]))return l.error(`Expected first argument to be of type array or string, but found ${ft(u.type)} instead`);if(n.length===4){const v=l.parse(n[3],3,qt);return v?new As(u.type,u,m,v):null}return new As(u.type,u,m)}evaluate(n){const l=this.input.evaluate(n),u=this.beginIndex.evaluate(n);if(!Dt(l,["string","array"]))throw new Ai(`Expected first argument to be of type array or string, but found ${ft(zn(l))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(n);return l.slice(u,m)}return l.slice(u)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const n=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),n]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var hc=As;function mc(a,n){return a==="=="||a==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function gc(a,n,l,u){return u.compare(n,l)===0}function Zo(a,n,l){const u=a!=="=="&&a!=="!=";return class yh{constructor(v,x,R){this.type=xn,this.lhs=v,this.rhs=x,this.collator=R,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const R=v[0];let N=x.parse(v[1],1,Cn);if(!N)return null;if(!mc(R,N.type))return x.concat(1).error(`"${R}" comparisons are not supported for type '${ft(N.type)}'.`);let P=x.parse(v[2],2,Cn);if(!P)return null;if(!mc(R,P.type))return x.concat(2).error(`"${R}" comparisons are not supported for type '${ft(P.type)}'.`);if(N.type.kind!==P.type.kind&&N.type.kind!=="value"&&P.type.kind!=="value")return x.error(`Cannot compare types '${ft(N.type)}' and '${ft(P.type)}'.`);u&&(N.type.kind==="value"&&P.type.kind!=="value"?N=new vr(P.type,[N]):N.type.kind!=="value"&&P.type.kind==="value"&&(P=new vr(N.type,[P])));let G=null;if(v.length===4){if(N.type.kind!=="string"&&P.type.kind!=="string"&&N.type.kind!=="value"&&P.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(G=x.parse(v[3],3,me),!G)return null}return new yh(N,P,G)}evaluate(v){const x=this.lhs.evaluate(v),R=this.rhs.evaluate(v);if(u&&this.hasUntypedArgument){const N=zn(x),P=zn(R);if(N.kind!==P.kind||N.kind!=="string"&&N.kind!=="number")throw new Ai(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${N.kind}, ${P.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const N=zn(x),P=zn(R);if(N.kind!=="string"||P.kind!=="string")return n(v,x,R)}return this.collator?l(v,x,R,this.collator.evaluate(v)):n(v,x,R)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}serialize(){const v=[a];return this.eachChild(x=>{v.push(x.serialize())}),v}}}const Bu=Zo("==",function(a,n,l){return n===l},gc),pa=Zo("!=",function(a,n,l){return n!==l},function(a,n,l,u){return!gc(0,n,l,u)}),_c=Zo("<",function(a,n,l){return n<l},function(a,n,l,u){return u.compare(n,l)<0}),vc=Zo(">",function(a,n,l){return n>l},function(a,n,l,u){return u.compare(n,l)>0}),zu=Zo("<=",function(a,n,l){return n<=l},function(a,n,l,u){return u.compare(n,l)<=0}),Fu=Zo(">=",function(a,n,l){return n>=l},function(a,n,l,u){return u.compare(n,l)>=0});class pl{constructor(n,l,u,m,v){this.type=On,this.number=n,this.locale=l,this.currency=u,this.minFractionDigits=m,this.maxFractionDigits=v}static parse(n,l){if(n.length!==3)return l.error("Expected two arguments.");const u=l.parse(n[1],1,qt);if(!u)return null;const m=n[2];if(typeof m!="object"||Array.isArray(m))return l.error("NumberFormat options argument must be an object.");let v=null;if(m.locale&&(v=l.parse(m.locale,1,On),!v))return null;let x=null;if(m.currency&&(x=l.parse(m.currency,1,On),!x))return null;let R=null;if(m["min-fraction-digits"]&&(R=l.parse(m["min-fraction-digits"],1,qt),!R))return null;let N=null;return m["max-fraction-digits"]&&(N=l.parse(m["max-fraction-digits"],1,qt),!N)?null:new pl(u,v,x,R,N)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const n={};return this.locale&&(n.locale=this.locale.serialize()),this.currency&&(n.currency=this.currency.serialize()),this.minFractionDigits&&(n["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(n["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),n]}}class fa{constructor(n){this.type=qt,this.input=n}static parse(n,l){if(n.length!==2)return l.error(`Expected 1 argument, but found ${n.length-1} instead.`);const u=l.parse(n[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${ft(u.type)} instead.`):new fa(u):null}evaluate(n){const l=this.input.evaluate(n);if(typeof l=="string"||Array.isArray(l))return l.length;throw new Ai(`Expected value to be of type string or array, but found ${ft(zn(l))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){const n=["length"];return this.eachChild(l=>{n.push(l.serialize())}),n}}const fl={"==":Bu,"!=":pa,">":vc,"<":_c,">=":Fu,"<=":zu,array:vr,at:Ou,boolean:vr,case:fc,coalesce:dc,collator:zr,format:Ir,image:Br,in:Pu,"index-of":pc,interpolate:Fr,"interpolate-hcl":Fr,"interpolate-lab":Fr,length:fa,let:ll,literal:tr,match:Du,number:vr,"number-format":pl,object:vr,slice:hc,step:sa,string:vr,"to-boolean":Jr,"to-color":Jr,"to-number":Jr,"to-string":Jr,var:sc,within:ta};function hl(a,[n,l,u,m]){n=n.evaluate(a),l=l.evaluate(a),u=u.evaluate(a);const v=m?m.evaluate(a):1,x=Qn(n,l,u,v);if(x)throw new Ai(x);return new Pt(n/255*v,l/255*v,u/255*v,v)}function ha(a,n){return a in n}function ml(a,n){const l=n[a];return l===void 0?null:l}function ko(a){return{type:a}}mr.register(fl,{error:[{kind:"error"},[On],(a,[n])=>{throw new Ai(n.evaluate(a))}],typeof:[On,[Cn],(a,[n])=>ft(zn(n.evaluate(a)))],"to-rgba":[rt(qt,4),[hr],(a,[n])=>n.evaluate(a).toArray()],rgb:[hr,[qt,qt,qt],hl],rgba:[hr,[qt,qt,qt,qt],hl],has:{type:xn,overloads:[[[On],(a,[n])=>ha(n.evaluate(a),a.properties())],[[On,Xr],(a,[n,l])=>ha(n.evaluate(a),l.evaluate(a))]]},get:{type:Cn,overloads:[[[On],(a,[n])=>ml(n.evaluate(a),a.properties())],[[On,Xr],(a,[n,l])=>ml(n.evaluate(a),l.evaluate(a))]]},"feature-state":[Cn,[On],(a,[n])=>ml(n.evaluate(a),a.featureState||{})],properties:[Xr,[],a=>a.properties()],"geometry-type":[On,[],a=>a.geometryType()],id:[Cn,[],a=>a.id()],zoom:[qt,[],a=>a.globals.zoom],pitch:[qt,[],a=>a.globals.pitch||0],"distance-from-center":[qt,[],a=>a.distanceFromCenter()],"heatmap-density":[qt,[],a=>a.globals.heatmapDensity||0],"line-progress":[qt,[],a=>a.globals.lineProgress||0],"sky-radial-progress":[qt,[],a=>a.globals.skyRadialProgress||0],accumulated:[Cn,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[qt,ko(qt),(a,n)=>{let l=0;for(const u of n)l+=u.evaluate(a);return l}],"*":[qt,ko(qt),(a,n)=>{let l=1;for(const u of n)l*=u.evaluate(a);return l}],"-":{type:qt,overloads:[[[qt,qt],(a,[n,l])=>n.evaluate(a)-l.evaluate(a)],[[qt],(a,[n])=>-n.evaluate(a)]]},"/":[qt,[qt,qt],(a,[n,l])=>n.evaluate(a)/l.evaluate(a)],"%":[qt,[qt,qt],(a,[n,l])=>n.evaluate(a)%l.evaluate(a)],ln2:[qt,[],()=>Math.LN2],pi:[qt,[],()=>Math.PI],e:[qt,[],()=>Math.E],"^":[qt,[qt,qt],(a,[n,l])=>Math.pow(n.evaluate(a),l.evaluate(a))],sqrt:[qt,[qt],(a,[n])=>Math.sqrt(n.evaluate(a))],log10:[qt,[qt],(a,[n])=>Math.log(n.evaluate(a))/Math.LN10],ln:[qt,[qt],(a,[n])=>Math.log(n.evaluate(a))],log2:[qt,[qt],(a,[n])=>Math.log(n.evaluate(a))/Math.LN2],sin:[qt,[qt],(a,[n])=>Math.sin(n.evaluate(a))],cos:[qt,[qt],(a,[n])=>Math.cos(n.evaluate(a))],tan:[qt,[qt],(a,[n])=>Math.tan(n.evaluate(a))],asin:[qt,[qt],(a,[n])=>Math.asin(n.evaluate(a))],acos:[qt,[qt],(a,[n])=>Math.acos(n.evaluate(a))],atan:[qt,[qt],(a,[n])=>Math.atan(n.evaluate(a))],min:[qt,ko(qt),(a,n)=>Math.min(...n.map(l=>l.evaluate(a)))],max:[qt,ko(qt),(a,n)=>Math.max(...n.map(l=>l.evaluate(a)))],abs:[qt,[qt],(a,[n])=>Math.abs(n.evaluate(a))],round:[qt,[qt],(a,[n])=>{const l=n.evaluate(a);return l<0?-Math.round(-l):Math.round(l)}],floor:[qt,[qt],(a,[n])=>Math.floor(n.evaluate(a))],ceil:[qt,[qt],(a,[n])=>Math.ceil(n.evaluate(a))],"filter-==":[xn,[On,Cn],(a,[n,l])=>a.properties()[n.value]===l.value],"filter-id-==":[xn,[Cn],(a,[n])=>a.id()===n.value],"filter-type-==":[xn,[On],(a,[n])=>a.geometryType()===n.value],"filter-<":[xn,[On,Cn],(a,[n,l])=>{const u=a.properties()[n.value],m=l.value;return typeof u==typeof m&&u<m}],"filter-id-<":[xn,[Cn],(a,[n])=>{const l=a.id(),u=n.value;return typeof l==typeof u&&l<u}],"filter->":[xn,[On,Cn],(a,[n,l])=>{const u=a.properties()[n.value],m=l.value;return typeof u==typeof m&&u>m}],"filter-id->":[xn,[Cn],(a,[n])=>{const l=a.id(),u=n.value;return typeof l==typeof u&&l>u}],"filter-<=":[xn,[On,Cn],(a,[n,l])=>{const u=a.properties()[n.value],m=l.value;return typeof u==typeof m&&u<=m}],"filter-id-<=":[xn,[Cn],(a,[n])=>{const l=a.id(),u=n.value;return typeof l==typeof u&&l<=u}],"filter->=":[xn,[On,Cn],(a,[n,l])=>{const u=a.properties()[n.value],m=l.value;return typeof u==typeof m&&u>=m}],"filter-id->=":[xn,[Cn],(a,[n])=>{const l=a.id(),u=n.value;return typeof l==typeof u&&l>=u}],"filter-has":[xn,[Cn],(a,[n])=>n.value in a.properties()],"filter-has-id":[xn,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[xn,[rt(On)],(a,[n])=>n.value.indexOf(a.geometryType())>=0],"filter-id-in":[xn,[rt(Cn)],(a,[n])=>n.value.indexOf(a.id())>=0],"filter-in-small":[xn,[On,rt(Cn)],(a,[n,l])=>l.value.indexOf(a.properties()[n.value])>=0],"filter-in-large":[xn,[On,rt(Cn)],(a,[n,l])=>function(u,m,v,x){for(;v<=x;){const R=v+x>>1;if(m[R]===u)return!0;m[R]>u?x=R-1:v=R+1}return!1}(a.properties()[n.value],l.value,0,l.value.length-1)],all:{type:xn,overloads:[[[xn,xn],(a,[n,l])=>n.evaluate(a)&&l.evaluate(a)],[ko(xn),(a,n)=>{for(const l of n)if(!l.evaluate(a))return!1;return!0}]]},any:{type:xn,overloads:[[[xn,xn],(a,[n,l])=>n.evaluate(a)||l.evaluate(a)],[ko(xn),(a,n)=>{for(const l of n)if(l.evaluate(a))return!0;return!1}]]},"!":[xn,[xn],(a,[n])=>!n.evaluate(a)],"is-supported-script":[xn,[On],(a,[n])=>{const l=a.globals&&a.globals.isSupportedScript;return!l||l(n.evaluate(a))}],upcase:[On,[On],(a,[n])=>n.evaluate(a).toUpperCase()],downcase:[On,[On],(a,[n])=>n.evaluate(a).toLowerCase()],concat:[On,ko(Cn),(a,n)=>n.map(l=>Fi(l.evaluate(a))).join("")],"resolved-locale":[On,[me],(a,[n])=>n.evaluate(a).resolvedLocale()]});var ks=fl;function yc(a){return{result:"success",value:a}}function Yo(a){return{result:"error",value:a}}function Xo(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function gl(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function ma(a){return!!a.expression&&a.expression.interpolated}function Hn(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function ga(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function Vu(a){return a}function bc(a,n){const l=n.type==="color",u=a.stops&&typeof a.stops[0][0]=="object",m=u||!(u||a.property!==void 0),v=a.type||(ma(n)?"exponential":"interval");if(l&&((a=rr({},a)).stops&&(a.stops=a.stops.map(P=>[P[0],Pt.parse(P[1])])),a.default=Pt.parse(a.default?a.default:n.default)),a.colorSpace&&a.colorSpace!=="rgb"&&!rl[a.colorSpace])throw new Error(`Unknown color space: ${a.colorSpace}`);let x,R,N;if(v==="exponential")x=wc;else if(v==="interval")x=Jo;else if(v==="categorical"){x=xc,R=Object.create(null);for(const P of a.stops)R[P[0]]=P[1];N=typeof a.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);x=Uu}if(u){const P={},G=[];for(let X=0;X<a.stops.length;X++){const Q=a.stops[X],se=Q[0].zoom;P[se]===void 0&&(P[se]={zoom:se,type:a.type,property:a.property,default:a.default,stops:[]},G.push(se)),P[se].stops.push([Q[0].value,Q[1]])}const H=[];for(const X of G)H.push([P[X].zoom,bc(P[X],n)]);const K={name:"linear"};return{kind:"composite",interpolationType:K,interpolationFactor:Fr.interpolationFactor.bind(void 0,K),zoomStops:H.map(X=>X[0]),evaluate:({zoom:X},Q)=>wc({stops:H,base:a.base},n,X).evaluate(X,Q)}}if(m){const P=v==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:P,interpolationFactor:Fr.interpolationFactor.bind(void 0,P),zoomStops:a.stops.map(G=>G[0]),evaluate:({zoom:G})=>x(a,n,G,R,N)}}return{kind:"source",evaluate(P,G){const H=G&&G.properties?G.properties[a.property]:void 0;return H===void 0?br(a.default,n.default):x(a,n,H,R,N)}}}function br(a,n,l){return a!==void 0?a:n!==void 0?n:l!==void 0?l:void 0}function xc(a,n,l,u,m){return br(typeof l===m?u[l]:void 0,a.default,n.default)}function Jo(a,n,l){if(Hn(l)!=="number")return br(a.default,n.default);const u=a.stops.length;if(u===1||l<=a.stops[0][0])return a.stops[0][1];if(l>=a.stops[u-1][0])return a.stops[u-1][1];const m=ra(a.stops.map(v=>v[0]),l);return a.stops[m][1]}function wc(a,n,l){const u=a.base!==void 0?a.base:1;if(Hn(l)!=="number")return br(a.default,n.default);const m=a.stops.length;if(m===1||l<=a.stops[0][0])return a.stops[0][1];if(l>=a.stops[m-1][0])return a.stops[m-1][1];const v=ra(a.stops.map(G=>G[0]),l),x=function(G,H,K,X){const Q=X-K,se=G-K;return Q===0?0:H===1?se/Q:(Math.pow(H,se)-1)/(Math.pow(H,Q)-1)}(l,u,a.stops[v][0],a.stops[v+1][0]),R=a.stops[v][1],N=a.stops[v+1][1];let P=ws[n.type]||Vu;if(a.colorSpace&&a.colorSpace!=="rgb"){const G=rl[a.colorSpace];P=(H,K)=>G.reverse(G.interpolate(G.forward(H),G.forward(K),x))}return typeof R.evaluate=="function"?{evaluate(...G){const H=R.evaluate.apply(void 0,G),K=N.evaluate.apply(void 0,G);if(H!==void 0&&K!==void 0)return P(H,K,x)}}:P(R,N,x)}function Uu(a,n,l){return n.type==="color"?l=Pt.parse(l):n.type==="formatted"?l=jn.fromString(l.toString()):n.type==="resolvedImage"?l=Wn.fromString(l.toString()):Hn(l)===n.type||n.type==="enum"&&n.values[l]||(l=void 0),br(l,a.default,n.default)}class _a{constructor(n,l){this.expression=n,this._warningHistory={},this._evaluator=new qo,this._defaultValue=l?function(u){return u.type==="color"&&(ga(u.default)||Array.isArray(u.default))?new Pt(0,0,0,0):u.type==="color"?Pt.parse(u.default)||null:u.default===void 0?null:u.default}(l):null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(n,l,u,m,v,x,R,N){return this._evaluator.globals=n,this._evaluator.feature=l,this._evaluator.featureState=u,this._evaluator.canonical=m||null,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this._evaluator.featureTileCoord=R||null,this._evaluator.featureDistanceData=N||null,this.expression.evaluate(this._evaluator)}evaluate(n,l,u,m,v,x,R,N){this._evaluator.globals=n,this._evaluator.feature=l||null,this._evaluator.featureState=u||null,this._evaluator.canonical=m||null,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null,this._evaluator.featureTileCoord=R||null,this._evaluator.featureDistanceData=N||null;try{const P=this.expression.evaluate(this._evaluator);if(P==null||typeof P=="number"&&P!=P)return this._defaultValue;if(this._enumValues&&!(P in this._enumValues))throw new Ai(`Expected value to be one of ${Object.keys(this._enumValues).map(G=>JSON.stringify(G)).join(", ")}, but found ${JSON.stringify(P)} instead.`);return P}catch(P){return this._warningHistory[P.message]||(this._warningHistory[P.message]=!0,typeof console<"u"&&console.warn(P.message)),this._defaultValue}}}function va(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in ks}function Ro(a,n){const l=new ac(ks,[],n?function(m){const v={color:hr,string:On,number:qt,enum:On,boolean:xn,formatted:Ne,resolvedImage:He};return m.type==="array"?rt(v[m.value]||Cn,m.length):v[m.type]}(n):void 0),u=l.parse(a,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?yc(new _a(u,n)):Yo(l.errors)}class ya{constructor(n,l){this.kind=n,this._styleExpression=l,this.isStateDependent=n!=="constant"&&!Ko(l.expression)}evaluateWithoutErrorHandling(n,l,u,m,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,l,u,m,v,x)}evaluate(n,l,u,m,v,x){return this._styleExpression.evaluate(n,l,u,m,v,x)}}class Rs{constructor(n,l,u,m){this.kind=n,this.zoomStops=u,this._styleExpression=l,this.isStateDependent=n!=="camera"&&!Ko(l.expression),this.interpolationType=m}evaluateWithoutErrorHandling(n,l,u,m,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,l,u,m,v,x)}evaluate(n,l,u,m,v,x){return this._styleExpression.evaluate(n,l,u,m,v,x)}interpolationFactor(n,l,u){return this.interpolationType?Fr.interpolationFactor(this.interpolationType,n,l,u):0}}function ba(a,n){if((a=Ro(a,n)).result==="error")return a;const l=a.value.expression,u=Ho(l);if(!u&&!Xo(n))return Yo([new Yi("","data expressions not supported")]);const m=na(l,["zoom","pitch","distance-from-center"]);if(!m&&!gl(n))return Yo([new Yi("","zoom expressions not supported")]);const v=Qo(l);return v||m?v instanceof Yi?Yo([v]):v instanceof Fr&&!ma(n)?Yo([new Yi("",'"interpolate" expressions cannot be used with this property')]):yc(v?new Rs(u?"camera":"composite",a.value,v.labels,v instanceof Fr?v.interpolation:void 0):new ya(u?"constant":"source",a.value)):Yo([new Yi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class $s{constructor(n,l){this._parameters=n,this._specification=l,rr(this,bc(this._parameters,this._specification))}static deserialize(n){return new $s(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Qo(a){let n=null;if(a instanceof ll)n=Qo(a.result);else if(a instanceof dc){for(const l of a.args)if(n=Qo(l),n)break}else(a instanceof sa||a instanceof Fr)&&a.input instanceof mr&&a.input.name==="zoom"&&(n=a);return n instanceof Yi||a.eachChild(l=>{const u=Qo(l);u instanceof Yi?n=u:!n&&u?n=new Yi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&u&&n!==u&&(n=new Yi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}class Wt{constructor(n,l,u,m){this.message=(n?`${n}: `:"")+u,m&&(this.identifier=m),l!=null&&l.__line__&&(this.line=l.__line__)}}function xr(a){const n=a.key,l=a.value,u=a.valueSpec||{},m=a.objectElementValidators||{},v=a.style,x=a.styleSpec;let R=[];const N=Hn(l);if(N!=="object")return[new Wt(n,l,`object expected, ${N} found`)];for(const P in l){const G=P.split(".")[0],H=u[G]||u["*"];let K;m[G]?K=m[G]:u[G]?K=Vi:m["*"]?K=m["*"]:u["*"]&&(K=Vi),K?R=R.concat(K({key:(n&&`${n}.`)+P,value:l[P],valueSpec:H,style:v,styleSpec:x,object:l,objectKey:P},l)):R.push(new Wt(n,l[P],`unknown property "${P}"`))}for(const P in u)m[P]||u[P].required&&u[P].default===void 0&&l[P]===void 0&&R.push(new Wt(n,l,`missing required property "${P}"`));return R}function Ms(a){const n=a.value,l=a.valueSpec,u=a.style,m=a.styleSpec,v=a.key,x=a.arrayElementValidator||Vi;if(Hn(n)!=="array")return[new Wt(v,n,`array expected, ${Hn(n)} found`)];if(l.length&&n.length!==l.length)return[new Wt(v,n,`array length ${l.length} expected, length ${n.length} found`)];if(l["min-length"]&&n.length<l["min-length"])return[new Wt(v,n,`array length at least ${l["min-length"]} expected, length ${n.length} found`)];let R={type:l.value,values:l.values,minimum:l.minimum,maximum:l.maximum,function:void 0};m.$version<7&&(R.function=l.function),Hn(l.value)==="object"&&(R=l.value);let N=[];for(let P=0;P<n.length;P++)N=N.concat(x({array:n,arrayIndex:P,value:n[P],valueSpec:R,style:u,styleSpec:m,key:`${v}[${P}]`}));return N}function $o(a){const n=a.key,l=a.value,u=a.valueSpec;let m=Hn(l);if(m==="number"&&l!=l&&(m="NaN"),m!=="number")return[new Wt(n,l,`number expected, ${m} found`)];if("minimum"in u){let v=u.minimum;if(Hn(u.minimum)==="array"&&(v=u.minimum[a.arrayIndex]),l<v)return[new Wt(n,l,`${l} is less than the minimum value ${v}`)]}if("maximum"in u){let v=u.maximum;if(Hn(u.maximum)==="array"&&(v=u.maximum[a.arrayIndex]),l>v)return[new Wt(n,l,`${l} is greater than the maximum value ${v}`)]}return[]}function _l(a){const n=a.valueSpec,l=mi(a.value.type);let u,m,v,x={};const R=l!=="categorical"&&a.value.property===void 0,N=!R,P=Hn(a.value.stops)==="array"&&Hn(a.value.stops[0])==="array"&&Hn(a.value.stops[0][0])==="object",G=xr({key:a.key,value:a.value,valueSpec:a.styleSpec.function,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(X){if(l==="identity")return[new Wt(X.key,X.value,'identity function may not have a "stops" property')];let Q=[];const se=X.value;return Q=Q.concat(Ms({key:X.key,value:se,valueSpec:X.valueSpec,style:X.style,styleSpec:X.styleSpec,arrayElementValidator:H})),Hn(se)==="array"&&se.length===0&&Q.push(new Wt(X.key,se,"array must have at least one stop")),Q},default:function(X){return Vi({key:X.key,value:X.value,valueSpec:n,style:X.style,styleSpec:X.styleSpec})}}});return l==="identity"&&R&&G.push(new Wt(a.key,a.value,'missing required property "property"')),l==="identity"||a.value.stops||G.push(new Wt(a.key,a.value,'missing required property "stops"')),l==="exponential"&&a.valueSpec.expression&&!ma(a.valueSpec)&&G.push(new Wt(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(N&&!Xo(a.valueSpec)?G.push(new Wt(a.key,a.value,"property functions not supported")):R&&!gl(a.valueSpec)&&G.push(new Wt(a.key,a.value,"zoom functions not supported"))),l!=="categorical"&&!P||a.value.property!==void 0||G.push(new Wt(a.key,a.value,'"property" property is required')),G;function H(X){let Q=[];const se=X.value,he=X.key;if(Hn(se)!=="array")return[new Wt(he,se,`array expected, ${Hn(se)} found`)];if(se.length!==2)return[new Wt(he,se,`array length 2 expected, length ${se.length} found`)];if(P){if(Hn(se[0])!=="object")return[new Wt(he,se,`object expected, ${Hn(se[0])} found`)];if(se[0].zoom===void 0)return[new Wt(he,se,"object stop key must have zoom")];if(se[0].value===void 0)return[new Wt(he,se,"object stop key must have value")];const xe=mi(se[0].zoom);if(typeof xe!="number")return[new Wt(he,se[0].zoom,"stop zoom values must be numbers")];if(v&&v>xe)return[new Wt(he,se[0].zoom,"stop zoom values must appear in ascending order")];xe!==v&&(v=xe,m=void 0,x={}),Q=Q.concat(xr({key:`${he}[0]`,value:se[0],valueSpec:{zoom:{}},style:X.style,styleSpec:X.styleSpec,objectElementValidators:{zoom:$o,value:K}}))}else Q=Q.concat(K({key:`${he}[0]`,value:se[0],valueSpec:{},style:X.style,styleSpec:X.styleSpec},se));return va(or(se[1]))?Q.concat([new Wt(`${he}[1]`,se[1],"expressions are not allowed in function stops.")]):Q.concat(Vi({key:`${he}[1]`,value:se[1],valueSpec:n,style:X.style,styleSpec:X.styleSpec}))}function K(X,Q){const se=Hn(X.value),he=mi(X.value),xe=X.value!==null?X.value:Q;if(u){if(se!==u)return[new Wt(X.key,xe,`${se} stop domain type must match previous stop domain type ${u}`)]}else u=se;if(se!=="number"&&se!=="string"&&se!=="boolean"&&typeof he!="number"&&typeof he!="string"&&typeof he!="boolean")return[new Wt(X.key,xe,"stop domain value must be a number, string, or boolean")];if(se!=="number"&&l!=="categorical"){let Ie=`number expected, ${se} found`;return Xo(n)&&l===void 0&&(Ie+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Wt(X.key,xe,Ie)]}return l!=="categorical"||se!=="number"||typeof he=="number"&&isFinite(he)&&Math.floor(he)===he?l!=="categorical"&&se==="number"&&typeof he=="number"&&typeof m=="number"&&m!==void 0&&he<m?[new Wt(X.key,xe,"stop domain values must appear in ascending order")]:(m=he,l==="categorical"&&he in x?[new Wt(X.key,xe,"stop domain values must be unique")]:(x[he]=!0,[])):[new Wt(X.key,xe,`integer expected, found ${String(he)}`)]}}function Mo(a){const n=(a.expressionContext==="property"?ba:Ro)(or(a.value),a.valueSpec);if(n.result==="error")return n.value.map(u=>new Wt(`${a.key}${u.key}`,a.value,u.message));const l=n.value.expression||n.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!l.outputDefined())return[new Wt(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!Ko(l))return[new Wt(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter")return xa(l,a);if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!na(l,["zoom","feature-state"]))return[new Wt(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!Ho(l))return[new Wt(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function xa(a,n){const l=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(n.valueSpec&&n.valueSpec.expression)for(const m of n.valueSpec.expression.parameters)l.delete(m);if(l.size===0)return[];const u=[];return a instanceof mr&&l.has(a.name)?[new Wt(n.key,n.value,`["${a.name}"] expression is not supported in a filter for a ${n.object.type} layer with id: ${n.object.id}`)]:(a.eachChild(m=>{u.push(...xa(m,n))}),u)}function Is(a){const n=a.key,l=a.value,u=a.valueSpec,m=[];return Array.isArray(u.values)?u.values.indexOf(mi(l))===-1&&m.push(new Wt(n,l,`expected one of [${u.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(u.values).indexOf(mi(l))===-1&&m.push(new Wt(n,l,`expected one of [${Object.keys(u.values).join(", ")}], ${JSON.stringify(l)} found`)),m}function vl(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const n of a.slice(1))if(!vl(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}function Io(a,n="fill"){if(a==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};vl(a)||(a=No(a));const l=a;let u=!0;try{u=function(P){if(!es(P))return P;let G=or(P);return Cc(G),G=Ec(G),G}(l)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(l,null,2)}
        `)}const m=qe[`filter_${n}`],v=Ro(u,m);let x=null;if(v.result==="error")throw new Error(v.value.map(P=>`${P.key}: ${P.message}`).join(", "));x=(P,G,H)=>v.value.evaluate(P,G,{},H);let R=null,N=null;if(u!==l){const P=Ro(l,m);if(P.result==="error")throw new Error(P.value.map(G=>`${G.key}: ${G.message}`).join(", "));R=(G,H,K,X,Q)=>P.value.evaluate(G,H,{},K,void 0,void 0,X,Q),N=!Ho(P.value.expression)}return x=x,{filter:x,dynamicFilter:R||void 0,needGeometry:Ns(u),needFeature:!!N}}function Ec(a){if(!Array.isArray(a))return a;const n=function(l){if(ju.has(l[0])){for(let u=1;u<l.length;u++)if(es(l[u]))return!0}return l}(a);return n===!0?n:n.map(l=>Ec(l))}function Cc(a){let n=!1;const l=[];if(a[0]==="case"){for(let u=1;u<a.length-1;u+=2)n=n||es(a[u]),l.push(a[u+1]);l.push(a[a.length-1])}else if(a[0]==="match"){n=n||es(a[1]);for(let u=2;u<a.length-1;u+=2)l.push(a[u+1]);l.push(a[a.length-1])}else if(a[0]==="step"){n=n||es(a[1]);for(let u=1;u<a.length-1;u+=2)l.push(a[u+1])}n&&(a.length=0,a.push("any",...l));for(let u=1;u<a.length;u++)Cc(a[u])}function es(a){if(!Array.isArray(a))return!1;if((n=a[0])==="pitch"||n==="distance-from-center")return!0;var n;for(let l=1;l<a.length;l++)if(es(a[l]))return!0;return!1}const ju=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Gu(a,n){return a<n?-1:a>n?1:0}function Ns(a){if(!Array.isArray(a))return!1;if(a[0]==="within")return!0;for(let n=1;n<a.length;n++)if(Ns(a[n]))return!0;return!1}function No(a){if(!a)return!0;const n=a[0];return a.length<=1?n!=="any":n==="=="?nr(a[1],a[2],"=="):n==="!="?wa(nr(a[1],a[2],"==")):n==="<"||n===">"||n==="<="||n===">="?nr(a[1],a[2],n):n==="any"?(l=a.slice(1),["any"].concat(l.map(No))):n==="all"?["all"].concat(a.slice(1).map(No)):n==="none"?["all"].concat(a.slice(1).map(No).map(wa)):n==="in"?Ls(a[1],a.slice(2)):n==="!in"?wa(Ls(a[1],a.slice(2))):n==="has"?Sc(a[1]):n==="!has"?wa(Sc(a[1])):n!=="within"||a;var l}function nr(a,n,l){switch(a){case"$type":return[`filter-type-${l}`,n];case"$id":return[`filter-id-${l}`,n];default:return[`filter-${l}`,a,n]}}function Ls(a,n){if(n.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(l=>typeof l!=typeof n[0])?["filter-in-large",a,["literal",n.sort(Gu)]]:["filter-in-small",a,["literal",n]]}}function Sc(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function wa(a){return["!",a]}function yl(a){return vl(or(a.value))?Mo(rr({},a,{expressionContext:"filter",valueSpec:a.styleSpec[`filter_${a.layerType||"fill"}`]})):Tc(a)}function Tc(a){const n=a.value,l=a.key;if(Hn(n)!=="array")return[new Wt(l,n,`array expected, ${Hn(n)} found`)];const u=a.styleSpec;let m,v=[];if(n.length<1)return[new Wt(l,n,"filter array must have at least 1 element")];switch(v=v.concat(Is({key:`${l}[0]`,value:n[0],valueSpec:u.filter_operator,style:a.style,styleSpec:a.styleSpec})),mi(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&mi(n[1])==="$type"&&v.push(new Wt(l,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new Wt(l,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(m=Hn(n[1]),m!=="string"&&v.push(new Wt(`${l}[1]`,n[1],`string expected, ${m} found`)));for(let x=2;x<n.length;x++)m=Hn(n[x]),mi(n[1])==="$type"?v=v.concat(Is({key:`${l}[${x}]`,value:n[x],valueSpec:u.geometry_type,style:a.style,styleSpec:a.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&v.push(new Wt(`${l}[${x}]`,n[x],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)v=v.concat(Tc({key:`${l}[${x}]`,value:n[x],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":m=Hn(n[1]),n.length!==2?v.push(new Wt(l,n,`filter array for "${n[0]}" operator must have 2 elements`)):m!=="string"&&v.push(new Wt(`${l}[1]`,n[1],`string expected, ${m} found`));break;case"within":m=Hn(n[1]),n.length!==2?v.push(new Wt(l,n,`filter array for "${n[0]}" operator must have 2 elements`)):m!=="object"&&v.push(new Wt(`${l}[1]`,n[1],`object expected, ${m} found`))}return v}function Ea(a,n){const l=a.key,u=a.style,m=a.styleSpec,v=a.value,x=a.objectKey,R=m[`${n}_${a.layerType}`];if(!R)return[];const N=x.match(/^(.*)-transition$/);if(n==="paint"&&N&&R[N[1]]&&R[N[1]].transition)return Vi({key:l,value:v,valueSpec:m.transition,style:u,styleSpec:m});const P=a.valueSpec||R[x];if(!P)return[new Wt(l,v,`unknown property "${x}"`)];let G;if(Hn(v)==="string"&&Xo(P)&&!P.tokens&&(G=/^{([^}]+)}$/.exec(v)))return[new Wt(l,v,`"${x}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(G[1])} }\`.`)];const H=[];return a.layerType==="symbol"&&(x==="text-field"&&u&&!u.glyphs&&H.push(new Wt(l,v,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&ga(or(v))&&mi(v.type)==="identity"&&H.push(new Wt(l,v,'"text-font" does not support identity functions'))),H.concat(Vi({key:a.key,value:v,valueSpec:P,style:u,styleSpec:m,expressionContext:"property",propertyType:n,propertyKey:x}))}function Ac(a){return Ea(a,"paint")}function Ca(a){return Ea(a,"layout")}function kc(a){let n=[];const l=a.value,u=a.key,m=a.style,v=a.styleSpec;l.type||l.ref||n.push(new Wt(u,l,'either "type" or "ref" is required'));let x=mi(l.type);const R=mi(l.ref);if(l.id){const N=mi(l.id);for(let P=0;P<a.arrayIndex;P++){const G=m.layers[P];mi(G.id)===N&&n.push(new Wt(u,l.id,`duplicate layer id "${l.id}", previously used at line ${G.id.__line__}`))}}if("ref"in l){let N;["type","source","source-layer","filter","layout"].forEach(P=>{P in l&&n.push(new Wt(u,l[P],`"${P}" is prohibited for ref layers`))}),m.layers.forEach(P=>{mi(P.id)===R&&(N=P)}),N?N.ref?n.push(new Wt(u,l.ref,"ref cannot reference another ref layer")):x=mi(N.type):typeof R=="string"&&n.push(new Wt(u,l.ref,`ref layer "${R}" not found`))}else if(x!=="background"&&x!=="sky")if(l.source){const N=m.sources&&m.sources[l.source],P=N&&mi(N.type);N?P==="vector"&&x==="raster"?n.push(new Wt(u,l.source,`layer "${l.id}" requires a raster source`)):P==="raster"&&x!=="raster"?n.push(new Wt(u,l.source,`layer "${l.id}" requires a vector source`)):P!=="vector"||l["source-layer"]?P==="raster-dem"&&x!=="hillshade"?n.push(new Wt(u,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!l.paint||!l.paint["line-gradient"]&&!l.paint["line-trim-offset"]||P==="geojson"&&N.lineMetrics||n.push(new Wt(u,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Wt(u,l,`layer "${l.id}" must specify a "source-layer"`)):n.push(new Wt(u,l.source,`source "${l.source}" not found`))}else n.push(new Wt(u,l,'missing required property "source"'));return n=n.concat(xr({key:u,value:l,valueSpec:v.layer,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Vi({key:`${u}.type`,value:l.type,valueSpec:v.layer.type,style:a.style,styleSpec:a.styleSpec,object:l,objectKey:"type"}),filter:N=>yl(rr({layerType:x},N)),layout:N=>xr({layer:l,key:N.key,value:N.value,valueSpec:{},style:N.style,styleSpec:N.styleSpec,objectElementValidators:{"*":P=>Ca(rr({layerType:x},P))}}),paint:N=>xr({layer:l,key:N.key,value:N.value,valueSpec:{},style:N.style,styleSpec:N.styleSpec,objectElementValidators:{"*":P=>Ac(rr({layerType:x},P))}})}})),n}function ts(a){const n=a.value,l=a.key,u=Hn(n);return u!=="string"?[new Wt(l,n,`string expected, ${u} found`)]:[]}const Sa={promoteId:function({key:a,value:n}){if(Hn(n)==="string")return ts({key:a,value:n});{const l=[];for(const u in n)l.push(...ts({key:`${a}.${u}`,value:n[u]}));return l}}};function Rc(a){const n=a.value,l=a.key,u=a.styleSpec,m=a.style;if(!n.type)return[new Wt(l,n,'"type" is required')];const v=mi(n.type);let x;switch(v){case"vector":case"raster":case"raster-dem":return x=xr({key:l,value:n,valueSpec:u[`source_${v.replace("-","_")}`],style:a.style,styleSpec:u,objectElementValidators:Sa}),x;case"geojson":if(x=xr({key:l,value:n,valueSpec:u.source_geojson,style:m,styleSpec:u,objectElementValidators:Sa}),n.cluster)for(const R in n.clusterProperties){const[N,P]=n.clusterProperties[R],G=typeof N=="string"?[N,["accumulated"],["get",R]]:N;x.push(...Mo({key:`${l}.${R}.map`,value:P,expressionContext:"cluster-map"})),x.push(...Mo({key:`${l}.${R}.reduce`,value:G,expressionContext:"cluster-reduce"}))}return x;case"video":return xr({key:l,value:n,valueSpec:u.source_video,style:m,styleSpec:u});case"image":return xr({key:l,value:n,valueSpec:u.source_image,style:m,styleSpec:u});case"canvas":return[new Wt(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Is({key:`${l}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,styleSpec:u})}}function bl(a){const n=a.value,l=a.styleSpec,u=l.light,m=a.style;let v=[];const x=Hn(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new Wt("light",n,`object expected, ${x} found`)]),v;for(const R in n){const N=R.match(/^(.*)-transition$/);v=v.concat(N&&u[N[1]]&&u[N[1]].transition?Vi({key:R,value:n[R],valueSpec:l.transition,style:m,styleSpec:l}):u[R]?Vi({key:R,value:n[R],valueSpec:u[R],style:m,styleSpec:l}):[new Wt(R,n[R],`unknown property "${R}"`)])}return v}function xl(a){const n=a.value,l=a.key,u=a.style,m=a.styleSpec,v=m.terrain;let x=[];const R=Hn(n);if(n===void 0)return x;if(R!=="object")return x=x.concat([new Wt("terrain",n,`object expected, ${R} found`)]),x;for(const N in n){const P=N.match(/^(.*)-transition$/);x=x.concat(P&&v[P[1]]&&v[P[1]].transition?Vi({key:N,value:n[N],valueSpec:m.transition,style:u,styleSpec:m}):v[N]?Vi({key:N,value:n[N],valueSpec:v[N],style:u,styleSpec:m}):[new Wt(N,n[N],`unknown property "${N}"`)])}if(n.source){const N=u.sources&&u.sources[n.source],P=N&&mi(N.type);N?P!=="raster-dem"&&x.push(new Wt(l,n.source,`terrain cannot be used with a source of type ${String(P)}, it only be used with a "raster-dem" source type`)):x.push(new Wt(l,n.source,`source "${n.source}" not found`))}else x.push(new Wt(l,n,'terrain is missing required property "source"'));return x}function $c(a){const n=a.value,l=a.style,u=a.styleSpec,m=u.fog;let v=[];const x=Hn(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new Wt("fog",n,`object expected, ${x} found`)]),v;for(const R in n){const N=R.match(/^(.*)-transition$/);v=v.concat(N&&m[N[1]]&&m[N[1]].transition?Vi({key:R,value:n[R],valueSpec:u.transition,style:l,styleSpec:u}):m[R]?Vi({key:R,value:n[R],valueSpec:m[R],style:l,styleSpec:u}):[new Wt(R,n[R],`unknown property "${R}"`)])}return v}const Ta={"*":()=>[],array:Ms,boolean:function(a){const n=a.value,l=a.key,u=Hn(n);return u!=="boolean"?[new Wt(l,n,`boolean expected, ${u} found`)]:[]},number:$o,color:function(a){const n=a.key,l=a.value,u=Hn(l);return u!=="string"?[new Wt(n,l,`color expected, ${u} found`)]:At.parseCSSColor(l)===null?[new Wt(n,l,`color expected, "${l}" found`)]:[]},enum:Is,filter:yl,function:_l,layer:kc,object:xr,source:Rc,light:bl,terrain:xl,fog:$c,string:ts,formatted:function(a){return ts(a).length===0?[]:Mo(a)},resolvedImage:function(a){return ts(a).length===0?[]:Mo(a)},projection:function(a){const n=a.value,l=a.styleSpec,u=l.projection,m=a.style;let v=[];const x=Hn(n);if(x==="object")for(const R in n)v=v.concat(Vi({key:R,value:n[R],valueSpec:u[R],style:m,styleSpec:l}));else x!=="string"&&(v=v.concat([new Wt("projection",n,`object or string expected, ${x} found`)]));return v}};function Vi(a){const n=a.value,l=a.valueSpec,u=a.styleSpec;return l.expression&&ga(mi(n))?_l(a):l.expression&&va(or(n))?Mo(a):l.type&&Ta[l.type]?Ta[l.type](a):xr(rr({},a,{valueSpec:l.type?u[l.type]:l}))}function Mc(a){const n=a.value,l=a.key,u=ts(a);return u.length||(n.indexOf("{fontstack}")===-1&&u.push(new Wt(l,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&u.push(new Wt(l,n,'"glyphs" url must include a "{range}" token'))),u}function Ic(a,n=qe){return Nr(Vi({key:"",value:a,valueSpec:n.$root,styleSpec:n,style:a,objectElementValidators:{glyphs:Mc,"*":()=>[]}}))}const Nc=a=>Nr(Ac(a)),qu=a=>Nr(Ca(a));function Nr(a){return a.slice().sort((n,l)=>n.line&&l.line?n.line-l.line:0)}function Lc(a,n){let l=!1;if(n&&n.length)for(const u of n)a.fire(new ui(new Error(u.message))),l=!0;return l}var ns=Vr;function Vr(a,n,l){var u=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;var m=new Int32Array(this.arrayBuffer);a=m[0],this.d=(n=m[1])+2*(l=m[2]);for(var v=0;v<this.d*this.d;v++){var x=m[3+v],R=m[3+v+1];u.push(x===R?null:m.subarray(x,R))}var N=m[3+u.length+1];this.keys=m.subarray(m[3+u.length],N),this.bboxes=m.subarray(N),this.insert=this._insertReadonly}else{this.d=n+2*l;for(var P=0;P<this.d*this.d;P++)u.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=a,this.padding=l,this.scale=n/a,this.uid=0;var G=l/n*a;this.min=-G,this.max=a+G}Vr.prototype.insert=function(a,n,l,u,m){this._forEachCell(n,l,u,m,this._insertCell,this.uid++),this.keys.push(a),this.bboxes.push(n),this.bboxes.push(l),this.bboxes.push(u),this.bboxes.push(m)},Vr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Vr.prototype._insertCell=function(a,n,l,u,m,v){this.cells[m].push(v)},Vr.prototype.query=function(a,n,l,u,m){var v=this.min,x=this.max;if(a<=v&&n<=v&&x<=l&&x<=u&&!m)return Array.prototype.slice.call(this.keys);var R=[];return this._forEachCell(a,n,l,u,this._queryCell,R,{},m),R},Vr.prototype._queryCell=function(a,n,l,u,m,v,x,R){var N=this.cells[m];if(N!==null)for(var P=this.keys,G=this.bboxes,H=0;H<N.length;H++){var K=N[H];if(x[K]===void 0){var X=4*K;(R?R(G[X+0],G[X+1],G[X+2],G[X+3]):a<=G[X+2]&&n<=G[X+3]&&l>=G[X+0]&&u>=G[X+1])?(x[K]=!0,v.push(P[K])):x[K]=!1}}},Vr.prototype._forEachCell=function(a,n,l,u,m,v,x,R){for(var N=this._convertToCellCoord(a),P=this._convertToCellCoord(n),G=this._convertToCellCoord(l),H=this._convertToCellCoord(u),K=N;K<=G;K++)for(var X=P;X<=H;X++){var Q=this.d*X+K;if((!R||R(this._convertFromCellCoord(K),this._convertFromCellCoord(X),this._convertFromCellCoord(K+1),this._convertFromCellCoord(X+1)))&&m.call(this,a,n,l,u,Q,v,x,R))return}},Vr.prototype._convertFromCellCoord=function(a){return(a-this.padding)/this.scale},Vr.prototype._convertToCellCoord=function(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))},Vr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var a=this.cells,n=3+this.cells.length+1+1,l=0,u=0;u<this.cells.length;u++)l+=this.cells[u].length;var m=new Int32Array(n+l+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;for(var v=n,x=0;x<a.length;x++){var R=a[x];m[3+x]=v,m.set(R,v),v+=R.length}return m[3+a.length]=v,m.set(this.keys,v),m[3+a.length+1]=v+=this.keys.length,m.set(this.bboxes,v),v+=this.bboxes.length,m.buffer};const Aa={};function Zt(a,n,l={}){Object.defineProperty(a,"_classRegistryKey",{value:n,writeable:!1}),Aa[n]={klass:a,omit:l.omit||[]}}Zt(Object,"Object"),ns.serialize=function(a,n){const l=a.toArrayBuffer();return n&&n.push(l),{buffer:l}},ns.deserialize=function(a){return new ns(a.buffer)},Object.defineProperty(ns,"name",{value:"Grid"}),Zt(ns,"Grid"),Zt(Pt,"Color"),Zt(Error,"Error"),Zt(Oe,"AJAXError"),Zt(Wn,"ResolvedImage"),Zt($s,"StylePropertyFunction"),Zt(_a,"StyleExpression",{omit:["_evaluator"]}),Zt(Rs,"ZoomDependentExpression"),Zt(ya,"ZoomConstantExpression"),Zt(mr,"CompoundExpression",{omit:["_evaluate"]});for(const a in ks)Aa[ks[a]._classRegistryKey]||Zt(ks[a],`Expression${a}`);function Oc(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function Pc(a){return y.ImageBitmap&&a instanceof y.ImageBitmap}function Os(a,n){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp)return a;if(Oc(a)||Pc(a))return n&&n.push(a),a;if(ArrayBuffer.isView(a)){const l=a;return n&&n.push(l.buffer),l}if(a instanceof y.ImageData)return n&&n.push(a.data.buffer),a;if(Array.isArray(a)){const l=[];for(const u of a)l.push(Os(u,n));return l}if(typeof a=="object"){const l=a.constructor,u=l._classRegistryKey;if(!u)throw new Error(`can't serialize object of unregistered class ${u}`);const m=l.serialize?l.serialize(a,n):{};if(!l.serialize){for(const v in a)a.hasOwnProperty(v)&&(Aa[u].omit.indexOf(v)>=0||(m[v]=Os(a[v],n)));a instanceof Error&&(m.message=a.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(m.$name=u),m}throw new Error("can't serialize object of type "+typeof a)}function Ps(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||Oc(a)||Pc(a)||ArrayBuffer.isView(a)||a instanceof y.ImageData)return a;if(Array.isArray(a))return a.map(Ps);if(typeof a=="object"){const n=a.$name||"Object",{klass:l}=Aa[n];if(!l)throw new Error(`can't deserialize unregistered class ${n}`);if(l.deserialize)return l.deserialize(a);const u=Object.create(l.prototype);for(const m of Object.keys(a))m!=="$name"&&(u[m]=Ps(a[m]));return u}throw new Error("can't deserialize object of type "+typeof a)}class Dc{constructor(){this.first=!0}update(n,l){const u=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=u,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=u,!0):(this.lastFloorZoom>u?(this.lastIntegerZoom=u+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<u&&(this.lastIntegerZoom=u,this.lastIntegerZoomTime=l),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=u,!0))}}const Bc=a=>a>=1536&&a<=1791,zc=a=>a>=1872&&a<=1919,Ds=a=>a>=2208&&a<=2303,Fc=a=>a>=11904&&a<=12031,Vc=a=>a>=12032&&a<=12255,Bs=a=>a>=12272&&a<=12287,ka=a=>a>=12288&&a<=12351,Ra=a=>a>=12352&&a<=12447,$a=a=>a>=12448&&a<=12543,wl=a=>a>=12544&&a<=12591,El=a=>a>=12704&&a<=12735,Cl=a=>a>=12736&&a<=12783,Sl=a=>a>=12784&&a<=12799,Ma=a=>a>=12800&&a<=13055,Ia=a=>a>=13056&&a<=13311,Uc=a=>a>=13312&&a<=19903,Tl=a=>a>=19968&&a<=40959,jc=a=>a>=40960&&a<=42127,Na=a=>a>=42128&&a<=42191,Gc=a=>a>=44032&&a<=55215,qc=a=>a>=63744&&a<=64255,Al=a=>a>=64336&&a<=65023,Hc=a=>a>=65040&&a<=65055,kl=a=>a>=65072&&a<=65103,Rl=a=>a>=65104&&a<=65135,$l=a=>a>=65136&&a<=65279,Ml=a=>a>=65280&&a<=65519;function La(a){for(const n of a)if(o(n.charCodeAt(0)))return!0;return!1}function Oa(a){for(const n of a)if(!_(n.charCodeAt(0)))return!1;return!0}function _(a){return!(Bc(a)||zc(a)||Ds(a)||Al(a)||$l(a))}function o(a){return!(a!==746&&a!==747&&(a<4352||!(El(a)||wl(a)||kl(a)&&!(a>=65097&&a<=65103)||qc(a)||Ia(a)||Fc(a)||Cl(a)||!(!ka(a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||Uc(a)||Tl(a)||Ma(a)||(n=>n>=12592&&n<=12687)(a)||(n=>n>=43360&&n<=43391)(a)||(n=>n>=55216&&n<=55295)(a)||(n=>n>=4352&&n<=4607)(a)||Gc(a)||Ra(a)||Bs(a)||(n=>n>=12688&&n<=12703)(a)||Vc(a)||Sl(a)||$a(a)&&a!==12540||!(!Ml(a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!Rl(a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||(n=>n>=5120&&n<=5759)(a)||(n=>n>=6320&&n<=6399)(a)||Hc(a)||(n=>n>=19904&&n<=19967)(a)||jc(a)||Na(a))))}function f(a){return!(o(a)||function(n){return!!((l=>l>=128&&l<=255)(n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||(l=>l>=8192&&l<=8303)(n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||(l=>l>=8448&&l<=8527)(n)||(l=>l>=8528&&l<=8591)(n)||(l=>l>=8960&&l<=9215)(n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||(l=>l>=9216&&l<=9279)(n)&&n!==9251||(l=>l>=9280&&l<=9311)(n)||(l=>l>=9312&&l<=9471)(n)||(l=>l>=9632&&l<=9727)(n)||(l=>l>=9728&&l<=9983)(n)&&!(n>=9754&&n<=9759)||(l=>l>=11008&&l<=11263)(n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||ka(n)||$a(n)||(l=>l>=57344&&l<=63743)(n)||kl(n)||Rl(n)||Ml(n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(a))}function b(a){return a>=1424&&a<=2303||Al(a)||$l(a)}function T(a,n){return!(!n&&b(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||(l=>l>=6016&&l<=6143)(a))}function M(a){for(const n of a)if(b(n.charCodeAt(0)))return!0;return!1}const F="deferred",j="loading",q="loaded";let Y=null,J="unavailable",te=null;const ae=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(J="error"),Y&&Y(a)};function ue(){pe.fire(new Bn("pluginStateChange",{pluginStatus:J,pluginURL:te}))}const pe=new Jn,le=function(){return J},Se=function(){if(J!==F||!te)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");J=j,ue(),te&&Be({url:te},a=>{a?ae(a):(J=q,ue())})},ce={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>J===q||ce.applyArabicShaping!=null,isLoading:()=>J===j,setState(a){J=a.pluginStatus,te=a.pluginURL},isParsed:()=>ce.applyArabicShaping!=null&&ce.processBidirectionalText!=null&&ce.processStyledBidirectionalText!=null,getPluginURL:()=>te};class ge{constructor(n,l){this.zoom=n,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.zoomHistory=l.zoomHistory,this.transition=l.transition,this.pitch=l.pitch):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Dc,this.transition={},this.pitch=0)}isSupportedScript(n){return function(l,u){for(const m of l)if(!T(m.charCodeAt(0),u))return!1;return!0}(n,ce.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,l=n-Math.floor(n),u=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*u}:{fromScale:.5,toScale:1,t:1-(1-u)*l}}}class _e{constructor(n,l){this.property=n,this.value=l,this.expression=function(u,m){if(ga(u))return new $s(u,m);if(va(u)){const v=ba(u,m);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=u;return typeof u=="string"&&m.type==="color"&&(v=Pt.parse(u)),{kind:"constant",evaluate:()=>v}}}(l===void 0?n.specification.default:l,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,l,u){return this.property.possiblyEvaluate(this,n,l,u)}}class $e{constructor(n){this.property=n,this.value=new _e(n,void 0)}transitioned(n,l){return new Ae(this.property,this.value,l,we({},n.transition,this.transition),n.now)}untransitioned(){return new Ae(this.property,this.value,null,{},0)}}class Ee{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return Nt(this._values[n].value.value)}setValue(n,l){this._values.hasOwnProperty(n)||(this._values[n]=new $e(this._values[n].property)),this._values[n].value=new _e(this._values[n].property,l===null?void 0:Nt(l))}getTransition(n){return Nt(this._values[n].transition)}setTransition(n,l){this._values.hasOwnProperty(n)||(this._values[n]=new $e(this._values[n].property)),this._values[n].transition=Nt(l)||void 0}serialize(){const n={};for(const l of Object.keys(this._values)){const u=this.getValue(l);u!==void 0&&(n[l]=u);const m=this.getTransition(l);m!==void 0&&(n[`${l}-transition`]=m)}return n}transitioned(n,l){const u=new De(this._properties);for(const m of Object.keys(this._values))u._values[m]=this._values[m].transitioned(n,l._values[m]);return u}untransitioned(){const n=new De(this._properties);for(const l of Object.keys(this._values))n._values[l]=this._values[l].untransitioned();return n}}class Ae{constructor(n,l,u,m,v){const x=m.delay||0,R=m.duration||0;v=v||0,this.property=n,this.value=l,this.begin=v+x,this.end=this.begin+R,n.specification.transition&&(m.delay||m.duration)&&(this.prior=u)}possiblyEvaluate(n,l,u){const m=n.now||0,v=this.value.possiblyEvaluate(n,l,u),x=this.prior;if(x){if(m>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(m<this.begin)return x.possiblyEvaluate(n,l,u);{const R=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,l,u),v,z(R))}}return v}}class De{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,l,u){const m=new it(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(n,l,u);return m}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class nt{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return Nt(this._values[n].value)}setValue(n,l){this._values[n]=new _e(this._values[n].property,l===null?void 0:Nt(l))}serialize(){const n={};for(const l of Object.keys(this._values)){const u=this.getValue(l);u!==void 0&&(n[l]=u)}return n}possiblyEvaluate(n,l,u){const m=new it(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(n,l,u);return m}}class at{constructor(n,l,u){this.property=n,this.value=l,this.parameters=u}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,l,u,m){return this.property.evaluate(this.value,this.parameters,n,l,u,m)}}class it{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class et{constructor(n){this.specification=n}possiblyEvaluate(n,l){return n.expression.evaluate(l)}interpolate(n,l,u){const m=ws[this.specification.type];return m?m(n,l,u):n}}class Re{constructor(n,l){this.specification=n,this.overrides=l}possiblyEvaluate(n,l,u,m){return new at(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(l,null,{},u,m)}:n.expression,l)}interpolate(n,l,u){if(n.value.kind!=="constant"||l.value.kind!=="constant")return n;if(n.value.value===void 0||l.value.value===void 0)return new at(this,{kind:"constant",value:void 0},n.parameters);const m=ws[this.specification.type];return m?new at(this,{kind:"constant",value:m(n.value.value,l.value.value,u)},n.parameters):n}evaluate(n,l,u,m,v,x){return n.kind==="constant"?n.value:n.evaluate(l,u,m,v,x)}}class bt extends Re{possiblyEvaluate(n,l,u,m){if(n.value===void 0)return new at(this,{kind:"constant",value:void 0},l);if(n.expression.kind==="constant"){const v=n.expression.evaluate(l,null,{},u,m),x=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,R=this._calculate(x,x,x,l);return new at(this,{kind:"constant",value:R},l)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:l.zoom-1}),n.expression.evaluate({zoom:l.zoom}),n.expression.evaluate({zoom:l.zoom+1}),l);return new at(this,{kind:"constant",value:v},l)}return new at(this,n.expression,l)}evaluate(n,l,u,m,v,x){if(n.kind==="source"){const R=n.evaluate(l,u,m,v,x);return this._calculate(R,R,R,l)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(l.zoom)-1},u,m),n.evaluate({zoom:Math.floor(l.zoom)},u,m),n.evaluate({zoom:Math.floor(l.zoom)+1},u,m),l):n.value}_calculate(n,l,u,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:l,other:u}:{from:u,to:l,other:n}}interpolate(n){return n}}class yt{constructor(n){this.specification=n}possiblyEvaluate(n,l,u,m){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(l,null,{},u,m);return this._calculate(v,v,v,l)}return this._calculate(n.expression.evaluate(new ge(Math.floor(l.zoom-1),l)),n.expression.evaluate(new ge(Math.floor(l.zoom),l)),n.expression.evaluate(new ge(Math.floor(l.zoom+1),l)),l)}}_calculate(n,l,u,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:l}:{from:u,to:l}}interpolate(n){return n}}class Vt{constructor(n){this.specification=n}possiblyEvaluate(n,l,u,m){return!!n.expression.evaluate(l,null,{},u,m)}interpolate(){return!1}}class ht{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const l=new ge(0,{});for(const u in n){const m=n[u];m.specification.overridable&&this.overridableProperties.push(u);const v=this.defaultPropertyValues[u]=new _e(m,void 0),x=this.defaultTransitionablePropertyValues[u]=new $e(m);this.defaultTransitioningPropertyValues[u]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=v.possiblyEvaluate(l)}}}function rn(a,n){return 256*(a=W(Math.floor(a),0,255))+W(Math.floor(n),0,255)}Zt(Re,"DataDrivenProperty"),Zt(et,"DataConstantProperty"),Zt(bt,"CrossFadedDataDrivenProperty"),Zt(yt,"CrossFadedProperty"),Zt(Vt,"ColorRampProperty");const Ft={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class zt{constructor(n,l){this._structArray=n,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Mt{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,l){return n._trim(),l&&(n.isTransferred=!0,l.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const l=Object.create(this.prototype);return l.arrayBuffer=n.arrayBuffer,l.length=n.length,l.capacity=n.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Bt(a,n=1){let l=0,u=0;return{members:a.map(m=>{const v=Ft[m.type].BYTES_PER_ELEMENT,x=l=yn(l,Math.max(n,v)),R=m.components||1;return u=Math.max(u,v),l+=v*R,{name:m.name,type:m.type,components:R,offset:x}}),size:yn(l,Math.max(u,n)),alignment:n}}function yn(a,n){return Math.ceil(a/n)*n}class fn extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l){const u=this.length;return this.resize(u+1),this.emplace(u,n,l)}emplace(n,l,u){const m=2*n;return this.int16[m+0]=l,this.int16[m+1]=u,n}}fn.prototype.bytesPerElement=4,Zt(fn,"StructArrayLayout2i4");class Rn extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,u){const m=this.length;return this.resize(m+1),this.emplace(m,n,l,u)}emplace(n,l,u,m){const v=3*n;return this.int16[v+0]=l,this.int16[v+1]=u,this.int16[v+2]=m,n}}Rn.prototype.bytesPerElement=6,Zt(Rn,"StructArrayLayout3i6");class nn extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,u,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,l,u,m)}emplace(n,l,u,m,v){const x=4*n;return this.int16[x+0]=l,this.int16[x+1]=u,this.int16[x+2]=m,this.int16[x+3]=v,n}}nn.prototype.bytesPerElement=8,Zt(nn,"StructArrayLayout4i8");class Sn extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,u,m,v,x,R){const N=this.length;return this.resize(N+1),this.emplace(N,n,l,u,m,v,x,R)}emplace(n,l,u,m,v,x,R,N){const P=6*n,G=12*n,H=3*n;return this.int16[P+0]=l,this.int16[P+1]=u,this.uint8[G+4]=m,this.uint8[G+5]=v,this.uint8[G+6]=x,this.uint8[G+7]=R,this.float32[H+2]=N,n}}Sn.prototype.bytesPerElement=12,Zt(Sn,"StructArrayLayout2i4ub1f12");class ti extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,u,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,l,u,m)}emplace(n,l,u,m,v){const x=4*n;return this.float32[x+0]=l,this.float32[x+1]=u,this.float32[x+2]=m,this.float32[x+3]=v,n}}ti.prototype.bytesPerElement=16,Zt(ti,"StructArrayLayout4f16");class si extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,u,m,v,x,R,N,P,G){const H=this.length;return this.resize(H+1),this.emplace(H,n,l,u,m,v,x,R,N,P,G)}emplace(n,l,u,m,v,x,R,N,P,G,H){const K=10*n;return this.uint16[K+0]=l,this.uint16[K+1]=u,this.uint16[K+2]=m,this.uint16[K+3]=v,this.uint16[K+4]=x,this.uint16[K+5]=R,this.uint16[K+6]=N,this.uint16[K+7]=P,this.uint16[K+8]=G,this.uint16[K+9]=H,n}}si.prototype.bytesPerElement=20,Zt(si,"StructArrayLayout10ui20");class Mi extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,u,m,v,x,R,N){const P=this.length;return this.resize(P+1),this.emplace(P,n,l,u,m,v,x,R,N)}emplace(n,l,u,m,v,x,R,N,P){const G=8*n;return this.uint16[G+0]=l,this.uint16[G+1]=u,this.uint16[G+2]=m,this.uint16[G+3]=v,this.uint16[G+4]=x,this.uint16[G+5]=R,this.uint16[G+6]=N,this.uint16[G+7]=P,n}}Mi.prototype.bytesPerElement=16,Zt(Mi,"StructArrayLayout8ui16");class di extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,u,m,v,x){const R=this.length;return this.resize(R+1),this.emplace(R,n,l,u,m,v,x)}emplace(n,l,u,m,v,x,R){const N=6*n;return this.int16[N+0]=l,this.int16[N+1]=u,this.int16[N+2]=m,this.int16[N+3]=v,this.int16[N+4]=x,this.int16[N+5]=R,n}}di.prototype.bytesPerElement=12,Zt(di,"StructArrayLayout6i12");class gr extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,u,m,v,x,R,N,P,G,H,K){const X=this.length;return this.resize(X+1),this.emplace(X,n,l,u,m,v,x,R,N,P,G,H,K)}emplace(n,l,u,m,v,x,R,N,P,G,H,K,X){const Q=12*n;return this.int16[Q+0]=l,this.int16[Q+1]=u,this.int16[Q+2]=m,this.int16[Q+3]=v,this.uint16[Q+4]=x,this.uint16[Q+5]=R,this.uint16[Q+6]=N,this.uint16[Q+7]=P,this.int16[Q+8]=G,this.int16[Q+9]=H,this.int16[Q+10]=K,this.int16[Q+11]=X,n}}gr.prototype.bytesPerElement=24,Zt(gr,"StructArrayLayout4i4ui4i24");class Ur extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,u,m,v,x){const R=this.length;return this.resize(R+1),this.emplace(R,n,l,u,m,v,x)}emplace(n,l,u,m,v,x,R){const N=10*n,P=5*n;return this.int16[N+0]=l,this.int16[N+1]=u,this.int16[N+2]=m,this.float32[P+2]=v,this.float32[P+3]=x,this.float32[P+4]=R,n}}Ur.prototype.bytesPerElement=20,Zt(Ur,"StructArrayLayout3i3f20");class to extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const l=this.length;return this.resize(l+1),this.emplace(l,n)}emplace(n,l){return this.uint32[1*n+0]=l,n}}to.prototype.bytesPerElement=4,Zt(to,"StructArrayLayout1ul4");class _i extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,u,m,v,x,R,N,P,G,H,K,X){const Q=this.length;return this.resize(Q+1),this.emplace(Q,n,l,u,m,v,x,R,N,P,G,H,K,X)}emplace(n,l,u,m,v,x,R,N,P,G,H,K,X,Q){const se=20*n,he=10*n;return this.int16[se+0]=l,this.int16[se+1]=u,this.int16[se+2]=m,this.int16[se+3]=v,this.int16[se+4]=x,this.float32[he+3]=R,this.float32[he+4]=N,this.float32[he+5]=P,this.float32[he+6]=G,this.int16[se+14]=H,this.uint32[he+8]=K,this.uint16[se+18]=X,this.uint16[se+19]=Q,n}}_i.prototype.bytesPerElement=40,Zt(_i,"StructArrayLayout5i4f1i1ul2ui40");class xi extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,u,m,v,x,R){const N=this.length;return this.resize(N+1),this.emplace(N,n,l,u,m,v,x,R)}emplace(n,l,u,m,v,x,R,N){const P=8*n;return this.int16[P+0]=l,this.int16[P+1]=u,this.int16[P+2]=m,this.int16[P+4]=v,this.int16[P+5]=x,this.int16[P+6]=R,this.int16[P+7]=N,n}}xi.prototype.bytesPerElement=16,Zt(xi,"StructArrayLayout3i2i2i16");class ii extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,u,m,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,l,u,m,v)}emplace(n,l,u,m,v,x){const R=4*n,N=8*n;return this.float32[R+0]=l,this.float32[R+1]=u,this.float32[R+2]=m,this.int16[N+6]=v,this.int16[N+7]=x,n}}ii.prototype.bytesPerElement=16,Zt(ii,"StructArrayLayout2f1f2i16");class Oi extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,u,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,l,u,m)}emplace(n,l,u,m,v){const x=12*n,R=3*n;return this.uint8[x+0]=l,this.uint8[x+1]=u,this.float32[R+1]=m,this.float32[R+2]=v,n}}Oi.prototype.bytesPerElement=12,Zt(Oi,"StructArrayLayout2ub2f12");class Hi extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,u){const m=this.length;return this.resize(m+1),this.emplace(m,n,l,u)}emplace(n,l,u,m){const v=3*n;return this.float32[v+0]=l,this.float32[v+1]=u,this.float32[v+2]=m,n}}Hi.prototype.bytesPerElement=12,Zt(Hi,"StructArrayLayout3f12");class Gn extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,u){const m=this.length;return this.resize(m+1),this.emplace(m,n,l,u)}emplace(n,l,u,m){const v=3*n;return this.uint16[v+0]=l,this.uint16[v+1]=u,this.uint16[v+2]=m,n}}Gn.prototype.bytesPerElement=6,Zt(Gn,"StructArrayLayout3ui6");class sr extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,l,u,m,v,x,R,N,P,G,H,K,X,Q,se,he,xe,Ie,Me,Pe,Fe){const je=this.length;return this.resize(je+1),this.emplace(je,n,l,u,m,v,x,R,N,P,G,H,K,X,Q,se,he,xe,Ie,Me,Pe,Fe)}emplace(n,l,u,m,v,x,R,N,P,G,H,K,X,Q,se,he,xe,Ie,Me,Pe,Fe,je){const ot=30*n,lt=15*n,_t=60*n;return this.int16[ot+0]=l,this.int16[ot+1]=u,this.int16[ot+2]=m,this.float32[lt+2]=v,this.float32[lt+3]=x,this.uint16[ot+8]=R,this.uint16[ot+9]=N,this.uint32[lt+5]=P,this.uint32[lt+6]=G,this.uint32[lt+7]=H,this.uint16[ot+16]=K,this.uint16[ot+17]=X,this.uint16[ot+18]=Q,this.float32[lt+10]=se,this.float32[lt+11]=he,this.uint8[_t+48]=xe,this.uint8[_t+49]=Ie,this.uint8[_t+50]=Me,this.uint32[lt+13]=Pe,this.int16[ot+28]=Fe,this.uint8[_t+58]=je,n}}sr.prototype.bytesPerElement=60,Zt(sr,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Lo extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,l,u,m,v,x,R,N,P,G,H,K,X,Q,se,he,xe,Ie,Me,Pe,Fe,je,ot,lt,_t,kt,Je,gt,Rt,$t){const Kt=this.length;return this.resize(Kt+1),this.emplace(Kt,n,l,u,m,v,x,R,N,P,G,H,K,X,Q,se,he,xe,Ie,Me,Pe,Fe,je,ot,lt,_t,kt,Je,gt,Rt,$t)}emplace(n,l,u,m,v,x,R,N,P,G,H,K,X,Q,se,he,xe,Ie,Me,Pe,Fe,je,ot,lt,_t,kt,Je,gt,Rt,$t,Kt){const St=38*n,Gt=19*n;return this.int16[St+0]=l,this.int16[St+1]=u,this.int16[St+2]=m,this.float32[Gt+2]=v,this.float32[Gt+3]=x,this.int16[St+8]=R,this.int16[St+9]=N,this.int16[St+10]=P,this.int16[St+11]=G,this.int16[St+12]=H,this.int16[St+13]=K,this.uint16[St+14]=X,this.uint16[St+15]=Q,this.uint16[St+16]=se,this.uint16[St+17]=he,this.uint16[St+18]=xe,this.uint16[St+19]=Ie,this.uint16[St+20]=Me,this.uint16[St+21]=Pe,this.uint16[St+22]=Fe,this.uint16[St+23]=je,this.uint16[St+24]=ot,this.uint16[St+25]=lt,this.uint16[St+26]=_t,this.uint16[St+27]=kt,this.uint16[St+28]=Je,this.uint32[Gt+15]=gt,this.float32[Gt+16]=Rt,this.float32[Gt+17]=$t,this.float32[Gt+18]=Kt,n}}Lo.prototype.bytesPerElement=76,Zt(Lo,"StructArrayLayout3i2f6i15ui1ul3f76");class Lr extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const l=this.length;return this.resize(l+1),this.emplace(l,n)}emplace(n,l){return this.float32[1*n+0]=l,n}}Lr.prototype.bytesPerElement=4,Zt(Lr,"StructArrayLayout1f4");class rs extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,u,m,v,x,R){const N=this.length;return this.resize(N+1),this.emplace(N,n,l,u,m,v,x,R)}emplace(n,l,u,m,v,x,R,N){const P=7*n;return this.float32[P+0]=l,this.float32[P+1]=u,this.float32[P+2]=m,this.float32[P+3]=v,this.float32[P+4]=x,this.float32[P+5]=R,this.float32[P+6]=N,n}}rs.prototype.bytesPerElement=28,Zt(rs,"StructArrayLayout7f28");class os extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,u,m,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,l,u,m,v)}emplace(n,l,u,m,v,x){const R=5*n;return this.float32[R+0]=l,this.float32[R+1]=u,this.float32[R+2]=m,this.float32[R+3]=v,this.float32[R+4]=x,n}}os.prototype.bytesPerElement=20,Zt(os,"StructArrayLayout5f20");class uo extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,u,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,l,u,m)}emplace(n,l,u,m,v){const x=6*n;return this.uint32[3*n+0]=l,this.uint16[x+2]=u,this.uint16[x+3]=m,this.uint16[x+4]=v,n}}uo.prototype.bytesPerElement=12,Zt(uo,"StructArrayLayout1ul3ui12");class Pi extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l){const u=this.length;return this.resize(u+1),this.emplace(u,n,l)}emplace(n,l,u){const m=2*n;return this.uint16[m+0]=l,this.uint16[m+1]=u,n}}Pi.prototype.bytesPerElement=4,Zt(Pi,"StructArrayLayout2ui4");class jr extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const l=this.length;return this.resize(l+1),this.emplace(l,n)}emplace(n,l){return this.uint16[1*n+0]=l,n}}jr.prototype.bytesPerElement=2,Zt(jr,"StructArrayLayout1ui2");class no extends Mt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l){const u=this.length;return this.resize(u+1),this.emplace(u,n,l)}emplace(n,l,u){const m=2*n;return this.float32[m+0]=l,this.float32[m+1]=u,n}}no.prototype.bytesPerElement=8,Zt(no,"StructArrayLayout2f8");class zs extends zt{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}zs.prototype.size=12;class Zd extends di{get(n){return new zs(this,n)}}Zt(Zd,"FillExtrusionExtArray");class Yd extends zt{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Yd.prototype.size=40;class Hu extends _i{get(n){return new Yd(this,n)}}Zt(Hu,"CollisionBoxArray");class Xd extends zt{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(n){this._structArray.uint8[this._pos1+49]=n}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(n){this._structArray.uint8[this._pos1+50]=n}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(n){this._structArray.uint32[this._pos4+13]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(n){this._structArray.uint8[this._pos1+58]=n}}Xd.prototype.size=60;class Jd extends sr{get(n){return new Xd(this,n)}}Zt(Jd,"PlacedSymbolArray");class Qd extends zt{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(n){this._structArray.uint32[this._pos4+15]=n}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Qd.prototype.size=76;class ep extends Lo{get(n){return new Qd(this,n)}}Zt(ep,"SymbolInstanceArray");class tp extends Lr{getoffsetX(n){return this.float32[1*n+0]}}Zt(tp,"GlyphOffsetArray");class np extends Rn{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Zt(np,"SymbolLineVertexArray");class ip extends zt{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}ip.prototype.size=12;class rp extends uo{get(n){return new ip(this,n)}}Zt(rp,"FeatureIndexArray");class op extends zt{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}op.prototype.size=4;class sp extends Pi{get(n){return new op(this,n)}}Zt(sp,"FillExtrusionCentroidArray");class ap extends zt{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}ap.prototype.size=12;class lp extends di{get(n){return new ap(this,n)}}Zt(lp,"CircleGlobeExtArray");const bh=Bt([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),xh=Bt([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var cp=Ht(function(a){a.exports=function(n,l){var u,m,v,x,R,N,P,G;for(m=n.length-(u=3&n.length),v=l,R=3432918353,N=461845907,G=0;G<m;)P=255&n.charCodeAt(G)|(255&n.charCodeAt(++G))<<8|(255&n.charCodeAt(++G))<<16|(255&n.charCodeAt(++G))<<24,++G,v=27492+(65535&(x=5*(65535&(v=(v^=P=(65535&(P=(P=(65535&P)*R+(((P>>>16)*R&65535)<<16)&4294967295)<<15|P>>>17))*N+(((P>>>16)*N&65535)<<16)&4294967295)<<13|v>>>19))+((5*(v>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(P=0,u){case 3:P^=(255&n.charCodeAt(G+2))<<16;case 2:P^=(255&n.charCodeAt(G+1))<<8;case 1:v^=P=(65535&(P=(P=(65535&(P^=255&n.charCodeAt(G)))*R+(((P>>>16)*R&65535)<<16)&4294967295)<<15|P>>>17))*N+(((P>>>16)*N&65535)<<16)&4294967295}return v^=n.length,v=2246822507*(65535&(v^=v>>>16))+((2246822507*(v>>>16)&65535)<<16)&4294967295,v=3266489909*(65535&(v^=v>>>13))+((3266489909*(v>>>16)&65535)<<16)&4294967295,(v^=v>>>16)>>>0}}),wh=Ht(function(a){a.exports=function(n,l){for(var u,m=n.length,v=l^m,x=0;m>=4;)u=1540483477*(65535&(u=255&n.charCodeAt(x)|(255&n.charCodeAt(++x))<<8|(255&n.charCodeAt(++x))<<16|(255&n.charCodeAt(++x))<<24))+((1540483477*(u>>>16)&65535)<<16),v=1540483477*(65535&v)+((1540483477*(v>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),m-=4,++x;switch(m){case 3:v^=(255&n.charCodeAt(x+2))<<16;case 2:v^=(255&n.charCodeAt(x+1))<<8;case 1:v=1540483477*(65535&(v^=255&n.charCodeAt(x)))+((1540483477*(v>>>16)&65535)<<16)}return v=1540483477*(65535&(v^=v>>>13))+((1540483477*(v>>>16)&65535)<<16),(v^=v>>>15)>>>0}}),Il=cp,Eh=wh;Il.murmur3=cp,Il.murmur2=Eh;class Kc{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,l,u,m){this.ids.push(up(n)),this.positions.push(l,u,m)}getPositions(n){const l=up(n);let u=0,m=this.ids.length-1;for(;u<m;){const x=u+m>>1;this.ids[x]>=l?m=x:u=x+1}const v=[];for(;this.ids[u]===l;)v.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return v}static serialize(n,l){const u=new Float64Array(n.ids),m=new Uint32Array(n.positions);return Ku(u,m,0,u.length-1),l&&l.push(u.buffer,m.buffer),{ids:u,positions:m}}static deserialize(n){const l=new Kc;return l.ids=n.ids,l.positions=n.positions,l.indexed=!0,l}}function up(a){const n=+a;return!isNaN(n)&&Number.MIN_SAFE_INTEGER<=n&&n<=Number.MAX_SAFE_INTEGER?n:Il(String(a))}function Ku(a,n,l,u){for(;l<u;){const m=a[l+u>>1];let v=l-1,x=u+1;for(;;){do v++;while(a[v]<m);do x--;while(a[x]>m);if(v>=x)break;Wc(a,v,x),Wc(n,3*v,3*x),Wc(n,3*v+1,3*x+1),Wc(n,3*v+2,3*x+2)}x-l<u-x?(Ku(a,n,l,x),l=x+1):(Ku(a,n,x+1,u),u=x)}}function Wc(a,n,l){const u=a[n];a[n]=a[l],a[l]=u}Zt(Kc,"FeaturePositionMap");class Oo{constructor(n,l){this.gl=n.gl,this.location=l}}class Zc extends Oo{constructor(n,l){super(n,l),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class dp extends Oo{constructor(n,l){super(n,l),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class pp extends Oo{constructor(n,l){super(n,l),this.current=Pt.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const Ch=new Float32Array(16),Sh=new Float32Array(9),Th=new Float32Array(4);function Wu(a){return[rn(255*a.r,255*a.g),rn(255*a.b,255*a.a)]}class Nl{constructor(n,l,u){this.value=n,this.uniformNames=l.map(m=>`u_${m}`),this.type=u}setUniform(n,l,u){n.set(u.constantOr(this.value))}getBinding(n,l,u){return this.type==="color"?new pp(n,l):new Zc(n,l)}}class Pa{constructor(n,l){this.uniformNames=l.map(u=>`u_${u}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,l){this.pixelRatioFrom=l.pixelRatio||1,this.pixelRatioTo=n.pixelRatio||1,this.patternFrom=l.tl.concat(l.br),this.patternTo=n.tl.concat(n.br)}setUniform(n,l,u,m){const v=m==="u_pattern_to"||m==="u_dash_to"?this.patternTo:m==="u_pattern_from"||m==="u_dash_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,l,u){return u==="u_pattern_from"||u==="u_pattern_to"||u==="u_dash_from"||u==="u_dash_to"?new dp(n,l):new Zc(n,l)}}class Po{constructor(n,l,u,m){this.expression=n,this.type=u,this.maxValue=0,this.paintVertexAttributes=l.map(v=>({name:`a_${v}`,type:"Float32",components:u==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(n,l,u,m,v,x){const R=this.paintVertexArray.length,N=this.expression.evaluate(new ge(0),l,{},v,m,x);this.paintVertexArray.resize(n),this._setPaintValue(R,n,N)}updatePaintArray(n,l,u,m,v){const x=this.expression.evaluate({zoom:0},u,m,void 0,v);this._setPaintValue(n,l,x)}_setPaintValue(n,l,u){if(this.type==="color"){const m=Wu(u);for(let v=n;v<l;v++)this.paintVertexArray.emplace(v,m[0],m[1])}else{for(let m=n;m<l;m++)this.paintVertexArray.emplace(m,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class io{constructor(n,l,u,m,v,x){this.expression=n,this.uniformNames=l.map(R=>`u_${R}_t`),this.type=u,this.useIntegerZoom=m,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=l.map(R=>({name:`a_${R}`,type:"Float32",components:u==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,l,u,m,v,x){const R=this.expression.evaluate(new ge(this.zoom),l,{},v,m,x),N=this.expression.evaluate(new ge(this.zoom+1),l,{},v,m,x),P=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(P,n,R,N)}updatePaintArray(n,l,u,m,v){const x=this.expression.evaluate({zoom:this.zoom},u,m,void 0,v),R=this.expression.evaluate({zoom:this.zoom+1},u,m,void 0,v);this._setPaintValue(n,l,x,R)}_setPaintValue(n,l,u,m){if(this.type==="color"){const v=Wu(u),x=Wu(m);for(let R=n;R<l;R++)this.paintVertexArray.emplace(R,v[0],v[1],x[0],x[1])}else{for(let v=n;v<l;v++)this.paintVertexArray.emplace(v,u,m);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(m))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,l){const u=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,m=W(this.expression.interpolationFactor(u,this.zoom,this.zoom+1),0,1);n.set(m)}getBinding(n,l,u){return new Zc(n,l)}}class ss{constructor(n,l,u,m,v,x,R){this.expression=n,this.type=u,this.useIntegerZoom=m,this.zoom=v,this.layerId=R,this.paintVertexAttributes=(u==="array"?xh:bh).members;for(let N=0;N<l.length;++N);this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(n,l,u){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(m,n,l.patterns&&l.patterns[this.layerId],u)}updatePaintArray(n,l,u,m,v,x){this._setPaintValues(n,l,u.patterns&&u.patterns[this.layerId],x)}_setPaintValues(n,l,u,m){if(!m||!u)return;const{min:v,mid:x,max:R}=u,N=m[v],P=m[x],G=m[R];if(N&&P&&G)for(let H=n;H<l;H++)this._setPaintValue(this.zoomInPaintVertexArray,H,P,N),this._setPaintValue(this.zoomOutPaintVertexArray,H,P,G)}_setPaintValue(n,l,u,m){n.emplace(l,u.tl[0],u.tl[1],u.br[0],u.br[1],m.tl[0],m.tl[1],m.br[0],m.br[1],u.pixelRatio,m.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class as{constructor(n,l,u=()=>!0){this.binders={},this._buffers=[];const m=[];for(const v in n.paint._values){if(!u(v))continue;const x=n.paint.get(v);if(!(x instanceof at&&Xo(x.property.specification)))continue;const R=kh(v,n.type),N=x.value,P=x.property.specification.type,G=x.property.useIntegerZoom,H=x.property.specification["property-type"],K=H==="cross-faded"||H==="cross-faded-data-driven",X=String(v)==="line-dasharray"&&n.layout.get("line-cap").value.kind!=="constant";if(N.kind!=="constant"||X)if(N.kind==="source"||X||K){const Q=fp(v,P,"source");this.binders[v]=K?new ss(N,R,P,G,l,Q,n.id):new Po(N,R,P,Q),m.push(`/a_${v}`)}else{const Q=fp(v,P,"composite");this.binders[v]=new io(N,R,P,G,l,Q),m.push(`/z_${v}`)}else this.binders[v]=K?new Pa(N.value,R):new Nl(N.value,R,P),m.push(`/u_${v}`)}this.cacheKey=m.sort().join("")}getMaxValue(n){const l=this.binders[n];return l instanceof Po||l instanceof io?l.maxValue:0}populatePaintArrays(n,l,u,m,v,x){for(const R in this.binders){const N=this.binders[R];(N instanceof Po||N instanceof io||N instanceof ss)&&N.populatePaintArray(n,l,u,m,v,x)}}setConstantPatternPositions(n,l){for(const u in this.binders){const m=this.binders[u];m instanceof Pa&&m.setConstantPatternPositions(n,l)}}updatePaintArrays(n,l,u,m,v,x){let R=!1;for(const N in n){const P=l.getPositions(N);for(const G of P){const H=u.feature(G.index);for(const K in this.binders){const X=this.binders[K];if((X instanceof Po||X instanceof io||X instanceof ss)&&X.expression.isStateDependent===!0){const Q=m.paint.get(K);X.expression=Q.value,X.updatePaintArray(G.start,G.end,H,n[N],v,x),R=!0}}}}return R}defines(){const n=[];for(const l in this.binders){const u=this.binders[l];(u instanceof Nl||u instanceof Pa)&&n.push(...u.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return n}getBinderAttributes(){const n=[];for(const l in this.binders){const u=this.binders[l];if(u instanceof Po||u instanceof io||u instanceof ss)for(let m=0;m<u.paintVertexAttributes.length;m++)n.push(u.paintVertexAttributes[m].name)}return n}getBinderUniforms(){const n=[];for(const l in this.binders){const u=this.binders[l];if(u instanceof Nl||u instanceof Pa||u instanceof io)for(const m of u.uniformNames)n.push(m)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,l){const u=[];for(const m in this.binders){const v=this.binders[m];if(v instanceof Nl||v instanceof Pa||v instanceof io){for(const x of v.uniformNames)if(l[x]){const R=v.getBinding(n,l[x],x);u.push({name:x,property:m,binding:R})}}}return u}setUniforms(n,l,u,m){for(const{name:v,property:x,binding:R}of l)this.binders[x].setUniform(R,m,u.get(x),v)}updatePaintBuffers(n){this._buffers=[];for(const l in this.binders){const u=this.binders[l];if(n&&u instanceof ss){const m=n.fromScale===2?u.zoomInPaintVertexBuffer:u.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(u instanceof Po||u instanceof io)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(n){for(const l in this.binders){const u=this.binders[l];(u instanceof Po||u instanceof io||u instanceof ss)&&u.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const l=this.binders[n];(l instanceof Po||l instanceof io||l instanceof ss)&&l.destroy()}}}class Fs{constructor(n,l,u=()=>!0){this.programConfigurations={};for(const m of n)this.programConfigurations[m.id]=new as(m,l,u);this.needsUpload=!1,this._featureMap=new Kc,this._bufferOffset=0}populatePaintArrays(n,l,u,m,v,x,R){for(const N in this.programConfigurations)this.programConfigurations[N].populatePaintArrays(n,l,m,v,x,R);l.id!==void 0&&this._featureMap.add(l.id,u,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,l,u,m,v){for(const x of u)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(n,this._featureMap,l,x,m,v)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}const Ah={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function kh(a,n){return Ah[a]||[a.replace(`${n}-`,"").replace(/-/g,"_")]}const Rh={"line-pattern":{source:si,composite:si},"fill-pattern":{source:si,composite:si},"fill-extrusion-pattern":{source:si,composite:si},"line-dasharray":{source:Mi,composite:Mi}},$h={color:{source:no,composite:ti},number:{source:Lr,composite:no}};function fp(a,n,l){const u=Rh[a];return u&&u[l]||$h[n][l]}Zt(Nl,"ConstantBinder"),Zt(Pa,"CrossFadedConstantBinder"),Zt(Po,"SourceExpressionBinder"),Zt(ss,"CrossFadedCompositeBinder"),Zt(io,"CompositeExpressionBinder"),Zt(as,"ProgramConfiguration",{omit:["_buffers"]}),Zt(Fs,"ProgramConfigurationSet");const Yc="-transition";class ro extends Jn{constructor(n,l){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,n.type!=="custom"&&(this.metadata=(n=n).metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&n.type!=="sky"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),l.layout&&(this._unevaluatedLayout=new nt(l.layout)),l.paint)){this._transitionablePaint=new Ee(l.paint);for(const u in n.paint)this.setPaintProperty(u,n.paint[u],{validate:!1});for(const u in n.layout)this.setLayoutProperty(u,n.layout[u],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new it(l.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,l,u={}){l!=null&&this._validate(qu,`layers.${this.id}.layout.${n}`,n,l,u)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,l):this.visibility=l)}getPaintProperty(n){return ze(n,Yc)?this._transitionablePaint.getTransition(n.slice(0,-Yc.length)):this._transitionablePaint.getValue(n)}setPaintProperty(n,l,u={}){if(l!=null&&this._validate(Nc,`layers.${this.id}.paint.${n}`,n,l,u))return!1;if(ze(n,Yc))return this._transitionablePaint.setTransition(n.slice(0,-Yc.length),l||void 0),!1;{const m=this._transitionablePaint._values[n],v=m.property.specification["property-type"]==="cross-faded-data-driven",x=m.value.isDataDriven(),R=m.value;this._transitionablePaint.setValue(n,l),this._handleSpecialPaintPropertyUpdate(n);const N=this._transitionablePaint._values[n].value;return N.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(n,R,N)}}_handleSpecialPaintPropertyUpdate(n){}getProgramIds(){return null}getProgramConfiguration(n){return null}_handleOverridablePaintPropertyUpdate(n,l,u){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,l){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,l)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),ut(n,(l,u)=>!(l===void 0||u==="layout"&&!Object.keys(l).length||u==="paint"&&!Object.keys(l).length))}_validate(n,l,u,m,v={}){return(!v||v.validate!==!1)&&Lc(this,n.call(Ic,{key:l,layerType:this.type,objectKey:u,value:m,styleSpec:qe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const l=this.paint.get(n);if(l instanceof at&&Xo(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Io(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const Mh=Bt([{name:"a_pos",components:2,type:"Int16"}],4),Ih=Bt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Ii{constructor(n=[]){this.segments=n}prepareSegment(n,l,u,m){let v=this.segments[this.segments.length-1];return n>Ii.MAX_VERTEX_ARRAY_LENGTH&&un(`Max vertices per segment is ${Ii.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>Ii.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==m)&&(v={vertexOffset:l.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0},m!==void 0&&(v.sortKey=m),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const l in n.vaos)n.vaos[l].destroy()}static simpleSegment(n,l,u,m){return new Ii([{vertexOffset:n,primitiveOffset:l,vertexLength:u,primitiveLength:m,vaos:{},sortKey:0}])}}Ii.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Zt(Ii,"SegmentVector");var mn=8192;class ls{constructor(n,l){n&&(l?this.setSouthWest(n).setNorthEast(l):n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))}setNorthEast(n){return this._ne=n instanceof li?new li(n.lng,n.lat):li.convert(n),this}setSouthWest(n){return this._sw=n instanceof li?new li(n.lng,n.lat):li.convert(n),this}extend(n){const l=this._sw,u=this._ne;let m,v;if(n instanceof li)m=n,v=n;else{if(!(n instanceof ls))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(ls.convert(n)):this.extend(li.convert(n)):this;if(m=n._sw,v=n._ne,!m||!v)return this}return l||u?(l.lng=Math.min(m.lng,l.lng),l.lat=Math.min(m.lat,l.lat),u.lng=Math.max(v.lng,u.lng),u.lat=Math.max(v.lat,u.lat)):(this._sw=new li(m.lng,m.lat),this._ne=new li(v.lng,v.lat)),this}getCenter(){return new li((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new li(this.getWest(),this.getNorth())}getSouthEast(){return new li(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:l,lat:u}=li.convert(n);let m=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&m}static convert(n){return!n||n instanceof ls?n:new ls(n)}}const Zu=63710088e-1;class li{constructor(n,l){if(isNaN(n)||isNaN(l))throw new Error(`Invalid LngLat object: (${n}, ${l})`);if(this.lng=+n,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new li(re(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const l=Math.PI/180,u=this.lat*l,m=n.lat*l,v=Math.sin(u)*Math.sin(m)+Math.cos(u)*Math.cos(m)*Math.cos((n.lng-this.lng)*l);return Zu*Math.acos(Math.min(v,1))}toBounds(n=0){const l=360*n/40075017,u=l/Math.cos(Math.PI/180*this.lat);return new ls(new li(this.lng-u,this.lat-l),new li(this.lng+u,this.lat+l))}static convert(n){if(n instanceof li)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new li(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new li(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const hp=2*Math.PI*Zu;function Yu(a){return hp*Math.cos(a*Math.PI/180)}function Vs(a){return(180+a)/360}function Us(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function Gr(a,n){return a/Yu(n)}function ar(a){return 360*a-180}function Bi(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}function mp(a,n){return a*Yu(Bi(n))}const po=85.051129;class Da{constructor(n,l,u=0){this.x=+n,this.y=+l,this.z=+u}static fromLngLat(n,l=0){const u=li.convert(n);return new Da(Vs(u.lng),Us(u.lat),Gr(l,u.lat))}toLngLat(){return new li(ar(this.x),Bi(this.y))}toAltitude(){return mp(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/hp*(n=Bi(this.y),1/Math.cos(n*Math.PI/180));var n}}function Xu(a,n,l,u,m,v,x,R,N){const P=(n+u)/2,G=(l+m)/2,H=new k(P,G);R(H),function(K,X,Q,se,he,xe){const Ie=Q-he,Me=se-xe;return Math.abs((se-X)*Ie-(Q-K)*Me)/Math.hypot(Ie,Me)}(H.x,H.y,v.x,v.y,x.x,x.y)>=N?(Xu(a,n,l,P,G,v,H,R,N),Xu(a,P,G,u,m,H,x,R,N)):a.push(x)}function gp(a,n,l){let u=a[0],m=u.x,v=u.y;n(u);const x=[u];for(let R=1;R<a.length;R++){const N=a[R],{x:P,y:G}=N;n(N),Xu(x,m,v,P,G,u,N,n,l),m=P,v=G,u=N}return x}function Ju(a,n,l,u,m){if(m(n,l)){const v=n.add(l).mult(.5);u(v),Ju(a,n,v,u,m),Ju(a,v,l,u,m)}else a.push(l)}function Nh(a,n,l){let u=a[0];n(u);const m=[u];for(let v=1;v<a.length;v++){const x=a[v];n(x),Ju(m,u,x,n,l),u=x}return m}const Qu=Math.pow(2,14)-1,_p=-Qu-1;function Lh(a,n){const l=Math.round(a.x*n),u=Math.round(a.y*n);return a.x=W(l,_p,Qu),a.y=W(u,_p,Qu),(l<a.x||l>a.x+1||u<a.y||u>a.y+1)&&un("Geometry exceeds allowed extent, reduce your vector tile buffer size"),a}function Do(a,n,l){const u=a.loadGeometry(),m=a.extent,v=mn/m;if(n&&l&&l.projection.isReprojectedInTileSpace){const x=1<<n.z,{scale:R,x:N,y:P,projection:G}=l,H=K=>{const X=ar((n.x+K.x/m)/x),Q=Bi((n.y+K.y/m)/x),se=G.project(X,Q);K.x=(se.x*R-N)*m,K.y=(se.y*R-P)*m};for(let K=0;K<u.length;K++)if(a.type!==1)u[K]=gp(u[K],H,1);else{const X=[];for(const Q of u[K])Q.x<0||Q.x>=m||Q.y<0||Q.y>=m||(H(Q),X.push(Q));u[K]=X}}for(const x of u)for(const R of x)Lh(R,v);return u}function js(a,n){return{type:a.type,id:a.id,properties:a.properties,geometry:n?Do(a):[]}}function Xc(a,n,l,u,m){a.emplaceBack(2*n+(u+1)/2,2*l+(m+1)/2)}function Jc(a,n,l){a.emplaceBack(n.x,n.y,n.z,l[0]*16384,l[1]*16384,l[2]*16384)}class ed{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.projection=n.projection,this.layoutVertexArray=new fn,this.indexArray=new Gn,this.segments=new Ii,this.programConfigurations=new Fs(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,u,m){const v=this.layers[0],x=[];let R=null;v.type==="circle"&&(R=v.layout.get("circle-sort-key"));for(const{feature:P,id:G,index:H,sourceLayerIndex:K}of n){const X=this.layers[0]._featureFilter.needGeometry,Q=js(P,X);if(!this.layers[0]._featureFilter.filter(new ge(this.zoom),Q,u))continue;const se=R?R.evaluate(Q,{},u):void 0,he={id:G,properties:P.properties,type:P.type,sourceLayerIndex:K,index:H,geometry:X?Q.geometry:Do(P,u,m),patterns:{},sortKey:se};x.push(he)}R&&x.sort((P,G)=>P.sortKey-G.sortKey);let N=null;m.projection.name==="globe"&&(this.globeExtVertexArray=new lp,N=m.projection);for(const P of x){const{geometry:G,index:H,sourceLayerIndex:K}=P,X=n[H].feature;this.addFeature(P,G,H,l.availableImages,u,N),l.featureIndex.insert(X,G,H,K,this.index)}}update(n,l,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,u,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Mh.members),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,Ih.members))),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(n,l,u,m,v,x){for(const R of l)for(const N of R){const P=N.x,G=N.y;if(P<0||P>=mn||G<0||G>=mn)continue;if(x){const X=x.projectTilePoint(P,G,v),Q=x.upVector(v,P,G),se=this.globeExtVertexArray;Jc(se,X,Q),Jc(se,X,Q),Jc(se,X,Q),Jc(se,X,Q)}const H=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),K=H.vertexLength;Xc(this.layoutVertexArray,P,G,-1,-1),Xc(this.layoutVertexArray,P,G,1,-1),Xc(this.layoutVertexArray,P,G,1,1),Xc(this.layoutVertexArray,P,G,-1,1),this.indexArray.emplaceBack(K,K+1,K+2),this.indexArray.emplaceBack(K,K+2,K+3),H.vertexLength+=4,H.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,u,{},m,v)}}function vp(a,n){for(let l=0;l<a.length;l++)if(Gs(n,a[l]))return!0;for(let l=0;l<n.length;l++)if(Gs(a,n[l]))return!0;return!!td(a,n)}function Oh(a,n,l){return!!Gs(a,n)||!!nd(n,a,l)}function yp(a,n){if(a.length===1)return xp(n,a[0]);for(let l=0;l<n.length;l++){const u=n[l];for(let m=0;m<u.length;m++)if(Gs(a,u[m]))return!0}for(let l=0;l<a.length;l++)if(xp(n,a[l]))return!0;for(let l=0;l<n.length;l++)if(td(a,n[l]))return!0;return!1}function Ph(a,n,l){if(a.length>1){if(td(a,n))return!0;for(let u=0;u<n.length;u++)if(nd(n[u],a,l))return!0}for(let u=0;u<a.length;u++)if(nd(a[u],n,l))return!0;return!1}function td(a,n){if(a.length===0||n.length===0)return!1;for(let l=0;l<a.length-1;l++){const u=a[l],m=a[l+1];for(let v=0;v<n.length-1;v++)if(Dh(u,m,n[v],n[v+1]))return!0}return!1}function Dh(a,n,l,u){return wn(a,l,u)!==wn(n,l,u)&&wn(a,n,l)!==wn(a,n,u)}function nd(a,n,l){const u=l*l;if(n.length===1)return a.distSqr(n[0])<u;for(let m=1;m<n.length;m++)if(bp(a,n[m-1],n[m])<u)return!0;return!1}function bp(a,n,l){const u=n.distSqr(l);if(u===0)return a.distSqr(n);const m=((a.x-n.x)*(l.x-n.x)+(a.y-n.y)*(l.y-n.y))/u;return a.distSqr(m<0?n:m>1?l:l.sub(n)._mult(m)._add(n))}function xp(a,n){let l,u,m,v=!1;for(let x=0;x<a.length;x++){l=a[x];for(let R=0,N=l.length-1;R<l.length;N=R++)u=l[R],m=l[N],u.y>n.y!=m.y>n.y&&n.x<(m.x-u.x)*(n.y-u.y)/(m.y-u.y)+u.x&&(v=!v)}return v}function Gs(a,n){let l=!1;for(let u=0,m=a.length-1;u<a.length;m=u++){const v=a[u],x=a[m];v.y>n.y!=x.y>n.y&&n.x<(x.x-v.x)*(n.y-v.y)/(x.y-v.y)+v.x&&(l=!l)}return l}function wp(a,n,l,u,m){for(const x of a)if(n<=x.x&&l<=x.y&&u>=x.x&&m>=x.y)return!0;const v=[new k(n,l),new k(n,m),new k(u,m),new k(u,l)];if(a.length>2){for(const x of v)if(Gs(a,x))return!0}for(let x=0;x<a.length-1;x++)if(Bh(a[x],a[x+1],v))return!0;return!1}function Bh(a,n,l){const u=l[0],m=l[2];if(a.x<u.x&&n.x<u.x||a.x>m.x&&n.x>m.x||a.y<u.y&&n.y<u.y||a.y>m.y&&n.y>m.y)return!1;const v=wn(a,n,l[0]);return v!==wn(a,n,l[1])||v!==wn(a,n,l[2])||v!==wn(a,n,l[3])}function Ba(a,n,l){const u=n.paint.get(a).value;return u.kind==="constant"?u.value:l.programConfigurations.get(n.id).getMaxValue(a)}function Qc(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function Ep(a,n,l,u,m){if(!n[0]&&!n[1])return a;const v=k.convert(n)._mult(m);l==="viewport"&&v._rotate(-u);const x=[];for(let R=0;R<a.length;R++)x.push(a[R].sub(v));return x}function Cp(a,n,l,u){const m=k.convert(a)._mult(u);return n==="viewport"&&m._rotate(-l),m}Zt(ed,"CircleBucket",{omit:["layers"]});const zh=new ht({"circle-sort-key":new Re(qe.layout_circle["circle-sort-key"])});var Fh={paint:new ht({"circle-radius":new Re(qe.paint_circle["circle-radius"]),"circle-color":new Re(qe.paint_circle["circle-color"]),"circle-blur":new Re(qe.paint_circle["circle-blur"]),"circle-opacity":new Re(qe.paint_circle["circle-opacity"]),"circle-translate":new et(qe.paint_circle["circle-translate"]),"circle-translate-anchor":new et(qe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new et(qe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new et(qe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Re(qe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Re(qe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Re(qe.paint_circle["circle-stroke-opacity"])}),layout:zh},eu=1e-6,wr=typeof Float32Array<"u"?Float32Array:Array;function Sp(){var a=new wr(9);return wr!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a}function Er(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function cs(a,n,l){var u=n[0],m=n[1],v=n[2],x=n[3],R=n[4],N=n[5],P=n[6],G=n[7],H=n[8],K=n[9],X=n[10],Q=n[11],se=n[12],he=n[13],xe=n[14],Ie=n[15],Me=l[0],Pe=l[1],Fe=l[2],je=l[3];return a[0]=Me*u+Pe*R+Fe*H+je*se,a[1]=Me*m+Pe*N+Fe*K+je*he,a[2]=Me*v+Pe*P+Fe*X+je*xe,a[3]=Me*x+Pe*G+Fe*Q+je*Ie,a[4]=(Me=l[4])*u+(Pe=l[5])*R+(Fe=l[6])*H+(je=l[7])*se,a[5]=Me*m+Pe*N+Fe*K+je*he,a[6]=Me*v+Pe*P+Fe*X+je*xe,a[7]=Me*x+Pe*G+Fe*Q+je*Ie,a[8]=(Me=l[8])*u+(Pe=l[9])*R+(Fe=l[10])*H+(je=l[11])*se,a[9]=Me*m+Pe*N+Fe*K+je*he,a[10]=Me*v+Pe*P+Fe*X+je*xe,a[11]=Me*x+Pe*G+Fe*Q+je*Ie,a[12]=(Me=l[12])*u+(Pe=l[13])*R+(Fe=l[14])*H+(je=l[15])*se,a[13]=Me*m+Pe*N+Fe*K+je*he,a[14]=Me*v+Pe*P+Fe*X+je*xe,a[15]=Me*x+Pe*G+Fe*Q+je*Ie,a}function qs(a,n,l){var u,m,v,x,R,N,P,G,H,K,X,Q,se=l[0],he=l[1],xe=l[2];return n===a?(a[12]=n[0]*se+n[4]*he+n[8]*xe+n[12],a[13]=n[1]*se+n[5]*he+n[9]*xe+n[13],a[14]=n[2]*se+n[6]*he+n[10]*xe+n[14],a[15]=n[3]*se+n[7]*he+n[11]*xe+n[15]):(m=n[1],v=n[2],x=n[3],R=n[4],N=n[5],P=n[6],G=n[7],H=n[8],K=n[9],X=n[10],Q=n[11],a[0]=u=n[0],a[1]=m,a[2]=v,a[3]=x,a[4]=R,a[5]=N,a[6]=P,a[7]=G,a[8]=H,a[9]=K,a[10]=X,a[11]=Q,a[12]=u*se+R*he+H*xe+n[12],a[13]=m*se+N*he+K*xe+n[13],a[14]=v*se+P*he+X*xe+n[14],a[15]=x*se+G*he+Q*xe+n[15]),a}function fo(a,n,l){var u=l[0],m=l[1],v=l[2];return a[0]=n[0]*u,a[1]=n[1]*u,a[2]=n[2]*u,a[3]=n[3]*u,a[4]=n[4]*m,a[5]=n[5]*m,a[6]=n[6]*m,a[7]=n[7]*m,a[8]=n[8]*v,a[9]=n[9]*v,a[10]=n[10]*v,a[11]=n[11]*v,a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a}function tu(a,n,l){var u=Math.sin(l),m=Math.cos(l),v=n[4],x=n[5],R=n[6],N=n[7],P=n[8],G=n[9],H=n[10],K=n[11];return n!==a&&(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[4]=v*m+P*u,a[5]=x*m+G*u,a[6]=R*m+H*u,a[7]=N*m+K*u,a[8]=P*m-v*u,a[9]=G*m-x*u,a[10]=H*m-R*u,a[11]=K*m-N*u,a}function nu(a,n,l){var u=Math.sin(l),m=Math.cos(l),v=n[0],x=n[1],R=n[2],N=n[3],P=n[8],G=n[9],H=n[10],K=n[11];return n!==a&&(a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[0]=v*m-P*u,a[1]=x*m-G*u,a[2]=R*m-H*u,a[3]=N*m-K*u,a[8]=v*u+P*m,a[9]=x*u+G*m,a[10]=R*u+H*m,a[11]=N*u+K*m,a}function Tp(a,n,l){var u,m,v,x=l[0],R=l[1],N=l[2],P=Math.hypot(x,R,N);return P<eu?null:(x*=P=1/P,R*=P,N*=P,u=Math.sin(n),m=Math.cos(n),a[0]=x*x*(v=1-m)+m,a[1]=R*x*v+N*u,a[2]=N*x*v-R*u,a[3]=0,a[4]=x*R*v-N*u,a[5]=R*R*v+m,a[6]=N*R*v+x*u,a[7]=0,a[8]=x*N*v+R*u,a[9]=R*N*v-x*u,a[10]=N*N*v+m,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}Math.hypot||(Math.hypot=function(){for(var a=0,n=arguments.length;n--;)a+=arguments[n]*arguments[n];return Math.sqrt(a)});var Vh=cs;function id(){var a=new wr(3);return wr!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a}function Ap(a){var n=new wr(3);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n}function Ll(a){return Math.hypot(a[0],a[1],a[2])}function za(a,n,l){var u=new wr(3);return u[0]=a,u[1]=n,u[2]=l,u}function us(a,n,l){return a[0]=n[0]+l[0],a[1]=n[1]+l[1],a[2]=n[2]+l[2],a}function rd(a,n,l){return a[0]=n[0]-l[0],a[1]=n[1]-l[1],a[2]=n[2]-l[2],a}function kp(a,n,l){return a[0]=n[0]*l[0],a[1]=n[1]*l[1],a[2]=n[2]*l[2],a}function iu(a,n,l){return a[0]=Math.min(n[0],l[0]),a[1]=Math.min(n[1],l[1]),a[2]=Math.min(n[2],l[2]),a}function ru(a,n,l){return a[0]=Math.max(n[0],l[0]),a[1]=Math.max(n[1],l[1]),a[2]=Math.max(n[2],l[2]),a}function ho(a,n,l){return a[0]=n[0]*l,a[1]=n[1]*l,a[2]=n[2]*l,a}function ou(a,n,l,u){return a[0]=n[0]+l[0]*u,a[1]=n[1]+l[1]*u,a[2]=n[2]+l[2]*u,a}function lr(a,n){var l=n[0],u=n[1],m=n[2],v=l*l+u*u+m*m;return v>0&&(v=1/Math.sqrt(v)),a[0]=n[0]*v,a[1]=n[1]*v,a[2]=n[2]*v,a}function qr(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]}function od(a,n,l){var u=n[0],m=n[1],v=n[2],x=l[0],R=l[1],N=l[2];return a[0]=m*N-v*R,a[1]=v*x-u*N,a[2]=u*R-m*x,a}function Ji(a,n,l){var u=n[0],m=n[1],v=n[2],x=l[3]*u+l[7]*m+l[11]*v+l[15];return a[0]=(l[0]*u+l[4]*m+l[8]*v+l[12])/(x=x||1),a[1]=(l[1]*u+l[5]*m+l[9]*v+l[13])/x,a[2]=(l[2]*u+l[6]*m+l[10]*v+l[14])/x,a}function Rp(a,n,l){var u=l[0],m=l[1],v=l[2],x=n[0],R=n[1],N=n[2],P=m*N-v*R,G=v*x-u*N,H=u*R-m*x,K=m*H-v*G,X=v*P-u*H,Q=u*G-m*P,se=2*l[3];return G*=se,H*=se,X*=2,Q*=2,a[0]=x+(P*=se)+(K*=2),a[1]=R+G+X,a[2]=N+H+Q,a}var Ol,Hr=rd,Uh=kp,jh=Ll;function $p(a,n,l){return a[0]=n[0]*l,a[1]=n[1]*l,a[2]=n[2]*l,a[3]=n[3]*l,a}function Hs(a,n,l){var u=n[0],m=n[1],v=n[2],x=n[3];return a[0]=l[0]*u+l[4]*m+l[8]*v+l[12]*x,a[1]=l[1]*u+l[5]*m+l[9]*v+l[13]*x,a[2]=l[2]*u+l[6]*m+l[10]*v+l[14]*x,a[3]=l[3]*u+l[7]*m+l[11]*v+l[15]*x,a}function Mp(){var a=new wr(4);return wr!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a[3]=1,a}function Ip(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a}function Np(a,n,l){l*=.5;var u=n[0],m=n[1],v=n[2],x=n[3],R=Math.sin(l),N=Math.cos(l);return a[0]=u*N+x*R,a[1]=m*N+v*R,a[2]=v*N-m*R,a[3]=x*N-u*R,a}function Lp(a,n,l){l*=.5;var u=n[0],m=n[1],v=n[2],x=n[3],R=Math.sin(l),N=Math.cos(l);return a[0]=u*N-v*R,a[1]=m*N+x*R,a[2]=v*N+u*R,a[3]=x*N-m*R,a}id(),Ol=new wr(4),wr!=Float32Array&&(Ol[0]=0,Ol[1]=0,Ol[2]=0,Ol[3]=0),id(),za(1,0,0),za(0,1,0),Mp(),Mp(),Sp();class sd{constructor(n,l){this.pos=n,this.dir=l}intersectsPlane(n,l,u){const m=qr(l,this.dir);if(Math.abs(m)<1e-6)return!1;const v=((n[0]-this.pos[0])*l[0]+(n[1]-this.pos[1])*l[1]+(n[2]-this.pos[2])*l[2])/m;return u[0]=this.pos[0]+this.dir[0]*v,u[1]=this.pos[1]+this.dir[1]*v,u[2]=this.pos[2]+this.dir[2]*v,!0}closestPointOnSphere(n,l,u){if(function(X,Q){var se=X[0],he=X[1],xe=X[2],Ie=Q[0],Me=Q[1],Pe=Q[2];return Math.abs(se-Ie)<=eu*Math.max(1,Math.abs(se),Math.abs(Ie))&&Math.abs(he-Me)<=eu*Math.max(1,Math.abs(he),Math.abs(Me))&&Math.abs(xe-Pe)<=eu*Math.max(1,Math.abs(xe),Math.abs(Pe))}(this.pos,n)||l===0)return u[0]=u[1]=u[2]=0,!1;const[m,v,x]=this.dir,R=this.pos[0]-n[0],N=this.pos[1]-n[1],P=this.pos[2]-n[2],G=m*m+v*v+x*x,H=2*(R*m+N*v+P*x),K=H*H-4*G*(R*R+N*N+P*P-l*l);if(K<0){const X=Math.max(-H/2,0),Q=R+m*X,se=N+v*X,he=P+x*X,xe=Math.hypot(Q,se,he);return u[0]=Q*l/xe,u[1]=se*l/xe,u[2]=he*l/xe,!1}{const X=(-H-Math.sqrt(K))/(2*G);if(X<0){const Q=Math.hypot(R,N,P);return u[0]=R*l/Q,u[1]=N*l/Q,u[2]=P*l/Q,!1}return u[0]=R+m*X,u[1]=N+v*X,u[2]=P+x*X,!0}}}class ad{constructor(n,l,u,m,v){this.TL=n,this.TR=l,this.BR=u,this.BL=m,this.horizon=v}static fromInvProjectionMatrix(n,l,u){const m=[-1,1,1],v=[1,1,1],x=[1,-1,1],R=[-1,-1,1],N=Ji(m,m,n),P=Ji(v,v,n),G=Ji(x,x,n),H=Ji(R,R,n);return new ad(N,P,G,H,l/u)}}class ld{constructor(n,l){this.points=n,this.planes=l}static fromInvProjectionMatrix(n,l,u,m){const v=Math.pow(2,u),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(N=>{const P=Hs([],N,n),G=1/P[3]/l*v;return function(H,K,X){return H[0]=K[0]*X[0],H[1]=K[1]*X[1],H[2]=K[2]*X[2],H[3]=K[3]*X[3],H}(P,P,[G,G,m?1/P[3]:G,G])}),R=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(N=>{const P=lr([],od([],Hr([],x[N[0]],x[N[1]]),Hr([],x[N[2]],x[N[1]]))),G=-qr(P,x[N[1]]);return P.concat(G)});return new ld(x,R)}}class Or{constructor(n,l){this.min=n,this.max=l,this.center=ho([],us([],this.min,this.max),.5)}quadrant(n){const l=[n%2==0,n<2],u=Ap(this.min),m=Ap(this.max);for(let v=0;v<l.length;v++)u[v]=l[v]?this.min[v]:this.center[v],m[v]=l[v]?this.center[v]:this.max[v];return m[2]=this.max[2],new Or(u,m)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}distanceZ(n){return Math.max(Math.min(this.max[2],n[2]),this.min[2])-n[2]}getCorners(){const n=this.min,l=this.max;return[[n[0],n[1],n[2]],[l[0],n[1],n[2]],[l[0],l[1],n[2]],[n[0],l[1],n[2]],[n[0],n[1],l[2]],[l[0],n[1],l[2]],[l[0],l[1],l[2]],[n[0],l[1],l[2]]]}intersects(n){const l=this.getCorners();let u=!0;for(let m=0;m<n.planes.length;m++){const v=n.planes[m];let x=0;for(let R=0;R<l.length;R++)x+=qr(v,l[R])+v[3]>=0;if(x===0)return 0;x!==l.length&&(u=!1)}if(u)return 2;for(let m=0;m<3;m++){let v=Number.MAX_VALUE,x=-Number.MAX_VALUE;for(let R=0;R<n.points.length;R++){const N=n.points[R][m]-this.min[m];v=Math.min(v,N),x=Math.max(x,N)}if(x<0||v>this.max[m]-this.min[m])return 0}return 1}}function Op(a,n,l,u,m,v,x,R,N){if(v&&a.queryGeometry.isAboveHorizon)return!1;v&&(N*=a.pixelToTileUnitsFactor);const P=a.tileID.canonical,G=l.projection.upVectorScale(P,l.center.lat,l.worldSize).metersToTile;for(const H of n)for(const K of H){const X=K.add(R),Q=m&&l.elevation?l.elevation.exaggeration()*m.getElevationAt(X.x,X.y,!0):0,se=l.projection.projectTilePoint(X.x,X.y,P);if(Q>0){const Me=l.projection.upVector(P,X.x,X.y);se.x+=Me[0]*G*Q,se.y+=Me[1]*G*Q,se.z+=Me[2]*G*Q}const he=v?X:Gh(se.x,se.y,se.z,u),xe=v?a.tilespaceRays.map(Me=>Hh(Me,Q)):a.queryGeometry.screenGeometry,Ie=Hs([],[se.x,se.y,se.z,1],u);if(!x&&v?N*=Ie[3]/l.cameraToCenterDistance:x&&!v&&(N*=l.cameraToCenterDistance/Ie[3]),v){const Me=Bi((K.y/mn+P.y)/(1<<P.z));N/=l.projection.pixelsPerMeter(Me,1)/Gr(1,Me)}if(Oh(xe,he,N))return!0}return!1}function Gh(a,n,l,u){const m=Hs([],[a,n,l,1],u);return new k(m[0]/m[3],m[1]/m[3])}const Pp=za(0,0,0),qh=za(0,0,1);function Hh(a,n){const l=id();return Pp[2]=n,a.intersectsPlane(Pp,qh,l),new k(l[0],l[1])}class Dp extends ed{}function Bp(a,{width:n,height:l},u,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==n*l*u)throw new RangeError("mismatched image size")}else m=new Uint8Array(n*l*u);return a.width=n,a.height=l,a.data=m,a}function zp(a,n,l){const{width:u,height:m}=n;u===a.width&&m===a.height||(cd(a,n,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,u),height:Math.min(a.height,m)},l),a.width=u,a.height=m,a.data=n.data)}function cd(a,n,l,u,m,v){if(m.width===0||m.height===0)return n;if(m.width>a.width||m.height>a.height||l.x>a.width-m.width||l.y>a.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>n.width||m.height>n.height||u.x>n.width-m.width||u.y>n.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const x=a.data,R=n.data;for(let N=0;N<m.height;N++){const P=((l.y+N)*a.width+l.x)*v,G=((u.y+N)*n.width+u.x)*v;for(let H=0;H<m.width*v;H++)R[G+H]=x[P+H]}return n}Zt(Dp,"HeatmapBucket",{omit:["layers"]});class Bo{constructor(n,l){Bp(this,n,1,l)}resize(n){zp(this,new Bo(n),1)}clone(){return new Bo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,l,u,m,v){cd(n,l,u,m,v,1)}}class Cr{constructor(n,l){Bp(this,n,4,l)}resize(n){zp(this,new Cr(n),4)}replace(n,l){l?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Cr({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,l,u,m,v){cd(n,l,u,m,v,4)}}Zt(Bo,"AlphaImage"),Zt(Cr,"RGBAImage");var Kh={paint:new ht({"heatmap-radius":new Re(qe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Re(qe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new et(qe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Vt(qe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new et(qe.paint_heatmap["heatmap-opacity"])})};function ud(a){const n={},l=a.resolution||256,u=a.clips?a.clips.length:1,m=a.image||new Cr({width:l,height:u}),v=(x,R,N)=>{n[a.evaluationKey]=N;const P=a.expression.evaluate(n);m.data[x+R+0]=Math.floor(255*P.r/P.a),m.data[x+R+1]=Math.floor(255*P.g/P.a),m.data[x+R+2]=Math.floor(255*P.b/P.a),m.data[x+R+3]=Math.floor(255*P.a)};if(a.clips)for(let x=0,R=0;x<u;++x,R+=4*l)for(let N=0,P=0;N<l;N++,P+=4){const G=N/(l-1),{start:H,end:K}=a.clips[x];v(R,P,H*(1-G)+K*G)}else for(let x=0,R=0;x<l;x++,R+=4)v(0,R,x/(l-1));return m}var Wh={paint:new ht({"hillshade-illumination-direction":new et(qe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new et(qe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new et(qe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new et(qe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new et(qe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new et(qe.paint_hillshade["hillshade-accent-color"])})};const Zh=Bt([{name:"a_pos",components:2,type:"Int16"}],4),{members:Yh}=Zh;var su=au,Xh=au;function au(a,n,l){l=l||2;var u,m,v,x,R,N,P,G=n&&n.length,H=G?n[0]*l:a.length,K=Fp(a,0,H,l,!0),X=[];if(!K||K.next===K.prev)return X;if(G&&(K=function(se,he,xe,Ie){var Me,Pe,Fe,je=[];for(Me=0,Pe=he.length;Me<Pe;Me++)(Fe=Fp(se,he[Me]*Ie,Me<Pe-1?he[Me+1]*Ie:se.length,Ie,!1))===Fe.next&&(Fe.steiner=!0),je.push(om(Fe));for(je.sort(nm),Me=0;Me<je.length;Me++)xe=ds(xe=im(je[Me],xe),xe.next);return xe}(a,n,K,l)),a.length>80*l){u=v=a[0],m=x=a[1];for(var Q=l;Q<H;Q+=l)(R=a[Q])<u&&(u=R),(N=a[Q+1])<m&&(m=N),R>v&&(v=R),N>x&&(x=N);P=(P=Math.max(v-u,x-m))!==0?1/P:0}return Pl(K,X,l,u,m,P),X}function Fp(a,n,l,u,m){var v,x;if(m===fd(a,n,l,u)>0)for(v=n;v<l;v+=u)x=jp(v,a[v],a[v+1],x);else for(v=l-u;v>=n;v-=u)x=jp(v,a[v],a[v+1],x);return x&&lu(x,x.next)&&(Bl(x),x=x.next),x}function ds(a,n){if(!a)return a;n||(n=a);var l,u=a;do if(l=!1,u.steiner||!lu(u,u.next)&&Di(u.prev,u,u.next)!==0)u=u.next;else{if(Bl(u),(u=n=u.prev)===u.next)break;l=!0}while(l||u!==n);return n}function Pl(a,n,l,u,m,v,x){if(a){!x&&v&&function(G,H,K,X){var Q=G;do Q.z===null&&(Q.z=dd(Q.x,Q.y,H,K,X)),Q.prevZ=Q.prev,Q.nextZ=Q.next,Q=Q.next;while(Q!==G);Q.prevZ.nextZ=null,Q.prevZ=null,function(se){var he,xe,Ie,Me,Pe,Fe,je,ot,lt=1;do{for(xe=se,se=null,Pe=null,Fe=0;xe;){for(Fe++,Ie=xe,je=0,he=0;he<lt&&(je++,Ie=Ie.nextZ);he++);for(ot=lt;je>0||ot>0&&Ie;)je!==0&&(ot===0||!Ie||xe.z<=Ie.z)?(Me=xe,xe=xe.nextZ,je--):(Me=Ie,Ie=Ie.nextZ,ot--),Pe?Pe.nextZ=Me:se=Me,Me.prevZ=Pe,Pe=Me;xe=Ie}Pe.nextZ=null,lt*=2}while(Fe>1)}(Q)}(a,u,m,v);for(var R,N,P=a;a.prev!==a.next;)if(R=a.prev,N=a.next,v?Qh(a,u,m,v):Jh(a))n.push(R.i/l),n.push(a.i/l),n.push(N.i/l),Bl(a),a=N.next,P=N.next;else if((a=N)===P){x?x===1?Pl(a=em(ds(a),n,l),n,l,u,m,v,2):x===2&&tm(a,n,l,u,m,v):Pl(ds(a),n,l,u,m,v,1);break}}}function Jh(a){var n=a.prev,l=a,u=a.next;if(Di(n,l,u)>=0)return!1;for(var m=a.next.next;m!==a.prev;){if(Fa(n.x,n.y,l.x,l.y,u.x,u.y,m.x,m.y)&&Di(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function Qh(a,n,l,u){var m=a.prev,v=a,x=a.next;if(Di(m,v,x)>=0)return!1;for(var R=m.x>v.x?m.x>x.x?m.x:x.x:v.x>x.x?v.x:x.x,N=m.y>v.y?m.y>x.y?m.y:x.y:v.y>x.y?v.y:x.y,P=dd(m.x<v.x?m.x<x.x?m.x:x.x:v.x<x.x?v.x:x.x,m.y<v.y?m.y<x.y?m.y:x.y:v.y<x.y?v.y:x.y,n,l,u),G=dd(R,N,n,l,u),H=a.prevZ,K=a.nextZ;H&&H.z>=P&&K&&K.z<=G;){if(H!==a.prev&&H!==a.next&&Fa(m.x,m.y,v.x,v.y,x.x,x.y,H.x,H.y)&&Di(H.prev,H,H.next)>=0||(H=H.prevZ,K!==a.prev&&K!==a.next&&Fa(m.x,m.y,v.x,v.y,x.x,x.y,K.x,K.y)&&Di(K.prev,K,K.next)>=0))return!1;K=K.nextZ}for(;H&&H.z>=P;){if(H!==a.prev&&H!==a.next&&Fa(m.x,m.y,v.x,v.y,x.x,x.y,H.x,H.y)&&Di(H.prev,H,H.next)>=0)return!1;H=H.prevZ}for(;K&&K.z<=G;){if(K!==a.prev&&K!==a.next&&Fa(m.x,m.y,v.x,v.y,x.x,x.y,K.x,K.y)&&Di(K.prev,K,K.next)>=0)return!1;K=K.nextZ}return!0}function em(a,n,l){var u=a;do{var m=u.prev,v=u.next.next;!lu(m,v)&&Vp(m,u,u.next,v)&&Dl(m,v)&&Dl(v,m)&&(n.push(m.i/l),n.push(u.i/l),n.push(v.i/l),Bl(u),Bl(u.next),u=a=v),u=u.next}while(u!==a);return ds(u)}function tm(a,n,l,u,m,v){var x=a;do{for(var R=x.next.next;R!==x.prev;){if(x.i!==R.i&&sm(x,R)){var N=Up(x,R);return x=ds(x,x.next),N=ds(N,N.next),Pl(x,n,l,u,m,v),void Pl(N,n,l,u,m,v)}R=R.next}x=x.next}while(x!==a)}function nm(a,n){return a.x-n.x}function im(a,n){var l=function(v,x){var R,N=x,P=v.x,G=v.y,H=-1/0;do{if(G<=N.y&&G>=N.next.y&&N.next.y!==N.y){var K=N.x+(G-N.y)*(N.next.x-N.x)/(N.next.y-N.y);if(K<=P&&K>H){if(H=K,K===P){if(G===N.y)return N;if(G===N.next.y)return N.next}R=N.x<N.next.x?N:N.next}}N=N.next}while(N!==x);if(!R)return null;if(P===H)return R;var X,Q=R,se=R.x,he=R.y,xe=1/0;N=R;do P>=N.x&&N.x>=se&&P!==N.x&&Fa(G<he?P:H,G,se,he,G<he?H:P,G,N.x,N.y)&&(X=Math.abs(G-N.y)/(P-N.x),Dl(N,v)&&(X<xe||X===xe&&(N.x>R.x||N.x===R.x&&rm(R,N)))&&(R=N,xe=X)),N=N.next;while(N!==Q);return R}(a,n);if(!l)return n;var u=Up(l,a),m=ds(l,l.next);return ds(u,u.next),n===l?m:n}function rm(a,n){return Di(a.prev,a,n.prev)<0&&Di(n.next,a,a.next)<0}function dd(a,n,l,u,m){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=32767*(a-l)*m)|a<<8))|a<<4))|a<<2))|a<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-u)*m)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function om(a){var n=a,l=a;do(n.x<l.x||n.x===l.x&&n.y<l.y)&&(l=n),n=n.next;while(n!==a);return l}function Fa(a,n,l,u,m,v,x,R){return(m-x)*(n-R)-(a-x)*(v-R)>=0&&(a-x)*(u-R)-(l-x)*(n-R)>=0&&(l-x)*(v-R)-(m-x)*(u-R)>=0}function sm(a,n){return a.next.i!==n.i&&a.prev.i!==n.i&&!function(l,u){var m=l;do{if(m.i!==l.i&&m.next.i!==l.i&&m.i!==u.i&&m.next.i!==u.i&&Vp(m,m.next,l,u))return!0;m=m.next}while(m!==l);return!1}(a,n)&&(Dl(a,n)&&Dl(n,a)&&function(l,u){var m=l,v=!1,x=(l.x+u.x)/2,R=(l.y+u.y)/2;do m.y>R!=m.next.y>R&&m.next.y!==m.y&&x<(m.next.x-m.x)*(R-m.y)/(m.next.y-m.y)+m.x&&(v=!v),m=m.next;while(m!==l);return v}(a,n)&&(Di(a.prev,a,n.prev)||Di(a,n.prev,n))||lu(a,n)&&Di(a.prev,a,a.next)>0&&Di(n.prev,n,n.next)>0)}function Di(a,n,l){return(n.y-a.y)*(l.x-n.x)-(n.x-a.x)*(l.y-n.y)}function lu(a,n){return a.x===n.x&&a.y===n.y}function Vp(a,n,l,u){var m=uu(Di(a,n,l)),v=uu(Di(a,n,u)),x=uu(Di(l,u,a)),R=uu(Di(l,u,n));return m!==v&&x!==R||!(m!==0||!cu(a,l,n))||!(v!==0||!cu(a,u,n))||!(x!==0||!cu(l,a,u))||!(R!==0||!cu(l,n,u))}function cu(a,n,l){return n.x<=Math.max(a.x,l.x)&&n.x>=Math.min(a.x,l.x)&&n.y<=Math.max(a.y,l.y)&&n.y>=Math.min(a.y,l.y)}function uu(a){return a>0?1:a<0?-1:0}function Dl(a,n){return Di(a.prev,a,a.next)<0?Di(a,n,a.next)>=0&&Di(a,a.prev,n)>=0:Di(a,n,a.prev)<0||Di(a,a.next,n)<0}function Up(a,n){var l=new pd(a.i,a.x,a.y),u=new pd(n.i,n.x,n.y),m=a.next,v=n.prev;return a.next=n,n.prev=a,l.next=m,m.prev=l,u.next=l,l.prev=u,v.next=u,u.prev=v,u}function jp(a,n,l,u){var m=new pd(a,n,l);return u?(m.next=u.next,m.prev=u,u.next.prev=m,u.next=m):(m.prev=m,m.next=m),m}function Bl(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function pd(a,n,l){this.i=a,this.x=n,this.y=l,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function fd(a,n,l,u){for(var m=0,v=n,x=l-u;v<l;v+=u)m+=(a[x]-a[v])*(a[v+1]+a[x+1]),x=v;return m}function am(a,n,l,u,m){Gp(a,n,l||0,u||a.length-1,m||lm)}function Gp(a,n,l,u,m){for(;u>l;){if(u-l>600){var v=u-l+1,x=n-l+1,R=Math.log(v),N=.5*Math.exp(2*R/3),P=.5*Math.sqrt(R*N*(v-N)/v)*(x-v/2<0?-1:1);Gp(a,n,Math.max(l,Math.floor(n-x*N/v+P)),Math.min(u,Math.floor(n+(v-x)*N/v+P)),m)}var G=a[n],H=l,K=u;for(zl(a,l,n),m(a[u],G)>0&&zl(a,l,u);H<K;){for(zl(a,H,K),H++,K--;m(a[H],G)<0;)H++;for(;m(a[K],G)>0;)K--}m(a[l],G)===0?zl(a,l,K):zl(a,++K,u),K<=n&&(l=K+1),n<=K&&(u=K-1)}}function zl(a,n,l){var u=a[n];a[n]=a[l],a[l]=u}function lm(a,n){return a<n?-1:a>n?1:0}function hd(a,n){const l=a.length;if(l<=1)return[a];const u=[];let m,v;for(let x=0;x<l;x++){const R=An(a[x]);R!==0&&(a[x].area=Math.abs(R),v===void 0&&(v=R<0),v===R<0?(m&&u.push(m),m=[a[x]]):m.push(a[x]))}if(m&&u.push(m),n>1)for(let x=0;x<u.length;x++)u[x].length<=n||(am(u[x],n,1,u[x].length-1,cm),u[x]=u[x].slice(0,n));return u}function cm(a,n){return n.area-a.area}function md(a,n,l){const u=l.patternDependencies;let m=!1;for(const v of n){const x=v.paint.get(`${a}-pattern`);x.isConstant()||(m=!0);const R=x.constantOr(null);R&&(m=!0,u[R.to]=!0,u[R.from]=!0)}return m}function gd(a,n,l,u,m){const v=m.patternDependencies;for(const x of n){const R=x.paint.get(`${a}-pattern`).value;if(R.kind!=="constant"){let N=R.evaluate({zoom:u-1},l,{},m.availableImages),P=R.evaluate({zoom:u},l,{},m.availableImages),G=R.evaluate({zoom:u+1},l,{},m.availableImages);N=N&&N.name?N.name:N,P=P&&P.name?P.name:P,G=G&&G.name?G.name:G,v[N]=!0,v[P]=!0,v[G]=!0,l.patterns[x.id]={min:N,mid:P,max:G}}}return l}au.deviation=function(a,n,l,u){var m=n&&n.length,v=Math.abs(fd(a,0,m?n[0]*l:a.length,l));if(m)for(var x=0,R=n.length;x<R;x++)v-=Math.abs(fd(a,n[x]*l,x<R-1?n[x+1]*l:a.length,l));var N=0;for(x=0;x<u.length;x+=3){var P=u[x]*l,G=u[x+1]*l,H=u[x+2]*l;N+=Math.abs((a[P]-a[H])*(a[G+1]-a[P+1])-(a[P]-a[G])*(a[H+1]-a[P+1]))}return v===0&&N===0?0:Math.abs((N-v)/v)},au.flatten=function(a){for(var n=a[0][0].length,l={vertices:[],holes:[],dimensions:n},u=0,m=0;m<a.length;m++){for(var v=0;v<a[m].length;v++)for(var x=0;x<n;x++)l.vertices.push(a[m][v][x]);m>0&&l.holes.push(u+=a[m-1].length)}return l},su.default=Xh;class du{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new fn,this.indexArray=new Gn,this.indexArray2=new Pi,this.programConfigurations=new Fs(n.layers,n.zoom),this.segments=new Ii,this.segments2=new Ii,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.projection=n.projection}populate(n,l,u,m){this.hasPattern=md("fill",this.layers,l);const v=this.layers[0].layout.get("fill-sort-key"),x=[];for(const{feature:R,id:N,index:P,sourceLayerIndex:G}of n){const H=this.layers[0]._featureFilter.needGeometry,K=js(R,H);if(!this.layers[0]._featureFilter.filter(new ge(this.zoom),K,u))continue;const X=v?v.evaluate(K,{},u,l.availableImages):void 0,Q={id:N,properties:R.properties,type:R.type,sourceLayerIndex:G,index:P,geometry:H?K.geometry:Do(R,u,m),patterns:{},sortKey:X};x.push(Q)}v&&x.sort((R,N)=>R.sortKey-N.sortKey);for(const R of x){const{geometry:N,index:P,sourceLayerIndex:G}=R;if(this.hasPattern){const H=gd("fill",this.layers,R,this.zoom,l);this.patternFeatures.push(H)}else this.addFeature(R,N,P,u,{},l.availableImages);l.featureIndex.insert(n[P].feature,N,P,G,this.index)}}update(n,l,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,u,m)}addFeatures(n,l,u,m,v){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,l,u,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Yh),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,l,u,m,v,x=[]){for(const R of hd(l,500)){let N=0;for(const Q of R)N+=Q.length;const P=this.segments.prepareSegment(N,this.layoutVertexArray,this.indexArray),G=P.vertexLength,H=[],K=[];for(const Q of R){if(Q.length===0)continue;Q!==R[0]&&K.push(H.length/2);const se=this.segments2.prepareSegment(Q.length,this.layoutVertexArray,this.indexArray2),he=se.vertexLength;this.layoutVertexArray.emplaceBack(Q[0].x,Q[0].y),this.indexArray2.emplaceBack(he+Q.length-1,he),H.push(Q[0].x),H.push(Q[0].y);for(let xe=1;xe<Q.length;xe++)this.layoutVertexArray.emplaceBack(Q[xe].x,Q[xe].y),this.indexArray2.emplaceBack(he+xe-1,he+xe),H.push(Q[xe].x),H.push(Q[xe].y);se.vertexLength+=Q.length,se.primitiveLength+=Q.length}const X=su(H,K);for(let Q=0;Q<X.length;Q+=3)this.indexArray.emplaceBack(G+X[Q],G+X[Q+1],G+X[Q+2]);P.vertexLength+=N,P.primitiveLength+=X.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,u,v,x,m)}}Zt(du,"FillBucket",{omit:["layers","patternFeatures"]});const um=new ht({"fill-sort-key":new Re(qe.layout_fill["fill-sort-key"])});var dm={paint:new ht({"fill-antialias":new et(qe.paint_fill["fill-antialias"]),"fill-opacity":new Re(qe.paint_fill["fill-opacity"]),"fill-color":new Re(qe.paint_fill["fill-color"]),"fill-outline-color":new Re(qe.paint_fill["fill-outline-color"]),"fill-translate":new et(qe.paint_fill["fill-translate"]),"fill-translate-anchor":new et(qe.paint_fill["fill-translate-anchor"]),"fill-pattern":new bt(qe.paint_fill["fill-pattern"])}),layout:um};const pm=Bt([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),fm=Bt([{name:"a_centroid_pos",components:2,type:"Uint16"}]),hm=Bt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:mm}=pm;var qp=Va;function Va(a,n,l,u,m){this.properties={},this.extent=l,this.type=0,this._pbf=a,this._geometry=-1,this._keys=u,this._values=m,a.readFields(gm,this,n)}function gm(a,n,l){a==1?n.id=l.readVarint():a==2?function(u,m){for(var v=u.readVarint()+u.pos;u.pos<v;){var x=m._keys[u.readVarint()],R=m._values[u.readVarint()];m.properties[x]=R}}(l,n):a==3?n.type=l.readVarint():a==4&&(n._geometry=l.pos)}function _m(a){for(var n,l,u=0,m=0,v=a.length,x=v-1;m<v;x=m++)u+=((l=a[x]).x-(n=a[m]).x)*(n.y+l.y);return u}Va.types=["Unknown","Point","LineString","Polygon"],Va.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var n,l=a.readVarint()+a.pos,u=1,m=0,v=0,x=0,R=[];a.pos<l;){if(m<=0){var N=a.readVarint();u=7&N,m=N>>3}if(m--,u===1||u===2)v+=a.readSVarint(),x+=a.readSVarint(),u===1&&(n&&R.push(n),n=[]),n.push(new k(v,x));else{if(u!==7)throw new Error("unknown command "+u);n&&n.push(n[0].clone())}}return n&&R.push(n),R},Va.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var n=a.readVarint()+a.pos,l=1,u=0,m=0,v=0,x=1/0,R=-1/0,N=1/0,P=-1/0;a.pos<n;){if(u<=0){var G=a.readVarint();l=7&G,u=G>>3}if(u--,l===1||l===2)(m+=a.readSVarint())<x&&(x=m),m>R&&(R=m),(v+=a.readSVarint())<N&&(N=v),v>P&&(P=v);else if(l!==7)throw new Error("unknown command "+l)}return[x,N,R,P]},Va.prototype.toGeoJSON=function(a,n,l){var u,m,v=this.extent*Math.pow(2,l),x=this.extent*a,R=this.extent*n,N=this.loadGeometry(),P=Va.types[this.type];function G(X){for(var Q=0;Q<X.length;Q++){var se=X[Q];X[Q]=[360*(se.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(se.y+R)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var H=[];for(u=0;u<N.length;u++)H[u]=N[u][0];G(N=H);break;case 2:for(u=0;u<N.length;u++)G(N[u]);break;case 3:for(N=function(X){var Q=X.length;if(Q<=1)return[X];for(var se,he,xe=[],Ie=0;Ie<Q;Ie++){var Me=_m(X[Ie]);Me!==0&&(he===void 0&&(he=Me<0),he===Me<0?(se&&xe.push(se),se=[X[Ie]]):se.push(X[Ie]))}return se&&xe.push(se),xe}(N),u=0;u<N.length;u++)for(m=0;m<N[u].length;m++)G(N[u][m])}N.length===1?N=N[0]:P="Multi"+P;var K={type:"Feature",geometry:{type:P,coordinates:N},properties:this.properties};return"id"in this&&(K.id=this.id),K};var Hp=Kp;function Kp(a,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(vm,this,n),this.length=this._features.length}function vm(a,n,l){a===15?n.version=l.readVarint():a===1?n.name=l.readString():a===5?n.extent=l.readVarint():a===2?n._features.push(l.pos):a===3?n._keys.push(l.readString()):a===4&&n._values.push(function(u){for(var m=null,v=u.readVarint()+u.pos;u.pos<v;){var x=u.readVarint()>>3;m=x===1?u.readString():x===2?u.readFloat():x===3?u.readDouble():x===4?u.readVarint64():x===5?u.readVarint():x===6?u.readSVarint():x===7?u.readBoolean():null}return m}(l))}function ym(a,n,l){if(a===3){var u=new Hp(l,l.readVarint()+l.pos);u.length&&(n[u.name]=u)}}Kp.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var n=this._pbf.readVarint()+this._pbf.pos;return new qp(this._pbf,n,this.extent,this._keys,this._values)};var Ks={VectorTile:function(a,n){this.layers=a.readFields(ym,{},n)},VectorTileFeature:qp,VectorTileLayer:Hp};function pu(a,n,l,u){const m=[],v=u===0?(x,R,N,P,G,H)=>{x.push(new k(H,N+(H-R)/(P-R)*(G-N)))}:(x,R,N,P,G,H)=>{x.push(new k(R+(H-N)/(G-N)*(P-R),H))};for(const x of a){const R=[];for(const N of x){if(N.length<=2)continue;const P=[];for(let K=0;K<N.length-1;K++){const X=N[K].x,Q=N[K].y,se=N[K+1].x,he=N[K+1].y,xe=u===0?X:Q,Ie=u===0?se:he;xe<n?Ie>n&&v(P,X,Q,se,he,n):xe>l?Ie<l&&v(P,X,Q,se,he,l):P.push(N[K]),Ie<n&&xe>=n&&v(P,X,Q,se,he,n),Ie>l&&xe<=l&&v(P,X,Q,se,he,l)}let G=N[N.length-1];const H=u===0?G.x:G.y;H>=n&&H<=l&&P.push(G),P.length&&(G=P[P.length-1],P[0].x===G.x&&P[0].y===G.y||P.push(P[0]),R.push(P))}R.length&&m.push(R)}return m}const bm=Ks.VectorTileFeature.types,xm=Math.pow(2,13);function Fl(a,n,l,u,m,v,x,R){a.emplaceBack((n<<1)+x,(l<<1)+v,(Math.floor(u*xm)<<1)+m,Math.round(R))}function Vl(a,n,l){a.emplaceBack(n.x,n.y,n.z,l[0]*16384,l[1]*16384,l[2]*16384)}class Wp{constructor(){this.acc=new k(0,0),this.polyCount=[]}startRing(n){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new k(n.x,n.y),this.max=new k(n.x,n.y))}append(n,l){this.currentPolyCount.edges++,this.acc._add(n);const u=this.min,m=this.max;n.x<u.x?u.x=n.x:n.x>m.x&&(m.x=n.x),n.y<u.y?u.y=n.y:n.y>m.y&&(m.y=n.y),((n.x===0||n.x===mn)&&n.x===l.x)!=((n.y===0||n.y===mn)&&n.y===l.y)&&this.processBorderOverlap(n,l),l.x<0!=n.x<0&&this.addBorderIntersection(0,qn(l.y,n.y,(0-l.x)/(n.x-l.x))),l.x>mn!=n.x>mn&&this.addBorderIntersection(1,qn(l.y,n.y,(mn-l.x)/(n.x-l.x))),l.y<0!=n.y<0&&this.addBorderIntersection(2,qn(l.x,n.x,(0-l.y)/(n.y-l.y))),l.y>mn!=n.y>mn&&this.addBorderIntersection(3,qn(l.x,n.x,(mn-l.y)/(n.y-l.y)))}addBorderIntersection(n,l){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const u=this.borders[n];l<u[0]&&(u[0]=l),l>u[1]&&(u[1]=l)}processBorderOverlap(n,l){if(n.x===l.x){if(n.y===l.y)return;const u=n.x===0?0:1;this.addBorderIntersection(u,l.y),this.addBorderIntersection(u,n.y)}else{const u=n.y===0?2:3;this.addBorderIntersection(u,l.x),this.addBorderIntersection(u,n.x)}}centroid(){const n=this.polyCount.reduce((l,u)=>l+u.edges,0);return n!==0?this.acc.div(n)._round():new k(0,0)}span(){return new k(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((n,l)=>n+ +(l[0]!==Number.MAX_VALUE),0)}}class Ul{constructor(n){this.zoom=n.zoom,this.canonical=n.canonical,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.projection=n.projection,this.layoutVertexArray=new nn,this.centroidVertexArray=new sp,this.indexArray=new Gn,this.programConfigurations=new Fs(n.layers,n.zoom),this.segments=new Ii,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.enableTerrain=n.enableTerrain}populate(n,l,u,m){this.features=[],this.hasPattern=md("fill-extrusion",this.layers,l),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(v){const x=Math.exp(Math.PI*(1-v.y/(1<<v.z)*2));return 80150034*x/(x*x+1)/mn/(1<<v.z)}(u);for(const{feature:v,id:x,index:R,sourceLayerIndex:N}of n){const P=this.layers[0]._featureFilter.needGeometry,G=js(v,P);if(!this.layers[0]._featureFilter.filter(new ge(this.zoom),G,u))continue;const H={id:x,sourceLayerIndex:N,index:R,geometry:P?G.geometry:Do(v,u,m),properties:v.properties,type:v.type,patterns:{}},K=this.layoutVertexArray.length;this.hasPattern?this.features.push(gd("fill-extrusion",this.layers,H,this.zoom,l)):this.addFeature(H,H.geometry,R,u,{},l.availableImages,m),l.featureIndex.insert(v,H.geometry,R,N,this.index,K)}this.sortBorders()}addFeatures(n,l,u,m,v){for(const x of this.features){const{geometry:R}=x;this.addFeature(x,R,x.index,l,u,m,v)}this.sortBorders()}update(n,l,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,u,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,mm),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=n.createVertexBuffer(this.layoutVertexExtArray,hm.members,!0))),this.programConfigurations.upload(n),this.uploaded=!0}uploadCentroid(n){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,fm.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,l,u,m,v,x,R){const N=[new k(0,0),new k(mn,mn)],P=R.projection,G=P.name==="globe",H=this.enableTerrain&&!G?new Wp:null;G&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Zd);const K=hd(l,500);for(let se=K.length-1;se>=0;se--){const he=K[se];(he.length===0||(X=he[0]).every(xe=>xe.x<=0)||X.every(xe=>xe.x>=mn)||X.every(xe=>xe.y<=0)||X.every(xe=>xe.y>=mn))&&K.splice(se,1)}var X;let Q;if(G)Q=Yp(K,N,m);else{Q=[];for(const se of K)Q.push({polygon:se,bounds:N})}for(const se of Q){const he=se.polygon;let xe=0,Ie=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(let ot=0;ot<he.length;ot++){const lt=he[ot];if(lt.length===0)continue;xe+=lt.length;let _t=0;H&&H.startRing(lt[0]);for(let kt=0;kt<lt.length;kt++){const Je=lt[kt];if(kt>=1){const gt=lt[kt-1];if(!wm(Je,gt,se.bounds)){H&&H.append(Je,gt),Ie.vertexLength+4>Ii.MAX_VERTEX_ARRAY_LENGTH&&(Ie=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Rt=Je.sub(gt)._perp(),$t=Rt.x/(Math.abs(Rt.x)+Math.abs(Rt.y)),Kt=Rt.y>0?1:0,St=gt.dist(Je);_t+St>32768&&(_t=0),Fl(this.layoutVertexArray,Je.x,Je.y,$t,Kt,0,0,_t),Fl(this.layoutVertexArray,Je.x,Je.y,$t,Kt,0,1,_t),_t+=St,Fl(this.layoutVertexArray,gt.x,gt.y,$t,Kt,0,0,_t),Fl(this.layoutVertexArray,gt.x,gt.y,$t,Kt,0,1,_t);const Gt=Ie.vertexLength;if(this.indexArray.emplaceBack(Gt,Gt+2,Gt+1),this.indexArray.emplaceBack(Gt+1,Gt+2,Gt+3),Ie.vertexLength+=4,Ie.primitiveLength+=2,G){const Tn=this.layoutVertexExtArray,Mn=P.projectTilePoint(Je.x,Je.y,m),cn=P.projectTilePoint(gt.x,gt.y,m),Yt=P.upVector(m,Je.x,Je.y),In=P.upVector(m,gt.x,gt.y);Vl(Tn,Mn,Yt),Vl(Tn,Mn,Yt),Vl(Tn,cn,In),Vl(Tn,cn,In)}}}}}if(Ie.vertexLength+xe>Ii.MAX_VERTEX_ARRAY_LENGTH&&(Ie=this.segments.prepareSegment(xe,this.layoutVertexArray,this.indexArray)),bm[n.type]!=="Polygon")continue;const Me=[],Pe=[],Fe=Ie.vertexLength;for(let ot=0;ot<he.length;ot++){const lt=he[ot];if(lt.length!==0){lt!==he[0]&&Pe.push(Me.length/2);for(let _t=0;_t<lt.length;_t++){const kt=lt[_t];Fl(this.layoutVertexArray,kt.x,kt.y,0,0,1,1,0),Me.push(kt.x),Me.push(kt.y),H&&H.currentPolyCount.top++,G&&Vl(this.layoutVertexExtArray,P.projectTilePoint(kt.x,kt.y,m),P.upVector(m,kt.x,kt.y))}}}const je=su(Me,Pe);for(let ot=0;ot<je.length;ot+=3)this.indexArray.emplaceBack(Fe+je[ot],Fe+je[ot+2],Fe+je[ot+1]);Ie.primitiveLength+=je.length/3,Ie.vertexLength+=xe}if(H&&H.polyCount.length>0){if(H.borders){H.vertexArrayOffset=this.centroidVertexArray.length;const se=H.borders,he=this.featuresOnBorder.push(H)-1;for(let xe=0;xe<4;xe++)se[xe][0]!==Number.MAX_VALUE&&this.borders[xe].push(he)}this.encodeCentroid(H.borders?void 0:H.centroid(),H)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,u,v,x,m)}sortBorders(){for(let n=0;n<4;n++)this.borders[n].sort((l,u)=>this.featuresOnBorder[l].borders[n][0]-this.featuresOnBorder[u].borders[n][0])}encodeCentroid(n,l,u=!0){let m,v;if(n)if(n.y!==0){const R=l.span()._mult(this.tileToMeter);m=(Math.max(n.x,1)<<3)+Math.min(7,Math.round(R.x/10)),v=(Math.max(n.y,1)<<3)+Math.min(7,Math.round(R.y/10))}else m=Math.ceil(7*(n.x+450)),v=0;else m=0,v=+u;let x=u?this.centroidVertexArray.length:l.vertexArrayOffset;for(const R of l.polyCount){u&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*R.edges+R.top);for(let N=0;N<2*R.edges;N++)this.centroidVertexArray.emplace(x++,0,v),this.centroidVertexArray.emplace(x++,m,v);for(let N=0;N<R.top;N++)this.centroidVertexArray.emplace(x++,m,v)}}}function wm(a,n,l){return a.x===n.x&&(a.x<l[0].x||a.x>l[1].x)||a.y===n.y&&(a.y<l[0].y||a.y>l[1].y)}function Zp(){const a=Math.PI/32,n=Math.tan(a),l=Zu;return l*Math.sqrt(1+2*n*n)-l}function Yp(a,n,l){const u=1<<l.z,m=ar(l.x/u),v=ar((l.x+1)/u),x=Bi(l.y/u),R=Bi((l.y+1)/u);return function(N,P,G,H,K=0,X){const Q=[];if(!N.length||!G||!H)return Q;const se=(je,ot)=>{for(const lt of je)Q.push({polygon:lt,bounds:ot})},he=Math.ceil(Math.log2(G)),xe=Math.ceil(Math.log2(H)),Ie=he-xe,Me=[];for(let je=0;je<Math.abs(Ie);je++)Me.push(Ie>0?0:1);for(let je=0;je<Math.min(he,xe);je++)Me.push(0),Me.push(1);let Pe=N;if(Pe=pu(Pe,P[0].y-K,P[1].y+K,1),Pe=pu(Pe,P[0].x-K,P[1].x+K,0),!Pe.length)return Q;const Fe=[];for(Me.length?Fe.push({polygons:Pe,bounds:P,depth:0}):se(Pe,P);Fe.length;){const je=Fe.pop(),ot=je.depth,lt=Me[ot],_t=je.bounds[0],kt=je.bounds[1],Je=lt===0?_t.x:_t.y,gt=lt===0?kt.x:kt.y,Rt=X?X(lt,Je,gt):.5*(Je+gt),$t=pu(je.polygons,Je-K,Rt+K,lt),Kt=pu(je.polygons,Rt-K,gt+K,lt);if($t.length){const St=[_t,new k(lt===0?Rt:kt.x,lt===1?Rt:kt.y)];Me.length>ot+1?Fe.push({polygons:$t,bounds:St,depth:ot+1}):se($t,St)}if(Kt.length){const St=[new k(lt===0?Rt:_t.x,lt===1?Rt:_t.y),kt];Me.length>ot+1?Fe.push({polygons:Kt,bounds:St,depth:ot+1}):se(Kt,St)}}return Q}(a,n,Math.ceil((v-m)/11.25),Math.ceil((x-R)/11.25),1,(N,P,G)=>{if(N===0)return .5*(P+G);{const H=Bi((l.y+P/mn)/u);return(Us(.5*(Bi((l.y+G/mn)/u)+H))*u-l.y)*mn}})}Zt(Ul,"FillExtrusionBucket",{omit:["layers","features"]}),Zt(Wp,"PartMetadata");var Em={paint:new ht({"fill-extrusion-opacity":new et(qe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Re(qe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new et(qe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new et(qe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new bt(qe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Re(qe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Re(qe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new et(qe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Xp(a,n,l){var u=2*Math.PI*6378137/256/Math.pow(2,l);return[a*u-2*Math.PI*6378137/2,n*u-2*Math.PI*6378137/2]}class fu{constructor(n,l,u){this.z=n,this.x=l,this.y=u,this.key=jl(0,n,n,l,u)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,l){const u=function(v,x,R){var N=Xp(256*v,256*(x=Math.pow(2,R)-x-1),R),P=Xp(256*(v+1),256*(x+1),R);return N[0]+","+N[1]+","+P[0]+","+P[1]}(this.x,this.y,this.z),m=function(v,x,R){let N,P="";for(let G=v;G>0;G--)N=1<<G-1,P+=(x&N?1:0)+(R&N?2:0);return P}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(l==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",m).replace("{bbox-epsg-3857}",u)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Jp{constructor(n,l){this.wrap=n,this.canonical=l,this.key=jl(n,l.z,l.z,l.x,l.y)}}class cr{constructor(n,l,u,m,v){this.overscaledZ=n,this.wrap=l,this.canonical=new fu(u,+m,+v),this.key=l===0&&n===u?this.canonical.key:jl(l,n,u,m,v)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){const l=this.canonical.z-n;return n>this.canonical.z?new cr(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new cr(n,this.wrap,n,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(n,l=!0){if(this.overscaledZ===n&&l)return this.key;if(n>this.canonical.z)return jl(this.wrap*+l,n,this.canonical.z,this.canonical.x,this.canonical.y);{const u=this.canonical.z-n;return jl(this.wrap*+l,n,n,this.canonical.x>>u,this.canonical.y>>u)}}isChildOf(n){if(n.wrap!==this.wrap)return!1;const l=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>l&&n.canonical.y===this.canonical.y>>l}children(n){if(this.overscaledZ>=n)return[new cr(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,u=2*this.canonical.x,m=2*this.canonical.y;return[new cr(l,this.wrap,l,u,m),new cr(l,this.wrap,l,u+1,m),new cr(l,this.wrap,l,u,m+1),new cr(l,this.wrap,l,u+1,m+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new cr(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new cr(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Jp(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function jl(a,n,l,u,m){const v=1<<Math.min(l,22);let x=v*(m%v)+u%v;return a&&l<22&&(x+=v*v*((a<0?-2*a-1:2*a)%(1<<2*(22-l)))),16*(32*x+l)+(n-l)}function Gl(a,n){return a.x*n.x+a.y*n.y}function Qp(a,n){if(a.length===1){let l=0;const u=n[l++];let m;for(;!m||u.equals(m);)if(m=n[l++],!m)return 1/0;for(;l<n.length;l++){const v=n[l],x=a[0],R=m.sub(u),N=v.sub(u),P=x.sub(u),G=Gl(R,R),H=Gl(R,N),K=Gl(N,N),X=Gl(P,R),Q=Gl(P,N),se=G*K-H*H,he=(K*X-H*Q)/se,xe=(G*Q-H*X)/se,Ie=u.z*(1-he-xe)+m.z*he+v.z*xe;if(isFinite(Ie))return Ie}return 1/0}{let l=1/0;for(const u of n)l=Math.min(l,u.z);return l}}function hu(a){const n=new k(a[0],a[1]);return n.z=a[2],n}function ef(a,n,l,u,m,v,x,R){const N=x*m.getElevationAt(a,n,!0,!0),P=v[0]!==0,G=P?v[1]===0?x*(v[0]/7-450):x*function(H,K,X){const Q=Math.floor(K[0]/8),se=Math.floor(K[1]/8),he=10*(K[0]-8*Q),xe=10*(K[1]-8*se),Ie=H.getElevationAt(Q,se,!0,!0),Me=H.getMeterToDEM(X),Pe=Math.floor(.5*(he*Me-1)),Fe=Math.floor(.5*(xe*Me-1)),je=H.tileCoordToPixel(Q,se),ot=2*Pe+1,lt=2*Fe+1,_t=function(Kt,St,Gt,Tn,Mn){return[Kt.getElevationAtPixel(St,Gt,!0),Kt.getElevationAtPixel(St+Mn,Gt,!0),Kt.getElevationAtPixel(St,Gt+Mn,!0),Kt.getElevationAtPixel(St+Tn,Gt+Mn,!0)]}(H,je.x-Pe,je.y-Fe,ot,lt),kt=Math.abs(_t[0]-_t[1]),Je=Math.abs(_t[2]-_t[3]),gt=Math.abs(_t[0]-_t[2])+Math.abs(_t[1]-_t[3]),Rt=Math.min(.25,.5*Me*(kt+Je)/ot),$t=Math.min(.25,.5*Me*gt/lt);return Ie+Math.max(Rt*he,$t*xe)}(m,v,R):N;return{base:N+(l===0)?-1:l,top:P?Math.max(G+u,N+l+2):N+u}}Zt(fu,"CanonicalTileID"),Zt(cr,"OverscaledTileID",{omit:["projMatrix"]});const Cm=Bt([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Sm}=Cm,Tm=Bt([{name:"a_packed",components:4,type:"Float32"}]),{members:Am}=Tm,km=Ks.VectorTileFeature.types,Rm=Math.cos(Math.PI/180*37.5);class mu{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.projection=n.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new Sn,this.layoutVertexArray2=new ti,this.indexArray=new Gn,this.programConfigurations=new Fs(n.layers,n.zoom),this.segments=new Ii,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,u,m){this.hasPattern=md("line",this.layers,l);const v=this.layers[0].layout.get("line-sort-key"),x=[];for(const{feature:G,id:H,index:K,sourceLayerIndex:X}of n){const Q=this.layers[0]._featureFilter.needGeometry,se=js(G,Q);if(!this.layers[0]._featureFilter.filter(new ge(this.zoom),se,u))continue;const he=v?v.evaluate(se,{},u):void 0,xe={id:H,properties:G.properties,type:G.type,sourceLayerIndex:X,index:K,geometry:Q?se.geometry:Do(G,u,m),patterns:{},sortKey:he};x.push(xe)}v&&x.sort((G,H)=>G.sortKey-H.sortKey);const{lineAtlas:R,featureIndex:N}=l,P=this.addConstantDashes(R);for(const G of x){const{geometry:H,index:K,sourceLayerIndex:X}=G;if(P&&this.addFeatureDashes(G,R),this.hasPattern){const Q=gd("line",this.layers,G,this.zoom,l);this.patternFeatures.push(Q)}else this.addFeature(G,H,K,u,R.positions,l.availableImages);N.insert(n[K].feature,H,K,X,this.index)}}addConstantDashes(n){let l=!1;for(const u of this.layers){const m=u.paint.get("line-dasharray").value,v=u.layout.get("line-cap").value;if(m.kind!=="constant"||v.kind!=="constant")l=!0;else{const x=v.value,R=m.value;if(!R)continue;n.addDash(R.from,x),n.addDash(R.to,x),R.other&&n.addDash(R.other,x)}}return l}addFeatureDashes(n,l){const u=this.zoom;for(const m of this.layers){const v=m.paint.get("line-dasharray").value,x=m.layout.get("line-cap").value;if(v.kind==="constant"&&x.kind==="constant")continue;let R,N,P,G,H,K;if(v.kind==="constant"){const he=v.value;if(!he)continue;R=he.other||he.to,N=he.to,P=he.from}else R=v.evaluate({zoom:u-1},n),N=v.evaluate({zoom:u},n),P=v.evaluate({zoom:u+1},n);x.kind==="constant"?G=H=K=x.value:(G=x.evaluate({zoom:u-1},n),H=x.evaluate({zoom:u},n),K=x.evaluate({zoom:u+1},n)),l.addDash(R,G),l.addDash(N,H),l.addDash(P,K);const X=l.getKey(R,G),Q=l.getKey(N,H),se=l.getKey(P,K);n.patterns[m.id]={min:X,mid:Q,max:se}}}update(n,l,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,u,m)}addFeatures(n,l,u,m,v){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,l,u,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,Am)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Sm),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&n.properties.hasOwnProperty("mapbox_clip_start")&&n.properties.hasOwnProperty("mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,l,u,m,v,x){const R=this.layers[0].layout,N=R.get("line-join").evaluate(n,{}),P=R.get("line-cap").evaluate(n,{}),G=R.get("line-miter-limit"),H=R.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const K of l)this.addLine(K,n,N,P,G,H);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,u,v,x,m)}addLine(n,l,u,m,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let xe=0;xe<n.length-1;xe++)this.totalDistance+=n[xe].dist(n[xe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const R=km[l.type]==="Polygon";let N=n.length;for(;N>=2&&n[N-1].equals(n[N-2]);)N--;let P=0;for(;P<N-1&&n[P].equals(n[P+1]);)P++;if(N<(R?3:2))return;u==="bevel"&&(v=1.05);const G=this.overscaling<=16?122880/(512*this.overscaling):0,H=this.segments.prepareSegment(10*N,this.layoutVertexArray,this.indexArray);let K,X,Q,se,he;this.e1=this.e2=-1,R&&(K=n[N-2],he=n[P].sub(K)._unit()._perp());for(let xe=P;xe<N;xe++){if(Q=xe===N-1?R?n[P+1]:void 0:n[xe+1],Q&&n[xe].equals(Q))continue;he&&(se=he),K&&(X=K),K=n[xe],he=Q?Q.sub(K)._unit()._perp():se,se=se||he;let Ie=se.add(he);Ie.x===0&&Ie.y===0||Ie._unit();const Me=se.x*he.x+se.y*he.y,Pe=Ie.x*he.x+Ie.y*he.y,Fe=Pe!==0?1/Pe:1/0,je=2*Math.sqrt(2-2*Pe),ot=Pe<Rm&&X&&Q,lt=se.x*he.y-se.y*he.x>0;if(ot&&xe>P){const Je=K.dist(X);if(Je>2*G){const gt=K.sub(K.sub(X)._mult(G/Je)._round());this.updateDistance(X,gt),this.addCurrentVertex(gt,se,0,0,H),X=gt}}const _t=X&&Q;let kt=_t?u:R?"butt":m;if(_t&&kt==="round"&&(Fe<x?kt="miter":Fe<=2&&(kt="fakeround")),kt==="miter"&&Fe>v&&(kt="bevel"),kt==="bevel"&&(Fe>2&&(kt="flipbevel"),Fe<v&&(kt="miter")),X&&this.updateDistance(X,K),kt==="miter")Ie._mult(Fe),this.addCurrentVertex(K,Ie,0,0,H);else if(kt==="flipbevel"){if(Fe>100)Ie=he.mult(-1);else{const Je=Fe*se.add(he).mag()/se.sub(he).mag();Ie._perp()._mult(Je*(lt?-1:1))}this.addCurrentVertex(K,Ie,0,0,H),this.addCurrentVertex(K,Ie.mult(-1),0,0,H)}else if(kt==="bevel"||kt==="fakeround"){const Je=-Math.sqrt(Fe*Fe-1),gt=lt?Je:0,Rt=lt?0:Je;if(X&&this.addCurrentVertex(K,se,gt,Rt,H),kt==="fakeround"){const $t=Math.round(180*je/Math.PI/20);for(let Kt=1;Kt<$t;Kt++){let St=Kt/$t;if(St!==.5){const Tn=St-.5;St+=St*Tn*(St-1)*((1.0904+Me*(Me*(3.55645-1.43519*Me)-3.2452))*Tn*Tn+(.848013+Me*(.215638*Me-1.06021)))}const Gt=he.sub(se)._mult(St)._add(se)._unit()._mult(lt?-1:1);this.addHalfVertex(K,Gt.x,Gt.y,!1,lt,0,H)}}Q&&this.addCurrentVertex(K,he,-gt,-Rt,H)}else if(kt==="butt")this.addCurrentVertex(K,Ie,0,0,H);else if(kt==="square"){const Je=X?1:-1;X||this.addCurrentVertex(K,Ie,Je,Je,H),this.addCurrentVertex(K,Ie,0,0,H),X&&this.addCurrentVertex(K,Ie,Je,Je,H)}else kt==="round"&&(X&&(this.addCurrentVertex(K,se,0,0,H),this.addCurrentVertex(K,se,1,1,H,!0)),Q&&(this.addCurrentVertex(K,he,-1,-1,H,!0),this.addCurrentVertex(K,he,0,0,H)));if(ot&&xe<N-1){const Je=K.dist(Q);if(Je>2*G){const gt=K.add(Q.sub(K)._mult(G/Je)._round());this.updateDistance(K,gt),this.addCurrentVertex(gt,he,0,0,H),K=gt}}}}addCurrentVertex(n,l,u,m,v,x=!1){const R=l.y*m-l.x,N=-l.y-l.x*m;this.addHalfVertex(n,l.x+l.y*u,l.y-l.x*u,x,!1,u,v),this.addHalfVertex(n,R,N,x,!0,-m,v)}addHalfVertex({x:n,y:l},u,m,v,x,R,N){this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(l<<1)+(x?1:0),Math.round(63*u)+128,Math.round(63*m)+128,1+(R===0?0:R<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const P=N.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,P),N.primitiveLength++),x?this.e2=P:this.e1=P}updateScaledDistance(){if(this.lineClips){const n=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=n*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(n,l){this.distance+=n.dist(l),this.updateScaledDistance()}}Zt(mu,"LineBucket",{omit:["layers","patternFeatures"]});const $m=new ht({"line-cap":new Re(qe.layout_line["line-cap"]),"line-join":new Re(qe.layout_line["line-join"]),"line-miter-limit":new et(qe.layout_line["line-miter-limit"]),"line-round-limit":new et(qe.layout_line["line-round-limit"]),"line-sort-key":new Re(qe.layout_line["line-sort-key"])});var tf={paint:new ht({"line-opacity":new Re(qe.paint_line["line-opacity"]),"line-color":new Re(qe.paint_line["line-color"]),"line-translate":new et(qe.paint_line["line-translate"]),"line-translate-anchor":new et(qe.paint_line["line-translate-anchor"]),"line-width":new Re(qe.paint_line["line-width"]),"line-gap-width":new Re(qe.paint_line["line-gap-width"]),"line-offset":new Re(qe.paint_line["line-offset"]),"line-blur":new Re(qe.paint_line["line-blur"]),"line-dasharray":new bt(qe.paint_line["line-dasharray"]),"line-pattern":new bt(qe.paint_line["line-pattern"]),"line-gradient":new Vt(qe.paint_line["line-gradient"]),"line-trim-offset":new et(qe.paint_line["line-trim-offset"])}),layout:$m};const nf=new class extends Re{possiblyEvaluate(a,n){return n=new ge(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),super.possiblyEvaluate(a,n)}evaluate(a,n,l,u){return n=we({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(a,n,l,u)}}(tf.paint.properties["line-width"].specification);function rf(a,n){return n>0?n+2*a:a}nf.useIntegerZoom=!0;const Mm=Bt([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Im=Bt([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Nm=Bt([{name:"a_projected_pos",components:4,type:"Float32"}],4);Bt([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Lm=Bt([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Om=Bt([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Bt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const of=Bt([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Pm=Bt([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Bt([{name:"triangle",components:3,type:"Uint16"}]),Bt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Bt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Bt([{type:"Float32",name:"offsetX"}]),Bt([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Qi=24;const mo=128;function _d(a,n){const{expression:l}=n;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new ge(a+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:u,interpolationType:m}=l;let v=0;for(;v<u.length&&u[v]<=a;)v++;v=Math.max(0,v-1);let x=v;for(;x<u.length&&u[x]<a+1;)x++;x=Math.min(u.length-1,x);const R=u[v],N=u[x];return l.kind==="composite"?{kind:"composite",minZoom:R,maxZoom:N,interpolationType:m}:{kind:"camera",minZoom:R,maxZoom:N,minSize:l.evaluate(new ge(R)),maxSize:l.evaluate(new ge(N)),interpolationType:m}}}function gu(a,{uSize:n,uSizeT:l},{lowerSize:u,upperSize:m}){return a.kind==="source"?u/mo:a.kind==="composite"?qn(u/mo,m/mo,l):n}function Ua(a,n){let l=0,u=0;if(a.kind==="constant")u=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:m,minZoom:v,maxZoom:x}=a,R=m?W(Fr.interpolationFactor(m,n,v,x),0,1):0;a.kind==="camera"?u=qn(a.minSize,a.maxSize,R):l=R}return{uSizeT:l,uSize:u}}var Dm=Object.freeze({__proto__:null,getSizeData:_d,evaluateSizeForFeature:gu,evaluateSizeForZoom:Ua,SIZE_PACK_FACTOR:mo});function Bm(a,n,l){return a.sections.forEach(u=>{u.text=function(m,v,x){const R=v.layout.get("text-transform").evaluate(x,{});return R==="uppercase"?m=m.toLocaleUpperCase():R==="lowercase"&&(m=m.toLocaleLowerCase()),ce.applyArabicShaping&&(m=ce.applyArabicShaping(m)),m}(u.text,n,l)}),a}const ql={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function zm(a){return a==="\uFE36"||a==="\uFE48"||a==="\uFE38"||a==="\uFE44"||a==="\uFE42"||a==="\uFE3E"||a==="\uFE3C"||a==="\uFE3A"||a==="\uFE18"||a==="\uFE40"||a==="\uFE10"||a==="\uFE13"||a==="\uFE14"||a==="\uFF40"||a==="\uFFE3"||a==="\uFE11"||a==="\uFE12"}function Fm(a){return a==="\uFE35"||a==="\uFE47"||a==="\uFE37"||a==="\uFE43"||a==="\uFE41"||a==="\uFE3D"||a==="\uFE3B"||a==="\uFE39"||a==="\uFE17"||a==="\uFE3F"}var sf=function(a,n,l,u,m){var v,x,R=8*m-u-1,N=(1<<R)-1,P=N>>1,G=-7,H=l?m-1:0,K=l?-1:1,X=a[n+H];for(H+=K,v=X&(1<<-G)-1,X>>=-G,G+=R;G>0;v=256*v+a[n+H],H+=K,G-=8);for(x=v&(1<<-G)-1,v>>=-G,G+=u;G>0;x=256*x+a[n+H],H+=K,G-=8);if(v===0)v=1-P;else{if(v===N)return x?NaN:1/0*(X?-1:1);x+=Math.pow(2,u),v-=P}return(X?-1:1)*x*Math.pow(2,v-u)},af=function(a,n,l,u,m,v){var x,R,N,P=8*v-m-1,G=(1<<P)-1,H=G>>1,K=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,X=u?0:v-1,Q=u?1:-1,se=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(R=isNaN(n)?1:0,x=G):(x=Math.floor(Math.log(n)/Math.LN2),n*(N=Math.pow(2,-x))<1&&(x--,N*=2),(n+=x+H>=1?K/N:K*Math.pow(2,1-H))*N>=2&&(x++,N/=2),x+H>=G?(R=0,x=G):x+H>=1?(R=(n*N-1)*Math.pow(2,m),x+=H):(R=n*Math.pow(2,H-1)*Math.pow(2,m),x=0));m>=8;a[l+X]=255&R,X+=Q,R/=256,m-=8);for(x=x<<m|R,P+=m;P>0;a[l+X]=255&x,X+=Q,x/=256,P-=8);a[l+X-Q]|=128*se},Hl=fi;function fi(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}fi.Varint=0,fi.Fixed64=1,fi.Bytes=2,fi.Fixed32=5;var vd=4294967296,lf=1/vd,cf=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function zo(a){return a.type===fi.Bytes?a.readVarint()+a.pos:a.pos+1}function ja(a,n,l){return l?4294967296*n+(a>>>0):4294967296*(n>>>0)+(a>>>0)}function uf(a,n,l){var u=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));l.realloc(u);for(var m=l.pos-1;m>=a;m--)l.buf[m+u]=l.buf[m]}function Vm(a,n){for(var l=0;l<a.length;l++)n.writeVarint(a[l])}function Um(a,n){for(var l=0;l<a.length;l++)n.writeSVarint(a[l])}function jm(a,n){for(var l=0;l<a.length;l++)n.writeFloat(a[l])}function Gm(a,n){for(var l=0;l<a.length;l++)n.writeDouble(a[l])}function qm(a,n){for(var l=0;l<a.length;l++)n.writeBoolean(a[l])}function Hm(a,n){for(var l=0;l<a.length;l++)n.writeFixed32(a[l])}function Km(a,n){for(var l=0;l<a.length;l++)n.writeSFixed32(a[l])}function Wm(a,n){for(var l=0;l<a.length;l++)n.writeFixed64(a[l])}function Zm(a,n){for(var l=0;l<a.length;l++)n.writeSFixed64(a[l])}function _u(a,n){return(a[n]|a[n+1]<<8|a[n+2]<<16)+16777216*a[n+3]}function Ga(a,n,l){a[l]=n,a[l+1]=n>>>8,a[l+2]=n>>>16,a[l+3]=n>>>24}function df(a,n){return(a[n]|a[n+1]<<8|a[n+2]<<16)+(a[n+3]<<24)}function Ym(a,n,l){n.glyphs=[],a===1&&l.readMessage(Xm,n)}function Xm(a,n,l){if(a===3){const{id:u,bitmap:m,width:v,height:x,left:R,top:N,advance:P}=l.readMessage(Jm,{});n.glyphs.push({id:u,bitmap:new Bo({width:v+6,height:x+6},m),metrics:{width:v,height:x,left:R,top:N,advance:P}})}else a===4?n.ascender=l.readSVarint():a===5&&(n.descender=l.readSVarint())}function Jm(a,n,l){a===1?n.id=l.readVarint():a===2?n.bitmap=l.readBytes():a===3?n.width=l.readVarint():a===4?n.height=l.readVarint():a===5?n.left=l.readSVarint():a===6?n.top=l.readSVarint():a===7&&(n.advance=l.readVarint())}function yd(a){let n=0,l=0;for(const x of a)n+=x.w*x.h,l=Math.max(l,x.w);a.sort((x,R)=>R.h-x.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),l),h:1/0}];let m=0,v=0;for(const x of a)for(let R=u.length-1;R>=0;R--){const N=u[R];if(!(x.w>N.w||x.h>N.h)){if(x.x=N.x,x.y=N.y,v=Math.max(v,x.y+x.h),m=Math.max(m,x.x+x.w),x.w===N.w&&x.h===N.h){const P=u.pop();R<u.length&&(u[R]=P)}else x.h===N.h?(N.x+=x.w,N.w-=x.w):x.w===N.w?(N.y+=x.h,N.h-=x.h):(u.push({x:N.x+x.w,y:N.y,w:N.w-x.w,h:x.h}),N.y+=x.h,N.h-=x.h);break}}return{w:m,h:v,fill:n/(m*v)||0}}fi.prototype={destroy:function(){this.buf=null},readFields:function(a,n,l){for(l=l||this.length;this.pos<l;){var u=this.readVarint(),m=u>>3,v=this.pos;this.type=7&u,a(m,n,this),this.pos===v&&this.skip(u)}return n},readMessage:function(a,n){return this.readFields(a,n,this.readVarint()+this.pos)},readFixed32:function(){var a=_u(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=df(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=_u(this.buf,this.pos)+_u(this.buf,this.pos+4)*vd;return this.pos+=8,a},readSFixed64:function(){var a=_u(this.buf,this.pos)+df(this.buf,this.pos+4)*vd;return this.pos+=8,a},readFloat:function(){var a=sf(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=sf(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var n,l,u=this.buf;return n=127&(l=u[this.pos++]),l<128?n:(n|=(127&(l=u[this.pos++]))<<7,l<128?n:(n|=(127&(l=u[this.pos++]))<<14,l<128?n:(n|=(127&(l=u[this.pos++]))<<21,l<128?n:function(m,v,x){var R,N,P=x.buf;if(R=(112&(N=P[x.pos++]))>>4,N<128||(R|=(127&(N=P[x.pos++]))<<3,N<128)||(R|=(127&(N=P[x.pos++]))<<10,N<128)||(R|=(127&(N=P[x.pos++]))<<17,N<128)||(R|=(127&(N=P[x.pos++]))<<24,N<128)||(R|=(1&(N=P[x.pos++]))<<31,N<128))return ja(m,R,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(l=u[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var a=this.readVarint()+this.pos,n=this.pos;return this.pos=a,a-n>=12&&cf?function(l,u,m){return cf.decode(l.subarray(u,m))}(this.buf,n,a):function(l,u,m){for(var v="",x=u;x<m;){var R,N,P,G=l[x],H=null,K=G>239?4:G>223?3:G>191?2:1;if(x+K>m)break;K===1?G<128&&(H=G):K===2?(192&(R=l[x+1]))==128&&(H=(31&G)<<6|63&R)<=127&&(H=null):K===3?(N=l[x+2],(192&(R=l[x+1]))==128&&(192&N)==128&&((H=(15&G)<<12|(63&R)<<6|63&N)<=2047||H>=55296&&H<=57343)&&(H=null)):K===4&&(N=l[x+2],P=l[x+3],(192&(R=l[x+1]))==128&&(192&N)==128&&(192&P)==128&&((H=(15&G)<<18|(63&R)<<12|(63&N)<<6|63&P)<=65535||H>=1114112)&&(H=null)),H===null?(H=65533,K=1):H>65535&&(H-=65536,v+=String.fromCharCode(H>>>10&1023|55296),H=56320|1023&H),v+=String.fromCharCode(H),x+=K}return v}(this.buf,n,a)},readBytes:function(){var a=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,a);return this.pos=a,n},readPackedVarint:function(a,n){if(this.type!==fi.Bytes)return a.push(this.readVarint(n));var l=zo(this);for(a=a||[];this.pos<l;)a.push(this.readVarint(n));return a},readPackedSVarint:function(a){if(this.type!==fi.Bytes)return a.push(this.readSVarint());var n=zo(this);for(a=a||[];this.pos<n;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==fi.Bytes)return a.push(this.readBoolean());var n=zo(this);for(a=a||[];this.pos<n;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==fi.Bytes)return a.push(this.readFloat());var n=zo(this);for(a=a||[];this.pos<n;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==fi.Bytes)return a.push(this.readDouble());var n=zo(this);for(a=a||[];this.pos<n;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==fi.Bytes)return a.push(this.readFixed32());var n=zo(this);for(a=a||[];this.pos<n;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==fi.Bytes)return a.push(this.readSFixed32());var n=zo(this);for(a=a||[];this.pos<n;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==fi.Bytes)return a.push(this.readFixed64());var n=zo(this);for(a=a||[];this.pos<n;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==fi.Bytes)return a.push(this.readSFixed64());var n=zo(this);for(a=a||[];this.pos<n;)a.push(this.readSFixed64());return a},skip:function(a){var n=7&a;if(n===fi.Varint)for(;this.buf[this.pos++]>127;);else if(n===fi.Bytes)this.pos=this.readVarint()+this.pos;else if(n===fi.Fixed32)this.pos+=4;else{if(n!==fi.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(a,n){this.writeVarint(a<<3|n)},realloc:function(a){for(var n=this.length||16;n<this.pos+a;)n*=2;if(n!==this.length){var l=new Uint8Array(n);l.set(this.buf),this.buf=l,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),Ga(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),Ga(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),Ga(this.buf,-1&a,this.pos),Ga(this.buf,Math.floor(a*lf),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),Ga(this.buf,-1&a,this.pos),Ga(this.buf,Math.floor(a*lf),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(n,l){var u,m;if(n>=0?(u=n%4294967296|0,m=n/4294967296|0):(m=~(-n/4294967296),4294967295^(u=~(-n%4294967296))?u=u+1|0:(u=0,m=m+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(v,x,R){R.buf[R.pos++]=127&v|128,v>>>=7,R.buf[R.pos++]=127&v|128,v>>>=7,R.buf[R.pos++]=127&v|128,v>>>=7,R.buf[R.pos++]=127&v|128,R.buf[R.pos]=127&(v>>>=7)}(u,0,l),function(v,x){var R=(7&v)<<4;x.buf[x.pos++]|=R|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(m,l)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(Boolean(a))},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var n=this.pos;this.pos=function(u,m,v){for(var x,R,N=0;N<m.length;N++){if((x=m.charCodeAt(N))>55295&&x<57344){if(!R){x>56319||N+1===m.length?(u[v++]=239,u[v++]=191,u[v++]=189):R=x;continue}if(x<56320){u[v++]=239,u[v++]=191,u[v++]=189,R=x;continue}x=R-55296<<10|x-56320|65536,R=null}else R&&(u[v++]=239,u[v++]=191,u[v++]=189,R=null);x<128?u[v++]=x:(x<2048?u[v++]=x>>6|192:(x<65536?u[v++]=x>>12|224:(u[v++]=x>>18|240,u[v++]=x>>12&63|128),u[v++]=x>>6&63|128),u[v++]=63&x|128)}return v}(this.buf,a,this.pos);var l=this.pos-n;l>=128&&uf(n,l,this),this.pos=n-1,this.writeVarint(l),this.pos+=l},writeFloat:function(a){this.realloc(4),af(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),af(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var n=a.length;this.writeVarint(n),this.realloc(n);for(var l=0;l<n;l++)this.buf[this.pos++]=a[l]},writeRawMessage:function(a,n){this.pos++;var l=this.pos;a(n,this);var u=this.pos-l;u>=128&&uf(l,u,this),this.pos=l-1,this.writeVarint(u),this.pos+=u},writeMessage:function(a,n,l){this.writeTag(a,fi.Bytes),this.writeRawMessage(n,l)},writePackedVarint:function(a,n){n.length&&this.writeMessage(a,Vm,n)},writePackedSVarint:function(a,n){n.length&&this.writeMessage(a,Um,n)},writePackedBoolean:function(a,n){n.length&&this.writeMessage(a,qm,n)},writePackedFloat:function(a,n){n.length&&this.writeMessage(a,jm,n)},writePackedDouble:function(a,n){n.length&&this.writeMessage(a,Gm,n)},writePackedFixed32:function(a,n){n.length&&this.writeMessage(a,Hm,n)},writePackedSFixed32:function(a,n){n.length&&this.writeMessage(a,Km,n)},writePackedFixed64:function(a,n){n.length&&this.writeMessage(a,Wm,n)},writePackedSFixed64:function(a,n){n.length&&this.writeMessage(a,Zm,n)},writeBytesField:function(a,n){this.writeTag(a,fi.Bytes),this.writeBytes(n)},writeFixed32Field:function(a,n){this.writeTag(a,fi.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(a,n){this.writeTag(a,fi.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(a,n){this.writeTag(a,fi.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(a,n){this.writeTag(a,fi.Fixed64),this.writeSFixed64(n)},writeVarintField:function(a,n){this.writeTag(a,fi.Varint),this.writeVarint(n)},writeSVarintField:function(a,n){this.writeTag(a,fi.Varint),this.writeSVarint(n)},writeStringField:function(a,n){this.writeTag(a,fi.Bytes),this.writeString(n)},writeFloatField:function(a,n){this.writeTag(a,fi.Fixed32),this.writeFloat(n)},writeDoubleField:function(a,n){this.writeTag(a,fi.Fixed64),this.writeDouble(n)},writeBooleanField:function(a,n){this.writeVarintField(a,Boolean(n))}};class bd{constructor(n,{pixelRatio:l,version:u,stretchX:m,stretchY:v,content:x}){this.paddedRect=n,this.pixelRatio=l,this.stretchX=m,this.stretchY=v,this.content=x,this.version=u}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class pf{constructor(n,l){const u={},m={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,u,v),this.addImages(l,m,v);const{w:x,h:R}=yd(v),N=new Cr({width:x||1,height:R||1});for(const P in n){const G=n[P],H=u[P].paddedRect;Cr.copy(G.data,N,{x:0,y:0},{x:H.x+1,y:H.y+1},G.data)}for(const P in l){const G=l[P],H=m[P].paddedRect,K=H.x+1,X=H.y+1,Q=G.data.width,se=G.data.height;Cr.copy(G.data,N,{x:0,y:0},{x:K,y:X},G.data),Cr.copy(G.data,N,{x:0,y:se-1},{x:K,y:X-1},{width:Q,height:1}),Cr.copy(G.data,N,{x:0,y:0},{x:K,y:X+se},{width:Q,height:1}),Cr.copy(G.data,N,{x:Q-1,y:0},{x:K-1,y:X},{width:1,height:se}),Cr.copy(G.data,N,{x:0,y:0},{x:K+Q,y:X},{width:1,height:se})}this.image=N,this.iconPositions=u,this.patternPositions=m}addImages(n,l,u){for(const m in n){const v=n[m],x={x:0,y:0,w:v.data.width+2,h:v.data.height+2};u.push(x),l[m]=new bd(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(n,l){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(u=>n.hasImage(u)),n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const u in n.updatedImages)this.patchUpdatedImage(this.iconPositions[u],n.getImage(u),l),this.patchUpdatedImage(this.patternPositions[u],n.getImage(u),l)}patchUpdatedImage(n,l,u){if(!n||!l||n.version===l.version)return;n.version=l.version;const[m,v]=n.tl;u.update(l.data,void 0,{x:m,y:v})}}Zt(bd,"ImagePosition"),Zt(pf,"ImageAtlas");const Pr={horizontal:1,vertical:2,horizontalOnly:3};class Kl{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,l){const u=new Kl;return u.scale=n||1,u.fontStack=l,u}static forImage(n){const l=new Kl;return l.imageName=n,l}}class qa{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,l){const u=new qa;for(let m=0;m<n.sections.length;m++){const v=n.sections[m];v.image?u.addImageSection(v):u.addTextSection(v,l)}return u}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSections(){return this.sections}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(n){this.text=function(l,u){let m="";for(let v=0;v<l.length;v++){const x=l.charCodeAt(v+1)||null,R=l.charCodeAt(v-1)||null;m+=!u&&(x&&f(x)&&!ql[l[v+1]]||R&&f(R)&&!ql[l[v-1]])||!ql[l[v]]?l[v]:ql[l[v]]}return m}(this.text,n)}trim(){let n=0;for(let u=0;u<this.text.length&&vu[this.text.charCodeAt(u)];u++)n++;let l=this.text.length;for(let u=this.text.length-1;u>=0&&u>=n&&vu[this.text.charCodeAt(u)];u--)l--;this.text=this.text.substring(n,l),this.sectionIndex=this.sectionIndex.slice(n,l)}substring(n,l){const u=new qa;return u.text=this.text.substring(n,l),u.sectionIndex=this.sectionIndex.slice(n,l),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,l)=>Math.max(n,this.sections[l].scale),0)}addTextSection(n,l){this.text+=n.text,this.sections.push(Kl.forText(n.scale,n.fontStack||l));const u=this.sections.length-1;for(let m=0;m<n.text.length;++m)this.sectionIndex.push(u)}addImageSection(n){const l=n.image?n.image.name:"";if(l.length===0)return void un("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push(Kl.forImage(l)),this.sectionIndex.push(this.sections.length-1)):un("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function xd(a,n,l,u,m,v,x,R,N,P,G,H,K,X,Q,se){const he=qa.fromFeature(a,m);let xe;H===Pr.vertical&&he.verticalizePunctuation(K);const{processBidirectionalText:Ie,processStyledBidirectionalText:Me}=ce;if(Ie&&he.sections.length===1){xe=[];const je=Ie(he.toString(),wd(he,P,v,n,u,X,Q));for(const ot of je){const lt=new qa;lt.text=ot,lt.sections=he.sections;for(let _t=0;_t<ot.length;_t++)lt.sectionIndex.push(0);xe.push(lt)}}else if(Me){xe=[];const je=Me(he.text,he.sectionIndex,wd(he,P,v,n,u,X,Q));for(const ot of je){const lt=new qa;lt.text=ot[0],lt.sectionIndex=ot[1],lt.sections=he.sections,xe.push(lt)}}else xe=function(je,ot){const lt=[],_t=je.text;let kt=0;for(const Je of ot)lt.push(je.substring(kt,Je)),kt=Je;return kt<_t.length&&lt.push(je.substring(kt,_t.length)),lt}(he,wd(he,P,v,n,u,X,Q));const Pe=[],Fe={positionedLines:Pe,text:he.toString(),top:G[1],bottom:G[1],left:G[0],right:G[0],writingMode:H,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(je,ot,lt,_t,kt,Je,gt,Rt,$t,Kt,St,Gt){let Tn=0,Mn=0,cn=0;const Yt=Rt==="right"?1:Rt==="left"?0:.5;let In=!1;for(const Nn of kt){const Kn=Nn.getSections();for(const hi of Kn){if(hi.imageName)continue;const pi=ot[hi.fontStack];if(pi&&(In=pi.ascender!==void 0&&pi.descender!==void 0,!In))break}if(!In)break}let $n=0;for(const Nn of kt){Nn.trim();const Kn=Nn.getMaxScale(),hi=(Kn-1)*Qi,pi={positionedGlyphs:[],lineOffset:0};je.positionedLines[$n]=pi;const ci=pi.positionedGlyphs;let vi=0;if(!Nn.length()){Mn+=Je,++$n;continue}let Ci=0,Ki=0;for(let Fn=0;Fn<Nn.length();Fn++){const Ri=Nn.getSection(Fn),ir=Nn.getSectionIndex(Fn),ri=Nn.getCharCode(Fn);let Si=Ri.scale,dr=null,wi=null,Li=null,Wi=Qi,qi=0;const er=!($t===Pr.horizontal||!St&&!o(ri)||St&&(vu[ri]||(en=ri,Bc(en)||zc(en)||Ds(en)||Al(en)||$l(en))));if(Ri.imageName){const pr=_t[Ri.imageName];if(!pr)continue;Li=Ri.imageName,je.iconsInText=je.iconsInText||!0,wi=pr.paddedRect;const Zi=pr.displaySize;Si=Si*Qi/Gt,dr={width:Zi[0],height:Zi[1],left:1,top:-3,advance:er?Zi[1]:Zi[0],localGlyph:!1},qi=In?-dr.height*Si:Kn*Qi-17-Zi[1]*Si,Wi=dr.advance;const Vo=(er?Zi[0]:Zi[1])*Si-Qi*Kn;Vo>0&&Vo>vi&&(vi=Vo)}else{const pr=lt[Ri.fontStack];if(!pr)continue;pr[ri]&&(wi=pr[ri]);const Zi=ot[Ri.fontStack];if(!Zi)continue;const Vo=Zi.glyphs[ri];if(!Vo)continue;if(dr=Vo.metrics,Wi=ri!==8203?Qi:0,In){const Xa=Zi.ascender!==void 0?Math.abs(Zi.ascender):0,ic=Zi.descender!==void 0?Math.abs(Zi.descender):0,rc=(Xa+ic)*Si;Ci<rc&&(Ci=rc,Ki=(Xa-ic)/2*Si),qi=-Xa*Si}else qi=(Kn-Si)*Qi-17}er?(je.verticalizable=!0,ci.push({glyph:ri,imageName:Li,x:Tn,y:Mn+qi,vertical:er,scale:Si,localGlyph:dr.localGlyph,fontStack:Ri.fontStack,sectionIndex:ir,metrics:dr,rect:wi}),Tn+=Wi*Si+Kt):(ci.push({glyph:ri,imageName:Li,x:Tn,y:Mn+qi,vertical:er,scale:Si,localGlyph:dr.localGlyph,fontStack:Ri.fontStack,sectionIndex:ir,metrics:dr,rect:wi}),Tn+=dr.advance*Si+Kt)}ci.length!==0&&(cn=Math.max(Tn-Kt,cn),In?_f(ci,Yt,vi,Ki,Je*Kn/2):_f(ci,Yt,vi,0,Je/2)),Tn=0;const _r=Je*Kn+vi;pi.lineOffset=Math.max(vi,hi),Mn+=_r,++$n}var en;const zi=Mn,{horizontalAlign:Ni,verticalAlign:ki}=Ed(gt);(function(Nn,Kn,hi,pi,ci,vi){const Ci=(Kn-hi)*ci,Ki=-vi*pi;for(const _r of Nn)for(const Fn of _r.positionedGlyphs)Fn.x+=Ci,Fn.y+=Ki})(je.positionedLines,Yt,Ni,ki,cn,zi),je.top+=-ki*zi,je.bottom=je.top+zi,je.left+=-Ni*cn,je.right=je.left+cn,je.hasBaseline=In}(Fe,n,l,u,xe,x,R,N,H,P,K,se),!function(je){for(const ot of je)if(ot.positionedGlyphs.length!==0)return!1;return!0}(Pe)&&Fe}const vu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Qm={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function ff(a,n,l,u,m,v){if(n.imageName){const x=u[n.imageName];return x?x.displaySize[0]*n.scale*Qi/v+m:0}{const x=l[n.fontStack],R=x&&x.glyphs[a];return R?R.metrics.advance*n.scale+m:0}}function hf(a,n,l,u){const m=Math.pow(a-n,2);return u?a<n?m/2:2*m:m+Math.abs(l)*l}function eg(a,n,l){let u=0;return a===10&&(u-=1e4),l&&(u+=150),a!==40&&a!==65288||(u+=50),n!==41&&n!==65289||(u+=50),u}function mf(a,n,l,u,m,v){let x=null,R=hf(n,l,m,v);for(const N of u){const P=hf(n-N.x,l,m,v)+N.badness;P<=R&&(x=N,R=P)}return{index:a,x:n,priorBreak:x,badness:R}}function gf(a){return a?gf(a.priorBreak).concat(a.index):[]}function wd(a,n,l,u,m,v,x){if(v!=="point")return[];if(!a)return[];const R=[],N=function(K,X,Q,se,he,xe){let Ie=0;for(let Me=0;Me<K.length();Me++){const Pe=K.getSection(Me);Ie+=ff(K.getCharCode(Me),Pe,se,he,X,xe)}return Ie/Math.max(1,Math.ceil(Ie/Q))}(a,n,l,u,m,x),P=a.text.indexOf("\u200B")>=0;let G=0;for(let K=0;K<a.length();K++){const X=a.getSection(K),Q=a.getCharCode(K);if(vu[Q]||(G+=ff(Q,X,u,m,n,x)),K<a.length()-1){const se=!((H=Q)<11904||!(El(H)||wl(H)||kl(H)||qc(H)||Ia(H)||Fc(H)||Cl(H)||ka(H)||Uc(H)||Tl(H)||Ma(H)||Ml(H)||Ra(H)||Bs(H)||Vc(H)||Sl(H)||$a(H)||Hc(H)||Na(H)||jc(H)));(Qm[Q]||se||X.imageName)&&R.push(mf(K+1,G,N,R,eg(Q,a.getCharCode(K+1),se&&P),!1))}}var H;return gf(mf(a.length(),G,N,R,0,!0))}function Ed(a){let n=.5,l=.5;switch(a){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:n,verticalAlign:l}}function _f(a,n,l,u,m){if(!(n||l||u||m))return;const v=a.length-1,x=a[v],R=(x.x+x.metrics.advance*x.scale)*n;for(let N=0;N<=v;N++)a[N].x-=R,a[N].y+=l+u+m}function tg(a,n,l){const{horizontalAlign:u,verticalAlign:m}=Ed(l),v=n[0]-a.displaySize[0]*u,x=n[1]-a.displaySize[1]*m;return{image:a,top:x,bottom:x+a.displaySize[1],left:v,right:v+a.displaySize[0]}}function vf(a,n,l,u,m,v){const x=a.image;let R;if(x.content){const he=x.content,xe=x.pixelRatio||1;R=[he[0]/xe,he[1]/xe,x.displaySize[0]-he[2]/xe,x.displaySize[1]-he[3]/xe]}const N=n.left*v,P=n.right*v;let G,H,K,X;l==="width"||l==="both"?(X=m[0]+N-u[3],H=m[0]+P+u[1]):(X=m[0]+(N+P-x.displaySize[0])/2,H=X+x.displaySize[0]);const Q=n.top*v,se=n.bottom*v;return l==="height"||l==="both"?(G=m[1]+Q-u[0],K=m[1]+se+u[2]):(G=m[1]+(Q+se-x.displaySize[1])/2,K=G+x.displaySize[1]),{image:x,top:G,right:H,bottom:K,left:X,collisionPadding:R}}class Fo extends k{constructor(n,l,u,m,v){super(n,l),this.angle=m,this.z=u,v!==void 0&&(this.segment=v)}clone(){return new Fo(this.x,this.y,this.z,this.angle,this.segment)}}function yf(a,n,l,u,m){if(n.segment===void 0)return!0;let v=n,x=n.segment+1,R=0;for(;R>-l/2;){if(x--,x<0)return!1;R-=a[x].dist(v),v=a[x]}R+=a[x].dist(a[x+1]),x++;const N=[];let P=0;for(;R<l/2;){const G=a[x],H=a[x+1];if(!H)return!1;let K=a[x-1].angleTo(G)-G.angleTo(H);for(K=Math.abs((K+3*Math.PI)%(2*Math.PI)-Math.PI),N.push({distance:R,angleDelta:K}),P+=K;R-N[0].distance>u;)P-=N.shift().angleDelta;if(P>m)return!1;x++,R+=G.dist(H)}return!0}function bf(a){let n=0;for(let l=0;l<a.length-1;l++)n+=a[l].dist(a[l+1]);return n}function xf(a,n,l){return a?.6*n*l:0}function wf(a,n){return Math.max(a?a.right-a.left:0,n?n.right-n.left:0)}function ng(a,n,l,u,m,v){const x=xf(l,m,v),R=wf(l,u)*v;let N=0;const P=bf(a)/2;for(let G=0;G<a.length-1;G++){const H=a[G],K=a[G+1],X=H.dist(K);if(N+X>P){const Q=(P-N)/X,se=qn(H.x,K.x,Q),he=qn(H.y,K.y,Q),xe=new Fo(se,he,0,K.angleTo(H),G);return!x||yf(a,xe,R,x,n)?xe:void 0}N+=X}}function ig(a,n,l,u,m,v,x,R,N){const P=xf(u,v,x),G=wf(u,m),H=G*x,K=a[0].x===0||a[0].x===N||a[0].y===0||a[0].y===N;return n-H<n/4&&(n=H+n/4),Ef(a,K?n/2*R%n:(G/2+2*v)*x*R%n,n,P,l,H,K,!1,N)}function Ef(a,n,l,u,m,v,x,R,N){const P=v/2,G=bf(a);let H=0,K=n-l,X=[];for(let Q=0;Q<a.length-1;Q++){const se=a[Q],he=a[Q+1],xe=se.dist(he),Ie=he.angleTo(se);for(;K+l<H+xe;){K+=l;const Me=(K-H)/xe,Pe=qn(se.x,he.x,Me),Fe=qn(se.y,he.y,Me);if(Pe>=0&&Pe<N&&Fe>=0&&Fe<N&&K-P>=0&&K+P<=G){const je=new Fo(Pe,Fe,0,Ie,Q);je._round(),u&&!yf(a,je,v,u,m)||X.push(je)}}H+=xe}return R||X.length||x||(X=Ef(a,H/2,l,u,m,v,x,!0,N)),X}function Cf(a,n,l,u,m){const v=[];for(let x=0;x<a.length;x++){const R=a[x];let N;for(let P=0;P<R.length-1;P++){let G=R[P],H=R[P+1];G.x<n&&H.x<n||(G.x<n?G=new k(n,G.y+(n-G.x)/(H.x-G.x)*(H.y-G.y))._round():H.x<n&&(H=new k(n,G.y+(n-G.x)/(H.x-G.x)*(H.y-G.y))._round()),G.y<l&&H.y<l||(G.y<l?G=new k(G.x+(l-G.y)/(H.y-G.y)*(H.x-G.x),l)._round():H.y<l&&(H=new k(G.x+(l-G.y)/(H.y-G.y)*(H.x-G.x),l)._round()),G.x>=u&&H.x>=u||(G.x>=u?G=new k(u,G.y+(u-G.x)/(H.x-G.x)*(H.y-G.y))._round():H.x>=u&&(H=new k(u,G.y+(u-G.x)/(H.x-G.x)*(H.y-G.y))._round()),G.y>=m&&H.y>=m||(G.y>=m?G=new k(G.x+(m-G.y)/(H.y-G.y)*(H.x-G.x),m)._round():H.y>=m&&(H=new k(G.x+(m-G.y)/(H.y-G.y)*(H.x-G.x),m)._round()),N&&G.equals(N[N.length-1])||(N=[G],v.push(N)),N.push(H)))))}}return v}Zt(Fo,"Anchor");const Wl=1e20;function Sf(a,n,l,u,m,v,x,R,N){for(let P=n;P<n+u;P++)Tf(a,l*v+P,v,m,x,R,N);for(let P=l;P<l+m;P++)Tf(a,P*v+n,1,u,x,R,N)}function Tf(a,n,l,u,m,v,x){v[0]=0,x[0]=-Wl,x[1]=Wl,m[0]=a[n];for(let R=1,N=0,P=0;R<u;R++){m[R]=a[n+R*l];const G=R*R;do{const H=v[N];P=(m[R]-m[H]+G-H*H)/(R-H)/2}while(P<=x[N]&&--N>-1);N++,v[N]=R,x[N]=P,x[N+1]=Wl}for(let R=0,N=0;R<u;R++){for(;x[N+1]<R;)N++;const P=v[N],G=R-P;a[n+R*l]=m[P]+G*G}}const Cd={none:0,ideographs:1,all:2};class Ha{constructor(n,l,u){this.requestManager=n,this.localGlyphMode=l,this.localFontFamily=u,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(n){this.url=n}getGlyphs(n,l){const u=[];for(const m in n)for(const v of n[m])u.push({stack:m,id:v});ie(u,({stack:m,id:v},x)=>{let R=this.entries[m];R||(R=this.entries[m]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let N=R.glyphs[v];if(N!==void 0)return void x(null,{stack:m,id:v,glyph:N});if(N=this._tinySDF(R,m,v),N)return R.glyphs[v]=N,void x(null,{stack:m,id:v,glyph:N});const P=Math.floor(v/256);if(256*P>65535)return void x(new Error("glyphs > 65535 not supported"));if(R.ranges[P])return void x(null,{stack:m,id:v,glyph:N});let G=R.requests[P];G||(G=R.requests[P]=[],Ha.loadGlyphRange(m,P,this.url,this.requestManager,(H,K)=>{if(K){R.ascender=K.ascender,R.descender=K.descender;for(const X in K.glyphs)this._doesCharSupportLocalGlyph(+X)||(R.glyphs[+X]=K.glyphs[+X]);R.ranges[P]=!0}for(const X of G)X(H,K);delete R.requests[P]})),G.push((H,K)=>{H?x(H):K&&x(null,{stack:m,id:v,glyph:K.glyphs[v]||null})})},(m,v)=>{if(m)l(m);else if(v){const x={};for(const{stack:R,id:N,glyph:P}of v)x[R]===void 0&&(x[R]={}),x[R].glyphs===void 0&&(x[R].glyphs={}),x[R].glyphs[N]=P&&{id:P.id,bitmap:P.bitmap.clone(),metrics:P.metrics},x[R].ascender=this.entries[R].ascender,x[R].descender=this.entries[R].descender;l(null,x)}})}_doesCharSupportLocalGlyph(n){return this.localGlyphMode!==Cd.none&&(this.localGlyphMode===Cd.all?!!this.localFontFamily:!!this.localFontFamily&&(Tl(n)||Gc(n)||Ra(n)||$a(n)||ka(n)))}_tinySDF(n,l,u){const m=this.localFontFamily;if(!m||!this._doesCharSupportLocalGlyph(u))return;let v=n.tinySDF;if(!v){let se="400";/bold/i.test(l)?se="900":/medium/i.test(l)?se="500":/light/i.test(l)&&(se="200"),v=n.tinySDF=new Ha.TinySDF({fontFamily:m,fontWeight:se,fontSize:48,buffer:6,radius:16}),v.fontWeight=se}if(this.localGlyphs[v.fontWeight][u])return this.localGlyphs[v.fontWeight][u];const x=String.fromCharCode(u),{data:R,width:N,height:P,glyphWidth:G,glyphHeight:H,glyphLeft:K,glyphTop:X,glyphAdvance:Q}=v.draw(x);return this.localGlyphs[v.fontWeight][u]={id:u,bitmap:new Bo({width:N,height:P},R),metrics:{width:G/2,height:H/2,left:K/2,top:X/2-27,advance:Q/2,localGlyph:!0}}}}function Af(a,n,l,u){const m=[],v=a.image,x=v.pixelRatio,R=v.paddedRect.w-2,N=v.paddedRect.h-2,P=a.right-a.left,G=a.bottom-a.top,H=v.stretchX||[[0,R]],K=v.stretchY||[[0,N]],X=(Je,gt)=>Je+gt[1]-gt[0],Q=H.reduce(X,0),se=K.reduce(X,0),he=R-Q,xe=N-se;let Ie=0,Me=Q,Pe=0,Fe=se,je=0,ot=he,lt=0,_t=xe;if(v.content&&u){const Je=v.content;Ie=yu(H,0,Je[0]),Pe=yu(K,0,Je[1]),Me=yu(H,Je[0],Je[2]),Fe=yu(K,Je[1],Je[3]),je=Je[0]-Ie,lt=Je[1]-Pe,ot=Je[2]-Je[0]-Me,_t=Je[3]-Je[1]-Fe}const kt=(Je,gt,Rt,$t)=>{const Kt=bu(Je.stretch-Ie,Me,P,a.left),St=xu(Je.fixed-je,ot,Je.stretch,Q),Gt=bu(gt.stretch-Pe,Fe,G,a.top),Tn=xu(gt.fixed-lt,_t,gt.stretch,se),Mn=bu(Rt.stretch-Ie,Me,P,a.left),cn=xu(Rt.fixed-je,ot,Rt.stretch,Q),Yt=bu($t.stretch-Pe,Fe,G,a.top),In=xu($t.fixed-lt,_t,$t.stretch,se),$n=new k(Kt,Gt),en=new k(Mn,Gt),zi=new k(Mn,Yt),Ni=new k(Kt,Yt),ki=new k(St/x,Tn/x),Nn=new k(cn/x,In/x),Kn=n*Math.PI/180;if(Kn){const ci=Math.sin(Kn),vi=Math.cos(Kn),Ci=[vi,-ci,ci,vi];$n._matMult(Ci),en._matMult(Ci),Ni._matMult(Ci),zi._matMult(Ci)}const hi=Je.stretch+Je.fixed,pi=gt.stretch+gt.fixed;return{tl:$n,tr:en,bl:Ni,br:zi,tex:{x:v.paddedRect.x+1+hi,y:v.paddedRect.y+1+pi,w:Rt.stretch+Rt.fixed-hi,h:$t.stretch+$t.fixed-pi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ki,pixelOffsetBR:Nn,minFontScaleX:ot/x/P,minFontScaleY:_t/x/G,isSDF:l}};if(u&&(v.stretchX||v.stretchY)){const Je=kf(H,he,Q),gt=kf(K,xe,se);for(let Rt=0;Rt<Je.length-1;Rt++){const $t=Je[Rt],Kt=Je[Rt+1];for(let St=0;St<gt.length-1;St++)m.push(kt($t,gt[St],Kt,gt[St+1]))}}else m.push(kt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:R+1},{fixed:0,stretch:N+1}));return m}function yu(a,n,l){let u=0;for(const m of a)u+=Math.max(n,Math.min(l,m[1]))-Math.max(n,Math.min(l,m[0]));return u}function kf(a,n,l){const u=[{fixed:-1,stretch:0}];for(const[m,v]of a){const x=u[u.length-1];u.push({fixed:m-x.stretch,stretch:x.stretch}),u.push({fixed:m-x.stretch,stretch:x.stretch+(v-m)})}return u.push({fixed:n+1,stretch:l}),u}function bu(a,n,l,u){return a/n*l+u}function xu(a,n,l,u){return a-n*l/u}function rg(a,n,l,u){const m=n+a.positionedLines[u].lineOffset;return u===0?l+m/2:l+(m+(n+a.positionedLines[u-1].lineOffset))/2}Ha.loadGlyphRange=function(a,n,l,u,m){const v=256*n,x=v+255,R=u.transformRequest(u.normalizeGlyphsURL(l).replace("{fontstack}",a).replace("{range}",`${v}-${x}`),ke.Glyphs);Be(R,(N,P)=>{if(N)m(N);else if(P){const G={},H=function(K){return new Hl(K).readFields(Ym,{})}(P);for(const K of H.glyphs)G[K.id]=K;m(null,{glyphs:G,ascender:H.ascender,descender:H.descender})}})},Ha.TinySDF=class{constructor({fontSize:a=24,buffer:n=3,radius:l=8,cutoff:u=.25,fontFamily:m="sans-serif",fontWeight:v="normal",fontStyle:x="normal"}={}){this.buffer=n,this.cutoff=u,this.radius=l;const R=this.size=a+4*n,N=this._createCanvas(R),P=this.ctx=N.getContext("2d",{willReadFrequently:!0});P.font=`${x} ${v} ${a}px ${m}`,P.textBaseline="alphabetic",P.textAlign="left",P.fillStyle="black",this.gridOuter=new Float64Array(R*R),this.gridInner=new Float64Array(R*R),this.f=new Float64Array(R),this.z=new Float64Array(R+1),this.v=new Uint16Array(R)}_createCanvas(a){const n=document.createElement("canvas");return n.width=n.height=a,n}draw(a){const{width:n,actualBoundingBoxAscent:l,actualBoundingBoxDescent:u,actualBoundingBoxLeft:m,actualBoundingBoxRight:v}=this.ctx.measureText(a),x=Math.ceil(l),R=Math.min(this.size-this.buffer,Math.ceil(v-m)),N=Math.min(this.size-this.buffer,x+Math.ceil(u)),P=R+2*this.buffer,G=N+2*this.buffer,H=Math.max(P*G,0),K=new Uint8ClampedArray(H),X={data:K,width:P,height:G,glyphWidth:R,glyphHeight:N,glyphTop:x,glyphLeft:0,glyphAdvance:n};if(R===0||N===0)return X;const{ctx:Q,buffer:se,gridInner:he,gridOuter:xe}=this;Q.clearRect(se,se,R,N),Q.fillText(a,se,se+x);const Ie=Q.getImageData(se,se,R,N);xe.fill(Wl,0,H),he.fill(0,0,H);for(let Me=0;Me<N;Me++)for(let Pe=0;Pe<R;Pe++){const Fe=Ie.data[4*(Me*R+Pe)+3]/255;if(Fe===0)continue;const je=(Me+se)*P+Pe+se;if(Fe===1)xe[je]=0,he[je]=Wl;else{const ot=.5-Fe;xe[je]=ot>0?ot*ot:0,he[je]=ot<0?ot*ot:0}}Sf(xe,0,0,P,G,P,this.f,this.v,this.z),Sf(he,se,se,R,N,P,this.f,this.v,this.z);for(let Me=0;Me<H;Me++){const Pe=Math.sqrt(xe[Me])-Math.sqrt(he[Me]);K[Me]=Math.round(255-255*(Pe/this.radius+this.cutoff))}return X}};class og{constructor(n=[],l=sg){if(this.data=n,this.length=this.data.length,this.compare=l,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],l=this.data.pop();return this.length--,this.length>0&&(this.data[0]=l,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:l,compare:u}=this,m=l[n];for(;n>0;){const v=n-1>>1,x=l[v];if(u(m,x)>=0)break;l[n]=x,n=v}l[n]=m}_down(n){const{data:l,compare:u}=this,m=this.length>>1,v=l[n];for(;n<m;){let x=1+(n<<1),R=l[x];const N=x+1;if(N<this.length&&u(l[N],R)<0&&(x=N,R=l[N]),u(R,v)>=0)break;l[n]=R,n=x}l[n]=v}}function sg(a,n){return a<n?-1:a>n?1:0}function ag(a,n=1,l=!1){let u=1/0,m=1/0,v=-1/0,x=-1/0;const R=a[0];for(let X=0;X<R.length;X++){const Q=R[X];(!X||Q.x<u)&&(u=Q.x),(!X||Q.y<m)&&(m=Q.y),(!X||Q.x>v)&&(v=Q.x),(!X||Q.y>x)&&(x=Q.y)}const N=Math.min(v-u,x-m);let P=N/2;const G=new og([],lg);if(N===0)return new k(u,m);for(let X=u;X<v;X+=N)for(let Q=m;Q<x;Q+=N)G.push(new Ka(X+P,Q+P,P,a));let H=function(X){let Q=0,se=0,he=0;const xe=X[0];for(let Ie=0,Me=xe.length,Pe=Me-1;Ie<Me;Pe=Ie++){const Fe=xe[Ie],je=xe[Pe],ot=Fe.x*je.y-je.x*Fe.y;se+=(Fe.x+je.x)*ot,he+=(Fe.y+je.y)*ot,Q+=3*ot}return new Ka(se/Q,he/Q,0,X)}(a),K=G.length;for(;G.length;){const X=G.pop();(X.d>H.d||!H.d)&&(H=X,l&&console.log("found best %d after %d probes",Math.round(1e4*X.d)/1e4,K)),X.max-H.d<=n||(P=X.h/2,G.push(new Ka(X.p.x-P,X.p.y-P,P,a)),G.push(new Ka(X.p.x+P,X.p.y-P,P,a)),G.push(new Ka(X.p.x-P,X.p.y+P,P,a)),G.push(new Ka(X.p.x+P,X.p.y+P,P,a)),K+=4)}return l&&(console.log(`num probes: ${K}`),console.log(`best distance: ${H.d}`)),H.p}function lg(a,n){return n.max-a.max}function Ka(a,n,l,u){this.p=new k(a,n),this.h=l,this.d=function(m,v){let x=!1,R=1/0;for(let N=0;N<v.length;N++){const P=v[N];for(let G=0,H=P.length,K=H-1;G<H;K=G++){const X=P[G],Q=P[K];X.y>m.y!=Q.y>m.y&&m.x<(Q.x-X.x)*(m.y-X.y)/(Q.y-X.y)+X.x&&(x=!x),R=Math.min(R,bp(m,X,Q))}}return(x?1:-1)*Math.sqrt(R)}(this.p,u),this.max=this.d+this.h*Math.SQRT2}const Sd=Number.POSITIVE_INFINITY,cg=Math.sqrt(2);function Rf(a,n){return n[1]!==Sd?function(l,u,m){let v=0,x=0;switch(u=Math.abs(u),m=Math.abs(m),l){case"top-right":case"top-left":case"top":x=m-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-m}switch(l){case"top-right":case"bottom-right":case"right":v=-u;break;case"top-left":case"bottom-left":case"left":v=u}return[v,x]}(a,n[0],n[1]):function(l,u){let m=0,v=0;u<0&&(u=0);const x=u/cg;switch(l){case"top-right":case"top-left":v=x-7;break;case"bottom-right":case"bottom-left":v=7-x;break;case"bottom":v=7-u;break;case"top":v=u-7}switch(l){case"top-right":case"bottom-right":m=-x;break;case"top-left":case"bottom-left":m=x;break;case"left":m=u;break;case"right":m=-u}return[m,v]}(a,n[0])}function ug(a,n,l,u,m,v,x,R,N,P){a.createArrays(),a.tilePixelRatio=mn/(512*a.overscaling),a.compareText={},a.iconsNeedLinear=!1;const G=a.layers[0].layout,H=a.layers[0]._unevaluatedLayout._values,K={};if(a.textSizeData.kind==="composite"){const{minZoom:se,maxZoom:he}=a.textSizeData;K.compositeTextSizes=[H["text-size"].possiblyEvaluate(new ge(se),R),H["text-size"].possiblyEvaluate(new ge(he),R)]}if(a.iconSizeData.kind==="composite"){const{minZoom:se,maxZoom:he}=a.iconSizeData;K.compositeIconSizes=[H["icon-size"].possiblyEvaluate(new ge(se),R),H["icon-size"].possiblyEvaluate(new ge(he),R)]}K.layoutTextSize=H["text-size"].possiblyEvaluate(new ge(N+1),R),K.layoutIconSize=H["icon-size"].possiblyEvaluate(new ge(N+1),R),K.textMaxSize=H["text-size"].possiblyEvaluate(new ge(18),R);const X=G.get("text-rotation-alignment")==="map"&&G.get("symbol-placement")!=="point",Q=G.get("text-size");for(const se of a.features){const he=G.get("text-font").evaluate(se,{},R).join(","),xe=Q.evaluate(se,{},R),Ie=K.layoutTextSize.evaluate(se,{},R),Me=(K.layoutIconSize.evaluate(se,{},R),{horizontal:{},vertical:void 0}),Pe=se.text;let Fe,je=[0,0];if(Pe){const _t=Pe.toString(),kt=G.get("text-letter-spacing").evaluate(se,{},R)*Qi,Je=G.get("text-line-height").evaluate(se,{},R)*Qi,gt=Oa(_t)?kt:0,Rt=G.get("text-anchor").evaluate(se,{},R),$t=G.get("text-variable-anchor");if(!$t){const cn=G.get("text-radial-offset").evaluate(se,{},R);je=cn?Rf(Rt,[cn*Qi,Sd]):G.get("text-offset").evaluate(se,{},R).map(Yt=>Yt*Qi)}let Kt=X?"center":G.get("text-justify").evaluate(se,{},R);const St=G.get("symbol-placement"),Gt=St==="point",Tn=St==="point"?G.get("text-max-width").evaluate(se,{},R)*Qi:0,Mn=cn=>{a.allowVerticalPlacement&&La(_t)&&(Me.vertical=xd(Pe,n,l,m,he,Tn,Je,Rt,cn,gt,je,Pr.vertical,!0,St,Ie,xe))};if(!X&&$t){const cn=Kt==="auto"?$t.map(In=>Td(In)):[Kt];let Yt=!1;for(let In=0;In<cn.length;In++){const $n=cn[In];if(!Me.horizontal[$n])if(Yt)Me.horizontal[$n]=Me.horizontal[0];else{const en=xd(Pe,n,l,m,he,Tn,Je,"center",$n,gt,je,Pr.horizontal,!1,St,Ie,xe);en&&(Me.horizontal[$n]=en,Yt=en.positionedLines.length===1)}}Mn("left")}else{if(Kt==="auto"&&(Kt=Td(Rt)),Gt||G.get("text-writing-mode").indexOf("horizontal")>=0||!La(_t)){const cn=xd(Pe,n,l,m,he,Tn,Je,Rt,Kt,gt,je,Pr.horizontal,!1,St,Ie,xe);cn&&(Me.horizontal[Kt]=cn)}Mn(St==="point"?"left":Kt)}}let ot=!1;if(se.icon&&se.icon.name){const _t=u[se.icon.name];_t&&(Fe=tg(m[se.icon.name],G.get("icon-offset").evaluate(se,{},R),G.get("icon-anchor").evaluate(se,{},R)),ot=_t.sdf,a.sdfIcons===void 0?a.sdfIcons=_t.sdf:a.sdfIcons!==_t.sdf&&un("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(_t.pixelRatio!==a.pixelRatio||G.get("icon-rotate").constantOr(1)!==0)&&(a.iconsNeedLinear=!0))}const lt=Mf(Me.horizontal)||Me.vertical;a.iconsInText||(a.iconsInText=!!lt&&lt.iconsInText),(lt||Fe)&&dg(a,se,Me,Fe,u,K,Ie,0,je,ot,x,R,P)}v&&a.generateCollisionDebugBuffers(N,a.collisionBoxArray)}function Td(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function dg(a,n,l,u,m,v,x,R,N,P,G,H,K){let X=v.textMaxSize.evaluate(n,{},H);X===void 0&&(X=x);const Q=a.layers[0].layout,se=Q.get("icon-offset").evaluate(n,{},H),he=Mf(l.horizontal)||l.vertical,xe=K.name==="globe",Ie=x/24,Me=a.tilePixelRatio*X/24,Pe=(gt=a.overscaling,a.zoom>18&&gt>2&&(gt>>=1),Math.max(mn/(512*gt),1)*Q.get("symbol-spacing")),Fe=Q.get("text-padding")*a.tilePixelRatio,je=Q.get("icon-padding")*a.tilePixelRatio,ot=D(Q.get("text-max-angle")),lt=Q.get("text-rotation-alignment")==="map"&&Q.get("symbol-placement")!=="point",_t=Q.get("icon-rotation-alignment")==="map"&&Q.get("symbol-placement")!=="point",kt=Q.get("symbol-placement"),Je=Pe/2;var gt;const Rt=Q.get("icon-text-fit");let $t;u&&Rt!=="none"&&(a.allowVerticalPlacement&&l.vertical&&($t=vf(u,l.vertical,Rt,Q.get("icon-text-fit-padding"),se,Ie)),he&&(u=vf(u,he,Rt,Q.get("icon-text-fit-padding"),se,Ie)));const Kt=(St,Gt,Tn)=>{if(Gt.x<0||Gt.x>=mn||Gt.y<0||Gt.y>=mn)return;let Mn=null;if(xe){const{x:cn,y:Yt,z:In}=K.projectTilePoint(Gt.x,Gt.y,Tn);Mn={anchor:new Fo(cn,Yt,In,0,void 0),up:K.upVector(Tn,Gt.x,Gt.y)}}(function(cn,Yt,In,$n,en,zi,Ni,ki,Nn,Kn,hi,pi,ci,vi,Ci,Ki,_r,Fn,Ri,ir,ri,Si,dr,wi,Li){const Wi=cn.addToLineVertexArray(Yt,$n);let qi,er,pr,Zi,Vo,Xa,ic,rc=0,hh=0,mh=0,gh=0,jd=-1,Gd=-1;const xo={};let _h=Il("");const Xs=In?In.anchor:Yt;let qd=0,Hd=0;if(Nn._unevaluatedLayout.getValue("text-radial-offset")===void 0?[qd,Hd]=Nn.layout.get("text-offset").evaluate(ri,{},Li).map(Ar=>Ar*Qi):(qd=Nn.layout.get("text-radial-offset").evaluate(ri,{},Li)*Qi,Hd=Sd),cn.allowVerticalPlacement&&en.vertical){const Ar=en.vertical;if(Ci)Xa=Ad(Ar),ki&&(ic=Ad(ki));else{const kr=Nn.layout.get("text-rotate").evaluate(ri,{},Li)+90;pr=wu(Kn,Xs,Yt,hi,pi,ci,Ar,vi,kr,Ki),ki&&(Zi=wu(Kn,Xs,Yt,hi,pi,ci,ki,Fn,kr))}}if(zi){const Ar=Nn.layout.get("icon-rotate").evaluate(ri,{},Li),kr=Nn.layout.get("icon-text-fit")!=="none",oc=Af(zi,Ar,dr,kr),Wd=ki?Af(ki,Ar,dr,kr):void 0;er=wu(Kn,Xs,Yt,hi,pi,ci,zi,Fn,Ar),rc=4*oc.length;const vh=cn.iconSizeData;let Js=null;vh.kind==="source"?(Js=[mo*Nn.layout.get("icon-size").evaluate(ri,{},Li)],Js[0]>ps&&un(`${cn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):vh.kind==="composite"&&(Js=[mo*Si.compositeIconSizes[0].evaluate(ri,{},Li),mo*Si.compositeIconSizes[1].evaluate(ri,{},Li)],(Js[0]>ps||Js[1]>ps)&&un(`${cn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),cn.addSymbols(cn.icon,oc,Js,ir,Ri,ri,!1,In,Yt,Wi.lineStartIndex,Wi.lineLength,-1,wi,Li),jd=cn.icon.placedSymbolArray.length-1,Wd&&(hh=4*Wd.length,cn.addSymbols(cn.icon,Wd,Js,ir,Ri,ri,Pr.vertical,In,Yt,Wi.lineStartIndex,Wi.lineLength,-1,wi,Li),Gd=cn.icon.placedSymbolArray.length-1)}for(const Ar in en.horizontal){const kr=en.horizontal[Ar];qi||(_h=Il(kr.text),Ci?Vo=Ad(kr):qi=wu(Kn,Xs,Yt,hi,pi,ci,kr,vi,Nn.layout.get("text-rotate").evaluate(ri,{},Li),Ki));const oc=kr.positionedLines.length===1;if(mh+=$f(cn,In,Yt,kr,Ni,Nn,Ci,ri,Ki,Wi,en.vertical?Pr.horizontal:Pr.horizontalOnly,oc?Object.keys(en.horizontal):[Ar],xo,jd,Si,wi,Li),oc)break}en.vertical&&(gh+=$f(cn,In,Yt,en.vertical,Ni,Nn,Ci,ri,Ki,Wi,Pr.vertical,["vertical"],xo,Gd,Si,wi,Li));let ys=-1;const Kd=(Ar,kr)=>Ar?Math.max(Ar,kr):kr;ys=Kd(Vo,ys),ys=Kd(Xa,ys),ys=Kd(ic,ys);const jg=ys>-1?1:0;cn.glyphOffsetArray.length>=hs.MAX_GLYPHS&&un("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ri.sortKey!==void 0&&cn.addToSortKeyRanges(cn.symbolInstances.length,ri.sortKey),cn.symbolInstances.emplaceBack(Xs.x,Xs.y,Xs.z,Yt.x,Yt.y,xo.right>=0?xo.right:-1,xo.center>=0?xo.center:-1,xo.left>=0?xo.left:-1,xo.vertical>=0?xo.vertical:-1,jd,Gd,_h,qi!==void 0?qi:cn.collisionBoxArray.length,qi!==void 0?qi+1:cn.collisionBoxArray.length,pr!==void 0?pr:cn.collisionBoxArray.length,pr!==void 0?pr+1:cn.collisionBoxArray.length,er!==void 0?er:cn.collisionBoxArray.length,er!==void 0?er+1:cn.collisionBoxArray.length,Zi||cn.collisionBoxArray.length,Zi?Zi+1:cn.collisionBoxArray.length,hi,mh,gh,rc,hh,jg,0,qd,Hd,ys)})(a,Gt,Mn,St,l,u,m,$t,a.layers[0],a.collisionBoxArray,n.index,n.sourceLayerIndex,a.index,Fe,lt,N,0,je,_t,se,n,v,P,G,H)};if(kt==="line")for(const St of Cf(n.geometry,0,0,mn,mn)){const Gt=ig(St,Pe,ot,l.vertical||he,u,24,Me,a.overscaling,mn);for(const Tn of Gt){const Mn=he;Mn&&pg(a,Mn.text,Je,Tn)||Kt(St,Tn,H)}}else if(kt==="line-center"){for(const St of n.geometry)if(St.length>1){const Gt=ng(St,ot,l.vertical||he,u,24,Me);Gt&&Kt(St,Gt,H)}}else if(n.type==="Polygon")for(const St of hd(n.geometry,0)){const Gt=ag(St,16);Kt(St[0],new Fo(Gt.x,Gt.y,0,0,void 0),H)}else if(n.type==="LineString")for(const St of n.geometry)Kt(St,new Fo(St[0].x,St[0].y,0,0,void 0),H);else if(n.type==="Point")for(const St of n.geometry)for(const Gt of St)Kt([Gt],new Fo(Gt.x,Gt.y,0,0,void 0),H)}const ps=32640;function $f(a,n,l,u,m,v,x,R,N,P,G,H,K,X,Q,se,he){const xe=function(Pe,Fe,je,ot,lt,_t,kt,Je){const gt=[];if(Fe.positionedLines.length===0)return gt;const Rt=ot.layout.get("text-rotate").evaluate(_t,{})*Math.PI/180,$t=function(Mn){const cn=Mn[0],Yt=Mn[1],In=cn*Yt;return In>0?[cn,-Yt]:In<0?[-cn,Yt]:cn===0?[Yt,cn]:[Yt,-cn]}(je);let Kt=Math.abs(Fe.top-Fe.bottom);for(const Mn of Fe.positionedLines)Kt-=Mn.lineOffset;const St=Fe.positionedLines.length,Gt=Kt/St;let Tn=Fe.top-je[1];for(let Mn=0;Mn<St;++Mn){const cn=Fe.positionedLines[Mn];Tn=rg(Fe,Gt,Tn,Mn);for(const Yt of cn.positionedGlyphs){if(!Yt.rect)continue;const In=Yt.rect||{};let $n=4,en=!0,zi=1,Ni=0;if(Yt.imageName){const wi=kt[Yt.imageName];if(!wi)continue;if(wi.sdf){un("SDF images are not supported in formatted text and will be ignored.");continue}en=!1,zi=wi.pixelRatio,$n=1/zi}const ki=(lt||Je)&&Yt.vertical,Nn=Yt.metrics.advance*Yt.scale/2,Kn=Yt.metrics,hi=Yt.rect;if(hi===null)continue;Je&&Fe.verticalizable&&(Ni=Yt.imageName?Nn-Yt.metrics.width*Yt.scale/2:0);const pi=lt?[Yt.x+Nn,Yt.y]:[0,0];let ci=[0,0],vi=[0,0],Ci=!1;lt||(ki?(vi=[Yt.x+Nn+$t[0],Yt.y+$t[1]-Ni],Ci=!0):ci=[Yt.x+Nn+je[0],Yt.y+je[1]-Ni]);const Ki=hi.w*Yt.scale/(zi*(Yt.localGlyph?2:1)),_r=hi.h*Yt.scale/(zi*(Yt.localGlyph?2:1));let Fn,Ri,ir,ri;if(ki){const wi=Yt.y-Tn,Li=new k(-Nn,Nn-wi),Wi=-Math.PI/2,qi=new k(...vi);Fn=new k(-Nn+ci[0],ci[1]),Fn._rotateAround(Wi,Li)._add(qi),Fn.x+=-wi+Nn,Fn.y-=(Kn.left-$n)*Yt.scale;const er=Yt.imageName?Kn.advance*Yt.scale:Qi*Yt.scale,pr=String.fromCharCode(Yt.glyph);zm(pr)?Fn.x+=(1-$n)*Yt.scale:Fm(pr)?Fn.x+=er-Kn.height*Yt.scale+(-$n-1)*Yt.scale:Fn.x+=Yt.imageName||Kn.width+2*$n===hi.w&&Kn.height+2*$n===hi.h?(er-_r)/2:(er-(Kn.height+2*$n)*Yt.scale)/2,Ri=new k(Fn.x,Fn.y-Ki),ir=new k(Fn.x+_r,Fn.y),ri=new k(Fn.x+_r,Fn.y-Ki)}else{const wi=(Kn.left-$n)*Yt.scale-Nn+ci[0],Li=(-Kn.top-$n)*Yt.scale+ci[1],Wi=wi+Ki,qi=Li+_r;Fn=new k(wi,Li),Ri=new k(Wi,Li),ir=new k(wi,qi),ri=new k(Wi,qi)}if(Rt){let wi;wi=lt?new k(0,0):Ci?new k($t[0],$t[1]):new k(je[0],je[1]),Fn._rotateAround(Rt,wi),Ri._rotateAround(Rt,wi),ir._rotateAround(Rt,wi),ri._rotateAround(Rt,wi)}const Si=new k(0,0),dr=new k(0,0);gt.push({tl:Fn,tr:Ri,bl:ir,br:ri,tex:In,writingMode:Fe.writingMode,glyphOffset:pi,sectionIndex:Yt.sectionIndex,isSDF:en,pixelOffsetTL:Si,pixelOffsetBR:dr,minFontScaleX:0,minFontScaleY:0})}}return gt}(0,u,N,v,x,R,m,a.allowVerticalPlacement),Ie=a.textSizeData;let Me=null;Ie.kind==="source"?(Me=[mo*v.layout.get("text-size").evaluate(R,{},he)],Me[0]>ps&&un(`${a.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Ie.kind==="composite"&&(Me=[mo*Q.compositeTextSizes[0].evaluate(R,{},he),mo*Q.compositeTextSizes[1].evaluate(R,{},he)],(Me[0]>ps||Me[1]>ps)&&un(`${a.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),a.addSymbols(a.text,xe,Me,N,x,R,G,n,l,P.lineStartIndex,P.lineLength,X,se,he);for(const Pe of H)K[Pe]=a.text.placedSymbolArray.length-1;return 4*xe.length}function Mf(a){for(const n in a)return a[n];return null}function wu(a,n,l,u,m,v,x,R,N,P){let G=x.top,H=x.bottom,K=x.left,X=x.right;const Q=x.collisionPadding;if(Q&&(K-=Q[0],G-=Q[1],X+=Q[2],H+=Q[3]),N){const se=new k(K,G),he=new k(X,G),xe=new k(K,H),Ie=new k(X,H),Me=D(N);let Pe=new k(0,0);P&&(Pe=new k(P[0],P[1])),se._rotateAround(Me,Pe),he._rotateAround(Me,Pe),xe._rotateAround(Me,Pe),Ie._rotateAround(Me,Pe),K=Math.min(se.x,he.x,xe.x,Ie.x),X=Math.max(se.x,he.x,xe.x,Ie.x),G=Math.min(se.y,he.y,xe.y,Ie.y),H=Math.max(se.y,he.y,xe.y,Ie.y)}return a.emplaceBack(n.x,n.y,n.z,l.x,l.y,K,G,X,H,R,u,m,v),a.length-1}function Ad(a){a.collisionPadding&&(a.top-=a.collisionPadding[1],a.bottom+=a.collisionPadding[3]);const n=a.bottom-a.top;return n>0?Math.max(10,n):null}function pg(a,n,l,u){const m=a.compareText;if(n in m){const v=m[n];for(let x=v.length-1;x>=0;x--)if(u.dist(v[x])<l)return!0}else m[n]=[];return m[n].push(u),!1}const fg=Bt([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_merc_pos",components:2},{type:"Float32",name:"a_uv",components:2}]),{members:If}=fg,Nf=Bt([{name:"a_pos_3",components:3,type:"Int16"}]);var Zl=Bt([{name:"a_pos",type:"Int16",components:2}]);const Ws=mn/Math.PI/2,kd=2*Gr(1,0)*Ws*Math.PI,Wa=[64,32,16],Sr=-Ws,Tr=Ws,hg=[new Or([Sr,Sr,Sr],[Tr,Tr,Tr]),new Or([Sr,Sr,Sr],[0,0,Tr]),new Or([0,Sr,Sr],[Tr,0,Tr]),new Or([Sr,0,Sr],[0,Tr,Tr]),new Or([0,0,Sr],[Tr,Tr,Tr])];function Lf(a,n,l,u=!0){const m=ho([],a._camera.position,a.worldSize),v=[n,l,1,1];Hs(v,v,a.pixelMatrixInverse),$p(v,v,1/v[3]);const x=lr([],Hr([],v,m)),R=a.globeMatrix,N=[R[12],R[13],R[14]],P=Hr([],N,m),G=Ll(P),H=lr([],P),K=a.worldSize/(2*Math.PI),X=qr(H,x),Q=Math.asin(K/G);if(Q<Math.acos(X)){if(!u)return null;const kt=[],Je=[];ho(kt,x,G/X),lr(Je,Hr(Je,kt,P)),lr(x,us(x,P,ho(x,Je,Math.tan(Q)*G)))}const se=[];new sd(m,x).closestPointOnSphere(N,K,se);const he=lr([],Ln(R,0)),xe=lr([],Ln(R,1)),Ie=lr([],Ln(R,2)),Me=qr(he,se),Pe=qr(xe,se),Fe=qr(Ie,se),je=O(Math.asin(-Pe/K));let ot=O(Math.atan2(Me,Fe));ot=a.center.lng+function(kt,Je){const gt=(Je-kt+180)%360-180;return gt<-180?gt+360:gt}(a.center.lng,ot);const lt=Vs(ot),_t=W(Us(je),0,1);return new Da(lt,_t)}class mg{constructor(n,l,u){this.a=Hr([],n,u),this.b=Hr([],l,u),this.center=u;const m=lr([],this.a),v=lr([],this.b);this.angle=Math.acos(qr(m,v))}}function Rd(a,n){if(a.angle===0)return null;let l;return l=a.a[n]===0?1/a.angle*.5*Math.PI:1/a.angle*Math.atan(a.b[n]/a.a[n]/Math.sin(a.angle)-1/Math.tan(a.angle)),l<0||l>1?null:function(u,m,v,x){const R=Math.sin(v);return u*(Math.sin((1-x)*v)/R)+m*(Math.sin(x*v)/R)}(a.a[n],a.b[n],a.angle,W(l,0,1))+a.center[n]}function _o(a){if(a.z<=1)return hg[a.z+2*a.y+a.x];const[n,l]=$d(a),u=[ur(n[0],n[1]),ur(n[0],l[1]),ur(l[0],n[1]),ur(l[0],l[1])],m=[Tr,Tr,Tr],v=[Sr,Sr,Sr];for(const x of u)m[0]=Math.min(m[0],x[0]),m[1]=Math.min(m[1],x[1]),m[2]=Math.min(m[2],x[2]),v[0]=Math.max(v[0],x[0]),v[1]=Math.max(v[1],x[1]),v[2]=Math.max(v[2],x[2]);return new Or(m,v)}function gg(a,n,l){const u=n/a.worldSize,m=Number.MAX_VALUE,v=[-m,-m,-m],x=[m,m,m],R=Er(new Float64Array(16));if(fo(R,R,[u,u,u]),cs(R,R,a.globeMatrix),l.z<=1){const Je=_o(l).getCorners();for(let gt=0;gt<Je.length;gt++)Ji(Je[gt],Je[gt],R),iu(x,x,Je[gt]),ru(v,v,Je[gt]);return new Or(x,v)}const[N,P]=$d(l),G=new ls;G.setSouthWest([N[1],P[0]]),G.setNorthEast([P[1],N[0]]);const H=[ur(G.getSouth(),G.getWest()),ur(G.getSouth(),G.getEast()),ur(G.getNorth(),G.getEast()),ur(G.getNorth(),G.getWest())];for(let Je=0;Je<H.length;Je++)Ji(H[Je],H[Je],R),iu(x,x,H[Je]),ru(v,v,H[Je]);if(G.contains(a.center)){v[2]=0;const Je=a.point,gt=[Je.x*u,Je.y*u,0];return iu(x,x,gt),ru(v,v,gt),new Or(x,v)}const K=[R[12],R[13],R[14]],X=a.center.lng,Q=W(a.center.lat,-85.051129,po),se=[Vs(X),Us(Q)],he=G.getCenter().lng,xe=W(G.getCenter().lat,-85.051129,po),Ie=[Vs(he),Us(xe)];let Me=new Array(3),Pe=0,Fe=se[0]-Ie[0];const je=se[1]-Ie[1];if(Fe>.5?Fe-=1:Fe<-.5&&(Fe+=1),Math.abs(Fe)>Math.abs(je))Pe=Fe>=0?1:3,Me=K;else{Pe=je>=0?0:2;const Je=[R[4],R[5],R[6]];let gt;gt=je>=0?-Math.sin(D(G.getSouth()))*Ws:-Math.sin(D(G.getNorth()))*Ws,Me=ou(Me,K,Je,gt)}const ot=H[Pe],lt=H[(Pe+1)%4],_t=new mg(ot,lt,Me),kt=[Rd(_t,0)||ot[0],Rd(_t,1)||ot[1],Rd(_t,2)||ot[2]];return x[2]=Math.min(ot[2],lt[2]),iu(x,x,kt),ru(v,v,kt),new Or(x,v)}function $d(a){const n=1<<a.z,l=a.x/n,u=(a.x+1)/n,m=(a.y+1)/n;return[[Bi(a.y/n),ar(l)],[Bi(m),ar(u)]]}function Of(a,n,l,u=Ws){return l=D(l),[a*Math.sin(l)*u,-n*u,a*Math.cos(l)*u]}function ur(a,n,l){return Of(Math.cos(D(a)),Math.sin(D(a)),n,l)}function Pf(a,n,l){const u=Math.pow(2,l.z),m=(a/mn+l.x)/u;return ur(Bi((n/mn+l.y)/u),ar(m))}function Eu(a){return 16383/Math.max(...Hr([],a.max,a.min))}function Yl(a){const n=Er(new Float64Array(16)),l=Eu(a);var u,m;return fo(n,n,[l,l,l]),qs(n,n,((u=[])[0]=-(m=a.min)[0],u[1]=-m[1],u[2]=-m[2],u)),n}function Df(a){const n=Er(new Float64Array(16)),l=1/Eu(a);return qs(n,n,a.min),fo(n,n,[l,l,l]),n}function Bf(a,n,l,u,m){const v=function(N){const P=mn/(2*Math.PI);return N/(2*Math.PI)/P}(l),x=[a,n,-l/(2*Math.PI)],R=Er(new Float64Array(16));return qs(R,R,x),fo(R,R,[v,v,v]),tu(R,R,D(-m)),nu(R,R,D(-u)),R}function Md(a){return ne(5,6,a)}function zf(a,n){const l=ur(n.lat,n.lng);return v=(u=rd([],function(X){const Q=ur(X._center.lat,X._center.lng);let se=od([],za(0,1,0),Q);const he=Tp([],-X.angle,Q);se=Ji(se,se,he),Tp(he,-X._pitch,se);const xe=lr([],Q);return ho(xe,xe,X.cameraToCenterDistance/X.pixelsPerMeter*kd),Ji(xe,xe,he),us([],Q,xe)}(a),l))[0],x=u[1],R=u[2],N=(m=l)[0],P=m[1],G=m[2],K=(H=Math.sqrt(v*v+x*x+R*R)*Math.sqrt(N*N+P*P+G*G))&&qr(u,m)/H,Math.acos(Math.min(Math.max(K,-1),1));var u,m,v,x,R,N,P,G,H,K}const Ff=D(85),_g=Math.cos(Ff),vg=Math.sin(Ff);function Vf(a,n){const l=a.fovAboveCenter,u=a.elevation?a.elevation.getMinElevationBelowMSL()*n:0,m=(a._camera.position[2]*a.worldSize-u)/Math.cos(a._pitch),v=Math.sin(l)*m/Math.sin(Math.max(Math.PI/2-a._pitch-l,.01)),x=Math.sin(a._pitch)*v+m;return Math.min(1.01*x,m*(1/a._horizonShift))}function Zs(a,n){if(!n.isReprojectedInTileSpace)return{scale:1<<a.z,x:a.x,y:a.y,x2:a.x+1,y2:a.y+1,projection:n};const l=Math.pow(2,-a.z),u=a.x*l,m=(a.x+1)*l,v=a.y*l,x=(a.y+1)*l,R=ar(u),N=ar(m),P=Bi(v),G=Bi(x),H=n.project(R,P),K=n.project(N,P),X=n.project(N,G),Q=n.project(R,G);let se=Math.min(H.x,K.x,X.x,Q.x),he=Math.min(H.y,K.y,X.y,Q.y),xe=Math.max(H.x,K.x,X.x,Q.x),Ie=Math.max(H.y,K.y,X.y,Q.y);const Me=l/16;function Pe(je,ot,lt,_t,kt,Je){const gt=(lt+kt)/2,Rt=(_t+Je)/2,$t=n.project(ar(gt),Bi(Rt)),Kt=Math.max(0,se-$t.x,he-$t.y,$t.x-xe,$t.y-Ie);se=Math.min(se,$t.x),xe=Math.max(xe,$t.x),he=Math.min(he,$t.y),Ie=Math.max(Ie,$t.y),Kt>Me&&(Pe(je,$t,lt,_t,gt,Rt),Pe($t,ot,gt,Rt,kt,Je))}Pe(H,K,u,v,m,v),Pe(K,X,m,v,m,x),Pe(X,Q,m,x,u,x),Pe(Q,H,u,x,u,v),se-=Me,he-=Me,xe+=Me,Ie+=Me;const Fe=1/Math.max(xe-se,Ie-he);return{scale:Fe,x:se*Fe,y:he*Fe,x2:xe*Fe,y2:Ie*Fe,projection:n}}const yg=Er(new Float32Array(16));class fs{constructor(n){this.spec=n,this.name=n.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(n,l){return{x:0,y:0,z:0}}unproject(n,l){return new li(0,0)}projectTilePoint(n,l,u){return{x:n,y:l,z:0}}locationPoint(n,l,u=!0){return n._coordinatePoint(n.locationCoordinate(l),u)}pixelsPerMeter(n,l){return Gr(1,n)*l}pixelSpaceConversion(n,l,u){return 1}farthestPixelDistance(n){return Vf(n,n.pixelsPerMeter)}pointCoordinate(n,l,u,m){const v=n.horizonLineFromTop(!1),x=new k(l,Math.max(v,u));return n.rayIntersectionCoordinate(n.pointRayIntersection(x,m))}pointCoordinate3D(n,l,u){const m=new k(l,u);if(n.elevation)return n.elevation.pointCoordinate(m);{const v=this.pointCoordinate(n,m.x,m.y,0);return[v.x,v.y,v.z]}}isPointAboveHorizon(n,l){if(n.elevation)return!this.pointCoordinate3D(n,l.x,l.y);const u=n.horizonLineFromTop();return l.y<u}createInversionMatrix(n,l){return yg}createTileMatrix(n,l,u){let m,v,x;const R=u.canonical,N=Er(new Float64Array(16));if(this.isReprojectedInTileSpace){const P=Zs(R,this);m=1,v=P.x+u.wrap*P.scale,x=P.y,fo(N,N,[m/P.scale,m/P.scale,n.pixelsPerMeter/l])}else m=l/n.zoomScale(R.z),v=(R.x+Math.pow(2,R.z)*u.wrap)*m,x=R.y*m;return qs(N,N,[v,x,0]),fo(N,N,[m/mn,m/mn,1]),N}upVector(n,l,u){return[0,0,1]}upVectorScale(n,l,u){return{metersToTile:1}}}class bg extends fs{constructor(n){super(n),this.range=[4,7],this.center=n.center||[-96,37.5];const[l,u]=this.parallels=n.parallels||[29.5,45.5],m=Math.sin(D(l));this.n=(m+Math.sin(D(u)))/2,this.c=1+m*(2*this.n-m),this.r0=Math.sqrt(this.c)/this.n}project(n,l){const{n:u,c:m,r0:v}=this,x=D(n-this.center[0]),R=D(l),N=Math.sqrt(m-2*u*Math.sin(R))/u;return{x:N*Math.sin(x*u),y:N*Math.cos(x*u)-v,z:0}}unproject(n,l){const{n:u,c:m,r0:v}=this,x=v+l;let R=Math.atan2(n,Math.abs(x))*Math.sign(x);x*u<0&&(R-=Math.PI*Math.sign(n)*Math.sign(x));const N=D(this.center[0])*u;R=re(R,-Math.PI-N,Math.PI-N);const P=O(R/u)+this.center[0],G=Math.asin(W((m-(n*n+x*x)*u*u)/(2*u),-1,1)),H=W(O(G),-85.051129,po);return new li(P,H)}}const Xl=1.340264,Jl=-.081106,Ql=893e-6,ec=.003796,Cu=Math.sqrt(3)/2;class xg extends fs{project(n,l){l=l/180*Math.PI,n=n/180*Math.PI;const u=Math.asin(Cu*Math.sin(l)),m=u*u,v=m*m*m;return{x:.5*(n*Math.cos(u)/(Cu*(Xl+3*Jl*m+v*(7*Ql+9*ec*m)))/Math.PI+.5),y:1-.5*(u*(Xl+Jl*m+v*(Ql+ec*m))/Math.PI+1),z:0}}unproject(n,l){n=(2*n-.5)*Math.PI;let u=l=(2*(1-l)-1)*Math.PI,m=u*u,v=m*m*m;for(let G,H,K,X=0;X<12&&(H=u*(Xl+Jl*m+v*(Ql+ec*m))-l,K=Xl+3*Jl*m+v*(7*Ql+9*ec*m),G=H/K,u=W(u-G,-Math.PI/3,Math.PI/3),m=u*u,v=m*m*m,!(Math.abs(G)<1e-12));++X);const x=Cu*n*(Xl+3*Jl*m+v*(7*Ql+9*ec*m))/Math.cos(u),R=Math.asin(Math.sin(u)/Cu),N=W(180*x/Math.PI,-180,180),P=W(180*R/Math.PI,-85.051129,po);return new li(N,P)}}class wg extends fs{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0}project(n,l){return{x:.5+n/360,y:.5-l/360,z:0}}unproject(n,l){const u=360*(n-.5),m=W(360*(.5-l),-85.051129,po);return new li(u,m)}}const Za=Math.PI/2;function Su(a){return Math.tan((Za+a)/2)}class Eg extends fs{constructor(n){super(n),this.center=n.center||[0,30];const[l,u]=this.parallels=n.parallels||[30,30],m=D(l),v=D(u),x=Math.cos(m);this.n=m===v?Math.sin(m):Math.log(x/Math.cos(v))/Math.log(Su(v)/Su(m)),this.f=x*Math.pow(Su(m),this.n)/this.n}project(n,l){l=D(l),n=D(n-this.center[0]);const u=1e-6,{n:m,f:v}=this;v>0?l<-Za+u&&(l=-Za+u):l>Za-u&&(l=Za-u);const x=v/Math.pow(Su(l),m),R=x*Math.sin(m*n),N=v-x*Math.cos(m*n);return{x:.5*(R/Math.PI+.5),y:1-.5*(N/Math.PI+.5),z:0}}unproject(n,l){n=(2*n-.5)*Math.PI,l=(2*(1-l)-.5)*Math.PI;const{n:u,f:m}=this,v=m-l,x=Math.sign(v),R=Math.sign(u)*Math.sqrt(n*n+v*v);let N=Math.atan2(n,Math.abs(v))*x;v*u<0&&(N-=Math.PI*Math.sign(n)*x);const P=W(O(N/u)+this.center[0],-180,180),G=W(O(2*Math.atan(Math.pow(m/R,1/u))-Za),-85.051129,po);return new li(P,G)}}class Uf extends fs{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(n,l){return{x:Vs(n),y:Us(l),z:0}}unproject(n,l){const u=ar(n),m=Bi(l);return new li(u,m)}}const jf=D(po);class Cg extends fs{project(n,l){const u=(l=D(l))*l,m=u*u;return{x:.5*((n=D(n))*(.8707-.131979*u+m*(m*(.003971*u-.001529*m)-.013791))/Math.PI+.5),y:1-.5*(l*(1.007226+u*(.015085+m*(.028874*u-.044475-.005916*m)))/Math.PI+1),z:0}}unproject(n,l){n=(2*n-.5)*Math.PI;let u=l=(2*(1-l)-1)*Math.PI,m=25,v=0,x=u*u;do{x=u*u;const P=x*x;v=(u*(1.007226+x*(.015085+P*(.028874*x-.044475-.005916*P)))-l)/(1.007226+x*(.045255+P*(.259866*x-.311325-.005916*11*P))),u=W(u-v,-jf,jf)}while(Math.abs(v)>1e-6&&--m>0);x=u*u;const R=W(O(n/(.8707+x*(x*(x*x*x*(.003971-.001529*x)-.013791)-.131979))),-180,180),N=O(u);return new li(R,N)}}const Gf=D(po);class Sg extends fs{project(n,l){l=D(l),n=D(n);const u=Math.cos(l),m=2/Math.PI,v=Math.acos(u*Math.cos(n/2)),x=Math.sin(v)/v,R=.5*(n*m+2*u*Math.sin(n/2)/x)||0,N=.5*(l+Math.sin(l)/x)||0;return{x:.5*(R/Math.PI+.5),y:1-.5*(N/Math.PI+1),z:0}}unproject(n,l){let u=n=(2*n-.5)*Math.PI,m=l=(2*(1-l)-1)*Math.PI,v=25;const x=1e-6;let R=0,N=0;do{const P=Math.cos(m),G=Math.sin(m),H=2*G*P,K=G*G,X=P*P,Q=Math.cos(u/2),se=Math.sin(u/2),he=2*Q*se,xe=se*se,Ie=1-X*Q*Q,Me=Ie?1/Ie:0,Pe=Ie?Math.acos(P*Q)*Math.sqrt(1/Ie):0,Fe=.5*(2*Pe*P*se+2*u/Math.PI)-n,je=.5*(Pe*G+m)-l,ot=.5*Me*(X*xe+Pe*P*Q*K)+1/Math.PI,lt=Me*(he*H/4-Pe*G*se),_t=.125*Me*(H*se-Pe*G*X*he),kt=.5*Me*(K*Q+Pe*xe*P)+.5,Je=lt*_t-kt*ot;R=(je*lt-Fe*kt)/Je,N=(Fe*_t-je*ot)/Je,u=W(u-R,-Math.PI,Math.PI),m=W(m-N,-Gf,Gf)}while((Math.abs(R)>x||Math.abs(N)>x)&&--v>0);return new li(O(u),O(m))}}class qf extends fs{constructor(n){super(n),this.center=n.center||[0,0],this.parallels=n.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(D(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(n,l){const{scale:u,cosPhi:m}=this;return{x:D(n)*m*u+.5,y:-Math.sin(D(l))/m*u+.5,z:0}}unproject(n,l){const{scale:u,cosPhi:m}=this,v=-(l-.5)/u,x=W(O((n-.5)/u)/m,-180,180),R=Math.asin(W(v*m,-1,1)),N=W(O(R),-85.051129,po);return new li(x,N)}}class Tg extends Uf{constructor(n){super(n),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug","custom"],this.range=[3,5]}projectTilePoint(n,l,u){const m=Math.pow(2,u.z),v=(n/mn+u.x)/m,x=ur(Bi((l/mn+u.y)/m),ar(v));return Ji(x,x,Yl(_o(u))),{x:x[0],y:x[1],z:x[2]}}locationPoint(n,l){const u=ur(l.lat,l.lng),m=lr([],u),v=n.elevation?n.elevation.getAtPointOrZero(n.locationCoordinate(l),n._centerAltitude):n._centerAltitude;ou(u,u,m,Gr(1,0)*mn*v);const x=Er(new Float64Array(16));return cs(x,n.pixelMatrix,n.globeMatrix),Ji(u,u,x),new k(u[0],u[1])}pixelsPerMeter(n,l){return Gr(1,0)*l}pixelSpaceConversion(n,l,u){const m=qn(Gr(1,45)*l,Gr(1,n)*l,u);return this.pixelsPerMeter(n,l)/m}createTileMatrix(n,l,u){const m=Df(_o(u.canonical));return cs(new Float64Array(16),n.globeMatrix,m)}createInversionMatrix(n,l){const{center:u}=n,m=Er(new Float64Array(16));return cs(m,m,Yl(_o(l))),nu(m,m,D(u.lng)),tu(m,m,D(u.lat)),fo(m,m,[n._projectionScaler,n._projectionScaler,1]),Float32Array.from(m)}pointCoordinate(n,l,u,m){return Lf(n,l,u,!0)||new Da(0,0)}pointCoordinate3D(n,l,u){const m=this.pointCoordinate(n,l,u,0);return[m.x,m.y,m.z]}isPointAboveHorizon(n,l){return!Lf(n,l.x,l.y,!1)}farthestPixelDistance(n){const l=function(m,v){const x=m.cameraToCenterDistance,R=m._centerAltitude*v,N=m._camera,P=m._camera.forward(),G=us([],ho([],P,-x),[0,0,R]),H=m.worldSize/(2*Math.PI),K=[0,0,-H],X=m.width/m.height,Q=Math.tan(m.fovAboveCenter),se=ho([],N.up(),Q),he=ho([],N.right(),Q*X),xe=lr([],us([],us([],P,se),he)),Ie=[];let Me;if(new sd(G,xe).closestPointOnSphere(K,H,Ie)){const Pe=us([],Ie,K),Fe=Hr([],Pe,G);Me=Math.cos(m.fovAboveCenter)*Ll(Fe)}else{const Pe=Hr([],G,K),Fe=Hr([],K,G);lr(Fe,Fe);const je=Ll(Pe)-H;Me=Math.sqrt(je*(je+2*H));const ot=Math.acos(Me/(H+je))-Math.acos(qr(P,Fe));Me*=Math.cos(ot)}return 1.01*Me}(n,this.pixelsPerMeter(n.center.lat,n.worldSize)),u=Md(n.zoom);if(u>0){const m=Vf(n,Gr(1,n.center.lat)*n.worldSize),v=n.worldSize/(2*Math.PI),x=Math.max(n.width,n.height)/n.worldSize*Math.PI;return qn(l,m+v*(1-Math.cos(x)),Math.pow(u,10))}return l}upVector(n,l,u){const m=1<<n.z,v=(l/mn+n.x)/m;return ur(Bi((u/mn+n.y)/m),ar(v),1)}upVectorScale(n){return{metersToTile:kd*Eu(_o(n))}}}function Hf(a){const n=a.parallels,l=!!n&&Math.abs(n[0]+n[1])<.01;switch(a.name){case"mercator":return new Uf(a);case"equirectangular":return new wg(a);case"naturalEarth":return new Cg(a);case"equalEarth":return new xg(a);case"winkelTripel":return new Sg(a);case"albers":return l?new qf(a):new bg(a);case"lambertConformalConic":return l?new qf(a):new Eg(a);case"globe":return new Tg(a)}throw new Error(`Invalid projection name: ${a.name}`)}const Ag=Ks.VectorTileFeature.types,kg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Tu(a,n,l,u,m,v,x,R,N,P,G,H,K){const X=R?Math.min(ps,Math.round(R[0])):0,Q=R?Math.min(ps,Math.round(R[1])):0;a.emplaceBack(n,l,Math.round(32*u),Math.round(32*m),v,x,(X<<1)+(N?1:0),Q,16*P,16*G,256*H,256*K)}function Au(a,n,l,u,m,v,x){a.emplaceBack(n,l,u,m,v,x)}function ku(a,n,l,u,m){a.emplaceBack(n,l,u,m),a.emplaceBack(n,l,u,m),a.emplaceBack(n,l,u,m),a.emplaceBack(n,l,u,m)}function Rg(a){for(const n of a.sections)if(M(n.text))return!0;return!1}class Id{constructor(n){this.layoutVertexArray=new gr,this.indexArray=new Gn,this.programConfigurations=n,this.segments=new Ii,this.dynamicLayoutVertexArray=new ti,this.opacityVertexArray=new to,this.placedSymbolArray=new Jd,this.globeExtVertexArray=new Ur}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,l,u,m){this.isEmpty()||(u&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Mm.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,Nm.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,kg,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,Im.members,!0)),this.opacityVertexBuffer.itemSize=1),(u||m)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Zt(Id,"SymbolBuffers");class Nd{constructor(n,l,u){this.layoutVertexArray=new n,this.layoutAttributes=l,this.indexArray=new u,this.segments=new Ii,this.collisionVertexArray=new Oi,this.collisionVertexArrayExt=new Hi}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,Lm.members,!0),this.collisionVertexBufferExt=n.createVertexBuffer(this.collisionVertexArrayExt,Om.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Zt(Nd,"CollisionBuffers");class hs{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Er([]),this.placementViewportMatrix=Er([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=_d(this.zoom,l["text-size"]),this.iconSizeData=_d(this.zoom,l["icon-size"]);const u=this.layers[0].layout,m=u.get("symbol-sort-key"),v=u.get("symbol-z-order");this.canOverlap=u.get("text-allow-overlap")||u.get("icon-allow-overlap")||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&m.constantOr(1)!==void 0,this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=u.get("text-writing-mode").map(x=>Pr[x]),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID,this.projection=n.projection}createArrays(){this.text=new Id(new Fs(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new Id(new Fs(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new tp,this.lineVertexArray=new np,this.symbolInstances=new ep}calculateGlyphDependencies(n,l,u,m,v){for(let x=0;x<n.length;x++)if(l[n.charCodeAt(x)]=!0,m&&v){const R=ql[n.charAt(x)];R&&(l[R.charCodeAt(0)]=!0)}}populate(n,l,u,m){const v=this.layers[0],x=v.layout,R=this.projection.name==="globe",N=x.get("text-font"),P=x.get("text-field"),G=x.get("icon-image"),H=(P.value.kind!=="constant"||P.value.value instanceof jn&&!P.value.value.isEmpty()||P.value.value.toString().length>0)&&(N.value.kind!=="constant"||N.value.value.length>0),K=G.value.kind!=="constant"||!!G.value.value||Object.keys(G.parameters).length>0,X=x.get("symbol-sort-key");if(this.features=[],!H&&!K)return;const Q=l.iconDependencies,se=l.glyphDependencies,he=l.availableImages,xe=new ge(this.zoom);for(const{feature:Ie,id:Me,index:Pe,sourceLayerIndex:Fe}of n){const je=v._featureFilter.needGeometry,ot=js(Ie,je);if(!v._featureFilter.filter(xe,ot,u))continue;if(je||(ot.geometry=Do(Ie,u,m)),R&&Ie.type!==1&&u.z<=5){const Je=ot.geometry,gt=1<<u.z,Rt=u.x,$t=u.y,Kt=.98078528056;for(let St=0;St<Je.length;St++)Je[St]=Nh(Je[St],Gt=>Gt,(Gt,Tn)=>qr(ur(Bi((Gt.y/mn+$t)/gt),ar((Gt.x/mn+Rt)/gt),1),ur(Bi((Tn.y/mn+$t)/gt),ar((Tn.x/mn+Rt)/gt),1))<Kt)}let lt,_t;if(H){const Je=v.getValueAndResolveTokens("text-field",ot,u,he),gt=jn.factory(Je);Rg(gt)&&(this.hasRTLText=!0),(!this.hasRTLText||le()==="unavailable"||this.hasRTLText&&ce.isParsed())&&(lt=Bm(gt,v,ot))}if(K){const Je=v.getValueAndResolveTokens("icon-image",ot,u,he);_t=Je instanceof Wn?Je:Wn.fromString(Je)}if(!lt&&!_t)continue;const kt=this.sortFeaturesByKey?X.evaluate(ot,{},u):void 0;if(this.features.push({id:Me,text:lt,icon:_t,index:Pe,sourceLayerIndex:Fe,geometry:ot.geometry,properties:Ie.properties,type:Ag[Ie.type],sortKey:kt}),_t&&(Q[_t.name]=!0),lt){const Je=N.evaluate(ot,{},u).join(","),gt=x.get("text-rotation-alignment")==="map"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Pr.vertical)>=0;for(const Rt of lt.sections)if(Rt.image)Q[Rt.image.name]=!0;else{const $t=La(lt.toString()),Kt=Rt.fontStack||Je,St=se[Kt]=se[Kt]||{};this.calculateGlyphDependencies(Rt.text,St,gt,this.allowVerticalPlacement,$t)}}}x.get("symbol-placement")==="line"&&(this.features=function(Ie){const Me={},Pe={},Fe=[];let je=0;function ot(Je){Fe.push(Ie[Je]),je++}function lt(Je,gt,Rt){const $t=Pe[Je];return delete Pe[Je],Pe[gt]=$t,Fe[$t].geometry[0].pop(),Fe[$t].geometry[0]=Fe[$t].geometry[0].concat(Rt[0]),$t}function _t(Je,gt,Rt){const $t=Me[gt];return delete Me[gt],Me[Je]=$t,Fe[$t].geometry[0].shift(),Fe[$t].geometry[0]=Rt[0].concat(Fe[$t].geometry[0]),$t}function kt(Je,gt,Rt){const $t=Rt?gt[0][gt[0].length-1]:gt[0][0];return`${Je}:${$t.x}:${$t.y}`}for(let Je=0;Je<Ie.length;Je++){const gt=Ie[Je],Rt=gt.geometry,$t=gt.text?gt.text.toString():null;if(!$t){ot(Je);continue}const Kt=kt($t,Rt),St=kt($t,Rt,!0);if(Kt in Pe&&St in Me&&Pe[Kt]!==Me[St]){const Gt=_t(Kt,St,Rt),Tn=lt(Kt,St,Fe[Gt].geometry);delete Me[Kt],delete Pe[St],Pe[kt($t,Fe[Tn].geometry,!0)]=Tn,Fe[Gt].geometry=null}else Kt in Pe?lt(Kt,St,Rt):St in Me?_t(Kt,St,Rt):(ot(Je),Me[Kt]=je-1,Pe[St]=je-1)}return Fe.filter(Je=>Je.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ie,Me)=>Ie.sortKey-Me.sortKey)}update(n,l,u,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,l,this.layers,u,m),this.icon.programConfigurations.updatePaintArrays(n,l,this.layers,u,m))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=Hf(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,l){const u=this.lineVertexArray.length,m=n.segment;if(m!==void 0){let v=n.dist(l[m+1]),x=n.dist(l[m]);const R={};for(let N=m+1;N<l.length;N++)R[N]={x:l[N].x,y:l[N].y,tileUnitDistanceFromAnchor:v},N<l.length-1&&(v+=l[N+1].dist(l[N]));for(let N=m||0;N>=0;N--)R[N]={x:l[N].x,y:l[N].y,tileUnitDistanceFromAnchor:x},N>0&&(x+=l[N-1].dist(l[N]));for(let N=0;N<l.length;N++){const P=R[N];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(n,l,u,m,v,x,R,N,P,G,H,K,X,Q){const se=n.indexArray,he=n.layoutVertexArray,xe=n.globeExtVertexArray,Ie=n.segments.prepareSegment(4*l.length,he,se,this.canOverlap?x.sortKey:void 0),Me=this.glyphOffsetArray.length,Pe=Ie.vertexLength,Fe=this.allowVerticalPlacement&&R===Pr.vertical?Math.PI/2:0,je=x.text&&x.text.sections;for(let lt=0;lt<l.length;lt++){const{tl:_t,tr:kt,bl:Je,br:gt,tex:Rt,pixelOffsetTL:$t,pixelOffsetBR:Kt,minFontScaleX:St,minFontScaleY:Gt,glyphOffset:Tn,isSDF:Mn,sectionIndex:cn}=l[lt],Yt=Ie.vertexLength,In=Tn[1];if(Tu(he,P.x,P.y,_t.x,In+_t.y,Rt.x,Rt.y,u,Mn,$t.x,$t.y,St,Gt),Tu(he,P.x,P.y,kt.x,In+kt.y,Rt.x+Rt.w,Rt.y,u,Mn,Kt.x,$t.y,St,Gt),Tu(he,P.x,P.y,Je.x,In+Je.y,Rt.x,Rt.y+Rt.h,u,Mn,$t.x,Kt.y,St,Gt),Tu(he,P.x,P.y,gt.x,In+gt.y,Rt.x+Rt.w,Rt.y+Rt.h,u,Mn,Kt.x,Kt.y,St,Gt),N){const $n=N.anchor,en=N.up;Au(xe,$n.x,$n.y,$n.z,en[0],en[1],en[2]),Au(xe,$n.x,$n.y,$n.z,en[0],en[1],en[2]),Au(xe,$n.x,$n.y,$n.z,en[0],en[1],en[2]),Au(xe,$n.x,$n.y,$n.z,en[0],en[1],en[2]),ku(n.dynamicLayoutVertexArray,$n.x,$n.y,$n.z,Fe)}else ku(n.dynamicLayoutVertexArray,P.x,P.y,P.z,Fe);se.emplaceBack(Yt,Yt+1,Yt+2),se.emplaceBack(Yt+1,Yt+2,Yt+3),Ie.vertexLength+=4,Ie.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Tn[0]),lt!==l.length-1&&cn===l[lt+1].sectionIndex||n.programConfigurations.populatePaintArrays(he.length,x,x.index,{},X,Q,je&&je[cn])}const ot=N?N.anchor:P;n.placedSymbolArray.emplaceBack(ot.x,ot.y,ot.z,P.x,P.y,Me,this.glyphOffsetArray.length-Me,Pe,G,H,P.segment,u?u[0]:0,u?u[1]:0,m[0],m[1],R,0,!1,0,K,0)}_commitLayoutVertex(n,l,u,m,v,x,R){n.emplaceBack(l,u,m,v,x,Math.round(R.x),Math.round(R.y))}_addCollisionDebugVertices(n,l,u,m,v,x,R){const N=u.segments.prepareSegment(4,u.layoutVertexArray,u.indexArray),P=N.vertexLength,G=R.tileAnchorX,H=R.tileAnchorY;for(let X=0;X<4;X++)u.collisionVertexArray.emplaceBack(0,0,0,0);u.collisionVertexArrayExt.emplaceBack(l,-n.padding,-n.padding),u.collisionVertexArrayExt.emplaceBack(l,n.padding,-n.padding),u.collisionVertexArrayExt.emplaceBack(l,n.padding,n.padding),u.collisionVertexArrayExt.emplaceBack(l,-n.padding,n.padding),this._commitLayoutVertex(u.layoutVertexArray,m,v,x,G,H,new k(n.x1,n.y1)),this._commitLayoutVertex(u.layoutVertexArray,m,v,x,G,H,new k(n.x2,n.y1)),this._commitLayoutVertex(u.layoutVertexArray,m,v,x,G,H,new k(n.x2,n.y2)),this._commitLayoutVertex(u.layoutVertexArray,m,v,x,G,H,new k(n.x1,n.y2)),N.vertexLength+=4;const K=u.indexArray;K.emplaceBack(P,P+1),K.emplaceBack(P+1,P+2),K.emplaceBack(P+2,P+3),K.emplaceBack(P+3,P),N.primitiveLength+=4}_addTextDebugCollisionBoxes(n,l,u,m,v,x){for(let R=m;R<v;R++){const N=u.get(R),P=this.getSymbolInstanceTextSize(n,x,l,R);this._addCollisionDebugVertices(N,P,this.textCollisionBox,N.projectedAnchorX,N.projectedAnchorY,N.projectedAnchorZ,x)}}_addIconDebugCollisionBoxes(n,l,u,m,v,x){for(let R=m;R<v;R++){const N=u.get(R),P=this.getSymbolInstanceIconSize(n,l,R);this._addCollisionDebugVertices(N,P,this.iconCollisionBox,N.projectedAnchorX,N.projectedAnchorY,N.projectedAnchorZ,x)}}generateCollisionDebugBuffers(n,l){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Nd(xi,of.members,Pi),this.iconCollisionBox=new Nd(xi,of.members,Pi);const u=Ua(this.iconSizeData,n),m=Ua(this.textSizeData,n);for(let v=0;v<this.symbolInstances.length;v++){const x=this.symbolInstances.get(v);this._addTextDebugCollisionBoxes(m,n,l,x.textBoxStartIndex,x.textBoxEndIndex,x),this._addTextDebugCollisionBoxes(m,n,l,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x),this._addIconDebugCollisionBoxes(u,n,l,x.iconBoxStartIndex,x.iconBoxEndIndex,x),this._addIconDebugCollisionBoxes(u,n,l,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex,x)}}getSymbolInstanceTextSize(n,l,u,m){const v=this.text.placedSymbolArray.get(l.rightJustifiedTextSymbolIndex>=0?l.rightJustifiedTextSymbolIndex:l.centerJustifiedTextSymbolIndex>=0?l.centerJustifiedTextSymbolIndex:l.leftJustifiedTextSymbolIndex>=0?l.leftJustifiedTextSymbolIndex:l.verticalPlacedTextSymbolIndex>=0?l.verticalPlacedTextSymbolIndex:m),x=gu(this.textSizeData,n,v)/Qi;return this.tilePixelRatio*x}getSymbolInstanceIconSize(n,l,u){const m=this.icon.placedSymbolArray.get(u),v=gu(this.iconSizeData,n,m);return this.tilePixelRatio*v}_commitDebugCollisionVertexUpdate(n,l,u){n.emplaceBack(l,-u,-u),n.emplaceBack(l,u,-u),n.emplaceBack(l,u,u),n.emplaceBack(l,-u,u)}_updateTextDebugCollisionBoxes(n,l,u,m,v,x){for(let R=m;R<v;R++){const N=u.get(R),P=this.getSymbolInstanceTextSize(n,x,l,R);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,P,N.padding)}}_updateIconDebugCollisionBoxes(n,l,u,m,v){for(let x=m;x<v;x++){const R=u.get(x),N=this.getSymbolInstanceIconSize(n,l,x);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,N,R.padding)}}updateCollisionDebugBuffers(n,l){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const u=Ua(this.iconSizeData,n),m=Ua(this.textSizeData,n);for(let v=0;v<this.symbolInstances.length;v++){const x=this.symbolInstances.get(v);this._updateTextDebugCollisionBoxes(m,n,l,x.textBoxStartIndex,x.textBoxEndIndex,x),this._updateTextDebugCollisionBoxes(m,n,l,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x),this._updateIconDebugCollisionBoxes(u,n,l,x.iconBoxStartIndex,x.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(u,n,l,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(n,l,u,m,v,x,R,N,P){const G={};for(let H=l;H<u;H++){const K=n.get(H);G.textBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,padding:K.padding,projectedAnchorX:K.projectedAnchorX,projectedAnchorY:K.projectedAnchorY,projectedAnchorZ:K.projectedAnchorZ,tileAnchorX:K.tileAnchorX,tileAnchorY:K.tileAnchorY},G.textFeatureIndex=K.featureIndex;break}for(let H=m;H<v;H++){const K=n.get(H);G.verticalTextBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,padding:K.padding,projectedAnchorX:K.projectedAnchorX,projectedAnchorY:K.projectedAnchorY,projectedAnchorZ:K.projectedAnchorZ,tileAnchorX:K.tileAnchorX,tileAnchorY:K.tileAnchorY},G.verticalTextFeatureIndex=K.featureIndex;break}for(let H=x;H<R;H++){const K=n.get(H);G.iconBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,padding:K.padding,projectedAnchorX:K.projectedAnchorX,projectedAnchorY:K.projectedAnchorY,projectedAnchorZ:K.projectedAnchorZ,tileAnchorX:K.tileAnchorX,tileAnchorY:K.tileAnchorY},G.iconFeatureIndex=K.featureIndex;break}for(let H=N;H<P;H++){const K=n.get(H);G.verticalIconBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,padding:K.padding,projectedAnchorX:K.projectedAnchorX,projectedAnchorY:K.projectedAnchorY,projectedAnchorZ:K.projectedAnchorZ,tileAnchorX:K.tileAnchorX,tileAnchorY:K.tileAnchorY},G.verticalIconFeatureIndex=K.featureIndex;break}return G}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const u=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,l){const u=n.placedSymbolArray.get(l),m=u.vertexStartIndex+4*u.numGlyphs;for(let v=u.vertexStartIndex;v<m;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(n),u=Math.cos(n),m=[],v=[],x=[];for(let R=0;R<this.symbolInstances.length;++R){x.push(R);const N=this.symbolInstances.get(R);m.push(0|Math.round(l*N.tileAnchorX+u*N.tileAnchorY)),v.push(N.featureIndex)}return x.sort((R,N)=>m[R]-m[N]||v[N]-v[R]),x}addToSortKeyRanges(n,l){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===l?u.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const u=this.symbolInstances.get(l);this.featureSortOrder.push(u.featureIndex),[u.rightJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.leftJustifiedTextSymbolIndex].forEach((m,v,x)=>{m>=0&&x.indexOf(m)===v&&this.addIndicesForPlacedSymbol(this.text,m)}),u.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,u.verticalPlacedTextSymbolIndex),u.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,u.placedIconSymbolIndex),u.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,u.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Zt(hs,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),hs.MAX_GLYPHS=65535,hs.addDynamicAttributes=ku;const $g=new ht({"symbol-placement":new et(qe.layout_symbol["symbol-placement"]),"symbol-spacing":new et(qe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new et(qe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Re(qe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new et(qe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new et(qe.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new et(qe.layout_symbol["icon-ignore-placement"]),"icon-optional":new et(qe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new et(qe.layout_symbol["icon-rotation-alignment"]),"icon-size":new Re(qe.layout_symbol["icon-size"]),"icon-text-fit":new et(qe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new et(qe.layout_symbol["icon-text-fit-padding"]),"icon-image":new Re(qe.layout_symbol["icon-image"]),"icon-rotate":new Re(qe.layout_symbol["icon-rotate"]),"icon-padding":new et(qe.layout_symbol["icon-padding"]),"icon-keep-upright":new et(qe.layout_symbol["icon-keep-upright"]),"icon-offset":new Re(qe.layout_symbol["icon-offset"]),"icon-anchor":new Re(qe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new et(qe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new et(qe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new et(qe.layout_symbol["text-rotation-alignment"]),"text-field":new Re(qe.layout_symbol["text-field"]),"text-font":new Re(qe.layout_symbol["text-font"]),"text-size":new Re(qe.layout_symbol["text-size"]),"text-max-width":new Re(qe.layout_symbol["text-max-width"]),"text-line-height":new Re(qe.layout_symbol["text-line-height"]),"text-letter-spacing":new Re(qe.layout_symbol["text-letter-spacing"]),"text-justify":new Re(qe.layout_symbol["text-justify"]),"text-radial-offset":new Re(qe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new et(qe.layout_symbol["text-variable-anchor"]),"text-anchor":new Re(qe.layout_symbol["text-anchor"]),"text-max-angle":new et(qe.layout_symbol["text-max-angle"]),"text-writing-mode":new et(qe.layout_symbol["text-writing-mode"]),"text-rotate":new Re(qe.layout_symbol["text-rotate"]),"text-padding":new et(qe.layout_symbol["text-padding"]),"text-keep-upright":new et(qe.layout_symbol["text-keep-upright"]),"text-transform":new Re(qe.layout_symbol["text-transform"]),"text-offset":new Re(qe.layout_symbol["text-offset"]),"text-allow-overlap":new et(qe.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new et(qe.layout_symbol["text-ignore-placement"]),"text-optional":new et(qe.layout_symbol["text-optional"])});var Ld={paint:new ht({"icon-opacity":new Re(qe.paint_symbol["icon-opacity"]),"icon-color":new Re(qe.paint_symbol["icon-color"]),"icon-halo-color":new Re(qe.paint_symbol["icon-halo-color"]),"icon-halo-width":new Re(qe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Re(qe.paint_symbol["icon-halo-blur"]),"icon-translate":new et(qe.paint_symbol["icon-translate"]),"icon-translate-anchor":new et(qe.paint_symbol["icon-translate-anchor"]),"text-opacity":new Re(qe.paint_symbol["text-opacity"]),"text-color":new Re(qe.paint_symbol["text-color"],{runtimeType:hr,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new Re(qe.paint_symbol["text-halo-color"]),"text-halo-width":new Re(qe.paint_symbol["text-halo-width"]),"text-halo-blur":new Re(qe.paint_symbol["text-halo-blur"]),"text-translate":new et(qe.paint_symbol["text-translate"]),"text-translate-anchor":new et(qe.paint_symbol["text-translate-anchor"])}),layout:$g};class Kf{constructor(n){this.type=n.property.overrides?n.property.overrides.runtimeType:so,this.defaultValue=n}evaluate(n){if(n.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(n.formattedSection))return l.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Zt(Kf,"FormatSectionOverride",{omit:["defaultValue"]});class Ru extends ro{constructor(n){super(n,Ld)}recalculate(n,l){super.recalculate(n,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const u=this.layout.get("text-writing-mode");if(u){const m=[];for(const v of u)m.indexOf(v)<0&&m.push(v);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(n,l,u,m){const v=this.layout.get(n).evaluate(l,{},u,m),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||va(x.value)||!v?v:function(R,N){return N.replace(/{([^{}]+)}/g,(P,G)=>G in R?String(R[G]):"")}(l.properties,v)}createBucket(n){return new hs(n)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const n of Ld.paint.overridableProperties){if(!Ru.hasPaintOverride(this.layout,n))continue;const l=this.paint.get(n),u=new Kf(l),m=new _a(u,l.property.specification);let v=null;v=l.value.kind==="constant"||l.value.kind==="source"?new ya("source",m):new Rs("composite",m,l.value.zoomStops,l.value._interpolationType),this.paint._values[n]=new at(l.property,v,l.parameters)}}_handleOverridablePaintPropertyUpdate(n,l,u){return!(!this.layout||l.isDataDriven()||u.isDataDriven())&&Ru.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,l){const u=n.get("text-field"),m=Ld.paint.properties[l];let v=!1;const x=R=>{for(const N of R)if(m.overrides&&m.overrides.hasOverride(N))return void(v=!0)};if(u.value.kind==="constant"&&u.value.value instanceof jn)x(u.value.value.sections);else if(u.value.kind==="source"){const R=P=>{v||(P instanceof tr&&zn(P.value)===Ne?x(P.value.sections):P instanceof Ir?x(P.sections):P.eachChild(R))},N=u.value;N._styleExpression&&R(N._styleExpression.expression)}return v}getProgramConfiguration(n){return new as(this,n)}}var Mg={paint:new ht({"background-color":new et(qe.paint_background["background-color"]),"background-pattern":new yt(qe.paint_background["background-pattern"]),"background-opacity":new et(qe.paint_background["background-opacity"])})},Ig={paint:new ht({"raster-opacity":new et(qe.paint_raster["raster-opacity"]),"raster-hue-rotate":new et(qe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new et(qe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new et(qe.paint_raster["raster-brightness-max"]),"raster-saturation":new et(qe.paint_raster["raster-saturation"]),"raster-contrast":new et(qe.paint_raster["raster-contrast"]),"raster-resampling":new et(qe.paint_raster["raster-resampling"]),"raster-fade-duration":new et(qe.paint_raster["raster-fade-duration"])})};class Ng extends ro{constructor(n){super(n,{}),this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(n){this.implementation.onAdd&&this.implementation.onAdd(n,n.painter.context.gl)}onRemove(n){this.implementation.onRemove&&this.implementation.onRemove(n,n.painter.context.gl)}}var Lg={paint:new ht({"sky-type":new et(qe.paint_sky["sky-type"]),"sky-atmosphere-sun":new et(qe.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new et(qe.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new et(qe.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new et(qe.paint_sky["sky-gradient-radius"]),"sky-gradient":new Vt(qe.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new et(qe.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new et(qe.paint_sky["sky-atmosphere-color"]),"sky-opacity":new et(qe.paint_sky["sky-opacity"])})};function Od(a,n,l){const u=[0,0,1],m=Ip([]);return Lp(m,m,l?-D(a)+Math.PI:D(a)),Np(m,m,-D(n)),Rp(u,u,m),lr(u,u)}const Og={circle:class extends ro{constructor(a){super(a,Fh)}createBucket(a){return new ed(a)}queryRadius(a){const n=a;return Ba("circle-radius",this,n)+Ba("circle-stroke-width",this,n)+Qc(this.paint.get("circle-translate"))}queryIntersectsFeature(a,n,l,u,m,v,x,R){const N=Cp(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),v.angle,a.pixelToTileUnitsFactor),P=this.paint.get("circle-radius").evaluate(n,l)+this.paint.get("circle-stroke-width").evaluate(n,l);return Op(a,u,v,x,R,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",N,P)}getProgramIds(){return["circle"]}getProgramConfiguration(a){return new as(this,a)}},heatmap:class extends ro{createBucket(a){return new Dp(a)}constructor(a){super(a,Kh),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=ud({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(a){return Ba("heatmap-radius",this,a)}queryIntersectsFeature(a,n,l,u,m,v,x,R){const N=this.paint.get("heatmap-radius").evaluate(n,l);return Op(a,u,v,x,R,!0,!0,new k(0,0),N)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(a){return new as(this,a)}},hillshade:class extends ro{constructor(a){super(a,Wh)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends ro{constructor(a){super(a,dm)}getProgramIds(){const a=this.paint.get("fill-pattern"),n=a&&a.constantOr(1),l=[n?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&l.push(n&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),l}getProgramConfiguration(a){return new as(this,a)}recalculate(a,n){super.recalculate(a,n);const l=this.paint._values["fill-outline-color"];l.value.kind==="constant"&&l.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new du(a)}queryRadius(){return Qc(this.paint.get("fill-translate"))}queryIntersectsFeature(a,n,l,u,m,v){return!a.queryGeometry.isAboveHorizon&&yp(Ep(a.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),v.angle,a.pixelToTileUnitsFactor),u)}isTileClipped(){return!0}},"fill-extrusion":class extends ro{constructor(a){super(a,Em)}createBucket(a){return new Ul(a)}queryRadius(){return Qc(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(a){return new as(this,a)}queryIntersectsFeature(a,n,l,u,m,v,x,R,N){const P=Cp(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),v.angle,a.pixelToTileUnitsFactor),G=this.paint.get("fill-extrusion-height").evaluate(n,l),H=this.paint.get("fill-extrusion-base").evaluate(n,l),K=[0,0],X=R&&v.elevation,Q=v.elevation?v.elevation.exaggeration():1,se=a.tile.getBucket(this);if(X&&se instanceof Ul){const Ie=se.centroidVertexArray,Me=N+1;if(Me<Ie.length){const Pe=Ie.get(Me);K[0]=Pe.a_centroid_pos0,K[1]=Pe.a_centroid_pos1}}if(K[0]===0&&K[1]===1)return!1;v.projection.name==="globe"&&(u=Yp([u],[new k(0,0),new k(mn,mn)],a.tileID.canonical).map(Ie=>Ie.polygon).flat());const he=function(Ie,Me,Pe,Fe,je,ot,lt,_t,kt,Je,gt){return Ie.projection.name==="globe"?function(Rt,$t,Kt,St,Gt,Tn,Mn,cn,Yt,In,$n){const en=[],zi=[],Ni=Rt.projection.upVectorScale($n,Rt.center.lat,Rt.worldSize).metersToTile,ki=[0,0,0,1],Nn=[0,0,0,1],Kn=(pi,ci,vi,Ci)=>{pi[0]=ci,pi[1]=vi,pi[2]=Ci,pi[3]=1},hi=Zp();Kt>0&&(Kt+=hi),St+=hi;for(const pi of $t){const ci=[],vi=[];for(const Ci of pi){const Ki=Ci.x+Gt.x,_r=Ci.y+Gt.y,Fn=Rt.projection.projectTilePoint(Ki,_r,$n),Ri=Rt.projection.upVector($n,Ci.x,Ci.y);let ir=Kt,ri=St;if(Mn){const Si=ef(Ki,_r,Kt,St,Mn,cn,Yt,In);ir+=Si.base,ri+=Si.top}Kt!==0?Kn(ki,Fn.x+Ri[0]*Ni*ir,Fn.y+Ri[1]*Ni*ir,Fn.z+Ri[2]*Ni*ir):Kn(ki,Fn.x,Fn.y,Fn.z),Kn(Nn,Fn.x+Ri[0]*Ni*ri,Fn.y+Ri[1]*Ni*ri,Fn.z+Ri[2]*Ni*ri),Ji(ki,ki,Tn),Ji(Nn,Nn,Tn),ci.push(hu(ki)),vi.push(hu(Nn))}en.push(ci),zi.push(vi)}return[en,zi]}(Ie,Me,Pe,Fe,je,ot,lt,_t,kt,Je,gt):lt?function(Rt,$t,Kt,St,Gt,Tn,Mn,cn,Yt){const In=[],$n=[],en=[0,0,0,1];for(const zi of Rt){const Ni=[],ki=[];for(const Nn of zi){const Kn=Nn.x+St.x,hi=Nn.y+St.y,pi=ef(Kn,hi,$t,Kt,Tn,Mn,cn,Yt);en[0]=Kn,en[1]=hi,en[2]=pi.base,en[3]=1,Hs(en,en,Gt),en[3]=Math.max(en[3],1e-5);const ci=hu([en[0]/en[3],en[1]/en[3],en[2]/en[3]]);en[0]=Kn,en[1]=hi,en[2]=pi.top,en[3]=1,Hs(en,en,Gt),en[3]=Math.max(en[3],1e-5);const vi=hu([en[0]/en[3],en[1]/en[3],en[2]/en[3]]);Ni.push(ci),ki.push(vi)}In.push(Ni),$n.push(ki)}return[In,$n]}(Me,Pe,Fe,je,ot,lt,_t,kt,Je):function(Rt,$t,Kt,St,Gt){const Tn=[],Mn=[],cn=Gt[8]*$t,Yt=Gt[9]*$t,In=Gt[10]*$t,$n=Gt[11]*$t,en=Gt[8]*Kt,zi=Gt[9]*Kt,Ni=Gt[10]*Kt,ki=Gt[11]*Kt;for(const Nn of Rt){const Kn=[],hi=[];for(const pi of Nn){const ci=pi.x+St.x,vi=pi.y+St.y,Ci=Gt[0]*ci+Gt[4]*vi+Gt[12],Ki=Gt[1]*ci+Gt[5]*vi+Gt[13],_r=Gt[2]*ci+Gt[6]*vi+Gt[14],Fn=Gt[3]*ci+Gt[7]*vi+Gt[15],Ri=Ci+cn,ir=Ki+Yt,ri=_r+In,Si=Math.max(Fn+$n,1e-5),dr=Ci+en,wi=Ki+zi,Li=_r+Ni,Wi=Math.max(Fn+ki,1e-5),qi=new k(Ri/Si,ir/Si);qi.z=ri/Si,Kn.push(qi);const er=new k(dr/Wi,wi/Wi);er.z=Li/Wi,hi.push(er)}Tn.push(Kn),Mn.push(hi)}return[Tn,Mn]}(Me,Pe,Fe,je,ot)}(v,u,H,G,P,x,X?R:null,K,Q,v.center.lat,a.tileID.canonical),xe=a.queryGeometry;return function(Ie,Me,Pe){let Fe=1/0;yp(Pe,Me)&&(Fe=Qp(Pe,Me[0]));for(let je=0;je<Me.length;je++){const ot=Me[je],lt=Ie[je];for(let _t=0;_t<ot.length-1;_t++){const kt=ot[_t],Je=[kt,ot[_t+1],lt[_t+1],lt[_t],kt];vp(Pe,Je)&&(Fe=Math.min(Fe,Qp(Pe,Je)))}}return Fe!==1/0&&Fe}(he[0],he[1],xe.isPointQuery()?xe.screenBounds:xe.screenGeometry)}},line:class extends ro{constructor(a){super(a,tf),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(a){if(a==="line-gradient"){const n=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=n._styleExpression&&n._styleExpression.expression instanceof sa,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(a,n){super.recalculate(a,n),this.paint._values["line-floorwidth"]=nf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new mu(a)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(a){return new as(this,a)}queryRadius(a){const n=a,l=rf(Ba("line-width",this,n),Ba("line-gap-width",this,n)),u=Ba("line-offset",this,n);return l/2+Math.abs(u)+Qc(this.paint.get("line-translate"))}queryIntersectsFeature(a,n,l,u,m,v){if(a.queryGeometry.isAboveHorizon)return!1;const x=Ep(a.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),v.angle,a.pixelToTileUnitsFactor),R=a.pixelToTileUnitsFactor/2*rf(this.paint.get("line-width").evaluate(n,l),this.paint.get("line-gap-width").evaluate(n,l)),N=this.paint.get("line-offset").evaluate(n,l);return N&&(u=function(P,G){const H=[],K=new k(0,0);for(let X=0;X<P.length;X++){const Q=P[X],se=[];for(let he=0;he<Q.length;he++){const xe=Q[he-1],Ie=Q[he],Me=Q[he+1],Pe=he===0?K:Ie.sub(xe)._unit()._perp(),Fe=he===Q.length-1?K:Me.sub(Ie)._unit()._perp(),je=Pe._add(Fe)._unit();je._mult(1/(je.x*Fe.x+je.y*Fe.y)),se.push(je._mult(G)._add(Ie))}H.push(se)}return H}(u,N*a.pixelToTileUnitsFactor)),function(P,G,H){for(let K=0;K<G.length;K++){const X=G[K];if(P.length>=3){for(let Q=0;Q<X.length;Q++)if(Gs(P,X[Q]))return!0}if(Ph(P,X,H))return!0}return!1}(x,u,R)}isTileClipped(){return!0}},symbol:Ru,background:class extends ro{constructor(a){super(a,Mg)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends ro{constructor(a){super(a,Ig)}getProgramIds(){return["raster"]}},sky:class extends ro{constructor(a){super(a,Lg),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="sky-gradient"?this._updateColorRamp():a!=="sky-atmosphere-sun"&&a!=="sky-atmosphere-halo-color"&&a!=="sky-atmosphere-color"&&a!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=ud({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(a){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const n=a.style.light.properties.get("position");return this._lightPosition.azimuthal!==n.azimuthal||this._lightPosition.polar!==n.polar}return!1}getCenter(a,n){if(this.paint.get("sky-type")==="atmosphere"){const u=this.paint.get("sky-atmosphere-sun"),m=!u,v=a.style.light,x=v.properties.get("position");return m&&v.properties.get("anchor")==="viewport"&&un("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),m?Od(x.azimuthal,90-x.polar,n):Od(u[0],90-u[1],n)}const l=this.paint.get("sky-gradient-center");return Od(l[0],90-l[1],n)}is3D(){return!1}isSky(){return!0}markSkyboxValid(a){this._skyboxInvalidated=!1,this._lightPosition=a.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const a=this.paint.get("sky-type");return a==="atmosphere"?["skyboxCapture","skybox"]:a==="gradient"?["skyboxGradient"]:null}}};class tc{constructor(n,l,u,m){this.context=n,this.format=u,this.texture=n.gl.createTexture(),this.update(l,m)}update(n,l,u){const{width:m,height:v}=n,{context:x}=this,{gl:R}=x,{HTMLImageElement:N,HTMLCanvasElement:P,HTMLVideoElement:G,ImageData:H,ImageBitmap:K}=y;if(R.bindTexture(R.TEXTURE_2D,this.texture),x.pixelStoreUnpackFlipY.set(!1),x.pixelStoreUnpack.set(1),x.pixelStoreUnpackPremultiplyAlpha.set(this.format===R.RGBA&&(!l||l.premultiply!==!1)),u||this.size&&this.size[0]===m&&this.size[1]===v){const{x:X,y:Q}=u||{x:0,y:0};n instanceof N||n instanceof P||n instanceof G||n instanceof H||K&&n instanceof K?R.texSubImage2D(R.TEXTURE_2D,0,X,Q,R.RGBA,R.UNSIGNED_BYTE,n):R.texSubImage2D(R.TEXTURE_2D,0,X,Q,m,v,R.RGBA,R.UNSIGNED_BYTE,n.data)}else this.size=[m,v],n instanceof N||n instanceof P||n instanceof G||n instanceof H||K&&n instanceof K?R.texImage2D(R.TEXTURE_2D,0,this.format,this.format,R.UNSIGNED_BYTE,n):R.texImage2D(R.TEXTURE_2D,0,this.format,m,v,0,this.format,R.UNSIGNED_BYTE,n.data);this.useMipmap=Boolean(l&&l.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&R.generateMipmap(R.TEXTURE_2D)}bind(n,l){const{context:u}=this,{gl:m}=u;m.bindTexture(m.TEXTURE_2D,this.texture),n!==this.filter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,n),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,this.useMipmap?n===m.NEAREST?m.NEAREST_MIPMAP_NEAREST:m.LINEAR_MIPMAP_NEAREST:n),this.filter=n),l!==this.wrap&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,l),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}class Pd{constructor(n,l){this.width=n,this.height=l,this.nextRow=0,this.image=new Bo({width:n,height:l}),this.positions={},this.uploaded=!1}getDash(n,l){const u=this.getKey(n,l);return this.positions[u]}trim(){const n=this.width,l=this.height=Ge(this.nextRow);this.image.resize({width:n,height:l})}getKey(n,l){return n.join(",")+l}getDashRanges(n,l,u){const m=[];let v=n.length%2==1?-n[n.length-1]*u:0,x=n[0]*u,R=!0;m.push({left:v,right:x,isDash:R,zeroLength:n[0]===0});let N=n[0];for(let P=1;P<n.length;P++){R=!R;const G=n[P];v=N*u,N+=G,x=N*u,m.push({left:v,right:x,isDash:R,zeroLength:G===0})}return m}addRoundDash(n,l,u){const m=l/2;for(let v=-u;v<=u;v++){const x=this.width*(this.nextRow+u+v);let R=0,N=n[R];for(let P=0;P<this.width;P++){P/N.right>1&&(N=n[++R]);const G=Math.abs(P-N.left),H=Math.abs(P-N.right),K=Math.min(G,H);let X;const Q=v/u*(m+1);if(N.isDash){const se=m-Math.abs(Q);X=Math.sqrt(K*K+se*se)}else X=m-Math.sqrt(K*K+Q*Q);this.image.data[x+P]=Math.max(0,Math.min(255,X+128))}}}addRegularDash(n,l){for(let N=n.length-1;N>=0;--N){const P=n[N],G=n[N+1];P.zeroLength?n.splice(N,1):G&&G.isDash===P.isDash&&(G.left=P.left,n.splice(N,1))}const u=n[0],m=n[n.length-1];u.isDash===m.isDash&&(u.left=m.left-this.width,m.right=u.right+this.width);const v=this.width*this.nextRow;let x=0,R=n[x];for(let N=0;N<this.width;N++){N/R.right>1&&(R=n[++x]);const P=Math.abs(N-R.left),G=Math.abs(N-R.right),H=Math.min(P,G);this.image.data[v+N]=Math.max(0,Math.min(255,(R.isDash?H:-H)+l+128))}}addDash(n,l){const u=this.getKey(n,l);if(this.positions[u])return this.positions[u];const m=l==="round",v=m?7:0,x=2*v+1;if(this.nextRow+x>this.height)return un("LineAtlas out of space"),null;n.length===0&&n.push(1);let R=0;for(let G=0;G<n.length;G++)n[G]<0&&(un("Negative value is found in line dasharray, replacing values with 0"),n[G]=0),R+=n[G];if(R!==0){const G=this.width/R,H=this.getDashRanges(n,this.width,G);m?this.addRoundDash(H,G,v):this.addRegularDash(H,l==="square"?.5*G:0)}const N=this.nextRow+v;this.nextRow+=x;const P={tl:[N,v],br:[R,0]};return this.positions[u]=P,P}}Zt(Pd,"LineAtlas");class Pg{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class Dg{constructor(){this.tasks={},this.taskQueue=[],Te(["process"],this),this.invoker=new Pg(this.process),this.nextId=0}add(n,l){const u=this.nextId++,m=function({type:v,isSymbolTile:x,zoom:R}){return R=R||0,v==="message"?0:v!=="maybePrepare"||x?v!=="parseTile"||x?v==="parseTile"&&x?300-R:v==="maybePrepare"&&x?400-R:500:200-R:100-R}(l);if(m===0){kn();try{n()}finally{}return{cancel:()=>{}}}return this.tasks[u]={fn:n,metadata:l,priority:m,id:u},this.taskQueue.push(u),this.invoker.trigger(),{cancel:()=>{delete this.tasks[u]}}}process(){kn();try{if(this.taskQueue=this.taskQueue.filter(u=>!!this.tasks[u]),!this.taskQueue.length)return;const n=this.pick();if(n===null)return;const l=this.tasks[n];if(delete this.tasks[n],this.taskQueue.length&&this.invoker.trigger(),!l)return;l.fn()}finally{}}pick(){let n=null,l=1/0;for(let m=0;m<this.taskQueue.length;m++){const v=this.tasks[this.taskQueue[m]];v.priority<l&&(l=v.priority,n=m)}if(n===null)return null;const u=this.taskQueue[n];return this.taskQueue.splice(n,1),u}remove(){this.invoker.remove()}}class Wf{constructor(n){this._stringToNumber={},this._numberToString=[];for(let l=0;l<n.length;l++){const u=n[l];this._stringToNumber[u]=l,this._numberToString[l]=u}}encode(n){return this._stringToNumber[n]}decode(n){return this._numberToString[n]}}const Bg=["tile","layer","source","sourceLayer","state"];class Zf{constructor(n,l,u,m,v){this.type="Feature",this._vectorTileFeature=n,this._z=l,this._x=u,this._y=m,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={type:"Feature",geometry:this.geometry,properties:this.properties};this.id!==void 0&&(n.id=this.id);for(const l of Bg)this[l]!==void 0&&(n[l]=this[l]);return n}}const Kr=32,vo=33,gs=new Uint16Array(8184);for(let a=0;a<2046;a++){let n=a+2,l=0,u=0,m=0,v=0,x=0,R=0;for(1&n?m=v=x=Kr:l=u=R=Kr;(n>>=1)>1;){const P=l+m>>1,G=u+v>>1;1&n?(m=l,v=u,l=x,u=R):(l=m,u=v,m=x,v=R),x=P,R=G}const N=4*a;gs[N+0]=l,gs[N+1]=u,gs[N+2]=m,gs[N+3]=v}const yo=new Uint16Array(2178),_s=new Uint8Array(1089),$u=new Uint16Array(1089);function Yf(a){return a===0?-.03125:a===32?.03125:0}var Xf=Bt([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Jf={type:2,extent:mn,loadGeometry:()=>[[new k(0,0),new k(8193,0),new k(8193,8193),new k(0,8193),new k(0,0)]]};class Dd{constructor(n,l,u,m,v){this.tileID=n,this.uid=de(),this.uses=0,this.tileSize=l,this.tileZoom=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=v,this.expiredRequestCount=0,this.state="loading",m&&m.transform&&(this.projection=m.transform.projection)}registerFadeDuration(n){const l=n+this.timeAdded;l<mt.now()||this.fadeEndTime&&l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Zs(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(n,l,u){if(this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(m,v){const x={};if(!v)return x;for(const R of m){const N=R.layerIds.map(P=>v.getLayer(P)).filter(Boolean);if(N.length!==0){R.layers=N,R.stateDependentLayerIds&&(R.stateDependentLayers=R.stateDependentLayerIds.map(P=>N.filter(G=>G.id===P)[0]));for(const P of N)x[P.id]=R}}return x}(n.buckets,l.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const v=this.buckets[m];if(v instanceof hs){if(this.hasSymbolBuckets=!0,!u)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const v=this.buckets[m];if(v instanceof hs&&v.hasRTLText){this.hasRTLText=!0,ce.isLoading()||ce.isLoaded()||le()!=="deferred"||Se();break}}this.queryPadding=0;for(const m in this.buckets){const v=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(m).queryRadius(v))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage),n.lineAtlas&&(this.lineAtlas=n.lineAtlas)}else this.collisionBoxArray=new Hu}unloadVectorData(){if(this.hasData()){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugIndexBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(n){return this.buckets[n.id]}upload(n){for(const u in this.buckets){const m=this.buckets[u];m.uploadPending()&&m.upload(n)}const l=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new tc(n,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new tc(n,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new tc(n,this.lineAtlas.image,l.ALPHA),this.lineAtlas.uploaded=!0)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,l,u,m,v,x,R,N){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:m,pixelPosMatrix:R,transform:x,params:v,tileTransform:this.tileTransform},n,l,u):{}}querySourceFeatures(n,l){const u=this.latestFeatureIndex;if(!u||!u.rawTileData)return;const m=u.loadVTLayers(),v=l?l.sourceLayer:"",x=m._geojsonTileLayer||m[v];if(!x)return;const R=Io(l&&l.filter),{z:N,x:P,y:G}=this.tileID.canonical,H={z:N,x:P,y:G};for(let K=0;K<x.length;K++){const X=x.feature(K);if(R.needGeometry){const he=js(X,!0);if(!R.filter(new ge(this.tileID.overscaledZ),he,this.tileID.canonical))continue}else if(!R.filter(new ge(this.tileID.overscaledZ),X))continue;const Q=u.getId(X,v),se=new Zf(X,N,P,G,Q);se.tile=H,n.push(se)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const l=this.expirationTime;if(n.cacheControl){const u=En(n.cacheControl);u["max-age"]&&(this.expirationTime=Date.now()+1e3*u["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const u=Date.now();let m=!1;if(this.expirationTime>u)m=!1;else if(l)if(this.expirationTime<l)m=!0;else{const v=this.expirationTime-l;v?this.expirationTime=u+Math.max(v,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0||!l)return;const u=this.latestFeatureIndex.loadVTLayers(),m=l.style.listImages();for(const v in this.buckets){if(!l.style.hasLayer(v))continue;const x=this.buckets[v],R=x.layers[0].sourceLayer||"_geojsonTileLayer",N=u[R],P=n[R];if(!N||!P||Object.keys(P).length===0)continue;if(x.update(P,N,m,this.imageAtlas&&this.imageAtlas.patternPositions||{}),x instanceof mu||x instanceof du){const H=l.style._getSourceCache(x.layers[0].source);l._terrain&&l._terrain.enabled&&H&&x.programConfigurations.needsUpload&&l._terrain._clearRenderCacheForTile(H.id,this.tileID)}const G=l&&l.style&&l.style.getLayer(v);G&&(this.queryPadding=Math.max(this.queryPadding,G.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<mt.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=mt.now()+n}setTexture(n,l){const u=l.context,m=u.gl;this.texture=l.getTileTexture(n.width),this.texture?this.texture.update(n,{useMipmap:!0}):(this.texture=new tc(u,n,m.RGBA,{useMipmap:!0}),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE),u.extTextureFilterAnisotropic&&m.texParameterf(m.TEXTURE_2D,u.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,u.extTextureFilterAnisotropicMax))}setDependencies(n,l){const u={};for(const m of l)u[m]=!0;this.dependencies[n]=u}hasDependency(n,l){for(const u of n){const m=this.dependencies[u];if(m){for(const v of l)if(m[v])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(n,l){if(!l||l.name==="mercator"||this._tileDebugBuffer)return;const u=Do(Jf,this.tileID.canonical,this.tileTransform)[0],m=new fn,v=new jr;for(let x=0;x<u.length;x++){const{x:R,y:N}=u[x];m.emplaceBack(R,N),v.emplaceBack(x)}v.emplaceBack(0),this._tileDebugIndexBuffer=n.createIndexBuffer(v),this._tileDebugBuffer=n.createVertexBuffer(m,Zl.members),this._tileDebugSegments=Ii.simpleSegment(0,0,m.length,v.length)}_makeTileBoundsBuffers(n,l){if(this._tileBoundsBuffer||!l||l.name==="mercator")return;const u=Do(Jf,this.tileID.canonical,this.tileTransform)[0];let m,v;if(this.isRaster){const x=function(R,N){const P=Zs(R,N),G=Math.pow(2,R.z);for(let he=0;he<vo;he++)for(let xe=0;xe<vo;xe++){const Ie=ar((R.x+(xe+Yf(xe))/Kr)/G),Me=Bi((R.y+(he+Yf(he))/Kr)/G),Pe=N.project(Ie,Me),Fe=he*vo+xe;yo[2*Fe+0]=Math.round((Pe.x*P.scale-P.x)*mn),yo[2*Fe+1]=Math.round((Pe.y*P.scale-P.y)*mn)}_s.fill(0),$u.fill(0);for(let he=2045;he>=0;he--){const xe=4*he,Ie=gs[xe+0],Me=gs[xe+1],Pe=gs[xe+2],Fe=gs[xe+3],je=Ie+Pe>>1,ot=Me+Fe>>1,lt=je+ot-Me,_t=ot+Ie-je,kt=Me*vo+Ie,Je=Fe*vo+Pe,gt=ot*vo+je,Rt=Math.hypot((yo[2*kt+0]+yo[2*Je+0])/2-yo[2*gt+0],(yo[2*kt+1]+yo[2*Je+1])/2-yo[2*gt+1])>=16;if(_s[gt]=_s[gt]||(Rt?1:0),he<1022){const $t=(Me+_t>>1)*vo+(Ie+lt>>1),Kt=(Fe+_t>>1)*vo+(Pe+lt>>1);_s[gt]=_s[gt]||_s[$t]||_s[Kt]}}const H=new nn,K=new Gn;let X=0;function Q(he,xe){const Ie=xe*vo+he;return $u[Ie]===0&&(H.emplaceBack(yo[2*Ie+0],yo[2*Ie+1],he*mn/Kr,xe*mn/Kr),$u[Ie]=++X),$u[Ie]-1}function se(he,xe,Ie,Me,Pe,Fe){const je=he+Ie>>1,ot=xe+Me>>1;if(Math.abs(he-Pe)+Math.abs(xe-Fe)>1&&_s[ot*vo+je])se(Pe,Fe,he,xe,je,ot),se(Ie,Me,Pe,Fe,je,ot);else{const lt=Q(he,xe),_t=Q(Ie,Me),kt=Q(Pe,Fe);K.emplaceBack(lt,_t,kt)}}return se(0,0,Kr,Kr,Kr,0),se(Kr,Kr,0,0,0,Kr),{vertices:H,indices:K}}(this.tileID.canonical,l);m=x.vertices,v=x.indices}else{m=new nn,v=new Gn;for(const{x:R,y:N}of u)m.emplaceBack(R,N,0,0);const x=su(m.int16,void 0,4);for(let R=0;R<x.length;R+=3)v.emplaceBack(x[R],x[R+1],x[R+2])}this._tileBoundsBuffer=n.createVertexBuffer(m,Xf.members),this._tileBoundsIndexBuffer=n.createIndexBuffer(v),this._tileBoundsSegments=Ii.simpleSegment(0,0,m.length,v.length)}_makeGlobeTileDebugBuffers(n,l){if(this._globeTileDebugBorderBuffer||this._globeTileDebugTextBuffer||!l||l.name!=="globe")return;const u=this.tileID.canonical,m=Yl(_o(u));this._makeGlobeTileDebugBorderBuffer(n,u,m),this._makeGlobeTileDebugTextBuffer(n,u,m)}_makeGlobeTileDebugBorderBuffer(n,l,u){const m=new fn,v=new jr,x=new Rn,R=(P,G,H,K,X)=>{const Q=(H-P)/(X-1),se=(K-G)/(X-1),he=m.length;for(let xe=0;xe<X;xe++){const Ie=P+xe*Q,Me=G+xe*se;m.emplaceBack(Ie,Me);const Pe=Pf(Ie,Me,l),Fe=Ji(Pe,Pe,u);x.emplaceBack(Fe[0],Fe[1],Fe[2]),v.emplaceBack(he+xe)}},N=mn;R(0,0,N,0,16),R(N,0,N,N,16),R(N,N,0,N,16),R(0,N,0,0,16),this._tileDebugIndexBuffer=n.createIndexBuffer(v),this._tileDebugBuffer=n.createVertexBuffer(m,Zl.members),this._globeTileDebugBorderBuffer=n.createVertexBuffer(x,Nf.members),this._tileDebugSegments=Ii.simpleSegment(0,0,m.length,v.length)}_makeGlobeTileDebugTextBuffer(n,l,u){const m=new fn,v=new Gn,x=new Rn,R=25;v.reserve(32),m.reserve(R),x.reserve(R);const N=(P,G)=>R*P+G;for(let P=0;P<R;P++){const G=2048*P;for(let H=0;H<R;H++){const K=2048*H;m.emplaceBack(K,G);const X=Pf(K,G,l),Q=Ji(X,X,u);x.emplaceBack(Q[0],Q[1],Q[2])}}for(let P=0;P<4;P++)for(let G=0;G<4;G++){const H=N(P,G),K=N(P,G+1),X=N(P+1,G),Q=N(P+1,G+1);v.emplaceBack(H,K,X),v.emplaceBack(X,K,Q)}this._tileDebugTextIndexBuffer=n.createIndexBuffer(v),this._tileDebugTextBuffer=n.createVertexBuffer(m,Zl.members),this._globeTileDebugTextBuffer=n.createVertexBuffer(x,Nf.members),this._tileDebugTextSegments=Ii.simpleSegment(0,0,R,32)}}class zg{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,l,u){const m=String(l);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][m]=this.stateChanges[n][m]||{},we(this.stateChanges[n][m],u),this.deletedStates[n]===null){this.deletedStates[n]={};for(const v in this.state[n])v!==m&&(this.deletedStates[n][v]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][m]===null){this.deletedStates[n][m]={};for(const v in this.state[n][m])u[v]||(this.deletedStates[n][m][v]=null)}else for(const v in u)this.deletedStates[n]&&this.deletedStates[n][m]&&this.deletedStates[n][m][v]===null&&delete this.deletedStates[n][m][v]}removeFeatureState(n,l,u){if(this.deletedStates[n]===null)return;const m=String(l);if(this.deletedStates[n]=this.deletedStates[n]||{},u&&l!==void 0)this.deletedStates[n][m]!==null&&(this.deletedStates[n][m]=this.deletedStates[n][m]||{},this.deletedStates[n][m][u]=null);else if(l!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][m])for(u in this.deletedStates[n][m]={},this.stateChanges[n][m])this.deletedStates[n][m][u]=null;else this.deletedStates[n][m]=null;else this.deletedStates[n]=null}getState(n,l){const u=String(l),m=we({},(this.state[n]||{})[u],(this.stateChanges[n]||{})[u]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const v=this.deletedStates[n][l];if(v===null)return{};for(const x in v)delete m[x]}return m}initializeTileState(n,l){n.setFeatureState(this.state,l)}coalesceChanges(n,l){const u={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const v={};for(const x in this.stateChanges[m])this.state[m][x]||(this.state[m][x]={}),we(this.state[m][x],this.stateChanges[m][x]),v[x]=this.state[m][x];u[m]=v}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const v={};if(this.deletedStates[m]===null)for(const x in this.state[m])v[x]={},this.state[m][x]={};else for(const x in this.deletedStates[m]){if(this.deletedStates[m][x]===null)this.state[m][x]={};else for(const R of Object.keys(this.deletedStates[m][x]))delete this.state[m][x][R];v[x]=this.state[m][x]}u[m]=u[m]||{},we(u[m],v)}if(this.stateChanges={},this.deletedStates={},Object.keys(u).length!==0)for(const m in n)n[m].setFeatureState(u,l)}}class Qf{constructor(n){this.size=n,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(n,l){const u=this.toIdx(n,l);return{min:this.minimums[u],max:this.maximums[u]}}isLeaf(n,l){return this.leaves[this.toIdx(n,l)]}toIdx(n,l){return l*this.size+n}}function eh(a,n,l,u){let m=0,v=Number.MAX_VALUE;for(let x=0;x<3;x++)if(Math.abs(u[x])<1e-15){if(l[x]<a[x]||l[x]>n[x])return null}else{const R=1/u[x];let N=(a[x]-l[x])*R,P=(n[x]-l[x])*R;if(N>P){const G=N;N=P,P=G}if(N>m&&(m=N),P<v&&(v=P),m>v)return null}return m}function th(a,n,l,u,m,v,x,R,N,P,G){const H=u-a,K=m-n,X=v-l,Q=x-a,se=R-n,he=N-l,xe=G[1]*he-G[2]*se,Ie=G[2]*Q-G[0]*he,Me=G[0]*se-G[1]*Q,Pe=H*xe+K*Ie+X*Me;if(Math.abs(Pe)<1e-15)return null;const Fe=1/Pe,je=P[0]-a,ot=P[1]-n,lt=P[2]-l,_t=(je*xe+ot*Ie+lt*Me)*Fe;if(_t<0||_t>1)return null;const kt=ot*X-lt*K,Je=lt*H-je*X,gt=je*K-ot*H,Rt=(G[0]*kt+G[1]*Je+G[2]*gt)*Fe;return Rt<0||_t+Rt>1?null:(Q*kt+se*Je+he*gt)*Fe}function nh(a,n,l){return(a-n)/(l-n)}function ih(a,n,l,u,m,v,x,R,N){const P=1<<l,G=v-u,H=x-m,K=(a+1)/P*G+u,X=(n+0)/P*H+m,Q=(n+1)/P*H+m;R[0]=(a+0)/P*G+u,R[1]=X,N[0]=K,N[1]=Q}class rh{constructor(n){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=n,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const l=function(v){const x=Math.ceil(Math.log2(v.dim/8)),R=[];let N=Math.ceil(Math.pow(2,x));const P=1/N,G=(X,Q,se,he,xe)=>{const Ie=he?1:0,Me=(X+1)*se-Ie,Pe=Q*se,Fe=(Q+1)*se-Ie;xe[0]=X*se,xe[1]=Pe,xe[2]=Me,xe[3]=Fe};let H=new Qf(N);const K=[];for(let X=0;X<N*N;X++){G(X%N,Math.floor(X/N),P,!1,K);const Q=vs(K[0],K[1],v),se=vs(K[2],K[1],v),he=vs(K[2],K[3],v),xe=vs(K[0],K[3],v);H.minimums.push(Math.min(Q,se,he,xe)),H.maximums.push(Math.max(Q,se,he,xe)),H.leaves.push(1)}for(R.push(H),N/=2;N>=1;N/=2){const X=R[R.length-1];H=new Qf(N);for(let Q=0;Q<N*N;Q++){G(Q%N,Math.floor(Q/N),2,!0,K);const se=X.getElevation(K[0],K[1]),he=X.getElevation(K[2],K[1]),xe=X.getElevation(K[2],K[3]),Ie=X.getElevation(K[0],K[3]),Me=X.isLeaf(K[0],K[1]),Pe=X.isLeaf(K[2],K[1]),Fe=X.isLeaf(K[2],K[3]),je=X.isLeaf(K[0],K[3]),ot=Math.min(se.min,he.min,xe.min,Ie.min),lt=Math.max(se.max,he.max,xe.max,Ie.max),_t=Me&&Pe&&Fe&&je;H.maximums.push(lt),H.minimums.push(ot),H.leaves.push(lt-ot<=5&&_t?1:0)}R.push(H)}return R}(this.dem),u=l.length-1,m=l[u];this._addNode(m.minimums[0],m.maximums[0],m.leaves[0]),this._construct(l,0,0,u,0)}raycastRoot(n,l,u,m,v,x,R=1){return eh([n,l,-100],[u,m,this.maximums[0]*R],v,x)}raycast(n,l,u,m,v,x,R=1){if(!this.nodeCount)return null;const N=this.raycastRoot(n,l,u,m,v,x,R);if(N==null)return null;const P=[],G=[],H=[],K=[],X=[{idx:0,t:N,nodex:0,nodey:0,depth:0}];for(;X.length>0;){const{idx:Q,t:se,nodex:he,nodey:xe,depth:Ie}=X.pop();if(this.leaves[Q]){ih(he,xe,Ie,n,l,u,m,H,K);const Pe=1<<Ie,Fe=(he+0)/Pe,je=(he+1)/Pe,ot=(xe+0)/Pe,lt=(xe+1)/Pe,_t=vs(Fe,ot,this.dem)*R,kt=vs(je,ot,this.dem)*R,Je=vs(je,lt,this.dem)*R,gt=vs(Fe,lt,this.dem)*R,Rt=th(H[0],H[1],_t,K[0],H[1],kt,K[0],K[1],Je,v,x),$t=th(K[0],K[1],Je,H[0],K[1],gt,H[0],H[1],_t,v,x),Kt=Math.min(Rt!==null?Rt:Number.MAX_VALUE,$t!==null?$t:Number.MAX_VALUE);if(Kt!==Number.MAX_VALUE)return Kt;{const St=ou([],v,x,se);if(oh(_t,kt,gt,Je,nh(St[0],H[0],K[0]),nh(St[1],H[1],K[1]))>=St[2])return se}continue}let Me=0;for(let Pe=0;Pe<this._siblingOffset.length;Pe++){ih((he<<1)+this._siblingOffset[Pe][0],(xe<<1)+this._siblingOffset[Pe][1],Ie+1,n,l,u,m,H,K),H[2]=-100,K[2]=this.maximums[this.childOffsets[Q]+Pe]*R;const Fe=eh(H,K,v,x);if(Fe!=null){const je=Fe;P[Pe]=je;let ot=!1;for(let lt=0;lt<Me&&!ot;lt++)je>=P[G[lt]]&&(G.splice(lt,0,Pe),ot=!0);ot||(G[Me]=Pe),Me++}}for(let Pe=0;Pe<Me;Pe++){const Fe=G[Pe];X.push({idx:this.childOffsets[Q]+Fe,t:P[Fe],nodex:(he<<1)+this._siblingOffset[Fe][0],nodey:(xe<<1)+this._siblingOffset[Fe][1],depth:Ie+1})}}return null}_addNode(n,l,u){return this.minimums.push(n),this.maximums.push(l),this.leaves.push(u),this.childOffsets.push(0),this.nodeCount++}_construct(n,l,u,m,v){if(n[m].isLeaf(l,u)===1)return;this.childOffsets[v]||(this.childOffsets[v]=this.nodeCount);const x=m-1,R=n[x];let N=0,P=0;for(let G=0;G<this._siblingOffset.length;G++){const H=2*l+this._siblingOffset[G][0],K=2*u+this._siblingOffset[G][1],X=R.getElevation(H,K),Q=R.isLeaf(H,K),se=this._addNode(X.min,X.max,Q);Q&&(N|=1<<G),P||(P=se)}for(let G=0;G<this._siblingOffset.length;G++)N&1<<G||this._construct(n,2*l+this._siblingOffset[G][0],2*u+this._siblingOffset[G][1],x,P+G)}}function oh(a,n,l,u,m,v){return qn(qn(a,l,v),qn(n,u,v),m)}function vs(a,n,l){const u=l.dim,m=W(a*u-.5,0,u-1),v=W(n*u-.5,0,u-1),x=Math.floor(m),R=Math.floor(v),N=Math.min(x+1,u-1),P=Math.min(R+1,u-1);return oh(l.get(x,R),l.get(N,R),l.get(x,P),l.get(N,P),m-x,v-R)}const sh={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class Mu{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(n,l,u,m=!1,v=!1){if(this.uid=n,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(u&&u!=="mapbox"&&u!=="terrarium")return un(`"${u}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=l.height;const x=this.dim=l.height-2,R=new Uint32Array(l.data.buffer);if(this.pixels=new Uint8Array(l.data.buffer),this.encoding=u||"mapbox",this.borderReady=m,!m){for(let N=0;N<x;N++)R[this._idx(-1,N)]=R[this._idx(0,N)],R[this._idx(x,N)]=R[this._idx(x-1,N)],R[this._idx(N,-1)]=R[this._idx(N,0)],R[this._idx(N,x)]=R[this._idx(N,x-1)];R[this._idx(-1,-1)]=R[this._idx(0,0)],R[this._idx(x,-1)]=R[this._idx(x-1,0)],R[this._idx(-1,x)]=R[this._idx(0,x-1)],R[this._idx(x,x)]=R[this._idx(x-1,x-1)],v&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new rh(this)}get(n,l,u=!1){u&&(n=W(n,-1,this.dim),l=W(l,-1,this.dim));const m=4*this._idx(n,l);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(this.pixels[m],this.pixels[m+1],this.pixels[m+2])}static getUnpackVector(n){return sh[n]}get unpackVector(){return sh[this.encoding]}_idx(n,l){if(n<-1||n>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(n+1)}_unpackMapbox(n,l,u){return(256*n*256+256*l+u)/10-1e4}_unpackTerrarium(n,l,u){return 256*n+l+u/256-32768}static pack(n,l){const u=[0,0,0,0],m=Mu.getUnpackVector(l);let v=Math.floor((n+m[3])/m[2]);return u[2]=v%256,v=Math.floor(v/256),u[1]=v%256,v=Math.floor(v/256),u[0]=v,u}getPixels(){return new Cr({width:this.stride,height:this.stride},this.pixels)}backfillBorder(n,l,u){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let m=l*this.dim,v=l*this.dim+this.dim,x=u*this.dim,R=u*this.dim+this.dim;switch(l){case-1:m=v-1;break;case 1:v=m+1}switch(u){case-1:x=R-1;break;case 1:R=x+1}const N=-l*this.dim,P=-u*this.dim;for(let G=x;G<R;G++)for(let H=m;H<v;H++){const K=4*this._idx(H,G),X=4*this._idx(H+N,G+P);this.pixels[K+0]=n.pixels[X+0],this.pixels[K+1]=n.pixels[X+1],this.pixels[K+2]=n.pixels[X+2],this.pixels[K+3]=n.pixels[X+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Zt(Mu,"DEMData"),Zt(rh,"DemMinMaxQuadTree",{omit:["dem"]});class Fg{constructor(n,l){this.max=n,this.onRemove=l,this.reset()}reset(){for(const n in this.data)for(const l of this.data[n])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(n,l,u){const m=n.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const v={value:l,timeout:void 0};if(u!==void 0&&(v.timeout=setTimeout(()=>{this.remove(n,v)},u)),this.data[m].push(v),this.order.push(m),this.order.length>this.max){const x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const l=this.data[n].shift();return l.timeout&&clearTimeout(l.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),l.value}getByKey(n){const l=this.data[n];return l?l[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,l){if(!this.has(n))return this;const u=n.wrapped().key,m=l===void 0?0:this.data[u].indexOf(l),v=this.data[u][m];return this.data[u].splice(m,1),v.timeout&&clearTimeout(v.timeout),this.data[u].length===0&&delete this.data[u],this.onRemove(v.value),this.order.splice(this.order.indexOf(u),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(n){const l=[];for(const u in this.data)for(const m of this.data[u])n(m.value)||l.push(m);for(const u of l)this.remove(u.value.tileID,u)}}class Ya{constructor(n,l,u){this.func=n,this.mask=l,this.range=u}}Ya.ReadOnly=!1,Ya.ReadWrite=!0,Ya.disabled=new Ya(519,Ya.ReadOnly,[0,1]);const Bd=7680;class zd{constructor(n,l,u,m,v,x){this.test=n,this.ref=l,this.mask=u,this.fail=m,this.depthFail=v,this.pass=x}}zd.disabled=new zd({func:519,mask:0},0,0,Bd,Bd,Bd);class bo{constructor(n,l,u){this.blendFunction=n,this.blendColor=l,this.mask=u}}bo.Replace=[1,0],bo.disabled=new bo(bo.Replace,Pt.transparent,[!1,!1,!1,!1]),bo.unblended=new bo(bo.Replace,Pt.transparent,[!0,!0,!0,!0]),bo.alphaBlended=new bo([1,771],Pt.transparent,[!0,!0,!0,!0]);const Fd=1029,Vd=2305;class oo{constructor(n,l,u){this.enable=n,this.mode=l,this.frontFace=u}}oo.disabled=new oo(!1,Fd,Vd),oo.backCCW=new oo(!0,Fd,Vd),oo.backCW=new oo(!0,Fd,2304),oo.frontCW=new oo(!0,1028,2304),oo.frontCCW=new oo(!0,1028,Vd);class Ys extends Jn{constructor(n,l,u){super(),this.id=n,this._onlySymbols=u,l.on("data",m=>{m.dataType==="source"&&m.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&m.dataType==="source"&&m.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),l.on("error",()=>{this._sourceErrored=!0}),this._source=l,this._tiles={},this._cache=new Fg(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=l.minTileCacheSize,this._maxTileCacheSize=l.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new zg,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(n){this.map=n,this._minTileCacheSize=this._minTileCacheSize===void 0&&n?n._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&n?n._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const n in this._tiles){const l=this._tiles[n];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(n,l){return n.isSymbolTile=this._onlySymbols,this._source.loadTile(n,l)}_unloadTile(n){if(this._source.unloadTile)return this._source.unloadTile(n,()=>{})}_abortTile(n){if(this._source.abortTile)return this._source.abortTile(n,()=>{})}serialize(){return this._source.serialize()}prepare(n){if(this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._source.prepareTile)for(const l in this._tiles){const u=this._tiles[l];this._source.prepareTile(u)&&this.map.painter.terrain&&this.map.painter.terrain._clearRenderCacheForTile(this.id,u.tileID),u.upload(n),u.prepare(this.map.style.imageManager)}else for(const l in this._tiles){const u=this._tiles[l];u.upload(n),u.prepare(this.map.style.imageManager)}}getIds(){return Ce(this._tiles).map(n=>n.tileID).sort(ah).map(n=>n.key)}getRenderableIds(n){const l=[];for(const u in this._tiles)this._isIdRenderable(+u,n)&&l.push(this._tiles[u]);return n?l.sort((u,m)=>{const v=u.tileID,x=m.tileID,R=new k(v.canonical.x,v.canonical.y)._rotate(this.transform.angle),N=new k(x.canonical.x,x.canonical.y)._rotate(this.transform.angle);return v.overscaledZ-x.overscaledZ||N.y-R.y||N.x-R.x}).map(u=>u.tileID.key):l.map(u=>u.tileID).sort(ah).map(u=>u.key)}hasRenderableParent(n){const l=this.findLoadedParent(n,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(n,l){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(l||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(+n,"reloading")}}_reloadTile(n,l){const u=this._tiles[n];u&&(u.state!=="loading"&&(u.state=l),this._loadTile(u,this._tileLoaded.bind(this,u,n,l)))}_tileLoaded(n,l,u,m){if(m)if(n.state="errored",m.status!==404)this._source.fire(new ui(m,{tile:n}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const v=this.map.painter.terrain;this.update(this.transform,v.getScaledDemTileSize(),!0),v.resetTileLookupCache(this.id)}else this.update(this.transform);else n.timeAdded=mt.now(),u==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(l,n),this._source.type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),this._source.fire(new Bn("data",{dataType:"source",tile:n,coord:n.tileID,sourceCacheId:this.id}))}_backfillDEM(n){const l=this.getRenderableIds();for(let m=0;m<l.length;m++){const v=l[m];if(n.neighboringTiles&&n.neighboringTiles[v]){const x=this.getTileByID(v);u(n,x),u(x,n)}}function u(m,v){if(!m.dem||m.dem.borderReady)return;m.needsHillshadePrepare=!0,m.needsDEMTextureUpload=!0;let x=v.tileID.canonical.x-m.tileID.canonical.x;const R=v.tileID.canonical.y-m.tileID.canonical.y,N=Math.pow(2,m.tileID.canonical.z),P=v.tileID.key;x===0&&R===0||Math.abs(R)>1||(Math.abs(x)>1&&(Math.abs(x+N)===1?x+=N:Math.abs(x-N)===1&&(x-=N)),v.dem&&m.dem&&(m.dem.backfillBorder(v.dem,x,R),m.neighboringTiles&&m.neighboringTiles[P]&&(m.neighboringTiles[P].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,l,u,m){for(const v in this._tiles){let x=this._tiles[v];if(m[v]||!x.hasData()||x.tileID.overscaledZ<=l||x.tileID.overscaledZ>u)continue;let R=x.tileID;for(;x&&x.tileID.overscaledZ>l+1;){const P=x.tileID.scaledTo(x.tileID.overscaledZ-1);x=this._tiles[P.key],x&&x.hasData()&&(R=P)}let N=R;for(;N.overscaledZ>l;)if(N=N.scaledTo(N.overscaledZ-1),n[N.key]){m[R.key]=R;break}}}findLoadedParent(n,l){if(n.key in this._loadedParentTiles){const u=this._loadedParentTiles[n.key];return u&&u.tileID.overscaledZ>=l?u:null}for(let u=n.overscaledZ-1;u>=l;u--){const m=n.scaledTo(u),v=this._getLoadedTile(m);if(v)return v}}_getLoadedTile(n){const l=this._tiles[n.key];return l&&l.hasData()?l:this._cache.getByKey(this._source.reparseOverscaled?n.wrapped().key:n.canonical.key)}updateCacheSize(n,l){l=l||this._source.tileSize;const u=Math.ceil(n.width/l)+1,m=Math.ceil(n.height/l)+1,v=Math.floor(u*m*5),x=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,v):v,R=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,x):x;this._cache.setMaxSize(R)}handleWrapJump(n){const l=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,l){const u={};for(const m in this._tiles){const v=this._tiles[m];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+l),u[v.tileID.key]=v}this._tiles=u;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(+m,this._tiles[m])}}update(n,l,u){if(this.transform=n,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!u)return;let m;this.updateCacheSize(n,l),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?m=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(R=>new cr(R.canonical.z,R.wrap,R.canonical.z,R.canonical.x,R.canonical.y)):(m=n.coveringTiles({tileSize:l||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!u,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(m=m.filter(R=>this._source.hasTile(R)))):m=[];const v=this._updateRetainedTiles(m);if(lh(this._source.type)&&m.length!==0){const R={},N={},P=Object.keys(v);for(const H of P){const K=v[H],X=this._tiles[H];if(!X||X.fadeEndTime&&X.fadeEndTime<=mt.now())continue;const Q=this.findLoadedParent(K,Math.max(K.overscaledZ-Ys.maxOverzooming,this._source.minzoom));Q&&(this._addTile(Q.tileID),R[Q.tileID.key]=Q.tileID),N[H]=K}const G=m[m.length-1].overscaledZ;for(const H in this._tiles){const K=this._tiles[H];if(v[H]||!K.hasData())continue;let X=K.tileID;for(;X.overscaledZ>G;){X=X.scaledTo(X.overscaledZ-1);const Q=this._tiles[X.key];if(Q&&Q.hasData()&&N[X.key]){v[H]=K.tileID;break}}}for(const H in R)v[H]||(this._coveredTiles[H]=!0,v[H]=R[H])}for(const R in v)this._tiles[R].clearFadeHold();const x=function(R,N){const P=[];for(const G in R)G in N||P.push(G);return P}(this._tiles,v);for(const R of x){const N=this._tiles[R];N.hasSymbolBuckets&&!N.holdingForFade()?N.setHoldDuration(this.map._fadeDuration):N.hasSymbolBuckets&&!N.symbolFadeFinished()||this._removeTile(+R)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(+n)}_updateRetainedTiles(n){const l={};if(n.length===0)return l;const u={},m=n.reduce((P,G)=>Math.min(P,G.overscaledZ),1/0),v=n[0].overscaledZ,x=Math.max(v-Ys.maxOverzooming,this._source.minzoom),R=Math.max(v+Ys.maxUnderzooming,this._source.minzoom),N={};for(const P of n){const G=this._addTile(P);l[P.key]=P,G.hasData()||m<this._source.maxzoom&&(N[P.key]=P)}this._retainLoadedChildren(N,m,R,l);for(const P of n){let G=this._tiles[P.key];if(G.hasData())continue;if(P.canonical.z>=this._source.maxzoom){const K=P.children(this._source.maxzoom)[0],X=this.getTile(K);if(X&&X.hasData()){l[K.key]=K;continue}}else{const K=P.children(this._source.maxzoom);if(l[K[0].key]&&l[K[1].key]&&l[K[2].key]&&l[K[3].key])continue}let H=G.wasRequested();for(let K=P.overscaledZ-1;K>=x;--K){const X=P.scaledTo(K);if(u[X.key]||(u[X.key]=!0,G=this.getTile(X),!G&&H&&(G=this._addTile(X)),G&&(l[X.key]=X,H=G.wasRequested(),G.hasData())))break}}return l}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const l=[];let u,m=this._tiles[n].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){u=this._loadedParentTiles[m.key];break}l.push(m.key);const v=m.scaledTo(m.overscaledZ-1);if(u=this._getLoadedTile(v),u)break;m=v}for(const v of l)this._loadedParentTiles[v]=u}}_addTile(n){let l=this._tiles[n.key];if(l)return this._source.prepareTile&&this._source.prepareTile(l),l;l=this._cache.getAndRemove(n),l&&(this._setTileReloadTimer(n.key,l),l.tileID=n,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,l)));const u=Boolean(l);if(!u){const m=this.map?this.map.painter:null;l=new Dd(n,this._source.tileSize*n.overscaleFactor(),this.transform.tileZoom,m,this._isRaster),this._source.prepareTile&&this._source.prepareTile(l)||this._loadTile(l,this._tileLoaded.bind(this,l,n.key,l.state))}return l?(l.uses++,this._tiles[n.key]=l,u||this._source.fire(new Bn("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l):null}_setTileReloadTimer(n,l){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const u=l.getExpiryTimeout();u&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},u))}_removeTile(n){const l=this._tiles[n];l&&(l.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(+n);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(n,l,u){const m=[],v=this.transform;if(!v)return m;const x=v.projection.name==="globe",R=Vs(v.center.lng);for(const N in this._tiles){const P=this._tiles[N];if(u&&P.clearQueryDebugViz(),P.holdingForFade())continue;let G;if(x){const H=P.tileID.canonical;if(H.z===0){const K=[Math.abs(W(R,...nc(H,-1))-R),Math.abs(W(R,...nc(H,1))-R)];G=[0,2*K.indexOf(Math.min(...K))-1]}else{const K=[Math.abs(W(R,...nc(H,-1))-R),Math.abs(W(R,...nc(H,0))-R),Math.abs(W(R,...nc(H,1))-R)];G=[K.indexOf(Math.min(...K))-1]}}else G=[0];for(const H of G){const K=n.containsTile(P,v,l,H);K&&m.push(K)}}return m}getVisibleCoordinates(n){const l=this.getRenderableIds(n).map(u=>this._tiles[u].tileID);for(const u of l)u.projMatrix=this.transform.calculateProjMatrix(u.toUnwrapped());return l}hasTransition(){if(this._source.hasTransition())return!0;if(lh(this._source.type))for(const n in this._tiles){const l=this._tiles[n];if(l.fadeEndTime!==void 0&&l.fadeEndTime>=mt.now())return!0}return!1}setFeatureState(n,l,u){this._state.updateState(n=n||"_geojsonTileLayer",l,u)}removeFeatureState(n,l,u){this._state.removeFeatureState(n=n||"_geojsonTileLayer",l,u)}getFeatureState(n,l){return this._state.getState(n=n||"_geojsonTileLayer",l)}setDependencies(n,l,u){const m=this._tiles[n];m&&m.setDependencies(l,u)}reloadTilesForDependencies(n,l){for(const u in this._tiles)this._tiles[u].hasDependency(n,l)&&this._reloadTile(+u,"reloading");this._cache.filter(u=>!u.hasDependency(n,l))}_preloadTiles(n,l){const u=new Map,m=Array.isArray(n)?n:[n],v=this.map.painter.terrain,x=this.usedForTerrain&&v?v.getScaledDemTileSize():this._source.tileSize;for(const R of m){const N=R.coveringTiles({tileSize:x,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const P of N)u.set(P.key,P);this.usedForTerrain&&R.updateElevation(!1)}ie(Array.from(u.values()),(R,N)=>{const P=new Dd(R,this._source.tileSize*R.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(P,G=>{this._source.type==="raster-dem"&&P.dem&&this._backfillDEM(P),N(G,P)})},l)}}function ah(a,n){const l=Math.abs(2*a.wrap)-+(a.wrap<0),u=Math.abs(2*n.wrap)-+(n.wrap<0);return a.overscaledZ-n.overscaledZ||u-l||n.canonical.y-a.canonical.y||n.canonical.x-a.canonical.x}function lh(a){return a==="raster"||a==="image"||a==="video"}function nc(a,n){const l=1<<a.z;return[a.x/l+n,(a.x+1)/l+n]}Ys.maxOverzooming=10,Ys.maxUnderzooming=3;class Iu{constructor(n,l,u){this._demTile=n,this._dem=this._demTile.dem,this._scale=l,this._offset=u}static create(n,l,u){const m=u||n.findDEMTileFor(l);if(!m||!m.dem)return;const v=m.dem,x=m.tileID,R=1<<l.canonical.z-x.canonical.z;return new Iu(m,m.tileSize/mn/R,[(l.canonical.x/R-x.canonical.x)*v.dim,(l.canonical.y/R-x.canonical.y)*v.dim])}tileCoordToPixel(n,l){const u=l*this._scale+this._offset[1],m=Math.floor(n*this._scale+this._offset[0]),v=Math.floor(u);return new k(m,v)}getElevationAt(n,l,u,m){const v=n*this._scale+this._offset[0],x=l*this._scale+this._offset[1],R=Math.floor(v),N=Math.floor(x),P=this._dem;return m=!!m,u?qn(qn(P.get(R,N,m),P.get(R,N+1,m),x-N),qn(P.get(R+1,N,m),P.get(R+1,N+1,m),x-N),v-R):P.get(R,N,m)}getElevationAtPixel(n,l,u){return this._dem.get(n,l,!!u)}getMeterToDEM(n){return(1<<this._demTile.tileID.canonical.z)*Gr(1,n)*this._dem.stride}}class ch{constructor(n,l){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new ns(mn,16,0),this.featureIndexArray=new rp,this.promoteId=l}insert(n,l,u,m,v,x=0){const R=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,m,v,x);const N=this.grid;for(let P=0;P<l.length;P++){const G=l[P],H=[1/0,1/0,-1/0,-1/0];for(let K=0;K<G.length;K++){const X=G[K];H[0]=Math.min(H[0],X.x),H[1]=Math.min(H[1],X.y),H[2]=Math.max(H[2],X.x),H[3]=Math.max(H[3],X.y)}H[0]<mn&&H[1]<mn&&H[2]>=0&&H[3]>=0&&N.insert(R,H[0],H[1],H[2],H[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Ks.VectorTile(new Hl(this.rawTileData)).layers,this.sourceLayerCoder=new Wf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const n in this.vtLayers)this.vtFeatures[n]=[]}return this.vtLayers}query(n,l,u,m){this.loadVTLayers();const v=n.params||{},x=Io(v.filter),R=n.tileResult,N=n.transform,P=R.bufferedTilespaceBounds,G=this.grid.query(P.min.x,P.min.y,P.max.x,P.max.y,(Q,se,he,xe)=>wp(R.bufferedTilespaceGeometry,Q,se,he,xe));G.sort(Vg);let H=null;N.elevation&&G.length>0&&(H=Iu.create(N.elevation,this.tileID));const K={};let X;for(let Q=0;Q<G.length;Q++){const se=G[Q];if(se===X)continue;X=se;const he=this.featureIndexArray.get(se);let xe=null;this.loadMatchingFeature(K,he,x,v.layers,v.availableImages,l,u,m,(Ie,Me,Pe,Fe=0)=>(xe||(xe=Do(Ie,this.tileID.canonical,n.tileTransform)),Me.queryIntersectsFeature(R,Ie,Pe,xe,this.z,n.transform,n.pixelPosMatrix,H,Fe)))}return K}loadMatchingFeature(n,l,u,m,v,x,R,N,P){const{featureIndex:G,bucketIndex:H,sourceLayerIndex:K,layoutVertexArrayOffset:X}=l,Q=this.bucketLayerIDs[H];if(m&&!function(Ie,Me){for(let Pe=0;Pe<Ie.length;Pe++)if(Me.indexOf(Ie[Pe])>=0)return!0;return!1}(m,Q))return;const se=this.sourceLayerCoder.decode(K),he=this.vtLayers[se].feature(G);if(u.needGeometry){const Ie=js(he,!0);if(!u.filter(new ge(this.tileID.overscaledZ),Ie,this.tileID.canonical))return}else if(!u.filter(new ge(this.tileID.overscaledZ),he))return;const xe=this.getId(he,se);for(let Ie=0;Ie<Q.length;Ie++){const Me=Q[Ie];if(m&&m.indexOf(Me)<0)continue;const Pe=x[Me];if(!Pe)continue;let Fe={};xe!==void 0&&N&&(Fe=N.getState(Pe.sourceLayer||"_geojsonTileLayer",xe));const je=we({},R[Me]);je.paint=uh(je.paint,Pe.paint,he,Fe,v),je.layout=uh(je.layout,Pe.layout,he,Fe,v);const ot=!P||P(he,Pe,Fe,X);if(!ot)continue;const lt=new Zf(he,this.z,this.x,this.y,xe);lt.layer=je;let _t=n[Me];_t===void 0&&(_t=n[Me]=[]),_t.push({featureIndex:G,feature:lt,intersectionZ:ot})}}lookupSymbolFeatures(n,l,u,m,v,x,R,N){const P={};this.loadVTLayers();const G=Io(v);for(const H of n)this.loadMatchingFeature(P,{bucketIndex:u,sourceLayerIndex:m,featureIndex:H,layoutVertexArrayOffset:0},G,x,R,N,l);return P}loadFeature(n){const{featureIndex:l,sourceLayerIndex:u}=n;this.loadVTLayers();const m=this.sourceLayerCoder.decode(u),v=this.vtFeatures[m];if(v[l])return v[l];const x=this.vtLayers[m].feature(l);return v[l]=x,x}hasLayer(n){for(const l of this.bucketLayerIDs)for(const u of l)if(n===u)return!0;return!1}getId(n,l){let u=n.id;return this.promoteId&&(u=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof u=="boolean"&&(u=Number(u))),u}}function uh(a,n,l,u,m){return Ke(a,(v,x)=>{const R=n instanceof it?n.get(x):null;return R&&R.evaluate?R.evaluate(l,u,m):R})}function Vg(a,n){return n-a}Zt(ch,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class dh{constructor(n){const l={},u=[];for(const R in n){const N=n[R],P=l[R]={};for(const G in N.glyphs){const H=N.glyphs[+G];if(!H||H.bitmap.width===0||H.bitmap.height===0)continue;const K=H.metrics.localGlyph?2:1,X={x:0,y:0,w:H.bitmap.width+2*K,h:H.bitmap.height+2*K};u.push(X),P[G]=X}}const{w:m,h:v}=yd(u),x=new Bo({width:m||1,height:v||1});for(const R in n){const N=n[R];for(const P in N.glyphs){const G=N.glyphs[+P];if(!G||G.bitmap.width===0||G.bitmap.height===0)continue;const H=l[R][P],K=G.metrics.localGlyph?2:1;Bo.copy(G.bitmap,x,{x:0,y:0},{x:H.x+K,y:H.y+K},G.bitmap)}}this.image=x,this.positions=l}}Zt(dh,"GlyphAtlas");class Ug{constructor(n){this.tileID=new cr(n.tileID.overscaledZ,n.tileID.wrap,n.tileID.canonical.z,n.tileID.canonical.x,n.tileID.canonical.y),this.tileZoom=n.tileZoom,this.uid=n.uid,this.zoom=n.zoom,this.canonical=n.tileID.canonical,this.pixelRatio=n.pixelRatio,this.tileSize=n.tileSize,this.source=n.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=n.showCollisionBoxes,this.collectResourceTiming=!!n.collectResourceTiming,this.returnDependencies=!!n.returnDependencies,this.promoteId=n.promoteId,this.enableTerrain=!!n.enableTerrain,this.isSymbolTile=n.isSymbolTile,this.tileTransform=Zs(n.tileID.canonical,n.projection),this.projection=n.projection}parse(n,l,u,m,v){this.status="parsing",this.data=n,this.collisionBoxArray=new Hu;const x=new Wf(Object.keys(n.layers).sort()),R=new ch(this.tileID,this.promoteId);R.bucketLayerIDs=[];const N={},P=new Pd(256,256),G={featureIndex:R,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:P,availableImages:u},H=l.familiesBySource[this.source];for(const Fe in H){const je=n.layers[Fe];if(!je)continue;let ot=!1,lt=!1;for(const Je of H[Fe])Je[0].type==="symbol"?ot=!0:lt=!0;if(this.isSymbolTile===!0&&!ot||this.isSymbolTile===!1&&!lt)continue;je.version===1&&un(`Vector tile source "${this.source}" layer "${Fe}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const _t=x.encode(Fe),kt=[];for(let Je=0;Je<je.length;Je++){const gt=je.feature(Je),Rt=R.getId(gt,Fe);kt.push({feature:gt,id:Rt,index:Je,sourceLayerIndex:_t})}for(const Je of H[Fe]){const gt=Je[0];this.isSymbolTile!==void 0&&gt.type==="symbol"!==this.isSymbolTile||gt.minzoom&&this.zoom<Math.floor(gt.minzoom)||gt.maxzoom&&this.zoom>=gt.maxzoom||gt.visibility!=="none"&&(Ud(Je,this.zoom,u),(N[gt.id]=gt.createBucket({index:R.bucketLayerIDs.length,layers:Je,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:_t,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:u})).populate(kt,G,this.tileID.canonical,this.tileTransform),R.bucketLayerIDs.push(Je.map(Rt=>Rt.id)))}}let K,X,Q,se;P.trim();const he={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},xe=Ke(G.glyphDependencies,Fe=>Object.keys(Fe).map(Number));Object.keys(xe).length?m.send("getGlyphs",{uid:this.uid,stacks:xe},(Fe,je)=>{K||(K=Fe,X=je,Pe.call(this))},void 0,!1,he):X={};const Ie=Object.keys(G.iconDependencies);Ie.length?m.send("getImages",{icons:Ie,source:this.source,tileID:this.tileID,type:"icons"},(Fe,je)=>{K||(K=Fe,Q=je,Pe.call(this))},void 0,!1,he):Q={};const Me=Object.keys(G.patternDependencies);function Pe(){if(K)return v(K);if(X&&Q&&se){const Fe=new dh(X),je=new pf(Q,se);for(const ot in N){const lt=N[ot];lt instanceof hs?(Ud(lt.layers,this.zoom,u),ug(lt,X,Fe.positions,Q,je.iconPositions,this.showCollisionBoxes,u,this.tileID.canonical,this.tileZoom,this.projection)):lt.hasPattern&&(lt instanceof mu||lt instanceof du||lt instanceof Ul)&&(Ud(lt.layers,this.zoom,u),lt.addFeatures(G,this.tileID.canonical,je.patternPositions,u,this.tileTransform))}this.status="done",v(null,{buckets:Ce(N).filter(ot=>!ot.isEmpty()),featureIndex:R,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Fe.image,lineAtlas:P,imageAtlas:je,glyphMap:this.returnDependencies?X:null,iconMap:this.returnDependencies?Q:null,glyphPositions:this.returnDependencies?Fe.positions:null})}}Me.length?m.send("getImages",{icons:Me,source:this.source,tileID:this.tileID,type:"patterns"},(Fe,je)=>{K||(K=Fe,se=je,Pe.call(this))},void 0,!1,he):se={},Pe.call(this)}}function Ud(a,n,l){const u=new ge(n);for(const m of a)m.recalculate(u,l)}class ph{constructor(n){this.entries={},this.scheduler=n}request(n,l,u,m){const v=this.entries[n]=this.entries[n]||{callbacks:[]};if(v.result){const[x,R]=v.result;return this.scheduler?this.scheduler.add(()=>{m(x,R)},l):m(x,R),()=>{}}return v.callbacks.push(m),v.cancel||(v.cancel=u((x,R)=>{v.result=[x,R];for(const N of v.callbacks)this.scheduler?this.scheduler.add(()=>{N(x,R)},l):N(x,R);setTimeout(()=>delete this.entries[n],3e3)})),()=>{v.result||(v.callbacks=v.callbacks.filter(x=>x!==m),v.callbacks.length||(v.cancel(),delete this.entries[n]))}}}function fh(a,n,l){const u=JSON.stringify(a.request);return a.data&&(this.deduped.entries[u]={result:[null,a.data]}),this.deduped.request(u,{type:"parseTile",isSymbolTile:a.isSymbolTile,zoom:a.tileZoom},m=>{const v=Be(a.request,(x,R,N,P)=>{x?m(x):R&&m(null,{vectorTile:l?void 0:new Ks.VectorTile(new Hl(R)),rawData:R,cacheControl:N,expires:P})});return()=>{v.cancel(),m()}},n)}r.ARRAY_TYPE=wr,r.AUTH_ERR_MSG=It,r.Aabb=Or,r.Actor=class{constructor(a,n,l){this.target=a,this.parent=n,this.mapId=l,this.callbacks={},this.cancelCallbacks={},Te(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=kn()?a:y,this.scheduler=new Dg}send(a,n,l,u,m=!1,v){const x=Math.round(1e18*Math.random()).toString(36).substring(0,10);l&&(l.metadata=v,this.callbacks[x]=l);const R=ni(this.globalScope)?void 0:[];return this.target.postMessage({id:x,type:a,hasCallback:!!l,targetMapId:u,mustQueue:m,sourceMapId:this.mapId,data:Os(n,R)},R),{cancel:()=>{l&&delete this.callbacks[x],this.target.postMessage({id:x,type:"<cancel>",targetMapId:u,sourceMapId:this.mapId})}}}receive(a){const n=a.data,l=n.id;if(l&&(!n.targetMapId||this.mapId===n.targetMapId))if(n.type==="<cancel>"){const u=this.cancelCallbacks[l];delete this.cancelCallbacks[l],u&&u.cancel()}else if(n.mustQueue||kn()){const u=this.callbacks[l];this.cancelCallbacks[l]=this.scheduler.add(()=>this.processTask(l,n),u&&u.metadata||{type:"message"})}else this.processTask(l,n)}processTask(a,n){if(n.type==="<response>"){const l=this.callbacks[a];delete this.callbacks[a],l&&(n.error?l(Ps(n.error)):l(null,Ps(n.data)))}else{const l=ni(this.globalScope)?void 0:[],u=n.hasCallback?(v,x)=>{delete this.cancelCallbacks[a],this.target.postMessage({id:a,type:"<response>",sourceMapId:this.mapId,error:v?Os(v):null,data:Os(x,l)},l)}:v=>{},m=Ps(n.data);if(this.parent[n.type])this.parent[n.type](n.sourceMapId,m,u);else if(this.parent.getWorkerSource){const v=n.type.split(".");this.parent.getWorkerSource(n.sourceMapId,v[0],m.source)[v[1]](m,u)}else u(new Error(`Could not find function ${n.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},r.CanonicalTileID=fu,r.Color=Pt,r.ColorMode=bo,r.CullFaceMode=oo,r.DEMData=Mu,r.DataConstantProperty=et,r.DedupedRequest=ph,r.DepthMode=Ya,r.EXTENT=mn,r.Elevation=class{isDataAvailableAtPoint(a){const n=this._source();if(!n||a.y<0||a.y>1)return!1;const l=n.getSource().maxzoom,u=1<<l,m=Math.floor(a.x),v=Math.floor((a.x-m)*u),x=Math.floor(a.y*u),R=this.findDEMTileFor(new cr(l,m,l,v,x));return!(!R||!R.dem)}getAtPointOrZero(a,n=0){return this.getAtPoint(a,n)||0}getAtPoint(a,n,l=!0){n==null&&(n=null);const u=this._source();if(!u||a.y<0||a.y>1)return n;const m=u.getSource().maxzoom,v=1<<m,x=Math.floor(a.x),R=a.x-x,N=new cr(m,x,m,Math.floor(R*v),Math.floor(a.y*v)),P=this.findDEMTileFor(N);if(!P||!P.dem)return n;const G=P.dem,H=1<<P.tileID.canonical.z,K=(R*H-P.tileID.canonical.x)*G.dim,X=(a.y*H-P.tileID.canonical.y)*G.dim,Q=Math.floor(K),se=Math.floor(X);return(l?this.exaggeration():1)*qn(qn(G.get(Q,se),G.get(Q,se+1),X-se),qn(G.get(Q+1,se),G.get(Q+1,se+1),X-se),K-Q)}getAtTileOffset(a,n,l){const u=1<<a.canonical.z;return this.getAtPointOrZero(new Da(a.wrap+(a.canonical.x+n/mn)/u,(a.canonical.y+l/mn)/u))}getAtTileOffsetFunc(a,n,l,u){return m=>{const v=this.getAtTileOffset(a,m.x,m.y),x=u.upVector(a.canonical,m.x,m.y);return ho(x,x,v*u.upVectorScale(a.canonical,n,l).metersToTile),x}}getForTilePoints(a,n,l,u){const m=Iu.create(this,a,u);return!!m&&(n.forEach(v=>{v[2]=this.exaggeration()*m.getElevationAt(v[0],v[1],l)}),!0)}getMinMaxForTile(a){const n=this.findDEMTileFor(a);if(!n||!n.dem)return null;const l=n.dem.tree,u=n.tileID,m=1<<a.canonical.z-u.canonical.z;let v=a.canonical.x/m-u.canonical.x,x=a.canonical.y/m-u.canonical.y,R=0;for(let N=0;N<a.canonical.z-u.canonical.z&&!l.leaves[R];N++){v*=2,x*=2;const P=2*Math.floor(x)+Math.floor(v);R=l.childOffsets[R]+P,v%=1,x%=1}return{min:this.exaggeration()*l.minimums[R],max:this.exaggeration()*l.maximums[R]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(a,n,l){throw new Error("Pure virtual method called.")}pointCoordinate(a){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(a){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},r.ErrorEvent=ui,r.EvaluationParameters=ge,r.Event=Bn,r.Evented=Jn,r.FillExtrusionBucket=Ul,r.Frustum=ld,r.FrustumCorners=ad,r.GLOBE_METERS_TO_ECEF=kd,r.GLOBE_RADIUS=Ws,r.GLOBE_SCALE_MATCH_LATITUDE=45,r.GLOBE_ZOOM_THRESHOLD_MAX=6,r.GLOBE_ZOOM_THRESHOLD_MIN=5,r.GlobeSharedBuffers=class{constructor(a){this._createGrid(a),this._createPoles(a)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const a of this._poleSegments)a.destroy();for(const a of this._gridSegments)a.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const a of this._wireframeSegments)a.destroy()}}_createGrid(a){const n=new fn,l=new Gn,u=65;for(let m=0;m<u;m++)for(let v=0;v<u;v++)n.emplaceBack(v,m);this._gridSegments=[];for(let m=0,v=0;m<Wa.length;m++){const x=Wa[m];for(let N=0;N<x;N++)for(let P=0;P<64;P++){const G=N*u+P;l.emplaceBack(G+1,G,G+u),l.emplaceBack(G+u,G+u+1,G+1)}const R=64*x*2;this._gridSegments.push(Ii.simpleSegment(0,v,(x+1)*u,R)),v+=R}this._gridBuffer=a.createVertexBuffer(n,Zl.members),this._gridIndexBuffer=a.createIndexBuffer(l,!0)}_createPoles(a){const n=new Gn;for(let m=0;m<=64;m++)n.emplaceBack(0,m+1,m+2);this._poleIndexBuffer=a.createIndexBuffer(n,!0);const l=new rs,u=new rs;this._poleSegments=[];for(let m=0,v=0;m<5;m++){const x=1<<m,R=512*x/Math.PI/2,N=360/x;l.emplaceBack(0,-R,0,0,0,.5,0),u.emplaceBack(0,-R,0,0,0,.5,1);for(let P=0;P<=64;P++){const G=P/64,H=qn(0,N,G),[K,X,Q]=Of(_g,vg,H,R);l.emplaceBack(K,X,Q,0,0,G,0),u.emplaceBack(K,X,Q,0,0,G,1)}this._poleSegments.push(Ii.simpleSegment(v,0,66,64)),v+=66}this._poleNorthVertexBuffer=a.createVertexBuffer(l,If,!1),this._poleSouthVertexBuffer=a.createVertexBuffer(u,If,!1)}getGridBuffers(a){return[this._gridBuffer,this._gridIndexBuffer,this._gridSegments[a]]}getPoleBuffers(a){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[a]]}getWirefameBuffers(a,n){if(!this._wireframeSegments){const l=new Pi,u=64,m=u+1;this._wireframeSegments=[];for(let v=0,x=0;v<Wa.length;v++){const R=Wa[v];for(let P=0;P<R;P++)for(let G=0;G<u;G++){const H=P*m+G;l.emplaceBack(H,H+1),l.emplaceBack(H,H+m),l.emplaceBack(H,H+m+1)}const N=R*u*3;this._wireframeSegments.push(Ii.simpleSegment(0,x,(R+1)*m,N)),x+=N}this._wireframeIndexBuffer=a.createIndexBuffer(l)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[n]]}},r.GlyphManager=Ha,r.ImagePosition=bd,r.LineAtlas=Pd,r.LngLat=li,r.LngLatBounds=ls,r.LocalGlyphMode=Cd,r.MAX_MERCATOR_LATITUDE=po,r.MercatorCoordinate=Da,r.ONE_EM=Qi,r.OverscaledTileID=cr,r.Properties=ht,r.RGBAImage=Cr,r.Ray=sd,r.RequestManager=class{constructor(a,n,l){this._transformRequestFn=a,this._customAccessToken=n,this._silenceAuthErrors=!!l,this._createSkuToken()}_createSkuToken(){const a=function(){let n="";for(let l=0;l<10;l++)n+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Et,n].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=a.token,this._skuTokenExpiresAt=a.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(a,n){return this._transformRequestFn&&this._transformRequestFn(a,n)||{url:a}}normalizeStyleURL(a,n){if(!dn(a))return a;const l=oi(a);return l.path=`/styles/v1${l.path}`,this._makeAPIURL(l,this._customAccessToken||n)}normalizeGlyphsURL(a,n){if(!dn(a))return a;const l=oi(a);return l.path=`/fonts/v1${l.path}`,this._makeAPIURL(l,this._customAccessToken||n)}normalizeSourceURL(a,n,l,u){if(!dn(a))return a;const m=oi(a);return m.path=`/v4/${m.authority}.json`,m.params.push("secure"),l&&m.params.push(`language=${l}`),u&&m.params.push(`worldview=${u}`),this._makeAPIURL(m,this._customAccessToken||n)}normalizeSpriteURL(a,n,l,u){const m=oi(a);return dn(a)?(m.path=`/styles/v1${m.path}/sprite${n}${l}`,this._makeAPIURL(m,this._customAccessToken||u)):(m.path+=`${n}${l}`,Ui(m))}normalizeTileURL(a,n,l){if(this._isSkuTokenExpired()&&this._createSkuToken(),a&&!dn(a))return a;const u=oi(a);u.path=u.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${n||l&&u.authority!=="raster"&&l===512?"@2x":""}${vt.supported?".webp":"$1"}`),u.authority==="raster"?u.path=`/${Ue.RASTER_URL_PREFIX}${u.path}`:(u.path=u.path.replace(/^.+\/v4\//,"/"),u.path=`/${Ue.TILE_URL_VERSION}${u.path}`);const m=this._customAccessToken||function(v){for(const x of v){const R=x.match(/^access_token=(.*)$/);if(R)return R[1]}return null}(u.params)||Ue.ACCESS_TOKEN;return Ue.REQUIRE_ACCESS_TOKEN&&m&&this._skuToken&&u.params.push(`sku=${this._skuToken}`),this._makeAPIURL(u,m)}canonicalizeTileURL(a,n){const l=oi(a);if(!l.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!l.path.match(/\.[\w]+$/))return a;let u="mapbox://";l.path.match(/^\/raster\/v1\//)?u+=`raster/${l.path.replace(`/${Ue.RASTER_URL_PREFIX}/`,"")}`:u+=`tiles/${l.path.replace(`/${Ue.TILE_URL_VERSION}/`,"")}`;let m=l.params;return n&&(m=m.filter(v=>!v.match(/^access_token=/))),m.length&&(u+=`?${m.join("&")}`),u}canonicalizeTileset(a,n){const l=!!n&&dn(n),u=[];for(const m of a.tiles||[])gn(m)?u.push(this.canonicalizeTileURL(m,l)):u.push(m);return u}_makeAPIURL(a,n){const l="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",u=oi(Ue.API_URL);if(a.protocol=u.protocol,a.authority=u.authority,a.protocol==="http"){const m=a.params.indexOf("secure");m>=0&&a.params.splice(m,1)}if(u.path!=="/"&&(a.path=`${u.path}${a.path}`),!Ue.REQUIRE_ACCESS_TOKEN)return Ui(a);if(n=n||Ue.ACCESS_TOKEN,!this._silenceAuthErrors){if(!n)throw new Error(`An API access token is required to use Mapbox GL. ${l}`);if(n[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${l}`)}return a.params=a.params.filter(m=>m.indexOf("access_token")===-1),a.params.push(`access_token=${n||""}`),Ui(a)}},r.ResourceType=ke,r.SegmentVector=Ii,r.SourceCache=Ys,r.StencilMode=zd,r.StructArrayLayout1ui2=jr,r.StructArrayLayout2f1f2i16=ii,r.StructArrayLayout2i4=fn,r.StructArrayLayout2ui4=Pi,r.StructArrayLayout3f12=Hi,r.StructArrayLayout3ui6=Gn,r.StructArrayLayout4i8=nn,r.StructArrayLayout5f20=os,r.Texture=tc,r.Tile=Dd,r.Transitionable=Ee,r.Uniform1f=Zc,r.Uniform1i=class extends Oo{constructor(a,n){super(a,n),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},r.Uniform2f=class extends Oo{constructor(a,n){super(a,n),this.current=[0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1]))}},r.Uniform3f=class extends Oo{constructor(a,n){super(a,n),this.current=[0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2]))}},r.Uniform4f=dp,r.UniformColor=pp,r.UniformMatrix2f=class extends Oo{constructor(a,n){super(a,n),this.current=Th}set(a){for(let n=0;n<4;n++)if(a[n]!==this.current[n]){this.current=a,this.gl.uniformMatrix2fv(this.location,!1,a);break}}},r.UniformMatrix3f=class extends Oo{constructor(a,n){super(a,n),this.current=Sh}set(a){for(let n=0;n<9;n++)if(a[n]!==this.current[n]){this.current=a,this.gl.uniformMatrix3fv(this.location,!1,a);break}}},r.UniformMatrix4f=class extends Oo{constructor(a,n){super(a,n),this.current=Ch}set(a){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let n=1;n<16;n++)if(a[n]!==this.current[n]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}},r.UnwrappedTileID=Jp,r.ValidationError=Wt,r.VectorTileWorkerSource=class extends Jn{constructor(a,n,l,u,m){super(),this.actor=a,this.layerIndex=n,this.availableImages=l,this.loadVectorData=m||fh,this.loading={},this.loaded={},this.deduped=new ph(a.scheduler),this.isSpriteLoaded=u,this.scheduler=a.scheduler}loadTile(a,n){const l=a.uid,u=a&&a.request,m=u&&u.collectResourceTiming,v=this.loading[l]=new Ug(a);v.abort=this.loadVectorData(a,(x,R)=>{const N=!this.loading[l];if(delete this.loading[l],N||x||!R)return v.status="done",N||(this.loaded[l]=v),n(x);const P=R.rawData,G={};R.expires&&(G.expires=R.expires),R.cacheControl&&(G.cacheControl=R.cacheControl),v.vectorTile=R.vectorTile||new Ks.VectorTile(new Hl(P));const H=()=>{v.parse(v.vectorTile,this.layerIndex,this.availableImages,this.actor,(K,X)=>{if(K||!X)return n(K);const Q={};if(m){const se=yi(u);se.length>0&&(Q.resourceTiming=JSON.parse(JSON.stringify(se)))}n(null,we({rawTileData:P.slice(0)},X,G,Q))})};this.isSpriteLoaded?H():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(H,{type:"parseTile",isSymbolTile:a.isSymbolTile,zoom:a.tileZoom}):H()}),this.loaded=this.loaded||{},this.loaded[l]=v})}reloadTile(a,n){const l=this.loaded,u=a.uid,m=this;if(l&&l[u]){const v=l[u];v.showCollisionBoxes=a.showCollisionBoxes,v.enableTerrain=!!a.enableTerrain,v.projection=a.projection,v.tileTransform=Zs(a.tileID.canonical,a.projection);const x=(R,N)=>{const P=v.reloadCallback;P&&(delete v.reloadCallback,v.parse(v.vectorTile,m.layerIndex,this.availableImages,m.actor,P)),n(R,N)};v.status==="parsing"?v.reloadCallback=x:v.status==="done"&&(v.vectorTile?v.parse(v.vectorTile,this.layerIndex,this.availableImages,this.actor,x):x())}}abortTile(a,n){const l=a.uid,u=this.loading[l];u&&(u.abort&&u.abort(),delete this.loading[l]),n()}removeTile(a,n){const l=this.loaded,u=a.uid;l&&l[u]&&delete l[u],n()}},r.WritingMode=Pr,r.ZoomHistory=Dc,r.add=us,r.addDynamicAttributes=ku,r.adjoint=function(a,n){var l=n[0],u=n[1],m=n[2],v=n[3],x=n[4],R=n[5],N=n[6],P=n[7],G=n[8];return a[0]=x*G-R*P,a[1]=m*P-u*G,a[2]=u*R-m*x,a[3]=R*N-v*G,a[4]=l*G-m*N,a[5]=m*v-l*R,a[6]=v*P-x*N,a[7]=u*N-l*P,a[8]=l*x-u*v,a},r.asyncAll=ie,r.bezier=U,r.bindAll=Te,r.boundsAttributes=Xf,r.bufferConvexPolygon=function(a,n){const l=[];for(let u=0;u<a.length;u++){const m=re(u-1,-1,a.length-1),v=re(u+1,-1,a.length-1),x=a[u],R=a[v],N=a[m].sub(x).unit(),P=R.sub(x).unit(),G=P.angleWithSep(N.x,N.y),H=N.add(P).unit().mult(-1*n/Math.sin(G/2));l.push(x.add(H))}return l},r.cacheEntryPossiblyAdded=function(a){be++,be>Uo&&(a.getActor().send("enforceCacheSizeLimit",Yr),be=0)},r.calculateGlobeLabelMatrix=function(a,n){const{x:l,y:u}=a.point,m=Bf(l,u,a.worldSize/a._projectionScaler,0,0);return cs(m,m,Df(_o(n)))},r.calculateGlobeMatrix=function(a){const{x:n,y:l}=a.point,{lng:u,lat:m}=a._center;return Bf(n,l,a.worldSize,u,m)},r.calculateGlobeMercatorMatrix=function(a){const n=a.worldSize,l=a.point,u=Gr(1,a.center.lat)*n,m=a.pixelsPerMeter,v=n/(u/a.pixelsPerMeter),x=Er(new Float64Array(16));return qs(x,x,[l.x,l.y,0]),fo(x,x,[v,v,m]),Float32Array.from(x)},r.circumferenceAtLatitude=Yu,r.clamp=W,r.clearTileCache=function(a){const n=[];for(const l in Gi)n.push(y.caches.delete(l)),delete Gi[l];a&&Promise.all(n).catch(a).then(()=>a())},r.clipLine=Cf,r.clone=function(a){var n=new wr(16);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[4]=a[4],n[5]=a[5],n[6]=a[6],n[7]=a[7],n[8]=a[8],n[9]=a[9],n[10]=a[10],n[11]=a[11],n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15],n},r.clone$1=Nt,r.collisionCircleLayout=Pm,r.config=Ue,r.conjugate=function(a,n){return a[0]=-n[0],a[1]=-n[1],a[2]=-n[2],a[3]=n[3],a},r.create=function(){var a=new wr(16);return wr!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},r.create$1=Sp,r.createExpression=Ro,r.createLayout=Bt,r.createStyleLayer=function(a){return a.type==="custom"?new Ng(a):new Og[a.type](a)},r.cross=od,r.degToRad=D,r.distance=function(a,n){return Math.hypot(n[0]-a[0],n[1]-a[1],n[2]-a[2])},r.div=function(a,n,l){return a[0]=n[0]/l[0],a[1]=n[1]/l[1],a[2]=n[2]/l[2],a},r.dot=qr,r.ease=Z,r.easeCubicInOut=z,r.emitValidationErrors=Lc,r.endsWith=ze,r.enforceCacheSizeLimit=function(a){for(const n in Gi)ye(n),Gi[n].then(l=>{l.keys().then(u=>{for(let m=0;m<u.length-a;m++)l.delete(u[m])})})},r.evaluateSizeForFeature=gu,r.evaluateSizeForZoom=Ua,r.evaluateVariableOffset=Rf,r.evented=pe,r.exactEquals=function(a,n){return a[0]===n[0]&&a[1]===n[1]&&a[2]===n[2]&&a[3]===n[3]},r.exactEquals$1=function(a,n){return a[0]===n[0]&&a[1]===n[1]&&a[2]===n[2]},r.exported=mt,r.exported$1=vt,r.extend=we,r.extend$1=rr,r.fillExtrusionHeightLift=Zp,r.filterObject=ut,r.fromMat4=function(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[4],a[4]=n[5],a[5]=n[6],a[6]=n[8],a[7]=n[9],a[8]=n[10],a},r.fromQuat=function(a,n){var l=n[0],u=n[1],m=n[2],v=n[3],x=l+l,R=u+u,N=m+m,P=l*x,G=u*x,H=u*R,K=m*x,X=m*R,Q=m*N,se=v*x,he=v*R,xe=v*N;return a[0]=1-H-Q,a[1]=G+xe,a[2]=K-he,a[3]=0,a[4]=G-xe,a[5]=1-P-Q,a[6]=X+se,a[7]=0,a[8]=K+he,a[9]=X-se,a[10]=1-P-H,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},r.fromRotation=function(a,n){var l=Math.sin(n),u=Math.cos(n);return a[0]=u,a[1]=l,a[2]=0,a[3]=-l,a[4]=u,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},r.fromScaling=function(a,n){return a[0]=n[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=n[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=n[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},r.furthestTileCorner=function(a){const n=Math.round((a+45+360)%360/90)%4;return V[n]},r.getAABBPointSquareDist=function(a,n,l){let u=0;for(let m=0;m<2;++m){const v=l?l[m]:0;a[m]>v&&(u+=(a[m]-v)*(a[m]-v)),n[m]<v&&(u+=(v-n[m])*(v-n[m]))}return u},r.getAnchorAlignment=Ed,r.getAnchorJustification=Td,r.getBounds=function(a){let n=1/0,l=1/0,u=-1/0,m=-1/0;for(const v of a)n=Math.min(n,v.x),l=Math.min(l,v.y),u=Math.max(u,v.x),m=Math.max(m,v.y);return{min:new k(n,l),max:new k(u,m)}},r.getColumn=Ln,r.getGridMatrix=function(a,n,l){const[u,m]=n,v=.015625;return[0,(m[1]-u[1])*v,1<<a.z,(m[0]-u[0])/Wa[l],0,a.y,u[0],u[1],v]},r.getImage=ln,r.getJSON=function(a,n){return We(we(a,{type:"json"}),n)},r.getLatitudinalLod=function(a){const n=80.051129;a=W(a,-80.051129,n)/n*90;const l=Math.pow(Math.abs(Math.sin(D(a))),3);return Math.round(l*(Wa.length-1))},r.getMapSessionAPI=bs,r.getPerformanceMeasurement=yi,r.getProjection=Hf,r.getRTLTextPluginStatus=le,r.getReferrer=Ye,r.getTilePoint=function(a,{x:n,y:l},u=0){return new k(((n-u)*a.scale-a.x)*mn,(l*a.scale-a.y)*mn)},r.getTileVec3=function(a,n,l=0){return za(((n.x-l)*a.scale-a.x)*mn,(n.y*a.scale-a.y)*mn,mp(n.z,n.y))},r.getVideo=function(a,n){const l=y.document.createElement("video");l.muted=!0,l.onloadstart=function(){n(null,l)};for(let u=0;u<a.length;u++){const m=y.document.createElement("source");jt(a[u])||(l.crossOrigin="Anonymous"),m.src=a[u],l.appendChild(m)}return{cancel:()=>{}}},r.globeCenterToScreenPoint=function(a){const n=[0,0,0],l=Er(new Float64Array(16));return cs(l,a.pixelMatrix,a.globeMatrix),Ji(n,n,l),new k(n[0],n[1])},r.globeECEFOrigin=function(a,n){const l=[0,0,0];return Ji(l,l,Yl(_o(n.canonical))),Ji(l,l,a),l},r.globeNormalizeECEF=Yl,r.globePixelsToTileUnits=function(a,n){return mn/(512*Math.pow(2,a))*Eu(_o(n))},r.globePoleMatrixForTile=function(a,n,l){const u=Er(new Float64Array(16)),m=1<<a,v=360*(n/m-.5),x=l.point,R=l.worldSize/(l.tileSize*m);return qs(u,u,[x.x,x.y,-l.worldSize/Math.PI/2]),fo(u,u,[R,R,R]),tu(u,u,D(-l._center.lat)),nu(u,u,D(-l._center.lng+v)),Float32Array.from(u)},r.globeTileBounds=_o,r.globeTileLatLngCorners=$d,r.globeTiltAtLngLat=zf,r.globeToMercatorTransition=Md,r.globeUseCustomAntiAliasing=function(a,n,l){const u=Md(l.zoom),m=a.style.map._antialias,v=!!n.extStandardDerivatives,x=n.extStandardDerivativesForceOff||a.terrain&&a.terrain.exaggeration()>0;return u===0&&!m&&!x&&v},r.identity=Er,r.identity$1=Ip,r.invert=function(a,n){var l=n[0],u=n[1],m=n[2],v=n[3],x=n[4],R=n[5],N=n[6],P=n[7],G=n[8],H=n[9],K=n[10],X=n[11],Q=n[12],se=n[13],he=n[14],xe=n[15],Ie=l*R-u*x,Me=l*N-m*x,Pe=l*P-v*x,Fe=u*N-m*R,je=u*P-v*R,ot=m*P-v*N,lt=G*se-H*Q,_t=G*he-K*Q,kt=G*xe-X*Q,Je=H*he-K*se,gt=H*xe-X*se,Rt=K*xe-X*he,$t=Ie*Rt-Me*gt+Pe*Je+Fe*kt-je*_t+ot*lt;return $t?(a[0]=(R*Rt-N*gt+P*Je)*($t=1/$t),a[1]=(m*gt-u*Rt-v*Je)*$t,a[2]=(se*ot-he*je+xe*Fe)*$t,a[3]=(K*je-H*ot-X*Fe)*$t,a[4]=(N*kt-x*Rt-P*_t)*$t,a[5]=(l*Rt-m*kt+v*_t)*$t,a[6]=(he*Pe-Q*ot-xe*Me)*$t,a[7]=(G*ot-K*Pe+X*Me)*$t,a[8]=(x*gt-R*kt+P*lt)*$t,a[9]=(u*kt-l*gt-v*lt)*$t,a[10]=(Q*je-se*Pe+xe*Ie)*$t,a[11]=(H*Pe-G*je-X*Ie)*$t,a[12]=(R*_t-x*Je-N*lt)*$t,a[13]=(l*Je-u*_t+m*lt)*$t,a[14]=(se*Me-Q*Fe-he*Ie)*$t,a[15]=(G*Fe-H*Me+K*Ie)*$t,a):null},r.isLngLatBehindGlobe=function(a,n){return zf(a,n)>Math.PI/2*1.01},r.isMapAuthenticated=function(a){return Rr.has(a)},r.isMapboxURL=dn,r.isSafariWithAntialiasingBug=function(a){const n=a.navigator?a.navigator.userAgent:null;return!!ni(a)&&n&&(n.match("Version/15.4")||n.match("Version/15.5")||n.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},r.latFromMercatorY=Bi,r.len=jh,r.length=Ll,r.length$1=function(a){return Math.hypot(a[0],a[1],a[2],a[3])},r.loadVectorTile=fh,r.makeRequest=We,r.mapValue=function(a,n,l,u,m){return W((a-n)/(l-n)*(m-u)+u,u,m)},r.mercatorXfromLng=Vs,r.mercatorYfromLat=Us,r.mercatorZfromAltitude=Gr,r.mul=Vh,r.mul$1=Uh,r.multiply=cs,r.multiply$1=function(a,n,l){var u=n[0],m=n[1],v=n[2],x=n[3],R=n[4],N=n[5],P=n[6],G=n[7],H=n[8],K=l[0],X=l[1],Q=l[2],se=l[3],he=l[4],xe=l[5],Ie=l[6],Me=l[7],Pe=l[8];return a[0]=K*u+X*x+Q*P,a[1]=K*m+X*R+Q*G,a[2]=K*v+X*N+Q*H,a[3]=se*u+he*x+xe*P,a[4]=se*m+he*R+xe*G,a[5]=se*v+he*N+xe*H,a[6]=Ie*u+Me*x+Pe*P,a[7]=Ie*m+Me*R+Pe*G,a[8]=Ie*v+Me*N+Pe*H,a},r.multiply$2=kp,r.nextPowerOfTwo=Ge,r.normalize=lr,r.normalize$1=function(a,n){var l=n[0],u=n[1],m=n[2],v=n[3],x=l*l+u*u+m*m+v*v;return x>0&&(x=1/Math.sqrt(x)),a[0]=l*x,a[1]=u*x,a[2]=m*x,a[3]=v*x,a},r.number=qn,r.ortho=function(a,n,l,u,m,v,x){var R=1/(n-l),N=1/(u-m),P=1/(v-x);return a[0]=-2*R,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*N,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*P,a[11]=0,a[12]=(n+l)*R,a[13]=(m+u)*N,a[14]=(x+v)*P,a[15]=1,a},r.pbf=Hl,r.perspective=function(a,n,l,u,m){var v,x=1/Math.tan(n/2);return a[0]=x/l,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=x,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,m!=null&&m!==1/0?(a[10]=(m+u)*(v=1/(u-m)),a[14]=2*m*u*v):(a[10]=-1,a[14]=-2*u),a},r.pick=function(a,n){const l={};for(let u=0;u<n.length;u++){const m=n[u];m in a&&(l[m]=a[m])}return l},r.plugin=ce,r.pointGeometry=k,r.polygonContainsPoint=Gs,r.polygonIntersectsBox=wp,r.polygonIntersectsPolygon=vp,r.polygonizeBounds=function(a,n,l=0,u=!0){const m=new k(l,l),v=a.sub(m),x=n.add(m),R=[v,new k(x.x,v.y),x,new k(v.x,x.y)];return u&&R.push(v.clone()),R},r.posAttributes=Zl,r.postMapLoadEvent=Zr,r.postTurnstileEvent=Ti,r.potpack=yd,r.prevPowerOfTwo=function(a){return a<=1?1:Math.pow(2,Math.floor(Math.log(a)/Math.LN2))},r.radToDeg=O,r.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],r.registerForPluginStateChange=function(a){return a({pluginStatus:J,pluginURL:te}),pe.on("pluginStateChange",a),a},r.removeAuthState=function(a){Rr.delete(a)},r.renderColorRamp=ud,r.resample=gp,r.rotateX=tu,r.rotateX$1=Np,r.rotateY=nu,r.rotateY$1=Lp,r.rotateZ=function(a,n,l){var u=Math.sin(l),m=Math.cos(l),v=n[0],x=n[1],R=n[2],N=n[3],P=n[4],G=n[5],H=n[6],K=n[7];return n!==a&&(a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[0]=v*m+P*u,a[1]=x*m+G*u,a[2]=R*m+H*u,a[3]=N*m+K*u,a[4]=P*m-v*u,a[5]=G*m-x*u,a[6]=H*m-R*u,a[7]=K*m-N*u,a},r.rotateZ$1=function(a,n,l){l*=.5;var u=n[0],m=n[1],v=n[2],x=n[3],R=Math.sin(l),N=Math.cos(l);return a[0]=u*N+m*R,a[1]=m*N-u*R,a[2]=v*N+x*R,a[3]=x*N-v*R,a},r.scale=fo,r.scale$1=$p,r.scale$2=ho,r.scaleAndAdd=ou,r.setCacheLimits=function(a,n){Yr=a,Uo=n},r.setColumn=function(a,n,l){a[4*n+0]=l[0],a[4*n+1]=l[1],a[4*n+2]=l[2],a[4*n+3]=l[3]},r.setRTLTextPlugin=function(a,n,l=!1){if(J===F||J===j||J===q)throw new Error("setRTLTextPlugin cannot be called multiple times.");te=mt.resolveURL(a),J=F,Y=n,ue(),l||Se()},r.smoothstep=ne,r.spec=qe,r.storeAuthState=function(a,n){n?Rr.add(a):Rr.delete(a)},r.sub=Hr,r.subtract=rd,r.symbolSize=Dm,r.tileAABB=function(a,n,l,u,m,v,x,R,N){if(N.name==="globe")return gg(a,n,new fu(l,u,m));const P=Zs({z:l,x:u,y:m},N);return new Or([(v+P.x/P.scale)*n,n*(P.y/P.scale),x],[(v+P.x2/P.scale)*n,n*(P.y2/P.scale),R])},r.tileTransform=Zs,r.transformMat3=function(a,n,l){var u=n[0],m=n[1],v=n[2];return a[0]=u*l[0]+m*l[3]+v*l[6],a[1]=u*l[1]+m*l[4]+v*l[7],a[2]=u*l[2]+m*l[5]+v*l[8],a},r.transformMat4=Ji,r.transformMat4$1=Hs,r.transformQuat=Rp,r.translate=qs,r.transpose=function(a,n){if(a===n){var l=n[1],u=n[2],m=n[5];a[1]=n[3],a[2]=n[6],a[3]=l,a[5]=n[7],a[6]=u,a[7]=m}else a[0]=n[0],a[1]=n[3],a[2]=n[6],a[3]=n[1],a[4]=n[4],a[5]=n[7],a[6]=n[2],a[7]=n[5],a[8]=n[8];return a},r.triggerPluginCompletionEvent=ae,r.uniqueId=de,r.updateGlobeVertexNormal=function(a,n,l,u,m){const v=5*n+2;a.float32[v+0]=l,a.float32[v+1]=u,a.float32[v+2]=m},r.validateCustomStyleLayer=function(a){const n=[],l=a.id;return l===void 0&&n.push({message:`layers.${l}: missing required property "id"`}),a.render===void 0&&n.push({message:`layers.${l}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&n.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),n},r.validateFilter=a=>Nr(yl(a)),r.validateFog=a=>Nr($c(a)),r.validateLayer=a=>Nr(kc(a)),r.validateLight=a=>Nr(bl(a)),r.validateSource=a=>Nr(Rc(a)),r.validateStyle=Ic,r.validateTerrain=a=>Nr(xl(a)),r.values=Ce,r.vectorTile=Ks,r.version=Ei,r.warnOnce=un,r.window=y,r.wrap=re}),d(["./shared"],function(r){function y(ye){if(typeof ye=="number"||typeof ye=="boolean"||typeof ye=="string"||ye==null)return JSON.stringify(ye);if(Array.isArray(ye)){let oe="[";for(const be of ye)oe+=`${y(be)},`;return`${oe}]`}let ee="{";for(const oe of Object.keys(ye).sort())ee+=`${oe}:${y(ye[oe])},`;return`${ee}}`}function E(ye){let ee="";for(const oe of r.refProperties)ee+=`/${y(ye[oe])}`;return ee}class w{constructor(ee){this.keyCache={},ee&&this.replace(ee)}replace(ee){this._layerConfigs={},this._layers={},this.update(ee,[])}update(ee,oe){for(const ke of ee)this._layerConfigs[ke.id]=ke,(this._layers[ke.id]=r.createStyleLayer(ke)).compileFilter(),this.keyCache[ke.id]&&delete this.keyCache[ke.id];for(const ke of oe)delete this.keyCache[ke],delete this._layerConfigs[ke],delete this._layers[ke];this.familiesBySource={};const be=function(ke,Oe){const Ye={};for(let Be=0;Be<ke.length;Be++){const Xe=Oe&&Oe[ke[Be].id]||E(ke[Be]);Oe&&(Oe[ke[Be].id]=Xe);let xt=Ye[Xe];xt||(xt=Ye[Xe]=[]),xt.push(ke[Be])}const We=[];for(const Be in Ye)We.push(Ye[Be]);return We}(r.values(this._layerConfigs),this.keyCache);for(const ke of be){const Oe=ke.map(jt=>this._layers[jt.id]),Ye=Oe[0];if(Ye.visibility==="none")continue;const We=Ye.source||"";let Be=this.familiesBySource[We];Be||(Be=this.familiesBySource[We]={});const Xe=Ye.sourceLayer||"_geojsonTileLayer";let xt=Be[Xe];xt||(xt=Be[Xe]=[]),xt.push(Oe)}}}class k{loadTile(ee,oe){const{uid:be,encoding:ke,rawImageData:Oe,padding:Ye,buildQuadTree:We}=ee,Be=r.window.ImageBitmap&&Oe instanceof r.window.ImageBitmap?this.getImageData(Oe,Ye):Oe;oe(null,new r.DEMData(be,Be,ke,Ye<1,We))}getImageData(ee,oe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ee.width,ee.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=ee.width,this.offscreenCanvas.height=ee.height,this.offscreenCanvasContext.drawImage(ee,0,0,ee.width,ee.height);const be=this.offscreenCanvasContext.getImageData(-oe,-oe,ee.width+2*oe,ee.height+2*oe);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),be}}var S=function ye(ee,oe){var be,ke=ee&&ee.type;if(ke==="FeatureCollection")for(be=0;be<ee.features.length;be++)ye(ee.features[be],oe);else if(ke==="GeometryCollection")for(be=0;be<ee.geometries.length;be++)ye(ee.geometries[be],oe);else if(ke==="Feature")ye(ee.geometry,oe);else if(ke==="Polygon")I(ee.coordinates,oe);else if(ke==="MultiPolygon")for(be=0;be<ee.coordinates.length;be++)I(ee.coordinates[be],oe);return ee};function I(ye,ee){if(ye.length!==0){L(ye[0],ee);for(var oe=1;oe<ye.length;oe++)L(ye[oe],!ee)}}function L(ye,ee){for(var oe=0,be=0,ke=0,Oe=ye.length,Ye=Oe-1;ke<Oe;Ye=ke++){var We=(ye[ke][0]-ye[Ye][0])*(ye[Ye][1]+ye[ke][1]),Be=oe+We;be+=Math.abs(oe)>=Math.abs(We)?oe-Be+We:We-Be+oe,oe=Be}oe+be>=0!=!!ee&&ye.reverse()}const D=r.vectorTile.VectorTileFeature.prototype.toGeoJSON;class O{constructor(ee){this._feature=ee,this.extent=r.EXTENT,this.type=ee.type,this.properties=ee.tags,"id"in ee&&!isNaN(ee.id)&&(this.id=parseInt(ee.id,10))}loadGeometry(){if(this._feature.type===1){const ee=[];for(const oe of this._feature.geometry)ee.push([new r.pointGeometry(oe[0],oe[1])]);return ee}{const ee=[];for(const oe of this._feature.geometry){const be=[];for(const ke of oe)be.push(new r.pointGeometry(ke[0],ke[1]));ee.push(be)}return ee}}toGeoJSON(ee,oe,be){return D.call(this,ee,oe,be)}}class V{constructor(ee){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=r.EXTENT,this.length=ee.length,this._features=ee}feature(ee){return new O(this._features[ee])}}var z=r.vectorTile.VectorTileFeature,U=Z;function Z(ye,ee){this.options=ee||{},this.features=ye,this.length=ye.length}function W(ye,ee){this.id=typeof ye.id=="number"?ye.id:void 0,this.type=ye.type,this.rawGeometry=ye.type===1?[ye.geometry]:ye.geometry,this.properties=ye.tags,this.extent=ee||4096}Z.prototype.feature=function(ye){return new W(this.features[ye],this.options.extent)},W.prototype.loadGeometry=function(){var ye=this.rawGeometry;this.geometry=[];for(var ee=0;ee<ye.length;ee++){for(var oe=ye[ee],be=[],ke=0;ke<oe.length;ke++)be.push(new r.pointGeometry(oe[ke][0],oe[ke][1]));this.geometry.push(be)}return this.geometry},W.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ye=this.geometry,ee=1/0,oe=-1/0,be=1/0,ke=-1/0,Oe=0;Oe<ye.length;Oe++)for(var Ye=ye[Oe],We=0;We<Ye.length;We++){var Be=Ye[We];ee=Math.min(ee,Be.x),oe=Math.max(oe,Be.x),be=Math.min(be,Be.y),ke=Math.max(ke,Be.y)}return[ee,be,oe,ke]},W.prototype.toGeoJSON=z.prototype.toGeoJSON;var ne=ie,re=U;function ie(ye){var ee=new r.pbf;return function(oe,be){for(var ke in oe.layers)be.writeMessage(3,Ce,oe.layers[ke])}(ye,ee),ee.finish()}function Ce(ye,ee){var oe;ee.writeVarintField(15,ye.version||1),ee.writeStringField(1,ye.name||""),ee.writeVarintField(5,ye.extent||4096);var be={keys:[],values:[],keycache:{},valuecache:{}};for(oe=0;oe<ye.length;oe++)be.feature=ye.feature(oe),ee.writeMessage(2,we,be);var ke=be.keys;for(oe=0;oe<ke.length;oe++)ee.writeStringField(3,ke[oe]);var Oe=be.values;for(oe=0;oe<Oe.length;oe++)ee.writeMessage(4,wt,Oe[oe])}function we(ye,ee){var oe=ye.feature;oe.id!==void 0&&ee.writeVarintField(1,oe.id),ee.writeMessage(2,fe,ye),ee.writeVarintField(3,oe.type),ee.writeMessage(4,Ge,oe)}function fe(ye,ee){var oe=ye.feature,be=ye.keys,ke=ye.values,Oe=ye.keycache,Ye=ye.valuecache;for(var We in oe.properties){var Be=oe.properties[We],Xe=Oe[We];if(Be!==null){Xe===void 0&&(be.push(We),Oe[We]=Xe=be.length-1),ee.writeVarint(Xe);var xt=typeof Be;xt!=="string"&&xt!=="boolean"&&xt!=="number"&&(Be=JSON.stringify(Be));var jt=xt+":"+Be,Ct=Ye[jt];Ct===void 0&&(ke.push(Be),Ye[jt]=Ct=ke.length-1),ee.writeVarint(Ct)}}}function de(ye,ee){return(ee<<3)+(7&ye)}function Le(ye){return ye<<1^ye>>31}function Ge(ye,ee){for(var oe=ye.loadGeometry(),be=ye.type,ke=0,Oe=0,Ye=oe.length,We=0;We<Ye;We++){var Be=oe[We],Xe=1;be===1&&(Xe=Be.length),ee.writeVarint(de(1,Xe));for(var xt=be===3?Be.length-1:Be.length,jt=0;jt<xt;jt++){jt===1&&be!==1&&ee.writeVarint(de(2,xt-1));var Ct=Be[jt].x-ke,tn=Be[jt].y-Oe;ee.writeVarint(Le(Ct)),ee.writeVarint(Le(tn)),ke+=Ct,Oe+=tn}be===3&&ee.writeVarint(de(7,1))}}function wt(ye,ee){var oe=typeof ye;oe==="string"?ee.writeStringField(1,ye):oe==="boolean"?ee.writeBooleanField(7,ye):oe==="number"&&(ye%1!=0?ee.writeDoubleField(3,ye):ye<0?ee.writeSVarintField(6,ye):ee.writeVarintField(5,ye))}function Te(ye,ee,oe,be,ke,Oe){if(ke-be<=oe)return;const Ye=be+ke>>1;ze(ye,ee,Ye,be,ke,Oe%2),Te(ye,ee,oe,be,Ye-1,Oe+1),Te(ye,ee,oe,Ye+1,ke,Oe+1)}function ze(ye,ee,oe,be,ke,Oe){for(;ke>be;){if(ke-be>600){const Xe=ke-be+1,xt=oe-be+1,jt=Math.log(Xe),Ct=.5*Math.exp(2*jt/3),tn=.5*Math.sqrt(jt*Ct*(Xe-Ct)/Xe)*(xt-Xe/2<0?-1:1);ze(ye,ee,oe,Math.max(be,Math.floor(oe-xt*Ct/Xe+tn)),Math.min(ke,Math.floor(oe+(Xe-xt)*Ct/Xe+tn)),Oe)}const Ye=ee[2*oe+Oe];let We=be,Be=ke;for(Ke(ye,ee,be,oe),ee[2*ke+Oe]>Ye&&Ke(ye,ee,be,ke);We<Be;){for(Ke(ye,ee,We,Be),We++,Be--;ee[2*We+Oe]<Ye;)We++;for(;ee[2*Be+Oe]>Ye;)Be--}ee[2*be+Oe]===Ye?Ke(ye,ee,be,Be):(Be++,Ke(ye,ee,Be,ke)),Be<=oe&&(be=Be+1),oe<=Be&&(ke=Be-1)}}function Ke(ye,ee,oe,be){ut(ye,oe,be),ut(ee,2*oe,2*be),ut(ee,2*oe+1,2*be+1)}function ut(ye,ee,oe){const be=ye[ee];ye[ee]=ye[oe],ye[oe]=be}function Nt(ye,ee,oe,be){const ke=ye-oe,Oe=ee-be;return ke*ke+Oe*Oe}ne.fromVectorTileJs=ie,ne.fromGeojsonVt=function(ye,ee){ee=ee||{};var oe={};for(var be in ye)oe[be]=new U(ye[be].features,ee),oe[be].name=be,oe[be].version=ee.version,oe[be].extent=ee.extent;return ie({layers:oe})},ne.GeoJSONWrapper=re;const an=ye=>ye[0],un=ye=>ye[1];class wn{constructor(ee,oe=an,be=un,ke=64,Oe=Float64Array){this.nodeSize=ke,this.points=ee;const Ye=ee.length<65536?Uint16Array:Uint32Array,We=this.ids=new Ye(ee.length),Be=this.coords=new Oe(2*ee.length);for(let Xe=0;Xe<ee.length;Xe++)We[Xe]=Xe,Be[2*Xe]=oe(ee[Xe]),Be[2*Xe+1]=be(ee[Xe]);Te(We,Be,ke,0,We.length-1,0)}range(ee,oe,be,ke){return function(Oe,Ye,We,Be,Xe,xt,jt){const Ct=[0,Oe.length-1,0],tn=[];let pn,ln;for(;Ct.length;){const _n=Ct.pop(),bn=Ct.pop(),Bn=Ct.pop();if(bn-Bn<=jt){for(let qe=Bn;qe<=bn;qe++)pn=Ye[2*qe],ln=Ye[2*qe+1],pn>=We&&pn<=Xe&&ln>=Be&&ln<=xt&&tn.push(Oe[qe]);continue}const ui=Math.floor((Bn+bn)/2);pn=Ye[2*ui],ln=Ye[2*ui+1],pn>=We&&pn<=Xe&&ln>=Be&&ln<=xt&&tn.push(Oe[ui]);const Jn=(_n+1)%2;(_n===0?We<=pn:Be<=ln)&&(Ct.push(Bn),Ct.push(ui-1),Ct.push(Jn)),(_n===0?Xe>=pn:xt>=ln)&&(Ct.push(ui+1),Ct.push(bn),Ct.push(Jn))}return tn}(this.ids,this.coords,ee,oe,be,ke,this.nodeSize)}within(ee,oe,be){return function(ke,Oe,Ye,We,Be,Xe){const xt=[0,ke.length-1,0],jt=[],Ct=Be*Be;for(;xt.length;){const tn=xt.pop(),pn=xt.pop(),ln=xt.pop();if(pn-ln<=Xe){for(let Jn=ln;Jn<=pn;Jn++)Nt(Oe[2*Jn],Oe[2*Jn+1],Ye,We)<=Ct&&jt.push(ke[Jn]);continue}const _n=Math.floor((ln+pn)/2),bn=Oe[2*_n],Bn=Oe[2*_n+1];Nt(bn,Bn,Ye,We)<=Ct&&jt.push(ke[_n]);const ui=(tn+1)%2;(tn===0?Ye-Be<=bn:We-Be<=Bn)&&(xt.push(ln),xt.push(_n-1),xt.push(ui)),(tn===0?Ye+Be>=bn:We+Be>=Bn)&&(xt.push(_n+1),xt.push(pn),xt.push(ui))}return jt}(this.ids,this.coords,ee,oe,be,this.nodeSize)}}const An={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ye=>ye},kn=Math.fround||(En=new Float32Array(1),ye=>(En[0]=+ye,En[0]));var En;class Vn{constructor(ee){this.options=Ve(Object.create(An),ee),this.trees=new Array(this.options.maxZoom+1)}load(ee){const{log:oe,minZoom:be,maxZoom:ke,nodeSize:Oe}=this.options;oe&&console.time("total time");const Ye=`prepare ${ee.length} points`;oe&&console.time(Ye),this.points=ee;let We=[];for(let Be=0;Be<ee.length;Be++)ee[Be].geometry&&We.push(Xn(ee[Be],Be));this.trees[ke+1]=new wn(We,pt,Ze,Oe,Float32Array),oe&&console.timeEnd(Ye);for(let Be=ke;Be>=be;Be--){const Xe=+Date.now();We=this._cluster(We,Be),this.trees[Be]=new wn(We,pt,Ze,Oe,Float32Array),oe&&console.log("z%d: %d clusters in %dms",Be,We.length,+Date.now()-Xe)}return oe&&console.timeEnd("total time"),this}getClusters(ee,oe){let be=((ee[0]+180)%360+360)%360-180;const ke=Math.max(-90,Math.min(90,ee[1]));let Oe=ee[2]===180?180:((ee[2]+180)%360+360)%360-180;const Ye=Math.max(-90,Math.min(90,ee[3]));if(ee[2]-ee[0]>=360)be=-180,Oe=180;else if(be>Oe){const xt=this.getClusters([be,ke,180,Ye],oe),jt=this.getClusters([-180,ke,Oe,Ye],oe);return xt.concat(jt)}const We=this.trees[this._limitZoom(oe)],Be=We.range(yi(be),Ei(Ye),yi(Oe),Ei(ke)),Xe=[];for(const xt of Be){const jt=We.points[xt];Xe.push(jt.numPoints?Ln(jt):this.points[jt.index])}return Xe}getChildren(ee){const oe=this._getOriginId(ee),be=this._getOriginZoom(ee),ke="No cluster with the specified id.",Oe=this.trees[be];if(!Oe)throw new Error(ke);const Ye=Oe.points[oe];if(!Ye)throw new Error(ke);const We=this.options.radius/(this.options.extent*Math.pow(2,be-1)),Be=Oe.within(Ye.x,Ye.y,We),Xe=[];for(const xt of Be){const jt=Oe.points[xt];jt.parentId===ee&&Xe.push(jt.numPoints?Ln(jt):this.points[jt.index])}if(Xe.length===0)throw new Error(ke);return Xe}getLeaves(ee,oe,be){const ke=[];return this._appendLeaves(ke,ee,oe=oe||10,be=be||0,0),ke}getTile(ee,oe,be){const ke=this.trees[this._limitZoom(ee)],Oe=Math.pow(2,ee),{extent:Ye,radius:We}=this.options,Be=We/Ye,Xe=(be-Be)/Oe,xt=(be+1+Be)/Oe,jt={features:[]};return this._addTileFeatures(ke.range((oe-Be)/Oe,Xe,(oe+1+Be)/Oe,xt),ke.points,oe,be,Oe,jt),oe===0&&this._addTileFeatures(ke.range(1-Be/Oe,Xe,1,xt),ke.points,Oe,be,Oe,jt),oe===Oe-1&&this._addTileFeatures(ke.range(0,Xe,Be/Oe,xt),ke.points,-1,be,Oe,jt),jt.features.length?jt:null}getClusterExpansionZoom(ee){let oe=this._getOriginZoom(ee)-1;for(;oe<=this.options.maxZoom;){const be=this.getChildren(ee);if(oe++,be.length!==1)break;ee=be[0].properties.cluster_id}return oe}_appendLeaves(ee,oe,be,ke,Oe){const Ye=this.getChildren(oe);for(const We of Ye){const Be=We.properties;if(Be&&Be.cluster?Oe+Be.point_count<=ke?Oe+=Be.point_count:Oe=this._appendLeaves(ee,Be.cluster_id,be,ke,Oe):Oe<ke?Oe++:ee.push(We),ee.length===be)break}return Oe}_addTileFeatures(ee,oe,be,ke,Oe,Ye){for(const We of ee){const Be=oe[We],Xe=Be.numPoints;let xt,jt,Ct;if(Xe)xt=gi(Be),jt=Be.x,Ct=Be.y;else{const ln=this.points[Be.index];xt=ln.properties,jt=yi(ln.geometry.coordinates[0]),Ct=Ei(ln.geometry.coordinates[1])}const tn={type:1,geometry:[[Math.round(this.options.extent*(jt*Oe-be)),Math.round(this.options.extent*(Ct*Oe-ke))]],tags:xt};let pn;Xe?pn=Be.id:this.options.generateId?pn=Be.index:this.points[Be.index].id&&(pn=this.points[Be.index].id),pn!==void 0&&(tn.id=pn),Ye.features.push(tn)}}_limitZoom(ee){return Math.max(this.options.minZoom,Math.min(+ee,this.options.maxZoom+1))}_cluster(ee,oe){const be=[],{radius:ke,extent:Oe,reduce:Ye,minPoints:We}=this.options,Be=ke/(Oe*Math.pow(2,oe));for(let Xe=0;Xe<ee.length;Xe++){const xt=ee[Xe];if(xt.zoom<=oe)continue;xt.zoom=oe;const jt=this.trees[oe+1],Ct=jt.within(xt.x,xt.y,Be),tn=xt.numPoints||1;let pn=tn;for(const ln of Ct){const _n=jt.points[ln];_n.zoom>oe&&(pn+=_n.numPoints||1)}if(pn>tn&&pn>=We){let ln=xt.x*tn,_n=xt.y*tn,bn=Ye&&tn>1?this._map(xt,!0):null;const Bn=(Xe<<5)+(oe+1)+this.points.length;for(const ui of Ct){const Jn=jt.points[ui];if(Jn.zoom<=oe)continue;Jn.zoom=oe;const qe=Jn.numPoints||1;ln+=Jn.x*qe,_n+=Jn.y*qe,Jn.parentId=Bn,Ye&&(bn||(bn=this._map(xt,!0)),Ye(bn,this._map(Jn)))}xt.parentId=Bn,be.push(ni(ln/pn,_n/pn,Bn,pn,bn))}else if(be.push(xt),pn>1)for(const ln of Ct){const _n=jt.points[ln];_n.zoom<=oe||(_n.zoom=oe,be.push(_n))}}return be}_getOriginId(ee){return ee-this.points.length>>5}_getOriginZoom(ee){return(ee-this.points.length)%32}_map(ee,oe){if(ee.numPoints)return oe?Ve({},ee.properties):ee.properties;const be=this.points[ee.index].properties,ke=this.options.map(be);return oe&&ke===be?Ve({},ke):ke}}function ni(ye,ee,oe,be,ke){return{x:kn(ye),y:kn(ee),zoom:1/0,id:oe,parentId:-1,numPoints:be,properties:ke}}function Xn(ye,ee){const[oe,be]=ye.geometry.coordinates;return{x:kn(yi(oe)),y:kn(Ei(be)),zoom:1/0,index:ee,parentId:-1}}function Ln(ye){return{type:"Feature",id:ye.id,properties:gi(ye),geometry:{type:"Point",coordinates:[(ee=ye.x,360*(ee-.5)),ve(ye.y)]}};var ee}function gi(ye){const ee=ye.numPoints,oe=ee>=1e4?`${Math.round(ee/1e3)}k`:ee>=1e3?Math.round(ee/100)/10+"k":ee;return Ve(Ve({},ye.properties),{cluster:!0,cluster_id:ye.id,point_count:ee,point_count_abbreviated:oe})}function yi(ye){return ye/360+.5}function Ei(ye){const ee=Math.sin(ye*Math.PI/180),oe=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return oe<0?0:oe>1?1:oe}function ve(ye){const ee=(180-360*ye)*Math.PI/180;return 360*Math.atan(Math.exp(ee))/Math.PI-90}function Ve(ye,ee){for(const oe in ee)ye[oe]=ee[oe];return ye}function pt(ye){return ye.x}function Ze(ye){return ye.y}function mt(ye,ee,oe,be){for(var ke,Oe=be,Ye=oe-ee>>1,We=oe-ee,Be=ye[ee],Xe=ye[ee+1],xt=ye[oe],jt=ye[oe+1],Ct=ee+3;Ct<oe;Ct+=3){var tn=Qe(ye[Ct],ye[Ct+1],Be,Xe,xt,jt);if(tn>Oe)ke=Ct,Oe=tn;else if(tn===Oe){var pn=Math.abs(Ct-Ye);pn<We&&(ke=Ct,We=pn)}}Oe>be&&(ke-ee>3&&mt(ye,ee,ke,be),ye[ke+2]=Oe,oe-ke>3&&mt(ye,ke,oe,be))}function Qe(ye,ee,oe,be,ke,Oe){var Ye=ke-oe,We=Oe-be;if(Ye!==0||We!==0){var Be=((ye-oe)*Ye+(ee-be)*We)/(Ye*Ye+We*We);Be>1?(oe=ke,be=Oe):Be>0&&(oe+=Ye*Be,be+=We*Be)}return(Ye=ye-oe)*Ye+(We=ee-be)*We}function Ue(ye,ee,oe,be){var ke={id:ye===void 0?null:ye,type:ee,geometry:oe,tags:be,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Oe){var Ye=Oe.geometry,We=Oe.type;if(We==="Point"||We==="MultiPoint"||We==="LineString")vt(Oe,Ye);else if(We==="Polygon"||We==="MultiLineString")for(var Be=0;Be<Ye.length;Be++)vt(Oe,Ye[Be]);else if(We==="MultiPolygon")for(Be=0;Be<Ye.length;Be++)for(var Xe=0;Xe<Ye[Be].length;Xe++)vt(Oe,Ye[Be][Xe])}(ke),ke}function vt(ye,ee){for(var oe=0;oe<ee.length;oe+=3)ye.minX=Math.min(ye.minX,ee[oe]),ye.minY=Math.min(ye.minY,ee[oe+1]),ye.maxX=Math.max(ye.maxX,ee[oe]),ye.maxY=Math.max(ye.maxY,ee[oe+1])}function dt(ye,ee,oe,be){if(ee.geometry){var ke=ee.geometry.coordinates,Oe=ee.geometry.type,Ye=Math.pow(oe.tolerance/((1<<oe.maxZoom)*oe.extent),2),We=[],Be=ee.id;if(oe.promoteId?Be=ee.properties[oe.promoteId]:oe.generateId&&(Be=be||0),Oe==="Point")ct(ke,We);else if(Oe==="MultiPoint")for(var Xe=0;Xe<ke.length;Xe++)ct(ke[Xe],We);else if(Oe==="LineString")Tt(ke,We,Ye,!1);else if(Oe==="MultiLineString"){if(oe.lineMetrics){for(Xe=0;Xe<ke.length;Xe++)Tt(ke[Xe],We=[],Ye,!1),ye.push(Ue(Be,"LineString",We,ee.properties));return}tt(ke,We,Ye,!1)}else if(Oe==="Polygon")tt(ke,We,Ye,!0);else{if(Oe!=="MultiPolygon"){if(Oe==="GeometryCollection"){for(Xe=0;Xe<ee.geometry.geometries.length;Xe++)dt(ye,{id:Be,geometry:ee.geometry.geometries[Xe],properties:ee.properties},oe,be);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Xe=0;Xe<ke.length;Xe++){var xt=[];tt(ke[Xe],xt,Ye,!0),We.push(xt)}}ye.push(Ue(Be,Oe,We,ee.properties))}}function ct(ye,ee){ee.push(st(ye[0])),ee.push(Et(ye[1])),ee.push(0)}function Tt(ye,ee,oe,be){for(var ke,Oe,Ye=0,We=0;We<ye.length;We++){var Be=st(ye[We][0]),Xe=Et(ye[We][1]);ee.push(Be),ee.push(Xe),ee.push(0),We>0&&(Ye+=be?(ke*Xe-Be*Oe)/2:Math.sqrt(Math.pow(Be-ke,2)+Math.pow(Xe-Oe,2))),ke=Be,Oe=Xe}var xt=ee.length-3;ee[2]=1,mt(ee,0,xt,oe),ee[xt+2]=1,ee.size=Math.abs(Ye),ee.start=0,ee.end=ee.size}function tt(ye,ee,oe,be){for(var ke=0;ke<ye.length;ke++){var Oe=[];Tt(ye[ke],Oe,oe,be),ee.push(Oe)}}function st(ye){return ye/360+.5}function Et(ye){var ee=Math.sin(ye*Math.PI/180),oe=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return oe<0?0:oe>1?1:oe}function It(ye,ee,oe,be,ke,Oe,Ye,We){if(be/=ee,Oe>=(oe/=ee)&&Ye<be)return ye;if(Ye<oe||Oe>=be)return null;for(var Be=[],Xe=0;Xe<ye.length;Xe++){var xt=ye[Xe],jt=xt.geometry,Ct=xt.type,tn=ke===0?xt.minX:xt.minY,pn=ke===0?xt.maxX:xt.maxY;if(tn>=oe&&pn<be)Be.push(xt);else if(!(pn<oe||tn>=be)){var ln=[];if(Ct==="Point"||Ct==="MultiPoint")dn(jt,ln,oe,be,ke);else if(Ct==="LineString")gn(jt,ln,oe,be,ke,!1,We.lineMetrics);else if(Ct==="MultiLineString")oi(jt,ln,oe,be,ke,!1);else if(Ct==="Polygon")oi(jt,ln,oe,be,ke,!0);else if(Ct==="MultiPolygon")for(var _n=0;_n<jt.length;_n++){var bn=[];oi(jt[_n],bn,oe,be,ke,!0),bn.length&&ln.push(bn)}if(ln.length){if(We.lineMetrics&&Ct==="LineString"){for(_n=0;_n<ln.length;_n++)Be.push(Ue(xt.id,Ct,ln[_n],xt.tags));continue}Ct!=="LineString"&&Ct!=="MultiLineString"||(ln.length===1?(Ct="LineString",ln=ln[0]):Ct="MultiLineString"),Ct!=="Point"&&Ct!=="MultiPoint"||(Ct=ln.length===3?"Point":"MultiPoint"),Be.push(Ue(xt.id,Ct,ln,xt.tags))}}}return Be.length?Be:null}function dn(ye,ee,oe,be,ke){for(var Oe=0;Oe<ye.length;Oe+=3){var Ye=ye[Oe+ke];Ye>=oe&&Ye<=be&&(ee.push(ye[Oe]),ee.push(ye[Oe+1]),ee.push(ye[Oe+2]))}}function gn(ye,ee,oe,be,ke,Oe,Ye){for(var We,Be,Xe=Un(ye),xt=ke===0?Wr:fr,jt=ye.start,Ct=0;Ct<ye.length-3;Ct+=3){var tn=ye[Ct],pn=ye[Ct+1],ln=ye[Ct+2],_n=ye[Ct+3],bn=ye[Ct+4],Bn=ke===0?tn:pn,ui=ke===0?_n:bn,Jn=!1;Ye&&(We=Math.sqrt(Math.pow(tn-_n,2)+Math.pow(pn-bn,2))),Bn<oe?ui>oe&&(Be=xt(Xe,tn,pn,_n,bn,oe),Ye&&(Xe.start=jt+We*Be)):Bn>be?ui<be&&(Be=xt(Xe,tn,pn,_n,bn,be),Ye&&(Xe.start=jt+We*Be)):Ui(Xe,tn,pn,ln),ui<oe&&Bn>=oe&&(Be=xt(Xe,tn,pn,_n,bn,oe),Jn=!0),ui>be&&Bn<=be&&(Be=xt(Xe,tn,pn,_n,bn,be),Jn=!0),!Oe&&Jn&&(Ye&&(Xe.end=jt+We*Be),ee.push(Xe),Xe=Un(ye)),Ye&&(jt+=We)}var qe=ye.length-3;tn=ye[qe],pn=ye[qe+1],ln=ye[qe+2],(Bn=ke===0?tn:pn)>=oe&&Bn<=be&&Ui(Xe,tn,pn,ln),qe=Xe.length-3,Oe&&qe>=3&&(Xe[qe]!==Xe[0]||Xe[qe+1]!==Xe[1])&&Ui(Xe,Xe[0],Xe[1],Xe[2]),Xe.length&&ee.push(Xe)}function Un(ye){var ee=[];return ee.size=ye.size,ee.start=ye.start,ee.end=ye.end,ee}function oi(ye,ee,oe,be,ke,Oe){for(var Ye=0;Ye<ye.length;Ye++)gn(ye[Ye],ee,oe,be,ke,Oe,!1)}function Ui(ye,ee,oe,be){ye.push(ee),ye.push(oe),ye.push(be)}function Wr(ye,ee,oe,be,ke,Oe){var Ye=(Oe-ee)/(be-ee);return ye.push(Oe),ye.push(oe+(ke-oe)*Ye),ye.push(1),Ye}function fr(ye,ee,oe,be,ke,Oe){var Ye=(Oe-oe)/(ke-oe);return ye.push(ee+(be-ee)*Ye),ye.push(Oe),ye.push(1),Ye}function Dr(ye,ee){for(var oe=[],be=0;be<ye.length;be++){var ke,Oe=ye[be],Ye=Oe.type;if(Ye==="Point"||Ye==="MultiPoint"||Ye==="LineString")ke=Ti(Oe.geometry,ee);else if(Ye==="MultiLineString"||Ye==="Polygon"){ke=[];for(var We=0;We<Oe.geometry.length;We++)ke.push(Ti(Oe.geometry[We],ee))}else if(Ye==="MultiPolygon")for(ke=[],We=0;We<Oe.geometry.length;We++){for(var Be=[],Xe=0;Xe<Oe.geometry[We].length;Xe++)Be.push(Ti(Oe.geometry[We][Xe],ee));ke.push(Be)}oe.push(Ue(Oe.id,Ye,ke,Oe.tags))}return oe}function Ti(ye,ee){var oe=[];oe.size=ye.size,ye.start!==void 0&&(oe.start=ye.start,oe.end=ye.end);for(var be=0;be<ye.length;be+=3)oe.push(ye[be]+ee,ye[be+1],ye[be+2]);return oe}function ji(ye,ee){if(ye.transformed)return ye;var oe,be,ke,Oe=1<<ye.z,Ye=ye.x,We=ye.y;for(oe=0;oe<ye.features.length;oe++){var Be=ye.features[oe],Xe=Be.geometry,xt=Be.type;if(Be.geometry=[],xt===1)for(be=0;be<Xe.length;be+=2)Be.geometry.push(Zr(Xe[be],Xe[be+1],ee,Oe,Ye,We));else for(be=0;be<Xe.length;be++){var jt=[];for(ke=0;ke<Xe[be].length;ke+=2)jt.push(Zr(Xe[be][ke],Xe[be][ke+1],ee,Oe,Ye,We));Be.geometry.push(jt)}}return ye.transformed=!0,ye}function Zr(ye,ee,oe,be,ke,Oe){return[Math.round(oe*(ye*be-ke)),Math.round(oe*(ee*be-Oe))]}function wo(ye,ee,oe,be,ke){for(var Oe=ee===ke.maxZoom?0:ke.tolerance/((1<<ee)*ke.extent),Ye={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:oe,y:be,z:ee,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},We=0;We<ye.length;We++){Ye.numFeatures++,bs(Ye,ye[We],Oe,ke);var Be=ye[We].minX,Xe=ye[We].minY,xt=ye[We].maxX,jt=ye[We].maxY;Be<Ye.minX&&(Ye.minX=Be),Xe<Ye.minY&&(Ye.minY=Xe),xt>Ye.maxX&&(Ye.maxX=xt),jt>Ye.maxY&&(Ye.maxY=jt)}return Ye}function bs(ye,ee,oe,be){var ke=ee.geometry,Oe=ee.type,Ye=[];if(Oe==="Point"||Oe==="MultiPoint")for(var We=0;We<ke.length;We+=3)Ye.push(ke[We]),Ye.push(ke[We+1]),ye.numPoints++,ye.numSimplified++;else if(Oe==="LineString")Rr(Ye,ke,ye,oe,!1,!1);else if(Oe==="MultiLineString"||Oe==="Polygon")for(We=0;We<ke.length;We++)Rr(Ye,ke[We],ye,oe,Oe==="Polygon",We===0);else if(Oe==="MultiPolygon")for(var Be=0;Be<ke.length;Be++){var Xe=ke[Be];for(We=0;We<Xe.length;We++)Rr(Ye,Xe[We],ye,oe,!0,We===0)}if(Ye.length){var xt=ee.tags||null;if(Oe==="LineString"&&be.lineMetrics){for(var jt in xt={},ee.tags)xt[jt]=ee.tags[jt];xt.mapbox_clip_start=ke.start/ke.size,xt.mapbox_clip_end=ke.end/ke.size}var Ct={geometry:Ye,type:Oe==="Polygon"||Oe==="MultiPolygon"?3:Oe==="LineString"||Oe==="MultiLineString"?2:1,tags:xt};ee.id!==null&&(Ct.id=ee.id),ye.features.push(Ct)}}function Rr(ye,ee,oe,be,ke,Oe){var Ye=be*be;if(be>0&&ee.size<(ke?Ye:be))oe.numPoints+=ee.length/3;else{for(var We=[],Be=0;Be<ee.length;Be+=3)(be===0||ee[Be+2]>Ye)&&(oe.numSimplified++,We.push(ee[Be]),We.push(ee[Be+1])),oe.numPoints++;ke&&function(Xe,xt){for(var jt=0,Ct=0,tn=Xe.length,pn=tn-2;Ct<tn;pn=Ct,Ct+=2)jt+=(Xe[Ct]-Xe[pn])*(Xe[Ct+1]+Xe[pn+1]);if(jt>0===xt)for(Ct=0,tn=Xe.length;Ct<tn/2;Ct+=2){var ln=Xe[Ct],_n=Xe[Ct+1];Xe[Ct]=Xe[tn-2-Ct],Xe[Ct+1]=Xe[tn-1-Ct],Xe[tn-2-Ct]=ln,Xe[tn-1-Ct]=_n}}(We,Oe),ye.push(We)}}function $r(ye,ee){var oe=(ee=this.options=function(ke,Oe){for(var Ye in Oe)ke[Ye]=Oe[Ye];return ke}(Object.create(this.options),ee)).debug;if(oe&&console.time("preprocess data"),ee.maxZoom<0||ee.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ee.promoteId&&ee.generateId)throw new Error("promoteId and generateId cannot be used together.");var be=function(ke,Oe){var Ye=[];if(ke.type==="FeatureCollection")for(var We=0;We<ke.features.length;We++)dt(Ye,ke.features[We],Oe,We);else dt(Ye,ke.type==="Feature"?ke:{geometry:ke},Oe);return Ye}(ye,ee);this.tiles={},this.tileCoords=[],oe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ee.indexMaxZoom,ee.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(be=function(ke,Oe){var Ye=Oe.buffer/Oe.extent,We=ke,Be=It(ke,1,-1-Ye,Ye,0,-1,2,Oe),Xe=It(ke,1,1-Ye,2+Ye,0,-1,2,Oe);return(Be||Xe)&&(We=It(ke,1,-Ye,1+Ye,0,-1,2,Oe)||[],Be&&(We=Dr(Be,1).concat(We)),Xe&&(We=We.concat(Dr(Xe,-1)))),We}(be,ee)).length&&this.splitTile(be,0,0,0),oe&&(be.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Yr(ye,ee,oe){return 32*((1<<ye)*oe+ee)+ye}function Uo(ye,ee){const oe=ye.tileID.canonical;if(!this._geoJSONIndex)return ee(null,null);const be=this._geoJSONIndex.getTile(oe.z,oe.x,oe.y);if(!be)return ee(null,null);const ke=new V(be.features);let Oe=ne(ke);Oe.byteOffset===0&&Oe.byteLength===Oe.buffer.byteLength||(Oe=new Uint8Array(Oe)),ee(null,{vectorTile:ke,rawData:Oe.buffer})}$r.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},$r.prototype.splitTile=function(ye,ee,oe,be,ke,Oe,Ye){for(var We=[ye,ee,oe,be],Be=this.options,Xe=Be.debug;We.length;){be=We.pop(),oe=We.pop(),ee=We.pop(),ye=We.pop();var xt=1<<ee,jt=Yr(ee,oe,be),Ct=this.tiles[jt];if(!Ct&&(Xe>1&&console.time("creation"),Ct=this.tiles[jt]=wo(ye,ee,oe,be,Be),this.tileCoords.push({z:ee,x:oe,y:be}),Xe)){Xe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ee,oe,be,Ct.numFeatures,Ct.numPoints,Ct.numSimplified),console.timeEnd("creation"));var tn="z"+ee;this.stats[tn]=(this.stats[tn]||0)+1,this.total++}if(Ct.source=ye,ke){if(ee===Be.maxZoom||ee===ke)continue;var pn=1<<ke-ee;if(oe!==Math.floor(Oe/pn)||be!==Math.floor(Ye/pn))continue}else if(ee===Be.indexMaxZoom||Ct.numPoints<=Be.indexMaxPoints)continue;if(Ct.source=null,ye.length!==0){Xe>1&&console.time("clipping");var ln,_n,bn,Bn,ui,Jn,qe=.5*Be.buffer/Be.extent,rr=.5-qe,mi=.5+qe,or=1+qe;ln=_n=bn=Bn=null,ui=It(ye,xt,oe-qe,oe+mi,0,Ct.minX,Ct.maxX,Be),Jn=It(ye,xt,oe+rr,oe+or,0,Ct.minX,Ct.maxX,Be),ye=null,ui&&(ln=It(ui,xt,be-qe,be+mi,1,Ct.minY,Ct.maxY,Be),_n=It(ui,xt,be+rr,be+or,1,Ct.minY,Ct.maxY,Be),ui=null),Jn&&(bn=It(Jn,xt,be-qe,be+mi,1,Ct.minY,Ct.maxY,Be),Bn=It(Jn,xt,be+rr,be+or,1,Ct.minY,Ct.maxY,Be),Jn=null),Xe>1&&console.timeEnd("clipping"),We.push(ln||[],ee+1,2*oe,2*be),We.push(_n||[],ee+1,2*oe,2*be+1),We.push(bn||[],ee+1,2*oe+1,2*be),We.push(Bn||[],ee+1,2*oe+1,2*be+1)}}},$r.prototype.getTile=function(ye,ee,oe){var be=this.options,ke=be.extent,Oe=be.debug;if(ye<0||ye>24)return null;var Ye=1<<ye,We=Yr(ye,ee=(ee%Ye+Ye)%Ye,oe);if(this.tiles[We])return ji(this.tiles[We],ke);Oe>1&&console.log("drilling down to z%d-%d-%d",ye,ee,oe);for(var Be,Xe=ye,xt=ee,jt=oe;!Be&&Xe>0;)Xe--,xt=Math.floor(xt/2),jt=Math.floor(jt/2),Be=this.tiles[Yr(Xe,xt,jt)];return Be&&Be.source?(Oe>1&&console.log("found parent tile z%d-%d-%d",Xe,xt,jt),Oe>1&&console.time("drilling down"),this.splitTile(Be.source,Xe,xt,jt,ye,ee,oe),Oe>1&&console.timeEnd("drilling down"),this.tiles[We]?ji(this.tiles[We],ke):null):null};class Gi extends r.VectorTileWorkerSource{constructor(ee,oe,be,ke,Oe){super(ee,oe,be,ke,Uo),Oe&&(this.loadGeoJSON=Oe)}loadData(ee,oe){const be=ee&&ee.request,ke=be&&be.collectResourceTiming;this.loadGeoJSON(ee,(Oe,Ye)=>{if(Oe||!Ye)return oe(Oe);if(typeof Ye!="object")return oe(new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`));{S(Ye,!0);try{if(ee.filter){const Be=r.createExpression(ee.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Be.result==="error")throw new Error(Be.value.map(xt=>`${xt.key}: ${xt.message}`).join(", "));const Xe=Ye.features.filter(xt=>Be.value.evaluate({zoom:0},xt));Ye={type:"FeatureCollection",features:Xe}}this._geoJSONIndex=ee.cluster?new Vn(function({superclusterOptions:Be,clusterProperties:Xe}){if(!Xe||!Be)return Be;const xt={},jt={},Ct={accumulated:null,zoom:0},tn={properties:null},pn=Object.keys(Xe);for(const ln of pn){const[_n,bn]=Xe[ln],Bn=r.createExpression(bn),ui=r.createExpression(typeof _n=="string"?[_n,["accumulated"],["get",ln]]:_n);xt[ln]=Bn.value,jt[ln]=ui.value}return Be.map=ln=>{tn.properties=ln;const _n={};for(const bn of pn)_n[bn]=xt[bn].evaluate(Ct,tn);return _n},Be.reduce=(ln,_n)=>{tn.properties=_n;for(const bn of pn)Ct.accumulated=ln[bn],ln[bn]=jt[bn].evaluate(Ct,tn)},Be}(ee)).load(Ye.features):function(Be,Xe){return new $r(Be,Xe)}(Ye,ee.geojsonVtOptions)}catch(Be){return oe(Be)}this.loaded={};const We={};if(ke){const Be=r.getPerformanceMeasurement(be);Be&&(We.resourceTiming={},We.resourceTiming[ee.source]=JSON.parse(JSON.stringify(Be)))}oe(null,We)}})}reloadTile(ee,oe){const be=this.loaded;return be&&be[ee.uid]?super.reloadTile(ee,oe):this.loadTile(ee,oe)}loadGeoJSON(ee,oe){if(ee.request)r.getJSON(ee.request,oe);else{if(typeof ee.data!="string")return oe(new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`));try{return oe(null,JSON.parse(ee.data))}catch{return oe(new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(ee,oe){try{oe(null,this._geoJSONIndex.getClusterExpansionZoom(ee.clusterId))}catch(be){oe(be)}}getClusterChildren(ee,oe){try{oe(null,this._geoJSONIndex.getChildren(ee.clusterId))}catch(be){oe(be)}}getClusterLeaves(ee,oe){try{oe(null,this._geoJSONIndex.getLeaves(ee.clusterId,ee.limit,ee.offset))}catch(be){oe(be)}}}class Eo{constructor(ee){this.self=ee,this.actor=new r.Actor(ee,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=r.getProjection({name:"mercator"}),this.workerSourceTypes={vector:r.VectorTileWorkerSource,geojson:Gi},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(oe,be)=>{if(this.workerSourceTypes[oe])throw new Error(`Worker source with name "${oe}" already registered.`);this.workerSourceTypes[oe]=be},this.self.registerRTLTextPlugin=oe=>{if(r.plugin.isParsed())throw new Error("RTL text plugin already registered.");r.plugin.applyArabicShaping=oe.applyArabicShaping,r.plugin.processBidirectionalText=oe.processBidirectionalText,r.plugin.processStyledBidirectionalText=oe.processStyledBidirectionalText}}clearCaches(ee,oe,be){delete this.layerIndexes[ee],delete this.availableImages[ee],delete this.workerSources[ee],delete this.demWorkerSources[ee],be()}checkIfReady(ee,oe,be){be()}setReferrer(ee,oe){this.referrer=oe}spriteLoaded(ee,oe){this.isSpriteLoaded[ee]=oe;for(const be in this.workerSources[ee]){const ke=this.workerSources[ee][be];for(const Oe in ke)ke[Oe]instanceof r.VectorTileWorkerSource&&(ke[Oe].isSpriteLoaded=oe,ke[Oe].fire(new r.Event("isSpriteLoaded")))}}setImages(ee,oe,be){this.availableImages[ee]=oe;for(const ke in this.workerSources[ee]){const Oe=this.workerSources[ee][ke];for(const Ye in Oe)Oe[Ye].availableImages=oe}be()}enableTerrain(ee,oe,be){this.terrain=oe,be()}setProjection(ee,oe){this.projections[ee]=r.getProjection(oe)}setLayers(ee,oe,be){this.getLayerIndex(ee).replace(oe),be()}updateLayers(ee,oe,be){this.getLayerIndex(ee).update(oe.layers,oe.removedIds),be()}loadTile(ee,oe,be){const ke=this.enableTerrain?r.extend({enableTerrain:this.terrain},oe):oe;ke.projection=this.projections[ee]||this.defaultProjection,this.getWorkerSource(ee,oe.type,oe.source).loadTile(ke,be)}loadDEMTile(ee,oe,be){const ke=this.enableTerrain?r.extend({buildQuadTree:this.terrain},oe):oe;this.getDEMWorkerSource(ee,oe.source).loadTile(ke,be)}reloadTile(ee,oe,be){const ke=this.enableTerrain?r.extend({enableTerrain:this.terrain},oe):oe;ke.projection=this.projections[ee]||this.defaultProjection,this.getWorkerSource(ee,oe.type,oe.source).reloadTile(ke,be)}abortTile(ee,oe,be){this.getWorkerSource(ee,oe.type,oe.source).abortTile(oe,be)}removeTile(ee,oe,be){this.getWorkerSource(ee,oe.type,oe.source).removeTile(oe,be)}removeSource(ee,oe,be){if(!this.workerSources[ee]||!this.workerSources[ee][oe.type]||!this.workerSources[ee][oe.type][oe.source])return;const ke=this.workerSources[ee][oe.type][oe.source];delete this.workerSources[ee][oe.type][oe.source],ke.removeSource!==void 0?ke.removeSource(oe,be):be()}loadWorkerSource(ee,oe,be){try{this.self.importScripts(oe.url),be()}catch(ke){be(ke.toString())}}syncRTLPluginState(ee,oe,be){try{r.plugin.setState(oe);const ke=r.plugin.getPluginURL();if(r.plugin.isLoaded()&&!r.plugin.isParsed()&&ke!=null){this.self.importScripts(ke);const Oe=r.plugin.isParsed();be(Oe?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ke}`),Oe)}}catch(ke){be(ke.toString())}}getAvailableImages(ee){let oe=this.availableImages[ee];return oe||(oe=[]),oe}getLayerIndex(ee){let oe=this.layerIndexes[ee];return oe||(oe=this.layerIndexes[ee]=new w),oe}getWorkerSource(ee,oe,be){return this.workerSources[ee]||(this.workerSources[ee]={}),this.workerSources[ee][oe]||(this.workerSources[ee][oe]={}),this.workerSources[ee][oe][be]||(this.workerSources[ee][oe][be]=new this.workerSourceTypes[oe]({send:(ke,Oe,Ye,We,Be,Xe)=>{this.actor.send(ke,Oe,Ye,ee,Be,Xe)},scheduler:this.actor.scheduler},this.getLayerIndex(ee),this.getAvailableImages(ee),this.isSpriteLoaded[ee])),this.workerSources[ee][oe][be]}getDEMWorkerSource(ee,oe){return this.demWorkerSources[ee]||(this.demWorkerSources[ee]={}),this.demWorkerSources[ee][oe]||(this.demWorkerSources[ee][oe]=new k),this.demWorkerSources[ee][oe]}enforceCacheSizeLimit(ee,oe){r.enforceCacheSizeLimit(oe)}getWorkerPerformanceMetrics(ee,oe,be){be(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Eo(self)),Eo}),d(["./shared"],function(r){function y(_,o){if(Array.isArray(_)){if(!Array.isArray(o)||_.length!==o.length)return!1;for(let f=0;f<_.length;f++)if(!y(_[f],o[f]))return!1;return!0}if(typeof _=="object"&&_!==null&&o!==null){if(typeof o!="object"||Object.keys(_).length!==Object.keys(o).length)return!1;for(const f in _)if(!y(_[f],o[f]))return!1;return!0}return _===o}var E=w;function w(_){return!function(o){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var b,T,M=new Blob([""],{type:"text/javascript"}),F=URL.createObjectURL(M);try{T=new Worker(F),b=!0}catch{b=!1}return T&&T.terminate(),URL.revokeObjectURL(F),b}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var b=document.createElement("canvas");b.width=b.height=1;var T=b.getContext("2d");if(!T)return!1;var M=T.getImageData(0,0,1,1);return M&&M.width===b.width}()?(k[f=o&&o.failIfMajorPerformanceCaveat]===void 0&&(k[f]=function(b){var T,M=function(F){var j=document.createElement("canvas"),q=Object.create(w.webGLContextAttributes);return q.failIfMajorPerformanceCaveat=F,j.getContext("webgl",q)||j.getContext("experimental-webgl",q)}(b);if(!M)return!1;try{T=M.createShader(M.VERTEX_SHADER)}catch{return!1}return!(!T||M.isContextLost())&&(M.shaderSource(T,"void main() {}"),M.compileShader(T),M.getShaderParameter(T,M.COMPILE_STATUS)===!0)}(f)),k[f]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var f}(_)}var k={};function S(_,o,f){const b=r.window.document.createElement(_);return o!==void 0&&(b.className=o),f&&f.appendChild(b),b}function I(_,o,f){const b=r.window.document.createElementNS("http://www.w3.org/2000/svg",_);for(const T of Object.keys(o))b.setAttributeNS(null,T,o[T]);return f&&f.appendChild(b),b}w.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const L=r.window.document&&r.window.document.documentElement.style,D=L&&L.userSelect!==void 0?"userSelect":"WebkitUserSelect";let O;function V(){L&&D&&(O=L[D],L[D]="none")}function z(){L&&D&&(L[D]=O)}function U(_){_.preventDefault(),_.stopPropagation(),r.window.removeEventListener("click",U,!0)}function Z(){r.window.addEventListener("click",U,!0),r.window.setTimeout(()=>{r.window.removeEventListener("click",U,!0)},0)}function W(_,o){const f=_.getBoundingClientRect();return ie(_,f,o)}function ne(_,o){const f=_.getBoundingClientRect(),b=[];for(let T=0;T<o.length;T++)b.push(ie(_,f,o[T]));return b}function re(_){return r.window.InstallTrigger!==void 0&&_.button===2&&_.ctrlKey&&r.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:_.button}function ie(_,o,f){const b=_.offsetWidth===o.width?1:_.offsetWidth/o.width;return new r.pointGeometry((f.clientX-o.left)*b,(f.clientY-o.top)*b)}function Ce(_,o){var f=o[0],b=o[1],T=o[2],M=o[3],F=f*M-T*b;return F?(_[0]=M*(F=1/F),_[1]=-b*F,_[2]=-T*F,_[3]=f*F,_):null}function we(_){const{userImage:o}=_;return!!(o&&o.render&&o.render())&&(_.data.replace(new Uint8Array(o.data.buffer)),!0)}class fe extends r.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new r.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(o){if(this.loaded!==o&&(this.loaded=o,o)){for(const{ids:f,callback:b}of this.requestors)this._notify(f,b);this.requestors=[]}}hasImage(o){return!!this.getImage(o)}getImage(o){return this.images[o]}addImage(o,f){this._validate(o,f)&&(this.images[o]=f)}_validate(o,f){let b=!0;return this._validateStretch(f.stretchX,f.data&&f.data.width)||(this.fire(new r.ErrorEvent(new Error(`Image "${o}" has invalid "stretchX" value`))),b=!1),this._validateStretch(f.stretchY,f.data&&f.data.height)||(this.fire(new r.ErrorEvent(new Error(`Image "${o}" has invalid "stretchY" value`))),b=!1),this._validateContent(f.content,f)||(this.fire(new r.ErrorEvent(new Error(`Image "${o}" has invalid "content" value`))),b=!1),b}_validateStretch(o,f){if(!o)return!0;let b=0;for(const T of o){if(T[0]<b||T[1]<T[0]||f<T[1])return!1;b=T[1]}return!0}_validateContent(o,f){return!(o&&(o.length!==4||o[0]<0||f.data.width<o[0]||o[1]<0||f.data.height<o[1]||o[2]<0||f.data.width<o[2]||o[3]<0||f.data.height<o[3]||o[2]<o[0]||o[3]<o[1]))}updateImage(o,f){f.version=this.images[o].version+1,this.images[o]=f,this.updatedImages[o]=!0}removeImage(o){const f=this.images[o];delete this.images[o],delete this.patterns[o],f.userImage&&f.userImage.onRemove&&f.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(o,f){let b=!0;if(!this.isLoaded())for(const T of o)this.images[T]||(b=!1);this.isLoaded()||b?this._notify(o,f):this.requestors.push({ids:o,callback:f})}_notify(o,f){const b={};for(const T of o){this.images[T]||this.fire(new r.Event("styleimagemissing",{id:T}));const M=this.images[T];M?b[T]={data:M.data.clone(),pixelRatio:M.pixelRatio,sdf:M.sdf,version:M.version,stretchX:M.stretchX,stretchY:M.stretchY,content:M.content,hasRenderCallback:Boolean(M.userImage&&M.userImage.render)}:r.warnOnce(`Image "${T}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}f(null,b)}getPixelSize(){const{width:o,height:f}=this.atlasImage;return{width:o,height:f}}getPattern(o){const f=this.patterns[o],b=this.getImage(o);if(!b)return null;if(f&&f.position.version===b.version)return f.position;if(f)f.position.version=b.version;else{const T={w:b.data.width+2,h:b.data.height+2,x:0,y:0},M=new r.ImagePosition(T,b);this.patterns[o]={bin:T,position:M}}return this._updatePatternAtlas(),this.patterns[o].position}bind(o){const f=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new r.Texture(o,this.atlasImage,f.RGBA),this.atlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE)}_updatePatternAtlas(){const o=[];for(const M in this.patterns)o.push(this.patterns[M].bin);const{w:f,h:b}=r.potpack(o),T=this.atlasImage;T.resize({width:f||1,height:b||1});for(const M in this.patterns){const{bin:F}=this.patterns[M],j=F.x+1,q=F.y+1,Y=this.images[M].data,J=Y.width,te=Y.height;r.RGBAImage.copy(Y,T,{x:0,y:0},{x:j,y:q},{width:J,height:te}),r.RGBAImage.copy(Y,T,{x:0,y:te-1},{x:j,y:q-1},{width:J,height:1}),r.RGBAImage.copy(Y,T,{x:0,y:0},{x:j,y:q+te},{width:J,height:1}),r.RGBAImage.copy(Y,T,{x:J-1,y:0},{x:j-1,y:q},{width:1,height:te}),r.RGBAImage.copy(Y,T,{x:0,y:0},{x:j+J,y:q},{width:1,height:te})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(o){for(const f of o){if(this.callbackDispatchedThisFrame[f])continue;this.callbackDispatchedThisFrame[f]=!0;const b=this.images[f];we(b)&&this.updateImage(f,b)}}}const de=new r.Properties({anchor:new r.DataConstantProperty(r.spec.light.anchor),position:new class{constructor(){this.specification=r.spec.light.position}possiblyEvaluate(_,o){return function([f,b,T]){const M=r.degToRad(b+90),F=r.degToRad(T);return{x:f*Math.cos(M)*Math.sin(F),y:f*Math.sin(M)*Math.sin(F),z:f*Math.cos(F),azimuthal:b,polar:T}}(_.expression.evaluate(o))}interpolate(_,o,f){return{x:r.number(_.x,o.x,f),y:r.number(_.y,o.y,f),z:r.number(_.z,o.z,f),azimuthal:r.number(_.azimuthal,o.azimuthal,f),polar:r.number(_.polar,o.polar,f)}}},color:new r.DataConstantProperty(r.spec.light.color),intensity:new r.DataConstantProperty(r.spec.light.intensity)}),Le="-transition";class Ge extends r.Evented{constructor(o){super(),this._transitionable=new r.Transitionable(de),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,f={}){if(!this._validate(r.validateLight,o,f))for(const b in o){const T=o[b];r.endsWith(b,Le)?this._transitionable.setTransition(b.slice(0,-Le.length),T):this._transitionable.setValue(b,T)}}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,f,b){return(!b||b.validate!==!1)&&r.emitValidationErrors(this,o.call(r.validateStyle,r.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:r.spec})))}}const wt=new r.Properties({source:new r.DataConstantProperty(r.spec.terrain.source),exaggeration:new r.DataConstantProperty(r.spec.terrain.exaggeration)}),Te="-transition";class ze extends r.Evented{constructor(o,f){super(),this._transitionable=new r.Transitionable(wt),this.set(o),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=f}get(){return this._transitionable.serialize()}set(o){for(const f in o){const b=o[f];r.endsWith(f,Te)?this._transitionable.setTransition(f.slice(0,-Te.length),b):this._transitionable.setValue(f,b)}}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}}function Ke(_,o,f,b){const T=r.smoothstep(45,65,f),[M,F]=ut(_,b),j=r.length(o);let q=1-Math.min(1,Math.exp((j-M)/(F-M)*-6));return q*=q*q,q=Math.min(1,1.00747*q),q*T*_.alpha}function ut(_,o){const f=.5/Math.tan(.5*o);return[_.range[0]+f,_.range[1]+f]}const Nt=new r.Properties({range:new r.DataConstantProperty(r.spec.fog.range),color:new r.DataConstantProperty(r.spec.fog.color),"high-color":new r.DataConstantProperty(r.spec.fog["high-color"]),"space-color":new r.DataConstantProperty(r.spec.fog["space-color"]),"horizon-blend":new r.DataConstantProperty(r.spec.fog["horizon-blend"]),"star-intensity":new r.DataConstantProperty(r.spec.fog["star-intensity"])}),an="-transition";class un extends r.Evented{constructor(o,f){super(),this._transitionable=new r.Transitionable(Nt),this.set(o),this._transitioning=this._transitionable.untransitioned(),this._transform=f}get state(){const o=this._transform,f=o.projection.name==="globe",b=r.globeToMercatorTransition(o.zoom),T=this.properties.get("range"),M=[.5,3];return{range:f?[r.number(M[0],T[0],b),r.number(M[1],T[1],b)]:T,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(o,f={}){if(!this._validate(r.validateFog,o,f)){for(const b of Object.keys(r.spec.fog))o&&o[b]===void 0&&(o[b]=r.spec.fog[b].default);for(const b in o){const T=o[b];r.endsWith(b,an)?this._transitionable.setTransition(b.slice(0,-an.length),T):this._transitionable.setValue(b,T)}}}getOpacity(o){if(!this._transform.projection.supportsFog)return 0;const f=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:r.smoothstep(45,65,o))*f.a}getOpacityAtLatLng(o,f){return this._transform.projection.supportsFog?function(b,T,M){const F=r.MercatorCoordinate.fromLngLat(T),j=M.elevation?M.elevation.getAtPointOrZero(F):0,q=[F.x,F.y,j];return r.transformMat4(q,q,M.mercatorFogMatrix),Ke(b,q,M.pitch,M._fov)}(this.state,o,f):0}getFovAdjustedRange(o){return this._transform.projection.supportsFog?ut(this.state,o):[0,1]}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,f,b){return(!b||b.validate!==!1)&&r.emitValidationErrors(this,o.call(r.validateStyle,r.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:r.spec})))}}class wn{constructor(o,f){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=r.uniqueId();const b=this.workerPool.acquire(this.id);for(let T=0;T<b.length;T++){const M=new wn.Actor(b[T],f,this.id);M.name=`Worker ${T}`,this.actors.push(M)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(o,f,b){r.asyncAll(this.actors,(T,M)=>{T.send(o,f,M)},b=b||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(o=>{o.remove()}),this.actors=[],this.workerPool.release(this.id)}}function An(_,o,f){return o*(r.EXTENT/(_.tileSize*Math.pow(2,f-_.tileID.overscaledZ)))}wn.Actor=r.Actor;class kn{constructor(o,f,b,T){this.screenBounds=o,this.cameraPoint=f,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=b,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,T)}static createFromScreenPoints(o,f){let b,T;if(o instanceof r.pointGeometry||typeof o[0]=="number"){const M=r.pointGeometry.convert(o);b=[r.pointGeometry.convert(o)],T=f.isPointAboveHorizon(M)}else{const M=r.pointGeometry.convert(o[0]),F=r.pointGeometry.convert(o[1]);b=[M,F],T=r.polygonizeBounds(M,F).every(j=>f.isPointAboveHorizon(j))}return new kn(b,f.getCameraPoint(),T,f)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(o){return r.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],o)}bufferedCameraGeometry(o){const f=this.screenBounds[0],b=this.screenBounds.length===1?this.screenBounds[0].add(new r.pointGeometry(1,1)):this.screenBounds[1],T=r.polygonizeBounds(f,b,0,!1);return this.cameraPoint.y>b.y&&(this.cameraPoint.x>f.x&&this.cameraPoint.x<b.x?T.splice(3,0,this.cameraPoint):this.cameraPoint.x>=b.x?T[2]=this.cameraPoint:this.cameraPoint.x<=f.x&&(T[3]=this.cameraPoint)),r.bufferConvexPolygon(T,o)}bufferedCameraGeometryGlobe(o){const f=this.screenBounds[0],b=this.screenBounds.length===1?this.screenBounds[0].add(new r.pointGeometry(1,1)):this.screenBounds[1],T=r.polygonizeBounds(f,b,o),M=this.cameraPoint.clone();switch(3*((M.y>f.y)+(M.y>b.y))+((M.x>f.x)+(M.x>b.x))){case 0:T[0]=M,T[4]=M.clone();break;case 1:T.splice(1,0,M);break;case 2:T[1]=M;break;case 3:T.splice(4,0,M);break;case 5:T.splice(2,0,M);break;case 6:T[3]=M;break;case 7:T.splice(3,0,M);break;case 8:T[2]=M}return T}containsTile(o,f,b,T=0){const M=o.queryPadding/f._projectionScaler+1,F=b?this._bufferedCameraMercator(M,f):this._bufferedScreenMercator(M,f);let j=o.tileID.wrap+(F.unwrapped?T:0);const q=F.polygon.map(Se=>r.getTilePoint(o.tileTransform,Se,j));if(!r.polygonIntersectsBox(q,0,0,r.EXTENT,r.EXTENT))return;j=o.tileID.wrap+(this.screenGeometryMercator.unwrapped?T:0);const Y=this.screenGeometryMercator.polygon.map(Se=>r.getTileVec3(o.tileTransform,Se,j)),J=Y.map(Se=>new r.pointGeometry(Se[0],Se[1])),te=f.getFreeCameraOptions().position||new r.MercatorCoordinate(0,0,0),ae=r.getTileVec3(o.tileTransform,te,j),ue=Y.map(Se=>{const ce=r.sub(Se,Se,ae);return r.normalize(ce,ce),new r.Ray(ae,ce)}),pe=An(o,1,f.zoom)*f._projectionScaler;return{queryGeometry:this,tilespaceGeometry:J,tilespaceRays:ue,bufferedTilespaceGeometry:q,bufferedTilespaceBounds:(le=r.getBounds(q),le.min.x=r.clamp(le.min.x,0,r.EXTENT),le.min.y=r.clamp(le.min.y,0,r.EXTENT),le.max.x=r.clamp(le.max.x,0,r.EXTENT),le.max.y=r.clamp(le.max.y,0,r.EXTENT),le),tile:o,tileID:o.tileID,pixelToTileUnitsFactor:pe};var le}_bufferedScreenMercator(o,f){const b=ni(o);if(this._screenRaycastCache[b])return this._screenRaycastCache[b];{let T;return T=f.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(o),f):{polygon:this.bufferedScreenGeometry(o).map(M=>f.pointCoordinate3D(M)),unwrapped:!0},this._screenRaycastCache[b]=T,T}}_bufferedCameraMercator(o,f){const b=ni(o);if(this._cameraRaycastCache[b])return this._cameraRaycastCache[b];{let T;return T=f.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(o),f):{polygon:this.bufferedCameraGeometry(o).map(M=>f.pointCoordinate3D(M)),unwrapped:!0},this._cameraRaycastCache[b]=T,T}}_projectAndResample(o,f){const b=function(M,F){const j=r.multiply([],F.pixelMatrix,F.globeMatrix),q=[0,-r.GLOBE_RADIUS,0,1],Y=[0,r.GLOBE_RADIUS,0,1],J=[0,0,0,1];r.transformMat4$1(q,q,j),r.transformMat4$1(Y,Y,j),r.transformMat4$1(J,J,j);const te=new r.pointGeometry(q[0]/q[3],q[1]/q[3]),ae=new r.pointGeometry(Y[0]/Y[3],Y[1]/Y[3]),ue=r.polygonContainsPoint(M,te)&&q[3]<J[3],pe=r.polygonContainsPoint(M,ae)&&Y[3]<J[3];if(!ue&&!pe)return null;const le=function(De,nt,at){for(let it=1;it<De.length;it++){const et=Vn(nt.pointCoordinate3D(De[it-1]).x),Re=Vn(nt.pointCoordinate3D(De[it]).x);if(at<0){if(et<Re)return{idx:it,t:-et/(Re-1-et)}}else if(Re<et)return{idx:it,t:(1-et)/(Re+1-et)}}return null}(M,F,ue?-1:1);if(!le)return null;const{idx:Se,t:ce}=le;let ge=Se>1?En(M.slice(0,Se),F):[],_e=Se<M.length?En(M.slice(Se),F):[];ge=ge.map(De=>new r.pointGeometry(Vn(De.x),De.y)),_e=_e.map(De=>new r.pointGeometry(Vn(De.x),De.y));const $e=[...ge];$e.length===0&&$e.push(_e[_e.length-1]);const Ee=r.number($e[$e.length-1].y,(_e.length===0?ge[0]:_e[0]).y,ce);let Ae;return Ae=ue?[new r.pointGeometry(0,Ee),new r.pointGeometry(0,0),new r.pointGeometry(1,0),new r.pointGeometry(1,Ee)]:[new r.pointGeometry(1,Ee),new r.pointGeometry(1,1),new r.pointGeometry(0,1),new r.pointGeometry(0,Ee)],$e.push(...Ae),_e.length===0?$e.push(ge[0]):$e.push(..._e),{polygon:$e.map(De=>new r.MercatorCoordinate(De.x,De.y)),unwrapped:!1}}(o,f);if(b)return b;const T=function(M,F){let j=!1,q=-1/0,Y=0;for(let te=0;te<M.length-1;te++)M[te].x>q&&(q=M[te].x,Y=te);for(let te=0;te<M.length-1;te++){const ae=(Y+te)%(M.length-1),ue=M[ae],pe=M[ae+1];Math.abs(ue.x-pe.x)>.5&&(ue.x<pe.x?(ue.x+=1,ae===0&&(M[M.length-1].x+=1)):(pe.x+=1,ae+1===M.length-1&&(M[0].x+=1)),j=!0)}const J=r.mercatorXfromLng(F.center.lng);return j&&J<Math.abs(J-1)&&M.forEach(te=>{te.x-=1}),{polygon:M,unwrapped:j}}(En(o,f).map(M=>new r.pointGeometry(Vn(M.x),M.y)),f);return{polygon:T.polygon.map(M=>new r.MercatorCoordinate(M.x,M.y)),unwrapped:T.unwrapped}}}function En(_,o){return r.resample(_,f=>{const b=o.pointCoordinate3D(f);f.x=b.x,f.y=b.y},1/256)}function Vn(_){return _<0?1+_%1:_%1}function ni(_){return 100*_|0}function Xn(_,o,f,b,T){const M=function(F,j){if(F)return T(F);if(j){const q=r.pick(r.extend(j,_),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);j.vector_layers&&(q.vectorLayers=j.vector_layers,q.vectorLayerIds=q.vectorLayers.map(Y=>Y.id)),j.language_options&&(q.languageOptions=j.language_options),j.language&&j.language[j.id]&&(q.language=j.language[j.id]),j.worldview_options&&(q.worldviewOptions=j.worldview_options),j.worldview?q.worldview=j.worldview[j.id]:j.worldview_default&&(q.worldview=j.worldview_default),q.tiles=o.canonicalizeTileset(q,_.url),T(null,q)}};return _.url?r.getJSON(o.transformRequest(o.normalizeSourceURL(_.url,null,f,b),r.ResourceType.Source),M):r.exported.frame(()=>M(null,_))}class Ln{constructor(o,f,b){this.bounds=r.LngLatBounds.convert(this.validateBounds(o)),this.minzoom=f||0,this.maxzoom=b||24}validateBounds(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){const f=Math.pow(2,o.z),b=Math.floor(r.mercatorXfromLng(this.bounds.getWest())*f),T=Math.floor(r.mercatorYfromLat(this.bounds.getNorth())*f),M=Math.ceil(r.mercatorXfromLng(this.bounds.getEast())*f),F=Math.ceil(r.mercatorYfromLat(this.bounds.getSouth())*f);return o.x>=b&&o.x<M&&o.y>=T&&o.y<F}}class gi{constructor(o,f,b){this.context=o;const T=o.gl;this.buffer=T.createBuffer(),this.dynamicDraw=Boolean(b),this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),T.bufferData(T.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||f.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){const f=this.context.gl;this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const yi={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ei{constructor(o,f,b,T){this.length=f.length,this.attributes=b,this.itemSize=f.bytesPerElement,this.dynamicDraw=T,this.context=o;const M=o.gl;this.buffer=M.createBuffer(),o.bindVertexBuffer.set(this.buffer),M.bufferData(M.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?M.DYNAMIC_DRAW:M.STATIC_DRAW),this.dynamicDraw||f.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){const f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,f){for(let b=0;b<this.attributes.length;b++){const T=f.attributes[this.attributes[b].name];T!==void 0&&o.enableVertexAttribArray(T)}}setVertexAttribPointers(o,f,b){for(let T=0;T<this.attributes.length;T++){const M=this.attributes[T],F=f.attributes[M.name];F!==void 0&&o.vertexAttribPointer(F,M.components,o[yi[M.type]],!1,this.itemSize,M.offset+this.itemSize*(b||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ve{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ve extends ve{getDefault(){return r.Color.transparent}set(o){const f=this.current;(o.r!==f.r||o.g!==f.g||o.b!==f.b||o.a!==f.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class pt extends ve{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class Ze extends ve{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class mt extends ve{getDefault(){return[!0,!0,!0,!0]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||o[2]!==f[2]||o[3]!==f[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Qe extends ve{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class Ue extends ve{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class vt extends ve{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){const f=this.current;(o.func!==f.func||o.ref!==f.ref||o.mask!==f.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class dt extends ve{getDefault(){const o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||o[2]!==f[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class ct extends ve{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this.current=o,this.dirty=!1}}class Tt extends ve{getDefault(){return[0,1]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class tt extends ve{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this.current=o,this.dirty=!1}}class st extends ve{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class Et extends ve{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.BLEND):f.disable(f.BLEND),this.current=o,this.dirty=!1}}class It extends ve{getDefault(){const o=this.gl;return[o.ONE,o.ZERO]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)}}class dn extends ve{getDefault(){return r.Color.transparent}set(o){const f=this.current;(o.r!==f.r||o.g!==f.g||o.b!==f.b||o.a!==f.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class gn extends ve{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)}}class Un extends ve{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this.current=o,this.dirty=!1}}class oi extends ve{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class Ui extends ve{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}class Wr extends ve{getDefault(){return null}set(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)}}class fr extends ve{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class Dr extends ve{getDefault(){const o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||o[2]!==f[2]||o[3]!==f[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Ti extends ve{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class ji extends ve{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindRenderbuffer(f.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Zr extends ve{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindTexture(f.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class wo extends ve{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class bs extends ve{getDefault(){return null}set(o){const f=this.gl;f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Rr extends ve{constructor(o){super(o),this.vao=o.extVertexArrayObject}getDefault(){return null}set(o){this.vao&&(o!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(o),this.current=o,this.dirty=!1)}}class $r extends ve{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class Yr extends ve{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class Uo extends ve{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class Gi extends ve{constructor(o,f){super(o),this.context=o,this.parent=f}getDefault(){return null}}class Eo extends Gi{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class ye extends Gi{attachment(){return this.gl.DEPTH_ATTACHMENT}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,this.attachment(),f.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class ee extends ye{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class oe{constructor(o,f,b,T){this.context=o,this.width=f,this.height=b;const M=this.framebuffer=o.gl.createFramebuffer();this.colorAttachment=new Eo(o,M),T&&(this.depthAttachment=new ye(o,M))}destroy(){const o=this.context.gl,f=this.colorAttachment.get();if(f&&o.deleteTexture(f),this.depthAttachment){const b=this.depthAttachment.get();b&&o.deleteRenderbuffer(b)}o.deleteFramebuffer(this.framebuffer)}}class be{constructor(o){this.gl=o,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ve(this),this.clearDepth=new pt(this),this.clearStencil=new Ze(this),this.colorMask=new mt(this),this.depthMask=new Qe(this),this.stencilMask=new Ue(this),this.stencilFunc=new vt(this),this.stencilOp=new dt(this),this.stencilTest=new ct(this),this.depthRange=new Tt(this),this.depthTest=new tt(this),this.depthFunc=new st(this),this.blend=new Et(this),this.blendFunc=new It(this),this.blendColor=new dn(this),this.blendEquation=new gn(this),this.cullFace=new Un(this),this.cullFaceSide=new oi(this),this.frontFace=new Ui(this),this.program=new Wr(this),this.activeTexture=new fr(this),this.viewport=new Dr(this),this.bindFramebuffer=new Ti(this),this.bindRenderbuffer=new ji(this),this.bindTexture=new Zr(this),this.bindVertexBuffer=new wo(this),this.bindElementBuffer=new bs(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Rr(this),this.pixelStoreUnpack=new $r(this),this.pixelStoreUnpackPremultiplyAlpha=new Yr(this),this.pixelStoreUnpackFlipY=new Uo(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extTextureHalfFloat=o.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(o.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=o.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=o.getExtension("OES_standard_derivatives"),this.extTimerQuery=o.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,f){return new gi(this,o,f)}createVertexBuffer(o,f,b){return new Ei(this,o,f,b)}createRenderbuffer(o,f,b){const T=this.gl,M=T.createRenderbuffer();return this.bindRenderbuffer.set(M),T.renderbufferStorage(T.RENDERBUFFER,o,f,b),this.bindRenderbuffer.set(null),M}createFramebuffer(o,f,b){return new oe(this,o,f,b)}clear({color:o,depth:f,stencil:b}){const T=this.gl;let M=0;o&&(M|=T.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set([!0,!0,!0,!0])),f!==void 0&&(M|=T.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),b!==void 0&&(M|=T.STENCIL_BUFFER_BIT,this.clearStencil.set(b),this.stencilMask.set(255)),T.clear(M)}setCullFace(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){y(o.blendFunction,r.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class ke extends r.Evented{constructor(o,f,b,T){super(),this.id=o,this.dispatcher=b,this.setEventedParent(T),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.extend({type:"raster"},f),r.extend(this,r.pick(f,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Xn(this._options,this.map._requestManager,null,null,(o,f)=>{this._tileJSONRequest=null,this._loaded=!0,o?this.fire(new r.ErrorEvent(o)):f&&(r.extend(this,f),f.bounds&&(this.tileBounds=new Ln(f.bounds,this.minzoom,this.maxzoom)),r.postTurnstileEvent(f.tiles),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return r.extend({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o,f){const b=r.exported.devicePixelRatio>=2,T=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),b,this.tileSize);o.request=r.getImage(this.map._requestManager.transformRequest(T,r.ResourceType.Tile),(M,F,j,q)=>(delete o.request,o.aborted?(o.state="unloaded",f(null)):M?(o.state="errored",f(M)):F?(this.map._refreshExpiredTiles&&o.setExpiryData({cacheControl:j,expires:q}),o.setTexture(F,this.map.painter),o.state="loaded",r.cacheEntryPossiblyAdded(this.dispatcher),void f(null)):f(null)))}static loadTileData(o,f,b){o.setTexture(f,b)}static unloadTileData(o,f){o.texture&&f.saveTileTexture(o.texture)}abortTile(o,f){o.request&&(o.request.cancel(),delete o.request),f()}unloadTile(o,f){o.texture&&this.map.painter.saveTileTexture(o.texture),f()}hasTransition(){return!1}}let Oe;function Ye(_,o,f,b,T,M,F,j){const q=[_,f,T,o,b,M,1,1,1],Y=[F,j,1],J=r.adjoint([],q),[te,ae,ue]=r.transformMat3(Y,Y,r.transpose(J,J));return r.multiply$1(q,[te,0,0,0,ae,0,0,0,ue],q)}class We extends r.Evented{constructor(o,f,b,T){super(),this.id=o,this.dispatcher=b,this.coordinates=f.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(T),this.options=f}load(o,f){this._loaded=f||!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this.url=this.options.url,r.getImage(this.map._requestManager.transformRequest(this.url,r.ResourceType.Image),(b,T)=>{if(this._loaded=!0,b)this.fire(new r.ErrorEvent(b));else if(T){const{HTMLImageElement:M}=r.window;this.image=T instanceof M?r.exported.getImageData(T):T,this.width=this.image.width,this.height=this.image.height,o&&(this.coordinates=o),this._finishLoading()}})}loaded(){return this._loaded}updateImage(o){return this.image&&o.url?(this.options.url=o.url,this.load(o.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}onRemove(){this.texture&&this.texture.destroy()}setCoordinates(o){this.coordinates=o,this._boundsArray=void 0;const f=o.map(r.MercatorCoordinate.fromLngLat);return this.tileID=function(b){let T=1/0,M=1/0,F=-1/0,j=-1/0;for(const te of b)T=Math.min(T,te.x),M=Math.min(M,te.y),F=Math.max(F,te.x),j=Math.max(j,te.y);const q=Math.max(F-T,j-M),Y=Math.max(0,Math.floor(-Math.log(q)/Math.LN2)),J=Math.pow(2,Y);return new r.CanonicalTileID(Y,Math.floor((T+F)/2*J),Math.floor((M+j)/2*J))}(f),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(o){for(const q in this.tiles){const Y=this.tiles[q];Y.state!=="loaded"&&(Y.state="loaded",Y.texture=this.texture)}if(this._boundsArray)return;const f=r.tileTransform(this.tileID,this.map.transform.projection),[b,T,M,F]=this.coordinates.map(q=>{const Y=f.projection.project(q[0],q[1]);return r.getTilePoint(f,Y)._round()});this.perspectiveTransform=function(q,Y,J,te,ae,ue,pe,le,Se,ce){const ge=Ye(0,0,q,0,0,Y,q,Y),_e=Ye(J,te,ae,ue,pe,le,Se,ce);return r.multiply$1(_e,r.adjoint(ge,ge),_e),[_e[6]/_e[8]*q/r.EXTENT,_e[7]/_e[8]*Y/r.EXTENT]}(this.width,this.height,b.x,b.y,T.x,T.y,F.x,F.y,M.x,M.y);const j=this._boundsArray=new r.StructArrayLayout4i8;j.emplaceBack(b.x,b.y,0,0),j.emplaceBack(T.x,T.y,r.EXTENT,0),j.emplaceBack(F.x,F.y,0,r.EXTENT),j.emplaceBack(M.x,M.y,r.EXTENT,r.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=o.createVertexBuffer(j,r.boundsAttributes.members),this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const o=this.map.painter.context,f=o.gl;this.texture?this.texture.update(this.image):(this.texture=new r.Texture(o,this.image,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE)),this._prepareData(o)}loadTile(o,f){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},f(null)):(o.state="errored",f(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Be={vector:class extends r.Evented{constructor(_,o,f,b){if(super(),this.id=_,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,r.extend(this,r.pick(o,["url","scheme","tileSize","promoteId"])),this._options=r.extend({type:"vector"},o),this._collectResourceTiming=o.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(b),this._tileWorkers={},this._deduped=new r.DedupedRequest}load(_){this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"}));const o=this.language||this.map._language,f=this.worldview||this.map._worldview;this._tileJSONRequest=Xn(this._options,this.map._requestManager,o,f,(b,T)=>{this._tileJSONRequest=null,this._loaded=!0,b?(o&&console.warn(`Ensure that your requested language string is a valid BCP-47 code. Found: ${o}`),f&&f.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${f}`),this.fire(new r.ErrorEvent(b))):T&&(r.extend(this,T),T.bounds&&(this.tileBounds=new Ln(T.bounds,this.minzoom,this.maxzoom)),r.postTurnstileEvent(T.tiles,this.map._requestManager._customAccessToken),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"}))),_&&_(b)})}loaded(){return this._loaded}hasTile(_){return!this.tileBounds||this.tileBounds.contains(_.canonical)}onAdd(_){this.map=_,this.load()}setSourceProperty(_){this._tileJSONRequest&&this._tileJSONRequest.cancel(),_(),this.load(()=>{const o=this.map.style._getSourceCaches(this.id);for(const f of o)f.clearTiles()})}setTiles(_){return this.setSourceProperty(()=>{this._options.tiles=_}),this}setUrl(_){return this.setSourceProperty(()=>{this.url=_,this._options.url=_}),this}_setLanguage(_){return _===this.language||this.setSourceProperty(()=>{this.language=_}),this}_setWorldview(_){return _===this.worldview?this:this.worldviewOptions&&_&&!this.worldviewOptions[_]?(console.warn(`Vector tile source "${this.id}" does not support worldview "${_}".`),this):(this.setSourceProperty(()=>{this.worldview=_}),this)}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return r.extend({},this._options)}loadTile(_,o){const f=this.map._requestManager.normalizeTileURL(_.tileID.canonical.url(this.tiles,this.scheme)),b={request:this.map._requestManager.transformRequest(f,r.ResourceType.Tile),data:void 0,uid:_.uid,tileID:_.tileID,tileZoom:_.tileZoom,zoom:_.tileID.overscaledZ,tileSize:this.tileSize*_.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:r.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:_.isSymbolTile};if(b.request.collectResourceTiming=this._collectResourceTiming,_.actor&&_.state!=="expired")_.state==="loading"?_.reloadCallback=o:_.request=_.actor.send("reloadTile",b,T.bind(this));else if(_.actor=this._tileWorkers[f]=this._tileWorkers[f]||this.dispatcher.getActor(),this.dispatcher.ready)_.request=_.actor.send("loadTile",b,T.bind(this),void 0,!0);else{const M=r.loadVectorTile.call({deduped:this._deduped},b,(F,j)=>{F||!j?T.call(this,F):(b.data={cacheControl:j.cacheControl,expires:j.expires,rawData:j.rawData.slice(0)},_.actor&&_.actor.send("loadTile",b,T.bind(this),void 0,!0))},!0);_.request={cancel:M}}function T(M,F){return delete _.request,_.aborted?o(null):M&&M.status!==404?o(M):(F&&F.resourceTiming&&(_.resourceTiming=F.resourceTiming),this.map._refreshExpiredTiles&&F&&_.setExpiryData(F),_.loadVectorData(F,this.map.painter),r.cacheEntryPossiblyAdded(this.dispatcher),o(null),void(_.reloadCallback&&(this.loadTile(_,_.reloadCallback),_.reloadCallback=null)))}}abortTile(_){_.request&&(_.request.cancel(),delete _.request),_.actor&&_.actor.send("abortTile",{uid:_.uid,type:this.type,source:this.id})}unloadTile(_){_.unloadVectorData(),_.actor&&_.actor.send("removeTile",{uid:_.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:ke,"raster-dem":class extends ke{constructor(_,o,f,b){super(_,o,f,b),this.type="raster-dem",this.maxzoom=22,this._options=r.extend({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox"}loadTile(_,o){const f=this.map._requestManager.normalizeTileURL(_.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function b(T,M){T&&(_.state="errored",o(T)),M&&(_.dem=M,_.dem.onDeserialize(),_.needsHillshadePrepare=!0,_.needsDEMTextureUpload=!0,_.state="loaded",o(null))}_.request=r.getImage(this.map._requestManager.transformRequest(f,r.ResourceType.Tile),function(T,M,F,j){if(delete _.request,_.aborted)_.state="unloaded",o(null);else if(T)_.state="errored",o(T);else if(M){this.map._refreshExpiredTiles&&_.setExpiryData({cacheControl:F,expires:j});const q=r.window.ImageBitmap&&M instanceof r.window.ImageBitmap&&(Oe==null&&(Oe=r.window.OffscreenCanvas&&new r.window.OffscreenCanvas(1,1).getContext("2d")&&typeof r.window.createImageBitmap=="function"),Oe),Y=1-(M.width-r.prevPowerOfTwo(M.width))/2;Y<1||_.neighboringTiles||(_.neighboringTiles=this._getNeighboringTiles(_.tileID));const J=q?M:r.exported.getImageData(M,Y),te={uid:_.uid,coord:_.tileID,source:this.id,rawImageData:J,encoding:this.encoding,padding:Y};_.actor&&_.state!=="expired"||(_.actor=this.dispatcher.getActor(),_.actor.send("loadDEMTile",te,b.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(_){const o=_.canonical,f=Math.pow(2,o.z),b=(o.x-1+f)%f,T=o.x===0?_.wrap-1:_.wrap,M=(o.x+1+f)%f,F=o.x+1===f?_.wrap+1:_.wrap,j={};return j[new r.OverscaledTileID(_.overscaledZ,T,o.z,b,o.y).key]={backfilled:!1},j[new r.OverscaledTileID(_.overscaledZ,F,o.z,M,o.y).key]={backfilled:!1},o.y>0&&(j[new r.OverscaledTileID(_.overscaledZ,T,o.z,b,o.y-1).key]={backfilled:!1},j[new r.OverscaledTileID(_.overscaledZ,_.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},j[new r.OverscaledTileID(_.overscaledZ,F,o.z,M,o.y-1).key]={backfilled:!1}),o.y+1<f&&(j[new r.OverscaledTileID(_.overscaledZ,T,o.z,b,o.y+1).key]={backfilled:!1},j[new r.OverscaledTileID(_.overscaledZ,_.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},j[new r.OverscaledTileID(_.overscaledZ,F,o.z,M,o.y+1).key]={backfilled:!1}),j}unloadTile(_){_.demTexture&&this.map.painter.saveTileTexture(_.demTexture),_.fbo&&(_.fbo.destroy(),delete _.fbo),_.dem&&delete _.dem,delete _.neighboringTiles,_.state="unloaded"}},geojson:class extends r.Evented{constructor(_,o,f,b){super(),this.id=_,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=f.getActor(),this.setEventedParent(b),this._data=o.data,this._options=r.extend({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId;const T=r.EXTENT/this.tileSize;this.workerOptions=r.extend({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:(o.buffer!==void 0?o.buffer:128)*T,tolerance:(o.tolerance!==void 0?o.tolerance:.375)*T,extent:r.EXTENT,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:o.clusterMaxZoom!==void 0?o.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,o.clusterMinPoints||2),extent:r.EXTENT,radius:(o.clusterRadius!==void 0?o.clusterRadius:50)*T,log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter},o.workerOptions)}onAdd(_){this.map=_,this.setData(this._data)}setData(_){return this._data=_,this._updateWorkerData(),this}getClusterExpansionZoom(_,o){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:_,source:this.id},o),this}getClusterChildren(_,o){return this.actor.send("geojson.getClusterChildren",{clusterId:_,source:this.id},o),this}getClusterLeaves(_,o,f,b){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:_,limit:o,offset:f},b),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new r.Event("dataloading",{dataType:"source"})),this._loaded=!1;const _=r.extend({},this.workerOptions),o=this._data;typeof o=="string"?(_.request=this.map._requestManager.transformRequest(r.exported.resolveURL(o),r.ResourceType.Source),_.request.collectResourceTiming=this._collectResourceTiming):_.data=JSON.stringify(o),this._pendingLoad=this.actor.send(`${this.type}.loadData`,_,(f,b)=>{if(this._loaded=!0,this._pendingLoad=null,f)this.fire(new r.ErrorEvent(f));else{const T={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&b&&b.resourceTiming&&b.resourceTiming[this.id]&&(T.resourceTiming=b.resourceTiming[this.id]),this.fire(new r.Event("data",T)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(_,o){const f=_.actor?"reloadTile":"loadTile";_.actor=this.actor,_.request=this.actor.send(f,{type:this.type,uid:_.uid,tileID:_.tileID,tileZoom:_.tileZoom,zoom:_.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:r.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(b,T)=>(delete _.request,_.unloadVectorData(),_.aborted?o(null):b?o(b):(_.loadVectorData(T,this.map.painter,f==="reloadTile"),o(null))),void 0,f==="loadTile")}abortTile(_){_.request&&(_.request.cancel(),delete _.request),_.aborted=!0}unloadTile(_){_.unloadVectorData(),this.actor.send("removeTile",{uid:_.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return r.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends We{constructor(_,o,f,b){super(_,o,f,b),this.roundZoom=!0,this.type="video",this.options=o}load(){this._loaded=!1;const _=this.options;this.urls=[];for(const o of _.urls)this.urls.push(this.map._requestManager.transformRequest(o,r.ResourceType.Source).url);r.getVideo(this.urls,(o,f)=>{this._loaded=!0,o?this.fire(new r.ErrorEvent(o)):f&&(this.video=f,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(_){if(this.video){const o=this.video.seekable;_<o.start(0)||_>o.end(0)?this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=_}}getVideo(){return this.video}onAdd(_){this.map||(this.map=_,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _=this.map.painter.context,o=_.gl;this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new r.Texture(_,this.video,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(_)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:We,canvas:class extends We{constructor(_,o,f,b){super(_,o,f,b),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some(T=>!Array.isArray(T)||T.length!==2||T.some(M=>typeof M!="number"))||this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${_}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${_}`,null,'missing required property "coordinates"'))),o.animate&&typeof o.animate!="boolean"&&this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${_}`,null,'optional "animate" property must be a boolean value'))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof r.window.HTMLCanvasElement||this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${_}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${_}`,null,'missing required property "canvas"'))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof r.window.HTMLCanvasElement?this.options.canvas:r.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new r.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(_){this.map=_,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const o=this.map.painter.context;this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new r.Texture(o,this.canvas,o.gl.RGBA,{premultiply:!0}),this._prepareData(o)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const _ of[this.canvas.width,this.canvas.height])if(isNaN(_)||_<=0)return!0;return!1}},custom:class extends r.Evented{constructor(_,o,f,b){super(),this.id=_,this.type="custom",this._dataType="raster",this._dispatcher=f,this._implementation=o,this.setEventedParent(b),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new r.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new r.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Ln(this._implementation.bounds,this.minzoom,this.maxzoom)),o.update=this._update.bind(this),o.coveringTiles=this._coveringTiles.bind(this),r.extend(this,r.pick(o,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return r.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(_){this._map=_,this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(_),this.load()}onRemove(_){this._implementation.onRemove&&this._implementation.onRemove(_)}hasTile(_){if(this._implementation.hasTile){const{x:o,y:f,z:b}=_.canonical;return this._implementation.hasTile({x:o,y:f,z:b})}return!this.tileBounds||this.tileBounds.contains(_.canonical)}loadTile(_,o){const{x:f,y:b,z:T}=_.tileID.canonical,M=new r.window.AbortController,F=this._implementation.loadTile({x:f,y:b,z:T},{signal:M.signal});if(!F)return this.loadTileData(_,{width:this.tileSize,height:this.tileSize,data:null}),_.state="loaded",o(null);F.cancel=()=>M.abort(),_.request=F.then(function(j){return delete _.request,_.aborted?(_.state="unloaded",o(null)):j?function(q){return q instanceof r.window.ImageData||q instanceof r.window.ImageBitmap||q instanceof r.window.HTMLCanvasElement}(j)?(this.loadTileData(_,j),_.state="loaded",void o(null)):(_.state="errored",o(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`))):(this.loadTileData(_,{width:this.tileSize,height:this.tileSize,data:null}),_.state="loaded",o(null))}.bind(this)).catch(j=>{j.code!==20&&(_.state="errored",o(j))})}loadTileData(_,o){ke.loadTileData(_,o,this._map.painter)}unloadTileData(_){ke.unloadTileData(_,this._map.painter)}prepareTile(_){if(!this._implementation.prepareTile)return null;const{x:o,y:f,z:b}=_.tileID.canonical,T=this._implementation.prepareTile({x:o,y:f,z:b});return T?(this.loadTileData(_,T),_.state="loaded",T):null}unloadTile(_,o){if(this.unloadTileData(_),this._implementation.unloadTile){const{x:f,y:b,z:T}=_.tileID.canonical;this._implementation.unloadTile({x:f,y:b,z:T})}o()}abortTile(_,o){_.request&&_.request.cancel&&(_.request.cancel(),delete _.request),o()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(_=>({x:_.canonical.x,y:_.canonical.y,z:_.canonical.z}))}_update(){this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Xe=function(_,o,f,b){const T=new Be[o.type](_,o,f,b);if(T.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${T.id}`);return r.bindAll(["load","abort","unload","serialize","prepare"],T),T};function xt(_,o){const f=r.identity([]);return r.scale(f,f,[.5*_.width,.5*-_.height,1]),r.translate(f,f,[1,-1,0]),r.multiply(f,f,_.calculateProjMatrix(o.toUnwrapped())),Float32Array.from(f)}function jt(_,o,f,b,T,M,F,j=!1){const q=_.tilesIn(b,F,j);q.sort(tn);const Y=[];for(const te of q)Y.push({wrappedTileID:te.tile.tileID.wrapped().key,queryResults:te.tile.queryRenderedFeatures(o,f,_._state,te,T,M,xt(_.transform,te.tile.tileID),j)});const J=function(te){const ae={},ue={};for(const pe of te){const le=pe.queryResults,Se=pe.wrappedTileID,ce=ue[Se]=ue[Se]||{};for(const ge in le){const _e=le[ge],$e=ce[ge]=ce[ge]||{},Ee=ae[ge]=ae[ge]||[];for(const Ae of _e)$e[Ae.featureIndex]||($e[Ae.featureIndex]=!0,Ee.push(Ae))}}return ae}(Y);for(const te in J)J[te].forEach(ae=>{const ue=ae.feature,pe=ue.layer;pe&&pe.type!=="background"&&pe.type!=="sky"&&(ue.source=pe.source,pe["source-layer"]&&(ue.sourceLayer=pe["source-layer"]),ue.state=ue.id!==void 0?_.getFeatureState(pe["source-layer"],ue.id):{})});return J}function Ct(_,o){const f=_.getRenderableIds().map(M=>_.getTileByID(M)),b=[],T={};for(let M=0;M<f.length;M++){const F=f[M],j=F.tileID.canonical.key;T[j]||(T[j]=!0,F.querySourceFeatures(b,o))}return b}function tn(_,o){const f=_.tileID,b=o.tileID;return f.overscaledZ-b.overscaledZ||f.canonical.y-b.canonical.y||f.wrap-b.wrap||f.canonical.x-b.canonical.x}function pn(){return Oa.workerClass!=null?new Oa.workerClass:new r.window.Worker(Oa.workerUrl)}const ln="mapboxgl_preloaded_worker_pool";class _n{constructor(){this.active={}}acquire(o){if(!this.workers)for(this.workers=[];this.workers.length<_n.workerCount;)this.workers.push(new pn);return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],this.numActive()===0&&(this.workers.forEach(f=>{f.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ln]}numActive(){return Object.keys(this.active).length}}let bn;function Bn(){return bn||(bn=new _n),bn}function ui(_,o){const f={};for(const b in _)b!=="ref"&&(f[b]=_[b]);return r.refProperties.forEach(b=>{b in o&&(f[b]=o[b])}),f}function Jn(_){_=_.slice();const o=Object.create(null);for(let f=0;f<_.length;f++)o[_[f].id]=_[f];for(let f=0;f<_.length;f++)"ref"in _[f]&&(_[f]=ui(_[f],o[_[f].ref]));return _}_n.workerCount=2;const qe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function rr(_,o,f){f.push({command:qe.addSource,args:[_,o[_]]})}function mi(_,o,f){o.push({command:qe.removeSource,args:[_]}),f[_]=!0}function or(_,o,f,b){mi(_,f,b),rr(_,o,f)}function Ja(_,o,f){let b;for(b in _[f])if(_[f].hasOwnProperty(b)&&b!=="data"&&!y(_[f][b],o[f][b]))return!1;for(b in o[f])if(o[f].hasOwnProperty(b)&&b!=="data"&&!y(_[f][b],o[f][b]))return!1;return!0}function Yi(_,o,f,b,T,M){let F;for(F in o=o||{},_=_||{})_.hasOwnProperty(F)&&(y(_[F],o[F])||f.push({command:M,args:[b,F,o[F],T]}));for(F in o)o.hasOwnProperty(F)&&!_.hasOwnProperty(F)&&(y(_[F],o[F])||f.push({command:M,args:[b,F,o[F],T]}))}function Co(_){return _.id}function Qs(_,o){return _[o.id]=o,_}class so{constructor(o,f){this.reset(o,f)}reset(o,f){this.points=o||[],this._distances=[0];for(let b=1;b<this.points.length;b++)this._distances[b]=this._distances[b-1]+this.points[b].dist(this.points[b-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(this.points.length===1)return this.points[0];o=r.clamp(o,0,1);let f=1,b=this._distances[f];const T=o*this.paddedLength+this.padding;for(;b<T&&f<this._distances.length;)b=this._distances[++f];const M=f-1,F=this._distances[M],j=b-F,q=j>0?(T-F)/j:0;return this.points[M].mult(1-q).add(this.points[f].mult(q))}}class qt{constructor(o,f,b){const T=this.boxCells=[],M=this.circleCells=[];this.xCellCount=Math.ceil(o/b),this.yCellCount=Math.ceil(f/b);for(let F=0;F<this.xCellCount*this.yCellCount;F++)T.push([]),M.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=f,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,f,b,T,M){this._forEachCell(f,b,T,M,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(f),this.bboxes.push(b),this.bboxes.push(T),this.bboxes.push(M)}insertCircle(o,f,b,T){this._forEachCell(f-T,b-T,f+T,b+T,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(f),this.circles.push(b),this.circles.push(T)}_insertBoxCell(o,f,b,T,M,F){this.boxCells[M].push(F)}_insertCircleCell(o,f,b,T,M,F){this.circleCells[M].push(F)}_query(o,f,b,T,M,F){if(b<0||o>this.width||T<0||f>this.height)return!M&&[];const j=[];if(o<=0&&f<=0&&this.width<=b&&this.height<=T){if(M)return!0;for(let q=0;q<this.boxKeys.length;q++)j.push({key:this.boxKeys[q],x1:this.bboxes[4*q],y1:this.bboxes[4*q+1],x2:this.bboxes[4*q+2],y2:this.bboxes[4*q+3]});for(let q=0;q<this.circleKeys.length;q++){const Y=this.circles[3*q],J=this.circles[3*q+1],te=this.circles[3*q+2];j.push({key:this.circleKeys[q],x1:Y-te,y1:J-te,x2:Y+te,y2:J+te})}return F?j.filter(F):j}return this._forEachCell(o,f,b,T,this._queryCell,j,{hitTest:M,seenUids:{box:{},circle:{}}},F),M?j.length>0:j}_queryCircle(o,f,b,T,M){const F=o-b,j=o+b,q=f-b,Y=f+b;if(j<0||F>this.width||Y<0||q>this.height)return!T&&[];const J=[];return this._forEachCell(F,q,j,Y,this._queryCellCircle,J,{hitTest:T,circle:{x:o,y:f,radius:b},seenUids:{box:{},circle:{}}},M),T?J.length>0:J}query(o,f,b,T,M){return this._query(o,f,b,T,!1,M)}hitTest(o,f,b,T,M){return this._query(o,f,b,T,!0,M)}hitTestCircle(o,f,b,T){return this._queryCircle(o,f,b,!0,T)}_queryCell(o,f,b,T,M,F,j,q){const Y=j.seenUids,J=this.boxCells[M];if(J!==null){const ae=this.bboxes;for(const ue of J)if(!Y.box[ue]){Y.box[ue]=!0;const pe=4*ue;if(o<=ae[pe+2]&&f<=ae[pe+3]&&b>=ae[pe+0]&&T>=ae[pe+1]&&(!q||q(this.boxKeys[ue]))){if(j.hitTest)return F.push(!0),!0;F.push({key:this.boxKeys[ue],x1:ae[pe],y1:ae[pe+1],x2:ae[pe+2],y2:ae[pe+3]})}}}const te=this.circleCells[M];if(te!==null){const ae=this.circles;for(const ue of te)if(!Y.circle[ue]){Y.circle[ue]=!0;const pe=3*ue;if(this._circleAndRectCollide(ae[pe],ae[pe+1],ae[pe+2],o,f,b,T)&&(!q||q(this.circleKeys[ue]))){if(j.hitTest)return F.push(!0),!0;{const le=ae[pe],Se=ae[pe+1],ce=ae[pe+2];F.push({key:this.circleKeys[ue],x1:le-ce,y1:Se-ce,x2:le+ce,y2:Se+ce})}}}}}_queryCellCircle(o,f,b,T,M,F,j,q){const Y=j.circle,J=j.seenUids,te=this.boxCells[M];if(te!==null){const ue=this.bboxes;for(const pe of te)if(!J.box[pe]){J.box[pe]=!0;const le=4*pe;if(this._circleAndRectCollide(Y.x,Y.y,Y.radius,ue[le+0],ue[le+1],ue[le+2],ue[le+3])&&(!q||q(this.boxKeys[pe])))return F.push(!0),!0}}const ae=this.circleCells[M];if(ae!==null){const ue=this.circles;for(const pe of ae)if(!J.circle[pe]){J.circle[pe]=!0;const le=3*pe;if(this._circlesCollide(ue[le],ue[le+1],ue[le+2],Y.x,Y.y,Y.radius)&&(!q||q(this.circleKeys[pe])))return F.push(!0),!0}}}_forEachCell(o,f,b,T,M,F,j,q){const Y=this._convertToXCellCoord(o),J=this._convertToYCellCoord(f),te=this._convertToXCellCoord(b),ae=this._convertToYCellCoord(T);for(let ue=Y;ue<=te;ue++)for(let pe=J;pe<=ae;pe++)if(M.call(this,o,f,b,T,this.xCellCount*pe+ue,F,j,q))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,f,b,T,M,F){const j=T-o,q=M-f,Y=b+F;return Y*Y>j*j+q*q}_circleAndRectCollide(o,f,b,T,M,F,j){const q=(F-T)/2,Y=Math.abs(o-(T+q));if(Y>q+b)return!1;const J=(j-M)/2,te=Math.abs(f-(M+J));if(te>J+b)return!1;if(Y<=q||te<=J)return!0;const ae=Y-q,ue=te-J;return ae*ae+ue*ue<=b*b}}const On=Math.tan(85*Math.PI/180);function xn(_,o,f,b,T,M,F){const j=r.create();if(f)if(M.name==="globe"){const q=r.calculateGlobeLabelMatrix(T,o);r.multiply(j,j,q)}else{const q=Ce([],F);j[0]=q[0],j[1]=q[1],j[4]=q[2],j[5]=q[3],b||r.rotateZ(j,j,T.angle)}else r.multiply(j,T.labelPlaneMatrix,_);return j}function hr(_,o,f,b,T,M,F){const j=xn(_,o,f,b,T,M,F);return M.name==="globe"&&f||(j[2]=j[6]=j[10]=j[14]=0),j}function Xr(_,o,f,b,T,M,F){if(f){if(M.name==="globe"){const j=xn(_,o,f,b,T,M,F);return r.invert(j,j),r.multiply(j,_,j),j}{const j=r.clone(_),q=r.identity([]);return q[0]=F[0],q[1]=F[1],q[4]=F[2],q[5]=F[3],r.multiply(j,j,q),b||r.rotateZ(j,j,-T.angle),j}}return T.glCoordMatrix}function Cn(_,o,f=0){const b=[_.x,_.y,f,1];f?r.transformMat4$1(b,b,o):Pt(b,b,o);const T=b[3];return{point:[b[0]/T,b[1]/T,b[2]/T],signedDistanceFromCamera:T}}function me(_,o){const f=[_[0],_[1],_[2],1];r.transformMat4$1(f,f,o);const b=f[3];return{point:[f[0]/b,f[1]/b,f[2]/b],signedDistanceFromCamera:b}}function Ne(_,o){return Math.min(.5+_/o*.5,1.5)}function He(_,o){const f=_[0]/_[3],b=_[1]/_[3];return f>=-o[0]&&f<=o[0]&&b>=-o[1]&&b<=o[1]}function rt(_,o,f,b,T,M,F,j,q,Y){const J=f.transform,te=b?_.textSizeData:_.iconSizeData,ae=r.evaluateSizeForZoom(te,f.transform.zoom),ue=J.projection.name==="globe",pe=[256/f.width*2+1,256/f.height*2+1],le=b?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;le.clear();let Se=null;ue&&(Se=b?_.text.globeExtVertexArray:_.icon.globeExtVertexArray);const ce=_.lineVertexArray,ge=b?_.text.placedSymbolArray:_.icon.placedSymbolArray,_e=f.transform.width/f.transform.height;let $e=!1;for(let Ee=0;Ee<ge.length;Ee++){const Ae=ge.get(Ee);if(Ae.writingMode!==r.WritingMode.vertical||$e||Ee!==0&&ge.get(Ee-1).writingMode===r.WritingMode.horizontal||($e=!0),(Ae.hidden||Ae.writingMode===r.WritingMode.vertical)&&!$e){Lt(Ae.numGlyphs,le);continue}$e=!1;const De=new r.pointGeometry(Ae.tileAnchorX,Ae.tileAnchorY),nt=q?q(De):[0,0,0],at=J.projection.projectTilePoint(De.x,De.y,Y.canonical),it=[at.x+nt[0],at.y+nt[1],at.z+nt[2]],et=[...it,1];if(r.transformMat4$1(et,et,o),!He(et,pe)){Lt(Ae.numGlyphs,le);continue}const Re=Ne(f.transform.cameraToCenterDistance,et[3]),bt=r.evaluateSizeForFeature(te,ae,Ae),yt=F?bt/Re:bt*Re,Vt=Cn(new r.pointGeometry(it[0],it[1]),T,it[2]);if(Vt.signedDistanceFromCamera<=0){Lt(Ae.numGlyphs,le);continue}let ht={};const rn=F?null:q,Ft=Jt(Ae,yt,!1,j,o,T,M,_.glyphOffsetArray,ce,le,Se,Vt.point,De,ht,_e,rn,J.projection,Y,F);$e=Ft.useVertical,rn&&Ft.needsFlipping&&(ht={}),(Ft.notEnoughRoom||$e||Ft.needsFlipping&&Jt(Ae,yt,!0,j,o,T,M,_.glyphOffsetArray,ce,le,Se,Vt.point,De,ht,_e,rn,J.projection,Y,F).notEnoughRoom)&&Lt(Ae.numGlyphs,le)}b?(_.text.dynamicLayoutVertexBuffer.updateData(le),Se&&_.text.globeExtVertexBuffer.updateData(Se)):(_.icon.dynamicLayoutVertexBuffer.updateData(le),Se&&_.icon.globeExtVertexBuffer.updateData(Se))}function ft(_,o,f,b,T,M,F,j,q,Y,J,te,ae,ue,pe,le){const Se=j.glyphStartIndex+j.numGlyphs,ce=j.lineStartIndex,ge=j.lineStartIndex+j.lineLength,_e=o.getoffsetX(j.glyphStartIndex),$e=o.getoffsetX(Se-1),Ee=Ht(_*_e,f,b,T,M,F,j.segment,ce,ge,q,Y,J,te,ae,!0,ue,pe,le);if(!Ee)return null;const Ae=Ht(_*$e,f,b,T,M,F,j.segment,ce,ge,q,Y,J,te,ae,!0,ue,pe,le);return Ae?{first:Ee,last:Ae}:null}function Ut(_,o,f,b){return _.writingMode===r.WritingMode.horizontal&&Math.abs(f.y-o.y)>Math.abs(f.x-o.x)*b?{useVertical:!0}:_.writingMode===r.WritingMode.vertical?o.y<f.y?{needsFlipping:!0}:null:_.flipState!==0&&function(T,M,F){const j=(M.x-T.x)*F;return j===0||Math.abs((M.y-T.y)/j)>On}(o,f,b)?_.flipState===1?{needsFlipping:!0}:null:o.x>f.x?{needsFlipping:!0}:null}function Jt(_,o,f,b,T,M,F,j,q,Y,J,te,ae,ue,pe,le,Se,ce,ge){const _e=o/24,$e=_.lineOffsetX*_e,Ee=_.lineOffsetY*_e;let Ae;if(_.numGlyphs>1){const De=_.glyphStartIndex+_.numGlyphs,nt=_.lineStartIndex,at=_.lineStartIndex+_.lineLength,it=ft(_e,j,$e,Ee,f,te,ae,_,q,M,ue,le,!1,Se,ce,ge);if(!it)return{notEnoughRoom:!0};const et=me(it.first.point,F).point,Re=me(it.last.point,F).point,bt=new r.pointGeometry(et[0],et[1]),yt=new r.pointGeometry(Re[0],Re[1]);if(b&&!f){const Vt=Ut(_,bt,yt,pe);if(_.flipState=Vt&&Vt.needsFlipping?1:2,Vt)return Vt}Ae=[it.first];for(let Vt=_.glyphStartIndex+1;Vt<De-1;Vt++)Ae.push(Ht(_e*j.getoffsetX(Vt),$e,Ee,f,te,ae,_.segment,nt,at,q,M,ue,le,!1,!1,Se,ce,ge));Ae.push(it.last)}else{if(b&&!f){const nt=Cn(ae,T).point,at=_.lineStartIndex+_.segment+1,it=new r.pointGeometry(q.getx(at),q.gety(at)),et=Cn(it,T),Re=et.signedDistanceFromCamera>0?et.point:Dt(ae,it,nt,1,T,void 0,Se,ce.canonical),bt=Ut(_,new r.pointGeometry(nt[0],nt[1]),new r.pointGeometry(Re[0],Re[1]),pe);if(_.flipState=bt&&bt.needsFlipping?1:2,bt)return bt}const De=Ht(_e*j.getoffsetX(_.glyphStartIndex),$e,Ee,f,te,ae,_.segment,_.lineStartIndex,_.lineStartIndex+_.lineLength,q,M,ue,le,!1,!1,Se,ce,ge);if(!De)return{notEnoughRoom:!0};Ae=[De]}if(J)for(const De of Ae)r.updateGlobeVertexNormal(J,Y.length+0,De.up[0],De.up[1],De.up[2]),r.updateGlobeVertexNormal(J,Y.length+1,De.up[0],De.up[1],De.up[2]),r.updateGlobeVertexNormal(J,Y.length+2,De.up[0],De.up[1],De.up[2]),r.updateGlobeVertexNormal(J,Y.length+3,De.up[0],De.up[1],De.up[2]),r.addDynamicAttributes(Y,De.point[0],De.point[1],De.point[2],De.angle);else for(const De of Ae)r.addDynamicAttributes(Y,De.point[0],De.point[1],De.point[2],De.angle);return{}}function Xt(_,o,f,b,T){const M=b.projectTilePoint(_.x,_.y,o);if(!T)return Cn(M,f,M.z);const F=T(_);return Cn(new r.pointGeometry(M.x+F[0],M.y+F[1]),f,M.z+F[2])}function Dt(_,o,f,b,T,M,F,j){const q=Xt(_.add(_.sub(o)._unit()),j,T,F,M).point,Y=r.sub([],f,q);return r.scaleAndAdd([],f,Y,b/r.length(Y))}function Ht(_,o,f,b,T,M,F,j,q,Y,J,te,ae,ue,pe,le,Se,ce){const ge=b?_-o:_+o;let _e=ge>0?1:-1,$e=0;b&&(_e*=-1,$e=Math.PI),_e<0&&($e+=Math.PI);let Ee=_e>0?j+F:j+F+1,Ae=T,De=T,nt=0,at=0;const it=Math.abs(ge),et=[],Re=[];let bt=M;const yt=()=>{const nn=Ee-_e;return nt===0?M:new r.pointGeometry(Y.getx(nn),Y.gety(nn))},Vt=()=>Dt(yt(),bt,De,it-nt+1,J,ae,le,Se.canonical);for(;nt+at<=it;){if(Ee+=_e,Ee<j||Ee>=q)return null;if(De=Ae,et.push(Ae),ue&&Re.push(bt||yt()),Ae=te[Ee],Ae===void 0){bt=new r.pointGeometry(Y.getx(Ee),Y.gety(Ee));const nn=Xt(bt,Se.canonical,J,le,ae);Ae=nn.signedDistanceFromCamera>0?te[Ee]=nn.point:Vt()}else bt=null;nt+=at,at=r.distance(De,Ae)}bt=bt||new r.pointGeometry(Y.getx(Ee),Y.gety(Ee));const ht=yt();pe&&ae&&(te[Ee]=Ae=te[Ee]===void 0?Ae:Vt(),at=r.distance(De,Ae));const rn=(it-nt)/at,Ft=bt.sub(ht).mult(rn)._add(ht),zt=r.sub([],Ae,De),Mt=r.scaleAndAdd([],De,zt,rn);let Bt=[0,0,1],yn=zt[0],fn=zt[1];if(ce&&(Bt=le.upVector(Se.canonical,Ft.x,Ft.y),Bt[0]!==0||Bt[1]!==0||Bt[2]!==1)){const nn=[1,0,0],Sn=[0,1,0];nn[0]=Bt[2],nn[1]=0,nn[2]=-Bt[0],r.cross(Sn,Bt,nn),r.normalize(nn,nn),r.normalize(Sn,Sn),yn=r.dot(zt,nn),fn=r.dot(zt,Sn)}if(f){const nn=r.cross([],Bt,zt);r.normalize(nn,nn),r.scaleAndAdd(Mt,Mt,nn,f*_e)}const Rn=$e+Math.atan2(fn,yn);return et.push(Mt),ue&&Re.push(Ft),{point:Mt,angle:Rn,path:et,tilePath:Re,up:Bt}}const At=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Lt(_,o){for(let f=0;f<_;f++){const b=o.length;o.resize(b+4),o.float32.set(At,4*b)}}function Pt(_,o,f){const b=o[0],T=o[1];return _[0]=f[0]*b+f[4]*T+f[12],_[1]=f[1]*b+f[5]*T+f[13],_[3]=f[3]*b+f[7]*T+f[15],_}const sn=100;class Pn{constructor(o,f,b=new qt(o.width+200,o.height+200,25),T=new qt(o.width+200,o.height+200,25)){this.transform=o,this.grid=b,this.ignoredGrid=T,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+sn,this.screenBottomBoundary=o.height+sn,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.fogState=f}placeCollisionBox(o,f,b,T,M,F,j,q){let Y=b.projectedAnchorX,J=b.projectedAnchorY,te=b.projectedAnchorZ;const ae=b.elevation,ue=b.tileID;if(ae&&ue){const Ee=o.getProjection().upVector(ue.canonical,b.tileAnchorX,b.tileAnchorY),Ae=o.getProjection().upVectorScale(ue.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;Y+=Ee[0]*ae*Ae,J+=Ee[1]*ae*Ae,te+=Ee[2]*ae*Ae}const pe=this.projectAndGetPerspectiveRatio(j,[Y,J,te],b.tileID,o.projection.name==="globe"||!!ae||this.transform.pitch>0,o.getProjection()),le=F*pe.perspectiveRatio,Se=(b.x1*f+T.x-b.padding)*le+pe.point.x,ce=(b.y1*f+T.y-b.padding)*le+pe.point.y,ge=(b.x2*f+T.x+b.padding)*le+pe.point.x,_e=(b.y2*f+T.y+b.padding)*le+pe.point.y,$e=pe.perspectiveRatio<=.55||pe.occluded;return!this.isInsideGrid(Se,ce,ge,_e)||!M&&this.grid.hitTest(Se,ce,ge,_e,q)||$e?{box:[],offscreen:!1,occluded:pe.occluded}:{box:[Se,ce,ge,_e],offscreen:this.isOffscreen(Se,ce,ge,_e),occluded:!1}}placeCollisionCircles(o,f,b,T,M,F,j,q,Y,J,te,ae,ue,pe,le){const Se=[],ce=this.transform.elevation,ge=ce?ce.getAtTileOffsetFunc(le,this.transform.center.lat,this.transform.worldSize,o.getProjection()):ht=>[0,0,0],_e=new r.pointGeometry(b.tileAnchorX,b.tileAnchorY),$e=o.getProjection().projectTilePoint(b.tileAnchorX,b.tileAnchorY,le.canonical),Ee=ge(_e),Ae=[$e.x+Ee[0],$e.y+Ee[1],$e.z+Ee[2]],De=o.projection.name==="globe",nt=this.projectAndGetPerspectiveRatio(j,[Ae[0],Ae[1],Ae[2]],le,De||!!ce||this.transform.pitch>0,o.getProjection()),{perspectiveRatio:at}=nt,it=(te?F/at:F*at)/r.ONE_EM,et=Cn(new r.pointGeometry(Ae[0],Ae[1]),q,Ae[2]).point,Re=nt.signedDistanceFromCamera>0?ft(it,M,b.lineOffsetX*it,b.lineOffsetY*it,!1,et,_e,b,T,q,{},ce&&!te?ge:null,te&&!!ce,o.getProjection(),le,te):null;let bt=!1,yt=!1,Vt=!0;if(Re&&!nt.occluded){const ht=.5*ue*at+pe,rn=new r.pointGeometry(-100,-100),Ft=new r.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),zt=new so,Mt=Re.first,Bt=Re.last;let yn=[];for(let nn=Mt.path.length-1;nn>=1;nn--)yn.push(Mt.path[nn]);for(let nn=1;nn<Bt.path.length;nn++)yn.push(Bt.path[nn]);const fn=2.5*ht;if(Y){const nn=yn.map(ce&&!De?(Sn,ti)=>{const si=ge(ti<Mt.path.length-1?Mt.tilePath[Mt.path.length-1-ti]:Bt.tilePath[ti-Mt.path.length+2]);return Sn[2]=si[2],me(Sn,Y)}:Sn=>me(Sn,Y));yn=nn.some(Sn=>Sn.signedDistanceFromCamera<=0)?[]:nn.map(Sn=>Sn.point)}let Rn=[];if(yn.length>0){const nn=yn.map(di=>new r.pointGeometry(di[0],di[1]));let Sn=1/0,ti=-1/0,si=1/0,Mi=-1/0;for(let di=0;di<nn.length;di++)Sn=Math.min(Sn,nn[di].x),si=Math.min(si,nn[di].y),ti=Math.max(ti,nn[di].x),Mi=Math.max(Mi,nn[di].y);Rn=Sn>=rn.x&&ti<=Ft.x&&si>=rn.y&&Mi<=Ft.y?[nn]:ti<rn.x||Sn>Ft.x||Mi<rn.y||si>Ft.y?[]:r.clipLine([nn],rn.x,rn.y,Ft.x,Ft.y)}for(const nn of Rn){zt.reset(nn,.25*ht);let Sn=0;Sn=zt.length<=.5*ht?1:Math.ceil(zt.paddedLength/fn)+1;for(let ti=0;ti<Sn;ti++){const si=ti/Math.max(Sn-1,1),Mi=zt.lerp(si),di=Mi.x+sn,gr=Mi.y+sn;Se.push(di,gr,ht,0);const Ur=di-ht,to=gr-ht,_i=di+ht,xi=gr+ht;if(Vt=Vt&&this.isOffscreen(Ur,to,_i,xi),yt=yt||this.isInsideGrid(Ur,to,_i,xi),!f&&this.grid.hitTestCircle(di,gr,ht,ae)&&(bt=!0,!J))return{circles:[],offscreen:!1,collisionDetected:bt,occluded:!1}}}}return{circles:!J&&bt||!yt?[]:Se,offscreen:Vt,collisionDetected:bt,occluded:nt.occluded}}queryRenderedSymbols(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const f=[];let b=1/0,T=1/0,M=-1/0,F=-1/0;for(const J of o){const te=new r.pointGeometry(J.x+sn,J.y+sn);b=Math.min(b,te.x),T=Math.min(T,te.y),M=Math.max(M,te.x),F=Math.max(F,te.y),f.push(te)}const j=this.grid.query(b,T,M,F).concat(this.ignoredGrid.query(b,T,M,F)),q={},Y={};for(const J of j){const te=J.key;if(q[te.bucketInstanceId]===void 0&&(q[te.bucketInstanceId]={}),q[te.bucketInstanceId][te.featureIndex])continue;const ae=[new r.pointGeometry(J.x1,J.y1),new r.pointGeometry(J.x2,J.y1),new r.pointGeometry(J.x2,J.y2),new r.pointGeometry(J.x1,J.y2)];r.polygonIntersectsPolygon(f,ae)&&(q[te.bucketInstanceId][te.featureIndex]=!0,Y[te.bucketInstanceId]===void 0&&(Y[te.bucketInstanceId]=[]),Y[te.bucketInstanceId].push(te.featureIndex))}return Y}insertCollisionBox(o,f,b,T,M){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:b,featureIndex:T,collisionGroupID:M},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,f,b,T,M){const F=f?this.ignoredGrid:this.grid,j={bucketInstanceId:b,featureIndex:T,collisionGroupID:M};for(let q=0;q<o.length;q+=4)F.insertCircle(j,o[q],o[q+1],o[q+2])}projectAndGetPerspectiveRatio(o,f,b,T,M){const F=[f[0],f[1],f[2],1];let j=!1;if(f[2]||this.transform.pitch>0){r.transformMat4$1(F,F,o);const q=M.name==="globe";this.fogState&&b&&!q&&(j=function(Y,J,te,ae,ue,pe){const le=pe.calculateFogTileMatrix(ue),Se=[J,te,ae];return r.transformMat4(Se,Se,le),Ke(Y,Se,pe.pitch,pe._fov)}(this.fogState,f[0],f[1],f[2],b.toUnwrapped(),this.transform)>.9)}else Pt(F,F,o);return{point:new r.pointGeometry((F[0]/F[3]+1)/2*this.transform.width+sn,(-F[1]/F[3]+1)/2*this.transform.height+sn),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(M)/F[3]*.5,1.5),signedDistanceFromCamera:F[3],occluded:T&&F[2]>F[3]||j}}isOffscreen(o,f,b,T){return b<sn||o>=this.screenRightBoundary||T<sn||f>this.screenBottomBoundary}isInsideGrid(o,f,b,T){return b>=0&&o<this.gridRightBoundary&&T>=0&&f<this.gridBottomBoundary}getViewportMatrix(){const o=r.identity([]);return r.translate(o,o,[-100,-100,0]),o}}function jn(_,o,f){const b=o.createTileMatrix(_,_.worldSize,f.toUnwrapped());return r.multiply(new Float32Array(16),_.projMatrix,b)}function Wn(_,o,f){if(o.projection.name===f.projection.name)return _.projMatrix;const b=f.clone();return b.setProjection(o.projection),jn(b,o.getProjection(),_)}function Qn(_,o,f){return o.name===f.projection.name?_.projMatrix:jn(f,o,_)}class Zn{constructor(o,f,b,T){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?f:-f))):T&&b?1:0,this.placed=b}isHidden(){return this.opacity===0&&!this.placed}}class zn{constructor(o,f,b,T,M,F=!1){this.text=new Zn(o?o.text:null,f,b,M),this.icon=new Zn(o?o.icon:null,f,T,M),this.clipped=F}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Fi{constructor(o,f,b,T=!1){this.text=o,this.icon=f,this.skipFade=b,this.clipped=T}}class Mr{constructor(){this.invProjMatrix=r.create(),this.viewportMatrix=r.create(),this.circles=[]}}class tr{constructor(o,f,b,T,M){this.bucketInstanceId=o,this.featureIndex=f,this.sourceLayerIndex=b,this.bucketIndex=T,this.tileID=M}}class Ai{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){const f=++this.maxGroupID;this.collisionGroups[o]={ID:f,predicate:b=>b.collisionGroupID===f}}return this.collisionGroups[o]}}function jo(_,o,f,b,T){const{horizontalAlign:M,verticalAlign:F}=r.getAnchorAlignment(_),j=-(M-.5)*o,q=-(F-.5)*f,Y=r.evaluateVariableOffset(_,b);return new r.pointGeometry(j+Y[0]*T,q+Y[1]*T)}function ao(_,o,f,b,T){const M=new r.pointGeometry(_,o);return f&&M._rotate(b?T:-T),M}class vr{constructor(o,f,b,T,M){this.transform=o.clone(),this.projection=o.projection.name,this.collisionIndex=new Pn(this.transform,M),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new Ai(b),this.collisionCircleArrays={},this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(o,f,b,T){const M=b.getBucket(f),F=b.latestFeatureIndex;if(!M||!F||f.id!==M.layerIds[0])return;const j=M.layers[0].layout,q=b.collisionBoxArray,Y=Math.pow(2,this.transform.zoom-b.tileID.overscaledZ),J=b.tileSize/r.EXTENT,te=b.tileID.toUnwrapped();this.transform.setProjection(M.projection);const ae=(ue=b.tileID,pe=M.getProjection(),le=this.transform,pe.name===this.projection?le.calculateProjMatrix(ue.toUnwrapped()):jn(le,pe,ue));var ue,pe,le;const Se=j.get("text-pitch-alignment")==="map",ce=j.get("text-rotation-alignment")==="map";f.compileFilter();const ge=f.dynamicFilter(),_e=f.dynamicFilterNeedsFeature(),$e=this.transform.calculatePixelsToTileUnitsMatrix(b),Ee=hr(ae,b.tileID.canonical,Se,ce,this.transform,M.getProjection(),$e);let Ae=null;if(Se){const at=Xr(ae,b.tileID.canonical,Se,ce,this.transform,M.getProjection(),$e);Ae=r.multiply([],this.transform.labelPlaneMatrix,at)}let De=null;ge&&b.latestFeatureIndex&&(De={unwrappedTileID:te,dynamicFilter:ge,dynamicFilterNeedsFeature:_e,featureIndex:b.latestFeatureIndex}),this.retainedQueryData[M.bucketInstanceId]=new tr(M.bucketInstanceId,F,M.sourceLayerIndex,M.index,b.tileID);const nt={bucket:M,layout:j,posMatrix:ae,textLabelPlaneMatrix:Ee,labelToScreenMatrix:Ae,clippingData:De,scale:Y,textPixelRatio:J,holdingForFade:b.holdingForFade(),collisionBoxArray:q,partiallyEvaluatedTextSize:r.evaluateSizeForZoom(M.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:r.evaluateSizeForZoom(M.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(M.sourceID)};if(T)for(const at of M.sortKeyRanges){const{sortKey:it,symbolInstanceStart:et,symbolInstanceEnd:Re}=at;o.push({sortKey:it,symbolInstanceStart:et,symbolInstanceEnd:Re,parameters:nt})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:M.symbolInstances.length,parameters:nt})}attemptAnchorPlacement(o,f,b,T,M,F,j,q,Y,J,te,ae,ue,pe,le,Se,ce,ge){const _e=[ae.textOffset0,ae.textOffset1],$e=jo(o,b,T,_e,M),Ee=this.collisionIndex.placeCollisionBox(pe,M,f,ao($e.x,$e.y,F,j,this.transform.angle),te,q,Y,J.predicate);if((!Se||this.collisionIndex.placeCollisionBox(pe,pe.getSymbolInstanceIconSize(ge,this.transform.zoom,ue),Se,ao($e.x,$e.y,F,j,this.transform.angle),te,q,Y,J.predicate).box.length!==0)&&Ee.box.length>0){let Ae;return this.prevPlacement&&this.prevPlacement.variableOffsets[ae.crossTileID]&&this.prevPlacement.placements[ae.crossTileID]&&this.prevPlacement.placements[ae.crossTileID].text&&(Ae=this.prevPlacement.variableOffsets[ae.crossTileID].anchor),this.variableOffsets[ae.crossTileID]={textOffset:_e,width:b,height:T,anchor:o,textScale:M,prevAnchor:Ae},this.markUsedJustification(pe,o,ae,le),pe.allowVerticalPlacement&&(this.markUsedOrientation(pe,le,ae),this.placedOrientations[ae.crossTileID]=le),{shift:$e,placedGlyphBoxes:Ee}}}placeLayerBucketPart(o,f,b,T){const{bucket:M,layout:F,posMatrix:j,textLabelPlaneMatrix:q,labelToScreenMatrix:Y,clippingData:J,textPixelRatio:te,holdingForFade:ae,collisionBoxArray:ue,partiallyEvaluatedTextSize:pe,partiallyEvaluatedIconSize:le,collisionGroup:Se}=o.parameters,ce=F.get("text-optional"),ge=F.get("icon-optional"),_e=F.get("text-allow-overlap"),$e=F.get("icon-allow-overlap"),Ee=F.get("text-rotation-alignment")==="map",Ae=F.get("text-pitch-alignment")==="map",De=F.get("icon-text-fit")!=="none",nt=F.get("symbol-z-order")==="viewport-y";this.transform.setProjection(M.projection);let at=_e&&($e||!M.hasIconData()||ge),it=$e&&(_e||!M.hasTextData()||ce);!M.collisionArrays&&ue&&M.deserializeCollisionBoxes(ue),b&&T&&M.updateCollisionDebugBuffers(this.transform.zoom,ue);const et=(Re,bt,yt)=>{if(J){const _i={zoom:this.transform.zoom,pitch:this.transform.pitch};let xi=null;if(J.dynamicFilterNeedsFeature){const ii=this.retainedQueryData[M.bucketInstanceId];xi=J.featureIndex.loadFeature({featureIndex:Re.featureIndex,bucketIndex:ii.bucketIndex,sourceLayerIndex:ii.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,J.dynamicFilter)(_i,xi,this.retainedQueryData[M.bucketInstanceId].tileID.canonical,new r.pointGeometry(Re.tileAnchorX,Re.tileAnchorY),this.transform.calculateDistanceTileData(J.unwrappedTileID)))return this.placements[Re.crossTileID]=new Fi(!1,!1,!1,!0),void(f[Re.crossTileID]=!0)}if(f[Re.crossTileID])return;if(ae)return void(this.placements[Re.crossTileID]=new Fi(!1,!1,!1));let Vt=!1,ht=!1,rn=!0,Ft=!1,zt=!1,Mt=null,Bt={box:null,offscreen:null,occluded:null},yn={box:null,offscreen:null,occluded:null},fn=null,Rn=null,nn=null,Sn=0,ti=0,si=0;yt.textFeatureIndex?Sn=yt.textFeatureIndex:Re.useRuntimeCollisionCircles&&(Sn=Re.featureIndex),yt.verticalTextFeatureIndex&&(ti=yt.verticalTextFeatureIndex);const Mi=_i=>{_i.tileID=this.retainedQueryData[M.bucketInstanceId].tileID,(this.transform.elevation||_i.elevation)&&(_i.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[M.bucketInstanceId].tileID,_i.tileAnchorX,_i.tileAnchorY):0)},di=yt.textBox;if(di){Mi(di);const _i=ii=>{let Oi=r.WritingMode.horizontal;if(M.allowVerticalPlacement&&!ii&&this.prevPlacement){const Hi=this.prevPlacement.placedOrientations[Re.crossTileID];Hi&&(this.placedOrientations[Re.crossTileID]=Hi,Oi=Hi,this.markUsedOrientation(M,Oi,Re))}return Oi},xi=(ii,Oi)=>{if(M.allowVerticalPlacement&&Re.numVerticalGlyphVertices>0&&yt.verticalTextBox){for(const Hi of M.writingModes)if(Hi===r.WritingMode.vertical?(Bt=Oi(),yn=Bt):Bt=ii(),Bt&&Bt.box&&Bt.box.length)break}else Bt=ii()};if(F.get("text-variable-anchor")){let ii=F.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Re.crossTileID]){const Gn=this.prevPlacement.variableOffsets[Re.crossTileID];ii.indexOf(Gn.anchor)>0&&(ii=ii.filter(sr=>sr!==Gn.anchor),ii.unshift(Gn.anchor))}const Oi=(Gn,sr,Lo)=>{const Lr=M.getSymbolInstanceTextSize(pe,Re,this.transform.zoom,bt),rs=(Gn.x2-Gn.x1)*Lr+2*Gn.padding,os=(Gn.y2-Gn.y1)*Lr+2*Gn.padding,uo=De&&!$e?sr:null;uo&&Mi(uo);let Pi={box:[],offscreen:!1,occluded:!1};const jr=_e?2*ii.length:ii.length;for(let no=0;no<jr;++no){const zs=this.attemptAnchorPlacement(ii[no%ii.length],Gn,rs,os,Lr,Ee,Ae,te,j,Se,no>=ii.length,Re,bt,M,Lo,uo,pe,le);if(zs&&(Pi=zs.placedGlyphBoxes,Pi&&Pi.box&&Pi.box.length)){Vt=!0,Mt=zs.shift;break}}return Pi};xi(()=>Oi(di,yt.iconBox,r.WritingMode.horizontal),()=>{const Gn=yt.verticalTextBox;return Gn&&Mi(Gn),M.allowVerticalPlacement&&!(Bt&&Bt.box&&Bt.box.length)&&Re.numVerticalGlyphVertices>0&&Gn?Oi(Gn,yt.verticalIconBox,r.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Bt&&(Vt=Bt.box,rn=Bt.offscreen,Ft=Bt.occluded);const Hi=_i(Bt&&Bt.box);if(!Vt&&this.prevPlacement){const Gn=this.prevPlacement.variableOffsets[Re.crossTileID];Gn&&(this.variableOffsets[Re.crossTileID]=Gn,this.markUsedJustification(M,Gn.anchor,Re,Hi))}}else{const ii=(Oi,Hi)=>{const Gn=M.getSymbolInstanceTextSize(pe,Re,this.transform.zoom,bt),sr=this.collisionIndex.placeCollisionBox(M,Gn,Oi,new r.pointGeometry(0,0),_e,te,j,Se.predicate);return sr&&sr.box&&sr.box.length&&(this.markUsedOrientation(M,Hi,Re),this.placedOrientations[Re.crossTileID]=Hi),sr};xi(()=>ii(di,r.WritingMode.horizontal),()=>{const Oi=yt.verticalTextBox;return M.allowVerticalPlacement&&Re.numVerticalGlyphVertices>0&&Oi?(Mi(Oi),ii(Oi,r.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),_i(Bt&&Bt.box&&Bt.box.length)}}if(fn=Bt,Vt=fn&&fn.box&&fn.box.length>0,rn=fn&&fn.offscreen,Ft=fn&&fn.occluded,Re.useRuntimeCollisionCircles){const _i=M.text.placedSymbolArray.get(Re.centerJustifiedTextSymbolIndex>=0?Re.centerJustifiedTextSymbolIndex:Re.verticalPlacedTextSymbolIndex),xi=r.evaluateSizeForFeature(M.textSizeData,pe,_i),ii=F.get("text-padding");Rn=this.collisionIndex.placeCollisionCircles(M,_e,_i,M.lineVertexArray,M.glyphOffsetArray,xi,j,q,Y,b,Ae,Se.predicate,Re.collisionCircleDiameter*xi/r.ONE_EM,ii,this.retainedQueryData[M.bucketInstanceId].tileID),Vt=_e||Rn.circles.length>0&&!Rn.collisionDetected,rn=rn&&Rn.offscreen,Ft=Rn.occluded}if(yt.iconFeatureIndex&&(si=yt.iconFeatureIndex),yt.iconBox){const _i=xi=>{Mi(xi);const ii=De&&Mt?ao(Mt.x,Mt.y,Ee,Ae,this.transform.angle):new r.pointGeometry(0,0),Oi=M.getSymbolInstanceIconSize(le,this.transform.zoom,bt);return this.collisionIndex.placeCollisionBox(M,Oi,xi,ii,$e,te,j,Se.predicate)};yn&&yn.box&&yn.box.length&&yt.verticalIconBox?(nn=_i(yt.verticalIconBox),ht=nn.box.length>0):(nn=_i(yt.iconBox),ht=nn.box.length>0),rn=rn&&nn.offscreen,zt=nn.occluded}const gr=ce||Re.numHorizontalGlyphVertices===0&&Re.numVerticalGlyphVertices===0,Ur=ge||Re.numIconVertices===0;if(gr||Ur?Ur?gr||(ht=ht&&Vt):Vt=ht&&Vt:ht=Vt=ht&&Vt,Vt&&fn&&fn.box&&this.collisionIndex.insertCollisionBox(fn.box,F.get("text-ignore-placement"),M.bucketInstanceId,yn&&yn.box&&ti?ti:Sn,Se.ID),ht&&nn&&this.collisionIndex.insertCollisionBox(nn.box,F.get("icon-ignore-placement"),M.bucketInstanceId,si,Se.ID),Rn&&(Vt&&this.collisionIndex.insertCollisionCircles(Rn.circles,F.get("text-ignore-placement"),M.bucketInstanceId,Sn,Se.ID),b)){const _i=M.bucketInstanceId;let xi=this.collisionCircleArrays[_i];xi===void 0&&(xi=this.collisionCircleArrays[_i]=new Mr);for(let ii=0;ii<Rn.circles.length;ii+=4)xi.circles.push(Rn.circles[ii+0]),xi.circles.push(Rn.circles[ii+1]),xi.circles.push(Rn.circles[ii+2]),xi.circles.push(Rn.collisionDetected?1:0)}const to=M.projection.name!=="globe";at=at&&(to||!Ft),it=it&&(to||!zt),this.placements[Re.crossTileID]=new Fi(Vt||at,ht||it,rn||M.justReloaded),f[Re.crossTileID]=!0};if(nt){const Re=M.getSortedSymbolIndexes(this.transform.angle);for(let bt=Re.length-1;bt>=0;--bt){const yt=Re[bt];et(M.symbolInstances.get(yt),yt,M.collisionArrays[yt])}}else for(let Re=o.symbolInstanceStart;Re<o.symbolInstanceEnd;Re++)et(M.symbolInstances.get(Re),Re,M.collisionArrays[Re]);if(b&&M.bucketInstanceId in this.collisionCircleArrays){const Re=this.collisionCircleArrays[M.bucketInstanceId];r.invert(Re.invProjMatrix,j),Re.viewportMatrix=this.collisionIndex.getViewportMatrix()}M.justReloaded=!1}markUsedJustification(o,f,b,T){let M;M=T===r.WritingMode.vertical?b.verticalPlacedTextSymbolIndex:{left:b.leftJustifiedTextSymbolIndex,center:b.centerJustifiedTextSymbolIndex,right:b.rightJustifiedTextSymbolIndex}[r.getAnchorJustification(f)];const F=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex,b.verticalPlacedTextSymbolIndex];for(const j of F)j>=0&&(o.text.placedSymbolArray.get(j).crossTileID=M>=0&&j!==M?0:b.crossTileID)}markUsedOrientation(o,f,b){const T=f===r.WritingMode.horizontal||f===r.WritingMode.horizontalOnly?f:0,M=f===r.WritingMode.vertical?f:0,F=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex];for(const j of F)o.text.placedSymbolArray.get(j).placedOrientation=T;b.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(b.verticalPlacedTextSymbolIndex).placedOrientation=M)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;const f=this.prevPlacement;let b=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;const T=f?f.symbolFadeChange(o):1,M=f?f.opacities:{},F=f?f.variableOffsets:{},j=f?f.placedOrientations:{};for(const q in this.placements){const Y=this.placements[q],J=M[q];J?(this.opacities[q]=new zn(J,T,Y.text,Y.icon,null,Y.clipped),b=b||Y.text!==J.text.placed||Y.icon!==J.icon.placed):(this.opacities[q]=new zn(null,T,Y.text,Y.icon,Y.skipFade,Y.clipped),b=b||Y.text||Y.icon)}for(const q in M){const Y=M[q];if(!this.opacities[q]){const J=new zn(Y,T,!1,!1);J.isHidden()||(this.opacities[q]=J,b=b||Y.text.placed||Y.icon.placed)}}for(const q in F)this.variableOffsets[q]||!this.opacities[q]||this.opacities[q].isHidden()||(this.variableOffsets[q]=F[q]);for(const q in j)this.placedOrientations[q]||!this.opacities[q]||this.opacities[q].isHidden()||(this.placedOrientations[q]=j[q]);b?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:o)}updateLayerOpacities(o,f){const b={};for(const T of f){const M=T.getBucket(o);M&&T.latestFeatureIndex&&o.id===M.layerIds[0]&&this.updateBucketOpacities(M,b,T.collisionBoxArray)}}updateBucketOpacities(o,f,b){o.hasTextData()&&o.text.opacityVertexArray.clear(),o.hasIconData()&&o.icon.opacityVertexArray.clear(),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();const T=o.layers[0].layout,M=!!o.layers[0].dynamicFilter(),F=new zn(null,0,!1,!1,!0),j=T.get("text-allow-overlap"),q=T.get("icon-allow-overlap"),Y=T.get("text-variable-anchor"),J=T.get("text-rotation-alignment")==="map",te=T.get("text-pitch-alignment")==="map",ae=T.get("icon-text-fit")!=="none",ue=new zn(null,0,j&&(q||!o.hasIconData()||T.get("icon-optional")),q&&(j||!o.hasTextData()||T.get("text-optional")),!0);!o.collisionArrays&&b&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(b);const pe=(Se,ce,ge)=>{for(let _e=0;_e<ce/4;_e++)Se.opacityVertexArray.emplaceBack(ge)};let le=0;for(let Se=0;Se<o.symbolInstances.length;Se++){const ce=o.symbolInstances.get(Se),{numHorizontalGlyphVertices:ge,numVerticalGlyphVertices:_e,crossTileID:$e}=ce;let Ee=this.opacities[$e];f[$e]?Ee=F:Ee||(Ee=ue,this.opacities[$e]=Ee),f[$e]=!0;const Ae=ge>0||_e>0,De=ce.numIconVertices>0,nt=this.placedOrientations[ce.crossTileID],at=nt===r.WritingMode.vertical,it=nt===r.WritingMode.horizontal||nt===r.WritingMode.horizontalOnly;if(!Ae&&!De||Ee.isHidden()||le++,Ae){const et=mr(Ee.text);pe(o.text,ge,at?zr:et),pe(o.text,_e,it?zr:et);const Re=Ee.text.isHidden();[ce.rightJustifiedTextSymbolIndex,ce.centerJustifiedTextSymbolIndex,ce.leftJustifiedTextSymbolIndex].forEach(Vt=>{Vt>=0&&(o.text.placedSymbolArray.get(Vt).hidden=Re||at?1:0)}),ce.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(ce.verticalPlacedTextSymbolIndex).hidden=Re||it?1:0);const bt=this.variableOffsets[ce.crossTileID];bt&&this.markUsedJustification(o,bt.anchor,ce,nt);const yt=this.placedOrientations[ce.crossTileID];yt&&(this.markUsedJustification(o,"left",ce,yt),this.markUsedOrientation(o,yt,ce))}if(De){const et=mr(Ee.icon);ce.placedIconSymbolIndex>=0&&(pe(o.icon,ce.numIconVertices,at?zr:et),o.icon.placedSymbolArray.get(ce.placedIconSymbolIndex).hidden=Ee.icon.isHidden()),ce.verticalPlacedIconSymbolIndex>=0&&(pe(o.icon,ce.numVerticalIconVertices,it?zr:et),o.icon.placedSymbolArray.get(ce.verticalPlacedIconSymbolIndex).hidden=Ee.icon.isHidden())}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){const et=o.collisionArrays[Se];if(et){let Re=new r.pointGeometry(0,0),bt=!0;if(et.textBox||et.verticalTextBox){if(Y){const Vt=this.variableOffsets[$e];Vt?(Re=jo(Vt.anchor,Vt.width,Vt.height,Vt.textOffset,Vt.textScale),J&&Re._rotate(te?this.transform.angle:-this.transform.angle)):bt=!1}M&&(bt=!Ee.clipped),et.textBox&&Ir(o.textCollisionBox.collisionVertexArray,Ee.text.placed,!bt||at,Re.x,Re.y),et.verticalTextBox&&Ir(o.textCollisionBox.collisionVertexArray,Ee.text.placed,!bt||it,Re.x,Re.y)}const yt=bt&&Boolean(!it&&et.verticalIconBox);et.iconBox&&Ir(o.iconCollisionBox.collisionVertexArray,Ee.icon.placed,yt,ae?Re.x:0,ae?Re.y:0),et.verticalIconBox&&Ir(o.iconCollisionBox.collisionVertexArray,Ee.icon.placed,!yt,ae?Re.x:0,ae?Re.y:0)}}}if(o.fullyClipped=le===0,o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.bucketInstanceId in this.collisionCircleArrays){const Se=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=Se.invProjMatrix,o.placementViewportMatrix=Se.viewportMatrix,o.collisionCircleArray=Se.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}}symbolFadeChange(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,f){const b=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*b>o}setStale(){this.stale=!0}}function Ir(_,o,f,b,T){_.emplaceBack(o?1:0,f?1:0,b||0,T||0),_.emplaceBack(o?1:0,f?1:0,b||0,T||0),_.emplaceBack(o?1:0,f?1:0,b||0,T||0),_.emplaceBack(o?1:0,f?1:0,b||0,T||0)}const Br=Math.pow(2,25),Qa=Math.pow(2,24),So=Math.pow(2,17),Jr=Math.pow(2,16),Go=Math.pow(2,9),qo=Math.pow(2,8),lo=Math.pow(2,1);function mr(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const o=_.placed?1:0,f=Math.floor(127*_.opacity);return f*Br+o*Qa+f*So+o*Jr+f*Go+o*qo+f*lo+o}const zr=0;class yr{constructor(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&o.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(o,f,b,T,M){const F=this._bucketParts;for(;this._currentTileIndex<o.length;)if(f.getBucketParts(F,T,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,M())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,F.sort((j,q)=>j.sortKey-q.sortKey));this._currentPartIndex<F.length;){const j=F[this._currentPartIndex];if(f.placeLayerBucketPart(j,this._seenCrossTileIDs,b,j.symbolInstanceStart===0),this._currentPartIndex++,M())return!0}return!1}}class To{constructor(o,f,b,T,M,F,j,q){this.placement=new vr(o,M,F,j,q),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=b,this._showCollisionBoxes=T,this._done=!1}isDone(){return this._done}continuePlacement(o,f,b){const T=r.exported.now(),M=()=>{const F=r.exported.now()-T;return!this._forceFullPlacement&&F>2};for(;this._currentPlacementIndex>=0;){const F=f[o[this._currentPlacementIndex]],j=this.placement.collisionIndex.transform.zoom;if(F.type==="symbol"&&(!F.minzoom||F.minzoom<=j)&&(!F.maxzoom||F.maxzoom>j)){if(this._inProgressLayer||(this._inProgressLayer=new yr(F)),this._inProgressLayer.continuePlacement(b[F.source],this.placement,this._showCollisionBoxes,F,M))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}const co=512/r.EXTENT/2;class ea{constructor(o,f,b){this.tileID=o,this.indexedSymbolInstances={},this.bucketInstanceId=b;for(let T=0;T<f.length;T++){const M=f.get(T),F=M.key;this.indexedSymbolInstances[F]||(this.indexedSymbolInstances[F]=[]),this.indexedSymbolInstances[F].push({crossTileID:M.crossTileID,coord:this.getScaledCoordinates(M,o)})}}getScaledCoordinates(o,f){const b=co/Math.pow(2,f.canonical.z-this.tileID.canonical.z);return{x:Math.floor((f.canonical.x*r.EXTENT+o.tileAnchorX)*b),y:Math.floor((f.canonical.y*r.EXTENT+o.tileAnchorY)*b)}}findMatches(o,f,b){const T=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z);for(let M=0;M<o.length;M++){const F=o.get(M);if(F.crossTileID)continue;const j=this.indexedSymbolInstances[F.key];if(!j)continue;const q=this.getScaledCoordinates(F,f);for(const Y of j)if(Math.abs(Y.coord.x-q.x)<=T&&Math.abs(Y.coord.y-q.y)<=T&&!b[Y.crossTileID]){b[Y.crossTileID]=!0,F.crossTileID=Y.crossTileID;break}}}}class Ot{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class hn{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){const f=Math.round((o-this.lng)/360);if(f!==0)for(const b in this.indexes){const T=this.indexes[b],M={};for(const F in T){const j=T[F];j.tileID=j.tileID.unwrapTo(j.tileID.wrap+f),M[j.tileID.key]=j}this.indexes[b]=M}this.lng=o}addBucket(o,f,b){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let M=0;M<f.symbolInstances.length;M++)f.symbolInstances.get(M).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]={});const T=this.usedCrossTileIDs[o.overscaledZ];for(const M in this.indexes){const F=this.indexes[M];if(Number(M)>o.overscaledZ)for(const j in F){const q=F[j];q.tileID.isChildOf(o)&&q.findMatches(f.symbolInstances,o,T)}else{const j=F[o.scaledTo(Number(M)).key];j&&j.findMatches(f.symbolInstances,o,T)}}for(let M=0;M<f.symbolInstances.length;M++){const F=f.symbolInstances.get(M);F.crossTileID||(F.crossTileID=b.generate(),T[F.crossTileID]=!0)}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new ea(o,f.symbolInstances,f.bucketInstanceId),!0}removeBucketCrossTileIDs(o,f){for(const b in f.indexedSymbolInstances)for(const T of f.indexedSymbolInstances[b])delete this.usedCrossTileIDs[o][T.crossTileID]}removeStaleBuckets(o){let f=!1;for(const b in this.indexes){const T=this.indexes[b];for(const M in T)o[T[M].bucketInstanceId]||(this.removeBucketCrossTileIDs(b,T[M]),delete T[M],f=!0)}return f}}class Qt{constructor(){this.layerIndexes={},this.crossTileIDs=new Ot,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,f,b,T){let M=this.layerIndexes[o.id];M===void 0&&(M=this.layerIndexes[o.id]=new hn);let F=!1;const j={};T.name!=="globe"&&M.handleWrapJump(b);for(const q of f){const Y=q.getBucket(o);Y&&o.id===Y.layerIds[0]&&(Y.bucketInstanceId||(Y.bucketInstanceId=++this.maxBucketInstanceId),M.addBucket(q.tileID,Y,this.crossTileIDs)&&(F=!0),j[Y.bucketInstanceId]=!0)}return M.removeStaleBuckets(j)&&(F=!0),F}pruneUnusedLayers(o){const f={};o.forEach(b=>{f[b]=!0});for(const b in this.layerIndexes)f[b]||delete this.layerIndexes[b]}}const vn=(_,o)=>r.emitValidationErrors(_,o&&o.filter(f=>f.identifier!=="source.canvas")),bi=r.pick(qe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),$i=r.pick(qe,["setCenter","setZoom","setBearing","setPitch"]),Yn={version:8,layers:[],sources:{}},Dn={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class ai extends r.Evented{constructor(o,f={}){super(),this.map=o,this.dispatcher=new wn(Bn(),this),this.imageManager=new fe,this.imageManager.setEventedParent(this),this.glyphManager=new r.GlyphManager(o._requestManager,f.localFontFamily?r.LocalGlyphMode.all:f.localIdeographFontFamily?r.LocalGlyphMode.ideographs:r.LocalGlyphMode.none,f.localFontFamily||f.localIdeographFontFamily),this.lineAtlas=new r.LineAtlas(256,512),this.crossTileSymbolIndex=new Qt,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new r.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",r.getReferrer());const b=this;this._rtlTextPluginCallback=ai.registerForPluginStateChange(T=>{b.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:T.pluginStatus,pluginURL:T.pluginURL},(M,F)=>{if(r.triggerPluginCompletionEvent(M),F&&F.every(j=>j))for(const j in b._sourceCaches){const q=b._sourceCaches[j],Y=q.getSource().type;Y!=="vector"&&Y!=="geojson"||q.reload()}})}),this.on("data",T=>{if(T.dataType!=="source"||T.sourceDataType!=="metadata")return;const M=this.getSource(T.sourceId);if(M&&M.vectorLayerIds)for(const F in this._layers){const j=this._layers[F];j.source===M.id&&this._validateLayer(j)}})}loadURL(o,f={}){this.fire(new r.Event("dataloading",{dataType:"style"}));const b=typeof f.validate=="boolean"?f.validate:!r.isMapboxURL(o);o=this.map._requestManager.normalizeStyleURL(o,f.accessToken);const T=this.map._requestManager.transformRequest(o,r.ResourceType.Style);this._request=r.getJSON(T,(M,F)=>{this._request=null,M?this.fire(new r.ErrorEvent(M)):F&&this._load(F,b)})}loadJSON(o,f={}){this.fire(new r.Event("dataloading",{dataType:"style"})),this._request=r.exported.frame(()=>{this._request=null,this._load(o,f.validate!==!1)})}loadEmpty(){this.fire(new r.Event("dataloading",{dataType:"style"})),this._load(Yn,!1)}_updateLayerCount(o,f){const b=f?1:-1;o.is3D()&&(this._num3DLayers+=b),o.type==="circle"&&(this._numCircleLayers+=b),o.type==="symbol"&&(this._numSymbolLayers+=b)}_load(o,f){if(f&&vn(this,r.validateStyle(o)))return;this._loaded=!0,this.stylesheet=r.clone$1(o),this._updateMapProjection();for(const T in o.sources)this.addSource(T,o.sources[T],{validate:!1});this._changed=!1,o.sprite?this._loadSprite(o.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(o.glyphs);const b=Jn(this.stylesheet.layers);this._order=b.map(T=>T.id),this._layers={},this._serializedLayers={};for(let T of b)T=r.createStyleLayer(T),T.setEventedParent(this,{layer:{id:T.id}}),this._layers[T.id]=T,this._serializedLayers[T.id]=T.serialize(),this._updateLayerCount(T,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Ge(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new r.Event("data",{dataType:"style"})),this.fire(new r.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(o){o?this.stylesheet.projection=o:delete this.stylesheet.projection,this.map._explicitProjection||this.map._updateProjection()}_updateMapProjection(){this.map._explicitProjection?this.applyProjectionUpdate():this.map._updateProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_loadSprite(o){this._spriteRequest=function(f,b,T){let M,F,j;const q=r.exported.devicePixelRatio>1?"@2x":"";let Y=r.getJSON(b.transformRequest(b.normalizeSpriteURL(f,q,".json"),r.ResourceType.SpriteJSON),(ae,ue)=>{Y=null,j||(j=ae,M=ue,te())}),J=r.getImage(b.transformRequest(b.normalizeSpriteURL(f,q,".png"),r.ResourceType.SpriteImage),(ae,ue)=>{J=null,j||(j=ae,F=ue,te())});function te(){if(j)T(j);else if(M&&F){const ae=r.exported.getImageData(F),ue={};for(const pe in M){const{width:le,height:Se,x:ce,y:ge,sdf:_e,pixelRatio:$e,stretchX:Ee,stretchY:Ae,content:De}=M[pe],nt=new r.RGBAImage({width:le,height:Se});r.RGBAImage.copy(ae,nt,{x:ce,y:ge},{x:0,y:0},{width:le,height:Se}),ue[pe]={data:nt,pixelRatio:$e,sdf:_e,stretchX:Ee,stretchY:Ae,content:De}}T(null,ue)}}return{cancel(){Y&&(Y.cancel(),Y=null),J&&(J.cancel(),J=null)}}}(o,this.map._requestManager,(f,b)=>{if(this._spriteRequest=null,f)this.fire(new r.ErrorEvent(f));else if(b)for(const T in b)this.imageManager.addImage(T,b[T]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new r.Event("data",{dataType:"style"}))})}_validateLayer(o){const f=this.getSource(o.source);if(!f)return;const b=o.sourceLayer;b&&(f.type==="geojson"||f.vectorLayerIds&&f.vectorLayerIds.indexOf(b)===-1)&&this.fire(new r.ErrorEvent(new Error(`Source layer "${b}" does not exist on source "${f.id}" as specified by style layer "${o.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const o in this._sourceCaches)if(!this._sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(o){const f=[];for(const b of o){const T=this._layers[b];T.type!=="custom"&&f.push(T.serialize())}return f}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const o in this._sourceCaches)if(this._sourceCaches[o].hasTransition())return!0;for(const o in this._layers)if(this._layers[o].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(o){return!!this.terrain&&Dn[o.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(o){if(!this._loaded)return;const f=this._changed;if(this._changed){const T=Object.keys(this._updatedLayers),M=Object.keys(this._removedLayers);(T.length||M.length)&&this._updateWorkerLayers(T,M);for(const F in this._updatedSources){const j=this._updatedSources[F];j==="reload"?this._reloadSource(F):j==="clear"&&this._clearSource(F)}this._updateTilesForChangedImages();for(const F in this._updatedPaintProps)this._layers[F].updateTransitions(o);this.light.updateTransitions(o),this.fog&&this.fog.updateTransitions(o),this._resetUpdates()}const b={};for(const T in this._sourceCaches){const M=this._sourceCaches[T];b[T]=M.used,M.used=!1}for(const T of this._order){const M=this._layers[T];if(M.recalculate(o,this._availableImages),!M.isHidden(o.zoom)){const j=this._getLayerSourceCache(M);j&&(j.used=!0)}const F=this.map.painter;if(F){const j=M.getProgramIds();if(!j)continue;const q=M.getProgramConfiguration(o.zoom);for(const Y of j)F.useProgram(Y,q)}}for(const T in b){const M=this._sourceCaches[T];b[T]!==M.used&&M.getSource().fire(new r.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:M.getSource().id}))}this.light.recalculate(o),this.terrain&&this.terrain.recalculate(o),this.fog&&this.fog.recalculate(o),this.z=o.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),f&&this.fire(new r.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const o=Object.keys(this._changedImages);if(o.length){for(const f in this._sourceCaches)this._sourceCaches[f].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}}_updateWorkerLayers(o,f){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(o),removedIds:f})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(o){if(this._checkLoaded(),vn(this,r.validateStyle(o)))return!1;(o=r.clone$1(o)).layers=Jn(o.layers);const f=function(T,M){if(!T)return[{command:qe.setStyle,args:[M]}];let F=[];try{if(!y(T.version,M.version))return[{command:qe.setStyle,args:[M]}];y(T.center,M.center)||F.push({command:qe.setCenter,args:[M.center]}),y(T.zoom,M.zoom)||F.push({command:qe.setZoom,args:[M.zoom]}),y(T.bearing,M.bearing)||F.push({command:qe.setBearing,args:[M.bearing]}),y(T.pitch,M.pitch)||F.push({command:qe.setPitch,args:[M.pitch]}),y(T.sprite,M.sprite)||F.push({command:qe.setSprite,args:[M.sprite]}),y(T.glyphs,M.glyphs)||F.push({command:qe.setGlyphs,args:[M.glyphs]}),y(T.transition,M.transition)||F.push({command:qe.setTransition,args:[M.transition]}),y(T.light,M.light)||F.push({command:qe.setLight,args:[M.light]}),y(T.fog,M.fog)||F.push({command:qe.setFog,args:[M.fog]}),y(T.projection,M.projection)||F.push({command:qe.setProjection,args:[M.projection]});const j={},q=[];(function(te,ae,ue,pe){let le;for(le in ae=ae||{},te=te||{})te.hasOwnProperty(le)&&(ae.hasOwnProperty(le)||mi(le,ue,pe));for(le in ae)ae.hasOwnProperty(le)&&(te.hasOwnProperty(le)?y(te[le],ae[le])||(te[le].type==="geojson"&&ae[le].type==="geojson"&&Ja(te,ae,le)?ue.push({command:qe.setGeoJSONSourceData,args:[le,ae[le].data]}):or(le,ae,ue,pe)):rr(le,ae,ue))})(T.sources,M.sources,q,j);const Y=[];T.layers&&T.layers.forEach(te=>{te.source&&j[te.source]?F.push({command:qe.removeLayer,args:[te.id]}):Y.push(te)});let J=T.terrain;J&&j[J.source]&&(F.push({command:qe.setTerrain,args:[void 0]}),J=void 0),F=F.concat(q),y(J,M.terrain)||F.push({command:qe.setTerrain,args:[M.terrain]}),function(te,ae,ue){ae=ae||[];const pe=(te=te||[]).map(Co),le=ae.map(Co),Se=te.reduce(Qs,{}),ce=ae.reduce(Qs,{}),ge=pe.slice(),_e=Object.create(null);let $e,Ee,Ae,De,nt,at,it;for($e=0,Ee=0;$e<pe.length;$e++)Ae=pe[$e],ce.hasOwnProperty(Ae)?Ee++:(ue.push({command:qe.removeLayer,args:[Ae]}),ge.splice(ge.indexOf(Ae,Ee),1));for($e=0,Ee=0;$e<le.length;$e++)Ae=le[le.length-1-$e],ge[ge.length-1-$e]!==Ae&&(Se.hasOwnProperty(Ae)?(ue.push({command:qe.removeLayer,args:[Ae]}),ge.splice(ge.lastIndexOf(Ae,ge.length-Ee),1)):Ee++,at=ge[ge.length-$e],ue.push({command:qe.addLayer,args:[ce[Ae],at]}),ge.splice(ge.length-$e,0,Ae),_e[Ae]=!0);for($e=0;$e<le.length;$e++)if(Ae=le[$e],De=Se[Ae],nt=ce[Ae],!_e[Ae]&&!y(De,nt))if(y(De.source,nt.source)&&y(De["source-layer"],nt["source-layer"])&&y(De.type,nt.type)){for(it in Yi(De.layout,nt.layout,ue,Ae,null,qe.setLayoutProperty),Yi(De.paint,nt.paint,ue,Ae,null,qe.setPaintProperty),y(De.filter,nt.filter)||ue.push({command:qe.setFilter,args:[Ae,nt.filter]}),y(De.minzoom,nt.minzoom)&&y(De.maxzoom,nt.maxzoom)||ue.push({command:qe.setLayerZoomRange,args:[Ae,nt.minzoom,nt.maxzoom]}),De)De.hasOwnProperty(it)&&it!=="layout"&&it!=="paint"&&it!=="filter"&&it!=="metadata"&&it!=="minzoom"&&it!=="maxzoom"&&(it.indexOf("paint.")===0?Yi(De[it],nt[it],ue,Ae,it.slice(6),qe.setPaintProperty):y(De[it],nt[it])||ue.push({command:qe.setLayerProperty,args:[Ae,it,nt[it]]}));for(it in nt)nt.hasOwnProperty(it)&&!De.hasOwnProperty(it)&&it!=="layout"&&it!=="paint"&&it!=="filter"&&it!=="metadata"&&it!=="minzoom"&&it!=="maxzoom"&&(it.indexOf("paint.")===0?Yi(De[it],nt[it],ue,Ae,it.slice(6),qe.setPaintProperty):y(De[it],nt[it])||ue.push({command:qe.setLayerProperty,args:[Ae,it,nt[it]]}))}else ue.push({command:qe.removeLayer,args:[Ae]}),at=ge[ge.lastIndexOf(Ae)+1],ue.push({command:qe.addLayer,args:[nt,at]})}(Y,M.layers,F)}catch(j){console.warn("Unable to compute style diff:",j),F=[{command:qe.setStyle,args:[M]}]}return F}(this.serialize(),o).filter(T=>!(T.command in $i));if(f.length===0)return!1;const b=f.filter(T=>!(T.command in bi));if(b.length>0)throw new Error(`Unimplemented: ${b.map(T=>T.command).join(", ")}.`);return f.forEach(T=>{T.command!=="setTransition"&&this[T.command].apply(this,T.args)}),this.stylesheet=o,this._updateMapProjection(),!0}addImage(o,f){return this.getImage(o)?this.fire(new r.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(o,f),this._afterImageUpdated(o),this)}updateImage(o,f){this.imageManager.updateImage(o,f)}getImage(o){return this.imageManager.getImage(o)}removeImage(o){return this.getImage(o)?(this.imageManager.removeImage(o),this._afterImageUpdated(o),this):this.fire(new r.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new r.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(o,f,b={}){if(this._checkLoaded(),this.getSource(o)!==void 0)throw new Error("There is already a source with this ID");if(!f.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(f).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(f.type)>=0&&this._validate(r.validateSource,`sources.${o}`,f,null,b))return;this.map&&this.map._collectResourceTiming&&(f.collectResourceTiming=!0);const T=Xe(o,f,this.dispatcher,this);T.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(o),source:T.serialize(),sourceId:o}));const M=F=>{const j=(F?"symbol:":"other:")+o,q=this._sourceCaches[j]=new r.SourceCache(j,T,F);(F?this._symbolSourceCaches:this._otherSourceCaches)[o]=q,q.style=this,q.onAdd(this.map)};M(!1),f.type!=="vector"&&f.type!=="geojson"||M(!0),T.onAdd&&T.onAdd(this.map),this._changed=!0}removeSource(o){this._checkLoaded();const f=this.getSource(o);if(!f)throw new Error("There is no source with this ID");for(const T in this._layers)if(this._layers[T].source===o)return this.fire(new r.ErrorEvent(new Error(`Source "${o}" cannot be removed while layer "${T}" is using it.`)));if(this.terrain&&this.terrain.get().source===o)return this.fire(new r.ErrorEvent(new Error(`Source "${o}" cannot be removed while terrain is using it.`)));const b=this._getSourceCaches(o);for(const T of b)delete this._sourceCaches[T.id],delete this._updatedSources[T.id],T.fire(new r.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:T.getSource().id})),T.setEventedParent(null),T.clearTiles();return delete this._otherSourceCaches[o],delete this._symbolSourceCaches[o],f.setEventedParent(null),f.onRemove&&f.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(o,f){this._checkLoaded(),this.getSource(o).setData(f),this._changed=!0}getSource(o){const f=this._getSourceCache(o);return f&&f.getSource()}addLayer(o,f,b={}){this._checkLoaded();const T=o.id;if(this.getLayer(T))return void this.fire(new r.ErrorEvent(new Error(`Layer with id "${T}" already exists on this map`)));let M;if(o.type==="custom"){if(vn(this,r.validateCustomStyleLayer(o)))return;M=r.createStyleLayer(o)}else{if(typeof o.source=="object"&&(this.addSource(T,o.source),o=r.clone$1(o),o=r.extend(o,{source:T})),this._validate(r.validateLayer,`layers.${T}`,o,{arrayIndex:-1},b))return;M=r.createStyleLayer(o),this._validateLayer(M),M.setEventedParent(this,{layer:{id:T}}),this._serializedLayers[M.id]=M.serialize(),this._updateLayerCount(M,!0)}const F=f?this._order.indexOf(f):this._order.length;if(f&&F===-1)return void this.fire(new r.ErrorEvent(new Error(`Layer with id "${f}" does not exist on this map.`)));this._order.splice(F,0,T),this._layerOrderChanged=!0,this._layers[T]=M;const j=this._getLayerSourceCache(M);if(this._removedLayers[T]&&M.source&&j&&M.type!=="custom"){const q=this._removedLayers[T];delete this._removedLayers[T],q.type!==M.type?this._updatedSources[M.source]="clear":(this._updatedSources[M.source]="reload",j.pause())}this._updateLayer(M),M.onAdd&&M.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(o,f){if(this._checkLoaded(),this._changed=!0,!this._layers[o])return void this.fire(new r.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be moved.`)));if(o===f)return;const b=this._order.indexOf(o);this._order.splice(b,1);const T=f?this._order.indexOf(f):this._order.length;f&&T===-1?this.fire(new r.ErrorEvent(new Error(`Layer with id "${f}" does not exist on this map.`))):(this._order.splice(T,0,o),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(o){this._checkLoaded();const f=this._layers[o];if(!f)return void this.fire(new r.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be removed.`)));f.setEventedParent(null),this._updateLayerCount(f,!1);const b=this._order.indexOf(o);this._order.splice(b,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=f,delete this._layers[o],delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],f.onRemove&&f.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(o){return this._layers[o]}hasLayer(o){return o in this._layers}hasLayerType(o){for(const f in this._layers)if(this._layers[f].type===o)return!0;return!1}setLayerZoomRange(o,f,b){this._checkLoaded();const T=this.getLayer(o);T?T.minzoom===f&&T.maxzoom===b||(f!=null&&(T.minzoom=f),b!=null&&(T.maxzoom=b),this._updateLayer(T)):this.fire(new r.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(o,f,b={}){this._checkLoaded();const T=this.getLayer(o);if(T){if(!y(T.filter,f))return f==null?(T.filter=void 0,void this._updateLayer(T)):void(this._validate(r.validateFilter,`layers.${T.id}.filter`,f,{layerType:T.type},b)||(T.filter=r.clone$1(f),this._updateLayer(T)))}else this.fire(new r.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be filtered.`)))}getFilter(o){const f=this.getLayer(o);return f&&r.clone$1(f.filter)}setLayoutProperty(o,f,b,T={}){this._checkLoaded();const M=this.getLayer(o);M?y(M.getLayoutProperty(f),b)||(M.setLayoutProperty(f,b,T),this._updateLayer(M)):this.fire(new r.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(o,f){const b=this.getLayer(o);if(b)return b.getLayoutProperty(f);this.fire(new r.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style.`)))}setPaintProperty(o,f,b,T={}){this._checkLoaded();const M=this.getLayer(o);M?y(M.getPaintProperty(f),b)||(M.setPaintProperty(f,b,T)&&this._updateLayer(M),this._changed=!0,this._updatedPaintProps[o]=!0):this.fire(new r.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(o,f){const b=this.getLayer(o);return b&&b.getPaintProperty(f)}setFeatureState(o,f){this._checkLoaded();const b=o.source,T=o.sourceLayer,M=this.getSource(b);if(!M)return void this.fire(new r.ErrorEvent(new Error(`The source '${b}' does not exist in the map's style.`)));const F=M.type;if(F==="geojson"&&T)return void this.fire(new r.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(F==="vector"&&!T)return void this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));o.id===void 0&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided.")));const j=this._getSourceCaches(b);for(const q of j)q.setFeatureState(T,o.id,f)}removeFeatureState(o,f){this._checkLoaded();const b=o.source,T=this.getSource(b);if(!T)return void this.fire(new r.ErrorEvent(new Error(`The source '${b}' does not exist in the map's style.`)));const M=T.type,F=M==="vector"?o.sourceLayer:void 0;if(M==="vector"&&!F)return void this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(f&&typeof o.id!="string"&&typeof o.id!="number")return void this.fire(new r.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const j=this._getSourceCaches(b);for(const q of j)q.removeFeatureState(F,o.id,f)}getFeatureState(o){this._checkLoaded();const f=o.source,b=o.sourceLayer,T=this.getSource(f);if(T){if(T.type!=="vector"||b)return o.id===void 0&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(f)[0].getFeatureState(b,o.id);this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new r.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)))}getTransition(){return r.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const o={};for(const f in this._sourceCaches){const b=this._sourceCaches[f].getSource();o[b.id]||(o[b.id]=b.serialize())}return r.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:o,layers:this._serializeLayers(this._order)},f=>f!==void 0)}_updateLayer(o){this._updatedLayers[o.id]=!0;const f=this._getLayerSourceCache(o);o.source&&!this._updatedSources[o.source]&&f&&f.getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",f.pause()),this._changed=!0,o.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(o){const f=F=>this._layers[F].type==="fill-extrusion",b={},T=[];for(let F=this._order.length-1;F>=0;F--){const j=this._order[F];if(f(j)){b[j]=F;for(const q of o){const Y=q[j];if(Y)for(const J of Y)T.push(J)}}}T.sort((F,j)=>j.intersectionZ-F.intersectionZ);const M=[];for(let F=this._order.length-1;F>=0;F--){const j=this._order[F];if(f(j))for(let q=T.length-1;q>=0;q--){const Y=T[q].feature;if(b[Y.layer.id]<F)break;M.push(Y),T.pop()}else for(const q of o){const Y=q[j];if(Y)for(const J of Y)M.push(J.feature)}}return M}queryRenderedFeatures(o,f,b){f&&f.filter&&this._validate(r.validateFilter,"queryRenderedFeatures.filter",f.filter,null,f);const T={};if(f&&f.layers){if(!Array.isArray(f.layers))return this.fire(new r.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const q of f.layers){const Y=this._layers[q];if(!Y)return this.fire(new r.ErrorEvent(new Error(`The layer '${q}' does not exist in the map's style and cannot be queried for features.`))),[];T[Y.source]=!0}}const M=[];f.availableImages=this._availableImages;const F=f&&f.layers?f.layers.some(q=>{const Y=this.getLayer(q);return Y&&Y.is3D()}):this.has3DLayers(),j=kn.createFromScreenPoints(o,b);for(const q in this._sourceCaches){const Y=this._sourceCaches[q].getSource().id;f.layers&&!T[Y]||M.push(jt(this._sourceCaches[q],this._layers,this._serializedLayers,j,f,b,F,!!this.map._showQueryGeometry))}return this.placement&&M.push(function(q,Y,J,te,ae,ue,pe){const le={},Se=ue.queryRenderedSymbols(te),ce=[];for(const ge of Object.keys(Se).map(Number))ce.push(pe[ge]);ce.sort(tn);for(const ge of ce){const _e=ge.featureIndex.lookupSymbolFeatures(Se[ge.bucketInstanceId],Y,ge.bucketIndex,ge.sourceLayerIndex,ae.filter,ae.layers,ae.availableImages,q);for(const $e in _e){const Ee=le[$e]=le[$e]||[],Ae=_e[$e];Ae.sort((De,nt)=>{const at=ge.featureSortOrder;if(at){const it=at.indexOf(De.featureIndex);return at.indexOf(nt.featureIndex)-it}return nt.featureIndex-De.featureIndex});for(const De of Ae)Ee.push(De)}}for(const ge in le)le[ge].forEach(_e=>{const $e=_e.feature,Ee=J(q[ge]).getFeatureState($e.layer["source-layer"],$e.id);$e.source=$e.layer.source,$e.layer["source-layer"]&&($e.sourceLayer=$e.layer["source-layer"]),$e.state=Ee});return le}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),j.screenGeometry,f,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(M)}querySourceFeatures(o,f){f&&f.filter&&this._validate(r.validateFilter,"querySourceFeatures.filter",f.filter,null,f);const b=this._getSourceCaches(o);let T=[];for(const M of b)T=T.concat(Ct(M,f));return T}addSourceType(o,f,b){return ai.getSourceType(o)?b(new Error(`A source type called "${o}" already exists.`)):(ai.setSourceType(o,f),f.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:f.workerSourceURL},b):b(null,null))}getLight(){return this.light.getLight()}setLight(o,f={}){this._checkLoaded();const b=this.light.getLight();let T=!1;for(const F in o)if(!y(o[F],b[F])){T=!0;break}if(!T)return;const M=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(o,f),this.light.updateTransitions(M)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(o,f=1){if(this._checkLoaded(),!o)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(f===1){if(typeof o.source=="object"){const b="terrain-dem-src";this.addSource(b,o.source),o=r.clone$1(o),o=r.extend(o,{source:b})}if(this._validate(r.validateTerrain,"terrain",o))return}if(!this.terrain||this.terrain&&f!==this.terrain.drapeRenderMode)this._createTerrain(o,f);else{const b=this.terrain,T=b.get();for(const M of Object.keys(r.spec.terrain))!o.hasOwnProperty(M)&&r.spec.terrain[M].default&&(o[M]=r.spec.terrain[M].default);for(const M in o)if(!y(o[M],T[M])){b.set(o),this.stylesheet.terrain=o;const F=this._setTransitionParameters({duration:0});b.updateTransitions(F);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(o){const f=this.fog=new un(o,this.map.transform);this.stylesheet.fog=o;const b=this._setTransitionParameters({duration:0});f.updateTransitions(b)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const o of this.map._markers)o._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(o){if(this._checkLoaded(),!o)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const f=this.fog,b=f.get();Object.keys(o).length===0&&f.set(o);for(const T in o)if(!y(o[T],b[T])){f.set(o),this.stylesheet.fog=o;const M=this._setTransitionParameters({duration:0});f.updateTransitions(M);break}}else this._createFog(o);this._markersNeedUpdate=!0}_setTransitionParameters(o){return{now:r.exported.now(),transition:r.extend(o,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const o=this._order.filter(b=>this.isLayerDraped(this._layers[b])),f=this._order.filter(b=>!this.isLayerDraped(this._layers[b]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...o),this._drapedFirstOrder.push(...f)}_createTerrain(o,f){const b=this.terrain=new ze(o,f);this.stylesheet.terrain=o,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const T=this._setTransitionParameters({duration:0});b.updateTransitions(T)}_force3DLayerUpdate(){for(const o in this._layers){const f=this._layers[o];f.type==="fill-extrusion"&&this._updateLayer(f)}}_forceSymbolLayerUpdate(){for(const o in this._layers){const f=this._layers[o];f.type==="symbol"&&this._updateLayer(f)}}_validate(o,f,b,T,M={}){return(!M||M.validate!==!1)&&vn(this,o.call(r.validateStyle,r.extend({key:f,style:this.serialize(),value:b,styleSpec:r.spec},T)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),r.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const o in this._layers)this._layers[o].setEventedParent(null);for(const o in this._sourceCaches)this._sourceCaches[o].clearTiles(),this._sourceCaches[o].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(o){const f=this._getSourceCaches(o);for(const b of f)b.clearTiles()}_reloadSource(o){const f=this._getSourceCaches(o);for(const b of f)b.resume(),b.reload()}_updateSources(o){for(const f in this._sourceCaches)this._sourceCaches[f].update(o)}_generateCollisionBoxes(){for(const o in this._sourceCaches){const f=this._sourceCaches[o];f.resume(),f.reload()}}_updatePlacement(o,f,b,T,M=!1){let F=!1,j=!1;const q={};for(const Y of this._order){const J=this._layers[Y];if(J.type!=="symbol")continue;if(!q[J.source]){const ae=this._getLayerSourceCache(J);if(!ae)continue;q[J.source]=ae.getRenderableIds(!0).map(ue=>ae.getTileByID(ue)).sort((ue,pe)=>pe.tileID.overscaledZ-ue.tileID.overscaledZ||(ue.tileID.isLessThan(pe.tileID)?-1:1))}const te=this.crossTileSymbolIndex.addLayer(J,q[J.source],o.center.lng,o.projection);F=F||te}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),M=M||this._layerOrderChanged||b===0,this._layerOrderChanged&&this.fire(new r.Event("neworder")),(M||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(r.exported.now(),o.zoom))&&(this.pauseablePlacement=new To(o,this._order,M,f,b,T,this.placement,this.fog&&o.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,q),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(r.exported.now()),j=!0),F&&this.pauseablePlacement.placement.setStale()),j||F)for(const Y of this._order){const J=this._layers[Y];J.type==="symbol"&&this.placement.updateLayerOpacities(J,q[J.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(r.exported.now())}_releaseSymbolFadeTiles(){for(const o in this._sourceCaches)this._sourceCaches[o].releaseSymbolFadeTiles()}getImages(o,f,b){this.imageManager.getImages(f.icons,b),this._updateTilesForChangedImages();const T=M=>{M&&M.setDependencies(f.tileID.key,f.type,f.icons)};T(this._otherSourceCaches[f.source]),T(this._symbolSourceCaches[f.source])}getGlyphs(o,f,b){this.glyphManager.getGlyphs(f.stacks,b)}getResource(o,f,b){return r.makeRequest(f,b)}_getSourceCache(o){return this._otherSourceCaches[o]}_getLayerSourceCache(o){return o.type==="symbol"?this._symbolSourceCaches[o.source]:this._otherSourceCaches[o.source]}_getSourceCaches(o){const f=[];return this._otherSourceCaches[o]&&f.push(this._otherSourceCaches[o]),this._symbolSourceCaches[o]&&f.push(this._symbolSourceCaches[o]),f}_isSourceCacheLoaded(o){const f=this._getSourceCaches(o);return f.length===0?(this.fire(new r.ErrorEvent(new Error(`There is no source with ID '${o}'`))),!1):f.every(b=>b.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}ai.getSourceType=function(_){return Be[_]},ai.setSourceType=function(_,o){Be[_]=o},ai.registerForPluginStateChange=r.registerForPluginStateChange;var Qr=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,Xi="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}";let xs={},eo={};xs=ei("",`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {return currentElevation(apos);}
#endif
float unpack_depth(vec4 rgba_depth)
{const vec4 bit_shift=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,!0),eo=ei(`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,!0);const ta=ei(`
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}
#ifdef TERRAIN
highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(256.0*256.0*256.0,256.0*256.0,256.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/256.0,1.0/256.0,1.0/256.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#endif`,`
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),Ho=Qr,Ko=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var na={background:ei(`uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:ei(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:ei(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;attribute float a_scale;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);vec4 world_center=vec4(pos,1);
#else 
mat3 surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;
#else
vec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:ei("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ei(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
vec3 pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:ei(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:ei("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:ei("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:ei("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:ei(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:ei(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:ei(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:ei(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:ei(`varying vec4 v_color;void main() {vec4 color=v_color;
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);
#else
vec3 pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(pos.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:ei(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);
#else
vec3 p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:ei(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ei(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:ei(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
#ifdef RENDER_LINE_GRADIENT
highp vec4 out_color=texture2D(u_gradient_image,v_uv.xy);
#else
vec4 out_color=color;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);}}
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:ei(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:ei(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:ei(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);vec4 offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
vec4 offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:ei(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);vec4 offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
vec4 offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:ei(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:ei(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef FOG
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
const float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=u_skirt_height*u_skirt_height*wireframeOffset;
#endif
vec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
}`),terrainDepth:ei(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:ei(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Xi),skyboxGradient:ei(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Xi),skyboxCapture:ei(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:ei(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);vec4 color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
vec4 color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_merc_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 merc_pos=a_merc_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idy=u_grid_matrix[1][2];float S=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=a_pos[0]*S;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;uv=uv*EXTENT;vec4 up_vector=vec4(elevationVector(uv),1.0);float height=elevation(uv);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector.xyz*height;vec4 globe=u_globe_matrix*vec4(globe_pos,1.0);vec4 mercator=vec4(0.0);if (u_zoom_transition > 0.0) {mercator=vec4(merc_pos,height,1.0);mercator.xy-=u_merc_center;mercator.x=wrap(mercator.x,-0.5,0.5);mercator=u_merc_matrix*mercator;}vec3 position=mix(globe.xyz,mercator.xyz,u_zoom_transition);gl_Position=u_proj_matrix*vec4(position,1.0);
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:ei(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);
#ifdef PROJECTION_GLOBE_VIEW
float globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));float horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
float horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function ei(_,o,f){const b=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,T=/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g,M=o.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),F=_.match(T),j=o.match(T),q=Qr.match(T);let Y=j?j.concat(F):F;f||(xs.staticUniforms&&(Y=xs.staticUniforms.concat(Y)),eo.staticUniforms&&(Y=eo.staticUniforms.concat(Y))),Y&&(Y=Y.concat(q));const J={};return{fragmentSource:_=_.replace(b,(te,ae,ue,pe,le)=>(J[le]=!0,ae==="define"?`
#ifndef HAS_UNIFORM_u_${le}
varying ${ue} ${pe} ${le};
#else
uniform ${ue} ${pe} u_${le};
#endif
`:`
#ifdef HAS_UNIFORM_u_${le}
    ${ue} ${pe} ${le} = u_${le};
#endif
`)),vertexSource:o=o.replace(b,(te,ae,ue,pe,le)=>{const Se=pe==="float"?"vec2":"vec4",ce=le.match(/color/)?"color":Se;return J[le]?ae==="define"?`
#ifndef HAS_UNIFORM_u_${le}
uniform lowp float u_${le}_t;
attribute ${ue} ${Se} a_${le};
varying ${ue} ${pe} ${le};
#else
uniform ${ue} ${pe} u_${le};
#endif
`:ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${le}
    ${le} = a_${le};
#else
    ${ue} ${pe} ${le} = u_${le};
#endif
`:`
#ifndef HAS_UNIFORM_u_${le}
    ${le} = unpack_mix_${ce}(a_${le}, u_${le}_t);
#else
    ${ue} ${pe} ${le} = u_${le};
#endif
`:ae==="define"?`
#ifndef HAS_UNIFORM_u_${le}
uniform lowp float u_${le}_t;
attribute ${ue} ${Se} a_${le};
#else
uniform ${ue} ${pe} u_${le};
#endif
`:ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${le}
    ${ue} ${pe} ${le} = a_${le};
#else
    ${ue} ${pe} ${le} = u_${le};
#endif
`:`
#ifndef HAS_UNIFORM_u_${le}
    ${ue} ${pe} ${le} = unpack_mix_${ce}(a_${le}, u_${le}_t);
#else
    ${ue} ${pe} ${le} = u_${le};
#endif
`}),staticAttributes:M,staticUniforms:Y}}class sc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(o,f,b,T,M,F,j,q,Y){this.context=o;let J=this.boundPaintVertexBuffers.length!==T.length;for(let te=0;!J&&te<T.length;te++)this.boundPaintVertexBuffers[te]!==T[te]&&(J=!0);o.extVertexArrayObject&&this.vao&&this.boundProgram===f&&this.boundLayoutVertexBuffer===b&&!J&&this.boundIndexBuffer===M&&this.boundVertexOffset===F&&this.boundDynamicVertexBuffer===j&&this.boundDynamicVertexBuffer2===q&&this.boundDynamicVertexBuffer3===Y?(o.bindVertexArrayOES.set(this.vao),j&&j.bind(),M&&M.dynamicDraw&&M.bind(),q&&q.bind(),Y&&Y.bind()):this.freshBind(f,b,T,M,F,j,q,Y)}freshBind(o,f,b,T,M,F,j,q){let Y;const J=o.numAttributes,te=this.context,ae=te.gl;if(te.extVertexArrayObject)this.vao&&this.destroy(),this.vao=te.extVertexArrayObject.createVertexArrayOES(),te.bindVertexArrayOES.set(this.vao),Y=0,this.boundProgram=o,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=b,this.boundIndexBuffer=T,this.boundVertexOffset=M,this.boundDynamicVertexBuffer=F,this.boundDynamicVertexBuffer2=j,this.boundDynamicVertexBuffer3=q;else{Y=te.currentNumAttributes||0;for(let ue=J;ue<Y;ue++)ae.disableVertexAttribArray(ue)}f.enableAttributes(ae,o);for(const ue of b)ue.enableAttributes(ae,o);F&&F.enableAttributes(ae,o),j&&j.enableAttributes(ae,o),q&&q.enableAttributes(ae,o),f.bind(),f.setVertexAttribPointers(ae,o,M);for(const ue of b)ue.bind(),ue.setVertexAttribPointers(ae,o,M);F&&(F.bind(),F.setVertexAttribPointers(ae,o,M)),T&&T.bind(),j&&(j.bind(),j.setVertexAttribPointers(ae,o,M)),q&&(q.bind(),q.setVertexAttribPointers(ae,o,M)),te.currentNumAttributes=J}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function el(_,o){const f=Math.pow(2,o.canonical.z),b=o.canonical.y;return[new r.MercatorCoordinate(0,b/f).toLngLat().lat,new r.MercatorCoordinate(0,(b+1)/f).toLngLat().lat]}function ac(_,o,f,b,T,M,F){const j=_.context,q=j.gl,Y=f.fbo;if(!Y)return;_.prepareDrawTile();const J=_.useProgram("hillshade");j.activeTexture.set(q.TEXTURE0),q.bindTexture(q.TEXTURE_2D,Y.colorAttachment.get());const te=((le,Se,ce,ge)=>{const _e=ce.paint.get("hillshade-shadow-color"),$e=ce.paint.get("hillshade-highlight-color"),Ee=ce.paint.get("hillshade-accent-color");let Ae=ce.paint.get("hillshade-illumination-direction")*(Math.PI/180);ce.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ae-=le.transform.angle);const De=!le.options.moving;return{u_matrix:ge||le.transform.calculateProjMatrix(Se.tileID.toUnwrapped(),De),u_image:0,u_latrange:el(0,Se.tileID),u_light:[ce.paint.get("hillshade-exaggeration"),Ae],u_shadow:_e,u_highlight:$e,u_accent:Ee}})(_,f,b,_.terrain?o.projMatrix:null);_.prepareDrawProgram(j,J,o.toUnwrapped());const{tileBoundsBuffer:ae,tileBoundsIndexBuffer:ue,tileBoundsSegments:pe}=_.getTileBoundsBuffers(f);J.draw(j,q.TRIANGLES,T,M,F,r.CullFaceMode.disabled,te,b.id,ae,ue,pe)}function ia(_,o,f){if(!o.needsDEMTextureUpload)return;const b=_.context,T=b.gl;b.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||_.getTileTexture(f.stride);const M=f.getPixels();o.demTexture?o.demTexture.update(M,{premultiply:!1}):o.demTexture=new r.Texture(b,M,T.RGBA,{premultiply:!1}),o.needsDEMTextureUpload=!1}function ra(_,o,f,b,T,M){const F=_.context,j=F.gl;if(!o.dem)return;const q=o.dem;if(F.activeTexture.set(j.TEXTURE1),ia(_,o,q),!o.demTexture)return;o.demTexture.bind(j.NEAREST,j.CLAMP_TO_EDGE);const Y=q.dim;F.activeTexture.set(j.TEXTURE0);let J=o.fbo;if(!J){const pe=new r.Texture(F,{width:Y,height:Y,data:null},j.RGBA);pe.bind(j.LINEAR,j.CLAMP_TO_EDGE),J=o.fbo=F.createFramebuffer(Y,Y,!0),J.colorAttachment.set(pe.texture)}F.bindFramebuffer.set(J.framebuffer),F.viewport.set([0,0,Y,Y]);const{tileBoundsBuffer:te,tileBoundsIndexBuffer:ae,tileBoundsSegments:ue}=_.getMercatorTileBoundsBuffers();_.useProgram("hillshadePrepare").draw(F,j.TRIANGLES,b,T,M,r.CullFaceMode.disabled,((pe,le)=>{const Se=le.stride,ce=r.create();return r.ortho(ce,0,r.EXTENT,-r.EXTENT,0,0,1),r.translate(ce,ce,[0,-r.EXTENT,0]),{u_matrix:ce,u_image:1,u_dimension:[Se,Se],u_zoom:pe.overscaledZ,u_unpack:le.unpackVector}})(o.tileID,q),f.id,te,ae,ue),o.needsHillshadePrepare=!1}const oa=(_,o)=>({u_matrix:new r.UniformMatrix4f(_,o.u_matrix),u_image0:new r.Uniform1i(_,o.u_image0),u_skirt_height:new r.Uniform1f(_,o.u_skirt_height)}),sa=(_,o)=>({u_matrix:_,u_image0:0,u_skirt_height:o}),qn=(_,o,f,b,T,M,F,j,q,Y,J,te,ae,ue)=>({u_proj_matrix:Float32Array.from(_),u_globe_matrix:o,u_normalize_matrix:Float32Array.from(b),u_merc_matrix:f,u_zoom_transition:T,u_merc_center:M,u_image0:0,u_frustum_tl:F,u_frustum_tr:j,u_frustum_br:q,u_frustum_bl:Y,u_globe_pos:J,u_globe_radius:te,u_viewport:ae,u_grid_matrix:ue?Float32Array.from(ue):new Float32Array(9)});function ws(_,o){return _!=null&&o!=null&&!(!_.hasData()||!o.hasData())&&_.demTexture!=null&&o.demTexture!=null&&_.tileID.key!==o.tileID.key}const Ao=new class{constructor(){this.operations={}}newMorphing(_,o,f,b,T){if(_ in this.operations){const M=this.operations[_];M.to.tileID.key!==f.tileID.key&&(M.queued=f)}else this.operations[_]={startTime:b,phase:0,duration:T,from:o,to:f,queued:null}}getMorphValuesForProxy(_){if(!(_ in this.operations))return null;const o=this.operations[_];return{from:o.from,to:o.to,phase:o.phase}}update(_){for(const o in this.operations){const f=this.operations[o];for(f.phase=(_-f.startTime)/f.duration;f.phase>=1||!this._validOp(f);)if(!this._nextOp(f,_)){delete this.operations[o];break}}}_nextOp(_,o){return!!_.queued&&(_.from=_.to,_.to=_.queued,_.queued=null,_.phase=0,_.startTime=o,!0)}_validOp(_){return _.from.hasData()&&_.to.hasData()}},Es={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function lc(_,o){const f=1<<_.z;return!o&&(_.x===0||_.x===f-1)||_.y===0||_.y===f-1}const Cs=_=>({u_matrix:_});function tl(_,o,f,b,T){if(T>0){const M=r.exported.now(),F=(M-_.timeAdded)/T,j=o?(M-o.timeAdded)/T:-1,q=f.getSource(),Y=b.coveringZoomLevel({tileSize:q.tileSize,roundZoom:q.roundZoom}),J=!o||Math.abs(o.tileID.overscaledZ-Y)>Math.abs(_.tileID.overscaledZ-Y),te=J&&_.refreshedUponExpiration?1:r.clamp(J?F:1-j,0,1);return _.refreshedUponExpiration&&F>=1&&(_.refreshedUponExpiration=!1),o?{opacity:1,mix:1-te}:{opacity:te,mix:0}}return{opacity:1,mix:0}}class Nu extends r.SourceCache{constructor(o){const f={type:"raster-dem",maxzoom:o.transform.maxZoom},b=new wn(Bn(),null),T=Xe("mock-dem",f,b,o.style);super("mock-dem",T,!1),T.setEventedParent(this),this._sourceLoaded=!0}_loadTile(o,f){o.state="loaded",f(null)}}class Lu extends r.SourceCache{constructor(o){const f=Xe("proxy",{type:"geojson",maxzoom:o.transform.maxZoom},new wn(Bn(),null),o.style);super("proxy",f,!1),f.setEventedParent(this),this.map=this.getSource().map=o,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(o,f,b){if(o.freezeTileCoverage)return;this.transform=o;const T=o.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((M,F)=>{if(M[F.key]="",!this._tiles[F.key]){const j=new r.Tile(F,this._source.tileSize*F.overscaleFactor(),o.tileZoom);j.state="loaded",this._tiles[F.key]=j}return M},{});for(const M in this._tiles)M in T||(this.freeFBO(M),this._tiles[M].unloadVectorData(),delete this._tiles[M])}freeFBO(o){const f=this.proxyCachedFBO[o];if(f!==void 0){const b=Object.values(f);this.renderCachePool.push(...b),delete this.proxyCachedFBO[o]}}deallocRenderCache(){this.renderCache.forEach(o=>o.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class aa extends r.OverscaledTileID{constructor(o,f,b){super(o.overscaledZ,o.wrap,o.canonical.z,o.canonical.x,o.canonical.y),this.proxyTileKey=f,this.projMatrix=b}}class nl extends r.Elevation{constructor(o,f){super(),this.painter=o,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[b,T,M]=function(q){const Y=new r.StructArrayLayout4i8,J=new r.StructArrayLayout3ui6,te=131;Y.reserve(17161),J.reserve(33800);const ae=r.EXTENT/128,ue=r.EXTENT+ae/2,pe=ue+ae;for(let Se=-ae;Se<pe;Se+=ae)for(let ce=-ae;ce<pe;ce+=ae){const ge=ce<0||ce>ue||Se<0||Se>ue?24575:0,_e=r.clamp(Math.round(ce),0,r.EXTENT),$e=r.clamp(Math.round(Se),0,r.EXTENT);Y.emplaceBack(_e+ge,$e,_e,$e)}const le=(Se,ce)=>{const ge=ce*te+Se;J.emplaceBack(ge+1,ge,ge+te),J.emplaceBack(ge+te,ge+te+1,ge+1)};for(let Se=1;Se<129;Se++)for(let ce=1;ce<129;ce++)le(ce,Se);return[0,129].forEach(Se=>{for(let ce=0;ce<130;ce++)le(ce,Se),le(Se,ce)}),[Y,J,32768]}(),F=o.context;this.gridBuffer=F.createVertexBuffer(b,r.boundsAttributes.members),this.gridIndexBuffer=F.createIndexBuffer(T),this.gridSegments=r.SegmentVector.simpleSegment(0,0,b.length,T.length),this.gridNoSkirtSegments=r.SegmentVector.simpleSegment(0,0,b.length,M),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Lu(f.map),this.orthoMatrix=r.create(),r.ortho(this.orthoMatrix,0,r.EXTENT,0,r.EXTENT,0,1);const j=F.gl;this._overlapStencilMode=new r.StencilMode({func:j.GEQUAL,mask:255},0,255,j.KEEP,j.KEEP,j.REPLACE),this._previousZoom=o.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=f,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Nu(f.map)}set style(o){o.on("data",this._onStyleDataEvent.bind(this)),o.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=o,this._checkRenderCacheEfficiency()}update(o,f,b){if(o&&o.terrain){this._style!==o&&(this.style=o),this.enabled=!0;const T=o.terrain.properties;this.sourceCache=o.terrain.drapeRenderMode===0?this._mockSourceCache:o._getSourceCache(T.get("source")),this._exaggeration=T.get("exaggeration");const M=()=>{this.sourceCache.used&&r.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const F=this.getScaledDemTileSize();this.sourceCache.update(f,F,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,M(),this._initializing=!0),M(),f.updateElevation(!b),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(f),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(o){this._findCoveringTileCache[o]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const o=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||o.efficiency!==100&&r.warnOnce(`Terrain render cache efficiency is not optimal (${o.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${o.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(o){o.coord&&o.dataType==="source"?this._clearRenderCacheForTile(o.sourceCacheId,o.coord):o.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const o in this._style._sourceCaches)this._style._sourceCaches[o].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(o=>o.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const o=2*this.proxySourceCache.getSource().tileSize;return[o,o]}set useVertexMorphing(o){this._useVertexMorphing=o}updateTileBinding(o){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const f=this.proxySourceCache,b=this.painter.transform;this._initializing&&(this._initializing=b._centerAltitude===0&&this.getAtPointOrZero(r.MercatorCoordinate.fromLngLat(b.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const T=this.proxyCoords=f.getIds().map(q=>{const Y=f.getTileByID(q).tileID;return Y.projMatrix=b.calculateProjMatrix(Y.toUnwrapped()),Y});(function(q,Y){const J=Y.transform.pointCoordinate(Y.transform.getCameraPoint()),te=new r.pointGeometry(J.x,J.y);q.sort((ae,ue)=>{if(ue.overscaledZ-ae.overscaledZ)return ue.overscaledZ-ae.overscaledZ;const pe=new r.pointGeometry(ae.canonical.x+(1<<ae.canonical.z)*ae.wrap,ae.canonical.y),le=new r.pointGeometry(ue.canonical.x+(1<<ue.canonical.z)*ue.wrap,ue.canonical.y),Se=te.mult(1<<ae.canonical.z);return Se.x-=.5,Se.y-=.5,Se.distSqr(pe)-Se.distSqr(le)})})(T,this.painter),this._previousZoom=b.zoom;const M=this.proxyToSource||{};this.proxyToSource={},T.forEach(q=>{this.proxyToSource[q.key]={}}),this.terrainTileForTile={};const F=this._style._sourceCaches;for(const q in F){const Y=F[q];if(!Y.used||(Y!==this.sourceCache&&this.resetTileLookupCache(Y.id),this._setupProxiedCoordsForOrtho(Y,o[q],M),Y.usedForTerrain))continue;const J=o[q];Y.getSource().reparseOverscaled&&this._assignTerrainTiles(J)}this.proxiedCoords[f.id]=T.map(q=>new aa(q,q.key,this.orthoMatrix)),this._assignTerrainTiles(T),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(M),this.renderingToTexture=!1,this._updateTimestamp=r.exported.now();const j={};this._visibleDemTiles=[];for(const q of this.proxyCoords){const Y=this.terrainTileForTile[q.key];if(!Y)continue;const J=Y.tileID.key;J in j||(this._visibleDemTiles.push(Y),j[J]=J)}}_assignTerrainTiles(o){this._initializing||o.forEach(f=>{if(this.terrainTileForTile[f.key])return;const b=this._findTileCoveringTileID(f,this.sourceCache);b&&(this.terrainTileForTile[f.key]=b)})}_prepareDEMTextures(){const o=this.painter.context,f=o.gl;for(const b in this.terrainTileForTile){const T=this.terrainTileForTile[b],M=T.dem;!M||T.demTexture&&!T.needsDEMTextureUpload||(o.activeTexture.set(f.TEXTURE1),ia(this.painter,T,M))}}_prepareDemTileUniforms(o,f,b,T){if(!f||f.demTexture==null)return!1;const M=o.tileID.canonical,F=Math.pow(2,f.tileID.canonical.z-M.z),j=T||"";return b[`u_dem_tl${j}`]=[M.x*F%1,M.y*F%1],b[`u_dem_scale${j}`]=F,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const o=this.painter.context,f=o.gl;if(!this._emptyDepthBufferTexture){const b=new r.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new r.Texture(o,b,f.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let o=0;const f=this._visibleDemTiles.reduce((b,T)=>{if(!T.dem)return b;const M=T.dem.tree.minimums[0];return M>0&&o++,b+M},0);return o?f/o:0}_updateEmptyDEMTexture(){const o=this.painter.context,f=o.gl;o.activeTexture.set(f.TEXTURE2);const b=this._getLoadedAreaMinimum(),T=new r.RGBAImage({width:1,height:1},new Uint8Array(r.DEMData.pack(b,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let M=this._emptyDEMTexture;return M?M.update(T,{premultiply:!1}):M=this._emptyDEMTexture=new r.Texture(o,T,f.RGBA,{premultiply:!1}),M}setupElevationDraw(o,f,b){const T=this.painter.context,M=T.gl,F=(j=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:r.DEMData.getUnpackVector(j),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0,u_tile_tl_up:[0,0,1],u_tile_tr_up:[0,0,1],u_tile_br_up:[0,0,1],u_tile_bl_up:[0,0,1],u_tile_up_scale:1});var j;F.u_dem_size=this.sourceCache.getSource().tileSize,F.u_exaggeration=this.exaggeration();const q=this.painter.transform,Y=q.projection,J=o.tileID.canonical;F.u_tile_tl_up=Y.upVector(J,0,0),F.u_tile_tr_up=Y.upVector(J,r.EXTENT,0),F.u_tile_br_up=Y.upVector(J,r.EXTENT,r.EXTENT),F.u_tile_bl_up=Y.upVector(J,0,r.EXTENT),F.u_tile_up_scale=b&&b.useDenormalizedUpVectorScale?r.GLOBE_METERS_TO_ECEF:Y.upVectorScale(J,q.center.lat,q.worldSize).metersToTile;let te=null,ae=null,ue=1;if(b&&b.morphing&&this._useVertexMorphing){const pe=b.morphing.srcDemTile,le=b.morphing.dstDemTile;ue=b.morphing.phase,pe&&le&&(this._prepareDemTileUniforms(o,pe,F,"_prev")&&(ae=pe),this._prepareDemTileUniforms(o,le,F)&&(te=le))}if(ae&&te?(T.activeTexture.set(M.TEXTURE2),te.demTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE,M.NEAREST),T.activeTexture.set(M.TEXTURE4),ae.demTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE,M.NEAREST),F.u_dem_lerp=ue):(te=this.terrainTileForTile[o.tileID.key],T.activeTexture.set(M.TEXTURE2),(this._prepareDemTileUniforms(o,te,F)?te.demTexture:this.emptyDEMTexture).bind(M.NEAREST,M.CLAMP_TO_EDGE)),T.activeTexture.set(M.TEXTURE3),b&&b.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE),this._depthFBO&&(F.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE),F.u_depth_size_inv=[1,1]),b&&b.useMeterToDem&&te){const pe=(1<<te.tileID.canonical.z)*r.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;F.u_meter_to_dem=pe}b&&b.labelPlaneMatrixInv&&(F.u_label_plane_matrix_inv=b.labelPlaneMatrixInv),f.setTerrainUniformValues(T,F)}renderToBackBuffer(o){const f=this.painter,b=this.painter.context;o.length!==0&&(b.bindFramebuffer.set(null),b.viewport.set([0,0,f.width,f.height]),f.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(T,M,F,j,q){if(T.transform.projection.name==="globe")(function(Y,J,te,ae,ue){const pe=Y.context,le=pe.gl;let Se,ce;const ge=Y.options.showTerrainWireframe?2:0,_e=Y.transform,$e=r.globeUseCustomAntiAliasing(Y,pe,_e),Ee=(Re,bt)=>{if(ce===Re)return;const yt=[Es[Re],"PROJECTION_GLOBE_VIEW"];$e&&yt.push("CUSTOM_ANTIALIASING"),bt&&yt.push(Es[ge]),Se=Y.useProgram("globeRaster",null,yt),ce=Re},Ae=Y.colorModeForRenderPass(),De=new r.DepthMode(le.LEQUAL,r.DepthMode.ReadWrite,Y.depthRangeFor3D);Ao.update(ue);const nt=r.calculateGlobeMercatorMatrix(_e),at=[r.mercatorXfromLng(_e.center.lng),r.mercatorYfromLat(_e.center.lat)],it=Y.globeSharedBuffers,et=[_e.width*r.exported.devicePixelRatio,_e.height*r.exported.devicePixelRatio];if((ge?[!1,!0]:[!1]).forEach(Re=>{ce=-1;const bt=Re?le.LINES:le.TRIANGLES;for(const yt of ae){const Vt=te.getTile(yt),ht=r.StencilMode.disabled,rn=J.prevTerrainTileForTile[yt.key],Ft=J.terrainTileForTile[yt.key];ws(rn,Ft)&&Ao.newMorphing(yt.key,rn,Ft,ue,250),pe.activeTexture.set(le.TEXTURE0),Vt.texture.bind(le.LINEAR,le.CLAMP_TO_EDGE);const zt=Ao.getMorphValuesForProxy(yt.key),Mt=zt?1:0,Bt={useDenormalizedUpVectorScale:!0};zt&&r.extend$1(Bt,{morphing:{srcDemTile:zt.from,dstDemTile:zt.to,phase:r.easeCubicInOut(zt.phase)}});const yn=Float32Array.from(_e.globeMatrix),fn=r.globeTileLatLngCorners(yt.canonical),Rn=r.getLatitudinalLod((fn[0][0]+fn[1][0])/2),nn=r.getGridMatrix(yt.canonical,fn,Rn),Sn=r.globeNormalizeECEF(r.globeTileBounds(yt.canonical)),ti=qn(_e.projMatrix,yn,nt,Sn,r.globeToMercatorTransition(_e.zoom),at,_e.frustumCorners.TL,_e.frustumCorners.TR,_e.frustumCorners.BR,_e.frustumCorners.BL,_e.globeCenterInViewSpace,_e.globeRadius,et,nn);if(Ee(Mt,Re),J.setupElevationDraw(Vt,Se,Bt),Y.prepareDrawProgram(pe,Se,yt.toUnwrapped()),it){const[si,Mi,di]=Re?it.getWirefameBuffers(Y.context,Rn):it.getGridBuffers(Rn);Se.draw(pe,bt,De,ht,Ae,r.CullFaceMode.backCCW,ti,"globe_raster",si,Mi,di)}}}),it){const Re=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];$e&&Re.push("CUSTOM_ANTIALIASING"),Se=Y.useProgram("globeRaster",null,Re);for(const bt of ae){const{x:yt,y:Vt,z:ht}=bt.canonical,rn=Vt===0,Ft=Vt===(1<<ht)-1,[zt,Mt,Bt,yn]=it.getPoleBuffers(ht);if(yn&&(rn||Ft)){const fn=te.getTile(bt);pe.activeTexture.set(le.TEXTURE0),fn.texture.bind(le.LINEAR,le.CLAMP_TO_EDGE);let Rn=r.globePoleMatrixForTile(ht,yt,_e);const nn=r.globeNormalizeECEF(r.globeTileBounds(bt.canonical)),Sn=(ti,si)=>ti.draw(pe,le.TRIANGLES,De,r.StencilMode.disabled,Ae,r.CullFaceMode.disabled,qn(_e.projMatrix,Rn,Rn,nn,0,at,_e.frustumCorners.TL,_e.frustumCorners.TR,_e.frustumCorners.BR,_e.frustumCorners.BL,_e.globeCenterInViewSpace,_e.globeRadius,et),"globe_pole_raster",si,Bt,yn);J.setupElevationDraw(fn,Se,{}),Y.prepareDrawProgram(pe,Se,bt.toUnwrapped()),rn&&Sn(Se,zt),Ft&&(Rn=r.scale(r.create(),Rn,[1,-1,1]),Sn(Se,Mt))}}}})(T,M,F,j,q);else{const Y=T.context,J=Y.gl;let te,ae;const ue=T.options.showTerrainWireframe?2:0,pe=(_e,$e)=>{if(ae===_e)return;const Ee=[Es[_e]];$e&&Ee.push(Es[ue]),te=T.useProgram("terrainRaster",null,Ee),ae=_e},le=T.colorModeForRenderPass(),Se=new r.DepthMode(J.LEQUAL,r.DepthMode.ReadWrite,T.depthRangeFor3D);Ao.update(q);const ce=T.transform,ge=6*Math.pow(1.5,22-ce.zoom)*M.exaggeration();(ue?[!1,!0]:[!1]).forEach(_e=>{ae=-1;const $e=_e?J.LINES:J.TRIANGLES,[Ee,Ae]=_e?M.getWirefameBuffer():[M.gridIndexBuffer,M.gridSegments];for(const De of j){const nt=F.getTile(De),at=r.StencilMode.disabled,it=M.prevTerrainTileForTile[De.key],et=M.terrainTileForTile[De.key];ws(it,et)&&Ao.newMorphing(De.key,it,et,q,250),Y.activeTexture.set(J.TEXTURE0),nt.texture.bind(J.LINEAR,J.CLAMP_TO_EDGE,J.LINEAR_MIPMAP_NEAREST);const Re=Ao.getMorphValuesForProxy(De.key),bt=Re?1:0;let yt;Re&&(yt={morphing:{srcDemTile:Re.from,dstDemTile:Re.to,phase:r.easeCubicInOut(Re.phase)}});const Vt=sa(De.projMatrix,lc(De.canonical,ce.renderWorldCopies)?ge/10:ge);pe(bt,_e),M.setupElevationDraw(nt,te,yt),T.prepareDrawProgram(Y,te,De.toUnwrapped()),te.draw(Y,$e,Se,at,le,r.CullFaceMode.backCCW,Vt,"terrain_raster",M.gridBuffer,Ee,Ae)}})}}(f,this,this.proxySourceCache,o,this._updateTimestamp),this.renderingToTexture=!0,f.gpuTimingDeferredRenderEnd(),o.splice(0,o.length))}renderBatch(o){if(this._drapedRenderBatches.length===0)return o+1;this.renderingToTexture=!0;const f=this.painter,b=this.painter.context,T=this.proxySourceCache,M=this.proxiedCoords[T.id],F=this._drapedRenderBatches.shift(),j=[],q=f.style.order;let Y=0;for(const J of M){const te=T.getTileByID(J.proxyTileKey),ae=T.proxyCachedFBO[J.key]?T.proxyCachedFBO[J.key][o]:void 0,ue=ae!==void 0?T.renderCache[ae]:this.pool[Y++],pe=ae!==void 0;if(te.texture=ue.tex,pe&&!ue.dirty){j.push(te.tileID);continue}let le;b.bindFramebuffer.set(ue.fb.framebuffer),this.renderedToTile=!1,ue.dirty&&(b.clear({color:r.Color.transparent,stencil:0}),ue.dirty=!1);for(let Se=F.start;Se<=F.end;++Se){const ce=f.style._layers[q[Se]];if(ce.isHidden(f.transform.zoom))continue;const ge=f.style._getLayerSourceCache(ce),_e=ge?this.proxyToSource[J.key][ge.id]:[J];if(!_e)continue;const $e=_e;b.viewport.set([0,0,ue.fb.width,ue.fb.height]),le!==(ge?ge.id:null)&&(this._setupStencil(ue,_e,ce,ge),le=ge?ge.id:null),f.renderLayer(f,ge,ce,$e)}this.renderedToTile?(ue.dirty=!0,j.push(te.tileID)):pe||--Y,Y===5&&(Y=0,this.renderToBackBuffer(j))}return this.renderToBackBuffer(j),this.renderingToTexture=!1,b.bindFramebuffer.set(null),b.viewport.set([0,0,f.width,f.height]),F.end+1}postRender(){}renderCacheEfficiency(o){const f=o.order.length;if(f===0)return{efficiency:100};let b,T=0,M=0,F=!1;for(let j=0;j<f;++j){const q=o._layers[o.order[j]];this._style.isLayerDraped(q)?(F&&++T,++M):F||(F=!0,b=q.id)}return M===0?{efficiency:100}:{efficiency:100*(1-T/M),firstUndrapedLayer:b}}getMinElevationBelowMSL(){let o=0;return this._visibleDemTiles.filter(f=>f.dem).forEach(f=>{o=Math.min(o,f.dem.tree.minimums[0])}),o===0?o:(o-30)*this._exaggeration}raycast(o,f,b){if(!this._visibleDemTiles)return null;const T=this._visibleDemTiles.filter(M=>M.dem).map(M=>{const F=M.tileID,j=Math.pow(2,F.overscaledZ),{x:q,y:Y}=F.canonical,J=q/j,te=(q+1)/j,ae=Y/j,ue=(Y+1)/j;return{minx:J,miny:ae,maxx:te,maxy:ue,t:M.dem.tree.raycastRoot(J,ae,te,ue,o,f,b),tile:M}});T.sort((M,F)=>(M.t!==null?M.t:Number.MAX_VALUE)-(F.t!==null?F.t:Number.MAX_VALUE));for(const M of T){if(M.t==null)return null;const F=M.tile.dem.tree.raycast(M.minx,M.miny,M.maxx,M.maxy,o,f,b);if(F!=null)return F}return null}_createFBO(){const o=this.painter.context,f=o.gl,b=this.drapeBufferSize;o.activeTexture.set(f.TEXTURE0);const T=new r.Texture(o,{width:b[0],height:b[1],data:null},f.RGBA);T.bind(f.LINEAR,f.CLAMP_TO_EDGE);const M=o.createFramebuffer(b[0],b[1],!1);return M.colorAttachment.set(T.texture),M.depthAttachment=new ee(o,M.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=o.createRenderbuffer(o.gl.DEPTH_STENCIL,b[0],b[1]),this._stencilRef=0,M.depthAttachment.set(this._sharedDepthStencil),o.clear({stencil:0})):M.depthAttachment.set(this._sharedDepthStencil),o.extTextureFilterAnisotropic&&!o.extTextureFilterAnisotropicForceOff&&f.texParameterf(f.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax),{fb:M,tex:T,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const o in this._style._sourceCaches)if(this._style._sourceCaches[o].hasTransition())return!0;return this._style.order.some(o=>{const f=this._style._layers[o],b=f.isHidden(this.painter.transform.zoom),T=f.getCrossfadeParameters(),M=!!T&&T.t!==1,F=f.hasTransition();return f.type!=="custom"&&!b&&(M||F)})}_clearRasterFadeFromRenderCache(){let o=!1;for(const f in this._style._sourceCaches)if(this._style._sourceCaches[f]._source instanceof ke){o=!0;break}if(o)for(let f=0;f<this._style.order.length;++f){const b=this._style._layers[this._style.order[f]],T=b.isHidden(this.painter.transform.zoom),M=this._style._getLayerSourceCache(b);if(b.type!=="raster"||T||!M)continue;const F=b.paint.get("raster-fade-duration");for(const j of this.proxyCoords){const q=this.proxyToSource[j.key][M.id];if(q)for(const Y of q){const J=tl(M.getTile(Y),M.findLoadedParent(Y,0),M,this.painter.transform,F);(J.opacity!==1||J.mix!==0)&&this._clearRenderCacheForTile(M.id,Y)}}}}_setupDrapedRenderBatches(){const o=this._style.order,f=o.length;if(f===0)return;const b=[];let T,M=0,F=this._style._layers[o[M]];for(;!this._style.isLayerDraped(F)&&F.isHidden(this.painter.transform.zoom)&&++M<f;)F=this._style._layers[o[M]];for(;M<f;++M){const j=this._style._layers[o[M]];j.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(j)?T===void 0&&(T=M):T!==void 0&&(b.push({start:T,end:M-1}),T=void 0))}T!==void 0&&b.push({start:T,end:M-1}),this._drapedRenderBatches=b}_setupRenderCache(o){const f=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,f.renderCache.length>f.renderCachePool.length){const F=Object.values(f.proxyCachedFBO);f.proxyCachedFBO={};for(let j=0;j<F.length;++j){const q=Object.values(F[j]);f.renderCachePool.push(...q)}}return}this._clearRasterFadeFromRenderCache();const b=this.proxyCoords,T=this._tilesDirty;for(let F=b.length-1;F>=0;F--){const j=b[F];if(f.getTileByID(j.key),f.proxyCachedFBO[j.key]!==void 0){const q=o[j.key],Y=this.proxyToSource[j.key];let J=0;for(const te in Y){const ae=Y[te],ue=q[te];if(!ue||ue.length!==ae.length||ae.some((pe,le)=>pe!==ue[le]||T[te]&&T[te].hasOwnProperty(pe.key))){J=-1;break}++J}for(const te in f.proxyCachedFBO[j.key])f.renderCache[f.proxyCachedFBO[j.key][te]].dirty=J<0||J!==Object.values(q).length}}const M=[...this._drapedRenderBatches];M.sort((F,j)=>j.end-j.start-(F.end-F.start));for(const F of M)for(const j of b){if(f.proxyCachedFBO[j.key])continue;let q=f.renderCachePool.pop();q===void 0&&f.renderCache.length<50&&(q=f.renderCache.length,f.renderCache.push(this._createFBO())),q!==void 0&&(f.proxyCachedFBO[j.key]={},f.proxyCachedFBO[j.key][F.start]=q,f.renderCache[q].dirty=!0)}this._tilesDirty={}}_setupStencil(o,f,b,T){if(!T||!this._sourceTilesOverlap[T.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const M=this.painter.context,F=M.gl;if(f.length<=1)return void(this._overlapStencilType=!1);let j;if(b.isTileClipped())j=f.length,this._overlapStencilMode.test={func:F.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(f[0].overscaledZ>f[f.length-1].overscaledZ))return void(this._overlapStencilType=!1);j=1,this._overlapStencilMode.test={func:F.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+j>255&&(M.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=j,this._overlapStencilMode.ref=this._stencilRef,b.isTileClipped()&&this._renderTileClippingMasks(f,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(o){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[o.key]),this._overlapStencilMode):r.StencilMode.disabled}_renderTileClippingMasks(o,f){const b=this.painter,T=this.painter.context,M=T.gl;b._tileClippingMaskIDs={},T.setColorMode(r.ColorMode.disabled),T.setDepthMode(r.DepthMode.disabled);const F=b.useProgram("clippingMask");for(const j of o){const q=b._tileClippingMaskIDs[j.key]=--f;F.draw(T,M.TRIANGLES,r.DepthMode.disabled,new r.StencilMode({func:M.ALWAYS,mask:0},q,255,M.KEEP,M.KEEP,M.REPLACE),r.ColorMode.disabled,r.CullFaceMode.disabled,Cs(j.projMatrix),"$clipping",b.tileExtentBuffer,b.quadTriangleIndexBuffer,b.tileExtentSegments)}}pointCoordinate(o){const f=this.painter.transform;if(o.x<0||o.x>f.width||o.y<0||o.y>f.height)return null;const b=[o.x,o.y,1,1];r.transformMat4$1(b,b,f.pixelMatrixInverse),r.scale$1(b,b,1/b[3]),b[0]/=f.worldSize,b[1]/=f.worldSize;const T=f._camera.position,M=r.mercatorZfromAltitude(1,f.center.lat),F=[T[0],T[1],T[2]/M,0],j=r.subtract([],b.slice(0,3),F);r.normalize(j,j);const q=this.raycast(F,j,this._exaggeration);return q!==null&&q?(r.scaleAndAdd(F,F,j,q),F[3]=F[2],F[2]*=M,F):null}drawDepth(){const o=this.painter,f=o.context,b=this.proxySourceCache,T=Math.ceil(o.width),M=Math.ceil(o.height);if(!this._depthFBO||this._depthFBO.width===T&&this._depthFBO.height===M||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const F=f.gl,j=f.createFramebuffer(T,M,!0);f.activeTexture.set(F.TEXTURE0);const q=new r.Texture(f,{width:T,height:M,data:null},F.RGBA);q.bind(F.NEAREST,F.CLAMP_TO_EDGE),j.colorAttachment.set(q.texture);const Y=f.createRenderbuffer(f.gl.DEPTH_COMPONENT16,T,M);j.depthAttachment.set(Y),this._depthFBO=j,this._depthTexture=q}f.bindFramebuffer.set(this._depthFBO.framebuffer),f.viewport.set([0,0,T,M]),function(F,j,q,Y){if(F.transform.projection.name==="globe")return;const J=F.context,te=J.gl;J.clear({depth:1});const ae=F.useProgram("terrainDepth"),ue=new r.DepthMode(te.LESS,r.DepthMode.ReadWrite,F.depthRangeFor3D);for(const pe of Y){const le=q.getTile(pe),Se=sa(pe.projMatrix,0);j.setupElevationDraw(le,ae),ae.draw(J,te.TRIANGLES,ue,r.StencilMode.disabled,r.ColorMode.unblended,r.CullFaceMode.backCCW,Se,"terrain_depth",j.gridBuffer,j.gridIndexBuffer,j.gridNoSkirtSegments)}}(o,this,b,this.proxyCoords)}_setupProxiedCoordsForOrtho(o,f,b){if(o.getSource()instanceof We)return this._setupProxiedCoordsForImageSource(o,f,b);this._findCoveringTileCache[o.id]=this._findCoveringTileCache[o.id]||{};const T=this.proxiedCoords[o.id]=[],M=this.proxyCoords;for(let j=0;j<M.length;j++){const q=M[j],Y=this._findTileCoveringTileID(q,o);if(Y){const J=this._createProxiedId(q,Y,b[q.key]&&b[q.key][o.id]);T.push(J),this.proxyToSource[q.key][o.id]=[J]}}let F=!1;for(let j=0;j<f.length;j++){const q=o.getTile(f[j]);if(!q||!q.hasData())continue;const Y=this._findTileCoveringTileID(q.tileID,this.proxySourceCache);if(Y&&Y.tileID.canonical.z!==q.tileID.canonical.z){const J=this.proxyToSource[Y.tileID.key][o.id],te=this._createProxiedId(Y.tileID,q,b[Y.tileID.key]&&b[Y.tileID.key][o.id]);J?J.splice(J.length-1,0,te):this.proxyToSource[Y.tileID.key][o.id]=[te],T.push(te),F=!0}}this._sourceTilesOverlap[o.id]=F}_setupProxiedCoordsForImageSource(o,f,b){if(!o.getSource().loaded())return;const T=this.proxiedCoords[o.id]=[],M=this.proxyCoords,F=o.getSource(),j=new r.pointGeometry(F.tileID.x,F.tileID.y)._div(1<<F.tileID.z),q=F.coordinates.map(r.MercatorCoordinate.fromLngLat).reduce((J,te)=>(J.min.x=Math.min(J.min.x,te.x-j.x),J.min.y=Math.min(J.min.y,te.y-j.y),J.max.x=Math.max(J.max.x,te.x-j.x),J.max.y=Math.max(J.max.y,te.y-j.y),J),{min:new r.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new r.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),Y=(J,te)=>{const ae=J.wrap+J.canonical.x/(1<<J.canonical.z),ue=J.canonical.y/(1<<J.canonical.z),pe=r.EXTENT/(1<<J.canonical.z),le=te.wrap+te.canonical.x/(1<<te.canonical.z),Se=te.canonical.y/(1<<te.canonical.z);return ae+pe<le+q.min.x||ae>le+q.max.x||ue+pe<Se+q.min.y||ue>Se+q.max.y};for(let J=0;J<M.length;J++){const te=M[J];for(let ae=0;ae<f.length;ae++){const ue=o.getTile(f[ae]);if(!ue||!ue.hasData()||Y(te,ue.tileID))continue;const pe=this._createProxiedId(te,ue,b[te.key]&&b[te.key][o.id]),le=this.proxyToSource[te.key][o.id];le?le.push(pe):this.proxyToSource[te.key][o.id]=[pe],T.push(pe)}}}_createProxiedId(o,f,b){let T=this.orthoMatrix;if(b){const M=b.find(F=>F.key===f.tileID.key);if(M)return M}if(f.tileID.key!==o.key){const M=o.canonical.z-f.tileID.canonical.z;let F,j,q;T=r.create();const Y=f.tileID.wrap-o.wrap<<o.overscaledZ;M>0?(F=r.EXTENT>>M,j=F*((f.tileID.canonical.x<<M)-o.canonical.x+Y),q=F*((f.tileID.canonical.y<<M)-o.canonical.y)):(F=r.EXTENT<<-M,j=r.EXTENT*(f.tileID.canonical.x-(o.canonical.x+Y<<-M)),q=r.EXTENT*(f.tileID.canonical.y-(o.canonical.y<<-M))),r.ortho(T,0,F,0,F,0,1),r.translate(T,T,[j,q,0])}return new aa(f.tileID,o.key,T)}_findTileCoveringTileID(o,f){let b=f.getTile(o);if(b&&b.hasData())return b;const T=this._findCoveringTileCache[f.id],M=T[o.key];if(b=M?f.getTileByID(M):null,b&&b.hasData()||M===null)return b;let F=b?b.tileID:o,j=F.overscaledZ;const q=f.getSource().minzoom,Y=[];if(!M){const te=f.getSource().maxzoom;if(o.canonical.z>=te){const ae=o.canonical.z-te;f.getSource().reparseOverscaled?(j=Math.max(o.canonical.z+2,f.transform.tileZoom),F=new r.OverscaledTileID(j,o.wrap,te,o.canonical.x>>ae,o.canonical.y>>ae)):ae!==0&&(j=te,F=new r.OverscaledTileID(j,o.wrap,te,o.canonical.x>>ae,o.canonical.y>>ae))}F.key!==o.key&&(Y.push(F.key),b=f.getTile(F))}const J=te=>{Y.forEach(ae=>{T[ae]=te}),Y.length=0};for(j-=1;j>=q&&(!b||!b.hasData());j--){b&&J(b.tileID.key);const te=F.calculateScaledKey(j);if(b=f.getTileByID(te),b&&b.hasData())break;const ae=T[te];if(ae===null)break;ae===void 0?Y.push(te):b=f.getTileByID(ae)}return J(b?b.tileID.key:null),b&&b.hasData()?b:null}findDEMTileFor(o){return this.enabled?this._findTileCoveringTileID(o,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(o,f){let b=this._tilesDirty[o];b||(b=this._tilesDirty[o]={}),b[f.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const o=function(f){let b=0;const T=new r.StructArrayLayout2ui4,M=131;for(let F=1;F<129;F++){for(let j=1;j<129;j++)b=F*M+j,T.emplaceBack(b,b+1),T.emplaceBack(b,b+M),T.emplaceBack(b+1,b+M),F===128&&T.emplaceBack(b+M,b+M+1);T.emplaceBack(b+1,b+1+M)}return T}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(o),this.wireframeSegments=r.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,o.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}function la(_){const o=[];for(let f=0;f<_.length;f++){if(_[f]===null)continue;const b=_[f].split(" ");o.push(b.pop())}return o}class ca{static cacheKey(o,f,b){let T=`${o}${b?b.cacheKey:""}`;for(const M of f)T+=`/${M}`;return T}constructor(o,f,b,T,M,F){const j=o.gl;this.program=j.createProgram();const q=la(b.staticAttributes),Y=T?T.getBinderAttributes():[],J=q.concat(Y),te=b.staticUniforms?la(b.staticUniforms):[],ae=T?T.getBinderUniforms():[],ue=te.concat(ae),pe=[];for(const Ee of ue)pe.indexOf(Ee)<0&&pe.push(Ee);let le=T?T.defines():[];le=le.concat(F.map(Ee=>`#define ${Ee}`));const Se=le.concat(o.extStandardDerivatives?`#extension GL_OES_standard_derivatives : enable
`.concat(Ko):Ko,Ko,Ho,ta.fragmentSource,eo.fragmentSource,b.fragmentSource).join(`
`),ce=le.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,Ho,ta.vertexSource,eo.vertexSource,xs.vertexSource,b.vertexSource).join(`
`),ge=j.createShader(j.FRAGMENT_SHADER);if(j.isContextLost())return void(this.failedToCreate=!0);j.shaderSource(ge,Se),j.compileShader(ge),j.attachShader(this.program,ge);const _e=j.createShader(j.VERTEX_SHADER);if(j.isContextLost())return void(this.failedToCreate=!0);j.shaderSource(_e,ce),j.compileShader(_e),j.attachShader(this.program,_e),this.attributes={};const $e={};this.numAttributes=J.length;for(let Ee=0;Ee<this.numAttributes;Ee++)J[Ee]&&(j.bindAttribLocation(this.program,Ee,J[Ee]),this.attributes[J[Ee]]=Ee);j.linkProgram(this.program),j.deleteShader(_e),j.deleteShader(ge);for(let Ee=0;Ee<pe.length;Ee++){const Ae=pe[Ee];if(Ae&&!$e[Ae]){const De=j.getUniformLocation(this.program,Ae);De&&($e[Ae]=De)}}this.fixedUniforms=M(o,$e),this.binderUniforms=T?T.getUniforms(o,$e):[],F.indexOf("TERRAIN")!==-1&&(this.terrainUniforms=((Ee,Ae)=>({u_dem:new r.Uniform1i(Ee,Ae.u_dem),u_dem_prev:new r.Uniform1i(Ee,Ae.u_dem_prev),u_dem_unpack:new r.Uniform4f(Ee,Ae.u_dem_unpack),u_dem_tl:new r.Uniform2f(Ee,Ae.u_dem_tl),u_dem_scale:new r.Uniform1f(Ee,Ae.u_dem_scale),u_dem_tl_prev:new r.Uniform2f(Ee,Ae.u_dem_tl_prev),u_dem_scale_prev:new r.Uniform1f(Ee,Ae.u_dem_scale_prev),u_dem_size:new r.Uniform1f(Ee,Ae.u_dem_size),u_dem_lerp:new r.Uniform1f(Ee,Ae.u_dem_lerp),u_exaggeration:new r.Uniform1f(Ee,Ae.u_exaggeration),u_depth:new r.Uniform1i(Ee,Ae.u_depth),u_depth_size_inv:new r.Uniform2f(Ee,Ae.u_depth_size_inv),u_meter_to_dem:new r.Uniform1f(Ee,Ae.u_meter_to_dem),u_label_plane_matrix_inv:new r.UniformMatrix4f(Ee,Ae.u_label_plane_matrix_inv),u_tile_tl_up:new r.Uniform3f(Ee,Ae.u_tile_tl_up),u_tile_tr_up:new r.Uniform3f(Ee,Ae.u_tile_tr_up),u_tile_br_up:new r.Uniform3f(Ee,Ae.u_tile_br_up),u_tile_bl_up:new r.Uniform3f(Ee,Ae.u_tile_bl_up),u_tile_up_scale:new r.Uniform1f(Ee,Ae.u_tile_up_scale)}))(o,$e)),F.indexOf("FOG")!==-1&&(this.fogUniforms=((Ee,Ae)=>({u_fog_matrix:new r.UniformMatrix4f(Ee,Ae.u_fog_matrix),u_fog_range:new r.Uniform2f(Ee,Ae.u_fog_range),u_fog_color:new r.Uniform4f(Ee,Ae.u_fog_color),u_fog_horizon_blend:new r.Uniform1f(Ee,Ae.u_fog_horizon_blend),u_fog_temporal_offset:new r.Uniform1f(Ee,Ae.u_fog_temporal_offset),u_frustum_tl:new r.Uniform3f(Ee,Ae.u_frustum_tl),u_frustum_tr:new r.Uniform3f(Ee,Ae.u_frustum_tr),u_frustum_br:new r.Uniform3f(Ee,Ae.u_frustum_br),u_frustum_bl:new r.Uniform3f(Ee,Ae.u_frustum_bl),u_globe_pos:new r.Uniform3f(Ee,Ae.u_globe_pos),u_globe_radius:new r.Uniform1f(Ee,Ae.u_globe_radius),u_globe_transition:new r.Uniform1f(Ee,Ae.u_globe_transition),u_is_globe:new r.Uniform1i(Ee,Ae.u_is_globe),u_viewport:new r.Uniform2f(Ee,Ae.u_viewport)}))(o,$e))}setTerrainUniformValues(o,f){if(!this.terrainUniforms)return;const b=this.terrainUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const T in f)b[T].set(f[T])}}setFogUniformValues(o,f){if(!this.fogUniforms)return;const b=this.fogUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const T in f)b[T].location&&b[T].set(f[T])}}draw(o,f,b,T,M,F,j,q,Y,J,te,ae,ue,pe,le,Se,ce){const ge=o.gl;if(this.failedToCreate)return;o.program.set(this.program),o.setDepthMode(b),o.setStencilMode(T),o.setColorMode(M),o.setCullFace(F);for(const $e of Object.keys(this.fixedUniforms))this.fixedUniforms[$e].set(j[$e]);pe&&pe.setUniforms(o,this.binderUniforms,ae,{zoom:ue});const _e={[ge.LINES]:2,[ge.TRIANGLES]:3,[ge.LINE_STRIP]:1}[f];for(const $e of te.get()){const Ee=$e.vaos||($e.vaos={});(Ee[q]||(Ee[q]=new sc)).bind(o,this,Y,pe?pe.getPaintVertexBuffers():[],J,$e.vertexOffset,le,Se,ce),ge.drawElements(f,$e.primitiveLength*_e,ge.UNSIGNED_SHORT,$e.primitiveOffset*_e*2)}}}function il(_,o,f){const b=1/An(f,1,o.transform.tileZoom),T=Math.pow(2,f.tileID.overscaledZ),M=f.tileSize*Math.pow(2,o.transform.tileZoom)/T,F=M*(f.tileID.canonical.x+f.tileID.wrap*T),j=M*f.tileID.canonical.y;return{u_image:0,u_texsize:f.imageAtlasTexture.size,u_scale:[b,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[F>>16,j>>16],u_pixel_coord_lower:[65535&F,65535&j]}}const cc=r.create(),uc=(_,o,f,b,T,M,F,j,q)=>{const Y=o.style.light,J=Y.properties.get("position"),te=[J.x,J.y,J.z],ae=r.create$1();Y.properties.get("anchor")==="viewport"&&(r.fromRotation(ae,-o.transform.angle),r.transformMat3(te,te,ae));const ue=Y.properties.get("color"),pe=o.transform,le={u_matrix:_,u_lightpos:te,u_lightintensity:Y.properties.get("intensity"),u_lightcolor:[ue.r,ue.g,ue.b],u_vertical_gradient:+f,u_opacity:b,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:cc,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0};return pe.projection.name==="globe"&&(le.u_tile_id=[T.canonical.x,T.canonical.y,1<<T.canonical.z],le.u_zoom_transition=F,le.u_inv_rot_matrix=q,le.u_merc_center=j,le.u_up_dir=pe.projection.upVector(new r.CanonicalTileID(0,0,0),j[0]*r.EXTENT,j[1]*r.EXTENT),le.u_height_lift=M),le},Ss=(_,o,f,b,T,M,F,j,q,Y,J)=>{const te=uc(_,o,f,b,T,j,q,Y,J),ae={u_height_factor:-Math.pow(2,T.overscaledZ)/F.tileSize/8};return r.extend(te,il(M,o,F),ae)},Wo=_=>({u_matrix:_}),rl=(_,o,f,b)=>r.extend(Wo(_),il(f,o,b)),ua=(_,o)=>({u_matrix:_,u_world:o}),ol=(_,o,f,b,T)=>r.extend(rl(_,o,f,b),{u_world:T}),Fr=r.create(),sl=(_,o,f,b,T,M)=>{const F=_.transform,j=F.projection.name==="globe";let q;if(M.paint.get("circle-pitch-alignment")==="map")if(j){const J=r.globePixelsToTileUnits(F.zoom,o.canonical)*F._projectionScaler;q=Float32Array.from([J,0,0,J])}else q=F.calculatePixelsToTileUnitsMatrix(f);else q=new Float32Array([F.pixelsToGLUnits[0],0,0,F.pixelsToGLUnits[1]]);const Y={u_camera_to_center_distance:F.cameraToCenterDistance,u_matrix:_.translatePosMatrix(o.projMatrix,f,M.paint.get("circle-translate"),M.paint.get("circle-translate-anchor")),u_device_pixel_ratio:r.exported.devicePixelRatio,u_extrude_scale:q,u_inv_rot_matrix:Fr,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(j){Y.u_inv_rot_matrix=b,Y.u_merc_center=T,Y.u_tile_id=[o.canonical.x,o.canonical.y,1<<o.canonical.z],Y.u_zoom_transition=r.globeToMercatorTransition(F.zoom);const J=T[0]*r.EXTENT,te=T[1]*r.EXTENT;Y.u_up_dir=F.projection.upVector(new r.CanonicalTileID(0,0,0),J,te)}return Y},dc=_=>{const o=[];return _.paint.get("circle-pitch-alignment")==="map"&&o.push("PITCH_WITH_MAP"),_.paint.get("circle-pitch-scale")==="map"&&o.push("SCALE_WITH_MAP"),o},al=(_,o,f,b)=>{const T=r.EXTENT/f.tileSize;return{u_matrix:_,u_camera_to_center_distance:o.getCameraToCenterDistance(b),u_extrude_scale:[o.pixelsToGLUnits[0]/T,o.pixelsToGLUnits[1]/T]}},ll=(_,o,f=1)=>({u_matrix:_,u_color:o,u_overlay:0,u_overlay_scale:f}),cl=r.create(),Ou=(_,o,f,b,T,M,F)=>{const j=_.transform,q=j.projection.name==="globe",Y=q?r.globePixelsToTileUnits(j.zoom,o.canonical)*j._projectionScaler:An(f,1,M),J={u_matrix:o.projMatrix,u_extrude_scale:Y,u_intensity:F,u_inv_rot_matrix:cl,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(q){J.u_inv_rot_matrix=b,J.u_merc_center=T,J.u_tile_id=[o.canonical.x,o.canonical.y,1<<o.canonical.z],J.u_zoom_transition=r.globeToMercatorTransition(j.zoom);const te=T[0]*r.EXTENT,ae=T[1]*r.EXTENT;J.u_up_dir=j.projection.upVector(new r.CanonicalTileID(0,0,0),te,ae)}return J},ul=(_,o,f,b,T,M,F,j)=>{const q=_.transform,Y=q.calculatePixelsToTileUnitsMatrix(o),J={u_matrix:pc(_,o,f,T),u_pixels_to_tile_units:Y,u_device_pixel_ratio:F,u_units_to_pixels:[1/q.pixelsToGLUnits[0],1/q.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:M,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0,u_alpha_discard_threshold:0,u_trim_offset:j};if(da(f)){const te=Ts(o,_.transform);J.u_texsize=o.lineAtlasTexture.size,J.u_scale=[te,b.fromScale,b.toScale],J.u_mix=b.t}return J},Pu=(_,o,f,b,T,M)=>{const F=_.transform,j=Ts(o,F);return{u_matrix:pc(_,o,f,T),u_texsize:o.imageAtlasTexture.size,u_pixels_to_tile_units:F.calculatePixelsToTileUnitsMatrix(o),u_device_pixel_ratio:M,u_image:0,u_scale:[j,b.fromScale,b.toScale],u_fade:b.t,u_units_to_pixels:[1/F.pixelsToGLUnits[0],1/F.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Ts(_,o){return 1/An(_,1,o.tileZoom)}function pc(_,o,f,b){return _.translatePosMatrix(b||o.tileID.projMatrix,o,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}function da(_){const o=_.paint.get("line-dasharray").value;return o.value||o.kind!=="constant"}const Du=(_,o,f,b,T,M)=>{return{u_matrix:_,u_tl_parent:o,u_scale_parent:f,u_fade_t:b.mix,u_opacity:b.opacity*T.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:T.paint.get("raster-brightness-min"),u_brightness_high:T.paint.get("raster-brightness-max"),u_saturation_factor:(j=T.paint.get("raster-saturation"),j>0?1-1/(1.001-j):-j),u_contrast_factor:(F=T.paint.get("raster-contrast"),F>0?1/(1-F):1+F),u_spin_weights:dl(T.paint.get("raster-hue-rotate")),u_perspective_transform:M};var F,j};function dl(_){_*=Math.PI/180;const o=Math.sin(_),f=Math.cos(_);return[(2*f+1)/3,(-Math.sqrt(3)*o-f+1)/3,(Math.sqrt(3)*o-f+1)/3]}const fc=r.create(),As=(_,o,f,b,T,M,F,j,q,Y,J,te,ae,ue,pe,le)=>{const Se=T.transform,ce={u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:Se.cameraToCenterDistance,u_rotate_symbol:+f,u_aspect_ratio:Se.width/Se.height,u_fade_change:T.options.fadeDuration?T.symbolFadeChange:1,u_matrix:M,u_label_plane_matrix:F,u_coord_matrix:j,u_is_text:+q,u_pitch_with_map:+b,u_texsize:Y,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:fc,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:fc,u_up_vector:[0,-1,0]};return le.name==="globe"&&(ce.u_tile_id=[J.canonical.x,J.canonical.y,1<<J.canonical.z],ce.u_zoom_transition=te,ce.u_inv_rot_matrix=ue,ce.u_merc_center=ae,ce.u_camera_forward=Se._camera.forward(),ce.u_ecef_origin=r.globeECEFOrigin(Se.globeMatrix,J.toUnwrapped()),ce.u_tile_matrix=Float32Array.from(Se.globeMatrix),ce.u_up_vector=pe),ce},hc=(_,o,f,b,T,M,F,j,q,Y,J,te,ae,ue,pe,le,Se)=>r.extend(As(_,o,f,b,T,M,F,j,q,Y,te,ae,ue,pe,le,Se),{u_gamma_scale:b?T.transform.cameraToCenterDistance*Math.cos(T.terrain?0:T.transform._pitch):1,u_device_pixel_ratio:r.exported.devicePixelRatio,u_is_halo:+J}),mc=(_,o,f,b,T,M,F,j,q,Y,J,te,ae,ue,pe,le)=>r.extend(hc(_,o,f,b,T,M,F,j,!0,q,!0,J,te,ae,ue,pe,le),{u_texsize_icon:Y,u_texture_icon:1}),gc=(_,o,f)=>({u_matrix:_,u_opacity:o,u_color:f}),Zo=(_,o,f,b,T,M)=>r.extend(function(F,j,q,Y){const J=q.imageManager.getPattern(F.from.toString()),te=q.imageManager.getPattern(F.to.toString()),{width:ae,height:ue}=q.imageManager.getPixelSize(),pe=Math.pow(2,Y.tileID.overscaledZ),le=Y.tileSize*Math.pow(2,q.transform.tileZoom)/pe,Se=le*(Y.tileID.canonical.x+Y.tileID.wrap*pe),ce=le*Y.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:J.tl,u_pattern_br_a:J.br,u_pattern_tl_b:te.tl,u_pattern_br_b:te.br,u_texsize:[ae,ue],u_mix:j.t,u_pattern_size_a:J.displaySize,u_pattern_size_b:te.displaySize,u_scale_a:j.fromScale,u_scale_b:j.toScale,u_tile_units_to_pixels:1/An(Y,1,q.transform.tileZoom),u_pixel_coord_upper:[Se>>16,ce>>16],u_pixel_coord_lower:[65535&Se,65535&ce]}}(b,M,f,T),{u_matrix:_,u_opacity:o}),Bu={fillExtrusion:(_,o)=>({u_matrix:new r.UniformMatrix4f(_,o.u_matrix),u_lightpos:new r.Uniform3f(_,o.u_lightpos),u_lightintensity:new r.Uniform1f(_,o.u_lightintensity),u_lightcolor:new r.Uniform3f(_,o.u_lightcolor),u_vertical_gradient:new r.Uniform1f(_,o.u_vertical_gradient),u_opacity:new r.Uniform1f(_,o.u_opacity),u_tile_id:new r.Uniform3f(_,o.u_tile_id),u_zoom_transition:new r.Uniform1f(_,o.u_zoom_transition),u_inv_rot_matrix:new r.UniformMatrix4f(_,o.u_inv_rot_matrix),u_merc_center:new r.Uniform2f(_,o.u_merc_center),u_up_dir:new r.Uniform3f(_,o.u_up_dir),u_height_lift:new r.Uniform1f(_,o.u_height_lift)}),fillExtrusionPattern:(_,o)=>({u_matrix:new r.UniformMatrix4f(_,o.u_matrix),u_lightpos:new r.Uniform3f(_,o.u_lightpos),u_lightintensity:new r.Uniform1f(_,o.u_lightintensity),u_lightcolor:new r.Uniform3f(_,o.u_lightcolor),u_vertical_gradient:new r.Uniform1f(_,o.u_vertical_gradient),u_height_factor:new r.Uniform1f(_,o.u_height_factor),u_tile_id:new r.Uniform3f(_,o.u_tile_id),u_zoom_transition:new r.Uniform1f(_,o.u_zoom_transition),u_inv_rot_matrix:new r.UniformMatrix4f(_,o.u_inv_rot_matrix),u_merc_center:new r.Uniform2f(_,o.u_merc_center),u_up_dir:new r.Uniform3f(_,o.u_up_dir),u_height_lift:new r.Uniform1f(_,o.u_height_lift),u_image:new r.Uniform1i(_,o.u_image),u_texsize:new r.Uniform2f(_,o.u_texsize),u_pixel_coord_upper:new r.Uniform2f(_,o.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(_,o.u_pixel_coord_lower),u_scale:new r.Uniform3f(_,o.u_scale),u_fade:new r.Uniform1f(_,o.u_fade),u_opacity:new r.Uniform1f(_,o.u_opacity)}),fill:(_,o)=>({u_matrix:new r.UniformMatrix4f(_,o.u_matrix)}),fillPattern:(_,o)=>({u_matrix:new r.UniformMatrix4f(_,o.u_matrix),u_image:new r.Uniform1i(_,o.u_image),u_texsize:new r.Uniform2f(_,o.u_texsize),u_pixel_coord_upper:new r.Uniform2f(_,o.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(_,o.u_pixel_coord_lower),u_scale:new r.Uniform3f(_,o.u_scale),u_fade:new r.Uniform1f(_,o.u_fade)}),fillOutline:(_,o)=>({u_matrix:new r.UniformMatrix4f(_,o.u_matrix),u_world:new r.Uniform2f(_,o.u_world)}),fillOutlinePattern:(_,o)=>({u_matrix:new r.UniformMatrix4f(_,o.u_matrix),u_world:new r.Uniform2f(_,o.u_world),u_image:new r.Uniform1i(_,o.u_image),u_texsize:new r.Uniform2f(_,o.u_texsize),u_pixel_coord_upper:new r.Uniform2f(_,o.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(_,o.u_pixel_coord_lower),u_scale:new r.Uniform3f(_,o.u_scale),u_fade:new r.Uniform1f(_,o.u_fade)}),circle:(_,o)=>({u_camera_to_center_distance:new r.Uniform1f(_,o.u_camera_to_center_distance),u_extrude_scale:new r.UniformMatrix2f(_,o.u_extrude_scale),u_device_pixel_ratio:new r.Uniform1f(_,o.u_device_pixel_ratio),u_matrix:new r.UniformMatrix4f(_,o.u_matrix),u_inv_rot_matrix:new r.UniformMatrix4f(_,o.u_inv_rot_matrix),u_merc_center:new r.Uniform2f(_,o.u_merc_center),u_tile_id:new r.Uniform3f(_,o.u_tile_id),u_zoom_transition:new r.Uniform1f(_,o.u_zoom_transition),u_up_dir:new r.Uniform3f(_,o.u_up_dir)}),collisionBox:(_,o)=>({u_matrix:new r.UniformMatrix4f(_,o.u_matrix),u_camera_to_center_distance:new r.Uniform1f(_,o.u_camera_to_center_distance),u_extrude_scale:new r.Uniform2f(_,o.u_extrude_scale)}),collisionCircle:(_,o)=>({u_matrix:new r.UniformMatrix4f(_,o.u_matrix),u_inv_matrix:new r.UniformMatrix4f(_,o.u_inv_matrix),u_camera_to_center_distance:new r.Uniform1f(_,o.u_camera_to_center_distance),u_viewport_size:new r.Uniform2f(_,o.u_viewport_size)}),debug:(_,o)=>({u_color:new r.UniformColor(_,o.u_color),u_matrix:new r.UniformMatrix4f(_,o.u_matrix),u_overlay:new r.Uniform1i(_,o.u_overlay),u_overlay_scale:new r.Uniform1f(_,o.u_overlay_scale)}),clippingMask:(_,o)=>({u_matrix:new r.UniformMatrix4f(_,o.u_matrix)}),heatmap:(_,o)=>({u_extrude_scale:new r.Uniform1f(_,o.u_extrude_scale),u_intensity:new r.Uniform1f(_,o.u_intensity),u_matrix:new r.UniformMatrix4f(_,o.u_matrix),u_inv_rot_matrix:new r.UniformMatrix4f(_,o.u_inv_rot_matrix),u_merc_center:new r.Uniform2f(_,o.u_merc_center),u_tile_id:new r.Uniform3f(_,o.u_tile_id),u_zoom_transition:new r.Uniform1f(_,o.u_zoom_transition),u_up_dir:new r.Uniform3f(_,o.u_up_dir)}),heatmapTexture:(_,o)=>({u_image:new r.Uniform1i(_,o.u_image),u_color_ramp:new r.Uniform1i(_,o.u_color_ramp),u_opacity:new r.Uniform1f(_,o.u_opacity)}),hillshade:(_,o)=>({u_matrix:new r.UniformMatrix4f(_,o.u_matrix),u_image:new r.Uniform1i(_,o.u_image),u_latrange:new r.Uniform2f(_,o.u_latrange),u_light:new r.Uniform2f(_,o.u_light),u_shadow:new r.UniformColor(_,o.u_shadow),u_highlight:new r.UniformColor(_,o.u_highlight),u_accent:new r.UniformColor(_,o.u_accent)}),hillshadePrepare:(_,o)=>({u_matrix:new r.UniformMatrix4f(_,o.u_matrix),u_image:new r.Uniform1i(_,o.u_image),u_dimension:new r.Uniform2f(_,o.u_dimension),u_zoom:new r.Uniform1f(_,o.u_zoom),u_unpack:new r.Uniform4f(_,o.u_unpack)}),line:(_,o)=>({u_matrix:new r.UniformMatrix4f(_,o.u_matrix),u_pixels_to_tile_units:new r.UniformMatrix2f(_,o.u_pixels_to_tile_units),u_device_pixel_ratio:new r.Uniform1f(_,o.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(_,o.u_units_to_pixels),u_dash_image:new r.Uniform1i(_,o.u_dash_image),u_gradient_image:new r.Uniform1i(_,o.u_gradient_image),u_image_height:new r.Uniform1f(_,o.u_image_height),u_texsize:new r.Uniform2f(_,o.u_texsize),u_scale:new r.Uniform3f(_,o.u_scale),u_mix:new r.Uniform1f(_,o.u_mix),u_alpha_discard_threshold:new r.Uniform1f(_,o.u_alpha_discard_threshold),u_trim_offset:new r.Uniform2f(_,o.u_trim_offset)}),linePattern:(_,o)=>({u_matrix:new r.UniformMatrix4f(_,o.u_matrix),u_texsize:new r.Uniform2f(_,o.u_texsize),u_pixels_to_tile_units:new r.UniformMatrix2f(_,o.u_pixels_to_tile_units),u_device_pixel_ratio:new r.Uniform1f(_,o.u_device_pixel_ratio),u_image:new r.Uniform1i(_,o.u_image),u_units_to_pixels:new r.Uniform2f(_,o.u_units_to_pixels),u_scale:new r.Uniform3f(_,o.u_scale),u_fade:new r.Uniform1f(_,o.u_fade),u_alpha_discard_threshold:new r.Uniform1f(_,o.u_alpha_discard_threshold)}),raster:(_,o)=>({u_matrix:new r.UniformMatrix4f(_,o.u_matrix),u_tl_parent:new r.Uniform2f(_,o.u_tl_parent),u_scale_parent:new r.Uniform1f(_,o.u_scale_parent),u_fade_t:new r.Uniform1f(_,o.u_fade_t),u_opacity:new r.Uniform1f(_,o.u_opacity),u_image0:new r.Uniform1i(_,o.u_image0),u_image1:new r.Uniform1i(_,o.u_image1),u_brightness_low:new r.Uniform1f(_,o.u_brightness_low),u_brightness_high:new r.Uniform1f(_,o.u_brightness_high),u_saturation_factor:new r.Uniform1f(_,o.u_saturation_factor),u_contrast_factor:new r.Uniform1f(_,o.u_contrast_factor),u_spin_weights:new r.Uniform3f(_,o.u_spin_weights),u_perspective_transform:new r.Uniform2f(_,o.u_perspective_transform)}),symbolIcon:(_,o)=>({u_is_size_zoom_constant:new r.Uniform1i(_,o.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(_,o.u_is_size_feature_constant),u_size_t:new r.Uniform1f(_,o.u_size_t),u_size:new r.Uniform1f(_,o.u_size),u_camera_to_center_distance:new r.Uniform1f(_,o.u_camera_to_center_distance),u_rotate_symbol:new r.Uniform1i(_,o.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(_,o.u_aspect_ratio),u_fade_change:new r.Uniform1f(_,o.u_fade_change),u_matrix:new r.UniformMatrix4f(_,o.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(_,o.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(_,o.u_coord_matrix),u_is_text:new r.Uniform1i(_,o.u_is_text),u_pitch_with_map:new r.Uniform1i(_,o.u_pitch_with_map),u_texsize:new r.Uniform2f(_,o.u_texsize),u_tile_id:new r.Uniform3f(_,o.u_tile_id),u_zoom_transition:new r.Uniform1f(_,o.u_zoom_transition),u_inv_rot_matrix:new r.UniformMatrix4f(_,o.u_inv_rot_matrix),u_merc_center:new r.Uniform2f(_,o.u_merc_center),u_camera_forward:new r.Uniform3f(_,o.u_camera_forward),u_tile_matrix:new r.UniformMatrix4f(_,o.u_tile_matrix),u_up_vector:new r.Uniform3f(_,o.u_up_vector),u_ecef_origin:new r.Uniform3f(_,o.u_ecef_origin),u_texture:new r.Uniform1i(_,o.u_texture)}),symbolSDF:(_,o)=>({u_is_size_zoom_constant:new r.Uniform1i(_,o.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(_,o.u_is_size_feature_constant),u_size_t:new r.Uniform1f(_,o.u_size_t),u_size:new r.Uniform1f(_,o.u_size),u_camera_to_center_distance:new r.Uniform1f(_,o.u_camera_to_center_distance),u_rotate_symbol:new r.Uniform1i(_,o.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(_,o.u_aspect_ratio),u_fade_change:new r.Uniform1f(_,o.u_fade_change),u_matrix:new r.UniformMatrix4f(_,o.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(_,o.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(_,o.u_coord_matrix),u_is_text:new r.Uniform1i(_,o.u_is_text),u_pitch_with_map:new r.Uniform1i(_,o.u_pitch_with_map),u_texsize:new r.Uniform2f(_,o.u_texsize),u_texture:new r.Uniform1i(_,o.u_texture),u_gamma_scale:new r.Uniform1f(_,o.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(_,o.u_device_pixel_ratio),u_tile_id:new r.Uniform3f(_,o.u_tile_id),u_zoom_transition:new r.Uniform1f(_,o.u_zoom_transition),u_inv_rot_matrix:new r.UniformMatrix4f(_,o.u_inv_rot_matrix),u_merc_center:new r.Uniform2f(_,o.u_merc_center),u_camera_forward:new r.Uniform3f(_,o.u_camera_forward),u_tile_matrix:new r.UniformMatrix4f(_,o.u_tile_matrix),u_up_vector:new r.Uniform3f(_,o.u_up_vector),u_ecef_origin:new r.Uniform3f(_,o.u_ecef_origin),u_is_halo:new r.Uniform1i(_,o.u_is_halo)}),symbolTextAndIcon:(_,o)=>({u_is_size_zoom_constant:new r.Uniform1i(_,o.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(_,o.u_is_size_feature_constant),u_size_t:new r.Uniform1f(_,o.u_size_t),u_size:new r.Uniform1f(_,o.u_size),u_camera_to_center_distance:new r.Uniform1f(_,o.u_camera_to_center_distance),u_rotate_symbol:new r.Uniform1i(_,o.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(_,o.u_aspect_ratio),u_fade_change:new r.Uniform1f(_,o.u_fade_change),u_matrix:new r.UniformMatrix4f(_,o.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(_,o.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(_,o.u_coord_matrix),u_is_text:new r.Uniform1i(_,o.u_is_text),u_pitch_with_map:new r.Uniform1i(_,o.u_pitch_with_map),u_texsize:new r.Uniform2f(_,o.u_texsize),u_texsize_icon:new r.Uniform2f(_,o.u_texsize_icon),u_texture:new r.Uniform1i(_,o.u_texture),u_texture_icon:new r.Uniform1i(_,o.u_texture_icon),u_gamma_scale:new r.Uniform1f(_,o.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(_,o.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(_,o.u_is_halo)}),background:(_,o)=>({u_matrix:new r.UniformMatrix4f(_,o.u_matrix),u_opacity:new r.Uniform1f(_,o.u_opacity),u_color:new r.UniformColor(_,o.u_color)}),backgroundPattern:(_,o)=>({u_matrix:new r.UniformMatrix4f(_,o.u_matrix),u_opacity:new r.Uniform1f(_,o.u_opacity),u_image:new r.Uniform1i(_,o.u_image),u_pattern_tl_a:new r.Uniform2f(_,o.u_pattern_tl_a),u_pattern_br_a:new r.Uniform2f(_,o.u_pattern_br_a),u_pattern_tl_b:new r.Uniform2f(_,o.u_pattern_tl_b),u_pattern_br_b:new r.Uniform2f(_,o.u_pattern_br_b),u_texsize:new r.Uniform2f(_,o.u_texsize),u_mix:new r.Uniform1f(_,o.u_mix),u_pattern_size_a:new r.Uniform2f(_,o.u_pattern_size_a),u_pattern_size_b:new r.Uniform2f(_,o.u_pattern_size_b),u_scale_a:new r.Uniform1f(_,o.u_scale_a),u_scale_b:new r.Uniform1f(_,o.u_scale_b),u_pixel_coord_upper:new r.Uniform2f(_,o.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(_,o.u_pixel_coord_lower),u_tile_units_to_pixels:new r.Uniform1f(_,o.u_tile_units_to_pixels)}),terrainRaster:oa,terrainDepth:oa,skybox:(_,o)=>({u_matrix:new r.UniformMatrix4f(_,o.u_matrix),u_sun_direction:new r.Uniform3f(_,o.u_sun_direction),u_cubemap:new r.Uniform1i(_,o.u_cubemap),u_opacity:new r.Uniform1f(_,o.u_opacity),u_temporal_offset:new r.Uniform1f(_,o.u_temporal_offset)}),skyboxGradient:(_,o)=>({u_matrix:new r.UniformMatrix4f(_,o.u_matrix),u_color_ramp:new r.Uniform1i(_,o.u_color_ramp),u_center_direction:new r.Uniform3f(_,o.u_center_direction),u_radius:new r.Uniform1f(_,o.u_radius),u_opacity:new r.Uniform1f(_,o.u_opacity),u_temporal_offset:new r.Uniform1f(_,o.u_temporal_offset)}),skyboxCapture:(_,o)=>({u_matrix_3f:new r.UniformMatrix3f(_,o.u_matrix_3f),u_sun_direction:new r.Uniform3f(_,o.u_sun_direction),u_sun_intensity:new r.Uniform1f(_,o.u_sun_intensity),u_color_tint_r:new r.Uniform4f(_,o.u_color_tint_r),u_color_tint_m:new r.Uniform4f(_,o.u_color_tint_m),u_luminance:new r.Uniform1f(_,o.u_luminance)}),globeRaster:(_,o)=>({u_proj_matrix:new r.UniformMatrix4f(_,o.u_proj_matrix),u_globe_matrix:new r.UniformMatrix4f(_,o.u_globe_matrix),u_normalize_matrix:new r.UniformMatrix4f(_,o.u_normalize_matrix),u_merc_matrix:new r.UniformMatrix4f(_,o.u_merc_matrix),u_zoom_transition:new r.Uniform1f(_,o.u_zoom_transition),u_merc_center:new r.Uniform2f(_,o.u_merc_center),u_image0:new r.Uniform1i(_,o.u_image0),u_grid_matrix:new r.UniformMatrix3f(_,o.u_grid_matrix),u_frustum_tl:new r.Uniform3f(_,o.u_frustum_tl),u_frustum_tr:new r.Uniform3f(_,o.u_frustum_tr),u_frustum_br:new r.Uniform3f(_,o.u_frustum_br),u_frustum_bl:new r.Uniform3f(_,o.u_frustum_bl),u_globe_pos:new r.Uniform3f(_,o.u_globe_pos),u_globe_radius:new r.Uniform1f(_,o.u_globe_radius),u_viewport:new r.Uniform2f(_,o.u_viewport)}),globeAtmosphere:(_,o)=>({u_frustum_tl:new r.Uniform3f(_,o.u_frustum_tl),u_frustum_tr:new r.Uniform3f(_,o.u_frustum_tr),u_frustum_br:new r.Uniform3f(_,o.u_frustum_br),u_frustum_bl:new r.Uniform3f(_,o.u_frustum_bl),u_horizon:new r.Uniform1f(_,o.u_horizon),u_transition:new r.Uniform1f(_,o.u_transition),u_fadeout_range:new r.Uniform1f(_,o.u_fadeout_range),u_color:new r.Uniform4f(_,o.u_color),u_high_color:new r.Uniform4f(_,o.u_high_color),u_space_color:new r.Uniform4f(_,o.u_space_color),u_star_intensity:new r.Uniform1f(_,o.u_star_intensity),u_star_density:new r.Uniform1f(_,o.u_star_density),u_star_size:new r.Uniform1f(_,o.u_star_size),u_temporal_offset:new r.Uniform1f(_,o.u_temporal_offset),u_horizon_angle:new r.Uniform1f(_,o.u_horizon_angle),u_rotation_matrix:new r.UniformMatrix4f(_,o.u_rotation_matrix)})};let pa;function _c(_,o,f,b,T,M,F){const j=_.context,q=j.gl,Y=_.transform,J=_.useProgram("collisionBox"),te=[];let ae=0,ue=0;for(let $e=0;$e<b.length;$e++){const Ee=b[$e],Ae=o.getTile(Ee),De=Ae.getBucket(f);if(!De)continue;const nt=Wn(Ee,De,Y);let at=nt;T[0]===0&&T[1]===0||(at=_.translatePosMatrix(nt,Ae,T,M));const it=F?De.textCollisionBox:De.iconCollisionBox,et=De.collisionCircleArray;if(et.length>0){const Re=r.create(),bt=at;r.mul(Re,De.placementInvProjMatrix,Y.glCoordMatrix),r.mul(Re,Re,De.placementViewportMatrix),te.push({circleArray:et,circleOffset:ue,transform:bt,invTransform:Re,projection:De.getProjection()}),ae+=et.length/4,ue=ae}it&&(_.terrain&&_.terrain.setupElevationDraw(Ae,J),J.draw(j,q.LINES,r.DepthMode.disabled,r.StencilMode.disabled,_.colorModeForRenderPass(),r.CullFaceMode.disabled,al(at,Y,Ae,De.getProjection()),f.id,it.layoutVertexBuffer,it.indexBuffer,it.segments,null,Y.zoom,null,it.collisionVertexBuffer,it.collisionVertexBufferExt))}if(!F||!te.length)return;const pe=_.useProgram("collisionCircle"),le=new r.StructArrayLayout2f1f2i16;le.resize(4*ae),le._trim();let Se=0;for(const $e of te)for(let Ee=0;Ee<$e.circleArray.length/4;Ee++){const Ae=4*Ee,De=$e.circleArray[Ae+0],nt=$e.circleArray[Ae+1],at=$e.circleArray[Ae+2],it=$e.circleArray[Ae+3];le.emplace(Se++,De,nt,at,it,0),le.emplace(Se++,De,nt,at,it,1),le.emplace(Se++,De,nt,at,it,2),le.emplace(Se++,De,nt,at,it,3)}(!pa||pa.length<2*ae)&&(pa=function($e){const Ee=2*$e,Ae=new r.StructArrayLayout3ui6;Ae.resize(Ee),Ae._trim();for(let De=0;De<Ee;De++){const nt=6*De;Ae.uint16[nt+0]=4*De+0,Ae.uint16[nt+1]=4*De+1,Ae.uint16[nt+2]=4*De+2,Ae.uint16[nt+3]=4*De+2,Ae.uint16[nt+4]=4*De+3,Ae.uint16[nt+5]=4*De+0}return Ae}(ae));const ce=j.createIndexBuffer(pa,!0),ge=j.createVertexBuffer(le,r.collisionCircleLayout.members,!0);for(const $e of te){const Ee={u_matrix:$e.transform,u_inv_matrix:$e.invTransform,u_camera_to_center_distance:(_e=Y).getCameraToCenterDistance($e.projection),u_viewport_size:[_e.width,_e.height]};pe.draw(j,q.TRIANGLES,r.DepthMode.disabled,r.StencilMode.disabled,_.colorModeForRenderPass(),r.CullFaceMode.disabled,Ee,f.id,ge,ce,r.SegmentVector.simpleSegment(0,2*$e.circleOffset,$e.circleArray.length,$e.circleArray.length/2),null,Y.zoom)}var _e;ge.destroy(),ce.destroy()}const vc=r.create();function zu(_,o,f,b,T,M){const{horizontalAlign:F,verticalAlign:j}=r.getAnchorAlignment(_),q=-(F-.5)*o,Y=-(j-.5)*f,J=r.evaluateVariableOffset(_,b);return new r.pointGeometry((q/T+J[0])*M,(Y/T+J[1])*M)}function Fu(_,o,f,b,T,M,F,j,q,Y,J){const te=_.text.placedSymbolArray,ae=_.text.dynamicLayoutVertexArray,ue=_.icon.dynamicLayoutVertexArray,pe={},le=Qn(j,_.getProjection(),M),Se=M.elevation,ce=_.getProjection().upVectorScale(j.canonical,M.center.lat,M.worldSize);ae.clear();for(let ge=0;ge<te.length;ge++){const _e=te.get(ge),$e=_.allowVerticalPlacement&&!_e.placedOrientation,Ee=_e.hidden||!_e.crossTileID||$e?null:b[_e.crossTileID];if(Ee){const Ae=new r.pointGeometry(_e.tileAnchorX,_e.tileAnchorY),De=_.getProjection().upVector(j.canonical,Ae.x,Ae.y),nt=Se?Se.getAtTileOffset(j,Ae.x,Ae.y):0,at=me([_e.projectedAnchorX+nt*De[0]*ce.metersToTile,_e.projectedAnchorY+nt*De[1]*ce.metersToTile,_e.projectedAnchorZ+nt*De[2]*ce.metersToTile],f?le:F),it=Ne(M.getCameraToCenterDistance(_.getProjection()),at.signedDistanceFromCamera);let et=T.evaluateSizeForFeature(_.textSizeData,Y,_e)*it/r.ONE_EM;f&&(et*=_.tilePixelRatio/q);const{width:Re,height:bt,anchor:yt,textOffset:Vt,textScale:ht}=Ee,rn=zu(yt,Re,bt,Vt,ht,et);let Ft;if(f){const Mt=Ae.add(rn),{x:Bt,y:yn,z:fn}=_.getProjection().projectTilePoint(Mt.x,Mt.y,j.canonical);Ft=me([Bt+nt*De[0]*ce.metersToTile,yn+nt*De[1]*ce.metersToTile,fn+nt*De[2]*ce.metersToTile],F).point}else{const Mt=o?rn.rotate(-M.angle):rn;Ft=[at.point[0]+Mt.x,at.point[1]+Mt.y,0]}const zt=_.allowVerticalPlacement&&_e.placedOrientation===r.WritingMode.vertical?Math.PI/2:0;for(let Mt=0;Mt<_e.numGlyphs;Mt++)r.addDynamicAttributes(ae,Ft[0],Ft[1],Ft[2],zt);J&&_e.associatedIconIndex>=0&&(pe[_e.associatedIconIndex]={shiftedAnchor:Ft,angle:zt})}else Lt(_e.numGlyphs,ae)}if(J){ue.clear();const ge=_.icon.placedSymbolArray;for(let _e=0;_e<ge.length;_e++){const $e=ge.get(_e);if($e.hidden)Lt($e.numGlyphs,ue);else{const Ee=pe[_e];if(Ee)for(let Ae=0;Ae<$e.numGlyphs;Ae++)r.addDynamicAttributes(ue,Ee.shiftedAnchor[0],Ee.shiftedAnchor[1],Ee.shiftedAnchor[2],Ee.angle);else Lt($e.numGlyphs,ue)}}_.icon.dynamicLayoutVertexBuffer.updateData(ue)}_.text.dynamicLayoutVertexBuffer.updateData(ae)}function pl(_,o,f){return f.iconsInText&&o?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function fa(_,o,f,b,T,M,F,j,q,Y,J,te){const ae=_.context,ue=ae.gl,pe=_.transform,le=j==="map",Se=q==="map",ce=le&&f.layout.get("symbol-placement")!=="point",ge=le&&!Se&&!ce,_e=f.layout.get("symbol-sort-key").constantOr(1)!==void 0;let $e=!1;const Ee=_.depthModeForSublayer(0,r.DepthMode.ReadOnly),Ae=[r.mercatorXfromLng(pe.center.lng),r.mercatorYfromLat(pe.center.lat)],De=f.layout.get("text-variable-anchor"),nt=pe.projection.name==="globe",at=[],it=[0,-1,0];let et=it;!nt&&!pe.mercatorFromTransition||le||(et=function(Re){const bt=Re._camera.getWorldToCamera(Re.worldSize,1),yt=r.multiply([],bt,Re.globeMatrix);r.invert(yt,yt);const Vt=[0,0,0],ht=[0,1,0,0];return r.transformMat4$1(ht,ht,yt),Vt[0]=ht[0],Vt[1]=ht[1],Vt[2]=ht[2],r.normalize(Vt,Vt),Vt}(pe));for(const Re of b){const bt=o.getTile(Re),yt=bt.getBucket(f);if(!yt||yt.projection.name==="mercator"&&nt)continue;const Vt=T?yt.text:yt.icon;if(!Vt||yt.fullyClipped||!Vt.segments.get().length)continue;const ht=Vt.programConfigurations.get(f.id),rn=T||yt.sdfIcons,Ft=T?yt.textSizeData:yt.iconSizeData,zt=Se||pe.pitch!==0,Mt=r.evaluateSizeForZoom(Ft,pe.zoom);let Bt,yn,fn,Rn,nn=[0,0],Sn=null;if(T){if(yn=bt.glyphAtlasTexture,fn=ue.LINEAR,Bt=bt.glyphAtlasTexture.size,yt.iconsInText){nn=bt.imageAtlasTexture.size,Sn=bt.imageAtlasTexture;const Pi=Ft.kind==="composite"||Ft.kind==="camera";Rn=zt||_.options.rotating||_.options.zooming||Pi?ue.LINEAR:ue.NEAREST}}else{const Pi=f.layout.get("icon-size").constantOr(0)!==1||yt.iconsNeedLinear;yn=bt.imageAtlasTexture,fn=rn||_.options.rotating||_.options.zooming||Pi||zt?ue.LINEAR:ue.NEAREST,Bt=bt.imageAtlasTexture.size}const ti=yt.projection.name==="globe",si=ti?et:it,Mi=ti?r.globeToMercatorTransition(pe.zoom):0,di=Qn(Re,yt.getProjection(),pe),gr=pe.calculatePixelsToTileUnitsMatrix(bt),Ur=xn(di,bt.tileID.canonical,Se,le,pe,yt.getProjection(),gr),to=_.terrain&&Se&&ce?r.invert(r.create(),Ur):vc,_i=Xr(di,bt.tileID.canonical,Se,le,pe,yt.getProjection(),gr),xi=De&&yt.hasTextData(),ii=f.layout.get("icon-text-fit")!=="none"&&xi&&yt.hasIconData();if(ce){const Pi=pe.elevation,jr=Pi?Pi.getAtTileOffsetFunc(Re,pe.center.lat,pe.worldSize,yt.getProjection()):zs=>[0,0,0],no=hr(di,bt.tileID.canonical,Se,le,pe,yt.getProjection(),gr);rt(yt,di,_,T,no,_i,Se,Y,jr,Re)}const Oi=ce||T&&De||ii,Hi=_.translatePosMatrix(di,bt,M,F),Gn=Oi?vc:Ur,sr=_.translatePosMatrix(_i,bt,M,F,!0),Lo=yt.getProjection().createInversionMatrix(pe,Re.canonical),Lr=[];_.terrain&&Se&&Lr.push("PITCH_WITH_MAP_TERRAIN"),ti&&Lr.push("PROJECTION_GLOBE_VIEW"),Oi&&Lr.push("PROJECTED_POS_ON_VIEWPORT");const rs=rn&&f.paint.get(T?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let os;os=rn?yt.iconsInText?mc(Ft.kind,Mt,ge,Se,_,Hi,Gn,sr,Bt,nn,Re,Mi,Ae,Lo,si,yt.getProjection()):hc(Ft.kind,Mt,ge,Se,_,Hi,Gn,sr,T,Bt,!0,Re,Mi,Ae,Lo,si,yt.getProjection()):As(Ft.kind,Mt,ge,Se,_,Hi,Gn,sr,T,Bt,Re,Mi,Ae,Lo,si,yt.getProjection());const uo={program:_.useProgram(pl(rn,T,yt),ht,Lr),buffers:Vt,uniformValues:os,atlasTexture:yn,atlasTextureIcon:Sn,atlasInterpolation:fn,atlasInterpolationIcon:Rn,isSDF:rn,hasHalo:rs,tile:bt,labelPlaneMatrixInv:to};if(_e&&yt.canOverlap){$e=!0;const Pi=Vt.segments.get();for(const jr of Pi)at.push({segments:new r.SegmentVector([jr]),sortKey:jr.sortKey,state:uo})}else at.push({segments:Vt.segments,sortKey:0,state:uo})}$e&&at.sort((Re,bt)=>Re.sortKey-bt.sortKey);for(const Re of at){const bt=Re.state;if(_.terrain&&_.terrain.setupElevationDraw(bt.tile,bt.program,{useDepthForOcclusion:!nt,labelPlaneMatrixInv:bt.labelPlaneMatrixInv}),ae.activeTexture.set(ue.TEXTURE0),bt.atlasTexture.bind(bt.atlasInterpolation,ue.CLAMP_TO_EDGE),bt.atlasTextureIcon&&(ae.activeTexture.set(ue.TEXTURE1),bt.atlasTextureIcon&&bt.atlasTextureIcon.bind(bt.atlasInterpolationIcon,ue.CLAMP_TO_EDGE)),bt.isSDF){const yt=bt.uniformValues;bt.hasHalo&&(yt.u_is_halo=1,fl(bt.buffers,Re.segments,f,_,bt.program,Ee,J,te,yt)),yt.u_is_halo=0}fl(bt.buffers,Re.segments,f,_,bt.program,Ee,J,te,bt.uniformValues)}}function fl(_,o,f,b,T,M,F,j,q){const Y=b.context;T.draw(Y,Y.gl.TRIANGLES,M,F,j,r.CullFaceMode.disabled,q,f.id,_.layoutVertexBuffer,_.indexBuffer,o,f.paint,b.transform.zoom,_.programConfigurations.get(f.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer,_.globeExtVertexBuffer)}function hl(_,o,f,b,T,M,F){const j=_.context.gl,q=f.paint.get("fill-pattern"),Y=q&&q.constantOr(1),J=f.getCrossfadeParameters();let te,ae,ue,pe,le;F?(ae=Y&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",te=j.LINES):(ae=Y?"fillPattern":"fill",te=j.TRIANGLES);for(const Se of b){const ce=o.getTile(Se);if(Y&&!ce.patternsLoaded())continue;const ge=ce.getBucket(f);if(!ge)continue;_.prepareDrawTile();const _e=ge.programConfigurations.get(f.id),$e=_.useProgram(ae,_e);Y&&(_.context.activeTexture.set(j.TEXTURE0),ce.imageAtlasTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),_e.updatePaintBuffers(J));const Ee=q.constantOr(null);if(Ee&&ce.imageAtlas){const De=ce.imageAtlas,nt=De.patternPositions[Ee.to.toString()],at=De.patternPositions[Ee.from.toString()];nt&&at&&_e.setConstantPatternPositions(nt,at)}const Ae=_.translatePosMatrix(Se.projMatrix,ce,f.paint.get("fill-translate"),f.paint.get("fill-translate-anchor"));if(F){pe=ge.indexBuffer2,le=ge.segments2;const De=_.terrain&&_.terrain.renderingToTexture?_.terrain.drapeBufferSize:[j.drawingBufferWidth,j.drawingBufferHeight];ue=ae==="fillOutlinePattern"&&Y?ol(Ae,_,J,ce,De):ua(Ae,De)}else pe=ge.indexBuffer,le=ge.segments,ue=Y?rl(Ae,_,J,ce):Wo(Ae);_.prepareDrawProgram(_.context,$e,Se.toUnwrapped()),$e.draw(_.context,te,T,_.stencilModeForClipping(Se),M,r.CullFaceMode.disabled,ue,f.id,ge.layoutVertexBuffer,pe,le,f.paint,_.transform.zoom,_e)}}function ha(_,o,f,b,T,M,F){const j=_.context,q=j.gl,Y=_.transform,J=f.paint.get("fill-extrusion-pattern"),te=J.constantOr(1),ae=f.getCrossfadeParameters(),ue=f.paint.get("fill-extrusion-opacity"),pe=Y.projection.name==="globe"?r.fillExtrusionHeightLift():0,le=Y.projection.name==="globe",Se=le?r.globeToMercatorTransition(Y.zoom):0,ce=[r.mercatorXfromLng(Y.center.lng),r.mercatorYfromLat(Y.center.lat)],ge=[];le&&ge.push("PROJECTION_GLOBE_VIEW");for(const _e of b){const $e=o.getTile(_e),Ee=$e.getBucket(f);if(!Ee||Ee.projection.name!==Y.projection.name)continue;const Ae=Ee.programConfigurations.get(f.id),De=_.useProgram(te?"fillExtrusionPattern":"fillExtrusion",Ae,ge);if(_.terrain){const bt=_.terrain;if(_.style.terrainSetForDrapingOnly())bt.setupElevationDraw($e,De,{useMeterToDem:!0});else{if(!Ee.enableTerrain)continue;if(bt.setupElevationDraw($e,De,{useMeterToDem:!0}),ml(j,o,_e,Ee,f,bt),!Ee.centroidVertexBuffer){const yt=De.attributes.a_centroid_pos;yt!==void 0&&q.vertexAttrib2f(yt,0,0)}}}te&&(_.context.activeTexture.set(q.TEXTURE0),$e.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),Ae.updatePaintBuffers(ae));const nt=J.constantOr(null);if(nt&&$e.imageAtlas){const bt=$e.imageAtlas,yt=bt.patternPositions[nt.to.toString()],Vt=bt.patternPositions[nt.from.toString()];yt&&Vt&&Ae.setConstantPatternPositions(yt,Vt)}const at=_.translatePosMatrix(_e.projMatrix,$e,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),it=Y.projection.createInversionMatrix(Y,_e.canonical),et=f.paint.get("fill-extrusion-vertical-gradient"),Re=te?Ss(at,_,et,ue,_e,ae,$e,pe,Se,ce,it):uc(at,_,et,ue,_e,pe,Se,ce,it);_.prepareDrawProgram(j,De,_e.toUnwrapped()),De.draw(j,j.gl.TRIANGLES,T,M,F,r.CullFaceMode.backCCW,Re,f.id,Ee.layoutVertexBuffer,Ee.indexBuffer,Ee.segments,f.paint,_.transform.zoom,Ae,_.terrain?Ee.centroidVertexBuffer:null,le?Ee.layoutVertexExtBuffer:null)}}function ml(_,o,f,b,T,M){const F=[ce=>{let ge=ce.canonical.x-1,_e=ce.wrap;return ge<0&&(ge=(1<<ce.canonical.z)-1,_e--),new r.OverscaledTileID(ce.overscaledZ,_e,ce.canonical.z,ge,ce.canonical.y)},ce=>{let ge=ce.canonical.x+1,_e=ce.wrap;return ge===1<<ce.canonical.z&&(ge=0,_e++),new r.OverscaledTileID(ce.overscaledZ,_e,ce.canonical.z,ge,ce.canonical.y)},ce=>new r.OverscaledTileID(ce.overscaledZ,ce.wrap,ce.canonical.z,ce.canonical.x,(ce.canonical.y===0?1<<ce.canonical.z:ce.canonical.y)-1),ce=>new r.OverscaledTileID(ce.overscaledZ,ce.wrap,ce.canonical.z,ce.canonical.x,ce.canonical.y===(1<<ce.canonical.z)-1?0:ce.canonical.y+1)],j=ce=>{const ge=o.getSource().minzoom,_e=Ee=>{const Ae=o.getTileByID(Ee);if(Ae&&Ae.hasData())return Ae.getBucket(T)},$e=[0,-1,1];for(const Ee of $e){if(ce.overscaledZ+Ee<ge)continue;const Ae=_e(ce.calculateScaledKey(ce.overscaledZ+Ee));if(Ae)return Ae}},q=[0,0,0],Y=(ce,ge)=>(q[0]=Math.min(ce.min.y,ge.min.y),q[1]=Math.max(ce.max.y,ge.max.y),q[2]=r.EXTENT-ge.min.x>ce.max.x?ge.min.x-r.EXTENT:ce.max.x,q),J=(ce,ge)=>(q[0]=Math.min(ce.min.x,ge.min.x),q[1]=Math.max(ce.max.x,ge.max.x),q[2]=r.EXTENT-ge.min.y>ce.max.y?ge.min.y-r.EXTENT:ce.max.y,q),te=[(ce,ge)=>Y(ce,ge),(ce,ge)=>Y(ge,ce),(ce,ge)=>J(ce,ge),(ce,ge)=>J(ge,ce)],ae=new r.pointGeometry(0,0);let ue,pe,le;const Se=(ce,ge,_e,$e,Ee)=>{const Ae=[[$e?_e:ce,$e?ce:_e,0],[$e?_e:ge,$e?ge:_e,0]],De=Ee<0?r.EXTENT+Ee:Ee,nt=[$e?De:(ce+ge)/2,$e?(ce+ge)/2:De,0];return _e===0&&Ee<0||_e!==0&&Ee>0?M.getForTilePoints(le,[nt],!0,pe):Ae.push(nt),M.getForTilePoints(f,Ae,!0,ue),Math.max(Ae[0][2],Ae[1][2],nt[2])/M.exaggeration()};for(let ce=0;ce<4;ce++){const ge=(ce<2?1:5)-ce,_e=b.borders[ce];if(_e.length===0)continue;const $e=le=F[ce](f),Ee=j($e);if(!(Ee&&Ee instanceof r.FillExtrusionBucket&&Ee.enableTerrain)||b.borderDoneWithNeighborZ[ce]===Ee.canonical.z&&Ee.borderDoneWithNeighborZ[ge]===b.canonical.z||(pe=M.findDEMTileFor($e),!pe||!pe.dem))continue;if(!ue){const at=M.findDEMTileFor(f);if(!at||!at.dem)return;ue=at}const Ae=Ee.borders[ge];let De=0;const nt=Ee.borderDoneWithNeighborZ[ge]!==b.canonical.z;if(b.canonical.z===Ee.canonical.z){for(let at=0;at<_e.length;at++){const it=b.featuresOnBorder[_e[at]],et=it.borders[ce];let Re;for(;De<Ae.length&&(Re=Ee.featuresOnBorder[Ae[De]],!(Re.borders[ge][1]>et[0]+3));)nt&&Ee.encodeCentroid(void 0,Re,!1),De++;if(Re&&De<Ae.length){const bt=De;let yt=0;for(;!(Re.borders[ge][0]>et[1]-3)&&(yt++,++De!==Ae.length);)Re=Ee.featuresOnBorder[Ae[De]];if(Re=Ee.featuresOnBorder[Ae[bt]],it.intersectsCount()>1||Re.intersectsCount()>1||yt!==1){yt!==1&&(De=bt),b.encodeCentroid(void 0,it,!1),nt&&Ee.encodeCentroid(void 0,Re,!1);continue}const Vt=te[ce](it,Re),ht=ce%2?r.EXTENT-1:0;ae.x=Se(Vt[0],Math.min(r.EXTENT-1,Vt[1]),ht,ce<2,Vt[2]),ae.y=0,b.encodeCentroid(ae,it,!1),nt&&Ee.encodeCentroid(ae,Re,!1)}else b.encodeCentroid(void 0,it,!1)}b.borderDoneWithNeighborZ[ce]=Ee.canonical.z,b.needsCentroidUpdate=!0,nt&&(Ee.borderDoneWithNeighborZ[ge]=b.canonical.z,Ee.needsCentroidUpdate=!0)}else{for(const at of _e)b.encodeCentroid(void 0,b.featuresOnBorder[at],!1);if(nt){for(const at of Ae)Ee.encodeCentroid(void 0,Ee.featuresOnBorder[at],!1);Ee.borderDoneWithNeighborZ[ge]=b.canonical.z,Ee.needsCentroidUpdate=!0}b.borderDoneWithNeighborZ[ce]=Ee.canonical.z,b.needsCentroidUpdate=!0}}(b.needsCentroidUpdate||!b.centroidVertexBuffer&&b.centroidVertexArray.length!==0)&&b.uploadCentroid(_)}const ko=new r.Color(1,0,0,1),ks=new r.Color(0,1,0,1),yc=new r.Color(0,0,1,1),Yo=new r.Color(1,0,1,1),Xo=new r.Color(0,1,1,1);function gl(_,o,f,b){Hn(_,0,o+f/2,_.transform.width,f,b)}function ma(_,o,f,b){Hn(_,o-f/2,0,f,_.transform.height,b)}function Hn(_,o,f,b,T,M){const F=_.context,j=F.gl;j.enable(j.SCISSOR_TEST),j.scissor(o*r.exported.devicePixelRatio,f*r.exported.devicePixelRatio,b*r.exported.devicePixelRatio,T*r.exported.devicePixelRatio),F.clear({color:M}),j.disable(j.SCISSOR_TEST)}function ga(_,o,f){const b=_.context,T=b.gl,M=_.transform.projection.name==="globe",F=f.projMatrix,j=_.useProgram("debug",null,M?["PROJECTION_GLOBE_VIEW"]:null),q=o.getTileByID(f.key);_.terrain&&_.terrain.setupElevationDraw(q,j);const Y=r.DepthMode.disabled,J=r.StencilMode.disabled,te=_.colorModeForRenderPass(),ae="$debug";b.activeTexture.set(T.TEXTURE0),_.emptyTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),M?q._makeGlobeTileDebugBuffers(_.context,_.transform.projection):q._makeDebugTileBoundsBuffers(_.context,_.transform.projection);const ue=q._tileDebugBuffer||_.debugBuffer,pe=q._tileDebugIndexBuffer||_.debugIndexBuffer,le=q._tileDebugSegments||_.debugSegments;j.draw(b,T.LINE_STRIP,Y,J,te,r.CullFaceMode.disabled,ll(F,r.Color.red),ae,ue,pe,le,null,null,null,q._globeTileDebugBorderBuffer);const Se=q.latestRawTileData,ce=Math.floor((Se&&Se.byteLength||0)/1024),ge=o.getTile(f).tileSize,_e=512/Math.min(ge,512)*(f.overscaledZ/_.transform.zoom)*.5;let $e=f.canonical.toString();f.overscaledZ!==f.canonical.z&&($e+=` => ${f.overscaledZ}`),function(nt,at){nt.initDebugOverlayCanvas();const it=nt.debugOverlayCanvas,et=nt.context.gl,Re=nt.debugOverlayCanvas.getContext("2d");Re.clearRect(0,0,it.width,it.height),Re.shadowColor="white",Re.shadowBlur=2,Re.lineWidth=1.5,Re.strokeStyle="white",Re.textBaseline="top",Re.font="bold 36px Open Sans, sans-serif",Re.fillText(at,5,5),Re.strokeText(at,5,5),nt.debugOverlayTexture.update(it),nt.debugOverlayTexture.bind(et.LINEAR,et.CLAMP_TO_EDGE)}(_,`${$e} ${ce}kb`);const Ee=q._tileDebugTextBuffer||_.debugBuffer,Ae=q._tileDebugTextIndexBuffer||_.quadTriangleIndexBuffer,De=q._tileDebugTextSegments||_.debugSegments;j.draw(b,T.TRIANGLES,Y,J,r.ColorMode.alphaBlended,r.CullFaceMode.disabled,ll(F,r.Color.transparent,_e),ae,Ee,Ae,De,null,null,null,q._globeTileDebugTextBuffer)}const Vu=r.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:bc}=Vu;function br(_,o,f,b){_.emplaceBack(o,f,b)}class xc{constructor(o){this.vertexArray=new r.StructArrayLayout3f12,this.indices=new r.StructArrayLayout3ui6,br(this.vertexArray,-1,-1,1),br(this.vertexArray,1,-1,1),br(this.vertexArray,-1,1,1),br(this.vertexArray,1,1,1),br(this.vertexArray,-1,-1,-1),br(this.vertexArray,1,-1,-1),br(this.vertexArray,-1,1,-1),br(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=o.createVertexBuffer(this.vertexArray,bc),this.indexBuffer=o.createIndexBuffer(this.indices),this.segment=r.SegmentVector.simpleSegment(0,0,36,12)}}function Jo(_,o,f,b,T,M){const F=_.gl,j=o.paint.get("sky-atmosphere-color"),q=o.paint.get("sky-atmosphere-halo-color"),Y=o.paint.get("sky-atmosphere-sun-intensity"),J=((te,ae,ue,pe,le)=>({u_matrix_3f:te,u_sun_direction:ae,u_sun_intensity:ue,u_color_tint_r:[pe.r,pe.g,pe.b,pe.a],u_color_tint_m:[le.r,le.g,le.b,le.a],u_luminance:5e-5}))(r.fromMat4(r.create$1(),b),T,Y,j,q);F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_CUBE_MAP_POSITIVE_X+M,o.skyboxTexture,0),f.draw(_,F.TRIANGLES,r.DepthMode.disabled,r.StencilMode.disabled,r.ColorMode.unblended,r.CullFaceMode.frontCW,J,"skyboxCapture",o.skyboxGeometry.vertexBuffer,o.skyboxGeometry.indexBuffer,o.skyboxGeometry.segment)}const wc=r.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Uu{constructor(o){const f=new r.StructArrayLayout5f20;f.emplaceBack(-1,1,1,0,0),f.emplaceBack(1,1,1,1,0),f.emplaceBack(1,-1,1,1,1),f.emplaceBack(-1,-1,1,0,1);const b=new r.StructArrayLayout3ui6;b.emplaceBack(0,1,2),b.emplaceBack(2,3,0),this.vertexBuffer=o.createVertexBuffer(f,wc.members),this.indexBuffer=o.createIndexBuffer(b),this.segments=r.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const _a={symbol:function(_,o,f,b,T){if(_.renderPass!=="translucent")return;const M=r.StencilMode.disabled,F=_.colorModeForRenderPass();f.layout.get("text-variable-anchor")&&function(j,q,Y,J,te,ae,ue){const pe=q.transform,le=te==="map",Se=ae==="map";for(const ce of j){const ge=J.getTile(ce),_e=ge.getBucket(Y);if(!_e||!_e.text||!_e.text.segments.get().length)continue;const $e=r.evaluateSizeForZoom(_e.textSizeData,pe.zoom),Ee=Qn(ce,_e.getProjection(),pe),Ae=pe.calculatePixelsToTileUnitsMatrix(ge),De=xn(Ee,ge.tileID.canonical,Se,le,pe,_e.getProjection(),Ae),nt=Y.layout.get("icon-text-fit")!=="none"&&_e.hasIconData();if($e){const at=Math.pow(2,pe.zoom-ge.tileID.overscaledZ);Fu(_e,le,Se,ue,r.symbolSize,pe,De,ce,at,$e,nt)}}}(b,_,f,o,f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),T),f.paint.get("icon-opacity").constantOr(1)!==0&&fa(_,o,f,b,!1,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),f.layout.get("icon-rotation-alignment"),f.layout.get("icon-pitch-alignment"),f.layout.get("icon-keep-upright"),M,F),f.paint.get("text-opacity").constantOr(1)!==0&&fa(_,o,f,b,!0,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),f.layout.get("text-keep-upright"),M,F),o.map.showCollisionBoxes&&(_c(_,o,f,b,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),!0),_c(_,o,f,b,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),!1))},circle:function(_,o,f,b){if(_.renderPass!=="translucent")return;const T=f.paint.get("circle-opacity"),M=f.paint.get("circle-stroke-width"),F=f.paint.get("circle-stroke-opacity"),j=f.layout.get("circle-sort-key").constantOr(1)!==void 0;if(T.constantOr(1)===0&&(M.constantOr(1)===0||F.constantOr(1)===0))return;const q=_.context,Y=q.gl,J=_.transform,te=_.depthModeForSublayer(0,r.DepthMode.ReadOnly),ae=r.StencilMode.disabled,ue=_.colorModeForRenderPass(),pe=J.projection.name==="globe",le=[r.mercatorXfromLng(J.center.lng),r.mercatorYfromLat(J.center.lat)],Se=[];for(let ge=0;ge<b.length;ge++){const _e=b[ge],$e=o.getTile(_e),Ee=$e.getBucket(f);if(!Ee||Ee.projection.name!==J.projection.name)continue;const Ae=Ee.programConfigurations.get(f.id),De=dc(f);pe&&De.push("PROJECTION_GLOBE_VIEW");const nt=_.useProgram("circle",Ae,De),at=Ee.layoutVertexBuffer,it=Ee.globeExtVertexBuffer,et=Ee.indexBuffer,Re=J.projection.createInversionMatrix(J,_e.canonical),bt={programConfiguration:Ae,program:nt,layoutVertexBuffer:at,globeExtVertexBuffer:it,indexBuffer:et,uniformValues:sl(_,_e,$e,Re,le,f),tile:$e};if(j){const yt=Ee.segments.get();for(const Vt of yt)Se.push({segments:new r.SegmentVector([Vt]),sortKey:Vt.sortKey,state:bt})}else Se.push({segments:Ee.segments,sortKey:0,state:bt})}j&&Se.sort((ge,_e)=>ge.sortKey-_e.sortKey);const ce={useDepthForOcclusion:!pe};for(const ge of Se){const{programConfiguration:_e,program:$e,layoutVertexBuffer:Ee,globeExtVertexBuffer:Ae,indexBuffer:De,uniformValues:nt,tile:at}=ge.state,it=ge.segments;_.terrain&&_.terrain.setupElevationDraw(at,$e,ce),_.prepareDrawProgram(q,$e,at.tileID.toUnwrapped()),$e.draw(q,Y.TRIANGLES,te,ae,ue,r.CullFaceMode.disabled,nt,f.id,Ee,De,it,f.paint,J.zoom,_e,pe?Ae:null)}},heatmap:function(_,o,f,b){if(f.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const T=_.context,M=T.gl,F=r.StencilMode.disabled,j=new r.ColorMode([M.ONE,M.ONE],r.Color.transparent,[!0,!0,!0,!0]);(function(ue,pe,le,Se){const ce=ue.gl,ge=pe.width*Se,_e=pe.height*Se;ue.activeTexture.set(ce.TEXTURE1),ue.viewport.set([0,0,ge,_e]);let $e=le.heatmapFbo;if(!$e||$e&&($e.width!==ge||$e.height!==_e)){$e&&$e.destroy();const Ee=ce.createTexture();ce.bindTexture(ce.TEXTURE_2D,Ee),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_S,ce.CLAMP_TO_EDGE),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_T,ce.CLAMP_TO_EDGE),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MIN_FILTER,ce.LINEAR),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MAG_FILTER,ce.LINEAR),$e=le.heatmapFbo=ue.createFramebuffer(ge,_e,!1),function(Ae,De,nt,at,it,et){const Re=Ae.gl;Re.texImage2D(Re.TEXTURE_2D,0,Re.RGBA,it,et,0,Re.RGBA,Ae.extRenderToTextureHalfFloat?Ae.extTextureHalfFloat.HALF_FLOAT_OES:Re.UNSIGNED_BYTE,null),at.colorAttachment.set(nt)}(ue,0,Ee,$e,ge,_e)}else ce.bindTexture(ce.TEXTURE_2D,$e.colorAttachment.get()),ue.bindFramebuffer.set($e.framebuffer)})(T,_,f,_.transform.projection.name==="globe"?.5:.25),T.clear({color:r.Color.transparent});const q=_.transform,Y=q.projection.name==="globe",J=Y?["PROJECTION_GLOBE_VIEW"]:null,te=Y?r.CullFaceMode.frontCCW:r.CullFaceMode.disabled,ae=[r.mercatorXfromLng(q.center.lng),r.mercatorYfromLat(q.center.lat)];for(let ue=0;ue<b.length;ue++){const pe=b[ue];if(o.hasRenderableParent(pe))continue;const le=o.getTile(pe),Se=le.getBucket(f);if(!Se||Se.projection.name!==q.projection.name)continue;const ce=Se.programConfigurations.get(f.id),ge=_.useProgram("heatmap",ce,J),{zoom:_e}=_.transform;_.terrain&&_.terrain.setupElevationDraw(le,ge),_.prepareDrawProgram(T,ge,pe.toUnwrapped());const $e=q.projection.createInversionMatrix(q,pe.canonical);ge.draw(T,M.TRIANGLES,r.DepthMode.disabled,F,j,te,Ou(_,pe,le,$e,ae,_e,f.paint.get("heatmap-intensity")),f.id,Se.layoutVertexBuffer,Se.indexBuffer,Se.segments,f.paint,_.transform.zoom,ce,Y?Se.globeExtVertexBuffer:null)}T.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(T,M){const F=T.context,j=F.gl,q=M.heatmapFbo;if(!q)return;F.activeTexture.set(j.TEXTURE0),j.bindTexture(j.TEXTURE_2D,q.colorAttachment.get()),F.activeTexture.set(j.TEXTURE1);let Y=M.colorRampTexture;Y||(Y=M.colorRampTexture=new r.Texture(F,M.colorRamp,j.RGBA)),Y.bind(j.LINEAR,j.CLAMP_TO_EDGE),T.useProgram("heatmapTexture").draw(F,j.TRIANGLES,r.DepthMode.disabled,r.StencilMode.disabled,T.colorModeForRenderPass(),r.CullFaceMode.disabled,((J,te,ae,ue)=>({u_image:0,u_color_ramp:1,u_opacity:te.paint.get("heatmap-opacity")}))(0,M),M.id,T.viewportBuffer,T.quadTriangleIndexBuffer,T.viewportSegments,M.paint,T.transform.zoom)}(_,f))},line:function(_,o,f,b){if(_.renderPass!=="translucent")return;const T=f.paint.get("line-opacity"),M=f.paint.get("line-width");if(T.constantOr(1)===0||M.constantOr(1)===0)return;const F=_.depthModeForSublayer(0,r.DepthMode.ReadOnly),j=_.colorModeForRenderPass(),q=_.terrain&&_.terrain.renderingToTexture?1:r.exported.devicePixelRatio,Y=f.paint.get("line-dasharray"),J=Y.constantOr(1),te=f.layout.get("line-cap"),ae=f.paint.get("line-pattern"),ue=ae.constantOr(1),pe=f.paint.get("line-gradient"),le=f.getCrossfadeParameters(),Se=ue?"linePattern":"line",ce=_.context,ge=ce.gl,_e=(Ee=>{const Ae=[];da(Ee)&&Ae.push("RENDER_LINE_DASH"),Ee.paint.get("line-gradient")&&Ae.push("RENDER_LINE_GRADIENT");const De=Ee.paint.get("line-trim-offset");De[0]===0&&De[1]===0||Ae.push("RENDER_LINE_TRIM_OFFSET");const nt=Ee.paint.get("line-pattern").constantOr(1),at=Ee.paint.get("line-opacity").constantOr(1)!==1;return!nt&&at&&Ae.push("RENDER_LINE_ALPHA_DISCARD"),Ae})(f);let $e=_e.includes("RENDER_LINE_ALPHA_DISCARD");_.terrain&&_.terrain.clipOrMaskOverlapStencilType()&&($e=!1);for(const Ee of b){const Ae=o.getTile(Ee);if(ue&&!Ae.patternsLoaded())continue;const De=Ae.getBucket(f);if(!De)continue;_.prepareDrawTile();const nt=De.programConfigurations.get(f.id),at=_.useProgram(Se,nt,_e),it=ae.constantOr(null);if(it&&Ae.imageAtlas){const Ft=Ae.imageAtlas,zt=Ft.patternPositions[it.to.toString()],Mt=Ft.patternPositions[it.from.toString()];zt&&Mt&&nt.setConstantPatternPositions(zt,Mt)}const et=Y.constantOr(null),Re=te.constantOr(null);if(!ue&&et&&Re&&Ae.lineAtlas){const Ft=Ae.lineAtlas,zt=Ft.getDash(et.to,Re),Mt=Ft.getDash(et.from,Re);zt&&Mt&&nt.setConstantPatternPositions(zt,Mt)}let[bt,yt]=f.paint.get("line-trim-offset");(Re==="round"||Re==="square")&&bt!==yt&&(bt===0&&(bt-=1),yt===1&&(yt+=1));const Vt=_.terrain?Ee.projMatrix:null,ht=ue?Pu(_,Ae,f,le,Vt,q):ul(_,Ae,f,le,Vt,De.lineClipsArray.length,q,[bt,yt]);if(pe){const Ft=De.gradients[f.id];let zt=Ft.texture;if(f.gradientVersion!==Ft.version){let Mt=256;if(f.stepInterpolant){const Bt=o.getSource().maxzoom,yn=Ee.canonical.z===Bt?Math.ceil(1<<_.transform.maxZoom-Ee.canonical.z):1;Mt=r.clamp(r.nextPowerOfTwo(De.maxLineLength/r.EXTENT*1024*yn),256,ce.maxTextureSize)}Ft.gradient=r.renderColorRamp({expression:f.gradientExpression(),evaluationKey:"lineProgress",resolution:Mt,image:Ft.gradient||void 0,clips:De.lineClipsArray}),Ft.texture?Ft.texture.update(Ft.gradient):Ft.texture=new r.Texture(ce,Ft.gradient,ge.RGBA),Ft.version=f.gradientVersion,zt=Ft.texture}ce.activeTexture.set(ge.TEXTURE1),zt.bind(f.stepInterpolant?ge.NEAREST:ge.LINEAR,ge.CLAMP_TO_EDGE)}J&&(ce.activeTexture.set(ge.TEXTURE0),Ae.lineAtlasTexture.bind(ge.LINEAR,ge.REPEAT),nt.updatePaintBuffers(le)),ue&&(ce.activeTexture.set(ge.TEXTURE0),Ae.imageAtlasTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),nt.updatePaintBuffers(le)),_.prepareDrawProgram(ce,at,Ee.toUnwrapped());const rn=Ft=>{at.draw(ce,ge.TRIANGLES,F,Ft,j,r.CullFaceMode.disabled,ht,f.id,De.layoutVertexBuffer,De.indexBuffer,De.segments,f.paint,_.transform.zoom,nt,De.layoutVertexBuffer2)};if($e){const Ft=_.stencilModeForClipping(Ee).ref;Ft===0&&_.terrain&&ce.clear({stencil:0});const zt={func:ge.EQUAL,mask:255};ht.u_alpha_discard_threshold=.8,rn(new r.StencilMode(zt,Ft,255,ge.KEEP,ge.KEEP,ge.INVERT)),ht.u_alpha_discard_threshold=0,rn(new r.StencilMode(zt,Ft,255,ge.KEEP,ge.KEEP,ge.KEEP))}else rn(_.stencilModeForClipping(Ee))}$e&&(_.resetStencilClippingMasks(),_.terrain&&ce.clear({stencil:0}))},fill:function(_,o,f,b){const T=f.paint.get("fill-color"),M=f.paint.get("fill-opacity");if(M.constantOr(1)===0)return;const F=_.colorModeForRenderPass(),j=f.paint.get("fill-pattern"),q=_.opaquePassEnabledForLayer()&&!j.constantOr(1)&&T.constantOr(r.Color.transparent).a===1&&M.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===q){const Y=_.depthModeForSublayer(1,_.renderPass==="opaque"?r.DepthMode.ReadWrite:r.DepthMode.ReadOnly);hl(_,o,f,b,Y,F,!1)}if(_.renderPass==="translucent"&&f.paint.get("fill-antialias")){const Y=_.depthModeForSublayer(f.getPaintProperty("fill-outline-color")?2:0,r.DepthMode.ReadOnly);hl(_,o,f,b,Y,F,!0)}},"fill-extrusion":function(_,o,f,b){const T=f.paint.get("fill-extrusion-opacity");if(T!==0&&_.renderPass==="translucent"){const M=new r.DepthMode(_.context.gl.LEQUAL,r.DepthMode.ReadWrite,_.depthRangeFor3D);if(T!==1||f.paint.get("fill-extrusion-pattern").constantOr(1))ha(_,o,f,b,M,r.StencilMode.disabled,r.ColorMode.disabled),ha(_,o,f,b,M,_.stencilModeFor3D(),_.colorModeForRenderPass()),_.resetStencilClippingMasks();else{const F=_.colorModeForRenderPass();ha(_,o,f,b,M,r.StencilMode.disabled,F)}}},hillshade:function(_,o,f,b){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const T=_.context,M=_.depthModeForSublayer(0,r.DepthMode.ReadOnly),F=_.colorModeForRenderPass(),j=_.terrain&&_.terrain.renderingToTexture,[q,Y]=_.renderPass!=="translucent"||j?[{},b]:_.stencilConfigForOverlap(b);for(const J of Y){const te=o.getTile(J);if(te.needsHillshadePrepare&&_.renderPass==="offscreen")ra(_,te,f,M,r.StencilMode.disabled,F);else if(_.renderPass==="translucent"){const ae=j&&_.terrain?_.terrain.stencilModeForRTTOverlap(J):q[J.overscaledZ];ac(_,J,te,f,M,ae,F)}}T.viewport.set([0,0,_.width,_.height]),_.resetStencilClippingMasks()},raster:function(_,o,f,b,T,M){if(_.renderPass!=="translucent"||f.paint.get("raster-opacity")===0||!b.length)return;const F=_.context,j=F.gl,q=o.getSource(),Y=_.useProgram("raster"),J=_.colorModeForRenderPass(),te=_.terrain&&_.terrain.renderingToTexture,[ae,ue]=q instanceof We||te?[{},b]:_.stencilConfigForOverlap(b),pe=ue[ue.length-1].overscaledZ,le=!_.options.moving;for(const Se of ue){const ce=te?r.DepthMode.disabled:_.depthModeForSublayer(Se.overscaledZ-pe,f.paint.get("raster-opacity")===1?r.DepthMode.ReadWrite:r.DepthMode.ReadOnly,j.LESS),ge=Se.toUnwrapped(),_e=o.getTile(Se);if(te&&(!_e||!_e.hasData()))continue;const $e=te?Se.projMatrix:_.transform.calculateProjMatrix(ge,le),Ee=_.terrain&&te?_.terrain.stencilModeForRTTOverlap(Se):ae[Se.overscaledZ],Ae=M?0:f.paint.get("raster-fade-duration");_e.registerFadeDuration(Ae);const De=o.findLoadedParent(Se,0),nt=tl(_e,De,o,_.transform,Ae);let at,it;_.terrain&&_.terrain.prepareDrawTile();const et=f.paint.get("raster-resampling")==="nearest"?j.NEAREST:j.LINEAR;F.activeTexture.set(j.TEXTURE0),_e.texture.bind(et,j.CLAMP_TO_EDGE),F.activeTexture.set(j.TEXTURE1),De?(De.texture.bind(et,j.CLAMP_TO_EDGE),at=Math.pow(2,De.tileID.overscaledZ-_e.tileID.overscaledZ),it=[_e.tileID.canonical.x*at%1,_e.tileID.canonical.y*at%1]):_e.texture.bind(et,j.CLAMP_TO_EDGE);const Re=Du($e,it||[0,0],at||1,nt,f,q instanceof We?q.perspectiveTransform:[0,0]);if(_.prepareDrawProgram(F,Y,ge),q instanceof We)q.boundsBuffer&&q.boundsSegments&&Y.draw(F,j.TRIANGLES,ce,r.StencilMode.disabled,J,r.CullFaceMode.disabled,Re,f.id,q.boundsBuffer,_.quadTriangleIndexBuffer,q.boundsSegments);else{const{tileBoundsBuffer:bt,tileBoundsIndexBuffer:yt,tileBoundsSegments:Vt}=_.getTileBoundsBuffers(_e);Y.draw(F,j.TRIANGLES,ce,Ee,J,r.CullFaceMode.disabled,Re,f.id,bt,yt,Vt)}}_.resetStencilClippingMasks()},background:function(_,o,f,b){const T=f.paint.get("background-color"),M=f.paint.get("background-opacity");if(M===0)return;const F=_.context,j=F.gl,q=_.transform,Y=q.tileSize,J=f.paint.get("background-pattern");if(_.isPatternMissing(J))return;const te=!J&&T.a===1&&M===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==te)return;const ae=r.StencilMode.disabled,ue=_.depthModeForSublayer(0,te==="opaque"?r.DepthMode.ReadWrite:r.DepthMode.ReadOnly),pe=_.colorModeForRenderPass(),le=_.useProgram(J?"backgroundPattern":"background");let Se,ce=b;ce||(Se=_.getBackgroundTiles(),ce=Object.values(Se).map(_e=>_e.tileID)),J&&(F.activeTexture.set(j.TEXTURE0),_.imageManager.bind(_.context));const ge=f.getCrossfadeParameters();for(const _e of ce){const $e=_e.toUnwrapped(),Ee=b?_e.projMatrix:_.transform.calculateProjMatrix($e);_.prepareDrawTile();const Ae=o?o.getTile(_e):Se?Se[_e.key]:new r.Tile(_e,Y,q.zoom,_),De=J?Zo(Ee,M,_,J,{tileID:_e,tileSize:Y},ge):gc(Ee,M,T);_.prepareDrawProgram(F,le,$e);const{tileBoundsBuffer:nt,tileBoundsIndexBuffer:at,tileBoundsSegments:it}=_.getTileBoundsBuffers(Ae);le.draw(F,j.TRIANGLES,ue,ae,pe,r.CullFaceMode.disabled,De,f.id,nt,at,it)}},sky:function(_,o,f){const b=_.transform,T=b.projection.name==="mercator"||b.projection.name==="globe"?1:r.smoothstep(7,8,b.zoom),M=f.paint.get("sky-opacity")*T;if(M===0)return;const F=_.context,j=f.paint.get("sky-type"),q=new r.DepthMode(F.gl.LEQUAL,r.DepthMode.ReadOnly,[0,1]),Y=_.frameCounter/1e3%1;j==="atmosphere"?_.renderPass==="offscreen"?f.needsSkyboxCapture(_)&&(function(J,te,ae,ue){const pe=J.context,le=pe.gl;let Se=te.skyboxFbo;if(!Se){Se=te.skyboxFbo=pe.createFramebuffer(32,32,!1),te.skyboxGeometry=new xc(pe),te.skyboxTexture=pe.gl.createTexture(),le.bindTexture(le.TEXTURE_CUBE_MAP,te.skyboxTexture),le.texParameteri(le.TEXTURE_CUBE_MAP,le.TEXTURE_WRAP_S,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_CUBE_MAP,le.TEXTURE_WRAP_T,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_CUBE_MAP,le.TEXTURE_MIN_FILTER,le.LINEAR),le.texParameteri(le.TEXTURE_CUBE_MAP,le.TEXTURE_MAG_FILTER,le.LINEAR);for(let $e=0;$e<6;++$e)le.texImage2D(le.TEXTURE_CUBE_MAP_POSITIVE_X+$e,0,le.RGBA,32,32,0,le.RGBA,le.UNSIGNED_BYTE,null)}pe.bindFramebuffer.set(Se.framebuffer),pe.viewport.set([0,0,32,32]);const ce=te.getCenter(J,!0),ge=J.useProgram("skyboxCapture"),_e=new Float64Array(16);r.identity(_e),r.rotateY(_e,_e,.5*-Math.PI),Jo(pe,te,ge,_e,ce,0),r.identity(_e),r.rotateY(_e,_e,.5*Math.PI),Jo(pe,te,ge,_e,ce,1),r.identity(_e),r.rotateX(_e,_e,.5*-Math.PI),Jo(pe,te,ge,_e,ce,2),r.identity(_e),r.rotateX(_e,_e,.5*Math.PI),Jo(pe,te,ge,_e,ce,3),r.identity(_e),Jo(pe,te,ge,_e,ce,4),r.identity(_e),r.rotateY(_e,_e,Math.PI),Jo(pe,te,ge,_e,ce,5),pe.viewport.set([0,0,J.width,J.height])}(_,f),f.markSkyboxValid(_)):_.renderPass==="sky"&&function(J,te,ae,ue,pe){const le=J.context,Se=le.gl,ce=J.transform,ge=J.useProgram("skybox");le.activeTexture.set(Se.TEXTURE0),Se.bindTexture(Se.TEXTURE_CUBE_MAP,te.skyboxTexture);const _e=(($e,Ee,Ae,De,nt)=>({u_matrix:$e,u_sun_direction:Ee,u_cubemap:0,u_opacity:De,u_temporal_offset:nt}))(ce.skyboxMatrix,te.getCenter(J,!1),0,ue,pe);J.prepareDrawProgram(le,ge),ge.draw(le,Se.TRIANGLES,ae,r.StencilMode.disabled,J.colorModeForRenderPass(),r.CullFaceMode.backCW,_e,"skybox",te.skyboxGeometry.vertexBuffer,te.skyboxGeometry.indexBuffer,te.skyboxGeometry.segment)}(_,f,q,M,Y):j==="gradient"&&_.renderPass==="sky"&&function(J,te,ae,ue,pe){const le=J.context,Se=le.gl,ce=J.transform,ge=J.useProgram("skyboxGradient");te.skyboxGeometry||(te.skyboxGeometry=new xc(le)),le.activeTexture.set(Se.TEXTURE0);let _e=te.colorRampTexture;_e||(_e=te.colorRampTexture=new r.Texture(le,te.colorRamp,Se.RGBA)),_e.bind(Se.LINEAR,Se.CLAMP_TO_EDGE);const $e=((Ee,Ae,De,nt,at)=>({u_matrix:Ee,u_color_ramp:0,u_center_direction:Ae,u_radius:r.degToRad(De),u_opacity:nt,u_temporal_offset:at}))(ce.skyboxMatrix,te.getCenter(J,!1),te.paint.get("sky-gradient-radius"),ue,pe);J.prepareDrawProgram(le,ge),ge.draw(le,Se.TRIANGLES,ae,r.StencilMode.disabled,J.colorModeForRenderPass(),r.CullFaceMode.backCW,$e,"skyboxGradient",te.skyboxGeometry.vertexBuffer,te.skyboxGeometry.indexBuffer,te.skyboxGeometry.segment)}(_,f,q,M,Y)},debug:function(_,o,f){for(let b=0;b<f.length;b++)ga(_,o,f[b])},custom:function(_,o,f){const b=_.context,T=f.implementation;if(_.transform.projection.unsupportedLayers&&_.transform.projection.unsupportedLayers.includes("custom"))r.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if(_.renderPass==="offscreen"){const M=T.prerender;M&&(_.setCustomLayerDefaults(),b.setColorMode(_.colorModeForRenderPass()),M.call(T,b.gl,_.transform.customLayerMatrix()),b.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),b.setColorMode(_.colorModeForRenderPass()),b.setStencilMode(r.StencilMode.disabled);const M=T.renderingMode==="3d"?new r.DepthMode(_.context.gl.LEQUAL,r.DepthMode.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,r.DepthMode.ReadOnly);b.setDepthMode(M),T.render(b.gl,_.transform.customLayerMatrix()),b.setDirty(),_.setBaseState(),b.bindFramebuffer.set(null)}}};class va{constructor(o,f){this.context=new be(o),this.transform=f,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=r.SourceCache.maxUnderzooming+r.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Qt,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(o,f){const b=!!o&&!!o.terrain&&this.transform.projection.supportsTerrain;if(!(b||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new nl(this,o));const T=this._terrain;this.transform.elevation=b?T:null,T.update(o,this.transform,f)}_updateFog(o){const f=o.fog;if(!f||this.transform.projection.name==="globe"||f.getOpacity(this.transform.pitch)<1||f.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[b,T]=f.getFovAdjustedRange(this.transform._fov);if(b>T)return void(this.transform.fogCullDistSq=null);const M=b+.78*(T-b);this.transform.fogCullDistSq=M*M}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(o,f){if(this.width=o*r.exported.devicePixelRatio,this.height=f*r.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const b of this.style.order)this.style._layers[b].resize()}setup(){const o=this.context,f=new r.StructArrayLayout2i4;f.emplaceBack(0,0),f.emplaceBack(r.EXTENT,0),f.emplaceBack(0,r.EXTENT),f.emplaceBack(r.EXTENT,r.EXTENT),this.tileExtentBuffer=o.createVertexBuffer(f,r.posAttributes.members),this.tileExtentSegments=r.SegmentVector.simpleSegment(0,0,4,2);const b=new r.StructArrayLayout2i4;b.emplaceBack(0,0),b.emplaceBack(r.EXTENT,0),b.emplaceBack(0,r.EXTENT),b.emplaceBack(r.EXTENT,r.EXTENT),this.debugBuffer=o.createVertexBuffer(b,r.posAttributes.members),this.debugSegments=r.SegmentVector.simpleSegment(0,0,4,5);const T=new r.StructArrayLayout2i4;T.emplaceBack(-1,-1),T.emplaceBack(1,-1),T.emplaceBack(-1,1),T.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(T,r.posAttributes.members),this.viewportSegments=r.SegmentVector.simpleSegment(0,0,4,2);const M=new r.StructArrayLayout4i8;M.emplaceBack(0,0,0,0),M.emplaceBack(r.EXTENT,0,r.EXTENT,0),M.emplaceBack(0,r.EXTENT,0,r.EXTENT),M.emplaceBack(r.EXTENT,r.EXTENT,r.EXTENT,r.EXTENT),this.mercatorBoundsBuffer=o.createVertexBuffer(M,r.boundsAttributes.members),this.mercatorBoundsSegments=r.SegmentVector.simpleSegment(0,0,4,2);const F=new r.StructArrayLayout3ui6;F.emplaceBack(0,1,2),F.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(F);const j=new r.StructArrayLayout1ui2;for(const Y of[0,1,3,2,0])j.emplaceBack(Y);this.debugIndexBuffer=o.createIndexBuffer(j),this.emptyTexture=new r.Texture(o,new r.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),o.gl.RGBA),this.identityMat=r.create();const q=this.context.gl;this.stencilClearMode=new r.StencilMode({func:q.ALWAYS,mask:0},0,255,q.ZERO,q.ZERO,q.ZERO),this.loadTimeStamps.push(r.window.performance.now()),this.atmosphereBuffer=new Uu(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(o){return o._makeTileBoundsBuffers(this.context,this.transform.projection),o._tileBoundsBuffer?{tileBoundsBuffer:o._tileBoundsBuffer,tileBoundsIndexBuffer:o._tileBoundsIndexBuffer,tileBoundsSegments:o._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const o=this.context,f=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(o,f.TRIANGLES,r.DepthMode.disabled,this.stencilClearMode,r.ColorMode.disabled,r.CullFaceMode.disabled,Cs(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(o,f,b){if(!f||this.currentStencilSource===f.id||!o.isTileClipped()||!b||b.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let j=!1;for(const q of b)if(this._tileClippingMaskIDs[q.key]===void 0){j=!0;break}if(!j)return}this.currentStencilSource=f.id;const T=this.context,M=T.gl;this.nextStencilID+b.length>256&&this.clearStencil(),T.setColorMode(r.ColorMode.disabled),T.setDepthMode(r.DepthMode.disabled);const F=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const j of b){const q=f.getTile(j),Y=this._tileClippingMaskIDs[j.key]=this.nextStencilID++,{tileBoundsBuffer:J,tileBoundsIndexBuffer:te,tileBoundsSegments:ae}=this.getTileBoundsBuffers(q);F.draw(T,M.TRIANGLES,r.DepthMode.disabled,new r.StencilMode({func:M.ALWAYS,mask:0},Y,255,M.KEEP,M.KEEP,M.REPLACE),r.ColorMode.disabled,r.CullFaceMode.disabled,Cs(j.projMatrix),"$clipping",J,te,ae)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const o=this.nextStencilID++,f=this.context.gl;return new r.StencilMode({func:f.NOTEQUAL,mask:255},o,255,f.KEEP,f.KEEP,f.REPLACE)}stencilModeForClipping(o){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(o);const f=this.context.gl;return new r.StencilMode({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,f.KEEP,f.KEEP,f.REPLACE)}stencilConfigForOverlap(o){const f=this.context.gl,b=o.sort((F,j)=>j.overscaledZ-F.overscaledZ),T=b[b.length-1].overscaledZ,M=b[0].overscaledZ-T+1;if(M>1){this.currentStencilSource=void 0,this.nextStencilID+M>256&&this.clearStencil();const F={};for(let j=0;j<M;j++)F[j+T]=new r.StencilMode({func:f.GEQUAL,mask:255},j+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=M,[F,b]}return[{[T]:r.StencilMode.disabled},b]}colorModeForRenderPass(){const o=this.context.gl;return this._showOverdrawInspector?new r.ColorMode([o.CONSTANT_COLOR,o.ONE],new r.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?r.ColorMode.unblended:r.ColorMode.alphaBlended}depthModeForSublayer(o,f,b){if(!this.opaquePassEnabledForLayer())return r.DepthMode.disabled;const T=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new r.DepthMode(b||this.context.gl.LEQUAL,f,[T,T])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(o,f){this.style=o,this.options=f,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(r.exported.now()),this.imageManager.beginFrame();const b=this.style.order,T=this.style._sourceCaches;for(const q in T){const Y=T[q];Y.used&&Y.prepare(this.context)}const M={},F={},j={};for(const q in T){const Y=T[q];M[q]=Y.getVisibleCoordinates(),F[q]=M[q].slice().reverse(),j[q]=Y.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let q=0;q<b.length;q++)if(this.style._layers[b[q]].is3D()){this.opaquePassCutoff=q;break}if(this.terrain&&(this.terrain.updateTileBinding(j),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new r.GlobeSharedBuffers(this.context)),r.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";for(const q of b){const Y=this.style._layers[q],J=o._getLayerSourceCache(Y);if(!Y.hasOffscreenPass()||Y.isHidden(this.transform.zoom))continue;const te=J?F[J.id]:void 0;(Y.type==="custom"||Y.isSky()||te&&te.length)&&this.renderLayer(this,J,Y,te)}if(this.depthRangeFor3D=[0,1-(o.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:f.showOverdrawInspector?r.Color.black:r.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=f.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){const q=this.style._layers[b[this.currentLayer]],Y=o._getLayerSourceCache(q);if(q.isSky())continue;const J=Y?F[Y.id]:void 0;this._renderTileClippingMasks(q,Y,J),this.renderLayer(this,Y,q,J)}if(this.style.fog&&this.transform.projection.supportsFog&&function(q,Y){const J=q.context,te=J.gl,ae=q.transform,ue=new r.DepthMode(te.LEQUAL,r.DepthMode.ReadOnly,[0,1]),pe=q.useProgram("globeAtmosphere",null,ae.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),le=r.globeToMercatorTransition(ae.zoom),Se=Y.properties.get("color").toArray01(),ce=Y.properties.get("high-color").toArray01(),ge=Y.properties.get("space-color").toArray01PremultipliedAlpha(),_e=r.identity$1([]);r.rotateY$1(_e,_e,-r.degToRad(ae._center.lng)),r.rotateX$1(_e,_e,r.degToRad(ae._center.lat)),r.rotateZ$1(_e,_e,ae.angle),r.rotateX$1(_e,_e,-ae._pitch);const $e=r.fromQuat(new Float32Array(16),_e),Ee=r.mapValue(Y.properties.get("star-intensity"),0,1,0,.25),Ae=5e-4,De=r.mapValue(Y.properties.get("horizon-blend"),0,1,Ae,.25),nt=r.globeUseCustomAntiAliasing(q,J,ae)&&De===Ae?ae.worldSize/(2*Math.PI*1.025)-1:ae.globeRadius,at=q.frameCounter/1e3%1,it=r.length(ae.globeCenterInViewSpace),et=Math.sqrt(Math.pow(it,2)-Math.pow(nt,2)),Re=Math.acos(et/it),bt=((Vt,ht,rn,Ft,zt,Mt,Bt,yn,fn,Rn,nn,Sn,ti,si)=>({u_frustum_tl:Vt,u_frustum_tr:ht,u_frustum_br:rn,u_frustum_bl:Ft,u_horizon:zt,u_transition:Mt,u_fadeout_range:Bt,u_color:yn,u_high_color:fn,u_space_color:Rn,u_star_intensity:nn,u_star_size:5*r.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Sn,u_horizon_angle:ti,u_rotation_matrix:si}))(ae.frustumCorners.TL,ae.frustumCorners.TR,ae.frustumCorners.BR,ae.frustumCorners.BL,ae.frustumCorners.horizon,le,De,Se,ce,ge,Ee,at,Re,$e);q.prepareDrawProgram(J,pe);const yt=q.atmosphereBuffer;yt&&pe.draw(J,te.TRIANGLES,ue,r.StencilMode.disabled,r.ColorMode.alphaBlended,r.CullFaceMode.backCW,bt,"skybox",yt.vertexBuffer,yt.indexBuffer,yt.segments)}(this,this.style.fog),this.renderPass="sky",(r.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){const q=this.style._layers[b[this.currentLayer]],Y=o._getLayerSourceCache(q);q.isSky()&&this.renderLayer(this,Y,q,Y?F[Y.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<b.length;){const q=this.style._layers[b[this.currentLayer]],Y=o._getLayerSourceCache(q);if(q.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(q)){if(q.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const J=Y?(q.type==="symbol"?j:F)[Y.id]:void 0;this._renderTileClippingMasks(q,Y,Y?M[Y.id]:void 0),this.renderLayer(this,Y,q,J),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let q=null;r.values(this.style._layers).forEach(Y=>{const J=o._getLayerSourceCache(Y);J&&!Y.isHidden(this.transform.zoom)&&(!q||q.getSource().maxzoom<J.getSource().maxzoom)&&(q=J)}),q&&this.options.showTileBoundaries&&_a.debug(this,q,q.getVisibleCoordinates())}this.options.showPadding&&function(q){const Y=q.transform.padding;gl(q,q.transform.height-(Y.top||0),3,ko),gl(q,Y.bottom||0,3,ks),ma(q,Y.left||0,3,yc),ma(q,q.transform.width-(Y.right||0),3,Yo);const J=q.transform.centerPoint;(function(te,ae,ue,pe){Hn(te,ae-1,ue-10,2,20,pe),Hn(te,ae-10,ue-1,20,2,pe)})(q,J.x,q.transform.height-J.y,Xo)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(r.window.performance.now()),this.saveCanvasCopy())}}renderLayer(o,f,b,T){b.isHidden(this.transform.zoom)||(b.type==="background"||b.type==="sky"||b.type==="custom"||T&&T.length)&&(this.id=b.id,this.gpuTimingStart(b),o.transform.projection.unsupportedLayers&&o.transform.projection.unsupportedLayers.includes(b.type)||_a[b.type](o,f,b,T,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(o){if(!this.options.gpuTiming)return;const f=this.context.extTimerQuery;let b=this.gpuTimers[o.id];b||(b=this.gpuTimers[o.id]={calls:0,cpuTime:0,query:f.createQueryEXT()}),b.calls++,f.beginQueryEXT(f.TIME_ELAPSED_EXT,b.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const o=this.context.extTimerQuery,f=o.createQueryEXT();this.deferredRenderGpuTimeQueries.push(f),o.beginQueryEXT(o.TIME_ELAPSED_EXT,f)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const o=this.context.extTimerQuery;o.endQueryEXT(o.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const o=this.context.extTimerQuery;o.endQueryEXT(o.TIME_ELAPSED_EXT)}collectGpuTimers(){const o=this.gpuTimers;return this.gpuTimers={},o}collectDeferredRenderGpuQueries(){const o=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],o}queryGpuTimers(o){const f={};for(const b in o){const T=o[b],M=this.context.extTimerQuery,F=M.getQueryObjectEXT(T.query,M.QUERY_RESULT_EXT)/1e6;M.deleteQueryEXT(T.query),f[b]=F}return f}queryGpuTimeDeferredRender(o){if(!this.options.gpuTimingDeferredRender)return 0;const f=this.context.extTimerQuery;let b=0;for(const T of o)b+=f.getQueryObjectEXT(T,f.QUERY_RESULT_EXT)/1e6,f.deleteQueryEXT(T);return b}translatePosMatrix(o,f,b,T,M){if(!b[0]&&!b[1])return o;const F=M?T==="map"?this.transform.angle:0:T==="viewport"?-this.transform.angle:0;if(F){const Y=Math.sin(F),J=Math.cos(F);b=[b[0]*J-b[1]*Y,b[0]*Y+b[1]*J]}const j=[M?b[0]:An(f,b[0],this.transform.zoom),M?b[1]:An(f,b[1],this.transform.zoom),0],q=new Float32Array(16);return r.translate(q,o,j),q}saveTileTexture(o){const f=this._tileTextures[o.size[0]];f?f.push(o):this._tileTextures[o.size[0]]=[o]}getTileTexture(o){const f=this._tileTextures[o];return f&&f.length>0?f.pop():null}isPatternMissing(o){if(!o)return!1;if(!o.from||!o.to)return!0;const f=this.imageManager.getPattern(o.from.toString()),b=this.imageManager.getPattern(o.to.toString());return!f||!b}currentGlobalDefines(){const o=this.terrain&&this.terrain.renderingToTexture,f=this.style&&this.style.fog,b=[];return this.terrain&&!this.terrain.renderingToTexture&&b.push("TERRAIN"),f&&!o&&f.getOpacity(this.transform.pitch)!==0&&b.push("FOG"),o&&b.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&b.push("OVERDRAW_INSPECTOR"),b}useProgram(o,f,b){this.cache=this.cache||{};const T=b||[],M=this.currentGlobalDefines().concat(T),F=ca.cacheKey(o,M,f);return this.cache[F]||(this.cache[F]=new ca(this.context,o,na[o],f,Bu[o],M)),this.cache[F]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=r.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new r.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(o,f,b){if(this.terrain&&this.terrain.renderingToTexture)return;const T=this.style.fog;if(T){const M=T.getOpacity(this.transform.pitch),F=((j,q,Y,J,te,ae,ue,pe,le,Se,ce)=>{const ge=j.transform,_e=q.properties.get("color").toArray01();_e[3]=J;const $e=j.frameCounter/1e3%1;return{u_fog_matrix:Y?ge.calculateFogTileMatrix(Y):j.identityMat,u_fog_range:q.getFovAdjustedRange(ge._fov),u_fog_color:_e,u_fog_horizon_blend:q.properties.get("horizon-blend"),u_fog_temporal_offset:$e,u_frustum_tl:te,u_frustum_tr:ae,u_frustum_br:ue,u_frustum_bl:pe,u_globe_pos:le,u_globe_radius:Se,u_viewport:ce,u_globe_transition:r.globeToMercatorTransition(ge.zoom),u_is_globe:+(ge.projection.name==="globe")}})(this,T,b,M,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*r.exported.devicePixelRatio,this.transform.height*r.exported.devicePixelRatio]);f.setFogUniformValues(o,F)}}setTileLoadedFlag(o){this.tileLoaded=o}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const o=this.context.gl,f=o.createTexture();return o.bindTexture(o.TEXTURE_2D,f),o.copyTexImage2D(o.TEXTURE_2D,0,o.RGBA,0,0,o.drawingBufferWidth,o.drawingBufferHeight,0),f}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const o=this.style&&this.style.fog;return!!o&&o.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const o=this._backgroundTiles,f=this._backgroundTiles={},b=this.transform.coveringTiles({tileSize:512});for(const T of b)f[T.key]=o[T.key]||new r.Tile(T,512,this.transform.tileZoom,this);return f}clearBackgroundTiles(){this._backgroundTiles={}}}class Ro{constructor(o=0,f=0,b=0,T=0){if(isNaN(o)||o<0||isNaN(f)||f<0||isNaN(b)||b<0||isNaN(T)||T<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=f,this.left=b,this.right=T}interpolate(o,f,b){return f.top!=null&&o.top!=null&&(this.top=r.number(o.top,f.top,b)),f.bottom!=null&&o.bottom!=null&&(this.bottom=r.number(o.bottom,f.bottom,b)),f.left!=null&&o.left!=null&&(this.left=r.number(o.left,f.left,b)),f.right!=null&&o.right!=null&&(this.right=r.number(o.right,f.right,b)),this}getCenter(o,f){const b=r.clamp((this.left+o-this.right)/2,0,o),T=r.clamp((this.top+f-this.bottom)/2,0,f);return new r.pointGeometry(b,T)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new Ro(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function ya(_,o){const f=r.getColumn(_,3);r.fromQuat(_,o),r.setColumn(_,3,f)}function Rs(_,o){const f=r.identity$1([]);return r.rotateZ$1(f,f,-o),r.rotateX$1(f,f,-_),f}function ba(_,o){const f=[_[0],_[1],0],b=[o[0],o[1],0];if(r.length(f)>=1e-15){const F=r.normalize([],f);r.scale$2(b,F,r.dot(b,F)),o[0]=b[0],o[1]=b[1]}const T=r.cross([],o,_);if(r.len(T)<1e-15)return null;const M=Math.atan2(-T[1],T[0]);return Rs(Math.atan2(Math.sqrt(_[0]*_[0]+_[1]*_[1]),-_[2]),M)}class $s{constructor(o,f){this.position=o,this.orientation=f}get position(){return this._position}set position(o){if(o){const f=o instanceof r.MercatorCoordinate?o:new r.MercatorCoordinate(o[0],o[1],o[2]);this._renderWorldCopies&&(f.x=r.wrap(f.x,0,1)),this._position=f}else this._position=null}lookAtPoint(o,f){if(this.orientation=null,!this.position)return;const b=this._elevation?this._elevation.getAtPointOrZero(r.MercatorCoordinate.fromLngLat(o)):0,T=this.position,M=r.MercatorCoordinate.fromLngLat(o,b),F=[M.x-T.x,M.y-T.y,M.z-T.z];f||(f=[0,0,1]),f[2]=Math.abs(f[2]),this.orientation=ba(F,f)}setPitchBearing(o,f){this.orientation=Rs(r.degToRad(o),r.degToRad(-f))}}class Qo{constructor(o,f){this._transform=r.identity([]),this.orientation=f,this.position=o}get mercatorPosition(){const o=this.position;return new r.MercatorCoordinate(o[0],o[1],o[2])}get position(){const o=r.getColumn(this._transform,3);return[o[0],o[1],o[2]]}set position(o){var f;o&&r.setColumn(this._transform,3,[(f=o)[0],f[1],f[2],1])}get orientation(){return this._orientation}set orientation(o){this._orientation=o||r.identity$1([]),o&&ya(this._transform,this._orientation)}getPitchBearing(){const o=this.forward(),f=this.right();return{bearing:Math.atan2(-f[1],f[0]),pitch:Math.atan2(Math.sqrt(o[0]*o[0]+o[1]*o[1]),-o[2])}}setPitchBearing(o,f){this._orientation=Rs(o,f),ya(this._transform,this._orientation)}forward(){const o=r.getColumn(this._transform,2);return[-o[0],-o[1],-o[2]]}up(){const o=r.getColumn(this._transform,1);return[-o[0],-o[1],-o[2]]}right(){const o=r.getColumn(this._transform,0);return[o[0],o[1],o[2]]}getCameraToWorld(o,f){const b=new Float64Array(16);return r.invert(b,this.getWorldToCamera(o,f)),b}getWorldToCameraPosition(o,f,b){const T=this.position;r.scale$2(T,T,-o);const M=new Float64Array(16);return r.fromScaling(M,[b,b,b]),r.translate(M,M,T),M[10]*=f,M}getWorldToCamera(o,f){const b=new Float64Array(16),T=new Float64Array(4),M=this.position;return r.conjugate(T,this._orientation),r.scale$2(M,M,-o),r.fromQuat(b,T),r.translate(b,b,M),b[1]*=-1,b[5]*=-1,b[9]*=-1,b[13]*=-1,b[8]*=f,b[9]*=f,b[10]*=f,b[11]*=f,b}getCameraToClipPerspective(o,f,b,T){const M=new Float64Array(16);return r.perspective(M,o,f,b,T),M}getDistanceToElevation(o){const f=o===0?0:r.mercatorZfromAltitude(o,this.position[1]),b=this.forward();return(f-this.position[2])/b[2]}clone(){return new Qo([...this.position],[...this.orientation])}}function Wt(_,o){const f=Ms(_.projection,_.zoom,_.width,_.height),b=function(M,F,j,q,Y){const J=new r.LngLat(j.lng-180*$o,j.lat),te=new r.LngLat(j.lng+180*$o,j.lat),ae=M.project(J.lng,J.lat),ue=M.project(te.lng,te.lat),pe=-Math.atan2(ue.y-ae.y,ue.x-ae.x),le=r.MercatorCoordinate.fromLngLat(j);le.y=r.clamp(le.y,-.999975,.999975);const Se=le.toLngLat(),ce=M.project(Se.lng,Se.lat),ge=r.MercatorCoordinate.fromLngLat(Se);ge.x+=$o;const _e=ge.toLngLat(),$e=M.project(_e.lng,_e.lat),Ee=Mo($e.x-ce.x,$e.y-ce.y,pe),Ae=r.MercatorCoordinate.fromLngLat(Se);Ae.y+=$o;const De=Ae.toLngLat(),nt=M.project(De.lng,De.lat),at=Mo(nt.x-ce.x,nt.y-ce.y,pe),it=Math.abs(Ee.x)/Math.abs(at.y),et=r.identity([]);r.rotateZ(et,et,-pe*(1-(Y?0:q)));const Re=r.identity([]);return r.scale(Re,Re,[1,1-(1-it)*q,1]),Re[4]=-at.x/at.y*q,r.rotateZ(Re,Re,pe),r.multiply(Re,et,Re),Re}(_.projection,0,_.center,f,o),T=xr(_);return r.scale(b,b,[T,T,1]),b}function xr(_){const o=_.projection,f=Ms(_.projection,_.zoom,_.width,_.height),b=_l(o,_.center),T=_l(o,r.LngLat.convert(o.center));return Math.pow(2,b*f+(1-f)*T)}function Ms(_,o,f,b,T=1/0){const M=_.range;if(!M)return 0;const F=Math.min(T,Math.max(f,b)),j=Math.log(F/1024)/Math.LN2;return r.smoothstep(M[0]+j,M[1]+j,o)}const $o=1/4e4;function _l(_,o){const f=r.clamp(o.lat,-r.MAX_MERCATOR_LATITUDE,r.MAX_MERCATOR_LATITUDE),b=new r.LngLat(o.lng-180*$o,f),T=new r.LngLat(o.lng+180*$o,f),M=_.project(b.lng,f),F=_.project(T.lng,f),j=r.MercatorCoordinate.fromLngLat(b),q=r.MercatorCoordinate.fromLngLat(T),Y=F.x-M.x,J=F.y-M.y,te=q.x-j.x,ae=q.y-j.y,ue=Math.sqrt((te*te+ae*ae)/(Y*Y+J*J));return Math.log(ue)/Math.LN2}function Mo(_,o,f){const b=Math.cos(f),T=Math.sin(f);return{x:_*b-o*T,y:_*T+o*b}}class xa{constructor(o,f,b,T,M,F,j){this.tileSize=512,this._renderWorldCopies=M===void 0||M,this._minZoom=o||0,this._maxZoom=f||22,this._minPitch=b==null?0:b,this._maxPitch=T==null?60:T,this.setProjection(F),this.setMaxBounds(j),this.width=0,this.height=0,this._center=new r.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Ro,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Qo,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._projectionScaler=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const o=new xa(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return o._elevation=this._elevation,o._centerAltitude=this._centerAltitude,o._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,o.tileSize=this.tileSize,o.width=this.width,o.height=this.height,o.cameraElevationReference=this.cameraElevationReference,o._center=this._center,o._setZoom(this.zoom),o._seaLevelZoom=this._seaLevelZoom,o.angle=this.angle,o._fov=this._fov,o._pitch=this._pitch,o._nearZ=this._nearZ,o._farZ=this._farZ,o._averageElevation=this._averageElevation,o._unmodified=this._unmodified,o._edgeInsets=this._edgeInsets.clone(),o._camera=this._camera.clone(),o._calcMatrices(),o.freezeTileCoverage=this.freezeTileCoverage,o.frustumCorners=this.frustumCorners,o}get elevation(){return this._elevation}set elevation(o){this._elevation!==o&&(this._elevation=o,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(o){const f=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||f)&&this._updateCameraOnTerrain(),(o||f)&&this._constrainCameraAltitude(),this._calcMatrices()}getProjection(){return r.pick(this.projection,["name","center","parallels"])}setProjection(o){this.projectionOptions=o||{name:"mercator"};const f=this.projection?this.getProjection():void 0;this.projection=r.getProjection(this.projectionOptions);const b=!y(f,this.getProjection());return b&&this._calcMatrices(),b}get minZoom(){return this._minZoom}set minZoom(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))}get maxZoom(){return this._maxZoom}set maxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))}get minPitch(){return this._minPitch}set minPitch(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))}get maxPitch(){return this._maxPitch}set maxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const o=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(o))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return r.mercatorZfromAltitude(this.center.lat,this.cameraWorldSize)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new r.pointGeometry(this.width,this.height)}get bearing(){return r.wrap(this.rotation,-180,180)}set bearing(o){this.rotation=o}get rotation(){return-this.angle/Math.PI*180}set rotation(o){const f=-o*Math.PI/180;var b;this.angle!==f&&(this._unmodified=!1,this.angle=f,this._calcMatrices(),this.rotationMatrix=(b=new r.ARRAY_TYPE(4),r.ARRAY_TYPE!=Float32Array&&(b[1]=0,b[2]=0),b[0]=1,b[3]=1,b),function(T,M,F){var j=M[0],q=M[1],Y=M[2],J=M[3],te=Math.sin(F),ae=Math.cos(F);T[0]=j*ae+Y*te,T[1]=q*ae+J*te,T[2]=j*-te+Y*ae,T[3]=q*-te+J*ae}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(o){const f=r.clamp(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==f&&(this._unmodified=!1,this._pitch=f,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=o/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(o){this._averageElevation=o,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(o){const f=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==f&&(this._unmodified=!1,this._setZoom(f),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(o){this._zoom=o,this.scale=this.zoomScale(o),this.tileZoom=Math.floor(o),this.zoomFraction=o-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const o=this._elevation;this._centerAltitude=o.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=o.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const o=this._elevation,f=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],b=this.horizonLineFromTop();let T=0,M=0;for(let F=0;F<f.length;F++){const j=new r.pointGeometry(f[F][0]*this.width,b+f[F][1]*(this.height-b)),q=o.pointCoordinate(j);if(!q)continue;const Y=1/Math.hypot(q[0]-this._camera.position[0],q[1]-this._camera.position[1]);T+=q[3]*Y,M+=Y}return M===0?NaN:T/M}get center(){return this._center}set center(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const o=this._seaLevelZoom,f=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),b=this.pixelsPerMeter/this.worldSize*f,T=this._mercatorZfromZoom(o),M=this._mercatorZfromZoom(this._maxZoom),F=Math.max(T-b,M);this._setZoom(this._zoomFromMercatorZ(F))}get padding(){return this._edgeInsets.toJSON()}set padding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}computeZoomRelativeTo(o){const f=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,o.toAltitude()));let b;b=o.z<this._camera.position[2]?[f.x,f.y,f.z]:[o.x,o.y,o.z];const T=r.length(r.sub([],this._camera.position,b));return r.clamp(this._zoomFromMercatorZ(T),this._minZoom,this._maxZoom)}setFreeCameraOptions(o){if(!this.height||!o.position&&!o.orientation)return;this._updateCameraState();let f=!1;if(o.orientation&&!r.exactEquals(o.orientation,this._camera.orientation)&&(f=this._setCameraOrientation(o.orientation)),o.position){const b=[o.position.x,o.position.y,o.position.z];r.exactEquals$1(b,this._camera.position)||(this._setCameraPosition(b),f=!0)}f&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const o=this._camera.position,f=new $s;return f.position=new r.MercatorCoordinate(o[0],o[1],o[2]),f.orientation=this._camera.orientation,f._elevation=this.elevation,f._renderWorldCopies=this.renderWorldCopies,f}_setCameraOrientation(o){if(!r.length$1(o))return!1;r.normalize$1(o,o);const f=r.transformQuat([],[0,0,-1],o),b=r.transformQuat([],[0,-1,0],o);if(b[2]<0)return!1;const T=ba(f,b);return!!T&&(this._camera.orientation=T,!0)}_setCameraPosition(o){const f=this.zoomScale(this.minZoom)*this.tileSize,b=this.zoomScale(this.maxZoom)*this.tileSize,T=this.cameraToCenterDistance;o[2]=r.clamp(o[2],T/b,T/f),this._camera.position=o}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,f,b){this._unmodified=!1,this._edgeInsets.interpolate(o,f,b),this._constrain(),this._calcMatrices()}coveringZoomLevel(o){const f=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,f)}getVisibleUnwrappedCoordinates(o){const f=[new r.UnwrappedTileID(0,o)];if(this.renderWorldCopies){const b=this.pointCoordinate(new r.pointGeometry(0,0)),T=this.pointCoordinate(new r.pointGeometry(this.width,0)),M=this.pointCoordinate(new r.pointGeometry(this.width,this.height)),F=this.pointCoordinate(new r.pointGeometry(0,this.height)),j=Math.floor(Math.min(b.x,T.x,M.x,F.x)),q=Math.floor(Math.max(b.x,T.x,M.x,F.x)),Y=1;for(let J=j-Y;J<=q+Y;J++)J!==0&&f.push(new r.UnwrappedTileID(J,o))}return f}coveringTiles(o){let f=this.coveringZoomLevel(o);const b=f,T=this.elevation&&!o.isTerrainDEM,M=this.projection.name==="mercator";if(o.minzoom!==void 0&&f<o.minzoom)return[];o.maxzoom!==void 0&&f>o.maxzoom&&(f=o.maxzoom);const F=this.locationCoordinate(this.center),j=this.center.lat,q=1<<f,Y=[q*F.x,q*F.y,0],J=this.projection.name==="globe",te=!J,ae=r.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,f,te),ue=J?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),pe=q*r.mercatorZfromAltitude(1,this.center.lat),le=this._camera.position[2]/r.mercatorZfromAltitude(1,this.center.lat),Se=[q*ue.x,q*ue.y,le*(te?1:pe)],ce=this.cameraToCenterDistance/o.tileSize*(o.roundZoom?1:.502),ge=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?f:0,_e=o.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,$e=o.isTerrainDEM?-_e:this._elevation?this._elevation.getMinElevationBelowMSL():0,Ee=this.projection.isReprojectedInTileSpace?xr(this):1,Ae=ht=>{const Ft=new r.MercatorCoordinate(ht.x+25e-6,ht.y,ht.z),zt=new r.MercatorCoordinate(ht.x,ht.y+25e-6,ht.z),Mt=ht.toLngLat(),Bt=Ft.toLngLat(),yn=zt.toLngLat(),fn=this.locationCoordinate(Mt),Rn=this.locationCoordinate(Bt),nn=this.locationCoordinate(yn),Sn=Math.hypot(Rn.x-fn.x,Rn.y-fn.y),ti=Math.hypot(nn.x-fn.x,nn.y-fn.y);return Math.sqrt(Sn*ti)*Ee/25e-6},De=ht=>{const rn=_e,Ft=$e;return{aabb:r.tileAABB(this,q,0,0,0,ht,Ft,rn,this.projection),zoom:0,x:0,y:0,minZ:Ft,maxZ:rn,wrap:ht,fullyVisible:!1}},nt=[];let at=[];const it=f,et=o.reparseOverscaled?b:f,Re=ht=>ht*ht,bt=Re((le-this._centerAltitude)*pe),yt=ht=>{if(!this._elevation||!ht.tileID||!M)return;const rn=this._elevation.getMinMaxForTile(ht.tileID),Ft=ht.aabb;rn?(Ft.min[2]=rn.min,Ft.max[2]=rn.max,Ft.center[2]=(Ft.min[2]+Ft.max[2])/2):(ht.shouldSplit=Vt(ht),ht.shouldSplit||(Ft.min[2]=Ft.max[2]=Ft.center[2]=this._centerAltitude))},Vt=ht=>{if(ht.zoom<ge)return!0;if(ht.zoom===it)return!1;if(ht.shouldSplit!=null)return ht.shouldSplit;const rn=ht.aabb.distanceX(Se),Ft=ht.aabb.distanceY(Se);let zt=bt,Mt=1;if(J){zt=Re(ht.aabb.distanceZ(Se));const yn=Math.pow(2,ht.zoom),fn=r.latFromMercatorY((ht.y+1)/yn),Rn=r.latFromMercatorY(ht.y/yn),nn=Math.min(Math.max(j,fn),Rn),Sn=r.circumferenceAtLatitude(nn)/r.circumferenceAtLatitude(j);if(Mt=nn===j?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Sn/this._mercatorScaleRatio),this.zoom<=r.GLOBE_ZOOM_THRESHOLD_MIN&&ht.zoom===it-1&&Sn>=.9)return!0}else if(T&&(zt=Re(ht.aabb.distanceZ(Se)*pe)),this.projection.isReprojectedInTileSpace&&b<=5){const yn=Math.pow(2,ht.zoom),fn=Ae(new r.MercatorCoordinate((ht.x+.5)/yn,(ht.y+.5)/yn));Mt=fn>.85?1:fn}const Bt=rn*rn+Ft*Ft+zt;return Bt<Re((1<<it-ht.zoom)*ce*Mt*((yn,fn)=>{if(fn*Re(.707)<yn)return 1;const Rn=Math.sqrt(fn/yn);return Rn/(1.4144271570014144+(Math.pow(1.1,Rn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(zt,bt),Bt))};if(this.renderWorldCopies)for(let ht=1;ht<=3;ht++)nt.push(De(-ht)),nt.push(De(ht));for(nt.push(De(0));nt.length>0;){const ht=nt.pop(),rn=ht.x,Ft=ht.y;let zt=ht.fullyVisible;if(!zt){const Mt=ht.aabb.intersects(ae);if(Mt===0)continue;zt=Mt===2}if(ht.zoom!==it&&Vt(ht))for(let Mt=0;Mt<4;Mt++){const Bt=(rn<<1)+Mt%2,yn=(Ft<<1)+(Mt>>1),fn={aabb:M?ht.aabb.quadrant(Mt):r.tileAABB(this,q,ht.zoom+1,Bt,yn,ht.wrap,ht.minZ,ht.maxZ,this.projection),zoom:ht.zoom+1,x:Bt,y:yn,wrap:ht.wrap,fullyVisible:zt,tileID:void 0,shouldSplit:void 0,minZ:ht.minZ,maxZ:ht.maxZ};T&&!J&&(fn.tileID=new r.OverscaledTileID(ht.zoom+1===it?et:ht.zoom+1,ht.wrap,ht.zoom+1,Bt,yn),yt(fn)),nt.push(fn)}else{const Mt=ht.zoom===it?et:ht.zoom;if(o.minzoom&&o.minzoom>Mt)continue;const Bt=Y[0]-(.5+rn+(ht.wrap<<ht.zoom))*(1<<f-ht.zoom),yn=Y[1]-.5-Ft,fn=ht.tileID?ht.tileID:new r.OverscaledTileID(Mt,ht.wrap,ht.zoom,rn,Ft);at.push({tileID:fn,distanceSq:Bt*Bt+yn*yn})}}if(this.fogCullDistSq){const ht=this.fogCullDistSq,rn=this.horizonLineFromTop();at=at.filter(Ft=>{const zt=[0,0,0,1],Mt=[r.EXTENT,r.EXTENT,0,1],Bt=this.calculateFogTileMatrix(Ft.tileID.toUnwrapped());r.transformMat4$1(zt,zt,Bt),r.transformMat4$1(Mt,Mt,Bt);const yn=r.getAABBPointSquareDist(zt,Mt);if(yn===0)return!0;let fn=!1;const Rn=this._elevation;if(Rn&&yn>ht&&rn!==0){const nn=this.calculateProjMatrix(Ft.tileID.toUnwrapped());let Sn;o.isTerrainDEM||(Sn=Rn.getMinMaxForTile(Ft.tileID)),Sn||(Sn={min:$e,max:_e});const ti=r.furthestTileCorner(this.rotation),si=[ti[0]*r.EXTENT,ti[1]*r.EXTENT,Sn.max];r.transformMat4(si,si,nn),fn=(1-si[1])*this.height*.5<rn}return yn<ht||fn})}return at.sort((ht,rn)=>ht.distanceSq-rn.distanceSq).map(ht=>ht.tileID)}resize(o,f){this.width=o,this.height=f,this.pixelsToGLUnits=[2/o,-2/f],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(o){return Math.pow(2,o)}scaleZoom(o){return Math.log(o)/Math.LN2}project(o){const f=r.clamp(o.lat,-r.MAX_MERCATOR_LATITUDE,r.MAX_MERCATOR_LATITUDE),b=this.projection.project(o.lng,f);return new r.pointGeometry(b.x*this.worldSize,b.y*this.worldSize)}unproject(o){return this.projection.unproject(o.x/this.worldSize,o.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(o,f){let b,T;const M=this.centerPoint;if(this.projection.name==="globe"){const j=this.worldSize;b=(f.x-M.x)/j,T=(f.y-M.y)/j}else{const j=this.pointCoordinate(f),q=this.pointCoordinate(M);b=j.x-q.x,T=j.y-q.y}const F=this.locationCoordinate(o);this.setLocation(new r.MercatorCoordinate(F.x-b,F.y-T))}setLocation(o){this.center=this.coordinateLocation(o),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(o){return this.projection.locationPoint(this,o)}locationPoint3D(o){return this.projection.locationPoint(this,o,!0)}pointLocation(o){return this.coordinateLocation(this.pointCoordinate(o))}pointLocation3D(o){return this.coordinateLocation(this.pointCoordinate3D(o))}locationCoordinate(o,f){const b=f?r.mercatorZfromAltitude(f,o.lat):void 0,T=this.projection.project(o.lng,o.lat);return new r.MercatorCoordinate(T.x,T.y,b)}coordinateLocation(o){return this.projection.unproject(o.x,o.y)}pointRayIntersection(o,f){const b=f!=null?f:this._centerAltitude,T=[o.x,o.y,0,1],M=[o.x,o.y,1,1];r.transformMat4$1(T,T,this.pixelMatrixInverse),r.transformMat4$1(M,M,this.pixelMatrixInverse);const F=M[3];r.scale$1(T,T,1/T[3]),r.scale$1(M,M,1/F);const j=T[2],q=M[2];return{p0:T,p1:M,t:j===q?0:(b-j)/(q-j)}}screenPointToMercatorRay(o){const f=[o.x,o.y,0,1],b=[o.x,o.y,1,1];return r.transformMat4$1(f,f,this.pixelMatrixInverse),r.transformMat4$1(b,b,this.pixelMatrixInverse),r.scale$1(f,f,1/f[3]),r.scale$1(b,b,1/b[3]),f[2]=r.mercatorZfromAltitude(f[2],this._center.lat)*this.worldSize,b[2]=r.mercatorZfromAltitude(b[2],this._center.lat)*this.worldSize,r.scale$1(f,f,1/this.worldSize),r.scale$1(b,b,1/this.worldSize),new r.Ray([f[0],f[1],f[2]],r.normalize([],r.sub([],b,f)))}rayIntersectionCoordinate(o){const{p0:f,p1:b,t:T}=o,M=r.mercatorZfromAltitude(f[2],this._center.lat),F=r.mercatorZfromAltitude(b[2],this._center.lat);return new r.MercatorCoordinate(r.number(f[0],b[0],T)/this.worldSize,r.number(f[1],b[1],T)/this.worldSize,r.number(M,F,T))}pointCoordinate(o,f=this._centerAltitude){return this.projection.pointCoordinate(this,o.x,o.y,f)}pointCoordinate3D(o){if(!this.elevation)return this.pointCoordinate(o);let f=this.projection.pointCoordinate3D(this,o.x,o.y);if(f)return new r.MercatorCoordinate(f[0],f[1],f[2]);let b=0,T=this.horizonLineFromTop();if(o.y>T)return this.pointCoordinate(o);const M=.02*T,F=o.clone();for(let j=0;j<10&&T-b>M;j++){F.y=r.number(b,T,.66);const q=this.projection.pointCoordinate3D(this,F.x,F.y);q?(T=F.y,f=q):b=F.y}return f?new r.MercatorCoordinate(f[0],f[1],f[2]):this.pointCoordinate(o)}isPointAboveHorizon(o){return this.projection.isPointAboveHorizon(this,o)}_coordinatePoint(o,f){const b=f&&this.elevation?this.elevation.getAtPointOrZero(o,this._centerAltitude):this._centerAltitude,T=[o.x*this.worldSize,o.y*this.worldSize,b+o.toAltitude(),1];return r.transformMat4$1(T,T,this.pixelMatrix),T[3]>0?new r.pointGeometry(T[0]/T[3],T[1]/T[3]):new r.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBounds(o,f){const b=new r.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),T=new r.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),M=new r.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),F=new r.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let j=this.pointCoordinate(b,o),q=this.pointCoordinate(T,o);const Y=this.pointCoordinate(M,f),J=this.pointCoordinate(F,f),te=(ae,ue)=>(ue.y-ae.y)/(ue.x-ae.x);return j.y>1&&q.y>=0?j=new r.MercatorCoordinate((1-J.y)/te(J,j)+J.x,1):j.y<0&&q.y<=1&&(j=new r.MercatorCoordinate(-J.y/te(J,j)+J.x,0)),q.y>1&&j.y>=0?q=new r.MercatorCoordinate((1-Y.y)/te(Y,q)+Y.x,1):q.y<0&&j.y<=1&&(q=new r.MercatorCoordinate(-Y.y/te(Y,q)+Y.x,0)),new r.LngLatBounds().extend(this.coordinateLocation(j)).extend(this.coordinateLocation(q)).extend(this.coordinateLocation(J)).extend(this.coordinateLocation(Y))}_getBounds3D(){const o=this.elevation;if(!o.visibleDemTiles.length)return this._getBounds(0,0);const f=o.visibleDemTiles.reduce((b,T)=>{if(T.dem){const M=T.dem.tree;b.min=Math.min(b.min,M.minimums[0]),b.max=Math.max(b.max,M.maximums[0])}return b},{min:Number.MAX_VALUE,max:0});return this._getBounds(f.min*o.exaggeration(),f.max*o.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(o=!0){const f=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,b=this.height/2-f*(1-this._horizonShift);return o?Math.max(0,b):b}getMaxBounds(){return this.maxBounds}setMaxBounds(o){this.maxBounds=o,this.minLat=-r.MAX_MERCATOR_LATITUDE,this.maxLat=r.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,o&&(this.minLat=o.getSouth(),this.maxLat=o.getNorth(),this.minLng=o.getWest(),this.maxLng=o.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=r.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=r.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=r.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=r.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(o,f){return this.projection.createTileMatrix(this,f,o)}calculateDistanceTileData(o){const f=o.key,b=this._distanceTileDataCache;if(b[f])return b[f];const T=o.canonical,M=1/this.height,F=this.cameraWorldSize/this.zoomScale(T.z),j=(T.x+Math.pow(2,T.z)*o.wrap)*F,q=T.y*F,Y=this.point,J=this.angle,te=Math.sin(-J),ae=-Math.cos(-J);return b[f]={bearing:[te,ae],center:[(Y.x-j)*M,(Y.y-q)*M],scale:F/r.EXTENT*M},b[f]}calculateFogTileMatrix(o){const f=o.key,b=this._fogTileMatrixCache;if(b[f])return b[f];const T=this.projection.createTileMatrix(this,this.cameraWorldSize,o);return r.multiply(T,this.worldToFogMatrix,T),b[f]=new Float32Array(T),b[f]}calculateProjMatrix(o,f=!1){const b=o.key,T=f?this._alignedProjMatrixCache:this._projMatrixCache;if(T[b])return T[b];const M=this.calculatePosMatrix(o,this.worldSize);return r.multiply(M,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:f?this.alignedProjMatrix:this.projMatrix,M),T[b]=new Float32Array(M),T[b]}calculatePixelsToTileUnitsMatrix(o){const f=o.tileID.key,b=this._pixelsToTileUnitsCache;if(b[f])return b[f];const T=function(M,F){const{scale:j}=M.tileTransform,q=j*r.EXTENT/(M.tileSize*Math.pow(2,F.zoom-M.tileID.overscaledZ+M.tileID.canonical.z));return Y=new Float32Array(4),ae=(J=F.inverseAdjustmentMatrix)[1],ue=J[2],pe=J[3],Se=(te=[q,q])[1],Y[0]=J[0]*(le=te[0]),Y[1]=ae*le,Y[2]=ue*Se,Y[3]=pe*Se,Y;var Y,J,te,ae,ue,pe,le,Se}(o,this);return b[f]=T,b[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const o=this._elevation;this._updateCameraState();const f=r.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,b=this._computeCameraPosition(f),T=this._camera.forward(),M=r.mercatorZfromAltitude(1,this._center.lat);b[2]/=M,T[2]/=M,r.normalize(T,T);const F=o.raycast(b,T,o.exaggeration());if(F){const j=r.scaleAndAdd([],b,T,F),q=new r.MercatorCoordinate(j[0],j[1],r.mercatorZfromAltitude(j[2],r.latFromMercatorY(j[1]))),Y=(q.z+r.length([q.x-b[0],q.y-b[1],q.z-b[2]*M]))*this._projectionScaler;this._seaLevelZoom=this._zoomFromMercatorZ(Y),this._centerAltitude=q.toAltitude(),this._center=this.coordinateLocation(q),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const o=this._elevation;this._updateCameraState();const f=r.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,b=this._computeCameraPosition(f),T=o.getAtPointOrZero(new r.MercatorCoordinate(...b)),M=this._minimumHeightOverTerrain()*Math.cos(r.degToRad(this._maxPitch)),F=this._camera.position[2]-this.pixelsPerMeter/this.worldSize*T;if(F<M){const j=this.locationCoordinate(this._center,this._centerAltitude),q=[j.x-b[0],j.y-b[1],j.z-b[2]],Y=r.length(q);q[2]-=(M-F)/this._projectionScaler;const J=r.length(q);if(J===0)return;r.scale$2(q,q,Y/J*this._projectionScaler),this._camera.position=[j.x-q[0],j.y-q[1],j.z*this._projectionScaler-q[2]],this._camera.orientation=ba(q,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;if(this._constraining=!0,this.projection.isReprojectedInTileSpace){const te=this.center;return te.lat=r.clamp(te.lat,this.minLat,this.maxLat),!this.maxBounds&&this.renderWorldCopies||(te.lng=r.clamp(te.lng,this.minLng,this.maxLng)),this.center=te,void(this._constraining=!1)}const o=this._unmodified,{x:f,y:b}=this.point;let T=0,M=f,F=b;const j=this.width/2,q=this.height/2,Y=this.worldMinY*this.scale,J=this.worldMaxY*this.scale;if(b-q<Y&&(F=Y+q),b+q>J&&(F=J-q),J-Y<this.height&&(T=Math.max(T,this.height/(J-Y)),F=(J+Y)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const te=this.worldMinX*this.scale,ae=this.worldMaxX*this.scale,ue=this.worldSize/2-(te+ae)/2;M=(f+ue+this.worldSize)%this.worldSize-ue,M-j<te&&(M=te+j),M+j>ae&&(M=ae-j),ae-te<this.width&&(T=Math.max(T,this.width/(ae-te)),M=(ae+te)/2)}M===f&&F===b||(this.center=this.unproject(new r.pointGeometry(M,F))),T&&(this.zoom+=this.scaleZoom(T)),this._constrainCameraAltitude(),this._unmodified=o,this._constraining=!1}_minZoomForBounds(){let o=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(o=Math.max(o,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),o}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const o=this.centerOffset,f=this.pixelsPerMeter;if(this.projection.name==="globe"){const Ee=r.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,Ae=r.mercatorZfromAltitude(1,r.GLOBE_SCALE_MATCH_LATITUDE)*this.worldSize;this._mercatorScaleRatio=Ee/Ae}const b=Ms(this.projection,this.zoom,this.width,this.height,1024);this._projectionScaler=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,b),this.cameraToCenterDistance=this.getCameraToCenterDistance(this.projection),this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const T=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?f:1),M=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);M[8]=2*-o.x/this.width,M[9]=2*o.y/this.height;let F=r.mul([],M,T);if(this.projection.isReprojectedInTileSpace){const Ee=this.locationCoordinate(this.center),Ae=r.identity([]);r.translate(Ae,Ae,[Ee.x*this.worldSize,Ee.y*this.worldSize,0]),r.multiply(Ae,Ae,Wt(this)),r.translate(Ae,Ae,[-Ee.x*this.worldSize,-Ee.y*this.worldSize,0]),r.multiply(F,F,Ae),this.inverseAdjustmentMatrix=function(De){const nt=Wt(De,!0);return Ce([],[nt[0],nt[1],nt[4],nt[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=r.scale([],F,[this.worldSize,this.worldSize,this.worldSize/f,1]),this.projMatrix=F,this.invProjMatrix=r.invert(new Float64Array(16),this.projMatrix);const j=r.invert([],M);this.frustumCorners=r.FrustumCorners.fromInvProjectionMatrix(j,this.horizonLineFromTop(),this.height);const q=new Float32Array(16);r.identity(q),r.scale(q,q,[1,-1,1]),r.rotateX(q,q,this._pitch),r.rotateZ(q,q,this.angle);const Y=r.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),J=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;Y[8]=2*-o.x/this.width,Y[9]=2*(o.y+J)/this.height,this.skyboxMatrix=r.multiply(q,Y,q);const te=this.point,ae=te.x,ue=te.y,pe=this.width%2/2,le=this.height%2/2,Se=Math.cos(this.angle),ce=Math.sin(this.angle),ge=ae-Math.round(ae)+Se*pe+ce*le,_e=ue-Math.round(ue)+Se*le+ce*pe,$e=new Float64Array(F);if(r.translate($e,$e,[ge>.5?ge-1:ge,_e>.5?_e-1:_e,0]),this.alignedProjMatrix=$e,F=r.create(),r.scale(F,F,[this.width/2,-this.height/2,1]),r.translate(F,F,[1,-1,0]),this.labelPlaneMatrix=F,F=r.create(),r.scale(F,F,[1,-1,1]),r.translate(F,F,[-1,-1,0]),r.scale(F,F,[2/this.width,2/this.height,1]),this.glCoordMatrix=F,this.pixelMatrix=r.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},F=r.invert(new Float64Array(16),this.pixelMatrix),!F)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=F,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=r.calculateGlobeMatrix(this);const Ee=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=r.transformMat4(Ee,Ee,T),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=F;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const o=this.cameraWorldSize,f=this.cameraPixelsPerMeter,b=this._camera.position,T=1/this.height/this._projectionScaler,M=[o,o,f];r.scale$2(M,M,T),r.scale$2(b,b,-1),r.multiply$2(b,b,M);const F=r.create();r.translate(F,F,b),r.scale(F,F,M),this.mercatorFogMatrix=F,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(o,f,T)}_computeCameraPosition(o){const f=(o=o||this.pixelsPerMeter)/this.pixelsPerMeter,b=this._camera.forward(),T=this.point,M=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*f-o/this.worldSize*this._centerAltitude;return[T.x/this.worldSize-b[0]*M,T.y/this.worldSize-b[1]*M,o/this.worldSize*this._centerAltitude-b[2]*M]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(o){const f=this._maxCameraBoundsDistance()*Math.cos(this._pitch),b=o[2];let T=1;b>0&&(T=Math.min((f-this._camera.position[2])/b,1)),this._camera.position=r.scaleAndAdd([],this._camera.position,o,T),this._updateStateFromCamera(),this.projection.wrap&&(this.center=this.center.wrap())}_updateStateFromCamera(){const o=this._camera.position,f=this._camera.forward(),{pitch:b,bearing:T}=this._camera.getPitchBearing(),M=r.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._projectionScaler,F=this._mercatorZfromZoom(this._maxZoom)*Math.cos(r.degToRad(this._maxPitch)),j=Math.max((o[2]-M)/Math.cos(b),F),q=this._zoomFromMercatorZ(j);r.scaleAndAdd(o,o,f,j),this._pitch=r.clamp(b,r.degToRad(this.minPitch),r.degToRad(this.maxPitch)),this.angle=r.wrap(T,-Math.PI,Math.PI),this._setZoom(r.clamp(q,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new r.MercatorCoordinate(o[0],o[1],o[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(o){return Math.pow(2,o)*this.tileSize}_mercatorZfromZoom(o){return this.cameraToCenterDistance/this._worldSizeFromZoom(o)}_minimumHeightOverTerrain(){const o=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(o)}_zoomFromMercatorZ(o){return this.scaleZoom(this.cameraToCenterDistance/(o*this.tileSize))}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(r.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(o,f){const b=Math.min(o.x,f.x),T=Math.max(o.x,f.x),M=Math.min(o.y,f.y),F=Math.max(o.y,f.y);if(M<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const j=[new r.pointGeometry(b,M),new r.pointGeometry(T,F),new r.pointGeometry(b,F),new r.pointGeometry(T,M)],q=this.renderWorldCopies?-3:0,Y=this.renderWorldCopies?4:1;for(const J of j){const te=this.pointRayIntersection(J);if(te.t<0)return!0;const ae=this.rayIntersectionCoordinate(te);if(ae.x<q||ae.y<0||ae.x>Y||ae.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+r.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new r.pointGeometry(0,0),new r.pointGeometry(this.width,this.height))}zoomDeltaToMovement(o,f){const b=r.length(r.sub([],this._camera.position,o)),T=this._zoomFromMercatorZ(b)+f;return b-this._mercatorZfromZoom(T)}getCameraPoint(){if(this.projection.name==="globe"){const o=function(f,b){const T=[f[0],f[1],f[2],1];r.transformMat4$1(T,T,b);const M=Math.max(T[3],1e-6);return[T[0]/M,T[1]/M,T[2]/M,M]}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new r.pointGeometry(o[0],o[1])}{const o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new r.pointGeometry(0,o))}}getCameraToCenterDistance(o){const f=Ms(o,this.zoom,this.width,this.height,1024),b=o.pixelSpaceConversion(this.center.lat,this.worldSize,f);return .5/Math.tan(.5*this._fov)*this.height*b}}function Is(_,o){let f=!1,b=null;const T=()=>{b=null,f&&(_(),b=setTimeout(T,o),f=!1)};return()=>(f=!0,b||T(),b)}class vl{constructor(o){this._hashName=o&&encodeURIComponent(o),r.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Is(this._updateHashUnthrottled.bind(this),300)}addTo(o){return this._map=o,r.window.addEventListener("hashchange",this._onHashChange,!1),o.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),r.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(o){const f=this._map;if(!f)return"";const b=f.getCenter(),T=Math.round(100*f.getZoom())/100,M=Math.ceil((T*Math.LN2+Math.log(512/360/.5))/Math.LN10),F=Math.pow(10,M),j=Math.round(b.lng*F)/F,q=Math.round(b.lat*F)/F,Y=f.getBearing(),J=f.getPitch();let te="";if(te+=o?`/${j}/${q}/${T}`:`${T}/${q}/${j}`,(Y||J)&&(te+="/"+Math.round(10*Y)/10),J&&(te+=`/${Math.round(J)}`),this._hashName){const ae=this._hashName;let ue=!1;const pe=r.window.location.hash.slice(1).split("&").map(le=>{const Se=le.split("=")[0];return Se===ae?(ue=!0,`${Se}=${te}`):le}).filter(le=>le);return ue||pe.push(`${ae}=${te}`),`#${pe.join("&")}`}return`#${te}`}_getCurrentHash(){const o=r.window.location.hash.replace("#","");if(this._hashName){let f;return o.split("&").map(b=>b.split("=")).forEach(b=>{b[0]===this._hashName&&(f=b)}),(f&&f[1]||"").split("/")}return o.split("/")}_onHashChange(){const o=this._map;if(!o)return!1;const f=this._getCurrentHash();if(f.length>=3&&!f.some(b=>isNaN(b))){const b=o.dragRotate.isEnabled()&&o.touchZoomRotate.isEnabled()?+(f[3]||0):o.getBearing();return o.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:b,pitch:+(f[4]||0)}),!0}return!1}_updateHashUnthrottled(){const o=r.window.location.href.replace(/(#.+)?$/,this.getHashString());r.window.history.replaceState(r.window.history.state,null,o)}}const Io={linearity:.3,easing:r.bezier(0,0,.3,1)},Ec=r.extend({deceleration:2500,maxSpeed:1400},Io),Cc=r.extend({deceleration:20,maxSpeed:1400},Io),es=r.extend({deceleration:1e3,maxSpeed:360},Io),ju=r.extend({deceleration:1e3,maxSpeed:90},Io);class Gu{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:r.exported.now(),settings:o})}_drainInertiaBuffer(){const o=this._inertiaBuffer,f=r.exported.now();for(;o.length>0&&f-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const f={zoom:0,bearing:0,pitch:0,pan:new r.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:M}of this._inertiaBuffer)f.zoom+=M.zoomDelta||0,f.bearing+=M.bearingDelta||0,f.pitch+=M.pitchDelta||0,M.panDelta&&f.pan._add(M.panDelta),M.around&&(f.around=M.around),M.pinchAround&&(f.pinchAround=M.pinchAround);const b=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,T={};if(f.pan.mag()){const M=No(f.pan.mag(),b,r.extend({},Ec,o||{}));T.offset=f.pan.mult(M.amount/f.pan.mag()),T.center=this._map.transform.center,Ns(T,M)}if(f.zoom){const M=No(f.zoom,b,Cc);T.zoom=this._map.transform.zoom+M.amount,Ns(T,M)}if(f.bearing){const M=No(f.bearing,b,es);T.bearing=this._map.transform.bearing+r.clamp(M.amount,-179,179),Ns(T,M)}if(f.pitch){const M=No(f.pitch,b,ju);T.pitch=this._map.transform.pitch+M.amount,Ns(T,M)}if(T.zoom||T.bearing){const M=f.pinchAround===void 0?f.around:f.pinchAround;T.around=M?this._map.unproject(M):this._map.getCenter()}return this.clear(),T.noMoveStart=!0,T}}function Ns(_,o){(!_.duration||_.duration<o.duration)&&(_.duration=o.duration,_.easing=o.easing)}function No(_,o,f){const{maxSpeed:b,linearity:T,deceleration:M}=f,F=r.clamp(_*T/(o/1e3),-b,b),j=Math.abs(F)/(M*T);return{easing:f.easing,duration:1e3*j,amount:F*(j/2)}}class nr extends r.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,f,b,T={}){const M=W(f.getCanvasContainer(),b),F=f.unproject(M);super(o,r.extend({point:M,lngLat:F,originalEvent:b},T)),this._defaultPrevented=!1,this.target=f}}class Ls extends r.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,f,b){const T=o==="touchend"?b.changedTouches:b.touches,M=ne(f.getCanvasContainer(),T),F=M.map(q=>f.unproject(q)),j=M.reduce((q,Y,J,te)=>q.add(Y.div(te.length)),new r.pointGeometry(0,0));super(o,{points:M,point:j,lngLats:F,lngLat:f.unproject(j),originalEvent:b}),this._defaultPrevented=!1}}class Sc extends r.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,f,b){super(o,{originalEvent:b}),this._defaultPrevented=!1}}class wa{constructor(o,f){this._map=o,this._clickTolerance=f.clickTolerance}reset(){this._mousedownPos=void 0}wheel(o){return this._firePreventable(new Sc(o.type,this._map,o))}mousedown(o,f){return this._mousedownPos=f,this._firePreventable(new nr(o.type,this._map,o))}mouseup(o){this._map.fire(new nr(o.type,this._map,o))}preclick(o){const f=r.extend({},o);f.type="preclick",this._map.fire(new nr(f.type,this._map,f))}click(o,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||(this.preclick(o),this._map.fire(new nr(o.type,this._map,o)))}dblclick(o){return this._firePreventable(new nr(o.type,this._map,o))}mouseover(o){this._map.fire(new nr(o.type,this._map,o))}mouseout(o){this._map.fire(new nr(o.type,this._map,o))}touchstart(o){return this._firePreventable(new Ls(o.type,this._map,o))}touchmove(o){this._map.fire(new Ls(o.type,this._map,o))}touchend(o){this._map.fire(new Ls(o.type,this._map,o))}touchcancel(o){this._map.fire(new Ls(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class yl{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(o){this._map.fire(new nr(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new nr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._map.fire(new nr(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Tc{constructor(o,f){this._map=o,this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=f.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,f){this.isEnabled()&&o.shiftKey&&o.button===0&&(V(),this._startPos=this._lastPos=f,this._active=!0)}mousemoveWindow(o,f){if(!this._active)return;const b=f;if(this._lastPos.equals(b)||!this._box&&b.dist(this._startPos)<this._clickTolerance)return;const T=this._startPos;this._lastPos=b,this._box||(this._box=S("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",o));const M=Math.min(T.x,b.x),F=Math.max(T.x,b.x),j=Math.min(T.y,b.y),q=Math.max(T.y,b.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${M}px,${j}px)`,this._box.style.width=F-M+"px",this._box.style.height=q-j+"px")})}mouseupWindow(o,f){if(!this._active||o.button!==0)return;const b=this._startPos,T=f;if(this.reset(),Z(),b.x!==T.x||b.y!==T.y)return this._map.fire(new r.Event("boxzoomend",{originalEvent:o})),{cameraAnimation:M=>M.fitScreenCoordinates(b,T,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",o)}keydown(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),z(),delete this._startPos,delete this._lastPos}_fireEvent(o,f){return this._map.fire(new r.Event(o,{originalEvent:f}))}}function Ea(_,o){const f={};for(let b=0;b<_.length;b++)f[_[b].identifier]=o[b];return f}class Ac{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(o,f,b){(this.centroid||b.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=o.timeStamp),b.length===this.numTouches&&(this.centroid=function(T){const M=new r.pointGeometry(0,0);for(const F of T)M._add(F);return M.div(T.length)}(f),this.touches=Ea(b,f)))}touchmove(o,f,b){if(this.aborted||!this.centroid)return;const T=Ea(b,f);for(const M in this.touches){const F=this.touches[M],j=T[M];(!j||j.dist(F)>30)&&(this.aborted=!0)}}touchend(o,f,b){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),b.length===0){const T=!this.aborted&&this.centroid;if(this.reset(),T)return T}}}class Ca{constructor(o){this.singleTap=new Ac(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(o,f,b){this.singleTap.touchstart(o,f,b)}touchmove(o,f,b){this.singleTap.touchmove(o,f,b)}touchend(o,f,b){const T=this.singleTap.touchend(o,f,b);if(T){const M=o.timeStamp-this.lastTime<500,F=!this.lastTap||this.lastTap.dist(T)<30;if(M&&F||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=T,this.count===this.numTaps)return this.reset(),T}}}class kc{constructor(){this._zoomIn=new Ca({numTouches:1,numTaps:2}),this._zoomOut=new Ca({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,f,b){this._zoomIn.touchstart(o,f,b),this._zoomOut.touchstart(o,f,b)}touchmove(o,f,b){this._zoomIn.touchmove(o,f,b),this._zoomOut.touchmove(o,f,b)}touchend(o,f,b){const T=this._zoomIn.touchend(o,f,b),M=this._zoomOut.touchend(o,f,b);return T?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:F=>F.easeTo({duration:300,zoom:F.getZoom()+1,around:F.unproject(T)},{originalEvent:o})}):M?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:F=>F.easeTo({duration:300,zoom:F.getZoom()-1,around:F.unproject(M)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const ts={0:1,2:2};class Sa{constructor(o){this.reset(),this._clickTolerance=o.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(o,f){return!1}_move(o,f){return{}}mousedown(o,f){if(this._lastPoint)return;const b=re(o);this._correctButton(o,b)&&(this._lastPoint=f,this._eventButton=b)}mousemoveWindow(o,f){const b=this._lastPoint;if(b){if(o.preventDefault(),this._eventButton!=null&&function(T,M){const F=ts[M];return T.buttons===void 0||(T.buttons&F)!==F}(o,this._eventButton))this.reset();else if(this._moved||!(f.dist(b)<this._clickTolerance))return this._moved=!0,this._lastPoint=f,this._move(b,f)}}mouseupWindow(o){this._lastPoint&&re(o)===this._eventButton&&(this._moved&&Z(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Rc extends Sa{mousedown(o,f){super.mousedown(o,f),this._lastPoint&&(this._active=!0)}_correctButton(o,f){return f===0&&!o.ctrlKey}_move(o,f){return{around:f,panDelta:f.sub(o)}}}class bl extends Sa{_correctButton(o,f){return f===0&&o.ctrlKey||f===2}_move(o,f){const b=.8*(f.x-o.x);if(b)return this._active=!0,{bearingDelta:b}}contextmenu(o){o.preventDefault()}}class xl extends Sa{_correctButton(o,f){return f===0&&o.ctrlKey||f===2}_move(o,f){const b=-.5*(f.y-o.y);if(b)return this._active=!0,{pitchDelta:b}}contextmenu(o){o.preventDefault()}}class $c{constructor(o,f){this._map=o,this._el=o.getCanvasContainer(),this._minTouches=1,this._clickTolerance=f.clickTolerance||1,this.reset(),r.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new r.pointGeometry(0,0)}touchstart(o,f,b){return this._calculateTransform(o,f,b)}touchmove(o,f,b){if(this._active&&!(b.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(b.length===1)return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return o.preventDefault(),this._calculateTransform(o,f,b)}}touchend(o,f,b){this._calculateTransform(o,f,b),this._active&&b.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,f,b){b.length>0&&(this._active=!0);const T=Ea(b,f),M=new r.pointGeometry(0,0),F=new r.pointGeometry(0,0);let j=0;for(const Y in T){const J=T[Y],te=this._touches[Y];te&&(M._add(J),F._add(J.sub(te)),j++,T[Y]=J)}if(this._touches=T,j<this._minTouches||!F.mag())return;const q=F.div(j);return this._sum._add(q),this._sum.mag()<this._clickTolerance?void 0:{around:M.div(j),panDelta:q}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=S("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility==="hidden"&&(this._alertContainer.style.visibility="visible"),this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show")},500)}}class Ta{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(o){}_move(o,f,b){return{}}touchstart(o,f,b){this._firstTwoTouches||b.length<2||(this._firstTwoTouches=[b[0].identifier,b[1].identifier],this._start([f[0],f[1]]))}touchmove(o,f,b){const T=this._firstTwoTouches;if(!T)return;o.preventDefault();const[M,F]=T,j=Vi(b,f,M),q=Vi(b,f,F);if(!j||!q)return;const Y=this._aroundCenter?null:j.add(q).div(2);return this._move([j,q],Y,o)}touchend(o,f,b){if(!this._firstTwoTouches)return;const[T,M]=this._firstTwoTouches,F=Vi(b,f,T),j=Vi(b,f,M);F&&j||(this._active&&Z(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Vi(_,o,f){for(let b=0;b<_.length;b++)if(_[b].identifier===f)return o[b]}function Mc(_,o){return Math.log(_/o)/Math.LN2}class Ic extends Ta{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,f){const b=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(Mc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Mc(this._distance,b),pinchAround:f}}}function Nc(_,o){return 180*_.angleWith(o)/Math.PI}class qu extends Ta{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,f){const b=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Nc(this._vector,b),pinchAround:f}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());const f=25/(Math.PI*this._minDiameter)*360,b=Nc(o,this._startVector);return Math.abs(b)<f}}function Nr(_){return Math.abs(_.y)>Math.abs(_.x)}class Lc extends Ta{constructor(o){super(),this._map=o}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(o){this._lastPoints=o,Nr(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,f,b){const T=this._lastPoints;if(!T)return;const M=o[0].sub(T[0]),F=o[1].sub(T[1]);return this._map._cooperativeGestures&&b.touches.length<3||(this._valid=this.gestureBeginsVertically(M,F,b.timeStamp),!this._valid)?void 0:(this._lastPoints=o,this._active=!0,{pitchDelta:(M.y+F.y)/2*-.5})}gestureBeginsVertically(o,f,b){if(this._valid!==void 0)return this._valid;const T=o.mag()>=2,M=f.mag()>=2;if(!T&&!M)return;if(!T||!M)return this._firstMove==null&&(this._firstMove=b),b-this._firstMove<100&&void 0;const F=o.y>0==f.y>0;return Nr(o)&&Nr(f)&&F}}const ns={panStep:100,bearingStep:15,pitchStep:10};class Vr{constructor(){const o=ns;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let f=0,b=0,T=0,M=0,F=0;switch(o.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:o.shiftKey?b=-1:(o.preventDefault(),M=-1);break;case 39:o.shiftKey?b=1:(o.preventDefault(),M=1);break;case 38:o.shiftKey?T=1:(o.preventDefault(),F=-1);break;case 40:o.shiftKey?T=-1:(o.preventDefault(),F=1);break;default:return}return this._rotationDisabled&&(b=0,T=0),{cameraAnimation:j=>{const q=j.getZoom();j.easeTo({duration:300,easeId:"keyboardHandler",easing:Aa,zoom:f?Math.round(q)+f*(o.shiftKey?2:1):q,bearing:j.getBearing()+b*this._bearingStep,pitch:j.getPitch()+T*this._pitchStep,offset:[-M*this._panStep,-F*this._panStep],center:j.getCenter()},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Aa(_){return _*(2-_)}const Zt=4.000244140625;class Oc{constructor(o,f){this._map=o,this._el=o.getCanvasContainer(),this._handler=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,r.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert","_isFullscreen"],this)}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!o&&o.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(o){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(o.ctrlKey||o.metaKey||this.isZooming()||this._isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let f=o.deltaMode===r.window.WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY;const b=r.exported.now(),T=b-(this._lastWheelEventTime||0);this._lastWheelEventTime=b,f!==0&&f%Zt==0?this._type="wheel":f!==0&&Math.abs(f)<4?this._type="trackpad":T>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(T*f)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),o.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=o,this._delta-=f,this._active||this._start(o)),o.preventDefault()}_onTimeout(o){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(o)}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const f=W(this._el,o);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:f,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const o=this._map.transform,f=()=>o._terrainEnabled()&&this._aroundCoord?o.computeZoomRelativeTo(this._aroundCoord):o.zoom;if(this._delta!==0){const q=this._type==="wheel"&&Math.abs(this._delta)>Zt?this._wheelZoomRate:this._defaultZoomRate;let Y=2/(1+Math.exp(-Math.abs(this._delta*q)));this._delta<0&&Y!==0&&(Y=1/Y);const J=f(),te=Math.pow(2,J),ae=typeof this._targetZoom=="number"?o.zoomScale(this._targetZoom):te;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom(ae*Y))),this._type==="wheel"&&(this._startZoom=f(),this._easing=this._smoothOutEasing(200)),this._delta=0}const b=typeof this._targetZoom=="number"?this._targetZoom:f(),T=this._startZoom,M=this._easing;let F,j=!1;if(this._type==="wheel"&&T&&M){const q=Math.min((r.exported.now()-this._lastWheelEventTime)/200,1),Y=M(q);F=r.number(T,b,Y),q<1?this._frameId||(this._frameId=!0):j=!0}else F=b,j=!0;return this._active=!0,j&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!j,zoomDelta:F-f(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let f=r.ease;if(this._prevEase){const b=this._prevEase,T=(r.exported.now()-b.start)/b.duration,M=b.easing(T+.01)-b.easing(T),F=.27/Math.sqrt(M*M+1e-4)*.01,j=Math.sqrt(.0729-F*F);f=r.bezier(F,j,.25,1)}return this._prevEase={start:r.exported.now(),duration:o,easing:f},f}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=S("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(r.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_isFullscreen(){return!!r.window.document.fullscreenElement||!!r.window.document.webkitFullscreenElement}_showBlockerAlert(){this._alertContainer.style.visibility==="hidden"&&(this._alertContainer.style.visibility="visible"),this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show")},200)}}class Pc{constructor(o,f){this._clickZoom=o,this._tapZoom=f}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Os{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(o,f){return o.preventDefault(),{cameraAnimation:b=>{b.easeTo({duration:300,zoom:b.getZoom()+(o.shiftKey?-1:1),around:b.unproject(f)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ps{constructor(){this._tap=new Ca({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(o,f,b){this._swipePoint||(this._tapTime&&o.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?b.length>0&&(this._swipePoint=f[0],this._swipeTouch=b[0].identifier):this._tap.touchstart(o,f,b))}touchmove(o,f,b){if(this._tapTime){if(this._swipePoint){if(b[0].identifier!==this._swipeTouch)return;const T=f[0],M=T.y-this._swipePoint.y;return this._swipePoint=T,o.preventDefault(),this._active=!0,{zoomDelta:M/128}}}else this._tap.touchmove(o,f,b)}touchend(o,f,b){this._tapTime?this._swipePoint&&b.length===0&&this.reset():this._tap.touchend(o,f,b)&&(this._tapTime=o.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Dc{constructor(o,f,b){this._el=o,this._mousePan=f,this._touchPan=b}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Bc{constructor(o,f,b){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=f,this._mousePitch=b}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class zc{constructor(o,f,b,T){this._el=o,this._touchZoom=f,this._touchRotate=b,this._tapDragZoom=T,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ds=_=>_.zoom||_.drag||_.pitch||_.rotate;class Fc extends r.Event{}class Vc{constructor(){this.constants=[1,1,.01],this.radius=0}setup(o,f){const b=r.sub([],f,o);this.radius=r.length(b[2]<0?r.div([],b,this.constants):[b[0],b[1],0])}projectRay(o){r.div(o,o,this.constants),r.normalize(o,o),r.mul$1(o,o,this.constants);const f=r.scale$2([],o,this.radius);if(f[2]>0){const b=r.scale$2([],[0,0,1],r.dot(f,[0,0,1])),T=r.scale$2([],r.normalize([],[f[0],f[1],0]),this.radius),M=r.add([],f,r.scale$2([],r.sub([],r.add([],T,b),f),2));f[0]=M[0],f[1]=M[1]}return f}}function Bs(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class ka{constructor(o,f){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Gu(o),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Vc,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(f),r.bindAll(["handleEvent","handleWindowEvent"],this);const b=this._el;this._listeners=[[b,"touchstart",{passive:!0}],[b,"touchmove",{passive:!1}],[b,"touchend",void 0],[b,"touchcancel",void 0],[b,"mousedown",void 0],[b,"mousemove",void 0],[b,"mouseup",void 0],[r.window.document,"mousemove",{capture:!0}],[r.window.document,"mouseup",void 0],[b,"mouseover",void 0],[b,"mouseout",void 0],[b,"dblclick",void 0],[b,"click",void 0],[b,"keydown",{capture:!1}],[b,"keyup",void 0],[b,"wheel",{passive:!1}],[b,"contextmenu",void 0],[r.window,"blur",void 0]];for(const[T,M,F]of this._listeners)T.addEventListener(M,T===r.window.document?this.handleWindowEvent:this.handleEvent,F)}destroy(){for(const[o,f,b]of this._listeners)o.removeEventListener(f,o===r.window.document?this.handleWindowEvent:this.handleEvent,b)}_addDefaultHandlers(o){const f=this._map,b=f.getCanvasContainer();this._add("mapEvent",new wa(f,o));const T=f.boxZoom=new Tc(f,o);this._add("boxZoom",T);const M=new kc,F=new Os;f.doubleClickZoom=new Pc(F,M),this._add("tapZoom",M),this._add("clickZoom",F);const j=new Ps;this._add("tapDragZoom",j);const q=f.touchPitch=new Lc(f);this._add("touchPitch",q);const Y=new bl(o),J=new xl(o);f.dragRotate=new Bc(o,Y,J),this._add("mouseRotate",Y,["mousePitch"]),this._add("mousePitch",J,["mouseRotate"]);const te=new Rc(o),ae=new $c(f,o);f.dragPan=new Dc(b,te,ae),this._add("mousePan",te),this._add("touchPan",ae,["touchZoom","touchRotate"]);const ue=new qu,pe=new Ic;f.touchZoomRotate=new zc(b,pe,ue,j),this._add("touchRotate",ue,["touchPan","touchZoom"]),this._add("touchZoom",pe,["touchPan","touchRotate"]),this._add("blockableMapEvent",new yl(f));const le=f.scrollZoom=new Oc(f,this);this._add("scrollZoom",le,["mousePan"]);const Se=f.keyboard=new Vr;this._add("keyboard",Se);for(const ce of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])o.interactive&&o[ce]&&f[ce].enable(o[ce])}_add(o,f,b){this._handlers.push({handlerName:o,handler:f,allowed:b}),this._handlersById[o]=f}stop(o){if(!this._updatingCamera){for(const{handler:f}of this._handlers)f.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}}isActive(){for(const{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ds(this._eventsInProgress)||this.isZooming()}_blockedByActive(o,f,b){for(const T in o)if(T!==b&&(!f||f.indexOf(T)<0))return!0;return!1}handleWindowEvent(o){this.handleEvent(o,`${o.type}Window`)}_getMapTouches(o){const f=[];for(const b of o)this._el.contains(b.target)&&f.push(b);return f}handleEvent(o,f){this._updatingCamera=!0;const b=o.type==="renderFrame",T=b?void 0:o,M={needsRenderFrame:!1},F={},j={},q=o.touches?this._getMapTouches(o.touches):void 0,Y=q?ne(this._el,q):b?void 0:W(this._el,o);for(const{handlerName:ae,handler:ue,allowed:pe}of this._handlers){if(!ue.isEnabled())continue;let le;this._blockedByActive(j,pe,ae)?ue.reset():ue[f||o.type]&&(le=ue[f||o.type](o,Y,q),this.mergeHandlerResult(M,F,le,ae,T),le&&le.needsRenderFrame&&this._triggerRenderFrame()),(le||ue.isActive())&&(j[ae]=ue)}const J={};for(const ae in this._previousActiveHandlers)j[ae]||(J[ae]=T);this._previousActiveHandlers=j,(Object.keys(J).length||Bs(M))&&(this._changes.push([M,F,J]),this._triggerRenderFrame()),(Object.keys(j).length||Bs(M))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:te}=M;te&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],te(this._map))}mergeHandlerResult(o,f,b,T,M){if(!b)return;r.extend(o,b);const F={handlerName:T,originalEvent:b.originalEvent||M};b.zoomDelta!==void 0&&(f.zoom=F),b.panDelta!==void 0&&(f.drag=F),b.pitchDelta!==void 0&&(f.pitch=F),b.bearingDelta!==void 0&&(f.rotate=F)}_applyChanges(){const o={},f={},b={};for(const[T,M,F]of this._changes)T.panDelta&&(o.panDelta=(o.panDelta||new r.pointGeometry(0,0))._add(T.panDelta)),T.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+T.zoomDelta),T.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+T.bearingDelta),T.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+T.pitchDelta),T.around!==void 0&&(o.around=T.around),T.aroundCoord!==void 0&&(o.aroundCoord=T.aroundCoord),T.pinchAround!==void 0&&(o.pinchAround=T.pinchAround),T.noInertia&&(o.noInertia=T.noInertia),r.extend(f,M),r.extend(b,F);this._updateMapTransform(o,f,b),this._changes=[]}_updateMapTransform(o,f,b){const T=this._map,M=T.transform,F=ge=>[ge.x,ge.y,ge.z];if((ge=>{const _e=this._eventsInProgress.drag;return _e&&!this._handlersById[_e.handlerName].isActive()})()&&!Bs(o)){const ge=M.zoom;M.cameraElevationReference="sea",M.recenterOnTerrain(),M.cameraElevationReference="ground",ge!==M.zoom&&this._map._update(!0)}if(!Bs(o))return void this._fireEvents(f,b,!0);let{panDelta:j,zoomDelta:q,bearingDelta:Y,pitchDelta:J,around:te,aroundCoord:ae,pinchAround:ue}=o;ue!==void 0&&(te=ue),(ge=>f.drag&&!this._eventsInProgress.drag)()&&te&&(this._dragOrigin=F(M.pointCoordinate3D(te)),this._trackingEllipsoid.setup(M._camera.position,this._dragOrigin)),M.cameraElevationReference="sea",T._stop(!0),te=te||T.transform.centerPoint,Y&&(M.bearing+=Y),J&&(M.pitch+=J),M._updateCameraState();const pe=[0,0,0];if(j){const ge=M.pointCoordinate(te);if(M.projection.name==="globe"){const _e=r.latFromMercatorY(ge.y),$e=M.center.lat,Ee=Math.min(r.mercatorZfromAltitude(1,_e)/r.mercatorZfromAltitude(1,$e),2);j=j.rotate(-M.angle),pe[0]=-j.x/M.worldSize*Ee,pe[1]=-j.y/M.worldSize*Ee}else{const _e=M.pointCoordinate(te.sub(j));ge&&_e&&(pe[0]=_e.x-ge.x,pe[1]=_e.y-ge.y)}}const le=M.zoom,Se=[0,0,0];if(q){const ge=F(ae||M.pointCoordinate3D(te)),_e={dir:r.normalize([],r.sub([],ge,M._camera.position))};if(_e.dir[2]<0){const $e=M.zoomDeltaToMovement(ge,q);r.scale$2(Se,_e.dir,$e)}}const ce=r.add(pe,pe,Se);M._translateCameraConstrained(ce),q&&Math.abs(M.zoom-le)>1e-4&&M.recenterOnTerrain(),M.cameraElevationReference="ground",this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(f,b,!0)}_fireEvents(o,f,b){const T=Ds(this._eventsInProgress),M=Ds(o),F={};for(const J in o){const{originalEvent:te}=o[J];this._eventsInProgress[J]||(F[`${J}start`]=te),this._eventsInProgress[J]=o[J]}!T&&M&&this._fireEvent("movestart",M.originalEvent);for(const J in F)this._fireEvent(J,F[J]);M&&this._fireEvent("move",M.originalEvent);for(const J in o){const{originalEvent:te}=o[J];this._fireEvent(J,te)}const j={};let q;for(const J in this._eventsInProgress){const{handlerName:te,originalEvent:ae}=this._eventsInProgress[J];this._handlersById[te].isActive()||(delete this._eventsInProgress[J],q=f[te]||ae,j[`${J}end`]=q)}for(const J in j)this._fireEvent(J,j[J]);const Y=Ds(this._eventsInProgress);if(b&&(T||M)&&!Y){this._updatingCamera=!0;const J=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),te=ae=>ae!==0&&-this._bearingSnap<ae&&ae<this._bearingSnap;J?(te(J.bearing||this._map.getBearing())&&(J.bearing=0),this._map.easeTo(J,{originalEvent:q})):(this._map.fire(new r.Event("moveend",{originalEvent:q})),te(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(o,f){this._map.fire(new r.Event(o,f?{originalEvent:f}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{this._frameId=void 0,this.handleEvent(new Fc("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Ra="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class $a extends r.Evented{constructor(o,f){super(),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=f.bearingSnap,r.bindAll(["_renderFrameCallback"],this)}getCenter(){return new r.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(o,f){return this.jumpTo({center:o},f)}panBy(o,f,b){return o=r.pointGeometry.convert(o).mult(-1),this.panTo(this.transform.center,r.extend({offset:o},f),b)}panTo(o,f,b){return this.easeTo(r.extend({center:o},f),b)}getZoom(){return this.transform.zoom}setZoom(o,f){return this.jumpTo({zoom:o},f),this}zoomTo(o,f,b){return this.easeTo(r.extend({zoom:o},f),b)}zoomIn(o,f){return this.zoomTo(this.getZoom()+1,o,f),this}zoomOut(o,f){return this.zoomTo(this.getZoom()-1,o,f),this}getBearing(){return this.transform.bearing}setBearing(o,f){return this.jumpTo({bearing:o},f),this}getPadding(){return this.transform.padding}setPadding(o,f){return this.jumpTo({padding:o},f),this}rotateTo(o,f,b){return this.easeTo(r.extend({bearing:o},f),b)}resetNorth(o,f){return this.rotateTo(0,r.extend({duration:1e3},o),f),this}resetNorthPitch(o,f){return this.easeTo(r.extend({bearing:0,pitch:0,duration:1e3},o),f),this}snapToNorth(o,f){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,f):this}getPitch(){return this.transform.pitch}setPitch(o,f){return this.jumpTo({pitch:o},f),this}cameraForBounds(o,f){this.transform.projection.name==="globe"&&r.warnOnce('Globe projection does not support cameraForBounds API, this API may behave unexpectedly."'),o=r.LngLatBounds.convert(o);const b=f&&f.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),b,f)}_extendCameraOptions(o){const f={top:0,bottom:0,right:0,left:0};if(typeof(o=r.extend({padding:f,offset:[0,0],maxZoom:this.transform.maxZoom},o)).padding=="number"){const b=o.padding;o.padding={top:b,bottom:b,right:b,left:b}}return o.padding=r.extend(f,o.padding),o}_cameraForBoxAndBearing(o,f,b,T){const M=this._extendCameraOptions(T),F=this.transform,j=F.padding,q=F.project(r.LngLat.convert(o)),Y=F.project(r.LngLat.convert(f)),J=new r.pointGeometry(q.x,Y.y),te=new r.pointGeometry(Y.x,q.y),ae=-r.degToRad(b),ue=q.rotate(ae),pe=Y.rotate(ae),le=J.rotate(ae),Se=te.rotate(ae),ce=new r.pointGeometry(Math.max(ue.x,pe.x,le.x,Se.x),Math.max(ue.y,pe.y,le.y,Se.y)),ge=new r.pointGeometry(Math.min(ue.x,pe.x,le.x,Se.x),Math.min(ue.y,pe.y,le.y,Se.y)),_e=ce.sub(ge),$e=(F.width-((j.left||0)+(j.right||0)+M.padding.left+M.padding.right))/_e.x,Ee=(F.height-((j.top||0)+(j.bottom||0)+M.padding.top+M.padding.bottom))/_e.y;if(Ee<0||$e<0)return void r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ae=Math.min(F.scaleZoom(F.scale*Math.min($e,Ee)),M.maxZoom),De=typeof M.offset.x=="number"&&typeof M.offset.y=="number"?new r.pointGeometry(M.offset.x,M.offset.y):r.pointGeometry.convert(M.offset),nt=new r.pointGeometry((M.padding.left-M.padding.right)/2,(M.padding.top-M.padding.bottom)/2).rotate(b*Math.PI/180),at=De.add(nt).mult(F.scale/F.zoomScale(Ae));return{center:F.unproject(q.add(Y).div(2).sub(at)),zoom:Ae,bearing:b}}_cameraForBox(o,f,b,T,M){const F=this._extendCameraOptions(M);b=b||0,T=T||0,o=r.LngLat.convert(o),f=r.LngLat.convert(f);const j=this.transform.clone();j.padding=F.padding;const q=this.getFreeCameraOptions(),Y=new r.LngLat(.5*(o.lng+f.lng),.5*(o.lat+f.lat)),J=.5*(b+T);if(j._camera.position[2]<r.mercatorZfromAltitude(J,Y.lat))return void r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");q.lookAtPoint(Y),j.setFreeCameraOptions(q);const te=r.MercatorCoordinate.fromLngLat(o),ae=r.MercatorCoordinate.fromLngLat(f),ue=j.pointRayIntersection(j.centerPoint,J),pe=[(le=j.rayIntersectionCoordinate(ue)).x,le.y,le.z];var le;const Se=j.screenPointToMercatorRay(j.centerPoint),ce=j.projection.name!=="globe";let ge,_e=0;do{const $e=Math.floor(j.zoom),Ee=1<<$e,Ae=Math.min(Ee*te.x,Ee*ae.x),De=Math.min(Ee*te.y,Ee*ae.y),nt=Math.max(Ee*te.x,Ee*ae.x),at=Math.max(Ee*te.y,Ee*ae.y),it=new r.Aabb([Ae,De,b],[nt,at,T]),et=r.Frustum.fromInvProjectionMatrix(j.invProjMatrix,j.worldSize,$e,ce);if(it.intersects(et)!==2){ge&&(j._camera.position=r.scaleAndAdd([],j._camera.position,Se.dir,-ge),j._updateStateFromCamera());break}const Re=r.sub([],j._camera.position,pe);ge=.5*r.length(Re),j._camera.position=r.scaleAndAdd([],j._camera.position,Se.dir,ge);try{j._updateStateFromCamera()}catch{return void r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++_e<10);return{center:j.center,zoom:j.zoom,bearing:j.bearing,pitch:j.pitch}}fitBounds(o,f,b){return this.transform.projection.name==="globe"&&r.warnOnce("Globe projection does not support fitBounds API, this API may behave unexpectedly."),this._fitInternal(this.cameraForBounds(o,f),f,b)}_raycastElevationBox(o,f){const b=this.transform.elevation;if(!b)return;const T=new r.pointGeometry(o.x,f.y),M=new r.pointGeometry(f.x,o.y),F=b.pointCoordinate(o);if(!F)return;const j=b.pointCoordinate(f);if(!j)return;const q=b.pointCoordinate(T);if(!q)return;const Y=b.pointCoordinate(M);if(!Y)return;const J=new r.MercatorCoordinate(F[0],F[1]).toLngLat(),te=new r.MercatorCoordinate(j[0],j[1]).toLngLat(),ae=new r.MercatorCoordinate(q[0],q[1]).toLngLat(),ue=new r.MercatorCoordinate(Y[0],Y[1]).toLngLat(),pe=Math.min(J.lng,Math.min(te.lng,Math.min(ae.lng,ue.lng))),le=Math.min(J.lat,Math.min(te.lat,Math.min(ae.lat,ue.lat))),Se=Math.max(J.lng,Math.max(te.lng,Math.max(ae.lng,ue.lng))),ce=Math.max(J.lat,Math.max(te.lat,Math.max(ae.lat,ue.lat))),ge=Math.min(F[3],Math.min(j[3],Math.min(q[3],Y[3]))),_e=Math.max(F[3],Math.max(j[3],Math.max(q[3],Y[3])));return{minLngLat:new r.LngLat(pe,le),maxLngLat:new r.LngLat(Se,ce),minAltitude:ge,maxAltitude:_e}}fitScreenCoordinates(o,f,b,T,M){let F,j,q,Y;this.transform.projection.name==="globe"&&r.warnOnce("Globe projection does not support fitScreenCoordinates API, this API may behave unexpectedly.");const J=r.pointGeometry.convert(o),te=r.pointGeometry.convert(f),ae=this._raycastElevationBox(J,te);if(ae)F=ae.minLngLat,j=ae.maxLngLat,q=ae.minAltitude,Y=ae.maxAltitude;else{if(this.transform.anyCornerOffEdge(J,te))return this;F=this.transform.pointLocation(J),j=this.transform.pointLocation(te)}return this._fitInternal(this.transform.pitch===0?this._cameraForBoxAndBearing(this.transform.pointLocation(r.pointGeometry.convert(o)),this.transform.pointLocation(r.pointGeometry.convert(f)),b,T):this._cameraForBox(F,j,q,Y,T),T,M)}_fitInternal(o,f,b){return o?(delete(f=r.extend(o,f)).padding,f.linear?this.easeTo(f,b):this.flyTo(f,b)):this}jumpTo(o,f){this.stop();const b=o.preloadOnly?this.transform.clone():this.transform;let T=!1,M=!1,F=!1;return"zoom"in o&&b.zoom!==+o.zoom&&(T=!0,b.zoom=+o.zoom),o.center!==void 0&&(b.center=r.LngLat.convert(o.center)),"bearing"in o&&b.bearing!==+o.bearing&&(M=!0,b.bearing=+o.bearing),"pitch"in o&&b.pitch!==+o.pitch&&(F=!0,b.pitch=+o.pitch),o.padding==null||b.isPaddingEqual(o.padding)||(b.padding=o.padding),o.preloadOnly?(this._preloadTiles(b),this):(this.fire(new r.Event("movestart",f)).fire(new r.Event("move",f)),T&&this.fire(new r.Event("zoomstart",f)).fire(new r.Event("zoom",f)).fire(new r.Event("zoomend",f)),M&&this.fire(new r.Event("rotatestart",f)).fire(new r.Event("rotate",f)).fire(new r.Event("rotateend",f)),F&&this.fire(new r.Event("pitchstart",f)).fire(new r.Event("pitch",f)).fire(new r.Event("pitchend",f)),this.fire(new r.Event("moveend",f)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||r.warnOnce(Ra),this.transform.getFreeCameraOptions()}setFreeCameraOptions(o,f){const b=this.transform;if(!b.projection.supportsFreeCamera)return r.warnOnce(Ra),this;this.stop();const T=b.zoom,M=b.pitch,F=b.bearing;b.setFreeCameraOptions(o);const j=T!==b.zoom,q=M!==b.pitch,Y=F!==b.bearing;return this.fire(new r.Event("movestart",f)).fire(new r.Event("move",f)),j&&this.fire(new r.Event("zoomstart",f)).fire(new r.Event("zoom",f)).fire(new r.Event("zoomend",f)),Y&&this.fire(new r.Event("rotatestart",f)).fire(new r.Event("rotate",f)).fire(new r.Event("rotateend",f)),q&&this.fire(new r.Event("pitchstart",f)).fire(new r.Event("pitch",f)).fire(new r.Event("pitchend",f)),this.fire(new r.Event("moveend",f)),this}easeTo(o,f){this._stop(!1,o.easeId),((o=r.extend({offset:[0,0],duration:500,easing:r.ease},o)).animate===!1||!o.essential&&r.exported.prefersReducedMotion)&&(o.duration=0);const b=this.transform,T=this.getZoom(),M=this.getBearing(),F=this.getPitch(),j=this.getPadding(),q="zoom"in o?+o.zoom:T,Y="bearing"in o?this._normalizeBearing(o.bearing,M):M,J="pitch"in o?+o.pitch:F,te="padding"in o?o.padding:b.padding,ae=r.pointGeometry.convert(o.offset);let ue,pe,le;if(b.projection.name==="globe"){const at=r.MercatorCoordinate.fromLngLat(b.center),it=ae.rotate(-b.angle);at.x+=it.x/b.worldSize,at.y+=it.y/b.worldSize;const et=at.toLngLat(),Re=r.LngLat.convert(o.center||et);this._normalizeCenter(Re),ue=b.centerPoint.add(it),pe=new r.pointGeometry(at.x,at.y).mult(b.worldSize),le=new r.pointGeometry(r.mercatorXfromLng(Re.lng),r.mercatorYfromLat(Re.lat)).mult(b.worldSize).sub(pe)}else{ue=b.centerPoint.add(ae);const at=b.pointLocation(ue),it=r.LngLat.convert(o.center||at);this._normalizeCenter(it),pe=b.project(at),le=b.project(it).sub(pe)}const Se=b.zoomScale(q-T);let ce,ge;o.around&&(ce=r.LngLat.convert(o.around),ge=b.locationPoint(ce));const _e=this._zooming||q!==T,$e=this._rotating||M!==Y,Ee=this._pitching||J!==F,Ae=!b.isPaddingEqual(te),De=at=>it=>{if(_e&&(at.zoom=r.number(T,q,it)),$e&&(at.bearing=r.number(M,Y,it)),Ee&&(at.pitch=r.number(F,J,it)),Ae&&(at.interpolatePadding(j,te,it),ue=at.centerPoint.add(ae)),ce)at.setLocationAtPoint(ce,ge);else{const et=at.zoomScale(at.zoom-T),Re=q>T?Math.min(2,Se):Math.max(.5,Se),bt=Math.pow(Re,1-it),yt=at.unproject(pe.add(le.mult(it*bt)).mult(et));at.setLocationAtPoint(at.renderWorldCopies?yt.wrap():yt,ue)}return o.preloadOnly||this._fireMoveEvents(f),at};if(o.preloadOnly){const at=this._emulate(De,o.duration,b);return this._preloadTiles(at),this}const nt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=_e,this._rotating=$e,this._pitching=Ee,this._padding=Ae,this._easeId=o.easeId,this._prepareEase(f,o.noMoveStart,nt),this._ease(De(b),at=>{b.recenterOnTerrain(),this._afterEase(f,at)},o),this}_prepareEase(o,f,b={}){this._moving=!0,this.transform.cameraElevationReference="sea",f||b.moving||this.fire(new r.Event("movestart",o)),this._zooming&&!b.zooming&&this.fire(new r.Event("zoomstart",o)),this._rotating&&!b.rotating&&this.fire(new r.Event("rotatestart",o)),this._pitching&&!b.pitching&&this.fire(new r.Event("pitchstart",o))}_fireMoveEvents(o){this.fire(new r.Event("move",o)),this._zooming&&this.fire(new r.Event("zoom",o)),this._rotating&&this.fire(new r.Event("rotate",o)),this._pitching&&this.fire(new r.Event("pitch",o))}_afterEase(o,f){if(this._easeId&&f&&this._easeId===f)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const b=this._zooming,T=this._rotating,M=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,b&&this.fire(new r.Event("zoomend",o)),T&&this.fire(new r.Event("rotateend",o)),M&&this.fire(new r.Event("pitchend",o)),this.fire(new r.Event("moveend",o))}flyTo(o,f){if(!o.essential&&r.exported.prefersReducedMotion){const zt=r.pick(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(zt,f)}this.stop(),o=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},o);const b=this.transform,T=this.getZoom(),M=this.getBearing(),F=this.getPitch(),j=this.getPadding(),q="zoom"in o?r.clamp(+o.zoom,b.minZoom,b.maxZoom):T,Y="bearing"in o?this._normalizeBearing(o.bearing,M):M,J="pitch"in o?+o.pitch:F,te="padding"in o?o.padding:b.padding,ae=b.zoomScale(q-T),ue=r.pointGeometry.convert(o.offset);let pe=b.centerPoint.add(ue);const le=b.pointLocation(pe),Se=r.LngLat.convert(o.center||le);this._normalizeCenter(Se);const ce=b.project(le),ge=b.project(Se).sub(ce);let _e=o.curve;const $e=Math.max(b.width,b.height),Ee=$e/ae,Ae=ge.mag();if("minZoom"in o){const zt=r.clamp(Math.min(o.minZoom,T,q),b.minZoom,b.maxZoom),Mt=$e/b.zoomScale(zt-T);_e=Math.sqrt(Mt/Ae*2)}const De=_e*_e;function nt(zt){const Mt=(Ee*Ee-$e*$e+(zt?-1:1)*De*De*Ae*Ae)/(2*(zt?Ee:$e)*De*Ae);return Math.log(Math.sqrt(Mt*Mt+1)-Mt)}function at(zt){return(Math.exp(zt)-Math.exp(-zt))/2}function it(zt){return(Math.exp(zt)+Math.exp(-zt))/2}const et=nt(0);let Re=function(zt){return it(et)/it(et+_e*zt)},bt=function(zt){return $e*((it(et)*(at(Mt=et+_e*zt)/it(Mt))-at(et))/De)/Ae;var Mt},yt=(nt(1)-et)/_e;if(Math.abs(Ae)<1e-6||!isFinite(yt)){if(Math.abs($e-Ee)<1e-6)return this.easeTo(o,f);const zt=Ee<$e?-1:1;yt=Math.abs(Math.log(Ee/$e))/_e,bt=function(){return 0},Re=function(Mt){return Math.exp(zt*_e*Mt)}}o.duration="duration"in o?+o.duration:1e3*yt/("screenSpeed"in o?+o.screenSpeed/_e:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0);const Vt=M!==Y,ht=J!==F,rn=!b.isPaddingEqual(te),Ft=zt=>Mt=>{const Bt=Mt*yt,yn=1/Re(Bt);zt.zoom=Mt===1?q:T+zt.scaleZoom(yn),Vt&&(zt.bearing=r.number(M,Y,Mt)),ht&&(zt.pitch=r.number(F,J,Mt)),rn&&(zt.interpolatePadding(j,te,Mt),pe=zt.centerPoint.add(ue));const fn=Mt===1?Se:zt.unproject(ce.add(ge.mult(bt(Bt))).mult(yn));return zt.setLocationAtPoint(zt.renderWorldCopies?fn.wrap():fn,pe),zt._updateCameraOnTerrain(),o.preloadOnly||this._fireMoveEvents(f),zt};if(o.preloadOnly){const zt=this._emulate(Ft,o.duration,b);return this._preloadTiles(zt),this}return this._zooming=!0,this._rotating=Vt,this._pitching=ht,this._padding=rn,this._prepareEase(f,!1),this._ease(Ft(b),()=>this._afterEase(f),o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(o,f){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const b=this._onEaseEnd;this._onEaseEnd=void 0,b.call(this,f)}if(!o){const b=this.handlers;b&&b.stop(!1)}return this}_ease(o,f,b){b.animate===!1||b.duration===0?(o(1),f()):(this._easeStart=r.exported.now(),this._easeOptions=b,this._onEaseFrame=o,this._onEaseEnd=f,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const o=Math.min((r.exported.now()-this._easeStart)/this._easeOptions.duration,1),f=this._onEaseFrame;f&&f(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(o,f){o=r.wrap(o,-180,180);const b=Math.abs(o-f);return Math.abs(o-360-f)<b&&(o-=360),Math.abs(o+360-f)<b&&(o+=360),o}_normalizeCenter(o){const f=this.transform;if(!f.renderWorldCopies||f.maxBounds)return;const b=o.lng-f.center.lng;o.lng+=b>180?-360:b<-180?360:0}_emulate(o,f,b){const T=Math.ceil(15*f/1e3),M=[],F=o(b.clone());for(let j=0;j<=T;j++){const q=F(j/T);M.push(q.clone())}return M}}class wl{constructor(o={}){this.options=o,r.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(o){const f=this.options&&this.options.compact;return this._map=o,this._container=S("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=S("button","mapboxgl-ctrl-attrib-button",this._container),S("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=S("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),f&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),f===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(o,f){const b=this._map._getUIString(`AttributionControl.${f}`);o.setAttribute("aria-label",b),o.removeAttribute("title"),o.firstElementChild&&o.firstElementChild.setAttribute("title",b)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let o=this._editLink;o||(o=this._editLink=this._container.querySelector(".mapbox-improve-map"));const f=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||r.config.ACCESS_TOKEN}];if(o){const b=f.reduce((T,M,F)=>(M.value&&(T+=`${M.key}=${M.value}${F<f.length-1?"&":""}`),T),"?");o.href=`${r.config.FEEDBACK_URL}/${b}${this._map._hash?this._map._hash.getHashString(!0):""}`,o.rel="noopener nofollow",this._setElementTitle(o,"MapFeedback")}}_updateData(o){!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let o=[];if(this._map.style.stylesheet){const T=this._map.style.stylesheet;this.styleOwner=T.owner,this.styleId=T.id}const f=this._map.style._sourceCaches;for(const T in f){const M=f[T];if(M.used){const F=M.getSource();F.attribution&&o.indexOf(F.attribution)<0&&o.push(F.attribution)}}o.sort((T,M)=>T.length-M.length),o=o.filter((T,M)=>{for(let F=M+1;F<o.length;F++)if(o[F].indexOf(T)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=[...this.options.customAttribution,...o]:o.unshift(this.options.customAttribution));const b=o.join(" | ");b!==this._attribHTML&&(this._attribHTML=b,o.length?(this._innerContainer.innerHTML=b,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class El{constructor(){r.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(o){this._map=o,this._container=S("div","mapboxgl-ctrl");const f=S("a","mapboxgl-ctrl-logo");return f.target="_blank",f.rel="noopener nofollow",f.href="https://www.mapbox.com/",f.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),f.setAttribute("rel","noopener nofollow"),this._container.appendChild(f),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(o){o&&o.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const o=this._map.style._sourceCaches;if(Object.entries(o).length===0)return!0;for(const f in o){const b=o[f].getSource();if(b.hasOwnProperty("mapbox_logo")&&!b.mapbox_logo)return!1}return!0}_updateCompact(){const o=this._container.children;if(o.length){const f=o[0];this._map.getCanvasContainer().offsetWidth<250?f.classList.add("mapboxgl-compact"):f.classList.remove("mapboxgl-compact")}}}class Cl{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){const f=++this._id;return this._queue.push({callback:o,id:f,cancelled:!1}),f}remove(o){const f=this._currentlyRunning,b=f?this._queue.concat(f):this._queue;for(const T of b)if(T.id===o)return void(T.cancelled=!0)}run(o=0){const f=this._currentlyRunning=this._queue;this._queue=[];for(const b of f)if(!b.cancelled&&(b.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Sl(_,o,f){if(_=new r.LngLat(_.lng,_.lat),o){const b=new r.LngLat(_.lng-360,_.lat),T=new r.LngLat(_.lng+360,_.lat),M=360*Math.ceil(Math.abs(_.lng-f.center.lng)/360),F=f.locationPoint(_).distSqr(o),j=o.x<0||o.y<0||o.x>f.width||o.y>f.height;f.locationPoint(b).distSqr(o)<F&&(j||Math.abs(b.lng-f.center.lng)<M)?_=b:f.locationPoint(T).distSqr(o)<F&&(j||Math.abs(T.lng-f.center.lng)<M)&&(_=T)}for(;Math.abs(_.lng-f.center.lng)>180;){const b=f.locationPoint(_);if(b.x>=0&&b.y>=0&&b.x<=f.width&&b.y<=f.height)break;_.lng>f.center.lng?_.lng-=360:_.lng+=360}return _}const Ma={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Ia extends r.Evented{constructor(o,f){if(super(),(o instanceof r.window.HTMLElement||f)&&(o=r.extend({element:o},f)),r.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),o&&o.element)this._element=o.element,this._offset=r.pointGeometry.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=S("div");const T=41,M=27,F=I("svg",{display:"block",height:T*this._scale+"px",width:M*this._scale+"px",viewBox:`0 0 ${M} ${T}`},this._element),j=I("radialGradient",{id:"shadowGradient"},I("defs",{},F));I("stop",{offset:"10%","stop-opacity":.4},j),I("stop",{offset:"100%","stop-opacity":.05},j),I("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},F),I("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},F),I("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},F),I("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},F),this._offset=r.pointGeometry.convert(o&&o.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",T=>{T.preventDefault()}),this._element.addEventListener("mousedown",T=>{T.preventDefault()});const b=this._element.classList;for(const T in Ma)b.remove(`mapboxgl-marker-anchor-${T}`);b.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(o){return o===this._map||(this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._updateMoving),o.on("moveend",this._update),o.on("remove",this._clearFadeTimer),o._addMarker(this),this.setDraggable(this._draggable),this._update(),o.on("click",this._onMapClick)),this}remove(){const o=this._map;return o&&(o.off("click",this._onMapClick),o.off("move",this._updateMoving),o.off("moveend",this._update),o.off("mousedown",this._addDragHandler),o.off("touchstart",this._addDragHandler),o.off("mouseup",this._onUp),o.off("touchend",this._onUp),o.off("mousemove",this._onMove),o.off("touchmove",this._onMove),o.off("remove",this._clearFadeTimer),o._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=r.LngLat.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){const T=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[T,-1*(38.1-13.5+T)],"bottom-right":[-T,-1*(38.1-13.5+T)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=o,o._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(o){const f=o.code,b=o.charCode||o.keyCode;f!=="Space"&&f!=="Enter"&&b!==32&&b!==13||this.togglePopup()}_onMapClick(o){const f=o.originalEvent.target,b=this._element;this._popup&&(f===b||b.contains(f))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const o=this._popup;return o?(o.isOpen()?(o.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(o.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const o=this._map;if(!o)return!1;const f=o.unproject(this._pos),b=o.getFreeCameraOptions();if(!b.position)return!1;const T=b.position.toLngLat();return T.distanceTo(f)<.9*T.distanceTo(this._lngLat)}_evaluateOpacity(){const o=this._map;if(!o)return;const f=this._pos;if(!f||f.x<0||f.x>o.transform.width||f.y<0||f.y>o.transform.height)return void this._clearFadeTimer();const b=o.unproject(f);let T;o._usingGlobe()&&r.isLngLatBehindGlobe(o.transform,this._lngLat)?T=0:(T=1-o._queryFogOpacity(b),o.transform._terrainEnabled()&&o.getTerrain()&&this._behindTerrain()&&(T*=.2)),this._element.style.opacity=`${T}`,this._element.style.pointerEvents=T>0?"auto":"none",this._popup&&this._popup._setOpacity(T),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const o=this._pos;if(!o||!this._map)return;const f=this._calculateXYTransform()+this._calculateZTransform(),b=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${o.x}px,${o.y}px) ${Ma[this._anchor]}
            ${f}
            translate(${b.x}px,${b.y}px)
        `}_calculateXYTransform(){const o=this._pos,f=this._map;if(this.getPitchAlignment()!=="map"||!f||!o)return"";if(!f._usingGlobe()){const q=f.getPitch();return q?`rotateX(${q}deg)`:""}const b=r.radToDeg(r.globeTiltAtLngLat(f.transform,this._lngLat)),T=o.sub(r.globeCenterToScreenPoint(f.transform)),M=b/(Math.abs(T.x)+Math.abs(T.y)),F=T.x*M,j=-T.y*M;return j||F?`rotateX(${j}deg) rotateY(${F}deg)`:""}_calculateZTransform(){const o=this._calculateRotation();return o?`rotateZ(${o}deg)`:""}_calculateRotation(){if(this._rotationAlignment==="viewport"||this._rotationAlignment==="auto")return this._rotation;if(this._map&&this._rotationAlignment==="map"){const o=this._map;if(this._pos&&o&&o._usingGlobe()){const f=o.project(new r.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),b=o.project(new r.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(f);return this._rotation+r.radToDeg(Math.atan2(b.y,b.x))-90}return this._rotation-this._map.getBearing()}return 0}_update(o){r.window.cancelAnimationFrame(this._updateFrameId);const f=this._map;f&&(f.transform.renderWorldCopies&&(this._lngLat=Sl(this._lngLat,this._pos,f.transform)),this._pos=f.project(this._lngLat),o===!0?this._updateFrameId=r.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),f._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(f._usingGlobe()||f.getTerrain()||f.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(o){return this._offset=r.pointGeometry.convert(o),this._update(),this}_onMove(o){const f=this._map;if(f){if(!this._isDragging){const b=this._clickTolerance||f._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=b}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=f.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new r.Event("dragstart"))),this.fire(new r.Event("drag")))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const o=this._map;o&&(o.off("mousemove",this._onMove),o.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new r.Event("dragend")),this._state="inactive"}_addDragHandler(o){const f=this._map;f&&this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos),this._pointerdownPos=o.point,this._state="pending",f.on("mousemove",this._onMove),f.on("touchmove",this._onMove),f.once("mouseup",this._onUp),f.once("touchend",this._onUp))}setDraggable(o){this._draggable=!!o;const f=this._map;return f&&(o?(f.on("mousedown",this._addDragHandler),f.on("touchstart",this._addDragHandler)):(f.off("mousedown",this._addDragHandler),f.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"?"viewport":this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}}class Uc{constructor(o){this.jumpTo(o)}getValue(o){if(o<=this._startTime)return this._start;if(o>=this._endTime)return this._end;const f=r.easeCubicInOut((o-this._startTime)/(this._endTime-this._startTime));return this._start*(1-f)+this._end*f}isEasing(o){return o>=this._startTime&&o<=this._endTime}jumpTo(o){this._startTime=-1/0,this._endTime=-1/0,this._start=o,this._end=o}easeTo(o,f,b){this._start=this.getValue(f),this._end=o,this._startTime=f,this._endTime=f+b}}const Tl={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},jc={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function Na(_){_.parentNode&&_.parentNode.removeChild(_)}const Gc={showCompass:!0,showZoom:!0,visualizePitch:!1};class qc{constructor(o,f,b=!1){this._clickTolerance=10,this.element=f,this.mouseRotate=new bl({clickTolerance:o.dragRotate._mouseRotate._clickTolerance}),this.map=o,b&&(this.mousePitch=new xl({clickTolerance:o.dragRotate._mousePitch._clickTolerance})),r.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),f.addEventListener("mousedown",this.mousedown),f.addEventListener("touchstart",this.touchstart,{passive:!1}),f.addEventListener("touchmove",this.touchmove),f.addEventListener("touchend",this.touchend),f.addEventListener("touchcancel",this.reset)}down(o,f){this.mouseRotate.mousedown(o,f),this.mousePitch&&this.mousePitch.mousedown(o,f),V()}move(o,f){const b=this.map,T=this.mouseRotate.mousemoveWindow(o,f),M=T&&T.bearingDelta;if(M&&b.setBearing(b.getBearing()+M),this.mousePitch){const F=this.mousePitch.mousemoveWindow(o,f),j=F&&F.pitchDelta;j&&b.setPitch(b.getPitch()+j)}}off(){const o=this.element;o.removeEventListener("mousedown",this.mousedown),o.removeEventListener("touchstart",this.touchstart,{passive:!1}),o.removeEventListener("touchmove",this.touchmove),o.removeEventListener("touchend",this.touchend),o.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){z(),r.window.removeEventListener("mousemove",this.mousemove),r.window.removeEventListener("mouseup",this.mouseup)}mousedown(o){this.down(r.extend({},o,{ctrlKey:!0,preventDefault:()=>o.preventDefault()}),W(this.element,o)),r.window.addEventListener("mousemove",this.mousemove),r.window.addEventListener("mouseup",this.mouseup)}mousemove(o){this.move(o,W(this.element,o))}mouseup(o){this.mouseRotate.mouseupWindow(o),this.mousePitch&&this.mousePitch.mouseupWindow(o),this.offTemp()}touchstart(o){o.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=ne(this.element,o.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>o.preventDefault()},this._startPos))}touchmove(o){o.targetTouches.length!==1?this.reset():(this._lastPos=ne(this.element,o.targetTouches)[0],this.move({preventDefault:()=>o.preventDefault()},this._lastPos))}touchend(o){o.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Al={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Hc={maxWidth:100,unit:"metric"};function kl(_,o,f){const b=Rl(o),T=b/o,M={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[f];this._map._requestDomTask(()=>{this._container.style.width=_*T+"px",this._container.innerHTML=`${b}&nbsp;${M}`})}function Rl(_){const o=Math.pow(10,`${Math.floor(_)}`.length-1);let f=_/o;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:f>=1?1:function(b){const T=Math.pow(10,Math.ceil(-Math.log(b)/Math.LN10));return Math.round(b*T)/T}(f),o*f}const $l={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ml=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function La(_=new r.pointGeometry(0,0),o="bottom"){if(typeof _=="number"){const f=Math.round(Math.sqrt(.5*Math.pow(_,2)));switch(o){case"top":return new r.pointGeometry(0,_);case"top-left":return new r.pointGeometry(f,f);case"top-right":return new r.pointGeometry(-f,f);case"bottom":return new r.pointGeometry(0,-_);case"bottom-left":return new r.pointGeometry(f,-f);case"bottom-right":return new r.pointGeometry(-f,-f);case"left":return new r.pointGeometry(_,0);case"right":return new r.pointGeometry(-_,0)}return new r.pointGeometry(0,0)}return _ instanceof r.pointGeometry||Array.isArray(_)?r.pointGeometry.convert(_):r.pointGeometry.convert(_[o]||[0,0])}const Oa={version:r.version,supported:E,setRTLTextPlugin:r.setRTLTextPlugin,getRTLTextPluginStatus:r.getRTLTextPluginStatus,Map:class extends $a{constructor(_){if((_=r.extend({},jc,_)).minZoom!=null&&_.maxZoom!=null&&_.minZoom>_.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(_.minPitch!=null&&_.maxPitch!=null&&_.minPitch>_.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(_.minPitch!=null&&_.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(_.maxPitch!=null&&_.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(_.antialias&&r.isSafariWithAntialiasingBug(r.window)&&(_.antialias=!1,r.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new xa(_.minZoom,_.maxZoom,_.minPitch,_.maxPitch,_.renderWorldCopies),_),this._interactive=_.interactive,this._minTileCacheSize=_.minTileCacheSize,this._maxTileCacheSize=_.maxTileCacheSize,this._failIfMajorPerformanceCaveat=_.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=_.preserveDrawingBuffer,this._antialias=_.antialias,this._trackResize=_.trackResize,this._bearingSnap=_.bearingSnap,this._refreshExpiredTiles=_.refreshExpiredTiles,this._fadeDuration=_.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=_.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=_.collectResourceTiming,this._optimizeForTerrain=_.optimizeForTerrain,this._language=_.language==="auto"?r.window.navigator.language:_.language,this._worldview=_.worldview,this._renderTaskQueue=new Cl,this._domRenderTaskQueue=new Cl,this._controls=[],this._markers=[],this._mapId=r.uniqueId(),this._locale=r.extend({},Tl,_.locale),this._clickTolerance=_.clickTolerance,this._cooperativeGestures=_.cooperativeGestures,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Uc(0),this._explicitProjection=null,this._requestManager=new r.RequestManager(_.transformRequest,_.accessToken,_.testMode),this._silenceAuthErrors=!!_.testMode,typeof _.container=="string"){if(this._container=r.window.document.getElementById(_.container),!this._container)throw new Error(`Container '${_.container}' not found.`)}else{if(!(_.container instanceof r.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=_.container}if(this._container.childNodes.length>0&&r.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),_.maxBounds&&this.setMaxBounds(_.maxBounds),r.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),r.window!==void 0&&(r.window.addEventListener("online",this._onWindowOnline,!1),r.window.addEventListener("resize",this._onWindowResize,!1),r.window.addEventListener("orientationchange",this._onWindowResize,!1),r.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1)),this.handlers=new ka(this,_),this._localFontFamily=_.localFontFamily,this._localIdeographFontFamily=_.localIdeographFontFamily,_.style&&this.setStyle(_.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),_.projection&&this.setProjection(_.projection),this._hash=_.hash&&new vl(typeof _.hash=="string"&&_.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch}),_.bounds&&(this.resize(),this.fitBounds(_.bounds,r.extend({},_.fitBoundsOptions,{duration:0})))),this.resize(),_.attributionControl&&this.addControl(new wl({customAttribution:_.customAttribution})),this._logoControl=new El,this.addControl(this._logoControl,_.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",o=>{this._update(o.dataType==="style"),this.fire(new r.Event(`${o.dataType}data`,o))}),this.on("dataloading",o=>{this.fire(new r.Event(`${o.dataType}dataloading`,o))})}_getMapId(){return this._mapId}addControl(_,o){if(o===void 0&&(o=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const f=_.onAdd(this);this._controls.push(_);const b=this._controlPositions[o];return o.indexOf("bottom")!==-1?b.insertBefore(f,b.firstChild):b.appendChild(f),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const o=this._controls.indexOf(_);return o>-1&&this._controls.splice(o,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(_){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const o=!this._moving;return o&&this.fire(new r.Event("movestart",_)).fire(new r.Event("move",_)),this.fire(new r.Event("resize",_)),o&&this.fire(new r.Event("moveend",_)),this}getBounds(){return this.transform.projection.name==="globe"&&r.warnOnce('Globe projection does not support getBounds API, this API may behave unexpectedly."'),this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(_){return this.transform.setMaxBounds(r.LngLatBounds.convert(_)),this._update()}setMinZoom(_){if((_=_==null?-2:_)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_?this.setZoom(_):this.fire(new r.Event("zoomstart")).fire(new r.Event("zoom")).fire(new r.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_==null?22:_)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_?this.setZoom(_):this.fire(new r.Event("zoomstart")).fire(new r.Event("zoom")).fire(new r.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_==null?0:_)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_?this.setPitch(_):this.fire(new r.Event("pitchstart")).fire(new r.Event("pitch")).fire(new r.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_==null?85:_)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_?this.setPitch(_):this.fire(new r.Event("pitchstart")).fire(new r.Event("pitch")).fire(new r.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this._update()}getLanguage(){return this._language}setLanguage(_){if(this._language=_==="auto"?r.window.navigator.language:_,this.style)for(const o in this.style._sourceCaches){const f=this.style._sourceCaches[o]._source;f._setLanguage&&f._setLanguage(this._language)}for(const o of this._controls)o._setLanguage&&o._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(_){if(this._worldview=_,this.style)for(const o in this.style._sourceCaches){const f=this.style._sourceCaches[o]._source;f._setWorldview&&f._setWorldview(_)}return this}getProjection(){return this._explicitProjection?this._explicitProjection:this.style&&this.style.stylesheet&&this.style.stylesheet.projection?this.style.stylesheet.projection:{name:"mercator",center:[0,0]}}_usingGlobe(){return this.transform.projection.name==="globe"}setProjection(_){return this._lazyInitEmptyStyle(),_?typeof _=="string"&&(_={name:_}):_=null,this._updateProjection(_)}_updateProjection(_){const o=this.getProjection();_===null&&(this._explicitProjection=null);const f=_||this.getProjection();let b;if(f&&f.name==="globe"&&this.transform.zoom>=r.GLOBE_ZOOM_THRESHOLD_MAX?(b=this.transform.setProjection({name:"mercator"}),this.transform.mercatorFromTransition=!0):(b=this.transform.setProjection(f),this.transform.mercatorFromTransition=!1),_&&(this._explicitProjection=_.name==="globe"?{name:"globe",center:[0,0]}:this.transform.getProjection()),this.style.applyProjectionUpdate(),b){if(o.name==="globe"&&this.getProjection().name==="globe")this.style._forceSymbolLayerUpdate();else{this.painter.clearBackgroundTiles();for(const T in this.style._sourceCaches)this.style._sourceCaches[T].clearTiles()}this._update(!0)}return this}project(_){return this.transform.locationPoint3D(r.LngLat.convert(_))}unproject(_){return this.transform.pointLocation3D(r.pointGeometry.convert(_))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_createDelegatedListener(_,o,f){if(_==="mouseenter"||_==="mouseover"){let b=!1;const T=F=>{const j=o.filter(Y=>this.getLayer(Y)),q=j.length?this.queryRenderedFeatures(F.point,{layers:j}):[];q.length?b||(b=!0,f.call(this,new nr(_,this,F.originalEvent,{features:q}))):b=!1},M=()=>{b=!1};return{layers:new Set(o),listener:f,delegates:{mousemove:T,mouseout:M}}}if(_==="mouseleave"||_==="mouseout"){let b=!1;const T=F=>{const j=o.filter(q=>this.getLayer(q));(j.length?this.queryRenderedFeatures(F.point,{layers:j}):[]).length?b=!0:b&&(b=!1,f.call(this,new nr(_,this,F.originalEvent)))},M=F=>{b&&(b=!1,f.call(this,new nr(_,this,F.originalEvent)))};return{layers:new Set(o),listener:f,delegates:{mousemove:T,mouseout:M}}}{const b=T=>{const M=o.filter(j=>this.getLayer(j)),F=M.length?this.queryRenderedFeatures(T.point,{layers:M}):[];F.length&&(T.features=F,f.call(this,T),delete T.features)};return{layers:new Set(o),listener:f,delegates:{[_]:b}}}}on(_,o,f){if(f===void 0)return super.on(_,o);Array.isArray(o)||(o=[o]);const b=this._createDelegatedListener(_,o,f);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(b);for(const T in b.delegates)this.on(T,b.delegates[T]);return this}once(_,o,f){if(f===void 0)return super.once(_,o);Array.isArray(o)||(o=[o]);const b=this._createDelegatedListener(_,o,f);for(const T in b.delegates)this.once(T,b.delegates[T]);return this}off(_,o,f){if(f===void 0)return super.off(_,o);o=new Set(Array.isArray(o)?o:[o]);const b=(M,F)=>{if(M.size!==F.size)return!1;for(const j of M)if(!F.has(j))return!1;return!0},T=this._delegatedListeners?this._delegatedListeners[_]:void 0;return T&&(M=>{for(let F=0;F<M.length;F++){const j=M[F];if(j.listener===f&&b(j.layers,o)){for(const q in j.delegates)this.off(q,j.delegates[q]);return M.splice(F,1),this}}})(T),this}queryRenderedFeatures(_,o){return this.style?(o!==void 0||_===void 0||_ instanceof r.pointGeometry||Array.isArray(_)||(o=_,_=void 0),this.style.queryRenderedFeatures(_=_||[[0,0],[this.transform.width,this.transform.height]],o=o||{},this.transform)):[]}querySourceFeatures(_,o){return this.style.querySourceFeatures(_,o)}queryTerrainElevation(_,o){const f=this.transform.elevation;return f?(o=r.extend({},{exaggerated:!0},o),f.getAtPoint(r.MercatorCoordinate.fromLngLat(_),null,o.exaggerated)):null}setStyle(_,o){return(o=r.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},o)).diff!==!1&&o.localIdeographFontFamily===this._localIdeographFontFamily&&o.localFontFamily===this._localFontFamily&&this.style&&_?(this._diffStyle(_,o),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._localFontFamily=o.localFontFamily,this._updateStyle(_,o))}_getUIString(_){const o=this._locale[_];if(o==null)throw new Error(`Missing UI string '${_}'`);return o}_updateStyle(_,o){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),_&&(this.style=new ai(this,o||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_):this.style.loadJSON(_)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new ai(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,o){if(typeof _=="string"){const f=this._requestManager.normalizeStyleURL(_),b=this._requestManager.transformRequest(f,r.ResourceType.Style);r.getJSON(b,(T,M)=>{T?this.fire(new r.ErrorEvent(T)):M&&this._updateDiff(M,o)})}else typeof _=="object"&&this._updateDiff(_,o)}_updateDiff(_,o){try{this.style.setState(_)&&this._update(!0)}catch(f){r.warnOnce(`Unable to perform style diff: ${f.message||f.error||f}.  Rebuilding the style from scratch.`),this._updateStyle(_,o)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(r.warnOnce("There is no style added to the map."),!1)}addSource(_,o){return this._lazyInitEmptyStyle(),this.style.addSource(_,o),this._update(!0)}isSourceLoaded(_){return!!this.style&&this.style._isSourceCacheLoaded(_)}areTilesLoaded(){const _=this.style&&this.style._sourceCaches;for(const o in _){const f=_[o]._tiles;for(const b in f){const T=f[b];if(T.state!=="loaded"&&T.state!=="errored")return!1}}return!0}addSourceType(_,o,f){this._lazyInitEmptyStyle(),this.style.addSourceType(_,o,f)}removeSource(_){return this.style.removeSource(_),this._updateTerrain(),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,o,{pixelRatio:f=1,sdf:b=!1,stretchX:T,stretchY:M,content:F}={}){if(this._lazyInitEmptyStyle(),o instanceof r.window.HTMLImageElement||r.window.ImageBitmap&&o instanceof r.window.ImageBitmap){const{width:j,height:q,data:Y}=r.exported.getImageData(o);this.style.addImage(_,{data:new r.RGBAImage({width:j,height:q},Y),pixelRatio:f,stretchX:T,stretchY:M,content:F,sdf:b,version:0})}else if(o.width===void 0||o.height===void 0)this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:j,height:q}=o,Y=o;this.style.addImage(_,{data:new r.RGBAImage({width:j,height:q},new Uint8Array(Y.data)),pixelRatio:f,stretchX:T,stretchY:M,content:F,sdf:b,version:0,userImage:Y}),Y.onAdd&&Y.onAdd(this,_)}}updateImage(_,o){const f=this.style.getImage(_);if(!f)return void this.fire(new r.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const b=o instanceof r.window.HTMLImageElement||r.window.ImageBitmap&&o instanceof r.window.ImageBitmap?r.exported.getImageData(o):o,{width:T,height:M}=b;T!==void 0&&M!==void 0?T===f.data.width&&M===f.data.height?(f.data.replace(b.data,!(o instanceof r.window.HTMLImageElement||r.window.ImageBitmap&&o instanceof r.window.ImageBitmap)),this.style.updateImage(_,f)):this.fire(new r.ErrorEvent(new Error(`The width and height of the updated image (${T}, ${M})
                must be that same as the previous version of the image
                (${f.data.width}, ${f.data.height})`))):this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new r.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_,o){r.getImage(this._requestManager.transformRequest(_,r.ResourceType.Image),(f,b)=>{o(f,b instanceof r.window.HTMLImageElement?r.exported.getImageData(b):b)})}listImages(){return this.style.listImages()}addLayer(_,o){return this._lazyInitEmptyStyle(),this.style.addLayer(_,o),this._update(!0)}moveLayer(_,o){return this.style.moveLayer(_,o),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}setLayerZoomRange(_,o,f){return this.style.setLayerZoomRange(_,o,f),this._update(!0)}setFilter(_,o,f={}){return this.style.setFilter(_,o,f),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,o,f,b={}){return this.style.setPaintProperty(_,o,f,b),this._update(!0)}getPaintProperty(_,o){return this.style.getPaintProperty(_,o)}setLayoutProperty(_,o,f,b={}){return this.style.setLayoutProperty(_,o,f,b),this._update(!0)}getLayoutProperty(_,o){return this.style.getLayoutProperty(_,o)}setLight(_,o={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,o),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(_){return this._lazyInitEmptyStyle(),!_&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(_),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(_){return this._lazyInitEmptyStyle(),this.style.setFog(_),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(_){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(r.LngLat.convert(_),this.transform):0}setFeatureState(_,o){return this.style.setFeatureState(_,o),this._update()}removeFeatureState(_,o){return this.style.removeFeatureState(_,o),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}_updateContainerDimensions(){if(!this._container)return;const _=this._container.getBoundingClientRect().width||400,o=this._container.getBoundingClientRect().height||300;let f,b,T,M=this._container;for(;M&&(!b||!T);){const F=r.window.getComputedStyle(M).transform;F&&F!=="none"&&(f=F.match(/matrix.*\((.+)\)/)[1].split(", "),f[0]&&f[0]!=="0"&&f[0]!=="1"&&(b=f[0]),f[3]&&f[3]!=="0"&&f[3]!=="1"&&(T=f[3])),M=M.parentElement}this._containerWidth=b?Math.abs(_/b):_,this._containerHeight=T?Math.abs(o/T):o}_detectMissingCSS(){r.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&r.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const _=this._container;_.classList.add("mapboxgl-map"),(this._missingCSSCanary=S("div","mapboxgl-canary",_)).style.visibility="hidden",this._detectMissingCSS();const o=this._canvasContainer=S("div","mapboxgl-canvas-container",_);this._interactive&&o.classList.add("mapboxgl-interactive"),this._canvas=S("canvas","mapboxgl-canvas",o),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const f=this._controlContainer=S("div","mapboxgl-control-container",_),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(T=>{b[T]=S("div",`mapboxgl-ctrl-${T}`,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,o){const f=r.exported.devicePixelRatio||1;this._canvas.width=f*Math.ceil(_),this._canvas.height=f*Math.ceil(o),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${o}px`}_addMarker(_){this._markers.push(_)}_removeMarker(_){const o=this._markers.indexOf(_);o!==-1&&this._markers.splice(o,1)}_setupPainter(){const _=r.extend({},E.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),o=this._canvas.getContext("webgl",_)||this._canvas.getContext("experimental-webgl",_);o?(r.storeAuthState(o,!0),this.painter=new va(o,this.transform),this.on("data",f=>{f.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),r.exported$1.testSupport(o)):this.fire(new r.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(_){_.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new r.Event("webglcontextlost",{originalEvent:_}))}_contextRestored(_){this._setupPainter(),this.resize(),this._update(),this.fire(new r.Event("webglcontextrestored",{originalEvent:_}))}_onMapScroll(_){if(_.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_requestDomTask(_){!this.loaded()||this.loaded()&&!this.isMoving()?_():this._domRenderTaskQueue.add(_)}_render(_){let o;const f=this.painter.context.extTimerQuery,b=r.exported.now();if(this.listens("gpu-timing-frame")&&(o=f.createQueryEXT(),f.beginQueryEXT(f.TIME_ELAPSED_EXT,o)),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._domRenderTaskQueue.run(_),this._removed)return;this.getProjection().name==="globe"&&(this.transform.zoom>=r.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.projection.name==="globe"&&this._updateProjection():this.transform.projection.name==="mercator"&&this._updateProjection());let T=!1;const M=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const q=this.transform.zoom,Y=this.transform.pitch,J=r.exported.now();this.style.zoomHistory.update(q,J);const te=new r.EvaluationParameters(q,{now:J,fadeDuration:M,pitch:Y,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ae=te.crossFadingFactor();ae===1&&ae===this._crossFadingFactor||(T=!0,this._crossFadingFactor=ae),this.style.update(te)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let F=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),F=this._updateAverageElevation(b),this.style._updateSources(this.transform),this._forceMarkerUpdate()):F=this._updateAverageElevation(b),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,M,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:M,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new r.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new r.Event("load"))),this.style&&(this.style.hasTransitions()||T)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),o){const q=r.exported.now()-b;f.endQueryEXT(f.TIME_ELAPSED_EXT,o),setTimeout(()=>{const Y=f.getQueryObjectEXT(o,f.QUERY_RESULT_EXT)/1e6;f.deleteQueryEXT(o),this.fire(new r.Event("gpu-timing-frame",{cpuTime:q,gpuTime:Y})),r.window.performance.mark("frame-gpu",{startTime:b,detail:{gpuTime:Y}})},50)}if(this.listens("gpu-timing-layer")){const q=this.painter.collectGpuTimers();setTimeout(()=>{const Y=this.painter.queryGpuTimers(q);this.fire(new r.Event("gpu-timing-layer",{layerTimes:Y}))},50)}if(this.listens("gpu-timing-deferred-render")){const q=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const Y=this.painter.queryGpuTimeDeferredRender(q);this.fire(new r.Event("gpu-timing-deferred-render",{gpuTime:Y}))},50)}const j=this._sourcesDirty||this._styleDirty||this._placementDirty||F;if(j||this._repaint)this.triggerRepaint();else{const q=!this.isMoving()&&this.loaded();if(q&&(F=this._updateAverageElevation(b,!0)),F)this.triggerRepaint();else if(this._triggerFrame(!1),q&&(this.fire(new r.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const Y=this._calculateSpeedIndex();this.fire(new r.Event("speedindexcompleted",{speedIndex:Y})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||j||(this._fullyLoaded=!0,this._authenticate())}_forceMarkerUpdate(){for(const _ of this._markers)_._update()}_updateAverageElevation(_,o=!1){const f=b=>(this.transform.averageElevation=b,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&f(0);if((o||_-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(_)){const b=this.transform.averageElevation;let T=this.transform.sampleAverageElevation(),M=!1;this.transform.elevation&&(M=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(T)?T=0:this._averageElevationLastSampledAt=_;const F=Math.abs(b-T);if(F>1){if(this._isInitialLoad||M)return this._averageElevation.jumpTo(T),f(T);this._averageElevation.easeTo(T,_,300)}else if(F>1e-4)return this._averageElevation.jumpTo(T),f(T)}return!!this._averageElevation.isEasing(_)&&f(this._averageElevation.getValue(_))}_authenticate(){r.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,_=>{if(_&&(_.message===r.AUTH_ERR_MSG||_.status===401)){const o=this.painter.context.gl;r.storeAuthState(o,!1),this._logoControl instanceof El&&this._logoControl._updateLogo(),o&&o.clear(o.DEPTH_BUFFER_BIT|o.COLOR_BUFFER_BIT|o.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new r.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),r.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const _=this.painter.canvasCopy(),o=this.painter.getCanvasCopiesAndTimestamps();o.timeStamps.push(performance.now());const f=this.painter.context.gl,b=f.createFramebuffer();function T(M){f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,M,0);const F=new Uint8Array(f.drawingBufferWidth*f.drawingBufferHeight*4);return f.readPixels(0,0,f.drawingBufferWidth,f.drawingBufferHeight,f.RGBA,f.UNSIGNED_BYTE,F),F}return f.bindFramebuffer(f.FRAMEBUFFER,b),this._canvasPixelComparison(T(_),o.canvasCopies.map(T),o.timeStamps)}_canvasPixelComparison(_,o,f){let b=f[1]-f[0];const T=_.length/4;for(let M=0;M<o.length;M++){const F=o[M];let j=0;for(let q=0;q<F.length;q+=4)F[q]===_[q]&&F[q+1]===_[q+1]&&F[q+2]===_[q+2]&&F[q+3]===_[q+3]&&(j+=1);b+=(f[M+2]-f[M+1])*(1-j/T)}return b}remove(){this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),r.window!==void 0&&(r.window.removeEventListener("resize",this._onWindowResize,!1),r.window.removeEventListener("orientationchange",this._onWindowResize,!1),r.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),r.window.removeEventListener("online",this._onWindowOnline,!1));const _=this.painter.context.gl.getExtension("WEBGL_lose_context");_&&_.loseContext(),Na(this._canvasContainer),Na(this._controlContainer),Na(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),r.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new r.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(_){this._renderNextFrame=this._renderNextFrame||_,this.style&&!this._frame&&(this._frame=r.exported.frame(o=>{const f=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,f&&this._render(o)}))}_preloadTiles(_){const o=this.style?Object.values(this.style._sourceCaches):[];return r.asyncAll(o,(f,b)=>f._preloadTiles(_,b),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(_){this._trackResize&&this.resize({originalEvent:_})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(_){this._showTerrainWireframe!==_&&(this._showTerrainWireframe=_,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(_){this._speedIndexTiming!==_&&(this._speedIndexTiming=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}_setCacheLimits(_,o){r.setCacheLimits(_,o)}get version(){return r.version}},NavigationControl:class{constructor(_){this.options=r.extend({},Gc,_),this._container=S("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(r.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",o=>{this._map&&this._map.zoomIn({},{originalEvent:o})}),S("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",o=>{this._map&&this._map.zoomOut({},{originalEvent:o})}),S("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(r.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",o=>{const f=this._map;f&&(this.options.visualizePitch?f.resetNorthPitch({},{originalEvent:o}):f.resetNorth({},{originalEvent:o}))}),this._compassIcon=S("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const _=this._map;if(!_)return;const o=_.getZoom(),f=o===_.getMaxZoom(),b=o===_.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=b,this._zoomInButton.setAttribute("aria-disabled",f.toString()),this._zoomOutButton.setAttribute("aria-disabled",b.toString())}_rotateCompassArrow(){const _=this._map;if(!_)return;const o=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(_.transform.pitch*(Math.PI/180)),.5)}) rotateX(${_.transform.pitch}deg) rotateZ(${_.transform.angle*(180/Math.PI)}deg)`:`rotate(${_.transform.angle*(180/Math.PI)}deg)`;_._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=o)})}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),_.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&_.on("pitch",this._rotateCompassArrow),_.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new qc(_,this._compass,this.options.visualizePitch)),this._container}onRemove(){const _=this._map;_&&(this._container.remove(),this.options.showZoom&&_.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&_.off("pitch",this._rotateCompassArrow),_.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(_,o){const f=S("button",_,this._container);return f.type="button",f.addEventListener("click",o),f}_setButtonTitle(_,o){if(!this._map)return;const f=this._map._getUIString(`NavigationControl.${o}`);_.setAttribute("aria-label",f),_.firstElementChild&&_.firstElementChild.setAttribute("title",f)}},GeolocateControl:class extends r.Evented{constructor(_){super(),this.options=r.extend({geolocation:r.window.navigator.geolocation},Al,_),r.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Is(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(_){return this._map=_,this._container=S("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(_){this._supportsGeolocation!==void 0?_(this._supportsGeolocation):r.window.navigator.permissions!==void 0?r.window.navigator.permissions.query({name:"geolocation"}).then(o=>{this._supportsGeolocation=o.state!=="denied",_(this._supportsGeolocation)}):(this._supportsGeolocation=!!this.options.geolocation,_(this._supportsGeolocation))}_isOutOfMapMaxBounds(_){const o=this._map.getMaxBounds(),f=_.coords;return!!o&&(f.longitude<o.getWest()||f.longitude>o.getEast()||f.latitude<o.getSouth()||f.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(_){if(this._map){if(this._isOutOfMapMaxBounds(_))return this._setErrorState(),this.fire(new r.Event("outofmaxbounds",_)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=_,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(_),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(_),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new r.Event("geolocate",_)),this._finish()}}_updateCamera(_){const o=new r.LngLat(_.coords.longitude,_.coords.latitude),f=_.coords.accuracy,b=this._map.getBearing(),T=r.extend({bearing:b},this.options.fitBoundsOptions);this._map.fitBounds(o.toBounds(f),T,{geolocateSource:!0})}_updateMarker(_){if(_){const o=new r.LngLat(_.coords.longitude,_.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=_.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const _=this._map.transform,o=r.mercatorZfromAltitude(1,_._center.lat)*_.worldSize,f=Math.ceil(2*this._accuracy*o);this._circleElement.style.width=`${f}px`,this._circleElement.style.height=`${f}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(_){if(this._map){if(this.options.trackUserLocation)if(_.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(_.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new r.Event("error",_)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(_){if(this._container.addEventListener("contextmenu",o=>o.preventDefault()),this._geolocateButton=S("button","mapboxgl-ctrl-geolocate",this._container),S("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",_===!1){r.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=S("div","mapboxgl-user-location"),this._dotElement.appendChild(S("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(S("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Ia({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=S("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ia({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new r.Event("trackuserlocationend")))})}_onDeviceOrientation(_){this._userLocationDotMarker&&(_.webkitCompassHeading?this._heading=_.webkitCompassHeading:_.absolute===!0&&(this._heading=-1*_.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return r.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new r.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new r.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new r.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(_={maximumAge:6e5,timeout:0},this._noTimeout=!0):(_=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,_),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const _=()=>{r.window.addEventListener("ondeviceorientationabsolute"in r.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};r.window.DeviceMotionEvent!==void 0&&typeof r.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(o=>{o==="granted"&&_()}).catch(console.error):_()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),r.window.removeEventListener("deviceorientation",this._onDeviceOrientation),r.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:wl,ScaleControl:class{constructor(_){this.options=r.extend({},Hc,_),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch{return!1}}()||(this._setScale=kl.bind(this)),r.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const _=this.options.maxWidth||100,o=this._map,f=o._containerHeight/2,b=o._containerWidth/2-_/2,T=o.unproject([b,f]),M=o.unproject([b+_,f]),F=T.distanceTo(M);if(this.options.unit==="imperial"){const j=3.2808*F;j>5280?this._setScale(_,j/5280,"mile"):this._setScale(_,j,"foot")}else this.options.unit==="nautical"?this._setScale(_,F/1852,"nautical-mile"):F>=1e3?this._setScale(_,F/1e3,"kilometer"):this._setScale(_,F,"meter")}_setScale(_,o,f){const b=Rl(o),T=b/o;this._map._requestDomTask(()=>{this._container.style.width=_*T+"px",this._container.innerHTML=f!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:f}).format(b):`${b}&nbsp;nm`})}onAdd(_){return this._map=_,this._language=_.getLanguage(),this._container=S("div","mapboxgl-ctrl mapboxgl-ctrl-scale",_.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(_){this._language=_,this._update()}setUnit(_){this.options.unit=_,this._update()}},FullscreenControl:class{constructor(_){this._fullscreen=!1,_&&_.container&&(_.container instanceof r.window.HTMLElement?this._container=_.container:r.warnOnce("Full screen control 'container' must be a DOM element.")),r.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in r.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in r.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=S("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",r.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,r.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!r.window.document.fullscreenEnabled&&!r.window.document.webkitFullscreenEnabled)}_setupUI(){const _=this._fullscreenButton=S("button","mapboxgl-ctrl-fullscreen",this._controlContainer);S("span","mapboxgl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),r.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",_)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(r.window.document.fullscreenElement||r.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?r.window.document.exitFullscreen?r.window.document.exitFullscreen():r.window.document.webkitCancelFullScreen&&r.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends r.Evented{constructor(_){super(),this.options=r.extend(Object.create($l),_),r.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(_&&_.className?_.className.trim().split(/\s+/):[])}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&_.on("preclick",this._onClose),this.options.closeOnMove&&_.on("move",this._onClose),_.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(_.on("mousemove",this._onMouseEvent),_.on("mouseup",this._onMouseEvent),_._canvasContainer.classList.add("mapboxgl-track-pointer")):_.on("move",this._update),this.fire(new r.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const _=this._map;return _&&(_.off("move",this._update),_.off("move",this._onClose),_.off("preclick",this._onClose),_.off("click",this._onClose),_.off("remove",this.remove),_.off("mousemove",this._onMouseEvent),_.off("mouseup",this._onMouseEvent),_.off("drag",this._onMouseEvent),this._map=void 0),this.fire(new r.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(_){this._lngLat=r.LngLat.convert(_),this._pos=null,this._trackPointer=!1,this._update();const o=this._map;return o&&(o.on("move",this._update),o.off("mousemove",this._onMouseEvent),o._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const _=this._map;return _&&(_.off("move",this._update),_.on("mousemove",this._onMouseEvent),_.on("drag",this._onMouseEvent),_._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(r.window.document.createTextNode(_))}setHTML(_){const o=r.window.document.createDocumentFragment(),f=r.window.document.createElement("body");let b;for(f.innerHTML=_;b=f.firstChild,b;)o.appendChild(b);return this.setDOMContent(o)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){let o=this._content;if(o)for(;o.hasChildNodes();)o.firstChild&&o.removeChild(o.firstChild);else o=this._content=S("div","mapboxgl-popup-content",this._container||void 0);if(o.appendChild(_),this.options.closeButton){const f=this._closeButton=S("button","mapboxgl-popup-close-button",o);f.type="button",f.setAttribute("aria-label","Close popup"),f.setAttribute("aria-hidden","true"),f.innerHTML="&#215;",f.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(_){return this._classList.add(_),this._updateClassList(),this}removeClassName(_){return this._classList.delete(_),this._updateClassList(),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){let o;return this._classList.delete(_)?o=!1:(this._classList.add(_),o=!0),this._updateClassList(),o}_onMouseEvent(_){this._update(_.point)}_getAnchor(_){if(this.options.anchor)return this.options.anchor;const o=this._map,f=this._container,b=this._pos;if(!o||!f||!b)return"bottom";const T=f.offsetWidth,M=f.offsetHeight,F=b.x<T/2,j=b.x>o.transform.width-T/2;if(b.y+_<M)return F?"top-left":j?"top-right":"top";if(b.y>o.transform.height-M){if(F)return"bottom-left";if(j)return"bottom-right"}return F?"left":j?"right":"bottom"}_updateClassList(){const _=this._container;if(!_)return;const o=[...this._classList];o.push("mapboxgl-popup"),this._anchor&&o.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&o.push("mapboxgl-popup-track-pointer"),_.className=o.join(" ")}_update(_){const o=this._map,f=this._content;if(!o||!this._lngLat&&!this._trackPointer||!f)return;let b=this._container;if(b||(b=this._container=S("div","mapboxgl-popup",o.getContainer()),this._tip=S("div","mapboxgl-popup-tip",b),b.appendChild(f)),this.options.maxWidth&&b.style.maxWidth!==this.options.maxWidth&&(b.style.maxWidth=this.options.maxWidth),o.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Sl(this._lngLat,this._pos,o.transform)),!this._trackPointer||_){const T=this._pos=this._trackPointer&&_?_:o.project(this._lngLat),M=La(this.options.offset),F=this._anchor=this._getAnchor(M.y),j=La(this.options.offset,F),q=T.add(j).round();o._requestDomTask(()=>{this._container&&F&&(this._container.style.transform=`${Ma[F]} translate(${q.x}px,${q.y}px)`)})}if(!this._marker&&o._usingGlobe()){const T=r.isLngLatBehindGlobe(o.transform,this._lngLat)?0:1;this._setOpacity(T)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(Ml);_&&_.focus()}_onClose(){this.remove()}_setOpacity(_){this._container&&(this._container.style.opacity=`${_}`),this._content&&(this._content.style.pointerEvents=_?"auto":"none")}},Marker:Ia,Style:ai,LngLat:r.LngLat,LngLatBounds:r.LngLatBounds,Point:r.pointGeometry,MercatorCoordinate:r.MercatorCoordinate,FreeCameraOptions:$s,Evented:r.Evented,config:r.config,prewarm:function(){Bn().acquire(ln)},clearPrewarmedResources:function(){const _=bn;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(ln),bn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return r.config.ACCESS_TOKEN},set accessToken(_){r.config.ACCESS_TOKEN=_},get baseApiUrl(){return r.config.API_URL},set baseApiUrl(_){r.config.API_URL=_},get workerCount(){return _n.workerCount},set workerCount(_){_n.workerCount=_},get maxParallelImageRequests(){return r.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(_){r.config.MAX_PARALLEL_IMAGE_REQUESTS=_},clearStorage(_){r.clearTileCache(_)},workerUrl:"",workerClass:null,setNow:r.exported.setNow,restoreNow:r.exported.restoreNow};return Oa});var g=c;return g})})(mapboxGl$2);const mapboxGl=mapboxGl$2.exports,mapboxGl$1=_mergeNamespaces({__proto__:null,default:mapboxGl},[mapboxGl$2.exports]);exports.renderApp=renderApp;exports.renderError=renderError;
//# sourceMappingURL=ssr.js.map
