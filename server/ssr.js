"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const require$$0$2=require("crypto"),require$$1$2=require("http"),require$$2=require("https"),require$$0$5=require("url"),require$$1$1=require("stream"),require$$4=require("assert"),require$$1=require("tty"),require$$0$4=require("util"),require$$0$3=require("os"),require$$1$3=require("zlib"),require$$1$4=require("path"),require$$1$5=require("fs"),require$$3=require("buffer"),_interopDefaultLegacy=e=>e&&typeof e=="object"&&"default"in e?e:{default:e};function _mergeNamespaces(e,t){for(var n=0;n<t.length;n++){const o=t[n];if(typeof o!="string"&&!Array.isArray(o)){for(const c in o)if(c!=="default"&&!(c in e)){const d=Object.getOwnPropertyDescriptor(o,c);d&&Object.defineProperty(e,c,d.get?d:{enumerable:!0,get:()=>o[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const require$$0__default=_interopDefaultLegacy(require$$0$2),require$$1__default$2=_interopDefaultLegacy(require$$1$2),require$$2__default=_interopDefaultLegacy(require$$2),require$$0__default$3=_interopDefaultLegacy(require$$0$5),require$$1__default$1=_interopDefaultLegacy(require$$1$1),require$$4__default=_interopDefaultLegacy(require$$4),require$$1__default=_interopDefaultLegacy(require$$1),require$$0__default$2=_interopDefaultLegacy(require$$0$4),require$$0__default$1=_interopDefaultLegacy(require$$0$3),require$$1__default$3=_interopDefaultLegacy(require$$1$3),require$$1__default$4=_interopDefaultLegacy(require$$1$4),require$$1__default$5=_interopDefaultLegacy(require$$1$5),require$$3__default=_interopDefaultLegacy(require$$3);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){var t=e.default;if(typeof t=="function"){var n=function(){return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var c=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(n,o,c.get?c:{enumerable:!0,get:function(){return e[o]}})}),n}var randombytes=require$$0__default.default.randomBytes,randomBytes=randombytes,UID_LENGTH=16,UID=generateUID(),PLACE_HOLDER_REGEXP=new RegExp('(\\\\)?"@__(F|R|D|M|S|A|U|I|B|L)-'+UID+'-(\\d+)__@"',"g"),IS_NATIVE_CODE_REGEXP=/\{\s*\[native code\]\s*\}/g,IS_PURE_FUNCTION=/function.*?\(/,IS_ARROW_FUNCTION=/.*?=>.*?/,UNSAFE_CHARS_REGEXP=/[<>\/\u2028\u2029]/g,RESERVED_SYMBOLS=["*","async"],ESCAPED_CHARS={"<":"\\u003C",">":"\\u003E","/":"\\u002F","\u2028":"\\u2028","\u2029":"\\u2029"};function escapeUnsafeChars(e){return ESCAPED_CHARS[e]}function generateUID(){for(var e=randomBytes(UID_LENGTH),t="",n=0;n<UID_LENGTH;++n)t+=e[n].toString(16);return t}function deleteFunctions(e){var t=[];for(var n in e)typeof e[n]=="function"&&t.push(n);for(var o=0;o<t.length;o++)delete e[t[o]]}var serializeJavascript=function e(t,n){n||(n={}),(typeof n=="number"||typeof n=="string")&&(n={space:n});var o=[],c=[],d=[],g=[],r=[],v=[],E=[],w=[],T=[],S=[];function N(O,V){if(n.ignoreFunction&&deleteFunctions(V),!V&&V!==void 0)return V;var D=this[O],U=typeof D;if(U==="object"){if(D instanceof RegExp)return"@__R-"+UID+"-"+(c.push(D)-1)+"__@";if(D instanceof Date)return"@__D-"+UID+"-"+(d.push(D)-1)+"__@";if(D instanceof Map)return"@__M-"+UID+"-"+(g.push(D)-1)+"__@";if(D instanceof Set)return"@__S-"+UID+"-"+(r.push(D)-1)+"__@";if(D instanceof Array){var W=D.filter(function(){return!0}).length!==D.length;if(W)return"@__A-"+UID+"-"+(v.push(D)-1)+"__@"}if(D instanceof URL)return"@__L-"+UID+"-"+(S.push(D)-1)+"__@"}return U==="function"?"@__F-"+UID+"-"+(o.push(D)-1)+"__@":U==="undefined"?"@__U-"+UID+"-"+(E.push(D)-1)+"__@":U==="number"&&!isNaN(D)&&!isFinite(D)?"@__I-"+UID+"-"+(w.push(D)-1)+"__@":U==="bigint"?"@__B-"+UID+"-"+(T.push(D)-1)+"__@":V}function L(O){var V=O.toString();if(IS_NATIVE_CODE_REGEXP.test(V))throw new TypeError("Serializing native function: "+O.name);if(IS_PURE_FUNCTION.test(V)||IS_ARROW_FUNCTION.test(V))return V;var D=V.indexOf("("),U=V.substr(0,D).trim().split(" ").filter(function(Z){return Z.length>0}),W=U.filter(function(Z){return RESERVED_SYMBOLS.indexOf(Z)===-1});return W.length>0?(U.indexOf("async")>-1?"async ":"")+"function"+(U.join("").indexOf("*")>-1?"*":"")+V.substr(D):V}if(n.ignoreFunction&&typeof t=="function"&&(t=void 0),t===void 0)return String(t);var P;return n.isJSON&&!n.space?P=JSON.stringify(t):P=JSON.stringify(t,n.isJSON?null:N,n.space),typeof P!="string"?String(P):(n.unsafe!==!0&&(P=P.replace(UNSAFE_CHARS_REGEXP,escapeUnsafeChars)),o.length===0&&c.length===0&&d.length===0&&g.length===0&&r.length===0&&v.length===0&&E.length===0&&w.length===0&&T.length===0&&S.length===0?P:P.replace(PLACE_HOLDER_REGEXP,function(O,V,D,U){if(V)return O;if(D==="D")return'new Date("'+d[U].toISOString()+'")';if(D==="R")return"new RegExp("+e(c[U].source)+', "'+c[U].flags+'")';if(D==="M")return"new Map("+e(Array.from(g[U].entries()),n)+")";if(D==="S")return"new Set("+e(Array.from(r[U].values()),n)+")";if(D==="A")return"Array.prototype.slice.call("+e(Object.assign({length:v[U].length},v[U]),n)+")";if(D==="U")return"undefined";if(D==="I")return w[U];if(D==="B")return'BigInt("'+T[U]+'")';if(D==="L")return'new URL("'+S[U].toString()+'")';var W=o[U];return L(W)}))};function makeMap(e,t){const n=Object.create(null),o=e.split(",");for(let c=0;c<o.length;c++)n[o[c]]=!0;return t?c=>!!n[c.toLowerCase()]:c=>!!n[c]}const GLOBALS_WHITE_LISTED="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",isGloballyWhitelisted=makeMap(GLOBALS_WHITE_LISTED),specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs),isBooleanAttr=makeMap(specialBooleanAttrs+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected");function includeBooleanAttr(e){return!!e||e===""}const unsafeAttrCharRE=/[>/="'\u0009\u000a\u000c\u0020]/,attrValidationCache={};function isSSRSafeAttrName(e){if(attrValidationCache.hasOwnProperty(e))return attrValidationCache[e];const t=unsafeAttrCharRE.test(e);return t&&console.error(`unsafe attribute name: ${e}`),attrValidationCache[e]=!t}const propsToAttrMap={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},isNoUnitNumericStyleProp=makeMap("animation-iteration-count,border-image-outset,border-image-slice,border-image-width,box-flex,box-flex-group,box-ordinal-group,column-count,columns,flex,flex-grow,flex-positive,flex-shrink,flex-negative,flex-order,grid-row,grid-row-end,grid-row-span,grid-row-start,grid-column,grid-column-end,grid-column-span,grid-column-start,font-weight,line-clamp,line-height,opacity,order,orphans,tab-size,widows,z-index,zoom,fill-opacity,flood-opacity,stop-opacity,stroke-dasharray,stroke-dashoffset,stroke-miterlimit,stroke-opacity,stroke-width");function normalizeStyle(e){if(isArray$8(e)){const t={};for(let n=0;n<e.length;n++){const o=e[n],c=isString$2(o)?parseStringStyle(o):normalizeStyle(o);if(c)for(const d in c)t[d]=c[d]}return t}else{if(isString$2(e))return e;if(isObject$6(e))return e}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:(.+)/;function parseStringStyle(e){const t={};return e.split(listDelimiterRE).forEach(n=>{if(n){const o=n.split(propertyDelimiterRE);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function stringifyStyle(e){let t="";if(!e||isString$2(e))return t;for(const n in e){const o=e[n],c=n.startsWith("--")?n:hyphenate(n);(isString$2(o)||typeof o=="number"&&isNoUnitNumericStyleProp(c))&&(t+=`${c}:${o};`)}return t}function normalizeClass(e){let t="";if(isString$2(e))t=e;else if(isArray$8(e))for(let n=0;n<e.length;n++){const o=normalizeClass(e[n]);o&&(t+=o+" ")}else if(isObject$6(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function normalizeProps(e){if(!e)return null;let{class:t,style:n}=e;return t&&!isString$2(t)&&(e.class=normalizeClass(t)),n&&(e.style=normalizeStyle(n)),e}const HTML_TAGS="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",SVG_TAGS="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",VOID_TAGS="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",isHTMLTag=makeMap(HTML_TAGS),isSVGTag=makeMap(SVG_TAGS),isVoidTag=makeMap(VOID_TAGS),escapeRE=/["'&<>]/;function escapeHtml(e){const t=""+e,n=escapeRE.exec(t);if(!n)return t;let o="",c,d,g=0;for(d=n.index;d<t.length;d++){switch(t.charCodeAt(d)){case 34:c="&quot;";break;case 38:c="&amp;";break;case 39:c="&#39;";break;case 60:c="&lt;";break;case 62:c="&gt;";break;default:continue}g!==d&&(o+=t.slice(g,d)),g=d+1,o+=c}return g!==d?o+t.slice(g,d):o}const commentStripRE=/^-?>|<!--|-->|--!>|<!-$/g;function escapeHtmlComment(e){return e.replace(commentStripRE,"")}function looseCompareArrays(e,t){if(e.length!==t.length)return!1;let n=!0;for(let o=0;n&&o<e.length;o++)n=looseEqual(e[o],t[o]);return n}function looseEqual(e,t){if(e===t)return!0;let n=isDate$2(e),o=isDate$2(t);if(n||o)return n&&o?e.getTime()===t.getTime():!1;if(n=isSymbol$4(e),o=isSymbol$4(t),n||o)return e===t;if(n=isArray$8(e),o=isArray$8(t),n||o)return n&&o?looseCompareArrays(e,t):!1;if(n=isObject$6(e),o=isObject$6(t),n||o){if(!n||!o)return!1;const c=Object.keys(e).length,d=Object.keys(t).length;if(c!==d)return!1;for(const g in e){const r=e.hasOwnProperty(g),v=t.hasOwnProperty(g);if(r&&!v||!r&&v||!looseEqual(e[g],t[g]))return!1}}return String(e)===String(t)}function looseIndexOf(e,t){return e.findIndex(n=>looseEqual(n,t))}const toDisplayString=e=>isString$2(e)?e:e==null?"":isArray$8(e)||isObject$6(e)&&(e.toString===objectToString$3||!isFunction$1(e.toString))?JSON.stringify(e,replacer,2):String(e),replacer=(e,t)=>t&&t.__v_isRef?replacer(e,t.value):isMap$1(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[o,c])=>(n[`${o} =>`]=c,n),{})}:isSet$1(t)?{[`Set(${t.size})`]:[...t.values()]}:isObject$6(t)&&!isArray$8(t)&&!isPlainObject$1(t)?String(t):t,EMPTY_OBJ=process.env.NODE_ENV!=="production"?Object.freeze({}):{},EMPTY_ARR=process.env.NODE_ENV!=="production"?Object.freeze([]):[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=e=>onRE.test(e),isModelListener=e=>e.startsWith("onUpdate:"),extend$4=Object.assign,remove$2=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn$2=(e,t)=>hasOwnProperty$1.call(e,t),isArray$8=Array.isArray,isMap$1=e=>toTypeString(e)==="[object Map]",isSet$1=e=>toTypeString(e)==="[object Set]",isDate$2=e=>toTypeString(e)==="[object Date]",isFunction$1=e=>typeof e=="function",isString$2=e=>typeof e=="string",isSymbol$4=e=>typeof e=="symbol",isObject$6=e=>e!==null&&typeof e=="object",isPromise=e=>isObject$6(e)&&isFunction$1(e.then)&&isFunction$1(e.catch),objectToString$3=Object.prototype.toString,toTypeString=e=>objectToString$3.call(e),toRawType=e=>toTypeString(e).slice(8,-1),isPlainObject$1=e=>toTypeString(e)==="[object Object]",isIntegerKey=e=>isString$2(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),isBuiltInDirective=makeMap("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),cacheStringFunction=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(e=>e.replace(camelizeRE,(t,n)=>n?n.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(e=>e.replace(hyphenateRE,"-$1").toLowerCase()),capitalize$1=cacheStringFunction(e=>e.charAt(0).toUpperCase()+e.slice(1)),toHandlerKey=cacheStringFunction(e=>e?`on${capitalize$1(e)}`:""),hasChanged=(e,t)=>!Object.is(e,t),invokeArrayFns=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},def=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},toNumber$2=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function warn$4(e,...t){console.warn(`[Vue warn] ${e}`,...t)}let activeEffectScope;class EffectScope{constructor(t=!1){this.detached=t,this.active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!t&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(t){if(this.active){const n=activeEffectScope;try{return activeEffectScope=this,t()}finally{activeEffectScope=n}}else process.env.NODE_ENV!=="production"&&warn$4("cannot run an inactive effect scope.")}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(t){if(this.active){let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.scopes)for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const c=this.parent.scopes.pop();c&&c!==this&&(this.parent.scopes[this.index]=c,c.index=this.index)}this.parent=void 0,this.active=!1}}}function effectScope(e){return new EffectScope(e)}function recordEffectScope(e,t=activeEffectScope){t&&t.active&&t.effects.push(e)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(e){activeEffectScope?activeEffectScope.cleanups.push(e):process.env.NODE_ENV!=="production"&&warn$4("onScopeDispose() is called when there is no active effect scope to be associated with.")}const createDep=e=>{const t=new Set(e);return t.w=0,t.n=0,t},wasTracked=e=>(e.w&trackOpBit)>0,newTracked=e=>(e.n&trackOpBit)>0,initDepMarkers=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=trackOpBit},finalizeDepMarkers=e=>{const{deps:t}=e;if(t.length){let n=0;for(let o=0;o<t.length;o++){const c=t[o];wasTracked(c)&&!newTracked(c)?c.delete(e):t[n++]=c,c.w&=~trackOpBit,c.n&=~trackOpBit}t.length=n}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(process.env.NODE_ENV!=="production"?"iterate":""),MAP_KEY_ITERATE_KEY=Symbol(process.env.NODE_ENV!=="production"?"Map key iterate":"");class ReactiveEffect{constructor(t,n=null,o){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,o)}run(){if(!this.active)return this.fn();let t=activeEffect,n=shouldTrack;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}function effect(e,t){e.effect&&(e=e.effect.fn);const n=new ReactiveEffect(e);t&&(extend$4(n,t),t.scope&&recordEffectScope(n,t.scope)),(!t||!t.lazy)&&n.run();const o=n.run.bind(n);return o.effect=n,o}function stop(e){e.effect.stop()}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=e===void 0?!0:e}function track(e,t,n){if(shouldTrack&&activeEffect){let o=targetMap.get(e);o||targetMap.set(e,o=new Map);let c=o.get(n);c||o.set(n,c=createDep());const d=process.env.NODE_ENV!=="production"?{effect:activeEffect,target:e,type:t,key:n}:void 0;trackEffects(c,d)}}function trackEffects(e,t){let n=!1;effectTrackDepth<=maxMarkerBits?newTracked(e)||(e.n|=trackOpBit,n=!wasTracked(e)):n=!e.has(activeEffect),n&&(e.add(activeEffect),activeEffect.deps.push(e),process.env.NODE_ENV!=="production"&&activeEffect.onTrack&&activeEffect.onTrack(Object.assign({effect:activeEffect},t)))}function trigger$1(e,t,n,o,c,d){const g=targetMap.get(e);if(!g)return;let r=[];if(t==="clear")r=[...g.values()];else if(n==="length"&&isArray$8(e))g.forEach((E,w)=>{(w==="length"||w>=o)&&r.push(E)});else switch(n!==void 0&&r.push(g.get(n)),t){case"add":isArray$8(e)?isIntegerKey(n)&&r.push(g.get("length")):(r.push(g.get(ITERATE_KEY)),isMap$1(e)&&r.push(g.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$8(e)||(r.push(g.get(ITERATE_KEY)),isMap$1(e)&&r.push(g.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap$1(e)&&r.push(g.get(ITERATE_KEY));break}const v=process.env.NODE_ENV!=="production"?{target:e,type:t,key:n,newValue:o,oldValue:c,oldTarget:d}:void 0;if(r.length===1)r[0]&&(process.env.NODE_ENV!=="production"?triggerEffects(r[0],v):triggerEffects(r[0]));else{const E=[];for(const w of r)w&&E.push(...w);process.env.NODE_ENV!=="production"?triggerEffects(createDep(E),v):triggerEffects(createDep(E))}}function triggerEffects(e,t){const n=isArray$8(e)?e:[...e];for(const o of n)o.computed&&triggerEffect(o,t);for(const o of n)o.computed||triggerEffect(o,t)}function triggerEffect(e,t){(e!==activeEffect||e.allowRecurse)&&(process.env.NODE_ENV!=="production"&&e.onTrigger&&e.onTrigger(extend$4({effect:e},t)),e.scheduler?e.scheduler():e.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(isSymbol$4)),get$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),shallowReadonlyGet=createGetter(!0,!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const o=toRaw$1(this);for(let d=0,g=this.length;d<g;d++)track(o,"get",d+"");const c=o[t](...n);return c===-1||c===!1?o[t](...n.map(toRaw$1)):c}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){pauseTracking();const o=toRaw$1(this)[t].apply(this,n);return resetTracking(),o}}),e}function createGetter(e=!1,t=!1){return function(o,c,d){if(c==="__v_isReactive")return!e;if(c==="__v_isReadonly")return e;if(c==="__v_isShallow")return t;if(c==="__v_raw"&&d===(e?t?shallowReadonlyMap:readonlyMap:t?shallowReactiveMap:reactiveMap).get(o))return o;const g=isArray$8(o);if(!e&&g&&hasOwn$2(arrayInstrumentations,c))return Reflect.get(arrayInstrumentations,c,d);const r=Reflect.get(o,c,d);return(isSymbol$4(c)?builtInSymbols.has(c):isNonTrackableKeys(c))||(e||track(o,"get",c),t)?r:isRef$1(r)?g&&isIntegerKey(c)?r:r.value:isObject$6(r)?e?readonly(r):reactive(r):r}}const set$1=createSetter(),shallowSet=createSetter(!0);function createSetter(e=!1){return function(n,o,c,d){let g=n[o];if(isReadonly(g)&&isRef$1(g)&&!isRef$1(c))return!1;if(!e&&(!isShallow$1(c)&&!isReadonly(c)&&(g=toRaw$1(g),c=toRaw$1(c)),!isArray$8(n)&&isRef$1(g)&&!isRef$1(c)))return g.value=c,!0;const r=isArray$8(n)&&isIntegerKey(o)?Number(o)<n.length:hasOwn$2(n,o),v=Reflect.set(n,o,c,d);return n===toRaw$1(d)&&(r?hasChanged(c,g)&&trigger$1(n,"set",o,c,g):trigger$1(n,"add",o,c)),v}}function deleteProperty(e,t){const n=hasOwn$2(e,t),o=e[t],c=Reflect.deleteProperty(e,t);return c&&n&&trigger$1(e,"delete",t,void 0,o),c}function has$4(e,t){const n=Reflect.has(e,t);return(!isSymbol$4(t)||!builtInSymbols.has(t))&&track(e,"has",t),n}function ownKeys(e){return track(e,"iterate",isArray$8(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}const mutableHandlers={get:get$1,set:set$1,deleteProperty,has:has$4,ownKeys},readonlyHandlers={get:readonlyGet,set(e,t){return process.env.NODE_ENV!=="production"&&warn$4(`Set operation on key "${String(t)}" failed: target is readonly.`,e),!0},deleteProperty(e,t){return process.env.NODE_ENV!=="production"&&warn$4(`Delete operation on key "${String(t)}" failed: target is readonly.`,e),!0}},shallowReactiveHandlers=extend$4({},mutableHandlers,{get:shallowGet,set:shallowSet}),shallowReadonlyHandlers=extend$4({},readonlyHandlers,{get:shallowReadonlyGet}),toShallow=e=>e,getProto$1=e=>Reflect.getPrototypeOf(e);function get$1$1(e,t,n=!1,o=!1){e=e.__v_raw;const c=toRaw$1(e),d=toRaw$1(t);n||(t!==d&&track(c,"get",t),track(c,"get",d));const{has:g}=getProto$1(c),r=o?toShallow:n?toReadonly:toReactive;if(g.call(c,t))return r(e.get(t));if(g.call(c,d))return r(e.get(d));e!==c&&e.get(t)}function has$1$1(e,t=!1){const n=this.__v_raw,o=toRaw$1(n),c=toRaw$1(e);return t||(e!==c&&track(o,"has",e),track(o,"has",c)),e===c?n.has(e):n.has(e)||n.has(c)}function size(e,t=!1){return e=e.__v_raw,!t&&track(toRaw$1(e),"iterate",ITERATE_KEY),Reflect.get(e,"size",e)}function add(e){e=toRaw$1(e);const t=toRaw$1(this);return getProto$1(t).has.call(t,e)||(t.add(e),trigger$1(t,"add",e,e)),this}function set$1$1(e,t){t=toRaw$1(t);const n=toRaw$1(this),{has:o,get:c}=getProto$1(n);let d=o.call(n,e);d?process.env.NODE_ENV!=="production"&&checkIdentityKeys(n,o,e):(e=toRaw$1(e),d=o.call(n,e));const g=c.call(n,e);return n.set(e,t),d?hasChanged(t,g)&&trigger$1(n,"set",e,t,g):trigger$1(n,"add",e,t),this}function deleteEntry(e){const t=toRaw$1(this),{has:n,get:o}=getProto$1(t);let c=n.call(t,e);c?process.env.NODE_ENV!=="production"&&checkIdentityKeys(t,n,e):(e=toRaw$1(e),c=n.call(t,e));const d=o?o.call(t,e):void 0,g=t.delete(e);return c&&trigger$1(t,"delete",e,void 0,d),g}function clear(){const e=toRaw$1(this),t=e.size!==0,n=process.env.NODE_ENV!=="production"?isMap$1(e)?new Map(e):new Set(e):void 0,o=e.clear();return t&&trigger$1(e,"clear",void 0,void 0,n),o}function createForEach(e,t){return function(o,c){const d=this,g=d.__v_raw,r=toRaw$1(g),v=t?toShallow:e?toReadonly:toReactive;return!e&&track(r,"iterate",ITERATE_KEY),g.forEach((E,w)=>o.call(c,v(E),v(w),d))}}function createIterableMethod(e,t,n){return function(...o){const c=this.__v_raw,d=toRaw$1(c),g=isMap$1(d),r=e==="entries"||e===Symbol.iterator&&g,v=e==="keys"&&g,E=c[e](...o),w=n?toShallow:t?toReadonly:toReactive;return!t&&track(d,"iterate",v?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:T,done:S}=E.next();return S?{value:T,done:S}:{value:r?[w(T[0]),w(T[1])]:w(T),done:S}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...t){if(process.env.NODE_ENV!=="production"){const n=t[0]?`on key "${t[0]}" `:"";console.warn(`${capitalize$1(e)} operation ${n}failed: target is readonly.`,toRaw$1(this))}return e==="delete"?!1:this}}function createInstrumentations(){const e={get(d){return get$1$1(this,d)},get size(){return size(this)},has:has$1$1,add,set:set$1$1,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},t={get(d){return get$1$1(this,d,!1,!0)},get size(){return size(this)},has:has$1$1,add,set:set$1$1,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},n={get(d){return get$1$1(this,d,!0)},get size(){return size(this,!0)},has(d){return has$1$1.call(this,d,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},o={get(d){return get$1$1(this,d,!0,!0)},get size(){return size(this,!0)},has(d){return has$1$1.call(this,d,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(d=>{e[d]=createIterableMethod(d,!1,!1),n[d]=createIterableMethod(d,!0,!1),t[d]=createIterableMethod(d,!1,!0),o[d]=createIterableMethod(d,!0,!0)}),[e,n,t,o]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(e,t){const n=t?e?shallowReadonlyInstrumentations:shallowInstrumentations:e?readonlyInstrumentations:mutableInstrumentations;return(o,c,d)=>c==="__v_isReactive"?!e:c==="__v_isReadonly"?e:c==="__v_raw"?o:Reflect.get(hasOwn$2(n,c)&&c in o?n:o,c,d)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)};function checkIdentityKeys(e,t,n){const o=toRaw$1(n);if(o!==n&&t.call(e,o)){const c=toRawType(e);console.warn(`Reactive ${c} contains both the raw and reactive versions of the same object${c==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(e){return createReactiveObject(e,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(e,t,n,o,c){if(!isObject$6(e))return process.env.NODE_ENV!=="production"&&console.warn(`value cannot be made reactive: ${String(e)}`),e;if(e.__v_raw&&!(t&&e.__v_isReactive))return e;const d=c.get(e);if(d)return d;const g=getTargetType(e);if(g===0)return e;const r=new Proxy(e,g===2?o:n);return c.set(e,r),r}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!!(e&&e.__v_isReactive)}function isReadonly(e){return!!(e&&e.__v_isReadonly)}function isShallow$1(e){return!!(e&&e.__v_isShallow)}function isProxy(e){return isReactive(e)||isReadonly(e)}function toRaw$1(e){const t=e&&e.__v_raw;return t?toRaw$1(t):e}function markRaw(e){return def(e,"__v_skip",!0),e}const toReactive=e=>isObject$6(e)?reactive(e):e,toReadonly=e=>isObject$6(e)?readonly(e):e;function trackRefValue(e){shouldTrack&&activeEffect&&(e=toRaw$1(e),process.env.NODE_ENV!=="production"?trackEffects(e.dep||(e.dep=createDep()),{target:e,type:"get",key:"value"}):trackEffects(e.dep||(e.dep=createDep())))}function triggerRefValue(e,t){e=toRaw$1(e),e.dep&&(process.env.NODE_ENV!=="production"?triggerEffects(e.dep,{target:e,type:"set",key:"value",newValue:t}):triggerEffects(e.dep))}function isRef$1(e){return!!(e&&e.__v_isRef===!0)}function ref(e){return createRef(e,!1)}function shallowRef(e){return createRef(e,!0)}function createRef(e,t){return isRef$1(e)?e:new RefImpl(e,t)}class RefImpl{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:toRaw$1(t),this._value=n?t:toReactive(t)}get value(){return trackRefValue(this),this._value}set value(t){const n=this.__v_isShallow||isShallow$1(t)||isReadonly(t);t=n?t:toRaw$1(t),hasChanged(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:toReactive(t),triggerRefValue(this,t))}}function triggerRef(e){triggerRefValue(e,process.env.NODE_ENV!=="production"?e.value:void 0)}function unref(e){return isRef$1(e)?e.value:e}const shallowUnwrapHandlers={get:(e,t,n)=>unref(Reflect.get(e,t,n)),set:(e,t,n,o)=>{const c=e[t];return isRef$1(c)&&!isRef$1(n)?(c.value=n,!0):Reflect.set(e,t,n,o)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}class CustomRefImpl{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:o}=t(()=>trackRefValue(this),()=>triggerRefValue(this));this._get=n,this._set=o}get value(){return this._get()}set value(t){this._set(t)}}function customRef(e){return new CustomRefImpl(e)}function toRefs(e){process.env.NODE_ENV!=="production"&&!isProxy(e)&&console.warn("toRefs() expects a reactive object but received a plain one.");const t=isArray$8(e)?new Array(e.length):{};for(const n in e)t[n]=toRef(e,n);return t}class ObjectRefImpl{constructor(t,n,o){this._object=t,this._key=n,this._defaultValue=o,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function toRef(e,t,n){const o=e[t];return isRef$1(o)?o:new ObjectRefImpl(e,t,n)}var _a$1;class ComputedRefImpl{constructor(t,n,o,c){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[_a$1]=!1,this._dirty=!0,this.effect=new ReactiveEffect(t,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!c,this.__v_isReadonly=o}get value(){const t=toRaw$1(this);return trackRefValue(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}_a$1="__v_isReadonly";function computed$1(e,t,n=!1){let o,c;const d=isFunction$1(e);d?(o=e,c=process.env.NODE_ENV!=="production"?()=>{console.warn("Write operation failed: computed value is readonly")}:NOOP):(o=e.get,c=e.set);const g=new ComputedRefImpl(o,c,d||!c,n);return process.env.NODE_ENV!=="production"&&t&&!n&&(g.effect.onTrack=t.onTrack,g.effect.onTrigger=t.onTrigger),g}const stack$1=[];function pushWarningContext$1(e){stack$1.push(e)}function popWarningContext$1(){stack$1.pop()}function warn$3(e,...t){pauseTracking();const n=stack$1.length?stack$1[stack$1.length-1].component:null,o=n&&n.appContext.config.warnHandler,c=getComponentTrace$1();if(o)callWithErrorHandling$1(o,n,11,[e+t.join(""),n&&n.proxy,c.map(({vnode:d})=>`at <${formatComponentName$1(n,d.type)}>`).join(`
`),c]);else{const d=[`[Vue warn]: ${e}`,...t];c.length&&d.push(`
`,...formatTrace$1(c)),console.warn(...d)}resetTracking()}function getComponentTrace$1(){let e=stack$1[stack$1.length-1];if(!e)return[];const t=[];for(;e;){const n=t[0];n&&n.vnode===e?n.recurseCount++:t.push({vnode:e,recurseCount:0});const o=e.component&&e.component.parent;e=o&&o.vnode}return t}function formatTrace$1(e){const t=[];return e.forEach((n,o)=>{t.push(...o===0?[]:[`
`],...formatTraceEntry$1(n))}),t}function formatTraceEntry$1({vnode:e,recurseCount:t}){const n=t>0?`... (${t} recursive calls)`:"",o=e.component?e.component.parent==null:!1,c=` at <${formatComponentName$1(e.component,e.type,o)}`,d=">"+n;return e.props?[c,...formatProps$1(e.props),d]:[c+d]}function formatProps$1(e){const t=[],n=Object.keys(e);return n.slice(0,3).forEach(o=>{t.push(...formatProp$1(o,e[o]))}),n.length>3&&t.push(" ..."),t}function formatProp$1(e,t,n){return isString$2(t)?(t=JSON.stringify(t),n?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?n?t:[`${e}=${t}`]:isRef$1(t)?(t=formatProp$1(e,toRaw$1(t.value),!0),n?t:[`${e}=Ref<`,t,">"]):isFunction$1(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=toRaw$1(t),n?t:[`${e}=`,t])}const ErrorTypeStrings$1={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",[0]:"setup function",[1]:"render function",[2]:"watcher getter",[3]:"watcher callback",[4]:"watcher cleanup function",[5]:"native event handler",[6]:"component event handler",[7]:"vnode hook",[8]:"directive hook",[9]:"transition hook",[10]:"app errorHandler",[11]:"app warnHandler",[12]:"ref function",[13]:"async component loader",[14]:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/core"};function callWithErrorHandling$1(e,t,n,o){let c;try{c=o?e(...o):e()}catch(d){handleError$1(d,t,n)}return c}function callWithAsyncErrorHandling(e,t,n,o){if(isFunction$1(e)){const d=callWithErrorHandling$1(e,t,n,o);return d&&isPromise(d)&&d.catch(g=>{handleError$1(g,t,n)}),d}const c=[];for(let d=0;d<e.length;d++)c.push(callWithAsyncErrorHandling(e[d],t,n,o));return c}function handleError$1(e,t,n,o=!0){const c=t?t.vnode:null;if(t){let d=t.parent;const g=t.proxy,r=process.env.NODE_ENV!=="production"?ErrorTypeStrings$1[n]:n;for(;d;){const E=d.ec;if(E){for(let w=0;w<E.length;w++)if(E[w](e,g,r)===!1)return}d=d.parent}const v=t.appContext.config.errorHandler;if(v){callWithErrorHandling$1(v,null,10,[e,g,r]);return}}logError$1(e,n,c,o)}function logError$1(e,t,n,o=!0){if(process.env.NODE_ENV!=="production"){const c=ErrorTypeStrings$1[t];if(n&&pushWarningContext$1(n),warn$3(`Unhandled error${c?` during execution of ${c}`:""}`),n&&popWarningContext$1(),o)throw e;console.error(e)}else console.error(e)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;const RECURSION_LIMIT=100;function nextTick$1(e){const t=currentFlushPromise||resolvedPromise;return e?t.then(this?e.bind(this):e):t}function findInsertionIndex(e){let t=flushIndex+1,n=queue.length;for(;t<n;){const o=t+n>>>1;getId(queue[o])<e?t=o+1:n=o}return t}function queueJob(e){(!queue.length||!queue.includes(e,isFlushing&&e.allowRecurse?flushIndex+1:flushIndex))&&(e.id==null?queue.push(e):queue.splice(findInsertionIndex(e.id),0,e),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(e){const t=queue.indexOf(e);t>flushIndex&&queue.splice(t,1)}function queuePostFlushCb(e){isArray$8(e)?pendingPostFlushCbs.push(...e):(!activePostFlushCbs||!activePostFlushCbs.includes(e,e.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(e),queueFlush()}function flushPreFlushCbs(e,t=isFlushing?flushIndex+1:0){for(process.env.NODE_ENV!=="production"&&(e=e||new Map);t<queue.length;t++){const n=queue[t];if(n&&n.pre){if(process.env.NODE_ENV!=="production"&&checkRecursiveUpdates(e,n))continue;queue.splice(t,1),t--,n()}}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const t=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...t);return}for(activePostFlushCbs=t,process.env.NODE_ENV!=="production"&&(e=e||new Map),activePostFlushCbs.sort((n,o)=>getId(n)-getId(o)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)process.env.NODE_ENV!=="production"&&checkRecursiveUpdates(e,activePostFlushCbs[postFlushIndex])||activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>e.id==null?1/0:e.id,comparator=(e,t)=>{const n=getId(e)-getId(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function flushJobs(e){isFlushPending=!1,isFlushing=!0,process.env.NODE_ENV!=="production"&&(e=e||new Map),queue.sort(comparator);const t=process.env.NODE_ENV!=="production"?n=>checkRecursiveUpdates(e,n):NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const n=queue[flushIndex];if(n&&n.active!==!1){if(process.env.NODE_ENV!=="production"&&t(n))continue;callWithErrorHandling$1(n,null,14)}}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(e),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs(e)}}function checkRecursiveUpdates(e,t){if(!e.has(t))e.set(t,1);else{const n=e.get(t);if(n>RECURSION_LIMIT){const o=t.ownerInstance,c=o&&getComponentName$1(o.type);return warn$3(`Maximum recursive updates exceeded${c?` in component <${c}>`:""}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`),!0}else e.set(t,n+1)}}let isHmrUpdating=!1;const hmrDirtyComponents=new Set;process.env.NODE_ENV!=="production"&&(getGlobalThis().__VUE_HMR_RUNTIME__={createRecord:tryWrap(createRecord),rerender:tryWrap(rerender),reload:tryWrap(reload)});const map=new Map;function registerHMR(e){const t=e.type.__hmrId;let n=map.get(t);n||(createRecord(t,e.type),n=map.get(t)),n.instances.add(e)}function unregisterHMR(e){map.get(e.type.__hmrId).instances.delete(e)}function createRecord(e,t){return map.has(e)?!1:(map.set(e,{initialDef:normalizeClassComponent(t),instances:new Set}),!0)}function normalizeClassComponent(e){return isClassComponent(e)?e.__vccOpts:e}function rerender(e,t){const n=map.get(e);!n||(n.initialDef.render=t,[...n.instances].forEach(o=>{t&&(o.render=t,normalizeClassComponent(o.type).render=t),o.renderCache=[],isHmrUpdating=!0,o.update(),isHmrUpdating=!1}))}function reload(e,t){const n=map.get(e);if(!n)return;t=normalizeClassComponent(t),updateComponentDef(n.initialDef,t);const o=[...n.instances];for(const c of o){const d=normalizeClassComponent(c.type);hmrDirtyComponents.has(d)||(d!==n.initialDef&&updateComponentDef(d,t),hmrDirtyComponents.add(d)),c.appContext.optionsCache.delete(c.type),c.ceReload?(hmrDirtyComponents.add(d),c.ceReload(t.styles),hmrDirtyComponents.delete(d)):c.parent?(queueJob(c.parent.update),c.parent.type.__asyncLoader&&c.parent.ceReload&&c.parent.ceReload(t.styles)):c.appContext.reload?c.appContext.reload():typeof window<"u"?window.location.reload():console.warn("[HMR] Root or manually mounted instance modified. Full reload required.")}queuePostFlushCb(()=>{for(const c of o)hmrDirtyComponents.delete(normalizeClassComponent(c.type))})}function updateComponentDef(e,t){extend$4(e,t);for(const n in e)n!=="__file"&&!(n in t)&&delete e[n]}function tryWrap(e){return(t,n)=>{try{return e(t,n)}catch(o){console.error(o),console.warn("[HMR] Something went wrong during Vue component hot-reload. Full reload required.")}}}let devtools,buffer=[],devtoolsNotInstalled=!1;function emit(e,...t){devtools?devtools.emit(e,...t):devtoolsNotInstalled||buffer.push({event:e,args:t})}function setDevtoolsHook(e,t){var n,o;devtools=e,devtools?(devtools.enabled=!0,buffer.forEach(({event:c,args:d})=>devtools.emit(c,...d)),buffer=[]):typeof window<"u"&&window.HTMLElement&&!(!((o=(n=window.navigator)===null||n===void 0?void 0:n.userAgent)===null||o===void 0)&&o.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(d=>{setDevtoolsHook(d,t)}),setTimeout(()=>{devtools||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,devtoolsNotInstalled=!0,buffer=[])},3e3)):(devtoolsNotInstalled=!0,buffer=[])}function devtoolsInitApp(e,t){emit("app:init",e,t,{Fragment,Text,Comment:Comment$1,Static})}function devtoolsUnmountApp(e){emit("app:unmount",e)}const devtoolsComponentAdded=createDevtoolsComponentHook("component:added"),devtoolsComponentUpdated=createDevtoolsComponentHook("component:updated"),_devtoolsComponentRemoved=createDevtoolsComponentHook("component:removed"),devtoolsComponentRemoved=e=>{devtools&&typeof devtools.cleanupBuffer=="function"&&!devtools.cleanupBuffer(e)&&_devtoolsComponentRemoved(e)};function createDevtoolsComponentHook(e){return t=>{emit(e,t.appContext.app,t.uid,t.parent?t.parent.uid:void 0,t)}}const devtoolsPerfStart=createDevtoolsPerformanceHook("perf:start"),devtoolsPerfEnd=createDevtoolsPerformanceHook("perf:end");function createDevtoolsPerformanceHook(e){return(t,n,o)=>{emit(e,t.appContext.app,t.uid,t,n,o)}}function devtoolsComponentEmit(e,t,n){emit("component:emit",e.appContext.app,e,t,n)}function emit$1(e,t,...n){if(e.isUnmounted)return;const o=e.vnode.props||EMPTY_OBJ;if(process.env.NODE_ENV!=="production"){const{emitsOptions:w,propsOptions:[T]}=e;if(w)if(!(t in w))(!T||!(toHandlerKey(t)in T))&&warn$3(`Component emitted event "${t}" but it is neither declared in the emits option nor as an "${toHandlerKey(t)}" prop.`);else{const S=w[t];isFunction$1(S)&&(S(...n)||warn$3(`Invalid event arguments: event validation failed for event "${t}".`))}}let c=n;const d=t.startsWith("update:"),g=d&&t.slice(7);if(g&&g in o){const w=`${g==="modelValue"?"model":g}Modifiers`,{number:T,trim:S}=o[w]||EMPTY_OBJ;S&&(c=n.map(N=>N.trim())),T&&(c=n.map(toNumber$2))}if(process.env.NODE_ENV!=="production"&&devtoolsComponentEmit(e,t,c),process.env.NODE_ENV!=="production"){const w=t.toLowerCase();w!==t&&o[toHandlerKey(w)]&&warn$3(`Event "${w}" is emitted in component ${formatComponentName$1(e,e.type)} but the handler is registered for "${t}". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "${hyphenate(t)}" instead of "${t}".`)}let r,v=o[r=toHandlerKey(t)]||o[r=toHandlerKey(camelize(t))];!v&&d&&(v=o[r=toHandlerKey(hyphenate(t))]),v&&callWithAsyncErrorHandling(v,e,6,c);const E=o[r+"Once"];if(E){if(!e.emitted)e.emitted={};else if(e.emitted[r])return;e.emitted[r]=!0,callWithAsyncErrorHandling(E,e,6,c)}}function normalizeEmitsOptions(e,t,n=!1){const o=t.emitsCache,c=o.get(e);if(c!==void 0)return c;const d=e.emits;let g={},r=!1;if(!isFunction$1(e)){const v=E=>{const w=normalizeEmitsOptions(E,t,!0);w&&(r=!0,extend$4(g,w))};!n&&t.mixins.length&&t.mixins.forEach(v),e.extends&&v(e.extends),e.mixins&&e.mixins.forEach(v)}return!d&&!r?(isObject$6(e)&&o.set(e,null),null):(isArray$8(d)?d.forEach(v=>g[v]=null):extend$4(g,d),isObject$6(e)&&o.set(e,g),g)}function isEmitListener(e,t){return!e||!isOn(t)?!1:(t=t.slice(2).replace(/Once$/,""),hasOwn$2(e,t[0].toLowerCase()+t.slice(1))||hasOwn$2(e,hyphenate(t))||hasOwn$2(e,t))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance$1(e){const t=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,t}function pushScopeId(e){currentScopeId=e}function popScopeId(){currentScopeId=null}const withScopeId=e=>withCtx;function withCtx(e,t=currentRenderingInstance,n){if(!t||e._n)return e;const o=(...c)=>{o._d&&setBlockTracking(-1);const d=setCurrentRenderingInstance$1(t);let g;try{g=e(...c)}finally{setCurrentRenderingInstance$1(d),o._d&&setBlockTracking(1)}return process.env.NODE_ENV!=="production"&&devtoolsComponentUpdated(t),g};return o._n=!0,o._c=!0,o._d=!0,o}let accessedAttrs=!1;function markAttrsAccessed(){accessedAttrs=!0}function renderComponentRoot$1(e){const{type:t,vnode:n,proxy:o,withProxy:c,props:d,propsOptions:[g],slots:r,attrs:v,emit:E,render:w,renderCache:T,data:S,setupState:N,ctx:L,inheritAttrs:P}=e;let O,V;const D=setCurrentRenderingInstance$1(e);process.env.NODE_ENV!=="production"&&(accessedAttrs=!1);try{if(n.shapeFlag&4){const Z=c||o;O=normalizeVNode$1(w.call(Z,Z,T,d,N,S,L)),V=v}else{const Z=t;process.env.NODE_ENV!=="production"&&v===d&&markAttrsAccessed(),O=normalizeVNode$1(Z.length>1?Z(d,process.env.NODE_ENV!=="production"?{get attrs(){return markAttrsAccessed(),v},slots:r,emit:E}:{attrs:v,slots:r,emit:E}):Z(d,null)),V=t.props?v:getFunctionalFallthrough(v)}}catch(Z){blockStack.length=0,handleError$1(Z,e,1),O=createVNode(Comment$1)}let U=O,W;if(process.env.NODE_ENV!=="production"&&O.patchFlag>0&&O.patchFlag&2048&&([U,W]=getChildRoot(O)),V&&P!==!1){const Z=Object.keys(V),{shapeFlag:re}=U;if(Z.length){if(re&7)g&&Z.some(isModelListener)&&(V=filterModelListeners(V,g)),U=cloneVNode(U,V);else if(process.env.NODE_ENV!=="production"&&!accessedAttrs&&U.type!==Comment$1){const ae=Object.keys(v),ce=[],ne=[];for(let le=0,de=ae.length;le<de;le++){const ie=ae[le];isOn(ie)?isModelListener(ie)||ce.push(ie[2].toLowerCase()+ie.slice(3)):ne.push(ie)}ne.length&&warn$3(`Extraneous non-props attributes (${ne.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes.`),ce.length&&warn$3(`Extraneous non-emits event listeners (${ce.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes. If the listener is intended to be a component custom event listener only, declare it using the "emits" option.`)}}}return n.dirs&&(process.env.NODE_ENV!=="production"&&!isElementRoot(U)&&warn$3("Runtime directive used on component with non-element root node. The directives will not function as intended."),U=cloneVNode(U),U.dirs=U.dirs?U.dirs.concat(n.dirs):n.dirs),n.transition&&(process.env.NODE_ENV!=="production"&&!isElementRoot(U)&&warn$3("Component inside <Transition> renders non-element root node that cannot be animated."),U.transition=n.transition),process.env.NODE_ENV!=="production"&&W?W(U):O=U,setCurrentRenderingInstance$1(D),O}const getChildRoot=e=>{const t=e.children,n=e.dynamicChildren,o=filterSingleRoot(t);if(!o)return[e,void 0];const c=t.indexOf(o),d=n?n.indexOf(o):-1,g=r=>{t[c]=r,n&&(d>-1?n[d]=r:r.patchFlag>0&&(e.dynamicChildren=[...n,r]))};return[normalizeVNode$1(o),g]};function filterSingleRoot(e){let t;for(let n=0;n<e.length;n++){const o=e[n];if(isVNode$1(o)){if(o.type!==Comment$1||o.children==="v-if"){if(t)return;t=o}}else return}return t}const getFunctionalFallthrough=e=>{let t;for(const n in e)(n==="class"||n==="style"||isOn(n))&&((t||(t={}))[n]=e[n]);return t},filterModelListeners=(e,t)=>{const n={};for(const o in e)(!isModelListener(o)||!(o.slice(9)in t))&&(n[o]=e[o]);return n},isElementRoot=e=>e.shapeFlag&7||e.type===Comment$1;function shouldUpdateComponent(e,t,n){const{props:o,children:c,component:d}=e,{props:g,children:r,patchFlag:v}=t,E=d.emitsOptions;if(process.env.NODE_ENV!=="production"&&(c||r)&&isHmrUpdating||t.dirs||t.transition)return!0;if(n&&v>=0){if(v&1024)return!0;if(v&16)return o?hasPropsChanged(o,g,E):!!g;if(v&8){const w=t.dynamicProps;for(let T=0;T<w.length;T++){const S=w[T];if(g[S]!==o[S]&&!isEmitListener(E,S))return!0}}}else return(c||r)&&(!r||!r.$stable)?!0:o===g?!1:o?g?hasPropsChanged(o,g,E):!0:!!g;return!1}function hasPropsChanged(e,t,n){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let c=0;c<o.length;c++){const d=o[c];if(t[d]!==e[d]&&!isEmitListener(n,d))return!0}return!1}function updateHOCHostEl({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const isSuspense=e=>e.__isSuspense,SuspenseImpl={name:"Suspense",__isSuspense:!0,process(e,t,n,o,c,d,g,r,v,E){e==null?mountSuspense(t,n,o,c,d,g,r,v,E):patchSuspense(e,t,n,o,c,g,r,v,E)},hydrate:hydrateSuspense,create:createSuspenseBoundary,normalize:normalizeSuspenseChildren},Suspense=SuspenseImpl;function triggerEvent(e,t){const n=e.props&&e.props[t];isFunction$1(n)&&n()}function mountSuspense(e,t,n,o,c,d,g,r,v){const{p:E,o:{createElement:w}}=v,T=w("div"),S=e.suspense=createSuspenseBoundary(e,c,o,t,T,n,d,g,r,v);E(null,S.pendingBranch=e.ssContent,T,null,o,S,d,g),S.deps>0?(triggerEvent(e,"onPending"),triggerEvent(e,"onFallback"),E(null,e.ssFallback,t,n,o,null,d,g),setActiveBranch(S,e.ssFallback)):S.resolve()}function patchSuspense(e,t,n,o,c,d,g,r,{p:v,um:E,o:{createElement:w}}){const T=t.suspense=e.suspense;T.vnode=t,t.el=e.el;const S=t.ssContent,N=t.ssFallback,{activeBranch:L,pendingBranch:P,isInFallback:O,isHydrating:V}=T;if(P)T.pendingBranch=S,isSameVNodeType(S,P)?(v(P,S,T.hiddenContainer,null,c,T,d,g,r),T.deps<=0?T.resolve():O&&(v(L,N,n,o,c,null,d,g,r),setActiveBranch(T,N))):(T.pendingId++,V?(T.isHydrating=!1,T.activeBranch=P):E(P,c,T),T.deps=0,T.effects.length=0,T.hiddenContainer=w("div"),O?(v(null,S,T.hiddenContainer,null,c,T,d,g,r),T.deps<=0?T.resolve():(v(L,N,n,o,c,null,d,g,r),setActiveBranch(T,N))):L&&isSameVNodeType(S,L)?(v(L,S,n,o,c,T,d,g,r),T.resolve(!0)):(v(null,S,T.hiddenContainer,null,c,T,d,g,r),T.deps<=0&&T.resolve()));else if(L&&isSameVNodeType(S,L))v(L,S,n,o,c,T,d,g,r),setActiveBranch(T,S);else if(triggerEvent(t,"onPending"),T.pendingBranch=S,T.pendingId++,v(null,S,T.hiddenContainer,null,c,T,d,g,r),T.deps<=0)T.resolve();else{const{timeout:D,pendingId:U}=T;D>0?setTimeout(()=>{T.pendingId===U&&T.fallback(N)},D):D===0&&T.fallback(N)}}let hasWarned=!1;function createSuspenseBoundary(e,t,n,o,c,d,g,r,v,E,w=!1){process.env.NODE_ENV!=="production"&&!0&&!hasWarned&&(hasWarned=!0,console[console.info?"info":"log"]("<Suspense> is an experimental feature and its API will likely change."));const{p:T,m:S,um:N,n:L,o:{parentNode:P,remove:O}}=E,V=toNumber$2(e.props&&e.props.timeout),D={vnode:e,parent:t,parentComponent:n,isSVG:g,container:o,hiddenContainer:c,anchor:d,deps:0,pendingId:0,timeout:typeof V=="number"?V:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:w,isUnmounted:!1,effects:[],resolve(U=!1){if(process.env.NODE_ENV!=="production"){if(!U&&!D.pendingBranch)throw new Error("suspense.resolve() is called without a pending branch.");if(D.isUnmounted)throw new Error("suspense.resolve() is called on an already unmounted suspense boundary.")}const{vnode:W,activeBranch:Z,pendingBranch:re,pendingId:ae,effects:ce,parentComponent:ne,container:le}=D;if(D.isHydrating)D.isHydrating=!1;else if(!U){const ve=Z&&re.transition&&re.transition.mode==="out-in";ve&&(Z.transition.afterLeave=()=>{ae===D.pendingId&&S(re,le,Pe,0)});let{anchor:Pe}=D;Z&&(Pe=L(Z),N(Z,ne,D,!0)),ve||S(re,le,Pe,0)}setActiveBranch(D,re),D.pendingBranch=null,D.isInFallback=!1;let de=D.parent,ie=!1;for(;de;){if(de.pendingBranch){de.effects.push(...ce),ie=!0;break}de=de.parent}ie||queuePostFlushCb(ce),D.effects=[],triggerEvent(W,"onResolve")},fallback(U){if(!D.pendingBranch)return;const{vnode:W,activeBranch:Z,parentComponent:re,container:ae,isSVG:ce}=D;triggerEvent(W,"onFallback");const ne=L(Z),le=()=>{!D.isInFallback||(T(null,U,ae,ne,re,null,ce,r,v),setActiveBranch(D,U))},de=U.transition&&U.transition.mode==="out-in";de&&(Z.transition.afterLeave=le),D.isInFallback=!0,N(Z,re,null,!0),de||le()},move(U,W,Z){D.activeBranch&&S(D.activeBranch,U,W,Z),D.container=U},next(){return D.activeBranch&&L(D.activeBranch)},registerDep(U,W){const Z=!!D.pendingBranch;Z&&D.deps++;const re=U.vnode.el;U.asyncDep.catch(ae=>{handleError$1(ae,U,0)}).then(ae=>{if(U.isUnmounted||D.isUnmounted||D.pendingId!==U.suspenseId)return;U.asyncResolved=!0;const{vnode:ce}=U;process.env.NODE_ENV!=="production"&&pushWarningContext$1(ce),handleSetupResult(U,ae,!1),re&&(ce.el=re);const ne=!re&&U.subTree.el;W(U,ce,P(re||U.subTree.el),re?null:L(U.subTree),D,g,v),ne&&O(ne),updateHOCHostEl(U,ce.el),process.env.NODE_ENV!=="production"&&popWarningContext$1(),Z&&--D.deps===0&&D.resolve()})},unmount(U,W){D.isUnmounted=!0,D.activeBranch&&N(D.activeBranch,n,U,W),D.pendingBranch&&N(D.pendingBranch,n,U,W)}};return D}function hydrateSuspense(e,t,n,o,c,d,g,r,v){const E=t.suspense=createSuspenseBoundary(t,o,n,e.parentNode,document.createElement("div"),null,c,d,g,r,!0),w=v(e,E.pendingBranch=t.ssContent,n,E,d,g);return E.deps===0&&E.resolve(),w}function normalizeSuspenseChildren(e){const{shapeFlag:t,children:n}=e,o=t&32;e.ssContent=normalizeSuspenseSlot(o?n.default:n),e.ssFallback=o?normalizeSuspenseSlot(n.fallback):createVNode(Comment$1)}function normalizeSuspenseSlot(e){let t;if(isFunction$1(e)){const n=isBlockTreeEnabled&&e._c;n&&(e._d=!1,openBlock()),e=e(),n&&(e._d=!0,t=currentBlock,closeBlock())}if(isArray$8(e)){const n=filterSingleRoot(e);process.env.NODE_ENV!=="production"&&!n&&warn$3("<Suspense> slots expect a single root node."),e=n}return e=normalizeVNode$1(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(n=>n!==e)),e}function queueEffectWithSuspense(e,t){t&&t.pendingBranch?isArray$8(e)?t.effects.push(...e):t.effects.push(e):queuePostFlushCb(e)}function setActiveBranch(e,t){e.activeBranch=t;const{vnode:n,parentComponent:o}=e,c=n.el=t.el;o&&o.subTree===n&&(o.vnode.el=c,updateHOCHostEl(o,c))}function provide(e,t){if(!currentInstance)process.env.NODE_ENV!=="production"&&warn$3("provide() can only be used inside setup().");else{let n=currentInstance.provides;const o=currentInstance.parent&&currentInstance.parent.provides;o===n&&(n=currentInstance.provides=Object.create(o)),n[e]=t}}function inject(e,t,n=!1){const o=currentInstance||currentRenderingInstance;if(o){const c=o.parent==null?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides;if(c&&e in c)return c[e];if(arguments.length>1)return n&&isFunction$1(t)?t.call(o.proxy):t;process.env.NODE_ENV!=="production"&&warn$3(`injection "${String(e)}" not found.`)}else process.env.NODE_ENV!=="production"&&warn$3("inject() can only be used inside setup() or functional components.")}function watchEffect(e,t){return doWatch(e,null,t)}function watchPostEffect(e,t){return doWatch(e,null,process.env.NODE_ENV!=="production"?Object.assign(Object.assign({},t),{flush:"post"}):{flush:"post"})}function watchSyncEffect(e,t){return doWatch(e,null,process.env.NODE_ENV!=="production"?Object.assign(Object.assign({},t),{flush:"sync"}):{flush:"sync"})}const INITIAL_WATCHER_VALUE={};function watch(e,t,n){return process.env.NODE_ENV!=="production"&&!isFunction$1(t)&&warn$3("`watch(fn, options?)` signature has been moved to a separate API. Use `watchEffect(fn, options?)` instead. `watch` now only supports `watch(source, cb, options?) signature."),doWatch(e,t,n)}function doWatch(e,t,{immediate:n,deep:o,flush:c,onTrack:d,onTrigger:g}=EMPTY_OBJ){process.env.NODE_ENV!=="production"&&!t&&(n!==void 0&&warn$3('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),o!==void 0&&warn$3('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'));const r=D=>{warn$3("Invalid watch source: ",D,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},v=currentInstance;let E,w=!1,T=!1;if(isRef$1(e)?(E=()=>e.value,w=isShallow$1(e)):isReactive(e)?(E=()=>e,o=!0):isArray$8(e)?(T=!0,w=e.some(D=>isReactive(D)||isShallow$1(D)),E=()=>e.map(D=>{if(isRef$1(D))return D.value;if(isReactive(D))return traverse(D);if(isFunction$1(D))return callWithErrorHandling$1(D,v,2);process.env.NODE_ENV!=="production"&&r(D)})):isFunction$1(e)?t?E=()=>callWithErrorHandling$1(e,v,2):E=()=>{if(!(v&&v.isUnmounted))return S&&S(),callWithAsyncErrorHandling(e,v,3,[N])}:(E=NOOP,process.env.NODE_ENV!=="production"&&r(e)),t&&o){const D=E;E=()=>traverse(D())}let S,N=D=>{S=V.onStop=()=>{callWithErrorHandling$1(D,v,4)}};if(isInSSRComponentSetup)return N=NOOP,t?n&&callWithAsyncErrorHandling(t,v,3,[E(),T?[]:void 0,N]):E(),NOOP;let L=T?[]:INITIAL_WATCHER_VALUE;const P=()=>{if(!!V.active)if(t){const D=V.run();(o||w||(T?D.some((U,W)=>hasChanged(U,L[W])):hasChanged(D,L)))&&(S&&S(),callWithAsyncErrorHandling(t,v,3,[D,L===INITIAL_WATCHER_VALUE?void 0:L,N]),L=D)}else V.run()};P.allowRecurse=!!t;let O;c==="sync"?O=P:c==="post"?O=()=>queuePostRenderEffect(P,v&&v.suspense):(P.pre=!0,v&&(P.id=v.uid),O=()=>queueJob(P));const V=new ReactiveEffect(E,O);return process.env.NODE_ENV!=="production"&&(V.onTrack=d,V.onTrigger=g),t?n?P():L=V.run():c==="post"?queuePostRenderEffect(V.run.bind(V),v&&v.suspense):V.run(),()=>{V.stop(),v&&v.scope&&remove$2(v.scope.effects,V)}}function instanceWatch(e,t,n){const o=this.proxy,c=isString$2(e)?e.includes(".")?createPathGetter(o,e):()=>o[e]:e.bind(o,o);let d;isFunction$1(t)?d=t:(d=t.handler,n=t);const g=currentInstance;setCurrentInstance(this);const r=doWatch(c,d.bind(o),n);return g?setCurrentInstance(g):unsetCurrentInstance(),r}function createPathGetter(e,t){const n=t.split(".");return()=>{let o=e;for(let c=0;c<n.length&&o;c++)o=o[n[c]];return o}}function traverse(e,t){if(!isObject$6(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),isRef$1(e))traverse(e.value,t);else if(isArray$8(e))for(let n=0;n<e.length;n++)traverse(e[n],t);else if(isSet$1(e)||isMap$1(e))e.forEach(n=>{traverse(n,t)});else if(isPlainObject$1(e))for(const n in e)traverse(e[n],t);return e}function useTransitionState(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{e.isMounted=!0}),onBeforeUnmount(()=>{e.isUnmounting=!0}),e}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(e,{slots:t}){const n=getCurrentInstance(),o=useTransitionState();let c;return()=>{const d=t.default&&getTransitionRawChildren(t.default(),!0);if(!d||!d.length)return;let g=d[0];if(d.length>1){let P=!1;for(const O of d)if(O.type!==Comment$1){if(process.env.NODE_ENV!=="production"&&P){warn$3("<transition> can only be used on a single element or component. Use <transition-group> for lists.");break}if(g=O,P=!0,process.env.NODE_ENV==="production")break}}const r=toRaw$1(e),{mode:v}=r;if(process.env.NODE_ENV!=="production"&&v&&v!=="in-out"&&v!=="out-in"&&v!=="default"&&warn$3(`invalid <transition> mode: ${v}`),o.isLeaving)return emptyPlaceholder(g);const E=getKeepAliveChild(g);if(!E)return emptyPlaceholder(g);const w=resolveTransitionHooks(E,r,o,n);setTransitionHooks(E,w);const T=n.subTree,S=T&&getKeepAliveChild(T);let N=!1;const{getTransitionKey:L}=E.type;if(L){const P=L();c===void 0?c=P:P!==c&&(c=P,N=!0)}if(S&&S.type!==Comment$1&&(!isSameVNodeType(E,S)||N)){const P=resolveTransitionHooks(S,r,o,n);if(setTransitionHooks(S,P),v==="out-in")return o.isLeaving=!0,P.afterLeave=()=>{o.isLeaving=!1,n.update()},emptyPlaceholder(g);v==="in-out"&&E.type!==Comment$1&&(P.delayLeave=(O,V,D)=>{const U=getLeavingNodesForType(o,S);U[String(S.key)]=S,O._leaveCb=()=>{V(),O._leaveCb=void 0,delete w.delayedLeave},w.delayedLeave=D})}return g}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(e,t){const{leavingVNodes:n}=e;let o=n.get(t.type);return o||(o=Object.create(null),n.set(t.type,o)),o}function resolveTransitionHooks(e,t,n,o){const{appear:c,mode:d,persisted:g=!1,onBeforeEnter:r,onEnter:v,onAfterEnter:E,onEnterCancelled:w,onBeforeLeave:T,onLeave:S,onAfterLeave:N,onLeaveCancelled:L,onBeforeAppear:P,onAppear:O,onAfterAppear:V,onAppearCancelled:D}=t,U=String(e.key),W=getLeavingNodesForType(n,e),Z=(ce,ne)=>{ce&&callWithAsyncErrorHandling(ce,o,9,ne)},re=(ce,ne)=>{const le=ne[1];Z(ce,ne),isArray$8(ce)?ce.every(de=>de.length<=1)&&le():ce.length<=1&&le()},ae={mode:d,persisted:g,beforeEnter(ce){let ne=r;if(!n.isMounted)if(c)ne=P||r;else return;ce._leaveCb&&ce._leaveCb(!0);const le=W[U];le&&isSameVNodeType(e,le)&&le.el._leaveCb&&le.el._leaveCb(),Z(ne,[ce])},enter(ce){let ne=v,le=E,de=w;if(!n.isMounted)if(c)ne=O||v,le=V||E,de=D||w;else return;let ie=!1;const ve=ce._enterCb=Pe=>{ie||(ie=!0,Pe?Z(de,[ce]):Z(le,[ce]),ae.delayedLeave&&ae.delayedLeave(),ce._enterCb=void 0)};ne?re(ne,[ce,ve]):ve()},leave(ce,ne){const le=String(e.key);if(ce._enterCb&&ce._enterCb(!0),n.isUnmounting)return ne();Z(T,[ce]);let de=!1;const ie=ce._leaveCb=ve=>{de||(de=!0,ne(),ve?Z(L,[ce]):Z(N,[ce]),ce._leaveCb=void 0,W[le]===e&&delete W[le])};W[le]=e,S?re(S,[ce,ie]):ie()},clone(ce){return resolveTransitionHooks(ce,t,n,o)}};return ae}function emptyPlaceholder(e){if(isKeepAlive(e))return e=cloneVNode(e),e.children=null,e}function getKeepAliveChild(e){return isKeepAlive(e)?e.children?e.children[0]:void 0:e}function setTransitionHooks(e,t){e.shapeFlag&6&&e.component?setTransitionHooks(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function getTransitionRawChildren(e,t=!1,n){let o=[],c=0;for(let d=0;d<e.length;d++){let g=e[d];const r=n==null?g.key:String(n)+String(g.key!=null?g.key:d);g.type===Fragment?(g.patchFlag&128&&c++,o=o.concat(getTransitionRawChildren(g.children,t,r))):(t||g.type!==Comment$1)&&o.push(r!=null?cloneVNode(g,{key:r}):g)}if(c>1)for(let d=0;d<o.length;d++)o[d].patchFlag=-2;return o}function defineComponent(e){return isFunction$1(e)?{setup:e,name:e.name}:e}const isAsyncWrapper=e=>!!e.type.__asyncLoader;function defineAsyncComponent(e){isFunction$1(e)&&(e={loader:e});const{loader:t,loadingComponent:n,errorComponent:o,delay:c=200,timeout:d,suspensible:g=!0,onError:r}=e;let v=null,E,w=0;const T=()=>(w++,v=null,S()),S=()=>{let N;return v||(N=v=t().catch(L=>{if(L=L instanceof Error?L:new Error(String(L)),r)return new Promise((P,O)=>{r(L,()=>P(T()),()=>O(L),w+1)});throw L}).then(L=>{if(N!==v&&v)return v;if(process.env.NODE_ENV!=="production"&&!L&&warn$3("Async component loader resolved to undefined. If you are using retry(), make sure to return its return value."),L&&(L.__esModule||L[Symbol.toStringTag]==="Module")&&(L=L.default),process.env.NODE_ENV!=="production"&&L&&!isObject$6(L)&&!isFunction$1(L))throw new Error(`Invalid async component load result: ${L}`);return E=L,L}))};return defineComponent({name:"AsyncComponentWrapper",__asyncLoader:S,get __asyncResolved(){return E},setup(){const N=currentInstance;if(E)return()=>createInnerComp(E,N);const L=D=>{v=null,handleError$1(D,N,13,!o)};if(g&&N.suspense||isInSSRComponentSetup)return S().then(D=>()=>createInnerComp(D,N)).catch(D=>(L(D),()=>o?createVNode(o,{error:D}):null));const P=ref(!1),O=ref(),V=ref(!!c);return c&&setTimeout(()=>{V.value=!1},c),d!=null&&setTimeout(()=>{if(!P.value&&!O.value){const D=new Error(`Async component timed out after ${d}ms.`);L(D),O.value=D}},d),S().then(()=>{P.value=!0,N.parent&&isKeepAlive(N.parent.vnode)&&queueJob(N.parent.update)}).catch(D=>{L(D),O.value=D}),()=>{if(P.value&&E)return createInnerComp(E,N);if(O.value&&o)return createVNode(o,{error:O.value});if(n&&!V.value)return createVNode(n)}}})}function createInnerComp(e,{vnode:{ref:t,props:n,children:o,shapeFlag:c},parent:d}){const g=createVNode(e,n,o);return g.ref=t,g}const isKeepAlive=e=>e.type.__isKeepAlive,KeepAliveImpl={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=getCurrentInstance(),o=n.ctx;if(!o.renderer)return()=>{const D=t.default&&t.default();return D&&D.length===1?D[0]:D};const c=new Map,d=new Set;let g=null;process.env.NODE_ENV!=="production"&&(n.__v_cache=c);const r=n.suspense,{renderer:{p:v,m:E,um:w,o:{createElement:T}}}=o,S=T("div");o.activate=(D,U,W,Z,re)=>{const ae=D.component;E(D,U,W,0,r),v(ae.vnode,D,U,W,ae,r,Z,D.slotScopeIds,re),queuePostRenderEffect(()=>{ae.isDeactivated=!1,ae.a&&invokeArrayFns(ae.a);const ce=D.props&&D.props.onVnodeMounted;ce&&invokeVNodeHook(ce,ae.parent,D)},r),process.env.NODE_ENV!=="production"&&devtoolsComponentAdded(ae)},o.deactivate=D=>{const U=D.component;E(D,S,null,1,r),queuePostRenderEffect(()=>{U.da&&invokeArrayFns(U.da);const W=D.props&&D.props.onVnodeUnmounted;W&&invokeVNodeHook(W,U.parent,D),U.isDeactivated=!0},r),process.env.NODE_ENV!=="production"&&devtoolsComponentAdded(U)};function N(D){resetShapeFlag(D),w(D,n,r,!0)}function L(D){c.forEach((U,W)=>{const Z=getComponentName$1(U.type);Z&&(!D||!D(Z))&&P(W)})}function P(D){const U=c.get(D);!g||U.type!==g.type?N(U):g&&resetShapeFlag(g),c.delete(D),d.delete(D)}watch(()=>[e.include,e.exclude],([D,U])=>{D&&L(W=>matches(D,W)),U&&L(W=>!matches(U,W))},{flush:"post",deep:!0});let O=null;const V=()=>{O!=null&&c.set(O,getInnerChild(n.subTree))};return onMounted(V),onUpdated(V),onBeforeUnmount(()=>{c.forEach(D=>{const{subTree:U,suspense:W}=n,Z=getInnerChild(U);if(D.type===Z.type){resetShapeFlag(Z);const re=Z.component.da;re&&queuePostRenderEffect(re,W);return}N(D)})}),()=>{if(O=null,!t.default)return null;const D=t.default(),U=D[0];if(D.length>1)return process.env.NODE_ENV!=="production"&&warn$3("KeepAlive should contain exactly one component child."),g=null,D;if(!isVNode$1(U)||!(U.shapeFlag&4)&&!(U.shapeFlag&128))return g=null,U;let W=getInnerChild(U);const Z=W.type,re=getComponentName$1(isAsyncWrapper(W)?W.type.__asyncResolved||{}:Z),{include:ae,exclude:ce,max:ne}=e;if(ae&&(!re||!matches(ae,re))||ce&&re&&matches(ce,re))return g=W,U;const le=W.key==null?Z:W.key,de=c.get(le);return W.el&&(W=cloneVNode(W),U.shapeFlag&128&&(U.ssContent=W)),O=le,de?(W.el=de.el,W.component=de.component,W.transition&&setTransitionHooks(W,W.transition),W.shapeFlag|=512,d.delete(le),d.add(le)):(d.add(le),ne&&d.size>parseInt(ne,10)&&P(d.values().next().value)),W.shapeFlag|=256,g=W,isSuspense(U.type)?U:W}}},KeepAlive=KeepAliveImpl;function matches(e,t){return isArray$8(e)?e.some(n=>matches(n,t)):isString$2(e)?e.split(",").includes(t):e.test?e.test(t):!1}function onActivated(e,t){registerKeepAliveHook(e,"a",t)}function onDeactivated(e,t){registerKeepAliveHook(e,"da",t)}function registerKeepAliveHook(e,t,n=currentInstance){const o=e.__wdc||(e.__wdc=()=>{let c=n;for(;c;){if(c.isDeactivated)return;c=c.parent}return e()});if(injectHook(t,o,n),n){let c=n.parent;for(;c&&c.parent;)isKeepAlive(c.parent.vnode)&&injectToKeepAliveRoot(o,t,n,c),c=c.parent}}function injectToKeepAliveRoot(e,t,n,o){const c=injectHook(t,e,o,!0);onUnmounted(()=>{remove$2(o[t],c)},n)}function resetShapeFlag(e){let t=e.shapeFlag;t&256&&(t-=256),t&512&&(t-=512),e.shapeFlag=t}function getInnerChild(e){return e.shapeFlag&128?e.ssContent:e}function injectHook(e,t,n=currentInstance,o=!1){if(n){const c=n[e]||(n[e]=[]),d=t.__weh||(t.__weh=(...g)=>{if(n.isUnmounted)return;pauseTracking(),setCurrentInstance(n);const r=callWithAsyncErrorHandling(t,n,e,g);return unsetCurrentInstance(),resetTracking(),r});return o?c.unshift(d):c.push(d),d}else if(process.env.NODE_ENV!=="production"){const c=toHandlerKey(ErrorTypeStrings$1[e].replace(/ hook$/,""));warn$3(`${c} is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.`)}}const createHook=e=>(t,n=currentInstance)=>(!isInSSRComponentSetup||e==="sp")&&injectHook(e,(...o)=>t(...o),n),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,t=currentInstance){injectHook("ec",e,t)}function validateDirectiveName(e){isBuiltInDirective(e)&&warn$3("Do not use built-in directive ids as custom directive id: "+e)}function withDirectives(e,t){const n=currentRenderingInstance;if(n===null)return process.env.NODE_ENV!=="production"&&warn$3("withDirectives can only be used inside render functions."),e;const o=getExposeProxy(n)||n.proxy,c=e.dirs||(e.dirs=[]);for(let d=0;d<t.length;d++){let[g,r,v,E=EMPTY_OBJ]=t[d];isFunction$1(g)&&(g={mounted:g,updated:g}),g.deep&&traverse(r),c.push({dir:g,instance:o,value:r,oldValue:void 0,arg:v,modifiers:E})}return e}function invokeDirectiveHook(e,t,n,o){const c=e.dirs,d=t&&t.dirs;for(let g=0;g<c.length;g++){const r=c[g];d&&(r.oldValue=d[g].value);let v=r.dir[o];v&&(pauseTracking(),callWithAsyncErrorHandling(v,n,8,[e.el,r,e,t]),resetTracking())}}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(e,t){return resolveAsset(COMPONENTS,e,!0,t)||e}const NULL_DYNAMIC_COMPONENT=Symbol();function resolveDynamicComponent(e){return isString$2(e)?resolveAsset(COMPONENTS,e,!1)||e:e||NULL_DYNAMIC_COMPONENT}function resolveDirective(e){return resolveAsset(DIRECTIVES,e)}function resolveAsset(e,t,n=!0,o=!1){const c=currentRenderingInstance||currentInstance;if(c){const d=c.type;if(e===COMPONENTS){const r=getComponentName$1(d,!1);if(r&&(r===t||r===camelize(t)||r===capitalize$1(camelize(t))))return d}const g=resolve(c[e]||d[e],t)||resolve(c.appContext[e],t);if(!g&&o)return d;if(process.env.NODE_ENV!=="production"&&n&&!g){const r=e===COMPONENTS?`
If this is a native custom element, make sure to exclude it from component resolution via compilerOptions.isCustomElement.`:"";warn$3(`Failed to resolve ${e.slice(0,-1)}: ${t}${r}`)}return g}else process.env.NODE_ENV!=="production"&&warn$3(`resolve${capitalize$1(e.slice(0,-1))} can only be used in render() or setup().`)}function resolve(e,t){return e&&(e[t]||e[camelize(t)]||e[capitalize$1(camelize(t))])}function renderList(e,t,n,o){let c;const d=n&&n[o];if(isArray$8(e)||isString$2(e)){c=new Array(e.length);for(let g=0,r=e.length;g<r;g++)c[g]=t(e[g],g,void 0,d&&d[g])}else if(typeof e=="number"){process.env.NODE_ENV!=="production"&&!Number.isInteger(e)&&warn$3(`The v-for range expect an integer value but got ${e}.`),c=new Array(e);for(let g=0;g<e;g++)c[g]=t(g+1,g,void 0,d&&d[g])}else if(isObject$6(e))if(e[Symbol.iterator])c=Array.from(e,(g,r)=>t(g,r,void 0,d&&d[r]));else{const g=Object.keys(e);c=new Array(g.length);for(let r=0,v=g.length;r<v;r++){const E=g[r];c[r]=t(e[E],E,r,d&&d[r])}}else c=[];return n&&(n[o]=c),c}function createSlots(e,t){for(let n=0;n<t.length;n++){const o=t[n];if(isArray$8(o))for(let c=0;c<o.length;c++)e[o[c].name]=o[c].fn;else o&&(e[o.name]=o.key?(...c)=>{const d=o.fn(...c);return d&&(d.key=o.key),d}:o.fn)}return e}function renderSlot(e,t,n={},o,c){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return createVNode("slot",t==="default"?null:{name:t},o&&o());let d=e[t];process.env.NODE_ENV!=="production"&&d&&d.length>1&&(warn$3("SSR-optimized slot function detected in a non-SSR-optimized render function. You need to mark this component with $dynamic-slots in the parent template."),d=()=>[]),d&&d._c&&(d._d=!1),openBlock();const g=d&&ensureValidVNode(d(n)),r=createBlock(Fragment,{key:n.key||g&&g.key||`_${t}`},g||(o?o():[]),g&&e._===1?64:-2);return!c&&r.scopeId&&(r.slotScopeIds=[r.scopeId+"-s"]),d&&d._c&&(d._d=!0),r}function ensureValidVNode(e){return e.some(t=>isVNode$1(t)?!(t.type===Comment$1||t.type===Fragment&&!ensureValidVNode(t.children)):!0)?e:null}function toHandlers(e,t){const n={};if(process.env.NODE_ENV!=="production"&&!isObject$6(e))return warn$3("v-on with no argument expects an object value."),n;for(const o in e)n[t&&/[A-Z]/.test(o)?`on:${o}`:toHandlerKey(o)]=e[o];return n}const getPublicInstance=e=>e?isStatefulComponent(e)?getExposeProxy(e)||e.proxy:getPublicInstance(e.parent):null,publicPropertiesMap=extend$4(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>process.env.NODE_ENV!=="production"?shallowReadonly(e.props):e.props,$attrs:e=>process.env.NODE_ENV!=="production"?shallowReadonly(e.attrs):e.attrs,$slots:e=>process.env.NODE_ENV!=="production"?shallowReadonly(e.slots):e.slots,$refs:e=>process.env.NODE_ENV!=="production"?shallowReadonly(e.refs):e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>queueJob(e.update)),$nextTick:e=>e.n||(e.n=nextTick$1.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),isReservedPrefix=e=>e==="_"||e==="$",PublicInstanceProxyHandlers={get({_:e},t){const{ctx:n,setupState:o,data:c,props:d,accessCache:g,type:r,appContext:v}=e;if(process.env.NODE_ENV!=="production"&&t==="__isVue")return!0;if(process.env.NODE_ENV!=="production"&&o!==EMPTY_OBJ&&o.__isScriptSetup&&hasOwn$2(o,t))return o[t];let E;if(t[0]!=="$"){const N=g[t];if(N!==void 0)switch(N){case 1:return o[t];case 2:return c[t];case 4:return n[t];case 3:return d[t]}else{if(o!==EMPTY_OBJ&&hasOwn$2(o,t))return g[t]=1,o[t];if(c!==EMPTY_OBJ&&hasOwn$2(c,t))return g[t]=2,c[t];if((E=e.propsOptions[0])&&hasOwn$2(E,t))return g[t]=3,d[t];if(n!==EMPTY_OBJ&&hasOwn$2(n,t))return g[t]=4,n[t];shouldCacheAccess&&(g[t]=0)}}const w=publicPropertiesMap[t];let T,S;if(w)return t==="$attrs"&&(track(e,"get",t),process.env.NODE_ENV!=="production"&&markAttrsAccessed()),w(e);if((T=r.__cssModules)&&(T=T[t]))return T;if(n!==EMPTY_OBJ&&hasOwn$2(n,t))return g[t]=4,n[t];if(S=v.config.globalProperties,hasOwn$2(S,t))return S[t];process.env.NODE_ENV!=="production"&&currentRenderingInstance&&(!isString$2(t)||t.indexOf("__v")!==0)&&(c!==EMPTY_OBJ&&isReservedPrefix(t[0])&&hasOwn$2(c,t)?warn$3(`Property ${JSON.stringify(t)} must be accessed via $data because it starts with a reserved character ("$" or "_") and is not proxied on the render context.`):e===currentRenderingInstance&&warn$3(`Property ${JSON.stringify(t)} was accessed during render but is not defined on instance.`))},set({_:e},t,n){const{data:o,setupState:c,ctx:d}=e;return c!==EMPTY_OBJ&&hasOwn$2(c,t)?(c[t]=n,!0):o!==EMPTY_OBJ&&hasOwn$2(o,t)?(o[t]=n,!0):hasOwn$2(e.props,t)?(process.env.NODE_ENV!=="production"&&warn$3(`Attempting to mutate prop "${t}". Props are readonly.`,e),!1):t[0]==="$"&&t.slice(1)in e?(process.env.NODE_ENV!=="production"&&warn$3(`Attempting to mutate public property "${t}". Properties starting with $ are reserved and readonly.`,e),!1):(process.env.NODE_ENV!=="production"&&t in e.appContext.config.globalProperties?Object.defineProperty(d,t,{enumerable:!0,configurable:!0,value:n}):d[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:o,appContext:c,propsOptions:d}},g){let r;return!!n[g]||e!==EMPTY_OBJ&&hasOwn$2(e,g)||t!==EMPTY_OBJ&&hasOwn$2(t,g)||(r=d[0])&&hasOwn$2(r,g)||hasOwn$2(o,g)||hasOwn$2(publicPropertiesMap,g)||hasOwn$2(c.config.globalProperties,g)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:hasOwn$2(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};process.env.NODE_ENV!=="production"&&(PublicInstanceProxyHandlers.ownKeys=e=>(warn$3("Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead."),Reflect.ownKeys(e)));const RuntimeCompiledPublicInstanceProxyHandlers=extend$4({},PublicInstanceProxyHandlers,{get(e,t){if(t!==Symbol.unscopables)return PublicInstanceProxyHandlers.get(e,t,e)},has(e,t){const n=t[0]!=="_"&&!isGloballyWhitelisted(t);return process.env.NODE_ENV!=="production"&&!n&&PublicInstanceProxyHandlers.has(e,t)&&warn$3(`Property ${JSON.stringify(t)} should not start with _ which is a reserved prefix for Vue internals.`),n}});function createDevRenderContext(e){const t={};return Object.defineProperty(t,"_",{configurable:!0,enumerable:!1,get:()=>e}),Object.keys(publicPropertiesMap).forEach(n=>{Object.defineProperty(t,n,{configurable:!0,enumerable:!1,get:()=>publicPropertiesMap[n](e),set:NOOP})}),t}function exposePropsOnRenderContext(e){const{ctx:t,propsOptions:[n]}=e;n&&Object.keys(n).forEach(o=>{Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>e.props[o],set:NOOP})})}function exposeSetupStateOnRenderContext(e){const{ctx:t,setupState:n}=e;Object.keys(toRaw$1(n)).forEach(o=>{if(!n.__isScriptSetup){if(isReservedPrefix(o[0])){warn$3(`setup() return property ${JSON.stringify(o)} should not start with "$" or "_" which are reserved prefixes for Vue internals.`);return}Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>n[o],set:NOOP})}})}function createDuplicateChecker(){const e=Object.create(null);return(t,n)=>{e[n]?warn$3(`${t} property "${n}" is already defined in ${e[n]}.`):e[n]=t}}let shouldCacheAccess=!0;function applyOptions(e){const t=resolveMergedOptions(e),n=e.proxy,o=e.ctx;shouldCacheAccess=!1,t.beforeCreate&&callHook$1(t.beforeCreate,e,"bc");const{data:c,computed:d,methods:g,watch:r,provide:v,inject:E,created:w,beforeMount:T,mounted:S,beforeUpdate:N,updated:L,activated:P,deactivated:O,beforeDestroy:V,beforeUnmount:D,destroyed:U,unmounted:W,render:Z,renderTracked:re,renderTriggered:ae,errorCaptured:ce,serverPrefetch:ne,expose:le,inheritAttrs:de,components:ie,directives:ve,filters:Pe}=t,ct=process.env.NODE_ENV!=="production"?createDuplicateChecker():null;if(process.env.NODE_ENV!=="production"){const[Me]=e.propsOptions;if(Me)for(const Ue in Me)ct("Props",Ue)}if(E&&resolveInjections(E,o,ct,e.appContext.config.unwrapInjectedRef),g)for(const Me in g){const Ue=g[Me];isFunction$1(Ue)?(process.env.NODE_ENV!=="production"?Object.defineProperty(o,Me,{value:Ue.bind(n),configurable:!0,enumerable:!0,writable:!0}):o[Me]=Ue.bind(n),process.env.NODE_ENV!=="production"&&ct("Methods",Me)):process.env.NODE_ENV!=="production"&&warn$3(`Method "${Me}" has type "${typeof Ue}" in the component definition. Did you reference the function correctly?`)}if(c){process.env.NODE_ENV!=="production"&&!isFunction$1(c)&&warn$3("The data option must be a function. Plain object usage is no longer supported.");const Me=c.call(n,n);if(process.env.NODE_ENV!=="production"&&isPromise(Me)&&warn$3("data() returned a Promise - note data() cannot be async; If you intend to perform data fetching before component renders, use async setup() + <Suspense>."),!isObject$6(Me))process.env.NODE_ENV!=="production"&&warn$3("data() should return an object.");else if(e.data=reactive(Me),process.env.NODE_ENV!=="production")for(const Ue in Me)ct("Data",Ue),isReservedPrefix(Ue[0])||Object.defineProperty(o,Ue,{configurable:!0,enumerable:!0,get:()=>Me[Ue],set:NOOP})}if(shouldCacheAccess=!0,d)for(const Me in d){const Ue=d[Me],Ze=isFunction$1(Ue)?Ue.bind(n,n):isFunction$1(Ue.get)?Ue.get.bind(n,n):NOOP;process.env.NODE_ENV!=="production"&&Ze===NOOP&&warn$3(`Computed property "${Me}" has no getter.`);const xt=!isFunction$1(Ue)&&isFunction$1(Ue.set)?Ue.set.bind(n):process.env.NODE_ENV!=="production"?()=>{warn$3(`Write operation failed: computed property "${Me}" is readonly.`)}:NOOP,Ut=computed({get:Ze,set:xt});Object.defineProperty(o,Me,{enumerable:!0,configurable:!0,get:()=>Ut.value,set:Zt=>Ut.value=Zt}),process.env.NODE_ENV!=="production"&&ct("Computed",Me)}if(r)for(const Me in r)createWatcher(r[Me],o,n,Me);if(v){const Me=isFunction$1(v)?v.call(n):v;Reflect.ownKeys(Me).forEach(Ue=>{provide(Ue,Me[Ue])})}w&&callHook$1(w,e,"c");function ge(Me,Ue){isArray$8(Ue)?Ue.forEach(Ze=>Me(Ze.bind(n))):Ue&&Me(Ue.bind(n))}if(ge(onBeforeMount,T),ge(onMounted,S),ge(onBeforeUpdate,N),ge(onUpdated,L),ge(onActivated,P),ge(onDeactivated,O),ge(onErrorCaptured,ce),ge(onRenderTracked,re),ge(onRenderTriggered,ae),ge(onBeforeUnmount,D),ge(onUnmounted,W),ge(onServerPrefetch,ne),isArray$8(le))if(le.length){const Me=e.exposed||(e.exposed={});le.forEach(Ue=>{Object.defineProperty(Me,Ue,{get:()=>n[Ue],set:Ze=>n[Ue]=Ze})})}else e.exposed||(e.exposed={});Z&&e.render===NOOP&&(e.render=Z),de!=null&&(e.inheritAttrs=de),ie&&(e.components=ie),ve&&(e.directives=ve)}function resolveInjections(e,t,n=NOOP,o=!1){isArray$8(e)&&(e=normalizeInject(e));for(const c in e){const d=e[c];let g;isObject$6(d)?"default"in d?g=inject(d.from||c,d.default,!0):g=inject(d.from||c):g=inject(d),isRef$1(g)?o?Object.defineProperty(t,c,{enumerable:!0,configurable:!0,get:()=>g.value,set:r=>g.value=r}):(process.env.NODE_ENV!=="production"&&warn$3(`injected property "${c}" is a ref and will be auto-unwrapped and no longer needs \`.value\` in the next minor release. To opt-in to the new behavior now, set \`app.config.unwrapInjectedRef = true\` (this config is temporary and will not be needed in the future.)`),t[c]=g):t[c]=g,process.env.NODE_ENV!=="production"&&n("Inject",c)}}function callHook$1(e,t,n){callWithAsyncErrorHandling(isArray$8(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,n)}function createWatcher(e,t,n,o){const c=o.includes(".")?createPathGetter(n,o):()=>n[o];if(isString$2(e)){const d=t[e];isFunction$1(d)?watch(c,d):process.env.NODE_ENV!=="production"&&warn$3(`Invalid watch handler specified by key "${e}"`,d)}else if(isFunction$1(e))watch(c,e.bind(n));else if(isObject$6(e))if(isArray$8(e))e.forEach(d=>createWatcher(d,t,n,o));else{const d=isFunction$1(e.handler)?e.handler.bind(n):t[e.handler];isFunction$1(d)?watch(c,d,e):process.env.NODE_ENV!=="production"&&warn$3(`Invalid watch handler specified by key "${e.handler}"`,d)}else process.env.NODE_ENV!=="production"&&warn$3(`Invalid watch option: "${o}"`,e)}function resolveMergedOptions(e){const t=e.type,{mixins:n,extends:o}=t,{mixins:c,optionsCache:d,config:{optionMergeStrategies:g}}=e.appContext,r=d.get(t);let v;return r?v=r:!c.length&&!n&&!o?v=t:(v={},c.length&&c.forEach(E=>mergeOptions$1(v,E,g,!0)),mergeOptions$1(v,t,g)),isObject$6(t)&&d.set(t,v),v}function mergeOptions$1(e,t,n,o=!1){const{mixins:c,extends:d}=t;d&&mergeOptions$1(e,d,n,!0),c&&c.forEach(g=>mergeOptions$1(e,g,n,!0));for(const g in t)if(o&&g==="expose")process.env.NODE_ENV!=="production"&&warn$3('"expose" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.');else{const r=internalOptionMergeStrats[g]||n&&n[g];e[g]=r?r(e[g],t[g]):t[g]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,t){return t?e?function(){return extend$4(isFunction$1(e)?e.call(this,this):e,isFunction$1(t)?t.call(this,this):t)}:t:e}function mergeInject(e,t){return mergeObjectOptions(normalizeInject(e),normalizeInject(t))}function normalizeInject(e){if(isArray$8(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function mergeAsArray(e,t){return e?[...new Set([].concat(e,t))]:t}function mergeObjectOptions(e,t){return e?extend$4(extend$4(Object.create(null),e),t):t}function mergeWatchOptions(e,t){if(!e)return t;if(!t)return e;const n=extend$4(Object.create(null),e);for(const o in t)n[o]=mergeAsArray(e[o],t[o]);return n}function initProps(e,t,n,o=!1){const c={},d={};def(d,InternalObjectKey,1),e.propsDefaults=Object.create(null),setFullProps(e,t,c,d);for(const g in e.propsOptions[0])g in c||(c[g]=void 0);process.env.NODE_ENV!=="production"&&validateProps(t||{},c,e),n?e.props=o?c:shallowReactive(c):e.type.props?e.props=c:e.props=d,e.attrs=d}function isInHmrContext(e){for(;e;){if(e.type.__hmrId)return!0;e=e.parent}}function updateProps(e,t,n,o){const{props:c,attrs:d,vnode:{patchFlag:g}}=e,r=toRaw$1(c),[v]=e.propsOptions;let E=!1;if(!(process.env.NODE_ENV!=="production"&&isInHmrContext(e))&&(o||g>0)&&!(g&16)){if(g&8){const w=e.vnode.dynamicProps;for(let T=0;T<w.length;T++){let S=w[T];if(isEmitListener(e.emitsOptions,S))continue;const N=t[S];if(v)if(hasOwn$2(d,S))N!==d[S]&&(d[S]=N,E=!0);else{const L=camelize(S);c[L]=resolvePropValue(v,r,L,N,e,!1)}else N!==d[S]&&(d[S]=N,E=!0)}}}else{setFullProps(e,t,c,d)&&(E=!0);let w;for(const T in r)(!t||!hasOwn$2(t,T)&&((w=hyphenate(T))===T||!hasOwn$2(t,w)))&&(v?n&&(n[T]!==void 0||n[w]!==void 0)&&(c[T]=resolvePropValue(v,r,T,void 0,e,!0)):delete c[T]);if(d!==r)for(const T in d)(!t||!hasOwn$2(t,T)&&!0)&&(delete d[T],E=!0)}E&&trigger$1(e,"set","$attrs"),process.env.NODE_ENV!=="production"&&validateProps(t||{},c,e)}function setFullProps(e,t,n,o){const[c,d]=e.propsOptions;let g=!1,r;if(t)for(let v in t){if(isReservedProp(v))continue;const E=t[v];let w;c&&hasOwn$2(c,w=camelize(v))?!d||!d.includes(w)?n[w]=E:(r||(r={}))[w]=E:isEmitListener(e.emitsOptions,v)||(!(v in o)||E!==o[v])&&(o[v]=E,g=!0)}if(d){const v=toRaw$1(n),E=r||EMPTY_OBJ;for(let w=0;w<d.length;w++){const T=d[w];n[T]=resolvePropValue(c,v,T,E[T],e,!hasOwn$2(E,T))}}return g}function resolvePropValue(e,t,n,o,c,d){const g=e[n];if(g!=null){const r=hasOwn$2(g,"default");if(r&&o===void 0){const v=g.default;if(g.type!==Function&&isFunction$1(v)){const{propsDefaults:E}=c;n in E?o=E[n]:(setCurrentInstance(c),o=E[n]=v.call(null,t),unsetCurrentInstance())}else o=v}g[0]&&(d&&!r?o=!1:g[1]&&(o===""||o===hyphenate(n))&&(o=!0))}return o}function normalizePropsOptions(e,t,n=!1){const o=t.propsCache,c=o.get(e);if(c)return c;const d=e.props,g={},r=[];let v=!1;if(!isFunction$1(e)){const w=T=>{v=!0;const[S,N]=normalizePropsOptions(T,t,!0);extend$4(g,S),N&&r.push(...N)};!n&&t.mixins.length&&t.mixins.forEach(w),e.extends&&w(e.extends),e.mixins&&e.mixins.forEach(w)}if(!d&&!v)return isObject$6(e)&&o.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray$8(d))for(let w=0;w<d.length;w++){process.env.NODE_ENV!=="production"&&!isString$2(d[w])&&warn$3("props must be strings when using array syntax.",d[w]);const T=camelize(d[w]);validatePropName(T)&&(g[T]=EMPTY_OBJ)}else if(d){process.env.NODE_ENV!=="production"&&!isObject$6(d)&&warn$3("invalid props options",d);for(const w in d){const T=camelize(w);if(validatePropName(T)){const S=d[w],N=g[T]=isArray$8(S)||isFunction$1(S)?{type:S}:S;if(N){const L=getTypeIndex(Boolean,N.type),P=getTypeIndex(String,N.type);N[0]=L>-1,N[1]=P<0||L<P,(L>-1||hasOwn$2(N,"default"))&&r.push(T)}}}}const E=[g,r];return isObject$6(e)&&o.set(e,E),E}function validatePropName(e){return e[0]!=="$"?!0:(process.env.NODE_ENV!=="production"&&warn$3(`Invalid prop name: "${e}" is a reserved property.`),!1)}function getType(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function isSameType(e,t){return getType(e)===getType(t)}function getTypeIndex(e,t){return isArray$8(t)?t.findIndex(n=>isSameType(n,e)):isFunction$1(t)&&isSameType(t,e)?0:-1}function validateProps(e,t,n){const o=toRaw$1(t),c=n.propsOptions[0];for(const d in c){let g=c[d];g!=null&&validateProp(d,o[d],g,!hasOwn$2(e,d)&&!hasOwn$2(e,hyphenate(d)))}}function validateProp(e,t,n,o){const{type:c,required:d,validator:g}=n;if(d&&o){warn$3('Missing required prop: "'+e+'"');return}if(!(t==null&&!n.required)){if(c!=null&&c!==!0){let r=!1;const v=isArray$8(c)?c:[c],E=[];for(let w=0;w<v.length&&!r;w++){const{valid:T,expectedType:S}=assertType(t,v[w]);E.push(S||""),r=T}if(!r){warn$3(getInvalidTypeMessage(e,t,E));return}}g&&!g(t)&&warn$3('Invalid prop: custom validator check failed for prop "'+e+'".')}}const isSimpleType=makeMap("String,Number,Boolean,Function,Symbol,BigInt");function assertType(e,t){let n;const o=getType(t);if(isSimpleType(o)){const c=typeof e;n=c===o.toLowerCase(),!n&&c==="object"&&(n=e instanceof t)}else o==="Object"?n=isObject$6(e):o==="Array"?n=isArray$8(e):o==="null"?n=e===null:n=e instanceof t;return{valid:n,expectedType:o}}function getInvalidTypeMessage(e,t,n){let o=`Invalid prop: type check failed for prop "${e}". Expected ${n.map(capitalize$1).join(" | ")}`;const c=n[0],d=toRawType(t),g=styleValue(t,c),r=styleValue(t,d);return n.length===1&&isExplicable(c)&&!isBoolean$1(c,d)&&(o+=` with value ${g}`),o+=`, got ${d} `,isExplicable(d)&&(o+=`with value ${r}.`),o}function styleValue(e,t){return t==="String"?`"${e}"`:t==="Number"?`${Number(e)}`:`${e}`}function isExplicable(e){return["string","number","boolean"].some(n=>e.toLowerCase()===n)}function isBoolean$1(...e){return e.some(t=>t.toLowerCase()==="boolean")}const isInternalKey=e=>e[0]==="_"||e==="$stable",normalizeSlotValue=e=>isArray$8(e)?e.map(normalizeVNode$1):[normalizeVNode$1(e)],normalizeSlot$1=(e,t,n)=>{if(t._n)return t;const o=withCtx((...c)=>(process.env.NODE_ENV!=="production"&&currentInstance&&warn$3(`Slot "${e}" invoked outside of the render function: this will not track dependencies used in the slot. Invoke the slot function inside the render function instead.`),normalizeSlotValue(t(...c))),n);return o._c=!1,o},normalizeObjectSlots=(e,t,n)=>{const o=e._ctx;for(const c in e){if(isInternalKey(c))continue;const d=e[c];if(isFunction$1(d))t[c]=normalizeSlot$1(c,d,o);else if(d!=null){process.env.NODE_ENV!=="production"&&warn$3(`Non-function value encountered for slot "${c}". Prefer function slots for better performance.`);const g=normalizeSlotValue(d);t[c]=()=>g}}},normalizeVNodeSlots=(e,t)=>{process.env.NODE_ENV!=="production"&&!isKeepAlive(e.vnode)&&warn$3("Non-function value encountered for default slot. Prefer function slots for better performance.");const n=normalizeSlotValue(t);e.slots.default=()=>n},initSlots=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=toRaw$1(t),def(t,"_",n)):normalizeObjectSlots(t,e.slots={})}else e.slots={},t&&normalizeVNodeSlots(e,t);def(e.slots,InternalObjectKey,1)},updateSlots=(e,t,n)=>{const{vnode:o,slots:c}=e;let d=!0,g=EMPTY_OBJ;if(o.shapeFlag&32){const r=t._;r?process.env.NODE_ENV!=="production"&&isHmrUpdating?extend$4(c,t):n&&r===1?d=!1:(extend$4(c,t),!n&&r===1&&delete c._):(d=!t.$stable,normalizeObjectSlots(t,c)),g=t}else t&&(normalizeVNodeSlots(e,t),g={default:1});if(d)for(const r in c)!isInternalKey(r)&&!(r in g)&&delete c[r]};function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid=0;function createAppAPI(e,t){return function(o,c=null){isFunction$1(o)||(o=Object.assign({},o)),c!=null&&!isObject$6(c)&&(process.env.NODE_ENV!=="production"&&warn$3("root props passed to app.mount() must be an object."),c=null);const d=createAppContext(),g=new Set;let r=!1;const v=d.app={_uid:uid++,_component:o,_props:c,_container:null,_context:d,_instance:null,version:version$2,get config(){return d.config},set config(E){process.env.NODE_ENV!=="production"&&warn$3("app.config cannot be replaced. Modify individual options instead.")},use(E,...w){return g.has(E)?process.env.NODE_ENV!=="production"&&warn$3("Plugin has already been applied to target app."):E&&isFunction$1(E.install)?(g.add(E),E.install(v,...w)):isFunction$1(E)?(g.add(E),E(v,...w)):process.env.NODE_ENV!=="production"&&warn$3('A plugin must either be a function or an object with an "install" function.'),v},mixin(E){return d.mixins.includes(E)?process.env.NODE_ENV!=="production"&&warn$3("Mixin has already been applied to target app"+(E.name?`: ${E.name}`:"")):d.mixins.push(E),v},component(E,w){return process.env.NODE_ENV!=="production"&&validateComponentName(E,d.config),w?(process.env.NODE_ENV!=="production"&&d.components[E]&&warn$3(`Component "${E}" has already been registered in target app.`),d.components[E]=w,v):d.components[E]},directive(E,w){return process.env.NODE_ENV!=="production"&&validateDirectiveName(E),w?(process.env.NODE_ENV!=="production"&&d.directives[E]&&warn$3(`Directive "${E}" has already been registered in target app.`),d.directives[E]=w,v):d.directives[E]},mount(E,w,T){if(r)process.env.NODE_ENV!=="production"&&warn$3("App has already been mounted.\nIf you want to remount the same app, move your app creation logic into a factory function and create fresh app instances for each mount - e.g. `const createMyApp = () => createApp(App)`");else{process.env.NODE_ENV!=="production"&&E.__vue_app__&&warn$3("There is already an app instance mounted on the host container.\n If you want to mount another app on the same host container, you need to unmount the previous app by calling `app.unmount()` first.");const S=createVNode(o,c);return S.appContext=d,process.env.NODE_ENV!=="production"&&(d.reload=()=>{e(cloneVNode(S),E,T)}),w&&t?t(S,E):e(S,E,T),r=!0,v._container=E,E.__vue_app__=v,process.env.NODE_ENV!=="production"&&(v._instance=S.component,devtoolsInitApp(v,version$2)),getExposeProxy(S.component)||S.component.proxy}},unmount(){r?(e(null,v._container),process.env.NODE_ENV!=="production"&&(v._instance=null,devtoolsUnmountApp(v)),delete v._container.__vue_app__):process.env.NODE_ENV!=="production"&&warn$3("Cannot unmount an app that is not mounted.")},provide(E,w){return process.env.NODE_ENV!=="production"&&E in d.provides&&warn$3(`App already provides property with key "${String(E)}". It will be overwritten with the new value.`),d.provides[E]=w,v}};return v}}function setRef(e,t,n,o,c=!1){if(isArray$8(e)){e.forEach((S,N)=>setRef(S,t&&(isArray$8(t)?t[N]:t),n,o,c));return}if(isAsyncWrapper(o)&&!c)return;const d=o.shapeFlag&4?getExposeProxy(o.component)||o.component.proxy:o.el,g=c?null:d,{i:r,r:v}=e;if(process.env.NODE_ENV!=="production"&&!r){warn$3("Missing ref owner context. ref cannot be used on hoisted vnodes. A vnode with ref must be created inside the render function.");return}const E=t&&t.r,w=r.refs===EMPTY_OBJ?r.refs={}:r.refs,T=r.setupState;if(E!=null&&E!==v&&(isString$2(E)?(w[E]=null,hasOwn$2(T,E)&&(T[E]=null)):isRef$1(E)&&(E.value=null)),isFunction$1(v))callWithErrorHandling$1(v,r,12,[g,w]);else{const S=isString$2(v),N=isRef$1(v);if(S||N){const L=()=>{if(e.f){const P=S?hasOwn$2(T,v)?T[v]:w[v]:v.value;c?isArray$8(P)&&remove$2(P,d):isArray$8(P)?P.includes(d)||P.push(d):S?(w[v]=[d],hasOwn$2(T,v)&&(T[v]=w[v])):(v.value=[d],e.k&&(w[e.k]=v.value))}else S?(w[v]=g,hasOwn$2(T,v)&&(T[v]=g)):N?(v.value=g,e.k&&(w[e.k]=g)):process.env.NODE_ENV!=="production"&&warn$3("Invalid template ref type:",v,`(${typeof v})`)};g?(L.id=-1,queuePostRenderEffect(L,n)):L()}else process.env.NODE_ENV!=="production"&&warn$3("Invalid template ref type:",v,`(${typeof v})`)}}let hasMismatch=!1;const isSVGContainer=e=>/svg/.test(e.namespaceURI)&&e.tagName!=="foreignObject",isComment$1=e=>e.nodeType===8;function createHydrationFunctions(e){const{mt:t,p:n,o:{patchProp:o,createText:c,nextSibling:d,parentNode:g,remove:r,insert:v,createComment:E}}=e,w=(V,D)=>{if(!D.hasChildNodes()){process.env.NODE_ENV!=="production"&&warn$3("Attempting to hydrate existing markup but container is empty. Performing full mount instead."),n(null,V,D),flushPostFlushCbs(),D._vnode=V;return}hasMismatch=!1,T(D.firstChild,V,null,null,null),flushPostFlushCbs(),D._vnode=V,hasMismatch&&console.error("Hydration completed but contains mismatches.")},T=(V,D,U,W,Z,re=!1)=>{const ae=isComment$1(V)&&V.data==="[",ce=()=>P(V,D,U,W,Z,ae),{type:ne,ref:le,shapeFlag:de,patchFlag:ie}=D;let ve=V.nodeType;D.el=V,ie===-2&&(re=!1,D.dynamicChildren=null);let Pe=null;switch(ne){case Text:ve!==3?D.children===""?(v(D.el=c(""),g(V),V),Pe=V):Pe=ce():(V.data!==D.children&&(hasMismatch=!0,process.env.NODE_ENV!=="production"&&warn$3(`Hydration text mismatch:
- Client: ${JSON.stringify(V.data)}
- Server: ${JSON.stringify(D.children)}`),V.data=D.children),Pe=d(V));break;case Comment$1:ve!==8||ae?Pe=ce():Pe=d(V);break;case Static:if(ae&&(V=d(V),ve=V.nodeType),ve===1||ve===3){Pe=V;const ct=!D.children.length;for(let ge=0;ge<D.staticCount;ge++)ct&&(D.children+=Pe.nodeType===1?Pe.outerHTML:Pe.data),ge===D.staticCount-1&&(D.anchor=Pe),Pe=d(Pe);return ae?d(Pe):Pe}else ce();break;case Fragment:ae?Pe=L(V,D,U,W,Z,re):Pe=ce();break;default:if(de&1)ve!==1||D.type.toLowerCase()!==V.tagName.toLowerCase()?Pe=ce():Pe=S(V,D,U,W,Z,re);else if(de&6){D.slotScopeIds=Z;const ct=g(V);if(t(D,ct,null,U,W,isSVGContainer(ct),re),Pe=ae?O(V):d(V),Pe&&isComment$1(Pe)&&Pe.data==="teleport end"&&(Pe=d(Pe)),isAsyncWrapper(D)){let ge;ae?(ge=createVNode(Fragment),ge.anchor=Pe?Pe.previousSibling:ct.lastChild):ge=V.nodeType===3?createTextVNode(""):createVNode("div"),ge.el=V,D.component.subTree=ge}}else de&64?ve!==8?Pe=ce():Pe=D.type.hydrate(V,D,U,W,Z,re,e,N):de&128?Pe=D.type.hydrate(V,D,U,W,isSVGContainer(g(V)),Z,re,e,T):process.env.NODE_ENV!=="production"&&warn$3("Invalid HostVNode type:",ne,`(${typeof ne})`)}return le!=null&&setRef(le,null,W,D),Pe},S=(V,D,U,W,Z,re)=>{re=re||!!D.dynamicChildren;const{type:ae,props:ce,patchFlag:ne,shapeFlag:le,dirs:de}=D,ie=ae==="input"&&de||ae==="option";if(process.env.NODE_ENV!=="production"||ie||ne!==-1){if(de&&invokeDirectiveHook(D,null,U,"created"),ce)if(ie||!re||ne&48)for(const Pe in ce)(ie&&Pe.endsWith("value")||isOn(Pe)&&!isReservedProp(Pe))&&o(V,Pe,null,ce[Pe],!1,void 0,U);else ce.onClick&&o(V,"onClick",null,ce.onClick,!1,void 0,U);let ve;if((ve=ce&&ce.onVnodeBeforeMount)&&invokeVNodeHook(ve,U,D),de&&invokeDirectiveHook(D,null,U,"beforeMount"),((ve=ce&&ce.onVnodeMounted)||de)&&queueEffectWithSuspense(()=>{ve&&invokeVNodeHook(ve,U,D),de&&invokeDirectiveHook(D,null,U,"mounted")},W),le&16&&!(ce&&(ce.innerHTML||ce.textContent))){let Pe=N(V.firstChild,D,V,U,W,Z,re),ct=!1;for(;Pe;){hasMismatch=!0,process.env.NODE_ENV!=="production"&&!ct&&(warn$3(`Hydration children mismatch in <${D.type}>: server rendered element contains more child nodes than client vdom.`),ct=!0);const ge=Pe;Pe=Pe.nextSibling,r(ge)}}else le&8&&V.textContent!==D.children&&(hasMismatch=!0,process.env.NODE_ENV!=="production"&&warn$3(`Hydration text content mismatch in <${D.type}>:
- Client: ${V.textContent}
- Server: ${D.children}`),V.textContent=D.children)}return V.nextSibling},N=(V,D,U,W,Z,re,ae)=>{ae=ae||!!D.dynamicChildren;const ce=D.children,ne=ce.length;let le=!1;for(let de=0;de<ne;de++){const ie=ae?ce[de]:ce[de]=normalizeVNode$1(ce[de]);if(V)V=T(V,ie,W,Z,re,ae);else{if(ie.type===Text&&!ie.children)continue;hasMismatch=!0,process.env.NODE_ENV!=="production"&&!le&&(warn$3(`Hydration children mismatch in <${U.tagName.toLowerCase()}>: server rendered element contains fewer child nodes than client vdom.`),le=!0),n(null,ie,U,null,W,Z,isSVGContainer(U),re)}}return V},L=(V,D,U,W,Z,re)=>{const{slotScopeIds:ae}=D;ae&&(Z=Z?Z.concat(ae):ae);const ce=g(V),ne=N(d(V),D,ce,U,W,Z,re);return ne&&isComment$1(ne)&&ne.data==="]"?d(D.anchor=ne):(hasMismatch=!0,v(D.anchor=E("]"),ce,ne),ne)},P=(V,D,U,W,Z,re)=>{if(hasMismatch=!0,process.env.NODE_ENV!=="production"&&warn$3(`Hydration node mismatch:
- Client vnode:`,D.type,`
- Server rendered DOM:`,V,V.nodeType===3?"(text)":isComment$1(V)&&V.data==="["?"(start of fragment)":""),D.el=null,re){const ne=O(V);for(;;){const le=d(V);if(le&&le!==ne)r(le);else break}}const ae=d(V),ce=g(V);return r(V),n(null,D,ce,ae,U,W,isSVGContainer(ce),Z),ae},O=V=>{let D=0;for(;V;)if(V=d(V),V&&isComment$1(V)&&(V.data==="["&&D++,V.data==="]")){if(D===0)return d(V);D--}return V};return[w,T]}let supported$1,perf$1;function startMeasure(e,t){e.appContext.config.performance&&isSupported()&&perf$1.mark(`vue-${t}-${e.uid}`),process.env.NODE_ENV!=="production"&&devtoolsPerfStart(e,t,isSupported()?perf$1.now():Date.now())}function endMeasure(e,t){if(e.appContext.config.performance&&isSupported()){const n=`vue-${t}-${e.uid}`,o=n+":end";perf$1.mark(o),perf$1.measure(`<${formatComponentName$1(e,e.type)}> ${t}`,n,o),perf$1.clearMarks(n),perf$1.clearMarks(o)}process.env.NODE_ENV!=="production"&&devtoolsPerfEnd(e,t,isSupported()?perf$1.now():Date.now())}function isSupported(){return supported$1!==void 0||(typeof window<"u"&&window.performance?(supported$1=!0,perf$1=window.performance):supported$1=!1),supported$1}function initFeatureFlags(){const e=[];if(process.env.NODE_ENV!=="production"&&e.length){const t=e.length>1;console.warn(`Feature flag${t?"s":""} ${e.join(", ")} ${t?"are":"is"} not explicitly defined. You are running the esm-bundler build of Vue, which expects these compile-time feature flags to be globally injected via the bundler config in order to get better tree-shaking in the production bundle.

For more details, see https://link.vuejs.org/feature-flags.`)}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function createHydrationRenderer(e){return baseCreateRenderer(e,createHydrationFunctions)}function baseCreateRenderer(e,t){initFeatureFlags();const n=getGlobalThis();n.__VUE__=!0,process.env.NODE_ENV!=="production"&&setDevtoolsHook(n.__VUE_DEVTOOLS_GLOBAL_HOOK__,n);const{insert:o,remove:c,patchProp:d,createElement:g,createText:r,createComment:v,setText:E,setElementText:w,parentNode:T,nextSibling:S,setScopeId:N=NOOP,insertStaticContent:L}=e,P=(Te,Re,Qe,gt=null,qe=null,Ct=null,rt=!1,Fe=null,vt=process.env.NODE_ENV!=="production"&&isHmrUpdating?!1:!!Re.dynamicChildren)=>{if(Te===Re)return;Te&&!isSameVNodeType(Te,Re)&&(gt=Bt(Te),en(Te,qe,Ct,!0),Te=null),Re.patchFlag===-2&&(vt=!1,Re.dynamicChildren=null);const{type:dt,ref:yt,shapeFlag:At}=Re;switch(dt){case Text:O(Te,Re,Qe,gt);break;case Comment$1:V(Te,Re,Qe,gt);break;case Static:Te==null?D(Re,Qe,gt,rt):process.env.NODE_ENV!=="production"&&U(Te,Re,Qe,rt);break;case Fragment:ve(Te,Re,Qe,gt,qe,Ct,rt,Fe,vt);break;default:At&1?re(Te,Re,Qe,gt,qe,Ct,rt,Fe,vt):At&6?Pe(Te,Re,Qe,gt,qe,Ct,rt,Fe,vt):At&64||At&128?dt.process(Te,Re,Qe,gt,qe,Ct,rt,Fe,vt,ln):process.env.NODE_ENV!=="production"&&warn$3("Invalid VNode type:",dt,`(${typeof dt})`)}yt!=null&&qe&&setRef(yt,Te&&Te.ref,Ct,Re||Te,!Re)},O=(Te,Re,Qe,gt)=>{if(Te==null)o(Re.el=r(Re.children),Qe,gt);else{const qe=Re.el=Te.el;Re.children!==Te.children&&E(qe,Re.children)}},V=(Te,Re,Qe,gt)=>{Te==null?o(Re.el=v(Re.children||""),Qe,gt):Re.el=Te.el},D=(Te,Re,Qe,gt)=>{[Te.el,Te.anchor]=L(Te.children,Re,Qe,gt,Te.el,Te.anchor)},U=(Te,Re,Qe,gt)=>{if(Re.children!==Te.children){const qe=S(Te.anchor);Z(Te),[Re.el,Re.anchor]=L(Re.children,Qe,qe,gt)}else Re.el=Te.el,Re.anchor=Te.anchor},W=({el:Te,anchor:Re},Qe,gt)=>{let qe;for(;Te&&Te!==Re;)qe=S(Te),o(Te,Qe,gt),Te=qe;o(Re,Qe,gt)},Z=({el:Te,anchor:Re})=>{let Qe;for(;Te&&Te!==Re;)Qe=S(Te),c(Te),Te=Qe;c(Re)},re=(Te,Re,Qe,gt,qe,Ct,rt,Fe,vt)=>{rt=rt||Re.type==="svg",Te==null?ae(Re,Qe,gt,qe,Ct,rt,Fe,vt):le(Te,Re,qe,Ct,rt,Fe,vt)},ae=(Te,Re,Qe,gt,qe,Ct,rt,Fe)=>{let vt,dt;const{type:yt,props:At,shapeFlag:Xe,transition:lt,dirs:at}=Te;if(vt=Te.el=g(Te.type,Ct,At&&At.is,At),Xe&8?w(vt,Te.children):Xe&16&&ne(Te.children,vt,null,gt,qe,Ct&&yt!=="foreignObject",rt,Fe),at&&invokeDirectiveHook(Te,null,gt,"created"),At){for(const Gt in At)Gt!=="value"&&!isReservedProp(Gt)&&d(vt,Gt,null,At[Gt],Ct,Te.children,gt,qe,Tt);"value"in At&&d(vt,"value",null,At.value),(dt=At.onVnodeBeforeMount)&&invokeVNodeHook(dt,gt,Te)}ce(vt,Te,Te.scopeId,rt,gt),process.env.NODE_ENV!=="production"&&(Object.defineProperty(vt,"__vnode",{value:Te,enumerable:!1}),Object.defineProperty(vt,"__vueParentComponent",{value:gt,enumerable:!1})),at&&invokeDirectiveHook(Te,null,gt,"beforeMount");const Ht=(!qe||qe&&!qe.pendingBranch)&&lt&&!lt.persisted;Ht&&lt.beforeEnter(vt),o(vt,Re,Qe),((dt=At&&At.onVnodeMounted)||Ht||at)&&queuePostRenderEffect(()=>{dt&&invokeVNodeHook(dt,gt,Te),Ht&&lt.enter(vt),at&&invokeDirectiveHook(Te,null,gt,"mounted")},qe)},ce=(Te,Re,Qe,gt,qe)=>{if(Qe&&N(Te,Qe),gt)for(let Ct=0;Ct<gt.length;Ct++)N(Te,gt[Ct]);if(qe){let Ct=qe.subTree;if(process.env.NODE_ENV!=="production"&&Ct.patchFlag>0&&Ct.patchFlag&2048&&(Ct=filterSingleRoot(Ct.children)||Ct),Re===Ct){const rt=qe.vnode;ce(Te,rt,rt.scopeId,rt.slotScopeIds,qe.parent)}}},ne=(Te,Re,Qe,gt,qe,Ct,rt,Fe,vt=0)=>{for(let dt=vt;dt<Te.length;dt++){const yt=Te[dt]=Fe?cloneIfMounted(Te[dt]):normalizeVNode$1(Te[dt]);P(null,yt,Re,Qe,gt,qe,Ct,rt,Fe)}},le=(Te,Re,Qe,gt,qe,Ct,rt)=>{const Fe=Re.el=Te.el;let{patchFlag:vt,dynamicChildren:dt,dirs:yt}=Re;vt|=Te.patchFlag&16;const At=Te.props||EMPTY_OBJ,Xe=Re.props||EMPTY_OBJ;let lt;Qe&&toggleRecurse(Qe,!1),(lt=Xe.onVnodeBeforeUpdate)&&invokeVNodeHook(lt,Qe,Re,Te),yt&&invokeDirectiveHook(Re,Te,Qe,"beforeUpdate"),Qe&&toggleRecurse(Qe,!0),process.env.NODE_ENV!=="production"&&isHmrUpdating&&(vt=0,rt=!1,dt=null);const at=qe&&Re.type!=="foreignObject";if(dt?(de(Te.dynamicChildren,dt,Fe,Qe,gt,at,Ct),process.env.NODE_ENV!=="production"&&Qe&&Qe.type.__hmrId&&traverseStaticChildren(Te,Re)):rt||Ze(Te,Re,Fe,null,Qe,gt,at,Ct,!1),vt>0){if(vt&16)ie(Fe,Re,At,Xe,Qe,gt,qe);else if(vt&2&&At.class!==Xe.class&&d(Fe,"class",null,Xe.class,qe),vt&4&&d(Fe,"style",At.style,Xe.style,qe),vt&8){const Ht=Re.dynamicProps;for(let Gt=0;Gt<Ht.length;Gt++){const vn=Ht[Gt],Un=At[vn],Qn=Xe[vn];(Qn!==Un||vn==="value")&&d(Fe,vn,Un,Qn,qe,Te.children,Qe,gt,Tt)}}vt&1&&Te.children!==Re.children&&w(Fe,Re.children)}else!rt&&dt==null&&ie(Fe,Re,At,Xe,Qe,gt,qe);((lt=Xe.onVnodeUpdated)||yt)&&queuePostRenderEffect(()=>{lt&&invokeVNodeHook(lt,Qe,Re,Te),yt&&invokeDirectiveHook(Re,Te,Qe,"updated")},gt)},de=(Te,Re,Qe,gt,qe,Ct,rt)=>{for(let Fe=0;Fe<Re.length;Fe++){const vt=Te[Fe],dt=Re[Fe],yt=vt.el&&(vt.type===Fragment||!isSameVNodeType(vt,dt)||vt.shapeFlag&70)?T(vt.el):Qe;P(vt,dt,yt,null,gt,qe,Ct,rt,!0)}},ie=(Te,Re,Qe,gt,qe,Ct,rt)=>{if(Qe!==gt){if(Qe!==EMPTY_OBJ)for(const Fe in Qe)!isReservedProp(Fe)&&!(Fe in gt)&&d(Te,Fe,Qe[Fe],null,rt,Re.children,qe,Ct,Tt);for(const Fe in gt){if(isReservedProp(Fe))continue;const vt=gt[Fe],dt=Qe[Fe];vt!==dt&&Fe!=="value"&&d(Te,Fe,dt,vt,rt,Re.children,qe,Ct,Tt)}"value"in gt&&d(Te,"value",Qe.value,gt.value)}},ve=(Te,Re,Qe,gt,qe,Ct,rt,Fe,vt)=>{const dt=Re.el=Te?Te.el:r(""),yt=Re.anchor=Te?Te.anchor:r("");let{patchFlag:At,dynamicChildren:Xe,slotScopeIds:lt}=Re;process.env.NODE_ENV!=="production"&&(isHmrUpdating||At&2048)&&(At=0,vt=!1,Xe=null),lt&&(Fe=Fe?Fe.concat(lt):lt),Te==null?(o(dt,Qe,gt),o(yt,Qe,gt),ne(Re.children,Qe,yt,qe,Ct,rt,Fe,vt)):At>0&&At&64&&Xe&&Te.dynamicChildren?(de(Te.dynamicChildren,Xe,Qe,qe,Ct,rt,Fe),process.env.NODE_ENV!=="production"&&qe&&qe.type.__hmrId?traverseStaticChildren(Te,Re):(Re.key!=null||qe&&Re===qe.subTree)&&traverseStaticChildren(Te,Re,!0)):Ze(Te,Re,Qe,yt,qe,Ct,rt,Fe,vt)},Pe=(Te,Re,Qe,gt,qe,Ct,rt,Fe,vt)=>{Re.slotScopeIds=Fe,Te==null?Re.shapeFlag&512?qe.ctx.activate(Re,Qe,gt,rt,vt):ct(Re,Qe,gt,qe,Ct,rt,vt):ge(Te,Re,vt)},ct=(Te,Re,Qe,gt,qe,Ct,rt)=>{const Fe=Te.component=createComponentInstance$1(Te,gt,qe);if(process.env.NODE_ENV!=="production"&&Fe.type.__hmrId&&registerHMR(Fe),process.env.NODE_ENV!=="production"&&(pushWarningContext$1(Te),startMeasure(Fe,"mount")),isKeepAlive(Te)&&(Fe.ctx.renderer=ln),process.env.NODE_ENV!=="production"&&startMeasure(Fe,"init"),setupComponent$1(Fe),process.env.NODE_ENV!=="production"&&endMeasure(Fe,"init"),Fe.asyncDep){if(qe&&qe.registerDep(Fe,Me),!Te.el){const vt=Fe.subTree=createVNode(Comment$1);V(null,vt,Re,Qe)}return}Me(Fe,Te,Re,Qe,qe,Ct,rt),process.env.NODE_ENV!=="production"&&(popWarningContext$1(),endMeasure(Fe,"mount"))},ge=(Te,Re,Qe)=>{const gt=Re.component=Te.component;if(shouldUpdateComponent(Te,Re,Qe))if(gt.asyncDep&&!gt.asyncResolved){process.env.NODE_ENV!=="production"&&pushWarningContext$1(Re),Ue(gt,Re,Qe),process.env.NODE_ENV!=="production"&&popWarningContext$1();return}else gt.next=Re,invalidateJob(gt.update),gt.update();else Re.el=Te.el,gt.vnode=Re},Me=(Te,Re,Qe,gt,qe,Ct,rt)=>{const Fe=()=>{if(Te.isMounted){let{next:yt,bu:At,u:Xe,parent:lt,vnode:at}=Te,Ht=yt,Gt;process.env.NODE_ENV!=="production"&&pushWarningContext$1(yt||Te.vnode),toggleRecurse(Te,!1),yt?(yt.el=at.el,Ue(Te,yt,rt)):yt=at,At&&invokeArrayFns(At),(Gt=yt.props&&yt.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Gt,lt,yt,at),toggleRecurse(Te,!0),process.env.NODE_ENV!=="production"&&startMeasure(Te,"render");const vn=renderComponentRoot$1(Te);process.env.NODE_ENV!=="production"&&endMeasure(Te,"render");const Un=Te.subTree;Te.subTree=vn,process.env.NODE_ENV!=="production"&&startMeasure(Te,"patch"),P(Un,vn,T(Un.el),Bt(Un),Te,qe,Ct),process.env.NODE_ENV!=="production"&&endMeasure(Te,"patch"),yt.el=vn.el,Ht===null&&updateHOCHostEl(Te,vn.el),Xe&&queuePostRenderEffect(Xe,qe),(Gt=yt.props&&yt.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Gt,lt,yt,at),qe),process.env.NODE_ENV!=="production"&&devtoolsComponentUpdated(Te),process.env.NODE_ENV!=="production"&&popWarningContext$1()}else{let yt;const{el:At,props:Xe}=Re,{bm:lt,m:at,parent:Ht}=Te,Gt=isAsyncWrapper(Re);if(toggleRecurse(Te,!1),lt&&invokeArrayFns(lt),!Gt&&(yt=Xe&&Xe.onVnodeBeforeMount)&&invokeVNodeHook(yt,Ht,Re),toggleRecurse(Te,!0),At&&Yt){const vn=()=>{process.env.NODE_ENV!=="production"&&startMeasure(Te,"render"),Te.subTree=renderComponentRoot$1(Te),process.env.NODE_ENV!=="production"&&endMeasure(Te,"render"),process.env.NODE_ENV!=="production"&&startMeasure(Te,"hydrate"),Yt(At,Te.subTree,Te,qe,null),process.env.NODE_ENV!=="production"&&endMeasure(Te,"hydrate")};Gt?Re.type.__asyncLoader().then(()=>!Te.isUnmounted&&vn()):vn()}else{process.env.NODE_ENV!=="production"&&startMeasure(Te,"render");const vn=Te.subTree=renderComponentRoot$1(Te);process.env.NODE_ENV!=="production"&&endMeasure(Te,"render"),process.env.NODE_ENV!=="production"&&startMeasure(Te,"patch"),P(null,vn,Qe,gt,Te,qe,Ct),process.env.NODE_ENV!=="production"&&endMeasure(Te,"patch"),Re.el=vn.el}if(at&&queuePostRenderEffect(at,qe),!Gt&&(yt=Xe&&Xe.onVnodeMounted)){const vn=Re;queuePostRenderEffect(()=>invokeVNodeHook(yt,Ht,vn),qe)}(Re.shapeFlag&256||Ht&&isAsyncWrapper(Ht.vnode)&&Ht.vnode.shapeFlag&256)&&Te.a&&queuePostRenderEffect(Te.a,qe),Te.isMounted=!0,process.env.NODE_ENV!=="production"&&devtoolsComponentAdded(Te),Re=Qe=gt=null}},vt=Te.effect=new ReactiveEffect(Fe,()=>queueJob(dt),Te.scope),dt=Te.update=()=>vt.run();dt.id=Te.uid,toggleRecurse(Te,!0),process.env.NODE_ENV!=="production"&&(vt.onTrack=Te.rtc?yt=>invokeArrayFns(Te.rtc,yt):void 0,vt.onTrigger=Te.rtg?yt=>invokeArrayFns(Te.rtg,yt):void 0,dt.ownerInstance=Te),dt()},Ue=(Te,Re,Qe)=>{Re.component=Te;const gt=Te.vnode.props;Te.vnode=Re,Te.next=null,updateProps(Te,Re.props,gt,Qe),updateSlots(Te,Re.children,Qe),pauseTracking(),flushPreFlushCbs(),resetTracking()},Ze=(Te,Re,Qe,gt,qe,Ct,rt,Fe,vt=!1)=>{const dt=Te&&Te.children,yt=Te?Te.shapeFlag:0,At=Re.children,{patchFlag:Xe,shapeFlag:lt}=Re;if(Xe>0){if(Xe&128){Ut(dt,At,Qe,gt,qe,Ct,rt,Fe,vt);return}else if(Xe&256){xt(dt,At,Qe,gt,qe,Ct,rt,Fe,vt);return}}lt&8?(yt&16&&Tt(dt,qe,Ct),At!==dt&&w(Qe,At)):yt&16?lt&16?Ut(dt,At,Qe,gt,qe,Ct,rt,Fe,vt):Tt(dt,qe,Ct,!0):(yt&8&&w(Qe,""),lt&16&&ne(At,Qe,gt,qe,Ct,rt,Fe,vt))},xt=(Te,Re,Qe,gt,qe,Ct,rt,Fe,vt)=>{Te=Te||EMPTY_ARR,Re=Re||EMPTY_ARR;const dt=Te.length,yt=Re.length,At=Math.min(dt,yt);let Xe;for(Xe=0;Xe<At;Xe++){const lt=Re[Xe]=vt?cloneIfMounted(Re[Xe]):normalizeVNode$1(Re[Xe]);P(Te[Xe],lt,Qe,null,qe,Ct,rt,Fe,vt)}dt>yt?Tt(Te,qe,Ct,!0,!1,At):ne(Re,Qe,gt,qe,Ct,rt,Fe,vt,At)},Ut=(Te,Re,Qe,gt,qe,Ct,rt,Fe,vt)=>{let dt=0;const yt=Re.length;let At=Te.length-1,Xe=yt-1;for(;dt<=At&&dt<=Xe;){const lt=Te[dt],at=Re[dt]=vt?cloneIfMounted(Re[dt]):normalizeVNode$1(Re[dt]);if(isSameVNodeType(lt,at))P(lt,at,Qe,null,qe,Ct,rt,Fe,vt);else break;dt++}for(;dt<=At&&dt<=Xe;){const lt=Te[At],at=Re[Xe]=vt?cloneIfMounted(Re[Xe]):normalizeVNode$1(Re[Xe]);if(isSameVNodeType(lt,at))P(lt,at,Qe,null,qe,Ct,rt,Fe,vt);else break;At--,Xe--}if(dt>At){if(dt<=Xe){const lt=Xe+1,at=lt<yt?Re[lt].el:gt;for(;dt<=Xe;)P(null,Re[dt]=vt?cloneIfMounted(Re[dt]):normalizeVNode$1(Re[dt]),Qe,at,qe,Ct,rt,Fe,vt),dt++}}else if(dt>Xe)for(;dt<=At;)en(Te[dt],qe,Ct,!0),dt++;else{const lt=dt,at=dt,Ht=new Map;for(dt=at;dt<=Xe;dt++){const li=Re[dt]=vt?cloneIfMounted(Re[dt]):normalizeVNode$1(Re[dt]);li.key!=null&&(process.env.NODE_ENV!=="production"&&Ht.has(li.key)&&warn$3("Duplicate keys found during update:",JSON.stringify(li.key),"Make sure keys are unique."),Ht.set(li.key,dt))}let Gt,vn=0;const Un=Xe-at+1;let Qn=!1,Ai=0;const rr=new Array(Un);for(dt=0;dt<Un;dt++)rr[dt]=0;for(dt=lt;dt<=At;dt++){const li=Te[dt];if(vn>=Un){en(li,qe,Ct,!0);continue}let bi;if(li.key!=null)bi=Ht.get(li.key);else for(Gt=at;Gt<=Xe;Gt++)if(rr[Gt-at]===0&&isSameVNodeType(li,Re[Gt])){bi=Gt;break}bi===void 0?en(li,qe,Ct,!0):(rr[bi-at]=dt+1,bi>=Ai?Ai=bi:Qn=!0,P(li,Re[bi],Qe,null,qe,Ct,rt,Fe,vt),vn++)}const wr=Qn?getSequence(rr):EMPTY_ARR;for(Gt=wr.length-1,dt=Un-1;dt>=0;dt--){const li=at+dt,bi=Re[li],Er=li+1<yt?Re[li+1].el:gt;rr[dt]===0?P(null,bi,Qe,Er,qe,Ct,rt,Fe,vt):Qn&&(Gt<0||dt!==wr[Gt]?Zt(bi,Qe,Er,2):Gt--)}}},Zt=(Te,Re,Qe,gt,qe=null)=>{const{el:Ct,type:rt,transition:Fe,children:vt,shapeFlag:dt}=Te;if(dt&6){Zt(Te.component.subTree,Re,Qe,gt);return}if(dt&128){Te.suspense.move(Re,Qe,gt);return}if(dt&64){rt.move(Te,Re,Qe,ln);return}if(rt===Fragment){o(Ct,Re,Qe);for(let At=0;At<vt.length;At++)Zt(vt[At],Re,Qe,gt);o(Te.anchor,Re,Qe);return}if(rt===Static){W(Te,Re,Qe);return}if(gt!==2&&dt&1&&Fe)if(gt===0)Fe.beforeEnter(Ct),o(Ct,Re,Qe),queuePostRenderEffect(()=>Fe.enter(Ct),qe);else{const{leave:At,delayLeave:Xe,afterLeave:lt}=Fe,at=()=>o(Ct,Re,Qe),Ht=()=>{At(Ct,()=>{at(),lt&&lt()})};Xe?Xe(Ct,at,Ht):Ht()}else o(Ct,Re,Qe)},en=(Te,Re,Qe,gt=!1,qe=!1)=>{const{type:Ct,props:rt,ref:Fe,children:vt,dynamicChildren:dt,shapeFlag:yt,patchFlag:At,dirs:Xe}=Te;if(Fe!=null&&setRef(Fe,null,Qe,Te,!0),yt&256){Re.ctx.deactivate(Te);return}const lt=yt&1&&Xe,at=!isAsyncWrapper(Te);let Ht;if(at&&(Ht=rt&&rt.onVnodeBeforeUnmount)&&invokeVNodeHook(Ht,Re,Te),yt&6)Mt(Te.component,Qe,gt);else{if(yt&128){Te.suspense.unmount(Qe,gt);return}lt&&invokeDirectiveHook(Te,null,Re,"beforeUnmount"),yt&64?Te.type.remove(Te,Re,Qe,qe,ln,gt):dt&&(Ct!==Fragment||At>0&&At&64)?Tt(dt,Re,Qe,!1,!0):(Ct===Fragment&&At&384||!qe&&yt&16)&&Tt(vt,Re,Qe),gt&&En(Te)}(at&&(Ht=rt&&rt.onVnodeUnmounted)||lt)&&queuePostRenderEffect(()=>{Ht&&invokeVNodeHook(Ht,Re,Te),lt&&invokeDirectiveHook(Te,null,Re,"unmounted")},Qe)},En=Te=>{const{type:Re,el:Qe,anchor:gt,transition:qe}=Te;if(Re===Fragment){process.env.NODE_ENV!=="production"&&Te.patchFlag>0&&Te.patchFlag&2048&&qe&&!qe.persisted?Te.children.forEach(rt=>{rt.type===Comment$1?c(rt.el):En(rt)}):tt(Qe,gt);return}if(Re===Static){Z(Te);return}const Ct=()=>{c(Qe),qe&&!qe.persisted&&qe.afterLeave&&qe.afterLeave()};if(Te.shapeFlag&1&&qe&&!qe.persisted){const{leave:rt,delayLeave:Fe}=qe,vt=()=>rt(Qe,Ct);Fe?Fe(Te.el,Ct,vt):vt()}else Ct()},tt=(Te,Re)=>{let Qe;for(;Te!==Re;)Qe=S(Te),c(Te),Te=Qe;c(Re)},Mt=(Te,Re,Qe)=>{process.env.NODE_ENV!=="production"&&Te.type.__hmrId&&unregisterHMR(Te);const{bum:gt,scope:qe,update:Ct,subTree:rt,um:Fe}=Te;gt&&invokeArrayFns(gt),qe.stop(),Ct&&(Ct.active=!1,en(rt,Te,Re,Qe)),Fe&&queuePostRenderEffect(Fe,Re),queuePostRenderEffect(()=>{Te.isUnmounted=!0},Re),Re&&Re.pendingBranch&&!Re.isUnmounted&&Te.asyncDep&&!Te.asyncResolved&&Te.suspenseId===Re.pendingId&&(Re.deps--,Re.deps===0&&Re.resolve()),process.env.NODE_ENV!=="production"&&devtoolsComponentRemoved(Te)},Tt=(Te,Re,Qe,gt=!1,qe=!1,Ct=0)=>{for(let rt=Ct;rt<Te.length;rt++)en(Te[rt],Re,Qe,gt,qe)},Bt=Te=>Te.shapeFlag&6?Bt(Te.component.subTree):Te.shapeFlag&128?Te.suspense.next():S(Te.anchor||Te.el),un=(Te,Re,Qe)=>{Te==null?Re._vnode&&en(Re._vnode,null,null,!0):P(Re._vnode||null,Te,Re,null,null,null,Qe),flushPreFlushCbs(),flushPostFlushCbs(),Re._vnode=Te},ln={p:P,um:en,m:Zt,r:En,mt:ct,mc:ne,pc:Ze,pbc:de,n:Bt,o:e};let cn,Yt;return t&&([cn,Yt]=t(ln)),{render:un,hydrate:cn,createApp:createAppAPI(un,cn)}}function toggleRecurse({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function traverseStaticChildren(e,t,n=!1){const o=e.children,c=t.children;if(isArray$8(o)&&isArray$8(c))for(let d=0;d<o.length;d++){const g=o[d];let r=c[d];r.shapeFlag&1&&!r.dynamicChildren&&((r.patchFlag<=0||r.patchFlag===32)&&(r=c[d]=cloneIfMounted(c[d]),r.el=g.el),n||traverseStaticChildren(g,r)),process.env.NODE_ENV!=="production"&&r.type===Comment$1&&!r.el&&(r.el=g.el)}}function getSequence(e){const t=e.slice(),n=[0];let o,c,d,g,r;const v=e.length;for(o=0;o<v;o++){const E=e[o];if(E!==0){if(c=n[n.length-1],e[c]<E){t[o]=c,n.push(o);continue}for(d=0,g=n.length-1;d<g;)r=d+g>>1,e[n[r]]<E?d=r+1:g=r;E<e[n[d]]&&(d>0&&(t[o]=n[d-1]),n[d]=o)}}for(d=n.length,g=n[d-1];d-- >0;)n[d]=g,g=t[g];return n}const isTeleport=e=>e.__isTeleport,isTeleportDisabled=e=>e&&(e.disabled||e.disabled===""),isTargetSVG=e=>typeof SVGElement<"u"&&e instanceof SVGElement,resolveTarget=(e,t)=>{const n=e&&e.to;if(isString$2(n))if(t){const o=t(n);return o||process.env.NODE_ENV!=="production"&&warn$3(`Failed to locate Teleport target with selector "${n}". Note the target element must exist before the component is mounted - i.e. the target cannot be rendered by the component itself, and ideally should be outside of the entire Vue component tree.`),o}else return process.env.NODE_ENV!=="production"&&warn$3("Current renderer does not support string target for Teleports. (missing querySelector renderer option)"),null;else return process.env.NODE_ENV!=="production"&&!n&&!isTeleportDisabled(e)&&warn$3(`Invalid Teleport target: ${n}`),n},TeleportImpl={__isTeleport:!0,process(e,t,n,o,c,d,g,r,v,E){const{mc:w,pc:T,pbc:S,o:{insert:N,querySelector:L,createText:P,createComment:O}}=E,V=isTeleportDisabled(t.props);let{shapeFlag:D,children:U,dynamicChildren:W}=t;if(process.env.NODE_ENV!=="production"&&isHmrUpdating&&(v=!1,W=null),e==null){const Z=t.el=process.env.NODE_ENV!=="production"?O("teleport start"):P(""),re=t.anchor=process.env.NODE_ENV!=="production"?O("teleport end"):P("");N(Z,n,o),N(re,n,o);const ae=t.target=resolveTarget(t.props,L),ce=t.targetAnchor=P("");ae?(N(ce,ae),g=g||isTargetSVG(ae)):process.env.NODE_ENV!=="production"&&!V&&warn$3("Invalid Teleport target on mount:",ae,`(${typeof ae})`);const ne=(le,de)=>{D&16&&w(U,le,de,c,d,g,r,v)};V?ne(n,re):ae&&ne(ae,ce)}else{t.el=e.el;const Z=t.anchor=e.anchor,re=t.target=e.target,ae=t.targetAnchor=e.targetAnchor,ce=isTeleportDisabled(e.props),ne=ce?n:re,le=ce?Z:ae;if(g=g||isTargetSVG(re),W?(S(e.dynamicChildren,W,ne,c,d,g,r),traverseStaticChildren(e,t,!0)):v||T(e,t,ne,le,c,d,g,r,!1),V)ce||moveTeleport(t,n,Z,E,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const de=t.target=resolveTarget(t.props,L);de?moveTeleport(t,de,null,E,0):process.env.NODE_ENV!=="production"&&warn$3("Invalid Teleport target on update:",re,`(${typeof re})`)}else ce&&moveTeleport(t,re,ae,E,1)}},remove(e,t,n,o,{um:c,o:{remove:d}},g){const{shapeFlag:r,children:v,anchor:E,targetAnchor:w,target:T,props:S}=e;if(T&&d(w),(g||!isTeleportDisabled(S))&&(d(E),r&16))for(let N=0;N<v.length;N++){const L=v[N];c(L,t,n,!0,!!L.dynamicChildren)}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(e,t,n,{o:{insert:o},m:c},d=2){d===0&&o(e.targetAnchor,t,n);const{el:g,anchor:r,shapeFlag:v,children:E,props:w}=e,T=d===2;if(T&&o(g,t,n),(!T||isTeleportDisabled(w))&&v&16)for(let S=0;S<E.length;S++)c(E[S],t,n,2);T&&o(r,t,n)}function hydrateTeleport(e,t,n,o,c,d,{o:{nextSibling:g,parentNode:r,querySelector:v}},E){const w=t.target=resolveTarget(t.props,v);if(w){const T=w._lpa||w.firstChild;if(t.shapeFlag&16)if(isTeleportDisabled(t.props))t.anchor=E(g(e),t,r(e),n,o,c,d),t.targetAnchor=T;else{t.anchor=g(e);let S=T;for(;S;)if(S=g(S),S&&S.nodeType===8&&S.data==="teleport anchor"){t.targetAnchor=S,w._lpa=t.targetAnchor&&g(t.targetAnchor);break}E(T,t,w,n,o,c,d)}}return t.anchor&&g(t.anchor)}const Teleport=TeleportImpl,Fragment=Symbol(process.env.NODE_ENV!=="production"?"Fragment":void 0),Text=Symbol(process.env.NODE_ENV!=="production"?"Text":void 0),Comment$1=Symbol(process.env.NODE_ENV!=="production"?"Comment":void 0),Static=Symbol(process.env.NODE_ENV!=="production"?"Static":void 0),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e){isBlockTreeEnabled+=e}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,t,n,o,c,d){return setupBlock(createBaseVNode(e,t,n,o,c,d,!0))}function createBlock(e,t,n,o,c){return setupBlock(createVNode(e,t,n,o,c,!0))}function isVNode$1(e){return e?e.__v_isVNode===!0:!1}function isSameVNodeType(e,t){return process.env.NODE_ENV!=="production"&&t.shapeFlag&6&&hmrDirtyComponents.has(t.type)?!1:e.type===t.type&&e.key===t.key}let vnodeArgsTransformer;function transformVNodeArgs(e){vnodeArgsTransformer=e}const createVNodeWithArgsTransform=(...e)=>_createVNode(...vnodeArgsTransformer?vnodeArgsTransformer(e,currentRenderingInstance):e),InternalObjectKey="__vInternal",normalizeKey=({key:e})=>e!=null?e:null,normalizeRef=({ref:e,ref_key:t,ref_for:n})=>e!=null?isString$2(e)||isRef$1(e)||isFunction$1(e)?{i:currentRenderingInstance,r:e,k:t,f:!!n}:e:null;function createBaseVNode(e,t=null,n=null,o=0,c=null,d=e===Fragment?0:1,g=!1,r=!1){const v={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&normalizeKey(t),ref:t&&normalizeRef(t),scopeId:currentScopeId,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:d,patchFlag:o,dynamicProps:c,dynamicChildren:null,appContext:null};return r?(normalizeChildren(v,n),d&128&&e.normalize(v)):n&&(v.shapeFlag|=isString$2(n)?8:16),process.env.NODE_ENV!=="production"&&v.key!==v.key&&warn$3("VNode created with invalid key (NaN). VNode type:",v.type),isBlockTreeEnabled>0&&!g&&currentBlock&&(v.patchFlag>0||d&6)&&v.patchFlag!==32&&currentBlock.push(v),v}const createVNode=process.env.NODE_ENV!=="production"?createVNodeWithArgsTransform:_createVNode;function _createVNode(e,t=null,n=null,o=0,c=null,d=!1){if((!e||e===NULL_DYNAMIC_COMPONENT)&&(process.env.NODE_ENV!=="production"&&!e&&warn$3(`Invalid vnode type when creating vnode: ${e}.`),e=Comment$1),isVNode$1(e)){const r=cloneVNode(e,t,!0);return n&&normalizeChildren(r,n),isBlockTreeEnabled>0&&!d&&currentBlock&&(r.shapeFlag&6?currentBlock[currentBlock.indexOf(e)]=r:currentBlock.push(r)),r.patchFlag|=-2,r}if(isClassComponent(e)&&(e=e.__vccOpts),t){t=guardReactiveProps(t);let{class:r,style:v}=t;r&&!isString$2(r)&&(t.class=normalizeClass(r)),isObject$6(v)&&(isProxy(v)&&!isArray$8(v)&&(v=extend$4({},v)),t.style=normalizeStyle(v))}const g=isString$2(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject$6(e)?4:isFunction$1(e)?2:0;return process.env.NODE_ENV!=="production"&&g&4&&isProxy(e)&&(e=toRaw$1(e),warn$3("Vue received a Component which was made a reactive object. This can lead to unnecessary performance overhead, and should be avoided by marking the component with `markRaw` or using `shallowRef` instead of `ref`.",`
Component that was made reactive: `,e)),createBaseVNode(e,t,n,o,c,g,d,!0)}function guardReactiveProps(e){return e?isProxy(e)||InternalObjectKey in e?extend$4({},e):e:null}function cloneVNode(e,t,n=!1){const{props:o,ref:c,patchFlag:d,children:g}=e,r=t?mergeProps(o||{},t):o;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:r,key:r&&normalizeKey(r),ref:t&&t.ref?n&&c?isArray$8(c)?c.concat(normalizeRef(t)):[c,normalizeRef(t)]:normalizeRef(t):c,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:process.env.NODE_ENV!=="production"&&d===-1&&isArray$8(g)?g.map(deepCloneVNode):g,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fragment?d===-1?16:d|16:d,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor}}function deepCloneVNode(e){const t=cloneVNode(e);return isArray$8(e.children)&&(t.children=e.children.map(deepCloneVNode)),t}function createTextVNode(e=" ",t=0){return createVNode(Text,null,e,t)}function createStaticVNode(e,t){const n=createVNode(Static,null,e);return n.staticCount=t,n}function createCommentVNode(e="",t=!1){return t?(openBlock(),createBlock(Comment$1,null,e)):createVNode(Comment$1,null,e)}function normalizeVNode$1(e){return e==null||typeof e=="boolean"?createVNode(Comment$1):isArray$8(e)?createVNode(Fragment,null,e.slice()):typeof e=="object"?cloneIfMounted(e):createVNode(Text,null,String(e))}function cloneIfMounted(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:cloneVNode(e)}function normalizeChildren(e,t){let n=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(isArray$8(t))n=16;else if(typeof t=="object")if(o&65){const c=t.default;c&&(c._c&&(c._d=!1),normalizeChildren(e,c()),c._c&&(c._d=!0));return}else{n=32;const c=t._;!c&&!(InternalObjectKey in t)?t._ctx=currentRenderingInstance:c===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else isFunction$1(t)?(t={default:t,_ctx:currentRenderingInstance},n=32):(t=String(t),o&64?(n=16,t=[createTextVNode(t)]):n=8);e.children=t,e.shapeFlag|=n}function mergeProps(...e){const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const c in o)if(c==="class")t.class!==o.class&&(t.class=normalizeClass([t.class,o.class]));else if(c==="style")t.style=normalizeStyle([t.style,o.style]);else if(isOn(c)){const d=t[c],g=o[c];g&&d!==g&&!(isArray$8(d)&&d.includes(g))&&(t[c]=d?[].concat(d,g):g)}else c!==""&&(t[c]=o[c])}return t}function invokeVNodeHook(e,t,n,o=null){callWithAsyncErrorHandling(e,t,7,[n,o])}const emptyAppContext=createAppContext();let uid$1=0;function createComponentInstance$1(e,t,n){const o=e.type,c=(t?t.appContext:e.appContext)||emptyAppContext,d={uid:uid$1++,vnode:e,type:o,parent:t,appContext:c,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(c.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(o,c),emitsOptions:normalizeEmitsOptions(o,c),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:o.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return process.env.NODE_ENV!=="production"?d.ctx=createDevRenderContext(d):d.ctx={_:d},d.root=t?t.root:d,d.emit=emit$1.bind(null,d),e.ce&&e.ce(d),d}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=e=>{currentInstance=e,e.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null},isBuiltInTag=makeMap("slot,component");function validateComponentName(e,t){const n=t.isNativeTag||NO;(isBuiltInTag(e)||n(e))&&warn$3("Do not use built-in or reserved HTML elements as component id: "+e)}function isStatefulComponent(e){return e.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent$1(e,t=!1){isInSSRComponentSetup=t;const{props:n,children:o}=e.vnode,c=isStatefulComponent(e);initProps(e,n,c,t),initSlots(e,o);const d=c?setupStatefulComponent(e,t):void 0;return isInSSRComponentSetup=!1,d}function setupStatefulComponent(e,t){var n;const o=e.type;if(process.env.NODE_ENV!=="production"){if(o.name&&validateComponentName(o.name,e.appContext.config),o.components){const d=Object.keys(o.components);for(let g=0;g<d.length;g++)validateComponentName(d[g],e.appContext.config)}if(o.directives){const d=Object.keys(o.directives);for(let g=0;g<d.length;g++)validateDirectiveName(d[g])}o.compilerOptions&&isRuntimeOnly()&&warn$3('"compilerOptions" is only supported when using a build of Vue that includes the runtime compiler. Since you are using a runtime-only build, the options should be passed via your build tool config instead.')}e.accessCache=Object.create(null),e.proxy=markRaw(new Proxy(e.ctx,PublicInstanceProxyHandlers)),process.env.NODE_ENV!=="production"&&exposePropsOnRenderContext(e);const{setup:c}=o;if(c){const d=e.setupContext=c.length>1?createSetupContext(e):null;setCurrentInstance(e),pauseTracking();const g=callWithErrorHandling$1(c,e,0,[process.env.NODE_ENV!=="production"?shallowReadonly(e.props):e.props,d]);if(resetTracking(),unsetCurrentInstance(),isPromise(g)){if(g.then(unsetCurrentInstance,unsetCurrentInstance),t)return g.then(r=>{handleSetupResult(e,r,t)}).catch(r=>{handleError$1(r,e,0)});if(e.asyncDep=g,process.env.NODE_ENV!=="production"&&!e.suspense){const r=(n=o.name)!==null&&n!==void 0?n:"Anonymous";warn$3(`Component <${r}>: setup function returned a promise, but no <Suspense> boundary was found in the parent component tree. A component with async setup() must be nested in a <Suspense> in order to be rendered.`)}}else handleSetupResult(e,g,t)}else finishComponentSetup(e,t)}function handleSetupResult(e,t,n){isFunction$1(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:isObject$6(t)?(process.env.NODE_ENV!=="production"&&isVNode$1(t)&&warn$3("setup() should not return VNodes directly - return a render function instead."),process.env.NODE_ENV!=="production"&&(e.devtoolsRawSetupState=t),e.setupState=proxyRefs(t),process.env.NODE_ENV!=="production"&&exposeSetupStateOnRenderContext(e)):process.env.NODE_ENV!=="production"&&t!==void 0&&warn$3(`setup() should return an object. Received: ${t===null?"null":typeof t}`),finishComponentSetup(e,n)}let compile$1,installWithProxy;function registerRuntimeCompiler(e){compile$1=e,installWithProxy=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,RuntimeCompiledPublicInstanceProxyHandlers))}}const isRuntimeOnly=()=>!compile$1;function finishComponentSetup(e,t,n){const o=e.type;if(!e.render){if(!t&&compile$1&&!o.render){const c=o.template||resolveMergedOptions(e).template;if(c){process.env.NODE_ENV!=="production"&&startMeasure(e,"compile");const{isCustomElement:d,compilerOptions:g}=e.appContext.config,{delimiters:r,compilerOptions:v}=o,E=extend$4(extend$4({isCustomElement:d,delimiters:r},g),v);o.render=compile$1(c,E),process.env.NODE_ENV!=="production"&&endMeasure(e,"compile")}}e.render=o.render||NOOP,installWithProxy&&installWithProxy(e)}setCurrentInstance(e),pauseTracking(),applyOptions(e),resetTracking(),unsetCurrentInstance(),process.env.NODE_ENV!=="production"&&!o.render&&e.render===NOOP&&!t&&(!compile$1&&o.template?warn$3('Component provided template option but runtime compilation is not supported in this build of Vue. Configure your bundler to alias "vue" to "vue/dist/vue.esm-bundler.js".'):warn$3("Component is missing template or render function."))}function createAttrsProxy(e){return new Proxy(e.attrs,process.env.NODE_ENV!=="production"?{get(t,n){return markAttrsAccessed(),track(e,"get","$attrs"),t[n]},set(){return warn$3("setupContext.attrs is readonly."),!1},deleteProperty(){return warn$3("setupContext.attrs is readonly."),!1}}:{get(t,n){return track(e,"get","$attrs"),t[n]}})}function createSetupContext(e){const t=o=>{process.env.NODE_ENV!=="production"&&e.exposed&&warn$3("expose() should be called only once per setup()."),e.exposed=o||{}};let n;return process.env.NODE_ENV!=="production"?Object.freeze({get attrs(){return n||(n=createAttrsProxy(e))},get slots(){return shallowReadonly(e.slots)},get emit(){return(o,...c)=>e.emit(o,...c)},expose:t}):{get attrs(){return n||(n=createAttrsProxy(e))},slots:e.slots,emit:e.emit,expose:t}}function getExposeProxy(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in publicPropertiesMap)return publicPropertiesMap[n](e)}}))}const classifyRE$1=/(?:^|[-_])(\w)/g,classify$1=e=>e.replace(classifyRE$1,t=>t.toUpperCase()).replace(/[-_]/g,"");function getComponentName$1(e,t=!0){return isFunction$1(e)?e.displayName||e.name:e.name||t&&e.__name}function formatComponentName$1(e,t,n=!1){let o=getComponentName$1(t);if(!o&&t.__file){const c=t.__file.match(/([^/\\]+)\.\w+$/);c&&(o=c[1])}if(!o&&e&&e.parent){const c=d=>{for(const g in d)if(d[g]===t)return g};o=c(e.components||e.parent.type.components)||c(e.appContext.components)}return o?classify$1(o):n?"App":"Anonymous"}function isClassComponent(e){return isFunction$1(e)&&"__vccOpts"in e}const computed=(e,t)=>computed$1(e,t,isInSSRComponentSetup),warnRuntimeUsage=e=>warn$3(`${e}() is a compiler-hint helper that is only usable inside <script setup> of a single file component. Its arguments should be compiled away and passing it at runtime has no effect.`);function defineProps(){return process.env.NODE_ENV!=="production"&&warnRuntimeUsage("defineProps"),null}function defineEmits(){return process.env.NODE_ENV!=="production"&&warnRuntimeUsage("defineEmits"),null}function defineExpose(e){process.env.NODE_ENV!=="production"&&warnRuntimeUsage("defineExpose")}function withDefaults(e,t){return process.env.NODE_ENV!=="production"&&warnRuntimeUsage("withDefaults"),null}function useSlots(){return getContext().slots}function useAttrs(){return getContext().attrs}function getContext(){const e=getCurrentInstance();return process.env.NODE_ENV!=="production"&&!e&&warn$3("useContext() called without active instance."),e.setupContext||(e.setupContext=createSetupContext(e))}function mergeDefaults(e,t){const n=isArray$8(e)?e.reduce((o,c)=>(o[c]={},o),{}):e;for(const o in t){const c=n[o];c?isArray$8(c)||isFunction$1(c)?n[o]={type:c,default:t[o]}:c.default=t[o]:c===null?n[o]={default:t[o]}:process.env.NODE_ENV!=="production"&&warn$3(`props default key "${o}" has no corresponding declaration.`)}return n}function createPropsRestProxy(e,t){const n={};for(const o in e)t.includes(o)||Object.defineProperty(n,o,{enumerable:!0,get:()=>e[o]});return n}function withAsyncContext(e){const t=getCurrentInstance();process.env.NODE_ENV!=="production"&&!t&&warn$3("withAsyncContext called without active current instance. This is likely a bug.");let n=e();return unsetCurrentInstance(),isPromise(n)&&(n=n.catch(o=>{throw setCurrentInstance(t),o})),[n,()=>setCurrentInstance(t)]}function h(e,t,n){const o=arguments.length;return o===2?isObject$6(t)&&!isArray$8(t)?isVNode$1(t)?createVNode(e,null,[t]):createVNode(e,t):createVNode(e,null,t):(o>3?n=Array.prototype.slice.call(arguments,2):o===3&&isVNode$1(n)&&(n=[n]),createVNode(e,t,n))}const ssrContextKey=Symbol(process.env.NODE_ENV!=="production"?"ssrContext":""),useSSRContext=()=>{{const e=inject(ssrContextKey);return e||warn$3("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),e}};function isShallow(e){return!!(e&&e.__v_isShallow)}function initCustomFormatter(){if(process.env.NODE_ENV==="production"||typeof window>"u")return;const e={style:"color:#3ba776"},t={style:"color:#0b1bc9"},n={style:"color:#b62e24"},o={style:"color:#9d288c"},c={header(T){return isObject$6(T)?T.__isVue?["div",e,"VueInstance"]:isRef$1(T)?["div",{},["span",e,w(T)],"<",r(T.value),">"]:isReactive(T)?["div",{},["span",e,isShallow(T)?"ShallowReactive":"Reactive"],"<",r(T),`>${isReadonly(T)?" (readonly)":""}`]:isReadonly(T)?["div",{},["span",e,isShallow(T)?"ShallowReadonly":"Readonly"],"<",r(T),">"]:null:null},hasBody(T){return T&&T.__isVue},body(T){if(T&&T.__isVue)return["div",{},...d(T.$)]}};function d(T){const S=[];T.type.props&&T.props&&S.push(g("props",toRaw$1(T.props))),T.setupState!==EMPTY_OBJ&&S.push(g("setup",T.setupState)),T.data!==EMPTY_OBJ&&S.push(g("data",toRaw$1(T.data)));const N=v(T,"computed");N&&S.push(g("computed",N));const L=v(T,"inject");return L&&S.push(g("injected",L)),S.push(["div",{},["span",{style:o.style+";opacity:0.66"},"$ (internal): "],["object",{object:T}]]),S}function g(T,S){return S=extend$4({},S),Object.keys(S).length?["div",{style:"line-height:1.25em;margin-bottom:0.6em"},["div",{style:"color:#476582"},T],["div",{style:"padding-left:1.25em"},...Object.keys(S).map(N=>["div",{},["span",o,N+": "],r(S[N],!1)])]]:["span",{}]}function r(T,S=!0){return typeof T=="number"?["span",t,T]:typeof T=="string"?["span",n,JSON.stringify(T)]:typeof T=="boolean"?["span",o,T]:isObject$6(T)?["object",{object:S?toRaw$1(T):T}]:["span",n,String(T)]}function v(T,S){const N=T.type;if(isFunction$1(N))return;const L={};for(const P in T.ctx)E(N,P,S)&&(L[P]=T.ctx[P]);return L}function E(T,S,N){const L=T[N];if(isArray$8(L)&&L.includes(S)||isObject$6(L)&&S in L||T.extends&&E(T.extends,S,N)||T.mixins&&T.mixins.some(P=>E(P,S,N)))return!0}function w(T){return isShallow(T)?"ShallowRef":T.effect?"ComputedRef":"Ref"}window.devtoolsFormatters?window.devtoolsFormatters.push(c):window.devtoolsFormatters=[c]}function withMemo(e,t,n,o){const c=n[o];if(c&&isMemoSame(c,e))return c;const d=t();return d.memo=e.slice(),n[o]=d}function isMemoSame(e,t){const n=e.memo;if(n.length!=t.length)return!1;for(let o=0;o<n.length;o++)if(hasChanged(n[o],t[o]))return!1;return isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),!0}const version$2="3.2.41",_ssrUtils={createComponentInstance:createComponentInstance$1,setupComponent:setupComponent$1,renderComponentRoot:renderComponentRoot$1,setCurrentRenderingInstance:setCurrentRenderingInstance$1,isVNode:isVNode$1,normalizeVNode:normalizeVNode$1},ssrUtils=_ssrUtils,resolveFilter=null,compatUtils=null,svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{const c=t?doc.createElementNS(svgNS,e):doc.createElement(e,n?{is:n}:void 0);return e==="select"&&o&&o.multiple!=null&&c.setAttribute("multiple",o.multiple),c},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,o,c,d){const g=n?n.previousSibling:t.lastChild;if(c&&(c===d||c.nextSibling))for(;t.insertBefore(c.cloneNode(!0),n),!(c===d||!(c=c.nextSibling)););else{templateContainer.innerHTML=o?`<svg>${e}</svg>`:e;const r=templateContainer.content;if(o){const v=r.firstChild;for(;v.firstChild;)r.appendChild(v.firstChild);r.removeChild(v)}t.insertBefore(r,n)}return[g?g.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function patchClass(e,t,n){const o=e._vtc;o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function patchStyle(e,t,n){const o=e.style,c=isString$2(n);if(n&&!c){for(const d in n)setStyle(o,d,n[d]);if(t&&!isString$2(t))for(const d in t)n[d]==null&&setStyle(o,d,"")}else{const d=o.display;c?t!==n&&(o.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(o.display=d)}}const importantRE=/\s*!important$/;function setStyle(e,t,n){if(isArray$8(n))n.forEach(o=>setStyle(e,t,o));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const o=autoPrefix(e,t);importantRE.test(n)?e.setProperty(hyphenate(o),n.replace(importantRE,""),"important"):e[o]=n}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,t){const n=prefixCache[t];if(n)return n;let o=camelize(t);if(o!=="filter"&&o in e)return prefixCache[t]=o;o=capitalize$1(o);for(let c=0;c<prefixes.length;c++){const d=prefixes[c]+o;if(d in e)return prefixCache[t]=d}return t}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,t,n,o,c){if(o&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(xlinkNS,t.slice(6,t.length)):e.setAttributeNS(xlinkNS,t,n);else{const d=isSpecialBooleanAttr(t);n==null||d&&!includeBooleanAttr(n)?e.removeAttribute(t):e.setAttribute(t,d?"":n)}}function patchDOMProp(e,t,n,o,c,d,g){if(t==="innerHTML"||t==="textContent"){o&&g(o,c,d),e[t]=n==null?"":n;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const v=n==null?"":n;(e.value!==v||e.tagName==="OPTION")&&(e.value=v),n==null&&e.removeAttribute(t);return}let r=!1;if(n===""||n==null){const v=typeof e[t];v==="boolean"?n=includeBooleanAttr(n):n==null&&v==="string"?(n="",r=!0):v==="number"&&(n=0,r=!0)}try{e[t]=n}catch(v){process.env.NODE_ENV!=="production"&&!r&&warn$3(`Failed setting prop "${t}" on <${e.tagName.toLowerCase()}>: value ${n} is invalid.`,v)}r&&e.removeAttribute(t)}function addEventListener(e,t,n,o){e.addEventListener(t,n,o)}function removeEventListener(e,t,n,o){e.removeEventListener(t,n,o)}function patchEvent(e,t,n,o,c=null){const d=e._vei||(e._vei={}),g=d[t];if(o&&g)g.value=o;else{const[r,v]=parseName(t);if(o){const E=d[t]=createInvoker(o,c);addEventListener(e,r,E,v)}else g&&(removeEventListener(e,r,g,v),d[t]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let t;if(optionsModifierRE.test(e)){t={};let o;for(;o=e.match(optionsModifierRE);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hyphenate(e.slice(2)),t]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(e,t){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(o,n.value),t,5,[o])};return n.value=e,n.attached=getNow(),n}function patchStopImmediatePropagation(e,t){if(isArray$8(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(o=>c=>!c._stopped&&o&&o(c))}else return t}const nativeOnRE=/^on[a-z]/,patchProp=(e,t,n,o,c=!1,d,g,r,v)=>{t==="class"?patchClass(e,o,c):t==="style"?patchStyle(e,n,o):isOn(t)?isModelListener(t)||patchEvent(e,t,n,o,g):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):shouldSetAsProp(e,t,o,c))?patchDOMProp(e,t,o,d,g,r,v):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),patchAttr(e,t,o,c))};function shouldSetAsProp(e,t,n,o){return o?!!(t==="innerHTML"||t==="textContent"||t in e&&nativeOnRE.test(t)&&isFunction$1(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||nativeOnRE.test(t)&&isString$2(n)?!1:t in e}function defineCustomElement(e,t){const n=defineComponent(e);class o extends VueElement{constructor(d){super(n,d,t)}}return o.def=n,o}const defineSSRCustomElement=e=>defineCustomElement(e,hydrate),BaseClass=typeof HTMLElement<"u"?HTMLElement:class{};class VueElement extends BaseClass{constructor(t,n={},o){super(),this._def=t,this._props=n,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&o?o(this._createVNode(),this.shadowRoot):(process.env.NODE_ENV!=="production"&&this.shadowRoot&&warn$3("Custom element has pre-rendered declarative shadow root but is not defined as hydratable. Use `defineSSRCustomElement`."),this.attachShadow({mode:"open"}))}connectedCallback(){this._connected=!0,this._instance||this._resolveDef()}disconnectedCallback(){this._connected=!1,nextTick$1(()=>{this._connected||(render$1(null,this.shadowRoot),this._instance=null)})}_resolveDef(){if(this._resolved)return;this._resolved=!0;for(let o=0;o<this.attributes.length;o++)this._setAttr(this.attributes[o].name);new MutationObserver(o=>{for(const c of o)this._setAttr(c.attributeName)}).observe(this,{attributes:!0});const t=o=>{const{props:c,styles:d}=o,g=!isArray$8(c),r=c?g?Object.keys(c):c:[];let v;if(g)for(const E in this._props){const w=c[E];(w===Number||w&&w.type===Number)&&(this._props[E]=toNumber$2(this._props[E]),(v||(v=Object.create(null)))[E]=!0)}this._numberProps=v;for(const E of Object.keys(this))E[0]!=="_"&&this._setProp(E,this[E],!0,!1);for(const E of r.map(camelize))Object.defineProperty(this,E,{get(){return this._getProp(E)},set(w){this._setProp(E,w)}});this._applyStyles(d),this._update()},n=this._def.__asyncLoader;n?n().then(t):t(this._def)}_setAttr(t){let n=this.getAttribute(t);this._numberProps&&this._numberProps[t]&&(n=toNumber$2(n)),this._setProp(camelize(t),n,!1)}_getProp(t){return this._props[t]}_setProp(t,n,o=!0,c=!0){n!==this._props[t]&&(this._props[t]=n,c&&this._instance&&this._update(),o&&(n===!0?this.setAttribute(hyphenate(t),""):typeof n=="string"||typeof n=="number"?this.setAttribute(hyphenate(t),n+""):n||this.removeAttribute(hyphenate(t))))}_update(){render$1(this._createVNode(),this.shadowRoot)}_createVNode(){const t=createVNode(this._def,extend$4({},this._props));return this._instance||(t.ce=n=>{this._instance=n,n.isCE=!0,process.env.NODE_ENV!=="production"&&(n.ceReload=c=>{this._styles&&(this._styles.forEach(d=>this.shadowRoot.removeChild(d)),this._styles.length=0),this._applyStyles(c),this._def.__asyncLoader||(this._instance=null,this._update())}),n.emit=(c,...d)=>{this.dispatchEvent(new CustomEvent(c,{detail:d}))};let o=this;for(;o=o&&(o.parentNode||o.host);)if(o instanceof VueElement){n.parent=o._instance;break}}),t}_applyStyles(t){t&&t.forEach(n=>{const o=document.createElement("style");o.textContent=n,this.shadowRoot.appendChild(o),process.env.NODE_ENV!=="production"&&(this._styles||(this._styles=[])).push(o)})}}function useCssModule(e="$style"){{const t=getCurrentInstance();if(!t)return process.env.NODE_ENV!=="production"&&warn$3("useCssModule must be called inside setup()"),EMPTY_OBJ;const n=t.type.__cssModules;if(!n)return process.env.NODE_ENV!=="production"&&warn$3("Current instance does not have CSS modules injected."),EMPTY_OBJ;const o=n[e];return o||(process.env.NODE_ENV!=="production"&&warn$3(`Current instance does not have CSS module named "${e}".`),EMPTY_OBJ)}}function useCssVars(e){const t=getCurrentInstance();if(!t){process.env.NODE_ENV!=="production"&&warn$3("useCssVars is called without current active component instance.");return}const n=()=>setVarsOnVNode(t.subTree,e(t.proxy));watchPostEffect(n),onMounted(()=>{const o=new MutationObserver(n);o.observe(t.subTree.el.parentNode,{childList:!0}),onUnmounted(()=>o.disconnect())})}function setVarsOnVNode(e,t){if(e.shapeFlag&128){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{setVarsOnVNode(n.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)setVarsOnNode(e.el,t);else if(e.type===Fragment)e.children.forEach(n=>setVarsOnVNode(n,t));else if(e.type===Static){let{el:n,anchor:o}=e;for(;n&&(setVarsOnNode(n,t),n!==o);)n=n.nextSibling}}function setVarsOnNode(e,t){if(e.nodeType===1){const n=e.style;for(const o in t)n.setProperty(`--${o}`,t[o])}}const TRANSITION="transition",ANIMATION="animation",Transition=(e,{slots:t})=>h(BaseTransition,resolveTransitionProps(e),t);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=Transition.props=extend$4({},BaseTransition.props,DOMTransitionPropsValidators),callHook=(e,t=[])=>{isArray$8(e)?e.forEach(n=>n(...t)):e&&e(...t)},hasExplicitCallback=e=>e?isArray$8(e)?e.some(t=>t.length>1):e.length>1:!1;function resolveTransitionProps(e){const t={};for(const ie in e)ie in DOMTransitionPropsValidators||(t[ie]=e[ie]);if(e.css===!1)return t;const{name:n="v",type:o,duration:c,enterFromClass:d=`${n}-enter-from`,enterActiveClass:g=`${n}-enter-active`,enterToClass:r=`${n}-enter-to`,appearFromClass:v=d,appearActiveClass:E=g,appearToClass:w=r,leaveFromClass:T=`${n}-leave-from`,leaveActiveClass:S=`${n}-leave-active`,leaveToClass:N=`${n}-leave-to`}=e,L=normalizeDuration(c),P=L&&L[0],O=L&&L[1],{onBeforeEnter:V,onEnter:D,onEnterCancelled:U,onLeave:W,onLeaveCancelled:Z,onBeforeAppear:re=V,onAppear:ae=D,onAppearCancelled:ce=U}=t,ne=(ie,ve,Pe)=>{removeTransitionClass(ie,ve?w:r),removeTransitionClass(ie,ve?E:g),Pe&&Pe()},le=(ie,ve)=>{ie._isLeaving=!1,removeTransitionClass(ie,T),removeTransitionClass(ie,N),removeTransitionClass(ie,S),ve&&ve()},de=ie=>(ve,Pe)=>{const ct=ie?ae:D,ge=()=>ne(ve,ie,Pe);callHook(ct,[ve,ge]),nextFrame(()=>{removeTransitionClass(ve,ie?v:d),addTransitionClass(ve,ie?w:r),hasExplicitCallback(ct)||whenTransitionEnds(ve,o,P,ge)})};return extend$4(t,{onBeforeEnter(ie){callHook(V,[ie]),addTransitionClass(ie,d),addTransitionClass(ie,g)},onBeforeAppear(ie){callHook(re,[ie]),addTransitionClass(ie,v),addTransitionClass(ie,E)},onEnter:de(!1),onAppear:de(!0),onLeave(ie,ve){ie._isLeaving=!0;const Pe=()=>le(ie,ve);addTransitionClass(ie,T),forceReflow(),addTransitionClass(ie,S),nextFrame(()=>{!ie._isLeaving||(removeTransitionClass(ie,T),addTransitionClass(ie,N),hasExplicitCallback(W)||whenTransitionEnds(ie,o,O,Pe))}),callHook(W,[ie,Pe])},onEnterCancelled(ie){ne(ie,!1),callHook(U,[ie])},onAppearCancelled(ie){ne(ie,!0),callHook(ce,[ie])},onLeaveCancelled(ie){le(ie),callHook(Z,[ie])}})}function normalizeDuration(e){if(e==null)return null;if(isObject$6(e))return[NumberOf(e.enter),NumberOf(e.leave)];{const t=NumberOf(e);return[t,t]}}function NumberOf(e){const t=toNumber$2(e);return process.env.NODE_ENV!=="production"&&validateDuration(t),t}function validateDuration(e){typeof e!="number"?warn$3(`<transition> explicit duration is not a valid number - got ${JSON.stringify(e)}.`):isNaN(e)&&warn$3("<transition> explicit duration is NaN - the duration expression might be incorrect.")}function addTransitionClass(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function removeTransitionClass(e,t){t.split(/\s+/).forEach(o=>o&&e.classList.remove(o));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function nextFrame(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let endId=0;function whenTransitionEnds(e,t,n,o){const c=e._endId=++endId,d=()=>{c===e._endId&&o()};if(n)return setTimeout(d,n);const{type:g,timeout:r,propCount:v}=getTransitionInfo(e,t);if(!g)return o();const E=g+"end";let w=0;const T=()=>{e.removeEventListener(E,S),d()},S=N=>{N.target===e&&++w>=v&&T()};setTimeout(()=>{w<v&&T()},r+1),e.addEventListener(E,S)}function getTransitionInfo(e,t){const n=window.getComputedStyle(e),o=L=>(n[L]||"").split(", "),c=o(TRANSITION+"Delay"),d=o(TRANSITION+"Duration"),g=getTimeout(c,d),r=o(ANIMATION+"Delay"),v=o(ANIMATION+"Duration"),E=getTimeout(r,v);let w=null,T=0,S=0;t===TRANSITION?g>0&&(w=TRANSITION,T=g,S=d.length):t===ANIMATION?E>0&&(w=ANIMATION,T=E,S=v.length):(T=Math.max(g,E),w=T>0?g>E?TRANSITION:ANIMATION:null,S=w?w===TRANSITION?d.length:v.length:0);const N=w===TRANSITION&&/\b(transform|all)(,|$)/.test(n[TRANSITION+"Property"]);return{type:w,timeout:T,propCount:S,hasTransform:N}}function getTimeout(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,o)=>toMs(n)+toMs(e[o])))}function toMs(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}const positionMap=new WeakMap,newPositionMap=new WeakMap,TransitionGroupImpl={name:"TransitionGroup",props:extend$4({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=getCurrentInstance(),o=useTransitionState();let c,d;return onUpdated(()=>{if(!c.length)return;const g=e.moveClass||`${e.name||"v"}-move`;if(!hasCSSTransform(c[0].el,n.vnode.el,g))return;c.forEach(callPendingCbs),c.forEach(recordPosition);const r=c.filter(applyTranslation);forceReflow(),r.forEach(v=>{const E=v.el,w=E.style;addTransitionClass(E,g),w.transform=w.webkitTransform=w.transitionDuration="";const T=E._moveCb=S=>{S&&S.target!==E||(!S||/transform$/.test(S.propertyName))&&(E.removeEventListener("transitionend",T),E._moveCb=null,removeTransitionClass(E,g))};E.addEventListener("transitionend",T)})}),()=>{const g=toRaw$1(e),r=resolveTransitionProps(g);let v=g.tag||Fragment;c=d,d=t.default?getTransitionRawChildren(t.default()):[];for(let E=0;E<d.length;E++){const w=d[E];w.key!=null?setTransitionHooks(w,resolveTransitionHooks(w,r,o,n)):process.env.NODE_ENV!=="production"&&warn$3("<TransitionGroup> children must be keyed.")}if(c)for(let E=0;E<c.length;E++){const w=c[E];setTransitionHooks(w,resolveTransitionHooks(w,r,o,n)),positionMap.set(w,w.el.getBoundingClientRect())}return createVNode(v,null,d)}}},TransitionGroup=TransitionGroupImpl;function callPendingCbs(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function recordPosition(e){newPositionMap.set(e,e.el.getBoundingClientRect())}function applyTranslation(e){const t=positionMap.get(e),n=newPositionMap.get(e),o=t.left-n.left,c=t.top-n.top;if(o||c){const d=e.el.style;return d.transform=d.webkitTransform=`translate(${o}px,${c}px)`,d.transitionDuration="0s",e}}function hasCSSTransform(e,t,n){const o=e.cloneNode();e._vtc&&e._vtc.forEach(g=>{g.split(/\s+/).forEach(r=>r&&o.classList.remove(r))}),n.split(/\s+/).forEach(g=>g&&o.classList.add(g)),o.style.display="none";const c=t.nodeType===1?t:t.parentNode;c.appendChild(o);const{hasTransform:d}=getTransitionInfo(o);return c.removeChild(o),d}const getModelAssigner=e=>{const t=e.props["onUpdate:modelValue"]||!1;return isArray$8(t)?n=>invokeArrayFns(t,n):t};function onCompositionStart(e){e.target.composing=!0}function onCompositionEnd(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const vModelText={created(e,{modifiers:{lazy:t,trim:n,number:o}},c){e._assign=getModelAssigner(c);const d=o||c.props&&c.props.type==="number";addEventListener(e,t?"change":"input",g=>{if(g.target.composing)return;let r=e.value;n&&(r=r.trim()),d&&(r=toNumber$2(r)),e._assign(r)}),n&&addEventListener(e,"change",()=>{e.value=e.value.trim()}),t||(addEventListener(e,"compositionstart",onCompositionStart),addEventListener(e,"compositionend",onCompositionEnd),addEventListener(e,"change",onCompositionEnd))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:o,number:c}},d){if(e._assign=getModelAssigner(d),e.composing||document.activeElement===e&&e.type!=="range"&&(n||o&&e.value.trim()===t||(c||e.type==="number")&&toNumber$2(e.value)===t))return;const g=t==null?"":t;e.value!==g&&(e.value=g)}},vModelCheckbox={deep:!0,created(e,t,n){e._assign=getModelAssigner(n),addEventListener(e,"change",()=>{const o=e._modelValue,c=getValue$1(e),d=e.checked,g=e._assign;if(isArray$8(o)){const r=looseIndexOf(o,c),v=r!==-1;if(d&&!v)g(o.concat(c));else if(!d&&v){const E=[...o];E.splice(r,1),g(E)}}else if(isSet$1(o)){const r=new Set(o);d?r.add(c):r.delete(c),g(r)}else g(getCheckboxValue(e,d))})},mounted:setChecked,beforeUpdate(e,t,n){e._assign=getModelAssigner(n),setChecked(e,t,n)}};function setChecked(e,{value:t,oldValue:n},o){e._modelValue=t,isArray$8(t)?e.checked=looseIndexOf(t,o.props.value)>-1:isSet$1(t)?e.checked=t.has(o.props.value):t!==n&&(e.checked=looseEqual(t,getCheckboxValue(e,!0)))}const vModelRadio={created(e,{value:t},n){e.checked=looseEqual(t,n.props.value),e._assign=getModelAssigner(n),addEventListener(e,"change",()=>{e._assign(getValue$1(e))})},beforeUpdate(e,{value:t,oldValue:n},o){e._assign=getModelAssigner(o),t!==n&&(e.checked=looseEqual(t,o.props.value))}},vModelSelect={deep:!0,created(e,{value:t,modifiers:{number:n}},o){const c=isSet$1(t);addEventListener(e,"change",()=>{const d=Array.prototype.filter.call(e.options,g=>g.selected).map(g=>n?toNumber$2(getValue$1(g)):getValue$1(g));e._assign(e.multiple?c?new Set(d):d:d[0])}),e._assign=getModelAssigner(o)},mounted(e,{value:t}){setSelected(e,t)},beforeUpdate(e,t,n){e._assign=getModelAssigner(n)},updated(e,{value:t}){setSelected(e,t)}};function setSelected(e,t){const n=e.multiple;if(n&&!isArray$8(t)&&!isSet$1(t)){process.env.NODE_ENV!=="production"&&warn$3(`<select multiple v-model> expects an Array or Set value for its binding, but got ${Object.prototype.toString.call(t).slice(8,-1)}.`);return}for(let o=0,c=e.options.length;o<c;o++){const d=e.options[o],g=getValue$1(d);if(n)isArray$8(t)?d.selected=looseIndexOf(t,g)>-1:d.selected=t.has(g);else if(looseEqual(getValue$1(d),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}function getValue$1(e){return"_value"in e?e._value:e.value}function getCheckboxValue(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const vModelDynamic={created(e,t,n){callModelHook(e,t,n,null,"created")},mounted(e,t,n){callModelHook(e,t,n,null,"mounted")},beforeUpdate(e,t,n,o){callModelHook(e,t,n,o,"beforeUpdate")},updated(e,t,n,o){callModelHook(e,t,n,o,"updated")}};function resolveDynamicModel(e,t){switch(e){case"SELECT":return vModelSelect;case"TEXTAREA":return vModelText;default:switch(t){case"checkbox":return vModelCheckbox;case"radio":return vModelRadio;default:return vModelText}}}function callModelHook(e,t,n,o,c){const g=resolveDynamicModel(e.tagName,n.props&&n.props.type)[c];g&&g(e,t,n,o)}function initVModelForSSR(){vModelText.getSSRProps=({value:e})=>({value:e}),vModelRadio.getSSRProps=({value:e},t)=>{if(t.props&&looseEqual(t.props.value,e))return{checked:!0}},vModelCheckbox.getSSRProps=({value:e},t)=>{if(isArray$8(e)){if(t.props&&looseIndexOf(e,t.props.value)>-1)return{checked:!0}}else if(isSet$1(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},vModelDynamic.getSSRProps=(e,t)=>{if(typeof t.type!="string")return;const n=resolveDynamicModel(t.type.toUpperCase(),t.props&&t.props.type);if(n.getSSRProps)return n.getSSRProps(e,t)}}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>systemModifiers.some(n=>e[`${n}Key`]&&!t.includes(n))},withModifiers=(e,t)=>(n,...o)=>{for(let c=0;c<t.length;c++){const d=modifierGuards[t[c]];if(d&&d(n,t))return}return e(n,...o)},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(e,t)=>n=>{if(!("key"in n))return;const o=hyphenate(n.key);if(t.some(c=>c===o||keyNames[c]===o))return e(n)},vShow={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):setDisplay(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:o}){!t!=!n&&(o?t?(o.beforeEnter(e),setDisplay(e,!0),o.enter(e)):o.leave(e,()=>{setDisplay(e,!1)}):setDisplay(e,t))},beforeUnmount(e,{value:t}){setDisplay(e,t)}};function setDisplay(e,t){e.style.display=t?e._vod:"none"}function initVShowForSSR(){vShow.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const rendererOptions=extend$4({patchProp},nodeOps);let renderer,enabledHydration=!1;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}function ensureHydrationRenderer(){return renderer=enabledHydration?renderer:createHydrationRenderer(rendererOptions),enabledHydration=!0,renderer}const render$1=(...e)=>{ensureRenderer().render(...e)},hydrate=(...e)=>{ensureHydrationRenderer().hydrate(...e)},createApp$1=(...e)=>{const t=ensureRenderer().createApp(...e);process.env.NODE_ENV!=="production"&&(injectNativeTagCheck(t),injectCompilerOptionsCheck(t));const{mount:n}=t;return t.mount=o=>{const c=normalizeContainer(o);if(!c)return;const d=t._component;!isFunction$1(d)&&!d.render&&!d.template&&(d.template=c.innerHTML),c.innerHTML="";const g=n(c,!1,c instanceof SVGElement);return c instanceof Element&&(c.removeAttribute("v-cloak"),c.setAttribute("data-v-app","")),g},t},createSSRApp=(...e)=>{const t=ensureHydrationRenderer().createApp(...e);process.env.NODE_ENV!=="production"&&(injectNativeTagCheck(t),injectCompilerOptionsCheck(t));const{mount:n}=t;return t.mount=o=>{const c=normalizeContainer(o);if(c)return n(c,!0,c instanceof SVGElement)},t};function injectNativeTagCheck(e){Object.defineProperty(e.config,"isNativeTag",{value:t=>isHTMLTag(t)||isSVGTag(t),writable:!1})}function injectCompilerOptionsCheck(e){if(isRuntimeOnly()){const t=e.config.isCustomElement;Object.defineProperty(e.config,"isCustomElement",{get(){return t},set(){warn$3("The `isCustomElement` config option is deprecated. Use `compilerOptions.isCustomElement` instead.")}});const n=e.config.compilerOptions,o='The `compilerOptions` config option is only respected when using a build of Vue.js that includes the runtime compiler (aka "full build"). Since you are using the runtime-only build, `compilerOptions` must be passed to `@vue/compiler-dom` in the build setup instead.\n- For vue-loader: pass it via vue-loader\'s `compilerOptions` loader option.\n- For vue-cli: see https://cli.vuejs.org/guide/webpack.html#modifying-options-of-a-loader\n- For vite: pass it via @vitejs/plugin-vue options. See https://github.com/vitejs/vite/tree/main/packages/plugin-vue#example-for-passing-options-to-vuecompiler-dom';Object.defineProperty(e.config,"compilerOptions",{get(){return warn$3(o),n},set(){warn$3(o)}})}}function normalizeContainer(e){if(isString$2(e)){const t=document.querySelector(e);return process.env.NODE_ENV!=="production"&&!t&&warn$3(`Failed to mount app: mount target selector "${e}" returned null.`),t}return process.env.NODE_ENV!=="production"&&window.ShadowRoot&&e instanceof window.ShadowRoot&&e.mode==="closed"&&warn$3('mounting on a ShadowRoot with `{mode: "closed"}` may lead to unpredictable bugs'),e}let ssrDirectiveInitialized=!1;const initDirectivesForSSR=()=>{ssrDirectiveInitialized||(ssrDirectiveInitialized=!0,initVModelForSSR(),initVShowForSSR())};function initDev(){initCustomFormatter()}process.env.NODE_ENV!=="production"&&initDev();const compile=()=>{process.env.NODE_ENV!=="production"&&warn$3('Runtime compilation is not supported in this build of Vue. Configure your bundler to alias "vue" to "vue/dist/vue.esm-bundler.js".')},vue_runtime_esmBundler=Object.freeze(Object.defineProperty({__proto__:null,compile,EffectScope,ReactiveEffect,customRef,effect,effectScope,getCurrentScope,isProxy,isReactive,isReadonly,isRef:isRef$1,isShallow:isShallow$1,markRaw,onScopeDispose,proxyRefs,reactive,readonly,ref,shallowReactive,shallowReadonly,shallowRef,stop,toRaw:toRaw$1,toRef,toRefs,triggerRef,unref,camelize,capitalize:capitalize$1,normalizeClass,normalizeProps,normalizeStyle,toDisplayString,toHandlerKey,BaseTransition,Comment:Comment$1,Fragment,KeepAlive,Static,Suspense,Teleport,Text,callWithAsyncErrorHandling,callWithErrorHandling:callWithErrorHandling$1,cloneVNode,compatUtils,computed,createBlock,createCommentVNode,createElementBlock,createElementVNode:createBaseVNode,createHydrationRenderer,createPropsRestProxy,createRenderer,createSlots,createStaticVNode,createTextVNode,createVNode,defineAsyncComponent,defineComponent,defineEmits,defineExpose,defineProps,get devtools(){return devtools},getCurrentInstance,getTransitionRawChildren,guardReactiveProps,h,handleError:handleError$1,initCustomFormatter,inject,isMemoSame,isRuntimeOnly,isVNode:isVNode$1,mergeDefaults,mergeProps,nextTick:nextTick$1,onActivated,onBeforeMount,onBeforeUnmount,onBeforeUpdate,onDeactivated,onErrorCaptured,onMounted,onRenderTracked,onRenderTriggered,onServerPrefetch,onUnmounted,onUpdated,openBlock,popScopeId,provide,pushScopeId,queuePostFlushCb,registerRuntimeCompiler,renderList,renderSlot,resolveComponent,resolveDirective,resolveDynamicComponent,resolveFilter,resolveTransitionHooks,setBlockTracking,setDevtoolsHook,setTransitionHooks,ssrContextKey,ssrUtils,toHandlers,transformVNodeArgs,useAttrs,useSSRContext,useSlots,useTransitionState,version:version$2,warn:warn$3,watch,watchEffect,watchPostEffect,watchSyncEffect,withAsyncContext,withCtx,withDefaults,withDirectives,withMemo,withScopeId,Transition,TransitionGroup,VueElement,createApp:createApp$1,createSSRApp,defineCustomElement,defineSSRCustomElement,hydrate,initDirectivesForSSR,render:render$1,useCssModule,useCssVars,vModelCheckbox,vModelDynamic,vModelRadio,vModelSelect,vModelText,vShow,withKeys,withModifiers},Symbol.toStringTag,{value:"Module"}));function getDevtoolsGlobalHook(){return getTarget().__VUE_DEVTOOLS_GLOBAL_HOOK__}function getTarget(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const isProxyAvailable=typeof Proxy=="function",HOOK_SETUP="devtools-plugin:setup",HOOK_PLUGIN_SETTINGS_SET="plugin:settings:set";let supported,perf;function isPerformanceSupported(){var e;return supported!==void 0||(typeof window<"u"&&window.performance?(supported=!0,perf=window.performance):typeof global<"u"&&((e=global.perf_hooks)===null||e===void 0?void 0:e.performance)?(supported=!0,perf=global.perf_hooks.performance):supported=!1),supported}function now$1(){return isPerformanceSupported()?perf.now():Date.now()}class ApiProxy{constructor(t,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=n;const o={};if(t.settings)for(const g in t.settings){const r=t.settings[g];o[g]=r.defaultValue}const c=`__vue-devtools-plugin-settings__${t.id}`;let d=Object.assign({},o);try{const g=localStorage.getItem(c),r=JSON.parse(g);Object.assign(d,r)}catch{}this.fallbacks={getSettings(){return d},setSettings(g){try{localStorage.setItem(c,JSON.stringify(g))}catch{}d=g},now(){return now$1()}},n&&n.on(HOOK_PLUGIN_SETTINGS_SET,(g,r)=>{g===this.plugin.id&&this.fallbacks.setSettings(r)}),this.proxiedOn=new Proxy({},{get:(g,r)=>this.target?this.target.on[r]:(...v)=>{this.onQueue.push({method:r,args:v})}}),this.proxiedTarget=new Proxy({},{get:(g,r)=>this.target?this.target[r]:r==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(r)?(...v)=>(this.targetQueue.push({method:r,args:v,resolve:()=>{}}),this.fallbacks[r](...v)):(...v)=>new Promise(E=>{this.targetQueue.push({method:r,args:v,resolve:E})})})}async setRealTarget(t){this.target=t;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function setupDevtoolsPlugin(e,t){const n=e,o=getTarget(),c=getDevtoolsGlobalHook(),d=isProxyAvailable&&n.enableEarlyProxy;if(c&&(o.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!d))c.emit(HOOK_SETUP,e,t);else{const g=d?new ApiProxy(n,c):null;(o.__VUE_DEVTOOLS_PLUGINS__=o.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:t,proxy:g}),g&&t(g.proxiedTarget)}}/*!
  * vue-router v4.1.5
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof window<"u";function isESModule(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const assign$2=Object.assign;function applyToParams(e,t){const n={};for(const o in t){const c=t[o];n[o]=isArray$7(c)?c.map(e):e(c)}return n}const noop=()=>{},isArray$7=Array.isArray;function warn$2(e){const t=Array.from(arguments).slice(1);console.warn.apply(console,["[Vue Router warn]: "+e].concat(t))}const TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=e=>e.replace(TRAILING_SLASH_RE,"");function parseURL(e,t,n="/"){let o,c={},d="",g="";const r=t.indexOf("#");let v=t.indexOf("?");return r<v&&r>=0&&(v=-1),v>-1&&(o=t.slice(0,v),d=t.slice(v+1,r>-1?r:t.length),c=e(d)),r>-1&&(o=o||t.slice(0,r),g=t.slice(r,t.length)),o=resolveRelativePath(o!=null?o:t,n),{fullPath:o+(d&&"?")+d+g,path:o,query:c,hash:g}}function stringifyURL(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function isSameRouteLocation(e,t,n){const o=t.matched.length-1,c=n.matched.length-1;return o>-1&&o===c&&isSameRouteRecord(t.matched[o],n.matched[c])&&isSameRouteLocationParams(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function isSameRouteRecord(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function isSameRouteLocationParams(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!isSameRouteLocationParamsValue(e[n],t[n]))return!1;return!0}function isSameRouteLocationParamsValue(e,t){return isArray$7(e)?isEquivalentArray(e,t):isArray$7(t)?isEquivalentArray(t,e):e===t}function isEquivalentArray(e,t){return isArray$7(t)?e.length===t.length&&e.every((n,o)=>n===t[o]):e.length===1&&e[0]===t}function resolveRelativePath(e,t){if(e.startsWith("/"))return e;if(process.env.NODE_ENV!=="production"&&!t.startsWith("/"))return warn$2(`Cannot resolve a relative location without an absolute path. Trying to resolve "${e}" from "${t}". It should look like "/${t}".`),e;if(!e)return t;const n=t.split("/"),o=e.split("/");let c=n.length-1,d,g;for(d=0;d<o.length;d++)if(g=o[d],g!==".")if(g==="..")c>1&&c--;else break;return n.slice(0,c).join("/")+"/"+o.slice(d-(d===o.length?1:0)).join("/")}var NavigationType;(function(e){e.pop="pop",e.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(e){e.back="back",e.forward="forward",e.unknown=""})(NavigationDirection||(NavigationDirection={}));const START="";function normalizeBase(e){if(!e)if(isBrowser){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),removeTrailingSlash(e)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(e,t){return e.replace(BEFORE_HASH_RE,"#")+t}function getElementPosition(e,t){const n=document.documentElement.getBoundingClientRect(),o=e.getBoundingClientRect();return{behavior:t.behavior,left:o.left-n.left-(t.left||0),top:o.top-n.top-(t.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(e){let t;if("el"in e){const n=e.el,o=typeof n=="string"&&n.startsWith("#");if(process.env.NODE_ENV!=="production"&&typeof e.el=="string"&&(!o||!document.getElementById(e.el.slice(1))))try{const d=document.querySelector(e.el);if(o&&d){warn$2(`The selector "${e.el}" should be passed as "el: document.querySelector('${e.el}')" because it starts with "#".`);return}}catch{warn$2(`The selector "${e.el}" is invalid. If you are using an id selector, make sure to escape it. You can find more information about escaping characters in selectors at https://mathiasbynens.be/notes/css-escapes or use CSS.escape (https://developer.mozilla.org/en-US/docs/Web/API/CSS/escape).`);return}const c=typeof n=="string"?o?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!c){process.env.NODE_ENV!=="production"&&warn$2(`Couldn't find element using selector "${e.el}" returned by scrollBehavior.`);return}t=getElementPosition(c,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function getScrollKey(e,t){return(history.state?history.state.position-t:-1)+e}const scrollPositions=new Map;function saveScrollPosition(e,t){scrollPositions.set(e,t)}function getSavedScrollPosition(e){const t=scrollPositions.get(e);return scrollPositions.delete(e),t}function createMemoryHistory(e=""){let t=[],n=[START],o=0;e=normalizeBase(e);function c(r){o++,o===n.length||n.splice(o),n.push(r)}function d(r,v,{direction:E,delta:w}){const T={direction:E,delta:w,type:NavigationType.pop};for(const S of t)S(r,v,T)}const g={location:START,state:{},base:e,createHref:createHref.bind(null,e),replace(r){n.splice(o--,1),c(r)},push(r,v){c(r)},listen(r){return t.push(r),()=>{const v=t.indexOf(r);v>-1&&t.splice(v,1)}},destroy(){t=[],n=[START],o=0},go(r,v=!0){const E=this.location,w=r<0?NavigationDirection.back:NavigationDirection.forward;o=Math.max(0,Math.min(o+r,n.length-1)),v&&d(this.location,E,{direction:w,delta:r})}};return Object.defineProperty(g,"location",{enumerable:!0,get:()=>n[o]}),g}function isRouteLocation(e){return typeof e=="string"||e&&typeof e=="object"}function isRouteName(e){return typeof e=="string"||typeof e=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol(process.env.NODE_ENV!=="production"?"navigation failure":"");var NavigationFailureType;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));const ErrorTypeMessages={[1]({location:e,currentLocation:t}){return`No match for
 ${JSON.stringify(e)}${t?`
while being at
`+JSON.stringify(t):""}`},[2]({from:e,to:t}){return`Redirected from "${e.fullPath}" to "${stringifyRoute(t)}" via a navigation guard.`},[4]({from:e,to:t}){return`Navigation aborted from "${e.fullPath}" to "${t.fullPath}" via a navigation guard.`},[8]({from:e,to:t}){return`Navigation cancelled from "${e.fullPath}" to "${t.fullPath}" with a new navigation.`},[16]({from:e,to:t}){return`Avoided redundant navigation to current location: "${e.fullPath}".`}};function createRouterError(e,t){return process.env.NODE_ENV!=="production"?assign$2(new Error(ErrorTypeMessages[e](t)),{type:e,[NavigationFailureSymbol]:!0},t):assign$2(new Error,{type:e,[NavigationFailureSymbol]:!0},t)}function isNavigationFailure(e,t){return e instanceof Error&&NavigationFailureSymbol in e&&(t==null||!!(e.type&t))}const propertiesToLog=["params","query","hash"];function stringifyRoute(e){if(typeof e=="string")return e;if("path"in e)return e.path;const t={};for(const n of propertiesToLog)n in e&&(t[n]=e[n]);return JSON.stringify(t,null,2)}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(e,t){const n=assign$2({},BASE_PATH_PARSER_OPTIONS,t),o=[];let c=n.start?"^":"";const d=[];for(const E of e){const w=E.length?[]:[90];n.strict&&!E.length&&(c+="/");for(let T=0;T<E.length;T++){const S=E[T];let N=40+(n.sensitive?.25:0);if(S.type===0)T||(c+="/"),c+=S.value.replace(REGEX_CHARS_RE,"\\$&"),N+=40;else if(S.type===1){const{value:L,repeatable:P,optional:O,regexp:V}=S;d.push({name:L,repeatable:P,optional:O});const D=V||BASE_PARAM_PATTERN;if(D!==BASE_PARAM_PATTERN){N+=10;try{new RegExp(`(${D})`)}catch(W){throw new Error(`Invalid custom RegExp for param "${L}" (${D}): `+W.message)}}let U=P?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;T||(U=O&&E.length<2?`(?:/${U})`:"/"+U),O&&(U+="?"),c+=U,N+=20,O&&(N+=-8),P&&(N+=-20),D===".*"&&(N+=-50)}w.push(N)}o.push(w)}if(n.strict&&n.end){const E=o.length-1;o[E][o[E].length-1]+=.7000000000000001}n.strict||(c+="/?"),n.end?c+="$":n.strict&&(c+="(?:/|$)");const g=new RegExp(c,n.sensitive?"":"i");function r(E){const w=E.match(g),T={};if(!w)return null;for(let S=1;S<w.length;S++){const N=w[S]||"",L=d[S-1];T[L.name]=N&&L.repeatable?N.split("/"):N}return T}function v(E){let w="",T=!1;for(const S of e){(!T||!w.endsWith("/"))&&(w+="/"),T=!1;for(const N of S)if(N.type===0)w+=N.value;else if(N.type===1){const{value:L,repeatable:P,optional:O}=N,V=L in E?E[L]:"";if(isArray$7(V)&&!P)throw new Error(`Provided param "${L}" is an array but it is not repeatable (* or + modifiers)`);const D=isArray$7(V)?V.join("/"):V;if(!D)if(O)S.length<2&&(w.endsWith("/")?w=w.slice(0,-1):T=!0);else throw new Error(`Missing required param "${L}"`);w+=D}}return w||"/"}return{re:g,score:o,keys:d,parse:r,stringify:v}}function compareScoreArray(e,t){let n=0;for(;n<e.length&&n<t.length;){const o=t[n]-e[n];if(o)return o;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function comparePathParserScore(e,t){let n=0;const o=e.score,c=t.score;for(;n<o.length&&n<c.length;){const d=compareScoreArray(o[n],c[n]);if(d)return d;n++}if(Math.abs(c.length-o.length)===1){if(isLastScoreNegative(o))return 1;if(isLastScoreNegative(c))return-1}return c.length-o.length}function isLastScoreNegative(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(e){if(!e)return[[]];if(e==="/")return[[ROOT_TOKEN]];if(!e.startsWith("/"))throw new Error(process.env.NODE_ENV!=="production"?`Route paths should start with a "/": "${e}" should be "/${e}".`:`Invalid path "${e}"`);function t(N){throw new Error(`ERR (${n})/"${E}": ${N}`)}let n=0,o=n;const c=[];let d;function g(){d&&c.push(d),d=[]}let r=0,v,E="",w="";function T(){!E||(n===0?d.push({type:0,value:E}):n===1||n===2||n===3?(d.length>1&&(v==="*"||v==="+")&&t(`A repeatable param (${E}) must be alone in its segment. eg: '/:ids+.`),d.push({type:1,value:E,regexp:w,repeatable:v==="*"||v==="+",optional:v==="*"||v==="?"})):t("Invalid state to consume buffer"),E="")}function S(){E+=v}for(;r<e.length;){if(v=e[r++],v==="\\"&&n!==2){o=n,n=4;continue}switch(n){case 0:v==="/"?(E&&T(),g()):v===":"?(T(),n=1):S();break;case 4:S(),n=o;break;case 1:v==="("?n=2:VALID_PARAM_RE.test(v)?S():(T(),n=0,v!=="*"&&v!=="?"&&v!=="+"&&r--);break;case 2:v===")"?w[w.length-1]=="\\"?w=w.slice(0,-1)+v:n=3:w+=v;break;case 3:T(),n=0,v!=="*"&&v!=="?"&&v!=="+"&&r--,w="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${E}"`),T(),g(),c}function createRouteRecordMatcher(e,t,n){const o=tokensToParser(tokenizePath(e.path),n);if(process.env.NODE_ENV!=="production"){const d=new Set;for(const g of o.keys)d.has(g.name)&&warn$2(`Found duplicated params with name "${g.name}" for path "${e.path}". Only the last one will be available on "$route.params".`),d.add(g.name)}const c=assign$2(o,{record:e,parent:t,children:[],alias:[]});return t&&!c.record.aliasOf==!t.record.aliasOf&&t.children.push(c),c}function createRouterMatcher(e,t){const n=[],o=new Map;t=mergeOptions({strict:!1,end:!0,sensitive:!1},t);function c(w){return o.get(w)}function d(w,T,S){const N=!S,L=normalizeRouteRecord(w);process.env.NODE_ENV!=="production"&&checkChildMissingNameWithEmptyPath(L,T),L.aliasOf=S&&S.record;const P=mergeOptions(t,w),O=[L];if("alias"in w){const U=typeof w.alias=="string"?[w.alias]:w.alias;for(const W of U)O.push(assign$2({},L,{components:S?S.record.components:L.components,path:W,aliasOf:S?S.record:L}))}let V,D;for(const U of O){const{path:W}=U;if(T&&W[0]!=="/"){const Z=T.record.path,re=Z[Z.length-1]==="/"?"":"/";U.path=T.record.path+(W&&re+W)}if(process.env.NODE_ENV!=="production"&&U.path==="*")throw new Error(`Catch all routes ("*") must now be defined using a param with a custom regexp.
See more at https://next.router.vuejs.org/guide/migration/#removed-star-or-catch-all-routes.`);if(V=createRouteRecordMatcher(U,T,P),process.env.NODE_ENV!=="production"&&T&&W[0]==="/"&&checkMissingParamsInAbsolutePath(V,T),S?(S.alias.push(V),process.env.NODE_ENV!=="production"&&checkSameParams(S,V)):(D=D||V,D!==V&&D.alias.push(V),N&&w.name&&!isAliasRecord(V)&&g(w.name)),L.children){const Z=L.children;for(let re=0;re<Z.length;re++)d(Z[re],V,S&&S.children[re])}S=S||V,v(V)}return D?()=>{g(D)}:noop}function g(w){if(isRouteName(w)){const T=o.get(w);T&&(o.delete(w),n.splice(n.indexOf(T),1),T.children.forEach(g),T.alias.forEach(g))}else{const T=n.indexOf(w);T>-1&&(n.splice(T,1),w.record.name&&o.delete(w.record.name),w.children.forEach(g),w.alias.forEach(g))}}function r(){return n}function v(w){let T=0;for(;T<n.length&&comparePathParserScore(w,n[T])>=0&&(w.record.path!==n[T].record.path||!isRecordChildOf(w,n[T]));)T++;n.splice(T,0,w),w.record.name&&!isAliasRecord(w)&&o.set(w.record.name,w)}function E(w,T){let S,N={},L,P;if("name"in w&&w.name){if(S=o.get(w.name),!S)throw createRouterError(1,{location:w});if(process.env.NODE_ENV!=="production"){const D=Object.keys(w.params||{}).filter(U=>!S.keys.find(W=>W.name===U));D.length&&warn$2(`Discarded invalid param(s) "${D.join('", "')}" when navigating. See https://github.com/vuejs/router/blob/main/packages/router/CHANGELOG.md#414-2022-08-22 for more details.`)}P=S.record.name,N=assign$2(paramsFromLocation(T.params,S.keys.filter(D=>!D.optional).map(D=>D.name)),w.params&&paramsFromLocation(w.params,S.keys.map(D=>D.name))),L=S.stringify(N)}else if("path"in w)L=w.path,process.env.NODE_ENV!=="production"&&!L.startsWith("/")&&warn$2(`The Matcher cannot resolve relative paths but received "${L}". Unless you directly called \`matcher.resolve("${L}")\`, this is probably a bug in vue-router. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/router.`),S=n.find(D=>D.re.test(L)),S&&(N=S.parse(L),P=S.record.name);else{if(S=T.name?o.get(T.name):n.find(D=>D.re.test(T.path)),!S)throw createRouterError(1,{location:w,currentLocation:T});P=S.record.name,N=assign$2({},T.params,w.params),L=S.stringify(N)}const O=[];let V=S;for(;V;)O.unshift(V.record),V=V.parent;return{name:P,path:L,params:N,matched:O,meta:mergeMetaFields(O)}}return e.forEach(w=>d(w)),{addRoute:d,resolve:E,removeRoute:g,getRoutes:r,getRecordMatcher:c}}function paramsFromLocation(e,t){const n={};for(const o of t)o in e&&(n[o]=e[o]);return n}function normalizeRouteRecord(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:normalizeRecordProps(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function normalizeRecordProps(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const o in e.components)t[o]=typeof n=="boolean"?n:n[o];return t}function isAliasRecord(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function mergeMetaFields(e){return e.reduce((t,n)=>assign$2(t,n.meta),{})}function mergeOptions(e,t){const n={};for(const o in e)n[o]=o in t?t[o]:e[o];return n}function isSameParam(e,t){return e.name===t.name&&e.optional===t.optional&&e.repeatable===t.repeatable}function checkSameParams(e,t){for(const n of e.keys)if(!n.optional&&!t.keys.find(isSameParam.bind(null,n)))return warn$2(`Alias "${t.record.path}" and the original record: "${e.record.path}" must have the exact same param named "${n.name}"`);for(const n of t.keys)if(!n.optional&&!e.keys.find(isSameParam.bind(null,n)))return warn$2(`Alias "${t.record.path}" and the original record: "${e.record.path}" must have the exact same param named "${n.name}"`)}function checkChildMissingNameWithEmptyPath(e,t){t&&t.record.name&&!e.name&&!e.path&&warn$2(`The route named "${String(t.record.name)}" has a child without a name and an empty path. Using that name won't render the empty path child so you probably want to move the name to the child instead. If this is intentional, add a name to the child route to remove the warning.`)}function checkMissingParamsInAbsolutePath(e,t){for(const n of t.keys)if(!e.keys.find(isSameParam.bind(null,n)))return warn$2(`Absolute path "${e.record.path}" must have the exact same param named "${n.name}" as its parent "${t.record.path}".`)}function isRecordChildOf(e,t){return t.children.some(n=>n===e||isRecordChildOf(e,n))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(e){return encodeURI(""+e).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(e){return commonEncode(e).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(e){return commonEncode(e).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(e){return encodeQueryValue(e).replace(EQUAL_RE,"%3D")}function encodePath(e){return commonEncode(e).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(e){return e==null?"":encodePath(e).replace(SLASH_RE,"%2F")}function decode$1(e){try{return decodeURIComponent(""+e)}catch{process.env.NODE_ENV!=="production"&&warn$2(`Error decoding "${e}". Using original value`)}return""+e}function parseQuery(e){const t={};if(e===""||e==="?")return t;const o=(e[0]==="?"?e.slice(1):e).split("&");for(let c=0;c<o.length;++c){const d=o[c].replace(PLUS_RE," "),g=d.indexOf("="),r=decode$1(g<0?d:d.slice(0,g)),v=g<0?null:decode$1(d.slice(g+1));if(r in t){let E=t[r];isArray$7(E)||(E=t[r]=[E]),E.push(v)}else t[r]=v}return t}function stringifyQuery(e){let t="";for(let n in e){const o=e[n];if(n=encodeQueryKey(n),o==null){o!==void 0&&(t+=(t.length?"&":"")+n);continue}(isArray$7(o)?o.map(d=>d&&encodeQueryValue(d)):[o&&encodeQueryValue(o)]).forEach(d=>{d!==void 0&&(t+=(t.length?"&":"")+n,d!=null&&(t+="="+d))})}return t}function normalizeQuery(e){const t={};for(const n in e){const o=e[n];o!==void 0&&(t[n]=isArray$7(o)?o.map(c=>c==null?null:""+c):o==null?o:""+o)}return t}const matchedRouteKey=Symbol(process.env.NODE_ENV!=="production"?"router view location matched":""),viewDepthKey=Symbol(process.env.NODE_ENV!=="production"?"router view depth":""),routerKey=Symbol(process.env.NODE_ENV!=="production"?"router":""),routeLocationKey=Symbol(process.env.NODE_ENV!=="production"?"route location":""),routerViewLocationKey=Symbol(process.env.NODE_ENV!=="production"?"router view location":"");function useCallbacks(){let e=[];function t(o){return e.push(o),()=>{const c=e.indexOf(o);c>-1&&e.splice(c,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function guardToPromiseFn(e,t,n,o,c){const d=o&&(o.enterCallbacks[c]=o.enterCallbacks[c]||[]);return()=>new Promise((g,r)=>{const v=T=>{T===!1?r(createRouterError(4,{from:n,to:t})):T instanceof Error?r(T):isRouteLocation(T)?r(createRouterError(2,{from:t,to:T})):(d&&o.enterCallbacks[c]===d&&typeof T=="function"&&d.push(T),g())},E=e.call(o&&o.instances[c],t,n,process.env.NODE_ENV!=="production"?canOnlyBeCalledOnce(v,t,n):v);let w=Promise.resolve(E);if(e.length<3&&(w=w.then(v)),process.env.NODE_ENV!=="production"&&e.length>2){const T=`The "next" callback was never called inside of ${e.name?'"'+e.name+'"':""}:
${e.toString()}
. If you are returning a value instead of calling "next", make sure to remove the "next" parameter from your function.`;if(typeof E=="object"&&"then"in E)w=w.then(S=>v._called?S:(warn$2(T),Promise.reject(new Error("Invalid navigation guard"))));else if(E!==void 0&&!v._called){warn$2(T),r(new Error("Invalid navigation guard"));return}}w.catch(T=>r(T))})}function canOnlyBeCalledOnce(e,t,n){let o=0;return function(){o++===1&&warn$2(`The "next" callback was called more than once in one navigation guard when going from "${n.fullPath}" to "${t.fullPath}". It should be called exactly one time in each navigation guard. This will fail in production.`),e._called=!0,o===1&&e.apply(null,arguments)}}function extractComponentsGuards(e,t,n,o){const c=[];for(const d of e){process.env.NODE_ENV!=="production"&&!d.components&&!d.children.length&&warn$2(`Record with path "${d.path}" is either missing a "component(s)" or "children" property.`);for(const g in d.components){let r=d.components[g];if(process.env.NODE_ENV!=="production"){if(!r||typeof r!="object"&&typeof r!="function")throw warn$2(`Component "${g}" in record with path "${d.path}" is not a valid component. Received "${String(r)}".`),new Error("Invalid route component");if("then"in r){warn$2(`Component "${g}" in record with path "${d.path}" is a Promise instead of a function that returns a Promise. Did you write "import('./MyPage.vue')" instead of "() => import('./MyPage.vue')" ? This will break in production if not fixed.`);const v=r;r=()=>v}else r.__asyncLoader&&!r.__warnedDefineAsync&&(r.__warnedDefineAsync=!0,warn$2(`Component "${g}" in record with path "${d.path}" is defined using "defineAsyncComponent()". Write "() => import('./MyPage.vue')" instead of "defineAsyncComponent(() => import('./MyPage.vue'))".`))}if(!(t!=="beforeRouteEnter"&&!d.instances[g]))if(isRouteComponent(r)){const E=(r.__vccOpts||r)[t];E&&c.push(guardToPromiseFn(E,n,o,d,g))}else{let v=r();process.env.NODE_ENV!=="production"&&!("catch"in v)&&(warn$2(`Component "${g}" in record with path "${d.path}" is a function that does not return a Promise. If you were passing a functional component, make sure to add a "displayName" to the component. This will break in production if not fixed.`),v=Promise.resolve(v)),c.push(()=>v.then(E=>{if(!E)return Promise.reject(new Error(`Couldn't resolve component "${g}" at "${d.path}"`));const w=isESModule(E)?E.default:E;d.components[g]=w;const S=(w.__vccOpts||w)[t];return S&&guardToPromiseFn(S,n,o,d,g)()}))}}}return c}function isRouteComponent(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function useLink(e){const t=inject(routerKey),n=inject(routeLocationKey),o=computed(()=>t.resolve(unref(e.to))),c=computed(()=>{const{matched:v}=o.value,{length:E}=v,w=v[E-1],T=n.matched;if(!w||!T.length)return-1;const S=T.findIndex(isSameRouteRecord.bind(null,w));if(S>-1)return S;const N=getOriginalPath(v[E-2]);return E>1&&getOriginalPath(w)===N&&T[T.length-1].path!==N?T.findIndex(isSameRouteRecord.bind(null,v[E-2])):S}),d=computed(()=>c.value>-1&&includesParams(n.params,o.value.params)),g=computed(()=>c.value>-1&&c.value===n.matched.length-1&&isSameRouteLocationParams(n.params,o.value.params));function r(v={}){return guardEvent(v)?t[unref(e.replace)?"replace":"push"](unref(e.to)).catch(noop):Promise.resolve()}if((process.env.NODE_ENV!=="production"||!1)&&isBrowser){const v=getCurrentInstance();if(v){const E={route:o.value,isActive:d.value,isExactActive:g.value};v.__vrl_devtools=v.__vrl_devtools||[],v.__vrl_devtools.push(E),watchEffect(()=>{E.route=o.value,E.isActive=d.value,E.isExactActive=g.value},{flush:"post"})}}return{route:o,href:computed(()=>o.value.href),isActive:d,isExactActive:g,navigate:r}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(e,{slots:t}){const n=reactive(useLink(e)),{options:o}=inject(routerKey),c=computed(()=>({[getLinkClass(e.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[getLinkClass(e.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const d=t.default&&t.default(n);return e.custom?d:h("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:c.value},d)}}}),RouterLink=RouterLinkImpl;function guardEvent(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function includesParams(e,t){for(const n in t){const o=t[n],c=e[n];if(typeof o=="string"){if(o!==c)return!1}else if(!isArray$7(c)||c.length!==o.length||o.some((d,g)=>d!==c[g]))return!1}return!0}function getOriginalPath(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const getLinkClass=(e,t,n)=>e!=null?e:t!=null?t:n,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){process.env.NODE_ENV!=="production"&&warnDeprecatedUsage();const o=inject(routerViewLocationKey),c=computed(()=>e.route||o.value),d=inject(viewDepthKey,0),g=computed(()=>{let E=unref(d);const{matched:w}=c.value;let T;for(;(T=w[E])&&!T.components;)E++;return E}),r=computed(()=>c.value.matched[g.value]);provide(viewDepthKey,computed(()=>g.value+1)),provide(matchedRouteKey,r),provide(routerViewLocationKey,c);const v=ref();return watch(()=>[v.value,r.value,e.name],([E,w,T],[S,N,L])=>{w&&(w.instances[T]=E,N&&N!==w&&E&&E===S&&(w.leaveGuards.size||(w.leaveGuards=N.leaveGuards),w.updateGuards.size||(w.updateGuards=N.updateGuards))),E&&w&&(!N||!isSameRouteRecord(w,N)||!S)&&(w.enterCallbacks[T]||[]).forEach(P=>P(E))},{flush:"post"}),()=>{const E=c.value,w=e.name,T=r.value,S=T&&T.components[w];if(!S)return normalizeSlot(n.default,{Component:S,route:E});const N=T.props[w],L=N?N===!0?E.params:typeof N=="function"?N(E):N:null,O=h(S,assign$2({},L,t,{onVnodeUnmounted:V=>{V.component.isUnmounted&&(T.instances[w]=null)},ref:v}));if((process.env.NODE_ENV!=="production"||!1)&&isBrowser&&O.ref){const V={depth:g.value,name:T.name,path:T.path,meta:T.meta};(isArray$7(O.ref)?O.ref.map(U=>U.i):[O.ref.i]).forEach(U=>{U.__vrv_devtools=V})}return normalizeSlot(n.default,{Component:O,route:E})||O}}});function normalizeSlot(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const RouterView=RouterViewImpl;function warnDeprecatedUsage(){const e=getCurrentInstance(),t=e.parent&&e.parent.type.name;if(t&&(t==="KeepAlive"||t.includes("Transition"))){const n=t==="KeepAlive"?"keep-alive":"transition";warn$2(`<router-view> can no longer be used directly inside <transition> or <keep-alive>.
Use slot props instead:

<router-view v-slot="{ Component }">
  <${n}>
    <component :is="Component" />
  </${n}>
</router-view>`)}}function formatRouteLocation(e,t){const n=assign$2({},e,{matched:e.matched.map(o=>omit(o,["instances","children","aliasOf"]))});return{_custom:{type:null,readOnly:!0,display:e.fullPath,tooltip:t,value:n}}}function formatDisplay(e){return{_custom:{display:e}}}let routerId=0;function addDevtools(e,t,n){if(t.__hasDevtools)return;t.__hasDevtools=!0;const o=routerId++;setupDevtoolsPlugin({id:"org.vuejs.router"+(o?"."+o:""),label:"Vue Router",packageName:"vue-router",homepage:"https://router.vuejs.org",logo:"https://router.vuejs.org/logo.png",componentStateTypes:["Routing"],app:e},c=>{typeof c.now!="function"&&console.warn("[Vue Router]: You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),c.on.inspectComponent((w,T)=>{w.instanceData&&w.instanceData.state.push({type:"Routing",key:"$route",editable:!1,value:formatRouteLocation(t.currentRoute.value,"Current Route")})}),c.on.visitComponentTree(({treeNode:w,componentInstance:T})=>{if(T.__vrv_devtools){const S=T.__vrv_devtools;w.tags.push({label:(S.name?`${S.name.toString()}: `:"")+S.path,textColor:0,tooltip:"This component is rendered by &lt;router-view&gt;",backgroundColor:PINK_500})}isArray$7(T.__vrl_devtools)&&(T.__devtoolsApi=c,T.__vrl_devtools.forEach(S=>{let N=ORANGE_400,L="";S.isExactActive?(N=LIME_500,L="This is exactly active"):S.isActive&&(N=BLUE_600,L="This link is active"),w.tags.push({label:S.route.path,textColor:0,tooltip:L,backgroundColor:N})}))}),watch(t.currentRoute,()=>{v(),c.notifyComponentUpdate(),c.sendInspectorTree(r),c.sendInspectorState(r)});const d="router:navigations:"+o;c.addTimelineLayer({id:d,label:`Router${o?" "+o:""} Navigations`,color:4237508}),t.onError((w,T)=>{c.addTimelineEvent({layerId:d,event:{title:"Error during Navigation",subtitle:T.fullPath,logType:"error",time:c.now(),data:{error:w},groupId:T.meta.__navigationId}})});let g=0;t.beforeEach((w,T)=>{const S={guard:formatDisplay("beforeEach"),from:formatRouteLocation(T,"Current Location during this navigation"),to:formatRouteLocation(w,"Target location")};Object.defineProperty(w.meta,"__navigationId",{value:g++}),c.addTimelineEvent({layerId:d,event:{time:c.now(),title:"Start of navigation",subtitle:w.fullPath,data:S,groupId:w.meta.__navigationId}})}),t.afterEach((w,T,S)=>{const N={guard:formatDisplay("afterEach")};S?(N.failure={_custom:{type:Error,readOnly:!0,display:S?S.message:"",tooltip:"Navigation Failure",value:S}},N.status=formatDisplay("\u274C")):N.status=formatDisplay("\u2705"),N.from=formatRouteLocation(T,"Current Location during this navigation"),N.to=formatRouteLocation(w,"Target location"),c.addTimelineEvent({layerId:d,event:{title:"End of navigation",subtitle:w.fullPath,time:c.now(),data:N,logType:S?"warning":"default",groupId:w.meta.__navigationId}})});const r="router-inspector:"+o;c.addInspector({id:r,label:"Routes"+(o?" "+o:""),icon:"book",treeFilterPlaceholder:"Search routes"});function v(){if(!E)return;const w=E;let T=n.getRoutes().filter(S=>!S.parent);T.forEach(resetMatchStateOnRouteRecord),w.filter&&(T=T.filter(S=>isRouteMatching(S,w.filter.toLowerCase()))),T.forEach(S=>markRouteRecordActive(S,t.currentRoute.value)),w.rootNodes=T.map(formatRouteRecordForInspector)}let E;c.on.getInspectorTree(w=>{E=w,w.app===e&&w.inspectorId===r&&v()}),c.on.getInspectorState(w=>{if(w.app===e&&w.inspectorId===r){const S=n.getRoutes().find(N=>N.record.__vd_id===w.nodeId);S&&(w.state={options:formatRouteRecordMatcherForStateInspector(S)})}}),c.sendInspectorTree(r),c.sendInspectorState(r)})}function modifierForKey(e){return e.optional?e.repeatable?"*":"?":e.repeatable?"+":""}function formatRouteRecordMatcherForStateInspector(e){const{record:t}=e,n=[{editable:!1,key:"path",value:t.path}];return t.name!=null&&n.push({editable:!1,key:"name",value:t.name}),n.push({editable:!1,key:"regexp",value:e.re}),e.keys.length&&n.push({editable:!1,key:"keys",value:{_custom:{type:null,readOnly:!0,display:e.keys.map(o=>`${o.name}${modifierForKey(o)}`).join(" "),tooltip:"Param keys",value:e.keys}}}),t.redirect!=null&&n.push({editable:!1,key:"redirect",value:t.redirect}),e.alias.length&&n.push({editable:!1,key:"aliases",value:e.alias.map(o=>o.record.path)}),Object.keys(e.record.meta).length&&n.push({editable:!1,key:"meta",value:e.record.meta}),n.push({key:"score",editable:!1,value:{_custom:{type:null,readOnly:!0,display:e.score.map(o=>o.join(", ")).join(" | "),tooltip:"Score used to sort routes",value:e.score}}}),n}const PINK_500=15485081,BLUE_600=2450411,LIME_500=8702998,CYAN_400=2282478,ORANGE_400=16486972,DARK=6710886;function formatRouteRecordForInspector(e){const t=[],{record:n}=e;n.name!=null&&t.push({label:String(n.name),textColor:0,backgroundColor:CYAN_400}),n.aliasOf&&t.push({label:"alias",textColor:0,backgroundColor:ORANGE_400}),e.__vd_match&&t.push({label:"matches",textColor:0,backgroundColor:PINK_500}),e.__vd_exactActive&&t.push({label:"exact",textColor:0,backgroundColor:LIME_500}),e.__vd_active&&t.push({label:"active",textColor:0,backgroundColor:BLUE_600}),n.redirect&&t.push({label:typeof n.redirect=="string"?`redirect: ${n.redirect}`:"redirects",textColor:16777215,backgroundColor:DARK});let o=n.__vd_id;return o==null&&(o=String(routeRecordId++),n.__vd_id=o),{id:o,label:n.path,tags:t,children:e.children.map(formatRouteRecordForInspector)}}let routeRecordId=0;const EXTRACT_REGEXP_RE=/^\/(.*)\/([a-z]*)$/;function markRouteRecordActive(e,t){const n=t.matched.length&&isSameRouteRecord(t.matched[t.matched.length-1],e.record);e.__vd_exactActive=e.__vd_active=n,n||(e.__vd_active=t.matched.some(o=>isSameRouteRecord(o,e.record))),e.children.forEach(o=>markRouteRecordActive(o,t))}function resetMatchStateOnRouteRecord(e){e.__vd_match=!1,e.children.forEach(resetMatchStateOnRouteRecord)}function isRouteMatching(e,t){const n=String(e.re).match(EXTRACT_REGEXP_RE);if(e.__vd_match=!1,!n||n.length<3)return!1;if(new RegExp(n[1].replace(/\$$/,""),n[2]).test(t))return e.children.forEach(g=>isRouteMatching(g,t)),e.record.path!=="/"||t==="/"?(e.__vd_match=e.re.test(t),!0):!1;const c=e.record.path.toLowerCase(),d=decode$1(c);return!t.startsWith("/")&&(d.includes(t)||c.includes(t))||d.startsWith(t)||c.startsWith(t)||e.record.name&&String(e.record.name).includes(t)?!0:e.children.some(g=>isRouteMatching(g,t))}function omit(e,t){const n={};for(const o in e)t.includes(o)||(n[o]=e[o]);return n}function createRouter(e){const t=createRouterMatcher(e.routes,e),n=e.parseQuery||parseQuery,o=e.stringifyQuery||stringifyQuery,c=e.history;if(process.env.NODE_ENV!=="production"&&!c)throw new Error('Provide the "history" option when calling "createRouter()": https://next.router.vuejs.org/api/#history.');const d=useCallbacks(),g=useCallbacks(),r=useCallbacks(),v=shallowRef(START_LOCATION_NORMALIZED);let E=START_LOCATION_NORMALIZED;isBrowser&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const w=applyToParams.bind(null,tt=>""+tt),T=applyToParams.bind(null,encodeParam),S=applyToParams.bind(null,decode$1);function N(tt,Mt){let Tt,Bt;return isRouteName(tt)?(Tt=t.getRecordMatcher(tt),Bt=Mt):Bt=tt,t.addRoute(Bt,Tt)}function L(tt){const Mt=t.getRecordMatcher(tt);Mt?t.removeRoute(Mt):process.env.NODE_ENV!=="production"&&warn$2(`Cannot remove non-existent route "${String(tt)}"`)}function P(){return t.getRoutes().map(tt=>tt.record)}function O(tt){return!!t.getRecordMatcher(tt)}function V(tt,Mt){if(Mt=assign$2({},Mt||v.value),typeof tt=="string"){const Yt=parseURL(n,tt,Mt.path),Te=t.resolve({path:Yt.path},Mt),Re=c.createHref(Yt.fullPath);return process.env.NODE_ENV!=="production"&&(Re.startsWith("//")?warn$2(`Location "${tt}" resolved to "${Re}". A resolved location cannot start with multiple slashes.`):Te.matched.length||warn$2(`No match found for location with path "${tt}"`)),assign$2(Yt,Te,{params:S(Te.params),hash:decode$1(Yt.hash),redirectedFrom:void 0,href:Re})}let Tt;if("path"in tt)process.env.NODE_ENV!=="production"&&"params"in tt&&!("name"in tt)&&Object.keys(tt.params).length&&warn$2(`Path "${tt.path}" was passed with params but they will be ignored. Use a named route alongside params instead.`),Tt=assign$2({},tt,{path:parseURL(n,tt.path,Mt.path).path});else{const Yt=assign$2({},tt.params);for(const Te in Yt)Yt[Te]==null&&delete Yt[Te];Tt=assign$2({},tt,{params:T(tt.params)}),Mt.params=T(Mt.params)}const Bt=t.resolve(Tt,Mt),un=tt.hash||"";process.env.NODE_ENV!=="production"&&un&&!un.startsWith("#")&&warn$2(`A \`hash\` should always start with the character "#". Replace "${un}" with "#${un}".`),Bt.params=w(S(Bt.params));const ln=stringifyURL(o,assign$2({},tt,{hash:encodeHash(un),path:Bt.path})),cn=c.createHref(ln);return process.env.NODE_ENV!=="production"&&(cn.startsWith("//")?warn$2(`Location "${tt}" resolved to "${cn}". A resolved location cannot start with multiple slashes.`):Bt.matched.length||warn$2(`No match found for location with path "${"path"in tt?tt.path:tt}"`)),assign$2({fullPath:ln,hash:un,query:o===stringifyQuery?normalizeQuery(tt.query):tt.query||{}},Bt,{redirectedFrom:void 0,href:cn})}function D(tt){return typeof tt=="string"?parseURL(n,tt,v.value.path):assign$2({},tt)}function U(tt,Mt){if(E!==tt)return createRouterError(8,{from:Mt,to:tt})}function W(tt){return ae(tt)}function Z(tt){return W(assign$2(D(tt),{replace:!0}))}function re(tt){const Mt=tt.matched[tt.matched.length-1];if(Mt&&Mt.redirect){const{redirect:Tt}=Mt;let Bt=typeof Tt=="function"?Tt(tt):Tt;if(typeof Bt=="string"&&(Bt=Bt.includes("?")||Bt.includes("#")?Bt=D(Bt):{path:Bt},Bt.params={}),process.env.NODE_ENV!=="production"&&!("path"in Bt)&&!("name"in Bt))throw warn$2(`Invalid redirect found:
${JSON.stringify(Bt,null,2)}
 when navigating to "${tt.fullPath}". A redirect must contain a name or path. This will break in production.`),new Error("Invalid redirect");return assign$2({query:tt.query,hash:tt.hash,params:"path"in Bt?{}:tt.params},Bt)}}function ae(tt,Mt){const Tt=E=V(tt),Bt=v.value,un=tt.state,ln=tt.force,cn=tt.replace===!0,Yt=re(Tt);if(Yt)return ae(assign$2(D(Yt),{state:typeof Yt=="object"?assign$2({},un,Yt.state):un,force:ln,replace:cn}),Mt||Tt);const Te=Tt;Te.redirectedFrom=Mt;let Re;return!ln&&isSameRouteLocation(o,Bt,Tt)&&(Re=createRouterError(16,{to:Te,from:Bt}),xt(Bt,Bt,!0,!1)),(Re?Promise.resolve(Re):ne(Te,Bt)).catch(Qe=>isNavigationFailure(Qe)?isNavigationFailure(Qe,2)?Qe:Ze(Qe):Me(Qe,Te,Bt)).then(Qe=>{if(Qe){if(isNavigationFailure(Qe,2))return process.env.NODE_ENV!=="production"&&isSameRouteLocation(o,V(Qe.to),Te)&&Mt&&(Mt._count=Mt._count?Mt._count+1:1)>10?(warn$2(`Detected an infinite redirection in a navigation guard when going from "${Bt.fullPath}" to "${Te.fullPath}". Aborting to avoid a Stack Overflow. This will break in production if not fixed.`),Promise.reject(new Error("Infinite redirect in navigation guard"))):ae(assign$2({replace:cn},D(Qe.to),{state:typeof Qe.to=="object"?assign$2({},un,Qe.to.state):un,force:ln}),Mt||Te)}else Qe=de(Te,Bt,!0,cn,un);return le(Te,Bt,Qe),Qe})}function ce(tt,Mt){const Tt=U(tt,Mt);return Tt?Promise.reject(Tt):Promise.resolve()}function ne(tt,Mt){let Tt;const[Bt,un,ln]=extractChangingRecords(tt,Mt);Tt=extractComponentsGuards(Bt.reverse(),"beforeRouteLeave",tt,Mt);for(const Yt of Bt)Yt.leaveGuards.forEach(Te=>{Tt.push(guardToPromiseFn(Te,tt,Mt))});const cn=ce.bind(null,tt,Mt);return Tt.push(cn),runGuardQueue(Tt).then(()=>{Tt=[];for(const Yt of d.list())Tt.push(guardToPromiseFn(Yt,tt,Mt));return Tt.push(cn),runGuardQueue(Tt)}).then(()=>{Tt=extractComponentsGuards(un,"beforeRouteUpdate",tt,Mt);for(const Yt of un)Yt.updateGuards.forEach(Te=>{Tt.push(guardToPromiseFn(Te,tt,Mt))});return Tt.push(cn),runGuardQueue(Tt)}).then(()=>{Tt=[];for(const Yt of tt.matched)if(Yt.beforeEnter&&!Mt.matched.includes(Yt))if(isArray$7(Yt.beforeEnter))for(const Te of Yt.beforeEnter)Tt.push(guardToPromiseFn(Te,tt,Mt));else Tt.push(guardToPromiseFn(Yt.beforeEnter,tt,Mt));return Tt.push(cn),runGuardQueue(Tt)}).then(()=>(tt.matched.forEach(Yt=>Yt.enterCallbacks={}),Tt=extractComponentsGuards(ln,"beforeRouteEnter",tt,Mt),Tt.push(cn),runGuardQueue(Tt))).then(()=>{Tt=[];for(const Yt of g.list())Tt.push(guardToPromiseFn(Yt,tt,Mt));return Tt.push(cn),runGuardQueue(Tt)}).catch(Yt=>isNavigationFailure(Yt,8)?Yt:Promise.reject(Yt))}function le(tt,Mt,Tt){for(const Bt of r.list())Bt(tt,Mt,Tt)}function de(tt,Mt,Tt,Bt,un){const ln=U(tt,Mt);if(ln)return ln;const cn=Mt===START_LOCATION_NORMALIZED,Yt=isBrowser?history.state:{};Tt&&(Bt||cn?c.replace(tt.fullPath,assign$2({scroll:cn&&Yt&&Yt.scroll},un)):c.push(tt.fullPath,un)),v.value=tt,xt(tt,Mt,Tt,cn),Ze()}let ie;function ve(){ie||(ie=c.listen((tt,Mt,Tt)=>{if(!En.listening)return;const Bt=V(tt),un=re(Bt);if(un){ae(assign$2(un,{replace:!0}),Bt).catch(noop);return}E=Bt;const ln=v.value;isBrowser&&saveScrollPosition(getScrollKey(ln.fullPath,Tt.delta),computeScrollPosition()),ne(Bt,ln).catch(cn=>isNavigationFailure(cn,12)?cn:isNavigationFailure(cn,2)?(ae(cn.to,Bt).then(Yt=>{isNavigationFailure(Yt,20)&&!Tt.delta&&Tt.type===NavigationType.pop&&c.go(-1,!1)}).catch(noop),Promise.reject()):(Tt.delta&&c.go(-Tt.delta,!1),Me(cn,Bt,ln))).then(cn=>{cn=cn||de(Bt,ln,!1),cn&&(Tt.delta&&!isNavigationFailure(cn,8)?c.go(-Tt.delta,!1):Tt.type===NavigationType.pop&&isNavigationFailure(cn,20)&&c.go(-1,!1)),le(Bt,ln,cn)}).catch(noop)}))}let Pe=useCallbacks(),ct=useCallbacks(),ge;function Me(tt,Mt,Tt){Ze(tt);const Bt=ct.list();return Bt.length?Bt.forEach(un=>un(tt,Mt,Tt)):(process.env.NODE_ENV!=="production"&&warn$2("uncaught error during route navigation:"),console.error(tt)),Promise.reject(tt)}function Ue(){return ge&&v.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((tt,Mt)=>{Pe.add([tt,Mt])})}function Ze(tt){return ge||(ge=!tt,ve(),Pe.list().forEach(([Mt,Tt])=>tt?Tt(tt):Mt()),Pe.reset()),tt}function xt(tt,Mt,Tt,Bt){const{scrollBehavior:un}=e;if(!isBrowser||!un)return Promise.resolve();const ln=!Tt&&getSavedScrollPosition(getScrollKey(tt.fullPath,0))||(Bt||!Tt)&&history.state&&history.state.scroll||null;return nextTick$1().then(()=>un(tt,Mt,ln)).then(cn=>cn&&scrollToPosition(cn)).catch(cn=>Me(cn,tt,Mt))}const Ut=tt=>c.go(tt);let Zt;const en=new Set,En={currentRoute:v,listening:!0,addRoute:N,removeRoute:L,hasRoute:O,getRoutes:P,resolve:V,options:e,push:W,replace:Z,go:Ut,back:()=>Ut(-1),forward:()=>Ut(1),beforeEach:d.add,beforeResolve:g.add,afterEach:r.add,onError:ct.add,isReady:Ue,install(tt){const Mt=this;tt.component("RouterLink",RouterLink),tt.component("RouterView",RouterView),tt.config.globalProperties.$router=Mt,Object.defineProperty(tt.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(v)}),isBrowser&&!Zt&&v.value===START_LOCATION_NORMALIZED&&(Zt=!0,W(c.location).catch(un=>{process.env.NODE_ENV!=="production"&&warn$2("Unexpected error when starting the router:",un)}));const Tt={};for(const un in START_LOCATION_NORMALIZED)Tt[un]=computed(()=>v.value[un]);tt.provide(routerKey,Mt),tt.provide(routeLocationKey,reactive(Tt)),tt.provide(routerViewLocationKey,v);const Bt=tt.unmount;en.add(tt),tt.unmount=function(){en.delete(tt),en.size<1&&(E=START_LOCATION_NORMALIZED,ie&&ie(),ie=null,v.value=START_LOCATION_NORMALIZED,Zt=!1,ge=!1),Bt()},(process.env.NODE_ENV!=="production"||!1)&&isBrowser&&addDevtools(tt,Mt,t)}};return En}function runGuardQueue(e){return e.reduce((t,n)=>t.then(()=>n()),Promise.resolve())}function extractChangingRecords(e,t){const n=[],o=[],c=[],d=Math.max(t.matched.length,e.matched.length);for(let g=0;g<d;g++){const r=t.matched[g];r&&(e.matched.find(E=>isSameRouteRecord(E,r))?o.push(r):n.push(r));const v=e.matched[g];v&&(t.matched.find(E=>isSameRouteRecord(E,v))||c.push(v))}return[n,o,c]}function useRouter(){return inject(routerKey)}function useRoute(){return inject(routeLocationKey)}const shouldIgnoreProp=makeMap(",key,ref,innerHTML,textContent,ref_key,ref_for");function ssrRenderAttrs(e,t){let n="";for(const o in e){if(shouldIgnoreProp(o)||isOn(o)||t==="textarea"&&o==="value")continue;const c=e[o];o==="class"?n+=` class="${ssrRenderClass(c)}"`:o==="style"?n+=` style="${ssrRenderStyle(c)}"`:n+=ssrRenderDynamicAttr(o,c,t)}return n}function ssrRenderDynamicAttr(e,t,n){if(!isRenderableValue(t))return"";const o=n&&(n.indexOf("-")>0||isSVGTag(n))?e:propsToAttrMap[e]||e.toLowerCase();return isBooleanAttr(o)?includeBooleanAttr(t)?` ${o}`:"":isSSRSafeAttrName(o)?t===""?` ${o}`:` ${o}="${escapeHtml(t)}"`:(console.warn(`[@vue/server-renderer] Skipped rendering unsafe attribute name: ${o}`),"")}function ssrRenderAttr(e,t){return isRenderableValue(t)?` ${e}="${escapeHtml(t)}"`:""}function isRenderableValue(e){if(e==null)return!1;const t=typeof e;return t==="string"||t==="number"||t==="boolean"}function ssrRenderClass(e){return escapeHtml(normalizeClass(e))}function ssrRenderStyle(e){if(!e)return"";if(isString$2(e))return escapeHtml(e);const t=normalizeStyle(e);return escapeHtml(stringifyStyle(t))}function ssrCompile(e,t){throw new Error("On-the-fly template compilation is not supported in the ESM build of @vue/server-renderer. All templates must be pre-compiled into render functions.")}function ssrRenderTeleport(e,t,n,o,c){e("<!--teleport start-->");const d=c.appContext.provides[ssrContextKey],g=d.__teleportBuffers||(d.__teleportBuffers={}),r=g[n]||(g[n]=[]),v=r.length;let E;if(o)t(e),E="<!--teleport anchor-->";else{const{getBuffer:w,push:T}=createBuffer();t(T),T("<!--teleport anchor-->"),E=w()}r.splice(v,0,E),e("<!--teleport end-->")}const{createComponentInstance,setCurrentRenderingInstance,setupComponent,renderComponentRoot,normalizeVNode}=ssrUtils;function createBuffer(){let e=!1;const t=[];return{getBuffer(){return t},push(n){const o=isString$2(n);e&&o?t[t.length-1]+=n:t.push(n),e=o,(isPromise(n)||isArray$8(n)&&n.hasAsync)&&(t.hasAsync=!0)}}}function renderComponentVNode(e,t=null,n){const o=createComponentInstance(e,t,null),c=setupComponent(o,!0),d=isPromise(c),g=o.sp;if(d||g){let r=d?c:Promise.resolve();return g&&(r=r.then(()=>Promise.all(g.map(v=>v.call(o.proxy)))).catch(()=>{})),r.then(()=>renderComponentSubTree(o,n))}else return renderComponentSubTree(o,n)}function renderComponentSubTree(e,t){const n=e.type,{getBuffer:o,push:c}=createBuffer();if(isFunction$1(n)){let d=renderComponentRoot(e);if(!n.props)for(const g in e.attrs)g.startsWith("data-v-")&&((d.props||(d.props={}))[g]="");renderVNode(c,e.subTree=d,e,t)}else{(!e.render||e.render===NOOP)&&!e.ssrRender&&!n.ssrRender&&isString$2(n.template)&&(n.ssrRender=ssrCompile(n.template));for(const g of e.scope.effects)g.computed&&(g.computed._cacheable=!0);const d=e.ssrRender||n.ssrRender;if(d){let g=e.inheritAttrs!==!1?e.attrs:void 0,r=!1,v=e;for(;;){const w=v.vnode.scopeId;w&&(r||(g={...g},r=!0),g[w]="");const T=v.parent;if(T&&T.subTree&&T.subTree===v.vnode)v=T;else break}t&&(r||(g={...g}),g[t.trim()]="");const E=setCurrentRenderingInstance(e);try{d(e.proxy,c,e,g,e.props,e.setupState,e.data,e.ctx)}finally{setCurrentRenderingInstance(E)}}else if(e.render&&e.render!==NOOP)renderVNode(c,e.subTree=renderComponentRoot(e),e,t);else{const g=n.name||n.__file||"<Anonymous>";warn$3(`Component ${g} is missing template or render function.`),c("<!---->")}}return o()}function renderVNode(e,t,n,o){const{type:c,shapeFlag:d,children:g}=t;switch(c){case Text:e(escapeHtml(g));break;case Comment$1:e(g?`<!--${escapeHtmlComment(g)}-->`:"<!---->");break;case Static:e(g);break;case Fragment:t.slotScopeIds&&(o=(o?o+" ":"")+t.slotScopeIds.join(" ")),e("<!--[-->"),renderVNodeChildren(e,g,n,o),e("<!--]-->");break;default:d&1?renderElementVNode(e,t,n,o):d&6?e(renderComponentVNode(t,n,o)):d&64?renderTeleportVNode(e,t,n,o):d&128?renderVNode(e,t.ssContent,n,o):warn$3("[@vue/server-renderer] Invalid VNode type:",c,`(${typeof c})`)}}function renderVNodeChildren(e,t,n,o){for(let c=0;c<t.length;c++)renderVNode(e,normalizeVNode(t[c]),n,o)}function renderElementVNode(e,t,n,o){const c=t.type;let{props:d,children:g,shapeFlag:r,scopeId:v,dirs:E}=t,w=`<${c}`;E&&(d=applySSRDirectives(t,d,E)),d&&(w+=ssrRenderAttrs(d,c)),v&&(w+=` ${v}`);let T=n,S=t;for(;T&&S===T.subTree;)S=T.vnode,S.scopeId&&(w+=` ${S.scopeId}`),T=T.parent;if(o&&(w+=` ${o}`),e(w+">"),!isVoidTag(c)){let N=!1;d&&(d.innerHTML?(N=!0,e(d.innerHTML)):d.textContent?(N=!0,e(escapeHtml(d.textContent))):c==="textarea"&&d.value&&(N=!0,e(escapeHtml(d.value)))),N||(r&8?e(escapeHtml(g)):r&16&&renderVNodeChildren(e,g,n,o)),e(`</${c}>`)}}function applySSRDirectives(e,t,n){const o=[];for(let c=0;c<n.length;c++){const d=n[c],{dir:{getSSRProps:g}}=d;if(g){const r=g(d,e);r&&o.push(r)}}return mergeProps(t||{},...o)}function renderTeleportVNode(e,t,n,o){const c=t.props&&t.props.to,d=t.props&&t.props.disabled;if(!c)return d||warn$3("[@vue/server-renderer] Teleport is missing target prop."),[];if(!isString$2(c))return warn$3("[@vue/server-renderer] Teleport target must be a query selector string."),[];ssrRenderTeleport(e,g=>{renderVNodeChildren(g,t.children,n,o)},c,d||d==="",n)}const{isVNode}=ssrUtils;async function unrollBuffer(e){if(e.hasAsync){let t="";for(let n=0;n<e.length;n++){let o=e[n];isPromise(o)&&(o=await o),isString$2(o)?t+=o:t+=await unrollBuffer(o)}return t}else return unrollBufferSync(e)}function unrollBufferSync(e){let t="";for(let n=0;n<e.length;n++){let o=e[n];isString$2(o)?t+=o:t+=unrollBufferSync(o)}return t}async function renderToString(e,t={}){if(isVNode(e))return renderToString(createApp$1({render:()=>e}),t);const n=createVNode(e._component,e._props);n.appContext=e._context,e.provide(ssrContextKey,t);const o=await renderComponentVNode(n),c=await unrollBuffer(o);return await resolveTeleports(t),c}async function resolveTeleports(e){if(e.__teleportBuffers){e.teleports=e.teleports||{};for(const t in e.__teleportBuffers)e.teleports[t]=await unrollBuffer(await Promise.all([e.__teleportBuffers[t]]))}}function ssrRenderComponent(e,t=null,n=null,o=null,c){return renderComponentVNode(createVNode(e,t,n),o,c)}function ssrRenderSlot(e,t,n,o,c,d,g){c("<!--[-->"),ssrRenderSlotInner(e,t,n,o,c,d,g),c("<!--]-->")}function ssrRenderSlotInner(e,t,n,o,c,d,g,r){const v=e[t];if(v){const E=[],T=v(n,S=>{E.push(S)},d,g?" "+g:"");if(isArray$8(T))renderVNodeChildren(c,T,d,g);else{let S=!0;if(r)S=!1;else for(let N=0;N<E.length;N++)if(!isComment(E[N])){S=!1;break}if(S)o&&o();else for(let N=0;N<E.length;N++)c(E[N])}}else o&&o()}const commentTestRE=/^<!--.*-->$/s,commentRE=/<!--[^]*?-->/gm;function isComment(e){return typeof e!="string"||!commentTestRE.test(e)?!1:e.length<=8?!0:!e.replace(commentRE,"").trim()}function ssrInterpolate(e){return escapeHtml(toDisplayString(e))}function toRaw(e){const t=e&&e.__v_raw;return t?toRaw(t):e}function isRef(e){return!!(e&&e.__v_isRef===!0)}const stack=[];function pushWarningContext(e){stack.push(e)}function popWarningContext(){stack.pop()}function warn$1(e,...t){const n=stack.length?stack[stack.length-1].component:null,o=n&&n.appContext.config.warnHandler,c=getComponentTrace();if(o)callWithErrorHandling(o,n,11,[e+t.join(""),n&&n.proxy,c.map(({vnode:d})=>`at <${formatComponentName(n,d.type)}>`).join(`
`),c]);else{const d=[`[Vue warn]: ${e}`,...t];c.length&&d.push(`
`,...formatTrace(c)),console.warn(...d)}}function getComponentTrace(){let e=stack[stack.length-1];if(!e)return[];const t=[];for(;e;){const n=t[0];n&&n.vnode===e?n.recurseCount++:t.push({vnode:e,recurseCount:0});const o=e.component&&e.component.parent;e=o&&o.vnode}return t}function formatTrace(e){const t=[];return e.forEach((n,o)=>{t.push(...o===0?[]:[`
`],...formatTraceEntry(n))}),t}function formatTraceEntry({vnode:e,recurseCount:t}){const n=t>0?`... (${t} recursive calls)`:"",o=e.component?e.component.parent==null:!1,c=` at <${formatComponentName(e.component,e.type,o)}`,d=">"+n;return e.props?[c,...formatProps(e.props),d]:[c+d]}function formatProps(e){const t=[],n=Object.keys(e);return n.slice(0,3).forEach(o=>{t.push(...formatProp(o,e[o]))}),n.length>3&&t.push(" ..."),t}function formatProp(e,t,n){return isString$2(t)?(t=JSON.stringify(t),n?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?n?t:[`${e}=${t}`]:isRef(t)?(t=formatProp(e,toRaw(t.value),!0),n?t:[`${e}=Ref<`,t,">"]):isFunction$1(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=toRaw(t),n?t:[`${e}=`,t])}const ErrorTypeStrings={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",[0]:"setup function",[1]:"render function",[2]:"watcher getter",[3]:"watcher callback",[4]:"watcher cleanup function",[5]:"native event handler",[6]:"component event handler",[7]:"vnode hook",[8]:"directive hook",[9]:"transition hook",[10]:"app errorHandler",[11]:"app warnHandler",[12]:"ref function",[13]:"async component loader",[14]:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/core"};function callWithErrorHandling(e,t,n,o){let c;try{c=o?e(...o):e()}catch(d){handleError(d,t,n)}return c}function handleError(e,t,n,o=!0){const c=t?t.vnode:null;if(t){let d=t.parent;const g=t.proxy,r=process.env.NODE_ENV!=="production"?ErrorTypeStrings[n]:n;for(;d;){const E=d.ec;if(E){for(let w=0;w<E.length;w++)if(E[w](e,g,r)===!1)return}d=d.parent}const v=t.appContext.config.errorHandler;if(v){callWithErrorHandling(v,null,10,[e,g,r]);return}}logError(e,n,c,o)}function logError(e,t,n,o=!0){if(process.env.NODE_ENV!=="production"){const c=ErrorTypeStrings[t];if(n&&pushWarningContext(n),warn$1(`Unhandled error${c?` during execution of ${c}`:""}`),n&&popWarningContext(),o)throw e;console.error(e)}else console.error(e)}const classifyRE=/(?:^|[-_])(\w)/g,classify=e=>e.replace(classifyRE,t=>t.toUpperCase()).replace(/[-_]/g,"");function getComponentName(e,t=!0){return isFunction$1(e)?e.displayName||e.name:e.name||t&&e.__name}function formatComponentName(e,t,n=!1){let o=getComponentName(t);if(!o&&t.__file){const c=t.__file.match(/([^/\\]+)\.\w+$/);c&&(o=c[1])}if(!o&&e&&e.parent){const c=d=>{for(const g in d)if(d[g]===t)return g};o=c(e.components||e.parent.type.components)||c(e.appContext.components)}return o?classify(o):n?"App":"Anonymous"}function ssrRenderList(e,t){if(isArray$8(e)||isString$2(e))for(let n=0,o=e.length;n<o;n++)t(e[n],n);else if(typeof e=="number"){if(process.env.NODE_ENV!=="production"&&!Number.isInteger(e)){warn$1(`The v-for range expect an integer value but got ${e}.`);return}for(let n=0;n<e;n++)t(n+1,n)}else if(isObject$6(e))if(e[Symbol.iterator]){const n=Array.from(e);for(let o=0,c=n.length;o<c;o++)t(n[o],o)}else{const n=Object.keys(e);for(let o=0,c=n.length;o<c;o++){const d=n[o];t(e[d],d,o)}}}async function ssrRenderSuspense(e,{default:t}){t?t():e("<!---->")}function ssrGetDirectiveProps(e,t,n,o,c={}){return typeof t!="function"&&t.getSSRProps?t.getSSRProps({dir:t,instance:e,value:n,oldValue:void 0,arg:o,modifiers:c},null)||{}:{}}const ssrLooseEqual=looseEqual;initDirectivesForSSR();const NODE_ENV=process.env.NODE_ENV,isDev=process.env.NODE_ENV==="development";process.env.NODE_ENV;process.env.NODE_ENV;const SSR_SYMBLE_KEY="__SSR__",renderSSRSymbleScript=()=>`<script>window.${SSR_SYMBLE_KEY} = true<\/script>`,getSSRSymbleStatus=()=>Boolean(window[SSR_SYMBLE_KEY]),SSR_CONTEXT_KEY="__INITIAL_SSR_CONTEXT__",renderSSRContextScript=e=>`<script>window.${SSR_CONTEXT_KEY} = ${e}<\/script>`;let ssrContext={};const setSSRContext=(e,t)=>{ssrContext[e]=t&&JSON.parse(JSON.stringify(t))},getSSRContext=e=>ssrContext[e];function rebirthSSRContext(e){return ssrContext=Object.assign({},{}),e.config.globalProperties.$ssrContext=ssrContext,ssrContext}function getSSRContextByApp(e){return e.config.globalProperties.$ssrContext||ssrContext}const isSSR=typeof window>"u"||getSSRSymbleStatus(),isSPA=!isSSR,isServer=!0,isClient$1=!isServer,API_PROXY_URL="/api",API_LOCAL_URL="http://localhost:8000",API_ONLINE_URL="https://api.surmon.me",DEV_API=isSPA?API_PROXY_URL:API_ONLINE_URL,PROD_API=isSPA?API_ONLINE_URL:API_LOCAL_URL,API_CONFIG={FE:"https://surmon.me",CDN:"https://cdn.surmon.me",PROXY:"https://cdn.surmon.me/_proxy",STATIC:"https://static.surmon.me",NODEPRESS:isDev?DEV_API:PROD_API},LONG_ARTICLE_THRESHOLD=16688,META=Object.freeze({title:"Surmon.me",zh_sub_title:"\u6765\u82CF\u4E4B\u671B",en_sub_title:"Come into the wild",zh_biography:"\u672C\u662F\u6D6A\u8776\u6E38\u8702\uFF0C\u81EA\u7559\u534A\u4EA9\u77F3\u6C60\uFF0C\u4F46\u6C42\u76F4\u6292\u80F8\u81C6\uFF0C\u6325\u58A8\u4E5D\u4E91\u4E4B\u4E2D",en_biography:"Either write something worth reading or do something worth writing.",url:"https://surmon.me",domain:"surmon.me",author:"Surmon",primary:"#0088f5"}),GEO_INFO=Object.freeze({zh_title:"\u82DF\u6D3B\u4E8E\u6B64\uFF0C\u517B\u4E24\u6761\u72D7",en_title:"Omicron prison, Shanghai",coordinates:[121.55152956275738,31.215855513780504]}),MAPBOX_CONFIG=Object.freeze({TOKEN:"pk.eyJ1Ijoic3VybW9uIiwiYSI6ImNsNDE4YmkzNjB2Z2wzY3F5dWg2M2tqeWIifQ.JhgYGFI4zsuNiX9dH-pBDg",STYLE_LIGHT:"mapbox://styles/surmon/cl41fktzn000f14pet94oo1u4",STYLE_DARK:"mapbox://styles/surmon/cl41gy1qo000l15ry20j5ae0k",ZOOM:11.337439,CENTER:[121.4930539351185,31.227570979004497]}),IDENTITIES=Object.freeze({GOOGLE_ANALYTICS_TRACKING_ID:"UA-84887611-3",GOOGLE_ADSENSE_PUBLISHER_ID:"ca-pub-4710915636313788",YOUTUBE_CHANNEL_ID:"UCoL-j6T28PLSJ2U6ZdONS0w",MUSIC_163_BGM_ALBUM_ID:"638949385",DOUBAN_USER_ID:"56647958",GITHUB_USER_NAME:"surmon-china",TWITTER_USER_NAME:"surmon7788",INSTAGRAM_USERNAME:"surmon666",INSTAGRAM_FB_ID:"17841405600281893",BTC_ADDRESS:"bc1qhpdu03tnexkj4xsm3lqzyjdddz6z0rj2n7fsze",ETH_ADDRESS:"0xaD556974D449126efdeF23f4FF581861C301cB77",OPENSEA_ETH:"0xaD556974D449126efdeF23f4FF581861C301cB77"}),VALUABLE_LINKS=Object.freeze({RSS:"/rss.xml",SITE_MAP:"/sitemap.xml",UPTIME_STATUS:"https://stats.uptimerobot.com/Q2k7OTXxJN",NPM_HOMEPAGE:"https://www.npmjs.com/~surmon",PAYPAL:"https://paypal.me/surmon",GITHUB_SPONSORS:`https://github.com/sponsors/${IDENTITIES.GITHUB_USER_NAME}`,GITHUB:`https://github.com/${IDENTITIES.GITHUB_USER_NAME}`,GITHUB_SURMON_ME:"https://github.com/surmon-china/surmon.me",GITHUB_NODEPRESS:"https://github.com/surmon-china/nodepress",GITHUB_SURMON_ME_NATIVE:"https://github.com/surmon-china/surmon.me.native",GITHUB_BLOG_STAR_LIST:"https://github.com/stars/surmon-china/lists/surmon-me",APP_APK_FILE:"https://raw.githubusercontent.com/surmon-china/surmon.me.native/master/dist/android/surmon.me.apk",MARKDOWN:"https://daringfireball.net/projects/markdown/",GOOGLE_MY_MAP:"https://www.google.com/maps/d/embed?mid=1sRx6t0Yj1TutbwORCvjwTMgr70r62Z6w&z=3",GOOGLE_MY_MAP_KML:"https://www.google.com/maps/d/u/0/kml?forcekml=1&mid=1sRx6t0Yj1TutbwORCvjwTMgr70r62Z6w",DISCORD_GROUP:"https://discord.surmon.me",TELEGRAM_GROUP:"https://t.me/+Z2wsxogVbYM2ZmE1",MUSIC_163:`https://music.163.com/#/playlist?id=${IDENTITIES.MUSIC_163_BGM_ALBUM_ID}`,YOUTUBE_CHANNEL:`https://www.youtube.com/channel/${IDENTITIES.YOUTUBE_CHANNEL_ID}`,TELEGRAM:"https://t.me/surmon",OPENSEA:"https://opensea.io/Surmon",DOUBAN:"https://www.douban.com/people/nocower",DOUBAN_MOVIE:`https://m.douban.com/people/${IDENTITIES.DOUBAN_USER_ID}/movie_charts`,QUORA:"https://www.quora.com/profile/Surmon",LINKEDIN:"https://www.linkedin.com/in/surmon",INSTAGRAM:`https://www.instagram.com/${IDENTITIES.INSTAGRAM_USERNAME}`,TWITTER:`https://twitter.com/${IDENTITIES.TWITTER_USER_NAME}`});var LanguageKey=(e=>(e.APP_SLOGAN="app-slogan",e.CATEGORY_INSIGHT="insight",e.CATEGORY_CODE="code",e.PAGE_HOME="home",e.PAGE_GITHUB="github",e.PAGE_NFT="nft",e.PAGE_LENS="lens",e.PAGE_ABOUT="about",e.PAGE_SPONSOR="sponsor",e.PAGE_GUESTBOOK="guestbook",e.PAGE_APP="app",e.PAGE_ARCHIVE="archive",e.STATISTIC_ARTICLES="statistic-articles",e.STATISTIC_COMMENTS="statistic-comments",e.STATISTIC_TAGS="statistic-tags",e.STATISTIC_TODAY_VIEWS="statistic-today-views",e.STATISTIC_TOTAL_VIEWS="statistic-total-views",e.STATISTIC_TOTAL_UPVOTES="statistic-total-upvotes",e.STATISTIC_AVERAGE_EMOTION="statistic-average-emotion",e.EMPTY_PLACEHOLDER="common-empty-placeholder",e.NOT_FOUND="not-found",e.BACK_TO_HOME_PAGE="back-to-home-page",e.GUESTBOOK_SLOGAN="guestbook-banner-slogan",e.AD="ad",e.BARRAGE="barrage",e.FEEDBACK="feedback",e.TO_TOP="to-page-top",e.TO_BOTTOM="to-page-bottom",e.ORIGIN_ORIGINAL="original",e.ORIGIN_REPRINT="reprint",e.ORIGIN_HYBRID="hybrid",e.ACTION_ON="on",e.ACTION_OFF="off",e.MUSIC_PLACEHOLDER="music-placeholder",e.SEARCH_PLACEHOLDER="search-input-placeholder",e.HOT_ARTICLE_LIST_TITLE="hot-article-list-title",e.ANNOUNCEMENT_PLACEHOLDER="announcement-empty-placeholder",e.CATEGORY_UNCATEGORIZED="category-uncategorized",e.TAG_PLACEHOLDER="tag-placeholder",e.ARTICLE_TITLE="article-title",e.ARTICLE_VIEWS="article-views",e.ARTICLE_PLACEHOLDER="article-empty-placeholder",e.ARTICLE_READ_ALL="read-all-article-content",e.ARTICLE_RENDERING="rendering",e.ARTICLE_LIST_LOADMORE="loadmore",e.ARTICLE_LIST_LOADING="loading",e.ARTICLE_LIST_NO_MORE="no-more",e.COMMENT_LIST_EMPTY="comment-list-placeholder",e.COMMENT_UPVOTE="comment-likes",e.COMMENT_DOWNVOTE="comment-dislikes",e.COMMENT_REPLY="reply-comment",e.COMMENT_DELETE="delete-comment",e.COMMENT_DELETE_CONFIRM="delete-comment-confirm",e.COMMENT_REPLY_CANCEL="cancel-reply-comment",e.COMMENT_MODERATOR="comment-moderator",e.COMMENT_SORT_OLD="oldest-comments",e.COMMENT_SORT_NEW="newest-comments",e.COMMENT_SORT_HOT="hottest-comments",e.COMMENT_POST_NAME="comment-author-name",e.COMMENT_POST_EMAIL="comment-author-email",e.COMMENT_POST_SITE="comment-author-site-url",e.COMMENT_POST_CONTENT="comment-content",e.COMMENT_POST_PLACEHOLDER="comment-box-placeholder",e.COMMENT_POST_ERROR_CONTENT="comment-submit-failed-of-content-error",e.QUERY_PARAMS_ERROR="query-params-error",e.POST_ACTION_ERROR="post-requiest-failed-of-other-error",e.SUBMIT="submit-data",e.SUBMITTING="submitting",e.MOMENT_AM="moment-am",e.MOMENT_PM="moment-pm",e.MOMENT_JUST_NOW="moment-just-now",e.MOMENT_MINUTES="moment-minutes",e.MOMENT_HOURS="moment-hours",e.MOMENT_WEEKS="moment-weeks",e.MOMENT_DAYS="moment-days",e.MOMENT_MONTHS="moment-months",e.MOMENT_YEAR="moment-year",e.MOMENT_AGO="moment-ago",e))(LanguageKey||{});const zhLangMap={[LanguageKey.APP_SLOGAN]:META.zh_sub_title,[LanguageKey.PAGE_HOME]:"\u660E\u6BBF",[LanguageKey.CATEGORY_INSIGHT]:"\u65E0\u8272\u5EB5",[LanguageKey.CATEGORY_CODE]:"\u5B81\u9759\u5BFA",[LanguageKey.PAGE_GITHUB]:"\u4E39\u9752\u9601",[LanguageKey.PAGE_ARCHIVE]:"\u4E07\u8C61\u6BBF",[LanguageKey.PAGE_GUESTBOOK]:"\u56DB\u65B9\u9986",[LanguageKey.PAGE_ABOUT]:"\u72C2\u6D6A\u751F",[LanguageKey.PAGE_SPONSOR]:"\u8D5E\u52A9",[LanguageKey.PAGE_APP]:"\u5BA2\u6237\u7AEF",[LanguageKey.PAGE_LENS]:"\u832B\u6DAF",[LanguageKey.PAGE_NFT]:"\u85CF\u54C1",[LanguageKey.STATISTIC_ARTICLES]:"\u5168\u7AD9\u6587\u7AE0",[LanguageKey.STATISTIC_COMMENTS]:"\u5168\u7AD9\u8BC4\u8BBA",[LanguageKey.STATISTIC_TAGS]:"\u5168\u7AD9\u6807\u7B7E",[LanguageKey.STATISTIC_TODAY_VIEWS]:"\u4ECA\u65E5\u9605\u8BFB",[LanguageKey.STATISTIC_TOTAL_VIEWS]:"\u7D2F\u8BA1\u9605\u8BFB",[LanguageKey.STATISTIC_TOTAL_UPVOTES]:"\u5171\u83B7\u70B9\u8D5E",[LanguageKey.STATISTIC_AVERAGE_EMOTION]:"\u533F\u540D\u8BC4\u5206",[LanguageKey.EMPTY_PLACEHOLDER]:"\u7A7A\u7A7A\u5982\u4E5F",[LanguageKey.NOT_FOUND]:"\u4F17\u91CC\u5BFB\u4ED6 \u6211\u5DF2\u4E0D\u518D",[LanguageKey.BACK_TO_HOME_PAGE]:"\u5C71\u6CB3\u4E07\u91CC \u957F\u6B4C\u5F52\u6545",[LanguageKey.GUESTBOOK_SLOGAN]:"\u6B64\u5FC3\u5149\u660E \u4EA6\u590D\u4F55\u8A00",[LanguageKey.AD]:"\u5E7F\u800C\u544A\u4E4B",[LanguageKey.BARRAGE]:"\u7545\u8A00",[LanguageKey.FEEDBACK]:"\u53CD\u9988",[LanguageKey.TO_TOP]:"\u56DE\u5230\u9876\u90E8",[LanguageKey.TO_BOTTOM]:"\u4E0B\u4E00\u5C4F",[LanguageKey.ORIGIN_ORIGINAL]:"\u539F\u521B",[LanguageKey.ORIGIN_REPRINT]:"\u8F6C\u8F7D",[LanguageKey.ORIGIN_HYBRID]:"\u884D\u751F",[LanguageKey.ACTION_ON]:"\u5F00",[LanguageKey.ACTION_OFF]:"\u5173",[LanguageKey.MUSIC_PLACEHOLDER]:"\u4E94\u97F3\u516D\u5F8B\uFF0C\u4E03\u5F26\u516B\u5EA6",[LanguageKey.SEARCH_PLACEHOLDER]:"\u4E0A\u4E0B\u6C42\u7D22",[LanguageKey.ANNOUNCEMENT_PLACEHOLDER]:"\u7A7A\u7A7A\u5982\u4E5F",[LanguageKey.CATEGORY_UNCATEGORIZED]:"\u672A\u5206\u7C7B",[LanguageKey.TAG_PLACEHOLDER]:"\u65E0\u6807\u7B7E",[LanguageKey.ARTICLE_TITLE]:"\u6587\u4E0D\u52A0\u70B9",[LanguageKey.ARTICLE_VIEWS]:"\u6B21\u9605\u8BFB",[LanguageKey.ARTICLE_PLACEHOLDER]:"\u7A7A\u7A7A\u5982\u4E5F",[LanguageKey.ARTICLE_READ_ALL]:"\u9605\u8BFB\u4F59\u4E0B\u5168\u6587",[LanguageKey.ARTICLE_RENDERING]:"\u6E32\u67D3\u4E2D..",[LanguageKey.HOT_ARTICLE_LIST_TITLE]:"\u7FA4\u8D24\u6BD5\u81F3",[LanguageKey.ARTICLE_LIST_LOADMORE]:"\u52A0\u8F7D\u66F4\u591A",[LanguageKey.ARTICLE_LIST_LOADING]:"\u6B63\u5728\u52A0\u8F7D",[LanguageKey.ARTICLE_LIST_NO_MORE]:"\u6CA1\u6709\u66F4\u591A",[LanguageKey.COMMENT_LIST_EMPTY]:"\u671F\u5F85\u4F60\u7684\u6377\u8DB3\u5148\u767B",[LanguageKey.COMMENT_UPVOTE]:"\u8D5E",[LanguageKey.COMMENT_DOWNVOTE]:"\u8E29",[LanguageKey.COMMENT_DELETE]:"\u5220\u9664",[LanguageKey.COMMENT_DELETE_CONFIRM]:"\u786E\u5B9A\u8981\u5220\u9664\u6B64\u8BC4\u8BBA\u5417\uFF1F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u6062\u590D",[LanguageKey.COMMENT_REPLY]:"\u56DE\u590D",[LanguageKey.COMMENT_REPLY_CANCEL]:"\u53D6\u6D88\u56DE\u590D",[LanguageKey.COMMENT_MODERATOR]:"\u535A\u4E3B",[LanguageKey.COMMENT_SORT_OLD]:"\u6700\u65E9",[LanguageKey.COMMENT_SORT_NEW]:"\u6700\u65B0",[LanguageKey.COMMENT_SORT_HOT]:"\u6700\u70ED",[LanguageKey.COMMENT_POST_NAME]:"\u540D\u5B57",[LanguageKey.COMMENT_POST_EMAIL]:"\u90AE\u7BB1",[LanguageKey.COMMENT_POST_SITE]:"\u7F51\u5740",[LanguageKey.COMMENT_POST_CONTENT]:"\u5185\u5BB9",[LanguageKey.COMMENT_POST_PLACEHOLDER]:"\u613F\u4F60\u7684\u89C1\u89E3\u4E00\u9488\u89C1\u8840",[LanguageKey.COMMENT_POST_ERROR_CONTENT]:"\u5185\u5BB9\u9700\u8981\u5728 3000 \u5B57\u4EE5\u5185",[LanguageKey.QUERY_PARAMS_ERROR]:"\u8BF7\u6C42\u53C2\u6570\u9519\u8BEF\uFF1A",[LanguageKey.POST_ACTION_ERROR]:"\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BE6\u7EC6\u539F\u56E0 > \u63A7\u5236\u53F0",[LanguageKey.SUBMIT]:"\u63D0\u4EA4",[LanguageKey.SUBMITTING]:"\u63D0\u4EA4\u4E2D...",[LanguageKey.MOMENT_AM]:"\u4E0A\u5348",[LanguageKey.MOMENT_PM]:"\u4E0B\u5348",[LanguageKey.MOMENT_JUST_NOW]:"\u521A\u521A",[LanguageKey.MOMENT_MINUTES]:"\u5206\u949F",[LanguageKey.MOMENT_HOURS]:"\u5C0F\u65F6",[LanguageKey.MOMENT_WEEKS]:"\u5468",[LanguageKey.MOMENT_DAYS]:"\u5929",[LanguageKey.MOMENT_MONTHS]:"\u4E2A\u6708",[LanguageKey.MOMENT_YEAR]:"\u5E74",[LanguageKey.MOMENT_AGO]:e=>`${e.date}\u524D`},enLangMap={[LanguageKey.APP_SLOGAN]:META.en_sub_title,[LanguageKey.PAGE_HOME]:"Home",[LanguageKey.CATEGORY_INSIGHT]:"Insight",[LanguageKey.CATEGORY_CODE]:"Code",[LanguageKey.PAGE_ARCHIVE]:"Archive",[LanguageKey.PAGE_GITHUB]:"GitHub",[LanguageKey.PAGE_ABOUT]:"About",[LanguageKey.PAGE_GUESTBOOK]:"Guestbook",[LanguageKey.PAGE_SPONSOR]:"Sponsor",[LanguageKey.PAGE_APP]:"APP",[LanguageKey.PAGE_LENS]:"Lens",[LanguageKey.PAGE_NFT]:"NFTs",[LanguageKey.STATISTIC_ARTICLES]:"Articles",[LanguageKey.STATISTIC_COMMENTS]:"Comments",[LanguageKey.STATISTIC_TAGS]:"Tags",[LanguageKey.STATISTIC_TODAY_VIEWS]:"Today views",[LanguageKey.STATISTIC_TOTAL_VIEWS]:"Total views",[LanguageKey.STATISTIC_TOTAL_UPVOTES]:"Total upvotes",[LanguageKey.STATISTIC_AVERAGE_EMOTION]:"Rating",[LanguageKey.EMPTY_PLACEHOLDER]:"Null",[LanguageKey.NOT_FOUND]:"Arrives here at last",[LanguageKey.BACK_TO_HOME_PAGE]:"Drive by",[LanguageKey.GUESTBOOK_SLOGAN]:"You have come a long way",[LanguageKey.AD]:"AD",[LanguageKey.BARRAGE]:"Barrage",[LanguageKey.FEEDBACK]:"Feedback",[LanguageKey.TO_TOP]:"To top",[LanguageKey.TO_BOTTOM]:"Next screen",[LanguageKey.ORIGIN_ORIGINAL]:"OG",[LanguageKey.ORIGIN_REPRINT]:"RPT",[LanguageKey.ORIGIN_HYBRID]:"HY",[LanguageKey.ACTION_ON]:"on",[LanguageKey.ACTION_OFF]:"off",[LanguageKey.MUSIC_PLACEHOLDER]:"The music, the soul of man",[LanguageKey.SEARCH_PLACEHOLDER]:"Search...",[LanguageKey.CATEGORY_UNCATEGORIZED]:"Uncategorized",[LanguageKey.ANNOUNCEMENT_PLACEHOLDER]:"No announcements",[LanguageKey.TAG_PLACEHOLDER]:"No tags",[LanguageKey.HOT_ARTICLE_LIST_TITLE]:"Hottest",[LanguageKey.ARTICLE_PLACEHOLDER]:"No articles",[LanguageKey.ARTICLE_TITLE]:"Articles",[LanguageKey.ARTICLE_VIEWS]:"views",[LanguageKey.ARTICLE_READ_ALL]:"Show Full Article",[LanguageKey.ARTICLE_RENDERING]:"Rendering...",[LanguageKey.ARTICLE_LIST_LOADMORE]:"Loadmore",[LanguageKey.ARTICLE_LIST_LOADING]:"Loading...",[LanguageKey.ARTICLE_LIST_NO_MORE]:"No more",[LanguageKey.COMMENT_LIST_EMPTY]:"Be the first to comment",[LanguageKey.COMMENT_UPVOTE]:"upvote",[LanguageKey.COMMENT_DOWNVOTE]:"downvote",[LanguageKey.COMMENT_DELETE]:"delete",[LanguageKey.COMMENT_DELETE_CONFIRM]:"Are you sure you want to delete this comment? You cannot undo this action.",[LanguageKey.COMMENT_REPLY]:"reply",[LanguageKey.COMMENT_REPLY_CANCEL]:"cancel reply",[LanguageKey.COMMENT_MODERATOR]:"Moderator",[LanguageKey.COMMENT_SORT_OLD]:"Oldest",[LanguageKey.COMMENT_SORT_NEW]:"Newest",[LanguageKey.COMMENT_SORT_HOT]:"Hottest",[LanguageKey.COMMENT_POST_NAME]:"name",[LanguageKey.COMMENT_POST_EMAIL]:"email",[LanguageKey.COMMENT_POST_SITE]:"site",[LanguageKey.COMMENT_POST_CONTENT]:"content",[LanguageKey.COMMENT_POST_PLACEHOLDER]:"Hit the nail on the head",[LanguageKey.COMMENT_POST_ERROR_CONTENT]:"Content requirements are within 3000 words!",[LanguageKey.QUERY_PARAMS_ERROR]:"Invalid query params: ",[LanguageKey.POST_ACTION_ERROR]:"Failed! Get error detail in console",[LanguageKey.SUBMIT]:"Submit",[LanguageKey.SUBMITTING]:"Submitting...",[LanguageKey.MOMENT_AM]:"AM",[LanguageKey.MOMENT_PM]:"PM",[LanguageKey.MOMENT_JUST_NOW]:"Just now",[LanguageKey.MOMENT_MINUTES]:"minutes",[LanguageKey.MOMENT_HOURS]:"hours",[LanguageKey.MOMENT_WEEKS]:"weeks",[LanguageKey.MOMENT_DAYS]:"days",[LanguageKey.MOMENT_MONTHS]:"months",[LanguageKey.MOMENT_YEAR]:"year",[LanguageKey.MOMENT_AGO]:e=>`${e.date} ago`};var Language=(e=>(e.English="en",e.Chinese="zh",e))(Language||{});const languages$1=[{code:"zh",iso:"zh-CN",name:"\u7B80\u4F53\u4E2D\u6587",data:zhLangMap},{code:"en",iso:"en-US",name:"English",data:enLangMap}],setRefData=(e,t)=>{setSSRContext("refs",{...getSSRContext("refs"),[e]:t})},getValue=e=>e instanceof Function?e():e,isProxyable=e=>Boolean(e)&&typeof e=="object",universalRef=(e,t)=>{if(isSPA)return ref(getValue(t));let n=getValue(t);t instanceof Function&&setRefData(e,n);const o=(c,d,g)=>new Proxy(g,{get(r,v){if(c(),isProxyable(r[v]))return o(c,d,r[v]);const E=Reflect.get(r,v);return typeof E=="function"?E.bind(r):E},set(r,v,E){const w=Reflect.set(r,v,E);return setRefData(e,n),d(),w}});return customRef((c,d)=>({get:()=>(c(),isProxyable(n)?o(c,d,n):n),set:g=>{setRefData(e,g),n=g,d()}}))},BAD_REQUEST=400,NOT_FOUND=404,INVALID_ERROR=500;var uaParser$1={exports:{}};(function(e,t){(function(n,o){var c="1.0.32",d="",g="?",r="function",v="undefined",E="object",w="string",T="major",S="model",N="name",L="type",P="vendor",O="version",V="architecture",D="console",U="mobile",W="tablet",Z="smarttv",re="wearable",ae="embedded",ce=350,ne="Amazon",le="Apple",de="ASUS",ie="BlackBerry",ve="Browser",Pe="Chrome",ct="Edge",ge="Firefox",Me="Google",Ue="Huawei",Ze="LG",xt="Microsoft",Ut="Motorola",Zt="Opera",en="Samsung",En="Sharp",tt="Sony",Mt="Xiaomi",Tt="Zebra",Bt="Facebook",un=function(yt,At){var Xe={};for(var lt in yt)At[lt]&&At[lt].length%2===0?Xe[lt]=At[lt].concat(yt[lt]):Xe[lt]=yt[lt];return Xe},ln=function(yt){for(var At={},Xe=0;Xe<yt.length;Xe++)At[yt[Xe].toUpperCase()]=yt[Xe];return At},cn=function(yt,At){return typeof yt===w?Yt(At).indexOf(Yt(yt))!==-1:!1},Yt=function(yt){return yt.toLowerCase()},Te=function(yt){return typeof yt===w?yt.replace(/[^\d\.]/g,d).split(".")[0]:o},Re=function(yt,At){if(typeof yt===w)return yt=yt.replace(/^\s\s*/,d).replace(/\s\s*$/,d),typeof At===v?yt:yt.substring(0,ce)},Qe=function(yt,At){for(var Xe=0,lt,at,Ht,Gt,vn,Un;Xe<At.length&&!vn;){var Qn=At[Xe],Ai=At[Xe+1];for(lt=at=0;lt<Qn.length&&!vn;)if(vn=Qn[lt++].exec(yt),vn)for(Ht=0;Ht<Ai.length;Ht++)Un=vn[++at],Gt=Ai[Ht],typeof Gt===E&&Gt.length>0?Gt.length===2?typeof Gt[1]==r?this[Gt[0]]=Gt[1].call(this,Un):this[Gt[0]]=Gt[1]:Gt.length===3?typeof Gt[1]===r&&!(Gt[1].exec&&Gt[1].test)?this[Gt[0]]=Un?Gt[1].call(this,Un,Gt[2]):o:this[Gt[0]]=Un?Un.replace(Gt[1],Gt[2]):o:Gt.length===4&&(this[Gt[0]]=Un?Gt[3].call(this,Un.replace(Gt[1],Gt[2])):o):this[Gt]=Un||o;Xe+=2}},gt=function(yt,At){for(var Xe in At)if(typeof At[Xe]===E&&At[Xe].length>0){for(var lt=0;lt<At[Xe].length;lt++)if(cn(At[Xe][lt],yt))return Xe===g?o:Xe}else if(cn(At[Xe],yt))return Xe===g?o:Xe;return yt},qe={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Ct={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},rt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[O,[N,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[O,[N,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[N,O],[/opios[\/ ]+([\w\.]+)/i],[O,[N,Zt+" Mini"]],[/\bopr\/([\w\.]+)/i],[O,[N,Zt]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[N,O],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[O,[N,"UC"+ve]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[O,[N,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[O,[N,"WeChat"]],[/konqueror\/([\w\.]+)/i],[O,[N,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[O,[N,"IE"]],[/yabrowser\/([\w\.]+)/i],[O,[N,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[N,/(.+)/,"$1 Secure "+ve],O],[/\bfocus\/([\w\.]+)/i],[O,[N,ge+" Focus"]],[/\bopt\/([\w\.]+)/i],[O,[N,Zt+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[O,[N,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[O,[N,"Dolphin"]],[/coast\/([\w\.]+)/i],[O,[N,Zt+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[O,[N,"MIUI "+ve]],[/fxios\/([-\w\.]+)/i],[O,[N,ge]],[/\bqihu|(qi?ho?o?|360)browser/i],[[N,"360 "+ve]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[N,/(.+)/,"$1 "+ve],O],[/(comodo_dragon)\/([\w\.]+)/i],[[N,/_/g," "],O],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[N,O],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[N],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[N,Bt],O],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[N,O],[/\bgsa\/([\w\.]+) .*safari\//i],[O,[N,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[O,[N,Pe+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[N,Pe+" WebView"],O],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[O,[N,"Android "+ve]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[N,O],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[O,[N,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[O,N],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[N,[O,gt,qe]],[/(webkit|khtml)\/([\w\.]+)/i],[N,O],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[N,"Netscape"],O],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[O,[N,ge+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[N,O]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[V,"amd64"]],[/(ia32(?=;))/i],[[V,Yt]],[/((?:i[346]|x)86)[;\)]/i],[[V,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[V,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[V,"armhf"]],[/windows (ce|mobile); ppc;/i],[[V,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[V,/ower/,d,Yt]],[/(sun4\w)[;\)]/i],[[V,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[V,Yt]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[S,[P,en],[L,W]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[S,[P,en],[L,U]],[/\((ip(?:hone|od)[\w ]*);/i],[S,[P,le],[L,U]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[S,[P,le],[L,W]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[S,[P,Ue],[L,W]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[S,[P,Ue],[L,U]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[S,/_/g," "],[P,Mt],[L,U]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[S,/_/g," "],[P,Mt],[L,W]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[S,[P,"OPPO"],[L,U]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[S,[P,"Vivo"],[L,U]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[S,[P,"Realme"],[L,U]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[S,[P,Ut],[L,U]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[S,[P,Ut],[L,W]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[S,[P,Ze],[L,W]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[S,[P,Ze],[L,U]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[S,[P,"Lenovo"],[L,W]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[S,/_/g," "],[P,"Nokia"],[L,U]],[/(pixel c)\b/i],[S,[P,Me],[L,W]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[S,[P,Me],[L,U]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[S,[P,tt],[L,U]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[S,"Xperia Tablet"],[P,tt],[L,W]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[S,[P,"OnePlus"],[L,U]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[S,[P,ne],[L,W]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[S,/(.+)/g,"Fire Phone $1"],[P,ne],[L,U]],[/(playbook);[-\w\),; ]+(rim)/i],[S,P,[L,W]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[S,[P,ie],[L,U]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[S,[P,de],[L,W]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[S,[P,de],[L,U]],[/(nexus 9)/i],[S,[P,"HTC"],[L,W]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[P,[S,/_/g," "],[L,U]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[S,[P,"Acer"],[L,W]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[S,[P,"Meizu"],[L,U]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[S,[P,En],[L,U]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[P,S,[L,U]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[P,S,[L,W]],[/(surface duo)/i],[S,[P,xt],[L,W]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[S,[P,"Fairphone"],[L,U]],[/(u304aa)/i],[S,[P,"AT&T"],[L,U]],[/\bsie-(\w*)/i],[S,[P,"Siemens"],[L,U]],[/\b(rct\w+) b/i],[S,[P,"RCA"],[L,W]],[/\b(venue[\d ]{2,7}) b/i],[S,[P,"Dell"],[L,W]],[/\b(q(?:mv|ta)\w+) b/i],[S,[P,"Verizon"],[L,W]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[S,[P,"Barnes & Noble"],[L,W]],[/\b(tm\d{3}\w+) b/i],[S,[P,"NuVision"],[L,W]],[/\b(k88) b/i],[S,[P,"ZTE"],[L,W]],[/\b(nx\d{3}j) b/i],[S,[P,"ZTE"],[L,U]],[/\b(gen\d{3}) b.+49h/i],[S,[P,"Swiss"],[L,U]],[/\b(zur\d{3}) b/i],[S,[P,"Swiss"],[L,W]],[/\b((zeki)?tb.*\b) b/i],[S,[P,"Zeki"],[L,W]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[P,"Dragon Touch"],S,[L,W]],[/\b(ns-?\w{0,9}) b/i],[S,[P,"Insignia"],[L,W]],[/\b((nxa|next)-?\w{0,9}) b/i],[S,[P,"NextBook"],[L,W]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[P,"Voice"],S,[L,U]],[/\b(lvtel\-)?(v1[12]) b/i],[[P,"LvTel"],S,[L,U]],[/\b(ph-1) /i],[S,[P,"Essential"],[L,U]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[S,[P,"Envizen"],[L,W]],[/\b(trio[-\w\. ]+) b/i],[S,[P,"MachSpeed"],[L,W]],[/\btu_(1491) b/i],[S,[P,"Rotor"],[L,W]],[/(shield[\w ]+) b/i],[S,[P,"Nvidia"],[L,W]],[/(sprint) (\w+)/i],[P,S,[L,U]],[/(kin\.[onetw]{3})/i],[[S,/\./g," "],[P,xt],[L,U]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[S,[P,Tt],[L,W]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[S,[P,Tt],[L,U]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[P,S,[L,D]],[/droid.+; (shield) bui/i],[S,[P,"Nvidia"],[L,D]],[/(playstation [345portablevi]+)/i],[S,[P,tt],[L,D]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[S,[P,xt],[L,D]],[/smart-tv.+(samsung)/i],[P,[L,Z]],[/hbbtv.+maple;(\d+)/i],[[S,/^/,"SmartTV"],[P,en],[L,Z]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[P,Ze],[L,Z]],[/(apple) ?tv/i],[P,[S,le+" TV"],[L,Z]],[/crkey/i],[[S,Pe+"cast"],[P,Me],[L,Z]],[/droid.+aft(\w)( bui|\))/i],[S,[P,ne],[L,Z]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[S,[P,En],[L,Z]],[/(bravia[\w ]+)( bui|\))/i],[S,[P,tt],[L,Z]],[/(mitv-\w{5}) bui/i],[S,[P,Mt],[L,Z]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[P,Re],[S,Re],[L,Z]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[L,Z]],[/((pebble))app/i],[P,S,[L,re]],[/droid.+; (glass) \d/i],[S,[P,Me],[L,re]],[/droid.+; (wt63?0{2,3})\)/i],[S,[P,Tt],[L,re]],[/(quest( 2)?)/i],[S,[P,Bt],[L,re]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[P,[L,ae]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[S,[L,U]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[S,[L,W]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[L,W]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[L,U]],[/(android[-\w\. ]{0,9});.+buil/i],[S,[P,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[O,[N,ct+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[O,[N,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[N,O],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[O,N]],os:[[/microsoft (windows) (vista|xp)/i],[N,O],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[N,[O,gt,Ct]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[N,"Windows"],[O,gt,Ct]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[O,/_/g,"."],[N,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[N,"Mac OS"],[O,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[O,N],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[N,O],[/\(bb(10);/i],[O,[N,ie]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[O,[N,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[O,[N,ge+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[O,[N,"webOS"]],[/crkey\/([\d\.]+)/i],[O,[N,Pe+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[N,"Chromium OS"],O],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[N,O],[/(sunos) ?([\w\.\d]*)/i],[[N,"Solaris"],O],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[N,O]]},Fe=function(yt,At){if(typeof yt===E&&(At=yt,yt=o),!(this instanceof Fe))return new Fe(yt,At).getResult();var Xe=yt||(typeof n!==v&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:d),lt=At?un(rt,At):rt;return this.getBrowser=function(){var at={};return at[N]=o,at[O]=o,Qe.call(at,Xe,lt.browser),at.major=Te(at.version),at},this.getCPU=function(){var at={};return at[V]=o,Qe.call(at,Xe,lt.cpu),at},this.getDevice=function(){var at={};return at[P]=o,at[S]=o,at[L]=o,Qe.call(at,Xe,lt.device),at},this.getEngine=function(){var at={};return at[N]=o,at[O]=o,Qe.call(at,Xe,lt.engine),at},this.getOS=function(){var at={};return at[N]=o,at[O]=o,Qe.call(at,Xe,lt.os),at},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Xe},this.setUA=function(at){return Xe=typeof at===w&&at.length>ce?Re(at,ce):at,this},this.setUA(Xe),this};Fe.VERSION=c,Fe.BROWSER=ln([N,O,T]),Fe.CPU=ln([V]),Fe.DEVICE=ln([S,P,L,D,U,Z,W,re,ae]),Fe.ENGINE=Fe.OS=ln([N,O]),e.exports&&(t=e.exports=Fe),t.UAParser=Fe;var vt=typeof n!==v&&(n.jQuery||n.Zepto);if(vt&&!vt.ua){var dt=new Fe;vt.ua=dt.getResult(),vt.ua.get=function(){return dt.getUA()},vt.ua.set=function(yt){dt.setUA(yt);var At=dt.getResult();for(var Xe in At)vt.ua[Xe]=At[Xe]}}})(typeof window=="object"?window:commonjsGlobal)})(uaParser$1,uaParser$1.exports);const parser$1=uaParser$1.exports,uaParser=e=>{const t=parser$1(e||""),n=String(t.browser.name).toLowerCase(),o=c=>c.some(d=>d.toLowerCase()===n);return{result:t,isIE:o(["compatible","MSIE","IE"]),isEdge:o(["Edge"]),isFirefox:o(["Firefox"]),isChrome:o(["Chrome","Chromium"]),isSafari:o(["Safari"]),isWechat:o(["Wechat"]),isIos:t.os.name==="iOS",isAndroid:t.os.name==="Android",isMobile:t.device.type==="mobile"}},isTargetLanguageUser=(e,t)=>typeof e=="string"?e.includes(t):Array.isArray(e)?e.some(n=>n.includes(t)):!1,isZhUser=e=>e?isTargetLanguageUser(e,Language.Chinese):!0;var LayoutColumn=(e=>(e[e.Normal=0]="Normal",e[e.Wide=1]="Wide",e[e.Full=2]="Full",e))(LayoutColumn||{});const GlobalStateSymbol=Symbol("globalState"),createGlobalState=e=>{const t=universalRef("error",()=>null),n={code:INVALID_ERROR},o=P=>{var O;P?P instanceof Error?t.value={code:(O=P.code)!=null?O:n.code,message:P.message}:typeof P=="string"?t.value={...n,message:P}:t.value={...P,code:P.status||P.status||n.code}:t.value=null},c=ref(!1),d=()=>{c.value=!0},g=reactive({original:e.userAgent,language:e.language,isZhUser:isZhUser(e.language),...uaParser(e.userAgent)}),r=ref(e.layout),v=computed(()=>({layout:r.value,isNormal:r.value===0,isWide:r.value===1,isFull:r.value===2})),E=P=>{P!==r.value&&(r.value=P)},w=computed(()=>{const P=g.isMobile||g.isWechat||g.isSafari?"jpeg":"webp";return{ext:P,isJpg:P==="jpeg",isWebP:P==="webp"}}),T=reactive({sponsor:!1,feedback:!1,statement:!1}),S=(P,O)=>{T[P]=O},L={toRawState:()=>({renderError:t.value,userAgent:g.original,language:g.language,layout:r.value}),renderError:readonly(t),setRenderError:o,isHydrated:readonly(c),setHydrate:d,layoutColumn:v,setLayoutColumn:E,userAgent:readonly(g),imageExt:w,switcher:readonly(T),toggleSwitcher:S};return{...L,install(P){P.provide(GlobalStateSymbol,L)}}},useGlobalState=()=>inject(GlobalStateSymbol),useUniversalFetch=e=>{const t=useGlobalState(),n=()=>{onBeforeMount(()=>e())};if(isSPA){n();return}{onServerPrefetch(()=>e().catch(o=>(t.setRenderError(o),Promise.reject(o))));return}};var pinia_prod={},lib$2={};const require$$0$1=getAugmentedNamespace(vue_runtime_esmBundler);(function(e){var t=require$$0$1;Object.keys(t).forEach(function(n){e[n]=t[n]}),e.set=function(n,o,c){return Array.isArray(n)?(n.length=Math.max(n.length,o),n.splice(o,1,c),c):(n[o]=c,c)},e.del=function(n,o){if(Array.isArray(n)){n.splice(o,1);return}delete n[o]},e.Vue=t,e.Vue2=void 0,e.isVue2=!1,e.isVue3=!0,e.install=function(){}})(lib$2);/*!
  * pinia v2.0.23
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=lib$2;let n;const o=ge=>n=ge,c=()=>t.getCurrentInstance()&&t.inject(d)||n,d=Symbol();function g(ge){return ge&&typeof ge=="object"&&Object.prototype.toString.call(ge)==="[object Object]"&&typeof ge.toJSON!="function"}e.MutationType=void 0,function(ge){ge.direct="direct",ge.patchObject="patch object",ge.patchFunction="patch function"}(e.MutationType||(e.MutationType={}));const r=typeof window<"u";function v(){const ge=t.effectScope(!0),Me=ge.run(()=>t.ref({}));let Ue=[],Ze=[];const xt=t.markRaw({install(Ut){o(xt),t.isVue2||(xt._a=Ut,Ut.provide(d,xt),Ut.config.globalProperties.$pinia=xt,Ze.forEach(Zt=>Ue.push(Zt)),Ze=[])},use(Ut){return!this._a&&!t.isVue2?Ze.push(Ut):Ue.push(Ut),this},_p:Ue,_a:null,_e:ge,_s:new Map,state:Me});return xt}function E(ge,Me){return()=>{}}const w=()=>{};function T(ge,Me,Ue,Ze=w){ge.push(Me);const xt=()=>{const Ut=ge.indexOf(Me);Ut>-1&&(ge.splice(Ut,1),Ze())};return!Ue&&t.getCurrentInstance()&&t.onUnmounted(xt),xt}function S(ge,...Me){ge.slice().forEach(Ue=>{Ue(...Me)})}function N(ge,Me){ge instanceof Map&&Me instanceof Map&&Me.forEach((Ue,Ze)=>ge.set(Ze,Ue)),ge instanceof Set&&Me instanceof Set&&Me.forEach(ge.add,ge);for(const Ue in Me){if(!Me.hasOwnProperty(Ue))continue;const Ze=Me[Ue],xt=ge[Ue];g(xt)&&g(Ze)&&ge.hasOwnProperty(Ue)&&!t.isRef(Ze)&&!t.isReactive(Ze)?ge[Ue]=N(xt,Ze):ge[Ue]=Ze}return ge}const L=Symbol(),P=new WeakMap;function O(ge){return t.isVue2?P.set(ge,1)&&ge:Object.defineProperty(ge,L,{})}function V(ge){return t.isVue2?!P.has(ge):!g(ge)||!ge.hasOwnProperty(L)}const{assign:D}=Object;function U(ge){return!!(t.isRef(ge)&&ge.effect)}function W(ge,Me,Ue,Ze){const{state:xt,actions:Ut,getters:Zt}=Me,en=Ue.state.value[ge];let En;function tt(){en||(t.isVue2?t.set(Ue.state.value,ge,xt?xt():{}):Ue.state.value[ge]=xt?xt():{});const Mt=t.toRefs(Ue.state.value[ge]);return D(Mt,Ut,Object.keys(Zt||{}).reduce((Tt,Bt)=>(Tt[Bt]=t.markRaw(t.computed(()=>{o(Ue);const un=Ue._s.get(ge);if(!(t.isVue2&&!un._r))return Zt[Bt].call(un,un)})),Tt),{}))}return En=Z(ge,tt,Me,Ue,Ze,!0),En.$reset=function(){const Tt=xt?xt():{};this.$patch(Bt=>{D(Bt,Tt)})},En}function Z(ge,Me,Ue={},Ze,xt,Ut){let Zt;const en=D({actions:{}},Ue),En={deep:!0};let tt,Mt,Tt=t.markRaw([]),Bt=t.markRaw([]),un;const ln=Ze.state.value[ge];!Ut&&!ln&&(t.isVue2?t.set(Ze.state.value,ge,{}):Ze.state.value[ge]={}),t.ref({});let cn;function Yt(rt){let Fe;tt=Mt=!1,typeof rt=="function"?(rt(Ze.state.value[ge]),Fe={type:e.MutationType.patchFunction,storeId:ge,events:un}):(N(Ze.state.value[ge],rt),Fe={type:e.MutationType.patchObject,payload:rt,storeId:ge,events:un});const vt=cn=Symbol();t.nextTick().then(()=>{cn===vt&&(tt=!0)}),Mt=!0,S(Tt,Fe,Ze.state.value[ge])}const Te=w;function Re(){Zt.stop(),Tt=[],Bt=[],Ze._s.delete(ge)}function Qe(rt,Fe){return function(){o(Ze);const vt=Array.from(arguments),dt=[],yt=[];function At(at){dt.push(at)}function Xe(at){yt.push(at)}S(Bt,{args:vt,name:rt,store:qe,after:At,onError:Xe});let lt;try{lt=Fe.apply(this&&this.$id===ge?this:qe,vt)}catch(at){throw S(yt,at),at}return lt instanceof Promise?lt.then(at=>(S(dt,at),at)).catch(at=>(S(yt,at),Promise.reject(at))):(S(dt,lt),lt)}}const gt={_p:Ze,$id:ge,$onAction:T.bind(null,Bt),$patch:Yt,$reset:Te,$subscribe(rt,Fe={}){const vt=T(Tt,rt,Fe.detached,()=>dt()),dt=Zt.run(()=>t.watch(()=>Ze.state.value[ge],yt=>{(Fe.flush==="sync"?Mt:tt)&&rt({storeId:ge,type:e.MutationType.direct,events:un},yt)},D({},En,Fe)));return vt},$dispose:Re};t.isVue2&&(gt._r=!1);const qe=t.reactive(gt);Ze._s.set(ge,qe);const Ct=Ze._e.run(()=>(Zt=t.effectScope(),Zt.run(()=>Me())));for(const rt in Ct){const Fe=Ct[rt];if(t.isRef(Fe)&&!U(Fe)||t.isReactive(Fe))Ut||(ln&&V(Fe)&&(t.isRef(Fe)?Fe.value=ln[rt]:N(Fe,ln[rt])),t.isVue2?t.set(Ze.state.value[ge],rt,Fe):Ze.state.value[ge][rt]=Fe);else if(typeof Fe=="function"){const vt=Qe(rt,Fe);t.isVue2?t.set(Ct,rt,vt):Ct[rt]=vt,en.actions[rt]=Fe}}return t.isVue2?Object.keys(Ct).forEach(rt=>{t.set(qe,rt,Ct[rt])}):(D(qe,Ct),D(t.toRaw(qe),Ct)),Object.defineProperty(qe,"$state",{get:()=>Ze.state.value[ge],set:rt=>{Yt(Fe=>{D(Fe,rt)})}}),t.isVue2&&(qe._r=!0),Ze._p.forEach(rt=>{D(qe,Zt.run(()=>rt({store:qe,app:Ze._a,pinia:Ze,options:en})))}),ln&&Ut&&Ue.hydrate&&Ue.hydrate(qe.$state,ln),tt=!0,Mt=!0,qe}function re(ge,Me,Ue){let Ze,xt;const Ut=typeof Me=="function";typeof ge=="string"?(Ze=ge,xt=Ut?Ue:Me):(xt=ge,Ze=ge.id);function Zt(en,En){const tt=t.getCurrentInstance();return en=(process.env.NODE_ENV==="test"&&n&&n._testing?null:en)||tt&&t.inject(d),en&&o(en),en=n,en._s.has(Ze)||(Ut?Z(Ze,Me,xt,en):W(Ze,xt,en)),en._s.get(Ze)}return Zt.$id=Ze,Zt}let ae="Store";function ce(ge){ae=ge}function ne(...ge){return ge.reduce((Me,Ue)=>(Me[Ue.$id+ae]=function(){return Ue(this.$pinia)},Me),{})}function le(ge,Me){return Array.isArray(Me)?Me.reduce((Ue,Ze)=>(Ue[Ze]=function(){return ge(this.$pinia)[Ze]},Ue),{}):Object.keys(Me).reduce((Ue,Ze)=>(Ue[Ze]=function(){const xt=ge(this.$pinia),Ut=Me[Ze];return typeof Ut=="function"?Ut.call(this,xt):xt[Ut]},Ue),{})}const de=le;function ie(ge,Me){return Array.isArray(Me)?Me.reduce((Ue,Ze)=>(Ue[Ze]=function(...xt){return ge(this.$pinia)[Ze](...xt)},Ue),{}):Object.keys(Me).reduce((Ue,Ze)=>(Ue[Ze]=function(...xt){return ge(this.$pinia)[Me[Ze]](...xt)},Ue),{})}function ve(ge,Me){return Array.isArray(Me)?Me.reduce((Ue,Ze)=>(Ue[Ze]={get(){return ge(this.$pinia)[Ze]},set(xt){return ge(this.$pinia)[Ze]=xt}},Ue),{}):Object.keys(Me).reduce((Ue,Ze)=>(Ue[Ze]={get(){return ge(this.$pinia)[Me[Ze]]},set(xt){return ge(this.$pinia)[Me[Ze]]=xt}},Ue),{})}function Pe(ge){if(t.isVue2)return t.toRefs(ge);{ge=t.toRaw(ge);const Me={};for(const Ue in ge){const Ze=ge[Ue];(t.isRef(Ze)||t.isReactive(Ze))&&(Me[Ue]=t.toRef(ge,Ue))}return Me}}const ct=function(ge){ge.mixin({beforeCreate(){const Me=this.$options;if(Me.pinia){const Ue=Me.pinia;if(!this._provided){const Ze={};Object.defineProperty(this,"_provided",{get:()=>Ze,set:xt=>Object.assign(Ze,xt)})}this._provided[d]=Ue,this.$pinia||(this.$pinia=Ue),Ue._a=this,r&&o(Ue)}else!this.$pinia&&Me.parent&&Me.parent.$pinia&&(this.$pinia=Me.parent.$pinia)},destroyed(){delete this._pStores}})};e.PiniaVuePlugin=ct,e.acceptHMRUpdate=E,e.createPinia=v,e.defineStore=re,e.getActivePinia=c,e.mapActions=ie,e.mapGetters=de,e.mapState=le,e.mapStores=ne,e.mapWritableState=ve,e.setActivePinia=o,e.setMapStoreSuffix=ce,e.skipHydrate=O,e.storeToRefs=Pe})(pinia_prod);function defineFetchStore(e){var t;return pinia_prod.defineStore({id:e.id,state:()=>({fetching:!1,fetched:!1,data:e.initData}),getters:(t=e.getters)!=null?t:{},actions:{async fetch(n){if(!(e.onlyOnce&&this.fetched)){e.cleanWhenRefetch&&(this.data=e.initData),this.fetching=!0;try{const o=await e.fetcher(n);this.data=o!=null?o:null,this.fetched=!0}finally{this.fetching=!1}}}}})}function basePropertyOf$2(e){return function(t){return e==null?void 0:e[t]}}var _basePropertyOf=basePropertyOf$2,basePropertyOf$1=_basePropertyOf,htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},escapeHtmlChar$1=basePropertyOf$1(htmlEscapes),_escapeHtmlChar=escapeHtmlChar$1,freeGlobal$1=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$1=freeGlobal||freeSelf||Function("return this")(),_root=root$1,root=_root,Symbol$4=root.Symbol,_Symbol=Symbol$4;function arrayMap$1(e,t){for(var n=-1,o=e==null?0:e.length,c=Array(o);++n<o;)c[n]=t(e[n],n,e);return c}var _arrayMap=arrayMap$1,isArray$6=Array.isArray,isArray_1=isArray$6,Symbol$3=_Symbol,objectProto$1=Object.prototype,hasOwnProperty=objectProto$1.hasOwnProperty,nativeObjectToString$1=objectProto$1.toString,symToStringTag$1=Symbol$3?Symbol$3.toStringTag:void 0;function getRawTag$1(e){var t=hasOwnProperty.call(e,symToStringTag$1),n=e[symToStringTag$1];try{e[symToStringTag$1]=void 0;var o=!0}catch{}var c=nativeObjectToString$1.call(e);return o&&(t?e[symToStringTag$1]=n:delete e[symToStringTag$1]),c}var _getRawTag=getRawTag$1,objectProto=Object.prototype,nativeObjectToString=objectProto.toString;function objectToString$2(e){return nativeObjectToString.call(e)}var _objectToString=objectToString$2,Symbol$2=_Symbol,getRawTag=_getRawTag,objectToString$1=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag$1(e){return e==null?e===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(e)?getRawTag(e):objectToString$1(e)}var _baseGetTag=baseGetTag$1;function isObjectLike$1(e){return e!=null&&typeof e=="object"}var isObjectLike_1=isObjectLike$1,baseGetTag=_baseGetTag,isObjectLike=isObjectLike_1,symbolTag="[object Symbol]";function isSymbol$3(e){return typeof e=="symbol"||isObjectLike(e)&&baseGetTag(e)==symbolTag}var isSymbol_1=isSymbol$3,Symbol$1=_Symbol,arrayMap=_arrayMap,isArray$5=isArray_1,isSymbol$2=isSymbol_1,INFINITY$1=1/0,symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString$2(e){if(typeof e=="string")return e;if(isArray$5(e))return arrayMap(e,baseToString$2)+"";if(isSymbol$2(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return t=="0"&&1/e==-INFINITY$1?"-0":t}var _baseToString=baseToString$2,baseToString$1=_baseToString;function toString$6(e){return e==null?"":baseToString$1(e)}var toString_1=toString$6,escapeHtmlChar=_escapeHtmlChar,toString$5=toString_1,reUnescapedHtml=/[&<>"']/g,reHasUnescapedHtml=RegExp(reUnescapedHtml.source);function escape$4(e){return e=toString$5(e),e&&reHasUnescapedHtml.test(e)?e.replace(reUnescapedHtml,escapeHtmlChar):e}var _escape=escape$4,basePropertyOf=_basePropertyOf,htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},unescapeHtmlChar$1=basePropertyOf(htmlUnescapes),_unescapeHtmlChar=unescapeHtmlChar$1,toString$4=toString_1,unescapeHtmlChar=_unescapeHtmlChar,reEscapedHtml=/&(?:amp|lt|gt|quot|#39);/g,reHasEscapedHtml=RegExp(reEscapedHtml.source);function unescape$3(e){return e=toString$4(e),e&&reHasEscapedHtml.test(e)?e.replace(reEscapedHtml,unescapeHtmlChar):e}var _unescape=unescape$3;function baseSlice$1(e,t,n){var o=-1,c=e.length;t<0&&(t=-t>c?0:c+t),n=n>c?c:n,n<0&&(n+=c),c=t>n?0:n-t>>>0,t>>>=0;for(var d=Array(c);++o<c;)d[o]=e[o+t];return d}var _baseSlice=baseSlice$1,baseSlice=_baseSlice;function castSlice$2(e,t,n){var o=e.length;return n=n===void 0?o:n,!t&&n>=o?e:baseSlice(e,t,n)}var _castSlice=castSlice$2,rsAstralRange$2="\\ud800-\\udfff",rsComboMarksRange$2="\\u0300-\\u036f",reComboHalfMarksRange$2="\\ufe20-\\ufe2f",rsComboSymbolsRange$2="\\u20d0-\\u20ff",rsComboRange$2=rsComboMarksRange$2+reComboHalfMarksRange$2+rsComboSymbolsRange$2,rsVarRange$2="\\ufe0e\\ufe0f",rsZWJ$2="\\u200d",reHasUnicode=RegExp("["+rsZWJ$2+rsAstralRange$2+rsComboRange$2+rsVarRange$2+"]");function hasUnicode$4(e){return reHasUnicode.test(e)}var _hasUnicode=hasUnicode$4;function isObject$5(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var isObject_1=isObject$5,_nodeUtil={exports:{}};(function(e,t){var n=_freeGlobal,o=t&&!t.nodeType&&t,c=o&&!0&&e&&!e.nodeType&&e,d=c&&c.exports===o,g=d&&n.process,r=function(){try{var v=c&&c.require&&c.require("util").types;return v||g&&g.binding&&g.binding("util")}catch{}}();e.exports=r})(_nodeUtil,_nodeUtil.exports);var nodeUtil=_nodeUtil.exports;nodeUtil&&nodeUtil.isRegExp;function baseProperty$1(e){return function(t){return t==null?void 0:t[e]}}var _baseProperty=baseProperty$1,baseProperty=_baseProperty,asciiSize$1=baseProperty("length"),_asciiSize=asciiSize$1,rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsVarRange$1="\\ufe0e\\ufe0f",rsAstral$1="["+rsAstralRange$1+"]",rsCombo$1="["+rsComboRange$1+"]",rsFitz$1="\\ud83c[\\udffb-\\udfff]",rsModifier$1="(?:"+rsCombo$1+"|"+rsFitz$1+")",rsNonAstral$1="[^"+rsAstralRange$1+"]",rsRegional$1="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair$1="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ$1="\\u200d",reOptMod$1=rsModifier$1+"?",rsOptVar$1="["+rsVarRange$1+"]?",rsOptJoin$1="(?:"+rsZWJ$1+"(?:"+[rsNonAstral$1,rsRegional$1,rsSurrPair$1].join("|")+")"+rsOptVar$1+reOptMod$1+")*",rsSeq$1=rsOptVar$1+reOptMod$1+rsOptJoin$1,rsSymbol$1="(?:"+[rsNonAstral$1+rsCombo$1+"?",rsCombo$1,rsRegional$1,rsSurrPair$1,rsAstral$1].join("|")+")",reUnicode$1=RegExp(rsFitz$1+"(?="+rsFitz$1+")|"+rsSymbol$1+rsSeq$1,"g");function unicodeSize$1(e){for(var t=reUnicode$1.lastIndex=0;reUnicode$1.test(e);)++t;return t}var _unicodeSize=unicodeSize$1,asciiSize=_asciiSize,hasUnicode$3=_hasUnicode,unicodeSize=_unicodeSize;function stringSize$2(e){return hasUnicode$3(e)?unicodeSize(e):asciiSize(e)}var _stringSize=stringSize$2;function asciiToArray$1(e){return e.split("")}var _asciiToArray=asciiToArray$1,rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsVarRange="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange+"]",rsCombo="["+rsComboRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ="\\u200d",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");function unicodeToArray$1(e){return e.match(reUnicode)||[]}var _unicodeToArray=unicodeToArray$1,asciiToArray=_asciiToArray,hasUnicode$2=_hasUnicode,unicodeToArray=_unicodeToArray;function stringToArray$2(e){return hasUnicode$2(e)?unicodeToArray(e):asciiToArray(e)}var _stringToArray=stringToArray$2,reWhitespace=/\s/;function trimmedEndIndex$1(e){for(var t=e.length;t--&&reWhitespace.test(e.charAt(t)););return t}var _trimmedEndIndex=trimmedEndIndex$1,trimmedEndIndex=_trimmedEndIndex,reTrimStart=/^\s+/;function baseTrim$1(e){return e&&e.slice(0,trimmedEndIndex(e)+1).replace(reTrimStart,"")}var _baseTrim=baseTrim$1,baseTrim=_baseTrim,isObject$4=isObject_1,isSymbol$1=isSymbol_1,NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber$1(e){if(typeof e=="number")return e;if(isSymbol$1(e))return NAN;if(isObject$4(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=isObject$4(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=baseTrim(e);var n=reIsBinary.test(e);return n||reIsOctal.test(e)?freeParseInt(e.slice(2),n?2:8):reIsBadHex.test(e)?NAN:+e}var toNumber_1=toNumber$1,toNumber=toNumber_1,INFINITY=1/0,MAX_INTEGER=17976931348623157e292;function toFinite$1(e){if(!e)return e===0?e:0;if(e=toNumber(e),e===INFINITY||e===-INFINITY){var t=e<0?-1:1;return t*MAX_INTEGER}return e===e?e:0}var toFinite_1=toFinite$1,toFinite=toFinite_1;function toInteger$1(e){var t=toFinite(e),n=t%1;return t===t?n?t-n:t:0}var toInteger_1=toInteger$1,castSlice$1=_castSlice,hasUnicode$1=_hasUnicode,stringToArray$1=_stringToArray,toString$3=toString_1;function createCaseFirst$1(e){return function(t){t=toString$3(t);var n=hasUnicode$1(t)?stringToArray$1(t):void 0,o=n?n[0]:t.charAt(0),c=n?castSlice$1(n,1).join(""):t.slice(1);return o[e]()+c}}var _createCaseFirst=createCaseFirst$1,createCaseFirst=_createCaseFirst,upperFirst$1=createCaseFirst("toUpperCase"),upperFirst_1=upperFirst$1,toString$2=toString_1,upperFirst=upperFirst_1;function capitalize(e){return upperFirst(toString$2(e).toLowerCase())}var capitalize_1=capitalize,MAX_SAFE_INTEGER=9007199254740991,nativeFloor=Math.floor;function baseRepeat$1(e,t){var n="";if(!e||t<1||t>MAX_SAFE_INTEGER)return n;do t%2&&(n+=e),t=nativeFloor(t/2),t&&(e+=e);while(t);return n}var _baseRepeat=baseRepeat$1,baseRepeat=_baseRepeat,baseToString=_baseToString,castSlice=_castSlice,hasUnicode=_hasUnicode,stringSize$1=_stringSize,stringToArray=_stringToArray,nativeCeil=Math.ceil;function createPadding$1(e,t){t=t===void 0?" ":baseToString(t);var n=t.length;if(n<2)return n?baseRepeat(t,e):t;var o=baseRepeat(t,nativeCeil(e/stringSize$1(t)));return hasUnicode(t)?castSlice(stringToArray(o),0,e).join(""):o.slice(0,e)}var _createPadding=createPadding$1,createPadding=_createPadding,stringSize=_stringSize,toInteger=toInteger_1,toString$1=toString_1;function padStart$1(e,t,n){e=toString$1(e),t=toInteger(t);var o=t?stringSize(e):0;return t&&o<t?createPadding(t-o,n)+e:e}var padStart_1=padStart$1;const escape$3=_escape,unescape$2=_unescape,padStart=padStart_1,firstUpperCase=capitalize_1;function numberToKilo(e){return e>1e3?`${parseFloat((e/1e3).toFixed(2))}k`:String(e)}function numberSplit(e){return String(e).replace(/.{1,3}(?=(.{3})+$)/g,"$&,")}const CHINESE_NUMBER_TEXT="\u3007\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D\u5341".split(""),CHINESE_NUMBER_CAPITAL_TEXT="\u96F6\u58F9\u8D30\u53C1\u8086\u4F0D\u9646\u67D2\u634C\u7396\u62FE".split(""),numberToChinese=(e,t=!1)=>{const n=t?CHINESE_NUMBER_CAPITAL_TEXT:CHINESE_NUMBER_TEXT;return String(e).split("").map(o=>n[Number(o)]).join("")};var axios$3={exports:{}},axios$2={exports:{}},bind$4=function(t,n){return function(){for(var c=new Array(arguments.length),d=0;d<c.length;d++)c[d]=arguments[d];return t.apply(n,c)}},bind$3=bind$4,toString=Object.prototype.toString,kindOf=function(e){return function(t){var n=toString.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())}}(Object.create(null));function kindOfTest(e){return e=e.toLowerCase(),function(n){return kindOf(n)===e}}function isArray$4(e){return Array.isArray(e)}function isUndefined$1(e){return typeof e>"u"}function isBuffer$1(e){return e!==null&&!isUndefined$1(e)&&e.constructor!==null&&!isUndefined$1(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&isArrayBuffer(e.buffer),t}function isString$1(e){return typeof e=="string"}function isNumber$1(e){return typeof e=="number"}function isObject$3(e){return e!==null&&typeof e=="object"}function isPlainObject(e){if(kindOf(e)!=="object")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}var isDate$1=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList");function isFunction(e){return toString.call(e)==="[object Function]"}function isStream(e){return isObject$3(e)&&isFunction(e.pipe)}function isFormData(e){var t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||toString.call(e)===t||isFunction(e.toString)&&e.toString()===t)}var isURLSearchParams=kindOfTest("URLSearchParams");function trim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function forEach(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),isArray$4(e))for(var n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(null,e[c],c,e)}function merge$2(){var e={};function t(c,d){isPlainObject(e[d])&&isPlainObject(c)?e[d]=merge$2(e[d],c):isPlainObject(c)?e[d]=merge$2({},c):isArray$4(c)?e[d]=c.slice():e[d]=c}for(var n=0,o=arguments.length;n<o;n++)forEach(arguments[n],t);return e}function extend$3(e,t,n){return forEach(t,function(c,d){n&&typeof c=="function"?e[d]=bind$3(c,n):e[d]=c}),e}function stripBOM(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}function inherits(e,t,n,o){e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)}function toFlatObject(e,t,n){var o,c,d,g={};t=t||{};do{for(o=Object.getOwnPropertyNames(e),c=o.length;c-- >0;)d=o[c],g[d]||(t[d]=e[d],g[d]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t}function endsWith(e,t,n){e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;var o=e.indexOf(t,n);return o!==-1&&o===n}function toArray(e){if(!e)return null;var t=e.length;if(isUndefined$1(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n}var isTypedArray=function(e){return function(t){return e&&t instanceof e}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),utils$g={isArray:isArray$4,isArrayBuffer,isBuffer:isBuffer$1,isFormData,isArrayBufferView,isString:isString$1,isNumber:isNumber$1,isObject:isObject$3,isPlainObject,isUndefined:isUndefined$1,isDate:isDate$1,isFile,isBlob,isFunction,isStream,isURLSearchParams,isStandardBrowserEnv,forEach,merge:merge$2,extend:extend$3,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,isTypedArray,isFileList},utils$f=utils$g;function encode$1(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$1=function(t,n,o){if(!n)return t;var c;if(o)c=o(n);else if(utils$f.isURLSearchParams(n))c=n.toString();else{var d=[];utils$f.forEach(n,function(v,E){v===null||typeof v>"u"||(utils$f.isArray(v)?E=E+"[]":v=[v],utils$f.forEach(v,function(T){utils$f.isDate(T)?T=T.toISOString():utils$f.isObject(T)&&(T=JSON.stringify(T)),d.push(encode$1(E)+"="+encode$1(T))}))}),c=d.join("&")}if(c){var g=t.indexOf("#");g!==-1&&(t=t.slice(0,g)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t},utils$e=utils$g;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function(t,n,o){return this.handlers.push({fulfilled:t,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1};InterceptorManager$1.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};InterceptorManager$1.prototype.forEach=function(t){utils$e.forEach(this.handlers,function(o){o!==null&&t(o)})};var InterceptorManager_1=InterceptorManager$1,utils$d=utils$g,normalizeHeaderName$1=function(t,n){utils$d.forEach(t,function(c,d){d!==n&&d.toUpperCase()===n.toUpperCase()&&(t[n]=c,delete t[d])})},utils$c=utils$g;function AxiosError$2(e,t,n,o,c){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),c&&(this.response=c)}utils$c.inherits(AxiosError$2,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var prototype=AxiosError$2.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(e){descriptors[e]={value:e}});Object.defineProperties(AxiosError$2,descriptors);Object.defineProperty(prototype,"isAxiosError",{value:!0});AxiosError$2.from=function(e,t,n,o,c,d){var g=Object.create(prototype);return utils$c.toFlatObject(e,g,function(v){return v!==Error.prototype}),AxiosError$2.call(g,e.message,t,n,o,c),g.name=e.name,d&&Object.assign(g,d),g};var AxiosError_1=AxiosError$2,transitional={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},utils$b=utils$g;function toFormData$1(e,t){t=t||new FormData;var n=[];function o(d){return d===null?"":utils$b.isDate(d)?d.toISOString():utils$b.isArrayBuffer(d)||utils$b.isTypedArray(d)?typeof Blob=="function"?new Blob([d]):Buffer.from(d):d}function c(d,g){if(utils$b.isPlainObject(d)||utils$b.isArray(d)){if(n.indexOf(d)!==-1)throw Error("Circular reference detected in "+g);n.push(d),utils$b.forEach(d,function(v,E){if(!utils$b.isUndefined(v)){var w=g?g+"."+E:E,T;if(v&&!g&&typeof v=="object"){if(utils$b.endsWith(E,"{}"))v=JSON.stringify(v);else if(utils$b.endsWith(E,"[]")&&(T=utils$b.toArray(v))){T.forEach(function(S){!utils$b.isUndefined(S)&&t.append(w,o(S))});return}}c(v,w)}}),n.pop()}else t.append(g,o(d))}return c(e),t}var toFormData_1=toFormData$1,settle,hasRequiredSettle;function requireSettle(){if(hasRequiredSettle)return settle;hasRequiredSettle=1;var e=AxiosError_1;return settle=function(n,o,c){var d=c.config.validateStatus;!c.status||!d||d(c.status)?n(c):o(new e("Request failed with status code "+c.status,[e.ERR_BAD_REQUEST,e.ERR_BAD_RESPONSE][Math.floor(c.status/100)-4],c.config,c.request,c))},settle}var cookies,hasRequiredCookies;function requireCookies(){if(hasRequiredCookies)return cookies;hasRequiredCookies=1;var e=utils$g;return cookies=e.isStandardBrowserEnv()?function(){return{write:function(o,c,d,g,r,v){var E=[];E.push(o+"="+encodeURIComponent(c)),e.isNumber(d)&&E.push("expires="+new Date(d).toGMTString()),e.isString(g)&&E.push("path="+g),e.isString(r)&&E.push("domain="+r),v===!0&&E.push("secure"),document.cookie=E.join("; ")},read:function(o){var c=document.cookie.match(new RegExp("(^|;\\s*)("+o+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(o){this.write(o,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),cookies}var isAbsoluteURL$1=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)},combineURLs$1=function(t,n){return n?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t},isAbsoluteURL=isAbsoluteURL$1,combineURLs=combineURLs$1,buildFullPath$1=function(t,n){return t&&!isAbsoluteURL(n)?combineURLs(t,n):n},parseHeaders,hasRequiredParseHeaders;function requireParseHeaders(){if(hasRequiredParseHeaders)return parseHeaders;hasRequiredParseHeaders=1;var e=utils$g,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return parseHeaders=function(o){var c={},d,g,r;return o&&e.forEach(o.split(`
`),function(E){if(r=E.indexOf(":"),d=e.trim(E.substr(0,r)).toLowerCase(),g=e.trim(E.substr(r+1)),d){if(c[d]&&t.indexOf(d)>=0)return;d==="set-cookie"?c[d]=(c[d]?c[d]:[]).concat([g]):c[d]=c[d]?c[d]+", "+g:g}}),c},parseHeaders}var isURLSameOrigin,hasRequiredIsURLSameOrigin;function requireIsURLSameOrigin(){if(hasRequiredIsURLSameOrigin)return isURLSameOrigin;hasRequiredIsURLSameOrigin=1;var e=utils$g;return isURLSameOrigin=e.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a"),c;function d(g){var r=g;return n&&(o.setAttribute("href",r),r=o.href),o.setAttribute("href",r),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:o.pathname.charAt(0)==="/"?o.pathname:"/"+o.pathname}}return c=d(window.location.href),function(r){var v=e.isString(r)?d(r):r;return v.protocol===c.protocol&&v.host===c.host}}():function(){return function(){return!0}}(),isURLSameOrigin}var CanceledError_1,hasRequiredCanceledError;function requireCanceledError(){if(hasRequiredCanceledError)return CanceledError_1;hasRequiredCanceledError=1;var e=AxiosError_1,t=utils$g;function n(o){e.call(this,o==null?"canceled":o,e.ERR_CANCELED),this.name="CanceledError"}return t.inherits(n,e,{__CANCEL__:!0}),CanceledError_1=n,CanceledError_1}var parseProtocol,hasRequiredParseProtocol;function requireParseProtocol(){return hasRequiredParseProtocol||(hasRequiredParseProtocol=1,parseProtocol=function(t){var n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}),parseProtocol}var xhr,hasRequiredXhr;function requireXhr(){if(hasRequiredXhr)return xhr;hasRequiredXhr=1;var e=utils$g,t=requireSettle(),n=requireCookies(),o=buildURL$1,c=buildFullPath$1,d=requireParseHeaders(),g=requireIsURLSameOrigin(),r=transitional,v=AxiosError_1,E=requireCanceledError(),w=requireParseProtocol();return xhr=function(S){return new Promise(function(L,P){var O=S.data,V=S.headers,D=S.responseType,U;function W(){S.cancelToken&&S.cancelToken.unsubscribe(U),S.signal&&S.signal.removeEventListener("abort",U)}e.isFormData(O)&&e.isStandardBrowserEnv()&&delete V["Content-Type"];var Z=new XMLHttpRequest;if(S.auth){var re=S.auth.username||"",ae=S.auth.password?unescape(encodeURIComponent(S.auth.password)):"";V.Authorization="Basic "+btoa(re+":"+ae)}var ce=c(S.baseURL,S.url);Z.open(S.method.toUpperCase(),o(ce,S.params,S.paramsSerializer),!0),Z.timeout=S.timeout;function ne(){if(!!Z){var ie="getAllResponseHeaders"in Z?d(Z.getAllResponseHeaders()):null,ve=!D||D==="text"||D==="json"?Z.responseText:Z.response,Pe={data:ve,status:Z.status,statusText:Z.statusText,headers:ie,config:S,request:Z};t(function(ge){L(ge),W()},function(ge){P(ge),W()},Pe),Z=null}}if("onloadend"in Z?Z.onloadend=ne:Z.onreadystatechange=function(){!Z||Z.readyState!==4||Z.status===0&&!(Z.responseURL&&Z.responseURL.indexOf("file:")===0)||setTimeout(ne)},Z.onabort=function(){!Z||(P(new v("Request aborted",v.ECONNABORTED,S,Z)),Z=null)},Z.onerror=function(){P(new v("Network Error",v.ERR_NETWORK,S,Z,Z)),Z=null},Z.ontimeout=function(){var ve=S.timeout?"timeout of "+S.timeout+"ms exceeded":"timeout exceeded",Pe=S.transitional||r;S.timeoutErrorMessage&&(ve=S.timeoutErrorMessage),P(new v(ve,Pe.clarifyTimeoutError?v.ETIMEDOUT:v.ECONNABORTED,S,Z)),Z=null},e.isStandardBrowserEnv()){var le=(S.withCredentials||g(ce))&&S.xsrfCookieName?n.read(S.xsrfCookieName):void 0;le&&(V[S.xsrfHeaderName]=le)}"setRequestHeader"in Z&&e.forEach(V,function(ve,Pe){typeof O>"u"&&Pe.toLowerCase()==="content-type"?delete V[Pe]:Z.setRequestHeader(Pe,ve)}),e.isUndefined(S.withCredentials)||(Z.withCredentials=!!S.withCredentials),D&&D!=="json"&&(Z.responseType=S.responseType),typeof S.onDownloadProgress=="function"&&Z.addEventListener("progress",S.onDownloadProgress),typeof S.onUploadProgress=="function"&&Z.upload&&Z.upload.addEventListener("progress",S.onUploadProgress),(S.cancelToken||S.signal)&&(U=function(ie){!Z||(P(!ie||ie&&ie.type?new E:ie),Z.abort(),Z=null)},S.cancelToken&&S.cancelToken.subscribe(U),S.signal&&(S.signal.aborted?U():S.signal.addEventListener("abort",U))),O||(O=null);var de=w(ce);if(de&&["http","https","file"].indexOf(de)===-1){P(new v("Unsupported protocol "+de+":",v.ERR_BAD_REQUEST,S));return}Z.send(O)})},xhr}var followRedirects={exports:{}},src$2={exports:{}},browser$2={exports:{}},ms$1,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms$1;hasRequiredMs=1;var e=1e3,t=e*60,n=t*60,o=n*24,c=o*7,d=o*365.25;ms$1=function(w,T){T=T||{};var S=typeof w;if(S==="string"&&w.length>0)return g(w);if(S==="number"&&isFinite(w))return T.long?v(w):r(w);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(w))};function g(w){if(w=String(w),!(w.length>100)){var T=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(w);if(!!T){var S=parseFloat(T[1]),N=(T[2]||"ms").toLowerCase();switch(N){case"years":case"year":case"yrs":case"yr":case"y":return S*d;case"weeks":case"week":case"w":return S*c;case"days":case"day":case"d":return S*o;case"hours":case"hour":case"hrs":case"hr":case"h":return S*n;case"minutes":case"minute":case"mins":case"min":case"m":return S*t;case"seconds":case"second":case"secs":case"sec":case"s":return S*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return S;default:return}}}}function r(w){var T=Math.abs(w);return T>=o?Math.round(w/o)+"d":T>=n?Math.round(w/n)+"h":T>=t?Math.round(w/t)+"m":T>=e?Math.round(w/e)+"s":w+"ms"}function v(w){var T=Math.abs(w);return T>=o?E(w,T,o,"day"):T>=n?E(w,T,n,"hour"):T>=t?E(w,T,t,"minute"):T>=e?E(w,T,e,"second"):w+" ms"}function E(w,T,S,N){var L=T>=S*1.5;return Math.round(w/S)+" "+N+(L?"s":"")}return ms$1}var common,hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;function e(t){o.debug=o,o.default=o,o.coerce=E,o.disable=g,o.enable=d,o.enabled=r,o.humanize=requireMs(),o.destroy=w,Object.keys(t).forEach(T=>{o[T]=t[T]}),o.names=[],o.skips=[],o.formatters={};function n(T){let S=0;for(let N=0;N<T.length;N++)S=(S<<5)-S+T.charCodeAt(N),S|=0;return o.colors[Math.abs(S)%o.colors.length]}o.selectColor=n;function o(T){let S,N=null,L,P;function O(...V){if(!O.enabled)return;const D=O,U=Number(new Date),W=U-(S||U);D.diff=W,D.prev=S,D.curr=U,S=U,V[0]=o.coerce(V[0]),typeof V[0]!="string"&&V.unshift("%O");let Z=0;V[0]=V[0].replace(/%([a-zA-Z%])/g,(ae,ce)=>{if(ae==="%%")return"%";Z++;const ne=o.formatters[ce];if(typeof ne=="function"){const le=V[Z];ae=ne.call(D,le),V.splice(Z,1),Z--}return ae}),o.formatArgs.call(D,V),(D.log||o.log).apply(D,V)}return O.namespace=T,O.useColors=o.useColors(),O.color=o.selectColor(T),O.extend=c,O.destroy=o.destroy,Object.defineProperty(O,"enabled",{enumerable:!0,configurable:!1,get:()=>N!==null?N:(L!==o.namespaces&&(L=o.namespaces,P=o.enabled(T)),P),set:V=>{N=V}}),typeof o.init=="function"&&o.init(O),O}function c(T,S){const N=o(this.namespace+(typeof S>"u"?":":S)+T);return N.log=this.log,N}function d(T){o.save(T),o.namespaces=T,o.names=[],o.skips=[];let S;const N=(typeof T=="string"?T:"").split(/[\s,]+/),L=N.length;for(S=0;S<L;S++)!N[S]||(T=N[S].replace(/\*/g,".*?"),T[0]==="-"?o.skips.push(new RegExp("^"+T.slice(1)+"$")):o.names.push(new RegExp("^"+T+"$")))}function g(){const T=[...o.names.map(v),...o.skips.map(v).map(S=>"-"+S)].join(",");return o.enable(""),T}function r(T){if(T[T.length-1]==="*")return!0;let S,N;for(S=0,N=o.skips.length;S<N;S++)if(o.skips[S].test(T))return!1;for(S=0,N=o.names.length;S<N;S++)if(o.names[S].test(T))return!0;return!1}function v(T){return T.toString().substring(2,T.toString().length-2).replace(/\.\*\?$/,"*")}function E(T){return T instanceof Error?T.stack||T.message:T}function w(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return o.enable(o.load()),o}return common=e,common}var hasRequiredBrowser$1;function requireBrowser$1(){return hasRequiredBrowser$1||(hasRequiredBrowser$1=1,function(e,t){t.formatArgs=o,t.save=c,t.load=d,t.useColors=n,t.storage=g(),t.destroy=(()=>{let v=!1;return()=>{v||(v=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(v){if(v[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+v[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const E="color: "+this.color;v.splice(1,0,E,"color: inherit");let w=0,T=0;v[0].replace(/%[a-zA-Z%]/g,S=>{S!=="%%"&&(w++,S==="%c"&&(T=w))}),v.splice(T,0,E)}t.log=console.debug||console.log||(()=>{});function c(v){try{v?t.storage.setItem("debug",v):t.storage.removeItem("debug")}catch{}}function d(){let v;try{v=t.storage.getItem("debug")}catch{}return!v&&typeof process<"u"&&"env"in process&&(v=process.env.DEBUG),v}function g(){try{return localStorage}catch{}}e.exports=requireCommon()(t);const{formatters:r}=e.exports;r.j=function(v){try{return JSON.stringify(v)}catch(E){return"[UnexpectedJSONParseError]: "+E.message}}}(browser$2,browser$2.exports)),browser$2.exports}var node={exports:{}},hasFlag,hasRequiredHasFlag;function requireHasFlag(){return hasRequiredHasFlag||(hasRequiredHasFlag=1,hasFlag=(e,t=process.argv)=>{const n=e.startsWith("-")?"":e.length===1?"-":"--",o=t.indexOf(n+e),c=t.indexOf("--");return o!==-1&&(c===-1||o<c)}),hasFlag}var supportsColor_1,hasRequiredSupportsColor;function requireSupportsColor(){if(hasRequiredSupportsColor)return supportsColor_1;hasRequiredSupportsColor=1;const e=require$$0__default$1.default,t=require$$1__default.default,n=requireHasFlag(),{env:o}=process;let c;n("no-color")||n("no-colors")||n("color=false")||n("color=never")?c=0:(n("color")||n("colors")||n("color=true")||n("color=always"))&&(c=1),"FORCE_COLOR"in o&&(o.FORCE_COLOR==="true"?c=1:o.FORCE_COLOR==="false"?c=0:c=o.FORCE_COLOR.length===0?1:Math.min(parseInt(o.FORCE_COLOR,10),3));function d(v){return v===0?!1:{level:v,hasBasic:!0,has256:v>=2,has16m:v>=3}}function g(v,E){if(c===0)return 0;if(n("color=16m")||n("color=full")||n("color=truecolor"))return 3;if(n("color=256"))return 2;if(v&&!E&&c===void 0)return 0;const w=c||0;if(o.TERM==="dumb")return w;if(process.platform==="win32"){const T=e.release().split(".");return Number(T[0])>=10&&Number(T[2])>=10586?Number(T[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(T=>T in o)||o.CI_NAME==="codeship"?1:w;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if(o.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in o){const T=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return T>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)||"COLORTERM"in o?1:w}function r(v){const E=g(v,v&&v.isTTY);return d(E)}return supportsColor_1={supportsColor:r,stdout:d(g(!0,t.isatty(1))),stderr:d(g(!0,t.isatty(2)))},supportsColor_1}var hasRequiredNode;function requireNode(){return hasRequiredNode||(hasRequiredNode=1,function(e,t){const n=require$$1__default.default,o=require$$0__default$2.default;t.init=w,t.log=r,t.formatArgs=d,t.save=v,t.load=E,t.useColors=c,t.destroy=o.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const S=requireSupportsColor();S&&(S.stderr||S).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}t.inspectOpts=Object.keys(process.env).filter(S=>/^debug_/i.test(S)).reduce((S,N)=>{const L=N.substring(6).toLowerCase().replace(/_([a-z])/g,(O,V)=>V.toUpperCase());let P=process.env[N];return/^(yes|on|true|enabled)$/i.test(P)?P=!0:/^(no|off|false|disabled)$/i.test(P)?P=!1:P==="null"?P=null:P=Number(P),S[L]=P,S},{});function c(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)}function d(S){const{namespace:N,useColors:L}=this;if(L){const P=this.color,O="\x1B[3"+(P<8?P:"8;5;"+P),V=`  ${O};1m${N} \x1B[0m`;S[0]=V+S[0].split(`
`).join(`
`+V),S.push(O+"m+"+e.exports.humanize(this.diff)+"\x1B[0m")}else S[0]=g()+N+" "+S[0]}function g(){return t.inspectOpts.hideDate?"":new Date().toISOString()+" "}function r(...S){return process.stderr.write(o.format(...S)+`
`)}function v(S){S?process.env.DEBUG=S:delete process.env.DEBUG}function E(){return process.env.DEBUG}function w(S){S.inspectOpts={};const N=Object.keys(t.inspectOpts);for(let L=0;L<N.length;L++)S.inspectOpts[N[L]]=t.inspectOpts[N[L]]}e.exports=requireCommon()(t);const{formatters:T}=e.exports;T.o=function(S){return this.inspectOpts.colors=this.useColors,o.inspect(S,this.inspectOpts).split(`
`).map(N=>N.trim()).join(" ")},T.O=function(S){return this.inspectOpts.colors=this.useColors,o.inspect(S,this.inspectOpts)}}(node,node.exports)),node.exports}var hasRequiredSrc;function requireSrc(){return hasRequiredSrc||(hasRequiredSrc=1,function(e){typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?e.exports=requireBrowser$1():e.exports=requireNode()}(src$2)),src$2.exports}var debug_1,hasRequiredDebug;function requireDebug(){if(hasRequiredDebug)return debug_1;hasRequiredDebug=1;var e;return debug_1=function(){if(!e){try{e=requireSrc()("follow-redirects")}catch{}typeof e!="function"&&(e=function(){})}e.apply(null,arguments)},debug_1}var hasRequiredFollowRedirects;function requireFollowRedirects(){if(hasRequiredFollowRedirects)return followRedirects.exports;hasRequiredFollowRedirects=1;var e=require$$0__default$3.default,t=e.URL,n=require$$1__default$2.default,o=require$$2__default.default,c=require$$1__default$1.default.Writable,d=require$$4__default.default,g=requireDebug(),r=["abort","aborted","connect","error","socket","timeout"],v=Object.create(null);r.forEach(function(ne){v[ne]=function(le,de,ie){this._redirectable.emit(ne,le,de,ie)}});var E=U("ERR_INVALID_URL","Invalid URL",TypeError),w=U("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),T=U("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),S=U("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),N=U("ERR_STREAM_WRITE_AFTER_END","write after end");function L(ne,le){c.call(this),this._sanitizeOptions(ne),this._options=ne,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],le&&this.on("response",le);var de=this;this._onNativeResponse=function(ie){de._processResponse(ie)},this._performRequest()}L.prototype=Object.create(c.prototype),L.prototype.abort=function(){W(this._currentRequest),this.emit("abort")},L.prototype.write=function(ne,le,de){if(this._ending)throw new N;if(!re(ne)&&!ce(ne))throw new TypeError("data should be a string, Buffer or Uint8Array");if(ae(le)&&(de=le,le=null),ne.length===0){de&&de();return}this._requestBodyLength+ne.length<=this._options.maxBodyLength?(this._requestBodyLength+=ne.length,this._requestBodyBuffers.push({data:ne,encoding:le}),this._currentRequest.write(ne,le,de)):(this.emit("error",new S),this.abort())},L.prototype.end=function(ne,le,de){if(ae(ne)?(de=ne,ne=le=null):ae(le)&&(de=le,le=null),!ne)this._ended=this._ending=!0,this._currentRequest.end(null,null,de);else{var ie=this,ve=this._currentRequest;this.write(ne,le,function(){ie._ended=!0,ve.end(null,null,de)}),this._ending=!0}},L.prototype.setHeader=function(ne,le){this._options.headers[ne]=le,this._currentRequest.setHeader(ne,le)},L.prototype.removeHeader=function(ne){delete this._options.headers[ne],this._currentRequest.removeHeader(ne)},L.prototype.setTimeout=function(ne,le){var de=this;function ie(ct){ct.setTimeout(ne),ct.removeListener("timeout",ct.destroy),ct.addListener("timeout",ct.destroy)}function ve(ct){de._timeout&&clearTimeout(de._timeout),de._timeout=setTimeout(function(){de.emit("timeout"),Pe()},ne),ie(ct)}function Pe(){de._timeout&&(clearTimeout(de._timeout),de._timeout=null),de.removeListener("abort",Pe),de.removeListener("error",Pe),de.removeListener("response",Pe),le&&de.removeListener("timeout",le),de.socket||de._currentRequest.removeListener("socket",ve)}return le&&this.on("timeout",le),this.socket?ve(this.socket):this._currentRequest.once("socket",ve),this.on("socket",ie),this.on("abort",Pe),this.on("error",Pe),this.on("response",Pe),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(ne){L.prototype[ne]=function(le,de){return this._currentRequest[ne](le,de)}}),["aborted","connection","socket"].forEach(function(ne){Object.defineProperty(L.prototype,ne,{get:function(){return this._currentRequest[ne]}})}),L.prototype._sanitizeOptions=function(ne){if(ne.headers||(ne.headers={}),ne.host&&(ne.hostname||(ne.hostname=ne.host),delete ne.host),!ne.pathname&&ne.path){var le=ne.path.indexOf("?");le<0?ne.pathname=ne.path:(ne.pathname=ne.path.substring(0,le),ne.search=ne.path.substring(le))}},L.prototype._performRequest=function(){var ne=this._options.protocol,le=this._options.nativeProtocols[ne];if(!le){this.emit("error",new TypeError("Unsupported protocol "+ne));return}if(this._options.agents){var de=ne.slice(0,-1);this._options.agent=this._options.agents[de]}var ie=this._currentRequest=le.request(this._options,this._onNativeResponse);ie._redirectable=this;for(var ve of r)ie.on(ve,v[ve]);if(this._currentUrl=/^\//.test(this._options.path)?e.format(this._options):this._options.path,this._isRedirect){var Pe=0,ct=this,ge=this._requestBodyBuffers;(function Me(Ue){if(ie===ct._currentRequest)if(Ue)ct.emit("error",Ue);else if(Pe<ge.length){var Ze=ge[Pe++];ie.finished||ie.write(Ze.data,Ze.encoding,Me)}else ct._ended&&ie.end()})()}},L.prototype._processResponse=function(ne){var le=ne.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:ne.headers,statusCode:le});var de=ne.headers.location;if(!de||this._options.followRedirects===!1||le<300||le>=400){ne.responseUrl=this._currentUrl,ne.redirects=this._redirects,this.emit("response",ne),this._requestBodyBuffers=[];return}if(W(this._currentRequest),ne.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new T);return}var ie,ve=this._options.beforeRedirect;ve&&(ie=Object.assign({Host:ne.req.getHeader("host")},this._options.headers));var Pe=this._options.method;((le===301||le===302)&&this._options.method==="POST"||le===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],D(/^content-/i,this._options.headers));var ct=D(/^host$/i,this._options.headers),ge=e.parse(this._currentUrl),Me=ct||ge.host,Ue=/^\w+:/.test(de)?this._currentUrl:e.format(Object.assign(ge,{host:Me})),Ze;try{Ze=e.resolve(Ue,de)}catch(en){this.emit("error",new w({cause:en}));return}g("redirecting to",Ze),this._isRedirect=!0;var xt=e.parse(Ze);if(Object.assign(this._options,xt),(xt.protocol!==ge.protocol&&xt.protocol!=="https:"||xt.host!==Me&&!Z(xt.host,Me))&&D(/^(?:authorization|cookie)$/i,this._options.headers),ae(ve)){var Ut={headers:ne.headers,statusCode:le},Zt={url:Ue,method:Pe,headers:ie};try{ve(this._options,Ut,Zt)}catch(en){this.emit("error",en);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(en){this.emit("error",new w({cause:en}))}};function P(ne){var le={maxRedirects:21,maxBodyLength:10485760},de={};return Object.keys(ne).forEach(function(ie){var ve=ie+":",Pe=de[ve]=ne[ie],ct=le[ie]=Object.create(Pe);function ge(Ue,Ze,xt){if(re(Ue)){var Ut;try{Ut=V(new t(Ue))}catch{Ut=e.parse(Ue)}if(!re(Ut.protocol))throw new E({input:Ue});Ue=Ut}else t&&Ue instanceof t?Ue=V(Ue):(xt=Ze,Ze=Ue,Ue={protocol:ve});return ae(Ze)&&(xt=Ze,Ze=null),Ze=Object.assign({maxRedirects:le.maxRedirects,maxBodyLength:le.maxBodyLength},Ue,Ze),Ze.nativeProtocols=de,!re(Ze.host)&&!re(Ze.hostname)&&(Ze.hostname="::1"),d.equal(Ze.protocol,ve,"protocol mismatch"),g("options",Ze),new L(Ze,xt)}function Me(Ue,Ze,xt){var Ut=ct.request(Ue,Ze,xt);return Ut.end(),Ut}Object.defineProperties(ct,{request:{value:ge,configurable:!0,enumerable:!0,writable:!0},get:{value:Me,configurable:!0,enumerable:!0,writable:!0}})}),le}function O(){}function V(ne){var le={protocol:ne.protocol,hostname:ne.hostname.startsWith("[")?ne.hostname.slice(1,-1):ne.hostname,hash:ne.hash,search:ne.search,pathname:ne.pathname,path:ne.pathname+ne.search,href:ne.href};return ne.port!==""&&(le.port=Number(ne.port)),le}function D(ne,le){var de;for(var ie in le)ne.test(ie)&&(de=le[ie],delete le[ie]);return de===null||typeof de>"u"?void 0:String(de).trim()}function U(ne,le,de){function ie(ve){Error.captureStackTrace(this,this.constructor),Object.assign(this,ve||{}),this.code=ne,this.message=this.cause?le+": "+this.cause.message:le}return ie.prototype=new(de||Error),ie.prototype.constructor=ie,ie.prototype.name="Error ["+ne+"]",ie}function W(ne){for(var le of r)ne.removeListener(le,v[le]);ne.on("error",O),ne.abort()}function Z(ne,le){d(re(ne)&&re(le));var de=ne.length-le.length-1;return de>0&&ne[de]==="."&&ne.endsWith(le)}function re(ne){return typeof ne=="string"||ne instanceof String}function ae(ne){return typeof ne=="function"}function ce(ne){return typeof ne=="object"&&"length"in ne}return followRedirects.exports=P({http:n,https:o}),followRedirects.exports.wrap=P,followRedirects.exports}var data,hasRequiredData;function requireData(){return hasRequiredData||(hasRequiredData=1,data={version:"0.27.2"}),data}var http_1,hasRequiredHttp;function requireHttp(){if(hasRequiredHttp)return http_1;hasRequiredHttp=1;var e=utils$g,t=requireSettle(),n=buildFullPath$1,o=buildURL$1,c=require$$1__default$2.default,d=require$$2__default.default,g=requireFollowRedirects().http,r=requireFollowRedirects().https,v=require$$0__default$3.default,E=require$$1__default$3.default,w=requireData().version,T=transitional,S=AxiosError_1,N=requireCanceledError(),L=/https:?/,P=["http:","https:","file:"];function O(V,D,U){if(V.hostname=D.host,V.host=D.host,V.port=D.port,V.path=U,D.auth){var W=Buffer.from(D.auth.username+":"+D.auth.password,"utf8").toString("base64");V.headers["Proxy-Authorization"]="Basic "+W}V.beforeRedirect=function(re){re.headers.host=re.host,O(re,D,re.href)}}return http_1=function(D){return new Promise(function(W,Z){var re;function ae(){D.cancelToken&&D.cancelToken.unsubscribe(re),D.signal&&D.signal.removeEventListener("abort",re)}var ce=function(Fe){ae(),W(Fe)},ne=!1,le=function(Fe){ae(),ne=!0,Z(Fe)},de=D.data,ie=D.headers,ve={};if(Object.keys(ie).forEach(function(Fe){ve[Fe.toLowerCase()]=Fe}),"user-agent"in ve?ie[ve["user-agent"]]||delete ie[ve["user-agent"]]:ie["User-Agent"]="axios/"+w,e.isFormData(de)&&e.isFunction(de.getHeaders))Object.assign(ie,de.getHeaders());else if(de&&!e.isStream(de)){if(!Buffer.isBuffer(de))if(e.isArrayBuffer(de))de=Buffer.from(new Uint8Array(de));else if(e.isString(de))de=Buffer.from(de,"utf-8");else return le(new S("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",S.ERR_BAD_REQUEST,D));if(D.maxBodyLength>-1&&de.length>D.maxBodyLength)return le(new S("Request body larger than maxBodyLength limit",S.ERR_BAD_REQUEST,D));ve["content-length"]||(ie["Content-Length"]=de.length)}var Pe=void 0;if(D.auth){var ct=D.auth.username||"",ge=D.auth.password||"";Pe=ct+":"+ge}var Me=n(D.baseURL,D.url),Ue=v.parse(Me),Ze=Ue.protocol||P[0];if(P.indexOf(Ze)===-1)return le(new S("Unsupported protocol "+Ze,S.ERR_BAD_REQUEST,D));if(!Pe&&Ue.auth){var xt=Ue.auth.split(":"),Ut=xt[0]||"",Zt=xt[1]||"";Pe=Ut+":"+Zt}Pe&&ve.authorization&&delete ie[ve.authorization];var en=L.test(Ze),En=en?D.httpsAgent:D.httpAgent;try{o(Ue.path,D.params,D.paramsSerializer).replace(/^\?/,"")}catch(rt){var tt=new Error(rt.message);tt.config=D,tt.url=D.url,tt.exists=!0,le(tt)}var Mt={path:o(Ue.path,D.params,D.paramsSerializer).replace(/^\?/,""),method:D.method.toUpperCase(),headers:ie,agent:En,agents:{http:D.httpAgent,https:D.httpsAgent},auth:Pe};D.socketPath?Mt.socketPath=D.socketPath:(Mt.hostname=Ue.hostname,Mt.port=Ue.port);var Tt=D.proxy;if(!Tt&&Tt!==!1){var Bt=Ze.slice(0,-1)+"_proxy",un=process.env[Bt]||process.env[Bt.toUpperCase()];if(un){var ln=v.parse(un),cn=process.env.no_proxy||process.env.NO_PROXY,Yt=!0;if(cn){var Te=cn.split(",").map(function(Fe){return Fe.trim()});Yt=!Te.some(function(Fe){return Fe?Fe==="*"||Fe[0]==="."&&Ue.hostname.substr(Ue.hostname.length-Fe.length)===Fe?!0:Ue.hostname===Fe:!1})}if(Yt&&(Tt={host:ln.hostname,port:ln.port,protocol:ln.protocol},ln.auth)){var Re=ln.auth.split(":");Tt.auth={username:Re[0],password:Re[1]}}}}Tt&&(Mt.headers.host=Ue.hostname+(Ue.port?":"+Ue.port:""),O(Mt,Tt,Ze+"//"+Ue.hostname+(Ue.port?":"+Ue.port:"")+Mt.path));var Qe,gt=en&&(Tt?L.test(Tt.protocol):!0);D.transport?Qe=D.transport:D.maxRedirects===0?Qe=gt?d:c:(D.maxRedirects&&(Mt.maxRedirects=D.maxRedirects),D.beforeRedirect&&(Mt.beforeRedirect=D.beforeRedirect),Qe=gt?r:g),D.maxBodyLength>-1&&(Mt.maxBodyLength=D.maxBodyLength),D.insecureHTTPParser&&(Mt.insecureHTTPParser=D.insecureHTTPParser);var qe=Qe.request(Mt,function(Fe){if(!qe.aborted){var vt=Fe,dt=Fe.req||qe;if(Fe.statusCode!==204&&dt.method!=="HEAD"&&D.decompress!==!1)switch(Fe.headers["content-encoding"]){case"gzip":case"compress":case"deflate":vt=vt.pipe(E.createUnzip()),delete Fe.headers["content-encoding"];break}var yt={status:Fe.statusCode,statusText:Fe.statusMessage,headers:Fe.headers,config:D,request:dt};if(D.responseType==="stream")yt.data=vt,t(ce,le,yt);else{var At=[],Xe=0;vt.on("data",function(at){At.push(at),Xe+=at.length,D.maxContentLength>-1&&Xe>D.maxContentLength&&(ne=!0,vt.destroy(),le(new S("maxContentLength size of "+D.maxContentLength+" exceeded",S.ERR_BAD_RESPONSE,D,dt)))}),vt.on("aborted",function(){ne||(vt.destroy(),le(new S("maxContentLength size of "+D.maxContentLength+" exceeded",S.ERR_BAD_RESPONSE,D,dt)))}),vt.on("error",function(at){qe.aborted||le(S.from(at,null,D,dt))}),vt.on("end",function(){try{var at=At.length===1?At[0]:Buffer.concat(At);D.responseType!=="arraybuffer"&&(at=at.toString(D.responseEncoding),(!D.responseEncoding||D.responseEncoding==="utf8")&&(at=e.stripBOM(at))),yt.data=at}catch(Ht){le(S.from(Ht,null,D,yt.request,yt))}t(ce,le,yt)})}}});if(qe.on("error",function(Fe){le(S.from(Fe,null,D,qe))}),qe.on("socket",function(Fe){Fe.setKeepAlive(!0,1e3*60)}),D.timeout){var Ct=parseInt(D.timeout,10);if(isNaN(Ct)){le(new S("error trying to parse `config.timeout` to int",S.ERR_BAD_OPTION_VALUE,D,qe));return}qe.setTimeout(Ct,function(){qe.abort();var Fe=D.transitional||T;le(new S("timeout of "+Ct+"ms exceeded",Fe.clarifyTimeoutError?S.ETIMEDOUT:S.ECONNABORTED,D,qe))})}(D.cancelToken||D.signal)&&(re=function(rt){qe.aborted||(qe.abort(),le(!rt||rt&&rt.type?new N:rt))},D.cancelToken&&D.cancelToken.subscribe(re),D.signal&&(D.signal.aborted?re():D.signal.addEventListener("abort",re))),e.isStream(de)?de.on("error",function(Fe){le(S.from(Fe,D,null,qe))}).pipe(qe):qe.end(de)})},http_1}var FormData$1={exports:{}},delayed_stream,hasRequiredDelayed_stream;function requireDelayed_stream(){if(hasRequiredDelayed_stream)return delayed_stream;hasRequiredDelayed_stream=1;var e=require$$1__default$1.default.Stream,t=require$$0__default$2.default;delayed_stream=n;function n(){this.source=null,this.dataSize=0,this.maxDataSize=1024*1024,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}return t.inherits(n,e),n.create=function(o,c){var d=new this;c=c||{};for(var g in c)d[g]=c[g];d.source=o;var r=o.emit;return o.emit=function(){return d._handleEmit(arguments),r.apply(o,arguments)},o.on("error",function(){}),d.pauseStream&&o.pause(),d},Object.defineProperty(n.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}}),n.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)},n.prototype.resume=function(){this._released||this.release(),this.source.resume()},n.prototype.pause=function(){this.source.pause()},n.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(o){this.emit.apply(this,o)}.bind(this)),this._bufferedEvents=[]},n.prototype.pipe=function(){var o=e.prototype.pipe.apply(this,arguments);return this.resume(),o},n.prototype._handleEmit=function(o){if(this._released){this.emit.apply(this,o);return}o[0]==="data"&&(this.dataSize+=o[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(o)},n.prototype._checkIfMaxDataSizeExceeded=function(){if(!this._maxDataSizeExceeded&&!(this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var o="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(o))}},delayed_stream}var combined_stream,hasRequiredCombined_stream;function requireCombined_stream(){if(hasRequiredCombined_stream)return combined_stream;hasRequiredCombined_stream=1;var e=require$$0__default$2.default,t=require$$1__default$1.default.Stream,n=requireDelayed_stream();combined_stream=o;function o(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2*1024*1024,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null,this._insideLoop=!1,this._pendingNext=!1}return e.inherits(o,t),o.create=function(c){var d=new this;c=c||{};for(var g in c)d[g]=c[g];return d},o.isStreamLike=function(c){return typeof c!="function"&&typeof c!="string"&&typeof c!="boolean"&&typeof c!="number"&&!Buffer.isBuffer(c)},o.prototype.append=function(c){var d=o.isStreamLike(c);if(d){if(!(c instanceof n)){var g=n.create(c,{maxDataSize:1/0,pauseStream:this.pauseStreams});c.on("data",this._checkDataSize.bind(this)),c=g}this._handleErrors(c),this.pauseStreams&&c.pause()}return this._streams.push(c),this},o.prototype.pipe=function(c,d){return t.prototype.pipe.call(this,c,d),this.resume(),c},o.prototype._getNext=function(){if(this._currentStream=null,this._insideLoop){this._pendingNext=!0;return}this._insideLoop=!0;try{do this._pendingNext=!1,this._realGetNext();while(this._pendingNext)}finally{this._insideLoop=!1}},o.prototype._realGetNext=function(){var c=this._streams.shift();if(typeof c>"u"){this.end();return}if(typeof c!="function"){this._pipeNext(c);return}var d=c;d(function(g){var r=o.isStreamLike(g);r&&(g.on("data",this._checkDataSize.bind(this)),this._handleErrors(g)),this._pipeNext(g)}.bind(this))},o.prototype._pipeNext=function(c){this._currentStream=c;var d=o.isStreamLike(c);if(d){c.on("end",this._getNext.bind(this)),c.pipe(this,{end:!1});return}var g=c;this.write(g),this._getNext()},o.prototype._handleErrors=function(c){var d=this;c.on("error",function(g){d._emitError(g)})},o.prototype.write=function(c){this.emit("data",c)},o.prototype.pause=function(){!this.pauseStreams||(this.pauseStreams&&this._currentStream&&typeof this._currentStream.pause=="function"&&this._currentStream.pause(),this.emit("pause"))},o.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&typeof this._currentStream.resume=="function"&&this._currentStream.resume(),this.emit("resume")},o.prototype.end=function(){this._reset(),this.emit("end")},o.prototype.destroy=function(){this._reset(),this.emit("close")},o.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null},o.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var c="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(c))}},o.prototype._updateDataSize=function(){this.dataSize=0;var c=this;this._streams.forEach(function(d){!d.dataSize||(c.dataSize+=d.dataSize)}),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)},o.prototype._emitError=function(c){this._reset(),this.emit("error",c)},combined_stream}var mimeTypes={},mimeDb={exports:{}};const require$$0={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}};/*!
 * mime-db
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015-2022 Douglas Christopher Wilson
 * MIT Licensed
 */var hasRequiredMimeDb;function requireMimeDb(){return hasRequiredMimeDb||(hasRequiredMimeDb=1,function(e){e.exports=require$$0}(mimeDb)),mimeDb.exports}/*!
 * mime-types
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var hasRequiredMimeTypes;function requireMimeTypes(){return hasRequiredMimeTypes||(hasRequiredMimeTypes=1,function(e){var t=requireMimeDb(),n=require$$1__default$4.default.extname,o=/^\s*([^;\s]*)(?:;|\s|$)/,c=/^text\//i;e.charset=d,e.charsets={lookup:d},e.contentType=g,e.extension=r,e.extensions=Object.create(null),e.lookup=v,e.types=Object.create(null),E(e.extensions,e.types);function d(w){if(!w||typeof w!="string")return!1;var T=o.exec(w),S=T&&t[T[1].toLowerCase()];return S&&S.charset?S.charset:T&&c.test(T[1])?"UTF-8":!1}function g(w){if(!w||typeof w!="string")return!1;var T=w.indexOf("/")===-1?e.lookup(w):w;if(!T)return!1;if(T.indexOf("charset")===-1){var S=e.charset(T);S&&(T+="; charset="+S.toLowerCase())}return T}function r(w){if(!w||typeof w!="string")return!1;var T=o.exec(w),S=T&&e.extensions[T[1].toLowerCase()];return!S||!S.length?!1:S[0]}function v(w){if(!w||typeof w!="string")return!1;var T=n("x."+w).toLowerCase().substr(1);return T&&e.types[T]||!1}function E(w,T){var S=["nginx","apache",void 0,"iana"];Object.keys(t).forEach(function(L){var P=t[L],O=P.extensions;if(!(!O||!O.length)){w[L]=O;for(var V=0;V<O.length;V++){var D=O[V];if(T[D]){var U=S.indexOf(t[T[D]].source),W=S.indexOf(P.source);if(T[D]!=="application/octet-stream"&&(U>W||U===W&&T[D].substr(0,12)==="application/"))continue}T[D]=L}}})}}(mimeTypes)),mimeTypes}var defer_1,hasRequiredDefer;function requireDefer(){if(hasRequiredDefer)return defer_1;hasRequiredDefer=1,defer_1=e;function e(t){var n=typeof setImmediate=="function"?setImmediate:typeof process=="object"&&typeof process.nextTick=="function"?process.nextTick:null;n?n(t):setTimeout(t,0)}return defer_1}var async_1,hasRequiredAsync;function requireAsync(){if(hasRequiredAsync)return async_1;hasRequiredAsync=1;var e=requireDefer();async_1=t;function t(n){var o=!1;return e(function(){o=!0}),function(d,g){o?n(d,g):e(function(){n(d,g)})}}return async_1}var abort_1,hasRequiredAbort;function requireAbort(){if(hasRequiredAbort)return abort_1;hasRequiredAbort=1,abort_1=e;function e(n){Object.keys(n.jobs).forEach(t.bind(n)),n.jobs={}}function t(n){typeof this.jobs[n]=="function"&&this.jobs[n]()}return abort_1}var iterate_1,hasRequiredIterate;function requireIterate(){if(hasRequiredIterate)return iterate_1;hasRequiredIterate=1;var e=requireAsync(),t=requireAbort();iterate_1=n;function n(c,d,g,r){var v=g.keyedList?g.keyedList[g.index]:g.index;g.jobs[v]=o(d,v,c[v],function(E,w){v in g.jobs&&(delete g.jobs[v],E?t(g):g.results[v]=w,r(E,g.results))})}function o(c,d,g,r){var v;return c.length==2?v=c(g,e(r)):v=c(g,d,e(r)),v}return iterate_1}var state_1,hasRequiredState;function requireState(){if(hasRequiredState)return state_1;hasRequiredState=1,state_1=e;function e(t,n){var o=!Array.isArray(t),c={index:0,keyedList:o||n?Object.keys(t):null,jobs:{},results:o?{}:[],size:o?Object.keys(t).length:t.length};return n&&c.keyedList.sort(o?n:function(d,g){return n(t[d],t[g])}),c}return state_1}var terminator_1,hasRequiredTerminator;function requireTerminator(){if(hasRequiredTerminator)return terminator_1;hasRequiredTerminator=1;var e=requireAbort(),t=requireAsync();terminator_1=n;function n(o){!Object.keys(this.jobs).length||(this.index=this.size,e(this),t(o)(null,this.results))}return terminator_1}var parallel_1,hasRequiredParallel;function requireParallel(){if(hasRequiredParallel)return parallel_1;hasRequiredParallel=1;var e=requireIterate(),t=requireState(),n=requireTerminator();parallel_1=o;function o(c,d,g){for(var r=t(c);r.index<(r.keyedList||c).length;)e(c,d,r,function(v,E){if(v){g(v,E);return}if(Object.keys(r.jobs).length===0){g(null,r.results);return}}),r.index++;return n.bind(r,g)}return parallel_1}var serialOrdered={exports:{}},hasRequiredSerialOrdered;function requireSerialOrdered(){if(hasRequiredSerialOrdered)return serialOrdered.exports;hasRequiredSerialOrdered=1;var e=requireIterate(),t=requireState(),n=requireTerminator();serialOrdered.exports=o,serialOrdered.exports.ascending=c,serialOrdered.exports.descending=d;function o(g,r,v,E){var w=t(g,v);return e(g,r,w,function T(S,N){if(S){E(S,N);return}if(w.index++,w.index<(w.keyedList||g).length){e(g,r,w,T);return}E(null,w.results)}),n.bind(w,E)}function c(g,r){return g<r?-1:g>r?1:0}function d(g,r){return-1*c(g,r)}return serialOrdered.exports}var serial_1,hasRequiredSerial;function requireSerial(){if(hasRequiredSerial)return serial_1;hasRequiredSerial=1;var e=requireSerialOrdered();serial_1=t;function t(n,o,c){return e(n,o,null,c)}return serial_1}var asynckit,hasRequiredAsynckit;function requireAsynckit(){return hasRequiredAsynckit||(hasRequiredAsynckit=1,asynckit={parallel:requireParallel(),serial:requireSerial(),serialOrdered:requireSerialOrdered()}),asynckit}var populate,hasRequiredPopulate;function requirePopulate(){return hasRequiredPopulate||(hasRequiredPopulate=1,populate=function(e,t){return Object.keys(t).forEach(function(n){e[n]=e[n]||t[n]}),e}),populate}var form_data,hasRequiredForm_data;function requireForm_data(){if(hasRequiredForm_data)return form_data;hasRequiredForm_data=1;var e=requireCombined_stream(),t=require$$0__default$2.default,n=require$$1__default$4.default,o=require$$1__default$2.default,c=require$$2__default.default,d=require$$0__default$3.default.parse,g=require$$1__default$5.default,r=require$$1__default$1.default.Stream,v=requireMimeTypes(),E=requireAsynckit(),w=requirePopulate();form_data=T,t.inherits(T,e);function T(S){if(!(this instanceof T))return new T(S);this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],e.call(this),S=S||{};for(var N in S)this[N]=S[N]}return T.LINE_BREAK=`\r
`,T.DEFAULT_CONTENT_TYPE="application/octet-stream",T.prototype.append=function(S,N,L){L=L||{},typeof L=="string"&&(L={filename:L});var P=e.prototype.append.bind(this);if(typeof N=="number"&&(N=""+N),t.isArray(N)){this._error(new Error("Arrays are not supported."));return}var O=this._multiPartHeader(S,N,L),V=this._multiPartFooter();P(O),P(N),P(V),this._trackLength(O,N,L)},T.prototype._trackLength=function(S,N,L){var P=0;L.knownLength!=null?P+=+L.knownLength:Buffer.isBuffer(N)?P=N.length:typeof N=="string"&&(P=Buffer.byteLength(N)),this._valueLength+=P,this._overheadLength+=Buffer.byteLength(S)+T.LINE_BREAK.length,!(!N||!N.path&&!(N.readable&&N.hasOwnProperty("httpVersion"))&&!(N instanceof r))&&(L.knownLength||this._valuesToMeasure.push(N))},T.prototype._lengthRetriever=function(S,N){S.hasOwnProperty("fd")?S.end!=null&&S.end!=1/0&&S.start!=null?N(null,S.end+1-(S.start?S.start:0)):g.stat(S.path,function(L,P){var O;if(L){N(L);return}O=P.size-(S.start?S.start:0),N(null,O)}):S.hasOwnProperty("httpVersion")?N(null,+S.headers["content-length"]):S.hasOwnProperty("httpModule")?(S.on("response",function(L){S.pause(),N(null,+L.headers["content-length"])}),S.resume()):N("Unknown stream")},T.prototype._multiPartHeader=function(S,N,L){if(typeof L.header=="string")return L.header;var P=this._getContentDisposition(N,L),O=this._getContentType(N,L),V="",D={"Content-Disposition":["form-data",'name="'+S+'"'].concat(P||[]),"Content-Type":[].concat(O||[])};typeof L.header=="object"&&w(D,L.header);var U;for(var W in D)!D.hasOwnProperty(W)||(U=D[W],U!=null&&(Array.isArray(U)||(U=[U]),U.length&&(V+=W+": "+U.join("; ")+T.LINE_BREAK)));return"--"+this.getBoundary()+T.LINE_BREAK+V+T.LINE_BREAK},T.prototype._getContentDisposition=function(S,N){var L,P;return typeof N.filepath=="string"?L=n.normalize(N.filepath).replace(/\\/g,"/"):N.filename||S.name||S.path?L=n.basename(N.filename||S.name||S.path):S.readable&&S.hasOwnProperty("httpVersion")&&(L=n.basename(S.client._httpMessage.path||"")),L&&(P='filename="'+L+'"'),P},T.prototype._getContentType=function(S,N){var L=N.contentType;return!L&&S.name&&(L=v.lookup(S.name)),!L&&S.path&&(L=v.lookup(S.path)),!L&&S.readable&&S.hasOwnProperty("httpVersion")&&(L=S.headers["content-type"]),!L&&(N.filepath||N.filename)&&(L=v.lookup(N.filepath||N.filename)),!L&&typeof S=="object"&&(L=T.DEFAULT_CONTENT_TYPE),L},T.prototype._multiPartFooter=function(){return function(S){var N=T.LINE_BREAK,L=this._streams.length===0;L&&(N+=this._lastBoundary()),S(N)}.bind(this)},T.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+T.LINE_BREAK},T.prototype.getHeaders=function(S){var N,L={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(N in S)S.hasOwnProperty(N)&&(L[N.toLowerCase()]=S[N]);return L},T.prototype.setBoundary=function(S){this._boundary=S},T.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary},T.prototype.getBuffer=function(){for(var S=new Buffer.alloc(0),N=this.getBoundary(),L=0,P=this._streams.length;L<P;L++)typeof this._streams[L]!="function"&&(Buffer.isBuffer(this._streams[L])?S=Buffer.concat([S,this._streams[L]]):S=Buffer.concat([S,Buffer.from(this._streams[L])]),(typeof this._streams[L]!="string"||this._streams[L].substring(2,N.length+2)!==N)&&(S=Buffer.concat([S,Buffer.from(T.LINE_BREAK)])));return Buffer.concat([S,Buffer.from(this._lastBoundary())])},T.prototype._generateBoundary=function(){for(var S="--------------------------",N=0;N<24;N++)S+=Math.floor(Math.random()*10).toString(16);this._boundary=S},T.prototype.getLengthSync=function(){var S=this._overheadLength+this._valueLength;return this._streams.length&&(S+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),S},T.prototype.hasKnownLength=function(){var S=!0;return this._valuesToMeasure.length&&(S=!1),S},T.prototype.getLength=function(S){var N=this._overheadLength+this._valueLength;if(this._streams.length&&(N+=this._lastBoundary().length),!this._valuesToMeasure.length){process.nextTick(S.bind(this,null,N));return}E.parallel(this._valuesToMeasure,this._lengthRetriever,function(L,P){if(L){S(L);return}P.forEach(function(O){N+=O}),S(null,N)})},T.prototype.submit=function(S,N){var L,P,O={method:"post"};return typeof S=="string"?(S=d(S),P=w({port:S.port,path:S.pathname,host:S.hostname,protocol:S.protocol},O)):(P=w(S,O),P.port||(P.port=P.protocol=="https:"?443:80)),P.headers=this.getHeaders(S.headers),P.protocol=="https:"?L=c.request(P):L=o.request(P),this.getLength(function(V,D){if(V&&V!=="Unknown stream"){this._error(V);return}if(D&&L.setHeader("Content-Length",D),this.pipe(L),N){var U,W=function(Z,re){return L.removeListener("error",W),L.removeListener("response",U),N.call(this,Z,re)};U=W.bind(this,null),L.on("error",W),L.on("response",U)}}.bind(this)),L},T.prototype._error=function(S){this.error||(this.error=S,this.pause(),this.emit("error",S))},T.prototype.toString=function(){return"[object FormData]"},form_data}var hasRequiredFormData;function requireFormData(){return hasRequiredFormData||(hasRequiredFormData=1,function(e){e.exports=requireForm_data()}(FormData$1)),FormData$1.exports}var utils$a=utils$g,normalizeHeaderName=normalizeHeaderName$1,AxiosError$1=AxiosError_1,transitionalDefaults=transitional,toFormData=toFormData_1,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(e,t){!utils$a.isUndefined(e)&&utils$a.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function getDefaultAdapter(){var e;return typeof XMLHttpRequest<"u"?e=requireXhr():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(e=requireHttp()),e}function stringifySafely(e,t,n){if(utils$a.isString(e))try{return(t||JSON.parse)(e),utils$a.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(e)}var defaults$7={transitional:transitionalDefaults,adapter:getDefaultAdapter(),transformRequest:[function(t,n){if(normalizeHeaderName(n,"Accept"),normalizeHeaderName(n,"Content-Type"),utils$a.isFormData(t)||utils$a.isArrayBuffer(t)||utils$a.isBuffer(t)||utils$a.isStream(t)||utils$a.isFile(t)||utils$a.isBlob(t))return t;if(utils$a.isArrayBufferView(t))return t.buffer;if(utils$a.isURLSearchParams(t))return setContentTypeIfUnset(n,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var o=utils$a.isObject(t),c=n&&n["Content-Type"],d;if((d=utils$a.isFileList(t))||o&&c==="multipart/form-data"){var g=this.env&&this.env.FormData;return toFormData(d?{"files[]":t}:t,g&&new g)}else if(o||c==="application/json")return setContentTypeIfUnset(n,"application/json"),stringifySafely(t);return t}],transformResponse:[function(t){var n=this.transitional||defaults$7.transitional,o=n&&n.silentJSONParsing,c=n&&n.forcedJSONParsing,d=!o&&this.responseType==="json";if(d||c&&utils$a.isString(t)&&t.length)try{return JSON.parse(t)}catch(g){if(d)throw g.name==="SyntaxError"?AxiosError$1.from(g,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):g}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:requireFormData()},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils$a.forEach(["delete","get","head"],function(t){defaults$7.headers[t]={}});utils$a.forEach(["post","put","patch"],function(t){defaults$7.headers[t]=utils$a.merge(DEFAULT_CONTENT_TYPE)});var defaults_1=defaults$7,utils$9=utils$g,defaults$6=defaults_1,transformData$1=function(t,n,o){var c=this||defaults$6;return utils$9.forEach(o,function(g){t=g.call(c,t,n)}),t},isCancel$1,hasRequiredIsCancel;function requireIsCancel(){return hasRequiredIsCancel||(hasRequiredIsCancel=1,isCancel$1=function(t){return!!(t&&t.__CANCEL__)}),isCancel$1}var utils$8=utils$g,transformData=transformData$1,isCancel=requireIsCancel(),defaults$5=defaults_1,CanceledError=requireCanceledError();function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new CanceledError}var dispatchRequest$1=function(t){throwIfCancellationRequested(t),t.headers=t.headers||{},t.data=transformData.call(t,t.data,t.headers,t.transformRequest),t.headers=utils$8.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),utils$8.forEach(["delete","get","head","post","put","patch","common"],function(c){delete t.headers[c]});var n=t.adapter||defaults$5.adapter;return n(t).then(function(c){return throwIfCancellationRequested(t),c.data=transformData.call(t,c.data,c.headers,t.transformResponse),c},function(c){return isCancel(c)||(throwIfCancellationRequested(t),c&&c.response&&(c.response.data=transformData.call(t,c.response.data,c.response.headers,t.transformResponse))),Promise.reject(c)})},utils$7=utils$g,mergeConfig$2=function(t,n){n=n||{};var o={};function c(w,T){return utils$7.isPlainObject(w)&&utils$7.isPlainObject(T)?utils$7.merge(w,T):utils$7.isPlainObject(T)?utils$7.merge({},T):utils$7.isArray(T)?T.slice():T}function d(w){if(utils$7.isUndefined(n[w])){if(!utils$7.isUndefined(t[w]))return c(void 0,t[w])}else return c(t[w],n[w])}function g(w){if(!utils$7.isUndefined(n[w]))return c(void 0,n[w])}function r(w){if(utils$7.isUndefined(n[w])){if(!utils$7.isUndefined(t[w]))return c(void 0,t[w])}else return c(void 0,n[w])}function v(w){if(w in n)return c(t[w],n[w]);if(w in t)return c(void 0,t[w])}var E={url:g,method:g,data:g,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:v};return utils$7.forEach(Object.keys(t).concat(Object.keys(n)),function(T){var S=E[T]||d,N=S(T);utils$7.isUndefined(N)&&S!==v||(o[T]=N)}),o},VERSION=requireData().version,AxiosError=AxiosError_1,validators$1={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){validators$1[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}});var deprecatedWarnings={};validators$1.transitional=function(t,n,o){function c(d,g){return"[Axios v"+VERSION+"] Transitional option '"+d+"'"+g+(o?". "+o:"")}return function(d,g,r){if(t===!1)throw new AxiosError(c(g," has been removed"+(n?" in "+n:"")),AxiosError.ERR_DEPRECATED);return n&&!deprecatedWarnings[g]&&(deprecatedWarnings[g]=!0,console.warn(c(g," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(d,g,r):!0}};function assertOptions(e,t,n){if(typeof e!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);for(var o=Object.keys(e),c=o.length;c-- >0;){var d=o[c],g=t[d];if(g){var r=e[d],v=r===void 0||g(r,d,e);if(v!==!0)throw new AxiosError("option "+d+" must be "+v,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new AxiosError("Unknown option "+d,AxiosError.ERR_BAD_OPTION)}}var validator$1={assertOptions,validators:validators$1},utils$6=utils$g,buildURL=buildURL$1,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2,buildFullPath=buildFullPath$1,validator=validator$1,validators=validator.validators;function Axios$1(e){this.defaults=e,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=mergeConfig$1(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var o=n.transitional;o!==void 0&&validator.assertOptions(o,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1);var c=[],d=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(n)===!1||(d=d&&N.synchronous,c.unshift(N.fulfilled,N.rejected))});var g=[];this.interceptors.response.forEach(function(N){g.push(N.fulfilled,N.rejected)});var r;if(!d){var v=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(v,c),v=v.concat(g),r=Promise.resolve(n);v.length;)r=r.then(v.shift(),v.shift());return r}for(var E=n;c.length;){var w=c.shift(),T=c.shift();try{E=w(E)}catch(S){T(S);break}}try{r=dispatchRequest(E)}catch(S){return Promise.reject(S)}for(;g.length;)r=r.then(g.shift(),g.shift());return r};Axios$1.prototype.getUri=function(t){t=mergeConfig$1(this.defaults,t);var n=buildFullPath(t.baseURL,t.url);return buildURL(n,t.params,t.paramsSerializer)};utils$6.forEach(["delete","get","head","options"],function(t){Axios$1.prototype[t]=function(n,o){return this.request(mergeConfig$1(o||{},{method:t,url:n,data:(o||{}).data}))}});utils$6.forEach(["post","put","patch"],function(t){function n(o){return function(d,g,r){return this.request(mergeConfig$1(r||{},{method:t,headers:o?{"Content-Type":"multipart/form-data"}:{},url:d,data:g}))}}Axios$1.prototype[t]=n(),Axios$1.prototype[t+"Form"]=n(!0)});var Axios_1=Axios$1,CancelToken_1,hasRequiredCancelToken;function requireCancelToken(){if(hasRequiredCancelToken)return CancelToken_1;hasRequiredCancelToken=1;var e=requireCanceledError();function t(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var o;this.promise=new Promise(function(g){o=g});var c=this;this.promise.then(function(d){if(!!c._listeners){var g,r=c._listeners.length;for(g=0;g<r;g++)c._listeners[g](d);c._listeners=null}}),this.promise.then=function(d){var g,r=new Promise(function(v){c.subscribe(v),g=v}).then(d);return r.cancel=function(){c.unsubscribe(g)},r},n(function(g){c.reason||(c.reason=new e(g),o(c.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(o){if(this.reason){o(this.reason);return}this._listeners?this._listeners.push(o):this._listeners=[o]},t.prototype.unsubscribe=function(o){if(!!this._listeners){var c=this._listeners.indexOf(o);c!==-1&&this._listeners.splice(c,1)}},t.source=function(){var o,c=new t(function(g){o=g});return{token:c,cancel:o}},CancelToken_1=t,CancelToken_1}var spread,hasRequiredSpread;function requireSpread(){return hasRequiredSpread||(hasRequiredSpread=1,spread=function(t){return function(o){return t.apply(null,o)}}),spread}var isAxiosError,hasRequiredIsAxiosError;function requireIsAxiosError(){if(hasRequiredIsAxiosError)return isAxiosError;hasRequiredIsAxiosError=1;var e=utils$g;return isAxiosError=function(n){return e.isObject(n)&&n.isAxiosError===!0},isAxiosError}var utils$5=utils$g,bind$2=bind$4,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults$4=defaults_1;function createInstance(e){var t=new Axios(e),n=bind$2(Axios.prototype.request,t);return utils$5.extend(n,Axios.prototype,t),utils$5.extend(n,t),n.create=function(c){return createInstance(mergeConfig(e,c))},n}var axios$1=createInstance(defaults$4);axios$1.Axios=Axios;axios$1.CanceledError=requireCanceledError();axios$1.CancelToken=requireCancelToken();axios$1.isCancel=requireIsCancel();axios$1.VERSION=requireData().version;axios$1.toFormData=toFormData_1;axios$1.AxiosError=AxiosError_1;axios$1.Cancel=axios$1.CanceledError;axios$1.all=function(t){return Promise.all(t)};axios$1.spread=requireSpread();axios$1.isAxiosError=requireIsAxiosError();axios$2.exports=axios$1;axios$2.exports.default=axios$1;(function(e){e.exports=axios$2.exports})(axios$3);const axios=getDefaultExportFromCjs(axios$3.exports),nodepress=axios.create({baseURL:API_CONFIG.NODEPRESS,withCredentials:!0});nodepress.interceptors.response.use(e=>e.headers["content-type"].includes("json")&&e.data.status!=="success"?Promise.reject(e.data):e.data,e=>{var c,d,g,r,v,E;const t=e.toJSON(),n={...t,config:e.config,code:t.status||((c=e.response)==null?void 0:c.status)||BAD_REQUEST,message:((g=(d=e.response)==null?void 0:d.data)==null?void 0:g.error)||((r=e.response)==null?void 0:r.statusText)||t.message},o={axiosName:t.name,axiosMessage:t.message,npError:n.message,npMessage:((E=(v=e.response)==null?void 0:v.data)==null?void 0:E.message)||"",status:n.code,method:t.config.method,baseURL:t.config.baseURL,url:t.config.url,params:t.config.params,data:t.config.data,headers:t.config.headers};return console.debug("axios error:",o),Promise.reject(n)});const overwrite=e=>(...t)=>nodepress[e](...t),nodepress$1={$:nodepress,request:overwrite("request"),head:overwrite("head"),get:overwrite("get"),post:overwrite("post"),put:overwrite("put"),patch:overwrite("patch"),delete:overwrite("delete"),options:overwrite("options")},tagEnName=e=>/.*[\u4e00-\u9fa5]+.*$/.test(e.name)?e.slug.includes("-")?e.slug:firstUpperCase(e.slug):e.name,useTagStore=defineFetchStore({id:"tag",initData:[],onlyOnce:!0,fetcher:()=>nodepress$1.get("/tag/all").then(e=>e.result),getters:{sorted:e=>{const t=[...e.data];return t.sort((n,o)=>o.articles_count-n.articles_count),t},fullNameTags:e=>{const t=new Map;return e.data.forEach(n=>{t.set(n.name,n),t.set(n.name.toLowerCase(),n),t.set(n.name.toUpperCase(),n),t.set(firstUpperCase(n.name),n)}),t}}}),useCategoryStore=defineFetchStore({id:"category",initData:[],onlyOnce:!0,async fetcher(){return(await nodepress$1.get("/category",{params:{per_page:50}})).result.data}});var OriginState=(e=>(e[e.Original=0]="Original",e[e.Reprint=1]="Reprint",e[e.Hybrid=2]="Hybrid",e))(OriginState||{}),CommentPostID=(e=>(e[e.Guestbook=0]="Guestbook",e))(CommentPostID||{}),CommentParentType=(e=>(e[e.Self=0]="Self",e))(CommentParentType||{}),SortType=(e=>(e[e.Asc=1]="Asc",e[e.Desc=-1]="Desc",e[e.Hottest=2]="Hottest",e))(SortType||{});const NULL=null,UNDEFINED=void 0,isNull=e=>e===NULL,isUndefined=e=>e===UNDEFINED,get=e=>localStorage.getItem(e),set=(e,t)=>localStorage.setItem(e,t),remove$1=e=>localStorage.removeItem(e),setJSON=(e,t)=>set(e,JSON.stringify(t)),getJSON=e=>{const t=get(e);return typeof t=="string"?JSON.parse(t):null},storage={get,set,remove:remove$1,setJSON,getJSON};var UserType=(e=>(e[e.Null=0]="Null",e[e.Local=1]="Local",e[e.Disqus=2]="Disqus",e))(UserType||{});const LOCAL_STORGAE_KEY="identity-state",useIdentityStore=pinia_prod.defineStore("identity",{state:()=>({disqusConfig:null,user:{type:0,localProfile:null,disqusProfile:null},vote:{likedPages:[],likedComments:[],dislikedComments:[]},feedbacks:[]}),getters:{isLikedPage:e=>t=>e.vote.likedPages.includes(t),isLikedComment:e=>t=>e.vote.likedComments.includes(t),isDislikedComment:e=>t=>e.vote.dislikedComments.includes(t),author:e=>{var t,n,o;return e.user.type===1?e.user.localProfile:e.user.type===2?{name:(t=e.user.disqusProfile)==null?void 0:t.name,site:((n=e.user.disqusProfile)==null?void 0:n.url)||((o=e.user.disqusProfile)==null?void 0:o.profileUrl)}:null}},actions:{likeComment(e){this.vote.likedComments.push(e)},dislikeComment(e){this.vote.dislikedComments.push(e)},likePage(e){this.vote.likedPages.push(e)},addFeedback(e){this.feedbacks.push(e)},fromStorage(){try{this.$state=getJSON(LOCAL_STORGAE_KEY)||this.$state}catch{remove$1(LOCAL_STORGAE_KEY)}},initOnClient(){this.fromStorage(),this.$subscribe(()=>setJSON(LOCAL_STORGAE_KEY,this.$state)),window.addEventListener("storage",e=>{e.key===LOCAL_STORGAE_KEY&&this.fromStorage()}),this.$state.user.type===2?this.fetchDisqusUserInfo().catch(()=>{this.user.disqusProfile=null,this.user.type=0}):this.user.disqusProfile=null,this.fetchDisqusConfig()},saveLocalUser(e){this.user.localProfile={...e},this.user.type=1},removeLocalUser(){this.user.localProfile=null,this.user.type=0},fetchDisqusLogout(){return nodepress$1.get("/disqus/oauth-logout").then(()=>{this.user.disqusProfile=null,this.user.type=0})},fetchDisqusUserInfo(){return nodepress$1.get("/disqus/user-info").then(e=>{this.user.disqusProfile=e.result,this.user.type=2})},fetchDisqusConfig(){return nodepress$1.get("/disqus/config").then(e=>{this.disqusConfig=e.result})}}}),COMMENT_API_PATH="/comment",COMMENT_EMPTY_PID=CommentParentType.Self,useCommentStore=pinia_prod.defineStore("comment",{state:()=>({fetching:!1,posting:!1,deleting:!1,comments:[],pagination:null}),getters:{commentTreeList:e=>{const t=e.comments.map(r=>r.id),n=e.comments.filter(r=>r.pid===COMMENT_EMPTY_PID||!t.includes(r.pid)),o=e.comments.filter(r=>r.pid!==COMMENT_EMPTY_PID&&t.includes(r.pid)),c=new Map(e.comments.map(r=>[r.id,r])),d=new Map(n.map(r=>[r.id,{comment:r,children:[]}])),g=r=>{const v=c.get(r);return v?v.pid===COMMENT_EMPTY_PID?v.id:g(v.pid):UNDEFINED};return o.forEach(r=>{const v=g(r.pid);if(v&&d.has(v)){const E=d.get(v);d.set(v,{...E,children:[r,...E.children]})}}),Array.from(d.values())}},actions:{clearList(){this.comments=[],this.pagination=null},fetchList(e={},t=!1){return e={page:1,per_page:50,sort:SortType.Desc,...e},e.page===1&&this.clearList(),this.fetching=!0,nodepress$1.get(COMMENT_API_PATH,{params:e}).then(c=>{this.pagination=c.result.pagination,t?this.comments.push(...c.result.data):this.comments=c.result.data}).finally(()=>{this.fetching=!1})},postComment(e){return this.posting=!0,nodepress$1.post("/disqus/comment",e).then(t=>(this.comments.unshift(t.result),this.pagination&&this.pagination.total++,t.result)).finally(()=>{this.posting=!1})},deleteComment(e){return this.deleting=!0,nodepress$1.delete("/disqus/comment",{data:{comment_id:e}}).then(()=>{const t=this.comments.findIndex(n=>n.id===e);t>-1&&(this.comments.splice(t,1),this.pagination.total--)}).finally(()=>{this.deleting=!1})},postCommentVote(e,t){const n=useIdentityStore();return nodepress$1.post("/vote/comment",{comment_id:e,vote:t,author:n.author}).then(()=>{const o=this.comments.find(c=>c.id===e);o&&(t>0?o.likes++:o.dislikes++)})}}}),HEADER_ELEMENT_ID="A_header",NAV_ELEMENT_ID="A_nav",MAIN_ELEMENT_ID="A_main",MAIN_CONTENT_ELEMENT_ID="A_main",ASIDE_ELEMENT_ID="A_aside",FOOTER_ELEMENT_ID="A_footer",ARTICLE_CONTENT_ELEMENT_ID="A_article_content",ARTICLE_READMORE_ELEMENT_ID="A_article_readmore",ARTICLE_META_ELEMENT_ID="A_article_meta",ARTICLE_SHARE_ELEMENT_ID="A_article_share",ARTICLE_RELATED_ELEMENT_ID="A_article_related",ARTICLE_CONTENT_HEADING_ELEMENT_ID_PREFIX="A_article_content_heading",getArticleContentHeadingElementID=(e,t)=>`${ARTICLE_CONTENT_HEADING_ELEMENT_ID_PREFIX}_${e}_${t}`,COMMENT_ELEMENT_ID="A_comment_warpper",COMMENT_PUBLISHER_ELEMENT_ID="A_comment_publisher",COMMENT_REPLY_PUBLISHER_ELEMENT_ID="A_comment_reply_publisher",COMMENT_FOOTER_ELEMENT_ID="A_comment_footer",COMMENT_ITEM_ELEMENT_ID_PREFIX="A_comment_content_item",getCommentItemElementID=e=>`${COMMENT_ITEM_ELEMENT_ID_PREFIX}_${e}`,ANCHORS=Object.freeze(Object.defineProperty({__proto__:null,HEADER_ELEMENT_ID,NAV_ELEMENT_ID,MAIN_ELEMENT_ID,MAIN_CONTENT_ELEMENT_ID,ASIDE_ELEMENT_ID,FOOTER_ELEMENT_ID,ARTICLE_CONTENT_ELEMENT_ID,ARTICLE_READMORE_ELEMENT_ID,ARTICLE_META_ELEMENT_ID,ARTICLE_SHARE_ELEMENT_ID,ARTICLE_RELATED_ELEMENT_ID,ARTICLE_CONTENT_HEADING_ELEMENT_ID_PREFIX,getArticleContentHeadingElementID,COMMENT_ELEMENT_ID,COMMENT_PUBLISHER_ELEMENT_ID,COMMENT_REPLY_PUBLISHER_ELEMENT_ID,COMMENT_FOOTER_ELEMENT_ID,COMMENT_ITEM_ELEMENT_ID_PREFIX,getCommentItemElementID},Symbol.toStringTag,{value:"Module"}));var deepFreezeEs6={exports:{}};function deepFreeze(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach(function(t){var n=e[t];typeof n=="object"&&!Object.isFrozen(n)&&deepFreeze(n)}),e}deepFreezeEs6.exports=deepFreeze;deepFreezeEs6.exports.default=deepFreeze;class Response$1{constructor(t){t.data===void 0&&(t.data={}),this.data=t.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function escapeHTML(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function inherit$1(e,...t){const n=Object.create(null);for(const o in e)n[o]=e[o];return t.forEach(function(o){for(const c in o)n[c]=o[c]}),n}const SPAN_CLOSE="</span>",emitsWrappingTags=e=>!!e.scope||e.sublanguage&&e.language,scopeToCSSClass=(e,{prefix:t})=>{if(e.includes(".")){const n=e.split(".");return[`${t}${n.shift()}`,...n.map((o,c)=>`${o}${"_".repeat(c+1)}`)].join(" ")}return`${t}${e}`};class HTMLRenderer{constructor(t,n){this.buffer="",this.classPrefix=n.classPrefix,t.walk(this)}addText(t){this.buffer+=escapeHTML(t)}openNode(t){if(!emitsWrappingTags(t))return;let n="";t.sublanguage?n=`language-${t.language}`:n=scopeToCSSClass(t.scope,{prefix:this.classPrefix}),this.span(n)}closeNode(t){!emitsWrappingTags(t)||(this.buffer+=SPAN_CLOSE)}value(){return this.buffer}span(t){this.buffer+=`<span class="${t}">`}}const newNode=(e={})=>{const t={children:[]};return Object.assign(t,e),t};class TokenTree{constructor(){this.rootNode=newNode(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(t){this.top.children.push(t)}openNode(t){const n=newNode({scope:t});this.add(n),this.stack.push(n)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(t){return this.constructor._walk(t,this.rootNode)}static _walk(t,n){return typeof n=="string"?t.addText(n):n.children&&(t.openNode(n),n.children.forEach(o=>this._walk(t,o)),t.closeNode(n)),t}static _collapse(t){typeof t!="string"&&(!t.children||(t.children.every(n=>typeof n=="string")?t.children=[t.children.join("")]:t.children.forEach(n=>{TokenTree._collapse(n)})))}}class TokenTreeEmitter extends TokenTree{constructor(t){super(),this.options=t}addKeyword(t,n){t!==""&&(this.openNode(n),this.addText(t),this.closeNode())}addText(t){t!==""&&this.add(t)}addSublanguage(t,n){const o=t.root;o.sublanguage=!0,o.language=n,this.add(o)}toHTML(){return new HTMLRenderer(this,this.options).value()}finalize(){return!0}}function source(e){return e?typeof e=="string"?e:e.source:null}function lookahead(e){return concat("(?=",e,")")}function anyNumberOfTimes(e){return concat("(?:",e,")*")}function optional(e){return concat("(?:",e,")?")}function concat(...e){return e.map(n=>source(n)).join("")}function stripOptionsFromArgs(e){const t=e[e.length-1];return typeof t=="object"&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function either(...e){const t=stripOptionsFromArgs(e);return"("+(t.capture?"":"?:")+e.map(o=>source(o)).join("|")+")"}function countMatchGroups(e){return new RegExp(e.toString()+"|").exec("").length-1}function startsWith(e,t){const n=e&&e.exec(t);return n&&n.index===0}const BACKREF_RE=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function _rewriteBackreferences(e,{joinWith:t}){let n=0;return e.map(o=>{n+=1;const c=n;let d=source(o),g="";for(;d.length>0;){const r=BACKREF_RE.exec(d);if(!r){g+=d;break}g+=d.substring(0,r.index),d=d.substring(r.index+r[0].length),r[0][0]==="\\"&&r[1]?g+="\\"+String(Number(r[1])+c):(g+=r[0],r[0]==="("&&n++)}return g}).map(o=>`(${o})`).join(t)}const MATCH_NOTHING_RE=/\b\B/,IDENT_RE$2="[a-zA-Z]\\w*",UNDERSCORE_IDENT_RE="[a-zA-Z_]\\w*",NUMBER_RE="\\b\\d+(\\.\\d+)?",C_NUMBER_RE="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",BINARY_NUMBER_RE="\\b(0b[01]+)",RE_STARTERS_RE="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",SHEBANG=(e={})=>{const t=/^#![ ]*\//;return e.binary&&(e.begin=concat(t,/.*\b/,e.binary,/\b.*/)),inherit$1({scope:"meta",begin:t,end:/$/,relevance:0,"on:begin":(n,o)=>{n.index!==0&&o.ignoreMatch()}},e)},BACKSLASH_ESCAPE={begin:"\\\\[\\s\\S]",relevance:0},APOS_STRING_MODE={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[BACKSLASH_ESCAPE]},QUOTE_STRING_MODE={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[BACKSLASH_ESCAPE]},PHRASAL_WORDS_MODE={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},COMMENT=function(e,t,n={}){const o=inherit$1({scope:"comment",begin:e,end:t,contains:[]},n);o.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const c=either("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return o.contains.push({begin:concat(/[ ]+/,"(",c,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),o},C_LINE_COMMENT_MODE=COMMENT("//","$"),C_BLOCK_COMMENT_MODE=COMMENT("/\\*","\\*/"),HASH_COMMENT_MODE=COMMENT("#","$"),NUMBER_MODE={scope:"number",begin:NUMBER_RE,relevance:0},C_NUMBER_MODE={scope:"number",begin:C_NUMBER_RE,relevance:0},BINARY_NUMBER_MODE={scope:"number",begin:BINARY_NUMBER_RE,relevance:0},REGEXP_MODE={begin:/(?=\/[^/\n]*\/)/,contains:[{scope:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[BACKSLASH_ESCAPE]}]}]},TITLE_MODE={scope:"title",begin:IDENT_RE$2,relevance:0},UNDERSCORE_TITLE_MODE={scope:"title",begin:UNDERSCORE_IDENT_RE,relevance:0},METHOD_GUARD={begin:"\\.\\s*"+UNDERSCORE_IDENT_RE,relevance:0},END_SAME_AS_BEGIN=function(e){return Object.assign(e,{"on:begin":(t,n)=>{n.data._beginMatch=t[1]},"on:end":(t,n)=>{n.data._beginMatch!==t[1]&&n.ignoreMatch()}})};var MODES$4=Object.freeze({__proto__:null,MATCH_NOTHING_RE,IDENT_RE:IDENT_RE$2,UNDERSCORE_IDENT_RE,NUMBER_RE,C_NUMBER_RE,BINARY_NUMBER_RE,RE_STARTERS_RE,SHEBANG,BACKSLASH_ESCAPE,APOS_STRING_MODE,QUOTE_STRING_MODE,PHRASAL_WORDS_MODE,COMMENT,C_LINE_COMMENT_MODE,C_BLOCK_COMMENT_MODE,HASH_COMMENT_MODE,NUMBER_MODE,C_NUMBER_MODE,BINARY_NUMBER_MODE,REGEXP_MODE,TITLE_MODE,UNDERSCORE_TITLE_MODE,METHOD_GUARD,END_SAME_AS_BEGIN});function skipIfHasPrecedingDot(e,t){e.input[e.index-1]==="."&&t.ignoreMatch()}function scopeClassName(e,t){e.className!==void 0&&(e.scope=e.className,delete e.className)}function beginKeywords(e,t){!t||!e.beginKeywords||(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=skipIfHasPrecedingDot,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,e.relevance===void 0&&(e.relevance=0))}function compileIllegal(e,t){!Array.isArray(e.illegal)||(e.illegal=either(...e.illegal))}function compileMatch(e,t){if(!!e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function compileRelevance(e,t){e.relevance===void 0&&(e.relevance=1)}const beforeMatchExt=(e,t)=>{if(!e.beforeMatch)return;if(e.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},e);Object.keys(e).forEach(o=>{delete e[o]}),e.keywords=n.keywords,e.begin=concat(n.beforeMatch,lookahead(n.begin)),e.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},e.relevance=0,delete n.beforeMatch},COMMON_KEYWORDS=["of","and","for","in","not","or","if","then","parent","list","value"],DEFAULT_KEYWORD_SCOPE="keyword";function compileKeywords(e,t,n=DEFAULT_KEYWORD_SCOPE){const o=Object.create(null);return typeof e=="string"?c(n,e.split(" ")):Array.isArray(e)?c(n,e):Object.keys(e).forEach(function(d){Object.assign(o,compileKeywords(e[d],t,d))}),o;function c(d,g){t&&(g=g.map(r=>r.toLowerCase())),g.forEach(function(r){const v=r.split("|");o[v[0]]=[d,scoreForKeyword(v[0],v[1])]})}}function scoreForKeyword(e,t){return t?Number(t):commonKeyword(e)?0:1}function commonKeyword(e){return COMMON_KEYWORDS.includes(e.toLowerCase())}const seenDeprecations={},error=e=>{console.error(e)},warn=(e,...t)=>{console.log(`WARN: ${e}`,...t)},deprecated=(e,t)=>{seenDeprecations[`${e}/${t}`]||(console.log(`Deprecated as of ${e}. ${t}`),seenDeprecations[`${e}/${t}`]=!0)},MultiClassError=new Error;function remapScopeNames(e,t,{key:n}){let o=0;const c=e[n],d={},g={};for(let r=1;r<=t.length;r++)g[r+o]=c[r],d[r+o]=!0,o+=countMatchGroups(t[r-1]);e[n]=g,e[n]._emit=d,e[n]._multi=!0}function beginMultiClass(e){if(!!Array.isArray(e.begin)){if(e.skip||e.excludeBegin||e.returnBegin)throw error("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),MultiClassError;if(typeof e.beginScope!="object"||e.beginScope===null)throw error("beginScope must be object"),MultiClassError;remapScopeNames(e,e.begin,{key:"beginScope"}),e.begin=_rewriteBackreferences(e.begin,{joinWith:""})}}function endMultiClass(e){if(!!Array.isArray(e.end)){if(e.skip||e.excludeEnd||e.returnEnd)throw error("skip, excludeEnd, returnEnd not compatible with endScope: {}"),MultiClassError;if(typeof e.endScope!="object"||e.endScope===null)throw error("endScope must be object"),MultiClassError;remapScopeNames(e,e.end,{key:"endScope"}),e.end=_rewriteBackreferences(e.end,{joinWith:""})}}function scopeSugar(e){e.scope&&typeof e.scope=="object"&&e.scope!==null&&(e.beginScope=e.scope,delete e.scope)}function MultiClass(e){scopeSugar(e),typeof e.beginScope=="string"&&(e.beginScope={_wrap:e.beginScope}),typeof e.endScope=="string"&&(e.endScope={_wrap:e.endScope}),beginMultiClass(e),endMultiClass(e)}function compileLanguage(e){function t(g,r){return new RegExp(source(g),"m"+(e.case_insensitive?"i":"")+(e.unicodeRegex?"u":"")+(r?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(r,v){v.position=this.position++,this.matchIndexes[this.matchAt]=v,this.regexes.push([v,r]),this.matchAt+=countMatchGroups(r)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const r=this.regexes.map(v=>v[1]);this.matcherRe=t(_rewriteBackreferences(r,{joinWith:"|"}),!0),this.lastIndex=0}exec(r){this.matcherRe.lastIndex=this.lastIndex;const v=this.matcherRe.exec(r);if(!v)return null;const E=v.findIndex((T,S)=>S>0&&T!==void 0),w=this.matchIndexes[E];return v.splice(0,E),Object.assign(v,w)}}class o{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(r){if(this.multiRegexes[r])return this.multiRegexes[r];const v=new n;return this.rules.slice(r).forEach(([E,w])=>v.addRule(E,w)),v.compile(),this.multiRegexes[r]=v,v}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(r,v){this.rules.push([r,v]),v.type==="begin"&&this.count++}exec(r){const v=this.getMatcher(this.regexIndex);v.lastIndex=this.lastIndex;let E=v.exec(r);if(this.resumingScanAtSamePosition()&&!(E&&E.index===this.lastIndex)){const w=this.getMatcher(0);w.lastIndex=this.lastIndex+1,E=w.exec(r)}return E&&(this.regexIndex+=E.position+1,this.regexIndex===this.count&&this.considerAll()),E}}function c(g){const r=new o;return g.contains.forEach(v=>r.addRule(v.begin,{rule:v,type:"begin"})),g.terminatorEnd&&r.addRule(g.terminatorEnd,{type:"end"}),g.illegal&&r.addRule(g.illegal,{type:"illegal"}),r}function d(g,r){const v=g;if(g.isCompiled)return v;[scopeClassName,compileMatch,MultiClass,beforeMatchExt].forEach(w=>w(g,r)),e.compilerExtensions.forEach(w=>w(g,r)),g.__beforeBegin=null,[beginKeywords,compileIllegal,compileRelevance].forEach(w=>w(g,r)),g.isCompiled=!0;let E=null;return typeof g.keywords=="object"&&g.keywords.$pattern&&(g.keywords=Object.assign({},g.keywords),E=g.keywords.$pattern,delete g.keywords.$pattern),E=E||/\w+/,g.keywords&&(g.keywords=compileKeywords(g.keywords,e.case_insensitive)),v.keywordPatternRe=t(E,!0),r&&(g.begin||(g.begin=/\B|\b/),v.beginRe=t(v.begin),!g.end&&!g.endsWithParent&&(g.end=/\B|\b/),g.end&&(v.endRe=t(v.end)),v.terminatorEnd=source(v.end)||"",g.endsWithParent&&r.terminatorEnd&&(v.terminatorEnd+=(g.end?"|":"")+r.terminatorEnd)),g.illegal&&(v.illegalRe=t(g.illegal)),g.contains||(g.contains=[]),g.contains=[].concat(...g.contains.map(function(w){return expandOrCloneMode(w==="self"?g:w)})),g.contains.forEach(function(w){d(w,v)}),g.starts&&d(g.starts,r),v.matcher=c(v),v}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=inherit$1(e.classNameAliases||{}),d(e)}function dependencyOnParent(e){return e?e.endsWithParent||dependencyOnParent(e.starts):!1}function expandOrCloneMode(e){return e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map(function(t){return inherit$1(e,{variants:null},t)})),e.cachedVariants?e.cachedVariants:dependencyOnParent(e)?inherit$1(e,{starts:e.starts?inherit$1(e.starts):null}):Object.isFrozen(e)?inherit$1(e):e}var version$1="11.6.0";class HTMLInjectionError extends Error{constructor(t,n){super(t),this.name="HTMLInjectionError",this.html=n}}const escape$2=escapeHTML,inherit=inherit$1,NO_MATCH=Symbol("nomatch"),MAX_KEYWORD_HITS=7,HLJS=function(e){const t=Object.create(null),n=Object.create(null),o=[];let c=!0;const d="Could not find the language '{}', did you forget to load/include a language module?",g={disableAutodetect:!0,name:"Plain text",contains:[]};let r={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:TokenTreeEmitter};function v(ge){return r.noHighlightRe.test(ge)}function E(ge){let Me=ge.className+" ";Me+=ge.parentNode?ge.parentNode.className:"";const Ue=r.languageDetectRe.exec(Me);if(Ue){const Ze=ne(Ue[1]);return Ze||(warn(d.replace("{}",Ue[1])),warn("Falling back to no-highlight mode for this block.",ge)),Ze?Ue[1]:"no-highlight"}return Me.split(/\s+/).find(Ze=>v(Ze)||ne(Ze))}function w(ge,Me,Ue){let Ze="",xt="";typeof Me=="object"?(Ze=ge,Ue=Me.ignoreIllegals,xt=Me.language):(deprecated("10.7.0","highlight(lang, code, ...args) has been deprecated."),deprecated("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),xt=ge,Ze=Me),Ue===void 0&&(Ue=!0);const Ut={code:Ze,language:xt};Pe("before:highlight",Ut);const Zt=Ut.result?Ut.result:T(Ut.language,Ut.code,Ue);return Zt.code=Ut.code,Pe("after:highlight",Zt),Zt}function T(ge,Me,Ue,Ze){const xt=Object.create(null);function Ut(Xe,lt){return Xe.keywords[lt]}function Zt(){if(!qe.keywords){rt.addText(Fe);return}let Xe=0;qe.keywordPatternRe.lastIndex=0;let lt=qe.keywordPatternRe.exec(Fe),at="";for(;lt;){at+=Fe.substring(Xe,lt.index);const Ht=Re.case_insensitive?lt[0].toLowerCase():lt[0],Gt=Ut(qe,Ht);if(Gt){const[vn,Un]=Gt;if(rt.addText(at),at="",xt[Ht]=(xt[Ht]||0)+1,xt[Ht]<=MAX_KEYWORD_HITS&&(vt+=Un),vn.startsWith("_"))at+=lt[0];else{const Qn=Re.classNameAliases[vn]||vn;rt.addKeyword(lt[0],Qn)}}else at+=lt[0];Xe=qe.keywordPatternRe.lastIndex,lt=qe.keywordPatternRe.exec(Fe)}at+=Fe.substring(Xe),rt.addText(at)}function en(){if(Fe==="")return;let Xe=null;if(typeof qe.subLanguage=="string"){if(!t[qe.subLanguage]){rt.addText(Fe);return}Xe=T(qe.subLanguage,Fe,!0,Ct[qe.subLanguage]),Ct[qe.subLanguage]=Xe._top}else Xe=N(Fe,qe.subLanguage.length?qe.subLanguage:null);qe.relevance>0&&(vt+=Xe.relevance),rt.addSublanguage(Xe._emitter,Xe.language)}function En(){qe.subLanguage!=null?en():Zt(),Fe=""}function tt(Xe,lt){let at=1;const Ht=lt.length-1;for(;at<=Ht;){if(!Xe._emit[at]){at++;continue}const Gt=Re.classNameAliases[Xe[at]]||Xe[at],vn=lt[at];Gt?rt.addKeyword(vn,Gt):(Fe=vn,Zt(),Fe=""),at++}}function Mt(Xe,lt){return Xe.scope&&typeof Xe.scope=="string"&&rt.openNode(Re.classNameAliases[Xe.scope]||Xe.scope),Xe.beginScope&&(Xe.beginScope._wrap?(rt.addKeyword(Fe,Re.classNameAliases[Xe.beginScope._wrap]||Xe.beginScope._wrap),Fe=""):Xe.beginScope._multi&&(tt(Xe.beginScope,lt),Fe="")),qe=Object.create(Xe,{parent:{value:qe}}),qe}function Tt(Xe,lt,at){let Ht=startsWith(Xe.endRe,at);if(Ht){if(Xe["on:end"]){const Gt=new Response$1(Xe);Xe["on:end"](lt,Gt),Gt.isMatchIgnored&&(Ht=!1)}if(Ht){for(;Xe.endsParent&&Xe.parent;)Xe=Xe.parent;return Xe}}if(Xe.endsWithParent)return Tt(Xe.parent,lt,at)}function Bt(Xe){return qe.matcher.regexIndex===0?(Fe+=Xe[0],1):(At=!0,0)}function un(Xe){const lt=Xe[0],at=Xe.rule,Ht=new Response$1(at),Gt=[at.__beforeBegin,at["on:begin"]];for(const vn of Gt)if(!!vn&&(vn(Xe,Ht),Ht.isMatchIgnored))return Bt(lt);return at.skip?Fe+=lt:(at.excludeBegin&&(Fe+=lt),En(),!at.returnBegin&&!at.excludeBegin&&(Fe=lt)),Mt(at,Xe),at.returnBegin?0:lt.length}function ln(Xe){const lt=Xe[0],at=Me.substring(Xe.index),Ht=Tt(qe,Xe,at);if(!Ht)return NO_MATCH;const Gt=qe;qe.endScope&&qe.endScope._wrap?(En(),rt.addKeyword(lt,qe.endScope._wrap)):qe.endScope&&qe.endScope._multi?(En(),tt(qe.endScope,Xe)):Gt.skip?Fe+=lt:(Gt.returnEnd||Gt.excludeEnd||(Fe+=lt),En(),Gt.excludeEnd&&(Fe=lt));do qe.scope&&rt.closeNode(),!qe.skip&&!qe.subLanguage&&(vt+=qe.relevance),qe=qe.parent;while(qe!==Ht.parent);return Ht.starts&&Mt(Ht.starts,Xe),Gt.returnEnd?0:lt.length}function cn(){const Xe=[];for(let lt=qe;lt!==Re;lt=lt.parent)lt.scope&&Xe.unshift(lt.scope);Xe.forEach(lt=>rt.openNode(lt))}let Yt={};function Te(Xe,lt){const at=lt&&lt[0];if(Fe+=Xe,at==null)return En(),0;if(Yt.type==="begin"&&lt.type==="end"&&Yt.index===lt.index&&at===""){if(Fe+=Me.slice(lt.index,lt.index+1),!c){const Ht=new Error(`0 width match regex (${ge})`);throw Ht.languageName=ge,Ht.badRule=Yt.rule,Ht}return 1}if(Yt=lt,lt.type==="begin")return un(lt);if(lt.type==="illegal"&&!Ue){const Ht=new Error('Illegal lexeme "'+at+'" for mode "'+(qe.scope||"<unnamed>")+'"');throw Ht.mode=qe,Ht}else if(lt.type==="end"){const Ht=ln(lt);if(Ht!==NO_MATCH)return Ht}if(lt.type==="illegal"&&at==="")return 1;if(yt>1e5&&yt>lt.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Fe+=at,at.length}const Re=ne(ge);if(!Re)throw error(d.replace("{}",ge)),new Error('Unknown language: "'+ge+'"');const Qe=compileLanguage(Re);let gt="",qe=Ze||Qe;const Ct={},rt=new r.__emitter(r);cn();let Fe="",vt=0,dt=0,yt=0,At=!1;try{for(qe.matcher.considerAll();;){yt++,At?At=!1:qe.matcher.considerAll(),qe.matcher.lastIndex=dt;const Xe=qe.matcher.exec(Me);if(!Xe)break;const lt=Me.substring(dt,Xe.index),at=Te(lt,Xe);dt=Xe.index+at}return Te(Me.substring(dt)),rt.closeAllNodes(),rt.finalize(),gt=rt.toHTML(),{language:ge,value:gt,relevance:vt,illegal:!1,_emitter:rt,_top:qe}}catch(Xe){if(Xe.message&&Xe.message.includes("Illegal"))return{language:ge,value:escape$2(Me),illegal:!0,relevance:0,_illegalBy:{message:Xe.message,index:dt,context:Me.slice(dt-100,dt+100),mode:Xe.mode,resultSoFar:gt},_emitter:rt};if(c)return{language:ge,value:escape$2(Me),illegal:!1,relevance:0,errorRaised:Xe,_emitter:rt,_top:qe};throw Xe}}function S(ge){const Me={value:escape$2(ge),illegal:!1,relevance:0,_top:g,_emitter:new r.__emitter(r)};return Me._emitter.addText(ge),Me}function N(ge,Me){Me=Me||r.languages||Object.keys(t);const Ue=S(ge),Ze=Me.filter(ne).filter(de).map(En=>T(En,ge,!1));Ze.unshift(Ue);const xt=Ze.sort((En,tt)=>{if(En.relevance!==tt.relevance)return tt.relevance-En.relevance;if(En.language&&tt.language){if(ne(En.language).supersetOf===tt.language)return 1;if(ne(tt.language).supersetOf===En.language)return-1}return 0}),[Ut,Zt]=xt,en=Ut;return en.secondBest=Zt,en}function L(ge,Me,Ue){const Ze=Me&&n[Me]||Ue;ge.classList.add("hljs"),ge.classList.add(`language-${Ze}`)}function P(ge){let Me=null;const Ue=E(ge);if(v(Ue))return;if(Pe("before:highlightElement",{el:ge,language:Ue}),ge.children.length>0&&(r.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(ge)),r.throwUnescapedHTML))throw new HTMLInjectionError("One of your code blocks includes unescaped HTML.",ge.innerHTML);Me=ge;const Ze=Me.textContent,xt=Ue?w(Ze,{language:Ue,ignoreIllegals:!0}):N(Ze);ge.innerHTML=xt.value,L(ge,Ue,xt.language),ge.result={language:xt.language,re:xt.relevance,relevance:xt.relevance},xt.secondBest&&(ge.secondBest={language:xt.secondBest.language,relevance:xt.secondBest.relevance}),Pe("after:highlightElement",{el:ge,result:xt,text:Ze})}function O(ge){r=inherit(r,ge)}const V=()=>{W(),deprecated("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function D(){W(),deprecated("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let U=!1;function W(){if(document.readyState==="loading"){U=!0;return}document.querySelectorAll(r.cssSelector).forEach(P)}function Z(){U&&W()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",Z,!1);function re(ge,Me){let Ue=null;try{Ue=Me(e)}catch(Ze){if(error("Language definition for '{}' could not be registered.".replace("{}",ge)),c)error(Ze);else throw Ze;Ue=g}Ue.name||(Ue.name=ge),t[ge]=Ue,Ue.rawDefinition=Me.bind(null,e),Ue.aliases&&le(Ue.aliases,{languageName:ge})}function ae(ge){delete t[ge];for(const Me of Object.keys(n))n[Me]===ge&&delete n[Me]}function ce(){return Object.keys(t)}function ne(ge){return ge=(ge||"").toLowerCase(),t[ge]||t[n[ge]]}function le(ge,{languageName:Me}){typeof ge=="string"&&(ge=[ge]),ge.forEach(Ue=>{n[Ue.toLowerCase()]=Me})}function de(ge){const Me=ne(ge);return Me&&!Me.disableAutodetect}function ie(ge){ge["before:highlightBlock"]&&!ge["before:highlightElement"]&&(ge["before:highlightElement"]=Me=>{ge["before:highlightBlock"](Object.assign({block:Me.el},Me))}),ge["after:highlightBlock"]&&!ge["after:highlightElement"]&&(ge["after:highlightElement"]=Me=>{ge["after:highlightBlock"](Object.assign({block:Me.el},Me))})}function ve(ge){ie(ge),o.push(ge)}function Pe(ge,Me){const Ue=ge;o.forEach(function(Ze){Ze[Ue]&&Ze[Ue](Me)})}function ct(ge){return deprecated("10.7.0","highlightBlock will be removed entirely in v12.0"),deprecated("10.7.0","Please use highlightElement now."),P(ge)}Object.assign(e,{highlight:w,highlightAuto:N,highlightAll:W,highlightElement:P,highlightBlock:ct,configure:O,initHighlighting:V,initHighlightingOnLoad:D,registerLanguage:re,unregisterLanguage:ae,listLanguages:ce,getLanguage:ne,registerAliases:le,autoDetection:de,inherit,addPlugin:ve}),e.debugMode=function(){c=!1},e.safeMode=function(){c=!0},e.versionString=version$1,e.regex={concat,lookahead,either,optional,anyNumberOfTimes};for(const ge in MODES$4)typeof MODES$4[ge]=="object"&&deepFreezeEs6.exports(MODES$4[ge]);return Object.assign(e,MODES$4),e};var highlight=HLJS({}),core=highlight;highlight.HighlightJS=highlight;highlight.default=highlight;const HighlightJS=core;function go(e){const d={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:d,illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"string",variants:[e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{begin:e.C_NUMBER_RE+"[i]",relevance:1},e.C_NUMBER_MODE]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[e.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:d,illegal:/["']/}]}]}}const MODES$3=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z][A-Za-z0-9_-]*/}}),TAGS$3=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],MEDIA_FEATURES$3=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],PSEUDO_CLASSES$3=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],PSEUDO_ELEMENTS$3=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],ATTRIBUTES$3=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function css$1(e){const t=e.regex,n=MODES$3(e),o={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},c="and or not only",d=/@-?\w[\w]*(-\w+)*/,g="[a-zA-Z-][a-zA-Z0-9_-]*",r=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,o,n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+g,relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+PSEUDO_CLASSES$3.join("|")+")"},{begin:":(:)?("+PSEUDO_ELEMENTS$3.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+ATTRIBUTES$3.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...r,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...r,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:t.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:d},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:c,attribute:MEDIA_FEATURES$3.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...r,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+TAGS$3.join("|")+")\\b"}]}}function sql(e){const t=e.regex,n=e.COMMENT("--","$"),o={className:"string",variants:[{begin:/'/,end:/'/,contains:[{begin:/''/}]}]},c={begin:/"/,end:/"/,contains:[{begin:/""/}]},d=["true","false","unknown"],g=["double precision","large object","with timezone","without timezone"],r=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],v=["add","asc","collation","desc","final","first","last","view"],E=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],w=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],T=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],S=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],N=w,L=[...E,...v].filter(U=>!w.includes(U)),P={className:"variable",begin:/@[a-z0-9]+/},O={className:"operator",begin:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},V={begin:t.concat(/\b/,t.either(...N),/\s*\(/),relevance:0,keywords:{built_in:N}};function D(U,{exceptions:W,when:Z}={}){const re=Z;return W=W||[],U.map(ae=>ae.match(/\|\d+$/)||W.includes(ae)?ae:re(ae)?`${ae}|0`:ae)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:D(L,{when:U=>U.length<3}),literal:d,type:r,built_in:T},contains:[{begin:t.either(...S),relevance:0,keywords:{$pattern:/[\w\.]+/,keyword:L.concat(S),literal:d,type:r}},{className:"type",begin:t.either(...g)},V,P,o,c,e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,n,O]}}function php(e){const t=e.regex,n=/(?![A-Za-z0-9])(?![$])/,o=t.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,n),c=t.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,n),d={scope:"variable",match:"\\$+"+o},g={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},r={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},v=e.inherit(e.APOS_STRING_MODE,{illegal:null}),E=e.inherit(e.QUOTE_STRING_MODE,{illegal:null,contains:e.QUOTE_STRING_MODE.contains.concat(r)}),w=e.END_SAME_AS_BEGIN({begin:/<<<[ \t]*(\w+)\n/,end:/[ \t]*(\w+)\b/,contains:e.QUOTE_STRING_MODE.contains.concat(r)}),T=`[ 	
]`,S={scope:"string",variants:[E,v,w]},N={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},L=["false","null","true"],P=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],O=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],D={keyword:P,literal:(ie=>{const ve=[];return ie.forEach(Pe=>{ve.push(Pe),Pe.toLowerCase()===Pe?ve.push(Pe.toUpperCase()):ve.push(Pe.toLowerCase())}),ve})(L),built_in:O},U=ie=>ie.map(ve=>ve.replace(/\|\d+$/,"")),W={variants:[{match:[/new/,t.concat(T,"+"),t.concat("(?!",U(O).join("\\b|"),"\\b)"),c],scope:{1:"keyword",4:"title.class"}}]},Z=t.concat(o,"\\b(?!\\()"),re={variants:[{match:[t.concat(/::/,t.lookahead(/(?!class\b)/)),Z],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[c,t.concat(/::/,t.lookahead(/(?!class\b)/)),Z],scope:{1:"title.class",3:"variable.constant"}},{match:[c,t.concat("::",t.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[c,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},ae={scope:"attr",match:t.concat(o,t.lookahead(":"),t.lookahead(/(?!::)/))},ce={relevance:0,begin:/\(/,end:/\)/,keywords:D,contains:[ae,d,re,e.C_BLOCK_COMMENT_MODE,S,N,W]},ne={relevance:0,match:[/\b/,t.concat("(?!fn\\b|function\\b|",U(P).join("\\b|"),"|",U(O).join("\\b|"),"\\b)"),o,t.concat(T,"*"),t.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[ce]};ce.contains.push(ne);const le=[ae,re,e.C_BLOCK_COMMENT_MODE,S,N,W],de={begin:t.concat(/#\[\s*/,c),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:L,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:L,keyword:["new","array"]},contains:["self",...le]},...le,{scope:"meta",match:c}]};return{case_insensitive:!1,keywords:D,contains:[de,e.HASH_COMMENT_MODE,e.COMMENT("//","$"),e.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:e.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},g,{scope:"variable.language",match:/\$this\b/},d,ne,re,{match:[/const/,/\s/,o],scope:{1:"keyword",3:"variable.constant"}},W,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},e.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:D,contains:["self",d,re,e.C_BLOCK_COMMENT_MODE,S,N]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[e.inherit(e.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},e.UNDERSCORE_TITLE_MODE]},S,N]}}function xml(e){const t=e.regex,n=t.concat(/[\p{L}_]/u,t.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),o=/[\p{L}0-9._:-]+/u,c={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},d={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},g=e.inherit(d,{begin:/\(/,end:/\)/}),r=e.inherit(e.APOS_STRING_MODE,{className:"string"}),v=e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),E={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:o,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[c]},{begin:/'/,end:/'/,contains:[c]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[d,v,r,g,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[d,g,v,r]}]}]},e.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},c,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[v]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[E],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[E],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:t.concat(/</,t.lookahead(t.concat(n,t.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:E}]},{className:"tag",begin:t.concat(/<\//,t.lookahead(t.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function yaml(e){const t="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",o={className:"attr",variants:[{begin:"\\w[\\w :\\/.-]*:(?=[ 	]|$)"},{begin:'"\\w[\\w :\\/.-]*":(?=[ 	]|$)'},{begin:"'\\w[\\w :\\/.-]*':(?=[ 	]|$)"}]},c={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},d={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[e.BACKSLASH_ESCAPE,c]},g=e.inherit(d,{variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),r="[0-9]{4}(-[0-9][0-9]){0,2}",v="([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?",E="(\\.[0-9]*)?",w="([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?",T={className:"number",begin:"\\b"+r+v+E+w+"\\b"},S={end:",",endsWithParent:!0,excludeEnd:!0,keywords:t,relevance:0},N={begin:/\{/,end:/\}/,contains:[S],illegal:"\\n",relevance:0},L={begin:"\\[",end:"\\]",contains:[S],illegal:"\\n",relevance:0},P=[o,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+e.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+e.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},e.HASH_COMMENT_MODE,{beginKeywords:t,keywords:{literal:t}},T,{className:"number",begin:e.C_NUMBER_RE+"\\b",relevance:0},N,L,d],O=[...P];return O.pop(),O.push(g),S.contains=O,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:P}}function json(e){const t={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},n={match:/[{}[\],:]/,className:"punctuation",relevance:0},o=["true","false","null"],c={scope:"literal",beginKeywords:o.join(" ")};return{name:"JSON",keywords:{literal:o},contains:[t,n,e.QUOTE_STRING_MODE,c,e.C_NUMBER_MODE,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}function bash(e){const t=e.regex,n={},o={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[n]}]};Object.assign(n,{className:"variable",variants:[{begin:t.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},o]});const c={className:"subst",begin:/\$\(/,end:/\)/,contains:[e.BACKSLASH_ESCAPE]},d={begin:/<<-?\s*(?=\w+)/,starts:{contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},g={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,n,c]};c.contains.push(g);const r={className:"",begin:/\\"/},v={className:"string",begin:/'/,end:/'/},E={begin:/\$\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},e.NUMBER_MODE,n]},w=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],T=e.SHEBANG({binary:`(${w.join("|")})`,relevance:10}),S={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[e.inherit(e.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},N=["if","then","else","elif","fi","for","while","in","do","done","case","esac","function"],L=["true","false"],P={match:/(\/[a-z._-]+)+/},O=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],V=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","type","typeset","ulimit","unalias"],D=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],U=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:N,literal:L,built_in:[...O,...V,"set","shopt",...D,...U]},contains:[T,e.SHEBANG(),S,E,e.HASH_COMMENT_MODE,d,P,g,r,v,n]}}const MODES$2=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z][A-Za-z0-9_-]*/}}),TAGS$2=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],MEDIA_FEATURES$2=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],PSEUDO_CLASSES$2=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],PSEUDO_ELEMENTS$2=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],ATTRIBUTES$2=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse(),PSEUDO_SELECTORS=PSEUDO_CLASSES$2.concat(PSEUDO_ELEMENTS$2);function less(e){const t=MODES$2(e),n=PSEUDO_SELECTORS,o="and or not only",c="[\\w-]+",d="("+c+"|@\\{"+c+"\\})",g=[],r=[],v=function(U){return{className:"string",begin:"~?"+U+".*?"+U}},E=function(U,W,Z){return{className:U,begin:W,relevance:Z}},w={$pattern:/[a-z-]+/,keyword:o,attribute:MEDIA_FEATURES$2.join(" ")},T={begin:"\\(",end:"\\)",contains:r,keywords:w,relevance:0};r.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,v("'"),v('"'),t.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},t.HEXCOLOR,T,E("variable","@@?"+c,10),E("variable","@\\{"+c+"\\}"),E("built_in","~?`[^`]*?`"),{className:"attribute",begin:c+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},t.IMPORTANT,{beginKeywords:"and not"},t.FUNCTION_DISPATCH);const S=r.concat({begin:/\{/,end:/\}/,contains:g}),N={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(r)},L={begin:d+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+ATTRIBUTES$2.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:r}}]},P={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:w,returnEnd:!0,contains:r,relevance:0}},O={className:"variable",variants:[{begin:"@"+c+"\\s*:",relevance:15},{begin:"@"+c}],starts:{end:"[;}]",returnEnd:!0,contains:S}},V={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:d,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,N,E("keyword","all\\b"),E("variable","@\\{"+c+"\\}"),{begin:"\\b("+TAGS$2.join("|")+")\\b",className:"selector-tag"},t.CSS_NUMBER_MODE,E("selector-tag",d,0),E("selector-id","#"+d),E("selector-class","\\."+d,0),E("selector-tag","&",0),t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+PSEUDO_CLASSES$2.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+PSEUDO_ELEMENTS$2.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:S},{begin:"!important"},t.FUNCTION_DISPATCH]},D={begin:c+`:(:)?(${n.join("|")})`,returnBegin:!0,contains:[V]};return g.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,P,O,D,L,V,N,t.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:g}}const MODES$1=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z][A-Za-z0-9_-]*/}}),TAGS$1=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],MEDIA_FEATURES$1=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],PSEUDO_CLASSES$1=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],PSEUDO_ELEMENTS$1=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],ATTRIBUTES$1=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function scss(e){const t=MODES$1(e),n=PSEUDO_ELEMENTS$1,o=PSEUDO_CLASSES$1,c="@[a-z-]+",d="and or not only",r={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,t.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+TAGS$1.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+o.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n.join("|")+")"},r,{begin:/\(/,end:/\)/,contains:[t.CSS_NUMBER_MODE]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+ATTRIBUTES$1.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[t.BLOCK_COMMENT,r,t.HEXCOLOR,t.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.IMPORTANT,t.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:c,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:d,attribute:MEDIA_FEATURES$1.join(" ")},contains:[{begin:c,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},r,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.HEXCOLOR,t.CSS_NUMBER_MODE]},t.FUNCTION_DISPATCH]}}function rust(e){const t=e.regex,n={className:"title.function.invoke",relevance:0,begin:t.concat(/\b/,/(?!let\b)/,e.IDENT_RE,t.lookahead(/\s*\(/))},o="([ui](8|16|32|64|128|size)|f(32|64))?",c=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","unsafe","unsized","use","virtual","where","while","yield"],d=["true","false","Some","None","Ok","Err"],g=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],r=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:e.IDENT_RE+"!?",type:r,keyword:c,literal:d,built_in:g},illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.COMMENT("/\\*","\\*/",{contains:["self"]}),e.inherit(e.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'\\?(x\w{2}|u\w{4}|U\w{8}|.)'/}]},{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*/},{className:"number",variants:[{begin:"\\b0b([01_]+)"+o},{begin:"\\b0o([0-7_]+)"+o},{begin:"\\b0x([A-Fa-f0-9_]+)"+o},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+o}],relevance:0},{begin:[/fn/,/\s+/,e.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,e.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,e.UNDERSCORE_IDENT_RE,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,e.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,e.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"title.class"}},{begin:e.IDENT_RE+"::",keywords:{keyword:"Self",built_in:g,type:r}},{className:"punctuation",begin:"->"},n]}}var decimalDigits="[0-9](_*[0-9])*",frac=`\\.(${decimalDigits})`,hexDigits="[0-9a-fA-F](_*[0-9a-fA-F])*",NUMERIC={className:"number",variants:[{begin:`(\\b(${decimalDigits})((${frac})|\\.)?|(${frac}))[eE][+-]?(${decimalDigits})[fFdD]?\\b`},{begin:`\\b(${decimalDigits})((${frac})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${frac})[fFdD]?\\b`},{begin:`\\b(${decimalDigits})[fFdD]\\b`},{begin:`\\b0[xX]((${hexDigits})\\.?|(${hexDigits})?\\.(${hexDigits}))[pP][+-]?(${decimalDigits})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${hexDigits})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function recurRegex(e,t,n){return n===-1?"":e.replace(t,o=>recurRegex(e,t,n-1))}function java(e){const t=e.regex,n="[\xC0-\u02B8a-zA-Z_$][\xC0-\u02B8a-zA-Z_$0-9]*",o=n+recurRegex("(?:<"+n+"~~~(?:\\s*,\\s*"+n+"~~~)*>)?",/~~~/g,2),v={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},E={className:"meta",begin:"@"+n,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},w={className:"params",begin:/\(/,end:/\)/,keywords:v,relevance:0,contains:[e.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:v,illegal:/<\/|#/,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[e.BACKSLASH_ESCAPE]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[t.concat(/(?!else)/,n),/\s+/,n,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,n],className:{1:"keyword",3:"title.class"},contains:[w,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+o+"\\s+)",e.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:v,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:v,relevance:0,contains:[E,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,NUMERIC,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},NUMERIC,E]}}function shell(e){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function nginx(e){const t=e.regex,n={className:"variable",variants:[{begin:/\$\d+/},{begin:/\$\{\w+\}/},{begin:t.concat(/[$@]/,e.UNDERSCORE_IDENT_RE)}]},c={endsWithParent:!0,keywords:{$pattern:/[a-z_]{2,}|\/dev\/poll/,literal:["on","off","yes","no","true","false","none","blocked","debug","info","notice","warn","error","crit","select","break","last","permanent","redirect","kqueue","rtsig","epoll","poll","/dev/poll"]},relevance:0,illegal:"=>",contains:[e.HASH_COMMENT_MODE,{className:"string",contains:[e.BACKSLASH_ESCAPE,n],variants:[{begin:/"/,end:/"/},{begin:/'/,end:/'/}]},{begin:"([a-z]+):/",end:"\\s",endsWithParent:!0,excludeEnd:!0,contains:[n]},{className:"regexp",contains:[e.BACKSLASH_ESCAPE,n],variants:[{begin:"\\s\\^",end:"\\s|\\{|;",returnEnd:!0},{begin:"~\\*?\\s+",end:"\\s|\\{|;",returnEnd:!0},{begin:"\\*(\\.[a-z\\-]+)+"},{begin:"([a-z\\-]+\\.)+\\*"}]},{className:"number",begin:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{className:"number",begin:"\\b\\d+[kKmMgGdshdwy]?\\b",relevance:0},n]};return{name:"Nginx config",aliases:["nginxconf"],contains:[e.HASH_COMMENT_MODE,{beginKeywords:"upstream location",end:/;|\{/,contains:c.contains,keywords:{section:"upstream location"}},{className:"section",begin:t.concat(e.UNDERSCORE_IDENT_RE+t.lookahead(/\s+\{/)),relevance:0},{begin:t.lookahead(e.UNDERSCORE_IDENT_RE+"\\s"),end:";|\\{",contains:[{className:"attribute",begin:e.UNDERSCORE_IDENT_RE,starts:c}],relevance:0}],illegal:"[^\\s\\}\\{]"}}const MODES=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z][A-Za-z0-9_-]*/}}),TAGS=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],MEDIA_FEATURES=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],PSEUDO_CLASSES=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],PSEUDO_ELEMENTS=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],ATTRIBUTES=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function stylus(e){const t=MODES(e),n="and or not only",o={className:"variable",begin:"\\$"+e.IDENT_RE},c=["charset","css","debug","extend","font-face","for","import","include","keyframes","media","mixin","page","warn","while"],d="(?=[.\\s\\n[:,(])";return{name:"Stylus",aliases:["styl"],case_insensitive:!1,keywords:"if else for in",illegal:"("+["\\?","(\\bReturn\\b)","(\\bEnd\\b)","(\\bend\\b)","(\\bdef\\b)",";","#\\s","\\*\\s","===\\s","\\|","%"].join("|")+")",contains:[e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,t.HEXCOLOR,{begin:"\\.[a-zA-Z][a-zA-Z0-9_-]*"+d,className:"selector-class"},{begin:"#[a-zA-Z][a-zA-Z0-9_-]*"+d,className:"selector-id"},{begin:"\\b("+TAGS.join("|")+")"+d,className:"selector-tag"},{className:"selector-pseudo",begin:"&?:("+PSEUDO_CLASSES.join("|")+")"+d},{className:"selector-pseudo",begin:"&?:(:)?("+PSEUDO_ELEMENTS.join("|")+")"+d},t.ATTRIBUTE_SELECTOR_MODE,{className:"keyword",begin:/@media/,starts:{end:/[{;}]/,keywords:{$pattern:/[a-z-]+/,keyword:n,attribute:MEDIA_FEATURES.join(" ")},contains:[t.CSS_NUMBER_MODE]}},{className:"keyword",begin:"@((-(o|moz|ms|webkit)-)?("+c.join("|")+"))\\b"},o,t.CSS_NUMBER_MODE,{className:"function",begin:"^[a-zA-Z][a-zA-Z0-9_-]*\\(.*\\)",illegal:"[\\n]",returnBegin:!0,contains:[{className:"title",begin:"\\b[a-zA-Z][a-zA-Z0-9_-]*"},{className:"params",begin:/\(/,end:/\)/,contains:[t.HEXCOLOR,o,e.APOS_STRING_MODE,t.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE]}]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+ATTRIBUTES.join("|")+")\\b",starts:{end:/;|$/,contains:[t.HEXCOLOR,o,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,t.CSS_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,t.IMPORTANT,t.FUNCTION_DISPATCH],illegal:/\./,relevance:0}},t.FUNCTION_DISPATCH]}}function python(e){const t=e.regex,n=/[\p{XID_Start}_]\p{XID_Continue}*/u,o=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],r={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:o,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},v={className:"meta",begin:/^(>>>|\.\.\.) /},E={className:"subst",begin:/\{/,end:/\}/,keywords:r,illegal:/#/},w={begin:/\{\{/,relevance:0},T={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,v],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,v],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,v,w,E]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,v,w,E]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[e.BACKSLASH_ESCAPE,w,E]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,w,E]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},S="[0-9](_?[0-9])*",N=`(\\b(${S}))?\\.(${S})|\\b(${S})\\.`,L=`\\b|${o.join("|")}`,P={className:"number",relevance:0,variants:[{begin:`(\\b(${S})|(${N}))[eE][+-]?(${S})[jJ]?(?=${L})`},{begin:`(${N})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${L})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${L})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${L})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${L})`},{begin:`\\b(${S})[jJ](?=${L})`}]},O={className:"comment",begin:t.lookahead(/# type:/),end:/$/,keywords:r,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},V={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:r,contains:["self",v,P,T,e.HASH_COMMENT_MODE]}]};return E.contains=[T,P,v],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:r,illegal:/(<\/|->|\?)|=>/,contains:[v,P,{begin:/\bself\b/},{beginKeywords:"if",relevance:0},T,O,e.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[V]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[P,V,T]}]}}const IDENT_RE$1="[A-Za-z$_][0-9A-Za-z$_]*",KEYWORDS$1=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],LITERALS$1=["true","false","null","undefined","NaN","Infinity"],TYPES$1=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],ERROR_TYPES$1=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],BUILT_IN_GLOBALS$1=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],BUILT_IN_VARIABLES$1=["arguments","this","super","console","window","document","localStorage","module","global"],BUILT_INS$1=[].concat(BUILT_IN_GLOBALS$1,TYPES$1,ERROR_TYPES$1);function javascript$1(e){const t=e.regex,n=(Me,{after:Ue})=>{const Ze="</"+Me[0].slice(1);return Me.input.indexOf(Ze,Ue)!==-1},o=IDENT_RE$1,c={begin:"<>",end:"</>"},d=/<[A-Za-z0-9\\._:-]+\s*\/>/,g={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(Me,Ue)=>{const Ze=Me[0].length+Me.index,xt=Me.input[Ze];if(xt==="<"||xt===","){Ue.ignoreMatch();return}xt===">"&&(n(Me,{after:Ze})||Ue.ignoreMatch());let Ut;if((Ut=Me.input.substring(Ze).match(/^\s+extends\s+/))&&Ut.index===0){Ue.ignoreMatch();return}}},r={$pattern:IDENT_RE$1,keyword:KEYWORDS$1,literal:LITERALS$1,built_in:BUILT_INS$1,"variable.language":BUILT_IN_VARIABLES$1},v="[0-9](_?[0-9])*",E=`\\.(${v})`,w="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",T={className:"number",variants:[{begin:`(\\b(${w})((${E})|\\.)?|(${E}))[eE][+-]?(${v})\\b`},{begin:`\\b(${w})\\b((${E})\\b|\\.)?|(${E})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},S={className:"subst",begin:"\\$\\{",end:"\\}",keywords:r,contains:[]},N={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,S],subLanguage:"xml"}},L={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,S],subLanguage:"css"}},P={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,S]},O=e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:o+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),V={className:"comment",variants:[O,e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},D=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,N,L,P,T];S.contains=D.concat({begin:/\{/,end:/\}/,keywords:r,contains:["self"].concat(D)});const U=[].concat(V,S.contains),W=U.concat([{begin:/\(/,end:/\)/,keywords:r,contains:["self"].concat(U)}]),Z={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:r,contains:W},re={variants:[{match:[/class/,/\s+/,o,/\s+/,/extends/,/\s+/,t.concat(o,"(",t.concat(/\./,o),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,o],scope:{1:"keyword",3:"title.class"}}]},ae={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...TYPES$1,...ERROR_TYPES$1]}},ce={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},ne={variants:[{match:[/function/,/\s+/,o,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[Z],illegal:/%/},le={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function de(Me){return t.concat("(?!",Me.join("|"),")")}const ie={match:t.concat(/\b/,de([...BUILT_IN_GLOBALS$1,"super"]),o,t.lookahead(/\(/)),className:"title.function",relevance:0},ve={begin:t.concat(/\./,t.lookahead(t.concat(o,/(?![0-9A-Za-z$_(])/))),end:o,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},Pe={match:[/get|set/,/\s+/,o,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},Z]},ct="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",ge={match:[/const|var|let/,/\s+/,o,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(ct)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[Z]};return{name:"Javascript",aliases:["js","jsx","mjs","cjs"],keywords:r,exports:{PARAMS_CONTAINS:W,CLASS_REFERENCE:ae},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),ce,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,N,L,P,V,T,ae,{className:"attr",begin:o+t.lookahead(":"),relevance:0},ge,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[V,e.REGEXP_MODE,{className:"function",begin:ct,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:r,contains:W}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:c.begin,end:c.end},{match:d},{begin:g.begin,"on:begin":g.isTrulyOpeningTag,end:g.end}],subLanguage:"xml",contains:[{begin:g.begin,end:g.end,skip:!0,contains:["self"]}]}]},ne,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[Z,e.inherit(e.TITLE_MODE,{begin:o,className:"title.function"})]},{match:/\.\.\./,relevance:0},ve,{match:"\\$"+o,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[Z]},ie,le,re,Pe,{match:/\$[(.]/}]}}const IDENT_RE="[A-Za-z$_][0-9A-Za-z$_]*",KEYWORDS=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],LITERALS=["true","false","null","undefined","NaN","Infinity"],TYPES=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],ERROR_TYPES=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],BUILT_IN_GLOBALS=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],BUILT_IN_VARIABLES=["arguments","this","super","console","window","document","localStorage","module","global"],BUILT_INS=[].concat(BUILT_IN_GLOBALS,TYPES,ERROR_TYPES);function javascript(e){const t=e.regex,n=(Me,{after:Ue})=>{const Ze="</"+Me[0].slice(1);return Me.input.indexOf(Ze,Ue)!==-1},o=IDENT_RE,c={begin:"<>",end:"</>"},d=/<[A-Za-z0-9\\._:-]+\s*\/>/,g={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(Me,Ue)=>{const Ze=Me[0].length+Me.index,xt=Me.input[Ze];if(xt==="<"||xt===","){Ue.ignoreMatch();return}xt===">"&&(n(Me,{after:Ze})||Ue.ignoreMatch());let Ut;if((Ut=Me.input.substring(Ze).match(/^\s+extends\s+/))&&Ut.index===0){Ue.ignoreMatch();return}}},r={$pattern:IDENT_RE,keyword:KEYWORDS,literal:LITERALS,built_in:BUILT_INS,"variable.language":BUILT_IN_VARIABLES},v="[0-9](_?[0-9])*",E=`\\.(${v})`,w="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",T={className:"number",variants:[{begin:`(\\b(${w})((${E})|\\.)?|(${E}))[eE][+-]?(${v})\\b`},{begin:`\\b(${w})\\b((${E})\\b|\\.)?|(${E})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},S={className:"subst",begin:"\\$\\{",end:"\\}",keywords:r,contains:[]},N={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,S],subLanguage:"xml"}},L={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,S],subLanguage:"css"}},P={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,S]},O=e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:o+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),V={className:"comment",variants:[O,e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},D=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,N,L,P,T];S.contains=D.concat({begin:/\{/,end:/\}/,keywords:r,contains:["self"].concat(D)});const U=[].concat(V,S.contains),W=U.concat([{begin:/\(/,end:/\)/,keywords:r,contains:["self"].concat(U)}]),Z={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:r,contains:W},re={variants:[{match:[/class/,/\s+/,o,/\s+/,/extends/,/\s+/,t.concat(o,"(",t.concat(/\./,o),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,o],scope:{1:"keyword",3:"title.class"}}]},ae={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...TYPES,...ERROR_TYPES]}},ce={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},ne={variants:[{match:[/function/,/\s+/,o,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[Z],illegal:/%/},le={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function de(Me){return t.concat("(?!",Me.join("|"),")")}const ie={match:t.concat(/\b/,de([...BUILT_IN_GLOBALS,"super"]),o,t.lookahead(/\(/)),className:"title.function",relevance:0},ve={begin:t.concat(/\./,t.lookahead(t.concat(o,/(?![0-9A-Za-z$_(])/))),end:o,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},Pe={match:[/get|set/,/\s+/,o,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},Z]},ct="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",ge={match:[/const|var|let/,/\s+/,o,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(ct)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[Z]};return{name:"Javascript",aliases:["js","jsx","mjs","cjs"],keywords:r,exports:{PARAMS_CONTAINS:W,CLASS_REFERENCE:ae},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),ce,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,N,L,P,V,T,ae,{className:"attr",begin:o+t.lookahead(":"),relevance:0},ge,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[V,e.REGEXP_MODE,{className:"function",begin:ct,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:r,contains:W}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:c.begin,end:c.end},{match:d},{begin:g.begin,"on:begin":g.isTrulyOpeningTag,end:g.end}],subLanguage:"xml",contains:[{begin:g.begin,end:g.end,skip:!0,contains:["self"]}]}]},ne,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[Z,e.inherit(e.TITLE_MODE,{begin:o,className:"title.function"})]},{match:/\.\.\./,relevance:0},ve,{match:"\\$"+o,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[Z]},ie,le,re,Pe,{match:/\$[(.]/}]}}function typescript(e){const t=javascript(e),n=IDENT_RE,o=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],c={beginKeywords:"namespace",end:/\{/,excludeEnd:!0,contains:[t.exports.CLASS_REFERENCE]},d={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:o},contains:[t.exports.CLASS_REFERENCE]},g={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},r=["type","namespace","interface","public","private","protected","implements","declare","abstract","readonly","enum","override"],v={$pattern:IDENT_RE,keyword:KEYWORDS.concat(r),literal:LITERALS,built_in:BUILT_INS.concat(o),"variable.language":BUILT_IN_VARIABLES},E={className:"meta",begin:"@"+n},w=(S,N,L)=>{const P=S.contains.findIndex(O=>O.label===N);if(P===-1)throw new Error("can not find mode to replace");S.contains.splice(P,1,L)};Object.assign(t.keywords,v),t.exports.PARAMS_CONTAINS.push(E),t.contains=t.contains.concat([E,c,d]),w(t,"shebang",e.SHEBANG()),w(t,"use_strict",g);const T=t.contains.find(S=>S.label==="func.def");return T.relevance=0,Object.assign(t,{name:"TypeScript",aliases:["ts","tsx"]}),t}const languages={go,css:css$1,sql,php,xml,yaml,json,bash,less,scss,rust,java,shell,nginx,stylus,python,javascript:javascript$1,typescript};Object.keys(languages).forEach(e=>HighlightJS.registerLanguage(e,languages[e]));var dist={};Object.defineProperty(dist,"__esModule",{value:!0});var sanitizeUrl_1=dist.sanitizeUrl=void 0,invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,urlSchemeRegex=/^([^:]+):/gm,relativeFirstCharacters=[".","/"];function isRelativeUrlWithoutProtocol(e){return relativeFirstCharacters.indexOf(e[0])>-1}function decodeHtmlCharacters(e){return e.replace(htmlEntitiesRegex,function(t,n){return String.fromCharCode(n)})}function sanitizeUrl(e){var t=decodeHtmlCharacters(e||"").replace(ctrlCharactersRegex,"").trim();if(!t)return"about:blank";if(isRelativeUrlWithoutProtocol(t))return t;var n=t.match(urlSchemeRegex);if(!n)return t;var o=n[0];return invalidProtocolRegex.test(o)?"about:blank":t}sanitizeUrl_1=dist.sanitizeUrl=sanitizeUrl;function getDefaults(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let defaults$3=getDefaults();function changeDefaults(e){defaults$3=e}const escapeTest=/[&<>"']/,escapeReplace=/[&<>"']/g,escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g,escapeReplacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},getEscapeReplacement=e=>escapeReplacements[e];function escape$1(e,t){if(t){if(escapeTest.test(e))return e.replace(escapeReplace,getEscapeReplacement)}else if(escapeTestNoEncode.test(e))return e.replace(escapeReplaceNoEncode,getEscapeReplacement);return e}const unescapeTest=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function unescape$1(e){return e.replace(unescapeTest,(t,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const caret=/(^|[^\[])\^/g;function edit(e,t){e=typeof e=="string"?e:e.source,t=t||"";const n={replace:(o,c)=>(c=c.source||c,c=c.replace(caret,"$1"),e=e.replace(o,c),n),getRegex:()=>new RegExp(e,t)};return n}const nonWordAndColonTest=/[^\w:]/g,originIndependentUrl=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function cleanUrl(e,t,n){if(e){let o;try{o=decodeURIComponent(unescape$1(n)).replace(nonWordAndColonTest,"").toLowerCase()}catch{return null}if(o.indexOf("javascript:")===0||o.indexOf("vbscript:")===0||o.indexOf("data:")===0)return null}t&&!originIndependentUrl.test(n)&&(n=resolveUrl(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const baseUrls={},justDomain=/^[^:]+:\/*[^/]*$/,protocol=/^([^:]+:)[\s\S]*$/,domain=/^([^:]+:\/*[^/]*)[\s\S]*$/;function resolveUrl(e,t){baseUrls[" "+e]||(justDomain.test(e)?baseUrls[" "+e]=e+"/":baseUrls[" "+e]=rtrim(e,"/",!0)),e=baseUrls[" "+e];const n=e.indexOf(":")===-1;return t.substring(0,2)==="//"?n?t:e.replace(protocol,"$1")+t:t.charAt(0)==="/"?n?t:e.replace(domain,"$1")+t:e+t}const noopTest={exec:function(){}};function merge$1(e){let t=1,n,o;for(;t<arguments.length;t++){n=arguments[t];for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}function splitCells(e,t){const n=e.replace(/\|/g,(d,g,r)=>{let v=!1,E=g;for(;--E>=0&&r[E]==="\\";)v=!v;return v?"|":" |"}),o=n.split(/ \|/);let c=0;if(o[0].trim()||o.shift(),o.length>0&&!o[o.length-1].trim()&&o.pop(),o.length>t)o.splice(t);else for(;o.length<t;)o.push("");for(;c<o.length;c++)o[c]=o[c].trim().replace(/\\\|/g,"|");return o}function rtrim(e,t,n){const o=e.length;if(o===0)return"";let c=0;for(;c<o;){const d=e.charAt(o-c-1);if(d===t&&!n)c++;else if(d!==t&&n)c++;else break}return e.slice(0,o-c)}function findClosingBracket(e,t){if(e.indexOf(t[1])===-1)return-1;const n=e.length;let o=0,c=0;for(;c<n;c++)if(e[c]==="\\")c++;else if(e[c]===t[0])o++;else if(e[c]===t[1]&&(o--,o<0))return c;return-1}function checkSanitizeDeprecation(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function repeatString(e,t){if(t<1)return"";let n="";for(;t>1;)t&1&&(n+=e),t>>=1,e+=e;return n+e}function outputLink(e,t,n,o){const c=t.href,d=t.title?escape$1(t.title):null,g=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){o.state.inLink=!0;const r={type:"link",raw:n,href:c,title:d,text:g,tokens:o.inlineTokens(g)};return o.state.inLink=!1,r}return{type:"image",raw:n,href:c,title:d,text:escape$1(g)}}function indentCodeCompensation(e,t){const n=e.match(/^(\s+)(?:```)/);if(n===null)return t;const o=n[1];return t.split(`
`).map(c=>{const d=c.match(/^\s+/);if(d===null)return c;const[g]=d;return g.length>=o.length?c.slice(o.length):c}).join(`
`)}class Tokenizer{constructor(t){this.options=t||defaults$3}space(t){const n=this.rules.block.newline.exec(t);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(t){const n=this.rules.block.code.exec(t);if(n){const o=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?o:rtrim(o,`
`)}}}fences(t){const n=this.rules.block.fences.exec(t);if(n){const o=n[0],c=indentCodeCompensation(o,n[3]||"");return{type:"code",raw:o,lang:n[2]?n[2].trim():n[2],text:c}}}heading(t){const n=this.rules.block.heading.exec(t);if(n){let o=n[2].trim();if(/#$/.test(o)){const c=rtrim(o,"#");(this.options.pedantic||!c||/ $/.test(c))&&(o=c.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:o,tokens:this.lexer.inline(o)}}}hr(t){const n=this.rules.block.hr.exec(t);if(n)return{type:"hr",raw:n[0]}}blockquote(t){const n=this.rules.block.blockquote.exec(t);if(n){const o=n[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:n[0],tokens:this.lexer.blockTokens(o,[]),text:o}}}list(t){let n=this.rules.block.list.exec(t);if(n){let o,c,d,g,r,v,E,w,T,S,N,L,P=n[1].trim();const O=P.length>1,V={type:"list",raw:"",ordered:O,start:O?+P.slice(0,-1):"",loose:!1,items:[]};P=O?`\\d{1,9}\\${P.slice(-1)}`:`\\${P}`,this.options.pedantic&&(P=O?P:"[*+-]");const D=new RegExp(`^( {0,3}${P})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;t&&(L=!1,!(!(n=D.exec(t))||this.rules.block.hr.test(t)));){if(o=n[0],t=t.substring(o.length),w=n[2].split(`
`,1)[0],T=t.split(`
`,1)[0],this.options.pedantic?(g=2,N=w.trimLeft()):(g=n[2].search(/[^ ]/),g=g>4?1:g,N=w.slice(g),g+=n[1].length),v=!1,!w&&/^ *$/.test(T)&&(o+=T+`
`,t=t.substring(T.length+1),L=!0),!L){const W=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))`),Z=new RegExp(`^ {0,${Math.min(3,g-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),re=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:\`\`\`|~~~)`),ae=new RegExp(`^ {0,${Math.min(3,g-1)}}#`);for(;t&&(S=t.split(`
`,1)[0],w=S,this.options.pedantic&&(w=w.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(re.test(w)||ae.test(w)||W.test(w)||Z.test(t)));){if(w.search(/[^ ]/)>=g||!w.trim())N+=`
`+w.slice(g);else if(!v)N+=`
`+w;else break;!v&&!w.trim()&&(v=!0),o+=S+`
`,t=t.substring(S.length+1)}}V.loose||(E?V.loose=!0:/\n *\n *$/.test(o)&&(E=!0)),this.options.gfm&&(c=/^\[[ xX]\] /.exec(N),c&&(d=c[0]!=="[ ] ",N=N.replace(/^\[[ xX]\] +/,""))),V.items.push({type:"list_item",raw:o,task:!!c,checked:d,loose:!1,text:N}),V.raw+=o}V.items[V.items.length-1].raw=o.trimRight(),V.items[V.items.length-1].text=N.trimRight(),V.raw=V.raw.trimRight();const U=V.items.length;for(r=0;r<U;r++){this.lexer.state.top=!1,V.items[r].tokens=this.lexer.blockTokens(V.items[r].text,[]);const W=V.items[r].tokens.filter(re=>re.type==="space"),Z=W.every(re=>{const ae=re.raw.split("");let ce=0;for(const ne of ae)if(ne===`
`&&(ce+=1),ce>1)return!0;return!1});!V.loose&&W.length&&Z&&(V.loose=!0,V.items[r].loose=!0)}return V}}html(t){const n=this.rules.block.html.exec(t);if(n){const o={type:"html",raw:n[0],pre:!this.options.sanitizer&&(n[1]==="pre"||n[1]==="script"||n[1]==="style"),text:n[0]};if(this.options.sanitize){const c=this.options.sanitizer?this.options.sanitizer(n[0]):escape$1(n[0]);o.type="paragraph",o.text=c,o.tokens=this.lexer.inline(c)}return o}}def(t){const n=this.rules.block.def.exec(t);if(n){n[3]&&(n[3]=n[3].substring(1,n[3].length-1));const o=n[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:o,raw:n[0],href:n[2],title:n[3]}}}table(t){const n=this.rules.block.table.exec(t);if(n){const o={type:"table",header:splitCells(n[1]).map(c=>({text:c})),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(o.header.length===o.align.length){o.raw=n[0];let c=o.align.length,d,g,r,v;for(d=0;d<c;d++)/^ *-+: *$/.test(o.align[d])?o.align[d]="right":/^ *:-+: *$/.test(o.align[d])?o.align[d]="center":/^ *:-+ *$/.test(o.align[d])?o.align[d]="left":o.align[d]=null;for(c=o.rows.length,d=0;d<c;d++)o.rows[d]=splitCells(o.rows[d],o.header.length).map(E=>({text:E}));for(c=o.header.length,g=0;g<c;g++)o.header[g].tokens=this.lexer.inline(o.header[g].text);for(c=o.rows.length,g=0;g<c;g++)for(v=o.rows[g],r=0;r<v.length;r++)v[r].tokens=this.lexer.inline(v[r].text);return o}}}lheading(t){const n=this.rules.block.lheading.exec(t);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(t){const n=this.rules.block.paragraph.exec(t);if(n){const o=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:o,tokens:this.lexer.inline(o)}}}text(t){const n=this.rules.block.text.exec(t);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(t){const n=this.rules.inline.escape.exec(t);if(n)return{type:"escape",raw:n[0],text:escape$1(n[1])}}tag(t){const n=this.rules.inline.tag.exec(t);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):escape$1(n[0]):n[0]}}link(t){const n=this.rules.inline.link.exec(t);if(n){const o=n[2].trim();if(!this.options.pedantic&&/^</.test(o)){if(!/>$/.test(o))return;const g=rtrim(o.slice(0,-1),"\\");if((o.length-g.length)%2===0)return}else{const g=findClosingBracket(n[2],"()");if(g>-1){const v=(n[0].indexOf("!")===0?5:4)+n[1].length+g;n[2]=n[2].substring(0,g),n[0]=n[0].substring(0,v).trim(),n[3]=""}}let c=n[2],d="";if(this.options.pedantic){const g=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(c);g&&(c=g[1],d=g[3])}else d=n[3]?n[3].slice(1,-1):"";return c=c.trim(),/^</.test(c)&&(this.options.pedantic&&!/>$/.test(o)?c=c.slice(1):c=c.slice(1,-1)),outputLink(n,{href:c&&c.replace(this.rules.inline._escapes,"$1"),title:d&&d.replace(this.rules.inline._escapes,"$1")},n[0],this.lexer)}}reflink(t,n){let o;if((o=this.rules.inline.reflink.exec(t))||(o=this.rules.inline.nolink.exec(t))){let c=(o[2]||o[1]).replace(/\s+/g," ");if(c=n[c.toLowerCase()],!c||!c.href){const d=o[0].charAt(0);return{type:"text",raw:d,text:d}}return outputLink(o,c,o[0],this.lexer)}}emStrong(t,n,o=""){let c=this.rules.inline.emStrong.lDelim.exec(t);if(!c||c[3]&&o.match(/[\p{L}\p{N}]/u))return;const d=c[1]||c[2]||"";if(!d||d&&(o===""||this.rules.inline.punctuation.exec(o))){const g=c[0].length-1;let r,v,E=g,w=0;const T=c[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(T.lastIndex=0,n=n.slice(-1*t.length+g);(c=T.exec(n))!=null;){if(r=c[1]||c[2]||c[3]||c[4]||c[5]||c[6],!r)continue;if(v=r.length,c[3]||c[4]){E+=v;continue}else if((c[5]||c[6])&&g%3&&!((g+v)%3)){w+=v;continue}if(E-=v,E>0)continue;if(v=Math.min(v,v+E+w),Math.min(g,v)%2){const N=t.slice(1,g+c.index+v);return{type:"em",raw:t.slice(0,g+c.index+v+1),text:N,tokens:this.lexer.inlineTokens(N)}}const S=t.slice(2,g+c.index+v-1);return{type:"strong",raw:t.slice(0,g+c.index+v+1),text:S,tokens:this.lexer.inlineTokens(S)}}}}codespan(t){const n=this.rules.inline.code.exec(t);if(n){let o=n[2].replace(/\n/g," ");const c=/[^ ]/.test(o),d=/^ /.test(o)&&/ $/.test(o);return c&&d&&(o=o.substring(1,o.length-1)),o=escape$1(o,!0),{type:"codespan",raw:n[0],text:o}}}br(t){const n=this.rules.inline.br.exec(t);if(n)return{type:"br",raw:n[0]}}del(t){const n=this.rules.inline.del.exec(t);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(t,n){const o=this.rules.inline.autolink.exec(t);if(o){let c,d;return o[2]==="@"?(c=escape$1(this.options.mangle?n(o[1]):o[1]),d="mailto:"+c):(c=escape$1(o[1]),d=c),{type:"link",raw:o[0],text:c,href:d,tokens:[{type:"text",raw:c,text:c}]}}}url(t,n){let o;if(o=this.rules.inline.url.exec(t)){let c,d;if(o[2]==="@")c=escape$1(this.options.mangle?n(o[0]):o[0]),d="mailto:"+c;else{let g;do g=o[0],o[0]=this.rules.inline._backpedal.exec(o[0])[0];while(g!==o[0]);c=escape$1(o[0]),o[1]==="www."?d="http://"+c:d=c}return{type:"link",raw:o[0],text:c,href:d,tokens:[{type:"text",raw:c,text:c}]}}}inlineText(t,n){const o=this.rules.inline.text.exec(t);if(o){let c;return this.lexer.state.inRawBlock?c=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):escape$1(o[0]):o[0]:c=escape$1(this.options.smartypants?n(o[0]):o[0]),{type:"text",raw:o[0],text:c}}}}const block={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:noopTest,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};block._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;block._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;block.def=edit(block.def).replace("label",block._label).replace("title",block._title).getRegex();block.bullet=/(?:[*+-]|\d{1,9}[.)])/;block.listItemStart=edit(/^( *)(bull) */).replace("bull",block.bullet).getRegex();block.list=edit(block.list).replace(/bull/g,block.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+block.def.source+")").getRegex();block._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";block._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;block.html=edit(block.html,"i").replace("comment",block._comment).replace("tag",block._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();block.paragraph=edit(block._paragraph).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.blockquote=edit(block.blockquote).replace("paragraph",block.paragraph).getRegex();block.normal=merge$1({},block);block.gfm=merge$1({},block.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});block.gfm.table=edit(block.gfm.table).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.gfm.paragraph=edit(block._paragraph).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",block.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.pedantic=merge$1({},block.normal,{html:edit(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",block._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:noopTest,paragraph:edit(block.normal._paragraph).replace("hr",block.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",block.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const inline={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:noopTest,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:noopTest,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};inline._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";inline.punctuation=edit(inline.punctuation).replace(/punctuation/g,inline._punctuation).getRegex();inline.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;inline.escapedEmSt=/\\\*|\\_/g;inline._comment=edit(block._comment).replace("(?:-->|$)","-->").getRegex();inline.emStrong.lDelim=edit(inline.emStrong.lDelim).replace(/punct/g,inline._punctuation).getRegex();inline.emStrong.rDelimAst=edit(inline.emStrong.rDelimAst,"g").replace(/punct/g,inline._punctuation).getRegex();inline.emStrong.rDelimUnd=edit(inline.emStrong.rDelimUnd,"g").replace(/punct/g,inline._punctuation).getRegex();inline._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;inline._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;inline._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;inline.autolink=edit(inline.autolink).replace("scheme",inline._scheme).replace("email",inline._email).getRegex();inline._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;inline.tag=edit(inline.tag).replace("comment",inline._comment).replace("attribute",inline._attribute).getRegex();inline._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;inline._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;inline._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;inline.link=edit(inline.link).replace("label",inline._label).replace("href",inline._href).replace("title",inline._title).getRegex();inline.reflink=edit(inline.reflink).replace("label",inline._label).replace("ref",block._label).getRegex();inline.nolink=edit(inline.nolink).replace("ref",block._label).getRegex();inline.reflinkSearch=edit(inline.reflinkSearch,"g").replace("reflink",inline.reflink).replace("nolink",inline.nolink).getRegex();inline.normal=merge$1({},inline);inline.pedantic=merge$1({},inline.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:edit(/^!?\[(label)\]\((.*?)\)/).replace("label",inline._label).getRegex(),reflink:edit(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",inline._label).getRegex()});inline.gfm=merge$1({},inline.normal,{escape:edit(inline.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});inline.gfm.url=edit(inline.gfm.url,"i").replace("email",inline.gfm._extended_email).getRegex();inline.breaks=merge$1({},inline.gfm,{br:edit(inline.br).replace("{2,}","*").getRegex(),text:edit(inline.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function smartypants(e){return e.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function mangle(e){let t="",n,o;const c=e.length;for(n=0;n<c;n++)o=e.charCodeAt(n),Math.random()>.5&&(o="x"+o.toString(16)),t+="&#"+o+";";return t}class Lexer{constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||defaults$3,this.options.tokenizer=this.options.tokenizer||new Tokenizer,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:block.normal,inline:inline.normal};this.options.pedantic?(n.block=block.pedantic,n.inline=inline.pedantic):this.options.gfm&&(n.block=block.gfm,this.options.breaks?n.inline=inline.breaks:n.inline=inline.gfm),this.tokenizer.rules=n}static get rules(){return{block,inline}}static lex(t,n){return new Lexer(n).lex(t)}static lexInline(t,n){return new Lexer(n).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);let n;for(;n=this.inlineQueue.shift();)this.inlineTokens(n.src,n.tokens);return this.tokens}blockTokens(t,n=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(r,v,E)=>v+"    ".repeat(E.length));let o,c,d,g;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(r=>(o=r.call({lexer:this},t,n))?(t=t.substring(o.raw.length),n.push(o),!0):!1))){if(o=this.tokenizer.space(t)){t=t.substring(o.raw.length),o.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(o);continue}if(o=this.tokenizer.code(t)){t=t.substring(o.raw.length),c=n[n.length-1],c&&(c.type==="paragraph"||c.type==="text")?(c.raw+=`
`+o.raw,c.text+=`
`+o.text,this.inlineQueue[this.inlineQueue.length-1].src=c.text):n.push(o);continue}if(o=this.tokenizer.fences(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.heading(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.hr(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.blockquote(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.list(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.html(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.def(t)){t=t.substring(o.raw.length),c=n[n.length-1],c&&(c.type==="paragraph"||c.type==="text")?(c.raw+=`
`+o.raw,c.text+=`
`+o.raw,this.inlineQueue[this.inlineQueue.length-1].src=c.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title});continue}if(o=this.tokenizer.table(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.lheading(t)){t=t.substring(o.raw.length),n.push(o);continue}if(d=t,this.options.extensions&&this.options.extensions.startBlock){let r=1/0;const v=t.slice(1);let E;this.options.extensions.startBlock.forEach(function(w){E=w.call({lexer:this},v),typeof E=="number"&&E>=0&&(r=Math.min(r,E))}),r<1/0&&r>=0&&(d=t.substring(0,r+1))}if(this.state.top&&(o=this.tokenizer.paragraph(d))){c=n[n.length-1],g&&c.type==="paragraph"?(c.raw+=`
`+o.raw,c.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=c.text):n.push(o),g=d.length!==t.length,t=t.substring(o.raw.length);continue}if(o=this.tokenizer.text(t)){t=t.substring(o.raw.length),c=n[n.length-1],c&&c.type==="text"?(c.raw+=`
`+o.raw,c.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=c.text):n.push(o);continue}if(t){const r="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(r);break}else throw new Error(r)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){let o,c,d,g=t,r,v,E;if(this.tokens.links){const w=Object.keys(this.tokens.links);if(w.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(g))!=null;)w.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(g=g.slice(0,r.index)+"["+repeatString("a",r[0].length-2)+"]"+g.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.blockSkip.exec(g))!=null;)g=g.slice(0,r.index)+"["+repeatString("a",r[0].length-2)+"]"+g.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(r=this.tokenizer.rules.inline.escapedEmSt.exec(g))!=null;)g=g.slice(0,r.index)+"++"+g.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;t;)if(v||(E=""),v=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(w=>(o=w.call({lexer:this},t,n))?(t=t.substring(o.raw.length),n.push(o),!0):!1))){if(o=this.tokenizer.escape(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.tag(t)){t=t.substring(o.raw.length),c=n[n.length-1],c&&o.type==="text"&&c.type==="text"?(c.raw+=o.raw,c.text+=o.text):n.push(o);continue}if(o=this.tokenizer.link(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(o.raw.length),c=n[n.length-1],c&&o.type==="text"&&c.type==="text"?(c.raw+=o.raw,c.text+=o.text):n.push(o);continue}if(o=this.tokenizer.emStrong(t,g,E)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.codespan(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.br(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.del(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.autolink(t,mangle)){t=t.substring(o.raw.length),n.push(o);continue}if(!this.state.inLink&&(o=this.tokenizer.url(t,mangle))){t=t.substring(o.raw.length),n.push(o);continue}if(d=t,this.options.extensions&&this.options.extensions.startInline){let w=1/0;const T=t.slice(1);let S;this.options.extensions.startInline.forEach(function(N){S=N.call({lexer:this},T),typeof S=="number"&&S>=0&&(w=Math.min(w,S))}),w<1/0&&w>=0&&(d=t.substring(0,w+1))}if(o=this.tokenizer.inlineText(d,smartypants)){t=t.substring(o.raw.length),o.raw.slice(-1)!=="_"&&(E=o.raw.slice(-1)),v=!0,c=n[n.length-1],c&&c.type==="text"?(c.raw+=o.raw,c.text+=o.text):n.push(o);continue}if(t){const w="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(w);break}else throw new Error(w)}}return n}}class Renderer{constructor(t){this.options=t||defaults$3}code(t,n,o){const c=(n||"").match(/\S*/)[0];if(this.options.highlight){const d=this.options.highlight(t,c);d!=null&&d!==t&&(o=!0,t=d)}return t=t.replace(/\n$/,"")+`
`,c?'<pre><code class="'+this.options.langPrefix+escape$1(c,!0)+'">'+(o?t:escape$1(t,!0))+`</code></pre>
`:"<pre><code>"+(o?t:escape$1(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t){return t}heading(t,n,o,c){if(this.options.headerIds){const d=this.options.headerPrefix+c.slug(o);return`<h${n} id="${d}">${t}</h${n}>
`}return`<h${n}>${t}</h${n}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(t,n,o){const c=n?"ol":"ul",d=n&&o!==1?' start="'+o+'"':"";return"<"+c+d+`>
`+t+"</"+c+`>
`}listitem(t){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(t){return`<p>${t}</p>
`}table(t,n){return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+n+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,n){const o=n.header?"th":"td";return(n.align?`<${o} align="${n.align}">`:`<${o}>`)+t+`</${o}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return`<del>${t}</del>`}link(t,n,o){if(t=cleanUrl(this.options.sanitize,this.options.baseUrl,t),t===null)return o;let c='<a href="'+escape$1(t)+'"';return n&&(c+=' title="'+n+'"'),c+=">"+o+"</a>",c}image(t,n,o){if(t=cleanUrl(this.options.sanitize,this.options.baseUrl,t),t===null)return o;let c=`<img src="${t}" alt="${o}"`;return n&&(c+=` title="${n}"`),c+=this.options.xhtml?"/>":">",c}text(t){return t}}class TextRenderer{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,n,o){return""+o}image(t,n,o){return""+o}br(){return""}}class Slugger{constructor(){this.seen={}}serialize(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(t,n){let o=t,c=0;if(this.seen.hasOwnProperty(o)){c=this.seen[t];do c++,o=t+"-"+c;while(this.seen.hasOwnProperty(o))}return n||(this.seen[t]=c,this.seen[o]=0),o}slug(t,n={}){const o=this.serialize(t);return this.getNextSafeSlug(o,n.dryrun)}}class Parser$4{constructor(t){this.options=t||defaults$3,this.options.renderer=this.options.renderer||new Renderer,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new TextRenderer,this.slugger=new Slugger}static parse(t,n){return new Parser$4(n).parse(t)}static parseInline(t,n){return new Parser$4(n).parseInline(t)}parse(t,n=!0){let o="",c,d,g,r,v,E,w,T,S,N,L,P,O,V,D,U,W,Z,re;const ae=t.length;for(c=0;c<ae;c++){if(N=t[c],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[N.type]&&(re=this.options.extensions.renderers[N.type].call({parser:this},N),re!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(N.type))){o+=re||"";continue}switch(N.type){case"space":continue;case"hr":{o+=this.renderer.hr();continue}case"heading":{o+=this.renderer.heading(this.parseInline(N.tokens),N.depth,unescape$1(this.parseInline(N.tokens,this.textRenderer)),this.slugger);continue}case"code":{o+=this.renderer.code(N.text,N.lang,N.escaped);continue}case"table":{for(T="",w="",r=N.header.length,d=0;d<r;d++)w+=this.renderer.tablecell(this.parseInline(N.header[d].tokens),{header:!0,align:N.align[d]});for(T+=this.renderer.tablerow(w),S="",r=N.rows.length,d=0;d<r;d++){for(E=N.rows[d],w="",v=E.length,g=0;g<v;g++)w+=this.renderer.tablecell(this.parseInline(E[g].tokens),{header:!1,align:N.align[g]});S+=this.renderer.tablerow(w)}o+=this.renderer.table(T,S);continue}case"blockquote":{S=this.parse(N.tokens),o+=this.renderer.blockquote(S);continue}case"list":{for(L=N.ordered,P=N.start,O=N.loose,r=N.items.length,S="",d=0;d<r;d++)D=N.items[d],U=D.checked,W=D.task,V="",D.task&&(Z=this.renderer.checkbox(U),O?D.tokens.length>0&&D.tokens[0].type==="paragraph"?(D.tokens[0].text=Z+" "+D.tokens[0].text,D.tokens[0].tokens&&D.tokens[0].tokens.length>0&&D.tokens[0].tokens[0].type==="text"&&(D.tokens[0].tokens[0].text=Z+" "+D.tokens[0].tokens[0].text)):D.tokens.unshift({type:"text",text:Z}):V+=Z),V+=this.parse(D.tokens,O),S+=this.renderer.listitem(V,W,U);o+=this.renderer.list(S,L,P);continue}case"html":{o+=this.renderer.html(N.text);continue}case"paragraph":{o+=this.renderer.paragraph(this.parseInline(N.tokens));continue}case"text":{for(S=N.tokens?this.parseInline(N.tokens):N.text;c+1<ae&&t[c+1].type==="text";)N=t[++c],S+=`
`+(N.tokens?this.parseInline(N.tokens):N.text);o+=n?this.renderer.paragraph(S):S;continue}default:{const ce='Token with "'+N.type+'" type was not found.';if(this.options.silent){console.error(ce);return}else throw new Error(ce)}}}return o}parseInline(t,n){n=n||this.renderer;let o="",c,d,g;const r=t.length;for(c=0;c<r;c++){if(d=t[c],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[d.type]&&(g=this.options.extensions.renderers[d.type].call({parser:this},d),g!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(d.type))){o+=g||"";continue}switch(d.type){case"escape":{o+=n.text(d.text);break}case"html":{o+=n.html(d.text);break}case"link":{o+=n.link(d.href,d.title,this.parseInline(d.tokens,n));break}case"image":{o+=n.image(d.href,d.title,d.text);break}case"strong":{o+=n.strong(this.parseInline(d.tokens,n));break}case"em":{o+=n.em(this.parseInline(d.tokens,n));break}case"codespan":{o+=n.codespan(d.text);break}case"br":{o+=n.br();break}case"del":{o+=n.del(this.parseInline(d.tokens,n));break}case"text":{o+=n.text(d.text);break}default:{const v='Token with "'+d.type+'" type was not found.';if(this.options.silent){console.error(v);return}else throw new Error(v)}}}return o}}function marked(e,t,n){if(typeof e>"u"||e===null)throw new Error("marked(): input parameter is undefined or null");if(typeof e!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(typeof t=="function"&&(n=t,t=null),t=merge$1({},marked.defaults,t||{}),checkSanitizeDeprecation(t),n){const c=t.highlight;let d;try{d=Lexer.lex(e,t)}catch(v){return n(v)}const g=function(v){let E;if(!v)try{t.walkTokens&&marked.walkTokens(d,t.walkTokens),E=Parser$4.parse(d,t)}catch(w){v=w}return t.highlight=c,v?n(v):n(null,E)};if(!c||c.length<3||(delete t.highlight,!d.length))return g();let r=0;marked.walkTokens(d,function(v){v.type==="code"&&(r++,setTimeout(()=>{c(v.text,v.lang,function(E,w){if(E)return g(E);w!=null&&w!==v.text&&(v.text=w,v.escaped=!0),r--,r===0&&g()})},0))}),r===0&&g();return}function o(c){if(c.message+=`
Please report this to https://github.com/markedjs/marked.`,t.silent)return"<p>An error occurred:</p><pre>"+escape$1(c.message+"",!0)+"</pre>";throw c}try{const c=Lexer.lex(e,t);if(t.walkTokens){if(t.async)return Promise.all(marked.walkTokens(c,t.walkTokens)).then(()=>Parser$4.parse(c,t)).catch(o);marked.walkTokens(c,t.walkTokens)}return Parser$4.parse(c,t)}catch(c){o(c)}}marked.options=marked.setOptions=function(e){return merge$1(marked.defaults,e),changeDefaults(marked.defaults),marked};marked.getDefaults=getDefaults;marked.defaults=defaults$3;marked.use=function(...e){const t=merge$1({},...e),n=marked.defaults.extensions||{renderers:{},childTokens:{}};let o;e.forEach(c=>{if(c.extensions&&(o=!0,c.extensions.forEach(d=>{if(!d.name)throw new Error("extension name required");if(d.renderer){const g=n.renderers?n.renderers[d.name]:null;g?n.renderers[d.name]=function(...r){let v=d.renderer.apply(this,r);return v===!1&&(v=g.apply(this,r)),v}:n.renderers[d.name]=d.renderer}if(d.tokenizer){if(!d.level||d.level!=="block"&&d.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");n[d.level]?n[d.level].unshift(d.tokenizer):n[d.level]=[d.tokenizer],d.start&&(d.level==="block"?n.startBlock?n.startBlock.push(d.start):n.startBlock=[d.start]:d.level==="inline"&&(n.startInline?n.startInline.push(d.start):n.startInline=[d.start]))}d.childTokens&&(n.childTokens[d.name]=d.childTokens)})),c.renderer){const d=marked.defaults.renderer||new Renderer;for(const g in c.renderer){const r=d[g];d[g]=(...v)=>{let E=c.renderer[g].apply(d,v);return E===!1&&(E=r.apply(d,v)),E}}t.renderer=d}if(c.tokenizer){const d=marked.defaults.tokenizer||new Tokenizer;for(const g in c.tokenizer){const r=d[g];d[g]=(...v)=>{let E=c.tokenizer[g].apply(d,v);return E===!1&&(E=r.apply(d,v)),E}}t.tokenizer=d}if(c.walkTokens){const d=marked.defaults.walkTokens;t.walkTokens=function(g){let r=[];return r.push(c.walkTokens.call(this,g)),d&&(r=r.concat(d.call(this,g))),r}}o&&(t.extensions=n),marked.setOptions(t)})};marked.walkTokens=function(e,t){let n=[];for(const o of e)switch(n=n.concat(t.call(marked,o)),o.type){case"table":{for(const c of o.header)n=n.concat(marked.walkTokens(c.tokens,t));for(const c of o.rows)for(const d of c)n=n.concat(marked.walkTokens(d.tokens,t));break}case"list":{n=n.concat(marked.walkTokens(o.items,t));break}default:marked.defaults.extensions&&marked.defaults.extensions.childTokens&&marked.defaults.extensions.childTokens[o.type]?marked.defaults.extensions.childTokens[o.type].forEach(function(c){n=n.concat(marked.walkTokens(o[c],t))}):o.tokens&&(n=n.concat(marked.walkTokens(o.tokens,t)))}return n};marked.parseInline=function(e,t){if(typeof e>"u"||e===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof e!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");t=merge$1({},marked.defaults,t||{}),checkSanitizeDeprecation(t);try{const n=Lexer.lexInline(e,t);return t.walkTokens&&marked.walkTokens(n,t.walkTokens),Parser$4.parseInline(n,t)}catch(n){if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t.silent)return"<p>An error occurred:</p><pre>"+escape$1(n.message+"",!0)+"</pre>";throw n}};marked.Parser=Parser$4;marked.parser=Parser$4.parse;marked.Renderer=Renderer;marked.TextRenderer=TextRenderer;marked.Lexer=Lexer;marked.lexer=Lexer.lex;marked.Tokenizer=Tokenizer;marked.Slugger=Slugger;marked.parse=marked;marked.options;marked.setOptions;marked.use;marked.walkTokens;marked.parseInline;Parser$4.parse;Lexer.lex;const BFF_TUNNEL_PREFIX="/_tunnel",getBFFServerPort=()=>Number(process.env.PORT||3e3);var TunnelModule=(e=>(e.WebFont="webfont",e.MyGoogleMap="my_google_map",e.TwitterUserInfo="twitter_userinfo",e.TwitterTweets="twitter_tweets",e.TwitterCalendar="twitter_calendar",e.YouTubePlaylist="youtube_playlist",e.YouTubeVideoList="youtube_video_list",e.InstagramMedias="instagram_medias",e.InstagramCalendar="instagram_calendar",e.BingWallpaper="bing_wallpaper",e.GitHubSponsors="github_sponsors",e.GitHubContributions="github_contributions",e.NetEaseMusic="netease_music",e.DoubanMovies="douban_movies",e.OpenSeaAssets="opensea_assets",e.OpenSeaCollections="opensea_collections",e.OpenSourceGitHubStatistic="open_source_github_statistic",e.OpenSourceNPMStatistic="open_source_npm_statistic",e))(TunnelModule||{});const VERSE_ZH_FONT_FAMILY="verse-zh-font",VERSE_ZH_FONT_FILENAME="FZZJ-ZZGKT.ttf",verseConfig={transform(e){return e.startsWith("<verse ")?e.replace("<verse ",'<p class="verse" '):e.startsWith("</verse>")?e.replace("</verse>","</p>"):e},style(e){const n=Array.from(e.querySelectorAll("p.verse[zh]")).map(r=>r.innerText).join(""),o=Array.from(new Set(n.split("")));if(!o.length)return null;const c=encodeURIComponent(o.join("")),d=encodeURIComponent(VERSE_ZH_FONT_FILENAME),g=`${BFF_TUNNEL_PREFIX}/${TunnelModule.WebFont}?fontname=${d}&text=${c}`;return`
      @font-face {
        font-family: ${VERSE_ZH_FONT_FAMILY};
        font-weight: 700;
        font-display: swap;
        size-adjust: 136%;
        src: url('${g}');
      }
    `}},CUSTOM_ELEMENTS={verse:verseConfig},CUSTOM_ELEMENT_LIST=Object.values(CUSTOM_ELEMENTS);/*! lozad.js - v1.16.0 - 2020-09-06
* https://github.com/ApoorvSaxena/lozad.js
* Copyright (c) 2020 Apoorv Saxena; Licensed MIT */const isIE=typeof document<"u"&&document.documentMode,defaultConfig={rootMargin:"0px",threshold:0,load(e){if(e.nodeName.toLowerCase()==="picture"){let n=e.querySelector("img"),o=!1;n===null&&(n=document.createElement("img"),o=!0),isIE&&e.getAttribute("data-iesrc")&&(n.src=e.getAttribute("data-iesrc")),e.getAttribute("data-alt")&&(n.alt=e.getAttribute("data-alt")),o&&e.append(n)}if(e.nodeName.toLowerCase()==="video"&&!e.getAttribute("data-src")&&e.children){const n=e.children;let o;for(let c=0;c<=n.length-1;c++)o=n[c].getAttribute("data-src"),o&&(n[c].src=o);e.load()}e.getAttribute("data-poster")&&(e.poster=e.getAttribute("data-poster")),e.getAttribute("data-src")&&(e.src=e.getAttribute("data-src")),e.getAttribute("data-srcset")&&e.setAttribute("srcset",e.getAttribute("data-srcset"));let t=",";if(e.getAttribute("data-background-delimiter")&&(t=e.getAttribute("data-background-delimiter")),e.getAttribute("data-background-image"))e.style.backgroundImage=`url('${e.getAttribute("data-background-image").split(t).join("'),url('")}')`;else if(e.getAttribute("data-background-image-set")){const n=e.getAttribute("data-background-image-set").split(t);let o=n[0].substr(0,n[0].indexOf(" "))||n[0];o=o.indexOf("url(")===-1?`url(${o})`:o,n.length===1?e.style.backgroundImage=o:e.setAttribute("style",(e.getAttribute("style")||"")+`background-image: ${o}; background-image: -webkit-image-set(${n}); background-image: image-set(${n})`)}e.getAttribute("data-toggle-class")&&e.classList.toggle(e.getAttribute("data-toggle-class"))},loaded(){}};function markAsLoaded(e){e.setAttribute("data-loaded",!0)}function preLoad(e){e.getAttribute("data-placeholder-background")&&(e.style.background=e.getAttribute("data-placeholder-background"))}const isLoaded=e=>e.getAttribute("data-loaded")==="true",onIntersection=(e,t)=>(n,o)=>{n.forEach(c=>{(c.intersectionRatio>0||c.isIntersecting)&&(o.unobserve(c.target),isLoaded(c.target)||(e(c.target),markAsLoaded(c.target),t(c.target)))})},getElements=(e,t=document)=>e instanceof Element?[e]:e instanceof NodeList?e:t.querySelectorAll(e);function lozad(e=".lozad",t={}){const{root:n,rootMargin:o,threshold:c,load:d,loaded:g}=Object.assign({},defaultConfig,t);let r;typeof window<"u"&&window.IntersectionObserver&&(r=new IntersectionObserver(onIntersection(d,g),{root:n,rootMargin:o,threshold:c}));const v=getElements(e,n);for(let E=0;E<v.length;E++)preLoad(v[E]);return{observe(){const E=getElements(e,n);for(let w=0;w<E.length;w++)if(!isLoaded(E[w])){if(r){r.observe(E[w]);continue}d(E[w]),markAsLoaded(E[w]),g(E[w])}},triggerLoad(E){isLoaded(E)||(d(E),markAsLoaded(E),g(E))},observer:r}}const LOZAD_CLASS_NAME="lozad",LOADED_CLASS_NAME="loaded",lozadObserve=e=>{const t=lozad(e,{loaded:n=>n.classList.add(LOADED_CLASS_NAME)});return t.observe(),t},useLozad=e=>{const t=ref(),n=ref(null),o=()=>{var r;const d=(e==null?void 0:e.className)||LOZAD_CLASS_NAME,g=((r=e==null?void 0:e.elementor)==null?void 0:r.call(e))||t.value;if(g!=null&&g.querySelectorAll){const v=g.querySelectorAll(`.${d}`);v!=null&&v.length&&(n.value=lozadObserve(v))}},c=()=>{n.value&&(n.value.observer.disconnect(),n.value=null)};return onMounted(()=>{var d;((d=e==null?void 0:e.immediate)==null||d)&&o()}),onBeforeUnmount(()=>{c()}),{element:t,observer:n,observe:o,unobserve:c}},isValidDateParam=e=>{const t=e.split("-");if(t.length!==3||!t.every(d=>Number.isInteger(Number(d))))return!1;const[n,o,c]=t;return!(n.length!==4||o.length!==2||c.length!==2)};var NEWTON_ITERATIONS=4,NEWTON_MIN_SLOPE=.001,SUBDIVISION_PRECISION=1e-7,SUBDIVISION_MAX_ITERATIONS=10,kSplineTableSize=11,kSampleStepSize=1/(kSplineTableSize-1),float32ArraySupported=typeof Float32Array=="function";function A(e,t){return 1-3*t+3*e}function B(e,t){return 3*t-6*e}function C(e){return 3*e}function calcBezier(e,t,n){return((A(t,n)*e+B(t,n))*e+C(t))*e}function getSlope(e,t,n){return 3*A(t,n)*e*e+2*B(t,n)*e+C(t)}function binarySubdivide(e,t,n,o,c){var d,g,r=0;do g=t+(n-t)/2,d=calcBezier(g,o,c)-e,d>0?n=g:t=g;while(Math.abs(d)>SUBDIVISION_PRECISION&&++r<SUBDIVISION_MAX_ITERATIONS);return g}function newtonRaphsonIterate(e,t,n,o){for(var c=0;c<NEWTON_ITERATIONS;++c){var d=getSlope(t,n,o);if(d===0)return t;var g=calcBezier(t,n,o)-e;t-=g/d}return t}function LinearEasing(e){return e}var src$1=function(t,n,o,c){if(!(0<=t&&t<=1&&0<=o&&o<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===n&&o===c)return LinearEasing;for(var d=float32ArraySupported?new Float32Array(kSplineTableSize):new Array(kSplineTableSize),g=0;g<kSplineTableSize;++g)d[g]=calcBezier(g*kSampleStepSize,t,o);function r(v){for(var E=0,w=1,T=kSplineTableSize-1;w!==T&&d[w]<=v;++w)E+=kSampleStepSize;--w;var S=(v-d[w])/(d[w+1]-d[w]),N=E+S*kSampleStepSize,L=getSlope(N,t,o);return L>=NEWTON_MIN_SLOPE?newtonRaphsonIterate(v,N,t,o):L===0?N:binarySubdivide(v,E,E+kSampleStepSize,t,o)}return function(E){return E===0?0:E===1?1:calcBezier(r(E),n,c)}};const Easing={ease:[.25,.1,.25,1],linear:[0,0,1,1],easeIn:[.42,0,1,1],easeOut:[0,0,.58,1],easeInOut:[.42,0,.58,1]},triggerEvents=["scroll","mousedown","wheel","DOMMouseScroll","mousewheel","keyup","touchmove"],listener={on(e,t,n){t.forEach(o=>{e.addEventListener(o,n,{passive:!0})})},off(e,t,n){t.forEach(o=>{e.removeEventListener(o,n)})}},scrollToElement=e=>{var D,U,W;const{target:t,onCancel:n,onDone:o}=e,c=(D=e.offset)!=null?D:0,d=(U=e.duration)!=null?U:500,g=(W=e.easing)!=null?W:Easing.ease,r=typeof t=="string"?document.querySelector(t):t,v=document.body;let E=!1;const w=()=>{E=!0};listener.on(v,triggerEvents,w);const T=()=>{listener.off(v,triggerEvents,w),E?n==null||n():o==null||o()},S=window.pageYOffset,N=S+r.getBoundingClientRect().top,P=(document.body.scrollHeight-N<window.innerHeight?document.body.scrollHeight-window.innerHeight:N)+c-S;if(!P)return;const O=Reflect.apply(src$1,src$1,g);let V;window.requestAnimationFrame(function Z(re){if(E)return T();V||(V=re);const ae=re-V;let ce=Math.min(ae/d,1);ce=O(ce),window.scrollTo(0,S+P*ce),ae<d?window.requestAnimationFrame(Z):T()})},scrollToAnchor=(e,t)=>{const n=document.getElementById(e);n&&scrollToElement({target:n,duration:200,offset:t!=null?t:-74})},scrollToPageTop=()=>{scrollToElement({target:document.body,duration:280,offset:0,easing:Easing.ease})},scrollToNextScreen=()=>{nextTick$1(()=>{scrollToElement({target:document.body,offset:window.scrollY+window.innerHeight*.68,duration:300,easing:Easing.easeIn})})},I18nSymbol=Symbol("i18n"),createI18nStore=e=>{const t=ref(e.default),n=e.languages.map(v=>v.code),o=computed(()=>e.languages.find(v=>v.code===t.value)),c=e.keys.reduce((v,E)=>({...v,[E]:e.languages.reduce((w,T)=>({...w,[T.code]:T.data[E]}),{})}),{}),d=v=>{n.includes(v)&&t.value!==v&&(t.value=v)},g=()=>{const v=n.findIndex(w=>w===t.value),E=v<n.length-1?v+1:0;v!==E&&d(n[E])},r=(v,E,...w)=>{var S;const T=(S=c[v])==null?void 0:S[E!=null?E:t.value];if(!!T)return typeof T=="string"?T:T(...w)};return{language:readonly(t),l:o,set:d,toggle:g,translate:r,t:r}},createI18n=e=>{const t=createI18nStore(e),n=defineComponent({name:"I18n",props:{k:[String,Number,Symbol]},render(){var o,c;if(this.$props.k)return t.t(this.$props.k,null,this.$attrs);{const d=t.language.value;return this.$attrs[d]||((c=(o=this.$slots)[d])==null?void 0:c.call(o))}}});return{...t,install(o){o.config.globalProperties.$i18n=t,o.provide(I18nSymbol,t),o.component(n.name,n)}}},useI18n=()=>inject(I18nSymbol);var _a;const isClient=typeof window<"u";isClient&&((_a=window==null?void 0:window.navigator)==null?void 0:_a.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function resolveUnref(e){return typeof e=="function"?e():lib$2.unref(e)}var PROVIDE_KEY="usehead",HEAD_COUNT_KEY="head:count",HEAD_ATTRS_KEY="data-head-attrs",SELF_CLOSING_TAGS=["meta","link","base"],BODY_TAG_ATTR_NAME="data-meta-body",sortTags=(e,t)=>{const n=o=>{if(o.props.renderPriority)return o.props.renderPriority;switch(o.tag){case"base":return-1;case"meta":return o.props.charset?-2:o.props["http-equiv"]==="content-security-policy"?0:10;default:return 10}};return n(e)-n(t)},tagDedupeKey=e=>{if(!["meta","base","script","link"].includes(e.tag))return!1;const{props:t,tag:n}=e;if(n==="base")return"base";if(n==="link"&&t.rel==="canonical")return"canonical";if(t.charset)return"charset";const o=["key","id","name","property","http-equiv"];for(const c of o){let d;if(typeof t.getAttribute=="function"&&t.hasAttribute(c)?d=t.getAttribute(c):d=t[c],d!==void 0)return`${n}-${c}-${d}`}return!1};function resolveUnrefDeeply(e){const t=resolveUnref(e);return!e||!t?t:Array.isArray(t)?t.map(resolveUnrefDeeply):typeof t=="object"?Object.fromEntries(Object.entries(t).map(([n,o])=>n==="titleTemplate"?[n,unref(o)]:[n,resolveUnrefDeeply(o)])):t}function resolveHeadInput(e){return resolveUnrefDeeply(e)}var createElement=(e,t,n)=>{const o=n.createElement(e);for(const c of Object.keys(t))if(c==="body"&&t.body===!0)o.setAttribute(BODY_TAG_ATTR_NAME,"true");else{const d=t[c];if(c==="renderPriority"||c==="key"||d===!1)continue;c==="children"?o.textContent=d:o.setAttribute(c,d)}return o};function isEqualNode(e,t){if(e instanceof HTMLElement&&t instanceof HTMLElement){const n=t.getAttribute("nonce");if(n&&!e.getAttribute("nonce")){const o=t.cloneNode(!0);return o.setAttribute("nonce",""),o.nonce=n,n===e.nonce&&e.isEqualNode(o)}}return e.isEqualNode(t)}var setAttrs=(e,t)=>{const n=e.getAttribute(HEAD_ATTRS_KEY);if(n)for(const c of n.split(","))c in t||e.removeAttribute(c);const o=[];for(const c in t){const d=t[c];d!=null&&(d===!1?e.removeAttribute(c):e.setAttribute(c,d),o.push(c))}o.length?e.setAttribute(HEAD_ATTRS_KEY,o.join(",")):e.removeAttribute(HEAD_ATTRS_KEY)},updateElements=(e=window.document,t,n)=>{var o,c;const d=e.head,g=e.body;let r=d.querySelector(`meta[name="${HEAD_COUNT_KEY}"]`);const v=g.querySelectorAll(`[${BODY_TAG_ATTR_NAME}]`),E=r?Number(r.getAttribute("content")):0,w=[],T=[];if(v)for(let N=0;N<v.length;N++)v[N]&&((o=v[N].tagName)==null?void 0:o.toLowerCase())===t&&T.push(v[N]);if(r)for(let N=0,L=r.previousElementSibling;N<E;N++,L=(L==null?void 0:L.previousElementSibling)||null)((c=L==null?void 0:L.tagName)==null?void 0:c.toLowerCase())===t&&w.push(L);else r=e.createElement("meta"),r.setAttribute("name",HEAD_COUNT_KEY),r.setAttribute("content","0"),d.append(r);let S=n.map(N=>{var L;return{element:createElement(N.tag,N.props,e),body:(L=N.props.body)!=null?L:!1}});S=S.filter(N=>{for(let L=0;L<w.length;L++){const P=w[L];if(isEqualNode(P,N.element))return w.splice(L,1),!1}for(let L=0;L<T.length;L++){const P=T[L];if(isEqualNode(P,N.element))return T.splice(L,1),!1}return!0}),T.forEach(N=>{var L;return(L=N.parentNode)==null?void 0:L.removeChild(N)}),w.forEach(N=>{var L;return(L=N.parentNode)==null?void 0:L.removeChild(N)}),S.forEach(N=>{N.body===!0?g.insertAdjacentElement("beforeend",N.element):d.insertBefore(N.element,r)}),r.setAttribute("content",`${E-w.length+S.filter(N=>!N.body).length}`)},stringifyAttrName=e=>e.replace(/[\s"'><\/=]/g,"").replace(/[^a-zA-Z0-9_-]/g,""),stringifyAttrValue=e=>e.replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),stringifyAttrs=e=>{const t=[];for(const[n,o]of Object.entries(e)){if(n==="children"||n==="key"||o===!1||o==null)continue;let c=stringifyAttrName(n);o!==!0&&(c+=`="${stringifyAttrValue(String(o))}"`),t.push(c)}return t.length>0?` ${t.join(" ")}`:""},tagToString=e=>{let t=!1;e.props.body&&(t=!0,delete e.props.body),e.props.renderPriority&&delete e.props.renderPriority;const n=stringifyAttrs(e.props);return SELF_CLOSING_TAGS.includes(e.tag)?`<${e.tag}${n}${t?`  ${BODY_TAG_ATTR_NAME}="true"`:""}>`:`<${e.tag}${n}${t?` ${BODY_TAG_ATTR_NAME}="true"`:""}>${e.props.children||""}</${e.tag}>`},renderHeadToString=e=>{const t=[];let n="";const o={},c={},d=[];for(const g of e.headTags.sort(sortTags))g.tag==="title"?n=tagToString(g):g.tag==="htmlAttrs"?Object.assign(o,g.props):g.tag==="bodyAttrs"?Object.assign(c,g.props):g.props.body?d.push(tagToString(g)):t.push(tagToString(g));return t.push(`<meta name="${HEAD_COUNT_KEY}" content="${t.length}">`),{get headTags(){return n+t.join("")},get htmlAttrs(){return stringifyAttrs({...o,[HEAD_ATTRS_KEY]:Object.keys(o).join(",")})},get bodyAttrs(){return stringifyAttrs({...c,[HEAD_ATTRS_KEY]:Object.keys(c).join(",")})},get bodyTags(){return d.join("")}}},injectHead=()=>{const e=inject(PROVIDE_KEY);if(!e)throw new Error("You may forget to apply app.use(head)");return e},acceptFields=["title","meta","link","base","style","script","noscript","htmlAttrs","bodyAttrs"],renderTitleTemplate=(e,t)=>e==null?"":typeof e=="function"?e(t):e.replace("%s",t!=null?t:""),headObjToTags=e=>{const t=[],n=Object.keys(e),o=c=>(c.hid&&(c.key=c.hid,delete c.hid),c.vmid&&(c.key=c.vmid,delete c.vmid),c);for(const c of n)if(e[c]!=null)switch(c){case"title":t.push({tag:c,props:{children:e[c]}});break;case"titleTemplate":break;case"base":t.push({tag:c,props:{key:"default",...e[c]}});break;default:if(acceptFields.includes(c)){const d=e[c];Array.isArray(d)?d.forEach(g=>{const r=o(g);t.push({tag:c,props:r})}):d&&t.push({tag:c,props:o(d)})}break}return t},createHead=e=>{let t=[];const n=new Set,o=[],c=[];e&&t.push(e);const d={install(g){g.config.globalProperties.$head=d,g.provide(PROVIDE_KEY,d)},hookBeforeDomUpdate:o,hookTagsResolved:c,get headTags(){const g=[],r={},v=t.map(resolveHeadInput),E=v.map(T=>T.titleTemplate).reverse().find(T=>T!=null);v.forEach((T,S)=>{headObjToTags(T).forEach((L,P)=>{L._position=S*1e4+P,E&&L.tag==="title"&&(L.props.children=renderTitleTemplate(E,L.props.children));const O=tagDedupeKey(L);O?r[O]=L:g.push(L)})}),g.push(...Object.values(r));const w=g.sort((T,S)=>T._position-S._position);if(d.hookTagsResolved)for(const T in d.hookTagsResolved)d.hookTagsResolved[T](w);return w},addHeadObjs(g){t.push(g)},removeHeadObjs(g){t=t.filter(r=>r!==g)},updateDOM(g=window.document){let r;const v={},E={},w={};for(const S of d.headTags.sort(sortTags)){if(S.tag==="title"){r=S.props.children;continue}if(S.tag==="htmlAttrs"){Object.assign(v,S.props);continue}if(S.tag==="bodyAttrs"){Object.assign(E,S.props);continue}w[S.tag]=w[S.tag]||[],w[S.tag].push(S)}if(d.hookBeforeDomUpdate){for(const S in d.hookBeforeDomUpdate)if(d.hookBeforeDomUpdate[S](w)===!1)return}r!==void 0&&(g.title=r),setAttrs(g.documentElement,v),setAttrs(g.body,E);const T=new Set([...Object.keys(w),...n]);for(const S of T)updateElements(g,S,w[S]||[]);n.clear(),Object.keys(w).forEach(S=>n.add(S))}};return d},IS_BROWSER=typeof window<"u",useHead=e=>{const t=injectHead();t.addHeadObjs(e),IS_BROWSER&&(watchEffect(()=>{t.updateDOM()}),onBeforeUnmount(()=>{t.removeHeadObjs(e),t.updateDOM()}))},ProxyModule=(e=>(e.Default="default",e.Douban="douban",e.NetEaseMusic="netease-music",e.Instagram="instagram",e.YouTube="youtube",e.Disqus="disqus",e))(ProxyModule||{});const getTargetCDNURL=e=>`${API_CONFIG.CDN}${e}`,getTargetProxyURL=(e,t=ProxyModule.Default)=>`${API_CONFIG.PROXY}/${t}/${encodeURIComponent(e)}`,getTargetStaticURL=e=>`${API_CONFIG.STATIC}${e}`,getPageURL=e=>`${API_CONFIG.FE}${e}`,MetaTitlerSymbol=Symbol("meta-titler"),createMeta=e=>{const t=createHead();return{...t,renderToString(){return renderHeadToString(t)},install(n,...o){return n.provide(MetaTitlerSymbol,(e==null?void 0:e.titler)||(c=>c)),n.use(t,...o),t}}};function useMeta(e){const{i18n:t,route:n}=useEnhancer(),o=inject(MetaTitlerSymbol),c=computed(()=>{var W,Z,re,ae;const{title:d,pageTitle:g,keywords:r,description:v,twitterCard:E,ogType:w,ogTitle:T,ogDescription:S,ogImage:N,ogUrl:L,...P}=typeof e=="function"?e():e,O=d!=null?d:g,V=d||(g?o==null?void 0:o(g):""),D=(Z=(W=t.l.value)==null?void 0:W.iso)!=null?Z:"",U=P.meta||[{key:"keywords",name:"keywords",content:r!=null?r:""},{key:"description",name:"description",content:v!=null?v:""},{key:"twitter-card",name:"twitter:card",content:E!=null?E:"summary"},{key:"twitter-new-widgets",name:"twitter:widgets:new-embed-design",content:"on"},{key:"twitter-site",name:"twitter:site",content:`@${IDENTITIES.TWITTER_USER_NAME}`},{key:"twitter-creator",name:"twitter:creator",content:`@${IDENTITIES.TWITTER_USER_NAME}`},{key:"og-type",property:"og:type",content:w!=null?w:"website"},{key:"og-site-name",property:"og:site_name",content:META.title},{key:"og-title",property:"og:title",content:(re=T!=null?T:O)!=null?re:""},{key:"og-description",property:"og:description",content:(ae=S!=null?S:v)!=null?ae:""},{key:"og-url",property:"og:url",content:L!=null?L:getPageURL(n.fullPath)},{key:"og-image",property:"og:image",content:N!=null?N:getTargetCDNURL("/images/og-social-card.jpg")},{key:"og-locale",property:"og:locale",content:D}];return{...P,title:V,meta:U,htmlAttrs:{lang:D,...P.htmlAttrs}}});return useHead(c)}/*! js-cookie v3.0.1 | MIT */function assign$1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)e[o]=n[o]}return e}var defaultConverter={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function init(e,t){function n(c,d,g){if(!(typeof document>"u")){g=assign$1({},t,g),typeof g.expires=="number"&&(g.expires=new Date(Date.now()+g.expires*864e5)),g.expires&&(g.expires=g.expires.toUTCString()),c=encodeURIComponent(c).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var r="";for(var v in g)!g[v]||(r+="; "+v,g[v]!==!0&&(r+="="+g[v].split(";")[0]));return document.cookie=c+"="+e.write(d,c)+r}}function o(c){if(!(typeof document>"u"||arguments.length&&!c)){for(var d=document.cookie?document.cookie.split("; "):[],g={},r=0;r<d.length;r++){var v=d[r].split("="),E=v.slice(1).join("=");try{var w=decodeURIComponent(v[0]);if(g[w]=e.read(E,w),c===w)break}catch{}}return c?g[c]:g}}return Object.create({set:n,get:o,remove:function(c,d){n(c,"",assign$1({},d,{expires:-1}))},withAttributes:function(c){return init(this.converter,assign$1({},this.attributes,c))},withConverter:function(c){return init(assign$1({},this.converter,c),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var api=init(defaultConverter,{path:"/"}),Theme=(e=>(e.Light="light",e.Dark="dark",e))(Theme||{});const DARK_THEME_QUERY="(prefers-color-scheme: dark)",LIGHT_THEME_QUERY="(prefers-color-scheme: light)",THEME_STORAGE_KEY="theme",ThemeSymbol=Symbol("theme"),themes=["light","dark"],createTheme=e=>{const t=ref(e==="dark"?"dark":"light"),n=g=>{themes.includes(g)&&g!==t.value&&(t.value=g,api.set(THEME_STORAGE_KEY,g),storage.set(THEME_STORAGE_KEY,g))},o=()=>n(t.value==="dark"?"light":"dark"),c=()=>{window.matchMedia(DARK_THEME_QUERY).addEventListener("change",({matches:g})=>g&&n("dark")),window.matchMedia(LIGHT_THEME_QUERY).addEventListener("change",({matches:g})=>g&&n("light"))},d={theme:readonly(t),set:n,toggle:o,bindClientSystem:c};return{...d,install(g){g.provide(ThemeSymbol,d)}}},useTheme=()=>inject(ThemeSymbol),_sfc_main$1D=defineComponent({name:"ProgressBar",props:{spin:{type:Boolean,default:!1}},setup(){return{loading:useLoading()}}}),progress_vue_vue_type_style_index_0_scoped_41e28920_lang="",_export_sfc=(e,t)=>{const n=e.__vccOpts||e;for(const[o,c]of t)n[o]=c;return n},_sfc_setup$1D=_sfc_main$1D.setup;_sfc_main$1D.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/composables/loading/progress.vue"),_sfc_setup$1D?_sfc_setup$1D(e,t):void 0};const LoadingSymbol=Symbol("loading"),useLoading=()=>inject(LoadingSymbol),defaultAdConfig={PC_CARROUSEL:!1,PC_NAV:[],PC_ASIDE_SWIPER:[]},useAdminInfoStore=defineFetchStore({id:"adminInfo",initData:null,fetcher:()=>nodepress$1.get("/auth/admin").then(e=>e.result)}),useAppOptionStore=pinia_prod.defineStore({id:"appOption",state:()=>({fetched:!1,fetching:!1,data:null}),getters:{adConfig:e=>{var o;const t=(o=e.data)==null?void 0:o.ad_config,n={...defaultAdConfig,...t?JSON.parse(t):{}};return n.PC_NAV=n.PC_NAV.filter(c=>!c.disabled),n.PC_ASIDE_SWIPER=n.PC_ASIDE_SWIPER.filter(c=>!c.disabled),n}},actions:{fetch(e=!1){return!e&&this.fetched?Promise.resolve():(this.fetching=!0,nodepress$1.get("/option").then(t=>{this.data=t.result,this.fetched=!0}).finally(()=>{this.fetching=!1}))},postSiteLike(){const e=useIdentityStore();return nodepress$1.post("/vote/post",{post_id:CommentPostID.Guestbook,vote:1,author:e.author}).then(t=>{this.data&&(this.data.meta.likes=t.result)})},postFeedback(e){var o,c;const t=useIdentityStore(),n=((o=t.author)==null?void 0:o.name)||null;return nodepress$1.post("/feedback",{...e,tid:0,user_name:n?`${n} (${UserType[t.user.type]})`:null,user_email:((c=t.author)==null?void 0:c.email)||null})}}}),useEnhancer=()=>{const e=useRoute(),t=useRouter(),n=useI18n(),o=useTheme(),c=useGlobalState(),d=useAppOptionStore(),g=computed(()=>d.adConfig),r=computed(()=>c.userAgent.isMobile),v=computed(()=>o.theme.value===Theme.Dark),E=computed(()=>n.language.value===Language.Chinese);return{route:e,router:t,globalState:c,i18n:n,meta:useMeta,theme:o,adConfig:g,isMobile:r,isDarkTheme:v,isZhLang:E,defer:UNDEFINED,popup:UNDEFINED,gtag:UNDEFINED,loading:UNDEFINED}},_sfc_main$1C=defineComponent({name:"MobileFlowLoadmore",props:{loading:{type:Boolean,default:!1},finished:{type:Boolean,default:!1}},emits:["loadmore"],setup(e,t){const n=ref(null),o=ref(null),c=()=>{!e.loading&&!e.finished&&t.emit("loadmore")};return onMounted(()=>{n.value&&(o.value=new IntersectionObserver(d=>{d[0].isIntersecting&&c()},{threshold:.1}),o.value.observe(n.value))}),onBeforeUnmount(()=>{n.value&&o.value&&(o.value.unobserve(n.value),o.value.disconnect())}),{LanguageKey,element:n,emitLoadEvent:c}}}),loadmore_vue_vue_type_style_index_0_scoped_f8d74422_lang="";function _sfc_ssrRender$1C(e,t,n,o,c,d,g,r){const v=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:"loadmore",ref:"element"},o))} data-v-f8d74422>`),e.loading?t('<div class="loading" data-v-f8d74422><div data-v-f8d74422></div><div data-v-f8d74422></div><div data-v-f8d74422></div><div data-v-f8d74422></div></div>'):e.finished?(t('<span class="finised" data-v-f8d74422>'),t(ssrRenderComponent(v,{k:e.LanguageKey.ARTICLE_LIST_NO_MORE},null,n)),t("</span>")):t('<button class="normal" data-v-f8d74422><i class="iconfont icon-loadmore" data-v-f8d74422></i></button>'),t("</div>")}const _sfc_setup$1C=_sfc_main$1C.setup;_sfc_main$1C.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/flow/mobile/loadmore.vue"),_sfc_setup$1C?_sfc_setup$1C(e,t):void 0};const Loadmore=_export_sfc(_sfc_main$1C,[["ssrRender",_sfc_ssrRender$1C],["__scopeId","data-v-f8d74422"]]),WebPArgs="format,webp/",getArticleBannerThumbnailURL=(e,t)=>{if(!e)return getTargetCDNURL("/images/thumbnail/carrousel.jpg");const n=1190,o=420;return`${e}?image_process=${t?WebPArgs:""}quality,q_88/resize,w_${n},h_${o}/crop,mid,w_${n},h_${o}/watermark,text_U3VybW9uLm1l,type_bm90b3NhbnM,color_ffffff,size_31,g_sw,t_26,x_30,y_18`},getMobileArticleListThumbnailURL=(e,t=!1)=>{if(!e)return"";const n=700,o=247;return`${e}?image_process=${t?WebPArgs:""}quality,q_82/resize,w_${n},h_${o}/crop,mid,w_${n},h_${o}/watermark,text_U3VybW9uLm1l,type_bm90b3NhbnM,color_ffffff,size_28,g_sw,t_26,x_22,y_18`},getArticleListThumbnailURL=(e,t)=>{if(!e)return"";const n=350,o=238;return`${e}?image_process=${t?WebPArgs:""}quality,q_80/resize,w_${n},h_${o}/crop,mid,w_${n},h_${o}`},isOriginalType=e=>isNull(e)||isUndefined(null)||e===OriginState.Original,isHybridType=e=>e===OriginState.Hybrid,isReprintType=e=>e===OriginState.Reprint,getExtendsObject=e=>e!=null&&e.length?e.reduce((t,n)=>({...t,[n.name]:n.value}),{}):{},getExtendValue=(e,t)=>e.length?getExtendsObject(e)[t]:UNDEFINED,_sfc_main$1B=defineComponent({name:"FlowArticleListItem",props:{article:{type:Object,required:!0}},setup(e){const{router:t,globalState:n}=useEnhancer(),o=useIdentityStore(),c=computed(()=>o.isLikedPage(e.article.id)),d=isHybridType(e.article.origin),g=isReprintType(e.article.origin),r=isOriginalType(e.article.origin);return{LanguageKey,isLiked:c,isHybrid:d,isReprint:g,isOriginal:r,numberSplit,getThumbnailURL:w=>getMobileArticleListThumbnailURL(w,n.imageExt.value.isWebP),getArticleDetailRoute,handleClick:()=>{t.push(getArticleDetailRoute(e.article.id))}}}}),item_vue_vue_type_style_index_0_scoped_ca6df77d_lang="";function _sfc_ssrRender$1B(e,t,n,o,c,d,g,r){const v=resolveComponent("i18n"),E=resolveComponent("router-link"),w=resolveComponent("udate");t(`<div${ssrRenderAttrs(mergeProps({class:"article-item"},o))} data-v-ca6df77d><div class="thumbnail" data-v-ca6df77d><span class="${ssrRenderClass([{original:e.isOriginal,reprint:e.isReprint,hybrid:e.isHybrid},"oirigin"])}" data-v-ca6df77d>`),e.isOriginal?t(ssrRenderComponent(v,{k:e.LanguageKey.ORIGIN_ORIGINAL},null,n)):e.isReprint?t(ssrRenderComponent(v,{k:e.LanguageKey.ORIGIN_REPRINT},null,n)):e.isHybrid?t(ssrRenderComponent(v,{k:e.LanguageKey.ORIGIN_HYBRID},null,n)):t("<!---->"),t(`</span><div class="image" style="${ssrRenderStyle({backgroundImage:`url(${e.getThumbnailURL(e.article.thumb)})`})}"${ssrRenderAttr("alt",e.article.title)}${ssrRenderAttr("title",e.article.title)} data-v-ca6df77d></div></div><div class="content" data-v-ca6df77d><div class="body" data-v-ca6df77d><h4 class="title" data-v-ca6df77d>`),t(ssrRenderComponent(E,{class:"link",to:e.getArticleDetailRoute(e.article.id),title:e.article.title},{default:withCtx((T,S,N,L)=>{if(S)S(`${ssrInterpolate(e.article.title)}`);else return[createTextVNode(toDisplayString(e.article.title),1)]}),_:1},n)),t(`</h4><p class="description" style="${ssrRenderStyle({"-webkit-box-orient":"vertical"})}" data-v-ca6df77d>${e.article.description}</p></div><div class="meta" data-v-ca6df77d><span class="date" data-v-ca6df77d><i class="iconfont icon-clock" data-v-ca6df77d></i>`),t(ssrRenderComponent(w,{to:"ago",date:e.article.create_at},null,n)),t(`</span><span class="views" data-v-ca6df77d><i class="iconfont icon-eye" data-v-ca6df77d></i><span data-v-ca6df77d>${ssrInterpolate(e.numberSplit(e.article.meta.views))}</span></span><span class="comments" data-v-ca6df77d><i class="iconfont icon-comment" data-v-ca6df77d></i><span data-v-ca6df77d>${ssrInterpolate(e.article.meta.comments)}</span></span><span class="likes" data-v-ca6df77d><i class="${ssrRenderClass([{liked:e.isLiked},"iconfont icon-like"])}" data-v-ca6df77d></i><span data-v-ca6df77d>${ssrInterpolate(e.article.meta.likes)}</span></span></div></div></div>`)}const _sfc_setup$1B=_sfc_main$1B.setup;_sfc_main$1B.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/flow/mobile/item.vue"),_sfc_setup$1B?_sfc_setup$1B(e,t):void 0};const ListItem$1=_export_sfc(_sfc_main$1B,[["ssrRender",_sfc_ssrRender$1B],["__scopeId","data-v-ca6df77d"]]),_sfc_main$1A=defineComponent({name:"MobileFlowArticleList",components:{ListItem:ListItem$1,Loadmore},props:{tagSlug:{type:String,required:!1},categorySlug:{type:String,required:!1},searchKeyword:{type:String,required:!1},date:{type:String,required:!1}},setup(e){const{meta:t,i18n:n}=useEnhancer(),o=useAppOptionStore(),c=useTagStore(),d=useCategoryStore(),g=useArticleListStore(),r=computed(()=>e.categorySlug?d.data.find(N=>N.slug===e.categorySlug):null),v=computed(()=>e.tagSlug?c.data.find(N=>N.slug===e.tagSlug):null),E=computed(()=>g.list.data),w=computed(()=>{const N=g.list.pagination;return N?N.current_page<N.total_page:!1});t(()=>{var L,P;const N=Object.values(e).filter(Boolean).map(O=>firstUpperCase(O));return N.length?{pageTitle:N.join(" | ")}:{title:`${META.title} - ${n.t(LanguageKey.APP_SLOGAN)}`,description:(L=o.data)==null?void 0:L.description,keywords:(P=o.data)==null?void 0:P.keywords.join(","),ogType:"blog"}});const T=async(N={})=>{await g.fetchList({category_slug:e.categorySlug,tag_slug:e.tagSlug,date:e.date,keyword:e.searchKeyword,...N})},S=async()=>{await T({page:g.list.pagination.current_page+1})};return onBeforeMount(()=>{watch(()=>e,()=>T(),{flush:"post",deep:!0})}),useUniversalFetch(()=>T()),{LanguageKey,tagEnName,tag:v,category:r,articles:E,articleListStore:g,hasMoreArticles:w,loadmoreArticles:S,firstUpperCase}}}),index_vue_vue_type_style_index_0_scoped_b5f724c3_lang="";function _sfc_ssrRender$1A(e,t,n,o,c,d,g,r){const v=resolveComponent("i18n"),E=resolveComponent("router-link"),w=resolveComponent("placeholder"),T=resolveComponent("skeleton-base"),S=resolveComponent("skeleton-line"),N=resolveComponent("empty"),L=resolveComponent("list-item"),P=resolveComponent("loadmore");t(`<div${ssrRenderAttrs(mergeProps({class:"articles"},o))} data-v-b5f724c3>`),e.tagSlug||e.categorySlug||e.date||e.searchKeyword?(t('<div class="header" data-v-b5f724c3><div class="content" data-v-b5f724c3>'),e.categorySlug?(t("<!--[-->"),e.category?t(ssrRenderComponent(v,null,{zh:withCtx((O,V,D,U)=>{if(V)V(`\u5206\u7C7B \u201C${ssrInterpolate(e.category.name)}\u201D \u7684\u8FC7\u6EE4\u7ED3\u679C`);else return[createTextVNode("\u5206\u7C7B \u201C"+toDisplayString(e.category.name)+"\u201D \u7684\u8FC7\u6EE4\u7ED3\u679C",1)]}),en:withCtx((O,V,D,U)=>{if(V)V(`Category &quot;${ssrInterpolate(e.firstUpperCase(e.category.slug))}&quot; &#39;s result`);else return[createTextVNode('Category "'+toDisplayString(e.firstUpperCase(e.category.slug))+`" 's result`,1)]}),_:1},n)):t(`<span data-v-b5f724c3>${ssrInterpolate(e.categorySlug)}</span>`),t("<!--]-->")):t("<!---->"),e.tagSlug?(t("<!--[-->"),e.tag?t(ssrRenderComponent(v,null,{zh:withCtx((O,V,D,U)=>{if(V)V(`\u6807\u7B7E \u201C${ssrInterpolate(e.tag.name)}\u201D \u7684\u8FC7\u6EE4\u7ED3\u679C`);else return[createTextVNode("\u6807\u7B7E \u201C"+toDisplayString(e.tag.name)+"\u201D \u7684\u8FC7\u6EE4\u7ED3\u679C",1)]}),en:withCtx((O,V,D,U)=>{if(V)V(`Tag &quot;${ssrInterpolate(e.tagEnName(e.tag))}&quot; &#39;s result`);else return[createTextVNode('Tag "'+toDisplayString(e.tagEnName(e.tag))+`" 's result`,1)]}),_:1},n)):t(`<span data-v-b5f724c3>${ssrInterpolate(e.tagSlug)}</span>`),t("<!--]-->")):t("<!---->"),e.date?t(ssrRenderComponent(v,null,{zh:withCtx((O,V,D,U)=>{if(V)V(`\u65E5\u671F \u201C${ssrInterpolate(e.date)}\u201D \u7684\u8FC7\u6EE4\u7ED3\u679C`);else return[createTextVNode("\u65E5\u671F \u201C"+toDisplayString(e.date)+"\u201D \u7684\u8FC7\u6EE4\u7ED3\u679C",1)]}),en:withCtx((O,V,D,U)=>{if(V)V(`Date &quot;${ssrInterpolate(e.date)}&quot; &#39;s result`);else return[createTextVNode('Date "'+toDisplayString(e.date)+`" 's result`,1)]}),_:1},n)):t("<!---->"),e.searchKeyword?t(ssrRenderComponent(v,null,{zh:withCtx((O,V,D,U)=>{if(V)V(`\u5173\u952E\u8BCD \u201C${ssrInterpolate(e.searchKeyword)}\u201D \u7684\u8FC7\u6EE4\u7ED3\u679C`);else return[createTextVNode("\u5173\u952E\u8BCD \u201C"+toDisplayString(e.searchKeyword)+"\u201D \u7684\u8FC7\u6EE4\u7ED3\u679C",1)]}),en:withCtx((O,V,D,U)=>{if(V)V(`Search keyword &quot;${ssrInterpolate(e.searchKeyword)}&quot; &#39;s result`);else return[createTextVNode('Search keyword "'+toDisplayString(e.searchKeyword)+`" 's result`,1)]}),_:1},n)):t("<!---->"),t("</div>"),t(ssrRenderComponent(E,{to:"/",class:"close"},{default:withCtx((O,V,D,U)=>{if(V)V(`<i class="iconfont icon-cancel" data-v-b5f724c3${U}></i>`);else return[createVNode("i",{class:"iconfont icon-cancel"})]}),_:1},n)),t("</div>")):t("<!---->"),t(ssrRenderComponent(w,{data:e.articles.length,loading:!e.articles.length&&e.articleListStore.list.fetching},{loading:withCtx((O,V,D,U)=>{if(V)V(`<ul class="skeletons" data-v-b5f724c3${U}><!--[-->`),ssrRenderList(3,W=>{V(`<li class="item" data-v-b5f724c3${U}><div class="thumb" data-v-b5f724c3${U}>`),V(ssrRenderComponent(T,null,null,D,U)),V(`</div><div class="content" data-v-b5f724c3${U}><div class="title" data-v-b5f724c3${U}>`),V(ssrRenderComponent(S,null,null,D,U)),V(`</div><div class="description" data-v-b5f724c3${U}>`),V(ssrRenderComponent(S,null,null,D,U)),V("</div></div></li>")}),V("<!--]--></ul>");else return[createVNode("ul",{class:"skeletons",key:"skeleton"},[(openBlock(),createBlock(Fragment,null,renderList(3,W=>createVNode("li",{key:W,class:"item"},[createVNode("div",{class:"thumb"},[createVNode(T)]),createVNode("div",{class:"content"},[createVNode("div",{class:"title"},[createVNode(S)]),createVNode("div",{class:"description"},[createVNode(S)])])])),64))])]}),placeholder:withCtx((O,V,D,U)=>{if(V)V(ssrRenderComponent(N,{class:"empty","i18n-key":e.LanguageKey.ARTICLE_PLACEHOLDER},null,D,U));else return[createVNode(N,{class:"empty","i18n-key":e.LanguageKey.ARTICLE_PLACEHOLDER},null,8,["i18n-key"])]}),default:withCtx((O,V,D,U)=>{if(V)V(`<div data-v-b5f724c3${U}><div${ssrRenderAttrs({key:"list",name:"list-fade",class:"list"})}>`),ssrRenderList(e.articles,(W,Z)=>{V(ssrRenderComponent(L,{class:"list-item",article:W,key:Z},null,D,U))}),V("</div>"),V(ssrRenderComponent(P,{loading:e.articleListStore.list.fetching,finished:!e.hasMoreArticles,onLoadmore:e.loadmoreArticles},null,D,U)),V("</div>");else return[createVNode("div",null,[createVNode(TransitionGroup,{key:"list",name:"list-fade",tag:"div",class:"list"},{default:withCtx(()=>[(openBlock(!0),createBlock(Fragment,null,renderList(e.articles,(W,Z)=>(openBlock(),createBlock(L,{class:"list-item",article:W,key:Z},null,8,["article"]))),128))]),_:1}),createVNode(P,{loading:e.articleListStore.list.fetching,finished:!e.hasMoreArticles,onLoadmore:e.loadmoreArticles},null,8,["loading","finished","onLoadmore"])])]}),_:1},n)),t("</div>")}const _sfc_setup$1A=_sfc_main$1A.setup;_sfc_main$1A.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/flow/mobile/index.vue"),_sfc_setup$1A?_sfc_setup$1A(e,t):void 0};const MobileFlow=_export_sfc(_sfc_main$1A,[["ssrRender",_sfc_ssrRender$1A],["__scopeId","data-v-b5f724c3"]]),_sfc_main$1z=defineComponent({name:"FlowArticleListItem",props:{article:{type:Object,required:!0}},setup(e){const{globalState:t}=useEnhancer(),n=useIdentityStore(),o=computed(()=>n.isLikedPage(e.article.id)),c=isHybridType(e.article.origin),d=isReprintType(e.article.origin),g=isOriginalType(e.article.origin);return{LanguageKey,isLiked:o,isHybrid:c,isReprint:d,isOriginal:g,numberSplit,getThumbnailURL:E=>getArticleListThumbnailURL(E,t.imageExt.value.isWebP),getLanguageText:E=>E===Language.Chinese?"\u4E2D\u6587":"EN",getArticleDetailRoute,getCategoryFlowRoute,getTagFlowRoute}}}),item_vue_vue_type_style_index_0_scoped_f6b6306c_lang="";function _sfc_ssrRender$1z(e,t,n,o,c,d,g,r){const v=resolveComponent("router-link"),E=resolveComponent("i18n"),w=resolveComponent("udate"),T=resolveComponent("placeholder");t(`<div${ssrRenderAttrs(mergeProps({class:"article-item"},o))} data-v-f6b6306c><div class="item-background" style="${ssrRenderStyle({backgroundImage:`url(${e.getThumbnailURL(e.article.thumb)})`})}" data-v-f6b6306c></div><div class="item-content" data-v-f6b6306c>`),t(ssrRenderComponent(v,{class:"item-thumb",to:e.getArticleDetailRoute(e.article.id)},{default:withCtx((S,N,L,P)=>{if(N)N(`<span class="${ssrRenderClass([{original:e.isOriginal,hybrid:e.isHybrid,reprint:e.isReprint},"item-oirigin"])}" data-v-f6b6306c${P}>`),e.isOriginal?N(ssrRenderComponent(E,{k:e.LanguageKey.ORIGIN_ORIGINAL},null,L,P)):e.isReprint?N(ssrRenderComponent(E,{k:e.LanguageKey.ORIGIN_REPRINT},null,L,P)):e.isHybrid?N(ssrRenderComponent(E,{k:e.LanguageKey.ORIGIN_HYBRID},null,L,P)):N("<!---->"),N(`</span><div class="image" style="${ssrRenderStyle({backgroundImage:`url(${e.getThumbnailURL(e.article.thumb)})`})}"${ssrRenderAttr("alt",e.article.title)}${ssrRenderAttr("title",e.article.title)} data-v-f6b6306c${P}></div>`);else return[createVNode("span",{class:["item-oirigin",{original:e.isOriginal,hybrid:e.isHybrid,reprint:e.isReprint}]},[e.isOriginal?(openBlock(),createBlock(E,{key:0,k:e.LanguageKey.ORIGIN_ORIGINAL},null,8,["k"])):e.isReprint?(openBlock(),createBlock(E,{key:1,k:e.LanguageKey.ORIGIN_REPRINT},null,8,["k"])):e.isHybrid?(openBlock(),createBlock(E,{key:2,k:e.LanguageKey.ORIGIN_HYBRID},null,8,["k"])):createCommentVNode("",!0)],2),createVNode("div",{class:"image",style:{backgroundImage:`url(${e.getThumbnailURL(e.article.thumb)})`},alt:e.article.title,title:e.article.title},null,12,["alt","title"])]}),_:1},n)),t('<div class="item-body" data-v-f6b6306c><div class="item-content" data-v-f6b6306c><h5 class="title" data-v-f6b6306c>'),t(ssrRenderComponent(v,{class:"link",to:e.getArticleDetailRoute(e.article.id),title:e.article.title},{default:withCtx((S,N,L,P)=>{if(N)N(`${ssrInterpolate(e.article.title)}`);else return[createTextVNode(toDisplayString(e.article.title),1)]}),_:1},n)),t(`<span class="language" data-v-f6b6306c>${ssrInterpolate(e.getLanguageText(e.article.lang))}</span></h5><p class="description" style="${ssrRenderStyle({"-webkit-box-orient":"vertical"})}" data-v-f6b6306c>${e.article.description}</p></div><div class="item-meta" data-v-f6b6306c><span class="date" data-v-f6b6306c><i class="iconfont icon-clock" data-v-f6b6306c></i>`),t(ssrRenderComponent(w,{to:"ago",date:e.article.create_at},null,n)),t(`</span><span class="views" data-v-f6b6306c><i class="iconfont icon-eye" data-v-f6b6306c></i><span data-v-f6b6306c>${ssrInterpolate(e.numberSplit(e.article.meta.views))}</span></span><span class="comments" data-v-f6b6306c><i class="iconfont icon-comment" data-v-f6b6306c></i><span data-v-f6b6306c>${ssrInterpolate(e.article.meta.comments)}</span></span><span class="likes" data-v-f6b6306c><i class="${ssrRenderClass([{liked:e.isLiked},"iconfont icon-like"])}" data-v-f6b6306c></i><span data-v-f6b6306c>${ssrInterpolate(e.article.meta.likes)}</span></span><span class="categories" data-v-f6b6306c><i class="iconfont icon-category" data-v-f6b6306c></i>`),t(ssrRenderComponent(T,{transition:!1,data:e.article.category.length},{placeholder:withCtx((S,N,L,P)=>{if(N)N(ssrRenderComponent(E,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,L,P));else return[createVNode(E,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,8,["k"])]}),default:withCtx((S,N,L,P)=>{if(N)N("<!--[-->"),ssrRenderList(e.article.category.slice(0,1),(O,V)=>{N(ssrRenderComponent(v,{key:V,to:e.getCategoryFlowRoute(O.slug)},{default:withCtx((D,U,W,Z)=>{if(U)U(ssrRenderComponent(E,{zh:O.name,en:O.slug},null,W,Z));else return[createVNode(E,{zh:O.name,en:O.slug},null,8,["zh","en"])]}),_:2},L,P))}),N("<!--]-->");else return[(openBlock(!0),createBlock(Fragment,null,renderList(e.article.category.slice(0,1),(O,V)=>(openBlock(),createBlock(v,{key:V,to:e.getCategoryFlowRoute(O.slug)},{default:withCtx(()=>[createVNode(E,{zh:O.name,en:O.slug},null,8,["zh","en"])]),_:2},1032,["to"]))),128))]}),_:1},n)),t("</span></div></div></div></div>")}const _sfc_setup$1z=_sfc_main$1z.setup;_sfc_main$1z.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/flow/desktop/item.vue"),_sfc_setup$1z?_sfc_setup$1z(e,t):void 0};const ListItem=_export_sfc(_sfc_main$1z,[["ssrRender",_sfc_ssrRender$1z],["__scopeId","data-v-f6b6306c"]]),_sfc_main$1y=defineComponent({name:"FlowArticleList",components:{ListItem},props:{articles:{type:Array,required:!0},pagination:{type:Object,default:null},fetching:{type:Boolean,required:!0},mammon:{type:Boolean,default:!0}},emits:["loadmore"],setup(e,t){const{isDarkTheme:n,isZhLang:o}=useEnhancer(),c=computed(()=>e.pagination?e.pagination.current_page<e.pagination.total_page:!1);return{LanguageKey,isZhLang:o,isDarkTheme:n,isLoadMoreEnabled:c,handleLoadmore:()=>{t.emit("loadmore")}}}}),list_vue_vue_type_style_index_0_scoped_075c5c21_lang="";function _sfc_ssrRender$1y(e,t,n,o,c,d,g,r){var O;const v=resolveComponent("placeholder"),E=resolveComponent("skeleton-base"),w=resolveComponent("skeleton-line"),T=resolveComponent("empty"),S=resolveComponent("client-only"),N=resolveComponent("Adsense"),L=resolveComponent("list-item"),P=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:"articles"},o))} data-v-075c5c21><div class="article-list" data-v-075c5c21>`),t(ssrRenderComponent(v,{data:e.articles.length,loading:!e.articles.length&&e.fetching},{loading:withCtx((V,D,U,W)=>{if(D)D(`<ul class="article-list-skeleton" data-v-075c5c21${W}><!--[-->`),ssrRenderList(6,Z=>{D(`<li class="item" data-v-075c5c21${W}><div class="thumb" data-v-075c5c21${W}>`),D(ssrRenderComponent(E,null,null,U,W)),D(`</div><div class="content" data-v-075c5c21${W}><div class="title" data-v-075c5c21${W}>`),D(ssrRenderComponent(w,null,null,U,W)),D(`</div><div class="description" data-v-075c5c21${W}><!--[-->`),ssrRenderList(2,re=>{D(`<div class="line-item" data-v-075c5c21${W}>`),D(ssrRenderComponent(w,null,null,U,W)),D("</div>")}),D("<!--]--></div>"),D(ssrRenderComponent(w,{class:"meta"},null,U,W)),D("</div></li>")}),D("<!--]--></ul>");else return[createVNode("ul",{class:"article-list-skeleton",key:"skeleton"},[(openBlock(),createBlock(Fragment,null,renderList(6,Z=>createVNode("li",{key:Z,class:"item"},[createVNode("div",{class:"thumb"},[createVNode(E)]),createVNode("div",{class:"content"},[createVNode("div",{class:"title"},[createVNode(w)]),createVNode("div",{class:"description"},[(openBlock(),createBlock(Fragment,null,renderList(2,re=>createVNode("div",{class:"line-item",key:re},[createVNode(w)])),64))]),createVNode(w,{class:"meta"})])])),64))])]}),placeholder:withCtx((V,D,U,W)=>{if(D)D(ssrRenderComponent(T,{class:"empty","i18n-key":e.LanguageKey.ARTICLE_PLACEHOLDER},null,U,W));else return[createVNode(T,{class:"empty","i18n-key":e.LanguageKey.ARTICLE_PLACEHOLDER},null,8,["i18n-key"])]}),default:withCtx((V,D,U,W)=>{if(D)D(`<div data-v-075c5c21${W}>`),D(ssrRenderComponent(S,null,{default:withCtx((Z,re,ae,ce)=>{if(re)e.mammon?(re("<!--[-->"),e.isDarkTheme?re(ssrRenderComponent(N,{"ins-class":"mammon-ins","data-ad-format":"fluid","data-ad-layout-key":"-hj-9+3a-97+6s","data-ad-slot":"1765379407",class:"article-list-mammon"},null,ae,ce)):re(ssrRenderComponent(N,{"ins-class":"mammon-ins","data-ad-format":"fluid","data-ad-layout-key":"-hj-9+3a-97+6s","data-ad-slot":"1148538406",class:"article-list-mammon"},null,ae,ce)),re("<!--]-->")):re("<!---->");else return[e.mammon?(openBlock(),createBlock(Fragment,{key:0},[e.isDarkTheme?(openBlock(),createBlock(N,{key:0,"ins-class":"mammon-ins","data-ad-format":"fluid","data-ad-layout-key":"-hj-9+3a-97+6s","data-ad-slot":"1765379407",class:"article-list-mammon"})):(openBlock(),createBlock(N,{key:1,"ins-class":"mammon-ins","data-ad-format":"fluid","data-ad-layout-key":"-hj-9+3a-97+6s","data-ad-slot":"1148538406",class:"article-list-mammon"}))],64)):createCommentVNode("",!0)]}),_:1},U,W)),D("<!--[-->"),ssrRenderList(e.articles,Z=>{D(ssrRenderComponent(L,{class:"list-item",key:Z.id,article:Z},null,U,W))}),D("<!--]--></div>");else return[createVNode("div",{key:"list"},[createVNode(S,null,{default:withCtx(()=>[e.mammon?(openBlock(),createBlock(Fragment,{key:0},[e.isDarkTheme?(openBlock(),createBlock(N,{key:0,"ins-class":"mammon-ins","data-ad-format":"fluid","data-ad-layout-key":"-hj-9+3a-97+6s","data-ad-slot":"1765379407",class:"article-list-mammon"})):(openBlock(),createBlock(N,{key:1,"ins-class":"mammon-ins","data-ad-format":"fluid","data-ad-layout-key":"-hj-9+3a-97+6s","data-ad-slot":"1148538406",class:"article-list-mammon"}))],64)):createCommentVNode("",!0)]),_:1}),createVNode(TransitionGroup,{name:"list-fade"},{default:withCtx(()=>[(openBlock(!0),createBlock(Fragment,null,renderList(e.articles,Z=>(openBlock(),createBlock(L,{class:"list-item",key:Z.id,article:Z},null,8,["article"]))),128))]),_:1})])]}),_:1},n)),t(`</div><button class="article-load"${includeBooleanAttr(e.fetching||!e.isLoadMoreEnabled)?" disabled":""} data-v-075c5c21><div class="background" data-v-075c5c21><span class="left" data-v-075c5c21></span><span class="right" data-v-075c5c21></span></div><div class="content" data-v-075c5c21><span class="left" data-v-075c5c21>`),e.fetching?t("<!--[-->\u2022\u2022\u2022<!--]-->"):t(`<!--[-->${ssrInterpolate(e.articles.length)} / ${ssrInterpolate((O=e.pagination)==null?void 0:O.total)}<!--]-->`),t(`</span><span class="right" data-v-075c5c21><span class="${ssrRenderClass([{zh:e.isZhLang},"text"])}" data-v-075c5c21>`),e.fetching?t(ssrRenderComponent(P,{k:e.LanguageKey.ARTICLE_LIST_LOADING},null,n)):e.isLoadMoreEnabled?t(ssrRenderComponent(P,{k:e.LanguageKey.ARTICLE_LIST_LOADMORE},null,n)):t(ssrRenderComponent(P,{k:e.LanguageKey.ARTICLE_LIST_NO_MORE},null,n)),t('</span><i class="iconfont icon-loadmore" data-v-075c5c21></i></span></div></button></div>')}const _sfc_setup$1y=_sfc_main$1y.setup;_sfc_main$1y.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/flow/desktop/list.vue"),_sfc_setup$1y?_sfc_setup$1y(e,t):void 0};const ArticleList=_export_sfc(_sfc_main$1y,[["ssrRender",_sfc_ssrRender$1y],["__scopeId","data-v-075c5c21"]]);function isObject$2(e){return e!==null&&typeof e=="object"&&"constructor"in e&&e.constructor===Object}function extend$2(e={},t={}){Object.keys(t).forEach(n=>{typeof e[n]>"u"?e[n]=t[n]:isObject$2(t[n])&&isObject$2(e[n])&&Object.keys(t[n]).length>0&&extend$2(e[n],t[n])})}const ssrDocument={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function getDocument(){const e=typeof document<"u"?document:{};return extend$2(e,ssrDocument),e}const ssrWindow={document:ssrDocument,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(e){return typeof setTimeout>"u"?(e(),null):setTimeout(e,0)},cancelAnimationFrame(e){typeof setTimeout>"u"||clearTimeout(e)}};function getWindow(){const e=typeof window<"u"?window:{};return extend$2(e,ssrWindow),e}function makeReactive(e){const t=e.__proto__;Object.defineProperty(e,"__proto__",{get(){return t},set(n){t.__proto__=n}})}class Dom7 extends Array{constructor(t){typeof t=="number"?super(t):(super(...t||[]),makeReactive(this))}}function arrayFlat(e=[]){const t=[];return e.forEach(n=>{Array.isArray(n)?t.push(...arrayFlat(n)):t.push(n)}),t}function arrayFilter(e,t){return Array.prototype.filter.call(e,t)}function arrayUnique(e){const t=[];for(let n=0;n<e.length;n+=1)t.indexOf(e[n])===-1&&t.push(e[n]);return t}function qsa(e,t){if(typeof e!="string")return[e];const n=[],o=t.querySelectorAll(e);for(let c=0;c<o.length;c+=1)n.push(o[c]);return n}function $(e,t){const n=getWindow(),o=getDocument();let c=[];if(!t&&e instanceof Dom7)return e;if(!e)return new Dom7(c);if(typeof e=="string"){const d=e.trim();if(d.indexOf("<")>=0&&d.indexOf(">")>=0){let g="div";d.indexOf("<li")===0&&(g="ul"),d.indexOf("<tr")===0&&(g="tbody"),(d.indexOf("<td")===0||d.indexOf("<th")===0)&&(g="tr"),d.indexOf("<tbody")===0&&(g="table"),d.indexOf("<option")===0&&(g="select");const r=o.createElement(g);r.innerHTML=d;for(let v=0;v<r.childNodes.length;v+=1)c.push(r.childNodes[v])}else c=qsa(e.trim(),t||o)}else if(e.nodeType||e===n||e===o)c.push(e);else if(Array.isArray(e)){if(e instanceof Dom7)return e;c=e}return new Dom7(arrayUnique(c))}$.fn=Dom7.prototype;function addClass(...e){const t=arrayFlat(e.map(n=>n.split(" ")));return this.forEach(n=>{n.classList.add(...t)}),this}function removeClass(...e){const t=arrayFlat(e.map(n=>n.split(" ")));return this.forEach(n=>{n.classList.remove(...t)}),this}function toggleClass(...e){const t=arrayFlat(e.map(n=>n.split(" ")));this.forEach(n=>{t.forEach(o=>{n.classList.toggle(o)})})}function hasClass(...e){const t=arrayFlat(e.map(n=>n.split(" ")));return arrayFilter(this,n=>t.filter(o=>n.classList.contains(o)).length>0).length>0}function attr(e,t){if(arguments.length===1&&typeof e=="string")return this[0]?this[0].getAttribute(e):void 0;for(let n=0;n<this.length;n+=1)if(arguments.length===2)this[n].setAttribute(e,t);else for(const o in e)this[n][o]=e[o],this[n].setAttribute(o,e[o]);return this}function removeAttr(e){for(let t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this}function transform(e){for(let t=0;t<this.length;t+=1)this[t].style.transform=e;return this}function transition$1(e){for(let t=0;t<this.length;t+=1)this[t].style.transitionDuration=typeof e!="string"?`${e}ms`:e;return this}function on(...e){let[t,n,o,c]=e;typeof e[1]=="function"&&([t,o,c]=e,n=void 0),c||(c=!1);function d(E){const w=E.target;if(!w)return;const T=E.target.dom7EventData||[];if(T.indexOf(E)<0&&T.unshift(E),$(w).is(n))o.apply(w,T);else{const S=$(w).parents();for(let N=0;N<S.length;N+=1)$(S[N]).is(n)&&o.apply(S[N],T)}}function g(E){const w=E&&E.target?E.target.dom7EventData||[]:[];w.indexOf(E)<0&&w.unshift(E),o.apply(this,w)}const r=t.split(" ");let v;for(let E=0;E<this.length;E+=1){const w=this[E];if(n)for(v=0;v<r.length;v+=1){const T=r[v];w.dom7LiveListeners||(w.dom7LiveListeners={}),w.dom7LiveListeners[T]||(w.dom7LiveListeners[T]=[]),w.dom7LiveListeners[T].push({listener:o,proxyListener:d}),w.addEventListener(T,d,c)}else for(v=0;v<r.length;v+=1){const T=r[v];w.dom7Listeners||(w.dom7Listeners={}),w.dom7Listeners[T]||(w.dom7Listeners[T]=[]),w.dom7Listeners[T].push({listener:o,proxyListener:g}),w.addEventListener(T,g,c)}}return this}function off(...e){let[t,n,o,c]=e;typeof e[1]=="function"&&([t,o,c]=e,n=void 0),c||(c=!1);const d=t.split(" ");for(let g=0;g<d.length;g+=1){const r=d[g];for(let v=0;v<this.length;v+=1){const E=this[v];let w;if(!n&&E.dom7Listeners?w=E.dom7Listeners[r]:n&&E.dom7LiveListeners&&(w=E.dom7LiveListeners[r]),w&&w.length)for(let T=w.length-1;T>=0;T-=1){const S=w[T];o&&S.listener===o||o&&S.listener&&S.listener.dom7proxy&&S.listener.dom7proxy===o?(E.removeEventListener(r,S.proxyListener,c),w.splice(T,1)):o||(E.removeEventListener(r,S.proxyListener,c),w.splice(T,1))}}}return this}function trigger(...e){const t=getWindow(),n=e[0].split(" "),o=e[1];for(let c=0;c<n.length;c+=1){const d=n[c];for(let g=0;g<this.length;g+=1){const r=this[g];if(t.CustomEvent){const v=new t.CustomEvent(d,{detail:o,bubbles:!0,cancelable:!0});r.dom7EventData=e.filter((E,w)=>w>0),r.dispatchEvent(v),r.dom7EventData=[],delete r.dom7EventData}}}return this}function transitionEnd$1(e){const t=this;function n(o){o.target===this&&(e.call(this,o),t.off("transitionend",n))}return e&&t.on("transitionend",n),this}function outerWidth(e){if(this.length>0){if(e){const t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null}function outerHeight(e){if(this.length>0){if(e){const t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null}function offset(){if(this.length>0){const e=getWindow(),t=getDocument(),n=this[0],o=n.getBoundingClientRect(),c=t.body,d=n.clientTop||c.clientTop||0,g=n.clientLeft||c.clientLeft||0,r=n===e?e.scrollY:n.scrollTop,v=n===e?e.scrollX:n.scrollLeft;return{top:o.top+r-d,left:o.left+v-g}}return null}function styles(){const e=getWindow();return this[0]?e.getComputedStyle(this[0],null):{}}function css(e,t){const n=getWindow();let o;if(arguments.length===1)if(typeof e=="string"){if(this[0])return n.getComputedStyle(this[0],null).getPropertyValue(e)}else{for(o=0;o<this.length;o+=1)for(const c in e)this[o].style[c]=e[c];return this}if(arguments.length===2&&typeof e=="string"){for(o=0;o<this.length;o+=1)this[o].style[e]=t;return this}return this}function each(e){return e?(this.forEach((t,n)=>{e.apply(t,[t,n])}),this):this}function filter$1(e){const t=arrayFilter(this,e);return $(t)}function html(e){if(typeof e>"u")return this[0]?this[0].innerHTML:null;for(let t=0;t<this.length;t+=1)this[t].innerHTML=e;return this}function text(e){if(typeof e>"u")return this[0]?this[0].textContent.trim():null;for(let t=0;t<this.length;t+=1)this[t].textContent=e;return this}function is(e){const t=getWindow(),n=getDocument(),o=this[0];let c,d;if(!o||typeof e>"u")return!1;if(typeof e=="string"){if(o.matches)return o.matches(e);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(o.msMatchesSelector)return o.msMatchesSelector(e);for(c=$(e),d=0;d<c.length;d+=1)if(c[d]===o)return!0;return!1}if(e===n)return o===n;if(e===t)return o===t;if(e.nodeType||e instanceof Dom7){for(c=e.nodeType?[e]:e,d=0;d<c.length;d+=1)if(c[d]===o)return!0;return!1}return!1}function index(){let e=this[0],t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function eq(e){if(typeof e>"u")return this;const t=this.length;if(e>t-1)return $([]);if(e<0){const n=t+e;return n<0?$([]):$([this[n]])}return $([this[e]])}function append(...e){let t;const n=getDocument();for(let o=0;o<e.length;o+=1){t=e[o];for(let c=0;c<this.length;c+=1)if(typeof t=="string"){const d=n.createElement("div");for(d.innerHTML=t;d.firstChild;)this[c].appendChild(d.firstChild)}else if(t instanceof Dom7)for(let d=0;d<t.length;d+=1)this[c].appendChild(t[d]);else this[c].appendChild(t)}return this}function prepend(e){const t=getDocument();let n,o;for(n=0;n<this.length;n+=1)if(typeof e=="string"){const c=t.createElement("div");for(c.innerHTML=e,o=c.childNodes.length-1;o>=0;o-=1)this[n].insertBefore(c.childNodes[o],this[n].childNodes[0])}else if(e instanceof Dom7)for(o=0;o<e.length;o+=1)this[n].insertBefore(e[o],this[n].childNodes[0]);else this[n].insertBefore(e,this[n].childNodes[0]);return this}function next(e){return this.length>0?e?this[0].nextElementSibling&&$(this[0].nextElementSibling).is(e)?$([this[0].nextElementSibling]):$([]):this[0].nextElementSibling?$([this[0].nextElementSibling]):$([]):$([])}function nextAll(e){const t=[];let n=this[0];if(!n)return $([]);for(;n.nextElementSibling;){const o=n.nextElementSibling;e?$(o).is(e)&&t.push(o):t.push(o),n=o}return $(t)}function prev(e){if(this.length>0){const t=this[0];return e?t.previousElementSibling&&$(t.previousElementSibling).is(e)?$([t.previousElementSibling]):$([]):t.previousElementSibling?$([t.previousElementSibling]):$([])}return $([])}function prevAll(e){const t=[];let n=this[0];if(!n)return $([]);for(;n.previousElementSibling;){const o=n.previousElementSibling;e?$(o).is(e)&&t.push(o):t.push(o),n=o}return $(t)}function parent(e){const t=[];for(let n=0;n<this.length;n+=1)this[n].parentNode!==null&&(e?$(this[n].parentNode).is(e)&&t.push(this[n].parentNode):t.push(this[n].parentNode));return $(t)}function parents(e){const t=[];for(let n=0;n<this.length;n+=1){let o=this[n].parentNode;for(;o;)e?$(o).is(e)&&t.push(o):t.push(o),o=o.parentNode}return $(t)}function closest(e){let t=this;return typeof e>"u"?$([]):(t.is(e)||(t=t.parents(e).eq(0)),t)}function find(e){const t=[];for(let n=0;n<this.length;n+=1){const o=this[n].querySelectorAll(e);for(let c=0;c<o.length;c+=1)t.push(o[c])}return $(t)}function children(e){const t=[];for(let n=0;n<this.length;n+=1){const o=this[n].children;for(let c=0;c<o.length;c+=1)(!e||$(o[c]).is(e))&&t.push(o[c])}return $(t)}function remove(){for(let e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}const Methods={addClass,removeClass,hasClass,toggleClass,attr,removeAttr,transform,transition:transition$1,on,off,trigger,transitionEnd:transitionEnd$1,outerWidth,outerHeight,styles,offset,css,each,html,text,is,index,eq,append,prepend,next,nextAll,prev,prevAll,parent,parents,closest,find,children,filter:filter$1,remove};Object.keys(Methods).forEach(e=>{Object.defineProperty($.fn,e,{value:Methods[e],writable:!0})});function deleteProps(e){const t=e;Object.keys(t).forEach(n=>{try{t[n]=null}catch{}try{delete t[n]}catch{}})}function nextTick(e,t=0){return setTimeout(e,t)}function now(){return Date.now()}function getComputedStyle$1(e){const t=getWindow();let n;return t.getComputedStyle&&(n=t.getComputedStyle(e,null)),!n&&e.currentStyle&&(n=e.currentStyle),n||(n=e.style),n}function getTranslate(e,t="x"){const n=getWindow();let o,c,d;const g=getComputedStyle$1(e);return n.WebKitCSSMatrix?(c=g.transform||g.webkitTransform,c.split(",").length>6&&(c=c.split(", ").map(r=>r.replace(",",".")).join(", ")),d=new n.WebKitCSSMatrix(c==="none"?"":c)):(d=g.MozTransform||g.OTransform||g.MsTransform||g.msTransform||g.transform||g.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),o=d.toString().split(",")),t==="x"&&(n.WebKitCSSMatrix?c=d.m41:o.length===16?c=parseFloat(o[12]):c=parseFloat(o[4])),t==="y"&&(n.WebKitCSSMatrix?c=d.m42:o.length===16?c=parseFloat(o[13]):c=parseFloat(o[5])),c||0}function isObject$1(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function isNode(e){return typeof window<"u"&&typeof window.HTMLElement<"u"?e instanceof HTMLElement:e&&(e.nodeType===1||e.nodeType===11)}function extend$1(...e){const t=Object(e[0]),n=["__proto__","constructor","prototype"];for(let o=1;o<e.length;o+=1){const c=e[o];if(c!=null&&!isNode(c)){const d=Object.keys(Object(c)).filter(g=>n.indexOf(g)<0);for(let g=0,r=d.length;g<r;g+=1){const v=d[g],E=Object.getOwnPropertyDescriptor(c,v);E!==void 0&&E.enumerable&&(isObject$1(t[v])&&isObject$1(c[v])?c[v].__swiper__?t[v]=c[v]:extend$1(t[v],c[v]):!isObject$1(t[v])&&isObject$1(c[v])?(t[v]={},c[v].__swiper__?t[v]=c[v]:extend$1(t[v],c[v])):t[v]=c[v])}}}return t}function setCSSProperty(e,t,n){e.style.setProperty(t,n)}function animateCSSModeScroll({swiper:e,targetPosition:t,side:n}){const o=getWindow(),c=-e.translate;let d=null,g;const r=e.params.speed;e.wrapperEl.style.scrollSnapType="none",o.cancelAnimationFrame(e.cssModeFrameID);const v=t>c?"next":"prev",E=(T,S)=>v==="next"&&T>=S||v==="prev"&&T<=S,w=()=>{g=new Date().getTime(),d===null&&(d=g);const T=Math.max(Math.min((g-d)/r,1),0),S=.5-Math.cos(T*Math.PI)/2;let N=c+S*(t-c);if(E(N,t)&&(N=t),e.wrapperEl.scrollTo({[n]:N}),E(N,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[n]:N})}),o.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=o.requestAnimationFrame(w)};w()}let support;function calcSupport(){const e=getWindow(),t=getDocument();return{smoothScroll:t.documentElement&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),passiveListener:function(){let o=!1;try{const c=Object.defineProperty({},"passive",{get(){o=!0}});e.addEventListener("testPassiveListener",null,c)}catch{}return o}(),gestures:function(){return"ongesturestart"in e}()}}function getSupport(){return support||(support=calcSupport()),support}let deviceCached;function calcDevice({userAgent:e}={}){const t=getSupport(),n=getWindow(),o=n.navigator.platform,c=e||n.navigator.userAgent,d={ios:!1,android:!1},g=n.screen.width,r=n.screen.height,v=c.match(/(Android);?[\s\/]+([\d.]+)?/);let E=c.match(/(iPad).*OS\s([\d_]+)/);const w=c.match(/(iPod)(.*OS\s([\d_]+))?/),T=!E&&c.match(/(iPhone\sOS|iOS)\s([\d_]+)/),S=o==="Win32";let N=o==="MacIntel";const L=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!E&&N&&t.touch&&L.indexOf(`${g}x${r}`)>=0&&(E=c.match(/(Version)\/([\d.]+)/),E||(E=[0,1,"13_0_0"]),N=!1),v&&!S&&(d.os="android",d.android=!0),(E||T||w)&&(d.os="ios",d.ios=!0),d}function getDevice(e={}){return deviceCached||(deviceCached=calcDevice(e)),deviceCached}let browser$1;function calcBrowser(){const e=getWindow();function t(){const n=e.navigator.userAgent.toLowerCase();return n.indexOf("safari")>=0&&n.indexOf("chrome")<0&&n.indexOf("android")<0}return{isSafari:t(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}function getBrowser(){return browser$1||(browser$1=calcBrowser()),browser$1}function Resize({swiper:e,on:t,emit:n}){const o=getWindow();let c=null,d=null;const g=()=>{!e||e.destroyed||!e.initialized||(n("beforeResize"),n("resize"))},r=()=>{!e||e.destroyed||!e.initialized||(c=new ResizeObserver(w=>{d=o.requestAnimationFrame(()=>{const{width:T,height:S}=e;let N=T,L=S;w.forEach(({contentBoxSize:P,contentRect:O,target:V})=>{V&&V!==e.el||(N=O?O.width:(P[0]||P).inlineSize,L=O?O.height:(P[0]||P).blockSize)}),(N!==T||L!==S)&&g()})}),c.observe(e.el))},v=()=>{d&&o.cancelAnimationFrame(d),c&&c.unobserve&&e.el&&(c.unobserve(e.el),c=null)},E=()=>{!e||e.destroyed||!e.initialized||n("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof o.ResizeObserver<"u"){r();return}o.addEventListener("resize",g),o.addEventListener("orientationchange",E)}),t("destroy",()=>{v(),o.removeEventListener("resize",g),o.removeEventListener("orientationchange",E)})}function Observer({swiper:e,extendParams:t,on:n,emit:o}){const c=[],d=getWindow(),g=(E,w={})=>{const T=d.MutationObserver||d.WebkitMutationObserver,S=new T(N=>{if(N.length===1){o("observerUpdate",N[0]);return}const L=function(){o("observerUpdate",N[0])};d.requestAnimationFrame?d.requestAnimationFrame(L):d.setTimeout(L,0)});S.observe(E,{attributes:typeof w.attributes>"u"?!0:w.attributes,childList:typeof w.childList>"u"?!0:w.childList,characterData:typeof w.characterData>"u"?!0:w.characterData}),c.push(S)},r=()=>{if(!!e.params.observer){if(e.params.observeParents){const E=e.$el.parents();for(let w=0;w<E.length;w+=1)g(E[w])}g(e.$el[0],{childList:e.params.observeSlideChildren}),g(e.$wrapperEl[0],{attributes:!1})}},v=()=>{c.forEach(E=>{E.disconnect()}),c.splice(0,c.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",r),n("destroy",v)}const eventsEmitter={on(e,t,n){const o=this;if(!o.eventsListeners||o.destroyed||typeof t!="function")return o;const c=n?"unshift":"push";return e.split(" ").forEach(d=>{o.eventsListeners[d]||(o.eventsListeners[d]=[]),o.eventsListeners[d][c](t)}),o},once(e,t,n){const o=this;if(!o.eventsListeners||o.destroyed||typeof t!="function")return o;function c(...d){o.off(e,c),c.__emitterProxy&&delete c.__emitterProxy,t.apply(o,d)}return c.__emitterProxy=t,o.on(e,c,n)},onAny(e,t){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;const o=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[o](e),n},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsAnyListeners)return t;const n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off(e,t){const n=this;return!n.eventsListeners||n.destroyed||!n.eventsListeners||e.split(" ").forEach(o=>{typeof t>"u"?n.eventsListeners[o]=[]:n.eventsListeners[o]&&n.eventsListeners[o].forEach((c,d)=>{(c===t||c.__emitterProxy&&c.__emitterProxy===t)&&n.eventsListeners[o].splice(d,1)})}),n},emit(...e){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsListeners)return t;let n,o,c;return typeof e[0]=="string"||Array.isArray(e[0])?(n=e[0],o=e.slice(1,e.length),c=t):(n=e[0].events,o=e[0].data,c=e[0].context||t),o.unshift(c),(Array.isArray(n)?n:n.split(" ")).forEach(g=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach(r=>{r.apply(c,[g,...o])}),t.eventsListeners&&t.eventsListeners[g]&&t.eventsListeners[g].forEach(r=>{r.apply(c,o)})}),t}};function updateSize(){const e=this;let t,n;const o=e.$el;typeof e.params.width<"u"&&e.params.width!==null?t=e.params.width:t=o[0].clientWidth,typeof e.params.height<"u"&&e.params.height!==null?n=e.params.height:n=o[0].clientHeight,!(t===0&&e.isHorizontal()||n===0&&e.isVertical())&&(t=t-parseInt(o.css("padding-left")||0,10)-parseInt(o.css("padding-right")||0,10),n=n-parseInt(o.css("padding-top")||0,10)-parseInt(o.css("padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(n)&&(n=0),Object.assign(e,{width:t,height:n,size:e.isHorizontal()?t:n}))}function updateSlides(){const e=this;function t(le){return e.isHorizontal()?le:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[le]}function n(le,de){return parseFloat(le.getPropertyValue(t(de))||0)}const o=e.params,{$wrapperEl:c,size:d,rtlTranslate:g,wrongRTL:r}=e,v=e.virtual&&o.virtual.enabled,E=v?e.virtual.slides.length:e.slides.length,w=c.children(`.${e.params.slideClass}`),T=v?e.virtual.slides.length:w.length;let S=[];const N=[],L=[];let P=o.slidesOffsetBefore;typeof P=="function"&&(P=o.slidesOffsetBefore.call(e));let O=o.slidesOffsetAfter;typeof O=="function"&&(O=o.slidesOffsetAfter.call(e));const V=e.snapGrid.length,D=e.slidesGrid.length;let U=o.spaceBetween,W=-P,Z=0,re=0;if(typeof d>"u")return;typeof U=="string"&&U.indexOf("%")>=0&&(U=parseFloat(U.replace("%",""))/100*d),e.virtualSize=-U,g?w.css({marginLeft:"",marginBottom:"",marginTop:""}):w.css({marginRight:"",marginBottom:"",marginTop:""}),o.centeredSlides&&o.cssMode&&(setCSSProperty(e.wrapperEl,"--swiper-centered-offset-before",""),setCSSProperty(e.wrapperEl,"--swiper-centered-offset-after",""));const ae=o.grid&&o.grid.rows>1&&e.grid;ae&&e.grid.initSlides(T);let ce;const ne=o.slidesPerView==="auto"&&o.breakpoints&&Object.keys(o.breakpoints).filter(le=>typeof o.breakpoints[le].slidesPerView<"u").length>0;for(let le=0;le<T;le+=1){ce=0;const de=w.eq(le);if(ae&&e.grid.updateSlide(le,de,T,t),de.css("display")!=="none"){if(o.slidesPerView==="auto"){ne&&(w[le].style[t("width")]="");const ie=getComputedStyle(de[0]),ve=de[0].style.transform,Pe=de[0].style.webkitTransform;if(ve&&(de[0].style.transform="none"),Pe&&(de[0].style.webkitTransform="none"),o.roundLengths)ce=e.isHorizontal()?de.outerWidth(!0):de.outerHeight(!0);else{const ct=n(ie,"width"),ge=n(ie,"padding-left"),Me=n(ie,"padding-right"),Ue=n(ie,"margin-left"),Ze=n(ie,"margin-right"),xt=ie.getPropertyValue("box-sizing");if(xt&&xt==="border-box")ce=ct+Ue+Ze;else{const{clientWidth:Ut,offsetWidth:Zt}=de[0];ce=ct+ge+Me+Ue+Ze+(Zt-Ut)}}ve&&(de[0].style.transform=ve),Pe&&(de[0].style.webkitTransform=Pe),o.roundLengths&&(ce=Math.floor(ce))}else ce=(d-(o.slidesPerView-1)*U)/o.slidesPerView,o.roundLengths&&(ce=Math.floor(ce)),w[le]&&(w[le].style[t("width")]=`${ce}px`);w[le]&&(w[le].swiperSlideSize=ce),L.push(ce),o.centeredSlides?(W=W+ce/2+Z/2+U,Z===0&&le!==0&&(W=W-d/2-U),le===0&&(W=W-d/2-U),Math.abs(W)<1/1e3&&(W=0),o.roundLengths&&(W=Math.floor(W)),re%o.slidesPerGroup===0&&S.push(W),N.push(W)):(o.roundLengths&&(W=Math.floor(W)),(re-Math.min(e.params.slidesPerGroupSkip,re))%e.params.slidesPerGroup===0&&S.push(W),N.push(W),W=W+ce+U),e.virtualSize+=ce+U,Z=ce,re+=1}}if(e.virtualSize=Math.max(e.virtualSize,d)+O,g&&r&&(o.effect==="slide"||o.effect==="coverflow")&&c.css({width:`${e.virtualSize+o.spaceBetween}px`}),o.setWrapperSize&&c.css({[t("width")]:`${e.virtualSize+o.spaceBetween}px`}),ae&&e.grid.updateWrapperSize(ce,S,t),!o.centeredSlides){const le=[];for(let de=0;de<S.length;de+=1){let ie=S[de];o.roundLengths&&(ie=Math.floor(ie)),S[de]<=e.virtualSize-d&&le.push(ie)}S=le,Math.floor(e.virtualSize-d)-Math.floor(S[S.length-1])>1&&S.push(e.virtualSize-d)}if(S.length===0&&(S=[0]),o.spaceBetween!==0){const le=e.isHorizontal()&&g?"marginLeft":t("marginRight");w.filter((de,ie)=>o.cssMode?ie!==w.length-1:!0).css({[le]:`${U}px`})}if(o.centeredSlides&&o.centeredSlidesBounds){let le=0;L.forEach(ie=>{le+=ie+(o.spaceBetween?o.spaceBetween:0)}),le-=o.spaceBetween;const de=le-d;S=S.map(ie=>ie<0?-P:ie>de?de+O:ie)}if(o.centerInsufficientSlides){let le=0;if(L.forEach(de=>{le+=de+(o.spaceBetween?o.spaceBetween:0)}),le-=o.spaceBetween,le<d){const de=(d-le)/2;S.forEach((ie,ve)=>{S[ve]=ie-de}),N.forEach((ie,ve)=>{N[ve]=ie+de})}}if(Object.assign(e,{slides:w,snapGrid:S,slidesGrid:N,slidesSizesGrid:L}),o.centeredSlides&&o.cssMode&&!o.centeredSlidesBounds){setCSSProperty(e.wrapperEl,"--swiper-centered-offset-before",`${-S[0]}px`),setCSSProperty(e.wrapperEl,"--swiper-centered-offset-after",`${e.size/2-L[L.length-1]/2}px`);const le=-e.snapGrid[0],de=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map(ie=>ie+le),e.slidesGrid=e.slidesGrid.map(ie=>ie+de)}if(T!==E&&e.emit("slidesLengthChange"),S.length!==V&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),N.length!==D&&e.emit("slidesGridLengthChange"),o.watchSlidesProgress&&e.updateSlidesOffset(),!v&&!o.cssMode&&(o.effect==="slide"||o.effect==="fade")){const le=`${o.containerModifierClass}backface-hidden`,de=e.$el.hasClass(le);T<=o.maxBackfaceHiddenSlides?de||e.$el.addClass(le):de&&e.$el.removeClass(le)}}function updateAutoHeight(e){const t=this,n=[],o=t.virtual&&t.params.virtual.enabled;let c=0,d;typeof e=="number"?t.setTransition(e):e===!0&&t.setTransition(t.params.speed);const g=r=>o?t.slides.filter(v=>parseInt(v.getAttribute("data-swiper-slide-index"),10)===r)[0]:t.slides.eq(r)[0];if(t.params.slidesPerView!=="auto"&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||$([])).each(r=>{n.push(r)});else for(d=0;d<Math.ceil(t.params.slidesPerView);d+=1){const r=t.activeIndex+d;if(r>t.slides.length&&!o)break;n.push(g(r))}else n.push(g(t.activeIndex));for(d=0;d<n.length;d+=1)if(typeof n[d]<"u"){const r=n[d].offsetHeight;c=r>c?r:c}(c||c===0)&&t.$wrapperEl.css("height",`${c}px`)}function updateSlidesOffset(){const e=this,t=e.slides;for(let n=0;n<t.length;n+=1)t[n].swiperSlideOffset=e.isHorizontal()?t[n].offsetLeft:t[n].offsetTop}function updateSlidesProgress(e=this&&this.translate||0){const t=this,n=t.params,{slides:o,rtlTranslate:c,snapGrid:d}=t;if(o.length===0)return;typeof o[0].swiperSlideOffset>"u"&&t.updateSlidesOffset();let g=-e;c&&(g=e),o.removeClass(n.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(let r=0;r<o.length;r+=1){const v=o[r];let E=v.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(E-=o[0].swiperSlideOffset);const w=(g+(n.centeredSlides?t.minTranslate():0)-E)/(v.swiperSlideSize+n.spaceBetween),T=(g-d[0]+(n.centeredSlides?t.minTranslate():0)-E)/(v.swiperSlideSize+n.spaceBetween),S=-(g-E),N=S+t.slidesSizesGrid[r];(S>=0&&S<t.size-1||N>1&&N<=t.size||S<=0&&N>=t.size)&&(t.visibleSlides.push(v),t.visibleSlidesIndexes.push(r),o.eq(r).addClass(n.slideVisibleClass)),v.progress=c?-w:w,v.originalProgress=c?-T:T}t.visibleSlides=$(t.visibleSlides)}function updateProgress(e){const t=this;if(typeof e>"u"){const E=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*E||0}const n=t.params,o=t.maxTranslate()-t.minTranslate();let{progress:c,isBeginning:d,isEnd:g}=t;const r=d,v=g;o===0?(c=0,d=!0,g=!0):(c=(e-t.minTranslate())/o,d=c<=0,g=c>=1),Object.assign(t,{progress:c,isBeginning:d,isEnd:g}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&t.updateSlidesProgress(e),d&&!r&&t.emit("reachBeginning toEdge"),g&&!v&&t.emit("reachEnd toEdge"),(r&&!d||v&&!g)&&t.emit("fromEdge"),t.emit("progress",c)}function updateSlidesClasses(){const e=this,{slides:t,params:n,$wrapperEl:o,activeIndex:c,realIndex:d}=e,g=e.virtual&&n.virtual.enabled;t.removeClass(`${n.slideActiveClass} ${n.slideNextClass} ${n.slidePrevClass} ${n.slideDuplicateActiveClass} ${n.slideDuplicateNextClass} ${n.slideDuplicatePrevClass}`);let r;g?r=e.$wrapperEl.find(`.${n.slideClass}[data-swiper-slide-index="${c}"]`):r=t.eq(c),r.addClass(n.slideActiveClass),n.loop&&(r.hasClass(n.slideDuplicateClass)?o.children(`.${n.slideClass}:not(.${n.slideDuplicateClass})[data-swiper-slide-index="${d}"]`).addClass(n.slideDuplicateActiveClass):o.children(`.${n.slideClass}.${n.slideDuplicateClass}[data-swiper-slide-index="${d}"]`).addClass(n.slideDuplicateActiveClass));let v=r.nextAll(`.${n.slideClass}`).eq(0).addClass(n.slideNextClass);n.loop&&v.length===0&&(v=t.eq(0),v.addClass(n.slideNextClass));let E=r.prevAll(`.${n.slideClass}`).eq(0).addClass(n.slidePrevClass);n.loop&&E.length===0&&(E=t.eq(-1),E.addClass(n.slidePrevClass)),n.loop&&(v.hasClass(n.slideDuplicateClass)?o.children(`.${n.slideClass}:not(.${n.slideDuplicateClass})[data-swiper-slide-index="${v.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicateNextClass):o.children(`.${n.slideClass}.${n.slideDuplicateClass}[data-swiper-slide-index="${v.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicateNextClass),E.hasClass(n.slideDuplicateClass)?o.children(`.${n.slideClass}:not(.${n.slideDuplicateClass})[data-swiper-slide-index="${E.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicatePrevClass):o.children(`.${n.slideClass}.${n.slideDuplicateClass}[data-swiper-slide-index="${E.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicatePrevClass)),e.emitSlidesClasses()}function updateActiveIndex(e){const t=this,n=t.rtlTranslate?t.translate:-t.translate,{slidesGrid:o,snapGrid:c,params:d,activeIndex:g,realIndex:r,snapIndex:v}=t;let E=e,w;if(typeof E>"u"){for(let S=0;S<o.length;S+=1)typeof o[S+1]<"u"?n>=o[S]&&n<o[S+1]-(o[S+1]-o[S])/2?E=S:n>=o[S]&&n<o[S+1]&&(E=S+1):n>=o[S]&&(E=S);d.normalizeSlideIndex&&(E<0||typeof E>"u")&&(E=0)}if(c.indexOf(n)>=0)w=c.indexOf(n);else{const S=Math.min(d.slidesPerGroupSkip,E);w=S+Math.floor((E-S)/d.slidesPerGroup)}if(w>=c.length&&(w=c.length-1),E===g){w!==v&&(t.snapIndex=w,t.emit("snapIndexChange"));return}const T=parseInt(t.slides.eq(E).attr("data-swiper-slide-index")||E,10);Object.assign(t,{snapIndex:w,realIndex:T,previousIndex:g,activeIndex:E}),t.emit("activeIndexChange"),t.emit("snapIndexChange"),r!==T&&t.emit("realIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&t.emit("slideChange")}function updateClickedSlide(e){const t=this,n=t.params,o=$(e).closest(`.${n.slideClass}`)[0];let c=!1,d;if(o){for(let g=0;g<t.slides.length;g+=1)if(t.slides[g]===o){c=!0,d=g;break}}if(o&&c)t.clickedSlide=o,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt($(o).attr("data-swiper-slide-index"),10):t.clickedIndex=d;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}n.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}const update={updateSize,updateSlides,updateAutoHeight,updateSlidesOffset,updateSlidesProgress,updateProgress,updateSlidesClasses,updateActiveIndex,updateClickedSlide};function getSwiperTranslate(e=this.isHorizontal()?"x":"y"){const t=this,{params:n,rtlTranslate:o,translate:c,$wrapperEl:d}=t;if(n.virtualTranslate)return o?-c:c;if(n.cssMode)return c;let g=getTranslate(d[0],e);return o&&(g=-g),g||0}function setTranslate(e,t){const n=this,{rtlTranslate:o,params:c,$wrapperEl:d,wrapperEl:g,progress:r}=n;let v=0,E=0;const w=0;n.isHorizontal()?v=o?-e:e:E=e,c.roundLengths&&(v=Math.floor(v),E=Math.floor(E)),c.cssMode?g[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-v:-E:c.virtualTranslate||d.transform(`translate3d(${v}px, ${E}px, ${w}px)`),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?v:E;let T;const S=n.maxTranslate()-n.minTranslate();S===0?T=0:T=(e-n.minTranslate())/S,T!==r&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)}function minTranslate(){return-this.snapGrid[0]}function maxTranslate(){return-this.snapGrid[this.snapGrid.length-1]}function translateTo(e=0,t=this.params.speed,n=!0,o=!0,c){const d=this,{params:g,wrapperEl:r}=d;if(d.animating&&g.preventInteractionOnTransition)return!1;const v=d.minTranslate(),E=d.maxTranslate();let w;if(o&&e>v?w=v:o&&e<E?w=E:w=e,d.updateProgress(w),g.cssMode){const T=d.isHorizontal();if(t===0)r[T?"scrollLeft":"scrollTop"]=-w;else{if(!d.support.smoothScroll)return animateCSSModeScroll({swiper:d,targetPosition:-w,side:T?"left":"top"}),!0;r.scrollTo({[T?"left":"top"]:-w,behavior:"smooth"})}return!0}return t===0?(d.setTransition(0),d.setTranslate(w),n&&(d.emit("beforeTransitionStart",t,c),d.emit("transitionEnd"))):(d.setTransition(t),d.setTranslate(w),n&&(d.emit("beforeTransitionStart",t,c),d.emit("transitionStart")),d.animating||(d.animating=!0,d.onTranslateToWrapperTransitionEnd||(d.onTranslateToWrapperTransitionEnd=function(S){!d||d.destroyed||S.target===this&&(d.$wrapperEl[0].removeEventListener("transitionend",d.onTranslateToWrapperTransitionEnd),d.$wrapperEl[0].removeEventListener("webkitTransitionEnd",d.onTranslateToWrapperTransitionEnd),d.onTranslateToWrapperTransitionEnd=null,delete d.onTranslateToWrapperTransitionEnd,n&&d.emit("transitionEnd"))}),d.$wrapperEl[0].addEventListener("transitionend",d.onTranslateToWrapperTransitionEnd),d.$wrapperEl[0].addEventListener("webkitTransitionEnd",d.onTranslateToWrapperTransitionEnd))),!0}const translate={getTranslate:getSwiperTranslate,setTranslate,minTranslate,maxTranslate,translateTo};function setTransition(e,t){const n=this;n.params.cssMode||n.$wrapperEl.transition(e),n.emit("setTransition",e,t)}function transitionEmit({swiper:e,runCallbacks:t,direction:n,step:o}){const{activeIndex:c,previousIndex:d}=e;let g=n;if(g||(c>d?g="next":c<d?g="prev":g="reset"),e.emit(`transition${o}`),t&&c!==d){if(g==="reset"){e.emit(`slideResetTransition${o}`);return}e.emit(`slideChangeTransition${o}`),g==="next"?e.emit(`slideNextTransition${o}`):e.emit(`slidePrevTransition${o}`)}}function transitionStart(e=!0,t){const n=this,{params:o}=n;o.cssMode||(o.autoHeight&&n.updateAutoHeight(),transitionEmit({swiper:n,runCallbacks:e,direction:t,step:"Start"}))}function transitionEnd(e=!0,t){const n=this,{params:o}=n;n.animating=!1,!o.cssMode&&(n.setTransition(0),transitionEmit({swiper:n,runCallbacks:e,direction:t,step:"End"}))}const transition={setTransition,transitionStart,transitionEnd};function slideTo(e=0,t=this.params.speed,n=!0,o,c){if(typeof e!="number"&&typeof e!="string")throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof e}] given.`);if(typeof e=="string"){const U=parseInt(e,10);if(!isFinite(U))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${e}] given.`);e=U}const d=this;let g=e;g<0&&(g=0);const{params:r,snapGrid:v,slidesGrid:E,previousIndex:w,activeIndex:T,rtlTranslate:S,wrapperEl:N,enabled:L}=d;if(d.animating&&r.preventInteractionOnTransition||!L&&!o&&!c)return!1;const P=Math.min(d.params.slidesPerGroupSkip,g);let O=P+Math.floor((g-P)/d.params.slidesPerGroup);O>=v.length&&(O=v.length-1);const V=-v[O];if(r.normalizeSlideIndex)for(let U=0;U<E.length;U+=1){const W=-Math.floor(V*100),Z=Math.floor(E[U]*100),re=Math.floor(E[U+1]*100);typeof E[U+1]<"u"?W>=Z&&W<re-(re-Z)/2?g=U:W>=Z&&W<re&&(g=U+1):W>=Z&&(g=U)}if(d.initialized&&g!==T&&(!d.allowSlideNext&&V<d.translate&&V<d.minTranslate()||!d.allowSlidePrev&&V>d.translate&&V>d.maxTranslate()&&(T||0)!==g))return!1;g!==(w||0)&&n&&d.emit("beforeSlideChangeStart"),d.updateProgress(V);let D;if(g>T?D="next":g<T?D="prev":D="reset",S&&-V===d.translate||!S&&V===d.translate)return d.updateActiveIndex(g),r.autoHeight&&d.updateAutoHeight(),d.updateSlidesClasses(),r.effect!=="slide"&&d.setTranslate(V),D!=="reset"&&(d.transitionStart(n,D),d.transitionEnd(n,D)),!1;if(r.cssMode){const U=d.isHorizontal(),W=S?V:-V;if(t===0){const Z=d.virtual&&d.params.virtual.enabled;Z&&(d.wrapperEl.style.scrollSnapType="none",d._immediateVirtual=!0),N[U?"scrollLeft":"scrollTop"]=W,Z&&requestAnimationFrame(()=>{d.wrapperEl.style.scrollSnapType="",d._swiperImmediateVirtual=!1})}else{if(!d.support.smoothScroll)return animateCSSModeScroll({swiper:d,targetPosition:W,side:U?"left":"top"}),!0;N.scrollTo({[U?"left":"top"]:W,behavior:"smooth"})}return!0}return d.setTransition(t),d.setTranslate(V),d.updateActiveIndex(g),d.updateSlidesClasses(),d.emit("beforeTransitionStart",t,o),d.transitionStart(n,D),t===0?d.transitionEnd(n,D):d.animating||(d.animating=!0,d.onSlideToWrapperTransitionEnd||(d.onSlideToWrapperTransitionEnd=function(W){!d||d.destroyed||W.target===this&&(d.$wrapperEl[0].removeEventListener("transitionend",d.onSlideToWrapperTransitionEnd),d.$wrapperEl[0].removeEventListener("webkitTransitionEnd",d.onSlideToWrapperTransitionEnd),d.onSlideToWrapperTransitionEnd=null,delete d.onSlideToWrapperTransitionEnd,d.transitionEnd(n,D))}),d.$wrapperEl[0].addEventListener("transitionend",d.onSlideToWrapperTransitionEnd),d.$wrapperEl[0].addEventListener("webkitTransitionEnd",d.onSlideToWrapperTransitionEnd)),!0}function slideToLoop(e=0,t=this.params.speed,n=!0,o){if(typeof e=="string"){const g=parseInt(e,10);if(!isFinite(g))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${e}] given.`);e=g}const c=this;let d=e;return c.params.loop&&(d+=c.loopedSlides),c.slideTo(d,t,n,o)}function slideNext(e=this.params.speed,t=!0,n){const o=this,{animating:c,enabled:d,params:g}=o;if(!d)return o;let r=g.slidesPerGroup;g.slidesPerView==="auto"&&g.slidesPerGroup===1&&g.slidesPerGroupAuto&&(r=Math.max(o.slidesPerViewDynamic("current",!0),1));const v=o.activeIndex<g.slidesPerGroupSkip?1:r;if(g.loop){if(c&&g.loopPreventsSlide)return!1;o.loopFix(),o._clientLeft=o.$wrapperEl[0].clientLeft}return g.rewind&&o.isEnd?o.slideTo(0,e,t,n):o.slideTo(o.activeIndex+v,e,t,n)}function slidePrev(e=this.params.speed,t=!0,n){const o=this,{params:c,animating:d,snapGrid:g,slidesGrid:r,rtlTranslate:v,enabled:E}=o;if(!E)return o;if(c.loop){if(d&&c.loopPreventsSlide)return!1;o.loopFix(),o._clientLeft=o.$wrapperEl[0].clientLeft}const w=v?o.translate:-o.translate;function T(O){return O<0?-Math.floor(Math.abs(O)):Math.floor(O)}const S=T(w),N=g.map(O=>T(O));let L=g[N.indexOf(S)-1];if(typeof L>"u"&&c.cssMode){let O;g.forEach((V,D)=>{S>=V&&(O=D)}),typeof O<"u"&&(L=g[O>0?O-1:O])}let P=0;if(typeof L<"u"&&(P=r.indexOf(L),P<0&&(P=o.activeIndex-1),c.slidesPerView==="auto"&&c.slidesPerGroup===1&&c.slidesPerGroupAuto&&(P=P-o.slidesPerViewDynamic("previous",!0)+1,P=Math.max(P,0))),c.rewind&&o.isBeginning){const O=o.params.virtual&&o.params.virtual.enabled&&o.virtual?o.virtual.slides.length-1:o.slides.length-1;return o.slideTo(O,e,t,n)}return o.slideTo(P,e,t,n)}function slideReset(e=this.params.speed,t=!0,n){const o=this;return o.slideTo(o.activeIndex,e,t,n)}function slideToClosest(e=this.params.speed,t=!0,n,o=.5){const c=this;let d=c.activeIndex;const g=Math.min(c.params.slidesPerGroupSkip,d),r=g+Math.floor((d-g)/c.params.slidesPerGroup),v=c.rtlTranslate?c.translate:-c.translate;if(v>=c.snapGrid[r]){const E=c.snapGrid[r],w=c.snapGrid[r+1];v-E>(w-E)*o&&(d+=c.params.slidesPerGroup)}else{const E=c.snapGrid[r-1],w=c.snapGrid[r];v-E<=(w-E)*o&&(d-=c.params.slidesPerGroup)}return d=Math.max(d,0),d=Math.min(d,c.slidesGrid.length-1),c.slideTo(d,e,t,n)}function slideToClickedSlide(){const e=this,{params:t,$wrapperEl:n}=e,o=t.slidesPerView==="auto"?e.slidesPerViewDynamic():t.slidesPerView;let c=e.clickedIndex,d;if(t.loop){if(e.animating)return;d=parseInt($(e.clickedSlide).attr("data-swiper-slide-index"),10),t.centeredSlides?c<e.loopedSlides-o/2||c>e.slides.length-e.loopedSlides+o/2?(e.loopFix(),c=n.children(`.${t.slideClass}[data-swiper-slide-index="${d}"]:not(.${t.slideDuplicateClass})`).eq(0).index(),nextTick(()=>{e.slideTo(c)})):e.slideTo(c):c>e.slides.length-o?(e.loopFix(),c=n.children(`.${t.slideClass}[data-swiper-slide-index="${d}"]:not(.${t.slideDuplicateClass})`).eq(0).index(),nextTick(()=>{e.slideTo(c)})):e.slideTo(c)}else e.slideTo(c)}const slide={slideTo,slideToLoop,slideNext,slidePrev,slideReset,slideToClosest,slideToClickedSlide};function loopCreate(){const e=this,t=getDocument(),{params:n,$wrapperEl:o}=e,c=o.children().length>0?$(o.children()[0].parentNode):o;c.children(`.${n.slideClass}.${n.slideDuplicateClass}`).remove();let d=c.children(`.${n.slideClass}`);if(n.loopFillGroupWithBlank){const v=n.slidesPerGroup-d.length%n.slidesPerGroup;if(v!==n.slidesPerGroup){for(let E=0;E<v;E+=1){const w=$(t.createElement("div")).addClass(`${n.slideClass} ${n.slideBlankClass}`);c.append(w)}d=c.children(`.${n.slideClass}`)}}n.slidesPerView==="auto"&&!n.loopedSlides&&(n.loopedSlides=d.length),e.loopedSlides=Math.ceil(parseFloat(n.loopedSlides||n.slidesPerView,10)),e.loopedSlides+=n.loopAdditionalSlides,e.loopedSlides>d.length&&e.params.loopedSlidesLimit&&(e.loopedSlides=d.length);const g=[],r=[];d.each((v,E)=>{$(v).attr("data-swiper-slide-index",E)});for(let v=0;v<e.loopedSlides;v+=1){const E=v-Math.floor(v/d.length)*d.length;r.push(d.eq(E)[0]),g.unshift(d.eq(d.length-E-1)[0])}for(let v=0;v<r.length;v+=1)c.append($(r[v].cloneNode(!0)).addClass(n.slideDuplicateClass));for(let v=g.length-1;v>=0;v-=1)c.prepend($(g[v].cloneNode(!0)).addClass(n.slideDuplicateClass))}function loopFix(){const e=this;e.emit("beforeLoopFix");const{activeIndex:t,slides:n,loopedSlides:o,allowSlidePrev:c,allowSlideNext:d,snapGrid:g,rtlTranslate:r}=e;let v;e.allowSlidePrev=!0,e.allowSlideNext=!0;const w=-g[t]-e.getTranslate();t<o?(v=n.length-o*3+t,v+=o,e.slideTo(v,0,!1,!0)&&w!==0&&e.setTranslate((r?-e.translate:e.translate)-w)):t>=n.length-o&&(v=-n.length+t+o,v+=o,e.slideTo(v,0,!1,!0)&&w!==0&&e.setTranslate((r?-e.translate:e.translate)-w)),e.allowSlidePrev=c,e.allowSlideNext=d,e.emit("loopFix")}function loopDestroy(){const e=this,{$wrapperEl:t,params:n,slides:o}=e;t.children(`.${n.slideClass}.${n.slideDuplicateClass},.${n.slideClass}.${n.slideBlankClass}`).remove(),o.removeAttr("data-swiper-slide-index")}const loop={loopCreate,loopFix,loopDestroy};function setGrabCursor(e){const t=this;if(t.support.touch||!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const n=t.params.touchEventsTarget==="container"?t.el:t.wrapperEl;n.style.cursor="move",n.style.cursor=e?"grabbing":"grab"}function unsetGrabCursor(){const e=this;e.support.touch||e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e[e.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="")}const grabCursor={setGrabCursor,unsetGrabCursor};function closestElement(e,t=this){function n(o){if(!o||o===getDocument()||o===getWindow())return null;o.assignedSlot&&(o=o.assignedSlot);const c=o.closest(e);return!c&&!o.getRootNode?null:c||n(o.getRootNode().host)}return n(t)}function onTouchStart(e){const t=this,n=getDocument(),o=getWindow(),c=t.touchEventsData,{params:d,touches:g,enabled:r}=t;if(!r||t.animating&&d.preventInteractionOnTransition)return;!t.animating&&d.cssMode&&d.loop&&t.loopFix();let v=e;v.originalEvent&&(v=v.originalEvent);let E=$(v.target);if(d.touchEventsTarget==="wrapper"&&!E.closest(t.wrapperEl).length||(c.isTouchEvent=v.type==="touchstart",!c.isTouchEvent&&"which"in v&&v.which===3)||!c.isTouchEvent&&"button"in v&&v.button>0||c.isTouched&&c.isMoved)return;const w=!!d.noSwipingClass&&d.noSwipingClass!=="",T=e.composedPath?e.composedPath():e.path;w&&v.target&&v.target.shadowRoot&&T&&(E=$(T[0]));const S=d.noSwipingSelector?d.noSwipingSelector:`.${d.noSwipingClass}`,N=!!(v.target&&v.target.shadowRoot);if(d.noSwiping&&(N?closestElement(S,E[0]):E.closest(S)[0])){t.allowClick=!0;return}if(d.swipeHandler&&!E.closest(d.swipeHandler)[0])return;g.currentX=v.type==="touchstart"?v.targetTouches[0].pageX:v.pageX,g.currentY=v.type==="touchstart"?v.targetTouches[0].pageY:v.pageY;const L=g.currentX,P=g.currentY,O=d.edgeSwipeDetection||d.iOSEdgeSwipeDetection,V=d.edgeSwipeThreshold||d.iOSEdgeSwipeThreshold;if(O&&(L<=V||L>=o.innerWidth-V))if(O==="prevent")e.preventDefault();else return;if(Object.assign(c,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),g.startX=L,g.startY=P,c.touchStartTime=now(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,d.threshold>0&&(c.allowThresholdMove=!1),v.type!=="touchstart"){let D=!0;E.is(c.focusableElements)&&(D=!1,E[0].nodeName==="SELECT"&&(c.isTouched=!1)),n.activeElement&&$(n.activeElement).is(c.focusableElements)&&n.activeElement!==E[0]&&n.activeElement.blur();const U=D&&t.allowTouchMove&&d.touchStartPreventDefault;(d.touchStartForcePreventDefault||U)&&!E[0].isContentEditable&&v.preventDefault()}t.params.freeMode&&t.params.freeMode.enabled&&t.freeMode&&t.animating&&!d.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",v)}function onTouchMove(e){const t=getDocument(),n=this,o=n.touchEventsData,{params:c,touches:d,rtlTranslate:g,enabled:r}=n;if(!r)return;let v=e;if(v.originalEvent&&(v=v.originalEvent),!o.isTouched){o.startMoving&&o.isScrolling&&n.emit("touchMoveOpposite",v);return}if(o.isTouchEvent&&v.type!=="touchmove")return;const E=v.type==="touchmove"&&v.targetTouches&&(v.targetTouches[0]||v.changedTouches[0]),w=v.type==="touchmove"?E.pageX:v.pageX,T=v.type==="touchmove"?E.pageY:v.pageY;if(v.preventedByNestedSwiper){d.startX=w,d.startY=T;return}if(!n.allowTouchMove){$(v.target).is(o.focusableElements)||(n.allowClick=!1),o.isTouched&&(Object.assign(d,{startX:w,startY:T,currentX:w,currentY:T}),o.touchStartTime=now());return}if(o.isTouchEvent&&c.touchReleaseOnEdges&&!c.loop){if(n.isVertical()){if(T<d.startY&&n.translate<=n.maxTranslate()||T>d.startY&&n.translate>=n.minTranslate()){o.isTouched=!1,o.isMoved=!1;return}}else if(w<d.startX&&n.translate<=n.maxTranslate()||w>d.startX&&n.translate>=n.minTranslate())return}if(o.isTouchEvent&&t.activeElement&&v.target===t.activeElement&&$(v.target).is(o.focusableElements)){o.isMoved=!0,n.allowClick=!1;return}if(o.allowTouchCallbacks&&n.emit("touchMove",v),v.targetTouches&&v.targetTouches.length>1)return;d.currentX=w,d.currentY=T;const S=d.currentX-d.startX,N=d.currentY-d.startY;if(n.params.threshold&&Math.sqrt(S**2+N**2)<n.params.threshold)return;if(typeof o.isScrolling>"u"){let V;n.isHorizontal()&&d.currentY===d.startY||n.isVertical()&&d.currentX===d.startX?o.isScrolling=!1:S*S+N*N>=25&&(V=Math.atan2(Math.abs(N),Math.abs(S))*180/Math.PI,o.isScrolling=n.isHorizontal()?V>c.touchAngle:90-V>c.touchAngle)}if(o.isScrolling&&n.emit("touchMoveOpposite",v),typeof o.startMoving>"u"&&(d.currentX!==d.startX||d.currentY!==d.startY)&&(o.startMoving=!0),o.isScrolling){o.isTouched=!1;return}if(!o.startMoving)return;n.allowClick=!1,!c.cssMode&&v.cancelable&&v.preventDefault(),c.touchMoveStopPropagation&&!c.nested&&v.stopPropagation(),o.isMoved||(c.loop&&!c.cssMode&&n.loopFix(),o.startTranslate=n.getTranslate(),n.setTransition(0),n.animating&&n.$wrapperEl.trigger("webkitTransitionEnd transitionend"),o.allowMomentumBounce=!1,c.grabCursor&&(n.allowSlideNext===!0||n.allowSlidePrev===!0)&&n.setGrabCursor(!0),n.emit("sliderFirstMove",v)),n.emit("sliderMove",v),o.isMoved=!0;let L=n.isHorizontal()?S:N;d.diff=L,L*=c.touchRatio,g&&(L=-L),n.swipeDirection=L>0?"prev":"next",o.currentTranslate=L+o.startTranslate;let P=!0,O=c.resistanceRatio;if(c.touchReleaseOnEdges&&(O=0),L>0&&o.currentTranslate>n.minTranslate()?(P=!1,c.resistance&&(o.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+o.startTranslate+L)**O)):L<0&&o.currentTranslate<n.maxTranslate()&&(P=!1,c.resistance&&(o.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-o.startTranslate-L)**O)),P&&(v.preventedByNestedSwiper=!0),!n.allowSlideNext&&n.swipeDirection==="next"&&o.currentTranslate<o.startTranslate&&(o.currentTranslate=o.startTranslate),!n.allowSlidePrev&&n.swipeDirection==="prev"&&o.currentTranslate>o.startTranslate&&(o.currentTranslate=o.startTranslate),!n.allowSlidePrev&&!n.allowSlideNext&&(o.currentTranslate=o.startTranslate),c.threshold>0)if(Math.abs(L)>c.threshold||o.allowThresholdMove){if(!o.allowThresholdMove){o.allowThresholdMove=!0,d.startX=d.currentX,d.startY=d.currentY,o.currentTranslate=o.startTranslate,d.diff=n.isHorizontal()?d.currentX-d.startX:d.currentY-d.startY;return}}else{o.currentTranslate=o.startTranslate;return}!c.followFinger||c.cssMode||((c.freeMode&&c.freeMode.enabled&&n.freeMode||c.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),n.params.freeMode&&c.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(o.currentTranslate),n.setTranslate(o.currentTranslate))}function onTouchEnd(e){const t=this,n=t.touchEventsData,{params:o,touches:c,rtlTranslate:d,slidesGrid:g,enabled:r}=t;if(!r)return;let v=e;if(v.originalEvent&&(v=v.originalEvent),n.allowTouchCallbacks&&t.emit("touchEnd",v),n.allowTouchCallbacks=!1,!n.isTouched){n.isMoved&&o.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,n.startMoving=!1;return}o.grabCursor&&n.isMoved&&n.isTouched&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!1);const E=now(),w=E-n.touchStartTime;if(t.allowClick){const D=v.path||v.composedPath&&v.composedPath();t.updateClickedSlide(D&&D[0]||v.target),t.emit("tap click",v),w<300&&E-n.lastClickTime<300&&t.emit("doubleTap doubleClick",v)}if(n.lastClickTime=now(),nextTick(()=>{t.destroyed||(t.allowClick=!0)}),!n.isTouched||!n.isMoved||!t.swipeDirection||c.diff===0||n.currentTranslate===n.startTranslate){n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;return}n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;let T;if(o.followFinger?T=d?t.translate:-t.translate:T=-n.currentTranslate,o.cssMode)return;if(t.params.freeMode&&o.freeMode.enabled){t.freeMode.onTouchEnd({currentPos:T});return}let S=0,N=t.slidesSizesGrid[0];for(let D=0;D<g.length;D+=D<o.slidesPerGroupSkip?1:o.slidesPerGroup){const U=D<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;typeof g[D+U]<"u"?T>=g[D]&&T<g[D+U]&&(S=D,N=g[D+U]-g[D]):T>=g[D]&&(S=D,N=g[g.length-1]-g[g.length-2])}let L=null,P=null;o.rewind&&(t.isBeginning?P=t.params.virtual&&t.params.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(L=0));const O=(T-g[S])/N,V=S<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(w>o.longSwipesMs){if(!o.longSwipes){t.slideTo(t.activeIndex);return}t.swipeDirection==="next"&&(O>=o.longSwipesRatio?t.slideTo(o.rewind&&t.isEnd?L:S+V):t.slideTo(S)),t.swipeDirection==="prev"&&(O>1-o.longSwipesRatio?t.slideTo(S+V):P!==null&&O<0&&Math.abs(O)>o.longSwipesRatio?t.slideTo(P):t.slideTo(S))}else{if(!o.shortSwipes){t.slideTo(t.activeIndex);return}t.navigation&&(v.target===t.navigation.nextEl||v.target===t.navigation.prevEl)?v.target===t.navigation.nextEl?t.slideTo(S+V):t.slideTo(S):(t.swipeDirection==="next"&&t.slideTo(L!==null?L:S+V),t.swipeDirection==="prev"&&t.slideTo(P!==null?P:S))}}function onResize(){const e=this,{params:t,el:n}=e;if(n&&n.offsetWidth===0)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:o,allowSlidePrev:c,snapGrid:d}=e;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),(t.slidesPerView==="auto"||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.run(),e.allowSlidePrev=c,e.allowSlideNext=o,e.params.watchOverflow&&d!==e.snapGrid&&e.checkOverflow()}function onClick(e){const t=this;!t.enabled||t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))}function onScroll(){const e=this,{wrapperEl:t,rtlTranslate:n,enabled:o}=e;if(!o)return;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,e.translate===0&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();let c;const d=e.maxTranslate()-e.minTranslate();d===0?c=0:c=(e.translate-e.minTranslate())/d,c!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}let dummyEventAttached=!1;function dummyEventListener(){}const events=(e,t)=>{const n=getDocument(),{params:o,touchEvents:c,el:d,wrapperEl:g,device:r,support:v}=e,E=!!o.nested,w=t==="on"?"addEventListener":"removeEventListener",T=t;if(!v.touch)d[w](c.start,e.onTouchStart,!1),n[w](c.move,e.onTouchMove,E),n[w](c.end,e.onTouchEnd,!1);else{const S=c.start==="touchstart"&&v.passiveListener&&o.passiveListeners?{passive:!0,capture:!1}:!1;d[w](c.start,e.onTouchStart,S),d[w](c.move,e.onTouchMove,v.passiveListener?{passive:!1,capture:E}:E),d[w](c.end,e.onTouchEnd,S),c.cancel&&d[w](c.cancel,e.onTouchEnd,S)}(o.preventClicks||o.preventClicksPropagation)&&d[w]("click",e.onClick,!0),o.cssMode&&g[w]("scroll",e.onScroll),o.updateOnWindowResize?e[T](r.ios||r.android?"resize orientationchange observerUpdate":"resize observerUpdate",onResize,!0):e[T]("observerUpdate",onResize,!0)};function attachEvents(){const e=this,t=getDocument(),{params:n,support:o}=e;e.onTouchStart=onTouchStart.bind(e),e.onTouchMove=onTouchMove.bind(e),e.onTouchEnd=onTouchEnd.bind(e),n.cssMode&&(e.onScroll=onScroll.bind(e)),e.onClick=onClick.bind(e),o.touch&&!dummyEventAttached&&(t.addEventListener("touchstart",dummyEventListener),dummyEventAttached=!0),events(e,"on")}function detachEvents(){events(this,"off")}const events$1={attachEvents,detachEvents},isGridEnabled=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;function setBreakpoint(){const e=this,{activeIndex:t,initialized:n,loopedSlides:o=0,params:c,$el:d}=e,g=c.breakpoints;if(!g||g&&Object.keys(g).length===0)return;const r=e.getBreakpoint(g,e.params.breakpointsBase,e.el);if(!r||e.currentBreakpoint===r)return;const E=(r in g?g[r]:void 0)||e.originalParams,w=isGridEnabled(e,c),T=isGridEnabled(e,E),S=c.enabled;w&&!T?(d.removeClass(`${c.containerModifierClass}grid ${c.containerModifierClass}grid-column`),e.emitContainerClasses()):!w&&T&&(d.addClass(`${c.containerModifierClass}grid`),(E.grid.fill&&E.grid.fill==="column"||!E.grid.fill&&c.grid.fill==="column")&&d.addClass(`${c.containerModifierClass}grid-column`),e.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(O=>{const V=c[O]&&c[O].enabled,D=E[O]&&E[O].enabled;V&&!D&&e[O].disable(),!V&&D&&e[O].enable()});const N=E.direction&&E.direction!==c.direction,L=c.loop&&(E.slidesPerView!==c.slidesPerView||N);N&&n&&e.changeDirection(),extend$1(e.params,E);const P=e.params.enabled;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),S&&!P?e.disable():!S&&P&&e.enable(),e.currentBreakpoint=r,e.emit("_beforeBreakpoint",E),L&&n&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-o+e.loopedSlides,0,!1)),e.emit("breakpoint",E)}function getBreakpoint(e,t="window",n){if(!e||t==="container"&&!n)return;let o=!1;const c=getWindow(),d=t==="window"?c.innerHeight:n.clientHeight,g=Object.keys(e).map(r=>{if(typeof r=="string"&&r.indexOf("@")===0){const v=parseFloat(r.substr(1));return{value:d*v,point:r}}return{value:r,point:r}});g.sort((r,v)=>parseInt(r.value,10)-parseInt(v.value,10));for(let r=0;r<g.length;r+=1){const{point:v,value:E}=g[r];t==="window"?c.matchMedia(`(min-width: ${E}px)`).matches&&(o=v):E<=n.clientWidth&&(o=v)}return o||"max"}const breakpoints={setBreakpoint,getBreakpoint};function prepareClasses(e,t){const n=[];return e.forEach(o=>{typeof o=="object"?Object.keys(o).forEach(c=>{o[c]&&n.push(t+c)}):typeof o=="string"&&n.push(t+o)}),n}function addClasses(){const e=this,{classNames:t,params:n,rtl:o,$el:c,device:d,support:g}=e,r=prepareClasses(["initialized",n.direction,{"pointer-events":!g.touch},{"free-mode":e.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:o},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&n.grid.fill==="column"},{android:d.android},{ios:d.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);t.push(...r),c.addClass([...t].join(" ")),e.emitContainerClasses()}function removeClasses(){const e=this,{$el:t,classNames:n}=e;t.removeClass(n.join(" ")),e.emitContainerClasses()}const classes={addClasses,removeClasses};function loadImage(e,t,n,o,c,d){const g=getWindow();let r;function v(){d&&d()}!$(e).parent("picture")[0]&&(!e.complete||!c)&&t?(r=new g.Image,r.onload=v,r.onerror=v,o&&(r.sizes=o),n&&(r.srcset=n),t&&(r.src=t)):v()}function preloadImages(){const e=this;e.imagesToLoad=e.$el.find("img");function t(){typeof e>"u"||e===null||!e||e.destroyed||(e.imagesLoaded!==void 0&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}for(let n=0;n<e.imagesToLoad.length;n+=1){const o=e.imagesToLoad[n];e.loadImage(o,o.currentSrc||o.getAttribute("src"),o.srcset||o.getAttribute("srcset"),o.sizes||o.getAttribute("sizes"),!0,t)}}const images={loadImage,preloadImages};function checkOverflow(){const e=this,{isLocked:t,params:n}=e,{slidesOffsetBefore:o}=n;if(o){const c=e.slides.length-1,d=e.slidesGrid[c]+e.slidesSizesGrid[c]+o*2;e.isLocked=e.size>d}else e.isLocked=e.snapGrid.length===1;n.allowSlideNext===!0&&(e.allowSlideNext=!e.isLocked),n.allowSlidePrev===!0&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}const checkOverflow$1={checkOverflow},defaults$2={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function moduleExtendParams(e,t){return function(o={}){const c=Object.keys(o)[0],d=o[c];if(typeof d!="object"||d===null){extend$1(t,o);return}if(["navigation","pagination","scrollbar"].indexOf(c)>=0&&e[c]===!0&&(e[c]={auto:!0}),!(c in e&&"enabled"in d)){extend$1(t,o);return}e[c]===!0&&(e[c]={enabled:!0}),typeof e[c]=="object"&&!("enabled"in e[c])&&(e[c].enabled=!0),e[c]||(e[c]={enabled:!1}),extend$1(t,o)}}const prototypes={eventsEmitter,update,translate,transition,slide,loop,grabCursor,events:events$1,breakpoints,checkOverflow:checkOverflow$1,classes,images},extendedDefaults={};class Swiper$1{constructor(...t){let n,o;if(t.length===1&&t[0].constructor&&Object.prototype.toString.call(t[0]).slice(8,-1)==="Object"?o=t[0]:[n,o]=t,o||(o={}),o=extend$1({},o),n&&!o.el&&(o.el=n),o.el&&$(o.el).length>1){const r=[];return $(o.el).each(v=>{const E=extend$1({},o,{el:v});r.push(new Swiper$1(E))}),r}const c=this;c.__swiper__=!0,c.support=getSupport(),c.device=getDevice({userAgent:o.userAgent}),c.browser=getBrowser(),c.eventsListeners={},c.eventsAnyListeners=[],c.modules=[...c.__modules__],o.modules&&Array.isArray(o.modules)&&c.modules.push(...o.modules);const d={};c.modules.forEach(r=>{r({swiper:c,extendParams:moduleExtendParams(o,d),on:c.on.bind(c),once:c.once.bind(c),off:c.off.bind(c),emit:c.emit.bind(c)})});const g=extend$1({},defaults$2,d);return c.params=extend$1({},g,extendedDefaults,o),c.originalParams=extend$1({},c.params),c.passedParams=extend$1({},o),c.params&&c.params.on&&Object.keys(c.params.on).forEach(r=>{c.on(r,c.params.on[r])}),c.params&&c.params.onAny&&c.onAny(c.params.onAny),c.$=$,Object.assign(c,{enabled:c.params.enabled,el:n,classNames:[],slides:$(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return c.params.direction==="horizontal"},isVertical(){return c.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:c.params.allowSlideNext,allowSlidePrev:c.params.allowSlidePrev,touchEvents:function(){const v=["touchstart","touchmove","touchend","touchcancel"],E=["pointerdown","pointermove","pointerup"];return c.touchEventsTouch={start:v[0],move:v[1],end:v[2],cancel:v[3]},c.touchEventsDesktop={start:E[0],move:E[1],end:E[2]},c.support.touch||!c.params.simulateTouch?c.touchEventsTouch:c.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:c.params.focusableElements,lastClickTime:now(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:c.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),c.emit("_swiper"),c.params.init&&c.init(),c}enable(){const t=this;t.enabled||(t.enabled=!0,t.params.grabCursor&&t.setGrabCursor(),t.emit("enable"))}disable(){const t=this;!t.enabled||(t.enabled=!1,t.params.grabCursor&&t.unsetGrabCursor(),t.emit("disable"))}setProgress(t,n){const o=this;t=Math.min(Math.max(t,0),1);const c=o.minTranslate(),g=(o.maxTranslate()-c)*t+c;o.translateTo(g,typeof n>"u"?0:n),o.updateActiveIndex(),o.updateSlidesClasses()}emitContainerClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const n=t.el.className.split(" ").filter(o=>o.indexOf("swiper")===0||o.indexOf(t.params.containerModifierClass)===0);t.emit("_containerClasses",n.join(" "))}getSlideClasses(t){const n=this;return n.destroyed?"":t.className.split(" ").filter(o=>o.indexOf("swiper-slide")===0||o.indexOf(n.params.slideClass)===0).join(" ")}emitSlidesClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const n=[];t.slides.each(o=>{const c=t.getSlideClasses(o);n.push({slideEl:o,classNames:c}),t.emit("_slideClass",o,c)}),t.emit("_slideClasses",n)}slidesPerViewDynamic(t="current",n=!1){const o=this,{params:c,slides:d,slidesGrid:g,slidesSizesGrid:r,size:v,activeIndex:E}=o;let w=1;if(c.centeredSlides){let T=d[E].swiperSlideSize,S;for(let N=E+1;N<d.length;N+=1)d[N]&&!S&&(T+=d[N].swiperSlideSize,w+=1,T>v&&(S=!0));for(let N=E-1;N>=0;N-=1)d[N]&&!S&&(T+=d[N].swiperSlideSize,w+=1,T>v&&(S=!0))}else if(t==="current")for(let T=E+1;T<d.length;T+=1)(n?g[T]+r[T]-g[E]<v:g[T]-g[E]<v)&&(w+=1);else for(let T=E-1;T>=0;T-=1)g[E]-g[T]<v&&(w+=1);return w}update(){const t=this;if(!t||t.destroyed)return;const{snapGrid:n,params:o}=t;o.breakpoints&&t.setBreakpoint(),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses();function c(){const g=t.rtlTranslate?t.translate*-1:t.translate,r=Math.min(Math.max(g,t.maxTranslate()),t.minTranslate());t.setTranslate(r),t.updateActiveIndex(),t.updateSlidesClasses()}let d;t.params.freeMode&&t.params.freeMode.enabled?(c(),t.params.autoHeight&&t.updateAutoHeight()):((t.params.slidesPerView==="auto"||t.params.slidesPerView>1)&&t.isEnd&&!t.params.centeredSlides?d=t.slideTo(t.slides.length-1,0,!1,!0):d=t.slideTo(t.activeIndex,0,!1,!0),d||c()),o.watchOverflow&&n!==t.snapGrid&&t.checkOverflow(),t.emit("update")}changeDirection(t,n=!0){const o=this,c=o.params.direction;return t||(t=c==="horizontal"?"vertical":"horizontal"),t===c||t!=="horizontal"&&t!=="vertical"||(o.$el.removeClass(`${o.params.containerModifierClass}${c}`).addClass(`${o.params.containerModifierClass}${t}`),o.emitContainerClasses(),o.params.direction=t,o.slides.each(d=>{t==="vertical"?d.style.width="":d.style.height=""}),o.emit("changeDirection"),n&&o.update()),o}changeLanguageDirection(t){const n=this;n.rtl&&t==="rtl"||!n.rtl&&t==="ltr"||(n.rtl=t==="rtl",n.rtlTranslate=n.params.direction==="horizontal"&&n.rtl,n.rtl?(n.$el.addClass(`${n.params.containerModifierClass}rtl`),n.el.dir="rtl"):(n.$el.removeClass(`${n.params.containerModifierClass}rtl`),n.el.dir="ltr"),n.update())}mount(t){const n=this;if(n.mounted)return!0;const o=$(t||n.params.el);if(t=o[0],!t)return!1;t.swiper=n;const c=()=>`.${(n.params.wrapperClass||"").trim().split(" ").join(".")}`;let g=(()=>{if(t&&t.shadowRoot&&t.shadowRoot.querySelector){const r=$(t.shadowRoot.querySelector(c()));return r.children=v=>o.children(v),r}return o.children?o.children(c()):$(o).children(c())})();if(g.length===0&&n.params.createElements){const v=getDocument().createElement("div");g=$(v),v.className=n.params.wrapperClass,o.append(v),o.children(`.${n.params.slideClass}`).each(E=>{g.append(E)})}return Object.assign(n,{$el:o,el:t,$wrapperEl:g,wrapperEl:g[0],mounted:!0,rtl:t.dir.toLowerCase()==="rtl"||o.css("direction")==="rtl",rtlTranslate:n.params.direction==="horizontal"&&(t.dir.toLowerCase()==="rtl"||o.css("direction")==="rtl"),wrongRTL:g.css("display")==="-webkit-box"}),!0}init(t){const n=this;return n.initialized||n.mount(t)===!1||(n.emit("beforeInit"),n.params.breakpoints&&n.setBreakpoint(),n.addClasses(),n.params.loop&&n.loopCreate(),n.updateSize(),n.updateSlides(),n.params.watchOverflow&&n.checkOverflow(),n.params.grabCursor&&n.enabled&&n.setGrabCursor(),n.params.preloadImages&&n.preloadImages(),n.params.loop?n.slideTo(n.params.initialSlide+n.loopedSlides,0,n.params.runCallbacksOnInit,!1,!0):n.slideTo(n.params.initialSlide,0,n.params.runCallbacksOnInit,!1,!0),n.attachEvents(),n.initialized=!0,n.emit("init"),n.emit("afterInit")),n}destroy(t=!0,n=!0){const o=this,{params:c,$el:d,$wrapperEl:g,slides:r}=o;return typeof o.params>"u"||o.destroyed||(o.emit("beforeDestroy"),o.initialized=!1,o.detachEvents(),c.loop&&o.loopDestroy(),n&&(o.removeClasses(),d.removeAttr("style"),g.removeAttr("style"),r&&r.length&&r.removeClass([c.slideVisibleClass,c.slideActiveClass,c.slideNextClass,c.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),o.emit("destroy"),Object.keys(o.eventsListeners).forEach(v=>{o.off(v)}),t!==!1&&(o.$el[0].swiper=null,deleteProps(o)),o.destroyed=!0),null}static extendDefaults(t){extend$1(extendedDefaults,t)}static get extendedDefaults(){return extendedDefaults}static get defaults(){return defaults$2}static installModule(t){Swiper$1.prototype.__modules__||(Swiper$1.prototype.__modules__=[]);const n=Swiper$1.prototype.__modules__;typeof t=="function"&&n.indexOf(t)<0&&n.push(t)}static use(t){return Array.isArray(t)?(t.forEach(n=>Swiper$1.installModule(n)),Swiper$1):(Swiper$1.installModule(t),Swiper$1)}}Object.keys(prototypes).forEach(e=>{Object.keys(prototypes[e]).forEach(t=>{Swiper$1.prototype[t]=prototypes[e][t]})});Swiper$1.use([Resize,Observer]);function Mousewheel({swiper:e,extendParams:t,on:n,emit:o}){const c=getWindow();t({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null}}),e.mousewheel={enabled:!1};let d,g=now(),r;const v=[];function E(D){let re=0,ae=0,ce=0,ne=0;return"detail"in D&&(ae=D.detail),"wheelDelta"in D&&(ae=-D.wheelDelta/120),"wheelDeltaY"in D&&(ae=-D.wheelDeltaY/120),"wheelDeltaX"in D&&(re=-D.wheelDeltaX/120),"axis"in D&&D.axis===D.HORIZONTAL_AXIS&&(re=ae,ae=0),ce=re*10,ne=ae*10,"deltaY"in D&&(ne=D.deltaY),"deltaX"in D&&(ce=D.deltaX),D.shiftKey&&!ce&&(ce=ne,ne=0),(ce||ne)&&D.deltaMode&&(D.deltaMode===1?(ce*=40,ne*=40):(ce*=800,ne*=800)),ce&&!re&&(re=ce<1?-1:1),ne&&!ae&&(ae=ne<1?-1:1),{spinX:re,spinY:ae,pixelX:ce,pixelY:ne}}function w(){!e.enabled||(e.mouseEntered=!0)}function T(){!e.enabled||(e.mouseEntered=!1)}function S(D){return e.params.mousewheel.thresholdDelta&&D.delta<e.params.mousewheel.thresholdDelta||e.params.mousewheel.thresholdTime&&now()-g<e.params.mousewheel.thresholdTime?!1:D.delta>=6&&now()-g<60?!0:(D.direction<0?(!e.isEnd||e.params.loop)&&!e.animating&&(e.slideNext(),o("scroll",D.raw)):(!e.isBeginning||e.params.loop)&&!e.animating&&(e.slidePrev(),o("scroll",D.raw)),g=new c.Date().getTime(),!1)}function N(D){const U=e.params.mousewheel;if(D.direction<0){if(e.isEnd&&!e.params.loop&&U.releaseOnEdges)return!0}else if(e.isBeginning&&!e.params.loop&&U.releaseOnEdges)return!0;return!1}function L(D){let U=D,W=!0;if(!e.enabled)return;const Z=e.params.mousewheel;e.params.cssMode&&U.preventDefault();let re=e.$el;if(e.params.mousewheel.eventsTarget!=="container"&&(re=$(e.params.mousewheel.eventsTarget)),!e.mouseEntered&&!re[0].contains(U.target)&&!Z.releaseOnEdges)return!0;U.originalEvent&&(U=U.originalEvent);let ae=0;const ce=e.rtlTranslate?-1:1,ne=E(U);if(Z.forceToAxis)if(e.isHorizontal())if(Math.abs(ne.pixelX)>Math.abs(ne.pixelY))ae=-ne.pixelX*ce;else return!0;else if(Math.abs(ne.pixelY)>Math.abs(ne.pixelX))ae=-ne.pixelY;else return!0;else ae=Math.abs(ne.pixelX)>Math.abs(ne.pixelY)?-ne.pixelX*ce:-ne.pixelY;if(ae===0)return!0;Z.invert&&(ae=-ae);let le=e.getTranslate()+ae*Z.sensitivity;if(le>=e.minTranslate()&&(le=e.minTranslate()),le<=e.maxTranslate()&&(le=e.maxTranslate()),W=e.params.loop?!0:!(le===e.minTranslate()||le===e.maxTranslate()),W&&e.params.nested&&U.stopPropagation(),!e.params.freeMode||!e.params.freeMode.enabled){const de={time:now(),delta:Math.abs(ae),direction:Math.sign(ae),raw:D};v.length>=2&&v.shift();const ie=v.length?v[v.length-1]:void 0;if(v.push(de),ie?(de.direction!==ie.direction||de.delta>ie.delta||de.time>ie.time+150)&&S(de):S(de),N(de))return!0}else{const de={time:now(),delta:Math.abs(ae),direction:Math.sign(ae)},ie=r&&de.time<r.time+500&&de.delta<=r.delta&&de.direction===r.direction;if(!ie){r=void 0,e.params.loop&&e.loopFix();let ve=e.getTranslate()+ae*Z.sensitivity;const Pe=e.isBeginning,ct=e.isEnd;if(ve>=e.minTranslate()&&(ve=e.minTranslate()),ve<=e.maxTranslate()&&(ve=e.maxTranslate()),e.setTransition(0),e.setTranslate(ve),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses(),(!Pe&&e.isBeginning||!ct&&e.isEnd)&&e.updateSlidesClasses(),e.params.freeMode.sticky){clearTimeout(d),d=void 0,v.length>=15&&v.shift();const ge=v.length?v[v.length-1]:void 0,Me=v[0];if(v.push(de),ge&&(de.delta>ge.delta||de.direction!==ge.direction))v.splice(0);else if(v.length>=15&&de.time-Me.time<500&&Me.delta-de.delta>=1&&de.delta<=6){const Ue=ae>0?.8:.2;r=de,v.splice(0),d=nextTick(()=>{e.slideToClosest(e.params.speed,!0,void 0,Ue)},0)}d||(d=nextTick(()=>{r=de,v.splice(0),e.slideToClosest(e.params.speed,!0,void 0,.5)},500))}if(ie||o("scroll",U),e.params.autoplay&&e.params.autoplayDisableOnInteraction&&e.autoplay.stop(),ve===e.minTranslate()||ve===e.maxTranslate())return!0}}return U.preventDefault?U.preventDefault():U.returnValue=!1,!1}function P(D){let U=e.$el;e.params.mousewheel.eventsTarget!=="container"&&(U=$(e.params.mousewheel.eventsTarget)),U[D]("mouseenter",w),U[D]("mouseleave",T),U[D]("wheel",L)}function O(){return e.params.cssMode?(e.wrapperEl.removeEventListener("wheel",L),!0):e.mousewheel.enabled?!1:(P("on"),e.mousewheel.enabled=!0,!0)}function V(){return e.params.cssMode?(e.wrapperEl.addEventListener(event,L),!0):e.mousewheel.enabled?(P("off"),e.mousewheel.enabled=!1,!0):!1}n("init",()=>{!e.params.mousewheel.enabled&&e.params.cssMode&&V(),e.params.mousewheel.enabled&&O()}),n("destroy",()=>{e.params.cssMode&&O(),e.mousewheel.enabled&&V()}),Object.assign(e.mousewheel,{enable:O,disable:V})}function createElementIfNotDefined(e,t,n,o){const c=getDocument();return e.params.createElements&&Object.keys(o).forEach(d=>{if(!n[d]&&n.auto===!0){let g=e.$el.children(`.${o[d]}`)[0];g||(g=c.createElement("div"),g.className=o[d],e.$el.append(g)),n[d]=g,t[d]=g}}),n}function Navigation({swiper:e,extendParams:t,on:n,emit:o}){t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,$nextEl:null,prevEl:null,$prevEl:null};function c(N){let L;return N&&(L=$(N),e.params.uniqueNavElements&&typeof N=="string"&&L.length>1&&e.$el.find(N).length===1&&(L=e.$el.find(N))),L}function d(N,L){const P=e.params.navigation;N&&N.length>0&&(N[L?"addClass":"removeClass"](P.disabledClass),N[0]&&N[0].tagName==="BUTTON"&&(N[0].disabled=L),e.params.watchOverflow&&e.enabled&&N[e.isLocked?"addClass":"removeClass"](P.lockClass))}function g(){if(e.params.loop)return;const{$nextEl:N,$prevEl:L}=e.navigation;d(L,e.isBeginning&&!e.params.rewind),d(N,e.isEnd&&!e.params.rewind)}function r(N){N.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),o("navigationPrev"))}function v(N){N.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),o("navigationNext"))}function E(){const N=e.params.navigation;if(e.params.navigation=createElementIfNotDefined(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(N.nextEl||N.prevEl))return;const L=c(N.nextEl),P=c(N.prevEl);L&&L.length>0&&L.on("click",v),P&&P.length>0&&P.on("click",r),Object.assign(e.navigation,{$nextEl:L,nextEl:L&&L[0],$prevEl:P,prevEl:P&&P[0]}),e.enabled||(L&&L.addClass(N.lockClass),P&&P.addClass(N.lockClass))}function w(){const{$nextEl:N,$prevEl:L}=e.navigation;N&&N.length&&(N.off("click",v),N.removeClass(e.params.navigation.disabledClass)),L&&L.length&&(L.off("click",r),L.removeClass(e.params.navigation.disabledClass))}n("init",()=>{e.params.navigation.enabled===!1?S():(E(),g())}),n("toEdge fromEdge lock unlock",()=>{g()}),n("destroy",()=>{w()}),n("enable disable",()=>{const{$nextEl:N,$prevEl:L}=e.navigation;N&&N[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass),L&&L[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass)}),n("click",(N,L)=>{const{$nextEl:P,$prevEl:O}=e.navigation,V=L.target;if(e.params.navigation.hideOnClick&&!$(V).is(O)&&!$(V).is(P)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===V||e.pagination.el.contains(V)))return;let D;P?D=P.hasClass(e.params.navigation.hiddenClass):O&&(D=O.hasClass(e.params.navigation.hiddenClass)),o(D===!0?"navigationShow":"navigationHide"),P&&P.toggleClass(e.params.navigation.hiddenClass),O&&O.toggleClass(e.params.navigation.hiddenClass)}});const T=()=>{e.$el.removeClass(e.params.navigation.navigationDisabledClass),E(),g()},S=()=>{e.$el.addClass(e.params.navigation.navigationDisabledClass),w()};Object.assign(e.navigation,{enable:T,disable:S,update:g,init:E,destroy:w})}function classesToSelector(e=""){return`.${e.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}`}function Pagination({swiper:e,extendParams:t,on:n,emit:o}){const c="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:P=>P,formatFractionTotal:P=>P,bulletClass:`${c}-bullet`,bulletActiveClass:`${c}-bullet-active`,modifierClass:`${c}-`,currentClass:`${c}-current`,totalClass:`${c}-total`,hiddenClass:`${c}-hidden`,progressbarFillClass:`${c}-progressbar-fill`,progressbarOppositeClass:`${c}-progressbar-opposite`,clickableClass:`${c}-clickable`,lockClass:`${c}-lock`,horizontalClass:`${c}-horizontal`,verticalClass:`${c}-vertical`,paginationDisabledClass:`${c}-disabled`}}),e.pagination={el:null,$el:null,bullets:[]};let d,g=0;function r(){return!e.params.pagination.el||!e.pagination.el||!e.pagination.$el||e.pagination.$el.length===0}function v(P,O){const{bulletActiveClass:V}=e.params.pagination;P[O]().addClass(`${V}-${O}`)[O]().addClass(`${V}-${O}-${O}`)}function E(){const P=e.rtl,O=e.params.pagination;if(r())return;const V=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,D=e.pagination.$el;let U;const W=e.params.loop?Math.ceil((V-e.loopedSlides*2)/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(U=Math.ceil((e.activeIndex-e.loopedSlides)/e.params.slidesPerGroup),U>V-1-e.loopedSlides*2&&(U-=V-e.loopedSlides*2),U>W-1&&(U-=W),U<0&&e.params.paginationType!=="bullets"&&(U=W+U)):typeof e.snapIndex<"u"?U=e.snapIndex:U=e.activeIndex||0,O.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const Z=e.pagination.bullets;let re,ae,ce;if(O.dynamicBullets&&(d=Z.eq(0)[e.isHorizontal()?"outerWidth":"outerHeight"](!0),D.css(e.isHorizontal()?"width":"height",`${d*(O.dynamicMainBullets+4)}px`),O.dynamicMainBullets>1&&e.previousIndex!==void 0&&(g+=U-(e.previousIndex-e.loopedSlides||0),g>O.dynamicMainBullets-1?g=O.dynamicMainBullets-1:g<0&&(g=0)),re=Math.max(U-g,0),ae=re+(Math.min(Z.length,O.dynamicMainBullets)-1),ce=(ae+re)/2),Z.removeClass(["","-next","-next-next","-prev","-prev-prev","-main"].map(ne=>`${O.bulletActiveClass}${ne}`).join(" ")),D.length>1)Z.each(ne=>{const le=$(ne),de=le.index();de===U&&le.addClass(O.bulletActiveClass),O.dynamicBullets&&(de>=re&&de<=ae&&le.addClass(`${O.bulletActiveClass}-main`),de===re&&v(le,"prev"),de===ae&&v(le,"next"))});else{const ne=Z.eq(U),le=ne.index();if(ne.addClass(O.bulletActiveClass),O.dynamicBullets){const de=Z.eq(re),ie=Z.eq(ae);for(let ve=re;ve<=ae;ve+=1)Z.eq(ve).addClass(`${O.bulletActiveClass}-main`);if(e.params.loop)if(le>=Z.length){for(let ve=O.dynamicMainBullets;ve>=0;ve-=1)Z.eq(Z.length-ve).addClass(`${O.bulletActiveClass}-main`);Z.eq(Z.length-O.dynamicMainBullets-1).addClass(`${O.bulletActiveClass}-prev`)}else v(de,"prev"),v(ie,"next");else v(de,"prev"),v(ie,"next")}}if(O.dynamicBullets){const ne=Math.min(Z.length,O.dynamicMainBullets+4),le=(d*ne-d)/2-ce*d,de=P?"right":"left";Z.css(e.isHorizontal()?de:"top",`${le}px`)}}if(O.type==="fraction"&&(D.find(classesToSelector(O.currentClass)).text(O.formatFractionCurrent(U+1)),D.find(classesToSelector(O.totalClass)).text(O.formatFractionTotal(W))),O.type==="progressbar"){let Z;O.progressbarOpposite?Z=e.isHorizontal()?"vertical":"horizontal":Z=e.isHorizontal()?"horizontal":"vertical";const re=(U+1)/W;let ae=1,ce=1;Z==="horizontal"?ae=re:ce=re,D.find(classesToSelector(O.progressbarFillClass)).transform(`translate3d(0,0,0) scaleX(${ae}) scaleY(${ce})`).transition(e.params.speed)}O.type==="custom"&&O.renderCustom?(D.html(O.renderCustom(e,U+1,W)),o("paginationRender",D[0])):o("paginationUpdate",D[0]),e.params.watchOverflow&&e.enabled&&D[e.isLocked?"addClass":"removeClass"](O.lockClass)}function w(){const P=e.params.pagination;if(r())return;const O=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,V=e.pagination.$el;let D="";if(P.type==="bullets"){let U=e.params.loop?Math.ceil((O-e.loopedSlides*2)/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&!e.params.loop&&U>O&&(U=O);for(let W=0;W<U;W+=1)P.renderBullet?D+=P.renderBullet.call(e,W,P.bulletClass):D+=`<${P.bulletElement} class="${P.bulletClass}"></${P.bulletElement}>`;V.html(D),e.pagination.bullets=V.find(classesToSelector(P.bulletClass))}P.type==="fraction"&&(P.renderFraction?D=P.renderFraction.call(e,P.currentClass,P.totalClass):D=`<span class="${P.currentClass}"></span> / <span class="${P.totalClass}"></span>`,V.html(D)),P.type==="progressbar"&&(P.renderProgressbar?D=P.renderProgressbar.call(e,P.progressbarFillClass):D=`<span class="${P.progressbarFillClass}"></span>`,V.html(D)),P.type!=="custom"&&o("paginationRender",e.pagination.$el[0])}function T(){e.params.pagination=createElementIfNotDefined(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const P=e.params.pagination;if(!P.el)return;let O=$(P.el);O.length!==0&&(e.params.uniqueNavElements&&typeof P.el=="string"&&O.length>1&&(O=e.$el.find(P.el),O.length>1&&(O=O.filter(V=>$(V).parents(".swiper")[0]===e.el))),P.type==="bullets"&&P.clickable&&O.addClass(P.clickableClass),O.addClass(P.modifierClass+P.type),O.addClass(e.isHorizontal()?P.horizontalClass:P.verticalClass),P.type==="bullets"&&P.dynamicBullets&&(O.addClass(`${P.modifierClass}${P.type}-dynamic`),g=0,P.dynamicMainBullets<1&&(P.dynamicMainBullets=1)),P.type==="progressbar"&&P.progressbarOpposite&&O.addClass(P.progressbarOppositeClass),P.clickable&&O.on("click",classesToSelector(P.bulletClass),function(D){D.preventDefault();let U=$(this).index()*e.params.slidesPerGroup;e.params.loop&&(U+=e.loopedSlides),e.slideTo(U)}),Object.assign(e.pagination,{$el:O,el:O[0]}),e.enabled||O.addClass(P.lockClass))}function S(){const P=e.params.pagination;if(r())return;const O=e.pagination.$el;O.removeClass(P.hiddenClass),O.removeClass(P.modifierClass+P.type),O.removeClass(e.isHorizontal()?P.horizontalClass:P.verticalClass),e.pagination.bullets&&e.pagination.bullets.removeClass&&e.pagination.bullets.removeClass(P.bulletActiveClass),P.clickable&&O.off("click",classesToSelector(P.bulletClass))}n("init",()=>{e.params.pagination.enabled===!1?L():(T(),w(),E())}),n("activeIndexChange",()=>{(e.params.loop||typeof e.snapIndex>"u")&&E()}),n("snapIndexChange",()=>{e.params.loop||E()}),n("slidesLengthChange",()=>{e.params.loop&&(w(),E())}),n("snapGridLengthChange",()=>{e.params.loop||(w(),E())}),n("destroy",()=>{S()}),n("enable disable",()=>{const{$el:P}=e.pagination;P&&P[e.enabled?"removeClass":"addClass"](e.params.pagination.lockClass)}),n("lock unlock",()=>{E()}),n("click",(P,O)=>{const V=O.target,{$el:D}=e.pagination;if(e.params.pagination.el&&e.params.pagination.hideOnClick&&D&&D.length>0&&!$(V).hasClass(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&V===e.navigation.nextEl||e.navigation.prevEl&&V===e.navigation.prevEl))return;const U=D.hasClass(e.params.pagination.hiddenClass);o(U===!0?"paginationShow":"paginationHide"),D.toggleClass(e.params.pagination.hiddenClass)}});const N=()=>{e.$el.removeClass(e.params.pagination.paginationDisabledClass),e.pagination.$el&&e.pagination.$el.removeClass(e.params.pagination.paginationDisabledClass),T(),w(),E()},L=()=>{e.$el.addClass(e.params.pagination.paginationDisabledClass),e.pagination.$el&&e.pagination.$el.addClass(e.params.pagination.paginationDisabledClass),S()};Object.assign(e.pagination,{enable:N,disable:L,render:w,update:E,init:T,destroy:S})}function Lazy({swiper:e,extendParams:t,on:n,emit:o}){t({lazy:{checkInView:!1,enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,scrollingElement:"",elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}}),e.lazy={};let c=!1,d=!1;function g(E,w=!0){const T=e.params.lazy;if(typeof E>"u"||e.slides.length===0)return;const N=e.virtual&&e.params.virtual.enabled?e.$wrapperEl.children(`.${e.params.slideClass}[data-swiper-slide-index="${E}"]`):e.slides.eq(E),L=N.find(`.${T.elementClass}:not(.${T.loadedClass}):not(.${T.loadingClass})`);N.hasClass(T.elementClass)&&!N.hasClass(T.loadedClass)&&!N.hasClass(T.loadingClass)&&L.push(N[0]),L.length!==0&&L.each(P=>{const O=$(P);O.addClass(T.loadingClass);const V=O.attr("data-background"),D=O.attr("data-src"),U=O.attr("data-srcset"),W=O.attr("data-sizes"),Z=O.parent("picture");e.loadImage(O[0],D||V,U,W,!1,()=>{if(!(typeof e>"u"||e===null||!e||e&&!e.params||e.destroyed)){if(V?(O.css("background-image",`url("${V}")`),O.removeAttr("data-background")):(U&&(O.attr("srcset",U),O.removeAttr("data-srcset")),W&&(O.attr("sizes",W),O.removeAttr("data-sizes")),Z.length&&Z.children("source").each(re=>{const ae=$(re);ae.attr("data-srcset")&&(ae.attr("srcset",ae.attr("data-srcset")),ae.removeAttr("data-srcset"))}),D&&(O.attr("src",D),O.removeAttr("data-src"))),O.addClass(T.loadedClass).removeClass(T.loadingClass),N.find(`.${T.preloaderClass}`).remove(),e.params.loop&&w){const re=N.attr("data-swiper-slide-index");if(N.hasClass(e.params.slideDuplicateClass)){const ae=e.$wrapperEl.children(`[data-swiper-slide-index="${re}"]:not(.${e.params.slideDuplicateClass})`);g(ae.index(),!1)}else{const ae=e.$wrapperEl.children(`.${e.params.slideDuplicateClass}[data-swiper-slide-index="${re}"]`);g(ae.index(),!1)}}o("lazyImageReady",N[0],O[0]),e.params.autoHeight&&e.updateAutoHeight()}}),o("lazyImageLoad",N[0],O[0])})}function r(){const{$wrapperEl:E,params:w,slides:T,activeIndex:S}=e,N=e.virtual&&w.virtual.enabled,L=w.lazy;let P=w.slidesPerView;P==="auto"&&(P=0);function O(D){if(N){if(E.children(`.${w.slideClass}[data-swiper-slide-index="${D}"]`).length)return!0}else if(T[D])return!0;return!1}function V(D){return N?$(D).attr("data-swiper-slide-index"):$(D).index()}if(d||(d=!0),e.params.watchSlidesProgress)E.children(`.${w.slideVisibleClass}`).each(D=>{const U=N?$(D).attr("data-swiper-slide-index"):$(D).index();g(U)});else if(P>1)for(let D=S;D<S+P;D+=1)O(D)&&g(D);else g(S);if(L.loadPrevNext)if(P>1||L.loadPrevNextAmount&&L.loadPrevNextAmount>1){const D=L.loadPrevNextAmount,U=Math.ceil(P),W=Math.min(S+U+Math.max(D,U),T.length),Z=Math.max(S-Math.max(U,D),0);for(let re=S+U;re<W;re+=1)O(re)&&g(re);for(let re=Z;re<S;re+=1)O(re)&&g(re)}else{const D=E.children(`.${w.slideNextClass}`);D.length>0&&g(V(D));const U=E.children(`.${w.slidePrevClass}`);U.length>0&&g(V(U))}}function v(){const E=getWindow();if(!e||e.destroyed)return;const w=e.params.lazy.scrollingElement?$(e.params.lazy.scrollingElement):$(E),T=w[0]===E,S=T?E.innerWidth:w[0].offsetWidth,N=T?E.innerHeight:w[0].offsetHeight,L=e.$el.offset(),{rtlTranslate:P}=e;let O=!1;P&&(L.left-=e.$el[0].scrollLeft);const V=[[L.left,L.top],[L.left+e.width,L.top],[L.left,L.top+e.height],[L.left+e.width,L.top+e.height]];for(let U=0;U<V.length;U+=1){const W=V[U];if(W[0]>=0&&W[0]<=S&&W[1]>=0&&W[1]<=N){if(W[0]===0&&W[1]===0)continue;O=!0}}const D=e.touchEvents.start==="touchstart"&&e.support.passiveListener&&e.params.passiveListeners?{passive:!0,capture:!1}:!1;O?(r(),w.off("scroll",v,D)):c||(c=!0,w.on("scroll",v,D))}n("beforeInit",()=>{e.params.lazy.enabled&&e.params.preloadImages&&(e.params.preloadImages=!1)}),n("init",()=>{e.params.lazy.enabled&&(e.params.lazy.checkInView?v():r())}),n("scroll",()=>{e.params.freeMode&&e.params.freeMode.enabled&&!e.params.freeMode.sticky&&r()}),n("scrollbarDragMove resize _freeModeNoMomentumRelease",()=>{e.params.lazy.enabled&&(e.params.lazy.checkInView?v():r())}),n("transitionStart",()=>{e.params.lazy.enabled&&(e.params.lazy.loadOnTransitionStart||!e.params.lazy.loadOnTransitionStart&&!d)&&(e.params.lazy.checkInView?v():r())}),n("transitionEnd",()=>{e.params.lazy.enabled&&!e.params.lazy.loadOnTransitionStart&&(e.params.lazy.checkInView?v():r())}),n("slideChange",()=>{const{lazy:E,cssMode:w,watchSlidesProgress:T,touchReleaseOnEdges:S,resistanceRatio:N}=e.params;E.enabled&&(w||T&&(S||N===0))&&r()}),n("destroy",()=>{!e.$el||e.$el.find(`.${e.params.lazy.loadingClass}`).removeClass(e.params.lazy.loadingClass)}),Object.assign(e.lazy,{load:r,loadInSlide:g})}function A11y({swiper:e,extendParams:t,on:n}){t({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}}),e.a11y={clicked:!1};let o=null;function c(ie){const ve=o;ve.length!==0&&(ve.html(""),ve.html(ie))}function d(ie=16){const ve=()=>Math.round(16*Math.random()).toString(16);return"x".repeat(ie).replace(/x/g,ve)}function g(ie){ie.attr("tabIndex","0")}function r(ie){ie.attr("tabIndex","-1")}function v(ie,ve){ie.attr("role",ve)}function E(ie,ve){ie.attr("aria-roledescription",ve)}function w(ie,ve){ie.attr("aria-controls",ve)}function T(ie,ve){ie.attr("aria-label",ve)}function S(ie,ve){ie.attr("id",ve)}function N(ie,ve){ie.attr("aria-live",ve)}function L(ie){ie.attr("aria-disabled",!0)}function P(ie){ie.attr("aria-disabled",!1)}function O(ie){if(ie.keyCode!==13&&ie.keyCode!==32)return;const ve=e.params.a11y,Pe=$(ie.target);e.navigation&&e.navigation.$nextEl&&Pe.is(e.navigation.$nextEl)&&(e.isEnd&&!e.params.loop||e.slideNext(),e.isEnd?c(ve.lastSlideMessage):c(ve.nextSlideMessage)),e.navigation&&e.navigation.$prevEl&&Pe.is(e.navigation.$prevEl)&&(e.isBeginning&&!e.params.loop||e.slidePrev(),e.isBeginning?c(ve.firstSlideMessage):c(ve.prevSlideMessage)),e.pagination&&Pe.is(classesToSelector(e.params.pagination.bulletClass))&&Pe[0].click()}function V(){if(e.params.loop||e.params.rewind||!e.navigation)return;const{$nextEl:ie,$prevEl:ve}=e.navigation;ve&&ve.length>0&&(e.isBeginning?(L(ve),r(ve)):(P(ve),g(ve))),ie&&ie.length>0&&(e.isEnd?(L(ie),r(ie)):(P(ie),g(ie)))}function D(){return e.pagination&&e.pagination.bullets&&e.pagination.bullets.length}function U(){return D()&&e.params.pagination.clickable}function W(){const ie=e.params.a11y;!D()||e.pagination.bullets.each(ve=>{const Pe=$(ve);e.params.pagination.clickable&&(g(Pe),e.params.pagination.renderBullet||(v(Pe,"button"),T(Pe,ie.paginationBulletMessage.replace(/\{\{index\}\}/,Pe.index()+1)))),Pe.is(`.${e.params.pagination.bulletActiveClass}`)?Pe.attr("aria-current","true"):Pe.removeAttr("aria-current")})}const Z=(ie,ve,Pe)=>{g(ie),ie[0].tagName!=="BUTTON"&&(v(ie,"button"),ie.on("keydown",O)),T(ie,Pe),w(ie,ve)},re=()=>{e.a11y.clicked=!0},ae=()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.a11y.clicked=!1})})},ce=ie=>{if(e.a11y.clicked)return;const ve=ie.target.closest(`.${e.params.slideClass}`);if(!ve||!e.slides.includes(ve))return;const Pe=e.slides.indexOf(ve)===e.activeIndex,ct=e.params.watchSlidesProgress&&e.visibleSlides&&e.visibleSlides.includes(ve);Pe||ct||(e.isHorizontal()?e.el.scrollLeft=0:e.el.scrollTop=0,e.slideTo(e.slides.indexOf(ve),0))},ne=()=>{const ie=e.params.a11y;ie.itemRoleDescriptionMessage&&E($(e.slides),ie.itemRoleDescriptionMessage),ie.slideRole&&v($(e.slides),ie.slideRole);const ve=e.params.loop?e.slides.filter(Pe=>!Pe.classList.contains(e.params.slideDuplicateClass)).length:e.slides.length;ie.slideLabelMessage&&e.slides.each((Pe,ct)=>{const ge=$(Pe),Me=e.params.loop?parseInt(ge.attr("data-swiper-slide-index"),10):ct,Ue=ie.slideLabelMessage.replace(/\{\{index\}\}/,Me+1).replace(/\{\{slidesLength\}\}/,ve);T(ge,Ue)})},le=()=>{const ie=e.params.a11y;e.$el.append(o);const ve=e.$el;ie.containerRoleDescriptionMessage&&E(ve,ie.containerRoleDescriptionMessage),ie.containerMessage&&T(ve,ie.containerMessage);const Pe=e.$wrapperEl,ct=ie.id||Pe.attr("id")||`swiper-wrapper-${d(16)}`,ge=e.params.autoplay&&e.params.autoplay.enabled?"off":"polite";S(Pe,ct),N(Pe,ge),ne();let Me,Ue;e.navigation&&e.navigation.$nextEl&&(Me=e.navigation.$nextEl),e.navigation&&e.navigation.$prevEl&&(Ue=e.navigation.$prevEl),Me&&Me.length&&Z(Me,ct,ie.nextSlideMessage),Ue&&Ue.length&&Z(Ue,ct,ie.prevSlideMessage),U()&&e.pagination.$el.on("keydown",classesToSelector(e.params.pagination.bulletClass),O),e.$el.on("focus",ce,!0),e.$el.on("pointerdown",re,!0),e.$el.on("pointerup",ae,!0)};function de(){o&&o.length>0&&o.remove();let ie,ve;e.navigation&&e.navigation.$nextEl&&(ie=e.navigation.$nextEl),e.navigation&&e.navigation.$prevEl&&(ve=e.navigation.$prevEl),ie&&ie.off("keydown",O),ve&&ve.off("keydown",O),U()&&e.pagination.$el.off("keydown",classesToSelector(e.params.pagination.bulletClass),O),e.$el.off("focus",ce,!0),e.$el.off("pointerdown",re,!0),e.$el.off("pointerup",ae,!0)}n("beforeInit",()=>{o=$(`<span class="${e.params.a11y.notificationClass}" aria-live="assertive" aria-atomic="true"></span>`)}),n("afterInit",()=>{!e.params.a11y.enabled||le()}),n("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{!e.params.a11y.enabled||ne()}),n("fromEdge toEdge afterInit lock unlock",()=>{!e.params.a11y.enabled||V()}),n("paginationUpdate",()=>{!e.params.a11y.enabled||W()}),n("destroy",()=>{!e.params.a11y.enabled||de()})}function Autoplay({swiper:e,extendParams:t,on:n,emit:o}){let c;e.autoplay={running:!1,paused:!1},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});function d(){if(!e.size){e.autoplay.running=!1,e.autoplay.paused=!1;return}const P=e.slides.eq(e.activeIndex);let O=e.params.autoplay.delay;P.attr("data-swiper-autoplay")&&(O=P.attr("data-swiper-autoplay")||e.params.autoplay.delay),clearTimeout(c),c=nextTick(()=>{let V;e.params.autoplay.reverseDirection?e.params.loop?(e.loopFix(),V=e.slidePrev(e.params.speed,!0,!0),o("autoplay")):e.isBeginning?e.params.autoplay.stopOnLastSlide?r():(V=e.slideTo(e.slides.length-1,e.params.speed,!0,!0),o("autoplay")):(V=e.slidePrev(e.params.speed,!0,!0),o("autoplay")):e.params.loop?(e.loopFix(),V=e.slideNext(e.params.speed,!0,!0),o("autoplay")):e.isEnd?e.params.autoplay.stopOnLastSlide?r():(V=e.slideTo(0,e.params.speed,!0,!0),o("autoplay")):(V=e.slideNext(e.params.speed,!0,!0),o("autoplay")),(e.params.cssMode&&e.autoplay.running||V===!1)&&d()},O)}function g(){return typeof c<"u"||e.autoplay.running?!1:(e.autoplay.running=!0,o("autoplayStart"),d(),!0)}function r(){return!e.autoplay.running||typeof c>"u"?!1:(c&&(clearTimeout(c),c=void 0),e.autoplay.running=!1,o("autoplayStop"),!0)}function v(P){!e.autoplay.running||e.autoplay.paused||(c&&clearTimeout(c),e.autoplay.paused=!0,P===0||!e.params.autoplay.waitForTransition?(e.autoplay.paused=!1,d()):["transitionend","webkitTransitionEnd"].forEach(O=>{e.$wrapperEl[0].addEventListener(O,w)}))}function E(){const P=getDocument();P.visibilityState==="hidden"&&e.autoplay.running&&v(),P.visibilityState==="visible"&&e.autoplay.paused&&(d(),e.autoplay.paused=!1)}function w(P){!e||e.destroyed||!e.$wrapperEl||P.target===e.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach(O=>{e.$wrapperEl[0].removeEventListener(O,w)}),e.autoplay.paused=!1,e.autoplay.running?d():r())}function T(){e.params.autoplay.disableOnInteraction?r():(o("autoplayPause"),v()),["transitionend","webkitTransitionEnd"].forEach(P=>{e.$wrapperEl[0].removeEventListener(P,w)})}function S(){e.params.autoplay.disableOnInteraction||(e.autoplay.paused=!1,o("autoplayResume"),d())}function N(){e.params.autoplay.pauseOnMouseEnter&&(e.$el.on("mouseenter",T),e.$el.on("mouseleave",S))}function L(){e.$el.off("mouseenter",T),e.$el.off("mouseleave",S)}n("init",()=>{e.params.autoplay.enabled&&(g(),getDocument().addEventListener("visibilitychange",E),N())}),n("beforeTransitionStart",(P,O,V)=>{e.autoplay.running&&(V||!e.params.autoplay.disableOnInteraction?e.autoplay.pause(O):r())}),n("sliderFirstMove",()=>{e.autoplay.running&&(e.params.autoplay.disableOnInteraction?r():v())}),n("touchEnd",()=>{e.params.cssMode&&e.autoplay.paused&&!e.params.autoplay.disableOnInteraction&&d()}),n("destroy",()=>{L(),e.autoplay.running&&r(),getDocument().removeEventListener("visibilitychange",E)}),Object.assign(e.autoplay,{pause:v,run:d,start:g,stop:r})}function Grid({swiper:e,extendParams:t}){t({grid:{rows:1,fill:"column"}});let n,o,c;const d=v=>{const{slidesPerView:E}=e.params,{rows:w,fill:T}=e.params.grid;o=n/w,c=Math.floor(v/w),Math.floor(v/w)===v/w?n=v:n=Math.ceil(v/w)*w,E!=="auto"&&T==="row"&&(n=Math.max(n,E*w))},g=(v,E,w,T)=>{const{slidesPerGroup:S,spaceBetween:N}=e.params,{rows:L,fill:P}=e.params.grid;let O,V,D;if(P==="row"&&S>1){const U=Math.floor(v/(S*L)),W=v-L*S*U,Z=U===0?S:Math.min(Math.ceil((w-U*L*S)/L),S);D=Math.floor(W/Z),V=W-D*Z+U*S,O=V+D*n/L,E.css({"-webkit-order":O,order:O})}else P==="column"?(V=Math.floor(v/L),D=v-V*L,(V>c||V===c&&D===L-1)&&(D+=1,D>=L&&(D=0,V+=1))):(D=Math.floor(v/o),V=v-D*o);E.css(T("margin-top"),D!==0?N&&`${N}px`:"")},r=(v,E,w)=>{const{spaceBetween:T,centeredSlides:S,roundLengths:N}=e.params,{rows:L}=e.params.grid;if(e.virtualSize=(v+T)*n,e.virtualSize=Math.ceil(e.virtualSize/L)-T,e.$wrapperEl.css({[w("width")]:`${e.virtualSize+T}px`}),S){E.splice(0,E.length);const P=[];for(let O=0;O<E.length;O+=1){let V=E[O];N&&(V=Math.floor(V)),E[O]<e.virtualSize+E[0]&&P.push(V)}E.push(...P)}};e.grid={initSlides:d,updateSlide:g,updateWrapperSize:r}}function effectInit(e){const{effect:t,swiper:n,on:o,setTranslate:c,setTransition:d,overwriteParams:g,perspective:r,recreateShadows:v,getEffectParams:E}=e;o("beforeInit",()=>{if(n.params.effect!==t)return;n.classNames.push(`${n.params.containerModifierClass}${t}`),r&&r()&&n.classNames.push(`${n.params.containerModifierClass}3d`);const T=g?g():{};Object.assign(n.params,T),Object.assign(n.originalParams,T)}),o("setTranslate",()=>{n.params.effect===t&&c()}),o("setTransition",(T,S)=>{n.params.effect===t&&d(S)}),o("transitionEnd",()=>{if(n.params.effect===t&&v){if(!E||!E().slideShadows)return;n.slides.each(T=>{n.$(T).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").remove()}),v()}});let w;o("virtualUpdate",()=>{n.params.effect===t&&(n.slides.length||(w=!0),requestAnimationFrame(()=>{w&&n.slides&&n.slides.length&&(c(),w=!1)}))})}function effectTarget(e,t){return e.transformEl?t.find(e.transformEl).css({"backface-visibility":"hidden","-webkit-backface-visibility":"hidden"}):t}function effectVirtualTransitionEnd({swiper:e,duration:t,transformEl:n,allSlides:o}){const{slides:c,activeIndex:d,$wrapperEl:g}=e;if(e.params.virtualTranslate&&t!==0){let r=!1,v;o?v=n?c.find(n):c:v=n?c.eq(d).find(n):c.eq(d),v.transitionEnd(()=>{if(r||!e||e.destroyed)return;r=!0,e.animating=!1;const E=["webkitTransitionEnd","transitionend"];for(let w=0;w<E.length;w+=1)g.trigger(E[w])})}}function EffectFade({swiper:e,extendParams:t,on:n}){t({fadeEffect:{crossFade:!1,transformEl:null}}),effectInit({effect:"fade",swiper:e,on:n,setTranslate:()=>{const{slides:d}=e,g=e.params.fadeEffect;for(let r=0;r<d.length;r+=1){const v=e.slides.eq(r);let w=-v[0].swiperSlideOffset;e.params.virtualTranslate||(w-=e.translate);let T=0;e.isHorizontal()||(T=w,w=0);const S=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(v[0].progress),0):1+Math.min(Math.max(v[0].progress,-1),0);effectTarget(g,v).css({opacity:S}).transform(`translate3d(${w}px, ${T}px, 0px)`)}},setTransition:d=>{const{transformEl:g}=e.params.fadeEffect;(g?e.slides.find(g):e.slides).transition(d),effectVirtualTransitionEnd({swiper:e,duration:d,transformEl:g,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}function isObject(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function extend(e,t){const n=["__proto__","constructor","prototype"];Object.keys(t).filter(o=>n.indexOf(o)<0).forEach(o=>{typeof e[o]>"u"?e[o]=t[o]:isObject(t[o])&&isObject(e[o])&&Object.keys(t[o]).length>0?t[o].__swiper__?e[o]=t[o]:extend(e[o],t[o]):e[o]=t[o]})}function needsNavigation(e={}){return e.navigation&&typeof e.navigation.nextEl>"u"&&typeof e.navigation.prevEl>"u"}function needsPagination(e={}){return e.pagination&&typeof e.pagination.el>"u"}function needsScrollbar(e={}){return e.scrollbar&&typeof e.scrollbar.el>"u"}function uniqueClasses(e=""){const t=e.split(" ").map(o=>o.trim()).filter(o=>!!o),n=[];return t.forEach(o=>{n.indexOf(o)<0&&n.push(o)}),n.join(" ")}const paramsList=["modules","init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopedSlidesLimit","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];function getParams(e={},t=!0){const n={on:{}},o={},c={};extend(n,Swiper$1.defaults),extend(n,Swiper$1.extendedDefaults),n._emitClasses=!0,n.init=!1;const d={},g=paramsList.map(v=>v.replace(/_/,"")),r=Object.assign({},e);return Object.keys(r).forEach(v=>{typeof e[v]>"u"||(g.indexOf(v)>=0?isObject(e[v])?(n[v]={},c[v]={},extend(n[v],e[v]),extend(c[v],e[v])):(n[v]=e[v],c[v]=e[v]):v.search(/on[A-Z]/)===0&&typeof e[v]=="function"?t?o[`${v[2].toLowerCase()}${v.substr(3)}`]=e[v]:n.on[`${v[2].toLowerCase()}${v.substr(3)}`]=e[v]:d[v]=e[v])}),["navigation","pagination","scrollbar"].forEach(v=>{n[v]===!0&&(n[v]={}),n[v]===!1&&delete n[v]}),{params:n,passedParams:c,rest:d,events:o}}function mountSwiper({el:e,nextEl:t,prevEl:n,paginationEl:o,scrollbarEl:c,swiper:d},g){needsNavigation(g)&&t&&n&&(d.params.navigation.nextEl=t,d.originalParams.navigation.nextEl=t,d.params.navigation.prevEl=n,d.originalParams.navigation.prevEl=n),needsPagination(g)&&o&&(d.params.pagination.el=o,d.originalParams.pagination.el=o),needsScrollbar(g)&&c&&(d.params.scrollbar.el=c,d.originalParams.scrollbar.el=c),d.init(e)}const calcLoopedSlides=(e,t)=>{let n=t.slidesPerView;if(t.breakpoints){const c=Swiper$1.prototype.getBreakpoint(t.breakpoints),d=c in t.breakpoints?t.breakpoints[c]:void 0;d&&d.slidesPerView&&(n=d.slidesPerView)}let o=Math.ceil(parseFloat(t.loopedSlides||n,10));return o+=t.loopAdditionalSlides,o>e.length&&t.loopedSlidesLimit&&(o=e.length),o};function renderLoop(e,t,n){const o=t.map((v,E)=>(v.props||(v.props={}),v.props.swiperRef=e,v.props["data-swiper-slide-index"]=E,v));function c(v,E,w){return v.props||(v.props={}),h(v.type,{...v.props,key:`${v.key}-duplicate-${E}-${w}`,class:`${v.props.className||""} ${n.slideDuplicateClass} ${v.props.class||""}`},v.children)}if(n.loopFillGroupWithBlank){const v=n.slidesPerGroup-o.length%n.slidesPerGroup;if(v!==n.slidesPerGroup)for(let E=0;E<v;E+=1){const w=h("div",{class:`${n.slideClass} ${n.slideBlankClass}`});o.push(w)}}n.slidesPerView==="auto"&&!n.loopedSlides&&(n.loopedSlides=o.length);const d=calcLoopedSlides(o,n),g=[],r=[];for(let v=0;v<d;v+=1){const E=v-Math.floor(v/o.length)*o.length;r.push(c(o[E],v,"append")),g.unshift(c(o[o.length-E-1],v,"prepend"))}return e.value&&(e.value.loopedSlides=d),[...g,...o,...r]}function getChangedParams(e,t,n,o,c){const d=[];if(!t)return d;const g=v=>{d.indexOf(v)<0&&d.push(v)};if(n&&o){const v=o.map(c),E=n.map(c);v.join("")!==E.join("")&&g("children"),o.length!==n.length&&g("children")}return paramsList.filter(v=>v[0]==="_").map(v=>v.replace(/_/,"")).forEach(v=>{if(v in e&&v in t)if(isObject(e[v])&&isObject(t[v])){const E=Object.keys(e[v]),w=Object.keys(t[v]);E.length!==w.length?g(v):(E.forEach(T=>{e[v][T]!==t[v][T]&&g(v)}),w.forEach(T=>{e[v][T]!==t[v][T]&&g(v)}))}else e[v]!==t[v]&&g(v)}),d}function getChildren(e,t,n){e===void 0&&(e={});const o=[],c={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]},d=(g,r)=>{!Array.isArray(g)||g.forEach(v=>{const E=typeof v.type=="symbol";r==="default"&&(r="container-end"),E&&v.children?d(v.children,"default"):v.type&&(v.type.name==="SwiperSlide"||v.type.name==="AsyncComponentWrapper")?o.push(v):c[r]&&c[r].push(v)})};return Object.keys(e).forEach(g=>{if(typeof e[g]!="function")return;const r=e[g]();d(r,g)}),n.value=t.value,t.value=o,{slides:o,slots:c}}function updateSwiper({swiper:e,slides:t,passedParams:n,changedParams:o,nextEl:c,prevEl:d,scrollbarEl:g,paginationEl:r}){const v=o.filter(Z=>Z!=="children"&&Z!=="direction"),{params:E,pagination:w,navigation:T,scrollbar:S,virtual:N,thumbs:L}=e;let P,O,V,D,U;o.includes("thumbs")&&n.thumbs&&n.thumbs.swiper&&E.thumbs&&!E.thumbs.swiper&&(P=!0),o.includes("controller")&&n.controller&&n.controller.control&&E.controller&&!E.controller.control&&(O=!0),o.includes("pagination")&&n.pagination&&(n.pagination.el||r)&&(E.pagination||E.pagination===!1)&&w&&!w.el&&(V=!0),o.includes("scrollbar")&&n.scrollbar&&(n.scrollbar.el||g)&&(E.scrollbar||E.scrollbar===!1)&&S&&!S.el&&(D=!0),o.includes("navigation")&&n.navigation&&(n.navigation.prevEl||d)&&(n.navigation.nextEl||c)&&(E.navigation||E.navigation===!1)&&T&&!T.prevEl&&!T.nextEl&&(U=!0);const W=Z=>{!e[Z]||(e[Z].destroy(),Z==="navigation"?(E[Z].prevEl=void 0,E[Z].nextEl=void 0,e[Z].prevEl=void 0,e[Z].nextEl=void 0):(E[Z].el=void 0,e[Z].el=void 0))};v.forEach(Z=>{if(isObject(E[Z])&&isObject(n[Z]))extend(E[Z],n[Z]);else{const re=n[Z];(re===!0||re===!1)&&(Z==="navigation"||Z==="pagination"||Z==="scrollbar")?re===!1&&W(Z):E[Z]=n[Z]}}),v.includes("controller")&&!O&&e.controller&&e.controller.control&&E.controller&&E.controller.control&&(e.controller.control=E.controller.control),o.includes("children")&&t&&N&&E.virtual.enabled?(N.slides=t,N.update(!0)):o.includes("children")&&e.lazy&&e.params.lazy.enabled&&e.lazy.load(),P&&L.init()&&L.update(!0),O&&(e.controller.control=E.controller.control),V&&(r&&(E.pagination.el=r),w.init(),w.render(),w.update()),D&&(g&&(E.scrollbar.el=g),S.init(),S.updateSize(),S.setTranslate()),U&&(c&&(E.navigation.nextEl=c),d&&(E.navigation.prevEl=d),T.init(),T.update()),o.includes("allowSlideNext")&&(e.allowSlideNext=n.allowSlideNext),o.includes("allowSlidePrev")&&(e.allowSlidePrev=n.allowSlidePrev),o.includes("direction")&&e.changeDirection(n.direction,!1),e.update()}function renderVirtual(e,t,n){if(!n)return null;const o=e.value.isHorizontal()?{[e.value.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`};return t.filter((c,d)=>d>=n.from&&d<=n.to).map(c=>(c.props||(c.props={}),c.props.style||(c.props.style={}),c.props.swiperRef=e,c.props.style=o,h(c.type,{...c.props},c.children)))}const updateOnVirtualData=e=>{!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.lazy&&e.params.lazy.enabled&&e.lazy.load(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())},Swiper={name:"Swiper",props:{tag:{type:String,default:"div"},wrapperTag:{type:String,default:"div"},modules:{type:Array,default:void 0},init:{type:Boolean,default:void 0},direction:{type:String,default:void 0},touchEventsTarget:{type:String,default:void 0},initialSlide:{type:Number,default:void 0},speed:{type:Number,default:void 0},cssMode:{type:Boolean,default:void 0},updateOnWindowResize:{type:Boolean,default:void 0},resizeObserver:{type:Boolean,default:void 0},nested:{type:Boolean,default:void 0},focusableElements:{type:String,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},preventInteractionOnTransition:{type:Boolean,default:void 0},userAgent:{type:String,default:void 0},url:{type:String,default:void 0},edgeSwipeDetection:{type:[Boolean,String],default:void 0},edgeSwipeThreshold:{type:Number,default:void 0},autoHeight:{type:Boolean,default:void 0},setWrapperSize:{type:Boolean,default:void 0},virtualTranslate:{type:Boolean,default:void 0},effect:{type:String,default:void 0},breakpoints:{type:Object,default:void 0},spaceBetween:{type:Number,default:void 0},slidesPerView:{type:[Number,String],default:void 0},maxBackfaceHiddenSlides:{type:Number,default:void 0},slidesPerGroup:{type:Number,default:void 0},slidesPerGroupSkip:{type:Number,default:void 0},slidesPerGroupAuto:{type:Boolean,default:void 0},centeredSlides:{type:Boolean,default:void 0},centeredSlidesBounds:{type:Boolean,default:void 0},slidesOffsetBefore:{type:Number,default:void 0},slidesOffsetAfter:{type:Number,default:void 0},normalizeSlideIndex:{type:Boolean,default:void 0},centerInsufficientSlides:{type:Boolean,default:void 0},watchOverflow:{type:Boolean,default:void 0},roundLengths:{type:Boolean,default:void 0},touchRatio:{type:Number,default:void 0},touchAngle:{type:Number,default:void 0},simulateTouch:{type:Boolean,default:void 0},shortSwipes:{type:Boolean,default:void 0},longSwipes:{type:Boolean,default:void 0},longSwipesRatio:{type:Number,default:void 0},longSwipesMs:{type:Number,default:void 0},followFinger:{type:Boolean,default:void 0},allowTouchMove:{type:Boolean,default:void 0},threshold:{type:Number,default:void 0},touchMoveStopPropagation:{type:Boolean,default:void 0},touchStartPreventDefault:{type:Boolean,default:void 0},touchStartForcePreventDefault:{type:Boolean,default:void 0},touchReleaseOnEdges:{type:Boolean,default:void 0},uniqueNavElements:{type:Boolean,default:void 0},resistance:{type:Boolean,default:void 0},resistanceRatio:{type:Number,default:void 0},watchSlidesProgress:{type:Boolean,default:void 0},grabCursor:{type:Boolean,default:void 0},preventClicks:{type:Boolean,default:void 0},preventClicksPropagation:{type:Boolean,default:void 0},slideToClickedSlide:{type:Boolean,default:void 0},preloadImages:{type:Boolean,default:void 0},updateOnImagesReady:{type:Boolean,default:void 0},loop:{type:Boolean,default:void 0},loopAdditionalSlides:{type:Number,default:void 0},loopedSlides:{type:Number,default:void 0},loopedSlidesLimit:{type:Boolean,default:!0},loopFillGroupWithBlank:{type:Boolean,default:void 0},loopPreventsSlide:{type:Boolean,default:void 0},rewind:{type:Boolean,default:void 0},allowSlidePrev:{type:Boolean,default:void 0},allowSlideNext:{type:Boolean,default:void 0},swipeHandler:{type:Boolean,default:void 0},noSwiping:{type:Boolean,default:void 0},noSwipingClass:{type:String,default:void 0},noSwipingSelector:{type:String,default:void 0},passiveListeners:{type:Boolean,default:void 0},containerModifierClass:{type:String,default:void 0},slideClass:{type:String,default:void 0},slideBlankClass:{type:String,default:void 0},slideActiveClass:{type:String,default:void 0},slideDuplicateActiveClass:{type:String,default:void 0},slideVisibleClass:{type:String,default:void 0},slideDuplicateClass:{type:String,default:void 0},slideNextClass:{type:String,default:void 0},slideDuplicateNextClass:{type:String,default:void 0},slidePrevClass:{type:String,default:void 0},slideDuplicatePrevClass:{type:String,default:void 0},wrapperClass:{type:String,default:void 0},runCallbacksOnInit:{type:Boolean,default:void 0},observer:{type:Boolean,default:void 0},observeParents:{type:Boolean,default:void 0},observeSlideChildren:{type:Boolean,default:void 0},a11y:{type:[Boolean,Object],default:void 0},autoplay:{type:[Boolean,Object],default:void 0},controller:{type:Object,default:void 0},coverflowEffect:{type:Object,default:void 0},cubeEffect:{type:Object,default:void 0},fadeEffect:{type:Object,default:void 0},flipEffect:{type:Object,default:void 0},creativeEffect:{type:Object,default:void 0},cardsEffect:{type:Object,default:void 0},hashNavigation:{type:[Boolean,Object],default:void 0},history:{type:[Boolean,Object],default:void 0},keyboard:{type:[Boolean,Object],default:void 0},lazy:{type:[Boolean,Object],default:void 0},mousewheel:{type:[Boolean,Object],default:void 0},navigation:{type:[Boolean,Object],default:void 0},pagination:{type:[Boolean,Object],default:void 0},parallax:{type:[Boolean,Object],default:void 0},scrollbar:{type:[Boolean,Object],default:void 0},thumbs:{type:Object,default:void 0},virtual:{type:[Boolean,Object],default:void 0},zoom:{type:[Boolean,Object],default:void 0},grid:{type:[Object],default:void 0},freeMode:{type:[Boolean,Object],default:void 0},enabled:{type:Boolean,default:void 0}},emits:["_beforeBreakpoint","_containerClasses","_slideClass","_slideClasses","_swiper","_freeModeNoMomentumRelease","activeIndexChange","afterInit","autoplay","autoplayStart","autoplayStop","autoplayPause","autoplayResume","beforeDestroy","beforeInit","beforeLoopFix","beforeResize","beforeSlideChangeStart","beforeTransitionStart","breakpoint","changeDirection","click","disable","doubleTap","doubleClick","destroy","enable","fromEdge","hashChange","hashSet","imagesReady","init","keyPress","lazyImageLoad","lazyImageReady","lock","loopFix","momentumBounce","navigationHide","navigationShow","navigationPrev","navigationNext","observerUpdate","orientationchange","paginationHide","paginationRender","paginationShow","paginationUpdate","progress","reachBeginning","reachEnd","realIndexChange","resize","scroll","scrollbarDragEnd","scrollbarDragMove","scrollbarDragStart","setTransition","setTranslate","slideChange","slideChangeTransitionEnd","slideChangeTransitionStart","slideNextTransitionEnd","slideNextTransitionStart","slidePrevTransitionEnd","slidePrevTransitionStart","slideResetTransitionStart","slideResetTransitionEnd","sliderMove","sliderFirstMove","slidesLengthChange","slidesGridLengthChange","snapGridLengthChange","snapIndexChange","swiper","tap","toEdge","touchEnd","touchMove","touchMoveOpposite","touchStart","transitionEnd","transitionStart","unlock","update","virtualUpdate","zoomChange"],setup(e,t){let{slots:n,emit:o}=t;const{tag:c,wrapperTag:d}=e,g=ref("swiper"),r=ref(null),v=ref(!1),E=ref(!1),w=ref(null),T=ref(null),S=ref(null),N={value:[]},L={value:[]},P=ref(null),O=ref(null),V=ref(null),D=ref(null),{params:U,passedParams:W}=getParams(e,!1);getChildren(n,N,L),S.value=W,L.value=N.value;const Z=()=>{getChildren(n,N,L),v.value=!0};if(U.onAny=function(ae){for(var ce=arguments.length,ne=new Array(ce>1?ce-1:0),le=1;le<ce;le++)ne[le-1]=arguments[le];o(ae,...ne)},Object.assign(U.on,{_beforeBreakpoint:Z,_containerClasses(ae,ce){g.value=ce}}),T.value=new Swiper$1(U),T.value.loopCreate=()=>{},T.value.loopDestroy=()=>{},U.loop&&(T.value.loopedSlides=calcLoopedSlides(N.value,U)),T.value.virtual&&T.value.params.virtual.enabled){T.value.virtual.slides=N.value;const ae={cache:!1,slides:N.value,renderExternal:ce=>{r.value=ce},renderExternalUpdate:!1};extend(T.value.params.virtual,ae),extend(T.value.originalParams.virtual,ae)}onUpdated(()=>{!E.value&&T.value&&(T.value.emitSlidesClasses(),E.value=!0);const{passedParams:ae}=getParams(e,!1),ce=getChangedParams(ae,S.value,N.value,L.value,ne=>ne.props&&ne.props.key);S.value=ae,(ce.length||v.value)&&T.value&&!T.value.destroyed&&updateSwiper({swiper:T.value,slides:N.value,passedParams:ae,changedParams:ce,nextEl:P.value,prevEl:O.value,scrollbarEl:D.value,paginationEl:V.value}),v.value=!1}),provide("swiper",T),watch(r,()=>{nextTick$1(()=>{updateOnVirtualData(T.value)})}),onMounted(()=>{!w.value||(mountSwiper({el:w.value,nextEl:P.value,prevEl:O.value,paginationEl:V.value,scrollbarEl:D.value,swiper:T.value},U),o("swiper",T.value))}),onBeforeUnmount(()=>{T.value&&!T.value.destroyed&&T.value.destroy(!0,!1)});function re(ae){return U.virtual?renderVirtual(T,ae,r.value):!U.loop||T.value&&T.value.destroyed?(ae.forEach(ce=>{ce.props||(ce.props={}),ce.props.swiperRef=T}),ae):renderLoop(T,ae,U)}return()=>{const{slides:ae,slots:ce}=getChildren(n,N,L);return h(c,{ref:w,class:uniqueClasses(g.value)},[ce["container-start"],h(d,{class:"swiper-wrapper"},[ce["wrapper-start"],re(ae),ce["wrapper-end"]]),needsNavigation(e)&&[h("div",{ref:O,class:"swiper-button-prev"}),h("div",{ref:P,class:"swiper-button-next"})],needsScrollbar(e)&&h("div",{ref:D,class:"swiper-scrollbar"}),needsPagination(e)&&h("div",{ref:V,class:"swiper-pagination"}),ce["container-end"]])}}},SwiperSlide={name:"SwiperSlide",props:{tag:{type:String,default:"div"},swiperRef:{type:Object,required:!1},zoom:{type:Boolean,default:void 0},virtualIndex:{type:[String,Number],default:void 0}},setup(e,t){let{slots:n}=t,o=!1;const{swiperRef:c}=e,d=ref(null),g=ref("swiper-slide");function r(E,w,T){w===d.value&&(g.value=T)}onMounted(()=>{!c||!c.value||(c.value.on("_slideClass",r),o=!0)}),onBeforeUpdate(()=>{o||!c||!c.value||(c.value.on("_slideClass",r),o=!0)}),onUpdated(()=>{!d.value||!c||!c.value||c.value.destroyed&&g.value!=="swiper-slide"&&(g.value="swiper-slide")}),onBeforeUnmount(()=>{!c||!c.value||c.value.off("_slideClass",r)});const v=computed(()=>({isActive:g.value.indexOf("swiper-slide-active")>=0||g.value.indexOf("swiper-slide-duplicate-active")>=0,isVisible:g.value.indexOf("swiper-slide-visible")>=0,isDuplicate:g.value.indexOf("swiper-slide-duplicate")>=0,isPrev:g.value.indexOf("swiper-slide-prev")>=0||g.value.indexOf("swiper-slide-duplicate-prev")>=0,isNext:g.value.indexOf("swiper-slide-next")>=0||g.value.indexOf("swiper-slide-duplicate-next")>=0}));return provide("swiperSlide",v),()=>h(e.tag,{class:uniqueClasses(`${g.value}`),ref:d,"data-swiper-slide-index":e.virtualIndex},e.zoom?h("div",{class:"swiper-zoom-container","data-swiper-zoom":typeof e.zoom=="number"?e.zoom:void 0},n.default&&n.default(v.value)):n.default&&n.default(v.value))}};Swiper$1.use([Grid,Pagination,Navigation,Mousewheel,Autoplay,A11y,Lazy,EffectFade]);const _sfc_main$1x=defineComponent({name:"IndexCarrousel",components:{Swiper,SwiperSlide},props:{articles:{type:Array,required:!0},fetching:{type:Boolean,required:!0}},setup(e){const{globalState:t,adConfig:n,isDarkTheme:o}=useEnhancer(),c=computed(()=>{const g=[...e.articles].slice(0,9);if(n.value.PC_CARROUSEL){const{index:r,...v}=n.value.PC_CARROUSEL;g.length&&g.splice(r,0,{ad:!0,...v})}return g});return{LanguageKey,isDarkTheme:o,articleList:c,getArticleDetailRoute,getThumbURL:g=>getArticleBannerThumbnailURL(g,t.imageExt.value.isWebP)}}}),carrousel_vue_vue_type_style_index_0_scoped_d084dfc6_lang="";function _sfc_ssrRender$1x(e,t,n,o,c,d,g,r){const v=resolveComponent("placeholder"),E=resolveComponent("empty"),w=resolveComponent("i18n"),T=resolveComponent("skeleton-line"),S=resolveComponent("swiper"),N=resolveComponent("swiper-slide"),L=resolveComponent("ulink"),P=resolveComponent("router-link");t(`<div${ssrRenderAttrs(mergeProps({class:["carrousel",{dark:e.isDarkTheme}]},o))} data-v-d084dfc6>`),t(ssrRenderComponent(v,{data:e.articleList.length,loading:e.fetching},{placeholder:withCtx((O,V,D,U)=>{if(V)V(ssrRenderComponent(E,{class:"article-empty",key:"empty"},{default:withCtx((W,Z,re,ae)=>{if(Z)Z(ssrRenderComponent(w,{k:e.LanguageKey.ARTICLE_PLACEHOLDER},null,re,ae));else return[createVNode(w,{k:e.LanguageKey.ARTICLE_PLACEHOLDER},null,8,["k"])]}),_:1},D,U));else return[createVNode(E,{class:"article-empty",key:"empty"},{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.ARTICLE_PLACEHOLDER},null,8,["k"])]),_:1})]}),loading:withCtx((O,V,D,U)=>{if(V)V(`<div class="article-skeleton" data-v-d084dfc6${U}><div class="title" data-v-d084dfc6${U}>`),V(ssrRenderComponent(T,null,null,D,U)),V(`</div><div class="content" data-v-d084dfc6${U}><div class="first" data-v-d084dfc6${U}>`),V(ssrRenderComponent(T,null,null,D,U)),V("</div><!--[-->"),ssrRenderList(3,(W,Z)=>{V(`<div class="line" data-v-d084dfc6${U}>`),V(ssrRenderComponent(T,{class:"line-item"},null,D,U)),V("</div>")}),V("<!--]--></div></div>");else return[createVNode("div",{class:"article-skeleton",key:"skeleton"},[createVNode("div",{class:"title"},[createVNode(T)]),createVNode("div",{class:"content"},[createVNode("div",{class:"first"},[createVNode(T)]),(openBlock(),createBlock(Fragment,null,renderList(3,(W,Z)=>createVNode("div",{class:"line",key:Z},[createVNode(T,{class:"line-item"})])),64))])])]}),default:withCtx((O,V,D,U)=>{if(V)V(ssrRenderComponent(S,{class:"swiper","set-wrapper-size":!0,mousewheel:!0,"observe-parents":!0,"grab-cursor":!1,"simulate-touch":!1,"preload-images":!1,lazy:!1,pagination:{clickable:!0},autoplay:{delay:3500,disableOnInteraction:!1}},{default:withCtx((W,Z,re,ae)=>{if(Z)Z("<!--[-->"),ssrRenderList(e.articleList.slice(0,9),(ce,ne)=>{Z(ssrRenderComponent(N,{key:ne},{default:withCtx((le,de,ie,ve)=>{if(de)de(`<div class="content" data-v-d084dfc6${ve}>`),ce.ad?de(ssrRenderComponent(L,{class:"link",href:ce.url},{default:withCtx((Pe,ct,ge,Me)=>{if(ct)ct(`<img${ssrRenderAttr("src",ce.src)}${ssrRenderAttr("alt",ce.title)} data-v-d084dfc6${Me}><div class="title" data-v-d084dfc6${Me}><div class="background" data-v-d084dfc6${Me}></div><div class="prospect" data-v-d084dfc6${Me}><span class="text" style="${ssrRenderStyle({backgroundImage:`url('${e.getThumbURL(ce.src)}')`})}" data-v-d084dfc6${Me}>${ssrInterpolate(ce.title)}</span></div></div><span class="ad-symbol" data-v-d084dfc6${Me}>`),ct(ssrRenderComponent(w,{k:e.LanguageKey.AD},null,ge,Me)),ct("</span>");else return[createVNode("img",{src:ce.src,alt:ce.title},null,8,["src","alt"]),createVNode("div",{class:"title"},[createVNode("div",{class:"background"}),createVNode("div",{class:"prospect"},[createVNode("span",{class:"text",style:{backgroundImage:`url('${e.getThumbURL(ce.src)}')`}},toDisplayString(ce.title),5)])]),createVNode("span",{class:"ad-symbol"},[createVNode(w,{k:e.LanguageKey.AD},null,8,["k"])])]}),_:2},ie,ve)):de(ssrRenderComponent(P,{to:e.getArticleDetailRoute(ce.id),class:"link"},{default:withCtx((Pe,ct,ge,Me)=>{if(ct)ct(`<img${ssrRenderAttr("src",e.getThumbURL(ce.thumb))}${ssrRenderAttr("alt",ce.title)} draggable="false" data-v-d084dfc6${Me}><div class="title" data-v-d084dfc6${Me}><div class="background" data-v-d084dfc6${Me}></div><div class="prospect" data-v-d084dfc6${Me}><span class="text" style="${ssrRenderStyle({backgroundImage:`url('${e.getThumbURL(ce.thumb)}')`})}" data-v-d084dfc6${Me}>${ssrInterpolate(ce.title)}</span></div></div>`);else return[createVNode("img",{src:e.getThumbURL(ce.thumb),alt:ce.title,draggable:"false"},null,8,["src","alt"]),createVNode("div",{class:"title"},[createVNode("div",{class:"background"}),createVNode("div",{class:"prospect"},[createVNode("span",{class:"text",style:{backgroundImage:`url('${e.getThumbURL(ce.thumb)}')`}},toDisplayString(ce.title),5)])])]}),_:2},ie,ve)),de("</div>");else return[createVNode("div",{class:"content"},[ce.ad?(openBlock(),createBlock(L,{key:0,class:"link",href:ce.url},{default:withCtx(()=>[createVNode("img",{src:ce.src,alt:ce.title},null,8,["src","alt"]),createVNode("div",{class:"title"},[createVNode("div",{class:"background"}),createVNode("div",{class:"prospect"},[createVNode("span",{class:"text",style:{backgroundImage:`url('${e.getThumbURL(ce.src)}')`}},toDisplayString(ce.title),5)])]),createVNode("span",{class:"ad-symbol"},[createVNode(w,{k:e.LanguageKey.AD},null,8,["k"])])]),_:2},1032,["href"])):(openBlock(),createBlock(P,{key:1,to:e.getArticleDetailRoute(ce.id),class:"link"},{default:withCtx(()=>[createVNode("img",{src:e.getThumbURL(ce.thumb),alt:ce.title,draggable:"false"},null,8,["src","alt"]),createVNode("div",{class:"title"},[createVNode("div",{class:"background"}),createVNode("div",{class:"prospect"},[createVNode("span",{class:"text",style:{backgroundImage:`url('${e.getThumbURL(ce.thumb)}')`}},toDisplayString(ce.title),5)])])]),_:2},1032,["to"]))])]}),_:2},re,ae))}),Z("<!--]-->");else return[(openBlock(!0),createBlock(Fragment,null,renderList(e.articleList.slice(0,9),(ce,ne)=>(openBlock(),createBlock(N,{key:ne},{default:withCtx(()=>[createVNode("div",{class:"content"},[ce.ad?(openBlock(),createBlock(L,{key:0,class:"link",href:ce.url},{default:withCtx(()=>[createVNode("img",{src:ce.src,alt:ce.title},null,8,["src","alt"]),createVNode("div",{class:"title"},[createVNode("div",{class:"background"}),createVNode("div",{class:"prospect"},[createVNode("span",{class:"text",style:{backgroundImage:`url('${e.getThumbURL(ce.src)}')`}},toDisplayString(ce.title),5)])]),createVNode("span",{class:"ad-symbol"},[createVNode(w,{k:e.LanguageKey.AD},null,8,["k"])])]),_:2},1032,["href"])):(openBlock(),createBlock(P,{key:1,to:e.getArticleDetailRoute(ce.id),class:"link"},{default:withCtx(()=>[createVNode("img",{src:e.getThumbURL(ce.thumb),alt:ce.title,draggable:"false"},null,8,["src","alt"]),createVNode("div",{class:"title"},[createVNode("div",{class:"background"}),createVNode("div",{class:"prospect"},[createVNode("span",{class:"text",style:{backgroundImage:`url('${e.getThumbURL(ce.thumb)}')`}},toDisplayString(ce.title),5)])])]),_:2},1032,["to"]))])]),_:2},1024))),128))]}),_:1},D,U));else return[createVNode(S,{class:"swiper","set-wrapper-size":!0,mousewheel:!0,"observe-parents":!0,"grab-cursor":!1,"simulate-touch":!1,"preload-images":!1,lazy:!1,pagination:{clickable:!0},autoplay:{delay:3500,disableOnInteraction:!1}},{default:withCtx(()=>[(openBlock(!0),createBlock(Fragment,null,renderList(e.articleList.slice(0,9),(W,Z)=>(openBlock(),createBlock(N,{key:Z},{default:withCtx(()=>[createVNode("div",{class:"content"},[W.ad?(openBlock(),createBlock(L,{key:0,class:"link",href:W.url},{default:withCtx(()=>[createVNode("img",{src:W.src,alt:W.title},null,8,["src","alt"]),createVNode("div",{class:"title"},[createVNode("div",{class:"background"}),createVNode("div",{class:"prospect"},[createVNode("span",{class:"text",style:{backgroundImage:`url('${e.getThumbURL(W.src)}')`}},toDisplayString(W.title),5)])]),createVNode("span",{class:"ad-symbol"},[createVNode(w,{k:e.LanguageKey.AD},null,8,["k"])])]),_:2},1032,["href"])):(openBlock(),createBlock(P,{key:1,to:e.getArticleDetailRoute(W.id),class:"link"},{default:withCtx(()=>[createVNode("img",{src:e.getThumbURL(W.thumb),alt:W.title,draggable:"false"},null,8,["src","alt"]),createVNode("div",{class:"title"},[createVNode("div",{class:"background"}),createVNode("div",{class:"prospect"},[createVNode("span",{class:"text",style:{backgroundImage:`url('${e.getThumbURL(W.thumb)}')`}},toDisplayString(W.title),5)])])]),_:2},1032,["to"]))])]),_:2},1024))),128))]),_:1})]}),_:1},n)),t("</div>")}const _sfc_setup$1x=_sfc_main$1x.setup;_sfc_main$1x.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/index/carrousel.vue"),_sfc_setup$1x?_sfc_setup$1x(e,t):void 0};const Carrousel=_export_sfc(_sfc_main$1x,[["ssrRender",_sfc_ssrRender$1x],["__scopeId","data-v-d084dfc6"]]);var GAEventCategories=(e=>(e.Comment="comment",e.Share="share",e.Widget="widget",e.Universal="global",e.Article="page_article",e.Index="page_index",e.App="page_app",e.About="page_about",e.Lens="page_lens",e.NFT="page_nft",e))(GAEventCategories||{});const isVideoMediaIns=e=>e.media_type==="VIDEO",isAlbumMediaIns=e=>e.media_type==="CAROUSEL_ALBUM",getInstagramImage=(e,t)=>isVideoMediaIns(e)?getTargetProxyURL(e.thumbnail_url,ProxyModule.Instagram):getTargetProxyURL(t?`${e.permalink}media/?size=${t}`:e.media_url,ProxyModule.Instagram),getYouTubePlaylistURL=e=>`https://www.youtube.com/playlist?list=${e}`,getYouTubeVideoEmbedURL=(e,t)=>{const n=t?`?list=${t}`:"";return`https://www.youtube.com/embed/${e}${n}`},getTwitterTweetDetailURL=(e,t)=>`https://twitter.com/${e}/status/${t}`,get163MusicSongDetailURL=e=>`https://music.163.com/#/song?id=${e}`,_sfc_main$1w=defineComponent({name:"IndexTwitter",components:{Swiper,SwiperSlide},props:{userinfo:{type:Object,default:null},tweets:{type:Object,default:null},fetching:{type:Boolean,required:!0}},setup(e){const{gtag:t}=useEnhancer(),n=ref(),o=()=>{var S;return(S=n.value)==null?void 0:S.slidePrev()},c=()=>{var S;return(S=n.value)==null?void 0:S.slideNext()},d=S=>{n.value=S},g=ref(0),r=()=>{var S;g.value=((S=n.value)==null?void 0:S.activeIndex)||0},v=S=>{t==null||t.event(S,{event_category:GAEventCategories.Index})},E=S=>{var N;if((N=S.geo)!=null&&N.place_id){const P=(e.tweets.includes.places||[]).find(O=>{var V;return O.id===((V=S.geo)==null?void 0:V.place_id)});if(P)return`${P.country_code} \xB7 ${P.name}`}return null},w=S=>{var L;const N=((L=S.attachments)==null?void 0:L.media_keys)||[];if(N.length){const P=e.tweets.includes.media||[];return N.map(O=>P.find(V=>V.media_key===O)).filter(Boolean)}return[]},T=computed(()=>{const S=e.tweets;return S!=null&&S.data?S.data.map(N=>{var P,O;const L={tweet:N,url:getTwitterTweetDetailURL(IDENTITIES.TWITTER_USER_NAME,N.id),location:E(N),medias:w(N),html:unescape$2(N.text)};return(O=(P=N.entities)==null?void 0:P.urls)==null||O.forEach(V=>{var D,U;((D=V.display_url)==null?void 0:D.startsWith("pic.twitter.com/"))||((U=V.display_url)==null?void 0:U.startsWith("twitter.com/"))?L.html=L.html.replace(V.url,""):L.html=L.html.replace(V.url,`<a
                    class="link"
                    target="_blank"
                    rel="external nofollow noopener"
                    title="${V.expanded_url}"
                    href="${V.url}"
                  >
                    <span class="text">[${V.display_url}]</span>
                  </a>
                `)}),L}):[]});return{VALUABLE_LINKS,LanguageKey,completedTweets:T,activeIndex:g,numberSplit,padStart,prevSlide:o,nextSlide:c,handleSwiperReady:d,handleSwiperTransitionStart:r,handleGtagEvent:v}}}),twitter_vue_vue_type_style_index_0_scoped_c8c1ccd2_lang="";function _sfc_ssrRender$1w(e,t,n,o,c,d,g,r){const v=resolveComponent("placeholder"),E=resolveComponent("empty"),w=resolveComponent("i18n"),T=resolveComponent("skeleton-line"),S=resolveComponent("ulink"),N=resolveComponent("uimage"),L=resolveComponent("swiper"),P=resolveComponent("swiper-slide"),O=resolveComponent("udate");t(`<div${ssrRenderAttrs(mergeProps({class:"twitter"},o))} data-v-c8c1ccd2>`),t(ssrRenderComponent(v,{data:e.completedTweets.length,loading:e.fetching},{placeholder:withCtx((V,D,U,W)=>{if(D)D(`<div class="twitter-empty" data-v-c8c1ccd2${W}>`),D(ssrRenderComponent(E,{class:"empty-content"},{default:withCtx((Z,re,ae,ce)=>{if(re)re(ssrRenderComponent(w,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,ae,ce));else return[createVNode(w,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,8,["k"])]}),_:1},U,W)),D("</div>");else return[createVNode("div",{class:"twitter-empty",key:"empty"},[createVNode(E,{class:"empty-content"},{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,8,["k"])]),_:1})])]}),loading:withCtx((V,D,U,W)=>{if(D)D(`<div class="twitter-skeleton" data-v-c8c1ccd2${W}><div class="left" data-v-c8c1ccd2${W}>`),D(ssrRenderComponent(T,null,null,U,W)),D(`</div><div class="right" data-v-c8c1ccd2${W}>`),D(ssrRenderComponent(T,null,null,U,W)),D("</div></div>");else return[createVNode("div",{class:"twitter-skeleton",key:"skeleton"},[createVNode("div",{class:"left"},[createVNode(T)]),createVNode("div",{class:"right"},[createVNode(T)])])]}),default:withCtx((V,D,U,W)=>{if(D)D(`<div class="twitter-content" data-v-c8c1ccd2${W}>`),e.userinfo?(D(`<div class="userinfo"${ssrRenderAttr("title",e.userinfo.username)} data-v-c8c1ccd2${W}>`),D(ssrRenderComponent(S,{class:"logo-link",href:e.VALUABLE_LINKS.TWITTER,onMousedown:Z=>e.handleGtagEvent("twitter_homepage")},{default:withCtx((Z,re,ae,ce)=>{if(re)re(ssrRenderComponent(N,{class:"avatar",proxy:"",src:e.userinfo.profile_image_url},null,ae,ce)),re(`<span class="logo" data-v-c8c1ccd2${ce}><i class="iconfont icon-twitter" data-v-c8c1ccd2${ce}></i></span>`);else return[createVNode(N,{class:"avatar",proxy:"",src:e.userinfo.profile_image_url},null,8,["src"]),createVNode("span",{class:"logo"},[createVNode("i",{class:"iconfont icon-twitter"})])]}),_:1},U,W)),D(`<div class="counts" data-v-c8c1ccd2${W}><div class="item count" data-v-c8c1ccd2${W}>${ssrInterpolate(e.padStart(e.numberSplit(e.userinfo.public_metrics.tweet_count),3,"0"))}</div><div class="item text" data-v-c8c1ccd2${W}>Tweets</div></div></div>`)):D("<!---->"),e.completedTweets.length?D(ssrRenderComponent(L,{class:"tweets",direction:"vertical",height:66,mousewheel:!0,"allow-touch-move":!1,"slides-per-view":1,"prevent-clicks":!1,autoplay:{delay:3500,disableOnInteraction:!1},onTransitionStart:e.handleSwiperTransitionStart,onSwiper:e.handleSwiperReady},{default:withCtx((Z,re,ae,ce)=>{if(re)re("<!--[-->"),ssrRenderList(e.completedTweets,(ne,le)=>{re(ssrRenderComponent(P,{class:"tweet-item",key:le},{default:withCtx((de,ie,ve,Pe)=>{var ct,ge;if(ie)ie(`<div class="content"${ssrRenderAttr("title",ne.tweet.text)} data-v-c8c1ccd2${Pe}>`),(ct=ne.tweet.referenced_tweets)!=null&&ct.length?(ie(`<div class="reference"${ssrRenderAttr("title",ne.tweet.referenced_tweets[0].type)} data-v-c8c1ccd2${Pe}>`),["quoted","retweeted"].includes(ne.tweet.referenced_tweets[0].type)?ie(`<i class="iconfont icon-retweet" data-v-c8c1ccd2${Pe}></i>`):ie(`<i class="iconfont icon-follow-up" data-v-c8c1ccd2${Pe}></i>`),ie("</div>")):ie("<!---->"),ne.html?ie(`<div class="${ssrRenderClass([{"has-media":ne.medias.length},"main"])}" data-v-c8c1ccd2${Pe}>${ne.html}</div>`):ie("<!---->"),ne.medias.length?ie(ssrRenderComponent(S,{class:["end-link",{empty:!ne.html}],href:ne.url,onMousedown:Me=>e.handleGtagEvent("twitter_image_link")},{default:withCtx((Me,Ue,Ze,xt)=>{if(Ue)ne.medias.find(Ut=>Ut.type==="video")?Ue(`<i class="iconfont media icon-video" data-v-c8c1ccd2${xt}></i>`):Ue(`<i class="iconfont media icon-image" data-v-c8c1ccd2${xt}></i>`),Ue(`<span class="text" data-v-c8c1ccd2${xt}>[${ssrInterpolate(ne.medias.length)}]</span><i class="iconfont window icon-new-window-s" data-v-c8c1ccd2${xt}></i>`);else return[ne.medias.find(Ut=>Ut.type==="video")?(openBlock(),createBlock("i",{key:0,class:"iconfont media icon-video"})):(openBlock(),createBlock("i",{key:1,class:"iconfont media icon-image"})),createVNode("span",{class:"text"},"["+toDisplayString(ne.medias.length)+"]",1),createVNode("i",{class:"iconfont window icon-new-window-s"})]}),_:2},ve,Pe)):ie("<!---->"),ie(`</div><div class="meta" data-v-c8c1ccd2${Pe}>`),ie(ssrRenderComponent(S,{class:"item link",title:"To Tweet",href:ne.url,onMousedown:Me=>e.handleGtagEvent("twitter_detail_link")},{default:withCtx((Me,Ue,Ze,xt)=>{if(Ue)Ue(`<i class="iconfont twitter icon-twitter" data-v-c8c1ccd2${xt}></i><span data-v-c8c1ccd2${xt}>Tweet</span><i class="iconfont window icon-new-window-s" data-v-c8c1ccd2${xt}></i>`);else return[createVNode("i",{class:"iconfont twitter icon-twitter"}),createVNode("span",null,"Tweet"),createVNode("i",{class:"iconfont window icon-new-window-s"})]}),_:2},ve,Pe)),ie(`<span class="item reply" data-v-c8c1ccd2${Pe}><i class="iconfont icon-comment" data-v-c8c1ccd2${Pe}></i><span data-v-c8c1ccd2${Pe}>${ssrInterpolate(ne.tweet.public_metrics.reply_count)}</span></span><span class="item like" data-v-c8c1ccd2${Pe}><i class="iconfont icon-heart" data-v-c8c1ccd2${Pe}></i><span data-v-c8c1ccd2${Pe}>${ssrInterpolate(ne.tweet.public_metrics.like_count)}</span></span><span class="item date" data-v-c8c1ccd2${Pe}><i class="iconfont icon-clock" data-v-c8c1ccd2${Pe}></i>`),ie(ssrRenderComponent(O,{to:"ago",date:ne.tweet.created_at},null,ve,Pe)),ie("</span></div>");else return[createVNode("div",{class:"content",title:ne.tweet.text},[(ge=ne.tweet.referenced_tweets)!=null&&ge.length?(openBlock(),createBlock("div",{key:0,class:"reference",title:ne.tweet.referenced_tweets[0].type},[["quoted","retweeted"].includes(ne.tweet.referenced_tweets[0].type)?(openBlock(),createBlock("i",{key:0,class:"iconfont icon-retweet"})):(openBlock(),createBlock("i",{key:1,class:"iconfont icon-follow-up"}))],8,["title"])):createCommentVNode("",!0),ne.html?(openBlock(),createBlock("div",{key:1,class:["main",{"has-media":ne.medias.length}],innerHTML:ne.html},null,10,["innerHTML"])):createCommentVNode("",!0),ne.medias.length?(openBlock(),createBlock(S,{key:2,class:["end-link",{empty:!ne.html}],href:ne.url,onMousedown:Me=>e.handleGtagEvent("twitter_image_link")},{default:withCtx(()=>[ne.medias.find(Me=>Me.type==="video")?(openBlock(),createBlock("i",{key:0,class:"iconfont media icon-video"})):(openBlock(),createBlock("i",{key:1,class:"iconfont media icon-image"})),createVNode("span",{class:"text"},"["+toDisplayString(ne.medias.length)+"]",1),createVNode("i",{class:"iconfont window icon-new-window-s"})]),_:2},1032,["class","href","onMousedown"])):createCommentVNode("",!0)],8,["title"]),createVNode("div",{class:"meta"},[createVNode(S,{class:"item link",title:"To Tweet",href:ne.url,onMousedown:Me=>e.handleGtagEvent("twitter_detail_link")},{default:withCtx(()=>[createVNode("i",{class:"iconfont twitter icon-twitter"}),createVNode("span",null,"Tweet"),createVNode("i",{class:"iconfont window icon-new-window-s"})]),_:2},1032,["href","onMousedown"]),createVNode("span",{class:"item reply"},[createVNode("i",{class:"iconfont icon-comment"}),createVNode("span",null,toDisplayString(ne.tweet.public_metrics.reply_count),1)]),createVNode("span",{class:"item like"},[createVNode("i",{class:"iconfont icon-heart"}),createVNode("span",null,toDisplayString(ne.tweet.public_metrics.like_count),1)]),createVNode("span",{class:"item date"},[createVNode("i",{class:"iconfont icon-clock"}),createVNode(O,{to:"ago",date:ne.tweet.created_at},null,8,["date"])])])]}),_:2},ae,ce))}),re("<!--]-->");else return[(openBlock(!0),createBlock(Fragment,null,renderList(e.completedTweets,(ne,le)=>(openBlock(),createBlock(P,{class:"tweet-item",key:le},{default:withCtx(()=>{var de;return[createVNode("div",{class:"content",title:ne.tweet.text},[(de=ne.tweet.referenced_tweets)!=null&&de.length?(openBlock(),createBlock("div",{key:0,class:"reference",title:ne.tweet.referenced_tweets[0].type},[["quoted","retweeted"].includes(ne.tweet.referenced_tweets[0].type)?(openBlock(),createBlock("i",{key:0,class:"iconfont icon-retweet"})):(openBlock(),createBlock("i",{key:1,class:"iconfont icon-follow-up"}))],8,["title"])):createCommentVNode("",!0),ne.html?(openBlock(),createBlock("div",{key:1,class:["main",{"has-media":ne.medias.length}],innerHTML:ne.html},null,10,["innerHTML"])):createCommentVNode("",!0),ne.medias.length?(openBlock(),createBlock(S,{key:2,class:["end-link",{empty:!ne.html}],href:ne.url,onMousedown:ie=>e.handleGtagEvent("twitter_image_link")},{default:withCtx(()=>[ne.medias.find(ie=>ie.type==="video")?(openBlock(),createBlock("i",{key:0,class:"iconfont media icon-video"})):(openBlock(),createBlock("i",{key:1,class:"iconfont media icon-image"})),createVNode("span",{class:"text"},"["+toDisplayString(ne.medias.length)+"]",1),createVNode("i",{class:"iconfont window icon-new-window-s"})]),_:2},1032,["class","href","onMousedown"])):createCommentVNode("",!0)],8,["title"]),createVNode("div",{class:"meta"},[createVNode(S,{class:"item link",title:"To Tweet",href:ne.url,onMousedown:ie=>e.handleGtagEvent("twitter_detail_link")},{default:withCtx(()=>[createVNode("i",{class:"iconfont twitter icon-twitter"}),createVNode("span",null,"Tweet"),createVNode("i",{class:"iconfont window icon-new-window-s"})]),_:2},1032,["href","onMousedown"]),createVNode("span",{class:"item reply"},[createVNode("i",{class:"iconfont icon-comment"}),createVNode("span",null,toDisplayString(ne.tweet.public_metrics.reply_count),1)]),createVNode("span",{class:"item like"},[createVNode("i",{class:"iconfont icon-heart"}),createVNode("span",null,toDisplayString(ne.tweet.public_metrics.like_count),1)]),createVNode("span",{class:"item date"},[createVNode("i",{class:"iconfont icon-clock"}),createVNode(O,{to:"ago",date:ne.tweet.created_at},null,8,["date"])])])]}),_:2},1024))),128))]}),_:1},U,W)):D("<!---->"),D(`<div class="navigation" data-v-c8c1ccd2${W}><button class="button prev"${includeBooleanAttr(e.activeIndex===0)?" disabled":""} data-v-c8c1ccd2${W}><i class="iconfont icon-totop" data-v-c8c1ccd2${W}></i></button><button class="button next"${includeBooleanAttr(e.activeIndex===e.completedTweets.length-1)?" disabled":""} data-v-c8c1ccd2${W}><i class="iconfont icon-tobottom" data-v-c8c1ccd2${W}></i></button></div></div>`);else return[createVNode("div",{class:"twitter-content",key:"content"},[e.userinfo?(openBlock(),createBlock("div",{key:0,class:"userinfo",title:e.userinfo.username},[createVNode(S,{class:"logo-link",href:e.VALUABLE_LINKS.TWITTER,onMousedown:Z=>e.handleGtagEvent("twitter_homepage")},{default:withCtx(()=>[createVNode(N,{class:"avatar",proxy:"",src:e.userinfo.profile_image_url},null,8,["src"]),createVNode("span",{class:"logo"},[createVNode("i",{class:"iconfont icon-twitter"})])]),_:1},8,["href","onMousedown"]),createVNode("div",{class:"counts"},[createVNode("div",{class:"item count"},toDisplayString(e.padStart(e.numberSplit(e.userinfo.public_metrics.tweet_count),3,"0")),1),createVNode("div",{class:"item text"},"Tweets")])],8,["title"])):createCommentVNode("",!0),e.completedTweets.length?(openBlock(),createBlock(L,{key:1,class:"tweets",direction:"vertical",height:66,mousewheel:!0,"allow-touch-move":!1,"slides-per-view":1,"prevent-clicks":!1,autoplay:{delay:3500,disableOnInteraction:!1},onTransitionStart:e.handleSwiperTransitionStart,onSwiper:e.handleSwiperReady},{default:withCtx(()=>[(openBlock(!0),createBlock(Fragment,null,renderList(e.completedTweets,(Z,re)=>(openBlock(),createBlock(P,{class:"tweet-item",key:re},{default:withCtx(()=>{var ae;return[createVNode("div",{class:"content",title:Z.tweet.text},[(ae=Z.tweet.referenced_tweets)!=null&&ae.length?(openBlock(),createBlock("div",{key:0,class:"reference",title:Z.tweet.referenced_tweets[0].type},[["quoted","retweeted"].includes(Z.tweet.referenced_tweets[0].type)?(openBlock(),createBlock("i",{key:0,class:"iconfont icon-retweet"})):(openBlock(),createBlock("i",{key:1,class:"iconfont icon-follow-up"}))],8,["title"])):createCommentVNode("",!0),Z.html?(openBlock(),createBlock("div",{key:1,class:["main",{"has-media":Z.medias.length}],innerHTML:Z.html},null,10,["innerHTML"])):createCommentVNode("",!0),Z.medias.length?(openBlock(),createBlock(S,{key:2,class:["end-link",{empty:!Z.html}],href:Z.url,onMousedown:ce=>e.handleGtagEvent("twitter_image_link")},{default:withCtx(()=>[Z.medias.find(ce=>ce.type==="video")?(openBlock(),createBlock("i",{key:0,class:"iconfont media icon-video"})):(openBlock(),createBlock("i",{key:1,class:"iconfont media icon-image"})),createVNode("span",{class:"text"},"["+toDisplayString(Z.medias.length)+"]",1),createVNode("i",{class:"iconfont window icon-new-window-s"})]),_:2},1032,["class","href","onMousedown"])):createCommentVNode("",!0)],8,["title"]),createVNode("div",{class:"meta"},[createVNode(S,{class:"item link",title:"To Tweet",href:Z.url,onMousedown:ce=>e.handleGtagEvent("twitter_detail_link")},{default:withCtx(()=>[createVNode("i",{class:"iconfont twitter icon-twitter"}),createVNode("span",null,"Tweet"),createVNode("i",{class:"iconfont window icon-new-window-s"})]),_:2},1032,["href","onMousedown"]),createVNode("span",{class:"item reply"},[createVNode("i",{class:"iconfont icon-comment"}),createVNode("span",null,toDisplayString(Z.tweet.public_metrics.reply_count),1)]),createVNode("span",{class:"item like"},[createVNode("i",{class:"iconfont icon-heart"}),createVNode("span",null,toDisplayString(Z.tweet.public_metrics.like_count),1)]),createVNode("span",{class:"item date"},[createVNode("i",{class:"iconfont icon-clock"}),createVNode(O,{to:"ago",date:Z.tweet.created_at},null,8,["date"])])])]}),_:2},1024))),128))]),_:1},8,["onTransitionStart","onSwiper"])):createCommentVNode("",!0),createVNode("div",{class:"navigation"},[createVNode("button",{class:"button prev",disabled:e.activeIndex===0,onClick:e.prevSlide},[createVNode("i",{class:"iconfont icon-totop"})],8,["disabled","onClick"]),createVNode("button",{class:"button next",disabled:e.activeIndex===e.completedTweets.length-1,onClick:e.nextSlide},[createVNode("i",{class:"iconfont icon-tobottom"})],8,["disabled","onClick"])])])]}),_:1},n)),t("</div>")}const _sfc_setup$1w=_sfc_main$1w.setup;_sfc_main$1w.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/index/twitter.vue"),_sfc_setup$1w?_sfc_setup$1w(e,t):void 0};const Twitter=_export_sfc(_sfc_main$1w,[["ssrRender",_sfc_ssrRender$1w],["__scopeId","data-v-c8c1ccd2"]]),_sfc_main$1v=defineComponent({name:"IndexPage",components:{Carrousel,Twitter,ArticleList},setup(){const{meta:e,i18n:t}=useEnhancer(),{articleList:n,appOption:o,twitterUserinfo:c,twitterTweets:d}=useStores();e(()=>{var r,v;return{title:`${META.title} - ${t.t(LanguageKey.APP_SLOGAN)}`,description:(r=o.data)==null?void 0:r.description,keywords:(v=o.data)==null?void 0:v.keywords.join(","),twitterCard:"summary_large_image"}});const g=async()=>{const r=n.list.pagination.current_page+1;await n.fetchList({page:r})};return useUniversalFetch(()=>Promise.all([n.fetchList(),c.fetch().catch(()=>{}),d.fetch().catch(()=>{})])),{twitterUserinfo:c,twitterTweets:d,articleListStore:n,loadmoreArticles:g}}}),index_vue_vue_type_style_index_0_scoped_30d1dc70_lang="";function _sfc_ssrRender$1v(e,t,n,o,c,d,g,r){var T,S;const v=resolveComponent("carrousel"),E=resolveComponent("twitter"),w=resolveComponent("article-list");t(`<div${ssrRenderAttrs(mergeProps({class:"index-page"},o))} data-v-30d1dc70>`),t(ssrRenderComponent(v,{class:"carrousel",articles:e.articleListStore.list.data,fetching:e.articleListStore.list.fetching},null,n)),t(ssrRenderComponent(E,{class:"twitter",userinfo:(T=e.twitterUserinfo.data)!=null?T:void 0,tweets:(S=e.twitterTweets.data)!=null?S:void 0,fetching:e.twitterUserinfo.fetching||e.twitterTweets.fetching||e.articleListStore.list.fetching},null,n)),t(ssrRenderComponent(w,{mammon:!1,fetching:e.articleListStore.list.fetching,articles:e.articleListStore.list.data,pagination:e.articleListStore.list.pagination,onLoadmore:e.loadmoreArticles},null,n)),t("</div>")}const _sfc_setup$1v=_sfc_main$1v.setup;_sfc_main$1v.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/index/index.vue"),_sfc_setup$1v?_sfc_setup$1v(e,t):void 0};const IndexFlowPage=_export_sfc(_sfc_main$1v,[["ssrRender",_sfc_ssrRender$1v],["__scopeId","data-v-30d1dc70"]]),_sfc_main$1u=defineComponent({name:"FlowArticleListHeader",props:{backgroundColor:{type:String,default:""},backgroundImage:{type:String,default:""},icon:{type:String,required:!0}},setup(e){const t=computed(()=>e.backgroundImage||getTargetCDNURL("/images/thumbnail/carrousel.jpg"));return{LanguageKey,backgroundImageUrl:t}}}),header_vue_vue_type_style_index_0_scoped_2cee1445_lang="";function _sfc_ssrRender$1u(e,t,n,o,c,d,g,r){t(`<div${ssrRenderAttrs(mergeProps({class:"header"},o))} data-v-2cee1445><div class="background" style="${ssrRenderStyle({backgroundColor:e.backgroundColor,backgroundImage:`url(${e.backgroundImageUrl})`})}" data-v-2cee1445></div><div class="content" data-v-2cee1445><div class="logo" data-v-2cee1445><i class="${ssrRenderClass([e.icon,"iconfont"])}" data-v-2cee1445></i></div><div class="title" data-v-2cee1445><div class="text" data-v-2cee1445>`),ssrRenderSlot(e.$slots,"default",{},null,t,n),t("</div></div></div></div>")}const _sfc_setup$1u=_sfc_main$1u.setup;_sfc_main$1u.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/flow/desktop/header.vue"),_sfc_setup$1u?_sfc_setup$1u(e,t):void 0};const ArticleListHeader=_export_sfc(_sfc_main$1u,[["ssrRender",_sfc_ssrRender$1u],["__scopeId","data-v-2cee1445"]]),_sfc_main$1t=defineComponent({name:"CategoryPage",components:{ArticleListHeader,ArticleList},props:{categorySlug:{type:String,required:!0}},setup(e){const{i18n:t,meta:n,isZhLang:o}=useEnhancer(),c=useArticleListStore(),d=useCategoryStore(),g=computed(()=>d.data.find(T=>T.slug===e.categorySlug)),r=computed(()=>{var T;return getExtendValue(((T=g.value)==null?void 0:T.extends)||[],"icon")||"icon-category"}),v=computed(()=>{var T;return getExtendValue(((T=g.value)==null?void 0:T.extends)||[],"background")}),E=computed(()=>{var T;return getExtendValue(((T=g.value)==null?void 0:T.extends)||[],"bgcolor")}),w=async()=>{await c.fetchList({category_slug:e.categorySlug,page:c.list.pagination.current_page+1}),scrollToNextScreen()};return n(()=>{var P;const T=firstUpperCase(e.categorySlug),S=t.t(e.categorySlug),N=o.value?[S,T]:[T,"Category"],L=((P=g.value)==null?void 0:P.description)||N.join(",");return{pageTitle:N.join(" | "),description:L,ogType:"blog"}}),onBeforeMount(()=>{watch(()=>e.categorySlug,T=>c.fetchList({category_slug:T}),{flush:"post"})}),useUniversalFetch(()=>c.fetchList({category_slug:e.categorySlug})),{articleListStore:c,currentCategory:g,currentCategoryIcon:r,currentCategoryImage:v,currentCategoryColor:E,loadmoreArticles:w,firstUpperCase}}}),category_vue_vue_type_style_index_0_scoped_b0107fae_lang="";function _sfc_ssrRender$1t(e,t,n,o,c,d,g,r){const v=resolveComponent("article-list-header"),E=resolveComponent("i18n"),w=resolveComponent("divider"),T=resolveComponent("article-list");t(`<div${ssrRenderAttrs(mergeProps({class:"category-flow-page"},o))} data-v-b0107fae>`),t(ssrRenderComponent(v,{"background-color":e.currentCategoryColor,"background-image":e.currentCategoryImage,icon:e.currentCategoryIcon},{default:withCtx((S,N,L,P)=>{if(N)e.currentCategory?N(ssrRenderComponent(E,null,{zh:withCtx((O,V,D,U)=>{if(V)V(`<span data-v-b0107fae${U}>${ssrInterpolate(e.currentCategory.name)}</span>`),V(ssrRenderComponent(w,{class:"divider",type:"vertical"},null,D,U)),V(`<span data-v-b0107fae${U}>${ssrInterpolate(e.currentCategory.description||"...")}</span>`);else return[createVNode("span",null,toDisplayString(e.currentCategory.name),1),createVNode(w,{class:"divider",type:"vertical"}),createVNode("span",null,toDisplayString(e.currentCategory.description||"..."),1)]}),en:withCtx((O,V,D,U)=>{if(V)V(`<span data-v-b0107fae${U}>Category</span>`),V(ssrRenderComponent(w,{class:"divider",type:"vertical"},null,D,U)),V(`<span data-v-b0107fae${U}>${ssrInterpolate(e.firstUpperCase(e.currentCategory.slug))}</span>`);else return[createVNode("span",null,"Category"),createVNode(w,{class:"divider",type:"vertical"}),createVNode("span",null,toDisplayString(e.firstUpperCase(e.currentCategory.slug)),1)]}),_:1},L,P)):N("<!---->");else return[e.currentCategory?(openBlock(),createBlock(E,{key:0},{zh:withCtx(()=>[createVNode("span",null,toDisplayString(e.currentCategory.name),1),createVNode(w,{class:"divider",type:"vertical"}),createVNode("span",null,toDisplayString(e.currentCategory.description||"..."),1)]),en:withCtx(()=>[createVNode("span",null,"Category"),createVNode(w,{class:"divider",type:"vertical"}),createVNode("span",null,toDisplayString(e.firstUpperCase(e.currentCategory.slug)),1)]),_:1})):createCommentVNode("",!0)]}),_:1},n)),t(ssrRenderComponent(T,{fetching:e.articleListStore.list.fetching,articles:e.articleListStore.list.data,pagination:e.articleListStore.list.pagination,onLoadmore:e.loadmoreArticles},null,n)),t("</div>")}const _sfc_setup$1t=_sfc_main$1t.setup;_sfc_main$1t.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/category.vue"),_sfc_setup$1t?_sfc_setup$1t(e,t):void 0};const CategoryFlowPage=_export_sfc(_sfc_main$1t,[["ssrRender",_sfc_ssrRender$1t],["__scopeId","data-v-b0107fae"]]),_sfc_main$1s=defineComponent({name:"TagPage",components:{ArticleListHeader,ArticleList},props:{tagSlug:{type:String,required:!0}},setup(e){const{meta:t,isZhLang:n}=useEnhancer(),o=useTagStore(),c=useArticleListStore(),d=computed(()=>o.data.find(w=>w.slug===e.tagSlug)),g=computed(()=>{var w;return getExtendValue(((w=d.value)==null?void 0:w.extends)||[],"icon")||"icon-tag"}),r=computed(()=>{var w;return getExtendValue(((w=d.value)==null?void 0:w.extends)||[],"background")}),v=computed(()=>{var w;return getExtendValue(((w=d.value)==null?void 0:w.extends)||[],"bgcolor")}),E=async()=>{await c.fetchList({tag_slug:e.tagSlug,page:c.list.pagination.current_page+1}),scrollToNextScreen()};return t(()=>{var L,P;const w=firstUpperCase(e.tagSlug),T=(L=d.value)==null?void 0:L.name,S=n.value?[T,w]:[w,"Tag"],N=((P=d.value)==null?void 0:P.description)||S.join(",");return{pageTitle:S.join(" | "),description:N,ogType:"blog"}}),onBeforeMount(()=>{watch(()=>e.tagSlug,w=>c.fetchList({tag_slug:w}),{flush:"post"})}),useUniversalFetch(()=>c.fetchList({tag_slug:e.tagSlug})),{articleListStore:c,tagEnName,currentTag:d,currentTagIcon:g,currentTagImage:r,currentTagColor:v,loadmoreArticles:E}}}),tag_vue_vue_type_style_index_0_scoped_81469806_lang="";function _sfc_ssrRender$1s(e,t,n,o,c,d,g,r){const v=resolveComponent("article-list-header"),E=resolveComponent("i18n"),w=resolveComponent("divider"),T=resolveComponent("article-list");t(`<div${ssrRenderAttrs(mergeProps({class:"tag-flow-page"},o))} data-v-81469806>`),t(ssrRenderComponent(v,{"background-color":e.currentTagColor,"background-image":e.currentTagImage,icon:e.currentTagIcon},{default:withCtx((S,N,L,P)=>{if(N)e.currentTag?(N(`<span class="header" data-v-81469806${P}>`),N(ssrRenderComponent(E,null,{zh:withCtx((O,V,D,U)=>{if(V)V(`<span data-v-81469806${U}>#${ssrInterpolate(e.currentTag.name)}</span>`),V(ssrRenderComponent(w,{class:"divider",type:"vertical"},null,D,U)),V(`<span data-v-81469806${U}>${ssrInterpolate(e.currentTag.description||"...")}</span>`);else return[createVNode("span",null,"#"+toDisplayString(e.currentTag.name),1),createVNode(w,{class:"divider",type:"vertical"}),createVNode("span",null,toDisplayString(e.currentTag.description||"..."),1)]}),en:withCtx((O,V,D,U)=>{if(V)V(`<span data-v-81469806${U}>Tag</span>`),V(ssrRenderComponent(w,{class:"divider",type:"vertical"},null,D,U)),V(`<span data-v-81469806${U}>#${ssrInterpolate(e.tagEnName(e.currentTag))}</span>`);else return[createVNode("span",null,"Tag"),createVNode(w,{class:"divider",type:"vertical"}),createVNode("span",null,"#"+toDisplayString(e.tagEnName(e.currentTag)),1)]}),_:1},L,P)),N("</span>")):N("<!---->");else return[e.currentTag?(openBlock(),createBlock("span",{key:0,class:"header"},[createVNode(E,null,{zh:withCtx(()=>[createVNode("span",null,"#"+toDisplayString(e.currentTag.name),1),createVNode(w,{class:"divider",type:"vertical"}),createVNode("span",null,toDisplayString(e.currentTag.description||"..."),1)]),en:withCtx(()=>[createVNode("span",null,"Tag"),createVNode(w,{class:"divider",type:"vertical"}),createVNode("span",null,"#"+toDisplayString(e.tagEnName(e.currentTag)),1)]),_:1})])):createCommentVNode("",!0)]}),_:1},n)),t(ssrRenderComponent(T,{fetching:e.articleListStore.list.fetching,articles:e.articleListStore.list.data,pagination:e.articleListStore.list.pagination,onLoadmore:e.loadmoreArticles},null,n)),t("</div>")}const _sfc_setup$1s=_sfc_main$1s.setup;_sfc_main$1s.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/tag.vue"),_sfc_setup$1s?_sfc_setup$1s(e,t):void 0};const TagFlowPage=_export_sfc(_sfc_main$1s,[["ssrRender",_sfc_ssrRender$1s],["__scopeId","data-v-81469806"]]),_sfc_main$1r=defineComponent({name:"DatePage",components:{ArticleListHeader,ArticleList},props:{date:{type:String,required:!0}},setup(e){const{meta:t}=useEnhancer();t(()=>({pageTitle:`${e.date} | Date`,ogType:"blog"}));const n=useArticleListStore(),o=async()=>{await n.fetchList({date:e.date,page:n.list.pagination.current_page+1}),scrollToNextScreen()};return onBeforeMount(()=>{watch(()=>e.date,c=>n.fetchList({date:c}),{flush:"post"})}),useUniversalFetch(()=>n.fetchList({date:e.date})),{articleListStore:n,loadmoreArticles:o}}});function _sfc_ssrRender$1r(e,t,n,o,c,d,g,r){const v=resolveComponent("article-list-header"),E=resolveComponent("i18n"),w=resolveComponent("article-list");t(`<div${ssrRenderAttrs(mergeProps({class:"date-flow-page"},o))}>`),t(ssrRenderComponent(v,{icon:"icon-clock"},{default:withCtx((T,S,N,L)=>{if(S)S(ssrRenderComponent(E,{zh:`\u53D1\u5E03\u4E8E ${e.date} \u7684\u6240\u6709\u6587\u7AE0`,en:`Articles published at ${e.date}`},null,N,L));else return[createVNode(E,{zh:`\u53D1\u5E03\u4E8E ${e.date} \u7684\u6240\u6709\u6587\u7AE0`,en:`Articles published at ${e.date}`},null,8,["zh","en"])]}),_:1},n)),t(ssrRenderComponent(w,{fetching:e.articleListStore.list.fetching,articles:e.articleListStore.list.data,pagination:e.articleListStore.list.pagination,onLoadmore:e.loadmoreArticles},null,n)),t("</div>")}const _sfc_setup$1r=_sfc_main$1r.setup;_sfc_main$1r.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/date.vue"),_sfc_setup$1r?_sfc_setup$1r(e,t):void 0};const DateFlowPage=_export_sfc(_sfc_main$1r,[["ssrRender",_sfc_ssrRender$1r]]),_sfc_main$1q=defineComponent({name:"SearchPage",components:{ArticleListHeader,ArticleList},props:{keyword:{type:String,required:!0}},setup(e){const{meta:t}=useEnhancer();t(()=>({pageTitle:`${e.keyword} | Search`,ogType:"blog"}));const n=useArticleListStore(),o=async()=>{await n.fetchList({keyword:e.keyword,page:n.list.pagination.current_page+1}),scrollToNextScreen()};return onBeforeMount(()=>{watch(()=>e.keyword,c=>n.fetchList({keyword:c}),{flush:"post"})}),useUniversalFetch(()=>n.fetchList({keyword:e.keyword})),{articleListStore:n,loadmoreArticles:o}}});function _sfc_ssrRender$1q(e,t,n,o,c,d,g,r){const v=resolveComponent("article-list-header"),E=resolveComponent("i18n"),w=resolveComponent("article-list");t(`<div${ssrRenderAttrs(mergeProps({class:"search-flow-page"},o))}>`),t(ssrRenderComponent(v,{icon:"icon-search"},{default:withCtx((T,S,N,L)=>{if(S)S(ssrRenderComponent(E,{zh:`\u548C \u201C${e.keyword}\u201D \u6709\u5173\u7684\u6240\u6709\u6587\u7AE0`,en:`Keyword "${e.keyword}"'s result`},null,N,L));else return[createVNode(E,{zh:`\u548C \u201C${e.keyword}\u201D \u6709\u5173\u7684\u6240\u6709\u6587\u7AE0`,en:`Keyword "${e.keyword}"'s result`},null,8,["zh","en"])]}),_:1},n)),t(ssrRenderComponent(w,{fetching:e.articleListStore.list.fetching,articles:e.articleListStore.list.data,pagination:e.articleListStore.list.pagination,onLoadmore:e.loadmoreArticles},null,n)),t("</div>")}const _sfc_setup$1q=_sfc_main$1q.setup;_sfc_main$1q.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/search.vue"),_sfc_setup$1q?_sfc_setup$1q(e,t):void 0};const SearchFlowPage=_export_sfc(_sfc_main$1q,[["ssrRender",_sfc_ssrRender$1q]]),cloneDate=e=>new Date(e.getTime()),dateToHuman=e=>{const t=e.getDay();return{day:e.getDate(),week:t===0?7:t,month:e.getMonth()+1,year:e.getFullYear()}},isSameHumanDay=(e,t)=>{const n=e.day===t.day,o=e.month===t.month,c=e.year===t.year;return n&&o&&c},humanToDate=e=>{const t=new Date;return t.setDate(e.day),t.setFullYear(e.year),t.setMonth(e.month-1),t},humanDateToYMD=({year:e,month:t,day:n},o="-")=>{const c=t?o+String(t).padStart(2,"0"):"",d=n?o+String(n).padStart(2,"0"):"";return`${e}${c}${d}`},dateToYMD=(e,t)=>{const n=typeof e=="string"?new Date(e):e;return humanDateToYMD(dateToHuman(n),t)},useArchiveStore=defineFetchStore({id:"archive",initData:null,onlyOnce:!0,async fetcher(){return(await nodepress$1.get("/archive")).result},getters:{hydrated:e=>{if(!e.data)return null;const{articles:t,tags:n,categories:o}=e.data,c=new Map(n.map(g=>[g._id,{...g,articles_count:0}])),d=new Map(o.map(g=>[g._id,{...g,articles_count:0}]));return t.forEach(g=>{g.tag.forEach(r=>{c.has(r)&&c.get(r).articles_count++}),g.category.forEach(r=>{d.has(r)&&d.get(r).articles_count++})}),{tags:Array.from(c.values()),categories:Array.from(d.values())}},tree:e=>{var n;const t=[];return(n=e.data)==null||n.articles.map(o=>({...o,createAt:dateToHuman(new Date(o.create_at))})).sort(({create_at:o},{create_at:c})=>Date.parse(c)-Date.parse(o)).forEach(o=>{const{createAt:c}=o;let g=t.find(E=>E.year===c.year);g||(g={year:c.year,months:[]},t.push(g));let v=g.months.find(E=>E.month===c.month);v||(v={month:c.month,articles:[]},g.months.push(v)),v.articles.push(o)}),t}}}),_sfc_main$1p=defineComponent({name:"PageBanner",props:{image:{type:String,required:!0},position:{type:Number,default:20},blur:{type:Number,default:0},isMobile:{type:Boolean,default:!1}},setup(e){const{isDarkTheme:t}=useEnhancer();return{isDarkTheme:t,imageURL:getTargetCDNURL(e.image)}}}),banner_vue_vue_type_style_index_0_scoped_4f25f2fb_lang="";function _sfc_ssrRender$1p(e,t,n,o,c,d,g,r){t(`<div${ssrRenderAttrs(mergeProps({class:["banner",{mobile:e.isMobile}]},o))} data-v-4f25f2fb><div class="${ssrRenderClass([{dark:e.isDarkTheme},"background"])}" style="${ssrRenderStyle({backgroundImage:`url(${e.imageURL})`,backgroundPositionY:`${e.position}%`})}" data-v-4f25f2fb></div><div class="${ssrRenderClass([{blur:Boolean(e.blur)},"content"])}" style="${ssrRenderStyle({"--blur":`${e.blur}px`})}" data-v-4f25f2fb><h2 class="title" data-v-4f25f2fb>`),ssrRenderSlot(e.$slots,"title",{},null,t,n),t('</h2><div class="description" data-v-4f25f2fb>'),ssrRenderSlot(e.$slots,"description",{},null,t,n),t("</div></div></div>")}const _sfc_setup$1p=_sfc_main$1p.setup;_sfc_main$1p.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/common/banner.vue"),_sfc_setup$1p?_sfc_setup$1p(e,t):void 0};const PageBanner=_export_sfc(_sfc_main$1p,[["ssrRender",_sfc_ssrRender$1p],["__scopeId","data-v-4f25f2fb"]]),ms=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthNameI18ns=ms.map((e,t)=>({[Language.English]:e,[Language.Chinese]:t===9?"\u5341\u6708":t==10?"\u5341\u4E00":t==11?"\u5341\u4E8C":numberToChinese(t+1)+"\u6708"})),getMonthNameI18n=e=>monthNameI18ns[e-1],_sfc_main$1o=defineComponent({name:"ArchiveTree",props:{tree:{type:Array,required:!0}},setup(){const{isZhLang:e}=useEnhancer();return{isZhLang:e,numberToChinese,getMonthNameI18n}}}),tree_vue_vue_type_style_index_0_scoped_0042f18a_lang="";function _sfc_ssrRender$1o(e,t,n,o,c,d,g,r){t(`<div${ssrRenderAttrs(mergeProps({class:"archive-tree"},o))} data-v-0042f18a><!--[-->`),ssrRenderList(e.tree,v=>{t('<ul class="month-list" data-v-0042f18a><!--[-->'),ssrRenderList(v.months,E=>{t('<li class="month" data-v-0042f18a>'),ssrRenderSlot(e.$slots,"title",{title:e.isZhLang?`${e.numberToChinese(v.year)} #${e.getMonthNameI18n(E.month).zh}\uFF08${E.articles.length}\uFF09`:`${v.year} #${e.getMonthNameI18n(E.month).en} (${E.articles.length})`},null,t,n),t('<ul class="article-list" data-v-0042f18a><!--[-->'),ssrRenderList(E.articles,(w,T)=>{t('<li class="article" data-v-0042f18a>'),ssrRenderSlot(e.$slots,"article",{index:T,article:w,day:String(w.createAt.day).padStart(2,"0")},null,t,n),t("</li>")}),t("<!--]--></ul></li>")}),t("<!--]--></ul>")}),t("<!--]--></div>")}const _sfc_setup$1o=_sfc_main$1o.setup;_sfc_main$1o.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/archive/tree.vue"),_sfc_setup$1o?_sfc_setup$1o(e,t):void 0};const ArchiveTree=_export_sfc(_sfc_main$1o,[["ssrRender",_sfc_ssrRender$1o],["__scopeId","data-v-0042f18a"]]),tunnel=axios.create({baseURL:BFF_TUNNEL_PREFIX,proxy:{host:"localhost",port:getBFFServerPort()}});tunnel.interceptors.response.use(e=>e.data);const tunnel$1={$:tunnel,request:(...e)=>tunnel.request(...e),dispatch:(e,t)=>tunnel.get(e,{params:t})},useNodepressStatisticStore=defineFetchStore({id:"nodepressStatistic",initData:null,fetcher(){return nodepress$1.get("/expansion/statistic").then(e=>e.result)}}),useGitHubStatisticStore=defineFetchStore({id:"openSourceGitHubStatisticStore",initData:null,onlyOnce:!0,fetcher:()=>tunnel$1.dispatch(TunnelModule.OpenSourceGitHubStatistic)}),useNPMStatisticStore=defineFetchStore({id:"openSourceNPMStatisticStore",initData:null,onlyOnce:!0,fetcher:()=>tunnel$1.dispatch(TunnelModule.OpenSourceNPMStatistic),getters:{totalPackages(e){return e.data?Object.keys(e.data.downloads).length:0},totalDownloads(e){let t=0;return e.data&&Object.values(e.data.downloads).forEach(n=>{t+=n}),t},averageScore(e){if(!e.data)return 0;let t=0;return e.data.packages.forEach(n=>{t+=n.score.final}),(t/e.data.packages.length).toFixed(3)}}}),i18ns$1={title:{[Language.Chinese]:"\u4E07\u7269\u4E4B\u4E2D\uFF0C\u5E0C\u671B\u81F3\u7F8E",[Language.English]:"Hope is a good thing"},description:{[Language.Chinese]:"\u81F3\u7F8E\u4E4B\u7269\uFF0C\u6C38\u4E0D\u51CB\u96F6",[Language.English]:"Maybe the best of things and no good thing ever dies"}},useArchivePageMeta=()=>{const{i18n:e,meta:t,isZhLang:n}=useEnhancer();t(()=>{const o=firstUpperCase(e.t(LanguageKey.PAGE_ARCHIVE,Language.English));return{pageTitle:(n.value?[e.t(LanguageKey.PAGE_ARCHIVE),o]:[o]).join(" | "),description:`${META.title} \u6570\u636E\u5F52\u6863`,twitterCard:"summary_large_image",ogType:"blog"}})},useArchivePageStatistics=()=>{const{i18n:e}=useEnhancer(),t=useNodepressStatisticStore(),n=computed(()=>{var o,c,d,g,r,v,E,w;return{tags:{icon:"icon-quill",title:e.t(LanguageKey.STATISTIC_TAGS),content:numberSplit(((o=t.data)==null?void 0:o.tags)||0)},articles:{icon:"icon-quill",title:e.t(LanguageKey.STATISTIC_ARTICLES),content:numberSplit(((c=t.data)==null?void 0:c.articles)||0)},comments:{icon:"icon-comment",title:e.t(LanguageKey.STATISTIC_COMMENTS),content:numberSplit(((d=t.data)==null?void 0:d.comments)||0)},todayViews:{icon:"icon-eye",title:e.t(LanguageKey.STATISTIC_TODAY_VIEWS),content:numberSplit(((g=t.data)==null?void 0:g.todayViews)||0)},totalViews:{icon:"icon-like",title:e.t(LanguageKey.STATISTIC_TOTAL_VIEWS),content:numberSplit(((r=t.data)==null?void 0:r.totalViews)||0)},totalLikes:{icon:"icon-like",title:e.t(LanguageKey.STATISTIC_TOTAL_UPVOTES),content:numberSplit(((v=t.data)==null?void 0:v.totalLikes)||0)},averageEmotion:{icon:"icon-emoji",title:e.t(LanguageKey.STATISTIC_AVERAGE_EMOTION),content:String((w=(E=t.data)==null?void 0:E.averageEmotion)!=null?w:"-")}}});return{store:t,fetch:t.fetch,statistics:n}},_sfc_main$1n=defineComponent({name:"DesktopArchivePage",components:{PageBanner,ArchiveTree},setup(){const e=useArchiveStore(),t=useArchivePageStatistics(),n=ref(!0),o=computed(()=>[t.statistics.value.articles,t.statistics.value.todayViews,t.statistics.value.comments,t.statistics.value.totalLikes,t.statistics.value.averageEmotion]);return useArchivePageMeta(),useUniversalFetch(()=>e.fetch()),onMounted(()=>{t.fetch().finally(()=>{n.value=!1})}),{LanguageKey,i18ns:i18ns$1,getArticleDetailRoute,numberSplit,archiveStore:e,statisticFetching:n,statistics:o}}}),desktop_vue_vue_type_style_index_0_scoped_14d92c5a_lang="";function _sfc_ssrRender$1n(e,t,n,o,c,d,g,r){const v=resolveComponent("page-banner"),E=resolveComponent("webfont"),w=resolveComponent("i18n"),T=resolveComponent("container"),S=resolveComponent("skeleton-base"),N=resolveComponent("placeholder"),L=resolveComponent("empty"),P=resolveComponent("skeleton-line"),O=resolveComponent("archive-tree"),V=resolveComponent("divider");t(`<div${ssrRenderAttrs(mergeProps({class:"archive-page"},o))} data-v-14d92c5a>`),t(ssrRenderComponent(v,{position:32,image:"/images/page-archive/banner.jpg"},{title:withCtx((D,U,W,Z)=>{if(U)U(ssrRenderComponent(E,null,{default:withCtx((re,ae,ce,ne)=>{if(ae)ae(ssrRenderComponent(w,e.i18ns.title,null,ce,ne));else return[createVNode(w,e.i18ns.title,null,16)]}),_:1},W,Z));else return[createVNode(E,null,{default:withCtx(()=>[createVNode(w,e.i18ns.title,null,16)]),_:1})]}),description:withCtx((D,U,W,Z)=>{if(U)U(ssrRenderComponent(w,e.i18ns.description,null,W,Z));else return[createVNode(w,e.i18ns.description,null,16)]}),_:1},n)),t(ssrRenderComponent(T,{class:"statistic-warpper"},{default:withCtx((D,U,W,Z)=>{if(U)U(""),e.statisticFetching?(U(`<div class="skeletons" data-v-14d92c5a${Z}><!--[-->`),ssrRenderList(e.statistics.length,re=>{U(ssrRenderComponent(S,{class:"item",key:re},null,W,Z))}),U("<!--]--></div>")):(U(`<div class="statistics" data-v-14d92c5a${Z}><!--[-->`),ssrRenderList(e.statistics,(re,ae)=>{U(`<div class="item" data-v-14d92c5a${Z}><p class="title" data-v-14d92c5a${Z}><span class="text" data-v-14d92c5a${Z}>${ssrInterpolate(re.title)}</span><i class="${ssrRenderClass([re.icon,"iconfont"])}" data-v-14d92c5a${Z}></i></p><div class="content" data-v-14d92c5a${Z}>${ssrInterpolate(re.content)}</div></div>`)}),U("<!--]--></div>"));else return[createVNode(Transition,{name:"module",mode:"out-in"},{default:withCtx(()=>[e.statisticFetching?(openBlock(),createBlock("div",{key:0,class:"skeletons"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.statistics.length,re=>(openBlock(),createBlock(S,{class:"item",key:re}))),128))])):(openBlock(),createBlock("div",{key:1,class:"statistics"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.statistics,(re,ae)=>(openBlock(),createBlock("div",{class:"item",key:ae},[createVNode("p",{class:"title"},[createVNode("span",{class:"text"},toDisplayString(re.title),1),createVNode("i",{class:["iconfont",re.icon]},null,2)]),createVNode("div",{class:"content"},toDisplayString(re.content),1)]))),128))]))]),_:1})]}),_:1},n)),t(ssrRenderComponent(T,{class:"archive-warpper"},{default:withCtx((D,U,W,Z)=>{var re,ae;if(U)U(ssrRenderComponent(N,{data:(re=e.archiveStore.data)==null?void 0:re.articles.length,loading:e.archiveStore.fetching},{placeholder:withCtx((ce,ne,le,de)=>{if(ne)ne(ssrRenderComponent(L,{class:"archive-empty",key:"empty"},{default:withCtx((ie,ve,Pe,ct)=>{if(ve)ve(ssrRenderComponent(w,{k:e.LanguageKey.ARTICLE_PLACEHOLDER},null,Pe,ct));else return[createVNode(w,{k:e.LanguageKey.ARTICLE_PLACEHOLDER},null,8,["k"])]}),_:1},le,de));else return[createVNode(L,{class:"archive-empty",key:"empty"},{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.ARTICLE_PLACEHOLDER},null,8,["k"])]),_:1})]}),loading:withCtx((ce,ne,le,de)=>{if(ne)ne(`<ul class="archive-skeleton" data-v-14d92c5a${de}><!--[-->`),ssrRenderList(3,ie=>{ne(`<li class="item" data-v-14d92c5a${de}><!--[-->`),ssrRenderList(3,ve=>{ne(ssrRenderComponent(P,{key:ve,class:"line"},null,le,de))}),ne("<!--]--></li>")}),ne("<!--]--></ul>");else return[createVNode("ul",{class:"archive-skeleton",key:"skeleton"},[(openBlock(),createBlock(Fragment,null,renderList(3,ie=>createVNode("li",{key:ie,class:"item"},[(openBlock(),createBlock(Fragment,null,renderList(3,ve=>createVNode(P,{key:ve,class:"line"})),64))])),64))])]}),default:withCtx((ce,ne,le,de)=>{if(ne)ne(ssrRenderComponent(O,{class:"archive-content",tree:e.archiveStore.tree,key:"content"},{title:withCtx(({title:ie},ve,Pe,ct)=>{if(ve)ve(`<h1 class="archive-title" data-v-14d92c5a${ct}>${ssrInterpolate(ie)}</h1>`);else return[createVNode("h1",{class:"archive-title"},toDisplayString(ie),1)]}),article:withCtx(({article:ie,day:ve},Pe,ct,ge)=>{if(Pe)Pe(`<div class="archive-article" data-v-14d92c5a${ge}><div class="left" data-v-14d92c5a${ge}><h3 class="title" data-v-14d92c5a${ge}><span class="date" data-v-14d92c5a${ge}>D${ssrInterpolate(ve)}</span><a class="link" target="_blank"${ssrRenderAttr("title",ie.title)}${ssrRenderAttr("href",e.getArticleDetailRoute(ie.id))} data-v-14d92c5a${ge}>${ssrInterpolate(ie.title)}</a></h3><p class="description" data-v-14d92c5a${ge}>${ie.description}</p></div><div class="metas" data-v-14d92c5a${ge}><div class="item views" data-v-14d92c5a${ge}><i class="iconfont icon-eye" data-v-14d92c5a${ge}></i><span class="text" data-v-14d92c5a${ge}>${ssrInterpolate(e.numberSplit(ie.meta.views))}</span></div>`),Pe(ssrRenderComponent(V,{type:"vertical"},null,ct,ge)),Pe(`<div class="item likes" data-v-14d92c5a${ge}><i class="like-icon iconfont icon-like" data-v-14d92c5a${ge}></i><span class="text" data-v-14d92c5a${ge}>${ssrInterpolate(ie.meta.likes)}</span></div>`),Pe(ssrRenderComponent(V,{type:"vertical"},null,ct,ge)),Pe(`<div class="item comments" data-v-14d92c5a${ge}><i class="iconfont icon-comment" data-v-14d92c5a${ge}></i><span class="text" data-v-14d92c5a${ge}>${ssrInterpolate(ie.meta.comments)}</span></div></div></div>`);else return[createVNode("div",{class:"archive-article"},[createVNode("div",{class:"left"},[createVNode("h3",{class:"title"},[createVNode("span",{class:"date"},"D"+toDisplayString(ve),1),createVNode("a",{class:"link",target:"_blank",title:ie.title,href:e.getArticleDetailRoute(ie.id)},toDisplayString(ie.title),9,["title","href"])]),createVNode("p",{class:"description",innerHTML:ie.description},null,8,["innerHTML"])]),createVNode("div",{class:"metas"},[createVNode("div",{class:"item views"},[createVNode("i",{class:"iconfont icon-eye"}),createVNode("span",{class:"text"},toDisplayString(e.numberSplit(ie.meta.views)),1)]),createVNode(V,{type:"vertical"}),createVNode("div",{class:"item likes"},[createVNode("i",{class:"like-icon iconfont icon-like"}),createVNode("span",{class:"text"},toDisplayString(ie.meta.likes),1)]),createVNode(V,{type:"vertical"}),createVNode("div",{class:"item comments"},[createVNode("i",{class:"iconfont icon-comment"}),createVNode("span",{class:"text"},toDisplayString(ie.meta.comments),1)])])])]}),_:1},le,de));else return[createVNode(O,{class:"archive-content",tree:e.archiveStore.tree,key:"content"},{title:withCtx(({title:ie})=>[createVNode("h1",{class:"archive-title"},toDisplayString(ie),1)]),article:withCtx(({article:ie,day:ve})=>[createVNode("div",{class:"archive-article"},[createVNode("div",{class:"left"},[createVNode("h3",{class:"title"},[createVNode("span",{class:"date"},"D"+toDisplayString(ve),1),createVNode("a",{class:"link",target:"_blank",title:ie.title,href:e.getArticleDetailRoute(ie.id)},toDisplayString(ie.title),9,["title","href"])]),createVNode("p",{class:"description",innerHTML:ie.description},null,8,["innerHTML"])]),createVNode("div",{class:"metas"},[createVNode("div",{class:"item views"},[createVNode("i",{class:"iconfont icon-eye"}),createVNode("span",{class:"text"},toDisplayString(e.numberSplit(ie.meta.views)),1)]),createVNode(V,{type:"vertical"}),createVNode("div",{class:"item likes"},[createVNode("i",{class:"like-icon iconfont icon-like"}),createVNode("span",{class:"text"},toDisplayString(ie.meta.likes),1)]),createVNode(V,{type:"vertical"}),createVNode("div",{class:"item comments"},[createVNode("i",{class:"iconfont icon-comment"}),createVNode("span",{class:"text"},toDisplayString(ie.meta.comments),1)])])])]),_:1},8,["tree"])]}),_:1},W,Z));else return[createVNode(N,{data:(ae=e.archiveStore.data)==null?void 0:ae.articles.length,loading:e.archiveStore.fetching},{placeholder:withCtx(()=>[createVNode(L,{class:"archive-empty",key:"empty"},{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.ARTICLE_PLACEHOLDER},null,8,["k"])]),_:1})]),loading:withCtx(()=>[createVNode("ul",{class:"archive-skeleton",key:"skeleton"},[(openBlock(),createBlock(Fragment,null,renderList(3,ce=>createVNode("li",{key:ce,class:"item"},[(openBlock(),createBlock(Fragment,null,renderList(3,ne=>createVNode(P,{key:ne,class:"line"})),64))])),64))])]),default:withCtx(()=>[createVNode(O,{class:"archive-content",tree:e.archiveStore.tree,key:"content"},{title:withCtx(({title:ce})=>[createVNode("h1",{class:"archive-title"},toDisplayString(ce),1)]),article:withCtx(({article:ce,day:ne})=>[createVNode("div",{class:"archive-article"},[createVNode("div",{class:"left"},[createVNode("h3",{class:"title"},[createVNode("span",{class:"date"},"D"+toDisplayString(ne),1),createVNode("a",{class:"link",target:"_blank",title:ce.title,href:e.getArticleDetailRoute(ce.id)},toDisplayString(ce.title),9,["title","href"])]),createVNode("p",{class:"description",innerHTML:ce.description},null,8,["innerHTML"])]),createVNode("div",{class:"metas"},[createVNode("div",{class:"item views"},[createVNode("i",{class:"iconfont icon-eye"}),createVNode("span",{class:"text"},toDisplayString(e.numberSplit(ce.meta.views)),1)]),createVNode(V,{type:"vertical"}),createVNode("div",{class:"item likes"},[createVNode("i",{class:"like-icon iconfont icon-like"}),createVNode("span",{class:"text"},toDisplayString(ce.meta.likes),1)]),createVNode(V,{type:"vertical"}),createVNode("div",{class:"item comments"},[createVNode("i",{class:"iconfont icon-comment"}),createVNode("span",{class:"text"},toDisplayString(ce.meta.comments),1)])])])]),_:1},8,["tree"])]),_:1},8,["data","loading"])]}),_:1},n)),t("</div>")}const _sfc_setup$1n=_sfc_main$1n.setup;_sfc_main$1n.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/archive/desktop.vue"),_sfc_setup$1n?_sfc_setup$1n(e,t):void 0};const DesktopArchivePage=_export_sfc(_sfc_main$1n,[["ssrRender",_sfc_ssrRender$1n],["__scopeId","data-v-14d92c5a"]]),_sfc_main$1m=defineComponent({name:"MobileArchivePage",components:{PageBanner,ArchiveTree},setup(){const e=useArchiveStore(),t=useArchivePageStatistics(),n=ref(!0),o=computed(()=>[t.statistics.value.articles,t.statistics.value.todayViews,t.statistics.value.comments,t.statistics.value.averageEmotion]);return useArchivePageMeta(),useUniversalFetch(()=>e.fetch()),onMounted(()=>{t.fetch().finally(()=>{n.value=!1})}),{LanguageKey,i18ns:i18ns$1,getArticleDetailRoute,archiveStore:e,statisticFetching:n,statistics:o}}}),mobile_vue_vue_type_style_index_0_scoped_880b85b7_lang="";function _sfc_ssrRender$1m(e,t,n,o,c,d,g,r){const v=resolveComponent("page-banner"),E=resolveComponent("i18n"),w=resolveComponent("container"),T=resolveComponent("skeleton-base"),S=resolveComponent("placeholder"),N=resolveComponent("empty"),L=resolveComponent("skeleton-line"),P=resolveComponent("archive-tree");t(`<div${ssrRenderAttrs(mergeProps({class:"archive-page"},o))} data-v-880b85b7>`),t(ssrRenderComponent(v,{position:80,"is-mobile":!0,image:"/images/page-archive/banner-mobile.jpg"},{title:withCtx((O,V,D,U)=>{if(V)V(ssrRenderComponent(E,{k:e.LanguageKey.PAGE_ARCHIVE},null,D,U));else return[createVNode(E,{k:e.LanguageKey.PAGE_ARCHIVE},null,8,["k"])]}),description:withCtx((O,V,D,U)=>{if(V)V(ssrRenderComponent(E,e.i18ns.title,null,D,U));else return[createVNode(E,e.i18ns.title,null,16)]}),_:1},n)),t('<div class="page-content" data-v-880b85b7>'),t(ssrRenderComponent(w,{class:"statistic-warpper"},{default:withCtx((O,V,D,U)=>{if(V)V(""),e.statisticFetching?(V(`<div class="skeletons" data-v-880b85b7${U}><!--[-->`),ssrRenderList(e.statistics.length,W=>{V(ssrRenderComponent(T,{class:"skeleton",key:W},null,D,U))}),V("<!--]--></div>")):(V(`<div class="statistics" data-v-880b85b7${U}><!--[-->`),ssrRenderList(e.statistics,(W,Z)=>{V(`<div class="item" data-v-880b85b7${U}><p class="title" data-v-880b85b7${U}>${ssrInterpolate(W.title)}</p><div class="content" data-v-880b85b7${U}>${ssrInterpolate(W.content)}</div></div>`)}),V("<!--]--></div>"));else return[createVNode(Transition,{name:"module",mode:"out-in"},{default:withCtx(()=>[e.statisticFetching?(openBlock(),createBlock("div",{key:0,class:"skeletons"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.statistics.length,W=>(openBlock(),createBlock(T,{class:"skeleton",key:W}))),128))])):(openBlock(),createBlock("div",{key:1,class:"statistics"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.statistics,(W,Z)=>(openBlock(),createBlock("div",{class:"item",key:Z},[createVNode("p",{class:"title"},toDisplayString(W.title),1),createVNode("div",{class:"content"},toDisplayString(W.content),1)]))),128))]))]),_:1})]}),_:1},n)),t(ssrRenderComponent(w,{class:"archive-warpper"},{default:withCtx((O,V,D,U)=>{var W,Z;if(V)V(ssrRenderComponent(S,{data:(W=e.archiveStore.data)==null?void 0:W.articles.length,loading:e.archiveStore.fetching},{placeholder:withCtx((re,ae,ce,ne)=>{if(ae)ae(ssrRenderComponent(N,{class:"archive-empty",key:"empty"},{default:withCtx((le,de,ie,ve)=>{if(de)de(ssrRenderComponent(E,{k:e.LanguageKey.ARTICLE_PLACEHOLDER},null,ie,ve));else return[createVNode(E,{k:e.LanguageKey.ARTICLE_PLACEHOLDER},null,8,["k"])]}),_:1},ce,ne));else return[createVNode(N,{class:"archive-empty",key:"empty"},{default:withCtx(()=>[createVNode(E,{k:e.LanguageKey.ARTICLE_PLACEHOLDER},null,8,["k"])]),_:1})]}),loading:withCtx((re,ae,ce,ne)=>{if(ae)ae(`<div class="archive-skeleton" data-v-880b85b7${ne}><!--[-->`),ssrRenderList(6,le=>{ae(ssrRenderComponent(L,{class:"item",key:le},null,ce,ne))}),ae("<!--]--></div>");else return[createVNode("div",{class:"archive-skeleton",key:"skeleton"},[(openBlock(),createBlock(Fragment,null,renderList(6,le=>createVNode(L,{class:"item",key:le})),64))])]}),default:withCtx((re,ae,ce,ne)=>{if(ae)ae(ssrRenderComponent(P,{class:"archive-content",tree:e.archiveStore.tree,key:"content"},{title:withCtx(({title:le},de,ie,ve)=>{if(de)de(`<h3 class="archive-title" data-v-880b85b7${ve}>${ssrInterpolate(le)}</h3>`);else return[createVNode("h3",{class:"archive-title"},toDisplayString(le),1)]}),article:withCtx(({article:le,day:de},ie,ve,Pe)=>{if(ie)ie(`<div class="archive-article" data-v-880b85b7${Pe}><h4 class="title" data-v-880b85b7${Pe}><span class="date" data-v-880b85b7${Pe}>D${ssrInterpolate(de)}</span><a class="link" target="_blank"${ssrRenderAttr("title",le.title)}${ssrRenderAttr("href",e.getArticleDetailRoute(le.id))} data-v-880b85b7${Pe}>${ssrInterpolate(le.title)}</a></h4><p class="description" data-v-880b85b7${Pe}>${le.description}</p></div>`);else return[createVNode("div",{class:"archive-article"},[createVNode("h4",{class:"title"},[createVNode("span",{class:"date"},"D"+toDisplayString(de),1),createVNode("a",{class:"link",target:"_blank",title:le.title,href:e.getArticleDetailRoute(le.id)},toDisplayString(le.title),9,["title","href"])]),createVNode("p",{class:"description",innerHTML:le.description},null,8,["innerHTML"])])]}),_:1},ce,ne));else return[createVNode(P,{class:"archive-content",tree:e.archiveStore.tree,key:"content"},{title:withCtx(({title:le})=>[createVNode("h3",{class:"archive-title"},toDisplayString(le),1)]),article:withCtx(({article:le,day:de})=>[createVNode("div",{class:"archive-article"},[createVNode("h4",{class:"title"},[createVNode("span",{class:"date"},"D"+toDisplayString(de),1),createVNode("a",{class:"link",target:"_blank",title:le.title,href:e.getArticleDetailRoute(le.id)},toDisplayString(le.title),9,["title","href"])]),createVNode("p",{class:"description",innerHTML:le.description},null,8,["innerHTML"])])]),_:1},8,["tree"])]}),_:1},D,U));else return[createVNode(S,{data:(Z=e.archiveStore.data)==null?void 0:Z.articles.length,loading:e.archiveStore.fetching},{placeholder:withCtx(()=>[createVNode(N,{class:"archive-empty",key:"empty"},{default:withCtx(()=>[createVNode(E,{k:e.LanguageKey.ARTICLE_PLACEHOLDER},null,8,["k"])]),_:1})]),loading:withCtx(()=>[createVNode("div",{class:"archive-skeleton",key:"skeleton"},[(openBlock(),createBlock(Fragment,null,renderList(6,re=>createVNode(L,{class:"item",key:re})),64))])]),default:withCtx(()=>[createVNode(P,{class:"archive-content",tree:e.archiveStore.tree,key:"content"},{title:withCtx(({title:re})=>[createVNode("h3",{class:"archive-title"},toDisplayString(re),1)]),article:withCtx(({article:re,day:ae})=>[createVNode("div",{class:"archive-article"},[createVNode("h4",{class:"title"},[createVNode("span",{class:"date"},"D"+toDisplayString(ae),1),createVNode("a",{class:"link",target:"_blank",title:re.title,href:e.getArticleDetailRoute(re.id)},toDisplayString(re.title),9,["title","href"])]),createVNode("p",{class:"description",innerHTML:re.description},null,8,["innerHTML"])])]),_:1},8,["tree"])]),_:1},8,["data","loading"])]}),_:1},n)),t("</div></div>")}const _sfc_setup$1m=_sfc_main$1m.setup;_sfc_main$1m.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/archive/mobile.vue"),_sfc_setup$1m?_sfc_setup$1m(e,t):void 0};const MobileArchivePage=_export_sfc(_sfc_main$1m,[["ssrRender",_sfc_ssrRender$1m],["__scopeId","data-v-880b85b7"]]);var shams=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},n=Symbol("test"),o=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(o)!=="[object Symbol]")return!1;var c=42;t[n]=c;for(n in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var d=Object.getOwnPropertySymbols(t);if(d.length!==1||d[0]!==n||!Object.prototype.propertyIsEnumerable.call(t,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var g=Object.getOwnPropertyDescriptor(t,n);if(g.value!==c||g.enumerable!==!0)return!1}return!0},origSymbol=typeof Symbol<"u"&&Symbol,hasSymbolSham=shams,hasSymbols$1=function(){return typeof origSymbol!="function"||typeof Symbol!="function"||typeof origSymbol("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hasSymbolSham()},ERROR_MESSAGE="Function.prototype.bind called on incompatible ",slice=Array.prototype.slice,toStr$1=Object.prototype.toString,funcType="[object Function]",implementation$1=function(t){var n=this;if(typeof n!="function"||toStr$1.call(n)!==funcType)throw new TypeError(ERROR_MESSAGE+n);for(var o=slice.call(arguments,1),c,d=function(){if(this instanceof c){var w=n.apply(this,o.concat(slice.call(arguments)));return Object(w)===w?w:this}else return n.apply(t,o.concat(slice.call(arguments)))},g=Math.max(0,n.length-o.length),r=[],v=0;v<g;v++)r.push("$"+v);if(c=Function("binder","return function ("+r.join(",")+"){ return binder.apply(this,arguments); }")(d),n.prototype){var E=function(){};E.prototype=n.prototype,c.prototype=new E,E.prototype=null}return c},implementation=implementation$1,functionBind=Function.prototype.bind||implementation,bind$1=functionBind,src=bind$1.call(Function.call,Object.prototype.hasOwnProperty),undefined$1,$SyntaxError=SyntaxError,$Function=Function,$TypeError$1=TypeError,getEvalledConstructor=function(e){try{return $Function('"use strict"; return ('+e+").constructor;")()}catch{}},$gOPD=Object.getOwnPropertyDescriptor;if($gOPD)try{$gOPD({},"")}catch{$gOPD=null}var throwTypeError=function(){throw new $TypeError$1},ThrowTypeError=$gOPD?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols=hasSymbols$1(),getProto=Object.getPrototypeOf||function(e){return e.__proto__},needsEval={},TypedArray=typeof Uint8Array>"u"?undefined$1:getProto(Uint8Array),INTRINSICS={"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols?getProto([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols?getProto(getProto([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols?undefined$1:getProto(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols?undefined$1:getProto(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols?getProto(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols?Symbol:undefined$1,"%SyntaxError%":$SyntaxError,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$1,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet},doEval=function e(t){var n;if(t==="%AsyncFunction%")n=getEvalledConstructor("async function () {}");else if(t==="%GeneratorFunction%")n=getEvalledConstructor("function* () {}");else if(t==="%AsyncGeneratorFunction%")n=getEvalledConstructor("async function* () {}");else if(t==="%AsyncGenerator%"){var o=e("%AsyncGeneratorFunction%");o&&(n=o.prototype)}else if(t==="%AsyncIteratorPrototype%"){var c=e("%AsyncGenerator%");c&&(n=getProto(c.prototype))}return INTRINSICS[t]=n,n},LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind=functionBind,hasOwn$1=src,$concat$1=bind.call(Function.call,Array.prototype.concat),$spliceApply=bind.call(Function.apply,Array.prototype.splice),$replace$1=bind.call(Function.call,String.prototype.replace),$strSlice=bind.call(Function.call,String.prototype.slice),$exec=bind.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function(t){var n=$strSlice(t,0,1),o=$strSlice(t,-1);if(n==="%"&&o!=="%")throw new $SyntaxError("invalid intrinsic syntax, expected closing `%`");if(o==="%"&&n!=="%")throw new $SyntaxError("invalid intrinsic syntax, expected opening `%`");var c=[];return $replace$1(t,rePropName,function(d,g,r,v){c[c.length]=r?$replace$1(v,reEscapeChar,"$1"):g||d}),c},getBaseIntrinsic=function(t,n){var o=t,c;if(hasOwn$1(LEGACY_ALIASES,o)&&(c=LEGACY_ALIASES[o],o="%"+c[0]+"%"),hasOwn$1(INTRINSICS,o)){var d=INTRINSICS[o];if(d===needsEval&&(d=doEval(o)),typeof d>"u"&&!n)throw new $TypeError$1("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:c,name:o,value:d}}throw new $SyntaxError("intrinsic "+t+" does not exist!")},getIntrinsic=function(t,n){if(typeof t!="string"||t.length===0)throw new $TypeError$1("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new $TypeError$1('"allowMissing" argument must be a boolean');if($exec(/^%?[^%]*%?$/,t)===null)throw new $SyntaxError("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var o=stringToPath(t),c=o.length>0?o[0]:"",d=getBaseIntrinsic("%"+c+"%",n),g=d.name,r=d.value,v=!1,E=d.alias;E&&(c=E[0],$spliceApply(o,$concat$1([0,1],E)));for(var w=1,T=!0;w<o.length;w+=1){var S=o[w],N=$strSlice(S,0,1),L=$strSlice(S,-1);if((N==='"'||N==="'"||N==="`"||L==='"'||L==="'"||L==="`")&&N!==L)throw new $SyntaxError("property names with quotes must have matching quotes");if((S==="constructor"||!T)&&(v=!0),c+="."+S,g="%"+c+"%",hasOwn$1(INTRINSICS,g))r=INTRINSICS[g];else if(r!=null){if(!(S in r)){if(!n)throw new $TypeError$1("base intrinsic for "+t+" exists, but the property is not available.");return}if($gOPD&&w+1>=o.length){var P=$gOPD(r,S);T=!!P,T&&"get"in P&&!("originalValue"in P.get)?r=P.get:r=r[S]}else T=hasOwn$1(r,S),r=r[S];T&&!v&&(INTRINSICS[g]=r)}}return r},callBind$1={exports:{}};(function(e){var t=functionBind,n=getIntrinsic,o=n("%Function.prototype.apply%"),c=n("%Function.prototype.call%"),d=n("%Reflect.apply%",!0)||t.call(c,o),g=n("%Object.getOwnPropertyDescriptor%",!0),r=n("%Object.defineProperty%",!0),v=n("%Math.max%");if(r)try{r({},"a",{value:1})}catch{r=null}e.exports=function(T){var S=d(t,c,arguments);if(g&&r){var N=g(S,"length");N.configurable&&r(S,"length",{value:1+v(0,T.length-(arguments.length-1))})}return S};var E=function(){return d(t,o,arguments)};r?r(e.exports,"apply",{value:E}):e.exports.apply=E})(callBind$1);var GetIntrinsic$1=getIntrinsic,callBind=callBind$1.exports,$indexOf=callBind(GetIntrinsic$1("String.prototype.indexOf")),callBound$1=function(t,n){var o=GetIntrinsic$1(t,!!n);return typeof o=="function"&&$indexOf(t,".prototype.")>-1?callBind(o):o},util_inspect=require$$0__default$2.default.inspect,hasMap=typeof Map=="function"&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize=hasMap&&mapSizeDescriptor&&typeof mapSizeDescriptor.get=="function"?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet=typeof Set=="function"&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&typeof setSizeDescriptor.get=="function"?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,hasWeakMap=typeof WeakMap=="function"&&WeakMap.prototype,weakMapHas=hasWeakMap?WeakMap.prototype.has:null,hasWeakSet=typeof WeakSet=="function"&&WeakSet.prototype,weakSetHas=hasWeakSet?WeakSet.prototype.has:null,hasWeakRef=typeof WeakRef=="function"&&WeakRef.prototype,weakRefDeref=hasWeakRef?WeakRef.prototype.deref:null,booleanValueOf=Boolean.prototype.valueOf,objectToString=Object.prototype.toString,functionToString=Function.prototype.toString,$match=String.prototype.match,$slice=String.prototype.slice,$replace=String.prototype.replace,$toUpperCase=String.prototype.toUpperCase,$toLowerCase=String.prototype.toLowerCase,$test=RegExp.prototype.test,$concat=Array.prototype.concat,$join=Array.prototype.join,$arrSlice=Array.prototype.slice,$floor=Math.floor,bigIntValueOf=typeof BigInt=="function"?BigInt.prototype.valueOf:null,gOPS=Object.getOwnPropertySymbols,symToString=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,hasShammedSymbols=typeof Symbol=="function"&&typeof Symbol.iterator=="object",toStringTag=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===hasShammedSymbols?"object":"symbol")?Symbol.toStringTag:null,isEnumerable=Object.prototype.propertyIsEnumerable,gPO=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function addNumericSeparator(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||$test.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var o=e<0?-$floor(-e):$floor(e);if(o!==e){var c=String(o),d=$slice.call(t,c.length+1);return $replace.call(c,n,"$&_")+"."+$replace.call($replace.call(d,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $replace.call(t,n,"$&_")}var utilInspect=util_inspect,inspectCustom=utilInspect.custom,inspectSymbol=isSymbol(inspectCustom)?inspectCustom:null,objectInspect=function e(t,n,o,c){var d=n||{};if(has$3(d,"quoteStyle")&&d.quoteStyle!=="single"&&d.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has$3(d,"maxStringLength")&&(typeof d.maxStringLength=="number"?d.maxStringLength<0&&d.maxStringLength!==1/0:d.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var g=has$3(d,"customInspect")?d.customInspect:!0;if(typeof g!="boolean"&&g!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(has$3(d,"indent")&&d.indent!==null&&d.indent!=="	"&&!(parseInt(d.indent,10)===d.indent&&d.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(has$3(d,"numericSeparator")&&typeof d.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var r=d.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return inspectString(t,d);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var v=String(t);return r?addNumericSeparator(t,v):v}if(typeof t=="bigint"){var E=String(t)+"n";return r?addNumericSeparator(t,E):E}var w=typeof d.depth>"u"?5:d.depth;if(typeof o>"u"&&(o=0),o>=w&&w>0&&typeof t=="object")return isArray$3(t)?"[Array]":"[Object]";var T=getIndent(d,o);if(typeof c>"u")c=[];else if(indexOf(c,t)>=0)return"[Circular]";function S(ve,Pe,ct){if(Pe&&(c=$arrSlice.call(c),c.push(Pe)),ct){var ge={depth:d.depth};return has$3(d,"quoteStyle")&&(ge.quoteStyle=d.quoteStyle),e(ve,ge,o+1,c)}return e(ve,d,o+1,c)}if(typeof t=="function"&&!isRegExp$1(t)){var N=nameOf(t),L=arrObjKeys(t,S);return"[Function"+(N?": "+N:" (anonymous)")+"]"+(L.length>0?" { "+$join.call(L,", ")+" }":"")}if(isSymbol(t)){var P=hasShammedSymbols?$replace.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):symToString.call(t);return typeof t=="object"&&!hasShammedSymbols?markBoxed(P):P}if(isElement(t)){for(var O="<"+$toLowerCase.call(String(t.nodeName)),V=t.attributes||[],D=0;D<V.length;D++)O+=" "+V[D].name+"="+wrapQuotes(quote(V[D].value),"double",d);return O+=">",t.childNodes&&t.childNodes.length&&(O+="..."),O+="</"+$toLowerCase.call(String(t.nodeName))+">",O}if(isArray$3(t)){if(t.length===0)return"[]";var U=arrObjKeys(t,S);return T&&!singleLineValues(U)?"["+indentedJoin(U,T)+"]":"[ "+$join.call(U,", ")+" ]"}if(isError(t)){var W=arrObjKeys(t,S);return!("cause"in Error.prototype)&&"cause"in t&&!isEnumerable.call(t,"cause")?"{ ["+String(t)+"] "+$join.call($concat.call("[cause]: "+S(t.cause),W),", ")+" }":W.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+$join.call(W,", ")+" }"}if(typeof t=="object"&&g){if(inspectSymbol&&typeof t[inspectSymbol]=="function"&&utilInspect)return utilInspect(t,{depth:w-o});if(g!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(isMap(t)){var Z=[];return mapForEach.call(t,function(ve,Pe){Z.push(S(Pe,t,!0)+" => "+S(ve,t))}),collectionOf("Map",mapSize.call(t),Z,T)}if(isSet(t)){var re=[];return setForEach.call(t,function(ve){re.push(S(ve,t))}),collectionOf("Set",setSize.call(t),re,T)}if(isWeakMap(t))return weakCollectionOf("WeakMap");if(isWeakSet(t))return weakCollectionOf("WeakSet");if(isWeakRef(t))return weakCollectionOf("WeakRef");if(isNumber(t))return markBoxed(S(Number(t)));if(isBigInt(t))return markBoxed(S(bigIntValueOf.call(t)));if(isBoolean(t))return markBoxed(booleanValueOf.call(t));if(isString(t))return markBoxed(S(String(t)));if(!isDate(t)&&!isRegExp$1(t)){var ae=arrObjKeys(t,S),ce=gPO?gPO(t)===Object.prototype:t instanceof Object||t.constructor===Object,ne=t instanceof Object?"":"null prototype",le=!ce&&toStringTag&&Object(t)===t&&toStringTag in t?$slice.call(toStr(t),8,-1):ne?"Object":"",de=ce||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",ie=de+(le||ne?"["+$join.call($concat.call([],le||[],ne||[]),": ")+"] ":"");return ae.length===0?ie+"{}":T?ie+"{"+indentedJoin(ae,T)+"}":ie+"{ "+$join.call(ae,", ")+" }"}return String(t)};function wrapQuotes(e,t,n){var o=(n.quoteStyle||t)==="double"?'"':"'";return o+e+o}function quote(e){return $replace.call(String(e),/"/g,"&quot;")}function isArray$3(e){return toStr(e)==="[object Array]"&&(!toStringTag||!(typeof e=="object"&&toStringTag in e))}function isDate(e){return toStr(e)==="[object Date]"&&(!toStringTag||!(typeof e=="object"&&toStringTag in e))}function isRegExp$1(e){return toStr(e)==="[object RegExp]"&&(!toStringTag||!(typeof e=="object"&&toStringTag in e))}function isError(e){return toStr(e)==="[object Error]"&&(!toStringTag||!(typeof e=="object"&&toStringTag in e))}function isString(e){return toStr(e)==="[object String]"&&(!toStringTag||!(typeof e=="object"&&toStringTag in e))}function isNumber(e){return toStr(e)==="[object Number]"&&(!toStringTag||!(typeof e=="object"&&toStringTag in e))}function isBoolean(e){return toStr(e)==="[object Boolean]"&&(!toStringTag||!(typeof e=="object"&&toStringTag in e))}function isSymbol(e){if(hasShammedSymbols)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!symToString)return!1;try{return symToString.call(e),!0}catch{}return!1}function isBigInt(e){if(!e||typeof e!="object"||!bigIntValueOf)return!1;try{return bigIntValueOf.call(e),!0}catch{}return!1}var hasOwn=Object.prototype.hasOwnProperty||function(e){return e in this};function has$3(e,t){return hasOwn.call(e,t)}function toStr(e){return objectToString.call(e)}function nameOf(e){if(e.name)return e.name;var t=$match.call(functionToString.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function indexOf(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1}function isMap(e){if(!mapSize||!e||typeof e!="object")return!1;try{mapSize.call(e);try{setSize.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function isWeakMap(e){if(!weakMapHas||!e||typeof e!="object")return!1;try{weakMapHas.call(e,weakMapHas);try{weakSetHas.call(e,weakSetHas)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function isWeakRef(e){if(!weakRefDeref||!e||typeof e!="object")return!1;try{return weakRefDeref.call(e),!0}catch{}return!1}function isSet(e){if(!setSize||!e||typeof e!="object")return!1;try{setSize.call(e);try{mapSize.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function isWeakSet(e){if(!weakSetHas||!e||typeof e!="object")return!1;try{weakSetHas.call(e,weakSetHas);try{weakMapHas.call(e,weakMapHas)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function isElement(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function inspectString(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,o="... "+n+" more character"+(n>1?"s":"");return inspectString($slice.call(e,0,t.maxStringLength),t)+o}var c=$replace.call($replace.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,lowbyte);return wrapQuotes(c,"single",t)}function lowbyte(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+$toUpperCase.call(t.toString(16))}function markBoxed(e){return"Object("+e+")"}function weakCollectionOf(e){return e+" { ? }"}function collectionOf(e,t,n,o){var c=o?indentedJoin(n,o):$join.call(n,", ");return e+" ("+t+") {"+c+"}"}function singleLineValues(e){for(var t=0;t<e.length;t++)if(indexOf(e[t],`
`)>=0)return!1;return!0}function getIndent(e,t){var n;if(e.indent==="	")n="	";else if(typeof e.indent=="number"&&e.indent>0)n=$join.call(Array(e.indent+1)," ");else return null;return{base:n,prev:$join.call(Array(t+1),n)}}function indentedJoin(e,t){if(e.length===0)return"";var n=`
`+t.prev+t.base;return n+$join.call(e,","+n)+`
`+t.prev}function arrObjKeys(e,t){var n=isArray$3(e),o=[];if(n){o.length=e.length;for(var c=0;c<e.length;c++)o[c]=has$3(e,c)?t(e[c],e):""}var d=typeof gOPS=="function"?gOPS(e):[],g;if(hasShammedSymbols){g={};for(var r=0;r<d.length;r++)g["$"+d[r]]=d[r]}for(var v in e)!has$3(e,v)||n&&String(Number(v))===v&&v<e.length||hasShammedSymbols&&g["$"+v]instanceof Symbol||($test.call(/[^\w$]/,v)?o.push(t(v,e)+": "+t(e[v],e)):o.push(v+": "+t(e[v],e)));if(typeof gOPS=="function")for(var E=0;E<d.length;E++)isEnumerable.call(e,d[E])&&o.push("["+t(d[E])+"]: "+t(e[d[E]],e));return o}var GetIntrinsic=getIntrinsic,callBound=callBound$1,inspect=objectInspect,$TypeError=GetIntrinsic("%TypeError%"),$WeakMap=GetIntrinsic("%WeakMap%",!0),$Map=GetIntrinsic("%Map%",!0),$weakMapGet=callBound("WeakMap.prototype.get",!0),$weakMapSet=callBound("WeakMap.prototype.set",!0),$weakMapHas=callBound("WeakMap.prototype.has",!0),$mapGet=callBound("Map.prototype.get",!0),$mapSet=callBound("Map.prototype.set",!0),$mapHas=callBound("Map.prototype.has",!0),listGetNode=function(e,t){for(var n=e,o;(o=n.next)!==null;n=o)if(o.key===t)return n.next=o.next,o.next=e.next,e.next=o,o},listGet=function(e,t){var n=listGetNode(e,t);return n&&n.value},listSet=function(e,t,n){var o=listGetNode(e,t);o?o.value=n:e.next={key:t,next:e.next,value:n}},listHas=function(e,t){return!!listGetNode(e,t)},sideChannel=function(){var t,n,o,c={assert:function(d){if(!c.has(d))throw new $TypeError("Side channel does not contain "+inspect(d))},get:function(d){if($WeakMap&&d&&(typeof d=="object"||typeof d=="function")){if(t)return $weakMapGet(t,d)}else if($Map){if(n)return $mapGet(n,d)}else if(o)return listGet(o,d)},has:function(d){if($WeakMap&&d&&(typeof d=="object"||typeof d=="function")){if(t)return $weakMapHas(t,d)}else if($Map){if(n)return $mapHas(n,d)}else if(o)return listHas(o,d);return!1},set:function(d,g){$WeakMap&&d&&(typeof d=="object"||typeof d=="function")?(t||(t=new $WeakMap),$weakMapSet(t,d,g)):$Map?(n||(n=new $Map),$mapSet(n,d,g)):(o||(o={key:{},next:null}),listSet(o,d,g))}};return c},replace=String.prototype.replace,percentTwenties=/%20/g,Format={RFC1738:"RFC1738",RFC3986:"RFC3986"},formats$3={default:Format.RFC3986,formatters:{RFC1738:function(e){return replace.call(e,percentTwenties,"+")},RFC3986:function(e){return String(e)}},RFC1738:Format.RFC1738,RFC3986:Format.RFC3986},formats$2=formats$3,has$2=Object.prototype.hasOwnProperty,isArray$2=Array.isArray,hexTable=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),compactQueue=function(t){for(;t.length>1;){var n=t.pop(),o=n.obj[n.prop];if(isArray$2(o)){for(var c=[],d=0;d<o.length;++d)typeof o[d]<"u"&&c.push(o[d]);n.obj[n.prop]=c}}},arrayToObject=function(t,n){for(var o=n&&n.plainObjects?Object.create(null):{},c=0;c<t.length;++c)typeof t[c]<"u"&&(o[c]=t[c]);return o},merge=function e(t,n,o){if(!n)return t;if(typeof n!="object"){if(isArray$2(t))t.push(n);else if(t&&typeof t=="object")(o&&(o.plainObjects||o.allowPrototypes)||!has$2.call(Object.prototype,n))&&(t[n]=!0);else return[t,n];return t}if(!t||typeof t!="object")return[t].concat(n);var c=t;return isArray$2(t)&&!isArray$2(n)&&(c=arrayToObject(t,o)),isArray$2(t)&&isArray$2(n)?(n.forEach(function(d,g){if(has$2.call(t,g)){var r=t[g];r&&typeof r=="object"&&d&&typeof d=="object"?t[g]=e(r,d,o):t.push(d)}else t[g]=d}),t):Object.keys(n).reduce(function(d,g){var r=n[g];return has$2.call(d,g)?d[g]=e(d[g],r,o):d[g]=r,d},c)},assign=function(t,n){return Object.keys(n).reduce(function(o,c){return o[c]=n[c],o},t)},decode=function(e,t,n){var o=e.replace(/\+/g," ");if(n==="iso-8859-1")return o.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(o)}catch{return o}},encode=function(t,n,o,c,d){if(t.length===0)return t;var g=t;if(typeof t=="symbol"?g=Symbol.prototype.toString.call(t):typeof t!="string"&&(g=String(t)),o==="iso-8859-1")return escape(g).replace(/%u[0-9a-f]{4}/gi,function(w){return"%26%23"+parseInt(w.slice(2),16)+"%3B"});for(var r="",v=0;v<g.length;++v){var E=g.charCodeAt(v);if(E===45||E===46||E===95||E===126||E>=48&&E<=57||E>=65&&E<=90||E>=97&&E<=122||d===formats$2.RFC1738&&(E===40||E===41)){r+=g.charAt(v);continue}if(E<128){r=r+hexTable[E];continue}if(E<2048){r=r+(hexTable[192|E>>6]+hexTable[128|E&63]);continue}if(E<55296||E>=57344){r=r+(hexTable[224|E>>12]+hexTable[128|E>>6&63]+hexTable[128|E&63]);continue}v+=1,E=65536+((E&1023)<<10|g.charCodeAt(v)&1023),r+=hexTable[240|E>>18]+hexTable[128|E>>12&63]+hexTable[128|E>>6&63]+hexTable[128|E&63]}return r},compact=function(t){for(var n=[{obj:{o:t},prop:"o"}],o=[],c=0;c<n.length;++c)for(var d=n[c],g=d.obj[d.prop],r=Object.keys(g),v=0;v<r.length;++v){var E=r[v],w=g[E];typeof w=="object"&&w!==null&&o.indexOf(w)===-1&&(n.push({obj:g,prop:E}),o.push(w))}return compactQueue(n),t},isRegExp=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},isBuffer=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},combine=function(t,n){return[].concat(t,n)},maybeMap=function(t,n){if(isArray$2(t)){for(var o=[],c=0;c<t.length;c+=1)o.push(n(t[c]));return o}return n(t)},utils$4={arrayToObject,assign,combine,compact,decode,encode,isBuffer,isRegExp,maybeMap,merge},getSideChannel=sideChannel,utils$3=utils$4,formats$1=formats$3,has$1=Object.prototype.hasOwnProperty,arrayPrefixGenerators={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,n){return t+"["+n+"]"},repeat:function(t){return t}},isArray$1=Array.isArray,split=String.prototype.split,push=Array.prototype.push,pushToArray=function(e,t){push.apply(e,isArray$1(t)?t:[t])},toISO=Date.prototype.toISOString,defaultFormat=formats$1.default,defaults$1={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:utils$3.encode,encodeValuesOnly:!1,format:defaultFormat,formatter:formats$1.formatters[defaultFormat],indices:!1,serializeDate:function(t){return toISO.call(t)},skipNulls:!1,strictNullHandling:!1},isNonNullishPrimitive=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},sentinel={},stringify$1=function e(t,n,o,c,d,g,r,v,E,w,T,S,N,L,P,O){for(var V=t,D=O,U=0,W=!1;(D=D.get(sentinel))!==void 0&&!W;){var Z=D.get(t);if(U+=1,typeof Z<"u"){if(Z===U)throw new RangeError("Cyclic object value");W=!0}typeof D.get(sentinel)>"u"&&(U=0)}if(typeof v=="function"?V=v(n,V):V instanceof Date?V=T(V):o==="comma"&&isArray$1(V)&&(V=utils$3.maybeMap(V,function(Ze){return Ze instanceof Date?T(Ze):Ze})),V===null){if(d)return r&&!L?r(n,defaults$1.encoder,P,"key",S):n;V=""}if(isNonNullishPrimitive(V)||utils$3.isBuffer(V)){if(r){var re=L?n:r(n,defaults$1.encoder,P,"key",S);if(o==="comma"&&L){for(var ae=split.call(String(V),","),ce="",ne=0;ne<ae.length;++ne)ce+=(ne===0?"":",")+N(r(ae[ne],defaults$1.encoder,P,"value",S));return[N(re)+(c&&isArray$1(V)&&ae.length===1?"[]":"")+"="+ce]}return[N(re)+"="+N(r(V,defaults$1.encoder,P,"value",S))]}return[N(n)+"="+N(String(V))]}var le=[];if(typeof V>"u")return le;var de;if(o==="comma"&&isArray$1(V))de=[{value:V.length>0?V.join(",")||null:void 0}];else if(isArray$1(v))de=v;else{var ie=Object.keys(V);de=E?ie.sort(E):ie}for(var ve=c&&isArray$1(V)&&V.length===1?n+"[]":n,Pe=0;Pe<de.length;++Pe){var ct=de[Pe],ge=typeof ct=="object"&&typeof ct.value<"u"?ct.value:V[ct];if(!(g&&ge===null)){var Me=isArray$1(V)?typeof o=="function"?o(ve,ct):ve:ve+(w?"."+ct:"["+ct+"]");O.set(t,U);var Ue=getSideChannel();Ue.set(sentinel,O),pushToArray(le,e(ge,Me,o,c,d,g,r,v,E,w,T,S,N,L,P,Ue))}}return le},normalizeStringifyOptions=function(t){if(!t)return defaults$1;if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=t.charset||defaults$1.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var o=formats$1.default;if(typeof t.format<"u"){if(!has$1.call(formats$1.formatters,t.format))throw new TypeError("Unknown format option provided.");o=t.format}var c=formats$1.formatters[o],d=defaults$1.filter;return(typeof t.filter=="function"||isArray$1(t.filter))&&(d=t.filter),{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:defaults$1.addQueryPrefix,allowDots:typeof t.allowDots>"u"?defaults$1.allowDots:!!t.allowDots,charset:n,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:defaults$1.charsetSentinel,delimiter:typeof t.delimiter>"u"?defaults$1.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:defaults$1.encode,encoder:typeof t.encoder=="function"?t.encoder:defaults$1.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:defaults$1.encodeValuesOnly,filter:d,format:o,formatter:c,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:defaults$1.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:defaults$1.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:defaults$1.strictNullHandling}},stringify_1=function(e,t){var n=e,o=normalizeStringifyOptions(t),c,d;typeof o.filter=="function"?(d=o.filter,n=d("",n)):isArray$1(o.filter)&&(d=o.filter,c=d);var g=[];if(typeof n!="object"||n===null)return"";var r;t&&t.arrayFormat in arrayPrefixGenerators?r=t.arrayFormat:t&&"indices"in t?r=t.indices?"indices":"repeat":r="indices";var v=arrayPrefixGenerators[r];if(t&&"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var E=v==="comma"&&t&&t.commaRoundTrip;c||(c=Object.keys(n)),o.sort&&c.sort(o.sort);for(var w=getSideChannel(),T=0;T<c.length;++T){var S=c[T];o.skipNulls&&n[S]===null||pushToArray(g,stringify$1(n[S],S,v,E,o.strictNullHandling,o.skipNulls,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.format,o.formatter,o.encodeValuesOnly,o.charset,w))}var N=g.join(o.delimiter),L=o.addQueryPrefix===!0?"?":"";return o.charsetSentinel&&(o.charset==="iso-8859-1"?L+="utf8=%26%2310003%3B&":L+="utf8=%E2%9C%93&"),N.length>0?L+N:""},utils$2=utils$4,has=Object.prototype.hasOwnProperty,isArray=Array.isArray,defaults={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:utils$2.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},interpretNumericEntities=function(e){return e.replace(/&#(\d+);/g,function(t,n){return String.fromCharCode(parseInt(n,10))})},parseArrayValue=function(e,t){return e&&typeof e=="string"&&t.comma&&e.indexOf(",")>-1?e.split(","):e},isoSentinel="utf8=%26%2310003%3B",charsetSentinel="utf8=%E2%9C%93",parseValues=function(t,n){var o={},c=n.ignoreQueryPrefix?t.replace(/^\?/,""):t,d=n.parameterLimit===1/0?void 0:n.parameterLimit,g=c.split(n.delimiter,d),r=-1,v,E=n.charset;if(n.charsetSentinel)for(v=0;v<g.length;++v)g[v].indexOf("utf8=")===0&&(g[v]===charsetSentinel?E="utf-8":g[v]===isoSentinel&&(E="iso-8859-1"),r=v,v=g.length);for(v=0;v<g.length;++v)if(v!==r){var w=g[v],T=w.indexOf("]="),S=T===-1?w.indexOf("="):T+1,N,L;S===-1?(N=n.decoder(w,defaults.decoder,E,"key"),L=n.strictNullHandling?null:""):(N=n.decoder(w.slice(0,S),defaults.decoder,E,"key"),L=utils$2.maybeMap(parseArrayValue(w.slice(S+1),n),function(P){return n.decoder(P,defaults.decoder,E,"value")})),L&&n.interpretNumericEntities&&E==="iso-8859-1"&&(L=interpretNumericEntities(L)),w.indexOf("[]=")>-1&&(L=isArray(L)?[L]:L),has.call(o,N)?o[N]=utils$2.combine(o[N],L):o[N]=L}return o},parseObject=function(e,t,n,o){for(var c=o?t:parseArrayValue(t,n),d=e.length-1;d>=0;--d){var g,r=e[d];if(r==="[]"&&n.parseArrays)g=[].concat(c);else{g=n.plainObjects?Object.create(null):{};var v=r.charAt(0)==="["&&r.charAt(r.length-1)==="]"?r.slice(1,-1):r,E=parseInt(v,10);!n.parseArrays&&v===""?g={0:c}:!isNaN(E)&&r!==v&&String(E)===v&&E>=0&&n.parseArrays&&E<=n.arrayLimit?(g=[],g[E]=c):v!=="__proto__"&&(g[v]=c)}c=g}return c},parseKeys=function(t,n,o,c){if(!!t){var d=o.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,g=/(\[[^[\]]*])/,r=/(\[[^[\]]*])/g,v=o.depth>0&&g.exec(d),E=v?d.slice(0,v.index):d,w=[];if(E){if(!o.plainObjects&&has.call(Object.prototype,E)&&!o.allowPrototypes)return;w.push(E)}for(var T=0;o.depth>0&&(v=r.exec(d))!==null&&T<o.depth;){if(T+=1,!o.plainObjects&&has.call(Object.prototype,v[1].slice(1,-1))&&!o.allowPrototypes)return;w.push(v[1])}return v&&w.push("["+d.slice(v.index)+"]"),parseObject(w,n,o,c)}},normalizeParseOptions=function(t){if(!t)return defaults;if(t.decoder!==null&&t.decoder!==void 0&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=typeof t.charset>"u"?defaults.charset:t.charset;return{allowDots:typeof t.allowDots>"u"?defaults.allowDots:!!t.allowDots,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:defaults.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:defaults.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:defaults.arrayLimit,charset:n,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:defaults.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:defaults.comma,decoder:typeof t.decoder=="function"?t.decoder:defaults.decoder,delimiter:typeof t.delimiter=="string"||utils$2.isRegExp(t.delimiter)?t.delimiter:defaults.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:defaults.depth,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:defaults.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:defaults.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:defaults.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:defaults.strictNullHandling}},parse$2=function(e,t){var n=normalizeParseOptions(t);if(e===""||e===null||typeof e>"u")return n.plainObjects?Object.create(null):{};for(var o=typeof e=="string"?parseValues(e,n):e,c=n.plainObjects?Object.create(null):{},d=Object.keys(o),g=0;g<d.length;++g){var r=d[g],v=parseKeys(r,o[r],n,typeof e=="string");c=utils$2.merge(c,v,n)}return n.allowSparse===!0?c:utils$2.compact(c)},stringify=stringify_1,parse$1=parse$2,formats=formats$3,lib$1={formats,parse:parse$1,stringify},lib={exports:{}},server={},canPromise$1=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},qrcode={},utils$1={};let toSJISFunction;const CODEWORDS_COUNT=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];utils$1.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};utils$1.getSymbolTotalCodewords=function(t){return CODEWORDS_COUNT[t]};utils$1.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};utils$1.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');toSJISFunction=t};utils$1.isKanjiModeEnabled=function(){return typeof toSJISFunction<"u"};utils$1.toSJIS=function(t){return toSJISFunction(t)};var errorCorrectionLevel={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+n)}}e.isValid=function(o){return o&&typeof o.bit<"u"&&o.bit>=0&&o.bit<4},e.from=function(o,c){if(e.isValid(o))return o;try{return t(o)}catch{return c}}})(errorCorrectionLevel);function BitBuffer$1(){this.buffer=[],this.length=0}BitBuffer$1.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var bitBuffer=BitBuffer$1;function BitMatrix$1(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}BitMatrix$1.prototype.set=function(e,t,n,o){const c=e*this.size+t;this.data[c]=n,o&&(this.reservedBit[c]=!0)};BitMatrix$1.prototype.get=function(e,t){return this.data[e*this.size+t]};BitMatrix$1.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n};BitMatrix$1.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var bitMatrix=BitMatrix$1,alignmentPattern={};(function(e){const t=utils$1.getSymbolSize;e.getRowColCoords=function(o){if(o===1)return[];const c=Math.floor(o/7)+2,d=t(o),g=d===145?26:Math.ceil((d-13)/(2*c-2))*2,r=[d-7];for(let v=1;v<c-1;v++)r[v]=r[v-1]-g;return r.push(6),r.reverse()},e.getPositions=function(o){const c=[],d=e.getRowColCoords(o),g=d.length;for(let r=0;r<g;r++)for(let v=0;v<g;v++)r===0&&v===0||r===0&&v===g-1||r===g-1&&v===0||c.push([d[r],d[v]]);return c}})(alignmentPattern);var finderPattern={};const getSymbolSize=utils$1.getSymbolSize,FINDER_PATTERN_SIZE=7;finderPattern.getPositions=function(t){const n=getSymbolSize(t);return[[0,0],[n-FINDER_PATTERN_SIZE,0],[0,n-FINDER_PATTERN_SIZE]]};var maskPattern={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(c){return c!=null&&c!==""&&!isNaN(c)&&c>=0&&c<=7},e.from=function(c){return e.isValid(c)?parseInt(c,10):void 0},e.getPenaltyN1=function(c){const d=c.size;let g=0,r=0,v=0,E=null,w=null;for(let T=0;T<d;T++){r=v=0,E=w=null;for(let S=0;S<d;S++){let N=c.get(T,S);N===E?r++:(r>=5&&(g+=t.N1+(r-5)),E=N,r=1),N=c.get(S,T),N===w?v++:(v>=5&&(g+=t.N1+(v-5)),w=N,v=1)}r>=5&&(g+=t.N1+(r-5)),v>=5&&(g+=t.N1+(v-5))}return g},e.getPenaltyN2=function(c){const d=c.size;let g=0;for(let r=0;r<d-1;r++)for(let v=0;v<d-1;v++){const E=c.get(r,v)+c.get(r,v+1)+c.get(r+1,v)+c.get(r+1,v+1);(E===4||E===0)&&g++}return g*t.N2},e.getPenaltyN3=function(c){const d=c.size;let g=0,r=0,v=0;for(let E=0;E<d;E++){r=v=0;for(let w=0;w<d;w++)r=r<<1&2047|c.get(E,w),w>=10&&(r===1488||r===93)&&g++,v=v<<1&2047|c.get(w,E),w>=10&&(v===1488||v===93)&&g++}return g*t.N3},e.getPenaltyN4=function(c){let d=0;const g=c.data.length;for(let v=0;v<g;v++)d+=c.data[v];return Math.abs(Math.ceil(d*100/g/5)-10)*t.N4};function n(o,c,d){switch(o){case e.Patterns.PATTERN000:return(c+d)%2===0;case e.Patterns.PATTERN001:return c%2===0;case e.Patterns.PATTERN010:return d%3===0;case e.Patterns.PATTERN011:return(c+d)%3===0;case e.Patterns.PATTERN100:return(Math.floor(c/2)+Math.floor(d/3))%2===0;case e.Patterns.PATTERN101:return c*d%2+c*d%3===0;case e.Patterns.PATTERN110:return(c*d%2+c*d%3)%2===0;case e.Patterns.PATTERN111:return(c*d%3+(c+d)%2)%2===0;default:throw new Error("bad maskPattern:"+o)}}e.applyMask=function(c,d){const g=d.size;for(let r=0;r<g;r++)for(let v=0;v<g;v++)d.isReserved(v,r)||d.xor(v,r,n(c,v,r))},e.getBestMask=function(c,d){const g=Object.keys(e.Patterns).length;let r=0,v=1/0;for(let E=0;E<g;E++){d(E),e.applyMask(E,c);const w=e.getPenaltyN1(c)+e.getPenaltyN2(c)+e.getPenaltyN3(c)+e.getPenaltyN4(c);e.applyMask(E,c),w<v&&(v=w,r=E)}return r}})(maskPattern);var errorCorrectionCode={};const ECLevel$1=errorCorrectionLevel,EC_BLOCKS_TABLE=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],EC_CODEWORDS_TABLE=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];errorCorrectionCode.getBlocksCount=function(t,n){switch(n){case ECLevel$1.L:return EC_BLOCKS_TABLE[(t-1)*4+0];case ECLevel$1.M:return EC_BLOCKS_TABLE[(t-1)*4+1];case ECLevel$1.Q:return EC_BLOCKS_TABLE[(t-1)*4+2];case ECLevel$1.H:return EC_BLOCKS_TABLE[(t-1)*4+3];default:return}};errorCorrectionCode.getTotalCodewordsCount=function(t,n){switch(n){case ECLevel$1.L:return EC_CODEWORDS_TABLE[(t-1)*4+0];case ECLevel$1.M:return EC_CODEWORDS_TABLE[(t-1)*4+1];case ECLevel$1.Q:return EC_CODEWORDS_TABLE[(t-1)*4+2];case ECLevel$1.H:return EC_CODEWORDS_TABLE[(t-1)*4+3];default:return}};var polynomial={},galoisField={};const EXP_TABLE=new Uint8Array(512),LOG_TABLE=new Uint8Array(256);(function(){let t=1;for(let n=0;n<255;n++)EXP_TABLE[n]=t,LOG_TABLE[t]=n,t<<=1,t&256&&(t^=285);for(let n=255;n<512;n++)EXP_TABLE[n]=EXP_TABLE[n-255]})();galoisField.log=function(t){if(t<1)throw new Error("log("+t+")");return LOG_TABLE[t]};galoisField.exp=function(t){return EXP_TABLE[t]};galoisField.mul=function(t,n){return t===0||n===0?0:EXP_TABLE[LOG_TABLE[t]+LOG_TABLE[n]]};(function(e){const t=galoisField;e.mul=function(o,c){const d=new Uint8Array(o.length+c.length-1);for(let g=0;g<o.length;g++)for(let r=0;r<c.length;r++)d[g+r]^=t.mul(o[g],c[r]);return d},e.mod=function(o,c){let d=new Uint8Array(o);for(;d.length-c.length>=0;){const g=d[0];for(let v=0;v<c.length;v++)d[v]^=t.mul(c[v],g);let r=0;for(;r<d.length&&d[r]===0;)r++;d=d.slice(r)}return d},e.generateECPolynomial=function(o){let c=new Uint8Array([1]);for(let d=0;d<o;d++)c=e.mul(c,new Uint8Array([1,t.exp(d)]));return c}})(polynomial);const Polynomial=polynomial;function ReedSolomonEncoder$1(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}ReedSolomonEncoder$1.prototype.initialize=function(t){this.degree=t,this.genPoly=Polynomial.generateECPolynomial(this.degree)};ReedSolomonEncoder$1.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(t.length+this.degree);n.set(t);const o=Polynomial.mod(n,this.genPoly),c=this.degree-o.length;if(c>0){const d=new Uint8Array(this.degree);return d.set(o,c),d}return o};var reedSolomonEncoder=ReedSolomonEncoder$1,version={},mode={},versionCheck={};versionCheck.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var regex={};const numeric="[0-9]+",alphanumeric="[A-Z $%*+\\-./:]+";let kanji="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";kanji=kanji.replace(/u/g,"\\u");const byte="(?:(?![A-Z0-9 $%*+\\-./:]|"+kanji+`)(?:.|[\r
]))+`;regex.KANJI=new RegExp(kanji,"g");regex.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");regex.BYTE=new RegExp(byte,"g");regex.NUMERIC=new RegExp(numeric,"g");regex.ALPHANUMERIC=new RegExp(alphanumeric,"g");const TEST_KANJI=new RegExp("^"+kanji+"$"),TEST_NUMERIC=new RegExp("^"+numeric+"$"),TEST_ALPHANUMERIC=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");regex.testKanji=function(t){return TEST_KANJI.test(t)};regex.testNumeric=function(t){return TEST_NUMERIC.test(t)};regex.testAlphanumeric=function(t){return TEST_ALPHANUMERIC.test(t)};(function(e){const t=versionCheck,n=regex;e.NUMERIC={id:"Numeric",bit:1<<0,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:1<<1,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:1<<2,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:1<<3,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(d,g){if(!d.ccBits)throw new Error("Invalid mode: "+d);if(!t.isValid(g))throw new Error("Invalid version: "+g);return g>=1&&g<10?d.ccBits[0]:g<27?d.ccBits[1]:d.ccBits[2]},e.getBestModeForData=function(d){return n.testNumeric(d)?e.NUMERIC:n.testAlphanumeric(d)?e.ALPHANUMERIC:n.testKanji(d)?e.KANJI:e.BYTE},e.toString=function(d){if(d&&d.id)return d.id;throw new Error("Invalid mode")},e.isValid=function(d){return d&&d.bit&&d.ccBits};function o(c){if(typeof c!="string")throw new Error("Param is not a string");switch(c.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+c)}}e.from=function(d,g){if(e.isValid(d))return d;try{return o(d)}catch{return g}}})(mode);(function(e){const t=utils$1,n=errorCorrectionCode,o=errorCorrectionLevel,c=mode,d=versionCheck,g=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,r=t.getBCHDigit(g);function v(S,N,L){for(let P=1;P<=40;P++)if(N<=e.getCapacity(P,L,S))return P}function E(S,N){return c.getCharCountIndicator(S,N)+4}function w(S,N){let L=0;return S.forEach(function(P){L+=E(P.mode,N)+P.getBitsLength()}),L}function T(S,N){for(let L=1;L<=40;L++)if(w(S,L)<=e.getCapacity(L,N,c.MIXED))return L}e.from=function(N,L){return d.isValid(N)?parseInt(N,10):L},e.getCapacity=function(N,L,P){if(!d.isValid(N))throw new Error("Invalid QR Code version");typeof P>"u"&&(P=c.BYTE);const O=t.getSymbolTotalCodewords(N),V=n.getTotalCodewordsCount(N,L),D=(O-V)*8;if(P===c.MIXED)return D;const U=D-E(P,N);switch(P){case c.NUMERIC:return Math.floor(U/10*3);case c.ALPHANUMERIC:return Math.floor(U/11*2);case c.KANJI:return Math.floor(U/13);case c.BYTE:default:return Math.floor(U/8)}},e.getBestVersionForData=function(N,L){let P;const O=o.from(L,o.M);if(Array.isArray(N)){if(N.length>1)return T(N,O);if(N.length===0)return 1;P=N[0]}else P=N;return v(P.mode,P.getLength(),O)},e.getEncodedBits=function(N){if(!d.isValid(N)||N<7)throw new Error("Invalid QR Code version");let L=N<<12;for(;t.getBCHDigit(L)-r>=0;)L^=g<<t.getBCHDigit(L)-r;return N<<12|L}})(version);var formatInfo={};const Utils$3=utils$1,G15=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,G15_MASK=1<<14|1<<12|1<<10|1<<4|1<<1,G15_BCH=Utils$3.getBCHDigit(G15);formatInfo.getEncodedBits=function(t,n){const o=t.bit<<3|n;let c=o<<10;for(;Utils$3.getBCHDigit(c)-G15_BCH>=0;)c^=G15<<Utils$3.getBCHDigit(c)-G15_BCH;return(o<<10|c)^G15_MASK};var segments={};const Mode$4=mode;function NumericData(e){this.mode=Mode$4.NUMERIC,this.data=e.toString()}NumericData.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};NumericData.prototype.getLength=function(){return this.data.length};NumericData.prototype.getBitsLength=function(){return NumericData.getBitsLength(this.data.length)};NumericData.prototype.write=function(t){let n,o,c;for(n=0;n+3<=this.data.length;n+=3)o=this.data.substr(n,3),c=parseInt(o,10),t.put(c,10);const d=this.data.length-n;d>0&&(o=this.data.substr(n),c=parseInt(o,10),t.put(c,d*3+1))};var numericData=NumericData;const Mode$3=mode,ALPHA_NUM_CHARS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function AlphanumericData(e){this.mode=Mode$3.ALPHANUMERIC,this.data=e}AlphanumericData.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};AlphanumericData.prototype.getLength=function(){return this.data.length};AlphanumericData.prototype.getBitsLength=function(){return AlphanumericData.getBitsLength(this.data.length)};AlphanumericData.prototype.write=function(t){let n;for(n=0;n+2<=this.data.length;n+=2){let o=ALPHA_NUM_CHARS.indexOf(this.data[n])*45;o+=ALPHA_NUM_CHARS.indexOf(this.data[n+1]),t.put(o,11)}this.data.length%2&&t.put(ALPHA_NUM_CHARS.indexOf(this.data[n]),6)};var alphanumericData=AlphanumericData,encodeUtf8$1=function(t){for(var n=[],o=t.length,c=0;c<o;c++){var d=t.charCodeAt(c);if(d>=55296&&d<=56319&&o>c+1){var g=t.charCodeAt(c+1);g>=56320&&g<=57343&&(d=(d-55296)*1024+g-56320+65536,c+=1)}if(d<128){n.push(d);continue}if(d<2048){n.push(d>>6|192),n.push(d&63|128);continue}if(d<55296||d>=57344&&d<65536){n.push(d>>12|224),n.push(d>>6&63|128),n.push(d&63|128);continue}if(d>=65536&&d<=1114111){n.push(d>>18|240),n.push(d>>12&63|128),n.push(d>>6&63|128),n.push(d&63|128);continue}n.push(239,191,189)}return new Uint8Array(n).buffer};const encodeUtf8=encodeUtf8$1,Mode$2=mode;function ByteData(e){this.mode=Mode$2.BYTE,typeof e=="string"&&(e=encodeUtf8(e)),this.data=new Uint8Array(e)}ByteData.getBitsLength=function(t){return t*8};ByteData.prototype.getLength=function(){return this.data.length};ByteData.prototype.getBitsLength=function(){return ByteData.getBitsLength(this.data.length)};ByteData.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)};var byteData=ByteData;const Mode$1=mode,Utils$2=utils$1;function KanjiData(e){this.mode=Mode$1.KANJI,this.data=e}KanjiData.getBitsLength=function(t){return t*13};KanjiData.prototype.getLength=function(){return this.data.length};KanjiData.prototype.getBitsLength=function(){return KanjiData.getBitsLength(this.data.length)};KanjiData.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=Utils$2.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),e.put(n,13)}};var kanjiData=KanjiData,dijkstra={exports:{}};(function(e){var t={single_source_shortest_paths:function(n,o,c){var d={},g={};g[o]=0;var r=t.PriorityQueue.make();r.push(o,0);for(var v,E,w,T,S,N,L,P,O;!r.empty();){v=r.pop(),E=v.value,T=v.cost,S=n[E]||{};for(w in S)S.hasOwnProperty(w)&&(N=S[w],L=T+N,P=g[w],O=typeof g[w]>"u",(O||P>L)&&(g[w]=L,r.push(w,L),d[w]=E))}if(typeof c<"u"&&typeof g[c]>"u"){var V=["Could not find a path from ",o," to ",c,"."].join("");throw new Error(V)}return d},extract_shortest_path_from_predecessor_list:function(n,o){for(var c=[],d=o;d;)c.push(d),n[d],d=n[d];return c.reverse(),c},find_path:function(n,o,c){var d=t.single_source_shortest_paths(n,o,c);return t.extract_shortest_path_from_predecessor_list(d,c)},PriorityQueue:{make:function(n){var o=t.PriorityQueue,c={},d;n=n||{};for(d in o)o.hasOwnProperty(d)&&(c[d]=o[d]);return c.queue=[],c.sorter=n.sorter||o.default_sorter,c},default_sorter:function(n,o){return n.cost-o.cost},push:function(n,o){var c={value:n,cost:o};this.queue.push(c),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(dijkstra);(function(e){const t=mode,n=numericData,o=alphanumericData,c=byteData,d=kanjiData,g=regex,r=utils$1,v=dijkstra.exports;function E(V){return unescape(encodeURIComponent(V)).length}function w(V,D,U){const W=[];let Z;for(;(Z=V.exec(U))!==null;)W.push({data:Z[0],index:Z.index,mode:D,length:Z[0].length});return W}function T(V){const D=w(g.NUMERIC,t.NUMERIC,V),U=w(g.ALPHANUMERIC,t.ALPHANUMERIC,V);let W,Z;return r.isKanjiModeEnabled()?(W=w(g.BYTE,t.BYTE,V),Z=w(g.KANJI,t.KANJI,V)):(W=w(g.BYTE_KANJI,t.BYTE,V),Z=[]),D.concat(U,W,Z).sort(function(ae,ce){return ae.index-ce.index}).map(function(ae){return{data:ae.data,mode:ae.mode,length:ae.length}})}function S(V,D){switch(D){case t.NUMERIC:return n.getBitsLength(V);case t.ALPHANUMERIC:return o.getBitsLength(V);case t.KANJI:return d.getBitsLength(V);case t.BYTE:return c.getBitsLength(V)}}function N(V){return V.reduce(function(D,U){const W=D.length-1>=0?D[D.length-1]:null;return W&&W.mode===U.mode?(D[D.length-1].data+=U.data,D):(D.push(U),D)},[])}function L(V){const D=[];for(let U=0;U<V.length;U++){const W=V[U];switch(W.mode){case t.NUMERIC:D.push([W,{data:W.data,mode:t.ALPHANUMERIC,length:W.length},{data:W.data,mode:t.BYTE,length:W.length}]);break;case t.ALPHANUMERIC:D.push([W,{data:W.data,mode:t.BYTE,length:W.length}]);break;case t.KANJI:D.push([W,{data:W.data,mode:t.BYTE,length:E(W.data)}]);break;case t.BYTE:D.push([{data:W.data,mode:t.BYTE,length:E(W.data)}])}}return D}function P(V,D){const U={},W={start:{}};let Z=["start"];for(let re=0;re<V.length;re++){const ae=V[re],ce=[];for(let ne=0;ne<ae.length;ne++){const le=ae[ne],de=""+re+ne;ce.push(de),U[de]={node:le,lastCount:0},W[de]={};for(let ie=0;ie<Z.length;ie++){const ve=Z[ie];U[ve]&&U[ve].node.mode===le.mode?(W[ve][de]=S(U[ve].lastCount+le.length,le.mode)-S(U[ve].lastCount,le.mode),U[ve].lastCount+=le.length):(U[ve]&&(U[ve].lastCount=le.length),W[ve][de]=S(le.length,le.mode)+4+t.getCharCountIndicator(le.mode,D))}}Z=ce}for(let re=0;re<Z.length;re++)W[Z[re]].end=0;return{map:W,table:U}}function O(V,D){let U;const W=t.getBestModeForData(V);if(U=t.from(D,W),U!==t.BYTE&&U.bit<W.bit)throw new Error('"'+V+'" cannot be encoded with mode '+t.toString(U)+`.
 Suggested mode is: `+t.toString(W));switch(U===t.KANJI&&!r.isKanjiModeEnabled()&&(U=t.BYTE),U){case t.NUMERIC:return new n(V);case t.ALPHANUMERIC:return new o(V);case t.KANJI:return new d(V);case t.BYTE:return new c(V)}}e.fromArray=function(D){return D.reduce(function(U,W){return typeof W=="string"?U.push(O(W,null)):W.data&&U.push(O(W.data,W.mode)),U},[])},e.fromString=function(D,U){const W=T(D,r.isKanjiModeEnabled()),Z=L(W),re=P(Z,U),ae=v.find_path(re.map,"start","end"),ce=[];for(let ne=1;ne<ae.length-1;ne++)ce.push(re.table[ae[ne]].node);return e.fromArray(N(ce))},e.rawSplit=function(D){return e.fromArray(T(D,r.isKanjiModeEnabled()))}})(segments);const Utils$1=utils$1,ECLevel=errorCorrectionLevel,BitBuffer=bitBuffer,BitMatrix=bitMatrix,AlignmentPattern=alignmentPattern,FinderPattern=finderPattern,MaskPattern=maskPattern,ECCode=errorCorrectionCode,ReedSolomonEncoder=reedSolomonEncoder,Version=version,FormatInfo=formatInfo,Mode=mode,Segments=segments;function setupFinderPattern(e,t){const n=e.size,o=FinderPattern.getPositions(t);for(let c=0;c<o.length;c++){const d=o[c][0],g=o[c][1];for(let r=-1;r<=7;r++)if(!(d+r<=-1||n<=d+r))for(let v=-1;v<=7;v++)g+v<=-1||n<=g+v||(r>=0&&r<=6&&(v===0||v===6)||v>=0&&v<=6&&(r===0||r===6)||r>=2&&r<=4&&v>=2&&v<=4?e.set(d+r,g+v,!0,!0):e.set(d+r,g+v,!1,!0))}}function setupTimingPattern(e){const t=e.size;for(let n=8;n<t-8;n++){const o=n%2===0;e.set(n,6,o,!0),e.set(6,n,o,!0)}}function setupAlignmentPattern(e,t){const n=AlignmentPattern.getPositions(t);for(let o=0;o<n.length;o++){const c=n[o][0],d=n[o][1];for(let g=-2;g<=2;g++)for(let r=-2;r<=2;r++)g===-2||g===2||r===-2||r===2||g===0&&r===0?e.set(c+g,d+r,!0,!0):e.set(c+g,d+r,!1,!0)}}function setupVersionInfo(e,t){const n=e.size,o=Version.getEncodedBits(t);let c,d,g;for(let r=0;r<18;r++)c=Math.floor(r/3),d=r%3+n-8-3,g=(o>>r&1)===1,e.set(c,d,g,!0),e.set(d,c,g,!0)}function setupFormatInfo(e,t,n){const o=e.size,c=FormatInfo.getEncodedBits(t,n);let d,g;for(d=0;d<15;d++)g=(c>>d&1)===1,d<6?e.set(d,8,g,!0):d<8?e.set(d+1,8,g,!0):e.set(o-15+d,8,g,!0),d<8?e.set(8,o-d-1,g,!0):d<9?e.set(8,15-d-1+1,g,!0):e.set(8,15-d-1,g,!0);e.set(o-8,8,1,!0)}function setupData(e,t){const n=e.size;let o=-1,c=n-1,d=7,g=0;for(let r=n-1;r>0;r-=2)for(r===6&&r--;;){for(let v=0;v<2;v++)if(!e.isReserved(c,r-v)){let E=!1;g<t.length&&(E=(t[g]>>>d&1)===1),e.set(c,r-v,E),d--,d===-1&&(g++,d=7)}if(c+=o,c<0||n<=c){c-=o,o=-o;break}}}function createData(e,t,n){const o=new BitBuffer;n.forEach(function(v){o.put(v.mode.bit,4),o.put(v.getLength(),Mode.getCharCountIndicator(v.mode,e)),v.write(o)});const c=Utils$1.getSymbolTotalCodewords(e),d=ECCode.getTotalCodewordsCount(e,t),g=(c-d)*8;for(o.getLengthInBits()+4<=g&&o.put(0,4);o.getLengthInBits()%8!==0;)o.putBit(0);const r=(g-o.getLengthInBits())/8;for(let v=0;v<r;v++)o.put(v%2?17:236,8);return createCodewords(o,e,t)}function createCodewords(e,t,n){const o=Utils$1.getSymbolTotalCodewords(t),c=ECCode.getTotalCodewordsCount(t,n),d=o-c,g=ECCode.getBlocksCount(t,n),r=o%g,v=g-r,E=Math.floor(o/g),w=Math.floor(d/g),T=w+1,S=E-w,N=new ReedSolomonEncoder(S);let L=0;const P=new Array(g),O=new Array(g);let V=0;const D=new Uint8Array(e.buffer);for(let ae=0;ae<g;ae++){const ce=ae<v?w:T;P[ae]=D.slice(L,L+ce),O[ae]=N.encode(P[ae]),L+=ce,V=Math.max(V,ce)}const U=new Uint8Array(o);let W=0,Z,re;for(Z=0;Z<V;Z++)for(re=0;re<g;re++)Z<P[re].length&&(U[W++]=P[re][Z]);for(Z=0;Z<S;Z++)for(re=0;re<g;re++)U[W++]=O[re][Z];return U}function createSymbol(e,t,n,o){let c;if(Array.isArray(e))c=Segments.fromArray(e);else if(typeof e=="string"){let E=t;if(!E){const w=Segments.rawSplit(e);E=Version.getBestVersionForData(w,n)}c=Segments.fromString(e,E||40)}else throw new Error("Invalid data");const d=Version.getBestVersionForData(c,n);if(!d)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=d;else if(t<d)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+d+`.
`);const g=createData(t,n,c),r=Utils$1.getSymbolSize(t),v=new BitMatrix(r);return setupFinderPattern(v,t),setupTimingPattern(v),setupAlignmentPattern(v,t),setupFormatInfo(v,n,0),t>=7&&setupVersionInfo(v,t),setupData(v,g),isNaN(o)&&(o=MaskPattern.getBestMask(v,setupFormatInfo.bind(null,v,n))),MaskPattern.applyMask(o,v),setupFormatInfo(v,n,o),{modules:v,version:t,errorCorrectionLevel:n,maskPattern:o,segments:c}}qrcode.create=function(t,n){if(typeof t>"u"||t==="")throw new Error("No input text");let o=ECLevel.M,c,d;return typeof n<"u"&&(o=ECLevel.from(n.errorCorrectionLevel,ECLevel.M),c=Version.from(n.version),d=MaskPattern.from(n.maskPattern),n.toSJISFunc&&Utils$1.setToSJISFunction(n.toSJISFunc)),createSymbol(t,c,o,d)};var png$1={},png={},parserAsync={exports:{}},chunkstream={exports:{}};let util$4=require$$0__default$2.default,Stream$2=require$$1__default$1.default,ChunkStream$2=chunkstream.exports=function(){Stream$2.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};util$4.inherits(ChunkStream$2,Stream$2);ChunkStream$2.prototype.read=function(e,t){this._reads.push({length:Math.abs(e),allowLess:e<0,func:t}),process.nextTick(function(){this._process(),this._paused&&this._reads&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}.bind(this))};ChunkStream$2.prototype.write=function(e,t){if(!this.writable)return this.emit("error",new Error("Stream not writable")),!1;let n;return Buffer.isBuffer(e)?n=e:n=Buffer.from(e,t||this._encoding),this._buffers.push(n),this._buffered+=n.length,this._process(),this._reads&&this._reads.length===0&&(this._paused=!0),this.writable&&!this._paused};ChunkStream$2.prototype.end=function(e,t){e&&this.write(e,t),this.writable=!1,this._buffers&&(this._buffers.length===0?this._end():(this._buffers.push(null),this._process()))};ChunkStream$2.prototype.destroySoon=ChunkStream$2.prototype.end;ChunkStream$2.prototype._end=function(){this._reads.length>0&&this.emit("error",new Error("Unexpected end of input")),this.destroy()};ChunkStream$2.prototype.destroy=function(){!this._buffers||(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))};ChunkStream$2.prototype._processReadAllowingLess=function(e){this._reads.shift();let t=this._buffers[0];t.length>e.length?(this._buffered-=e.length,this._buffers[0]=t.slice(e.length),e.func.call(this,t.slice(0,e.length))):(this._buffered-=t.length,this._buffers.shift(),e.func.call(this,t))};ChunkStream$2.prototype._processRead=function(e){this._reads.shift();let t=0,n=0,o=Buffer.alloc(e.length);for(;t<e.length;){let c=this._buffers[n++],d=Math.min(c.length,e.length-t);c.copy(o,t,0,d),t+=d,d!==c.length&&(this._buffers[--n]=c.slice(d))}n>0&&this._buffers.splice(0,n),this._buffered-=e.length,e.func.call(this,o)};ChunkStream$2.prototype._process=function(){try{for(;this._buffered>0&&this._reads&&this._reads.length>0;){let e=this._reads[0];if(e.allowLess)this._processReadAllowingLess(e);else if(this._buffered>=e.length)this._processRead(e);else break}this._buffers&&!this.writable&&this._end()}catch(e){this.emit("error",e)}};var filterParseAsync={exports:{}},filterParse={exports:{}},interlace={};let imagePasses=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];interlace.getImagePasses=function(e,t){let n=[],o=e%8,c=t%8,d=(e-o)/8,g=(t-c)/8;for(let r=0;r<imagePasses.length;r++){let v=imagePasses[r],E=d*v.x.length,w=g*v.y.length;for(let T=0;T<v.x.length&&v.x[T]<o;T++)E++;for(let T=0;T<v.y.length&&v.y[T]<c;T++)w++;E>0&&w>0&&n.push({width:E,height:w,index:r})}return n};interlace.getInterlaceIterator=function(e){return function(t,n,o){let c=t%imagePasses[o].x.length,d=(t-c)/imagePasses[o].x.length*8+imagePasses[o].x[c],g=n%imagePasses[o].y.length,r=(n-g)/imagePasses[o].y.length*8+imagePasses[o].y[g];return d*4+r*e*4}};var paethPredictor$2=function(t,n,o){let c=t+n-o,d=Math.abs(c-t),g=Math.abs(c-n),r=Math.abs(c-o);return d<=g&&d<=r?t:g<=r?n:o};let interlaceUtils$1=interlace,paethPredictor$1=paethPredictor$2;function getByteWidth(e,t,n){let o=e*t;return n!==8&&(o=Math.ceil(o/(8/n))),o}let Filter$2=filterParse.exports=function(e,t){let n=e.width,o=e.height,c=e.interlace,d=e.bpp,g=e.depth;if(this.read=t.read,this.write=t.write,this.complete=t.complete,this._imageIndex=0,this._images=[],c){let r=interlaceUtils$1.getImagePasses(n,o);for(let v=0;v<r.length;v++)this._images.push({byteWidth:getByteWidth(r[v].width,d,g),height:r[v].height,lineIndex:0})}else this._images.push({byteWidth:getByteWidth(n,d,g),height:o,lineIndex:0});g===8?this._xComparison=d:g===16?this._xComparison=d*2:this._xComparison=1};Filter$2.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))};Filter$2.prototype._unFilterType1=function(e,t,n){let o=this._xComparison,c=o-1;for(let d=0;d<n;d++){let g=e[1+d],r=d>c?t[d-o]:0;t[d]=g+r}};Filter$2.prototype._unFilterType2=function(e,t,n){let o=this._lastLine;for(let c=0;c<n;c++){let d=e[1+c],g=o?o[c]:0;t[c]=d+g}};Filter$2.prototype._unFilterType3=function(e,t,n){let o=this._xComparison,c=o-1,d=this._lastLine;for(let g=0;g<n;g++){let r=e[1+g],v=d?d[g]:0,E=g>c?t[g-o]:0,w=Math.floor((E+v)/2);t[g]=r+w}};Filter$2.prototype._unFilterType4=function(e,t,n){let o=this._xComparison,c=o-1,d=this._lastLine;for(let g=0;g<n;g++){let r=e[1+g],v=d?d[g]:0,E=g>c?t[g-o]:0,w=g>c&&d?d[g-o]:0,T=paethPredictor$1(E,v,w);t[g]=r+T}};Filter$2.prototype._reverseFilterLine=function(e){let t=e[0],n,o=this._images[this._imageIndex],c=o.byteWidth;if(t===0)n=e.slice(1,c+1);else switch(n=Buffer.alloc(c),t){case 1:this._unFilterType1(e,n,c);break;case 2:this._unFilterType2(e,n,c);break;case 3:this._unFilterType3(e,n,c);break;case 4:this._unFilterType4(e,n,c);break;default:throw new Error("Unrecognised filter type - "+t)}this.write(n),o.lineIndex++,o.lineIndex>=o.height?(this._lastLine=null,this._imageIndex++,o=this._images[this._imageIndex]):this._lastLine=n,o?this.read(o.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())};let util$3=require$$0__default$2.default,ChunkStream$1=chunkstream.exports,Filter$1=filterParse.exports,FilterAsync$1=filterParseAsync.exports=function(e){ChunkStream$1.call(this);let t=[],n=this;this._filter=new Filter$1(e,{read:this.read.bind(this),write:function(o){t.push(o)},complete:function(){n.emit("complete",Buffer.concat(t))}}),this._filter.start()};util$3.inherits(FilterAsync$1,ChunkStream$1);var parser={exports:{}},constants$5={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5},crc={exports:{}};let crcTable=[];(function(){for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t&1?t=3988292384^t>>>1:t=t>>>1;crcTable[e]=t}})();let CrcCalculator$1=crc.exports=function(){this._crc=-1};CrcCalculator$1.prototype.write=function(e){for(let t=0;t<e.length;t++)this._crc=crcTable[(this._crc^e[t])&255]^this._crc>>>8;return!0};CrcCalculator$1.prototype.crc32=function(){return this._crc^-1};CrcCalculator$1.crc32=function(e){let t=-1;for(let n=0;n<e.length;n++)t=crcTable[(t^e[n])&255]^t>>>8;return t^-1};let constants$4=constants$5,CrcCalculator=crc.exports,Parser$3=parser.exports=function(e,t){this._options=e,e.checkCRC=e.checkCRC!==!1,this._hasIHDR=!1,this._hasIEND=!1,this._emittedHeadersFinished=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[constants$4.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[constants$4.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[constants$4.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[constants$4.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[constants$4.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[constants$4.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=t.read,this.error=t.error,this.metadata=t.metadata,this.gamma=t.gamma,this.transColor=t.transColor,this.palette=t.palette,this.parsed=t.parsed,this.inflateData=t.inflateData,this.finished=t.finished,this.simpleTransparency=t.simpleTransparency,this.headersFinished=t.headersFinished||function(){}};Parser$3.prototype.start=function(){this.read(constants$4.PNG_SIGNATURE.length,this._parseSignature.bind(this))};Parser$3.prototype._parseSignature=function(e){let t=constants$4.PNG_SIGNATURE;for(let n=0;n<t.length;n++)if(e[n]!==t[n]){this.error(new Error("Invalid file signature"));return}this.read(8,this._parseChunkBegin.bind(this))};Parser$3.prototype._parseChunkBegin=function(e){let t=e.readUInt32BE(0),n=e.readUInt32BE(4),o="";for(let d=4;d<8;d++)o+=String.fromCharCode(e[d]);let c=Boolean(e[4]&32);if(!this._hasIHDR&&n!==constants$4.TYPE_IHDR){this.error(new Error("Expected IHDR on beggining"));return}if(this._crc=new CrcCalculator,this._crc.write(Buffer.from(o)),this._chunks[n])return this._chunks[n](t);if(!c){this.error(new Error("Unsupported critical chunk type "+o));return}this.read(t+4,this._skipChunk.bind(this))};Parser$3.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))};Parser$3.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))};Parser$3.prototype._parseChunkEnd=function(e){let t=e.readInt32BE(0),n=this._crc.crc32();if(this._options.checkCRC&&n!==t){this.error(new Error("Crc error - "+t+" - "+n));return}this._hasIEND||this.read(8,this._parseChunkBegin.bind(this))};Parser$3.prototype._handleIHDR=function(e){this.read(e,this._parseIHDR.bind(this))};Parser$3.prototype._parseIHDR=function(e){this._crc.write(e);let t=e.readUInt32BE(0),n=e.readUInt32BE(4),o=e[8],c=e[9],d=e[10],g=e[11],r=e[12];if(o!==8&&o!==4&&o!==2&&o!==1&&o!==16){this.error(new Error("Unsupported bit depth "+o));return}if(!(c in constants$4.COLORTYPE_TO_BPP_MAP)){this.error(new Error("Unsupported color type"));return}if(d!==0){this.error(new Error("Unsupported compression method"));return}if(g!==0){this.error(new Error("Unsupported filter method"));return}if(r!==0&&r!==1){this.error(new Error("Unsupported interlace method"));return}this._colorType=c;let v=constants$4.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:t,height:n,depth:o,interlace:Boolean(r),palette:Boolean(c&constants$4.COLORTYPE_PALETTE),color:Boolean(c&constants$4.COLORTYPE_COLOR),alpha:Boolean(c&constants$4.COLORTYPE_ALPHA),bpp:v,colorType:c}),this._handleChunkEnd()};Parser$3.prototype._handlePLTE=function(e){this.read(e,this._parsePLTE.bind(this))};Parser$3.prototype._parsePLTE=function(e){this._crc.write(e);let t=Math.floor(e.length/3);for(let n=0;n<t;n++)this._palette.push([e[n*3],e[n*3+1],e[n*3+2],255]);this.palette(this._palette),this._handleChunkEnd()};Parser$3.prototype._handleTRNS=function(e){this.simpleTransparency(),this.read(e,this._parseTRNS.bind(this))};Parser$3.prototype._parseTRNS=function(e){if(this._crc.write(e),this._colorType===constants$4.COLORTYPE_PALETTE_COLOR){if(this._palette.length===0){this.error(new Error("Transparency chunk must be after palette"));return}if(e.length>this._palette.length){this.error(new Error("More transparent colors than palette size"));return}for(let t=0;t<e.length;t++)this._palette[t][3]=e[t];this.palette(this._palette)}this._colorType===constants$4.COLORTYPE_GRAYSCALE&&this.transColor([e.readUInt16BE(0)]),this._colorType===constants$4.COLORTYPE_COLOR&&this.transColor([e.readUInt16BE(0),e.readUInt16BE(2),e.readUInt16BE(4)]),this._handleChunkEnd()};Parser$3.prototype._handleGAMA=function(e){this.read(e,this._parseGAMA.bind(this))};Parser$3.prototype._parseGAMA=function(e){this._crc.write(e),this.gamma(e.readUInt32BE(0)/constants$4.GAMMA_DIVISION),this._handleChunkEnd()};Parser$3.prototype._handleIDAT=function(e){this._emittedHeadersFinished||(this._emittedHeadersFinished=!0,this.headersFinished()),this.read(-e,this._parseIDAT.bind(this,e))};Parser$3.prototype._parseIDAT=function(e,t){if(this._crc.write(t),this._colorType===constants$4.COLORTYPE_PALETTE_COLOR&&this._palette.length===0)throw new Error("Expected palette not found");this.inflateData(t);let n=e-t.length;n>0?this._handleIDAT(n):this._handleChunkEnd()};Parser$3.prototype._handleIEND=function(e){this.read(e,this._parseIEND.bind(this))};Parser$3.prototype._parseIEND=function(e){this._crc.write(e),this._hasIEND=!0,this._handleChunkEnd(),this.finished&&this.finished()};var bitmapper$2={};let interlaceUtils=interlace,pixelBppMapper=[function(){},function(e,t,n,o){if(o===t.length)throw new Error("Ran out of data");let c=t[o];e[n]=c,e[n+1]=c,e[n+2]=c,e[n+3]=255},function(e,t,n,o){if(o+1>=t.length)throw new Error("Ran out of data");let c=t[o];e[n]=c,e[n+1]=c,e[n+2]=c,e[n+3]=t[o+1]},function(e,t,n,o){if(o+2>=t.length)throw new Error("Ran out of data");e[n]=t[o],e[n+1]=t[o+1],e[n+2]=t[o+2],e[n+3]=255},function(e,t,n,o){if(o+3>=t.length)throw new Error("Ran out of data");e[n]=t[o],e[n+1]=t[o+1],e[n+2]=t[o+2],e[n+3]=t[o+3]}],pixelBppCustomMapper=[function(){},function(e,t,n,o){let c=t[0];e[n]=c,e[n+1]=c,e[n+2]=c,e[n+3]=o},function(e,t,n){let o=t[0];e[n]=o,e[n+1]=o,e[n+2]=o,e[n+3]=t[1]},function(e,t,n,o){e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=o},function(e,t,n){e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=t[3]}];function bitRetriever(e,t){let n=[],o=0;function c(){if(o===e.length)throw new Error("Ran out of data");let d=e[o];o++;let g,r,v,E,w,T,S,N;switch(t){default:throw new Error("unrecognised depth");case 16:S=e[o],o++,n.push((d<<8)+S);break;case 4:S=d&15,N=d>>4,n.push(N,S);break;case 2:w=d&3,T=d>>2&3,S=d>>4&3,N=d>>6&3,n.push(N,S,T,w);break;case 1:g=d&1,r=d>>1&1,v=d>>2&1,E=d>>3&1,w=d>>4&1,T=d>>5&1,S=d>>6&1,N=d>>7&1,n.push(N,S,T,w,E,v,r,g);break}}return{get:function(d){for(;n.length<d;)c();let g=n.slice(0,d);return n=n.slice(d),g},resetAfterLine:function(){n.length=0},end:function(){if(o!==e.length)throw new Error("extra data found")}}}function mapImage8Bit(e,t,n,o,c,d){let g=e.width,r=e.height,v=e.index;for(let E=0;E<r;E++)for(let w=0;w<g;w++){let T=n(w,E,v);pixelBppMapper[o](t,c,T,d),d+=o}return d}function mapImageCustomBit(e,t,n,o,c,d){let g=e.width,r=e.height,v=e.index;for(let E=0;E<r;E++){for(let w=0;w<g;w++){let T=c.get(o),S=n(w,E,v);pixelBppCustomMapper[o](t,T,S,d)}c.resetAfterLine()}}bitmapper$2.dataToBitMap=function(e,t){let n=t.width,o=t.height,c=t.depth,d=t.bpp,g=t.interlace,r;c!==8&&(r=bitRetriever(e,c));let v;c<=8?v=Buffer.alloc(n*o*4):v=new Uint16Array(n*o*4);let E=Math.pow(2,c)-1,w=0,T,S;if(g)T=interlaceUtils.getImagePasses(n,o),S=interlaceUtils.getInterlaceIterator(n,o);else{let N=0;S=function(){let L=N;return N+=4,L},T=[{width:n,height:o}]}for(let N=0;N<T.length;N++)c===8?w=mapImage8Bit(T[N],v,S,d,e,w):mapImageCustomBit(T[N],v,S,d,r,E);if(c===8){if(w!==e.length)throw new Error("extra data found")}else r.end();return v};function dePalette(e,t,n,o,c){let d=0;for(let g=0;g<o;g++)for(let r=0;r<n;r++){let v=c[e[d]];if(!v)throw new Error("index "+e[d]+" not in palette");for(let E=0;E<4;E++)t[d+E]=v[E];d+=4}}function replaceTransparentColor(e,t,n,o,c){let d=0;for(let g=0;g<o;g++)for(let r=0;r<n;r++){let v=!1;if(c.length===1?c[0]===e[d]&&(v=!0):c[0]===e[d]&&c[1]===e[d+1]&&c[2]===e[d+2]&&(v=!0),v)for(let E=0;E<4;E++)t[d+E]=0;d+=4}}function scaleDepth(e,t,n,o,c){let d=255,g=Math.pow(2,c)-1,r=0;for(let v=0;v<o;v++)for(let E=0;E<n;E++){for(let w=0;w<4;w++)t[r+w]=Math.floor(e[r+w]*d/g+.5);r+=4}}var formatNormaliser$2=function(e,t){let n=t.depth,o=t.width,c=t.height,d=t.colorType,g=t.transColor,r=t.palette,v=e;return d===3?dePalette(e,v,o,c,r):(g&&replaceTransparentColor(e,v,o,c,g),n!==8&&(n===16&&(v=Buffer.alloc(o*c*4)),scaleDepth(e,v,o,c,n))),v};let util$2=require$$0__default$2.default,zlib$3=require$$1__default$3.default,ChunkStream=chunkstream.exports,FilterAsync=filterParseAsync.exports,Parser$2=parser.exports,bitmapper$1=bitmapper$2,formatNormaliser$1=formatNormaliser$2,ParserAsync=parserAsync.exports=function(e){ChunkStream.call(this),this._parser=new Parser$2(e,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this),simpleTransparency:this._simpleTransparency.bind(this),headersFinished:this._headersFinished.bind(this)}),this._options=e,this.writable=!0,this._parser.start()};util$2.inherits(ParserAsync,ChunkStream);ParserAsync.prototype._handleError=function(e){this.emit("error",e),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this._filter&&(this._filter.destroy(),this._filter.on("error",function(){})),this.errord=!0};ParserAsync.prototype._inflateData=function(e){if(!this._inflate)if(this._bitmapInfo.interlace)this._inflate=zlib$3.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter);else{let n=((this._bitmapInfo.width*this._bitmapInfo.bpp*this._bitmapInfo.depth+7>>3)+1)*this._bitmapInfo.height,o=Math.max(n,zlib$3.Z_MIN_CHUNK);this._inflate=zlib$3.createInflate({chunkSize:o});let c=n,d=this.emit.bind(this,"error");this._inflate.on("error",function(r){!c||d(r)}),this._filter.on("complete",this._complete.bind(this));let g=this._filter.write.bind(this._filter);this._inflate.on("data",function(r){!c||(r.length>c&&(r=r.slice(0,c)),c-=r.length,g(r))}),this._inflate.on("end",this._filter.end.bind(this._filter))}this._inflate.write(e)};ParserAsync.prototype._handleMetaData=function(e){this._metaData=e,this._bitmapInfo=Object.create(e),this._filter=new FilterAsync(this._bitmapInfo)};ParserAsync.prototype._handleTransColor=function(e){this._bitmapInfo.transColor=e};ParserAsync.prototype._handlePalette=function(e){this._bitmapInfo.palette=e};ParserAsync.prototype._simpleTransparency=function(){this._metaData.alpha=!0};ParserAsync.prototype._headersFinished=function(){this.emit("metadata",this._metaData)};ParserAsync.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit("error","No Inflate block"))};ParserAsync.prototype._complete=function(e){if(this.errord)return;let t;try{let n=bitmapper$1.dataToBitMap(e,this._bitmapInfo);t=formatNormaliser$1(n,this._bitmapInfo),n=null}catch(n){this._handleError(n);return}this.emit("parsed",t)};var packerAsync={exports:{}},packer={exports:{}};let constants$3=constants$5;var bitpacker=function(e,t,n,o){let c=[constants$3.COLORTYPE_COLOR_ALPHA,constants$3.COLORTYPE_ALPHA].indexOf(o.colorType)!==-1;if(o.colorType===o.inputColorType){let L=function(){let P=new ArrayBuffer(2);return new DataView(P).setInt16(0,256,!0),new Int16Array(P)[0]!==256}();if(o.bitDepth===8||o.bitDepth===16&&L)return e}let d=o.bitDepth!==16?e:new Uint16Array(e.buffer),g=255,r=constants$3.COLORTYPE_TO_BPP_MAP[o.inputColorType];r===4&&!o.inputHasAlpha&&(r=3);let v=constants$3.COLORTYPE_TO_BPP_MAP[o.colorType];o.bitDepth===16&&(g=65535,v*=2);let E=Buffer.alloc(t*n*v),w=0,T=0,S=o.bgColor||{};S.red===void 0&&(S.red=g),S.green===void 0&&(S.green=g),S.blue===void 0&&(S.blue=g);function N(){let L,P,O,V=g;switch(o.inputColorType){case constants$3.COLORTYPE_COLOR_ALPHA:V=d[w+3],L=d[w],P=d[w+1],O=d[w+2];break;case constants$3.COLORTYPE_COLOR:L=d[w],P=d[w+1],O=d[w+2];break;case constants$3.COLORTYPE_ALPHA:V=d[w+1],L=d[w],P=L,O=L;break;case constants$3.COLORTYPE_GRAYSCALE:L=d[w],P=L,O=L;break;default:throw new Error("input color type:"+o.inputColorType+" is not supported at present")}return o.inputHasAlpha&&(c||(V/=g,L=Math.min(Math.max(Math.round((1-V)*S.red+V*L),0),g),P=Math.min(Math.max(Math.round((1-V)*S.green+V*P),0),g),O=Math.min(Math.max(Math.round((1-V)*S.blue+V*O),0),g))),{red:L,green:P,blue:O,alpha:V}}for(let L=0;L<n;L++)for(let P=0;P<t;P++){let O=N();switch(o.colorType){case constants$3.COLORTYPE_COLOR_ALPHA:case constants$3.COLORTYPE_COLOR:o.bitDepth===8?(E[T]=O.red,E[T+1]=O.green,E[T+2]=O.blue,c&&(E[T+3]=O.alpha)):(E.writeUInt16BE(O.red,T),E.writeUInt16BE(O.green,T+2),E.writeUInt16BE(O.blue,T+4),c&&E.writeUInt16BE(O.alpha,T+6));break;case constants$3.COLORTYPE_ALPHA:case constants$3.COLORTYPE_GRAYSCALE:{let V=(O.red+O.green+O.blue)/3;o.bitDepth===8?(E[T]=V,c&&(E[T+1]=O.alpha)):(E.writeUInt16BE(V,T),c&&E.writeUInt16BE(O.alpha,T+2));break}default:throw new Error("unrecognised color Type "+o.colorType)}w+=r,T+=v}return E};let paethPredictor=paethPredictor$2;function filterNone(e,t,n,o,c){for(let d=0;d<n;d++)o[c+d]=e[t+d]}function filterSumNone(e,t,n){let o=0,c=t+n;for(let d=t;d<c;d++)o+=Math.abs(e[d]);return o}function filterSub(e,t,n,o,c,d){for(let g=0;g<n;g++){let r=g>=d?e[t+g-d]:0,v=e[t+g]-r;o[c+g]=v}}function filterSumSub(e,t,n,o){let c=0;for(let d=0;d<n;d++){let g=d>=o?e[t+d-o]:0,r=e[t+d]-g;c+=Math.abs(r)}return c}function filterUp(e,t,n,o,c){for(let d=0;d<n;d++){let g=t>0?e[t+d-n]:0,r=e[t+d]-g;o[c+d]=r}}function filterSumUp(e,t,n){let o=0,c=t+n;for(let d=t;d<c;d++){let g=t>0?e[d-n]:0,r=e[d]-g;o+=Math.abs(r)}return o}function filterAvg(e,t,n,o,c,d){for(let g=0;g<n;g++){let r=g>=d?e[t+g-d]:0,v=t>0?e[t+g-n]:0,E=e[t+g]-(r+v>>1);o[c+g]=E}}function filterSumAvg(e,t,n,o){let c=0;for(let d=0;d<n;d++){let g=d>=o?e[t+d-o]:0,r=t>0?e[t+d-n]:0,v=e[t+d]-(g+r>>1);c+=Math.abs(v)}return c}function filterPaeth(e,t,n,o,c,d){for(let g=0;g<n;g++){let r=g>=d?e[t+g-d]:0,v=t>0?e[t+g-n]:0,E=t>0&&g>=d?e[t+g-(n+d)]:0,w=e[t+g]-paethPredictor(r,v,E);o[c+g]=w}}function filterSumPaeth(e,t,n,o){let c=0;for(let d=0;d<n;d++){let g=d>=o?e[t+d-o]:0,r=t>0?e[t+d-n]:0,v=t>0&&d>=o?e[t+d-(n+o)]:0,E=e[t+d]-paethPredictor(g,r,v);c+=Math.abs(E)}return c}let filters={0:filterNone,1:filterSub,2:filterUp,3:filterAvg,4:filterPaeth},filterSums={0:filterSumNone,1:filterSumSub,2:filterSumUp,3:filterSumAvg,4:filterSumPaeth};var filterPack=function(e,t,n,o,c){let d;if(!("filterType"in o)||o.filterType===-1)d=[0,1,2,3,4];else if(typeof o.filterType=="number")d=[o.filterType];else throw new Error("unrecognised filter types");o.bitDepth===16&&(c*=2);let g=t*c,r=0,v=0,E=Buffer.alloc((g+1)*n),w=d[0];for(let T=0;T<n;T++){if(d.length>1){let S=1/0;for(let N=0;N<d.length;N++){let L=filterSums[d[N]](e,v,g,c);L<S&&(w=d[N],S=L)}}E[r]=w,r++,filters[w](e,v,g,E,r,c),r+=g,v+=g}return E};let constants$2=constants$5,CrcStream=crc.exports,bitPacker=bitpacker,filter=filterPack,zlib$2=require$$1__default$3.default,Packer$3=packer.exports=function(e){if(this._options=e,e.deflateChunkSize=e.deflateChunkSize||32*1024,e.deflateLevel=e.deflateLevel!=null?e.deflateLevel:9,e.deflateStrategy=e.deflateStrategy!=null?e.deflateStrategy:3,e.inputHasAlpha=e.inputHasAlpha!=null?e.inputHasAlpha:!0,e.deflateFactory=e.deflateFactory||zlib$2.createDeflate,e.bitDepth=e.bitDepth||8,e.colorType=typeof e.colorType=="number"?e.colorType:constants$2.COLORTYPE_COLOR_ALPHA,e.inputColorType=typeof e.inputColorType=="number"?e.inputColorType:constants$2.COLORTYPE_COLOR_ALPHA,[constants$2.COLORTYPE_GRAYSCALE,constants$2.COLORTYPE_COLOR,constants$2.COLORTYPE_COLOR_ALPHA,constants$2.COLORTYPE_ALPHA].indexOf(e.colorType)===-1)throw new Error("option color type:"+e.colorType+" is not supported at present");if([constants$2.COLORTYPE_GRAYSCALE,constants$2.COLORTYPE_COLOR,constants$2.COLORTYPE_COLOR_ALPHA,constants$2.COLORTYPE_ALPHA].indexOf(e.inputColorType)===-1)throw new Error("option input color type:"+e.inputColorType+" is not supported at present");if(e.bitDepth!==8&&e.bitDepth!==16)throw new Error("option bit depth:"+e.bitDepth+" is not supported at present")};Packer$3.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}};Packer$3.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())};Packer$3.prototype.filterData=function(e,t,n){let o=bitPacker(e,t,n,this._options),c=constants$2.COLORTYPE_TO_BPP_MAP[this._options.colorType];return filter(o,t,n,this._options,c)};Packer$3.prototype._packChunk=function(e,t){let n=t?t.length:0,o=Buffer.alloc(n+12);return o.writeUInt32BE(n,0),o.writeUInt32BE(e,4),t&&t.copy(o,8),o.writeInt32BE(CrcStream.crc32(o.slice(4,o.length-4)),o.length-4),o};Packer$3.prototype.packGAMA=function(e){let t=Buffer.alloc(4);return t.writeUInt32BE(Math.floor(e*constants$2.GAMMA_DIVISION),0),this._packChunk(constants$2.TYPE_gAMA,t)};Packer$3.prototype.packIHDR=function(e,t){let n=Buffer.alloc(13);return n.writeUInt32BE(e,0),n.writeUInt32BE(t,4),n[8]=this._options.bitDepth,n[9]=this._options.colorType,n[10]=0,n[11]=0,n[12]=0,this._packChunk(constants$2.TYPE_IHDR,n)};Packer$3.prototype.packIDAT=function(e){return this._packChunk(constants$2.TYPE_IDAT,e)};Packer$3.prototype.packIEND=function(){return this._packChunk(constants$2.TYPE_IEND,null)};let util$1=require$$0__default$2.default,Stream$1=require$$1__default$1.default,constants$1=constants$5,Packer$2=packer.exports,PackerAsync=packerAsync.exports=function(e){Stream$1.call(this);let t=e||{};this._packer=new Packer$2(t),this._deflate=this._packer.createDeflate(),this.readable=!0};util$1.inherits(PackerAsync,Stream$1);PackerAsync.prototype.pack=function(e,t,n,o){this.emit("data",Buffer.from(constants$1.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(t,n)),o&&this.emit("data",this._packer.packGAMA(o));let c=this._packer.filterData(e,t,n);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",function(d){this.emit("data",this._packer.packIDAT(d))}.bind(this)),this._deflate.on("end",function(){this.emit("data",this._packer.packIEND()),this.emit("end")}.bind(this)),this._deflate.end(c)};var pngSync={},syncInflate={exports:{}};(function(e,t){let n=require$$4__default.default.ok,o=require$$1__default$3.default,c=require$$0__default$2.default,d=require$$3__default.default.kMaxLength;function g(T){if(!(this instanceof g))return new g(T);T&&T.chunkSize<o.Z_MIN_CHUNK&&(T.chunkSize=o.Z_MIN_CHUNK),o.Inflate.call(this,T),this._offset=this._offset===void 0?this._outOffset:this._offset,this._buffer=this._buffer||this._outBuffer,T&&T.maxLength!=null&&(this._maxLength=T.maxLength)}function r(T){return new g(T)}function v(T,S){S&&process.nextTick(S),T._handle&&(T._handle.close(),T._handle=null)}g.prototype._processChunk=function(T,S,N){if(typeof N=="function")return o.Inflate._processChunk.call(this,T,S,N);let L=this,P=T&&T.length,O=this._chunkSize-this._offset,V=this._maxLength,D=0,U=[],W=0,Z;this.on("error",function(ne){Z=ne});function re(ne,le){if(L._hadError)return;let de=O-le;if(n(de>=0,"have should not go down"),de>0){let ie=L._buffer.slice(L._offset,L._offset+de);if(L._offset+=de,ie.length>V&&(ie=ie.slice(0,V)),U.push(ie),W+=ie.length,V-=ie.length,V===0)return!1}return(le===0||L._offset>=L._chunkSize)&&(O=L._chunkSize,L._offset=0,L._buffer=Buffer.allocUnsafe(L._chunkSize)),le===0?(D+=P-ne,P=ne,!0):!1}n(this._handle,"zlib binding closed");let ae;do ae=this._handle.writeSync(S,T,D,P,this._buffer,this._offset,O),ae=ae||this._writeState;while(!this._hadError&&re(ae[0],ae[1]));if(this._hadError)throw Z;if(W>=d)throw v(this),new RangeError("Cannot create final Buffer. It would be larger than 0x"+d.toString(16)+" bytes");let ce=Buffer.concat(U,W);return v(this),ce},c.inherits(g,o.Inflate);function E(T,S){if(typeof S=="string"&&(S=Buffer.from(S)),!(S instanceof Buffer))throw new TypeError("Not a string or buffer");let N=T._finishFlushFlag;return N==null&&(N=o.Z_FINISH),T._processChunk(S,N)}function w(T,S){return E(new g(S),T)}e.exports=t=w,t.Inflate=g,t.createInflate=r,t.inflateSync=w})(syncInflate,syncInflate.exports);var syncReader={exports:{}};let SyncReader$2=syncReader.exports=function(e){this._buffer=e,this._reads=[]};SyncReader$2.prototype.read=function(e,t){this._reads.push({length:Math.abs(e),allowLess:e<0,func:t})};SyncReader$2.prototype.process=function(){for(;this._reads.length>0&&this._buffer.length;){let e=this._reads[0];if(this._buffer.length&&(this._buffer.length>=e.length||e.allowLess)){this._reads.shift();let t=this._buffer;this._buffer=t.slice(e.length),e.func.call(this,t.slice(0,e.length))}else break}if(this._reads.length>0)return new Error("There are some read requests waitng on finished stream");if(this._buffer.length>0)return new Error("unrecognised content at end of stream")};var filterParseSync={};let SyncReader$1=syncReader.exports,Filter=filterParse.exports;filterParseSync.process=function(e,t){let n=[],o=new SyncReader$1(e);return new Filter(t,{read:o.read.bind(o),write:function(d){n.push(d)},complete:function(){}}).start(),o.process(),Buffer.concat(n)};let hasSyncZlib$1=!0,zlib$1=require$$1__default$3.default,inflateSync=syncInflate.exports;zlib$1.deflateSync||(hasSyncZlib$1=!1);let SyncReader=syncReader.exports,FilterSync=filterParseSync,Parser$1=parser.exports,bitmapper=bitmapper$2,formatNormaliser=formatNormaliser$2;var parserSync=function(e,t){if(!hasSyncZlib$1)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let n;function o(W){n=W}let c;function d(W){c=W}function g(W){c.transColor=W}function r(W){c.palette=W}function v(){c.alpha=!0}let E;function w(W){E=W}let T=[];function S(W){T.push(W)}let N=new SyncReader(e);if(new Parser$1(t,{read:N.read.bind(N),error:o,metadata:d,gamma:w,palette:r,transColor:g,inflateData:S,simpleTransparency:v}).start(),N.process(),n)throw n;let P=Buffer.concat(T);T.length=0;let O;if(c.interlace)O=zlib$1.inflateSync(P);else{let Z=((c.width*c.bpp*c.depth+7>>3)+1)*c.height;O=inflateSync(P,{chunkSize:Z,maxLength:Z})}if(P=null,!O||!O.length)throw new Error("bad png - invalid inflate data response");let V=FilterSync.process(O,c);P=null;let D=bitmapper.dataToBitMap(V,c);V=null;let U=formatNormaliser(D,c);return c.data=U,c.gamma=E||0,c};let hasSyncZlib=!0,zlib=require$$1__default$3.default;zlib.deflateSync||(hasSyncZlib=!1);let constants=constants$5,Packer$1=packer.exports;var packerSync=function(e,t){if(!hasSyncZlib)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let n=t||{},o=new Packer$1(n),c=[];c.push(Buffer.from(constants.PNG_SIGNATURE)),c.push(o.packIHDR(e.width,e.height)),e.gamma&&c.push(o.packGAMA(e.gamma));let d=o.filterData(e.data,e.width,e.height),g=zlib.deflateSync(d,o.getDeflateOptions());if(d=null,!g||!g.length)throw new Error("bad png - invalid compressed data response");return c.push(o.packIDAT(g)),c.push(o.packIEND()),Buffer.concat(c)};let parse=parserSync,pack=packerSync;pngSync.read=function(e,t){return parse(e,t||{})};pngSync.write=function(e,t){return pack(e,t)};let util=require$$0__default$2.default,Stream=require$$1__default$1.default,Parser=parserAsync.exports,Packer=packerAsync.exports,PNGSync=pngSync,PNG=png.PNG=function(e){Stream.call(this),e=e||{},this.width=e.width|0,this.height=e.height|0,this.data=this.width>0&&this.height>0?Buffer.alloc(4*this.width*this.height):null,e.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new Parser(e),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",function(t){this.data=t,this.emit("parsed",t)}.bind(this)),this._packer=new Packer(e),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};util.inherits(PNG,Stream);PNG.sync=PNGSync;PNG.prototype.pack=function(){return!this.data||!this.data.length?(this.emit("error","No data provided"),this):(process.nextTick(function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}.bind(this)),this)};PNG.prototype.parse=function(e,t){if(t){let n,o;n=function(c){this.removeListener("error",o),this.data=c,t(null,this)}.bind(this),o=function(c){this.removeListener("parsed",n),t(c,null)}.bind(this),this.once("parsed",n),this.once("error",o)}return this.end(e),this};PNG.prototype.write=function(e){return this._parser.write(e),!0};PNG.prototype.end=function(e){this._parser.end(e)};PNG.prototype._metadata=function(e){this.width=e.width,this.height=e.height,this.emit("metadata",e)};PNG.prototype._gamma=function(e){this.gamma=e};PNG.prototype._handleClose=function(){!this._parser.writable&&!this._packer.readable&&this.emit("close")};PNG.bitblt=function(e,t,n,o,c,d,g,r){if(n|=0,o|=0,c|=0,d|=0,g|=0,r|=0,n>e.width||o>e.height||n+c>e.width||o+d>e.height)throw new Error("bitblt reading outside image");if(g>t.width||r>t.height||g+c>t.width||r+d>t.height)throw new Error("bitblt writing outside image");for(let v=0;v<d;v++)e.data.copy(t.data,(r+v)*t.width+g<<2,(o+v)*e.width+n<<2,(o+v)*e.width+n+c<<2)};PNG.prototype.bitblt=function(e,t,n,o,c,d,g){return PNG.bitblt(this,e,t,n,o,c,d,g),this};PNG.adjustGamma=function(e){if(e.gamma){for(let t=0;t<e.height;t++)for(let n=0;n<e.width;n++){let o=e.width*t+n<<2;for(let c=0;c<3;c++){let d=e.data[o+c]/255;d=Math.pow(d,1/2.2/e.gamma),e.data[o+c]=Math.round(d*255)}}e.gamma=0}};PNG.prototype.adjustGamma=function(){PNG.adjustGamma(this)};var utils={};(function(e){function t(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let o=n.slice().replace("#","").split("");if(o.length<3||o.length===5||o.length>8)throw new Error("Invalid hex color: "+n);(o.length===3||o.length===4)&&(o=Array.prototype.concat.apply([],o.map(function(d){return[d,d]}))),o.length===6&&o.push("F","F");const c=parseInt(o.join(""),16);return{r:c>>24&255,g:c>>16&255,b:c>>8&255,a:c&255,hex:"#"+o.slice(0,6).join("")}}e.getOptions=function(o){o||(o={}),o.color||(o.color={});const c=typeof o.margin>"u"||o.margin===null||o.margin<0?4:o.margin,d=o.width&&o.width>=21?o.width:void 0,g=o.scale||4;return{width:d,scale:d?4:g,margin:c,color:{dark:t(o.color.dark||"#000000ff"),light:t(o.color.light||"#ffffffff")},type:o.type,rendererOpts:o.rendererOpts||{}}},e.getScale=function(o,c){return c.width&&c.width>=o+c.margin*2?c.width/(o+c.margin*2):c.scale},e.getImageWidth=function(o,c){const d=e.getScale(o,c);return Math.floor((o+c.margin*2)*d)},e.qrToImageData=function(o,c,d){const g=c.modules.size,r=c.modules.data,v=e.getScale(g,d),E=Math.floor((g+d.margin*2)*v),w=d.margin*v,T=[d.color.light,d.color.dark];for(let S=0;S<E;S++)for(let N=0;N<E;N++){let L=(S*E+N)*4,P=d.color.light;if(S>=w&&N>=w&&S<E-w&&N<E-w){const O=Math.floor((S-w)/v),V=Math.floor((N-w)/v);P=T[r[O*g+V]?1:0]}o[L++]=P.r,o[L++]=P.g,o[L++]=P.b,o[L]=P.a}}})(utils);(function(e){const t=require$$1__default$5.default,n=png.PNG,o=utils;e.render=function(d,g){const r=o.getOptions(g),v=r.rendererOpts,E=o.getImageWidth(d.modules.size,r);v.width=E,v.height=E;const w=new n(v);return o.qrToImageData(w.data,d,r),w},e.renderToDataURL=function(d,g,r){typeof r>"u"&&(r=g,g=void 0),e.renderToBuffer(d,g,function(v,E){v&&r(v);let w="data:image/png;base64,";w+=E.toString("base64"),r(null,w)})},e.renderToBuffer=function(d,g,r){typeof r>"u"&&(r=g,g=void 0);const v=e.render(d,g),E=[];v.on("error",r),v.on("data",function(w){E.push(w)}),v.on("end",function(){r(null,Buffer.concat(E))}),v.pack()},e.renderToFile=function(d,g,r,v){typeof v>"u"&&(v=r,r=void 0);let E=!1;const w=(...S)=>{E||(E=!0,v.apply(null,S))},T=t.createWriteStream(d);T.on("error",w),T.on("close",w),e.renderToFileStream(T,g,r)},e.renderToFileStream=function(d,g,r){e.render(g,r).pack().pipe(d)}})(png$1);var utf8={};(function(e){const t=utils,n={WW:" ",WB:"\u2584",BB:"\u2588",BW:"\u2580"},o={BB:" ",BW:"\u2584",WW:"\u2588",WB:"\u2580"};function c(d,g,r){return d&&g?r.BB:d&&!g?r.BW:!d&&g?r.WB:r.WW}e.render=function(d,g,r){const v=t.getOptions(g);let E=n;(v.color.dark.hex==="#ffffff"||v.color.light.hex==="#000000")&&(E=o);const w=d.modules.size,T=d.modules.data;let S="",N=Array(w+v.margin*2+1).join(E.WW);N=Array(v.margin/2+1).join(N+`
`);const L=Array(v.margin+1).join(E.WW);S+=N;for(let P=0;P<w;P+=2){S+=L;for(let O=0;O<w;O++){const V=T[P*w+O],D=T[(P+1)*w+O];S+=c(V,D,E)}S+=L+`
`}return S+=N.slice(0,-1),typeof r=="function"&&r(null,S),S},e.renderToFile=function(g,r,v,E){typeof E>"u"&&(E=v,v=void 0);const w=require$$1__default$5.default,T=e.render(r,v);w.writeFile(g,T,E)}})(utf8);var terminal$1={},terminal={};terminal.render=function(e,t,n){const o=e.modules.size,c=e.modules.data,d="\x1B[40m  \x1B[0m",g="\x1B[47m  \x1B[0m";let r="";const v=Array(o+3).join(g),E=Array(2).join(g);r+=v+`
`;for(let w=0;w<o;++w){r+=g;for(let T=0;T<o;T++)r+=c[w*o+T]?d:g;r+=E+`
`}return r+=v+`
`,typeof n=="function"&&n(null,r),r};var terminalSmall={};const backgroundWhite="\x1B[47m",backgroundBlack="\x1B[40m",foregroundWhite="\x1B[37m",foregroundBlack="\x1B[30m",reset="\x1B[0m",lineSetupNormal=backgroundWhite+foregroundBlack,lineSetupInverse=backgroundBlack+foregroundWhite,createPalette=function(e,t,n){return{"00":reset+" "+e,"01":reset+t+"\u2584"+e,"02":reset+n+"\u2584"+e,10:reset+t+"\u2580"+e,11:" ",12:"\u2584",20:reset+n+"\u2580"+e,21:"\u2580",22:"\u2588"}},mkCodePixel=function(e,t,n,o){const c=t+1;if(n>=c||o>=c||o<-1||n<-1)return"0";if(n>=t||o>=t||o<0||n<0)return"1";const d=o*t+n;return e[d]?"2":"1"},mkCode=function(e,t,n,o){return mkCodePixel(e,t,n,o)+mkCodePixel(e,t,n,o+1)};terminalSmall.render=function(e,t,n){const o=e.modules.size,c=e.modules.data,d=!!(t&&t.inverse),g=t&&t.inverse?lineSetupInverse:lineSetupNormal,E=createPalette(g,d?foregroundBlack:foregroundWhite,d?foregroundWhite:foregroundBlack),w=reset+`
`+g;let T=g;for(let S=-1;S<o+1;S+=2){for(let N=-1;N<o;N++)T+=E[mkCode(c,o,N,S)];T+=E[mkCode(c,o,o,S)]+w}return T+=reset,typeof n=="function"&&n(null,T),T};const big=terminal,small=terminalSmall;terminal$1.render=function(e,t,n){return t&&t.small?small.render(e,t,n):big.render(e,t,n)};var svg={},svgTag={};const Utils=utils;function getColorAttrib(e,t){const n=e.a/255,o=t+'="'+e.hex+'"';return n<1?o+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':o}function svgCmd(e,t,n){let o=e+t;return typeof n<"u"&&(o+=" "+n),o}function qrToPath(e,t,n){let o="",c=0,d=!1,g=0;for(let r=0;r<e.length;r++){const v=Math.floor(r%t),E=Math.floor(r/t);!v&&!d&&(d=!0),e[r]?(g++,r>0&&v>0&&e[r-1]||(o+=d?svgCmd("M",v+n,.5+E+n):svgCmd("m",c,0),c=0,d=!1),v+1<t&&e[r+1]||(o+=svgCmd("h",g),g=0)):c++}return o}svgTag.render=function(t,n,o){const c=Utils.getOptions(n),d=t.modules.size,g=t.modules.data,r=d+c.margin*2,v=c.color.light.a?"<path "+getColorAttrib(c.color.light,"fill")+' d="M0 0h'+r+"v"+r+'H0z"/>':"",E="<path "+getColorAttrib(c.color.dark,"stroke")+' d="'+qrToPath(g,d,c.margin)+'"/>',w='viewBox="0 0 '+r+" "+r+'"',T=c.width?'width="'+c.width+'" height="'+c.width+'" ':"",S='<svg xmlns="http://www.w3.org/2000/svg" '+T+w+' shape-rendering="crispEdges">'+v+E+`</svg>
`;return typeof o=="function"&&o(null,S),S};(function(e){const t=svgTag;e.render=t.render,e.renderToFile=function(o,c,d,g){typeof g>"u"&&(g=d,d=void 0);const r=require$$1__default$5.default,v=e.render(c,d),E='<?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'+v;r.writeFile(o,E,g)}})(svg);var browser={},canvas={},hasRequiredCanvas;function requireCanvas(){return hasRequiredCanvas||(hasRequiredCanvas=1,function(e){const t=utils;function n(c,d,g){c.clearRect(0,0,d.width,d.height),d.style||(d.style={}),d.height=g,d.width=g,d.style.height=g+"px",d.style.width=g+"px"}function o(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(d,g,r){let v=r,E=g;typeof v>"u"&&(!g||!g.getContext)&&(v=g,g=void 0),g||(E=o()),v=t.getOptions(v);const w=t.getImageWidth(d.modules.size,v),T=E.getContext("2d"),S=T.createImageData(w,w);return t.qrToImageData(S.data,d,v),n(T,E,w),T.putImageData(S,0,0),E},e.renderToDataURL=function(d,g,r){let v=r;typeof v>"u"&&(!g||!g.getContext)&&(v=g,g=void 0),v||(v={});const E=e.render(d,g,v),w=v.type||"image/png",T=v.rendererOpts||{};return E.toDataURL(w,T.quality)}}(canvas)),canvas}var hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser;hasRequiredBrowser=1;const e=canPromise$1,t=qrcode,n=requireCanvas(),o=svgTag;function c(d,g,r,v,E){const w=[].slice.call(arguments,1),T=w.length,S=typeof w[T-1]=="function";if(!S&&!e())throw new Error("Callback required as last argument");if(S){if(T<2)throw new Error("Too few arguments provided");T===2?(E=r,r=g,g=v=void 0):T===3&&(g.getContext&&typeof E>"u"?(E=v,v=void 0):(E=v,v=r,r=g,g=void 0))}else{if(T<1)throw new Error("Too few arguments provided");return T===1?(r=g,g=v=void 0):T===2&&!g.getContext&&(v=r,r=g,g=void 0),new Promise(function(N,L){try{const P=t.create(r,v);N(d(P,g,v))}catch(P){L(P)}})}try{const N=t.create(r,v);E(null,d(N,g,v))}catch(N){E(N)}}return browser.create=t.create,browser.toCanvas=c.bind(null,n.render),browser.toDataURL=c.bind(null,n.renderToDataURL),browser.toString=c.bind(null,function(d,g,r){return o.render(d,r)}),browser}const canPromise=canPromise$1,QRCode$1=qrcode,PngRenderer=png$1,Utf8Renderer=utf8,TerminalRenderer=terminal$1,SvgRenderer=svg;function checkParams(e,t,n){if(typeof e>"u")throw new Error("String required as first argument");if(typeof n>"u"&&(n=t,t={}),typeof n!="function")if(canPromise())t=n||{},n=null;else throw new Error("Callback required as last argument");return{opts:t,cb:n}}function getTypeFromFilename(e){return e.slice((e.lastIndexOf(".")-1>>>0)+2).toLowerCase()}function getRendererFromType(e){switch(e){case"svg":return SvgRenderer;case"txt":case"utf8":return Utf8Renderer;case"png":case"image/png":default:return PngRenderer}}function getStringRendererFromType(e){switch(e){case"svg":return SvgRenderer;case"terminal":return TerminalRenderer;case"utf8":default:return Utf8Renderer}}function render(e,t,n){if(!n.cb)return new Promise(function(o,c){try{const d=QRCode$1.create(t,n.opts);return e(d,n.opts,function(g,r){return g?c(g):o(r)})}catch(d){c(d)}});try{const o=QRCode$1.create(t,n.opts);return e(o,n.opts,n.cb)}catch(o){n.cb(o)}}server.create=QRCode$1.create;server.toCanvas=requireBrowser().toCanvas;server.toString=function(t,n,o){const c=checkParams(t,n,o),d=c.opts?c.opts.type:void 0,g=getStringRendererFromType(d);return render(g.render,t,c)};server.toDataURL=function(t,n,o){const c=checkParams(t,n,o),d=getRendererFromType(c.opts.type);return render(d.renderToDataURL,t,c)};server.toBuffer=function(t,n,o){const c=checkParams(t,n,o),d=getRendererFromType(c.opts.type);return render(d.renderToBuffer,t,c)};server.toFile=function(t,n,o,c){if(typeof t!="string"||!(typeof n=="string"||typeof n=="object"))throw new Error("Invalid argument");if(arguments.length<3&&!canPromise())throw new Error("Too few arguments provided");const d=checkParams(n,o,c),g=d.opts.type||getTypeFromFilename(t),v=getRendererFromType(g).renderToFile.bind(null,t);return render(v,n,d)};server.toFileStream=function(t,n,o){if(arguments.length<2)throw new Error("Too few arguments provided");const c=checkParams(n,o,t.emit.bind(t,"error")),g=getRendererFromType("png").renderToFileStream.bind(null,t);render(g,n,c)};(function(e){e.exports=server})(lib);const QRCode=getDefaultExportFromCjs(lib.exports);async function renderTextToQRCodeDataURL(e,t){return await QRCode.toDataURL(e,{errorCorrectionLevel:"H",type:"image/jpeg",width:260,...t})}const baseParams={scrollbars:0,status:0,menubar:0,resizable:2,location:0},paramsToString=(e={})=>Object.keys(e).map(t=>`${t}=${e[t]}`).join(","),openWindow=(e,t={})=>{const{name:n="",closeInterval:o=268,onClose:c,params:d={}}=t,g=Math.round(screen.availWidth/6*2),r=Math.round(screen.availHeight/5*2),v=Math.round((screen.availHeight-r)/2),E=Math.round((screen.availWidth-g)/2),T=paramsToString({...baseParams,...{width:g,height:r,top:v,left:E},...d}),S=window.open(e,n,T);if(S){if(c){const N=setInterval(()=>{S.closed&&(clearInterval(N),c())},o)}return S==null||S.focus(),S}},enableCopyrighter=()=>{window.__isEnabledCopyrighter=!0},disableCopyrighter=()=>{window.__isEnabledCopyrighter=!1},copy=e=>{var t;return disableCopyrighter(),(t=window.navigator.clipboard)==null?void 0:t.writeText(e).finally(()=>{enableCopyrighter()})};var SocialMedia=(e=>(e.Wechat="wechat",e.Weibo="weibo",e.Twitter="twitter",e.douban="douban",e.Evernote="evernote",e.Facebook="facebook",e.LinkedIn="linkedin",e))(SocialMedia||{});const socials=[{id:"wechat",name:"\u5FAE\u4FE1",class:"wechat",handler:async e=>{const t=await renderTextToQRCodeDataURL(e.url);window.$popup.vImage(t)}},{id:"weibo",name:"\u5FAE\u535A",class:"weibo",url:e=>"https://service.weibo.com/share/share.php?"+lib$1.stringify({url:e.url,source:e.url,sourceUrl:e.url,title:e.title,content:e.description})},{id:"twitter",name:"Twitter",class:"twitter",url:e=>"https://twitter.com/share?"+lib$1.stringify({url:e.url,text:e.title})},{id:"facebook",name:"Facebook",class:"facebook",url:e=>"https://www.facebook.com/share.php?"+lib$1.stringify({u:encodeURI(e.url)})},{id:"linkedin",name:"LinkedIn",class:"linkedin",url:e=>"https://www.linkedin.com/sharing/share-offsite/?"+lib$1.stringify({url:e.url})},{id:"douban",name:"\u8C46\u74E3",class:"douban",url:e=>"https://www.douban.com/share/service?"+lib$1.stringify({href:e.url,name:e.title})},{id:"evernote",name:"Evernote",class:"evernote",url:e=>"https://www.evernote.com/clip.action?"+lib$1.stringify({url:e.url,title:e.title})}],_sfc_main$1l=defineComponent({name:"Share",props:{socials:{type:Array,required:!1}},setup(e){const{route:t,gtag:n,i18n:o,isZhLang:c}=useEnhancer(),d=computed(()=>{var T;return(T=e.socials)!=null&&T.length?socials.filter(S=>{var N;return(N=e.socials)==null?void 0:N.includes(S.id)}):socials}),g=()=>getPageURL(t.fullPath),r=()=>document.title||META.title,v=()=>{var T,S;return((S=(T=document.getElementsByName("description"))==null?void 0:T[0])==null?void 0:S.getAttribute("content"))||o.t(LanguageKey.APP_SLOGAN)};return{enabledSocials:d,copyPageURL:()=>{const T=`${r()} - ${g()}`;copy(T).then(()=>{alert(c.value?"\u94FE\u63A5\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F\uFF01":"Link copied!")}),n==null||n.event("share_copy_url",{event_category:GAEventCategories.Share,event_label:T})},handleShare:T=>{n==null||n.event("share_social",{event_category:GAEventCategories.Share,event_label:T.id});const S={url:g(),title:r(),description:v()};T.handler?T.handler(S):openWindow(T.url(S),{name:`Share: ${META.title}`})}}}}),share_vue_vue_type_style_index_0_scoped_76ac3b7b_lang="";function _sfc_ssrRender$1l(e,t,n,o,c,d,g,r){t(`<div${ssrRenderAttrs(mergeProps({class:"share"},o))} data-v-76ac3b7b><!--[-->`),ssrRenderList(e.enabledSocials,(v,E)=>{t(`<button${ssrRenderAttr("title","Share to: "+v.name)} class="${ssrRenderClass([v.class,"share-ejector"])}" data-v-76ac3b7b><i class="${ssrRenderClass([`icon-${v.class}`,"iconfont"])}" data-v-76ac3b7b></i></button>`)}),t('<!--]--><button class="share-ejector link" title="Copy link" data-v-76ac3b7b><i class="iconfont icon-link" data-v-76ac3b7b></i></button></div>')}const _sfc_setup$1l=_sfc_main$1l.setup;_sfc_main$1l.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/share.vue"),_sfc_setup$1l?_sfc_setup$1l(e,t):void 0};const Share=_export_sfc(_sfc_main$1l,[["ssrRender",_sfc_ssrRender$1l],["__scopeId","data-v-76ac3b7b"]]),EMOJIS=["\u{1F603}","\u{1F602}","\u{1F605}","\u{1F609}","\u{1F60C}","\u{1F614}","\u{1F613}","\u{1F622}","\u{1F60D}","\u{1F618}","\u{1F61C}","\u{1F621}","\u{1F624}","\u{1F62D}","\u{1F631}","\u{1F633}","\u{1F635}","\u{1F31A}","\u{1F64F}","\u{1F446}","\u{1F447}","\u{1F44C}","\u{1F918}","\u{1F44D}","\u{1F44E}","\u{1F4AA}","\u{1F44F}","\u{1F33B}","\u{1F339}","\u{1F48A}","\u{1F436}","\u2764\uFE0F\u200D\u{1F525}","\u{1F494}","\u{1F4A9}","\u{1F47B}","\u{1F6A9}"];var CommentEvents=(e=>(e.Sort="sort",e.Page="page",e.Vote="vote",e.Blossom="blossom",e.Delete="delete",e.Reply="reply",e.CancelReply="cancelReply",e.Submit="submit",e))(CommentEvents||{});const getDisqusUserURL=e=>`https://disqus.com/by/${e}/`,HAHA_KEYWORDS=["2333","haha","\u54C8\u54C8"],SIX_KEYWORDS=["666","\u8D5E","\u68D2","\u4F18\u79C0"],HEHE_KEYWORDS=["\u5475\u5475"],luanchEmojiRain=e=>{const t=window.$luanchEmojiRain;HAHA_KEYWORDS.find(n=>e.includes(n))?t({speed:12,staggered:!0,increaseSpeed:.4,emoji:getTargetCDNURL("/images/emojis/haha.png")}):SIX_KEYWORDS.find(n=>e.includes(n))?t({speed:12,staggered:!0,increaseSpeed:.4,emoji:getTargetCDNURL("/images/emojis/666.png")}):HEHE_KEYWORDS.find(n=>e.includes(n))?t({staggered:!1,speed:8,increaseSpeed:.04,emoji:getTargetCDNURL("/images/emojis/hehe.png")}):Math.random()<=.5&&t({scale:.6,staggered:!0,speed:8,increaseSpeed:.04,emoji:getTargetCDNURL("/images/emojis/doge.png")})},_sfc_main$1k=defineComponent({name:"CommentTopbar",props:{postId:{type:Number,required:!0},sort:{type:Number,required:!0},total:{type:Number,default:0,required:!1},loaded:{type:Number,default:0,required:!1},fetching:{type:Boolean,required:!0},loading:{type:Boolean,required:!0},plain:{type:Boolean,default:!1}},emits:[CommentEvents.Sort],setup(e,t){const{gtag:n}=useEnhancer(),o=useIdentityStore(),c=computed(()=>o.user),d=computed(()=>e.loading?"\xB7\xB7\xB7":`${e.loaded} / ${e.total}`),g=new Map;return{user:c,statisticsText:d,VALUABLE_LINKS,LanguageKey,UserType,SortType,handleSort:S=>{n==null||n.event("comment_sort_switch",{event_category:GAEventCategories.Comment});const N=Number(S==null?void 0:S.value);N!==e.sort&&t.emit(CommentEvents.Sort,N)},handleDisqusLogin:()=>{n==null||n.event("disqus_login",{event_category:GAEventCategories.Comment,event_label:`id: ${e.postId}`}),openWindow(o.disqusConfig.authorize_url,{name:`Disqus Auth ${META.title}`,onClose:()=>{o.fetchDisqusUserInfo(),console.info("[disqus]","logined",o.user)}})},handleDisqusLogout:()=>{n==null||n.event("disqus_logout",{event_category:GAEventCategories.Comment,event_label:`id: ${e.postId}`}),console.log("[disqus]","logout"),o.fetchDisqusLogout()},handleDisqusThread:async()=>{if(n==null||n.event("disqus_thread_page",{event_category:GAEventCategories.Comment,event_label:`id: ${e.postId}`}),!g.has(e.postId)){const L=await nodepress$1.get("/disqus/thread",{params:{post_id:e.postId}});g.set(e.postId,L.result)}const S=o.disqusConfig.forum,N=g.get(e.postId).slug;window.open(`https://disqus.com/home/discussion/${S}/${N}/`)},handleClearLocalProfile:()=>{o.removeLocalUser()}}}}),topbar_vue_vue_type_style_index_0_scoped_d657e1f0_lang="";function _sfc_ssrRender$1k(e,t,n,o,c,d,g,r){const v=resolveComponent("placeholder"),E=resolveComponent("skeleton-line"),w=resolveComponent("i18n"),T=resolveComponent("divider"),S=resolveComponent("ulink");t(ssrRenderComponent(v,mergeProps({loading:e.fetching},o),{loading:withCtx((N,L,P,O)=>{if(L)L(`<div class="topbar-skeleton" data-v-d657e1f0${O}><div class="left" data-v-d657e1f0${O}>`),L(ssrRenderComponent(E,{class:"skeleton-item count"},null,P,O)),e.plain?L("<!---->"):L(ssrRenderComponent(E,{class:"skeleton-item sort"},null,P,O)),L(`</div><div class="right" data-v-d657e1f0${O}>`),L(ssrRenderComponent(E,{class:"skeleton-item user"},null,P,O)),L("</div></div>");else return[createVNode("div",{class:"topbar-skeleton",key:"skeleton"},[createVNode("div",{class:"left"},[createVNode(E,{class:"skeleton-item count"}),e.plain?createCommentVNode("",!0):(openBlock(),createBlock(E,{key:0,class:"skeleton-item sort"}))]),createVNode("div",{class:"right"},[createVNode(E,{class:"skeleton-item user"})])])]}),default:withCtx((N,L,P,O)=>{var V,D,U,W;if(L)L(`<div class="${ssrRenderClass([{plain:e.plain},"topbar"])}" data-v-d657e1f0${O}><div class="statistics" data-v-d657e1f0${O}><div class="${ssrRenderClass([{loading:e.loading},"total"])}" data-v-d657e1f0${O}><i class="iconfont icon-discussion" data-v-d657e1f0${O}></i>`),L(ssrRenderComponent(w,null,{zh:withCtx((Z,re,ae,ce)=>{if(re)re(` \u5171 <span class="count" data-v-d657e1f0${ce}>${ssrInterpolate(e.statisticsText)}</span> \u6761\u770B\u6CD5 `);else return[createTextVNode(" \u5171 "),createVNode("span",{class:"count"},toDisplayString(e.statisticsText),1),createTextVNode(" \u6761\u770B\u6CD5 ")]}),en:withCtx((Z,re,ae,ce)=>{if(re)re(`<span class="count" data-v-d657e1f0${ce}>${ssrInterpolate(e.statisticsText)}</span> comments `);else return[createVNode("span",{class:"count"},toDisplayString(e.statisticsText),1),createTextVNode(" comments ")]}),_:1},P,O)),L(`</div><select class="sort" name="sort"${ssrRenderAttr("value",e.sort)} data-v-d657e1f0${O}><option${ssrRenderAttr("value",e.SortType.Desc)} data-v-d657e1f0${O}>`),L(ssrRenderComponent(w,{k:e.LanguageKey.COMMENT_SORT_NEW},null,P,O)),L(`</option><option${ssrRenderAttr("value",e.SortType.Hottest)} data-v-d657e1f0${O}>`),L(ssrRenderComponent(w,{k:e.LanguageKey.COMMENT_SORT_HOT},null,P,O)),L(`</option><option${ssrRenderAttr("value",e.SortType.Asc)} data-v-d657e1f0${O}>`),L(ssrRenderComponent(w,{k:e.LanguageKey.COMMENT_SORT_OLD},null,P,O)),L(`</option></select><button class="disqus" data-v-d657e1f0${O}><i class="iconfont icon-disqus-logo" data-v-d657e1f0${O}></i></button></div><div class="user" data-v-d657e1f0${O}>`),e.user.type===e.UserType.Null?(L(`<div class="unlogin" data-v-d657e1f0${O}><span class="guest" data-v-d657e1f0${O}>`),L(ssrRenderComponent(w,{zh:"\u8BBF\u5BA2\u8EAB\u4EFD",en:"Guest"},null,P,O)),L("</span>"),L(ssrRenderComponent(T,{type:"vertical",size:"sm"},null,P,O)),L(`<button class="disqus" data-v-d657e1f0${O}>`),L(ssrRenderComponent(w,null,{zh:withCtx((Z,re,ae,ce)=>{if(re)re(`\u4F7F\u7528<i class="iconfont icon-disqus" data-v-d657e1f0${ce}></i>\u767B\u5F55`);else return[createTextVNode("\u4F7F\u7528"),createVNode("i",{class:"iconfont icon-disqus"}),createTextVNode("\u767B\u5F55")]}),en:withCtx((Z,re,ae,ce)=>{if(re)re(`Login by<i class="iconfont icon-disqus right" data-v-d657e1f0${ce}></i>`);else return[createTextVNode("Login by"),createVNode("i",{class:"iconfont icon-disqus right"})]}),_:1},P,O)),L("</button></div>")):(L(`<div class="logined" data-v-d657e1f0${O}>`),e.user.type===e.UserType.Local?(L(`<!--[--><div class="name" data-v-d657e1f0${O}><i class="icon guest iconfont icon-user" data-v-d657e1f0${O}></i><span class="text" data-v-d657e1f0${O}>${ssrInterpolate(((V=e.user.localProfile)==null?void 0:V.name)||"")}</span><i class="arrow iconfont icon-down-arrow" data-v-d657e1f0${O}></i></div><div class="user-menu" data-v-d657e1f0${O}><ul class="menus" data-v-d657e1f0${O}><li class="item" data-v-d657e1f0${O}><button class="button" data-v-d657e1f0${O}>`),L(ssrRenderComponent(w,null,{zh:withCtx((Z,re,ae,ce)=>{if(re)re(`\u6362\u4E3A<i class="iconfont icon-disqus disqus" data-v-d657e1f0${ce}></i>\u767B\u5F55`);else return[createTextVNode("\u6362\u4E3A"),createVNode("i",{class:"iconfont icon-disqus disqus"}),createTextVNode("\u767B\u5F55")]}),en:withCtx((Z,re,ae,ce)=>{if(re)re(`Login by <i class="iconfont icon-disqus disqus" data-v-d657e1f0${ce}></i>`);else return[createTextVNode("Login by "),createVNode("i",{class:"iconfont icon-disqus disqus"})]}),_:1},P,O)),L(`</button></li><li class="item" data-v-d657e1f0${O}><button class="button" data-v-d657e1f0${O}>`),L(ssrRenderComponent(w,{zh:"\u9000\u51FA\u672C\u5730\u8BBF\u5BA2\u8EAB\u4EFD",en:"Clean local profile"},null,P,O)),L("</button></li></ul></div><!--]-->")):e.user.type===e.UserType.Disqus?(L(`<!--[--><div class="name" data-v-d657e1f0${O}><i class="icon disqus iconfont icon-disqus-logo" data-v-d657e1f0${O}></i><span class="text" data-v-d657e1f0${O}>${ssrInterpolate(((D=e.user.disqusProfile)==null?void 0:D.name)||"")}</span><i class="arrow iconfont icon-down-arrow" data-v-d657e1f0${O}></i></div><div class="user-menu" data-v-d657e1f0${O}><ul class="menus" data-v-d657e1f0${O}><li class="item" data-v-d657e1f0${O}>`),L(ssrRenderComponent(S,{class:"button",href:e.user.disqusProfile.profileUrl},{default:withCtx((Z,re,ae,ce)=>{if(re)re(ssrRenderComponent(w,{zh:"\u8BBF\u95EE Disqus \u4E3B\u9875",en:"Disqus profile"},null,ae,ce));else return[createVNode(w,{zh:"\u8BBF\u95EE Disqus \u4E3B\u9875",en:"Disqus profile"})]}),_:1},P,O)),L(`</li><li class="item" data-v-d657e1f0${O}><button class="button" data-v-d657e1f0${O}>`),L(ssrRenderComponent(w,{zh:"\u6CE8\u9500\u6388\u6743\u8EAB\u4EFD",en:"Disqus logout"},null,P,O)),L("</button></li></ul></div><!--]-->")):L("<!---->"),L("</div>")),L("</div></div>");else return[createVNode("div",{class:["topbar",{plain:e.plain}],key:"element"},[createVNode("div",{class:"statistics"},[createVNode("div",{class:["total",{loading:e.loading}]},[createVNode("i",{class:"iconfont icon-discussion"}),createVNode(w,null,{zh:withCtx(()=>[createTextVNode(" \u5171 "),createVNode("span",{class:"count"},toDisplayString(e.statisticsText),1),createTextVNode(" \u6761\u770B\u6CD5 ")]),en:withCtx(()=>[createVNode("span",{class:"count"},toDisplayString(e.statisticsText),1),createTextVNode(" comments ")]),_:1})],2),createVNode("select",{class:"sort",name:"sort",value:e.sort,onChange:Z=>e.handleSort(Z.target)},[createVNode("option",{value:e.SortType.Desc},[createVNode(w,{k:e.LanguageKey.COMMENT_SORT_NEW},null,8,["k"])],8,["value"]),createVNode("option",{value:e.SortType.Hottest},[createVNode(w,{k:e.LanguageKey.COMMENT_SORT_HOT},null,8,["k"])],8,["value"]),createVNode("option",{value:e.SortType.Asc},[createVNode(w,{k:e.LanguageKey.COMMENT_SORT_OLD},null,8,["k"])],8,["value"])],40,["value","onChange"]),createVNode("button",{class:"disqus",onClick:e.handleDisqusThread},[createVNode("i",{class:"iconfont icon-disqus-logo"})],8,["onClick"])]),createVNode("div",{class:"user"},[e.user.type===e.UserType.Null?(openBlock(),createBlock("div",{key:0,class:"unlogin"},[createVNode("span",{class:"guest"},[createVNode(w,{zh:"\u8BBF\u5BA2\u8EAB\u4EFD",en:"Guest"})]),createVNode(T,{type:"vertical",size:"sm"}),createVNode("button",{class:"disqus",onClick:e.handleDisqusLogin},[createVNode(w,null,{zh:withCtx(()=>[createTextVNode("\u4F7F\u7528"),createVNode("i",{class:"iconfont icon-disqus"}),createTextVNode("\u767B\u5F55")]),en:withCtx(()=>[createTextVNode("Login by"),createVNode("i",{class:"iconfont icon-disqus right"})]),_:1})],8,["onClick"])])):(openBlock(),createBlock("div",{key:1,class:"logined"},[e.user.type===e.UserType.Local?(openBlock(),createBlock(Fragment,{key:0},[createVNode("div",{class:"name"},[createVNode("i",{class:"icon guest iconfont icon-user"}),createVNode("span",{class:"text"},toDisplayString(((U=e.user.localProfile)==null?void 0:U.name)||""),1),createVNode("i",{class:"arrow iconfont icon-down-arrow"})]),createVNode("div",{class:"user-menu"},[createVNode("ul",{class:"menus"},[createVNode("li",{class:"item"},[createVNode("button",{class:"button",onClick:e.handleDisqusLogin},[createVNode(w,null,{zh:withCtx(()=>[createTextVNode("\u6362\u4E3A"),createVNode("i",{class:"iconfont icon-disqus disqus"}),createTextVNode("\u767B\u5F55")]),en:withCtx(()=>[createTextVNode("Login by "),createVNode("i",{class:"iconfont icon-disqus disqus"})]),_:1})],8,["onClick"])]),createVNode("li",{class:"item"},[createVNode("button",{class:"button",onClick:e.handleClearLocalProfile},[createVNode(w,{zh:"\u9000\u51FA\u672C\u5730\u8BBF\u5BA2\u8EAB\u4EFD",en:"Clean local profile"})],8,["onClick"])])])])],64)):e.user.type===e.UserType.Disqus?(openBlock(),createBlock(Fragment,{key:1},[createVNode("div",{class:"name"},[createVNode("i",{class:"icon disqus iconfont icon-disqus-logo"}),createVNode("span",{class:"text"},toDisplayString(((W=e.user.disqusProfile)==null?void 0:W.name)||""),1),createVNode("i",{class:"arrow iconfont icon-down-arrow"})]),createVNode("div",{class:"user-menu"},[createVNode("ul",{class:"menus"},[createVNode("li",{class:"item"},[createVNode(S,{class:"button",href:e.user.disqusProfile.profileUrl},{default:withCtx(()=>[createVNode(w,{zh:"\u8BBF\u95EE Disqus \u4E3B\u9875",en:"Disqus profile"})]),_:1},8,["href"])]),createVNode("li",{class:"item"},[createVNode("button",{class:"button",onClick:e.handleDisqusLogout},[createVNode(w,{zh:"\u6CE8\u9500\u6388\u6743\u8EAB\u4EFD",en:"Disqus logout"})],8,["onClick"])])])])],64)):createCommentVNode("",!0)]))])],2)]}),_:1},n))}const _sfc_setup$1k=_sfc_main$1k.setup;_sfc_main$1k.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/comment/topbar.vue"),_sfc_setup$1k?_sfc_setup$1k(e,t):void 0};const CommentTopbar=_export_sfc(_sfc_main$1k,[["ssrRender",_sfc_ssrRender$1k],["__scopeId","data-v-d657e1f0"]]),_sfc_main$1j=defineComponent({name:"CommentMain",props:{fetching:{type:Boolean,default:!1},hasData:{type:Boolean,required:!0},skeletonCount:{type:Number,default:6}},setup(){return{LanguageKey}}}),main_vue_vue_type_style_index_0_scoped_31048f20_lang="";function _sfc_ssrRender$1j(e,t,n,o,c,d,g,r){const v=resolveComponent("placeholder"),E=resolveComponent("skeleton-base"),w=resolveComponent("skeleton-paragraph"),T=resolveComponent("i18n");t(ssrRenderComponent(v,mergeProps({loading:e.fetching,data:e.hasData},o),{loading:withCtx((S,N,L,P)=>{if(N)N(`<ul class="main-skeleton" data-v-31048f20${P}><!--[-->`),ssrRenderList(e.skeletonCount,O=>{N(`<li class="item" data-v-31048f20${P}><div class="avatar" data-v-31048f20${P}>`),N(ssrRenderComponent(E,null,null,L,P)),N(`</div><div class="content" data-v-31048f20${P}>`),N(ssrRenderComponent(w,{lines:4},null,L,P)),N("</div></li>")}),N("<!--]--></ul>");else return[createVNode("ul",{class:"main-skeleton"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.skeletonCount,O=>(openBlock(),createBlock("li",{key:O,class:"item"},[createVNode("div",{class:"avatar"},[createVNode(E)]),createVNode("div",{class:"content"},[createVNode(w,{lines:4})])]))),128))])]}),placeholder:withCtx((S,N,L,P)=>{if(N)N(`<div class="list-empty" data-v-31048f20${P}>`),N(ssrRenderComponent(T,{k:e.LanguageKey.COMMENT_LIST_EMPTY},null,L,P)),N("</div>");else return[createVNode("div",{class:"list-empty"},[createVNode(T,{k:e.LanguageKey.COMMENT_LIST_EMPTY},null,8,["k"])])]}),default:withCtx((S,N,L,P)=>{if(N)N(`<div class="main" data-v-31048f20${P}>`),ssrRenderSlot(e.$slots,"list",{},null,N,L,P),ssrRenderSlot(e.$slots,"pagination",{},null,N,L,P),N("</div>");else return[createVNode("div",{class:"main"},[renderSlot(e.$slots,"list",{},void 0,!0),renderSlot(e.$slots,"pagination",{},void 0,!0)])]}),_:3},n))}const _sfc_setup$1j=_sfc_main$1j.setup;_sfc_main$1j.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/comment/list/main.vue"),_sfc_setup$1j?_sfc_setup$1j(e,t):void 0};const CommentMain=_export_sfc(_sfc_main$1j,[["ssrRender",_sfc_ssrRender$1j],["__scopeId","data-v-31048f20"]]),getDefaultAvatar=()=>getTargetCDNURL("/images/gravatar.png"),getGravatarByHash=e=>{if(!e)return getDefaultAvatar();const t=`https://www.gravatar.com/avatar/${e}`;return isDev?t:getTargetProxyURL(t,ProxyModule.Default)},getDisqusAvatarByUsername=e=>{const t=`https://disqus.com/api/users/avatars/${e}.jpg`;return isSPA?t:getTargetProxyURL(t,ProxyModule.Disqus)},_sfc_main$1i=defineComponent({name:"Markdown",props:{markdown:String,html:String,tagMap:Object,relink:{type:Boolean,default:!1},sanitize:{type:Boolean,default:!1},plain:{type:Boolean,default:!1},compact:{type:Boolean,default:!1}},setup(e){const{isDarkTheme:t}=useEnhancer(),{element:n}=useLozad(),o=computed(()=>e.markdown?markdownToHTML(e.markdown,{sanitize:e.sanitize,relink:e.relink,tagMap:e.tagMap}):e.html||"");return{element:n,isDarkTheme:t,markdownHTML:o}}}),markdown_vue_vue_type_style_index_0_lang="";function _sfc_ssrRender$1i(e,t,n,o,c,d,g,r){t(`<section${ssrRenderAttrs(mergeProps({ref:"element",class:[e.plain?"global-markdown-plain":"global-markdown-html",{compact:e.compact,dark:e.isDarkTheme}]},o))}>${e.markdownHTML}</section>`)}const _sfc_setup$1i=_sfc_main$1i.setup;_sfc_main$1i.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/common/markdown.vue"),_sfc_setup$1i?_sfc_setup$1i(e,t):void 0};const Markdown=_export_sfc(_sfc_main$1i,[["ssrRender",_sfc_ssrRender$1i]]),_sfc_main$1h=defineComponent({name:"CommentItemLink",props:{href:String}});function _sfc_ssrRender$1h(e,t,n,o,c,d,g,r){e.href?(t(`<a${ssrRenderAttrs(mergeProps({target:"_blank",rel:"external nofollow noopener",href:e.href},e.$attrs,o))}>`),ssrRenderSlot(e.$slots,"default",{},null,t,n),t("</a>")):(t(`<span${ssrRenderAttrs(mergeProps(e.$attrs,o))}>`),ssrRenderSlot(e.$slots,"default",{},null,t,n),t("</span>"))}const _sfc_setup$1h=_sfc_main$1h.setup;_sfc_main$1h.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/comment/list/link.vue"),_sfc_setup$1h?_sfc_setup$1h(e,t):void 0};const CommentLink=_export_sfc(_sfc_main$1h,[["ssrRender",_sfc_ssrRender$1h]]),OFFSET=127397,countryCodeToEmoji=e=>e.toUpperCase().replace(/./g,t=>String.fromCodePoint(t.charCodeAt(0)+OFFSET)),municipalitys=["Shanghai","Beijing","Tianjin","Chongqing","Chungking"],_sfc_main$1g=defineComponent({name:"CommentItemLocation",props:{location:{type:Object,required:!0}},setup(e){const t=computed(()=>e.location.country_code||e.location.country),n=computed(()=>countryCodeToEmoji(e.location.country_code)),o=computed(()=>e.location.country_code==="CN"&&municipalitys.includes(e.location.region)?e.location.region:e.location.city);return{emojiText:n,countryText:t,cityText:o}}}),location_vue_vue_type_style_index_0_scoped_546f45d5_lang="";function _sfc_ssrRender$1g(e,t,n,o,c,d,g,r){t(`<span${ssrRenderAttrs(mergeProps({class:"location"},o))} data-v-546f45d5>`),e.emojiText?t(`<span class="emoji" data-v-546f45d5>${ssrInterpolate(e.emojiText)}</span>`):t('<i class="iconfont icon-earth" data-v-546f45d5></i>'),t(`<span data-v-546f45d5>${ssrInterpolate(e.countryText)}</span><span class="separator" data-v-546f45d5>\u2022</span><span class="city" data-v-546f45d5>${ssrInterpolate(e.cityText)}</span></span>`)}const _sfc_setup$1g=_sfc_main$1g.setup;_sfc_main$1g.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/comment/list/location.vue"),_sfc_setup$1g?_sfc_setup$1g(e,t):void 0};const CommentLocation=_export_sfc(_sfc_main$1g,[["ssrRender",_sfc_ssrRender$1g],["__scopeId","data-v-546f45d5"]]),osIconsNameMap={"Mac OS":"icon-apple",Windows:"icon-windows",Android:"icon-android",Ubuntu:"icon-ubuntu",Linux:"icon-linux",iOS:"icon-apple"},browersIconsNameMap={Chrome:"icon-chrome",Chromium:"icon-chrome",WeChat:"icon-wechat",QQ:"icon-qq",Safari:"icon-safari","Mobile Safari":"icon-safari",UCBrowser:"icon-uc",Maxthon:"icon-maxthon",Firefox:"icon-firefox",IE:"icon-ie",Opera:"icon-opera",Edge:"icon-edge"},_sfc_main$1f=defineComponent({name:"CommentItemUserAgent",props:{userAgent:{type:String,required:!0}},setup(e){const t=computed(()=>uaParser(e.userAgent)),n=computed(()=>{const c=t.value.result.os.name;return c&&osIconsNameMap[c]}),o=computed(()=>{const c=t.value.result.browser.name;return c?browersIconsNameMap[c]:null});return{uaResult:t,osIconName:n,browserIconName:o}}}),userAgent_vue_vue_type_style_index_0_scoped_e19c7474_lang="";function _sfc_ssrRender$1f(e,t,n,o,c,d,g,r){t(`<span${ssrRenderAttrs(mergeProps({class:"user-agent"},o))} data-v-e19c7474><span class="os" data-v-e19c7474>`),e.osIconName?t(`<i class="${ssrRenderClass([e.osIconName,"iconfont"])}" data-v-e19c7474></i>`):t("<!---->"),t(`<span data-v-e19c7474>${ssrInterpolate(e.uaResult.result.os.name)}</span></span><span class="browser" data-v-e19c7474>`),e.browserIconName?t(`<i class="${ssrRenderClass([e.browserIconName,"iconfont"])}" data-v-e19c7474></i>`):t("<!---->"),t(`<span data-v-e19c7474>${ssrInterpolate(e.uaResult.result.browser.name)}</span></span></span>`)}const _sfc_setup$1f=_sfc_main$1f.setup;_sfc_main$1f.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/comment/list/user-agent.vue"),_sfc_setup$1f?_sfc_setup$1f(e,t):void 0};const CommentUserAgent=_export_sfc(_sfc_main$1f,[["ssrRender",_sfc_ssrRender$1f],["__scopeId","data-v-e19c7474"]]),_sfc_main$1e=defineComponent({name:"CommentItem",components:{Markdown,CommentLink,CommentLocation,CommentUserAgent},props:{comment:{type:Object,required:!0},liked:{type:Boolean,default:!1},disliked:{type:Boolean,default:!1},isReply:{type:Boolean,default:!1},isChild:{type:Boolean,default:!1},hasChild:{type:Boolean,default:!1},hiddenAvatar:{type:Boolean,default:!1},hiddenUa:{type:Boolean,default:!1},plainVote:{type:Boolean,default:!1}},emits:[CommentEvents.Vote,CommentEvents.Delete,CommentEvents.Reply,CommentEvents.CancelReply],setup(e,t){const{i18n:n}=useEnhancer(),o=useCommentStore(),c=useIdentityStore(),d=computed(()=>o.deleting),g=computed(()=>getExtendValue(e.comment.extends,"disqus-author-id")),r=computed(()=>getExtendValue(e.comment.extends,"disqus-author-username")),v=computed(()=>Boolean(g.value)),E=computed(()=>Boolean(r.value)&&Boolean(c.disqusConfig)&&r.value===c.disqusConfig.admin_username),w=computed(()=>r.value?getDisqusAvatarByUsername(r.value):getGravatarByHash(e.comment.author.email_hash)),T=computed(()=>e.comment.author.site?e.comment.author.site:r.value?getDisqusUserURL(r.value):UNDEFINED),S=computed(()=>{var U;return c.user.type===UserType.Disqus&&g.value?((U=c.user.disqusProfile)==null?void 0:U.id)===g.value:!1});return{LanguageKey,isDeleting:d,isDisqusAuthor:v,isAdminAuthor:E,isDeleteable:S,authorAvatar:w,authorURL:T,getCommentItemElementID,getReplyParentCommentText:U=>{var ae;const W=(ae=o.comments.find(ce=>ce.id===U))==null?void 0:ae.author.name,Z=W?`@${W}`:"";return`${`#${U}`} ${Z}`},firstUpperCase,handleVote:U=>{t.emit(CommentEvents.Vote,e.comment.id,U)},handleDelete:()=>{window.confirm(n.t(LanguageKey.COMMENT_DELETE_CONFIRM))&&t.emit(CommentEvents.Delete,e.comment.id)},handleReply:()=>{t.emit(CommentEvents.Reply,e.comment.id)},handleCancelReply:()=>{t.emit(CommentEvents.CancelReply,e.comment.id)},scrollToCommentItem:U=>{scrollToAnchor(getCommentItemElementID(U),-300)}}}}),item_vue_vue_type_style_index_0_scoped_cac89891_lang="";function _sfc_ssrRender$1e(e,t,n,o,c,d,g,r){const v=resolveComponent("comment-link"),E=resolveComponent("i18n"),w=resolveComponent("comment-location"),T=resolveComponent("comment-user-agent"),S=resolveComponent("markdown"),N=resolveComponent("udate");t(`<li${ssrRenderAttrs(mergeProps({class:["comment-item",{"hide-avatar":e.hiddenAvatar,"is-child":e.isChild,"has-child":e.hasChild}],key:e.comment.id,id:e.getCommentItemElementID(e.comment.id)},o))} data-v-cac89891><div data-v-cac89891>`),e.hiddenAvatar?t("<!---->"):(t('<div class="cm-avatar" data-v-cac89891>'),t(ssrRenderComponent(v,{class:"link",href:e.authorURL},{default:withCtx((L,P,O,V)=>{if(P)P(`<img${ssrRenderAttr("src",e.authorAvatar)}${ssrRenderAttr("alt",e.comment.author.name)} draggable="false" data-v-cac89891${V}><span class="${ssrRenderClass([e.isDisqusAuthor?"disqus":"anonymous","role"])}" data-v-cac89891${V}>`),e.isDisqusAuthor?P(`<i class="iconfont icon-disqus-logo" data-v-cac89891${V}></i>`):P(`<i class="iconfont icon-user" data-v-cac89891${V}></i>`),P("</span>");else return[createVNode("img",{src:e.authorAvatar,alt:e.comment.author.name,draggable:"false"},null,8,["src","alt"]),createVNode("span",{class:["role",e.isDisqusAuthor?"disqus":"anonymous"]},[e.isDisqusAuthor?(openBlock(),createBlock("i",{key:0,class:"iconfont icon-disqus-logo"})):(openBlock(),createBlock("i",{key:1,class:"iconfont icon-user"}))],2)]}),_:1},n)),t("</div>")),t('<div class="cm-body" data-v-cac89891><div class="cm-header" data-v-cac89891><div class="left" data-v-cac89891>'),t(ssrRenderComponent(v,{class:["username",{url:Boolean(e.authorURL)}],href:e.authorURL},{default:withCtx((L,P,O,V)=>{if(P)P(`${ssrInterpolate(e.firstUpperCase(e.comment.author.name))}`);else return[createTextVNode(toDisplayString(e.firstUpperCase(e.comment.author.name)),1)]}),_:1},n)),e.isAdminAuthor?(t('<span class="moderator" data-v-cac89891>'),t(ssrRenderComponent(E,{k:e.LanguageKey.COMMENT_MODERATOR},null,n)),t("</span>")):t("<!---->"),t('<span class="author-info" data-v-cac89891>'),e.comment.ip_location?t(ssrRenderComponent(w,{location:e.comment.ip_location},null,n)):t("<!---->"),e.comment.agent&&!e.hiddenUa?t(ssrRenderComponent(T,{"user-agent":e.comment.agent},null,n)):t("<!---->"),t(`</span></div><div class="right" data-v-cac89891><span class="flool" data-v-cac89891>#${ssrInterpolate(e.comment.id)}</span></div></div><div class="cm-content" data-v-cac89891>`),e.comment.pid?(t('<p class="reply" data-v-cac89891><span class="text" data-v-cac89891>'),t(ssrRenderComponent(E,{k:e.LanguageKey.COMMENT_REPLY},null,n)),t(`</span><button class="parent" data-v-cac89891>${ssrInterpolate(e.getReplyParentCommentText(e.comment.pid))}</button>`),t(ssrRenderComponent(E,{zh:"\uFF1A",en:":"},null,n)),t("</p>")):t("<!---->"),t('<div class="markdown" data-v-cac89891>'),t(ssrRenderComponent(S,{markdown:e.comment.content,sanitize:!0,compact:!0},null,n)),t('</div></div><div class="cm-footer" data-v-cac89891><div class="left" data-v-cac89891><span class="create_at" data-v-cac89891>'),t(ssrRenderComponent(N,{to:"ago",date:e.comment.create_at},null,n)),t(`</span><button class="${ssrRenderClass([{actived:e.liked,alived:Boolean(e.comment.likes)},"vote"])}"${includeBooleanAttr(e.liked)?" disabled":""} data-v-cac89891><i class="iconfont icon-like" data-v-cac89891></i>`),e.plainVote?t("<!---->"):t(ssrRenderComponent(E,{k:e.LanguageKey.COMMENT_UPVOTE},null,n)),t(`<span class="count" data-v-cac89891>(${ssrInterpolate(e.comment.likes)})</span></button><button class="${ssrRenderClass([{actived:e.disliked,alived:Boolean(e.comment.dislikes)},"vote"])}"${includeBooleanAttr(e.disliked)?" disabled":""} data-v-cac89891><i class="iconfont icon-dislike" data-v-cac89891></i>`),e.plainVote?t("<!---->"):t(ssrRenderComponent(E,{k:e.LanguageKey.COMMENT_DOWNVOTE},null,n)),t(`<span class="count" data-v-cac89891>(${ssrInterpolate(e.comment.dislikes)})</span></button>`),e.isReply?(t('<button class="reply" data-v-cac89891><i class="iconfont icon-cancel" data-v-cac89891></i>'),t(ssrRenderComponent(E,{k:e.LanguageKey.COMMENT_REPLY_CANCEL},null,n)),t("</button>")):(t('<button class="reply" data-v-cac89891><i class="iconfont icon-reply" data-v-cac89891></i>'),t(ssrRenderComponent(E,{k:e.LanguageKey.COMMENT_REPLY},null,n)),t("</button>")),t('</div><div class="right" data-v-cac89891>'),e.isDeleteable?(t(`<button class="delete"${includeBooleanAttr(e.isDeleting)?" disabled":""} data-v-cac89891><i class="iconfont icon-delete" data-v-cac89891></i>`),t(ssrRenderComponent(E,{k:e.LanguageKey.COMMENT_DELETE},null,n)),t("</button>")):t("<!---->"),t("</div></div>"),e.isReply?(t('<div class="cm-reply" data-v-cac89891>'),ssrRenderSlot(e.$slots,"reply",{},null,t,n),t("</div>")):t("<!---->"),t('<div class="cm-children" data-v-cac89891>'),ssrRenderSlot(e.$slots,"children",{},null,t,n),t("</div></div></div></li>")}const _sfc_setup$1e=_sfc_main$1e.setup;_sfc_main$1e.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/comment/list/item.vue"),_sfc_setup$1e?_sfc_setup$1e(e,t):void 0};const CommentItem=_export_sfc(_sfc_main$1e,[["ssrRender",_sfc_ssrRender$1e],["__scopeId","data-v-cac89891"]]),_sfc_main$1d=defineComponent({name:"CommentList",components:{CommentItem},props:{comments:{type:Array,required:!0},replyPid:{type:Number,required:!0},isChildList:{type:Boolean,default:!1},hiddenAvatar:{type:Boolean,default:!1},hiddenUa:{type:Boolean,default:!1},plainVote:{type:Boolean,required:!1}},emits:[CommentEvents.Reply,CommentEvents.Delete,CommentEvents.CancelReply],setup(e,t){const{i18n:n,gtag:o}=useEnhancer(),{comment:c,identity:d}=useStores(),g=T=>{t.emit(CommentEvents.Reply,T)},r=T=>{t.emit(CommentEvents.CancelReply,T)},v=async T=>{t.emit(CommentEvents.Delete,T)},E=async(T,S)=>{if(o==null||o.event("vote_comment",{event_category:GAEventCategories.Comment,event_label:S?"like":"dislike"}),S&&d.isLikedComment(T)||!S&&d.isDislikedComment(T))return!1;try{await c.postCommentVote(T,S?1:-1),S?d.likeComment(T):d.dislikeComment(T)}catch(N){const L=n.t(LanguageKey.POST_ACTION_ERROR);console.warn(L,N),alert(L)}},w=T=>T.map(S=>({comment:S,children:[]}));return{isLikedComment:d.isLikedComment,isDislikedComment:d.isDislikedComment,handleVoteComment:E,handleDeleteComment:v,handleReplyComment:g,handleCancelReply:r,buildeCommentTree:w}}}),list_vue_vue_type_style_index_0_scoped_d3edbdab_lang="";function _sfc_ssrRender$1d(e,t,n,o,c,d,g,r){const v=resolveComponent("comment-item"),E=resolveComponent("comment-list");t(`<ul${ssrRenderAttrs(mergeProps({class:["comment-list",e.isChildList?"child":"root"]},o))} data-v-d3edbdab><!--[-->`),ssrRenderList(e.comments,w=>{t(ssrRenderComponent(v,{key:w.comment.id,comment:w.comment,liked:e.isLikedComment(w.comment.id),disliked:e.isDislikedComment(w.comment.id),"has-child":Boolean(w.children.length),"is-child":e.isChildList,"is-reply":e.replyPid===w.comment.id,"hidden-avatar":e.hiddenAvatar,"hidden-ua":e.hiddenUa,"plain-vote":e.plainVote,onVote:e.handleVoteComment,onDelete:e.handleDeleteComment,onReply:e.handleReplyComment,onCancelReply:e.handleCancelReply},createSlots({reply:withCtx((T,S,N,L)=>{if(S)ssrRenderSlot(e.$slots,"reply",{comment:w.comment,isChild:!1},null,S,N,L);else return[renderSlot(e.$slots,"reply",{comment:w.comment,isChild:!1},void 0,!0)]}),_:2},[w.children.length?{name:"children",fn:withCtx((T,S,N,L)=>{if(S)S(ssrRenderComponent(E,{comments:e.buildeCommentTree(w.children),"is-child-list":!0,"hidden-avatar":e.hiddenAvatar,"hidden-ua":e.hiddenUa,"plain-vote":e.plainVote,"reply-pid":e.replyPid,onDelete:e.handleDeleteComment,onReply:e.handleReplyComment,onCancelReply:e.handleCancelReply},{reply:withCtx((P,O,V,D)=>{if(O)ssrRenderSlot(e.$slots,"reply",{comment:w.comment,isChild:!0},null,O,V,D);else return[renderSlot(e.$slots,"reply",{comment:w.comment,isChild:!0},void 0,!0)]}),_:2},N,L));else return[createVNode(E,{comments:e.buildeCommentTree(w.children),"is-child-list":!0,"hidden-avatar":e.hiddenAvatar,"hidden-ua":e.hiddenUa,"plain-vote":e.plainVote,"reply-pid":e.replyPid,onDelete:e.handleDeleteComment,onReply:e.handleReplyComment,onCancelReply:e.handleCancelReply},{reply:withCtx(()=>[renderSlot(e.$slots,"reply",{comment:w.comment,isChild:!0},void 0,!0)]),_:2},1032,["comments","hidden-avatar","hidden-ua","plain-vote","reply-pid","onDelete","onReply","onCancelReply"])]}),key:"0"}:void 0]),n))}),t("<!--]--></ul>")}const _sfc_setup$1d=_sfc_main$1d.setup;_sfc_main$1d.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/comment/list/list.vue"),_sfc_setup$1d?_sfc_setup$1d(e,t):void 0};const CommentList=_export_sfc(_sfc_main$1d,[["ssrRender",_sfc_ssrRender$1d],["__scopeId","data-v-d3edbdab"]]),_sfc_main$1c=defineComponent({name:"CommentPagination",props:{fetching:{type:Boolean,required:!0},remain:{type:Number,required:!0},pagination:{type:Object,required:!1}},setup(e,t){const{gtag:n}=useEnhancer(),o=computed(()=>{var d,g,r;return((d=e.pagination)==null?void 0:d.total_page)>1&&((g=e.pagination)==null?void 0:g.current_page)!==((r=e.pagination)==null?void 0:r.total_page)});return{COMMENT_FOOTER_ELEMENT_ID,hasMore:o,handleLoadmore:()=>{n==null||n.event("loadmore",{event_category:GAEventCategories.Comment}),e.pagination&&t.emit(CommentEvents.Page,e.pagination.current_page+1)}}}}),loadmore_vue_vue_type_style_index_0_scoped_7dfa5296_lang="";function _sfc_ssrRender$1c(e,t,n,o,c,d,g,r){const v=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:"loadmore",id:e.COMMENT_FOOTER_ELEMENT_ID},o))} data-v-7dfa5296>`),e.hasMore?(t(`<button class="button"${includeBooleanAttr(e.fetching)?" disabled":""} data-v-7dfa5296>`),e.fetching?t(ssrRenderComponent(v,{zh:"\u52A0\u8F7D\u4E2D...",en:"Loading..."},null,n)):(t("<!--[-->"),t(ssrRenderComponent(v,null,{zh:withCtx((E,w,T,S)=>{if(w)w(`\u52A0\u8F7D\u66F4\u591A\u8BC4\u8BBA\uFF08\u5269 ${ssrInterpolate(e.remain)} \u6761\uFF09`);else return[createTextVNode("\u52A0\u8F7D\u66F4\u591A\u8BC4\u8BBA\uFF08\u5269 "+toDisplayString(e.remain)+" \u6761\uFF09",1)]}),en:withCtx((E,w,T,S)=>{if(w)w(`Loadmore (remain ${ssrInterpolate(e.remain)})`);else return[createTextVNode("Loadmore (remain "+toDisplayString(e.remain)+")",1)]}),_:1},n)),t('<i class="iconfont icon-loadmore" data-v-7dfa5296></i><!--]-->')),t("</button>")):(t('<span class="no-more" data-v-7dfa5296>'),t(ssrRenderComponent(v,{zh:"\u6C34\u5C3D\u5C71\u7A77",en:"NO MORE"},null,n)),t("</span>")),t("</div>")}const _sfc_setup$1c=_sfc_main$1c.setup;_sfc_main$1c.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/comment/loadmore.vue"),_sfc_setup$1c?_sfc_setup$1c(e,t):void 0};const CommentLoadmore=_export_sfc(_sfc_main$1c,[["ssrRender",_sfc_ssrRender$1c],["__scopeId","data-v-7dfa5296"]]),_sfc_main$1b=defineComponent({name:"CommentPublisherMain",props:{fetching:{type:Boolean,default:!1}}}),main_vue_vue_type_style_index_0_scoped_69c1136c_lang="";function _sfc_ssrRender$1b(e,t,n,o,c,d,g,r){const v=resolveComponent("placeholder"),E=resolveComponent("skeleton-base");t(ssrRenderComponent(v,mergeProps({loading:e.fetching},o),{loading:withCtx((w,T,S,N)=>{if(T)T(`<div class="publisher-skeleton" data-v-69c1136c${N}><div class="avatar" data-v-69c1136c${N}>`),T(ssrRenderComponent(E,null,null,S,N)),T(`</div><div class="content" data-v-69c1136c${N}>`),T(ssrRenderComponent(E,null,null,S,N)),T("</div></div>");else return[createVNode("div",{class:"publisher-skeleton",key:"skeleton"},[createVNode("div",{class:"avatar"},[createVNode(E)]),createVNode("div",{class:"content"},[createVNode(E)])])]}),default:withCtx((w,T,S,N)=>{if(T)ssrRenderSlot(e.$slots,"default",{},null,T,S,N);else return[renderSlot(e.$slots,"default",{},void 0,!0)]}),_:3},n))}const _sfc_setup$1b=_sfc_main$1b.setup;_sfc_main$1b.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/comment/publisher/main.vue"),_sfc_setup$1b?_sfc_setup$1b(e,t):void 0};const CommentPublisherMain=_export_sfc(_sfc_main$1b,[["ssrRender",_sfc_ssrRender$1b],["__scopeId","data-v-69c1136c"]]),_sfc_main$1a=defineComponent({name:"CommentPublisher",props:{id:{type:String,required:!1},disabled:{type:Boolean,default:!1},profile:{type:Object,required:!0},total:{type:Number,default:0,required:!1},bordered:{type:Boolean,default:!1},defaultBlossomed:{type:Boolean,default:!0},hiddenAvatar:{type:Boolean,required:!1},fixedAvatar:{type:Boolean,required:!1}},emits:[CommentEvents.Blossom,"update:profile"],setup(e,t){const{i18n:n,gtag:o}=useEnhancer(),{user:c}=pinia_prod.storeToRefs(useIdentityStore()),d=computed(()=>{var E,w;return c.value.type===UserType.Local?getGravatarByHash((E=c.value.localProfile)==null?void 0:E.email_hash):c.value.type===UserType.Disqus?getDisqusAvatarByUsername((w=c.value.disqusProfile)==null?void 0:w.username):getDefaultAvatar()}),g=(E,w)=>{t.emit("update:profile",{...e.profile,[E]:w.target.value})},r=ref(e.defaultBlossomed),v=()=>{r.value=!0,t.emit(CommentEvents.Blossom),o==null||o.event("focus_publisher",{event_category:GAEventCategories.Comment})};return{user:c,avatar:d,blossomed:r,UserType,LanguageKey,t:n.t,firstUpperCase,handleUpdateProfile:g,handleBlossom:v}}}),publisher_vue_vue_type_style_index_0_scoped_57e134b8_lang="";function _sfc_ssrRender$1a(e,t,n,o,c,d,g,r){const v=resolveComponent("uimage"),E=resolveComponent("i18n");t(`<form${ssrRenderAttrs(mergeProps({key:"publisher",class:["publisher",{"hidden-avatar":e.hiddenAvatar,"fixed-avatar":e.fixedAvatar,blossomed:e.blossomed,bordered:e.bordered}],name:"comment",id:e.id},o))} data-v-57e134b8>`),e.user.type===e.UserType.Null?t(`<div class="profile" style="${ssrRenderStyle(e.blossomed?null:{display:"none"})}" data-v-57e134b8><div class="name" data-v-57e134b8><input${ssrRenderAttr("value",e.profile.name)} required type="text" name="name" autocomplete="on"${includeBooleanAttr(e.disabled)?" disabled":""}${ssrRenderAttr("placeholder",e.t(e.LanguageKey.COMMENT_POST_NAME)+" *")} data-v-57e134b8></div><div class="email" data-v-57e134b8><input${ssrRenderAttr("value",e.profile.email)} required type="email" name="email" autocomplete="on"${includeBooleanAttr(e.disabled)?" disabled":""}${ssrRenderAttr("placeholder",e.t(e.LanguageKey.COMMENT_POST_EMAIL)+" *")} data-v-57e134b8></div><div class="site" data-v-57e134b8><input${ssrRenderAttr("value",e.profile.site)} type="url" name="url" autocomplete="on"${includeBooleanAttr(e.disabled)?" disabled":""}${ssrRenderAttr("placeholder",e.t(e.LanguageKey.COMMENT_POST_SITE))} data-v-57e134b8></div></div>`):t("<!---->"),t('<div class="postbox" data-v-57e134b8>'),e.hiddenAvatar?t("<!---->"):(t('<div class="avatar" data-v-57e134b8>'),t(ssrRenderComponent(v,{alt:e.profile.name,src:e.avatar},null,n)),t("</div>")),e.blossomed?(t('<div class="editor" data-v-57e134b8>'),ssrRenderSlot(e.$slots,"pen",{},null,t,n),t("</div>")):(t('<div class="placeholder" data-v-57e134b8>'),t(ssrRenderComponent(E,{zh:"\u5728\u4E0B\u6709\u4E00\u62D9\u89C1\uFF0C\u4E0D\u77E5...",en:`${e.total?"Join":"Start"} the discussion...`},null,n)),t("</div>")),t("</div></form>")}const _sfc_setup$1a=_sfc_main$1a.setup;_sfc_main$1a.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/comment/publisher/publisher.vue"),_sfc_setup$1a?_sfc_setup$1a(e,t):void 0};const CommentPublisher=_export_sfc(_sfc_main$1a,[["ssrRender",_sfc_ssrRender$1a],["__scopeId","data-v-57e134b8"]]),focusPosition=(e,t=0)=>{var d;if(!e)return;if(e.focus(),!t){const g=(d=window.getSelection())==null?void 0:d.getRangeAt(0),r=g.cloneRange();return r.selectNodeContents(e),r.setEnd(g.endContainer,g.endOffset),r.toString().length}let n=0,o=!1;const c=g=>{const r=g.childNodes;for(let v=0;v<r.length;++v){const E=r[v],w=E.nodeType===1&&E.tagName==="BR";if(E.nodeType!==3&&!w){c(E);return}if(n+=w?1:E.textContent.length,n>=t){if(o){c(E);return}o=!0;const T=document.getSelection(),S=document.createRange(),N=n-E.textContent.length;S.setStart(E,t-N),S.setEnd(E,t-N),T.removeAllRanges(),T.addRange(S);break}}};c(e)},insertContent=e=>{const{element:t,content:n}=e,[o,c]=Array.isArray(n)?n:[n];if(!t||!o&&!c)return!1;const d=t.innerText,g=(window.getSelection||document.getSelection)(),r=g==null?void 0:g.toString();if(r){const E=!!o&&!c?o:o+r+c,w=d.replace(r,E);t.innerText=w,focusPosition(t,w.indexOf(E)+E.length-1)}else{const v=o+c,E=(()=>{try{return g.getRangeAt(0)}catch{}})(),w=E==null?void 0:E.startOffset,T=E==null?void 0:E.endOffset;if(E&&w===T&&w>0){const S=[d.slice(0,w),v,d.slice(w)];t.innerText=S.join(""),focusPosition(t,S[0].length+S[1].length-1)}else{const S=d+v;t.innerText=S,focusPosition(t,S.length-1)}}},_sfc_main$19=defineComponent({name:"CommentPen",components:{Markdown},props:{modelValue:{type:String,required:!1},disabled:{type:Boolean,default:!1},previewed:{type:Boolean,default:!1},posting:{type:Boolean,required:!0},bordered:{type:Boolean,required:!1},autoFocus:{type:Boolean,default:!1},hiddenStationery:{type:Boolean,default:!1}},emits:["update:modelValue","update:previewed",CommentEvents.Submit],setup(e,t){const{i18n:n}=useEnhancer(),{user:o}=pinia_prod.storeToRefs(useIdentityStore()),c=ref(e.modelValue||""),d=ref(e.previewed||!1),g=ref();let r=null;const v=()=>{d.value=!d.value,t.emit("update:previewed",d.value)},E=()=>{var V;const O=(V=g.value)==null?void 0:V.innerText;O!==c.value&&(c.value=O,t.emit("update:modelValue",O))},w=O=>{O.preventDefault(),t.emit(CommentEvents.Submit,c.value)},T=(O,V="")=>{insertContent({element:g.value,content:[O,V]}),E()},S=O=>{T(` ${O} `)},N=()=>{T(" ![","](https://) ")},L=()=>{T(" [","](https://) ")},P=()=>{T("\n```javascript\n","\n```\n")};return watch(()=>e.modelValue,(O="")=>{O!==c.value&&(c.value=O,g.value&&(g.value.innerText=O))}),watch(()=>e.previewed,O=>{O!==d.value&&(d.value=O)}),onMounted(()=>{e.autoFocus&&nextTick$1().then(()=>{g.value&&focusPosition(g.value)}),r=new MutationObserver(()=>E()),r.observe(g.value,{attributes:!0,characterData:!0,childList:!0,subtree:!0})}),onBeforeUnmount(()=>{r==null||r.disconnect()}),{t:n.t,user:o,UserType,EMOJIS,VALUABLE_LINKS,LanguageKey,inputElement:g,content:c,isPreviewed:d,insertEmoji:S,insertImage:N,insertLink:L,insertCode:P,handleInputChange:E,handleTogglePreview:v,handleSubmit:w,enableCopyrighter,disableCopyrighter}}}),pen_vue_vue_type_style_index_0_scoped_41adcf04_lang="";function _sfc_ssrRender$19(e,t,n,o,c,d,g,r){const v=resolveComponent("markdown"),E=resolveComponent("ulink"),w=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:["pen",{bordered:e.bordered}]},o))} data-v-41adcf04><div class="markdown" data-v-41adcf04><div class="markdown-input"${ssrRenderAttr("contenteditable",!e.disabled)}${ssrRenderAttr("placeholder",e.t(e.LanguageKey.COMMENT_POST_PLACEHOLDER))} data-v-41adcf04></div>`),e.isPreviewed?(t('<div class="preview-content" data-v-41adcf04>'),t(ssrRenderComponent(v,{markdown:e.content,sanitize:!0,compact:!0},null,n)),t("</div>")):t("<!---->"),t('</div><div class="pencilbox" data-v-41adcf04><div class="stationery" data-v-41adcf04>'),t(ssrRenderComponent(E,{class:"markdown",title:"markdown",href:e.VALUABLE_LINKS.MARKDOWN},{default:withCtx((T,S,N,L)=>{if(S)S(`<i class="iconfont icon-markdown" data-v-41adcf04${L}></i>`);else return[createVNode("i",{class:"iconfont icon-markdown"})]}),_:1},n)),e.hiddenStationery?t("<!---->"):(t(`<!--[--><button class="emoji" title="emoji" type="button"${includeBooleanAttr(e.disabled||e.isPreviewed)?" disabled":""} data-v-41adcf04><i class="iconfont icon-emoji" data-v-41adcf04></i><div class="emoji-box" data-v-41adcf04><ul class="emoji-list" data-v-41adcf04><!--[-->`),ssrRenderList(e.EMOJIS,(T,S)=>{t(`<li class="item" data-v-41adcf04>${ssrInterpolate(T)}</li>`)}),t(`<!--]--></ul></div></button><button class="image" title="image"${includeBooleanAttr(e.disabled||e.isPreviewed)?" disabled":""} data-v-41adcf04><i class="iconfont icon-image" data-v-41adcf04></i></button><button class="link" title="link"${includeBooleanAttr(e.disabled||e.isPreviewed)?" disabled":""} data-v-41adcf04><i class="iconfont icon-link" data-v-41adcf04></i></button><button class="code" title="code"${includeBooleanAttr(e.disabled||e.isPreviewed)?" disabled":""} data-v-41adcf04><i class="iconfont icon-code" data-v-41adcf04></i></button><button title="preview" class="${ssrRenderClass([{actived:e.isPreviewed},"preview"])}"${includeBooleanAttr(e.disabled)?" disabled":""} data-v-41adcf04><i class="${ssrRenderClass([e.isPreviewed?"icon-eye-close":"icon-eye","iconfont"])}" data-v-41adcf04></i></button><!--]-->`)),t(`</div><button type="submit" class="submit"${includeBooleanAttr(e.disabled)?" disabled":""} data-v-41adcf04>`),e.posting?t(ssrRenderComponent(w,{zh:"\u53D1\u5E03\u4E2D...",en:"Posting..."},null,n)):e.user.type===e.UserType.Local?t(ssrRenderComponent(w,null,{zh:withCtx((T,S,N,L)=>{var P,O;if(S)S(`\u4EE5 ${ssrInterpolate((P=e.user.localProfile)==null?void 0:P.name)} \u7684\u8EAB\u4EFD\u53D1\u5E03`);else return[createTextVNode("\u4EE5 "+toDisplayString((O=e.user.localProfile)==null?void 0:O.name)+" \u7684\u8EAB\u4EFD\u53D1\u5E03",1)]}),en:withCtx((T,S,N,L)=>{var P,O;if(S)S(`Post as ${ssrInterpolate((P=e.user.localProfile)==null?void 0:P.name)}`);else return[createTextVNode("Post as "+toDisplayString((O=e.user.localProfile)==null?void 0:O.name),1)]}),_:1},n)):e.user.type===e.UserType.Disqus?t(ssrRenderComponent(w,null,{zh:withCtx((T,S,N,L)=>{var P,O;if(S)S(`\u4EE5 ${ssrInterpolate((P=e.user.disqusProfile)==null?void 0:P.name)} \u7684\u8EAB\u4EFD\u53D1\u5E03`);else return[createTextVNode("\u4EE5 "+toDisplayString((O=e.user.disqusProfile)==null?void 0:O.name)+" \u7684\u8EAB\u4EFD\u53D1\u5E03",1)]}),en:withCtx((T,S,N,L)=>{var P,O;if(S)S(`Post as ${ssrInterpolate((P=e.user.disqusProfile)==null?void 0:P.name)}`);else return[createTextVNode("Post as "+toDisplayString((O=e.user.disqusProfile)==null?void 0:O.name),1)]}),_:1},n)):t(ssrRenderComponent(w,{zh:"\u53D1\u5E03",en:"Publish"},null,n)),t('<i class="iconfont icon-mail-plane" data-v-41adcf04></i></button></div></div>')}const _sfc_setup$19=_sfc_main$19.setup;_sfc_main$19.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/comment/publisher/pen.vue"),_sfc_setup$19?_sfc_setup$19(e,t):void 0};const CommentPen=_export_sfc(_sfc_main$19,[["ssrRender",_sfc_ssrRender$19],["__scopeId","data-v-41adcf04"]]),_sfc_main$18=defineComponent({name:"Dsiqus",components:{CommentTopbar,CommentMain,CommentList,CommentLoadmore,CommentPublisherMain,CommentPublisher,CommentPen},props:{postId:{type:Number,required:!0},fetching:{type:Boolean,default:!1},plain:{type:Boolean,default:!1}},setup(e){const{i18n:t,gtag:n,globalState:o}=useEnhancer(),c=useIdentityStore(),d=useCommentStore(),g=computed(()=>d.posting),r=computed(()=>d.fetching),v=computed(()=>e.fetching||!d.comments.length&&d.fetching);let E;(ie=>{ie.Root="root",ie.Reply="reply"})(E||(E={}));const w=ref(),T=computed(()=>g.value&&w.value==="root"),S=computed(()=>g.value&&w.value==="reply"),N=reactive({sort:SortType.Desc,replyPID:0}),L=ref({name:"",email:"",site:""}),P=reactive({content:"",previewed:!1}),O=()=>{P.content=""},V=()=>{P.previewed=!1},D=()=>{N.replyPID=0},U=ie=>{N.replyPID=ie,n==null||n.event("reply_comment",{event_category:GAEventCategories.Comment})},W=(ie={},ve)=>{const Pe={...ie,sort:N.sort,post_id:e.postId};return d.fetchList(Pe,ve)},Z=ie=>{N.sort!==ie&&(N.sort=ie,W(),scrollToAnchor(COMMENT_ELEMENT_ID))},re=ie=>{const ve=d.comments,Pe=getCommentItemElementID(ve[ve.length-2].id);W({page:ie},!0).then(()=>{nextTick$1().then(()=>{scrollToAnchor(Pe)})})},ae=ie=>{d.deleteComment(ie).catch(ve=>{console.warn("delete comment failed",ve),alert(ve.message)})},ce=async ie=>{if(n==null||n.event("submit_comment",{event_category:GAEventCategories.Comment}),!ie.content||!ie.content.trim())throw`${t.t(LanguageKey.COMMENT_POST_CONTENT)} ?`;if(ie.content.length>3e3)throw`${t.t(LanguageKey.COMMENT_POST_ERROR_CONTENT)} ?`;const ve=c.user.type===UserType.Null,Pe=L.value;if(ve){if(!Pe.name)throw t.t(LanguageKey.COMMENT_POST_NAME)+"?";if(!Pe.email)throw t.t(LanguageKey.COMMENT_POST_EMAIL)+"?"}const ct=ve?toRaw$1(Pe):c.user.type===UserType.Local?c.user.localProfile:{name:c.user.disqusProfile.name,site:c.user.disqusProfile.url};ct.email||Reflect.deleteProperty(ct,"email"),ct.site||Reflect.deleteProperty(ct,"site");try{const ge=await d.postComment({pid:ie.pid,post_id:e.postId,content:ie.content,agent:o.userAgent.original,author:ct});ve&&c.saveLocalUser({...ct,email_hash:ge.author.email_hash}),luanchEmojiRain(ie.content)}catch(ge){throw console.warn("submit comment failed:",ge),ge.message}},ne=ie=>{const ve=document.getElementById(ie),Pe=ve.checkValidity();return ve.reportValidity(),Pe?Promise.resolve():Promise.reject()},le=async ie=>{await ne(COMMENT_PUBLISHER_ELEMENT_ID),w.value="root";try{await ce({content:ie,pid:0}),V(),O()}catch(ve){alert(ve)}finally{w.value=UNDEFINED}},de=async ie=>{await ne(COMMENT_REPLY_PUBLISHER_ELEMENT_ID),w.value="reply";try{await ce({content:ie,pid:N.replyPID}),D()}catch(ve){alert(ve)}finally{w.value=UNDEFINED}};return watch(v,ie=>{ie&&D()}),onBeforeUnmount(()=>{D()}),onUnmounted(()=>{d.clearList()}),{ANCHOR:ANCHORS,isFetching:r,isLoading:v,isRootPosting:T,isReplyPosting:S,commentStore:d,commentState:N,rootPenState:P,guestProfile:L,replyComment:U,handleDeleteComment:ae,handleRootSubmit:le,handleReplySubmit:de,cancelCommentReply:D,fetchSortComments:Z,fetchPageComments:re}}}),index_vue_vue_type_style_index_0_scoped_e51b4cc1_lang="";function _sfc_ssrRender$18(e,t,n,o,c,d,g,r){var O;const v=resolveComponent("comment-topbar"),E=resolveComponent("divider"),w=resolveComponent("comment-publisher-main"),T=resolveComponent("comment-publisher"),S=resolveComponent("comment-pen"),N=resolveComponent("comment-main"),L=resolveComponent("comment-list"),P=resolveComponent("comment-loadmore");t(`<div${ssrRenderAttrs(mergeProps({id:e.ANCHOR.COMMENT_ELEMENT_ID,class:"comment-box"},o))} data-v-e51b4cc1>`),t(ssrRenderComponent(v,{total:(O=e.commentStore.pagination)==null?void 0:O.total,loaded:e.commentStore.comments.length,"post-id":e.postId,fetching:e.fetching,loading:e.isLoading,plain:e.plain,sort:e.commentState.sort,onSort:e.fetchSortComments},null,n)),t(ssrRenderComponent(E,{class:"divider",size:"lg"},null,n)),t(ssrRenderComponent(w,{fetching:e.fetching},{default:withCtx((V,D,U,W)=>{var Z,re;if(D)D(ssrRenderComponent(T,{profile:e.guestProfile,"onUpdate:profile":ae=>e.guestProfile=ae,id:e.ANCHOR.COMMENT_PUBLISHER_ELEMENT_ID,disabled:e.isLoading||e.isRootPosting,total:(Z=e.commentStore.pagination)==null?void 0:Z.total,"default-blossomed":!!e.plain,"hidden-avatar":e.plain},{pen:withCtx((ae,ce,ne,le)=>{if(ce)ce(ssrRenderComponent(S,{modelValue:e.rootPenState.content,"onUpdate:modelValue":de=>e.rootPenState.content=de,previewed:e.rootPenState.previewed,"onUpdate:previewed":de=>e.rootPenState.previewed=de,"auto-focus":!e.plain,"hidden-stationery":e.plain,disabled:e.isRootPosting||e.isLoading,posting:e.isRootPosting,onSubmit:e.handleRootSubmit},null,ne,le));else return[createVNode(S,{modelValue:e.rootPenState.content,"onUpdate:modelValue":de=>e.rootPenState.content=de,previewed:e.rootPenState.previewed,"onUpdate:previewed":de=>e.rootPenState.previewed=de,"auto-focus":!e.plain,"hidden-stationery":e.plain,disabled:e.isRootPosting||e.isLoading,posting:e.isRootPosting,onSubmit:e.handleRootSubmit},null,8,["modelValue","onUpdate:modelValue","previewed","onUpdate:previewed","auto-focus","hidden-stationery","disabled","posting","onSubmit"])]}),_:1},U,W));else return[createVNode(T,{profile:e.guestProfile,"onUpdate:profile":ae=>e.guestProfile=ae,id:e.ANCHOR.COMMENT_PUBLISHER_ELEMENT_ID,disabled:e.isLoading||e.isRootPosting,total:(re=e.commentStore.pagination)==null?void 0:re.total,"default-blossomed":!!e.plain,"hidden-avatar":e.plain},{pen:withCtx(()=>[createVNode(S,{modelValue:e.rootPenState.content,"onUpdate:modelValue":ae=>e.rootPenState.content=ae,previewed:e.rootPenState.previewed,"onUpdate:previewed":ae=>e.rootPenState.previewed=ae,"auto-focus":!e.plain,"hidden-stationery":e.plain,disabled:e.isRootPosting||e.isLoading,posting:e.isRootPosting,onSubmit:e.handleRootSubmit},null,8,["modelValue","onUpdate:modelValue","previewed","onUpdate:previewed","auto-focus","hidden-stationery","disabled","posting","onSubmit"])]),_:1},8,["profile","onUpdate:profile","id","disabled","total","default-blossomed","hidden-avatar"])]}),_:1},n)),t(ssrRenderComponent(E,{class:"divider",size:"lg"},null,n)),t(ssrRenderComponent(N,{fetching:e.isLoading,"skeleton-count":e.plain?3:5,"has-data":Boolean(e.commentStore.commentTreeList.length)},{list:withCtx((V,D,U,W)=>{if(D)D(ssrRenderComponent(L,{comments:e.commentStore.commentTreeList,"reply-pid":e.commentState.replyPID,"hidden-avatar":e.plain,"hidden-ua":e.plain,"plain-vote":e.plain,onDelete:e.handleDeleteComment,onReply:e.replyComment,onCancelReply:e.cancelCommentReply},{reply:withCtx((Z,re,ae,ce)=>{if(re)re(ssrRenderComponent(T,{profile:e.guestProfile,"onUpdate:profile":ne=>e.guestProfile=ne,id:e.ANCHOR.COMMENT_REPLY_PUBLISHER_ELEMENT_ID,disabled:!1,bordered:!0,"default-blossomed":!0,"hidden-avatar":e.plain,"fixed-avatar":Z.isChild},{pen:withCtx((ne,le,de,ie)=>{if(le)le(ssrRenderComponent(S,{posting:e.isReplyPosting,bordered:!0,"auto-focus":!0,"hidden-stationery":e.plain,onSubmit:e.handleReplySubmit},null,de,ie));else return[createVNode(S,{posting:e.isReplyPosting,bordered:!0,"auto-focus":!0,"hidden-stationery":e.plain,onSubmit:e.handleReplySubmit},null,8,["posting","hidden-stationery","onSubmit"])]}),_:2},ae,ce));else return[createVNode(T,{profile:e.guestProfile,"onUpdate:profile":ne=>e.guestProfile=ne,id:e.ANCHOR.COMMENT_REPLY_PUBLISHER_ELEMENT_ID,disabled:!1,bordered:!0,"default-blossomed":!0,"hidden-avatar":e.plain,"fixed-avatar":Z.isChild},{pen:withCtx(()=>[createVNode(S,{posting:e.isReplyPosting,bordered:!0,"auto-focus":!0,"hidden-stationery":e.plain,onSubmit:e.handleReplySubmit},null,8,["posting","hidden-stationery","onSubmit"])]),_:2},1032,["profile","onUpdate:profile","id","hidden-avatar","fixed-avatar"])]}),_:1},U,W));else return[createVNode(L,{comments:e.commentStore.commentTreeList,"reply-pid":e.commentState.replyPID,"hidden-avatar":e.plain,"hidden-ua":e.plain,"plain-vote":e.plain,onDelete:e.handleDeleteComment,onReply:e.replyComment,onCancelReply:e.cancelCommentReply},{reply:withCtx(Z=>[createVNode(T,{profile:e.guestProfile,"onUpdate:profile":re=>e.guestProfile=re,id:e.ANCHOR.COMMENT_REPLY_PUBLISHER_ELEMENT_ID,disabled:!1,bordered:!0,"default-blossomed":!0,"hidden-avatar":e.plain,"fixed-avatar":Z.isChild},{pen:withCtx(()=>[createVNode(S,{posting:e.isReplyPosting,bordered:!0,"auto-focus":!0,"hidden-stationery":e.plain,onSubmit:e.handleReplySubmit},null,8,["posting","hidden-stationery","onSubmit"])]),_:2},1032,["profile","onUpdate:profile","id","hidden-avatar","fixed-avatar"])]),_:1},8,["comments","reply-pid","hidden-avatar","hidden-ua","plain-vote","onDelete","onReply","onCancelReply"])]}),pagination:withCtx((V,D,U,W)=>{var Z,re;if(D)D(ssrRenderComponent(P,{fetching:e.isFetching,pagination:e.commentStore.pagination,remain:((Z=e.commentStore.pagination)==null?void 0:Z.total)-e.commentStore.comments.length,onPage:e.fetchPageComments},null,U,W));else return[createVNode(P,{fetching:e.isFetching,pagination:e.commentStore.pagination,remain:((re=e.commentStore.pagination)==null?void 0:re.total)-e.commentStore.comments.length,onPage:e.fetchPageComments},null,8,["fetching","pagination","remain","onPage"])]}),_:1},n)),t("</div>")}const _sfc_setup$18=_sfc_main$18.setup;_sfc_main$18.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/comment/index.vue"),_sfc_setup$18?_sfc_setup$18(e,t):void 0};const Comment=_export_sfc(_sfc_main$18,[["ssrRender",_sfc_ssrRender$18],["__scopeId","data-v-e51b4cc1"]]),_sfc_main$17=defineComponent({name:"ArticleDetailSkeleton",props:{socialCount:{type:Number,required:!0},relatedCount:{type:Number,required:!0}}}),skeleton_vue_vue_type_style_index_0_scoped_a96e0f80_lang="";function _sfc_ssrRender$17(e,t,n,o,c,d,g,r){const v=resolveComponent("skeleton-line"),E=resolveComponent("skeleton-paragraph"),w=resolveComponent("skeleton-base");t(`<div${ssrRenderAttrs(mergeProps({class:"article-skeleton"},o))} data-v-a96e0f80><div class="module" data-v-a96e0f80><div class="content-skeleton" data-v-a96e0f80>`),t(ssrRenderComponent(v,{class:"title"},null,n)),t(ssrRenderComponent(E,{class:"content",lines:9,"line-height":"1.3em"},null,n)),t('</div></div><div class="module" data-v-a96e0f80><div class="share-skeleton" data-v-a96e0f80><!--[-->'),ssrRenderList(e.socialCount,T=>{t(ssrRenderComponent(w,{class:"item",key:T},null,n))}),t(`<!--]--></div></div><div class="module" data-v-a96e0f80><ul class="related-skeleton" style="${ssrRenderStyle({"grid-template-columns":`repeat(${e.relatedCount}, 1fr)`})}" data-v-a96e0f80><!--[-->`),ssrRenderList(e.relatedCount,T=>{t(ssrRenderComponent(w,{key:T,class:"item"},null,n))}),t("<!--]--></ul></div></div>")}const _sfc_setup$17=_sfc_main$17.setup;_sfc_main$17.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/article/skeleton.vue"),_sfc_setup$17?_sfc_setup$17(e,t):void 0};const ArticleSkeleton=_export_sfc(_sfc_main$17,[["ssrRender",_sfc_ssrRender$17],["__scopeId","data-v-a96e0f80"]]),_sfc_main$16=defineComponent({name:"ArticleContent",components:{Markdown},props:{article:{type:Object,required:!0},readmoreId:{type:String,required:!0}},emits:["rendered"],setup(e,t){const n=useArticleDetailStore(),o=computed(()=>isHybridType(e.article.origin)),c=computed(()=>isReprintType(e.article.origin)),d=computed(()=>isOriginalType(e.article.origin)),g=ref(),r=ref(!1),v=computed(()=>n.isLongContent&&!n.renderedFullContent),E=()=>{r.value=!0,nextTick$1(()=>{setTimeout(()=>{n.renderFullContent(),r.value=!1},0)})},w=()=>{t.emit("rendered",g.value)};return onMounted(()=>w()),onUpdated(()=>w()),{LanguageKey,element:g,isHybrid:o,isReprint:c,isOriginal:d,articleDetailStore:n,isRenderMoreEnabled:v,isRenderMoreContent:r,numberSplit,handleRenderMore:E,handleFullContentRendered:w}}}),content_vue_vue_type_style_index_0_scoped_897cc6b0_lang="";function _sfc_ssrRender$16(e,t,n,o,c,d,g,r){var N,L;const v=resolveComponent("i18n"),E=resolveComponent("responsive"),w=resolveComponent("divider"),T=resolveComponent("udate"),S=resolveComponent("markdown");t(`<div${ssrRenderAttrs(mergeProps({ref:"element",class:"detail"},o))} data-v-897cc6b0><div class="${ssrRenderClass([{original:e.isOriginal,reprint:e.isReprint,hybrid:e.isHybrid},"oirigin"])}" data-v-897cc6b0>`),e.isOriginal?t(ssrRenderComponent(v,{k:e.LanguageKey.ORIGIN_ORIGINAL},null,n)):e.isReprint?t(ssrRenderComponent(v,{k:e.LanguageKey.ORIGIN_REPRINT},null,n)):e.isHybrid?t(ssrRenderComponent(v,{k:e.LanguageKey.ORIGIN_HYBRID},null,n)):t("<!---->"),t(`</div><div class="knowledge" data-v-897cc6b0><div class="title" data-v-897cc6b0><h2 class="text" data-v-897cc6b0>${ssrInterpolate(e.article.title)}</h2><div class="meta" data-v-897cc6b0><i class="iconfont icon-t" data-v-897cc6b0></i>`),t(ssrRenderComponent(v,{zh:`\u5171 ${e.numberSplit(e.articleDetailStore.contentLength)} \u5B57\uFF0C\u9700\u9605\u8BFB ${e.articleDetailStore.readMinutes} \u5206\u949F`,en:`${e.numberSplit(e.articleDetailStore.contentLength)} words, ${e.articleDetailStore.readMinutes} min read`},null,n)),t(ssrRenderComponent(E,{desktop:""},{default:withCtx((P,O,V,D)=>{if(O)O(ssrRenderComponent(w,{type:"vertical",class:"vertical"},null,V,D)),O(`<span data-v-897cc6b0${D}><i class="iconfont icon-clock-outline" data-v-897cc6b0${D}></i>`),O(ssrRenderComponent(T,{to:"YMDm",date:e.article.create_at,separator:"/"},null,V,D)),O("</span>");else return[createVNode(w,{type:"vertical",class:"vertical"}),createVNode("span",null,[createVNode("i",{class:"iconfont icon-clock-outline"}),createVNode(T,{to:"YMDm",date:e.article.create_at,separator:"/"},null,8,["date"])])]}),_:1},n)),t(ssrRenderComponent(w,{type:"vertical",class:"vertical"},null,n)),t(`<span data-v-897cc6b0><i class="iconfont icon-eye" data-v-897cc6b0></i><span data-v-897cc6b0>${ssrInterpolate(e.numberSplit(e.article.meta.views))}\xA0</span>`),t(ssrRenderComponent(v,{k:e.LanguageKey.ARTICLE_VIEWS},null,n)),t("</span></div></div>"),t(ssrRenderComponent(S,{html:(N=e.articleDetailStore.defaultContent)==null?void 0:N.html},null,n)),e.isRenderMoreEnabled?(t(`<div${ssrRenderAttr("id",e.readmoreId)} class="readmore" data-v-897cc6b0><button class="readmore-btn"${includeBooleanAttr(e.isRenderMoreContent)?" disabled":""} data-v-897cc6b0>`),t(ssrRenderComponent(v,{k:e.isRenderMoreContent?e.LanguageKey.ARTICLE_RENDERING:e.LanguageKey.ARTICLE_READ_ALL},null,n)),t('<i class="iconfont icon-loadmore" data-v-897cc6b0></i></button></div>')):e.articleDetailStore.renderedFullContent?t(ssrRenderComponent(S,{html:(L=e.articleDetailStore.moreContent)==null?void 0:L.html},null,n)):t("<!---->"),t("</div></div>")}const _sfc_setup$16=_sfc_main$16.setup;_sfc_main$16.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/article/content.vue"),_sfc_setup$16?_sfc_setup$16(e,t):void 0};const ArticleContent=_export_sfc(_sfc_main$16,[["ssrRender",_sfc_ssrRender$16],["__scopeId","data-v-897cc6b0"]]),_sfc_main$15=defineComponent({name:"ArticleLikeShare",components:{BaseShare:Share},props:{socials:{type:Array,default:()=>[]}},setup(e){return{skeletonCount:e.socials.length?e.socials.length:Object.keys(SocialMedia).length,VALUABLE_LINKS}}}),share_vue_vue_type_style_index_0_scoped_fb5838fe_lang="";function _sfc_ssrRender$15(e,t,n,o,c,d,g,r){const v=resolveComponent("base-share");t(`<div${ssrRenderAttrs(mergeProps({class:"share-box"},o))} data-v-fb5838fe>`),t(ssrRenderComponent(v,{class:"share",socials:e.socials},null,n)),t("</div>")}const _sfc_setup$15=_sfc_main$15.setup;_sfc_main$15.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/article/share.vue"),_sfc_setup$15?_sfc_setup$15(e,t):void 0};const ArticleShare=_export_sfc(_sfc_main$15,[["ssrRender",_sfc_ssrRender$15],["__scopeId","data-v-fb5838fe"]]),_sfc_main$14=defineComponent({name:"ArticleMeta",props:{article:{type:Object,required:!0},plain:{type:Boolean,default:!1}},setup(e){const{i18n:t,gtag:n,globalState:o}=useEnhancer(),c=useIdentityStore(),d=useArticleDetailStore(),g=computed(()=>c.isLikedPage(e.article.id)),r=computed(()=>getPageURL(getArticleDetailRoute(e.article.id))),v=computed(()=>e.article.meta.likes);return{VALUABLE_LINKS,LanguageKey,articleURL:r,likes:v,copy,isLiked:g,tagEnName,firstUpperCase,handleLike:async()=>{if(g.value)return!1;n==null||n.event("article_like",{event_category:GAEventCategories.Article});try{await d.postArticleLike(e.article.id),c.likePage(e.article.id)}catch(S){const N=t.t(LanguageKey.POST_ACTION_ERROR);console.warn(N,S),alert(N)}},handleOpenSponsor:()=>{o.toggleSwitcher("sponsor",!0),n==null||n.event("article_sponsor",{event_category:GAEventCategories.Article})},getDateLink:S=>getDateFlowRoute(dateToYMD(new Date(S))),getTagFlowRoute,getCategoryFlowRoute}}}),meta_vue_vue_type_style_index_0_scoped_cb53ad3d_lang="";function _sfc_ssrRender$14(e,t,n,o,c,d,g,r){const v=resolveComponent("i18n"),E=resolveComponent("router-link"),w=resolveComponent("udate"),T=resolveComponent("divider"),S=resolveComponent("ulink");t(`<div${ssrRenderAttrs(mergeProps({class:["meta",{plain:e.plain}]},o))} data-v-cb53ad3d><div class="actions" data-v-cb53ad3d>`),ssrRenderSlot(e.$slots,"action",{},null,t,n),t('</div><div class="line" data-v-cb53ad3d>'),t(ssrRenderComponent(v,{zh:"\u672C\u6587\u4E8E",en:"Published at"},null,n)),t(ssrRenderComponent(E,{class:"link date",title:e.article.create_at,to:e.getDateLink(e.article.create_at)},{default:withCtx((N,L,P,O)=>{if(L)L(ssrRenderComponent(w,{to:"YMDm",date:e.article.create_at,separator:"/"},null,P,O));else return[createVNode(w,{to:"YMDm",date:e.article.create_at,separator:"/"},null,8,["date"])]}),_:1},n)),t(ssrRenderComponent(v,{zh:"\u53D1\u5E03\u5728",en:"in"},null,n)),t("<!--[-->"),ssrRenderList(e.article.category,(N,L)=>{t("<span data-v-cb53ad3d>"),t(ssrRenderComponent(E,{class:"link category",title:`${e.firstUpperCase(N.slug)} | ${N.description}`,to:e.getCategoryFlowRoute(N.slug)},{default:withCtx((P,O,V,D)=>{if(O)O(ssrRenderComponent(v,{zh:N.name,en:e.firstUpperCase(N.slug)},null,V,D));else return[createVNode(v,{zh:N.name,en:e.firstUpperCase(N.slug)},null,8,["zh","en"])]}),_:2},n)),e.article.category[L+1]?(t("<span data-v-cb53ad3d>"),t(ssrRenderComponent(v,{zh:"\u3001",en:","},null,n)),t("</span>")):t("<!---->"),t("</span>")}),t("<!--]-->"),e.article.category.length?t("<!---->"):(t("<span data-v-cb53ad3d>"),t(ssrRenderComponent(v,{zh:"\u672A\u77E5\u5206\u7C7B\u4E0B",en:"(no catgory)"},null,n)),t("</span>")),e.plain?t("<br data-v-cb53ad3d>"):t(ssrRenderComponent(T,{type:"vertical",size:"sm"},null,n)),t("<!--[-->"),ssrRenderList(e.article.tag,(N,L)=>{t("<span data-v-cb53ad3d>"),t(ssrRenderComponent(E,{class:"link tag",title:`${e.tagEnName(N)} | ${N.description}`,to:e.getTagFlowRoute(N.slug)},{default:withCtx((P,O,V,D)=>{if(O)O(ssrRenderComponent(v,{zh:`#${N.name}`,en:`#${e.tagEnName(N)}`},null,V,D));else return[createVNode(v,{zh:`#${N.name}`,en:`#${e.tagEnName(N)}`},null,8,["zh","en"])]}),_:2},n)),e.article.tag[L+1]?(t("<span data-v-cb53ad3d>"),t(ssrRenderComponent(v,{zh:"\u3001",en:","},null,n)),t("</span>")):t("<!---->"),t("</span>")}),t('<!--]--></div><div class="line" data-v-cb53ad3d><i class="icon iconfont icon-creative-commons" data-v-cb53ad3d></i>'),t(ssrRenderComponent(v,null,{zh:withCtx((N,L,P,O)=>{if(L)L(ssrRenderComponent(S,{class:"link copyright",href:"https://creativecommons.org/licenses/by-nc/4.0/deed.zh"},{default:withCtx((V,D,U,W)=>{if(D)D("\u81EA\u7531\u8F6C\u8F7D - \u7F72\u540D - \u975E\u5546\u4E1A\u6027\u4F7F\u7528");else return[createTextVNode("\u81EA\u7531\u8F6C\u8F7D - \u7F72\u540D - \u975E\u5546\u4E1A\u6027\u4F7F\u7528")]}),_:1},P,O));else return[createVNode(S,{class:"link copyright",href:"https://creativecommons.org/licenses/by-nc/4.0/deed.zh"},{default:withCtx(()=>[createTextVNode("\u81EA\u7531\u8F6C\u8F7D - \u7F72\u540D - \u975E\u5546\u4E1A\u6027\u4F7F\u7528")]),_:1})]}),en:withCtx((N,L,P,O)=>{if(L)L(ssrRenderComponent(S,{class:"link copyright",href:"https://creativecommons.org/licenses/by-nc/4.0/deed.en"},{default:withCtx((V,D,U,W)=>{if(D)D("Creative Commons BY-NC 4.0");else return[createTextVNode("Creative Commons BY-NC 4.0")]}),_:1},P,O));else return[createVNode(S,{class:"link copyright",href:"https://creativecommons.org/licenses/by-nc/4.0/deed.en"},{default:withCtx(()=>[createTextVNode("Creative Commons BY-NC 4.0")]),_:1})]}),_:1},n)),e.plain?t("<br data-v-cb53ad3d>"):t(ssrRenderComponent(T,{type:"vertical"},null,n)),t(`<span class="link permalink" data-v-cb53ad3d>${ssrInterpolate(e.articleURL)}</span></div></div>`)}const _sfc_setup$14=_sfc_main$14.setup;_sfc_main$14.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/article/meta.vue"),_sfc_setup$14?_sfc_setup$14(e,t):void 0};const ArticleMeta=_export_sfc(_sfc_main$14,[["ssrRender",_sfc_ssrRender$14],["__scopeId","data-v-cb53ad3d"]]),_sfc_main$13=defineComponent({name:"ArticleUpvote",props:{likes:{type:Number,required:!0},isLiked:{type:Boolean,required:!0},hiddenSponsor:{type:Boolean,default:!1},enabledParkinson:{type:Boolean,default:!1}},emits:["like","sponsor"],setup(e,t){const n=()=>{t.emit("sponsor")},o=ref(!1),c=()=>{o.value=!0};return{VALUABLE_LINKS,LanguageKey,handleLike:()=>{e.isLiked||t.emit("like",c)},handleSponsor:n,newliked:o}}}),upvote_vue_vue_type_style_index_0_scoped_059798fc_lang="";function _sfc_ssrRender$13(e,t,n,o,c,d,g,r){const v=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:"upvote"},o))} data-v-059798fc><div class="wrapper" data-v-059798fc><button class="${ssrRenderClass([{liked:e.isLiked,parkinson:e.enabledParkinson,newliked:e.newliked},"button like"])}"${includeBooleanAttr(e.isLiked)?" disabled":""} data-v-059798fc><i class="icon iconfont icon-like" data-v-059798fc></i><span class="text" data-v-059798fc>`),t(ssrRenderComponent(v,null,{zh:withCtx((E,w,T,S)=>{if(w)w(`\u771F\u68D2\uFF01${ssrInterpolate(e.likes)}`);else return[createTextVNode("\u771F\u68D2\uFF01"+toDisplayString(e.likes),1)]}),en:withCtx((E,w,T,S)=>{if(w)w(`${ssrInterpolate(e.isLiked?"Upvoted":"Upvote")} ${ssrInterpolate(e.likes)}`);else return[createTextVNode(toDisplayString(e.isLiked?"Upvoted":"Upvote")+" "+toDisplayString(e.likes),1)]}),_:1},n)),t("</span>"),e.enabledParkinson?t(`<!--[--><span class="parkinson-mask" data-v-059798fc><i class="${ssrRenderClass([e.newliked?"icon-like":"icon-like-pre","iconfont"])}" data-v-059798fc></i></span><div class="parkinson-likes" data-v-059798fc>+ 1</div><!--]-->`):t("<!---->"),t("</button>"),e.hiddenSponsor?t("<!---->"):t('<button class="button sponsor" data-v-059798fc><i class="icon iconfont icon-heart" data-v-059798fc></i></button>'),t("</div></div>")}const _sfc_setup$13=_sfc_main$13.setup;_sfc_main$13.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/article/upvote.vue"),_sfc_setup$13?_sfc_setup$13(e,t):void 0};const ArticleUpvote=_export_sfc(_sfc_main$13,[["ssrRender",_sfc_ssrRender$13],["__scopeId","data-v-059798fc"]]),_sfc_main$12=defineComponent({name:"ArticleRelated",props:{articles:{type:Array,default:()=>[]},columns:{type:Number,default:4},count:{type:Number,default:8}},setup(e){return{articleList:computed(()=>{const n=[...e.articles].slice(0,e.count);return n.length>=e.count?n:[...n,...new Array(e.count-n.length).fill({title:"-",description:"",id:null,_id:"",thumb:""})]}),getArticleDetailRoute,getMobileArticleListThumbnailURL}}}),related_vue_vue_type_style_index_0_scoped_618d364f_lang="";function _sfc_ssrRender$12(e,t,n,o,c,d,g,r){const v=resolveComponent("router-link");t(`<div${ssrRenderAttrs(mergeProps({class:"related"},o))} data-v-618d364f><ul class="articles" style="${ssrRenderStyle({gridTemplateColumns:`repeat(${e.columns}, 1fr)`})}" data-v-618d364f><!--[-->`),ssrRenderList(e.articleList,(E,w)=>{t(`<li class="${ssrRenderClass([{disabled:!E.id},"item"])}" data-v-618d364f>`),t(ssrRenderComponent(v,{class:"item-article",title:E.title,to:e.getArticleDetailRoute(E.id)},{default:withCtx((T,S,N,L)=>{if(S)S(`<div class="thumb" style="${ssrRenderStyle({backgroundImage:`url(${e.getMobileArticleListThumbnailURL(E.thumb)})`})}" data-v-618d364f${L}></div><div class="title" data-v-618d364f${L}>${ssrInterpolate(E.title)}</div><div class="description" data-v-618d364f${L}>${ssrInterpolate(E.description)}</div>`);else return[createVNode("div",{class:"thumb",style:{backgroundImage:`url(${e.getMobileArticleListThumbnailURL(E.thumb)})`}},null,4),createVNode("div",{class:"title"},toDisplayString(E.title),1),createVNode("div",{class:"description"},toDisplayString(E.description),1)]}),_:2},n)),t("</li>")}),t("<!--]--></ul></div>")}const _sfc_setup$12=_sfc_main$12.setup;_sfc_main$12.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/article/related.vue"),_sfc_setup$12?_sfc_setup$12(e,t):void 0};const ArticleRelated=_export_sfc(_sfc_main$12,[["ssrRender",_sfc_ssrRender$12],["__scopeId","data-v-618d364f"]]),_sfc_main$11=defineComponent({name:"ArticleNeighbour",props:{prev:Object,next:Object},setup(){return{getArticleDetailRoute}}}),neighbour_vue_vue_type_style_index_0_scoped_a071c63f_lang="";function _sfc_ssrRender$11(e,t,n,o,c,d,g,r){const v=resolveComponent("router-link"),E=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:"neighbour"},o))} data-v-a071c63f>`),e.prev?t(ssrRenderComponent(v,{class:"link prev",title:e.prev.title,to:e.getArticleDetailRoute(e.prev.id)},{default:withCtx((w,T,S,N)=>{if(T)T(`<div class="icon" data-v-a071c63f${N}><i class="iconfont icon-prev" data-v-a071c63f${N}></i></div><div class="content" data-v-a071c63f${N}><p class="title" data-v-a071c63f${N}>${ssrInterpolate(e.prev.title)}</p><p class="description" data-v-a071c63f${N}>${ssrInterpolate(e.prev.description)}</p></div>`);else return[createVNode("div",{class:"icon"},[createVNode("i",{class:"iconfont icon-prev"})]),createVNode("div",{class:"content"},[createVNode("p",{class:"title"},toDisplayString(e.prev.title),1),createVNode("p",{class:"description"},toDisplayString(e.prev.description),1)])]}),_:1},n)):(t('<div class="null" data-v-a071c63f>'),t(ssrRenderComponent(E,{zh:"\u5DF2\u662F\u6700\u65E9",en:"NULL"},null,n)),t("</div>")),e.next?t(ssrRenderComponent(v,{class:"link next",title:e.next.title,to:e.getArticleDetailRoute(e.next.id)},{default:withCtx((w,T,S,N)=>{if(T)T(`<div class="content" data-v-a071c63f${N}><p class="title" data-v-a071c63f${N}>${ssrInterpolate(e.next.title)}</p><p class="description" data-v-a071c63f${N}>${ssrInterpolate(e.next.description)}</p></div><div class="icon" data-v-a071c63f${N}><i class="iconfont icon-next" data-v-a071c63f${N}></i></div>`);else return[createVNode("div",{class:"content"},[createVNode("p",{class:"title"},toDisplayString(e.next.title),1),createVNode("p",{class:"description"},toDisplayString(e.next.description),1)]),createVNode("div",{class:"icon"},[createVNode("i",{class:"iconfont icon-next"})])]}),_:1},n)):(t('<div class="null" data-v-a071c63f>'),t(ssrRenderComponent(E,{zh:"\u5DF2\u662F\u6700\u65B0",en:"NULL"},null,n)),t("</div>")),t("</div>")}const _sfc_setup$11=_sfc_main$11.setup;_sfc_main$11.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/article/neighbour.vue"),_sfc_setup$11?_sfc_setup$11(e,t):void 0};const ArticleNeighbour=_export_sfc(_sfc_main$11,[["ssrRender",_sfc_ssrRender$11],["__scopeId","data-v-a071c63f"]]),_sfc_main$10=defineComponent({name:"ArticleDetail",components:{Comment,ArticleSkeleton,ArticleContent,ArticleShare,ArticleMeta,ArticleUpvote,ArticleRelated,ArticleNeighbour},props:{articleId:{type:Number,required:!0},isMobile:{type:Boolean,default:!1}},setup(e){const{i18n:t,meta:n,gtag:o,globalState:c}=useEnhancer(),{identity:d,comment:g,articleDetail:r}=useStores(),v=computed(()=>r.article||UNDEFINED),E=computed(()=>r.fetching),w=computed(()=>Boolean(v.value&&d.isLikedPage(v.value.id))),T=()=>{c.toggleSwitcher("sponsor",!0),o==null||o.event("article_sponsor",{event_category:GAEventCategories.Article})},S=async O=>{if(w.value)return!1;o==null||o.event("article_like",{event_category:GAEventCategories.Article});try{await r.postArticleLike(v.value.id),d.likePage(v.value.id),O==null||O()}catch(V){const D=t.t(LanguageKey.POST_ACTION_ERROR);console.warn(D,V),alert(D)}},N=O=>Promise.all([r.fetchCompleteArticle({articleID:O}),g.fetchList({post_id:O})]),L=shallowRef(null),P=O=>{var V,D,U,W,Z;(D=(V=CUSTOM_ELEMENTS.verse).effect)==null||D.call(V,O),L.value=(Z=(W=(U=CUSTOM_ELEMENTS.verse).style)==null?void 0:W.call(U,O))!=null?Z:null};return n(()=>{var O,V,D,U,W,Z;return{pageTitle:(O=v.value)==null?void 0:O.title,description:((V=v.value)==null?void 0:V.description)||"",keywords:((U=(D=v.value)==null?void 0:D.keywords)==null?void 0:U.join(","))||((W=v.value)==null?void 0:W.title),twitterCard:"summary_large_image",ogType:"article",ogImage:(Z=v.value)==null?void 0:Z.thumb,style:L.value?[{children:L.value}]:[]}}),onBeforeMount(()=>{watch(()=>e.articleId,O=>N(O),{flush:"post"})}),useUniversalFetch(()=>N(e.articleId)),{ANCHORS,SocialMedia,userAgent:c.userAgent,store:r,article:v,fetching:E,isLiked:w,handleLike:S,handleSponsor:T,handleContentRendered:P}}}),index_vue_vue_type_style_index_0_scoped_b6587707_lang="";function _sfc_ssrRender$10(e,t,n,o,c,d,g,r){const v=resolveComponent("placeholder"),E=resolveComponent("article-skeleton"),w=resolveComponent("article-content"),T=resolveComponent("article-meta"),S=resolveComponent("article-upvote"),N=resolveComponent("article-share"),L=resolveComponent("article-neighbour"),P=resolveComponent("article-related"),O=resolveComponent("comment");t(`<div${ssrRenderAttrs(mergeProps({class:"article-page"},o))} data-v-b6587707>`),t(ssrRenderComponent(v,{loading:e.fetching},{loading:withCtx((V,D,U,W)=>{if(D)D(ssrRenderComponent(E,{"social-count":e.isMobile?3:8,"related-count":e.isMobile?2:3},null,U,W));else return[createVNode(E,{"social-count":e.isMobile?3:8,"related-count":e.isMobile?2:3},null,8,["social-count","related-count"])]}),default:withCtx((V,D,U,W)=>{var Z,re,ae,ce;if(D)e.article?(D(`<div data-v-b6587707${W}><div class="module margin background overflow" data-v-b6587707${W}>`),D(ssrRenderComponent(w,{id:e.ANCHORS.ARTICLE_CONTENT_ELEMENT_ID,"readmore-id":e.ANCHORS.ARTICLE_READMORE_ELEMENT_ID,article:e.article,onRendered:e.handleContentRendered},null,U,W)),D(`<div class="divider" data-v-b6587707${W}></div>`),D(ssrRenderComponent(T,{id:e.ANCHORS.ARTICLE_META_ELEMENT_ID,article:e.article,plain:e.isMobile},{action:withCtx((ne,le,de,ie)=>{if(le)le(ssrRenderComponent(S,{likes:e.article.meta.likes,"is-liked":e.isLiked,"hidden-sponsor":e.isMobile,"enabled-parkinson":!e.isMobile&&(e.userAgent.isChrome||e.userAgent.isFirefox),onLike:e.handleLike,onSponsor:e.handleSponsor},null,de,ie));else return[createVNode(S,{likes:e.article.meta.likes,"is-liked":e.isLiked,"hidden-sponsor":e.isMobile,"enabled-parkinson":!e.isMobile&&(e.userAgent.isChrome||e.userAgent.isFirefox),onLike:e.handleLike,onSponsor:e.handleSponsor},null,8,["likes","is-liked","hidden-sponsor","enabled-parkinson","onLike","onSponsor"])]}),_:1},U,W)),D(`</div><div class="module margin background" data-v-b6587707${W}><div class="bridge left" data-v-b6587707${W}></div><div class="bridge right" data-v-b6587707${W}></div>`),D(ssrRenderComponent(N,{id:e.ANCHORS.ARTICLE_SHARE_ELEMENT_ID,"article-id":e.articleId,likes:((re=(Z=e.article)==null?void 0:Z.meta)==null?void 0:re.likes)||0,socials:e.isMobile?[e.SocialMedia.Wechat,e.SocialMedia.Weibo,e.SocialMedia.Twitter]:[]},null,U,W)),D(`</div><div class="module margin overflow" data-v-b6587707${W}>`),D(ssrRenderComponent(L,{prev:e.store.prevArticle,next:e.store.nextArticle},null,U,W)),D(`</div><div class="module margin overflow" data-v-b6587707${W}>`),D(ssrRenderComponent(P,{id:e.ANCHORS.ARTICLE_RELATED_ELEMENT_ID,columns:e.isMobile?2:3,count:e.isMobile?4:6,articles:e.store.relatedArticles},null,U,W)),D("</div></div>")):D("<!---->");else return[e.article?(openBlock(),createBlock("div",{key:0},[createVNode("div",{class:"module margin background overflow"},[createVNode(w,{id:e.ANCHORS.ARTICLE_CONTENT_ELEMENT_ID,"readmore-id":e.ANCHORS.ARTICLE_READMORE_ELEMENT_ID,article:e.article,onRendered:e.handleContentRendered},null,8,["id","readmore-id","article","onRendered"]),createVNode("div",{class:"divider"}),createVNode(T,{id:e.ANCHORS.ARTICLE_META_ELEMENT_ID,article:e.article,plain:e.isMobile},{action:withCtx(()=>[createVNode(S,{likes:e.article.meta.likes,"is-liked":e.isLiked,"hidden-sponsor":e.isMobile,"enabled-parkinson":!e.isMobile&&(e.userAgent.isChrome||e.userAgent.isFirefox),onLike:e.handleLike,onSponsor:e.handleSponsor},null,8,["likes","is-liked","hidden-sponsor","enabled-parkinson","onLike","onSponsor"])]),_:1},8,["id","article","plain"])]),createVNode("div",{class:"module margin background"},[createVNode("div",{class:"bridge left"}),createVNode("div",{class:"bridge right"}),createVNode(N,{id:e.ANCHORS.ARTICLE_SHARE_ELEMENT_ID,"article-id":e.articleId,likes:((ce=(ae=e.article)==null?void 0:ae.meta)==null?void 0:ce.likes)||0,socials:e.isMobile?[e.SocialMedia.Wechat,e.SocialMedia.Weibo,e.SocialMedia.Twitter]:[]},null,8,["id","article-id","likes","socials"])]),createVNode("div",{class:"module margin overflow"},[createVNode(L,{prev:e.store.prevArticle,next:e.store.nextArticle},null,8,["prev","next"])]),createVNode("div",{class:"module margin overflow"},[createVNode(P,{id:e.ANCHORS.ARTICLE_RELATED_ELEMENT_ID,columns:e.isMobile?2:3,count:e.isMobile?4:6,articles:e.store.relatedArticles},null,8,["id","columns","count","articles"])])])):createCommentVNode("",!0)]}),_:1},n)),t('<div class="comment" data-v-b6587707>'),t(ssrRenderComponent(O,{plain:e.isMobile,fetching:e.fetching,"post-id":e.articleId},null,n)),t("</div></div>")}const _sfc_setup$10=_sfc_main$10.setup;_sfc_main$10.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/article/index.vue"),_sfc_setup$10?_sfc_setup$10(e,t):void 0};const ArticleDetailPage=_export_sfc(_sfc_main$10,[["ssrRender",_sfc_ssrRender$10],["__scopeId","data-v-b6587707"]]),useDoubanMoviesStore=defineFetchStore({id:"doubanMovies",initData:null,onlyOnce:!0,fetcher:()=>tunnel$1.dispatch(TunnelModule.DoubanMovies)}),useInstagramMediasStore=defineFetchStore({id:"instagramMedias",initData:[],fetcher(){return tunnel$1.dispatch(TunnelModule.InstagramMedias)}}),useYouTubePlayListStore=defineFetchStore({id:"youtubePlaylist",initData:[],async fetcher(){const e=await tunnel$1.dispatch(TunnelModule.YouTubePlaylist);return e.sort((t,n)=>t.snippet.position-n.snippet.position),e}}),fetchYouTubeVideoList=e=>tunnel$1.dispatch(TunnelModule.YouTubeVideoList,{id:e}),useTwitterUserinfoStore=defineFetchStore({id:"twitterUserinfo",initData:null,fetcher:()=>tunnel$1.dispatch(TunnelModule.TwitterUserInfo)}),useTwitterTweetsStore=defineFetchStore({id:"twitterTweets",initData:null,fetcher:()=>tunnel$1.dispatch(TunnelModule.TwitterTweets)}),useMyGoogleMapStore=defineFetchStore({id:"myGoogleMap",initData:null,onlyOnce:!0,fetcher:()=>tunnel$1.dispatch(TunnelModule.MyGoogleMap)}),_sfc_main$$=defineComponent({name:"AboutPageInstagram",setup(){const e=ref(!0),t=useInstagramMediasStore(),n=computed(()=>t.data.slice(0,23));return onMounted(()=>{t.fetch().finally(()=>{e.value=!1})}),{isVideoMediaIns,isAlbumMediaIns,getInstagramImage,LanguageKey,VALUABLE_LINKS,fetching:e,store:t,insMedias:n}}}),instagram_vue_vue_type_style_index_0_scoped_70dedccf_lang="";function _sfc_ssrRender$$(e,t,n,o,c,d,g,r){const v=resolveComponent("placeholder"),E=resolveComponent("skeleton-base"),w=resolveComponent("ulink"),T=resolveComponent("uimage");t(ssrRenderComponent(v,mergeProps({"i18n-key":e.LanguageKey.EMPTY_PLACEHOLDER,loading:e.fetching,data:e.insMedias},o),{loading:withCtx((S,N,L,P)=>{if(N)N(`<ul class="list" data-v-70dedccf${P}><!--[-->`),ssrRenderList(24,O=>{N(`<li class="item" data-v-70dedccf${P}>`),N(ssrRenderComponent(E,null,null,L,P)),N("</li>")}),N("<!--]--></ul>");else return[createVNode("ul",{class:"list"},[(openBlock(),createBlock(Fragment,null,renderList(24,O=>createVNode("li",{class:"item",key:O},[createVNode(E)])),64))])]}),default:withCtx((S,N,L,P)=>{if(N)N(`<ul class="list" data-v-70dedccf${P}><!--[-->`),ssrRenderList(e.insMedias,(O,V)=>{N(`<li class="item" data-v-70dedccf${P}>`),N(ssrRenderComponent(w,{class:"link",href:O.permalink,title:O.caption},{default:withCtx((D,U,W,Z)=>{if(U)U(ssrRenderComponent(T,{class:"cover",src:e.getInstagramImage(O,"t"),alt:O.caption},null,W,Z)),U(`<div class="type-icon" data-v-70dedccf${Z}>`),e.isVideoMediaIns(O)?U(`<i class="iconfont icon-video" data-v-70dedccf${Z}></i>`):U("<!---->"),e.isAlbumMediaIns(O)?U(`<i class="iconfont icon-album" data-v-70dedccf${Z}></i>`):U("<!---->"),U(`</div><div class="mask" data-v-70dedccf${Z}>`),e.isVideoMediaIns(O)?U(`<i class="iconfont icon-music-play" data-v-70dedccf${Z}></i>`):U(`<i class="iconfont icon-eye" data-v-70dedccf${Z}></i>`),U("</div>");else return[createVNode(T,{class:"cover",src:e.getInstagramImage(O,"t"),alt:O.caption},null,8,["src","alt"]),createVNode("div",{class:"type-icon"},[e.isVideoMediaIns(O)?(openBlock(),createBlock("i",{key:0,class:"iconfont icon-video"})):createCommentVNode("",!0),e.isAlbumMediaIns(O)?(openBlock(),createBlock("i",{key:1,class:"iconfont icon-album"})):createCommentVNode("",!0)]),createVNode("div",{class:"mask"},[e.isVideoMediaIns(O)?(openBlock(),createBlock("i",{key:0,class:"iconfont icon-music-play"})):(openBlock(),createBlock("i",{key:1,class:"iconfont icon-eye"}))])]}),_:2},L,P)),N("</li>")}),N(`<!--]--><li class="item" data-v-70dedccf${P}>`),N(ssrRenderComponent(w,{class:"link more",href:e.VALUABLE_LINKS.INSTAGRAM},{default:withCtx((O,V,D,U)=>{if(V)V("\u2022\u2022\u2022");else return[createTextVNode("\u2022\u2022\u2022")]}),_:1},L,P)),N("</li></ul>");else return[createVNode("ul",{class:"list"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.insMedias,(O,V)=>(openBlock(),createBlock("li",{class:"item",key:V},[createVNode(w,{class:"link",href:O.permalink,title:O.caption},{default:withCtx(()=>[createVNode(T,{class:"cover",src:e.getInstagramImage(O,"t"),alt:O.caption},null,8,["src","alt"]),createVNode("div",{class:"type-icon"},[e.isVideoMediaIns(O)?(openBlock(),createBlock("i",{key:0,class:"iconfont icon-video"})):createCommentVNode("",!0),e.isAlbumMediaIns(O)?(openBlock(),createBlock("i",{key:1,class:"iconfont icon-album"})):createCommentVNode("",!0)]),createVNode("div",{class:"mask"},[e.isVideoMediaIns(O)?(openBlock(),createBlock("i",{key:0,class:"iconfont icon-music-play"})):(openBlock(),createBlock("i",{key:1,class:"iconfont icon-eye"}))])]),_:2},1032,["href","title"])]))),128)),createVNode("li",{class:"item"},[createVNode(w,{class:"link more",href:e.VALUABLE_LINKS.INSTAGRAM},{default:withCtx(()=>[createTextVNode("\u2022\u2022\u2022")]),_:1},8,["href"])])])]}),_:1},n))}const _sfc_setup$$=_sfc_main$$.setup;_sfc_main$$.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/about/media/instagram.vue"),_sfc_setup$$?_sfc_setup$$(e,t):void 0};const InstagramMedia=_export_sfc(_sfc_main$$,[["ssrRender",_sfc_ssrRender$$],["__scopeId","data-v-70dedccf"]]),_sfc_main$_=defineComponent({name:"StatisticBase",props:{brand:String,icon:String,platform:String,href:String,fetching:Boolean,data:Object},setup(){const{isDarkTheme:e}=useEnhancer();return{LanguageKey,isDarkTheme:e}}}),StatisticCount=defineComponent({name:"StatisticCount",props:{count:[Number,String],primary:Boolean,large:Boolean,kilo:Boolean,split:Boolean},render(){const e=Number(this.$props.count),t=this.kilo?numberToKilo(e):this.split?numberSplit(e):String(e),n={primary:this.$props.primary,large:this.large};return h("span",{class:["count",n]},t)}}),base_vue_vue_type_style_index_0_scoped_39e494cb_lang="";function _sfc_ssrRender$_(e,t,n,o,c,d,g,r){const v=resolveComponent("placeholder"),E=resolveComponent("skeleton-base"),w=resolveComponent("ulink");t(`<div${ssrRenderAttrs(mergeProps({class:["statistic",[e.brand,{dark:e.isDarkTheme}]]},o))} data-v-39e494cb>`),t(ssrRenderComponent(v,{"i18n-key":e.LanguageKey.EMPTY_PLACEHOLDER,loading:e.fetching,data:e.data},{loading:withCtx((T,S,N,L)=>{if(S)S(`<ul class="skeletons" data-v-39e494cb${L}><!--[-->`),ssrRenderList(3,P=>{S(ssrRenderComponent(E,{key:P,class:"item"},null,N,L))}),S("<!--]--></ul>");else return[createVNode("ul",{class:"skeletons"},[(openBlock(),createBlock(Fragment,null,renderList(3,P=>createVNode(E,{key:P,class:"item"})),64))])]}),default:withCtx((T,S,N,L)=>{if(S)S(`<div class="content" data-v-39e494cb${L}>`),S(ssrRenderComponent(w,{class:"title",href:e.href},{default:withCtx((P,O,V,D)=>{if(O)O(`<span class="left" data-v-39e494cb${D}><i class="${ssrRenderClass([e.icon,"iconfont"])}" data-v-39e494cb${D}></i><span class="text" data-v-39e494cb${D}>${ssrInterpolate(e.platform)}</span></span><span class="right" data-v-39e494cb${D}><i class="iconfont icon-next" data-v-39e494cb${D}></i></span>`);else return[createVNode("span",{class:"left"},[createVNode("i",{class:["iconfont",e.icon]},null,2),createVNode("span",{class:"text"},toDisplayString(e.platform),1)]),createVNode("span",{class:"right"},[createVNode("i",{class:"iconfont icon-next"})])]}),_:1},N,L)),ssrRenderSlot(e.$slots,"default",{},null,S,N,L),S("</div>");else return[createVNode("div",{class:"content"},[createVNode(w,{class:"title",href:e.href},{default:withCtx(()=>[createVNode("span",{class:"left"},[createVNode("i",{class:["iconfont",e.icon]},null,2),createVNode("span",{class:"text"},toDisplayString(e.platform),1)]),createVNode("span",{class:"right"},[createVNode("i",{class:"iconfont icon-next"})])]),_:1},8,["href"]),renderSlot(e.$slots,"default",{},void 0,!0)])]}),_:3},n)),t("</div>")}const _sfc_setup$_=_sfc_main$_.setup;_sfc_main$_.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/about/statistic/base.vue"),_sfc_setup$_?_sfc_setup$_(e,t):void 0};const StatisticBase=_export_sfc(_sfc_main$_,[["ssrRender",_sfc_ssrRender$_],["__scopeId","data-v-39e494cb"]]),_sfc_main$Z=defineComponent({name:"AboutPageDoubanStatistic",components:{StatisticBase,StatisticCount},setup(){const{isZhLang:e}=useEnhancer(),t=useDoubanMoviesStore(),n=ref(!0),o=computed(()=>{var d,g;return Math.trunc((g=(d=t.data)==null?void 0:d.total_spent)!=null?g:0)}),c=computed(()=>{var d,g;return((g=(d=t.data)==null?void 0:d.weekly_avg)!=null?g:0).toFixed(2)});return onMounted(()=>{t.fetch().finally(()=>{n.value=!1})}),{VALUABLE_LINKS,isZhLang:e,fetching:n,store:t,totalSpent:o,weeklyAvg:c}}});function _sfc_ssrRender$Z(e,t,n,o,c,d,g,r){const v=resolveComponent("statistic-base"),E=resolveComponent("i18n"),w=resolveComponent("statistic-count");t(ssrRenderComponent(v,mergeProps({brand:"douban",icon:"icon-douban",data:e.store.data,fetching:e.fetching,href:e.VALUABLE_LINKS.DOUBAN_MOVIE,platform:e.isZhLang?"\u6211\u5728\u8C46\u74E3":"Douban Movie"},o),{default:withCtx((T,S,N,L)=>{if(S)S(`<p${L}><i class="iconfont icon-video-outline"${L}></i>`),S(ssrRenderComponent(E,null,{zh:withCtx((P,O,V,D)=>{if(O)O(`<span${D}>\u6807\u8BB0\u770B\u8FC7</span>`),O(ssrRenderComponent(w,{large:"",primary:"",split:"",count:e.store.data.total_collections},null,V,D)),O(`<span${D}>\u90E8\u5F71\u7247</span>`);else return[createVNode("span",null,"\u6807\u8BB0\u770B\u8FC7"),createVNode(w,{large:"",primary:"",split:"",count:e.store.data.total_collections},null,8,["count"]),createVNode("span",null,"\u90E8\u5F71\u7247")]}),en:withCtx((P,O,V,D)=>{if(O)O(ssrRenderComponent(w,{large:"",primary:"",split:"",count:e.store.data.total_collections},null,V,D)),O(`<span${D}>films marked</span>`);else return[createVNode(w,{large:"",primary:"",split:"",count:e.store.data.total_collections},null,8,["count"]),createVNode("span",null,"films marked")]}),_:1},N,L)),S(`</p><p${L}><i class="iconfont icon-clock-outline"${L}></i>`),S(ssrRenderComponent(E,null,{zh:withCtx((P,O,V,D)=>{if(O)O(`<span${D}>\u7D2F\u8BA1\u82B1\u8D39</span>`),O(ssrRenderComponent(w,{split:"",count:e.totalSpent},null,V,D)),O(`<span${D}>\u5C0F\u65F6</span>`);else return[createVNode("span",null,"\u7D2F\u8BA1\u82B1\u8D39"),createVNode(w,{split:"",count:e.totalSpent},null,8,["count"]),createVNode("span",null,"\u5C0F\u65F6")]}),en:withCtx((P,O,V,D)=>{if(O)O(ssrRenderComponent(w,{split:"",count:e.totalSpent},null,V,D)),O(`<span${D}>hrs watching</span>`);else return[createVNode(w,{split:"",count:e.totalSpent},null,8,["count"]),createVNode("span",null,"hrs watching")]}),_:1},N,L)),S(`</p><p${L}><i class="iconfont icon-week"${L}></i>`),S(ssrRenderComponent(E,null,{zh:withCtx((P,O,V,D)=>{if(O)O("\u5E73\u5747\u6BCF\u5468 "),O(ssrRenderComponent(w,{count:e.weeklyAvg},null,V,D)),O(" \u90E8\u5F71\u7247");else return[createTextVNode("\u5E73\u5747\u6BCF\u5468 "),createVNode(w,{count:e.weeklyAvg},null,8,["count"]),createTextVNode(" \u90E8\u5F71\u7247")]}),en:withCtx((P,O,V,D)=>{if(O)O(ssrRenderComponent(w,{count:e.weeklyAvg},null,V,D)),O(" films per week");else return[createVNode(w,{count:e.weeklyAvg},null,8,["count"]),createTextVNode(" films per week")]}),_:1},N,L)),S("</p>");else return[createVNode("p",null,[createVNode("i",{class:"iconfont icon-video-outline"}),createVNode(E,null,{zh:withCtx(()=>[createVNode("span",null,"\u6807\u8BB0\u770B\u8FC7"),createVNode(w,{large:"",primary:"",split:"",count:e.store.data.total_collections},null,8,["count"]),createVNode("span",null,"\u90E8\u5F71\u7247")]),en:withCtx(()=>[createVNode(w,{large:"",primary:"",split:"",count:e.store.data.total_collections},null,8,["count"]),createVNode("span",null,"films marked")]),_:1})]),createVNode("p",null,[createVNode("i",{class:"iconfont icon-clock-outline"}),createVNode(E,null,{zh:withCtx(()=>[createVNode("span",null,"\u7D2F\u8BA1\u82B1\u8D39"),createVNode(w,{split:"",count:e.totalSpent},null,8,["count"]),createVNode("span",null,"\u5C0F\u65F6")]),en:withCtx(()=>[createVNode(w,{split:"",count:e.totalSpent},null,8,["count"]),createVNode("span",null,"hrs watching")]),_:1})]),createVNode("p",null,[createVNode("i",{class:"iconfont icon-week"}),createVNode(E,null,{zh:withCtx(()=>[createTextVNode("\u5E73\u5747\u6BCF\u5468 "),createVNode(w,{count:e.weeklyAvg},null,8,["count"]),createTextVNode(" \u90E8\u5F71\u7247")]),en:withCtx(()=>[createVNode(w,{count:e.weeklyAvg},null,8,["count"]),createTextVNode(" films per week")]),_:1})])]}),_:1},n))}const _sfc_setup$Z=_sfc_main$Z.setup;_sfc_main$Z.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/about/statistic/douban.vue"),_sfc_setup$Z?_sfc_setup$Z(e,t):void 0};const DoubanStatistic=_export_sfc(_sfc_main$Z,[["ssrRender",_sfc_ssrRender$Z]]),_sfc_main$Y=defineComponent({name:"AboutPageGitHubStatistic",components:{StatisticBase,StatisticCount},setup(){const{isZhLang:e}=useEnhancer(),t=ref(!0),n=useGitHubStatisticStore();return onMounted(()=>{n.fetch().finally(()=>{t.value=!1})}),{VALUABLE_LINKS,isZhLang:e,fetching:t,store:n}}});function _sfc_ssrRender$Y(e,t,n,o,c,d,g,r){const v=resolveComponent("statistic-base"),E=resolveComponent("i18n"),w=resolveComponent("statistic-count");t(ssrRenderComponent(v,mergeProps({brand:"github",icon:"icon-github",data:e.store.data,fetching:e.fetching,href:e.VALUABLE_LINKS.GITHUB,platform:e.isZhLang?"\u6211\u5728 GitHub":"GitHub"},o),{default:withCtx((T,S,N,L)=>{if(S)S(`<p${L}><i class="iconfont icon-star-outline"${L}></i>`),S(ssrRenderComponent(E,null,{zh:withCtx((P,O,V,D)=>{var U,W;if(O)O(`<span${D}>\u5171\u83B7\u5F97</span>`),O(ssrRenderComponent(w,{large:"",primary:"",split:"",count:(U=e.store.data)==null?void 0:U.statistics.stars},null,V,D)),O(`<span${D}>\u4E2A star</span>`);else return[createVNode("span",null,"\u5171\u83B7\u5F97"),createVNode(w,{large:"",primary:"",split:"",count:(W=e.store.data)==null?void 0:W.statistics.stars},null,8,["count"]),createVNode("span",null,"\u4E2A star")]}),en:withCtx((P,O,V,D)=>{var U,W;if(O)O(ssrRenderComponent(w,{large:"",primary:"",split:"",count:(U=e.store.data)==null?void 0:U.statistics.stars},null,V,D)),O(`<span${D}>stars</span>`);else return[createVNode(w,{large:"",primary:"",split:"",count:(W=e.store.data)==null?void 0:W.statistics.stars},null,8,["count"]),createVNode("span",null,"stars")]}),_:1},N,L)),S(`</p><p${L}><i class="iconfont icon-repository"${L}></i>`),S(ssrRenderComponent(E,null,{zh:withCtx((P,O,V,D)=>{var U,W;if(O)O(`<span${D}>\u5171\u7EF4\u62A4</span>`),O(ssrRenderComponent(w,{count:(U=e.store.data)==null?void 0:U.repositories.length},null,V,D)),O(`<span${D}>\u4E2A\u5F00\u6E90\u9879\u76EE</span>`);else return[createVNode("span",null,"\u5171\u7EF4\u62A4"),createVNode(w,{count:(W=e.store.data)==null?void 0:W.repositories.length},null,8,["count"]),createVNode("span",null,"\u4E2A\u5F00\u6E90\u9879\u76EE")]}),en:withCtx((P,O,V,D)=>{var U,W;if(O)O(ssrRenderComponent(w,{count:(U=e.store.data)==null?void 0:U.repositories.length},null,V,D)),O(`<span${D}>repositories</span>`);else return[createVNode(w,{count:(W=e.store.data)==null?void 0:W.repositories.length},null,8,["count"]),createVNode("span",null,"repositories")]}),_:1},N,L)),S(`</p><p${L}><i class="iconfont icon-organization"${L}></i>`),S(ssrRenderComponent(E,null,{zh:withCtx((P,O,V,D)=>{var U,W;if(O)O(`<span${D}>\u7EF4\u62A4/\u53D1\u8D77</span>`),O(ssrRenderComponent(w,{count:(U=e.store.data)==null?void 0:U.organizations.length},null,V,D)),O(`<span${D}>\u4E2A\u5F00\u6E90\u7EC4\u7EC7</span>`);else return[createVNode("span",null,"\u7EF4\u62A4/\u53D1\u8D77"),createVNode(w,{count:(W=e.store.data)==null?void 0:W.organizations.length},null,8,["count"]),createVNode("span",null,"\u4E2A\u5F00\u6E90\u7EC4\u7EC7")]}),en:withCtx((P,O,V,D)=>{var U,W;if(O)O(ssrRenderComponent(w,{count:(U=e.store.data)==null?void 0:U.organizations.length},null,V,D)),O(`<span${D}>organizations</span>`);else return[createVNode(w,{count:(W=e.store.data)==null?void 0:W.organizations.length},null,8,["count"]),createVNode("span",null,"organizations")]}),_:1},N,L)),S("</p>");else return[createVNode("p",null,[createVNode("i",{class:"iconfont icon-star-outline"}),createVNode(E,null,{zh:withCtx(()=>{var P;return[createVNode("span",null,"\u5171\u83B7\u5F97"),createVNode(w,{large:"",primary:"",split:"",count:(P=e.store.data)==null?void 0:P.statistics.stars},null,8,["count"]),createVNode("span",null,"\u4E2A star")]}),en:withCtx(()=>{var P;return[createVNode(w,{large:"",primary:"",split:"",count:(P=e.store.data)==null?void 0:P.statistics.stars},null,8,["count"]),createVNode("span",null,"stars")]}),_:1})]),createVNode("p",null,[createVNode("i",{class:"iconfont icon-repository"}),createVNode(E,null,{zh:withCtx(()=>{var P;return[createVNode("span",null,"\u5171\u7EF4\u62A4"),createVNode(w,{count:(P=e.store.data)==null?void 0:P.repositories.length},null,8,["count"]),createVNode("span",null,"\u4E2A\u5F00\u6E90\u9879\u76EE")]}),en:withCtx(()=>{var P;return[createVNode(w,{count:(P=e.store.data)==null?void 0:P.repositories.length},null,8,["count"]),createVNode("span",null,"repositories")]}),_:1})]),createVNode("p",null,[createVNode("i",{class:"iconfont icon-organization"}),createVNode(E,null,{zh:withCtx(()=>{var P;return[createVNode("span",null,"\u7EF4\u62A4/\u53D1\u8D77"),createVNode(w,{count:(P=e.store.data)==null?void 0:P.organizations.length},null,8,["count"]),createVNode("span",null,"\u4E2A\u5F00\u6E90\u7EC4\u7EC7")]}),en:withCtx(()=>{var P;return[createVNode(w,{count:(P=e.store.data)==null?void 0:P.organizations.length},null,8,["count"]),createVNode("span",null,"organizations")]}),_:1})])]}),_:1},n))}const _sfc_setup$Y=_sfc_main$Y.setup;_sfc_main$Y.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/about/statistic/github.vue"),_sfc_setup$Y?_sfc_setup$Y(e,t):void 0};const GithubStatistic=_export_sfc(_sfc_main$Y,[["ssrRender",_sfc_ssrRender$Y]]),_sfc_main$X=defineComponent({name:"AboutPageTwitterStatistic",components:{StatisticBase,StatisticCount},setup(){const{isZhLang:e}=useEnhancer(),t=ref(!0),n=useTwitterUserinfoStore();return onMounted(()=>{n.fetch().finally(()=>{t.value=!1})}),{VALUABLE_LINKS,isZhLang:e,fetching:t,store:n}}});function _sfc_ssrRender$X(e,t,n,o,c,d,g,r){const v=resolveComponent("statistic-base"),E=resolveComponent("i18n"),w=resolveComponent("statistic-count");t(ssrRenderComponent(v,mergeProps({brand:"twitter",icon:"icon-twitter",data:e.store.data,fetching:e.fetching,href:e.VALUABLE_LINKS.TWITTER,platform:e.isZhLang?"\u6211\u5728\u63A8\u7279":"Twitter"},o),{default:withCtx((T,S,N,L)=>{if(S)S(`<p${L}><i class="iconfont icon-edit"${L}></i>`),S(ssrRenderComponent(E,null,{zh:withCtx((P,O,V,D)=>{var U,W;if(O)O(`<span${D}>\u53D1\u5E03\u4E86</span>`),O(ssrRenderComponent(w,{large:"",primary:"",split:"",count:(U=e.store.data)==null?void 0:U.public_metrics.tweet_count},null,V,D)),O(`<span${D}>\u6761\u63A8\u6587</span>`);else return[createVNode("span",null,"\u53D1\u5E03\u4E86"),createVNode(w,{large:"",primary:"",split:"",count:(W=e.store.data)==null?void 0:W.public_metrics.tweet_count},null,8,["count"]),createVNode("span",null,"\u6761\u63A8\u6587")]}),en:withCtx((P,O,V,D)=>{var U,W;if(O)O(ssrRenderComponent(w,{large:"",primary:"",split:"",count:(U=e.store.data)==null?void 0:U.public_metrics.tweet_count},null,V,D)),O(`<span${D}>tweets</span>`);else return[createVNode(w,{large:"",primary:"",split:"",count:(W=e.store.data)==null?void 0:W.public_metrics.tweet_count},null,8,["count"]),createVNode("span",null,"tweets")]}),_:1},N,L)),S(`</p><p${L}><i class="iconfont icon-following"${L}></i>`),S(ssrRenderComponent(E,null,{zh:withCtx((P,O,V,D)=>{var U,W;if(O)O(`<span${D}>\u5173\u6CE8\u4E86</span>`),O(ssrRenderComponent(w,{split:"",count:(U=e.store.data)==null?void 0:U.public_metrics.following_count},null,V,D)),O(`<span${D}>\u4E2A\u4EBA</span>`);else return[createVNode("span",null,"\u5173\u6CE8\u4E86"),createVNode(w,{split:"",count:(W=e.store.data)==null?void 0:W.public_metrics.following_count},null,8,["count"]),createVNode("span",null,"\u4E2A\u4EBA")]}),en:withCtx((P,O,V,D)=>{var U,W;if(O)O(ssrRenderComponent(w,{split:"",count:(U=e.store.data)==null?void 0:U.public_metrics.following_count},null,V,D)),O(`<span${D}>following</span>`);else return[createVNode(w,{split:"",count:(W=e.store.data)==null?void 0:W.public_metrics.following_count},null,8,["count"]),createVNode("span",null,"following")]}),_:1},N,L)),S(`</p><p${L}><i class="iconfont icon-follower"${L}></i>`),S(ssrRenderComponent(E,null,{zh:withCtx((P,O,V,D)=>{var U,W;if(O)O(`<span${D}>\u6536\u83B7\u4E86</span>`),O(ssrRenderComponent(w,{split:"",count:(U=e.store.data)==null?void 0:U.public_metrics.followers_count},null,V,D)),O(`<span${D}>\u4E2A\u7C89\u4E1D</span>`);else return[createVNode("span",null,"\u6536\u83B7\u4E86"),createVNode(w,{split:"",count:(W=e.store.data)==null?void 0:W.public_metrics.followers_count},null,8,["count"]),createVNode("span",null,"\u4E2A\u7C89\u4E1D")]}),en:withCtx((P,O,V,D)=>{var U,W;if(O)O(ssrRenderComponent(w,{split:"",count:(U=e.store.data)==null?void 0:U.public_metrics.followers_count},null,V,D)),O(`<span${D}>followers</span>`);else return[createVNode(w,{split:"",count:(W=e.store.data)==null?void 0:W.public_metrics.followers_count},null,8,["count"]),createVNode("span",null,"followers")]}),_:1},N,L)),S("</p>");else return[createVNode("p",null,[createVNode("i",{class:"iconfont icon-edit"}),createVNode(E,null,{zh:withCtx(()=>{var P;return[createVNode("span",null,"\u53D1\u5E03\u4E86"),createVNode(w,{large:"",primary:"",split:"",count:(P=e.store.data)==null?void 0:P.public_metrics.tweet_count},null,8,["count"]),createVNode("span",null,"\u6761\u63A8\u6587")]}),en:withCtx(()=>{var P;return[createVNode(w,{large:"",primary:"",split:"",count:(P=e.store.data)==null?void 0:P.public_metrics.tweet_count},null,8,["count"]),createVNode("span",null,"tweets")]}),_:1})]),createVNode("p",null,[createVNode("i",{class:"iconfont icon-following"}),createVNode(E,null,{zh:withCtx(()=>{var P;return[createVNode("span",null,"\u5173\u6CE8\u4E86"),createVNode(w,{split:"",count:(P=e.store.data)==null?void 0:P.public_metrics.following_count},null,8,["count"]),createVNode("span",null,"\u4E2A\u4EBA")]}),en:withCtx(()=>{var P;return[createVNode(w,{split:"",count:(P=e.store.data)==null?void 0:P.public_metrics.following_count},null,8,["count"]),createVNode("span",null,"following")]}),_:1})]),createVNode("p",null,[createVNode("i",{class:"iconfont icon-follower"}),createVNode(E,null,{zh:withCtx(()=>{var P;return[createVNode("span",null,"\u6536\u83B7\u4E86"),createVNode(w,{split:"",count:(P=e.store.data)==null?void 0:P.public_metrics.followers_count},null,8,["count"]),createVNode("span",null,"\u4E2A\u7C89\u4E1D")]}),en:withCtx(()=>{var P;return[createVNode(w,{split:"",count:(P=e.store.data)==null?void 0:P.public_metrics.followers_count},null,8,["count"]),createVNode("span",null,"followers")]}),_:1})])]}),_:1},n))}const _sfc_setup$X=_sfc_main$X.setup;_sfc_main$X.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/about/statistic/twitter.vue"),_sfc_setup$X?_sfc_setup$X(e,t):void 0};const TwitterStatistic=_export_sfc(_sfc_main$X,[["ssrRender",_sfc_ssrRender$X]]),_sfc_main$W=defineComponent({name:"AboutPageNPMStatistic",components:{StatisticBase,StatisticCount},setup(){const{isZhLang:e}=useEnhancer(),t=ref(!0),n=useNPMStatisticStore();return onMounted(()=>{n.fetch().finally(()=>{t.value=!1})}),{VALUABLE_LINKS,isZhLang:e,fetching:t,store:n}}}),npm_vue_vue_type_style_index_0_scoped_5f157c0c_lang="";function _sfc_ssrRender$W(e,t,n,o,c,d,g,r){const v=resolveComponent("statistic-base"),E=resolveComponent("i18n"),w=resolveComponent("statistic-count");t(ssrRenderComponent(v,mergeProps({brand:"npm",icon:"icon-npm",data:e.store.data,fetching:e.fetching,href:e.VALUABLE_LINKS.NPM_HOMEPAGE,platform:e.isZhLang?"\u6211\u5728 NPM":"NPM"},o),{default:withCtx((T,S,N,L)=>{if(S)S(`<p class="line-1" data-v-5f157c0c${L}><i class="iconfont icon-package" data-v-5f157c0c${L}></i>`),S(ssrRenderComponent(E,null,{zh:withCtx((P,O,V,D)=>{if(O)O(`<span data-v-5f157c0c${D}>\u53D1\u5E03\u4E86</span>`),O(ssrRenderComponent(w,{count:e.store.totalPackages},null,V,D)),O(`<span data-v-5f157c0c${D}>\u4E2A\u516C\u5171\u8F6F\u4EF6\u5305</span>`);else return[createVNode("span",null,"\u53D1\u5E03\u4E86"),createVNode(w,{count:e.store.totalPackages},null,8,["count"]),createVNode("span",null,"\u4E2A\u516C\u5171\u8F6F\u4EF6\u5305")]}),en:withCtx((P,O,V,D)=>{if(O)O(ssrRenderComponent(w,{count:e.store.totalPackages},null,V,D)),O(`<span data-v-5f157c0c${D}>packages</span>`);else return[createVNode(w,{count:e.store.totalPackages},null,8,["count"]),createVNode("span",null,"packages")]}),_:1},N,L)),S(`</p><p data-v-5f157c0c${L}><i class="iconfont icon-download" data-v-5f157c0c${L}></i>`),S(ssrRenderComponent(E,null,{zh:withCtx((P,O,V,D)=>{if(O)O(`<span data-v-5f157c0c${D}>\u88AB\u4E0B\u8F7D</span>`),O(ssrRenderComponent(w,{large:"",primary:"",split:"",count:e.store.totalDownloads},null,V,D)),O(`<span data-v-5f157c0c${D}>\u6B21</span>`);else return[createVNode("span",null,"\u88AB\u4E0B\u8F7D"),createVNode(w,{large:"",primary:"",split:"",count:e.store.totalDownloads},null,8,["count"]),createVNode("span",null,"\u6B21")]}),en:withCtx((P,O,V,D)=>{if(O)O(ssrRenderComponent(w,{large:"",primary:"",split:"",count:e.store.totalDownloads},null,V,D)),O(`<span data-v-5f157c0c${D}>downs</span>`);else return[createVNode(w,{large:"",primary:"",split:"",count:e.store.totalDownloads},null,8,["count"]),createVNode("span",null,"downs")]}),_:1},N,L)),S(`</p><p data-v-5f157c0c${L}><i class="iconfont icon-score" data-v-5f157c0c${L}></i>`),S(ssrRenderComponent(E,null,{zh:withCtx((P,O,V,D)=>{if(O)O(`<span data-v-5f157c0c${D}>\u5E73\u5747\u8BC4\u5206</span>`),O(ssrRenderComponent(w,{count:e.store.averageScore},null,V,D)),O(`<span data-v-5f157c0c${D}>\u5206</span>`);else return[createVNode("span",null,"\u5E73\u5747\u8BC4\u5206"),createVNode(w,{count:e.store.averageScore},null,8,["count"]),createVNode("span",null,"\u5206")]}),en:withCtx((P,O,V,D)=>{if(O)O(ssrRenderComponent(w,{count:e.store.averageScore},null,V,D)),O(`<span data-v-5f157c0c${D}>average score</span>`);else return[createVNode(w,{count:e.store.averageScore},null,8,["count"]),createVNode("span",null,"average score")]}),_:1},N,L)),S("</p>");else return[createVNode("p",{class:"line-1"},[createVNode("i",{class:"iconfont icon-package"}),createVNode(E,null,{zh:withCtx(()=>[createVNode("span",null,"\u53D1\u5E03\u4E86"),createVNode(w,{count:e.store.totalPackages},null,8,["count"]),createVNode("span",null,"\u4E2A\u516C\u5171\u8F6F\u4EF6\u5305")]),en:withCtx(()=>[createVNode(w,{count:e.store.totalPackages},null,8,["count"]),createVNode("span",null,"packages")]),_:1})]),createVNode("p",null,[createVNode("i",{class:"iconfont icon-download"}),createVNode(E,null,{zh:withCtx(()=>[createVNode("span",null,"\u88AB\u4E0B\u8F7D"),createVNode(w,{large:"",primary:"",split:"",count:e.store.totalDownloads},null,8,["count"]),createVNode("span",null,"\u6B21")]),en:withCtx(()=>[createVNode(w,{large:"",primary:"",split:"",count:e.store.totalDownloads},null,8,["count"]),createVNode("span",null,"downs")]),_:1})]),createVNode("p",null,[createVNode("i",{class:"iconfont icon-score"}),createVNode(E,null,{zh:withCtx(()=>[createVNode("span",null,"\u5E73\u5747\u8BC4\u5206"),createVNode(w,{count:e.store.averageScore},null,8,["count"]),createVNode("span",null,"\u5206")]),en:withCtx(()=>[createVNode(w,{count:e.store.averageScore},null,8,["count"]),createVNode("span",null,"average score")]),_:1})])]}),_:1},n))}const _sfc_setup$W=_sfc_main$W.setup;_sfc_main$W.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/about/statistic/npm.vue"),_sfc_setup$W?_sfc_setup$W(e,t):void 0};const NpmStatistic=_export_sfc(_sfc_main$W,[["ssrRender",_sfc_ssrRender$W],["__scopeId","data-v-5f157c0c"]]),_sfc_main$V=defineComponent({name:"AggregateCalendarDay",props:{date:{type:String,required:!0},tweets:{type:Number,required:!0},instagrams:{type:Number,required:!0},articles:{type:Number,required:!0},contributions:{type:Number,required:!0},githubColor:String},setup(e){const{isDarkTheme:t}=useEnhancer(),n=computed(()=>e.articles+e.tweets+e.contributions+e.instagrams);return{isDarkTheme:t,total:n,getPointHeightStyle:c=>isNaN(c)?0:`${Math.floor(c*100)}%`}}}),day_vue_vue_type_style_index_0_scoped_8767dbcf_lang="";function _sfc_ssrRender$V(e,t,n,o,c,d,g,r){t(`<div${ssrRenderAttrs(mergeProps({class:["day",{dark:e.isDarkTheme}],"data-date":e.date,"data-total-count":e.total,"data-article-count":e.articles,"data-tweet-count":e.tweets,"data-instagram-count":e.instagrams,"data-contribution-count":e.contributions},o))} data-v-8767dbcf><div class="point" data-v-8767dbcf><div class="item article" style="${ssrRenderStyle({height:e.getPointHeightStyle(e.articles/e.total)})}" data-v-8767dbcf></div><div class="item tweet" style="${ssrRenderStyle({height:e.getPointHeightStyle(e.tweets/e.total)})}" data-v-8767dbcf></div><div class="item instagram" style="${ssrRenderStyle({height:e.getPointHeightStyle(e.instagrams/e.total)})}" data-v-8767dbcf></div><div class="item contribution" style="${ssrRenderStyle({height:e.getPointHeightStyle(e.contributions/e.total),backgroundColor:e.githubColor})}" data-v-8767dbcf></div></div>`),e.total?t(`<div class="tooltip" data-v-8767dbcf><p class="date" data-v-8767dbcf>${ssrInterpolate(e.date)}</p><ul class="counts" data-v-8767dbcf><li class="item article" data-v-8767dbcf><i class="iconfont icon-quill" data-v-8767dbcf></i><span class="count" data-v-8767dbcf>${ssrInterpolate(e.articles)}</span> articles </li><li class="item tweet" data-v-8767dbcf><i class="iconfont icon-twitter" data-v-8767dbcf></i><span class="count" data-v-8767dbcf>${ssrInterpolate(e.tweets)}</span> tweets </li><li class="item instagram" data-v-8767dbcf><i class="iconfont icon-instagram" data-v-8767dbcf></i><span class="count" data-v-8767dbcf>${ssrInterpolate(e.instagrams)}</span> instagrams </li><li class="item contribution" data-v-8767dbcf><i class="iconfont icon-github" data-v-8767dbcf></i><span class="count" data-v-8767dbcf>${ssrInterpolate(e.contributions)}</span> contributions </li></ul></div>`):t("<!---->"),t("</div>")}const _sfc_setup$V=_sfc_main$V.setup;_sfc_main$V.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/about/calendar/day.vue"),_sfc_setup$V?_sfc_setup$V(e,t):void 0};const CalendarDay=_export_sfc(_sfc_main$V,[["ssrRender",_sfc_ssrRender$V],["__scopeId","data-v-8767dbcf"]]),_sfc_main$U=defineComponent({name:"AggregateCalendar",components:{CalendarDay},setup(){const{gtag:e}=useEnhancer(),{articleCalendar:t,twitterCalendar:n,instagramCalendar:o,githubCalendar:c}=useStores(),d=computed(()=>new Map(c.days.map(V=>[V.date,V]))),g=V=>{var D;return((D=d.value.get(V))==null?void 0:D.count)||0},r=V=>{var D;return(D=d.value.get(V))==null?void 0:D.color},v=V=>{var D;return((D=n.data.find(U=>U.date===V))==null?void 0:D.count)||0},E=V=>{var D;return((D=o.data.find(U=>U.date===V))==null?void 0:D.count)||0},w=V=>{var D;return((D=t.data.find(U=>U.date===V))==null?void 0:D.count)||0},T=()=>{e==null||e.event("aggregate_calendar",{event_category:GAEventCategories.About})},S=new Date,N=dateToHuman(S),L=Array.from({length:N.day}).map((V,D)=>humanDateToYMD({...N,day:D+1})),P=(V,D)=>{const U=new Date(V.year,V.month-D,0),W=U.getDate();return Array.from({length:W}).map((Z,re)=>humanDateToYMD({...dateToHuman(U),day:re+1}))},O=[P(N,11),P(N,10),P(N,9),P(N,8),P(N,7),P(N,6),P(N,5),P(N,4),P(N,3),P(N,2),P(N,1),L];return onMounted(()=>{t.fetch(),n.fetch(),o.fetch(),c.fetch()}),{months:O,handleHover:T,getDayTweets:v,getDayArticles:w,getDayInstagrams:E,getDayContributions:g,getDayGitHubColor:r}}}),index_vue_vue_type_style_index_0_scoped_0b5e9a9a_lang="";function _sfc_ssrRender$U(e,t,n,o,c,d,g,r){const v=resolveComponent("calendar-day");t(`<ul${ssrRenderAttrs(mergeProps({class:"aggregate-calendar"},o))} data-v-0b5e9a9a><!--[-->`),ssrRenderList(e.months,(E,w)=>{t('<li class="month" data-v-0b5e9a9a><!--[-->'),ssrRenderList(E,(T,S)=>{t(ssrRenderComponent(v,{key:S,date:T,articles:e.getDayArticles(T),tweets:e.getDayTweets(T),instagrams:e.getDayInstagrams(T),contributions:e.getDayContributions(T),"github-color":e.getDayGitHubColor(T)},null,n))}),t("<!--]--></li>")}),t("<!--]--></ul>")}const _sfc_setup$U=_sfc_main$U.setup;_sfc_main$U.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/about/calendar/index.vue"),_sfc_setup$U?_sfc_setup$U(e,t):void 0};const AggregateCalendar=_export_sfc(_sfc_main$U,[["ssrRender",_sfc_ssrRender$U],["__scopeId","data-v-0b5e9a9a"]]),getAdminAvatar=e=>e||getDefaultAvatar(),i18ns={footprint:{[Language.Chinese]:"\u8DEF\u4E3A\u7EB8\uFF0C\u5730\u6210\u518C\uFF0C\u884C\u4F5C\u7B14\uFF0C\u5FC3\u5F53\u58A8\uFF1B\u601D\u65E0\u754C\uFF0C\u884C\u6709\u7586",[Language.English]:"Every path i went astray built up my Rome."},sponsor:{[Language.Chinese]:"\u5411\u6211\u8D5E\u52A9",[Language.English]:"Sponsor"},statement:{[Language.Chinese]:"\u4F17\u800C\u5468\u77E5",[Language.English]:"Statement"},feedback:{[Language.Chinese]:"\u5411\u6211\u53CD\u9988",[Language.English]:"Feedback"},archive:{[Language.Chinese]:"\u7B14\u6587\u5B58\u6863",[Language.English]:"Archive"},lens:{[Language.Chinese]:"\u884C\u884C\u6444\u6444",[Language.English]:"Lens view"},guestbook:{[Language.Chinese]:"\u7ED9\u6211\u7559\u8A00",[Language.English]:"Guestbook"},nft:{[Language.Chinese]:"\u6570\u5B57\u85CF\u54C1",[Language.English]:"NFTs"},rss:{[Language.Chinese]:"\u957F\u671F\u8BA2\u9605",[Language.English]:"Subscribe"},discordGroup:{[Language.Chinese]:"\u56FD\u9645\u8054\u8C0A",[Language.English]:"Discord"},telegramGroup:{[Language.Chinese]:"\u81EA\u7531\u62A5\u793E",[Language.English]:"TG Group"}},useAboutPageMeta=()=>{const{i18n:e,meta:t,isZhLang:n}=useEnhancer(),{adminInfo:o}=useStores();return t(()=>{var g;const c=firstUpperCase(e.t(LanguageKey.PAGE_ABOUT,Language.English));return{pageTitle:(n.value?[e.t(LanguageKey.PAGE_ABOUT),c]:[c]).join(" | "),description:`\u5173\u4E8E ${META.author}`,ogType:"profile",ogImage:getAdminAvatar((g=o.data)==null?void 0:g.avatar)}})},SPECIAL_LINKS=Object.freeze([{name:"GitHub",url:"https://github.com"},{name:"Vite",url:"https://vitejs.dev/"},{name:"Disqus",url:"https://disqus.com/"}]),gmmFoldersToGeoJSON=e=>({type:"FeatureCollection",features:e.map(t=>t.placemarks).flat().map(t=>({type:"Feature",geometry:{type:"Point",coordinates:t.coordinates},properties:{...t,icon:t.image?"attraction":"veterinary"}}))}),geoJSONFeatureToLayer=(e,t)=>({id:e,source:t,type:"symbol",layout:{"icon-allow-overlap":!0,"icon-size":1.2,"icon-image":["get","icon"],"text-field":["get","name"],"text-font":["Open Sans Bold","Arial Unicode MS Bold"],"text-size":11,"text-letter-spacing":.05,"text-offset":[0,1],"text-anchor":"top"},paint:{"text-color":"#202","text-halo-color":"#fff","text-halo-width":2}}),newMapboxPopup=(e,t,n)=>new e.Popup({closeButton:!1,offset:[0,-16],maxWidth:"280px"}).setLngLat(t).setHTML(n),mapboxGl$3="",_sfc_main$T=defineComponent({name:"FootprintMapbox",props:{gmGeoJson:Object},emits:["ready"],setup(e,t){const{isDarkTheme:n}=useEnhancer(),o=shallowRef(),c=shallowRef(),d=shallowRef(),g=shallowRef(!1),r=()=>n.value?MAPBOX_CONFIG.STYLE_DARK:MAPBOX_CONFIG.STYLE_LIGHT,v=()=>{var E;if(g.value&&(E=e.gmGeoJson)!=null&&E.features.length){const w=d.value,T="placemarks";w.getLayer(T)||(w.addLayer(geoJSONFeatureToLayer(T,{type:"geojson",data:e.gmGeoJson})),w.on("mouseenter",T,()=>{w.getCanvas().style.cursor="pointer"}),w.on("mouseleave",T,()=>{w.getCanvas().style.cursor=""}),w.on("click",T,S=>{const N=S.features[0].geometry.coordinates.slice(),L=S.features[0].properties.description;for(;Math.abs(S.lngLat.lng-N[0])>180;)N[0]+=S.lngLat.lng>N[0]?360:-360;newMapboxPopup(c.value,N,L).addTo(w)}))}};return watch(()=>n.value,()=>{var E;return(E=d.value)==null?void 0:E.setStyle(r())}),watch(()=>e.gmGeoJson,()=>v()),onMounted(()=>{Promise.all([Promise.resolve().then(()=>mapboxGl$1).then(E=>E.default),new Promise(E=>window.setTimeout(E,600))]).then(([E])=>{E.accessToken=MAPBOX_CONFIG.TOKEN,c.value=E,d.value=new E.Map({container:o.value,center:MAPBOX_CONFIG.CENTER,zoom:MAPBOX_CONFIG.ZOOM,attributionControl:!1,style:r()}),new E.Marker({color:META.primary,anchor:"bottom"}).setLngLat(GEO_INFO.coordinates).addTo(d.value),d.value.on("style.load",()=>{v()}),d.value.on("load",()=>{g.value=!0,v(),t.emit("ready",{map:d.value,lib:c.value})})})}),onBeforeUnmount(()=>{var E;(E=d.value)==null||E.remove()}),{mapboxRef:o}}}),mapbox_vue_vue_type_style_index_0_scoped_b2933bab_lang="";function _sfc_ssrRender$T(e,t,n,o,c,d,g,r){t(`<div${ssrRenderAttrs(mergeProps({class:"mapbox",ref:"mapboxRef"},o))} data-v-b2933bab></div>`)}const _sfc_setup$T=_sfc_main$T.setup;_sfc_main$T.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/about/footprint/mapbox.vue"),_sfc_setup$T?_sfc_setup$T(e,t):void 0};const Mapbox=_export_sfc(_sfc_main$T,[["ssrRender",_sfc_ssrRender$T],["__scopeId","data-v-b2933bab"]]),_sfc_main$S=defineComponent({name:"FootprintModal",components:{Mapbox},props:{name:String,description:String,gmGeoJson:Object,gmFolders:Array},setup(){const{isZhLang:e}=useEnhancer(),t=shallowRef(),n=shallowRef(),o=g=>{t.value=g.lib,n.value=g.map};let c=null;return{GEO_INFO,VALUABLE_LINKS,isZhLang:e,handlePlacemarkClick:g=>{n.value&&(c==null||c.remove(),c=newMapboxPopup(t.value,g.coordinates,g.description).addTo(n.value),n.value.flyTo({center:g.coordinates,zoom:10,speed:1.2,curve:1.2}))},handleMapboxReady:o}}}),modal_vue_vue_type_style_index_0_scoped_bb9201e7_lang="";function _sfc_ssrRender$S(e,t,n,o,c,d,g,r){var w,T;const v=resolveComponent("mapbox"),E=resolveComponent("uimage");t(`<div${ssrRenderAttrs(mergeProps({class:"modal"},o))} data-v-bb9201e7>`),t(ssrRenderComponent(v,{class:"mapbox","gm-geo-json":e.gmGeoJson,onReady:e.handleMapboxReady},null,n)),t(`<div class="panel" data-v-bb9201e7><div class="info" data-v-bb9201e7><h3 class="title" data-v-bb9201e7>${ssrInterpolate((w=e.name)!=null?w:"-")}</h3><p class="description" data-v-bb9201e7>${ssrInterpolate((T=e.description)!=null?T:"-")}</p></div><ul class="folders" data-v-bb9201e7><!--[-->`),ssrRenderList(e.gmFolders,(S,N)=>{t(`<li class="folder" data-v-bb9201e7><div class="title" data-v-bb9201e7><i class="iconfont icon-route" data-v-bb9201e7></i><span class="text" data-v-bb9201e7>${ssrInterpolate(S.name)}</span><span class="count" data-v-bb9201e7>(${ssrInterpolate(S.placemarks.length)})</span></div>`),S.placemarks.length?(t('<ul class="placemarks" data-v-bb9201e7><!--[-->'),ssrRenderList(S.placemarks,(L,P)=>{t('<li class="placemark" data-v-bb9201e7>'),t(ssrRenderComponent(E,{class:"icon",cdn:!0,src:`/images/third-party/mapbox-${L.image?"attraction":"veterinary"}.svg`},null,n)),t(`<span class="text" data-v-bb9201e7>${ssrInterpolate(L.name)}</span></li>`)}),t("<!--]--></ul>")):t('<div class="empty" data-v-bb9201e7>null</div>'),t("</li>")}),t("<!--]--></ul></div></div>")}const _sfc_setup$S=_sfc_main$S.setup;_sfc_main$S.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/about/footprint/modal.vue"),_sfc_setup$S?_sfc_setup$S(e,t):void 0};const FootprintModal=_export_sfc(_sfc_main$S,[["ssrRender",_sfc_ssrRender$S],["__scopeId","data-v-bb9201e7"]]),_sfc_main$R=defineComponent({name:"AboutPageFootprint",components:{Mapbox,FootprintModal},setup(){const{isZhLang:e}=useEnhancer(),t=shallowRef(),n=shallowRef(!1),o=useMyGoogleMapStore(),c=computed(()=>{var T,S;const w=[...(S=(T=o.data)==null?void 0:T.Folder)!=null?S:[]];return w.reverse(),w.map((N,L)=>{var V;const P=(V=N.Placemark)!=null?V:[],O=Array.isArray(P)?P:[P];return{name:N.name,placemarks:O.map((D,U)=>{var ae;const[W,Z]=D.Point.coordinates.split(",").map(Number),re=(ae=D.ExtendedData)==null?void 0:ae.Data;return{index:U,id:`placemark-${L}-${U}`,name:D.name,description:D.description,coordinates:[W,Z],image:(re==null?void 0:re["@name"])==="gx_media_links"?re==null?void 0:re.value:null}})}})}),d=computed(()=>gmmFoldersToGeoJSON(c.value)),g=()=>{n.value=!0},r=w=>{var N;const T=c.value[w],[S]=T.placemarks;S&&((N=t.value)==null||N.flyTo({center:S.coordinates,zoom:4,speed:1.2}))},v=w=>{t.value=w.map},E=()=>{var w;(w=t.value)==null||w.flyTo({center:GEO_INFO.coordinates,zoom:14})};return onMounted(()=>{o.fetch()}),{GEO_INFO,VALUABLE_LINKS,isZhLang:e,i18ns,modalVisible:n,gmStore:o,gmFolders:c,gmGeoJson:d,openModal:g,handleMapboxReady:v,handleFolderClick:r,handleLivingNow:E}}}),index_vue_vue_type_style_index_0_scoped_21a51e26_lang="";function _sfc_ssrRender$R(e,t,n,o,c,d,g,r){const v=resolveComponent("client-only"),E=resolveComponent("popup"),w=resolveComponent("footprint-modal"),T=resolveComponent("mapbox"),S=resolveComponent("ulink");t(`<div${ssrRenderAttrs(mergeProps({class:"footprint-map"},o))} data-v-21a51e26>`),t(ssrRenderComponent(v,null,{default:withCtx((N,L,P,O)=>{if(L)L(ssrRenderComponent(E,{visible:e.modalVisible,"onUpdate:visible":V=>e.modalVisible=V,"scroll-close":!1},{default:withCtx((V,D,U,W)=>{var Z,re,ae,ce;if(D)D(ssrRenderComponent(w,{class:"footprint-modal",name:(Z=e.gmStore.data)==null?void 0:Z.name,description:(re=e.gmStore.data)==null?void 0:re.description,"gm-folders":e.gmFolders,"gm-geo-json":e.gmGeoJson},null,U,W));else return[createVNode(w,{class:"footprint-modal",name:(ae=e.gmStore.data)==null?void 0:ae.name,description:(ce=e.gmStore.data)==null?void 0:ce.description,"gm-folders":e.gmFolders,"gm-geo-json":e.gmGeoJson},null,8,["name","description","gm-folders","gm-geo-json"])]}),_:1},P,O));else return[createVNode(E,{visible:e.modalVisible,"onUpdate:visible":V=>e.modalVisible=V,"scroll-close":!1},{default:withCtx(()=>{var V,D;return[createVNode(w,{class:"footprint-modal",name:(V=e.gmStore.data)==null?void 0:V.name,description:(D=e.gmStore.data)==null?void 0:D.description,"gm-folders":e.gmFolders,"gm-geo-json":e.gmGeoJson},null,8,["name","description","gm-folders","gm-geo-json"])]}),_:1},8,["visible","onUpdate:visible"])]}),_:1},n)),t(`<div class="mapbox-wrapper"${ssrRenderAttr("placeholder",e.isZhLang?e.i18ns.footprint.zh:e.i18ns.footprint.en)} data-v-21a51e26>`),t(ssrRenderComponent(T,{class:"mapbox","gm-geo-json":e.gmGeoJson,onReady:e.handleMapboxReady},null,n)),t('<div class="toolbar" data-v-21a51e26>'),t(ssrRenderComponent(S,{class:"button",href:e.VALUABLE_LINKS.GOOGLE_MY_MAP},{default:withCtx((N,L,P,O)=>{if(L)L(`<i class="iconfont icon-google-maps" data-v-21a51e26${O}></i>`);else return[createVNode("i",{class:"iconfont icon-google-maps"})]}),_:1},n)),t(`<button class="button" data-v-21a51e26><i class="iconfont icon-fullscreen" data-v-21a51e26></i></button></div></div><div class="legends" data-v-21a51e26><div class="now" data-v-21a51e26><i class="iconfont icon-location" data-v-21a51e26></i><span class="text" data-v-21a51e26>${ssrInterpolate(e.isZhLang?e.GEO_INFO.zh_title:e.GEO_INFO.en_title)}</span></div>`),e.gmStore.data?(t('<ul class="folders" data-v-21a51e26><!--[-->'),ssrRenderList(e.gmFolders.slice(0,4),(N,L)=>{t(`<li class="item" data-v-21a51e26><i class="iconfont icon-route" data-v-21a51e26></i><span class="text" data-v-21a51e26>${ssrInterpolate(N.name)}</span><span class="count" data-v-21a51e26>(${ssrInterpolate(N.placemarks.length)})</span></li>`)}),t('<!--]--><li class="item" data-v-21a51e26><i class="iconfont icon-route" data-v-21a51e26></i><span class="text" data-v-21a51e26>\u2022\u2022\u2022</span></li></ul>')):t("<!---->"),t("</div></div>")}const _sfc_setup$R=_sfc_main$R.setup;_sfc_main$R.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/about/footprint/index.vue"),_sfc_setup$R?_sfc_setup$R(e,t):void 0};const FootprintMap=_export_sfc(_sfc_main$R,[["ssrRender",_sfc_ssrRender$R],["__scopeId","data-v-21a51e26"]]),_sfc_main$Q=defineComponent({name:"DesktopAboutPage",components:{FootprintMap,AggregateCalendar,DoubanStatistic,GithubStatistic,NpmStatistic,TwitterStatistic,InstagramMedia},setup(){const{gtag:e,globalState:t,isZhLang:n,isDarkTheme:o}=useEnhancer(),{adminInfo:c,appOption:d}=useStores(),g=L=>{e==null||e.event(L,{event_category:GAEventCategories.About})},r=reactive({wechat:!1}),v=()=>{r.wechat=!0,g("wechat_modal")},E=()=>{t.toggleSwitcher("sponsor",!0),g("sponsor_modal")},w=()=>{t.toggleSwitcher("statement",!0),g("statement_modal")},T=()=>{t.toggleSwitcher("feedback",!0),g("feedback_modal")},S=getTargetStaticURL("/assets/page-about-background.mp4");useAboutPageMeta(),useUniversalFetch(()=>Promise.all([c.fetch(),d.fetch()]));const N=[{class:"lens",icon:"icon-lens",i18n:i18ns.lens,route:getPageRoute(RouteName.Lens)},{class:"nft",icon:"icon-opensea",i18n:i18ns.nft,route:getPageRoute(RouteName.Nft)},{class:"archive",icon:"icon-quill",i18n:i18ns.archive,route:getPageRoute(RouteName.Archive)},{class:"guestbook",icon:"icon-comment",i18n:i18ns.guestbook,route:getPageRoute(RouteName.Guestbook)},{class:"feedback",icon:"icon-mail-plane",i18n:i18ns.feedback,onClick:T},{class:"telegram",icon:"icon-telegram",i18n:i18ns.telegramGroup,href:VALUABLE_LINKS.TELEGRAM_GROUP},{class:"discord",icon:"icon-discord",i18n:i18ns.discordGroup,href:VALUABLE_LINKS.DISCORD_GROUP},{class:"sponsor",icon:"icon-heart",i18n:i18ns.sponsor,onClick:E},{class:"statement",icon:"icon-faq",i18n:i18ns.statement,onClick:w},{class:"rss",icon:"icon-rss",i18n:i18ns.rss,href:VALUABLE_LINKS.RSS}];return{i18ns,links:N,META,VALUABLE_LINKS,SPECIAL_LINKS,isZhLang:n,isDarkTheme:o,modalState:r,backgroundVideo:S,adminInfo:c,appOption:d,getAdminAvatar,handleGTagEvent:g,handleFeedback:T,handleStatement:w,handleOpenWechat:v}}}),desktop_vue_vue_type_style_index_0_scoped_2981f956_lang="";function _sfc_ssrRender$Q(e,t,n,o,c,d,g,r){var ae,ce,ne;const v=resolveComponent("uimage"),E=resolveComponent("webfont"),w=resolveComponent("ulink"),T=resolveComponent("client-only"),S=resolveComponent("popup"),N=resolveComponent("i18n"),L=resolveComponent("container"),P=resolveComponent("github-statistic"),O=resolveComponent("npm-statistic"),V=resolveComponent("twitter-statistic"),D=resolveComponent("douban-statistic"),U=resolveComponent("instagram-media"),W=resolveComponent("footprint-map"),Z=resolveComponent("aggregate-calendar"),re=resolveComponent("divider");t(`<div${ssrRenderAttrs(mergeProps({class:"about-page"},o))} data-v-2981f956><div class="page-banner" data-v-2981f956><div class="background" data-v-2981f956><video class="video" loop muted autoplay${includeBooleanAttr(!1)?" controls":""} data-v-2981f956><source${ssrRenderAttr("src",e.backgroundVideo)} type="video/mp4" data-v-2981f956></video></div><div class="content" data-v-2981f956>`),t(ssrRenderComponent(v,{class:"avatar",src:e.getAdminAvatar((ae=e.adminInfo.data)==null?void 0:ae.avatar)},null,n)),t(`<h1 class="name" data-v-2981f956>${ssrInterpolate(((ce=e.adminInfo.data)==null?void 0:ce.name)||"-")}</h1><p class="slogan" data-v-2981f956>${ssrInterpolate(((ne=e.adminInfo.data)==null?void 0:ne.slogan)||"-")}</p><p class="biography" data-v-2981f956>`),t(ssrRenderComponent(E,{bolder:""},{default:withCtx((le,de,ie,ve)=>{if(de)de(`${ssrInterpolate(e.isZhLang?e.META.zh_biography:e.META.en_biography)}`);else return[createTextVNode(toDisplayString(e.isZhLang?e.META.zh_biography:e.META.en_biography),1)]}),_:1},n)),t('</p><div class="socials" data-v-2981f956><span class="normal" data-v-2981f956>'),t(ssrRenderComponent(w,{class:"item github",href:e.VALUABLE_LINKS.GITHUB},{default:withCtx((le,de,ie,ve)=>{if(de)de(`<i class="iconfont icon-github" data-v-2981f956${ve}></i><span class="text" data-v-2981f956${ve}>GitHub</span>`);else return[createVNode("i",{class:"iconfont icon-github"}),createVNode("span",{class:"text"},"GitHub")]}),_:1},n)),t(ssrRenderComponent(w,{class:"item twitter",href:e.VALUABLE_LINKS.TWITTER},{default:withCtx((le,de,ie,ve)=>{if(de)de(`<i class="iconfont icon-twitter" data-v-2981f956${ve}></i><span class="text" data-v-2981f956${ve}>Twitter</span>`);else return[createVNode("i",{class:"iconfont icon-twitter"}),createVNode("span",{class:"text"},"Twitter")]}),_:1},n)),t(ssrRenderComponent(w,{class:"item instagram",href:e.VALUABLE_LINKS.INSTAGRAM},{default:withCtx((le,de,ie,ve)=>{if(de)de(`<i class="iconfont icon-instagram" data-v-2981f956${ve}></i><span class="text" data-v-2981f956${ve}>Instagram</span>`);else return[createVNode("i",{class:"iconfont icon-instagram"}),createVNode("span",{class:"text"},"Instagram")]}),_:1},n)),t(ssrRenderComponent(w,{class:"item youtube",href:e.VALUABLE_LINKS.YOUTUBE_CHANNEL},{default:withCtx((le,de,ie,ve)=>{if(de)de(`<i class="iconfont icon-youtube" data-v-2981f956${ve}></i><span class="text" data-v-2981f956${ve}>YouTube</span>`);else return[createVNode("i",{class:"iconfont icon-youtube"}),createVNode("span",{class:"text"},"YouTube")]}),_:1},n)),t('</span><span class="mini" data-v-2981f956>'),t(ssrRenderComponent(w,{class:"item telegram",href:e.VALUABLE_LINKS.TELEGRAM},{default:withCtx((le,de,ie,ve)=>{if(de)de(`<i class="iconfont icon-telegram" data-v-2981f956${ve}></i>`);else return[createVNode("i",{class:"iconfont icon-telegram"})]}),_:1},n)),t('<button class="item wechat" data-v-2981f956><i class="iconfont icon-wechat" data-v-2981f956></i>'),t(ssrRenderComponent(T,null,{default:withCtx((le,de,ie,ve)=>{if(de)de(ssrRenderComponent(S,{visible:e.modalState.wechat,"onUpdate:visible":Pe=>e.modalState.wechat=Pe,"scroll-close":!1},{default:withCtx((Pe,ct,ge,Me)=>{if(ct)ct(`<div class="qrcode-modal wechat" data-v-2981f956${Me}><div class="background" data-v-2981f956${Me}></div>`),ct(ssrRenderComponent(v,{class:"image",cdn:"",src:"/images/qrcodes/wechat.jpg"},null,ge,Me)),ct(`<span class="text" data-v-2981f956${Me}> \u{1F44B} \xA0 `),ct(ssrRenderComponent(N,{en:"Friend me on WeChat",zh:"\u626B\u7801\u52A0\u5FAE\uFF0C\u89E3\u9501\u7075\u9B42"},null,ge,Me)),ct("</span></div>");else return[createVNode("div",{class:"qrcode-modal wechat"},[createVNode("div",{class:"background"}),createVNode(v,{class:"image",cdn:"",src:"/images/qrcodes/wechat.jpg"}),createVNode("span",{class:"text"},[createTextVNode(" \u{1F44B} \xA0 "),createVNode(N,{en:"Friend me on WeChat",zh:"\u626B\u7801\u52A0\u5FAE\uFF0C\u89E3\u9501\u7075\u9B42"})])])]}),_:1},ie,ve));else return[createVNode(S,{visible:e.modalState.wechat,"onUpdate:visible":Pe=>e.modalState.wechat=Pe,"scroll-close":!1},{default:withCtx(()=>[createVNode("div",{class:"qrcode-modal wechat"},[createVNode("div",{class:"background"}),createVNode(v,{class:"image",cdn:"",src:"/images/qrcodes/wechat.jpg"}),createVNode("span",{class:"text"},[createTextVNode(" \u{1F44B} \xA0 "),createVNode(N,{en:"Friend me on WeChat",zh:"\u626B\u7801\u52A0\u5FAE\uFF0C\u89E3\u9501\u7075\u9B42"})])])]),_:1},8,["visible","onUpdate:visible"])]}),_:1},n)),t("</button>"),t(ssrRenderComponent(w,{class:"item linkedin",href:e.VALUABLE_LINKS.LINKEDIN},{default:withCtx((le,de,ie,ve)=>{if(de)de(`<i class="iconfont icon-linkedin" data-v-2981f956${ve}></i>`);else return[createVNode("i",{class:"iconfont icon-linkedin"})]}),_:1},n)),t(ssrRenderComponent(w,{class:"item douban",href:e.VALUABLE_LINKS.DOUBAN},{default:withCtx((le,de,ie,ve)=>{if(de)de(`<i class="iconfont icon-douban" data-v-2981f956${ve}></i>`);else return[createVNode("i",{class:"iconfont icon-douban"})]}),_:1},n)),t("</span></div></div></div>"),t(ssrRenderComponent(L,{class:"page-content"},{default:withCtx((le,de,ie,ve)=>{var Pe,ct;if(de)de(`<div class="links" data-v-2981f956${ve}><!--[-->`),ssrRenderList(e.links,(ge,Me)=>{renderVNode(de,createVNode(resolveDynamicComponent(ge.onClick?"button":"ulink"),{class:["item",ge.class],href:ge.href,to:ge.route,onClick:ge.onClick},{default:withCtx((Ue,Ze,xt,Ut)=>{if(Ze)Ze(`<span class="left" data-v-2981f956${Ut}><i class="${ssrRenderClass([ge.icon,"iconfont"])}" data-v-2981f956${Ut}></i><span class="text" data-v-2981f956${Ut}>`),Ze(ssrRenderComponent(N,ge.i18n,null,xt,Ut)),Ze(`</span></span><span class="right" data-v-2981f956${Ut}><i class="iconfont icon-next" data-v-2981f956${Ut}></i></span>`);else return[createVNode("span",{class:"left"},[createVNode("i",{class:["iconfont",ge.icon]},null,2),createVNode("span",{class:"text"},[createVNode(N,ge.i18n,null,16)])]),createVNode("span",{class:"right"},[createVNode("i",{class:"iconfont icon-next"})])]}),_:2}),ie,ve)}),de(`<!--]--></div><div class="statistics" data-v-2981f956${ve}>`),de(ssrRenderComponent(P,null,null,ie,ve)),de(ssrRenderComponent(O,null,null,ie,ve)),de(ssrRenderComponent(V,null,null,ie,ve)),de(ssrRenderComponent(D,null,null,ie,ve)),de(`</div><div class="plogs" data-v-2981f956${ve}>`),de(ssrRenderComponent(U,null,null,ie,ve)),de(`</div><div class="footprint" data-v-2981f956${ve}>`),de(ssrRenderComponent(W,null,null,ie,ve)),de(`</div><div class="calendar" data-v-2981f956${ve}>`),de(ssrRenderComponent(Z,null,null,ie,ve)),de(`</div><div class="footer-links" data-v-2981f956${ve}><div class="friendlinks" data-v-2981f956${ve}><!--[-->`),ssrRenderList(((Pe=e.appOption.data)==null?void 0:Pe.friend_links)||[],(ge,Me)=>{de("<!--[-->"),de(Me!==0?ssrRenderComponent(re,{type:"vertical",size:"lg"},null,ie,ve):"<!---->"),de(`<a${ssrRenderAttr("href",ge.value)} class="item" target="_blank" rel="external nofollow noopener" data-v-2981f956${ve}>${ssrInterpolate(ge.name)}</a><!--]-->`)}),de(`<!--]--></div><div class="speciallinks" data-v-2981f956${ve}><!--[-->`),ssrRenderList(e.SPECIAL_LINKS,(ge,Me)=>{de("<!--[-->"),de(Me!==0?ssrRenderComponent(re,{type:"vertical",size:"lg"},null,ie,ve):"<!---->"),de(`<a${ssrRenderAttr("href",ge.url)} class="item" target="_blank" rel="external nofollow noopener" data-v-2981f956${ve}>${ssrInterpolate(ge.name)}</a><!--]-->`)}),de("<!--]--></div></div>");else return[createVNode("div",{class:"links"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.links,(ge,Me)=>(openBlock(),createBlock(resolveDynamicComponent(ge.onClick?"button":"ulink"),{key:Me,class:["item",ge.class],href:ge.href,to:ge.route,onClick:ge.onClick},{default:withCtx(()=>[createVNode("span",{class:"left"},[createVNode("i",{class:["iconfont",ge.icon]},null,2),createVNode("span",{class:"text"},[createVNode(N,ge.i18n,null,16)])]),createVNode("span",{class:"right"},[createVNode("i",{class:"iconfont icon-next"})])]),_:2},1032,["class","href","to","onClick"]))),128))]),createVNode("div",{class:"statistics"},[createVNode(P),createVNode(O),createVNode(V),createVNode(D)]),createVNode("div",{class:"plogs"},[createVNode(U)]),createVNode("div",{class:"footprint"},[createVNode(W)]),createVNode("div",{class:"calendar"},[createVNode(Z)]),createVNode("div",{class:"footer-links"},[createVNode("div",{class:"friendlinks"},[(openBlock(!0),createBlock(Fragment,null,renderList(((ct=e.appOption.data)==null?void 0:ct.friend_links)||[],(ge,Me)=>(openBlock(),createBlock(Fragment,{key:Me},[Me!==0?(openBlock(),createBlock(re,{key:0,type:"vertical",size:"lg"})):createCommentVNode("",!0),createVNode("a",{href:ge.value,class:"item",target:"_blank",rel:"external nofollow noopener"},toDisplayString(ge.name),9,["href"])],64))),128))]),createVNode("div",{class:"speciallinks"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.SPECIAL_LINKS,(ge,Me)=>(openBlock(),createBlock(Fragment,{key:Me},[Me!==0?(openBlock(),createBlock(re,{key:0,type:"vertical",size:"lg"})):createCommentVNode("",!0),createVNode("a",{href:ge.url,class:"item",target:"_blank",rel:"external nofollow noopener"},toDisplayString(ge.name),9,["href"])],64))),128))])])]}),_:1},n)),t("</div>")}const _sfc_setup$Q=_sfc_main$Q.setup;_sfc_main$Q.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/about/desktop.vue"),_sfc_setup$Q?_sfc_setup$Q(e,t):void 0};const DesktopAboutPage=_export_sfc(_sfc_main$Q,[["ssrRender",_sfc_ssrRender$Q],["__scopeId","data-v-2981f956"]]),_sfc_main$P=defineComponent({name:"MobileAboutPage",components:{PageBanner},setup(){const{isZhLang:e}=useEnhancer(),t=useAdminInfoStore();return useAboutPageMeta(),useUniversalFetch(()=>t.fetch()),{i18ns,META,VALUABLE_LINKS,LanguageKey,RouteName,isZhLang:e,adminInfo:t,getAdminAvatar,getPageRoute}}}),mobile_vue_vue_type_style_index_0_scoped_60a3e223_lang="";function _sfc_ssrRender$P(e,t,n,o,c,d,g,r){var P,O,V;const v=resolveComponent("page-banner"),E=resolveComponent("i18n"),w=resolveComponent("uimage"),T=resolveComponent("divider"),S=resolveComponent("webfont"),N=resolveComponent("router-link"),L=resolveComponent("ulink");t(`<div${ssrRenderAttrs(mergeProps({class:"about-page"},o))} data-v-60a3e223>`),t(ssrRenderComponent(v,{position:70,"is-mobile":!0,image:"/images/page-about/banner-mobile.jpg"},{title:withCtx((D,U,W,Z)=>{if(U)U(ssrRenderComponent(E,{k:e.LanguageKey.PAGE_ABOUT},null,W,Z));else return[createVNode(E,{k:e.LanguageKey.PAGE_ABOUT},null,8,["k"])]}),_:1},n)),t('<div class="profile" data-v-60a3e223><div class="avatar" data-v-60a3e223>'),t(ssrRenderComponent(w,{class:"image",src:e.getAdminAvatar((P=e.adminInfo.data)==null?void 0:P.avatar)},null,n)),t(`</div><h2 class="name" data-v-60a3e223>${ssrInterpolate(((O=e.adminInfo.data)==null?void 0:O.name)||"-")}</h2><h5 class="slogan" data-v-60a3e223>${ssrInterpolate(((V=e.adminInfo.data)==null?void 0:V.slogan)||"-")}</h5>`),t(ssrRenderComponent(T,{dashed:""},null,n)),t('<h4 class="bio" data-v-60a3e223>'),t(ssrRenderComponent(S,{bolder:""},{default:withCtx((D,U,W,Z)=>{if(U)U(`${ssrInterpolate(e.isZhLang?e.META.zh_biography:e.META.en_biography)}`);else return[createTextVNode(toDisplayString(e.isZhLang?e.META.zh_biography:e.META.en_biography),1)]}),_:1},n)),t('</h4></div><div class="links" data-v-60a3e223><div class="list col-2" data-v-60a3e223>'),t(ssrRenderComponent(N,{class:"item text-only",to:e.getPageRoute(e.RouteName.Archive)},{default:withCtx((D,U,W,Z)=>{if(U)U(`<i class="iconfont icon-quill" data-v-60a3e223${Z}></i>`),U(ssrRenderComponent(E,e.i18ns.archive,null,W,Z));else return[createVNode("i",{class:"iconfont icon-quill"}),createVNode(E,e.i18ns.archive,null,16)]}),_:1},n)),t(ssrRenderComponent(N,{class:"item text-only",to:e.getPageRoute(e.RouteName.Lens)},{default:withCtx((D,U,W,Z)=>{if(U)U(`<i class="iconfont icon-lens" data-v-60a3e223${Z}></i>`),U(ssrRenderComponent(E,e.i18ns.lens,null,W,Z));else return[createVNode("i",{class:"iconfont icon-lens"}),createVNode(E,e.i18ns.lens,null,16)]}),_:1},n)),t(ssrRenderComponent(N,{class:"item text-only",to:e.getPageRoute(e.RouteName.Nft)},{default:withCtx((D,U,W,Z)=>{if(U)U(`<i class="iconfont icon-opensea" data-v-60a3e223${Z}></i>`),U(ssrRenderComponent(E,e.i18ns.nft,null,W,Z));else return[createVNode("i",{class:"iconfont icon-opensea"}),createVNode(E,e.i18ns.nft,null,16)]}),_:1},n)),t(ssrRenderComponent(N,{class:"item text-only",to:e.getPageRoute(e.RouteName.Guestbook)},{default:withCtx((D,U,W,Z)=>{if(U)U(`<i class="iconfont icon-comment" data-v-60a3e223${Z}></i>`),U(ssrRenderComponent(E,e.i18ns.guestbook,null,W,Z));else return[createVNode("i",{class:"iconfont icon-comment"}),createVNode(E,e.i18ns.guestbook,null,16)]}),_:1},n)),t("</div>"),t(ssrRenderComponent(T,{dashed:""},null,n)),t('<div class="list col-2" data-v-60a3e223>'),t(ssrRenderComponent(L,{class:"item discord",href:e.VALUABLE_LINKS.DISCORD_GROUP},{default:withCtx((D,U,W,Z)=>{if(U)U(`<i class="iconfont icon-discord" data-v-60a3e223${Z}></i>`),U(ssrRenderComponent(E,e.i18ns.discordGroup,null,W,Z));else return[createVNode("i",{class:"iconfont icon-discord"}),createVNode(E,e.i18ns.discordGroup,null,16)]}),_:1},n)),t(ssrRenderComponent(L,{class:"item telegram",href:e.VALUABLE_LINKS.TELEGRAM_GROUP},{default:withCtx((D,U,W,Z)=>{if(U)U(`<i class="iconfont icon-telegram" data-v-60a3e223${Z}></i>`),U(ssrRenderComponent(E,e.i18ns.telegramGroup,null,W,Z));else return[createVNode("i",{class:"iconfont icon-telegram"}),createVNode(E,e.i18ns.telegramGroup,null,16)]}),_:1},n)),t('</div></div><div class="links" data-v-60a3e223><div class="list col-3" data-v-60a3e223>'),t(ssrRenderComponent(L,{class:"item center github",href:e.VALUABLE_LINKS.GITHUB},{default:withCtx((D,U,W,Z)=>{if(U)U(`<i class="iconfont icon-github" data-v-60a3e223${Z}></i><span class="text" data-v-60a3e223${Z}>GitHub</span>`);else return[createVNode("i",{class:"iconfont icon-github"}),createVNode("span",{class:"text"},"GitHub")]}),_:1},n)),t(ssrRenderComponent(L,{class:"item center twitter",href:e.VALUABLE_LINKS.TWITTER},{default:withCtx((D,U,W,Z)=>{if(U)U(`<i class="iconfont icon-twitter" data-v-60a3e223${Z}></i><span class="text" data-v-60a3e223${Z}>Twitter</span>`);else return[createVNode("i",{class:"iconfont icon-twitter"}),createVNode("span",{class:"text"},"Twitter")]}),_:1},n)),t(ssrRenderComponent(L,{class:"item center instagram",href:e.VALUABLE_LINKS.INSTAGRAM},{default:withCtx((D,U,W,Z)=>{if(U)U(`<i class="iconfont icon-instagram" data-v-60a3e223${Z}></i><span class="text" data-v-60a3e223${Z}>Instagram</span>`);else return[createVNode("i",{class:"iconfont icon-instagram"}),createVNode("span",{class:"text"},"Instagram")]}),_:1},n)),t("</div>"),t(ssrRenderComponent(T,{dashed:""},null,n)),t('<div class="list col-4" data-v-60a3e223>'),t(ssrRenderComponent(L,{class:"item telegram icon-only",href:e.VALUABLE_LINKS.TELEGRAM},{default:withCtx((D,U,W,Z)=>{if(U)U(`<i class="iconfont icon-telegram" data-v-60a3e223${Z}></i>`);else return[createVNode("i",{class:"iconfont icon-telegram"})]}),_:1},n)),t(ssrRenderComponent(L,{class:"item linkedin icon-only",href:e.VALUABLE_LINKS.LINKEDIN},{default:withCtx((D,U,W,Z)=>{if(U)U(`<i class="iconfont icon-linkedin" data-v-60a3e223${Z}></i>`);else return[createVNode("i",{class:"iconfont icon-linkedin"})]}),_:1},n)),t(ssrRenderComponent(L,{class:"item youtube icon-only",href:e.VALUABLE_LINKS.YOUTUBE_CHANNEL},{default:withCtx((D,U,W,Z)=>{if(U)U(`<i class="iconfont icon-youtube" data-v-60a3e223${Z}></i>`);else return[createVNode("i",{class:"iconfont icon-youtube"})]}),_:1},n)),t(ssrRenderComponent(L,{class:"item douban icon-only",href:e.VALUABLE_LINKS.DOUBAN_MOVIE},{default:withCtx((D,U,W,Z)=>{if(U)U(`<i class="iconfont icon-douban" data-v-60a3e223${Z}></i>`);else return[createVNode("i",{class:"iconfont icon-douban"})]}),_:1},n)),t('</div></div><div class="qrcodes" data-v-60a3e223><div class="item" data-v-60a3e223>'),t(ssrRenderComponent(w,{cdn:"",class:"image",src:"/images/qrcodes/wechat.jpg"},null,n)),t('</div><div class="item" data-v-60a3e223>'),t(ssrRenderComponent(w,{cdn:"",class:"image",src:"/images/qrcodes/wechat-channel.png"},null,n)),t("</div></div></div>")}const _sfc_setup$P=_sfc_main$P.setup;_sfc_main$P.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/about/mobile.vue"),_sfc_setup$P?_sfc_setup$P(e,t):void 0};const MobileAboutPage=_export_sfc(_sfc_main$P,[["ssrRender",_sfc_ssrRender$P],["__scopeId","data-v-60a3e223"]]),_sfc_main$O=defineComponent({name:"GuestbookPage",components:{PageBanner,Comment},props:{isMobile:{type:Boolean,default:!1}},setup(){const e=CommentPostID.Guestbook,{i18n:t,meta:n,gtag:o,globalState:c,isDarkTheme:d,isZhLang:g}=useEnhancer(),{appOption:r,comment:v,identity:E}=useStores(),w=ref(isClient$1),T=computed(()=>E.isLikedPage(e)),S=computed(()=>{var O;return((O=r.data)==null?void 0:O.meta.likes)||0}),N="/images/page-guestbook/banner.jpg",L=async()=>{if(T.value)return!1;o==null||o.event("like_site",{event_category:GAEventCategories.Universal});try{await r.postSiteLike(),E.likePage(e)}catch(O){const V=t.t(LanguageKey.POST_ACTION_ERROR);console.warn(V,O),alert(V)}},P=()=>Promise.all([r.fetch(!0),v.fetchList({post_id:e})]).then(()=>{w.value=!1});return n(()=>{const O=firstUpperCase(t.t(LanguageKey.PAGE_GUESTBOOK,Language.English));return{pageTitle:(g.value?[t.t(LanguageKey.PAGE_GUESTBOOK),O]:[O]).join(" | "),description:`\u7ED9 ${META.author} \u7559\u8A00`,twitterCard:"summary_large_image",ogType:"bbs",ogImage:getTargetCDNURL(N)}}),useUniversalFetch(()=>P()),{LanguageKey,bannerImage:N,mockCommentLoading:w,isDarkTheme:d,isLiked:T,siteLikes:S,handleLike:L}}}),guestbook_vue_vue_type_style_index_0_scoped_ad589e73_lang="";function _sfc_ssrRender$O(e,t,n,o,c,d,g,r){const v=resolveComponent("responsive"),E=resolveComponent("uimage"),w=resolveComponent("webfont"),T=resolveComponent("i18n"),S=resolveComponent("page-banner"),N=resolveComponent("comment");t(`<div${ssrRenderAttrs(mergeProps({class:"guestbook-page"},o))} data-v-ad589e73>`),t(ssrRenderComponent(v,null,{desktop:withCtx((L,P,O,V)=>{if(P)P(`<div class="desktop-banner" data-v-ad589e73${V}>`),P(ssrRenderComponent(E,{cdn:"",class:"image",src:e.bannerImage},null,O,V)),P(`<button class="${ssrRenderClass([{liked:e.isLiked},"like"])}"${includeBooleanAttr(e.isLiked)?" disabled":""} data-v-ad589e73${V}><i class="icon iconfont icon-heart" data-v-ad589e73${V}></i><span class="count" data-v-ad589e73${V}>${ssrInterpolate(e.isLiked?`${e.siteLikes-1} + 1`:e.siteLikes)}</span></button><span class="slogan" data-v-ad589e73${V}>`),P(ssrRenderComponent(w,{class:["text",{dark:e.isDarkTheme}]},{default:withCtx((D,U,W,Z)=>{if(U)U(ssrRenderComponent(T,{k:e.LanguageKey.GUESTBOOK_SLOGAN},null,W,Z));else return[createVNode(T,{k:e.LanguageKey.GUESTBOOK_SLOGAN},null,8,["k"])]}),_:1},O,V)),P("</span></div>");else return[createVNode("div",{class:"desktop-banner"},[createVNode(E,{cdn:"",class:"image",src:e.bannerImage},null,8,["src"]),createVNode("button",{class:["like",{liked:e.isLiked}],disabled:e.isLiked,onClick:e.handleLike},[createVNode("i",{class:"icon iconfont icon-heart"}),createVNode("span",{class:"count"},toDisplayString(e.isLiked?`${e.siteLikes-1} + 1`:e.siteLikes),1)],10,["disabled","onClick"]),createVNode("span",{class:"slogan"},[createVNode(w,{class:["text",{dark:e.isDarkTheme}]},{default:withCtx(()=>[createVNode(T,{k:e.LanguageKey.GUESTBOOK_SLOGAN},null,8,["k"])]),_:1},8,["class"])])])]}),mobile:withCtx((L,P,O,V)=>{if(P)P(ssrRenderComponent(S,{class:"mobile-banner","is-mobile":!0,position:70,image:e.bannerImage},{title:withCtx((D,U,W,Z)=>{if(U)U(ssrRenderComponent(T,{k:e.LanguageKey.PAGE_GUESTBOOK},null,W,Z));else return[createVNode(T,{k:e.LanguageKey.PAGE_GUESTBOOK},null,8,["k"])]}),description:withCtx((D,U,W,Z)=>{if(U)U(ssrRenderComponent(T,{k:e.LanguageKey.GUESTBOOK_SLOGAN},null,W,Z));else return[createVNode(T,{k:e.LanguageKey.GUESTBOOK_SLOGAN},null,8,["k"])]}),_:1},O,V));else return[createVNode(S,{class:"mobile-banner","is-mobile":!0,position:70,image:e.bannerImage},{title:withCtx(()=>[createVNode(T,{k:e.LanguageKey.PAGE_GUESTBOOK},null,8,["k"])]),description:withCtx(()=>[createVNode(T,{k:e.LanguageKey.GUESTBOOK_SLOGAN},null,8,["k"])]),_:1},8,["image"])]}),_:1},n)),t('<div class="comment" data-v-ad589e73>'),t(ssrRenderComponent(N,{"post-id":0,plain:e.isMobile,fetching:e.mockCommentLoading},null,n)),t("</div></div>")}const _sfc_setup$O=_sfc_main$O.setup;_sfc_main$O.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/guestbook.vue"),_sfc_setup$O?_sfc_setup$O(e,t):void 0};const GuestbookPage=_export_sfc(_sfc_main$O,[["ssrRender",_sfc_ssrRender$O],["__scopeId","data-v-ad589e73"]]),_sfc_main$N=defineComponent({name:"AppPage",props:{isMobile:{type:Boolean,default:!1}},setup(){const{i18n:e,meta:t,gtag:n,isZhLang:o}=useEnhancer();return t(()=>{const d=firstUpperCase(e.t(LanguageKey.PAGE_APP,Language.English));return{pageTitle:(o.value?[e.t(LanguageKey.PAGE_APP),d]:[d]).join(" | "),description:`${META.title} App \u4E0B\u8F7D`,ogImage:getTargetCDNURL("/images/page-app/logo.png")}}),{META,VALUABLE_LINKS,LanguageKey,handleAppEvent:d=>{n==null||n.event(d,{event_category:GAEventCategories.App})}}}}),app_vue_vue_type_style_index_0_scoped_df7f6018_lang="";function _sfc_ssrRender$N(e,t,n,o,c,d,g,r){const v=resolveComponent("uimage"),E=resolveComponent("webfont"),w=resolveComponent("i18n"),T=resolveComponent("ulink");t(`<div${ssrRenderAttrs(mergeProps({class:["app-page",{mobile:e.isMobile}]},o))} data-v-df7f6018><div class="app" data-v-df7f6018><div class="logo" data-v-df7f6018>`),t(ssrRenderComponent(v,{cdn:"",alt:"app-logo",src:"/images/page-app/logo.png"},null,n)),t(`</div><h2 class="title" data-v-df7f6018>${ssrInterpolate(e.META.title)}</h2><p class="description" data-v-df7f6018>`),t(ssrRenderComponent(E,null,{default:withCtx((S,N,L,P)=>{if(N)N(ssrRenderComponent(w,{k:e.LanguageKey.APP_SLOGAN},null,L,P));else return[createVNode(w,{k:e.LanguageKey.APP_SLOGAN},null,8,["k"])]}),_:1},n)),t('</p><div class="screen" data-v-df7f6018>'),t(ssrRenderComponent(v,{cdn:"",alt:"app-hot",class:"screen-img",src:"/images/page-app/hot.png"},null,n)),t('<div class="download" data-v-df7f6018>'),t(ssrRenderComponent(v,{cdn:"",class:"qrcode",alt:"qrcode",src:"/images/page-app/qrcode.png"},null,n)),t(ssrRenderComponent(T,{class:"button",href:e.VALUABLE_LINKS.APP_APK_FILE,onMousedown:S=>e.handleAppEvent("download_android_app")},{default:withCtx((S,N,L,P)=>{if(N)N(`<i class="icon iconfont icon-android" data-v-df7f6018${P}></i><span class="text" data-v-df7f6018${P}>Android</span><i class="new-window iconfont icon-new-window-s" data-v-df7f6018${P}></i>`);else return[createVNode("i",{class:"icon iconfont icon-android"}),createVNode("span",{class:"text"},"Android"),createVNode("i",{class:"new-window iconfont icon-new-window-s"})]}),_:1},n)),t(ssrRenderComponent(T,{class:"button",href:e.VALUABLE_LINKS.GITHUB_SURMON_ME_NATIVE+"#ios",onMousedown:S=>e.handleAppEvent("download_ios_app")},{default:withCtx((S,N,L,P)=>{if(N)N(`<i class="icon iconfont icon-apple" data-v-df7f6018${P}></i><span class="text" data-v-df7f6018${P}>iOS</span><i class="new-window iconfont icon-new-window-s" data-v-df7f6018${P}></i>`);else return[createVNode("i",{class:"icon iconfont icon-apple"}),createVNode("span",{class:"text"},"iOS"),createVNode("i",{class:"new-window iconfont icon-new-window-s"})]}),_:1},n)),t(ssrRenderComponent(T,{class:"source-code",href:e.VALUABLE_LINKS.GITHUB_SURMON_ME_NATIVE,onMousedown:S=>e.handleAppEvent("app_source_code")},{default:withCtx((S,N,L,P)=>{if(N)N(`<i class="iconfont icon-git" data-v-df7f6018${P}></i> Source Code `);else return[createVNode("i",{class:"iconfont icon-git"}),createTextVNode(" Source Code ")]}),_:1},n)),t('</div></div><p class="rss" data-v-df7f6018><span class="prefix" data-v-df7f6018>'),t(ssrRenderComponent(w,{zh:"\uFF08",en:"["},null,n)),t('</span><span class="deprecated" data-v-df7f6018>'),t(ssrRenderComponent(w,{zh:"\u6B64\u9879\u76EE\u5DF2\u5E9F\u5F03\uFF01",en:"DEPRECATED!"},null,n)),t("</span>"),t(ssrRenderComponent(w,{zh:"\u5EFA\u8BAE\u4F7F\u7528",en:"Recommend"},null,n)),t(`<a class="link"${ssrRenderAttr("href",e.VALUABLE_LINKS.RSS)} target="_blank" data-v-df7f6018>`),t(ssrRenderComponent(w,{zh:"RSS \u8BA2\u9605",en:"RSS subscription"},null,n)),t('</a><span class="suffix" data-v-df7f6018>'),t(ssrRenderComponent(w,{zh:"\uFF09",en:"]"},null,n)),t("</span></p></div></div>")}const _sfc_setup$N=_sfc_main$N.setup;_sfc_main$N.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/app.vue"),_sfc_setup$N?_sfc_setup$N(e,t):void 0};const AppPage=_export_sfc(_sfc_main$N,[["ssrRender",_sfc_ssrRender$N],["__scopeId","data-v-df7f6018"]]);var ProviderId=(e=>(e.GitHub="github",e.PayPal="paypal",e.Alipay="alipay",e.WeChatPay="wechat-pay",e.BitCoin="bitcoin",e.Ethereum="ethereum",e))(ProviderId||{});const providerIds=Object.values(ProviderId),providers=[{id:"github",title:"GitHub Sponsors",logo:"/images/third-party/github-sponsors-logo.svg"},{id:"paypal",title:"PayPal me",link:VALUABLE_LINKS.PAYPAL,logo:"/images/third-party/paypal-logo.svg",qrcode:"/images/third-party/paypal-qrcode.png"},{id:"alipay",title:"\u652F\u4ED8\u5B9D",text:"\u901A\u8FC7\u652F\u4ED8\u5B9D\u5BA2\u6237\u7AEF\u626B\u7801",logo:"/images/third-party/alipay-logo.svg",qrcode:"/images/third-party/alipay-qrcode.png"},{id:"wechat-pay",title:"\u5FAE\u4FE1\u8D5E\u8D4F",text:"\u901A\u8FC7\u5FAE\u4FE1\u5BA2\u6237\u7AEF\u626B\u7801",logo:"/images/third-party/wechat-pay-logo.svg",qrcode:"/images/third-party/wechat-pay-qrcode.jpg"},{id:"bitcoin",title:"BTC",address:IDENTITIES.BTC_ADDRESS,logo:"/images/third-party/btc-logo.svg",qrcode:"/images/third-party/btc-qrcode.png"},{id:"ethereum",title:"ETH",address:IDENTITIES.ETH_ADDRESS,logo:"/images/third-party/eth-logo.svg",qrcode:"/images/third-party/eth-qrcode.png"}],useSponsorState=e=>{const{gtag:t}=useEnhancer(),n=ref(e&&providerIds.includes(e)?e:providers[0].id),o=computed(()=>providers.find(v=>v.id===n.value)),c=ref(null),d=ref(!1),g=()=>{c.value||d.value||(d.value=!0,tunnel$1.dispatch(TunnelModule.GitHubSponsors).then(v=>{c.value=v}).finally(()=>{d.value=!1}))},r=v=>{!providerIds.includes(v)||(n.value=v,v==="github"&&g(),t==null||t.event("sponsor_modal_switch",{event_category:GAEventCategories.Widget}))};return n.value==="github"&&g(),{activeId:n,activeProvider:o,setProviderId:r,ghSponsors:c,ghSponsorsLoading:d}},_sfc_main$M=defineComponent({name:"SponsorTabs",props:{state:{type:Object,required:!0},hideTitle:{type:Boolean,default:!1}},setup(e){return{providers,activeId:e.state.activeId,handleSwitch:e.state.setProviderId}}}),tabs_vue_vue_type_style_index_0_scoped_b6ca9e76_lang="";function _sfc_ssrRender$M(e,t,n,o,c,d,g,r){const v=resolveComponent("uimage");t(`<div${ssrRenderAttrs(mergeProps({class:["sponsor-tabs",e.activeId]},o))} data-v-b6ca9e76><!--[-->`),ssrRenderList(e.providers,(E,w)=>{t(`<button class="${ssrRenderClass([[E.id,{active:e.activeId===E.id}],"item"])}"${ssrRenderAttr("title",E.title)} data-v-b6ca9e76><span class="logo" data-v-b6ca9e76>`),t(ssrRenderComponent(v,{class:"image",alt:E.title,src:E.logo,cdn:""},null,n)),t("</span>"),e.hideTitle?t("<!---->"):t(`<span class="title" data-v-b6ca9e76>${ssrInterpolate(E.title)}</span>`),t("</button>")}),t("<!--]--></div>")}const _sfc_setup$M=_sfc_main$M.setup;_sfc_main$M.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/sponsor/tabs.vue"),_sfc_setup$M?_sfc_setup$M(e,t):void 0};const SponsorTabs=_export_sfc(_sfc_main$M,[["ssrRender",_sfc_ssrRender$M],["__scopeId","data-v-b6ca9e76"]]),_sfc_main$L=defineComponent({name:"SponsorProvider",props:{state:{type:Object,required:!0},maxSponsors:{type:Number,default:20}},setup(e){const{isZhLang:t}=useEnhancer(),n=o=>{copy(o).then(()=>{alert(t.value?"\u5730\u5740\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F\uFF01":"Address copied!")})};return{VALUABLE_LINKS,ProviderId,providers,activeProvider:e.state.activeProvider,ghSponsors:e.state.ghSponsors,ghSponsorsLoading:e.state.ghSponsorsLoading,handleCopyAddress:n}}}),provider_vue_vue_type_style_index_0_scoped_7fd4b467_lang="";function _sfc_ssrRender$L(e,t,n,o,c,d,g,r){const v=resolveComponent("ulink"),E=resolveComponent("uimage"),w=resolveComponent("i18n"),T=resolveComponent("client-only");t(`<div${ssrRenderAttrs(mergeProps({class:["sponsor-provider",e.activeProvider.id]},o))} data-v-7fd4b467><p class="external" data-v-7fd4b467>`),e.activeProvider.link?(t("<!--[-->"),t(ssrRenderComponent(v,{class:"link",href:e.activeProvider.link},{default:withCtx((S,N,L,P)=>{if(N)N(`<code data-v-7fd4b467${P}>${ssrInterpolate(e.activeProvider.link)}</code>`);else return[createVNode("code",null,toDisplayString(e.activeProvider.link),1)]}),_:1},n)),t('<i class="iconfont icon-new-window-s" data-v-7fd4b467></i><!--]-->')):t("<!---->"),e.activeProvider.address?t(`<!--[--><code class="link" data-v-7fd4b467>${ssrInterpolate(e.activeProvider.address)}</code><i class="iconfont icon-copy" data-v-7fd4b467></i><!--]-->`):t("<!---->"),e.activeProvider.text?t(`<!--[-->${ssrInterpolate(e.activeProvider.text)} <i class="iconfont icon-qrcode" data-v-7fd4b467></i><!--]-->`):t("<!---->"),t("</p>"),e.activeProvider.qrcode?t(ssrRenderComponent(E,{class:"qrcode",src:e.activeProvider.qrcode,cdn:""},null,n)):t("<!---->"),e.activeProvider.id==e.ProviderId.GitHub?(t('<div class="github-sponsors" data-v-7fd4b467>'),t(ssrRenderComponent(v,{class:"link",href:e.VALUABLE_LINKS.GITHUB_SPONSORS},{default:withCtx((S,N,L,P)=>{if(N)N(`<i class="iconfont icon-heart" data-v-7fd4b467${P}></i><span class="text" data-v-7fd4b467${P}>`),N(ssrRenderComponent(w,{en:"Sponsor me on GitHub",zh:"\u901A\u8FC7 GitHub Sponsor \u8D5E\u52A9\u6211"},null,L,P)),N("</span>");else return[createVNode("i",{class:"iconfont icon-heart"}),createVNode("span",{class:"text"},[createVNode(w,{en:"Sponsor me on GitHub",zh:"\u901A\u8FC7 GitHub Sponsor \u8D5E\u52A9\u6211"})])]}),_:1},n)),t(ssrRenderComponent(T,null,{default:withCtx((S,N,L,P)=>{if(N)N(""),e.ghSponsors?(N(`<div data-v-7fd4b467${P}><p class="total" data-v-7fd4b467${P}>`),N(ssrRenderComponent(w,null,{zh:withCtx((O,V,D,U)=>{if(V)V(` \u6211\u5728 GitHub Sponsors \u5DF2\u5F97\u5230 ${ssrInterpolate(e.ghSponsors.totalCount)} \u4F4D\u8D5E\u52A9\u8005\u7684\u652F\u6301\u3002 `);else return[createTextVNode(" \u6211\u5728 GitHub Sponsors \u5DF2\u5F97\u5230 "+toDisplayString(e.ghSponsors.totalCount)+" \u4F4D\u8D5E\u52A9\u8005\u7684\u652F\u6301\u3002 ",1)]}),en:withCtx((O,V,D,U)=>{if(V)V(` I have ${ssrInterpolate(e.ghSponsors.totalCount)} backers on GitHub Sponsors. `);else return[createTextVNode(" I have "+toDisplayString(e.ghSponsors.totalCount)+" backers on GitHub Sponsors. ",1)]}),_:1},L,P)),N(`</p><div class="users" data-v-7fd4b467${P}><!--[-->`),ssrRenderList(e.ghSponsors.edges.slice(0,e.maxSponsors),(O,V)=>{N(ssrRenderComponent(v,{class:"item",href:O.node.url,title:O.node.name,key:V},{default:withCtx((D,U,W,Z)=>{if(U)U(ssrRenderComponent(E,{class:"avatar",src:O.node.avatarUrl,alt:O.node.name},null,W,Z));else return[createVNode(E,{class:"avatar",src:O.node.avatarUrl,alt:O.node.name},null,8,["src","alt"])]}),_:2},L,P))}),N("<!--]-->"),e.ghSponsors.edges.length>e.maxSponsors?N(ssrRenderComponent(v,{class:"more-link",href:e.VALUABLE_LINKS.GITHUB_SPONSORS+"#sponsors"},{default:withCtx((O,V,D,U)=>{if(V)V(` + ${ssrInterpolate(e.ghSponsors.edges.length-e.maxSponsors)}`);else return[createTextVNode(" + "+toDisplayString(e.ghSponsors.edges.length-e.maxSponsors),1)]}),_:1},L,P)):N("<!---->"),N("</div></div>")):N("<!---->");else return[createVNode(Transition,{name:"module"},{default:withCtx(()=>[e.ghSponsors?(openBlock(),createBlock("div",{key:0},[createVNode("p",{class:"total"},[createVNode(w,null,{zh:withCtx(()=>[createTextVNode(" \u6211\u5728 GitHub Sponsors \u5DF2\u5F97\u5230 "+toDisplayString(e.ghSponsors.totalCount)+" \u4F4D\u8D5E\u52A9\u8005\u7684\u652F\u6301\u3002 ",1)]),en:withCtx(()=>[createTextVNode(" I have "+toDisplayString(e.ghSponsors.totalCount)+" backers on GitHub Sponsors. ",1)]),_:1})]),createVNode("div",{class:"users"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.ghSponsors.edges.slice(0,e.maxSponsors),(O,V)=>(openBlock(),createBlock(v,{class:"item",href:O.node.url,title:O.node.name,key:V},{default:withCtx(()=>[createVNode(E,{class:"avatar",src:O.node.avatarUrl,alt:O.node.name},null,8,["src","alt"])]),_:2},1032,["href","title"]))),128)),e.ghSponsors.edges.length>e.maxSponsors?(openBlock(),createBlock(v,{key:0,class:"more-link",href:e.VALUABLE_LINKS.GITHUB_SPONSORS+"#sponsors"},{default:withCtx(()=>[createTextVNode(" + "+toDisplayString(e.ghSponsors.edges.length-e.maxSponsors),1)]),_:1},8,["href"])):createCommentVNode("",!0)])])):createCommentVNode("",!0)]),_:1})]}),_:1},n)),t("</div>")):t("<!---->"),t("</div>")}const _sfc_setup$L=_sfc_main$L.setup;_sfc_main$L.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/sponsor/provider.vue"),_sfc_setup$L?_sfc_setup$L(e,t):void 0};const SponsorProvider=_export_sfc(_sfc_main$L,[["ssrRender",_sfc_ssrRender$L],["__scopeId","data-v-7fd4b467"]]),_sfc_main$K=defineComponent({name:"SponsorPage",components:{SponsorTabs,SponsorProvider,PageBanner},setup(){const{route:e,i18n:t,meta:n,isZhLang:o}=useEnhancer(),c=useSponsorState();return n(()=>{const d=firstUpperCase(t.t(LanguageKey.PAGE_SPONSOR,Language.English));return{pageTitle:(o.value?[t.t(LanguageKey.PAGE_SPONSOR),d]:[d]).join(" | ")}}),onMounted(()=>{const d=e.hash.replace("#","");d&&c.setProviderId(d)}),{LanguageKey,sponsorState:c}}}),sponsor_vue_vue_type_style_index_0_scoped_a99dff28_lang="";function _sfc_ssrRender$K(e,t,n,o,c,d,g,r){const v=resolveComponent("page-banner"),E=resolveComponent("webfont"),w=resolveComponent("i18n"),T=resolveComponent("container"),S=resolveComponent("sponsor-tabs"),N=resolveComponent("sponsor-provider");t(`<div${ssrRenderAttrs(mergeProps({class:"sponsor-page"},o))} data-v-a99dff28>`),t(ssrRenderComponent(v,{image:"/images/page-sponsor/banner.webp"},{title:withCtx((L,P,O,V)=>{if(P)P(ssrRenderComponent(E,null,{default:withCtx((D,U,W,Z)=>{if(U)U(ssrRenderComponent(w,{zh:"\u8D60\u543E\u73AB\u7470\uFF0C\u624B\u7559\u4F59\u9999",en:"Become a sponsor to me"},null,W,Z));else return[createVNode(w,{zh:"\u8D60\u543E\u73AB\u7470\uFF0C\u624B\u7559\u4F59\u9999",en:"Become a sponsor to me"})]}),_:1},O,V));else return[createVNode(E,null,{default:withCtx(()=>[createVNode(w,{zh:"\u8D60\u543E\u73AB\u7470\uFF0C\u624B\u7559\u4F59\u9999",en:"Become a sponsor to me"})]),_:1})]}),description:withCtx((L,P,O,V)=>{if(P)P(ssrRenderComponent(w,{zh:"\u4F60\u7684\u6177\u6168\u8D5E\u52A9\u5C06\u662F\u6211\u6301\u7EED\u8F93\u51FA\u7684\u4E0D\u7AED\u52A8\u529B",en:"Your generous financial support is my motivation to keep moving forward"},null,O,V));else return[createVNode(w,{zh:"\u4F60\u7684\u6177\u6168\u8D5E\u52A9\u5C06\u662F\u6211\u6301\u7EED\u8F93\u51FA\u7684\u4E0D\u7AED\u52A8\u529B",en:"Your generous financial support is my motivation to keep moving forward"})]}),_:1},n)),t('<div class="page-content" data-v-a99dff28>'),t(ssrRenderComponent(T,{class:"tabs-wrapper"},{default:withCtx((L,P,O,V)=>{if(P)P(ssrRenderComponent(S,{class:"sponsor-tabs",state:e.sponsorState},null,O,V));else return[createVNode(S,{class:"sponsor-tabs",state:e.sponsorState},null,8,["state"])]}),_:1},n)),t(ssrRenderComponent(N,{class:"sponsor-provider",state:e.sponsorState},null,n)),t("</div></div>")}const _sfc_setup$K=_sfc_main$K.setup;_sfc_main$K.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/sponsor.vue"),_sfc_setup$K?_sfc_setup$K(e,t):void 0};const SponsorPage=_export_sfc(_sfc_main$K,[["ssrRender",_sfc_ssrRender$K],["__scopeId","data-v-a99dff28"]]),_sfc_main$J=defineComponent({name:"LensSkeleton",props:{columns:{type:Number,required:!0},rows:{type:Number,default:2},height:{type:Number,required:!0}}}),skeleton_vue_vue_type_style_index_0_scoped_c145d1cc_lang="";function _sfc_ssrRender$J(e,t,n,o,c,d,g,r){const v=resolveComponent("skeleton-base");t(`<ul${ssrRenderAttrs(mergeProps({class:"skeletons",style:{gridTemplateColumns:`repeat(${e.columns}, 1fr)`}},o))} data-v-c145d1cc><!--[-->`),ssrRenderList(e.columns*e.rows,E=>{t(`<div class="item" style="${ssrRenderStyle({height:`${e.height}px`})}" data-v-c145d1cc>`),t(ssrRenderComponent(v,null,null,n)),t("</div>")}),t("<!--]--></ul>")}const _sfc_setup$J=_sfc_main$J.setup;_sfc_main$J.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/lens/skeleton.vue"),_sfc_setup$J?_sfc_setup$J(e,t):void 0};const LensSkeleton=_export_sfc(_sfc_main$J,[["ssrRender",_sfc_ssrRender$J],["__scopeId","data-v-c145d1cc"]]),_sfc_main$I=defineComponent({name:"LensInstagramGallery",components:{Swiper,SwiperSlide},props:{medias:{type:Array,required:!0},index:{type:Number,default:0},visible:{type:Boolean,default:!1}},emits:["close"],setup(e,t){const n=ref(e.index),o=ref(),c=computed(()=>e.medias[n.value]);return{galleryActiveIndex:n,galleryActiveMedia:c,isVideoMediaIns,getInstagramImage,handleGalleryClose:()=>{t.emit("close")},handleGallerySwiperReady:w=>{o.value=w},handleGallerySwiperTransitionStart:()=>{var w;n.value=((w=o.value)==null?void 0:w.activeIndex)||0},galleryPrevSlide:()=>{var w;return(w=o.value)==null?void 0:w.slidePrev()},galleryNextSlide:()=>{var w;return(w=o.value)==null?void 0:w.slideNext()}}}}),gallery_vue_vue_type_style_index_0_scoped_242892fa_lang="";function _sfc_ssrRender$I(e,t,n,o,c,d,g,r){const v=resolveComponent("popup"),E=resolveComponent("udate"),w=resolveComponent("ulink"),T=resolveComponent("swiper"),S=resolveComponent("swiper-slide");t(ssrRenderComponent(v,mergeProps({visible:e.visible,onClose:e.handleGalleryClose},o),{default:withCtx((N,L,P,O)=>{if(L)L(`<div class="instagram-gallery" data-v-242892fa${O}><div class="topbar" data-v-242892fa${O}><div class="left" data-v-242892fa${O}><span class="timestamp" data-v-242892fa${O}><i class="iconfont icon-clock" data-v-242892fa${O}></i>`),L(ssrRenderComponent(E,{to:"YMDm",date:e.galleryActiveMedia.timestamp,separator:"/"},null,P,O)),L(`</span></div><div class="center" data-v-242892fa${O}><span class="pagination" data-v-242892fa${O}>${ssrInterpolate(e.galleryActiveIndex+1)} / ${ssrInterpolate(e.medias.length)}</span></div><div class="right" data-v-242892fa${O}><span class="caption" data-v-242892fa${O}>`),e.isVideoMediaIns(e.galleryActiveMedia)?L(`<i class="iconfont icon-video" data-v-242892fa${O}></i>`):L(`<i class="iconfont icon-camera" data-v-242892fa${O}></i>`),e.galleryActiveMedia.caption?L(`<!--[-->${ssrInterpolate(e.galleryActiveMedia.caption)}<!--]-->`):L("<!---->"),L("</span></div></div>"),L(ssrRenderComponent(w,{class:"postlink",href:e.galleryActiveMedia.permalink},{default:withCtx((V,D,U,W)=>{if(D)D(`<i class="iconfont icon-instagram" data-v-242892fa${W}></i>`);else return[createVNode("i",{class:"iconfont icon-instagram"})]}),_:1},P,O)),L(`<button class="navigation prev"${includeBooleanAttr(e.galleryActiveIndex===0)?" disabled":""} data-v-242892fa${O}><i class="iconfont icon-prev" data-v-242892fa${O}></i></button><button class="navigation next"${includeBooleanAttr(e.galleryActiveIndex===e.medias.length-1)?" disabled":""} data-v-242892fa${O}><i class="iconfont icon-next" data-v-242892fa${O}></i></button>`),L(ssrRenderComponent(T,{effect:"fade","fade-effect":{crossFade:!0},"initial-slide":e.index,mousewheel:!0,"observe-parents":!0,"grab-cursor":!1,"preload-images":!1,lazy:!0,"simulate-touch":!1,onSwiper:e.handleGallerySwiperReady,onTransitionStart:e.handleGallerySwiperTransitionStart},{default:withCtx((V,D,U,W)=>{if(D)D("<!--[-->"),ssrRenderList(e.medias,(Z,re)=>{D(ssrRenderComponent(S,{key:re},{default:withCtx(({isActive:ae},ce,ne,le)=>{if(ce)e.isVideoMediaIns(Z)?(ce(`<div class="video" data-v-242892fa${le}>`),ce(ae?`<video class="player"${ssrRenderAttr("src",Z.media_url)} controls autoplay data-v-242892fa${le}></video>`:"<!---->"),ce("</div>")):ce(`<!--[--><div class="image swiper-lazy"${ssrRenderAttr("data-background",e.getInstagramImage(Z))}${ssrRenderAttr("alt",Z.caption)} data-v-242892fa${le}></div><div class="swiper-lazy-preloader swiper-lazy-preloader-white" data-v-242892fa${le}></div><!--]-->`);else return[e.isVideoMediaIns(Z)?(openBlock(),createBlock("div",{key:0,class:"video"},[ae?(openBlock(),createBlock("video",{key:0,class:"player",src:Z.media_url,controls:"",autoplay:""},null,8,["src"])):createCommentVNode("",!0)])):(openBlock(),createBlock(Fragment,{key:1},[createVNode("div",{class:"image swiper-lazy","data-background":e.getInstagramImage(Z),alt:Z.caption},null,8,["data-background","alt"]),createVNode("div",{class:"swiper-lazy-preloader swiper-lazy-preloader-white"})],64))]}),_:2},U,W))}),D("<!--]-->");else return[(openBlock(!0),createBlock(Fragment,null,renderList(e.medias,(Z,re)=>(openBlock(),createBlock(S,{key:re},{default:withCtx(({isActive:ae})=>[e.isVideoMediaIns(Z)?(openBlock(),createBlock("div",{key:0,class:"video"},[ae?(openBlock(),createBlock("video",{key:0,class:"player",src:Z.media_url,controls:"",autoplay:""},null,8,["src"])):createCommentVNode("",!0)])):(openBlock(),createBlock(Fragment,{key:1},[createVNode("div",{class:"image swiper-lazy","data-background":e.getInstagramImage(Z),alt:Z.caption},null,8,["data-background","alt"]),createVNode("div",{class:"swiper-lazy-preloader swiper-lazy-preloader-white"})],64))]),_:2},1024))),128))]}),_:1},P,O)),L("</div>");else return[createVNode("div",{class:"instagram-gallery"},[createVNode("div",{class:"topbar"},[createVNode("div",{class:"left"},[createVNode("span",{class:"timestamp"},[createVNode("i",{class:"iconfont icon-clock"}),createVNode(E,{to:"YMDm",date:e.galleryActiveMedia.timestamp,separator:"/"},null,8,["date"])])]),createVNode("div",{class:"center"},[createVNode("span",{class:"pagination"},toDisplayString(e.galleryActiveIndex+1)+" / "+toDisplayString(e.medias.length),1)]),createVNode("div",{class:"right"},[createVNode("span",{class:"caption"},[e.isVideoMediaIns(e.galleryActiveMedia)?(openBlock(),createBlock("i",{key:0,class:"iconfont icon-video"})):(openBlock(),createBlock("i",{key:1,class:"iconfont icon-camera"})),e.galleryActiveMedia.caption?(openBlock(),createBlock(Fragment,{key:2},[createTextVNode(toDisplayString(e.galleryActiveMedia.caption),1)],64)):createCommentVNode("",!0)])])]),createVNode(w,{class:"postlink",href:e.galleryActiveMedia.permalink},{default:withCtx(()=>[createVNode("i",{class:"iconfont icon-instagram"})]),_:1},8,["href"]),createVNode("button",{class:"navigation prev",onClick:e.galleryPrevSlide,disabled:e.galleryActiveIndex===0},[createVNode("i",{class:"iconfont icon-prev"})],8,["onClick","disabled"]),createVNode("button",{class:"navigation next",onClick:e.galleryNextSlide,disabled:e.galleryActiveIndex===e.medias.length-1},[createVNode("i",{class:"iconfont icon-next"})],8,["onClick","disabled"]),createVNode(T,{effect:"fade","fade-effect":{crossFade:!0},"initial-slide":e.index,mousewheel:!0,"observe-parents":!0,"grab-cursor":!1,"preload-images":!1,lazy:!0,"simulate-touch":!1,onSwiper:e.handleGallerySwiperReady,onTransitionStart:e.handleGallerySwiperTransitionStart},{default:withCtx(()=>[(openBlock(!0),createBlock(Fragment,null,renderList(e.medias,(V,D)=>(openBlock(),createBlock(S,{key:D},{default:withCtx(({isActive:U})=>[e.isVideoMediaIns(V)?(openBlock(),createBlock("div",{key:0,class:"video"},[U?(openBlock(),createBlock("video",{key:0,class:"player",src:V.media_url,controls:"",autoplay:""},null,8,["src"])):createCommentVNode("",!0)])):(openBlock(),createBlock(Fragment,{key:1},[createVNode("div",{class:"image swiper-lazy","data-background":e.getInstagramImage(V),alt:V.caption},null,8,["data-background","alt"]),createVNode("div",{class:"swiper-lazy-preloader swiper-lazy-preloader-white"})],64))]),_:2},1024))),128))]),_:1},8,["initial-slide","onSwiper","onTransitionStart"])])]}),_:1},n))}const _sfc_setup$I=_sfc_main$I.setup;_sfc_main$I.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/lens/instagram/gallery.vue"),_sfc_setup$I?_sfc_setup$I(e,t):void 0};const Gallery=_export_sfc(_sfc_main$I,[["ssrRender",_sfc_ssrRender$I],["__scopeId","data-v-242892fa"]]),_sfc_main$H=defineComponent({name:"LensInstagramGrid",components:{Gallery},props:{medias:{type:Array,required:!0},limit:{type:Number,required:!0}},setup(e){const{gtag:t}=useEnhancer(),n=ref(),o=computed(()=>n.value!==UNDEFINED),c=computed(()=>e.medias.slice(0,e.limit-1)),d=computed(()=>c.value.length>1?e.medias.slice(e.limit-1,e.limit+2):[]);return{VALUABLE_LINKS,gridMedias:c,restMedias:d,isOnGallery:o,galleryActiveIndex:n,isVideoMediaIns,isAlbumMediaIns,getTargetCDNURL,getInstagramImage,openMediaGallery:v=>{n.value=v,t==null||t.event("instagram_view",{event_category:GAEventCategories.Lens})},closeMediaGallery:()=>{n.value=UNDEFINED}}}}),grid_vue_vue_type_style_index_0_scoped_f1bfd8b1_lang="";function _sfc_ssrRender$H(e,t,n,o,c,d,g,r){const v=resolveComponent("ulink"),E=resolveComponent("client-only"),w=resolveComponent("gallery"),T=resolveDirective("lozad");t(`<div${ssrRenderAttrs(mergeProps({class:"instagram-grid"},o))} data-v-f1bfd8b1><ul class="medias" data-v-f1bfd8b1><!--[-->`),ssrRenderList(e.gridMedias,(S,N)=>{t(`<li${ssrRenderAttr("title",S.caption)} class="${ssrRenderClass([e.isVideoMediaIns(S)?"video":"photo","media"])}" data-v-f1bfd8b1><div${ssrRenderAttrs(mergeProps({class:"background","data-background-image":e.getInstagramImage(S,"m")},ssrGetDirectiveProps(e,T)))} data-v-f1bfd8b1></div><div class="mask" data-v-f1bfd8b1><span class="icon" data-v-f1bfd8b1>`),e.isVideoMediaIns(S)?t('<i class="iconfont icon-music-play" data-v-f1bfd8b1></i>'):t('<i class="iconfont icon-eye" data-v-f1bfd8b1></i>'),t('</span></div><div class="type-icon" data-v-f1bfd8b1>'),e.isVideoMediaIns(S)?t('<i class="iconfont icon-video" data-v-f1bfd8b1></i>'):t("<!---->"),e.isAlbumMediaIns(S)?t('<i class="iconfont icon-album" data-v-f1bfd8b1></i>'):t("<!---->"),t("</div></li>")}),t('<!--]--><li class="more" data-v-f1bfd8b1><!--[-->'),ssrRenderList(e.restMedias,(S,N)=>{t(ssrRenderComponent(v,{class:"media",href:S.permalink,key:N,title:S.caption,style:{backgroundImage:`url(${e.getInstagramImage(S,"t")})`}},{default:withCtx((L,P,O,V)=>{if(P)P(`<div class="mask" data-v-f1bfd8b1${V}><i class="iconfont icon-new-window-s" data-v-f1bfd8b1${V}></i></div>`);else return[createVNode("div",{class:"mask"},[createVNode("i",{class:"iconfont icon-new-window-s"})])]}),_:2},n))}),t("<!--]--><!--[-->"),ssrRenderList(3-e.restMedias.length,S=>{t(ssrRenderComponent(v,{class:"media",href:e.VALUABLE_LINKS.INSTAGRAM,key:S,style:{backgroundImage:`url(${e.getTargetCDNURL("/images/page-lens/instagram-default.jpg")})`}},{default:withCtx((N,L,P,O)=>{if(L)L(`<div class="mask" data-v-f1bfd8b1${O}><i class="iconfont icon-new-window-s" data-v-f1bfd8b1${O}></i></div>`);else return[createVNode("div",{class:"mask"},[createVNode("i",{class:"iconfont icon-new-window-s"})])]}),_:2},n))}),t("<!--]-->"),t(ssrRenderComponent(v,{class:"link",href:e.VALUABLE_LINKS.INSTAGRAM},{default:withCtx((S,N,L,P)=>{if(N)N("\u2022\u2022\u2022");else return[createTextVNode("\u2022\u2022\u2022")]}),_:1},n)),t("</li></ul>"),t(ssrRenderComponent(E,null,{default:withCtx((S,N,L,P)=>{if(N)N(ssrRenderComponent(w,{medias:e.gridMedias,index:e.galleryActiveIndex,visible:e.isOnGallery,onClose:e.closeMediaGallery},null,L,P));else return[createVNode(w,{medias:e.gridMedias,index:e.galleryActiveIndex,visible:e.isOnGallery,onClose:e.closeMediaGallery},null,8,["medias","index","visible","onClose"])]}),_:1},n)),t("</div>")}const _sfc_setup$H=_sfc_main$H.setup;_sfc_main$H.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/lens/instagram/grid.vue"),_sfc_setup$H?_sfc_setup$H(e,t):void 0};const InstagramGrid=_export_sfc(_sfc_main$H,[["ssrRender",_sfc_ssrRender$H],["__scopeId","data-v-f1bfd8b1"]]),_sfc_main$G=defineComponent({name:"LensListSwiper",components:{Swiper,SwiperSlide},props:{data:{type:Array,required:!0},rows:{type:Number,default:2},columns:{type:Number,default:5}},setup(){const e=reactive({canPrev:!1,canNext:!0}),t=ref(),n=()=>{var g;return(g=t.value)==null?void 0:g.slidePrev()},o=()=>{var g;return(g=t.value)==null?void 0:g.slideNext()},c=g=>{e.canNext=!g.isEnd,e.canPrev=!g.isBeginning};return{handleListSwiperReady:g=>{t.value=g,c(g)},handleListSlideChange:c,listSwiperState:e,listPrevSlide:n,listNextSlide:o}}}),swiper_vue_vue_type_style_index_0_scoped_44fea3ed_lang="";function _sfc_ssrRender$G(e,t,n,o,c,d,g,r){const v=resolveComponent("swiper",!0),E=resolveComponent("swiper-slide");t(`<div${ssrRenderAttrs(mergeProps({class:"list-swiper"},o))} data-v-44fea3ed><div class="navigation prev" data-v-44fea3ed><button class="button"${includeBooleanAttr(!e.listSwiperState.canPrev)?" disabled":""} data-v-44fea3ed><i class="iconfont icon-prev" data-v-44fea3ed></i></button></div><div class="navigation next" data-v-44fea3ed><button class="button"${includeBooleanAttr(!e.listSwiperState.canNext)?" disabled":""} data-v-44fea3ed><i class="iconfont icon-next" data-v-44fea3ed></i></button></div>`),t(ssrRenderComponent(v,{class:"swiper",autoplay:!0,mousewheel:!1,"grab-cursor":!1,"allow-touch-move":!1,"slides-per-view":e.columns,"slides-per-group":e.columns,grid:{rows:e.rows,fill:"row"},"space-between":24,onSwiper:e.handleListSwiperReady,onSlideChange:e.handleListSlideChange},{default:withCtx((w,T,S,N)=>{if(T)T("<!--[-->"),ssrRenderList(e.data,(L,P)=>{T(ssrRenderComponent(E,{class:"slide-item",key:P},{default:withCtx((O,V,D,U)=>{if(V)ssrRenderSlot(e.$slots,"item",{item:L,index:P},null,V,D,U);else return[renderSlot(e.$slots,"item",{item:L,index:P},void 0,!0)]}),_:2},S,N))}),T("<!--]-->");else return[(openBlock(!0),createBlock(Fragment,null,renderList(e.data,(L,P)=>(openBlock(),createBlock(E,{class:"slide-item",key:P},{default:withCtx(()=>[renderSlot(e.$slots,"item",{item:L,index:P},void 0,!0)]),_:2},1024))),128))]}),_:3},n)),t("</div>")}const _sfc_setup$G=_sfc_main$G.setup;_sfc_main$G.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/lens/swiper.vue"),_sfc_setup$G?_sfc_setup$G(e,t):void 0};const ListSwiper=_export_sfc(_sfc_main$G,[["ssrRender",_sfc_ssrRender$G],["__scopeId","data-v-44fea3ed"]]),_sfc_main$F=defineComponent({name:"LensYoutubeVideoList",components:{ListSwiper},props:{playlistId:{type:String,required:!0}},emits:["view"],setup(e,t){const{gtag:n}=useEnhancer(),o=ref([]),c=ref(!0),d=async()=>{try{c.value=!0,o.value=await fetchYouTubeVideoList(e.playlistId)}catch{o.value=[]}finally{c.value=!1}},g=v=>{var w,T,S;const E=((w=v.high)==null?void 0:w.url)||((T=v.medium)==null?void 0:T.url)||((S=v.defult)==null?void 0:S.url);return E?getTargetProxyURL(E,ProxyModule.YouTube):""},r=v=>{t.emit("view",v),n==null||n.event("youtube_view",{event_category:GAEventCategories.Lens})};return onMounted(()=>{d()}),{LanguageKey,fetching:c,videos:o,getThumbURL:g,handleView:r}}}),videos_vue_vue_type_style_index_0_scoped_b28be25a_lang="";function _sfc_ssrRender$F(e,t,n,o,c,d,g,r){const v=resolveComponent("placeholder"),E=resolveComponent("list-swiper"),w=resolveComponent("udate"),T=resolveDirective("lozad");t(ssrRenderComponent(v,mergeProps({data:e.videos,loading:e.fetching},o),{placeholder:withCtx((S,N,L,P)=>{if(N)ssrRenderSlot(e.$slots,"empty",{},null,N,L,P);else return[renderSlot(e.$slots,"empty",{},void 0,!0)]}),loading:withCtx((S,N,L,P)=>{if(N)ssrRenderSlot(e.$slots,"loading",{},null,N,L,P);else return[renderSlot(e.$slots,"loading",{},void 0,!0)]}),default:withCtx((S,N,L,P)=>{if(N)N(ssrRenderComponent(E,{data:e.videos},{item:withCtx(({item:O},V,D,U)=>{if(V)V(`<div class="video" data-v-b28be25a${U}><div class="thumb" data-v-b28be25a${U}><div class="mask" data-v-b28be25a${U}><div class="button" data-v-b28be25a${U}><i class="iconfont icon-music-play" data-v-b28be25a${U}></i></div></div><span class="published-at" data-v-b28be25a${U}><i class="iconfont icon-clock" data-v-b28be25a${U}></i><span class="text" data-v-b28be25a${U}>`),V(ssrRenderComponent(w,{to:"ago",date:O.snippet.publishedAt},null,D,U)),V(`</span></span><div${ssrRenderAttrs(mergeProps({class:"background","data-background-image":e.getThumbURL(O.snippet.thumbnails)},ssrGetDirectiveProps(e,T)))} data-v-b28be25a${U}></div></div><h5 class="title" data-v-b28be25a${U}>${ssrInterpolate(O.snippet.title)}</h5><div class="description" data-v-b28be25a${U}>${ssrInterpolate(O.snippet.description||"-")}</div></div>`);else return[createVNode("div",{class:"video",onClick:W=>e.handleView(O)},[createVNode("div",{class:"thumb"},[createVNode("div",{class:"mask"},[createVNode("div",{class:"button"},[createVNode("i",{class:"iconfont icon-music-play"})])]),createVNode("span",{class:"published-at"},[createVNode("i",{class:"iconfont icon-clock"}),createVNode("span",{class:"text"},[createVNode(w,{to:"ago",date:O.snippet.publishedAt},null,8,["date"])])]),withDirectives(createVNode("div",{class:"background","data-background-image":e.getThumbURL(O.snippet.thumbnails)},null,8,["data-background-image"]),[[T]])]),createVNode("h5",{class:"title"},toDisplayString(O.snippet.title),1),createVNode("div",{class:"description"},toDisplayString(O.snippet.description||"-"),1)],8,["onClick"])]}),_:1},L,P));else return[createVNode(E,{data:e.videos},{item:withCtx(({item:O})=>[createVNode("div",{class:"video",onClick:V=>e.handleView(O)},[createVNode("div",{class:"thumb"},[createVNode("div",{class:"mask"},[createVNode("div",{class:"button"},[createVNode("i",{class:"iconfont icon-music-play"})])]),createVNode("span",{class:"published-at"},[createVNode("i",{class:"iconfont icon-clock"}),createVNode("span",{class:"text"},[createVNode(w,{to:"ago",date:O.snippet.publishedAt},null,8,["date"])])]),withDirectives(createVNode("div",{class:"background","data-background-image":e.getThumbURL(O.snippet.thumbnails)},null,8,["data-background-image"]),[[T]])]),createVNode("h5",{class:"title"},toDisplayString(O.snippet.title),1),createVNode("div",{class:"description"},toDisplayString(O.snippet.description||"-"),1)],8,["onClick"])]),_:1},8,["data"])]}),_:3},n))}const _sfc_setup$F=_sfc_main$F.setup;_sfc_main$F.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/lens/youtube/videos.vue"),_sfc_setup$F?_sfc_setup$F(e,t):void 0};const YoutubeVideoList=_export_sfc(_sfc_main$F,[["ssrRender",_sfc_ssrRender$F],["__scopeId","data-v-b28be25a"]]),_sfc_main$E=defineComponent({name:"LensPageYoutubePlaylist",components:{YoutubeVideoList},props:{playlists:{type:Array,required:!0}},setup(){const e=ref(null),t=computed(()=>Boolean(e.value)),n=computed(()=>{const d=e.value;return d?getYouTubeVideoEmbedURL(d.snippet.resourceId.videoId,d.snippet.playlistId):UNDEFINED});return{isOnYouTubeModal:t,youTubeModalURL:n,openYouTubeModal:d=>{e.value=d},closeYouTubeModal:()=>{e.value=null}}}}),playlist_vue_vue_type_style_index_0_scoped_d52714bd_lang="";function _sfc_ssrRender$E(e,t,n,o,c,d,g,r){const v=resolveComponent("youtube-video-list"),E=resolveComponent("client-only"),w=resolveComponent("popup");t(`<div${ssrRenderAttrs(mergeProps({class:"youtube-playlist"},o))} data-v-d52714bd><ul class="playlist" data-v-d52714bd><!--[-->`),ssrRenderList(e.playlists,(T,S)=>{t(`<li class="item"${ssrRenderAttr("title",T.title)} data-v-d52714bd>`),ssrRenderSlot(e.$slots,"title",{list:T,index:S},null,t,n),t(ssrRenderComponent(v,{"playlist-id":T.id,onView:e.openYouTubeModal},{empty:withCtx((N,L,P,O)=>{if(L)ssrRenderSlot(e.$slots,"empty",{},null,L,P,O);else return[renderSlot(e.$slots,"empty",{},void 0,!0)]}),loading:withCtx((N,L,P,O)=>{if(L)ssrRenderSlot(e.$slots,"loading",{},null,L,P,O);else return[renderSlot(e.$slots,"loading",{},void 0,!0)]}),_:2},n)),t("</li>")}),t("<!--]--></ul>"),t(ssrRenderComponent(E,null,{default:withCtx((T,S,N,L)=>{if(S)S(ssrRenderComponent(w,{visible:e.isOnYouTubeModal,"scroll-close":!1,onClose:e.closeYouTubeModal},{default:withCtx((P,O,V,D)=>{if(O)O(`<iframe class="youtube-modal"${ssrRenderAttr("src",e.youTubeModalURL)} data-v-d52714bd${D}></iframe>`);else return[createVNode("iframe",{class:"youtube-modal",src:e.youTubeModalURL},null,8,["src"])]}),_:1},N,L));else return[createVNode(w,{visible:e.isOnYouTubeModal,"scroll-close":!1,onClose:e.closeYouTubeModal},{default:withCtx(()=>[createVNode("iframe",{class:"youtube-modal",src:e.youTubeModalURL},null,8,["src"])]),_:1},8,["visible","onClose"])]}),_:1},n)),t("</div>")}const _sfc_setup$E=_sfc_main$E.setup;_sfc_main$E.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/lens/youtube/playlist.vue"),_sfc_setup$E?_sfc_setup$E(e,t):void 0};const YoutubePlaylist=_export_sfc(_sfc_main$E,[["ssrRender",_sfc_ssrRender$E],["__scopeId","data-v-d52714bd"]]),_sfc_main$D=defineComponent({name:"LensPage",components:{PageBanner,LensSkeleton,InstagramGrid,YoutubePlaylist},setup(){const{i18n:e,meta:t,isZhLang:n}=useEnhancer(),{instagramMedias:o,youtubePlayList:c}=useStores(),d=computed(()=>c.data.filter(g=>g.contentDetails.itemCount>1));return t(()=>{const g=firstUpperCase(e.t(LanguageKey.PAGE_LENS,Language.English));return{pageTitle:(n.value?[e.t(LanguageKey.PAGE_LENS),g]:[g]).join(" | "),description:`${META.author} \u7684\u6D6E\u5149\u63A0\u5F71`}}),useUniversalFetch(()=>Promise.all([o.fetch().catch(()=>{}),c.fetch().catch(()=>{})])),{VALUABLE_LINKS,LanguageKey,instagramMedias:o,youtubePlaylistData:d,getYouTubePlaylistURL}}}),index_vue_vue_type_style_index_0_scoped_178f395a_lang="";function _sfc_ssrRender$D(e,t,n,o,c,d,g,r){const v=resolveComponent("page-banner"),E=resolveComponent("webfont"),w=resolveComponent("i18n"),T=resolveComponent("container"),S=resolveComponent("ulink"),N=resolveComponent("placeholder"),L=resolveComponent("empty"),P=resolveComponent("lens-skeleton"),O=resolveComponent("instagram-grid"),V=resolveComponent("youtube-playlist");t(`<div${ssrRenderAttrs(mergeProps({class:"lens-page"},o))} data-v-178f395a>`),t(ssrRenderComponent(v,{class:"page-banner",position:68,image:"/images/page-lens/banner.jpeg"},{title:withCtx((D,U,W,Z)=>{if(U)U(ssrRenderComponent(E,null,{default:withCtx((re,ae,ce,ne)=>{if(ae)ae(ssrRenderComponent(w,{zh:"\u51E1\u5FC3\u6240\u5411\uFF0C\u7D20\u5C65\u4EE5\u5F80",en:"Because it's there"},null,ce,ne));else return[createVNode(w,{zh:"\u51E1\u5FC3\u6240\u5411\uFF0C\u7D20\u5C65\u4EE5\u5F80",en:"Because it's there"})]}),_:1},W,Z));else return[createVNode(E,null,{default:withCtx(()=>[createVNode(w,{zh:"\u51E1\u5FC3\u6240\u5411\uFF0C\u7D20\u5C65\u4EE5\u5F80",en:"Because it's there"})]),_:1})]}),description:withCtx((D,U,W,Z)=>{if(U)U(ssrRenderComponent(w,null,{zh:withCtx((re,ae,ce,ne)=>{if(ae)ae("\u751F\u5982\u9006\u65C5\uFF0C\u4E00\u82C7\u4EE5\u822A");else return[createTextVNode("\u751F\u5982\u9006\u65C5\uFF0C\u4E00\u82C7\u4EE5\u822A")]}),en:withCtx((re,ae,ce,ne)=>{if(ae)ae("&quot;why did you want to climb mount Everest?&quot;");else return[createTextVNode('"why did you want to climb mount Everest?"')]}),_:1},W,Z));else return[createVNode(w,null,{zh:withCtx(()=>[createTextVNode("\u751F\u5982\u9006\u65C5\uFF0C\u4E00\u82C7\u4EE5\u822A")]),en:withCtx(()=>[createTextVNode('"why did you want to climb mount Everest?"')]),_:1})]}),_:1},n)),t(ssrRenderComponent(T,{class:"page-bridge"},null,n)),t(ssrRenderComponent(T,{class:"page-content"},{default:withCtx((D,U,W,Z)=>{if(U)U(`<h4 class="module-title instagram" data-v-178f395a${Z}>`),U(ssrRenderComponent(S,{class:"link",href:e.VALUABLE_LINKS.INSTAGRAM},{default:withCtx((re,ae,ce,ne)=>{if(ae)ae("\u6D6E\u5149\u63A0\u5F71 | photography");else return[createTextVNode("\u6D6E\u5149\u63A0\u5F71 | photography")]}),_:1},W,Z)),U(ssrRenderComponent(S,{class:"brand",href:e.VALUABLE_LINKS.INSTAGRAM},{default:withCtx((re,ae,ce,ne)=>{if(ae)ae(`<i class="iconfont icon-instagram" data-v-178f395a${ne}></i><span class="text" data-v-178f395a${ne}>Instagram</span>`);else return[createVNode("i",{class:"iconfont icon-instagram"}),createVNode("span",{class:"text"},"Instagram")]}),_:1},W,Z)),U("</h4>"),U(ssrRenderComponent(N,{data:e.instagramMedias,loading:e.instagramMedias.fetching},{placeholder:withCtx((re,ae,ce,ne)=>{if(ae)ae(ssrRenderComponent(L,{class:"module-empty",key:"empty"},{default:withCtx((le,de,ie,ve)=>{if(de)de(ssrRenderComponent(w,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,ie,ve));else return[createVNode(w,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,8,["k"])]}),_:1},ce,ne));else return[createVNode(L,{class:"module-empty",key:"empty"},{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,8,["k"])]),_:1})]}),loading:withCtx((re,ae,ce,ne)=>{if(ae)ae(ssrRenderComponent(P,{columns:6,rows:2,height:155,key:"loading",class:"module-loading"},null,ce,ne));else return[createVNode(P,{columns:6,rows:2,height:155,key:"loading",class:"module-loading"})]}),default:withCtx((re,ae,ce,ne)=>{if(ae)ae(`<div class="module-content" data-v-178f395a${ne}>`),ae(ssrRenderComponent(O,{medias:e.instagramMedias.data,limit:24},null,ce,ne)),ae("</div>");else return[createVNode("div",{class:"module-content"},[createVNode(O,{medias:e.instagramMedias.data,limit:24},null,8,["medias"])])]}),_:1},W,Z)),U(`<div class="module-content" data-v-178f395a${Z}>`),U(ssrRenderComponent(V,{playlists:e.youtubePlaylistData},{title:withCtx(({list:re},ae,ce,ne)=>{if(ae)ae(`<h4 class="module-title youtube" data-v-178f395a${ne}>`),ae(ssrRenderComponent(S,{class:"link",href:e.getYouTubePlaylistURL(re.id)},{default:withCtx((le,de,ie,ve)=>{if(de)de(`${ssrInterpolate(re.snippet.title)} (${ssrInterpolate(re.contentDetails.itemCount)}) `);else return[createTextVNode(toDisplayString(re.snippet.title)+" ("+toDisplayString(re.contentDetails.itemCount)+") ",1)]}),_:2},ce,ne)),ae(ssrRenderComponent(S,{class:"brand",href:e.VALUABLE_LINKS.YOUTUBE_CHANNEL},{default:withCtx((le,de,ie,ve)=>{if(de)de(`<i class="iconfont icon-youtube" data-v-178f395a${ve}></i><span class="text" data-v-178f395a${ve}>YouTube \xB7 Channel</span>`);else return[createVNode("i",{class:"iconfont icon-youtube"}),createVNode("span",{class:"text"},"YouTube \xB7 Channel")]}),_:2},ce,ne)),ae("</h4>");else return[createVNode("h4",{class:"module-title youtube"},[createVNode(S,{class:"link",href:e.getYouTubePlaylistURL(re.id)},{default:withCtx(()=>[createTextVNode(toDisplayString(re.snippet.title)+" ("+toDisplayString(re.contentDetails.itemCount)+") ",1)]),_:2},1032,["href"]),createVNode(S,{class:"brand",href:e.VALUABLE_LINKS.YOUTUBE_CHANNEL},{default:withCtx(()=>[createVNode("i",{class:"iconfont icon-youtube"}),createVNode("span",{class:"text"},"YouTube \xB7 Channel")]),_:1},8,["href"])])]}),loading:withCtx((re,ae,ce,ne)=>{if(ae)ae(ssrRenderComponent(P,{columns:5,rows:1,height:166,key:"loading",class:"module-loading"},null,ce,ne));else return[createVNode(P,{columns:5,rows:1,height:166,key:"loading",class:"module-loading"})]}),empty:withCtx((re,ae,ce,ne)=>{if(ae)ae(ssrRenderComponent(L,{class:"module-empty",key:"empty"},{default:withCtx((le,de,ie,ve)=>{if(de)de(ssrRenderComponent(w,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,ie,ve));else return[createVNode(w,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,8,["k"])]}),_:1},ce,ne));else return[createVNode(L,{class:"module-empty",key:"empty"},{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,8,["k"])]),_:1})]}),_:1},W,Z)),U("</div>");else return[createVNode("h4",{class:"module-title instagram"},[createVNode(S,{class:"link",href:e.VALUABLE_LINKS.INSTAGRAM},{default:withCtx(()=>[createTextVNode("\u6D6E\u5149\u63A0\u5F71 | photography")]),_:1},8,["href"]),createVNode(S,{class:"brand",href:e.VALUABLE_LINKS.INSTAGRAM},{default:withCtx(()=>[createVNode("i",{class:"iconfont icon-instagram"}),createVNode("span",{class:"text"},"Instagram")]),_:1},8,["href"])]),createVNode(N,{data:e.instagramMedias,loading:e.instagramMedias.fetching},{placeholder:withCtx(()=>[createVNode(L,{class:"module-empty",key:"empty"},{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,8,["k"])]),_:1})]),loading:withCtx(()=>[createVNode(P,{columns:6,rows:2,height:155,key:"loading",class:"module-loading"})]),default:withCtx(()=>[createVNode("div",{class:"module-content"},[createVNode(O,{medias:e.instagramMedias.data,limit:24},null,8,["medias"])])]),_:1},8,["data","loading"]),createVNode("div",{class:"module-content"},[createVNode(V,{playlists:e.youtubePlaylistData},{title:withCtx(({list:re})=>[createVNode("h4",{class:"module-title youtube"},[createVNode(S,{class:"link",href:e.getYouTubePlaylistURL(re.id)},{default:withCtx(()=>[createTextVNode(toDisplayString(re.snippet.title)+" ("+toDisplayString(re.contentDetails.itemCount)+") ",1)]),_:2},1032,["href"]),createVNode(S,{class:"brand",href:e.VALUABLE_LINKS.YOUTUBE_CHANNEL},{default:withCtx(()=>[createVNode("i",{class:"iconfont icon-youtube"}),createVNode("span",{class:"text"},"YouTube \xB7 Channel")]),_:1},8,["href"])])]),loading:withCtx(()=>[createVNode(P,{columns:5,rows:1,height:166,key:"loading",class:"module-loading"})]),empty:withCtx(()=>[createVNode(L,{class:"module-empty",key:"empty"},{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.EMPTY_PLACEHOLDER},null,8,["k"])]),_:1})]),_:1},8,["playlists"])])]}),_:1},n)),t("</div>")}const _sfc_setup$D=_sfc_main$D.setup;_sfc_main$D.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/lens/index.vue"),_sfc_setup$D?_sfc_setup$D(e,t):void 0};const LensPage=_export_sfc(_sfc_main$D,[["ssrRender",_sfc_ssrRender$D],["__scopeId","data-v-178f395a"]]),getEtherscanURL=e=>`https://etherscan.io/address/${e}`,getOpenSeaCollectionURL=e=>`https://opensea.io/collection/${e}`,_sfc_main$C=defineComponent({name:"NftPage",components:{PageBanner,Markdown},setup(){const{i18n:e,meta:t,gtag:n,isZhLang:o}=useEnhancer(),{openseaAssets:c,openseaCollections:d}=useStores(),g=(r,v)=>{n==null||n.event(r,{event_category:GAEventCategories.NFT,event_label:v})};return t(()=>{const r=e.t(LanguageKey.PAGE_NFT,Language.English);return{pageTitle:(o.value?[e.t(LanguageKey.PAGE_NFT),r]:[r]).join(" | "),description:`${META.author} \u94F8\u9020\u7684\u6570\u5B57\u85CF\u54C1`,ogType:"product"}}),useUniversalFetch(()=>Promise.all([c.fetch().catch(()=>{}),d.fetch().catch(()=>{})])),{VALUABLE_LINKS,LanguageKey,openseaAssets:c,openseaCollections:d,getTargetProxyURL,getEtherscanURL,getOpenSeaCollectionURL,handleGTagEvent:g}}}),nft_vue_vue_type_style_index_0_scoped_d2d145c0_lang="";function _sfc_ssrRender$C(e,t,n,o,c,d,g,r){const v=resolveComponent("page-banner"),E=resolveComponent("webfont"),w=resolveComponent("i18n"),T=resolveComponent("container"),S=resolveComponent("skeleton-base"),N=resolveComponent("placeholder"),L=resolveComponent("empty"),P=resolveComponent("skeleton-paragraph"),O=resolveComponent("ulink"),V=resolveComponent("markdown");t(`<div${ssrRenderAttrs(mergeProps({class:"nft-page"},o))} data-v-d2d145c0>`),t(ssrRenderComponent(v,{position:60,image:"/images/page-nft/banner.jpg"},{title:withCtx((D,U,W,Z)=>{if(U)U(ssrRenderComponent(E,null,{default:withCtx((re,ae,ce,ne)=>{if(ae)ae(ssrRenderComponent(w,{zh:"\u65F7\u53E4\u65E0\u4E24\uFF0C\u6570\u5B57\u5178\u85CF",en:"NFT Bar"},null,ce,ne));else return[createVNode(w,{zh:"\u65F7\u53E4\u65E0\u4E24\uFF0C\u6570\u5B57\u5178\u85CF",en:"NFT Bar"})]}),_:1},W,Z));else return[createVNode(E,null,{default:withCtx(()=>[createVNode(w,{zh:"\u65F7\u53E4\u65E0\u4E24\uFF0C\u6570\u5B57\u5178\u85CF",en:"NFT Bar"})]),_:1})]}),description:withCtx((D,U,W,Z)=>{if(U)U(ssrRenderComponent(w,{zh:"\u7531\u6211\u94F8\u9020 / \u6536\u85CF\u7684\u72EC\u4E00\u65E0\u4E8C\u7684\u6570\u5B57\u85CF\u54C1",en:"Unique NFTs minted by me"},null,W,Z));else return[createVNode(w,{zh:"\u7531\u6211\u94F8\u9020 / \u6536\u85CF\u7684\u72EC\u4E00\u65E0\u4E8C\u7684\u6570\u5B57\u85CF\u54C1",en:"Unique NFTs minted by me"})]}),_:1},n)),t(ssrRenderComponent(T,{class:"page-statistic"},{default:withCtx((D,U,W,Z)=>{if(U)U(""),e.openseaCollections.fetching?(U(`<div class="skeletons" data-v-d2d145c0${Z}><!--[-->`),ssrRenderList(5,re=>{U(ssrRenderComponent(S,{class:"item",key:re},null,W,Z))}),U("<!--]--></div>")):(U(`<ul class="statistics" data-v-d2d145c0${Z}><li class="item" data-v-d2d145c0${Z}><p class="title" data-v-d2d145c0${Z}>`),U(ssrRenderComponent(w,{zh:"\u603B\u4EA4\u6613\u91CF",en:"Total Volume"},null,W,Z)),U(`</p><h3 class="count" data-v-d2d145c0${Z}>${ssrInterpolate(e.openseaCollections.totalVolume||"0.00")}</h3></li><li class="item" data-v-d2d145c0${Z}><p class="title" data-v-d2d145c0${Z}>`),U(ssrRenderComponent(w,{zh:"\u603B\u552E\u51FA\u91CF",en:"Total Sales"},null,W,Z)),U(`</p><h3 class="count" data-v-d2d145c0${Z}>${ssrInterpolate(e.openseaCollections.totalSales||"0.00")}</h3></li><li class="item" data-v-d2d145c0${Z}><p class="title" data-v-d2d145c0${Z}>`),U(ssrRenderComponent(w,{zh:"NFTs / \u7CFB\u5217",en:"Assets / Colls"},null,W,Z)),U(`</p><h3 class="count" data-v-d2d145c0${Z}>${ssrInterpolate(e.openseaCollections.assetsCount)} / ${ssrInterpolate(e.openseaCollections.data.length)}</h3></li><li class="item" data-v-d2d145c0${Z}><p class="title" data-v-d2d145c0${Z}>`),U(ssrRenderComponent(w,{zh:"\u5730\u677F\u4EF7",en:"floor price"},null,W,Z)),U(`</p><h3 class="count" data-v-d2d145c0${Z}>${ssrInterpolate(e.openseaCollections.floorPrice||"0.00")}</h3></li><li class="item" data-v-d2d145c0${Z}><p class="title" data-v-d2d145c0${Z}>`),U(ssrRenderComponent(w,{zh:"\u5E73\u5747\u552E\u4EF7",en:"average price"},null,W,Z)),U(`</p><h3 class="count" data-v-d2d145c0${Z}>${ssrInterpolate(e.openseaCollections.average_price||"0.00")}</h3></li></ul>`));else return[createVNode(Transition,{name:"module",mode:"out-in"},{default:withCtx(()=>[e.openseaCollections.fetching?(openBlock(),createBlock("div",{key:0,class:"skeletons"},[(openBlock(),createBlock(Fragment,null,renderList(5,re=>createVNode(S,{class:"item",key:re})),64))])):(openBlock(),createBlock("ul",{key:1,class:"statistics"},[createVNode("li",{class:"item"},[createVNode("p",{class:"title"},[createVNode(w,{zh:"\u603B\u4EA4\u6613\u91CF",en:"Total Volume"})]),createVNode("h3",{class:"count"},toDisplayString(e.openseaCollections.totalVolume||"0.00"),1)]),createVNode("li",{class:"item"},[createVNode("p",{class:"title"},[createVNode(w,{zh:"\u603B\u552E\u51FA\u91CF",en:"Total Sales"})]),createVNode("h3",{class:"count"},toDisplayString(e.openseaCollections.totalSales||"0.00"),1)]),createVNode("li",{class:"item"},[createVNode("p",{class:"title"},[createVNode(w,{zh:"NFTs / \u7CFB\u5217",en:"Assets / Colls"})]),createVNode("h3",{class:"count"},toDisplayString(e.openseaCollections.assetsCount)+" / "+toDisplayString(e.openseaCollections.data.length),1)]),createVNode("li",{class:"item"},[createVNode("p",{class:"title"},[createVNode(w,{zh:"\u5730\u677F\u4EF7",en:"floor price"})]),createVNode("h3",{class:"count"},toDisplayString(e.openseaCollections.floorPrice||"0.00"),1)]),createVNode("li",{class:"item"},[createVNode("p",{class:"title"},[createVNode(w,{zh:"\u5E73\u5747\u552E\u4EF7",en:"average price"})]),createVNode("h3",{class:"count"},toDisplayString(e.openseaCollections.average_price||"0.00"),1)])]))]),_:1})]}),_:1},n)),t(ssrRenderComponent(T,{class:"page-content"},{default:withCtx((D,U,W,Z)=>{if(U)U(ssrRenderComponent(N,{data:e.openseaAssets.assets.length,loading:e.openseaAssets.fetching},{placeholder:withCtx((re,ae,ce,ne)=>{if(ae)ae(ssrRenderComponent(L,{class:"asset-empty",key:"empty"},{default:withCtx((le,de,ie,ve)=>{if(de)de("NULL");else return[createTextVNode("NULL")]}),_:1},ce,ne));else return[createVNode(L,{class:"asset-empty",key:"empty"},{default:withCtx(()=>[createTextVNode("NULL")]),_:1})]}),loading:withCtx((re,ae,ce,ne)=>{if(ae)ae(`<ul class="asset-skeleton" data-v-d2d145c0${ne}><!--[-->`),ssrRenderList(8,le=>{ae(`<li class="item" data-v-d2d145c0${ne}>`),ae(ssrRenderComponent(S,{class:"image"},null,ce,ne)),ae(ssrRenderComponent(P,{class:"paragraph",lines:4,align:!0,"line-height":"1em"},null,ce,ne)),ae("</li>")}),ae("<!--]--></ul>");else return[createVNode("ul",{class:"asset-skeleton",key:"skeleton"},[(openBlock(),createBlock(Fragment,null,renderList(8,le=>createVNode("li",{key:le,class:"item"},[createVNode(S,{class:"image"}),createVNode(P,{class:"paragraph",lines:4,align:!0,"line-height":"1em"})])),64))])]}),default:withCtx((re,ae,ce,ne)=>{if(ae)ae(`<ul class="asset-list" data-v-d2d145c0${ne}><!--[-->`),ssrRenderList(e.openseaAssets.assets,(le,de)=>{ae(`<li class="asset" data-v-d2d145c0${ne}><div class="image" style="${ssrRenderStyle({backgroundImage:`url('${e.getTargetProxyURL(le.image_url)}')`})}" data-v-d2d145c0${ne}>`),ae(ssrRenderComponent(O,{class:"contract",href:e.getEtherscanURL(le.asset_contract.address),onClick:ie=>e.handleGTagEvent("asset_contract_link",le.name)},{default:withCtx((ie,ve,Pe,ct)=>{if(ve)ve(`<i class="iconfont icon-coin" data-v-d2d145c0${ct}></i><span class="text" data-v-d2d145c0${ct}>${ssrInterpolate(le.asset_contract.schema_name)}</span>`);else return[createVNode("i",{class:"iconfont icon-coin"}),createVNode("span",{class:"text"},toDisplayString(le.asset_contract.schema_name),1)]}),_:2},ce,ne)),le.external_link?ae(ssrRenderComponent(O,{class:"external",href:le.external_link,onClick:ie=>e.handleGTagEvent("asset_external_link",le.name)},{default:withCtx((ie,ve,Pe,ct)=>{if(ve)ve(`<i class="iconfont icon-new-window-s" data-v-d2d145c0${ct}></i>`);else return[createVNode("i",{class:"iconfont icon-new-window-s"})]}),_:2},ce,ne)):ae("<!---->"),ae(`<div class="links" data-v-d2d145c0${ne}>`),le.collection.discord_url?ae(ssrRenderComponent(O,{class:"item",href:le.collection.discord_url,onClick:ie=>e.handleGTagEvent("asset_collection_discord_url",le.name)},{default:withCtx((ie,ve,Pe,ct)=>{if(ve)ve(`<i class="iconfont icon-discord" data-v-d2d145c0${ct}></i>`);else return[createVNode("i",{class:"iconfont icon-discord"})]}),_:2},ce,ne)):ae("<!---->"),le.collection.telegram_url?ae(ssrRenderComponent(O,{class:"item",href:le.collection.telegram_url,onClick:ie=>e.handleGTagEvent("asset_collection_telegram_url",le.name)},{default:withCtx((ie,ve,Pe,ct)=>{if(ve)ve(`<i class="iconfont icon-telegram" data-v-d2d145c0${ct}></i>`);else return[createVNode("i",{class:"iconfont icon-telegram"})]}),_:2},ce,ne)):ae("<!---->"),ae(`</div></div><div class="content" data-v-d2d145c0${ne}>`),ae(ssrRenderComponent(O,{class:"name",title:le.name,href:le.permalink,onClick:ie=>e.handleGTagEvent("asset_name_link",le.name)},{default:withCtx((ie,ve,Pe,ct)=>{if(ve)ve(`${ssrInterpolate(le.name)}`);else return[createTextVNode(toDisplayString(le.name),1)]}),_:2},ce,ne)),ae(ssrRenderComponent(O,{class:"collection",title:le.collection.name,href:e.getOpenSeaCollectionURL(le.collection.slug),onClick:ie=>e.handleGTagEvent("asset_collection_link",le.name)},{default:withCtx((ie,ve,Pe,ct)=>{if(ve)ve(`${ssrInterpolate(le.collection.name)}`);else return[createTextVNode(toDisplayString(le.collection.name),1)]}),_:2},ce,ne)),ae(`<div class="description"${ssrRenderAttr("title",le.description)} data-v-d2d145c0${ne}>`),ae(ssrRenderComponent(V,{markdown:le.description,sanitize:!0,compact:!0},null,ce,ne)),ae("</div></div></li>")}),ae("<!--]--></ul>");else return[createVNode("ul",{class:"asset-list"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.openseaAssets.assets,(le,de)=>(openBlock(),createBlock("li",{class:"asset",key:de},[createVNode("div",{class:"image",style:{backgroundImage:`url('${e.getTargetProxyURL(le.image_url)}')`}},[createVNode(O,{class:"contract",href:e.getEtherscanURL(le.asset_contract.address),onClick:ie=>e.handleGTagEvent("asset_contract_link",le.name)},{default:withCtx(()=>[createVNode("i",{class:"iconfont icon-coin"}),createVNode("span",{class:"text"},toDisplayString(le.asset_contract.schema_name),1)]),_:2},1032,["href","onClick"]),le.external_link?(openBlock(),createBlock(O,{key:0,class:"external",href:le.external_link,onClick:ie=>e.handleGTagEvent("asset_external_link",le.name)},{default:withCtx(()=>[createVNode("i",{class:"iconfont icon-new-window-s"})]),_:2},1032,["href","onClick"])):createCommentVNode("",!0),createVNode("div",{class:"links"},[le.collection.discord_url?(openBlock(),createBlock(O,{key:0,class:"item",href:le.collection.discord_url,onClick:ie=>e.handleGTagEvent("asset_collection_discord_url",le.name)},{default:withCtx(()=>[createVNode("i",{class:"iconfont icon-discord"})]),_:2},1032,["href","onClick"])):createCommentVNode("",!0),le.collection.telegram_url?(openBlock(),createBlock(O,{key:1,class:"item",href:le.collection.telegram_url,onClick:ie=>e.handleGTagEvent("asset_collection_telegram_url",le.name)},{default:withCtx(()=>[createVNode("i",{class:"iconfont icon-telegram"})]),_:2},1032,["href","onClick"])):createCommentVNode("",!0)])],4),createVNode("div",{class:"content"},[createVNode(O,{class:"name",title:le.name,href:le.permalink,onClick:ie=>e.handleGTagEvent("asset_name_link",le.name)},{default:withCtx(()=>[createTextVNode(toDisplayString(le.name),1)]),_:2},1032,["title","href","onClick"]),createVNode(O,{class:"collection",title:le.collection.name,href:e.getOpenSeaCollectionURL(le.collection.slug),onClick:ie=>e.handleGTagEvent("asset_collection_link",le.name)},{default:withCtx(()=>[createTextVNode(toDisplayString(le.collection.name),1)]),_:2},1032,["title","href","onClick"]),createVNode("div",{class:"description",title:le.description},[createVNode(V,{markdown:le.description,sanitize:!0,compact:!0},null,8,["markdown"])],8,["title"])])]))),128))])]}),_:1},W,Z)),U(`<div class="viewmore" data-v-d2d145c0${Z}>`),U(ssrRenderComponent(O,{class:"link",href:e.VALUABLE_LINKS.OPENSEA},{default:withCtx((re,ae,ce,ne)=>{if(ae)ae(ssrRenderComponent(w,null,{zh:withCtx((le,de,ie,ve)=>{if(de)de(` \u5728 <i class="iconfont icon-opensea" data-v-d2d145c0${ve}></i> OpenSea \u67E5\u770B\u66F4\u591A NFTs `);else return[createTextVNode(" \u5728 "),createVNode("i",{class:"iconfont icon-opensea"}),createTextVNode(" OpenSea \u67E5\u770B\u66F4\u591A NFTs ")]}),en:withCtx((le,de,ie,ve)=>{if(de)de(` View all NFTs on <i class="iconfont icon-opensea" data-v-d2d145c0${ve}></i> OpenSea `);else return[createTextVNode(" View all NFTs on "),createVNode("i",{class:"iconfont icon-opensea"}),createTextVNode(" OpenSea ")]}),_:1},ce,ne));else return[createVNode(w,null,{zh:withCtx(()=>[createTextVNode(" \u5728 "),createVNode("i",{class:"iconfont icon-opensea"}),createTextVNode(" OpenSea \u67E5\u770B\u66F4\u591A NFTs ")]),en:withCtx(()=>[createTextVNode(" View all NFTs on "),createVNode("i",{class:"iconfont icon-opensea"}),createTextVNode(" OpenSea ")]),_:1})]}),_:1},W,Z)),U("</div>");else return[createVNode(N,{data:e.openseaAssets.assets.length,loading:e.openseaAssets.fetching},{placeholder:withCtx(()=>[createVNode(L,{class:"asset-empty",key:"empty"},{default:withCtx(()=>[createTextVNode("NULL")]),_:1})]),loading:withCtx(()=>[createVNode("ul",{class:"asset-skeleton",key:"skeleton"},[(openBlock(),createBlock(Fragment,null,renderList(8,re=>createVNode("li",{key:re,class:"item"},[createVNode(S,{class:"image"}),createVNode(P,{class:"paragraph",lines:4,align:!0,"line-height":"1em"})])),64))])]),default:withCtx(()=>[createVNode("ul",{class:"asset-list"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.openseaAssets.assets,(re,ae)=>(openBlock(),createBlock("li",{class:"asset",key:ae},[createVNode("div",{class:"image",style:{backgroundImage:`url('${e.getTargetProxyURL(re.image_url)}')`}},[createVNode(O,{class:"contract",href:e.getEtherscanURL(re.asset_contract.address),onClick:ce=>e.handleGTagEvent("asset_contract_link",re.name)},{default:withCtx(()=>[createVNode("i",{class:"iconfont icon-coin"}),createVNode("span",{class:"text"},toDisplayString(re.asset_contract.schema_name),1)]),_:2},1032,["href","onClick"]),re.external_link?(openBlock(),createBlock(O,{key:0,class:"external",href:re.external_link,onClick:ce=>e.handleGTagEvent("asset_external_link",re.name)},{default:withCtx(()=>[createVNode("i",{class:"iconfont icon-new-window-s"})]),_:2},1032,["href","onClick"])):createCommentVNode("",!0),createVNode("div",{class:"links"},[re.collection.discord_url?(openBlock(),createBlock(O,{key:0,class:"item",href:re.collection.discord_url,onClick:ce=>e.handleGTagEvent("asset_collection_discord_url",re.name)},{default:withCtx(()=>[createVNode("i",{class:"iconfont icon-discord"})]),_:2},1032,["href","onClick"])):createCommentVNode("",!0),re.collection.telegram_url?(openBlock(),createBlock(O,{key:1,class:"item",href:re.collection.telegram_url,onClick:ce=>e.handleGTagEvent("asset_collection_telegram_url",re.name)},{default:withCtx(()=>[createVNode("i",{class:"iconfont icon-telegram"})]),_:2},1032,["href","onClick"])):createCommentVNode("",!0)])],4),createVNode("div",{class:"content"},[createVNode(O,{class:"name",title:re.name,href:re.permalink,onClick:ce=>e.handleGTagEvent("asset_name_link",re.name)},{default:withCtx(()=>[createTextVNode(toDisplayString(re.name),1)]),_:2},1032,["title","href","onClick"]),createVNode(O,{class:"collection",title:re.collection.name,href:e.getOpenSeaCollectionURL(re.collection.slug),onClick:ce=>e.handleGTagEvent("asset_collection_link",re.name)},{default:withCtx(()=>[createTextVNode(toDisplayString(re.collection.name),1)]),_:2},1032,["title","href","onClick"]),createVNode("div",{class:"description",title:re.description},[createVNode(V,{markdown:re.description,sanitize:!0,compact:!0},null,8,["markdown"])],8,["title"])])]))),128))])]),_:1},8,["data","loading"]),createVNode("div",{class:"viewmore"},[createVNode(O,{class:"link",href:e.VALUABLE_LINKS.OPENSEA},{default:withCtx(()=>[createVNode(w,null,{zh:withCtx(()=>[createTextVNode(" \u5728 "),createVNode("i",{class:"iconfont icon-opensea"}),createTextVNode(" OpenSea \u67E5\u770B\u66F4\u591A NFTs ")]),en:withCtx(()=>[createTextVNode(" View all NFTs on "),createVNode("i",{class:"iconfont icon-opensea"}),createTextVNode(" OpenSea ")]),_:1})]),_:1},8,["href"])])]}),_:1},n)),t("</div>")}const _sfc_setup$C=_sfc_main$C.setup;_sfc_main$C.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/pages/nft.vue"),_sfc_setup$C?_sfc_setup$C(e,t):void 0};const NftPage=_export_sfc(_sfc_main$C,[["ssrRender",_sfc_ssrRender$C],["__scopeId","data-v-d2d145c0"]]);var CategorySlug=(e=>(e.Code="code",e.Insight="insight",e))(CategorySlug||{}),RouteName=(e=>(e.Home="home",e.Article="article-detail",e.CategoryFlow="category-flow",e.TagFlow="tag-flow",e.DateFlow="date-flow",e.SearchFlow="search-flow",e.Archive="archive",e.Guestbook="guestbook",e.About="about",e.Lens="lens",e.App="app",e.Nft="nft",e.Sponsor="sponsor",e.Error="error",e))(RouteName||{});const routes=[{path:"/",name:"home",components:{default:IndexFlowPage,mobile:MobileFlow},meta:{responsive:!0,ssrCacheAge:60*2}},{path:"/article/:article_id",name:"article-detail",components:{default:ArticleDetailPage,mobile:ArticleDetailPage},props:{default:e=>({articleId:Number(e.params.article_id)}),mobile:e=>({isMobile:!0,articleId:Number(e.params.article_id)})},meta:{responsive:!0,ssrCacheAge:30,async validate({route:e,i18n:t}){if(!Number.isInteger(Number(e.params.article_id)))return Promise.reject({code:BAD_REQUEST,message:t.t(LanguageKey.QUERY_PARAMS_ERROR)+"Article ID \u2192 <number>"})}}},{path:"/category/:category_slug",name:"category-flow",components:{default:CategoryFlowPage,mobile:MobileFlow},props:{default:e=>({categorySlug:e.params.category_slug}),mobile:e=>({categorySlug:e.params.category_slug})},meta:{responsive:!0,ssrCacheAge:60*2,async validate({route:e,i18n:t}){const{category_slug:n}=e.params;if(!n)return Promise.reject({code:BAD_REQUEST,message:t.t(LanguageKey.QUERY_PARAMS_ERROR)+"Category slug \u2192 <string>"})}}},{path:"/tag/:tag_slug",name:"tag-flow",components:{default:TagFlowPage,mobile:MobileFlow},props:{default:e=>({tagSlug:e.params.tag_slug}),mobile:e=>({tagSlug:e.params.tag_slug})},meta:{responsive:!0,ssrCacheAge:60*2,async validate({route:e,i18n:t}){const{tag_slug:n}=e.params;if(!n)return Promise.reject({code:BAD_REQUEST,message:t.t(LanguageKey.QUERY_PARAMS_ERROR)+"Tag slug \u2192 <string>"})}}},{path:"/date/:date",name:"date-flow",components:{default:DateFlowPage,mobile:MobileFlow},props:{default:e=>({date:e.params.date}),mobile:e=>({date:e.params.date})},meta:{responsive:!0,ssrCacheAge:60*60*24,async validate({route:e,i18n:t}){const{date:n}=e.params;if(!n||!isValidDateParam(n))return Promise.reject({code:BAD_REQUEST,message:t.t(LanguageKey.QUERY_PARAMS_ERROR)+`Invalid date ${n||""}`})}}},{path:"/search/:keyword",name:"search-flow",components:{default:SearchFlowPage,mobile:MobileFlow},props:{default:e=>({keyword:e.params.keyword}),mobile:e=>({searchKeyword:e.params.keyword})},meta:{responsive:!0,ssrCacheAge:!1,async validate({route:e,i18n:t}){if(!e.params.keyword)return Promise.reject({code:BAD_REQUEST,message:t.t(LanguageKey.QUERY_PARAMS_ERROR)+"Keywords ?"})}}},{path:"/archive",name:"archive",components:{default:DesktopArchivePage,mobile:MobileArchivePage},meta:{responsive:!0,layout:LayoutColumn.Full,ssrCacheAge:60*60}},{path:"/about",name:"about",components:{default:DesktopAboutPage,mobile:MobileAboutPage},meta:{responsive:!0,layout:LayoutColumn.Full,ssrCacheAge:60*60*4}},{path:"/guestbook",name:"guestbook",components:{default:GuestbookPage,mobile:GuestbookPage},props:{mobile:{isMobile:!0}},meta:{responsive:!0,ssrCacheAge:60*1}},{path:"/app",name:"app",components:{default:AppPage,mobile:AppPage},props:{mobile:{isMobile:!0}},meta:{responsive:!0,layout:LayoutColumn.Full,ssrCacheAge:1/0}},{path:"/lens",name:"lens",component:LensPage,meta:{responsive:!1,layout:LayoutColumn.Full,ssrCacheAge:60*60*1}},{path:"/nft",name:"nft",component:NftPage,meta:{responsive:!1,layout:LayoutColumn.Full,ssrCacheAge:60*60*.5}},{path:"/sponsor",name:"sponsor",component:SponsorPage,meta:{responsive:!1,layout:LayoutColumn.Full,ssrCacheAge:1/0}},{name:"error",path:"/:error(.*)",component:{},meta:{ssrCacheAge:!1,async validate({i18n:e}){return Promise.reject({code:NOT_FOUND,message:e.t(LanguageKey.NOT_FOUND)})}}}],createUniversalRouter=e=>{const t=createRouter({routes,strict:!0,history:e.history,linkActiveClass:"link-active",scrollBehavior:()=>scrollToPageTop()});return e.beforeMiddleware&&(Array.isArray(e.beforeMiddleware)?e.beforeMiddleware.forEach(t.beforeResolve):t.beforeResolve(e.beforeMiddleware)),e.afterMiddleware&&(Array.isArray(e.afterMiddleware)?e.afterMiddleware.forEach(t.afterEach):t.afterEach(e.afterMiddleware)),t},getTagFlowRoute=e=>`/tag/${e}`,getCategoryFlowRoute=e=>`/category/${e}`,getDateFlowRoute=e=>`/date/${e}`,getArticleDetailRoute=e=>`/article/${e}`,getPageRoute=e=>`/${e}`,isArticleDetail=e=>e===RouteName.Article,isSearchFlow=e=>e===RouteName.SearchFlow,relink=(text,tagMap)=>{const tagNames=Object.keys(tagMap).sort((e,t)=>t.length-e.length),tagRegexp=eval(`/${tagNames.join("|")}/ig`);try{return new URL(text),text}catch(e){return text.replace(tagRegexp,t=>{const n=tagMap.get(t);if(!n||text[0]==="#")return t;const o=n.slug,c=getTagFlowRoute(o),d=`window.$app.config.globalProperties.$router.push({ path: '${c}' });return false`;return`<a href="${c}" title="${n.description}" onclick="${d}">${t}</a>`})}},trimHTML=e=>e.replace(/\s+/g," ").replace(/\n/g," "),sanitizeHTML=e=>e,getRenderer=e=>{const t=new Renderer;return t.text=n=>e!=null&&e.text?e.text(n):n,t.html=n=>{const o=n.trim(),c=CUSTOM_ELEMENT_LIST.reduce((d,g)=>g.transform(d),o);return e!=null&&e.sanitize?sanitizeHTML(escape$3(c)):c},t.heading=(n,o,c)=>{const d=e!=null&&e.headingID?`id="${e.headingID(n,o,c)}"`:"",g=escape$3(c);return`<h${o} ${d} alt="${g}" title="${g}">${n}</h${o}>`},t.paragraph=n=>{const o=n.trim();return["p","div","figure"].some(d=>o.startsWith(`<${d}`)&&o.endsWith(`</${d}>`))?n:`<p>${n}</p>`},t.checkbox=n=>n?'<i class="checkbox checked iconfont icon-checkbox-selected"></i>':'<i class="checkbox iconfont icon-checkbox-unselected"></i>',t.link=(n,o,c)=>{const d=n==null?void 0:n.startsWith(META.url),g=c.includes("<img"),r=e!=null&&e.sanitize?escape$3(c):c,v=e!=null&&e.sanitize?sanitizeUrl_1(n):n,E=e!=null&&e.sanitize?escape$3(o):o;return sanitizeHTML(trimHTML(`
        <a
          href="${v}"
          target="_blank"
          class="${g?"image-link":"link"}"
          title="${E||(g?v:r)}"
          ${d?"":'rel="external nofollow noopener"'}
        >${r}</a>
      `))},t.image=(n,o,c)=>{var v;const d=(v=sanitizeUrl_1(n))==null?void 0:v.replace(/^http:\/\//gi,`${API_CONFIG.PROXY}/`),g=sanitizeHTML(escape$3(o||c)),r=sanitizeHTML(escape$3(c));return trimHTML(`
      <div class="figure-wrapper">
        <figure class="image ${r?"caption":""}" data-status="loading">
          <div class="placeholder error">
            <i class="iconfont icon-image-error"></i>
          </div>
          <div class="placeholder loading">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
          <img
            class="${LOZAD_CLASS_NAME}"
            data-src="${d}"
            ${r?`alt="${r}"`:""}
            ${g?`title="${g}"`:""}
            onload="this.parentElement.dataset.status = 'loaded'"
            onerror="this.parentElement.dataset.status = 'error'"
            onclick="window.$popup.vImage(this.src)"
          />
          ${r?`<figcaption>${r}</figcaption>`:""}
        </figure>
      </div>
    `)},t.code=function(n,o,c){if(t.options.highlight){const r=t.options.highlight(n,o||"");r!=null&&r!==n&&(c=!0,n=r)}const d=n.split(`
`).map((r,v)=>`<li class="code-line-number">${v+1}</li>`.replace(/\s+/g," ")).join(""),g=`
      contenteditable="true"
      oncut="return false"
      onpaste="return false"
      onkeydown="if(event.metaKey) return true; return false;"
    `;return o?`
        <pre data-lang="${o}">
          <ul class="code-lines">${d}</ul>
          <code
            ${g}
            class="${t.options.langPrefix}${encodeURI(o)}"
          >${c?n:encodeURI(n)}
</code>
        </pre>

      `:`
        <pre>
          <ul class="code-lines">${d}</ul>
          <code ${g}>${c?n:encodeURI(n)}
</code>
        </pre>
      `},t};marked.setOptions({gfm:!0,breaks:!1,pedantic:!1,smartLists:!0,smartypants:!1,langPrefix:"hljs language-",highlight(e,t){return HighlightJS.getLanguage(t)?HighlightJS.highlight(e,{language:t}).value:HighlightJS.highlightAuto(e).value}});const markdownToHTML=(e,t)=>{if(!e||typeof e!="string")return"";const n={headingID:t==null?void 0:t.headingIDRenderer};return t!=null&&t.relink&&(n.text=o=>relink(o,t.tagMap)),t!=null&&t.sanitize&&(n.sanitize=!0),marked.parse(e,{renderer:getRenderer(n)})},ARTICLE_API_PATH="/article",useArticleListStore=pinia_prod.defineStore("articleList",{state:()=>({hotList:{fetched:!1,fetching:!1,data:[]},list:{fetching:!1,data:[],pagination:null}}),actions:{fetchList(e={}){const t=!e.page||e.page===1,n=!t&&e.page>1;return t&&(this.list.data=[],this.list.pagination=null),this.list.fetching=!0,nodepress$1.get(ARTICLE_API_PATH,{params:e}).then(d=>{n?(this.list.data.push(...d.result.data),this.list.pagination=d.result.pagination):(this.list.data=d.result.data,this.list.pagination=d.result.pagination)}).finally(()=>{this.list.fetching=!1})},fetchHottestList(){return this.hotList.fetched?Promise.resolve():(this.hotList.fetching=!0,nodepress$1.get(`${ARTICLE_API_PATH}/hottest`).then(e=>{this.hotList.data=e.result,this.hotList.fetched=!0}).finally(()=>{this.hotList.fetching=!1}))}}}),renderArticleMarkdown=e=>{const t=[];return{html:markdownToHTML(e,{sanitize:!1,relink:!1,headingIDRenderer:(o,c,d)=>{const g=getArticleContentHeadingElementID(c,d.toLowerCase().replace(/[^a-zA-Z0-9\u4E00-\u9FA5]+/g,"-"));return t.push({level:c,id:g,text:d}),g}}),headings:t}},useArticleDetailStore=pinia_prod.defineStore("articleDetail",{state:()=>({fetching:!1,article:null,prevArticle:null,nextArticle:null,relatedArticles:[],renderedFullContent:!0}),getters:{contentLength(){var e;return((e=this.article)==null?void 0:e.content.length)||0},readMinutes(){const e=Math.round(this.contentLength/400);return e<1?1:e},isLongContent(){return Boolean(this.article&&this.contentLength>=LONG_ARTICLE_THRESHOLD)},splitIndex(){if(!this.article||!this.isLongContent)return null;const e=Math.min(LONG_ARTICLE_THRESHOLD,Math.floor(this.contentLength/2)),t=this.article.content.substring(0,e),n=t.lastIndexOf(`
##### `),o=t.lastIndexOf(`
#### `),c=t.lastIndexOf(`
### `),d=t.lastIndexOf(`


`);return Math.max(n,o,c,d)},defaultContent(){if(!this.article)return null;const e=this.isLongContent?this.article.content.substring(0,this.splitIndex):this.article.content,{html:t,headings:n}=renderArticleMarkdown(e);return{markdown:e,html:t,headings:n}},moreContent(){if(this.article&&this.isLongContent){const e=this.article.content.substring(this.splitIndex),{html:t,headings:n}=renderArticleMarkdown(e);return{markdown:e,html:t,headings:n}}return null}},actions:{renderFullContent(){this.renderedFullContent=!0},fetchArticleDetail(e){return this.article=null,nodepress$1.get(`${ARTICLE_API_PATH}/${e}`).then(o=>{this.article=o.result,this.renderedFullContent=!this.isLongContent})},fetchArticleContext(e){return this.prevArticle=null,this.nextArticle=null,this.relatedArticles=[],nodepress$1.get(`${ARTICLE_API_PATH}/${e}/context`).then(t=>{this.prevArticle=t.result.prev_article,this.nextArticle=t.result.next_article,this.relatedArticles=t.result.related_articles})},fetchCompleteArticle(e){return this.fetching=!0,Promise.all([this.fetchArticleDetail(e.articleID),this.fetchArticleContext(e.articleID)]).finally(()=>{this.fetching=!1})},postArticleLike(e){const t=useIdentityStore();return nodepress$1.post("/vote/post",{post_id:e,vote:1,author:t.author}).then(n=>{this.article&&(this.article.meta.likes=n.result)})}}}),useAnnouncementStore=defineFetchStore({id:"announcement",initData:[],cleanWhenRefetch:!0,async fetcher(e){return(await nodepress$1.get("/announcement",{params:e})).result.data}}),useWallpaperStore=defineFetchStore({id:"wallpaper",initData:null,onlyOnce:!0,fetcher:()=>tunnel$1.dispatch(TunnelModule.BingWallpaper),getters:{papers:e=>t=>{var n;return(n=e.data)==null?void 0:n[t]}}}),useOpenSeaAssetsStore=defineFetchStore({id:"openseaAssets",initData:null,fetcher:()=>tunnel$1.dispatch(TunnelModule.OpenSeaAssets),getters:{assets:e=>{var t,n;return(n=(t=e.data)==null?void 0:t.assets)!=null?n:[]}}}),useOpenSeaCollectionsStore=defineFetchStore({id:"openseaCollections",initData:[],fetcher:()=>tunnel$1.dispatch(TunnelModule.OpenSeaCollections),getters:{assetsCount:e=>e.data.reduce((t,n)=>t+n.stats.count,0),totalVolume:e=>e.data.reduce((t,n)=>t+n.stats.total_volume,0),totalSales:e=>e.data.reduce((t,n)=>t+n.stats.total_sales,0),floorPrice:e=>Math.min(...e.data.map(t=>t.stats.floor_price)),average_price:e=>e.data.reduce((n,o)=>n+o.stats.average_price,0)/e.data.length}}),useArticleCalendarStore=defineFetchStore({id:"articleCalendar",initData:[],onlyOnce:!0,async fetcher(){return(await nodepress$1.get("/article/calendar",{params:{timezone:Intl.DateTimeFormat().resolvedOptions().timeZone}})).result}}),useTwitterCalendarStore=defineFetchStore({id:"twitterCalendar",initData:[],onlyOnce:!0,fetcher:()=>tunnel$1.dispatch(TunnelModule.TwitterCalendar)}),useInstagramCalendarStore=defineFetchStore({id:"instagramCalendar",initData:[],onlyOnce:!0,fetcher:()=>tunnel$1.dispatch(TunnelModule.InstagramCalendar)}),useGitHubCalendarStore=defineFetchStore({id:"githubContributionsCalendar",initData:null,onlyOnce:!0,fetcher:()=>tunnel$1.dispatch(TunnelModule.GitHubContributions),getters:{days(e){return e.data?e.data.weeks.map(t=>t.contributionDays).flat().map(t=>({date:t.date,count:t.contributionCount,color:t.color})):[]}}}),useStores=e=>({announcement:useAnnouncementStore(e),articleList:useArticleListStore(e),articleDetail:useArticleDetailStore(e),category:useCategoryStore(e),tag:useTagStore(e),comment:useCommentStore(e),archive:useArchiveStore(e),identity:useIdentityStore(e),adminInfo:useAdminInfoStore(e),appOption:useAppOptionStore(e),wallpaper:useWallpaperStore(e),nodepressStatistic:useNodepressStatisticStore(e),githubStatistic:useGitHubStatisticStore(e),npmStatistic:useNPMStatisticStore(e),articleCalendar:useArticleCalendarStore(e),twitterCalendar:useTwitterCalendarStore(e),instagramCalendar:useInstagramCalendarStore(e),githubCalendar:useGitHubCalendarStore(e),doubanMovies:useDoubanMoviesStore(e),instagramMedias:useInstagramMediasStore(e),youtubePlayList:useYouTubePlayListStore(e),twitterUserinfo:useTwitterUserinfoStore(e),twitterTweets:useTwitterTweetsStore(e),openseaAssets:useOpenSeaAssetsStore(e),openseaCollections:useOpenSeaCollectionsStore(e)}),createUniversalStore=e=>{const t=pinia_prod.createPinia(),n=()=>{const o=useStores(t),c=[o.category.fetch(),o.tag.fetch(),o.appOption.fetch()];return e.globalState.userAgent.isMobile||c.push(o.articleList.fetchHottestList()),Promise.all(c)};return{get stores(){return useStores(t)},state:t.state,install:t.install,serverPrefetch:n,initOnSSRClient(){const o=getSSRContext("store");o?t.state.value=o:n()},initOnSPAClient(){return useStores(t).identity.initOnClient(),n()}}},_sfc_main$B=defineComponent({name:"Webfont",props:{bolder:{type:Boolean,default:!1},boldZh:{type:Boolean,default:!1},boldEn:{type:Boolean,default:!0},uppercase:{type:Boolean,default:!1}},setup(){const{isZhLang:e}=useEnhancer();return{isZhLang:e}}}),webfont_vue_vue_type_style_index_0_scoped_90d3669c_lang="";function _sfc_ssrRender$B(e,t,n,o,c,d,g,r){t(`<span${ssrRenderAttrs(mergeProps({class:["webfont",[e.bolder?"bolder":"medium",e.isZhLang?"zh":"en",{boldZh:e.boldZh},{boldEn:e.boldEn},{uppercase:e.uppercase}]]},o))} data-v-90d3669c>`),ssrRenderSlot(e.$slots,"default",{},null,t,n),t("</span>")}const _sfc_setup$B=_sfc_main$B.setup;_sfc_main$B.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/common/webfont.vue"),_sfc_setup$B?_sfc_setup$B(e,t):void 0};const Webfont=_export_sfc(_sfc_main$B,[["ssrRender",_sfc_ssrRender$B],["__scopeId","data-v-90d3669c"]]),_sfc_main$A=defineComponent({name:"Spin",props:{loading:{type:Boolean,default:!0},color:{type:String,default:"rgba(197, 197, 197, 0.4)"},height:{type:String,default:"15px"},width:{type:String,default:"15px"},margin:{type:String,default:"5px"}},data(){return{spinnerStyle:{backgroundColor:this.color,height:this.height,width:this.width,margin:this.margin}}}}),spin_vue_vue_type_style_index_0_scoped_4ef1f0df_lang="";function _sfc_ssrRender$A(e,t,n,o,c,d,g,r){t(`<div${ssrRenderAttrs(mergeProps({style:e.loading?null:{display:"none"},class:"spinner-box"},o))} data-v-4ef1f0df><div class="spinner-inner" data-v-4ef1f0df><div class="la-ball-beat" data-v-4ef1f0df><div style="${ssrRenderStyle(e.spinnerStyle)}" data-v-4ef1f0df></div><div style="${ssrRenderStyle(e.spinnerStyle)}" data-v-4ef1f0df></div><div style="${ssrRenderStyle(e.spinnerStyle)}" data-v-4ef1f0df></div></div></div></div>`)}const _sfc_setup$A=_sfc_main$A.setup;_sfc_main$A.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/common/spin.vue"),_sfc_setup$A?_sfc_setup$A(e,t):void 0};const Spin=_export_sfc(_sfc_main$A,[["ssrRender",_sfc_ssrRender$A],["__scopeId","data-v-4ef1f0df"]]),_sfc_main$z=defineComponent({name:"Empty",props:{placeholder:String,i18nKey:String},setup(){return{LanguageKey}}}),empty_vue_vue_type_style_index_0_scoped_1a452937_lang="";function _sfc_ssrRender$z(e,t,n,o,c,d,g,r){const v=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:"empty"},o))} data-v-1a452937>`),ssrRenderSlot(e.$slots,"default",{},()=>{e.placeholder?t(`<!--[-->${ssrInterpolate(e.placeholder)}<!--]-->`):t(ssrRenderComponent(v,{k:e.i18nKey||e.LanguageKey.EMPTY_PLACEHOLDER},null,n))},t,n),t("</div>")}const _sfc_setup$z=_sfc_main$z.setup;_sfc_main$z.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/common/empty.vue"),_sfc_setup$z?_sfc_setup$z(e,t):void 0};const Empty=_export_sfc(_sfc_main$z,[["ssrRender",_sfc_ssrRender$z],["__scopeId","data-v-1a452937"]]),_sfc_main$y=defineComponent({name:"Divider",props:{type:{type:String,default:"horizontal"},dashed:{type:Boolean,default:!1},size:{type:String,default:"default"}}}),divider_vue_vue_type_style_index_0_scoped_baa38ba2_lang="";function _sfc_ssrRender$y(e,t,n,o,c,d,g,r){t(`<div${ssrRenderAttrs(mergeProps({role:"separator",class:["divider",[e.type,e.size,{dashed:e.dashed},{slot:e.$slots.default}]]},o))} data-v-baa38ba2>`),ssrRenderSlot(e.$slots,"default",{},null,t,n),t("</div>")}const _sfc_setup$y=_sfc_main$y.setup;_sfc_main$y.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/common/divider.vue"),_sfc_setup$y?_sfc_setup$y(e,t):void 0};const Divider=_export_sfc(_sfc_main$y,[["ssrRender",_sfc_ssrRender$y],["__scopeId","data-v-baa38ba2"]]),Udate=defineComponent({name:"Udate",props:{to:{type:String,required:!0},date:{type:[String,Number,Date],required:!0},separator:{type:String,default:"-"}},setup(e){const{i18n:t}=useEnhancer();return()=>{const n=e.date instanceof Date?e.date:new Date(e.date);if(e.to==="YMD")return dateToYMD(n,e.separator);if(e.to==="YMDm"){const o=dateToYMD(n,e.separator),c=n.getHours()>11?t.t(LanguageKey.MOMENT_PM):t.t(LanguageKey.MOMENT_AM);return`${o} ${c}`}if(e.to==="ago"){const o=(w,T)=>{const S=`${w} ${T}`;return t.t(LanguageKey.MOMENT_AGO,null,{date:S})},c=Date.now()/1e3-Number(n)/1e3,d=3600,g=d*24,r=g*7,v=g*30,E=v*12;return c<d?~~(c/60)===0?t.t(LanguageKey.MOMENT_JUST_NOW):o(~~(c/60),t.t(LanguageKey.MOMENT_MINUTES)):c<g?o(~~(c/d),t.t(LanguageKey.MOMENT_HOURS)):c<r?o(~~(c/g),t.t(LanguageKey.MOMENT_DAYS)):c<v?o(~~(c/r),t.t(LanguageKey.MOMENT_WEEKS)):c<E?o(~~(c/v),t.t(LanguageKey.MOMENT_MONTHS)):o(~~(c/E),t.t(LanguageKey.MOMENT_YEAR))}return null}}}),Ulink=defineComponent({name:"Ulink",props:{...RouterLink.props,to:String,href:String,external:{type:Boolean,default:!0},blank:{type:Boolean,default:!0}},setup(e,t){return()=>{var v,E;const{to:n,href:o,external:c,blank:d,...g}=e,r={...t.attrs};if(n&&!n.startsWith("http")){const w={to:n,...g};return h(RouterLink,w,t.slots.default)}return c&&(r.rel="external nofollow noopener"),d&&(r.target="_blank"),h("a",{...r,href:o||n},(E=(v=t.slots).default)==null?void 0:E.call(v))}}}),Uimage=defineComponent({name:"Uimage",props:{src:{type:String,required:!0},cdn:{type:Boolean,default:!1},proxy:{type:[Boolean,String],default:!1},defer:{type:Boolean,default:!1}},setup(e){useEnhancer();const t=ref(!1);return e.defer,()=>{const{src:n,cdn:o,proxy:c,defer:d,...g}=e;let r=n;return o&&(r=getTargetCDNURL(n)),c&&(r=getTargetProxyURL(n,c===!0?ProxyModule.Default:c)),d&&!t.value?null:h("img",{draggable:!1,...g,src:r})}}}),Placeholder=defineComponent({name:"Placeholder",props:{data:{type:[Array,Object,Boolean,Number],default:void 0},transition:{type:Boolean,default:!0},transitionName:{type:String,default:"module"},placeholder:String,i18nKey:String,loading:Boolean},emits:["after-enter"],setup(e,t){return()=>{const{data:n,placeholder:o,i18nKey:c,loading:d,transition:g,transitionName:r}=e,v=n!==void 0&&(Array.isArray(n)&&!n.length||!n),E=()=>{var N,L;return o||c?h(Empty,{placeholder:o,i18nKey:c}):(L=(N=t.slots).placeholder)==null?void 0:L.call(N)},w=()=>{var N,L;return v?E():(L=(N=t.slots).default)==null?void 0:L.call(N)},T=()=>{var N,L;return((L=(N=t.slots).loading)==null?void 0:L.call(N))||h(Spin,{loading:!0})},S=()=>d?T():w();return g?h(Transition,{name:r,mode:"out-in",onAfterEnter(...N){t.emit("after-enter",...N)}},()=>S()):S()}}}),ClientOnly=defineComponent({name:"ClientOnly",props:{placeholder:String,placeholderTag:{type:String,default:"div"},transition:{type:Boolean,default:!1},delay:{type:Number,default:0}},setup(e,t){const{globalState:n}=useEnhancer(),o=ref(!!n.isHydrated.value);onMounted(()=>{if(!n.isHydrated.value){const d=()=>{o.value=!0};e.delay?setTimeout(d,e.delay):d()}});const c=(d,g)=>{if(!e.transition||Array.isArray(d)&&d.length>1)return d;const r=Array.isArray(d)?d[0]:d;return h(Transition,{name:"client-only",mode:"out-in"},()=>r?cloneVNode(r,{key:g}):h("div",{key:"empty",class:"client-only-empty"}))};return()=>{var d,g;return o.value?c((g=(d=t.slots).default)==null?void 0:g.call(d),"result"):t.slots.placeholder?c(t.slots.placeholder(),"placeholder-slot"):e.placeholderTag&&e.placeholder?c(h(e.placeholderTag,{class:"client-only-placeholder"},e.placeholder),"placeholder"):c(null)}}}),Container=defineComponent({name:"Container",props:{tag:{type:String,default:"div"}},setup(e,t){return()=>{var n,o;return h(e.tag,[h("div",{class:"container"},[(o=(n=t.slots).default)==null?void 0:o.call(n)])])}}}),Responsive=defineComponent({name:"Responsive",props:{both:Boolean,desktop:Boolean,mobile:Boolean},setup(e,t){const n=useGlobalState();return()=>{var o,c,d,g,r,v,E,w,T,S;return e.both?(c=(o=t.slots).default)==null?void 0:c.call(o):e.desktop&&!n.userAgent.isMobile?(g=(d=t.slots).default)==null?void 0:g.call(d):e.mobile&&n.userAgent.isMobile?(v=(r=t.slots).default)==null?void 0:v.call(r):n.userAgent.isMobile?(w=(E=t.slots).mobile)==null?void 0:w.call(E):(S=(T=t.slots).desktop)==null?void 0:S.call(T)}}}),DesktopOnly=defineComponent({name:"DesktopOnly",setup(e,t){const n=useGlobalState();return()=>{var o,c;return!n.userAgent.isMobile&&((c=(o=t.slots).default)==null?void 0:c.call(o))}}}),_sfc_main$x=defineComponent({name:"SkeletonBase",props:{width:{type:Number},height:{type:Number},circle:{type:Boolean,default:!1},radius:{type:Number,default:2}},setup(e){return{style:computed(()=>({borderRadius:e.circle?"100%":`${e.radius}px`,...e.width&&{width:e.width+"px"},...e.height&&{height:e.height+"px"}}))}}}),base_vue_vue_type_style_index_0_scoped_f14fd56a_lang="";function _sfc_ssrRender$x(e,t,n,o,c,d,g,r){t(`<div${ssrRenderAttrs(mergeProps({class:"skeleton base",style:e.style},o))} data-v-f14fd56a></div>`)}const _sfc_setup$x=_sfc_main$x.setup;_sfc_main$x.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/common/skeleton/base.vue"),_sfc_setup$x?_sfc_setup$x(e,t):void 0};const SkeletonBase=_export_sfc(_sfc_main$x,[["ssrRender",_sfc_ssrRender$x],["__scopeId","data-v-f14fd56a"]]),_sfc_main$w=defineComponent({name:"SkeletonLine",components:{SkeletonBase},props:{width:{type:Number},height:{type:Number}},setup(e){return{style:computed(()=>({...e.width&&{width:e.width+"px"},...e.height&&{height:e.height+"px"}}))}}}),line_vue_vue_type_style_index_0_scoped_54e88d06_lang="";function _sfc_ssrRender$w(e,t,n,o,c,d,g,r){const v=resolveComponent("skeleton-base");t(`<div${ssrRenderAttrs(mergeProps({class:"skeleton line",style:e.style},o))} data-v-54e88d06>`),t(ssrRenderComponent(v,null,null,n)),t("</div>")}const _sfc_setup$w=_sfc_main$w.setup;_sfc_main$w.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/common/skeleton/line.vue"),_sfc_setup$w?_sfc_setup$w(e,t):void 0};const SkeletonLine=_export_sfc(_sfc_main$w,[["ssrRender",_sfc_ssrRender$w],["__scopeId","data-v-54e88d06"]]),_sfc_main$v=defineComponent({name:"SkeletonParagraph",components:{SkeletonLine},props:{lines:{type:Number,default:1},width:{type:Number},height:{type:Number},align:{type:Boolean,default:!1},lineHeight:{type:String,default:"1rem"}},setup(e){return{style:computed(()=>({...e.width&&{width:e.width+"px"},...e.height&&{height:e.height+"px"}})),getLineStyle:o=>{const c={height:e.lineHeight,marginBottom:o===e.lines-1?"0":`calc(${e.lineHeight} * 0.75)`},d=o%3;if(d){const g=15*d;c.width=`${100-g}%`,c.marginLeft=e.align?"0":"6%"}return c}}}});function _sfc_ssrRender$v(e,t,n,o,c,d,g,r){const v=resolveComponent("skeleton-line");t(`<div${ssrRenderAttrs(mergeProps({class:"skeleton paragraph",style:e.style},o))}><!--[-->`),ssrRenderList(e.lines,(E,w)=>{t(ssrRenderComponent(v,{key:w,style:e.getLineStyle(w),class:"paragraph-line"},null,n))}),t("<!--]--></div>")}const _sfc_setup$v=_sfc_main$v.setup;_sfc_main$v.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/common/skeleton/paragraph.vue"),_sfc_setup$v?_sfc_setup$v(e,t):void 0};const SkeletonParagraph=_export_sfc(_sfc_main$v,[["ssrRender",_sfc_ssrRender$v]]);function component(e){e.component(Webfont.name,Webfont),e.component(Spin.name,Spin),e.component(Empty.name,Empty),e.component(Divider.name,Divider),e.component(Udate.name,Udate),e.component(Ulink.name,Ulink),e.component(Uimage.name,Uimage),e.component(Placeholder.name,Placeholder),e.component(ClientOnly.name,ClientOnly),e.component(Responsive.name,Responsive),e.component(DesktopOnly.name,DesktopOnly),e.component(Container.name,Container),e.component(SkeletonBase.name,SkeletonBase),e.component(SkeletonLine.name,SkeletonLine),e.component(SkeletonParagraph.name,SkeletonParagraph)}const _sfc_main$u=defineComponent({name:"EmojiRain",setup(){const e=ref(null),t=reactive({chambering:!1,kichikuing:!1});return onMounted(()=>{window.$luanchEmojiRain=n=>{!t.chambering&&!t.kichikuing&&(t.chambering=!0,nextTick$1(()=>{e.value.width=document.documentElement.clientWidth||document.body.clientWidth,e.value.height=document.documentElement.clientHeight||document.body.clientHeight,new window.$Emoji233333({base:e.value,scale:.7,speed:12,increaseSpeed:.4,density:5,staggered:!0,emoji:getTargetCDNURL("/images/emojis/funny.png"),...n,onStart(){t.kichikuing=!0},onEnded(){t.kichikuing=!1,t.chambering=!1}}).launch()}))}}),{state:t,rainBase:e}}}),emojiRain_vue_vue_type_style_index_0_scoped_5e790b69_lang="";function _sfc_ssrRender$u(e,t,n,o,c,d,g,r){t(`<div${ssrRenderAttrs(mergeProps({id:"emoji-rain",class:{active:e.state.kichikuing}},o))} data-v-5e790b69>`),e.state.chambering?t('<canvas class="rain-base" data-v-5e790b69></canvas>'):t("<!---->"),t("</div>")}const _sfc_setup$u=_sfc_main$u.setup;_sfc_main$u.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/emoji-rain.vue"),_sfc_setup$u?_sfc_setup$u(e,t):void 0};const EmojiRain=_export_sfc(_sfc_main$u,[["ssrRender",_sfc_ssrRender$u],["__scopeId","data-v-5e790b69"]]),getLayoutByRouteMeta=e=>e.layout===LayoutColumn.Wide?LayoutColumn.Wide:e.layout===LayoutColumn.Full?LayoutColumn.Full:LayoutColumn.Normal,_sfc_main$t=defineComponent({name:"Error",props:{error:{type:Object,required:!0}},emits:["resolve"],setup(e,t){const{isDarkTheme:n}=useEnhancer();return{LanguageKey,isDarkTheme:n,handleResolveRoute:()=>{t.emit("resolve")}}}}),error_vue_vue_type_style_index_0_scoped_3386688e_lang="";function _sfc_ssrRender$t(e,t,n,o,c,d,g,r){const v=resolveComponent("i18n"),E=resolveComponent("uimage");t(`<div${ssrRenderAttrs(mergeProps({class:["error",{dark:e.isDarkTheme}]},o))} data-v-3386688e><h1 class="code" data-v-3386688e>${ssrInterpolate(e.error.code)}</h1><h3 class="message" data-v-3386688e>`),e.error.message?t(`<!--[-->${ssrInterpolate(e.error.message)}<!--]-->`):t(ssrRenderComponent(v,{k:e.LanguageKey.NOT_FOUND},null,n)),t('</h3><p class="link" data-v-3386688e>'),ssrRenderSlot(e.$slots,"resolve-text",{},null,t,n),t("</p>"),t(ssrRenderComponent(E,{cdn:"",class:"logo",src:"/images/logo.svg"},null,n)),t("</div>")}const _sfc_setup$t=_sfc_main$t.setup;_sfc_main$t.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/root/error.vue"),_sfc_setup$t?_sfc_setup$t(e,t):void 0};const ErrorComponent=_export_sfc(_sfc_main$t,[["ssrRender",_sfc_ssrRender$t],["__scopeId","data-v-3386688e"]]),_sfc_main$s=defineComponent({name:"Captured",components:{ErrorComponent},setup(){const{router:e,globalState:t}=useEnhancer(),n=()=>{e.push({name:RouteName.Home}).then(()=>{t.setLayoutColumn(getLayoutByRouteMeta(e.currentRoute.value.meta)),t.setRenderError(null)})};return onErrorCaptured(o=>(t.setRenderError(o),!1)),{error:t.renderError,handleResolveRoute:n,LanguageKey}}});function _sfc_ssrRender$s(e,t,n,o,c,d,g,r){const v=resolveComponent("error-component"),E=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:"captured"},o))}>`),e.error?t(ssrRenderComponent(v,{error:e.error,onResolve:e.handleResolveRoute},{"resolve-text":withCtx((w,T,S,N)=>{if(T)T(ssrRenderComponent(E,{k:e.LanguageKey.BACK_TO_HOME_PAGE},null,S,N));else return[createVNode(E,{k:e.LanguageKey.BACK_TO_HOME_PAGE},null,8,["k"])]}),_:1},n)):ssrRenderSlot(e.$slots,"default",{},null,t,n),t("</div>")}const _sfc_setup$s=_sfc_main$s.setup;_sfc_main$s.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/root/captured.vue"),_sfc_setup$s?_sfc_setup$s(e,t):void 0};const Captured=_export_sfc(_sfc_main$s,[["ssrRender",_sfc_ssrRender$s]]),MusicPlayerSymbol=Symbol("music-player"),useMusic=()=>inject(MusicPlayerSymbol),_sfc_main$r=defineComponent({name:"MusicPlayer",setup(){const t=computed(()=>Boolean(void 0)),n=computed(()=>{});return{VALUABLE_LINKS,player:null,muted:t,currentSong:n,handlePlayByIndex:d=>{},get163MusicSongDetailURL,getSecondsView:d=>{const g=String(Math.floor(d/60)).padStart(2,"0"),r=String(Math.floor(d%60)).padStart(2,"0");return`${g}:${r}`}}}}),player_vue_vue_type_style_index_0_scoped_db4ce6a8_lang="";function _sfc_ssrRender$r(e,t,n,o,c,d,g,r){var E,w,T,S,N,L,P,O,V;const v=resolveComponent("ulink");t(`<div${ssrRenderAttrs(mergeProps({class:"music-player"},o))} data-v-db4ce6a8><div class="panel" data-v-db4ce6a8><div class="song" data-v-db4ce6a8><img class="cover"${ssrRenderAttr("src",(E=e.currentSong)==null?void 0:E.cover_art_url)} draggable="false" data-v-db4ce6a8>`),e.currentSong&&e.player?t(`<div class="info" data-v-db4ce6a8><p class="title" data-v-db4ce6a8><span class="name" data-v-db4ce6a8>${ssrInterpolate(e.currentSong.name)}</span><span class="artist" data-v-db4ce6a8>${ssrInterpolate(e.currentSong.artist)}</span></p><p class="duration" data-v-db4ce6a8><span data-v-db4ce6a8>${ssrInterpolate(e.getSecondsView(e.player.state.speeds))}</span><span data-v-db4ce6a8> / </span><span data-v-db4ce6a8>${ssrInterpolate(e.getSecondsView(e.currentSong.duration/1e3))}</span></p></div>`):t("<!---->"),t(`</div><div class="control" data-v-db4ce6a8><button class="cut-song prev"${includeBooleanAttr(!((T=(w=e.player)==null?void 0:w.state)!=null&&T.ready))?" disabled":""} data-v-db4ce6a8><i class="iconfont icon-music-prev" data-v-db4ce6a8></i></button><button class="toggle-play"${includeBooleanAttr(!((S=e.player)!=null&&S.state.ready))?" disabled":""} data-v-db4ce6a8><i class="${ssrRenderClass([(N=e.player)!=null&&N.state.playing?"icon-music-pause":"icon-music-play","iconfont"])}" data-v-db4ce6a8></i></button><button class="cut-song next"${includeBooleanAttr(!((L=e.player)!=null&&L.state.ready))?" disabled":""} data-v-db4ce6a8><i class="iconfont icon-music-next" data-v-db4ce6a8></i></button></div><div class="tools" data-v-db4ce6a8>`),e.player?t(`<span class="indexed" data-v-db4ce6a8>${ssrInterpolate(e.player.state.index+1)} / ${ssrInterpolate((P=e.player)==null?void 0:P.state.count)}</span>`):t("<!---->"),t(ssrRenderComponent(v,{class:"list-link",href:e.VALUABLE_LINKS.MUSIC_163},{default:withCtx((D,U,W,Z)=>{if(U)U(`<i class="iconfont icon-new-window-s" data-v-db4ce6a8${Z}></i>`);else return[createVNode("i",{class:"iconfont icon-new-window-s"})]}),_:1},n)),t(`<button class="toggle-muted"${includeBooleanAttr(!((O=e.player)!=null&&O.state.ready))?" disabled":""} data-v-db4ce6a8><i class="${ssrRenderClass([e.muted?"icon-music-muted":"icon-music-unmuted","iconfont"])}" data-v-db4ce6a8></i></button></div></div><div class="progress" data-v-db4ce6a8>`),e.player?t(`<div class="played" style="${ssrRenderStyle({width:`${e.player.state.progress}%`})}" data-v-db4ce6a8></div>`):t("<!---->"),t('</div><div class="songs" data-v-db4ce6a8><ul class="list" data-v-db4ce6a8><!--[-->'),ssrRenderList((V=e.player)==null?void 0:V.state.songs,(D,U)=>{var W,Z;t(`<li class="${ssrRenderClass([{playing:((W=e.player)==null?void 0:W.state.index)===U},"item"])}" data-v-db4ce6a8><div class="index" data-v-db4ce6a8>${ssrInterpolate(String(U+1).padStart(2,"0"))}</div>`),((Z=e.player)==null?void 0:Z.state.index)===U?t('<span class="play" data-v-db4ce6a8><i class="iconfont icon-music-unmuted" data-v-db4ce6a8></i></span>'):t('<button class="play" data-v-db4ce6a8><i class="iconfont icon-music-play" data-v-db4ce6a8></i></button>'),t(ssrRenderComponent(v,{class:"name",title:D.name,href:e.get163MusicSongDetailURL(D.id)},{default:withCtx((re,ae,ce,ne)=>{if(ae)ae(`<span class="text" data-v-db4ce6a8${ne}>${ssrInterpolate(D.name)}</span><i class="iconfont icon-new-window-s" data-v-db4ce6a8${ne}></i>`);else return[createVNode("span",{class:"text"},toDisplayString(D.name),1),createVNode("i",{class:"iconfont icon-new-window-s"})]}),_:2},n)),t(`<div class="artist"${ssrRenderAttr("title",D.artist)} data-v-db4ce6a8>${ssrInterpolate(D.artist)}</div><div class="duration" data-v-db4ce6a8>${ssrInterpolate(e.getSecondsView(D.duration/1e3))}</div></li>`)}),t("<!--]--></ul></div></div>")}const _sfc_setup$r=_sfc_main$r.setup;_sfc_main$r.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/music-player/player.vue"),_sfc_setup$r?_sfc_setup$r(e,t):void 0};const MusicPlayer=_export_sfc(_sfc_main$r,[["ssrRender",_sfc_ssrRender$r],["__scopeId","data-v-db4ce6a8"]]),_sfc_main$q=defineComponent({name:"MusicPlayerHandle",components:{MusicPlayer},setup(){const{gtag:e}=useEnhancer(),t=null,n=computed(()=>Boolean(t==null?void 0:t.muted.value)),o=computed(()=>t==null?void 0:t.currentSong.value),c=ref(!1);return{LanguageKey,isOnPlayerModel:c,music:t,muted:n,currentSong:o,togglePlayerModel:()=>{c.value=!c.value},handleTouchEvent:r=>{e==null||e.event("music_player_widget",{event_category:GAEventCategories.Widget,event_label:r})}}}}),handle_vue_vue_type_style_index_0_scoped_694321ff_lang="";function _sfc_ssrRender$q(e,t,n,o,c,d,g,r){var S,N;const v=resolveComponent("i18n"),E=resolveComponent("client-only"),w=resolveComponent("popup"),T=resolveComponent("music-player");t("<!--[-->"),(S=e.music)!=null&&S.currentSong.value?(t(`<div id="player" class="${ssrRenderClass({playing:e.music.state.playing})}" data-v-694321ff><div class="panel" data-v-694321ff><div class="control" data-v-694321ff><button class="prev-song button"${includeBooleanAttr(!e.music.state.ready)?" disabled":""} data-v-694321ff><i class="iconfont icon-music-prev" data-v-694321ff></i></button><button class="next-song button"${includeBooleanAttr(!e.music.state.ready)?" disabled":""} data-v-694321ff><i class="iconfont icon-music-next" data-v-694321ff></i></button><button class="muted-toggle button"${includeBooleanAttr(!e.music.state.ready)?" disabled":""} data-v-694321ff><i class="${ssrRenderClass([e.muted?"icon-music-muted":"icon-music-unmuted","iconfont"])}" data-v-694321ff></i></button><button class="player button" data-v-694321ff><i class="iconfont icon-netease-music" data-v-694321ff></i></button></div><button class="song-link" data-v-694321ff>`),e.currentSong?t(`<span data-v-694321ff>${ssrInterpolate(e.currentSong.name)}</span>`):t(ssrRenderComponent(v,{k:e.LanguageKey.MUSIC_PLACEHOLDER},null,n)),t(`</button></div><div class="cd" data-v-694321ff><img class="image"${ssrRenderAttr("src",(N=e.currentSong)==null?void 0:N.cover_art_url)} data-v-694321ff><button class="toggle-button"${includeBooleanAttr(!e.music.state.ready)?" disabled":""} data-v-694321ff><i class="${ssrRenderClass([e.music.state.playing?"icon-music-pause":"icon-music-play","iconfont"])}" data-v-694321ff></i></button></div><div class="trigger" data-v-694321ff><i class="iconfont icon-music" data-v-694321ff></i></div></div>`)):t("<!---->"),t(ssrRenderComponent(E,null,{default:withCtx((L,P,O,V)=>{if(P)P(ssrRenderComponent(w,{visible:e.isOnPlayerModel,"onUpdate:visible":D=>e.isOnPlayerModel=D,"scroll-close":!1},{default:withCtx((D,U,W,Z)=>{if(U)U(ssrRenderComponent(T,{onClose:e.togglePlayerModel},null,W,Z));else return[createVNode(T,{onClose:e.togglePlayerModel},null,8,["onClose"])]}),_:1},O,V));else return[createVNode(w,{visible:e.isOnPlayerModel,"onUpdate:visible":D=>e.isOnPlayerModel=D,"scroll-close":!1},{default:withCtx(()=>[createVNode(T,{onClose:e.togglePlayerModel},null,8,["onClose"])]),_:1},8,["visible","onUpdate:visible"])]}),_:1},n)),t("<!--]-->")}const _sfc_setup$q=_sfc_main$q.setup;_sfc_main$q.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/music-player/handle.vue"),_sfc_setup$q?_sfc_setup$q(e,t):void 0};const MusicPlayerHandle=_export_sfc(_sfc_main$q,[["ssrRender",_sfc_ssrRender$q],["__scopeId","data-v-694321ff"]]),_sfc_main$p=defineComponent({name:"WallFlowerItem",props:{options:{type:Object,required:!0},zIndex:{type:Number,required:!0}},emits:["ended"],setup(e,t){const n=reactive({delay:1,timer:null,playing:!1}),o=computed(()=>({top:e.options.y+"px",left:e.options.x+"px","z-index":99999+e.zIndex})),c=()=>{nextTick$1(()=>{setTimeout(()=>{n.playing=!0}),n.timer=window.setTimeout(()=>{n.playing=!1,nextTick$1(()=>{t.emit("ended",e.options.id)})},n.delay*1e3)})};return c(),onMounted(c),onBeforeUnmount(()=>{n.timer&&(clearTimeout(n.timer),n.timer=null)}),{state:n,styles:o}}}),flower_vue_vue_type_style_index_0_scoped_833e6cc4_lang="";function _sfc_ssrRender$p(e,t,n,o,c,d,g,r){const v=resolveComponent("webfont");t(`<li${ssrRenderAttrs(mergeProps({class:["flower-item",{playing:e.state.playing}],style:e.styles},o))} data-v-833e6cc4>`),t(ssrRenderComponent(v,{bolder:""},{default:withCtx((E,w,T,S)=>{if(w)w(`${ssrInterpolate(e.options.text)}`);else return[createTextVNode(toDisplayString(e.options.text),1)]}),_:1},n)),t("</li>")}const _sfc_setup$p=_sfc_main$p.setup;_sfc_main$p.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/wallflower/flower.vue"),_sfc_setup$p?_sfc_setup$p(e,t):void 0};const Flower=_export_sfc(_sfc_main$p,[["ssrRender",_sfc_ssrRender$p],["__scopeId","data-v-833e6cc4"]]),EN_FLOWERS=["\u{1F499}","\u{1F90D}","\u2764\uFE0F"],ZH_FLOWERS=["\u5BCC\u5F3A","\u6C11\u4E3B","\u6587\u660E","\u548C\u8C10","\u81EA\u7531","\u5E73\u7B49","\u516C\u6B63","\u6CD5\u6CBB","\u7231\u56FD","\u656C\u4E1A","\u8BDA\u4FE1","\u53CB\u5584"],_sfc_main$o=defineComponent({name:"WallFlowerGarden",components:{Flower},setup(){const{isZhLang:e}=useEnhancer(),t=reactive({id:0,flowers:[],contentIndex:-1}),n=c=>{const d=e.value?ZH_FLOWERS:EN_FLOWERS;t.contentIndex++,t.contentIndex>=d.length&&(t.contentIndex=0),t.flowers.push({id:++t.id,x:c.x||c.clientX,y:c.y||c.clientY,text:d[t.contentIndex]})},o=c=>{const d=t.flowers.findIndex(g=>g.id===c);d>-1&&t.flowers.splice(d,1)};return onMounted(()=>window.addEventListener("click",n)),onBeforeUnmount(()=>window.removeEventListener("click",n)),{state:t,handleAnimationEnd:o}}}),garden_vue_vue_type_style_index_0_scoped_19d2393a_lang="";function _sfc_ssrRender$o(e,t,n,o,c,d,g,r){const v=resolveComponent("flower");t(`<div${ssrRenderAttrs(mergeProps({id:"wallflower"},o))} data-v-19d2393a>`),e.state.flowers.length?(t('<ul class="garden-box" data-v-19d2393a><!--[-->'),ssrRenderList(e.state.flowers,(E,w)=>{t(ssrRenderComponent(v,{key:E.id,"z-index":w+1,options:E,onEnded:e.handleAnimationEnd},null,n))}),t("<!--]--></ul>")):t("<!---->"),t("</div>")}const _sfc_setup$o=_sfc_main$o.setup;_sfc_main$o.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/wallflower/garden.vue"),_sfc_setup$o?_sfc_setup$o(e,t):void 0};const Wallflower=_export_sfc(_sfc_main$o,[["ssrRender",_sfc_ssrRender$o],["__scopeId","data-v-19d2393a"]]),_sfc_main$n=defineComponent({name:"WallpaperWall",emits:["close"],setup(e,t){const{i18n:n}=useEnhancer(),o=useWallpaperStore(),c=computed(()=>o.papers(n.language.value)),d=ref(0),g=computed(()=>{var v,E;return((v=c.value)==null?void 0:v.length)&&((E=c.value)==null?void 0:E[d.value])});return{index:d,wallpapers:c,currentWallpaper:g,handleClose:()=>t.emit("close")}}}),wall_vue_vue_type_style_index_0_scoped_d33ed51e_lang="";function _sfc_ssrRender$n(e,t,n,o,c,d,g,r){const v=resolveComponent("ulink");t(`<div${ssrRenderAttrs(mergeProps({class:"wall"},o))} data-v-d33ed51e><div class="picture-box"${ssrRenderAttr("title",e.currentWallpaper.copyright)} style="${ssrRenderStyle({backgroundImage:`url(${e.currentWallpaper.humanizedImageUrl})`})}" data-v-d33ed51e></div><div class="story-box" data-v-d33ed51e>`),e.currentWallpaper.title?t(`<!--[--><h2 class="title" data-v-d33ed51e>${ssrInterpolate(e.currentWallpaper.title)}</h2><p class="sub-title" data-v-d33ed51e>${ssrInterpolate(e.currentWallpaper.copyright)}</p><!--]-->`):t(`<h2 class="title lonely" data-v-d33ed51e>${ssrInterpolate(e.currentWallpaper.copyright)}</h2>`),t(`<p class="desc" data-v-d33ed51e>${ssrInterpolate(e.currentWallpaper.desc)}</p><div class="tools" data-v-d33ed51e>`),t(ssrRenderComponent(v,{class:"button",href:e.currentWallpaper.humanizedCopyrightUrl,title:e.currentWallpaper.bsTitle},{default:withCtx((E,w,T,S)=>{if(w)w(`<i class="iconfont icon-bing" data-v-d33ed51e${S}></i>`);else return[createVNode("i",{class:"iconfont icon-bing"})]}),_:1},n)),t(`<button class="button" title="Prev"${includeBooleanAttr(e.index<=0)?" disabled":""} data-v-d33ed51e><i class="iconfont icon-prev" data-v-d33ed51e></i></button><button class="button" title="Next"${includeBooleanAttr(e.index>=e.wallpapers.length-1)?" disabled":""} data-v-d33ed51e><i class="iconfont icon-next" data-v-d33ed51e></i></button><button class="button" title="Close" data-v-d33ed51e><i class="iconfont icon-cancel" data-v-d33ed51e></i></button></div></div></div>`)}const _sfc_setup$n=_sfc_main$n.setup;_sfc_main$n.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/wallpaper/wall.vue"),_sfc_setup$n?_sfc_setup$n(e,t):void 0};const Wallpapers=_export_sfc(_sfc_main$n,[["ssrRender",_sfc_ssrRender$n],["__scopeId","data-v-d33ed51e"]]),_sfc_main$m=defineComponent({name:"Wallpaper",components:{Wallpapers},setup(){const{i18n:e,gtag:t,isDarkTheme:n}=useEnhancer(),o=useWallpaperStore(),c=computed(()=>o.papers(e.language.value)),d=ref(!1);return{isDarkTheme:n,isOnWallpaper:d,handleOpenWallpaper:()=>{var v;t==null||t.event("wallpaper_modal",{event_category:GAEventCategories.Widget}),(v=c.value)!=null&&v.length?d.value=!0:alert("Something went wrong\uFF01")},handleCloseWallpaper:()=>{d.value=!1}}}}),switcher_vue_vue_type_style_index_0_scoped_c5f131b0_lang="";function _sfc_ssrRender$m(e,t,n,o,c,d,g,r){const v=resolveComponent("client-only"),E=resolveComponent("popup"),w=resolveComponent("wallpapers");t(`<!--[--><div id="wallpaper" data-v-c5f131b0><div class="${ssrRenderClass([{dark:e.isDarkTheme},"switcher"])}" data-v-c5f131b0><div class="title" data-v-c5f131b0><i class="iconfont icon-bing" data-v-c5f131b0></i><span class="text" data-v-c5f131b0>BING</span></div></div></div>`),t(ssrRenderComponent(v,null,{default:withCtx((T,S,N,L)=>{if(S)S(ssrRenderComponent(E,{visible:e.isOnWallpaper,"onUpdate:visible":P=>e.isOnWallpaper=P,"mask-close":!1,"scroll-close":!1},{default:withCtx((P,O,V,D)=>{if(O)O(ssrRenderComponent(w,{onClose:e.handleCloseWallpaper},null,V,D));else return[createVNode(w,{onClose:e.handleCloseWallpaper},null,8,["onClose"])]}),_:1},N,L));else return[createVNode(E,{visible:e.isOnWallpaper,"onUpdate:visible":P=>e.isOnWallpaper=P,"mask-close":!1,"scroll-close":!1},{default:withCtx(()=>[createVNode(w,{onClose:e.handleCloseWallpaper},null,8,["onClose"])]),_:1},8,["visible","onUpdate:visible"])]}),_:1},n)),t("<!--]-->")}const _sfc_setup$m=_sfc_main$m.setup;_sfc_main$m.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/wallpaper/switcher.vue"),_sfc_setup$m?_sfc_setup$m(e,t):void 0};const Wallpaper=_export_sfc(_sfc_main$m,[["ssrRender",_sfc_ssrRender$m],["__scopeId","data-v-c5f131b0"]]),_sfc_main$l=defineComponent({name:"Background",setup(){const{isDarkTheme:e}=useEnhancer();return{isDarkTheme:e}}}),background_vue_vue_type_style_index_0_scoped_c1f03b1d_lang="";function _sfc_ssrRender$l(e,t,n,o,c,d,g,r){t(`<div${ssrRenderAttrs(mergeProps({id:"background"},o))} data-v-c1f03b1d><div class="${ssrRenderClass([{dark:e.isDarkTheme},"image"])}" data-v-c1f03b1d></div></div>`)}const _sfc_setup$l=_sfc_main$l.setup;_sfc_main$l.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/background.vue"),_sfc_setup$l?_sfc_setup$l(e,t):void 0};const Background=_export_sfc(_sfc_main$l,[["ssrRender",_sfc_ssrRender$l],["__scopeId","data-v-c1f03b1d"]]),_sfc_main$k=defineComponent({name:"Toolbox",setup(){const{i18n:e,gtag:t,globalState:n}=useEnhancer(),o=ref(0),c=ref(!1),d=ref(!1),g=()=>{t==null||t.event("rss",{event_category:GAEventCategories.Widget})},r=()=>{t==null||t.event("feedback_modal",{event_category:GAEventCategories.Widget}),n.toggleSwitcher("feedback",!0)},v=()=>{const E=()=>{let w=window.scrollY;const T=document.body.scrollHeight-window.innerHeight;if(d.value&&(w+=1),c.value&&(w-=1),w<0?w=0:w>=T&&(w=T),!(w>0&&w<T))return!1;if(window.scrollTo(0,w),d.value||c.value)o.value=window.requestAnimationFrame(E);else return window.cancelAnimationFrame(o.value),!1};o.value=window.requestAnimationFrame(E)};return{VALUABLE_LINKS,LanguageKey,t:e.translate,scrollToPageTop,scrollToNextScreen,handleFeedback:r,handleRSS:g,setTopButtonState(E,w=!1){c.value=E,window.cancelAnimationFrame(o.value),w&&v()},setBottomButtonState(E,w=!1){d.value=E,window.cancelAnimationFrame(o.value),w&&v()}}}}),toolbox_vue_vue_type_style_index_0_scoped_f61e9e36_lang="";function _sfc_ssrRender$k(e,t,n,o,c,d,g,r){const v=resolveComponent("ulink");t(`<div${ssrRenderAttrs(mergeProps({id:"toolbox"},o))} data-v-f61e9e36><div class="container" data-v-f61e9e36><div class="tools" data-v-f61e9e36>`),t(ssrRenderComponent(v,{class:"rss",href:e.VALUABLE_LINKS.RSS,onMousedown:e.handleRSS},{default:withCtx((E,w,T,S)=>{if(w)w(`<i class="iconfont icon-rss" data-v-f61e9e36${S}></i>`);else return[createVNode("i",{class:"iconfont icon-rss"})]}),_:1},n)),t(`<button class="feedback"${ssrRenderAttr("title",e.t(e.LanguageKey.FEEDBACK))} data-v-f61e9e36><i class="iconfont icon-mail-plane" data-v-f61e9e36></i></button><button class="to-page-top"${ssrRenderAttr("title",e.t(e.LanguageKey.TO_TOP))} data-v-f61e9e36><i class="iconfont icon-totop" data-v-f61e9e36></i></button><button class="to-page-bottom"${ssrRenderAttr("title",e.t(e.LanguageKey.TO_BOTTOM))} data-v-f61e9e36><i class="iconfont icon-tobottom" data-v-f61e9e36></i></button></div></div></div>`)}const _sfc_setup$k=_sfc_main$k.setup;_sfc_main$k.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/toolbox.vue"),_sfc_setup$k?_sfc_setup$k(e,t):void 0};const Toolbox=_export_sfc(_sfc_main$k,[["ssrRender",_sfc_ssrRender$k],["__scopeId","data-v-f61e9e36"]]),_sfc_main$j=defineComponent({name:"Feedback",emits:["close"],setup(e,t){const n=[{emoji:"\u{1F620}",value:1,en:"Terrible",zh:"\u5DEE\u52B2"},{emoji:"\u{1F641}",value:2,en:"Bad",zh:"\u4E0D\u559C\u6B22"},{emoji:"\u{1F610}",value:3,en:"Neutral",zh:"\u65E0\u611F"},{emoji:"\u{1F603}",value:4,en:"Great",zh:"\u559C\u6B22"},{emoji:"\u{1F970}",value:5,en:"Amazing",zh:"\u592A\u68D2\u4E86"}],{appOption:o,identity:c}=useStores(),{gtag:d,isZhLang:g}=useEnhancer(),r=computed(()=>c.feedbacks),v=reactive({emotion:null,content:"",submitting:!1,submitted:!1}),E=computed(()=>Number.isInteger(v.emotion)&&Boolean(v.content));return{LanguageKey,META,isZhLang:g,isSubmitable:E,emotions:n,state:v,historyFeedbacks:r,handleClose:()=>t.emit("close"),handleSubmit:()=>{E.value&&(d==null||d.event("submit_feedback",{event_category:GAEventCategories.Widget}),v.submitting=!0,o.postFeedback(toRaw$1(v)).then(S=>{c.addFeedback(S.result),v.submitted=!0}).catch(S=>{alert(S)}).finally(()=>{v.submitting=!1}))}}}}),feedback_vue_vue_type_style_index_0_scoped_3ccc5195_lang="";function _sfc_ssrRender$j(e,t,n,o,c,d,g,r){const v=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:"feedback"},o))} data-v-3ccc5195>`),e.state.submitted?(t('<div class="submitted" data-v-3ccc5195><div class="icon" data-v-3ccc5195><i class="iconfont icon-success" data-v-3ccc5195></i></div><div class="text" data-v-3ccc5195>'),t(ssrRenderComponent(v,null,{zh:withCtx((E,w,T,S)=>{if(w)w("\u611F\u8C22\u4F60\u7684\u53CD\u9988\u3002");else return[createTextVNode("\u611F\u8C22\u4F60\u7684\u53CD\u9988\u3002")]}),en:withCtx((E,w,T,S)=>{if(w)w("Thank U for your feedback.");else return[createTextVNode("Thank U for your feedback.")]}),_:1},n)),t('</div><button class="close" data-v-3ccc5195>'),t(ssrRenderComponent(v,{zh:"\u5173\u95ED\u7A97\u53E3",en:"Close"},null,n)),t("</button></div>")):(t('<!--[--><div class="title" data-v-3ccc5195>'),t(ssrRenderComponent(v,null,{zh:withCtx((E,w,T,S)=>{if(w)w(`\u4F60\u8BA4\u4E3A ${ssrInterpolate(e.META.title)} \u6574\u4F53\u600E\u4E48\u6837\uFF1F`);else return[createTextVNode("\u4F60\u8BA4\u4E3A "+toDisplayString(e.META.title)+" \u6574\u4F53\u600E\u4E48\u6837\uFF1F",1)]}),en:withCtx((E,w,T,S)=>{if(w)w(`How would you rate ${ssrInterpolate(e.META.title)}?`);else return[createTextVNode("How would you rate "+toDisplayString(e.META.title)+"?",1)]}),_:1},n)),t('</div><div class="emotions" data-v-3ccc5195><!--[-->'),ssrRenderList(e.emotions,E=>{t(`<li class="item" data-v-3ccc5195><label data-v-3ccc5195><input class="radio" type="radio"${ssrRenderAttr("value",E.value)}${includeBooleanAttr(e.state.submitting)?" disabled":""}${includeBooleanAttr(ssrLooseEqual(e.state.emotion,E.value))?" checked":""} data-v-3ccc5195><div class="${ssrRenderClass([{activated:e.state.emotion===E.value},"button"])}" data-v-3ccc5195><span class="emoji" data-v-3ccc5195>${ssrInterpolate(E.emoji)}</span><span class="text" data-v-3ccc5195>`),t(ssrRenderComponent(v,{zh:E.zh,en:E.en},null,n)),t("</span></div></label>"),e.state.emotion===E.value?t('<div class="arrow" data-v-3ccc5195></div>'):t("<!---->"),t("</li>")}),t(`<!--]--></div><div class="input" data-v-3ccc5195><textarea class="textarea" name="feedback" id="feedback" rows="10"${includeBooleanAttr(e.state.submitting)?" disabled":""}${ssrRenderAttr("placeholder",e.isZhLang?"\u4F60\u53EF\u5728\u6B64\u7545\u6240\u6B32\u8A00\uFF0C\u8FD9\u5C06\u4EC5\u5BF9\u535A\u4E3B\u53EF\u89C1":"Tell me about your opinion...")} data-v-3ccc5195>${ssrInterpolate(e.state.content)}</textarea><div class="buttons" data-v-3ccc5195><button class="item cancel"${includeBooleanAttr(e.state.submitting)?" disabled":""} data-v-3ccc5195><span class="text" data-v-3ccc5195>`),t(ssrRenderComponent(v,{zh:"\u53D6\u6D88",en:"Cancel"},null,n)),t(`</span></button><button class="item submit"${includeBooleanAttr(!e.isSubmitable||e.state.submitting)?" disabled":""} data-v-3ccc5195><i class="iconfont icon-mail-plane" data-v-3ccc5195></i><span class="text" data-v-3ccc5195>`),t(ssrRenderComponent(v,{k:e.state.submitting?e.LanguageKey.SUBMITTING:e.LanguageKey.SUBMIT},null,n)),t("</span></button></div></div><!--]-->")),e.historyFeedbacks.length?(t('<div class="history" data-v-3ccc5195>'),t(ssrRenderComponent(v,null,{zh:withCtx((E,w,T,S)=>{if(w)w(`\u4F60\u5DF2\u8FDB\u884C\u8FC7 ${ssrInterpolate(e.historyFeedbacks.length)} \u6B21\u53CD\u9988\u3002`);else return[createTextVNode("\u4F60\u5DF2\u8FDB\u884C\u8FC7 "+toDisplayString(e.historyFeedbacks.length)+" \u6B21\u53CD\u9988\u3002",1)]}),en:withCtx((E,w,T,S)=>{if(w)w(`You have ${ssrInterpolate(e.historyFeedbacks.length)} feedback history.`);else return[createTextVNode("You have "+toDisplayString(e.historyFeedbacks.length)+" feedback history.",1)]}),_:1},n)),t("</div>")):t("<!---->"),t("</div>")}const _sfc_setup$j=_sfc_main$j.setup;_sfc_main$j.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/feedback.vue"),_sfc_setup$j?_sfc_setup$j(e,t):void 0};const Feedback=_export_sfc(_sfc_main$j,[["ssrRender",_sfc_ssrRender$j],["__scopeId","data-v-3ccc5195"]]),emailLink=e=>{if(typeof e=="string")return`mailto:${e}`;const{email:t,...n}=e;return`mailto:${t}?`+lib$1.stringify(n)},_sfc_main$i=defineComponent({name:"Statement",components:{Markdown},setup(){const{appOption:e}=useStores();return{appOption:e,emailLink}}}),statement_vue_vue_type_style_index_0_scoped_ed0272f7_lang="";function _sfc_ssrRender$i(e,t,n,o,c,d,g,r){var E;const v=resolveComponent("markdown");t(`<div${ssrRenderAttrs(mergeProps({class:"statement"},o))} data-v-ed0272f7><div class="content" data-v-ed0272f7>`),t(ssrRenderComponent(v,{markdown:(E=e.appOption.data)==null?void 0:E.statement,compact:!0},null,n)),t("<br data-v-ed0272f7><hr data-v-ed0272f7>"),e.appOption.data?t(`<p class="email" data-v-ed0272f7><a${ssrRenderAttr("href",e.emailLink(e.appOption.data.site_email))} class="link" target="_blank" data-v-ed0272f7><i class="iconfont icon-mail" data-v-ed0272f7></i><span class="text" data-v-ed0272f7>${ssrInterpolate(e.appOption.data.site_email)}</span></a></p>`):t("<!---->"),t("</div></div>")}const _sfc_setup$i=_sfc_main$i.setup;_sfc_main$i.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/statement.vue"),_sfc_setup$i?_sfc_setup$i(e,t):void 0};const Statement=_export_sfc(_sfc_main$i,[["ssrRender",_sfc_ssrRender$i],["__scopeId","data-v-ed0272f7"]]),menus=[{id:RouteName.Home,route:"/",icon:"icon-home",i18nKey:LanguageKey.PAGE_HOME},{id:CategorySlug.Code,route:getCategoryFlowRoute(CategorySlug.Code),icon:"icon-code",i18nKey:LanguageKey.CATEGORY_CODE},{id:CategorySlug.Insight,route:getCategoryFlowRoute(CategorySlug.Insight),icon:"icon-insight",i18nKey:LanguageKey.CATEGORY_INSIGHT},{id:"github",url:VALUABLE_LINKS.GITHUB,icon:"icon-github",i18nKey:LanguageKey.PAGE_GITHUB,newWindow:!0},{id:RouteName.Lens,route:getPageRoute(RouteName.Lens),icon:"icon-lens",i18nKey:LanguageKey.PAGE_LENS},{id:RouteName.About,route:getPageRoute(RouteName.About),icon:"icon-swordsman",i18nKey:LanguageKey.PAGE_ABOUT},{id:RouteName.Guestbook,route:getPageRoute(RouteName.Guestbook),i18nKey:LanguageKey.PAGE_GUESTBOOK,icon:"icon-comment"},{id:RouteName.App,route:getPageRoute(RouteName.App),imageIcon:getTargetCDNURL("/images/page-app/logo.png"),i18nKey:LanguageKey.PAGE_APP,divider:!0},{id:"nft",route:getPageRoute(RouteName.Nft),imageIcon:getTargetCDNURL("/images/third-party/opensea.svg"),i18nKey:LanguageKey.PAGE_NFT,disabledUppercase:!0,hot:!0,divider:!0}],_sfc_main$h=defineComponent({name:"DesktopNav",setup(){const{adConfig:e}=useEnhancer();return{NAV_ELEMENT_ID,menus,adConfig:e}}}),nav_vue_vue_type_style_index_0_scoped_0fcafc3b_lang="";function _sfc_ssrRender$h(e,t,n,o,c,d,g,r){const v=resolveComponent("ulink"),E=resolveComponent("uimage"),w=resolveComponent("webfont"),T=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({id:e.NAV_ELEMENT_ID,class:"desktop-nav"},o))} data-v-0fcafc3b><nav class="nav-list" data-v-0fcafc3b><!--[-->`),ssrRenderList(e.menus,S=>{t("<!--[-->"),S.divider?t('<span class="divider" data-v-0fcafc3b></span>'):t("<!---->"),t(ssrRenderComponent(v,{class:["item",S.id],href:S.url,to:S.route},{default:withCtx((N,L,P,O)=>{if(L)S.imageIcon?L(ssrRenderComponent(E,{class:"image-icon",src:S.imageIcon},null,P,O)):S.icon?L(`<i class="${ssrRenderClass([S.icon,"font-icon iconfont"])}" data-v-0fcafc3b${O}></i>`):L("<!---->"),L(ssrRenderComponent(w,{class:"text",bolder:"",uppercase:!S.disabledUppercase},{default:withCtx((V,D,U,W)=>{if(D)D(ssrRenderComponent(T,{k:S.i18nKey},null,U,W));else return[createVNode(T,{k:S.i18nKey},null,8,["k"])]}),_:2},P,O)),S.newWindow?L(`<span class="superscript new-window" data-v-0fcafc3b${O}><i class="iconfont icon-new-window-s" data-v-0fcafc3b${O}></i></span>`):L("<!---->"),S.hot?L(`<span class="superscript hot" data-v-0fcafc3b${O}><i class="iconfont icon-hot-fill" data-v-0fcafc3b${O}></i></span>`):L("<!---->");else return[S.imageIcon?(openBlock(),createBlock(E,{key:0,class:"image-icon",src:S.imageIcon},null,8,["src"])):S.icon?(openBlock(),createBlock("i",{key:1,class:["font-icon iconfont",S.icon]},null,2)):createCommentVNode("",!0),createVNode(w,{class:"text",bolder:"",uppercase:!S.disabledUppercase},{default:withCtx(()=>[createVNode(T,{k:S.i18nKey},null,8,["k"])]),_:2},1032,["uppercase"]),S.newWindow?(openBlock(),createBlock("span",{key:2,class:"superscript new-window"},[createVNode("i",{class:"iconfont icon-new-window-s"})])):createCommentVNode("",!0),S.hot?(openBlock(),createBlock("span",{key:3,class:"superscript hot"},[createVNode("i",{class:"iconfont icon-hot-fill"})])):createCommentVNode("",!0)]}),_:2},n)),t("<!--]-->")}),t("<!--]--><!--[-->"),ssrRenderList(e.adConfig.PC_NAV,(S,N)=>{t('<!--[--><span class="divider" data-v-0fcafc3b></span>'),t(ssrRenderComponent(v,{class:"item",href:S.url,style:{color:S.color}},{default:withCtx((L,P,O,V)=>{if(P)P(`<i class="${ssrRenderClass([S.icon,"font-icon iconfont"])}" data-v-0fcafc3b${V}></i><span class="ad-text" data-v-0fcafc3b${V}>`),S.i18n?P(ssrRenderComponent(T,{zh:S.i18n.zh,en:S.i18n.en},null,O,V)):P(`<!--[-->${ssrInterpolate(S.text)}<!--]-->`),P(`</span><span class="superscript" data-v-0fcafc3b${V}><i class="iconfont icon-ad" data-v-0fcafc3b${V}></i></span>`);else return[createVNode("i",{class:["font-icon iconfont",S.icon]},null,2),createVNode("span",{class:"ad-text"},[S.i18n?(openBlock(),createBlock(T,{key:0,zh:S.i18n.zh,en:S.i18n.en},null,8,["zh","en"])):(openBlock(),createBlock(Fragment,{key:1},[createTextVNode(toDisplayString(S.text),1)],64))]),createVNode("span",{class:"superscript"},[createVNode("i",{class:"iconfont icon-ad"})])]}),_:2},n)),t("<!--]-->")}),t("<!--]--></nav></div>")}const _sfc_setup$h=_sfc_main$h.setup;_sfc_main$h.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/desktop/nav.vue"),_sfc_setup$h?_sfc_setup$h(e,t):void 0};const NavView=_export_sfc(_sfc_main$h,[["ssrRender",_sfc_ssrRender$h],["__scopeId","data-v-0fcafc3b"]]),_sfc_main$g=defineComponent({name:"DesktopAsideSearch",setup(){const{i18n:e,gtag:t,route:n,router:o}=useEnhancer(),c=ref(),d=ref("");return onMounted(()=>{isSearchFlow(n.name)&&(d.value=n.params.keyword)}),{LanguageKey,RouteName,formElement:c,i18n:e,keyword:d,handleSearch:r=>{var S,N;if(r.preventDefault(),!((S=c.value)==null?void 0:S.checkValidity())){(N=c.value)==null||N.reportValidity();return}const E=d.value,w=n.params.keyword,T=isSearchFlow(n.name);E&&(!T||w!==E)&&(o.push({name:RouteName.SearchFlow,params:{keyword:E}}),t==null||t.event("aside_search",{event_category:GAEventCategories.Universal,event_label:E}))}}}}),search_vue_vue_type_style_index_0_scoped_89d7447e_lang="";function _sfc_ssrRender$g(e,t,n,o,c,d,g,r){const v=resolveComponent("router-link");t(`<div${ssrRenderAttrs(mergeProps({class:"search"},o))} data-v-89d7447e><form class="search-box" data-v-89d7447e><input id="keyword" required type="search" name="search" maxlength="16" autocomplete="off"${ssrRenderAttr("value",e.keyword)} class="${ssrRenderClass([e.i18n.language,"search-input"])}"${ssrRenderAttr("placeholder",e.i18n.t(e.LanguageKey.SEARCH_PLACEHOLDER))} data-v-89d7447e><button type="submit" class="search-btn" data-v-89d7447e><i class="iconfont icon-search" data-v-89d7447e></i></button></form>`),t(ssrRenderComponent(v,{class:"extra-btn",to:{name:e.RouteName.Sponsor}},{default:withCtx((E,w,T,S)=>{if(w)w(`<i class="iconfont icon-peachblossom" data-v-89d7447e${S}></i>`);else return[createVNode("i",{class:"iconfont icon-peachblossom"})]}),_:1},n)),t("</div>")}const _sfc_setup$g=_sfc_main$g.setup;_sfc_main$g.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/desktop/aside/search.vue"),_sfc_setup$g?_sfc_setup$g(e,t):void 0};const AsideSearch=_export_sfc(_sfc_main$g,[["ssrRender",_sfc_ssrRender$g],["__scopeId","data-v-89d7447e"]]),StatisticSkeleton=defineComponent({props:{fetching:Boolean,count:Number},setup(e){return()=>h(Transition,{name:"module",mode:"out-in",duration:280},()=>{var t;return e.fetching?h("p",{class:"skeleton",key:"skeleton"},"\u2022\u2022\u2022"):h("p",{class:"count",key:"count"},(t=e.count)!=null?t:"-")})}}),_sfc_main$f=defineComponent({name:"DesktopAsideStatistic",components:{StatisticSkeleton},setup(){const e=ref(!0),t=useNodepressStatisticStore();return onMounted(()=>{t.fetch().finally(()=>{e.value=!1})}),{LanguageKey,RouteName,fetching:e,store:t}}}),statistic_vue_vue_type_style_index_0_scoped_4a21524b_lang="";function _sfc_ssrRender$f(e,t,n,o,c,d,g,r){const v=resolveComponent("router-link"),E=resolveComponent("statistic-skeleton"),w=resolveComponent("i18n"),T=resolveComponent("divider");t(ssrRenderComponent(v,mergeProps({class:"statistic",to:{name:e.RouteName.Archive}},o),{default:withCtx((S,N,L,P)=>{var O,V,D,U,W,Z;if(N)N(`<div class="item" data-v-4a21524b${P}>`),N(ssrRenderComponent(E,{fetching:e.fetching,count:(O=e.store.data)==null?void 0:O.articles},null,L,P)),N(`<span class="title" data-v-4a21524b${P}>`),N(ssrRenderComponent(w,{k:e.LanguageKey.STATISTIC_ARTICLES},null,L,P)),N("</span></div>"),N(ssrRenderComponent(T,{type:"vertical"},null,L,P)),N(`<div class="item" data-v-4a21524b${P}>`),N(ssrRenderComponent(E,{fetching:e.fetching,count:(V=e.store.data)==null?void 0:V.todayViews},null,L,P)),N(`<span class="title" data-v-4a21524b${P}>`),N(ssrRenderComponent(w,{k:e.LanguageKey.STATISTIC_TODAY_VIEWS},null,L,P)),N("</span></div>"),N(ssrRenderComponent(T,{type:"vertical"},null,L,P)),N(`<div class="item" data-v-4a21524b${P}>`),N(ssrRenderComponent(E,{fetching:e.fetching,count:(D=e.store.data)==null?void 0:D.comments},null,L,P)),N(`<span class="title" data-v-4a21524b${P}>`),N(ssrRenderComponent(w,{k:e.LanguageKey.STATISTIC_COMMENTS},null,L,P)),N("</span></div>");else return[createVNode("div",{class:"item"},[createVNode(E,{fetching:e.fetching,count:(U=e.store.data)==null?void 0:U.articles},null,8,["fetching","count"]),createVNode("span",{class:"title"},[createVNode(w,{k:e.LanguageKey.STATISTIC_ARTICLES},null,8,["k"])])]),createVNode(T,{type:"vertical"}),createVNode("div",{class:"item"},[createVNode(E,{fetching:e.fetching,count:(W=e.store.data)==null?void 0:W.todayViews},null,8,["fetching","count"]),createVNode("span",{class:"title"},[createVNode(w,{k:e.LanguageKey.STATISTIC_TODAY_VIEWS},null,8,["k"])])]),createVNode(T,{type:"vertical"}),createVNode("div",{class:"item"},[createVNode(E,{fetching:e.fetching,count:(Z=e.store.data)==null?void 0:Z.comments},null,8,["fetching","count"]),createVNode("span",{class:"title"},[createVNode(w,{k:e.LanguageKey.STATISTIC_COMMENTS},null,8,["k"])])])]}),_:1},n))}const _sfc_setup$f=_sfc_main$f.setup;_sfc_main$f.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/desktop/aside/statistic.vue"),_sfc_setup$f?_sfc_setup$f(e,t):void 0};const AsideStatistic=_export_sfc(_sfc_main$f,[["ssrRender",_sfc_ssrRender$f],["__scopeId","data-v-4a21524b"]]),PER_PAGE=8,_sfc_main$e=defineComponent({name:"DesktopAsideArticle",setup(){const e=useArticleListStore(),t=computed(()=>e.hotList.fetching),n=computed(()=>e.hotList.data.slice(0,PER_PAGE*2).map((g,r)=>({...g,i:r+1}))),o=ref(0),c=computed(()=>{const g=o.value*PER_PAGE;return n.value.map((r,v)=>({...r,i:v+1})).slice(g,g+PER_PAGE)});return{LanguageKey,isFetching:t,articles:c,switchHotPage:()=>{const g=n.value.length,r=Math.ceil(g/PER_PAGE);o.value<r-1?o.value++:o.value=0},getArticleDetailRoute,numberToKilo,dateToYMD}}}),article_vue_vue_type_style_index_0_scoped_acd8d22e_lang="";function _sfc_ssrRender$e(e,t,n,o,c,d,g,r){const v=resolveComponent("webfont"),E=resolveComponent("i18n"),w=resolveComponent("placeholder"),T=resolveComponent("skeleton-line"),S=resolveComponent("router-link");t(`<div${ssrRenderAttrs(mergeProps({class:"article"},o))} data-v-acd8d22e><div class="header" data-v-acd8d22e><span class="title" data-v-acd8d22e><i class="iconfont icon-hotfill" data-v-acd8d22e></i>`),t(ssrRenderComponent(v,{class:"text"},{default:withCtx((N,L,P,O)=>{if(L)L(ssrRenderComponent(E,{k:e.LanguageKey.HOT_ARTICLE_LIST_TITLE},null,P,O));else return[createVNode(E,{k:e.LanguageKey.HOT_ARTICLE_LIST_TITLE},null,8,["k"])]}),_:1},n)),t('</span><button class="switch" data-v-acd8d22e><i class="iconfont icon-switch" data-v-acd8d22e></i></button></div>'),t(ssrRenderComponent(w,{data:e.articles,loading:e.isFetching,"i18n-key":e.LanguageKey.ARTICLE_PLACEHOLDER},{loading:withCtx((N,L,P,O)=>{if(L)L(`<ul class="article-list-skeleton" data-v-acd8d22e${O}><!--[-->`),ssrRenderList(5,V=>{L(`<li class="item" data-v-acd8d22e${O}>`),L(ssrRenderComponent(T,null,null,P,O)),L("</li>")}),L("<!--]--></ul>");else return[createVNode("ul",{class:"article-list-skeleton",key:"skeleton"},[(openBlock(),createBlock(Fragment,null,renderList(5,V=>createVNode("li",{key:V,class:"item"},[createVNode(T)])),64))])]}),default:withCtx((N,L,P,O)=>{if(L)L(`<ul class="article-list" data-v-acd8d22e${O}><!--[-->`),ssrRenderList(e.articles,V=>{L(`<li class="item" data-v-acd8d22e${O}><span class="${ssrRenderClass([{small:V.i>=10},"index"])}"${ssrRenderAttr("data-index",V.i)} data-v-acd8d22e${O}>${ssrInterpolate(V.i)}</span><div class="content" data-v-acd8d22e${O}>`),L(ssrRenderComponent(S,{class:"title",to:e.getArticleDetailRoute(V.id),title:V.title},{default:withCtx((D,U,W,Z)=>{if(U)U(`${ssrInterpolate(V.title)}`);else return[createTextVNode(toDisplayString(V.title),1)]}),_:2},P,O)),L(`<div class="meta" data-v-acd8d22e${O}><span class="item date" data-v-acd8d22e${O}>${ssrInterpolate(e.dateToYMD(V.create_at))}</span><span class="item views" data-v-acd8d22e${O}><i class="iconfont icon-eye" data-v-acd8d22e${O}></i> ${ssrInterpolate(e.numberToKilo(V.meta.views))}</span><span class="item comments" data-v-acd8d22e${O}><i class="iconfont icon-comment" data-v-acd8d22e${O}></i> ${ssrInterpolate(V.meta.comments)}</span></div></div></li>`)}),L("<!--]--></ul>");else return[createVNode("ul",{class:"article-list",key:"list"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.articles,V=>(openBlock(),createBlock("li",{key:V.id,class:"item"},[createVNode("span",{class:["index",{small:V.i>=10}],"data-index":V.i},toDisplayString(V.i),11,["data-index"]),createVNode("div",{class:"content"},[createVNode(S,{class:"title",to:e.getArticleDetailRoute(V.id),title:V.title},{default:withCtx(()=>[createTextVNode(toDisplayString(V.title),1)]),_:2},1032,["to","title"]),createVNode("div",{class:"meta"},[createVNode("span",{class:"item date"},toDisplayString(e.dateToYMD(V.create_at)),1),createVNode("span",{class:"item views"},[createVNode("i",{class:"iconfont icon-eye"}),createTextVNode(" "+toDisplayString(e.numberToKilo(V.meta.views)),1)]),createVNode("span",{class:"item comments"},[createVNode("i",{class:"iconfont icon-comment"}),createTextVNode(" "+toDisplayString(V.meta.comments),1)])])])]))),128))])]}),_:1},n)),t("</div>")}const _sfc_setup$e=_sfc_main$e.setup;_sfc_main$e.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/desktop/aside/article.vue"),_sfc_setup$e?_sfc_setup$e(e,t):void 0};const AsideArticle=_export_sfc(_sfc_main$e,[["ssrRender",_sfc_ssrRender$e],["__scopeId","data-v-acd8d22e"]]),_sfc_main$d=defineComponent({name:"DesktopAsideMammon",components:{Swiper,SwiperSlide},props:{index:{type:Number,default:0},ready:{type:Object}},emits:["ready","update:index","index-change"],setup(e,t){const{adConfig:n}=useEnhancer(),o=ref();return{adConfig:n,updateSwiper:g=>{o.value=g,t.emit("ready",o.value)},handleSlideChange:()=>{var r;const g=(r=o.value)==null?void 0:r.realIndex;t.emit("update:index",g),t.emit("index-change",g)}}}}),mammon_vue_vue_type_style_index_0_scoped_1b8fd532_lang="";function _sfc_ssrRender$d(e,t,n,o,c,d,g,r){const v=resolveComponent("swiper"),E=resolveComponent("swiper-slide"),w=resolveComponent("ulink"),T=resolveComponent("uimage");t(`<div${ssrRenderAttrs(mergeProps({class:"mammon"},o))} data-v-1b8fd532>`),t(ssrRenderComponent(v,{class:"swiper",direction:"vertical","initial-slide":e.index,loop:!0,"simulate-touch":!1,autoplay:{delay:2800,disableOnInteraction:!1},pagination:{clickable:!0},"set-wrapper-size":!0,"auto-height":!0,mousewheel:!0,"observe-parents":!0,"preload-images":!1,lazy:!0,onSwiper:e.updateSwiper,onSlideChangeTransitionEnd:e.handleSlideChange},{default:withCtx((S,N,L,P)=>{if(N)N("<!--[-->"),ssrRenderList(e.adConfig.PC_ASIDE_SWIPER,(O,V)=>{N(ssrRenderComponent(E,{class:"swiper-slide",key:V},{default:withCtx((D,U,W,Z)=>{if(U)U(ssrRenderComponent(w,{class:"content",href:O.url},{default:withCtx((re,ae,ce,ne)=>{if(ae)ae(ssrRenderComponent(T,{src:O.src,alt:"aside-swiper-ad"},null,ce,ne)),ae(`<i class="iconfont icon-ad" data-v-1b8fd532${ne}></i>`);else return[createVNode(T,{src:O.src,alt:"aside-swiper-ad"},null,8,["src"]),createVNode("i",{class:"iconfont icon-ad"})]}),_:2},W,Z));else return[createVNode(w,{class:"content",href:O.url},{default:withCtx(()=>[createVNode(T,{src:O.src,alt:"aside-swiper-ad"},null,8,["src"]),createVNode("i",{class:"iconfont icon-ad"})]),_:2},1032,["href"])]}),_:2},L,P))}),N("<!--]-->");else return[(openBlock(!0),createBlock(Fragment,null,renderList(e.adConfig.PC_ASIDE_SWIPER,(O,V)=>(openBlock(),createBlock(E,{class:"swiper-slide",key:V},{default:withCtx(()=>[createVNode(w,{class:"content",href:O.url},{default:withCtx(()=>[createVNode(T,{src:O.src,alt:"aside-swiper-ad"},null,8,["src"]),createVNode("i",{class:"iconfont icon-ad"})]),_:2},1032,["href"])]),_:2},1024))),128))]}),_:1},n)),t("</div>")}const _sfc_setup$d=_sfc_main$d.setup;_sfc_main$d.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/desktop/aside/mammon.vue"),_sfc_setup$d?_sfc_setup$d(e,t):void 0};const AsideMammon=_export_sfc(_sfc_main$d,[["ssrRender",_sfc_ssrRender$d],["__scopeId","data-v-1b8fd532"]]),_sfc_main$c=defineComponent({name:"DesktopAsideTag",setup(){const e=useTagStore();return{LanguageKey,tagStore:e,tagEnName,getTagIcon:n=>getExtendValue(n.extends||[],"icon")||"icon-tag",getTagFlowRoute}}}),tag_vue_vue_type_style_index_0_scoped_dfb959e3_lang="";function _sfc_ssrRender$c(e,t,n,o,c,d,g,r){const v=resolveComponent("placeholder"),E=resolveComponent("skeleton-line"),w=resolveComponent("router-link"),T=resolveComponent("i18n");t(`<div${ssrRenderAttrs(mergeProps({class:"tag"},o))} data-v-dfb959e3>`),t(ssrRenderComponent(v,{data:e.tagStore.sorted.length,fetching:e.tagStore.fetching,"i18n-key":e.LanguageKey.TAG_PLACEHOLDER},{loading:withCtx((S,N,L,P)=>{if(N)N(`<ul class="tag-list-skeleton" data-v-dfb959e3${P}><!--[-->`),ssrRenderList(14,O=>{N(`<li class="item" data-v-dfb959e3${P}>`),N(ssrRenderComponent(E,null,null,L,P)),N("</li>")}),N("<!--]--></ul>");else return[createVNode("ul",{class:"tag-list-skeleton",key:"skeleton"},[(openBlock(),createBlock(Fragment,null,renderList(14,O=>createVNode("li",{key:O,class:"item"},[createVNode(E)])),64))])]}),default:withCtx((S,N,L,P)=>{if(N)N(`<div class="tag-list" data-v-dfb959e3${P}><!--[-->`),ssrRenderList(e.tagStore.sorted,(O,V)=>{N(ssrRenderComponent(w,{class:"item",title:`${e.tagEnName(O)} | ${O.description}`,to:e.getTagFlowRoute(O.slug),key:V},{default:withCtx((D,U,W,Z)=>{if(U)U(`<i class="${ssrRenderClass([e.getTagIcon(O),"iconfont"])}" data-v-dfb959e3${Z}></i><span class="name" data-v-dfb959e3${Z}>`),U(ssrRenderComponent(T,{zh:O.name,en:e.tagEnName(O)},null,W,Z)),U(`<span class="count" data-v-dfb959e3${Z}>(${ssrInterpolate(O.articles_count||0)})</span></span>`);else return[createVNode("i",{class:["iconfont",e.getTagIcon(O)]},null,2),createVNode("span",{class:"name"},[createVNode(T,{zh:O.name,en:e.tagEnName(O)},null,8,["zh","en"]),createVNode("span",{class:"count"},"("+toDisplayString(O.articles_count||0)+")",1)])]}),_:2},L,P))}),N("<!--]--></div>");else return[createVNode("div",{class:"tag-list",key:"list"},[(openBlock(!0),createBlock(Fragment,null,renderList(e.tagStore.sorted,(O,V)=>(openBlock(),createBlock(w,{class:"item",title:`${e.tagEnName(O)} | ${O.description}`,to:e.getTagFlowRoute(O.slug),key:V},{default:withCtx(()=>[createVNode("i",{class:["iconfont",e.getTagIcon(O)]},null,2),createVNode("span",{class:"name"},[createVNode(T,{zh:O.name,en:e.tagEnName(O)},null,8,["zh","en"]),createVNode("span",{class:"count"},"("+toDisplayString(O.articles_count||0)+")",1)])]),_:2},1032,["title","to"]))),128))])]}),_:1},n)),t("</div>")}const _sfc_setup$c=_sfc_main$c.setup;_sfc_main$c.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/desktop/aside/tag.vue"),_sfc_setup$c?_sfc_setup$c(e,t):void 0};const AsideTag=_export_sfc(_sfc_main$c,[["ssrRender",_sfc_ssrRender$c],["__scopeId","data-v-dfb959e3"]]),_sfc_main$b=defineComponent({name:"DesktopAsideAnchor",setup(){const e=useArticleDetailStore(),t=computed(()=>e.article),n=computed(()=>{var g,r;const d=[...((g=e.defaultContent)==null?void 0:g.headings)||[]];return e.isLongContent&&e.renderedFullContent&&d.push(...((r=e.moreContent)==null?void 0:r.headings)||[]),d}),o=computed(()=>Math.min(...n.value.map(d=>d.level)));return{ANCHORS,LanguageKey,article:t,store:e,headings:n,minHeadingLevel:o,numberSplit,handleAnchor:d=>{scrollToAnchor(d)}}}}),anchor_vue_vue_type_style_index_0_scoped_45ed501a_lang="";function _sfc_ssrRender$b(e,t,n,o,c,d,g,r){const v=resolveComponent("i18n"),E=resolveComponent("divider");e.article?(t(`<div${ssrRenderAttrs(mergeProps({class:"anchor"},o))} data-v-45ed501a><button class="header"${ssrRenderAttr("title",e.article.title)} data-v-45ed501a><div class="title" data-v-45ed501a>${ssrInterpolate(e.article.title)}</div><div class="read" data-v-45ed501a>`),t(ssrRenderComponent(v,null,{zh:withCtx((w,T,S,N)=>{if(T)T(`\u5171 ${ssrInterpolate(e.numberSplit(e.store.contentLength))} \u5B57\uFF0C\u9700\u9605\u8BFB ${ssrInterpolate(e.store.readMinutes)} \u5206\u949F`);else return[createTextVNode("\u5171 "+toDisplayString(e.numberSplit(e.store.contentLength))+" \u5B57\uFF0C\u9700\u9605\u8BFB "+toDisplayString(e.store.readMinutes)+" \u5206\u949F",1)]}),en:withCtx((w,T,S,N)=>{if(T)T(`${ssrInterpolate(e.numberSplit(e.store.contentLength))} words, ${ssrInterpolate(e.store.readMinutes)} min read`);else return[createTextVNode(toDisplayString(e.numberSplit(e.store.contentLength))+" words, "+toDisplayString(e.store.readMinutes)+" min read",1)]}),_:1},n)),t("</div></button>"),e.headings.length?(t(`<div class="catalogue" data-v-45ed501a><ul class="${ssrRenderClass([`indent-${e.minHeadingLevel}`,"list"])}" data-v-45ed501a><!--[-->`),ssrRenderList(e.headings,(w,T)=>{t(`<li${ssrRenderAttr("title",w.text)} class="${ssrRenderClass([`level-${w.level}`,"item"])}" data-v-45ed501a><i class="${ssrRenderClass([`icon-h-${w.level}`,"level iconfont"])}" data-v-45ed501a></i><span class="text" data-v-45ed501a>${ssrInterpolate(w.text)}</span></li>`)}),t("<!--]-->"),e.store.isLongContent&&!e.store.renderedFullContent?(t(`<li class="${ssrRenderClass([`level-${e.minHeadingLevel}`,"item readmore"])}" data-v-45ed501a><i class="level iconfont icon-loadmore" data-v-45ed501a></i><span class="text" data-v-45ed501a>`),t(ssrRenderComponent(v,{k:e.LanguageKey.ARTICLE_READ_ALL},null,n)),t("</span></li>")):t("<!---->"),t("</ul></div>")):t("<!---->"),t('<button class="link" data-v-45ed501a><i class="iconfont icon-heart" data-v-45ed501a></i>'),t(ssrRenderComponent(v,{zh:"\u6441\u8D5E",en:"Meta"},null,n)),t(ssrRenderComponent(E,{type:"vertical"},null,n)),t(`<span class="meta" data-v-45ed501a><i class="iconfont icon-like" data-v-45ed501a></i><span class="count" data-v-45ed501a>${ssrInterpolate(e.article.meta.likes)}</span></span>`),t(ssrRenderComponent(E,{type:"vertical"},null,n)),t(`<span class="meta" data-v-45ed501a><i class="iconfont icon-eye" data-v-45ed501a></i><span class="count" data-v-45ed501a>${ssrInterpolate(e.numberSplit(e.article.meta.views))}</span></span></button><button class="link" data-v-45ed501a><i class="iconfont icon-category" data-v-45ed501a></i>`),t(ssrRenderComponent(v,{zh:"\u76F8\u5173",en:"Related"},null,n)),t(ssrRenderComponent(E,{type:"vertical"},null,n)),t(`<span class="count" data-v-45ed501a>${ssrInterpolate(e.store.relatedArticles.length)}</span></button><button class="link" data-v-45ed501a><i class="iconfont icon-comment" data-v-45ed501a></i>`),t(ssrRenderComponent(v,{zh:"\u8BC4\u8BBA",en:"Comments"},null,n)),t(ssrRenderComponent(E,{type:"vertical"},null,n)),t(`<span class="count" data-v-45ed501a>${ssrInterpolate(e.article.meta.comments)}</span></button></div>`)):t("<!---->")}const _sfc_setup$b=_sfc_main$b.setup;_sfc_main$b.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/desktop/aside/anchor.vue"),_sfc_setup$b?_sfc_setup$b(e,t):void 0};const AsideAnchor=_export_sfc(_sfc_main$b,[["ssrRender",_sfc_ssrRender$b],["__scopeId","data-v-45ed501a"]]),_sfc_main$a=defineComponent({name:"DesktopAsideCalendar",setup(){const{i18n:e,isZhLang:t}=useEnhancer(),n=dateToHuman(new Date),o=reactive({month:0,year:1970,table:[]}),c={[Language.English]:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],[Language.Chinese]:["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u65E5"]},d=computed(()=>c[e.language.value]),g=computed(()=>{const T=o.year===n.year,S=o.month===n.month,N=T&&S;if(t.value){const L=`${o.year} \u5E74`,P=` ${o.month} \u6708`,O=N?` ${n.day} \u65E5`:"";return L+P+O}return humanDateToYMD(N?n:o," / ")}),r=T=>{const S=[],N=humanToDate({...T,day:1}),L=dateToHuman(N).week;for(let O=L-1;O>=0;O--){const V=cloneDate(N);V.setDate(V.getDate()-O),S.push(dateToHuman(V))}const P=35-S.length;for(let O=1;O<=P;O++){const V=cloneDate(N);V.setDate(V.getDate()+O),S.push(dateToHuman(V))}Object.assign(o,{year:T.year,month:T.month,table:S})},v=()=>{const T=o.month-1<=0;r({year:o.year-(T?1:0),month:T?12:o.month-1})},E=()=>{const T=o.month+1>=13;r({year:o.year+(T?1:0),month:T?1:o.month+1})},w=T=>{T.month<o.month?v():T.month>o.month&&E()};return r({year:n.year,month:n.month}),{tableView:o,headerText:g,weekDayTexts:d,toPrevMonth:v,toNextMonth:E,handleDayClick:w,isToday:T=>isSameHumanDay(T,n)}}}),calendar_vue_vue_type_style_index_0_scoped_48981900_lang="";function _sfc_ssrRender$a(e,t,n,o,c,d,g,r){t(`<div${ssrRenderAttrs(mergeProps({class:"calendar"},o))} data-v-48981900><div class="header" data-v-48981900><button class="item arrow" data-v-48981900><i class="iconfont icon-prev" data-v-48981900></i></button><span class="item year-month" data-v-48981900>${ssrInterpolate(e.headerText)}</span><button class="item arrow" data-v-48981900><i class="iconfont icon-next" data-v-48981900></i></button></div><ul class="weekdays" data-v-48981900><!--[-->`),ssrRenderList(e.weekDayTexts,(v,E)=>{t(`<li data-v-48981900>${ssrInterpolate(v)}</li>`)}),t('<!--]--></ul><ul class="days" data-v-48981900><!--[-->'),ssrRenderList(e.tableView.table,(v,E)=>{t(`<li data-v-48981900><div class="${ssrRenderClass([{today:e.isToday(v),other:v.month!==e.tableView.month},"item"])}" data-v-48981900>`),ssrRenderSlot(e.$slots,"day",v,()=>{t(`${ssrInterpolate(v.day)}`)},t,n),t("</div></li>")}),t("<!--]--></ul></div>")}const _sfc_setup$a=_sfc_main$a.setup;_sfc_main$a.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/widget/calendar.vue"),_sfc_setup$a?_sfc_setup$a(e,t):void 0};const Calendar=_export_sfc(_sfc_main$a,[["ssrRender",_sfc_ssrRender$a],["__scopeId","data-v-48981900"]]),_sfc_main$9=defineComponent({name:"DesktopAsideCalendar",components:{Calendar},setup(){const{articleCalendar:e}=useStores(),t=o=>{var d;const c=humanDateToYMD(o);return((d=e.data.find(g=>g.date===c))==null?void 0:d.count)||0},n=o=>getDateFlowRoute(humanDateToYMD(o));return onMounted(()=>e.fetch()),{articlesIn:t,getDateRoute:n}}}),calendar_vue_vue_type_style_index_0_scoped_6248cde4_lang="";function _sfc_ssrRender$9(e,t,n,o,c,d,g,r){const v=resolveComponent("calendar",!0),E=resolveComponent("router-link");t(ssrRenderComponent(v,mergeProps({class:"calendar"},o),{day:withCtx((w,T,S,N)=>{if(T)e.articlesIn(w)>0?T(ssrRenderComponent(E,{class:"date-link",to:e.getDateRoute(w)},{default:withCtx((L,P,O,V)=>{if(P)P(`${ssrInterpolate(w.day)}`);else return[createTextVNode(toDisplayString(w.day),1)]}),_:2},S,N)):T(`<span class="date-span" data-v-6248cde4${N}>${ssrInterpolate(w.day)}</span>`);else return[e.articlesIn(w)>0?(openBlock(),createBlock(E,{key:0,class:"date-link",to:e.getDateRoute(w)},{default:withCtx(()=>[createTextVNode(toDisplayString(w.day),1)]),_:2},1032,["to"])):(openBlock(),createBlock("span",{key:1,class:"date-span"},toDisplayString(w.day),1))]}),_:1},n))}const _sfc_setup$9=_sfc_main$9.setup;_sfc_main$9.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/desktop/aside/calendar.vue"),_sfc_setup$9?_sfc_setup$9(e,t):void 0};const AsideCalendar=_export_sfc(_sfc_main$9,[["ssrRender",_sfc_ssrRender$9],["__scopeId","data-v-6248cde4"]]),ASIDE_STICKY_ELEMENT_ID="aside-sticky-module",_sfc_main$8=defineComponent({name:"DesktopAside",components:{AsideSearch,AsideStatistic,AsideArticle,AsideMammon,AsideCalendar,AsideTag,AsideAnchor},setup(){const e=useRoute(),t=computed(()=>isArticleDetail(e.name));let n=null;const o=ref(null),c=d=>{var r,v;o.value.clientHeight;const g=(v=(r=document.getElementById(MAIN_CONTENT_ELEMENT_ID))==null?void 0:r.children)==null?void 0:v[0];g&&g.clientHeight};return onMounted(()=>{nextTick$1(()=>{var d,g;n=new window.$StickyEvents({enabled:!0,stickySelector:`#${ASIDE_STICKY_ELEMENT_ID}`}),(g=(d=n.stickyElements)==null?void 0:d[0])==null||g.addEventListener(window.$StickyEvents.CHANGE,c)})}),onBeforeUnmount(()=>{var d,g;(g=(d=n.stickyElements)==null?void 0:d[0])==null||g.removeEventListener(window.$StickyEvents.CHANGE,c),n.disableEvents(!1),n=null}),{isArticlePage:t,ASIDE_ELEMENT_ID,ASIDE_STICKY_ELEMENT_ID,element:o}}}),index_vue_vue_type_style_index_0_scoped_798f01a9_lang="";function _sfc_ssrRender$8(e,t,n,o,c,d,g,r){const v=resolveComponent("aside-search"),E=resolveComponent("aside-statistic"),w=resolveComponent("aside-article"),T=resolveComponent("client-only"),S=resolveComponent("aside-mammon"),N=resolveComponent("aside-calendar"),L=resolveComponent("Adsense"),P=resolveComponent("aside-anchor"),O=resolveComponent("aside-tag");t(`<aside${ssrRenderAttrs(mergeProps({id:e.ASIDE_ELEMENT_ID,class:"desktop-aside",ref:"element"},o))} data-v-798f01a9><div class="module" data-v-798f01a9>`),t(ssrRenderComponent(v,null,null,n)),t('</div><div class="module" data-v-798f01a9>'),t(ssrRenderComponent(E,null,null,n)),t('</div><div class="module" data-v-798f01a9>'),t(ssrRenderComponent(w,null,null,n)),t("</div>"),t(ssrRenderComponent(T,{transition:""},{default:withCtx((V,D,U,W)=>{if(D)D(`<div class="module mammon" data-v-798f01a9${W}>`),D(ssrRenderComponent(S,null,null,U,W)),D("</div>");else return[createVNode("div",{class:"module mammon"},[createVNode(S)])]}),_:1},n)),t('<div class="module" data-v-798f01a9>'),t(ssrRenderComponent(N,null,null,n)),t(`</div><div${ssrRenderAttr("id",e.ASIDE_STICKY_ELEMENT_ID)} class="aside-sticky-box" data-v-798f01a9><div class="module mammon-square" data-v-798f01a9>`),t(ssrRenderComponent(T,null,{default:withCtx((V,D,U,W)=>{if(D)D(ssrRenderComponent(L,{"ins-style":"display:inline-block;width:250px;height:250px","data-ad-slot":"6138120718",class:"content"},null,U,W));else return[createVNode(L,{"ins-style":"display:inline-block;width:250px;height:250px","data-ad-slot":"6138120718",class:"content"})]}),_:1},n)),t('</div><div class="module" data-v-798f01a9>'),e.isArticlePage?t(ssrRenderComponent(T,null,{default:withCtx((V,D,U,W)=>{if(D)D(ssrRenderComponent(P,{class:"sticky-module"},null,U,W));else return[createVNode(P,{class:"sticky-module"})]}),_:1},n)):t(ssrRenderComponent(O,{class:"sticky-module"},null,n)),t("</div></div></aside>")}const _sfc_setup$8=_sfc_main$8.setup;_sfc_main$8.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/desktop/aside/index.vue"),_sfc_setup$8?_sfc_setup$8(e,t):void 0};const AsideView$1=_export_sfc(_sfc_main$8,[["ssrRender",_sfc_ssrRender$8],["__scopeId","data-v-798f01a9"]]),_sfc_main$7=defineComponent({name:"DesktopHeader",setup(){const{i18n:e,gtag:t,theme:n,globalState:o}=useEnhancer(),c=computed(()=>!o.layoutColumn.value.isNormal),d=n.theme,g=computed(()=>({[Theme.Light]:"icon-sun",[Theme.Dark]:"icon-moon"})[d.value]),r=()=>{n.toggle(),t==null||t.event("switch_theme",{event_category:GAEventCategories.Widget,event_label:n.theme.value})},v=()=>{var w;e.toggle(),t==null||t.event("switch_language",{event_category:GAEventCategories.Widget,event_label:(w=e.l.value)==null?void 0:w.name})};return{menus,META,HEADER_ELEMENT_ID,LanguageKey,isEnabledNav:c,handleRootNavEvent:()=>{t==null||t.event("root_header_home_nav",{event_category:GAEventCategories.Universal})},t:e.t,language:e.language,tooggleLanguage:v,theme:d,themeIcon:g,toggleTheme:r}}}),header_vue_vue_type_style_index_0_scoped_f5622f08_lang="";function _sfc_ssrRender$7(e,t,n,o,c,d,g,r){const v=resolveComponent("uimage"),E=resolveComponent("webfont"),w=resolveComponent("i18n"),T=resolveComponent("router-link"),S=resolveComponent("ulink");t(`<header${ssrRenderAttrs(mergeProps({id:e.HEADER_ELEMENT_ID,class:["header",{"enable-nav":e.isEnabledNav}]},o))} data-v-f5622f08><div class="header-container container" data-v-f5622f08><div class="header-header" data-v-f5622f08>`),t(ssrRenderComponent(v,{cdn:"",src:"/images/logo.svg",class:"header-logo",alt:e.META.title},null,n)),t(ssrRenderComponent(E,{class:"header-slogan"},{default:withCtx((N,L,P,O)=>{if(L)L(ssrRenderComponent(w,{k:e.LanguageKey.APP_SLOGAN},null,P,O));else return[createVNode(w,{k:e.LanguageKey.APP_SLOGAN},null,8,["k"])]}),_:1},n)),t(ssrRenderComponent(T,{to:"/",class:"header-link",title:e.META.title,onMousedown:e.handleRootNavEvent},null,n)),t('</div><div class="toolbox" data-v-f5622f08>'),e.isEnabledNav?t('<button class="button menu" data-v-f5622f08><i class="iconfont icon-top-menu" data-v-f5622f08></i></button>'):t("<!---->"),t(`<button class="button language" title="Switch language" data-v-f5622f08>${ssrInterpolate(e.language||"-")}</button><button class="${ssrRenderClass([e.theme,"button theme"])}" data-v-f5622f08><i class="${ssrRenderClass([e.themeIcon,"iconfont"])}" data-v-f5622f08></i></button></div></div><div class="header-nav" data-v-f5622f08><nav class="nav-list container" data-v-f5622f08><!--[-->`),ssrRenderList(e.menus,(N,L)=>{t("<!--[-->"),L>0?t('<span class="divider" data-v-f5622f08></span>'):t("<!---->"),t(ssrRenderComponent(S,{class:["item",N.id],to:N.route,href:N.url},{default:withCtx((P,O,V,D)=>{if(O)N.imageIcon?O(ssrRenderComponent(v,{class:"image-icon",src:N.imageIcon},null,V,D)):N.icon?O(`<i class="${ssrRenderClass([N.icon,"font-icon iconfont"])}" data-v-f5622f08${D}></i>`):O("<!---->"),O(ssrRenderComponent(E,{class:"text",bolder:"",uppercase:!N.disabledUppercase},{default:withCtx((U,W,Z,re)=>{if(W)W(ssrRenderComponent(w,{k:N.i18nKey},null,Z,re));else return[createVNode(w,{k:N.i18nKey},null,8,["k"])]}),_:2},V,D)),N.hot?O(`<span class="superscript" data-v-f5622f08${D}><i class="iconfont icon-hot-fill" data-v-f5622f08${D}></i></span>`):O("<!---->"),N.newWindow?O(`<span class="new-window" data-v-f5622f08${D}><i class="iconfont icon-new-window-s" data-v-f5622f08${D}></i></span>`):O("<!---->");else return[N.imageIcon?(openBlock(),createBlock(v,{key:0,class:"image-icon",src:N.imageIcon},null,8,["src"])):N.icon?(openBlock(),createBlock("i",{key:1,class:["font-icon iconfont",N.icon]},null,2)):createCommentVNode("",!0),createVNode(E,{class:"text",bolder:"",uppercase:!N.disabledUppercase},{default:withCtx(()=>[createVNode(w,{k:N.i18nKey},null,8,["k"])]),_:2},1032,["uppercase"]),N.hot?(openBlock(),createBlock("span",{key:2,class:"superscript"},[createVNode("i",{class:"iconfont icon-hot-fill"})])):createCommentVNode("",!0),N.newWindow?(openBlock(),createBlock("span",{key:3,class:"new-window"},[createVNode("i",{class:"iconfont icon-new-window-s"})])):createCommentVNode("",!0)]}),_:2},n)),t("<!--]-->")}),t("<!--]--></nav></div></header>")}const _sfc_setup$7=_sfc_main$7.setup;_sfc_main$7.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/desktop/header.vue"),_sfc_setup$7?_sfc_setup$7(e,t):void 0};const HeaderView$1=_export_sfc(_sfc_main$7,[["ssrRender",_sfc_ssrRender$7],["__scopeId","data-v-f5622f08"]]),_sfc_main$6=defineComponent({name:"DesktopFooter",setup(){const{globalState:e,gtag:t}=useEnhancer();return{FOOTER_ELEMENT_ID,VALUABLE_LINKS,handleStatementModal:()=>{e.toggleSwitcher("statement",!0),t==null||t.event("statement_modal",{event_category:GAEventCategories.Universal})}}}}),footer_vue_vue_type_style_index_0_scoped_a7213f47_lang="";function _sfc_ssrRender$6(e,t,n,o,c,d,g,r){const v=resolveComponent("container"),E=resolveComponent("ulink"),w=resolveComponent("divider"),T=resolveComponent("i18n");t(ssrRenderComponent(v,mergeProps({tag:"footer",id:e.FOOTER_ELEMENT_ID,class:"footer"},o),{default:withCtx((S,N,L,P)=>{if(N)N(ssrRenderComponent(E,{class:"sitemap-btn",href:e.VALUABLE_LINKS.SITE_MAP},{default:withCtx((O,V,D,U)=>{if(V)V("sitemap.xml");else return[createTextVNode("sitemap.xml")]}),_:1},L,P)),N(ssrRenderComponent(w,{type:"vertical"},null,L,P)),N(ssrRenderComponent(T,{zh:"\u7531 ",en:"Powered By "},null,L,P)),N(ssrRenderComponent(E,{class:"item",href:e.VALUABLE_LINKS.GITHUB_BLOG_STAR_LIST},{default:withCtx((O,V,D,U)=>{if(V)V("NodePress");else return[createTextVNode("NodePress")]}),_:1},L,P)),N(ssrRenderComponent(T,{zh:"\u3001",en:", "},null,L,P)),N(ssrRenderComponent(E,{class:"item",href:e.VALUABLE_LINKS.GITHUB_SURMON_ME},{default:withCtx((O,V,D,U)=>{if(V)V("Vue");else return[createTextVNode("Vue")]}),_:1},L,P)),N(ssrRenderComponent(T,{zh:" \u548C \u65E5\u6708\u661F\u8FB0 \u5F3A\u529B\u9A71\u52A8",en:""},null,L,P)),N(ssrRenderComponent(w,{type:"vertical"},null,L,P)),N(`<a class="statement" href="javascript:void(0)" data-v-a7213f47${P}>`),N(ssrRenderComponent(T,{zh:"\u5468\u77E5",en:"FAQ"},null,L,P)),N("</a>"),N(ssrRenderComponent(w,{type:"vertical"},null,L,P)),N(ssrRenderComponent(E,{href:e.VALUABLE_LINKS.UPTIME_STATUS},{default:withCtx((O,V,D,U)=>{if(V)V(ssrRenderComponent(T,{zh:"\u5B9E\u6001",en:"STATUS"},null,D,U));else return[createVNode(T,{zh:"\u5B9E\u6001",en:"STATUS"})]}),_:1},L,P));else return[createVNode(E,{class:"sitemap-btn",href:e.VALUABLE_LINKS.SITE_MAP},{default:withCtx(()=>[createTextVNode("sitemap.xml")]),_:1},8,["href"]),createVNode(w,{type:"vertical"}),createVNode(T,{zh:"\u7531 ",en:"Powered By "}),createVNode(E,{class:"item",href:e.VALUABLE_LINKS.GITHUB_BLOG_STAR_LIST},{default:withCtx(()=>[createTextVNode("NodePress")]),_:1},8,["href"]),createVNode(T,{zh:"\u3001",en:", "}),createVNode(E,{class:"item",href:e.VALUABLE_LINKS.GITHUB_SURMON_ME},{default:withCtx(()=>[createTextVNode("Vue")]),_:1},8,["href"]),createVNode(T,{zh:" \u548C \u65E5\u6708\u661F\u8FB0 \u5F3A\u529B\u9A71\u52A8",en:""}),createVNode(w,{type:"vertical"}),createVNode("a",{class:"statement",href:"javascript:void(0)",onClick:e.handleStatementModal},[createVNode(T,{zh:"\u5468\u77E5",en:"FAQ"})],8,["onClick"]),createVNode(w,{type:"vertical"}),createVNode(E,{href:e.VALUABLE_LINKS.UPTIME_STATUS},{default:withCtx(()=>[createVNode(T,{zh:"\u5B9E\u6001",en:"STATUS"})]),_:1},8,["href"])]}),_:1},n))}const _sfc_setup$6=_sfc_main$6.setup;_sfc_main$6.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/desktop/footer.vue"),_sfc_setup$6?_sfc_setup$6(e,t):void 0};const FooterView$1=_export_sfc(_sfc_main$6,[["ssrRender",_sfc_ssrRender$6],["__scopeId","data-v-a7213f47"]]),_sfc_main$5=defineComponent({name:"DesktopMain",components:{Share,Feedback,Wallpaper,Statement,SponsorTabs,SponsorProvider,MusicPlayerHandle,Toolbox,Wallflower,Background,HeaderView:HeaderView$1,FooterView:FooterView$1,AsideView:AsideView$1,NavView},setup(){const e=useSponsorState(),t=useWallpaperStore(),{route:n,globalState:o}=useEnhancer(),c=()=>{o.setLayoutColumn(getLayoutByRouteMeta(n.meta))},d=()=>{o.toggleSwitcher("sponsor",!1)},g=()=>{o.toggleSwitcher("feedback",!1)},r=()=>{o.toggleSwitcher("statement",!1)};return onMounted(()=>{t.fetch(),useMusic().init()}),{LanguageKey,MAIN_ELEMENT_ID,MAIN_CONTENT_ELEMENT_ID,switcher:o.switcher,layoutColumn:o.layoutColumn,sponsorState:e,handlePageTransitionDone:c,handleSponsorModalClose:d,handleFeedbackModalClose:g,handleStatementModalClose:r}}}),main_vue_vue_type_style_index_0_scoped_7f6bafca_lang="";function _sfc_ssrRender$5(e,t,n,o,c,d,g,r){const v=resolveComponent("background"),E=resolveComponent("wallflower"),w=resolveComponent("client-only"),T=resolveComponent("popup"),S=resolveComponent("sponsor-tabs"),N=resolveComponent("sponsor-provider"),L=resolveComponent("feedback"),P=resolveComponent("statement"),O=resolveComponent("share"),V=resolveComponent("wallpaper"),D=resolveComponent("toolbox"),U=resolveComponent("music-player-handle"),W=resolveComponent("header-view"),Z=resolveComponent("nav-view"),re=resolveComponent("aside-view"),ae=resolveComponent("router-view"),ce=resolveComponent("footer-view");t(`<div${ssrRenderAttrs(mergeProps({class:"desktop-main"},o))} data-v-7f6bafca>`),t(ssrRenderComponent(v,null,null,n)),t(ssrRenderComponent(E,null,null,n)),t(ssrRenderComponent(w,null,{default:withCtx((ne,le,de,ie)=>{if(le)le(ssrRenderComponent(T,{visible:e.switcher.sponsor,onClose:e.handleSponsorModalClose},{default:withCtx((ve,Pe,ct,ge)=>{if(Pe)Pe(`<div class="sponsor-modal" data-v-7f6bafca${ge}><div class="sponsor" data-v-7f6bafca${ge}>`),Pe(ssrRenderComponent(S,{class:"tabs",state:e.sponsorState,"hide-title":!0},null,ct,ge)),Pe(ssrRenderComponent(N,{class:"provider",state:e.sponsorState,"max-sponsors":8},null,ct,ge)),Pe("</div></div>");else return[createVNode("div",{class:"sponsor-modal"},[createVNode("div",{class:"sponsor"},[createVNode(S,{class:"tabs",state:e.sponsorState,"hide-title":!0},null,8,["state"]),createVNode(N,{class:"provider",state:e.sponsorState,"max-sponsors":8},null,8,["state"])])])]}),_:1},de,ie)),le(ssrRenderComponent(T,{visible:e.switcher.feedback,"mask-close":!1,"scroll-close":!1,onClose:e.handleFeedbackModalClose},{default:withCtx((ve,Pe,ct,ge)=>{if(Pe)Pe(ssrRenderComponent(L,{onClose:e.handleFeedbackModalClose},null,ct,ge));else return[createVNode(L,{onClose:e.handleFeedbackModalClose},null,8,["onClose"])]}),_:1},de,ie)),le(ssrRenderComponent(T,{visible:e.switcher.statement,"scroll-close":!1,onClose:e.handleStatementModalClose},{default:withCtx((ve,Pe,ct,ge)=>{if(Pe)Pe(ssrRenderComponent(P,null,null,ct,ge));else return[createVNode(P)]}),_:1},de,ie));else return[createVNode(T,{visible:e.switcher.sponsor,onClose:e.handleSponsorModalClose},{default:withCtx(()=>[createVNode("div",{class:"sponsor-modal"},[createVNode("div",{class:"sponsor"},[createVNode(S,{class:"tabs",state:e.sponsorState,"hide-title":!0},null,8,["state"]),createVNode(N,{class:"provider",state:e.sponsorState,"max-sponsors":8},null,8,["state"])])])]),_:1},8,["visible","onClose"]),createVNode(T,{visible:e.switcher.feedback,"mask-close":!1,"scroll-close":!1,onClose:e.handleFeedbackModalClose},{default:withCtx(()=>[createVNode(L,{onClose:e.handleFeedbackModalClose},null,8,["onClose"])]),_:1},8,["visible","onClose"]),createVNode(T,{visible:e.switcher.statement,"scroll-close":!1,onClose:e.handleStatementModalClose},{default:withCtx(()=>[createVNode(P)]),_:1},8,["visible","onClose"])]}),_:1},n)),e.layoutColumn.isFull?t("<!---->"):(t("<!--[-->"),t(ssrRenderComponent(O,{class:"main-share"},null,n)),t(ssrRenderComponent(V,null,null,n)),t(ssrRenderComponent(D,null,null,n)),t(ssrRenderComponent(w,null,{default:withCtx((ne,le,de,ie)=>{if(le)le(ssrRenderComponent(U,null,null,de,ie));else return[createVNode(U)]}),_:1},n)),t("<!--]-->")),t(ssrRenderComponent(W,null,null,n)),t(`<main${ssrRenderAttr("id",e.MAIN_ELEMENT_ID)} class="${ssrRenderClass([{"full-page":e.layoutColumn.isFull},"main-container"])}" data-v-7f6bafca>`),e.layoutColumn.isNormal?t(ssrRenderComponent(Z,{class:"nav-view"},null,n)):t("<!---->"),e.layoutColumn.isNormal?t(ssrRenderComponent(re,{class:"aside-view"},null,n)):t("<!---->"),t(`<div${ssrRenderAttr("id",e.MAIN_CONTENT_ELEMENT_ID)} class="${ssrRenderClass([{"layout-normal":e.layoutColumn.isNormal,"layout-wide":e.layoutColumn.isWide,"layout-full":e.layoutColumn.isFull},"main-view"])}" data-v-7f6bafca>`),t(ssrRenderComponent(ae,null,{default:withCtx(({Component:ne,route:le},de,ie,ve)=>{if(de)de(`<div class="router-view" data-v-7f6bafca${ve}>`),ssrRenderSuspense(de,{default:()=>{renderVNode(de,createVNode(resolveDynamicComponent(ne),{key:le.name},null),ie,ve)},_:2}),de("</div>");else return[createVNode("div",{class:"router-view"},[createVNode(Transition,{name:"page",mode:"out-in",onBeforeEnter:e.handlePageTransitionDone},{default:withCtx(()=>[(openBlock(),createBlock(Suspense,null,{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(ne),{key:le.name}))]),_:2},1024))]),_:2},1032,["onBeforeEnter"])])]}),_:1},n)),t("</div></main>"),t(ssrRenderComponent(ce,{class:"footer-view"},null,n)),t("</div>")}const _sfc_setup$5=_sfc_main$5.setup;_sfc_main$5.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/desktop/main.vue"),_sfc_setup$5?_sfc_setup$5(e,t):void 0};const DesktopMain=_export_sfc(_sfc_main$5,[["ssrRender",_sfc_ssrRender$5],["__scopeId","data-v-7f6bafca"]]),_sfc_main$4=defineComponent({name:"MobileHeader",props:{opened:{type:Boolean,required:!0}},emits:["open","close"],setup(e,t){const{i18n:n,route:o,router:c}=useEnhancer(),d=ref(null),g=reactive({open:!1,keyword:""});onMounted(()=>{isSearchFlow(o.name)&&(g.keyword=o.params.keyword)});const r=()=>{t.emit(e.opened?"close":"open")},v=()=>{g.open=!0,nextTick$1(()=>{d.value.focus()})},E=()=>{g.open=!1},w=()=>{const T=g.keyword.trim();T&&c.push({name:RouteName.SearchFlow,params:{keyword:T}})};return watch(()=>c.currentRoute.value,()=>{nextTick$1(()=>{E(),t.emit("close")})}),{t:n.t,LanguageKey,searchState:g,inputElement:d,openSearch:v,submitSearch:w,cancelSearch:E,handleMenuToggle:r}}}),header_vue_vue_type_style_index_0_scoped_b60ccaa0_lang="";function _sfc_ssrRender$4(e,t,n,o,c,d,g,r){const v=resolveComponent("router-link"),E=resolveComponent("uimage");t(`<header${ssrRenderAttrs(mergeProps({class:"header"},o))} data-v-b60ccaa0><div class="${ssrRenderClass([{actived:e.searchState.open},"search"])}" data-v-b60ccaa0><input class="input" autocomplete="off" type="text" maxlength="16" required${ssrRenderAttr("placeholder",e.t(e.LanguageKey.SEARCH_PLACEHOLDER))}${ssrRenderAttr("value",e.searchState.keyword)} data-v-b60ccaa0><span class="close" data-v-b60ccaa0><i class="iconfont icon-cancel" data-v-b60ccaa0></i></span></div>`),e.searchState.open?t('<div class="search-mask" data-v-b60ccaa0></div>'):t("<!---->"),t('<nav class="navbar" data-v-b60ccaa0><button class="navbar-menu" data-v-b60ccaa0><i class="iconfont icon-menu" data-v-b60ccaa0></i></button>'),t(ssrRenderComponent(v,{to:"/",class:"navbar-logo"},{default:withCtx((w,T,S,N)=>{if(T)T(ssrRenderComponent(E,{class:"image",cdn:"",src:"/images/logo.svg"},null,S,N));else return[createVNode(E,{class:"image",cdn:"",src:"/images/logo.svg"})]}),_:1},n)),t('<button class="navbar-search" data-v-b60ccaa0><i class="iconfont icon-search" data-v-b60ccaa0></i></button></nav></header>')}const _sfc_setup$4=_sfc_main$4.setup;_sfc_main$4.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/mobile/header.vue"),_sfc_setup$4?_sfc_setup$4(e,t):void 0};const HeaderView=_export_sfc(_sfc_main$4,[["ssrRender",_sfc_ssrRender$4],["__scopeId","data-v-b60ccaa0"]]),_sfc_main$3=defineComponent({name:"MobileFooter",setup(){return{title:META.title,year:new Date().getFullYear()}}}),footer_vue_vue_type_style_index_0_scoped_9d9db550_lang="";function _sfc_ssrRender$3(e,t,n,o,c,d,g,r){t(`<footer${ssrRenderAttrs(mergeProps({class:"footer"},o))} data-v-9d9db550><div class="footer-content" data-v-9d9db550>\xA9${ssrInterpolate(e.year)}\xA0\xA0${ssrInterpolate(e.title)}</div></footer>`)}const _sfc_setup$3=_sfc_main$3.setup;_sfc_main$3.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/mobile/footer.vue"),_sfc_setup$3?_sfc_setup$3(e,t):void 0};const FooterView=_export_sfc(_sfc_main$3,[["ssrRender",_sfc_ssrRender$3],["__scopeId","data-v-9d9db550"]]),_sfc_main$2=defineComponent({name:"MobileAside",setup(){const{theme:e,i18n:t}=useEnhancer(),n=useAdminInfoStore(),o=computed(()=>{var g;return((g=n.data)==null?void 0:g.avatar)||getDefaultAvatar()}),c=computed(()=>({[Theme.Light]:"icon-sun",[Theme.Dark]:"icon-moon"})[e.theme.value]),d=computed(()=>({[Language.Chinese]:"icon-chinese",[Language.English]:"icon-english"})[t.language.value]);return useUniversalFetch(()=>n.fetch()),{VALUABLE_LINKS,LanguageKey,RouteName,CategorySlug,getPageRoute,getCategoryFlowRoute,avatar:o,author:META.author,themeIcon:c,languageIcon:d,toggleTheme:e.toggle,tooggleLanguage:t.toggle}}}),aside_vue_vue_type_style_index_0_scoped_0c4c875b_lang="";function _sfc_ssrRender$2(e,t,n,o,c,d,g,r){const v=resolveComponent("uimage"),E=resolveComponent("webfont"),w=resolveComponent("i18n"),T=resolveComponent("router-link"),S=resolveComponent("ulink");t(`<aside${ssrRenderAttrs(mergeProps({class:"aside"},o))} data-v-0c4c875b><div class="aside-user" data-v-0c4c875b><div class="avatar" data-v-0c4c875b>`),t(ssrRenderComponent(v,{src:e.avatar,alt:e.author},null,n)),t(`</div><div class="profile" data-v-0c4c875b><h3 class="name" data-v-0c4c875b>${ssrInterpolate(e.author)}</h3>`),t(ssrRenderComponent(E,{class:"slogan"},{default:withCtx((N,L,P,O)=>{if(L)L(ssrRenderComponent(w,{k:e.LanguageKey.APP_SLOGAN},null,P,O));else return[createVNode(w,{k:e.LanguageKey.APP_SLOGAN},null,8,["k"])]}),_:1},n)),t(`</div></div><div class="aside-tool" data-v-0c4c875b><div class="item" data-v-0c4c875b><i class="${ssrRenderClass([e.themeIcon,"iconfont"])}" data-v-0c4c875b></i></div><div class="item" data-v-0c4c875b><i class="${ssrRenderClass([e.languageIcon,"iconfont"])}" data-v-0c4c875b></i></div></div><div class="aside-nav" data-v-0c4c875b><nav class="nav-list" data-v-0c4c875b>`),t(ssrRenderComponent(T,{to:"/",class:"item"},{default:withCtx((N,L,P,O)=>{if(L)L(`<i class="iconfont icon-home" data-v-0c4c875b${O}></i>`),L(ssrRenderComponent(E,{bolder:"",uppercase:""},{default:withCtx((V,D,U,W)=>{if(D)D(ssrRenderComponent(w,{k:e.LanguageKey.PAGE_HOME},null,U,W));else return[createVNode(w,{k:e.LanguageKey.PAGE_HOME},null,8,["k"])]}),_:1},P,O));else return[createVNode("i",{class:"iconfont icon-home"}),createVNode(E,{bolder:"",uppercase:""},{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.PAGE_HOME},null,8,["k"])]),_:1})]}),_:1},n)),t(ssrRenderComponent(T,{class:"item",to:e.getCategoryFlowRoute(e.CategorySlug.Code)},{default:withCtx((N,L,P,O)=>{if(L)L(`<i class="iconfont icon-code" data-v-0c4c875b${O}></i>`),L(ssrRenderComponent(E,{bolder:"",uppercase:""},{default:withCtx((V,D,U,W)=>{if(D)D(ssrRenderComponent(w,{k:e.LanguageKey.CATEGORY_CODE},null,U,W));else return[createVNode(w,{k:e.LanguageKey.CATEGORY_CODE},null,8,["k"])]}),_:1},P,O));else return[createVNode("i",{class:"iconfont icon-code"}),createVNode(E,{bolder:"",uppercase:""},{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.CATEGORY_CODE},null,8,["k"])]),_:1})]}),_:1},n)),t(ssrRenderComponent(T,{class:"item",to:e.getCategoryFlowRoute(e.CategorySlug.Insight)},{default:withCtx((N,L,P,O)=>{if(L)L(`<i class="iconfont icon-insight" data-v-0c4c875b${O}></i>`),L(ssrRenderComponent(E,{bolder:"",uppercase:""},{default:withCtx((V,D,U,W)=>{if(D)D(ssrRenderComponent(w,{k:e.LanguageKey.CATEGORY_INSIGHT},null,U,W));else return[createVNode(w,{k:e.LanguageKey.CATEGORY_INSIGHT},null,8,["k"])]}),_:1},P,O));else return[createVNode("i",{class:"iconfont icon-insight"}),createVNode(E,{bolder:"",uppercase:""},{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.CATEGORY_INSIGHT},null,8,["k"])]),_:1})]}),_:1},n)),t(ssrRenderComponent(S,{class:"item",href:e.VALUABLE_LINKS.GITHUB},{default:withCtx((N,L,P,O)=>{if(L)L(`<i class="iconfont icon-github" data-v-0c4c875b${O}></i>`),L(ssrRenderComponent(E,{bolder:"",uppercase:""},{default:withCtx((V,D,U,W)=>{if(D)D(ssrRenderComponent(w,{k:e.LanguageKey.PAGE_GITHUB},null,U,W));else return[createVNode(w,{k:e.LanguageKey.PAGE_GITHUB},null,8,["k"])]}),_:1},P,O)),L(`<span class="newscript" data-v-0c4c875b${O}><i class="iconfont icon-new-window-s" data-v-0c4c875b${O}></i></span>`);else return[createVNode("i",{class:"iconfont icon-github"}),createVNode(E,{bolder:"",uppercase:""},{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.PAGE_GITHUB},null,8,["k"])]),_:1}),createVNode("span",{class:"newscript"},[createVNode("i",{class:"iconfont icon-new-window-s"})])]}),_:1},n)),t(ssrRenderComponent(T,{class:"item",to:e.getPageRoute(e.RouteName.Archive)},{default:withCtx((N,L,P,O)=>{if(L)L(`<i class="iconfont icon-quill" data-v-0c4c875b${O}></i>`),L(ssrRenderComponent(E,{bolder:"",uppercase:""},{default:withCtx((V,D,U,W)=>{if(D)D(ssrRenderComponent(w,{k:e.LanguageKey.PAGE_ARCHIVE},null,U,W));else return[createVNode(w,{k:e.LanguageKey.PAGE_ARCHIVE},null,8,["k"])]}),_:1},P,O));else return[createVNode("i",{class:"iconfont icon-quill"}),createVNode(E,{bolder:"",uppercase:""},{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.PAGE_ARCHIVE},null,8,["k"])]),_:1})]}),_:1},n)),t(ssrRenderComponent(T,{class:"item",to:e.getPageRoute(e.RouteName.About)},{default:withCtx((N,L,P,O)=>{if(L)L(`<i class="iconfont icon-swordsman" data-v-0c4c875b${O}></i>`),L(ssrRenderComponent(E,{bolder:"",uppercase:""},{default:withCtx((V,D,U,W)=>{if(D)D(ssrRenderComponent(w,{k:e.LanguageKey.PAGE_ABOUT},null,U,W));else return[createVNode(w,{k:e.LanguageKey.PAGE_ABOUT},null,8,["k"])]}),_:1},P,O));else return[createVNode("i",{class:"iconfont icon-swordsman"}),createVNode(E,{bolder:"",uppercase:""},{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.PAGE_ABOUT},null,8,["k"])]),_:1})]}),_:1},n)),t(ssrRenderComponent(T,{class:"item guestbook",to:e.getPageRoute(e.RouteName.Guestbook)},{default:withCtx((N,L,P,O)=>{if(L)L(`<i class="iconfont icon-comment" data-v-0c4c875b${O}></i>`),L(ssrRenderComponent(E,{bolder:"",uppercase:""},{default:withCtx((V,D,U,W)=>{if(D)D(ssrRenderComponent(w,{k:e.LanguageKey.PAGE_GUESTBOOK},null,U,W));else return[createVNode(w,{k:e.LanguageKey.PAGE_GUESTBOOK},null,8,["k"])]}),_:1},P,O));else return[createVNode("i",{class:"iconfont icon-comment"}),createVNode(E,{bolder:"",uppercase:""},{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.PAGE_GUESTBOOK},null,8,["k"])]),_:1})]}),_:1},n)),t(ssrRenderComponent(T,{class:"item app",to:e.getPageRoute(e.RouteName.App)},{default:withCtx((N,L,P,O)=>{if(L)L(ssrRenderComponent(v,{cdn:"",class:"icon",src:"/images/page-app/logo.png"},null,P,O)),L(ssrRenderComponent(E,{bolder:"",uppercase:""},{default:withCtx((V,D,U,W)=>{if(D)D(ssrRenderComponent(w,{k:e.LanguageKey.PAGE_APP},null,U,W));else return[createVNode(w,{k:e.LanguageKey.PAGE_APP},null,8,["k"])]}),_:1},P,O));else return[createVNode(v,{cdn:"",class:"icon",src:"/images/page-app/logo.png"}),createVNode(E,{bolder:"",uppercase:""},{default:withCtx(()=>[createVNode(w,{k:e.LanguageKey.PAGE_APP},null,8,["k"])]),_:1})]}),_:1},n)),t("</nav></div></aside>")}const _sfc_setup$2=_sfc_main$2.setup;_sfc_main$2.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/mobile/aside.vue"),_sfc_setup$2?_sfc_setup$2(e,t):void 0};const AsideView=_export_sfc(_sfc_main$2,[["ssrRender",_sfc_ssrRender$2],["__scopeId","data-v-0c4c875b"]]),_sfc_main$1=defineComponent({name:"MobileMain",components:{HeaderView,FooterView,AsideView},setup(){const{route:e}=useEnhancer(),t=computed(()=>getPageURL(e.fullPath)),n=ref(!1),o=()=>n.value=!0,c=()=>n.value=!1;return watch(n,d=>{}),{pageURL:t,isOpenedAside:n,openAside:o,closeAside:c}}}),main_vue_vue_type_style_index_0_scoped_72a5036f_lang="";function _sfc_ssrRender$1(e,t,n,o,c,d,g,r){const v=resolveComponent("aside-view"),E=resolveComponent("header-view"),w=resolveComponent("router-view"),T=resolveComponent("i18n"),S=resolveComponent("footer-view");t(`<div${ssrRenderAttrs(mergeProps({class:"mobile-main"},o))} data-v-72a5036f><div class="${ssrRenderClass([{opened:e.isOpenedAside},"asider"])}" data-v-72a5036f>`),t(ssrRenderComponent(v,{class:"aside"},null,n)),t(`</div><div class="${ssrRenderClass([{opened:e.isOpenedAside},"main"])}" data-v-72a5036f>`),e.isOpenedAside?t('<div class="close-mask" data-v-72a5036f></div>'):t("<!---->"),t(ssrRenderComponent(E,{opened:e.isOpenedAside,onClose:e.closeAside,onOpen:e.openAside},null,n)),t('<main class="main-container" data-v-72a5036f>'),t(ssrRenderComponent(w,{name:"mobile"},{default:withCtx(({Component:N,route:L},P,O,V)=>{if(P)L.meta.responsive?(P(`<div class="route-view" data-v-72a5036f${V}>`),renderVNode(P,createVNode(resolveDynamicComponent(N),{key:L.name},null),O,V),P("</div>")):(P(`<div class="fallback" data-v-72a5036f${V}><i class="iconfont icon-desktop" data-v-72a5036f${V}></i><p class="text" data-v-72a5036f${V}>`),P(ssrRenderComponent(T,{zh:"\u8BF7\u5728 PC \u7AEF\u8BBF\u95EE\u4EE5\u83B7\u5F97\u6700\u4F73\u4F53\u9A8C",en:"This page only support visit on PC"},null,O,V)),P(`</p><a class="link"${ssrRenderAttr("href",e.pageURL)} data-v-72a5036f${V}>${ssrInterpolate(e.pageURL)}</a></div>`));else return[L.meta.responsive?(openBlock(),createBlock("div",{key:0,class:"route-view"},[(openBlock(),createBlock(resolveDynamicComponent(N),{key:L.name}))])):(openBlock(),createBlock("div",{key:1,class:"fallback"},[createVNode("i",{class:"iconfont icon-desktop"}),createVNode("p",{class:"text"},[createVNode(T,{zh:"\u8BF7\u5728 PC \u7AEF\u8BBF\u95EE\u4EE5\u83B7\u5F97\u6700\u4F73\u4F53\u9A8C",en:"This page only support visit on PC"})]),createVNode("a",{class:"link",href:e.pageURL},toDisplayString(e.pageURL),9,["href"])]))]}),_:1},n)),t("</main>"),t(ssrRenderComponent(S,null,null,n)),t("</div></div>")}const _sfc_setup$1=_sfc_main$1.setup;_sfc_main$1.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/components/layout/mobile/main.vue"),_sfc_setup$1?_sfc_setup$1(e,t):void 0};const MobileMain=_export_sfc(_sfc_main$1,[["ssrRender",_sfc_ssrRender$1],["__scopeId","data-v-72a5036f"]]),_sfc_main=defineComponent({name:"App",components:{EmojiRain,Captured,DesktopMain,MobileMain},setup(){const{isMobile:e}=useEnhancer();return{isMobile:e}}}),index_vue_vue_type_style_index_0_lang="";function _sfc_ssrRender(e,t,n,o,c,d,g,r){const v=resolveComponent("client-only"),E=resolveComponent("progress-bar"),w=resolveComponent("emoji-rain"),T=resolveComponent("popup-root"),S=resolveComponent("captured"),N=resolveComponent("responsive"),L=resolveComponent("desktop-main"),P=resolveComponent("mobile-main");t(`<div${ssrRenderAttrs(mergeProps({class:"app-root"},o))}>`),t(ssrRenderComponent(v,null,{default:withCtx((O,V,D,U)=>{if(V)V(ssrRenderComponent(E,{spin:!e.isMobile},null,D,U)),V(ssrRenderComponent(w,null,null,D,U)),V(ssrRenderComponent(T,null,null,D,U));else return[createVNode(E,{spin:!e.isMobile},null,8,["spin"]),createVNode(w),createVNode(T)]}),_:1},n)),t(ssrRenderComponent(S,null,{default:withCtx((O,V,D,U)=>{if(V)V(ssrRenderComponent(N,null,{desktop:withCtx((W,Z,re,ae)=>{if(Z)Z(ssrRenderComponent(L,null,null,re,ae));else return[createVNode(L)]}),mobile:withCtx((W,Z,re,ae)=>{if(Z)Z(ssrRenderComponent(P,null,null,re,ae));else return[createVNode(P)]}),_:1},D,U));else return[createVNode(N,null,{desktop:withCtx(()=>[createVNode(L)]),mobile:withCtx(()=>[createVNode(P)]),_:1})]}),_:1},n)),t("</div>")}const _sfc_setup=_sfc_main.setup;_sfc_main.setup=(e,t)=>{const n=useSSRContext();return(n.modules||(n.modules=new Set)).add("src/app/index.vue"),_sfc_setup?_sfc_setup(e,t):void 0};const App=_export_sfc(_sfc_main,[["ssrRender",_sfc_ssrRender]]);console.info("[APP INITED]:",{NODE_ENV,mode:isSSR?"SSR":"SPA"},API_CONFIG);const createVueApp=e=>{var v,E,w;const t=e.appCreator(App);rebirthSSRContext(t);const n=createGlobalState({userAgent:e.userAgent||"",language:e.language||"",layout:(v=e.layout)!=null?v:LayoutColumn.Normal}),o=createUniversalStore({globalState:n}),c=createUniversalRouter({beforeMiddleware:(E=e.routerBeforeMiddleware)==null?void 0:E.call(e,n),afterMiddleware:(w=e.routerAfterMiddleware)==null?void 0:w.call(e,n),history:e.historyCreator()}),d=createMeta({titler:T=>`${T} | ${META.title}`}),g=createTheme(e.theme),r=createI18n({default:n.userAgent.isZhUser?Language.Chinese:Language.English,keys:Object.values(LanguageKey),languages:languages$1});return d.addHeadObjs(computed(()=>({htmlAttrs:{"data-theme":g.theme.value,"data-device":n.userAgent.isMobile?"mobile":"desktop"}}))),t.config.errorHandler=T=>n.setRenderError(T),c.onError(n.setRenderError),c.beforeEach((T,S,N)=>{T.meta.validate?T.meta.validate({route:T,i18n:r,store:o}).then(N).catch(L=>{const P=new Error;P.code=L.code,P.message=L.message,N(P)}):N()}),t.use(c),t.use(o),t.use(n),t.use(r),t.use(d),t.use(g),t.use(component),{app:t,router:c,store:o,globalState:n,i18n:r,meta:d,theme:g,component}},devDebug=(...e)=>isDev&&console.debug("-",...e),getCacheKey=(e,t)=>{const{i18n:n,theme:o,globalState:c}=e,d=n.language.value,g=o.theme.value,r=c.userAgent.isMobile?"mobile":"desktop";return`ssr_${d}_${r}_${g}_${t}`},createApp=e=>{const{headers:t}=e,n=createVueApp({appCreator:createSSRApp,historyCreator:createMemoryHistory,language:t["accept-language"],userAgent:t["user-agent"],theme:e.cookies[THEME_STORAGE_KEY]||Theme.Light}),o=["lozad"],c=["progress-bar","popup-root","popup","Adsense"];return o.forEach(d=>n.app.directive(d,{})),c.forEach(d=>n.app.component(d,{})),n},renderScripts=e=>{const t=renderSSRSymbleScript();return[renderSSRContextScript(serializeJavascript(e)),t].join(`
`)},renderHTML=async(e,t)=>{devDebug(`renderHTML: ${t}`);const{app:n,router:o,store:c,meta:d,theme:g,globalState:r}=e;devDebug("1. route.push.validate"),await o.push(t),await o.isReady(),devDebug("2. store.serverInit"),await c.serverPrefetch(),devDebug("3. set layout"),r.setLayoutColumn(getLayoutByRouteMeta(o.currentRoute.value.meta)),devDebug("4. renderToString");const E=await renderToString(n,{});if(r.renderError.value){const S=new Error(r.renderError.value.message);throw S.code=r.renderError.value.code,S}devDebug("5. renderMetaString");const w=await d.renderToString();devDebug("6. HTML & SSR context script");const T=renderScripts({metas:w,url:t,layout:r.layoutColumn.value.layout,theme:g.theme.value,store:c.state.value,...getSSRContextByApp(n)});return{html:E,metas:w,scripts:T}},renderError=async(e,t)=>{var g;const{app:n,meta:o,globalState:c,theme:d}=createApp(e);return c.setRenderError(t),o.addHeadObjs(ref({title:`Server Error: ${t.message||String(t)||"unknow"}`})),{code:(g=t.code)!=null?g:INVALID_ERROR,html:await renderToString(n),metas:await o.renderToString(),scripts:renderScripts({theme:d.theme.value,...getSSRContextByApp(n)})}},renderApp=async(e,t)=>{var r;const n=createApp(e),{originalUrl:o}=e,c=200,d=getCacheKey(n,o),g=await t.has(d);if(devDebug("cache key:",d,g),g)return{...await t.get(d),code:c};try{const v=await renderHTML(n,o),E=(r=n.router.currentRoute.value.meta)==null?void 0:r.ssrCacheAge;return E!==!1&&typeof E=="number"&&E>0&&(E===1/0?t.set(d,v):t.set(d,v,E)),{code:c,...v}}catch(v){return renderError(e,v)}};var mapboxGl$2={exports:{}};(function(e,t){(function(n,o){e.exports=o()})(commonjsGlobal,function(){var n,o,c;function d(r,v){if(!n)n=v;else if(!o)o=v;else{var E="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+n+")(sharedChunk); ("+o+")(sharedChunk); self.onerror = null;",w={};n(w),c=v(w),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(c.workerUrl=window.URL.createObjectURL(new Blob([E],{type:"text/javascript"})))}}d(["exports"],function(r){var v=typeof self<"u"?self:{},E=w;function w(a,i,s,u){this.cx=3*a,this.bx=3*(s-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(u-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=u,this.p2x=s,this.p2y=u}w.prototype.sampleCurveX=function(a){return((this.ax*a+this.bx)*a+this.cx)*a},w.prototype.sampleCurveY=function(a){return((this.ay*a+this.by)*a+this.cy)*a},w.prototype.sampleCurveDerivativeX=function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},w.prototype.solveCurveX=function(a,i){var s,u,m,y,x;for(i===void 0&&(i=1e-6),m=a,x=0;x<8;x++){if(y=this.sampleCurveX(m)-a,Math.abs(y)<i)return m;var k=this.sampleCurveDerivativeX(m);if(Math.abs(k)<1e-6)break;m-=y/k}if((m=a)<(s=0))return s;if(m>(u=1))return u;for(;s<u;){if(y=this.sampleCurveX(m),Math.abs(y-a)<i)return m;a>y?s=m:u=m,m=.5*(u-s)+s}return m},w.prototype.solve=function(a,i){return this.sampleCurveY(this.solveCurveX(a,i))};var T=S;function S(a,i){this.x=a,this.y=i}S.prototype={clone:function(){return new S(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,i){return this.clone()._rotateAround(a,i)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var i=a.x-this.x,s=a.y-this.y;return i*i+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,i){return Math.atan2(this.x*i-this.y*a,this.x*a+this.y*i)},_matMult:function(a){var i=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=i,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var i=Math.cos(a),s=Math.sin(a),u=s*this.x+i*this.y;return this.x=i*this.x-s*this.y,this.y=u,this},_rotateAround:function(a,i){var s=Math.cos(a),u=Math.sin(a),m=i.y+u*(this.x-i.x)+s*(this.y-i.y);return this.x=i.x+s*(this.x-i.x)-u*(this.y-i.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},S.convert=function(a){return a instanceof S?a:Array.isArray(a)?new S(a[0],a[1]):a};const N=Math.PI/180,L=180/Math.PI;function P(a){return a*N}function O(a){return a*L}const V=[[0,0],[1,0],[1,1],[0,1]];function D(a){if(a<=0)return 0;if(a>=1)return 1;const i=a*a,s=i*a;return 4*(a<.5?s:3*(a-i)+s-.75)}function U(a,i,s,u){const m=new E(a,i,s,u);return function(y){return m.solve(y)}}const W=U(.25,.1,.25,1);function Z(a,i,s){return Math.min(s,Math.max(i,a))}function re(a,i,s){return(s=Z((s-a)/(i-a),0,1))*s*(3-2*s)}function ae(a,i,s){const u=s-i,m=((a-i)%u+u)%u+i;return m===i?s:m}function ce(a,i,s){if(!a.length)return s(null,[]);let u=a.length;const m=new Array(a.length);let y=null;a.forEach((x,k)=>{i(x,(I,z)=>{I&&(y=I),m[k]=z,--u==0&&s(y,m)})})}function ne(a){const i=[];for(const s in a)i.push(a[s]);return i}function le(a,...i){for(const s of i)for(const u in s)a[u]=s[u];return a}let de=1;function ie(){return de++}function ve(){return function a(i){return i?(i^Math.random()*(16>>i/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,a)}()}function Pe(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function ct(a){return!!a&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(a)}function ge(a,i){a.forEach(s=>{i[s]&&(i[s]=i[s].bind(i))})}function Me(a,i){return a.indexOf(i,a.length-i.length)!==-1}function Ue(a,i,s){const u={};for(const m in a)u[m]=i.call(s||this,a[m],m,a);return u}function Ze(a,i,s){const u={};for(const m in a)i.call(s||this,a[m],m,a)&&(u[m]=a[m]);return u}function xt(a){return Array.isArray(a)?a.map(xt):typeof a=="object"&&a?Ue(a,xt):a}const Ut={};function Zt(a){Ut[a]||(typeof console<"u"&&console.warn(a),Ut[a]=!0)}function en(a,i,s){return(s.y-a.y)*(i.x-a.x)>(i.y-a.y)*(s.x-a.x)}function En(a){let i=0;for(let s,u,m=0,y=a.length,x=y-1;m<y;x=m++)s=a[m],u=a[x],i+=(u.x-s.x)*(s.y+u.y);return i}function tt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Mt(a){const i={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,u,m,y)=>{const x=m||y;return i[u]=!x||x.toLowerCase(),""}),i["max-age"]){const s=parseInt(i["max-age"],10);isNaN(s)?delete i["max-age"]:i["max-age"]=s}return i}let Tt=null;function Bt(a){if(Tt==null){const i=a.navigator?a.navigator.userAgent:null;Tt=!!a.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return Tt}function un(a){try{const i=v[a];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch{return!1}}function ln(a,i){return[a[4*i],a[4*i+1],a[4*i+2],a[4*i+3]]}const cn=v.performance;function Yt(a){const i=a?a.url.toString():void 0;return cn.getEntriesByName(i)}var Te="2.10.0";let Re,Qe,gt,qe;const Ct={now:()=>gt!==void 0?gt:v.performance.now(),setNow(a){gt=a},restoreNow(){gt=void 0},frame(a){const i=v.requestAnimationFrame(a);return{cancel:()=>v.cancelAnimationFrame(i)}},getImageData(a,i=0){const{width:s,height:u}=a;qe||(qe=v.document.createElement("canvas"));const m=qe.getContext("2d");if(!m)throw new Error("failed to create canvas 2d context");return(s>qe.width||u>qe.height)&&(qe.width=s,qe.height=u),m.clearRect(-i,-i,s+2*i,u+2*i),m.drawImage(a,0,0,s,u),m.getImageData(-i,-i,s+2*i,u+2*i)},resolveURL:a=>(Re||(Re=v.document.createElement("a")),Re.href=a,Re.href),get devicePixelRatio(){return v.devicePixelRatio},get prefersReducedMotion(){return!!v.matchMedia&&(Qe==null&&(Qe=v.matchMedia("(prefers-reduced-motion: reduce)")),Qe.matches)}};let rt;const Fe={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(rt==null){const a=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{rt=process.env.API_URL_REGEX!=null?new RegExp(process.env.API_URL_REGEX):a}catch{rt=a}}return rt},get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},vt={supported:!1,testSupport:function(a){!At&&yt&&(Xe?lt(a):dt=a)}};let dt,yt,At=!1,Xe=!1;function lt(a){const i=a.createTexture();a.bindTexture(a.TEXTURE_2D,i);try{if(a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,yt),a.isContextLost())return;vt.supported=!0}catch{}a.deleteTexture(i),At=!0}v.document&&(yt=v.document.createElement("img"),yt.onload=function(){dt&&lt(dt),dt=null,Xe=!0},yt.onerror=function(){At=!0,dt=null},yt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const at="01",Ht="NO_ACCESS_TOKEN";function Gt(a){return a.indexOf("mapbox:")===0}function vn(a){return Fe.API_URL_REGEX.test(a)}const Un=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Qn(a){const i=a.match(Un);if(!i)throw new Error("Unable to parse URL object");return{protocol:i[1],authority:i[2],path:i[3]||"/",params:i[4]?i[4].split("&"):[]}}function Ai(a){const i=a.params.length?`?${a.params.join("&")}`:"";return`${a.protocol}://${a.authority}${a.path}${i}`}function rr(a){if(!a)return null;const i=a.split(".");if(!i||i.length!==3)return null;try{return JSON.parse(decodeURIComponent(v.atob(i[1]).split("").map(s=>"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class wr{constructor(i){this.type=i,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(i){const s=rr(Fe.ACCESS_TOKEN);let u="";return u=s&&s.u?v.btoa(encodeURIComponent(s.u).replace(/%([0-9A-F]{2})/g,(m,y)=>String.fromCharCode(Number("0x"+y)))):Fe.ACCESS_TOKEN||"",i?`mapbox.eventData.${i}:${u}`:`mapbox.eventData:${u}`}fetchEventData(){const i=un("localStorage"),s=this.getStorageKey(),u=this.getStorageKey("uuid");if(i)try{const m=v.localStorage.getItem(s);m&&(this.eventData=JSON.parse(m));const y=v.localStorage.getItem(u);y&&(this.anonId=y)}catch{Zt("Unable to read from LocalStorage")}}saveEventData(){const i=un("localStorage"),s=this.getStorageKey(),u=this.getStorageKey("uuid");if(i)try{v.localStorage.setItem(u,this.anonId),Object.keys(this.eventData).length>=1&&v.localStorage.setItem(s,JSON.stringify(this.eventData))}catch{Zt("Unable to write to LocalStorage")}}processRequests(i){}postEvent(i,s,u,m){if(!Fe.EVENTS_URL)return;const y=Qn(Fe.EVENTS_URL);y.params.push(`access_token=${m||Fe.ACCESS_TOKEN||""}`);const x={event:this.type,created:new Date(i).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:Te,skuId:at,userId:this.anonId},k=s?le(x,s):x,I={url:Ai(y),headers:{"Content-Type":"text/plain"},body:JSON.stringify([k])};this.pendingRequest=bt(I,z=>{this.pendingRequest=null,u(z),this.saveEventData(),this.processRequests(m)})}queueRequest(i,s){this.queue.push(i),this.processRequests(s)}}const li=new class extends wr{constructor(a){super("appUserTurnstile"),this._customAccessToken=a}postTurnstileEvent(a,i){Fe.EVENTS_URL&&Fe.ACCESS_TOKEN&&Array.isArray(a)&&a.some(s=>Gt(s)||vn(s))&&this.queueRequest(Date.now(),i)}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const i=rr(Fe.ACCESS_TOKEN),s=i?i.u:Fe.ACCESS_TOKEN;let u=s!==this.eventData.tokenU;ct(this.anonId)||(this.anonId=ve(),u=!0);const m=this.queue.shift();if(this.eventData.lastSuccess){const y=new Date(this.eventData.lastSuccess),x=new Date(m),k=(m-this.eventData.lastSuccess)/864e5;u=u||k>=1||k<-1||y.getDate()!==x.getDate()}else u=!0;u?this.postEvent(m,{"enabled.telemetry":!1},y=>{y||(this.eventData.lastSuccess=m,this.eventData.tokenU=s)},a):this.processRequests()}},bi=li.postTurnstileEvent.bind(li),Er=new class extends wr{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(a,i,s,u){this.skuToken=i,this.errorCb=u,Fe.EVENTS_URL&&(s||Fe.ACCESS_TOKEN?this.queueRequest({id:a,timestamp:Date.now()},s):this.errorCb(new Error(Ht)))}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:s}=this.queue.shift();i&&this.success[i]||(this.anonId||this.fetchEventData(),ct(this.anonId)||(this.anonId=ve()),this.postEvent(s,{skuToken:this.skuToken},u=>{u?this.errorCb(u):i&&(this.success[i]=!0)},a))}},ks=Er.postMapLoadEvent.bind(Er),Rs=new class extends wr{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(a,i,s,u){if(!Fe.API_URL||!Fe.SESSION_PATH)return;const m=Qn(Fe.API_URL+Fe.SESSION_PATH);m.params.push(`sku=${i||""}`),m.params.push(`access_token=${u||Fe.ACCESS_TOKEN||""}`);const y={url:Ai(m),headers:{"Content-Type":"text/plain"}};this.pendingRequest=zt(y,x=>{this.pendingRequest=null,s(x),this.saveEventData(),this.processRequests(u)})}getSessionAPI(a,i,s,u){this.skuToken=i,this.errorCb=u,Fe.SESSION_PATH&&Fe.API_URL&&(s||Fe.ACCESS_TOKEN?this.queueRequest({id:a,timestamp:Date.now()},s):this.errorCb(new Error(Ht)))}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:s}=this.queue.shift();i&&this.success[i]||this.getSession(s,this.skuToken,u=>{u?this.errorCb(u):i&&(this.success[i]=!0)},a)}},$a=Rs.getSessionAPI.bind(Rs),Cr=new Set;let ur,ao=500,$s=50,Mi={};function Bo(a){const i=oe(a);let s,u;i&&i.forEach(y=>{const x=y.split("=");x[0]==="language"?s=x[1]:x[0]==="worldview"&&(u=x[1])});let m="mapbox-tiles";return s&&(m+=`-${s}`),u&&(m+=`-${u}`),m}function Ee(){try{return v.caches}catch{}}function ee(a){const i=Ee();i&&!Mi[a]&&(Mi[a]=i.open(a))}function oe(a){const i=a.indexOf("?");return i>0?a.slice(i+1).split("&"):[]}function xe(a){const i=a.indexOf("?");if(i<0)return a;const s=oe(a).filter(u=>{const m=u.split("=");return m[0]==="language"||m[0]==="worldview"});return s.length?`${a.slice(0,i)}?${s.join("&")}`:a.slice(0,i)}let Ae=1/0;const Ve={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Ve);class We extends Error{constructor(i,s,u){s===401&&vn(u)&&(i+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(i),this.status=s,this.url=u}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const He=tt()?()=>self.worker&&self.worker.referrer:()=>(v.location.protocol==="blob:"?v.parent:v).location.href,je=function(a,i){if(!(/^file:/.test(s=a.url)||/^file:/.test(He())&&!/^\w+:/.test(s))){if(v.fetch&&v.Request&&v.AbortController&&v.Request.prototype.hasOwnProperty("signal"))return function(u,m){const y=new v.AbortController,x=new v.Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:He(),signal:y.signal});let k=!1,I=!1;const z=(G=x.url).indexOf("sku=")>0&&vn(G);var G;u.type==="json"&&x.headers.set("Accept","application/json");const H=(J,Q,se)=>{if(I)return;if(J&&J.message!=="SecurityError"&&Zt(J),Q&&se)return K(Q);const pe=Date.now();v.fetch(x).then(we=>{if(we.ok){const Ne=z?we.clone():null;return K(we,Ne,pe)}return m(new We(we.statusText,we.status,u.url))}).catch(we=>{we.code!==20&&m(new Error(we.message))})},K=(J,Q,se)=>{(u.type==="arrayBuffer"?J.arrayBuffer():u.type==="json"?J.json():J.text()).then(pe=>{I||(Q&&se&&function(we,Ne,Se){const ke=Bo(we.url);if(ee(ke),!Mi[ke])return;const ze={status:Ne.status,statusText:Ne.statusText,headers:new v.Headers};Ne.headers.forEach((et,ut)=>ze.headers.set(ut,et));const Ie=Mt(Ne.headers.get("Cache-Control")||"");if(Ie["no-store"])return;Ie["max-age"]&&ze.headers.set("Expires",new Date(Se+1e3*Ie["max-age"]).toUTCString());const nt=ze.headers.get("Expires");nt&&(new Date(nt).getTime()-Se<42e4||function(et,ut){if(ur===void 0)try{new Response(new ReadableStream),ur=!0}catch{ur=!1}ur?ut(et.body):et.blob().then(ut)}(Ne,et=>{const ut=new v.Response(et,ze);ee(ke),Mi[ke]&&Mi[ke].then(Nt=>Nt.put(xe(we.url),ut)).catch(Nt=>Zt(Nt.message))}))}(x,Q,se),k=!0,m(null,pe,J.headers.get("Cache-Control"),J.headers.get("Expires")))}).catch(pe=>{I||m(new Error(pe.message))})};return z?function(J,Q){const se=Bo(J.url);if(ee(se),!Mi[se])return Q(null);const pe=xe(J.url);Mi[se].then(we=>{we.match(pe).then(Ne=>{const Se=function(ke){if(!ke)return!1;const ze=new Date(ke.headers.get("Expires")||0),Ie=Mt(ke.headers.get("Cache-Control")||"");return ze>Date.now()&&!Ie["no-cache"]}(Ne);we.delete(pe),Se&&we.put(pe,Ne.clone()),Q(null,Ne,Se)}).catch(Q)}).catch(Q)}(x,H):H(null,null),{cancel:()=>{I=!0,k||y.abort()}}}(a,i);if(tt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,i,void 0,!0)}var s;return function(u,m){const y=new v.XMLHttpRequest;y.open(u.method||"GET",u.url,!0),u.type==="arrayBuffer"&&(y.responseType="arraybuffer");for(const x in u.headers)y.setRequestHeader(x,u.headers[x]);return u.type==="json"&&(y.responseType="text",y.setRequestHeader("Accept","application/json")),y.withCredentials=u.credentials==="include",y.onerror=()=>{m(new Error(y.statusText))},y.onload=()=>{if((y.status>=200&&y.status<300||y.status===0)&&y.response!==null){let x=y.response;if(u.type==="json")try{x=JSON.parse(y.response)}catch(k){return m(k)}m(null,x,y.getResponseHeader("Cache-Control"),y.getResponseHeader("Expires"))}else m(new We(y.statusText,y.status,u.url))},y.send(u.body),{cancel:()=>y.abort()}}(a,i)},Ye=function(a,i){return je(le(a,{type:"arrayBuffer"}),i)},bt=function(a,i){return je(le(a,{method:"POST"}),i)},zt=function(a,i){return je(le(a,{method:"GET"}),i)};function St(a){const i=v.document.createElement("a");return i.href=a,i.protocol===v.document.location.protocol&&i.host===v.document.location.host}const nn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let rn,Xt;rn=[],Xt=0;const sn=function(a,i){if(vt.supported&&(a.headers||(a.headers={}),a.headers.accept="image/webp,*/*"),Xt>=Fe.MAX_PARALLEL_IMAGE_REQUESTS){const y={requestParameters:a,callback:i,cancelled:!1,cancel(){this.cancelled=!0}};return rn.push(y),y}Xt++;let s=!1;const u=()=>{if(!s)for(s=!0,Xt--;rn.length&&Xt<Fe.MAX_PARALLEL_IMAGE_REQUESTS;){const y=rn.shift(),{requestParameters:x,callback:k,cancelled:I}=y;I||(y.cancel=sn(x,k).cancel)}},m=Ye(a,(y,x,k,I)=>{u(),y?i(y):x&&(v.createImageBitmap?function(z,G){const H=new v.Blob([new Uint8Array(z)],{type:"image/png"});v.createImageBitmap(H).then(K=>{G(null,K)}).catch(K=>{G(new Error(`Could not load image because of ${K.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(x,(z,G)=>i(z,G,k,I)):function(z,G){const H=new v.Image,K=v.URL;H.onload=()=>{G(null,H),K.revokeObjectURL(H.src),H.onload=null,v.requestAnimationFrame(()=>{H.src=nn})},H.onerror=()=>G(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const J=new v.Blob([new Uint8Array(z)],{type:"image/png"});H.src=z.byteLength?K.createObjectURL(J):nn}(x,(z,G)=>i(z,G,k,I)))});return{cancel:()=>{m.cancel(),u()}}};function yn(a,i,s){s[a]&&s[a].indexOf(i)!==-1||(s[a]=s[a]||[],s[a].push(i))}function Ln(a,i,s){if(s&&s[a]){const u=s[a].indexOf(i);u!==-1&&s[a].splice(u,1)}}class zn{constructor(i,s={}){le(this,s),this.type=i}}class On extends zn{constructor(i,s={}){super("error",le({error:i},s))}}class tn{on(i,s){return this._listeners=this._listeners||{},yn(i,s,this._listeners),this}off(i,s){return Ln(i,s,this._listeners),Ln(i,s,this._oneTimeListeners),this}once(i,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},yn(i,s,this._oneTimeListeners),this):new Promise(u=>this.once(i,u))}fire(i,s){typeof i=="string"&&(i=new zn(i,s||{}));const u=i.type;if(this.listens(u)){i.target=this;const m=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const k of m)k.call(this,i);const y=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const k of y)Ln(u,k,this._oneTimeListeners),k.call(this,i);const x=this._eventedParent;x&&(le(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(i))}else i instanceof On&&console.error(i.error);return this}listens(i){return!!(this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i))}setEventedParent(i,s){return this._eventedParent=i,this._eventedParentData=s,this}}var st=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":true,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"cross-faded"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"cross-faded":{"type":"property-type"},"cross-faded-data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function zi(a,...i){for(const s of i)for(const u in s)a[u]=s[u];return a}function ii(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function Sr(a){if(Array.isArray(a))return a.map(Sr);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const i={};for(const s in a)i[s]=Sr(a[s]);return i}return ii(a)}class Ns extends Error{constructor(i,s){super(s),this.message=s,this.key=i}}var Xi=Ns;class Ms{constructor(i,s=[]){this.parent=i,this.bindings={};for(const[u,m]of s)this.bindings[u]=m}concat(i){return new Ms(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}var Iu=Ms;const lo={kind:"null"},Ft={kind:"number"},xn={kind:"string"},wn={kind:"boolean"},Ji={kind:"color"},Qi={kind:"object"},mn={kind:"value"},zo={kind:"collator"},Fo={kind:"formatted"},Vo={kind:"resolvedImage"};function Fi(a,i){return{kind:"array",itemType:a,N:i}}function ei(a){if(a.kind==="array"){const i=ei(a.itemType);return typeof a.N=="number"?`array<${i}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${i}>`}return a.kind}const oc=[lo,Ft,xn,wn,Ji,Fo,Qi,Fi(mn),Vo];function co(a,i){if(i.kind==="error")return null;if(a.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!co(a.itemType,i.itemType))&&(typeof a.N!="number"||a.N===i.N))return null}else{if(a.kind===i.kind)return null;if(a.kind==="value"){for(const s of oc)if(!co(s,i))return null}}return`Expected ${ei(a)} but found ${ei(i)} instead.`}function Is(a,i){return i.some(s=>s.kind===a.kind)}function Tr(a,i){return i.some(s=>s==="null"?a===null:s==="array"?Array.isArray(a):s==="object"?a&&!Array.isArray(a)&&typeof a=="object":s===typeof a)}function Na(a){var i={exports:{}};return a(i,i.exports),i.exports}var Ar=Na(function(a,i){var s={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function u(k){return(k=Math.round(k))<0?0:k>255?255:k}function m(k){return u(k[k.length-1]==="%"?parseFloat(k)/100*255:parseInt(k))}function y(k){return(I=k[k.length-1]==="%"?parseFloat(k)/100:parseFloat(k))<0?0:I>1?1:I;var I}function x(k,I,z){return z<0?z+=1:z>1&&(z-=1),6*z<1?k+(I-k)*z*6:2*z<1?I:3*z<2?k+(I-k)*(2/3-z)*6:k}try{i.parseCSSColor=function(k){var I,z=k.replace(/ /g,"").toLowerCase();if(z in s)return s[z].slice();if(z[0]==="#")return z.length===4?(I=parseInt(z.substr(1),16))>=0&&I<=4095?[(3840&I)>>4|(3840&I)>>8,240&I|(240&I)>>4,15&I|(15&I)<<4,1]:null:z.length===7&&(I=parseInt(z.substr(1),16))>=0&&I<=16777215?[(16711680&I)>>16,(65280&I)>>8,255&I,1]:null;var G=z.indexOf("("),H=z.indexOf(")");if(G!==-1&&H+1===z.length){var K=z.substr(0,G),J=z.substr(G+1,H-(G+1)).split(","),Q=1;switch(K){case"rgba":if(J.length!==4)return null;Q=y(J.pop());case"rgb":return J.length!==3?null:[m(J[0]),m(J[1]),m(J[2]),Q];case"hsla":if(J.length!==4)return null;Q=y(J.pop());case"hsl":if(J.length!==3)return null;var se=(parseFloat(J[0])%360+360)%360/360,pe=y(J[1]),we=y(J[2]),Ne=we<=.5?we*(pe+1):we+pe-we*pe,Se=2*we-Ne;return[u(255*x(Se,Ne,se+1/3)),u(255*x(Se,Ne,se)),u(255*x(Se,Ne,se-1/3)),Q];default:return null}}return null}}catch{}});class ki{constructor(i,s,u,m=1){this.r=i,this.g=s,this.b=u,this.a=m}static parse(i){if(!i)return;if(i instanceof ki)return i;if(typeof i!="string")return;const s=Ar.parseCSSColor(i);return s?new ki(s[0]/255*s[3],s[1]/255*s[3],s[2]/255*s[3],s[3]):void 0}toString(){const[i,s,u,m]=this.toArray();return`rgba(${Math.round(i)},${Math.round(s)},${Math.round(u)},${m})`}toArray(){const{r:i,g:s,b:u,a:m}=this;return m===0?[0,0,0,0]:[255*i/m,255*s/m,255*u/m,m]}toArray01(){const{r:i,g:s,b:u,a:m}=this;return m===0?[0,0,0,0]:[i/m,s/m,u/m,m]}toArray01PremultipliedAlpha(){const{r:i,g:s,b:u,a:m}=this;return[i,s,u,m]}}ki.black=new ki(0,0,0,1),ki.white=new ki(1,1,1,1),ki.transparent=new ki(0,0,0,0),ki.red=new ki(1,0,0,1),ki.blue=new ki(0,0,1,1);var Pn=ki;class Ma{constructor(i,s,u){this.sensitivity=i?s?"variant":"case":s?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,s){return this.collator.compare(i,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Uo{constructor(i,s,u,m,y){this.text=i.normalize?i.normalize():i,this.image=s,this.scale=u,this.fontStack=m,this.textColor=y}}class Ii{constructor(i){this.sections=i}static fromString(i){return new Ii([new Uo(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof Ii?i:Ii.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}serialize(){const i=["format"];for(const s of this.sections){if(s.image){i.push(["image",s.image.name]);continue}i.push(s.text);const u={};s.fontStack&&(u["text-font"]=["literal",s.fontStack.split(",")]),s.scale&&(u["font-scale"]=s.scale),s.textColor&&(u["text-color"]=["rgba"].concat(s.textColor.toArray())),i.push(u)}return i}}class Li{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new Li({name:i,available:!1}):null}serialize(){return["image",this.name]}}function Ia(a,i,s,u){return typeof a=="number"&&a>=0&&a<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof s=="number"&&s>=0&&s<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:`Invalid rgba value [${[a,i,s,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof u=="number"?[a,i,s,u]:[a,i,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function kr(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof Pn||a instanceof Ma||a instanceof Ii||a instanceof Li)return!0;if(Array.isArray(a)){for(const i of a)if(!kr(i))return!1;return!0}if(typeof a=="object"){for(const i in a)if(!kr(a[i]))return!1;return!0}return!1}function si(a){if(a===null)return lo;if(typeof a=="string")return xn;if(typeof a=="boolean")return wn;if(typeof a=="number")return Ft;if(a instanceof Pn)return Ji;if(a instanceof Ma)return zo;if(a instanceof Ii)return Fo;if(a instanceof Li)return Vo;if(Array.isArray(a)){const i=a.length;let s;for(const u of a){const m=si(u);if(s){if(s===m)continue;s=mn;break}s=m}return Fi(s||mn,i)}return Qi}function jo(a){const i=typeof a;return a===null?"":i==="string"||i==="number"||i==="boolean"?String(a):a instanceof Pn||a instanceof Ii||a instanceof Li?a.toString():JSON.stringify(a)}class La{constructor(i,s){this.type=i,this.value=s}static parse(i,s){if(i.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!kr(i[1]))return s.error("invalid value");const u=i[1];let m=si(u);const y=s.expectedType;return m.kind!=="array"||m.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(m=y),new La(m,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Pn?["rgba"].concat(this.value.toArray()):this.value instanceof Ii?this.value.serialize():this.value}}var Go=La,fi=class{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}};const qo={string:xn,number:Ft,boolean:wn,object:Qi};class Oa{constructor(i,s){this.type=i,this.args=s}static parse(i,s){if(i.length<2)return s.error("Expected at least one argument.");let u,m=1;const y=i[0];if(y==="array"){let k,I;if(i.length>2){const z=i[1];if(typeof z!="string"||!(z in qo)||z==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);k=qo[z],m++}else k=mn;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return s.error('The length argument to "array" must be a positive integer literal',2);I=i[2],m++}u=Fi(k,I)}else u=qo[y];const x=[];for(;m<i.length;m++){const k=s.parse(i[m],m,mn);if(!k)return null;x.push(k)}return new Oa(u,x)}evaluate(i){for(let s=0;s<this.args.length;s++){const u=this.args[s].evaluate(i);if(!co(this.type,si(u)))return u;if(s===this.args.length-1)throw new fi(`Expected value to be of type ${ei(this.type)}, but found ${ei(si(u))} instead.`)}return null}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=this.type,s=[i.kind];if(i.kind==="array"){const u=i.itemType;if(u.kind==="string"||u.kind==="number"||u.kind==="boolean"){s.push(u.kind);const m=i.N;(typeof m=="number"||this.args.length>1)&&s.push(m)}}return s.concat(this.args.map(u=>u.serialize()))}}var Gi=Oa;class Ho{constructor(i){this.type=Fo,this.sections=i}static parse(i,s){if(i.length<2)return s.error("Expected at least one argument.");const u=i[1];if(!Array.isArray(u)&&typeof u=="object")return s.error("First argument must be an image or text section.");const m=[];let y=!1;for(let x=1;x<=i.length-1;++x){const k=i[x];if(y&&typeof k=="object"&&!Array.isArray(k)){y=!1;let I=null;if(k["font-scale"]&&(I=s.parse(k["font-scale"],1,Ft),!I))return null;let z=null;if(k["text-font"]&&(z=s.parse(k["text-font"],1,Fi(xn)),!z))return null;let G=null;if(k["text-color"]&&(G=s.parse(k["text-color"],1,Ji),!G))return null;const H=m[m.length-1];H.scale=I,H.font=z,H.textColor=G}else{const I=s.parse(i[x],1,mn);if(!I)return null;const z=I.type.kind;if(z!=="string"&&z!=="value"&&z!=="null"&&z!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,m.push({content:I,scale:null,font:null,textColor:null})}}return new Ho(m)}evaluate(i){return new Ii(this.sections.map(s=>{const u=s.content.evaluate(i);return si(u)===Vo?new Uo("",u,null,null,null):new Uo(jo(u),null,s.scale?s.scale.evaluate(i):null,s.font?s.font.evaluate(i).join(","):null,s.textColor?s.textColor.evaluate(i):null)}))}eachChild(i){for(const s of this.sections)i(s.content),s.scale&&i(s.scale),s.font&&i(s.font),s.textColor&&i(s.textColor)}outputDefined(){return!1}serialize(){const i=["format"];for(const s of this.sections){i.push(s.content.serialize());const u={};s.scale&&(u["font-scale"]=s.scale.serialize()),s.font&&(u["text-font"]=s.font.serialize()),s.textColor&&(u["text-color"]=s.textColor.serialize()),i.push(u)}return i}}class Ls{constructor(i){this.type=Vo,this.input=i}static parse(i,s){if(i.length!==2)return s.error("Expected two arguments.");const u=s.parse(i[1],1,xn);return u?new Ls(u):s.error("No image name provided.")}evaluate(i){const s=this.input.evaluate(i),u=Li.fromString(s);return u&&i.availableImages&&(u.available=i.availableImages.indexOf(s)>-1),u}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Lu={"to-boolean":wn,"to-color":Ji,"to-number":Ft,"to-string":xn};class Pa{constructor(i,s){this.type=i,this.args=s}static parse(i,s){if(i.length<2)return s.error("Expected at least one argument.");const u=i[0];if((u==="to-boolean"||u==="to-string")&&i.length!==2)return s.error("Expected one argument.");const m=Lu[u],y=[];for(let x=1;x<i.length;x++){const k=s.parse(i[x],x,mn);if(!k)return null;y.push(k)}return new Pa(m,y)}evaluate(i){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(i));if(this.type.kind==="color"){let s,u;for(const m of this.args){if(s=m.evaluate(i),u=null,s instanceof Pn)return s;if(typeof s=="string"){const y=i.parseColor(s);if(y)return y}else if(Array.isArray(s)&&(u=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Ia(s[0],s[1],s[2],s[3]),!u))return new Pn(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new fi(u||`Could not parse color from value '${typeof s=="string"?s:String(JSON.stringify(s))}'`)}if(this.type.kind==="number"){let s=null;for(const u of this.args){if(s=u.evaluate(i),s===null)return 0;const m=Number(s);if(!isNaN(m))return m}throw new fi(`Could not convert ${JSON.stringify(s)} to number.`)}return this.type.kind==="formatted"?Ii.fromString(jo(this.args[0].evaluate(i))):this.type.kind==="resolvedImage"?Li.fromString(jo(this.args[0].evaluate(i))):jo(this.args[0].evaluate(i))}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Ho([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Ls(this.args[0]).serialize();const i=[`to-${this.type.kind}`];return this.eachChild(s=>{i.push(s.serialize())}),i}}var uo=Pa;const Ou=["Unknown","Point","LineString","Polygon"];var sc=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ou[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const a=this.featureDistanceData.center,i=this.featureDistanceData.scale,{x:s,y:u}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(s*i-a[0])+this.featureDistanceData.bearing[1]*(u*i-a[1])}return 0}parseColor(a){let i=this._parseColorCache[a];return i||(i=this._parseColorCache[a]=Pn.parse(a)),i}};class jr{constructor(i,s,u,m){this.name=i,this.type=s,this._evaluate=u,this.args=m}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(i=>i.serialize()))}static parse(i,s){const u=i[0],m=jr.definitions[u];if(!m)return s.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const y=Array.isArray(m)?m[0]:m.type,x=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,k=x.filter(([z])=>!Array.isArray(z)||z.length===i.length-1);let I=null;for(const[z,G]of k){I=new qr(s.registry,s.path,null,s.scope);const H=[];let K=!1;for(let J=1;J<i.length;J++){const Q=i[J],se=Array.isArray(z)?z[J-1]:z.type,pe=I.parse(Q,1+H.length,se);if(!pe){K=!0;break}H.push(pe)}if(!K)if(Array.isArray(z)&&z.length!==H.length)I.error(`Expected ${z.length} arguments, but found ${H.length} instead.`);else{for(let J=0;J<H.length;J++){const Q=Array.isArray(z)?z[J]:z.type,se=H[J];I.concat(J+1).checkSubtype(Q,se.type)}if(I.errors.length===0)return new jr(u,y,G,H)}}if(k.length===1)s.errors.push(...I.errors);else{const z=(k.length?k:x).map(([H])=>{return K=H,Array.isArray(K)?`(${K.map(ei).join(", ")})`:`(${ei(K.type)}...)`;var K}).join(" | "),G=[];for(let H=1;H<i.length;H++){const K=s.parse(i[H],1+G.length);if(!K)return null;G.push(ei(K.type))}s.error(`Expected arguments of type ${z}, but found (${G.join(", ")}) instead.`)}return null}static register(i,s){jr.definitions=s;for(const u in s)i[u]=jr}}var er=jr;class Os{constructor(i,s,u){this.type=zo,this.locale=u,this.caseSensitive=i,this.diacriticSensitive=s}static parse(i,s){if(i.length!==2)return s.error("Expected one argument.");const u=i[1];if(typeof u!="object"||Array.isArray(u))return s.error("Collator options argument must be an object.");const m=s.parse(u["case-sensitive"]!==void 0&&u["case-sensitive"],1,wn);if(!m)return null;const y=s.parse(u["diacritic-sensitive"]!==void 0&&u["diacritic-sensitive"],1,wn);if(!y)return null;let x=null;return u.locale&&(x=s.parse(u.locale,1,xn),!x)?null:new Os(m,y,x)}evaluate(i){return new Ma(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}serialize(){const i={};return i["case-sensitive"]=this.caseSensitive.serialize(),i["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(i.locale=this.locale.serialize()),["collator",i]}}const Rr=8192;function Da(a,i){a[0]=Math.min(a[0],i[0]),a[1]=Math.min(a[1],i[1]),a[2]=Math.max(a[2],i[0]),a[3]=Math.max(a[3],i[1])}function Ps(a,i){return!(a[0]<=i[0]||a[2]>=i[2]||a[1]<=i[1]||a[3]>=i[3])}function Pu(a,i){const s=(180+a[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,m=Math.pow(2,i.z);return[Math.round(s*m*Rr),Math.round(u*m*Rr)]}function Du(a,i,s){const u=a[0]-i[0],m=a[1]-i[1],y=a[0]-s[0],x=a[1]-s[1];return u*x-y*m==0&&u*y<=0&&m*x<=0}function Ds(a,i){let s=!1;for(let x=0,k=i.length;x<k;x++){const I=i[x];for(let z=0,G=I.length;z<G-1;z++){if(Du(a,I[z],I[z+1]))return!1;(m=I[z])[1]>(u=a)[1]!=(y=I[z+1])[1]>u[1]&&u[0]<(y[0]-m[0])*(u[1]-m[1])/(y[1]-m[1])+m[0]&&(s=!s)}}var u,m,y;return s}function Bs(a,i){for(let s=0;s<i.length;s++)if(Ds(a,i[s]))return!0;return!1}function ac(a,i,s,u){const m=u[0]-s[0],y=u[1]-s[1],x=(a[0]-s[0])*y-m*(a[1]-s[1]),k=(i[0]-s[0])*y-m*(i[1]-s[1]);return x>0&&k<0||x<0&&k>0}function Bu(a,i,s){for(const z of s)for(let G=0;G<z.length-1;++G)if((k=[(x=z[G+1])[0]-(y=z[G])[0],x[1]-y[1]])[0]*(I=[(m=i)[0]-(u=a)[0],m[1]-u[1]])[1]-k[1]*I[0]!=0&&ac(u,m,y,x)&&ac(y,x,u,m))return!0;var u,m,y,x,k,I;return!1}function lc(a,i){for(let s=0;s<a.length;++s)if(!Ds(a[s],i))return!1;for(let s=0;s<a.length-1;++s)if(Bu(a[s],a[s+1],i))return!1;return!0}function zu(a,i){for(let s=0;s<i.length;s++)if(lc(a,i[s]))return!0;return!1}function qi(a,i,s){const u=[];for(let m=0;m<a.length;m++){const y=[];for(let x=0;x<a[m].length;x++){const k=Pu(a[m][x],s);Da(i,k),y.push(k)}u.push(y)}return u}function Ba(a,i,s){const u=[];for(let m=0;m<a.length;m++){const y=qi(a[m],i,s);u.push(y)}return u}function za(a,i,s,u){if(a[0]<s[0]||a[0]>s[2]){const m=.5*u;let y=a[0]-s[0]>m?-u:s[0]-a[0]>m?u:0;y===0&&(y=a[0]-s[2]>m?-u:s[2]-a[0]>m?u:0),a[0]+=y}Da(i,a)}function Fa(a,i,s,u){const m=Math.pow(2,u.z)*Rr,y=[u.x*Rr,u.y*Rr],x=[];if(!a)return x;for(const k of a)for(const I of k){const z=[I.x+y[0],I.y+y[1]];za(z,i,s,m),x.push(z)}return x}function Va(a,i,s,u){const m=Math.pow(2,u.z)*Rr,y=[u.x*Rr,u.y*Rr],x=[];if(!a)return x;for(const I of a){const z=[];for(const G of I){const H=[G.x+y[0],G.y+y[1]];Da(i,H),z.push(H)}x.push(z)}if(i[2]-i[0]<=m/2){(k=i)[0]=k[1]=1/0,k[2]=k[3]=-1/0;for(const I of x)for(const z of I)za(z,i,s,m)}var k;return x}class po{constructor(i,s){this.type=wn,this.geojson=i,this.geometries=s}static parse(i,s){if(i.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(kr(i[1])){const u=i[1];if(u.type==="FeatureCollection")for(let m=0;m<u.features.length;++m){const y=u.features[m].geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new po(u,u.features[m].geometry)}else if(u.type==="Feature"){const m=u.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new po(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new po(u,u)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(s,u){const m=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(!x)return!1;if(u.type==="Polygon"){const k=qi(u.coordinates,y,x),I=Fa(s.geometry(),m,y,x);if(!Ps(m,y))return!1;for(const z of I)if(!Ds(z,k))return!1}if(u.type==="MultiPolygon"){const k=Ba(u.coordinates,y,x),I=Fa(s.geometry(),m,y,x);if(!Ps(m,y))return!1;for(const z of I)if(!Bs(z,k))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(s,u){const m=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(!x)return!1;if(u.type==="Polygon"){const k=qi(u.coordinates,y,x),I=Va(s.geometry(),m,y,x);if(!Ps(m,y))return!1;for(const z of I)if(!lc(z,k))return!1}if(u.type==="MultiPolygon"){const k=Ba(u.coordinates,y,x),I=Va(s.geometry(),m,y,x);if(!Ps(m,y))return!1;for(const z of I)if(!zu(z,k))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var zs=po;function Gr(a){if(a instanceof er&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof zs)return!1;let i=!0;return a.eachChild(s=>{i&&!Gr(s)&&(i=!1)}),i}function $r(a){if(a instanceof er&&a.name==="feature-state")return!1;let i=!0;return a.eachChild(s=>{i&&!$r(s)&&(i=!1)}),i}function Ko(a,i){if(a instanceof er&&i.indexOf(a.name)>=0)return!1;let s=!0;return a.eachChild(u=>{s&&!Ko(u,i)&&(s=!1)}),s}class Fs{constructor(i,s){this.type=s.type,this.name=i,this.boundExpression=s}static parse(i,s){if(i.length!==2||typeof i[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const u=i[1];return s.scope.has(u)?new Fs(u,s.scope.get(u)):s.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Vs=Fs;class Us{constructor(i,s=[],u,m=new Iu,y=[]){this.registry=i,this.path=s,this.key=s.map(x=>`[${x}]`).join(""),this.scope=m,this.errors=y,this.expectedType=u}parse(i,s,u,m,y={}){return s?this.concat(s,u,m)._parse(i,y):this._parse(i,y)}_parse(i,s){function u(m,y,x){return x==="assert"?new Gi(y,[m]):x==="coerce"?new uo(y,[m]):m}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=i[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const y=this.registry[m];if(y){let x=y.parse(i,this);if(!x)return null;if(this.expectedType){const k=this.expectedType,I=x.type;if(k.kind!=="string"&&k.kind!=="number"&&k.kind!=="boolean"&&k.kind!=="object"&&k.kind!=="array"||I.kind!=="value")if(k.kind!=="color"&&k.kind!=="formatted"&&k.kind!=="resolvedImage"||I.kind!=="value"&&I.kind!=="string"){if(this.checkSubtype(k,I))return null}else x=u(x,k,s.typeAnnotation||"coerce");else x=u(x,k,s.typeAnnotation||"assert")}if(!(x instanceof Go)&&x.type.kind!=="resolvedImage"&&$n(x)){const k=new sc;try{x=new Go(x.type,x.evaluate(k))}catch(I){return this.error(I.message),null}}return x}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,s,u){const m=typeof i=="number"?this.path.concat(i):this.path,y=u?this.scope.concat(u):this.scope;return new Us(this.registry,m,s||null,y,this.errors)}error(i,...s){const u=`${this.key}${s.map(m=>`[${m}]`).join("")}`;this.errors.push(new Xi(u,i))}checkSubtype(i,s){const u=co(i,s);return u&&this.error(u),u}}var qr=Us;function $n(a){if(a instanceof Vs)return $n(a.boundExpression);if(a instanceof er&&a.name==="error"||a instanceof Os||a instanceof zs)return!1;const i=a instanceof uo||a instanceof Gi;let s=!0;return a.eachChild(u=>{s=i?s&&$n(u):s&&u instanceof Go}),!!s&&Gr(a)&&Ko(a,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function js(a,i){const s=a.length-1;let u,m,y=0,x=s,k=0;for(;y<=x;)if(k=Math.floor((y+x)/2),u=a[k],m=a[k+1],u<=i){if(k===s||i<m)return k;y=k+1}else{if(!(u>i))throw new fi("Input is not a number.");x=k-1}return 0}class Ua{constructor(i,s,u){this.type=i,this.input=s,this.labels=[],this.outputs=[];for(const[m,y]of u)this.labels.push(m),this.outputs.push(y)}static parse(i,s){if(i.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return s.error("Expected an even number of arguments.");const u=s.parse(i[1],1,Ft);if(!u)return null;const m=[];let y=null;s.expectedType&&s.expectedType.kind!=="value"&&(y=s.expectedType);for(let x=1;x<i.length;x+=2){const k=x===1?-1/0:i[x],I=i[x+1],z=x,G=x+1;if(typeof k!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(m.length&&m[m.length-1][0]>=k)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',z);const H=s.parse(I,G,y);if(!H)return null;y=y||H.type,m.push([k,H])}return new Ua(y,u,m)}evaluate(i){const s=this.labels,u=this.outputs;if(s.length===1)return u[0].evaluate(i);const m=this.input.evaluate(i);if(m<=s[0])return u[0].evaluate(i);const y=s.length;return m>=s[y-1]?u[y-1].evaluate(i):u[js(s,m)].evaluate(i)}eachChild(i){i(this.input);for(const s of this.outputs)i(s)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){const i=["step",this.input.serialize()];for(let s=0;s<this.labels.length;s++)s>0&&i.push(this.labels[s]),i.push(this.outputs[s].serialize());return i}}var ja=Ua;function An(a,i,s){return a*(1-s)+i*s}function fo(a,i,s){return a.map((u,m)=>An(u,i[m],s))}var Wo=Object.freeze({__proto__:null,number:An,color:function(a,i,s){return new Pn(An(a.r,i.r,s),An(a.g,i.g,s),An(a.b,i.b,s),An(a.a,i.a,s))},array:fo});const Ga=.95047,qa=1.08883,Ha=4/29,Nr=6/29,Zo=3*Nr*Nr,Fu=Math.PI/180,Ka=180/Math.PI;function Gs(a){return a>.008856451679035631?Math.pow(a,1/3):a/Zo+Ha}function Wa(a){return a>Nr?a*a*a:Zo*(a-Ha)}function Za(a){return 255*(a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function qs(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function cc(a){const i=qs(a.r),s=qs(a.g),u=qs(a.b),m=Gs((.4124564*i+.3575761*s+.1804375*u)/Ga),y=Gs((.2126729*i+.7151522*s+.072175*u)/1);return{l:116*y-16,a:500*(m-y),b:200*(y-Gs((.0193339*i+.119192*s+.9503041*u)/qa)),alpha:a.a}}function Ya(a){let i=(a.l+16)/116,s=isNaN(a.a)?i:i+a.a/500,u=isNaN(a.b)?i:i-a.b/200;return i=1*Wa(i),s=Ga*Wa(s),u=qa*Wa(u),new Pn(Za(3.2404542*s-1.5371385*i-.4985314*u),Za(-.969266*s+1.8760108*i+.041556*u),Za(.0556434*s-.2040259*i+1.0572252*u),a.alpha)}function uc(a,i,s){const u=i-a;return a+s*(u>180||u<-180?u-360*Math.round(u/360):u)}const Yo={forward:cc,reverse:Ya,interpolate:function(a,i,s){return{l:An(a.l,i.l,s),a:An(a.a,i.a,s),b:An(a.b,i.b,s),alpha:An(a.alpha,i.alpha,s)}}},ho={forward:function(a){const{l:i,a:s,b:u}=cc(a),m=Math.atan2(u,s)*Ka;return{h:m<0?m+360:m,c:Math.sqrt(s*s+u*u),l:i,alpha:a.a}},reverse:function(a){const i=a.h*Fu,s=a.c;return Ya({l:a.l,a:Math.cos(i)*s,b:Math.sin(i)*s,alpha:a.alpha})},interpolate:function(a,i,s){return{h:uc(a.h,i.h,s),c:An(a.c,i.c,s),l:An(a.l,i.l,s),alpha:An(a.alpha,i.alpha,s)}}};var dc=Object.freeze({__proto__:null,lab:Yo,hcl:ho});class Xo{constructor(i,s,u,m,y){this.type=i,this.operator=s,this.interpolation=u,this.input=m,this.labels=[],this.outputs=[];for(const[x,k]of y)this.labels.push(x),this.outputs.push(k)}static interpolationFactor(i,s,u,m){let y=0;if(i.name==="exponential")y=Hs(s,i.base,u,m);else if(i.name==="linear")y=Hs(s,1,u,m);else if(i.name==="cubic-bezier"){const x=i.controlPoints;y=new E(x[0],x[1],x[2],x[3]).solve(Hs(s,1,u,m))}return y}static parse(i,s){let[u,m,y,...x]=i;if(!Array.isArray(m)||m.length===0)return s.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const z=m[1];if(typeof z!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:z}}else{if(m[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const z=m.slice(1);if(z.length!==4||z.some(G=>typeof G!="number"||G<0||G>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:z}}}if(i.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(y=s.parse(y,2,Ft),!y)return null;const k=[];let I=null;u==="interpolate-hcl"||u==="interpolate-lab"?I=Ji:s.expectedType&&s.expectedType.kind!=="value"&&(I=s.expectedType);for(let z=0;z<x.length;z+=2){const G=x[z],H=x[z+1],K=z+3,J=z+4;if(typeof G!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',K);if(k.length&&k[k.length-1][0]>=G)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',K);const Q=s.parse(H,J,I);if(!Q)return null;I=I||Q.type,k.push([G,Q])}return I.kind==="number"||I.kind==="color"||I.kind==="array"&&I.itemType.kind==="number"&&typeof I.N=="number"?new Xo(I,u,m,y,k):s.error(`Type ${ei(I)} is not interpolatable.`)}evaluate(i){const s=this.labels,u=this.outputs;if(s.length===1)return u[0].evaluate(i);const m=this.input.evaluate(i);if(m<=s[0])return u[0].evaluate(i);const y=s.length;if(m>=s[y-1])return u[y-1].evaluate(i);const x=js(s,m),k=Xo.interpolationFactor(this.interpolation,m,s[x],s[x+1]),I=u[x].evaluate(i),z=u[x+1].evaluate(i);return this.operator==="interpolate"?Wo[this.type.kind.toLowerCase()](I,z,k):this.operator==="interpolate-hcl"?ho.reverse(ho.interpolate(ho.forward(I),ho.forward(z),k)):Yo.reverse(Yo.interpolate(Yo.forward(I),Yo.forward(z),k))}eachChild(i){i(this.input);for(const s of this.outputs)i(s)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){let i;i=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const s=[this.operator,i,this.input.serialize()];for(let u=0;u<this.labels.length;u++)s.push(this.labels[u],this.outputs[u].serialize());return s}}function Hs(a,i,s,u){const m=u-s,y=a-s;return m===0?0:i===1?y/m:(Math.pow(i,y)-1)/(Math.pow(i,m)-1)}var or=Xo;class Xa{constructor(i,s){this.type=i,this.args=s}static parse(i,s){if(i.length<2)return s.error("Expectected at least one argument.");let u=null;const m=s.expectedType;m&&m.kind!=="value"&&(u=m);const y=[];for(const k of i.slice(1)){const I=s.parse(k,1+y.length,u,void 0,{typeAnnotation:"omit"});if(!I)return null;u=u||I.type,y.push(I)}const x=m&&y.some(k=>co(m,k.type));return new Xa(x?mn:u,y)}evaluate(i){let s,u=null,m=0;for(const y of this.args){if(m++,u=y.evaluate(i),u&&u instanceof Li&&!u.available&&(s||(s=u),u=null,m===this.args.length))return s;if(u!==null)break}return u}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=["coalesce"];return this.eachChild(s=>{i.push(s.serialize())}),i}}var pc=Xa;class Ja{constructor(i,s){this.type=s.type,this.bindings=[].concat(i),this.result=s}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const s of this.bindings)i(s[1]);i(this.result)}static parse(i,s){if(i.length<4)return s.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const u=[];for(let y=1;y<i.length-1;y+=2){const x=i[y];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,y);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",y);const k=s.parse(i[y+1],y+1);if(!k)return null;u.push([x,k])}const m=s.parse(i[i.length-1],i.length-1,s.expectedType,u);return m?new Ja(u,m):null}outputDefined(){return this.result.outputDefined()}serialize(){const i=["let"];for(const[s,u]of this.bindings)i.push(s,u.serialize());return i.push(this.result.serialize()),i}}var fc=Ja;class Qa{constructor(i,s,u){this.type=i,this.index=s,this.input=u}static parse(i,s){if(i.length!==3)return s.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const u=s.parse(i[1],1,Ft),m=s.parse(i[2],2,Fi(s.expectedType||mn));return u&&m?new Qa(m.type.itemType,u,m):null}evaluate(i){const s=this.index.evaluate(i),u=this.input.evaluate(i);if(s<0)throw new fi(`Array index out of bounds: ${s} < 0.`);if(s>=u.length)throw new fi(`Array index out of bounds: ${s} > ${u.length-1}.`);if(s!==Math.floor(s))throw new fi(`Array index must be an integer, but found ${s} instead.`);return u[s]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var hc=Qa;class el{constructor(i,s){this.type=wn,this.needle=i,this.haystack=s}static parse(i,s){if(i.length!==3)return s.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const u=s.parse(i[1],1,mn),m=s.parse(i[2],2,mn);return u&&m?Is(u.type,[wn,xn,Ft,lo,mn])?new el(u,m):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${ei(u.type)} instead`):null}evaluate(i){const s=this.needle.evaluate(i),u=this.haystack.evaluate(i);if(u==null)return!1;if(!Tr(s,["boolean","string","number","null"]))throw new fi(`Expected first argument to be of type boolean, string, number or null, but found ${ei(si(s))} instead.`);if(!Tr(u,["string","array"]))throw new fi(`Expected second argument to be of type array or string, but found ${ei(si(u))} instead.`);return u.indexOf(s)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Vu=el;class Ks{constructor(i,s,u){this.type=Ft,this.needle=i,this.haystack=s,this.fromIndex=u}static parse(i,s){if(i.length<=2||i.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const u=s.parse(i[1],1,mn),m=s.parse(i[2],2,mn);if(!u||!m)return null;if(!Is(u.type,[wn,xn,Ft,lo,mn]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${ei(u.type)} instead`);if(i.length===4){const y=s.parse(i[3],3,Ft);return y?new Ks(u,m,y):null}return new Ks(u,m)}evaluate(i){const s=this.needle.evaluate(i),u=this.haystack.evaluate(i);if(!Tr(s,["boolean","string","number","null"]))throw new fi(`Expected first argument to be of type boolean, string, number or null, but found ${ei(si(s))} instead.`);if(!Tr(u,["string","array"]))throw new fi(`Expected second argument to be of type array or string, but found ${ei(si(u))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(i);return u.indexOf(s,m)}return u.indexOf(s)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const i=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),i]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var Uu=Ks;class Ws{constructor(i,s,u,m,y,x){this.inputType=i,this.type=s,this.input=u,this.cases=m,this.outputs=y,this.otherwise=x}static parse(i,s){if(i.length<5)return s.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return s.error("Expected an even number of arguments.");let u,m;s.expectedType&&s.expectedType.kind!=="value"&&(m=s.expectedType);const y={},x=[];for(let z=2;z<i.length-1;z+=2){let G=i[z];const H=i[z+1];Array.isArray(G)||(G=[G]);const K=s.concat(z);if(G.length===0)return K.error("Expected at least one branch label.");for(const Q of G){if(typeof Q!="number"&&typeof Q!="string")return K.error("Branch labels must be numbers or strings.");if(typeof Q=="number"&&Math.abs(Q)>Number.MAX_SAFE_INTEGER)return K.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Q=="number"&&Math.floor(Q)!==Q)return K.error("Numeric branch labels must be integer values.");if(u){if(K.checkSubtype(u,si(Q)))return null}else u=si(Q);if(y[String(Q)]!==void 0)return K.error("Branch labels must be unique.");y[String(Q)]=x.length}const J=s.parse(H,z,m);if(!J)return null;m=m||J.type,x.push(J)}const k=s.parse(i[1],1,mn);if(!k)return null;const I=s.parse(i[i.length-1],i.length-1,m);return I?k.type.kind!=="value"&&s.concat(1).checkSubtype(u,k.type)?null:new Ws(u,m,k,y,x,I):null}evaluate(i){const s=this.input.evaluate(i);return(si(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["match",this.input.serialize()],s=Object.keys(this.cases).sort(),u=[],m={};for(const x of s){const k=m[this.cases[x]];k===void 0?(m[this.cases[x]]=u.length,u.push([this.cases[x],[x]])):u[k][1].push(x)}const y=x=>this.inputType.kind==="number"?Number(x):x;for(const[x,k]of u)i.push(k.length===1?y(k[0]):k.map(y)),i.push(this.outputs[x].serialize());return i.push(this.otherwise.serialize()),i}}var mc=Ws;class Zs{constructor(i,s,u){this.type=i,this.branches=s,this.otherwise=u}static parse(i,s){if(i.length<4)return s.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return s.error("Expected an odd number of arguments.");let u;s.expectedType&&s.expectedType.kind!=="value"&&(u=s.expectedType);const m=[];for(let x=1;x<i.length-1;x+=2){const k=s.parse(i[x],x,wn);if(!k)return null;const I=s.parse(i[x+1],x+1,u);if(!I)return null;m.push([k,I]),u=u||I.type}const y=s.parse(i[i.length-1],i.length-1,u);return y?new Zs(u,m,y):null}evaluate(i){for(const[s,u]of this.branches)if(s.evaluate(i))return u.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[s,u]of this.branches)i(s),i(u);i(this.otherwise)}outputDefined(){return this.branches.every(([i,s])=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["case"];return this.eachChild(s=>{i.push(s.serialize())}),i}}var ju=Zs;class Ys{constructor(i,s,u,m){this.type=i,this.input=s,this.beginIndex=u,this.endIndex=m}static parse(i,s){if(i.length<=2||i.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const u=s.parse(i[1],1,mn),m=s.parse(i[2],2,Ft);if(!u||!m)return null;if(!Is(u.type,[Fi(mn),xn,mn]))return s.error(`Expected first argument to be of type array or string, but found ${ei(u.type)} instead`);if(i.length===4){const y=s.parse(i[3],3,Ft);return y?new Ys(u.type,u,m,y):null}return new Ys(u.type,u,m)}evaluate(i){const s=this.input.evaluate(i),u=this.beginIndex.evaluate(i);if(!Tr(s,["string","array"]))throw new fi(`Expected first argument to be of type array or string, but found ${ei(si(s))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(i);return s.slice(u,m)}return s.slice(u)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const i=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),i]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var gc=Ys;function tl(a,i){return a==="=="||a==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function nl(a,i,s,u){return u.compare(i,s)===0}function mo(a,i,s){const u=a!=="=="&&a!=="!=";return class Ih{constructor(y,x,k){this.type=wn,this.lhs=y,this.rhs=x,this.collator=k,this.hasUntypedArgument=y.type.kind==="value"||x.type.kind==="value"}static parse(y,x){if(y.length!==3&&y.length!==4)return x.error("Expected two or three arguments.");const k=y[0];let I=x.parse(y[1],1,mn);if(!I)return null;if(!tl(k,I.type))return x.concat(1).error(`"${k}" comparisons are not supported for type '${ei(I.type)}'.`);let z=x.parse(y[2],2,mn);if(!z)return null;if(!tl(k,z.type))return x.concat(2).error(`"${k}" comparisons are not supported for type '${ei(z.type)}'.`);if(I.type.kind!==z.type.kind&&I.type.kind!=="value"&&z.type.kind!=="value")return x.error(`Cannot compare types '${ei(I.type)}' and '${ei(z.type)}'.`);u&&(I.type.kind==="value"&&z.type.kind!=="value"?I=new Gi(z.type,[I]):I.type.kind!=="value"&&z.type.kind==="value"&&(z=new Gi(I.type,[z])));let G=null;if(y.length===4){if(I.type.kind!=="string"&&z.type.kind!=="string"&&I.type.kind!=="value"&&z.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(G=x.parse(y[3],3,zo),!G)return null}return new Ih(I,z,G)}evaluate(y){const x=this.lhs.evaluate(y),k=this.rhs.evaluate(y);if(u&&this.hasUntypedArgument){const I=si(x),z=si(k);if(I.kind!==z.kind||I.kind!=="string"&&I.kind!=="number")throw new fi(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${I.kind}, ${z.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const I=si(x),z=si(k);if(I.kind!=="string"||z.kind!=="string")return i(y,x,k)}return this.collator?s(y,x,k,this.collator.evaluate(y)):i(y,x,k)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}serialize(){const y=[a];return this.eachChild(x=>{y.push(x.serialize())}),y}}}const Gu=mo("==",function(a,i,s){return i===s},nl),qu=mo("!=",function(a,i,s){return i!==s},function(a,i,s,u){return!nl(0,i,s,u)}),Hu=mo("<",function(a,i,s){return i<s},function(a,i,s,u){return u.compare(i,s)<0}),Xs=mo(">",function(a,i,s){return i>s},function(a,i,s,u){return u.compare(i,s)>0}),_c=mo("<=",function(a,i,s){return i<=s},function(a,i,s,u){return u.compare(i,s)<=0}),vc=mo(">=",function(a,i,s){return i>=s},function(a,i,s,u){return u.compare(i,s)>=0});class il{constructor(i,s,u,m,y,x){this.type=xn,this.number=i,this.locale=s,this.currency=u,this.unit=m,this.minFractionDigits=y,this.maxFractionDigits=x}static parse(i,s){if(i.length!==3)return s.error("Expected two arguments.");const u=s.parse(i[1],1,Ft);if(!u)return null;const m=i[2];if(typeof m!="object"||Array.isArray(m))return s.error("NumberFormat options argument must be an object.");let y=null;if(m.locale&&(y=s.parse(m.locale,1,xn),!y))return null;let x=null;if(m.currency&&(x=s.parse(m.currency,1,xn),!x))return null;let k=null;if(m.unit&&(k=s.parse(m.unit,1,xn),!k))return null;let I=null;if(m["min-fraction-digits"]&&(I=s.parse(m["min-fraction-digits"],1,Ft),!I))return null;let z=null;return m["max-fraction-digits"]&&(z=s.parse(m["max-fraction-digits"],1,Ft),!z)?null:new il(u,y,x,k,I,z)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(i):void 0,unit:this.unit?this.unit.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.unit&&i(this.unit),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const i={};return this.locale&&(i.locale=this.locale.serialize()),this.currency&&(i.currency=this.currency.serialize()),this.unit&&(i.unit=this.unit.serialize()),this.minFractionDigits&&(i["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(i["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),i]}}class rl{constructor(i){this.type=Ft,this.input=i}static parse(i,s){if(i.length!==2)return s.error(`Expected 1 argument, but found ${i.length-1} instead.`);const u=s.parse(i[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${ei(u.type)} instead.`):new rl(u):null}evaluate(i){const s=this.input.evaluate(i);if(typeof s=="string"||Array.isArray(s))return s.length;throw new fi(`Expected value to be of type string or array, but found ${ei(si(s))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){const i=["length"];return this.eachChild(s=>{i.push(s.serialize())}),i}}const yc={"==":Gu,"!=":qu,">":Xs,"<":Hu,">=":vc,"<=":_c,array:Gi,at:hc,boolean:Gi,case:ju,coalesce:pc,collator:Os,format:Ho,image:Ls,in:Vu,"index-of":Uu,interpolate:or,"interpolate-hcl":or,"interpolate-lab":or,length:rl,let:fc,literal:Go,match:mc,number:Gi,"number-format":il,object:Gi,slice:gc,step:ja,string:Gi,"to-boolean":uo,"to-color":uo,"to-number":uo,"to-string":uo,var:Vs,within:zs};function ol(a,[i,s,u,m]){i=i.evaluate(a),s=s.evaluate(a),u=u.evaluate(a);const y=m?m.evaluate(a):1,x=Ia(i,s,u,y);if(x)throw new fi(x);return new Pn(i/255*y,s/255*y,u/255*y,y)}function sl(a,i){return a in i}function Js(a,i){const s=i[a];return s===void 0?null:s}function dr(a){return{type:a}}er.register(yc,{error:[{kind:"error"},[xn],(a,[i])=>{throw new fi(i.evaluate(a))}],typeof:[xn,[mn],(a,[i])=>ei(si(i.evaluate(a)))],"to-rgba":[Fi(Ft,4),[Ji],(a,[i])=>i.evaluate(a).toArray()],rgb:[Ji,[Ft,Ft,Ft],ol],rgba:[Ji,[Ft,Ft,Ft,Ft],ol],has:{type:wn,overloads:[[[xn],(a,[i])=>sl(i.evaluate(a),a.properties())],[[xn,Qi],(a,[i,s])=>sl(i.evaluate(a),s.evaluate(a))]]},get:{type:mn,overloads:[[[xn],(a,[i])=>Js(i.evaluate(a),a.properties())],[[xn,Qi],(a,[i,s])=>Js(i.evaluate(a),s.evaluate(a))]]},"feature-state":[mn,[xn],(a,[i])=>Js(i.evaluate(a),a.featureState||{})],properties:[Qi,[],a=>a.properties()],"geometry-type":[xn,[],a=>a.geometryType()],id:[mn,[],a=>a.id()],zoom:[Ft,[],a=>a.globals.zoom],pitch:[Ft,[],a=>a.globals.pitch||0],"distance-from-center":[Ft,[],a=>a.distanceFromCenter()],"heatmap-density":[Ft,[],a=>a.globals.heatmapDensity||0],"line-progress":[Ft,[],a=>a.globals.lineProgress||0],"sky-radial-progress":[Ft,[],a=>a.globals.skyRadialProgress||0],accumulated:[mn,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[Ft,dr(Ft),(a,i)=>{let s=0;for(const u of i)s+=u.evaluate(a);return s}],"*":[Ft,dr(Ft),(a,i)=>{let s=1;for(const u of i)s*=u.evaluate(a);return s}],"-":{type:Ft,overloads:[[[Ft,Ft],(a,[i,s])=>i.evaluate(a)-s.evaluate(a)],[[Ft],(a,[i])=>-i.evaluate(a)]]},"/":[Ft,[Ft,Ft],(a,[i,s])=>i.evaluate(a)/s.evaluate(a)],"%":[Ft,[Ft,Ft],(a,[i,s])=>i.evaluate(a)%s.evaluate(a)],ln2:[Ft,[],()=>Math.LN2],pi:[Ft,[],()=>Math.PI],e:[Ft,[],()=>Math.E],"^":[Ft,[Ft,Ft],(a,[i,s])=>Math.pow(i.evaluate(a),s.evaluate(a))],sqrt:[Ft,[Ft],(a,[i])=>Math.sqrt(i.evaluate(a))],log10:[Ft,[Ft],(a,[i])=>Math.log(i.evaluate(a))/Math.LN10],ln:[Ft,[Ft],(a,[i])=>Math.log(i.evaluate(a))],log2:[Ft,[Ft],(a,[i])=>Math.log(i.evaluate(a))/Math.LN2],sin:[Ft,[Ft],(a,[i])=>Math.sin(i.evaluate(a))],cos:[Ft,[Ft],(a,[i])=>Math.cos(i.evaluate(a))],tan:[Ft,[Ft],(a,[i])=>Math.tan(i.evaluate(a))],asin:[Ft,[Ft],(a,[i])=>Math.asin(i.evaluate(a))],acos:[Ft,[Ft],(a,[i])=>Math.acos(i.evaluate(a))],atan:[Ft,[Ft],(a,[i])=>Math.atan(i.evaluate(a))],min:[Ft,dr(Ft),(a,i)=>Math.min(...i.map(s=>s.evaluate(a)))],max:[Ft,dr(Ft),(a,i)=>Math.max(...i.map(s=>s.evaluate(a)))],abs:[Ft,[Ft],(a,[i])=>Math.abs(i.evaluate(a))],round:[Ft,[Ft],(a,[i])=>{const s=i.evaluate(a);return s<0?-Math.round(-s):Math.round(s)}],floor:[Ft,[Ft],(a,[i])=>Math.floor(i.evaluate(a))],ceil:[Ft,[Ft],(a,[i])=>Math.ceil(i.evaluate(a))],"filter-==":[wn,[xn,mn],(a,[i,s])=>a.properties()[i.value]===s.value],"filter-id-==":[wn,[mn],(a,[i])=>a.id()===i.value],"filter-type-==":[wn,[xn],(a,[i])=>a.geometryType()===i.value],"filter-<":[wn,[xn,mn],(a,[i,s])=>{const u=a.properties()[i.value],m=s.value;return typeof u==typeof m&&u<m}],"filter-id-<":[wn,[mn],(a,[i])=>{const s=a.id(),u=i.value;return typeof s==typeof u&&s<u}],"filter->":[wn,[xn,mn],(a,[i,s])=>{const u=a.properties()[i.value],m=s.value;return typeof u==typeof m&&u>m}],"filter-id->":[wn,[mn],(a,[i])=>{const s=a.id(),u=i.value;return typeof s==typeof u&&s>u}],"filter-<=":[wn,[xn,mn],(a,[i,s])=>{const u=a.properties()[i.value],m=s.value;return typeof u==typeof m&&u<=m}],"filter-id-<=":[wn,[mn],(a,[i])=>{const s=a.id(),u=i.value;return typeof s==typeof u&&s<=u}],"filter->=":[wn,[xn,mn],(a,[i,s])=>{const u=a.properties()[i.value],m=s.value;return typeof u==typeof m&&u>=m}],"filter-id->=":[wn,[mn],(a,[i])=>{const s=a.id(),u=i.value;return typeof s==typeof u&&s>=u}],"filter-has":[wn,[mn],(a,[i])=>i.value in a.properties()],"filter-has-id":[wn,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[wn,[Fi(xn)],(a,[i])=>i.value.indexOf(a.geometryType())>=0],"filter-id-in":[wn,[Fi(mn)],(a,[i])=>i.value.indexOf(a.id())>=0],"filter-in-small":[wn,[xn,Fi(mn)],(a,[i,s])=>s.value.indexOf(a.properties()[i.value])>=0],"filter-in-large":[wn,[xn,Fi(mn)],(a,[i,s])=>function(u,m,y,x){for(;y<=x;){const k=y+x>>1;if(m[k]===u)return!0;m[k]>u?x=k-1:y=k+1}return!1}(a.properties()[i.value],s.value,0,s.value.length-1)],all:{type:wn,overloads:[[[wn,wn],(a,[i,s])=>i.evaluate(a)&&s.evaluate(a)],[dr(wn),(a,i)=>{for(const s of i)if(!s.evaluate(a))return!1;return!0}]]},any:{type:wn,overloads:[[[wn,wn],(a,[i,s])=>i.evaluate(a)||s.evaluate(a)],[dr(wn),(a,i)=>{for(const s of i)if(s.evaluate(a))return!0;return!1}]]},"!":[wn,[wn],(a,[i])=>!i.evaluate(a)],"is-supported-script":[wn,[xn],(a,[i])=>{const s=a.globals&&a.globals.isSupportedScript;return!s||s(i.evaluate(a))}],upcase:[xn,[xn],(a,[i])=>i.evaluate(a).toUpperCase()],downcase:[xn,[xn],(a,[i])=>i.evaluate(a).toLowerCase()],concat:[xn,dr(mn),(a,i)=>i.map(s=>jo(s.evaluate(a))).join("")],"resolved-locale":[xn,[zo],(a,[i])=>i.evaluate(a).resolvedLocale()]});var Jo=yc;function bc(a){return{result:"success",value:a}}function _o(a){return{result:"error",value:a}}function vo(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function xc(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function al(a){return!!a.expression&&a.expression.interpolated}function Nn(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function Qo(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function wc(a){return a}function es(a,i){const s=i.type==="color",u=a.stops&&typeof a.stops[0][0]=="object",m=u||!(u||a.property!==void 0),y=a.type||(al(i)?"exponential":"interval");if(s&&((a=zi({},a)).stops&&(a.stops=a.stops.map(z=>[z[0],Pn.parse(z[1])])),a.default=Pn.parse(a.default?a.default:i.default)),a.colorSpace&&a.colorSpace!=="rgb"&&!dc[a.colorSpace])throw new Error(`Unknown color space: ${a.colorSpace}`);let x,k,I;if(y==="exponential")x=ll;else if(y==="interval")x=Mr;else if(y==="categorical"){x=Ku,k=Object.create(null);for(const z of a.stops)k[z[0]]=z[1];I=typeof a.stops[0][0]}else{if(y!=="identity")throw new Error(`Unknown function type "${y}"`);x=yo}if(u){const z={},G=[];for(let J=0;J<a.stops.length;J++){const Q=a.stops[J],se=Q[0].zoom;z[se]===void 0&&(z[se]={zoom:se,type:a.type,property:a.property,default:a.default,stops:[]},G.push(se)),z[se].stops.push([Q[0].value,Q[1]])}const H=[];for(const J of G)H.push([z[J].zoom,es(z[J],i)]);const K={name:"linear"};return{kind:"composite",interpolationType:K,interpolationFactor:or.interpolationFactor.bind(void 0,K),zoomStops:H.map(J=>J[0]),evaluate:({zoom:J},Q)=>ll({stops:H,base:a.base},i,J).evaluate(J,Q)}}if(m){const z=y==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:z,interpolationFactor:or.interpolationFactor.bind(void 0,z),zoomStops:a.stops.map(G=>G[0]),evaluate:({zoom:G})=>x(a,i,G,k,I)}}return{kind:"source",evaluate(z,G){const H=G&&G.properties?G.properties[a.property]:void 0;return H===void 0?ts(a.default,i.default):x(a,i,H,k,I)}}}function ts(a,i,s){return a!==void 0?a:i!==void 0?i:s!==void 0?s:void 0}function Ku(a,i,s,u,m){return ts(typeof s===m?u[s]:void 0,a.default,i.default)}function Mr(a,i,s){if(Nn(s)!=="number")return ts(a.default,i.default);const u=a.stops.length;if(u===1||s<=a.stops[0][0])return a.stops[0][1];if(s>=a.stops[u-1][0])return a.stops[u-1][1];const m=js(a.stops.map(y=>y[0]),s);return a.stops[m][1]}function ll(a,i,s){const u=a.base!==void 0?a.base:1;if(Nn(s)!=="number")return ts(a.default,i.default);const m=a.stops.length;if(m===1||s<=a.stops[0][0])return a.stops[0][1];if(s>=a.stops[m-1][0])return a.stops[m-1][1];const y=js(a.stops.map(G=>G[0]),s),x=function(G,H,K,J){const Q=J-K,se=G-K;return Q===0?0:H===1?se/Q:(Math.pow(H,se)-1)/(Math.pow(H,Q)-1)}(s,u,a.stops[y][0],a.stops[y+1][0]),k=a.stops[y][1],I=a.stops[y+1][1];let z=Wo[i.type]||wc;if(a.colorSpace&&a.colorSpace!=="rgb"){const G=dc[a.colorSpace];z=(H,K)=>G.reverse(G.interpolate(G.forward(H),G.forward(K),x))}return typeof k.evaluate=="function"?{evaluate(...G){const H=k.evaluate.apply(void 0,G),K=I.evaluate.apply(void 0,G);if(H!==void 0&&K!==void 0)return z(H,K,x)}}:z(k,I,x)}function yo(a,i,s){return i.type==="color"?s=Pn.parse(s):i.type==="formatted"?s=Ii.fromString(s.toString()):i.type==="resolvedImage"?s=Li.fromString(s.toString()):Nn(s)===i.type||i.type==="enum"&&i.values[s]||(s=void 0),ts(s,a.default,i.default)}class cl{constructor(i,s){this.expression=i,this._warningHistory={},this._evaluator=new sc,this._defaultValue=s?function(u){return u.type==="color"&&(Qo(u.default)||Array.isArray(u.default))?new Pn(0,0,0,0):u.type==="color"?Pn.parse(u.default)||null:u.default===void 0?null:u.default}(s):null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(i,s,u,m,y,x,k,I){return this._evaluator.globals=i,this._evaluator.feature=s,this._evaluator.featureState=u,this._evaluator.canonical=m||null,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=x,this._evaluator.featureTileCoord=k||null,this._evaluator.featureDistanceData=I||null,this.expression.evaluate(this._evaluator)}evaluate(i,s,u,m,y,x,k,I){this._evaluator.globals=i,this._evaluator.feature=s||null,this._evaluator.featureState=u||null,this._evaluator.canonical=m||null,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=x||null,this._evaluator.featureTileCoord=k||null,this._evaluator.featureDistanceData=I||null;try{const z=this.expression.evaluate(this._evaluator);if(z==null||typeof z=="number"&&z!=z)return this._defaultValue;if(this._enumValues&&!(z in this._enumValues))throw new fi(`Expected value to be one of ${Object.keys(this._enumValues).map(G=>JSON.stringify(G)).join(", ")}, but found ${JSON.stringify(z)} instead.`);return z}catch(z){return this._warningHistory[z.message]||(this._warningHistory[z.message]=!0,typeof console<"u"&&console.warn(z.message)),this._defaultValue}}}function Qs(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in Jo}function bo(a,i){const s=new qr(Jo,[],i?function(m){const y={color:Ji,string:xn,number:Ft,enum:xn,boolean:wn,formatted:Fo,resolvedImage:Vo};return m.type==="array"?Fi(y[m.value]||mn,m.length):y[m.type]}(i):void 0),u=s.parse(a,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?bc(new cl(u,i)):_o(s.errors)}class ul{constructor(i,s){this.kind=i,this._styleExpression=s,this.isStateDependent=i!=="constant"&&!$r(s.expression)}evaluateWithoutErrorHandling(i,s,u,m,y,x){return this._styleExpression.evaluateWithoutErrorHandling(i,s,u,m,y,x)}evaluate(i,s,u,m,y,x){return this._styleExpression.evaluate(i,s,u,m,y,x)}}class ns{constructor(i,s,u,m){this.kind=i,this.zoomStops=u,this._styleExpression=s,this.isStateDependent=i!=="camera"&&!$r(s.expression),this.interpolationType=m}evaluateWithoutErrorHandling(i,s,u,m,y,x){return this._styleExpression.evaluateWithoutErrorHandling(i,s,u,m,y,x)}evaluate(i,s,u,m,y,x){return this._styleExpression.evaluate(i,s,u,m,y,x)}interpolationFactor(i,s,u){return this.interpolationType?or.interpolationFactor(this.interpolationType,i,s,u):0}}function dl(a,i){if((a=bo(a,i)).result==="error")return a;const s=a.value.expression,u=Gr(s);if(!u&&!vo(i))return _o([new Xi("","data expressions not supported")]);const m=Ko(s,["zoom","pitch","distance-from-center"]);if(!m&&!xc(i))return _o([new Xi("","zoom expressions not supported")]);const y=wo(s);return y||m?y instanceof Xi?_o([y]):y instanceof or&&!al(i)?_o([new Xi("",'"interpolate" expressions cannot be used with this property')]):bc(y?new ns(u?"camera":"composite",a.value,y.labels,y instanceof or?y.interpolation:void 0):new ul(u?"constant":"source",a.value)):_o([new Xi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class xo{constructor(i,s){this._parameters=i,this._specification=s,zi(this,es(this._parameters,this._specification))}static deserialize(i){return new xo(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function wo(a){let i=null;if(a instanceof fc)i=wo(a.result);else if(a instanceof pc){for(const s of a.args)if(i=wo(s),i)break}else(a instanceof ja||a instanceof or)&&a.input instanceof er&&a.input.name==="zoom"&&(i=a);return i instanceof Xi||a.eachChild(s=>{const u=wo(s);u instanceof Xi?i=u:!i&&u?i=new Xi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&u&&i!==u&&(i=new Xi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}class Vt{constructor(i,s,u,m){this.message=(i?`${i}: `:"")+u,m&&(this.identifier=m),s!=null&&s.__line__&&(this.line=s.__line__)}}function Vi(a){const i=a.key,s=a.value,u=a.valueSpec||{},m=a.objectElementValidators||{},y=a.style,x=a.styleSpec;let k=[];const I=Nn(s);if(I!=="object")return[new Vt(i,s,`object expected, ${I} found`)];for(const z in s){const G=z.split(".")[0],H=u[G]||u["*"];let K;m[G]?K=m[G]:u[G]?K=mi:m["*"]?K=m["*"]:u["*"]&&(K=mi),K?k=k.concat(K({key:(i&&`${i}.`)+z,value:s[z],valueSpec:H,style:y,styleSpec:x,object:s,objectKey:z},s)):k.push(new Vt(i,s[z],`unknown property "${z}"`))}for(const z in u)m[z]||u[z].required&&u[z].default===void 0&&s[z]===void 0&&k.push(new Vt(i,s,`missing required property "${z}"`));return k}function pl(a){const i=a.value,s=a.valueSpec,u=a.style,m=a.styleSpec,y=a.key,x=a.arrayElementValidator||mi;if(Nn(i)!=="array")return[new Vt(y,i,`array expected, ${Nn(i)} found`)];if(s.length&&i.length!==s.length)return[new Vt(y,i,`array length ${s.length} expected, length ${i.length} found`)];if(s["min-length"]&&i.length<s["min-length"])return[new Vt(y,i,`array length at least ${s["min-length"]} expected, length ${i.length} found`)];let k={type:s.value,values:s.values,minimum:s.minimum,maximum:s.maximum,function:void 0};m.$version<7&&(k.function=s.function),Nn(s.value)==="object"&&(k=s.value);let I=[];for(let z=0;z<i.length;z++)I=I.concat(x({array:i,arrayIndex:z,value:i[z],valueSpec:k,style:u,styleSpec:m,key:`${y}[${z}]`}));return I}function fl(a){const i=a.key,s=a.value,u=a.valueSpec;let m=Nn(s);if(m==="number"&&s!=s&&(m="NaN"),m!=="number")return[new Vt(i,s,`number expected, ${m} found`)];if("minimum"in u){let y=u.minimum;if(Nn(u.minimum)==="array"&&(y=u.minimum[a.arrayIndex]),s<y)return[new Vt(i,s,`${s} is less than the minimum value ${y}`)]}if("maximum"in u){let y=u.maximum;if(Nn(u.maximum)==="array"&&(y=u.maximum[a.arrayIndex]),s>y)return[new Vt(i,s,`${s} is greater than the maximum value ${y}`)]}return[]}function rs(a){const i=a.valueSpec,s=ii(a.value.type);let u,m,y,x={};const k=s!=="categorical"&&a.value.property===void 0,I=!k,z=Nn(a.value.stops)==="array"&&Nn(a.value.stops[0])==="array"&&Nn(a.value.stops[0][0])==="object",G=Vi({key:a.key,value:a.value,valueSpec:a.styleSpec.function,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(J){if(s==="identity")return[new Vt(J.key,J.value,'identity function may not have a "stops" property')];let Q=[];const se=J.value;return Q=Q.concat(pl({key:J.key,value:se,valueSpec:J.valueSpec,style:J.style,styleSpec:J.styleSpec,arrayElementValidator:H})),Nn(se)==="array"&&se.length===0&&Q.push(new Vt(J.key,se,"array must have at least one stop")),Q},default:function(J){return mi({key:J.key,value:J.value,valueSpec:i,style:J.style,styleSpec:J.styleSpec})}}});return s==="identity"&&k&&G.push(new Vt(a.key,a.value,'missing required property "property"')),s==="identity"||a.value.stops||G.push(new Vt(a.key,a.value,'missing required property "stops"')),s==="exponential"&&a.valueSpec.expression&&!al(a.valueSpec)&&G.push(new Vt(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(I&&!vo(a.valueSpec)?G.push(new Vt(a.key,a.value,"property functions not supported")):k&&!xc(a.valueSpec)&&G.push(new Vt(a.key,a.value,"zoom functions not supported"))),s!=="categorical"&&!z||a.value.property!==void 0||G.push(new Vt(a.key,a.value,'"property" property is required')),G;function H(J){let Q=[];const se=J.value,pe=J.key;if(Nn(se)!=="array")return[new Vt(pe,se,`array expected, ${Nn(se)} found`)];if(se.length!==2)return[new Vt(pe,se,`array length 2 expected, length ${se.length} found`)];if(z){if(Nn(se[0])!=="object")return[new Vt(pe,se,`object expected, ${Nn(se[0])} found`)];if(se[0].zoom===void 0)return[new Vt(pe,se,"object stop key must have zoom")];if(se[0].value===void 0)return[new Vt(pe,se,"object stop key must have value")];const we=ii(se[0].zoom);if(typeof we!="number")return[new Vt(pe,se[0].zoom,"stop zoom values must be numbers")];if(y&&y>we)return[new Vt(pe,se[0].zoom,"stop zoom values must appear in ascending order")];we!==y&&(y=we,m=void 0,x={}),Q=Q.concat(Vi({key:`${pe}[0]`,value:se[0],valueSpec:{zoom:{}},style:J.style,styleSpec:J.styleSpec,objectElementValidators:{zoom:fl,value:K}}))}else Q=Q.concat(K({key:`${pe}[0]`,value:se[0],valueSpec:{},style:J.style,styleSpec:J.styleSpec},se));return Qs(Sr(se[1]))?Q.concat([new Vt(`${pe}[1]`,se[1],"expressions are not allowed in function stops.")]):Q.concat(mi({key:`${pe}[1]`,value:se[1],valueSpec:i,style:J.style,styleSpec:J.styleSpec}))}function K(J,Q){const se=Nn(J.value),pe=ii(J.value),we=J.value!==null?J.value:Q;if(u){if(se!==u)return[new Vt(J.key,we,`${se} stop domain type must match previous stop domain type ${u}`)]}else u=se;if(se!=="number"&&se!=="string"&&se!=="boolean"&&typeof pe!="number"&&typeof pe!="string"&&typeof pe!="boolean")return[new Vt(J.key,we,"stop domain value must be a number, string, or boolean")];if(se!=="number"&&s!=="categorical"){let Ne=`number expected, ${se} found`;return vo(i)&&s===void 0&&(Ne+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Vt(J.key,we,Ne)]}return s!=="categorical"||se!=="number"||typeof pe=="number"&&isFinite(pe)&&Math.floor(pe)===pe?s!=="categorical"&&se==="number"&&typeof pe=="number"&&typeof m=="number"&&m!==void 0&&pe<m?[new Vt(J.key,we,"stop domain values must appear in ascending order")]:(m=pe,s==="categorical"&&pe in x?[new Vt(J.key,we,"stop domain values must be unique")]:(x[pe]=!0,[])):[new Vt(J.key,we,`integer expected, found ${String(pe)}`)]}}function tr(a){const i=(a.expressionContext==="property"?dl:bo)(Sr(a.value),a.valueSpec);if(i.result==="error")return i.value.map(u=>new Vt(`${a.key}${u.key}`,a.value,u.message));const s=i.value.expression||i.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!s.outputDefined())return[new Vt(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!$r(s))return[new Vt(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter")return hl(s,a);if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!Ko(s,["zoom","feature-state"]))return[new Vt(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!Gr(s))return[new Vt(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function hl(a,i){const s=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(i.valueSpec&&i.valueSpec.expression)for(const m of i.valueSpec.expression.parameters)s.delete(m);if(s.size===0)return[];const u=[];return a instanceof er&&s.has(a.name)?[new Vt(i.key,i.value,`["${a.name}"] expression is not supported in a filter for a ${i.object.type} layer with id: ${i.object.id}`)]:(a.eachChild(m=>{u.push(...hl(m,i))}),u)}function os(a){const i=a.key,s=a.value,u=a.valueSpec,m=[];return Array.isArray(u.values)?u.values.indexOf(ii(s))===-1&&m.push(new Vt(i,s,`expected one of [${u.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(u.values).indexOf(ii(s))===-1&&m.push(new Vt(i,s,`expected one of [${Object.keys(u.values).join(", ")}], ${JSON.stringify(s)} found`)),m}function ss(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const i of a.slice(1))if(!ss(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}function as(a,i="fill"){if(a==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};ss(a)||(a=ea(a));const s=a;let u=!0;try{u=function(z){if(!pr(z))return z;let G=Sr(z);return ml(G),G=Ec(G),G}(s)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(s,null,2)}
        `)}const m=st[`filter_${i}`],y=bo(u,m);let x=null;if(y.result==="error")throw new Error(y.value.map(z=>`${z.key}: ${z.message}`).join(", "));x=(z,G,H)=>y.value.evaluate(z,G,{},H);let k=null,I=null;if(u!==s){const z=bo(s,m);if(z.result==="error")throw new Error(z.value.map(G=>`${G.key}: ${G.message}`).join(", "));k=(G,H,K,J,Q)=>z.value.evaluate(G,H,{},K,void 0,void 0,J,Q),I=!Gr(z.value.expression)}return x=x,{filter:x,dynamicFilter:k||void 0,needGeometry:Cc(u),needFeature:!!I}}function Ec(a){if(!Array.isArray(a))return a;const i=function(s){if(Wu.has(s[0])){for(let u=1;u<s.length;u++)if(pr(s[u]))return!0}return s}(a);return i===!0?i:i.map(s=>Ec(s))}function ml(a){let i=!1;const s=[];if(a[0]==="case"){for(let u=1;u<a.length-1;u+=2)i=i||pr(a[u]),s.push(a[u+1]);s.push(a[a.length-1])}else if(a[0]==="match"){i=i||pr(a[1]);for(let u=2;u<a.length-1;u+=2)s.push(a[u+1]);s.push(a[a.length-1])}else if(a[0]==="step"){i=i||pr(a[1]);for(let u=1;u<a.length-1;u+=2)s.push(a[u+1])}i&&(a.length=0,a.push("any",...s));for(let u=1;u<a.length;u++)ml(a[u])}function pr(a){if(!Array.isArray(a))return!1;if((i=a[0])==="pitch"||i==="distance-from-center")return!0;var i;for(let s=1;s<a.length;s++)if(pr(a[s]))return!0;return!1}const Wu=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Zu(a,i){return a<i?-1:a>i?1:0}function Cc(a){if(!Array.isArray(a))return!1;if(a[0]==="within")return!0;for(let i=1;i<a.length;i++)if(Cc(a[i]))return!0;return!1}function ea(a){if(!a)return!0;const i=a[0];return a.length<=1?i!=="any":i==="=="?gl(a[1],a[2],"=="):i==="!="?xi(gl(a[1],a[2],"==")):i==="<"||i===">"||i==="<="||i===">="?gl(a[1],a[2],i):i==="any"?(s=a.slice(1),["any"].concat(s.map(ea))):i==="all"?["all"].concat(a.slice(1).map(ea)):i==="none"?["all"].concat(a.slice(1).map(ea).map(xi)):i==="in"?ls(a[1],a.slice(2)):i==="!in"?xi(ls(a[1],a.slice(2))):i==="has"?cs(a[1]):i==="!has"?xi(cs(a[1])):i!=="within"||a;var s}function gl(a,i,s){switch(a){case"$type":return[`filter-type-${s}`,i];case"$id":return[`filter-id-${s}`,i];default:return[`filter-${s}`,a,i]}}function ls(a,i){if(i.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(s=>typeof s!=typeof i[0])?["filter-in-large",a,["literal",i.sort(Zu)]]:["filter-in-small",a,["literal",i]]}}function cs(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function xi(a){return["!",a]}function Eo(a){return ss(Sr(a.value))?tr(zi({},a,{expressionContext:"filter",valueSpec:a.styleSpec[`filter_${a.layerType||"fill"}`]})):Sc(a)}function Sc(a){const i=a.value,s=a.key;if(Nn(i)!=="array")return[new Vt(s,i,`array expected, ${Nn(i)} found`)];const u=a.styleSpec;let m,y=[];if(i.length<1)return[new Vt(s,i,"filter array must have at least 1 element")];switch(y=y.concat(os({key:`${s}[0]`,value:i[0],valueSpec:u.filter_operator,style:a.style,styleSpec:a.styleSpec})),ii(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&ii(i[1])==="$type"&&y.push(new Vt(s,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&y.push(new Vt(s,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(m=Nn(i[1]),m!=="string"&&y.push(new Vt(`${s}[1]`,i[1],`string expected, ${m} found`)));for(let x=2;x<i.length;x++)m=Nn(i[x]),ii(i[1])==="$type"?y=y.concat(os({key:`${s}[${x}]`,value:i[x],valueSpec:u.geometry_type,style:a.style,styleSpec:a.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&y.push(new Vt(`${s}[${x}]`,i[x],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let x=1;x<i.length;x++)y=y.concat(Sc({key:`${s}[${x}]`,value:i[x],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":m=Nn(i[1]),i.length!==2?y.push(new Vt(s,i,`filter array for "${i[0]}" operator must have 2 elements`)):m!=="string"&&y.push(new Vt(`${s}[1]`,i[1],`string expected, ${m} found`));break;case"within":m=Nn(i[1]),i.length!==2?y.push(new Vt(s,i,`filter array for "${i[0]}" operator must have 2 elements`)):m!=="object"&&y.push(new Vt(`${s}[1]`,i[1],`object expected, ${m} found`))}return y}function Tc(a,i){const s=a.key,u=a.style,m=a.styleSpec,y=a.value,x=a.objectKey,k=m[`${i}_${a.layerType}`];if(!k)return[];const I=x.match(/^(.*)-transition$/);if(i==="paint"&&I&&k[I[1]]&&k[I[1]].transition)return mi({key:s,value:y,valueSpec:m.transition,style:u,styleSpec:m});const z=a.valueSpec||k[x];if(!z)return[new Vt(s,y,`unknown property "${x}"`)];let G;if(Nn(y)==="string"&&vo(z)&&!z.tokens&&(G=/^{([^}]+)}$/.exec(y)))return[new Vt(s,y,`"${x}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(G[1])} }\`.`)];const H=[];return a.layerType==="symbol"&&(x==="text-field"&&u&&!u.glyphs&&H.push(new Vt(s,y,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&Qo(Sr(y))&&ii(y.type)==="identity"&&H.push(new Vt(s,y,'"text-font" does not support identity functions'))),H.concat(mi({key:a.key,value:y,valueSpec:z,style:u,styleSpec:m,expressionContext:"property",propertyType:i,propertyKey:x}))}function Ac(a){return Tc(a,"paint")}function kc(a){return Tc(a,"layout")}function ta(a){let i=[];const s=a.value,u=a.key,m=a.style,y=a.styleSpec;s.type||s.ref||i.push(new Vt(u,s,'either "type" or "ref" is required'));let x=ii(s.type);const k=ii(s.ref);if(s.id){const I=ii(s.id);for(let z=0;z<a.arrayIndex;z++){const G=m.layers[z];ii(G.id)===I&&i.push(new Vt(u,s.id,`duplicate layer id "${s.id}", previously used at line ${G.id.__line__}`))}}if("ref"in s){let I;["type","source","source-layer","filter","layout"].forEach(z=>{z in s&&i.push(new Vt(u,s[z],`"${z}" is prohibited for ref layers`))}),m.layers.forEach(z=>{ii(z.id)===k&&(I=z)}),I?I.ref?i.push(new Vt(u,s.ref,"ref cannot reference another ref layer")):x=ii(I.type):typeof k=="string"&&i.push(new Vt(u,s.ref,`ref layer "${k}" not found`))}else if(x!=="background"&&x!=="sky")if(s.source){const I=m.sources&&m.sources[s.source],z=I&&ii(I.type);I?z==="vector"&&x==="raster"?i.push(new Vt(u,s.source,`layer "${s.id}" requires a raster source`)):z==="raster"&&x!=="raster"?i.push(new Vt(u,s.source,`layer "${s.id}" requires a vector source`)):z!=="vector"||s["source-layer"]?z==="raster-dem"&&x!=="hillshade"?i.push(new Vt(u,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]&&!s.paint["line-trim-offset"]||z==="geojson"&&I.lineMetrics||i.push(new Vt(u,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new Vt(u,s,`layer "${s.id}" must specify a "source-layer"`)):i.push(new Vt(u,s.source,`source "${s.source}" not found`))}else i.push(new Vt(u,s,'missing required property "source"'));return i=i.concat(Vi({key:u,value:s,valueSpec:y.layer,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":()=>[],type:()=>mi({key:`${u}.type`,value:s.type,valueSpec:y.layer.type,style:a.style,styleSpec:a.styleSpec,object:s,objectKey:"type"}),filter:I=>Eo(zi({layerType:x},I)),layout:I=>Vi({layer:s,key:I.key,value:I.value,valueSpec:{},style:I.style,styleSpec:I.styleSpec,objectElementValidators:{"*":z=>kc(zi({layerType:x},z))}}),paint:I=>Vi({layer:s,key:I.key,value:I.value,valueSpec:{},style:I.style,styleSpec:I.styleSpec,objectElementValidators:{"*":z=>Ac(zi({layerType:x},z))}})}})),i}function Co(a){const i=a.value,s=a.key,u=Nn(i);return u!=="string"?[new Vt(s,i,`string expected, ${u} found`)]:[]}const na={promoteId:function({key:a,value:i}){if(Nn(i)==="string")return Co({key:a,value:i});{const s=[];for(const u in i)s.push(...Co({key:`${a}.${u}`,value:i[u]}));return s}}};function Rc(a){const i=a.value,s=a.key,u=a.styleSpec,m=a.style;if(!i.type)return[new Vt(s,i,'"type" is required')];const y=ii(i.type);let x;switch(y){case"vector":case"raster":case"raster-dem":return x=Vi({key:s,value:i,valueSpec:u[`source_${y.replace("-","_")}`],style:a.style,styleSpec:u,objectElementValidators:na}),x;case"geojson":if(x=Vi({key:s,value:i,valueSpec:u.source_geojson,style:m,styleSpec:u,objectElementValidators:na}),i.cluster)for(const k in i.clusterProperties){const[I,z]=i.clusterProperties[k],G=typeof I=="string"?[I,["accumulated"],["get",k]]:I;x.push(...tr({key:`${s}.${k}.map`,value:z,expressionContext:"cluster-map"})),x.push(...tr({key:`${s}.${k}.reduce`,value:G,expressionContext:"cluster-reduce"}))}return x;case"video":return Vi({key:s,value:i,valueSpec:u.source_video,style:m,styleSpec:u});case"image":return Vi({key:s,value:i,valueSpec:u.source_image,style:m,styleSpec:u});case"canvas":return[new Vt(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return os({key:`${s}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,styleSpec:u})}}function $c(a){const i=a.value,s=a.styleSpec,u=s.light,m=a.style;let y=[];const x=Nn(i);if(i===void 0)return y;if(x!=="object")return y=y.concat([new Vt("light",i,`object expected, ${x} found`)]),y;for(const k in i){const I=k.match(/^(.*)-transition$/);y=y.concat(I&&u[I[1]]&&u[I[1]].transition?mi({key:k,value:i[k],valueSpec:s.transition,style:m,styleSpec:s}):u[k]?mi({key:k,value:i[k],valueSpec:u[k],style:m,styleSpec:s}):[new Vt(k,i[k],`unknown property "${k}"`)])}return y}function ia(a){const i=a.value,s=a.key,u=a.style,m=a.styleSpec,y=m.terrain;let x=[];const k=Nn(i);if(i===void 0)return x;if(k!=="object")return x=x.concat([new Vt("terrain",i,`object expected, ${k} found`)]),x;for(const I in i){const z=I.match(/^(.*)-transition$/);x=x.concat(z&&y[z[1]]&&y[z[1]].transition?mi({key:I,value:i[I],valueSpec:m.transition,style:u,styleSpec:m}):y[I]?mi({key:I,value:i[I],valueSpec:y[I],style:u,styleSpec:m}):[new Vt(I,i[I],`unknown property "${I}"`)])}if(i.source){const I=u.sources&&u.sources[i.source],z=I&&ii(I.type);I?z!=="raster-dem"&&x.push(new Vt(s,i.source,`terrain cannot be used with a source of type ${String(z)}, it only be used with a "raster-dem" source type`)):x.push(new Vt(s,i.source,`source "${i.source}" not found`))}else x.push(new Vt(s,i,'terrain is missing required property "source"'));return x}function Nc(a){const i=a.value,s=a.style,u=a.styleSpec,m=u.fog;let y=[];const x=Nn(i);if(i===void 0)return y;if(x!=="object")return y=y.concat([new Vt("fog",i,`object expected, ${x} found`)]),y;for(const k in i){const I=k.match(/^(.*)-transition$/);y=y.concat(I&&m[I[1]]&&m[I[1]].transition?mi({key:k,value:i[k],valueSpec:u.transition,style:s,styleSpec:u}):m[k]?mi({key:k,value:i[k],valueSpec:m[k],style:s,styleSpec:u}):[new Vt(k,i[k],`unknown property "${k}"`)])}return y}const _l={"*":()=>[],array:pl,boolean:function(a){const i=a.value,s=a.key,u=Nn(i);return u!=="boolean"?[new Vt(s,i,`boolean expected, ${u} found`)]:[]},number:fl,color:function(a){const i=a.key,s=a.value,u=Nn(s);return u!=="string"?[new Vt(i,s,`color expected, ${u} found`)]:Ar.parseCSSColor(s)===null?[new Vt(i,s,`color expected, "${s}" found`)]:[]},enum:os,filter:Eo,function:rs,layer:ta,object:Vi,source:Rc,light:$c,terrain:ia,fog:Nc,string:Co,formatted:function(a){return Co(a).length===0?[]:tr(a)},resolvedImage:function(a){return Co(a).length===0?[]:tr(a)},projection:function(a){const i=a.value,s=a.styleSpec,u=s.projection,m=a.style;let y=[];const x=Nn(i);if(x==="object")for(const k in i)y=y.concat(mi({key:k,value:i[k],valueSpec:u[k],style:m,styleSpec:s}));else x!=="string"&&(y=y.concat([new Vt("projection",i,`object or string expected, ${x} found`)]));return y}};function mi(a){const i=a.value,s=a.valueSpec,u=a.styleSpec;return s.expression&&Qo(ii(i))?rs(a):s.expression&&Qs(Sr(i))?tr(a):s.type&&_l[s.type]?_l[s.type](a):Vi(zi({},a,{valueSpec:s.type?u[s.type]:s}))}function Yu(a){const i=a.value,s=a.key,u=Co(a);return u.length||(i.indexOf("{fontstack}")===-1&&u.push(new Vt(s,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&u.push(new Vt(s,i,'"glyphs" url must include a "{range}" token'))),u}function ra(a,i=st){return fr(mi({key:"",value:a,valueSpec:i.$root,styleSpec:i,style:a,objectElementValidators:{glyphs:Yu,"*":()=>[]}}))}const oa=a=>fr(Ac(a)),Mc=a=>fr(kc(a));function fr(a){return a.slice().sort((i,s)=>i.line&&s.line?i.line-s.line:0)}function vl(a,i){let s=!1;if(i&&i.length)for(const u of i)a.fire(new On(new Error(u.message))),s=!0;return s}var So=Hi;function Hi(a,i,s){var u=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;var m=new Int32Array(this.arrayBuffer);a=m[0],this.d=(i=m[1])+2*(s=m[2]);for(var y=0;y<this.d*this.d;y++){var x=m[3+y],k=m[3+y+1];u.push(x===k?null:m.subarray(x,k))}var I=m[3+u.length+1];this.keys=m.subarray(m[3+u.length],I),this.bboxes=m.subarray(I),this.insert=this._insertReadonly}else{this.d=i+2*s;for(var z=0;z<this.d*this.d;z++)u.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=a,this.padding=s,this.scale=i/a,this.uid=0;var G=s/i*a;this.min=-G,this.max=a+G}Hi.prototype.insert=function(a,i,s,u,m){this._forEachCell(i,s,u,m,this._insertCell,this.uid++),this.keys.push(a),this.bboxes.push(i),this.bboxes.push(s),this.bboxes.push(u),this.bboxes.push(m)},Hi.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Hi.prototype._insertCell=function(a,i,s,u,m,y){this.cells[m].push(y)},Hi.prototype.query=function(a,i,s,u,m){var y=this.min,x=this.max;if(a<=y&&i<=y&&x<=s&&x<=u&&!m)return Array.prototype.slice.call(this.keys);var k=[];return this._forEachCell(a,i,s,u,this._queryCell,k,{},m),k},Hi.prototype._queryCell=function(a,i,s,u,m,y,x,k){var I=this.cells[m];if(I!==null)for(var z=this.keys,G=this.bboxes,H=0;H<I.length;H++){var K=I[H];if(x[K]===void 0){var J=4*K;(k?k(G[J+0],G[J+1],G[J+2],G[J+3]):a<=G[J+2]&&i<=G[J+3]&&s>=G[J+0]&&u>=G[J+1])?(x[K]=!0,y.push(z[K])):x[K]=!1}}},Hi.prototype._forEachCell=function(a,i,s,u,m,y,x,k){for(var I=this._convertToCellCoord(a),z=this._convertToCellCoord(i),G=this._convertToCellCoord(s),H=this._convertToCellCoord(u),K=I;K<=G;K++)for(var J=z;J<=H;J++){var Q=this.d*J+K;if((!k||k(this._convertFromCellCoord(K),this._convertFromCellCoord(J),this._convertFromCellCoord(K+1),this._convertFromCellCoord(J+1)))&&m.call(this,a,i,s,u,Q,y,x,k))return}},Hi.prototype._convertFromCellCoord=function(a){return(a-this.padding)/this.scale},Hi.prototype._convertToCellCoord=function(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))},Hi.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var a=this.cells,i=3+this.cells.length+1+1,s=0,u=0;u<this.cells.length;u++)s+=this.cells[u].length;var m=new Int32Array(i+s+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;for(var y=i,x=0;x<a.length;x++){var k=a[x];m[3+x]=y,m.set(k,y),y+=k.length}return m[3+a.length]=y,m.set(this.keys,y),m[3+a.length+1]=y+=this.keys.length,m.set(this.bboxes,y),y+=this.bboxes.length,m.buffer};const sa={};function qt(a,i,s={}){Object.defineProperty(a,"_classRegistryKey",{value:i,writeable:!1}),sa[i]={klass:a,omit:s.omit||[]}}qt(Object,"Object"),So.serialize=function(a,i){const s=a.toArrayBuffer();return i&&i.push(s),{buffer:s}},So.deserialize=function(a){return new So(a.buffer)},Object.defineProperty(So,"name",{value:"Grid"}),qt(So,"Grid"),qt(Pn,"Color"),qt(Error,"Error"),qt(We,"AJAXError"),qt(Li,"ResolvedImage"),qt(xo,"StylePropertyFunction"),qt(cl,"StyleExpression",{omit:["_evaluator"]}),qt(ns,"ZoomDependentExpression"),qt(ul,"ZoomConstantExpression"),qt(er,"CompoundExpression",{omit:["_evaluate"]});for(const a in Jo)sa[Jo[a]._classRegistryKey]||qt(Jo[a],`Expression${a}`);function Ic(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function Lc(a){return v.ImageBitmap&&a instanceof v.ImageBitmap}function To(a,i){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp)return a;if(Ic(a)||Lc(a))return i&&i.push(a),a;if(ArrayBuffer.isView(a)){const s=a;return i&&i.push(s.buffer),s}if(a instanceof v.ImageData)return i&&i.push(a.data.buffer),a;if(Array.isArray(a)){const s=[];for(const u of a)s.push(To(u,i));return s}if(typeof a=="object"){const s=a.constructor,u=s._classRegistryKey;if(!u)throw new Error(`can't serialize object of unregistered class ${u}`);const m=s.serialize?s.serialize(a,i):{};if(!s.serialize){for(const y in a)a.hasOwnProperty(y)&&(sa[u].omit.indexOf(y)>=0||(m[y]=To(a[y],i)));a instanceof Error&&(m.message=a.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(m.$name=u),m}throw new Error("can't serialize object of type "+typeof a)}function us(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||Ic(a)||Lc(a)||ArrayBuffer.isView(a)||a instanceof v.ImageData)return a;if(Array.isArray(a))return a.map(us);if(typeof a=="object"){const i=a.$name||"Object",{klass:s}=sa[i];if(!s)throw new Error(`can't deserialize unregistered class ${i}`);if(s.deserialize)return s.deserialize(a);const u=Object.create(s.prototype);for(const m of Object.keys(a))m!=="$name"&&(u[m]=us(a[m]));return u}throw new Error("can't deserialize object of type "+typeof a)}class Oc{constructor(){this.first=!0}update(i,s){const u=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=u,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=u,!0):(this.lastFloorZoom>u?(this.lastIntegerZoom=u+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<u&&(this.lastIntegerZoom=u,this.lastIntegerZoomTime=s),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=u,!0))}}const Pc=a=>a>=1536&&a<=1791,Dc=a=>a>=1872&&a<=1919,Bc=a=>a>=2208&&a<=2303,zc=a=>a>=11904&&a<=12031,Fc=a=>a>=12032&&a<=12255,ds=a=>a>=12272&&a<=12287,aa=a=>a>=12288&&a<=12351,yl=a=>a>=12352&&a<=12447,Hr=a=>a>=12448&&a<=12543,Vc=a=>a>=12544&&a<=12591,bl=a=>a>=12704&&a<=12735,Uc=a=>a>=12736&&a<=12783,xl=a=>a>=12784&&a<=12799,wl=a=>a>=12800&&a<=13055,El=a=>a>=13056&&a<=13311,Cl=a=>a>=13312&&a<=19903,ps=a=>a>=19968&&a<=40959,la=a=>a>=40960&&a<=42127,jc=a=>a>=42128&&a<=42191,Gc=a=>a>=44032&&a<=55215,qc=a=>a>=63744&&a<=64255,fs=a=>a>=64336&&a<=65023,Hc=a=>a>=65040&&a<=65055,Sl=a=>a>=65072&&a<=65103,Kc=a=>a>=65104&&a<=65135,Tl=a=>a>=65136&&a<=65279,Al=a=>a>=65280&&a<=65519;function ca(a){for(const i of a)if(ua(i.charCodeAt(0)))return!0;return!1}function Xu(a){for(const i of a)if(!Ju(i.charCodeAt(0)))return!1;return!0}function Ju(a){return!(Pc(a)||Dc(a)||Bc(a)||fs(a)||Tl(a))}function ua(a){return!(a!==746&&a!==747&&(a<4352||!(bl(a)||Vc(a)||Sl(a)&&!(a>=65097&&a<=65103)||qc(a)||El(a)||zc(a)||Uc(a)||!(!aa(a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||Cl(a)||ps(a)||wl(a)||(i=>i>=12592&&i<=12687)(a)||(i=>i>=43360&&i<=43391)(a)||(i=>i>=55216&&i<=55295)(a)||(i=>i>=4352&&i<=4607)(a)||Gc(a)||yl(a)||ds(a)||(i=>i>=12688&&i<=12703)(a)||Fc(a)||xl(a)||Hr(a)&&a!==12540||!(!Al(a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!Kc(a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||(i=>i>=5120&&i<=5759)(a)||(i=>i>=6320&&i<=6399)(a)||Hc(a)||(i=>i>=19904&&i<=19967)(a)||la(a)||jc(a))))}function hs(a){return!(ua(a)||function(i){return!!((s=>s>=128&&s<=255)(i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||(s=>s>=8192&&s<=8303)(i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||(s=>s>=8448&&s<=8527)(i)||(s=>s>=8528&&s<=8591)(i)||(s=>s>=8960&&s<=9215)(i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||(s=>s>=9216&&s<=9279)(i)&&i!==9251||(s=>s>=9280&&s<=9311)(i)||(s=>s>=9312&&s<=9471)(i)||(s=>s>=9632&&s<=9727)(i)||(s=>s>=9728&&s<=9983)(i)&&!(i>=9754&&i<=9759)||(s=>s>=11008&&s<=11263)(i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||aa(i)||Hr(i)||(s=>s>=57344&&s<=63743)(i)||Sl(i)||Kc(i)||Al(i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(a))}function _(a){return a>=1424&&a<=2303||fs(a)||Tl(a)}function l(a,i){return!(!i&&_(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||(s=>s>=6016&&s<=6143)(a))}function f(a){for(const i of a)if(_(i.charCodeAt(0)))return!0;return!1}const b="deferred",R="loading",M="loaded";let F=null,j="unavailable",q=null;const Y=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(j="error"),F&&F(a)};function X(){te.fire(new zn("pluginStateChange",{pluginStatus:j,pluginURL:q}))}const te=new tn,ue=function(){return j},ye=function(){if(j!==b||!q)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");j=R,X(),q&&Ye({url:q},a=>{a?Y(a):(j=M,X())})},he={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>j===M||he.applyArabicShaping!=null,isLoading:()=>j===R,setState(a){j=a.pluginStatus,q=a.pluginURL},isParsed:()=>he.applyArabicShaping!=null&&he.processBidirectionalText!=null&&he.processStyledBidirectionalText!=null,getPluginURL:()=>q};class me{constructor(i,s){this.zoom=i,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition,this.pitch=s.pitch):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Oc,this.transition={},this.pitch=0)}isSupportedScript(i){return function(s,u){for(const m of s)if(!l(m.charCodeAt(0),u))return!1;return!0}(i,he.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const i=this.zoom,s=i-Math.floor(i),u=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*u}:{fromScale:.5,toScale:1,t:1-(1-u)*s}}}class _e{constructor(i,s){this.property=i,this.value=s,this.expression=function(u,m){if(Qo(u))return new xo(u,m);if(Qs(u)){const y=dl(u,m);if(y.result==="error")throw new Error(y.value.map(x=>`${x.key}: ${x.message}`).join(", "));return y.value}{let y=u;return typeof u=="string"&&m.type==="color"&&(y=Pn.parse(u)),{kind:"constant",evaluate:()=>y}}}(s===void 0?i.specification.default:s,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,s,u){return this.property.possiblyEvaluate(this,i,s,u)}}class fe{constructor(i){this.property=i,this.value=new _e(i,void 0)}transitioned(i,s){return new be(this.property,this.value,s,le({},i.transition,this.transition),i.now)}untransitioned(){return new be(this.property,this.value,null,{},0)}}class Ce{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return xt(this._values[i].value.value)}setValue(i,s){this._values.hasOwnProperty(i)||(this._values[i]=new fe(this._values[i].property)),this._values[i].value=new _e(this._values[i].property,s===null?void 0:xt(s))}getTransition(i){return xt(this._values[i].transition)}setTransition(i,s){this._values.hasOwnProperty(i)||(this._values[i]=new fe(this._values[i].property)),this._values[i].transition=xt(s)||void 0}serialize(){const i={};for(const s of Object.keys(this._values)){const u=this.getValue(s);u!==void 0&&(i[s]=u);const m=this.getTransition(s);m!==void 0&&(i[`${s}-transition`]=m)}return i}transitioned(i,s){const u=new Be(this._properties);for(const m of Object.keys(this._values))u._values[m]=this._values[m].transitioned(i,s._values[m]);return u}untransitioned(){const i=new Be(this._properties);for(const s of Object.keys(this._values))i._values[s]=this._values[s].untransitioned();return i}}class be{constructor(i,s,u,m,y){const x=m.delay||0,k=m.duration||0;y=y||0,this.property=i,this.value=s,this.begin=y+x,this.end=this.begin+k,i.specification.transition&&(m.delay||m.duration)&&(this.prior=u)}possiblyEvaluate(i,s,u){const m=i.now||0,y=this.value.possiblyEvaluate(i,s,u),x=this.prior;if(x){if(m>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(m<this.begin)return x.possiblyEvaluate(i,s,u);{const k=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(i,s,u),y,D(k))}}return y}}class Be{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,s,u){const m=new De(this._properties);for(const y of Object.keys(this._values))m._values[y]=this._values[y].possiblyEvaluate(i,s,u);return m}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class Oe{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}getValue(i){return xt(this._values[i].value)}setValue(i,s){this._values[i]=new _e(this._values[i].property,s===null?void 0:xt(s))}serialize(){const i={};for(const s of Object.keys(this._values)){const u=this.getValue(s);u!==void 0&&(i[s]=u)}return i}possiblyEvaluate(i,s,u){const m=new De(this._properties);for(const y of Object.keys(this._values))m._values[y]=this._values[y].possiblyEvaluate(i,s,u);return m}}class $e{constructor(i,s,u){this.property=i,this.value=s,this.parameters=u}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,s,u,m){return this.property.evaluate(this.value,this.parameters,i,s,u,m)}}class De{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class Le{constructor(i){this.specification=i}possiblyEvaluate(i,s){return i.expression.evaluate(s)}interpolate(i,s,u){const m=Wo[this.specification.type];return m?m(i,s,u):i}}class Ge{constructor(i,s){this.specification=i,this.overrides=s}possiblyEvaluate(i,s,u,m){return new $e(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(s,null,{},u,m)}:i.expression,s)}interpolate(i,s,u){if(i.value.kind!=="constant"||s.value.kind!=="constant")return i;if(i.value.value===void 0||s.value.value===void 0)return new $e(this,{kind:"constant",value:void 0},i.parameters);const m=Wo[this.specification.type];return m?new $e(this,{kind:"constant",value:m(i.value.value,s.value.value,u)},i.parameters):i}evaluate(i,s,u,m,y,x){return i.kind==="constant"?i.value:i.evaluate(s,u,m,y,x)}}class Je extends Ge{possiblyEvaluate(i,s,u,m){if(i.value===void 0)return new $e(this,{kind:"constant",value:void 0},s);if(i.expression.kind==="constant"){const y=i.expression.evaluate(s,null,{},u,m),x=i.property.specification.type==="resolvedImage"&&typeof y!="string"?y.name:y,k=this._calculate(x,x,x,s);return new $e(this,{kind:"constant",value:k},s)}if(i.expression.kind==="camera"){const y=this._calculate(i.expression.evaluate({zoom:s.zoom-1}),i.expression.evaluate({zoom:s.zoom}),i.expression.evaluate({zoom:s.zoom+1}),s);return new $e(this,{kind:"constant",value:y},s)}return new $e(this,i.expression,s)}evaluate(i,s,u,m,y,x){if(i.kind==="source"){const k=i.evaluate(s,u,m,y,x);return this._calculate(k,k,k,s)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(s.zoom)-1},u,m),i.evaluate({zoom:Math.floor(s.zoom)},u,m),i.evaluate({zoom:Math.floor(s.zoom)+1},u,m),s):i.value}_calculate(i,s,u,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:i,to:s,other:u}:{from:u,to:s,other:i}}interpolate(i){return i}}class kt{constructor(i){this.specification=i}possiblyEvaluate(i,s,u,m){if(i.value!==void 0){if(i.expression.kind==="constant"){const y=i.expression.evaluate(s,null,{},u,m);return this._calculate(y,y,y,s)}return this._calculate(i.expression.evaluate(new me(Math.floor(s.zoom-1),s)),i.expression.evaluate(new me(Math.floor(s.zoom),s)),i.expression.evaluate(new me(Math.floor(s.zoom+1),s)),s)}}_calculate(i,s,u,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:i,to:s}:{from:u,to:s}}interpolate(i){return i}}class Ke{constructor(i){this.specification=i}possiblyEvaluate(i,s,u,m){return!!i.expression.evaluate(s,null,{},u,m)}interpolate(){return!1}}class pt{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const s=new me(0,{});for(const u in i){const m=i[u];m.specification.overridable&&this.overridableProperties.push(u);const y=this.defaultPropertyValues[u]=new _e(m,void 0),x=this.defaultTransitionablePropertyValues[u]=new fe(m);this.defaultTransitioningPropertyValues[u]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=y.possiblyEvaluate(s)}}}function _t(a,i){return 256*(a=Z(Math.floor(a),0,255))+Z(Math.floor(i),0,255)}qt(Ge,"DataDrivenProperty"),qt(Le,"DataConstantProperty"),qt(Je,"CrossFadedDataDrivenProperty"),qt(kt,"CrossFadedProperty"),qt(Ke,"ColorRampProperty");const It={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ot{constructor(i,s){this._structArray=i,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class $t{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,s){return i._trim(),s&&(i.isTransferred=!0,s.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const s=Object.create(this.prototype);return s.arrayBuffer=i.arrayBuffer,s.length=i.length,s.capacity=i.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function mt(a,i=1){let s=0,u=0;return{members:a.map(m=>{const y=It[m.type].BYTES_PER_ELEMENT,x=s=Pt(s,Math.max(i,y)),k=m.components||1;return u=Math.max(u,y),s+=y*k,{name:m.name,type:m.type,components:k,offset:x}}),size:Pt(s,Math.max(u,i)),alignment:i}}function Pt(a,i){return Math.ceil(a/i)*i}class Ot extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s){const u=this.length;return this.resize(u+1),this.emplace(u,i,s)}emplace(i,s,u){const m=2*i;return this.int16[m+0]=s,this.int16[m+1]=u,i}}Ot.prototype.bytesPerElement=4,qt(Ot,"StructArrayLayout2i4");class Kt extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,u){const m=this.length;return this.resize(m+1),this.emplace(m,i,s,u)}emplace(i,s,u,m){const y=3*i;return this.int16[y+0]=s,this.int16[y+1]=u,this.int16[y+2]=m,i}}Kt.prototype.bytesPerElement=6,qt(Kt,"StructArrayLayout3i6");class Qt extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,u,m){const y=this.length;return this.resize(y+1),this.emplace(y,i,s,u,m)}emplace(i,s,u,m,y){const x=4*i;return this.int16[x+0]=s,this.int16[x+1]=u,this.int16[x+2]=m,this.int16[x+3]=y,i}}Qt.prototype.bytesPerElement=8,qt(Qt,"StructArrayLayout4i8");class dn extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,u,m,y,x,k){const I=this.length;return this.resize(I+1),this.emplace(I,i,s,u,m,y,x,k)}emplace(i,s,u,m,y,x,k,I){const z=6*i,G=12*i,H=3*i;return this.int16[z+0]=s,this.int16[z+1]=u,this.uint8[G+4]=m,this.uint8[G+5]=y,this.uint8[G+6]=x,this.uint8[G+7]=k,this.float32[H+2]=I,i}}dn.prototype.bytesPerElement=12,qt(dn,"StructArrayLayout2i4ub1f12");class Cn extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,u,m){const y=this.length;return this.resize(y+1),this.emplace(y,i,s,u,m)}emplace(i,s,u,m,y){const x=4*i;return this.float32[x+0]=s,this.float32[x+1]=u,this.float32[x+2]=m,this.float32[x+3]=y,i}}Cn.prototype.bytesPerElement=16,qt(Cn,"StructArrayLayout4f16");class Wt extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s,u,m,y,x,k,I,z,G){const H=this.length;return this.resize(H+1),this.emplace(H,i,s,u,m,y,x,k,I,z,G)}emplace(i,s,u,m,y,x,k,I,z,G,H){const K=10*i;return this.uint16[K+0]=s,this.uint16[K+1]=u,this.uint16[K+2]=m,this.uint16[K+3]=y,this.uint16[K+4]=x,this.uint16[K+5]=k,this.uint16[K+6]=I,this.uint16[K+7]=z,this.uint16[K+8]=G,this.uint16[K+9]=H,i}}Wt.prototype.bytesPerElement=20,qt(Wt,"StructArrayLayout10ui20");class fn extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s,u,m,y,x,k,I){const z=this.length;return this.resize(z+1),this.emplace(z,i,s,u,m,y,x,k,I)}emplace(i,s,u,m,y,x,k,I,z){const G=8*i;return this.uint16[G+0]=s,this.uint16[G+1]=u,this.uint16[G+2]=m,this.uint16[G+3]=y,this.uint16[G+4]=x,this.uint16[G+5]=k,this.uint16[G+6]=I,this.uint16[G+7]=z,i}}fn.prototype.bytesPerElement=16,qt(fn,"StructArrayLayout8ui16");class kn extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,u,m,y,x){const k=this.length;return this.resize(k+1),this.emplace(k,i,s,u,m,y,x)}emplace(i,s,u,m,y,x,k){const I=6*i;return this.int16[I+0]=s,this.int16[I+1]=u,this.int16[I+2]=m,this.int16[I+3]=y,this.int16[I+4]=x,this.int16[I+5]=k,i}}kn.prototype.bytesPerElement=12,qt(kn,"StructArrayLayout6i12");class Kn extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s,u,m,y,x,k,I,z,G,H,K){const J=this.length;return this.resize(J+1),this.emplace(J,i,s,u,m,y,x,k,I,z,G,H,K)}emplace(i,s,u,m,y,x,k,I,z,G,H,K,J){const Q=12*i;return this.int16[Q+0]=s,this.int16[Q+1]=u,this.int16[Q+2]=m,this.int16[Q+3]=y,this.uint16[Q+4]=x,this.uint16[Q+5]=k,this.uint16[Q+6]=I,this.uint16[Q+7]=z,this.int16[Q+8]=G,this.int16[Q+9]=H,this.int16[Q+10]=K,this.int16[Q+11]=J,i}}Kn.prototype.bytesPerElement=24,qt(Kn,"StructArrayLayout4i4ui4i24");class ri extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,u,m,y,x){const k=this.length;return this.resize(k+1),this.emplace(k,i,s,u,m,y,x)}emplace(i,s,u,m,y,x,k){const I=10*i,z=5*i;return this.int16[I+0]=s,this.int16[I+1]=u,this.int16[I+2]=m,this.float32[z+2]=y,this.float32[z+3]=x,this.float32[z+4]=k,i}}ri.prototype.bytesPerElement=20,qt(ri,"StructArrayLayout3i3f20");class Dn extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const s=this.length;return this.resize(s+1),this.emplace(s,i)}emplace(i,s){return this.uint32[1*i+0]=s,i}}Dn.prototype.bytesPerElement=4,qt(Dn,"StructArrayLayout1ul4");class gi extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s,u,m,y,x,k,I,z,G,H,K,J){const Q=this.length;return this.resize(Q+1),this.emplace(Q,i,s,u,m,y,x,k,I,z,G,H,K,J)}emplace(i,s,u,m,y,x,k,I,z,G,H,K,J,Q){const se=20*i,pe=10*i;return this.int16[se+0]=s,this.int16[se+1]=u,this.int16[se+2]=m,this.int16[se+3]=y,this.int16[se+4]=x,this.float32[pe+3]=k,this.float32[pe+4]=I,this.float32[pe+5]=z,this.float32[pe+6]=G,this.int16[se+14]=H,this.uint32[pe+8]=K,this.uint16[se+18]=J,this.uint16[se+19]=Q,i}}gi.prototype.bytesPerElement=40,qt(gi,"StructArrayLayout5i4f1i1ul2ui40");class nr extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,u,m,y,x,k){const I=this.length;return this.resize(I+1),this.emplace(I,i,s,u,m,y,x,k)}emplace(i,s,u,m,y,x,k,I){const z=8*i;return this.int16[z+0]=s,this.int16[z+1]=u,this.int16[z+2]=m,this.int16[z+4]=y,this.int16[z+5]=x,this.int16[z+6]=k,this.int16[z+7]=I,i}}nr.prototype.bytesPerElement=16,qt(nr,"StructArrayLayout3i2i2i16");class hr extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,u,m,y){const x=this.length;return this.resize(x+1),this.emplace(x,i,s,u,m,y)}emplace(i,s,u,m,y,x){const k=4*i,I=8*i;return this.float32[k+0]=s,this.float32[k+1]=u,this.float32[k+2]=m,this.int16[I+6]=y,this.int16[I+7]=x,i}}hr.prototype.bytesPerElement=16,qt(hr,"StructArrayLayout2f1f2i16");class Wn extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,u,m){const y=this.length;return this.resize(y+1),this.emplace(y,i,s,u,m)}emplace(i,s,u,m,y){const x=12*i,k=3*i;return this.uint8[x+0]=s,this.uint8[x+1]=u,this.float32[k+1]=m,this.float32[k+2]=y,i}}Wn.prototype.bytesPerElement=12,qt(Wn,"StructArrayLayout2ub2f12");class Yn extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,u){const m=this.length;return this.resize(m+1),this.emplace(m,i,s,u)}emplace(i,s,u,m){const y=3*i;return this.float32[y+0]=s,this.float32[y+1]=u,this.float32[y+2]=m,i}}Yn.prototype.bytesPerElement=12,qt(Yn,"StructArrayLayout3f12");class bn extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s,u){const m=this.length;return this.resize(m+1),this.emplace(m,i,s,u)}emplace(i,s,u,m){const y=3*i;return this.uint16[y+0]=s,this.uint16[y+1]=u,this.uint16[y+2]=m,i}}bn.prototype.bytesPerElement=6,qt(bn,"StructArrayLayout3ui6");class ci extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,s,u,m,y,x,k,I,z,G,H,K,J,Q,se,pe,we,Ne,Se,ke,ze){const Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,i,s,u,m,y,x,k,I,z,G,H,K,J,Q,se,pe,we,Ne,Se,ke,ze)}emplace(i,s,u,m,y,x,k,I,z,G,H,K,J,Q,se,pe,we,Ne,Se,ke,ze,Ie){const nt=30*i,et=15*i,ut=60*i;return this.int16[nt+0]=s,this.int16[nt+1]=u,this.int16[nt+2]=m,this.float32[et+2]=y,this.float32[et+3]=x,this.uint16[nt+8]=k,this.uint16[nt+9]=I,this.uint32[et+5]=z,this.uint32[et+6]=G,this.uint32[et+7]=H,this.uint16[nt+16]=K,this.uint16[nt+17]=J,this.uint16[nt+18]=Q,this.float32[et+10]=se,this.float32[et+11]=pe,this.uint8[ut+48]=we,this.uint8[ut+49]=Ne,this.uint8[ut+50]=Se,this.uint32[et+13]=ke,this.int16[nt+28]=ze,this.uint8[ut+58]=Ie,i}}ci.prototype.bytesPerElement=60,qt(ci,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class wi extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,s,u,m,y,x,k,I,z,G,H,K,J,Q,se,pe,we,Ne,Se,ke,ze,Ie,nt,et,ut,Nt,it,ft,wt,ht){const Rt=this.length;return this.resize(Rt+1),this.emplace(Rt,i,s,u,m,y,x,k,I,z,G,H,K,J,Q,se,pe,we,Ne,Se,ke,ze,Ie,nt,et,ut,Nt,it,ft,wt,ht)}emplace(i,s,u,m,y,x,k,I,z,G,H,K,J,Q,se,pe,we,Ne,Se,ke,ze,Ie,nt,et,ut,Nt,it,ft,wt,ht,Rt){const Et=38*i,Dt=19*i;return this.int16[Et+0]=s,this.int16[Et+1]=u,this.int16[Et+2]=m,this.float32[Dt+2]=y,this.float32[Dt+3]=x,this.int16[Et+8]=k,this.int16[Et+9]=I,this.int16[Et+10]=z,this.int16[Et+11]=G,this.int16[Et+12]=H,this.int16[Et+13]=K,this.uint16[Et+14]=J,this.uint16[Et+15]=Q,this.uint16[Et+16]=se,this.uint16[Et+17]=pe,this.uint16[Et+18]=we,this.uint16[Et+19]=Ne,this.uint16[Et+20]=Se,this.uint16[Et+21]=ke,this.uint16[Et+22]=ze,this.uint16[Et+23]=Ie,this.uint16[Et+24]=nt,this.uint16[Et+25]=et,this.uint16[Et+26]=ut,this.uint16[Et+27]=Nt,this.uint16[Et+28]=it,this.uint32[Dt+15]=ft,this.float32[Dt+16]=wt,this.float32[Dt+17]=ht,this.float32[Dt+18]=Rt,i}}wi.prototype.bytesPerElement=76,qt(wi,"StructArrayLayout3i2f6i15ui1ul3f76");class jn extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const s=this.length;return this.resize(s+1),this.emplace(s,i)}emplace(i,s){return this.float32[1*i+0]=s,i}}jn.prototype.bytesPerElement=4,qt(jn,"StructArrayLayout1f4");class Ei extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,u,m,y){const x=this.length;return this.resize(x+1),this.emplace(x,i,s,u,m,y)}emplace(i,s,u,m,y,x){const k=5*i;return this.float32[k+0]=s,this.float32[k+1]=u,this.float32[k+2]=m,this.float32[k+3]=y,this.float32[k+4]=x,i}}Ei.prototype.bytesPerElement=20,qt(Ei,"StructArrayLayout5f20");class Kr extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s,u,m){const y=this.length;return this.resize(y+1),this.emplace(y,i,s,u,m)}emplace(i,s,u,m,y){const x=6*i;return this.uint32[3*i+0]=s,this.uint16[x+2]=u,this.uint16[x+3]=m,this.uint16[x+4]=y,i}}Kr.prototype.bytesPerElement=12,qt(Kr,"StructArrayLayout1ul3ui12");class Ri extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s){const u=this.length;return this.resize(u+1),this.emplace(u,i,s)}emplace(i,s,u){const m=2*i;return this.uint16[m+0]=s,this.uint16[m+1]=u,i}}Ri.prototype.bytesPerElement=4,qt(Ri,"StructArrayLayout2ui4");class Wr extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const s=this.length;return this.resize(s+1),this.emplace(s,i)}emplace(i,s){return this.uint16[1*i+0]=s,i}}Wr.prototype.bytesPerElement=2,qt(Wr,"StructArrayLayout1ui2");class Zr extends $t{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s){const u=this.length;return this.resize(u+1),this.emplace(u,i,s)}emplace(i,s,u){const m=2*i;return this.float32[m+0]=s,this.float32[m+1]=u,i}}Zr.prototype.bytesPerElement=8,qt(Zr,"StructArrayLayout2f8");class Yr extends ot{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}Yr.prototype.size=12;class $i extends kn{get(i){return new Yr(this,i)}}qt($i,"FillExtrusionExtArray");class Xr extends ot{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Xr.prototype.size=40;class Ir extends gi{get(i){return new Xr(this,i)}}qt(Ir,"CollisionBoxArray");class gs extends ot{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(i){this._structArray.uint8[this._pos1+49]=i}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(i){this._structArray.uint8[this._pos1+50]=i}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(i){this._structArray.uint32[this._pos4+13]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(i){this._structArray.uint8[this._pos1+58]=i}}gs.prototype.size=60;class op extends ci{get(i){return new gs(this,i)}}qt(op,"PlacedSymbolArray");class sp extends ot{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(i){this._structArray.uint32[this._pos4+15]=i}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}sp.prototype.size=76;class ap extends wi{get(i){return new sp(this,i)}}qt(ap,"SymbolInstanceArray");class lp extends jn{getoffsetX(i){return this.float32[1*i+0]}}qt(lp,"GlyphOffsetArray");class cp extends Kt{getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}qt(cp,"SymbolLineVertexArray");class up extends ot{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}up.prototype.size=12;class dp extends Kr{get(i){return new up(this,i)}}qt(dp,"FeatureIndexArray");class pp extends ot{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}pp.prototype.size=4;class fp extends Ri{get(i){return new pp(this,i)}}qt(fp,"FillExtrusionCentroidArray");class hp extends ot{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}hp.prototype.size=12;class mp extends kn{get(i){return new hp(this,i)}}qt(mp,"CircleGlobeExtArray");const Lh=mt([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),Oh=mt([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var gp=Na(function(a){a.exports=function(i,s){var u,m,y,x,k,I,z,G;for(m=i.length-(u=3&i.length),y=s,k=3432918353,I=461845907,G=0;G<m;)z=255&i.charCodeAt(G)|(255&i.charCodeAt(++G))<<8|(255&i.charCodeAt(++G))<<16|(255&i.charCodeAt(++G))<<24,++G,y=27492+(65535&(x=5*(65535&(y=(y^=z=(65535&(z=(z=(65535&z)*k+(((z>>>16)*k&65535)<<16)&4294967295)<<15|z>>>17))*I+(((z>>>16)*I&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(z=0,u){case 3:z^=(255&i.charCodeAt(G+2))<<16;case 2:z^=(255&i.charCodeAt(G+1))<<8;case 1:y^=z=(65535&(z=(z=(65535&(z^=255&i.charCodeAt(G)))*k+(((z>>>16)*k&65535)<<16)&4294967295)<<15|z>>>17))*I+(((z>>>16)*I&65535)<<16)&4294967295}return y^=i.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0}}),Ph=Na(function(a){a.exports=function(i,s){for(var u,m=i.length,y=s^m,x=0;m>=4;)u=1540483477*(65535&(u=255&i.charCodeAt(x)|(255&i.charCodeAt(++x))<<8|(255&i.charCodeAt(++x))<<16|(255&i.charCodeAt(++x))<<24))+((1540483477*(u>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),m-=4,++x;switch(m){case 3:y^=(255&i.charCodeAt(x+2))<<16;case 2:y^=(255&i.charCodeAt(x+1))<<8;case 1:y=1540483477*(65535&(y^=255&i.charCodeAt(x)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0}}),kl=gp,Dh=Ph;kl.murmur3=gp,kl.murmur2=Dh;class Wc{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,s,u,m){this.ids.push(_p(i)),this.positions.push(s,u,m)}getPositions(i){const s=_p(i);let u=0,m=this.ids.length-1;for(;u<m;){const x=u+m>>1;this.ids[x]>=s?m=x:u=x+1}const y=[];for(;this.ids[u]===s;)y.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return y}static serialize(i,s){const u=new Float64Array(i.ids),m=new Uint32Array(i.positions);return Qu(u,m,0,u.length-1),s&&s.push(u.buffer,m.buffer),{ids:u,positions:m}}static deserialize(i){const s=new Wc;return s.ids=i.ids,s.positions=i.positions,s.indexed=!0,s}}function _p(a){const i=+a;return!isNaN(i)&&Number.MIN_SAFE_INTEGER<=i&&i<=Number.MAX_SAFE_INTEGER?i:kl(String(a))}function Qu(a,i,s,u){for(;s<u;){const m=a[s+u>>1];let y=s-1,x=u+1;for(;;){do y++;while(a[y]<m);do x--;while(a[x]>m);if(y>=x)break;Zc(a,y,x),Zc(i,3*y,3*x),Zc(i,3*y+1,3*x+1),Zc(i,3*y+2,3*x+2)}x-s<u-x?(Qu(a,i,s,x),s=x+1):(Qu(a,i,x+1,u),u=x)}}function Zc(a,i,s){const u=a[i];a[i]=a[s],a[s]=u}qt(Wc,"FeaturePositionMap");class Jr{constructor(i){this.gl=i.gl,this.initialized=!1}fetchUniformLocation(i,s){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(i,s),this.initialized=!0),!!this.location}}class Yc extends Jr{constructor(i){super(i),this.current=0}set(i,s,u){this.fetchUniformLocation(i,s)&&this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class vp extends Jr{constructor(i){super(i),this.current=[0,0,0,0]}set(i,s,u){this.fetchUniformLocation(i,s)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3])))}}class yp extends Jr{constructor(i){super(i),this.current=Pn.transparent}set(i,s,u){this.fetchUniformLocation(i,s)&&(u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a)))}}const Bh=new Float32Array(16),zh=new Float32Array(9),Fh=new Float32Array(4);function ed(a){return[_t(255*a.r,255*a.g),_t(255*a.b,255*a.a)]}class Rl{constructor(i,s,u){this.value=i,this.uniformNames=s.map(m=>`u_${m}`),this.type=u}setUniform(i,s,u,m,y){s.set(i,y,m.constantOr(this.value))}getBinding(i,s){return this.type==="color"?new yp(i):new Yc(i)}}class da{constructor(i,s){this.uniformNames=s.map(u=>`u_${u}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,s){this.pixelRatioFrom=s.pixelRatio||1,this.pixelRatioTo=i.pixelRatio||1,this.patternFrom=s.tl.concat(s.br),this.patternTo=i.tl.concat(i.br)}setUniform(i,s,u,m,y){const x=y==="u_pattern_to"||y==="u_dash_to"?this.patternTo:y==="u_pattern_from"||y==="u_dash_from"?this.patternFrom:y==="u_pixel_ratio_to"?this.pixelRatioTo:y==="u_pixel_ratio_from"?this.pixelRatioFrom:null;x&&s.set(i,y,x)}getBinding(i,s){return s==="u_pattern_from"||s==="u_pattern_to"||s==="u_dash_from"||s==="u_dash_to"?new vp(i):new Yc(i)}}class Qr{constructor(i,s,u,m){this.expression=i,this.type=u,this.maxValue=0,this.paintVertexAttributes=s.map(y=>({name:`a_${y}`,type:"Float32",components:u==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(i,s,u,m,y,x){const k=this.paintVertexArray.length,I=this.expression.evaluate(new me(0),s,{},y,m,x);this.paintVertexArray.resize(i),this._setPaintValue(k,i,I)}updatePaintArray(i,s,u,m,y){const x=this.expression.evaluate({zoom:0},u,m,void 0,y);this._setPaintValue(i,s,x)}_setPaintValue(i,s,u){if(this.type==="color"){const m=ed(u);for(let y=i;y<s;y++)this.paintVertexArray.emplace(y,m[0],m[1])}else{for(let m=i;m<s;m++)this.paintVertexArray.emplace(m,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class mr{constructor(i,s,u,m,y,x){this.expression=i,this.uniformNames=s.map(k=>`u_${k}_t`),this.type=u,this.useIntegerZoom=m,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=s.map(k=>({name:`a_${k}`,type:"Float32",components:u==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(i,s,u,m,y,x){const k=this.expression.evaluate(new me(this.zoom),s,{},y,m,x),I=this.expression.evaluate(new me(this.zoom+1),s,{},y,m,x),z=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(z,i,k,I)}updatePaintArray(i,s,u,m,y){const x=this.expression.evaluate({zoom:this.zoom},u,m,void 0,y),k=this.expression.evaluate({zoom:this.zoom+1},u,m,void 0,y);this._setPaintValue(i,s,x,k)}_setPaintValue(i,s,u,m){if(this.type==="color"){const y=ed(u),x=ed(m);for(let k=i;k<s;k++)this.paintVertexArray.emplace(k,y[0],y[1],x[0],x[1])}else{for(let y=i;y<s;y++)this.paintVertexArray.emplace(y,u,m);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(m))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,s,u,m,y){const x=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,k=Z(this.expression.interpolationFactor(x,this.zoom,this.zoom+1),0,1);s.set(i,y,k)}getBinding(i,s){return new Yc(i)}}class Ao{constructor(i,s,u,m,y,x,k){this.expression=i,this.type=u,this.useIntegerZoom=m,this.zoom=y,this.layerId=k,this.paintVertexAttributes=(u==="array"?Oh:Lh).members;for(let I=0;I<s.length;++I);this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(i,s,u){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(m,i,s.patterns&&s.patterns[this.layerId],u)}updatePaintArray(i,s,u,m,y,x){this._setPaintValues(i,s,u.patterns&&u.patterns[this.layerId],x)}_setPaintValues(i,s,u,m){if(!m||!u)return;const{min:y,mid:x,max:k}=u,I=m[y],z=m[x],G=m[k];if(I&&z&&G)for(let H=i;H<s;H++)this._setPaintValue(this.zoomInPaintVertexArray,H,z,I),this._setPaintValue(this.zoomOutPaintVertexArray,H,z,G)}_setPaintValue(i,s,u,m){i.emplace(s,u.tl[0],u.tl[1],u.br[0],u.br[1],m.tl[0],m.tl[1],m.br[0],m.br[1],u.pixelRatio,m.pixelRatio)}upload(i){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ko{constructor(i,s,u=()=>!0){this.binders={},this._buffers=[];const m=[];for(const y in i.paint._values){if(!u(y))continue;const x=i.paint.get(y);if(!(x instanceof $e&&vo(x.property.specification)))continue;const k=Uh(y,i.type),I=x.value,z=x.property.specification.type,G=x.property.useIntegerZoom,H=x.property.specification["property-type"],K=H==="cross-faded"||H==="cross-faded-data-driven",J=String(y)==="line-dasharray"&&i.layout.get("line-cap").value.kind!=="constant";if(I.kind!=="constant"||J)if(I.kind==="source"||J||K){const Q=bp(y,z,"source");this.binders[y]=K?new Ao(I,k,z,G,s,Q,i.id):new Qr(I,k,z,Q),m.push(`/a_${y}`)}else{const Q=bp(y,z,"composite");this.binders[y]=new mr(I,k,z,G,s,Q),m.push(`/z_${y}`)}else this.binders[y]=K?new da(I.value,k):new Rl(I.value,k,z),m.push(`/u_${y}`)}this.cacheKey=m.sort().join("")}getMaxValue(i){const s=this.binders[i];return s instanceof Qr||s instanceof mr?s.maxValue:0}populatePaintArrays(i,s,u,m,y,x){for(const k in this.binders){const I=this.binders[k];(I instanceof Qr||I instanceof mr||I instanceof Ao)&&I.populatePaintArray(i,s,u,m,y,x)}}setConstantPatternPositions(i,s){for(const u in this.binders){const m=this.binders[u];m instanceof da&&m.setConstantPatternPositions(i,s)}}updatePaintArrays(i,s,u,m,y,x){let k=!1;for(const I in i){const z=s.getPositions(I);for(const G of z){const H=u.feature(G.index);for(const K in this.binders){const J=this.binders[K];if((J instanceof Qr||J instanceof mr||J instanceof Ao)&&J.expression.isStateDependent===!0){const Q=m.paint.get(K);J.expression=Q.value,J.updatePaintArray(G.start,G.end,H,i[I],y,x),k=!0}}}}return k}defines(){const i=[];for(const s in this.binders){const u=this.binders[s];(u instanceof Rl||u instanceof da)&&i.push(...u.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return i}getBinderAttributes(){const i=[];for(const s in this.binders){const u=this.binders[s];if(u instanceof Qr||u instanceof mr||u instanceof Ao)for(let m=0;m<u.paintVertexAttributes.length;m++)i.push(u.paintVertexAttributes[m].name)}return i}getBinderUniforms(){const i=[];for(const s in this.binders){const u=this.binders[s];if(u instanceof Rl||u instanceof da||u instanceof mr)for(const m of u.uniformNames)i.push(m)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i){const s=[];for(const u in this.binders){const m=this.binders[u];if(m instanceof Rl||m instanceof da||m instanceof mr)for(const y of m.uniformNames)s.push({name:y,property:u,binding:m.getBinding(i,y)})}return s}setUniforms(i,s,u,m,y){for(const{name:x,property:k,binding:I}of u)this.binders[k].setUniform(i,I,y,m.get(k),x)}updatePaintBuffers(i){this._buffers=[];for(const s in this.binders){const u=this.binders[s];if(i&&u instanceof Ao){const m=i.fromScale===2?u.zoomInPaintVertexBuffer:u.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(u instanceof Qr||u instanceof mr)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(i){for(const s in this.binders){const u=this.binders[s];(u instanceof Qr||u instanceof mr||u instanceof Ao)&&u.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const s=this.binders[i];(s instanceof Qr||s instanceof mr||s instanceof Ao)&&s.destroy()}}}class _s{constructor(i,s,u=()=>!0){this.programConfigurations={};for(const m of i)this.programConfigurations[m.id]=new ko(m,s,u);this.needsUpload=!1,this._featureMap=new Wc,this._bufferOffset=0}populatePaintArrays(i,s,u,m,y,x,k){for(const I in this.programConfigurations)this.programConfigurations[I].populatePaintArrays(i,s,m,y,x,k);s.id!==void 0&&this._featureMap.add(s.id,u,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,s,u,m,y){for(const x of u)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(i,this._featureMap,s,x,m,y)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}const Vh={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function Uh(a,i){return Vh[a]||[a.replace(`${i}-`,"").replace(/-/g,"_")]}const jh={"line-pattern":{source:Wt,composite:Wt},"fill-pattern":{source:Wt,composite:Wt},"fill-extrusion-pattern":{source:Wt,composite:Wt},"line-dasharray":{source:fn,composite:fn}},Gh={color:{source:Zr,composite:Cn},number:{source:jn,composite:Zr}};function bp(a,i,s){const u=jh[a];return u&&u[s]||Gh[i][s]}qt(Rl,"ConstantBinder"),qt(da,"CrossFadedConstantBinder"),qt(Qr,"SourceExpressionBinder"),qt(Ao,"CrossFadedCompositeBinder"),qt(mr,"CompositeExpressionBinder"),qt(ko,"ProgramConfiguration",{omit:["_buffers"]}),qt(_s,"ProgramConfigurationSet");const Xc="-transition";class gr extends tn{constructor(i,s){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,i.type!=="custom"&&(this.metadata=(i=i).metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&i.type!=="sky"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),s.layout&&(this._unevaluatedLayout=new Oe(s.layout)),s.paint)){this._transitionablePaint=new Ce(s.paint);for(const u in i.paint)this.setPaintProperty(u,i.paint[u],{validate:!1});for(const u in i.layout)this.setLayoutProperty(u,i.layout[u],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new De(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,s,u={}){s!=null&&this._validate(Mc,`layers.${this.id}.layout.${i}`,i,s,u)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,s):this.visibility=s)}getPaintProperty(i){return Me(i,Xc)?this._transitionablePaint.getTransition(i.slice(0,-Xc.length)):this._transitionablePaint.getValue(i)}setPaintProperty(i,s,u={}){if(s!=null&&this._validate(oa,`layers.${this.id}.paint.${i}`,i,s,u))return!1;if(Me(i,Xc))return this._transitionablePaint.setTransition(i.slice(0,-Xc.length),s||void 0),!1;{const m=this._transitionablePaint._values[i],y=m.property.specification["property-type"]==="cross-faded-data-driven",x=m.value.isDataDriven(),k=m.value;this._transitionablePaint.setValue(i,s),this._handleSpecialPaintPropertyUpdate(i);const I=this._transitionablePaint._values[i].value;return I.isDataDriven()||x||y||this._handleOverridablePaintPropertyUpdate(i,k,I)}}_handleSpecialPaintPropertyUpdate(i){}getProgramIds(){return null}getProgramConfiguration(i){return null}_handleOverridablePaintPropertyUpdate(i,s,u){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,s){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,s)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),Ze(i,(s,u)=>!(s===void 0||u==="layout"&&!Object.keys(s).length||u==="paint"&&!Object.keys(s).length))}_validate(i,s,u,m,y={}){return(!y||y.validate!==!1)&&vl(this,i.call(ra,{key:s,layerType:this.type,objectKey:u,value:m,styleSpec:st,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const s=this.paint.get(i);if(s instanceof $e&&vo(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=as(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const qh=mt([{name:"a_pos",components:2,type:"Int16"}],4),Hh=mt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class di{constructor(i=[]){this.segments=i}prepareSegment(i,s,u,m){let y=this.segments[this.segments.length-1];return i>di.MAX_VERTEX_ARRAY_LENGTH&&Zt(`Max vertices per segment is ${di.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!y||y.vertexLength+i>di.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==m)&&(y={vertexOffset:s.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0},m!==void 0&&(y.sortKey=m),this.segments.push(y)),y}get(){return this.segments}destroy(){for(const i of this.segments)for(const s in i.vaos)i.vaos[s].destroy()}static simpleSegment(i,s,u,m){return new di([{vertexOffset:i,primitiveOffset:s,vertexLength:u,primitiveLength:m,vaos:{},sortKey:0}])}}di.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,qt(di,"SegmentVector");var an=8192;class Ro{constructor(i,s){i&&(s?this.setSouthWest(i).setNorthEast(s):i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1]))}setNorthEast(i){return this._ne=i instanceof In?new In(i.lng,i.lat):In.convert(i),this}setSouthWest(i){return this._sw=i instanceof In?new In(i.lng,i.lat):In.convert(i),this}extend(i){const s=this._sw,u=this._ne;let m,y;if(i instanceof In)m=i,y=i;else{if(!(i instanceof Ro))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Ro.convert(i)):this.extend(In.convert(i)):this;if(m=i._sw,y=i._ne,!m||!y)return this}return s||u?(s.lng=Math.min(m.lng,s.lng),s.lat=Math.min(m.lat,s.lat),u.lng=Math.max(y.lng,u.lng),u.lat=Math.max(y.lat,u.lat)):(this._sw=new In(m.lng,m.lat),this._ne=new In(y.lng,y.lat)),this}getCenter(){return new In((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new In(this.getWest(),this.getNorth())}getSouthEast(){return new In(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:s,lat:u}=In.convert(i);let m=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&m}static convert(i){return!i||i instanceof Ro?i:new Ro(i)}}const td=63710088e-1;class In{constructor(i,s){if(isNaN(i)||isNaN(s))throw new Error(`Invalid LngLat object: (${i}, ${s})`);if(this.lng=+i,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new In(ae(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const s=Math.PI/180,u=this.lat*s,m=i.lat*s,y=Math.sin(u)*Math.sin(m)+Math.cos(u)*Math.cos(m)*Math.cos((i.lng-this.lng)*s);return td*Math.acos(Math.min(y,1))}toBounds(i=0){const s=360*i/40075017,u=s/Math.cos(Math.PI/180*this.lat);return new Ro(new In(this.lng-u,this.lat-s),new In(this.lng+u,this.lat+s))}static convert(i){if(i instanceof In)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new In(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new In(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const xp=2*Math.PI*td;function nd(a){return xp*Math.cos(a*Math.PI/180)}function Lr(a){return(180+a)/360}function eo(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function sr(a,i){return a/nd(i)}function ar(a){return 360*a-180}function Ci(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}function wp(a,i){return a*nd(Ci(i))}const Or=85.051129;function Ep(a){return 1/Math.cos(a*Math.PI/180)}class pa{constructor(i,s,u=0){this.x=+i,this.y=+s,this.z=+u}static fromLngLat(i,s=0){const u=In.convert(i);return new pa(Lr(u.lng),eo(u.lat),sr(s,u.lat))}toLngLat(){return new In(ar(this.x),Ci(this.y))}toAltitude(){return wp(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/xp*Ep(Ci(this.y))}}function id(a,i,s,u,m,y,x,k,I){const z=(i+u)/2,G=(s+m)/2,H=new T(z,G);k(H),function(K,J,Q,se,pe,we){const Ne=Q-pe,Se=se-we;return Math.abs((se-J)*Ne-(Q-K)*Se)/Math.hypot(Ne,Se)}(H.x,H.y,y.x,y.y,x.x,x.y)>=I?(id(a,i,s,z,G,y,H,k,I),id(a,z,G,u,m,H,x,k,I)):a.push(x)}function Cp(a,i,s){let u=a[0],m=u.x,y=u.y;i(u);const x=[u];for(let k=1;k<a.length;k++){const I=a[k],{x:z,y:G}=I;i(I),id(x,m,y,z,G,u,I,i,s),m=z,y=G,u=I}return x}function rd(a,i,s,u,m){if(m(i,s)){const y=i.add(s).mult(.5);u(y),rd(a,i,y,u,m),rd(a,y,s,u,m)}else a.push(s)}function Kh(a,i,s){let u=a[0];i(u);const m=[u];for(let y=1;y<a.length;y++){const x=a[y];i(x),rd(m,u,x,i,s),u=x}return m}const od=Math.pow(2,14)-1,Sp=-od-1;function Wh(a,i){const s=Math.round(a.x*i),u=Math.round(a.y*i);return a.x=Z(s,Sp,od),a.y=Z(u,Sp,od),(s<a.x||s>a.x+1||u<a.y||u>a.y+1)&&Zt("Geometry exceeds allowed extent, reduce your vector tile buffer size"),a}function to(a,i,s){const u=a.loadGeometry(),m=a.extent,y=an/m;if(i&&s&&s.projection.isReprojectedInTileSpace){const x=1<<i.z,{scale:k,x:I,y:z,projection:G}=s,H=K=>{const J=ar((i.x+K.x/m)/x),Q=Ci((i.y+K.y/m)/x),se=G.project(J,Q);K.x=(se.x*k-I)*m,K.y=(se.y*k-z)*m};for(let K=0;K<u.length;K++)if(a.type!==1)u[K]=Cp(u[K],H,1);else{const J=[];for(const Q of u[K])Q.x<0||Q.x>=m||Q.y<0||Q.y>=m||(H(Q),J.push(Q));u[K]=J}}for(const x of u)for(const k of x)Wh(k,y);return u}function vs(a,i){return{type:a.type,id:a.id,properties:a.properties,geometry:i?to(a):[]}}function Jc(a,i,s,u,m){a.emplaceBack(2*i+(u+1)/2,2*s+(m+1)/2)}function Qc(a,i,s){a.emplaceBack(i.x,i.y,i.z,s[0]*16384,s[1]*16384,s[2]*16384)}class sd{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(s=>s.id),this.index=i.index,this.hasPattern=!1,this.projection=i.projection,this.layoutVertexArray=new Ot,this.indexArray=new bn,this.segments=new di,this.programConfigurations=new _s(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(i,s,u,m){const y=this.layers[0],x=[];let k=null;y.type==="circle"&&(k=y.layout.get("circle-sort-key"));for(const{feature:z,id:G,index:H,sourceLayerIndex:K}of i){const J=this.layers[0]._featureFilter.needGeometry,Q=vs(z,J);if(!this.layers[0]._featureFilter.filter(new me(this.zoom),Q,u))continue;const se=k?k.evaluate(Q,{},u):void 0,pe={id:G,properties:z.properties,type:z.type,sourceLayerIndex:K,index:H,geometry:J?Q.geometry:to(z,u,m),patterns:{},sortKey:se};x.push(pe)}k&&x.sort((z,G)=>z.sortKey-G.sortKey);let I=null;m.projection.name==="globe"&&(this.globeExtVertexArray=new mp,I=m.projection);for(const z of x){const{geometry:G,index:H,sourceLayerIndex:K}=z,J=i[H].feature;this.addFeature(z,G,H,s.availableImages,u,I),s.featureIndex.insert(J,G,H,K,this.index)}}update(i,s,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,s,this.stateDependentLayers,u,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,qh.members),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,Hh.members))),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(i,s,u,m,y,x){for(const k of s)for(const I of k){const z=I.x,G=I.y;if(z<0||z>=an||G<0||G>=an)continue;if(x){const J=x.projectTilePoint(z,G,y),Q=x.upVector(y,z,G),se=this.globeExtVertexArray;Qc(se,J,Q),Qc(se,J,Q),Qc(se,J,Q),Qc(se,J,Q)}const H=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),K=H.vertexLength;Jc(this.layoutVertexArray,z,G,-1,-1),Jc(this.layoutVertexArray,z,G,1,-1),Jc(this.layoutVertexArray,z,G,1,1),Jc(this.layoutVertexArray,z,G,-1,1),this.indexArray.emplaceBack(K,K+1,K+2),this.indexArray.emplaceBack(K,K+2,K+3),H.vertexLength+=4,H.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,u,{},m,y)}}function Tp(a,i){for(let s=0;s<a.length;s++)if(ys(i,a[s]))return!0;for(let s=0;s<i.length;s++)if(ys(a,i[s]))return!0;return!!ad(a,i)}function Zh(a,i,s){return!!ys(a,i)||!!ld(i,a,s)}function Ap(a,i){if(a.length===1)return Rp(i,a[0]);for(let s=0;s<i.length;s++){const u=i[s];for(let m=0;m<u.length;m++)if(ys(a,u[m]))return!0}for(let s=0;s<a.length;s++)if(Rp(i,a[s]))return!0;for(let s=0;s<i.length;s++)if(ad(a,i[s]))return!0;return!1}function Yh(a,i,s){if(a.length>1){if(ad(a,i))return!0;for(let u=0;u<i.length;u++)if(ld(i[u],a,s))return!0}for(let u=0;u<a.length;u++)if(ld(a[u],i,s))return!0;return!1}function ad(a,i){if(a.length===0||i.length===0)return!1;for(let s=0;s<a.length-1;s++){const u=a[s],m=a[s+1];for(let y=0;y<i.length-1;y++)if(Xh(u,m,i[y],i[y+1]))return!0}return!1}function Xh(a,i,s,u){return en(a,s,u)!==en(i,s,u)&&en(a,i,s)!==en(a,i,u)}function ld(a,i,s){const u=s*s;if(i.length===1)return a.distSqr(i[0])<u;for(let m=1;m<i.length;m++)if(kp(a,i[m-1],i[m])<u)return!0;return!1}function kp(a,i,s){const u=i.distSqr(s);if(u===0)return a.distSqr(i);const m=((a.x-i.x)*(s.x-i.x)+(a.y-i.y)*(s.y-i.y))/u;return a.distSqr(m<0?i:m>1?s:s.sub(i)._mult(m)._add(i))}function Rp(a,i){let s,u,m,y=!1;for(let x=0;x<a.length;x++){s=a[x];for(let k=0,I=s.length-1;k<s.length;I=k++)u=s[k],m=s[I],u.y>i.y!=m.y>i.y&&i.x<(m.x-u.x)*(i.y-u.y)/(m.y-u.y)+u.x&&(y=!y)}return y}function ys(a,i){let s=!1;for(let u=0,m=a.length-1;u<a.length;m=u++){const y=a[u],x=a[m];y.y>i.y!=x.y>i.y&&i.x<(x.x-y.x)*(i.y-y.y)/(x.y-y.y)+y.x&&(s=!s)}return s}function $p(a,i,s,u,m){for(const x of a)if(i<=x.x&&s<=x.y&&u>=x.x&&m>=x.y)return!0;const y=[new T(i,s),new T(i,m),new T(u,m),new T(u,s)];if(a.length>2){for(const x of y)if(ys(a,x))return!0}for(let x=0;x<a.length-1;x++)if(Jh(a[x],a[x+1],y))return!0;return!1}function Jh(a,i,s){const u=s[0],m=s[2];if(a.x<u.x&&i.x<u.x||a.x>m.x&&i.x>m.x||a.y<u.y&&i.y<u.y||a.y>m.y&&i.y>m.y)return!1;const y=en(a,i,s[0]);return y!==en(a,i,s[1])||y!==en(a,i,s[2])||y!==en(a,i,s[3])}function fa(a,i,s){const u=i.paint.get(a).value;return u.kind==="constant"?u.value:s.programConfigurations.get(i.id).getMaxValue(a)}function eu(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function Np(a,i,s,u,m){if(!i[0]&&!i[1])return a;const y=T.convert(i)._mult(m);s==="viewport"&&y._rotate(-u);const x=[];for(let k=0;k<a.length;k++)x.push(a[k].sub(y));return x}function Mp(a,i,s,u){const m=T.convert(a)._mult(u);return i==="viewport"&&m._rotate(-s),m}qt(sd,"CircleBucket",{omit:["layers"]});const Qh=new pt({"circle-sort-key":new Ge(st.layout_circle["circle-sort-key"])});var em={paint:new pt({"circle-radius":new Ge(st.paint_circle["circle-radius"]),"circle-color":new Ge(st.paint_circle["circle-color"]),"circle-blur":new Ge(st.paint_circle["circle-blur"]),"circle-opacity":new Ge(st.paint_circle["circle-opacity"]),"circle-translate":new Le(st.paint_circle["circle-translate"]),"circle-translate-anchor":new Le(st.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Le(st.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Le(st.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ge(st.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ge(st.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ge(st.paint_circle["circle-stroke-opacity"])}),layout:Qh},tu=1e-6,Ki=typeof Float32Array<"u"?Float32Array:Array;function Ip(){var a=new Ki(9);return Ki!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a}function Pr(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function cd(a,i){var s=i[0],u=i[1],m=i[2],y=i[3],x=i[4],k=i[5],I=i[6],z=i[7],G=i[8],H=i[9],K=i[10],J=i[11],Q=i[12],se=i[13],pe=i[14],we=i[15],Ne=s*k-u*x,Se=s*I-m*x,ke=s*z-y*x,ze=u*I-m*k,Ie=u*z-y*k,nt=m*z-y*I,et=G*se-H*Q,ut=G*pe-K*Q,Nt=G*we-J*Q,it=H*pe-K*se,ft=H*we-J*se,wt=K*we-J*pe,ht=Ne*wt-Se*ft+ke*it+ze*Nt-Ie*ut+nt*et;return ht?(a[0]=(k*wt-I*ft+z*it)*(ht=1/ht),a[1]=(m*ft-u*wt-y*it)*ht,a[2]=(se*nt-pe*Ie+we*ze)*ht,a[3]=(K*Ie-H*nt-J*ze)*ht,a[4]=(I*Nt-x*wt-z*ut)*ht,a[5]=(s*wt-m*Nt+y*ut)*ht,a[6]=(pe*ke-Q*nt-we*Se)*ht,a[7]=(G*nt-K*ke+J*Se)*ht,a[8]=(x*ft-k*Nt+z*et)*ht,a[9]=(u*Nt-s*ft-y*et)*ht,a[10]=(Q*Ie-se*ke+we*Ne)*ht,a[11]=(H*ke-G*Ie-J*Ne)*ht,a[12]=(k*ut-x*it-I*et)*ht,a[13]=(s*it-u*ut+m*et)*ht,a[14]=(se*Se-Q*ze-pe*Ne)*ht,a[15]=(G*ze-H*Se+K*Ne)*ht,a):null}function ha(a,i,s){var u=i[0],m=i[1],y=i[2],x=i[3],k=i[4],I=i[5],z=i[6],G=i[7],H=i[8],K=i[9],J=i[10],Q=i[11],se=i[12],pe=i[13],we=i[14],Ne=i[15],Se=s[0],ke=s[1],ze=s[2],Ie=s[3];return a[0]=Se*u+ke*k+ze*H+Ie*se,a[1]=Se*m+ke*I+ze*K+Ie*pe,a[2]=Se*y+ke*z+ze*J+Ie*we,a[3]=Se*x+ke*G+ze*Q+Ie*Ne,a[4]=(Se=s[4])*u+(ke=s[5])*k+(ze=s[6])*H+(Ie=s[7])*se,a[5]=Se*m+ke*I+ze*K+Ie*pe,a[6]=Se*y+ke*z+ze*J+Ie*we,a[7]=Se*x+ke*G+ze*Q+Ie*Ne,a[8]=(Se=s[8])*u+(ke=s[9])*k+(ze=s[10])*H+(Ie=s[11])*se,a[9]=Se*m+ke*I+ze*K+Ie*pe,a[10]=Se*y+ke*z+ze*J+Ie*we,a[11]=Se*x+ke*G+ze*Q+Ie*Ne,a[12]=(Se=s[12])*u+(ke=s[13])*k+(ze=s[14])*H+(Ie=s[15])*se,a[13]=Se*m+ke*I+ze*K+Ie*pe,a[14]=Se*y+ke*z+ze*J+Ie*we,a[15]=Se*x+ke*G+ze*Q+Ie*Ne,a}function $l(a,i,s){var u,m,y,x,k,I,z,G,H,K,J,Q,se=s[0],pe=s[1],we=s[2];return i===a?(a[12]=i[0]*se+i[4]*pe+i[8]*we+i[12],a[13]=i[1]*se+i[5]*pe+i[9]*we+i[13],a[14]=i[2]*se+i[6]*pe+i[10]*we+i[14],a[15]=i[3]*se+i[7]*pe+i[11]*we+i[15]):(m=i[1],y=i[2],x=i[3],k=i[4],I=i[5],z=i[6],G=i[7],H=i[8],K=i[9],J=i[10],Q=i[11],a[0]=u=i[0],a[1]=m,a[2]=y,a[3]=x,a[4]=k,a[5]=I,a[6]=z,a[7]=G,a[8]=H,a[9]=K,a[10]=J,a[11]=Q,a[12]=u*se+k*pe+H*we+i[12],a[13]=m*se+I*pe+K*we+i[13],a[14]=y*se+z*pe+J*we+i[14],a[15]=x*se+G*pe+Q*we+i[15]),a}function bs(a,i,s){var u=s[0],m=s[1],y=s[2];return a[0]=i[0]*u,a[1]=i[1]*u,a[2]=i[2]*u,a[3]=i[3]*u,a[4]=i[4]*m,a[5]=i[5]*m,a[6]=i[6]*m,a[7]=i[7]*m,a[8]=i[8]*y,a[9]=i[9]*y,a[10]=i[10]*y,a[11]=i[11]*y,a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15],a}function ud(a,i,s){var u=Math.sin(s),m=Math.cos(s),y=i[4],x=i[5],k=i[6],I=i[7],z=i[8],G=i[9],H=i[10],K=i[11];return i!==a&&(a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[4]=y*m+z*u,a[5]=x*m+G*u,a[6]=k*m+H*u,a[7]=I*m+K*u,a[8]=z*m-y*u,a[9]=G*m-x*u,a[10]=H*m-k*u,a[11]=K*m-I*u,a}function nu(a,i,s){var u=Math.sin(s),m=Math.cos(s),y=i[0],x=i[1],k=i[2],I=i[3],z=i[8],G=i[9],H=i[10],K=i[11];return i!==a&&(a[4]=i[4],a[5]=i[5],a[6]=i[6],a[7]=i[7],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[0]=y*m-z*u,a[1]=x*m-G*u,a[2]=k*m-H*u,a[3]=I*m-K*u,a[8]=y*u+z*m,a[9]=x*u+G*m,a[10]=k*u+H*m,a[11]=I*u+K*m,a}function Lp(a,i){return a[0]=i[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=i[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=i[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function Op(a,i,s){var u,m,y,x=s[0],k=s[1],I=s[2],z=Math.hypot(x,k,I);return z<tu?null:(x*=z=1/z,k*=z,I*=z,u=Math.sin(i),m=Math.cos(i),a[0]=x*x*(y=1-m)+m,a[1]=k*x*y+I*u,a[2]=I*x*y-k*u,a[3]=0,a[4]=x*k*y-I*u,a[5]=k*k*y+m,a[6]=I*k*y+x*u,a[7]=0,a[8]=x*I*y+k*u,a[9]=k*I*y-x*u,a[10]=I*I*y+m,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}Math.hypot||(Math.hypot=function(){for(var a=0,i=arguments.length;i--;)a+=arguments[i]*arguments[i];return Math.sqrt(a)});var tm=ha;function dd(){var a=new Ki(3);return Ki!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a}function Pp(a){var i=new Ki(3);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i}function Nl(a){return Math.hypot(a[0],a[1],a[2])}function ma(a,i,s){var u=new Ki(3);return u[0]=a,u[1]=i,u[2]=s,u}function $o(a,i,s){return a[0]=i[0]+s[0],a[1]=i[1]+s[1],a[2]=i[2]+s[2],a}function pd(a,i,s){return a[0]=i[0]-s[0],a[1]=i[1]-s[1],a[2]=i[2]-s[2],a}function Dp(a,i,s){return a[0]=i[0]*s[0],a[1]=i[1]*s[1],a[2]=i[2]*s[2],a}function fd(a,i,s){return a[0]=Math.min(i[0],s[0]),a[1]=Math.min(i[1],s[1]),a[2]=Math.min(i[2],s[2]),a}function hd(a,i,s){return a[0]=Math.max(i[0],s[0]),a[1]=Math.max(i[1],s[1]),a[2]=Math.max(i[2],s[2]),a}function _r(a,i,s){return a[0]=i[0]*s,a[1]=i[1]*s,a[2]=i[2]*s,a}function iu(a,i,s,u){return a[0]=i[0]+s[0]*u,a[1]=i[1]+s[1]*u,a[2]=i[2]+s[2]*u,a}function Oi(a,i){var s=i[0],u=i[1],m=i[2],y=s*s+u*u+m*m;return y>0&&(y=1/Math.sqrt(y)),a[0]=i[0]*y,a[1]=i[1]*y,a[2]=i[2]*y,a}function lr(a,i){return a[0]*i[0]+a[1]*i[1]+a[2]*i[2]}function md(a,i,s){var u=i[0],m=i[1],y=i[2],x=s[0],k=s[1],I=s[2];return a[0]=m*I-y*k,a[1]=y*x-u*I,a[2]=u*k-m*x,a}function pi(a,i,s){var u=i[0],m=i[1],y=i[2],x=s[3]*u+s[7]*m+s[11]*y+s[15];return a[0]=(s[0]*u+s[4]*m+s[8]*y+s[12])/(x=x||1),a[1]=(s[1]*u+s[5]*m+s[9]*y+s[13])/x,a[2]=(s[2]*u+s[6]*m+s[10]*y+s[14])/x,a}function Bp(a,i,s){var u=s[0],m=s[1],y=s[2],x=i[0],k=i[1],I=i[2],z=m*I-y*k,G=y*x-u*I,H=u*k-m*x,K=m*H-y*G,J=y*z-u*H,Q=u*G-m*z,se=2*s[3];return G*=se,H*=se,J*=2,Q*=2,a[0]=x+(z*=se)+(K*=2),a[1]=k+G+J,a[2]=I+H+Q,a}var Ml,vr=pd,nm=Dp,im=Nl;function zp(a,i,s){return a[0]=i[0]*s,a[1]=i[1]*s,a[2]=i[2]*s,a[3]=i[3]*s,a}function xs(a,i,s){var u=i[0],m=i[1],y=i[2],x=i[3];return a[0]=s[0]*u+s[4]*m+s[8]*y+s[12]*x,a[1]=s[1]*u+s[5]*m+s[9]*y+s[13]*x,a[2]=s[2]*u+s[6]*m+s[10]*y+s[14]*x,a[3]=s[3]*u+s[7]*m+s[11]*y+s[15]*x,a}function Fp(){var a=new Ki(4);return Ki!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a[3]=1,a}function Vp(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a}function Up(a,i,s){s*=.5;var u=i[0],m=i[1],y=i[2],x=i[3],k=Math.sin(s),I=Math.cos(s);return a[0]=u*I+x*k,a[1]=m*I+y*k,a[2]=y*I-m*k,a[3]=x*I-u*k,a}function jp(a,i,s){s*=.5;var u=i[0],m=i[1],y=i[2],x=i[3],k=Math.sin(s),I=Math.cos(s);return a[0]=u*I-y*k,a[1]=m*I+x*k,a[2]=y*I+u*k,a[3]=x*I-m*k,a}dd(),Ml=new Ki(4),Ki!=Float32Array&&(Ml[0]=0,Ml[1]=0,Ml[2]=0,Ml[3]=0),dd(),ma(1,0,0),ma(0,1,0),Fp(),Fp(),Ip();class gd{constructor(i,s){this.pos=i,this.dir=s}intersectsPlane(i,s,u){const m=lr(s,this.dir);if(Math.abs(m)<1e-6)return!1;const y=((i[0]-this.pos[0])*s[0]+(i[1]-this.pos[1])*s[1]+(i[2]-this.pos[2])*s[2])/m;return u[0]=this.pos[0]+this.dir[0]*y,u[1]=this.pos[1]+this.dir[1]*y,u[2]=this.pos[2]+this.dir[2]*y,!0}closestPointOnSphere(i,s,u){if(function(J,Q){var se=J[0],pe=J[1],we=J[2],Ne=Q[0],Se=Q[1],ke=Q[2];return Math.abs(se-Ne)<=tu*Math.max(1,Math.abs(se),Math.abs(Ne))&&Math.abs(pe-Se)<=tu*Math.max(1,Math.abs(pe),Math.abs(Se))&&Math.abs(we-ke)<=tu*Math.max(1,Math.abs(we),Math.abs(ke))}(this.pos,i)||s===0)return u[0]=u[1]=u[2]=0,!1;const[m,y,x]=this.dir,k=this.pos[0]-i[0],I=this.pos[1]-i[1],z=this.pos[2]-i[2],G=m*m+y*y+x*x,H=2*(k*m+I*y+z*x),K=H*H-4*G*(k*k+I*I+z*z-s*s);if(K<0){const J=Math.max(-H/2,0),Q=k+m*J,se=I+y*J,pe=z+x*J,we=Math.hypot(Q,se,pe);return u[0]=Q*s/we,u[1]=se*s/we,u[2]=pe*s/we,!1}{const J=(-H-Math.sqrt(K))/(2*G);if(J<0){const Q=Math.hypot(k,I,z);return u[0]=k*s/Q,u[1]=I*s/Q,u[2]=z*s/Q,!1}return u[0]=k+m*J,u[1]=I+y*J,u[2]=z+x*J,!0}}}class _d{constructor(i,s,u,m,y){this.TL=i,this.TR=s,this.BR=u,this.BL=m,this.horizon=y}static fromInvProjectionMatrix(i,s,u){const m=[-1,1,1],y=[1,1,1],x=[1,-1,1],k=[-1,-1,1],I=pi(m,m,i),z=pi(y,y,i),G=pi(x,x,i),H=pi(k,k,i);return new _d(I,z,G,H,s/u)}}class vd{constructor(i,s){this.points=i,this.planes=s}static fromInvProjectionMatrix(i,s,u,m){const y=Math.pow(2,u),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(I=>{const z=xs([],I,i),G=1/z[3]/s*y;return function(H,K,J){return H[0]=K[0]*J[0],H[1]=K[1]*J[1],H[2]=K[2]*J[2],H[3]=K[3]*J[3],H}(z,z,[G,G,m?1/z[3]:G,G])}),k=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(I=>{const z=Oi([],md([],vr([],x[I[0]],x[I[1]]),vr([],x[I[2]],x[I[1]]))),G=-lr(z,x[I[1]]);return z.concat(G)});return new vd(x,k)}}class Ui{static fromPoints(i){const s=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],u=[Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE];for(const m of i)s[0]=Math.min(s[0],m[0]),s[1]=Math.min(s[1],m[1]),s[2]=Math.min(s[2],m[2]),u[0]=Math.max(u[0],m[0]),u[1]=Math.max(u[1],m[1]),u[2]=Math.max(u[2],m[2]);return new Ui(s,u)}constructor(i,s){this.min=i,this.max=s,this.center=_r([],$o([],this.min,this.max),.5)}quadrant(i){const s=[i%2==0,i<2],u=Pp(this.min),m=Pp(this.max);for(let y=0;y<s.length;y++)u[y]=s[y]?this.min[y]:this.center[y],m[y]=s[y]?this.center[y]:this.max[y];return m[2]=this.max[2],new Ui(u,m)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}distanceZ(i){return Math.max(Math.min(this.max[2],i[2]),this.min[2])-i[2]}getCorners(){const i=this.min,s=this.max;return[[i[0],i[1],i[2]],[s[0],i[1],i[2]],[s[0],s[1],i[2]],[i[0],s[1],i[2]],[i[0],i[1],s[2]],[s[0],i[1],s[2]],[s[0],s[1],s[2]],[i[0],s[1],s[2]]]}intersects(i){const s=this.getCorners();let u=!0;for(let m=0;m<i.planes.length;m++){const y=i.planes[m];let x=0;for(let k=0;k<s.length;k++)x+=lr(y,s[k])+y[3]>=0;if(x===0)return 0;x!==s.length&&(u=!1)}if(u)return 2;for(let m=0;m<3;m++){let y=Number.MAX_VALUE,x=-Number.MAX_VALUE;for(let k=0;k<i.points.length;k++){const I=i.points[k][m]-this.min[m];y=Math.min(y,I),x=Math.max(x,I)}if(x<0||y>this.max[m]-this.min[m])return 0}return 1}}function Gp(a,i,s,u,m,y,x,k,I){if(y&&a.queryGeometry.isAboveHorizon)return!1;y&&(I*=a.pixelToTileUnitsFactor);const z=a.tileID.canonical,G=s.projection.upVectorScale(z,s.center.lat,s.worldSize).metersToTile;for(const H of i)for(const K of H){const J=K.add(k),Q=m&&s.elevation?s.elevation.exaggeration()*m.getElevationAt(J.x,J.y,!0):0,se=s.projection.projectTilePoint(J.x,J.y,z);if(Q>0){const Se=s.projection.upVector(z,J.x,J.y);se.x+=Se[0]*G*Q,se.y+=Se[1]*G*Q,se.z+=Se[2]*G*Q}const pe=y?J:rm(se.x,se.y,se.z,u),we=y?a.tilespaceRays.map(Se=>sm(Se,Q)):a.queryGeometry.screenGeometry,Ne=xs([],[se.x,se.y,se.z,1],u);if(!x&&y?I*=Ne[3]/s.cameraToCenterDistance:x&&!y&&(I*=s.cameraToCenterDistance/Ne[3]),y){const Se=Ci((K.y/an+z.y)/(1<<z.z));I/=s.projection.pixelsPerMeter(Se,1)/sr(1,Se)}if(Zh(we,pe,I))return!0}return!1}function rm(a,i,s,u){const m=xs([],[a,i,s,1],u);return new T(m[0]/m[3],m[1]/m[3])}const qp=ma(0,0,0),om=ma(0,0,1);function sm(a,i){const s=dd();return qp[2]=i,a.intersectsPlane(qp,om,s),new T(s[0],s[1])}class Hp extends sd{}function Kp(a,{width:i,height:s},u,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==i*s*u)throw new RangeError("mismatched image size")}else m=new Uint8Array(i*s*u);return a.width=i,a.height=s,a.data=m,a}function Wp(a,i,s){const{width:u,height:m}=i;u===a.width&&m===a.height||(yd(a,i,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,u),height:Math.min(a.height,m)},s),a.width=u,a.height=m,a.data=i.data)}function yd(a,i,s,u,m,y){if(m.width===0||m.height===0)return i;if(m.width>a.width||m.height>a.height||s.x>a.width-m.width||s.y>a.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>i.width||m.height>i.height||u.x>i.width-m.width||u.y>i.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const x=a.data,k=i.data;for(let I=0;I<m.height;I++){const z=((s.y+I)*a.width+s.x)*y,G=((u.y+I)*i.width+u.x)*y;for(let H=0;H<m.width*y;H++)k[G+H]=x[z+H]}return i}qt(Hp,"HeatmapBucket",{omit:["layers"]});class no{constructor(i,s){Kp(this,i,1,s)}resize(i){Wp(this,new no(i),1)}clone(){return new no({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,s,u,m,y){yd(i,s,u,m,y,1)}}class Wi{constructor(i,s){Kp(this,i,4,s)}resize(i){Wp(this,new Wi(i),4)}replace(i,s){s?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new Wi({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,s,u,m,y){yd(i,s,u,m,y,4)}}qt(no,"AlphaImage"),qt(Wi,"RGBAImage");var am={paint:new pt({"heatmap-radius":new Ge(st.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ge(st.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Le(st.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ke(st.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Le(st.paint_heatmap["heatmap-opacity"])})};function bd(a){const i={},s=a.resolution||256,u=a.clips?a.clips.length:1,m=a.image||new Wi({width:s,height:u}),y=(x,k,I)=>{i[a.evaluationKey]=I;const z=a.expression.evaluate(i);m.data[x+k+0]=Math.floor(255*z.r/z.a),m.data[x+k+1]=Math.floor(255*z.g/z.a),m.data[x+k+2]=Math.floor(255*z.b/z.a),m.data[x+k+3]=Math.floor(255*z.a)};if(a.clips)for(let x=0,k=0;x<u;++x,k+=4*s)for(let I=0,z=0;I<s;I++,z+=4){const G=I/(s-1),{start:H,end:K}=a.clips[x];y(k,z,H*(1-G)+K*G)}else for(let x=0,k=0;x<s;x++,k+=4)y(0,k,x/(s-1));return m}var lm={paint:new pt({"hillshade-illumination-direction":new Le(st.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Le(st.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Le(st.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Le(st.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Le(st.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Le(st.paint_hillshade["hillshade-accent-color"])})};const cm=mt([{name:"a_pos",components:2,type:"Int16"}],4),{members:um}=cm;var ru=ou,dm=ou;function ou(a,i,s){s=s||2;var u,m,y,x,k,I,z,G=i&&i.length,H=G?i[0]*s:a.length,K=Zp(a,0,H,s,!0),J=[];if(!K||K.next===K.prev)return J;if(G&&(K=function(se,pe,we,Ne){var Se,ke,ze,Ie=[];for(Se=0,ke=pe.length;Se<ke;Se++)(ze=Zp(se,pe[Se]*Ne,Se<ke-1?pe[Se+1]*Ne:se.length,Ne,!1))===ze.next&&(ze.steiner=!0),Ie.push(ym(ze));for(Ie.sort(gm),Se=0;Se<Ie.length;Se++)we=_m(Ie[Se],we);return we}(a,i,K,s)),a.length>80*s){u=y=a[0],m=x=a[1];for(var Q=s;Q<H;Q+=s)(k=a[Q])<u&&(u=k),(I=a[Q+1])<m&&(m=I),k>y&&(y=k),I>x&&(x=I);z=(z=Math.max(y-u,x-m))!==0?32767/z:0}return Il(K,J,s,u,m,z,0),J}function Zp(a,i,s,u,m){var y,x;if(m===Ed(a,i,s,u)>0)for(y=i;y<s;y+=u)x=Jp(y,a[y],a[y+1],x);else for(y=s-u;y>=i;y-=u)x=Jp(y,a[y],a[y+1],x);return x&&su(x,x.next)&&(Ol(x),x=x.next),x}function ws(a,i){if(!a)return a;i||(i=a);var s,u=a;do if(s=!1,u.steiner||!su(u,u.next)&&ui(u.prev,u,u.next)!==0)u=u.next;else{if(Ol(u),(u=i=u.prev)===u.next)break;s=!0}while(s||u!==i);return i}function Il(a,i,s,u,m,y,x){if(a){!x&&y&&function(G,H,K,J){var Q=G;do Q.z===0&&(Q.z=xd(Q.x,Q.y,H,K,J)),Q.prevZ=Q.prev,Q.nextZ=Q.next,Q=Q.next;while(Q!==G);Q.prevZ.nextZ=null,Q.prevZ=null,function(se){var pe,we,Ne,Se,ke,ze,Ie,nt,et=1;do{for(we=se,se=null,ke=null,ze=0;we;){for(ze++,Ne=we,Ie=0,pe=0;pe<et&&(Ie++,Ne=Ne.nextZ);pe++);for(nt=et;Ie>0||nt>0&&Ne;)Ie!==0&&(nt===0||!Ne||we.z<=Ne.z)?(Se=we,we=we.nextZ,Ie--):(Se=Ne,Ne=Ne.nextZ,nt--),ke?ke.nextZ=Se:se=Se,Se.prevZ=ke,ke=Se;we=Ne}ke.nextZ=null,et*=2}while(ze>1)}(Q)}(a,u,m,y);for(var k,I,z=a;a.prev!==a.next;)if(k=a.prev,I=a.next,y?fm(a,u,m,y):pm(a))i.push(k.i/s|0),i.push(a.i/s|0),i.push(I.i/s|0),Ol(a),a=I.next,z=I.next;else if((a=I)===z){x?x===1?Il(a=hm(ws(a),i,s),i,s,u,m,y,2):x===2&&mm(a,i,s,u,m,y):Il(ws(a),i,s,u,m,y,1);break}}}function pm(a){var i=a.prev,s=a,u=a.next;if(ui(i,s,u)>=0)return!1;for(var m=i.x,y=s.x,x=u.x,k=i.y,I=s.y,z=u.y,G=m<y?m<x?m:x:y<x?y:x,H=k<I?k<z?k:z:I<z?I:z,K=m>y?m>x?m:x:y>x?y:x,J=k>I?k>z?k:z:I>z?I:z,Q=u.next;Q!==i;){if(Q.x>=G&&Q.x<=K&&Q.y>=H&&Q.y<=J&&ga(m,k,y,I,x,z,Q.x,Q.y)&&ui(Q.prev,Q,Q.next)>=0)return!1;Q=Q.next}return!0}function fm(a,i,s,u){var m=a.prev,y=a,x=a.next;if(ui(m,y,x)>=0)return!1;for(var k=m.x,I=y.x,z=x.x,G=m.y,H=y.y,K=x.y,J=k<I?k<z?k:z:I<z?I:z,Q=G<H?G<K?G:K:H<K?H:K,se=k>I?k>z?k:z:I>z?I:z,pe=G>H?G>K?G:K:H>K?H:K,we=xd(J,Q,i,s,u),Ne=xd(se,pe,i,s,u),Se=a.prevZ,ke=a.nextZ;Se&&Se.z>=we&&ke&&ke.z<=Ne;){if(Se.x>=J&&Se.x<=se&&Se.y>=Q&&Se.y<=pe&&Se!==m&&Se!==x&&ga(k,G,I,H,z,K,Se.x,Se.y)&&ui(Se.prev,Se,Se.next)>=0||(Se=Se.prevZ,ke.x>=J&&ke.x<=se&&ke.y>=Q&&ke.y<=pe&&ke!==m&&ke!==x&&ga(k,G,I,H,z,K,ke.x,ke.y)&&ui(ke.prev,ke,ke.next)>=0))return!1;ke=ke.nextZ}for(;Se&&Se.z>=we;){if(Se.x>=J&&Se.x<=se&&Se.y>=Q&&Se.y<=pe&&Se!==m&&Se!==x&&ga(k,G,I,H,z,K,Se.x,Se.y)&&ui(Se.prev,Se,Se.next)>=0)return!1;Se=Se.prevZ}for(;ke&&ke.z<=Ne;){if(ke.x>=J&&ke.x<=se&&ke.y>=Q&&ke.y<=pe&&ke!==m&&ke!==x&&ga(k,G,I,H,z,K,ke.x,ke.y)&&ui(ke.prev,ke,ke.next)>=0)return!1;ke=ke.nextZ}return!0}function hm(a,i,s){var u=a;do{var m=u.prev,y=u.next.next;!su(m,y)&&Yp(m,u,u.next,y)&&Ll(m,y)&&Ll(y,m)&&(i.push(m.i/s|0),i.push(u.i/s|0),i.push(y.i/s|0),Ol(u),Ol(u.next),u=a=y),u=u.next}while(u!==a);return ws(u)}function mm(a,i,s,u,m,y){var x=a;do{for(var k=x.next.next;k!==x.prev;){if(x.i!==k.i&&bm(x,k)){var I=Xp(x,k);return x=ws(x,x.next),I=ws(I,I.next),Il(x,i,s,u,m,y,0),void Il(I,i,s,u,m,y,0)}k=k.next}x=x.next}while(x!==a)}function gm(a,i){return a.x-i.x}function _m(a,i){var s=function(m,y){var x,k=y,I=m.x,z=m.y,G=-1/0;do{if(z<=k.y&&z>=k.next.y&&k.next.y!==k.y){var H=k.x+(z-k.y)*(k.next.x-k.x)/(k.next.y-k.y);if(H<=I&&H>G&&(G=H,x=k.x<k.next.x?k:k.next,H===I))return x}k=k.next}while(k!==y);if(!x)return null;var K,J=x,Q=x.x,se=x.y,pe=1/0;k=x;do I>=k.x&&k.x>=Q&&I!==k.x&&ga(z<se?I:G,z,Q,se,z<se?G:I,z,k.x,k.y)&&(K=Math.abs(z-k.y)/(I-k.x),Ll(k,m)&&(K<pe||K===pe&&(k.x>x.x||k.x===x.x&&vm(x,k)))&&(x=k,pe=K)),k=k.next;while(k!==J);return x}(a,i);if(!s)return i;var u=Xp(s,a);return ws(u,u.next),ws(s,s.next)}function vm(a,i){return ui(a.prev,a,i.prev)<0&&ui(i.next,a,a.next)<0}function xd(a,i,s,u,m){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-s)*m|0)|a<<8))|a<<4))|a<<2))|a<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-u)*m|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function ym(a){var i=a,s=a;do(i.x<s.x||i.x===s.x&&i.y<s.y)&&(s=i),i=i.next;while(i!==a);return s}function ga(a,i,s,u,m,y,x,k){return(m-x)*(i-k)>=(a-x)*(y-k)&&(a-x)*(u-k)>=(s-x)*(i-k)&&(s-x)*(y-k)>=(m-x)*(u-k)}function bm(a,i){return a.next.i!==i.i&&a.prev.i!==i.i&&!function(s,u){var m=s;do{if(m.i!==s.i&&m.next.i!==s.i&&m.i!==u.i&&m.next.i!==u.i&&Yp(m,m.next,s,u))return!0;m=m.next}while(m!==s);return!1}(a,i)&&(Ll(a,i)&&Ll(i,a)&&function(s,u){var m=s,y=!1,x=(s.x+u.x)/2,k=(s.y+u.y)/2;do m.y>k!=m.next.y>k&&m.next.y!==m.y&&x<(m.next.x-m.x)*(k-m.y)/(m.next.y-m.y)+m.x&&(y=!y),m=m.next;while(m!==s);return y}(a,i)&&(ui(a.prev,a,i.prev)||ui(a,i.prev,i))||su(a,i)&&ui(a.prev,a,a.next)>0&&ui(i.prev,i,i.next)>0)}function ui(a,i,s){return(i.y-a.y)*(s.x-i.x)-(i.x-a.x)*(s.y-i.y)}function su(a,i){return a.x===i.x&&a.y===i.y}function Yp(a,i,s,u){var m=lu(ui(a,i,s)),y=lu(ui(a,i,u)),x=lu(ui(s,u,a)),k=lu(ui(s,u,i));return m!==y&&x!==k||!(m!==0||!au(a,s,i))||!(y!==0||!au(a,u,i))||!(x!==0||!au(s,a,u))||!(k!==0||!au(s,i,u))}function au(a,i,s){return i.x<=Math.max(a.x,s.x)&&i.x>=Math.min(a.x,s.x)&&i.y<=Math.max(a.y,s.y)&&i.y>=Math.min(a.y,s.y)}function lu(a){return a>0?1:a<0?-1:0}function Ll(a,i){return ui(a.prev,a,a.next)<0?ui(a,i,a.next)>=0&&ui(a,a.prev,i)>=0:ui(a,i,a.prev)<0||ui(a,a.next,i)<0}function Xp(a,i){var s=new wd(a.i,a.x,a.y),u=new wd(i.i,i.x,i.y),m=a.next,y=i.prev;return a.next=i,i.prev=a,s.next=m,m.prev=s,u.next=s,s.prev=u,y.next=u,u.prev=y,u}function Jp(a,i,s,u){var m=new wd(a,i,s);return u?(m.next=u.next,m.prev=u,u.next.prev=m,u.next=m):(m.prev=m,m.next=m),m}function Ol(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function wd(a,i,s){this.i=a,this.x=i,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ed(a,i,s,u){for(var m=0,y=i,x=s-u;y<s;y+=u)m+=(a[x]-a[y])*(a[y+1]+a[x+1]),x=y;return m}function xm(a,i,s,u,m){Qp(a,i,s||0,u||a.length-1,m||wm)}function Qp(a,i,s,u,m){for(;u>s;){if(u-s>600){var y=u-s+1,x=i-s+1,k=Math.log(y),I=.5*Math.exp(2*k/3),z=.5*Math.sqrt(k*I*(y-I)/y)*(x-y/2<0?-1:1);Qp(a,i,Math.max(s,Math.floor(i-x*I/y+z)),Math.min(u,Math.floor(i+(y-x)*I/y+z)),m)}var G=a[i],H=s,K=u;for(Pl(a,s,i),m(a[u],G)>0&&Pl(a,s,u);H<K;){for(Pl(a,H,K),H++,K--;m(a[H],G)<0;)H++;for(;m(a[K],G)>0;)K--}m(a[s],G)===0?Pl(a,s,K):Pl(a,++K,u),K<=i&&(s=K+1),i<=K&&(u=K-1)}}function Pl(a,i,s){var u=a[i];a[i]=a[s],a[s]=u}function wm(a,i){return a<i?-1:a>i?1:0}function Cd(a,i){const s=a.length;if(s<=1)return[a];const u=[];let m,y;for(let x=0;x<s;x++){const k=En(a[x]);k!==0&&(a[x].area=Math.abs(k),y===void 0&&(y=k<0),y===k<0?(m&&u.push(m),m=[a[x]]):m.push(a[x]))}if(m&&u.push(m),i>1)for(let x=0;x<u.length;x++)u[x].length<=i||(xm(u[x],i,1,u[x].length-1,Em),u[x]=u[x].slice(0,i));return u}function Em(a,i){return i.area-a.area}function Sd(a,i,s){const u=s.patternDependencies;let m=!1;for(const y of i){const x=y.paint.get(`${a}-pattern`);x.isConstant()||(m=!0);const k=x.constantOr(null);k&&(m=!0,u[k.to]=!0,u[k.from]=!0)}return m}function Td(a,i,s,u,m){const y=m.patternDependencies;for(const x of i){const k=x.paint.get(`${a}-pattern`).value;if(k.kind!=="constant"){let I=k.evaluate({zoom:u-1},s,{},m.availableImages),z=k.evaluate({zoom:u},s,{},m.availableImages),G=k.evaluate({zoom:u+1},s,{},m.availableImages);I=I&&I.name?I.name:I,z=z&&z.name?z.name:z,G=G&&G.name?G.name:G,y[I]=!0,y[z]=!0,y[G]=!0,s.patterns[x.id]={min:I,mid:z,max:G}}}return s}ou.deviation=function(a,i,s,u){var m=i&&i.length,y=Math.abs(Ed(a,0,m?i[0]*s:a.length,s));if(m)for(var x=0,k=i.length;x<k;x++)y-=Math.abs(Ed(a,i[x]*s,x<k-1?i[x+1]*s:a.length,s));var I=0;for(x=0;x<u.length;x+=3){var z=u[x]*s,G=u[x+1]*s,H=u[x+2]*s;I+=Math.abs((a[z]-a[H])*(a[G+1]-a[z+1])-(a[z]-a[G])*(a[H+1]-a[z+1]))}return y===0&&I===0?0:Math.abs((I-y)/y)},ou.flatten=function(a){for(var i=a[0][0].length,s={vertices:[],holes:[],dimensions:i},u=0,m=0;m<a.length;m++){for(var y=0;y<a[m].length;y++)for(var x=0;x<i;x++)s.vertices.push(a[m][y][x]);m>0&&s.holes.push(u+=a[m-1].length)}return s},ru.default=dm;class cu{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(s=>s.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ot,this.indexArray=new bn,this.indexArray2=new Ri,this.programConfigurations=new _s(i.layers,i.zoom),this.segments=new di,this.segments2=new di,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.projection=i.projection}populate(i,s,u,m){this.hasPattern=Sd("fill",this.layers,s);const y=this.layers[0].layout.get("fill-sort-key"),x=[];for(const{feature:k,id:I,index:z,sourceLayerIndex:G}of i){const H=this.layers[0]._featureFilter.needGeometry,K=vs(k,H);if(!this.layers[0]._featureFilter.filter(new me(this.zoom),K,u))continue;const J=y?y.evaluate(K,{},u,s.availableImages):void 0,Q={id:I,properties:k.properties,type:k.type,sourceLayerIndex:G,index:z,geometry:H?K.geometry:to(k,u,m),patterns:{},sortKey:J};x.push(Q)}y&&x.sort((k,I)=>k.sortKey-I.sortKey);for(const k of x){const{geometry:I,index:z,sourceLayerIndex:G}=k;if(this.hasPattern){const H=Td("fill",this.layers,k,this.zoom,s);this.patternFeatures.push(H)}else this.addFeature(k,I,z,u,{},s.availableImages);s.featureIndex.insert(i[z].feature,I,z,G,this.index)}}update(i,s,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,s,this.stateDependentLayers,u,m)}addFeatures(i,s,u,m,y){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,s,u,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,um),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,s,u,m,y,x=[]){for(const k of Cd(s,500)){let I=0;for(const Q of k)I+=Q.length;const z=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray),G=z.vertexLength,H=[],K=[];for(const Q of k){if(Q.length===0)continue;Q!==k[0]&&K.push(H.length/2);const se=this.segments2.prepareSegment(Q.length,this.layoutVertexArray,this.indexArray2),pe=se.vertexLength;this.layoutVertexArray.emplaceBack(Q[0].x,Q[0].y),this.indexArray2.emplaceBack(pe+Q.length-1,pe),H.push(Q[0].x),H.push(Q[0].y);for(let we=1;we<Q.length;we++)this.layoutVertexArray.emplaceBack(Q[we].x,Q[we].y),this.indexArray2.emplaceBack(pe+we-1,pe+we),H.push(Q[we].x),H.push(Q[we].y);se.vertexLength+=Q.length,se.primitiveLength+=Q.length}const J=ru(H,K);for(let Q=0;Q<J.length;Q+=3)this.indexArray.emplaceBack(G+J[Q],G+J[Q+1],G+J[Q+2]);z.vertexLength+=I,z.primitiveLength+=J.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,u,y,x,m)}}qt(cu,"FillBucket",{omit:["layers","patternFeatures"]});const Cm=new pt({"fill-sort-key":new Ge(st.layout_fill["fill-sort-key"])});var Sm={paint:new pt({"fill-antialias":new Le(st.paint_fill["fill-antialias"]),"fill-opacity":new Ge(st.paint_fill["fill-opacity"]),"fill-color":new Ge(st.paint_fill["fill-color"]),"fill-outline-color":new Ge(st.paint_fill["fill-outline-color"]),"fill-translate":new Le(st.paint_fill["fill-translate"]),"fill-translate-anchor":new Le(st.paint_fill["fill-translate-anchor"]),"fill-pattern":new Je(st.paint_fill["fill-pattern"])}),layout:Cm};const Tm=mt([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Am=mt([{name:"a_centroid_pos",components:2,type:"Uint16"}]),km=mt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Rm}=Tm;var ef=va;function va(a,i,s,u,m){this.properties={},this.extent=s,this.type=0,this._pbf=a,this._geometry=-1,this._keys=u,this._values=m,a.readFields($m,this,i)}function $m(a,i,s){a==1?i.id=s.readVarint():a==2?function(u,m){for(var y=u.readVarint()+u.pos;u.pos<y;){var x=m._keys[u.readVarint()],k=m._values[u.readVarint()];m.properties[x]=k}}(s,i):a==3?i.type=s.readVarint():a==4&&(i._geometry=s.pos)}function Nm(a){for(var i,s,u=0,m=0,y=a.length,x=y-1;m<y;x=m++)u+=((s=a[x]).x-(i=a[m]).x)*(i.y+s.y);return u}va.types=["Unknown","Point","LineString","Polygon"],va.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var i,s=a.readVarint()+a.pos,u=1,m=0,y=0,x=0,k=[];a.pos<s;){if(m<=0){var I=a.readVarint();u=7&I,m=I>>3}if(m--,u===1||u===2)y+=a.readSVarint(),x+=a.readSVarint(),u===1&&(i&&k.push(i),i=[]),i.push(new T(y,x));else{if(u!==7)throw new Error("unknown command "+u);i&&i.push(i[0].clone())}}return i&&k.push(i),k},va.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var i=a.readVarint()+a.pos,s=1,u=0,m=0,y=0,x=1/0,k=-1/0,I=1/0,z=-1/0;a.pos<i;){if(u<=0){var G=a.readVarint();s=7&G,u=G>>3}if(u--,s===1||s===2)(m+=a.readSVarint())<x&&(x=m),m>k&&(k=m),(y+=a.readSVarint())<I&&(I=y),y>z&&(z=y);else if(s!==7)throw new Error("unknown command "+s)}return[x,I,k,z]},va.prototype.toGeoJSON=function(a,i,s){var u,m,y=this.extent*Math.pow(2,s),x=this.extent*a,k=this.extent*i,I=this.loadGeometry(),z=va.types[this.type];function G(J){for(var Q=0;Q<J.length;Q++){var se=J[Q];J[Q]=[360*(se.x+x)/y-180,360/Math.PI*Math.atan(Math.exp((180-360*(se.y+k)/y)*Math.PI/180))-90]}}switch(this.type){case 1:var H=[];for(u=0;u<I.length;u++)H[u]=I[u][0];G(I=H);break;case 2:for(u=0;u<I.length;u++)G(I[u]);break;case 3:for(I=function(J){var Q=J.length;if(Q<=1)return[J];for(var se,pe,we=[],Ne=0;Ne<Q;Ne++){var Se=Nm(J[Ne]);Se!==0&&(pe===void 0&&(pe=Se<0),pe===Se<0?(se&&we.push(se),se=[J[Ne]]):se.push(J[Ne]))}return se&&we.push(se),we}(I),u=0;u<I.length;u++)for(m=0;m<I[u].length;m++)G(I[u][m])}I.length===1?I=I[0]:z="Multi"+z;var K={type:"Feature",geometry:{type:z,coordinates:I},properties:this.properties};return"id"in this&&(K.id=this.id),K};var tf=nf;function nf(a,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(Mm,this,i),this.length=this._features.length}function Mm(a,i,s){a===15?i.version=s.readVarint():a===1?i.name=s.readString():a===5?i.extent=s.readVarint():a===2?i._features.push(s.pos):a===3?i._keys.push(s.readString()):a===4&&i._values.push(function(u){for(var m=null,y=u.readVarint()+u.pos;u.pos<y;){var x=u.readVarint()>>3;m=x===1?u.readString():x===2?u.readFloat():x===3?u.readDouble():x===4?u.readVarint64():x===5?u.readVarint():x===6?u.readSVarint():x===7?u.readBoolean():null}return m}(s))}function Im(a,i,s){if(a===3){var u=new tf(s,s.readVarint()+s.pos);u.length&&(i[u.name]=u)}}nf.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var i=this._pbf.readVarint()+this._pbf.pos;return new ef(this._pbf,i,this.extent,this._keys,this._values)};var Es={VectorTile:function(a,i){this.layers=a.readFields(Im,{},i)},VectorTileFeature:ef,VectorTileLayer:tf};function uu(a,i,s,u){const m=[],y=u===0?(x,k,I,z,G,H)=>{x.push(new T(H,I+(H-k)/(z-k)*(G-I)))}:(x,k,I,z,G,H)=>{x.push(new T(k+(H-I)/(G-I)*(z-k),H))};for(const x of a){const k=[];for(const I of x){if(I.length<=2)continue;const z=[];for(let K=0;K<I.length-1;K++){const J=I[K].x,Q=I[K].y,se=I[K+1].x,pe=I[K+1].y,we=u===0?J:Q,Ne=u===0?se:pe;we<i?Ne>i&&y(z,J,Q,se,pe,i):we>s?Ne<s&&y(z,J,Q,se,pe,s):z.push(I[K]),Ne<i&&we>=i&&y(z,J,Q,se,pe,i),Ne>s&&we<=s&&y(z,J,Q,se,pe,s)}let G=I[I.length-1];const H=u===0?G.x:G.y;H>=i&&H<=s&&z.push(G),z.length&&(G=z[z.length-1],z[0].x===G.x&&z[0].y===G.y||z.push(z[0]),k.push(z))}k.length&&m.push(k)}return m}const Lm=Es.VectorTileFeature.types,Om=Math.pow(2,13);function Dl(a,i,s,u,m,y,x,k){a.emplaceBack((i<<1)+x,(s<<1)+y,(Math.floor(u*Om)<<1)+m,Math.round(k))}function Bl(a,i,s){a.emplaceBack(i.x,i.y,i.z,s[0]*16384,s[1]*16384,s[2]*16384)}class rf{constructor(){this.acc=new T(0,0),this.polyCount=[]}startRing(i){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new T(i.x,i.y),this.max=new T(i.x,i.y))}append(i,s){this.currentPolyCount.edges++,this.acc._add(i);const u=this.min,m=this.max;i.x<u.x?u.x=i.x:i.x>m.x&&(m.x=i.x),i.y<u.y?u.y=i.y:i.y>m.y&&(m.y=i.y),((i.x===0||i.x===an)&&i.x===s.x)!=((i.y===0||i.y===an)&&i.y===s.y)&&this.processBorderOverlap(i,s),s.x<0!=i.x<0&&this.addBorderIntersection(0,An(s.y,i.y,(0-s.x)/(i.x-s.x))),s.x>an!=i.x>an&&this.addBorderIntersection(1,An(s.y,i.y,(an-s.x)/(i.x-s.x))),s.y<0!=i.y<0&&this.addBorderIntersection(2,An(s.x,i.x,(0-s.y)/(i.y-s.y))),s.y>an!=i.y>an&&this.addBorderIntersection(3,An(s.x,i.x,(an-s.y)/(i.y-s.y)))}addBorderIntersection(i,s){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const u=this.borders[i];s<u[0]&&(u[0]=s),s>u[1]&&(u[1]=s)}processBorderOverlap(i,s){if(i.x===s.x){if(i.y===s.y)return;const u=i.x===0?0:1;this.addBorderIntersection(u,s.y),this.addBorderIntersection(u,i.y)}else{const u=i.y===0?2:3;this.addBorderIntersection(u,s.x),this.addBorderIntersection(u,i.x)}}centroid(){const i=this.polyCount.reduce((s,u)=>s+u.edges,0);return i!==0?this.acc.div(i)._round():new T(0,0)}span(){return new T(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((i,s)=>i+ +(s[0]!==Number.MAX_VALUE),0)}}class zl{constructor(i){this.zoom=i.zoom,this.canonical=i.canonical,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(s=>s.id),this.index=i.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=i.projection,this.layoutVertexArray=new Qt,this.centroidVertexArray=new fp,this.indexArray=new bn,this.programConfigurations=new _s(i.layers,i.zoom),this.segments=new di,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.enableTerrain=i.enableTerrain}populate(i,s,u,m){this.features=[],this.hasPattern=Sd("fill-extrusion",this.layers,s),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(y){const x=Math.exp(Math.PI*(1-y.y/(1<<y.z)*2));return 80150034*x/(x*x+1)/an/(1<<y.z)}(u),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:y,id:x,index:k,sourceLayerIndex:I}of i){const z=this.layers[0]._featureFilter.needGeometry,G=vs(y,z);if(!this.layers[0]._featureFilter.filter(new me(this.zoom),G,u))continue;const H={id:x,sourceLayerIndex:I,index:k,geometry:z?G.geometry:to(y,u,m),properties:y.properties,type:y.type,patterns:{}},K=this.layoutVertexArray.length;this.hasPattern?this.features.push(Td("fill-extrusion",this.layers,H,this.zoom,s)):this.addFeature(H,H.geometry,k,u,{},s.availableImages,m),s.featureIndex.insert(y,H.geometry,k,I,this.index,K)}this.sortBorders()}addFeatures(i,s,u,m,y){for(const x of this.features){const{geometry:k}=x;this.addFeature(x,k,x.index,s,u,m,y)}this.sortBorders()}update(i,s,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,s,this.stateDependentLayers,u,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Rm),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=i.createVertexBuffer(this.layoutVertexExtArray,km.members,!0))),this.programConfigurations.upload(i),this.uploaded=!0}uploadCentroid(i){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,Am.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,s,u,m,y,x,k){const I=[new T(0,0),new T(an,an)],z=k.projection,G=z.name==="globe",H=this.enableTerrain&&!G?new rf:null,K=Lm[i.type]==="Polygon";G&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new $i);const J=Cd(s,500);for(let we=J.length-1;we>=0;we--){const Ne=J[we];(Ne.length===0||(Q=Ne[0]).every(Se=>Se.x<=0)||Q.every(Se=>Se.x>=an)||Q.every(Se=>Se.y<=0)||Q.every(Se=>Se.y>=an))&&J.splice(we,1)}var Q;let se;if(G)se=df(J,I,m);else{se=[];for(const we of J)se.push({polygon:we,bounds:I})}const pe=K?this.edgeRadius:0;for(const{polygon:we,bounds:Ne}of se){let Se=0,ke=0;for(const Ie of we)K&&!Ie[0].equals(Ie[Ie.length-1])&&Ie.push(Ie[0]),ke+=K?Ie.length-1:Ie.length;const ze=this.segments.prepareSegment((K?5:4)*ke,this.layoutVertexArray,this.indexArray);if(K){const Ie=[],nt=[];Se=ze.vertexLength;for(const ut of we){let Nt,it;ut.length&&ut!==we[0]&&nt.push(Ie.length/2),Nt=ut[1].sub(ut[0])._perp()._unit();for(let ft=1;ft<ut.length;ft++){const wt=ut[ft],ht=ut[ft===ut.length-1?1:ft+1];let{x:Rt,y:Et}=wt;if(pe){it=ht.sub(wt)._perp()._unit();const Dt=Nt.add(it)._unit(),hn=pe*Math.min(4,1/(Nt.x*Dt.x+Nt.y*Dt.y));Rt+=hn*Dt.x,Et+=hn*Dt.y,Nt=it}Dl(this.layoutVertexArray,Rt,Et,0,0,1,1,0),ze.vertexLength++,Ie.push(wt.x,wt.y),G&&Bl(this.layoutVertexExtArray,z.projectTilePoint(Rt,Et,m),z.upVector(m,Rt,Et))}}const et=ru(Ie,nt);for(let ut=0;ut<et.length;ut+=3)this.indexArray.emplaceBack(Se+et[ut],Se+et[ut+2],Se+et[ut+1]),ze.primitiveLength++}for(const Ie of we){H&&Ie.length&&H.startRing(Ie[0]);let nt,et,ut,Nt=Ie.length>4&&lf(Ie[Ie.length-2],Ie[0],Ie[1]),it=pe?Pm(Ie[Ie.length-2],Ie[0],Ie[1],pe):0;et=Ie[1].sub(Ie[0])._perp()._unit();for(let ft=1,wt=0;ft<Ie.length;ft++){let ht=Ie[ft-1],Rt=Ie[ft];const Et=Ie[ft===Ie.length-1?1:ft+1];if(H&&K&&H.currentPolyCount.top++,af(Rt,ht,Ne)){pe&&(et=Et.sub(Rt)._perp()._unit());continue}H&&H.append(Rt,ht);const Dt=Rt.sub(ht)._perp(),hn=Dt.x/(Math.abs(Dt.x)+Math.abs(Dt.y)),gn=Dt.y>0?1:0,Jt=ht.dist(Rt);if(wt+Jt>32768&&(wt=0),pe){ut=Et.sub(Rt)._perp()._unit();let jt=sf(ht,Rt,Et,of(et,ut),pe);isNaN(jt)&&(jt=0);const qn=Rt.sub(ht)._unit();ht=ht.add(qn.mult(it))._round(),Rt=Rt.add(qn.mult(-jt))._round(),it=jt,et=ut}const Lt=ze.vertexLength,Sn=Ie.length>4&&lf(ht,Rt,Et);let pn=cf(wt,Nt,!0);if(Dl(this.layoutVertexArray,ht.x,ht.y,hn,gn,0,0,pn),Dl(this.layoutVertexArray,ht.x,ht.y,hn,gn,0,1,pn),wt+=Jt,pn=cf(wt,Sn,!1),Nt=Sn,Dl(this.layoutVertexArray,Rt.x,Rt.y,hn,gn,0,0,pn),Dl(this.layoutVertexArray,Rt.x,Rt.y,hn,gn,0,1,pn),ze.vertexLength+=4,this.indexArray.emplaceBack(Lt+0,Lt+1,Lt+2),this.indexArray.emplaceBack(Lt+1,Lt+3,Lt+2),ze.primitiveLength+=2,pe){const jt=Se+(ft===1?Ie.length-2:ft-2),qn=ft===1?Se:jt+1;if(this.indexArray.emplaceBack(Lt+1,jt,Lt+3),this.indexArray.emplaceBack(jt,qn,Lt+3),ze.primitiveLength+=2,nt===void 0&&(nt=Lt),!af(Et,Ie[ft],Ne)){const Fn=ft===Ie.length-1?nt:ze.vertexLength;this.indexArray.emplaceBack(Lt+2,Lt+3,Fn),this.indexArray.emplaceBack(Lt+3,Fn+1,Fn),this.indexArray.emplaceBack(Lt+3,qn,Fn+1),ze.primitiveLength+=3}}if(G){const jt=this.layoutVertexExtArray,qn=z.projectTilePoint(ht.x,ht.y,m),Fn=z.projectTilePoint(Rt.x,Rt.y,m),Xn=z.upVector(m,ht.x,ht.y),_n=z.upVector(m,Rt.x,Rt.y);Bl(jt,qn,Xn),Bl(jt,qn,Xn),Bl(jt,Fn,_n),Bl(jt,Fn,_n)}}K&&(Se+=Ie.length-1)}}if(H&&H.polyCount.length>0){if(H.borders){H.vertexArrayOffset=this.centroidVertexArray.length;const we=H.borders,Ne=this.featuresOnBorder.push(H)-1;for(let Se=0;Se<4;Se++)we[Se][0]!==Number.MAX_VALUE&&this.borders[Se].push(Ne)}this.encodeCentroid(H.borders?void 0:H.centroid(),H)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,u,y,x,m)}sortBorders(){for(let i=0;i<4;i++)this.borders[i].sort((s,u)=>this.featuresOnBorder[s].borders[i][0]-this.featuresOnBorder[u].borders[i][0])}encodeCentroid(i,s,u=!0){let m,y;if(i)if(i.y!==0){const k=s.span()._mult(this.tileToMeter);m=(Math.max(i.x,1)<<3)+Math.min(7,Math.round(k.x/10)),y=(Math.max(i.y,1)<<3)+Math.min(7,Math.round(k.y/10))}else m=Math.ceil(7*(i.x+450)),y=0;else m=0,y=+u;let x=u?this.centroidVertexArray.length:s.vertexArrayOffset;for(const k of s.polyCount){u&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*k.edges+k.top);for(let I=0;I<k.top;I++)this.centroidVertexArray.emplace(x++,m,y);for(let I=0;I<2*k.edges;I++)this.centroidVertexArray.emplace(x++,0,y),this.centroidVertexArray.emplace(x++,m,y)}}}function of(a,i){const s=a.add(i)._unit();return a.x*s.x+a.y*s.y}function Pm(a,i,s,u){const m=i.sub(a)._perp()._unit(),y=s.sub(i)._perp()._unit();return sf(a,i,s,of(m,y),u)}function sf(a,i,s,u,m){const y=Math.sqrt(1-u*u);return Math.min(a.dist(i)/3,i.dist(s)/3,m*y/u)}function af(a,i,s){return a.x<s[0].x&&i.x<s[0].x||a.x>s[1].x&&i.x>s[1].x||a.y<s[0].y&&i.y<s[0].y||a.y>s[1].y&&i.y>s[1].y}function lf(a,i,s){if(a.x<0||a.x>=an||i.x<0||i.x>=an||s.x<0||s.x>=an)return!1;const u=s.sub(i),m=u.perp(),y=a.sub(i);return(u.x*y.x+u.y*y.y)/Math.sqrt((u.x*u.x+u.y*u.y)*(y.x*y.x+y.y*y.y))>-.866&&m.x*y.x+m.y*y.y<0}function cf(a,i,s){const u=i?2|a:-3&a;return s?1|u:-2&u}function uf(){const a=Math.PI/32,i=Math.tan(a),s=td;return s*Math.sqrt(1+2*i*i)-s}function df(a,i,s){const u=1<<s.z,m=ar(s.x/u),y=ar((s.x+1)/u),x=Ci(s.y/u),k=Ci((s.y+1)/u);return function(I,z,G,H,K=0,J){const Q=[];if(!I.length||!G||!H)return Q;const se=(Ie,nt)=>{for(const et of Ie)Q.push({polygon:et,bounds:nt})},pe=Math.ceil(Math.log2(G)),we=Math.ceil(Math.log2(H)),Ne=pe-we,Se=[];for(let Ie=0;Ie<Math.abs(Ne);Ie++)Se.push(Ne>0?0:1);for(let Ie=0;Ie<Math.min(pe,we);Ie++)Se.push(0),Se.push(1);let ke=I;if(ke=uu(ke,z[0].y-K,z[1].y+K,1),ke=uu(ke,z[0].x-K,z[1].x+K,0),!ke.length)return Q;const ze=[];for(Se.length?ze.push({polygons:ke,bounds:z,depth:0}):se(ke,z);ze.length;){const Ie=ze.pop(),nt=Ie.depth,et=Se[nt],ut=Ie.bounds[0],Nt=Ie.bounds[1],it=et===0?ut.x:ut.y,ft=et===0?Nt.x:Nt.y,wt=J?J(et,it,ft):.5*(it+ft),ht=uu(Ie.polygons,it-K,wt+K,et),Rt=uu(Ie.polygons,wt-K,ft+K,et);if(ht.length){const Et=[ut,new T(et===0?wt:Nt.x,et===1?wt:Nt.y)];Se.length>nt+1?ze.push({polygons:ht,bounds:Et,depth:nt+1}):se(ht,Et)}if(Rt.length){const Et=[new T(et===0?wt:ut.x,et===1?wt:ut.y),Nt];Se.length>nt+1?ze.push({polygons:Rt,bounds:Et,depth:nt+1}):se(Rt,Et)}}return Q}(a,i,Math.ceil((y-m)/11.25),Math.ceil((x-k)/11.25),1,(I,z,G)=>{if(I===0)return .5*(z+G);{const H=Ci((s.y+z/an)/u);return(eo(.5*(Ci((s.y+G/an)/u)+H))*u-s.y)*an}})}qt(zl,"FillExtrusionBucket",{omit:["layers","features"]}),qt(rf,"PartMetadata");const Dm=new pt({"fill-extrusion-edge-radius":new Le(st["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Bm={paint:new pt({"fill-extrusion-opacity":new Le(st["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ge(st["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Le(st["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Le(st["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Je(st["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ge(st["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ge(st["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Le(st["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Le(st["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Le(st["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:Dm};function pf(a,i,s){var u=2*Math.PI*6378137/256/Math.pow(2,s);return[a*u-2*Math.PI*6378137/2,i*u-2*Math.PI*6378137/2]}class du{constructor(i,s,u){this.z=i,this.x=s,this.y=u,this.key=Fl(0,i,i,s,u)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,s){const u=function(y,x,k){var I=pf(256*y,256*(x=Math.pow(2,k)-x-1),k),z=pf(256*(y+1),256*(x+1),k);return I[0]+","+I[1]+","+z[0]+","+z[1]}(this.x,this.y,this.z),m=function(y,x,k){let I,z="";for(let G=y;G>0;G--)I=1<<G-1,z+=(x&I?1:0)+(k&I?2:0);return z}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(s==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",m).replace("{bbox-epsg-3857}",u)}toString(){return`${this.z}/${this.x}/${this.y}`}}class ff{constructor(i,s){this.wrap=i,this.canonical=s,this.key=Fl(i,s.z,s.z,s.x,s.y)}}class Pi{constructor(i,s,u,m,y){this.overscaledZ=i,this.wrap=s,this.canonical=new du(u,+m,+y),this.key=s===0&&i===u?this.canonical.key:Fl(s,i,u,m,y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){const s=this.canonical.z-i;return i>this.canonical.z?new Pi(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Pi(i,this.wrap,i,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(i,s=!0){if(this.overscaledZ===i&&s)return this.key;if(i>this.canonical.z)return Fl(this.wrap*+s,i,this.canonical.z,this.canonical.x,this.canonical.y);{const u=this.canonical.z-i;return Fl(this.wrap*+s,i,i,this.canonical.x>>u,this.canonical.y>>u)}}isChildOf(i){if(i.wrap!==this.wrap)return!1;const s=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>s&&i.canonical.y===this.canonical.y>>s}children(i){if(this.overscaledZ>=i)return[new Pi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,u=2*this.canonical.x,m=2*this.canonical.y;return[new Pi(s,this.wrap,s,u,m),new Pi(s,this.wrap,s,u+1,m),new Pi(s,this.wrap,s,u,m+1),new Pi(s,this.wrap,s,u+1,m+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new Pi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new Pi(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new ff(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Fl(a,i,s,u,m){const y=1<<Math.min(s,22);let x=y*(m%y)+u%y;return a&&s<22&&(x+=y*y*((a<0?-2*a-1:2*a)%(1<<2*(22-s)))),16*(32*x+s)+(i-s)}function Vl(a,i){return a.x*i.x+a.y*i.y}function hf(a,i){if(a.length===1){let s=0;const u=i[s++];let m;for(;!m||u.equals(m);)if(m=i[s++],!m)return 1/0;for(;s<i.length;s++){const y=i[s],x=a[0],k=m.sub(u),I=y.sub(u),z=x.sub(u),G=Vl(k,k),H=Vl(k,I),K=Vl(I,I),J=Vl(z,k),Q=Vl(z,I),se=G*K-H*H,pe=(K*J-H*Q)/se,we=(G*Q-H*J)/se,Ne=u.z*(1-pe-we)+m.z*pe+y.z*we;if(isFinite(Ne))return Ne}return 1/0}{let s=1/0;for(const u of i)s=Math.min(s,u.z);return s}}function pu(a){const i=new T(a[0],a[1]);return i.z=a[2],i}function mf(a,i,s,u,m,y,x,k){const I=x*m.getElevationAt(a,i,!0,!0),z=y[0]!==0,G=z?y[1]===0?x*(y[0]/7-450):x*function(H,K,J){const Q=Math.floor(K[0]/8),se=Math.floor(K[1]/8),pe=10*(K[0]-8*Q),we=10*(K[1]-8*se),Ne=H.getElevationAt(Q,se,!0,!0),Se=H.getMeterToDEM(J),ke=Math.floor(.5*(pe*Se-1)),ze=Math.floor(.5*(we*Se-1)),Ie=H.tileCoordToPixel(Q,se),nt=2*ke+1,et=2*ze+1,ut=function(Rt,Et,Dt,hn,gn){return[Rt.getElevationAtPixel(Et,Dt,!0),Rt.getElevationAtPixel(Et+gn,Dt,!0),Rt.getElevationAtPixel(Et,Dt+gn,!0),Rt.getElevationAtPixel(Et+hn,Dt+gn,!0)]}(H,Ie.x-ke,Ie.y-ze,nt,et),Nt=Math.abs(ut[0]-ut[1]),it=Math.abs(ut[2]-ut[3]),ft=Math.abs(ut[0]-ut[2])+Math.abs(ut[1]-ut[3]),wt=Math.min(.25,.5*Se*(Nt+it)/nt),ht=Math.min(.25,.5*Se*ft/et);return Ne+Math.max(wt*pe,ht*we)}(m,y,k):I;return{base:I+(s===0)?-1:s,top:z?Math.max(G+u,I+s+2):I+u}}qt(du,"CanonicalTileID"),qt(Pi,"OverscaledTileID",{omit:["projMatrix"]});const zm=mt([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Fm}=zm,Vm=mt([{name:"a_packed",components:4,type:"Float32"}]),{members:Um}=Vm,jm=Es.VectorTileFeature.types,Gm=Math.cos(Math.PI/180*37.5);class fu{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(s=>s.id),this.index=i.index,this.projection=i.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new dn,this.layoutVertexArray2=new Cn,this.indexArray=new bn,this.programConfigurations=new _s(i.layers,i.zoom),this.segments=new di,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(i,s,u,m){this.hasPattern=Sd("line",this.layers,s);const y=this.layers[0].layout.get("line-sort-key"),x=[];for(const{feature:G,id:H,index:K,sourceLayerIndex:J}of i){const Q=this.layers[0]._featureFilter.needGeometry,se=vs(G,Q);if(!this.layers[0]._featureFilter.filter(new me(this.zoom),se,u))continue;const pe=y?y.evaluate(se,{},u):void 0,we={id:H,properties:G.properties,type:G.type,sourceLayerIndex:J,index:K,geometry:Q?se.geometry:to(G,u,m),patterns:{},sortKey:pe};x.push(we)}y&&x.sort((G,H)=>G.sortKey-H.sortKey);const{lineAtlas:k,featureIndex:I}=s,z=this.addConstantDashes(k);for(const G of x){const{geometry:H,index:K,sourceLayerIndex:J}=G;if(z&&this.addFeatureDashes(G,k),this.hasPattern){const Q=Td("line",this.layers,G,this.zoom,s);this.patternFeatures.push(Q)}else this.addFeature(G,H,K,u,k.positions,s.availableImages);I.insert(i[K].feature,H,K,J,this.index)}}addConstantDashes(i){let s=!1;for(const u of this.layers){const m=u.paint.get("line-dasharray").value,y=u.layout.get("line-cap").value;if(m.kind!=="constant"||y.kind!=="constant")s=!0;else{const x=y.value,k=m.value;if(!k)continue;i.addDash(k.from,x),i.addDash(k.to,x),k.other&&i.addDash(k.other,x)}}return s}addFeatureDashes(i,s){const u=this.zoom;for(const m of this.layers){const y=m.paint.get("line-dasharray").value,x=m.layout.get("line-cap").value;if(y.kind==="constant"&&x.kind==="constant")continue;let k,I,z,G,H,K;if(y.kind==="constant"){const pe=y.value;if(!pe)continue;k=pe.other||pe.to,I=pe.to,z=pe.from}else k=y.evaluate({zoom:u-1},i),I=y.evaluate({zoom:u},i),z=y.evaluate({zoom:u+1},i);x.kind==="constant"?G=H=K=x.value:(G=x.evaluate({zoom:u-1},i),H=x.evaluate({zoom:u},i),K=x.evaluate({zoom:u+1},i)),s.addDash(k,G),s.addDash(I,H),s.addDash(z,K);const J=s.getKey(k,G),Q=s.getKey(I,H),se=s.getKey(z,K);i.patterns[m.id]={min:J,mid:Q,max:se}}}update(i,s,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,s,this.stateDependentLayers,u,m)}addFeatures(i,s,u,m,y){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,s,u,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,Um)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Fm),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&i.properties.hasOwnProperty("mapbox_clip_start")&&i.properties.hasOwnProperty("mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,s,u,m,y,x){const k=this.layers[0].layout,I=k.get("line-join").evaluate(i,{}),z=k.get("line-cap").evaluate(i,{}),G=k.get("line-miter-limit"),H=k.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const K of s)this.addLine(K,i,I,z,G,H);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,u,y,x,m)}addLine(i,s,u,m,y,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let we=0;we<i.length-1;we++)this.totalDistance+=i[we].dist(i[we+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const k=jm[s.type]==="Polygon";let I=i.length;for(;I>=2&&i[I-1].equals(i[I-2]);)I--;let z=0;for(;z<I-1&&i[z].equals(i[z+1]);)z++;if(I<(k?3:2))return;u==="bevel"&&(y=1.05);const G=this.overscaling<=16?122880/(512*this.overscaling):0,H=this.segments.prepareSegment(10*I,this.layoutVertexArray,this.indexArray);let K,J,Q,se,pe;this.e1=this.e2=-1,k&&(K=i[I-2],pe=i[z].sub(K)._unit()._perp());for(let we=z;we<I;we++){if(Q=we===I-1?k?i[z+1]:void 0:i[we+1],Q&&i[we].equals(Q))continue;pe&&(se=pe),K&&(J=K),K=i[we],pe=Q?Q.sub(K)._unit()._perp():se,se=se||pe;let Ne=se.add(pe);Ne.x===0&&Ne.y===0||Ne._unit();const Se=se.x*pe.x+se.y*pe.y,ke=Ne.x*pe.x+Ne.y*pe.y,ze=ke!==0?1/ke:1/0,Ie=2*Math.sqrt(2-2*ke),nt=ke<Gm&&J&&Q,et=se.x*pe.y-se.y*pe.x>0;if(nt&&we>z){const it=K.dist(J);if(it>2*G){const ft=K.sub(K.sub(J)._mult(G/it)._round());this.updateDistance(J,ft),this.addCurrentVertex(ft,se,0,0,H),J=ft}}const ut=J&&Q;let Nt=ut?u:k?"butt":m;if(ut&&Nt==="round"&&(ze<x?Nt="miter":ze<=2&&(Nt="fakeround")),Nt==="miter"&&ze>y&&(Nt="bevel"),Nt==="bevel"&&(ze>2&&(Nt="flipbevel"),ze<y&&(Nt="miter")),J&&this.updateDistance(J,K),Nt==="miter")Ne._mult(ze),this.addCurrentVertex(K,Ne,0,0,H);else if(Nt==="flipbevel"){if(ze>100)Ne=pe.mult(-1);else{const it=ze*se.add(pe).mag()/se.sub(pe).mag();Ne._perp()._mult(it*(et?-1:1))}this.addCurrentVertex(K,Ne,0,0,H),this.addCurrentVertex(K,Ne.mult(-1),0,0,H)}else if(Nt==="bevel"||Nt==="fakeround"){const it=-Math.sqrt(ze*ze-1),ft=et?it:0,wt=et?0:it;if(J&&this.addCurrentVertex(K,se,ft,wt,H),Nt==="fakeround"){const ht=Math.round(180*Ie/Math.PI/20);for(let Rt=1;Rt<ht;Rt++){let Et=Rt/ht;if(Et!==.5){const hn=Et-.5;Et+=Et*hn*(Et-1)*((1.0904+Se*(Se*(3.55645-1.43519*Se)-3.2452))*hn*hn+(.848013+Se*(.215638*Se-1.06021)))}const Dt=pe.sub(se)._mult(Et)._add(se)._unit()._mult(et?-1:1);this.addHalfVertex(K,Dt.x,Dt.y,!1,et,0,H)}}Q&&this.addCurrentVertex(K,pe,-ft,-wt,H)}else if(Nt==="butt")this.addCurrentVertex(K,Ne,0,0,H);else if(Nt==="square"){const it=J?1:-1;J||this.addCurrentVertex(K,Ne,it,it,H),this.addCurrentVertex(K,Ne,0,0,H),J&&this.addCurrentVertex(K,Ne,it,it,H)}else Nt==="round"&&(J&&(this.addCurrentVertex(K,se,0,0,H),this.addCurrentVertex(K,se,1,1,H,!0)),Q&&(this.addCurrentVertex(K,pe,-1,-1,H,!0),this.addCurrentVertex(K,pe,0,0,H)));if(nt&&we<I-1){const it=K.dist(Q);if(it>2*G){const ft=K.add(Q.sub(K)._mult(G/it)._round());this.updateDistance(K,ft),this.addCurrentVertex(ft,pe,0,0,H),K=ft}}}}addCurrentVertex(i,s,u,m,y,x=!1){const k=s.y*m-s.x,I=-s.y-s.x*m;this.addHalfVertex(i,s.x+s.y*u,s.y-s.x*u,x,!1,u,y),this.addHalfVertex(i,k,I,x,!0,-m,y)}addHalfVertex({x:i,y:s},u,m,y,x,k,I){this.layoutVertexArray.emplaceBack((i<<1)+(y?1:0),(s<<1)+(x?1:0),Math.round(63*u)+128,Math.round(63*m)+128,1+(k===0?0:k<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const z=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,z),I.primitiveLength++),x?this.e2=z:this.e1=z}updateScaledDistance(){if(this.lineClips){const i=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=i*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(i,s){this.distance+=i.dist(s),this.updateScaledDistance()}}qt(fu,"LineBucket",{omit:["layers","patternFeatures"]});const qm=new pt({"line-cap":new Ge(st.layout_line["line-cap"]),"line-join":new Ge(st.layout_line["line-join"]),"line-miter-limit":new Le(st.layout_line["line-miter-limit"]),"line-round-limit":new Le(st.layout_line["line-round-limit"]),"line-sort-key":new Ge(st.layout_line["line-sort-key"])});var gf={paint:new pt({"line-opacity":new Ge(st.paint_line["line-opacity"]),"line-color":new Ge(st.paint_line["line-color"]),"line-translate":new Le(st.paint_line["line-translate"]),"line-translate-anchor":new Le(st.paint_line["line-translate-anchor"]),"line-width":new Ge(st.paint_line["line-width"]),"line-gap-width":new Ge(st.paint_line["line-gap-width"]),"line-offset":new Ge(st.paint_line["line-offset"]),"line-blur":new Ge(st.paint_line["line-blur"]),"line-dasharray":new Je(st.paint_line["line-dasharray"]),"line-pattern":new Je(st.paint_line["line-pattern"]),"line-gradient":new Ke(st.paint_line["line-gradient"]),"line-trim-offset":new Le(st.paint_line["line-trim-offset"])}),layout:qm};const _f=new class extends Ge{possiblyEvaluate(a,i){return i=new me(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,zoomHistory:i.zoomHistory,transition:i.transition}),super.possiblyEvaluate(a,i)}evaluate(a,i,s,u){return i=le({},i,{zoom:Math.floor(i.zoom)}),super.evaluate(a,i,s,u)}}(gf.paint.properties["line-width"].specification);function vf(a,i){return i>0?i+2*a:a}_f.useIntegerZoom=!0;const Hm=mt([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Km=mt([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Wm=mt([{name:"a_projected_pos",components:4,type:"Float32"}],4);mt([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Zm=mt([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Ym=mt([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);mt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const yf=mt([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Xm=mt([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);mt([{name:"triangle",components:3,type:"Uint16"}]),mt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),mt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),mt([{type:"Float32",name:"offsetX"}]),mt([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Si=24;const Dr=128;function Ad(a,i){const{expression:s}=i;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new me(a+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:u,interpolationType:m}=s;let y=0;for(;y<u.length&&u[y]<=a;)y++;y=Math.max(0,y-1);let x=y;for(;x<u.length&&u[x]<a+1;)x++;x=Math.min(u.length-1,x);const k=u[y],I=u[x];return s.kind==="composite"?{kind:"composite",minZoom:k,maxZoom:I,interpolationType:m}:{kind:"camera",minZoom:k,maxZoom:I,minSize:s.evaluate(new me(k)),maxSize:s.evaluate(new me(I)),interpolationType:m}}}function hu(a,{uSize:i,uSizeT:s},{lowerSize:u,upperSize:m}){return a.kind==="source"?u/Dr:a.kind==="composite"?An(u/Dr,m/Dr,s):i}function ya(a,i){let s=0,u=0;if(a.kind==="constant")u=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:m,minZoom:y,maxZoom:x}=a,k=m?Z(or.interpolationFactor(m,i,y,x),0,1):0;a.kind==="camera"?u=An(a.minSize,a.maxSize,k):s=k}return{uSizeT:s,uSize:u}}var Jm=Object.freeze({__proto__:null,getSizeData:Ad,evaluateSizeForFeature:hu,evaluateSizeForZoom:ya,SIZE_PACK_FACTOR:Dr});function Qm(a,i,s){return a.sections.forEach(u=>{u.text=function(m,y,x){const k=y.layout.get("text-transform").evaluate(x,{});return k==="uppercase"?m=m.toLocaleUpperCase():k==="lowercase"&&(m=m.toLocaleLowerCase()),he.applyArabicShaping&&(m=he.applyArabicShaping(m)),m}(u.text,i,s)}),a}const Ul={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function eg(a){return a==="\uFE36"||a==="\uFE48"||a==="\uFE38"||a==="\uFE44"||a==="\uFE42"||a==="\uFE3E"||a==="\uFE3C"||a==="\uFE3A"||a==="\uFE18"||a==="\uFE40"||a==="\uFE10"||a==="\uFE13"||a==="\uFE14"||a==="\uFF40"||a==="\uFFE3"||a==="\uFE11"||a==="\uFE12"}function tg(a){return a==="\uFE35"||a==="\uFE47"||a==="\uFE37"||a==="\uFE43"||a==="\uFE41"||a==="\uFE3D"||a==="\uFE3B"||a==="\uFE39"||a==="\uFE17"||a==="\uFE3F"}var bf=function(a,i,s,u,m){var y,x,k=8*m-u-1,I=(1<<k)-1,z=I>>1,G=-7,H=s?m-1:0,K=s?-1:1,J=a[i+H];for(H+=K,y=J&(1<<-G)-1,J>>=-G,G+=k;G>0;y=256*y+a[i+H],H+=K,G-=8);for(x=y&(1<<-G)-1,y>>=-G,G+=u;G>0;x=256*x+a[i+H],H+=K,G-=8);if(y===0)y=1-z;else{if(y===I)return x?NaN:1/0*(J?-1:1);x+=Math.pow(2,u),y-=z}return(J?-1:1)*x*Math.pow(2,y-u)},xf=function(a,i,s,u,m,y){var x,k,I,z=8*y-m-1,G=(1<<z)-1,H=G>>1,K=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,J=u?0:y-1,Q=u?1:-1,se=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(k=isNaN(i)?1:0,x=G):(x=Math.floor(Math.log(i)/Math.LN2),i*(I=Math.pow(2,-x))<1&&(x--,I*=2),(i+=x+H>=1?K/I:K*Math.pow(2,1-H))*I>=2&&(x++,I/=2),x+H>=G?(k=0,x=G):x+H>=1?(k=(i*I-1)*Math.pow(2,m),x+=H):(k=i*Math.pow(2,H-1)*Math.pow(2,m),x=0));m>=8;a[s+J]=255&k,J+=Q,k/=256,m-=8);for(x=x<<m|k,z+=m;z>0;a[s+J]=255&x,J+=Q,x/=256,z-=8);a[s+J-Q]|=128*se},jl=Gn;function Gn(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}Gn.Varint=0,Gn.Fixed64=1,Gn.Bytes=2,Gn.Fixed32=5;var kd=4294967296,wf=1/kd,Ef=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function io(a){return a.type===Gn.Bytes?a.readVarint()+a.pos:a.pos+1}function ba(a,i,s){return s?4294967296*i+(a>>>0):4294967296*(i>>>0)+(a>>>0)}function Cf(a,i,s){var u=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));s.realloc(u);for(var m=s.pos-1;m>=a;m--)s.buf[m+u]=s.buf[m]}function ng(a,i){for(var s=0;s<a.length;s++)i.writeVarint(a[s])}function ig(a,i){for(var s=0;s<a.length;s++)i.writeSVarint(a[s])}function rg(a,i){for(var s=0;s<a.length;s++)i.writeFloat(a[s])}function og(a,i){for(var s=0;s<a.length;s++)i.writeDouble(a[s])}function sg(a,i){for(var s=0;s<a.length;s++)i.writeBoolean(a[s])}function ag(a,i){for(var s=0;s<a.length;s++)i.writeFixed32(a[s])}function lg(a,i){for(var s=0;s<a.length;s++)i.writeSFixed32(a[s])}function cg(a,i){for(var s=0;s<a.length;s++)i.writeFixed64(a[s])}function ug(a,i){for(var s=0;s<a.length;s++)i.writeSFixed64(a[s])}function mu(a,i){return(a[i]|a[i+1]<<8|a[i+2]<<16)+16777216*a[i+3]}function xa(a,i,s){a[s]=i,a[s+1]=i>>>8,a[s+2]=i>>>16,a[s+3]=i>>>24}function Sf(a,i){return(a[i]|a[i+1]<<8|a[i+2]<<16)+(a[i+3]<<24)}function dg(a,i,s){i.glyphs=[],a===1&&s.readMessage(pg,i)}function pg(a,i,s){if(a===3){const{id:u,bitmap:m,width:y,height:x,left:k,top:I,advance:z}=s.readMessage(fg,{});i.glyphs.push({id:u,bitmap:new no({width:y+6,height:x+6},m),metrics:{width:y,height:x,left:k,top:I,advance:z}})}else a===4?i.ascender=s.readSVarint():a===5&&(i.descender=s.readSVarint())}function fg(a,i,s){a===1?i.id=s.readVarint():a===2?i.bitmap=s.readBytes():a===3?i.width=s.readVarint():a===4?i.height=s.readVarint():a===5?i.left=s.readSVarint():a===6?i.top=s.readSVarint():a===7&&(i.advance=s.readVarint())}function Rd(a){let i=0,s=0;for(const x of a)i+=x.w*x.h,s=Math.max(s,x.w);a.sort((x,k)=>k.h-x.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),s),h:1/0}];let m=0,y=0;for(const x of a)for(let k=u.length-1;k>=0;k--){const I=u[k];if(!(x.w>I.w||x.h>I.h)){if(x.x=I.x,x.y=I.y,y=Math.max(y,x.y+x.h),m=Math.max(m,x.x+x.w),x.w===I.w&&x.h===I.h){const z=u.pop();k<u.length&&(u[k]=z)}else x.h===I.h?(I.x+=x.w,I.w-=x.w):x.w===I.w?(I.y+=x.h,I.h-=x.h):(u.push({x:I.x+x.w,y:I.y,w:I.w-x.w,h:x.h}),I.y+=x.h,I.h-=x.h);break}}return{w:m,h:y,fill:i/(m*y)||0}}Gn.prototype={destroy:function(){this.buf=null},readFields:function(a,i,s){for(s=s||this.length;this.pos<s;){var u=this.readVarint(),m=u>>3,y=this.pos;this.type=7&u,a(m,i,this),this.pos===y&&this.skip(u)}return i},readMessage:function(a,i){return this.readFields(a,i,this.readVarint()+this.pos)},readFixed32:function(){var a=mu(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=Sf(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=mu(this.buf,this.pos)+mu(this.buf,this.pos+4)*kd;return this.pos+=8,a},readSFixed64:function(){var a=mu(this.buf,this.pos)+Sf(this.buf,this.pos+4)*kd;return this.pos+=8,a},readFloat:function(){var a=bf(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=bf(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var i,s,u=this.buf;return i=127&(s=u[this.pos++]),s<128?i:(i|=(127&(s=u[this.pos++]))<<7,s<128?i:(i|=(127&(s=u[this.pos++]))<<14,s<128?i:(i|=(127&(s=u[this.pos++]))<<21,s<128?i:function(m,y,x){var k,I,z=x.buf;if(k=(112&(I=z[x.pos++]))>>4,I<128||(k|=(127&(I=z[x.pos++]))<<3,I<128)||(k|=(127&(I=z[x.pos++]))<<10,I<128)||(k|=(127&(I=z[x.pos++]))<<17,I<128)||(k|=(127&(I=z[x.pos++]))<<24,I<128)||(k|=(1&(I=z[x.pos++]))<<31,I<128))return ba(m,k,y);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(s=u[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var a=this.readVarint()+this.pos,i=this.pos;return this.pos=a,a-i>=12&&Ef?function(s,u,m){return Ef.decode(s.subarray(u,m))}(this.buf,i,a):function(s,u,m){for(var y="",x=u;x<m;){var k,I,z,G=s[x],H=null,K=G>239?4:G>223?3:G>191?2:1;if(x+K>m)break;K===1?G<128&&(H=G):K===2?(192&(k=s[x+1]))==128&&(H=(31&G)<<6|63&k)<=127&&(H=null):K===3?(I=s[x+2],(192&(k=s[x+1]))==128&&(192&I)==128&&((H=(15&G)<<12|(63&k)<<6|63&I)<=2047||H>=55296&&H<=57343)&&(H=null)):K===4&&(I=s[x+2],z=s[x+3],(192&(k=s[x+1]))==128&&(192&I)==128&&(192&z)==128&&((H=(15&G)<<18|(63&k)<<12|(63&I)<<6|63&z)<=65535||H>=1114112)&&(H=null)),H===null?(H=65533,K=1):H>65535&&(H-=65536,y+=String.fromCharCode(H>>>10&1023|55296),H=56320|1023&H),y+=String.fromCharCode(H),x+=K}return y}(this.buf,i,a)},readBytes:function(){var a=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,a);return this.pos=a,i},readPackedVarint:function(a,i){if(this.type!==Gn.Bytes)return a.push(this.readVarint(i));var s=io(this);for(a=a||[];this.pos<s;)a.push(this.readVarint(i));return a},readPackedSVarint:function(a){if(this.type!==Gn.Bytes)return a.push(this.readSVarint());var i=io(this);for(a=a||[];this.pos<i;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==Gn.Bytes)return a.push(this.readBoolean());var i=io(this);for(a=a||[];this.pos<i;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==Gn.Bytes)return a.push(this.readFloat());var i=io(this);for(a=a||[];this.pos<i;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==Gn.Bytes)return a.push(this.readDouble());var i=io(this);for(a=a||[];this.pos<i;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==Gn.Bytes)return a.push(this.readFixed32());var i=io(this);for(a=a||[];this.pos<i;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==Gn.Bytes)return a.push(this.readSFixed32());var i=io(this);for(a=a||[];this.pos<i;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==Gn.Bytes)return a.push(this.readFixed64());var i=io(this);for(a=a||[];this.pos<i;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==Gn.Bytes)return a.push(this.readSFixed64());var i=io(this);for(a=a||[];this.pos<i;)a.push(this.readSFixed64());return a},skip:function(a){var i=7&a;if(i===Gn.Varint)for(;this.buf[this.pos++]>127;);else if(i===Gn.Bytes)this.pos=this.readVarint()+this.pos;else if(i===Gn.Fixed32)this.pos+=4;else{if(i!==Gn.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(a,i){this.writeVarint(a<<3|i)},realloc:function(a){for(var i=this.length||16;i<this.pos+a;)i*=2;if(i!==this.length){var s=new Uint8Array(i);s.set(this.buf),this.buf=s,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),xa(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),xa(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),xa(this.buf,-1&a,this.pos),xa(this.buf,Math.floor(a*wf),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),xa(this.buf,-1&a,this.pos),xa(this.buf,Math.floor(a*wf),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(i,s){var u,m;if(i>=0?(u=i%4294967296|0,m=i/4294967296|0):(m=~(-i/4294967296),4294967295^(u=~(-i%4294967296))?u=u+1|0:(u=0,m=m+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(y,x,k){k.buf[k.pos++]=127&y|128,y>>>=7,k.buf[k.pos++]=127&y|128,y>>>=7,k.buf[k.pos++]=127&y|128,y>>>=7,k.buf[k.pos++]=127&y|128,k.buf[k.pos]=127&(y>>>=7)}(u,0,s),function(y,x){var k=(7&y)<<4;x.buf[x.pos++]|=k|((y>>>=3)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y)))))}(m,s)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(Boolean(a))},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var i=this.pos;this.pos=function(u,m,y){for(var x,k,I=0;I<m.length;I++){if((x=m.charCodeAt(I))>55295&&x<57344){if(!k){x>56319||I+1===m.length?(u[y++]=239,u[y++]=191,u[y++]=189):k=x;continue}if(x<56320){u[y++]=239,u[y++]=191,u[y++]=189,k=x;continue}x=k-55296<<10|x-56320|65536,k=null}else k&&(u[y++]=239,u[y++]=191,u[y++]=189,k=null);x<128?u[y++]=x:(x<2048?u[y++]=x>>6|192:(x<65536?u[y++]=x>>12|224:(u[y++]=x>>18|240,u[y++]=x>>12&63|128),u[y++]=x>>6&63|128),u[y++]=63&x|128)}return y}(this.buf,a,this.pos);var s=this.pos-i;s>=128&&Cf(i,s,this),this.pos=i-1,this.writeVarint(s),this.pos+=s},writeFloat:function(a){this.realloc(4),xf(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),xf(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var i=a.length;this.writeVarint(i),this.realloc(i);for(var s=0;s<i;s++)this.buf[this.pos++]=a[s]},writeRawMessage:function(a,i){this.pos++;var s=this.pos;a(i,this);var u=this.pos-s;u>=128&&Cf(s,u,this),this.pos=s-1,this.writeVarint(u),this.pos+=u},writeMessage:function(a,i,s){this.writeTag(a,Gn.Bytes),this.writeRawMessage(i,s)},writePackedVarint:function(a,i){i.length&&this.writeMessage(a,ng,i)},writePackedSVarint:function(a,i){i.length&&this.writeMessage(a,ig,i)},writePackedBoolean:function(a,i){i.length&&this.writeMessage(a,sg,i)},writePackedFloat:function(a,i){i.length&&this.writeMessage(a,rg,i)},writePackedDouble:function(a,i){i.length&&this.writeMessage(a,og,i)},writePackedFixed32:function(a,i){i.length&&this.writeMessage(a,ag,i)},writePackedSFixed32:function(a,i){i.length&&this.writeMessage(a,lg,i)},writePackedFixed64:function(a,i){i.length&&this.writeMessage(a,cg,i)},writePackedSFixed64:function(a,i){i.length&&this.writeMessage(a,ug,i)},writeBytesField:function(a,i){this.writeTag(a,Gn.Bytes),this.writeBytes(i)},writeFixed32Field:function(a,i){this.writeTag(a,Gn.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(a,i){this.writeTag(a,Gn.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(a,i){this.writeTag(a,Gn.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(a,i){this.writeTag(a,Gn.Fixed64),this.writeSFixed64(i)},writeVarintField:function(a,i){this.writeTag(a,Gn.Varint),this.writeVarint(i)},writeSVarintField:function(a,i){this.writeTag(a,Gn.Varint),this.writeSVarint(i)},writeStringField:function(a,i){this.writeTag(a,Gn.Bytes),this.writeString(i)},writeFloatField:function(a,i){this.writeTag(a,Gn.Fixed32),this.writeFloat(i)},writeDoubleField:function(a,i){this.writeTag(a,Gn.Fixed64),this.writeDouble(i)},writeBooleanField:function(a,i){this.writeVarintField(a,Boolean(i))}};class $d{constructor(i,{pixelRatio:s,version:u,stretchX:m,stretchY:y,content:x}){this.paddedRect=i,this.pixelRatio=s,this.stretchX=m,this.stretchY=y,this.content=x,this.version=u}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Tf{constructor(i,s){const u={},m={};this.haveRenderCallbacks=[];const y=[];this.addImages(i,u,y),this.addImages(s,m,y);const{w:x,h:k}=Rd(y),I=new Wi({width:x||1,height:k||1});for(const z in i){const G=i[z],H=u[z].paddedRect;Wi.copy(G.data,I,{x:0,y:0},{x:H.x+1,y:H.y+1},G.data)}for(const z in s){const G=s[z],H=m[z].paddedRect,K=H.x+1,J=H.y+1,Q=G.data.width,se=G.data.height;Wi.copy(G.data,I,{x:0,y:0},{x:K,y:J},G.data),Wi.copy(G.data,I,{x:0,y:se-1},{x:K,y:J-1},{width:Q,height:1}),Wi.copy(G.data,I,{x:0,y:0},{x:K,y:J+se},{width:Q,height:1}),Wi.copy(G.data,I,{x:Q-1,y:0},{x:K-1,y:J},{width:1,height:se}),Wi.copy(G.data,I,{x:0,y:0},{x:K+Q,y:J},{width:1,height:se})}this.image=I,this.iconPositions=u,this.patternPositions=m}addImages(i,s,u){for(const m in i){const y=i[m],x={x:0,y:0,w:y.data.width+2,h:y.data.height+2};u.push(x),s[m]=new $d(x,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(i,s){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(u=>i.hasImage(u)),i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const u in i.updatedImages)this.patchUpdatedImage(this.iconPositions[u],i.getImage(u),s),this.patchUpdatedImage(this.patternPositions[u],i.getImage(u),s)}patchUpdatedImage(i,s,u){if(!i||!s||i.version===s.version)return;i.version=s.version;const[m,y]=i.tl;u.update(s.data,void 0,{x:m,y})}}qt($d,"ImagePosition"),qt(Tf,"ImageAtlas");const ir={horizontal:1,vertical:2,horizontalOnly:3};class Gl{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(i,s){const u=new Gl;return u.scale=i||1,u.fontStack=s,u}static forImage(i){const s=new Gl;return s.imageName=i,s}}class wa{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,s){const u=new wa;for(let m=0;m<i.sections.length;m++){const y=i.sections[m];y.image?u.addImageSection(y):u.addTextSection(y,s)}return u}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSections(){return this.sections}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(i){this.text=function(s,u){let m="";for(let y=0;y<s.length;y++){const x=s.charCodeAt(y+1)||null,k=s.charCodeAt(y-1)||null;m+=!u&&(x&&hs(x)&&!Ul[s[y+1]]||k&&hs(k)&&!Ul[s[y-1]])||!Ul[s[y]]?s[y]:Ul[s[y]]}return m}(this.text,i)}trim(){let i=0;for(let u=0;u<this.text.length&&gu[this.text.charCodeAt(u)];u++)i++;let s=this.text.length;for(let u=this.text.length-1;u>=0&&u>=i&&gu[this.text.charCodeAt(u)];u--)s--;this.text=this.text.substring(i,s),this.sectionIndex=this.sectionIndex.slice(i,s)}substring(i,s){const u=new wa;return u.text=this.text.substring(i,s),u.sectionIndex=this.sectionIndex.slice(i,s),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,s)=>Math.max(i,this.sections[s].scale),0)}addTextSection(i,s){this.text+=i.text,this.sections.push(Gl.forText(i.scale,i.fontStack||s));const u=this.sections.length-1;for(let m=0;m<i.text.length;++m)this.sectionIndex.push(u)}addImageSection(i){const s=i.image?i.image.name:"";if(s.length===0)return void Zt("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push(Gl.forImage(s)),this.sectionIndex.push(this.sections.length-1)):Zt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Nd(a,i,s,u,m,y,x,k,I,z,G,H,K,J,Q,se){const pe=wa.fromFeature(a,m);let we;H===ir.vertical&&pe.verticalizePunctuation(K);const{processBidirectionalText:Ne,processStyledBidirectionalText:Se}=he;if(Ne&&pe.sections.length===1){we=[];const Ie=Ne(pe.toString(),Md(pe,z,y,i,u,J,Q));for(const nt of Ie){const et=new wa;et.text=nt,et.sections=pe.sections;for(let ut=0;ut<nt.length;ut++)et.sectionIndex.push(0);we.push(et)}}else if(Se){we=[];const Ie=Se(pe.text,pe.sectionIndex,Md(pe,z,y,i,u,J,Q));for(const nt of Ie){const et=new wa;et.text=nt[0],et.sectionIndex=nt[1],et.sections=pe.sections,we.push(et)}}else we=function(Ie,nt){const et=[],ut=Ie.text;let Nt=0;for(const it of nt)et.push(Ie.substring(Nt,it)),Nt=it;return Nt<ut.length&&et.push(Ie.substring(Nt,ut.length)),et}(pe,Md(pe,z,y,i,u,J,Q));const ke=[],ze={positionedLines:ke,text:pe.toString(),top:G[1],bottom:G[1],left:G[0],right:G[0],writingMode:H,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Ie,nt,et,ut,Nt,it,ft,wt,ht,Rt,Et,Dt){let hn=0,gn=0,Jt=0;const Lt=wt==="right"?1:wt==="left"?0:.5;let Sn=!1;for(const _n of Nt){const Rn=_n.getSections();for(const Hn of Rn){if(Hn.imageName)continue;const Vn=nt[Hn.fontStack];if(Vn&&(Sn=Vn.ascender!==void 0&&Vn.descender!==void 0,!Sn))break}if(!Sn)break}let pn=0;for(const _n of Nt){_n.trim();const Rn=_n.getMaxScale(),Hn=(Rn-1)*Si,Vn={positionedGlyphs:[],lineOffset:0};Ie.positionedLines[pn]=Vn;const Bn=Vn.positionedGlyphs;let Zn=0;if(!_n.length()){gn+=it,++pn;continue}let ti=0,_i=0;for(let Tn=0;Tn<_n.length();Tn++){const oi=_n.getSection(Tn),Ni=_n.getSectionIndex(Tn),Mn=_n.getCharCode(Tn);let ni=oi.scale,Di=null,Jn=null,ai=null,vi=Si,hi=0;const Ti=!(ht===ir.horizontal||!Et&&!ua(Mn)||Et&&(gu[Mn]||(jt=Mn,Pc(jt)||Dc(jt)||Bc(jt)||fs(jt)||Tl(jt))));if(oi.imageName){const Bi=ut[oi.imageName];if(!Bi)continue;ai=oi.imageName,Ie.iconsInText=Ie.iconsInText||!0,Jn=Bi.paddedRect;const yi=Bi.displaySize;ni=ni*Si/Dt,Di={width:yi[0],height:yi[1],left:1,top:-3,advance:Ti?yi[1]:yi[0],localGlyph:!1},hi=Sn?-Di.height*ni:Rn*Si-17-yi[1]*ni,vi=Di.advance;const so=(Ti?yi[0]:yi[1])*ni-Si*Rn;so>0&&so>Zn&&(Zn=so)}else{const Bi=et[oi.fontStack];if(!Bi)continue;Bi[Mn]&&(Jn=Bi[Mn]);const yi=nt[oi.fontStack];if(!yi)continue;const so=yi.glyphs[Mn];if(!so)continue;if(Di=so.metrics,vi=Mn!==8203?Si:0,Sn){const Ra=yi.ascender!==void 0?Math.abs(yi.ascender):0,nc=yi.descender!==void 0?Math.abs(yi.descender):0,ic=(Ra+nc)*ni;ti<ic&&(ti=ic,_i=(Ra-nc)/2*ni),hi=-Ra*ni}else hi=(Rn-ni)*Si-17}Ti?(Ie.verticalizable=!0,Bn.push({glyph:Mn,imageName:ai,x:hn,y:gn+hi,vertical:Ti,scale:ni,localGlyph:Di.localGlyph,fontStack:oi.fontStack,sectionIndex:Ni,metrics:Di,rect:Jn}),hn+=vi*ni+Rt):(Bn.push({glyph:Mn,imageName:ai,x:hn,y:gn+hi,vertical:Ti,scale:ni,localGlyph:Di.localGlyph,fontStack:oi.fontStack,sectionIndex:Ni,metrics:Di,rect:Jn}),hn+=Di.advance*ni+Rt)}Bn.length!==0&&(Jt=Math.max(hn-Rt,Jt),Sn?Nf(Bn,Lt,Zn,_i,it*Rn/2):Nf(Bn,Lt,Zn,0,it/2)),hn=0;const ji=it*Rn+Zn;Vn.lineOffset=Math.max(Zn,Hn),gn+=ji,++pn}var jt;const qn=gn,{horizontalAlign:Fn,verticalAlign:Xn}=Id(ft);(function(_n,Rn,Hn,Vn,Bn,Zn){const ti=(Rn-Hn)*Bn,_i=-Zn*Vn;for(const ji of _n)for(const Tn of ji.positionedGlyphs)Tn.x+=ti,Tn.y+=_i})(Ie.positionedLines,Lt,Fn,Xn,Jt,qn),Ie.top+=-Xn*qn,Ie.bottom=Ie.top+qn,Ie.left+=-Fn*Jt,Ie.right=Ie.left+Jt,Ie.hasBaseline=Sn}(ze,i,s,u,we,x,k,I,H,z,K,se),!function(Ie){for(const nt of Ie)if(nt.positionedGlyphs.length!==0)return!1;return!0}(ke)&&ze}const gu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},hg={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Af(a,i,s,u,m,y){if(i.imageName){const x=u[i.imageName];return x?x.displaySize[0]*i.scale*Si/y+m:0}{const x=s[i.fontStack],k=x&&x.glyphs[a];return k?k.metrics.advance*i.scale+m:0}}function kf(a,i,s,u){const m=Math.pow(a-i,2);return u?a<i?m/2:2*m:m+Math.abs(s)*s}function mg(a,i,s){let u=0;return a===10&&(u-=1e4),s&&(u+=150),a!==40&&a!==65288||(u+=50),i!==41&&i!==65289||(u+=50),u}function Rf(a,i,s,u,m,y){let x=null,k=kf(i,s,m,y);for(const I of u){const z=kf(i-I.x,s,m,y)+I.badness;z<=k&&(x=I,k=z)}return{index:a,x:i,priorBreak:x,badness:k}}function $f(a){return a?$f(a.priorBreak).concat(a.index):[]}function Md(a,i,s,u,m,y,x){if(y!=="point")return[];if(!a)return[];const k=[],I=function(K,J,Q,se,pe,we){let Ne=0;for(let Se=0;Se<K.length();Se++){const ke=K.getSection(Se);Ne+=Af(K.getCharCode(Se),ke,se,pe,J,we)}return Ne/Math.max(1,Math.ceil(Ne/Q))}(a,i,s,u,m,x),z=a.text.indexOf("\u200B")>=0;let G=0;for(let K=0;K<a.length();K++){const J=a.getSection(K),Q=a.getCharCode(K);if(gu[Q]||(G+=Af(Q,J,u,m,i,x)),K<a.length()-1){const se=!((H=Q)<11904||!(bl(H)||Vc(H)||Sl(H)||qc(H)||El(H)||zc(H)||Uc(H)||aa(H)||Cl(H)||ps(H)||wl(H)||Al(H)||yl(H)||ds(H)||Fc(H)||xl(H)||Hr(H)||Hc(H)||jc(H)||la(H)));(hg[Q]||se||J.imageName)&&k.push(Rf(K+1,G,I,k,mg(Q,a.getCharCode(K+1),se&&z),!1))}}var H;return $f(Rf(a.length(),G,I,k,0,!0))}function Id(a){let i=.5,s=.5;switch(a){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:i,verticalAlign:s}}function Nf(a,i,s,u,m){if(!(i||s||u||m))return;const y=a.length-1,x=a[y],k=(x.x+x.metrics.advance*x.scale)*i;for(let I=0;I<=y;I++)a[I].x-=k,a[I].y+=s+u+m}function gg(a,i,s){const{horizontalAlign:u,verticalAlign:m}=Id(s),y=i[0]-a.displaySize[0]*u,x=i[1]-a.displaySize[1]*m;return{image:a,top:x,bottom:x+a.displaySize[1],left:y,right:y+a.displaySize[0]}}function Mf(a,i,s,u,m,y){const x=a.image;let k;if(x.content){const pe=x.content,we=x.pixelRatio||1;k=[pe[0]/we,pe[1]/we,x.displaySize[0]-pe[2]/we,x.displaySize[1]-pe[3]/we]}const I=i.left*y,z=i.right*y;let G,H,K,J;s==="width"||s==="both"?(J=m[0]+I-u[3],H=m[0]+z+u[1]):(J=m[0]+(I+z-x.displaySize[0])/2,H=J+x.displaySize[0]);const Q=i.top*y,se=i.bottom*y;return s==="height"||s==="both"?(G=m[1]+Q-u[0],K=m[1]+se+u[2]):(G=m[1]+(Q+se-x.displaySize[1])/2,K=G+x.displaySize[1]),{image:x,top:G,right:H,bottom:K,left:J,collisionPadding:k}}class ro extends T{constructor(i,s,u,m,y){super(i,s),this.angle=m,this.z=u,y!==void 0&&(this.segment=y)}clone(){return new ro(this.x,this.y,this.z,this.angle,this.segment)}}function If(a,i,s,u,m){if(i.segment===void 0)return!0;let y=i,x=i.segment+1,k=0;for(;k>-s/2;){if(x--,x<0)return!1;k-=a[x].dist(y),y=a[x]}k+=a[x].dist(a[x+1]),x++;const I=[];let z=0;for(;k<s/2;){const G=a[x],H=a[x+1];if(!H)return!1;let K=a[x-1].angleTo(G)-G.angleTo(H);for(K=Math.abs((K+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:k,angleDelta:K}),z+=K;k-I[0].distance>u;)z-=I.shift().angleDelta;if(z>m)return!1;x++,k+=G.dist(H)}return!0}function Lf(a){let i=0;for(let s=0;s<a.length-1;s++)i+=a[s].dist(a[s+1]);return i}function Of(a,i,s){return a?.6*i*s:0}function Pf(a,i){return Math.max(a?a.right-a.left:0,i?i.right-i.left:0)}function _g(a,i,s,u,m,y){const x=Of(s,m,y),k=Pf(s,u)*y;let I=0;const z=Lf(a)/2;for(let G=0;G<a.length-1;G++){const H=a[G],K=a[G+1],J=H.dist(K);if(I+J>z){const Q=(z-I)/J,se=An(H.x,K.x,Q),pe=An(H.y,K.y,Q),we=new ro(se,pe,0,K.angleTo(H),G);return!x||If(a,we,k,x,i)?we:void 0}I+=J}}function vg(a,i,s,u,m,y,x,k,I){const z=Of(u,y,x),G=Pf(u,m),H=G*x,K=a[0].x===0||a[0].x===I||a[0].y===0||a[0].y===I;return i-H<i/4&&(i=H+i/4),Df(a,K?i/2*k%i:(G/2+2*y)*x*k%i,i,z,s,H,K,!1,I)}function Df(a,i,s,u,m,y,x,k,I){const z=y/2,G=Lf(a);let H=0,K=i-s,J=[];for(let Q=0;Q<a.length-1;Q++){const se=a[Q],pe=a[Q+1],we=se.dist(pe),Ne=pe.angleTo(se);for(;K+s<H+we;){K+=s;const Se=(K-H)/we,ke=An(se.x,pe.x,Se),ze=An(se.y,pe.y,Se);if(ke>=0&&ke<I&&ze>=0&&ze<I&&K-z>=0&&K+z<=G){const Ie=new ro(ke,ze,0,Ne,Q);Ie._round(),u&&!If(a,Ie,y,u,m)||J.push(Ie)}}H+=we}return k||J.length||x||(J=Df(a,H/2,s,u,m,y,x,!0,I)),J}function Bf(a,i,s,u,m){const y=[];for(let x=0;x<a.length;x++){const k=a[x];let I;for(let z=0;z<k.length-1;z++){let G=k[z],H=k[z+1];G.x<i&&H.x<i||(G.x<i?G=new T(i,G.y+(i-G.x)/(H.x-G.x)*(H.y-G.y))._round():H.x<i&&(H=new T(i,G.y+(i-G.x)/(H.x-G.x)*(H.y-G.y))._round()),G.y<s&&H.y<s||(G.y<s?G=new T(G.x+(s-G.y)/(H.y-G.y)*(H.x-G.x),s)._round():H.y<s&&(H=new T(G.x+(s-G.y)/(H.y-G.y)*(H.x-G.x),s)._round()),G.x>=u&&H.x>=u||(G.x>=u?G=new T(u,G.y+(u-G.x)/(H.x-G.x)*(H.y-G.y))._round():H.x>=u&&(H=new T(u,G.y+(u-G.x)/(H.x-G.x)*(H.y-G.y))._round()),G.y>=m&&H.y>=m||(G.y>=m?G=new T(G.x+(m-G.y)/(H.y-G.y)*(H.x-G.x),m)._round():H.y>=m&&(H=new T(G.x+(m-G.y)/(H.y-G.y)*(H.x-G.x),m)._round()),I&&G.equals(I[I.length-1])||(I=[G],y.push(I)),I.push(H)))))}}return y}qt(ro,"Anchor");const ql=1e20;function zf(a,i,s,u,m,y,x,k,I){for(let z=i;z<i+u;z++)Ff(a,s*y+z,y,m,x,k,I);for(let z=s;z<s+m;z++)Ff(a,z*y+i,1,u,x,k,I)}function Ff(a,i,s,u,m,y,x){y[0]=0,x[0]=-ql,x[1]=ql,m[0]=a[i];for(let k=1,I=0,z=0;k<u;k++){m[k]=a[i+k*s];const G=k*k;do{const H=y[I];z=(m[k]-m[H]+G-H*H)/(k-H)/2}while(z<=x[I]&&--I>-1);I++,y[I]=k,x[I]=z,x[I+1]=ql}for(let k=0,I=0;k<u;k++){for(;x[I+1]<k;)I++;const z=y[I],G=k-z;a[i+k*s]=m[z]+G*G}}const Ld={none:0,ideographs:1,all:2};class Ea{constructor(i,s,u){this.requestManager=i,this.localGlyphMode=s,this.localFontFamily=u,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(i){this.url=i}getGlyphs(i,s){const u=[];for(const m in i)for(const y of i[m])u.push({stack:m,id:y});ce(u,({stack:m,id:y},x)=>{let k=this.entries[m];k||(k=this.entries[m]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let I=k.glyphs[y];if(I!==void 0)return void x(null,{stack:m,id:y,glyph:I});if(I=this._tinySDF(k,m,y),I)return k.glyphs[y]=I,void x(null,{stack:m,id:y,glyph:I});const z=Math.floor(y/256);if(256*z>65535)return void x(new Error("glyphs > 65535 not supported"));if(k.ranges[z])return void x(null,{stack:m,id:y,glyph:I});let G=k.requests[z];G||(G=k.requests[z]=[],Ea.loadGlyphRange(m,z,this.url,this.requestManager,(H,K)=>{if(K){k.ascender=K.ascender,k.descender=K.descender;for(const J in K.glyphs)this._doesCharSupportLocalGlyph(+J)||(k.glyphs[+J]=K.glyphs[+J]);k.ranges[z]=!0}for(const J of G)J(H,K);delete k.requests[z]})),G.push((H,K)=>{H?x(H):K&&x(null,{stack:m,id:y,glyph:K.glyphs[y]||null})})},(m,y)=>{if(m)s(m);else if(y){const x={};for(const{stack:k,id:I,glyph:z}of y)x[k]===void 0&&(x[k]={}),x[k].glyphs===void 0&&(x[k].glyphs={}),x[k].glyphs[I]=z&&{id:z.id,bitmap:z.bitmap.clone(),metrics:z.metrics},x[k].ascender=this.entries[k].ascender,x[k].descender=this.entries[k].descender;s(null,x)}})}_doesCharSupportLocalGlyph(i){return this.localGlyphMode!==Ld.none&&(this.localGlyphMode===Ld.all?!!this.localFontFamily:!!this.localFontFamily&&(ps(i)||Gc(i)||yl(i)||Hr(i)||aa(i)))}_tinySDF(i,s,u){const m=this.localFontFamily;if(!m||!this._doesCharSupportLocalGlyph(u))return;let y=i.tinySDF;if(!y){let se="400";/bold/i.test(s)?se="900":/medium/i.test(s)?se="500":/light/i.test(s)&&(se="200"),y=i.tinySDF=new Ea.TinySDF({fontFamily:m,fontWeight:se,fontSize:48,buffer:6,radius:16}),y.fontWeight=se}if(this.localGlyphs[y.fontWeight][u])return this.localGlyphs[y.fontWeight][u];const x=String.fromCharCode(u),{data:k,width:I,height:z,glyphWidth:G,glyphHeight:H,glyphLeft:K,glyphTop:J,glyphAdvance:Q}=y.draw(x);return this.localGlyphs[y.fontWeight][u]={id:u,bitmap:new no({width:I,height:z},k),metrics:{width:G/2,height:H/2,left:K/2,top:J/2-27,advance:Q/2,localGlyph:!0}}}}function Vf(a,i,s,u){const m=[],y=a.image,x=y.pixelRatio,k=y.paddedRect.w-2,I=y.paddedRect.h-2,z=a.right-a.left,G=a.bottom-a.top,H=y.stretchX||[[0,k]],K=y.stretchY||[[0,I]],J=(it,ft)=>it+ft[1]-ft[0],Q=H.reduce(J,0),se=K.reduce(J,0),pe=k-Q,we=I-se;let Ne=0,Se=Q,ke=0,ze=se,Ie=0,nt=pe,et=0,ut=we;if(y.content&&u){const it=y.content;Ne=_u(H,0,it[0]),ke=_u(K,0,it[1]),Se=_u(H,it[0],it[2]),ze=_u(K,it[1],it[3]),Ie=it[0]-Ne,et=it[1]-ke,nt=it[2]-it[0]-Se,ut=it[3]-it[1]-ze}const Nt=(it,ft,wt,ht)=>{const Rt=vu(it.stretch-Ne,Se,z,a.left),Et=yu(it.fixed-Ie,nt,it.stretch,Q),Dt=vu(ft.stretch-ke,ze,G,a.top),hn=yu(ft.fixed-et,ut,ft.stretch,se),gn=vu(wt.stretch-Ne,Se,z,a.left),Jt=yu(wt.fixed-Ie,nt,wt.stretch,Q),Lt=vu(ht.stretch-ke,ze,G,a.top),Sn=yu(ht.fixed-et,ut,ht.stretch,se),pn=new T(Rt,Dt),jt=new T(gn,Dt),qn=new T(gn,Lt),Fn=new T(Rt,Lt),Xn=new T(Et/x,hn/x),_n=new T(Jt/x,Sn/x),Rn=i*Math.PI/180;if(Rn){const Bn=Math.sin(Rn),Zn=Math.cos(Rn),ti=[Zn,-Bn,Bn,Zn];pn._matMult(ti),jt._matMult(ti),Fn._matMult(ti),qn._matMult(ti)}const Hn=it.stretch+it.fixed,Vn=ft.stretch+ft.fixed;return{tl:pn,tr:jt,bl:Fn,br:qn,tex:{x:y.paddedRect.x+1+Hn,y:y.paddedRect.y+1+Vn,w:wt.stretch+wt.fixed-Hn,h:ht.stretch+ht.fixed-Vn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Xn,pixelOffsetBR:_n,minFontScaleX:nt/x/z,minFontScaleY:ut/x/G,isSDF:s}};if(u&&(y.stretchX||y.stretchY)){const it=Uf(H,pe,Q),ft=Uf(K,we,se);for(let wt=0;wt<it.length-1;wt++){const ht=it[wt],Rt=it[wt+1];for(let Et=0;Et<ft.length-1;Et++)m.push(Nt(ht,ft[Et],Rt,ft[Et+1]))}}else m.push(Nt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:k+1},{fixed:0,stretch:I+1}));return m}function _u(a,i,s){let u=0;for(const m of a)u+=Math.max(i,Math.min(s,m[1]))-Math.max(i,Math.min(s,m[0]));return u}function Uf(a,i,s){const u=[{fixed:-1,stretch:0}];for(const[m,y]of a){const x=u[u.length-1];u.push({fixed:m-x.stretch,stretch:x.stretch}),u.push({fixed:m-x.stretch,stretch:x.stretch+(y-m)})}return u.push({fixed:i+1,stretch:s}),u}function vu(a,i,s,u){return a/i*s+u}function yu(a,i,s,u){return a-i*s/u}function yg(a,i,s,u){const m=i+a.positionedLines[u].lineOffset;return u===0?s+m/2:s+(m+(i+a.positionedLines[u-1].lineOffset))/2}Ea.loadGlyphRange=function(a,i,s,u,m){const y=256*i,x=y+255,k=u.transformRequest(u.normalizeGlyphsURL(s).replace("{fontstack}",a).replace("{range}",`${y}-${x}`),Ve.Glyphs);Ye(k,(I,z)=>{if(I)m(I);else if(z){const G={},H=function(K){return new jl(K).readFields(dg,{})}(z);for(const K of H.glyphs)G[K.id]=K;m(null,{glyphs:G,ascender:H.ascender,descender:H.descender})}})},Ea.TinySDF=class{constructor({fontSize:a=24,buffer:i=3,radius:s=8,cutoff:u=.25,fontFamily:m="sans-serif",fontWeight:y="normal",fontStyle:x="normal"}={}){this.buffer=i,this.cutoff=u,this.radius=s;const k=this.size=a+4*i,I=this._createCanvas(k),z=this.ctx=I.getContext("2d",{willReadFrequently:!0});z.font=`${x} ${y} ${a}px ${m}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(k*k),this.gridInner=new Float64Array(k*k),this.f=new Float64Array(k),this.z=new Float64Array(k+1),this.v=new Uint16Array(k)}_createCanvas(a){const i=document.createElement("canvas");return i.width=i.height=a,i}draw(a){const{width:i,actualBoundingBoxAscent:s,actualBoundingBoxDescent:u,actualBoundingBoxLeft:m,actualBoundingBoxRight:y}=this.ctx.measureText(a),x=Math.ceil(s),k=Math.min(this.size-this.buffer,Math.ceil(y-m)),I=Math.min(this.size-this.buffer,x+Math.ceil(u)),z=k+2*this.buffer,G=I+2*this.buffer,H=Math.max(z*G,0),K=new Uint8ClampedArray(H),J={data:K,width:z,height:G,glyphWidth:k,glyphHeight:I,glyphTop:x,glyphLeft:0,glyphAdvance:i};if(k===0||I===0)return J;const{ctx:Q,buffer:se,gridInner:pe,gridOuter:we}=this;Q.clearRect(se,se,k,I),Q.fillText(a,se,se+x);const Ne=Q.getImageData(se,se,k,I);we.fill(ql,0,H),pe.fill(0,0,H);for(let Se=0;Se<I;Se++)for(let ke=0;ke<k;ke++){const ze=Ne.data[4*(Se*k+ke)+3]/255;if(ze===0)continue;const Ie=(Se+se)*z+ke+se;if(ze===1)we[Ie]=0,pe[Ie]=ql;else{const nt=.5-ze;we[Ie]=nt>0?nt*nt:0,pe[Ie]=nt<0?nt*nt:0}}zf(we,0,0,z,G,z,this.f,this.v,this.z),zf(pe,se,se,k,I,z,this.f,this.v,this.z);for(let Se=0;Se<H;Se++){const ke=Math.sqrt(we[Se])-Math.sqrt(pe[Se]);K[Se]=Math.round(255-255*(ke/this.radius+this.cutoff))}return J}};class bg{constructor(i=[],s=xg){if(this.data=i,this.length=this.data.length,this.compare=s,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(i){this.data.push(i),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const i=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:s,compare:u}=this,m=s[i];for(;i>0;){const y=i-1>>1,x=s[y];if(u(m,x)>=0)break;s[i]=x,i=y}s[i]=m}_down(i){const{data:s,compare:u}=this,m=this.length>>1,y=s[i];for(;i<m;){let x=1+(i<<1),k=s[x];const I=x+1;if(I<this.length&&u(s[I],k)<0&&(x=I,k=s[I]),u(k,y)>=0)break;s[i]=k,i=x}s[i]=y}}function xg(a,i){return a<i?-1:a>i?1:0}function wg(a,i=1,s=!1){let u=1/0,m=1/0,y=-1/0,x=-1/0;const k=a[0];for(let J=0;J<k.length;J++){const Q=k[J];(!J||Q.x<u)&&(u=Q.x),(!J||Q.y<m)&&(m=Q.y),(!J||Q.x>y)&&(y=Q.x),(!J||Q.y>x)&&(x=Q.y)}const I=Math.min(y-u,x-m);let z=I/2;const G=new bg([],Eg);if(I===0)return new T(u,m);for(let J=u;J<y;J+=I)for(let Q=m;Q<x;Q+=I)G.push(new Ca(J+z,Q+z,z,a));let H=function(J){let Q=0,se=0,pe=0;const we=J[0];for(let Ne=0,Se=we.length,ke=Se-1;Ne<Se;ke=Ne++){const ze=we[Ne],Ie=we[ke],nt=ze.x*Ie.y-Ie.x*ze.y;se+=(ze.x+Ie.x)*nt,pe+=(ze.y+Ie.y)*nt,Q+=3*nt}return new Ca(se/Q,pe/Q,0,J)}(a),K=G.length;for(;G.length;){const J=G.pop();(J.d>H.d||!H.d)&&(H=J,s&&console.log("found best %d after %d probes",Math.round(1e4*J.d)/1e4,K)),J.max-H.d<=i||(z=J.h/2,G.push(new Ca(J.p.x-z,J.p.y-z,z,a)),G.push(new Ca(J.p.x+z,J.p.y-z,z,a)),G.push(new Ca(J.p.x-z,J.p.y+z,z,a)),G.push(new Ca(J.p.x+z,J.p.y+z,z,a)),K+=4)}return s&&(console.log(`num probes: ${K}`),console.log(`best distance: ${H.d}`)),H.p}function Eg(a,i){return i.max-a.max}function Ca(a,i,s,u){this.p=new T(a,i),this.h=s,this.d=function(m,y){let x=!1,k=1/0;for(let I=0;I<y.length;I++){const z=y[I];for(let G=0,H=z.length,K=H-1;G<H;K=G++){const J=z[G],Q=z[K];J.y>m.y!=Q.y>m.y&&m.x<(Q.x-J.x)*(m.y-J.y)/(Q.y-J.y)+J.x&&(x=!x),k=Math.min(k,kp(m,J,Q))}}return(x?1:-1)*Math.sqrt(k)}(this.p,u),this.max=this.d+this.h*Math.SQRT2}const Od=Number.POSITIVE_INFINITY,Cg=Math.sqrt(2);function jf(a,i){return i[1]!==Od?function(s,u,m){let y=0,x=0;switch(u=Math.abs(u),m=Math.abs(m),s){case"top-right":case"top-left":case"top":x=m-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-m}switch(s){case"top-right":case"bottom-right":case"right":y=-u;break;case"top-left":case"bottom-left":case"left":y=u}return[y,x]}(a,i[0],i[1]):function(s,u){let m=0,y=0;u<0&&(u=0);const x=u/Cg;switch(s){case"top-right":case"top-left":y=x-7;break;case"bottom-right":case"bottom-left":y=7-x;break;case"bottom":y=7-u;break;case"top":y=u-7}switch(s){case"top-right":case"bottom-right":m=-x;break;case"top-left":case"bottom-left":m=x;break;case"left":m=u;break;case"right":m=-u}return[m,y]}(a,i[0])}function Sg(a,i,s,u,m,y,x,k,I,z){a.createArrays(),a.tilePixelRatio=an/(512*a.overscaling),a.compareText={},a.iconsNeedLinear=!1;const G=a.layers[0].layout,H=a.layers[0]._unevaluatedLayout._values,K={};if(a.textSizeData.kind==="composite"){const{minZoom:se,maxZoom:pe}=a.textSizeData;K.compositeTextSizes=[H["text-size"].possiblyEvaluate(new me(se),k),H["text-size"].possiblyEvaluate(new me(pe),k)]}if(a.iconSizeData.kind==="composite"){const{minZoom:se,maxZoom:pe}=a.iconSizeData;K.compositeIconSizes=[H["icon-size"].possiblyEvaluate(new me(se),k),H["icon-size"].possiblyEvaluate(new me(pe),k)]}K.layoutTextSize=H["text-size"].possiblyEvaluate(new me(I+1),k),K.layoutIconSize=H["icon-size"].possiblyEvaluate(new me(I+1),k),K.textMaxSize=H["text-size"].possiblyEvaluate(new me(18),k);const J=G.get("text-rotation-alignment")==="map"&&G.get("symbol-placement")!=="point",Q=G.get("text-size");for(const se of a.features){const pe=G.get("text-font").evaluate(se,{},k).join(","),we=Q.evaluate(se,{},k),Ne=K.layoutTextSize.evaluate(se,{},k),Se=(K.layoutIconSize.evaluate(se,{},k),{horizontal:{},vertical:void 0}),ke=se.text;let ze,Ie=[0,0];if(ke){const ut=ke.toString(),Nt=G.get("text-letter-spacing").evaluate(se,{},k)*Si,it=G.get("text-line-height").evaluate(se,{},k)*Si,ft=Xu(ut)?Nt:0,wt=G.get("text-anchor").evaluate(se,{},k),ht=G.get("text-variable-anchor");if(!ht){const Jt=G.get("text-radial-offset").evaluate(se,{},k);Ie=Jt?jf(wt,[Jt*Si,Od]):G.get("text-offset").evaluate(se,{},k).map(Lt=>Lt*Si)}let Rt=J?"center":G.get("text-justify").evaluate(se,{},k);const Et=G.get("symbol-placement"),Dt=Et==="point",hn=Et==="point"?G.get("text-max-width").evaluate(se,{},k)*Si:0,gn=Jt=>{a.allowVerticalPlacement&&ca(ut)&&(Se.vertical=Nd(ke,i,s,m,pe,hn,it,wt,Jt,ft,Ie,ir.vertical,!0,Et,Ne,we))};if(!J&&ht){const Jt=Rt==="auto"?ht.map(Sn=>Pd(Sn)):[Rt];let Lt=!1;for(let Sn=0;Sn<Jt.length;Sn++){const pn=Jt[Sn];if(!Se.horizontal[pn])if(Lt)Se.horizontal[pn]=Se.horizontal[0];else{const jt=Nd(ke,i,s,m,pe,hn,it,"center",pn,ft,Ie,ir.horizontal,!1,Et,Ne,we);jt&&(Se.horizontal[pn]=jt,Lt=jt.positionedLines.length===1)}}gn("left")}else{if(Rt==="auto"&&(Rt=Pd(wt)),Dt||G.get("text-writing-mode").indexOf("horizontal")>=0||!ca(ut)){const Jt=Nd(ke,i,s,m,pe,hn,it,wt,Rt,ft,Ie,ir.horizontal,!1,Et,Ne,we);Jt&&(Se.horizontal[Rt]=Jt)}gn(Et==="point"?"left":Rt)}}let nt=!1;if(se.icon&&se.icon.name){const ut=u[se.icon.name];ut&&(ze=gg(m[se.icon.name],G.get("icon-offset").evaluate(se,{},k),G.get("icon-anchor").evaluate(se,{},k)),nt=ut.sdf,a.sdfIcons===void 0?a.sdfIcons=ut.sdf:a.sdfIcons!==ut.sdf&&Zt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ut.pixelRatio!==a.pixelRatio||G.get("icon-rotate").constantOr(1)!==0)&&(a.iconsNeedLinear=!0))}const et=qf(Se.horizontal)||Se.vertical;a.iconsInText||(a.iconsInText=!!et&&et.iconsInText),(et||ze)&&Tg(a,se,Se,ze,u,K,Ne,0,Ie,nt,x,k,z)}y&&a.generateCollisionDebugBuffers(I,a.collisionBoxArray)}function Pd(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Tg(a,i,s,u,m,y,x,k,I,z,G,H,K){let J=y.textMaxSize.evaluate(i,{},H);J===void 0&&(J=x);const Q=a.layers[0].layout,se=Q.get("icon-offset").evaluate(i,{},H),pe=qf(s.horizontal)||s.vertical,we=K.name==="globe",Ne=x/24,Se=a.tilePixelRatio*J/24,ke=(ft=a.overscaling,a.zoom>18&&ft>2&&(ft>>=1),Math.max(an/(512*ft),1)*Q.get("symbol-spacing")),ze=Q.get("text-padding")*a.tilePixelRatio,Ie=Q.get("icon-padding")*a.tilePixelRatio,nt=P(Q.get("text-max-angle")),et=Q.get("text-rotation-alignment")==="map"&&Q.get("symbol-placement")!=="point",ut=Q.get("icon-rotation-alignment")==="map"&&Q.get("symbol-placement")!=="point",Nt=Q.get("symbol-placement"),it=ke/2;var ft;const wt=Q.get("icon-text-fit");let ht;u&&wt!=="none"&&(a.allowVerticalPlacement&&s.vertical&&(ht=Mf(u,s.vertical,wt,Q.get("icon-text-fit-padding"),se,Ne)),pe&&(u=Mf(u,pe,wt,Q.get("icon-text-fit-padding"),se,Ne)));const Rt=(Et,Dt,hn)=>{if(Dt.x<0||Dt.x>=an||Dt.y<0||Dt.y>=an)return;let gn=null;if(we){const{x:Jt,y:Lt,z:Sn}=K.projectTilePoint(Dt.x,Dt.y,hn);gn={anchor:new ro(Jt,Lt,Sn,0,void 0),up:K.upVector(hn,Dt.x,Dt.y)}}(function(Jt,Lt,Sn,pn,jt,qn,Fn,Xn,_n,Rn,Hn,Vn,Bn,Zn,ti,_i,ji,Tn,oi,Ni,Mn,ni,Di,Jn,ai){const vi=Jt.addToLineVertexArray(Lt,pn);let hi,Ti,Bi,yi,so,Ra,nc,ic=0,kh=0,Rh=0,$h=0,Qd=-1,ep=-1;const Ur={};let Nh=kl("");const Ts=Sn?Sn.anchor:Lt;let tp=0,np=0;if(_n._unevaluatedLayout.getValue("text-radial-offset")===void 0?[tp,np]=_n.layout.get("text-offset").evaluate(Mn,{},ai).map(Zi=>Zi*Si):(tp=_n.layout.get("text-radial-offset").evaluate(Mn,{},ai)*Si,np=Od),Jt.allowVerticalPlacement&&jt.vertical){const Zi=jt.vertical;if(ti)Ra=Dd(Zi),Xn&&(nc=Dd(Xn));else{const Yi=_n.layout.get("text-rotate").evaluate(Mn,{},ai)+90;Bi=bu(Rn,Ts,Lt,Hn,Vn,Bn,Zi,Zn,Yi,_i),Xn&&(yi=bu(Rn,Ts,Lt,Hn,Vn,Bn,Xn,Tn,Yi))}}if(qn){const Zi=_n.layout.get("icon-rotate").evaluate(Mn,{},ai),Yi=_n.layout.get("icon-text-fit")!=="none",rc=Vf(qn,Zi,Di,Yi),rp=Xn?Vf(Xn,Zi,Di,Yi):void 0;Ti=bu(Rn,Ts,Lt,Hn,Vn,Bn,qn,Tn,Zi),ic=4*rc.length;const Mh=Jt.iconSizeData;let As=null;Mh.kind==="source"?(As=[Dr*_n.layout.get("icon-size").evaluate(Mn,{},ai)],As[0]>No&&Zt(`${Jt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Mh.kind==="composite"&&(As=[Dr*ni.compositeIconSizes[0].evaluate(Mn,{},ai),Dr*ni.compositeIconSizes[1].evaluate(Mn,{},ai)],(As[0]>No||As[1]>No)&&Zt(`${Jt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Jt.addSymbols(Jt.icon,rc,As,Ni,oi,Mn,!1,Sn,Lt,vi.lineStartIndex,vi.lineLength,-1,Jn,ai),Qd=Jt.icon.placedSymbolArray.length-1,rp&&(kh=4*rp.length,Jt.addSymbols(Jt.icon,rp,As,Ni,oi,Mn,ir.vertical,Sn,Lt,vi.lineStartIndex,vi.lineLength,-1,Jn,ai),ep=Jt.icon.placedSymbolArray.length-1)}for(const Zi in jt.horizontal){const Yi=jt.horizontal[Zi];hi||(Nh=kl(Yi.text),ti?so=Dd(Yi):hi=bu(Rn,Ts,Lt,Hn,Vn,Bn,Yi,Zn,_n.layout.get("text-rotate").evaluate(Mn,{},ai),_i));const rc=Yi.positionedLines.length===1;if(Rh+=Gf(Jt,Sn,Lt,Yi,Fn,_n,ti,Mn,_i,vi,jt.vertical?ir.horizontal:ir.horizontalOnly,rc?Object.keys(jt.horizontal):[Zi],Ur,Qd,ni,Jn,ai),rc)break}jt.vertical&&($h+=Gf(Jt,Sn,Lt,jt.vertical,Fn,_n,ti,Mn,_i,vi,ir.vertical,["vertical"],Ur,ep,ni,Jn,ai));let Do=-1;const ip=(Zi,Yi)=>Zi?Math.max(Zi,Yi):Yi;Do=ip(so,Do),Do=ip(Ra,Do),Do=ip(nc,Do);const r_=Do>-1?1:0;Jt.glyphOffsetArray.length>=Io.MAX_GLYPHS&&Zt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Mn.sortKey!==void 0&&Jt.addToSortKeyRanges(Jt.symbolInstances.length,Mn.sortKey),Jt.symbolInstances.emplaceBack(Ts.x,Ts.y,Ts.z,Lt.x,Lt.y,Ur.right>=0?Ur.right:-1,Ur.center>=0?Ur.center:-1,Ur.left>=0?Ur.left:-1,Ur.vertical>=0?Ur.vertical:-1,Qd,ep,Nh,hi!==void 0?hi:Jt.collisionBoxArray.length,hi!==void 0?hi+1:Jt.collisionBoxArray.length,Bi!==void 0?Bi:Jt.collisionBoxArray.length,Bi!==void 0?Bi+1:Jt.collisionBoxArray.length,Ti!==void 0?Ti:Jt.collisionBoxArray.length,Ti!==void 0?Ti+1:Jt.collisionBoxArray.length,yi||Jt.collisionBoxArray.length,yi?yi+1:Jt.collisionBoxArray.length,Hn,Rh,$h,ic,kh,r_,0,tp,np,Do)})(a,Dt,gn,Et,s,u,m,ht,a.layers[0],a.collisionBoxArray,i.index,i.sourceLayerIndex,a.index,ze,et,I,0,Ie,ut,se,i,y,z,G,H)};if(Nt==="line")for(const Et of Bf(i.geometry,0,0,an,an)){const Dt=vg(Et,ke,nt,s.vertical||pe,u,24,Se,a.overscaling,an);for(const hn of Dt){const gn=pe;gn&&Ag(a,gn.text,it,hn)||Rt(Et,hn,H)}}else if(Nt==="line-center"){for(const Et of i.geometry)if(Et.length>1){const Dt=_g(Et,nt,s.vertical||pe,u,24,Se);Dt&&Rt(Et,Dt,H)}}else if(i.type==="Polygon")for(const Et of Cd(i.geometry,0)){const Dt=wg(Et,16);Rt(Et[0],new ro(Dt.x,Dt.y,0,0,void 0),H)}else if(i.type==="LineString")for(const Et of i.geometry)Rt(Et,new ro(Et[0].x,Et[0].y,0,0,void 0),H);else if(i.type==="Point")for(const Et of i.geometry)for(const Dt of Et)Rt([Dt],new ro(Dt.x,Dt.y,0,0,void 0),H)}const No=32640;function Gf(a,i,s,u,m,y,x,k,I,z,G,H,K,J,Q,se,pe){const we=function(ke,ze,Ie,nt,et,ut,Nt,it){const ft=[];if(ze.positionedLines.length===0)return ft;const wt=nt.layout.get("text-rotate").evaluate(ut,{})*Math.PI/180,ht=function(gn){const Jt=gn[0],Lt=gn[1],Sn=Jt*Lt;return Sn>0?[Jt,-Lt]:Sn<0?[-Jt,Lt]:Jt===0?[Lt,Jt]:[Lt,-Jt]}(Ie);let Rt=Math.abs(ze.top-ze.bottom);for(const gn of ze.positionedLines)Rt-=gn.lineOffset;const Et=ze.positionedLines.length,Dt=Rt/Et;let hn=ze.top-Ie[1];for(let gn=0;gn<Et;++gn){const Jt=ze.positionedLines[gn];hn=yg(ze,Dt,hn,gn);for(const Lt of Jt.positionedGlyphs){if(!Lt.rect)continue;const Sn=Lt.rect||{};let pn=4,jt=!0,qn=1,Fn=0;if(Lt.imageName){const Jn=Nt[Lt.imageName];if(!Jn)continue;if(Jn.sdf){Zt("SDF images are not supported in formatted text and will be ignored.");continue}jt=!1,qn=Jn.pixelRatio,pn=1/qn}const Xn=(et||it)&&Lt.vertical,_n=Lt.metrics.advance*Lt.scale/2,Rn=Lt.metrics,Hn=Lt.rect;if(Hn===null)continue;it&&ze.verticalizable&&(Fn=Lt.imageName?_n-Lt.metrics.width*Lt.scale/2:0);const Vn=et?[Lt.x+_n,Lt.y]:[0,0];let Bn=[0,0],Zn=[0,0],ti=!1;et||(Xn?(Zn=[Lt.x+_n+ht[0],Lt.y+ht[1]-Fn],ti=!0):Bn=[Lt.x+_n+Ie[0],Lt.y+Ie[1]-Fn]);const _i=Hn.w*Lt.scale/(qn*(Lt.localGlyph?2:1)),ji=Hn.h*Lt.scale/(qn*(Lt.localGlyph?2:1));let Tn,oi,Ni,Mn;if(Xn){const Jn=Lt.y-hn,ai=new T(-_n,_n-Jn),vi=-Math.PI/2,hi=new T(...Zn);Tn=new T(-_n+Bn[0],Bn[1]),Tn._rotateAround(vi,ai)._add(hi),Tn.x+=-Jn+_n,Tn.y-=(Rn.left-pn)*Lt.scale;const Ti=Lt.imageName?Rn.advance*Lt.scale:Si*Lt.scale,Bi=String.fromCharCode(Lt.glyph);eg(Bi)?Tn.x+=(1-pn)*Lt.scale:tg(Bi)?Tn.x+=Ti-Rn.height*Lt.scale+(-pn-1)*Lt.scale:Tn.x+=Lt.imageName||Rn.width+2*pn===Hn.w&&Rn.height+2*pn===Hn.h?(Ti-ji)/2:(Ti-(Rn.height+2*pn)*Lt.scale)/2,oi=new T(Tn.x,Tn.y-_i),Ni=new T(Tn.x+ji,Tn.y),Mn=new T(Tn.x+ji,Tn.y-_i)}else{const Jn=(Rn.left-pn)*Lt.scale-_n+Bn[0],ai=(-Rn.top-pn)*Lt.scale+Bn[1],vi=Jn+_i,hi=ai+ji;Tn=new T(Jn,ai),oi=new T(vi,ai),Ni=new T(Jn,hi),Mn=new T(vi,hi)}if(wt){let Jn;Jn=et?new T(0,0):ti?new T(ht[0],ht[1]):new T(Ie[0],Ie[1]),Tn._rotateAround(wt,Jn),oi._rotateAround(wt,Jn),Ni._rotateAround(wt,Jn),Mn._rotateAround(wt,Jn)}const ni=new T(0,0),Di=new T(0,0);ft.push({tl:Tn,tr:oi,bl:Ni,br:Mn,tex:Sn,writingMode:ze.writingMode,glyphOffset:Vn,sectionIndex:Lt.sectionIndex,isSDF:jt,pixelOffsetTL:ni,pixelOffsetBR:Di,minFontScaleX:0,minFontScaleY:0})}}return ft}(0,u,I,y,x,k,m,a.allowVerticalPlacement),Ne=a.textSizeData;let Se=null;Ne.kind==="source"?(Se=[Dr*y.layout.get("text-size").evaluate(k,{},pe)],Se[0]>No&&Zt(`${a.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Ne.kind==="composite"&&(Se=[Dr*Q.compositeTextSizes[0].evaluate(k,{},pe),Dr*Q.compositeTextSizes[1].evaluate(k,{},pe)],(Se[0]>No||Se[1]>No)&&Zt(`${a.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),a.addSymbols(a.text,we,Se,I,x,k,G,i,s,z.lineStartIndex,z.lineLength,J,se,pe);for(const ke of H)K[ke]=a.text.placedSymbolArray.length-1;return 4*we.length}function qf(a){for(const i in a)return a[i];return null}function bu(a,i,s,u,m,y,x,k,I,z){let G=x.top,H=x.bottom,K=x.left,J=x.right;const Q=x.collisionPadding;if(Q&&(K-=Q[0],G-=Q[1],J+=Q[2],H+=Q[3]),I){const se=new T(K,G),pe=new T(J,G),we=new T(K,H),Ne=new T(J,H),Se=P(I);let ke=new T(0,0);z&&(ke=new T(z[0],z[1])),se._rotateAround(Se,ke),pe._rotateAround(Se,ke),we._rotateAround(Se,ke),Ne._rotateAround(Se,ke),K=Math.min(se.x,pe.x,we.x,Ne.x),J=Math.max(se.x,pe.x,we.x,Ne.x),G=Math.min(se.y,pe.y,we.y,Ne.y),H=Math.max(se.y,pe.y,we.y,Ne.y)}return a.emplaceBack(i.x,i.y,i.z,s.x,s.y,K,G,J,H,k,u,m,y),a.length-1}function Dd(a){a.collisionPadding&&(a.top-=a.collisionPadding[1],a.bottom+=a.collisionPadding[3]);const i=a.bottom-a.top;return i>0?Math.max(10,i):null}function Ag(a,i,s,u){const m=a.compareText;if(i in m){const y=m[i];for(let x=y.length-1;x>=0;x--)if(u.dist(y[x])<s)return!0}else m[i]=[];return m[i].push(u),!1}const kg=mt([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Hf}=kg,Kf=mt([{name:"a_pos_3",components:3,type:"Int16"}]);var Hl=mt([{name:"a_pos",type:"Int16",components:2}]);const oo=an/Math.PI/2,Bd=2*sr(1,0)*oo*Math.PI,Sa=[64,32,16],yr=-oo,br=oo,Rg=[new Ui([yr,yr,yr],[br,br,br]),new Ui([yr,yr,yr],[0,0,br]),new Ui([0,yr,yr],[br,0,br]),new Ui([yr,0,yr],[0,br,br]),new Ui([0,0,yr],[br,br,br])];function Wf(a,i,s,u=!0){const m=_r([],a._camera.position,a.worldSize),y=[i,s,1,1];xs(y,y,a.pixelMatrixInverse),zp(y,y,1/y[3]);const x=Oi([],vr([],y,m)),k=a.globeMatrix,I=[k[12],k[13],k[14]],z=vr([],I,m),G=Nl(z),H=Oi([],z),K=a.worldSize/(2*Math.PI),J=lr(H,x),Q=Math.asin(K/G);if(Q<Math.acos(J)){if(!u)return null;const Nt=[],it=[];_r(Nt,x,G/J),Oi(it,vr(it,Nt,z)),Oi(x,$o(x,z,_r(x,it,Math.tan(Q)*G)))}const se=[];new gd(m,x).closestPointOnSphere(I,K,se);const pe=Oi([],ln(k,0)),we=Oi([],ln(k,1)),Ne=Oi([],ln(k,2)),Se=lr(pe,se),ke=lr(we,se),ze=lr(Ne,se),Ie=O(Math.asin(-ke/K));let nt=O(Math.atan2(Se,ze));nt=a.center.lng+function(Nt,it){const ft=(it-Nt+180)%360-180;return ft<-180?ft+360:ft}(a.center.lng,nt);const et=Lr(nt),ut=Z(eo(Ie),0,1);return new pa(et,ut)}class $g{constructor(i,s,u){this.a=vr([],i,u),this.b=vr([],s,u),this.center=u;const m=Oi([],this.a),y=Oi([],this.b);this.angle=Math.acos(lr(m,y))}}function zd(a,i){if(a.angle===0)return null;let s;return s=a.a[i]===0?1/a.angle*.5*Math.PI:1/a.angle*Math.atan(a.b[i]/a.a[i]/Math.sin(a.angle)-1/Math.tan(a.angle)),s<0||s>1?null:function(u,m,y,x){const k=Math.sin(y);return u*(Math.sin((1-x)*y)/k)+m*(Math.sin(x*y)/k)}(a.a[i],a.b[i],a.angle,Z(s,0,1))+a.center[i]}function Br(a){if(a.z<=1)return Rg[a.z+2*a.y+a.x];const i=Fd(xu(a));return Ui.fromPoints(i)}function Zf(a,i){const s=Zl(i.zoom);if(s===0)return Br(a);const u=xu(a),m=Fd(u),y=Lr(u.getWest())*i.worldSize,x=Lr(u.getEast())*i.worldSize,k=eo(u.getNorth())*i.worldSize,I=eo(u.getSouth())*i.worldSize,z=[y,k,0],G=[x,k,0],H=[y,I,0],K=[x,I,0],J=cd([],i.globeMatrix);return pi(z,z,J),pi(G,G,J),pi(H,H,J),pi(K,K,J),m[0]=fo(m[0],H,s),m[1]=fo(m[1],K,s),m[2]=fo(m[2],G,s),m[3]=fo(m[3],z,s),Ui.fromPoints(m)}function Yf(a,i,s,u,m){for(const y of s)pi(y,y,u),_r(y,y,m),fd(a,a,y),hd(i,i,y)}function Ng(a,i,s){const u=i/a.worldSize,m=Number.MAX_VALUE,y=[-m,-m,-m],x=[m,m,m],k=a.globeMatrix;if(s.z<=1)return Yf(x,y,Br(s).getCorners(),k,u),new Ui(x,y);const I=xu(s),z=Fd(I);if(Yf(x,y,z,k,u),I.contains(a.center)){y[2]=0;const nt=a.point,et=[nt.x*u,nt.y*u,0];return fd(x,x,et),hd(y,y,et),new Ui(x,y)}const G=[k[12]*u,k[13]*u,k[14]*u],H=I.getCenter(),K=Z(a.center.lat,-85.051129,Or),J=Z(H.lat,-85.051129,Or),Q=Lr(a.center.lng),se=eo(K);let pe=Q-Lr(H.lng);const we=se-eo(J);pe>.5?pe-=1:pe<-.5&&(pe+=1);let Ne=0;Math.abs(pe)>Math.abs(we)?Ne=pe>=0?1:3:(Ne=we>=0?0:2,iu(G,G,[k[4]*u,k[5]*u,k[6]*u],-Math.sin(P(we>=0?I.getSouth():I.getNorth()))*oo));const Se=z[Ne],ke=z[(Ne+1)%4],ze=new $g(Se,ke,G),Ie=[zd(ze,0)||Se[0],zd(ze,1)||Se[1],zd(ze,2)||Se[2]];return x[2]=Math.min(Se[2],ke[2]),fd(x,x,Ie),hd(y,y,Ie),new Ui(x,y)}function xu({x:a,y:i,z:s}){const u=1/(1<<s),m=new In(ar(a*u),Ci((i+1)*u)),y=new In(ar((a+1)*u),Ci(i*u));return new Ro(m,y)}function Fd(a){const i=P(a.getNorth()),s=P(a.getSouth()),u=Math.cos(i),m=Math.cos(s),y=Math.sin(i),x=Math.sin(s),k=a.getWest(),I=a.getEast();return[Ta(m,x,k),Ta(m,x,I),Ta(u,y,I),Ta(u,y,k)]}function Ta(a,i,s,u=oo){return s=P(s),[a*Math.sin(s)*u,-i*u,a*Math.cos(s)*u]}function wu(a,i,s){return Ta(Math.cos(P(a)),Math.sin(P(a)),i,s)}function Kl(a,i,s,u){const m=1<<s.z,y=(a/an+s.x)/m;return wu(Ci((i/an+s.y)/m),ar(y),u)}function Eu({min:a,max:i}){return 16383/Math.max(i[0]-a[0],i[1]-a[1],i[2]-a[2])}const Xf=new Float64Array(16);function Wl(a){const i=Eu(a),s=Lp(Xf,[i,i,i]);return $l(s,s,((u=[])[0]=-(m=a.min)[0],u[1]=-m[1],u[2]=-m[2],u));var u,m}function Vd(a){const i=(u=a.min,(s=Xf)[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=u[0],s[13]=u[1],s[14]=u[2],s[15]=1,s);var s,u;const m=1/Eu(a);return bs(i,i,[m,m,m])}function Jf(a,i,s,u,m){const y=function(I){const z=an/(2*Math.PI);return I/(2*Math.PI)/z}(s),x=[a,i,-s/(2*Math.PI)],k=Pr(new Float64Array(16));return $l(k,k,x),bs(k,k,[y,y,y]),ud(k,k,P(-m)),nu(k,k,P(-u)),k}function Zl(a){return re(5,6,a)}function Qf(a,i){const s=wu(i.lat,i.lng);return y=(u=pd([],function(J){const Q=wu(J._center.lat,J._center.lng);let se=md([],ma(0,1,0),Q);const pe=Op([],-J.angle,Q);se=pi(se,se,pe),Op(pe,-J._pitch,se);const we=Oi([],Q);return _r(we,we,J.cameraToCenterDistance/J.pixelsPerMeter*Bd),pi(we,we,pe),$o([],Q,we)}(a),s))[0],x=u[1],k=u[2],I=(m=s)[0],z=m[1],G=m[2],K=(H=Math.sqrt(y*y+x*x+k*k)*Math.sqrt(I*I+z*z+G*G))&&lr(u,m)/H,Math.acos(Math.min(Math.max(K,-1),1));var u,m,y,x,k,I,z,G,H,K}const eh=P(85),Mg=Math.cos(eh),Ig=Math.sin(eh);function th(a,i){const s=a.fovAboveCenter,u=a.elevation?a.elevation.getMinElevationBelowMSL()*i:0,m=(a._camera.position[2]*a.worldSize-u)/Math.cos(a._pitch),y=Math.sin(s)*m/Math.sin(Math.max(Math.PI/2-a._pitch-s,.01)),x=Math.sin(a._pitch)*y+m;return Math.min(1.01*x,m*(1/a._horizonShift))}function Cs(a,i){if(!i.isReprojectedInTileSpace)return{scale:1<<a.z,x:a.x,y:a.y,x2:a.x+1,y2:a.y+1,projection:i};const s=Math.pow(2,-a.z),u=a.x*s,m=(a.x+1)*s,y=a.y*s,x=(a.y+1)*s,k=ar(u),I=ar(m),z=Ci(y),G=Ci(x),H=i.project(k,z),K=i.project(I,z),J=i.project(I,G),Q=i.project(k,G);let se=Math.min(H.x,K.x,J.x,Q.x),pe=Math.min(H.y,K.y,J.y,Q.y),we=Math.max(H.x,K.x,J.x,Q.x),Ne=Math.max(H.y,K.y,J.y,Q.y);const Se=s/16;function ke(Ie,nt,et,ut,Nt,it){const ft=(et+Nt)/2,wt=(ut+it)/2,ht=i.project(ar(ft),Ci(wt)),Rt=Math.max(0,se-ht.x,pe-ht.y,ht.x-we,ht.y-Ne);se=Math.min(se,ht.x),we=Math.max(we,ht.x),pe=Math.min(pe,ht.y),Ne=Math.max(Ne,ht.y),Rt>Se&&(ke(Ie,ht,et,ut,ft,wt),ke(ht,nt,ft,wt,Nt,it))}ke(H,K,u,y,m,y),ke(K,J,m,y,m,x),ke(J,Q,m,x,u,x),ke(Q,H,u,x,u,y),se-=Se,pe-=Se,we+=Se,Ne+=Se;const ze=1/Math.max(we-se,Ne-pe);return{scale:ze,x:se*ze,y:pe*ze,x2:we*ze,y2:Ne*ze,projection:i}}const Lg=Pr(new Float32Array(16));class Mo{constructor(i){this.spec=i,this.name=i.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(i,s){return{x:0,y:0,z:0}}unproject(i,s){return new In(0,0)}projectTilePoint(i,s,u){return{x:i,y:s,z:0}}locationPoint(i,s,u=!0){return i._coordinatePoint(i.locationCoordinate(s),u)}pixelsPerMeter(i,s){return sr(1,i)*s}pixelSpaceConversion(i,s,u){return 1}farthestPixelDistance(i){return th(i,i.pixelsPerMeter)}pointCoordinate(i,s,u,m){const y=i.horizonLineFromTop(!1),x=new T(s,Math.max(y,u));return i.rayIntersectionCoordinate(i.pointRayIntersection(x,m))}pointCoordinate3D(i,s,u){const m=new T(s,u);if(i.elevation)return i.elevation.pointCoordinate(m);{const y=this.pointCoordinate(i,m.x,m.y,0);return[y.x,y.y,y.z]}}isPointAboveHorizon(i,s){if(i.elevation)return!this.pointCoordinate3D(i,s.x,s.y);const u=i.horizonLineFromTop();return s.y<u}createInversionMatrix(i,s){return Lg}createTileMatrix(i,s,u){let m,y,x;const k=u.canonical,I=Pr(new Float64Array(16));if(this.isReprojectedInTileSpace){const z=Cs(k,this);m=1,y=z.x+u.wrap*z.scale,x=z.y,bs(I,I,[m/z.scale,m/z.scale,i.pixelsPerMeter/s])}else m=s/i.zoomScale(k.z),y=(k.x+Math.pow(2,k.z)*u.wrap)*m,x=k.y*m;return $l(I,I,[y,x,0]),bs(I,I,[m/an,m/an,1]),I}upVector(i,s,u){return[0,0,1]}upVectorScale(i,s,u){return{metersToTile:1}}}class Og extends Mo{constructor(i){super(i),this.range=[4,7],this.center=i.center||[-96,37.5];const[s,u]=this.parallels=i.parallels||[29.5,45.5],m=Math.sin(P(s));this.n=(m+Math.sin(P(u)))/2,this.c=1+m*(2*this.n-m),this.r0=Math.sqrt(this.c)/this.n}project(i,s){const{n:u,c:m,r0:y}=this,x=P(i-this.center[0]),k=P(s),I=Math.sqrt(m-2*u*Math.sin(k))/u;return{x:I*Math.sin(x*u),y:I*Math.cos(x*u)-y,z:0}}unproject(i,s){const{n:u,c:m,r0:y}=this,x=y+s;let k=Math.atan2(i,Math.abs(x))*Math.sign(x);x*u<0&&(k-=Math.PI*Math.sign(i)*Math.sign(x));const I=P(this.center[0])*u;k=ae(k,-Math.PI-I,Math.PI-I);const z=O(k/u)+this.center[0],G=Math.asin(Z((m-(i*i+x*x)*u*u)/(2*u),-1,1)),H=Z(O(G),-85.051129,Or);return new In(z,H)}}const Yl=1.340264,Xl=-.081106,Jl=893e-6,Ql=.003796,Cu=Math.sqrt(3)/2;class Pg extends Mo{project(i,s){s=s/180*Math.PI,i=i/180*Math.PI;const u=Math.asin(Cu*Math.sin(s)),m=u*u,y=m*m*m;return{x:.5*(i*Math.cos(u)/(Cu*(Yl+3*Xl*m+y*(7*Jl+9*Ql*m)))/Math.PI+.5),y:1-.5*(u*(Yl+Xl*m+y*(Jl+Ql*m))/Math.PI+1),z:0}}unproject(i,s){i=(2*i-.5)*Math.PI;let u=s=(2*(1-s)-1)*Math.PI,m=u*u,y=m*m*m;for(let G,H,K,J=0;J<12&&(H=u*(Yl+Xl*m+y*(Jl+Ql*m))-s,K=Yl+3*Xl*m+y*(7*Jl+9*Ql*m),G=H/K,u=Z(u-G,-Math.PI/3,Math.PI/3),m=u*u,y=m*m*m,!(Math.abs(G)<1e-12));++J);const x=Cu*i*(Yl+3*Xl*m+y*(7*Jl+9*Ql*m))/Math.cos(u),k=Math.asin(Math.sin(u)/Cu),I=Z(180*x/Math.PI,-180,180),z=Z(180*k/Math.PI,-85.051129,Or);return new In(I,z)}}class Dg extends Mo{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0}project(i,s){return{x:.5+i/360,y:.5-s/360,z:0}}unproject(i,s){const u=360*(i-.5),m=Z(360*(.5-s),-85.051129,Or);return new In(u,m)}}const Aa=Math.PI/2;function Su(a){return Math.tan((Aa+a)/2)}class Bg extends Mo{constructor(i){super(i),this.center=i.center||[0,30];const[s,u]=this.parallels=i.parallels||[30,30],m=P(s),y=P(u),x=Math.cos(m);this.n=m===y?Math.sin(m):Math.log(x/Math.cos(y))/Math.log(Su(y)/Su(m)),this.f=x*Math.pow(Su(m),this.n)/this.n}project(i,s){s=P(s),i=P(i-this.center[0]);const u=1e-6,{n:m,f:y}=this;y>0?s<-Aa+u&&(s=-Aa+u):s>Aa-u&&(s=Aa-u);const x=y/Math.pow(Su(s),m),k=x*Math.sin(m*i),I=y-x*Math.cos(m*i);return{x:.5*(k/Math.PI+.5),y:1-.5*(I/Math.PI+.5),z:0}}unproject(i,s){i=(2*i-.5)*Math.PI,s=(2*(1-s)-.5)*Math.PI;const{n:u,f:m}=this,y=m-s,x=Math.sign(y),k=Math.sign(u)*Math.sqrt(i*i+y*y);let I=Math.atan2(i,Math.abs(y))*x;y*u<0&&(I-=Math.PI*Math.sign(i)*x);const z=Z(O(I/u)+this.center[0],-180,180),G=Z(O(2*Math.atan(Math.pow(m/k,1/u))-Aa),-85.051129,Or);return new In(z,G)}}class nh extends Mo{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(i,s){return{x:Lr(i),y:eo(s),z:0}}unproject(i,s){const u=ar(i),m=Ci(s);return new In(u,m)}}const ih=P(Or);class zg extends Mo{project(i,s){const u=(s=P(s))*s,m=u*u;return{x:.5*((i=P(i))*(.8707-.131979*u+m*(m*(.003971*u-.001529*m)-.013791))/Math.PI+.5),y:1-.5*(s*(1.007226+u*(.015085+m*(.028874*u-.044475-.005916*m)))/Math.PI+1),z:0}}unproject(i,s){i=(2*i-.5)*Math.PI;let u=s=(2*(1-s)-1)*Math.PI,m=25,y=0,x=u*u;do{x=u*u;const z=x*x;y=(u*(1.007226+x*(.015085+z*(.028874*x-.044475-.005916*z)))-s)/(1.007226+x*(.045255+z*(.259866*x-.311325-.005916*11*z))),u=Z(u-y,-ih,ih)}while(Math.abs(y)>1e-6&&--m>0);x=u*u;const k=Z(O(i/(.8707+x*(x*(x*x*x*(.003971-.001529*x)-.013791)-.131979))),-180,180),I=O(u);return new In(k,I)}}const rh=P(Or);class Fg extends Mo{project(i,s){s=P(s),i=P(i);const u=Math.cos(s),m=2/Math.PI,y=Math.acos(u*Math.cos(i/2)),x=Math.sin(y)/y,k=.5*(i*m+2*u*Math.sin(i/2)/x)||0,I=.5*(s+Math.sin(s)/x)||0;return{x:.5*(k/Math.PI+.5),y:1-.5*(I/Math.PI+1),z:0}}unproject(i,s){let u=i=(2*i-.5)*Math.PI,m=s=(2*(1-s)-1)*Math.PI,y=25;const x=1e-6;let k=0,I=0;do{const z=Math.cos(m),G=Math.sin(m),H=2*G*z,K=G*G,J=z*z,Q=Math.cos(u/2),se=Math.sin(u/2),pe=2*Q*se,we=se*se,Ne=1-J*Q*Q,Se=Ne?1/Ne:0,ke=Ne?Math.acos(z*Q)*Math.sqrt(1/Ne):0,ze=.5*(2*ke*z*se+2*u/Math.PI)-i,Ie=.5*(ke*G+m)-s,nt=.5*Se*(J*we+ke*z*Q*K)+1/Math.PI,et=Se*(pe*H/4-ke*G*se),ut=.125*Se*(H*se-ke*G*J*pe),Nt=.5*Se*(K*Q+ke*we*z)+.5,it=et*ut-Nt*nt;k=(Ie*et-ze*Nt)/it,I=(ze*ut-Ie*nt)/it,u=Z(u-k,-Math.PI,Math.PI),m=Z(m-I,-rh,rh)}while((Math.abs(k)>x||Math.abs(I)>x)&&--y>0);return new In(O(u),O(m))}}class oh extends Mo{constructor(i){super(i),this.center=i.center||[0,0],this.parallels=i.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(P(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(i,s){const{scale:u,cosPhi:m}=this;return{x:P(i)*m*u+.5,y:-Math.sin(P(s))/m*u+.5,z:0}}unproject(i,s){const{scale:u,cosPhi:m}=this,y=-(s-.5)/u,x=Z(O((i-.5)/u)/m,-180,180),k=Math.asin(Z(y*m,-1,1)),I=Z(O(k),-85.051129,Or);return new In(x,I)}}class Vg extends nh{constructor(i){super(i),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug","custom"],this.range=[3,5]}projectTilePoint(i,s,u){const m=Kl(i,s,u);return pi(m,m,Wl(Br(u))),{x:m[0],y:m[1],z:m[2]}}locationPoint(i,s){const u=wu(s.lat,s.lng),m=Oi([],u),y=i.elevation?i.elevation.getAtPointOrZero(i.locationCoordinate(s),i._centerAltitude):i._centerAltitude;iu(u,u,m,sr(1,0)*an*y);const x=Pr(new Float64Array(16));return ha(x,i.pixelMatrix,i.globeMatrix),pi(u,u,x),new T(u[0],u[1])}pixelsPerMeter(i,s){return sr(1,0)*s}pixelSpaceConversion(i,s,u){const m=An(sr(1,45)*s,sr(1,i)*s,u);return this.pixelsPerMeter(i,s)/m}createTileMatrix(i,s,u){const m=Vd(Br(u.canonical));return ha(new Float64Array(16),i.globeMatrix,m)}createInversionMatrix(i,s){const{center:u}=i,m=Wl(Br(s));return nu(m,m,P(u.lng)),ud(m,m,P(u.lat)),bs(m,m,[i._pixelsPerMercatorPixel,i._pixelsPerMercatorPixel,1]),Float32Array.from(m)}pointCoordinate(i,s,u,m){return Wf(i,s,u,!0)||new pa(0,0)}pointCoordinate3D(i,s,u){const m=this.pointCoordinate(i,s,u,0);return[m.x,m.y,m.z]}isPointAboveHorizon(i,s){return!Wf(i,s.x,s.y,!1)}farthestPixelDistance(i){const s=function(m,y){const x=m.cameraToCenterDistance,k=m._centerAltitude*y,I=m._camera,z=m._camera.forward(),G=$o([],_r([],z,-x),[0,0,k]),H=m.worldSize/(2*Math.PI),K=[0,0,-H],J=m.width/m.height,Q=Math.tan(m.fovAboveCenter),se=_r([],I.up(),Q),pe=_r([],I.right(),Q*J),we=Oi([],$o([],$o([],z,se),pe)),Ne=[];let Se;if(new gd(G,we).closestPointOnSphere(K,H,Ne)){const ke=$o([],Ne,K),ze=vr([],ke,G);Se=Math.cos(m.fovAboveCenter)*Nl(ze)}else{const ke=vr([],G,K),ze=vr([],K,G);Oi(ze,ze);const Ie=Nl(ke)-H;Se=Math.sqrt(Ie*(Ie+2*H));const nt=Math.acos(Se/(H+Ie))-Math.acos(lr(z,ze));Se*=Math.cos(nt)}return 1.01*Se}(i,this.pixelsPerMeter(i.center.lat,i.worldSize)),u=Zl(i.zoom);if(u>0){const m=th(i,sr(1,i.center.lat)*i.worldSize),y=i.worldSize/(2*Math.PI),x=Math.max(i.width,i.height)/i.worldSize*Math.PI;return An(s,m+y*(1-Math.cos(x)),Math.pow(u,10))}return s}upVector(i,s,u){return Kl(s,u,i,1)}upVectorScale(i){return{metersToTile:Bd*Eu(Br(i))}}}function sh(a){const i=a.parallels,s=!!i&&Math.abs(i[0]+i[1])<.01;switch(a.name){case"mercator":return new nh(a);case"equirectangular":return new Dg(a);case"naturalEarth":return new zg(a);case"equalEarth":return new Pg(a);case"winkelTripel":return new Fg(a);case"albers":return s?new oh(a):new Og(a);case"lambertConformalConic":return s?new oh(a):new Bg(a);case"globe":return new Vg(a)}throw new Error(`Invalid projection name: ${a.name}`)}const Ug=Es.VectorTileFeature.types,jg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Tu(a,i,s,u,m,y,x,k,I,z,G,H,K){const J=k?Math.min(No,Math.round(k[0])):0,Q=k?Math.min(No,Math.round(k[1])):0;a.emplaceBack(i,s,Math.round(32*u),Math.round(32*m),y,x,(J<<1)+(I?1:0),Q,16*z,16*G,256*H,256*K)}function Au(a,i,s,u,m,y,x){a.emplaceBack(i,s,u,m,y,x)}function ku(a,i,s,u,m){a.emplaceBack(i,s,u,m),a.emplaceBack(i,s,u,m),a.emplaceBack(i,s,u,m),a.emplaceBack(i,s,u,m)}function Gg(a){for(const i of a.sections)if(f(i.text))return!0;return!1}class Ud{constructor(i){this.layoutVertexArray=new Kn,this.indexArray=new bn,this.programConfigurations=i,this.segments=new di,this.dynamicLayoutVertexArray=new Cn,this.opacityVertexArray=new Dn,this.placedSymbolArray=new op,this.globeExtVertexArray=new ri}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,s,u,m){this.isEmpty()||(u&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Hm.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,Wm.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,jg,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,Km.members,!0)),this.opacityVertexBuffer.itemSize=1),(u||m)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}qt(Ud,"SymbolBuffers");class jd{constructor(i,s,u){this.layoutVertexArray=new i,this.layoutAttributes=s,this.indexArray=new u,this.segments=new di,this.collisionVertexArray=new Wn,this.collisionVertexArrayExt=new Yn}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,Zm.members,!0),this.collisionVertexBufferExt=i.createVertexBuffer(this.collisionVertexArrayExt,Ym.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}qt(jd,"CollisionBuffers");class Io{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(x=>x.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Pr([]),this.placementViewportMatrix=Pr([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ad(this.zoom,s["text-size"]),this.iconSizeData=Ad(this.zoom,s["icon-size"]);const u=this.layers[0].layout,m=u.get("symbol-sort-key"),y=u.get("symbol-z-order");this.canOverlap=u.get("text-allow-overlap")||u.get("icon-allow-overlap")||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&m.constantOr(1)!==void 0,this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=u.get("text-writing-mode").map(x=>ir[x]),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=i.sourceID,this.projection=i.projection}createArrays(){this.text=new Ud(new _s(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new Ud(new _s(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new lp,this.lineVertexArray=new cp,this.symbolInstances=new ap}calculateGlyphDependencies(i,s,u,m,y){for(let x=0;x<i.length;x++)if(s[i.charCodeAt(x)]=!0,m&&y){const k=Ul[i.charAt(x)];k&&(s[k.charCodeAt(0)]=!0)}}populate(i,s,u,m){const y=this.layers[0],x=y.layout,k=this.projection.name==="globe",I=x.get("text-font"),z=x.get("text-field"),G=x.get("icon-image"),H=(z.value.kind!=="constant"||z.value.value instanceof Ii&&!z.value.value.isEmpty()||z.value.value.toString().length>0)&&(I.value.kind!=="constant"||I.value.value.length>0),K=G.value.kind!=="constant"||!!G.value.value||Object.keys(G.parameters).length>0,J=x.get("symbol-sort-key");if(this.features=[],!H&&!K)return;const Q=s.iconDependencies,se=s.glyphDependencies,pe=s.availableImages,we=new me(this.zoom);for(const{feature:Ne,id:Se,index:ke,sourceLayerIndex:ze}of i){const Ie=y._featureFilter.needGeometry,nt=vs(Ne,Ie);if(!y._featureFilter.filter(we,nt,u))continue;if(Ie||(nt.geometry=to(Ne,u,m)),k&&Ne.type!==1&&u.z<=5){const it=nt.geometry,ft=.98078528056;for(let wt=0;wt<it.length;wt++)it[wt]=Kh(it[wt],ht=>ht,(ht,Rt)=>lr(Kl(ht.x,ht.y,u,1),Kl(Rt.x,Rt.y,u,1))<ft)}let et,ut;if(H){const it=y.getValueAndResolveTokens("text-field",nt,u,pe),ft=Ii.factory(it);Gg(ft)&&(this.hasRTLText=!0),(!this.hasRTLText||ue()==="unavailable"||this.hasRTLText&&he.isParsed())&&(et=Qm(ft,y,nt))}if(K){const it=y.getValueAndResolveTokens("icon-image",nt,u,pe);ut=it instanceof Li?it:Li.fromString(it)}if(!et&&!ut)continue;const Nt=this.sortFeaturesByKey?J.evaluate(nt,{},u):void 0;if(this.features.push({id:Se,text:et,icon:ut,index:ke,sourceLayerIndex:ze,geometry:nt.geometry,properties:Ne.properties,type:Ug[Ne.type],sortKey:Nt}),ut&&(Q[ut.name]=!0),et){const it=I.evaluate(nt,{},u).join(","),ft=x.get("text-rotation-alignment")==="map"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ir.vertical)>=0;for(const wt of et.sections)if(wt.image)Q[wt.image.name]=!0;else{const ht=ca(et.toString()),Rt=wt.fontStack||it,Et=se[Rt]=se[Rt]||{};this.calculateGlyphDependencies(wt.text,Et,ft,this.allowVerticalPlacement,ht)}}}x.get("symbol-placement")==="line"&&(this.features=function(Ne){const Se={},ke={},ze=[];let Ie=0;function nt(it){ze.push(Ne[it]),Ie++}function et(it,ft,wt){const ht=ke[it];return delete ke[it],ke[ft]=ht,ze[ht].geometry[0].pop(),ze[ht].geometry[0]=ze[ht].geometry[0].concat(wt[0]),ht}function ut(it,ft,wt){const ht=Se[ft];return delete Se[ft],Se[it]=ht,ze[ht].geometry[0].shift(),ze[ht].geometry[0]=wt[0].concat(ze[ht].geometry[0]),ht}function Nt(it,ft,wt){const ht=wt?ft[0][ft[0].length-1]:ft[0][0];return`${it}:${ht.x}:${ht.y}`}for(let it=0;it<Ne.length;it++){const ft=Ne[it],wt=ft.geometry,ht=ft.text?ft.text.toString():null;if(!ht){nt(it);continue}const Rt=Nt(ht,wt),Et=Nt(ht,wt,!0);if(Rt in ke&&Et in Se&&ke[Rt]!==Se[Et]){const Dt=ut(Rt,Et,wt),hn=et(Rt,Et,ze[Dt].geometry);delete Se[Rt],delete ke[Et],ke[Nt(ht,ze[hn].geometry,!0)]=hn,ze[Dt].geometry=null}else Rt in ke?et(Rt,Et,wt):Et in Se?ut(Rt,Et,wt):(nt(it),Se[Rt]=Ie-1,ke[Et]=Ie-1)}return ze.filter(it=>it.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ne,Se)=>Ne.sortKey-Se.sortKey)}update(i,s,u,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,s,this.layers,u,m),this.icon.programConfigurations.updatePaintArrays(i,s,this.layers,u,m))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=sh(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,s){const u=this.lineVertexArray.length,m=i.segment;if(m!==void 0){let y=i.dist(s[m+1]),x=i.dist(s[m]);const k={};for(let I=m+1;I<s.length;I++)k[I]={x:s[I].x,y:s[I].y,tileUnitDistanceFromAnchor:y},I<s.length-1&&(y+=s[I+1].dist(s[I]));for(let I=m||0;I>=0;I--)k[I]={x:s[I].x,y:s[I].y,tileUnitDistanceFromAnchor:x},I>0&&(x+=s[I-1].dist(s[I]));for(let I=0;I<s.length;I++){const z=k[I];this.lineVertexArray.emplaceBack(z.x,z.y,z.tileUnitDistanceFromAnchor)}}return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(i,s,u,m,y,x,k,I,z,G,H,K,J,Q){const se=i.indexArray,pe=i.layoutVertexArray,we=i.globeExtVertexArray,Ne=i.segments.prepareSegment(4*s.length,pe,se,this.canOverlap?x.sortKey:void 0),Se=this.glyphOffsetArray.length,ke=Ne.vertexLength,ze=this.allowVerticalPlacement&&k===ir.vertical?Math.PI/2:0,Ie=x.text&&x.text.sections;for(let et=0;et<s.length;et++){const{tl:ut,tr:Nt,bl:it,br:ft,tex:wt,pixelOffsetTL:ht,pixelOffsetBR:Rt,minFontScaleX:Et,minFontScaleY:Dt,glyphOffset:hn,isSDF:gn,sectionIndex:Jt}=s[et],Lt=Ne.vertexLength,Sn=hn[1];if(Tu(pe,z.x,z.y,ut.x,Sn+ut.y,wt.x,wt.y,u,gn,ht.x,ht.y,Et,Dt),Tu(pe,z.x,z.y,Nt.x,Sn+Nt.y,wt.x+wt.w,wt.y,u,gn,Rt.x,ht.y,Et,Dt),Tu(pe,z.x,z.y,it.x,Sn+it.y,wt.x,wt.y+wt.h,u,gn,ht.x,Rt.y,Et,Dt),Tu(pe,z.x,z.y,ft.x,Sn+ft.y,wt.x+wt.w,wt.y+wt.h,u,gn,Rt.x,Rt.y,Et,Dt),I){const pn=I.anchor,jt=I.up;Au(we,pn.x,pn.y,pn.z,jt[0],jt[1],jt[2]),Au(we,pn.x,pn.y,pn.z,jt[0],jt[1],jt[2]),Au(we,pn.x,pn.y,pn.z,jt[0],jt[1],jt[2]),Au(we,pn.x,pn.y,pn.z,jt[0],jt[1],jt[2]),ku(i.dynamicLayoutVertexArray,pn.x,pn.y,pn.z,ze)}else ku(i.dynamicLayoutVertexArray,z.x,z.y,z.z,ze);se.emplaceBack(Lt,Lt+1,Lt+2),se.emplaceBack(Lt+1,Lt+2,Lt+3),Ne.vertexLength+=4,Ne.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(hn[0]),et!==s.length-1&&Jt===s[et+1].sectionIndex||i.programConfigurations.populatePaintArrays(pe.length,x,x.index,{},J,Q,Ie&&Ie[Jt])}const nt=I?I.anchor:z;i.placedSymbolArray.emplaceBack(nt.x,nt.y,nt.z,z.x,z.y,Se,this.glyphOffsetArray.length-Se,ke,G,H,z.segment,u?u[0]:0,u?u[1]:0,m[0],m[1],k,0,!1,0,K,0)}_commitLayoutVertex(i,s,u,m,y,x,k){i.emplaceBack(s,u,m,y,x,Math.round(k.x),Math.round(k.y))}_addCollisionDebugVertices(i,s,u,m,y,x,k){const I=u.segments.prepareSegment(4,u.layoutVertexArray,u.indexArray),z=I.vertexLength,G=k.tileAnchorX,H=k.tileAnchorY;for(let J=0;J<4;J++)u.collisionVertexArray.emplaceBack(0,0,0,0);u.collisionVertexArrayExt.emplaceBack(s,-i.padding,-i.padding),u.collisionVertexArrayExt.emplaceBack(s,i.padding,-i.padding),u.collisionVertexArrayExt.emplaceBack(s,i.padding,i.padding),u.collisionVertexArrayExt.emplaceBack(s,-i.padding,i.padding),this._commitLayoutVertex(u.layoutVertexArray,m,y,x,G,H,new T(i.x1,i.y1)),this._commitLayoutVertex(u.layoutVertexArray,m,y,x,G,H,new T(i.x2,i.y1)),this._commitLayoutVertex(u.layoutVertexArray,m,y,x,G,H,new T(i.x2,i.y2)),this._commitLayoutVertex(u.layoutVertexArray,m,y,x,G,H,new T(i.x1,i.y2)),I.vertexLength+=4;const K=u.indexArray;K.emplaceBack(z,z+1),K.emplaceBack(z+1,z+2),K.emplaceBack(z+2,z+3),K.emplaceBack(z+3,z),I.primitiveLength+=4}_addTextDebugCollisionBoxes(i,s,u,m,y,x){for(let k=m;k<y;k++){const I=u.get(k),z=this.getSymbolInstanceTextSize(i,x,s,k);this._addCollisionDebugVertices(I,z,this.textCollisionBox,I.projectedAnchorX,I.projectedAnchorY,I.projectedAnchorZ,x)}}_addIconDebugCollisionBoxes(i,s,u,m,y,x){for(let k=m;k<y;k++){const I=u.get(k),z=this.getSymbolInstanceIconSize(i,s,k);this._addCollisionDebugVertices(I,z,this.iconCollisionBox,I.projectedAnchorX,I.projectedAnchorY,I.projectedAnchorZ,x)}}generateCollisionDebugBuffers(i,s){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new jd(nr,yf.members,Ri),this.iconCollisionBox=new jd(nr,yf.members,Ri);const u=ya(this.iconSizeData,i),m=ya(this.textSizeData,i);for(let y=0;y<this.symbolInstances.length;y++){const x=this.symbolInstances.get(y);this._addTextDebugCollisionBoxes(m,i,s,x.textBoxStartIndex,x.textBoxEndIndex,x),this._addTextDebugCollisionBoxes(m,i,s,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x),this._addIconDebugCollisionBoxes(u,i,s,x.iconBoxStartIndex,x.iconBoxEndIndex,x),this._addIconDebugCollisionBoxes(u,i,s,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex,x)}}getSymbolInstanceTextSize(i,s,u,m){const y=this.text.placedSymbolArray.get(s.rightJustifiedTextSymbolIndex>=0?s.rightJustifiedTextSymbolIndex:s.centerJustifiedTextSymbolIndex>=0?s.centerJustifiedTextSymbolIndex:s.leftJustifiedTextSymbolIndex>=0?s.leftJustifiedTextSymbolIndex:s.verticalPlacedTextSymbolIndex>=0?s.verticalPlacedTextSymbolIndex:m),x=hu(this.textSizeData,i,y)/Si;return this.tilePixelRatio*x}getSymbolInstanceIconSize(i,s,u){const m=this.icon.placedSymbolArray.get(u),y=hu(this.iconSizeData,i,m);return this.tilePixelRatio*y}_commitDebugCollisionVertexUpdate(i,s,u){i.emplaceBack(s,-u,-u),i.emplaceBack(s,u,-u),i.emplaceBack(s,u,u),i.emplaceBack(s,-u,u)}_updateTextDebugCollisionBoxes(i,s,u,m,y,x){for(let k=m;k<y;k++){const I=u.get(k),z=this.getSymbolInstanceTextSize(i,x,s,k);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,z,I.padding)}}_updateIconDebugCollisionBoxes(i,s,u,m,y){for(let x=m;x<y;x++){const k=u.get(x),I=this.getSymbolInstanceIconSize(i,s,x);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,I,k.padding)}}updateCollisionDebugBuffers(i,s){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const u=ya(this.iconSizeData,i),m=ya(this.textSizeData,i);for(let y=0;y<this.symbolInstances.length;y++){const x=this.symbolInstances.get(y);this._updateTextDebugCollisionBoxes(m,i,s,x.textBoxStartIndex,x.textBoxEndIndex,x),this._updateTextDebugCollisionBoxes(m,i,s,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x),this._updateIconDebugCollisionBoxes(u,i,s,x.iconBoxStartIndex,x.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(u,i,s,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(i,s,u,m,y,x,k,I,z){const G={};for(let H=s;H<u;H++){const K=i.get(H);G.textBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,padding:K.padding,projectedAnchorX:K.projectedAnchorX,projectedAnchorY:K.projectedAnchorY,projectedAnchorZ:K.projectedAnchorZ,tileAnchorX:K.tileAnchorX,tileAnchorY:K.tileAnchorY},G.textFeatureIndex=K.featureIndex;break}for(let H=m;H<y;H++){const K=i.get(H);G.verticalTextBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,padding:K.padding,projectedAnchorX:K.projectedAnchorX,projectedAnchorY:K.projectedAnchorY,projectedAnchorZ:K.projectedAnchorZ,tileAnchorX:K.tileAnchorX,tileAnchorY:K.tileAnchorY},G.verticalTextFeatureIndex=K.featureIndex;break}for(let H=x;H<k;H++){const K=i.get(H);G.iconBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,padding:K.padding,projectedAnchorX:K.projectedAnchorX,projectedAnchorY:K.projectedAnchorY,projectedAnchorZ:K.projectedAnchorZ,tileAnchorX:K.tileAnchorX,tileAnchorY:K.tileAnchorY},G.iconFeatureIndex=K.featureIndex;break}for(let H=I;H<z;H++){const K=i.get(H);G.verticalIconBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,padding:K.padding,projectedAnchorX:K.projectedAnchorX,projectedAnchorY:K.projectedAnchorY,projectedAnchorZ:K.projectedAnchorZ,tileAnchorX:K.tileAnchorX,tileAnchorY:K.tileAnchorY},G.verticalIconFeatureIndex=K.featureIndex;break}return G}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const u=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,s){const u=i.placedSymbolArray.get(s),m=u.vertexStartIndex+4*u.numGlyphs;for(let y=u.vertexStartIndex;y<m;y+=4)i.indexArray.emplaceBack(y,y+1,y+2),i.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(i),u=Math.cos(i),m=[],y=[],x=[];for(let k=0;k<this.symbolInstances.length;++k){x.push(k);const I=this.symbolInstances.get(k);m.push(0|Math.round(s*I.tileAnchorX+u*I.tileAnchorY)),y.push(I.featureIndex)}return x.sort((k,I)=>m[k]-m[I]||y[I]-y[k]),x}addToSortKeyRanges(i,s){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===s?u.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const u=this.symbolInstances.get(s);this.featureSortOrder.push(u.featureIndex),[u.rightJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.leftJustifiedTextSymbolIndex].forEach((m,y,x)=>{m>=0&&x.indexOf(m)===y&&this.addIndicesForPlacedSymbol(this.text,m)}),u.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,u.verticalPlacedTextSymbolIndex),u.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,u.placedIconSymbolIndex),u.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,u.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}qt(Io,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Io.MAX_GLYPHS=65535,Io.addDynamicAttributes=ku;const qg=new pt({"symbol-placement":new Le(st.layout_symbol["symbol-placement"]),"symbol-spacing":new Le(st.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Le(st.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ge(st.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Le(st.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Le(st.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Le(st.layout_symbol["icon-ignore-placement"]),"icon-optional":new Le(st.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Le(st.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ge(st.layout_symbol["icon-size"]),"icon-text-fit":new Le(st.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Le(st.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ge(st.layout_symbol["icon-image"]),"icon-rotate":new Ge(st.layout_symbol["icon-rotate"]),"icon-padding":new Le(st.layout_symbol["icon-padding"]),"icon-keep-upright":new Le(st.layout_symbol["icon-keep-upright"]),"icon-offset":new Ge(st.layout_symbol["icon-offset"]),"icon-anchor":new Ge(st.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Le(st.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Le(st.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Le(st.layout_symbol["text-rotation-alignment"]),"text-field":new Ge(st.layout_symbol["text-field"]),"text-font":new Ge(st.layout_symbol["text-font"]),"text-size":new Ge(st.layout_symbol["text-size"]),"text-max-width":new Ge(st.layout_symbol["text-max-width"]),"text-line-height":new Ge(st.layout_symbol["text-line-height"]),"text-letter-spacing":new Ge(st.layout_symbol["text-letter-spacing"]),"text-justify":new Ge(st.layout_symbol["text-justify"]),"text-radial-offset":new Ge(st.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Le(st.layout_symbol["text-variable-anchor"]),"text-anchor":new Ge(st.layout_symbol["text-anchor"]),"text-max-angle":new Le(st.layout_symbol["text-max-angle"]),"text-writing-mode":new Le(st.layout_symbol["text-writing-mode"]),"text-rotate":new Ge(st.layout_symbol["text-rotate"]),"text-padding":new Le(st.layout_symbol["text-padding"]),"text-keep-upright":new Le(st.layout_symbol["text-keep-upright"]),"text-transform":new Ge(st.layout_symbol["text-transform"]),"text-offset":new Ge(st.layout_symbol["text-offset"]),"text-allow-overlap":new Le(st.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Le(st.layout_symbol["text-ignore-placement"]),"text-optional":new Le(st.layout_symbol["text-optional"])});var Gd={paint:new pt({"icon-opacity":new Ge(st.paint_symbol["icon-opacity"]),"icon-color":new Ge(st.paint_symbol["icon-color"]),"icon-halo-color":new Ge(st.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ge(st.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ge(st.paint_symbol["icon-halo-blur"]),"icon-translate":new Le(st.paint_symbol["icon-translate"]),"icon-translate-anchor":new Le(st.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ge(st.paint_symbol["text-opacity"]),"text-color":new Ge(st.paint_symbol["text-color"],{runtimeType:Ji,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new Ge(st.paint_symbol["text-halo-color"]),"text-halo-width":new Ge(st.paint_symbol["text-halo-width"]),"text-halo-blur":new Ge(st.paint_symbol["text-halo-blur"]),"text-translate":new Le(st.paint_symbol["text-translate"]),"text-translate-anchor":new Le(st.paint_symbol["text-translate-anchor"])}),layout:qg};class ah{constructor(i){this.type=i.property.overrides?i.property.overrides.runtimeType:lo,this.defaultValue=i}evaluate(i){if(i.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(i.formattedSection))return s.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}qt(ah,"FormatSectionOverride",{omit:["defaultValue"]});class Ru extends gr{constructor(i){super(i,Gd)}recalculate(i,s){super.recalculate(i,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const u=this.layout.get("text-writing-mode");if(u){const m=[];for(const y of u)m.indexOf(y)<0&&m.push(y);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(i,s,u,m){const y=this.layout.get(i).evaluate(s,{},u,m),x=this._unevaluatedLayout._values[i];return x.isDataDriven()||Qs(x.value)||!y?y:function(k,I){return I.replace(/{([^{}]+)}/g,(z,G)=>G in k?String(k[G]):"")}(s.properties,y)}createBucket(i){return new Io(i)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const i of Gd.paint.overridableProperties){if(!Ru.hasPaintOverride(this.layout,i))continue;const s=this.paint.get(i),u=new ah(s),m=new cl(u,s.property.specification);let y=null;y=s.value.kind==="constant"||s.value.kind==="source"?new ul("source",m):new ns("composite",m,s.value.zoomStops,s.value._interpolationType),this.paint._values[i]=new $e(s.property,y,s.parameters)}}_handleOverridablePaintPropertyUpdate(i,s,u){return!(!this.layout||s.isDataDriven()||u.isDataDriven())&&Ru.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,s){const u=i.get("text-field"),m=Gd.paint.properties[s];let y=!1;const x=k=>{for(const I of k)if(m.overrides&&m.overrides.hasOverride(I))return void(y=!0)};if(u.value.kind==="constant"&&u.value.value instanceof Ii)x(u.value.value.sections);else if(u.value.kind==="source"){const k=z=>{y||(z instanceof Go&&si(z.value)===Fo?x(z.value.sections):z instanceof Ho?x(z.sections):z.eachChild(k))},I=u.value;I._styleExpression&&k(I._styleExpression.expression)}return y}getProgramConfiguration(i){return new ko(this,i)}}var Hg={paint:new pt({"background-color":new Le(st.paint_background["background-color"]),"background-pattern":new kt(st.paint_background["background-pattern"]),"background-opacity":new Le(st.paint_background["background-opacity"])})},Kg={paint:new pt({"raster-opacity":new Le(st.paint_raster["raster-opacity"]),"raster-hue-rotate":new Le(st.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Le(st.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Le(st.paint_raster["raster-brightness-max"]),"raster-saturation":new Le(st.paint_raster["raster-saturation"]),"raster-contrast":new Le(st.paint_raster["raster-contrast"]),"raster-resampling":new Le(st.paint_raster["raster-resampling"]),"raster-fade-duration":new Le(st.paint_raster["raster-fade-duration"])})};class Wg extends gr{constructor(i){super(i,{}),this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)}onRemove(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)}}var Zg={paint:new pt({"sky-type":new Le(st.paint_sky["sky-type"]),"sky-atmosphere-sun":new Le(st.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Le(st.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Le(st.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Le(st.paint_sky["sky-gradient-radius"]),"sky-gradient":new Ke(st.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Le(st.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Le(st.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Le(st.paint_sky["sky-opacity"])})};function qd(a,i,s){const u=[0,0,1],m=Vp([]);return jp(m,m,s?-P(a)+Math.PI:P(a)),Up(m,m,-P(i)),Bp(u,u,m),Oi(u,u)}const Yg={circle:class extends gr{constructor(a){super(a,em)}createBucket(a){return new sd(a)}queryRadius(a){const i=a;return fa("circle-radius",this,i)+fa("circle-stroke-width",this,i)+eu(this.paint.get("circle-translate"))}queryIntersectsFeature(a,i,s,u,m,y,x,k){const I=Mp(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),y.angle,a.pixelToTileUnitsFactor),z=this.paint.get("circle-radius").evaluate(i,s)+this.paint.get("circle-stroke-width").evaluate(i,s);return Gp(a,u,y,x,k,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",I,z)}getProgramIds(){return["circle"]}getProgramConfiguration(a){return new ko(this,a)}},heatmap:class extends gr{createBucket(a){return new Hp(a)}constructor(a){super(a,am),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=bd({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(a){return fa("heatmap-radius",this,a)}queryIntersectsFeature(a,i,s,u,m,y,x,k){const I=this.paint.get("heatmap-radius").evaluate(i,s);return Gp(a,u,y,x,k,!0,!0,new T(0,0),I)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(a){return new ko(this,a)}},hillshade:class extends gr{constructor(a){super(a,lm)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends gr{constructor(a){super(a,Sm)}getProgramIds(){const a=this.paint.get("fill-pattern"),i=a&&a.constantOr(1),s=[i?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&s.push(i&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),s}getProgramConfiguration(a){return new ko(this,a)}recalculate(a,i){super.recalculate(a,i);const s=this.paint._values["fill-outline-color"];s.value.kind==="constant"&&s.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new cu(a)}queryRadius(){return eu(this.paint.get("fill-translate"))}queryIntersectsFeature(a,i,s,u,m,y){return!a.queryGeometry.isAboveHorizon&&Ap(Np(a.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),y.angle,a.pixelToTileUnitsFactor),u)}isTileClipped(){return!0}},"fill-extrusion":class extends gr{constructor(a){super(a,Bm)}createBucket(a){return new zl(a)}queryRadius(){return eu(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(a){return new ko(this,a)}queryIntersectsFeature(a,i,s,u,m,y,x,k,I){const z=Mp(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),y.angle,a.pixelToTileUnitsFactor),G=this.paint.get("fill-extrusion-height").evaluate(i,s),H=this.paint.get("fill-extrusion-base").evaluate(i,s),K=[0,0],J=k&&y.elevation,Q=y.elevation?y.elevation.exaggeration():1,se=a.tile.getBucket(this);if(J&&se instanceof zl){const Ne=se.centroidVertexArray,Se=I+1;if(Se<Ne.length){const ke=Ne.get(Se);K[0]=ke.a_centroid_pos0,K[1]=ke.a_centroid_pos1}}if(K[0]===0&&K[1]===1)return!1;y.projection.name==="globe"&&(u=df([u],[new T(0,0),new T(an,an)],a.tileID.canonical).map(Ne=>Ne.polygon).flat());const pe=function(Ne,Se,ke,ze,Ie,nt,et,ut,Nt,it,ft){return Ne.projection.name==="globe"?function(wt,ht,Rt,Et,Dt,hn,gn,Jt,Lt,Sn,pn){const jt=[],qn=[],Fn=wt.projection.upVectorScale(pn,wt.center.lat,wt.worldSize).metersToTile,Xn=[0,0,0,1],_n=[0,0,0,1],Rn=(Vn,Bn,Zn,ti)=>{Vn[0]=Bn,Vn[1]=Zn,Vn[2]=ti,Vn[3]=1},Hn=uf();Rt>0&&(Rt+=Hn),Et+=Hn;for(const Vn of ht){const Bn=[],Zn=[];for(const ti of Vn){const _i=ti.x+Dt.x,ji=ti.y+Dt.y,Tn=wt.projection.projectTilePoint(_i,ji,pn),oi=wt.projection.upVector(pn,ti.x,ti.y);let Ni=Rt,Mn=Et;if(gn){const ni=mf(_i,ji,Rt,Et,gn,Jt,Lt,Sn);Ni+=ni.base,Mn+=ni.top}Rt!==0?Rn(Xn,Tn.x+oi[0]*Fn*Ni,Tn.y+oi[1]*Fn*Ni,Tn.z+oi[2]*Fn*Ni):Rn(Xn,Tn.x,Tn.y,Tn.z),Rn(_n,Tn.x+oi[0]*Fn*Mn,Tn.y+oi[1]*Fn*Mn,Tn.z+oi[2]*Fn*Mn),pi(Xn,Xn,hn),pi(_n,_n,hn),Bn.push(pu(Xn)),Zn.push(pu(_n))}jt.push(Bn),qn.push(Zn)}return[jt,qn]}(Ne,Se,ke,ze,Ie,nt,et,ut,Nt,it,ft):et?function(wt,ht,Rt,Et,Dt,hn,gn,Jt,Lt){const Sn=[],pn=[],jt=[0,0,0,1];for(const qn of wt){const Fn=[],Xn=[];for(const _n of qn){const Rn=_n.x+Et.x,Hn=_n.y+Et.y,Vn=mf(Rn,Hn,ht,Rt,hn,gn,Jt,Lt);jt[0]=Rn,jt[1]=Hn,jt[2]=Vn.base,jt[3]=1,xs(jt,jt,Dt),jt[3]=Math.max(jt[3],1e-5);const Bn=pu([jt[0]/jt[3],jt[1]/jt[3],jt[2]/jt[3]]);jt[0]=Rn,jt[1]=Hn,jt[2]=Vn.top,jt[3]=1,xs(jt,jt,Dt),jt[3]=Math.max(jt[3],1e-5);const Zn=pu([jt[0]/jt[3],jt[1]/jt[3],jt[2]/jt[3]]);Fn.push(Bn),Xn.push(Zn)}Sn.push(Fn),pn.push(Xn)}return[Sn,pn]}(Se,ke,ze,Ie,nt,et,ut,Nt,it):function(wt,ht,Rt,Et,Dt){const hn=[],gn=[],Jt=Dt[8]*ht,Lt=Dt[9]*ht,Sn=Dt[10]*ht,pn=Dt[11]*ht,jt=Dt[8]*Rt,qn=Dt[9]*Rt,Fn=Dt[10]*Rt,Xn=Dt[11]*Rt;for(const _n of wt){const Rn=[],Hn=[];for(const Vn of _n){const Bn=Vn.x+Et.x,Zn=Vn.y+Et.y,ti=Dt[0]*Bn+Dt[4]*Zn+Dt[12],_i=Dt[1]*Bn+Dt[5]*Zn+Dt[13],ji=Dt[2]*Bn+Dt[6]*Zn+Dt[14],Tn=Dt[3]*Bn+Dt[7]*Zn+Dt[15],oi=ti+Jt,Ni=_i+Lt,Mn=ji+Sn,ni=Math.max(Tn+pn,1e-5),Di=ti+jt,Jn=_i+qn,ai=ji+Fn,vi=Math.max(Tn+Xn,1e-5),hi=new T(oi/ni,Ni/ni);hi.z=Mn/ni,Rn.push(hi);const Ti=new T(Di/vi,Jn/vi);Ti.z=ai/vi,Hn.push(Ti)}hn.push(Rn),gn.push(Hn)}return[hn,gn]}(Se,ke,ze,Ie,nt)}(y,u,H,G,z,x,J?k:null,K,Q,y.center.lat,a.tileID.canonical),we=a.queryGeometry;return function(Ne,Se,ke){let ze=1/0;Ap(ke,Se)&&(ze=hf(ke,Se[0]));for(let Ie=0;Ie<Se.length;Ie++){const nt=Se[Ie],et=Ne[Ie];for(let ut=0;ut<nt.length-1;ut++){const Nt=nt[ut],it=[Nt,nt[ut+1],et[ut+1],et[ut],Nt];Tp(ke,it)&&(ze=Math.min(ze,hf(ke,it)))}}return ze!==1/0&&ze}(pe[0],pe[1],we.isPointQuery()?we.screenBounds:we.screenGeometry)}},line:class extends gr{constructor(a){super(a,gf),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(a){if(a==="line-gradient"){const i=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=i._styleExpression&&i._styleExpression.expression instanceof ja,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(a,i){super.recalculate(a,i),this.paint._values["line-floorwidth"]=_f.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new fu(a)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(a){return new ko(this,a)}queryRadius(a){const i=a,s=vf(fa("line-width",this,i),fa("line-gap-width",this,i)),u=fa("line-offset",this,i);return s/2+Math.abs(u)+eu(this.paint.get("line-translate"))}queryIntersectsFeature(a,i,s,u,m,y){if(a.queryGeometry.isAboveHorizon)return!1;const x=Np(a.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),y.angle,a.pixelToTileUnitsFactor),k=a.pixelToTileUnitsFactor/2*vf(this.paint.get("line-width").evaluate(i,s),this.paint.get("line-gap-width").evaluate(i,s)),I=this.paint.get("line-offset").evaluate(i,s);return I&&(u=function(z,G){const H=[],K=new T(0,0);for(let J=0;J<z.length;J++){const Q=z[J],se=[];for(let pe=0;pe<Q.length;pe++){const we=Q[pe-1],Ne=Q[pe],Se=Q[pe+1],ke=pe===0?K:Ne.sub(we)._unit()._perp(),ze=pe===Q.length-1?K:Se.sub(Ne)._unit()._perp(),Ie=ke._add(ze)._unit();Ie._mult(1/(Ie.x*ze.x+Ie.y*ze.y)),se.push(Ie._mult(G)._add(Ne))}H.push(se)}return H}(u,I*a.pixelToTileUnitsFactor)),function(z,G,H){for(let K=0;K<G.length;K++){const J=G[K];if(z.length>=3){for(let Q=0;Q<J.length;Q++)if(ys(z,J[Q]))return!0}if(Yh(z,J,H))return!0}return!1}(x,u,k)}isTileClipped(){return!0}},symbol:Ru,background:class extends gr{constructor(a){super(a,Hg)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends gr{constructor(a){super(a,Kg)}getProgramIds(){return["raster"]}},sky:class extends gr{constructor(a){super(a,Zg),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="sky-gradient"?this._updateColorRamp():a!=="sky-atmosphere-sun"&&a!=="sky-atmosphere-halo-color"&&a!=="sky-atmosphere-color"&&a!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=bd({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(a){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const i=a.style.light.properties.get("position");return this._lightPosition.azimuthal!==i.azimuthal||this._lightPosition.polar!==i.polar}return!1}getCenter(a,i){if(this.paint.get("sky-type")==="atmosphere"){const u=this.paint.get("sky-atmosphere-sun"),m=!u,y=a.style.light,x=y.properties.get("position");return m&&y.properties.get("anchor")==="viewport"&&Zt("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),m?qd(x.azimuthal,90-x.polar,i):qd(u[0],90-u[1],i)}const s=this.paint.get("sky-gradient-center");return qd(s[0],90-s[1],i)}is3D(){return!1}isSky(){return!0}markSkyboxValid(a){this._skyboxInvalidated=!1,this._lightPosition=a.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const a=this.paint.get("sky-type");return a==="atmosphere"?["skyboxCapture","skybox"]:a==="gradient"?["skyboxGradient"]:null}}};class ec{constructor(i,s,u,m){this.context=i,this.format=u,this.texture=i.gl.createTexture(),this.update(s,m)}update(i,s,u){const{width:m,height:y}=i,{context:x}=this,{gl:k}=x,{HTMLImageElement:I,HTMLCanvasElement:z,HTMLVideoElement:G,ImageData:H,ImageBitmap:K}=v;if(k.bindTexture(k.TEXTURE_2D,this.texture),x.pixelStoreUnpackFlipY.set(!1),x.pixelStoreUnpack.set(1),x.pixelStoreUnpackPremultiplyAlpha.set(this.format===k.RGBA&&(!s||s.premultiply!==!1)),u||this.size&&this.size[0]===m&&this.size[1]===y){const{x:J,y:Q}=u||{x:0,y:0};i instanceof I||i instanceof z||i instanceof G||i instanceof H||K&&i instanceof K?k.texSubImage2D(k.TEXTURE_2D,0,J,Q,k.RGBA,k.UNSIGNED_BYTE,i):k.texSubImage2D(k.TEXTURE_2D,0,J,Q,m,y,k.RGBA,k.UNSIGNED_BYTE,i.data)}else this.size=[m,y],i instanceof I||i instanceof z||i instanceof G||i instanceof H||K&&i instanceof K?k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,k.UNSIGNED_BYTE,i):k.texImage2D(k.TEXTURE_2D,0,this.format,m,y,0,this.format,k.UNSIGNED_BYTE,i.data);this.useMipmap=Boolean(s&&s.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&k.generateMipmap(k.TEXTURE_2D)}bind(i,s){const{context:u}=this,{gl:m}=u;m.bindTexture(m.TEXTURE_2D,this.texture),i!==this.filter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,i),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,this.useMipmap?i===m.NEAREST?m.NEAREST_MIPMAP_NEAREST:m.LINEAR_MIPMAP_NEAREST:i),this.filter=i),s!==this.wrap&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,s),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}class Hd{constructor(i,s){this.width=i,this.height=s,this.nextRow=0,this.image=new no({width:i,height:s}),this.positions={},this.uploaded=!1}getDash(i,s){const u=this.getKey(i,s);return this.positions[u]}trim(){const i=this.width,s=this.height=Pe(this.nextRow);this.image.resize({width:i,height:s})}getKey(i,s){return i.join(",")+s}getDashRanges(i,s,u){const m=[];let y=i.length%2==1?-i[i.length-1]*u:0,x=i[0]*u,k=!0;m.push({left:y,right:x,isDash:k,zeroLength:i[0]===0});let I=i[0];for(let z=1;z<i.length;z++){k=!k;const G=i[z];y=I*u,I+=G,x=I*u,m.push({left:y,right:x,isDash:k,zeroLength:G===0})}return m}addRoundDash(i,s,u){const m=s/2;for(let y=-u;y<=u;y++){const x=this.width*(this.nextRow+u+y);let k=0,I=i[k];for(let z=0;z<this.width;z++){z/I.right>1&&(I=i[++k]);const G=Math.abs(z-I.left),H=Math.abs(z-I.right),K=Math.min(G,H);let J;const Q=y/u*(m+1);if(I.isDash){const se=m-Math.abs(Q);J=Math.sqrt(K*K+se*se)}else J=m-Math.sqrt(K*K+Q*Q);this.image.data[x+z]=Math.max(0,Math.min(255,J+128))}}}addRegularDash(i,s){for(let I=i.length-1;I>=0;--I){const z=i[I],G=i[I+1];z.zeroLength?i.splice(I,1):G&&G.isDash===z.isDash&&(G.left=z.left,i.splice(I,1))}const u=i[0],m=i[i.length-1];u.isDash===m.isDash&&(u.left=m.left-this.width,m.right=u.right+this.width);const y=this.width*this.nextRow;let x=0,k=i[x];for(let I=0;I<this.width;I++){I/k.right>1&&(k=i[++x]);const z=Math.abs(I-k.left),G=Math.abs(I-k.right),H=Math.min(z,G);this.image.data[y+I]=Math.max(0,Math.min(255,(k.isDash?H:-H)+s+128))}}addDash(i,s){const u=this.getKey(i,s);if(this.positions[u])return this.positions[u];const m=s==="round",y=m?7:0,x=2*y+1;if(this.nextRow+x>this.height)return Zt("LineAtlas out of space"),null;i.length===0&&i.push(1);let k=0;for(let G=0;G<i.length;G++)i[G]<0&&(Zt("Negative value is found in line dasharray, replacing values with 0"),i[G]=0),k+=i[G];if(k!==0){const G=this.width/k,H=this.getDashRanges(i,this.width,G);m?this.addRoundDash(H,G,y):this.addRegularDash(H,s==="square"?.5*G:0)}const I=this.nextRow+y;this.nextRow+=x;const z={tl:[I,y],br:[k,0]};return this.positions[u]=z,z}}qt(Hd,"LineAtlas");class Xg{constructor(i){this._callback=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class Jg{constructor(){this.tasks={},this.taskQueue=[],ge(["process"],this),this.invoker=new Xg(this.process),this.nextId=0}add(i,s){const u=this.nextId++,m=function({type:y,isSymbolTile:x,zoom:k}){return k=k||0,y==="message"?0:y!=="maybePrepare"||x?y!=="parseTile"||x?y==="parseTile"&&x?300-k:y==="maybePrepare"&&x?400-k:500:200-k:100-k}(s);if(m===0){tt();try{i()}finally{}return{cancel:()=>{}}}return this.tasks[u]={fn:i,metadata:s,priority:m,id:u},this.taskQueue.push(u),this.invoker.trigger(),{cancel:()=>{delete this.tasks[u]}}}process(){tt();try{if(this.taskQueue=this.taskQueue.filter(u=>!!this.tasks[u]),!this.taskQueue.length)return;const i=this.pick();if(i===null)return;const s=this.tasks[i];if(delete this.tasks[i],this.taskQueue.length&&this.invoker.trigger(),!s)return;s.fn()}finally{}}pick(){let i=null,s=1/0;for(let m=0;m<this.taskQueue.length;m++){const y=this.tasks[this.taskQueue[m]];y.priority<s&&(s=y.priority,i=m)}if(i===null)return null;const u=this.taskQueue[i];return this.taskQueue.splice(i,1),u}remove(){this.invoker.remove()}}class lh{constructor(i){this._stringToNumber={},this._numberToString=[];for(let s=0;s<i.length;s++){const u=i[s];this._stringToNumber[u]=s,this._numberToString[s]=u}}encode(i){return this._stringToNumber[i]}decode(i){return this._numberToString[i]}}const Qg=["tile","layer","source","sourceLayer","state"];class ch{constructor(i,s,u,m,y){this.type="Feature",this._vectorTileFeature=i,this._z=s,this._x=u,this._y=m,this.properties=i.properties,this.id=y}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={type:"Feature",geometry:this.geometry,properties:this.properties};this.id!==void 0&&(i.id=this.id);for(const s of Qg)this[s]!==void 0&&(i[s]=this[s]);return i}}const cr=32,zr=33,Lo=new Uint16Array(8184);for(let a=0;a<2046;a++){let i=a+2,s=0,u=0,m=0,y=0,x=0,k=0;for(1&i?m=y=x=cr:s=u=k=cr;(i>>=1)>1;){const z=s+m>>1,G=u+y>>1;1&i?(m=s,y=u,s=x,u=k):(s=m,u=y,m=x,y=k),x=z,k=G}const I=4*a;Lo[I+0]=s,Lo[I+1]=u,Lo[I+2]=m,Lo[I+3]=y}const Fr=new Uint16Array(2178),Oo=new Uint8Array(1089),$u=new Uint16Array(1089);function uh(a){return a===0?-.03125:a===32?.03125:0}var dh=mt([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const ph={type:2,extent:an,loadGeometry:()=>[[new T(0,0),new T(8193,0),new T(8193,8193),new T(0,8193),new T(0,0)]]};class Kd{constructor(i,s,u,m,y){this.tileID=i,this.uid=ie(),this.uses=0,this.tileSize=s,this.tileZoom=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=y,this.expiredRequestCount=0,this.state="loading",m&&m.transform&&(this.projection=m.transform.projection)}registerFadeDuration(i){const s=i+this.timeAdded;s<Ct.now()||this.fadeEndTime&&s<this.fadeEndTime||(this.fadeEndTime=s)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Cs(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(i,s,u){if(this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(m,y){const x={};if(!y)return x;for(const k of m){const I=k.layerIds.map(z=>y.getLayer(z)).filter(Boolean);if(I.length!==0){k.layers=I,k.stateDependentLayerIds&&(k.stateDependentLayers=k.stateDependentLayerIds.map(z=>I.filter(G=>G.id===z)[0]));for(const z of I)x[z.id]=k}}return x}(i.buckets,s.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const y=this.buckets[m];if(y instanceof Io){if(this.hasSymbolBuckets=!0,!u)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const y=this.buckets[m];if(y instanceof Io&&y.hasRTLText){this.hasRTLText=!0,he.isLoading()||he.isLoaded()||ue()!=="deferred"||ye();break}}this.queryPadding=0;for(const m in this.buckets){const y=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,s.style.getLayer(m).queryRadius(y))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage),i.lineAtlas&&(this.lineAtlas=i.lineAtlas)}else this.collisionBoxArray=new Ir}unloadVectorData(){if(this.hasData()){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(i){return this.buckets[i.id]}upload(i){for(const u in this.buckets){const m=this.buckets[u];m.uploadPending()&&m.upload(i)}const s=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ec(i,this.imageAtlas.image,s.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ec(i,this.glyphAtlasImage,s.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new ec(i,this.lineAtlas.image,s.ALPHA),this.lineAtlas.uploaded=!0)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,s,u,m,y,x,k,I){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:m,pixelPosMatrix:k,transform:x,params:y,tileTransform:this.tileTransform},i,s,u):{}}querySourceFeatures(i,s){const u=this.latestFeatureIndex;if(!u||!u.rawTileData)return;const m=u.loadVTLayers(),y=s?s.sourceLayer:"",x=m._geojsonTileLayer||m[y];if(!x)return;const k=as(s&&s.filter),{z:I,x:z,y:G}=this.tileID.canonical,H={z:I,x:z,y:G};for(let K=0;K<x.length;K++){const J=x.feature(K);if(k.needGeometry){const pe=vs(J,!0);if(!k.filter(new me(this.tileID.overscaledZ),pe,this.tileID.canonical))continue}else if(!k.filter(new me(this.tileID.overscaledZ),J))continue;const Q=u.getId(J,y),se=new ch(J,I,z,G,Q);se.tile=H,i.push(se)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const s=this.expirationTime;if(i.cacheControl){const u=Mt(i.cacheControl);u["max-age"]&&(this.expirationTime=Date.now()+1e3*u["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const u=Date.now();let m=!1;if(this.expirationTime>u)m=!1;else if(s)if(this.expirationTime<s)m=!0;else{const y=this.expirationTime-s;y?this.expirationTime=u+Math.max(y,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,s){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0||!s)return;const u=this.latestFeatureIndex.loadVTLayers(),m=s.style.listImages();for(const y in this.buckets){if(!s.style.hasLayer(y))continue;const x=this.buckets[y],k=x.layers[0].sourceLayer||"_geojsonTileLayer",I=u[k],z=i[k];if(!I||!z||Object.keys(z).length===0)continue;if(x.update(z,I,m,this.imageAtlas&&this.imageAtlas.patternPositions||{}),x instanceof fu||x instanceof cu){const H=s.style._getSourceCache(x.layers[0].source);s._terrain&&s._terrain.enabled&&H&&x.programConfigurations.needsUpload&&s._terrain._clearRenderCacheForTile(H.id,this.tileID)}const G=s&&s.style&&s.style.getLayer(y);G&&(this.queryPadding=Math.max(this.queryPadding,G.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ct.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=Ct.now()+i}setTexture(i,s){const u=s.context,m=u.gl;this.texture=s.getTileTexture(i.width),this.texture?this.texture.update(i,{useMipmap:!0}):(this.texture=new ec(u,i,m.RGBA,{useMipmap:!0}),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE),u.extTextureFilterAnisotropic&&m.texParameterf(m.TEXTURE_2D,u.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,u.extTextureFilterAnisotropicMax))}setDependencies(i,s){const u={};for(const m of s)u[m]=!0;this.dependencies[i]=u}hasDependency(i,s){for(const u of i){const m=this.dependencies[u];if(m){for(const y of s)if(m[y])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(i,s){if(!s||s.name==="mercator"||this._tileDebugBuffer)return;const u=to(ph,this.tileID.canonical,this.tileTransform)[0],m=new Ot,y=new Wr;for(let x=0;x<u.length;x++){const{x:k,y:I}=u[x];m.emplaceBack(k,I),y.emplaceBack(x)}y.emplaceBack(0),this._tileDebugIndexBuffer=i.createIndexBuffer(y),this._tileDebugBuffer=i.createVertexBuffer(m,Hl.members),this._tileDebugSegments=di.simpleSegment(0,0,m.length,y.length)}_makeTileBoundsBuffers(i,s){if(this._tileBoundsBuffer||!s||s.name==="mercator")return;const u=to(ph,this.tileID.canonical,this.tileTransform)[0];let m,y;if(this.isRaster){const x=function(k,I){const z=Cs(k,I),G=Math.pow(2,k.z);for(let pe=0;pe<zr;pe++)for(let we=0;we<zr;we++){const Ne=ar((k.x+(we+uh(we))/cr)/G),Se=Ci((k.y+(pe+uh(pe))/cr)/G),ke=I.project(Ne,Se),ze=pe*zr+we;Fr[2*ze+0]=Math.round((ke.x*z.scale-z.x)*an),Fr[2*ze+1]=Math.round((ke.y*z.scale-z.y)*an)}Oo.fill(0),$u.fill(0);for(let pe=2045;pe>=0;pe--){const we=4*pe,Ne=Lo[we+0],Se=Lo[we+1],ke=Lo[we+2],ze=Lo[we+3],Ie=Ne+ke>>1,nt=Se+ze>>1,et=Ie+nt-Se,ut=nt+Ne-Ie,Nt=Se*zr+Ne,it=ze*zr+ke,ft=nt*zr+Ie,wt=Math.hypot((Fr[2*Nt+0]+Fr[2*it+0])/2-Fr[2*ft+0],(Fr[2*Nt+1]+Fr[2*it+1])/2-Fr[2*ft+1])>=16;if(Oo[ft]=Oo[ft]||(wt?1:0),pe<1022){const ht=(Se+ut>>1)*zr+(Ne+et>>1),Rt=(ze+ut>>1)*zr+(ke+et>>1);Oo[ft]=Oo[ft]||Oo[ht]||Oo[Rt]}}const H=new Qt,K=new bn;let J=0;function Q(pe,we){const Ne=we*zr+pe;return $u[Ne]===0&&(H.emplaceBack(Fr[2*Ne+0],Fr[2*Ne+1],pe*an/cr,we*an/cr),$u[Ne]=++J),$u[Ne]-1}function se(pe,we,Ne,Se,ke,ze){const Ie=pe+Ne>>1,nt=we+Se>>1;if(Math.abs(pe-ke)+Math.abs(we-ze)>1&&Oo[nt*zr+Ie])se(ke,ze,pe,we,Ie,nt),se(Ne,Se,ke,ze,Ie,nt);else{const et=Q(pe,we),ut=Q(Ne,Se),Nt=Q(ke,ze);K.emplaceBack(et,ut,Nt)}}return se(0,0,cr,cr,cr,0),se(cr,cr,0,0,0,cr),{vertices:H,indices:K}}(this.tileID.canonical,s);m=x.vertices,y=x.indices}else{m=new Qt,y=new bn;for(const{x:k,y:I}of u)m.emplaceBack(k,I,0,0);const x=ru(m.int16,void 0,4);for(let k=0;k<x.length;k+=3)y.emplaceBack(x[k],x[k+1],x[k+2])}this._tileBoundsBuffer=i.createVertexBuffer(m,dh.members),this._tileBoundsIndexBuffer=i.createIndexBuffer(y),this._tileBoundsSegments=di.simpleSegment(0,0,m.length,y.length)}_makeGlobeTileDebugBuffers(i,s){const u=s.projection;if(!u||u.name!=="globe"||s.freezeTileCoverage)return;const m=this.tileID.canonical,y=Wl(Zf(m,s)),x=Zl(s.zoom);let k;x>0&&(k=cd(new Float64Array(16),s.globeMatrix));const I=(m.x+.5)/(1<<m.z)-Lr(s.center.lng);let z=0;I>.5?z=-1:I<-.5&&(z=1),this._makeGlobeTileDebugBorderBuffer(i,m,s,y,k,x,z),this._makeGlobeTileDebugTextBuffer(i,m,s,y,k,x,z)}_globePoint(i,s,u,m,y,x,k,I){let z=Kl(i,s,u);if(x){const G=1<<u.z,H=[((i/an+u.x)/G+I)*m,(s/an+u.y)/G*m,0];pi(H,H,x),z=fo(z,H,k)}return pi(z,z,y)}_makeGlobeTileDebugBorderBuffer(i,s,u,m,y,x,k){const I=new Ot,z=new Wr,G=new Kt,H=(J,Q,se,pe,we)=>{const Ne=(se-J)/(we-1),Se=(pe-Q)/(we-1),ke=I.length;for(let ze=0;ze<we;ze++){const Ie=J+ze*Ne,nt=Q+ze*Se;I.emplaceBack(Ie,nt);const et=this._globePoint(Ie,nt,s,u.worldSize,m,y,x,k);G.emplaceBack(et[0],et[1],et[2]),z.emplaceBack(ke+ze)}},K=an;H(0,0,K,0,16),H(K,0,K,K,16),H(K,K,0,K,16),H(0,K,0,0,16),this._tileDebugIndexBuffer=i.createIndexBuffer(z),this._tileDebugBuffer=i.createVertexBuffer(I,Hl.members),this._globeTileDebugBorderBuffer=i.createVertexBuffer(G,Kf.members),this._tileDebugSegments=di.simpleSegment(0,0,I.length,z.length)}_makeGlobeTileDebugTextBuffer(i,s,u,m,y,x,k){const I=new Ot,z=new bn,G=new Kt,H=25;z.reserve(32),I.reserve(H),G.reserve(H);const K=(J,Q)=>H*J+Q;for(let J=0;J<H;J++){const Q=2048*J;for(let se=0;se<H;se++){const pe=2048*se;I.emplaceBack(pe,Q);const we=this._globePoint(pe,Q,s,u.worldSize,m,y,x,k);G.emplaceBack(we[0],we[1],we[2])}}for(let J=0;J<4;J++)for(let Q=0;Q<4;Q++){const se=K(J,Q),pe=K(J,Q+1),we=K(J+1,Q),Ne=K(J+1,Q+1);z.emplaceBack(se,pe,we),z.emplaceBack(we,pe,Ne)}this._tileDebugTextIndexBuffer=i.createIndexBuffer(z),this._tileDebugTextBuffer=i.createVertexBuffer(I,Hl.members),this._globeTileDebugTextBuffer=i.createVertexBuffer(G,Kf.members),this._tileDebugTextSegments=di.simpleSegment(0,0,H,32)}}class e_{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,s,u){const m=String(s);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][m]=this.stateChanges[i][m]||{},le(this.stateChanges[i][m],u),this.deletedStates[i]===null){this.deletedStates[i]={};for(const y in this.state[i])y!==m&&(this.deletedStates[i][y]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][m]===null){this.deletedStates[i][m]={};for(const y in this.state[i][m])u[y]||(this.deletedStates[i][m][y]=null)}else for(const y in u)this.deletedStates[i]&&this.deletedStates[i][m]&&this.deletedStates[i][m][y]===null&&delete this.deletedStates[i][m][y]}removeFeatureState(i,s,u){if(this.deletedStates[i]===null)return;const m=String(s);if(this.deletedStates[i]=this.deletedStates[i]||{},u&&s!==void 0)this.deletedStates[i][m]!==null&&(this.deletedStates[i][m]=this.deletedStates[i][m]||{},this.deletedStates[i][m][u]=null);else if(s!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][m])for(u in this.deletedStates[i][m]={},this.stateChanges[i][m])this.deletedStates[i][m][u]=null;else this.deletedStates[i][m]=null;else this.deletedStates[i]=null}getState(i,s){const u=String(s),m=le({},(this.state[i]||{})[u],(this.stateChanges[i]||{})[u]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const y=this.deletedStates[i][s];if(y===null)return{};for(const x in y)delete m[x]}return m}initializeTileState(i,s){i.setFeatureState(this.state,s)}coalesceChanges(i,s){const u={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const y={};for(const x in this.stateChanges[m])this.state[m][x]||(this.state[m][x]={}),le(this.state[m][x],this.stateChanges[m][x]),y[x]=this.state[m][x];u[m]=y}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const y={};if(this.deletedStates[m]===null)for(const x in this.state[m])y[x]={},this.state[m][x]={};else for(const x in this.deletedStates[m]){if(this.deletedStates[m][x]===null)this.state[m][x]={};else for(const k of Object.keys(this.deletedStates[m][x]))delete this.state[m][x][k];y[x]=this.state[m][x]}u[m]=u[m]||{},le(u[m],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(u).length!==0)for(const m in i)i[m].setFeatureState(u,s)}}class fh{constructor(i){this.size=i,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(i,s){const u=this.toIdx(i,s);return{min:this.minimums[u],max:this.maximums[u]}}isLeaf(i,s){return this.leaves[this.toIdx(i,s)]}toIdx(i,s){return s*this.size+i}}function hh(a,i,s,u){let m=0,y=Number.MAX_VALUE;for(let x=0;x<3;x++)if(Math.abs(u[x])<1e-15){if(s[x]<a[x]||s[x]>i[x])return null}else{const k=1/u[x];let I=(a[x]-s[x])*k,z=(i[x]-s[x])*k;if(I>z){const G=I;I=z,z=G}if(I>m&&(m=I),z<y&&(y=z),m>y)return null}return m}function mh(a,i,s,u,m,y,x,k,I,z,G){const H=u-a,K=m-i,J=y-s,Q=x-a,se=k-i,pe=I-s,we=G[1]*pe-G[2]*se,Ne=G[2]*Q-G[0]*pe,Se=G[0]*se-G[1]*Q,ke=H*we+K*Ne+J*Se;if(Math.abs(ke)<1e-15)return null;const ze=1/ke,Ie=z[0]-a,nt=z[1]-i,et=z[2]-s,ut=(Ie*we+nt*Ne+et*Se)*ze;if(ut<0||ut>1)return null;const Nt=nt*J-et*K,it=et*H-Ie*J,ft=Ie*K-nt*H,wt=(G[0]*Nt+G[1]*it+G[2]*ft)*ze;return wt<0||ut+wt>1?null:(Q*Nt+se*it+pe*ft)*ze}function gh(a,i,s){return(a-i)/(s-i)}function _h(a,i,s,u,m,y,x,k,I){const z=1<<s,G=y-u,H=x-m,K=(a+1)/z*G+u,J=(i+0)/z*H+m,Q=(i+1)/z*H+m;k[0]=(a+0)/z*G+u,k[1]=J,I[0]=K,I[1]=Q}class vh{constructor(i){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=i,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const s=function(y){const x=Math.ceil(Math.log2(y.dim/8)),k=[];let I=Math.ceil(Math.pow(2,x));const z=1/I,G=(J,Q,se,pe,we)=>{const Ne=pe?1:0,Se=(J+1)*se-Ne,ke=Q*se,ze=(Q+1)*se-Ne;we[0]=J*se,we[1]=ke,we[2]=Se,we[3]=ze};let H=new fh(I);const K=[];for(let J=0;J<I*I;J++){G(J%I,Math.floor(J/I),z,!1,K);const Q=Po(K[0],K[1],y),se=Po(K[2],K[1],y),pe=Po(K[2],K[3],y),we=Po(K[0],K[3],y);H.minimums.push(Math.min(Q,se,pe,we)),H.maximums.push(Math.max(Q,se,pe,we)),H.leaves.push(1)}for(k.push(H),I/=2;I>=1;I/=2){const J=k[k.length-1];H=new fh(I);for(let Q=0;Q<I*I;Q++){G(Q%I,Math.floor(Q/I),2,!0,K);const se=J.getElevation(K[0],K[1]),pe=J.getElevation(K[2],K[1]),we=J.getElevation(K[2],K[3]),Ne=J.getElevation(K[0],K[3]),Se=J.isLeaf(K[0],K[1]),ke=J.isLeaf(K[2],K[1]),ze=J.isLeaf(K[2],K[3]),Ie=J.isLeaf(K[0],K[3]),nt=Math.min(se.min,pe.min,we.min,Ne.min),et=Math.max(se.max,pe.max,we.max,Ne.max),ut=Se&&ke&&ze&&Ie;H.maximums.push(et),H.minimums.push(nt),H.leaves.push(et-nt<=5&&ut?1:0)}k.push(H)}return k}(this.dem),u=s.length-1,m=s[u];this._addNode(m.minimums[0],m.maximums[0],m.leaves[0]),this._construct(s,0,0,u,0)}raycastRoot(i,s,u,m,y,x,k=1){return hh([i,s,-100],[u,m,this.maximums[0]*k],y,x)}raycast(i,s,u,m,y,x,k=1){if(!this.nodeCount)return null;const I=this.raycastRoot(i,s,u,m,y,x,k);if(I==null)return null;const z=[],G=[],H=[],K=[],J=[{idx:0,t:I,nodex:0,nodey:0,depth:0}];for(;J.length>0;){const{idx:Q,t:se,nodex:pe,nodey:we,depth:Ne}=J.pop();if(this.leaves[Q]){_h(pe,we,Ne,i,s,u,m,H,K);const ke=1<<Ne,ze=(pe+0)/ke,Ie=(pe+1)/ke,nt=(we+0)/ke,et=(we+1)/ke,ut=Po(ze,nt,this.dem)*k,Nt=Po(Ie,nt,this.dem)*k,it=Po(Ie,et,this.dem)*k,ft=Po(ze,et,this.dem)*k,wt=mh(H[0],H[1],ut,K[0],H[1],Nt,K[0],K[1],it,y,x),ht=mh(K[0],K[1],it,H[0],K[1],ft,H[0],H[1],ut,y,x),Rt=Math.min(wt!==null?wt:Number.MAX_VALUE,ht!==null?ht:Number.MAX_VALUE);if(Rt!==Number.MAX_VALUE)return Rt;{const Et=iu([],y,x,se);if(yh(ut,Nt,ft,it,gh(Et[0],H[0],K[0]),gh(Et[1],H[1],K[1]))>=Et[2])return se}continue}let Se=0;for(let ke=0;ke<this._siblingOffset.length;ke++){_h((pe<<1)+this._siblingOffset[ke][0],(we<<1)+this._siblingOffset[ke][1],Ne+1,i,s,u,m,H,K),H[2]=-100,K[2]=this.maximums[this.childOffsets[Q]+ke]*k;const ze=hh(H,K,y,x);if(ze!=null){const Ie=ze;z[ke]=Ie;let nt=!1;for(let et=0;et<Se&&!nt;et++)Ie>=z[G[et]]&&(G.splice(et,0,ke),nt=!0);nt||(G[Se]=ke),Se++}}for(let ke=0;ke<Se;ke++){const ze=G[ke];J.push({idx:this.childOffsets[Q]+ze,t:z[ze],nodex:(pe<<1)+this._siblingOffset[ze][0],nodey:(we<<1)+this._siblingOffset[ze][1],depth:Ne+1})}}return null}_addNode(i,s,u){return this.minimums.push(i),this.maximums.push(s),this.leaves.push(u),this.childOffsets.push(0),this.nodeCount++}_construct(i,s,u,m,y){if(i[m].isLeaf(s,u)===1)return;this.childOffsets[y]||(this.childOffsets[y]=this.nodeCount);const x=m-1,k=i[x];let I=0,z=0;for(let G=0;G<this._siblingOffset.length;G++){const H=2*s+this._siblingOffset[G][0],K=2*u+this._siblingOffset[G][1],J=k.getElevation(H,K),Q=k.isLeaf(H,K),se=this._addNode(J.min,J.max,Q);Q&&(I|=1<<G),z||(z=se)}for(let G=0;G<this._siblingOffset.length;G++)I&1<<G||this._construct(i,2*s+this._siblingOffset[G][0],2*u+this._siblingOffset[G][1],x,z+G)}}function yh(a,i,s,u,m,y){return An(An(a,s,y),An(i,u,y),m)}function Po(a,i,s){const u=s.dim,m=Z(a*u-.5,0,u-1),y=Z(i*u-.5,0,u-1),x=Math.floor(m),k=Math.floor(y),I=Math.min(x+1,u-1),z=Math.min(k+1,u-1);return yh(s.get(x,k),s.get(I,k),s.get(x,z),s.get(I,z),m-x,y-k)}const bh={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class Nu{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(i,s,u,m=!1,y=!1){if(this.uid=i,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(u&&u!=="mapbox"&&u!=="terrarium")return Zt(`"${u}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=s.height;const x=this.dim=s.height-2,k=new Uint32Array(s.data.buffer);if(this.pixels=new Uint8Array(s.data.buffer),this.encoding=u||"mapbox",this.borderReady=m,!m){for(let I=0;I<x;I++)k[this._idx(-1,I)]=k[this._idx(0,I)],k[this._idx(x,I)]=k[this._idx(x-1,I)],k[this._idx(I,-1)]=k[this._idx(I,0)],k[this._idx(I,x)]=k[this._idx(I,x-1)];k[this._idx(-1,-1)]=k[this._idx(0,0)],k[this._idx(x,-1)]=k[this._idx(x-1,0)],k[this._idx(-1,x)]=k[this._idx(0,x-1)],k[this._idx(x,x)]=k[this._idx(x-1,x-1)],y&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new vh(this)}get(i,s,u=!1){u&&(i=Z(i,-1,this.dim),s=Z(s,-1,this.dim));const m=4*this._idx(i,s);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(this.pixels[m],this.pixels[m+1],this.pixels[m+2])}static getUnpackVector(i){return bh[i]}get unpackVector(){return bh[this.encoding]}_idx(i,s){if(i<-1||i>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(i+1)}_unpackMapbox(i,s,u){return(256*i*256+256*s+u)/10-1e4}_unpackTerrarium(i,s,u){return 256*i+s+u/256-32768}static pack(i,s){const u=[0,0,0,0],m=Nu.getUnpackVector(s);let y=Math.floor((i+m[3])/m[2]);return u[2]=y%256,y=Math.floor(y/256),u[1]=y%256,y=Math.floor(y/256),u[0]=y,u}getPixels(){return new Wi({width:this.stride,height:this.stride},this.pixels)}backfillBorder(i,s,u){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let m=s*this.dim,y=s*this.dim+this.dim,x=u*this.dim,k=u*this.dim+this.dim;switch(s){case-1:m=y-1;break;case 1:y=m+1}switch(u){case-1:x=k-1;break;case 1:k=x+1}const I=-s*this.dim,z=-u*this.dim;for(let G=x;G<k;G++)for(let H=m;H<y;H++){const K=4*this._idx(H,G),J=4*this._idx(H+I,G+z);this.pixels[K+0]=i.pixels[J+0],this.pixels[K+1]=i.pixels[J+1],this.pixels[K+2]=i.pixels[J+2],this.pixels[K+3]=i.pixels[J+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}qt(Nu,"DEMData"),qt(vh,"DemMinMaxQuadTree",{omit:["dem"]});class t_{constructor(i,s){this.max=i,this.onRemove=s,this.reset()}reset(){for(const i in this.data)for(const s of this.data[i])s.timeout&&clearTimeout(s.timeout),this.onRemove(s.value);return this.data={},this.order=[],this}add(i,s,u){const m=i.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const y={value:s,timeout:void 0};if(u!==void 0&&(y.timeout=setTimeout(()=>{this.remove(i,y)},u)),this.data[m].push(y),this.order.push(m),this.order.length>this.max){const x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const s=this.data[i].shift();return s.timeout&&clearTimeout(s.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),s.value}getByKey(i){const s=this.data[i];return s?s[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,s){if(!this.has(i))return this;const u=i.wrapped().key,m=s===void 0?0:this.data[u].indexOf(s),y=this.data[u][m];return this.data[u].splice(m,1),y.timeout&&clearTimeout(y.timeout),this.data[u].length===0&&delete this.data[u],this.onRemove(y.value),this.order.splice(this.order.indexOf(u),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this}filter(i){const s=[];for(const u in this.data)for(const m of this.data[u])i(m.value)||s.push(m);for(const u of s)this.remove(u.value.tileID,u)}}class ka{constructor(i,s,u){this.func=i,this.mask=s,this.range=u}}ka.ReadOnly=!1,ka.ReadWrite=!0,ka.disabled=new ka(519,ka.ReadOnly,[0,1]);const Wd=7680;class Zd{constructor(i,s,u,m,y,x){this.test=i,this.ref=s,this.mask=u,this.fail=m,this.depthFail=y,this.pass=x}}Zd.disabled=new Zd({func:519,mask:0},0,0,Wd,Wd,Wd);class Vr{constructor(i,s,u){this.blendFunction=i,this.blendColor=s,this.mask=u}}Vr.Replace=[1,0],Vr.disabled=new Vr(Vr.Replace,Pn.transparent,[!1,!1,!1,!1]),Vr.unblended=new Vr(Vr.Replace,Pn.transparent,[!0,!0,!0,!0]),Vr.alphaBlended=new Vr([1,771],Pn.transparent,[!0,!0,!0,!0]);const Yd=1029,Xd=2305;class xr{constructor(i,s,u){this.enable=i,this.mode=s,this.frontFace=u}}xr.disabled=new xr(!1,Yd,Xd),xr.backCCW=new xr(!0,Yd,Xd),xr.backCW=new xr(!0,Yd,2304),xr.frontCW=new xr(!0,1028,2304),xr.frontCCW=new xr(!0,1028,Xd);class Ss extends tn{constructor(i,s,u){super(),this.id=i,this._onlySymbols=u,s.on("data",m=>{m.dataType==="source"&&m.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&m.dataType==="source"&&m.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),s.on("error",()=>{this._sourceErrored=!0}),this._source=s,this._tiles={},this._cache=new t_(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=s.minTileCacheSize,this._maxTileCacheSize=s.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new e_,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(i){this.map=i,this._minTileCacheSize=this._minTileCacheSize===void 0&&i?i._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&i?i._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles){const s=this._tiles[i];if(s.state!=="loaded"&&s.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(i,s){return i.isSymbolTile=this._onlySymbols,this._source.loadTile(i,s)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){if(this._source.abortTile)return this._source.abortTile(i,()=>{})}serialize(){return this._source.serialize()}prepare(i){if(this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._source.prepareTile)for(const s in this._tiles){const u=this._tiles[s];this._source.prepareTile(u)&&this.map.painter.terrain&&this.map.painter.terrain._clearRenderCacheForTile(this.id,u.tileID),u.upload(i),u.prepare(this.map.style.imageManager)}else for(const s in this._tiles){const u=this._tiles[s];u.upload(i),u.prepare(this.map.style.imageManager)}}getIds(){return ne(this._tiles).map(i=>i.tileID).sort(xh).map(i=>i.key)}getRenderableIds(i){const s=[];for(const u in this._tiles)this._isIdRenderable(+u,i)&&s.push(this._tiles[u]);return i?s.sort((u,m)=>{const y=u.tileID,x=m.tileID,k=new T(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),I=new T(x.canonical.x,x.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-x.overscaledZ||I.y-k.y||I.x-k.x}).map(u=>u.tileID.key):s.map(u=>u.tileID).sort(xh).map(u=>u.key)}hasRenderableParent(i){const s=this.findLoadedParent(i,0);return!!s&&this._isIdRenderable(s.tileID.key)}_isIdRenderable(i,s){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(s||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(+i,"reloading")}}_reloadTile(i,s){const u=this._tiles[i];u&&(u.state!=="loading"&&(u.state=s),this._loadTile(u,this._tileLoaded.bind(this,u,i,s)))}_tileLoaded(i,s,u,m){if(m)if(i.state="errored",m.status!==404)this._source.fire(new On(m,{tile:i}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const y=this.map.painter.terrain;this.update(this.transform,y.getScaledDemTileSize(),!0),y.resetTileLookupCache(this.id)}else this.update(this.transform);else i.timeAdded=Ct.now(),u==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(s,i),this._source.type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),this._source.fire(new zn("data",{dataType:"source",tile:i,coord:i.tileID,sourceCacheId:this.id}))}_backfillDEM(i){const s=this.getRenderableIds();for(let m=0;m<s.length;m++){const y=s[m];if(i.neighboringTiles&&i.neighboringTiles[y]){const x=this.getTileByID(y);u(i,x),u(x,i)}}function u(m,y){if(!m.dem||m.dem.borderReady)return;m.needsHillshadePrepare=!0,m.needsDEMTextureUpload=!0;let x=y.tileID.canonical.x-m.tileID.canonical.x;const k=y.tileID.canonical.y-m.tileID.canonical.y,I=Math.pow(2,m.tileID.canonical.z),z=y.tileID.key;x===0&&k===0||Math.abs(k)>1||(Math.abs(x)>1&&(Math.abs(x+I)===1?x+=I:Math.abs(x-I)===1&&(x-=I)),y.dem&&m.dem&&(m.dem.backfillBorder(y.dem,x,k),m.neighboringTiles&&m.neighboringTiles[z]&&(m.neighboringTiles[z].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,s,u,m){for(const y in this._tiles){let x=this._tiles[y];if(m[y]||!x.hasData()||x.tileID.overscaledZ<=s||x.tileID.overscaledZ>u)continue;let k=x.tileID;for(;x&&x.tileID.overscaledZ>s+1;){const z=x.tileID.scaledTo(x.tileID.overscaledZ-1);x=this._tiles[z.key],x&&x.hasData()&&(k=z)}let I=k;for(;I.overscaledZ>s;)if(I=I.scaledTo(I.overscaledZ-1),i[I.key]){m[k.key]=k;break}}}findLoadedParent(i,s){if(i.key in this._loadedParentTiles){const u=this._loadedParentTiles[i.key];return u&&u.tileID.overscaledZ>=s?u:null}for(let u=i.overscaledZ-1;u>=s;u--){const m=i.scaledTo(u),y=this._getLoadedTile(m);if(y)return y}}_getLoadedTile(i){const s=this._tiles[i.key];return s&&s.hasData()?s:this._cache.getByKey(this._source.reparseOverscaled?i.wrapped().key:i.canonical.key)}updateCacheSize(i,s){s=s||this._source.tileSize;const u=Math.ceil(i.width/s)+1,m=Math.ceil(i.height/s)+1,y=Math.floor(u*m*5),x=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,y):y,k=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,x):x;this._cache.setMaxSize(k)}handleWrapJump(i){const s=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,s){const u={};for(const m in this._tiles){const y=this._tiles[m];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+s),u[y.tileID.key]=y}this._tiles=u;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(+m,this._tiles[m])}}update(i,s,u){if(this.transform=i,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!u)return;let m;this.updateCacheSize(i,s),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?m=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(k=>new Pi(k.canonical.z,k.wrap,k.canonical.z,k.canonical.x,k.canonical.y)):(m=i.coveringTiles({tileSize:s||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!u,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(m=m.filter(k=>this._source.hasTile(k)))):m=[];const y=this._updateRetainedTiles(m);if(wh(this._source.type)&&m.length!==0){const k={},I={},z=Object.keys(y);for(const H of z){const K=y[H],J=this._tiles[H];if(!J||J.fadeEndTime&&J.fadeEndTime<=Ct.now())continue;const Q=this.findLoadedParent(K,Math.max(K.overscaledZ-Ss.maxOverzooming,this._source.minzoom));Q&&(this._addTile(Q.tileID),k[Q.tileID.key]=Q.tileID),I[H]=K}const G=m[m.length-1].overscaledZ;for(const H in this._tiles){const K=this._tiles[H];if(y[H]||!K.hasData())continue;let J=K.tileID;for(;J.overscaledZ>G;){J=J.scaledTo(J.overscaledZ-1);const Q=this._tiles[J.key];if(Q&&Q.hasData()&&I[J.key]){y[H]=K.tileID;break}}}for(const H in k)y[H]||(this._coveredTiles[H]=!0,y[H]=k[H])}for(const k in y)this._tiles[k].clearFadeHold();const x=function(k,I){const z=[];for(const G in k)G in I||z.push(G);return z}(this._tiles,y);for(const k of x){const I=this._tiles[k];I.hasSymbolBuckets&&!I.holdingForFade()?I.setHoldDuration(this.map._fadeDuration):I.hasSymbolBuckets&&!I.symbolFadeFinished()||this._removeTile(+k)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(+i)}_updateRetainedTiles(i){const s={};if(i.length===0)return s;const u={},m=i.reduce((z,G)=>Math.min(z,G.overscaledZ),1/0),y=i[0].overscaledZ,x=Math.max(y-Ss.maxOverzooming,this._source.minzoom),k=Math.max(y+Ss.maxUnderzooming,this._source.minzoom),I={};for(const z of i){const G=this._addTile(z);s[z.key]=z,G.hasData()||m<this._source.maxzoom&&(I[z.key]=z)}this._retainLoadedChildren(I,m,k,s);for(const z of i){let G=this._tiles[z.key];if(G.hasData())continue;if(z.canonical.z>=this._source.maxzoom){const K=z.children(this._source.maxzoom)[0],J=this.getTile(K);if(J&&J.hasData()){s[K.key]=K;continue}}else{const K=z.children(this._source.maxzoom);if(s[K[0].key]&&s[K[1].key]&&s[K[2].key]&&s[K[3].key])continue}let H=G.wasRequested();for(let K=z.overscaledZ-1;K>=x;--K){const J=z.scaledTo(K);if(u[J.key]||(u[J.key]=!0,G=this.getTile(J),!G&&H&&(G=this._addTile(J)),G&&(s[J.key]=J,H=G.wasRequested(),G.hasData())))break}}return s}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const s=[];let u,m=this._tiles[i].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){u=this._loadedParentTiles[m.key];break}s.push(m.key);const y=m.scaledTo(m.overscaledZ-1);if(u=this._getLoadedTile(y),u)break;m=y}for(const y of s)this._loadedParentTiles[y]=u}}_addTile(i){let s=this._tiles[i.key];if(s)return this._source.prepareTile&&this._source.prepareTile(s),s;s=this._cache.getAndRemove(i),s&&(this._setTileReloadTimer(i.key,s),s.tileID=i,this._state.initializeTileState(s,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,s)));const u=Boolean(s);if(!u){const m=this.map?this.map.painter:null;s=new Kd(i,this._source.tileSize*i.overscaleFactor(),this.transform.tileZoom,m,this._isRaster),this._source.prepareTile&&this._source.prepareTile(s)||this._loadTile(s,this._tileLoaded.bind(this,s,i.key,s.state))}return s?(s.uses++,this._tiles[i.key]=s,u||this._source.fire(new zn("dataloading",{tile:s,coord:s.tileID,dataType:"source"})),s):null}_setTileReloadTimer(i,s){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const u=s.getExpiryTimeout();u&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},u))}_removeTile(i){const s=this._tiles[i];s&&(s.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),s.uses>0||(s.hasData()&&s.state!=="reloading"?this._cache.add(s.tileID,s,s.getExpiryTimeout()):(s.aborted=!0,this._abortTile(s),this._unloadTile(s))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(+i);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(i,s,u){const m=[],y=this.transform;if(!y)return m;const x=y.projection.name==="globe",k=Lr(y.center.lng);for(const I in this._tiles){const z=this._tiles[I];if(u&&z.clearQueryDebugViz(),z.holdingForFade())continue;let G;if(x){const H=z.tileID.canonical;if(H.z===0){const K=[Math.abs(Z(k,...tc(H,-1))-k),Math.abs(Z(k,...tc(H,1))-k)];G=[0,2*K.indexOf(Math.min(...K))-1]}else{const K=[Math.abs(Z(k,...tc(H,-1))-k),Math.abs(Z(k,...tc(H,0))-k),Math.abs(Z(k,...tc(H,1))-k)];G=[K.indexOf(Math.min(...K))-1]}}else G=[0];for(const H of G){const K=i.containsTile(z,y,s,H);K&&m.push(K)}}return m}getVisibleCoordinates(i){const s=this.getRenderableIds(i).map(u=>this._tiles[u].tileID);for(const u of s)u.projMatrix=this.transform.calculateProjMatrix(u.toUnwrapped());return s}hasTransition(){if(this._source.hasTransition())return!0;if(wh(this._source.type))for(const i in this._tiles){const s=this._tiles[i];if(s.fadeEndTime!==void 0&&s.fadeEndTime>=Ct.now())return!0}return!1}setFeatureState(i,s,u){this._state.updateState(i=i||"_geojsonTileLayer",s,u)}removeFeatureState(i,s,u){this._state.removeFeatureState(i=i||"_geojsonTileLayer",s,u)}getFeatureState(i,s){return this._state.getState(i=i||"_geojsonTileLayer",s)}setDependencies(i,s,u){const m=this._tiles[i];m&&m.setDependencies(s,u)}reloadTilesForDependencies(i,s){for(const u in this._tiles)this._tiles[u].hasDependency(i,s)&&this._reloadTile(+u,"reloading");this._cache.filter(u=>!u.hasDependency(i,s))}_preloadTiles(i,s){const u=new Map,m=Array.isArray(i)?i:[i],y=this.map.painter.terrain,x=this.usedForTerrain&&y?y.getScaledDemTileSize():this._source.tileSize;for(const k of m){const I=k.coveringTiles({tileSize:x,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const z of I)u.set(z.key,z);this.usedForTerrain&&k.updateElevation(!1)}ce(Array.from(u.values()),(k,I)=>{const z=new Kd(k,this._source.tileSize*k.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(z,G=>{this._source.type==="raster-dem"&&z.dem&&this._backfillDEM(z),I(G,z)})},s)}}function xh(a,i){const s=Math.abs(2*a.wrap)-+(a.wrap<0),u=Math.abs(2*i.wrap)-+(i.wrap<0);return a.overscaledZ-i.overscaledZ||u-s||i.canonical.y-a.canonical.y||i.canonical.x-a.canonical.x}function wh(a){return a==="raster"||a==="image"||a==="video"}function tc(a,i){const s=1<<a.z;return[a.x/s+i,(a.x+1)/s+i]}Ss.maxOverzooming=10,Ss.maxUnderzooming=3;class Mu{constructor(i,s,u){this._demTile=i,this._dem=this._demTile.dem,this._scale=s,this._offset=u}static create(i,s,u){const m=u||i.findDEMTileFor(s);if(!m||!m.dem)return;const y=m.dem,x=m.tileID,k=1<<s.canonical.z-x.canonical.z;return new Mu(m,m.tileSize/an/k,[(s.canonical.x/k-x.canonical.x)*y.dim,(s.canonical.y/k-x.canonical.y)*y.dim])}tileCoordToPixel(i,s){const u=s*this._scale+this._offset[1],m=Math.floor(i*this._scale+this._offset[0]),y=Math.floor(u);return new T(m,y)}getElevationAt(i,s,u,m){const y=i*this._scale+this._offset[0],x=s*this._scale+this._offset[1],k=Math.floor(y),I=Math.floor(x),z=this._dem;return m=!!m,u?An(An(z.get(k,I,m),z.get(k,I+1,m),x-I),An(z.get(k+1,I,m),z.get(k+1,I+1,m),x-I),y-k):z.get(k,I,m)}getElevationAtPixel(i,s,u){return this._dem.get(i,s,!!u)}getMeterToDEM(i){return(1<<this._demTile.tileID.canonical.z)*sr(1,i)*this._dem.stride}}class Eh{constructor(i,s){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new So(an,16,0),this.featureIndexArray=new dp,this.promoteId=s}insert(i,s,u,m,y,x=0){const k=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,m,y,x);const I=this.grid;for(let z=0;z<s.length;z++){const G=s[z],H=[1/0,1/0,-1/0,-1/0];for(let K=0;K<G.length;K++){const J=G[K];H[0]=Math.min(H[0],J.x),H[1]=Math.min(H[1],J.y),H[2]=Math.max(H[2],J.x),H[3]=Math.max(H[3],J.y)}H[0]<an&&H[1]<an&&H[2]>=0&&H[3]>=0&&I.insert(k,H[0],H[1],H[2],H[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Es.VectorTile(new jl(this.rawTileData)).layers,this.sourceLayerCoder=new lh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const i in this.vtLayers)this.vtFeatures[i]=[]}return this.vtLayers}query(i,s,u,m){this.loadVTLayers();const y=i.params||{},x=as(y.filter),k=i.tileResult,I=i.transform,z=k.bufferedTilespaceBounds,G=this.grid.query(z.min.x,z.min.y,z.max.x,z.max.y,(Q,se,pe,we)=>$p(k.bufferedTilespaceGeometry,Q,se,pe,we));G.sort(n_);let H=null;I.elevation&&G.length>0&&(H=Mu.create(I.elevation,this.tileID));const K={};let J;for(let Q=0;Q<G.length;Q++){const se=G[Q];if(se===J)continue;J=se;const pe=this.featureIndexArray.get(se);let we=null;this.loadMatchingFeature(K,pe,x,y.layers,y.availableImages,s,u,m,(Ne,Se,ke,ze=0)=>(we||(we=to(Ne,this.tileID.canonical,i.tileTransform)),Se.queryIntersectsFeature(k,Ne,ke,we,this.z,i.transform,i.pixelPosMatrix,H,ze)))}return K}loadMatchingFeature(i,s,u,m,y,x,k,I,z){const{featureIndex:G,bucketIndex:H,sourceLayerIndex:K,layoutVertexArrayOffset:J}=s,Q=this.bucketLayerIDs[H];if(m&&!function(Ne,Se){for(let ke=0;ke<Ne.length;ke++)if(Se.indexOf(Ne[ke])>=0)return!0;return!1}(m,Q))return;const se=this.sourceLayerCoder.decode(K),pe=this.vtLayers[se].feature(G);if(u.needGeometry){const Ne=vs(pe,!0);if(!u.filter(new me(this.tileID.overscaledZ),Ne,this.tileID.canonical))return}else if(!u.filter(new me(this.tileID.overscaledZ),pe))return;const we=this.getId(pe,se);for(let Ne=0;Ne<Q.length;Ne++){const Se=Q[Ne];if(m&&m.indexOf(Se)<0)continue;const ke=x[Se];if(!ke)continue;let ze={};we!==void 0&&I&&(ze=I.getState(ke.sourceLayer||"_geojsonTileLayer",we));const Ie=le({},k[Se]);Ie.paint=Ch(Ie.paint,ke.paint,pe,ze,y),Ie.layout=Ch(Ie.layout,ke.layout,pe,ze,y);const nt=!z||z(pe,ke,ze,J);if(!nt)continue;const et=new ch(pe,this.z,this.x,this.y,we);et.layer=Ie;let ut=i[Se];ut===void 0&&(ut=i[Se]=[]),ut.push({featureIndex:G,feature:et,intersectionZ:nt})}}lookupSymbolFeatures(i,s,u,m,y,x,k,I){const z={};this.loadVTLayers();const G=as(y);for(const H of i)this.loadMatchingFeature(z,{bucketIndex:u,sourceLayerIndex:m,featureIndex:H,layoutVertexArrayOffset:0},G,x,k,I,s);return z}loadFeature(i){const{featureIndex:s,sourceLayerIndex:u}=i;this.loadVTLayers();const m=this.sourceLayerCoder.decode(u),y=this.vtFeatures[m];if(y[s])return y[s];const x=this.vtLayers[m].feature(s);return y[s]=x,x}hasLayer(i){for(const s of this.bucketLayerIDs)for(const u of s)if(i===u)return!0;return!1}getId(i,s){let u=i.id;return this.promoteId&&(u=i.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof u=="boolean"&&(u=Number(u))),u}}function Ch(a,i,s,u,m){return Ue(a,(y,x)=>{const k=i instanceof De?i.get(x):null;return k&&k.evaluate?k.evaluate(s,u,m):k})}function n_(a,i){return i-a}qt(Eh,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class Sh{constructor(i){const s={},u=[];for(const k in i){const I=i[k],z=s[k]={};for(const G in I.glyphs){const H=I.glyphs[+G];if(!H||H.bitmap.width===0||H.bitmap.height===0)continue;const K=H.metrics.localGlyph?2:1,J={x:0,y:0,w:H.bitmap.width+2*K,h:H.bitmap.height+2*K};u.push(J),z[G]=J}}const{w:m,h:y}=Rd(u),x=new no({width:m||1,height:y||1});for(const k in i){const I=i[k];for(const z in I.glyphs){const G=I.glyphs[+z];if(!G||G.bitmap.width===0||G.bitmap.height===0)continue;const H=s[k][z],K=G.metrics.localGlyph?2:1;no.copy(G.bitmap,x,{x:0,y:0},{x:H.x+K,y:H.y+K},G.bitmap)}}this.image=x,this.positions=s}}qt(Sh,"GlyphAtlas");class i_{constructor(i){this.tileID=new Pi(i.tileID.overscaledZ,i.tileID.wrap,i.tileID.canonical.z,i.tileID.canonical.x,i.tileID.canonical.y),this.tileZoom=i.tileZoom,this.uid=i.uid,this.zoom=i.zoom,this.canonical=i.tileID.canonical,this.pixelRatio=i.pixelRatio,this.tileSize=i.tileSize,this.source=i.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=i.showCollisionBoxes,this.collectResourceTiming=!!i.collectResourceTiming,this.returnDependencies=!!i.returnDependencies,this.promoteId=i.promoteId,this.enableTerrain=!!i.enableTerrain,this.isSymbolTile=i.isSymbolTile,this.tileTransform=Cs(i.tileID.canonical,i.projection),this.projection=i.projection}parse(i,s,u,m,y){this.status="parsing",this.data=i,this.collisionBoxArray=new Ir;const x=new lh(Object.keys(i.layers).sort()),k=new Eh(this.tileID,this.promoteId);k.bucketLayerIDs=[];const I={},z=new Hd(256,256),G={featureIndex:k,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:z,availableImages:u},H=s.familiesBySource[this.source];for(const ze in H){const Ie=i.layers[ze];if(!Ie)continue;let nt=!1,et=!1;for(const it of H[ze])it[0].type==="symbol"?nt=!0:et=!0;if(this.isSymbolTile===!0&&!nt||this.isSymbolTile===!1&&!et)continue;Ie.version===1&&Zt(`Vector tile source "${this.source}" layer "${ze}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ut=x.encode(ze),Nt=[];for(let it=0;it<Ie.length;it++){const ft=Ie.feature(it),wt=k.getId(ft,ze);Nt.push({feature:ft,id:wt,index:it,sourceLayerIndex:ut})}for(const it of H[ze]){const ft=it[0];this.isSymbolTile!==void 0&&ft.type==="symbol"!==this.isSymbolTile||ft.minzoom&&this.zoom<Math.floor(ft.minzoom)||ft.maxzoom&&this.zoom>=ft.maxzoom||ft.visibility!=="none"&&(Jd(it,this.zoom,u),(I[ft.id]=ft.createBucket({index:k.bucketLayerIDs.length,layers:it,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ut,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:u})).populate(Nt,G,this.tileID.canonical,this.tileTransform),k.bucketLayerIDs.push(it.map(wt=>wt.id)))}}let K,J,Q,se;z.trim();const pe={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},we=Ue(G.glyphDependencies,ze=>Object.keys(ze).map(Number));Object.keys(we).length?m.send("getGlyphs",{uid:this.uid,stacks:we},(ze,Ie)=>{K||(K=ze,J=Ie,ke.call(this))},void 0,!1,pe):J={};const Ne=Object.keys(G.iconDependencies);Ne.length?m.send("getImages",{icons:Ne,source:this.source,tileID:this.tileID,type:"icons"},(ze,Ie)=>{K||(K=ze,Q=Ie,ke.call(this))},void 0,!1,pe):Q={};const Se=Object.keys(G.patternDependencies);function ke(){if(K)return y(K);if(J&&Q&&se){const ze=new Sh(J),Ie=new Tf(Q,se);for(const nt in I){const et=I[nt];et instanceof Io?(Jd(et.layers,this.zoom,u),Sg(et,J,ze.positions,Q,Ie.iconPositions,this.showCollisionBoxes,u,this.tileID.canonical,this.tileZoom,this.projection)):et.hasPattern&&(et instanceof fu||et instanceof cu||et instanceof zl)&&(Jd(et.layers,this.zoom,u),et.addFeatures(G,this.tileID.canonical,Ie.patternPositions,u,this.tileTransform))}this.status="done",y(null,{buckets:ne(I).filter(nt=>!nt.isEmpty()),featureIndex:k,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ze.image,lineAtlas:z,imageAtlas:Ie,glyphMap:this.returnDependencies?J:null,iconMap:this.returnDependencies?Q:null,glyphPositions:this.returnDependencies?ze.positions:null})}}Se.length?m.send("getImages",{icons:Se,source:this.source,tileID:this.tileID,type:"patterns"},(ze,Ie)=>{K||(K=ze,se=Ie,ke.call(this))},void 0,!1,pe):se={},ke.call(this)}}function Jd(a,i,s){const u=new me(i);for(const m of a)m.recalculate(u,s)}class Th{constructor(i){this.entries={},this.scheduler=i}request(i,s,u,m){const y=this.entries[i]=this.entries[i]||{callbacks:[]};if(y.result){const[x,k]=y.result;return this.scheduler?this.scheduler.add(()=>{m(x,k)},s):m(x,k),()=>{}}return y.callbacks.push(m),y.cancel||(y.cancel=u((x,k)=>{y.result=[x,k];for(const I of y.callbacks)this.scheduler?this.scheduler.add(()=>{I(x,k)},s):I(x,k);setTimeout(()=>delete this.entries[i],3e3)})),()=>{y.result||(y.callbacks=y.callbacks.filter(x=>x!==m),y.callbacks.length||(y.cancel(),delete this.entries[i]))}}}function Ah(a,i,s){const u=JSON.stringify(a.request);return a.data&&(this.deduped.entries[u]={result:[null,a.data]}),this.deduped.request(u,{type:"parseTile",isSymbolTile:a.isSymbolTile,zoom:a.tileZoom},m=>{const y=Ye(a.request,(x,k,I,z)=>{x?m(x):k&&m(null,{vectorTile:s?void 0:new Es.VectorTile(new jl(k)),rawData:k,cacheControl:I,expires:z})});return()=>{y.cancel(),m()}},i)}r.ARRAY_TYPE=Ki,r.AUTH_ERR_MSG=Ht,r.Aabb=Ui,r.Actor=class{constructor(a,i,s){this.target=a,this.parent=i,this.mapId=s,this.callbacks={},this.cancelCallbacks={},ge(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=tt()?a:v,this.scheduler=new Jg}send(a,i,s,u,m=!1,y){const x=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(s.metadata=y,this.callbacks[x]=s);const k=Bt(this.globalScope)?void 0:[];return this.target.postMessage({id:x,type:a,hasCallback:!!s,targetMapId:u,mustQueue:m,sourceMapId:this.mapId,data:To(i,k)},k),{cancel:()=>{s&&delete this.callbacks[x],this.target.postMessage({id:x,type:"<cancel>",targetMapId:u,sourceMapId:this.mapId})}}}receive(a){const i=a.data,s=i.id;if(s&&(!i.targetMapId||this.mapId===i.targetMapId))if(i.type==="<cancel>"){const u=this.cancelCallbacks[s];delete this.cancelCallbacks[s],u&&u.cancel()}else if(i.mustQueue||tt()){const u=this.callbacks[s];this.cancelCallbacks[s]=this.scheduler.add(()=>this.processTask(s,i),u&&u.metadata||{type:"message"})}else this.processTask(s,i)}processTask(a,i){if(i.type==="<response>"){const s=this.callbacks[a];delete this.callbacks[a],s&&(i.error?s(us(i.error)):s(null,us(i.data)))}else{const s=Bt(this.globalScope)?void 0:[],u=i.hasCallback?(y,x)=>{delete this.cancelCallbacks[a],this.target.postMessage({id:a,type:"<response>",sourceMapId:this.mapId,error:y?To(y):null,data:To(x,s)},s)}:y=>{},m=us(i.data);if(this.parent[i.type])this.parent[i.type](i.sourceMapId,m,u);else if(this.parent.getWorkerSource){const y=i.type.split(".");this.parent.getWorkerSource(i.sourceMapId,y[0],m.source)[y[1]](m,u)}else u(new Error(`Could not find function ${i.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},r.CanonicalTileID=du,r.Color=Pn,r.ColorMode=Vr,r.CullFaceMode=xr,r.DEMData=Nu,r.DataConstantProperty=Le,r.DedupedRequest=Th,r.DepthMode=ka,r.EXTENT=an,r.Elevation=class{isDataAvailableAtPoint(a){const i=this._source();if(!i||a.y<0||a.y>1)return!1;const s=i.getSource().maxzoom,u=1<<s,m=Math.floor(a.x),y=Math.floor((a.x-m)*u),x=Math.floor(a.y*u),k=this.findDEMTileFor(new Pi(s,m,s,y,x));return!(!k||!k.dem)}getAtPointOrZero(a,i=0){return this.getAtPoint(a,i)||0}getAtPoint(a,i,s=!0){i==null&&(i=null);const u=this._source();if(!u||a.y<0||a.y>1)return i;const m=u.getSource().maxzoom,y=1<<m,x=Math.floor(a.x),k=a.x-x,I=new Pi(m,x,m,Math.floor(k*y),Math.floor(a.y*y)),z=this.findDEMTileFor(I);if(!z||!z.dem)return i;const G=z.dem,H=1<<z.tileID.canonical.z,K=(k*H-z.tileID.canonical.x)*G.dim,J=(a.y*H-z.tileID.canonical.y)*G.dim,Q=Math.floor(K),se=Math.floor(J);return(s?this.exaggeration():1)*An(An(G.get(Q,se),G.get(Q,se+1),J-se),An(G.get(Q+1,se),G.get(Q+1,se+1),J-se),K-Q)}getAtTileOffset(a,i,s){const u=1<<a.canonical.z;return this.getAtPointOrZero(new pa(a.wrap+(a.canonical.x+i/an)/u,(a.canonical.y+s/an)/u))}getAtTileOffsetFunc(a,i,s,u){return m=>{const y=this.getAtTileOffset(a,m.x,m.y),x=u.upVector(a.canonical,m.x,m.y);return _r(x,x,y*u.upVectorScale(a.canonical,i,s).metersToTile),x}}getForTilePoints(a,i,s,u){const m=Mu.create(this,a,u);return!!m&&(i.forEach(y=>{y[2]=this.exaggeration()*m.getElevationAt(y[0],y[1],s)}),!0)}getMinMaxForTile(a){const i=this.findDEMTileFor(a);if(!i||!i.dem)return null;const s=i.dem.tree,u=i.tileID,m=1<<a.canonical.z-u.canonical.z;let y=a.canonical.x/m-u.canonical.x,x=a.canonical.y/m-u.canonical.y,k=0;for(let I=0;I<a.canonical.z-u.canonical.z&&!s.leaves[k];I++){y*=2,x*=2;const z=2*Math.floor(x)+Math.floor(y);k=s.childOffsets[k]+z,y%=1,x%=1}return{min:this.exaggeration()*s.minimums[k],max:this.exaggeration()*s.maximums[k]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(a,i,s){throw new Error("Pure virtual method called.")}pointCoordinate(a){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(a){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},r.ErrorEvent=On,r.EvaluationParameters=me,r.Event=zn,r.Evented=tn,r.FillExtrusionBucket=zl,r.Frustum=vd,r.FrustumCorners=_d,r.GLOBE_METERS_TO_ECEF=Bd,r.GLOBE_RADIUS=oo,r.GLOBE_SCALE_MATCH_LATITUDE=45,r.GLOBE_ZOOM_THRESHOLD_MAX=6,r.GLOBE_ZOOM_THRESHOLD_MIN=5,r.GlobeSharedBuffers=class{constructor(a){this._createGrid(a),this._createPoles(a)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const a of this._poleSegments)a.destroy();for(const a of this._gridSegments)a.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const a of this._wireframeSegments)a.destroy()}}_createGrid(a){const i=new Ot,s=new bn,u=65;for(let m=0;m<u;m++)for(let y=0;y<u;y++)i.emplaceBack(y,m);this._gridSegments=[];for(let m=0,y=0;m<Sa.length;m++){const x=Sa[m];for(let I=0;I<x;I++)for(let z=0;z<64;z++){const G=I*u+z;s.emplaceBack(G+1,G,G+u),s.emplaceBack(G+u,G+u+1,G+1)}const k=64*x*2;this._gridSegments.push(di.simpleSegment(0,y,(x+1)*u,k)),y+=k}this._gridBuffer=a.createVertexBuffer(i,Hl.members),this._gridIndexBuffer=a.createIndexBuffer(s,!0)}_createPoles(a){const i=new bn;for(let m=0;m<=64;m++)i.emplaceBack(0,m+1,m+2);this._poleIndexBuffer=a.createIndexBuffer(i,!0);const s=new Ei,u=new Ei;this._poleSegments=[];for(let m=0,y=0;m<5;m++){const x=360/(1<<m);s.emplaceBack(0,-oo,0,.5,0),u.emplaceBack(0,-oo,0,.5,1);for(let k=0;k<=64;k++){const I=k/64,z=An(0,x,I),[G,H,K]=Ta(Mg,Ig,z,oo);s.emplaceBack(G,H,K,I,0),u.emplaceBack(G,H,K,I,1)}this._poleSegments.push(di.simpleSegment(y,0,66,64)),y+=66}this._poleNorthVertexBuffer=a.createVertexBuffer(s,Hf,!1),this._poleSouthVertexBuffer=a.createVertexBuffer(u,Hf,!1)}getGridBuffers(a){return[this._gridBuffer,this._gridIndexBuffer,this._gridSegments[a]]}getPoleBuffers(a){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[a]]}getWirefameBuffers(a,i){if(!this._wireframeSegments){const s=new Ri,u=64,m=u+1;this._wireframeSegments=[];for(let y=0,x=0;y<Sa.length;y++){const k=Sa[y];for(let z=0;z<k;z++)for(let G=0;G<u;G++){const H=z*m+G;s.emplaceBack(H,H+1),s.emplaceBack(H,H+m),s.emplaceBack(H,H+m+1)}const I=k*u*3;this._wireframeSegments.push(di.simpleSegment(0,x,(k+1)*m,I)),x+=I}this._wireframeIndexBuffer=a.createIndexBuffer(s)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[i]]}},r.GlyphManager=Ea,r.ImagePosition=$d,r.LineAtlas=Hd,r.LngLat=In,r.LngLatBounds=Ro,r.LocalGlyphMode=Ld,r.MAX_MERCATOR_LATITUDE=Or,r.MercatorCoordinate=pa,r.ONE_EM=Si,r.OverscaledTileID=Pi,r.Properties=pt,r.RGBAImage=Wi,r.Ray=gd,r.RequestManager=class{constructor(a,i,s){this._transformRequestFn=a,this._customAccessToken=i,this._silenceAuthErrors=!!s,this._createSkuToken()}_createSkuToken(){const a=function(){let i="";for(let s=0;s<10;s++)i+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",at,i].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=a.token,this._skuTokenExpiresAt=a.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(a,i){return this._transformRequestFn&&this._transformRequestFn(a,i)||{url:a}}normalizeStyleURL(a,i){if(!Gt(a))return a;const s=Qn(a);return s.path=`/styles/v1${s.path}`,this._makeAPIURL(s,this._customAccessToken||i)}normalizeGlyphsURL(a,i){if(!Gt(a))return a;const s=Qn(a);return s.path=`/fonts/v1${s.path}`,this._makeAPIURL(s,this._customAccessToken||i)}normalizeSourceURL(a,i,s,u){if(!Gt(a))return a;const m=Qn(a);return m.path=`/v4/${m.authority}.json`,m.params.push("secure"),s&&m.params.push(`language=${s}`),u&&m.params.push(`worldview=${u}`),this._makeAPIURL(m,this._customAccessToken||i)}normalizeSpriteURL(a,i,s,u){const m=Qn(a);return Gt(a)?(m.path=`/styles/v1${m.path}/sprite${i}${s}`,this._makeAPIURL(m,this._customAccessToken||u)):(m.path+=`${i}${s}`,Ai(m))}normalizeTileURL(a,i,s){if(this._isSkuTokenExpired()&&this._createSkuToken(),a&&!Gt(a))return a;const u=Qn(a);u.path=u.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${i||s&&u.authority!=="raster"&&s===512?"@2x":""}${vt.supported?".webp":"$1"}`),u.authority==="raster"?u.path=`/${Fe.RASTER_URL_PREFIX}${u.path}`:(u.path=u.path.replace(/^.+\/v4\//,"/"),u.path=`/${Fe.TILE_URL_VERSION}${u.path}`);const m=this._customAccessToken||function(y){for(const x of y){const k=x.match(/^access_token=(.*)$/);if(k)return k[1]}return null}(u.params)||Fe.ACCESS_TOKEN;return Fe.REQUIRE_ACCESS_TOKEN&&m&&this._skuToken&&u.params.push(`sku=${this._skuToken}`),this._makeAPIURL(u,m)}canonicalizeTileURL(a,i){const s=Qn(a);if(!s.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!s.path.match(/\.[\w]+$/))return a;let u="mapbox://";s.path.match(/^\/raster\/v1\//)?u+=`raster/${s.path.replace(`/${Fe.RASTER_URL_PREFIX}/`,"")}`:u+=`tiles/${s.path.replace(`/${Fe.TILE_URL_VERSION}/`,"")}`;let m=s.params;return i&&(m=m.filter(y=>!y.match(/^access_token=/))),m.length&&(u+=`?${m.join("&")}`),u}canonicalizeTileset(a,i){const s=!!i&&Gt(i),u=[];for(const m of a.tiles||[])vn(m)?u.push(this.canonicalizeTileURL(m,s)):u.push(m);return u}_makeAPIURL(a,i){const s="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",u=Qn(Fe.API_URL);if(a.protocol=u.protocol,a.authority=u.authority,a.protocol==="http"){const m=a.params.indexOf("secure");m>=0&&a.params.splice(m,1)}if(u.path!=="/"&&(a.path=`${u.path}${a.path}`),!Fe.REQUIRE_ACCESS_TOKEN)return Ai(a);if(i=i||Fe.ACCESS_TOKEN,!this._silenceAuthErrors){if(!i)throw new Error(`An API access token is required to use Mapbox GL. ${s}`);if(i[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${s}`)}return a.params=a.params.filter(m=>m.indexOf("access_token")===-1),a.params.push(`access_token=${i||""}`),Ai(a)}},r.ResourceType=Ve,r.SegmentVector=di,r.SourceCache=Ss,r.StencilMode=Zd,r.StructArrayLayout1ui2=Wr,r.StructArrayLayout2f1f2i16=hr,r.StructArrayLayout2i4=Ot,r.StructArrayLayout2ui4=Ri,r.StructArrayLayout3f12=Yn,r.StructArrayLayout3ui6=bn,r.StructArrayLayout4i8=Qt,r.StructArrayLayout5f20=Ei,r.Texture=ec,r.Tile=Kd,r.Transitionable=Ce,r.Uniform1f=Yc,r.Uniform1i=class extends Jr{constructor(a){super(a),this.current=0}set(a,i,s){this.fetchUniformLocation(a,i)&&this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},r.Uniform2f=class extends Jr{constructor(a){super(a),this.current=[0,0]}set(a,i,s){this.fetchUniformLocation(a,i)&&(s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1])))}},r.Uniform3f=class extends Jr{constructor(a){super(a),this.current=[0,0,0]}set(a,i,s){this.fetchUniformLocation(a,i)&&(s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2])))}},r.Uniform4f=vp,r.UniformColor=yp,r.UniformMatrix2f=class extends Jr{constructor(a){super(a),this.current=Fh}set(a,i,s){if(this.fetchUniformLocation(a,i)){for(let u=0;u<4;u++)if(s[u]!==this.current[u]){this.current=s,this.gl.uniformMatrix2fv(this.location,!1,s);break}}}},r.UniformMatrix3f=class extends Jr{constructor(a){super(a),this.current=zh}set(a,i,s){if(this.fetchUniformLocation(a,i)){for(let u=0;u<9;u++)if(s[u]!==this.current[u]){this.current=s,this.gl.uniformMatrix3fv(this.location,!1,s);break}}}},r.UniformMatrix4f=class extends Jr{constructor(a){super(a),this.current=Bh}set(a,i,s){if(this.fetchUniformLocation(a,i)){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let u=1;u<16;u++)if(s[u]!==this.current[u]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}}},r.UnwrappedTileID=ff,r.ValidationError=Vt,r.VectorTileWorkerSource=class extends tn{constructor(a,i,s,u,m){super(),this.actor=a,this.layerIndex=i,this.availableImages=s,this.loadVectorData=m||Ah,this.loading={},this.loaded={},this.deduped=new Th(a.scheduler),this.isSpriteLoaded=u,this.scheduler=a.scheduler}loadTile(a,i){const s=a.uid,u=a&&a.request,m=u&&u.collectResourceTiming,y=this.loading[s]=new i_(a);y.abort=this.loadVectorData(a,(x,k)=>{const I=!this.loading[s];if(delete this.loading[s],I||x||!k)return y.status="done",I||(this.loaded[s]=y),i(x);const z=k.rawData,G={};k.expires&&(G.expires=k.expires),k.cacheControl&&(G.cacheControl=k.cacheControl),y.vectorTile=k.vectorTile||new Es.VectorTile(new jl(z));const H=()=>{y.parse(y.vectorTile,this.layerIndex,this.availableImages,this.actor,(K,J)=>{if(K||!J)return i(K);const Q={};if(m){const se=Yt(u);se.length>0&&(Q.resourceTiming=JSON.parse(JSON.stringify(se)))}i(null,le({rawTileData:z.slice(0)},J,G,Q))})};this.isSpriteLoaded?H():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(H,{type:"parseTile",isSymbolTile:a.isSymbolTile,zoom:a.tileZoom}):H()}),this.loaded=this.loaded||{},this.loaded[s]=y})}reloadTile(a,i){const s=this.loaded,u=a.uid,m=this;if(s&&s[u]){const y=s[u];y.showCollisionBoxes=a.showCollisionBoxes,y.enableTerrain=!!a.enableTerrain,y.projection=a.projection,y.tileTransform=Cs(a.tileID.canonical,a.projection);const x=(k,I)=>{const z=y.reloadCallback;z&&(delete y.reloadCallback,y.parse(y.vectorTile,m.layerIndex,this.availableImages,m.actor,z)),i(k,I)};y.status==="parsing"?y.reloadCallback=x:y.status==="done"&&(y.vectorTile?y.parse(y.vectorTile,this.layerIndex,this.availableImages,this.actor,x):x())}}abortTile(a,i){const s=a.uid,u=this.loading[s];u&&(u.abort&&u.abort(),delete this.loading[s]),i()}removeTile(a,i){const s=this.loaded,u=a.uid;s&&s[u]&&delete s[u],i()}},r.WritingMode=ir,r.ZoomHistory=Oc,r.add=$o,r.addDynamicAttributes=ku,r.adjoint=function(a,i){var s=i[0],u=i[1],m=i[2],y=i[3],x=i[4],k=i[5],I=i[6],z=i[7],G=i[8];return a[0]=x*G-k*z,a[1]=m*z-u*G,a[2]=u*k-m*x,a[3]=k*I-y*G,a[4]=s*G-m*I,a[5]=m*y-s*k,a[6]=y*z-x*I,a[7]=u*I-s*z,a[8]=s*x-u*y,a},r.asyncAll=ce,r.bezier=U,r.bindAll=ge,r.boundsAttributes=dh,r.bufferConvexPolygon=function(a,i){const s=[];for(let u=0;u<a.length;u++){const m=ae(u-1,-1,a.length-1),y=ae(u+1,-1,a.length-1),x=a[u],k=a[y],I=a[m].sub(x).unit(),z=k.sub(x).unit(),G=z.angleWithSep(I.x,I.y),H=I.add(z).unit().mult(-1*i/Math.sin(G/2));s.push(x.add(H))}return s},r.cacheEntryPossiblyAdded=function(a){Ae++,Ae>$s&&(a.getActor().send("enforceCacheSizeLimit",ao),Ae=0)},r.calculateGlobeLabelMatrix=function(a,i){const{x:s,y:u}=a.point,m=Jf(s,u,a.worldSize/a._pixelsPerMercatorPixel,0,0);return ha(m,m,Vd(Br(i)))},r.calculateGlobeMatrix=function(a){const{x:i,y:s}=a.point,{lng:u,lat:m}=a._center;return Jf(i,s,a.worldSize,u,m)},r.calculateGlobeMercatorMatrix=function(a){const i=a.pixelsPerMeter,s=i/sr(1,a.center.lat),u=Pr(new Float64Array(16));return $l(u,u,[a.point.x,a.point.y,0]),bs(u,u,[s,s,i]),Float32Array.from(u)},r.circumferenceAtLatitude=nd,r.clamp=Z,r.clearTileCache=function(a){const i=Ee(),s=[];for(const u in Mi)i&&s.push(i.delete(u)),delete Mi[u];a&&Promise.all(s).catch(a).then(()=>a())},r.clipLine=Bf,r.clone=function(a){var i=new Ki(16);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i[3]=a[3],i[4]=a[4],i[5]=a[5],i[6]=a[6],i[7]=a[7],i[8]=a[8],i[9]=a[9],i[10]=a[10],i[11]=a[11],i[12]=a[12],i[13]=a[13],i[14]=a[14],i[15]=a[15],i},r.clone$1=xt,r.collisionCircleLayout=Xm,r.config=Fe,r.conjugate=function(a,i){return a[0]=-i[0],a[1]=-i[1],a[2]=-i[2],a[3]=i[3],a},r.create=function(){var a=new Ki(16);return Ki!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},r.create$1=Ip,r.createExpression=bo,r.createLayout=mt,r.createStyleLayer=function(a){return a.type==="custom"?new Wg(a):new Yg[a.type](a)},r.cross=md,r.degToRad=P,r.distance=function(a,i){return Math.hypot(i[0]-a[0],i[1]-a[1],i[2]-a[2])},r.div=function(a,i,s){return a[0]=i[0]/s[0],a[1]=i[1]/s[1],a[2]=i[2]/s[2],a},r.dot=lr,r.ease=W,r.easeCubicInOut=D,r.emitValidationErrors=vl,r.endsWith=Me,r.enforceCacheSizeLimit=function(a){for(const i in Mi)ee(i),Mi[i].then(s=>{s.keys().then(u=>{for(let m=0;m<u.length-a;m++)s.delete(u[m])})})},r.evaluateSizeForFeature=hu,r.evaluateSizeForZoom=ya,r.evaluateVariableOffset=jf,r.evented=te,r.exactEquals=function(a,i){return a[0]===i[0]&&a[1]===i[1]&&a[2]===i[2]&&a[3]===i[3]},r.exactEquals$1=function(a,i){return a[0]===i[0]&&a[1]===i[1]&&a[2]===i[2]},r.exported=Ct,r.exported$1=vt,r.extend=le,r.extend$1=zi,r.fillExtrusionHeightLift=uf,r.filterObject=Ze,r.fromMat4=function(a,i){return a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[4],a[4]=i[5],a[5]=i[6],a[6]=i[8],a[7]=i[9],a[8]=i[10],a},r.fromQuat=function(a,i){var s=i[0],u=i[1],m=i[2],y=i[3],x=s+s,k=u+u,I=m+m,z=s*x,G=u*x,H=u*k,K=m*x,J=m*k,Q=m*I,se=y*x,pe=y*k,we=y*I;return a[0]=1-H-Q,a[1]=G+we,a[2]=K-pe,a[3]=0,a[4]=G-we,a[5]=1-z-Q,a[6]=J+se,a[7]=0,a[8]=K+pe,a[9]=J-se,a[10]=1-z-H,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},r.fromRotation=function(a,i){var s=Math.sin(i),u=Math.cos(i);return a[0]=u,a[1]=s,a[2]=0,a[3]=-s,a[4]=u,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},r.fromScaling=Lp,r.furthestTileCorner=function(a){const i=Math.round((a+45+360)%360/90)%4;return V[i]},r.getAABBPointSquareDist=function(a,i,s){let u=0;for(let m=0;m<2;++m){const y=s?s[m]:0;a[m]>y&&(u+=(a[m]-y)*(a[m]-y)),i[m]<y&&(u+=(y-i[m])*(y-i[m]))}return u},r.getAnchorAlignment=Id,r.getAnchorJustification=Pd,r.getBounds=function(a){let i=1/0,s=1/0,u=-1/0,m=-1/0;for(const y of a)i=Math.min(i,y.x),s=Math.min(s,y.y),u=Math.max(u,y.x),m=Math.max(m,y.y);return{min:new T(i,s),max:new T(u,m)}},r.getColumn=ln,r.getGridMatrix=function(a,i,s){const u=i.getNorth(),m=i.getSouth(),y=i.getWest(),x=.015625;return[0,(i.getEast()-y)*x,1<<a.z,(m-u)/Sa[s],0,a.y,u,y,x]},r.getImage=sn,r.getJSON=function(a,i){return je(le(a,{type:"json"}),i)},r.getLatitudinalLod=function(a){const i=80.051129;a=Z(a,-80.051129,i)/i*90;const s=Math.pow(Math.abs(Math.sin(P(a))),3);return Math.round(s*(Sa.length-1))},r.getMapSessionAPI=$a,r.getPerformanceMeasurement=Yt,r.getProjection=sh,r.getRTLTextPluginStatus=ue,r.getReferrer=He,r.getTilePoint=function(a,{x:i,y:s},u=0){return new T(((i-u)*a.scale-a.x)*an,(s*a.scale-a.y)*an)},r.getTileVec3=function(a,i,s=0){return ma(((i.x-s)*a.scale-a.x)*an,(i.y*a.scale-a.y)*an,wp(i.z,i.y))},r.getVideo=function(a,i){const s=v.document.createElement("video");s.muted=!0,s.onloadstart=function(){i(null,s)};for(let u=0;u<a.length;u++){const m=v.document.createElement("source");St(a[u])||(s.crossOrigin="Anonymous"),m.src=a[u],s.appendChild(m)}return{cancel:()=>{}}},r.globeCenterToScreenPoint=function(a){const i=[0,0,0],s=Pr(new Float64Array(16));return ha(s,a.pixelMatrix,a.globeMatrix),pi(i,i,s),new T(i[0],i[1])},r.globeDenormalizeECEF=Vd,r.globeECEFOrigin=function(a,i){const s=[0,0,0];return pi(s,s,Wl(Br(i.canonical))),pi(s,s,a),s},r.globeNormalizeECEF=Wl,r.globePixelsToTileUnits=function(a,i){return an/(512*Math.pow(2,a))*Eu(Br(i))},r.globePoleMatrixForTile=function(a,i,s){const u=Pr(new Float64Array(16)),m=(i/(1<<a)-.5)*Math.PI*2;return nu(u,s.globeMatrix,m),Float32Array.from(u)},r.globeTileBounds=Br,r.globeTiltAtLngLat=Qf,r.globeToMercatorTransition=Zl,r.globeUseCustomAntiAliasing=function(a,i,s){const u=Zl(s.zoom),m=a.style.map._antialias,y=!!i.extStandardDerivatives,x=i.extStandardDerivativesForceOff||a.terrain&&a.terrain.exaggeration()>0;return u===0&&!m&&!x&&y},r.identity=Pr,r.identity$1=Vp,r.invert=cd,r.isFullscreen=function(){return!!v.document.fullscreenElement||!!v.document.webkitFullscreenElement},r.isLngLatBehindGlobe=function(a,i){return Qf(a,i)>Math.PI/2*1.01},r.isMapAuthenticated=function(a){return Cr.has(a)},r.isMapboxURL=Gt,r.isSafariWithAntialiasingBug=function(a){const i=a.navigator?a.navigator.userAgent:null;return!!Bt(a)&&i&&(i.match("Version/15.4")||i.match("Version/15.5")||i.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},r.latFromMercatorY=Ci,r.len=im,r.length=Nl,r.length$1=function(a){return Math.hypot(a[0],a[1],a[2],a[3])},r.loadVectorTile=Ah,r.makeRequest=je,r.mapValue=function(a,i,s,u,m){return Z((a-i)/(s-i)*(m-u)+u,u,m)},r.mercatorScale=Ep,r.mercatorXfromLng=Lr,r.mercatorYfromLat=eo,r.mercatorZfromAltitude=sr,r.mul=tm,r.mul$1=nm,r.multiply=ha,r.multiply$1=function(a,i,s){var u=i[0],m=i[1],y=i[2],x=i[3],k=i[4],I=i[5],z=i[6],G=i[7],H=i[8],K=s[0],J=s[1],Q=s[2],se=s[3],pe=s[4],we=s[5],Ne=s[6],Se=s[7],ke=s[8];return a[0]=K*u+J*x+Q*z,a[1]=K*m+J*k+Q*G,a[2]=K*y+J*I+Q*H,a[3]=se*u+pe*x+we*z,a[4]=se*m+pe*k+we*G,a[5]=se*y+pe*I+we*H,a[6]=Ne*u+Se*x+ke*z,a[7]=Ne*m+Se*k+ke*G,a[8]=Ne*y+Se*I+ke*H,a},r.multiply$2=Dp,r.nextPowerOfTwo=Pe,r.normalize=Oi,r.normalize$1=function(a,i){var s=i[0],u=i[1],m=i[2],y=i[3],x=s*s+u*u+m*m+y*y;return x>0&&(x=1/Math.sqrt(x)),a[0]=s*x,a[1]=u*x,a[2]=m*x,a[3]=y*x,a},r.number=An,r.ortho=function(a,i,s,u,m,y,x){var k=1/(i-s),I=1/(u-m),z=1/(y-x);return a[0]=-2*k,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*I,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*z,a[11]=0,a[12]=(i+s)*k,a[13]=(m+u)*I,a[14]=(x+y)*z,a[15]=1,a},r.pbf=jl,r.perspective=function(a,i,s,u,m){var y,x=1/Math.tan(i/2);return a[0]=x/s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=x,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,m!=null&&m!==1/0?(a[10]=(m+u)*(y=1/(u-m)),a[14]=2*m*u*y):(a[10]=-1,a[14]=-2*u),a},r.pick=function(a,i){const s={};for(let u=0;u<i.length;u++){const m=i[u];m in a&&(s[m]=a[m])}return s},r.plugin=he,r.pointGeometry=T,r.polygonContainsPoint=ys,r.polygonIntersectsBox=$p,r.polygonIntersectsPolygon=Tp,r.polygonizeBounds=function(a,i,s=0,u=!0){const m=new T(s,s),y=a.sub(m),x=i.add(m),k=[y,new T(x.x,y.y),x,new T(y.x,x.y)];return u&&k.push(y.clone()),k},r.posAttributes=Hl,r.postMapLoadEvent=ks,r.postTurnstileEvent=bi,r.potpack=Rd,r.prevPowerOfTwo=function(a){return a<=1?1:Math.pow(2,Math.floor(Math.log(a)/Math.LN2))},r.radToDeg=O,r.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],r.registerForPluginStateChange=function(a){return a({pluginStatus:j,pluginURL:q}),te.on("pluginStateChange",a),a},r.removeAuthState=function(a){Cr.delete(a)},r.renderColorRamp=bd,r.resample=Cp,r.rotateX=ud,r.rotateX$1=Up,r.rotateY=nu,r.rotateY$1=jp,r.rotateZ=function(a,i,s){var u=Math.sin(s),m=Math.cos(s),y=i[0],x=i[1],k=i[2],I=i[3],z=i[4],G=i[5],H=i[6],K=i[7];return i!==a&&(a[8]=i[8],a[9]=i[9],a[10]=i[10],a[11]=i[11],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[0]=y*m+z*u,a[1]=x*m+G*u,a[2]=k*m+H*u,a[3]=I*m+K*u,a[4]=z*m-y*u,a[5]=G*m-x*u,a[6]=H*m-k*u,a[7]=K*m-I*u,a},r.rotateZ$1=function(a,i,s){s*=.5;var u=i[0],m=i[1],y=i[2],x=i[3],k=Math.sin(s),I=Math.cos(s);return a[0]=u*I+m*k,a[1]=m*I-u*k,a[2]=y*I+x*k,a[3]=x*I-y*k,a},r.scale=bs,r.scale$1=zp,r.scale$2=_r,r.scaleAndAdd=iu,r.setCacheLimits=function(a,i){ao=a,$s=i},r.setColumn=function(a,i,s){a[4*i+0]=s[0],a[4*i+1]=s[1],a[4*i+2]=s[2],a[4*i+3]=s[3]},r.setRTLTextPlugin=function(a,i,s=!1){if(j===b||j===R||j===M)throw new Error("setRTLTextPlugin cannot be called multiple times.");q=Ct.resolveURL(a),j=b,F=i,X(),s||ye()},r.smoothstep=re,r.spec=st,r.storeAuthState=function(a,i){i?Cr.add(a):Cr.delete(a)},r.sub=vr,r.subtract=pd,r.symbolSize=Jm,r.tileAABB=function(a,i,s,u,m,y,x,k,I){if(I.name==="globe")return Ng(a,i,new du(s,u,m));const z=Cs({z:s,x:u,y:m},I);return new Ui([(y+z.x/z.scale)*i,i*(z.y/z.scale),x],[(y+z.x2/z.scale)*i,i*(z.y2/z.scale),k])},r.tileCornersToBounds=xu,r.tileTransform=Cs,r.transformMat3=function(a,i,s){var u=i[0],m=i[1],y=i[2];return a[0]=u*s[0]+m*s[3]+y*s[6],a[1]=u*s[1]+m*s[4]+y*s[7],a[2]=u*s[2]+m*s[5]+y*s[8],a},r.transformMat4=pi,r.transformMat4$1=xs,r.transformQuat=Bp,r.transitionTileAABBinECEF=Zf,r.translate=$l,r.transpose=function(a,i){if(a===i){var s=i[1],u=i[2],m=i[5];a[1]=i[3],a[2]=i[6],a[3]=s,a[5]=i[7],a[6]=u,a[7]=m}else a[0]=i[0],a[1]=i[3],a[2]=i[6],a[3]=i[1],a[4]=i[4],a[5]=i[7],a[6]=i[2],a[7]=i[5],a[8]=i[8];return a},r.triggerPluginCompletionEvent=Y,r.uniqueId=ie,r.updateGlobeVertexNormal=function(a,i,s,u,m){const y=5*i+2;a.float32[y+0]=s,a.float32[y+1]=u,a.float32[y+2]=m},r.validateCustomStyleLayer=function(a){const i=[],s=a.id;return s===void 0&&i.push({message:`layers.${s}: missing required property "id"`}),a.render===void 0&&i.push({message:`layers.${s}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&i.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),i},r.validateFilter=a=>fr(Eo(a)),r.validateFog=a=>fr(Nc(a)),r.validateLayer=a=>fr(ta(a)),r.validateLight=a=>fr($c(a)),r.validateSource=a=>fr(Rc(a)),r.validateStyle=ra,r.validateTerrain=a=>fr(ia(a)),r.values=ne,r.vectorTile=Es,r.version=Te,r.warnOnce=Zt,r.window=v,r.wrap=ae}),d(["./shared"],function(r){function v(Ee){if(typeof Ee=="number"||typeof Ee=="boolean"||typeof Ee=="string"||Ee==null)return JSON.stringify(Ee);if(Array.isArray(Ee)){let oe="[";for(const xe of Ee)oe+=`${v(xe)},`;return`${oe}]`}let ee="{";for(const oe of Object.keys(Ee).sort())ee+=`${oe}:${v(Ee[oe])},`;return`${ee}}`}function E(Ee){let ee="";for(const oe of r.refProperties)ee+=`/${v(Ee[oe])}`;return ee}class w{constructor(ee){this.keyCache={},ee&&this.replace(ee)}replace(ee){this._layerConfigs={},this._layers={},this.update(ee,[])}update(ee,oe){for(const Ae of ee)this._layerConfigs[Ae.id]=Ae,(this._layers[Ae.id]=r.createStyleLayer(Ae)).compileFilter(),this.keyCache[Ae.id]&&delete this.keyCache[Ae.id];for(const Ae of oe)delete this.keyCache[Ae],delete this._layerConfigs[Ae],delete this._layers[Ae];this.familiesBySource={};const xe=function(Ae,Ve){const We={};for(let je=0;je<Ae.length;je++){const Ye=Ve&&Ve[Ae[je].id]||E(Ae[je]);Ve&&(Ve[Ae[je].id]=Ye);let bt=We[Ye];bt||(bt=We[Ye]=[]),bt.push(Ae[je])}const He=[];for(const je in We)He.push(We[je]);return He}(r.values(this._layerConfigs),this.keyCache);for(const Ae of xe){const Ve=Ae.map(zt=>this._layers[zt.id]),We=Ve[0];if(We.visibility==="none")continue;const He=We.source||"";let je=this.familiesBySource[He];je||(je=this.familiesBySource[He]={});const Ye=We.sourceLayer||"_geojsonTileLayer";let bt=je[Ye];bt||(bt=je[Ye]=[]),bt.push(Ve)}}}class T{loadTile(ee,oe){const{uid:xe,encoding:Ae,rawImageData:Ve,padding:We,buildQuadTree:He}=ee,je=r.window.ImageBitmap&&Ve instanceof r.window.ImageBitmap?this.getImageData(Ve,We):Ve;oe(null,new r.DEMData(xe,je,Ae,We<1,He))}getImageData(ee,oe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ee.width,ee.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=ee.width,this.offscreenCanvas.height=ee.height,this.offscreenCanvasContext.drawImage(ee,0,0,ee.width,ee.height);const xe=this.offscreenCanvasContext.getImageData(-oe,-oe,ee.width+2*oe,ee.height+2*oe);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),xe}}var S=function Ee(ee,oe){var xe,Ae=ee&&ee.type;if(Ae==="FeatureCollection")for(xe=0;xe<ee.features.length;xe++)Ee(ee.features[xe],oe);else if(Ae==="GeometryCollection")for(xe=0;xe<ee.geometries.length;xe++)Ee(ee.geometries[xe],oe);else if(Ae==="Feature")Ee(ee.geometry,oe);else if(Ae==="Polygon")N(ee.coordinates,oe);else if(Ae==="MultiPolygon")for(xe=0;xe<ee.coordinates.length;xe++)N(ee.coordinates[xe],oe);return ee};function N(Ee,ee){if(Ee.length!==0){L(Ee[0],ee);for(var oe=1;oe<Ee.length;oe++)L(Ee[oe],!ee)}}function L(Ee,ee){for(var oe=0,xe=0,Ae=0,Ve=Ee.length,We=Ve-1;Ae<Ve;We=Ae++){var He=(Ee[Ae][0]-Ee[We][0])*(Ee[We][1]+Ee[Ae][1]),je=oe+He;xe+=Math.abs(oe)>=Math.abs(He)?oe-je+He:He-je+oe,oe=je}oe+xe>=0!=!!ee&&Ee.reverse()}const P=r.vectorTile.VectorTileFeature.prototype.toGeoJSON;class O{constructor(ee){this._feature=ee,this.extent=r.EXTENT,this.type=ee.type,this.properties=ee.tags,"id"in ee&&!isNaN(ee.id)&&(this.id=parseInt(ee.id,10))}loadGeometry(){if(this._feature.type===1){const ee=[];for(const oe of this._feature.geometry)ee.push([new r.pointGeometry(oe[0],oe[1])]);return ee}{const ee=[];for(const oe of this._feature.geometry){const xe=[];for(const Ae of oe)xe.push(new r.pointGeometry(Ae[0],Ae[1]));ee.push(xe)}return ee}}toGeoJSON(ee,oe,xe){return P.call(this,ee,oe,xe)}}class V{constructor(ee){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=r.EXTENT,this.length=ee.length,this._features=ee}feature(ee){return new O(this._features[ee])}}var D=r.vectorTile.VectorTileFeature,U=W;function W(Ee,ee){this.options=ee||{},this.features=Ee,this.length=Ee.length}function Z(Ee,ee){this.id=typeof Ee.id=="number"?Ee.id:void 0,this.type=Ee.type,this.rawGeometry=Ee.type===1?[Ee.geometry]:Ee.geometry,this.properties=Ee.tags,this.extent=ee||4096}W.prototype.feature=function(Ee){return new Z(this.features[Ee],this.options.extent)},Z.prototype.loadGeometry=function(){var Ee=this.rawGeometry;this.geometry=[];for(var ee=0;ee<Ee.length;ee++){for(var oe=Ee[ee],xe=[],Ae=0;Ae<oe.length;Ae++)xe.push(new r.pointGeometry(oe[Ae][0],oe[Ae][1]));this.geometry.push(xe)}return this.geometry},Z.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ee=this.geometry,ee=1/0,oe=-1/0,xe=1/0,Ae=-1/0,Ve=0;Ve<Ee.length;Ve++)for(var We=Ee[Ve],He=0;He<We.length;He++){var je=We[He];ee=Math.min(ee,je.x),oe=Math.max(oe,je.x),xe=Math.min(xe,je.y),Ae=Math.max(Ae,je.y)}return[ee,xe,oe,Ae]},Z.prototype.toGeoJSON=D.prototype.toGeoJSON;var re=ce,ae=U;function ce(Ee){var ee=new r.pbf;return function(oe,xe){for(var Ae in oe.layers)xe.writeMessage(3,ne,oe.layers[Ae])}(Ee,ee),ee.finish()}function ne(Ee,ee){var oe;ee.writeVarintField(15,Ee.version||1),ee.writeStringField(1,Ee.name||""),ee.writeVarintField(5,Ee.extent||4096);var xe={keys:[],values:[],keycache:{},valuecache:{}};for(oe=0;oe<Ee.length;oe++)xe.feature=Ee.feature(oe),ee.writeMessage(2,le,xe);var Ae=xe.keys;for(oe=0;oe<Ae.length;oe++)ee.writeStringField(3,Ae[oe]);var Ve=xe.values;for(oe=0;oe<Ve.length;oe++)ee.writeMessage(4,ct,Ve[oe])}function le(Ee,ee){var oe=Ee.feature;oe.id!==void 0&&ee.writeVarintField(1,oe.id),ee.writeMessage(2,de,Ee),ee.writeVarintField(3,oe.type),ee.writeMessage(4,Pe,oe)}function de(Ee,ee){var oe=Ee.feature,xe=Ee.keys,Ae=Ee.values,Ve=Ee.keycache,We=Ee.valuecache;for(var He in oe.properties){var je=oe.properties[He],Ye=Ve[He];if(je!==null){Ye===void 0&&(xe.push(He),Ve[He]=Ye=xe.length-1),ee.writeVarint(Ye);var bt=typeof je;bt!=="string"&&bt!=="boolean"&&bt!=="number"&&(je=JSON.stringify(je));var zt=bt+":"+je,St=We[zt];St===void 0&&(Ae.push(je),We[zt]=St=Ae.length-1),ee.writeVarint(St)}}}function ie(Ee,ee){return(ee<<3)+(7&Ee)}function ve(Ee){return Ee<<1^Ee>>31}function Pe(Ee,ee){for(var oe=Ee.loadGeometry(),xe=Ee.type,Ae=0,Ve=0,We=oe.length,He=0;He<We;He++){var je=oe[He],Ye=1;xe===1&&(Ye=je.length),ee.writeVarint(ie(1,Ye));for(var bt=xe===3?je.length-1:je.length,zt=0;zt<bt;zt++){zt===1&&xe!==1&&ee.writeVarint(ie(2,bt-1));var St=je[zt].x-Ae,nn=je[zt].y-Ve;ee.writeVarint(ve(St)),ee.writeVarint(ve(nn)),Ae+=St,Ve+=nn}xe===3&&ee.writeVarint(ie(7,1))}}function ct(Ee,ee){var oe=typeof Ee;oe==="string"?ee.writeStringField(1,Ee):oe==="boolean"?ee.writeBooleanField(7,Ee):oe==="number"&&(Ee%1!=0?ee.writeDoubleField(3,Ee):Ee<0?ee.writeSVarintField(6,Ee):ee.writeVarintField(5,Ee))}function ge(Ee,ee,oe,xe,Ae,Ve){if(Ae-xe<=oe)return;const We=xe+Ae>>1;Me(Ee,ee,We,xe,Ae,Ve%2),ge(Ee,ee,oe,xe,We-1,Ve+1),ge(Ee,ee,oe,We+1,Ae,Ve+1)}function Me(Ee,ee,oe,xe,Ae,Ve){for(;Ae>xe;){if(Ae-xe>600){const Ye=Ae-xe+1,bt=oe-xe+1,zt=Math.log(Ye),St=.5*Math.exp(2*zt/3),nn=.5*Math.sqrt(zt*St*(Ye-St)/Ye)*(bt-Ye/2<0?-1:1);Me(Ee,ee,oe,Math.max(xe,Math.floor(oe-bt*St/Ye+nn)),Math.min(Ae,Math.floor(oe+(Ye-bt)*St/Ye+nn)),Ve)}const We=ee[2*oe+Ve];let He=xe,je=Ae;for(Ue(Ee,ee,xe,oe),ee[2*Ae+Ve]>We&&Ue(Ee,ee,xe,Ae);He<je;){for(Ue(Ee,ee,He,je),He++,je--;ee[2*He+Ve]<We;)He++;for(;ee[2*je+Ve]>We;)je--}ee[2*xe+Ve]===We?Ue(Ee,ee,xe,je):(je++,Ue(Ee,ee,je,Ae)),je<=oe&&(xe=je+1),oe<=je&&(Ae=je-1)}}function Ue(Ee,ee,oe,xe){Ze(Ee,oe,xe),Ze(ee,2*oe,2*xe),Ze(ee,2*oe+1,2*xe+1)}function Ze(Ee,ee,oe){const xe=Ee[ee];Ee[ee]=Ee[oe],Ee[oe]=xe}function xt(Ee,ee,oe,xe){const Ae=Ee-oe,Ve=ee-xe;return Ae*Ae+Ve*Ve}re.fromVectorTileJs=ce,re.fromGeojsonVt=function(Ee,ee){ee=ee||{};var oe={};for(var xe in Ee)oe[xe]=new U(Ee[xe].features,ee),oe[xe].name=xe,oe[xe].version=ee.version,oe[xe].extent=ee.extent;return ce({layers:oe})},re.GeoJSONWrapper=ae;const Ut=Ee=>Ee[0],Zt=Ee=>Ee[1];class en{constructor(ee,oe=Ut,xe=Zt,Ae=64,Ve=Float64Array){this.nodeSize=Ae,this.points=ee;const We=ee.length<65536?Uint16Array:Uint32Array,He=this.ids=new We(ee.length),je=this.coords=new Ve(2*ee.length);for(let Ye=0;Ye<ee.length;Ye++)He[Ye]=Ye,je[2*Ye]=oe(ee[Ye]),je[2*Ye+1]=xe(ee[Ye]);ge(He,je,Ae,0,He.length-1,0)}range(ee,oe,xe,Ae){return function(Ve,We,He,je,Ye,bt,zt){const St=[0,Ve.length-1,0],nn=[];let rn,Xt;for(;St.length;){const sn=St.pop(),yn=St.pop(),Ln=St.pop();if(yn-Ln<=zt){for(let tn=Ln;tn<=yn;tn++)rn=We[2*tn],Xt=We[2*tn+1],rn>=He&&rn<=Ye&&Xt>=je&&Xt<=bt&&nn.push(Ve[tn]);continue}const zn=Math.floor((Ln+yn)/2);rn=We[2*zn],Xt=We[2*zn+1],rn>=He&&rn<=Ye&&Xt>=je&&Xt<=bt&&nn.push(Ve[zn]);const On=(sn+1)%2;(sn===0?He<=rn:je<=Xt)&&(St.push(Ln),St.push(zn-1),St.push(On)),(sn===0?Ye>=rn:bt>=Xt)&&(St.push(zn+1),St.push(yn),St.push(On))}return nn}(this.ids,this.coords,ee,oe,xe,Ae,this.nodeSize)}within(ee,oe,xe){return function(Ae,Ve,We,He,je,Ye){const bt=[0,Ae.length-1,0],zt=[],St=je*je;for(;bt.length;){const nn=bt.pop(),rn=bt.pop(),Xt=bt.pop();if(rn-Xt<=Ye){for(let On=Xt;On<=rn;On++)xt(Ve[2*On],Ve[2*On+1],We,He)<=St&&zt.push(Ae[On]);continue}const sn=Math.floor((Xt+rn)/2),yn=Ve[2*sn],Ln=Ve[2*sn+1];xt(yn,Ln,We,He)<=St&&zt.push(Ae[sn]);const zn=(nn+1)%2;(nn===0?We-je<=yn:He-je<=Ln)&&(bt.push(Xt),bt.push(sn-1),bt.push(zn)),(nn===0?We+je>=yn:He+je>=Ln)&&(bt.push(sn+1),bt.push(rn),bt.push(zn))}return zt}(this.ids,this.coords,ee,oe,xe,this.nodeSize)}}const En={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ee=>Ee},tt=Math.fround||(Mt=new Float32Array(1),Ee=>(Mt[0]=+Ee,Mt[0]));var Mt;class Tt{constructor(ee){this.options=Qe(Object.create(En),ee),this.trees=new Array(this.options.maxZoom+1)}load(ee){const{log:oe,minZoom:xe,maxZoom:Ae,nodeSize:Ve}=this.options;oe&&console.time("total time");const We=`prepare ${ee.length} points`;oe&&console.time(We),this.points=ee;let He=[];for(let je=0;je<ee.length;je++)ee[je].geometry&&He.push(un(ee[je],je));this.trees[Ae+1]=new en(He,gt,qe,Ve,Float32Array),oe&&console.timeEnd(We);for(let je=Ae;je>=xe;je--){const Ye=+Date.now();He=this._cluster(He,je),this.trees[je]=new en(He,gt,qe,Ve,Float32Array),oe&&console.log("z%d: %d clusters in %dms",je,He.length,+Date.now()-Ye)}return oe&&console.timeEnd("total time"),this}getClusters(ee,oe){let xe=((ee[0]+180)%360+360)%360-180;const Ae=Math.max(-90,Math.min(90,ee[1]));let Ve=ee[2]===180?180:((ee[2]+180)%360+360)%360-180;const We=Math.max(-90,Math.min(90,ee[3]));if(ee[2]-ee[0]>=360)xe=-180,Ve=180;else if(xe>Ve){const bt=this.getClusters([xe,Ae,180,We],oe),zt=this.getClusters([-180,Ae,Ve,We],oe);return bt.concat(zt)}const He=this.trees[this._limitZoom(oe)],je=He.range(Yt(xe),Te(We),Yt(Ve),Te(Ae)),Ye=[];for(const bt of je){const zt=He.points[bt];Ye.push(zt.numPoints?ln(zt):this.points[zt.index])}return Ye}getChildren(ee){const oe=this._getOriginId(ee),xe=this._getOriginZoom(ee),Ae="No cluster with the specified id.",Ve=this.trees[xe];if(!Ve)throw new Error(Ae);const We=Ve.points[oe];if(!We)throw new Error(Ae);const He=this.options.radius/(this.options.extent*Math.pow(2,xe-1)),je=Ve.within(We.x,We.y,He),Ye=[];for(const bt of je){const zt=Ve.points[bt];zt.parentId===ee&&Ye.push(zt.numPoints?ln(zt):this.points[zt.index])}if(Ye.length===0)throw new Error(Ae);return Ye}getLeaves(ee,oe,xe){const Ae=[];return this._appendLeaves(Ae,ee,oe=oe||10,xe=xe||0,0),Ae}getTile(ee,oe,xe){const Ae=this.trees[this._limitZoom(ee)],Ve=Math.pow(2,ee),{extent:We,radius:He}=this.options,je=He/We,Ye=(xe-je)/Ve,bt=(xe+1+je)/Ve,zt={features:[]};return this._addTileFeatures(Ae.range((oe-je)/Ve,Ye,(oe+1+je)/Ve,bt),Ae.points,oe,xe,Ve,zt),oe===0&&this._addTileFeatures(Ae.range(1-je/Ve,Ye,1,bt),Ae.points,Ve,xe,Ve,zt),oe===Ve-1&&this._addTileFeatures(Ae.range(0,Ye,je/Ve,bt),Ae.points,-1,xe,Ve,zt),zt.features.length?zt:null}getClusterExpansionZoom(ee){let oe=this._getOriginZoom(ee)-1;for(;oe<=this.options.maxZoom;){const xe=this.getChildren(ee);if(oe++,xe.length!==1)break;ee=xe[0].properties.cluster_id}return oe}_appendLeaves(ee,oe,xe,Ae,Ve){const We=this.getChildren(oe);for(const He of We){const je=He.properties;if(je&&je.cluster?Ve+je.point_count<=Ae?Ve+=je.point_count:Ve=this._appendLeaves(ee,je.cluster_id,xe,Ae,Ve):Ve<Ae?Ve++:ee.push(He),ee.length===xe)break}return Ve}_addTileFeatures(ee,oe,xe,Ae,Ve,We){for(const He of ee){const je=oe[He],Ye=je.numPoints;let bt,zt,St;if(Ye)bt=cn(je),zt=je.x,St=je.y;else{const Xt=this.points[je.index];bt=Xt.properties,zt=Yt(Xt.geometry.coordinates[0]),St=Te(Xt.geometry.coordinates[1])}const nn={type:1,geometry:[[Math.round(this.options.extent*(zt*Ve-xe)),Math.round(this.options.extent*(St*Ve-Ae))]],tags:bt};let rn;Ye?rn=je.id:this.options.generateId?rn=je.index:this.points[je.index].id&&(rn=this.points[je.index].id),rn!==void 0&&(nn.id=rn),We.features.push(nn)}}_limitZoom(ee){return Math.max(this.options.minZoom,Math.min(+ee,this.options.maxZoom+1))}_cluster(ee,oe){const xe=[],{radius:Ae,extent:Ve,reduce:We,minPoints:He}=this.options,je=Ae/(Ve*Math.pow(2,oe));for(let Ye=0;Ye<ee.length;Ye++){const bt=ee[Ye];if(bt.zoom<=oe)continue;bt.zoom=oe;const zt=this.trees[oe+1],St=zt.within(bt.x,bt.y,je),nn=bt.numPoints||1;let rn=nn;for(const Xt of St){const sn=zt.points[Xt];sn.zoom>oe&&(rn+=sn.numPoints||1)}if(rn>nn&&rn>=He){let Xt=bt.x*nn,sn=bt.y*nn,yn=We&&nn>1?this._map(bt,!0):null;const Ln=(Ye<<5)+(oe+1)+this.points.length;for(const zn of St){const On=zt.points[zn];if(On.zoom<=oe)continue;On.zoom=oe;const tn=On.numPoints||1;Xt+=On.x*tn,sn+=On.y*tn,On.parentId=Ln,We&&(yn||(yn=this._map(bt,!0)),We(yn,this._map(On)))}bt.parentId=Ln,xe.push(Bt(Xt/rn,sn/rn,Ln,rn,yn))}else if(xe.push(bt),rn>1)for(const Xt of St){const sn=zt.points[Xt];sn.zoom<=oe||(sn.zoom=oe,xe.push(sn))}}return xe}_getOriginId(ee){return ee-this.points.length>>5}_getOriginZoom(ee){return(ee-this.points.length)%32}_map(ee,oe){if(ee.numPoints)return oe?Qe({},ee.properties):ee.properties;const xe=this.points[ee.index].properties,Ae=this.options.map(xe);return oe&&Ae===xe?Qe({},Ae):Ae}}function Bt(Ee,ee,oe,xe,Ae){return{x:tt(Ee),y:tt(ee),zoom:1/0,id:oe,parentId:-1,numPoints:xe,properties:Ae}}function un(Ee,ee){const[oe,xe]=Ee.geometry.coordinates;return{x:tt(Yt(oe)),y:tt(Te(xe)),zoom:1/0,index:ee,parentId:-1}}function ln(Ee){return{type:"Feature",id:Ee.id,properties:cn(Ee),geometry:{type:"Point",coordinates:[(ee=Ee.x,360*(ee-.5)),Re(Ee.y)]}};var ee}function cn(Ee){const ee=Ee.numPoints,oe=ee>=1e4?`${Math.round(ee/1e3)}k`:ee>=1e3?Math.round(ee/100)/10+"k":ee;return Qe(Qe({},Ee.properties),{cluster:!0,cluster_id:Ee.id,point_count:ee,point_count_abbreviated:oe})}function Yt(Ee){return Ee/360+.5}function Te(Ee){const ee=Math.sin(Ee*Math.PI/180),oe=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return oe<0?0:oe>1?1:oe}function Re(Ee){const ee=(180-360*Ee)*Math.PI/180;return 360*Math.atan(Math.exp(ee))/Math.PI-90}function Qe(Ee,ee){for(const oe in ee)Ee[oe]=ee[oe];return Ee}function gt(Ee){return Ee.x}function qe(Ee){return Ee.y}function Ct(Ee,ee,oe,xe){for(var Ae,Ve=xe,We=oe-ee>>1,He=oe-ee,je=Ee[ee],Ye=Ee[ee+1],bt=Ee[oe],zt=Ee[oe+1],St=ee+3;St<oe;St+=3){var nn=rt(Ee[St],Ee[St+1],je,Ye,bt,zt);if(nn>Ve)Ae=St,Ve=nn;else if(nn===Ve){var rn=Math.abs(St-We);rn<He&&(Ae=St,He=rn)}}Ve>xe&&(Ae-ee>3&&Ct(Ee,ee,Ae,xe),Ee[Ae+2]=Ve,oe-Ae>3&&Ct(Ee,Ae,oe,xe))}function rt(Ee,ee,oe,xe,Ae,Ve){var We=Ae-oe,He=Ve-xe;if(We!==0||He!==0){var je=((Ee-oe)*We+(ee-xe)*He)/(We*We+He*He);je>1?(oe=Ae,xe=Ve):je>0&&(oe+=We*je,xe+=He*je)}return(We=Ee-oe)*We+(He=ee-xe)*He}function Fe(Ee,ee,oe,xe){var Ae={id:Ee===void 0?null:Ee,type:ee,geometry:oe,tags:xe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ve){var We=Ve.geometry,He=Ve.type;if(He==="Point"||He==="MultiPoint"||He==="LineString")vt(Ve,We);else if(He==="Polygon"||He==="MultiLineString")for(var je=0;je<We.length;je++)vt(Ve,We[je]);else if(He==="MultiPolygon")for(je=0;je<We.length;je++)for(var Ye=0;Ye<We[je].length;Ye++)vt(Ve,We[je][Ye])}(Ae),Ae}function vt(Ee,ee){for(var oe=0;oe<ee.length;oe+=3)Ee.minX=Math.min(Ee.minX,ee[oe]),Ee.minY=Math.min(Ee.minY,ee[oe+1]),Ee.maxX=Math.max(Ee.maxX,ee[oe]),Ee.maxY=Math.max(Ee.maxY,ee[oe+1])}function dt(Ee,ee,oe,xe){if(ee.geometry){var Ae=ee.geometry.coordinates,Ve=ee.geometry.type,We=Math.pow(oe.tolerance/((1<<oe.maxZoom)*oe.extent),2),He=[],je=ee.id;if(oe.promoteId?je=ee.properties[oe.promoteId]:oe.generateId&&(je=xe||0),Ve==="Point")yt(Ae,He);else if(Ve==="MultiPoint")for(var Ye=0;Ye<Ae.length;Ye++)yt(Ae[Ye],He);else if(Ve==="LineString")At(Ae,He,We,!1);else if(Ve==="MultiLineString"){if(oe.lineMetrics){for(Ye=0;Ye<Ae.length;Ye++)At(Ae[Ye],He=[],We,!1),Ee.push(Fe(je,"LineString",He,ee.properties));return}Xe(Ae,He,We,!1)}else if(Ve==="Polygon")Xe(Ae,He,We,!0);else{if(Ve!=="MultiPolygon"){if(Ve==="GeometryCollection"){for(Ye=0;Ye<ee.geometry.geometries.length;Ye++)dt(Ee,{id:je,geometry:ee.geometry.geometries[Ye],properties:ee.properties},oe,xe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ye=0;Ye<Ae.length;Ye++){var bt=[];Xe(Ae[Ye],bt,We,!0),He.push(bt)}}Ee.push(Fe(je,Ve,He,ee.properties))}}function yt(Ee,ee){ee.push(lt(Ee[0])),ee.push(at(Ee[1])),ee.push(0)}function At(Ee,ee,oe,xe){for(var Ae,Ve,We=0,He=0;He<Ee.length;He++){var je=lt(Ee[He][0]),Ye=at(Ee[He][1]);ee.push(je),ee.push(Ye),ee.push(0),He>0&&(We+=xe?(Ae*Ye-je*Ve)/2:Math.sqrt(Math.pow(je-Ae,2)+Math.pow(Ye-Ve,2))),Ae=je,Ve=Ye}var bt=ee.length-3;ee[2]=1,Ct(ee,0,bt,oe),ee[bt+2]=1,ee.size=Math.abs(We),ee.start=0,ee.end=ee.size}function Xe(Ee,ee,oe,xe){for(var Ae=0;Ae<Ee.length;Ae++){var Ve=[];At(Ee[Ae],Ve,oe,xe),ee.push(Ve)}}function lt(Ee){return Ee/360+.5}function at(Ee){var ee=Math.sin(Ee*Math.PI/180),oe=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return oe<0?0:oe>1?1:oe}function Ht(Ee,ee,oe,xe,Ae,Ve,We,He){if(xe/=ee,Ve>=(oe/=ee)&&We<xe)return Ee;if(We<oe||Ve>=xe)return null;for(var je=[],Ye=0;Ye<Ee.length;Ye++){var bt=Ee[Ye],zt=bt.geometry,St=bt.type,nn=Ae===0?bt.minX:bt.minY,rn=Ae===0?bt.maxX:bt.maxY;if(nn>=oe&&rn<xe)je.push(bt);else if(!(rn<oe||nn>=xe)){var Xt=[];if(St==="Point"||St==="MultiPoint")Gt(zt,Xt,oe,xe,Ae);else if(St==="LineString")vn(zt,Xt,oe,xe,Ae,!1,He.lineMetrics);else if(St==="MultiLineString")Qn(zt,Xt,oe,xe,Ae,!1);else if(St==="Polygon")Qn(zt,Xt,oe,xe,Ae,!0);else if(St==="MultiPolygon")for(var sn=0;sn<zt.length;sn++){var yn=[];Qn(zt[sn],yn,oe,xe,Ae,!0),yn.length&&Xt.push(yn)}if(Xt.length){if(He.lineMetrics&&St==="LineString"){for(sn=0;sn<Xt.length;sn++)je.push(Fe(bt.id,St,Xt[sn],bt.tags));continue}St!=="LineString"&&St!=="MultiLineString"||(Xt.length===1?(St="LineString",Xt=Xt[0]):St="MultiLineString"),St!=="Point"&&St!=="MultiPoint"||(St=Xt.length===3?"Point":"MultiPoint"),je.push(Fe(bt.id,St,Xt,bt.tags))}}}return je.length?je:null}function Gt(Ee,ee,oe,xe,Ae){for(var Ve=0;Ve<Ee.length;Ve+=3){var We=Ee[Ve+Ae];We>=oe&&We<=xe&&(ee.push(Ee[Ve]),ee.push(Ee[Ve+1]),ee.push(Ee[Ve+2]))}}function vn(Ee,ee,oe,xe,Ae,Ve,We){for(var He,je,Ye=Un(Ee),bt=Ae===0?rr:wr,zt=Ee.start,St=0;St<Ee.length-3;St+=3){var nn=Ee[St],rn=Ee[St+1],Xt=Ee[St+2],sn=Ee[St+3],yn=Ee[St+4],Ln=Ae===0?nn:rn,zn=Ae===0?sn:yn,On=!1;We&&(He=Math.sqrt(Math.pow(nn-sn,2)+Math.pow(rn-yn,2))),Ln<oe?zn>oe&&(je=bt(Ye,nn,rn,sn,yn,oe),We&&(Ye.start=zt+He*je)):Ln>xe?zn<xe&&(je=bt(Ye,nn,rn,sn,yn,xe),We&&(Ye.start=zt+He*je)):Ai(Ye,nn,rn,Xt),zn<oe&&Ln>=oe&&(je=bt(Ye,nn,rn,sn,yn,oe),On=!0),zn>xe&&Ln<=xe&&(je=bt(Ye,nn,rn,sn,yn,xe),On=!0),!Ve&&On&&(We&&(Ye.end=zt+He*je),ee.push(Ye),Ye=Un(Ee)),We&&(zt+=He)}var tn=Ee.length-3;nn=Ee[tn],rn=Ee[tn+1],Xt=Ee[tn+2],(Ln=Ae===0?nn:rn)>=oe&&Ln<=xe&&Ai(Ye,nn,rn,Xt),tn=Ye.length-3,Ve&&tn>=3&&(Ye[tn]!==Ye[0]||Ye[tn+1]!==Ye[1])&&Ai(Ye,Ye[0],Ye[1],Ye[2]),Ye.length&&ee.push(Ye)}function Un(Ee){var ee=[];return ee.size=Ee.size,ee.start=Ee.start,ee.end=Ee.end,ee}function Qn(Ee,ee,oe,xe,Ae,Ve){for(var We=0;We<Ee.length;We++)vn(Ee[We],ee,oe,xe,Ae,Ve,!1)}function Ai(Ee,ee,oe,xe){Ee.push(ee),Ee.push(oe),Ee.push(xe)}function rr(Ee,ee,oe,xe,Ae,Ve){var We=(Ve-ee)/(xe-ee);return Ee.push(Ve),Ee.push(oe+(Ae-oe)*We),Ee.push(1),We}function wr(Ee,ee,oe,xe,Ae,Ve){var We=(Ve-oe)/(Ae-oe);return Ee.push(ee+(xe-ee)*We),Ee.push(Ve),Ee.push(1),We}function li(Ee,ee){for(var oe=[],xe=0;xe<Ee.length;xe++){var Ae,Ve=Ee[xe],We=Ve.type;if(We==="Point"||We==="MultiPoint"||We==="LineString")Ae=bi(Ve.geometry,ee);else if(We==="MultiLineString"||We==="Polygon"){Ae=[];for(var He=0;He<Ve.geometry.length;He++)Ae.push(bi(Ve.geometry[He],ee))}else if(We==="MultiPolygon")for(Ae=[],He=0;He<Ve.geometry.length;He++){for(var je=[],Ye=0;Ye<Ve.geometry[He].length;Ye++)je.push(bi(Ve.geometry[He][Ye],ee));Ae.push(je)}oe.push(Fe(Ve.id,We,Ae,Ve.tags))}return oe}function bi(Ee,ee){var oe=[];oe.size=Ee.size,Ee.start!==void 0&&(oe.start=Ee.start,oe.end=Ee.end);for(var xe=0;xe<Ee.length;xe+=3)oe.push(Ee[xe]+ee,Ee[xe+1],Ee[xe+2]);return oe}function Er(Ee,ee){if(Ee.transformed)return Ee;var oe,xe,Ae,Ve=1<<Ee.z,We=Ee.x,He=Ee.y;for(oe=0;oe<Ee.features.length;oe++){var je=Ee.features[oe],Ye=je.geometry,bt=je.type;if(je.geometry=[],bt===1)for(xe=0;xe<Ye.length;xe+=2)je.geometry.push(ks(Ye[xe],Ye[xe+1],ee,Ve,We,He));else for(xe=0;xe<Ye.length;xe++){var zt=[];for(Ae=0;Ae<Ye[xe].length;Ae+=2)zt.push(ks(Ye[xe][Ae],Ye[xe][Ae+1],ee,Ve,We,He));je.geometry.push(zt)}}return Ee.transformed=!0,Ee}function ks(Ee,ee,oe,xe,Ae,Ve){return[Math.round(oe*(Ee*xe-Ae)),Math.round(oe*(ee*xe-Ve))]}function Rs(Ee,ee,oe,xe,Ae){for(var Ve=ee===Ae.maxZoom?0:Ae.tolerance/((1<<ee)*Ae.extent),We={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:oe,y:xe,z:ee,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},He=0;He<Ee.length;He++){We.numFeatures++,$a(We,Ee[He],Ve,Ae);var je=Ee[He].minX,Ye=Ee[He].minY,bt=Ee[He].maxX,zt=Ee[He].maxY;je<We.minX&&(We.minX=je),Ye<We.minY&&(We.minY=Ye),bt>We.maxX&&(We.maxX=bt),zt>We.maxY&&(We.maxY=zt)}return We}function $a(Ee,ee,oe,xe){var Ae=ee.geometry,Ve=ee.type,We=[];if(Ve==="Point"||Ve==="MultiPoint")for(var He=0;He<Ae.length;He+=3)We.push(Ae[He]),We.push(Ae[He+1]),Ee.numPoints++,Ee.numSimplified++;else if(Ve==="LineString")Cr(We,Ae,Ee,oe,!1,!1);else if(Ve==="MultiLineString"||Ve==="Polygon")for(He=0;He<Ae.length;He++)Cr(We,Ae[He],Ee,oe,Ve==="Polygon",He===0);else if(Ve==="MultiPolygon")for(var je=0;je<Ae.length;je++){var Ye=Ae[je];for(He=0;He<Ye.length;He++)Cr(We,Ye[He],Ee,oe,!0,He===0)}if(We.length){var bt=ee.tags||null;if(Ve==="LineString"&&xe.lineMetrics){for(var zt in bt={},ee.tags)bt[zt]=ee.tags[zt];bt.mapbox_clip_start=Ae.start/Ae.size,bt.mapbox_clip_end=Ae.end/Ae.size}var St={geometry:We,type:Ve==="Polygon"||Ve==="MultiPolygon"?3:Ve==="LineString"||Ve==="MultiLineString"?2:1,tags:bt};ee.id!==null&&(St.id=ee.id),Ee.features.push(St)}}function Cr(Ee,ee,oe,xe,Ae,Ve){var We=xe*xe;if(xe>0&&ee.size<(Ae?We:xe))oe.numPoints+=ee.length/3;else{for(var He=[],je=0;je<ee.length;je+=3)(xe===0||ee[je+2]>We)&&(oe.numSimplified++,He.push(ee[je]),He.push(ee[je+1])),oe.numPoints++;Ae&&function(Ye,bt){for(var zt=0,St=0,nn=Ye.length,rn=nn-2;St<nn;rn=St,St+=2)zt+=(Ye[St]-Ye[rn])*(Ye[St+1]+Ye[rn+1]);if(zt>0===bt)for(St=0,nn=Ye.length;St<nn/2;St+=2){var Xt=Ye[St],sn=Ye[St+1];Ye[St]=Ye[nn-2-St],Ye[St+1]=Ye[nn-1-St],Ye[nn-2-St]=Xt,Ye[nn-1-St]=sn}}(He,Ve),Ee.push(He)}}function ur(Ee,ee){var oe=(ee=this.options=function(Ae,Ve){for(var We in Ve)Ae[We]=Ve[We];return Ae}(Object.create(this.options),ee)).debug;if(oe&&console.time("preprocess data"),ee.maxZoom<0||ee.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ee.promoteId&&ee.generateId)throw new Error("promoteId and generateId cannot be used together.");var xe=function(Ae,Ve){var We=[];if(Ae.type==="FeatureCollection")for(var He=0;He<Ae.features.length;He++)dt(We,Ae.features[He],Ve,He);else dt(We,Ae.type==="Feature"?Ae:{geometry:Ae},Ve);return We}(Ee,ee);this.tiles={},this.tileCoords=[],oe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ee.indexMaxZoom,ee.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(xe=function(Ae,Ve){var We=Ve.buffer/Ve.extent,He=Ae,je=Ht(Ae,1,-1-We,We,0,-1,2,Ve),Ye=Ht(Ae,1,1-We,2+We,0,-1,2,Ve);return(je||Ye)&&(He=Ht(Ae,1,-We,1+We,0,-1,2,Ve)||[],je&&(He=li(je,1).concat(He)),Ye&&(He=He.concat(li(Ye,-1)))),He}(xe,ee)).length&&this.splitTile(xe,0,0,0),oe&&(xe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ao(Ee,ee,oe){return 32*((1<<Ee)*oe+ee)+Ee}function $s(Ee,ee){const oe=Ee.tileID.canonical;if(!this._geoJSONIndex)return ee(null,null);const xe=this._geoJSONIndex.getTile(oe.z,oe.x,oe.y);if(!xe)return ee(null,null);const Ae=new V(xe.features);let Ve=re(Ae);Ve.byteOffset===0&&Ve.byteLength===Ve.buffer.byteLength||(Ve=new Uint8Array(Ve)),ee(null,{vectorTile:Ae,rawData:Ve.buffer})}ur.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ur.prototype.splitTile=function(Ee,ee,oe,xe,Ae,Ve,We){for(var He=[Ee,ee,oe,xe],je=this.options,Ye=je.debug;He.length;){xe=He.pop(),oe=He.pop(),ee=He.pop(),Ee=He.pop();var bt=1<<ee,zt=ao(ee,oe,xe),St=this.tiles[zt];if(!St&&(Ye>1&&console.time("creation"),St=this.tiles[zt]=Rs(Ee,ee,oe,xe,je),this.tileCoords.push({z:ee,x:oe,y:xe}),Ye)){Ye>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ee,oe,xe,St.numFeatures,St.numPoints,St.numSimplified),console.timeEnd("creation"));var nn="z"+ee;this.stats[nn]=(this.stats[nn]||0)+1,this.total++}if(St.source=Ee,Ae){if(ee===je.maxZoom||ee===Ae)continue;var rn=1<<Ae-ee;if(oe!==Math.floor(Ve/rn)||xe!==Math.floor(We/rn))continue}else if(ee===je.indexMaxZoom||St.numPoints<=je.indexMaxPoints)continue;if(St.source=null,Ee.length!==0){Ye>1&&console.time("clipping");var Xt,sn,yn,Ln,zn,On,tn=.5*je.buffer/je.extent,st=.5-tn,zi=.5+tn,ii=1+tn;Xt=sn=yn=Ln=null,zn=Ht(Ee,bt,oe-tn,oe+zi,0,St.minX,St.maxX,je),On=Ht(Ee,bt,oe+st,oe+ii,0,St.minX,St.maxX,je),Ee=null,zn&&(Xt=Ht(zn,bt,xe-tn,xe+zi,1,St.minY,St.maxY,je),sn=Ht(zn,bt,xe+st,xe+ii,1,St.minY,St.maxY,je),zn=null),On&&(yn=Ht(On,bt,xe-tn,xe+zi,1,St.minY,St.maxY,je),Ln=Ht(On,bt,xe+st,xe+ii,1,St.minY,St.maxY,je),On=null),Ye>1&&console.timeEnd("clipping"),He.push(Xt||[],ee+1,2*oe,2*xe),He.push(sn||[],ee+1,2*oe,2*xe+1),He.push(yn||[],ee+1,2*oe+1,2*xe),He.push(Ln||[],ee+1,2*oe+1,2*xe+1)}}},ur.prototype.getTile=function(Ee,ee,oe){var xe=this.options,Ae=xe.extent,Ve=xe.debug;if(Ee<0||Ee>24)return null;var We=1<<Ee,He=ao(Ee,ee=(ee%We+We)%We,oe);if(this.tiles[He])return Er(this.tiles[He],Ae);Ve>1&&console.log("drilling down to z%d-%d-%d",Ee,ee,oe);for(var je,Ye=Ee,bt=ee,zt=oe;!je&&Ye>0;)Ye--,bt=Math.floor(bt/2),zt=Math.floor(zt/2),je=this.tiles[ao(Ye,bt,zt)];return je&&je.source?(Ve>1&&console.log("found parent tile z%d-%d-%d",Ye,bt,zt),Ve>1&&console.time("drilling down"),this.splitTile(je.source,Ye,bt,zt,Ee,ee,oe),Ve>1&&console.timeEnd("drilling down"),this.tiles[He]?Er(this.tiles[He],Ae):null):null};class Mi extends r.VectorTileWorkerSource{constructor(ee,oe,xe,Ae,Ve){super(ee,oe,xe,Ae,$s),Ve&&(this.loadGeoJSON=Ve)}loadData(ee,oe){const xe=ee&&ee.request,Ae=xe&&xe.collectResourceTiming;this.loadGeoJSON(ee,(Ve,We)=>{if(Ve||!We)return oe(Ve);if(typeof We!="object")return oe(new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`));{S(We,!0);try{if(ee.filter){const je=r.createExpression(ee.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(je.result==="error")throw new Error(je.value.map(bt=>`${bt.key}: ${bt.message}`).join(", "));const Ye=We.features.filter(bt=>je.value.evaluate({zoom:0},bt));We={type:"FeatureCollection",features:Ye}}this._geoJSONIndex=ee.cluster?new Tt(function({superclusterOptions:je,clusterProperties:Ye}){if(!Ye||!je)return je;const bt={},zt={},St={accumulated:null,zoom:0},nn={properties:null},rn=Object.keys(Ye);for(const Xt of rn){const[sn,yn]=Ye[Xt],Ln=r.createExpression(yn),zn=r.createExpression(typeof sn=="string"?[sn,["accumulated"],["get",Xt]]:sn);bt[Xt]=Ln.value,zt[Xt]=zn.value}return je.map=Xt=>{nn.properties=Xt;const sn={};for(const yn of rn)sn[yn]=bt[yn].evaluate(St,nn);return sn},je.reduce=(Xt,sn)=>{nn.properties=sn;for(const yn of rn)St.accumulated=Xt[yn],Xt[yn]=zt[yn].evaluate(St,nn)},je}(ee)).load(We.features):function(je,Ye){return new ur(je,Ye)}(We,ee.geojsonVtOptions)}catch(je){return oe(je)}this.loaded={};const He={};if(Ae){const je=r.getPerformanceMeasurement(xe);je&&(He.resourceTiming={},He.resourceTiming[ee.source]=JSON.parse(JSON.stringify(je)))}oe(null,He)}})}reloadTile(ee,oe){const xe=this.loaded;return xe&&xe[ee.uid]?super.reloadTile(ee,oe):this.loadTile(ee,oe)}loadGeoJSON(ee,oe){if(ee.request)r.getJSON(ee.request,oe);else{if(typeof ee.data!="string")return oe(new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`));try{return oe(null,JSON.parse(ee.data))}catch{return oe(new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(ee,oe){try{oe(null,this._geoJSONIndex.getClusterExpansionZoom(ee.clusterId))}catch(xe){oe(xe)}}getClusterChildren(ee,oe){try{oe(null,this._geoJSONIndex.getChildren(ee.clusterId))}catch(xe){oe(xe)}}getClusterLeaves(ee,oe){try{oe(null,this._geoJSONIndex.getLeaves(ee.clusterId,ee.limit,ee.offset))}catch(xe){oe(xe)}}}class Bo{constructor(ee){this.self=ee,this.actor=new r.Actor(ee,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=r.getProjection({name:"mercator"}),this.workerSourceTypes={vector:r.VectorTileWorkerSource,geojson:Mi},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(oe,xe)=>{if(this.workerSourceTypes[oe])throw new Error(`Worker source with name "${oe}" already registered.`);this.workerSourceTypes[oe]=xe},this.self.registerRTLTextPlugin=oe=>{if(r.plugin.isParsed())throw new Error("RTL text plugin already registered.");r.plugin.applyArabicShaping=oe.applyArabicShaping,r.plugin.processBidirectionalText=oe.processBidirectionalText,r.plugin.processStyledBidirectionalText=oe.processStyledBidirectionalText}}clearCaches(ee,oe,xe){delete this.layerIndexes[ee],delete this.availableImages[ee],delete this.workerSources[ee],delete this.demWorkerSources[ee],xe()}checkIfReady(ee,oe,xe){xe()}setReferrer(ee,oe){this.referrer=oe}spriteLoaded(ee,oe){this.isSpriteLoaded[ee]=oe;for(const xe in this.workerSources[ee]){const Ae=this.workerSources[ee][xe];for(const Ve in Ae)Ae[Ve]instanceof r.VectorTileWorkerSource&&(Ae[Ve].isSpriteLoaded=oe,Ae[Ve].fire(new r.Event("isSpriteLoaded")))}}setImages(ee,oe,xe){this.availableImages[ee]=oe;for(const Ae in this.workerSources[ee]){const Ve=this.workerSources[ee][Ae];for(const We in Ve)Ve[We].availableImages=oe}xe()}enableTerrain(ee,oe,xe){this.terrain=oe,xe()}setProjection(ee,oe){this.projections[ee]=r.getProjection(oe)}setLayers(ee,oe,xe){this.getLayerIndex(ee).replace(oe),xe()}updateLayers(ee,oe,xe){this.getLayerIndex(ee).update(oe.layers,oe.removedIds),xe()}loadTile(ee,oe,xe){const Ae=this.enableTerrain?r.extend({enableTerrain:this.terrain},oe):oe;Ae.projection=this.projections[ee]||this.defaultProjection,this.getWorkerSource(ee,oe.type,oe.source).loadTile(Ae,xe)}loadDEMTile(ee,oe,xe){const Ae=this.enableTerrain?r.extend({buildQuadTree:this.terrain},oe):oe;this.getDEMWorkerSource(ee,oe.source).loadTile(Ae,xe)}reloadTile(ee,oe,xe){const Ae=this.enableTerrain?r.extend({enableTerrain:this.terrain},oe):oe;Ae.projection=this.projections[ee]||this.defaultProjection,this.getWorkerSource(ee,oe.type,oe.source).reloadTile(Ae,xe)}abortTile(ee,oe,xe){this.getWorkerSource(ee,oe.type,oe.source).abortTile(oe,xe)}removeTile(ee,oe,xe){this.getWorkerSource(ee,oe.type,oe.source).removeTile(oe,xe)}removeSource(ee,oe,xe){if(!this.workerSources[ee]||!this.workerSources[ee][oe.type]||!this.workerSources[ee][oe.type][oe.source])return;const Ae=this.workerSources[ee][oe.type][oe.source];delete this.workerSources[ee][oe.type][oe.source],Ae.removeSource!==void 0?Ae.removeSource(oe,xe):xe()}loadWorkerSource(ee,oe,xe){try{this.self.importScripts(oe.url),xe()}catch(Ae){xe(Ae.toString())}}syncRTLPluginState(ee,oe,xe){try{r.plugin.setState(oe);const Ae=r.plugin.getPluginURL();if(r.plugin.isLoaded()&&!r.plugin.isParsed()&&Ae!=null){this.self.importScripts(Ae);const Ve=r.plugin.isParsed();xe(Ve?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ae}`),Ve)}}catch(Ae){xe(Ae.toString())}}getAvailableImages(ee){let oe=this.availableImages[ee];return oe||(oe=[]),oe}getLayerIndex(ee){let oe=this.layerIndexes[ee];return oe||(oe=this.layerIndexes[ee]=new w),oe}getWorkerSource(ee,oe,xe){return this.workerSources[ee]||(this.workerSources[ee]={}),this.workerSources[ee][oe]||(this.workerSources[ee][oe]={}),this.workerSources[ee][oe][xe]||(this.workerSources[ee][oe][xe]=new this.workerSourceTypes[oe]({send:(Ae,Ve,We,He,je,Ye)=>{this.actor.send(Ae,Ve,We,ee,je,Ye)},scheduler:this.actor.scheduler},this.getLayerIndex(ee),this.getAvailableImages(ee),this.isSpriteLoaded[ee])),this.workerSources[ee][oe][xe]}getDEMWorkerSource(ee,oe){return this.demWorkerSources[ee]||(this.demWorkerSources[ee]={}),this.demWorkerSources[ee][oe]||(this.demWorkerSources[ee][oe]=new T),this.demWorkerSources[ee][oe]}enforceCacheSizeLimit(ee,oe){r.enforceCacheSizeLimit(oe)}getWorkerPerformanceMetrics(ee,oe,xe){xe(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Bo(self)),Bo}),d(["./shared"],function(r){function v(_,l){if(Array.isArray(_)){if(!Array.isArray(l)||_.length!==l.length)return!1;for(let f=0;f<_.length;f++)if(!v(_[f],l[f]))return!1;return!0}if(typeof _=="object"&&_!==null&&l!==null){if(typeof l!="object"||Object.keys(_).length!==Object.keys(l).length)return!1;for(const f in _)if(!v(_[f],l[f]))return!1;return!0}return _===l}var E=w;function w(_){return!function(l){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var b,R,M=new Blob([""],{type:"text/javascript"}),F=URL.createObjectURL(M);try{R=new Worker(F),b=!0}catch{b=!1}return R&&R.terminate(),URL.revokeObjectURL(F),b}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var b=document.createElement("canvas");b.width=b.height=1;var R=b.getContext("2d");if(!R)return!1;var M=R.getImageData(0,0,1,1);return M&&M.width===b.width}()?(T[f=l&&l.failIfMajorPerformanceCaveat]===void 0&&(T[f]=function(b){var R,M=function(F){var j=document.createElement("canvas"),q=Object.create(w.webGLContextAttributes);return q.failIfMajorPerformanceCaveat=F,j.getContext("webgl",q)||j.getContext("experimental-webgl",q)}(b);if(!M)return!1;try{R=M.createShader(M.VERTEX_SHADER)}catch{return!1}return!(!R||M.isContextLost())&&(M.shaderSource(R,"void main() {}"),M.compileShader(R),M.getShaderParameter(R,M.COMPILE_STATUS)===!0)}(f)),T[f]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var f}(_)}var T={};function S(_,l,f){const b=r.window.document.createElement(_);return l!==void 0&&(b.className=l),f&&f.appendChild(b),b}function N(_,l,f){const b=r.window.document.createElementNS("http://www.w3.org/2000/svg",_);for(const R of Object.keys(l))b.setAttributeNS(null,R,l[R]);return f&&f.appendChild(b),b}w.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const L=r.window.document&&r.window.document.documentElement.style,P=L&&L.userSelect!==void 0?"userSelect":"WebkitUserSelect";let O;function V(){L&&P&&(O=L[P],L[P]="none")}function D(){L&&P&&(L[P]=O)}function U(_){_.preventDefault(),_.stopPropagation(),r.window.removeEventListener("click",U,!0)}function W(){r.window.addEventListener("click",U,!0),r.window.setTimeout(()=>{r.window.removeEventListener("click",U,!0)},0)}function Z(_,l){const f=_.getBoundingClientRect();return ce(_,f,l)}function re(_,l){const f=_.getBoundingClientRect(),b=[];for(let R=0;R<l.length;R++)b.push(ce(_,f,l[R]));return b}function ae(_){return r.window.InstallTrigger!==void 0&&_.button===2&&_.ctrlKey&&r.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:_.button}function ce(_,l,f){const b=_.offsetWidth===l.width?1:_.offsetWidth/l.width;return new r.pointGeometry((f.clientX-l.left)*b,(f.clientY-l.top)*b)}function ne(_,l){var f=l[0],b=l[1],R=l[2],M=l[3],F=f*M-R*b;return F?(_[0]=M*(F=1/F),_[1]=-b*F,_[2]=-R*F,_[3]=f*F,_):null}function le(_){const{userImage:l}=_;return!!(l&&l.render&&l.render())&&(_.data.replace(new Uint8Array(l.data.buffer)),!0)}class de extends r.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new r.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:f,callback:b}of this.requestors)this._notify(f,b);this.requestors=[]}}hasImage(l){return!!this.getImage(l)}getImage(l){return this.images[l]}addImage(l,f){this._validate(l,f)&&(this.images[l]=f)}_validate(l,f){let b=!0;return this._validateStretch(f.stretchX,f.data&&f.data.width)||(this.fire(new r.ErrorEvent(new Error(`Image "${l}" has invalid "stretchX" value`))),b=!1),this._validateStretch(f.stretchY,f.data&&f.data.height)||(this.fire(new r.ErrorEvent(new Error(`Image "${l}" has invalid "stretchY" value`))),b=!1),this._validateContent(f.content,f)||(this.fire(new r.ErrorEvent(new Error(`Image "${l}" has invalid "content" value`))),b=!1),b}_validateStretch(l,f){if(!l)return!0;let b=0;for(const R of l){if(R[0]<b||R[1]<R[0]||f<R[1])return!1;b=R[1]}return!0}_validateContent(l,f){return!(l&&(l.length!==4||l[0]<0||f.data.width<l[0]||l[1]<0||f.data.height<l[1]||l[2]<0||f.data.width<l[2]||l[3]<0||f.data.height<l[3]||l[2]<l[0]||l[3]<l[1]))}updateImage(l,f){f.version=this.images[l].version+1,this.images[l]=f,this.updatedImages[l]=!0}removeImage(l){const f=this.images[l];delete this.images[l],delete this.patterns[l],f.userImage&&f.userImage.onRemove&&f.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l,f){let b=!0;if(!this.isLoaded())for(const R of l)this.images[R]||(b=!1);this.isLoaded()||b?this._notify(l,f):this.requestors.push({ids:l,callback:f})}_notify(l,f){const b={};for(const R of l){this.images[R]||this.fire(new r.Event("styleimagemissing",{id:R}));const M=this.images[R];M?b[R]={data:M.data.clone(),pixelRatio:M.pixelRatio,sdf:M.sdf,version:M.version,stretchX:M.stretchX,stretchY:M.stretchY,content:M.content,hasRenderCallback:Boolean(M.userImage&&M.userImage.render)}:r.warnOnce(`Image "${R}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}f(null,b)}getPixelSize(){const{width:l,height:f}=this.atlasImage;return{width:l,height:f}}getPattern(l){const f=this.patterns[l],b=this.getImage(l);if(!b)return null;if(f&&f.position.version===b.version)return f.position;if(f)f.position.version=b.version;else{const R={w:b.data.width+2,h:b.data.height+2,x:0,y:0},M=new r.ImagePosition(R,b);this.patterns[l]={bin:R,position:M}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const f=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new r.Texture(l,this.atlasImage,f.RGBA),this.atlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const M in this.patterns)l.push(this.patterns[M].bin);const{w:f,h:b}=r.potpack(l),R=this.atlasImage;R.resize({width:f||1,height:b||1});for(const M in this.patterns){const{bin:F}=this.patterns[M],j=F.x+1,q=F.y+1,Y=this.images[M].data,X=Y.width,te=Y.height;r.RGBAImage.copy(Y,R,{x:0,y:0},{x:j,y:q},{width:X,height:te}),r.RGBAImage.copy(Y,R,{x:0,y:te-1},{x:j,y:q-1},{width:X,height:1}),r.RGBAImage.copy(Y,R,{x:0,y:0},{x:j,y:q+te},{width:X,height:1}),r.RGBAImage.copy(Y,R,{x:X-1,y:0},{x:j-1,y:q},{width:1,height:te}),r.RGBAImage.copy(Y,R,{x:0,y:0},{x:j+X,y:q},{width:1,height:te})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const f of l){if(this.callbackDispatchedThisFrame[f])continue;this.callbackDispatchedThisFrame[f]=!0;const b=this.images[f];le(b)&&this.updateImage(f,b)}}}const ie=new r.Properties({anchor:new r.DataConstantProperty(r.spec.light.anchor),position:new class{constructor(){this.specification=r.spec.light.position}possiblyEvaluate(_,l){return function([f,b,R]){const M=r.degToRad(b+90),F=r.degToRad(R);return{x:f*Math.cos(M)*Math.sin(F),y:f*Math.sin(M)*Math.sin(F),z:f*Math.cos(F),azimuthal:b,polar:R}}(_.expression.evaluate(l))}interpolate(_,l,f){return{x:r.number(_.x,l.x,f),y:r.number(_.y,l.y,f),z:r.number(_.z,l.z,f),azimuthal:r.number(_.azimuthal,l.azimuthal,f),polar:r.number(_.polar,l.polar,f)}}},color:new r.DataConstantProperty(r.spec.light.color),intensity:new r.DataConstantProperty(r.spec.light.intensity)}),ve="-transition";class Pe extends r.Evented{constructor(l){super(),this._transitionable=new r.Transitionable(ie),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,f={}){if(!this._validate(r.validateLight,l,f))for(const b in l){const R=l[b];r.endsWith(b,ve)?this._transitionable.setTransition(b.slice(0,-ve.length),R):this._transitionable.setValue(b,R)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,f,b){return(!b||b.validate!==!1)&&r.emitValidationErrors(this,l.call(r.validateStyle,r.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:r.spec})))}}const ct=new r.Properties({source:new r.DataConstantProperty(r.spec.terrain.source),exaggeration:new r.DataConstantProperty(r.spec.terrain.exaggeration)}),ge="-transition";class Me extends r.Evented{constructor(l,f){super(),this._transitionable=new r.Transitionable(ct),this.set(l),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=f}get(){return this._transitionable.serialize()}set(l){for(const f in l){const b=l[f];r.endsWith(f,ge)?this._transitionable.setTransition(f.slice(0,-ge.length),b):this._transitionable.setValue(f,b)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}}function Ue(_,l,f,b){const R=r.smoothstep(45,65,f),[M,F]=Ze(_,b),j=r.length(l);let q=1-Math.min(1,Math.exp((j-M)/(F-M)*-6));return q*=q*q,q=Math.min(1,1.00747*q),q*R*_.alpha}function Ze(_,l){const f=.5/Math.tan(.5*l);return[_.range[0]+f,_.range[1]+f]}const xt=new r.Properties({range:new r.DataConstantProperty(r.spec.fog.range),color:new r.DataConstantProperty(r.spec.fog.color),"high-color":new r.DataConstantProperty(r.spec.fog["high-color"]),"space-color":new r.DataConstantProperty(r.spec.fog["space-color"]),"horizon-blend":new r.DataConstantProperty(r.spec.fog["horizon-blend"]),"star-intensity":new r.DataConstantProperty(r.spec.fog["star-intensity"])}),Ut="-transition";class Zt extends r.Evented{constructor(l,f){super(),this._transitionable=new r.Transitionable(xt),this.set(l),this._transitioning=this._transitionable.untransitioned(),this._transform=f}get state(){const l=this._transform,f=l.projection.name==="globe",b=r.globeToMercatorTransition(l.zoom),R=this.properties.get("range"),M=[.5,3];return{range:f?[r.number(M[0],R[0],b),r.number(M[1],R[1],b)]:R,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(l,f={}){if(!this._validate(r.validateFog,l,f)){for(const b of Object.keys(r.spec.fog))l&&l[b]===void 0&&(l[b]=r.spec.fog[b].default);for(const b in l){const R=l[b];r.endsWith(b,Ut)?this._transitionable.setTransition(b.slice(0,-Ut.length),R):this._transitionable.setValue(b,R)}}}getOpacity(l){if(!this._transform.projection.supportsFog)return 0;const f=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:r.smoothstep(45,65,l))*f.a}getOpacityAtLatLng(l,f){return this._transform.projection.supportsFog?function(b,R,M){const F=r.MercatorCoordinate.fromLngLat(R),j=M.elevation?M.elevation.getAtPointOrZero(F):0,q=[F.x,F.y,j];return r.transformMat4(q,q,M.mercatorFogMatrix),Ue(b,q,M.pitch,M._fov)}(this.state,l,f):0}getFovAdjustedRange(l){return this._transform.projection.supportsFog?Ze(this.state,l):[0,1]}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,f,b){return(!b||b.validate!==!1)&&r.emitValidationErrors(this,l.call(r.validateStyle,r.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:r.spec})))}}class en{constructor(l,f){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=r.uniqueId();const b=this.workerPool.acquire(this.id);for(let R=0;R<b.length;R++){const M=new en.Actor(b[R],f,this.id);M.name=`Worker ${R}`,this.actors.push(M)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(l,f,b){r.asyncAll(this.actors,(R,M)=>{R.send(l,f,M)},b=b||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(l=>{l.remove()}),this.actors=[],this.workerPool.release(this.id)}}function En(_,l,f){return l*(r.EXTENT/(_.tileSize*Math.pow(2,f-_.tileID.overscaledZ)))}en.Actor=r.Actor;class tt{constructor(l,f,b,R){this.screenBounds=l,this.cameraPoint=f,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=b,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,R)}static createFromScreenPoints(l,f){let b,R;if(l instanceof r.pointGeometry||typeof l[0]=="number"){const M=r.pointGeometry.convert(l);b=[r.pointGeometry.convert(l)],R=f.isPointAboveHorizon(M)}else{const M=r.pointGeometry.convert(l[0]),F=r.pointGeometry.convert(l[1]);b=[M,F],R=r.polygonizeBounds(M,F).every(j=>f.isPointAboveHorizon(j))}return new tt(b,f.getCameraPoint(),R,f)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(l){return r.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],l)}bufferedCameraGeometry(l){const f=this.screenBounds[0],b=this.screenBounds.length===1?this.screenBounds[0].add(new r.pointGeometry(1,1)):this.screenBounds[1],R=r.polygonizeBounds(f,b,0,!1);return this.cameraPoint.y>b.y&&(this.cameraPoint.x>f.x&&this.cameraPoint.x<b.x?R.splice(3,0,this.cameraPoint):this.cameraPoint.x>=b.x?R[2]=this.cameraPoint:this.cameraPoint.x<=f.x&&(R[3]=this.cameraPoint)),r.bufferConvexPolygon(R,l)}bufferedCameraGeometryGlobe(l){const f=this.screenBounds[0],b=this.screenBounds.length===1?this.screenBounds[0].add(new r.pointGeometry(1,1)):this.screenBounds[1],R=r.polygonizeBounds(f,b,l),M=this.cameraPoint.clone();switch(3*((M.y>f.y)+(M.y>b.y))+((M.x>f.x)+(M.x>b.x))){case 0:R[0]=M,R[4]=M.clone();break;case 1:R.splice(1,0,M);break;case 2:R[1]=M;break;case 3:R.splice(4,0,M);break;case 5:R.splice(2,0,M);break;case 6:R[3]=M;break;case 7:R.splice(3,0,M);break;case 8:R[2]=M}return R}containsTile(l,f,b,R=0){const M=l.queryPadding/f._pixelsPerMercatorPixel+1,F=b?this._bufferedCameraMercator(M,f):this._bufferedScreenMercator(M,f);let j=l.tileID.wrap+(F.unwrapped?R:0);const q=F.polygon.map(_e=>r.getTilePoint(l.tileTransform,_e,j));if(!r.polygonIntersectsBox(q,0,0,r.EXTENT,r.EXTENT))return;j=l.tileID.wrap+(this.screenGeometryMercator.unwrapped?R:0);const Y=this.screenGeometryMercator.polygon.map(_e=>r.getTileVec3(l.tileTransform,_e,j)),X=Y.map(_e=>new r.pointGeometry(_e[0],_e[1])),te=f.getFreeCameraOptions().position||new r.MercatorCoordinate(0,0,0),ue=r.getTileVec3(l.tileTransform,te,j),ye=Y.map(_e=>{const fe=r.sub(_e,_e,ue);return r.normalize(fe,fe),new r.Ray(ue,fe)}),he=En(l,1,f.zoom)*f._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:X,tilespaceRays:ye,bufferedTilespaceGeometry:q,bufferedTilespaceBounds:(me=r.getBounds(q),me.min.x=r.clamp(me.min.x,0,r.EXTENT),me.min.y=r.clamp(me.min.y,0,r.EXTENT),me.max.x=r.clamp(me.max.x,0,r.EXTENT),me.max.y=r.clamp(me.max.y,0,r.EXTENT),me),tile:l,tileID:l.tileID,pixelToTileUnitsFactor:he};var me}_bufferedScreenMercator(l,f){const b=Bt(l);if(this._screenRaycastCache[b])return this._screenRaycastCache[b];{let R;return R=f.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(l),f):{polygon:this.bufferedScreenGeometry(l).map(M=>f.pointCoordinate3D(M)),unwrapped:!0},this._screenRaycastCache[b]=R,R}}_bufferedCameraMercator(l,f){const b=Bt(l);if(this._cameraRaycastCache[b])return this._cameraRaycastCache[b];{let R;return R=f.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(l),f):{polygon:this.bufferedCameraGeometry(l).map(M=>f.pointCoordinate3D(M)),unwrapped:!0},this._cameraRaycastCache[b]=R,R}}_projectAndResample(l,f){const b=function(M,F){const j=r.multiply([],F.pixelMatrix,F.globeMatrix),q=[0,-r.GLOBE_RADIUS,0,1],Y=[0,r.GLOBE_RADIUS,0,1],X=[0,0,0,1];r.transformMat4$1(q,q,j),r.transformMat4$1(Y,Y,j),r.transformMat4$1(X,X,j);const te=new r.pointGeometry(q[0]/q[3],q[1]/q[3]),ue=new r.pointGeometry(Y[0]/Y[3],Y[1]/Y[3]),ye=r.polygonContainsPoint(M,te)&&q[3]<X[3],he=r.polygonContainsPoint(M,ue)&&Y[3]<X[3];if(!ye&&!he)return null;const me=function(De,Le,Ge){for(let Je=1;Je<De.length;Je++){const kt=Tt(Le.pointCoordinate3D(De[Je-1]).x),Ke=Tt(Le.pointCoordinate3D(De[Je]).x);if(Ge<0){if(kt<Ke)return{idx:Je,t:-kt/(Ke-1-kt)}}else if(Ke<kt)return{idx:Je,t:(1-kt)/(Ke+1-kt)}}return null}(M,F,ye?-1:1);if(!me)return null;const{idx:_e,t:fe}=me;let Ce=_e>1?Mt(M.slice(0,_e),F):[],be=_e<M.length?Mt(M.slice(_e),F):[];Ce=Ce.map(De=>new r.pointGeometry(Tt(De.x),De.y)),be=be.map(De=>new r.pointGeometry(Tt(De.x),De.y));const Be=[...Ce];Be.length===0&&Be.push(be[be.length-1]);const Oe=r.number(Be[Be.length-1].y,(be.length===0?Ce[0]:be[0]).y,fe);let $e;return $e=ye?[new r.pointGeometry(0,Oe),new r.pointGeometry(0,0),new r.pointGeometry(1,0),new r.pointGeometry(1,Oe)]:[new r.pointGeometry(1,Oe),new r.pointGeometry(1,1),new r.pointGeometry(0,1),new r.pointGeometry(0,Oe)],Be.push(...$e),be.length===0?Be.push(Ce[0]):Be.push(...be),{polygon:Be.map(De=>new r.MercatorCoordinate(De.x,De.y)),unwrapped:!1}}(l,f);if(b)return b;const R=function(M,F){let j=!1,q=-1/0,Y=0;for(let te=0;te<M.length-1;te++)M[te].x>q&&(q=M[te].x,Y=te);for(let te=0;te<M.length-1;te++){const ue=(Y+te)%(M.length-1),ye=M[ue],he=M[ue+1];Math.abs(ye.x-he.x)>.5&&(ye.x<he.x?(ye.x+=1,ue===0&&(M[M.length-1].x+=1)):(he.x+=1,ue+1===M.length-1&&(M[0].x+=1)),j=!0)}const X=r.mercatorXfromLng(F.center.lng);return j&&X<Math.abs(X-1)&&M.forEach(te=>{te.x-=1}),{polygon:M,unwrapped:j}}(Mt(l,f).map(M=>new r.pointGeometry(Tt(M.x),M.y)),f);return{polygon:R.polygon.map(M=>new r.MercatorCoordinate(M.x,M.y)),unwrapped:R.unwrapped}}}function Mt(_,l){return r.resample(_,f=>{const b=l.pointCoordinate3D(f);f.x=b.x,f.y=b.y},1/256)}function Tt(_){return _<0?1+_%1:_%1}function Bt(_){return 100*_|0}function un(_,l,f,b,R){const M=function(F,j){if(F)return R(F);if(j){const q=r.pick(r.extend(j,_),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);j.vector_layers&&(q.vectorLayers=j.vector_layers,q.vectorLayerIds=q.vectorLayers.map(Y=>Y.id)),j.language_options&&(q.languageOptions=j.language_options),j.language&&j.language[j.id]&&(q.language=j.language[j.id]),j.worldview_options&&(q.worldviewOptions=j.worldview_options),j.worldview?q.worldview=j.worldview[j.id]:j.worldview_default&&(q.worldview=j.worldview_default),q.tiles=l.canonicalizeTileset(q,_.url),R(null,q)}};return _.url?r.getJSON(l.transformRequest(l.normalizeSourceURL(_.url,null,f,b),r.ResourceType.Source),M):r.exported.frame(()=>M(null,_))}class ln{constructor(l,f,b){this.bounds=r.LngLatBounds.convert(this.validateBounds(l)),this.minzoom=f||0,this.maxzoom=b||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const f=Math.pow(2,l.z),b=Math.floor(r.mercatorXfromLng(this.bounds.getWest())*f),R=Math.floor(r.mercatorYfromLat(this.bounds.getNorth())*f),M=Math.ceil(r.mercatorXfromLng(this.bounds.getEast())*f),F=Math.ceil(r.mercatorYfromLat(this.bounds.getSouth())*f);return l.x>=b&&l.x<M&&l.y>=R&&l.y<F}}class cn{constructor(l,f,b){this.context=l;const R=l.gl;this.buffer=R.createBuffer(),this.dynamicDraw=Boolean(b),this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),R.bufferData(R.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?R.DYNAMIC_DRAW:R.STATIC_DRAW),this.dynamicDraw||f.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const f=this.context.gl;this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Yt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Te{constructor(l,f,b,R){this.length=f.length,this.attributes=b,this.itemSize=f.bytesPerElement,this.dynamicDraw=R,this.context=l;const M=l.gl;this.buffer=M.createBuffer(),l.bindVertexBuffer.set(this.buffer),M.bufferData(M.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?M.DYNAMIC_DRAW:M.STATIC_DRAW),this.dynamicDraw||f.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){const f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,f){for(let b=0;b<this.attributes.length;b++){const R=f.attributes[this.attributes[b].name];R!==void 0&&l.enableVertexAttribArray(R)}}setVertexAttribPointers(l,f,b){for(let R=0;R<this.attributes.length;R++){const M=this.attributes[R],F=f.attributes[M.name];F!==void 0&&l.vertexAttribPointer(F,M.components,l[Yt[M.type]],!1,this.itemSize,M.offset+this.itemSize*(b||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Re{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Qe extends Re{getDefault(){return r.Color.transparent}set(l){const f=this.current;(l.r!==f.r||l.g!==f.g||l.b!==f.b||l.a!==f.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class gt extends Re{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class qe extends Re{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class Ct extends Re{getDefault(){return[!0,!0,!0,!0]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||l[2]!==f[2]||l[3]!==f[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class rt extends Re{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class Fe extends Re{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class vt extends Re{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const f=this.current;(l.func!==f.func||l.ref!==f.ref||l.mask!==f.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class dt extends Re{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||l[2]!==f[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class yt extends Re{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this.current=l,this.dirty=!1}}class At extends Re{getDefault(){return[0,1]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class Xe extends Re{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this.current=l,this.dirty=!1}}class lt extends Re{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class at extends Re{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.BLEND):f.disable(f.BLEND),this.current=l,this.dirty=!1}}class Ht extends Re{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class Gt extends Re{getDefault(){return r.Color.transparent}set(l){const f=this.current;(l.r!==f.r||l.g!==f.g||l.b!==f.b||l.a!==f.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class vn extends Re{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class Un extends Re{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this.current=l,this.dirty=!1}}class Qn extends Re{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class Ai extends Re{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class rr extends Re{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class wr extends Re{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class li extends Re{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||l[2]!==f[2]||l[3]!==f[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class bi extends Re{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class Er extends Re{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindRenderbuffer(f.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class ks extends Re{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindTexture(f.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class Rs extends Re{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class $a extends Re{getDefault(){return null}set(l){const f=this.gl;f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Cr extends Re{constructor(l){super(l),this.vao=l.extVertexArrayObject}getDefault(){return null}set(l){this.vao&&(l!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(l),this.current=l,this.dirty=!1)}}class ur extends Re{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class ao extends Re{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class $s extends Re{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class Mi extends Re{constructor(l,f){super(l),this.context=l,this.parent=f}getDefault(){return null}}class Bo extends Mi{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class Ee extends Mi{attachment(){return this.gl.DEPTH_ATTACHMENT}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,this.attachment(),f.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class ee extends Ee{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class oe{constructor(l,f,b,R){this.context=l,this.width=f,this.height=b;const M=this.framebuffer=l.gl.createFramebuffer();this.colorAttachment=new Bo(l,M),R&&(this.depthAttachment=new Ee(l,M))}destroy(){const l=this.context.gl,f=this.colorAttachment.get();if(f&&l.deleteTexture(f),this.depthAttachment){const b=this.depthAttachment.get();b&&l.deleteRenderbuffer(b)}l.deleteFramebuffer(this.framebuffer)}}class xe{constructor(l){this.gl=l,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Qe(this),this.clearDepth=new gt(this),this.clearStencil=new qe(this),this.colorMask=new Ct(this),this.depthMask=new rt(this),this.stencilMask=new Fe(this),this.stencilFunc=new vt(this),this.stencilOp=new dt(this),this.stencilTest=new yt(this),this.depthRange=new At(this),this.depthTest=new Xe(this),this.depthFunc=new lt(this),this.blend=new at(this),this.blendFunc=new Ht(this),this.blendColor=new Gt(this),this.blendEquation=new vn(this),this.cullFace=new Un(this),this.cullFaceSide=new Qn(this),this.frontFace=new Ai(this),this.program=new rr(this),this.activeTexture=new wr(this),this.viewport=new li(this),this.bindFramebuffer=new bi(this),this.bindRenderbuffer=new Er(this),this.bindTexture=new ks(this),this.bindVertexBuffer=new Rs(this),this.bindElementBuffer=new $a(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Cr(this),this.pixelStoreUnpack=new ur(this),this.pixelStoreUnpackPremultiplyAlpha=new ao(this),this.pixelStoreUnpackFlipY=new $s(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extTextureHalfFloat=l.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(l.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=l.getExtension("OES_standard_derivatives"),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,f){return new cn(this,l,f)}createVertexBuffer(l,f,b){return new Te(this,l,f,b)}createRenderbuffer(l,f,b){const R=this.gl,M=R.createRenderbuffer();return this.bindRenderbuffer.set(M),R.renderbufferStorage(R.RENDERBUFFER,l,f,b),this.bindRenderbuffer.set(null),M}createFramebuffer(l,f,b){return new oe(this,l,f,b)}clear({color:l,depth:f,stencil:b}){const R=this.gl;let M=0;l&&(M|=R.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),f!==void 0&&(M|=R.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),b!==void 0&&(M|=R.STENCIL_BUFFER_BIT,this.clearStencil.set(b),this.stencilMask.set(255)),R.clear(M)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){v(l.blendFunction,r.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Ae extends r.Evented{constructor(l,f,b,R){super(),this.id=l,this.dispatcher=b,this.setEventedParent(R),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.extend({type:"raster"},f),r.extend(this,r.pick(f,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=un(this._options,this.map._requestManager,null,null,(l,f)=>{this._tileJSONRequest=null,this._loaded=!0,l?this.fire(new r.ErrorEvent(l)):f&&(r.extend(this,f),f.bounds&&(this.tileBounds=new ln(f.bounds,this.minzoom,this.maxzoom)),r.postTurnstileEvent(f.tiles),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return r.extend({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,f){const b=r.exported.devicePixelRatio>=2,R=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),b,this.tileSize);l.request=r.getImage(this.map._requestManager.transformRequest(R,r.ResourceType.Tile),(M,F,j,q)=>(delete l.request,l.aborted?(l.state="unloaded",f(null)):M?(l.state="errored",f(M)):F?(this.map._refreshExpiredTiles&&l.setExpiryData({cacheControl:j,expires:q}),l.setTexture(F,this.map.painter),l.state="loaded",r.cacheEntryPossiblyAdded(this.dispatcher),void f(null)):f(null)))}static loadTileData(l,f,b){l.setTexture(f,b)}static unloadTileData(l,f){l.texture&&f.saveTileTexture(l.texture)}abortTile(l,f){l.request&&(l.request.cancel(),delete l.request),f()}unloadTile(l,f){l.texture&&this.map.painter.saveTileTexture(l.texture),f()}hasTransition(){return!1}}let Ve;function We(_,l,f,b,R,M,F,j){const q=[_,f,R,l,b,M,1,1,1],Y=[F,j,1],X=r.adjoint([],q),[te,ue,ye]=r.transformMat3(Y,Y,r.transpose(X,X));return r.multiply$1(q,[te,0,0,0,ue,0,0,0,ye],q)}class He extends r.Evented{constructor(l,f,b,R){super(),this.id=l,this.dispatcher=b,this.coordinates=f.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(R),this.options=f}load(l,f){this._loaded=f||!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this.url=this.options.url,r.getImage(this.map._requestManager.transformRequest(this.url,r.ResourceType.Image),(b,R)=>{if(this._loaded=!0,b)this.fire(new r.ErrorEvent(b));else if(R){const{HTMLImageElement:M}=r.window;this.image=R instanceof M?r.exported.getImageData(R):R,this.width=this.image.width,this.height=this.image.height,l&&(this.coordinates=l),this._finishLoading()}})}loaded(){return this._loaded}updateImage(l){return this.image&&l.url?(this.options.url=l.url,this.load(l.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this.texture&&this.texture.destroy()}setCoordinates(l){this.coordinates=l,this._boundsArray=void 0;const f=l.map(r.MercatorCoordinate.fromLngLat);return this.tileID=function(b){let R=1/0,M=1/0,F=-1/0,j=-1/0;for(const te of b)R=Math.min(R,te.x),M=Math.min(M,te.y),F=Math.max(F,te.x),j=Math.max(j,te.y);const q=Math.max(F-R,j-M),Y=Math.max(0,Math.floor(-Math.log(q)/Math.LN2)),X=Math.pow(2,Y);return new r.CanonicalTileID(Y,Math.floor((R+F)/2*X),Math.floor((M+j)/2*X))}(f),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(l){for(const q in this.tiles){const Y=this.tiles[q];Y.state!=="loaded"&&(Y.state="loaded",Y.texture=this.texture)}if(this._boundsArray)return;const f=r.tileTransform(this.tileID,this.map.transform.projection),[b,R,M,F]=this.coordinates.map(q=>{const Y=f.projection.project(q[0],q[1]);return r.getTilePoint(f,Y)._round()});this.perspectiveTransform=function(q,Y,X,te,ue,ye,he,me,_e,fe){const Ce=We(0,0,q,0,0,Y,q,Y),be=We(X,te,ue,ye,he,me,_e,fe);return r.multiply$1(be,r.adjoint(Ce,Ce),be),[be[6]/be[8]*q/r.EXTENT,be[7]/be[8]*Y/r.EXTENT]}(this.width,this.height,b.x,b.y,R.x,R.y,F.x,F.y,M.x,M.y);const j=this._boundsArray=new r.StructArrayLayout4i8;j.emplaceBack(b.x,b.y,0,0),j.emplaceBack(R.x,R.y,r.EXTENT,0),j.emplaceBack(F.x,F.y,0,r.EXTENT),j.emplaceBack(M.x,M.y,r.EXTENT,r.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=l.createVertexBuffer(j,r.boundsAttributes.members),this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,f=l.gl;this.texture?this.texture.update(this.image):(this.texture=new r.Texture(l,this.image,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE)),this._prepareData(l)}loadTile(l,f){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={},f(null)):(l.state="errored",f(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const je={vector:class extends r.Evented{constructor(_,l,f,b){if(super(),this.id=_,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,r.extend(this,r.pick(l,["url","scheme","tileSize","promoteId"])),this._options=r.extend({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(b),this._tileWorkers={},this._deduped=new r.DedupedRequest}load(_){this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"}));const l=this.language||this.map._language,f=this.worldview||this.map._worldview;this._tileJSONRequest=un(this._options,this.map._requestManager,l,f,(b,R)=>{this._tileJSONRequest=null,this._loaded=!0,b?(l&&console.warn(`Ensure that your requested language string is a valid BCP-47 code. Found: ${l}`),f&&f.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${f}`),this.fire(new r.ErrorEvent(b))):R&&(r.extend(this,R),R.bounds&&(this.tileBounds=new ln(R.bounds,this.minzoom,this.maxzoom)),r.postTurnstileEvent(R.tiles,this.map._requestManager._customAccessToken),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"}))),_&&_(b)})}loaded(){return this._loaded}hasTile(_){return!this.tileBounds||this.tileBounds.contains(_.canonical)}onAdd(_){this.map=_,this.load()}setSourceProperty(_){this._tileJSONRequest&&this._tileJSONRequest.cancel(),_(),this.load(()=>{const l=this.map.style._getSourceCaches(this.id);for(const f of l)f.clearTiles()})}setTiles(_){return this.setSourceProperty(()=>{this._options.tiles=_}),this}setUrl(_){return this.setSourceProperty(()=>{this.url=_,this._options.url=_}),this}_setLanguage(_){return _===this.language||this.setSourceProperty(()=>{this.language=_}),this}_setWorldview(_){return _===this.worldview?this:this.worldviewOptions&&_&&!this.worldviewOptions[_]?(console.warn(`Vector tile source "${this.id}" does not support worldview "${_}".`),this):(this.setSourceProperty(()=>{this.worldview=_}),this)}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return r.extend({},this._options)}loadTile(_,l){const f=this.map._requestManager.normalizeTileURL(_.tileID.canonical.url(this.tiles,this.scheme)),b={request:this.map._requestManager.transformRequest(f,r.ResourceType.Tile),data:void 0,uid:_.uid,tileID:_.tileID,tileZoom:_.tileZoom,zoom:_.tileID.overscaledZ,tileSize:this.tileSize*_.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:r.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:_.isSymbolTile};if(b.request.collectResourceTiming=this._collectResourceTiming,_.actor&&_.state!=="expired")_.state==="loading"?_.reloadCallback=l:_.request=_.actor.send("reloadTile",b,R.bind(this));else if(_.actor=this._tileWorkers[f]=this._tileWorkers[f]||this.dispatcher.getActor(),this.dispatcher.ready)_.request=_.actor.send("loadTile",b,R.bind(this),void 0,!0);else{const M=r.loadVectorTile.call({deduped:this._deduped},b,(F,j)=>{F||!j?R.call(this,F):(b.data={cacheControl:j.cacheControl,expires:j.expires,rawData:j.rawData.slice(0)},_.actor&&_.actor.send("loadTile",b,R.bind(this),void 0,!0))},!0);_.request={cancel:M}}function R(M,F){return delete _.request,_.aborted?l(null):M&&M.status!==404?l(M):(F&&F.resourceTiming&&(_.resourceTiming=F.resourceTiming),this.map._refreshExpiredTiles&&F&&_.setExpiryData(F),_.loadVectorData(F,this.map.painter),r.cacheEntryPossiblyAdded(this.dispatcher),l(null),void(_.reloadCallback&&(this.loadTile(_,_.reloadCallback),_.reloadCallback=null)))}}abortTile(_){_.request&&(_.request.cancel(),delete _.request),_.actor&&_.actor.send("abortTile",{uid:_.uid,type:this.type,source:this.id})}unloadTile(_){_.unloadVectorData(),_.actor&&_.actor.send("removeTile",{uid:_.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:Ae,"raster-dem":class extends Ae{constructor(_,l,f,b){super(_,l,f,b),this.type="raster-dem",this.maxzoom=22,this._options=r.extend({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox"}loadTile(_,l){const f=this.map._requestManager.normalizeTileURL(_.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function b(R,M){R&&(_.state="errored",l(R)),M&&(_.dem=M,_.dem.onDeserialize(),_.needsHillshadePrepare=!0,_.needsDEMTextureUpload=!0,_.state="loaded",l(null))}_.request=r.getImage(this.map._requestManager.transformRequest(f,r.ResourceType.Tile),function(R,M,F,j){if(delete _.request,_.aborted)_.state="unloaded",l(null);else if(R)_.state="errored",l(R);else if(M){this.map._refreshExpiredTiles&&_.setExpiryData({cacheControl:F,expires:j});const q=r.window.ImageBitmap&&M instanceof r.window.ImageBitmap&&(Ve==null&&(Ve=r.window.OffscreenCanvas&&new r.window.OffscreenCanvas(1,1).getContext("2d")&&typeof r.window.createImageBitmap=="function"),Ve),Y=1-(M.width-r.prevPowerOfTwo(M.width))/2;Y<1||_.neighboringTiles||(_.neighboringTiles=this._getNeighboringTiles(_.tileID));const X=q?M:r.exported.getImageData(M,Y),te={uid:_.uid,coord:_.tileID,source:this.id,rawImageData:X,encoding:this.encoding,padding:Y};_.actor&&_.state!=="expired"||(_.actor=this.dispatcher.getActor(),_.actor.send("loadDEMTile",te,b.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(_){const l=_.canonical,f=Math.pow(2,l.z),b=(l.x-1+f)%f,R=l.x===0?_.wrap-1:_.wrap,M=(l.x+1+f)%f,F=l.x+1===f?_.wrap+1:_.wrap,j={};return j[new r.OverscaledTileID(_.overscaledZ,R,l.z,b,l.y).key]={backfilled:!1},j[new r.OverscaledTileID(_.overscaledZ,F,l.z,M,l.y).key]={backfilled:!1},l.y>0&&(j[new r.OverscaledTileID(_.overscaledZ,R,l.z,b,l.y-1).key]={backfilled:!1},j[new r.OverscaledTileID(_.overscaledZ,_.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},j[new r.OverscaledTileID(_.overscaledZ,F,l.z,M,l.y-1).key]={backfilled:!1}),l.y+1<f&&(j[new r.OverscaledTileID(_.overscaledZ,R,l.z,b,l.y+1).key]={backfilled:!1},j[new r.OverscaledTileID(_.overscaledZ,_.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},j[new r.OverscaledTileID(_.overscaledZ,F,l.z,M,l.y+1).key]={backfilled:!1}),j}unloadTile(_){_.demTexture&&this.map.painter.saveTileTexture(_.demTexture),_.fbo&&(_.fbo.destroy(),delete _.fbo),_.dem&&delete _.dem,delete _.neighboringTiles,_.state="unloaded"}},geojson:class extends r.Evented{constructor(_,l,f,b){super(),this.id=_,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=f.getActor(),this.setEventedParent(b),this._data=l.data,this._options=r.extend({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const R=r.EXTENT/this.tileSize;this.workerOptions=r.extend({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*R,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*R,extent:r.EXTENT,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:r.EXTENT,radius:(l.clusterRadius!==void 0?l.clusterRadius:50)*R,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions)}onAdd(_){this.map=_,this.setData(this._data)}setData(_){return this._data=_,this._updateWorkerData(),this}getClusterExpansionZoom(_,l){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:_,source:this.id},l),this}getClusterChildren(_,l){return this.actor.send("geojson.getClusterChildren",{clusterId:_,source:this.id},l),this}getClusterLeaves(_,l,f,b){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:_,limit:l,offset:f},b),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new r.Event("dataloading",{dataType:"source"})),this._loaded=!1;const _=r.extend({},this.workerOptions),l=this._data;typeof l=="string"?(_.request=this.map._requestManager.transformRequest(r.exported.resolveURL(l),r.ResourceType.Source),_.request.collectResourceTiming=this._collectResourceTiming):_.data=JSON.stringify(l),this._pendingLoad=this.actor.send(`${this.type}.loadData`,_,(f,b)=>{if(this._loaded=!0,this._pendingLoad=null,f)this.fire(new r.ErrorEvent(f));else{const R={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&b&&b.resourceTiming&&b.resourceTiming[this.id]&&(R.resourceTiming=b.resourceTiming[this.id]),this.fire(new r.Event("data",R)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(_,l){const f=_.actor?"reloadTile":"loadTile";_.actor=this.actor,_.request=this.actor.send(f,{type:this.type,uid:_.uid,tileID:_.tileID,tileZoom:_.tileZoom,zoom:_.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:r.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(b,R)=>(delete _.request,_.unloadVectorData(),_.aborted?l(null):b?l(b):(_.loadVectorData(R,this.map.painter,f==="reloadTile"),l(null))),void 0,f==="loadTile")}abortTile(_){_.request&&(_.request.cancel(),delete _.request),_.aborted=!0}unloadTile(_){_.unloadVectorData(),this.actor.send("removeTile",{uid:_.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return r.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends He{constructor(_,l,f,b){super(_,l,f,b),this.roundZoom=!0,this.type="video",this.options=l}load(){this._loaded=!1;const _=this.options;this.urls=[];for(const l of _.urls)this.urls.push(this.map._requestManager.transformRequest(l,r.ResourceType.Source).url);r.getVideo(this.urls,(l,f)=>{this._loaded=!0,l?this.fire(new r.ErrorEvent(l)):f&&(this.video=f,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(_){if(this.video){const l=this.video.seekable;_<l.start(0)||_>l.end(0)?this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=_}}getVideo(){return this.video}onAdd(_){this.map||(this.map=_,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _=this.map.painter.context,l=_.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new r.Texture(_,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(_)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:He,canvas:class extends He{constructor(_,l,f,b){super(_,l,f,b),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(R=>!Array.isArray(R)||R.length!==2||R.some(M=>typeof M!="number"))||this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${_}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${_}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${_}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof r.window.HTMLCanvasElement||this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${_}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${_}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof r.window.HTMLCanvasElement?this.options.canvas:r.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new r.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(_){this.map=_,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context;this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new r.Texture(l,this.canvas,l.gl.RGBA,{premultiply:!0}),this._prepareData(l)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const _ of[this.canvas.width,this.canvas.height])if(isNaN(_)||_<=0)return!0;return!1}},custom:class extends r.Evented{constructor(_,l,f,b){super(),this.id=_,this.type="custom",this._dataType="raster",this._dispatcher=f,this._implementation=l,this.setEventedParent(b),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new r.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new r.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new ln(this._implementation.bounds,this.minzoom,this.maxzoom)),l.update=this._update.bind(this),l.coveringTiles=this._coveringTiles.bind(this),r.extend(this,r.pick(l,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return r.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(_){this._map=_,this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(_),this.load()}onRemove(_){this._implementation.onRemove&&this._implementation.onRemove(_)}hasTile(_){if(this._implementation.hasTile){const{x:l,y:f,z:b}=_.canonical;return this._implementation.hasTile({x:l,y:f,z:b})}return!this.tileBounds||this.tileBounds.contains(_.canonical)}loadTile(_,l){const{x:f,y:b,z:R}=_.tileID.canonical,M=new r.window.AbortController,F=this._implementation.loadTile({x:f,y:b,z:R},{signal:M.signal});if(!F)return this.loadTileData(_,{width:this.tileSize,height:this.tileSize,data:null}),_.state="loaded",l(null);F.cancel=()=>M.abort(),_.request=F.then(function(j){return delete _.request,_.aborted?(_.state="unloaded",l(null)):j?function(q){return q instanceof r.window.ImageData||q instanceof r.window.ImageBitmap||q instanceof r.window.HTMLCanvasElement}(j)?(this.loadTileData(_,j),_.state="loaded",void l(null)):(_.state="errored",l(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`))):(this.loadTileData(_,{width:this.tileSize,height:this.tileSize,data:null}),_.state="loaded",l(null))}.bind(this)).catch(j=>{j.code!==20&&(_.state="errored",l(j))})}loadTileData(_,l){Ae.loadTileData(_,l,this._map.painter)}unloadTileData(_){Ae.unloadTileData(_,this._map.painter)}prepareTile(_){if(!this._implementation.prepareTile)return null;const{x:l,y:f,z:b}=_.tileID.canonical,R=this._implementation.prepareTile({x:l,y:f,z:b});return R?(this.loadTileData(_,R),_.state="loaded",R):null}unloadTile(_,l){if(this.unloadTileData(_),this._implementation.unloadTile){const{x:f,y:b,z:R}=_.tileID.canonical;this._implementation.unloadTile({x:f,y:b,z:R})}l()}abortTile(_,l){_.request&&_.request.cancel&&(_.request.cancel(),delete _.request),l()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(_=>({x:_.canonical.x,y:_.canonical.y,z:_.canonical.z}))}_update(){this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Ye=function(_,l,f,b){const R=new je[l.type](_,l,f,b);if(R.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${R.id}`);return r.bindAll(["load","abort","unload","serialize","prepare"],R),R};function bt(_,l){const f=r.identity([]);return r.scale(f,f,[.5*_.width,.5*-_.height,1]),r.translate(f,f,[1,-1,0]),r.multiply(f,f,_.calculateProjMatrix(l.toUnwrapped())),Float32Array.from(f)}function zt(_,l,f,b,R,M,F,j=!1){const q=_.tilesIn(b,F,j);q.sort(nn);const Y=[];for(const te of q)Y.push({wrappedTileID:te.tile.tileID.wrapped().key,queryResults:te.tile.queryRenderedFeatures(l,f,_._state,te,R,M,bt(_.transform,te.tile.tileID),j)});const X=function(te){const ue={},ye={};for(const he of te){const me=he.queryResults,_e=he.wrappedTileID,fe=ye[_e]=ye[_e]||{};for(const Ce in me){const be=me[Ce],Be=fe[Ce]=fe[Ce]||{},Oe=ue[Ce]=ue[Ce]||[];for(const $e of be)Be[$e.featureIndex]||(Be[$e.featureIndex]=!0,Oe.push($e))}}return ue}(Y);for(const te in X)X[te].forEach(ue=>{const ye=ue.feature,he=ye.layer;he&&he.type!=="background"&&he.type!=="sky"&&(ye.source=he.source,he["source-layer"]&&(ye.sourceLayer=he["source-layer"]),ye.state=ye.id!==void 0?_.getFeatureState(he["source-layer"],ye.id):{})});return X}function St(_,l){const f=_.getRenderableIds().map(M=>_.getTileByID(M)),b=[],R={};for(let M=0;M<f.length;M++){const F=f[M],j=F.tileID.canonical.key;R[j]||(R[j]=!0,F.querySourceFeatures(b,l))}return b}function nn(_,l){const f=_.tileID,b=l.tileID;return f.overscaledZ-b.overscaledZ||f.canonical.y-b.canonical.y||f.wrap-b.wrap||f.canonical.x-b.canonical.x}function rn(){return hs.workerClass!=null?new hs.workerClass:new r.window.Worker(hs.workerUrl)}const Xt="mapboxgl_preloaded_worker_pool";class sn{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<sn.workerCount;)this.workers.push(new rn);return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(f=>{f.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Xt]}numActive(){return Object.keys(this.active).length}}let yn;function Ln(){return yn||(yn=new sn),yn}function zn(_,l){const f={};for(const b in _)b!=="ref"&&(f[b]=_[b]);return r.refProperties.forEach(b=>{b in l&&(f[b]=l[b])}),f}function On(_){_=_.slice();const l=Object.create(null);for(let f=0;f<_.length;f++)l[_[f].id]=_[f];for(let f=0;f<_.length;f++)"ref"in _[f]&&(_[f]=zn(_[f],l[_[f].ref]));return _}sn.workerCount=2;const tn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function st(_,l,f){f.push({command:tn.addSource,args:[_,l[_]]})}function zi(_,l,f){l.push({command:tn.removeSource,args:[_]}),f[_]=!0}function ii(_,l,f,b){zi(_,f,b),st(_,l,f)}function Sr(_,l,f){let b;for(b in _[f])if(_[f].hasOwnProperty(b)&&b!=="data"&&!v(_[f][b],l[f][b]))return!1;for(b in l[f])if(l[f].hasOwnProperty(b)&&b!=="data"&&!v(_[f][b],l[f][b]))return!1;return!0}function Ns(_,l,f,b,R,M){let F;for(F in l=l||{},_=_||{})_.hasOwnProperty(F)&&(v(_[F],l[F])||f.push({command:M,args:[b,F,l[F],R]}));for(F in l)l.hasOwnProperty(F)&&!_.hasOwnProperty(F)&&(v(_[F],l[F])||f.push({command:M,args:[b,F,l[F],R]}))}function Xi(_){return _.id}function Ms(_,l){return _[l.id]=l,_}class Iu{constructor(l,f){this.reset(l,f)}reset(l,f){this.points=l||[],this._distances=[0];for(let b=1;b<this.points.length;b++)this._distances[b]=this._distances[b-1]+this.points[b].dist(this.points[b-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=r.clamp(l,0,1);let f=1,b=this._distances[f];const R=l*this.paddedLength+this.padding;for(;b<R&&f<this._distances.length;)b=this._distances[++f];const M=f-1,F=this._distances[M],j=b-F,q=j>0?(R-F)/j:0;return this.points[M].mult(1-q).add(this.points[f].mult(q))}}class lo{constructor(l,f,b){const R=this.boxCells=[],M=this.circleCells=[];this.xCellCount=Math.ceil(l/b),this.yCellCount=Math.ceil(f/b);for(let F=0;F<this.xCellCount*this.yCellCount;F++)R.push([]),M.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=f,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,f,b,R,M){this._forEachCell(f,b,R,M,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(f),this.bboxes.push(b),this.bboxes.push(R),this.bboxes.push(M)}insertCircle(l,f,b,R){this._forEachCell(f-R,b-R,f+R,b+R,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(f),this.circles.push(b),this.circles.push(R)}_insertBoxCell(l,f,b,R,M,F){this.boxCells[M].push(F)}_insertCircleCell(l,f,b,R,M,F){this.circleCells[M].push(F)}_query(l,f,b,R,M,F){if(b<0||l>this.width||R<0||f>this.height)return!M&&[];const j=[];if(l<=0&&f<=0&&this.width<=b&&this.height<=R){if(M)return!0;for(let q=0;q<this.boxKeys.length;q++)j.push({key:this.boxKeys[q],x1:this.bboxes[4*q],y1:this.bboxes[4*q+1],x2:this.bboxes[4*q+2],y2:this.bboxes[4*q+3]});for(let q=0;q<this.circleKeys.length;q++){const Y=this.circles[3*q],X=this.circles[3*q+1],te=this.circles[3*q+2];j.push({key:this.circleKeys[q],x1:Y-te,y1:X-te,x2:Y+te,y2:X+te})}return F?j.filter(F):j}return this._forEachCell(l,f,b,R,this._queryCell,j,{hitTest:M,seenUids:{box:{},circle:{}}},F),M?j.length>0:j}_queryCircle(l,f,b,R,M){const F=l-b,j=l+b,q=f-b,Y=f+b;if(j<0||F>this.width||Y<0||q>this.height)return!R&&[];const X=[];return this._forEachCell(F,q,j,Y,this._queryCellCircle,X,{hitTest:R,circle:{x:l,y:f,radius:b},seenUids:{box:{},circle:{}}},M),R?X.length>0:X}query(l,f,b,R,M){return this._query(l,f,b,R,!1,M)}hitTest(l,f,b,R,M){return this._query(l,f,b,R,!0,M)}hitTestCircle(l,f,b,R){return this._queryCircle(l,f,b,!0,R)}_queryCell(l,f,b,R,M,F,j,q){const Y=j.seenUids,X=this.boxCells[M];if(X!==null){const ue=this.bboxes;for(const ye of X)if(!Y.box[ye]){Y.box[ye]=!0;const he=4*ye;if(l<=ue[he+2]&&f<=ue[he+3]&&b>=ue[he+0]&&R>=ue[he+1]&&(!q||q(this.boxKeys[ye]))){if(j.hitTest)return F.push(!0),!0;F.push({key:this.boxKeys[ye],x1:ue[he],y1:ue[he+1],x2:ue[he+2],y2:ue[he+3]})}}}const te=this.circleCells[M];if(te!==null){const ue=this.circles;for(const ye of te)if(!Y.circle[ye]){Y.circle[ye]=!0;const he=3*ye;if(this._circleAndRectCollide(ue[he],ue[he+1],ue[he+2],l,f,b,R)&&(!q||q(this.circleKeys[ye]))){if(j.hitTest)return F.push(!0),!0;{const me=ue[he],_e=ue[he+1],fe=ue[he+2];F.push({key:this.circleKeys[ye],x1:me-fe,y1:_e-fe,x2:me+fe,y2:_e+fe})}}}}}_queryCellCircle(l,f,b,R,M,F,j,q){const Y=j.circle,X=j.seenUids,te=this.boxCells[M];if(te!==null){const ye=this.bboxes;for(const he of te)if(!X.box[he]){X.box[he]=!0;const me=4*he;if(this._circleAndRectCollide(Y.x,Y.y,Y.radius,ye[me+0],ye[me+1],ye[me+2],ye[me+3])&&(!q||q(this.boxKeys[he])))return F.push(!0),!0}}const ue=this.circleCells[M];if(ue!==null){const ye=this.circles;for(const he of ue)if(!X.circle[he]){X.circle[he]=!0;const me=3*he;if(this._circlesCollide(ye[me],ye[me+1],ye[me+2],Y.x,Y.y,Y.radius)&&(!q||q(this.circleKeys[he])))return F.push(!0),!0}}}_forEachCell(l,f,b,R,M,F,j,q){const Y=this._convertToXCellCoord(l),X=this._convertToYCellCoord(f),te=this._convertToXCellCoord(b),ue=this._convertToYCellCoord(R);for(let ye=Y;ye<=te;ye++)for(let he=X;he<=ue;he++)if(M.call(this,l,f,b,R,this.xCellCount*he+ye,F,j,q))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,f,b,R,M,F){const j=R-l,q=M-f,Y=b+F;return Y*Y>j*j+q*q}_circleAndRectCollide(l,f,b,R,M,F,j){const q=(F-R)/2,Y=Math.abs(l-(R+q));if(Y>q+b)return!1;const X=(j-M)/2,te=Math.abs(f-(M+X));if(te>X+b)return!1;if(Y<=q||te<=X)return!0;const ue=Y-q,ye=te-X;return ue*ue+ye*ye<=b*b}}const Ft=Math.tan(85*Math.PI/180);function xn(_,l,f,b,R,M,F){const j=r.create();if(f)if(M.name==="globe"){const q=r.calculateGlobeLabelMatrix(R,l);r.multiply(j,j,q)}else{const q=ne([],F);j[0]=q[0],j[1]=q[1],j[4]=q[2],j[5]=q[3],b||r.rotateZ(j,j,R.angle)}else r.multiply(j,R.labelPlaneMatrix,_);return j}function wn(_,l,f,b,R,M,F){const j=xn(_,l,f,b,R,M,F);return M.name==="globe"&&f||(j[2]=j[6]=j[10]=j[14]=0),j}function Ji(_,l,f,b,R,M,F){if(f){if(M.name==="globe"){const j=xn(_,l,f,b,R,M,F);return r.invert(j,j),r.multiply(j,_,j),j}{const j=r.clone(_),q=r.identity([]);return q[0]=F[0],q[1]=F[1],q[4]=F[2],q[5]=F[3],r.multiply(j,j,q),b||r.rotateZ(j,j,-R.angle),j}}return R.glCoordMatrix}function Qi(_,l,f=0){const b=[_.x,_.y,f,1];f?r.transformMat4$1(b,b,l):ki(b,b,l);const R=b[3];return{point:[b[0]/R,b[1]/R,b[2]/R],signedDistanceFromCamera:R}}function mn(_,l){const f=[_[0],_[1],_[2],1];r.transformMat4$1(f,f,l);const b=f[3];return{point:[f[0]/b,f[1]/b,f[2]/b],signedDistanceFromCamera:b}}function zo(_,l){return Math.min(.5+_/l*.5,1.5)}function Fo(_,l){const f=_[0]/_[3],b=_[1]/_[3];return f>=-l[0]&&f<=l[0]&&b>=-l[1]&&b<=l[1]}function Vo(_,l,f,b,R,M,F,j,q,Y){const X=f.transform,te=b?_.textSizeData:_.iconSizeData,ue=r.evaluateSizeForZoom(te,f.transform.zoom),ye=X.projection.name==="globe",he=[256/f.width*2+1,256/f.height*2+1],me=b?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;me.clear();let _e=null;ye&&(_e=b?_.text.globeExtVertexArray:_.icon.globeExtVertexArray);const fe=_.lineVertexArray,Ce=b?_.text.placedSymbolArray:_.icon.placedSymbolArray,be=f.transform.width/f.transform.height;let Be=!1;for(let Oe=0;Oe<Ce.length;Oe++){const $e=Ce.get(Oe);if($e.writingMode!==r.WritingMode.vertical||Be||Oe!==0&&Ce.get(Oe-1).writingMode===r.WritingMode.horizontal||(Be=!0),($e.hidden||$e.writingMode===r.WritingMode.vertical)&&!Be){Ar($e.numGlyphs,me);continue}Be=!1;const De=new r.pointGeometry($e.tileAnchorX,$e.tileAnchorY),Le=q?q(De):[0,0,0],Ge=X.projection.projectTilePoint(De.x,De.y,Y.canonical),Je=[Ge.x+Le[0],Ge.y+Le[1],Ge.z+Le[2]],kt=[...Je,1];if(r.transformMat4$1(kt,kt,l),!Fo(kt,he)){Ar($e.numGlyphs,me);continue}const Ke=zo(f.transform.cameraToCenterDistance,kt[3]),pt=r.evaluateSizeForFeature(te,ue,$e),_t=F?pt/Ke:pt*Ke,It=Qi(new r.pointGeometry(Je[0],Je[1]),R,Je[2]);if(It.signedDistanceFromCamera<=0){Ar($e.numGlyphs,me);continue}let ot={};const $t=F?null:q,mt=oc($e,_t,!1,j,l,R,M,_.glyphOffsetArray,fe,me,_e,It.point,De,ot,be,$t,X.projection,Y,F);Be=mt.useVertical,$t&&mt.needsFlipping&&(ot={}),(mt.notEnoughRoom||Be||mt.needsFlipping&&oc($e,_t,!0,j,l,R,M,_.glyphOffsetArray,fe,me,_e,It.point,De,ot,be,$t,X.projection,Y,F).notEnoughRoom)&&Ar($e.numGlyphs,me)}b?(_.text.dynamicLayoutVertexBuffer.updateData(me),_e&&_.text.globeExtVertexBuffer.updateData(_e)):(_.icon.dynamicLayoutVertexBuffer.updateData(me),_e&&_.icon.globeExtVertexBuffer.updateData(_e))}function Fi(_,l,f,b,R,M,F,j,q,Y,X,te,ue,ye,he,me){const _e=j.glyphStartIndex+j.numGlyphs,fe=j.lineStartIndex,Ce=j.lineStartIndex+j.lineLength,be=l.getoffsetX(j.glyphStartIndex),Be=l.getoffsetX(_e-1),Oe=Tr(_*be,f,b,R,M,F,j.segment,fe,Ce,q,Y,X,te,ue,!0,ye,he,me);if(!Oe)return null;const $e=Tr(_*Be,f,b,R,M,F,j.segment,fe,Ce,q,Y,X,te,ue,!0,ye,he,me);return $e?{first:Oe,last:$e}:null}function ei(_,l,f,b){return _.writingMode===r.WritingMode.horizontal&&Math.abs(f.y-l.y)>Math.abs(f.x-l.x)*b?{useVertical:!0}:_.writingMode===r.WritingMode.vertical?l.y<f.y?{needsFlipping:!0}:null:_.flipState!==0&&function(R,M,F){const j=(M.x-R.x)*F;return j===0||Math.abs((M.y-R.y)/j)>Ft}(l,f,b)?_.flipState===1?{needsFlipping:!0}:null:l.x>f.x?{needsFlipping:!0}:null}function oc(_,l,f,b,R,M,F,j,q,Y,X,te,ue,ye,he,me,_e,fe,Ce){const be=l/24,Be=_.lineOffsetX*be,Oe=_.lineOffsetY*be;let $e;if(_.numGlyphs>1){const De=_.glyphStartIndex+_.numGlyphs,Le=_.lineStartIndex,Ge=_.lineStartIndex+_.lineLength,Je=Fi(be,j,Be,Oe,f,te,ue,_,q,M,ye,me,!1,_e,fe,Ce);if(!Je)return{notEnoughRoom:!0};const kt=mn(Je.first.point,F).point,Ke=mn(Je.last.point,F).point,pt=new r.pointGeometry(kt[0],kt[1]),_t=new r.pointGeometry(Ke[0],Ke[1]);if(b&&!f){const It=ei(_,pt,_t,he);if(_.flipState=It&&It.needsFlipping?1:2,It)return It}$e=[Je.first];for(let It=_.glyphStartIndex+1;It<De-1;It++)$e.push(Tr(be*j.getoffsetX(It),Be,Oe,f,te,ue,_.segment,Le,Ge,q,M,ye,me,!1,!1,_e,fe,Ce));$e.push(Je.last)}else{if(b&&!f){const Le=Qi(ue,R).point,Ge=_.lineStartIndex+_.segment+1,Je=new r.pointGeometry(q.getx(Ge),q.gety(Ge)),kt=Qi(Je,R),Ke=kt.signedDistanceFromCamera>0?kt.point:Is(ue,Je,Le,1,R,void 0,_e,fe.canonical),pt=ei(_,new r.pointGeometry(Le[0],Le[1]),new r.pointGeometry(Ke[0],Ke[1]),he);if(_.flipState=pt&&pt.needsFlipping?1:2,pt)return pt}const De=Tr(be*j.getoffsetX(_.glyphStartIndex),Be,Oe,f,te,ue,_.segment,_.lineStartIndex,_.lineStartIndex+_.lineLength,q,M,ye,me,!1,!1,_e,fe,Ce);if(!De)return{notEnoughRoom:!0};$e=[De]}if(X)for(const De of $e)r.updateGlobeVertexNormal(X,Y.length+0,De.up[0],De.up[1],De.up[2]),r.updateGlobeVertexNormal(X,Y.length+1,De.up[0],De.up[1],De.up[2]),r.updateGlobeVertexNormal(X,Y.length+2,De.up[0],De.up[1],De.up[2]),r.updateGlobeVertexNormal(X,Y.length+3,De.up[0],De.up[1],De.up[2]),r.addDynamicAttributes(Y,De.point[0],De.point[1],De.point[2],De.angle);else for(const De of $e)r.addDynamicAttributes(Y,De.point[0],De.point[1],De.point[2],De.angle);return{}}function co(_,l,f,b,R){const M=b.projectTilePoint(_.x,_.y,l);if(!R)return Qi(M,f,M.z);const F=R(_);return Qi(new r.pointGeometry(M.x+F[0],M.y+F[1]),f,M.z+F[2])}function Is(_,l,f,b,R,M,F,j){const q=co(_.add(_.sub(l)._unit()),j,R,F,M).point,Y=r.sub([],f,q);return r.scaleAndAdd([],f,Y,b/r.length(Y))}function Tr(_,l,f,b,R,M,F,j,q,Y,X,te,ue,ye,he,me,_e,fe){const Ce=b?_-l:_+l;let be=Ce>0?1:-1,Be=0;b&&(be*=-1,Be=Math.PI),be<0&&(Be+=Math.PI);let Oe=be>0?j+F:j+F+1,$e=R,De=R,Le=0,Ge=0;const Je=Math.abs(Ce),kt=[],Ke=[];let pt=M;const _t=()=>{const Wt=Oe-be;return Le===0?M:new r.pointGeometry(Y.getx(Wt),Y.gety(Wt))},It=()=>Is(_t(),pt,De,Je-Le+1,X,ue,me,_e.canonical);for(;Le+Ge<=Je;){if(Oe+=be,Oe<j||Oe>=q)return null;if(De=$e,kt.push($e),ye&&Ke.push(pt||_t()),$e=te[Oe],$e===void 0){pt=new r.pointGeometry(Y.getx(Oe),Y.gety(Oe));const Wt=co(pt,_e.canonical,X,me,ue);$e=Wt.signedDistanceFromCamera>0?te[Oe]=Wt.point:It()}else pt=null;Le+=Ge,Ge=r.distance(De,$e)}pt=pt||new r.pointGeometry(Y.getx(Oe),Y.gety(Oe));const ot=_t();he&&ue&&(te[Oe]=$e=te[Oe]===void 0?$e:It(),Ge=r.distance(De,$e));const $t=(Je-Le)/Ge,mt=pt.sub(ot).mult($t)._add(ot),Pt=r.sub([],$e,De),Ot=r.scaleAndAdd([],De,Pt,$t);let Kt=[0,0,1],Qt=Pt[0],dn=Pt[1];if(fe&&(Kt=me.upVector(_e.canonical,mt.x,mt.y),Kt[0]!==0||Kt[1]!==0||Kt[2]!==1)){const Wt=[1,0,0],fn=[0,1,0];Wt[0]=Kt[2],Wt[1]=0,Wt[2]=-Kt[0],r.cross(fn,Kt,Wt),r.normalize(Wt,Wt),r.normalize(fn,fn),Qt=r.dot(Pt,Wt),dn=r.dot(Pt,fn)}if(f){const Wt=r.cross([],Kt,Pt);r.normalize(Wt,Wt),r.scaleAndAdd(Ot,Ot,Wt,f*be)}const Cn=Be+Math.atan2(dn,Qt);return kt.push(Ot),ye&&Ke.push(mt),{point:Ot,angle:Cn,path:kt,tilePath:Ke,up:Kt}}const Na=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ar(_,l){for(let f=0;f<_;f++){const b=l.length;l.resize(b+4),l.float32.set(Na,4*b)}}function ki(_,l,f){const b=l[0],R=l[1];return _[0]=f[0]*b+f[4]*R+f[12],_[1]=f[1]*b+f[5]*R+f[13],_[3]=f[3]*b+f[7]*R+f[15],_}const Pn=100;class Ma{constructor(l,f,b=new lo(l.width+200,l.height+200,25),R=new lo(l.width+200,l.height+200,25)){this.transform=l,this.grid=b,this.ignoredGrid=R,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+Pn,this.screenBottomBoundary=l.height+Pn,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.fogState=f}placeCollisionBox(l,f,b,R,M,F,j,q){let Y=b.projectedAnchorX,X=b.projectedAnchorY,te=b.projectedAnchorZ;const ue=b.elevation,ye=b.tileID;if(ue&&ye){const Oe=l.getProjection().upVector(ye.canonical,b.tileAnchorX,b.tileAnchorY),$e=l.getProjection().upVectorScale(ye.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;Y+=Oe[0]*ue*$e,X+=Oe[1]*ue*$e,te+=Oe[2]*ue*$e}const he=this.projectAndGetPerspectiveRatio(j,[Y,X,te],b.tileID,l.projection.name==="globe"||!!ue||this.transform.pitch>0,l.getProjection()),me=F*he.perspectiveRatio,_e=(b.x1*f+R.x-b.padding)*me+he.point.x,fe=(b.y1*f+R.y-b.padding)*me+he.point.y,Ce=(b.x2*f+R.x+b.padding)*me+he.point.x,be=(b.y2*f+R.y+b.padding)*me+he.point.y,Be=he.perspectiveRatio<=.55||he.occluded;return!this.isInsideGrid(_e,fe,Ce,be)||!M&&this.grid.hitTest(_e,fe,Ce,be,q)||Be?{box:[],offscreen:!1,occluded:he.occluded}:{box:[_e,fe,Ce,be],offscreen:this.isOffscreen(_e,fe,Ce,be),occluded:!1}}placeCollisionCircles(l,f,b,R,M,F,j,q,Y,X,te,ue,ye,he,me){const _e=[],fe=this.transform.elevation,Ce=fe?fe.getAtTileOffsetFunc(me,this.transform.center.lat,this.transform.worldSize,l.getProjection()):ot=>[0,0,0],be=new r.pointGeometry(b.tileAnchorX,b.tileAnchorY),Be=l.getProjection().projectTilePoint(b.tileAnchorX,b.tileAnchorY,me.canonical),Oe=Ce(be),$e=[Be.x+Oe[0],Be.y+Oe[1],Be.z+Oe[2]],De=l.projection.name==="globe",Le=this.projectAndGetPerspectiveRatio(j,[$e[0],$e[1],$e[2]],me,De||!!fe||this.transform.pitch>0,l.getProjection()),{perspectiveRatio:Ge}=Le,Je=(te?F/Ge:F*Ge)/r.ONE_EM,kt=Qi(new r.pointGeometry($e[0],$e[1]),q,$e[2]).point,Ke=Le.signedDistanceFromCamera>0?Fi(Je,M,b.lineOffsetX*Je,b.lineOffsetY*Je,!1,kt,be,b,R,q,{},fe&&!te?Ce:null,te&&!!fe,l.getProjection(),me,te):null;let pt=!1,_t=!1,It=!0;if(Ke&&!Le.occluded){const ot=.5*ye*Ge+he,$t=new r.pointGeometry(-100,-100),mt=new r.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Pt=new Iu,Ot=Ke.first,Kt=Ke.last;let Qt=[];for(let Wt=Ot.path.length-1;Wt>=1;Wt--)Qt.push(Ot.path[Wt]);for(let Wt=1;Wt<Kt.path.length;Wt++)Qt.push(Kt.path[Wt]);const dn=2.5*ot;if(Y){const Wt=Qt.map(fe&&!De?(fn,kn)=>{const Kn=Ce(kn<Ot.path.length-1?Ot.tilePath[Ot.path.length-1-kn]:Kt.tilePath[kn-Ot.path.length+2]);return fn[2]=Kn[2],mn(fn,Y)}:fn=>mn(fn,Y));Qt=Wt.some(fn=>fn.signedDistanceFromCamera<=0)?[]:Wt.map(fn=>fn.point)}let Cn=[];if(Qt.length>0){const Wt=Qt.map(Dn=>new r.pointGeometry(Dn[0],Dn[1]));let fn=1/0,kn=-1/0,Kn=1/0,ri=-1/0;for(let Dn=0;Dn<Wt.length;Dn++)fn=Math.min(fn,Wt[Dn].x),Kn=Math.min(Kn,Wt[Dn].y),kn=Math.max(kn,Wt[Dn].x),ri=Math.max(ri,Wt[Dn].y);Cn=fn>=$t.x&&kn<=mt.x&&Kn>=$t.y&&ri<=mt.y?[Wt]:kn<$t.x||fn>mt.x||ri<$t.y||Kn>mt.y?[]:r.clipLine([Wt],$t.x,$t.y,mt.x,mt.y)}for(const Wt of Cn){Pt.reset(Wt,.25*ot);let fn=0;fn=Pt.length<=.5*ot?1:Math.ceil(Pt.paddedLength/dn)+1;for(let kn=0;kn<fn;kn++){const Kn=kn/Math.max(fn-1,1),ri=Pt.lerp(Kn),Dn=ri.x+Pn,gi=ri.y+Pn;_e.push(Dn,gi,ot,0);const nr=Dn-ot,hr=gi-ot,Wn=Dn+ot,Yn=gi+ot;if(It=It&&this.isOffscreen(nr,hr,Wn,Yn),_t=_t||this.isInsideGrid(nr,hr,Wn,Yn),!f&&this.grid.hitTestCircle(Dn,gi,ot,ue)&&(pt=!0,!X))return{circles:[],offscreen:!1,collisionDetected:pt,occluded:!1}}}}return{circles:!X&&pt||!_t?[]:_e,offscreen:It,collisionDetected:pt,occluded:Le.occluded}}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const f=[];let b=1/0,R=1/0,M=-1/0,F=-1/0;for(const X of l){const te=new r.pointGeometry(X.x+Pn,X.y+Pn);b=Math.min(b,te.x),R=Math.min(R,te.y),M=Math.max(M,te.x),F=Math.max(F,te.y),f.push(te)}const j=this.grid.query(b,R,M,F).concat(this.ignoredGrid.query(b,R,M,F)),q={},Y={};for(const X of j){const te=X.key;if(q[te.bucketInstanceId]===void 0&&(q[te.bucketInstanceId]={}),q[te.bucketInstanceId][te.featureIndex])continue;const ue=[new r.pointGeometry(X.x1,X.y1),new r.pointGeometry(X.x2,X.y1),new r.pointGeometry(X.x2,X.y2),new r.pointGeometry(X.x1,X.y2)];r.polygonIntersectsPolygon(f,ue)&&(q[te.bucketInstanceId][te.featureIndex]=!0,Y[te.bucketInstanceId]===void 0&&(Y[te.bucketInstanceId]=[]),Y[te.bucketInstanceId].push(te.featureIndex))}return Y}insertCollisionBox(l,f,b,R,M){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:b,featureIndex:R,collisionGroupID:M},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,f,b,R,M){const F=f?this.ignoredGrid:this.grid,j={bucketInstanceId:b,featureIndex:R,collisionGroupID:M};for(let q=0;q<l.length;q+=4)F.insertCircle(j,l[q],l[q+1],l[q+2])}projectAndGetPerspectiveRatio(l,f,b,R,M){const F=[f[0],f[1],f[2],1];let j=!1;if(f[2]||this.transform.pitch>0){r.transformMat4$1(F,F,l);const q=M.name==="globe";this.fogState&&b&&!q&&(j=function(Y,X,te,ue,ye,he){const me=he.calculateFogTileMatrix(ye),_e=[X,te,ue];return r.transformMat4(_e,_e,me),Ue(Y,_e,he.pitch,he._fov)}(this.fogState,f[0],f[1],f[2],b.toUnwrapped(),this.transform)>.9)}else ki(F,F,l);return{point:new r.pointGeometry((F[0]/F[3]+1)/2*this.transform.width+Pn,(-F[1]/F[3]+1)/2*this.transform.height+Pn),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(M)/F[3]*.5,1.5),signedDistanceFromCamera:F[3],occluded:R&&F[2]>F[3]||j}}isOffscreen(l,f,b,R){return b<Pn||l>=this.screenRightBoundary||R<Pn||f>this.screenBottomBoundary}isInsideGrid(l,f,b,R){return b>=0&&l<this.gridRightBoundary&&R>=0&&f<this.gridBottomBoundary}getViewportMatrix(){const l=r.identity([]);return r.translate(l,l,[-100,-100,0]),l}}function Uo(_,l,f){const b=l.createTileMatrix(_,_.worldSize,f.toUnwrapped());return r.multiply(new Float32Array(16),_.projMatrix,b)}function Ii(_,l,f){if(l.projection.name===f.projection.name)return _.projMatrix;const b=f.clone();return b.setProjection(l.projection),Uo(b,l.getProjection(),_)}function Li(_,l,f){return l.name===f.projection.name?_.projMatrix:Uo(f,l,_)}class Ia{constructor(l,f,b,R){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?f:-f))):R&&b?1:0,this.placed=b}isHidden(){return this.opacity===0&&!this.placed}}class kr{constructor(l,f,b,R,M,F=!1){this.text=new Ia(l?l.text:null,f,b,M),this.icon=new Ia(l?l.icon:null,f,R,M),this.clipped=F}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class si{constructor(l,f,b,R=!1){this.text=l,this.icon=f,this.skipFade=b,this.clipped=R}}class jo{constructor(){this.invProjMatrix=r.create(),this.viewportMatrix=r.create(),this.circles=[]}}class La{constructor(l,f,b,R,M){this.bucketInstanceId=l,this.featureIndex=f,this.sourceLayerIndex=b,this.bucketIndex=R,this.tileID=M}}class Go{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const f=++this.maxGroupID;this.collisionGroups[l]={ID:f,predicate:b=>b.collisionGroupID===f}}return this.collisionGroups[l]}}function fi(_,l,f,b,R){const{horizontalAlign:M,verticalAlign:F}=r.getAnchorAlignment(_),j=-(M-.5)*l,q=-(F-.5)*f,Y=r.evaluateVariableOffset(_,b);return new r.pointGeometry(j+Y[0]*R,q+Y[1]*R)}function qo(_,l,f,b,R){const M=new r.pointGeometry(_,l);return f&&M._rotate(b?R:-R),M}class Oa{constructor(l,f,b,R,M){this.transform=l.clone(),this.projection=l.projection.name,this.collisionIndex=new Ma(this.transform,M),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new Go(b),this.collisionCircleArrays={},this.prevPlacement=R,R&&(R.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(l,f,b,R){const M=b.getBucket(f),F=b.latestFeatureIndex;if(!M||!F||f.id!==M.layerIds[0])return;const j=M.layers[0].layout,q=b.collisionBoxArray,Y=Math.pow(2,this.transform.zoom-b.tileID.overscaledZ),X=b.tileSize/r.EXTENT,te=b.tileID.toUnwrapped();this.transform.setProjection(M.projection);const ue=(ye=b.tileID,he=M.getProjection(),me=this.transform,he.name===this.projection?me.calculateProjMatrix(ye.toUnwrapped()):Uo(me,he,ye));var ye,he,me;const _e=j.get("text-pitch-alignment")==="map",fe=j.get("text-rotation-alignment")==="map";f.compileFilter();const Ce=f.dynamicFilter(),be=f.dynamicFilterNeedsFeature(),Be=this.transform.calculatePixelsToTileUnitsMatrix(b),Oe=wn(ue,b.tileID.canonical,_e,fe,this.transform,M.getProjection(),Be);let $e=null;if(_e){const Ge=Ji(ue,b.tileID.canonical,_e,fe,this.transform,M.getProjection(),Be);$e=r.multiply([],this.transform.labelPlaneMatrix,Ge)}let De=null;Ce&&b.latestFeatureIndex&&(De={unwrappedTileID:te,dynamicFilter:Ce,dynamicFilterNeedsFeature:be,featureIndex:b.latestFeatureIndex}),this.retainedQueryData[M.bucketInstanceId]=new La(M.bucketInstanceId,F,M.sourceLayerIndex,M.index,b.tileID);const Le={bucket:M,layout:j,posMatrix:ue,textLabelPlaneMatrix:Oe,labelToScreenMatrix:$e,clippingData:De,scale:Y,textPixelRatio:X,holdingForFade:b.holdingForFade(),collisionBoxArray:q,partiallyEvaluatedTextSize:r.evaluateSizeForZoom(M.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:r.evaluateSizeForZoom(M.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(M.sourceID)};if(R)for(const Ge of M.sortKeyRanges){const{sortKey:Je,symbolInstanceStart:kt,symbolInstanceEnd:Ke}=Ge;l.push({sortKey:Je,symbolInstanceStart:kt,symbolInstanceEnd:Ke,parameters:Le})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:M.symbolInstances.length,parameters:Le})}attemptAnchorPlacement(l,f,b,R,M,F,j,q,Y,X,te,ue,ye,he,me,_e,fe,Ce){const be=[ue.textOffset0,ue.textOffset1],Be=fi(l,b,R,be,M),Oe=this.collisionIndex.placeCollisionBox(he,M,f,qo(Be.x,Be.y,F,j,this.transform.angle),te,q,Y,X.predicate);if((!_e||this.collisionIndex.placeCollisionBox(he,he.getSymbolInstanceIconSize(Ce,this.transform.zoom,ye),_e,qo(Be.x,Be.y,F,j,this.transform.angle),te,q,Y,X.predicate).box.length!==0)&&Oe.box.length>0){let $e;return this.prevPlacement&&this.prevPlacement.variableOffsets[ue.crossTileID]&&this.prevPlacement.placements[ue.crossTileID]&&this.prevPlacement.placements[ue.crossTileID].text&&($e=this.prevPlacement.variableOffsets[ue.crossTileID].anchor),this.variableOffsets[ue.crossTileID]={textOffset:be,width:b,height:R,anchor:l,textScale:M,prevAnchor:$e},this.markUsedJustification(he,l,ue,me),he.allowVerticalPlacement&&(this.markUsedOrientation(he,me,ue),this.placedOrientations[ue.crossTileID]=me),{shift:Be,placedGlyphBoxes:Oe}}}placeLayerBucketPart(l,f,b,R){const{bucket:M,layout:F,posMatrix:j,textLabelPlaneMatrix:q,labelToScreenMatrix:Y,clippingData:X,textPixelRatio:te,holdingForFade:ue,collisionBoxArray:ye,partiallyEvaluatedTextSize:he,partiallyEvaluatedIconSize:me,collisionGroup:_e}=l.parameters,fe=F.get("text-optional"),Ce=F.get("icon-optional"),be=F.get("text-allow-overlap"),Be=F.get("icon-allow-overlap"),Oe=F.get("text-rotation-alignment")==="map",$e=F.get("text-pitch-alignment")==="map",De=F.get("icon-text-fit")!=="none",Le=F.get("symbol-z-order")==="viewport-y";this.transform.setProjection(M.projection);let Ge=be&&(Be||!M.hasIconData()||Ce),Je=Be&&(be||!M.hasTextData()||fe);!M.collisionArrays&&ye&&M.deserializeCollisionBoxes(ye),b&&R&&M.updateCollisionDebugBuffers(this.transform.zoom,ye);const kt=(Ke,pt,_t)=>{if(X){const Wn={zoom:this.transform.zoom,pitch:this.transform.pitch};let Yn=null;if(X.dynamicFilterNeedsFeature){const bn=this.retainedQueryData[M.bucketInstanceId];Yn=X.featureIndex.loadFeature({featureIndex:Ke.featureIndex,bucketIndex:bn.bucketIndex,sourceLayerIndex:bn.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,X.dynamicFilter)(Wn,Yn,this.retainedQueryData[M.bucketInstanceId].tileID.canonical,new r.pointGeometry(Ke.tileAnchorX,Ke.tileAnchorY),this.transform.calculateDistanceTileData(X.unwrappedTileID)))return this.placements[Ke.crossTileID]=new si(!1,!1,!1,!0),void(f[Ke.crossTileID]=!0)}if(f[Ke.crossTileID])return;if(ue)return void(this.placements[Ke.crossTileID]=new si(!1,!1,!1));let It=!1,ot=!1,$t=!0,mt=!1,Pt=!1,Ot=null,Kt={box:null,offscreen:null,occluded:null},Qt={box:null,offscreen:null,occluded:null},dn=null,Cn=null,Wt=null,fn=0,kn=0,Kn=0;_t.textFeatureIndex?fn=_t.textFeatureIndex:Ke.useRuntimeCollisionCircles&&(fn=Ke.featureIndex),_t.verticalTextFeatureIndex&&(kn=_t.verticalTextFeatureIndex);const ri=Wn=>{Wn.tileID=this.retainedQueryData[M.bucketInstanceId].tileID,(this.transform.elevation||Wn.elevation)&&(Wn.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[M.bucketInstanceId].tileID,Wn.tileAnchorX,Wn.tileAnchorY):0)},Dn=_t.textBox;if(Dn){ri(Dn);const Wn=bn=>{let ci=r.WritingMode.horizontal;if(M.allowVerticalPlacement&&!bn&&this.prevPlacement){const wi=this.prevPlacement.placedOrientations[Ke.crossTileID];wi&&(this.placedOrientations[Ke.crossTileID]=wi,ci=wi,this.markUsedOrientation(M,ci,Ke))}return ci},Yn=(bn,ci)=>{if(M.allowVerticalPlacement&&Ke.numVerticalGlyphVertices>0&&_t.verticalTextBox){for(const wi of M.writingModes)if(wi===r.WritingMode.vertical?(Kt=ci(),Qt=Kt):Kt=bn(),Kt&&Kt.box&&Kt.box.length)break}else Kt=bn()};if(F.get("text-variable-anchor")){let bn=F.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ke.crossTileID]){const jn=this.prevPlacement.variableOffsets[Ke.crossTileID];bn.indexOf(jn.anchor)>0&&(bn=bn.filter(Ei=>Ei!==jn.anchor),bn.unshift(jn.anchor))}const ci=(jn,Ei,Kr)=>{const Ri=M.getSymbolInstanceTextSize(he,Ke,this.transform.zoom,pt),Wr=(jn.x2-jn.x1)*Ri+2*jn.padding,Zr=(jn.y2-jn.y1)*Ri+2*jn.padding,Yr=De&&!Be?Ei:null;Yr&&ri(Yr);let $i={box:[],offscreen:!1,occluded:!1};const Xr=be?2*bn.length:bn.length;for(let Ir=0;Ir<Xr;++Ir){const gs=this.attemptAnchorPlacement(bn[Ir%bn.length],jn,Wr,Zr,Ri,Oe,$e,te,j,_e,Ir>=bn.length,Ke,pt,M,Kr,Yr,he,me);if(gs&&($i=gs.placedGlyphBoxes,$i&&$i.box&&$i.box.length)){It=!0,Ot=gs.shift;break}}return $i};Yn(()=>ci(Dn,_t.iconBox,r.WritingMode.horizontal),()=>{const jn=_t.verticalTextBox;return jn&&ri(jn),M.allowVerticalPlacement&&!(Kt&&Kt.box&&Kt.box.length)&&Ke.numVerticalGlyphVertices>0&&jn?ci(jn,_t.verticalIconBox,r.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Kt&&(It=Kt.box,$t=Kt.offscreen,mt=Kt.occluded);const wi=Wn(Kt&&Kt.box);if(!It&&this.prevPlacement){const jn=this.prevPlacement.variableOffsets[Ke.crossTileID];jn&&(this.variableOffsets[Ke.crossTileID]=jn,this.markUsedJustification(M,jn.anchor,Ke,wi))}}else{const bn=(ci,wi)=>{const jn=M.getSymbolInstanceTextSize(he,Ke,this.transform.zoom,pt),Ei=this.collisionIndex.placeCollisionBox(M,jn,ci,new r.pointGeometry(0,0),be,te,j,_e.predicate);return Ei&&Ei.box&&Ei.box.length&&(this.markUsedOrientation(M,wi,Ke),this.placedOrientations[Ke.crossTileID]=wi),Ei};Yn(()=>bn(Dn,r.WritingMode.horizontal),()=>{const ci=_t.verticalTextBox;return M.allowVerticalPlacement&&Ke.numVerticalGlyphVertices>0&&ci?(ri(ci),bn(ci,r.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Wn(Kt&&Kt.box&&Kt.box.length)}}if(dn=Kt,It=dn&&dn.box&&dn.box.length>0,$t=dn&&dn.offscreen,mt=dn&&dn.occluded,Ke.useRuntimeCollisionCircles){const Wn=M.text.placedSymbolArray.get(Ke.centerJustifiedTextSymbolIndex>=0?Ke.centerJustifiedTextSymbolIndex:Ke.verticalPlacedTextSymbolIndex),Yn=r.evaluateSizeForFeature(M.textSizeData,he,Wn),bn=F.get("text-padding");Cn=this.collisionIndex.placeCollisionCircles(M,be,Wn,M.lineVertexArray,M.glyphOffsetArray,Yn,j,q,Y,b,$e,_e.predicate,Ke.collisionCircleDiameter*Yn/r.ONE_EM,bn,this.retainedQueryData[M.bucketInstanceId].tileID),It=be||Cn.circles.length>0&&!Cn.collisionDetected,$t=$t&&Cn.offscreen,mt=Cn.occluded}if(_t.iconFeatureIndex&&(Kn=_t.iconFeatureIndex),_t.iconBox){const Wn=Yn=>{ri(Yn);const bn=De&&Ot?qo(Ot.x,Ot.y,Oe,$e,this.transform.angle):new r.pointGeometry(0,0),ci=M.getSymbolInstanceIconSize(me,this.transform.zoom,pt);return this.collisionIndex.placeCollisionBox(M,ci,Yn,bn,Be,te,j,_e.predicate)};Qt&&Qt.box&&Qt.box.length&&_t.verticalIconBox?(Wt=Wn(_t.verticalIconBox),ot=Wt.box.length>0):(Wt=Wn(_t.iconBox),ot=Wt.box.length>0),$t=$t&&Wt.offscreen,Pt=Wt.occluded}const gi=fe||Ke.numHorizontalGlyphVertices===0&&Ke.numVerticalGlyphVertices===0,nr=Ce||Ke.numIconVertices===0;if(gi||nr?nr?gi||(ot=ot&&It):It=ot&&It:ot=It=ot&&It,It&&dn&&dn.box&&this.collisionIndex.insertCollisionBox(dn.box,F.get("text-ignore-placement"),M.bucketInstanceId,Qt&&Qt.box&&kn?kn:fn,_e.ID),ot&&Wt&&this.collisionIndex.insertCollisionBox(Wt.box,F.get("icon-ignore-placement"),M.bucketInstanceId,Kn,_e.ID),Cn&&(It&&this.collisionIndex.insertCollisionCircles(Cn.circles,F.get("text-ignore-placement"),M.bucketInstanceId,fn,_e.ID),b)){const Wn=M.bucketInstanceId;let Yn=this.collisionCircleArrays[Wn];Yn===void 0&&(Yn=this.collisionCircleArrays[Wn]=new jo);for(let bn=0;bn<Cn.circles.length;bn+=4)Yn.circles.push(Cn.circles[bn+0]),Yn.circles.push(Cn.circles[bn+1]),Yn.circles.push(Cn.circles[bn+2]),Yn.circles.push(Cn.collisionDetected?1:0)}const hr=M.projection.name!=="globe";Ge=Ge&&(hr||!mt),Je=Je&&(hr||!Pt),this.placements[Ke.crossTileID]=new si(It||Ge,ot||Je,$t||M.justReloaded),f[Ke.crossTileID]=!0};if(Le){const Ke=M.getSortedSymbolIndexes(this.transform.angle);for(let pt=Ke.length-1;pt>=0;--pt){const _t=Ke[pt];kt(M.symbolInstances.get(_t),_t,M.collisionArrays[_t])}}else for(let Ke=l.symbolInstanceStart;Ke<l.symbolInstanceEnd;Ke++)kt(M.symbolInstances.get(Ke),Ke,M.collisionArrays[Ke]);if(b&&M.bucketInstanceId in this.collisionCircleArrays){const Ke=this.collisionCircleArrays[M.bucketInstanceId];r.invert(Ke.invProjMatrix,j),Ke.viewportMatrix=this.collisionIndex.getViewportMatrix()}M.justReloaded=!1}markUsedJustification(l,f,b,R){let M;M=R===r.WritingMode.vertical?b.verticalPlacedTextSymbolIndex:{left:b.leftJustifiedTextSymbolIndex,center:b.centerJustifiedTextSymbolIndex,right:b.rightJustifiedTextSymbolIndex}[r.getAnchorJustification(f)];const F=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex,b.verticalPlacedTextSymbolIndex];for(const j of F)j>=0&&(l.text.placedSymbolArray.get(j).crossTileID=M>=0&&j!==M?0:b.crossTileID)}markUsedOrientation(l,f,b){const R=f===r.WritingMode.horizontal||f===r.WritingMode.horizontalOnly?f:0,M=f===r.WritingMode.vertical?f:0,F=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex];for(const j of F)l.text.placedSymbolArray.get(j).placedOrientation=R;b.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(b.verticalPlacedTextSymbolIndex).placedOrientation=M)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const f=this.prevPlacement;let b=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;const R=f?f.symbolFadeChange(l):1,M=f?f.opacities:{},F=f?f.variableOffsets:{},j=f?f.placedOrientations:{};for(const q in this.placements){const Y=this.placements[q],X=M[q];X?(this.opacities[q]=new kr(X,R,Y.text,Y.icon,null,Y.clipped),b=b||Y.text!==X.text.placed||Y.icon!==X.icon.placed):(this.opacities[q]=new kr(null,R,Y.text,Y.icon,Y.skipFade,Y.clipped),b=b||Y.text||Y.icon)}for(const q in M){const Y=M[q];if(!this.opacities[q]){const X=new kr(Y,R,!1,!1);X.isHidden()||(this.opacities[q]=X,b=b||Y.text.placed||Y.icon.placed)}}for(const q in F)this.variableOffsets[q]||!this.opacities[q]||this.opacities[q].isHidden()||(this.variableOffsets[q]=F[q]);for(const q in j)this.placedOrientations[q]||!this.opacities[q]||this.opacities[q].isHidden()||(this.placedOrientations[q]=j[q]);b?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:l)}updateLayerOpacities(l,f){const b={};for(const R of f){const M=R.getBucket(l);M&&R.latestFeatureIndex&&l.id===M.layerIds[0]&&this.updateBucketOpacities(M,b,R.collisionBoxArray)}}updateBucketOpacities(l,f,b){l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const R=l.layers[0].layout,M=!!l.layers[0].dynamicFilter(),F=new kr(null,0,!1,!1,!0),j=R.get("text-allow-overlap"),q=R.get("icon-allow-overlap"),Y=R.get("text-variable-anchor"),X=R.get("text-rotation-alignment")==="map",te=R.get("text-pitch-alignment")==="map",ue=R.get("icon-text-fit")!=="none",ye=new kr(null,0,j&&(q||!l.hasIconData()||R.get("icon-optional")),q&&(j||!l.hasTextData()||R.get("text-optional")),!0);!l.collisionArrays&&b&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(b);const he=(_e,fe,Ce)=>{for(let be=0;be<fe/4;be++)_e.opacityVertexArray.emplaceBack(Ce)};let me=0;for(let _e=0;_e<l.symbolInstances.length;_e++){const fe=l.symbolInstances.get(_e),{numHorizontalGlyphVertices:Ce,numVerticalGlyphVertices:be,crossTileID:Be}=fe;let Oe=this.opacities[Be];f[Be]?Oe=F:Oe||(Oe=ye,this.opacities[Be]=Oe),f[Be]=!0;const $e=Ce>0||be>0,De=fe.numIconVertices>0,Le=this.placedOrientations[fe.crossTileID],Ge=Le===r.WritingMode.vertical,Je=Le===r.WritingMode.horizontal||Le===r.WritingMode.horizontalOnly;if(!$e&&!De||Oe.isHidden()||me++,$e){const kt=jr(Oe.text);he(l.text,Ce,Ge?er:kt),he(l.text,be,Je?er:kt);const Ke=Oe.text.isHidden();[fe.rightJustifiedTextSymbolIndex,fe.centerJustifiedTextSymbolIndex,fe.leftJustifiedTextSymbolIndex].forEach(It=>{It>=0&&(l.text.placedSymbolArray.get(It).hidden=Ke||Ge?1:0)}),fe.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(fe.verticalPlacedTextSymbolIndex).hidden=Ke||Je?1:0);const pt=this.variableOffsets[fe.crossTileID];pt&&this.markUsedJustification(l,pt.anchor,fe,Le);const _t=this.placedOrientations[fe.crossTileID];_t&&(this.markUsedJustification(l,"left",fe,_t),this.markUsedOrientation(l,_t,fe))}if(De){const kt=jr(Oe.icon);fe.placedIconSymbolIndex>=0&&(he(l.icon,fe.numIconVertices,Ge?er:kt),l.icon.placedSymbolArray.get(fe.placedIconSymbolIndex).hidden=Oe.icon.isHidden()),fe.verticalPlacedIconSymbolIndex>=0&&(he(l.icon,fe.numVerticalIconVertices,Je?er:kt),l.icon.placedSymbolArray.get(fe.verticalPlacedIconSymbolIndex).hidden=Oe.icon.isHidden())}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const kt=l.collisionArrays[_e];if(kt){let Ke=new r.pointGeometry(0,0),pt=!0;if(kt.textBox||kt.verticalTextBox){if(Y){const It=this.variableOffsets[Be];It?(Ke=fi(It.anchor,It.width,It.height,It.textOffset,It.textScale),X&&Ke._rotate(te?this.transform.angle:-this.transform.angle)):pt=!1}M&&(pt=!Oe.clipped),kt.textBox&&Gi(l.textCollisionBox.collisionVertexArray,Oe.text.placed,!pt||Ge,Ke.x,Ke.y),kt.verticalTextBox&&Gi(l.textCollisionBox.collisionVertexArray,Oe.text.placed,!pt||Je,Ke.x,Ke.y)}const _t=pt&&Boolean(!Je&&kt.verticalIconBox);kt.iconBox&&Gi(l.iconCollisionBox.collisionVertexArray,Oe.icon.placed,_t,ue?Ke.x:0,ue?Ke.y:0),kt.verticalIconBox&&Gi(l.iconCollisionBox.collisionVertexArray,Oe.icon.placed,!_t,ue?Ke.x:0,ue?Ke.y:0)}}}if(l.fullyClipped=me===0,l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){const _e=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=_e.invProjMatrix,l.placementViewportMatrix=_e.viewportMatrix,l.collisionCircleArray=_e.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,f){const b=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*b>l}setStale(){this.stale=!0}}function Gi(_,l,f,b,R){_.emplaceBack(l?1:0,f?1:0,b||0,R||0),_.emplaceBack(l?1:0,f?1:0,b||0,R||0),_.emplaceBack(l?1:0,f?1:0,b||0,R||0),_.emplaceBack(l?1:0,f?1:0,b||0,R||0)}const Ho=Math.pow(2,25),Ls=Math.pow(2,24),Lu=Math.pow(2,17),Pa=Math.pow(2,16),uo=Math.pow(2,9),Ou=Math.pow(2,8),sc=Math.pow(2,1);function jr(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const l=_.placed?1:0,f=Math.floor(127*_.opacity);return f*Ho+l*Ls+f*Lu+l*Pa+f*uo+l*Ou+f*sc+l}const er=0;class Os{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&l.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,f,b,R,M){const F=this._bucketParts;for(;this._currentTileIndex<l.length;)if(f.getBucketParts(F,R,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,M())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,F.sort((j,q)=>j.sortKey-q.sortKey));this._currentPartIndex<F.length;){const j=F[this._currentPartIndex];if(f.placeLayerBucketPart(j,this._seenCrossTileIDs,b,j.symbolInstanceStart===0),this._currentPartIndex++,M())return!0}return!1}}class Rr{constructor(l,f,b,R,M,F,j,q){this.placement=new Oa(l,M,F,j,q),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=b,this._showCollisionBoxes=R,this._done=!1}isDone(){return this._done}continuePlacement(l,f,b){const R=r.exported.now(),M=()=>{const F=r.exported.now()-R;return!this._forceFullPlacement&&F>2};for(;this._currentPlacementIndex>=0;){const F=f[l[this._currentPlacementIndex]],j=this.placement.collisionIndex.transform.zoom;if(F.type==="symbol"&&(!F.minzoom||F.minzoom<=j)&&(!F.maxzoom||F.maxzoom>j)){if(this._inProgressLayer||(this._inProgressLayer=new Os(F)),this._inProgressLayer.continuePlacement(b[F.source],this.placement,this._showCollisionBoxes,F,M))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const Da=512/r.EXTENT/2;class Ps{constructor(l,f,b){this.tileID=l,this.indexedSymbolInstances={},this.bucketInstanceId=b;for(let R=0;R<f.length;R++){const M=f.get(R),F=M.key;this.indexedSymbolInstances[F]||(this.indexedSymbolInstances[F]=[]),this.indexedSymbolInstances[F].push({crossTileID:M.crossTileID,coord:this.getScaledCoordinates(M,l)})}}getScaledCoordinates(l,f){const b=Da/Math.pow(2,f.canonical.z-this.tileID.canonical.z);return{x:Math.floor((f.canonical.x*r.EXTENT+l.tileAnchorX)*b),y:Math.floor((f.canonical.y*r.EXTENT+l.tileAnchorY)*b)}}findMatches(l,f,b){const R=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z);for(let M=0;M<l.length;M++){const F=l.get(M);if(F.crossTileID)continue;const j=this.indexedSymbolInstances[F.key];if(!j)continue;const q=this.getScaledCoordinates(F,f);for(const Y of j)if(Math.abs(Y.coord.x-q.x)<=R&&Math.abs(Y.coord.y-q.y)<=R&&!b[Y.crossTileID]){b[Y.crossTileID]=!0,F.crossTileID=Y.crossTileID;break}}}}class Pu{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Du{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const f=Math.round((l-this.lng)/360);if(f!==0)for(const b in this.indexes){const R=this.indexes[b],M={};for(const F in R){const j=R[F];j.tileID=j.tileID.unwrapTo(j.tileID.wrap+f),M[j.tileID.key]=j}this.indexes[b]=M}this.lng=l}addBucket(l,f,b){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let M=0;M<f.symbolInstances.length;M++)f.symbolInstances.get(M).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const R=this.usedCrossTileIDs[l.overscaledZ];for(const M in this.indexes){const F=this.indexes[M];if(Number(M)>l.overscaledZ)for(const j in F){const q=F[j];q.tileID.isChildOf(l)&&q.findMatches(f.symbolInstances,l,R)}else{const j=F[l.scaledTo(Number(M)).key];j&&j.findMatches(f.symbolInstances,l,R)}}for(let M=0;M<f.symbolInstances.length;M++){const F=f.symbolInstances.get(M);F.crossTileID||(F.crossTileID=b.generate(),R[F.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new Ps(l,f.symbolInstances,f.bucketInstanceId),!0}removeBucketCrossTileIDs(l,f){for(const b in f.indexedSymbolInstances)for(const R of f.indexedSymbolInstances[b])delete this.usedCrossTileIDs[l][R.crossTileID]}removeStaleBuckets(l){let f=!1;for(const b in this.indexes){const R=this.indexes[b];for(const M in R)l[R[M].bucketInstanceId]||(this.removeBucketCrossTileIDs(b,R[M]),delete R[M],f=!0)}return f}}class Ds{constructor(){this.layerIndexes={},this.crossTileIDs=new Pu,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,f,b,R){let M=this.layerIndexes[l.id];M===void 0&&(M=this.layerIndexes[l.id]=new Du);let F=!1;const j={};R.name!=="globe"&&M.handleWrapJump(b);for(const q of f){const Y=q.getBucket(l);Y&&l.id===Y.layerIds[0]&&(Y.bucketInstanceId||(Y.bucketInstanceId=++this.maxBucketInstanceId),M.addBucket(q.tileID,Y,this.crossTileIDs)&&(F=!0),j[Y.bucketInstanceId]=!0)}return M.removeStaleBuckets(j)&&(F=!0),F}pruneUnusedLayers(l){const f={};l.forEach(b=>{f[b]=!0});for(const b in this.layerIndexes)f[b]||delete this.layerIndexes[b]}}const Bs=(_,l)=>r.emitValidationErrors(_,l&&l.filter(f=>f.identifier!=="source.canvas")),ac=r.pick(tn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Bu=r.pick(tn,["setCenter","setZoom","setBearing","setPitch"]),lc={version:8,layers:[],sources:{}},zu={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class qi extends r.Evented{constructor(l,f={}){super(),this.map=l,this.dispatcher=new en(Ln(),this),this.imageManager=new de,this.imageManager.setEventedParent(this),this.glyphManager=new r.GlyphManager(l._requestManager,f.localFontFamily?r.LocalGlyphMode.all:f.localIdeographFontFamily?r.LocalGlyphMode.ideographs:r.LocalGlyphMode.none,f.localFontFamily||f.localIdeographFontFamily),this.lineAtlas=new r.LineAtlas(256,512),this.crossTileSymbolIndex=new Ds,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new r.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",r.getReferrer());const b=this;this._rtlTextPluginCallback=qi.registerForPluginStateChange(R=>{b.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:R.pluginStatus,pluginURL:R.pluginURL},(M,F)=>{if(r.triggerPluginCompletionEvent(M),F&&F.every(j=>j))for(const j in b._sourceCaches){const q=b._sourceCaches[j],Y=q.getSource().type;Y!=="vector"&&Y!=="geojson"||q.reload()}})}),this.on("data",R=>{if(R.dataType!=="source"||R.sourceDataType!=="metadata")return;const M=this.getSource(R.sourceId);if(M&&M.vectorLayerIds)for(const F in this._layers){const j=this._layers[F];j.source===M.id&&this._validateLayer(j)}})}loadURL(l,f={}){this.fire(new r.Event("dataloading",{dataType:"style"}));const b=typeof f.validate=="boolean"?f.validate:!r.isMapboxURL(l);l=this.map._requestManager.normalizeStyleURL(l,f.accessToken);const R=this.map._requestManager.transformRequest(l,r.ResourceType.Style);this._request=r.getJSON(R,(M,F)=>{this._request=null,M?this.fire(new r.ErrorEvent(M)):F&&this._load(F,b)})}loadJSON(l,f={}){this.fire(new r.Event("dataloading",{dataType:"style"})),this._request=r.exported.frame(()=>{this._request=null,this._load(l,f.validate!==!1)})}loadEmpty(){this.fire(new r.Event("dataloading",{dataType:"style"})),this._load(lc,!1)}_updateLayerCount(l,f){const b=f?1:-1;l.is3D()&&(this._num3DLayers+=b),l.type==="circle"&&(this._numCircleLayers+=b),l.type==="symbol"&&(this._numSymbolLayers+=b)}_load(l,f){if(f&&Bs(this,r.validateStyle(l)))return;this._loaded=!0,this.stylesheet=r.clone$1(l),this._updateMapProjection();for(const R in l.sources)this.addSource(R,l.sources[R],{validate:!1});this._changed=!1,l.sprite?this._loadSprite(l.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(l.glyphs);const b=On(this.stylesheet.layers);this._order=b.map(R=>R.id),this._layers={},this._serializedLayers={};for(let R of b)R=r.createStyleLayer(R),R.setEventedParent(this,{layer:{id:R.id}}),this._layers[R.id]=R,this._serializedLayers[R.id]=R.serialize(),this._updateLayerCount(R,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Pe(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new r.Event("data",{dataType:"style"})),this.fire(new r.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(l){l?this.stylesheet.projection=l:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(l){this._spriteRequest=function(f,b,R){let M,F,j;const q=r.exported.devicePixelRatio>1?"@2x":"";let Y=r.getJSON(b.transformRequest(b.normalizeSpriteURL(f,q,".json"),r.ResourceType.SpriteJSON),(ue,ye)=>{Y=null,j||(j=ue,M=ye,te())}),X=r.getImage(b.transformRequest(b.normalizeSpriteURL(f,q,".png"),r.ResourceType.SpriteImage),(ue,ye)=>{X=null,j||(j=ue,F=ye,te())});function te(){if(j)R(j);else if(M&&F){const ue=r.exported.getImageData(F),ye={};for(const he in M){const{width:me,height:_e,x:fe,y:Ce,sdf:be,pixelRatio:Be,stretchX:Oe,stretchY:$e,content:De}=M[he],Le=new r.RGBAImage({width:me,height:_e});r.RGBAImage.copy(ue,Le,{x:fe,y:Ce},{x:0,y:0},{width:me,height:_e}),ye[he]={data:Le,pixelRatio:Be,sdf:be,stretchX:Oe,stretchY:$e,content:De}}R(null,ye)}}return{cancel(){Y&&(Y.cancel(),Y=null),X&&(X.cancel(),X=null)}}}(l,this.map._requestManager,(f,b)=>{if(this._spriteRequest=null,f)this.fire(new r.ErrorEvent(f));else if(b)for(const R in b)this.imageManager.addImage(R,b[R]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new r.Event("data",{dataType:"style"}))})}_validateLayer(l){const f=this.getSource(l.source);if(!f)return;const b=l.sourceLayer;b&&(f.type==="geojson"||f.vectorLayerIds&&f.vectorLayerIds.indexOf(b)===-1)&&this.fire(new r.ErrorEvent(new Error(`Source layer "${b}" does not exist on source "${f.id}" as specified by style layer "${l.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this._sourceCaches)if(!this._sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(l){const f=[];for(const b of l){const R=this._layers[b];R.type!=="custom"&&f.push(R.serialize())}return f}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const l in this._sourceCaches)if(this._sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(l){return!!this.terrain&&zu[l.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(l){if(!this._loaded)return;const f=this._changed;if(this._changed){const R=Object.keys(this._updatedLayers),M=Object.keys(this._removedLayers);(R.length||M.length)&&this._updateWorkerLayers(R,M);for(const F in this._updatedSources){const j=this._updatedSources[F];j==="reload"?this._reloadSource(F):j==="clear"&&this._clearSource(F)}this._updateTilesForChangedImages();for(const F in this._updatedPaintProps)this._layers[F].updateTransitions(l);this.light.updateTransitions(l),this.fog&&this.fog.updateTransitions(l),this._resetUpdates()}const b={};for(const R in this._sourceCaches){const M=this._sourceCaches[R];b[R]=M.used,M.used=!1}for(const R of this._order){const M=this._layers[R];if(M.recalculate(l,this._availableImages),!M.isHidden(l.zoom)){const j=this._getLayerSourceCache(M);j&&(j.used=!0)}const F=this.map.painter;if(F){const j=M.getProgramIds();if(!j)continue;const q=M.getProgramConfiguration(l.zoom);for(const Y of j)F.useProgram(Y,q)}}for(const R in b){const M=this._sourceCaches[R];b[R]!==M.used&&M.getSource().fire(new r.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:M.getSource().id}))}this.light.recalculate(l),this.terrain&&this.terrain.recalculate(l),this.fog&&this.fog.recalculate(l),this.z=l.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),f&&this.fire(new r.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const f in this._sourceCaches)this._sourceCaches[f].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateWorkerLayers(l,f){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(l),removedIds:f})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(l){if(this._checkLoaded(),Bs(this,r.validateStyle(l)))return!1;(l=r.clone$1(l)).layers=On(l.layers);const f=function(R,M){if(!R)return[{command:tn.setStyle,args:[M]}];let F=[];try{if(!v(R.version,M.version))return[{command:tn.setStyle,args:[M]}];v(R.center,M.center)||F.push({command:tn.setCenter,args:[M.center]}),v(R.zoom,M.zoom)||F.push({command:tn.setZoom,args:[M.zoom]}),v(R.bearing,M.bearing)||F.push({command:tn.setBearing,args:[M.bearing]}),v(R.pitch,M.pitch)||F.push({command:tn.setPitch,args:[M.pitch]}),v(R.sprite,M.sprite)||F.push({command:tn.setSprite,args:[M.sprite]}),v(R.glyphs,M.glyphs)||F.push({command:tn.setGlyphs,args:[M.glyphs]}),v(R.transition,M.transition)||F.push({command:tn.setTransition,args:[M.transition]}),v(R.light,M.light)||F.push({command:tn.setLight,args:[M.light]}),v(R.fog,M.fog)||F.push({command:tn.setFog,args:[M.fog]}),v(R.projection,M.projection)||F.push({command:tn.setProjection,args:[M.projection]});const j={},q=[];(function(te,ue,ye,he){let me;for(me in ue=ue||{},te=te||{})te.hasOwnProperty(me)&&(ue.hasOwnProperty(me)||zi(me,ye,he));for(me in ue)ue.hasOwnProperty(me)&&(te.hasOwnProperty(me)?v(te[me],ue[me])||(te[me].type==="geojson"&&ue[me].type==="geojson"&&Sr(te,ue,me)?ye.push({command:tn.setGeoJSONSourceData,args:[me,ue[me].data]}):ii(me,ue,ye,he)):st(me,ue,ye))})(R.sources,M.sources,q,j);const Y=[];R.layers&&R.layers.forEach(te=>{te.source&&j[te.source]?F.push({command:tn.removeLayer,args:[te.id]}):Y.push(te)});let X=R.terrain;X&&j[X.source]&&(F.push({command:tn.setTerrain,args:[void 0]}),X=void 0),F=F.concat(q),v(X,M.terrain)||F.push({command:tn.setTerrain,args:[M.terrain]}),function(te,ue,ye){ue=ue||[];const he=(te=te||[]).map(Xi),me=ue.map(Xi),_e=te.reduce(Ms,{}),fe=ue.reduce(Ms,{}),Ce=he.slice(),be=Object.create(null);let Be,Oe,$e,De,Le,Ge,Je;for(Be=0,Oe=0;Be<he.length;Be++)$e=he[Be],fe.hasOwnProperty($e)?Oe++:(ye.push({command:tn.removeLayer,args:[$e]}),Ce.splice(Ce.indexOf($e,Oe),1));for(Be=0,Oe=0;Be<me.length;Be++)$e=me[me.length-1-Be],Ce[Ce.length-1-Be]!==$e&&(_e.hasOwnProperty($e)?(ye.push({command:tn.removeLayer,args:[$e]}),Ce.splice(Ce.lastIndexOf($e,Ce.length-Oe),1)):Oe++,Ge=Ce[Ce.length-Be],ye.push({command:tn.addLayer,args:[fe[$e],Ge]}),Ce.splice(Ce.length-Be,0,$e),be[$e]=!0);for(Be=0;Be<me.length;Be++)if($e=me[Be],De=_e[$e],Le=fe[$e],!be[$e]&&!v(De,Le))if(v(De.source,Le.source)&&v(De["source-layer"],Le["source-layer"])&&v(De.type,Le.type)){for(Je in Ns(De.layout,Le.layout,ye,$e,null,tn.setLayoutProperty),Ns(De.paint,Le.paint,ye,$e,null,tn.setPaintProperty),v(De.filter,Le.filter)||ye.push({command:tn.setFilter,args:[$e,Le.filter]}),v(De.minzoom,Le.minzoom)&&v(De.maxzoom,Le.maxzoom)||ye.push({command:tn.setLayerZoomRange,args:[$e,Le.minzoom,Le.maxzoom]}),De)De.hasOwnProperty(Je)&&Je!=="layout"&&Je!=="paint"&&Je!=="filter"&&Je!=="metadata"&&Je!=="minzoom"&&Je!=="maxzoom"&&(Je.indexOf("paint.")===0?Ns(De[Je],Le[Je],ye,$e,Je.slice(6),tn.setPaintProperty):v(De[Je],Le[Je])||ye.push({command:tn.setLayerProperty,args:[$e,Je,Le[Je]]}));for(Je in Le)Le.hasOwnProperty(Je)&&!De.hasOwnProperty(Je)&&Je!=="layout"&&Je!=="paint"&&Je!=="filter"&&Je!=="metadata"&&Je!=="minzoom"&&Je!=="maxzoom"&&(Je.indexOf("paint.")===0?Ns(De[Je],Le[Je],ye,$e,Je.slice(6),tn.setPaintProperty):v(De[Je],Le[Je])||ye.push({command:tn.setLayerProperty,args:[$e,Je,Le[Je]]}))}else ye.push({command:tn.removeLayer,args:[$e]}),Ge=Ce[Ce.lastIndexOf($e)+1],ye.push({command:tn.addLayer,args:[Le,Ge]})}(Y,M.layers,F)}catch(j){console.warn("Unable to compute style diff:",j),F=[{command:tn.setStyle,args:[M]}]}return F}(this.serialize(),l).filter(R=>!(R.command in Bu));if(f.length===0)return!1;const b=f.filter(R=>!(R.command in ac));if(b.length>0)throw new Error(`Unimplemented: ${b.map(R=>R.command).join(", ")}.`);return f.forEach(R=>{R.command!=="setTransition"&&R.command!=="setProjection"&&this[R.command].apply(this,R.args)}),this.stylesheet=l,this._updateMapProjection(),!0}addImage(l,f){return this.getImage(l)?this.fire(new r.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(l,f),this._afterImageUpdated(l),this)}updateImage(l,f){this.imageManager.updateImage(l,f)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){return this.getImage(l)?(this.imageManager.removeImage(l),this._afterImageUpdated(l),this):this.fire(new r.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new r.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(l,f,b={}){if(this._checkLoaded(),this.getSource(l)!==void 0)throw new Error("There is already a source with this ID");if(!f.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(f).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(f.type)>=0&&this._validate(r.validateSource,`sources.${l}`,f,null,b))return;this.map&&this.map._collectResourceTiming&&(f.collectResourceTiming=!0);const R=Ye(l,f,this.dispatcher,this);R.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(l),source:R.serialize(),sourceId:l}));const M=F=>{const j=(F?"symbol:":"other:")+l,q=this._sourceCaches[j]=new r.SourceCache(j,R,F);(F?this._symbolSourceCaches:this._otherSourceCaches)[l]=q,q.style=this,q.onAdd(this.map)};M(!1),f.type!=="vector"&&f.type!=="geojson"||M(!0),R.onAdd&&R.onAdd(this.map),this._changed=!0}removeSource(l){this._checkLoaded();const f=this.getSource(l);if(!f)throw new Error("There is no source with this ID");for(const R in this._layers)if(this._layers[R].source===l)return this.fire(new r.ErrorEvent(new Error(`Source "${l}" cannot be removed while layer "${R}" is using it.`)));if(this.terrain&&this.terrain.get().source===l)return this.fire(new r.ErrorEvent(new Error(`Source "${l}" cannot be removed while terrain is using it.`)));const b=this._getSourceCaches(l);for(const R of b)delete this._sourceCaches[R.id],delete this._updatedSources[R.id],R.fire(new r.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:R.getSource().id})),R.setEventedParent(null),R.clearTiles();return delete this._otherSourceCaches[l],delete this._symbolSourceCaches[l],f.setEventedParent(null),f.onRemove&&f.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(l,f){this._checkLoaded(),this.getSource(l).setData(f),this._changed=!0}getSource(l){const f=this._getSourceCache(l);return f&&f.getSource()}addLayer(l,f,b={}){this._checkLoaded();const R=l.id;if(this.getLayer(R))return void this.fire(new r.ErrorEvent(new Error(`Layer with id "${R}" already exists on this map`)));let M;if(l.type==="custom"){if(Bs(this,r.validateCustomStyleLayer(l)))return;M=r.createStyleLayer(l)}else{if(typeof l.source=="object"&&(this.addSource(R,l.source),l=r.clone$1(l),l=r.extend(l,{source:R})),this._validate(r.validateLayer,`layers.${R}`,l,{arrayIndex:-1},b))return;M=r.createStyleLayer(l),this._validateLayer(M),M.setEventedParent(this,{layer:{id:R}}),this._serializedLayers[M.id]=M.serialize(),this._updateLayerCount(M,!0)}const F=f?this._order.indexOf(f):this._order.length;if(f&&F===-1)return void this.fire(new r.ErrorEvent(new Error(`Layer with id "${f}" does not exist on this map.`)));this._order.splice(F,0,R),this._layerOrderChanged=!0,this._layers[R]=M;const j=this._getLayerSourceCache(M);if(this._removedLayers[R]&&M.source&&j&&M.type!=="custom"){const q=this._removedLayers[R];delete this._removedLayers[R],q.type!==M.type?this._updatedSources[M.source]="clear":(this._updatedSources[M.source]="reload",j.pause())}this._updateLayer(M),M.onAdd&&M.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(l,f){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new r.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===f)return;const b=this._order.indexOf(l);this._order.splice(b,1);const R=f?this._order.indexOf(f):this._order.length;f&&R===-1?this.fire(new r.ErrorEvent(new Error(`Layer with id "${f}" does not exist on this map.`))):(this._order.splice(R,0,l),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(l){this._checkLoaded();const f=this._layers[l];if(!f)return void this.fire(new r.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be removed.`)));f.setEventedParent(null),this._updateLayerCount(f,!1);const b=this._order.indexOf(l);this._order.splice(b,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=f,delete this._layers[l],delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],f.onRemove&&f.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(l){return this._layers[l]}hasLayer(l){return l in this._layers}hasLayerType(l){for(const f in this._layers)if(this._layers[f].type===l)return!0;return!1}setLayerZoomRange(l,f,b){this._checkLoaded();const R=this.getLayer(l);R?R.minzoom===f&&R.maxzoom===b||(f!=null&&(R.minzoom=f),b!=null&&(R.maxzoom=b),this._updateLayer(R)):this.fire(new r.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(l,f,b={}){this._checkLoaded();const R=this.getLayer(l);if(R){if(!v(R.filter,f))return f==null?(R.filter=void 0,void this._updateLayer(R)):void(this._validate(r.validateFilter,`layers.${R.id}.filter`,f,{layerType:R.type},b)||(R.filter=r.clone$1(f),this._updateLayer(R)))}else this.fire(new r.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be filtered.`)))}getFilter(l){const f=this.getLayer(l);return f&&r.clone$1(f.filter)}setLayoutProperty(l,f,b,R={}){this._checkLoaded();const M=this.getLayer(l);M?v(M.getLayoutProperty(f),b)||(M.setLayoutProperty(f,b,R),this._updateLayer(M)):this.fire(new r.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(l,f){const b=this.getLayer(l);if(b)return b.getLayoutProperty(f);this.fire(new r.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style.`)))}setPaintProperty(l,f,b,R={}){this._checkLoaded();const M=this.getLayer(l);M?v(M.getPaintProperty(f),b)||(M.setPaintProperty(f,b,R)&&this._updateLayer(M),this._changed=!0,this._updatedPaintProps[l]=!0):this.fire(new r.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(l,f){const b=this.getLayer(l);return b&&b.getPaintProperty(f)}setFeatureState(l,f){this._checkLoaded();const b=l.source,R=l.sourceLayer,M=this.getSource(b);if(!M)return void this.fire(new r.ErrorEvent(new Error(`The source '${b}' does not exist in the map's style.`)));const F=M.type;if(F==="geojson"&&R)return void this.fire(new r.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(F==="vector"&&!R)return void this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));l.id===void 0&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided.")));const j=this._getSourceCaches(b);for(const q of j)q.setFeatureState(R,l.id,f)}removeFeatureState(l,f){this._checkLoaded();const b=l.source,R=this.getSource(b);if(!R)return void this.fire(new r.ErrorEvent(new Error(`The source '${b}' does not exist in the map's style.`)));const M=R.type,F=M==="vector"?l.sourceLayer:void 0;if(M==="vector"&&!F)return void this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(f&&typeof l.id!="string"&&typeof l.id!="number")return void this.fire(new r.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const j=this._getSourceCaches(b);for(const q of j)q.removeFeatureState(F,l.id,f)}getFeatureState(l){this._checkLoaded();const f=l.source,b=l.sourceLayer,R=this.getSource(f);if(R){if(R.type!=="vector"||b)return l.id===void 0&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(f)[0].getFeatureState(b,l.id);this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new r.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)))}getTransition(){return r.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const l={};for(const f in this._sourceCaches){const b=this._sourceCaches[f].getSource();l[b.id]||(l[b.id]=b.serialize())}return r.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:l,layers:this._serializeLayers(this._order)},f=>f!==void 0)}_updateLayer(l){this._updatedLayers[l.id]=!0;const f=this._getLayerSourceCache(l);l.source&&!this._updatedSources[l.source]&&f&&f.getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",f.pause()),this._changed=!0,l.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(l){const f=F=>this._layers[F].type==="fill-extrusion",b={},R=[];for(let F=this._order.length-1;F>=0;F--){const j=this._order[F];if(f(j)){b[j]=F;for(const q of l){const Y=q[j];if(Y)for(const X of Y)R.push(X)}}}R.sort((F,j)=>j.intersectionZ-F.intersectionZ);const M=[];for(let F=this._order.length-1;F>=0;F--){const j=this._order[F];if(f(j))for(let q=R.length-1;q>=0;q--){const Y=R[q].feature;if(b[Y.layer.id]<F)break;M.push(Y),R.pop()}else for(const q of l){const Y=q[j];if(Y)for(const X of Y)M.push(X.feature)}}return M}queryRenderedFeatures(l,f,b){f&&f.filter&&this._validate(r.validateFilter,"queryRenderedFeatures.filter",f.filter,null,f);const R={};if(f&&f.layers){if(!Array.isArray(f.layers))return this.fire(new r.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const q of f.layers){const Y=this._layers[q];if(!Y)return this.fire(new r.ErrorEvent(new Error(`The layer '${q}' does not exist in the map's style and cannot be queried for features.`))),[];R[Y.source]=!0}}const M=[];f.availableImages=this._availableImages;const F=f&&f.layers?f.layers.some(q=>{const Y=this.getLayer(q);return Y&&Y.is3D()}):this.has3DLayers(),j=tt.createFromScreenPoints(l,b);for(const q in this._sourceCaches){const Y=this._sourceCaches[q].getSource().id;f.layers&&!R[Y]||M.push(zt(this._sourceCaches[q],this._layers,this._serializedLayers,j,f,b,F,!!this.map._showQueryGeometry))}return this.placement&&M.push(function(q,Y,X,te,ue,ye,he){const me={},_e=ye.queryRenderedSymbols(te),fe=[];for(const Ce of Object.keys(_e).map(Number))fe.push(he[Ce]);fe.sort(nn);for(const Ce of fe){const be=Ce.featureIndex.lookupSymbolFeatures(_e[Ce.bucketInstanceId],Y,Ce.bucketIndex,Ce.sourceLayerIndex,ue.filter,ue.layers,ue.availableImages,q);for(const Be in be){const Oe=me[Be]=me[Be]||[],$e=be[Be];$e.sort((De,Le)=>{const Ge=Ce.featureSortOrder;if(Ge){const Je=Ge.indexOf(De.featureIndex);return Ge.indexOf(Le.featureIndex)-Je}return Le.featureIndex-De.featureIndex});for(const De of $e)Oe.push(De)}}for(const Ce in me)me[Ce].forEach(be=>{const Be=be.feature,Oe=X(q[Ce]).getFeatureState(Be.layer["source-layer"],Be.id);Be.source=Be.layer.source,Be.layer["source-layer"]&&(Be.sourceLayer=Be.layer["source-layer"]),Be.state=Oe});return me}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),j.screenGeometry,f,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(M)}querySourceFeatures(l,f){f&&f.filter&&this._validate(r.validateFilter,"querySourceFeatures.filter",f.filter,null,f);const b=this._getSourceCaches(l);let R=[];for(const M of b)R=R.concat(St(M,f));return R}addSourceType(l,f,b){return qi.getSourceType(l)?b(new Error(`A source type called "${l}" already exists.`)):(qi.setSourceType(l,f),f.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:f.workerSourceURL},b):b(null,null))}getLight(){return this.light.getLight()}setLight(l,f={}){this._checkLoaded();const b=this.light.getLight();let R=!1;for(const F in l)if(!v(l[F],b[F])){R=!0;break}if(!R)return;const M=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(l,f),this.light.updateTransitions(M)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(l,f=1){if(this._checkLoaded(),!l)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(f===1){if(typeof l.source=="object"){const b="terrain-dem-src";this.addSource(b,l.source),l=r.clone$1(l),l=r.extend(l,{source:b})}if(this._validate(r.validateTerrain,"terrain",l))return}if(!this.terrain||this.terrain&&f!==this.terrain.drapeRenderMode)this._createTerrain(l,f);else{const b=this.terrain,R=b.get();for(const M of Object.keys(r.spec.terrain))!l.hasOwnProperty(M)&&r.spec.terrain[M].default&&(l[M]=r.spec.terrain[M].default);for(const M in l)if(!v(l[M],R[M])){b.set(l),this.stylesheet.terrain=l;const F=this._setTransitionParameters({duration:0});b.updateTransitions(F);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(l){const f=this.fog=new Zt(l,this.map.transform);this.stylesheet.fog=l;const b=this._setTransitionParameters({duration:0});f.updateTransitions(b)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const l of this.map._markers)l._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(l){if(this._checkLoaded(),!l)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const f=this.fog,b=f.get();Object.keys(l).length===0&&f.set(l);for(const R in l)if(!v(l[R],b[R])){f.set(l),this.stylesheet.fog=l;const M=this._setTransitionParameters({duration:0});f.updateTransitions(M);break}}else this._createFog(l);this._markersNeedUpdate=!0}_setTransitionParameters(l){return{now:r.exported.now(),transition:r.extend(l,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const l=this._order.filter(b=>this.isLayerDraped(this._layers[b])),f=this._order.filter(b=>!this.isLayerDraped(this._layers[b]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...l),this._drapedFirstOrder.push(...f)}_createTerrain(l,f){const b=this.terrain=new Me(l,f);this.stylesheet.terrain=l,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const R=this._setTransitionParameters({duration:0});b.updateTransitions(R)}_force3DLayerUpdate(){for(const l in this._layers){const f=this._layers[l];f.type==="fill-extrusion"&&this._updateLayer(f)}}_forceSymbolLayerUpdate(){for(const l in this._layers){const f=this._layers[l];f.type==="symbol"&&this._updateLayer(f)}}_validate(l,f,b,R,M={}){return(!M||M.validate!==!1)&&Bs(this,l.call(r.validateStyle,r.extend({key:f,style:this.serialize(),value:b,styleSpec:r.spec},R)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),r.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this._sourceCaches)this._sourceCaches[l].clearTiles(),this._sourceCaches[l].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(l){const f=this._getSourceCaches(l);for(const b of f)b.clearTiles()}_reloadSource(l){const f=this._getSourceCaches(l);for(const b of f)b.resume(),b.reload()}_updateSources(l){for(const f in this._sourceCaches)this._sourceCaches[f].update(l)}_generateCollisionBoxes(){for(const l in this._sourceCaches){const f=this._sourceCaches[l];f.resume(),f.reload()}}_updatePlacement(l,f,b,R,M=!1){let F=!1,j=!1;const q={};for(const Y of this._order){const X=this._layers[Y];if(X.type!=="symbol")continue;if(!q[X.source]){const ue=this._getLayerSourceCache(X);if(!ue)continue;q[X.source]=ue.getRenderableIds(!0).map(ye=>ue.getTileByID(ye)).sort((ye,he)=>he.tileID.overscaledZ-ye.tileID.overscaledZ||(ye.tileID.isLessThan(he.tileID)?-1:1))}const te=this.crossTileSymbolIndex.addLayer(X,q[X.source],l.center.lng,l.projection);F=F||te}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),M=M||this._layerOrderChanged||b===0,this._layerOrderChanged&&this.fire(new r.Event("neworder")),(M||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(r.exported.now(),l.zoom))&&(this.pauseablePlacement=new Rr(l,this._order,M,f,b,R,this.placement,this.fog&&l.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,q),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(r.exported.now()),j=!0),F&&this.pauseablePlacement.placement.setStale()),j||F)for(const Y of this._order){const X=this._layers[Y];X.type==="symbol"&&this.placement.updateLayerOpacities(X,q[X.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(r.exported.now())}_releaseSymbolFadeTiles(){for(const l in this._sourceCaches)this._sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,f,b){this.imageManager.getImages(f.icons,b),this._updateTilesForChangedImages();const R=M=>{M&&M.setDependencies(f.tileID.key,f.type,f.icons)};R(this._otherSourceCaches[f.source]),R(this._symbolSourceCaches[f.source])}getGlyphs(l,f,b){this.glyphManager.getGlyphs(f.stacks,b)}getResource(l,f,b){return r.makeRequest(f,b)}_getSourceCache(l){return this._otherSourceCaches[l]}_getLayerSourceCache(l){return l.type==="symbol"?this._symbolSourceCaches[l.source]:this._otherSourceCaches[l.source]}_getSourceCaches(l){const f=[];return this._otherSourceCaches[l]&&f.push(this._otherSourceCaches[l]),this._symbolSourceCaches[l]&&f.push(this._symbolSourceCaches[l]),f}_isSourceCacheLoaded(l){const f=this._getSourceCaches(l);return f.length===0?(this.fire(new r.ErrorEvent(new Error(`There is no source with ID '${l}'`))),!1):f.every(b=>b.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}qi.getSourceType=function(_){return je[_]},qi.setSourceType=function(_,l){je[_]=l},qi.registerForPluginStateChange=r.registerForPluginStateChange;var Ba=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,za="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Fa=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,Va=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,po=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let zs={},Gr={};const $r=[];qr(Ba,$r),qr(Fa,$r),qr(Va,$r),qr(po,$r),zs=$n("",Fa),Gr=$n(po,Va);const Ko=$n(`
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),Fs=Ba,Vs=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var Us={background:$n(`uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:$n(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:$n(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);vec4 world_center=vec4(pos,1);
#else 
mat3 surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;
#else
vec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:$n("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:$n(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
vec3 pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:$n(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:$n("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:$n("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:$n("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:$n(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:$n(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:$n(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:$n(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:$n(`uniform lowp vec3 u_lightpos;varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
void main() {vec4 color=v_color;
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color_normal(color.xyz,normalize(v_normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying highp vec3 v_normal;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;vec3 pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_normal=normal;v_depth=gl_Position.w;
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:$n(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);
#else
vec3 p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:$n(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:$n(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:$n(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
#ifdef RENDER_LINE_GRADIENT
highp vec4 out_color=texture2D(u_gradient_image,v_uv.xy);
#else
vec4 out_color=color;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);}}
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:$n(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:$n(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:$n(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);vec4 offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
vec4 offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:$n(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);vec4 offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
vec4 offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:$n(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:$n(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=u_skirt_height*u_skirt_height*wireframeOffset;
#endif
vec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:$n(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:$n(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,za),skyboxGradient:$n(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,za),skyboxCapture:$n(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:$n(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);vec4 color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
vec4 color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idy=u_grid_matrix[1][2];float S=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=a_pos[0]*S;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;
#ifdef GLOBE_POLES
vec3 up_vector=normalize(globe_pos)*u_tile_up_scale;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:$n(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);
#ifdef PROJECTION_GLOBE_VIEW
float globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));float horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
float horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function qr(_,l){const f=_.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let b of f)if(b=b.trim(),b[0]==="#"&&b.includes("if")&&!b.includes("endif")){b=b.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const R=b.split(" ");for(const M of R)l.includes(M)||l.push(M)}}function $n(_,l){const f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,b=l.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),R={},M=[...$r];return qr(_,M),qr(l,M),{fragmentSource:_=_.replace(f,(F,j,q,Y,X)=>(R[X]=!0,j==="define"?`
#ifndef HAS_UNIFORM_u_${X}
varying ${q} ${Y} ${X};
#else
uniform ${q} ${Y} u_${X};
#endif
`:`
#ifdef HAS_UNIFORM_u_${X}
    ${q} ${Y} ${X} = u_${X};
#endif
`)),vertexSource:l=l.replace(f,(F,j,q,Y,X)=>{const te=Y==="float"?"vec2":"vec4",ue=X.match(/color/)?"color":te;return R[X]?j==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${q} ${te} a_${X};
varying ${q} ${Y} ${X};
#else
uniform ${q} ${Y} u_${X};
#endif
`:ue==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = a_${X};
#else
    ${q} ${Y} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = unpack_mix_${ue}(a_${X}, u_${X}_t);
#else
    ${q} ${Y} ${X} = u_${X};
#endif
`:j==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${q} ${te} a_${X};
#else
uniform ${q} ${Y} u_${X};
#endif
`:ue==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${q} ${Y} ${X} = a_${X};
#else
    ${q} ${Y} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${q} ${Y} ${X} = unpack_mix_${ue}(a_${X}, u_${X}_t);
#else
    ${q} ${Y} ${X} = u_${X};
#endif
`}),staticAttributes:b,usedDefines:M}}class js{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(l,f,b,R,M,F,j){this.context=l;let q=this.boundPaintVertexBuffers.length!==R.length;for(let X=0;!q&&X<R.length;X++)this.boundPaintVertexBuffers[X]!==R[X]&&(q=!0);let Y=this.boundDynamicVertexBuffers.length!==j.length;for(let X=0;!Y&&X<j.length;X++)this.boundDynamicVertexBuffers[X]!==j[X]&&(Y=!0);if(!l.extVertexArrayObject||!this.vao||this.boundProgram!==f||this.boundLayoutVertexBuffer!==b||q||Y||this.boundIndexBuffer!==M||this.boundVertexOffset!==F)this.freshBind(f,b,R,M,F,j);else{l.bindVertexArrayOES.set(this.vao);for(const X of j)X&&X.bind();M&&M.dynamicDraw&&M.bind()}}freshBind(l,f,b,R,M,F){let j;const q=l.numAttributes,Y=this.context,X=Y.gl;if(Y.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Y.extVertexArrayObject.createVertexArrayOES(),Y.bindVertexArrayOES.set(this.vao),j=0,this.boundProgram=l,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=b,this.boundIndexBuffer=R,this.boundVertexOffset=M,this.boundDynamicVertexBuffers=F;else{j=Y.currentNumAttributes||0;for(let te=q;te<j;te++)X.disableVertexAttribArray(te)}f.enableAttributes(X,l),f.bind(),f.setVertexAttribPointers(X,l,M);for(const te of b)te.enableAttributes(X,l),te.bind(),te.setVertexAttribPointers(X,l,M);for(const te of F)te&&(te.enableAttributes(X,l),te.bind(),te.setVertexAttribPointers(X,l,M));R&&R.bind(),Y.currentNumAttributes=q}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Ua(_,l){const f=Math.pow(2,l.canonical.z),b=l.canonical.y;return[new r.MercatorCoordinate(0,b/f).toLngLat().lat,new r.MercatorCoordinate(0,(b+1)/f).toLngLat().lat]}function ja(_,l,f,b,R,M,F){const j=_.context,q=j.gl,Y=f.fbo;if(!Y)return;_.prepareDrawTile();const X=_.useProgram("hillshade");j.activeTexture.set(q.TEXTURE0),q.bindTexture(q.TEXTURE_2D,Y.colorAttachment.get());const te=((me,_e,fe,Ce)=>{const be=fe.paint.get("hillshade-shadow-color"),Be=fe.paint.get("hillshade-highlight-color"),Oe=fe.paint.get("hillshade-accent-color");let $e=fe.paint.get("hillshade-illumination-direction")*(Math.PI/180);fe.paint.get("hillshade-illumination-anchor")==="viewport"&&($e-=me.transform.angle);const De=!me.options.moving;return{u_matrix:Ce||me.transform.calculateProjMatrix(_e.tileID.toUnwrapped(),De),u_image:0,u_latrange:Ua(0,_e.tileID),u_light:[fe.paint.get("hillshade-exaggeration"),$e],u_shadow:be,u_highlight:Be,u_accent:Oe}})(_,f,b,_.terrain?l.projMatrix:null);_.prepareDrawProgram(j,X,l.toUnwrapped());const{tileBoundsBuffer:ue,tileBoundsIndexBuffer:ye,tileBoundsSegments:he}=_.getTileBoundsBuffers(f);X.draw(j,q.TRIANGLES,R,M,F,r.CullFaceMode.disabled,te,b.id,ue,ye,he)}function An(_,l,f){if(!l.needsDEMTextureUpload)return;const b=_.context,R=b.gl;b.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||_.getTileTexture(f.stride);const M=f.getPixels();l.demTexture?l.demTexture.update(M,{premultiply:!1}):l.demTexture=new r.Texture(b,M,R.RGBA,{premultiply:!1}),l.needsDEMTextureUpload=!1}function fo(_,l,f,b,R,M){const F=_.context,j=F.gl;if(!l.dem)return;const q=l.dem;if(F.activeTexture.set(j.TEXTURE1),An(_,l,q),!l.demTexture)return;l.demTexture.bind(j.NEAREST,j.CLAMP_TO_EDGE);const Y=q.dim;F.activeTexture.set(j.TEXTURE0);let X=l.fbo;if(!X){const he=new r.Texture(F,{width:Y,height:Y,data:null},j.RGBA);he.bind(j.LINEAR,j.CLAMP_TO_EDGE),X=l.fbo=F.createFramebuffer(Y,Y,!0),X.colorAttachment.set(he.texture)}F.bindFramebuffer.set(X.framebuffer),F.viewport.set([0,0,Y,Y]);const{tileBoundsBuffer:te,tileBoundsIndexBuffer:ue,tileBoundsSegments:ye}=_.getMercatorTileBoundsBuffers();_.useProgram("hillshadePrepare").draw(F,j.TRIANGLES,b,R,M,r.CullFaceMode.disabled,((he,me)=>{const _e=me.stride,fe=r.create();return r.ortho(fe,0,r.EXTENT,-r.EXTENT,0,0,1),r.translate(fe,fe,[0,-r.EXTENT,0]),{u_matrix:fe,u_image:1,u_dimension:[_e,_e],u_zoom:he.overscaledZ,u_unpack:me.unpackVector}})(l.tileID,q),f.id,te,ue,ye),l.needsHillshadePrepare=!1}const Wo=_=>({u_matrix:new r.UniformMatrix4f(_),u_image0:new r.Uniform1i(_),u_skirt_height:new r.Uniform1f(_)}),Ga=(_,l)=>({u_matrix:_,u_image0:0,u_skirt_height:l}),qa=(_,l,f,b,R,M,F,j,q,Y,X,te,ue,ye)=>({u_proj_matrix:Float32Array.from(_),u_globe_matrix:l,u_normalize_matrix:Float32Array.from(b),u_merc_matrix:f,u_zoom_transition:R,u_merc_center:M,u_image0:0,u_frustum_tl:F,u_frustum_tr:j,u_frustum_br:q,u_frustum_bl:Y,u_globe_pos:X,u_globe_radius:te,u_viewport:ue,u_grid_matrix:ye?Float32Array.from(ye):new Float32Array(9)});function Ha(_,l){return _!=null&&l!=null&&!(!_.hasData()||!l.hasData())&&_.demTexture!=null&&l.demTexture!=null&&_.tileID.key!==l.tileID.key}const Nr=new class{constructor(){this.operations={}}newMorphing(_,l,f,b,R){if(_ in this.operations){const M=this.operations[_];M.to.tileID.key!==f.tileID.key&&(M.queued=f)}else this.operations[_]={startTime:b,phase:0,duration:R,from:l,to:f,queued:null}}getMorphValuesForProxy(_){if(!(_ in this.operations))return null;const l=this.operations[_];return{from:l.from,to:l.to,phase:l.phase}}update(_){for(const l in this.operations){const f=this.operations[l];for(f.phase=(_-f.startTime)/f.duration;f.phase>=1||!this._validOp(f);)if(!this._nextOp(f,_)){delete this.operations[l];break}}}_nextOp(_,l){return!!_.queued&&(_.from=_.to,_.to=_.queued,_.queued=null,_.phase=0,_.startTime=l,!0)}_validOp(_){return _.from.hasData()&&_.to.hasData()}},Zo={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Fu(_,l){const f=1<<_.z;return!l&&(_.x===0||_.x===f-1)||_.y===0||_.y===f-1}const Ka=_=>({u_matrix:_});function Gs(_,l,f,b,R){if(R>0){const M=r.exported.now(),F=(M-_.timeAdded)/R,j=l?(M-l.timeAdded)/R:-1,q=f.getSource(),Y=b.coveringZoomLevel({tileSize:q.tileSize,roundZoom:q.roundZoom}),X=!l||Math.abs(l.tileID.overscaledZ-Y)>Math.abs(_.tileID.overscaledZ-Y),te=X&&_.refreshedUponExpiration?1:r.clamp(X?F:1-j,0,1);return _.refreshedUponExpiration&&F>=1&&(_.refreshedUponExpiration=!1),l?{opacity:1,mix:1-te}:{opacity:te,mix:0}}return{opacity:1,mix:0}}class Wa extends r.SourceCache{constructor(l){const f={type:"raster-dem",maxzoom:l.transform.maxZoom},b=new en(Ln(),null),R=Ye("mock-dem",f,b,l.style);super("mock-dem",R,!1),R.setEventedParent(this),this._sourceLoaded=!0}_loadTile(l,f){l.state="loaded",f(null)}}class Za extends r.SourceCache{constructor(l){const f=Ye("proxy",{type:"geojson",maxzoom:l.transform.maxZoom},new en(Ln(),null),l.style);super("proxy",f,!1),f.setEventedParent(this),this.map=this.getSource().map=l,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(l,f,b){if(l.freezeTileCoverage)return;this.transform=l;const R=l.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((M,F)=>{if(M[F.key]="",!this._tiles[F.key]){const j=new r.Tile(F,this._source.tileSize*F.overscaleFactor(),l.tileZoom);j.state="loaded",this._tiles[F.key]=j}return M},{});for(const M in this._tiles)M in R||(this.freeFBO(M),this._tiles[M].unloadVectorData(),delete this._tiles[M])}freeFBO(l){const f=this.proxyCachedFBO[l];if(f!==void 0){const b=Object.values(f);this.renderCachePool.push(...b),delete this.proxyCachedFBO[l]}}deallocRenderCache(){this.renderCache.forEach(l=>l.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class qs extends r.OverscaledTileID{constructor(l,f,b){super(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,l.canonical.y),this.proxyTileKey=f,this.projMatrix=b}}class cc extends r.Elevation{constructor(l,f){super(),this.painter=l,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[b,R,M]=function(q){const Y=new r.StructArrayLayout4i8,X=new r.StructArrayLayout3ui6,te=131;Y.reserve(17161),X.reserve(33800);const ue=r.EXTENT/128,ye=r.EXTENT+ue/2,he=ye+ue;for(let _e=-ue;_e<he;_e+=ue)for(let fe=-ue;fe<he;fe+=ue){const Ce=fe<0||fe>ye||_e<0||_e>ye?24575:0,be=r.clamp(Math.round(fe),0,r.EXTENT),Be=r.clamp(Math.round(_e),0,r.EXTENT);Y.emplaceBack(be+Ce,Be,be,Be)}const me=(_e,fe)=>{const Ce=fe*te+_e;X.emplaceBack(Ce+1,Ce,Ce+te),X.emplaceBack(Ce+te,Ce+te+1,Ce+1)};for(let _e=1;_e<129;_e++)for(let fe=1;fe<129;fe++)me(fe,_e);return[0,129].forEach(_e=>{for(let fe=0;fe<130;fe++)me(fe,_e),me(_e,fe)}),[Y,X,32768]}(),F=l.context;this.gridBuffer=F.createVertexBuffer(b,r.boundsAttributes.members),this.gridIndexBuffer=F.createIndexBuffer(R),this.gridSegments=r.SegmentVector.simpleSegment(0,0,b.length,R.length),this.gridNoSkirtSegments=r.SegmentVector.simpleSegment(0,0,b.length,M),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Za(f.map),this.orthoMatrix=r.create(),r.ortho(this.orthoMatrix,0,r.EXTENT,0,r.EXTENT,0,1);const j=F.gl;this._overlapStencilMode=new r.StencilMode({func:j.GEQUAL,mask:255},0,255,j.KEEP,j.KEEP,j.REPLACE),this._previousZoom=l.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=f,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Wa(f.map)}set style(l){l.on("data",this._onStyleDataEvent.bind(this)),l.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=l,this._checkRenderCacheEfficiency()}update(l,f,b){if(l&&l.terrain){this._style!==l&&(this.style=l),this.enabled=!0;const R=l.terrain.properties;this.sourceCache=l.terrain.drapeRenderMode===0?this._mockSourceCache:l._getSourceCache(R.get("source")),this._exaggeration=R.get("exaggeration");const M=()=>{this.sourceCache.used&&r.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const F=this.getScaledDemTileSize();this.sourceCache.update(f,F,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,M(),this._initializing=!0),M(),f.updateElevation(!b),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(f),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(l){this._findCoveringTileCache[l]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const l=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||l.efficiency!==100&&r.warnOnce(`Terrain render cache efficiency is not optimal (${l.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${l.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(l){l.coord&&l.dataType==="source"?this._clearRenderCacheForTile(l.sourceCacheId,l.coord):l.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const l in this._style._sourceCaches)this._style._sourceCaches[l].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(l=>l.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const l=2*this.proxySourceCache.getSource().tileSize;return[l,l]}set useVertexMorphing(l){this._useVertexMorphing=l}updateTileBinding(l){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const f=this.proxySourceCache,b=this.painter.transform;this._initializing&&(this._initializing=b._centerAltitude===0&&this.getAtPointOrZero(r.MercatorCoordinate.fromLngLat(b.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const R=this.proxyCoords=f.getIds().map(q=>{const Y=f.getTileByID(q).tileID;return Y.projMatrix=b.calculateProjMatrix(Y.toUnwrapped()),Y});(function(q,Y){const X=Y.transform.pointCoordinate(Y.transform.getCameraPoint()),te=new r.pointGeometry(X.x,X.y);q.sort((ue,ye)=>{if(ye.overscaledZ-ue.overscaledZ)return ye.overscaledZ-ue.overscaledZ;const he=new r.pointGeometry(ue.canonical.x+(1<<ue.canonical.z)*ue.wrap,ue.canonical.y),me=new r.pointGeometry(ye.canonical.x+(1<<ye.canonical.z)*ye.wrap,ye.canonical.y),_e=te.mult(1<<ue.canonical.z);return _e.x-=.5,_e.y-=.5,_e.distSqr(he)-_e.distSqr(me)})})(R,this.painter),this._previousZoom=b.zoom;const M=this.proxyToSource||{};this.proxyToSource={},R.forEach(q=>{this.proxyToSource[q.key]={}}),this.terrainTileForTile={};const F=this._style._sourceCaches;for(const q in F){const Y=F[q];if(!Y.used||(Y!==this.sourceCache&&this.resetTileLookupCache(Y.id),this._setupProxiedCoordsForOrtho(Y,l[q],M),Y.usedForTerrain))continue;const X=l[q];Y.getSource().reparseOverscaled&&this._assignTerrainTiles(X)}this.proxiedCoords[f.id]=R.map(q=>new qs(q,q.key,this.orthoMatrix)),this._assignTerrainTiles(R),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(M),this.renderingToTexture=!1,this._updateTimestamp=r.exported.now();const j={};this._visibleDemTiles=[];for(const q of this.proxyCoords){const Y=this.terrainTileForTile[q.key];if(!Y)continue;const X=Y.tileID.key;X in j||(this._visibleDemTiles.push(Y),j[X]=X)}}_assignTerrainTiles(l){this._initializing||l.forEach(f=>{if(this.terrainTileForTile[f.key])return;const b=this._findTileCoveringTileID(f,this.sourceCache);b&&(this.terrainTileForTile[f.key]=b)})}_prepareDEMTextures(){const l=this.painter.context,f=l.gl;for(const b in this.terrainTileForTile){const R=this.terrainTileForTile[b],M=R.dem;!M||R.demTexture&&!R.needsDEMTextureUpload||(l.activeTexture.set(f.TEXTURE1),An(this.painter,R,M))}}_prepareDemTileUniforms(l,f,b,R){if(!f||f.demTexture==null)return!1;const M=l.tileID.canonical,F=Math.pow(2,f.tileID.canonical.z-M.z),j=R||"";return b[`u_dem_tl${j}`]=[M.x*F%1,M.y*F%1],b[`u_dem_scale${j}`]=F,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const l=this.painter.context,f=l.gl;if(!this._emptyDepthBufferTexture){const b=new r.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new r.Texture(l,b,f.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let l=0;const f=this._visibleDemTiles.reduce((b,R)=>{if(!R.dem)return b;const M=R.dem.tree.minimums[0];return M>0&&l++,b+M},0);return l?f/l:0}_updateEmptyDEMTexture(){const l=this.painter.context,f=l.gl;l.activeTexture.set(f.TEXTURE2);const b=this._getLoadedAreaMinimum(),R=new r.RGBAImage({width:1,height:1},new Uint8Array(r.DEMData.pack(b,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let M=this._emptyDEMTexture;return M?M.update(R,{premultiply:!1}):M=this._emptyDEMTexture=new r.Texture(l,R,f.RGBA,{premultiply:!1}),M}setupElevationDraw(l,f,b){const R=this.painter.context,M=R.gl,F=(j=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:r.DEMData.getUnpackVector(j),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0,u_tile_tl_up:[0,0,1],u_tile_tr_up:[0,0,1],u_tile_br_up:[0,0,1],u_tile_bl_up:[0,0,1],u_tile_up_scale:1});var j;F.u_dem_size=this.sourceCache.getSource().tileSize,F.u_exaggeration=this.exaggeration();const q=this.painter.transform,Y=q.projection,X=l.tileID.canonical;F.u_tile_tl_up=Y.upVector(X,0,0),F.u_tile_tr_up=Y.upVector(X,r.EXTENT,0),F.u_tile_br_up=Y.upVector(X,r.EXTENT,r.EXTENT),F.u_tile_bl_up=Y.upVector(X,0,r.EXTENT),F.u_tile_up_scale=b&&b.useDenormalizedUpVectorScale?r.GLOBE_METERS_TO_ECEF:Y.upVectorScale(X,q.center.lat,q.worldSize).metersToTile;let te=null,ue=null,ye=1;if(b&&b.morphing&&this._useVertexMorphing){const he=b.morphing.srcDemTile,me=b.morphing.dstDemTile;ye=b.morphing.phase,he&&me&&(this._prepareDemTileUniforms(l,he,F,"_prev")&&(ue=he),this._prepareDemTileUniforms(l,me,F)&&(te=me))}if(ue&&te?(R.activeTexture.set(M.TEXTURE2),te.demTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE,M.NEAREST),R.activeTexture.set(M.TEXTURE4),ue.demTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE,M.NEAREST),F.u_dem_lerp=ye):(te=this.terrainTileForTile[l.tileID.key],R.activeTexture.set(M.TEXTURE2),(this._prepareDemTileUniforms(l,te,F)?te.demTexture:this.emptyDEMTexture).bind(M.NEAREST,M.CLAMP_TO_EDGE)),R.activeTexture.set(M.TEXTURE3),b&&b.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE),this._depthFBO&&(F.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE),F.u_depth_size_inv=[1,1]),b&&b.useMeterToDem&&te){const he=(1<<te.tileID.canonical.z)*r.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;F.u_meter_to_dem=he}b&&b.labelPlaneMatrixInv&&(F.u_label_plane_matrix_inv=b.labelPlaneMatrixInv),f.setTerrainUniformValues(R,F)}renderToBackBuffer(l){const f=this.painter,b=this.painter.context;l.length!==0&&(b.bindFramebuffer.set(null),b.viewport.set([0,0,f.width,f.height]),f.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(R,M,F,j,q){if(R.transform.projection.name==="globe")(function(Y,X,te,ue,ye){const he=Y.context,me=he.gl;let _e,fe;const Ce=Y.options.showTerrainWireframe?2:0,be=Y.transform,Be=r.globeUseCustomAntiAliasing(Y,he,be),Oe=(It,ot)=>{if(fe===It)return;const $t=[Zo[It],"PROJECTION_GLOBE_VIEW"];Be&&$t.push("CUSTOM_ANTIALIASING"),ot&&$t.push(Zo[Ce]),_e=Y.useProgram("globeRaster",null,$t),fe=It},$e=Y.colorModeForRenderPass(),De=new r.DepthMode(me.LEQUAL,r.DepthMode.ReadWrite,Y.depthRangeFor3D);Nr.update(ye);const Le=r.calculateGlobeMercatorMatrix(be),Ge=[r.mercatorXfromLng(be.center.lng),r.mercatorYfromLat(be.center.lat)],Je=Ce?[!1,!0]:[!1],kt=Y.globeSharedBuffers,Ke=[be.width*r.exported.devicePixelRatio,be.height*r.exported.devicePixelRatio],pt=Float32Array.from(be.globeMatrix),_t={useDenormalizedUpVectorScale:!0};if(Je.forEach(It=>{fe=-1;const ot=It?me.LINES:me.TRIANGLES;for(const $t of ue){const mt=te.getTile($t),Pt=r.StencilMode.disabled,Ot=X.prevTerrainTileForTile[$t.key],Kt=X.terrainTileForTile[$t.key];Ha(Ot,Kt)&&Nr.newMorphing($t.key,Ot,Kt,ye,250),he.activeTexture.set(me.TEXTURE0),mt.texture.bind(me.LINEAR,me.CLAMP_TO_EDGE);const Qt=Nr.getMorphValuesForProxy($t.key),dn=Qt?1:0;Qt&&r.extend$1(_t,{morphing:{srcDemTile:Qt.from,dstDemTile:Qt.to,phase:r.easeCubicInOut(Qt.phase)}});const Cn=r.tileCornersToBounds($t.canonical),Wt=r.getLatitudinalLod(Cn.getCenter().lat),fn=r.getGridMatrix($t.canonical,Cn,Wt),kn=r.globeNormalizeECEF(r.globeTileBounds($t.canonical)),Kn=qa(be.projMatrix,pt,Le,kn,r.globeToMercatorTransition(be.zoom),Ge,be.frustumCorners.TL,be.frustumCorners.TR,be.frustumCorners.BR,be.frustumCorners.BL,be.globeCenterInViewSpace,be.globeRadius,Ke,fn);if(Oe(dn,It),X.setupElevationDraw(mt,_e,_t),Y.prepareDrawProgram(he,_e,$t.toUnwrapped()),kt){const[ri,Dn,gi]=It?kt.getWirefameBuffers(Y.context,Wt):kt.getGridBuffers(Wt);_e.draw(he,ot,De,Pt,$e,r.CullFaceMode.backCCW,Kn,"globe_raster",ri,Dn,gi)}}}),kt){const It=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Be&&It.push("CUSTOM_ANTIALIASING"),_e=Y.useProgram("globeRaster",null,It);for(const ot of ue){const{x:$t,y:mt,z:Pt}=ot.canonical,Ot=mt===0,Kt=mt===(1<<Pt)-1,[Qt,dn,Cn,Wt]=kt.getPoleBuffers(Pt);if(Wt&&(Ot||Kt)){const fn=te.getTile(ot);he.activeTexture.set(me.TEXTURE0),fn.texture.bind(me.LINEAR,me.CLAMP_TO_EDGE);let kn=r.globePoleMatrixForTile(Pt,$t,be);const Kn=r.globeNormalizeECEF(r.globeTileBounds(ot.canonical)),ri=(Dn,gi)=>Dn.draw(he,me.TRIANGLES,De,r.StencilMode.disabled,$e,r.CullFaceMode.disabled,qa(be.projMatrix,kn,kn,Kn,0,Ge,be.frustumCorners.TL,be.frustumCorners.TR,be.frustumCorners.BR,be.frustumCorners.BL,be.globeCenterInViewSpace,be.globeRadius,Ke),"globe_pole_raster",gi,Cn,Wt);X.setupElevationDraw(fn,_e,_t),Y.prepareDrawProgram(he,_e,ot.toUnwrapped()),Ot&&ri(_e,Qt),Kt&&(kn=r.scale(r.create(),kn,[1,-1,1]),ri(_e,dn))}}}})(R,M,F,j,q);else{const Y=R.context,X=Y.gl;let te,ue;const ye=R.options.showTerrainWireframe?2:0,he=(be,Be)=>{if(ue===be)return;const Oe=[Zo[be]];Be&&Oe.push(Zo[ye]),te=R.useProgram("terrainRaster",null,Oe),ue=be},me=R.colorModeForRenderPass(),_e=new r.DepthMode(X.LEQUAL,r.DepthMode.ReadWrite,R.depthRangeFor3D);Nr.update(q);const fe=R.transform,Ce=6*Math.pow(1.5,22-fe.zoom)*M.exaggeration();(ye?[!1,!0]:[!1]).forEach(be=>{ue=-1;const Be=be?X.LINES:X.TRIANGLES,[Oe,$e]=be?M.getWirefameBuffer():[M.gridIndexBuffer,M.gridSegments];for(const De of j){const Le=F.getTile(De),Ge=r.StencilMode.disabled,Je=M.prevTerrainTileForTile[De.key],kt=M.terrainTileForTile[De.key];Ha(Je,kt)&&Nr.newMorphing(De.key,Je,kt,q,250),Y.activeTexture.set(X.TEXTURE0),Le.texture.bind(X.LINEAR,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST);const Ke=Nr.getMorphValuesForProxy(De.key),pt=Ke?1:0;let _t;Ke&&(_t={morphing:{srcDemTile:Ke.from,dstDemTile:Ke.to,phase:r.easeCubicInOut(Ke.phase)}});const It=Ga(De.projMatrix,Fu(De.canonical,fe.renderWorldCopies)?Ce/10:Ce);he(pt,be),M.setupElevationDraw(Le,te,_t),R.prepareDrawProgram(Y,te,De.toUnwrapped()),te.draw(Y,Be,_e,Ge,me,r.CullFaceMode.backCCW,It,"terrain_raster",M.gridBuffer,Oe,$e)}})}}(f,this,this.proxySourceCache,l,this._updateTimestamp),this.renderingToTexture=!0,f.gpuTimingDeferredRenderEnd(),l.splice(0,l.length))}renderBatch(l){if(this._drapedRenderBatches.length===0)return l+1;this.renderingToTexture=!0;const f=this.painter,b=this.painter.context,R=this.proxySourceCache,M=this.proxiedCoords[R.id],F=this._drapedRenderBatches.shift(),j=[],q=f.style.order;let Y=0;for(const X of M){const te=R.getTileByID(X.proxyTileKey),ue=R.proxyCachedFBO[X.key]?R.proxyCachedFBO[X.key][l]:void 0,ye=ue!==void 0?R.renderCache[ue]:this.pool[Y++],he=ue!==void 0;if(te.texture=ye.tex,he&&!ye.dirty){j.push(te.tileID);continue}let me;b.bindFramebuffer.set(ye.fb.framebuffer),this.renderedToTile=!1,ye.dirty&&(b.clear({color:r.Color.transparent,stencil:0}),ye.dirty=!1);for(let _e=F.start;_e<=F.end;++_e){const fe=f.style._layers[q[_e]];if(fe.isHidden(f.transform.zoom))continue;const Ce=f.style._getLayerSourceCache(fe),be=Ce?this.proxyToSource[X.key][Ce.id]:[X];if(!be)continue;const Be=be;b.viewport.set([0,0,ye.fb.width,ye.fb.height]),me!==(Ce?Ce.id:null)&&(this._setupStencil(ye,be,fe,Ce),me=Ce?Ce.id:null),f.renderLayer(f,Ce,fe,Be)}this.renderedToTile?(ye.dirty=!0,j.push(te.tileID)):he||--Y,Y===5&&(Y=0,this.renderToBackBuffer(j))}return this.renderToBackBuffer(j),this.renderingToTexture=!1,b.bindFramebuffer.set(null),b.viewport.set([0,0,f.width,f.height]),F.end+1}postRender(){}renderCacheEfficiency(l){const f=l.order.length;if(f===0)return{efficiency:100};let b,R=0,M=0,F=!1;for(let j=0;j<f;++j){const q=l._layers[l.order[j]];this._style.isLayerDraped(q)?(F&&++R,++M):F||(F=!0,b=q.id)}return M===0?{efficiency:100}:{efficiency:100*(1-R/M),firstUndrapedLayer:b}}getMinElevationBelowMSL(){let l=0;return this._visibleDemTiles.filter(f=>f.dem).forEach(f=>{l=Math.min(l,f.dem.tree.minimums[0])}),l===0?l:(l-30)*this._exaggeration}raycast(l,f,b){if(!this._visibleDemTiles)return null;const R=this._visibleDemTiles.filter(M=>M.dem).map(M=>{const F=M.tileID,j=1<<F.overscaledZ,{x:q,y:Y}=F.canonical,X=q/j,te=(q+1)/j,ue=Y/j,ye=(Y+1)/j;return{minx:X,miny:ue,maxx:te,maxy:ye,t:M.dem.tree.raycastRoot(X,ue,te,ye,l,f,b),tile:M}});R.sort((M,F)=>(M.t!==null?M.t:Number.MAX_VALUE)-(F.t!==null?F.t:Number.MAX_VALUE));for(const M of R){if(M.t==null)return null;const F=M.tile.dem.tree.raycast(M.minx,M.miny,M.maxx,M.maxy,l,f,b);if(F!=null)return F}return null}_createFBO(){const l=this.painter.context,f=l.gl,b=this.drapeBufferSize;l.activeTexture.set(f.TEXTURE0);const R=new r.Texture(l,{width:b[0],height:b[1],data:null},f.RGBA);R.bind(f.LINEAR,f.CLAMP_TO_EDGE);const M=l.createFramebuffer(b[0],b[1],!1);return M.colorAttachment.set(R.texture),M.depthAttachment=new ee(l,M.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=l.createRenderbuffer(l.gl.DEPTH_STENCIL,b[0],b[1]),this._stencilRef=0,M.depthAttachment.set(this._sharedDepthStencil),l.clear({stencil:0})):M.depthAttachment.set(this._sharedDepthStencil),l.extTextureFilterAnisotropic&&!l.extTextureFilterAnisotropicForceOff&&f.texParameterf(f.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax),{fb:M,tex:R,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const l in this._style._sourceCaches)if(this._style._sourceCaches[l].hasTransition())return!0;return this._style.order.some(l=>{const f=this._style._layers[l],b=f.isHidden(this.painter.transform.zoom),R=f.getCrossfadeParameters(),M=!!R&&R.t!==1,F=f.hasTransition();return f.type!=="custom"&&!b&&(M||F)})}_clearRasterFadeFromRenderCache(){let l=!1;for(const f in this._style._sourceCaches)if(this._style._sourceCaches[f]._source instanceof Ae){l=!0;break}if(l)for(let f=0;f<this._style.order.length;++f){const b=this._style._layers[this._style.order[f]],R=b.isHidden(this.painter.transform.zoom),M=this._style._getLayerSourceCache(b);if(b.type!=="raster"||R||!M)continue;const F=b.paint.get("raster-fade-duration");for(const j of this.proxyCoords){const q=this.proxyToSource[j.key][M.id];if(q)for(const Y of q){const X=Gs(M.getTile(Y),M.findLoadedParent(Y,0),M,this.painter.transform,F);(X.opacity!==1||X.mix!==0)&&this._clearRenderCacheForTile(M.id,Y)}}}}_setupDrapedRenderBatches(){const l=this._style.order,f=l.length;if(f===0)return;const b=[];let R,M=0,F=this._style._layers[l[M]];for(;!this._style.isLayerDraped(F)&&F.isHidden(this.painter.transform.zoom)&&++M<f;)F=this._style._layers[l[M]];for(;M<f;++M){const j=this._style._layers[l[M]];j.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(j)?R===void 0&&(R=M):R!==void 0&&(b.push({start:R,end:M-1}),R=void 0))}R!==void 0&&b.push({start:R,end:M-1}),this._drapedRenderBatches=b}_setupRenderCache(l){const f=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,f.renderCache.length>f.renderCachePool.length){const F=Object.values(f.proxyCachedFBO);f.proxyCachedFBO={};for(let j=0;j<F.length;++j){const q=Object.values(F[j]);f.renderCachePool.push(...q)}}return}this._clearRasterFadeFromRenderCache();const b=this.proxyCoords,R=this._tilesDirty;for(let F=b.length-1;F>=0;F--){const j=b[F];if(f.getTileByID(j.key),f.proxyCachedFBO[j.key]!==void 0){const q=l[j.key],Y=this.proxyToSource[j.key];let X=0;for(const te in Y){const ue=Y[te],ye=q[te];if(!ye||ye.length!==ue.length||ue.some((he,me)=>he!==ye[me]||R[te]&&R[te].hasOwnProperty(he.key))){X=-1;break}++X}for(const te in f.proxyCachedFBO[j.key])f.renderCache[f.proxyCachedFBO[j.key][te]].dirty=X<0||X!==Object.values(q).length}}const M=[...this._drapedRenderBatches];M.sort((F,j)=>j.end-j.start-(F.end-F.start));for(const F of M)for(const j of b){if(f.proxyCachedFBO[j.key])continue;let q=f.renderCachePool.pop();q===void 0&&f.renderCache.length<50&&(q=f.renderCache.length,f.renderCache.push(this._createFBO())),q!==void 0&&(f.proxyCachedFBO[j.key]={},f.proxyCachedFBO[j.key][F.start]=q,f.renderCache[q].dirty=!0)}this._tilesDirty={}}_setupStencil(l,f,b,R){if(!R||!this._sourceTilesOverlap[R.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const M=this.painter.context,F=M.gl;if(f.length<=1)return void(this._overlapStencilType=!1);let j;if(b.isTileClipped())j=f.length,this._overlapStencilMode.test={func:F.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(f[0].overscaledZ>f[f.length-1].overscaledZ))return void(this._overlapStencilType=!1);j=1,this._overlapStencilMode.test={func:F.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+j>255&&(M.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=j,this._overlapStencilMode.ref=this._stencilRef,b.isTileClipped()&&this._renderTileClippingMasks(f,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(l){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[l.key]),this._overlapStencilMode):r.StencilMode.disabled}_renderTileClippingMasks(l,f){const b=this.painter,R=this.painter.context,M=R.gl;b._tileClippingMaskIDs={},R.setColorMode(r.ColorMode.disabled),R.setDepthMode(r.DepthMode.disabled);const F=b.useProgram("clippingMask");for(const j of l){const q=b._tileClippingMaskIDs[j.key]=--f;F.draw(R,M.TRIANGLES,r.DepthMode.disabled,new r.StencilMode({func:M.ALWAYS,mask:0},q,255,M.KEEP,M.KEEP,M.REPLACE),r.ColorMode.disabled,r.CullFaceMode.disabled,Ka(j.projMatrix),"$clipping",b.tileExtentBuffer,b.quadTriangleIndexBuffer,b.tileExtentSegments)}}pointCoordinate(l){const f=this.painter.transform;if(l.x<0||l.x>f.width||l.y<0||l.y>f.height)return null;const b=[l.x,l.y,1,1];r.transformMat4$1(b,b,f.pixelMatrixInverse),r.scale$1(b,b,1/b[3]),b[0]/=f.worldSize,b[1]/=f.worldSize;const R=f._camera.position,M=r.mercatorZfromAltitude(1,f.center.lat),F=[R[0],R[1],R[2]/M,0],j=r.subtract([],b.slice(0,3),F);r.normalize(j,j);const q=this.raycast(F,j,this._exaggeration);return q!==null&&q?(r.scaleAndAdd(F,F,j,q),F[3]=F[2],F[2]*=M,F):null}drawDepth(){const l=this.painter,f=l.context,b=this.proxySourceCache,R=Math.ceil(l.width),M=Math.ceil(l.height);if(!this._depthFBO||this._depthFBO.width===R&&this._depthFBO.height===M||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const F=f.gl,j=f.createFramebuffer(R,M,!0);f.activeTexture.set(F.TEXTURE0);const q=new r.Texture(f,{width:R,height:M,data:null},F.RGBA);q.bind(F.NEAREST,F.CLAMP_TO_EDGE),j.colorAttachment.set(q.texture);const Y=f.createRenderbuffer(f.gl.DEPTH_COMPONENT16,R,M);j.depthAttachment.set(Y),this._depthFBO=j,this._depthTexture=q}f.bindFramebuffer.set(this._depthFBO.framebuffer),f.viewport.set([0,0,R,M]),function(F,j,q,Y){if(F.transform.projection.name==="globe")return;const X=F.context,te=X.gl;X.clear({depth:1});const ue=F.useProgram("terrainDepth"),ye=new r.DepthMode(te.LESS,r.DepthMode.ReadWrite,F.depthRangeFor3D);for(const he of Y){const me=q.getTile(he),_e=Ga(he.projMatrix,0);j.setupElevationDraw(me,ue),ue.draw(X,te.TRIANGLES,ye,r.StencilMode.disabled,r.ColorMode.unblended,r.CullFaceMode.backCCW,_e,"terrain_depth",j.gridBuffer,j.gridIndexBuffer,j.gridNoSkirtSegments)}}(l,this,b,this.proxyCoords)}_setupProxiedCoordsForOrtho(l,f,b){if(l.getSource()instanceof He)return this._setupProxiedCoordsForImageSource(l,f,b);this._findCoveringTileCache[l.id]=this._findCoveringTileCache[l.id]||{};const R=this.proxiedCoords[l.id]=[],M=this.proxyCoords;for(let j=0;j<M.length;j++){const q=M[j],Y=this._findTileCoveringTileID(q,l);if(Y){const X=this._createProxiedId(q,Y,b[q.key]&&b[q.key][l.id]);R.push(X),this.proxyToSource[q.key][l.id]=[X]}}let F=!1;for(let j=0;j<f.length;j++){const q=l.getTile(f[j]);if(!q||!q.hasData())continue;const Y=this._findTileCoveringTileID(q.tileID,this.proxySourceCache);if(Y&&Y.tileID.canonical.z!==q.tileID.canonical.z){const X=this.proxyToSource[Y.tileID.key][l.id],te=this._createProxiedId(Y.tileID,q,b[Y.tileID.key]&&b[Y.tileID.key][l.id]);X?X.splice(X.length-1,0,te):this.proxyToSource[Y.tileID.key][l.id]=[te],R.push(te),F=!0}}this._sourceTilesOverlap[l.id]=F}_setupProxiedCoordsForImageSource(l,f,b){if(!l.getSource().loaded())return;const R=this.proxiedCoords[l.id]=[],M=this.proxyCoords,F=l.getSource(),j=new r.pointGeometry(F.tileID.x,F.tileID.y)._div(1<<F.tileID.z),q=F.coordinates.map(r.MercatorCoordinate.fromLngLat).reduce((X,te)=>(X.min.x=Math.min(X.min.x,te.x-j.x),X.min.y=Math.min(X.min.y,te.y-j.y),X.max.x=Math.max(X.max.x,te.x-j.x),X.max.y=Math.max(X.max.y,te.y-j.y),X),{min:new r.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new r.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),Y=(X,te)=>{const ue=X.wrap+X.canonical.x/(1<<X.canonical.z),ye=X.canonical.y/(1<<X.canonical.z),he=r.EXTENT/(1<<X.canonical.z),me=te.wrap+te.canonical.x/(1<<te.canonical.z),_e=te.canonical.y/(1<<te.canonical.z);return ue+he<me+q.min.x||ue>me+q.max.x||ye+he<_e+q.min.y||ye>_e+q.max.y};for(let X=0;X<M.length;X++){const te=M[X];for(let ue=0;ue<f.length;ue++){const ye=l.getTile(f[ue]);if(!ye||!ye.hasData()||Y(te,ye.tileID))continue;const he=this._createProxiedId(te,ye,b[te.key]&&b[te.key][l.id]),me=this.proxyToSource[te.key][l.id];me?me.push(he):this.proxyToSource[te.key][l.id]=[he],R.push(he)}}}_createProxiedId(l,f,b){let R=this.orthoMatrix;if(b){const M=b.find(F=>F.key===f.tileID.key);if(M)return M}if(f.tileID.key!==l.key){const M=l.canonical.z-f.tileID.canonical.z;let F,j,q;R=r.create();const Y=f.tileID.wrap-l.wrap<<l.overscaledZ;M>0?(F=r.EXTENT>>M,j=F*((f.tileID.canonical.x<<M)-l.canonical.x+Y),q=F*((f.tileID.canonical.y<<M)-l.canonical.y)):(F=r.EXTENT<<-M,j=r.EXTENT*(f.tileID.canonical.x-(l.canonical.x+Y<<-M)),q=r.EXTENT*(f.tileID.canonical.y-(l.canonical.y<<-M))),r.ortho(R,0,F,0,F,0,1),r.translate(R,R,[j,q,0])}return new qs(f.tileID,l.key,R)}_findTileCoveringTileID(l,f){let b=f.getTile(l);if(b&&b.hasData())return b;const R=this._findCoveringTileCache[f.id],M=R[l.key];if(b=M?f.getTileByID(M):null,b&&b.hasData()||M===null)return b;let F=b?b.tileID:l,j=F.overscaledZ;const q=f.getSource().minzoom,Y=[];if(!M){const te=f.getSource().maxzoom;if(l.canonical.z>=te){const ue=l.canonical.z-te;f.getSource().reparseOverscaled?(j=Math.max(l.canonical.z+2,f.transform.tileZoom),F=new r.OverscaledTileID(j,l.wrap,te,l.canonical.x>>ue,l.canonical.y>>ue)):ue!==0&&(j=te,F=new r.OverscaledTileID(j,l.wrap,te,l.canonical.x>>ue,l.canonical.y>>ue))}F.key!==l.key&&(Y.push(F.key),b=f.getTile(F))}const X=te=>{Y.forEach(ue=>{R[ue]=te}),Y.length=0};for(j-=1;j>=q&&(!b||!b.hasData());j--){b&&X(b.tileID.key);const te=F.calculateScaledKey(j);if(b=f.getTileByID(te),b&&b.hasData())break;const ue=R[te];if(ue===null)break;ue===void 0?Y.push(te):b=f.getTileByID(ue)}return X(b?b.tileID.key:null),b&&b.hasData()?b:null}findDEMTileFor(l){return this.enabled?this._findTileCoveringTileID(l,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(l,f){let b=this._tilesDirty[l];b||(b=this._tilesDirty[l]={}),b[f.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const l=function(f){let b=0;const R=new r.StructArrayLayout2ui4,M=131;for(let F=1;F<129;F++){for(let j=1;j<129;j++)b=F*M+j,R.emplaceBack(b,b+1),R.emplaceBack(b,b+M),R.emplaceBack(b+1,b+M),F===128&&R.emplaceBack(b+M,b+M+1);R.emplaceBack(b+1,b+1+M)}return R}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(l),this.wireframeSegments=r.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,l.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Ya{static cacheKey(l,f,b,R){let M=`${f}${R?R.cacheKey:""}`;for(const F of b)l.usedDefines.includes(F)&&(M+=`/${F}`);return M}constructor(l,f,b,R,M,F){const j=l.gl;this.program=j.createProgram();const q=function(_e){const fe=[];for(let Ce=0;Ce<_e.length;Ce++){if(_e[Ce]===null)continue;const be=_e[Ce].split(" ");fe.push(be.pop())}return fe}(b.staticAttributes),Y=R?R.getBinderAttributes():[],X=q.concat(Y);let te=R?R.defines():[];te=te.concat(F.map(_e=>`#define ${_e}`));const ue=te.concat(l.extStandardDerivatives?`#extension GL_OES_standard_derivatives : enable
`.concat(Vs):Vs,Vs,Fs,Ko.fragmentSource,Gr.fragmentSource,b.fragmentSource).join(`
`),ye=te.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,Fs,Ko.vertexSource,Gr.vertexSource,zs.vertexSource,b.vertexSource).join(`
`),he=j.createShader(j.FRAGMENT_SHADER);if(j.isContextLost())return void(this.failedToCreate=!0);j.shaderSource(he,ue),j.compileShader(he),j.attachShader(this.program,he);const me=j.createShader(j.VERTEX_SHADER);if(j.isContextLost())this.failedToCreate=!0;else{j.shaderSource(me,ye),j.compileShader(me),j.attachShader(this.program,me),this.attributes={},this.numAttributes=X.length;for(let _e=0;_e<this.numAttributes;_e++)X[_e]&&(j.bindAttribLocation(this.program,_e,X[_e]),this.attributes[X[_e]]=_e);j.linkProgram(this.program),j.deleteShader(me),j.deleteShader(he),this.fixedUniforms=M(l),this.binderUniforms=R?R.getUniforms(l):[],F.indexOf("TERRAIN")!==-1&&(this.terrainUniforms=(_e=>({u_dem:new r.Uniform1i(_e),u_dem_prev:new r.Uniform1i(_e),u_dem_unpack:new r.Uniform4f(_e),u_dem_tl:new r.Uniform2f(_e),u_dem_scale:new r.Uniform1f(_e),u_dem_tl_prev:new r.Uniform2f(_e),u_dem_scale_prev:new r.Uniform1f(_e),u_dem_size:new r.Uniform1f(_e),u_dem_lerp:new r.Uniform1f(_e),u_exaggeration:new r.Uniform1f(_e),u_depth:new r.Uniform1i(_e),u_depth_size_inv:new r.Uniform2f(_e),u_meter_to_dem:new r.Uniform1f(_e),u_label_plane_matrix_inv:new r.UniformMatrix4f(_e),u_tile_tl_up:new r.Uniform3f(_e),u_tile_tr_up:new r.Uniform3f(_e),u_tile_br_up:new r.Uniform3f(_e),u_tile_bl_up:new r.Uniform3f(_e),u_tile_up_scale:new r.Uniform1f(_e)}))(l)),F.indexOf("FOG")!==-1&&(this.fogUniforms=(_e=>({u_fog_matrix:new r.UniformMatrix4f(_e),u_fog_range:new r.Uniform2f(_e),u_fog_color:new r.Uniform4f(_e),u_fog_horizon_blend:new r.Uniform1f(_e),u_fog_temporal_offset:new r.Uniform1f(_e),u_frustum_tl:new r.Uniform3f(_e),u_frustum_tr:new r.Uniform3f(_e),u_frustum_br:new r.Uniform3f(_e),u_frustum_bl:new r.Uniform3f(_e),u_globe_pos:new r.Uniform3f(_e),u_globe_radius:new r.Uniform1f(_e),u_globe_transition:new r.Uniform1f(_e),u_is_globe:new r.Uniform1i(_e),u_viewport:new r.Uniform2f(_e)}))(l))}}setTerrainUniformValues(l,f){if(!this.terrainUniforms)return;const b=this.terrainUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const R in f)b[R].set(this.program,R,f[R])}}setFogUniformValues(l,f){if(!this.fogUniforms)return;const b=this.fogUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const R in f)b[R].set(this.program,R,f[R])}}draw(l,f,b,R,M,F,j,q,Y,X,te,ue,ye,he,me){const _e=l.gl;if(this.failedToCreate)return;l.program.set(this.program),l.setDepthMode(b),l.setStencilMode(R),l.setColorMode(M),l.setCullFace(F);for(const Ce of Object.keys(this.fixedUniforms))this.fixedUniforms[Ce].set(this.program,Ce,j[Ce]);he&&he.setUniforms(this.program,l,this.binderUniforms,ue,{zoom:ye});const fe={[_e.LINES]:2,[_e.TRIANGLES]:3,[_e.LINE_STRIP]:1}[f];for(const Ce of te.get()){const be=Ce.vaos||(Ce.vaos={});(be[q]||(be[q]=new js)).bind(l,this,Y,he?he.getPaintVertexBuffers():[],X,Ce.vertexOffset,me||[]),_e.drawElements(f,Ce.primitiveLength*fe,_e.UNSIGNED_SHORT,Ce.primitiveOffset*fe*2)}}}function uc(_,l,f){const b=1/En(f,1,l.transform.tileZoom),R=Math.pow(2,f.tileID.overscaledZ),M=f.tileSize*Math.pow(2,l.transform.tileZoom)/R,F=M*(f.tileID.canonical.x+f.tileID.wrap*R),j=M*f.tileID.canonical.y;return{u_image:0,u_texsize:f.imageAtlasTexture.size,u_scale:[b,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[F>>16,j>>16],u_pixel_coord_lower:[65535&F,65535&j]}}const Yo=r.create(),ho=(_,l,f,b,R,M,F,j,q,Y,X)=>{const te=l.style.light,ue=te.properties.get("position"),ye=[ue.x,ue.y,ue.z],he=r.create$1();te.properties.get("anchor")==="viewport"&&(r.fromRotation(he,-l.transform.angle),r.transformMat3(ye,ye,he));const me=te.properties.get("color"),_e=l.transform,fe={u_matrix:_,u_lightpos:ye,u_lightintensity:te.properties.get("intensity"),u_lightcolor:[me.r,me.g,me.b],u_vertical_gradient:+f,u_opacity:b,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Yo,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:R,u_edge_radius:M};return _e.projection.name==="globe"&&(fe.u_tile_id=[F.canonical.x,F.canonical.y,1<<F.canonical.z],fe.u_zoom_transition=q,fe.u_inv_rot_matrix=X,fe.u_merc_center=Y,fe.u_up_dir=_e.projection.upVector(new r.CanonicalTileID(0,0,0),Y[0]*r.EXTENT,Y[1]*r.EXTENT),fe.u_height_lift=j),fe},dc=(_,l,f,b,R,M,F,j,q,Y,X,te,ue)=>{const ye=ho(_,l,f,b,R,M,F,Y,X,te,ue),he={u_height_factor:-Math.pow(2,F.overscaledZ)/q.tileSize/8};return r.extend(ye,uc(j,l,q),he)},Xo=_=>({u_matrix:_}),Hs=(_,l,f,b)=>r.extend(Xo(_),uc(f,l,b)),or=(_,l)=>({u_matrix:_,u_world:l}),Xa=(_,l,f,b,R)=>r.extend(Hs(_,l,f,b),{u_world:R}),pc=r.create(),Ja=(_,l,f,b,R,M)=>{const F=_.transform,j=F.projection.name==="globe";let q;if(M.paint.get("circle-pitch-alignment")==="map")if(j){const X=r.globePixelsToTileUnits(F.zoom,l.canonical)*F._pixelsPerMercatorPixel;q=Float32Array.from([X,0,0,X])}else q=F.calculatePixelsToTileUnitsMatrix(f);else q=new Float32Array([F.pixelsToGLUnits[0],0,0,F.pixelsToGLUnits[1]]);const Y={u_camera_to_center_distance:F.cameraToCenterDistance,u_matrix:_.translatePosMatrix(l.projMatrix,f,M.paint.get("circle-translate"),M.paint.get("circle-translate-anchor")),u_device_pixel_ratio:r.exported.devicePixelRatio,u_extrude_scale:q,u_inv_rot_matrix:pc,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(j){Y.u_inv_rot_matrix=b,Y.u_merc_center=R,Y.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],Y.u_zoom_transition=r.globeToMercatorTransition(F.zoom);const X=R[0]*r.EXTENT,te=R[1]*r.EXTENT;Y.u_up_dir=F.projection.upVector(new r.CanonicalTileID(0,0,0),X,te)}return Y},fc=_=>{const l=[];return _.paint.get("circle-pitch-alignment")==="map"&&l.push("PITCH_WITH_MAP"),_.paint.get("circle-pitch-scale")==="map"&&l.push("SCALE_WITH_MAP"),l},Qa=(_,l,f,b)=>{const R=r.EXTENT/f.tileSize;return{u_matrix:_,u_camera_to_center_distance:l.getCameraToCenterDistance(b),u_extrude_scale:[l.pixelsToGLUnits[0]/R,l.pixelsToGLUnits[1]/R]}},hc=(_,l,f=1)=>({u_matrix:_,u_color:l,u_overlay:0,u_overlay_scale:f}),el=r.create(),Vu=(_,l,f,b,R,M,F)=>{const j=_.transform,q=j.projection.name==="globe",Y=q?r.globePixelsToTileUnits(j.zoom,l.canonical)*j._pixelsPerMercatorPixel:En(f,1,M),X={u_matrix:l.projMatrix,u_extrude_scale:Y,u_intensity:F,u_inv_rot_matrix:el,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(q){X.u_inv_rot_matrix=b,X.u_merc_center=R,X.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],X.u_zoom_transition=r.globeToMercatorTransition(j.zoom);const te=R[0]*r.EXTENT,ue=R[1]*r.EXTENT;X.u_up_dir=j.projection.upVector(new r.CanonicalTileID(0,0,0),te,ue)}return X},Ks=(_,l,f,b,R,M,F,j)=>{const q=_.transform,Y=q.calculatePixelsToTileUnitsMatrix(l),X={u_matrix:mc(_,l,f,R),u_pixels_to_tile_units:Y,u_device_pixel_ratio:F,u_units_to_pixels:[1/q.pixelsToGLUnits[0],1/q.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:M,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0,u_alpha_discard_threshold:0,u_trim_offset:j};if(Zs(f)){const te=Ws(l,_.transform);X.u_texsize=l.lineAtlasTexture.size,X.u_scale=[te,b.fromScale,b.toScale],X.u_mix=b.t}return X},Uu=(_,l,f,b,R,M)=>{const F=_.transform,j=Ws(l,F);return{u_matrix:mc(_,l,f,R),u_texsize:l.imageAtlasTexture.size,u_pixels_to_tile_units:F.calculatePixelsToTileUnitsMatrix(l),u_device_pixel_ratio:M,u_image:0,u_scale:[j,b.fromScale,b.toScale],u_fade:b.t,u_units_to_pixels:[1/F.pixelsToGLUnits[0],1/F.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Ws(_,l){return 1/En(_,1,l.tileZoom)}function mc(_,l,f,b){return _.translatePosMatrix(b||l.tileID.projMatrix,l,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}function Zs(_){const l=_.paint.get("line-dasharray").value;return l.value||l.kind!=="constant"}const ju=(_,l,f,b,R,M)=>{return{u_matrix:_,u_tl_parent:l,u_scale_parent:f,u_fade_t:b.mix,u_opacity:b.opacity*R.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:R.paint.get("raster-brightness-min"),u_brightness_high:R.paint.get("raster-brightness-max"),u_saturation_factor:(j=R.paint.get("raster-saturation"),j>0?1-1/(1.001-j):-j),u_contrast_factor:(F=R.paint.get("raster-contrast"),F>0?1/(1-F):1+F),u_spin_weights:Ys(R.paint.get("raster-hue-rotate")),u_perspective_transform:M};var F,j};function Ys(_){_*=Math.PI/180;const l=Math.sin(_),f=Math.cos(_);return[(2*f+1)/3,(-Math.sqrt(3)*l-f+1)/3,(Math.sqrt(3)*l-f+1)/3]}const gc=r.create(),tl=(_,l,f,b,R,M,F,j,q,Y,X,te,ue,ye,he,me)=>{const _e=R.transform,fe={u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:_e.cameraToCenterDistance,u_rotate_symbol:+f,u_aspect_ratio:_e.width/_e.height,u_fade_change:R.options.fadeDuration?R.symbolFadeChange:1,u_matrix:M,u_label_plane_matrix:F,u_coord_matrix:j,u_is_text:+q,u_pitch_with_map:+b,u_texsize:Y,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:gc,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:gc,u_up_vector:[0,-1,0]};return me.name==="globe"&&(fe.u_tile_id=[X.canonical.x,X.canonical.y,1<<X.canonical.z],fe.u_zoom_transition=te,fe.u_inv_rot_matrix=ye,fe.u_merc_center=ue,fe.u_camera_forward=_e._camera.forward(),fe.u_ecef_origin=r.globeECEFOrigin(_e.globeMatrix,X.toUnwrapped()),fe.u_tile_matrix=Float32Array.from(_e.globeMatrix),fe.u_up_vector=he),fe},nl=(_,l,f,b,R,M,F,j,q,Y,X,te,ue,ye,he,me,_e)=>r.extend(tl(_,l,f,b,R,M,F,j,q,Y,te,ue,ye,he,me,_e),{u_gamma_scale:b?R.transform.cameraToCenterDistance*Math.cos(R.terrain?0:R.transform._pitch):1,u_device_pixel_ratio:r.exported.devicePixelRatio,u_is_halo:+X}),mo=(_,l,f,b,R,M,F,j,q,Y,X,te,ue,ye,he,me)=>r.extend(nl(_,l,f,b,R,M,F,j,!0,q,!0,X,te,ue,ye,he,me),{u_texsize_icon:Y,u_texture_icon:1}),Gu=(_,l,f)=>({u_matrix:_,u_opacity:l,u_color:f}),qu=(_,l,f,b,R,M)=>r.extend(function(F,j,q,Y){const X=q.imageManager.getPattern(F.from.toString()),te=q.imageManager.getPattern(F.to.toString()),{width:ue,height:ye}=q.imageManager.getPixelSize(),he=Math.pow(2,Y.tileID.overscaledZ),me=Y.tileSize*Math.pow(2,q.transform.tileZoom)/he,_e=me*(Y.tileID.canonical.x+Y.tileID.wrap*he),fe=me*Y.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:X.tl,u_pattern_br_a:X.br,u_pattern_tl_b:te.tl,u_pattern_br_b:te.br,u_texsize:[ue,ye],u_mix:j.t,u_pattern_size_a:X.displaySize,u_pattern_size_b:te.displaySize,u_scale_a:j.fromScale,u_scale_b:j.toScale,u_tile_units_to_pixels:1/En(Y,1,q.transform.tileZoom),u_pixel_coord_upper:[_e>>16,fe>>16],u_pixel_coord_lower:[65535&_e,65535&fe]}}(b,M,f,R),{u_matrix:_,u_opacity:l}),Hu={fillExtrusion:_=>({u_matrix:new r.UniformMatrix4f(_),u_lightpos:new r.Uniform3f(_),u_lightintensity:new r.Uniform1f(_),u_lightcolor:new r.Uniform3f(_),u_vertical_gradient:new r.Uniform1f(_),u_opacity:new r.Uniform1f(_),u_edge_radius:new r.Uniform1f(_),u_ao:new r.Uniform2f(_),u_tile_id:new r.Uniform3f(_),u_zoom_transition:new r.Uniform1f(_),u_inv_rot_matrix:new r.UniformMatrix4f(_),u_merc_center:new r.Uniform2f(_),u_up_dir:new r.Uniform3f(_),u_height_lift:new r.Uniform1f(_)}),fillExtrusionPattern:_=>({u_matrix:new r.UniformMatrix4f(_),u_lightpos:new r.Uniform3f(_),u_lightintensity:new r.Uniform1f(_),u_lightcolor:new r.Uniform3f(_),u_vertical_gradient:new r.Uniform1f(_),u_height_factor:new r.Uniform1f(_),u_edge_radius:new r.Uniform1f(_),u_ao:new r.Uniform2f(_),u_tile_id:new r.Uniform3f(_),u_zoom_transition:new r.Uniform1f(_),u_inv_rot_matrix:new r.UniformMatrix4f(_),u_merc_center:new r.Uniform2f(_),u_up_dir:new r.Uniform3f(_),u_height_lift:new r.Uniform1f(_),u_image:new r.Uniform1i(_),u_texsize:new r.Uniform2f(_),u_pixel_coord_upper:new r.Uniform2f(_),u_pixel_coord_lower:new r.Uniform2f(_),u_scale:new r.Uniform3f(_),u_fade:new r.Uniform1f(_),u_opacity:new r.Uniform1f(_)}),fill:_=>({u_matrix:new r.UniformMatrix4f(_)}),fillPattern:_=>({u_matrix:new r.UniformMatrix4f(_),u_image:new r.Uniform1i(_),u_texsize:new r.Uniform2f(_),u_pixel_coord_upper:new r.Uniform2f(_),u_pixel_coord_lower:new r.Uniform2f(_),u_scale:new r.Uniform3f(_),u_fade:new r.Uniform1f(_)}),fillOutline:_=>({u_matrix:new r.UniformMatrix4f(_),u_world:new r.Uniform2f(_)}),fillOutlinePattern:_=>({u_matrix:new r.UniformMatrix4f(_),u_world:new r.Uniform2f(_),u_image:new r.Uniform1i(_),u_texsize:new r.Uniform2f(_),u_pixel_coord_upper:new r.Uniform2f(_),u_pixel_coord_lower:new r.Uniform2f(_),u_scale:new r.Uniform3f(_),u_fade:new r.Uniform1f(_)}),circle:_=>({u_camera_to_center_distance:new r.Uniform1f(_),u_extrude_scale:new r.UniformMatrix2f(_),u_device_pixel_ratio:new r.Uniform1f(_),u_matrix:new r.UniformMatrix4f(_),u_inv_rot_matrix:new r.UniformMatrix4f(_),u_merc_center:new r.Uniform2f(_),u_tile_id:new r.Uniform3f(_),u_zoom_transition:new r.Uniform1f(_),u_up_dir:new r.Uniform3f(_)}),collisionBox:_=>({u_matrix:new r.UniformMatrix4f(_),u_camera_to_center_distance:new r.Uniform1f(_),u_extrude_scale:new r.Uniform2f(_)}),collisionCircle:_=>({u_matrix:new r.UniformMatrix4f(_),u_inv_matrix:new r.UniformMatrix4f(_),u_camera_to_center_distance:new r.Uniform1f(_),u_viewport_size:new r.Uniform2f(_)}),debug:_=>({u_color:new r.UniformColor(_),u_matrix:new r.UniformMatrix4f(_),u_overlay:new r.Uniform1i(_),u_overlay_scale:new r.Uniform1f(_)}),clippingMask:_=>({u_matrix:new r.UniformMatrix4f(_)}),heatmap:_=>({u_extrude_scale:new r.Uniform1f(_),u_intensity:new r.Uniform1f(_),u_matrix:new r.UniformMatrix4f(_),u_inv_rot_matrix:new r.UniformMatrix4f(_),u_merc_center:new r.Uniform2f(_),u_tile_id:new r.Uniform3f(_),u_zoom_transition:new r.Uniform1f(_),u_up_dir:new r.Uniform3f(_)}),heatmapTexture:_=>({u_image:new r.Uniform1i(_),u_color_ramp:new r.Uniform1i(_),u_opacity:new r.Uniform1f(_)}),hillshade:_=>({u_matrix:new r.UniformMatrix4f(_),u_image:new r.Uniform1i(_),u_latrange:new r.Uniform2f(_),u_light:new r.Uniform2f(_),u_shadow:new r.UniformColor(_),u_highlight:new r.UniformColor(_),u_accent:new r.UniformColor(_)}),hillshadePrepare:_=>({u_matrix:new r.UniformMatrix4f(_),u_image:new r.Uniform1i(_),u_dimension:new r.Uniform2f(_),u_zoom:new r.Uniform1f(_),u_unpack:new r.Uniform4f(_)}),line:_=>({u_matrix:new r.UniformMatrix4f(_),u_pixels_to_tile_units:new r.UniformMatrix2f(_),u_device_pixel_ratio:new r.Uniform1f(_),u_units_to_pixels:new r.Uniform2f(_),u_dash_image:new r.Uniform1i(_),u_gradient_image:new r.Uniform1i(_),u_image_height:new r.Uniform1f(_),u_texsize:new r.Uniform2f(_),u_scale:new r.Uniform3f(_),u_mix:new r.Uniform1f(_),u_alpha_discard_threshold:new r.Uniform1f(_),u_trim_offset:new r.Uniform2f(_)}),linePattern:_=>({u_matrix:new r.UniformMatrix4f(_),u_texsize:new r.Uniform2f(_),u_pixels_to_tile_units:new r.UniformMatrix2f(_),u_device_pixel_ratio:new r.Uniform1f(_),u_image:new r.Uniform1i(_),u_units_to_pixels:new r.Uniform2f(_),u_scale:new r.Uniform3f(_),u_fade:new r.Uniform1f(_),u_alpha_discard_threshold:new r.Uniform1f(_)}),raster:_=>({u_matrix:new r.UniformMatrix4f(_),u_tl_parent:new r.Uniform2f(_),u_scale_parent:new r.Uniform1f(_),u_fade_t:new r.Uniform1f(_),u_opacity:new r.Uniform1f(_),u_image0:new r.Uniform1i(_),u_image1:new r.Uniform1i(_),u_brightness_low:new r.Uniform1f(_),u_brightness_high:new r.Uniform1f(_),u_saturation_factor:new r.Uniform1f(_),u_contrast_factor:new r.Uniform1f(_),u_spin_weights:new r.Uniform3f(_),u_perspective_transform:new r.Uniform2f(_)}),symbolIcon:_=>({u_is_size_zoom_constant:new r.Uniform1i(_),u_is_size_feature_constant:new r.Uniform1i(_),u_size_t:new r.Uniform1f(_),u_size:new r.Uniform1f(_),u_camera_to_center_distance:new r.Uniform1f(_),u_rotate_symbol:new r.Uniform1i(_),u_aspect_ratio:new r.Uniform1f(_),u_fade_change:new r.Uniform1f(_),u_matrix:new r.UniformMatrix4f(_),u_label_plane_matrix:new r.UniformMatrix4f(_),u_coord_matrix:new r.UniformMatrix4f(_),u_is_text:new r.Uniform1i(_),u_pitch_with_map:new r.Uniform1i(_),u_texsize:new r.Uniform2f(_),u_tile_id:new r.Uniform3f(_),u_zoom_transition:new r.Uniform1f(_),u_inv_rot_matrix:new r.UniformMatrix4f(_),u_merc_center:new r.Uniform2f(_),u_camera_forward:new r.Uniform3f(_),u_tile_matrix:new r.UniformMatrix4f(_),u_up_vector:new r.Uniform3f(_),u_ecef_origin:new r.Uniform3f(_),u_texture:new r.Uniform1i(_)}),symbolSDF:_=>({u_is_size_zoom_constant:new r.Uniform1i(_),u_is_size_feature_constant:new r.Uniform1i(_),u_size_t:new r.Uniform1f(_),u_size:new r.Uniform1f(_),u_camera_to_center_distance:new r.Uniform1f(_),u_rotate_symbol:new r.Uniform1i(_),u_aspect_ratio:new r.Uniform1f(_),u_fade_change:new r.Uniform1f(_),u_matrix:new r.UniformMatrix4f(_),u_label_plane_matrix:new r.UniformMatrix4f(_),u_coord_matrix:new r.UniformMatrix4f(_),u_is_text:new r.Uniform1i(_),u_pitch_with_map:new r.Uniform1i(_),u_texsize:new r.Uniform2f(_),u_texture:new r.Uniform1i(_),u_gamma_scale:new r.Uniform1f(_),u_device_pixel_ratio:new r.Uniform1f(_),u_tile_id:new r.Uniform3f(_),u_zoom_transition:new r.Uniform1f(_),u_inv_rot_matrix:new r.UniformMatrix4f(_),u_merc_center:new r.Uniform2f(_),u_camera_forward:new r.Uniform3f(_),u_tile_matrix:new r.UniformMatrix4f(_),u_up_vector:new r.Uniform3f(_),u_ecef_origin:new r.Uniform3f(_),u_is_halo:new r.Uniform1i(_)}),symbolTextAndIcon:_=>({u_is_size_zoom_constant:new r.Uniform1i(_),u_is_size_feature_constant:new r.Uniform1i(_),u_size_t:new r.Uniform1f(_),u_size:new r.Uniform1f(_),u_camera_to_center_distance:new r.Uniform1f(_),u_rotate_symbol:new r.Uniform1i(_),u_aspect_ratio:new r.Uniform1f(_),u_fade_change:new r.Uniform1f(_),u_matrix:new r.UniformMatrix4f(_),u_label_plane_matrix:new r.UniformMatrix4f(_),u_coord_matrix:new r.UniformMatrix4f(_),u_is_text:new r.Uniform1i(_),u_pitch_with_map:new r.Uniform1i(_),u_texsize:new r.Uniform2f(_),u_texsize_icon:new r.Uniform2f(_),u_texture:new r.Uniform1i(_),u_texture_icon:new r.Uniform1i(_),u_gamma_scale:new r.Uniform1f(_),u_device_pixel_ratio:new r.Uniform1f(_),u_is_halo:new r.Uniform1i(_)}),background:_=>({u_matrix:new r.UniformMatrix4f(_),u_opacity:new r.Uniform1f(_),u_color:new r.UniformColor(_)}),backgroundPattern:_=>({u_matrix:new r.UniformMatrix4f(_),u_opacity:new r.Uniform1f(_),u_image:new r.Uniform1i(_),u_pattern_tl_a:new r.Uniform2f(_),u_pattern_br_a:new r.Uniform2f(_),u_pattern_tl_b:new r.Uniform2f(_),u_pattern_br_b:new r.Uniform2f(_),u_texsize:new r.Uniform2f(_),u_mix:new r.Uniform1f(_),u_pattern_size_a:new r.Uniform2f(_),u_pattern_size_b:new r.Uniform2f(_),u_scale_a:new r.Uniform1f(_),u_scale_b:new r.Uniform1f(_),u_pixel_coord_upper:new r.Uniform2f(_),u_pixel_coord_lower:new r.Uniform2f(_),u_tile_units_to_pixels:new r.Uniform1f(_)}),terrainRaster:Wo,terrainDepth:Wo,skybox:_=>({u_matrix:new r.UniformMatrix4f(_),u_sun_direction:new r.Uniform3f(_),u_cubemap:new r.Uniform1i(_),u_opacity:new r.Uniform1f(_),u_temporal_offset:new r.Uniform1f(_)}),skyboxGradient:_=>({u_matrix:new r.UniformMatrix4f(_),u_color_ramp:new r.Uniform1i(_),u_center_direction:new r.Uniform3f(_),u_radius:new r.Uniform1f(_),u_opacity:new r.Uniform1f(_),u_temporal_offset:new r.Uniform1f(_)}),skyboxCapture:_=>({u_matrix_3f:new r.UniformMatrix3f(_),u_sun_direction:new r.Uniform3f(_),u_sun_intensity:new r.Uniform1f(_),u_color_tint_r:new r.Uniform4f(_),u_color_tint_m:new r.Uniform4f(_),u_luminance:new r.Uniform1f(_)}),globeRaster:_=>({u_proj_matrix:new r.UniformMatrix4f(_),u_globe_matrix:new r.UniformMatrix4f(_),u_normalize_matrix:new r.UniformMatrix4f(_),u_merc_matrix:new r.UniformMatrix4f(_),u_zoom_transition:new r.Uniform1f(_),u_merc_center:new r.Uniform2f(_),u_image0:new r.Uniform1i(_),u_grid_matrix:new r.UniformMatrix3f(_),u_frustum_tl:new r.Uniform3f(_),u_frustum_tr:new r.Uniform3f(_),u_frustum_br:new r.Uniform3f(_),u_frustum_bl:new r.Uniform3f(_),u_globe_pos:new r.Uniform3f(_),u_globe_radius:new r.Uniform1f(_),u_viewport:new r.Uniform2f(_)}),globeAtmosphere:_=>({u_frustum_tl:new r.Uniform3f(_),u_frustum_tr:new r.Uniform3f(_),u_frustum_br:new r.Uniform3f(_),u_frustum_bl:new r.Uniform3f(_),u_horizon:new r.Uniform1f(_),u_transition:new r.Uniform1f(_),u_fadeout_range:new r.Uniform1f(_),u_color:new r.Uniform4f(_),u_high_color:new r.Uniform4f(_),u_space_color:new r.Uniform4f(_),u_star_intensity:new r.Uniform1f(_),u_star_density:new r.Uniform1f(_),u_star_size:new r.Uniform1f(_),u_temporal_offset:new r.Uniform1f(_),u_horizon_angle:new r.Uniform1f(_),u_rotation_matrix:new r.UniformMatrix4f(_)})};let Xs;function _c(_,l,f,b,R,M,F){const j=_.context,q=j.gl,Y=_.transform,X=_.useProgram("collisionBox"),te=[];let ue=0,ye=0;for(let Be=0;Be<b.length;Be++){const Oe=b[Be],$e=l.getTile(Oe),De=$e.getBucket(f);if(!De)continue;const Le=Ii(Oe,De,Y);let Ge=Le;R[0]===0&&R[1]===0||(Ge=_.translatePosMatrix(Le,$e,R,M));const Je=F?De.textCollisionBox:De.iconCollisionBox,kt=De.collisionCircleArray;if(kt.length>0){const Ke=r.create(),pt=Ge;r.mul(Ke,De.placementInvProjMatrix,Y.glCoordMatrix),r.mul(Ke,Ke,De.placementViewportMatrix),te.push({circleArray:kt,circleOffset:ye,transform:pt,invTransform:Ke,projection:De.getProjection()}),ue+=kt.length/4,ye=ue}Je&&(_.terrain&&_.terrain.setupElevationDraw($e,X),X.draw(j,q.LINES,r.DepthMode.disabled,r.StencilMode.disabled,_.colorModeForRenderPass(),r.CullFaceMode.disabled,Qa(Ge,Y,$e,De.getProjection()),f.id,Je.layoutVertexBuffer,Je.indexBuffer,Je.segments,null,Y.zoom,null,[Je.collisionVertexBuffer,Je.collisionVertexBufferExt]))}if(!F||!te.length)return;const he=_.useProgram("collisionCircle"),me=new r.StructArrayLayout2f1f2i16;me.resize(4*ue),me._trim();let _e=0;for(const Be of te)for(let Oe=0;Oe<Be.circleArray.length/4;Oe++){const $e=4*Oe,De=Be.circleArray[$e+0],Le=Be.circleArray[$e+1],Ge=Be.circleArray[$e+2],Je=Be.circleArray[$e+3];me.emplace(_e++,De,Le,Ge,Je,0),me.emplace(_e++,De,Le,Ge,Je,1),me.emplace(_e++,De,Le,Ge,Je,2),me.emplace(_e++,De,Le,Ge,Je,3)}(!Xs||Xs.length<2*ue)&&(Xs=function(Be){const Oe=2*Be,$e=new r.StructArrayLayout3ui6;$e.resize(Oe),$e._trim();for(let De=0;De<Oe;De++){const Le=6*De;$e.uint16[Le+0]=4*De+0,$e.uint16[Le+1]=4*De+1,$e.uint16[Le+2]=4*De+2,$e.uint16[Le+3]=4*De+2,$e.uint16[Le+4]=4*De+3,$e.uint16[Le+5]=4*De+0}return $e}(ue));const fe=j.createIndexBuffer(Xs,!0),Ce=j.createVertexBuffer(me,r.collisionCircleLayout.members,!0);for(const Be of te){const Oe={u_matrix:Be.transform,u_inv_matrix:Be.invTransform,u_camera_to_center_distance:(be=Y).getCameraToCenterDistance(Be.projection),u_viewport_size:[be.width,be.height]};he.draw(j,q.TRIANGLES,r.DepthMode.disabled,r.StencilMode.disabled,_.colorModeForRenderPass(),r.CullFaceMode.disabled,Oe,f.id,Ce,fe,r.SegmentVector.simpleSegment(0,2*Be.circleOffset,Be.circleArray.length,Be.circleArray.length/2),null,Y.zoom)}var be;Ce.destroy(),fe.destroy()}const vc=r.create();function il(_,l,f,b,R,M){const{horizontalAlign:F,verticalAlign:j}=r.getAnchorAlignment(_),q=-(F-.5)*l,Y=-(j-.5)*f,X=r.evaluateVariableOffset(_,b);return new r.pointGeometry((q/R+X[0])*M,(Y/R+X[1])*M)}function rl(_,l,f,b,R,M,F,j,q,Y,X){const te=_.text.placedSymbolArray,ue=_.text.dynamicLayoutVertexArray,ye=_.icon.dynamicLayoutVertexArray,he={},me=Li(j,_.getProjection(),M),_e=M.elevation,fe=_.getProjection().upVectorScale(j.canonical,M.center.lat,M.worldSize);ue.clear();for(let Ce=0;Ce<te.length;Ce++){const be=te.get(Ce),Be=_.allowVerticalPlacement&&!be.placedOrientation,Oe=be.hidden||!be.crossTileID||Be?null:b[be.crossTileID];if(Oe){const $e=new r.pointGeometry(be.tileAnchorX,be.tileAnchorY),De=_.getProjection().upVector(j.canonical,$e.x,$e.y),Le=_e?_e.getAtTileOffset(j,$e.x,$e.y):0,Ge=mn([be.projectedAnchorX+Le*De[0]*fe.metersToTile,be.projectedAnchorY+Le*De[1]*fe.metersToTile,be.projectedAnchorZ+Le*De[2]*fe.metersToTile],f?me:F),Je=zo(M.getCameraToCenterDistance(_.getProjection()),Ge.signedDistanceFromCamera);let kt=R.evaluateSizeForFeature(_.textSizeData,Y,be)*Je/r.ONE_EM;f&&(kt*=_.tilePixelRatio/q);const{width:Ke,height:pt,anchor:_t,textOffset:It,textScale:ot}=Oe,$t=il(_t,Ke,pt,It,ot,kt);let mt;if(f){const Ot=$e.add($t),{x:Kt,y:Qt,z:dn}=_.getProjection().projectTilePoint(Ot.x,Ot.y,j.canonical);mt=mn([Kt+Le*De[0]*fe.metersToTile,Qt+Le*De[1]*fe.metersToTile,dn+Le*De[2]*fe.metersToTile],F).point}else{const Ot=l?$t.rotate(-M.angle):$t;mt=[Ge.point[0]+Ot.x,Ge.point[1]+Ot.y,0]}const Pt=_.allowVerticalPlacement&&be.placedOrientation===r.WritingMode.vertical?Math.PI/2:0;for(let Ot=0;Ot<be.numGlyphs;Ot++)r.addDynamicAttributes(ue,mt[0],mt[1],mt[2],Pt);X&&be.associatedIconIndex>=0&&(he[be.associatedIconIndex]={shiftedAnchor:mt,angle:Pt})}else Ar(be.numGlyphs,ue)}if(X){ye.clear();const Ce=_.icon.placedSymbolArray;for(let be=0;be<Ce.length;be++){const Be=Ce.get(be);if(Be.hidden)Ar(Be.numGlyphs,ye);else{const Oe=he[be];if(Oe)for(let $e=0;$e<Be.numGlyphs;$e++)r.addDynamicAttributes(ye,Oe.shiftedAnchor[0],Oe.shiftedAnchor[1],Oe.shiftedAnchor[2],Oe.angle);else Ar(Be.numGlyphs,ye)}}_.icon.dynamicLayoutVertexBuffer.updateData(ye)}_.text.dynamicLayoutVertexBuffer.updateData(ue)}function yc(_,l,f){return f.iconsInText&&l?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function ol(_,l,f,b,R,M,F,j,q,Y,X,te){const ue=_.context,ye=ue.gl,he=_.transform,me=j==="map",_e=q==="map",fe=me&&f.layout.get("symbol-placement")!=="point",Ce=me&&!_e&&!fe,be=f.layout.get("symbol-sort-key").constantOr(1)!==void 0;let Be=!1;const Oe=_.depthModeForSublayer(0,r.DepthMode.ReadOnly),$e=[r.mercatorXfromLng(he.center.lng),r.mercatorYfromLat(he.center.lat)],De=f.layout.get("text-variable-anchor"),Le=he.projection.name==="globe",Ge=[],Je=[0,-1,0];let kt=Je;!Le&&!he.mercatorFromTransition||me||(kt=function(Ke){const pt=Ke._camera.getWorldToCamera(Ke.worldSize,1),_t=r.multiply([],pt,Ke.globeMatrix);r.invert(_t,_t);const It=[0,0,0],ot=[0,1,0,0];return r.transformMat4$1(ot,ot,_t),It[0]=ot[0],It[1]=ot[1],It[2]=ot[2],r.normalize(It,It),It}(he));for(const Ke of b){const pt=l.getTile(Ke),_t=pt.getBucket(f);if(!_t||_t.projection.name==="mercator"&&Le)continue;const It=R?_t.text:_t.icon;if(!It||_t.fullyClipped||!It.segments.get().length)continue;const ot=It.programConfigurations.get(f.id),$t=R||_t.sdfIcons,mt=R?_t.textSizeData:_t.iconSizeData,Pt=_e||he.pitch!==0,Ot=r.evaluateSizeForZoom(mt,he.zoom);let Kt,Qt,dn,Cn,Wt=[0,0],fn=null;if(R){if(Qt=pt.glyphAtlasTexture,dn=ye.LINEAR,Kt=pt.glyphAtlasTexture.size,_t.iconsInText){Wt=pt.imageAtlasTexture.size,fn=pt.imageAtlasTexture;const $i=mt.kind==="composite"||mt.kind==="camera";Cn=Pt||_.options.rotating||_.options.zooming||$i?ye.LINEAR:ye.NEAREST}}else{const $i=f.layout.get("icon-size").constantOr(0)!==1||_t.iconsNeedLinear;Qt=pt.imageAtlasTexture,dn=$t||_.options.rotating||_.options.zooming||$i||Pt?ye.LINEAR:ye.NEAREST,Kt=pt.imageAtlasTexture.size}const kn=_t.projection.name==="globe",Kn=kn?kt:Je,ri=kn?r.globeToMercatorTransition(he.zoom):0,Dn=Li(Ke,_t.getProjection(),he),gi=he.calculatePixelsToTileUnitsMatrix(pt),nr=xn(Dn,pt.tileID.canonical,_e,me,he,_t.getProjection(),gi),hr=_.terrain&&_e&&fe?r.invert(r.create(),nr):vc,Wn=Ji(Dn,pt.tileID.canonical,_e,me,he,_t.getProjection(),gi),Yn=De&&_t.hasTextData(),bn=f.layout.get("icon-text-fit")!=="none"&&Yn&&_t.hasIconData();if(fe){const $i=he.elevation,Xr=$i?$i.getAtTileOffsetFunc(Ke,he.center.lat,he.worldSize,_t.getProjection()):gs=>[0,0,0],Ir=wn(Dn,pt.tileID.canonical,_e,me,he,_t.getProjection(),gi);Vo(_t,Dn,_,R,Ir,Wn,_e,Y,Xr,Ke)}const ci=fe||R&&De||bn,wi=_.translatePosMatrix(Dn,pt,M,F),jn=ci?vc:nr,Ei=_.translatePosMatrix(Wn,pt,M,F,!0),Kr=_t.getProjection().createInversionMatrix(he,Ke.canonical),Ri=[];_.terrain&&_e&&Ri.push("PITCH_WITH_MAP_TERRAIN"),kn&&Ri.push("PROJECTION_GLOBE_VIEW"),ci&&Ri.push("PROJECTED_POS_ON_VIEWPORT");const Wr=$t&&f.paint.get(R?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Zr;Zr=$t?_t.iconsInText?mo(mt.kind,Ot,Ce,_e,_,wi,jn,Ei,Kt,Wt,Ke,ri,$e,Kr,Kn,_t.getProjection()):nl(mt.kind,Ot,Ce,_e,_,wi,jn,Ei,R,Kt,!0,Ke,ri,$e,Kr,Kn,_t.getProjection()):tl(mt.kind,Ot,Ce,_e,_,wi,jn,Ei,R,Kt,Ke,ri,$e,Kr,Kn,_t.getProjection());const Yr={program:_.useProgram(yc($t,R,_t),ot,Ri),buffers:It,uniformValues:Zr,atlasTexture:Qt,atlasTextureIcon:fn,atlasInterpolation:dn,atlasInterpolationIcon:Cn,isSDF:$t,hasHalo:Wr,tile:pt,labelPlaneMatrixInv:hr};if(be&&_t.canOverlap){Be=!0;const $i=It.segments.get();for(const Xr of $i)Ge.push({segments:new r.SegmentVector([Xr]),sortKey:Xr.sortKey,state:Yr})}else Ge.push({segments:It.segments,sortKey:0,state:Yr})}Be&&Ge.sort((Ke,pt)=>Ke.sortKey-pt.sortKey);for(const Ke of Ge){const pt=Ke.state;if(_.terrain&&_.terrain.setupElevationDraw(pt.tile,pt.program,{useDepthForOcclusion:!Le,labelPlaneMatrixInv:pt.labelPlaneMatrixInv}),ue.activeTexture.set(ye.TEXTURE0),pt.atlasTexture.bind(pt.atlasInterpolation,ye.CLAMP_TO_EDGE),pt.atlasTextureIcon&&(ue.activeTexture.set(ye.TEXTURE1),pt.atlasTextureIcon&&pt.atlasTextureIcon.bind(pt.atlasInterpolationIcon,ye.CLAMP_TO_EDGE)),pt.isSDF){const _t=pt.uniformValues;pt.hasHalo&&(_t.u_is_halo=1,sl(pt.buffers,Ke.segments,f,_,pt.program,Oe,X,te,_t)),_t.u_is_halo=0}sl(pt.buffers,Ke.segments,f,_,pt.program,Oe,X,te,pt.uniformValues)}}function sl(_,l,f,b,R,M,F,j,q){const Y=b.context,X=[_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer,_.globeExtVertexBuffer];R.draw(Y,Y.gl.TRIANGLES,M,F,j,r.CullFaceMode.disabled,q,f.id,_.layoutVertexBuffer,_.indexBuffer,l,f.paint,b.transform.zoom,_.programConfigurations.get(f.id),X)}function Js(_,l,f,b,R,M,F){const j=_.context.gl,q=f.paint.get("fill-pattern"),Y=q&&q.constantOr(1),X=f.getCrossfadeParameters();let te,ue,ye,he,me;F?(ue=Y&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",te=j.LINES):(ue=Y?"fillPattern":"fill",te=j.TRIANGLES);for(const _e of b){const fe=l.getTile(_e);if(Y&&!fe.patternsLoaded())continue;const Ce=fe.getBucket(f);if(!Ce)continue;_.prepareDrawTile();const be=Ce.programConfigurations.get(f.id),Be=_.useProgram(ue,be);Y&&(_.context.activeTexture.set(j.TEXTURE0),fe.imageAtlasTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),be.updatePaintBuffers(X));const Oe=q.constantOr(null);if(Oe&&fe.imageAtlas){const De=fe.imageAtlas,Le=De.patternPositions[Oe.to.toString()],Ge=De.patternPositions[Oe.from.toString()];Le&&Ge&&be.setConstantPatternPositions(Le,Ge)}const $e=_.translatePosMatrix(_e.projMatrix,fe,f.paint.get("fill-translate"),f.paint.get("fill-translate-anchor"));if(F){he=Ce.indexBuffer2,me=Ce.segments2;const De=_.terrain&&_.terrain.renderingToTexture?_.terrain.drapeBufferSize:[j.drawingBufferWidth,j.drawingBufferHeight];ye=ue==="fillOutlinePattern"&&Y?Xa($e,_,X,fe,De):or($e,De)}else he=Ce.indexBuffer,me=Ce.segments,ye=Y?Hs($e,_,X,fe):Xo($e);_.prepareDrawProgram(_.context,Be,_e.toUnwrapped()),Be.draw(_.context,te,R,_.stencilModeForClipping(_e),M,r.CullFaceMode.disabled,ye,f.id,Ce.layoutVertexBuffer,he,me,f.paint,_.transform.zoom,be)}}function dr(_,l,f,b,R,M,F){const j=_.context,q=j.gl,Y=_.transform,X=f.paint.get("fill-extrusion-pattern"),te=X.constantOr(1),ue=f.getCrossfadeParameters(),ye=f.paint.get("fill-extrusion-opacity"),he=[f.paint.get("fill-extrusion-ambient-occlusion-intensity"),f.paint.get("fill-extrusion-ambient-occlusion-radius")],me=f.layout.get("fill-extrusion-edge-radius"),_e=Y.projection.name==="globe"?r.fillExtrusionHeightLift():0,fe=Y.projection.name==="globe",Ce=fe?r.globeToMercatorTransition(Y.zoom):0,be=[r.mercatorXfromLng(Y.center.lng),r.mercatorYfromLat(Y.center.lat)],Be=[];fe&&(Be.push("PROJECTION_GLOBE_VIEW"),_.style.terrainSetForDrapingOnly()&&Be.push("TERRAIN")),he[0]>0&&Be.push("FAUX_AO");for(const Oe of b){const $e=l.getTile(Oe),De=$e.getBucket(f);if(!De||De.projection.name!==Y.projection.name)continue;const Le=De.programConfigurations.get(f.id),Ge=_.useProgram(te?"fillExtrusionPattern":"fillExtrusion",Le,Be);if(_.terrain){const ot=_.terrain;if(_.style.terrainSetForDrapingOnly())ot.setupElevationDraw($e,Ge,{useMeterToDem:!0});else{if(!De.enableTerrain)continue;if(ot.setupElevationDraw($e,Ge,{useMeterToDem:!0}),Jo(j,l,Oe,De,f,ot),!De.centroidVertexBuffer){const $t=Ge.attributes.a_centroid_pos;$t!==void 0&&q.vertexAttrib2f($t,0,0)}}}te&&(_.context.activeTexture.set(q.TEXTURE0),$e.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),Le.updatePaintBuffers(ue));const Je=X.constantOr(null);if(Je&&$e.imageAtlas){const ot=$e.imageAtlas,$t=ot.patternPositions[Je.to.toString()],mt=ot.patternPositions[Je.from.toString()];$t&&mt&&Le.setConstantPatternPositions($t,mt)}const kt=_.translatePosMatrix(Oe.projMatrix,$e,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),Ke=Y.projection.createInversionMatrix(Y,Oe.canonical),pt=f.paint.get("fill-extrusion-vertical-gradient"),_t=te?dc(kt,_,pt,ye,he,me,Oe,ue,$e,_e,Ce,be,Ke):ho(kt,_,pt,ye,he,me,Oe,_e,Ce,be,Ke);_.prepareDrawProgram(j,Ge,Oe.toUnwrapped());const It=[];_.terrain&&It.push(De.centroidVertexBuffer),fe&&It.push(De.layoutVertexExtBuffer),Ge.draw(j,j.gl.TRIANGLES,R,M,F,r.CullFaceMode.backCCW,_t,f.id,De.layoutVertexBuffer,De.indexBuffer,De.segments,f.paint,_.transform.zoom,Le,It)}}function Jo(_,l,f,b,R,M){const F=[fe=>{let Ce=fe.canonical.x-1,be=fe.wrap;return Ce<0&&(Ce=(1<<fe.canonical.z)-1,be--),new r.OverscaledTileID(fe.overscaledZ,be,fe.canonical.z,Ce,fe.canonical.y)},fe=>{let Ce=fe.canonical.x+1,be=fe.wrap;return Ce===1<<fe.canonical.z&&(Ce=0,be++),new r.OverscaledTileID(fe.overscaledZ,be,fe.canonical.z,Ce,fe.canonical.y)},fe=>new r.OverscaledTileID(fe.overscaledZ,fe.wrap,fe.canonical.z,fe.canonical.x,(fe.canonical.y===0?1<<fe.canonical.z:fe.canonical.y)-1),fe=>new r.OverscaledTileID(fe.overscaledZ,fe.wrap,fe.canonical.z,fe.canonical.x,fe.canonical.y===(1<<fe.canonical.z)-1?0:fe.canonical.y+1)],j=fe=>{const Ce=l.getSource().minzoom,be=Oe=>{const $e=l.getTileByID(Oe);if($e&&$e.hasData())return $e.getBucket(R)},Be=[0,-1,1];for(const Oe of Be){if(fe.overscaledZ+Oe<Ce)continue;const $e=be(fe.calculateScaledKey(fe.overscaledZ+Oe));if($e)return $e}},q=[0,0,0],Y=(fe,Ce)=>(q[0]=Math.min(fe.min.y,Ce.min.y),q[1]=Math.max(fe.max.y,Ce.max.y),q[2]=r.EXTENT-Ce.min.x>fe.max.x?Ce.min.x-r.EXTENT:fe.max.x,q),X=(fe,Ce)=>(q[0]=Math.min(fe.min.x,Ce.min.x),q[1]=Math.max(fe.max.x,Ce.max.x),q[2]=r.EXTENT-Ce.min.y>fe.max.y?Ce.min.y-r.EXTENT:fe.max.y,q),te=[(fe,Ce)=>Y(fe,Ce),(fe,Ce)=>Y(Ce,fe),(fe,Ce)=>X(fe,Ce),(fe,Ce)=>X(Ce,fe)],ue=new r.pointGeometry(0,0);let ye,he,me;const _e=(fe,Ce,be,Be,Oe)=>{const $e=[[Be?be:fe,Be?fe:be,0],[Be?be:Ce,Be?Ce:be,0]],De=Oe<0?r.EXTENT+Oe:Oe,Le=[Be?De:(fe+Ce)/2,Be?(fe+Ce)/2:De,0];return be===0&&Oe<0||be!==0&&Oe>0?M.getForTilePoints(me,[Le],!0,he):$e.push(Le),M.getForTilePoints(f,$e,!0,ye),Math.max($e[0][2],$e[1][2],Le[2])/M.exaggeration()};for(let fe=0;fe<4;fe++){const Ce=(fe<2?1:5)-fe,be=b.borders[fe];if(be.length===0)continue;const Be=me=F[fe](f),Oe=j(Be);if(!(Oe&&Oe instanceof r.FillExtrusionBucket&&Oe.enableTerrain)||b.borderDoneWithNeighborZ[fe]===Oe.canonical.z&&Oe.borderDoneWithNeighborZ[Ce]===b.canonical.z||(he=M.findDEMTileFor(Be),!he||!he.dem))continue;if(!ye){const Ge=M.findDEMTileFor(f);if(!Ge||!Ge.dem)return;ye=Ge}const $e=Oe.borders[Ce];let De=0;const Le=Oe.borderDoneWithNeighborZ[Ce]!==b.canonical.z;if(b.canonical.z===Oe.canonical.z){for(let Ge=0;Ge<be.length;Ge++){const Je=b.featuresOnBorder[be[Ge]],kt=Je.borders[fe];let Ke;for(;De<$e.length&&(Ke=Oe.featuresOnBorder[$e[De]],!(Ke.borders[Ce][1]>kt[0]+3));)Le&&Oe.encodeCentroid(void 0,Ke,!1),De++;if(Ke&&De<$e.length){const pt=De;let _t=0;for(;!(Ke.borders[Ce][0]>kt[1]-3)&&(_t++,++De!==$e.length);)Ke=Oe.featuresOnBorder[$e[De]];if(Ke=Oe.featuresOnBorder[$e[pt]],Je.intersectsCount()>1||Ke.intersectsCount()>1||_t!==1){_t!==1&&(De=pt),b.encodeCentroid(void 0,Je,!1),Le&&Oe.encodeCentroid(void 0,Ke,!1);continue}const It=te[fe](Je,Ke),ot=fe%2?r.EXTENT-1:0;ue.x=_e(It[0],Math.min(r.EXTENT-1,It[1]),ot,fe<2,It[2]),ue.y=0,b.encodeCentroid(ue,Je,!1),Le&&Oe.encodeCentroid(ue,Ke,!1)}else b.encodeCentroid(void 0,Je,!1)}b.borderDoneWithNeighborZ[fe]=Oe.canonical.z,b.needsCentroidUpdate=!0,Le&&(Oe.borderDoneWithNeighborZ[Ce]=b.canonical.z,Oe.needsCentroidUpdate=!0)}else{for(const Ge of be)b.encodeCentroid(void 0,b.featuresOnBorder[Ge],!1);if(Le){for(const Ge of $e)Oe.encodeCentroid(void 0,Oe.featuresOnBorder[Ge],!1);Oe.borderDoneWithNeighborZ[Ce]=b.canonical.z,Oe.needsCentroidUpdate=!0}b.borderDoneWithNeighborZ[fe]=Oe.canonical.z,b.needsCentroidUpdate=!0}}(b.needsCentroidUpdate||!b.centroidVertexBuffer&&b.centroidVertexArray.length!==0)&&b.uploadCentroid(_)}const bc=new r.Color(1,0,0,1),_o=new r.Color(0,1,0,1),vo=new r.Color(0,0,1,1),xc=new r.Color(1,0,1,1),al=new r.Color(0,1,1,1);function Nn(_,l,f){const b=_.context,R=_.transform,M=b.gl,F=R.projection.name==="globe",j=F?["PROJECTION_GLOBE_VIEW"]:null;let q=f.projMatrix;if(F&&r.globeToMercatorTransition(R.zoom)>0){const Je=r.transitionTileAABBinECEF(f.canonical,R),kt=r.globeDenormalizeECEF(Je);q=r.multiply(new Float32Array(16),R.globeMatrix,kt),r.multiply(q,R.projMatrix,q)}const Y=_.useProgram("debug",null,j),X=l.getTileByID(f.key);_.terrain&&_.terrain.setupElevationDraw(X,Y);const te=r.DepthMode.disabled,ue=r.StencilMode.disabled,ye=_.colorModeForRenderPass(),he="$debug";b.activeTexture.set(M.TEXTURE0),_.emptyTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),F?X._makeGlobeTileDebugBuffers(_.context,R):X._makeDebugTileBoundsBuffers(_.context,R.projection);const me=X._tileDebugBuffer||_.debugBuffer,_e=X._tileDebugIndexBuffer||_.debugIndexBuffer,fe=X._tileDebugSegments||_.debugSegments;Y.draw(b,M.LINE_STRIP,te,ue,ye,r.CullFaceMode.disabled,hc(q,r.Color.red),he,me,_e,fe,null,null,null,[X._globeTileDebugBorderBuffer]);const Ce=X.latestRawTileData,be=Math.floor((Ce&&Ce.byteLength||0)/1024),Be=l.getTile(f).tileSize,Oe=512/Math.min(Be,512)*(f.overscaledZ/R.zoom)*.5;let $e=f.canonical.toString();f.overscaledZ!==f.canonical.z&&($e+=` => ${f.overscaledZ}`),$e+=` ${be}kb`,function(Je,kt){Je.initDebugOverlayCanvas();const Ke=Je.debugOverlayCanvas,pt=Je.context.gl,_t=Je.debugOverlayCanvas.getContext("2d");_t.clearRect(0,0,Ke.width,Ke.height),_t.shadowColor="white",_t.shadowBlur=2,_t.lineWidth=1.5,_t.strokeStyle="white",_t.textBaseline="top",_t.font="bold 36px Open Sans, sans-serif",_t.fillText(kt,5,5),_t.strokeText(kt,5,5),Je.debugOverlayTexture.update(Ke),Je.debugOverlayTexture.bind(pt.LINEAR,pt.CLAMP_TO_EDGE)}(_,$e);const De=X._tileDebugTextBuffer||_.debugBuffer,Le=X._tileDebugTextIndexBuffer||_.quadTriangleIndexBuffer,Ge=X._tileDebugTextSegments||_.debugSegments;Y.draw(b,M.TRIANGLES,te,ue,r.ColorMode.alphaBlended,r.CullFaceMode.disabled,hc(q,r.Color.transparent,Oe),he,De,Le,Ge,null,null,null,[X._globeTileDebugTextBuffer])}function Qo(_,l,f,b){es(_,0,l+f/2,_.transform.width,f,b)}function wc(_,l,f,b){es(_,l-f/2,0,f,_.transform.height,b)}function es(_,l,f,b,R,M){const F=_.context,j=F.gl;j.enable(j.SCISSOR_TEST),j.scissor(l*r.exported.devicePixelRatio,f*r.exported.devicePixelRatio,b*r.exported.devicePixelRatio,R*r.exported.devicePixelRatio),F.clear({color:M}),j.disable(j.SCISSOR_TEST)}const ts=r.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Ku}=ts;function Mr(_,l,f,b){_.emplaceBack(l,f,b)}class ll{constructor(l){this.vertexArray=new r.StructArrayLayout3f12,this.indices=new r.StructArrayLayout3ui6,Mr(this.vertexArray,-1,-1,1),Mr(this.vertexArray,1,-1,1),Mr(this.vertexArray,-1,1,1),Mr(this.vertexArray,1,1,1),Mr(this.vertexArray,-1,-1,-1),Mr(this.vertexArray,1,-1,-1),Mr(this.vertexArray,-1,1,-1),Mr(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=l.createVertexBuffer(this.vertexArray,Ku),this.indexBuffer=l.createIndexBuffer(this.indices),this.segment=r.SegmentVector.simpleSegment(0,0,36,12)}}function yo(_,l,f,b,R,M){const F=_.gl,j=l.paint.get("sky-atmosphere-color"),q=l.paint.get("sky-atmosphere-halo-color"),Y=l.paint.get("sky-atmosphere-sun-intensity"),X=((te,ue,ye,he,me)=>({u_matrix_3f:te,u_sun_direction:ue,u_sun_intensity:ye,u_color_tint_r:[he.r,he.g,he.b,he.a],u_color_tint_m:[me.r,me.g,me.b,me.a],u_luminance:5e-5}))(r.fromMat4(r.create$1(),b),R,Y,j,q);F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_CUBE_MAP_POSITIVE_X+M,l.skyboxTexture,0),f.draw(_,F.TRIANGLES,r.DepthMode.disabled,r.StencilMode.disabled,r.ColorMode.unblended,r.CullFaceMode.frontCW,X,"skyboxCapture",l.skyboxGeometry.vertexBuffer,l.skyboxGeometry.indexBuffer,l.skyboxGeometry.segment)}const cl=r.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Qs{constructor(l){const f=new r.StructArrayLayout5f20;f.emplaceBack(-1,1,1,0,0),f.emplaceBack(1,1,1,1,0),f.emplaceBack(1,-1,1,1,1),f.emplaceBack(-1,-1,1,0,1);const b=new r.StructArrayLayout3ui6;b.emplaceBack(0,1,2),b.emplaceBack(2,3,0),this.vertexBuffer=l.createVertexBuffer(f,cl.members),this.indexBuffer=l.createIndexBuffer(b),this.segments=r.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const bo={symbol:function(_,l,f,b,R){if(_.renderPass!=="translucent")return;const M=r.StencilMode.disabled,F=_.colorModeForRenderPass();f.layout.get("text-variable-anchor")&&function(j,q,Y,X,te,ue,ye){const he=q.transform,me=te==="map",_e=ue==="map";for(const fe of j){const Ce=X.getTile(fe),be=Ce.getBucket(Y);if(!be||!be.text||!be.text.segments.get().length)continue;const Be=r.evaluateSizeForZoom(be.textSizeData,he.zoom),Oe=Li(fe,be.getProjection(),he),$e=he.calculatePixelsToTileUnitsMatrix(Ce),De=xn(Oe,Ce.tileID.canonical,_e,me,he,be.getProjection(),$e),Le=Y.layout.get("icon-text-fit")!=="none"&&be.hasIconData();if(Be){const Ge=Math.pow(2,he.zoom-Ce.tileID.overscaledZ);rl(be,me,_e,ye,r.symbolSize,he,De,fe,Ge,Be,Le)}}}(b,_,f,l,f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),R),f.paint.get("icon-opacity").constantOr(1)!==0&&ol(_,l,f,b,!1,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),f.layout.get("icon-rotation-alignment"),f.layout.get("icon-pitch-alignment"),f.layout.get("icon-keep-upright"),M,F),f.paint.get("text-opacity").constantOr(1)!==0&&ol(_,l,f,b,!0,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),f.layout.get("text-keep-upright"),M,F),l.map.showCollisionBoxes&&(_c(_,l,f,b,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),!0),_c(_,l,f,b,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),!1))},circle:function(_,l,f,b){if(_.renderPass!=="translucent")return;const R=f.paint.get("circle-opacity"),M=f.paint.get("circle-stroke-width"),F=f.paint.get("circle-stroke-opacity"),j=f.layout.get("circle-sort-key").constantOr(1)!==void 0;if(R.constantOr(1)===0&&(M.constantOr(1)===0||F.constantOr(1)===0))return;const q=_.context,Y=q.gl,X=_.transform,te=_.depthModeForSublayer(0,r.DepthMode.ReadOnly),ue=r.StencilMode.disabled,ye=_.colorModeForRenderPass(),he=X.projection.name==="globe",me=[r.mercatorXfromLng(X.center.lng),r.mercatorYfromLat(X.center.lat)],_e=[];for(let Ce=0;Ce<b.length;Ce++){const be=b[Ce],Be=l.getTile(be),Oe=Be.getBucket(f);if(!Oe||Oe.projection.name!==X.projection.name)continue;const $e=Oe.programConfigurations.get(f.id),De=fc(f);he&&De.push("PROJECTION_GLOBE_VIEW");const Le=_.useProgram("circle",$e,De),Ge=Oe.layoutVertexBuffer,Je=Oe.globeExtVertexBuffer,kt=Oe.indexBuffer,Ke=X.projection.createInversionMatrix(X,be.canonical),pt={programConfiguration:$e,program:Le,layoutVertexBuffer:Ge,globeExtVertexBuffer:Je,indexBuffer:kt,uniformValues:Ja(_,be,Be,Ke,me,f),tile:Be};if(j){const _t=Oe.segments.get();for(const It of _t)_e.push({segments:new r.SegmentVector([It]),sortKey:It.sortKey,state:pt})}else _e.push({segments:Oe.segments,sortKey:0,state:pt})}j&&_e.sort((Ce,be)=>Ce.sortKey-be.sortKey);const fe={useDepthForOcclusion:!he};for(const Ce of _e){const{programConfiguration:be,program:Be,layoutVertexBuffer:Oe,globeExtVertexBuffer:$e,indexBuffer:De,uniformValues:Le,tile:Ge}=Ce.state,Je=Ce.segments;_.terrain&&_.terrain.setupElevationDraw(Ge,Be,fe),_.prepareDrawProgram(q,Be,Ge.tileID.toUnwrapped()),Be.draw(q,Y.TRIANGLES,te,ue,ye,r.CullFaceMode.disabled,Le,f.id,Oe,De,Je,f.paint,X.zoom,be,[$e])}},heatmap:function(_,l,f,b){if(f.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const R=_.context,M=R.gl,F=r.StencilMode.disabled,j=new r.ColorMode([M.ONE,M.ONE],r.Color.transparent,[!0,!0,!0,!0]);(function(ye,he,me,_e){const fe=ye.gl,Ce=he.width*_e,be=he.height*_e;ye.activeTexture.set(fe.TEXTURE1),ye.viewport.set([0,0,Ce,be]);let Be=me.heatmapFbo;if(!Be||Be&&(Be.width!==Ce||Be.height!==be)){Be&&Be.destroy();const Oe=fe.createTexture();fe.bindTexture(fe.TEXTURE_2D,Oe),fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_WRAP_S,fe.CLAMP_TO_EDGE),fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_WRAP_T,fe.CLAMP_TO_EDGE),fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_MIN_FILTER,fe.LINEAR),fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_MAG_FILTER,fe.LINEAR),Be=me.heatmapFbo=ye.createFramebuffer(Ce,be,!1),function($e,De,Le,Ge,Je,kt){const Ke=$e.gl;Ke.texImage2D(Ke.TEXTURE_2D,0,Ke.RGBA,Je,kt,0,Ke.RGBA,$e.extRenderToTextureHalfFloat?$e.extTextureHalfFloat.HALF_FLOAT_OES:Ke.UNSIGNED_BYTE,null),Ge.colorAttachment.set(Le)}(ye,0,Oe,Be,Ce,be)}else fe.bindTexture(fe.TEXTURE_2D,Be.colorAttachment.get()),ye.bindFramebuffer.set(Be.framebuffer)})(R,_,f,_.transform.projection.name==="globe"?.5:.25),R.clear({color:r.Color.transparent});const q=_.transform,Y=q.projection.name==="globe",X=Y?["PROJECTION_GLOBE_VIEW"]:null,te=Y?r.CullFaceMode.frontCCW:r.CullFaceMode.disabled,ue=[r.mercatorXfromLng(q.center.lng),r.mercatorYfromLat(q.center.lat)];for(let ye=0;ye<b.length;ye++){const he=b[ye];if(l.hasRenderableParent(he))continue;const me=l.getTile(he),_e=me.getBucket(f);if(!_e||_e.projection.name!==q.projection.name)continue;const fe=_e.programConfigurations.get(f.id),Ce=_.useProgram("heatmap",fe,X),{zoom:be}=_.transform;_.terrain&&_.terrain.setupElevationDraw(me,Ce),_.prepareDrawProgram(R,Ce,he.toUnwrapped());const Be=q.projection.createInversionMatrix(q,he.canonical);Ce.draw(R,M.TRIANGLES,r.DepthMode.disabled,F,j,te,Vu(_,he,me,Be,ue,be,f.paint.get("heatmap-intensity")),f.id,_e.layoutVertexBuffer,_e.indexBuffer,_e.segments,f.paint,_.transform.zoom,fe,Y?[_e.globeExtVertexBuffer]:null)}R.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(R,M){const F=R.context,j=F.gl,q=M.heatmapFbo;if(!q)return;F.activeTexture.set(j.TEXTURE0),j.bindTexture(j.TEXTURE_2D,q.colorAttachment.get()),F.activeTexture.set(j.TEXTURE1);let Y=M.colorRampTexture;Y||(Y=M.colorRampTexture=new r.Texture(F,M.colorRamp,j.RGBA)),Y.bind(j.LINEAR,j.CLAMP_TO_EDGE),R.useProgram("heatmapTexture").draw(F,j.TRIANGLES,r.DepthMode.disabled,r.StencilMode.disabled,R.colorModeForRenderPass(),r.CullFaceMode.disabled,((X,te,ue,ye)=>({u_image:0,u_color_ramp:1,u_opacity:te.paint.get("heatmap-opacity")}))(0,M),M.id,R.viewportBuffer,R.quadTriangleIndexBuffer,R.viewportSegments,M.paint,R.transform.zoom)}(_,f))},line:function(_,l,f,b){if(_.renderPass!=="translucent")return;const R=f.paint.get("line-opacity"),M=f.paint.get("line-width");if(R.constantOr(1)===0||M.constantOr(1)===0)return;const F=_.depthModeForSublayer(0,r.DepthMode.ReadOnly),j=_.colorModeForRenderPass(),q=_.terrain&&_.terrain.renderingToTexture?1:r.exported.devicePixelRatio,Y=f.paint.get("line-dasharray"),X=Y.constantOr(1),te=f.layout.get("line-cap"),ue=f.paint.get("line-pattern"),ye=ue.constantOr(1),he=f.paint.get("line-gradient"),me=f.getCrossfadeParameters(),_e=ye?"linePattern":"line",fe=_.context,Ce=fe.gl,be=(Oe=>{const $e=[];Zs(Oe)&&$e.push("RENDER_LINE_DASH"),Oe.paint.get("line-gradient")&&$e.push("RENDER_LINE_GRADIENT");const De=Oe.paint.get("line-trim-offset");De[0]===0&&De[1]===0||$e.push("RENDER_LINE_TRIM_OFFSET");const Le=Oe.paint.get("line-pattern").constantOr(1),Ge=Oe.paint.get("line-opacity").constantOr(1)!==1;return!Le&&Ge&&$e.push("RENDER_LINE_ALPHA_DISCARD"),$e})(f);let Be=be.includes("RENDER_LINE_ALPHA_DISCARD");_.terrain&&_.terrain.clipOrMaskOverlapStencilType()&&(Be=!1);for(const Oe of b){const $e=l.getTile(Oe);if(ye&&!$e.patternsLoaded())continue;const De=$e.getBucket(f);if(!De)continue;_.prepareDrawTile();const Le=De.programConfigurations.get(f.id),Ge=_.useProgram(_e,Le,be),Je=ue.constantOr(null);if(Je&&$e.imageAtlas){const mt=$e.imageAtlas,Pt=mt.patternPositions[Je.to.toString()],Ot=mt.patternPositions[Je.from.toString()];Pt&&Ot&&Le.setConstantPatternPositions(Pt,Ot)}const kt=Y.constantOr(null),Ke=te.constantOr(null);if(!ye&&kt&&Ke&&$e.lineAtlas){const mt=$e.lineAtlas,Pt=mt.getDash(kt.to,Ke),Ot=mt.getDash(kt.from,Ke);Pt&&Ot&&Le.setConstantPatternPositions(Pt,Ot)}let[pt,_t]=f.paint.get("line-trim-offset");(Ke==="round"||Ke==="square")&&pt!==_t&&(pt===0&&(pt-=1),_t===1&&(_t+=1));const It=_.terrain?Oe.projMatrix:null,ot=ye?Uu(_,$e,f,me,It,q):Ks(_,$e,f,me,It,De.lineClipsArray.length,q,[pt,_t]);if(he){const mt=De.gradients[f.id];let Pt=mt.texture;if(f.gradientVersion!==mt.version){let Ot=256;if(f.stepInterpolant){const Kt=l.getSource().maxzoom,Qt=Oe.canonical.z===Kt?Math.ceil(1<<_.transform.maxZoom-Oe.canonical.z):1;Ot=r.clamp(r.nextPowerOfTwo(De.maxLineLength/r.EXTENT*1024*Qt),256,fe.maxTextureSize)}mt.gradient=r.renderColorRamp({expression:f.gradientExpression(),evaluationKey:"lineProgress",resolution:Ot,image:mt.gradient||void 0,clips:De.lineClipsArray}),mt.texture?mt.texture.update(mt.gradient):mt.texture=new r.Texture(fe,mt.gradient,Ce.RGBA),mt.version=f.gradientVersion,Pt=mt.texture}fe.activeTexture.set(Ce.TEXTURE1),Pt.bind(f.stepInterpolant?Ce.NEAREST:Ce.LINEAR,Ce.CLAMP_TO_EDGE)}X&&(fe.activeTexture.set(Ce.TEXTURE0),$e.lineAtlasTexture.bind(Ce.LINEAR,Ce.REPEAT),Le.updatePaintBuffers(me)),ye&&(fe.activeTexture.set(Ce.TEXTURE0),$e.imageAtlasTexture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE),Le.updatePaintBuffers(me)),_.prepareDrawProgram(fe,Ge,Oe.toUnwrapped());const $t=mt=>{Ge.draw(fe,Ce.TRIANGLES,F,mt,j,r.CullFaceMode.disabled,ot,f.id,De.layoutVertexBuffer,De.indexBuffer,De.segments,f.paint,_.transform.zoom,Le,[De.layoutVertexBuffer2])};if(Be){const mt=_.stencilModeForClipping(Oe).ref;mt===0&&_.terrain&&fe.clear({stencil:0});const Pt={func:Ce.EQUAL,mask:255};ot.u_alpha_discard_threshold=.8,$t(new r.StencilMode(Pt,mt,255,Ce.KEEP,Ce.KEEP,Ce.INVERT)),ot.u_alpha_discard_threshold=0,$t(new r.StencilMode(Pt,mt,255,Ce.KEEP,Ce.KEEP,Ce.KEEP))}else $t(_.stencilModeForClipping(Oe))}Be&&(_.resetStencilClippingMasks(),_.terrain&&fe.clear({stencil:0}))},fill:function(_,l,f,b){const R=f.paint.get("fill-color"),M=f.paint.get("fill-opacity");if(M.constantOr(1)===0)return;const F=_.colorModeForRenderPass(),j=f.paint.get("fill-pattern"),q=_.opaquePassEnabledForLayer()&&!j.constantOr(1)&&R.constantOr(r.Color.transparent).a===1&&M.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===q){const Y=_.depthModeForSublayer(1,_.renderPass==="opaque"?r.DepthMode.ReadWrite:r.DepthMode.ReadOnly);Js(_,l,f,b,Y,F,!1)}if(_.renderPass==="translucent"&&f.paint.get("fill-antialias")){const Y=_.depthModeForSublayer(f.getPaintProperty("fill-outline-color")?2:0,r.DepthMode.ReadOnly);Js(_,l,f,b,Y,F,!0)}},"fill-extrusion":function(_,l,f,b){const R=f.paint.get("fill-extrusion-opacity");if(R!==0&&_.renderPass==="translucent"){const M=new r.DepthMode(_.context.gl.LEQUAL,r.DepthMode.ReadWrite,_.depthRangeFor3D);if(R!==1||f.paint.get("fill-extrusion-pattern").constantOr(1))dr(_,l,f,b,M,r.StencilMode.disabled,r.ColorMode.disabled),dr(_,l,f,b,M,_.stencilModeFor3D(),_.colorModeForRenderPass()),_.resetStencilClippingMasks();else{const F=_.colorModeForRenderPass();dr(_,l,f,b,M,r.StencilMode.disabled,F)}}},hillshade:function(_,l,f,b){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const R=_.context,M=_.depthModeForSublayer(0,r.DepthMode.ReadOnly),F=_.colorModeForRenderPass(),j=_.terrain&&_.terrain.renderingToTexture,[q,Y]=_.renderPass!=="translucent"||j?[{},b]:_.stencilConfigForOverlap(b);for(const X of Y){const te=l.getTile(X);if(te.needsHillshadePrepare&&_.renderPass==="offscreen")fo(_,te,f,M,r.StencilMode.disabled,F);else if(_.renderPass==="translucent"){const ue=j&&_.terrain?_.terrain.stencilModeForRTTOverlap(X):q[X.overscaledZ];ja(_,X,te,f,M,ue,F)}}R.viewport.set([0,0,_.width,_.height]),_.resetStencilClippingMasks()},raster:function(_,l,f,b,R,M){if(_.renderPass!=="translucent"||f.paint.get("raster-opacity")===0||!b.length)return;const F=_.context,j=F.gl,q=l.getSource(),Y=_.useProgram("raster"),X=_.colorModeForRenderPass(),te=_.terrain&&_.terrain.renderingToTexture,[ue,ye]=q instanceof He||te?[{},b]:_.stencilConfigForOverlap(b),he=ye[ye.length-1].overscaledZ,me=!_.options.moving;for(const _e of ye){const fe=te?r.DepthMode.disabled:_.depthModeForSublayer(_e.overscaledZ-he,f.paint.get("raster-opacity")===1?r.DepthMode.ReadWrite:r.DepthMode.ReadOnly,j.LESS),Ce=_e.toUnwrapped(),be=l.getTile(_e);if(te&&(!be||!be.hasData()))continue;const Be=te?_e.projMatrix:_.transform.calculateProjMatrix(Ce,me),Oe=_.terrain&&te?_.terrain.stencilModeForRTTOverlap(_e):ue[_e.overscaledZ],$e=M?0:f.paint.get("raster-fade-duration");be.registerFadeDuration($e);const De=l.findLoadedParent(_e,0),Le=Gs(be,De,l,_.transform,$e);let Ge,Je;_.terrain&&_.terrain.prepareDrawTile();const kt=f.paint.get("raster-resampling")==="nearest"?j.NEAREST:j.LINEAR;F.activeTexture.set(j.TEXTURE0),be.texture.bind(kt,j.CLAMP_TO_EDGE),F.activeTexture.set(j.TEXTURE1),De?(De.texture.bind(kt,j.CLAMP_TO_EDGE),Ge=Math.pow(2,De.tileID.overscaledZ-be.tileID.overscaledZ),Je=[be.tileID.canonical.x*Ge%1,be.tileID.canonical.y*Ge%1]):be.texture.bind(kt,j.CLAMP_TO_EDGE);const Ke=ju(Be,Je||[0,0],Ge||1,Le,f,q instanceof He?q.perspectiveTransform:[0,0]);if(_.prepareDrawProgram(F,Y,Ce),q instanceof He)q.boundsBuffer&&q.boundsSegments&&Y.draw(F,j.TRIANGLES,fe,r.StencilMode.disabled,X,r.CullFaceMode.disabled,Ke,f.id,q.boundsBuffer,_.quadTriangleIndexBuffer,q.boundsSegments);else{const{tileBoundsBuffer:pt,tileBoundsIndexBuffer:_t,tileBoundsSegments:It}=_.getTileBoundsBuffers(be);Y.draw(F,j.TRIANGLES,fe,Oe,X,r.CullFaceMode.disabled,Ke,f.id,pt,_t,It)}}_.resetStencilClippingMasks()},background:function(_,l,f,b){const R=f.paint.get("background-color"),M=f.paint.get("background-opacity");if(M===0)return;const F=_.context,j=F.gl,q=_.transform,Y=q.tileSize,X=f.paint.get("background-pattern");if(_.isPatternMissing(X))return;const te=!X&&R.a===1&&M===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==te)return;const ue=r.StencilMode.disabled,ye=_.depthModeForSublayer(0,te==="opaque"?r.DepthMode.ReadWrite:r.DepthMode.ReadOnly),he=_.colorModeForRenderPass(),me=_.useProgram(X?"backgroundPattern":"background");let _e,fe=b;fe||(_e=_.getBackgroundTiles(),fe=Object.values(_e).map(be=>be.tileID)),X&&(F.activeTexture.set(j.TEXTURE0),_.imageManager.bind(_.context));const Ce=f.getCrossfadeParameters();for(const be of fe){const Be=be.toUnwrapped(),Oe=b?be.projMatrix:_.transform.calculateProjMatrix(Be);_.prepareDrawTile();const $e=l?l.getTile(be):_e?_e[be.key]:new r.Tile(be,Y,q.zoom,_),De=X?qu(Oe,M,_,X,{tileID:be,tileSize:Y},Ce):Gu(Oe,M,R);_.prepareDrawProgram(F,me,Be);const{tileBoundsBuffer:Le,tileBoundsIndexBuffer:Ge,tileBoundsSegments:Je}=_.getTileBoundsBuffers($e);me.draw(F,j.TRIANGLES,ye,ue,he,r.CullFaceMode.disabled,De,f.id,Le,Ge,Je)}},sky:function(_,l,f){const b=_.transform,R=b.projection.name==="mercator"||b.projection.name==="globe"?1:r.smoothstep(7,8,b.zoom),M=f.paint.get("sky-opacity")*R;if(M===0)return;const F=_.context,j=f.paint.get("sky-type"),q=new r.DepthMode(F.gl.LEQUAL,r.DepthMode.ReadOnly,[0,1]),Y=_.frameCounter/1e3%1;j==="atmosphere"?_.renderPass==="offscreen"?f.needsSkyboxCapture(_)&&(function(X,te,ue,ye){const he=X.context,me=he.gl;let _e=te.skyboxFbo;if(!_e){_e=te.skyboxFbo=he.createFramebuffer(32,32,!1),te.skyboxGeometry=new ll(he),te.skyboxTexture=he.gl.createTexture(),me.bindTexture(me.TEXTURE_CUBE_MAP,te.skyboxTexture),me.texParameteri(me.TEXTURE_CUBE_MAP,me.TEXTURE_WRAP_S,me.CLAMP_TO_EDGE),me.texParameteri(me.TEXTURE_CUBE_MAP,me.TEXTURE_WRAP_T,me.CLAMP_TO_EDGE),me.texParameteri(me.TEXTURE_CUBE_MAP,me.TEXTURE_MIN_FILTER,me.LINEAR),me.texParameteri(me.TEXTURE_CUBE_MAP,me.TEXTURE_MAG_FILTER,me.LINEAR);for(let Be=0;Be<6;++Be)me.texImage2D(me.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,me.RGBA,32,32,0,me.RGBA,me.UNSIGNED_BYTE,null)}he.bindFramebuffer.set(_e.framebuffer),he.viewport.set([0,0,32,32]);const fe=te.getCenter(X,!0),Ce=X.useProgram("skyboxCapture"),be=new Float64Array(16);r.identity(be),r.rotateY(be,be,.5*-Math.PI),yo(he,te,Ce,be,fe,0),r.identity(be),r.rotateY(be,be,.5*Math.PI),yo(he,te,Ce,be,fe,1),r.identity(be),r.rotateX(be,be,.5*-Math.PI),yo(he,te,Ce,be,fe,2),r.identity(be),r.rotateX(be,be,.5*Math.PI),yo(he,te,Ce,be,fe,3),r.identity(be),yo(he,te,Ce,be,fe,4),r.identity(be),r.rotateY(be,be,Math.PI),yo(he,te,Ce,be,fe,5),he.viewport.set([0,0,X.width,X.height])}(_,f),f.markSkyboxValid(_)):_.renderPass==="sky"&&function(X,te,ue,ye,he){const me=X.context,_e=me.gl,fe=X.transform,Ce=X.useProgram("skybox");me.activeTexture.set(_e.TEXTURE0),_e.bindTexture(_e.TEXTURE_CUBE_MAP,te.skyboxTexture);const be=((Be,Oe,$e,De,Le)=>({u_matrix:Be,u_sun_direction:Oe,u_cubemap:0,u_opacity:De,u_temporal_offset:Le}))(fe.skyboxMatrix,te.getCenter(X,!1),0,ye,he);X.prepareDrawProgram(me,Ce),Ce.draw(me,_e.TRIANGLES,ue,r.StencilMode.disabled,X.colorModeForRenderPass(),r.CullFaceMode.backCW,be,"skybox",te.skyboxGeometry.vertexBuffer,te.skyboxGeometry.indexBuffer,te.skyboxGeometry.segment)}(_,f,q,M,Y):j==="gradient"&&_.renderPass==="sky"&&function(X,te,ue,ye,he){const me=X.context,_e=me.gl,fe=X.transform,Ce=X.useProgram("skyboxGradient");te.skyboxGeometry||(te.skyboxGeometry=new ll(me)),me.activeTexture.set(_e.TEXTURE0);let be=te.colorRampTexture;be||(be=te.colorRampTexture=new r.Texture(me,te.colorRamp,_e.RGBA)),be.bind(_e.LINEAR,_e.CLAMP_TO_EDGE);const Be=((Oe,$e,De,Le,Ge)=>({u_matrix:Oe,u_color_ramp:0,u_center_direction:$e,u_radius:r.degToRad(De),u_opacity:Le,u_temporal_offset:Ge}))(fe.skyboxMatrix,te.getCenter(X,!1),te.paint.get("sky-gradient-radius"),ye,he);X.prepareDrawProgram(me,Ce),Ce.draw(me,_e.TRIANGLES,ue,r.StencilMode.disabled,X.colorModeForRenderPass(),r.CullFaceMode.backCW,Be,"skyboxGradient",te.skyboxGeometry.vertexBuffer,te.skyboxGeometry.indexBuffer,te.skyboxGeometry.segment)}(_,f,q,M,Y)},debug:function(_,l,f){for(let b=0;b<f.length;b++)Nn(_,l,f[b])},custom:function(_,l,f){const b=_.context,R=f.implementation;if(_.transform.projection.unsupportedLayers&&_.transform.projection.unsupportedLayers.includes("custom"))r.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if(_.renderPass==="offscreen"){const M=R.prerender;M&&(_.setCustomLayerDefaults(),b.setColorMode(_.colorModeForRenderPass()),M.call(R,b.gl,_.transform.customLayerMatrix()),b.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),b.setColorMode(_.colorModeForRenderPass()),b.setStencilMode(r.StencilMode.disabled);const M=R.renderingMode==="3d"?new r.DepthMode(_.context.gl.LEQUAL,r.DepthMode.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,r.DepthMode.ReadOnly);b.setDepthMode(M),R.render(b.gl,_.transform.customLayerMatrix()),b.setDirty(),_.setBaseState(),b.bindFramebuffer.set(null)}}};class ul{constructor(l,f){this.context=new xe(l),this.transform=f,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=r.SourceCache.maxUnderzooming+r.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ds,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(l,f){const b=!!l&&!!l.terrain&&this.transform.projection.supportsTerrain;if(!(b||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new cc(this,l));const R=this._terrain;this.transform.elevation=b?R:null,R.update(l,this.transform,f)}_updateFog(l){const f=l.fog;if(!f||this.transform.projection.name==="globe"||f.getOpacity(this.transform.pitch)<1||f.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[b,R]=f.getFovAdjustedRange(this.transform._fov);if(b>R)return void(this.transform.fogCullDistSq=null);const M=b+.78*(R-b);this.transform.fogCullDistSq=M*M}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(l,f){if(this.width=l*r.exported.devicePixelRatio,this.height=f*r.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const b of this.style.order)this.style._layers[b].resize()}setup(){const l=this.context,f=new r.StructArrayLayout2i4;f.emplaceBack(0,0),f.emplaceBack(r.EXTENT,0),f.emplaceBack(0,r.EXTENT),f.emplaceBack(r.EXTENT,r.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(f,r.posAttributes.members),this.tileExtentSegments=r.SegmentVector.simpleSegment(0,0,4,2);const b=new r.StructArrayLayout2i4;b.emplaceBack(0,0),b.emplaceBack(r.EXTENT,0),b.emplaceBack(0,r.EXTENT),b.emplaceBack(r.EXTENT,r.EXTENT),this.debugBuffer=l.createVertexBuffer(b,r.posAttributes.members),this.debugSegments=r.SegmentVector.simpleSegment(0,0,4,5);const R=new r.StructArrayLayout2i4;R.emplaceBack(-1,-1),R.emplaceBack(1,-1),R.emplaceBack(-1,1),R.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(R,r.posAttributes.members),this.viewportSegments=r.SegmentVector.simpleSegment(0,0,4,2);const M=new r.StructArrayLayout4i8;M.emplaceBack(0,0,0,0),M.emplaceBack(r.EXTENT,0,r.EXTENT,0),M.emplaceBack(0,r.EXTENT,0,r.EXTENT),M.emplaceBack(r.EXTENT,r.EXTENT,r.EXTENT,r.EXTENT),this.mercatorBoundsBuffer=l.createVertexBuffer(M,r.boundsAttributes.members),this.mercatorBoundsSegments=r.SegmentVector.simpleSegment(0,0,4,2);const F=new r.StructArrayLayout3ui6;F.emplaceBack(0,1,2),F.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(F);const j=new r.StructArrayLayout1ui2;for(const Y of[0,1,3,2,0])j.emplaceBack(Y);this.debugIndexBuffer=l.createIndexBuffer(j),this.emptyTexture=new r.Texture(l,new r.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),l.gl.RGBA),this.identityMat=r.create();const q=this.context.gl;this.stencilClearMode=new r.StencilMode({func:q.ALWAYS,mask:0},0,255,q.ZERO,q.ZERO,q.ZERO),this.loadTimeStamps.push(r.window.performance.now()),this.atmosphereBuffer=new Qs(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(l){return l._makeTileBoundsBuffers(this.context,this.transform.projection),l._tileBoundsBuffer?{tileBoundsBuffer:l._tileBoundsBuffer,tileBoundsIndexBuffer:l._tileBoundsIndexBuffer,tileBoundsSegments:l._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const l=this.context,f=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(l,f.TRIANGLES,r.DepthMode.disabled,this.stencilClearMode,r.ColorMode.disabled,r.CullFaceMode.disabled,Ka(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(l,f,b){if(!f||this.currentStencilSource===f.id||!l.isTileClipped()||!b||b.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let j=!1;for(const q of b)if(this._tileClippingMaskIDs[q.key]===void 0){j=!0;break}if(!j)return}this.currentStencilSource=f.id;const R=this.context,M=R.gl;this.nextStencilID+b.length>256&&this.clearStencil(),R.setColorMode(r.ColorMode.disabled),R.setDepthMode(r.DepthMode.disabled);const F=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const j of b){const q=f.getTile(j),Y=this._tileClippingMaskIDs[j.key]=this.nextStencilID++,{tileBoundsBuffer:X,tileBoundsIndexBuffer:te,tileBoundsSegments:ue}=this.getTileBoundsBuffers(q);F.draw(R,M.TRIANGLES,r.DepthMode.disabled,new r.StencilMode({func:M.ALWAYS,mask:0},Y,255,M.KEEP,M.KEEP,M.REPLACE),r.ColorMode.disabled,r.CullFaceMode.disabled,Ka(j.projMatrix),"$clipping",X,te,ue)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,f=this.context.gl;return new r.StencilMode({func:f.NOTEQUAL,mask:255},l,255,f.KEEP,f.KEEP,f.REPLACE)}stencilModeForClipping(l){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(l);const f=this.context.gl;return new r.StencilMode({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,f.KEEP,f.KEEP,f.REPLACE)}stencilConfigForOverlap(l){const f=this.context.gl,b=l.sort((F,j)=>j.overscaledZ-F.overscaledZ),R=b[b.length-1].overscaledZ,M=b[0].overscaledZ-R+1;if(M>1){this.currentStencilSource=void 0,this.nextStencilID+M>256&&this.clearStencil();const F={};for(let j=0;j<M;j++)F[j+R]=new r.StencilMode({func:f.GEQUAL,mask:255},j+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=M,[F,b]}return[{[R]:r.StencilMode.disabled},b]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new r.ColorMode([l.CONSTANT_COLOR,l.ONE],new r.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?r.ColorMode.unblended:r.ColorMode.alphaBlended}depthModeForSublayer(l,f,b){if(!this.opaquePassEnabledForLayer())return r.DepthMode.disabled;const R=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new r.DepthMode(b||this.context.gl.LEQUAL,f,[R,R])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,f){this.style=l,this.options=f,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(r.exported.now()),this.imageManager.beginFrame();const b=this.style.order,R=this.style._sourceCaches;for(const q in R){const Y=R[q];Y.used&&Y.prepare(this.context)}const M={},F={},j={};for(const q in R){const Y=R[q];M[q]=Y.getVisibleCoordinates(),F[q]=M[q].slice().reverse(),j[q]=Y.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let q=0;q<b.length;q++)if(this.style._layers[b[q]].is3D()){this.opaquePassCutoff=q;break}if(this.terrain&&(this.terrain.updateTileBinding(j),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new r.GlobeSharedBuffers(this.context)),r.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";for(const q of b){const Y=this.style._layers[q],X=l._getLayerSourceCache(Y);if(!Y.hasOffscreenPass()||Y.isHidden(this.transform.zoom))continue;const te=X?F[X.id]:void 0;(Y.type==="custom"||Y.isSky()||te&&te.length)&&this.renderLayer(this,X,Y,te)}if(this.depthRangeFor3D=[0,1-(l.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:f.showOverdrawInspector?r.Color.black:r.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=f.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){const q=this.style._layers[b[this.currentLayer]],Y=l._getLayerSourceCache(q);if(q.isSky())continue;const X=Y?F[Y.id]:void 0;this._renderTileClippingMasks(q,Y,X),this.renderLayer(this,Y,q,X)}if(this.style.fog&&this.transform.projection.supportsFog&&function(q,Y){const X=q.context,te=X.gl,ue=q.transform,ye=new r.DepthMode(te.LEQUAL,r.DepthMode.ReadOnly,[0,1]),he=q.useProgram("globeAtmosphere",null,ue.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),me=r.globeToMercatorTransition(ue.zoom),_e=Y.properties.get("color").toArray01(),fe=Y.properties.get("high-color").toArray01(),Ce=Y.properties.get("space-color").toArray01PremultipliedAlpha(),be=r.identity$1([]);r.rotateY$1(be,be,-r.degToRad(ue._center.lng)),r.rotateX$1(be,be,r.degToRad(ue._center.lat)),r.rotateZ$1(be,be,ue.angle),r.rotateX$1(be,be,-ue._pitch);const Be=r.fromQuat(new Float32Array(16),be),Oe=r.mapValue(Y.properties.get("star-intensity"),0,1,0,.25),$e=5e-4,De=r.mapValue(Y.properties.get("horizon-blend"),0,1,$e,.25),Le=r.globeUseCustomAntiAliasing(q,X,ue)&&De===$e?ue.worldSize/(2*Math.PI*1.025)-1:ue.globeRadius,Ge=q.frameCounter/1e3%1,Je=r.length(ue.globeCenterInViewSpace),kt=Math.sqrt(Math.pow(Je,2)-Math.pow(Le,2)),Ke=Math.acos(kt/Je),pt=((It,ot,$t,mt,Pt,Ot,Kt,Qt,dn,Cn,Wt,fn,kn,Kn)=>({u_frustum_tl:It,u_frustum_tr:ot,u_frustum_br:$t,u_frustum_bl:mt,u_horizon:Pt,u_transition:Ot,u_fadeout_range:Kt,u_color:Qt,u_high_color:dn,u_space_color:Cn,u_star_intensity:Wt,u_star_size:5*r.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:fn,u_horizon_angle:kn,u_rotation_matrix:Kn}))(ue.frustumCorners.TL,ue.frustumCorners.TR,ue.frustumCorners.BR,ue.frustumCorners.BL,ue.frustumCorners.horizon,me,De,_e,fe,Ce,Oe,Ge,Ke,Be);q.prepareDrawProgram(X,he);const _t=q.atmosphereBuffer;_t&&he.draw(X,te.TRIANGLES,ye,r.StencilMode.disabled,r.ColorMode.alphaBlended,r.CullFaceMode.backCW,pt,"skybox",_t.vertexBuffer,_t.indexBuffer,_t.segments)}(this,this.style.fog),this.renderPass="sky",(r.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){const q=this.style._layers[b[this.currentLayer]],Y=l._getLayerSourceCache(q);q.isSky()&&this.renderLayer(this,Y,q,Y?F[Y.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<b.length;){const q=this.style._layers[b[this.currentLayer]],Y=l._getLayerSourceCache(q);if(q.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(q)){if(q.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const X=Y?(q.type==="symbol"?j:F)[Y.id]:void 0;this._renderTileClippingMasks(q,Y,Y?M[Y.id]:void 0),this.renderLayer(this,Y,q,X),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let q=null;r.values(this.style._layers).forEach(Y=>{const X=l._getLayerSourceCache(Y);X&&!Y.isHidden(this.transform.zoom)&&(!q||q.getSource().maxzoom<X.getSource().maxzoom)&&(q=X)}),q&&this.options.showTileBoundaries&&bo.debug(this,q,q.getVisibleCoordinates())}this.options.showPadding&&function(q){const Y=q.transform.padding;Qo(q,q.transform.height-(Y.top||0),3,bc),Qo(q,Y.bottom||0,3,_o),wc(q,Y.left||0,3,vo),wc(q,q.transform.width-(Y.right||0),3,xc);const X=q.transform.centerPoint;(function(te,ue,ye,he){es(te,ue-1,ye-10,2,20,he),es(te,ue-10,ye-1,20,2,he)})(q,X.x,q.transform.height-X.y,al)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(r.window.performance.now()),this.saveCanvasCopy())}}renderLayer(l,f,b,R){b.isHidden(this.transform.zoom)||(b.type==="background"||b.type==="sky"||b.type==="custom"||R&&R.length)&&(this.id=b.id,this.gpuTimingStart(b),l.transform.projection.unsupportedLayers&&l.transform.projection.unsupportedLayers.includes(b.type)||bo[b.type](l,f,b,R,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(l){if(!this.options.gpuTiming)return;const f=this.context.extTimerQuery;let b=this.gpuTimers[l.id];b||(b=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:f.createQueryEXT()}),b.calls++,f.beginQueryEXT(f.TIME_ELAPSED_EXT,b.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const l=this.context.extTimerQuery,f=l.createQueryEXT();this.deferredRenderGpuTimeQueries.push(f),l.beginQueryEXT(l.TIME_ELAPSED_EXT,f)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}collectGpuTimers(){const l=this.gpuTimers;return this.gpuTimers={},l}collectDeferredRenderGpuQueries(){const l=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],l}queryGpuTimers(l){const f={};for(const b in l){const R=l[b],M=this.context.extTimerQuery,F=M.getQueryObjectEXT(R.query,M.QUERY_RESULT_EXT)/1e6;M.deleteQueryEXT(R.query),f[b]=F}return f}queryGpuTimeDeferredRender(l){if(!this.options.gpuTimingDeferredRender)return 0;const f=this.context.extTimerQuery;let b=0;for(const R of l)b+=f.getQueryObjectEXT(R,f.QUERY_RESULT_EXT)/1e6,f.deleteQueryEXT(R);return b}translatePosMatrix(l,f,b,R,M){if(!b[0]&&!b[1])return l;const F=M?R==="map"?this.transform.angle:0:R==="viewport"?-this.transform.angle:0;if(F){const Y=Math.sin(F),X=Math.cos(F);b=[b[0]*X-b[1]*Y,b[0]*Y+b[1]*X]}const j=[M?b[0]:En(f,b[0],this.transform.zoom),M?b[1]:En(f,b[1],this.transform.zoom),0],q=new Float32Array(16);return r.translate(q,l,j),q}saveTileTexture(l){const f=this._tileTextures[l.size[0]];f?f.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const f=this._tileTextures[l];return f&&f.length>0?f.pop():null}isPatternMissing(l){if(!l)return!1;if(!l.from||!l.to)return!0;const f=this.imageManager.getPattern(l.from.toString()),b=this.imageManager.getPattern(l.to.toString());return!f||!b}currentGlobalDefines(){const l=this.terrain&&this.terrain.renderingToTexture,f=this.style&&this.style.fog,b=[];return this.terrain&&!this.terrain.renderingToTexture&&b.push("TERRAIN"),f&&!l&&f.getOpacity(this.transform.pitch)!==0&&b.push("FOG"),l&&b.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&b.push("OVERDRAW_INSPECTOR"),b}useProgram(l,f,b){this.cache=this.cache||{};const R=b||[],M=this.currentGlobalDefines().concat(R),F=Ya.cacheKey(Us[l],l,M,f);return this.cache[F]||(this.cache[F]=new Ya(this.context,l,Us[l],f,Hu[l],M)),this.cache[F]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=r.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new r.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(l,f,b){if(this.terrain&&this.terrain.renderingToTexture)return;const R=this.style.fog;if(R){const M=R.getOpacity(this.transform.pitch),F=((j,q,Y,X,te,ue,ye,he,me,_e,fe)=>{const Ce=j.transform,be=q.properties.get("color").toArray01();be[3]=X;const Be=j.frameCounter/1e3%1;return{u_fog_matrix:Y?Ce.calculateFogTileMatrix(Y):j.identityMat,u_fog_range:q.getFovAdjustedRange(Ce._fov),u_fog_color:be,u_fog_horizon_blend:q.properties.get("horizon-blend"),u_fog_temporal_offset:Be,u_frustum_tl:te,u_frustum_tr:ue,u_frustum_br:ye,u_frustum_bl:he,u_globe_pos:me,u_globe_radius:_e,u_viewport:fe,u_globe_transition:r.globeToMercatorTransition(Ce.zoom),u_is_globe:+(Ce.projection.name==="globe")}})(this,R,b,M,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*r.exported.devicePixelRatio,this.transform.height*r.exported.devicePixelRatio]);f.setFogUniformValues(l,F)}}setTileLoadedFlag(l){this.tileLoaded=l}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const l=this.context.gl,f=l.createTexture();return l.bindTexture(l.TEXTURE_2D,f),l.copyTexImage2D(l.TEXTURE_2D,0,l.RGBA,0,0,l.drawingBufferWidth,l.drawingBufferHeight,0),f}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const l=this.style&&this.style.fog;return!!l&&l.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const l=this._backgroundTiles,f=this._backgroundTiles={},b=this.transform.coveringTiles({tileSize:512});for(const R of b)f[R.key]=l[R.key]||new r.Tile(R,512,this.transform.tileZoom,this);return f}clearBackgroundTiles(){this._backgroundTiles={}}}class ns{constructor(l=0,f=0,b=0,R=0){if(isNaN(l)||l<0||isNaN(f)||f<0||isNaN(b)||b<0||isNaN(R)||R<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=f,this.left=b,this.right=R}interpolate(l,f,b){return f.top!=null&&l.top!=null&&(this.top=r.number(l.top,f.top,b)),f.bottom!=null&&l.bottom!=null&&(this.bottom=r.number(l.bottom,f.bottom,b)),f.left!=null&&l.left!=null&&(this.left=r.number(l.left,f.left,b)),f.right!=null&&l.right!=null&&(this.right=r.number(l.right,f.right,b)),this}getCenter(l,f){const b=r.clamp((this.left+l-this.right)/2,0,l),R=r.clamp((this.top+f-this.bottom)/2,0,f);return new r.pointGeometry(b,R)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new ns(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function dl(_,l){const f=r.getColumn(_,3);r.fromQuat(_,l),r.setColumn(_,3,f)}function xo(_,l){const f=r.identity$1([]);return r.rotateZ$1(f,f,-l),r.rotateX$1(f,f,-_),f}function wo(_,l){const f=[_[0],_[1],0],b=[l[0],l[1],0];if(r.length(f)>=1e-15){const F=r.normalize([],f);r.scale$2(b,F,r.dot(b,F)),l[0]=b[0],l[1]=b[1]}const R=r.cross([],l,_);if(r.len(R)<1e-15)return null;const M=Math.atan2(-R[1],R[0]);return xo(Math.atan2(Math.sqrt(_[0]*_[0]+_[1]*_[1]),-_[2]),M)}class Vt{constructor(l,f){this.position=l,this.orientation=f}get position(){return this._position}set position(l){if(l){const f=l instanceof r.MercatorCoordinate?l:new r.MercatorCoordinate(l[0],l[1],l[2]);this._renderWorldCopies&&(f.x=r.wrap(f.x,0,1)),this._position=f}else this._position=null}lookAtPoint(l,f){if(this.orientation=null,!this.position)return;const b=this._elevation?this._elevation.getAtPointOrZero(r.MercatorCoordinate.fromLngLat(l)):0,R=this.position,M=r.MercatorCoordinate.fromLngLat(l,b),F=[M.x-R.x,M.y-R.y,M.z-R.z];f||(f=[0,0,1]),f[2]=Math.abs(f[2]),this.orientation=wo(F,f)}setPitchBearing(l,f){this.orientation=xo(r.degToRad(l),r.degToRad(-f))}}class Vi{constructor(l,f){this._transform=r.identity([]),this.orientation=f,this.position=l}get mercatorPosition(){const l=this.position;return new r.MercatorCoordinate(l[0],l[1],l[2])}get position(){const l=r.getColumn(this._transform,3);return[l[0],l[1],l[2]]}set position(l){var f;l&&r.setColumn(this._transform,3,[(f=l)[0],f[1],f[2],1])}get orientation(){return this._orientation}set orientation(l){this._orientation=l||r.identity$1([]),l&&dl(this._transform,this._orientation)}getPitchBearing(){const l=this.forward(),f=this.right();return{bearing:Math.atan2(-f[1],f[0]),pitch:Math.atan2(Math.sqrt(l[0]*l[0]+l[1]*l[1]),-l[2])}}setPitchBearing(l,f){this._orientation=xo(l,f),dl(this._transform,this._orientation)}forward(){const l=r.getColumn(this._transform,2);return[-l[0],-l[1],-l[2]]}up(){const l=r.getColumn(this._transform,1);return[-l[0],-l[1],-l[2]]}right(){const l=r.getColumn(this._transform,0);return[l[0],l[1],l[2]]}getCameraToWorld(l,f){const b=new Float64Array(16);return r.invert(b,this.getWorldToCamera(l,f)),b}getWorldToCameraPosition(l,f,b){const R=this.position;r.scale$2(R,R,-l);const M=new Float64Array(16);return r.fromScaling(M,[b,b,b]),r.translate(M,M,R),M[10]*=f,M}getWorldToCamera(l,f){const b=new Float64Array(16),R=new Float64Array(4),M=this.position;return r.conjugate(R,this._orientation),r.scale$2(M,M,-l),r.fromQuat(b,R),r.translate(b,b,M),b[1]*=-1,b[5]*=-1,b[9]*=-1,b[13]*=-1,b[8]*=f,b[9]*=f,b[10]*=f,b[11]*=f,b}getCameraToClipPerspective(l,f,b,R){const M=new Float64Array(16);return r.perspective(M,l,f,b,R),M}getDistanceToElevation(l){const f=l===0?0:r.mercatorZfromAltitude(l,this.position[1]),b=this.forward();return(f-this.position[2])/b[2]}clone(){return new Vi([...this.position],[...this.orientation])}}function pl(_,l){const f=rs(_.projection,_.zoom,_.width,_.height),b=function(M,F,j,q,Y){const X=new r.LngLat(j.lng-180*tr,j.lat),te=new r.LngLat(j.lng+180*tr,j.lat),ue=M.project(X.lng,X.lat),ye=M.project(te.lng,te.lat),he=-Math.atan2(ye.y-ue.y,ye.x-ue.x),me=r.MercatorCoordinate.fromLngLat(j);me.y=r.clamp(me.y,-.999975,.999975);const _e=me.toLngLat(),fe=M.project(_e.lng,_e.lat),Ce=r.MercatorCoordinate.fromLngLat(_e);Ce.x+=tr;const be=Ce.toLngLat(),Be=M.project(be.lng,be.lat),Oe=os(Be.x-fe.x,Be.y-fe.y,he),$e=r.MercatorCoordinate.fromLngLat(_e);$e.y+=tr;const De=$e.toLngLat(),Le=M.project(De.lng,De.lat),Ge=os(Le.x-fe.x,Le.y-fe.y,he),Je=Math.abs(Oe.x)/Math.abs(Ge.y),kt=r.identity([]);r.rotateZ(kt,kt,-he*(1-(Y?0:q)));const Ke=r.identity([]);return r.scale(Ke,Ke,[1,1-(1-Je)*q,1]),Ke[4]=-Ge.x/Ge.y*q,r.rotateZ(Ke,Ke,he),r.multiply(Ke,kt,Ke),Ke}(_.projection,0,_.center,f,l),R=fl(_);return r.scale(b,b,[R,R,1]),b}function fl(_){const l=_.projection,f=rs(_.projection,_.zoom,_.width,_.height),b=hl(l,_.center),R=hl(l,r.LngLat.convert(l.center));return Math.pow(2,b*f+(1-f)*R)}function rs(_,l,f,b,R=1/0){const M=_.range;if(!M)return 0;const F=Math.min(R,Math.max(f,b)),j=Math.log(F/1024)/Math.LN2;return r.smoothstep(M[0]+j,M[1]+j,l)}const tr=1/4e4;function hl(_,l){const f=r.clamp(l.lat,-r.MAX_MERCATOR_LATITUDE,r.MAX_MERCATOR_LATITUDE),b=new r.LngLat(l.lng-180*tr,f),R=new r.LngLat(l.lng+180*tr,f),M=_.project(b.lng,f),F=_.project(R.lng,f),j=r.MercatorCoordinate.fromLngLat(b),q=r.MercatorCoordinate.fromLngLat(R),Y=F.x-M.x,X=F.y-M.y,te=q.x-j.x,ue=q.y-j.y,ye=Math.sqrt((te*te+ue*ue)/(Y*Y+X*X));return Math.log(ye)/Math.LN2}function os(_,l,f){const b=Math.cos(f),R=Math.sin(f);return{x:_*b-l*R,y:_*R+l*b}}class ss{constructor(l,f,b,R,M,F,j){this.tileSize=512,this._renderWorldCopies=M===void 0||M,this._minZoom=l||0,this._maxZoom=f||22,this._minPitch=b==null?0:b,this._maxPitch=R==null?60:R,this.setProjection(F),this.setMaxBounds(j),this.width=0,this.height=0,this._center=new r.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new ns,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Vi,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const l=new ss(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return l._elevation=this._elevation,l._centerAltitude=this._centerAltitude,l._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,l.tileSize=this.tileSize,l.width=this.width,l.height=this.height,l.cameraElevationReference=this.cameraElevationReference,l._center=this._center,l._setZoom(this.zoom),l._seaLevelZoom=this._seaLevelZoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._nearZ=this._nearZ,l._farZ=this._farZ,l._averageElevation=this._averageElevation,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._camera=this._camera.clone(),l._calcMatrices(),l.freezeTileCoverage=this.freezeTileCoverage,l.frustumCorners=this.frustumCorners,l}get elevation(){return this._elevation}set elevation(l){this._elevation!==l&&(this._elevation=l,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(l){const f=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||f)&&this._updateCameraOnTerrain(),(l||f)&&this._constrainCameraAltitude(),this._calcMatrices()}getProjection(){return r.pick(this.projection,["name","center","parallels"])}setProjection(l){this.projectionOptions=l||{name:"mercator"};const f=this.projection?this.getProjection():void 0;this.projection=r.getProjection(this.projectionOptions);const b=!v(f,this.getProjection());return b&&this._calcMatrices(),this.mercatorFromTransition=!1,b}setMercatorFromTransition(){const l=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=r.getProjection({name:"mercator"});const f=l!==this.projection.name;return f&&this._calcMatrices(),f}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return r.mercatorZfromAltitude(this.center.lat,this.cameraWorldSize)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new r.pointGeometry(this.width,this.height)}get bearing(){return r.wrap(this.rotation,-180,180)}set bearing(l){this.rotation=l}get rotation(){return-this.angle/Math.PI*180}set rotation(l){const f=-l*Math.PI/180;var b;this.angle!==f&&(this._unmodified=!1,this.angle=f,this._calcMatrices(),this.rotationMatrix=(b=new r.ARRAY_TYPE(4),r.ARRAY_TYPE!=Float32Array&&(b[1]=0,b[2]=0),b[0]=1,b[3]=1,b),function(R,M,F){var j=M[0],q=M[1],Y=M[2],X=M[3],te=Math.sin(F),ue=Math.cos(F);R[0]=j*ue+Y*te,R[1]=q*ue+X*te,R[2]=j*-te+Y*ue,R[3]=q*-te+X*ue}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const f=r.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==f&&(this._unmodified=!1,this._pitch=f,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=l/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(l){this._averageElevation=l,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(l){const f=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==f&&(this._unmodified=!1,this._setZoom(f),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(l){this._zoom=l,this.scale=this.zoomScale(l),this.tileZoom=Math.floor(l),this.zoomFraction=l-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const l=this._elevation;this._centerAltitude=l.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=l.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const l=this._elevation,f=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],b=this.horizonLineFromTop();let R=0,M=0;for(let F=0;F<f.length;F++){const j=new r.pointGeometry(f[F][0]*this.width,b+f[F][1]*(this.height-b)),q=l.pointCoordinate(j);if(!q)continue;const Y=1/Math.hypot(q[0]-this._camera.position[0],q[1]-this._camera.position[1]);R+=q[3]*Y,M+=Y}return M===0?NaN:R/M}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const l=this._seaLevelZoom,f=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),b=this.pixelsPerMeter/this.worldSize*f,R=this._mercatorZfromZoom(l),M=this._mercatorZfromZoom(this._maxZoom),F=Math.max(R-b,M);this._setZoom(this._zoomFromMercatorZ(F))}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}computeZoomRelativeTo(l){const f=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,l.toAltitude()));let b;b=l.z<this._camera.position[2]?[f.x,f.y,f.z]:[l.x,l.y,l.z];const R=r.length(r.sub([],this._camera.position,b));return r.clamp(this._zoomFromMercatorZ(R),this._minZoom,this._maxZoom)}setFreeCameraOptions(l){if(!this.height||!l.position&&!l.orientation)return;this._updateCameraState();let f=!1;if(l.orientation&&!r.exactEquals(l.orientation,this._camera.orientation)&&(f=this._setCameraOrientation(l.orientation)),l.position){const b=[l.position.x,l.position.y,l.position.z];r.exactEquals$1(b,this._camera.position)||(this._setCameraPosition(b),f=!0)}f&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const l=this._camera.position,f=new Vt;return f.position=new r.MercatorCoordinate(l[0],l[1],l[2]),f.orientation=this._camera.orientation,f._elevation=this.elevation,f._renderWorldCopies=this.renderWorldCopies,f}_setCameraOrientation(l){if(!r.length$1(l))return!1;r.normalize$1(l,l);const f=r.transformQuat([],[0,0,-1],l),b=r.transformQuat([],[0,-1,0],l);if(b[2]<0)return!1;const R=wo(f,b);return!!R&&(this._camera.orientation=R,!0)}_setCameraPosition(l){const f=this.zoomScale(this.minZoom)*this.tileSize,b=this.zoomScale(this.maxZoom)*this.tileSize,R=this.cameraToCenterDistance;l[2]=r.clamp(l[2],R/b,R/f),this._camera.position=l}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,f,b){this._unmodified=!1,this._edgeInsets.interpolate(l,f,b),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const f=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,f)}getVisibleUnwrappedCoordinates(l){const f=[new r.UnwrappedTileID(0,l)];if(this.renderWorldCopies){const b=this.pointCoordinate(new r.pointGeometry(0,0)),R=this.pointCoordinate(new r.pointGeometry(this.width,0)),M=this.pointCoordinate(new r.pointGeometry(this.width,this.height)),F=this.pointCoordinate(new r.pointGeometry(0,this.height)),j=Math.floor(Math.min(b.x,R.x,M.x,F.x)),q=Math.floor(Math.max(b.x,R.x,M.x,F.x)),Y=1;for(let X=j-Y;X<=q+Y;X++)X!==0&&f.push(new r.UnwrappedTileID(X,l))}return f}coveringTiles(l){let f=this.coveringZoomLevel(l);const b=f,R=this.elevation&&!l.isTerrainDEM,M=this.projection.name==="mercator";if(l.minzoom!==void 0&&f<l.minzoom)return[];l.maxzoom!==void 0&&f>l.maxzoom&&(f=l.maxzoom);const F=this.locationCoordinate(this.center),j=this.center.lat,q=1<<f,Y=[q*F.x,q*F.y,0],X=this.projection.name==="globe",te=!X,ue=r.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,f,te),ye=X?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),he=q*r.mercatorZfromAltitude(1,this.center.lat),me=this._camera.position[2]/r.mercatorZfromAltitude(1,this.center.lat),_e=[q*ye.x,q*ye.y,me*(te?1:he)],fe=this.cameraToCenterDistance/l.tileSize*(l.roundZoom?1:.502),Ce=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?f:0,be=l.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,Be=l.isTerrainDEM?-be:this._elevation?this._elevation.getMinElevationBelowMSL():0,Oe=this.projection.isReprojectedInTileSpace?fl(this):1,$e=ot=>{const mt=new r.MercatorCoordinate(ot.x+25e-6,ot.y,ot.z),Pt=new r.MercatorCoordinate(ot.x,ot.y+25e-6,ot.z),Ot=ot.toLngLat(),Kt=mt.toLngLat(),Qt=Pt.toLngLat(),dn=this.locationCoordinate(Ot),Cn=this.locationCoordinate(Kt),Wt=this.locationCoordinate(Qt),fn=Math.hypot(Cn.x-dn.x,Cn.y-dn.y),kn=Math.hypot(Wt.x-dn.x,Wt.y-dn.y);return Math.sqrt(fn*kn)*Oe/25e-6},De=ot=>{const $t=be,mt=Be;return{aabb:r.tileAABB(this,q,0,0,0,ot,mt,$t,this.projection),zoom:0,x:0,y:0,minZ:mt,maxZ:$t,wrap:ot,fullyVisible:!1}},Le=[];let Ge=[];const Je=f,kt=l.reparseOverscaled?b:f,Ke=ot=>ot*ot,pt=Ke((me-this._centerAltitude)*he),_t=ot=>{if(!this._elevation||!ot.tileID||!M)return;const $t=this._elevation.getMinMaxForTile(ot.tileID),mt=ot.aabb;$t?(mt.min[2]=$t.min,mt.max[2]=$t.max,mt.center[2]=(mt.min[2]+mt.max[2])/2):(ot.shouldSplit=It(ot),ot.shouldSplit||(mt.min[2]=mt.max[2]=mt.center[2]=this._centerAltitude))},It=ot=>{if(ot.zoom<Ce)return!0;if(ot.zoom===Je)return!1;if(ot.shouldSplit!=null)return ot.shouldSplit;const $t=ot.aabb.distanceX(_e),mt=ot.aabb.distanceY(_e);let Pt=pt,Ot=1;if(X){Pt=Ke(ot.aabb.distanceZ(_e));const Qt=Math.pow(2,ot.zoom),dn=r.latFromMercatorY((ot.y+1)/Qt),Cn=r.latFromMercatorY(ot.y/Qt),Wt=Math.min(Math.max(j,dn),Cn),fn=r.circumferenceAtLatitude(Wt)/r.circumferenceAtLatitude(j);if(Ot=Wt===j?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,fn/this._mercatorScaleRatio),this.zoom<=r.GLOBE_ZOOM_THRESHOLD_MIN&&ot.zoom===Je-1&&fn>=.9)return!0}else if(R&&(Pt=Ke(ot.aabb.distanceZ(_e)*he)),this.projection.isReprojectedInTileSpace&&b<=5){const Qt=Math.pow(2,ot.zoom),dn=$e(new r.MercatorCoordinate((ot.x+.5)/Qt,(ot.y+.5)/Qt));Ot=dn>.85?1:dn}const Kt=$t*$t+mt*mt+Pt;return Kt<Ke((1<<Je-ot.zoom)*fe*Ot*((Qt,dn)=>{if(dn*Ke(.707)<Qt)return 1;const Cn=Math.sqrt(dn/Qt);return Cn/(1.4144271570014144+(Math.pow(1.1,Cn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Pt,pt),Kt))};if(this.renderWorldCopies)for(let ot=1;ot<=3;ot++)Le.push(De(-ot)),Le.push(De(ot));for(Le.push(De(0));Le.length>0;){const ot=Le.pop(),$t=ot.x,mt=ot.y;let Pt=ot.fullyVisible;if(!Pt){const Ot=ot.aabb.intersects(ue);if(Ot===0)continue;Pt=Ot===2}if(ot.zoom!==Je&&It(ot))for(let Ot=0;Ot<4;Ot++){const Kt=($t<<1)+Ot%2,Qt=(mt<<1)+(Ot>>1),dn={aabb:M?ot.aabb.quadrant(Ot):r.tileAABB(this,q,ot.zoom+1,Kt,Qt,ot.wrap,ot.minZ,ot.maxZ,this.projection),zoom:ot.zoom+1,x:Kt,y:Qt,wrap:ot.wrap,fullyVisible:Pt,tileID:void 0,shouldSplit:void 0,minZ:ot.minZ,maxZ:ot.maxZ};R&&!X&&(dn.tileID=new r.OverscaledTileID(ot.zoom+1===Je?kt:ot.zoom+1,ot.wrap,ot.zoom+1,Kt,Qt),_t(dn)),Le.push(dn)}else{const Ot=ot.zoom===Je?kt:ot.zoom;if(l.minzoom&&l.minzoom>Ot)continue;const Kt=Y[0]-(.5+$t+(ot.wrap<<ot.zoom))*(1<<f-ot.zoom),Qt=Y[1]-.5-mt,dn=ot.tileID?ot.tileID:new r.OverscaledTileID(Ot,ot.wrap,ot.zoom,$t,mt);Ge.push({tileID:dn,distanceSq:Kt*Kt+Qt*Qt})}}if(this.fogCullDistSq){const ot=this.fogCullDistSq,$t=this.horizonLineFromTop();Ge=Ge.filter(mt=>{const Pt=[0,0,0,1],Ot=[r.EXTENT,r.EXTENT,0,1],Kt=this.calculateFogTileMatrix(mt.tileID.toUnwrapped());r.transformMat4$1(Pt,Pt,Kt),r.transformMat4$1(Ot,Ot,Kt);const Qt=r.getAABBPointSquareDist(Pt,Ot);if(Qt===0)return!0;let dn=!1;const Cn=this._elevation;if(Cn&&Qt>ot&&$t!==0){const Wt=this.calculateProjMatrix(mt.tileID.toUnwrapped());let fn;l.isTerrainDEM||(fn=Cn.getMinMaxForTile(mt.tileID)),fn||(fn={min:Be,max:be});const kn=r.furthestTileCorner(this.rotation),Kn=[kn[0]*r.EXTENT,kn[1]*r.EXTENT,fn.max];r.transformMat4(Kn,Kn,Wt),dn=(1-Kn[1])*this.height*.5<$t}return Qt<ot||dn})}return Ge.sort((ot,$t)=>ot.distanceSq-$t.distanceSq).map(ot=>ot.tileID)}resize(l,f){this.width=l,this.height=f,this.pixelsToGLUnits=[2/l,-2/f],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const f=r.clamp(l.lat,-r.MAX_MERCATOR_LATITUDE,r.MAX_MERCATOR_LATITUDE),b=this.projection.project(l.lng,f);return new r.pointGeometry(b.x*this.worldSize,b.y*this.worldSize)}unproject(l){return this.projection.unproject(l.x/this.worldSize,l.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(l,f){let b,R;const M=this.centerPoint;if(this.projection.name==="globe"){const j=this.worldSize;b=(f.x-M.x)/j,R=(f.y-M.y)/j}else{const j=this.pointCoordinate(f),q=this.pointCoordinate(M);b=j.x-q.x,R=j.y-q.y}const F=this.locationCoordinate(l);this.setLocation(new r.MercatorCoordinate(F.x-b,F.y-R))}setLocation(l){this.center=this.coordinateLocation(l),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(l){return this.projection.locationPoint(this,l)}locationPoint3D(l){return this.projection.locationPoint(this,l,!0)}pointLocation(l){return this.coordinateLocation(this.pointCoordinate(l))}pointLocation3D(l){return this.coordinateLocation(this.pointCoordinate3D(l))}locationCoordinate(l,f){const b=f?r.mercatorZfromAltitude(f,l.lat):void 0,R=this.projection.project(l.lng,l.lat);return new r.MercatorCoordinate(R.x,R.y,b)}coordinateLocation(l){return this.projection.unproject(l.x,l.y)}pointRayIntersection(l,f){const b=f!=null?f:this._centerAltitude,R=[l.x,l.y,0,1],M=[l.x,l.y,1,1];r.transformMat4$1(R,R,this.pixelMatrixInverse),r.transformMat4$1(M,M,this.pixelMatrixInverse);const F=M[3];r.scale$1(R,R,1/R[3]),r.scale$1(M,M,1/F);const j=R[2],q=M[2];return{p0:R,p1:M,t:j===q?0:(b-j)/(q-j)}}screenPointToMercatorRay(l){const f=[l.x,l.y,0,1],b=[l.x,l.y,1,1];return r.transformMat4$1(f,f,this.pixelMatrixInverse),r.transformMat4$1(b,b,this.pixelMatrixInverse),r.scale$1(f,f,1/f[3]),r.scale$1(b,b,1/b[3]),f[2]=r.mercatorZfromAltitude(f[2],this._center.lat)*this.worldSize,b[2]=r.mercatorZfromAltitude(b[2],this._center.lat)*this.worldSize,r.scale$1(f,f,1/this.worldSize),r.scale$1(b,b,1/this.worldSize),new r.Ray([f[0],f[1],f[2]],r.normalize([],r.sub([],b,f)))}rayIntersectionCoordinate(l){const{p0:f,p1:b,t:R}=l,M=r.mercatorZfromAltitude(f[2],this._center.lat),F=r.mercatorZfromAltitude(b[2],this._center.lat);return new r.MercatorCoordinate(r.number(f[0],b[0],R)/this.worldSize,r.number(f[1],b[1],R)/this.worldSize,r.number(M,F,R))}pointCoordinate(l,f=this._centerAltitude){return this.projection.pointCoordinate(this,l.x,l.y,f)}pointCoordinate3D(l){if(!this.elevation)return this.pointCoordinate(l);let f=this.projection.pointCoordinate3D(this,l.x,l.y);if(f)return new r.MercatorCoordinate(f[0],f[1],f[2]);let b=0,R=this.horizonLineFromTop();if(l.y>R)return this.pointCoordinate(l);const M=.02*R,F=l.clone();for(let j=0;j<10&&R-b>M;j++){F.y=r.number(b,R,.66);const q=this.projection.pointCoordinate3D(this,F.x,F.y);q?(R=F.y,f=q):b=F.y}return f?new r.MercatorCoordinate(f[0],f[1],f[2]):this.pointCoordinate(l)}isPointAboveHorizon(l){return this.projection.isPointAboveHorizon(this,l)}_coordinatePoint(l,f){const b=f&&this.elevation?this.elevation.getAtPointOrZero(l,this._centerAltitude):this._centerAltitude,R=[l.x*this.worldSize,l.y*this.worldSize,b+l.toAltitude(),1];return r.transformMat4$1(R,R,this.pixelMatrix),R[3]>0?new r.pointGeometry(R[0]/R[3],R[1]/R[3]):new r.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBounds(l,f){const b=new r.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),R=new r.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),M=new r.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),F=new r.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let j=this.pointCoordinate(b,l),q=this.pointCoordinate(R,l);const Y=this.pointCoordinate(M,f),X=this.pointCoordinate(F,f),te=(ue,ye)=>(ye.y-ue.y)/(ye.x-ue.x);return j.y>1&&q.y>=0?j=new r.MercatorCoordinate((1-X.y)/te(X,j)+X.x,1):j.y<0&&q.y<=1&&(j=new r.MercatorCoordinate(-X.y/te(X,j)+X.x,0)),q.y>1&&j.y>=0?q=new r.MercatorCoordinate((1-Y.y)/te(Y,q)+Y.x,1):q.y<0&&j.y<=1&&(q=new r.MercatorCoordinate(-Y.y/te(Y,q)+Y.x,0)),new r.LngLatBounds().extend(this.coordinateLocation(j)).extend(this.coordinateLocation(q)).extend(this.coordinateLocation(X)).extend(this.coordinateLocation(Y))}_getBounds3D(){const l=this.elevation;if(!l.visibleDemTiles.length)return this._getBounds(0,0);const f=l.visibleDemTiles.reduce((b,R)=>{if(R.dem){const M=R.dem.tree;b.min=Math.min(b.min,M.minimums[0]),b.max=Math.max(b.max,M.maximums[0])}return b},{min:Number.MAX_VALUE,max:0});return this._getBounds(f.min*l.exaggeration(),f.max*l.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(l=!0){const f=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,b=this.height/2-f*(1-this._horizonShift);return l?Math.max(0,b):b}getMaxBounds(){return this.maxBounds}setMaxBounds(l){this.maxBounds=l,this.minLat=-r.MAX_MERCATOR_LATITUDE,this.maxLat=r.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,l&&(this.minLat=l.getSouth(),this.maxLat=l.getNorth(),this.minLng=l.getWest(),this.maxLng=l.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=r.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=r.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=r.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=r.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(l,f){return this.projection.createTileMatrix(this,f,l)}calculateDistanceTileData(l){const f=l.key,b=this._distanceTileDataCache;if(b[f])return b[f];const R=l.canonical,M=1/this.height,F=this.cameraWorldSize/this.zoomScale(R.z),j=(R.x+Math.pow(2,R.z)*l.wrap)*F,q=R.y*F,Y=this.point,X=this.angle,te=Math.sin(-X),ue=-Math.cos(-X);return b[f]={bearing:[te,ue],center:[(Y.x-j)*M,(Y.y-q)*M],scale:F/r.EXTENT*M},b[f]}calculateFogTileMatrix(l){const f=l.key,b=this._fogTileMatrixCache;if(b[f])return b[f];const R=this.projection.createTileMatrix(this,this.cameraWorldSize,l);return r.multiply(R,this.worldToFogMatrix,R),b[f]=new Float32Array(R),b[f]}calculateProjMatrix(l,f=!1){const b=l.key,R=f?this._alignedProjMatrixCache:this._projMatrixCache;if(R[b])return R[b];const M=this.calculatePosMatrix(l,this.worldSize);return r.multiply(M,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:f?this.alignedProjMatrix:this.projMatrix,M),R[b]=new Float32Array(M),R[b]}calculatePixelsToTileUnitsMatrix(l){const f=l.tileID.key,b=this._pixelsToTileUnitsCache;if(b[f])return b[f];const R=function(M,F){const{scale:j}=M.tileTransform,q=j*r.EXTENT/(M.tileSize*Math.pow(2,F.zoom-M.tileID.overscaledZ+M.tileID.canonical.z));return Y=new Float32Array(4),ue=(X=F.inverseAdjustmentMatrix)[1],ye=X[2],he=X[3],_e=(te=[q,q])[1],Y[0]=X[0]*(me=te[0]),Y[1]=ue*me,Y[2]=ye*_e,Y[3]=he*_e,Y;var Y,X,te,ue,ye,he,me,_e}(l,this);return b[f]=R,b[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const l=this._elevation;this._updateCameraState();const f=r.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,b=this._computeCameraPosition(f),R=this._camera.forward(),M=r.mercatorZfromAltitude(1,this._center.lat);b[2]/=M,R[2]/=M,r.normalize(R,R);const F=l.raycast(b,R,l.exaggeration());if(F){const j=r.scaleAndAdd([],b,R,F),q=new r.MercatorCoordinate(j[0],j[1],r.mercatorZfromAltitude(j[2],r.latFromMercatorY(j[1]))),Y=(q.z+r.length([q.x-b[0],q.y-b[1],q.z-b[2]*M]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(Y),this._centerAltitude=q.toAltitude(),this._center=this.coordinateLocation(q),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const l=this._elevation;this._updateCameraState();const f=r.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,b=this._computeCameraPosition(f),R=l.getAtPointOrZero(new r.MercatorCoordinate(...b)),M=this._minimumHeightOverTerrain()*Math.cos(r.degToRad(this._maxPitch)),F=this._camera.position[2]-this.pixelsPerMeter/this.worldSize*R;if(F<M){const j=this.locationCoordinate(this._center,this._centerAltitude),q=[j.x-b[0],j.y-b[1],j.z-b[2]],Y=r.length(q);q[2]-=(M-F)/this._pixelsPerMercatorPixel;const X=r.length(q);if(X===0)return;r.scale$2(q,q,Y/X*this._pixelsPerMercatorPixel),this._camera.position=[j.x-q[0],j.y-q[1],j.z*this._pixelsPerMercatorPixel-q[2]],this._camera.orientation=wo(q,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const l=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||l){const ue=this.center;return ue.lat=r.clamp(ue.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!l)&&(ue.lng=r.clamp(ue.lng,this.minLng,this.maxLng)),this.center=ue,void(this._constraining=!1)}const f=this._unmodified,{x:b,y:R}=this.point;let M=0,F=b,j=R;const q=this.width/2,Y=this.height/2,X=this.worldMinY*this.scale,te=this.worldMaxY*this.scale;if(R-Y<X&&(j=X+Y),R+Y>te&&(j=te-Y),te-X<this.height&&(M=Math.max(M,this.height/(te-X)),j=(te+X)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const ue=this.worldMinX*this.scale,ye=this.worldMaxX*this.scale,he=this.worldSize/2-(ue+ye)/2;F=(b+he+this.worldSize)%this.worldSize-he,F-q<ue&&(F=ue+q),F+q>ye&&(F=ye-q),ye-ue<this.width&&(M=Math.max(M,this.width/(ye-ue)),F=(ye+ue)/2)}F===b&&j===R||(this.center=this.unproject(new r.pointGeometry(F,j))),M&&(this.zoom+=this.scaleZoom(M)),this._constrainCameraAltitude(),this._unmodified=f,this._constraining=!1}_minZoomForBounds(){let l=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(l=Math.max(l,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),l}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,f=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=r.mercatorZfromAltitude(1,this.center.lat)/r.mercatorZfromAltitude(1,r.GLOBE_SCALE_MATCH_LATITUDE));const b=rs(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,b),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const R=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?f:1),M=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);M[8]=2*-l.x/this.width,M[9]=2*l.y/this.height;let F=r.mul([],M,R);if(this.projection.isReprojectedInTileSpace){const Oe=this.locationCoordinate(this.center),$e=r.identity([]);r.translate($e,$e,[Oe.x*this.worldSize,Oe.y*this.worldSize,0]),r.multiply($e,$e,pl(this)),r.translate($e,$e,[-Oe.x*this.worldSize,-Oe.y*this.worldSize,0]),r.multiply(F,F,$e),this.inverseAdjustmentMatrix=function(De){const Le=pl(De,!0);return ne([],[Le[0],Le[1],Le[4],Le[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=r.scale([],F,[this.worldSize,this.worldSize,this.worldSize/f,1]),this.projMatrix=F,this.invProjMatrix=r.invert(new Float64Array(16),this.projMatrix);const j=r.invert([],M);this.frustumCorners=r.FrustumCorners.fromInvProjectionMatrix(j,this.horizonLineFromTop(),this.height);const q=new Float32Array(16);r.identity(q),r.scale(q,q,[1,-1,1]),r.rotateX(q,q,this._pitch),r.rotateZ(q,q,this.angle);const Y=r.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),X=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;Y[8]=2*-l.x/this.width,Y[9]=2*(l.y+X)/this.height,this.skyboxMatrix=r.multiply(q,Y,q);const te=this.point,ue=te.x,ye=te.y,he=this.width%2/2,me=this.height%2/2,_e=Math.cos(this.angle),fe=Math.sin(this.angle),Ce=ue-Math.round(ue)+_e*he+fe*me,be=ye-Math.round(ye)+_e*me+fe*he,Be=new Float64Array(F);if(r.translate(Be,Be,[Ce>.5?Ce-1:Ce,be>.5?be-1:be,0]),this.alignedProjMatrix=Be,F=r.create(),r.scale(F,F,[this.width/2,-this.height/2,1]),r.translate(F,F,[1,-1,0]),this.labelPlaneMatrix=F,F=r.create(),r.scale(F,F,[1,-1,1]),r.translate(F,F,[-1,-1,0]),r.scale(F,F,[2/this.width,2/this.height,1]),this.glCoordMatrix=F,this.pixelMatrix=r.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},F=r.invert(new Float64Array(16),this.pixelMatrix),!F)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=F,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=r.calculateGlobeMatrix(this);const Oe=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=r.transformMat4(Oe,Oe,R),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=F;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const l=this.cameraWorldSize,f=this.cameraPixelsPerMeter,b=this._camera.position,R=1/this.height/this._pixelsPerMercatorPixel,M=[l,l,f];r.scale$2(M,M,R),r.scale$2(b,b,-1),r.multiply$2(b,b,M);const F=r.create();r.translate(F,F,b),r.scale(F,F,M),this.mercatorFogMatrix=F,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(l,f,R)}_computeCameraPosition(l){const f=(l=l||this.pixelsPerMeter)/this.pixelsPerMeter,b=this._camera.forward(),R=this.point,M=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*f-l/this.worldSize*this._centerAltitude;return[R.x/this.worldSize-b[0]*M,R.y/this.worldSize-b[1]*M,l/this.worldSize*this._centerAltitude-b[2]*M]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(l){const f=this._maxCameraBoundsDistance()*Math.cos(this._pitch),b=l[2];let R=1;b>0&&(R=Math.min((f-this._camera.position[2])/b,1)),this._camera.position=r.scaleAndAdd([],this._camera.position,l,R),this._updateStateFromCamera(),this.projection.wrap&&(this.center=this.center.wrap())}_updateStateFromCamera(){const l=this._camera.position,f=this._camera.forward(),{pitch:b,bearing:R}=this._camera.getPitchBearing(),M=r.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,F=this._mercatorZfromZoom(this._maxZoom)*Math.cos(r.degToRad(this._maxPitch)),j=Math.max((l[2]-M)/Math.cos(b),F),q=this._zoomFromMercatorZ(j);r.scaleAndAdd(l,l,f,j),this._pitch=r.clamp(b,r.degToRad(this.minPitch),r.degToRad(this.maxPitch)),this.angle=r.wrap(R,-Math.PI,Math.PI),this._setZoom(r.clamp(q,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new r.MercatorCoordinate(l[0],l[1],l[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(l){return Math.pow(2,l)*this.tileSize}_mercatorZfromZoom(l){return this.cameraToCenterDistance/this._worldSizeFromZoom(l)}_minimumHeightOverTerrain(){const l=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(l)}_zoomFromMercatorZ(l){return this.scaleZoom(this.cameraToCenterDistance/(l*this.tileSize))}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(r.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(l,f){const b=Math.min(l.x,f.x),R=Math.max(l.x,f.x),M=Math.min(l.y,f.y),F=Math.max(l.y,f.y);if(M<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const j=[new r.pointGeometry(b,M),new r.pointGeometry(R,F),new r.pointGeometry(b,F),new r.pointGeometry(R,M)],q=this.renderWorldCopies?-3:0,Y=this.renderWorldCopies?4:1;for(const X of j){const te=this.pointRayIntersection(X);if(te.t<0)return!0;const ue=this.rayIntersectionCoordinate(te);if(ue.x<q||ue.y<0||ue.x>Y||ue.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+r.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new r.pointGeometry(0,0),new r.pointGeometry(this.width,this.height))}zoomDeltaToMovement(l,f){const b=r.length(r.sub([],this._camera.position,l)),R=this._zoomFromMercatorZ(b)+f;return b-this._mercatorZfromZoom(R)}getCameraPoint(){if(this.projection.name==="globe"){const l=function(f,b){const R=[f[0],f[1],f[2],1];r.transformMat4$1(R,R,b);const M=Math.max(R[3],1e-6);return[R[0]/M,R[1]/M,R[2]/M,M]}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new r.pointGeometry(l[0],l[1])}{const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new r.pointGeometry(0,l))}}getCameraToCenterDistance(l){const f=rs(l,this.zoom,this.width,this.height,1024),b=l.pixelSpaceConversion(this.center.lat,this.worldSize,f);return .5/Math.tan(.5*this._fov)*this.height*b}}function as(_,l){let f=!1,b=null;const R=()=>{b=null,f&&(_(),b=setTimeout(R,l),f=!1)};return()=>(f=!0,b||R(),b)}class Ec{constructor(l){this._hashName=l&&encodeURIComponent(l),r.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=as(this._updateHashUnthrottled.bind(this),300)}addTo(l){return this._map=l,r.window.addEventListener("hashchange",this._onHashChange,!1),l.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),r.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const l=this._map;if(!l)return"";const f=ml(l);if(this._hashName){const b=this._hashName;let R=!1;const M=r.window.location.hash.slice(1).split("&").map(F=>{const j=F.split("=")[0];return j===b?(R=!0,`${j}=${f}`):F}).filter(F=>F);return R||M.push(`${b}=${f}`),`#${M.join("&")}`}return`#${f}`}_getCurrentHash(){const l=r.window.location.hash.replace("#","");if(this._hashName){let f;return l.split("&").map(b=>b.split("=")).forEach(b=>{b[0]===this._hashName&&(f=b)}),(f&&f[1]||"").split("/")}return l.split("/")}_onHashChange(){const l=this._map;if(!l)return!1;const f=this._getCurrentHash();if(f.length>=3&&!f.some(b=>isNaN(b))){const b=l.dragRotate.isEnabled()&&l.touchZoomRotate.isEnabled()?+(f[3]||0):l.getBearing();return l.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:b,pitch:+(f[4]||0)}),!0}return!1}_updateHashUnthrottled(){const l=r.window.location.href.replace(/(#.+)?$/,this.getHashString());r.window.history.replaceState(r.window.history.state,null,l)}}function ml(_,l){const f=_.getCenter(),b=Math.round(100*_.getZoom())/100,R=Math.ceil((b*Math.LN2+Math.log(512/360/.5))/Math.LN10),M=Math.pow(10,R),F=Math.round(f.lng*M)/M,j=Math.round(f.lat*M)/M,q=_.getBearing(),Y=_.getPitch();let X=l?`/${F}/${j}/${b}`:`${b}/${j}/${F}`;return(q||Y)&&(X+="/"+Math.round(10*q)/10),Y&&(X+=`/${Math.round(Y)}`),X}const pr={linearity:.3,easing:r.bezier(0,0,.3,1)},Wu=r.extend({deceleration:2500,maxSpeed:1400},pr),Zu=r.extend({deceleration:20,maxSpeed:1400},pr),Cc=r.extend({deceleration:1e3,maxSpeed:360},pr),ea=r.extend({deceleration:1e3,maxSpeed:90},pr);class gl{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:r.exported.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,f=r.exported.now();for(;l.length>0&&f-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const f={zoom:0,bearing:0,pitch:0,pan:new r.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:M}of this._inertiaBuffer)f.zoom+=M.zoomDelta||0,f.bearing+=M.bearingDelta||0,f.pitch+=M.pitchDelta||0,M.panDelta&&f.pan._add(M.panDelta),M.around&&(f.around=M.around),M.pinchAround&&(f.pinchAround=M.pinchAround);const b=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,R={};if(f.pan.mag()){const M=cs(f.pan.mag(),b,r.extend({},Wu,l||{}));R.offset=f.pan.mult(M.amount/f.pan.mag()),R.center=this._map.transform.center,ls(R,M)}if(f.zoom){const M=cs(f.zoom,b,Zu);R.zoom=this._map.transform.zoom+M.amount,ls(R,M)}if(f.bearing){const M=cs(f.bearing,b,Cc);R.bearing=this._map.transform.bearing+r.clamp(M.amount,-179,179),ls(R,M)}if(f.pitch){const M=cs(f.pitch,b,ea);R.pitch=this._map.transform.pitch+M.amount,ls(R,M)}if(R.zoom||R.bearing){const M=f.pinchAround===void 0?f.around:f.pinchAround;R.around=M?this._map.unproject(M):this._map.getCenter()}return this.clear(),R.noMoveStart=!0,R}}function ls(_,l){(!_.duration||_.duration<l.duration)&&(_.duration=l.duration,_.easing=l.easing)}function cs(_,l,f){const{maxSpeed:b,linearity:R,deceleration:M}=f,F=r.clamp(_*R/(l/1e3),-b,b),j=Math.abs(F)/(M*R);return{easing:f.easing,duration:1e3*j,amount:F*(j/2)}}class xi extends r.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,f,b,R={}){const M=Z(f.getCanvasContainer(),b),F=f.unproject(M);super(l,r.extend({point:M,lngLat:F,originalEvent:b},R)),this._defaultPrevented=!1,this.target=f}}class Eo extends r.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,f,b){const R=l==="touchend"?b.changedTouches:b.touches,M=re(f.getCanvasContainer(),R),F=M.map(q=>f.unproject(q)),j=M.reduce((q,Y,X,te)=>q.add(Y.div(te.length)),new r.pointGeometry(0,0));super(l,{points:M,point:j,lngLats:F,lngLat:f.unproject(j),originalEvent:b}),this._defaultPrevented=!1}}class Sc extends r.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,f,b){super(l,{originalEvent:b}),this._defaultPrevented=!1}}class Tc{constructor(l,f){this._map=l,this._clickTolerance=f.clickTolerance}reset(){this._mousedownPos=void 0}wheel(l){return this._firePreventable(new Sc(l.type,this._map,l))}mousedown(l,f){return this._mousedownPos=f,this._firePreventable(new xi(l.type,this._map,l))}mouseup(l){this._map.fire(new xi(l.type,this._map,l))}preclick(l){const f=r.extend({},l);f.type="preclick",this._map.fire(new xi(f.type,this._map,f))}click(l,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||(this.preclick(l),this._map.fire(new xi(l.type,this._map,l)))}dblclick(l){return this._firePreventable(new xi(l.type,this._map,l))}mouseover(l){this._map.fire(new xi(l.type,this._map,l))}mouseout(l){this._map.fire(new xi(l.type,this._map,l))}touchstart(l){return this._firePreventable(new Eo(l.type,this._map,l))}touchmove(l){this._map.fire(new Eo(l.type,this._map,l))}touchend(l){this._map.fire(new Eo(l.type,this._map,l))}touchcancel(l){this._map.fire(new Eo(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ac{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(l){this._map.fire(new xi(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new xi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new xi(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class kc{constructor(l,f){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=f.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,f){this.isEnabled()&&l.shiftKey&&l.button===0&&(V(),this._startPos=this._lastPos=f,this._active=!0)}mousemoveWindow(l,f){if(!this._active)return;const b=f;if(this._lastPos.equals(b)||!this._box&&b.dist(this._startPos)<this._clickTolerance)return;const R=this._startPos;this._lastPos=b,this._box||(this._box=S("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));const M=Math.min(R.x,b.x),F=Math.max(R.x,b.x),j=Math.min(R.y,b.y),q=Math.max(R.y,b.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${M}px,${j}px)`,this._box.style.width=F-M+"px",this._box.style.height=q-j+"px")})}mouseupWindow(l,f){if(!this._active||l.button!==0)return;const b=this._startPos,R=f;if(this.reset(),W(),b.x!==R.x||b.y!==R.y)return this._map.fire(new r.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:M=>M.fitScreenCoordinates(b,R,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",l)}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),D(),delete this._startPos,delete this._lastPos}_fireEvent(l,f){return this._map.fire(new r.Event(l,{originalEvent:f}))}}function ta(_,l){const f={};for(let b=0;b<_.length;b++)f[_[b].identifier]=l[b];return f}class Co{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(l,f,b){(this.centroid||b.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=l.timeStamp),b.length===this.numTouches&&(this.centroid=function(R){const M=new r.pointGeometry(0,0);for(const F of R)M._add(F);return M.div(R.length)}(f),this.touches=ta(b,f)))}touchmove(l,f,b){if(this.aborted||!this.centroid)return;const R=ta(b,f);for(const M in this.touches){const F=this.touches[M],j=R[M];(!j||j.dist(F)>30)&&(this.aborted=!0)}}touchend(l,f,b){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),b.length===0){const R=!this.aborted&&this.centroid;if(this.reset(),R)return R}}}class na{constructor(l){this.singleTap=new Co(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(l,f,b){this.singleTap.touchstart(l,f,b)}touchmove(l,f,b){this.singleTap.touchmove(l,f,b)}touchend(l,f,b){const R=this.singleTap.touchend(l,f,b);if(R){const M=l.timeStamp-this.lastTime<500,F=!this.lastTap||this.lastTap.dist(R)<30;if(M&&F||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=R,this.count===this.numTaps)return this.reset(),R}}}class Rc{constructor(){this._zoomIn=new na({numTouches:1,numTaps:2}),this._zoomOut=new na({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,f,b){this._zoomIn.touchstart(l,f,b),this._zoomOut.touchstart(l,f,b)}touchmove(l,f,b){this._zoomIn.touchmove(l,f,b),this._zoomOut.touchmove(l,f,b)}touchend(l,f,b){const R=this._zoomIn.touchend(l,f,b),M=this._zoomOut.touchend(l,f,b);return R?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:F=>F.easeTo({duration:300,zoom:F.getZoom()+1,around:F.unproject(R)},{originalEvent:l})}):M?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:F=>F.easeTo({duration:300,zoom:F.getZoom()-1,around:F.unproject(M)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const $c={0:1,2:2};class ia{constructor(l){this.reset(),this._clickTolerance=l.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(l,f){return!1}_move(l,f){return{}}mousedown(l,f){if(this._lastPoint)return;const b=ae(l);this._correctButton(l,b)&&(this._lastPoint=f,this._eventButton=b)}mousemoveWindow(l,f){const b=this._lastPoint;if(b){if(l.preventDefault(),this._eventButton!=null&&function(R,M){const F=$c[M];return R.buttons===void 0||(R.buttons&F)!==F}(l,this._eventButton))this.reset();else if(this._moved||!(f.dist(b)<this._clickTolerance))return this._moved=!0,this._lastPoint=f,this._move(b,f)}}mouseupWindow(l){this._lastPoint&&ae(l)===this._eventButton&&(this._moved&&W(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Nc extends ia{mousedown(l,f){super.mousedown(l,f),this._lastPoint&&(this._active=!0)}_correctButton(l,f){return f===0&&!l.ctrlKey}_move(l,f){return{around:f,panDelta:f.sub(l)}}}class _l extends ia{_correctButton(l,f){return f===0&&l.ctrlKey||f===2}_move(l,f){const b=.8*(f.x-l.x);if(b)return this._active=!0,{bearingDelta:b}}contextmenu(l){l.preventDefault()}}class mi extends ia{_correctButton(l,f){return f===0&&l.ctrlKey||f===2}_move(l,f){const b=-.5*(f.y-l.y);if(b)return this._active=!0,{pitchDelta:b}}contextmenu(l){l.preventDefault()}}class Yu{constructor(l,f){this._map=l,this._el=l.getCanvasContainer(),this._minTouches=1,this._clickTolerance=f.clickTolerance||1,this.reset(),r.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new r.pointGeometry(0,0)}touchstart(l,f,b){return this._calculateTransform(l,f,b)}touchmove(l,f,b){if(this._active&&!(b.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(b.length===1&&!r.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return l.cancelable&&l.preventDefault(),this._calculateTransform(l,f,b)}}touchend(l,f,b){this._calculateTransform(l,f,b),this._active&&b.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,f,b){b.length>0&&(this._active=!0);const R=ta(b,f),M=new r.pointGeometry(0,0),F=new r.pointGeometry(0,0);let j=0;for(const Y in R){const X=R[Y],te=this._touches[Y];te&&(M._add(X),F._add(X.sub(te)),j++,R[Y]=X)}if(this._touches=R,j<this._minTouches||!F.mag())return;const q=F.div(j);return this._sum._add(q),this._sum.mag()<this._clickTolerance?void 0:{around:M.div(j),panDelta:q}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=S("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class ra{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(l){}_move(l,f,b){return{}}touchstart(l,f,b){this._firstTwoTouches||b.length<2||(this._firstTwoTouches=[b[0].identifier,b[1].identifier],this._start([f[0],f[1]]))}touchmove(l,f,b){const R=this._firstTwoTouches;if(!R)return;l.preventDefault();const[M,F]=R,j=oa(b,f,M),q=oa(b,f,F);if(!j||!q)return;const Y=this._aroundCenter?null:j.add(q).div(2);return this._move([j,q],Y,l)}touchend(l,f,b){if(!this._firstTwoTouches)return;const[R,M]=this._firstTwoTouches,F=oa(b,f,R),j=oa(b,f,M);F&&j||(this._active&&W(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function oa(_,l,f){for(let b=0;b<_.length;b++)if(_[b].identifier===f)return l[b]}function Mc(_,l){return Math.log(_/l)/Math.LN2}class fr extends ra{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,f){const b=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(Mc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Mc(this._distance,b),pinchAround:f}}}function vl(_,l){return 180*_.angleWith(l)/Math.PI}class So extends ra{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,f){const b=this._vector;if(this._vector=l[0].sub(l[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:vl(this._vector,b),pinchAround:f}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const f=25/(Math.PI*this._minDiameter)*360,b=vl(l,this._startVector);return Math.abs(b)<f}}function Hi(_){return Math.abs(_.y)>Math.abs(_.x)}class sa extends ra{constructor(l){super(),this._map=l}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(l){this._lastPoints=l,Hi(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,f,b){const R=this._lastPoints;if(!R)return;const M=l[0].sub(R[0]),F=l[1].sub(R[1]);return this._map._cooperativeGestures&&b.touches.length<3||(this._valid=this.gestureBeginsVertically(M,F,b.timeStamp),!this._valid)?void 0:(this._lastPoints=l,this._active=!0,{pitchDelta:(M.y+F.y)/2*-.5})}gestureBeginsVertically(l,f,b){if(this._valid!==void 0)return this._valid;const R=l.mag()>=2,M=f.mag()>=2;if(!R&&!M)return;if(!R||!M)return this._firstMove==null&&(this._firstMove=b),b-this._firstMove<100&&void 0;const F=l.y>0==f.y>0;return Hi(l)&&Hi(f)&&F}}const qt={panStep:100,bearingStep:15,pitchStep:10};class Ic{constructor(){const l=qt;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let f=0,b=0,R=0,M=0,F=0;switch(l.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:l.shiftKey?b=-1:(l.preventDefault(),M=-1);break;case 39:l.shiftKey?b=1:(l.preventDefault(),M=1);break;case 38:l.shiftKey?R=1:(l.preventDefault(),F=-1);break;case 40:l.shiftKey?R=-1:(l.preventDefault(),F=1);break;default:return}return this._rotationDisabled&&(b=0,R=0),{cameraAnimation:j=>{const q=j.getZoom();j.easeTo({duration:300,easeId:"keyboardHandler",easing:Lc,zoom:f?Math.round(q)+f*(l.shiftKey?2:1):q,bearing:j.getBearing()+b*this._bearingStep,pitch:j.getPitch()+R*this._pitchStep,offset:[-M*this._panStep,-F*this._panStep],center:j.getCenter()},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Lc(_){return _*(2-_)}const To=4.000244140625;class us{constructor(l,f){this._map=l,this._el=l.getCanvasContainer(),this._handler=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,r.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(l){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(l.ctrlKey||l.metaKey||this.isZooming()||r.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let f=l.deltaMode===r.window.WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const b=r.exported.now(),R=b-(this._lastWheelEventTime||0);this._lastWheelEventTime=b,f!==0&&f%To==0?this._type="wheel":f!==0&&Math.abs(f)<4?this._type="trackpad":R>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(R*f)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),l.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=l,this._delta-=f,this._active||this._start(l)),l.preventDefault()}_onTimeout(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const f=Z(this._el,l);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:f,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._map.transform,f=()=>l._terrainEnabled()&&this._aroundCoord?l.computeZoomRelativeTo(this._aroundCoord):l.zoom;if(this._delta!==0){const q=this._type==="wheel"&&Math.abs(this._delta)>To?this._wheelZoomRate:this._defaultZoomRate;let Y=2/(1+Math.exp(-Math.abs(this._delta*q)));this._delta<0&&Y!==0&&(Y=1/Y);const X=f(),te=Math.pow(2,X),ue=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):te;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(ue*Y))),this._type==="wheel"&&(this._startZoom=X,this._easing=this._smoothOutEasing(200)),this._delta=0}const b=typeof this._targetZoom=="number"?this._targetZoom:f(),R=this._startZoom,M=this._easing;let F,j=!1;if(this._type==="wheel"&&R&&M){const q=Math.min((r.exported.now()-this._lastWheelEventTime)/200,1),Y=M(q);F=r.number(R,b,Y),q<1?this._frameId||(this._frameId=!0):j=!0}else F=b,j=!0;return this._active=!0,j&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!j,zoomDelta:F-f(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let f=r.ease;if(this._prevEase){const b=this._prevEase,R=(r.exported.now()-b.start)/b.duration,M=b.easing(R+.01)-b.easing(R),F=.27/Math.sqrt(M*M+1e-4)*.01,j=Math.sqrt(.0729-F*F);f=r.bezier(F,j,.25,1)}return this._prevEase={start:r.exported.now(),duration:l,easing:f},f}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=S("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(r.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class Oc{constructor(l,f){this._clickZoom=l,this._tapZoom=f}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Pc{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(l,f){return l.preventDefault(),{cameraAnimation:b=>{b.easeTo({duration:300,zoom:b.getZoom()+(l.shiftKey?-1:1),around:b.unproject(f)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Dc{constructor(){this._tap=new na({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(l,f,b){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?b.length>0&&(this._swipePoint=f[0],this._swipeTouch=b[0].identifier):this._tap.touchstart(l,f,b))}touchmove(l,f,b){if(this._tapTime){if(this._swipePoint){if(b[0].identifier!==this._swipeTouch)return;const R=f[0],M=R.y-this._swipePoint.y;return this._swipePoint=R,l.preventDefault(),this._active=!0,{zoomDelta:M/128}}}else this._tap.touchmove(l,f,b)}touchend(l,f,b){this._tapTime?this._swipePoint&&b.length===0&&this.reset():this._tap.touchend(l,f,b)&&(this._tapTime=l.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bc{constructor(l,f,b){this._el=l,this._mousePan=f,this._touchPan=b}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class zc{constructor(l,f,b){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=f,this._mousePitch=b}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Fc{constructor(l,f,b,R){this._el=l,this._touchZoom=f,this._touchRotate=b,this._tapDragZoom=R,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const ds=_=>_.zoom||_.drag||_.pitch||_.rotate;class aa extends r.Event{}class yl{constructor(){this.constants=[1,1,.01],this.radius=0}setup(l,f){const b=r.sub([],f,l);this.radius=r.length(b[2]<0?r.div([],b,this.constants):[b[0],b[1],0])}projectRay(l){r.div(l,l,this.constants),r.normalize(l,l),r.mul$1(l,l,this.constants);const f=r.scale$2([],l,this.radius);if(f[2]>0){const b=r.scale$2([],[0,0,1],r.dot(f,[0,0,1])),R=r.scale$2([],r.normalize([],[f[0],f[1],0]),this.radius),M=r.add([],f,r.scale$2([],r.sub([],r.add([],R,b),f),2));f[0]=M[0],f[1]=M[1]}return f}}function Hr(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class Vc{constructor(l,f){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new gl(l),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new yl,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(f),r.bindAll(["handleEvent","handleWindowEvent"],this);const b=this._el;this._listeners=[[b,"touchstart",{passive:!0}],[b,"touchmove",{passive:!1}],[b,"touchend",void 0],[b,"touchcancel",void 0],[b,"mousedown",void 0],[b,"mousemove",void 0],[b,"mouseup",void 0],[r.window.document,"mousemove",{capture:!0}],[r.window.document,"mouseup",void 0],[b,"mouseover",void 0],[b,"mouseout",void 0],[b,"dblclick",void 0],[b,"click",void 0],[b,"keydown",{capture:!1}],[b,"keyup",void 0],[b,"wheel",{passive:!1}],[b,"contextmenu",void 0],[r.window,"blur",void 0]];for(const[R,M,F]of this._listeners)R.addEventListener(M,R===r.window.document?this.handleWindowEvent:this.handleEvent,F)}destroy(){for(const[l,f,b]of this._listeners)l.removeEventListener(f,l===r.window.document?this.handleWindowEvent:this.handleEvent,b)}_addDefaultHandlers(l){const f=this._map,b=f.getCanvasContainer();this._add("mapEvent",new Tc(f,l));const R=f.boxZoom=new kc(f,l);this._add("boxZoom",R);const M=new Rc,F=new Pc;f.doubleClickZoom=new Oc(F,M),this._add("tapZoom",M),this._add("clickZoom",F);const j=new Dc;this._add("tapDragZoom",j);const q=f.touchPitch=new sa(f);this._add("touchPitch",q);const Y=new _l(l),X=new mi(l);f.dragRotate=new zc(l,Y,X),this._add("mouseRotate",Y,["mousePitch"]),this._add("mousePitch",X,["mouseRotate"]);const te=new Nc(l),ue=new Yu(f,l);f.dragPan=new Bc(b,te,ue),this._add("mousePan",te),this._add("touchPan",ue,["touchZoom","touchRotate"]);const ye=new So,he=new fr;f.touchZoomRotate=new Fc(b,he,ye,j),this._add("touchRotate",ye,["touchPan","touchZoom"]),this._add("touchZoom",he,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Ac(f));const me=f.scrollZoom=new us(f,this);this._add("scrollZoom",me,["mousePan"]);const _e=f.keyboard=new Ic;this._add("keyboard",_e);for(const fe of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])l.interactive&&l[fe]&&f[fe].enable(l[fe])}_add(l,f,b){this._handlers.push({handlerName:l,handler:f,allowed:b}),this._handlersById[l]=f}stop(l){if(!this._updatingCamera){for(const{handler:f}of this._handlers)f.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ds(this._eventsInProgress)||this.isZooming()}_blockedByActive(l,f,b){for(const R in l)if(R!==b&&(!f||f.indexOf(R)<0))return!0;return!1}handleWindowEvent(l){this.handleEvent(l,`${l.type}Window`)}_getMapTouches(l){const f=[];for(const b of l)this._el.contains(b.target)&&f.push(b);return f}handleEvent(l,f){this._updatingCamera=!0;const b=l.type==="renderFrame",R=b?void 0:l,M={needsRenderFrame:!1},F={},j={},q=l.touches?this._getMapTouches(l.touches):void 0,Y=q?re(this._el,q):b?void 0:Z(this._el,l);for(const{handlerName:ue,handler:ye,allowed:he}of this._handlers){if(!ye.isEnabled())continue;let me;this._blockedByActive(j,he,ue)?ye.reset():ye[f||l.type]&&(me=ye[f||l.type](l,Y,q),this.mergeHandlerResult(M,F,me,ue,R),me&&me.needsRenderFrame&&this._triggerRenderFrame()),(me||ye.isActive())&&(j[ue]=ye)}const X={};for(const ue in this._previousActiveHandlers)j[ue]||(X[ue]=R);this._previousActiveHandlers=j,(Object.keys(X).length||Hr(M))&&(this._changes.push([M,F,X]),this._triggerRenderFrame()),(Object.keys(j).length||Hr(M))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:te}=M;te&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],te(this._map))}mergeHandlerResult(l,f,b,R,M){if(!b)return;r.extend(l,b);const F={handlerName:R,originalEvent:b.originalEvent||M};b.zoomDelta!==void 0&&(f.zoom=F),b.panDelta!==void 0&&(f.drag=F),b.pitchDelta!==void 0&&(f.pitch=F),b.bearingDelta!==void 0&&(f.rotate=F)}_applyChanges(){const l={},f={},b={};for(const[R,M,F]of this._changes)R.panDelta&&(l.panDelta=(l.panDelta||new r.pointGeometry(0,0))._add(R.panDelta)),R.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+R.zoomDelta),R.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+R.bearingDelta),R.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+R.pitchDelta),R.around!==void 0&&(l.around=R.around),R.aroundCoord!==void 0&&(l.aroundCoord=R.aroundCoord),R.pinchAround!==void 0&&(l.pinchAround=R.pinchAround),R.noInertia&&(l.noInertia=R.noInertia),r.extend(f,M),r.extend(b,F);this._updateMapTransform(l,f,b),this._changes=[]}_updateMapTransform(l,f,b){const R=this._map,M=R.transform,F=Ce=>[Ce.x,Ce.y,Ce.z];if((Ce=>{const be=this._eventsInProgress.drag;return be&&!this._handlersById[be.handlerName].isActive()})()&&!Hr(l)){const Ce=M.zoom;M.cameraElevationReference="sea",M.recenterOnTerrain(),M.cameraElevationReference="ground",Ce!==M.zoom&&this._map._update(!0)}if(!Hr(l))return void this._fireEvents(f,b,!0);let{panDelta:j,zoomDelta:q,bearingDelta:Y,pitchDelta:X,around:te,aroundCoord:ue,pinchAround:ye}=l;ye!==void 0&&(te=ye),(Ce=>f.drag&&!this._eventsInProgress.drag)()&&te&&(this._dragOrigin=F(M.pointCoordinate3D(te)),this._trackingEllipsoid.setup(M._camera.position,this._dragOrigin)),M.cameraElevationReference="sea",R._stop(!0),te=te||R.transform.centerPoint,Y&&(M.bearing+=Y),X&&(M.pitch+=X),M._updateCameraState();const he=[0,0,0];if(j)if(M.projection.name==="mercator"){const Ce=this._trackingEllipsoid.projectRay(M.screenPointToMercatorRay(te).dir),be=this._trackingEllipsoid.projectRay(M.screenPointToMercatorRay(te.sub(j)).dir);he[0]=be[0]-Ce[0],he[1]=be[1]-Ce[1]}else{const Ce=M.pointCoordinate(te);if(M.projection.name==="globe"){j=j.rotate(-M.angle);const be=M._pixelsPerMercatorPixel/M.worldSize;he[0]=-j.x*r.mercatorScale(r.latFromMercatorY(Ce.y))*be,he[1]=-j.y*r.mercatorScale(M.center.lat)*be}else{const be=M.pointCoordinate(te.sub(j));Ce&&be&&(he[0]=be.x-Ce.x,he[1]=be.y-Ce.y)}}const me=M.zoom,_e=[0,0,0];if(q){const Ce=F(ue||M.pointCoordinate3D(te)),be={dir:r.normalize([],r.sub([],Ce,M._camera.position))};if(be.dir[2]<0){const Be=M.zoomDeltaToMovement(Ce,q);r.scale$2(_e,be.dir,Be)}}const fe=r.add(he,he,_e);M._translateCameraConstrained(fe),q&&Math.abs(M.zoom-me)>1e-4&&M.recenterOnTerrain(),M.cameraElevationReference="ground",this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(f,b,!0)}_fireEvents(l,f,b){const R=ds(this._eventsInProgress),M=ds(l),F={};for(const X in l){const{originalEvent:te}=l[X];this._eventsInProgress[X]||(F[`${X}start`]=te),this._eventsInProgress[X]=l[X]}!R&&M&&this._fireEvent("movestart",M.originalEvent);for(const X in F)this._fireEvent(X,F[X]);M&&this._fireEvent("move",M.originalEvent);for(const X in l){const{originalEvent:te}=l[X];this._fireEvent(X,te)}const j={};let q;for(const X in this._eventsInProgress){const{handlerName:te,originalEvent:ue}=this._eventsInProgress[X];this._handlersById[te].isActive()||(delete this._eventsInProgress[X],q=f[te]||ue,j[`${X}end`]=q)}for(const X in j)this._fireEvent(X,j[X]);const Y=ds(this._eventsInProgress);if(b&&(R||M)&&!Y){this._updatingCamera=!0;const X=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),te=ue=>ue!==0&&-this._bearingSnap<ue&&ue<this._bearingSnap;X?(te(X.bearing||this._map.getBearing())&&(X.bearing=0),this._map.easeTo(X,{originalEvent:q})):(this._map.fire(new r.Event("moveend",{originalEvent:q})),te(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(l,f){this._map.fire(new r.Event(l,f?{originalEvent:f}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{this._frameId=void 0,this.handleEvent(new aa("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const bl="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Uc extends r.Evented{constructor(l,f){super(),this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=f.bearingSnap,r.bindAll(["_renderFrameCallback"],this)}getCenter(){return new r.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(l,f){return this.jumpTo({center:l},f)}panBy(l,f,b){return l=r.pointGeometry.convert(l).mult(-1),this.panTo(this.transform.center,r.extend({offset:l},f),b)}panTo(l,f,b){return this.easeTo(r.extend({center:l},f),b)}getZoom(){return this.transform.zoom}setZoom(l,f){return this.jumpTo({zoom:l},f),this}zoomTo(l,f,b){return this.easeTo(r.extend({zoom:l},f),b)}zoomIn(l,f){return this.zoomTo(this.getZoom()+1,l,f),this}zoomOut(l,f){return this.zoomTo(this.getZoom()-1,l,f),this}getBearing(){return this.transform.bearing}setBearing(l,f){return this.jumpTo({bearing:l},f),this}getPadding(){return this.transform.padding}setPadding(l,f){return this.jumpTo({padding:l},f),this}rotateTo(l,f,b){return this.easeTo(r.extend({bearing:l},f),b)}resetNorth(l,f){return this.rotateTo(0,r.extend({duration:1e3},l),f),this}resetNorthPitch(l,f){return this.easeTo(r.extend({bearing:0,pitch:0,duration:1e3},l),f),this}snapToNorth(l,f){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,f):this}getPitch(){return this.transform.pitch}setPitch(l,f){return this.jumpTo({pitch:l},f),this}cameraForBounds(l,f){this.transform.projection.name==="globe"&&r.warnOnce('Globe projection does not support cameraForBounds API, this API may behave unexpectedly."'),l=r.LngLatBounds.convert(l);const b=f&&f.bearing||0;return this._cameraForBoxAndBearing(l.getNorthWest(),l.getSouthEast(),b,f)}_extendCameraOptions(l){const f={top:0,bottom:0,right:0,left:0};if(typeof(l=r.extend({padding:f,offset:[0,0],maxZoom:this.transform.maxZoom},l)).padding=="number"){const b=l.padding;l.padding={top:b,bottom:b,right:b,left:b}}return l.padding=r.extend(f,l.padding),l}_cameraForBoxAndBearing(l,f,b,R){const M=this._extendCameraOptions(R),F=this.transform,j=F.padding,q=F.project(r.LngLat.convert(l)),Y=F.project(r.LngLat.convert(f)),X=new r.pointGeometry(q.x,Y.y),te=new r.pointGeometry(Y.x,q.y),ue=-r.degToRad(b),ye=q.rotate(ue),he=Y.rotate(ue),me=X.rotate(ue),_e=te.rotate(ue),fe=new r.pointGeometry(Math.max(ye.x,he.x,me.x,_e.x),Math.max(ye.y,he.y,me.y,_e.y)),Ce=new r.pointGeometry(Math.min(ye.x,he.x,me.x,_e.x),Math.min(ye.y,he.y,me.y,_e.y)),be=fe.sub(Ce),Be=(F.width-((j.left||0)+(j.right||0)+M.padding.left+M.padding.right))/be.x,Oe=(F.height-((j.top||0)+(j.bottom||0)+M.padding.top+M.padding.bottom))/be.y;if(Oe<0||Be<0)return void r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const $e=Math.min(F.scaleZoom(F.scale*Math.min(Be,Oe)),M.maxZoom),De=typeof M.offset.x=="number"&&typeof M.offset.y=="number"?new r.pointGeometry(M.offset.x,M.offset.y):r.pointGeometry.convert(M.offset),Le=new r.pointGeometry((M.padding.left-M.padding.right)/2,(M.padding.top-M.padding.bottom)/2).rotate(b*Math.PI/180),Ge=De.add(Le).mult(F.scale/F.zoomScale($e));return{center:F.unproject(q.add(Y).div(2).sub(Ge)),zoom:$e,bearing:b}}_cameraForBox(l,f,b,R,M){const F=this._extendCameraOptions(M);b=b||0,R=R||0,l=r.LngLat.convert(l),f=r.LngLat.convert(f);const j=this.transform.clone();j.padding=F.padding;const q=this.getFreeCameraOptions(),Y=new r.LngLat(.5*(l.lng+f.lng),.5*(l.lat+f.lat)),X=.5*(b+R);if(j._camera.position[2]<r.mercatorZfromAltitude(X,Y.lat))return void r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");q.lookAtPoint(Y),j.setFreeCameraOptions(q);const te=r.MercatorCoordinate.fromLngLat(l),ue=r.MercatorCoordinate.fromLngLat(f),ye=j.pointRayIntersection(j.centerPoint,X),he=[(me=j.rayIntersectionCoordinate(ye)).x,me.y,me.z];var me;const _e=j.screenPointToMercatorRay(j.centerPoint),fe=j.projection.name!=="globe";let Ce,be=0;do{const Be=Math.floor(j.zoom),Oe=1<<Be,$e=Math.min(Oe*te.x,Oe*ue.x),De=Math.min(Oe*te.y,Oe*ue.y),Le=Math.max(Oe*te.x,Oe*ue.x),Ge=Math.max(Oe*te.y,Oe*ue.y),Je=new r.Aabb([$e,De,b],[Le,Ge,R]),kt=r.Frustum.fromInvProjectionMatrix(j.invProjMatrix,j.worldSize,Be,fe);if(Je.intersects(kt)!==2){Ce&&(j._camera.position=r.scaleAndAdd([],j._camera.position,_e.dir,-Ce),j._updateStateFromCamera());break}const Ke=r.sub([],j._camera.position,he);Ce=.5*r.length(Ke),j._camera.position=r.scaleAndAdd([],j._camera.position,_e.dir,Ce);try{j._updateStateFromCamera()}catch{return void r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++be<10);return{center:j.center,zoom:j.zoom,bearing:j.bearing,pitch:j.pitch}}fitBounds(l,f,b){return this.transform.projection.name==="globe"&&r.warnOnce("Globe projection does not support fitBounds API, this API may behave unexpectedly."),this._fitInternal(this.cameraForBounds(l,f),f,b)}_raycastElevationBox(l,f){const b=this.transform.elevation;if(!b)return;const R=new r.pointGeometry(l.x,f.y),M=new r.pointGeometry(f.x,l.y),F=b.pointCoordinate(l);if(!F)return;const j=b.pointCoordinate(f);if(!j)return;const q=b.pointCoordinate(R);if(!q)return;const Y=b.pointCoordinate(M);if(!Y)return;const X=new r.MercatorCoordinate(F[0],F[1]).toLngLat(),te=new r.MercatorCoordinate(j[0],j[1]).toLngLat(),ue=new r.MercatorCoordinate(q[0],q[1]).toLngLat(),ye=new r.MercatorCoordinate(Y[0],Y[1]).toLngLat(),he=Math.min(X.lng,Math.min(te.lng,Math.min(ue.lng,ye.lng))),me=Math.min(X.lat,Math.min(te.lat,Math.min(ue.lat,ye.lat))),_e=Math.max(X.lng,Math.max(te.lng,Math.max(ue.lng,ye.lng))),fe=Math.max(X.lat,Math.max(te.lat,Math.max(ue.lat,ye.lat))),Ce=Math.min(F[3],Math.min(j[3],Math.min(q[3],Y[3]))),be=Math.max(F[3],Math.max(j[3],Math.max(q[3],Y[3])));return{minLngLat:new r.LngLat(he,me),maxLngLat:new r.LngLat(_e,fe),minAltitude:Ce,maxAltitude:be}}fitScreenCoordinates(l,f,b,R,M){let F,j,q,Y;this.transform.projection.name==="globe"&&r.warnOnce("Globe projection does not support fitScreenCoordinates API, this API may behave unexpectedly.");const X=r.pointGeometry.convert(l),te=r.pointGeometry.convert(f),ue=this._raycastElevationBox(X,te);if(ue)F=ue.minLngLat,j=ue.maxLngLat,q=ue.minAltitude,Y=ue.maxAltitude;else{if(this.transform.anyCornerOffEdge(X,te))return this;F=this.transform.pointLocation(X),j=this.transform.pointLocation(te)}return this._fitInternal(this.transform.pitch===0?this._cameraForBoxAndBearing(this.transform.pointLocation(r.pointGeometry.convert(l)),this.transform.pointLocation(r.pointGeometry.convert(f)),b,R):this._cameraForBox(F,j,q,Y,R),R,M)}_fitInternal(l,f,b){return l?(delete(f=r.extend(l,f)).padding,f.linear?this.easeTo(f,b):this.flyTo(f,b)):this}jumpTo(l,f){this.stop();const b=l.preloadOnly?this.transform.clone():this.transform;let R=!1,M=!1,F=!1;return"zoom"in l&&b.zoom!==+l.zoom&&(R=!0,b.zoom=+l.zoom),l.center!==void 0&&(b.center=r.LngLat.convert(l.center)),"bearing"in l&&b.bearing!==+l.bearing&&(M=!0,b.bearing=+l.bearing),"pitch"in l&&b.pitch!==+l.pitch&&(F=!0,b.pitch=+l.pitch),l.padding==null||b.isPaddingEqual(l.padding)||(b.padding=l.padding),l.preloadOnly?(this._preloadTiles(b),this):(this.fire(new r.Event("movestart",f)).fire(new r.Event("move",f)),R&&this.fire(new r.Event("zoomstart",f)).fire(new r.Event("zoom",f)).fire(new r.Event("zoomend",f)),M&&this.fire(new r.Event("rotatestart",f)).fire(new r.Event("rotate",f)).fire(new r.Event("rotateend",f)),F&&this.fire(new r.Event("pitchstart",f)).fire(new r.Event("pitch",f)).fire(new r.Event("pitchend",f)),this.fire(new r.Event("moveend",f)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||r.warnOnce(bl),this.transform.getFreeCameraOptions()}setFreeCameraOptions(l,f){const b=this.transform;if(!b.projection.supportsFreeCamera)return r.warnOnce(bl),this;this.stop();const R=b.zoom,M=b.pitch,F=b.bearing;b.setFreeCameraOptions(l);const j=R!==b.zoom,q=M!==b.pitch,Y=F!==b.bearing;return this.fire(new r.Event("movestart",f)).fire(new r.Event("move",f)),j&&this.fire(new r.Event("zoomstart",f)).fire(new r.Event("zoom",f)).fire(new r.Event("zoomend",f)),Y&&this.fire(new r.Event("rotatestart",f)).fire(new r.Event("rotate",f)).fire(new r.Event("rotateend",f)),q&&this.fire(new r.Event("pitchstart",f)).fire(new r.Event("pitch",f)).fire(new r.Event("pitchend",f)),this.fire(new r.Event("moveend",f)),this}easeTo(l,f){this._stop(!1,l.easeId),((l=r.extend({offset:[0,0],duration:500,easing:r.ease},l)).animate===!1||!l.essential&&r.exported.prefersReducedMotion)&&(l.duration=0);const b=this.transform,R=this.getZoom(),M=this.getBearing(),F=this.getPitch(),j=this.getPadding(),q="zoom"in l?+l.zoom:R,Y="bearing"in l?this._normalizeBearing(l.bearing,M):M,X="pitch"in l?+l.pitch:F,te="padding"in l?l.padding:b.padding,ue=r.pointGeometry.convert(l.offset);let ye,he,me;if(b.projection.name==="globe"){const Ge=r.MercatorCoordinate.fromLngLat(b.center),Je=ue.rotate(-b.angle);Ge.x+=Je.x/b.worldSize,Ge.y+=Je.y/b.worldSize;const kt=Ge.toLngLat(),Ke=r.LngLat.convert(l.center||kt);this._normalizeCenter(Ke),ye=b.centerPoint.add(Je),he=new r.pointGeometry(Ge.x,Ge.y).mult(b.worldSize),me=new r.pointGeometry(r.mercatorXfromLng(Ke.lng),r.mercatorYfromLat(Ke.lat)).mult(b.worldSize).sub(he)}else{ye=b.centerPoint.add(ue);const Ge=b.pointLocation(ye),Je=r.LngLat.convert(l.center||Ge);this._normalizeCenter(Je),he=b.project(Ge),me=b.project(Je).sub(he)}const _e=b.zoomScale(q-R);let fe,Ce;l.around&&(fe=r.LngLat.convert(l.around),Ce=b.locationPoint(fe));const be=this._zooming||q!==R,Be=this._rotating||M!==Y,Oe=this._pitching||X!==F,$e=!b.isPaddingEqual(te),De=Ge=>Je=>{if(be&&(Ge.zoom=r.number(R,q,Je)),Be&&(Ge.bearing=r.number(M,Y,Je)),Oe&&(Ge.pitch=r.number(F,X,Je)),$e&&(Ge.interpolatePadding(j,te,Je),ye=Ge.centerPoint.add(ue)),fe)Ge.setLocationAtPoint(fe,Ce);else{const kt=Ge.zoomScale(Ge.zoom-R),Ke=q>R?Math.min(2,_e):Math.max(.5,_e),pt=Math.pow(Ke,1-Je),_t=Ge.unproject(he.add(me.mult(Je*pt)).mult(kt));Ge.setLocationAtPoint(Ge.renderWorldCopies?_t.wrap():_t,ye)}return l.preloadOnly||this._fireMoveEvents(f),Ge};if(l.preloadOnly){const Ge=this._emulate(De,l.duration,b);return this._preloadTiles(Ge),this}const Le={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=be,this._rotating=Be,this._pitching=Oe,this._padding=$e,this._easeId=l.easeId,this._prepareEase(f,l.noMoveStart,Le),this._ease(De(b),Ge=>{b.recenterOnTerrain(),this._afterEase(f,Ge)},l),this}_prepareEase(l,f,b={}){this._moving=!0,this.transform.cameraElevationReference="sea",f||b.moving||this.fire(new r.Event("movestart",l)),this._zooming&&!b.zooming&&this.fire(new r.Event("zoomstart",l)),this._rotating&&!b.rotating&&this.fire(new r.Event("rotatestart",l)),this._pitching&&!b.pitching&&this.fire(new r.Event("pitchstart",l))}_fireMoveEvents(l){this.fire(new r.Event("move",l)),this._zooming&&this.fire(new r.Event("zoom",l)),this._rotating&&this.fire(new r.Event("rotate",l)),this._pitching&&this.fire(new r.Event("pitch",l))}_afterEase(l,f){if(this._easeId&&f&&this._easeId===f)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const b=this._zooming,R=this._rotating,M=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,b&&this.fire(new r.Event("zoomend",l)),R&&this.fire(new r.Event("rotateend",l)),M&&this.fire(new r.Event("pitchend",l)),this.fire(new r.Event("moveend",l))}flyTo(l,f){if(!l.essential&&r.exported.prefersReducedMotion){const Pt=r.pick(l,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Pt,f)}this.stop(),l=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},l);const b=this.transform,R=this.getZoom(),M=this.getBearing(),F=this.getPitch(),j=this.getPadding(),q="zoom"in l?r.clamp(+l.zoom,b.minZoom,b.maxZoom):R,Y="bearing"in l?this._normalizeBearing(l.bearing,M):M,X="pitch"in l?+l.pitch:F,te="padding"in l?l.padding:b.padding,ue=b.zoomScale(q-R),ye=r.pointGeometry.convert(l.offset);let he=b.centerPoint.add(ye);const me=b.pointLocation(he),_e=r.LngLat.convert(l.center||me);this._normalizeCenter(_e);const fe=b.project(me),Ce=b.project(_e).sub(fe);let be=l.curve;const Be=Math.max(b.width,b.height),Oe=Be/ue,$e=Ce.mag();if("minZoom"in l){const Pt=r.clamp(Math.min(l.minZoom,R,q),b.minZoom,b.maxZoom),Ot=Be/b.zoomScale(Pt-R);be=Math.sqrt(Ot/$e*2)}const De=be*be;function Le(Pt){const Ot=(Oe*Oe-Be*Be+(Pt?-1:1)*De*De*$e*$e)/(2*(Pt?Oe:Be)*De*$e);return Math.log(Math.sqrt(Ot*Ot+1)-Ot)}function Ge(Pt){return(Math.exp(Pt)-Math.exp(-Pt))/2}function Je(Pt){return(Math.exp(Pt)+Math.exp(-Pt))/2}const kt=Le(0);let Ke=function(Pt){return Je(kt)/Je(kt+be*Pt)},pt=function(Pt){return Be*((Je(kt)*(Ge(Ot=kt+be*Pt)/Je(Ot))-Ge(kt))/De)/$e;var Ot},_t=(Le(1)-kt)/be;if(Math.abs($e)<1e-6||!isFinite(_t)){if(Math.abs(Be-Oe)<1e-6)return this.easeTo(l,f);const Pt=Oe<Be?-1:1;_t=Math.abs(Math.log(Oe/Be))/be,pt=function(){return 0},Ke=function(Ot){return Math.exp(Pt*be*Ot)}}l.duration="duration"in l?+l.duration:1e3*_t/("screenSpeed"in l?+l.screenSpeed/be:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0);const It=M!==Y,ot=X!==F,$t=!b.isPaddingEqual(te),mt=Pt=>Ot=>{const Kt=Ot*_t,Qt=1/Ke(Kt);Pt.zoom=Ot===1?q:R+Pt.scaleZoom(Qt),It&&(Pt.bearing=r.number(M,Y,Ot)),ot&&(Pt.pitch=r.number(F,X,Ot)),$t&&(Pt.interpolatePadding(j,te,Ot),he=Pt.centerPoint.add(ye));const dn=Ot===1?_e:Pt.unproject(fe.add(Ce.mult(pt(Kt))).mult(Qt));return Pt.setLocationAtPoint(Pt.renderWorldCopies?dn.wrap():dn,he),Pt._updateCameraOnTerrain(),l.preloadOnly||this._fireMoveEvents(f),Pt};if(l.preloadOnly){const Pt=this._emulate(mt,l.duration,b);return this._preloadTiles(Pt),this}return this._zooming=!0,this._rotating=It,this._pitching=ot,this._padding=$t,this._prepareEase(f,!1),this._ease(mt(b),()=>this._afterEase(f),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,f){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const b=this._onEaseEnd;this._onEaseEnd=void 0,b.call(this,f)}if(!l){const b=this.handlers;b&&b.stop(!1)}return this}_ease(l,f,b){b.animate===!1||b.duration===0?(l(1),f()):(this._easeStart=r.exported.now(),this._easeOptions=b,this._onEaseFrame=l,this._onEaseEnd=f,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const l=Math.min((r.exported.now()-this._easeStart)/this._easeOptions.duration,1),f=this._onEaseFrame;f&&f(this._easeOptions.easing(l)),l<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(l,f){l=r.wrap(l,-180,180);const b=Math.abs(l-f);return Math.abs(l-360-f)<b&&(l-=360),Math.abs(l+360-f)<b&&(l+=360),l}_normalizeCenter(l){const f=this.transform;if(!f.renderWorldCopies||f.maxBounds)return;const b=l.lng-f.center.lng;l.lng+=b>180?-360:b<-180?360:0}_emulate(l,f,b){const R=Math.ceil(15*f/1e3),M=[],F=l(b.clone());for(let j=0;j<=R;j++){const q=F(j/R);M.push(q.clone())}return M}}class xl{constructor(l={}){this.options=l,r.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(l){const f=this.options&&this.options.compact;return this._map=l,this._container=S("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=S("button","mapboxgl-ctrl-attrib-button",this._container),S("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=S("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),f&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),f===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(l,f){const b=this._map._getUIString(`AttributionControl.${f}`);l.setAttribute("aria-label",b),l.removeAttribute("title"),l.firstElementChild&&l.firstElementChild.setAttribute("title",b)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));const f=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||r.config.ACCESS_TOKEN}];if(l){const b=f.reduce((R,M,F)=>(M.value&&(R+=`${M.key}=${M.value}${F<f.length-1?"&":""}`),R),"?");l.href=`${r.config.FEEDBACK_URL}/${b}#${ml(this._map,!0)}`,l.rel="noopener nofollow",this._setElementTitle(l,"MapFeedback")}}_updateData(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let l=[];if(this._map.style.stylesheet){const R=this._map.style.stylesheet;this.styleOwner=R.owner,this.styleId=R.id}const f=this._map.style._sourceCaches;for(const R in f){const M=f[R];if(M.used){const F=M.getSource();F.attribution&&l.indexOf(F.attribution)<0&&l.push(F.attribution)}}l.sort((R,M)=>R.length-M.length),l=l.filter((R,M)=>{for(let F=M+1;F<l.length;F++)if(l[F].indexOf(R)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=[...this.options.customAttribution,...l]:l.unshift(this.options.customAttribution));const b=l.join(" | ");b!==this._attribHTML&&(this._attribHTML=b,l.length?(this._innerContainer.innerHTML=b,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class wl{constructor(){r.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(l){this._map=l,this._container=S("div","mapboxgl-ctrl");const f=S("a","mapboxgl-ctrl-logo");return f.target="_blank",f.rel="noopener nofollow",f.href="https://www.mapbox.com/",f.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),f.setAttribute("rel","noopener nofollow"),this._container.appendChild(f),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(l){l&&l.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const l=this._map.style._sourceCaches;if(Object.entries(l).length===0)return!0;for(const f in l){const b=l[f].getSource();if(b.hasOwnProperty("mapbox_logo")&&!b.mapbox_logo)return!1}return!0}_updateCompact(){const l=this._container.children;if(l.length){const f=l[0];this._map.getCanvasContainer().offsetWidth<250?f.classList.add("mapboxgl-compact"):f.classList.remove("mapboxgl-compact")}}}class El{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const f=++this._id;return this._queue.push({callback:l,id:f,cancelled:!1}),f}remove(l){const f=this._currentlyRunning,b=f?this._queue.concat(f):this._queue;for(const R of b)if(R.id===l)return void(R.cancelled=!0)}run(l=0){const f=this._currentlyRunning=this._queue;this._queue=[];for(const b of f)if(!b.cancelled&&(b.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Cl(_,l,f){if(_=new r.LngLat(_.lng,_.lat),l){const b=new r.LngLat(_.lng-360,_.lat),R=new r.LngLat(_.lng+360,_.lat),M=360*Math.ceil(Math.abs(_.lng-f.center.lng)/360),F=f.locationPoint(_).distSqr(l),j=l.x<0||l.y<0||l.x>f.width||l.y>f.height;f.locationPoint(b).distSqr(l)<F&&(j||Math.abs(b.lng-f.center.lng)<M)?_=b:f.locationPoint(R).distSqr(l)<F&&(j||Math.abs(R.lng-f.center.lng)<M)&&(_=R)}for(;Math.abs(_.lng-f.center.lng)>180;){const b=f.locationPoint(_);if(b.x>=0&&b.y>=0&&b.x<=f.width&&b.y<=f.height)break;_.lng>f.center.lng?_.lng-=360:_.lng+=360}return _}const ps={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class la extends r.Evented{constructor(l,f){if(super(),(l instanceof r.window.HTMLElement||f)&&(l=r.extend({element:l},f)),r.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),l&&l.element)this._element=l.element,this._offset=r.pointGeometry.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=S("div");const R=41,M=27,F=N("svg",{display:"block",height:R*this._scale+"px",width:M*this._scale+"px",viewBox:`0 0 ${M} ${R}`},this._element),j=N("radialGradient",{id:"shadowGradient"},N("defs",{},F));N("stop",{offset:"10%","stop-opacity":.4},j),N("stop",{offset:"100%","stop-opacity":.05},j),N("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},F),N("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},F),N("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},F),N("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},F),this._offset=r.pointGeometry.convert(l&&l.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",R=>{R.preventDefault()}),this._element.addEventListener("mousedown",R=>{R.preventDefault()});const b=this._element.classList;for(const R in ps)b.remove(`mapboxgl-marker-anchor-${R}`);b.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(l){return l===this._map||(this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._updateMoving),l.on("moveend",this._update),l.on("remove",this._clearFadeTimer),l._addMarker(this),this.setDraggable(this._draggable),this._update(),l.on("click",this._onMapClick)),this}remove(){const l=this._map;return l&&(l.off("click",this._onMapClick),l.off("move",this._updateMoving),l.off("moveend",this._update),l.off("mousedown",this._addDragHandler),l.off("touchstart",this._addDragHandler),l.off("mouseup",this._onUp),l.off("touchend",this._onUp),l.off("mousemove",this._onMove),l.off("touchmove",this._onMove),l.off("remove",this._clearFadeTimer),l._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=r.LngLat.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const R=Math.sqrt(Math.pow(13.5,2)/2);l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[R,-1*(38.1-13.5+R)],"bottom-right":[-R,-1*(38.1-13.5+R)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,l._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(l){const f=l.code,b=l.charCode||l.keyCode;f!=="Space"&&f!=="Enter"&&b!==32&&b!==13||this.togglePopup()}_onMapClick(l){const f=l.originalEvent.target,b=this._element;this._popup&&(f===b||b.contains(f))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?(l.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(l.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const l=this._map;if(!l)return!1;const f=l.unproject(this._pos),b=l.getFreeCameraOptions();if(!b.position)return!1;const R=b.position.toLngLat();return R.distanceTo(f)<.9*R.distanceTo(this._lngLat)}_evaluateOpacity(){const l=this._map;if(!l)return;const f=this._pos;if(!f||f.x<0||f.x>l.transform.width||f.y<0||f.y>l.transform.height)return void this._clearFadeTimer();const b=l.unproject(f);let R;l._showingGlobe()&&r.isLngLatBehindGlobe(l.transform,this._lngLat)?R=0:(R=1-l._queryFogOpacity(b),l.transform._terrainEnabled()&&l.getTerrain()&&this._behindTerrain()&&(R*=.2)),this._element.style.opacity=`${R}`,this._element.style.pointerEvents=R>0?"auto":"none",this._popup&&this._popup._setOpacity(R),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const l=this._pos;if(!l||!this._map)return;const f=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${l.x}px,${l.y}px)
            ${ps[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${f.x}px,${f.y}px)
        `}_calculateXYTransform(){const l=this._pos,f=this._map,b=this.getPitchAlignment();if(!f||!l||b!=="map")return"";if(!f._showingGlobe()){const q=f.getPitch();return q?`rotateX(${q}deg)`:""}const R=r.radToDeg(r.globeTiltAtLngLat(f.transform,this._lngLat)),M=l.sub(r.globeCenterToScreenPoint(f.transform)),F=Math.abs(M.x)+Math.abs(M.y);if(F===0)return"";const j=R/F;return`rotateX(${-M.y*j}deg) rotateY(${M.x*j}deg)`}_calculateZTransform(){const l=this._pos,f=this._map;if(!f||!l)return"";let b=0;const R=this.getRotationAlignment();if(R==="map")if(f._showingGlobe()){const M=f.project(new r.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),F=f.project(new r.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(M);b=r.radToDeg(Math.atan2(F.y,F.x))-90}else b=-f.getBearing();else if(R==="horizon"){const M=r.smoothstep(4,6,f.getZoom()),F=r.globeCenterToScreenPoint(f.transform);F.y+=M*f.transform.height;const j=l.sub(F),q=r.radToDeg(Math.atan2(j.y,j.x));b=(q>90?q-270:q+90)*(1-M)}return b+=this._rotation,b?`rotateZ(${b}deg)`:""}_update(l){r.window.cancelAnimationFrame(this._updateFrameId);const f=this._map;f&&(f.transform.renderWorldCopies&&(this._lngLat=Cl(this._lngLat,this._pos,f.transform)),this._pos=f.project(this._lngLat),l===!0?this._updateFrameId=r.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),f._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(f._showingGlobe()||f.getTerrain()||f.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(l){return this._offset=r.pointGeometry.convert(l),this._update(),this}_onMove(l){const f=this._map;if(f){if(!this._isDragging){const b=this._clickTolerance||f._clickTolerance;this._isDragging=l.point.dist(this._pointerdownPos)>=b}this._isDragging&&(this._pos=l.point.sub(this._positionDelta),this._lngLat=f.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new r.Event("dragstart"))),this.fire(new r.Event("drag")))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const l=this._map;l&&(l.off("mousemove",this._onMove),l.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new r.Event("dragend")),this._state="inactive"}_addDragHandler(l){const f=this._map;f&&this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(this._pos),this._pointerdownPos=l.point,this._state="pending",f.on("mousemove",this._onMove),f.on("touchmove",this._onMove),f.once("mouseup",this._onUp),f.once("touchend",this._onUp))}setDraggable(l){this._draggable=!!l;const f=this._map;return f&&(l?(f.on("mousedown",this._addDragHandler),f.on("touchstart",this._addDragHandler)):(f.off("mousedown",this._addDragHandler),f.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}}class jc{constructor(l){this.jumpTo(l)}getValue(l){if(l<=this._startTime)return this._start;if(l>=this._endTime)return this._end;const f=r.easeCubicInOut((l-this._startTime)/(this._endTime-this._startTime));return this._start*(1-f)+this._end*f}isEasing(l){return l>=this._startTime&&l<=this._endTime}jumpTo(l){this._startTime=-1/0,this._endTime=-1/0,this._start=l,this._end=l}easeTo(l,f,b){this._start=this.getValue(f),this._end=l,this._startTime=f,this._endTime=f+b}}const Gc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},qc={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function fs(_){_.parentNode&&_.parentNode.removeChild(_)}const Hc={showCompass:!0,showZoom:!0,visualizePitch:!1};class Sl{constructor(l,f,b=!1){this._clickTolerance=10,this.element=f,this.mouseRotate=new _l({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,b&&(this.mousePitch=new mi({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),r.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),f.addEventListener("mousedown",this.mousedown),f.addEventListener("touchstart",this.touchstart,{passive:!1}),f.addEventListener("touchmove",this.touchmove),f.addEventListener("touchend",this.touchend),f.addEventListener("touchcancel",this.reset)}down(l,f){this.mouseRotate.mousedown(l,f),this.mousePitch&&this.mousePitch.mousedown(l,f),V()}move(l,f){const b=this.map,R=this.mouseRotate.mousemoveWindow(l,f),M=R&&R.bearingDelta;if(M&&b.setBearing(b.getBearing()+M),this.mousePitch){const F=this.mousePitch.mousemoveWindow(l,f),j=F&&F.pitchDelta;j&&b.setPitch(b.getPitch()+j)}}off(){const l=this.element;l.removeEventListener("mousedown",this.mousedown),l.removeEventListener("touchstart",this.touchstart,{passive:!1}),l.removeEventListener("touchmove",this.touchmove),l.removeEventListener("touchend",this.touchend),l.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){D(),r.window.removeEventListener("mousemove",this.mousemove),r.window.removeEventListener("mouseup",this.mouseup)}mousedown(l){this.down(r.extend({},l,{ctrlKey:!0,preventDefault:()=>l.preventDefault()}),Z(this.element,l)),r.window.addEventListener("mousemove",this.mousemove),r.window.addEventListener("mouseup",this.mouseup)}mousemove(l){this.move(l,Z(this.element,l))}mouseup(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()}touchstart(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=re(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>l.preventDefault()},this._startPos))}touchmove(l){l.targetTouches.length!==1?this.reset():(this._lastPos=re(this.element,l.targetTouches)[0],this.move({preventDefault:()=>l.preventDefault()},this._lastPos))}touchend(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Kc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Tl={maxWidth:100,unit:"metric"};function Al(_,l,f){const b=ca(l),R=b/l,M={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[f];this._map._requestDomTask(()=>{this._container.style.width=_*R+"px",this._container.innerHTML=`${b}&nbsp;${M}`})}function ca(_){const l=Math.pow(10,`${Math.floor(_)}`.length-1);let f=_/l;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:f>=1?1:function(b){const R=Math.pow(10,Math.ceil(-Math.log(b)/Math.LN10));return Math.round(b*R)/R}(f),l*f}const Xu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ju=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ua(_=new r.pointGeometry(0,0),l="bottom"){if(typeof _=="number"){const f=Math.round(Math.sqrt(.5*Math.pow(_,2)));switch(l){case"top":return new r.pointGeometry(0,_);case"top-left":return new r.pointGeometry(f,f);case"top-right":return new r.pointGeometry(-f,f);case"bottom":return new r.pointGeometry(0,-_);case"bottom-left":return new r.pointGeometry(f,-f);case"bottom-right":return new r.pointGeometry(-f,-f);case"left":return new r.pointGeometry(_,0);case"right":return new r.pointGeometry(-_,0)}return new r.pointGeometry(0,0)}return _ instanceof r.pointGeometry||Array.isArray(_)?r.pointGeometry.convert(_):r.pointGeometry.convert(_[l]||[0,0])}const hs={version:r.version,supported:E,setRTLTextPlugin:r.setRTLTextPlugin,getRTLTextPluginStatus:r.getRTLTextPluginStatus,Map:class extends Uc{constructor(_){if((_=r.extend({},qc,_)).minZoom!=null&&_.maxZoom!=null&&_.minZoom>_.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(_.minPitch!=null&&_.maxPitch!=null&&_.minPitch>_.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(_.minPitch!=null&&_.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(_.maxPitch!=null&&_.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(_.antialias&&r.isSafariWithAntialiasingBug(r.window)&&(_.antialias=!1,r.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new ss(_.minZoom,_.maxZoom,_.minPitch,_.maxPitch,_.renderWorldCopies),_),this._interactive=_.interactive,this._minTileCacheSize=_.minTileCacheSize,this._maxTileCacheSize=_.maxTileCacheSize,this._failIfMajorPerformanceCaveat=_.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=_.preserveDrawingBuffer,this._antialias=_.antialias,this._trackResize=_.trackResize,this._bearingSnap=_.bearingSnap,this._refreshExpiredTiles=_.refreshExpiredTiles,this._fadeDuration=_.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=_.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=_.collectResourceTiming,this._optimizeForTerrain=_.optimizeForTerrain,this._language=_.language==="auto"?r.window.navigator.language:_.language,this._worldview=_.worldview,this._renderTaskQueue=new El,this._domRenderTaskQueue=new El,this._controls=[],this._markers=[],this._mapId=r.uniqueId(),this._locale=r.extend({},Gc,_.locale),this._clickTolerance=_.clickTolerance,this._cooperativeGestures=_.cooperativeGestures,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new jc(0),this._useExplicitProjection=!1,this._requestManager=new r.RequestManager(_.transformRequest,_.accessToken,_.testMode),this._silenceAuthErrors=!!_.testMode,typeof _.container=="string"){if(this._container=r.window.document.getElementById(_.container),!this._container)throw new Error(`Container '${_.container}' not found.`)}else{if(!(_.container instanceof r.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=_.container}if(this._container.childNodes.length>0&&r.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),_.maxBounds&&this.setMaxBounds(_.maxBounds),r.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),r.window!==void 0&&(r.window.addEventListener("online",this._onWindowOnline,!1),r.window.addEventListener("resize",this._onWindowResize,!1),r.window.addEventListener("orientationchange",this._onWindowResize,!1),r.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1)),this.handlers=new Vc(this,_),this._localFontFamily=_.localFontFamily,this._localIdeographFontFamily=_.localIdeographFontFamily,_.style&&this.setStyle(_.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),_.projection&&this.setProjection(_.projection),this._hash=_.hash&&new Ec(typeof _.hash=="string"&&_.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch}),_.bounds&&(this.resize(),this.fitBounds(_.bounds,r.extend({},_.fitBoundsOptions,{duration:0})))),this.resize(),_.attributionControl&&this.addControl(new xl({customAttribution:_.customAttribution})),this._logoControl=new wl,this.addControl(this._logoControl,_.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",l=>{this._update(l.dataType==="style"),this.fire(new r.Event(`${l.dataType}data`,l))}),this.on("dataloading",l=>{this.fire(new r.Event(`${l.dataType}dataloading`,l))})}_getMapId(){return this._mapId}addControl(_,l){if(l===void 0&&(l=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const f=_.onAdd(this);this._controls.push(_);const b=this._controlPositions[l];return l.indexOf("bottom")!==-1?b.insertBefore(f,b.firstChild):b.appendChild(f),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(_);return l>-1&&this._controls.splice(l,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(_){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const l=!this._moving;return l&&this.fire(new r.Event("movestart",_)).fire(new r.Event("move",_)),this.fire(new r.Event("resize",_)),l&&this.fire(new r.Event("moveend",_)),this}getBounds(){return this.transform.projection.name==="globe"&&r.warnOnce('Globe projection does not support getBounds API, this API may behave unexpectedly."'),this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(_){return this.transform.setMaxBounds(r.LngLatBounds.convert(_)),this._update()}setMinZoom(_){if((_=_==null?-2:_)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_?this.setZoom(_):this.fire(new r.Event("zoomstart")).fire(new r.Event("zoom")).fire(new r.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_==null?22:_)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_?this.setZoom(_):this.fire(new r.Event("zoomstart")).fire(new r.Event("zoom")).fire(new r.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_==null?0:_)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_?this.setPitch(_):this.fire(new r.Event("pitchstart")).fire(new r.Event("pitch")).fire(new r.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_==null?85:_)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_?this.setPitch(_):this.fire(new r.Event("pitchstart")).fire(new r.Event("pitch")).fire(new r.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this._update()}getLanguage(){return this._language}setLanguage(_){if(this._language=_==="auto"?r.window.navigator.language:_,this.style)for(const l in this.style._sourceCaches){const f=this.style._sourceCaches[l]._source;f._setLanguage&&f._setLanguage(this._language)}for(const l of this._controls)l._setLanguage&&l._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(_){if(this._worldview=_,this.style)for(const l in this.style._sourceCaches){const f=this.style._sourceCaches[l]._source;f._setWorldview&&f._setWorldview(_)}return this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(_){return this._lazyInitEmptyStyle(),_?typeof _=="string"&&(_={name:_}):_=null,this._useExplicitProjection=!!_,this._prioritizeAndUpdateProjection(_,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const _=this.transform,l=_.projection.name;let f;l==="globe"&&_.zoom>=r.GLOBE_ZOOM_THRESHOLD_MAX?(_.setMercatorFromTransition(),f=!0):l==="mercator"&&_.zoom<r.GLOBE_ZOOM_THRESHOLD_MAX&&(_.setProjection({name:"globe"}),f=!0),f&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(_,l){return this._updateProjection(_||l||{name:"mercator"})}_updateProjection(_){let l;if(l=_.name==="globe"&&this.transform.zoom>=r.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(_),this.style.applyProjectionUpdate(),l){this.painter.clearBackgroundTiles();for(const f in this.style._sourceCaches)this.style._sourceCaches[f].clearTiles();this._update(!0)}return this}project(_){return this.transform.locationPoint3D(r.LngLat.convert(_))}unproject(_){return this.transform.pointLocation3D(r.pointGeometry.convert(_))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_createDelegatedListener(_,l,f){if(_==="mouseenter"||_==="mouseover"){let b=!1;const R=F=>{const j=l.filter(Y=>this.getLayer(Y)),q=j.length?this.queryRenderedFeatures(F.point,{layers:j}):[];q.length?b||(b=!0,f.call(this,new xi(_,this,F.originalEvent,{features:q}))):b=!1},M=()=>{b=!1};return{layers:new Set(l),listener:f,delegates:{mousemove:R,mouseout:M}}}if(_==="mouseleave"||_==="mouseout"){let b=!1;const R=F=>{const j=l.filter(q=>this.getLayer(q));(j.length?this.queryRenderedFeatures(F.point,{layers:j}):[]).length?b=!0:b&&(b=!1,f.call(this,new xi(_,this,F.originalEvent)))},M=F=>{b&&(b=!1,f.call(this,new xi(_,this,F.originalEvent)))};return{layers:new Set(l),listener:f,delegates:{mousemove:R,mouseout:M}}}{const b=R=>{const M=l.filter(j=>this.getLayer(j)),F=M.length?this.queryRenderedFeatures(R.point,{layers:M}):[];F.length&&(R.features=F,f.call(this,R),delete R.features)};return{layers:new Set(l),listener:f,delegates:{[_]:b}}}}on(_,l,f){if(f===void 0)return super.on(_,l);Array.isArray(l)||(l=[l]);const b=this._createDelegatedListener(_,l,f);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(b);for(const R in b.delegates)this.on(R,b.delegates[R]);return this}once(_,l,f){if(f===void 0)return super.once(_,l);Array.isArray(l)||(l=[l]);const b=this._createDelegatedListener(_,l,f);for(const R in b.delegates)this.once(R,b.delegates[R]);return this}off(_,l,f){if(f===void 0)return super.off(_,l);l=new Set(Array.isArray(l)?l:[l]);const b=(M,F)=>{if(M.size!==F.size)return!1;for(const j of M)if(!F.has(j))return!1;return!0},R=this._delegatedListeners?this._delegatedListeners[_]:void 0;return R&&(M=>{for(let F=0;F<M.length;F++){const j=M[F];if(j.listener===f&&b(j.layers,l)){for(const q in j.delegates)this.off(q,j.delegates[q]);return M.splice(F,1),this}}})(R),this}queryRenderedFeatures(_,l){return this.style?(l!==void 0||_===void 0||_ instanceof r.pointGeometry||Array.isArray(_)||(l=_,_=void 0),this.style.queryRenderedFeatures(_=_||[[0,0],[this.transform.width,this.transform.height]],l=l||{},this.transform)):[]}querySourceFeatures(_,l){return this.style.querySourceFeatures(_,l)}queryTerrainElevation(_,l){const f=this.transform.elevation;return f?(l=r.extend({},{exaggerated:!0},l),f.getAtPoint(r.MercatorCoordinate.fromLngLat(_),null,l.exaggerated)):null}setStyle(_,l){return(l=r.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&l.localFontFamily===this._localFontFamily&&this.style&&_?(this._diffStyle(_,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._localFontFamily=l.localFontFamily,this._updateStyle(_,l))}_getUIString(_){const l=this._locale[_];if(l==null)throw new Error(`Missing UI string '${_}'`);return l}_updateStyle(_,l){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),_&&(this.style=new qi(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_):this.style.loadJSON(_)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new qi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,l){if(typeof _=="string"){const f=this._requestManager.normalizeStyleURL(_),b=this._requestManager.transformRequest(f,r.ResourceType.Style);r.getJSON(b,(R,M)=>{R?this.fire(new r.ErrorEvent(R)):M&&this._updateDiff(M,l)})}else typeof _=="object"&&this._updateDiff(_,l)}_updateDiff(_,l){try{this.style.setState(_)&&this._update(!0)}catch(f){r.warnOnce(`Unable to perform style diff: ${f.message||f.error||f}.  Rebuilding the style from scratch.`),this._updateStyle(_,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(r.warnOnce("There is no style added to the map."),!1)}addSource(_,l){return this._lazyInitEmptyStyle(),this.style.addSource(_,l),this._update(!0)}isSourceLoaded(_){return!!this.style&&this.style._isSourceCacheLoaded(_)}areTilesLoaded(){const _=this.style&&this.style._sourceCaches;for(const l in _){const f=_[l]._tiles;for(const b in f){const R=f[b];if(R.state!=="loaded"&&R.state!=="errored")return!1}}return!0}addSourceType(_,l,f){this._lazyInitEmptyStyle(),this.style.addSourceType(_,l,f)}removeSource(_){return this.style.removeSource(_),this._updateTerrain(),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,l,{pixelRatio:f=1,sdf:b=!1,stretchX:R,stretchY:M,content:F}={}){if(this._lazyInitEmptyStyle(),l instanceof r.window.HTMLImageElement||r.window.ImageBitmap&&l instanceof r.window.ImageBitmap){const{width:j,height:q,data:Y}=r.exported.getImageData(l);this.style.addImage(_,{data:new r.RGBAImage({width:j,height:q},Y),pixelRatio:f,stretchX:R,stretchY:M,content:F,sdf:b,version:0})}else if(l.width===void 0||l.height===void 0)this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:j,height:q}=l,Y=l;this.style.addImage(_,{data:new r.RGBAImage({width:j,height:q},new Uint8Array(Y.data)),pixelRatio:f,stretchX:R,stretchY:M,content:F,sdf:b,version:0,userImage:Y}),Y.onAdd&&Y.onAdd(this,_)}}updateImage(_,l){const f=this.style.getImage(_);if(!f)return void this.fire(new r.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const b=l instanceof r.window.HTMLImageElement||r.window.ImageBitmap&&l instanceof r.window.ImageBitmap?r.exported.getImageData(l):l,{width:R,height:M}=b;R!==void 0&&M!==void 0?R===f.data.width&&M===f.data.height?(f.data.replace(b.data,!(l instanceof r.window.HTMLImageElement||r.window.ImageBitmap&&l instanceof r.window.ImageBitmap)),this.style.updateImage(_,f)):this.fire(new r.ErrorEvent(new Error(`The width and height of the updated image (${R}, ${M})
                must be that same as the previous version of the image
                (${f.data.width}, ${f.data.height})`))):this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new r.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_,l){r.getImage(this._requestManager.transformRequest(_,r.ResourceType.Image),(f,b)=>{l(f,b instanceof r.window.HTMLImageElement?r.exported.getImageData(b):b)})}listImages(){return this.style.listImages()}addLayer(_,l){return this._lazyInitEmptyStyle(),this.style.addLayer(_,l),this._update(!0)}moveLayer(_,l){return this.style.moveLayer(_,l),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}setLayerZoomRange(_,l,f){return this.style.setLayerZoomRange(_,l,f),this._update(!0)}setFilter(_,l,f={}){return this.style.setFilter(_,l,f),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,l,f,b={}){return this.style.setPaintProperty(_,l,f,b),this._update(!0)}getPaintProperty(_,l){return this.style.getPaintProperty(_,l)}setLayoutProperty(_,l,f,b={}){return this.style.setLayoutProperty(_,l,f,b),this._update(!0)}getLayoutProperty(_,l){return this.style.getLayoutProperty(_,l)}setLight(_,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,l),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(_){return this._lazyInitEmptyStyle(),!_&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(_),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(_){return this._lazyInitEmptyStyle(),this.style.setFog(_),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(_){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(r.LngLat.convert(_),this.transform):0}setFeatureState(_,l){return this.style.setFeatureState(_,l),this._update()}removeFeatureState(_,l){return this.style.removeFeatureState(_,l),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}_updateContainerDimensions(){if(!this._container)return;const _=this._container.getBoundingClientRect().width||400,l=this._container.getBoundingClientRect().height||300;let f,b,R,M=this._container;for(;M&&(!b||!R);){const F=r.window.getComputedStyle(M).transform;F&&F!=="none"&&(f=F.match(/matrix.*\((.+)\)/)[1].split(", "),f[0]&&f[0]!=="0"&&f[0]!=="1"&&(b=f[0]),f[3]&&f[3]!=="0"&&f[3]!=="1"&&(R=f[3])),M=M.parentElement}this._containerWidth=b?Math.abs(_/b):_,this._containerHeight=R?Math.abs(l/R):l}_detectMissingCSS(){r.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&r.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const _=this._container;_.classList.add("mapboxgl-map"),(this._missingCSSCanary=S("div","mapboxgl-canary",_)).style.visibility="hidden",this._detectMissingCSS();const l=this._canvasContainer=S("div","mapboxgl-canvas-container",_);this._interactive&&l.classList.add("mapboxgl-interactive"),this._canvas=S("canvas","mapboxgl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const f=this._controlContainer=S("div","mapboxgl-control-container",_),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(R=>{b[R]=S("div",`mapboxgl-ctrl-${R}`,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,l){const f=r.exported.devicePixelRatio||1;this._canvas.width=f*Math.ceil(_),this._canvas.height=f*Math.ceil(l),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${l}px`}_addMarker(_){this._markers.push(_)}_removeMarker(_){const l=this._markers.indexOf(_);l!==-1&&this._markers.splice(l,1)}_setupPainter(){const _=r.extend({},E.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),l=this._canvas.getContext("webgl",_)||this._canvas.getContext("experimental-webgl",_);l?(r.storeAuthState(l,!0),this.painter=new ul(l,this.transform),this.on("data",f=>{f.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),r.exported$1.testSupport(l)):this.fire(new r.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(_){_.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new r.Event("webglcontextlost",{originalEvent:_}))}_contextRestored(_){this._setupPainter(),this.resize(),this._update(),this.fire(new r.Event("webglcontextrestored",{originalEvent:_}))}_onMapScroll(_){if(_.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_requestDomTask(_){!this.loaded()||this.loaded()&&!this.isMoving()?_():this._domRenderTaskQueue.add(_)}_render(_){let l;const f=this.painter.context.extTimerQuery,b=r.exported.now();if(this.listens("gpu-timing-frame")&&(l=f.createQueryEXT(),f.beginQueryEXT(f.TIME_ELAPSED_EXT,l)),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._domRenderTaskQueue.run(_),this._removed)return;this._updateProjectionTransition();let R=!1;const M=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const q=this.transform.zoom,Y=this.transform.pitch,X=r.exported.now();this.style.zoomHistory.update(q,X);const te=new r.EvaluationParameters(q,{now:X,fadeDuration:M,pitch:Y,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ue=te.crossFadingFactor();ue===1&&ue===this._crossFadingFactor||(R=!0,this._crossFadingFactor=ue),this.style.update(te)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let F=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),F=this._updateAverageElevation(b),this.style._updateSources(this.transform),this._forceMarkerUpdate()):F=this._updateAverageElevation(b),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,M,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:M,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new r.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new r.Event("load"))),this.style&&(this.style.hasTransitions()||R)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),l){const q=r.exported.now()-b;f.endQueryEXT(f.TIME_ELAPSED_EXT,l),setTimeout(()=>{const Y=f.getQueryObjectEXT(l,f.QUERY_RESULT_EXT)/1e6;f.deleteQueryEXT(l),this.fire(new r.Event("gpu-timing-frame",{cpuTime:q,gpuTime:Y})),r.window.performance.mark("frame-gpu",{startTime:b,detail:{gpuTime:Y}})},50)}if(this.listens("gpu-timing-layer")){const q=this.painter.collectGpuTimers();setTimeout(()=>{const Y=this.painter.queryGpuTimers(q);this.fire(new r.Event("gpu-timing-layer",{layerTimes:Y}))},50)}if(this.listens("gpu-timing-deferred-render")){const q=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const Y=this.painter.queryGpuTimeDeferredRender(q);this.fire(new r.Event("gpu-timing-deferred-render",{gpuTime:Y}))},50)}const j=this._sourcesDirty||this._styleDirty||this._placementDirty||F;if(j||this._repaint)this.triggerRepaint();else{const q=!this.isMoving()&&this.loaded();if(q&&(F=this._updateAverageElevation(b,!0)),F)this.triggerRepaint();else if(this._triggerFrame(!1),q&&(this.fire(new r.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const Y=this._calculateSpeedIndex();this.fire(new r.Event("speedindexcompleted",{speedIndex:Y})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||j||(this._fullyLoaded=!0,this._authenticate())}_forceMarkerUpdate(){for(const _ of this._markers)_._update()}_updateAverageElevation(_,l=!1){const f=b=>(this.transform.averageElevation=b,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&f(0);if((l||_-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(_)){const b=this.transform.averageElevation;let R=this.transform.sampleAverageElevation(),M=!1;this.transform.elevation&&(M=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(R)?R=0:this._averageElevationLastSampledAt=_;const F=Math.abs(b-R);if(F>1){if(this._isInitialLoad||M)return this._averageElevation.jumpTo(R),f(R);this._averageElevation.easeTo(R,_,300)}else if(F>1e-4)return this._averageElevation.jumpTo(R),f(R)}return!!this._averageElevation.isEasing(_)&&f(this._averageElevation.getValue(_))}_authenticate(){r.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,_=>{if(_&&(_.message===r.AUTH_ERR_MSG||_.status===401)){const l=this.painter.context.gl;r.storeAuthState(l,!1),this._logoControl instanceof wl&&this._logoControl._updateLogo(),l&&l.clear(l.DEPTH_BUFFER_BIT|l.COLOR_BUFFER_BIT|l.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new r.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),r.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const _=this.painter.canvasCopy(),l=this.painter.getCanvasCopiesAndTimestamps();l.timeStamps.push(performance.now());const f=this.painter.context.gl,b=f.createFramebuffer();function R(M){f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,M,0);const F=new Uint8Array(f.drawingBufferWidth*f.drawingBufferHeight*4);return f.readPixels(0,0,f.drawingBufferWidth,f.drawingBufferHeight,f.RGBA,f.UNSIGNED_BYTE,F),F}return f.bindFramebuffer(f.FRAMEBUFFER,b),this._canvasPixelComparison(R(_),l.canvasCopies.map(R),l.timeStamps)}_canvasPixelComparison(_,l,f){let b=f[1]-f[0];const R=_.length/4;for(let M=0;M<l.length;M++){const F=l[M];let j=0;for(let q=0;q<F.length;q+=4)F[q]===_[q]&&F[q+1]===_[q+1]&&F[q+2]===_[q+2]&&F[q+3]===_[q+3]&&(j+=1);b+=(f[M+2]-f[M+1])*(1-j/R)}return b}remove(){this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),r.window!==void 0&&(r.window.removeEventListener("resize",this._onWindowResize,!1),r.window.removeEventListener("orientationchange",this._onWindowResize,!1),r.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),r.window.removeEventListener("online",this._onWindowOnline,!1));const _=this.painter.context.gl.getExtension("WEBGL_lose_context");_&&_.loseContext(),fs(this._canvasContainer),fs(this._controlContainer),fs(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),r.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new r.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(_){this._renderNextFrame=this._renderNextFrame||_,this.style&&!this._frame&&(this._frame=r.exported.frame(l=>{const f=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,f&&this._render(l)}))}_preloadTiles(_){const l=this.style?Object.values(this.style._sourceCaches):[];return r.asyncAll(l,(f,b)=>f._preloadTiles(_,b),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(_){this._trackResize&&this.resize({originalEvent:_})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(_){this._showTerrainWireframe!==_&&(this._showTerrainWireframe=_,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(_){this._speedIndexTiming!==_&&(this._speedIndexTiming=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}_setCacheLimits(_,l){r.setCacheLimits(_,l)}get version(){return r.version}},NavigationControl:class{constructor(_){this.options=r.extend({},Hc,_),this._container=S("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(r.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",l=>{this._map&&this._map.zoomIn({},{originalEvent:l})}),S("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",l=>{this._map&&this._map.zoomOut({},{originalEvent:l})}),S("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(r.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",l=>{const f=this._map;f&&(this.options.visualizePitch?f.resetNorthPitch({},{originalEvent:l}):f.resetNorth({},{originalEvent:l}))}),this._compassIcon=S("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const _=this._map;if(!_)return;const l=_.getZoom(),f=l===_.getMaxZoom(),b=l===_.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=b,this._zoomInButton.setAttribute("aria-disabled",f.toString()),this._zoomOutButton.setAttribute("aria-disabled",b.toString())}_rotateCompassArrow(){const _=this._map;if(!_)return;const l=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(_.transform.pitch*(Math.PI/180)),.5)}) rotateX(${_.transform.pitch}deg) rotateZ(${_.transform.angle*(180/Math.PI)}deg)`:`rotate(${_.transform.angle*(180/Math.PI)}deg)`;_._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=l)})}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),_.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&_.on("pitch",this._rotateCompassArrow),_.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Sl(_,this._compass,this.options.visualizePitch)),this._container}onRemove(){const _=this._map;_&&(this._container.remove(),this.options.showZoom&&_.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&_.off("pitch",this._rotateCompassArrow),_.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(_,l){const f=S("button",_,this._container);return f.type="button",f.addEventListener("click",l),f}_setButtonTitle(_,l){if(!this._map)return;const f=this._map._getUIString(`NavigationControl.${l}`);_.setAttribute("aria-label",f),_.firstElementChild&&_.firstElementChild.setAttribute("title",f)}},GeolocateControl:class extends r.Evented{constructor(_){super(),this.options=r.extend({geolocation:r.window.navigator.geolocation},Kc,_),r.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=as(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(_){return this._map=_,this._container=S("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(_){this._supportsGeolocation!==void 0?_(this._supportsGeolocation):r.window.navigator.permissions!==void 0?r.window.navigator.permissions.query({name:"geolocation"}).then(l=>{this._supportsGeolocation=l.state!=="denied",_(this._supportsGeolocation)}):(this._supportsGeolocation=!!this.options.geolocation,_(this._supportsGeolocation))}_isOutOfMapMaxBounds(_){const l=this._map.getMaxBounds(),f=_.coords;return!!l&&(f.longitude<l.getWest()||f.longitude>l.getEast()||f.latitude<l.getSouth()||f.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(_){if(this._map){if(this._isOutOfMapMaxBounds(_))return this._setErrorState(),this.fire(new r.Event("outofmaxbounds",_)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=_,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(_),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(_),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new r.Event("geolocate",_)),this._finish()}}_updateCamera(_){const l=new r.LngLat(_.coords.longitude,_.coords.latitude),f=_.coords.accuracy,b=this._map.getBearing(),R=r.extend({bearing:b},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(f),R,{geolocateSource:!0})}_updateMarker(_){if(_){const l=new r.LngLat(_.coords.longitude,_.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=_.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const _=this._map.transform,l=r.mercatorZfromAltitude(1,_._center.lat)*_.worldSize,f=Math.ceil(2*this._accuracy*l);this._circleElement.style.width=`${f}px`,this._circleElement.style.height=`${f}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(_){if(this._map){if(this.options.trackUserLocation)if(_.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(_.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new r.Event("error",_)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(_){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=S("button","mapboxgl-ctrl-geolocate",this._container),S("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",_===!1){r.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=S("div","mapboxgl-user-location"),this._dotElement.appendChild(S("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(S("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new la({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=S("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new la({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new r.Event("trackuserlocationend")))})}_onDeviceOrientation(_){this._userLocationDotMarker&&(_.webkitCompassHeading?this._heading=_.webkitCompassHeading:_.absolute===!0&&(this._heading=-1*_.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return r.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new r.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new r.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new r.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(_={maximumAge:6e5,timeout:0},this._noTimeout=!0):(_=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,_),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const _=()=>{r.window.addEventListener("ondeviceorientationabsolute"in r.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};r.window.DeviceMotionEvent!==void 0&&typeof r.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(l=>{l==="granted"&&_()}).catch(console.error):_()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),r.window.removeEventListener("deviceorientation",this._onDeviceOrientation),r.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:xl,ScaleControl:class{constructor(_){this.options=r.extend({},Tl,_),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch{return!1}}()||(this._setScale=Al.bind(this)),r.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const _=this.options.maxWidth||100,l=this._map,f=l._containerHeight/2,b=l._containerWidth/2-_/2,R=l.unproject([b,f]),M=l.unproject([b+_,f]),F=R.distanceTo(M);if(this.options.unit==="imperial"){const j=3.2808*F;j>5280?this._setScale(_,j/5280,"mile"):this._setScale(_,j,"foot")}else this.options.unit==="nautical"?this._setScale(_,F/1852,"nautical-mile"):F>=1e3?this._setScale(_,F/1e3,"kilometer"):this._setScale(_,F,"meter")}_setScale(_,l,f){const b=ca(l),R=b/l;this._map._requestDomTask(()=>{this._container.style.width=_*R+"px",this._container.innerHTML=f!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:f}).format(b):`${b}&nbsp;nm`})}onAdd(_){return this._map=_,this._language=_.getLanguage(),this._container=S("div","mapboxgl-ctrl mapboxgl-ctrl-scale",_.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(_){this._language=_,this._update()}setUnit(_){this.options.unit=_,this._update()}},FullscreenControl:class{constructor(_){this._fullscreen=!1,_&&_.container&&(_.container instanceof r.window.HTMLElement?this._container=_.container:r.warnOnce("Full screen control 'container' must be a DOM element.")),r.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in r.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in r.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=S("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",r.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,r.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!r.window.document.fullscreenEnabled&&!r.window.document.webkitFullscreenEnabled)}_setupUI(){const _=this._fullscreenButton=S("button","mapboxgl-ctrl-fullscreen",this._controlContainer);S("span","mapboxgl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),r.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",_)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(r.window.document.fullscreenElement||r.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?r.window.document.exitFullscreen?r.window.document.exitFullscreen():r.window.document.webkitCancelFullScreen&&r.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends r.Evented{constructor(_){super(),this.options=r.extend(Object.create(Xu),_),r.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(_&&_.className?_.className.trim().split(/\s+/):[])}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&_.on("preclick",this._onClose),this.options.closeOnMove&&_.on("move",this._onClose),_.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(_.on("mousemove",this._onMouseEvent),_.on("mouseup",this._onMouseEvent),_._canvasContainer.classList.add("mapboxgl-track-pointer")):_.on("move",this._update),this.fire(new r.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const _=this._map;return _&&(_.off("move",this._update),_.off("move",this._onClose),_.off("preclick",this._onClose),_.off("click",this._onClose),_.off("remove",this.remove),_.off("mousemove",this._onMouseEvent),_.off("mouseup",this._onMouseEvent),_.off("drag",this._onMouseEvent),this._map=void 0),this.fire(new r.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(_){this._lngLat=r.LngLat.convert(_),this._pos=null,this._trackPointer=!1,this._update();const l=this._map;return l&&(l.on("move",this._update),l.off("mousemove",this._onMouseEvent),l._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const _=this._map;return _&&(_.off("move",this._update),_.on("mousemove",this._onMouseEvent),_.on("drag",this._onMouseEvent),_._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(r.window.document.createTextNode(_))}setHTML(_){const l=r.window.document.createDocumentFragment(),f=r.window.document.createElement("body");let b;for(f.innerHTML=_;b=f.firstChild,b;)l.appendChild(b);return this.setDOMContent(l)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){let l=this._content;if(l)for(;l.hasChildNodes();)l.firstChild&&l.removeChild(l.firstChild);else l=this._content=S("div","mapboxgl-popup-content",this._container||void 0);if(l.appendChild(_),this.options.closeButton){const f=this._closeButton=S("button","mapboxgl-popup-close-button",l);f.type="button",f.setAttribute("aria-label","Close popup"),f.setAttribute("aria-hidden","true"),f.innerHTML="&#215;",f.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(_){return this._classList.add(_),this._updateClassList(),this}removeClassName(_){return this._classList.delete(_),this._updateClassList(),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){let l;return this._classList.delete(_)?l=!1:(this._classList.add(_),l=!0),this._updateClassList(),l}_onMouseEvent(_){this._update(_.point)}_getAnchor(_){if(this.options.anchor)return this.options.anchor;const l=this._map,f=this._container,b=this._pos;if(!l||!f||!b)return"bottom";const R=f.offsetWidth,M=f.offsetHeight,F=b.x<R/2,j=b.x>l.transform.width-R/2;if(b.y+_<M)return F?"top-left":j?"top-right":"top";if(b.y>l.transform.height-M){if(F)return"bottom-left";if(j)return"bottom-right"}return F?"left":j?"right":"bottom"}_updateClassList(){const _=this._container;if(!_)return;const l=[...this._classList];l.push("mapboxgl-popup"),this._anchor&&l.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&l.push("mapboxgl-popup-track-pointer"),_.className=l.join(" ")}_update(_){const l=this._map,f=this._content;if(!l||!this._lngLat&&!this._trackPointer||!f)return;let b=this._container;if(b||(b=this._container=S("div","mapboxgl-popup",l.getContainer()),this._tip=S("div","mapboxgl-popup-tip",b),b.appendChild(f)),this.options.maxWidth&&b.style.maxWidth!==this.options.maxWidth&&(b.style.maxWidth=this.options.maxWidth),l.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Cl(this._lngLat,this._pos,l.transform)),!this._trackPointer||_){const R=this._pos=this._trackPointer&&_?_:l.project(this._lngLat),M=ua(this.options.offset),F=this._anchor=this._getAnchor(M.y),j=ua(this.options.offset,F),q=R.add(j).round();l._requestDomTask(()=>{this._container&&F&&(this._container.style.transform=`${ps[F]} translate(${q.x}px,${q.y}px)`)})}if(!this._marker&&l._showingGlobe()){const R=r.isLngLatBehindGlobe(l.transform,this._lngLat)?0:1;this._setOpacity(R)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(Ju);_&&_.focus()}_onClose(){this.remove()}_setOpacity(_){this._container&&(this._container.style.opacity=`${_}`),this._content&&(this._content.style.pointerEvents=_?"auto":"none")}},Marker:la,Style:qi,LngLat:r.LngLat,LngLatBounds:r.LngLatBounds,Point:r.pointGeometry,MercatorCoordinate:r.MercatorCoordinate,FreeCameraOptions:Vt,Evented:r.Evented,config:r.config,prewarm:function(){Ln().acquire(Xt)},clearPrewarmedResources:function(){const _=yn;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(Xt),yn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return r.config.ACCESS_TOKEN},set accessToken(_){r.config.ACCESS_TOKEN=_},get baseApiUrl(){return r.config.API_URL},set baseApiUrl(_){r.config.API_URL=_},get workerCount(){return sn.workerCount},set workerCount(_){sn.workerCount=_},get maxParallelImageRequests(){return r.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(_){r.config.MAX_PARALLEL_IMAGE_REQUESTS=_},clearStorage(_){r.clearTileCache(_)},workerUrl:"",workerClass:null,setNow:r.exported.setNow,restoreNow:r.exported.restoreNow};return hs});var g=c;return g})})(mapboxGl$2);const mapboxGl=mapboxGl$2.exports,mapboxGl$1=_mergeNamespaces({__proto__:null,default:mapboxGl},[mapboxGl$2.exports]);exports.renderApp=renderApp;exports.renderError=renderError;
//# sourceMappingURL=ssr.js.map
