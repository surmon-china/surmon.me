const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["vendor-DqPmrnwb.js","basic-GRmfeJ9v.js","basic-o3JHQHtc.css","mapbox-gl-BjfVpFuT.js","mapbox-gl-C1Im9pGR.css"])))=>i.map(i=>d[i]);
import{H as Mt,b as aa,d as la,s as ia,p as ra,x as ca,y as da,j as ua,e as pa,l as _a,f as ma,r as ha,h as ga,n as fa,i as va,k as ya,m as ba,t as ka,o as cn,M as $a,q as Ta,u as Ea,v as wa,w as Zn,_ as Sa,S as Ca,A as Aa,z as Jn,G as Ia,E as Oa,B as jt,C as Vt,D as Ma}from"./basic-GRmfeJ9v.js";import{e as Ra,r as z,f as de,d as A,g as Be,i as it,j as $e,s as K,k as Ss,l as te,w as he,u as r,m as La,q as Pa,t as Na,v as Da,x as Ga,a as Q,b as et,y as I,h as ae,z as Ua,n as Me,A as Ha,B as Cs,C as As,D as Ba,E as Qn,F as u,G as m,H as Z,I as w,J as n,K as N,L as G,M as O,N as d,O as L,P as f,Q as U,R as S,S as ze,T as Ve,U as F,V as bn,W as se,X as fe,Y as za,Z as Re,_ as ue,$ as nt,a0 as xt,a1 as Qe,a2 as kn,a3 as $n,a4 as Tn,a5 as Xn,a6 as xe,a7 as Fa,o as qa,a8 as En,a9 as Ya,aa as ja,ab as Va,ac as xa,ad as Wa,ae as Za,af as wn,ag as Is,ah as Ja,ai as Qa,aj as Xa,ak as Ka,al as el,am as tl,an as nl,ao as sl,ap as ol,aq as al}from"./vendor-DqPmrnwb.js";import"./mapbox-gl-BjfVpFuT.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="b6fd1b13-686b-44c7-b7b4-c4a63ec5770e",e._sentryDebugIdIdentifier="sentry-dbid-b6fd1b13-686b-44c7-b7b4-c4a63ec5770e")}catch{}})();(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function s(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(l){if(l.ep)return;l.ep=!0;const i=s(l);fetch(l.href,i)}})();var k=(e=>(e.APP_SLOGAN="app-slogan",e.CATEGORY_INSIGHT="insight",e.CATEGORY_CODE="code",e.PAGE_HOME="home",e.PAGE_GITHUB="github",e.PAGE_PHOTOGRAPHY="photography",e.PAGE_ABOUT="about",e.PAGE_SPONSOR="sponsor",e.PAGE_GUESTBOOK="guestbook",e.PAGE_APP="app",e.PAGE_ARCHIVE="archive",e.STATISTIC_ARTICLES="statistic-articles",e.STATISTIC_COMMENTS="statistic-comments",e.STATISTIC_TAGS="statistic-tags",e.STATISTIC_TODAY_VIEWS="statistic-today-views",e.STATISTIC_TOTAL_VIEWS="statistic-total-views",e.STATISTIC_TOTAL_UPVOTES="statistic-total-upvotes",e.STATISTIC_AVERAGE_EMOTION="statistic-average-emotion",e.EMPTY_PLACEHOLDER="common-empty-placeholder",e.NOT_FOUND="not-found",e.BACK_TO_HOME_PAGE="back-to-home-page",e.GUESTBOOK_SLOGAN="guestbook-banner-slogan",e.AD="ad",e.FEEDBACK="feedback",e.TO_TOP="to-page-top",e.TO_BOTTOM="to-page-bottom",e.ORIGIN_ORIGINAL="original",e.ORIGIN_REPRINT="reprint",e.ORIGIN_HYBRID="hybrid",e.ACTION_ON="on",e.ACTION_OFF="off",e.MUSIC_PLACEHOLDER="music-placeholder",e.SEARCH_PLACEHOLDER="search-input-placeholder",e.ANNOUNCEMENT_PLACEHOLDER="announcement-empty-placeholder",e.CATEGORY_UNCATEGORIZED="category-uncategorized",e.TAG_PLACEHOLDER="tag-placeholder",e.LIST_NO_MORE_DATA="no-more",e.ARTICLE_TITLE="article-title",e.ARTICLE_VIEWS="article-views",e.ARTICLE_PLACEHOLDER="article-empty-placeholder",e.ARTICLE_READ_ALL="read-all-article-content",e.ARTICLE_RENDERING="rendering",e.ARTICLE_LIST_LOADMORE="loadmore",e.ARTICLE_LIST_LOADING="loading",e.ARTICLE_FEATURED="article-featured",e.ARTICLE_FEATURED_SHORT="article-featured-short",e.COMMENT_LIST_EMPTY="comment-list-placeholder",e.COMMENT_UPVOTE="comment-likes",e.COMMENT_DOWNVOTE="comment-dislikes",e.COMMENT_REPLY="reply-comment",e.COMMENT_DELETE="delete-comment",e.COMMENT_DELETE_CONFIRM="delete-comment-confirm",e.COMMENT_REPLY_CANCEL="cancel-reply-comment",e.COMMENT_MODERATOR="comment-moderator",e.COMMENT_SORT_OLD="oldest-comments",e.COMMENT_SORT_NEW="newest-comments",e.COMMENT_SORT_HOT="hottest-comments",e.COMMENT_POST_NAME="comment-author-name",e.COMMENT_POST_EMAIL="comment-author-email",e.COMMENT_POST_SITE="comment-author-site-url",e.COMMENT_POST_CONTENT="comment-content",e.COMMENT_POST_PLACEHOLDER="comment-box-placeholder",e.COMMENT_POST_ERROR_CONTENT="comment-submit-failed-of-content-error",e.QUERY_PARAMS_ERROR="query-params-error",e.POST_ACTION_ERROR="post-requiest-failed-of-other-error",e.SUBMIT="submit-data",e.SUBMITTING="submitting",e.MOMENT_AM="moment-am",e.MOMENT_PM="moment-pm",e.MOMENT_JUST_NOW="moment-just-now",e.MOMENT_MINUTES="moment-minutes",e.MOMENT_HOURS="moment-hours",e.MOMENT_WEEKS="moment-weeks",e.MOMENT_DAYS="moment-days",e.MOMENT_MONTHS="moment-months",e.MOMENT_YEAR="moment-year",e.MOMENT_AGO="moment-ago",e))(k||{});const Os=468,Kn=6688,es=16688,W=Object.freeze({title:"Surmon.me",zh_sub_title:"斯是陋室，唯吾芳馨",en_sub_title:"Surmon's digital garden",zh_description:"本是浪蝶游蜂，自留半亩石池，但求直抒胸臆，挥墨九云之中",en_description:"Either write something worth reading or do something worth writing.",url:"https://surmon.me",domain:"surmon.me",author:"Surmon",primary:"#0088f5"}),Rt=Object.freeze({zh_title:"长居亚洲，游走热带",en_title:"UTC +07:00 ~ +09:00",coordinates:[103.830391822121,1.340863]}),vt=Object.freeze({TOKEN:"pk.eyJ1Ijoic3VybW9uIiwiYSI6ImNsNDE4YmkzNjB2Z2wzY3F5dWg2M2tqeWIifQ.JhgYGFI4zsuNiX9dH-pBDg",STYLE_LIGHT:"mapbox://styles/surmon/cl41fktzn000f14pet94oo1u4",STYLE_DARK:"mapbox://styles/surmon/cl41gy1qo000l15ry20j5ae0k",ZOOM:12.4374,CENTER:[103.830391822121,1.348463]}),Ee=Object.freeze({GOOGLE_ANALYTICS_MEASUREMENT_ID:"G-R40DDTSYNQ",GOOGLE_ADSENSE_CLIENT_ID:"ca-pub-4710915636313788",SENTRY_PUBLIC_DSN:"https://4a5f194531fe4527879812e4a4d8cf89@o360897.ingest.sentry.io/4505569138966528",YOUTUBE_CHANNEL_ID:"UCoL-j6T28PLSJ2U6ZdONS0w",YOUTUBE_CHANNEL_SHORT_ID:"@surmon_v",MUSIC_163_BGM_ALBUM_ID:"638949385",DOUBAN_USER_ID:"56647958",GITHUB_USER_NAME:"surmon-china",INSTAGRAM_USERNAME:"surmon666",TWITTER_USER_NAME:"surmon7788",TWITTER_USER_ID:"706498928393359360",BTC_ADDRESS:"bc1qhpdu03tnexkj4xsm3lqzyjdddz6z0rj2n7fsze",ETH_ADDRESS:"0xaD556974D449126efdeF23f4FF581861C301cB77"}),V=Object.freeze({RSS:"/rss.xml",SITE_MAP:"/sitemap.xml",UPTIME_STATUS:"https://redirect.surmon.me/status",NPM_HOMEPAGE:"https://www.npmjs.com/~surmon",PAYPAL:"https://paypal.me/surmon",GITHUB_SPONSORS:`https://github.com/sponsors/${Ee.GITHUB_USER_NAME}`,GITHUB:`https://github.com/${Ee.GITHUB_USER_NAME}`,GITHUB_SURMON_ME:"https://github.com/surmon-china/surmon.me",GITHUB_NODEPRESS:"https://github.com/surmon-china/nodepress",GITHUB_SURMON_ME_NATIVE:"https://github.com/surmon-china/surmon.me.native",GITHUB_BLOG_STAR_LIST:"https://github.com/stars/surmon-china/lists/surmon-me",MARKDOWN:"https://daringfireball.net/projects/markdown/",GOOGLE_MY_MAP:"https://www.google.com/maps/d/embed?mid=1sRx6t0Yj1TutbwORCvjwTMgr70r62Z6w&z=3",GOOGLE_MY_MAP_KML:"https://www.google.com/maps/d/u/0/kml?forcekml=1&mid=1sRx6t0Yj1TutbwORCvjwTMgr70r62Z6w",DISCORD_GROUP:"https://redirect.surmon.me/discord-server",TELEGRAM_GROUP:"https://redirect.surmon.me/telegram-group",MUSIC_163:`https://music.163.com/#/playlist?id=${Ee.MUSIC_163_BGM_ALBUM_ID}`,YOUTUBE_CHANNEL:`https://www.youtube.com/${Ee.YOUTUBE_CHANNEL_SHORT_ID}`,TELEGRAM:"https://t.me/surmon",OPENSEA:"https://opensea.io/Surmon",ZHIHU:"https://www.zhihu.com/people/surmon/answers",DOUBAN:"https://www.douban.com/people/nocower",DOUBAN_MOVIE:"https://movie.douban.com/people/nocower/collect",LINKEDIN:"https://www.linkedin.com/in/surmon",INSTAGRAM:`https://www.instagram.com/${Ee.INSTAGRAM_USERNAME}`,TWITTER:`https://twitter.com/${Ee.TWITTER_USER_NAME}`}),ll={[k.APP_SLOGAN]:W.zh_sub_title,[k.PAGE_HOME]:"明殿",[k.CATEGORY_INSIGHT]:"无色庵",[k.CATEGORY_CODE]:"宁静寺",[k.PAGE_GITHUB]:"丹青阁",[k.PAGE_ARCHIVE]:"海藏林",[k.PAGE_GUESTBOOK]:"四方馆",[k.PAGE_ABOUT]:"狂浪生",[k.PAGE_SPONSOR]:"随喜",[k.PAGE_PHOTOGRAPHY]:"大千界",[k.PAGE_APP]:"客户端",[k.STATISTIC_ARTICLES]:"全站文章",[k.STATISTIC_COMMENTS]:"全站评论",[k.STATISTIC_TAGS]:"全站标签",[k.STATISTIC_TODAY_VIEWS]:"今日阅读",[k.STATISTIC_TOTAL_VIEWS]:"累计被阅读",[k.STATISTIC_TOTAL_UPVOTES]:"累计获赞",[k.STATISTIC_AVERAGE_EMOTION]:"平均评分",[k.EMPTY_PLACEHOLDER]:"空空如也",[k.NOT_FOUND]:"众里寻他，我已不再",[k.BACK_TO_HOME_PAGE]:"山河万里，长歌归故",[k.GUESTBOOK_SLOGAN]:"此心光明，亦复何言",[k.AD]:"广而告之",[k.FEEDBACK]:"反馈",[k.TO_TOP]:"回到顶部",[k.TO_BOTTOM]:"下一屏",[k.ORIGIN_ORIGINAL]:"原创",[k.ORIGIN_REPRINT]:"转载",[k.ORIGIN_HYBRID]:"衍生",[k.ACTION_ON]:"开",[k.ACTION_OFF]:"关",[k.MUSIC_PLACEHOLDER]:"五音六律，七弦八度",[k.SEARCH_PLACEHOLDER]:"上下求索",[k.ANNOUNCEMENT_PLACEHOLDER]:"空空如也",[k.CATEGORY_UNCATEGORIZED]:"未分类",[k.TAG_PLACEHOLDER]:"无标签",[k.ARTICLE_TITLE]:"文不加点",[k.ARTICLE_VIEWS]:"次阅读",[k.ARTICLE_PLACEHOLDER]:"空空如也",[k.ARTICLE_READ_ALL]:"阅读余下全文",[k.ARTICLE_RENDERING]:"渲染中..",[k.LIST_NO_MORE_DATA]:"没有更多",[k.ARTICLE_LIST_LOADMORE]:"加载更多",[k.ARTICLE_LIST_LOADING]:"加载中...",[k.ARTICLE_FEATURED]:"精选",[k.ARTICLE_FEATURED_SHORT]:"精选",[k.COMMENT_LIST_EMPTY]:"期待你的捷足先登",[k.COMMENT_UPVOTE]:"赞",[k.COMMENT_DOWNVOTE]:"踩",[k.COMMENT_DELETE]:"删除",[k.COMMENT_DELETE_CONFIRM]:"确定要删除此评论吗？此操作不可恢复",[k.COMMENT_REPLY]:"回复",[k.COMMENT_REPLY_CANCEL]:"取消回复",[k.COMMENT_MODERATOR]:"博主",[k.COMMENT_SORT_OLD]:"最早",[k.COMMENT_SORT_NEW]:"最新",[k.COMMENT_SORT_HOT]:"最热",[k.COMMENT_POST_NAME]:"名字",[k.COMMENT_POST_EMAIL]:"邮箱",[k.COMMENT_POST_SITE]:"网址",[k.COMMENT_POST_CONTENT]:"内容",[k.COMMENT_POST_PLACEHOLDER]:"愿你的见解一针见血",[k.COMMENT_POST_ERROR_CONTENT]:"内容需要在 3000 字以内",[k.QUERY_PARAMS_ERROR]:"请求参数错误：",[k.POST_ACTION_ERROR]:"操作失败，详细原因 > 控制台",[k.SUBMIT]:"提交",[k.SUBMITTING]:"提交中...",[k.MOMENT_AM]:"上午",[k.MOMENT_PM]:"下午",[k.MOMENT_JUST_NOW]:"刚刚",[k.MOMENT_MINUTES]:"分钟",[k.MOMENT_HOURS]:"小时",[k.MOMENT_WEEKS]:"周",[k.MOMENT_DAYS]:"天",[k.MOMENT_MONTHS]:"个月",[k.MOMENT_YEAR]:"年",[k.MOMENT_AGO]:e=>`${e.date}前`},il={[k.APP_SLOGAN]:W.en_sub_title,[k.PAGE_HOME]:"Home",[k.CATEGORY_INSIGHT]:"Insight",[k.CATEGORY_CODE]:"Code",[k.PAGE_ARCHIVE]:"Archive",[k.PAGE_GITHUB]:"GitHub",[k.PAGE_ABOUT]:"About",[k.PAGE_GUESTBOOK]:"Guestbook",[k.PAGE_SPONSOR]:"Sponsor",[k.PAGE_APP]:"APP",[k.PAGE_PHOTOGRAPHY]:"Photog",[k.STATISTIC_ARTICLES]:"Articles",[k.STATISTIC_COMMENTS]:"Comments",[k.STATISTIC_TAGS]:"Tags",[k.STATISTIC_TODAY_VIEWS]:"Today views",[k.STATISTIC_TOTAL_VIEWS]:"Total views",[k.STATISTIC_TOTAL_UPVOTES]:"Total upvotes",[k.STATISTIC_AVERAGE_EMOTION]:"Rating",[k.EMPTY_PLACEHOLDER]:"NULL",[k.NOT_FOUND]:"Arrives here at last",[k.BACK_TO_HOME_PAGE]:"Drive by",[k.GUESTBOOK_SLOGAN]:"Chop wood, Carry water",[k.AD]:"AD",[k.FEEDBACK]:"Feedback",[k.TO_TOP]:"To top",[k.TO_BOTTOM]:"Next screen",[k.ORIGIN_ORIGINAL]:"OG",[k.ORIGIN_REPRINT]:"RPT",[k.ORIGIN_HYBRID]:"HY",[k.ACTION_ON]:"on",[k.ACTION_OFF]:"off",[k.MUSIC_PLACEHOLDER]:"Music player",[k.SEARCH_PLACEHOLDER]:"Search...",[k.CATEGORY_UNCATEGORIZED]:"Uncategorized",[k.ANNOUNCEMENT_PLACEHOLDER]:"No announcements",[k.TAG_PLACEHOLDER]:"No tags",[k.LIST_NO_MORE_DATA]:"No more",[k.ARTICLE_PLACEHOLDER]:"No articles",[k.ARTICLE_TITLE]:"Articles",[k.ARTICLE_VIEWS]:"views",[k.ARTICLE_READ_ALL]:"Show Full Article",[k.ARTICLE_RENDERING]:"Rendering...",[k.ARTICLE_LIST_LOADMORE]:"Loadmore",[k.ARTICLE_LIST_LOADING]:"Loading...",[k.ARTICLE_FEATURED]:"featured",[k.ARTICLE_FEATURED_SHORT]:"feat",[k.COMMENT_LIST_EMPTY]:"Be the first to comment",[k.COMMENT_UPVOTE]:"upvote",[k.COMMENT_DOWNVOTE]:"downvote",[k.COMMENT_DELETE]:"delete",[k.COMMENT_DELETE_CONFIRM]:"Are you sure you want to delete this comment? You cannot undo this action.",[k.COMMENT_REPLY]:"reply",[k.COMMENT_REPLY_CANCEL]:"cancel reply",[k.COMMENT_MODERATOR]:"Moderator",[k.COMMENT_SORT_OLD]:"Oldest",[k.COMMENT_SORT_NEW]:"Newest",[k.COMMENT_SORT_HOT]:"Hottest",[k.COMMENT_POST_NAME]:"name",[k.COMMENT_POST_EMAIL]:"email",[k.COMMENT_POST_SITE]:"site",[k.COMMENT_POST_CONTENT]:"content",[k.COMMENT_POST_PLACEHOLDER]:"Hit the nail on the head",[k.COMMENT_POST_ERROR_CONTENT]:"Content requirements are within 3000 characters!",[k.QUERY_PARAMS_ERROR]:"Invalid query params: ",[k.POST_ACTION_ERROR]:"Failed! Get error detail in console",[k.SUBMIT]:"Submit",[k.SUBMITTING]:"Submitting...",[k.MOMENT_AM]:"AM",[k.MOMENT_PM]:"PM",[k.MOMENT_JUST_NOW]:"Just now",[k.MOMENT_MINUTES]:"minutes",[k.MOMENT_HOURS]:"hours",[k.MOMENT_WEEKS]:"weeks",[k.MOMENT_DAYS]:"days",[k.MOMENT_MONTHS]:"months",[k.MOMENT_YEAR]:"year",[k.MOMENT_AGO]:e=>`${e.date} ago`};var j=(e=>(e.English="en",e.Chinese="zh",e))(j||{});const rl=[{code:"zh",iso:"zh-CN",name:"简体中文",data:ll},{code:"en",iso:"en-US",name:"English",data:il}],Ms="4.41.0",Rs="production",cl=!1,Wt=!cl,dl="__INITIAL_SSR_STATE__",Lt=e=>{var t;return(t=window[dl])==null?void 0:t[e]},ul="__SSR_CONTEXT__",Ls=()=>window[ul]||null,Ps=e=>{var t;return(t=Ls())==null?void 0:t[e]},ut=400,pl=404,_l=500,Ns=e=>{const t=Ra(e||""),s=String(t.browser.name).toLowerCase(),o=l=>l.some(i=>i.toLowerCase()===s);return{result:t,isIE:o(["compatible","MSIE","IE"]),isEdge:o(["Edge"]),isFirefox:o(["Firefox"]),isChrome:o(["Chrome","Chromium"]),isSafari:o(["Safari"]),isWechat:o(["Wechat"]),isIos:t.os.name==="iOS",isAndroid:t.os.name==="Android",isMobile:t.device.type==="mobile"}},ml=(e,t)=>typeof e=="string"?e.includes(t):Array.isArray(e)?e.some(s=>s.includes(t)):!1,hl=e=>e?ml(e,j.Chinese):!0,Sn=e=>({log:(...t)=>console.log("⚪",`[${e}]`,...t),info:(...t)=>console.info("🔵",`[${e}]`,...t),warn:(...t)=>console.warn("🟠",`[${e}]`,...t),error:(...t)=>console.error("🔴",`[${e}]`,...t),debug:(...t)=>console.debug("🟤",`[${e}]`,...t),success:(...t)=>console.log("🟢",`[${e}]`,...t),failure:(...t)=>console.warn("🔴",`[${e}]`,...t)}),pt=Sn("APP");var Pe=(e=>(e[e.Normal=0]="Normal",e[e.Wide=1]="Wide",e[e.Full=2]="Full",e))(Pe||{});const Ds=Symbol("globalState"),gl=e=>{const t=z(e.error??null),s={code:_l},o=y=>{Jt(()=>{pt.failure("error:",y)}),y?y instanceof Error?t.value={code:y.code??s.code,message:y.message}:typeof y=="string"?t.value={...s,message:y}:t.value={...y,code:y.status||y.code||s.code}:t.value=null},l=z(!1),i=()=>{l.value=!0},a=de({original:e.userAgent,language:e.language,isZhUser:hl(e.language),...Ns(e.userAgent)}),c=z(e.layout),p=A(()=>({layout:c.value,isNormal:c.value===0,isWide:c.value===1,isFull:c.value===2})),_=y=>{y!==c.value&&(c.value=y)},h=de({sponsor:!1,feedback:!1,statement:!1}),g=(y,$)=>{h[y]=$},b={toRawState:()=>({renderError:t.value,userAgent:a.original,language:a.language,layout:c.value}),renderError:Be(t),setRenderError:o,isHydrated:Be(l),setHydrate:i,layoutColumn:p,setLayoutColumn:_,userAgent:Be(a),switcher:Be(h),toggleSwitcher:g};return{...b,install(y){y.provide(Ds,b)}}},Zt=()=>it(Ds),Se=e=>{Zt().isHydrated.value&&$e(()=>e())},Jt=e=>{e()},fl=null,Ge=void 0,Gs=e=>e===fl,Tt=e=>e===Ge,Us=e=>Gs(e)||Tt(e),re=e=>{const s=(Tt(e.shallow)?!0:e.shallow)?K:z,o=z(!1),l=z(!1),i=s(e.data);return{data:i,fetching:o,fetched:l,fetch:async(...c)=>{if(!(e.once&&l.value)){o.value=!0,e.preclean&&(i.value=e.data);try{const p=await e.fetcher(...c);i.value=p,l.value=!0}finally{o.value=!1}}}}},vl="https://api.surmon.me",yl=vl,gt={NODEPRESS:yl,FE:"https://surmon.me",STATIC:"https://static.surmon.me",CDN_CHINA:"https://cdn.surmon.cn",CDN_GLOBAL:"https://cdn.surmon.me"},Cn=Ss.create({baseURL:gt.NODEPRESS,withCredentials:!0});Cn.interceptors.response.use(e=>{var t,s;return(s=(t=e.headers)==null?void 0:t["content-type"])!=null&&s.includes("json")&&e.data.status!=="success"?Promise.reject(e.data):e.data},e=>{var o,l,i,a;const t=e.toJSON(),s={...t,config:e.config,code:t.status||((o=e.response)==null?void 0:o.status)||ut,message:((i=(l=e.response)==null?void 0:l.data)==null?void 0:i.error)||((a=e.response)==null?void 0:a.statusText)||t.message};return pt.debug("axios error:",e),Promise.reject(s)});const Ze=e=>(...t)=>Cn[e](...t),ie={$:Cn,request:Ze("request"),head:Ze("head"),get:Ze("get"),post:Ze("post"),put:Ze("put"),patch:Ze("patch"),delete:Ze("delete"),options:Ze("options")},bl=te("announcement",()=>re({data:[],preclean:!0,async fetcher(e){return(await ie.get("/announcement",{params:e})).result.data}})),ts=e=>new Date(e.getTime()),Je=e=>{const t=e.getDay();return{day:e.getDate(),week:t===0?7:t,month:e.getMonth()+1,year:e.getFullYear()}},kl=(e,t)=>{const s=e.day===t.day,o=e.month===t.month,l=e.year===t.year;return s&&o&&l},$l=e=>{const t=new Date;return t.setDate(e.day),t.setFullYear(e.year),t.setMonth(e.month-1),t},_t=({year:e,month:t,day:s},o="-")=>{const l=t?o+String(t).padStart(2,"0"):"",i=s?o+String(s).padStart(2,"0"):"";return`${e}${l}${i}`},Gt=(e,t)=>{const s=typeof e=="string"?new Date(e):e;return _t(Je(s),t)},An=te("archive",()=>{const e=re({data:null,once:!0,async fetcher(){return(await ie.get("/archive")).result}}),t=A(()=>{var o;const s=[];return(o=e.data.value)==null||o.articles.sort(({created_at:l},{created_at:i})=>Date.parse(i)-Date.parse(l)).map(l=>({...l,createAt:Je(new Date(l.created_at))})).forEach(l=>{const{createAt:i}=l;let c=s.find(h=>h.year===i.year);c||(c={year:i.year,months:[]},s.push(c));let _=c.months.find(h=>h.month===i.month);_||(_={month:i.month,articles:[]},c.months.push(_)),_.articles.push(l)}),s});return{...e,tree:t}});var Qt=(e=>(e[e.Original=0]="Original",e[e.Reprint=1]="Reprint",e[e.Hybrid=2]="Hybrid",e))(Qt||{}),kt=(e=>(e[e.Guestbook=0]="Guestbook",e))(kt||{}),Pt=(e=>(e[e.Self=0]="Self",e))(Pt||{}),ot=(e=>(e[e.Asc=1]="Asc",e[e.Desc=-1]="Desc",e[e.Hottest=2]="Hottest",e))(ot||{});const Tl=(e=Os)=>{const t=new Date().getTime();return s=>{if(!e){s();return}const o=new Date().getTime()-t,l=e-o;l>0?setTimeout(s,l):s()}},at=(e,t)=>{const s=Tl(e);return new Promise((o,l)=>{t.then(i=>s(()=>o(i))).catch(l)})},Hs=e=>localStorage.getItem(e),Bs=(e,t)=>localStorage.setItem(e,t),zs=e=>localStorage.removeItem(e),Fs=(e,t)=>Bs(e,JSON.stringify(t)),qs=e=>{const t=Hs(e);return typeof t=="string"?JSON.parse(t):null},El={get:Hs,set:Bs,remove:zs,setJSON:Fs,getJSON:qs};var De=(e=>(e[e.Null=0]="Null",e[e.Local=1]="Local",e[e.Disqus=2]="Disqus",e))(De||{});const At="identity-state",Ue=te("identity",()=>{const e=K(null),t=de({type:0,localProfile:null,disqusProfile:null}),s=de({likedPages:[],likedComments:[],dislikedComments:[]}),o=de([]),l=A(()=>M=>s.likedPages.includes(M)),i=A(()=>M=>s.likedComments.includes(M)),a=A(()=>M=>s.dislikedComments.includes(M)),c=A(()=>{var M,X,ce;return t.type===1?t.localProfile:t.type===2?{name:(M=t.disqusProfile)==null?void 0:M.name,site:((X=t.disqusProfile)==null?void 0:X.url)||((ce=t.disqusProfile)==null?void 0:ce.profileUrl)}:null}),p=M=>{s.likedComments.push(M)},_=M=>{s.dislikedComments.push(M)},h=M=>{s.likedPages.push(M)},g=M=>{o.push(M)},v=M=>{t.localProfile={...M},t.type=1},b=()=>{t.type=0,t.localProfile=null},y=async()=>{await ie.get("/disqus/oauth-logout"),t.type=0,t.disqusProfile=null},$=async()=>{const M=await ie.get("/disqus/user-info");t.disqusProfile=M.result,t.type=2},T=async()=>{const M=await ie.get("/disqus/config");e.value=M.result},E=()=>({disqusConfig:r(e),user:t,vote:s,feedbacks:o}),C=M=>{e.value=M.disqusConfig,t.type=M.user.type,t.localProfile=M.user.localProfile,t.disqusProfile=M.user.disqusProfile,s.likedPages=M.vote.likedPages,s.likedComments=M.vote.likedComments,s.dislikedComments=M.vote.dislikedComments,o.splice(0,o.length,...M.feedbacks)},R=()=>{try{const M=qs(At);M&&C(M)}catch{zs(At)}};return{disqusConfig:e,user:t,vote:s,feedbacks:o,author:c,isLikedPage:l,isLikedComment:i,isDislikedComment:a,likeComment:p,dislikeComment:_,likePage:h,addFeedback:g,saveLocalUser:v,removeLocalUser:b,fetchDisqusLogout:y,fetchDisqusUserInfo:$,fetchDisqusConfig:T,initOnClient:()=>{T(),R(),he(()=>E(),M=>Fs(At,M),{deep:!0}),window.addEventListener("storage",M=>{M.key===At&&R()}),t.type===2?$().catch(()=>{t.disqusProfile=null,t.type=0}):t.disqusProfile=null}}}),wl="/comment",In=te("comment",()=>{const e=z(!1),t=z(!1),s=z(!1),o=z([]),l=z(null),i=A(()=>{const g=o.value.map(E=>E.id),v=o.value.filter(E=>E.pid===Pt.Self||!g.includes(E.pid)),b=o.value.filter(E=>E.pid!==Pt.Self&&g.includes(E.pid)),y=new Map(o.value.map(E=>[E.id,E])),$=new Map(v.map(E=>[E.id,{comment:E,children:[]}])),T=E=>{const C=y.get(E);return C?C.pid===Pt.Self?C.id:T(C.pid):Ge};return b.forEach(E=>{const C=T(E.pid);if(C&&$.has(C)){const R=$.get(C);$.set(C,{...R,children:[E,...R.children]})}}),Array.from($.values())}),a=()=>{o.value=[],l.value=null};return{comments:o,pagination:l,fetching:e,posting:t,deleting:s,commentTreeList:i,clearList:a,fetchList:async(g={},v=!1)=>{g={page:1,per_page:50,sort:ot.Desc,...g},g.page===1&&a();try{e.value=!0;const b=ie.get(wl,{params:g}),y=await(Wt?at(480,b):b);l.value=y.result.pagination,v?o.value.push(...y.result.data):o.value=y.result.data}finally{e.value=!1}},postComment:async g=>{try{t.value=!0;const v=await ie.post("/disqus/comment",g);return o.value.unshift(v.result),l.value&&l.value.total++,v.result}finally{t.value=!1}},deleteComment:async g=>{try{s.value=!0,await ie.delete("/disqus/comment",{data:{comment_id:g}});const v=o.value.findIndex(b=>b.id===g);v>-1&&(o.value.splice(v,1),l.value.total--)}finally{s.value=!1}},postCommentVote:async(g,v)=>{const b=Ue();await ie.post("/vote/comment",{comment_id:g,vote:v,author:b.author});const y=o.value.find($=>$.id===g);y&&(v>0?y.likes++:y.dislikes++)}}}),Ys=te("category",()=>re({data:[],once:!0,fetcher(){return ie.get("/category/all").then(e=>e.result)}})),je=Da,Sl=Pa,Cl=Na,Te=La;function On(e){return e>1e3?`${parseFloat((e/1e3).toFixed(2))}k`:String(e)}function me(e){return String(e).replace(/.{1,3}(?=(.{3})+$)/g,"$&,")}const Al="〇一二三四五六七八九十".split(""),Il="零壹贰叁肆伍陆柒捌玖拾".split(""),ns=(e,t=!1)=>{const s=t?Il:Al;return String(e).split("").map(o=>s[Number(o)]).join("")},Mn=e=>Gs(e)||Tt(null)||e===Qt.Original,Rn=e=>e===Qt.Hybrid,Ln=e=>e===Qt.Reprint,Ol=e=>e!=null&&e.length?e.reduce((t,s)=>({...t,[s.name]:s.value}),{}):{},Ne=(e,t)=>e.length?Ol(e)[t]:Ge,js=e=>Ne(e.extends||[],"icon")||"icon-tag",Xe=e=>/.*[\u4e00-\u9fa5]+.*$/.test(e.name)?e.slug.includes("-")?e.slug:Te(e.slug):e.name,Et=te("tag",()=>{const e=re({once:!0,data:[],fetcher:async()=>(await ie.get("/tag/all")).result}),t=A(()=>{const o=[...e.data.value];return o.sort((l,i)=>i.article_count-l.article_count),o}),s=A(()=>{const o=new Map;return e.data.value.forEach(l=>{o.set(l.name,l),o.set(l.name.toLowerCase(),l),o.set(l.name.toUpperCase(),l),o.set(Te(l.name),l)}),o});return{...e,sorted:t,fullNameTags:s}});var ge=(e=>(e.WebFont="webfont",e.MyGoogleMap="my_google_map",e.TwitterProfile="twitter_profile",e.TwitterTweets="twitter_tweets",e.YouTubePlaylist="youtube_playlist",e.YouTubeVideoList="youtube_video_list",e.InstagramProfile="instagram_profile",e.InstagramMedias="instagram_medias",e.InstagramMediaChildren="instagram_media_children",e.InstagramCalendar="instagram_calendar",e.BingWallpaper="bing_wallpaper",e.NetEaseMusic="netease_music",e.DoubanMovies="douban_movies",e.GitHubSponsors="github_sponsors",e.GitHubContributions="github_contributions",e.StatisticGitHubJson="statistic_github_json",e.StatisticNpmJson="statistic_npm_json",e))(ge||{});const Ml="/_tunnel",Rl="/_proxy",Nt=Ss.create({baseURL:Ml});Nt.interceptors.response.use(e=>e.data,e=>Promise.reject(Ga(e)?e.toJSON():e));const ye={$:Nt,request:(...e)=>Nt.request(...e),dispatch:(e,t)=>Nt.get(e,{params:t})},Xt=te("wallpaper",()=>{const e=re({fetcher:()=>ye.dispatch(ge.BingWallpaper),once:!0,data:null}),t=A(()=>s=>{var o;return(o=e.data.value)==null?void 0:o[s]});return{...e,papers:t}}),Vs=te("githubSponsors",()=>re({fetcher:()=>ye.dispatch(ge.GitHubSponsors),once:!0,data:null})),Pn=te("adminInfo",()=>re({data:null,async fetcher(){return(await ie.get("/auth/admin")).result}})),Nn=te("appOption",()=>{const e=re({shallow:!1,data:null,async fetcher(){return(await ie.get("/option")).result}}),t=A(()=>{var i;const l=(i=e.data.value)==null?void 0:i.ad_config;return{PC_CARROUSEL:Ge,PC_NAV:[],PC_ASIDE_SWIPER:[],...l?JSON.parse(l):{}}});return{...e,adConfig:t,postSiteLike:()=>{const l=Ue();return ie.post("/vote/post",{vote:1,post_id:kt.Guestbook,author:l.author}).then(i=>{e.data.value&&(e.data.value.meta.likes=i.result)})},postFeedback:l=>{var c,p;const i=Ue(),a=((c=i.author)==null?void 0:c.name)||null;return ie.post("/feedback",{...l,tid:0,user_name:a?`${a} (${De[i.user.type]})`:null,user_email:((p=i.author)==null?void 0:p.email)||null})}}}),Dn=te("nodepressStatistic",()=>re({data:null,fetcher:async()=>(await ie.get("/extension/statistic")).result})),xs=te("githubStatistic",()=>re({once:!0,data:null,fetcher:()=>ye.dispatch(ge.StatisticGitHubJson)})),Ws=te("npmStatistic",()=>re({once:!0,data:null,fetcher:()=>ye.dispatch(ge.StatisticNpmJson)})),Ll=te("articleCalendar",()=>re({once:!0,data:[],async fetcher(){return(await ie.get("/article/calendar",{params:{timezone:Intl.DateTimeFormat().resolvedOptions().timeZone}})).result}})),Pl=te("instagramCalendar",()=>re({once:!0,data:[],fetcher:()=>ye.dispatch(ge.InstagramCalendar)})),Nl=te("githubContributionsCalendar",()=>{const e=re({once:!0,data:null,fetcher:()=>ye.dispatch(ge.GitHubContributions)}),t=A(()=>e.data.value?e.data.value.weeks.map(s=>s.contributionDays).flat().map(s=>({date:s.date,count:s.contributionCount,color:s.color})):[]);return{...e,days:t}}),Zs=te("doubanMovies",()=>re({once:!0,data:null,fetcher:()=>ye.dispatch(ge.DoubanMovies)})),Js=te("twitterProfile",()=>re({data:null,fetcher:()=>ye.dispatch(ge.TwitterProfile)})),Dl=te("twitterLatestTweets",()=>re({data:null,fetcher(e){return ye.dispatch(ge.TwitterTweets,e)}})),Gl=te("instagramProfile",()=>re({data:null,fetcher:()=>ye.dispatch(ge.InstagramProfile)})),Qs=te("instagramLatestMedias",()=>re({data:null,fetcher:()=>{const e=ye.dispatch(ge.InstagramMedias);return at(480,e)}})),Xs=te("youtubePlaylist",()=>re({data:[],async fetcher(){const e=await ye.dispatch(ge.YouTubePlaylist);return e.sort((t,s)=>t.snippet.position-s.snippet.position),e}})),Ul=te("myGoogleMap",()=>re({once:!0,data:null,fetcher:()=>ye.dispatch(ge.MyGoogleMap)})),Ks=e=>Ps(e),eo=()=>Ks("country"),qe=()=>{const e=Ks("cdnDomain");if(e)return e;throw new Error("CDN domain is not defined.")},Hl="A_header",Bl="A_nav",zl="A_main",to="A_main",Fl="A_aside",ql="A_footer",no="A_article_content",so="A_article_readmore",oo="A_article_meta",Yl="A_article_share",ao="A_article_related",jl="A_article_content_heading",Vl=(e,t)=>`${jl}_${e}_${t}`,xl=e=>e.replace(/[^\p{L}\d\s\-_]/gu,"").toLowerCase().replace(/\s+/g,"-"),Ut="A_comment_warpper",ss="A_comment_publisher",os="A_comment_reply_publisher",Wl="A_comment_footer",Zl="A_comment_content_item",Ht=e=>`${Zl}_${e}`,Jl="comments",Gn="comment-",Ql=e=>e.replace(Gn,""),Xl=e=>`${Gn}${e}`,as={go:aa,css:la,sql:ia,php:ra,xml:ca,yaml:da,json:ua,bash:pa,less:_a,scss:ma,rust:ha,shell:ga,nginx:fa,stylus:va,python:ya,javascript:ba,typescript:ka};Object.keys(as).forEach(e=>Mt.registerLanguage(e,as[e]));const Kl={transform(e){return e.startsWith("<verse ")?e.replace("<verse ",'<p class="verse" '):e.startsWith("</verse>")?e.replace("</verse>","</p>"):e}},dn={verse:Kl},ei=Object.values(dn),lo="lozad",ti="loaded",io=e=>{const t=cn(e,{loaded:s=>s.classList.add(ti)});return t.observe(),t},ni=e=>{const t=z(),s=z(null),o=()=>{const i=lo,a=t.value;if(a!=null&&a.querySelectorAll){const c=a.querySelectorAll(`.${i}`);c!=null&&c.length&&(s.value=io(c))}},l=()=>{s.value&&(s.value.observer.disconnect(),s.value=null)};return Q(()=>{o()}),et(()=>{l()}),{element:t,observer:s,observe:o,unobserve:l}},si={mounted(e){e.__lozad_observer=io(e)},beforeUnmount(e){var t;(t=e.__lozad_observer)==null||t.observer.disconnect(),e.__lozad_observer=null}},oi=(e,t)=>{e.directive("lozad",si),e.config.globalProperties.$lozad=cn,t!=null&&t.exportToGlobal&&(window.$lozad=cn)},ai={install:oi},bt={width:{type:String,default:"1.6rem"},height:{type:String,default:"1rem"},gap:{type:String,default:"1rem"},radius:{type:String,default:"1px"}},li=I({name:"LoadingIndicator",props:bt,setup(e){return()=>{const t={"--indicator-width":e.width,"--indicator-height":e.height,"--indicator-gap":e.gap,"--indicator-radius":e.radius};return ae("div",{class:"global-loading-indicator",style:t},Array.from({length:4}).map(()=>ae("div")))}}}),ii=(e={})=>{const t=["global-loading-indicator",e.class].filter(Boolean).join(" "),s={"--indicator-width":e.width||bt.width.default,"--indicator-height":e.height||bt.height.default,"--indicator-gap":e.gap||bt.gap.default,"--indicator-radius":e.radius||bt.radius.default};return`
    <div class="${t}" style="${Object.entries(s).map(([o,l])=>`${o}: ${l}`).join(";")}">
    ${Array.from({length:4}).map(()=>"<div></div>").join("")}
    </div>
  `},Kt=(e,t)=>`${e}/${t}`,wt=e=>e.startsWith("/")?e:`/${e}`,ke=(e,t)=>{const s=wt(t);return`${Kt(e,"assets")}${s}`},Un=(e,t)=>`${Kt(e,"static")}${wt(t)}`,en=(e,t)=>`${Kt(e,"imgproxy")}${wt(t)}`,Fe=e=>e==null?void 0:e.startsWith(gt.STATIC),rt=e=>e.replace(gt.STATIC,""),St=e=>`${Rl}/${btoa(e)}`,ct=(e,t)=>`${Kt(e,"proxy")}/${btoa(t)}`,tt=(e,t)=>{const s=t?`${e}#${t}`:e;return`${gt.FE}${wt(s)}`},ro="language-",co=new $a(Ta(),Ea(),wa({langPrefix:ro,highlight(e,t){return Mt.getLanguage(t)?Mt.highlight(e,{language:t}).value:Mt.highlightAuto(e).value}}));co.setOptions({gfm:!0,breaks:!1,pedantic:!1});const It=e=>e,ls=e=>e.replace(/\s+/g," ").replace(/\n/g," "),ri=e=>{const t=new Sa;return t.html=({text:s})=>{const o=s.trim(),l=ei.reduce((i,a)=>a.transform(i),o);return e!=null&&e.sanitize?It(je(l)):l},t.heading=({depth:s,tokens:o})=>{var h;const l=g=>`<a class="anchor link" ${`href="#${g}"`} onclick="event.preventDefault();window.navigator.clipboard?.writeText(this.href)">#</a>`,i=t.parser.parseInline(o),a=(h=e==null?void 0:e.headingIdentifierGetter)==null?void 0:h.call(e,s,i),c=a!=null&&a.id?`id="${a.id}"`:"",p=`title="${je(i)}"`,_=a!=null&&a.anchor?l(a.anchor):'<span class="anchor static">#</span>';return`<h${s} ${c} ${p}>${_}${i}</h${s}>`},t.paragraph=({tokens:s})=>{const o=t.parser.parseInline(s),l=o.trim();return["p","div","figure"].some(a=>l.startsWith(`<${a}`)&&l.endsWith(`</${a}>`))?o:`<p>${o}</p>`},t.checkbox=({checked:s})=>s?'<i class="checkbox checked iconfont icon-checkbox-selected"></i>':'<i class="checkbox iconfont icon-checkbox-unselected"></i>',t.link=({href:s,title:o,tokens:l})=>{const i=t.parser.parseInline(l),a=i.includes("<img"),c=s.startsWith(W.url),p=e!=null&&e.sanitize?je(i):i,_=e!=null&&e.sanitize?Zn(s):s,h=e!=null&&e.sanitize?je(o):o;return It(ls(`
        <a
          href="${_}"
          target="_blank"
          class="${a?"image-link":"link"}"
          title="${h||(a?_:p)}"
          ${c?"":'rel="external nofollow noopener"'}
        >${p}</a>
      `))},t.image=({href:s,title:o,text:l})=>{const i=It(je(o||l)),a=It(je(l)),c=Zn(s),p=c.startsWith("http://")?St(c):c,_=e!=null&&e.imageSourceGetter?e.imageSourceGetter(p):p,h=typeof _=="object"?_.src:_,g=typeof _=="object"?_.sources:[];return ls(`
      <div class="figure-wrapper">
        <figure class="image ${a?"caption":""}" data-status="loading">
          <div class="placeholder error">
            <i class="iconfont icon-image-error"></i>
          </div>
          ${ii({class:"placeholder loading",width:"2rem",height:"1.2rem",gap:"0.62rem",radius:"1px"})}
          <picture>
            ${g.map(v=>`<source srcset="${v.srcset}" type="${v.type}" />`).join(`
`)}
            <img
              draggable="false"
              class="${e!=null&&e.lazyLoadImage?lo:""}"
              ${e!=null&&e.lazyLoadImage?`data-src="${h}"`:`src="${h}"`}
              ${a?`alt="${a}"`:""}
              ${i?`title="${i}"`:""}
              onload="this.parentElement.parentElement.dataset.status = 'loaded'"
              onerror="this.parentElement.parentElement.dataset.status = 'error'"
              onclick="window.$popup.vImage(this.currentSrc || this.src)"
            />
          </picture>
          ${a?`<figcaption>${a}</figcaption>`:""}
        </figure>
      </div>
    `)},t.code=function({text:s,lang:o,escaped:l}){var _;const i=(_=(o||"").match(/^\S*/))==null?void 0:_[0],a=s.replace(/\n$/,"")+`
`,c=a.split(`
`).map((h,g)=>`<li class="code-line-number">${g+1}</li>`.replace(/\s+/g," ")).join(""),p=['contenteditable="true"','oncut="return false"','onpaste="return false"','onkeydown="if(event.metaKey) return true; return false;"'].join(" ");return i?`
        <pre data-lang="${i}">
          <ul class="code-lines">${c}</ul>
          <code ${p} class="${ro}${je(i)}">${l?a:je(a)}
</code>
        </pre>

      `:`
        <pre>
          <ul class="code-lines">${c}</ul>
          <code ${p}>${l?a:je(a)}
</code>
        </pre>
      `},t},uo=(e,t)=>{if(!e||typeof e!="string")return"";const s={...t,sanitize:(t==null?void 0:t.sanitize)??!1,lazyLoadImage:(t==null?void 0:t.lazyLoadImage)??!0};return co.parse(e,{renderer:ri(s)})},po=(e,t)=>{const s=e.substring(0,t),o=s.lastIndexOf(`
##### `),l=s.lastIndexOf(`
#### `),i=s.lastIndexOf(`
### `),a=s.lastIndexOf(`


`);return Math.max(o,l,i,a)},Bt="/article",Hn=(e,t=8)=>re({once:!0,data:[],async fetcher(){const s={...e,per_page:t};return(await ie.get(Bt,{params:s})).result.data}}),ci=te("latestArticleList",()=>Hn({})),di=te("hottestArticleList",()=>Hn({sort:ot.Hottest})),ui=te("featuredArticleList",()=>Hn({featured:!0})),tn=te("articleList",()=>{const e=z(!1),t=K([]),s=K(null);return{fetch:async(l={})=>{const i=!l.page||l.page===1,a=!i&&l.page>1;i&&(t.value=[],s.value=null),e.value=!0;try{const c=ie.get(Bt,{params:l}),p=await(Wt?at(520,c):c);a?(t.value.push(...p.result.data),s.value=p.result.pagination):(t.value=p.result.data,s.value=p.result.pagination)}finally{e.value=!1}},fetching:e,pagination:s,data:t}}),is=(e,t)=>{const s=[];return{html:uo(e,{sanitize:!1,imageSourceGetter:t,headingIdentifierGetter:(l,i)=>{const a=xl(i),c=Vl(l,a);return s.push({level:l,text:i,id:c,anchor:a}),{id:c,anchor:a}}}),headings:s}},Bn=te("articleDetail",()=>{const e=z(!1),t=z(null),s=K(null),o=K(null),l=K([]),i=z(!0),a=A(()=>{var C;return((C=t.value)==null?void 0:C.content.length)||0}),c=A(()=>{const C=Math.round(a.value/400);return C<1?1:C}),p=A(()=>!!(t.value&&a.value>=es)),_=A(()=>!t.value||!p.value?null:po(t.value.content,Math.min(es,Math.floor(a.value/2)))),h=C=>{if(!Fe(C))return C;const R=qe(),P=rt(C);return Un(R,P)},g=A(()=>{if(!t.value)return null;const C=p.value?t.value.content.substring(0,_.value):t.value.content,{html:R,headings:P}=is(C,h);return{markdown:C,html:R,headings:P}}),v=A(()=>{if(!t.value||!p.value)return null;const C=t.value.content.substring(_.value),{html:R,headings:P}=is(C,h);return{markdown:C,html:R,headings:P}}),b=()=>{i.value=!0},y=async C=>{t.value=null;const R=ie.get(`${Bt}/${C}`),P=await at(580,R);t.value=P.result,i.value=!p.value},$=async C=>{s.value=null,o.value=null,l.value=[];const R=ie.get(`${Bt}/${C}/context`),P=await at(520,R);s.value=P.result.prev_article,o.value=P.result.next_article,l.value=P.result.related_articles};return{fetching:e,article:t,prevArticle:s,nextArticle:o,relatedArticles:l,defaultContent:g,moreContent:v,renderedFullContent:i,isLongContent:p,contentLength:a,readMinutes:c,splitIndex:_,renderFullContent:b,fetchCompleteArticle:C=>(e.value=!0,Promise.all([y(C),$(C)]).then(()=>{e.value=!1})),postArticleLike:C=>{const R=Ue();return ie.post("/vote/post",{post_id:C,vote:1,author:R.author}).then(P=>{t.value&&(t.value.meta.likes=P.result)})}}}),ve=e=>({hottestArticleList:di(e),featuredArticleList:ui(e),latestArticleList:ci(e),articleList:tn(e),articleDetail:Bn(e),announcement:bl(e),category:Ys(e),tag:Et(e),comment:In(e),archive:An(e),identity:Ue(e),adminInfo:Pn(e),appOption:Nn(e),wallpaper:Xt(e),githubSponsors:Vs(e),nodepressStatistic:Dn(e),githubStatistic:xs(e),npmStatistic:Ws(e),articleCalendar:Ll(e),instagramCalendar:Pl(e),githubCalendar:Nl(e),doubanMovies:Zs(e),twitterProfile:Js(e),twitterLatestTweets:Dl(e),instagramProfile:Gl(e),instagramLatestMedias:Qs(e),youtubePlayList:Xs(e)}),pi=e=>{const t=Ua(),s=()=>{const o=ve(t),l=[o.appOption.fetch(),o.category.fetch(),o.tag.fetch()];return e.globalState.userAgent.isMobile||l.push(o.featuredArticleList.fetch()),Promise.all(l)};return{get stores(){return ve(t)},state:t.state,install:t.install,serverPrefetch:s,hydrate(){const o=Lt("store");o?t.state.value=o:s()}}},_o=Symbol("i18n"),_i=e=>{const t=z(e.default),s=e.languages.map(p=>p.code),o=A(()=>e.languages.find(p=>p.code===t.value)),l=e.keys.reduce((p,_)=>({...p,[_]:e.languages.reduce((h,g)=>({...h,[g.code]:g.data[_]}),{})}),{}),i=p=>{s.includes(p)&&t.value!==p&&(t.value=p)},a=()=>{const p=s.findIndex(h=>h===t.value),_=p<s.length-1?p+1:0;p!==_&&i(s[_])},c=(p,_,...h)=>{var v;const g=(v=l[p])==null?void 0:v[_??t.value];if(g)return typeof g=="string"?g:g(...h)};return{language:Be(t),l:o,set:i,toggle:a,translate:c,t:c}},mi=e=>{const t=_i(e),s=I({name:"I18n",props:{k:[String,Number,Symbol]},render(){var o,l;if(this.$props.k)return t.t(this.$props.k,null,this.$attrs);{const i=t.language.value;return this.$attrs[i]||((l=(o=this.$slots)[i])==null?void 0:l.call(o))}}});return{...t,install(o){o.config.globalProperties.$i18n=t,o.provide(_o,t),o.component(s.name,s)}}},hi=()=>it(_o),gi=e=>`https://www.googletagmanager.com/gtag/js?id=${e}`,mo=(e,t={})=>new Promise((s,o)=>{const l=document.head||document.getElementsByTagName("head")[0],i=document.createElement("script"),{src:a,domain:c,type:p="text/javascript",defer:_=!1,async:h=!1,...g}=t;if(i.type=p,i.defer=_,i.async=h,i.src=a||e,Object.keys(g).forEach(v=>{i[v]=g[v]}),c){const v=document.createElement("link");v.href=c,v.rel="preconnect",l.appendChild(v)}l.appendChild(i),i.onload=s,i.onerror=o}),ho=Symbol("gtag"),fi=e=>{if(!e.id)return;const t=e.customResourceURL||gi(e.id),s=de({loaded:!1,disabled:!1});mo(t,{async:!0}).then(()=>{s.loaded=!0}),window.gtag==null&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config",e.id,e.config));const o=(...i)=>{var a;s.disabled||(a=window.gtag)==null||a.call(window,...i)};return e.router&&e.router.afterEach((i,a)=>{i.path!==a.path&&Me().then(()=>{const c=window.location.origin+i.fullPath;o("event","page_view",{page_title:document.title,page_location:c,page_path:i.fullPath,send_to:e.id})})}),{state:Be(s),enable:()=>{s.disabled=!1},disable:()=>{s.disabled=!0},set(i){o("set",i)},config(i){o("config",e.id,i)},event(i,a){o("event",i,a)}}},vi=()=>it(ho),un=(e,t)=>{if(un.installed)return;const s=fi(t);e.provide(ho,s),e.config.globalProperties.$gtag=s,un.installed=!0},yi={install:un};var mt=(e=>(e.Light="light",e.Dark="dark",e))(mt||{});const bi="(prefers-color-scheme: dark)",ki="(prefers-color-scheme: light)",rs="theme",go=Symbol("theme"),$i=["light","dark"],Ti=e=>{const t=z(e==="dark"?"dark":"light"),s=a=>{$i.includes(a)&&a!==t.value&&(t.value=a,Ha.set(rs,a),El.set(rs,a))},o=()=>s(t.value==="dark"?"light":"dark"),l=()=>{window.matchMedia(bi).addEventListener("change",({matches:a})=>a&&s("dark")),window.matchMedia(ki).addEventListener("change",({matches:a})=>a&&s("light"))},i={theme:Be(t),set:s,toggle:o,bindClientSystem:l};return{...i,install(a){a.provide(go,i)}}},Ei=()=>it(go),wi=()=>{const e=de({loaded:!1,tasks:[]}),t=l=>{window.setTimeout(l,666)},s=()=>{e.loaded=!0,e.tasks.forEach(l=>t(l))},o=l=>{e.tasks.push(l),e.loaded&&t(l)};return window.addEventListener("load",s),{state:e,addTask:o}},fo=Symbol("defer"),Si=()=>{const e=wi();return{...e,install(t,s){t.provide(fo,e),s!=null&&s.exportToGlobal&&(window.$defer=e)}}},Ci=()=>it(fo),vo=Symbol("popup"),nn=()=>it(vo),Ai=e=>{const t=nn();return Q(()=>t.$setRoot(e())),t},B=()=>{const e=Cs(),t=As(),s=hi(),o=Ei(),l=Zt(),i=Nn(),a=A(()=>i.adConfig),c=A(()=>l.userAgent.isMobile),p=A(()=>o.theme.value===mt.Dark),_=A(()=>s.language.value===j.Chinese);return{route:e,router:t,i18n:s,theme:o,head:yo,seoMeta:Oi,gState:l,cdnDomain:qe(),adConfig:a,isMobile:c,isDarkTheme:p,isZhLang:_,defer:Ci(),popup:nn(),gtag:vi()}},yo=e=>Ba(A(()=>typeof e=="function"?e():e)),Ii=e=>`${e} | ${W.title}`,cs=tt("/images/og-social-card.jpg");function Oi(e){const{i18n:t,route:s}=B(),o=A(()=>{const l=typeof e=="function"?e():e,{title:i,pageTitle:a,description:c,keywords:p,..._}=l,h=i??a,g=i||(a?Ii(a):"");return{pureTitle:h,fullTitle:g,description:c,keywords:p,_}});return yo({title:A(()=>o.value.fullTitle),meta:[{name:"description",content:()=>o.value.description??""},{name:"keywords",content:()=>o.value.keywords??""},{name:"twitter:site",content:`@${Ee.TWITTER_USER_NAME}`},{name:"twitter:creator",content:Ee.TWITTER_USER_NAME},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:image",content:()=>o.value._.ogImage??cs},{name:"twitter:title",content:()=>o.value._.ogTitle??o.value.fullTitle??""},{name:"twitter:description",content:()=>o.value._.ogDescription??o.value.description??""},{property:"og:site_name",content:()=>W.title},{property:"og:type",content:()=>o.value._.ogType??"object"},{property:"og:title",content:()=>o.value._.ogTitle??o.value.pureTitle??""},{property:"og:description",content:()=>o.value._.ogDescription??o.value.description??""},{property:"og:url",content:()=>o.value._.ogUrl??tt(s.fullPath)},{property:"og:image",content:()=>o.value._.ogImage??cs},{property:"og:image:alt",content:()=>o.value._.ogImageAlt??o.value._.ogTitle??o.value.fullTitle??""},{property:"og:image:width",content:()=>o.value._.ogImageWidth??(o.value._.ogImage?"":"1000")},{property:"og:image:height",content:()=>o.value._.ogImageHeight??(o.value._.ogImage?"":"526")},{property:"og:locale",content:()=>{var l;return((l=t.l.value)==null?void 0:l.iso)??""}}]})}const Mi="disabled-wallflower",pn="data-disabled-wallflower",Ri={mounted(e){e.setAttribute(pn,"true")},beforeUnmount(e){e.removeAttribute(pn)}},Li="production",Pi=e=>{const t=e.split("-");if(t.length!==3||!t.every(i=>Number.isInteger(Number(i))))return!1;const[s,o,l]=t;return!(s.length!==4||o.length!==2||l.length!==2)},zn={ease:[.25,.1,.25,1],linear:[0,0,1,1],easeIn:[.42,0,1,1],easeOut:[0,0,.58,1],easeInOut:[.42,0,.58,1]},ds=["scroll","mousedown","wheel","DOMMouseScroll","mousewheel","keyup","touchmove"],us={on(e,t,s){t.forEach(o=>{e.addEventListener(o,s,{passive:!0})})},off(e,t,s){t.forEach(o=>{e.removeEventListener(o,s)})}},Fn=e=>{const{target:t,onCancel:s,onDone:o}=e,l=e.offset??0,i=e.duration??500,a=e.easing??zn.ease,c=typeof t=="string"?document.querySelector(t):t,p=document.body;let _=!1;const h=()=>{_=!0};us.on(p,ds,h);const g=()=>{us.off(p,ds,h),_?s==null||s():o==null||o()},v=window.pageYOffset,b=v+c.getBoundingClientRect().top,$=(document.body.scrollHeight-b<window.innerHeight?document.body.scrollHeight-window.innerHeight:b)+l-v;if(!$)return;const T=Reflect.apply(Qn,Qn,a);let E;window.requestAnimationFrame(function C(R){if(_)return g();E||(E=R);const P=R-E;let M=Math.min(P/i,1);M=T(M),window.scrollTo(0,v+$*M),P<i?window.requestAnimationFrame(C):g()})},He=(e,t)=>{const s=document.getElementById(e);s&&Fn({target:s,duration:200,offset:t??-74})},_n=()=>{Fn({target:document.body,duration:280,offset:0,easing:zn.ease})},Ke=()=>{Me(()=>{Fn({target:document.body,offset:window.scrollY+window.innerHeight*.68,duration:300,easing:zn.easeIn})})},Ni={key:0,class:"loading-wrapper"},Di={key:1,class:"normal-wrapper"},Gi={key:2,class:"finished-wrapper"},Ui=I({__name:"loadmore",props:{loading:{type:Boolean},finished:{type:Boolean}},setup(e,{emit:t}){const s=e,o=t,l=z(null),i=z(null),a=()=>{!s.loading&&!s.finished&&o("loadmore")};return Q(()=>{l.value&&(i.value=new IntersectionObserver(c=>{c[0].isIntersecting&&a()},{threshold:.1}),i.value.observe(l.value))}),et(()=>{l.value&&i.value&&(i.value.unobserve(l.value),i.value.disconnect())}),(c,p)=>(u(),m("div",{class:"loadmore",ref_key:"element",ref:l},[c.loading?(u(),m("div",Ni,[Z(c.$slots,"loading",{},void 0,!0)])):c.finished?(u(),m("div",Gi,[Z(c.$slots,"finished",{},void 0,!0)])):(u(),m("div",Di,[Z(c.$slots,"normal",{},void 0,!0)]))],512))}}),D=(e,t)=>{const s=e.__vccOpts||e;for(const[o,l]of t)s[o]=l;return s},bo=D(Ui,[["__scopeId","data-v-0b51c26c"]]),qn={zh:{[j.Chinese]:"中文",[j.English]:"ZH"},en:{[j.Chinese]:"英文",[j.English]:"EN"},mix:{[j.Chinese]:"多语",[j.English]:"MIX"}},Yn=e=>`/tag/${e}`,ht=e=>`/category/${e}`,ko=e=>`/date/${e}`,Oe=e=>`/article/${e}`,Ae=e=>`/${e}`,Hi=e=>e===ne.Article,mn=e=>e===ne.SearchFlow,sn=(e,t)=>{const s=t.resize?`resize:fill:${t.width||""}:${t.height||""}:0`:"",o=t.watermark?`/${t.watermark}`:"",l=t.format?`@${t.format}`:"";return`/${s}${o}/plain${wt(e)}${l}`.replaceAll("//","/")},Bi={scrollbars:0,status:0,menubar:0,resizable:2,location:0},zi=(e={})=>Object.keys(e).map(t=>`${t}=${e[t]}`).join(","),$o=(e,t={})=>{const{name:s="",closeInterval:o=268,onClose:l,params:i={}}=t,a=Math.round(screen.availWidth/6*2),c=Math.round(screen.availHeight/5*2),p=Math.round((screen.availHeight-c)/2),_=Math.round((screen.availWidth-a)/2),g=zi({...Bi,...{width:a,height:c,top:p,left:_},...i}),v=window.open(e,s,g);if(v){if(l){const b=setInterval(()=>{v.closed&&(clearInterval(b),l())},o)}return v==null||v.focus(),v}},jn=(e,t)=>window.open(e,t),Fi={class:"thumbnail"},qi={key:0,class:"featured"},Yi={class:"picture"},ji=["srcset"],Vi=["srcset"],xi=["src","alt","title"],Wi={class:"content"},Zi={class:"body"},Ji={class:"title"},Qi={class:"language"},Xi=["innerHTML"],Ki={class:"meta"},er={class:"date","data-allow-mismatch":""},tr={class:"views"},nr={class:"comments"},sr={class:"likes"},or=I({__name:"item",props:{article:{}},setup(e){const t=e,{router:s,cdnDomain:o,gState:l}=B(),i=Ue(),a=A(()=>i.isLikedPage(t.article.id)),c=A(()=>Rn(t.article.origin)),p=A(()=>Ln(t.article.origin)),_=A(()=>Mn(t.article.origin)),h=()=>{l.userAgent.isWechat?s.push(Oe(t.article.id)):jn(Oe(t.article.id))},g=(v,b)=>Fe(v)?en(o,sn(rt(v),{resize:!0,width:700,height:247,watermark:"watermark:0.38:sowe:18:16:0.16",format:b})):v;return(v,b)=>{const y=w("i18n"),$=w("router-link"),T=w("udate");return u(),m("div",{class:"article-item",onClick:h},[n("div",Fi,[n("span",{class:N(["oirigin",{original:_.value,reprint:p.value,hybrid:c.value}])},[_.value?(u(),G(y,{key:0,k:r(k).ORIGIN_ORIGINAL},null,8,["k"])):p.value?(u(),G(y,{key:1,k:r(k).ORIGIN_REPRINT},null,8,["k"])):c.value?(u(),G(y,{key:2,k:r(k).ORIGIN_HYBRID},null,8,["k"])):O("",!0)],2),v.article.featured?(u(),m("span",qi,[d(y,{k:r(k).ARTICLE_FEATURED},null,8,["k"])])):O("",!0),n("picture",Yi,[r(Fe)(v.article.thumbnail)?(u(),m(L,{key:0},[n("source",{srcset:g(v.article.thumbnail,"avif"),type:"image/avif"},null,8,ji),n("source",{srcset:g(v.article.thumbnail,"webp"),type:"image/webp"},null,8,Vi)],64)):O("",!0),n("img",{class:"image",loading:"lazy",draggable:"false",src:g(v.article.thumbnail),alt:v.article.title,title:v.article.title},null,8,xi)])]),n("div",Wi,[n("div",Zi,[n("h4",Ji,[d($,{class:"link",title:v.article.title,to:r(Oe)(v.article.id)},{default:f(()=>[U(S(v.article.title),1)]),_:1},8,["title","to"]),n("span",Qi,[d(y,ze(Ve(r(qn)[v.article.lang])),null,16)])]),n("p",{class:"description",style:{"-webkit-box-orient":"vertical"},innerHTML:v.article.description},null,8,Xi)]),n("div",Ki,[n("span",er,[b[0]||(b[0]=n("i",{class:"iconfont icon-clock"},null,-1)),d(T,{to:"ago",date:v.article.created_at},null,8,["date"])]),n("span",tr,[b[1]||(b[1]=n("i",{class:"iconfont icon-eye"},null,-1)),n("span",null,S(r(me)(v.article.meta.views)),1)]),n("span",nr,[b[2]||(b[2]=n("i",{class:"iconfont icon-comment"},null,-1)),n("span",null,S(v.article.meta.comments),1)]),n("span",sr,[n("i",{class:N(["iconfont icon-like",{liked:a.value}])},null,2),n("span",null,S(v.article.meta.likes),1)])])])])}}}),ar=D(or,[["__scopeId","data-v-7e969864"]]),lr={class:"articles"},ir={key:0,class:"header"},rr={class:"content"},cr={key:1},dr={key:1},ur={class:"skeletons",key:"skeleton"},pr={class:"thumbnail"},_r={class:"content"},mr={class:"title"},hr={class:"description"},gr={class:"finished"},fr=I({__name:"index",props:{tagSlug:{},categorySlug:{},searchKeyword:{},date:{}},setup(e){const t=e,{i18n:s,seoMeta:o,isZhLang:l}=B(),i=Et(),a=Ys(),c=tn(),p=Nn(),_=A(()=>t.categorySlug?a.data.find(y=>y.slug===t.categorySlug):null),h=A(()=>t.tagSlug?i.data.find(y=>y.slug===t.tagSlug):null),g=A(()=>{const y=c.pagination;return y?y.current_page<y.total_page:!1});o(()=>{var $;const y=Object.values(t).filter(Boolean).map(T=>Te(T));return y.length?{pageTitle:y.join(" | ")}:{title:`${W.title} - ${s.t(k.APP_SLOGAN)}`,description:l.value?W.zh_description:W.en_description,keywords:($=p.data)==null?void 0:$.keywords.join(","),ogType:"website"}});const v=(y={})=>c.fetch({category_slug:t.categorySlug,tag_slug:t.tagSlug,date:t.date,keyword:t.searchKeyword,...y}),b=()=>{v({page:c.pagination.current_page+1}).then(()=>{Jt(Ke)})};return $e(()=>{he(()=>t,()=>v(),{flush:"post",deep:!0})}),Se(()=>v()),(y,$)=>{const T=w("i18n"),E=w("router-link"),C=w("skeleton-base"),R=w("skeleton-line"),P=w("empty"),M=w("loading-indicator"),X=w("placeholder");return u(),m("div",lr,[y.tagSlug||y.categorySlug||y.date||y.searchKeyword?(u(),m("div",ir,[n("div",rr,[y.categorySlug?(u(),m(L,{key:0},[_.value?(u(),G(T,{key:0},{zh:f(()=>[U("分类 “"+S(_.value.name)+"” 的过滤结果",1)]),en:f(()=>[U('Category "'+S(r(Te)(_.value.slug))+`" 's result`,1)]),_:1})):(u(),m("span",cr,S(y.categorySlug),1))],64)):O("",!0),y.tagSlug?(u(),m(L,{key:1},[h.value?(u(),G(T,{key:0},{zh:f(()=>[U("标签 “"+S(h.value.name)+"” 的过滤结果",1)]),en:f(()=>[U('Tag "'+S(r(Xe)(h.value))+`" 's result`,1)]),_:1})):(u(),m("span",dr,S(y.tagSlug),1))],64)):O("",!0),y.date?(u(),G(T,{key:2},{zh:f(()=>[U("日期 “"+S(y.date)+"” 的过滤结果",1)]),en:f(()=>[U('Date "'+S(y.date)+`" 's result`,1)]),_:1})):O("",!0),y.searchKeyword?(u(),G(T,{key:3},{zh:f(()=>[U("关键词 “"+S(y.searchKeyword)+"” 的过滤结果",1)]),en:f(()=>[U('Search keyword "'+S(y.searchKeyword)+`" 's result`,1)]),_:1})):O("",!0)]),d(E,{to:"/",class:"close"},{default:f(()=>$[0]||($[0]=[n("i",{class:"iconfont icon-cancel"},null,-1)])),_:1})])):O("",!0),d(X,{data:r(c).data.length,loading:!r(c).data.length&&r(c).fetching},{loading:f(()=>[n("ul",ur,[(u(),m(L,null,F(3,ce=>n("li",{key:ce,class:"item"},[n("div",pr,[d(C)]),n("div",_r,[n("div",mr,[d(R)]),n("div",hr,[d(R)])])])),64))])]),placeholder:f(()=>[d(P,{bold:"","i18n-key":r(k).ARTICLE_PLACEHOLDER},null,8,["i18n-key"])]),default:f(()=>[n("div",null,[d(bn,{key:"list",name:"list-fade",tag:"div",class:"list"},{default:f(()=>[(u(!0),m(L,null,F(r(c).data,(ce,q)=>(u(),G(ar,{class:"list-item",article:ce,key:q},null,8,["article"]))),128))]),_:1}),d(bo,{class:"loadmore",loading:r(c).fetching,finished:!g.value,onLoadmore:b},{normal:f(()=>[n("button",{class:"normal",onClick:b},$[1]||($[1]=[n("i",{class:"iconfont icon-loadmore"},null,-1)]))]),loading:f(()=>[d(M,{class:"loading",width:"2rem",height:"1.2rem",gap:"0.68rem"})]),finished:f(()=>[n("span",gr,[d(T,{k:r(k).LIST_NO_MORE_DATA},null,8,["k"])])]),_:1},8,["loading","finished"])])]),_:1},8,["data","loading"])])}}}),yt=D(fr,[["__scopeId","data-v-1d1c1349"]]),vr={class:"article-item"},yr={class:"item-content"},br=["title"],kr={class:"picture"},$r=["srcset"],Tr=["srcset"],Er=["alt","title","src"],wr={class:"item-body"},Sr={class:"item-content"},Cr={class:"title"},Ar={class:"language"},Ir=["innerHTML"],Or={class:"item-meta"},Mr={class:"date","data-allow-mismatch":""},Rr={class:"views"},Lr={class:"comments"},Pr={class:"likes"},Nr={class:"categories"},Dr=I({__name:"item",props:{article:{}},setup(e){const t=e,{i18n:s,cdnDomain:o,isZhLang:l}=B(),i=Ue(),a=A(()=>i.isLikedPage(t.article.id)),c=A(()=>Rn(t.article.origin)),p=A(()=>Ln(t.article.origin)),_=A(()=>Mn(t.article.origin)),h=K(null),g=K(null),v=()=>{var $;g.value=(($=h.value)==null?void 0:$.currentSrc)??null},b=$=>{const T=qn[$];return l.value?T.zh:T.en},y=($,T)=>Fe($)?en(o,sn(rt($),{resize:!0,width:350,height:238,format:T})):$;return Q(()=>{var $;($=h.value)!=null&&$.complete&&v()}),($,T)=>{const E=w("i18n"),C=w("router-link"),R=w("udate"),P=w("placeholder");return u(),m("div",vr,[n("div",{class:"item-background",style:se({backgroundImage:g.value?`url('${g.value}')`:"none"})},null,4),n("div",yr,[d(C,{class:"item-thumbnail",to:r(Oe)($.article.id)},{default:f(()=>[n("span",{class:N(["item-oirigin",{original:_.value,hybrid:c.value,reprint:p.value}])},[_.value?(u(),G(E,{key:0,k:r(k).ORIGIN_ORIGINAL},null,8,["k"])):p.value?(u(),G(E,{key:1,k:r(k).ORIGIN_REPRINT},null,8,["k"])):c.value?(u(),G(E,{key:2,k:r(k).ORIGIN_HYBRID},null,8,["k"])):O("",!0)],2),$.article.featured?(u(),m("span",{key:0,class:"item-featured",title:r(s).t(r(k).ARTICLE_FEATURED)},T[0]||(T[0]=[n("i",{class:"iconfont icon-windmill"},null,-1)]),8,br)):O("",!0),n("picture",kr,[r(Fe)($.article.thumbnail)?(u(),m(L,{key:0},[n("source",{srcset:y($.article.thumbnail,"avif"),type:"image/avif"},null,8,$r),n("source",{srcset:y($.article.thumbnail,"webp"),type:"image/webp"},null,8,Tr)],64)):O("",!0),n("img",{class:"image",loading:"lazy",draggable:"false",ref_key:"imageRef",ref:h,alt:$.article.title,title:$.article.title,src:y($.article.thumbnail),onLoad:v},null,40,Er)])]),_:1},8,["to"]),n("div",wr,[n("div",Sr,[n("h5",Cr,[d(C,{class:"link",to:r(Oe)($.article.id),title:$.article.title},{default:f(()=>[U(S($.article.title),1)]),_:1},8,["to","title"]),n("span",Ar,S(b($.article.lang)),1)]),n("p",{class:"description",style:{"-webkit-box-orient":"vertical"},innerHTML:$.article.description},null,8,Ir)]),n("div",Or,[n("span",Mr,[T[1]||(T[1]=n("i",{class:"iconfont icon-clock"},null,-1)),d(R,{to:"ago",date:$.article.created_at},null,8,["date"])]),n("span",Rr,[T[2]||(T[2]=n("i",{class:"iconfont icon-eye"},null,-1)),n("span",null,S(r(me)($.article.meta.views)),1)]),n("span",Lr,[T[3]||(T[3]=n("i",{class:"iconfont icon-comment"},null,-1)),n("span",null,S($.article.meta.comments),1)]),n("span",Pr,[n("i",{class:N(["iconfont icon-like",{liked:a.value}])},null,2),n("span",null,S($.article.meta.likes),1)]),n("span",Nr,[T[4]||(T[4]=n("i",{class:"iconfont icon-category"},null,-1)),d(P,{transition:!1,data:$.article.categories.length},{placeholder:f(()=>[d(E,{k:r(k).EMPTY_PLACEHOLDER},null,8,["k"])]),default:f(()=>[(u(!0),m(L,null,F($.article.categories.slice(0,1),(M,X)=>(u(),G(C,{key:X,to:r(ht)(M.slug)},{default:f(()=>[d(E,{zh:M.name,en:M.slug},null,8,["zh","en"])]),_:2},1032,["to"]))),128))]),_:1},8,["data"])])])])])])}}}),Gr=D(Dr,[["__scopeId","data-v-1eacd051"]]),Ur={class:"articles"},Hr={class:"article-list"},Br={class:"article-list-skeleton",key:"skeleton"},zr={class:"thumbnail"},Fr={class:"content"},qr={class:"title"},Yr={class:"description"},jr={key:"list"},Vr=["disabled"],xr={class:"content"},Wr={class:"left"},Zr={class:"right"},Jr={key:0,class:"iconfont icon-loadmore"},Qr={key:1,class:"iconfont icon-stop"},Xr=I({__name:"list",props:{articles:{},pagination:{},fetching:{type:Boolean},mammon:{type:Boolean,default:!0}},setup(e,{emit:t}){const s=e,o=t,{isDarkTheme:l,isZhLang:i}=B(),a=A(()=>s.pagination?s.pagination.current_page<s.pagination.total_page:!1),c=()=>{o("loadmore")};return(p,_)=>{var E;const h=w("skeleton-base"),g=w("skeleton-line"),v=w("empty"),b=w("Adsense"),y=w("client-only"),$=w("placeholder"),T=w("i18n");return u(),m("div",Ur,[n("div",Hr,[d($,{data:p.articles.length,loading:!p.articles.length&&p.fetching},{loading:f(()=>[n("ul",Br,[(u(),m(L,null,F(6,C=>n("li",{key:C,class:"item"},[n("div",zr,[d(h)]),n("div",Fr,[n("div",qr,[d(g)]),n("div",Yr,[(u(),m(L,null,F(2,R=>n("div",{class:"line-item",key:R},[d(g)])),64))]),d(g,{class:"meta"})])])),64))])]),placeholder:f(()=>[d(v,{class:"empty",bold:"",size:"large","i18n-key":r(k).ARTICLE_PLACEHOLDER},null,8,["i18n-key"])]),default:f(()=>[n("div",jr,[d(y,null,{default:f(()=>[p.mammon?(u(),m(L,{key:0},[r(l)?(u(),G(b,{key:0,"ins-class":"mammon-ins","data-ad-format":"fluid","data-ad-layout-key":"-hj-9+3a-97+6s","data-ad-slot":"1765379407",class:"article-list-mammon"})):(u(),G(b,{key:1,"ins-class":"mammon-ins","data-ad-format":"fluid","data-ad-layout-key":"-hj-9+3a-97+6s","data-ad-slot":"1148538406",class:"article-list-mammon"}))],64)):O("",!0)]),_:1}),d(bn,{name:"list-fade"},{default:f(()=>[(u(!0),m(L,null,F(p.articles,C=>(u(),G(Gr,{class:"list-item",key:C.id,article:C},null,8,["article"]))),128))]),_:1})])]),_:1},8,["data","loading"])]),n("button",{class:"article-load",disabled:p.fetching||!a.value,onClick:c},[_[0]||(_[0]=n("div",{class:"background"},[n("span",{class:"left"}),n("span",{class:"right"})],-1)),n("div",xr,[n("span",Wr,[p.fetching?(u(),m(L,{key:0},[U("•••")],64)):(u(),m(L,{key:1},[U(S(p.articles.length)+" / "+S((E=p.pagination)==null?void 0:E.total),1)],64))]),n("span",Zr,[n("span",{class:N(["text",{zh:r(i)}])},[p.fetching?(u(),G(T,{key:0,k:r(k).ARTICLE_LIST_LOADING},null,8,["k"])):a.value?(u(),G(T,{key:1,k:r(k).ARTICLE_LIST_LOADMORE},null,8,["k"])):(u(),G(T,{key:2,k:r(k).LIST_NO_MORE_DATA},null,8,["k"]))],2),p.fetching||a.value?(u(),m("i",Jr)):(u(),m("i",Qr))])])],8,Vr)])}}}),Ct=D(Xr,[["__scopeId","data-v-6e1262bf"]]);Ca.use([Aa,Jn,Jn,Ia,Oa]);const Kr={class:"carrousel"},ec={class:"article-skeleton",key:"skeleton"},tc={class:"title"},nc={class:"content"},sc={class:"first"},oc={class:"content"},ac={class:"picture"},lc=["srcset"],ic=["srcset"],rc=["alt","src"],cc=["title"],dc={class:"prospect"},uc={class:"text"},pc={key:0,class:"subscript"},_c={class:"swiper-pagination"},mc=["aria-label","onClick"],ps=0,hc=I({__name:"carrousel",props:{articles:{},fetching:{type:Boolean},count:{default:9}},setup(e){const t=e,{i18n:s,adConfig:o,cdnDomain:l,isDarkTheme:i}=B(),a=(b,y)=>Fe(b)?en(l,sn(rt(b),{resize:!0,width:1190,height:420,watermark:"watermark:0.36:sowe:18:18:0.15",format:y})):b,c=K(),p=K(ps),_=b=>{c.value=b},h=b=>{c.value&&c.value.slideToLoop(b)},g=()=>{c.value&&(p.value=c.value.realIndex)},v=A(()=>{const b=t.articles.slice(0,t.count).map(y=>({title:y.title,route:Oe(y.id),image:y.thumbnail||ke(l,"/images/thumbnail/carrousel.jpg"),subscript:y.featured?s.t(k.ARTICLE_FEATURED):Ge}));if(!b.length)return[];if(o.value.PC_CARROUSEL){const y=o.value.PC_CARROUSEL;b.splice(y.index,0,{title:y.title,image:y.src,route:y.url,subscript:s.t(k.AD)})}return b});return(b,y)=>{const $=w("i18n"),T=w("empty"),E=w("skeleton-line"),C=w("ulink"),R=w("client-only"),P=w("placeholder");return u(),m("div",Kr,[d(P,{data:v.value.length,loading:b.fetching},{placeholder:f(()=>[d(T,{class:"article-empty",bold:"",key:"empty"},{default:f(()=>[d($,{k:r(k).ARTICLE_PLACEHOLDER},null,8,["k"])]),_:1})]),loading:f(()=>[n("div",ec,[n("div",tc,[d(E)]),n("div",nc,[n("div",sc,[d(E)]),(u(),m(L,null,F(3,M=>n("div",{class:"line",key:M},[d(E,{class:"line-item"})])),64))])])]),default:f(()=>[d(r(jt),{class:"swiper",autoplay:{delay:3500,disableOnInteraction:!1},style:{"--slide-delay":"3500ms"},loop:!0,"set-wrapper-size":!0,mousewheel:!0,"observe-parents":!0,"grab-cursor":!1,"simulate-touch":!1,"initial-slide":ps,onSlideChange:g,onSwiper:_},{"container-end":f(()=>[d(R,null,{default:f(()=>[n("div",_c,[(u(!0),m(L,null,F(v.value.slice(0,9),(M,X)=>(u(),m("div",{key:X,"aria-label":`Go to article ${M.title}`,class:N([{active:X===p.value},"swiper-pagination-bullet"]),role:"button",onClick:ce=>h(X)},y[1]||(y[1]=[n("span",{class:"bullet-progress"},null,-1)]),10,mc))),128))])]),_:1})]),default:f(()=>[(u(!0),m(L,null,F(v.value.slice(0,9),(M,X)=>(u(),G(r(Vt),{key:X},{default:f(()=>[n("div",oc,[d(C,{class:"link",href:M.url,to:M.route},{default:f(()=>[n("picture",ac,[r(Fe)(M.image)?(u(),m(L,{key:0},[n("source",{srcset:a(M.image,"avif"),type:"image/avif"},null,8,lc),n("source",{srcset:a(M.image,"webp"),type:"image/webp"},null,8,ic)],64)):O("",!0),n("img",{class:"image",draggable:"false",alt:M.title,src:a(M.image)},null,8,rc)]),n("div",{class:N(["title",{dark:r(i)}]),title:M.title},[y[0]||(y[0]=n("div",{class:"background"},null,-1)),n("div",dc,[n("span",uc,S(M.title),1)])],10,cc),M.subscript?(u(),m("span",pc,S(M.subscript),1)):O("",!0)]),_:2},1032,["href","to"])])]),_:2},1024))),128))]),_:1})]),_:1},8,["data","loading"])])}}}),gc=D(hc,[["__scopeId","data-v-a0de7125"]]);var J=(e=>(e.Comment="comment",e.Share="share",e.Widget="widget",e.Universal="global",e.Article="page_article",e.Index="page_index",e.App="page_app",e.About="page_about",e.YouTube="page_youtube",e.Photography="page_photography",e))(J||{});const fc=e=>e.media_type==="IMAGE",Ye=e=>e.media_type==="VIDEO",zt=e=>e.media_type==="CAROUSEL_ALBUM",To=e=>Ye(e)?e.thumbnail_url:e.media_url,vc=(e,t)=>`${e.permalink}media/?size=${t}`,Eo=e=>`https://www.youtube.com/playlist?list=${e}`,yc=(e,t)=>{const s=t?`?list=${t}`:"";return`https://www.youtube.com/embed/${e}${s}`},_s=(e,t)=>`https://twitter.com/${e}/status/${t}`,bc=e=>`https://music.163.com/#/song?id=${e}`,kc={class:"twitter"},$c={class:"twitter-skeleton",key:"skeleton"},Tc={class:"left"},Ec={class:"right"},wc={class:"twitter-content",key:"content"},Sc=["title"],Cc={class:"count"},Ac={class:"title"},Ic={class:"secondary"},Oc={class:"tweets"},Mc={class:"content"},Rc=["innerHTML","title"],Lc={key:0,class:"iconfont media icon-video"},Pc={key:1,class:"iconfont media icon-image"},Nc={class:"count"},Dc={class:"meta"},Gc={key:0,class:"iconfont icon-retweet"},Uc={key:1,class:"iconfont icon-follow-up"},Hc={key:2,class:"iconfont twitter icon-twitter-x"},Bc={key:0,class:"item replies"},zc={key:1,class:"item likes"},Fc={key:2,class:"item date","data-allow-mismatch":""},qc=["title"],Yc={class:"navigation"},jc=["disabled"],Vc=["disabled"],xc=I({__name:"twitter",props:{profile:{},tweets:{},fetching:{type:Boolean}},setup(e){const{gtag:t}=B(),s=K(),o=()=>{var _;return(_=s.value)==null?void 0:_.slidePrev()},l=()=>{var _;return(_=s.value)==null?void 0:_.slideNext()},i=_=>{s.value=_},a=z(0),c=()=>{var _;a.value=((_=s.value)==null?void 0:_.activeIndex)||0},p=_=>{t==null||t.event(_,{event_category:J.Index})};return(_,h)=>{const g=w("empty"),v=w("skeleton-line"),b=w("uimage"),y=w("ulink"),$=w("i18n"),T=w("udate"),E=w("placeholder");return u(),m("div",kc,[d(E,{data:_.profile??void 0,loading:_.fetching},{placeholder:f(()=>[d(g,{class:"twitter-empty",bold:"",key:"empty"})]),loading:f(()=>[n("div",$c,[n("div",Tc,[d(v)]),n("div",Ec,[d(v)])])]),default:f(()=>[n("div",wc,[_.profile?(u(),m("div",{key:0,class:"profile",title:_.profile.name},[d(y,{class:"link",href:r(V).TWITTER,onMousedown:h[0]||(h[0]=C=>p("twitter_homepage"))},{default:f(()=>[d(b,{class:"avatar",proxy:"",src:_.profile.avatar},null,8,["src"]),h[3]||(h[3]=n("span",{class:"logo"},[n("i",{class:"iconfont icon-twitter-x"})],-1))]),_:1},8,["href"]),n("div",Cc,[n("p",Ac,[_.profile.tweetCount?(u(),m(L,{key:0},[U(S(r(Cl)(r(me)(_.profile.tweetCount),3,"0")),1)],64)):(u(),G($,{key:1,en:"Latest",zh:"碎碎"}))]),n("p",Ic,[d($,{en:"tweets",zh:_.profile.tweetCount?"碎碎念":"念念"},null,8,["zh"])])])],8,Sc)):O("",!0),n("div",Oc,[_.tweets.length?(u(),G(r(jt),{key:1,class:"tweets-swiper",direction:"vertical",height:66,mousewheel:!0,"allow-touch-move":!1,"slides-per-view":1,"prevent-clicks":!1,autoplay:{delay:3500,disableOnInteraction:!1},onTransitionStart:c,onSwiper:i},{default:f(()=>[(u(!0),m(L,null,F(_.tweets,(C,R)=>(u(),G(r(Vt),{class:"tweet-item",key:R},{default:f(()=>[n("div",Mc,[C.text?(u(),m("div",{key:0,innerHTML:r(Sl)(C.html),title:C.text,class:N(["main",{"has-media":C.mediaCount}])},null,10,Rc)):O("",!0),C.mediaCount?(u(),G(y,{key:1,class:N(["medias",{empty:!C.text}]),href:r(_s)(C.owner,C.id),onMousedown:h[1]||(h[1]=P=>p("twitter_image_link"))},{default:f(()=>[C.hasVideo?(u(),m("i",Lc)):C.hasImage?(u(),m("i",Pc)):O("",!0),n("span",Nc,"["+S(C.mediaCount)+"]",1),h[4]||(h[4]=n("i",{class:"iconfont window icon-new-window-s"},null,-1))]),_:2},1032,["class","href"])):O("",!0)]),n("div",Dc,[d(y,{class:"item link",title:"To Tweet",href:r(_s)(C.owner,C.id),onMousedown:h[2]||(h[2]=P=>p("twitter_detail_link"))},{default:f(()=>[C.isQuote||C.isRetweet?(u(),m("i",Gc)):C.isReply?(u(),m("i",Uc)):(u(),m("i",Hc)),h[5]||(h[5]=n("span",null,"Tweet",-1)),h[6]||(h[6]=n("i",{class:"iconfont window icon-new-window-s"},null,-1))]),_:2},1032,["href"]),Number.isInteger(C.commentCount)?(u(),m("span",Bc,[h[7]||(h[7]=n("i",{class:"iconfont icon-comment"},null,-1)),n("span",null,S(C.commentCount),1)])):O("",!0),Number.isInteger(C.favoriteCount)?(u(),m("span",zc,[h[8]||(h[8]=n("i",{class:"iconfont icon-heart"},null,-1)),n("span",null,S(C.favoriteCount),1)])):O("",!0),C.date?(u(),m("span",Fc,[h[9]||(h[9]=n("i",{class:"iconfont icon-clock"},null,-1)),d(T,{to:"ago",date:C.date},null,8,["date"])])):O("",!0),C.location?(u(),m("span",{key:3,class:"item location",title:C.location},[h[10]||(h[10]=n("i",{class:"iconfont icon-location"},null,-1)),n("span",null,S(C.location),1)],8,qc)):O("",!0)])]),_:2},1024))),128))]),_:1})):(u(),G(g,{class:"tweets-empty",bold:"",key:"empty"}))]),n("div",Yc,[n("button",{class:"button prev",disabled:!_.tweets.length||a.value===0,onClick:o},h[11]||(h[11]=[n("i",{class:"iconfont icon-totop"},null,-1)]),8,jc),n("button",{class:"button next",disabled:!_.tweets.length||a.value===_.tweets.length-1,onClick:l},h[12]||(h[12]=[n("i",{class:"iconfont icon-tobottom"},null,-1)]),8,Vc)])])]),_:1},8,["data","loading"])])}}}),Wc=D(xc,[["__scopeId","data-v-66c397d6"]]),Zc={class:"index-page"},Jc=I({__name:"index",setup(e){const{seoMeta:t,i18n:s,isZhLang:o}=B(),{appOption:l,twitterProfile:i,twitterLatestTweets:a,articleList:c}=ve(),p=async()=>{const _=c.pagination.current_page+1;await c.fetch({page:_}),_>1&&Jt(Ke)};return t(()=>{var _;return{title:`${W.title} - ${s.t(k.APP_SLOGAN).replaceAll("，"," ")}`,description:o.value?W.zh_description:W.en_description,keywords:(_=l.data)==null?void 0:_.keywords.join(",")}}),Se(()=>Promise.all([c.fetch(),i.fetch().catch(()=>{}),a.fetch().catch(()=>{})])),(_,h)=>{var g;return u(),m("div",Zc,[d(gc,{class:"carrousel",articles:r(c).data,fetching:r(c).fetching},null,8,["articles","fetching"]),d(Wc,{class:"twitter",profile:r(i).data,tweets:((g=r(a).data)==null?void 0:g.data)??[],fetching:r(a).fetching||r(i).fetching||r(c).fetching},null,8,["profile","tweets","fetching"]),d(Ct,{mammon:!1,fetching:r(c).fetching,articles:r(c).data,pagination:r(c).pagination,onLoadmore:p},null,8,["fetching","articles","pagination"])])}}}),Qc=D(Jc,[["__scopeId","data-v-cedfd903"]]),Xc={class:"header"},Kc={class:"content"},ed={class:"logo"},td={class:"title"},nd={class:"text"},sd=I({__name:"header",props:{icon:{},backgroundColor:{},backgroundImage:{}},setup(e){const t=qe(),s=ke(t,"/images/thumbnail/carrousel.jpg");return(o,l)=>(u(),m("div",Xc,[n("div",{class:"background",style:se({backgroundColor:o.backgroundColor,backgroundImage:`url(${o.backgroundImage??r(s)})`})},null,4),n("div",Kc,[n("div",ed,[n("i",{key:"date",class:N(["iconfont",o.icon])},null,2)]),n("div",td,[n("div",nd,[Z(o.$slots,"default",{},void 0,!0)])])])]))}}),on=D(sd,[["__scopeId","data-v-822ff77c"]]),od={class:"category-flow-page"},ad=I({__name:"category",props:{categorySlug:{}},setup(e){const t=e,{i18n:s,seoMeta:o,cdnDomain:l,isZhLang:i}=B(),{articleList:a,category:c}=ve(),p=A(()=>c.data.find(b=>b.slug===t.categorySlug)),_=A(()=>{var b;return Ne(((b=p.value)==null?void 0:b.extends)||[],"icon")||"icon-category"}),h=A(()=>{var b;return Ne(((b=p.value)==null?void 0:b.extends)||[],"bgcolor")}),g=A(()=>{var y;const b=Ne(((y=p.value)==null?void 0:y.extends)||[],"background");return Fe(b)?Un(l,rt(b)):b}),v=async()=>{await a.fetch({category_slug:t.categorySlug,page:a.pagination.current_page+1}),Ke()};return o(()=>{var E;const b=Te(t.categorySlug),y=s.t(t.categorySlug),$=i.value?[y,b]:[b],T=((E=p.value)==null?void 0:E.description)||$.join(",");return{pageTitle:$.join(" | "),description:T,ogType:"website"}}),$e(()=>{he(()=>t.categorySlug,b=>a.fetch({category_slug:b}),{flush:"post"})}),Se(()=>a.fetch({category_slug:t.categorySlug})),(b,y)=>{const $=w("divider"),T=w("i18n");return u(),m("div",od,[d(on,{"background-color":h.value,"background-image":g.value,icon:_.value},{default:f(()=>[p.value?(u(),G(T,{key:0},{zh:f(()=>[n("span",null,S(p.value.name),1),d($,{class:"divider",type:"vertical"}),n("span",null,S(p.value.description||"..."),1)]),en:f(()=>[y[0]||(y[0]=n("span",null,"Category",-1)),d($,{class:"divider",type:"vertical"}),n("span",null,S(r(Te)(p.value.slug)),1)]),_:1})):O("",!0)]),_:1},8,["background-color","background-image","icon"]),d(Ct,{fetching:r(a).fetching,articles:r(a).data,pagination:r(a).pagination,onLoadmore:v},null,8,["fetching","articles","pagination"])])}}}),ld=D(ad,[["__scopeId","data-v-94355933"]]),id={class:"tag-flow-page"},rd={key:0,class:"header"},cd=I({__name:"tag",props:{tagSlug:{}},setup(e){const t=e,{seoMeta:s,cdnDomain:o,isZhLang:l}=B(),i=Et(),a=tn(),c=A(()=>i.data.find(v=>v.slug===t.tagSlug)),p=A(()=>{var v;return Ne(((v=c.value)==null?void 0:v.extends)||[],"icon")||"icon-tag"}),_=A(()=>{var v;return Ne(((v=c.value)==null?void 0:v.extends)||[],"bgcolor")}),h=A(()=>{var b;const v=Ne(((b=c.value)==null?void 0:b.extends)||[],"background");return Fe(v)?Un(o,rt(v)):v}),g=async()=>{await a.fetch({tag_slug:t.tagSlug,page:a.pagination.current_page+1}),Ke()};return s(()=>{var T,E;const v=Te(t.tagSlug),b=(T=c.value)==null?void 0:T.name,y=l.value?[b,v]:[v,"Tag"],$=((E=c.value)==null?void 0:E.description)||y.join(",");return{pageTitle:y.join(" | "),description:$}}),$e(()=>{he(()=>t.tagSlug,v=>a.fetch({tag_slug:v}),{flush:"post"})}),Se(()=>a.fetch({tag_slug:t.tagSlug})),(v,b)=>{const y=w("divider"),$=w("i18n");return u(),m("div",id,[d(on,{"background-color":_.value,"background-image":h.value,icon:p.value},{default:f(()=>[c.value?(u(),m("span",rd,[d($,null,{zh:f(()=>[n("span",null,"#"+S(c.value.name),1),d(y,{class:"divider",type:"vertical"}),n("span",null,S(c.value.description||"..."),1)]),en:f(()=>[b[0]||(b[0]=n("span",null,"Tag",-1)),d(y,{class:"divider",type:"vertical"}),n("span",null,"#"+S(r(Xe)(c.value)),1)]),_:1})])):O("",!0)]),_:1},8,["background-color","background-image","icon"]),d(Ct,{fetching:r(a).fetching,articles:r(a).data,pagination:r(a).pagination,onLoadmore:g},null,8,["fetching","articles","pagination"])])}}}),dd=D(cd,[["__scopeId","data-v-655a542e"]]),ud={class:"date-flow-page"},pd=I({__name:"date",props:{date:{}},setup(e){const t=e,{seoMeta:s}=B(),{articleList:o}=ve(),l=async()=>{await o.fetch({date:t.date,page:o.pagination.current_page+1}),Ke()};return s(()=>({pageTitle:`${t.date} | Date`,ogType:"website"})),$e(()=>{he(()=>t.date,i=>o.fetch({date:i}),{flush:"post"})}),Se(()=>o.fetch({date:t.date})),(i,a)=>{const c=w("i18n");return u(),m("div",ud,[d(on,{icon:"icon-clock"},{default:f(()=>[d(c,{zh:`发布于 ${i.date} 的所有文章`,en:`Articles published at ${i.date}`},null,8,["zh","en"])]),_:1}),d(Ct,{fetching:r(o).fetching,articles:r(o).data,pagination:r(o).pagination,onLoadmore:l},null,8,["fetching","articles","pagination"])])}}}),_d={class:"search-flow-page"},md=I({__name:"search",props:{keyword:{}},setup(e){const t=e,{seoMeta:s}=B(),o=tn(),l=async()=>{await o.fetch({keyword:t.keyword,page:o.pagination.current_page+1}),Ke()};return s(()=>({pageTitle:`${t.keyword} | Search`,ogType:"website"})),$e(()=>{he(()=>t.keyword,i=>o.fetch({keyword:i}),{flush:"post"})}),Se(()=>o.fetch({keyword:t.keyword})),(i,a)=>{const c=w("i18n");return u(),m("div",_d,[d(on,{icon:"icon-search"},{default:f(()=>[d(c,{zh:`和 “${i.keyword}” 有关的所有文章`,en:`Keyword "${i.keyword}"'s result`},null,8,["zh","en"])]),_:1}),d(Ct,{fetching:r(o).fetching,articles:r(o).data,pagination:r(o).pagination,onLoadmore:l},null,8,["fetching","articles","pagination"])])}}}),hd=["src"],gd={class:"title"},fd={class:"description"},vd=I({__name:"banner",props:{image:{},imagePosition:{default:20},video:{},videoPosition:{default:48},blur:{default:0},cdn:{type:Boolean,default:!1},isMobile:{type:Boolean,default:!1}},setup(e){const t=e,{isDarkTheme:s,cdnDomain:o}=B(),l=A(()=>t.cdn&&t.image?ke(o,t.image):t.image),i=A(()=>l.value?{backgroundImage:`url(${l.value})`,backgroundPositionY:`${t.imagePosition}%`}:{}),a=A(()=>t.cdn&&t.video?ke(o,t.video):t.video);return(c,p)=>(u(),m("div",{class:N(["banner",{mobile:c.isMobile}])},[n("div",{class:N(["background",{dark:r(s)}]),style:se(i.value)},[a.value?(u(),m("video",{key:0,class:"video",loop:"",muted:"",autoplay:"",controls:!1,style:se({objectPosition:`0% ${t.videoPosition}%`}),src:a.value},null,12,hd)):O("",!0)],6),n("div",{class:N(["content",{blur:!!c.blur}]),style:se({"--blur":`${c.blur}px`})},[n("h2",gd,[Z(c.$slots,"title",{},void 0,!0)]),n("div",fd,[Z(c.$slots,"description",{},void 0,!0)])],6)],2))}}),dt=D(vd,[["__scopeId","data-v-770b102f"]]),yd={class:"archive-tree"},bd={class:"article-list"},kd=I({__name:"tree",props:{tree:{}},setup(e){const t=e,{isZhLang:s}=B(),l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((a,c)=>({[j.English]:a,[j.Chinese]:c===9?"十月":c==10?"十一":c==11?"十二":ns(c+1)+"月"})),i=a=>l[a-1];return(a,c)=>(u(),m("div",yd,[(u(!0),m(L,null,F(t.tree,p=>(u(),m("ul",{class:"month-list",key:p.year},[(u(!0),m(L,null,F(p.months,_=>(u(),m("li",{key:_.month,class:"month"},[Z(a.$slots,"title",{title:r(s)?`${r(ns)(p.year)} #${i(_.month).zh}（${_.articles.length}）`:`${p.year} #${i(_.month).en} (${_.articles.length})`},void 0,!0),n("ul",bd,[(u(!0),m(L,null,F(_.articles,(h,g)=>(u(),m("li",{key:g,class:"article"},[Z(a.$slots,"article",{index:g,article:h,day:String(h.createAt.day).padStart(2,"0")},void 0,!0)]))),128))])]))),128))]))),128))]))}}),wo=D(kd,[["__scopeId","data-v-3ac45f9c"]]),hn={title:{[j.Chinese]:"出入平等，了了分明",[j.English]:"Surmon's writing archive"},description:{[j.Chinese]:"书字字之方便，开众善之法门",[j.English]:"Either write something worth reading or do something worth writing"}},So=()=>{const{i18n:e,seoMeta:t,isZhLang:s}=B();t(()=>{const o=Te(e.t(k.PAGE_ARCHIVE,j.English));return{pageTitle:(s.value?[e.t(k.PAGE_ARCHIVE),o]:[o]).join(" | "),description:`${W.title} ${s.value?"数据归档":"archives"}`}})},Co=()=>{const{i18n:e}=B(),t=Dn();return{statistics:A(()=>{var o,l,i,a,c,p,_;return{tags:{icon:"icon-quill",title:e.t(k.STATISTIC_TAGS),content:me(((o=t.data)==null?void 0:o.tags)||0)},articles:{icon:"icon-quill",title:e.t(k.STATISTIC_ARTICLES),content:me(((l=t.data)==null?void 0:l.articles)||0)},comments:{icon:"icon-comment",title:e.t(k.STATISTIC_COMMENTS),content:me(((i=t.data)==null?void 0:i.comments)||0)},todayViews:{icon:"icon-eye",title:e.t(k.STATISTIC_TODAY_VIEWS),content:me(((a=t.data)==null?void 0:a.todayViews)||0)},totalViews:{icon:"icon-eye",title:e.t(k.STATISTIC_TOTAL_VIEWS),content:On(((c=t.data)==null?void 0:c.totalViews)||0)},totalLikes:{icon:"icon-like",title:e.t(k.STATISTIC_TOTAL_UPVOTES),content:me(((p=t.data)==null?void 0:p.totalLikes)||0)},averageEmotion:{icon:"icon-emoji",title:e.t(k.STATISTIC_AVERAGE_EMOTION),content:String(((_=t.data)==null?void 0:_.averageEmotion)??"-")}}}),fetch:t.fetch}},$d={class:"archive-page"},Td={key:0,class:"skeletons"},Ed={key:1,class:"statistics"},wd={class:"title"},Sd={class:"text"},Cd={class:"icon"},Ad={class:"content"},Id={class:"archive-skeleton",key:"skeleton"},Od={class:"archive-title"},Md={class:"archive-article"},Rd={class:"left"},Ld={class:"title"},Pd={class:"date"},Nd=["title","href"],Dd=["innerHTML"],Gd={class:"metas"},Ud={class:"item views"},Hd={class:"text"},Bd={class:"item likes"},zd={class:"text"},Fd={class:"item comments"},qd={class:"text"},Yd=I({__name:"desktop",setup(e){const t=An(),s=Co(),o=z(!0),l=A(()=>[s.statistics.value.todayViews,s.statistics.value.articles,s.statistics.value.comments,s.statistics.value.totalLikes,s.statistics.value.totalViews]);return So(),Se(()=>t.fetch()),Q(()=>{s.fetch().finally(()=>{o.value=!1})}),(i,a)=>{const c=w("i18n"),p=w("webfont"),_=w("skeleton-base"),h=w("container"),g=w("empty"),v=w("skeleton-line"),b=w("divider"),y=w("placeholder");return u(),m("div",$d,[d(dt,{image:"/images/page-archive/banner.webp","image-position":34,cdn:""},{title:f(()=>[d(p,null,{default:f(()=>[d(c,ze(Ve(r(hn).title)),null,16)]),_:1})]),description:f(()=>[d(c,ze(Ve(r(hn).description)),null,16)]),_:1}),d(h,{class:"statistic-warpper"},{default:f(()=>[d(fe,{name:"module",mode:"out-in"},{default:f(()=>[o.value?(u(),m("div",Td,[(u(!0),m(L,null,F(l.value.length,$=>(u(),G(_,{class:"item",key:$}))),128))])):(u(),m("div",Ed,[(u(!0),m(L,null,F(l.value,($,T)=>(u(),m("div",{class:"item",key:T},[n("p",wd,[n("span",Sd,S($.title),1),n("span",Cd,[n("i",{class:N(["iconfont",$.icon])},null,2)])]),n("div",Ad,S($.content),1)]))),128))]))]),_:1})]),_:1}),d(h,{class:"archive-warpper"},{default:f(()=>{var $;return[d(y,{data:($=r(t).data)==null?void 0:$.articles.length,loading:r(t).fetching},{placeholder:f(()=>[d(g,{class:"archive-empty",bold:"",key:"empty"},{default:f(()=>[d(c,{k:r(k).ARTICLE_PLACEHOLDER},null,8,["k"])]),_:1})]),loading:f(()=>[n("ul",Id,[(u(),m(L,null,F(9,T=>n("li",{key:T,class:"item"},[(u(),m(L,null,F(3,E=>d(v,{key:E,class:"line"})),64))])),64))])]),default:f(()=>[d(wo,{class:"archive-content",tree:r(t).tree,key:"content"},{title:f(({title:T})=>[n("h1",Od,S(T),1)]),article:f(({article:T,day:E})=>[n("div",Md,[n("div",Rd,[n("h3",Ld,[n("span",Pd,"D"+S(E),1),n("a",{class:"link",target:"_blank",title:T.title,href:r(Oe)(T.id)},S(T.title),9,Nd)]),n("p",{class:"description",innerHTML:T.description},null,8,Dd)]),n("div",Gd,[n("div",Ud,[a[0]||(a[0]=n("i",{class:"iconfont icon-eye"},null,-1)),n("span",Hd,S(r(me)(T.meta.views)),1)]),d(b,{type:"vertical"}),n("div",Bd,[a[1]||(a[1]=n("i",{class:"like-icon iconfont icon-like"},null,-1)),n("span",zd,S(T.meta.likes),1)]),d(b,{type:"vertical"}),n("div",Fd,[a[2]||(a[2]=n("i",{class:"iconfont icon-comment"},null,-1)),n("span",qd,S(T.meta.comments),1)])])])]),_:1},8,["tree"])]),_:1},8,["data","loading"])]}),_:1})])}}}),jd=D(Yd,[["__scopeId","data-v-6b0c8292"]]),Vd={class:"archive-page"},xd={class:"page-content"},Wd={key:0,class:"skeletons"},Zd={key:1,class:"statistics"},Jd={class:"title"},Qd={class:"content"},Xd={class:"archive-skeleton",key:"skeleton"},Kd={class:"archive-title"},eu={class:"archive-article"},tu={class:"title"},nu={class:"date"},su=["title","href"],ou=["innerHTML"],au=I({__name:"mobile",setup(e){const t=An(),s=Co(),o=z(!0),l=A(()=>[s.statistics.value.articles,s.statistics.value.comments,s.statistics.value.totalLikes]);return So(),Se(()=>t.fetch()),Q(()=>{s.fetch().finally(()=>{o.value=!1})}),(i,a)=>{const c=w("i18n"),p=w("skeleton-base"),_=w("container"),h=w("empty"),g=w("skeleton-line"),v=w("placeholder");return u(),m("div",Vd,[d(dt,{"is-mobile":!0,image:"/images/page-archive/banner-mobile.webp","image-position":80,cdn:""},{title:f(()=>[d(c,{k:r(k).PAGE_ARCHIVE},null,8,["k"])]),description:f(()=>[d(c,ze(Ve(r(hn).title)),null,16)]),_:1}),n("div",xd,[d(_,{class:"statistic-warpper"},{default:f(()=>[d(fe,{name:"module",mode:"out-in"},{default:f(()=>[o.value?(u(),m("div",Wd,[(u(!0),m(L,null,F(l.value.length,b=>(u(),G(p,{class:"skeleton",key:b}))),128))])):(u(),m("div",Zd,[(u(!0),m(L,null,F(l.value,(b,y)=>(u(),m("div",{class:"item",key:y},[n("p",Jd,S(b.title),1),n("div",Qd,S(b.content),1)]))),128))]))]),_:1})]),_:1}),d(_,{class:"archive-warpper"},{default:f(()=>{var b;return[d(v,{data:(b=r(t).data)==null?void 0:b.articles.length,loading:r(t).fetching},{placeholder:f(()=>[d(h,{class:"archive-empty",key:"empty"},{default:f(()=>[d(c,{k:r(k).ARTICLE_PLACEHOLDER},null,8,["k"])]),_:1})]),loading:f(()=>[n("div",Xd,[(u(),m(L,null,F(6,y=>d(g,{class:"item",key:y})),64))])]),default:f(()=>[d(wo,{class:"archive-content",tree:r(t).tree,key:"content"},{title:f(({title:y})=>[n("h3",Kd,S(y),1)]),article:f(({article:y,day:$})=>[n("div",eu,[n("h4",tu,[n("span",nu,"D"+S($),1),n("a",{class:"link",target:"_blank",title:y.title,href:r(Oe)(y.id)},S(y.title),9,su)]),n("p",{class:"description",innerHTML:y.description},null,8,ou)])]),_:1},8,["tree"])]),_:1},8,["data","loading"])]}),_:1})])])}}}),lu=D(au,[["__scopeId","data-v-fbdae75e"]]);async function Ao(e,t){return await za.toDataURL(e,{errorCorrectionLevel:"H",type:"image/jpeg",width:260,...t})}const Ft=()=>{window.__isEnabledCopyrighter=!0},gn=()=>{window.__isEnabledCopyrighter=!1},iu=()=>{Ft();const e=()=>["","",`作者：${W.author}`,`链接：${location.href}`,`来源：${W.title}`,"著作权归作者所有，商业转载请联系作者获得授权，非商业转载请注明出处。"].join(`
`),t=o=>o+e(),s=o=>o+e();document.addEventListener("copy",o=>{var l,i,a;if(window.getSelection&&window.__isEnabledCopyrighter){const c=(l=window.getSelection())==null?void 0:l.toString();(i=o.clipboardData)==null||i.setData("text/plain",t(c)),(a=o.clipboardData)==null||a.setData("text/html",s(c)),o.preventDefault()}})},an=e=>{var t;return gn(),(t=window.navigator.clipboard)==null?void 0:t.writeText(e).finally(()=>{Ft()})},ru={class:"share"},cu=["title","onClick"];var Dt=(e=>(e.Wechat="wechat",e.Weibo="weibo",e.Twitter="twitter",e.douban="douban",e.Evernote="evernote",e.Facebook="facebook",e.LinkedIn="linkedin",e))(Dt||{});const du=I({__name:"share",props:{socials:{},disabledCopyLink:{type:Boolean},disabledImageShare:{type:Boolean}},emits:["shareAsImage"],setup(e,{emit:t}){const s=[{id:"wechat",name:"微信",class:"wechat",handler:T=>{Ao(T.url).then(E=>{window.$popup.vImage(E)})}},{id:"weibo",name:"微博",class:"weibo",url:T=>"https://service.weibo.com/share/share.php?"+nt.stringify({url:T.url,source:T.url,sourceUrl:T.url,title:T.title,content:T.description})},{id:"twitter",name:"Twitter",class:"twitter",iconfont:"twitter-x",url:T=>"https://twitter.com/intent/tweet?"+nt.stringify({url:T.url,text:T.title})},{id:"facebook",name:"Facebook",class:"facebook",url:T=>"https://www.facebook.com/share.php?"+nt.stringify({t:T.title,u:encodeURI(T.url)})},{id:"linkedin",name:"LinkedIn",class:"linkedin",url:T=>"https://www.linkedin.com/shareArticle?"+nt.stringify({title:T.title,url:T.url})},{id:"douban",name:"豆瓣",class:"douban",url:T=>"https://www.douban.com/recommend/?"+nt.stringify({url:T.url,title:T.title})},{id:"evernote",name:"Evernote",class:"evernote",url:T=>"https://www.evernote.com/clip.action?"+nt.stringify({url:T.url,title:T.title})}],o=e,l=t,{i18n:i,gtag:a,route:c,isZhLang:p}=B(),_=A(()=>{var T;return(T=o.socials)!=null&&T.length?s.filter(E=>{var C;return(C=o.socials)==null?void 0:C.includes(E.id)}):s}),h=()=>tt(c.fullPath),g=()=>document.title||W.title,v=()=>{var E,C;return((C=(E=document.getElementsByName("description"))==null?void 0:E[0])==null?void 0:C.getAttribute("content"))||i.t(k.APP_SLOGAN)},b=()=>{const T=`${g()} - ${h()}`;an(T).then(()=>{alert(p.value?"链接已复制到剪贴板！":"Link copied!")}),a==null||a.event("share_copy_url",{event_category:J.Share,event_label:T})},y=()=>{l("shareAsImage"),a==null||a.event("share_as_image",{event_category:J.Share,event_label:`${g()} - ${h()}`})},$=T=>{a==null||a.event("share_social",{event_category:J.Share,event_label:T.id});const E={url:h(),title:g(),description:v()};T.handler?T.handler(E):$o(T.url(E),{name:`Share: ${W.title}`})};return(T,E)=>{const C=Re("disabled-wallflower");return ue((u(),m("div",ru,[(u(!0),m(L,null,F(_.value,(R,P)=>(u(),m("button",{class:N(["share-ejector",R.class]),key:P,title:"Share to: "+R.name,onClick:M=>$(R)},[n("i",{class:N(["iconfont",`icon-${R.iconfont??R.class}`])},null,2)],10,cu))),128)),o.disabledImageShare?O("",!0):(u(),m("button",{key:0,class:"share-ejector share-as-image",title:"Share as image",onClick:y},E[0]||(E[0]=[n("i",{class:"iconfont icon-image-share"},null,-1)]))),o.disabledCopyLink?O("",!0):(u(),m("button",{key:1,class:"share-ejector copy-link",title:"Copy link",onClick:b},E[1]||(E[1]=[n("i",{class:"iconfont icon-link"},null,-1)])))])),[[C]])}}}),Io=D(du,[["__scopeId","data-v-7c694bf4"]]),fn=e=>`https://chat.openai.com/share/${e}`,$t=Sn("APP:Comment"),uu=["😃","😂","😅","😉","😌","😔","😓","😢","😍","😘","😜","😡","😤","😭","😱","😳","😵","🌚","🙏","💪","👌","🤘","👍","👎","👏","🌻","🌹","💊","🐶","🐈","✨","❤️‍🔥","💔","💩","👻","🚩"];var we=(e=>(e.Sort="sort",e.Page="page",e.Vote="vote",e.Blossom="blossom",e.Delete="delete",e.Reply="reply",e.CancelReply="cancelReply",e.Submit="submit",e))(we||{});const pu=e=>`https://disqus.com/by/${e}/`,_u=3,Oo=3e3,mu=["2333","haha","哈哈"],hu=["666","赞","棒","优秀"],gu=["呵呵"],fu=e=>{const t=window.$luanchEmojiRain;mu.find(s=>e.includes(s))?t({speed:12,staggered:!0,increaseSpeed:.4,emoji:ke(qe(),"/images/emojis/haha.png")}):hu.find(s=>e.includes(s))?t({speed:12,staggered:!0,increaseSpeed:.4,emoji:ke(qe(),"/images/emojis/666.png")}):gu.find(s=>e.includes(s))?t({staggered:!1,speed:8,increaseSpeed:.04,emoji:ke(qe(),"/images/emojis/hehe.png")}):Math.random()<=.5&&t({scale:.6,staggered:!0,speed:8,increaseSpeed:.04,emoji:ke(qe(),"/images/emojis/doge.png")})},vu={class:"topbar-skeleton",key:"skeleton"},yu={class:"left"},bu={class:"right"},ku={class:"statistics"},$u={class:"count"},Tu={class:"count"},Eu=["value"],wu=["value"],Su=["value"],Cu=["value"],Au={class:"user"},Iu={key:0,class:"unlogin"},Ou={class:"guest"},Mu={key:1,class:"logined"},Ru={class:"name"},Lu={class:"text"},Pu={class:"user-menu"},Nu={class:"menus"},Du={class:"item"},Gu={class:"item"},Uu={class:"name"},Hu={class:"text"},Bu={class:"user-menu"},zu={class:"menus"},Fu={class:"item"},qu={class:"item"},Yu=I({__name:"topbar",props:{postId:{},sort:{},fetching:{type:Boolean},loading:{type:Boolean},loaded:{default:0},total:{default:0},plain:{type:Boolean,default:!1}},setup(e,{emit:t}){const s=e,o=t,{gtag:l}=B(),i=Ue(),a=A(()=>i.user),c=A(()=>s.loading?"···":`${s.loaded} / ${s.total}`),p=new Map,_=async()=>{if(l==null||l.event("disqus_thread_page",{event_category:J.Comment,event_label:`id: ${s.postId}`}),!p.has(s.postId)){const T=await ie.get("/disqus/thread",{params:{post_id:s.postId}});p.set(s.postId,T.result)}const y=i.disqusConfig.forum,$=p.get(s.postId).slug;jn(`https://disqus.com/home/discussion/${y}/${$}/`)},h=y=>{l==null||l.event("comment_sort_switch",{event_category:J.Comment});const $=Number(y==null?void 0:y.value);$!==s.sort&&o(we.Sort,$)},g=()=>{l==null||l.event("disqus_login",{event_category:J.Comment,event_label:`id: ${s.postId}`}),$o(i.disqusConfig.authorize_url,{name:`Disqus Auth ${W.title}`,onClose:()=>{i.fetchDisqusUserInfo(),$t.info("disqus logined",xt(i.user))}})},v=()=>{i.fetchDisqusLogout(),$t.log("disqus logout"),l==null||l.event("disqus_logout",{event_category:J.Comment,event_label:`id: ${s.postId}`})},b=()=>{i.removeLocalUser()};return(y,$)=>{const T=w("skeleton-line"),E=w("i18n"),C=w("divider"),R=w("ulink"),P=w("placeholder");return u(),G(P,{loading:y.fetching},{loading:f(()=>[n("div",vu,[n("div",yu,[d(T,{class:"skeleton-item count"}),y.plain?O("",!0):(u(),G(T,{key:0,class:"skeleton-item sort"}))]),n("div",bu,[d(T,{class:"skeleton-item user"})])])]),default:f(()=>{var M,X;return[n("div",{class:N(["topbar",{plain:y.plain}]),key:"element"},[n("div",ku,[n("div",{class:N(["total",{loading:y.loading}])},[$[4]||($[4]=n("i",{class:"iconfont icon-discussion"},null,-1)),d(E,null,{zh:f(()=>[$[1]||($[1]=U(" 共 ")),n("span",$u,S(c.value),1),$[2]||($[2]=U(" 条看法 "))]),en:f(()=>[n("span",Tu,S(c.value),1),$[3]||($[3]=U(" comments "))]),_:1})],2),n("select",{class:"sort",name:"sort",value:y.sort,onChange:$[0]||($[0]=ce=>h(ce.target))},[n("option",{value:r(ot).Desc},[d(E,{k:r(k).COMMENT_SORT_NEW},null,8,["k"])],8,wu),n("option",{value:r(ot).Hottest},[d(E,{k:r(k).COMMENT_SORT_HOT},null,8,["k"])],8,Su),n("option",{value:r(ot).Asc},[d(E,{k:r(k).COMMENT_SORT_OLD},null,8,["k"])],8,Cu)],40,Eu),n("button",{class:"disqus",onClick:_},$[5]||($[5]=[n("i",{class:"iconfont icon-disqus-logo"},null,-1)])),Z(y.$slots,"extra",{},void 0,!0)]),n("div",Au,[a.value.type===r(De).Null?(u(),m("div",Iu,[n("span",Ou,[d(E,{zh:"访客身份",en:"Guest"})]),d(C,{type:"vertical",size:"sm"}),n("button",{class:"disqus",onClick:g},[d(E,null,{zh:f(()=>$[6]||($[6]=[U("使用"),n("i",{class:"iconfont icon-disqus"},null,-1),U("登录")])),en:f(()=>$[7]||($[7]=[U("Login by"),n("i",{class:"iconfont icon-disqus right"},null,-1)])),_:1})])])):(u(),m("div",Mu,[a.value.type===r(De).Local?(u(),m(L,{key:0},[n("div",Ru,[$[8]||($[8]=n("i",{class:"icon guest iconfont icon-user"},null,-1)),n("span",Lu,S(((M=a.value.localProfile)==null?void 0:M.name)||""),1),$[9]||($[9]=n("i",{class:"arrow iconfont icon-down-arrow"},null,-1))]),n("div",Pu,[n("ul",Nu,[n("li",Du,[n("button",{class:"button",onClick:g},[d(E,null,{zh:f(()=>$[10]||($[10]=[U("换为"),n("i",{class:"iconfont icon-disqus disqus"},null,-1),U("登录")])),en:f(()=>$[11]||($[11]=[U("Login by "),n("i",{class:"iconfont icon-disqus disqus"},null,-1)])),_:1})])]),n("li",Gu,[n("button",{class:"button",onClick:b},[d(E,{zh:"退出本地访客身份",en:"Clean local profile"})])])])])],64)):a.value.type===r(De).Disqus?(u(),m(L,{key:1},[n("div",Uu,[$[12]||($[12]=n("i",{class:"icon disqus iconfont icon-disqus-logo"},null,-1)),n("span",Hu,S(((X=a.value.disqusProfile)==null?void 0:X.name)||""),1),$[13]||($[13]=n("i",{class:"arrow iconfont icon-down-arrow"},null,-1))]),n("div",Bu,[n("ul",zu,[n("li",Fu,[d(R,{class:"button",href:a.value.disqusProfile.profileUrl},{default:f(()=>[d(E,{zh:"访问 Disqus 主页",en:"Disqus profile"})]),_:1},8,["href"])]),n("li",qu,[n("button",{class:"button",onClick:v},[d(E,{zh:"注销授权身份",en:"Disqus logout"})])])])])],64)):O("",!0)]))])],2)]}),_:3},8,["loading"])}}}),ju=D(Yu,[["__scopeId","data-v-ecdc8d49"]]),Vu={class:"main-skeleton"},xu={class:"avatar"},Wu={class:"content"},Zu={class:"list-empty"},Ju={class:"main"},Qu=I({__name:"main",props:{hasData:{type:Boolean},fetching:{type:Boolean,default:!1},skeletonCount:{default:6}},setup(e){return(t,s)=>{const o=w("skeleton-base"),l=w("skeleton-paragraph"),i=w("i18n"),a=w("placeholder");return u(),G(a,{loading:t.fetching,data:t.hasData||!!t.$slots.extra},{loading:f(()=>[n("ul",Vu,[(u(!0),m(L,null,F(t.skeletonCount,c=>(u(),m("li",{key:c,class:"item"},[n("div",xu,[d(o)]),n("div",Wu,[d(l,{lines:4})])]))),128))])]),placeholder:f(()=>[n("div",Zu,[d(i,{k:r(k).COMMENT_LIST_EMPTY},null,8,["k"])])]),default:f(()=>[n("div",Ju,[Z(t.$slots,"extra",{},void 0,!0),Z(t.$slots,"list",{},void 0,!0),Z(t.$slots,"pagination",{},void 0,!0)])]),_:3},8,["loading","data"])}}}),Xu=D(Qu,[["__scopeId","data-v-32159d60"]]),Mo="/images/gravatar.png",Ro=e=>`https://www.gravatar.com/avatar/${e}`,Lo=e=>`https://disqus.com/api/users/avatars/${e}.jpg`,Ku=["innerHTML"],lt=I({__name:"markdown",props:{markdown:{},html:{},plain:{type:Boolean},compact:{type:Boolean},renderOptions:{}},setup(e){const t=e,{element:s}=ni(),{isDarkTheme:o}=B(),l=A(()=>t.markdown?uo(t.markdown,{...t.renderOptions}):t.html||"");return(i,a)=>(u(),m("section",{ref_key:"element",ref:s,innerHTML:l.value,class:N([i.plain?"global-markdown-plain":"global-markdown-html",{compact:i.compact,dark:r(o)}])},null,10,Ku))}}),ep=["href"],ms=I({__name:"link",props:{href:{}},setup(e){return(t,s)=>t.href?(u(),m("a",Qe({key:0,target:"_blank",rel:"external nofollow noopener",href:t.href},t.$attrs),[Z(t.$slots,"default")],16,ep)):(u(),m("span",ze(Qe({key:1},t.$attrs)),[Z(t.$slots,"default")],16))}}),tp=127397,np=e=>e.toUpperCase().replace(/./g,t=>String.fromCodePoint(t.charCodeAt(0)+tp)),sp={class:"location"},op=["title"],ap={key:1,class:"iconfont icon-earth"},lp=["title"],ip=["title"],rp=I({__name:"location",props:{location:{}},setup(e){const t=e,s=["Shanghai","Beijing","Tianjin","Chongqing","Chungking"],o=A(()=>t.location.country_code||t.location.country),l=A(()=>np(t.location.country_code)),i=A(()=>t.location.country_code==="CN"&&s.includes(t.location.region)?t.location.region:t.location.city);return(a,c)=>(u(),m("span",sp,[l.value?(u(),m("span",{key:0,class:"emoji",title:t.location.country},S(l.value),9,op)):(u(),m("i",ap)),n("span",{title:t.location.country},S(o.value),9,lp),c[0]||(c[0]=n("span",{class:"separator"},"•",-1)),n("span",{title:i.value},S(i.value),9,ip)]))}}),cp=D(rp,[["__scopeId","data-v-c44e90cf"]]),dp={class:"user-agent"},up={class:"os"},pp={class:"browser"},_p=I({__name:"user-agent",props:{userAgent:{}},setup(e){const t={"Mac OS":"icon-apple",Windows:"icon-windows",Android:"icon-android",Ubuntu:"icon-ubuntu",Linux:"icon-linux",iOS:"icon-apple"},s={Chrome:"icon-chrome",Chromium:"icon-chrome",WeChat:"icon-wechat",QQ:"icon-qq",Safari:"icon-safari","Mobile Safari":"icon-safari",UCBrowser:"icon-uc",Maxthon:"icon-maxthon",Firefox:"icon-firefox",IE:"icon-ie",Opera:"icon-opera",Edge:"icon-edge"},o=e,l=A(()=>Ns(o.userAgent)),i=A(()=>{const c=l.value.result.os.name;return c&&t[c]}),a=A(()=>{const c=l.value.result.browser.name;return c?s[c]:null});return(c,p)=>(u(),m("span",dp,[n("span",up,[i.value?(u(),m("i",{key:0,class:N(["iconfont",i.value])},null,2)):O("",!0),n("span",null,S(l.value.result.os.name),1)]),n("span",pp,[a.value?(u(),m("i",{key:0,class:N(["iconfont",a.value])},null,2)):O("",!0),n("span",null,S(l.value.result.browser.name),1)])]))}}),mp=D(_p,[["__scopeId","data-v-f329c678"]]),hp=["id"],gp={key:0,class:"cm-avatar"},fp=["src","alt"],vp={key:0,class:"iconfont icon-disqus-logo"},yp={key:1,class:"iconfont icon-user"},bp={class:"cm-body"},kp={class:"cm-header"},$p={class:"left"},Tp={key:0,class:"moderator"},Ep={class:"author-info"},wp={class:"right"},Sp={class:"cm-content"},Cp={key:0,class:"reply"},Ap={class:"text"},Ip={class:"markdown"},Op={class:"cm-footer"},Mp={class:"left"},Rp={class:"create-at","data-allow-mismatch":""},Lp=["disabled"],Pp={class:"count"},Np=["disabled"],Dp={class:"count"},Gp={class:"right"},Up=["disabled"],Hp={key:0,class:"cm-reply"},Bp={class:"cm-children"},zp=I({__name:"item",props:{comment:{},liked:{type:Boolean},disliked:{type:Boolean},isReply:{type:Boolean},isChild:{type:Boolean},hasChild:{type:Boolean},hiddenAvatar:{type:Boolean},hiddenUa:{type:Boolean},hiddenLocation:{type:Boolean},plainVote:{type:Boolean}},setup(e,{emit:t}){const s=e,o=t,{route:l,i18n:i,cdnDomain:a}=B(),c=In(),p=Ue(),_=A(()=>c.deleting),h=A(()=>Ne(s.comment.extends,"disqus-author-id")),g=A(()=>Ne(s.comment.extends,"disqus-author-username")),v=A(()=>!!h.value),b=A(()=>!!g.value&&!!p.disqusConfig&&g.value===p.disqusConfig.admin_username),y=A(()=>g.value?St(Lo(g.value)):s.comment.author.email_hash?ct(a,Ro(s.comment.author.email_hash)):ke(a,Mo)),$=A(()=>s.comment.author.site?s.comment.author.site:g.value?pu(g.value):Ge),T=A(()=>{var q;return p.user.type===De.Disqus&&h.value?((q=p.user.disqusProfile)==null?void 0:q.id)===h.value:!1}),E=q=>{var Ce;const ee=(Ce=c.comments.find(Y=>Y.id===q))==null?void 0:Ce.author.name,pe=ee?`@${ee}`:"";return`${`#${q}`} ${pe}`},C=()=>{o(we.Reply,s.comment.id)},R=()=>{o(we.CancelReply,s.comment.id)},P=q=>{o(we.Vote,s.comment.id,q)},M=()=>{window.confirm(i.t(k.COMMENT_DELETE_CONFIRM))&&o(we.Delete,s.comment.id)},X=()=>{an(tt(l.path,Xl(s.comment.id)))},ce=q=>{He(Ht(q),-300)};return(q,ee)=>{const pe=w("i18n"),Le=w("udate");return u(),m("li",{class:N(["comment-item",{"hide-avatar":q.hiddenAvatar,"is-child":q.isChild,"has-child":q.hasChild}]),key:q.comment.id,id:r(Ht)(q.comment.id)},[n("div",null,[q.hiddenAvatar?O("",!0):(u(),m("div",gp,[d(ms,{class:"link",href:$.value},{default:f(()=>[n("img",{src:y.value,alt:q.comment.author.name,draggable:"false"},null,8,fp),n("span",{class:N(["role",v.value?"disqus":"anonymous"])},[v.value?(u(),m("i",vp)):(u(),m("i",yp))],2)]),_:1},8,["href"])])),n("div",bp,[n("div",kp,[n("div",$p,[d(ms,{class:N(["username",{url:!!$.value}]),href:$.value},{default:f(()=>[U(S(r(Te)(q.comment.author.name)),1)]),_:1},8,["class","href"]),b.value?(u(),m("span",Tp,[d(pe,{k:r(k).COMMENT_MODERATOR},null,8,["k"])])):O("",!0),n("span",Ep,[q.comment.ip_location&&!q.hiddenLocation?(u(),G(cp,{key:0,location:q.comment.ip_location},null,8,["location"])):O("",!0),q.comment.agent&&!q.hiddenUa?(u(),G(mp,{key:1,"user-agent":q.comment.agent},null,8,["user-agent"])):O("",!0)])]),n("div",wp,[n("button",{class:"floor",onClick:X},"#"+S(q.comment.id),1)])]),n("div",Sp,[q.comment.pid?(u(),m("p",Cp,[n("span",Ap,[d(pe,{k:r(k).COMMENT_REPLY},null,8,["k"])]),n("button",{class:"parent",onClick:ee[0]||(ee[0]=Ce=>ce(q.comment.pid))},S(E(q.comment.pid)),1),d(pe,{zh:"：",en:":"})])):O("",!0),n("div",Ip,[d(lt,{markdown:q.comment.content,compact:!0,"render-options":{sanitize:!0}},null,8,["markdown"])])]),n("div",Op,[n("div",Mp,[n("span",Rp,[d(Le,{to:"ago",date:q.comment.created_at},null,8,["date"])]),n("button",{class:N(["vote",{actived:q.liked,alived:!!q.comment.likes}]),disabled:q.liked,onClick:ee[1]||(ee[1]=Ce=>P(!0))},[ee[3]||(ee[3]=n("i",{class:"iconfont icon-like"},null,-1)),q.plainVote?O("",!0):(u(),G(pe,{key:0,k:r(k).COMMENT_UPVOTE},null,8,["k"])),n("span",Pp,"("+S(q.comment.likes)+")",1)],10,Lp),n("button",{class:N(["vote",{actived:q.disliked,alived:!!q.comment.dislikes}]),disabled:q.disliked,onClick:ee[2]||(ee[2]=Ce=>P(!1))},[ee[4]||(ee[4]=n("i",{class:"iconfont icon-dislike"},null,-1)),q.plainVote?O("",!0):(u(),G(pe,{key:0,k:r(k).COMMENT_DOWNVOTE},null,8,["k"])),n("span",Dp,"("+S(q.comment.dislikes)+")",1)],10,Np),q.isReply?(u(),m("button",{key:0,class:"reply",onClick:R},[ee[5]||(ee[5]=n("i",{class:"iconfont icon-cancel"},null,-1)),d(pe,{k:r(k).COMMENT_REPLY_CANCEL},null,8,["k"])])):(u(),m("button",{key:1,class:"reply",onClick:C},[ee[6]||(ee[6]=n("i",{class:"iconfont icon-reply"},null,-1)),d(pe,{k:r(k).COMMENT_REPLY},null,8,["k"])]))]),n("div",Gp,[T.value?(u(),m("button",{key:0,class:"delete",disabled:_.value,onClick:M},[ee[7]||(ee[7]=n("i",{class:"iconfont icon-delete"},null,-1)),d(pe,{k:r(k).COMMENT_DELETE},null,8,["k"])],8,Up)):O("",!0)])]),q.isReply?(u(),m("div",Hp,[Z(q.$slots,"reply",{},void 0,!0)])):O("",!0),n("div",Bp,[Z(q.$slots,"children",{},void 0,!0)])])])],10,hp)}}}),Fp=D(zp,[["__scopeId","data-v-a119b4f0"]]),qp=I({name:"CommentList",components:{CommentItem:Fp},props:{comments:{type:Array,required:!0},replyPid:{type:Number,required:!0},isChildList:{type:Boolean,default:!1},hiddenAvatar:{type:Boolean,default:!1},hiddenUa:{type:Boolean,default:!1},plainVote:{type:Boolean,default:!1}},emits:[we.Reply,we.Delete,we.CancelReply],setup(e,t){const{i18n:s,gtag:o}=B(),{comment:l,identity:i}=ve();return{identity:i,buildeCommentTree:g=>g.map(v=>({comment:v,children:[]})),handleReplyComment:g=>{t.emit(we.Reply,g)},handleCancelReply:g=>{t.emit(we.CancelReply,g)},handleDeleteComment:async g=>{t.emit(we.Delete,g)},handleVoteComment:async(g,v)=>{if(o==null||o.event("vote_comment",{event_category:J.Comment,event_label:v?"like":"dislike"}),v&&i.isLikedComment(g)||!v&&i.isDislikedComment(g))return!1;try{await l.postCommentVote(g,v?1:-1),v?i.likeComment(g):i.dislikeComment(g)}catch(b){const y=s.t(k.POST_ACTION_ERROR);$t.failure(y,b),alert(y)}}}}});function Yp(e,t,s,o,l,i){const a=w("comment-list"),c=w("comment-item");return u(),m("ul",{class:N(["comment-list",e.isChildList?"child":"root"])},[d(bn,{name:"list-fade"},{default:f(()=>[(u(!0),m(L,null,F(e.comments,p=>(u(),G(c,{key:p.comment.id,comment:p.comment,liked:e.identity.isLikedComment(p.comment.id),disliked:e.identity.isDislikedComment(p.comment.id),"has-child":!!p.children.length,"is-child":e.isChildList,"is-reply":e.replyPid===p.comment.id,"hidden-avatar":e.hiddenAvatar,"hidden-ua":e.hiddenUa,"plain-vote":e.plainVote,onVote:e.handleVoteComment,onDelete:e.handleDeleteComment,onReply:e.handleReplyComment,onCancelReply:e.handleCancelReply},kn({reply:f(()=>[Z(e.$slots,"reply",{comment:p.comment,isChild:!1},void 0,!0)]),_:2},[p.children.length?{name:"children",fn:f(()=>[d(a,{comments:e.buildeCommentTree(p.children),"is-child-list":!0,"hidden-avatar":e.hiddenAvatar,"hidden-ua":e.hiddenUa,"plain-vote":e.plainVote,"reply-pid":e.replyPid,onDelete:e.handleDeleteComment,onReply:e.handleReplyComment,onCancelReply:e.handleCancelReply},{reply:f(()=>[Z(e.$slots,"reply",{comment:p.comment,isChild:!0},void 0,!0)]),_:2},1032,["comments","hidden-avatar","hidden-ua","plain-vote","reply-pid","onDelete","onReply","onCancelReply"])]),key:"0"}:void 0]),1032,["comment","liked","disliked","has-child","is-child","is-reply","hidden-avatar","hidden-ua","plain-vote","onVote","onDelete","onReply","onCancelReply"]))),128))]),_:3})],2)}const jp=D(qp,[["render",Yp],["__scopeId","data-v-cee9694a"]]),Vp=["id"],xp={key:2,class:"finished"},Wp=I({__name:"loadmore",props:{fetching:{type:Boolean},remain:{},pagination:{}},setup(e,{emit:t}){const s=e,o=t,{gtag:l}=B(),i=A(()=>{var c,p,_;return s.pagination&&((c=s.pagination)==null?void 0:c.total_page)>1&&((p=s.pagination)==null?void 0:p.current_page)!==((_=s.pagination)==null?void 0:_.total_page)}),a=()=>{s.pagination&&(o(we.Page,s.pagination.current_page+1),l==null||l.event("loadmore",{event_category:J.Comment}))};return(c,p)=>{const _=w("loading-indicator"),h=w("i18n");return u(),m("div",{class:"loadmore",id:r(Wl)},[c.fetching?(u(),G(_,{key:0,class:"loading",width:"2rem",height:"1.2rem",gap:"0.8rem"})):i.value?(u(),m("button",{key:1,class:"button",onClick:a},[p[0]||(p[0]=n("i",{class:"iconfont icon-loadmore"},null,-1)),d(h,null,{zh:f(()=>[U("加载更多（"+S(c.remain)+" 条）评论",1)]),en:f(()=>[U("Loadmore (remain of "+S(c.remain)+" comments)",1)]),_:1})])):(u(),m("span",xp,[d(h,{k:r(k).LIST_NO_MORE_DATA},null,8,["k"])]))],8,Vp)}}}),Zp=D(Wp,[["__scopeId","data-v-7bfba7d7"]]),Jp={class:"publisher-skeleton",key:"skeleton"},Qp={class:"avatar"},Xp={class:"content"},Kp=I({__name:"main",props:{fetching:{type:Boolean}},setup(e){return(t,s)=>{const o=w("skeleton-base"),l=w("placeholder");return u(),G(l,{loading:t.fetching},{loading:f(()=>[n("div",Jp,[n("div",Qp,[d(o)]),n("div",Xp,[d(o)])])]),default:f(()=>[Z(t.$slots,"default",{},void 0,!0)]),_:3},8,["loading"])}}}),e_=D(Kp,[["__scopeId","data-v-6a486c59"]]),t_=["id"],n_={key:0,class:"profile"},s_={class:"name"},o_=["value","disabled","placeholder"],a_={class:"email"},l_=["value","disabled","placeholder"],i_={class:"site"},r_=["value","disabled","placeholder"],c_={class:"postbox"},d_={key:0,class:"avatar"},u_={class:"editor",key:"editor"},p_=I({__name:"publisher",props:{id:{},disabled:{type:Boolean},profile:{},total:{default:0},bordered:{type:Boolean},defaultBlossomed:{type:Boolean,default:!0},hiddenAvatar:{type:Boolean},fixedAvatar:{type:Boolean}},setup(e,{emit:t}){const s=e,o=t,{i18n:l,gtag:i,cdnDomain:a}=B(),{user:c}=$n(Ue()),p=ke(a,Mo),_=A(()=>{var b,y;if(c.value.type===De.Local){const $=(b=c.value.localProfile)==null?void 0:b.email_hash;return $?ct(a,Ro($)):p}return c.value.type===De.Disqus?St(Lo((y=c.value.disqusProfile)==null?void 0:y.username)):p}),h=(b,y)=>{o("update:profile",{...s.profile,[b]:y.target.value})},g=z(s.defaultBlossomed),v=()=>{g.value=!0,o(we.Blossom),i==null||i.event("focus_publisher",{event_category:J.Comment})};return(b,y)=>{const $=w("uimage"),T=w("i18n");return u(),m("form",{key:"publisher",class:N(["publisher",{"hidden-avatar":b.hiddenAvatar,"fixed-avatar":b.fixedAvatar,blossomed:g.value,bordered:b.bordered}]),name:"comment",id:b.id},[d(fe,{name:"module-slow"},{default:f(()=>[r(c).type===r(De).Null?ue((u(),m("div",n_,[n("div",s_,[n("input",{value:b.profile.name,onInput:y[0]||(y[0]=E=>h("name",E)),required:"",type:"text",name:"name",autocomplete:"on",disabled:b.disabled,placeholder:r(l).t(r(k).COMMENT_POST_NAME)+" *"},null,40,o_)]),n("div",a_,[n("input",{value:b.profile.email,onInput:y[1]||(y[1]=E=>h("email",E)),required:"",type:"email",name:"email",autocomplete:"on",disabled:b.disabled,placeholder:r(l).t(r(k).COMMENT_POST_EMAIL)+" *"},null,40,l_)]),n("div",i_,[n("input",{value:b.profile.site,onInput:y[2]||(y[2]=E=>h("site",E)),type:"url",name:"url",autocomplete:"on",disabled:b.disabled,placeholder:r(l).t(r(k).COMMENT_POST_SITE)},null,40,r_)])],512)),[[Tn,g.value]]):O("",!0)]),_:1}),n("div",c_,[b.hiddenAvatar?O("",!0):(u(),m("div",d_,[d($,{alt:b.profile.name,src:_.value},null,8,["alt","src"])])),d(fe,{name:"module-slow"},{default:f(()=>[g.value?(u(),m("div",u_,[Z(b.$slots,"pen",{},void 0,!0)])):(u(),m("div",{class:"placeholder",key:"placeholder",onClick:v},[d(T,{zh:"在下有一拙见，不知...",en:`${b.total?"Join":"Start"} the discussion...`},null,8,["en"])]))]),_:3})])],10,t_)}}}),hs=D(p_,[["__scopeId","data-v-748190b4"]]),__={class:"editor"},m_=["data-replicated-value"],h_=["disabled","autofocus","minlength","maxlength","placeholder"],g_={key:0,class:"preview-content"},f_={class:"pencilbox"},v_={class:"stationery"},y_=["disabled"],b_={class:"emoji-box"},k_={class:"emoji-list"},$_=["onClick"],T_=["disabled"],E_=["disabled"],w_=["disabled"],S_=["disabled"],C_=["disabled"],A_=I({__name:"pen",props:{posting:{type:Boolean},modelValue:{},disabled:{type:Boolean},previewed:{type:Boolean},bordered:{type:Boolean},autoFocus:{type:Boolean},hiddenStationery:{type:Boolean}},setup(e,{emit:t}){const s=e,o=t,{i18n:l}=B(),{user:i}=$n(Ue()),a=z(s.modelValue??""),c=z(s.previewed??!1),p=z(),_=()=>{c.value=!c.value,o("update:previewed",c.value)},h=E=>{E.preventDefault(),o(we.Submit,a.value)},g=()=>{var C;const E=((C=p.value)==null?void 0:C.value)??"";a.value=E,o("update:modelValue",E)},v=(E,C="",R=0)=>{const P=p.value;if(!P)return;const M=P.selectionStart,X=P.selectionEnd,ce=X-M,q=P.value.slice(0,M),ee=P.value.slice(X),pe=P.value.slice(M,X);if(M===X){const Le=M+E.length+C.length+R;P.value=q+E+C+ee,P.focus(),P.selectionStart=Le,P.selectionEnd=Le}else C?(P.value=q+E+pe+C+ee,P.focus(),P.selectionStart=M,P.selectionEnd=M+E.length+ce+C.length):(P.value=q+E+ee,P.focus(),P.selectionStart=M,P.selectionEnd=M+E.length);g()},b=E=>{v(` ${E} `)},y=()=>{v(" ![","](https://) ",-2)},$=()=>{v(" [","](https://) ",-2)},T=()=>{v("\n```javascript\n","\n```",-4)};return $e(()=>{he(()=>s.modelValue,(E="")=>{a.value=E,p.value&&(p.value.value=E)})}),$e(()=>{he(()=>s.previewed,E=>{E!==c.value&&(c.value=E)})}),Q(()=>{var E;s.autoFocus&&((E=p.value)==null||E.focus())}),(E,C)=>{const R=w("ulink"),P=w("i18n");return u(),m("div",{class:N(["pen",{bordered:E.bordered}])},[n("div",__,[n("div",{class:"input-wrapper","data-replicated-value":a.value},[n("textarea",{ref_key:"textareaRef",ref:p,class:"editor-input",required:"",disabled:E.disabled,autofocus:s.autoFocus,minlength:r(_u),maxlength:r(Oo),placeholder:r(l).t(r(k).COMMENT_POST_PLACEHOLDER),onInput:g,onFocus:C[0]||(C[0]=(...M)=>r(gn)&&r(gn)(...M)),onBlur:C[1]||(C[1]=(...M)=>r(Ft)&&r(Ft)(...M))},null,40,h_)],8,m_),d(fe,{name:"list-fade"},{default:f(()=>[c.value?(u(),m("div",g_,[d(lt,{markdown:a.value,compact:!0,"render-options":{sanitize:!0}},null,8,["markdown"])])):O("",!0)]),_:1})]),n("div",f_,[n("div",v_,[d(R,{class:"markdown",title:"markdown",href:r(V).MARKDOWN},{default:f(()=>C[3]||(C[3]=[n("i",{class:"iconfont icon-markdown"},null,-1)])),_:1},8,["href"]),E.hiddenStationery?O("",!0):(u(),m(L,{key:0},[n("button",{class:"emoji",title:"emoji",type:"button",disabled:E.disabled||c.value},[C[4]||(C[4]=n("i",{class:"iconfont icon-emoji"},null,-1)),n("div",b_,[n("ul",k_,[C[2]||(Xn(-1),(C[2]=(u(!0),m(L,null,F(r(uu),(M,X)=>(u(),m("li",{class:"item",key:X,onClick:ce=>b(M)},[n("span",null,S(M),1)],8,$_))),128))).cacheIndex=2,Xn(1),C[2])])])],8,y_),n("button",{class:"image",title:"image",disabled:E.disabled||c.value,onClick:xe(y,["prevent"])},C[5]||(C[5]=[n("i",{class:"iconfont icon-image"},null,-1)]),8,T_),n("button",{class:"link",title:"link",disabled:E.disabled||c.value,onClick:xe($,["prevent"])},C[6]||(C[6]=[n("i",{class:"iconfont icon-link"},null,-1)]),8,E_),n("button",{class:"code",title:"code",disabled:E.disabled||c.value,onClick:xe(T,["prevent"])},C[7]||(C[7]=[n("i",{class:"iconfont icon-code"},null,-1)]),8,w_),n("button",{class:N(["preview",{actived:c.value}]),title:"preview",disabled:E.disabled,onClick:xe(_,["prevent"])},[n("i",{class:N(["iconfont",c.value?"icon-eye-close":"icon-eye"])},null,2)],10,S_)],64))]),n("button",{type:"submit",class:"submit",disabled:E.disabled,onClick:h},[E.posting?(u(),G(P,{key:0,zh:"发布中...",en:"Posting..."})):r(i).type===r(De).Local?(u(),G(P,{key:1},{zh:f(()=>{var M;return[U("以 "+S((M=r(i).localProfile)==null?void 0:M.name)+" 的身份发布",1)]}),en:f(()=>{var M;return[U("Post as "+S((M=r(i).localProfile)==null?void 0:M.name),1)]}),_:1})):r(i).type===r(De).Disqus?(u(),G(P,{key:2},{zh:f(()=>{var M;return[U("以 "+S((M=r(i).disqusProfile)==null?void 0:M.name)+" 的身份发布",1)]}),en:f(()=>{var M;return[U("Post as "+S((M=r(i).disqusProfile)==null?void 0:M.name),1)]}),_:1})):(u(),G(P,{key:3,zh:"发布",en:"Publish"})),C[8]||(C[8]=n("i",{class:"iconfont icon-mail-plane"},null,-1))],8,C_)])],2)}}}),gs=D(A_,[["__scopeId","data-v-4da1b856"]]),I_=["id"],O_=I({__name:"index",props:{postId:{},fetching:{type:Boolean,default:!1},plain:{type:Boolean,default:!1}},setup(e){const t=e,{i18n:s,gtag:o,gState:l,route:i}=B(),a=Ue(),c=In(),p=A(()=>c.posting),_=A(()=>c.fetching),h=A(()=>t.fetching||!c.comments.length&&c.fetching),g=z(),v=A(()=>p.value&&g.value==="root"),b=A(()=>p.value&&g.value==="reply"),y=de({sort:ot.Desc,replyPId:0}),$=z({name:"",email:"",site:""}),T=de({content:"",previewed:!1}),E=()=>{T.content=""},C=()=>{T.previewed=!1},R=()=>{y.replyPId=0},P=Y=>{y.replyPId=Y,o==null||o.event("reply_comment",{event_category:J.Comment})},M=(Y={},H)=>{const x={...Y,sort:y.sort,post_id:t.postId};return c.fetchList(x,H)},X=Y=>{y.sort!==Y&&(y.sort=Y,M(),He(Ut))},ce=Y=>{const H=c.comments,x=Ht(H[H.length-2].id);M({page:Y},!0).then(()=>{Me().then(()=>{He(x)})})},q=Y=>{c.deleteComment(Y).catch(H=>{$t.failure("delete comment failed",H),alert(H.message)})},ee=async Y=>{if(o==null||o.event("submit_comment",{event_category:J.Comment}),!Y.content||!Y.content.trim())throw`${s.t(k.COMMENT_POST_CONTENT)} ?`;if(Y.content.length>Oo)throw`${s.t(k.COMMENT_POST_ERROR_CONTENT)} ?`;const H=a.user.type===De.Null,x=$.value;if(H){if(!x.name)throw s.t(k.COMMENT_POST_NAME)+"?";if(!x.email)throw s.t(k.COMMENT_POST_EMAIL)+"?"}const oe=H?xt(x):a.user.type===De.Local?a.user.localProfile:{name:a.user.disqusProfile.name,site:a.user.disqusProfile.url};oe.email||Reflect.deleteProperty(oe,"email"),oe.site||Reflect.deleteProperty(oe,"site");try{const le=await c.postComment({pid:Y.pid,post_id:t.postId,content:Y.content,agent:l.userAgent.original,author:oe});H&&a.saveLocalUser({...oe,email_hash:le.author.email_hash}),fu(Y.content)}catch(le){throw $t.failure("submit comment failed:",le),le.message}},pe=Y=>{const H=document.getElementById(Y),x=H.checkValidity();return H.reportValidity(),x?Promise.resolve():Promise.reject()},Le=async Y=>{await pe(ss),g.value="root";try{await ee({content:Y,pid:0}),C(),E()}catch(H){alert(H)}finally{g.value=Ge}},Ce=async Y=>{await pe(os),g.value="reply";try{await ee({content:Y,pid:y.replyPId}),R()}catch(H){alert(H)}finally{g.value=Ge}};return $e(()=>{he(h,Y=>{Y&&R()})}),et(()=>{R()}),Fa(()=>{c.clearList()}),Q(()=>{const Y=i.hash.slice(1);if(Y.startsWith(Gn)){const H=Ql(Y),x=Ht(H);x&&document.getElementById(x)&&setTimeout(()=>He(x),400)}}),(Y,H)=>{var oe;const x=w("divider");return u(),m("div",{id:Ut,class:"comment-box"},[d(ju,{total:(oe=r(c).pagination)==null?void 0:oe.total,loaded:r(c).comments.length,"post-id":Y.postId,fetching:Y.fetching,loading:h.value,plain:Y.plain,sort:y.sort,onSort:X},{extra:f(()=>[Z(Y.$slots,"topbar-extra",{},void 0,!0)]),_:3},8,["total","loaded","post-id","fetching","loading","plain","sort"]),d(x,{class:"divider",size:"lg"}),d(e_,{fetching:Y.fetching},{default:f(()=>{var le;return[d(hs,{profile:$.value,"onUpdate:profile":H[2]||(H[2]=be=>$.value=be),id:ss,disabled:h.value||v.value,total:(le=r(c).pagination)==null?void 0:le.total,"default-blossomed":!!Y.plain,"hidden-avatar":Y.plain},{pen:f(()=>[d(gs,{modelValue:T.content,"onUpdate:modelValue":H[0]||(H[0]=be=>T.content=be),previewed:T.previewed,"onUpdate:previewed":H[1]||(H[1]=be=>T.previewed=be),"auto-focus":!Y.plain,"hidden-stationery":Y.plain,disabled:v.value||h.value,posting:v.value,onSubmit:Le},null,8,["modelValue","previewed","auto-focus","hidden-stationery","disabled","posting"])]),_:1},8,["profile","id","disabled","total","default-blossomed","hidden-avatar"])]}),_:1},8,["fetching"]),d(x,{class:"divider",size:"lg"}),d(Xu,{fetching:h.value,"skeleton-count":Y.plain?3:5,"has-data":!!r(c).commentTreeList.length},kn({list:f(()=>[d(jp,{comments:r(c).commentTreeList,"reply-pid":y.replyPId,"hidden-avatar":Y.plain,"hidden-ua":Y.plain,"plain-vote":Y.plain,onDelete:q,onReply:P,onCancelReply:R},{reply:f(le=>[d(hs,{profile:$.value,"onUpdate:profile":H[3]||(H[3]=be=>$.value=be),id:os,disabled:!1,bordered:!0,"default-blossomed":!0,"hidden-avatar":Y.plain,"fixed-avatar":le.isChild},{pen:f(()=>[d(gs,{posting:b.value,bordered:!0,"auto-focus":!0,"hidden-stationery":Y.plain,onSubmit:Ce},null,8,["posting","hidden-stationery"])]),_:2},1032,["profile","id","hidden-avatar","fixed-avatar"])]),_:1},8,["comments","reply-pid","hidden-avatar","hidden-ua","plain-vote"])]),pagination:f(()=>{var le;return[d(Zp,{fetching:_.value,pagination:r(c).pagination,remain:r(c).pagination?((le=r(c).pagination)==null?void 0:le.total)-r(c).comments.length:0,onPage:ce},null,8,["fetching","pagination","remain"])]}),_:2},[Y.$slots["list-top-extra"]?{name:"extra",fn:f(()=>[Z(Y.$slots,"list-top-extra",{},void 0,!0),d(x,{class:"divider",size:"lg"})]),key:"0"}:void 0]),1032,["fetching","skeleton-count","has-data"])],8,I_)}}}),Po=D(O_,[["__scopeId","data-v-be92c8f2"]]),M_={class:"article-skeleton"},R_={class:"module"},L_={class:"content-skeleton"},P_={class:"module"},N_={class:"share-skeleton"},D_={class:"module"},G_=I({__name:"skeleton",props:{socialCount:{type:Number,required:!0},relatedCount:{type:Number,required:!0}},setup(e){return(t,s)=>{const o=w("skeleton-line"),l=w("skeleton-paragraph"),i=w("skeleton-base");return u(),m("div",M_,[n("div",R_,[n("div",L_,[d(o,{class:"title"}),d(l,{class:"content",lines:9,"line-height":"1.3em"})])]),n("div",P_,[n("div",N_,[(u(!0),m(L,null,F(e.socialCount,a=>(u(),G(i,{class:"item",key:a}))),128))])]),n("div",D_,[n("ul",{class:"related-skeleton",style:se({"grid-template-columns":`repeat(${e.relatedCount}, 1fr)`})},[(u(!0),m(L,null,F(e.relatedCount,a=>(u(),G(i,{key:a,class:"item"}))),128))],4)])])}}}),U_=D(G_,[["__scopeId","data-v-a6f71df9"]]),H_={class:"knowledge",key:"knowledge"},B_={class:"title"},z_={class:"text"},F_={key:0,class:"featured"},q_={class:"meta"},Y_=["id"],j_=["disabled"],V_=I({__name:"content",props:{article:{},readmoreId:{}},setup(e,{emit:t}){const s=e,o=t,l=Bn(),i=A(()=>Rn(s.article.origin)),a=A(()=>Ln(s.article.origin)),c=A(()=>Mn(s.article.origin)),p=z(),_=z(!1),h=A(()=>l.isLongContent&&!l.renderedFullContent),g=()=>{_.value=!0,Me(()=>{setTimeout(()=>{l.renderFullContent(),_.value=!1},0)})},v=()=>{o("rendered",p.value)};return Q(()=>v()),qa(()=>v()),(b,y)=>{var R;const $=w("i18n"),T=w("divider"),E=w("udate"),C=w("responsive");return u(),m("div",{ref_key:"element",ref:p,class:"detail"},[n("div",{class:N(["oirigin",{original:c.value,reprint:a.value,hybrid:i.value}])},[c.value?(u(),G($,{key:0,k:r(k).ORIGIN_ORIGINAL},null,8,["k"])):a.value?(u(),G($,{key:1,k:r(k).ORIGIN_REPRINT},null,8,["k"])):i.value?(u(),G($,{key:2,k:r(k).ORIGIN_HYBRID},null,8,["k"])):O("",!0)],2),n("div",H_,[n("h2",B_,[n("span",z_,S(b.article.title),1),b.article.featured?(u(),m("span",F_,[d($,{k:r(k).ARTICLE_FEATURED_SHORT},null,8,["k"])])):O("",!0)]),n("div",q_,[y[2]||(y[2]=n("i",{class:"iconfont icon-t"},null,-1)),d($,{zh:`共 ${r(me)(r(l).contentLength)} 字，需阅读 ${r(l).readMinutes} 分钟`,en:`${r(me)(r(l).contentLength)} characters, ${r(l).readMinutes} min read`},null,8,["zh","en"]),d(C,{desktop:""},{default:f(()=>[d(T,{type:"vertical",class:"vertical"}),n("span",null,[y[0]||(y[0]=n("i",{class:"iconfont icon-clock-outlined"},null,-1)),d(E,{to:"YMDm",date:b.article.created_at,separator:"/"},null,8,["date"])])]),_:1}),d(T,{type:"vertical",class:"vertical"}),n("span",null,[y[1]||(y[1]=n("i",{class:"iconfont icon-eye"},null,-1)),n("span",null,S(r(me)(b.article.meta.views))+" ",1),d($,{k:r(k).ARTICLE_VIEWS},null,8,["k"])])]),d(lt,{html:(R=r(l).defaultContent)==null?void 0:R.html},null,8,["html"]),d(fe,{name:"module",mode:"out-in",onAfterEnter:v},{default:f(()=>{var P;return[h.value?(u(),m("div",{key:0,id:b.readmoreId,class:"readmore"},[n("button",{class:"readmore-btn",disabled:_.value,onClick:g},[d($,{k:_.value?r(k).ARTICLE_RENDERING:r(k).ARTICLE_READ_ALL},null,8,["k"]),y[3]||(y[3]=n("i",{class:"iconfont icon-loadmore"},null,-1))],8,j_)],8,Y_)):r(l).renderedFullContent?(u(),G(lt,{key:1,html:(P=r(l).moreContent)==null?void 0:P.html},null,8,["html"])):O("",!0)]}),_:1})])],512)}}}),x_=D(V_,[["__scopeId","data-v-b7029f3b"]]),W_="modulepreload",Z_=function(e){return"/"+e},fs={},No=function(t,s,o){let l=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));l=Promise.all(s.map(c=>{if(c=Z_(c),c in fs)return;fs[c]=!0;const p=c.endsWith(".css"),_=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${_}`))return;const h=document.createElement("link");if(h.rel=p?"stylesheet":W_,p||(h.as="script"),h.crossOrigin="",h.href=c,a&&h.setAttribute("nonce",a),document.head.appendChild(h),p)return new Promise((g,v)=>{h.addEventListener("load",g),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}return l.then(()=>t()).catch(i=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i})},J_={class:"share-box"},Q_={class:"content"},X_={class:"header"},K_={class:"title"},em={class:"meta-info"},tm={key:0,class:"readmore-mask"},nm={class:"footer"},sm={class:"tip"},om={key:0,class:"share-rendering"},am={key:1,class:"share-image"},lm=["src","alt"],im=I({__name:"share",props:{article:{type:Object,required:!0},socials:{type:Array,default:()=>[]},disabledImageShare:{type:Boolean,default:!1}},setup(e){const t=e,{theme:s}=B(),o=A(()=>t.article.content.length>Kn),l=A(()=>{const y=t.article.content;if(!o.value)return y;const $=po(y,Kn);return y.slice(0,$)}),i=K(null),a=K(null),c=K(!1),p=K(null),_=A(()=>!!p.value),h=async y=>{const $=tt(Oe(t.article.id));a.value=await Ao($,{errorCorrectionLevel:"M"});const T=y.querySelectorAll("img");await Promise.all(Array.from(T).map(E=>new Promise(C=>{E.addEventListener("load",C),E.addEventListener("error",C)}))),await new Promise(E=>setTimeout(E,Os))},g=async y=>{const T=await(await No(()=>import("./vendor-DqPmrnwb.js").then(E=>E.ar),__vite__mapDeps([0,1,2]))).toBlob(y,{quality:1,skipAutoScale:!0,cacheBust:!0,skipFonts:!0,fetchRequestInit:{mode:"no-cors",cache:"no-cache"},filter:E=>!["IFRAME","VIDEO","AUDIO"].includes(E.tagName)});if(T)p.value=URL.createObjectURL(T);else throw new Error("Failed to generate share image")},v=()=>{c.value=!1,a.value=null,p.value=null},b=()=>{c.value=!0,Me(async()=>{i.value&&(await h(i.value),await g(i.value))})};return(y,$)=>{const T=w("i18n"),E=w("udate"),C=w("divider"),R=w("uimage"),P=w("loading-indicator"),M=w("popup");return u(),m("div",J_,[d(Io,{class:"share",socials:t.socials,"disabled-image-share":e.disabledImageShare,onShareAsImage:b},null,8,["socials","disabled-image-share"]),d(M,{visible:c.value,"scroll-close":!1,onClose:v},{default:f(()=>[n("div",{class:N(["share-as-image-modal",{rendered:_.value}])},[_.value?O("",!0):(u(),m("div",{key:0,ref_key:"shareTemplateElementRef",ref:i,class:N(["share-template",r(s).theme.value])},[n("div",Q_,[n("div",X_,[n("h1",K_,S(e.article.title),1),n("p",em,[d(T,{zh:"发布于 ",en:"Created at "}),d(E,{to:"YMDm",date:e.article.created_at,separator:"/"},null,8,["date"]),d(C,{type:"vertical",size:"sm"}),d(T,{zh:`全文共 ${r(me)(e.article.content.length)} 字`,en:`${r(me)(e.article.content.length)} characters`},null,8,["zh","en"])]),a.value?(u(),G(R,{key:0,class:"qrcode",src:a.value},null,8,["src"])):O("",!0)]),d(lt,{class:"markdown",markdown:l.value,"render-options":{lazyLoadImage:!1,imageSourceGetter:r(St)}},null,8,["markdown","render-options"]),o.value?(u(),m("div",tm)):O("",!0)]),n("div",nm,[n("p",sm,[d(T,{zh:"长按识别二维码，阅读全文，参与评论",en:"Long-press the QR code to read and discuss"})]),a.value?(u(),G(R,{key:0,class:"qrcode",src:a.value},null,8,["src"])):O("",!0),d(R,{class:"logo",src:"/images/logo.svg"})])],2)),d(fe,{name:"module"},{default:f(()=>[_.value?O("",!0):(u(),m("div",om,[d(P,{width:"1.8rem",height:"1.2rem"})]))]),_:1}),_.value?(u(),m("div",am,[n("img",{class:"image",src:p.value,alt:e.article.title},null,8,lm)])):O("",!0)],2)]),_:1},8,["visible"])])}}}),rm=D(im,[["__scopeId","data-v-0b17cca0"]]),cm={class:"actions"},dm={class:"line"},um={key:0},pm={key:0},_m={key:1},mm={key:0},hm={class:"line"},gm={key:0},fm=I({__name:"meta",props:{article:{},plain:{type:Boolean}},setup(e){const t=e,s=A(()=>tt(Oe(t.article.id)));return(o,l)=>{const i=w("i18n"),a=w("udate"),c=w("router-link"),p=w("divider"),_=w("ulink");return u(),m("div",{class:N(["meta",{plain:o.plain}])},[n("div",cm,[Z(o.$slots,"action",{},void 0,!0)]),n("div",dm,[d(i,{zh:"本文于",en:"Published at"}),d(c,{class:"link date",title:o.article.created_at,to:r(ko)(r(Gt)(new Date(o.article.created_at)))},{default:f(()=>[d(a,{to:"YMDm",date:o.article.created_at,separator:"/"},null,8,["date"])]),_:1},8,["title","to"]),d(i,{zh:"发布在",en:"in"}),(u(!0),m(L,null,F(o.article.categories,(h,g)=>(u(),m("span",{key:g},[d(c,{class:"link category",title:`${r(Te)(h.slug)} | ${h.description}`,to:r(ht)(h.slug)},{default:f(()=>[d(i,{zh:h.name,en:r(Te)(h.slug)},null,8,["zh","en"])]),_:2},1032,["title","to"]),o.article.categories[g+1]?(u(),m("span",um,[d(i,{zh:"、",en:","})])):O("",!0)]))),128)),o.article.categories.length?O("",!0):(u(),m("span",pm,[d(i,{zh:"未知分类下",en:"(no catgory)"})])),o.plain?(u(),m("br",_m)):(u(),G(p,{key:2,type:"vertical",size:"sm"})),(u(!0),m(L,null,F(o.article.tags,(h,g)=>(u(),m("span",{key:g},[d(c,{class:"link tag",title:`${r(Xe)(h)} | ${h.description}`,to:r(Yn)(h.slug)},{default:f(()=>[d(i,{zh:`#${h.name}`,en:`#${r(Xe)(h)}`},null,8,["zh","en"])]),_:2},1032,["title","to"]),o.article.tags[g+1]?(u(),m("span",mm,[d(i,{zh:"、",en:","})])):O("",!0)]))),128))]),n("div",hm,[l[3]||(l[3]=n("i",{class:"icon iconfont icon-creative-commons"},null,-1)),d(i,null,{zh:f(()=>[d(_,{class:"link copyright",href:"https://creativecommons.org/licenses/by-nc/4.0/deed.zh"},{default:f(()=>l[1]||(l[1]=[U(" 署名 - 非商业性使用 4.0 国际 ")])),_:1})]),en:f(()=>[d(_,{class:"link copyright",href:"https://creativecommons.org/licenses/by-nc/4.0/deed.en"},{default:f(()=>l[2]||(l[2]=[U(" Creative Commons BY-NC 4.0 ")])),_:1})]),_:1}),o.plain?(u(),m("br",gm)):(u(),G(p,{key:1,type:"vertical"})),n("span",{class:"link permalink",onClick:l[0]||(l[0]=h=>r(an)(s.value))},S(s.value),1)])],2)}}}),vm=D(fm,[["__scopeId","data-v-881631cf"]]),ym={class:"upvote"},bm={class:"wrapper"},km=["disabled"],$m={class:"text"},Tm={class:"parkinson-mask"},Em=I({__name:"upvote",props:{likes:{},isLiked:{type:Boolean},hiddenSponsor:{type:Boolean},enabledParkinson:{type:Boolean}},setup(e,{emit:t}){const s=e,o=t,l=z(!1),i=()=>{s.isLiked||o("like",()=>{l.value=!0})},a=()=>{o("sponsor")};return(c,p)=>{const _=w("i18n");return u(),m("div",ym,[n("div",bm,[n("button",{class:N(["button like",{liked:c.isLiked,parkinson:c.enabledParkinson,newliked:l.value}]),disabled:c.isLiked,onClick:i},[p[1]||(p[1]=n("i",{class:"icon iconfont icon-like"},null,-1)),n("span",$m,[d(_,null,{zh:f(()=>[U("真棒！"+S(c.likes),1)]),en:f(()=>[U(S(c.isLiked?"Upvoted":"Upvote")+" "+S(c.likes),1)]),_:1})]),c.enabledParkinson?(u(),m(L,{key:0},[n("span",Tm,[n("i",{class:N(["iconfont",l.value?"icon-like":"icon-like-pre"])},null,2)]),p[0]||(p[0]=n("div",{class:"parkinson-likes"},"+ 1",-1))],64)):O("",!0)],10,km),c.hiddenSponsor?O("",!0):(u(),m("button",{key:0,class:"button sponsor",onClick:a},p[2]||(p[2]=[n("i",{class:"icon iconfont icon-heart"},null,-1)])))])])}}}),wm=D(Em,[["__scopeId","data-v-ba25e1a7"]]),Sm={class:"related"},Cm={class:"thumbnail"},Am=["srcset"],Im=["srcset"],Om=["alt","src"],Mm={class:"title"},Rm=["title"],Lm=I({__name:"related",props:{articles:{default:()=>[]},columns:{default:4},count:{default:8}},setup(e){const t=e,{cdnDomain:s}=B(),o=(i,a)=>en(s,sn(rt(i),{resize:!0,width:466,height:168,format:a})),l=A(()=>{const i=[...t.articles].slice(0,t.count);return i.length>=t.count?i:[...i,...new Array(t.count-i.length).fill({_id:"",id:null,title:"-",description:"",thumbnail:null})]});return(i,a)=>{const c=w("router-link");return u(),m("div",Sm,[n("ul",{class:"articles",style:se({gridTemplateColumns:`repeat(${i.columns}, 1fr)`})},[(u(!0),m(L,null,F(l.value,(p,_)=>(u(),m("li",{class:N([{disabled:!p.id},"item"]),key:_},[d(c,{class:"item-article",title:p.title,to:r(Oe)(p.id)},{default:f(()=>[n("picture",Cm,[r(Fe)(p.thumbnail)?(u(),m(L,{key:0},[n("source",{srcset:o(p.thumbnail,"avif"),type:"image/avif"},null,8,Am),n("source",{srcset:o(p.thumbnail,"webp"),type:"image/webp"},null,8,Im)],64)):O("",!0),p.thumbnail?(u(),m("img",{key:1,class:"image",loading:"lazy",draggable:"false",alt:p.title,src:r(Fe)(p.thumbnail)?o(p.thumbnail):p.thumbnail},null,8,Om)):O("",!0)]),n("div",Mm,S(p.title),1),n("div",{class:"description",title:p.description},S(p.description),9,Rm)]),_:2},1032,["title","to"])],2))),128))],4)])}}}),Pm=D(Lm,[["__scopeId","data-v-12d97d18"]]),Nm={class:"neighbour"},Dm={class:"content"},Gm={class:"title"},Um={class:"description"},Hm={key:1,class:"null"},Bm={class:"content"},zm={class:"title"},Fm={class:"description"},qm={key:3,class:"null"},Ym=I({__name:"neighbour",props:{prev:{},next:{}},setup(e){return(t,s)=>{const o=w("router-link"),l=w("i18n");return u(),m("div",Nm,[t.prev?(u(),G(o,{key:0,class:"link prev",title:t.prev.title,to:r(Oe)(t.prev.id)},{default:f(()=>[s[0]||(s[0]=n("div",{class:"icon"},[n("i",{class:"iconfont icon-prev"})],-1)),n("div",Dm,[n("p",Gm,S(t.prev.title),1),n("p",Um,S(t.prev.description),1)])]),_:1},8,["title","to"])):(u(),m("div",Hm,[d(l,{zh:"已是最早",en:"NULL"})])),t.next?(u(),G(o,{key:2,class:"link next",title:t.next.title,to:r(Oe)(t.next.id)},{default:f(()=>[n("div",Bm,[n("p",zm,S(t.next.title),1),n("p",Fm,S(t.next.description),1)]),s[1]||(s[1]=n("div",{class:"icon"},[n("i",{class:"iconfont icon-next"})],-1))]),_:1},8,["title","to"])):(u(),m("div",qm,[d(l,{zh:"已是最新",en:"NULL"})]))])}}}),jm=D(Ym,[["__scopeId","data-v-d8fb2061"]]),Vm={key:0,class:"gpt-avatar"},xm={class:"gpt-body"},Wm={class:"gpt-header"},Zm={class:"left"},Jm={key:0,class:"model"},Qm={class:"right"},Xm={key:0,class:"created","data-allow-mismatch":""},Km={class:"gpt-content"},eh={class:"markdown"},th=I({__name:"chatgpt",props:{gptId:{},gptResponse:{},gptModel:{},gptTimestamp:{},hiddenAvatar:{type:Boolean}},emits:["click-link"],setup(e,{emit:t}){const s=e,o=t,l=()=>{o("click-link")},i=A(()=>{var c;return`/images/chatgpt/${(c=s.gptModel)!=null&&c.includes("4")?"4.0":"3.5"}.png`});return(a,c)=>{const p=w("uimage"),_=w("ulink"),h=w("udate");return u(),m("div",{class:N(["gpt-comment",{"hide-avatar":a.hiddenAvatar}])},[a.hiddenAvatar?O("",!0):(u(),m("div",Vm,[d(_,{class:"link",href:r(fn)(a.gptId),onClick:l},{default:f(()=>[d(p,{cdn:"",src:i.value,alt:a.gptModel,draggable:"false"},null,8,["src","alt"])]),_:1},8,["href"])])),n("div",xm,[n("div",Wm,[n("div",Zm,[d(_,{class:"username",href:r(fn)(a.gptId),onClick:l},{default:f(()=>c[0]||(c[0]=[U("ChatGPT")])),_:1},8,["href"]),a.gptModel?(u(),m("span",Jm,[c[1]||(c[1]=n("i",{class:"iconfont icon-cpu"},null,-1)),n("span",null,S(a.gptModel),1)])):O("",!0)]),n("div",Qm,[a.gptTimestamp?(u(),m("span",Xm,[d(h,{date:Number(a.gptTimestamp)*1e3,to:"ago"},null,8,["date"])])):O("",!0)])]),n("div",Km,[n("div",eh,[d(lt,{markdown:s.gptResponse,compact:!0,"render-options":{sanitize:!0}},null,8,["markdown"])])])])],2)}}}),nh=D(th,[["__scopeId","data-v-94cf15fd"]]),sh={class:"article-page"},oh={key:0},ah={class:"module margin background overflow"},lh={class:"module margin background"},ih={class:"module margin overflow"},rh={class:"module margin overflow"},ch={class:"comment"},dh=I({__name:"index",props:{articleId:{},isMobile:{type:Boolean}},setup(e){const t=e,{i18n:s,head:o,seoMeta:l,route:i,gtag:a,gState:c}=B(),{identity:p,githubSponsors:_,comment:h,articleDetail:g}=ve(),{article:v,fetching:b,prevArticle:y,nextArticle:$,relatedArticles:T}=$n(g),E=A(()=>!!(v.value&&p.isLikedPage(v.value.id))),C=A(()=>{var H;return((H=v.value)==null?void 0:H.extends)||[]}),R=A(()=>Ne(C.value,"chatgpt-conversation-id")),P=A(()=>Ne(C.value,"chatgpt-conversation-response")),M=A(()=>Ne(C.value,"chatgpt-conversation-timestamp")),X=A(()=>Ne(C.value,"chatgpt-conversation-model")),ce=()=>{a==null||a.event("chatgpt_comemnt_top_bar",{event_category:J.Comment})},q=()=>{a==null||a.event("chatgpt_comemnt_name_link",{event_category:J.Comment})},ee=()=>{_.fetch(),c.toggleSwitcher("sponsor",!0),a==null||a.event("article_sponsor",{event_category:J.Article})},pe=async H=>{if(E.value)return!1;a==null||a.event("article_like",{event_category:J.Article});try{await g.postArticleLike(v.value.id),p.likePage(v.value.id),H==null||H()}catch(x){const oe=s.t(k.POST_ACTION_ERROR);pt.failure(oe,x),alert(oe)}},Le=H=>{const x=h.fetchList({post_id:H}),oe=g.fetchCompleteArticle(H);return Promise.all([oe,x])},Ce=K(null),Y=H=>{var x,oe,le,be;(oe=(x=dn.verse).effect)==null||oe.call(x,H),Ce.value=((be=(le=dn.verse).style)==null?void 0:be.call(le,H))??null};return o(()=>({style:Ce.value?[{children:Ce.value}]:[]})),l(()=>{var H,x,oe,le,be,ft;return{pageTitle:(H=v.value)==null?void 0:H.title,description:((x=v.value)==null?void 0:x.description)||"",keywords:((le=(oe=v.value)==null?void 0:oe.keywords)==null?void 0:le.join(","))||((be=v.value)==null?void 0:be.title),ogType:"article",ogImage:(ft=v.value)==null?void 0:ft.thumbnail,ogImageWidth:1190,ogImageHeight:420}}),Se(()=>Le(t.articleId)),$e(()=>{he(()=>t.articleId,H=>Le(H),{flush:"post"})}),Q(()=>{var le,be,ft;const H=i.hash.slice(1);if(!H)return;const x=[...((le=g.defaultContent)==null?void 0:le.headings)??[],...((be=g.moreContent)==null?void 0:be.headings)??[]],oe=H===Jl?Ut:(ft=x.find(({anchor:oa})=>oa===H))==null?void 0:ft.id;oe&&document.getElementById(oe)&&setTimeout(()=>He(oe),400)}),(H,x)=>{const oe=w("placeholder"),le=w("ulink");return u(),m("div",sh,[d(oe,{loading:r(b)},{loading:f(()=>[d(U_,{"social-count":H.isMobile?3:8,"related-count":H.isMobile?2:3},null,8,["social-count","related-count"])]),default:f(()=>[r(v)?(u(),m("div",oh,[n("div",ah,[d(x_,{id:no,"readmore-id":so,article:r(v),onRendered:Y},null,8,["id","readmore-id","article"]),x[0]||(x[0]=n("div",{class:"divider"},null,-1)),d(vm,{id:oo,article:r(v),plain:H.isMobile},{action:f(()=>[d(wm,{likes:r(v).meta.likes,"is-liked":E.value,"hidden-sponsor":H.isMobile,"enabled-parkinson":!H.isMobile&&(r(c).userAgent.isChrome||r(c).userAgent.isFirefox),onLike:pe,onSponsor:ee},null,8,["likes","is-liked","hidden-sponsor","enabled-parkinson"])]),_:1},8,["id","article","plain"])]),n("div",lh,[x[1]||(x[1]=n("div",{class:"bridge left"},null,-1)),x[2]||(x[2]=n("div",{class:"bridge right"},null,-1)),d(rm,{id:Yl,article:r(v),"disabled-image-share":H.isMobile,socials:H.isMobile?[r(Dt).Wechat,r(Dt).Weibo,r(Dt).Twitter]:[]},null,8,["id","article","disabled-image-share","socials"])]),n("div",ih,[d(jm,{prev:r(y),next:r($)},null,8,["prev","next"])]),n("div",rh,[d(Pm,{id:ao,columns:H.isMobile?2:3,count:H.isMobile?4:6,articles:r(T)},null,8,["id","columns","count","articles"])])])):O("",!0)]),_:1},8,["loading"]),n("div",ch,[d(Po,{plain:H.isMobile,fetching:r(b),"post-id":H.articleId},kn({_:2},[R.value?{name:"topbar-extra",fn:f(()=>[d(le,{class:"chat-gpt-link",href:r(fn)(R.value),onClick:ce},{default:f(()=>x[3]||(x[3]=[n("i",{class:"iconfont icon-chat-gpt"},null,-1)])),_:1},8,["href"])]),key:"0"}:void 0,R.value&&P.value?{name:"list-top-extra",fn:f(()=>[d(nh,{"gpt-id":R.value,"gpt-response":P.value,"gpt-timestamp":M.value,"gpt-model":X.value,"hidden-avatar":H.isMobile,onClickLink:q},null,8,["gpt-id","gpt-response","gpt-timestamp","gpt-model","hidden-avatar"])]),key:"1"}:void 0]),1032,["plain","fetching","post-id"])])])}}}),vs=D(dh,[["__scopeId","data-v-06ea67b4"]]),uh={class:"list"},ph={class:"list"},_h={class:"type-icon"},mh={key:0,class:"iconfont icon-video"},hh={key:1,class:"iconfont icon-album"},gh={key:2,class:"iconfont icon-camera"},fh={class:"mask"},vh={key:0,class:"iconfont icon-music-play"},yh={key:1,class:"iconfont icon-eye"},bh={class:"item"},kh=I({__name:"instagram",setup(e){const t=z(!0),s=Qs(),o=A(()=>{var i;return((i=s.data)==null?void 0:i.data.slice(0,23))??[]}),l=i=>St(Ye(i)?To(i):vc(i,"t"));return Q(()=>{s.fetch().catch(()=>null).finally(()=>{t.value=!1})}),(i,a)=>{const c=w("skeleton-base"),p=w("empty"),_=w("uimage"),h=w("ulink"),g=w("placeholder");return u(),G(g,{loading:t.value,data:o.value},{loading:f(()=>[n("ul",uh,[(u(),m(L,null,F(24,v=>n("li",{class:"item",key:v},[d(c)])),64))])]),placeholder:f(()=>[d(p,{size:"large",bold:""})]),default:f(()=>[n("ul",ph,[(u(!0),m(L,null,F(o.value,(v,b)=>(u(),m("li",{class:"item",key:b},[d(h,{class:"link",href:v.permalink,title:v.caption},{default:f(()=>[d(_,{class:"cover",alt:v.caption,src:l(v)},null,8,["alt","src"]),n("div",_h,[r(Ye)(v)?(u(),m("i",mh)):r(zt)(v)?(u(),m("i",hh)):(u(),m("i",gh))]),n("div",fh,[r(Ye)(v)?(u(),m("i",vh)):(u(),m("i",yh))])]),_:2},1032,["href","title"])]))),128)),n("li",bh,[d(h,{class:"link more",href:r(V).INSTAGRAM},{default:f(()=>a[0]||(a[0]=[U("•••")])),_:1},8,["href"])])])]),_:1},8,["loading","data"])}}}),$h=D(kh,[["__scopeId","data-v-eb36989f"]]),Th={class:"youtube"},Eh={key:0},wh={key:2,class:"list"},Sh=["title"],Ch={class:"count"},Ah={class:"number"},Ih={class:"title"},Oh={class:"text"},Mh={class:"item"},Rh={class:"username"},Lh=I({__name:"youtube",setup(e){const t=Xs();return Q(()=>t.fetch().catch(()=>[])),(s,o)=>{const l=w("empty"),i=w("uimage"),a=w("ulink");return u(),m("div",Th,[r(t).fetching?(u(),m("span",Eh)):r(t).data.length?(u(),m("ul",wh,[(u(!0),m(L,null,F(r(t).data.slice(0,5),(c,p)=>(u(),m("li",{class:"item",title:c.snippet.title,key:p},[d(a,{class:"link",href:r(Eo)(c.id)},{default:f(()=>[d(i,{class:"cover",proxy:"",src:c.snippet.thumbnails.medium.url},null,8,["src"]),n("span",Ch,[o[0]||(o[0]=n("i",{class:"iconfont icon-video"},null,-1)),n("span",Ah,S(c.contentDetails.itemCount),1)]),n("p",Ih,[o[1]||(o[1]=n("i",{class:"iconfont icon-playlist"},null,-1)),n("span",Oh,S(c.snippet.title),1)]),o[2]||(o[2]=n("div",{class:"mask"},[n("i",{class:"iconfont icon-eye"})],-1))]),_:2},1032,["href"])],8,Sh))),128)),n("li",Mh,[d(a,{class:"link more",href:r(V).YOUTUBE_CHANNEL},{default:f(()=>[o[3]||(o[3]=n("i",{class:"iconfont icon-youtube"},null,-1)),n("span",Rh,S(r(Ee).YOUTUBE_CHANNEL_SHORT_ID),1),o[4]||(o[4]=n("span",{class:"text"},"•••",-1))]),_:1},8,["href"])])])):(u(),G(l,{key:1,size:"large",bold:""}))])}}}),Ph=D(Lh,[["__scopeId","data-v-a45d6554"]]),Nh={class:"skeletons"},Dh={class:"content"},Gh={class:"left"},Uh={class:"text"},Ie=I({name:"StatisticCount",props:{count:[Number,String],primary:Boolean,large:Boolean,kilo:Boolean,split:Boolean},render(){const e=Number(this.$props.count),t=this.kilo?On(e):this.split?me(e):String(e),s={primary:this.$props.primary,large:this.large};return ae("span",{class:["count",s]},t)}}),Hh=I({__name:"base",props:{brand:{},icon:{},platform:{},href:{},fetching:{type:Boolean},data:{}},setup(e){const{isDarkTheme:t}=B();return(s,o)=>{const l=w("skeleton-base"),i=w("empty"),a=w("ulink"),c=w("placeholder");return u(),m("div",{class:N(["statistic",[s.brand,{dark:r(t)}]])},[d(c,{loading:s.fetching,data:s.data},{loading:f(()=>[n("ul",Nh,[(u(),m(L,null,F(3,p=>d(l,{key:p,class:"item"})),64))])]),placeholder:f(()=>[d(i,{bold:"",size:"large"})]),default:f(()=>[n("div",Dh,[d(a,{class:"title",href:s.href},{default:f(()=>[n("span",Gh,[n("i",{class:N(["iconfont",s.icon])},null,2),n("span",Uh,S(s.platform),1)]),o[0]||(o[0]=n("span",{class:"right"},[n("i",{class:"iconfont icon-next"})],-1))]),_:1},8,["href"]),Z(s.$slots,"default",{},void 0,!0)])]),_:3},8,["loading","data"])],2)}}}),ln=D(Hh,[["__scopeId","data-v-d4e1aeac"]]),Bh={key:0},zh={key:1},Fh={key:2},qh={key:0},Yh={key:1},jh={key:2},Vh=I({__name:"douban",setup(e){const{isZhLang:t}=B(),s=Zs(),o=A(()=>{var a;return Math.trunc(((a=s.data)==null?void 0:a.total_spent)??0)}),l=A(()=>{var a;return(((a=s.data)==null?void 0:a.weekly_avg)??0).toFixed(2)}),i=z(!0);return Q(()=>{s.fetch().finally(()=>{i.value=!1})}),(a,c)=>{const p=w("i18n");return u(),G(ln,{brand:"douban",icon:"icon-douban",data:r(s).data,fetching:i.value,href:r(V).DOUBAN_MOVIE,platform:r(t)?"我在豆瓣":"Douban Movie"},{default:f(()=>[n("p",null,[c[0]||(c[0]=n("i",{class:"iconfont icon-video-outlined"},null,-1)),r(t)?(u(),m("span",Bh,"标记看过")):O("",!0),d(r(Ie),{large:"",primary:"",split:"",count:r(s).data.total_collections},null,8,["count"]),r(t)?(u(),m("span",zh,"部影片")):(u(),m("span",Fh,"films marked"))]),n("p",null,[c[1]||(c[1]=n("i",{class:"iconfont icon-clock-outlined"},null,-1)),r(t)?(u(),m("span",qh,"累计花费")):O("",!0),d(r(Ie),{split:"",count:o.value},null,8,["count"]),r(t)?(u(),m("span",Yh,"小时")):(u(),m("span",jh,"hours watching"))]),n("p",null,[c[5]||(c[5]=n("i",{class:"iconfont icon-week"},null,-1)),d(p,null,{zh:f(()=>[c[2]||(c[2]=U("平均每周 ")),d(r(Ie),{count:l.value},null,8,["count"]),c[3]||(c[3]=U(" 部影片"))]),en:f(()=>[d(r(Ie),{count:l.value},null,8,["count"]),c[4]||(c[4]=U(" films per week"))]),_:1})])]),_:1},8,["data","fetching","href","platform"])}}}),xh={key:0},Wh={key:1},Zh={key:2},Jh={key:0},Qh={key:1},Xh={key:2},Kh={key:0},eg={key:1},tg={key:2},ng=I({__name:"github",setup(e){const{isZhLang:t}=B(),s=xs(),o=z(!0);return Q(()=>{s.fetch().finally(()=>{o.value=!1})}),(l,i)=>(u(),G(ln,{brand:"github",icon:"icon-github",data:r(s).data,fetching:o.value,href:r(V).GITHUB,platform:r(t)?"我在 GitHub":"GitHub"},{default:f(()=>{var a,c,p;return[n("p",null,[i[0]||(i[0]=n("i",{class:"iconfont icon-star-outlined"},null,-1)),r(t)?(u(),m("span",xh,"共获得")):O("",!0),d(r(Ie),{large:"",primary:"",split:"",count:(a=r(s).data)==null?void 0:a.totalStarCount},null,8,["count"]),r(t)?(u(),m("span",Wh,"个 star")):(u(),m("span",Zh,"stars earned"))]),n("p",null,[i[1]||(i[1]=n("i",{class:"iconfont icon-repository"},null,-1)),r(t)?(u(),m("span",Jh,"共维护")):O("",!0),d(r(Ie),{count:(c=r(s).data)==null?void 0:c.repositoryCount},null,8,["count"]),r(t)?(u(),m("span",Qh,"个开源项目")):(u(),m("span",Xh,"open-source repos"))]),n("p",null,[i[2]||(i[2]=n("i",{class:"iconfont icon-organization"},null,-1)),r(t)?(u(),m("span",Kh,"维护/发起")):O("",!0),d(r(Ie),{count:(p=r(s).data)==null?void 0:p.organizationCount},null,8,["count"]),r(t)?(u(),m("span",eg,"个开源组织")):(u(),m("span",tg,"organizations"))])]}),_:1},8,["data","fetching","href","platform"]))}}),sg={key:0},og={key:1},ag={key:2},lg={key:0},ig={key:1},rg={key:2},cg=I({__name:"twitter",setup(e){const{isZhLang:t}=B(),s=Js(),o=z(!0),l=A(()=>{var a;return(a=s.data)!=null&&a.createdAt?new Date(s.data.createdAt):null}),i=A(()=>{if(!l.value)return null;const a=new Date,c=a.getFullYear()-l.value.getFullYear(),p=a.getMonth()-l.value.getMonth();let _=c,h=p;return p<0&&(_-=1,h+=12),{years:_,months:h}});return Q(()=>{s.fetch().finally(()=>{o.value=!1})}),(a,c)=>{const p=w("i18n");return u(),G(ln,{brand:"twitter",icon:"icon-twitter-x",data:r(s).data,fetching:o.value,href:r(V).TWITTER,platform:r(t)?"我在推特":"Twitter"},{default:f(()=>{var _,h;return[n("p",null,[c[4]||(c[4]=n("i",{class:"iconfont icon-calendar"},null,-1)),d(p,null,{zh:f(()=>{var g,v;return[n("span",null,[c[0]||(c[0]=U("活跃了")),d(r(Ie),{count:((g=i.value)==null?void 0:g.years)||"-"},null,8,["count"]),c[1]||(c[1]=U("年"))]),n("span",null,[c[2]||(c[2]=U("零")),d(r(Ie),{count:((v=i.value)==null?void 0:v.months)||"-"},null,8,["count"]),c[3]||(c[3]=U("个月"))])]}),en:f(()=>{var g;return[U(" Joined "+S((g=l.value)==null?void 0:g.toLocaleDateString("en-US",{year:"numeric",month:"long"})),1)]}),_:1})]),n("p",null,[c[5]||(c[5]=n("i",{class:"iconfont icon-edit"},null,-1)),r(t)?(u(),m("span",sg,"发布了")):O("",!0),d(r(Ie),{large:"",primary:"",split:"",count:((_=r(s).data)==null?void 0:_.tweetCount)||"-"},null,8,["count"]),r(t)?(u(),m("span",og,"条帖子")):(u(),m("span",ag,"tweets"))]),n("p",null,[c[6]||(c[6]=n("i",{class:"iconfont icon-follower"},null,-1)),r(t)?(u(),m("span",lg,"获得了")):O("",!0),d(r(Ie),{split:"",count:((h=r(s).data)==null?void 0:h.followerCount)||"-"},null,8,["count"]),r(t)?(u(),m("span",ig,"位关注者")):(u(),m("span",rg,"followers"))])]}),_:1},8,["data","fetching","href","platform"])}}}),dg={class:"line-1"},ug={key:0},pg={key:1},_g={key:2},mg={key:0},hg={key:1},gg={key:2},fg={key:0},vg={key:1},yg={key:2},bg=I({__name:"npm",setup(e){const{isZhLang:t}=B(),s=Ws(),o=z(!0);return Q(()=>{s.fetch().finally(()=>{o.value=!1})}),(l,i)=>(u(),G(ln,{brand:"npm",icon:"icon-npm",data:r(s).data,fetching:o.value,href:r(V).NPM_HOMEPAGE,platform:r(t)?"我在 NPM":"NPM"},{default:f(()=>{var a,c,p;return[n("p",dg,[i[0]||(i[0]=n("i",{class:"iconfont icon-package"},null,-1)),r(t)?(u(),m("span",ug,"发布了")):O("",!0),d(r(Ie),{count:(a=r(s).data)==null?void 0:a.totalPackages},null,8,["count"]),r(t)?(u(),m("span",pg,"个公共软件包")):(u(),m("span",_g,"packages"))]),n("p",null,[i[1]||(i[1]=n("i",{class:"iconfont icon-download"},null,-1)),r(t)?(u(),m("span",mg,"被下载")):O("",!0),d(r(Ie),{large:"",primary:"",split:"",count:(c=r(s).data)==null?void 0:c.totalDownloads},null,8,["count"]),r(t)?(u(),m("span",hg,"次")):(u(),m("span",gg,"downs"))]),n("p",null,[i[2]||(i[2]=n("i",{class:"iconfont icon-score"},null,-1)),r(t)?(u(),m("span",fg,"平均评分")):O("",!0),d(r(Ie),{count:(p=r(s).data)==null?void 0:p.averageScore},null,8,["count"]),r(t)?(u(),m("span",vg,"分")):(u(),m("span",yg,"average score"))])]}),_:1},8,["data","fetching","href","platform"]))}}),kg=D(bg,[["__scopeId","data-v-56c03f61"]]),$g=["data-date","data-total-count","data-article-count","data-tweet-count","data-instagram-count","data-contribution-count"],Tg={class:"point"},Eg={key:0,class:"tooltip"},wg={class:"date"},Sg={class:"counts"},Cg={class:"item article"},Ag={class:"count"},Ig={class:"item tweet"},Og={class:"count"},Mg={class:"item instagram"},Rg={class:"count"},Lg={class:"item contribution"},Pg={class:"count"},Ng=I({__name:"day",props:{date:{},tweets:{},instagrams:{},articles:{},contributions:{},githubColor:{}},setup(e){const t=e,{isDarkTheme:s}=B(),o=A(()=>t.articles+t.tweets+t.contributions+t.instagrams),l=i=>isNaN(i)?0:`${Math.floor(i*100)}%`;return(i,a)=>(u(),m("div",{class:N(["day",{dark:r(s)}]),"data-date":i.date,"data-total-count":o.value,"data-article-count":i.articles,"data-tweet-count":i.tweets,"data-instagram-count":i.instagrams,"data-contribution-count":i.contributions},[n("div",Tg,[n("div",{class:"item article",style:se({height:l(i.articles/o.value)})},null,4),n("div",{class:"item tweet",style:se({height:l(i.tweets/o.value)})},null,4),n("div",{class:"item instagram",style:se({height:l(i.instagrams/o.value)})},null,4),n("div",{class:"item contribution",style:se({height:l(i.contributions/o.value),backgroundColor:i.githubColor})},null,4)]),o.value?(u(),m("div",Eg,[n("p",wg,S(i.date),1),n("ul",Sg,[n("li",Cg,[a[0]||(a[0]=n("i",{class:"iconfont icon-quill"},null,-1)),n("span",Ag,S(i.articles),1),a[1]||(a[1]=U(" articles "))]),n("li",Ig,[a[2]||(a[2]=n("i",{class:"iconfont icon-twitter-x"},null,-1)),n("span",Og,S(i.tweets),1),a[3]||(a[3]=U(" tweets "))]),n("li",Mg,[a[4]||(a[4]=n("i",{class:"iconfont icon-instagram"},null,-1)),n("span",Rg,S(i.instagrams),1),a[5]||(a[5]=U(" instagrams "))]),n("li",Lg,[a[6]||(a[6]=n("i",{class:"iconfont icon-github"},null,-1)),n("span",Pg,S(i.contributions),1),a[7]||(a[7]=U(" contributions "))])])])):O("",!0)],10,$g))}}),Dg=D(Ng,[["__scopeId","data-v-46c07d3e"]]),Gg=I({__name:"index",setup(e){const{gtag:t}=B(),{articleCalendar:s,instagramCalendar:o,githubCalendar:l}=ve(),i=A(()=>new Map(l.days.map(T=>[T.date,T]))),a=T=>{var E;return((E=i.value.get(T))==null?void 0:E.count)||0},c=T=>{var E;return(E=i.value.get(T))==null?void 0:E.color},p=T=>{var E;return((E=o.data.find(C=>C.date===T))==null?void 0:E.count)||0},_=T=>{var E;return((E=s.data.find(C=>C.date===T))==null?void 0:E.count)||0},h=()=>{t==null||t.event("aggregate_calendar",{event_category:J.About})},v=Je(new Date),b=Array.from({length:v.day}).map((T,E)=>_t({...v,day:E+1})),y=(T,E)=>{const C=new Date(T.year,T.month-E,0),R=C.getDate();return Array.from({length:R}).map((P,M)=>_t({...Je(C),day:M+1}))},$=[y(v,11),y(v,10),y(v,9),y(v,8),y(v,7),y(v,6),y(v,5),y(v,4),y(v,3),y(v,2),y(v,1),b];return Q(()=>{s.fetch(),l.fetch(),o.fetch()}),(T,E)=>(u(),m("ul",{class:"aggregate-calendar",onMouseenter:h},[(u(),m(L,null,F($,(C,R)=>n("li",{class:"month",key:R},[(u(!0),m(L,null,F(C,(P,M)=>(u(),G(Dg,{key:M,date:P,tweets:0,articles:_(P),instagrams:p(P),contributions:a(P),"github-color":c(P)},null,8,["date","articles","instagrams","contributions","github-color"]))),128))])),64))],32))}}),Ug=D(Gg,[["__scopeId","data-v-f8141e72"]]),Hg=e=>({type:"FeatureCollection",features:e.map(t=>t.placemarks).flat().map(t=>({type:"Feature",geometry:{type:"Point",coordinates:t.coordinates},properties:{...t,icon:t.image?"attraction":"veterinary"}}))}),Bg=(e,t)=>({id:e,source:t,type:"symbol",layout:{"icon-allow-overlap":!0,"icon-size":1.2,"icon-image":["get","icon"],"text-field":["get","name"],"text-font":["Open Sans Bold","Arial Unicode MS Bold"],"text-size":11,"text-letter-spacing":.05,"text-offset":[0,1],"text-anchor":"top"},paint:{"text-color":"#202","text-halo-color":"#fff","text-halo-width":2}}),Do=(e,t,s)=>new e.Popup({closeButton:!1,offset:[0,-16],maxWidth:"280px"}).setLngLat(t).setHTML(s),zg=[{zh:"我的美食地图",en:"My Foodie Map",url:"https://goo.gl/maps/fzHHMCjuSbbJgBVt9"},{zh:"我的地图评价",en:"My map reviews",url:"https://google.com/maps/contrib/101107919754452588990/reviews"},{zh:"我去过的地方",en:"Places I've been to",url:"https://goo.gl/maps/kLVRWTMhZbbY4DNa7"},{zh:"我想去的地方",en:"Places I want to go",url:"https://goo.gl/maps/SpB4JJm9HYUiqjtc6"}],Go=e=>e||ke(qe(),"/images/anonymous.png"),_e={footprint:{[j.Chinese]:"路为纸，地成册，行作笔，心当墨；思无界，行有疆",[j.English]:"Every path i went astray built up my Rome."},sponsor:{[j.Chinese]:"随喜赞助",[j.English]:"Sponsor"},statement:{[j.Chinese]:"众而周知",[j.English]:"Statement"},feedback:{[j.Chinese]:"向我反馈",[j.English]:"Feedback"},archive:{[j.Chinese]:"笔文存档",[j.English]:"Archive"},photography:{[j.Chinese]:"行行摄摄",[j.English]:"PhotoGram"},guestbook:{[j.Chinese]:"给我留言",[j.English]:"Guestbook"},nft:{[j.Chinese]:"数字藏品",[j.English]:"NFTs"},rss:{[j.Chinese]:"长期订阅",[j.English]:"Subscribe"},discordGroup:{[j.Chinese]:"国际联谊",[j.English]:"Discord"},telegramGroup:{[j.Chinese]:"自由报社",[j.English]:"TG Group"},biography:{[j.Chinese]:["嗨！我是 Surmon，一名靠摸爬滚打自学的野生工程师，曾在美图秀秀、七牛云、字节跳动、加密交易所工作过；","如你所见，我有着还不错的设计灵感和编码能力，我经常会开源一些 “没用” 或 “有用” 的小物件，你都可以在 GitHub 找到。","在不远的未来，我可能会制作一些公共产品，希望得到你的关注和支持。","如果我的任何输出帮助了你，也期待你的慷慨赞助。","我把这里称之为自己的数字花园，祝你在这儿玩得愉快！",'（另外：如果你对我个人的成长轨迹感兴趣，可以阅读<a href="https://surmon.me/article/144" target="_blank">《何以为家》</a>'].join(""),[j.English]:["Hi! I'm Surmon, a software engineer who has worked at Meitu Inc., Qiniu Cloud, ByteDance, and Crypto Exchange.","I have developed strong design inspiration and coding skills.","I'm passionate about open-source software and problem-solving, and I hope my contributions can help you.",`I've been a self-taught programmer since 2015, and if you're interested in my journey, you can find the answers in this <a href="https://surmon.me/article/144" target="_blank">article</a> (Chinese).`,"I call this place my own digital garden. Have fun here!"].join(" ")}},Uo=()=>{const{i18n:e,seoMeta:t,isZhLang:s}=B(),{adminInfo:o}=ve();return t(()=>{var c;const l=Te(e.t(k.PAGE_ABOUT,j.English)),i=s.value?[e.t(k.PAGE_ABOUT),l]:[l],a=`${s.value?"关于":"About"} ${W.author}`;return{pageTitle:i.join(" | "),description:a,ogType:"profile",ogImage:(c=o.data)==null?void 0:c.avatar}})},Fg=Object.freeze([{name:"GitHub",url:"https://github.com"},{name:"Vite",url:"https://vitejs.dev/"},{name:"Disqus",url:"https://disqus.com/"}]),qg=I({__name:"mapbox",props:{gmGeoJson:{}},emits:["ready"],setup(e,{emit:t}){const s=e,o=t,{isDarkTheme:l}=B(),i=K(),a=K(),c=K(),p=K(!1),_=()=>l.value?vt.STYLE_DARK:vt.STYLE_LIGHT,h=()=>{var g;if(p.value&&(g=s.gmGeoJson)!=null&&g.features.length){const v=c.value,b="placemarks";v.getLayer(b)||(v.addLayer(Bg(b,{type:"geojson",data:s.gmGeoJson})),v.on("mouseenter",b,()=>{v.getCanvas().style.cursor="pointer"}),v.on("mouseleave",b,()=>{v.getCanvas().style.cursor=""}),v.on("click",b,y=>{const $=y.features[0].geometry.coordinates.slice(),T=y.features[0].properties.description;for(;Math.abs(y.lngLat.lng-$[0])>180;)$[0]+=y.lngLat.lng>$[0]?360:-360;Do(a.value,$,T).addTo(v)}))}};return $e(()=>{he(()=>l.value,()=>{var g;return(g=c.value)==null?void 0:g.setStyle(_())})}),$e(()=>{he(()=>s.gmGeoJson,()=>h())}),Q(()=>{Promise.all([No(()=>import("./mapbox-gl-BjfVpFuT.js").then(g=>g.m),__vite__mapDeps([3,1,0,2,4])).then(g=>g.default),new Promise(g=>window.setTimeout(g,600))]).then(([g])=>{g.accessToken=vt.TOKEN,a.value=g,c.value=new g.Map({container:i.value,center:vt.CENTER,zoom:vt.ZOOM,minZoom:2.2,attributionControl:!1,style:_()}),new g.Marker({color:W.primary,anchor:"bottom"}).setLngLat(Rt.coordinates).addTo(c.value),c.value.on("style.load",()=>{h()}),c.value.on("load",()=>{p.value=!0,h(),o("ready",{map:c.value,lib:a.value})})})}),et(()=>{var g;(g=c.value)==null||g.remove()}),(g,v)=>(u(),m("div",{class:"mapbox",ref_key:"mapboxRef",ref:i},null,512))}}),Ho=D(qg,[["__scopeId","data-v-bf283b45"]]),Yg={class:"modal"},jg={class:"panel"},Vg={class:"info"},xg={class:"title"},Wg={class:"description"},Zg={class:"folders"},Jg={class:"title"},Qg={class:"text"},Xg={class:"count"},Kg={key:0,class:"empty"},ef={key:1,class:"placemarks"},tf=["onClick"],nf={class:"text"},sf=I({__name:"modal",props:{name:{},description:{},gmGeoJson:{},gmFolders:{}},setup(e){const t=K(),s=K(),o=a=>{t.value=a.lib,s.value=a.map};let l=null;const i=a=>{s.value&&(l==null||l.remove(),l=Do(t.value,a.coordinates,a.description).addTo(s.value),s.value.flyTo({center:a.coordinates,zoom:10,speed:1.2,curve:1.2}))};return(a,c)=>{const p=w("uimage");return u(),m("div",Yg,[d(Ho,{class:"mapbox","gm-geo-json":a.gmGeoJson,onReady:o},null,8,["gm-geo-json"]),n("div",jg,[n("div",Vg,[n("h3",xg,S(a.name??"-"),1),n("p",Wg,S(a.description??"-"),1)]),n("ul",Zg,[(u(!0),m(L,null,F(a.gmFolders,(_,h)=>(u(),m("li",{class:"folder",key:h},[n("div",Jg,[c[0]||(c[0]=n("i",{class:"iconfont icon-route"},null,-1)),n("span",Qg,S(_.name),1),n("span",Xg,"("+S(_.placemarks.length)+")",1)]),_.placemarks.length?(u(),m("ul",ef,[(u(!0),m(L,null,F(_.placemarks,(g,v)=>(u(),m("li",{class:"placemark",key:v,onClick:b=>i(g)},[d(p,{class:"icon",cdn:!0,src:`/images/third-party/mapbox-${g.image?"attraction":"veterinary"}.svg`},null,8,["src"]),n("span",nf,S(g.name),1)],8,tf))),128))])):(u(),m("div",Kg,"null"))]))),128))])])])}}}),of=D(sf,[["__scopeId","data-v-2562b872"]]),af={class:"footprint-map"},lf=["placeholder"],rf={class:"toolbar"},cf={class:"legends"},df={class:"now"},uf={class:"folders"},pf={class:"text"},_f=["onClick"],mf={class:"text"},hf=I({__name:"index",setup(e){const t=K(),s=K(!1),o=Ul(),{isZhLang:l}=B(),i=A(()=>{var g;const h=[...((g=o.data)==null?void 0:g.Folder)??[]];return h.reverse(),h.map((v,b)=>{const y=v.Placemark??[],$=Array.isArray(y)?y:[y];return{name:v.name,placemarks:$.map((T,E)=>{var M;const[C,R]=T.Point.coordinates.split(",").map(Number),P=(M=T.ExtendedData)==null?void 0:M.Data;return{index:E,id:`placemark-${b}-${E}`,name:T.name,description:T.description,coordinates:[C,R],image:(P==null?void 0:P["@name"])==="gx_media_links"?P==null?void 0:P.value:null}})}})}),a=A(()=>Hg(i.value)),c=()=>{s.value=!0},p=h=>{t.value=h.map},_=()=>{var h;(h=t.value)==null||h.flyTo({center:Rt.coordinates,zoom:14})};return Q(()=>o.fetch()),(h,g)=>{const v=w("popup"),b=w("client-only"),y=w("ulink"),$=w("i18n");return u(),m("div",af,[d(b,null,{default:f(()=>[d(v,{visible:s.value,"onUpdate:visible":g[0]||(g[0]=T=>s.value=T),"scroll-close":!1},{default:f(()=>{var T,E;return[d(of,{class:"footprint-modal",name:(T=r(o).data)==null?void 0:T.name,description:(E=r(o).data)==null?void 0:E.description,"gm-folders":i.value,"gm-geo-json":a.value},null,8,["name","description","gm-folders","gm-geo-json"])]}),_:1},8,["visible"])]),_:1}),n("div",{class:"mapbox-wrapper",placeholder:r(l)?r(_e).footprint.zh:r(_e).footprint.en},[d(Ho,{class:"mapbox","gm-geo-json":a.value,onReady:p},null,8,["gm-geo-json"]),n("div",rf,[d(y,{class:"button",href:r(V).GOOGLE_MY_MAP},{default:f(()=>g[1]||(g[1]=[n("i",{class:"iconfont icon-google-maps"},null,-1)])),_:1},8,["href"]),n("button",{class:"button",onClick:c},g[2]||(g[2]=[n("i",{class:"iconfont icon-fullscreen"},null,-1)]))])],8,lf),n("div",cf,[n("div",df,[g[3]||(g[3]=n("i",{class:"iconfont icon-location"},null,-1)),n("span",{class:"text",onClick:_},S(r(l)?r(Rt).zh_title:r(Rt).en_title),1)]),n("ul",uf,[n("li",{class:"item",onClick:c},[g[4]||(g[4]=n("i",{class:"iconfont icon-route"},null,-1)),n("span",pf,[d($,{zh:"我的旅行足迹",en:"My footprints"})])]),(u(!0),m(L,null,F(r(zg),(T,E)=>(u(),m("li",{class:"item",key:E,onClick:C=>r(jn)(T.url)},[g[6]||(g[6]=n("i",{class:"iconfont icon-map"},null,-1)),n("span",mf,[d($,{zh:T.zh,en:T.en},null,8,["zh","en"]),g[5]||(g[5]=n("i",{class:"new-window-icon iconfont icon-new-window-s"},null,-1))])],8,_f))),128))])])])}}}),gf=D(hf,[["__scopeId","data-v-0ecf7e83"]]),ff={class:"about-page"},vf={class:"page-banner"},yf={class:"background"},bf=["src"],kf={class:"content"},$f={class:"profile"},Tf={class:"name"},Ef={class:"slogan"},wf={class:"description"},Sf={class:"socials"},Cf={class:"normal"},Af={class:"mini"},If={class:"qrcode-modal whatsapp"},Of={class:"text"},Mf={class:"qrcode-modal wechat"},Rf={class:"text"},Lf=["innerHTML"],Pf={class:"links"},Nf={class:"left"},Df={class:"text"},Gf={class:"statistics"},Uf={class:"plogs"},Hf={class:"vlogs"},Bf={class:"footprint"},zf={class:"calendar"},Ff={class:"footer-links"},qf={class:"friendlinks"},Yf=["href"],jf={class:"speciallinks"},Vf=["href"],xf=I({__name:"desktop",setup(e){const{gtag:t,gState:s,isZhLang:o,cdnDomain:l}=B(),{adminInfo:i,appOption:a,githubSponsors:c}=ve(),p=T=>{t==null||t.event(T,{event_category:J.About})},_=de({whatsapp:!1,wechat:!1}),h=()=>{_.whatsapp=!0,p("whatsapp_modal")},g=()=>{_.wechat=!0,p("wechat_modal")},v=()=>{c.fetch(),s.toggleSwitcher("sponsor",!0),p("sponsor_modal")},b=()=>{s.toggleSwitcher("statement",!0),p("statement_modal")},y=()=>{s.toggleSwitcher("feedback",!0),p("feedback_modal")};Uo(),Se(()=>Promise.all([i.fetch(),a.fetch()]));const $=[{class:"photography",icon:"icon-lens",i18n:_e.photography,route:Ae(ne.Photography)},{class:"nft",icon:"icon-opensea",i18n:_e.nft,href:V.OPENSEA},{class:"archive",icon:"icon-quill",i18n:_e.archive,route:Ae(ne.Archive)},{class:"guestbook",icon:"icon-comment",i18n:_e.guestbook,route:Ae(ne.Guestbook)},{class:"feedback",icon:"icon-mail-plane",i18n:_e.feedback,onClick:y},{class:"telegram",icon:"icon-telegram",i18n:_e.telegramGroup,href:V.TELEGRAM_GROUP},{class:"discord",icon:"icon-discord",i18n:_e.discordGroup,href:V.DISCORD_GROUP},{class:"sponsor",icon:"icon-heart",i18n:_e.sponsor,onClick:v},{class:"statement",icon:"icon-faq",i18n:_e.statement,onClick:b},{class:"rss",icon:"icon-rss",i18n:_e.rss,href:V.RSS}];return(T,E)=>{var pe,Le,Ce;const C=w("uimage"),R=w("webfont"),P=w("ulink"),M=w("popup"),X=w("client-only"),ce=w("i18n"),q=w("divider"),ee=w("container");return u(),m("div",ff,[n("div",vf,[n("div",yf,[n("video",{class:"video",loop:"",muted:"",autoplay:"",controls:!1,src:r(ke)(r(l),"/videos/clips/ocean-1.mp4")},null,8,bf)]),n("div",kf,[n("div",$f,[d(C,{class:"avatar",src:r(Go)((pe=r(i).data)==null?void 0:pe.avatar)},null,8,["src"]),n("h1",Tf,S(((Le=r(i).data)==null?void 0:Le.name)||"-"),1),n("p",Ef,S(((Ce=r(i).data)==null?void 0:Ce.slogan)||"-"),1)]),n("p",wf,[d(R,{bolder:""},{default:f(()=>[U(S(r(o)?r(W).zh_description:r(W).en_description),1)]),_:1})]),n("div",Sf,[n("span",Cf,[d(P,{class:"item github",href:r(V).GITHUB},{default:f(()=>E[2]||(E[2]=[n("i",{class:"iconfont icon-github"},null,-1),n("span",{class:"text"},"GitHub",-1)])),_:1},8,["href"]),d(P,{class:"item instagram",href:r(V).INSTAGRAM},{default:f(()=>E[3]||(E[3]=[n("i",{class:"iconfont icon-instagram"},null,-1),n("span",{class:"text"},"Instagram",-1)])),_:1},8,["href"]),d(P,{class:"item zhihu",href:r(V).ZHIHU},{default:f(()=>E[4]||(E[4]=[n("i",{class:"iconfont icon-zhihu-full"},null,-1)])),_:1},8,["href"])]),n("span",Af,[d(P,{class:"item twitter",href:r(V).TWITTER},{default:f(()=>E[5]||(E[5]=[n("i",{class:"iconfont icon-twitter-x"},null,-1)])),_:1},8,["href"]),d(P,{class:"item youtube",href:r(V).YOUTUBE_CHANNEL},{default:f(()=>E[6]||(E[6]=[n("i",{class:"iconfont icon-youtube"},null,-1)])),_:1},8,["href"]),d(P,{class:"item telegram",href:r(V).TELEGRAM},{default:f(()=>E[7]||(E[7]=[n("i",{class:"iconfont icon-telegram"},null,-1)])),_:1},8,["href"]),n("button",{class:"item whatsapp",onClick:h},[E[12]||(E[12]=n("i",{class:"iconfont icon-whatsapp"},null,-1)),d(X,null,{default:f(()=>[d(M,{visible:_.whatsapp,"onUpdate:visible":E[0]||(E[0]=Y=>_.whatsapp=Y),"scroll-close":!1},{default:f(()=>[n("div",If,[E[11]||(E[11]=n("div",{class:"background"},null,-1)),d(C,{class:"image",cdn:"",src:"/images/qrcodes/whatsapp.webp"}),n("span",Of,[E[9]||(E[9]=n("i",{class:"iconfont icon-whatsapp"},null,-1)),E[10]||(E[10]=U(" Let's chat on ")),d(P,{href:"https://www.whatsapp.com/"},{default:f(()=>E[8]||(E[8]=[U("WhatsApp")])),_:1})])])]),_:1},8,["visible"])]),_:1})]),n("button",{class:"item wechat",onClick:g},[E[16]||(E[16]=n("i",{class:"iconfont icon-wechat"},null,-1)),d(X,null,{default:f(()=>[d(M,{visible:_.wechat,"onUpdate:visible":E[1]||(E[1]=Y=>_.wechat=Y),"scroll-close":!1},{default:f(()=>[n("div",Mf,[E[15]||(E[15]=n("div",{class:"background"},null,-1)),d(C,{class:"image",cdn:"",src:"/images/qrcodes/wechat.webp"}),n("span",Rf,[d(ce,null,{en:f(()=>E[13]||(E[13]=[U("Friend me on WeChat | Channel")])),zh:f(()=>E[14]||(E[14]=[U("扫码加微 ｜ 关注视频号")])),_:1})])])]),_:1},8,["visible"])]),_:1})]),d(P,{class:"item linkedin",href:r(V).LINKEDIN},{default:f(()=>E[17]||(E[17]=[n("i",{class:"iconfont icon-linkedin"},null,-1)])),_:1},8,["href"]),d(P,{class:"item douban",href:r(V).DOUBAN},{default:f(()=>E[18]||(E[18]=[n("i",{class:"iconfont icon-douban"},null,-1)])),_:1},8,["href"])])]),d(q,{dashed:""}),n("p",{class:"biography",innerHTML:r(o)?r(_e).biography.zh:r(_e).biography.en},null,8,Lf)])]),d(ee,{class:"page-content"},{default:f(()=>{var Y;return[n("div",Pf,[(u(),m(L,null,F($,(H,x)=>d(En(H.onClick?"button":"ulink"),{key:x,class:N(["item",H.class]),href:H.href,to:H.route,onClick:H.onClick},{default:f(()=>[n("span",Nf,[n("i",{class:N(["iconfont",H.icon])},null,2),n("span",Df,[d(ce,Qe({ref_for:!0},H.i18n),null,16)])]),E[19]||(E[19]=n("span",{class:"right"},[n("i",{class:"iconfont icon-next"})],-1))]),_:2},1032,["class","href","to","onClick"])),64))]),n("div",Gf,[d(ng),d(kg),d(cg),d(Vh)]),n("div",Uf,[d($h)]),n("div",Hf,[d(Ph)]),n("div",Bf,[d(gf)]),n("div",zf,[d(Ug)]),n("div",Ff,[n("div",qf,[(u(!0),m(L,null,F(((Y=r(a).data)==null?void 0:Y.friend_links)||[],(H,x)=>(u(),m(L,{key:x},[x!==0?(u(),G(q,{key:0,type:"vertical",size:"lg"})):O("",!0),n("a",{href:H.value,class:"item",target:"_blank",rel:"external nofollow noopener"},S(H.name),9,Yf)],64))),128))]),n("div",jf,[(u(!0),m(L,null,F(r(Fg),(H,x)=>(u(),m(L,{key:x},[x!==0?(u(),G(q,{key:0,type:"vertical",size:"lg"})):O("",!0),n("a",{href:H.url,class:"item",target:"_blank",rel:"external nofollow noopener"},S(H.name),9,Vf)],64))),128))])])]}),_:1})])}}}),Wf=D(xf,[["__scopeId","data-v-81454db0"]]),Zf={class:"about-page"},Jf={class:"profile"},Qf={class:"avatar"},Xf={class:"name"},Kf={class:"slogan"},ev={class:"description"},tv=["innerHTML"],nv={class:"links"},sv={class:"list col-2"},ov={class:"list col-2"},av={class:"links"},lv={class:"list col-3"},iv={class:"list col-4"},rv={class:"qrcodes"},cv={class:"item"},dv={class:"item"},uv=I({__name:"mobile",setup(e){const{isZhLang:t}=B(),s=Pn();return Uo(),Se(()=>s.fetch()),(o,l)=>{var g,v,b;const i=w("i18n"),a=w("uimage"),c=w("webfont"),p=w("divider"),_=w("router-link"),h=w("ulink");return u(),m("div",Zf,[d(dt,{"is-mobile":!0,image:"/images/page-about/banner-mobile.webp","image-position":70,cdn:""},{title:f(()=>[d(i,{k:r(k).PAGE_ABOUT},null,8,["k"])]),_:1}),n("div",Jf,[n("div",Qf,[d(a,{class:"image",src:r(Go)((g=r(s).data)==null?void 0:g.avatar)},null,8,["src"])]),n("h2",Xf,S(((v=r(s).data)==null?void 0:v.name)||"-"),1),n("h5",Kf,S(((b=r(s).data)==null?void 0:b.slogan)||"-"),1),n("h4",ev,[d(c,{bolder:""},{default:f(()=>[U(S(r(t)?r(W).zh_description:r(W).en_description),1)]),_:1})]),d(p,{dashed:""}),n("p",{class:"biography",innerHTML:r(t)?r(_e).biography.zh:r(_e).biography.en},null,8,tv)]),n("div",nv,[n("div",sv,[d(_,{class:"item text-only",to:r(Ae)(r(ne).Archive)},{default:f(()=>[l[0]||(l[0]=n("i",{class:"iconfont icon-quill"},null,-1)),d(i,ze(Ve(r(_e).archive)),null,16)]),_:1},8,["to"]),d(_,{class:"item text-only",to:r(Ae)(r(ne).Guestbook)},{default:f(()=>[l[1]||(l[1]=n("i",{class:"iconfont icon-comment"},null,-1)),d(i,ze(Ve(r(_e).guestbook)),null,16)]),_:1},8,["to"])]),d(p,{dashed:""}),n("div",ov,[d(h,{class:"item discord",href:r(V).DISCORD_GROUP},{default:f(()=>[l[2]||(l[2]=n("i",{class:"iconfont icon-discord"},null,-1)),d(i,ze(Ve(r(_e).discordGroup)),null,16)]),_:1},8,["href"]),d(h,{class:"item telegram",href:r(V).TELEGRAM_GROUP},{default:f(()=>[l[3]||(l[3]=n("i",{class:"iconfont icon-telegram"},null,-1)),d(i,ze(Ve(r(_e).telegramGroup)),null,16)]),_:1},8,["href"])])]),n("div",av,[n("div",lv,[d(h,{class:"item center github",href:r(V).GITHUB},{default:f(()=>l[4]||(l[4]=[n("i",{class:"iconfont icon-github"},null,-1),n("span",{class:"text"},"GitHub",-1)])),_:1},8,["href"]),d(h,{class:"item center instagram",href:r(V).INSTAGRAM},{default:f(()=>l[5]||(l[5]=[n("i",{class:"iconfont icon-instagram"},null,-1),n("span",{class:"text"},"IG",-1)])),_:1},8,["href"]),d(h,{class:"item center twitter",href:r(V).TWITTER},{default:f(()=>l[6]||(l[6]=[n("i",{class:"iconfont icon-twitter-x"},null,-1),n("span",{class:"text"},"Twitter",-1)])),_:1},8,["href"])]),d(p,{dashed:""}),n("div",iv,[d(h,{class:"item telegram icon-only",href:r(V).TELEGRAM},{default:f(()=>l[7]||(l[7]=[n("i",{class:"iconfont icon-telegram"},null,-1)])),_:1},8,["href"]),d(h,{class:"item linkedin icon-only",href:r(V).LINKEDIN},{default:f(()=>l[8]||(l[8]=[n("i",{class:"iconfont icon-linkedin"},null,-1)])),_:1},8,["href"]),d(h,{class:"item zhihu icon-only",href:r(V).ZHIHU},{default:f(()=>l[9]||(l[9]=[n("i",{class:"iconfont icon-zhihu"},null,-1)])),_:1},8,["href"]),d(h,{class:"item douban icon-only",href:r(V).DOUBAN_MOVIE},{default:f(()=>l[10]||(l[10]=[n("i",{class:"iconfont icon-douban"},null,-1)])),_:1},8,["href"])])]),n("div",rv,[n("div",cv,[d(a,{cdn:"",class:"image",src:"/images/qrcodes/whatsapp.webp"})]),n("div",dv,[d(a,{cdn:"",class:"image",src:"/images/qrcodes/wechat.webp"})])])])}}}),pv=D(uv,[["__scopeId","data-v-2a9ac1a0"]]),_v={class:"guestbook-page"},mv={class:"desktop-banner"},hv=["disabled"],gv={class:"count"},fv={class:"slogan"},vv={class:"comment"},rn="/images/page-guestbook/banner.webp",yv=I({__name:"guestbook",props:{isMobile:{type:Boolean}},setup(e){const t=e,{i18n:s,seoMeta:o,gtag:l,gState:i,isZhLang:a}=B(),{identity:c,appOption:p,comment:_}=ve(),h=A(()=>c.isLikedPage(kt.Guestbook)),g=A(()=>{var $;return(($=p.data)==null?void 0:$.meta.likes)||0}),v=z(i.isHydrated.value),b=async()=>{if(h.value)return!1;l==null||l.event("like_site",{event_category:J.Universal});try{await p.postSiteLike(),c.likePage(kt.Guestbook)}catch($){const T=s.t(k.POST_ACTION_ERROR);pt.warn(T,$),alert(T)}},y=()=>{const $=p.fetch(),T=_.fetchList({post_id:kt.Guestbook});return Promise.all([$,T]).then(()=>{v.value=!1})};return o(()=>{const $=Te(s.t(k.PAGE_GUESTBOOK,j.English)),T=a.value?[s.t(k.PAGE_GUESTBOOK),$]:[$],E=a.value?`给 ${W.author} 留言`:"Leave a comment";return{pageTitle:T.join(" | "),description:E,ogType:"website",ogImage:rn,ogImageWidth:620,ogImageHeight:350}}),Se(()=>y()),($,T)=>{const E=w("uimage"),C=w("i18n"),R=w("webfont"),P=w("responsive");return u(),m("div",_v,[d(P,null,{desktop:f(()=>[n("div",mv,[d(E,{class:"image",src:rn,cdn:""}),n("button",{class:N(["like",{liked:h.value}]),disabled:h.value,onClick:b},[T[0]||(T[0]=n("i",{class:"icon iconfont icon-heart"},null,-1)),n("span",gv,S(h.value?`${g.value-1} + 1`:g.value),1)],10,hv),n("span",fv,[d(R,{class:"text"},{default:f(()=>[d(C,{k:r(k).GUESTBOOK_SLOGAN},null,8,["k"])]),_:1})])])]),mobile:f(()=>[d(dt,{class:"mobile-banner","is-mobile":!0,image:rn,"image-position":70,cdn:""},{title:f(()=>[d(C,{k:r(k).PAGE_GUESTBOOK},null,8,["k"])]),description:f(()=>[d(C,{k:r(k).GUESTBOOK_SLOGAN},null,8,["k"])]),_:1})]),_:1}),n("div",vv,[d(Po,{"post-id":0,plain:t.isMobile,fetching:v.value},null,8,["plain","fetching"])])])}}}),ys=D(yv,[["__scopeId","data-v-3360af46"]]),bv={class:"app"},kv={class:"logo"},$v={class:"title"},Tv={class:"description"},Ev={class:"screen"},wv={class:"download"},Sv={class:"rss"},Cv={class:"prefix"},Av={class:"deprecated"},Iv=["href"],Ov={class:"suffix"},bs="/images/page-app/logo.png",Mv=I({__name:"app",props:{isMobile:{type:Boolean}},setup(e){const t=e,{i18n:s,seoMeta:o,gtag:l,isZhLang:i}=B(),a=c=>{l==null||l.event(c,{event_category:J.App})};return o(()=>{const c=Te(s.t(k.PAGE_APP,j.English));return{pageTitle:(i.value?[s.t(k.PAGE_APP),c]:[c]).join(" | "),description:`${W.title} App ${i.value?"下载":"download"}`,ogImage:bs}}),(c,p)=>{const _=w("uimage"),h=w("i18n"),g=w("webfont"),v=w("ulink");return u(),m("div",{class:N(["app-page",{mobile:t.isMobile}])},[n("div",bv,[n("div",kv,[d(_,{alt:"app-logo",src:bs,cdn:""})]),n("h2",$v,S(r(W).title),1),n("p",Tv,[d(g,null,{default:f(()=>[d(h,{k:r(k).APP_SLOGAN},null,8,["k"])]),_:1})]),n("div",Ev,[d(_,{alt:"app-hot",class:"screen-img",src:"/images/page-app/hot.webp",cdn:""}),n("div",wv,[d(_,{class:"qrcode",alt:"qrcode",src:"/images/page-app/qrcode.png",cdn:""}),d(v,{class:"button",href:r(V).GITHUB_SURMON_ME_NATIVE+"#android",onMousedown:p[0]||(p[0]=b=>a("download_android_app"))},{default:f(()=>p[3]||(p[3]=[n("i",{class:"icon iconfont icon-android"},null,-1),n("span",{class:"text"},"Android",-1),n("i",{class:"new-window iconfont icon-new-window-s"},null,-1)])),_:1},8,["href"]),d(v,{class:"button",href:r(V).GITHUB_SURMON_ME_NATIVE+"#ios",onMousedown:p[1]||(p[1]=b=>a("download_ios_app"))},{default:f(()=>p[4]||(p[4]=[n("i",{class:"icon iconfont icon-apple"},null,-1),n("span",{class:"text"},"iOS",-1),n("i",{class:"new-window iconfont icon-new-window-s"},null,-1)])),_:1},8,["href"]),d(v,{class:"source-code",href:r(V).GITHUB_SURMON_ME_NATIVE,onMousedown:p[2]||(p[2]=b=>a("app_source_code"))},{default:f(()=>p[5]||(p[5]=[n("i",{class:"iconfont icon-git"},null,-1),U(" Source Code ")])),_:1},8,["href"])])]),n("p",Sv,[n("span",Cv,[d(h,{zh:"（",en:"["})]),n("span",Av,[d(h,{zh:"此项目已废弃！",en:"DEPRECATED!"})]),d(h,{zh:"建议使用",en:"Recommend"}),n("a",{class:"link",href:r(V).RSS,target:"_blank"},[d(h,{zh:"RSS 订阅",en:"RSS subscription"})],8,Iv),n("span",Ov,[d(h,{zh:"）",en:"]"})])])])],2)}}}),ks=D(Mv,[["__scopeId","data-v-f1840348"]]);var Vn=(e=>(e.GitHub="github",e.PayPal="paypal",e.Alipay="alipay",e.WeChatPay="wechat-pay",e.BitCoin="bitcoin",e.Ethereum="ethereum",e))(Vn||{});const Rv=Object.values(Vn),vn=[{id:"github",title:"GitHub Sponsors",logo:"/images/third-party/github-sponsors-logo.svg"},{id:"paypal",title:"PayPal me",link:V.PAYPAL,logo:"/images/third-party/paypal-logo.svg",qrcode:"/images/third-party/paypal-qrcode.webp"},{id:"alipay",title:"支付宝",text:"通过支付宝客户端扫码",logo:"/images/third-party/alipay-logo.svg",qrcode:"/images/third-party/alipay-qrcode.webp"},{id:"wechat-pay",title:"微信赞赏",text:"通过微信客户端扫码",logo:"/images/third-party/wechat-pay-logo.svg",qrcode:"/images/third-party/wechat-pay-qrcode.webp"},{id:"bitcoin",title:"BTC",address:Ee.BTC_ADDRESS,logo:"/images/third-party/btc-logo.svg",qrcode:"/images/third-party/btc-qrcode.webp"},{id:"ethereum",title:"ETH",address:Ee.ETH_ADDRESS,logo:"/images/third-party/eth-logo.svg",qrcode:"/images/third-party/eth-qrcode.webp"}],Bo=e=>{const{gtag:t}=B(),s=Vs(),o=z(vn[0].id),l=A(()=>vn.find(a=>a.id===o.value));return{activeId:o,activeProvider:l,setProviderId:a=>{Rv.includes(a)&&(o.value=a,t==null||t.event("sponsor_tab_switch",{event_category:J.Widget}))},githubSponsors:s}},Lv=["title","onClick"],Pv={class:"logo"},Nv={key:0,class:"title"},Dv=I({__name:"tabs",props:{state:{},hideTitle:{type:Boolean}},setup(e){return(t,s)=>{const o=w("uimage");return u(),m("div",{class:N(["sponsor-tabs",t.state.activeId])},[(u(!0),m(L,null,F(r(vn),(l,i)=>(u(),m("button",{key:i,class:N(["item",[l.id,{active:t.state.activeId.value===l.id}]]),title:l.title,onClick:a=>t.state.setProviderId(l.id)},[n("span",Pv,[d(o,{class:"image",alt:l.title,src:l.logo,cdn:""},null,8,["alt","src"])]),t.hideTitle?O("",!0):(u(),m("span",Nv,S(l.title),1))],10,Lv))),128))],2)}}}),zo=D(Dv,[["__scopeId","data-v-9e9db369"]]),Gv={key:0,class:"external"},Uv={key:2,class:"github-sponsors"},Hv={class:"text"},Bv={key:0,class:"sponsor-box"},zv={class:"total"},Fv={class:"active-total"},qv={class:"active-total"},Yv={class:"sponsors"},jv=I({__name:"provider",props:{state:{},maxSponsors:{default:19}},setup(e){const t=e,{isZhLang:s}=B(),o=A(()=>t.state.activeProvider.value),l=A(()=>t.state.githubSponsors.data?[...t.state.githubSponsors.data.currentSponsors.map(a=>({active:!0,_:a})),...t.state.githubSponsors.data.pastSponsors.map(a=>({active:!1,_:a}))]:[]),i=a=>{an(a).then(()=>{alert(s.value?"地址已复制到剪贴板！":"Address copied!")})};return(a,c)=>{const p=w("ulink"),_=w("uimage"),h=w("i18n");return u(),m("div",{class:N(["sponsor-provider",o.value.id])},[o.value.link||o.value.address||o.value.text?(u(),m("p",Gv,[o.value.link?(u(),m(L,{key:0},[d(p,{class:"link",href:o.value.link},{default:f(()=>[n("code",null,S(o.value.link),1)]),_:1},8,["href"]),c[1]||(c[1]=n("i",{class:"iconfont icon-new-window-s"},null,-1))],64)):O("",!0),o.value.address?(u(),m(L,{key:1},[n("code",{class:"link",onClick:c[0]||(c[0]=g=>i(o.value.address))},S(o.value.address),1),c[2]||(c[2]=n("i",{class:"iconfont icon-copy"},null,-1))],64)):O("",!0),o.value.text?(u(),m(L,{key:2},[U(S(o.value.text)+" ",1),c[3]||(c[3]=n("i",{class:"iconfont icon-qrcode"},null,-1))],64)):O("",!0)])):O("",!0),o.value.qrcode?(u(),G(_,{key:1,class:"qrcode",src:o.value.qrcode,cdn:""},null,8,["src"])):O("",!0),o.value.id==r(Vn).GitHub?(u(),m("div",Uv,[d(p,{class:"link",href:r(V).GITHUB_SPONSORS},{default:f(()=>[c[4]||(c[4]=n("i",{class:"iconfont icon-heart"},null,-1)),n("span",Hv,[d(h,{en:"Sponsor me on GitHub",zh:"通过 GitHub Sponsor 赞助我"})])]),_:1},8,["href"]),d(fe,{name:"module"},{default:f(()=>[l.value.length?(u(),m("div",Bv,[n("p",zv,[d(h,null,{zh:f(()=>{var g,v;return[c[5]||(c[5]=U(" 我在 GitHub Sponsors 累计已得到 ")),n("span",Fv,S((g=a.state.githubSponsors.data)==null?void 0:g.currentSponsors.length),1),U(" + "+S((v=a.state.githubSponsors.data)==null?void 0:v.pastSponsors.length)+" 位赞助者的支持 ",1)]}),en:f(()=>{var g,v;return[c[6]||(c[6]=U(" I have accumulated ")),n("span",qv,S((g=a.state.githubSponsors.data)==null?void 0:g.currentSponsors.length),1),U(" + "+S((v=a.state.githubSponsors.data)==null?void 0:v.pastSponsors.length)+" backers on GitHub Sponsors ",1)]}),_:1})]),n("div",Yv,[(u(!0),m(L,null,F(l.value.slice(0,a.maxSponsors),({_:g,active:v},b)=>(u(),G(p,{href:g.url,title:g.name,class:N(["item",v?"active":"inactive"]),key:b},{default:f(()=>[d(_,{class:"avatar",src:g.avatarUrl,alt:"@"+g.login},null,8,["src","alt"])]),_:2},1032,["href","title","class"]))),128)),l.value.length>a.maxSponsors?(u(),G(p,{key:0,class:"more-link",href:r(V).GITHUB_SPONSORS},{default:f(()=>[U(" + "+S(l.value.length-a.maxSponsors),1)]),_:1},8,["href"])):O("",!0)])])):O("",!0)]),_:1})])):O("",!0)],2)}}}),Fo=D(jv,[["__scopeId","data-v-2a8c75e5"]]),Vv={class:"sponsor-page"},xv={class:"page-content"},Wv=I({__name:"sponsor",setup(e){const{i18n:t,seoMeta:s,route:o,isZhLang:l}=B(),i=Bo();return s(()=>{const a=Te(t.t(k.PAGE_SPONSOR,j.English));return{pageTitle:(l.value?[t.t(k.PAGE_SPONSOR),a]:[a]).join(" | ")}}),$e(()=>{i.githubSponsors.fetch()}),Q(()=>{const a=o.hash.replace("#","");a&&i.setProviderId(a)}),(a,c)=>{const p=w("i18n"),_=w("webfont"),h=w("container");return u(),m("div",Vv,[d(dt,{image:"/images/page-sponsor/banner.webp",cdn:""},{title:f(()=>[d(_,null,{default:f(()=>[d(p,{zh:"赠吾玫瑰，手留余香",en:"Become a sponsor to me"})]),_:1})]),description:f(()=>[d(p,{zh:"你的慷慨赞助将是我持续输出的不竭动力",en:"Your generous financial support is my motivation to keep moving forward"})]),_:1}),n("div",xv,[d(h,{class:"tabs-wrapper"},{default:f(()=>[d(zo,{class:"sponsor-tabs",state:r(i)},null,8,["state"])]),_:1}),d(Fo,{class:"sponsor-provider",state:r(i)},null,8,["state"])])])}}}),Zv=D(Wv,[["__scopeId","data-v-e9774674"]]),Jv=I({__name:"skeleton",props:{columns:{},height:{},rows:{default:2}},setup(e){return(t,s)=>{const o=w("skeleton-base");return u(),m("ul",{class:"skeletons",style:se({gridTemplateColumns:`repeat(${t.columns}, 1fr)`})},[(u(!0),m(L,null,F(t.columns*t.rows,l=>(u(),m("div",{class:"item",style:se({height:`${t.height}px`}),key:l},[d(o)],4))),128))],4)}}}),Qv=D(Jv,[["__scopeId","data-v-b6d3478c"]]),Xv={class:"list-swiper"},Kv={class:"navigation prev"},e1=["disabled"],t1={class:"navigation next"},n1=["disabled"],s1=I({__name:"swiper",props:{data:{},rows:{default:2},columns:{default:5}},setup(e){const t=K(),s=de({canPrev:!1,canNext:!0}),o=()=>{var c;return(c=t.value)==null?void 0:c.slidePrev()},l=()=>{var c;return(c=t.value)==null?void 0:c.slideNext()},i=c=>{s.canNext=!c.isEnd,s.canPrev=!c.isBeginning},a=c=>{t.value=c,i(c)};return(c,p)=>(u(),m("div",Xv,[n("div",Kv,[n("button",{class:"button",disabled:!s.canPrev,onClick:o},p[0]||(p[0]=[n("i",{class:"iconfont icon-prev"},null,-1)]),8,e1)]),n("div",t1,[n("button",{class:"button",disabled:!s.canNext,onClick:l},p[1]||(p[1]=[n("i",{class:"iconfont icon-next"},null,-1)]),8,n1)]),d(r(jt),{class:"swiper",autoplay:!0,mousewheel:!1,"grab-cursor":!1,"allow-touch-move":!1,"slides-per-view":c.columns,"slides-per-group":c.columns,grid:{rows:c.rows,fill:"row"},"space-between":24,onSlideChange:i,onSwiper:a},{default:f(()=>[(u(!0),m(L,null,F(c.data,(_,h)=>(u(),G(r(Vt),{class:"slide-item",key:h},{default:f(()=>[Z(c.$slots,"item",Qe({ref_for:!0},{item:_,index:h}),void 0,!0)]),_:2},1024))),128))]),_:3},8,["slides-per-view","slides-per-group","grid"])]))}}),o1=D(s1,[["__scopeId","data-v-ac46d981"]]),a1=["onClick"],l1={class:"thumbnail"},i1={class:"published-at"},r1={class:"text","data-allow-mismatch":""},c1=["data-background-image"],d1={class:"title"},u1={class:"description"},p1=I({__name:"videos",props:{playlistId:{}},setup(e,{emit:t}){const s=e,o=t,{gtag:l,cdnDomain:i}=B(),a=z([]),c=z(!0),p=async()=>{try{c.value=!0;const g=ye.dispatch(ge.YouTubeVideoList,{id:s.playlistId});a.value=await(Wt?at(480,g):g)}catch{a.value=[]}finally{c.value=!1}},_=g=>{var b,y,$;const v=((b=g.high)==null?void 0:b.url)||((y=g.medium)==null?void 0:y.url)||(($=g.defult)==null?void 0:$.url);return v?ct(i,v):""},h=g=>{o("view",g),l==null||l.event("youtube_view",{event_category:J.YouTube})};return Q(()=>p()),(g,v)=>{const b=w("udate"),y=w("placeholder"),$=Re("lozad");return u(),G(y,{data:a.value,loading:c.value},{placeholder:f(()=>[Z(g.$slots,"empty",{},void 0,!0)]),loading:f(()=>[Z(g.$slots,"loading",{},void 0,!0)]),default:f(()=>[d(o1,{data:a.value},{item:f(({item:T})=>[n("div",{class:"video",onClick:E=>h(T)},[n("div",l1,[v[1]||(v[1]=n("div",{class:"mask"},[n("div",{class:"button"},[n("i",{class:"iconfont icon-music-play"})])],-1)),n("span",i1,[v[0]||(v[0]=n("i",{class:"iconfont icon-clock"},null,-1)),n("span",r1,[d(b,{to:"ago",date:T.snippet.publishedAt},null,8,["date"])])]),ue(n("div",{class:"background","data-background-image":_(T.snippet.thumbnails)},null,8,c1),[[$]])]),n("h5",d1,S(T.snippet.title),1),n("div",u1,S(T.snippet.description||"-"),1)],8,a1)]),_:1},8,["data"])]),_:3},8,["data","loading"])}}}),_1=D(p1,[["__scopeId","data-v-75dbd74d"]]),m1={class:"youtube-playlist"},h1={class:"playlist"},g1=["title"],f1={class:"youtube-modal"},v1=["src"],y1={key:0,class:"loading"},b1=I({__name:"playlist",props:{playlists:{}},setup(e){const t=z(!1),s=z(null),o=A(()=>!!s.value),l=A(()=>{const p=s.value;return p?yc(p.snippet.resourceId.videoId,p.snippet.playlistId):Ge}),i=p=>{t.value=!1,s.value=p},a=()=>{s.value=null,t.value=!1},c=()=>{t.value=!0};return(p,_)=>{const h=w("spin"),g=w("popup"),v=w("client-only");return u(),m("div",m1,[n("ul",h1,[(u(!0),m(L,null,F(p.playlists,(b,y)=>(u(),m("li",{class:"item",title:b.title,key:y},[Z(p.$slots,"title",Qe({ref_for:!0},{list:b,index:y}),void 0,!0),d(_1,{"playlist-id":b.id,onView:i},{empty:f(()=>[Z(p.$slots,"empty",{},void 0,!0)]),loading:f(()=>[Z(p.$slots,"loading",{},void 0,!0)]),_:2},1032,["playlist-id"])],8,g1))),128))]),d(v,null,{default:f(()=>[d(g,{visible:o.value,"scroll-close":!1,onClose:a},{default:f(()=>[n("div",f1,[n("iframe",{class:"youtube-iframe",src:l.value,onLoad:c,onError:c},null,40,v1),d(fe,{name:"module"},{default:f(()=>[t.value?O("",!0):(u(),m("div",y1,[d(h)]))]),_:1})])]),_:1},8,["visible"])]),_:1})])}}}),k1=D(b1,[["__scopeId","data-v-3eac507d"]]),$1={class:"youtube-page"},T1={class:"module-content"},E1={class:"module-title youtube"},w1=I({__name:"index",setup(e){const{seoMeta:t,isZhLang:s}=B(),{youtubePlayList:o}=ve(),l=A(()=>o.data.filter(i=>i.contentDetails.itemCount>1));return t(()=>({pageTitle:"YouTube",description:s.value?`${W.author} 的视频`:`${W.author}'s YouTube`})),Se(()=>o.fetch()),(i,a)=>{const c=w("i18n"),p=w("webfont"),_=w("ulink"),h=w("container"),g=w("empty");return u(),m("div",$1,[d(dt,{class:"page-banner",video:"/videos/clips/lake-1.mp4","video-position":58,cdn:""},{title:f(()=>[d(p,null,{default:f(()=>[d(c,{zh:"山河入梦，春尽江南",en:`${r(W).author}'s YouTube videos`},null,8,["en"])]),_:1})]),description:f(()=>[d(c,null,{zh:f(()=>[n("span",null,[a[1]||(a[1]=U(" 在我的 ")),d(_,{href:r(V).YOUTUBE_CHANNEL,class:"link"},{default:f(()=>a[0]||(a[0]=[U("YouTube 频道")])),_:1},8,["href"]),a[2]||(a[2]=U(" 查看更多 "))])]),en:f(()=>[a[4]||(a[4]=U(" View all videos on my ")),d(_,{href:r(V).YOUTUBE_CHANNEL,class:"link"},{default:f(()=>a[3]||(a[3]=[U("YouTube Channel")])),_:1},8,["href"])]),_:1})]),_:1}),d(h,{class:"page-bridge"}),d(h,{class:"page-content"},{default:f(()=>[n("div",T1,[d(k1,{playlists:l.value},{title:f(({list:v})=>[n("h4",E1,[d(_,{class:"link",href:r(Eo)(v.id)},{default:f(()=>[U(S(v.snippet.title)+" ("+S(v.contentDetails.itemCount)+") ",1)]),_:2},1032,["href"]),d(_,{class:"brand",href:r(V).YOUTUBE_CHANNEL},{default:f(()=>a[5]||(a[5]=[n("i",{class:"iconfont icon-youtube"},null,-1),n("span",{class:"text"},"YouTube · Channel",-1)])),_:1},8,["href"])])]),loading:f(()=>[d(Qv,{columns:5,rows:1,height:166,key:"loading",class:"module-loading"})]),empty:f(()=>[d(g,{class:"module-empty",key:"empty"},{default:f(()=>[d(c,{k:r(k).EMPTY_PLACEHOLDER},null,8,["k"])]),_:1})]),_:1},8,["playlists"])])]),_:1})])}}}),S1=D(w1,[["__scopeId","data-v-b7ce847b"]]),qo=e=>e==="CN",C1={class:"album-box"},A1={class:"navigation prev"},I1=["disabled"],O1={class:"navigation next"},M1=["disabled"],R1={class:"pagination"},L1=I({__name:"album",props:{media:{}},emits:["load"],setup(e,{emit:t}){const s=e,o=t,l=K([]),i=async g=>{const v=ge.InstagramMediaChildren,b=await ye.dispatch(v,{id:g});l.value=b},a=K(0),c=A(()=>a.value>0),p=A(()=>a.value<l.value.length-1),_=()=>{p.value&&a.value++},h=()=>{c.value&&a.value--};return Q(()=>{i(s.media.id).finally(()=>o("load"))}),(g,v)=>(u(),m("div",C1,[n("div",A1,[n("button",{class:"button",disabled:!c.value,onClick:h},v[0]||(v[0]=[n("i",{class:"iconfont icon-prev"},null,-1)]),8,I1)]),n("div",O1,[n("button",{class:"button",disabled:!p.value,onClick:_},v[1]||(v[1]=[n("i",{class:"iconfont icon-next"},null,-1)]),8,M1)]),n("div",R1,[(u(!0),m(L,null,F(l.value.length,b=>(u(),m("span",{class:N(["index",{active:b===a.value+1}]),key:b},null,2))),128))]),l.value[a.value]?Z(g.$slots,"child",ze(Qe({key:0},{activeIndex:a.value,activeMedia:l.value[a.value]})),void 0,!0):O("",!0)]))}}),P1=D(L1,[["__scopeId","data-v-88919f03"]]),N1={class:"instagram-gallery"},D1={class:"topbar"},G1={class:"left"},U1={key:0,class:"iconfont icon-video"},H1={key:1,class:"iconfont icon-album"},B1={key:2,class:"iconfont icon-camera"},z1={class:"center"},F1={class:"pagination"},q1={class:"right"},Y1={class:"timestamp"},j1={key:0,class:"loading"},V1=["src"],x1=["src","alt"],W1=["src"],Z1=["src","alt"],J1=["innerHTML"],Q1=I({__name:"gallery",props:{media:{},index:{},count:{}},setup(e){const{cdnDomain:t}=B(),s=z(!1),o=()=>{s.value=!0},l=i=>{const a=eo();return!!(a&&qo(a))?ct(t,i):i};return(i,a)=>{var h;const c=w("ulink"),p=w("udate"),_=w("spin");return u(),m("div",N1,[n("div",D1,[n("div",G1,[d(c,{class:"type-link",href:i.media.permalink},{default:f(()=>[r(Ye)(i.media)?(u(),m("i",U1)):r(zt)(i.media)?(u(),m("i",H1)):(u(),m("i",B1))]),_:1},8,["href"])]),n("div",z1,[n("span",F1,S(i.index+1)+" / "+S(i.count),1)]),n("div",q1,[n("span",Y1,[d(p,{to:"YMDm",date:i.media.timestamp,separator:"/"},null,8,["date"])])])]),n("div",{class:N(["content",{loaded:s.value}])},[d(fe,{name:"module"},{default:f(()=>[s.value?O("",!0):(u(),m("div",j1,[d(_)]))]),_:1}),r(Ye)(i.media)?(u(),m("video",{key:0,class:"video",src:l(i.media.media_url),autoplay:"",onLoadeddata:o},null,40,V1)):r(zt)(i.media)?(u(),G(P1,{key:1,class:"album",media:i.media,onLoad:o},{child:f(({activeMedia:g})=>[r(fc)(g)?(u(),m("img",{key:0,class:"image",src:l(g==null?void 0:g.media_url),alt:g==null?void 0:g.caption,draggable:"false"},null,8,x1)):O("",!0),r(Ye)(g)?(u(),m("video",{key:1,class:"video",autoplay:"",src:l(g==null?void 0:g.media_url)},null,8,W1)):O("",!0)]),_:1},8,["media"])):(u(),m("img",{key:2,class:"image",src:l((h=i.media)==null?void 0:h.media_url),alt:i.media.caption,draggable:"false",loading:"lazy",onLoad:o},null,40,Z1)),i.media.caption?(u(),m("p",{key:3,class:"caption",innerHTML:i.media.caption.replaceAll(`
`,"<br>")},null,8,J1)):O("",!0),d(c,{class:"username-link",href:i.media.permalink},{default:f(()=>[U("@"+S(r(Ee).INSTAGRAM_USERNAME),1)]),_:1},8,["href"])],2)])}}}),X1=D(Q1,[["__scopeId","data-v-a40e6dea"]]),K1={class:"instagram-grid"},ey={class:"medias"},ty=["title","onClick"],ny={class:"content"},sy=["data-background-image"],oy={class:"mask"},ay={class:"icon"},ly={key:0,class:"iconfont icon-music-play"},iy={key:1,class:"iconfont icon-eye"},ry={class:"type-icon"},cy={key:0,class:"iconfont icon-video"},dy={key:1,class:"iconfont icon-album"},uy={key:2,class:"iconfont icon-camera"},py={class:"date"},_y=I({__name:"grid",props:{medias:{}},setup(e){const t=e,{gtag:s,cdnDomain:o}=B(),l=z(),i=A(()=>Us(l.value)?null:t.medias[l.value]),a=h=>{l.value=h,s==null||s.event("instagram_view",{event_category:J.Photography})},c=()=>{l.value=Ge},p=h=>{const g=h==null?void 0:h.split("#")[0].trim().replaceAll(`
`," ");return g||h||"-"},_=h=>{const g=To(h),v=eo();return!!(v&&qo(v))?ct(o,g):g};return(h,g)=>{const v=w("udate"),b=w("popup"),y=w("client-only"),$=Re("lozad");return u(),m("div",K1,[n("ul",ey,[(u(!0),m(L,null,F(h.medias,(T,E)=>(u(),m("li",{class:N(["item",r(Ye)(T)?"video":"photo"]),key:E,title:p(T.caption),onClick:C=>a(E)},[n("div",ny,[ue(n("div",{class:"background","data-background-image":_(T)},null,8,sy),[[$]]),n("div",oy,[n("span",ay,[r(Ye)(T)?(u(),m("i",ly)):(u(),m("i",iy))])]),n("div",ry,[r(Ye)(T)?(u(),m("i",cy)):r(zt)(T)?(u(),m("i",dy)):(u(),m("i",uy))]),n("span",py,[d(v,{to:"YMD",date:T.timestamp,separator:"/"},null,8,["date"])])])],10,ty))),128))]),d(y,null,{default:f(()=>[d(b,{visible:!!i.value,"scroll-close":!1,onClose:c},{default:f(()=>[i.value?(u(),G(X1,{key:0,media:i.value,index:l.value,count:h.medias.length},null,8,["media","index","count"])):O("",!0)]),_:1},8,["visible"])]),_:1})])}}}),my=D(_y,[["__scopeId","data-v-40132b84"]]),hy={class:"photography-page"},gy={key:"loading",class:"module-loading"},fy=I({__name:"index",setup(e){const{instagramLatestMedias:t}=ve(),{i18n:s,seoMeta:o,isZhLang:l}=B(),i=z(!1),a=Ya([]),c=K(null),p=A(()=>!!(c.value&&!c.value.next)),_=async()=>{var g,v,b;try{i.value=!0;const y=ye.dispatch(ge.InstagramMedias,{after:((g=c.value)==null?void 0:g.cursors.after)??((b=(v=t.data)==null?void 0:v.paging)==null?void 0:b.cursors.after)}),$=await(Wt?at(360,y):y);a.push(...$.data),c.value=$.paging}finally{i.value=!1}},h=A(()=>{var v;return[...((v=t.data)==null?void 0:v.data)??[],...a]});return o(()=>{const g=Te(s.t(k.PAGE_PHOTOGRAPHY,j.English)),v=l.value?[s.t(k.PAGE_PHOTOGRAPHY),g]:[g],b=l.value?`${W.author} 的摄影作品`:`${W.author}'s photographs`;return{pageTitle:v.join(" | "),description:b}}),Se(()=>t.fetch()),(g,v)=>{const b=w("i18n"),y=w("webfont"),$=w("ulink"),T=w("container"),E=w("empty"),C=w("skeleton-base"),R=w("loading-indicator"),P=w("placeholder");return u(),m("div",hy,[d(dt,{class:"page-banner",video:"/videos/clips/ocean-5.mp4","video-position":72,cdn:""},{title:f(()=>[d(y,null,{default:f(()=>[d(b,{zh:"大千同在，万象共栖",en:`${r(W).author}'s photographs`},null,8,["en"])]),_:1})]),description:f(()=>[d(b,null,{zh:f(()=>[n("span",null,[v[1]||(v[1]=U("在我的 ")),d($,{href:r(V).INSTAGRAM,class:"link"},{default:f(()=>v[0]||(v[0]=[U("Instagram")])),_:1},8,["href"]),v[2]||(v[2]=U(" 主页查看更多"))])]),en:f(()=>[v[4]||(v[4]=U(" View all photographs on my ")),d($,{href:r(V).INSTAGRAM,class:"link"},{default:f(()=>v[3]||(v[3]=[U("Instagram")])),_:1},8,["href"])]),_:1})]),_:1}),d(T,{class:"page-bridge"}),d(T,{class:"page-content"},{default:f(()=>{var M;return[d(P,{data:(M=r(t).data)==null?void 0:M.data,loading:r(t).fetching},{placeholder:f(()=>[d(E,{class:"module-empty",key:"empty"},{default:f(()=>[d(b,{k:r(k).EMPTY_PLACEHOLDER},null,8,["k"])]),_:1})]),loading:f(()=>[n("div",gy,[(u(),m(L,null,F(4*2,X=>n("div",{class:"item",key:X},[d(C)])),64))])]),default:f(()=>[n("div",null,[d(my,{medias:h.value},null,8,["medias"]),!r(t).fetching&&!p.value?(u(),G(bo,{key:0,class:"loadmore",loading:i.value,onLoadmore:_},{normal:f(()=>[n("button",{class:"normal",onClick:_},v[5]||(v[5]=[n("i",{class:"iconfont icon-loadmore"},null,-1)]))]),loading:f(()=>[d(R,{class:"loading",width:"2.4rem",height:"1.4rem",gap:"1rem"})]),_:1},8,["loading"])):O("",!0)])]),_:1},8,["data","loading"])]}),_:1})])}}}),vy=D(fy,[["__scopeId","data-v-c928e606"]]);var st=(e=>(e.Code="code",e.Insight="insight",e))(st||{}),ne=(e=>(e.Home="home",e.Article="article-detail",e.CategoryFlow="category-flow",e.TagFlow="tag-flow",e.DateFlow="date-flow",e.SearchFlow="search-flow",e.Archive="archive",e.Guestbook="guestbook",e.About="about",e.App="app",e.Sponsor="sponsor",e.Photography="photography",e.YouTube="youtube",e.Error="error",e))(ne||{});const yy=[{path:"/",name:"home",components:{default:Qc,mobile:yt},meta:{responsive:!0,ssrCacheTTL:60*2}},{path:"/article/:article_id",name:"article-detail",components:{default:vs,mobile:vs},props:{default:e=>({articleId:Number(e.params.article_id)}),mobile:e=>({isMobile:!0,articleId:Number(e.params.article_id)})},meta:{responsive:!0,ssrCacheTTL:30,async validator({route:e,i18n:t}){if(!Number.isInteger(Number(e.params.article_id)))return Promise.reject({code:ut,message:t.t(k.QUERY_PARAMS_ERROR)+"Article ID → <number>"})}}},{path:"/category/:category_slug",name:"category-flow",components:{default:ld,mobile:yt},props:{default:e=>({categorySlug:e.params.category_slug}),mobile:e=>({categorySlug:e.params.category_slug})},meta:{responsive:!0,ssrCacheTTL:60*2,async validator({route:e,i18n:t}){const{category_slug:s}=e.params;if(!s)return Promise.reject({code:ut,message:t.t(k.QUERY_PARAMS_ERROR)+"Category slug → <string>"})}}},{path:"/tag/:tag_slug",name:"tag-flow",components:{default:dd,mobile:yt},props:{default:e=>({tagSlug:e.params.tag_slug}),mobile:e=>({tagSlug:e.params.tag_slug})},meta:{responsive:!0,ssrCacheTTL:60*2,async validator({route:e,i18n:t}){const{tag_slug:s}=e.params;if(!s)return Promise.reject({code:ut,message:t.t(k.QUERY_PARAMS_ERROR)+"Tag slug → <string>"})}}},{path:"/date/:date",name:"date-flow",components:{default:pd,mobile:yt},props:{default:e=>({date:e.params.date}),mobile:e=>({date:e.params.date})},meta:{responsive:!0,ssrCacheTTL:!1,async validator({route:e,i18n:t}){const{date:s}=e.params;if(!s||!Pi(s))return Promise.reject({code:ut,message:t.t(k.QUERY_PARAMS_ERROR)+`Invalid date ${s||""}`})}}},{path:"/search/:keyword",name:"search-flow",components:{default:md,mobile:yt},props:{default:e=>({keyword:e.params.keyword}),mobile:e=>({searchKeyword:e.params.keyword})},meta:{responsive:!0,ssrCacheTTL:!1,async validator({route:e,i18n:t}){if(!e.params.keyword)return Promise.reject({code:ut,message:t.t(k.QUERY_PARAMS_ERROR)+"Keywords ?"})}}},{path:"/archive",name:"archive",components:{default:jd,mobile:lu},meta:{responsive:!0,layout:Pe.Full,ssrCacheTTL:60*60}},{path:"/about",name:"about",components:{default:Wf,mobile:pv},meta:{responsive:!0,layout:Pe.Full,ssrCacheTTL:60*60*4}},{path:"/guestbook",name:"guestbook",components:{default:ys,mobile:ys},props:{mobile:{isMobile:!0}},meta:{responsive:!0,ssrCacheTTL:60*1}},{path:"/app",name:"app",components:{default:ks,mobile:ks},props:{mobile:{isMobile:!0}},meta:{responsive:!0,layout:Pe.Full,ssrCacheTTL:1/0}},{path:"/photography",name:"photography",component:vy,meta:{responsive:!1,layout:Pe.Full,ssrCacheTTL:60*60*1}},{path:"/youtube",name:"youtube",component:S1,meta:{responsive:!1,layout:Pe.Full,ssrCacheTTL:!1}},{path:"/sponsor",name:"sponsor",component:Zv,meta:{responsive:!1,layout:Pe.Full,ssrCacheTTL:1/0}},{name:"error",path:"/:error(.*)",component:{},meta:{ssrCacheTTL:!1,async validator({i18n:e}){return Promise.reject({code:pl,message:e.t(k.NOT_FOUND)})}}}],by=e=>{const t=ja({routes:yy,strict:!0,history:e.history,linkActiveClass:"link-active",scrollBehavior:()=>_n()});return e.beforeMiddleware&&(Array.isArray(e.beforeMiddleware)?e.beforeMiddleware.forEach(t.beforeResolve):t.beforeResolve(e.beforeMiddleware)),e.afterMiddleware&&(Array.isArray(e.afterMiddleware)?e.afterMiddleware.forEach(t.afterEach):t.afterEach(e.afterMiddleware)),t},ky=I({__name:"webfont",props:{bolder:{type:Boolean,default:!1},boldZh:{type:Boolean,default:!1},boldEn:{type:Boolean,default:!0},uppercase:{type:Boolean,default:!1}},setup(e){const{isZhLang:t}=B();return(s,o)=>(u(),m("span",{class:N(["webfont",s.bolder?"bolder":"medium",r(t)?"zh":"en",{boldZh:s.boldZh},{boldEn:s.boldEn},{uppercase:s.uppercase}])},[Z(s.$slots,"default",{},void 0,!0)],2))}}),$y=D(ky,[["__scopeId","data-v-a8a5b620"]]),Ty={class:"spinner-box"},Ey={class:"spinner-inner"},wy={class:"la-ball-beat"},Sy=I({__name:"spin",props:{loading:{type:Boolean,default:!0},color:{default:"rgba(197, 197, 197, 0.4)"},height:{default:"15px"},width:{default:"15px"},margin:{default:"5px"}},setup(e){const t=e,s=A(()=>({backgroundColor:t.color,height:t.height,width:t.width,margin:t.margin}));return(o,l)=>ue((u(),m("div",Ty,[n("div",Ey,[n("div",wy,[n("div",{style:se(s.value)},null,4),n("div",{style:se(s.value)},null,4),n("div",{style:se(s.value)},null,4)])])],512)),[[Tn,o.loading]])}}),Yo=D(Sy,[["__scopeId","data-v-cb97b9f8"]]),Cy=I({__name:"empty",props:{placeholder:{},i18nKey:{},bold:{type:Boolean},size:{}},setup(e){return(t,s)=>{const o=w("i18n");return u(),m("div",{class:N(["empty",[t.size,{bold:t.bold}]])},[Z(t.$slots,"default",{},()=>[t.placeholder?(u(),m(L,{key:0},[U(S(t.placeholder),1)],64)):(u(),G(o,{key:1,k:t.i18nKey||r(k).EMPTY_PLACEHOLDER},null,8,["k"]))],!0)],2)}}}),jo=D(Cy,[["__scopeId","data-v-1c18fe43"]]),Ay=I({__name:"divider",props:{type:{default:"horizontal"},size:{default:"default"},dashed:{type:Boolean,default:!1}},setup(e){return(t,s)=>(u(),m("div",{role:"separator",class:N(["divider",[t.type,t.size,{dashed:t.dashed},{slot:!!t.$slots.default}]])},[Z(t.$slots,"default",{},void 0,!0)],2))}}),Iy=D(Ay,[["__scopeId","data-v-6a26cacf"]]),Oy=I({name:"Udate",props:{to:{type:String,required:!0},date:{type:[String,Number,Date],required:!0},separator:{type:String,default:"-"}},setup(e){const{i18n:t}=B();return()=>{const s=e.date instanceof Date?e.date:new Date(e.date);if(e.to==="YMD")return Gt(s,e.separator);if(e.to==="YMDm"){const o=Gt(s,e.separator),l=s.getHours()>11?t.t(k.MOMENT_PM):t.t(k.MOMENT_AM);return`${o} ${l}`}if(e.to==="ago"){const o=(h,g)=>{const v=`${h} ${g}`;return t.t(k.MOMENT_AGO,null,{date:v})},l=Date.now()/1e3-Number(s)/1e3,i=3600,a=i*24,c=a*7,p=a*30,_=p*12;return l<i?~~(l/60)?o(~~(l/60),t.t(k.MOMENT_MINUTES)):t.t(k.MOMENT_JUST_NOW):l<a?o(~~(l/i),t.t(k.MOMENT_HOURS)):l<c?o(~~(l/a),t.t(k.MOMENT_DAYS)):l<p?o(~~(l/c),t.t(k.MOMENT_WEEKS)):l<_?o(~~(l/p),t.t(k.MOMENT_MONTHS)):o(~~(l/_),t.t(k.MOMENT_YEAR))}return null}}}),My=I({name:"Ulink",props:{to:{type:String,required:!1},href:{type:String,required:!1},external:{type:Boolean,default:!0},blank:{type:Boolean,default:!0},routerLink:{type:Object}},setup(e,t){return()=>{var o,l;const s={...t.attrs};if(e.to&&!e.to.startsWith("http")){const i={to:e.to,...e.routerLink??{}};return ae(Va,i,t.slots.default)}return e.external&&(s.rel="external nofollow noopener"),e.blank&&(s.target="_blank"),ae("a",{...s,href:e.href},(l=(o=t.slots).default)==null?void 0:l.call(o))}}}),Ry=I({name:"Uimage",props:{src:{type:String,required:!0},cdn:{type:Boolean,default:!1},proxy:{type:Boolean,default:!1},defer:{type:Boolean,default:!1}},setup(e){const{defer:t,cdnDomain:s}=B(),o=z(!1);return e.defer&&Jt(()=>{t.addTask(()=>{o.value=!0})}),()=>{const{src:l,cdn:i,proxy:a,defer:c,...p}=e;let _=l;return i&&(_=ke(s,l)),a&&(_=ct(s,l)),c&&!o.value?null:ae("img",{draggable:!1,...p,src:_})}}}),Ly=I({name:"Placeholder",props:{data:{type:[Array,Object,Boolean,Number],default:void 0},transition:{type:Boolean,default:!0},transitionName:{type:String,default:"module"},placeholder:String,i18nKey:String,loading:Boolean},emits:["after-enter"],setup(e,t){return()=>{const{data:s,placeholder:o,i18nKey:l,loading:i,transition:a,transitionName:c}=e,p=!Tt(s)&&(Array.isArray(s)&&!s.length||!s),_=()=>{var b,y;return o||l?ae(jo,{placeholder:o,i18nKey:l}):(y=(b=t.slots).placeholder)==null?void 0:y.call(b)},h=()=>{var b,y;return p?_():(y=(b=t.slots).default)==null?void 0:y.call(b)},g=()=>{var b,y;return((y=(b=t.slots).loading)==null?void 0:y.call(b))||ae(Yo,{loading:!0})},v=()=>i?g():h();return a?ae(fe,{name:c,mode:"out-in",onAfterEnter(...b){t.emit("after-enter",...b)}},()=>v()):v()}}}),Py=I({name:"ClientOnly",props:{placeholder:String,placeholderTag:{type:String,default:"div"},transition:{type:Boolean,default:!1},delay:{type:Number,default:0}},setup(e,t){const{gState:s}=B(),o=z(!!s.isHydrated.value);Q(()=>{if(!s.isHydrated.value){const i=()=>{o.value=!0};e.delay?setTimeout(i,e.delay):i()}});const l=(i,a)=>{if(!e.transition||Array.isArray(i)&&i.length>1)return i;const c=Array.isArray(i)?i[0]:i;return ae(fe,{name:"client-only",mode:"out-in"},()=>c?xa(c,{key:a}):ae("div",{key:"empty",class:"client-only-empty"}))};return()=>{var i,a;return o.value?l((a=(i=t.slots).default)==null?void 0:a.call(i),"result"):t.slots.placeholder?l(t.slots.placeholder(),"placeholder-slot"):e.placeholderTag&&e.placeholder?l(ae(e.placeholderTag,{class:"client-only-placeholder"},e.placeholder),"placeholder"):l(null)}}}),Ny=I({name:"Container",props:{tag:{type:String,default:"div"}},setup(e,t){return()=>{var s,o;return ae(e.tag,[ae("div",{class:"container"},[(o=(s=t.slots).default)==null?void 0:o.call(s)])])}}}),Dy=I({name:"Responsive",props:{both:Boolean,desktop:Boolean,mobile:Boolean},setup(e,t){const s=Zt();return()=>{var o,l,i,a,c,p,_,h,g,v;return e.both?(l=(o=t.slots).default)==null?void 0:l.call(o):e.desktop&&!s.userAgent.isMobile?(a=(i=t.slots).default)==null?void 0:a.call(i):e.mobile&&s.userAgent.isMobile?(p=(c=t.slots).default)==null?void 0:p.call(c):s.userAgent.isMobile?(h=(_=t.slots).mobile)==null?void 0:h.call(_):(v=(g=t.slots).desktop)==null?void 0:v.call(g)}}}),Gy=I({name:"DesktopOnly",setup(e,t){const s=Zt();return()=>{var o,l;return!s.userAgent.isMobile&&((l=(o=t.slots).default)==null?void 0:l.call(o))}}}),Uy=I({__name:"base",props:{width:{},height:{},circle:{type:Boolean,default:!1},radius:{default:2}},setup(e){const t=e,s=A(()=>({borderRadius:t.circle?"100%":`${t.radius}px`,...t.width&&{width:t.width+"px"},...t.height&&{height:t.height+"px"}}));return(o,l)=>(u(),m("div",{class:"skeleton base",style:se(s.value)},null,4))}}),Vo=D(Uy,[["__scopeId","data-v-07c3a0ad"]]),Hy=I({__name:"line",props:{width:{},height:{}},setup(e){const t=e,s=A(()=>({...t.width&&{width:t.width+"px"},...t.height&&{height:t.height+"px"}}));return(o,l)=>(u(),m("div",{class:"skeleton line",style:se(s.value)},[d(Vo)],4))}}),xo=D(Hy,[["__scopeId","data-v-fcaf01ec"]]),By=I({__name:"paragraph",props:{lines:{default:1},width:{},height:{},align:{type:Boolean,default:!1},lineHeight:{default:"1rem"}},setup(e){const t=e,s=A(()=>({...t.width&&{width:t.width+"px"},...t.height&&{height:t.height+"px"}})),o=l=>{const i={height:t.lineHeight,marginBottom:l===t.lines-1?"0":`calc(${t.lineHeight} * 0.75)`},a=l%3;return a&&(i.width=`${100-15*a}%`,i.marginLeft=t.align?"0":"6%"),i};return(l,i)=>(u(),m("div",{class:"skeleton paragraph",style:se(s.value)},[(u(!0),m(L,null,F(l.lines,(a,c)=>(u(),G(xo,{key:c,style:se(o(c)),class:"paragraph-line"},null,8,["style"]))),128))],4))}});function zy(e){e.component("Webfont",$y),e.component("Spin",Yo),e.component("Empty",jo),e.component("Divider",Iy),e.component("Udate",Oy),e.component("Ulink",My),e.component("Uimage",Ry),e.component("Placeholder",Ly),e.component("LoadingIndicator",li),e.component("ClientOnly",Py),e.component("Responsive",Dy),e.component("DesktopOnly",Gy),e.component("Container",Ny),e.component("SkeletonBase",Vo),e.component("SkeletonLine",xo),e.component("SkeletonParagraph",By)}const $s={duration:3e3,throttle:200},Fy=200,qy=e=>{const t=$s.duration,s=$s.throttle,o=z(0),l=z(!1),i=A(()=>1e4/t);let a=null,c=null;const p=y=>{o.value=Math.min(100,o.value+y)},_=()=>{a=setInterval(()=>{p(i.value)},100)},h=()=>{clearInterval(a),clearTimeout(c),a=null,c=null},g=()=>{h(),setTimeout(()=>{l.value=!1,Me().then(()=>{setTimeout(()=>{o.value=0},Fy)})},360)};return{isLoading:l,progress:o,start:()=>{h(),o.value=0,l.value=!0,c=setTimeout(()=>_(),s)},finish:()=>{o.value=100,g()},clear:h}},Yy={key:0,class:"spin"},jy=I({__name:"index",props:{spin:Boolean,color:String,height:{type:Number,default:3}},setup(e){const t=e,s=As(),o=qy();return s.beforeEach((l,i,a)=>{o.start(),a()}),s.afterEach(()=>o.finish()),s.onError(()=>o.finish()),et(()=>{o.clear()}),(l,i)=>(u(),m("div",{id:"navigation-progress",class:N({visible:r(o).isLoading.value}),style:se({"--height":t.height+"px"})},[n("div",{class:"progress",style:se({background:t.color||r(Ge),transform:`scaleX(${r(o).progress.value}%)`})},null,4),t.spin?(u(),m("div",Yy,i[0]||(i[0]=[n("div",{class:"spin-ring"},[n("div"),n("div"),n("div"),n("div")],-1)]))):O("",!0)],6))}}),Vy=D(jy,[["__scopeId","data-v-5a8d4910"]]),xy=I({__name:"emoji-rain",setup(e){const t=ke(qe(),"/images/emojis/funny.png"),s=z(null),o=de({chambering:!1,kichikuing:!1});return Q(()=>{window.$luanchEmojiRain=l=>{!o.chambering&&!o.kichikuing&&(o.chambering=!0,Me(()=>{s.value.width=document.documentElement.clientWidth||document.body.clientWidth,s.value.height=document.documentElement.clientHeight||document.body.clientHeight,new window.$Emoji233333({base:s.value,scale:.7,speed:12,increaseSpeed:.4,density:5,staggered:!0,emoji:t,...l,onStart(){o.kichikuing=!0},onEnded(){o.kichikuing=!1,o.chambering=!1}}).launch()}))}}),(l,i)=>(u(),m("div",{id:"emoji-rain",class:N({active:o.kichikuing})},[o.chambering?(u(),m("canvas",{key:0,ref_key:"rainBase",ref:s,class:"rain-base"},null,512)):O("",!0)],2))}}),Wy=D(xy,[["__scopeId","data-v-f075484f"]]),xn=e=>e.layout===Pe.Wide?Pe.Wide:e.layout===Pe.Full?Pe.Full:Pe.Normal,Zy={class:"code"},Jy={class:"message"},Qy=I({__name:"error",props:{error:{}},emits:["resolve"],setup(e,{emit:t}){const s=e,o=t,{isDarkTheme:l}=B(),i=()=>{o("resolve")};return(a,c)=>{const p=w("i18n"),_=w("uimage");return u(),m("div",{class:N(["error",{dark:r(l)}])},[n("h1",Zy,S(s.error.code),1),n("h3",Jy,[s.error.message?(u(),m(L,{key:0},[U(S(s.error.message),1)],64)):(u(),G(p,{key:1,k:r(k).NOT_FOUND},null,8,["k"]))]),n("p",{class:"link",onClick:i},[Z(a.$slots,"resolve-text",{},void 0,!0)]),d(_,{cdn:"",class:"logo",src:"/images/logo.svg"})],2)}}}),Xy=D(Qy,[["__scopeId","data-v-248eb1a9"]]),Ky={class:"captured"},eb=I({__name:"captured",setup(e){const{router:t,gState:s}=B(),o=()=>{t.push({name:ne.Home}).then(()=>{s.setLayoutColumn(xn(t.currentRoute.value.meta)),s.setRenderError(null)})};return Wa(l=>(s.setRenderError(l),!1)),(l,i)=>{const a=w("i18n");return u(),m("div",Ky,[r(s).renderError.value?(u(),G(Xy,{key:0,error:r(s).renderError.value,onResolve:o},{"resolve-text":f(()=>[d(a,{k:r(k).BACK_TO_HOME_PAGE},null,8,["k"])]),_:1},8,["error"])):Z(l.$slots,"default",{key:1})])}}}),tb=Sn("APP:MusicPlayer"),nb=e=>{const t=e.index??0,s=e.volume??.6,o=de({initialized:!1,index:t,volume:s,muted:!1,playing:!1,duration:0,currentTime:0,progress:0}),l=de({fetching:!1,songs:[],total:0,unplayableIndexs:[]}),i=A(()=>o.initialized&&!Tt(o.index)?l.songs[o.index]:Ge),a=new Audio;a.preload="metadata",a.autoplay=!1,a.loop=!1,a.volume=s;const c=()=>{a.pause()},p=$=>{$!=null?(o.index=$,o.currentTime=0,o.progress=0,a.src=l.songs[$].url,a.play().catch(()=>{})):a.play().catch(()=>{})},_=()=>{p(o.index>0?o.index-1:l.total-1)},h=()=>{p(o.index<l.total-1?o.index+1:0)},g=$=>{a.volume=$},v=()=>{a.muted=!a.muted},b=()=>{a.paused?p():c()};a.addEventListener("play",()=>{o.playing=!0}),a.addEventListener("pause",()=>{o.playing=!1}),a.addEventListener("ended",()=>{o.playing=!1,window.setTimeout(h,e.delay)}),a.addEventListener("volumechange",()=>{o.volume=a.volume,o.muted=a.muted}),a.addEventListener("durationchange",()=>{o.duration=a.duration}),a.addEventListener("timeupdate",()=>{o.currentTime=a.currentTime,o.progress=a.currentTime/a.duration}),a.addEventListener("error",()=>{tb.warn("something error! auto next",xt(r(i.value))),o.playing=!1,l.unplayableIndexs.push(o.index),window.setTimeout(h,1668)});const y=async()=>{try{if(l.fetching=!0,l.songs=await ye.dispatch(ge.NetEaseMusic),l.total=l.songs.length,l.total)a.src=l.songs[o.index].url,o.initialized=!0;else throw"Empty playlist!"}finally{l.fetching=!1}};return{audio:a,state:Be(o),playlist:Be(l),currentSong:i,init:y,play:p,pause:c,setVolume:g,toggleMuted:v,togglePlay:b,prevSong:_,nextSong:h}},Wo=Symbol("music-player"),sb=e=>{const t=nb(e);return{...t,install(s){s.provide(Wo,t)}}},Wn=()=>it(Wo),Zo=e=>e&&ct(qe(),`${e}?param=300y300`),ob={class:"music-player"},ab={class:"panel"},lb={class:"song"},ib=["src"],rb={key:0,class:"info"},cb={class:"title"},db={class:"name"},ub={class:"artist"},pb={class:"duration"},_b={class:"control"},mb=["disabled"],hb=["disabled"],gb=["disabled"],fb={class:"tools"},vb={class:"indexed"},yb=["disabled"],bb=["value"],kb={class:"progress"},$b={class:"songs"},Tb={class:"list"},Eb={class:"index"},wb={key:0,class:"play"},Sb=["onClick","disabled"],Cb={class:"text"},Ab=["title"],Ib={class:"duration"},Ob=I({__name:"player",setup(e){const t=Wn(),{state:s,playlist:o,currentSong:l}=t,i=K([]),a=_=>o.unplayableIndexs.includes(_),c=_=>{t.setVolume(Number(_.target.value))},p=_=>{const h=String(Math.floor(_/60)).padStart(2,"0"),g=String(Math.floor(_%60)).padStart(2,"0");return`${h}:${g}`};return Q(()=>{he(()=>s.index,_=>{var h;return(h=i.value[_])==null?void 0:h.scrollIntoView({behavior:"smooth"})}),Me(()=>{var _;(_=i.value[s.index])==null||_.scrollIntoView({behavior:"instant"})})}),(_,h)=>{var b;const g=w("ulink"),v=Re("disabled-wallflower");return ue((u(),m("div",ob,[n("div",ab,[n("div",lb,[n("img",{class:"cover",src:r(Zo)((b=r(l))==null?void 0:b.cover_art_url),draggable:"false"},null,8,ib),r(l)?(u(),m("div",rb,[n("p",cb,[n("span",db,S(r(l).name),1),n("span",ub,S(r(l).artist),1)]),n("p",pb,[n("span",null,S(p(r(s).currentTime)),1),h[5]||(h[5]=n("span",null," / ",-1)),n("span",null,S(p(r(l).duration/1e3)),1)])])):O("",!0)]),n("div",_b,[n("button",{class:"cut-song prev",disabled:!r(s).initialized,onClick:h[0]||(h[0]=(...y)=>r(t).prevSong&&r(t).prevSong(...y))},h[6]||(h[6]=[n("i",{class:"iconfont icon-music-prev"},null,-1)]),8,mb),n("button",{class:"toggle-play",disabled:!r(s).initialized,onClick:h[1]||(h[1]=(...y)=>r(t).togglePlay&&r(t).togglePlay(...y))},[n("i",{class:N(["iconfont",r(s).playing?"icon-music-pause":"icon-music-play"])},null,2)],8,hb),n("button",{class:"cut-song next",disabled:!r(s).initialized,onClick:h[2]||(h[2]=(...y)=>r(t).nextSong&&r(t).nextSong(...y))},h[7]||(h[7]=[n("i",{class:"iconfont icon-music-next"},null,-1)]),8,gb)]),n("div",fb,[n("span",vb,S(r(s).index+1)+" / "+S(r(o).total),1),d(g,{class:"playlist-link",href:r(V).MUSIC_163},{default:f(()=>h[8]||(h[8]=[n("i",{class:"iconfont icon-new-window-s"},null,-1)])),_:1},8,["href"]),n("button",{class:"toggle-muted",disabled:!r(s).initialized,onClick:h[3]||(h[3]=(...y)=>r(t).toggleMuted&&r(t).toggleMuted(...y))},[n("i",{class:N(["iconfont",r(s).muted?"icon-music-muted":"icon-music-unmuted"])},null,2)],8,yb),n("input",{class:"volume",type:"range",min:"0.1",max:"1",step:"0.1",value:r(s).volume,onInput:h[4]||(h[4]=y=>c(y))},null,40,bb)])]),n("div",kb,[n("div",{class:"played",style:se({width:`${r(s).progress*100}%`})},null,4)]),n("div",$b,[n("ul",Tb,[(u(!0),m(L,null,F(r(o).songs,(y,$)=>(u(),m("li",{ref_for:!0,ref_key:"songsRef",ref:i,class:N(["item",{playing:r(s).index===$,unplayable:a($)}]),key:$},[n("div",Eb,S(String($+1).padStart(2,"0")),1),r(s).index===$?(u(),m("span",wb,h[9]||(h[9]=[n("i",{class:"iconfont icon-music-unmuted"},null,-1)]))):(u(),m("button",{key:1,class:"play",onClick:T=>r(t).play($),disabled:a($)},h[10]||(h[10]=[n("i",{class:"iconfont icon-music-play"},null,-1)]),8,Sb)),d(g,{class:"name",title:y.name,href:r(bc)(y.id)},{default:f(()=>[n("span",Cb,S(y.name),1),h[11]||(h[11]=n("i",{class:"iconfont icon-new-window-s"},null,-1))]),_:2},1032,["title","href"]),n("div",{class:"artist",title:y.artist},S(y.artist),9,Ab),n("div",Ib,S(p(y.duration/1e3)),1)],2))),128))])])])),[[v]])}}}),Mb=D(Ob,[["__scopeId","data-v-c2877cd6"]]),Rb={class:"panel"},Lb={class:"control"},Pb=["disabled"],Nb=["disabled"],Db=["disabled"],Gb={key:0},Ub={class:"cd"},Hb=["src"],Bb=["disabled"],zb=I({__name:"handle",setup(e){const{gtag:t}=B(),s=Wn(),{state:o,currentSong:l}=s,i=z(!1),a=()=>{i.value=!i.value},c=p=>{t==null||t.event("music_player_widget",{event_category:J.Widget,event_label:p})};return(p,_)=>{var y;const h=w("i18n"),g=w("popup"),v=w("client-only"),b=Re("disabled-wallflower");return u(),m(L,null,[ue((u(),m("div",{id:"player",class:N({playing:r(o).playing})},[n("div",Rb,[n("div",Lb,[n("button",{class:"prev-song button",disabled:!r(o).initialized,onClick:_[0]||(_[0]=(...$)=>r(s).prevSong&&r(s).prevSong(...$)),onMousedown:_[1]||(_[1]=$=>c("prev song"))},_[11]||(_[11]=[n("i",{class:"iconfont icon-music-prev"},null,-1)]),40,Pb),n("button",{class:"next-song button",disabled:!r(o).initialized,onClick:_[2]||(_[2]=(...$)=>r(s).nextSong&&r(s).nextSong(...$)),onMousedown:_[3]||(_[3]=$=>c("next song"))},_[12]||(_[12]=[n("i",{class:"iconfont icon-music-next"},null,-1)]),40,Nb),n("button",{class:"muted-toggle button",disabled:!r(o).initialized,onClick:_[4]||(_[4]=(...$)=>r(s).toggleMuted&&r(s).toggleMuted(...$)),onMousedown:_[5]||(_[5]=$=>c("toggle muted"))},[n("i",{class:N(["iconfont",r(o).muted?"icon-music-muted":"icon-music-unmuted"])},null,2)],40,Db),n("button",{class:"player button",onClick:a,onMousedown:_[6]||(_[6]=$=>c("open player model"))},_[13]||(_[13]=[n("i",{class:"iconfont icon-netease-music"},null,-1)]),32)]),n("button",{class:"song-link",onClick:a,onMousedown:_[7]||(_[7]=$=>c("open player model"))},[r(l)?(u(),m("span",Gb,S(r(l).name),1)):(u(),G(h,{key:1,k:r(k).MUSIC_PLACEHOLDER},null,8,["k"]))],32)]),n("div",Ub,[n("img",{class:"image",src:r(Zo)((y=r(l))==null?void 0:y.cover_art_url)},null,8,Hb),n("button",{class:"toggle-button",disabled:!r(o).initialized,onClick:_[8]||(_[8]=(...$)=>r(s).togglePlay&&r(s).togglePlay(...$)),onMousedown:_[9]||(_[9]=$=>c("toggle play"))},[n("i",{class:N(["iconfont",r(o).playing?"icon-music-pause":"icon-music-play"])},null,2)],40,Bb)]),_[14]||(_[14]=n("div",{class:"trigger"},[n("i",{class:"iconfont icon-music"})],-1))],2)),[[b]]),d(v,null,{default:f(()=>[d(g,{visible:i.value,"onUpdate:visible":_[10]||(_[10]=$=>i.value=$),"scroll-close":!1},{default:f(()=>[d(Mb,{onClose:a})]),_:1},8,["visible"])]),_:1})],64)}}}),Fb=D(zb,[["__scopeId","data-v-667fedf0"]]),qb=I({__name:"flower",props:{id:{},x:{},y:{},text:{},zIndex:{}},emits:["ended"],setup(e,{emit:t}){const s=e,o=t,l=de({delay:1,timer:null,playing:!1}),i=A(()=>({top:s.y+"px",left:s.x+"px","z-index":99999+s.zIndex})),a=()=>{Me(()=>{setTimeout(()=>{l.playing=!0}),l.timer=window.setTimeout(()=>{l.playing=!1,Me(()=>o("ended",s.id))},l.delay*1e3)})};return a(),Q(a),et(()=>{l.timer&&(clearTimeout(l.timer),l.timer=null)}),(c,p)=>{const _=w("webfont");return u(),m("li",{class:N(["flower-item",{playing:l.playing}]),style:se(i.value)},[d(_,{bolder:""},{default:f(()=>[U(S(s.text),1)]),_:1})],6)}}}),Yb=D(qb,[["__scopeId","data-v-ff36f91b"]]),jb={id:"wallflower"},Vb={key:0,class:"garden-box"},xb=I({__name:"garden",setup(e){const t=["💙","🤍","❤️"],s=["富强","民主","文明","和谐","自由","平等","公正","法治","爱国","敬业","诚信","友善"],{isZhLang:o}=B(),l=de({id:0,contentIndex:-1,flowers:[]}),i=c=>{let p=c==null?void 0:c.target;for(;p;){if(p.getAttribute(pn)!=null)return;p=p.parentElement}const _=o.value?s:t;l.contentIndex++,l.contentIndex>=_.length&&(l.contentIndex=0),l.flowers.push({id:++l.id,x:c.x||c.clientX,y:c.y||c.clientY,text:_[l.contentIndex]})},a=c=>{const p=l.flowers.findIndex(_=>_.id===c);p>-1&&l.flowers.splice(p,1)};return Q(()=>window.addEventListener("click",i)),et(()=>window.removeEventListener("click",i)),(c,p)=>(u(),m("div",jb,[l.flowers.length?(u(),m("ul",Vb,[(u(!0),m(L,null,F(l.flowers,(_,h)=>(u(),G(Yb,{key:_.id,id:_.id,x:_.x,y:_.y,text:_.text,"z-index":h+1,onEnded:a},null,8,["id","x","y","text","z-index"]))),128))])):O("",!0)]))}}),Wb=D(xb,[["__scopeId","data-v-3d38357b"]]),Zb={class:"wall"},Jb=["title"],Qb={class:"story-box"},Xb={class:"title"},Kb={class:"sub-title"},ek={key:1,class:"title lonely"},tk={class:"desc"},nk={class:"tools"},sk=["disabled"],ok=["disabled"],ak=I({__name:"wall",setup(e,{emit:t}){const s=t,{i18n:o}=B(),l=Xt(),i=A(()=>l.papers(o.language.value)),a=z(0),c=A(()=>{var _;return(_=i.value)==null?void 0:_[a.value]}),p=()=>s("close");return(_,h)=>{const g=w("ulink"),v=Re("disabled-wallflower");return ue((u(),m("div",Zb,[d(fe,{name:"module",mode:"out-in"},{default:f(()=>[(u(),m("div",{ref:"picture-box",class:"picture-box",key:c.value.humanizedImageUrl,title:c.value.copyright,style:se({backgroundImage:`url(${c.value.humanizedImageUrl})`})},null,12,Jb))]),_:1}),n("div",Qb,[c.value.title?(u(),m(L,{key:0},[n("h2",Xb,S(c.value.title),1),n("p",Kb,S(c.value.copyright),1)],64)):(u(),m("h2",ek,S(c.value.copyright),1)),n("p",tk,S(c.value.desc),1),n("div",nk,[d(g,{class:"button",href:c.value.humanizedCopyrightUrl,title:c.value.bsTitle},{default:f(()=>h[2]||(h[2]=[n("i",{class:"iconfont icon-bing"},null,-1)])),_:1},8,["href","title"]),n("button",{class:"button",title:"Prev",disabled:a.value<=0,onClick:h[0]||(h[0]=b=>a.value--)},h[3]||(h[3]=[n("i",{class:"iconfont icon-prev"},null,-1)]),8,sk),n("button",{class:"button",title:"Next",disabled:a.value>=i.value.length-1,onClick:h[1]||(h[1]=b=>a.value++)},h[4]||(h[4]=[n("i",{class:"iconfont icon-next"},null,-1)]),8,ok),n("button",{class:"button",title:"Close",onClick:p},h[5]||(h[5]=[n("i",{class:"iconfont icon-cancel"},null,-1)]))])])])),[[v]])}}}),lk=D(ak,[["__scopeId","data-v-c874d029"]]),ik={id:"wallpaper"},rk=I({__name:"switcher",setup(e){const{i18n:t,gtag:s,isDarkTheme:o}=B(),l=Xt(),i=z(!1),a=()=>{i.value=!1},c=()=>{var p;(p=l.papers(t.language.value))!=null&&p.length?i.value=!0:alert("Something went wrong！"),s==null||s.event("wallpaper_modal",{event_category:J.Widget})};return(p,_)=>{const h=w("popup"),g=w("client-only"),v=Re("disabled-wallflower");return u(),m(L,null,[ue((u(),m("div",ik,[n("div",{class:N(["switcher",{dark:r(o)}]),onClick:c},_[1]||(_[1]=[n("div",{class:"title"},[n("i",{class:"iconfont icon-bing"}),n("span",{class:"text"},"BING")],-1)]),2)])),[[v]]),d(g,null,{default:f(()=>[d(h,{visible:i.value,"onUpdate:visible":_[0]||(_[0]=b=>i.value=b),"mask-close":!1,"scroll-close":!1},{default:f(()=>[d(lk,{onClose:a})]),_:1},8,["visible"])]),_:1})],64)}}}),ck=D(rk,[["__scopeId","data-v-d26fa21d"]]),dk={id:"background"},uk=I({__name:"background",setup(e){const{cdnDomain:t,isDarkTheme:s}=B(),o=ke(t,"/images/background.png");return(l,i)=>(u(),m("div",dk,[n("div",{class:N(["image",{dark:r(s)}]),style:se({backgroundImage:`url('${r(o)}')`})},null,6)]))}}),pk=D(uk,[["__scopeId","data-v-158a3048"]]),_k={id:"toolbox"},mk={class:"container"},hk={class:"tools"},gk=["title"],fk=["title"],vk=["title"],yk=I({__name:"toolbox",setup(e){const{i18n:t,gtag:s,gState:o}=B(),l=z(0),i=z(!1),a=z(!1),c=()=>{s==null||s.event("rss",{event_category:J.Widget})},p=()=>{o.toggleSwitcher("feedback",!0),s==null||s.event("feedback_modal",{event_category:J.Widget})},_=()=>{const v=()=>{let b=window.scrollY;const y=document.body.scrollHeight-window.innerHeight;if(a.value&&(b+=1),i.value&&(b-=1),b<0?b=0:b>=y&&(b=y),!(b>0&&b<y))return!1;if(window.scrollTo(0,b),a.value||i.value)l.value=window.requestAnimationFrame(v);else return window.cancelAnimationFrame(l.value),!1};l.value=window.requestAnimationFrame(v)},h=(v,b=!1)=>{i.value=v,window.cancelAnimationFrame(l.value),b&&_()},g=(v,b=!1)=>{a.value=v,window.cancelAnimationFrame(l.value),b&&_()};return(v,b)=>{const y=w("ulink"),$=Re("disabled-wallflower");return ue((u(),m("div",_k,[n("div",mk,[n("div",hk,[d(y,{class:"rss",href:r(V).RSS,onMousedown:c},{default:f(()=>b[6]||(b[6]=[n("i",{class:"iconfont icon-rss"},null,-1)])),_:1},8,["href"]),n("button",{class:"feedback",title:r(t).t(r(k).FEEDBACK),onClick:p},b[7]||(b[7]=[n("i",{class:"iconfont icon-mail-plane"},null,-1)]),8,gk),n("button",{class:"to-page-top",title:r(t).t(r(k).TO_TOP),onClick:b[0]||(b[0]=(...T)=>r(_n)&&r(_n)(...T)),onMouseover:b[1]||(b[1]=T=>h(!0,!0)),onMouseleave:b[2]||(b[2]=T=>h(!1))},b[8]||(b[8]=[n("i",{class:"iconfont icon-totop"},null,-1)]),40,fk),n("button",{class:"to-page-bottom",title:r(t).t(r(k).TO_BOTTOM),onClick:b[3]||(b[3]=(...T)=>r(Ke)&&r(Ke)(...T)),onMouseover:b[4]||(b[4]=T=>g(!0,!0)),onMouseleave:b[5]||(b[5]=T=>g(!1))},b[9]||(b[9]=[n("i",{class:"iconfont icon-tobottom"},null,-1)]),40,vk)])])])),[[$]])}}}),bk=D(yk,[["__scopeId","data-v-575bb276"]]),kk={class:"feedback"},$k={key:0,class:"submitted"},Tk={class:"text"},Ek={class:"title"},wk={class:"emotions"},Sk=["value","disabled","onUpdate:modelValue"],Ck={class:"emoji"},Ak={class:"text"},Ik={key:0,class:"arrow"},Ok={class:"input"},Mk=["disabled","placeholder"],Rk={class:"buttons"},Lk=["disabled"],Pk={class:"text"},Nk=["disabled"],Dk={class:"text"},Gk={key:2,class:"history"},Uk=I({__name:"feedback",setup(e,{emit:t}){const s=t,o=[{emoji:"😠",value:1,en:"Terrible",zh:"差劲"},{emoji:"🙁",value:2,en:"Bad",zh:"不喜欢"},{emoji:"😐",value:3,en:"Neutral",zh:"无感"},{emoji:"😃",value:4,en:"Great",zh:"喜欢"},{emoji:"🥰",value:5,en:"Amazing",zh:"太棒了"}],{appOption:l,identity:i}=ve(),{gtag:a,isZhLang:c}=B(),p=de({emotion:null,content:"",submitting:!1,submitted:!1}),_=A(()=>Number.isInteger(p.emotion)&&!!p.content),h=()=>s("close"),g=async()=>{if(_.value){a==null||a.event("submit_feedback",{event_category:J.Widget});try{p.submitting=!0;const v=await l.postFeedback(xt(p));i.addFeedback(v.result),p.submitted=!0}catch(v){alert(v)}finally{p.submitting=!1}}};return(v,b)=>{const y=w("i18n");return u(),m("div",kk,[p.submitted?(u(),m("div",$k,[b[3]||(b[3]=n("div",{class:"icon"},[n("i",{class:"iconfont icon-success"})],-1)),n("div",Tk,[d(y,null,{zh:f(()=>b[1]||(b[1]=[U("感谢你的反馈。")])),en:f(()=>b[2]||(b[2]=[U("Thank U for your feedback.")])),_:1})]),n("button",{class:"close",onClick:h},[d(y,{zh:"关闭窗口",en:"Close"})])])):(u(),m(L,{key:1},[n("div",Ek,[d(y,null,{zh:f(()=>[U("你认为 "+S(r(W).title)+" 整体怎么样？",1)]),en:f(()=>[U("How would you rate "+S(r(W).title)+"?",1)]),_:1})]),n("div",wk,[(u(),m(L,null,F(o,$=>n("li",{class:"item",key:$.value},[n("label",null,[ue(n("input",{class:"radio",type:"radio",value:$.value,disabled:p.submitting,"onUpdate:modelValue":T=>p.emotion=T},null,8,Sk),[[Za,p.emotion,void 0,{number:!0}]]),n("div",{class:N(["button",{activated:p.emotion===$.value}])},[n("span",Ck,S($.emoji),1),n("span",Ak,[d(y,{zh:$.zh,en:$.en},null,8,["zh","en"])])],2)]),d(fe,{name:"module"},{default:f(()=>[p.emotion===$.value?(u(),m("div",Ik)):O("",!0)]),_:2},1024)])),64))]),n("div",Ok,[ue(n("textarea",{class:"textarea",name:"feedback",id:"feedback",rows:"10",autofocus:"","onUpdate:modelValue":b[0]||(b[0]=$=>p.content=$),disabled:p.submitting,placeholder:r(c)?"你可在此畅所欲言，这将仅对博主可见":"Tell me about your opinion..."},null,8,Mk),[[wn,p.content,void 0,{trim:!0}]]),n("div",Rk,[n("button",{class:"item cancel",disabled:p.submitting,onClick:h},[n("span",Pk,[d(y,{zh:"取消",en:"Cancel"})])],8,Lk),n("button",{class:"item submit",disabled:!_.value||p.submitting,onClick:g},[b[4]||(b[4]=n("i",{class:"iconfont icon-mail-plane"},null,-1)),n("span",Dk,[d(y,{k:p.submitting?r(k).SUBMITTING:r(k).SUBMIT},null,8,["k"])])],8,Nk)])])],64)),r(i).feedbacks.length?(u(),m("div",Gk,[d(y,null,{zh:f(()=>[U("你已进行过 "+S(r(i).feedbacks.length)+" 次反馈。",1)]),en:f(()=>[U("You have "+S(r(i).feedbacks.length)+" feedback history.",1)]),_:1})])):O("",!0)])}}}),Hk=D(Uk,[["__scopeId","data-v-7fed7dda"]]),Bk=e=>{if(typeof e=="string")return`mailto:${e}`;const{email:t,...s}=e;return`mailto:${t}?`+nt.stringify(s)},zk={class:"statement"},Fk={class:"content"},qk={key:0,class:"email"},Yk=["href"],jk={class:"text"},Vk=I({__name:"statement",setup(e){const{appOption:t}=ve();return(s,o)=>{var l;return u(),m("div",zk,[n("div",Fk,[d(lt,{markdown:(l=r(t).data)==null?void 0:l.statement,compact:!0},null,8,["markdown"]),o[1]||(o[1]=n("br",null,null,-1)),o[2]||(o[2]=n("hr",null,null,-1)),r(t).data?(u(),m("p",qk,[n("a",{href:r(Bk)(r(t).data.site_email),class:"link",target:"_blank"},[o[0]||(o[0]=n("i",{class:"iconfont icon-mail"},null,-1)),n("span",jk,S(r(t).data.site_email),1)],8,Yk)])):O("",!0)])])}}}),xk=D(Vk,[["__scopeId","data-v-70a5a10f"]]),Jo=[{id:ne.Home,route:"/",icon:"icon-home",i18nKey:k.PAGE_HOME},{id:st.Code,route:ht(st.Code),icon:"icon-code",i18nKey:k.CATEGORY_CODE},{id:st.Insight,route:ht(st.Insight),icon:"icon-insight",i18nKey:k.CATEGORY_INSIGHT},{id:"github",url:V.GITHUB,icon:"icon-github",i18nKey:k.PAGE_GITHUB,newWindow:!0},{id:ne.Photography,route:Ae(ne.Photography),icon:"icon-lens",i18nKey:k.PAGE_PHOTOGRAPHY},{id:ne.About,route:Ae(ne.About),icon:"icon-swordsman",i18nKey:k.PAGE_ABOUT},{id:ne.Guestbook,route:Ae(ne.Guestbook),i18nKey:k.PAGE_GUESTBOOK,icon:"icon-comment"},{id:ne.App,route:Ae(ne.App),imageIcon:tt("/images/page-app/logo.png"),i18nKey:k.PAGE_APP,divider:!0},{id:"sponsor",route:Ae(ne.Sponsor),icon:"icon-peachblossom",i18nKey:k.PAGE_SPONSOR,hot:!0,divider:!0}],Wk=["id"],Zk={class:"header-container container"},Jk={class:"header-header"},Qk={class:"toolbox"},Xk={key:0,class:"button menu"},Kk={class:"header-nav"},e$={class:"nav-list container"},t$={key:0,class:"divider"},n$={key:2,class:"superscript"},s$={key:3,class:"new-window"},o$=I({__name:"header",setup(e){const{i18n:t,gtag:s,theme:o,gState:l}=B(),i=A(()=>!l.layoutColumn.value.isNormal),a=A(()=>({[mt.Light]:"icon-sun",[mt.Dark]:"icon-moon"})[o.theme.value]),c=()=>{o.toggle(),s==null||s.event("switch_theme",{event_category:J.Widget,event_label:o.theme.value})},p=A(()=>({[j.Chinese]:"icon-chinese",[j.English]:"icon-english"})[t.language.value]),_=()=>{var g;t.toggle(),s==null||s.event("switch_language",{event_category:J.Widget,event_label:(g=t.l.value)==null?void 0:g.name})},h=()=>{s==null||s.event("root_header_home_nav",{event_category:J.Universal})};return(g,v)=>{const b=w("uimage"),y=w("i18n"),$=w("webfont"),T=w("router-link"),E=w("ulink"),C=Re("disabled-wallflower");return ue((u(),m("header",{id:r(Hl),class:N(["header",{"enable-nav":i.value}])},[n("div",Zk,[n("div",Jk,[d(b,{cdn:"",src:"/images/logo.svg",class:"header-logo",alt:r(W).title},null,8,["alt"]),d($,{class:"header-slogan"},{default:f(()=>[d(y,{k:r(k).APP_SLOGAN},null,8,["k"])]),_:1}),d(T,{to:"/",class:"header-link",title:r(W).title,onMousedown:h},null,8,["title"])]),n("div",Qk,[i.value?(u(),m("button",Xk,v[0]||(v[0]=[n("i",{class:"iconfont icon-top-menu"},null,-1)]))):O("",!0),n("button",{class:"button language",title:"Switch language",onClick:_},[n("i",{class:N(["iconfont",p.value])},null,2)]),n("button",{class:N(["button theme",r(o).theme.value]),onClick:c},[n("i",{class:N(["iconfont",a.value])},null,2)],2)])]),n("div",Kk,[n("nav",e$,[(u(!0),m(L,null,F(r(Jo),(R,P)=>(u(),m(L,{key:R.id},[P>0?(u(),m("span",t$)):O("",!0),d(E,{class:N(["item",R.id]),to:R.route,href:R.url},{default:f(()=>[R.imageIcon?(u(),G(b,{key:0,class:"image-icon",src:R.imageIcon},null,8,["src"])):R.icon?(u(),m("i",{key:1,class:N(["font-icon iconfont",R.icon])},null,2)):O("",!0),d($,{class:"text",bolder:"",uppercase:!R.disabledUppercase},{default:f(()=>[d(y,{k:R.i18nKey},null,8,["k"])]),_:2},1032,["uppercase"]),R.hot?(u(),m("span",n$,v[1]||(v[1]=[n("i",{class:"iconfont icon-hot-fill"},null,-1)]))):O("",!0),R.newWindow?(u(),m("span",s$,v[2]||(v[2]=[n("i",{class:"iconfont icon-new-window-s"},null,-1)]))):O("",!0)]),_:2},1032,["class","to","href"])],64))),128))])])],10,Wk)),[[C]])}}}),a$=D(o$,[["__scopeId","data-v-5ea5ff07"]]),l$=I({__name:"footer",setup(e){const{gState:t,gtag:s}=B(),o=()=>{t.toggleSwitcher("statement",!0),s==null||s.event("statement_modal",{event_category:J.Universal})};return(l,i)=>{const a=w("ulink"),c=w("divider"),p=w("i18n"),_=w("container"),h=Re("disabled-wallflower");return ue((u(),G(_,{tag:"footer",id:r(ql),class:"footer"},{default:f(()=>[d(a,{class:"sitemap-btn",href:r(V).SITE_MAP},{default:f(()=>i[0]||(i[0]=[U("sitemap.xml")])),_:1},8,["href"]),d(c,{type:"vertical"}),d(p,{zh:"由 ",en:"Powered By "}),d(a,{class:"item",href:r(V).GITHUB_BLOG_STAR_LIST},{default:f(()=>i[1]||(i[1]=[U("NodePress")])),_:1},8,["href"]),d(p,{zh:"、",en:", "}),d(a,{class:"item",href:r(V).GITHUB_SURMON_ME},{default:f(()=>i[2]||(i[2]=[U("Vue")])),_:1},8,["href"]),d(p,{zh:" 和 日月星辰 强力驱动",en:""}),d(c,{type:"vertical"}),n("a",{class:"statement",href:"javascript:void(0)",onClick:o},[d(p,{zh:"周知",en:"FAQ"})]),d(c,{type:"vertical"}),d(a,{href:r(V).UPTIME_STATUS},{default:f(()=>[d(p,{zh:"实态",en:"STATUS"})]),_:1},8,["href"])]),_:1},8,["id"])),[[h]])}}}),i$=D(l$,[["__scopeId","data-v-476b149e"]]),r$={class:"search"},c$=["placeholder"],d$=I({__name:"search",setup(e){const{i18n:t,gtag:s,route:o,router:l}=B(),i=z(),a=z(""),c=p=>{var b,y;if(p.preventDefault(),!((b=i.value)==null?void 0:b.checkValidity())){(y=i.value)==null||y.reportValidity();return}const h=a.value,g=o.params.keyword,v=mn(o.name);h&&(!v||g!==h)&&(l.push({name:ne.SearchFlow,params:{keyword:h}}),s==null||s.event("aside_search",{event_category:J.Universal,event_label:h}))};return Q(()=>{mn(o.name)&&(a.value=o.params.keyword)}),(p,_)=>{const h=w("router-link");return u(),m("div",r$,[n("form",{class:"search-box",ref_key:"formElement",ref:i},[ue(n("input",{id:"keyword",class:N(["search-input",r(t).language]),required:"",type:"search",name:"search",maxlength:"16",autocomplete:"off","onUpdate:modelValue":_[0]||(_[0]=g=>a.value=g),placeholder:r(t).t(r(k).SEARCH_PLACEHOLDER),onKeyup:Is(c,["enter"])},null,42,c$),[[wn,a.value,void 0,{trim:!0}]]),n("button",{type:"submit",class:"search-btn",onClick:c},_[1]||(_[1]=[n("i",{class:"iconfont icon-search"},null,-1)]))],512),d(h,{class:"extra-btn",to:{name:r(ne).Sponsor}},{default:f(()=>_[2]||(_[2]=[n("i",{class:"iconfont icon-peachblossom"},null,-1)])),_:1},8,["to"])])}}}),u$=D(d$,[["__scopeId","data-v-54646d2f"]]),p$={class:"item"},_$={class:"title"},m$={class:"item"},h$={class:"title"},g$={class:"item"},f$={class:"title"},v$=I({__name:"statistic",setup(e){const t=I({props:{fetching:Boolean,count:Number},setup(l){return()=>ae(fe,{name:"module",mode:"out-in",duration:280},()=>l.fetching?ae("p",{class:"skeleton",key:"skeleton"},"•••"):ae("p",{class:"count",key:"count"},l.count??"-"))}}),s=z(!0),o=Dn();return Q(()=>{o.fetch().finally(()=>{s.value=!1})}),(l,i)=>{const a=w("i18n"),c=w("divider"),p=w("router-link");return u(),G(p,{class:"statistic",to:{name:r(ne).Archive}},{default:f(()=>{var _,h,g;return[n("div",p$,[d(r(t),{fetching:s.value,count:(_=r(o).data)==null?void 0:_.articles},null,8,["fetching","count"]),n("span",_$,[d(a,{k:r(k).STATISTIC_ARTICLES},null,8,["k"])])]),d(c,{type:"vertical"}),n("div",m$,[d(r(t),{fetching:s.value,count:(h=r(o).data)==null?void 0:h.todayViews},null,8,["fetching","count"]),n("span",h$,[d(a,{k:r(k).STATISTIC_TODAY_VIEWS},null,8,["k"])])]),d(c,{type:"vertical"}),n("div",g$,[d(r(t),{fetching:s.value,count:(g=r(o).data)==null?void 0:g.comments},null,8,["fetching","count"]),n("span",f$,[d(a,{k:r(k).STATISTIC_COMMENTS},null,8,["k"])])])]}),_:1},8,["to"])}}}),y$=D(v$,[["__scopeId","data-v-55f782a2"]]),b$={class:"article"},k$={class:"header"},$$={class:"title"},T$={class:"text"},E$={class:"types"},w$=["onClick"],S$={class:"article-list-skeleton",key:"skeleton"},C$={class:"article-list",key:"list"},A$=["data-index"],I$={class:"content"},O$={class:"meta"},M$={class:"item date"},R$={class:"item views"},L$={class:"item comments"},P$={class:"item likes"},N$=I({__name:"article",setup(e){const{i18n:t}=B(),{hottestArticleList:s,latestArticleList:o,featuredArticleList:l}=ve(),i=A(()=>[{zh_title:"最近更新",en_title:"Latest",zh_label:"最新",en_label:"latest",icon:"icon-clock",store:o},{zh_title:"热门趋势",en_title:"Trending",zh_label:"热门",en_label:"trend",icon:"icon-fire",store:s},{zh_title:"群贤毕至",en_title:"Featured",zh_label:t.t(k.ARTICLE_FEATURED_SHORT,j.Chinese),en_label:t.t(k.ARTICLE_FEATURED_SHORT,j.English),icon:"icon-windmill",store:l}]),a=z(i.value.length-1),c=A(()=>i.value[a.value]),p=_=>{a.value=_;const h=i.value[_];!h.store.fetched&&!h.store.fetching&&h.store.fetch()};return(_,h)=>{const g=w("i18n"),v=w("divider"),b=w("skeleton-line"),y=w("router-link"),$=w("placeholder");return u(),m("div",b$,[n("div",k$,[n("span",$$,[n("i",{class:N(["iconfont",c.value.icon])},null,2),n("span",T$,[d(g,{zh:c.value.zh_title,en:c.value.en_title},null,8,["zh","en"])])]),n("div",E$,[(u(!0),m(L,null,F(i.value,(T,E)=>(u(),m(L,{key:E},[n("span",{class:N(["item",{activated:E===a.value}]),onClick:C=>p(E)},[d(g,{zh:T.zh_label,en:T.en_label},null,8,["zh","en"])],10,w$),E!==i.value.length-1?(u(),G(v,{key:0,type:"vertical"})):O("",!0)],64))),128))])]),d($,{data:c.value.store.data,loading:c.value.store.fetching,"i18n-key":r(k).ARTICLE_PLACEHOLDER},{loading:f(()=>[n("ul",S$,[(u(),m(L,null,F(5,T=>n("li",{key:T,class:"item"},[d(b)])),64))])]),default:f(()=>[n("ul",C$,[(u(!0),m(L,null,F(c.value.store.data.slice(0,8),(T,E)=>(u(),m("li",{key:T.id,class:"item"},[n("span",{class:"index","data-index":E+1},S(E+1)+S(E>2?".":""),9,A$),n("div",I$,[d(y,{class:"title",to:r(Oe)(T.id),title:T.title},{default:f(()=>[U(S(T.title),1)]),_:2},1032,["to","title"]),n("div",O$,[n("span",M$,S(r(Gt)(T.created_at).slice(0,-3)),1),n("span",R$,[h[0]||(h[0]=n("i",{class:"iconfont icon-eye"},null,-1)),U(" "+S(r(On)(T.meta.views)),1)]),n("span",L$,[h[1]||(h[1]=n("i",{class:"iconfont icon-comment"},null,-1)),U(" "+S(T.meta.comments),1)]),n("span",P$,[h[2]||(h[2]=n("i",{class:"iconfont icon-like"},null,-1)),U(" "+S(T.meta.likes),1)])])])]))),128))])]),_:1},8,["data","loading","i18n-key"])])}}}),D$=D(N$,[["__scopeId","data-v-a09f200b"]]),G$={class:"mammon"},U$={class:"swiper-pagination"},H$=["aria-label"],B$=I({__name:"mammon",props:{index:{default:0}},setup(e,{emit:t}){const s=e,o=t,{adConfig:l}=B(),i=K(),a=K(s.index),c=_=>{i.value=_,o("ready",i.value)},p=()=>{var h;const _=(h=i.value)==null?void 0:h.realIndex;o("update:index",_),o("index-change",_),Us(_)||(a.value=_)};return(_,h)=>{const g=w("uimage"),v=w("ulink");return u(),m("div",G$,[d(r(jt),{class:"swiper",direction:"vertical",style:{"--slide-delay":"2800ms"},autoplay:{delay:2800,disableOnInteraction:!1},loop:!0,"simulate-touch":!1,"set-wrapper-size":!0,"auto-height":!0,mousewheel:!0,"initial-slide":s.index,onSlideChange:p,onSwiper:c},{"container-end":f(()=>[n("div",U$,[(u(!0),m(L,null,F(r(l).PC_ASIDE_SWIPER,(b,y)=>(u(),m("div",{key:y,"aria-label":`Go to slide ${y}`,class:N([{active:y===a.value},"swiper-pagination-bullet"]),role:"button"},h[1]||(h[1]=[n("span",{class:"bullet-progress"},null,-1)]),10,H$))),128))])]),default:f(()=>[(u(!0),m(L,null,F(r(l).PC_ASIDE_SWIPER,(b,y)=>(u(),G(r(Vt),{class:"swiper-slide",key:y},{default:f(()=>[d(v,{class:"content",href:b.url},{default:f(()=>[d(g,{src:b.src,alt:"aside-swiper-ad"},null,8,["src"]),h[0]||(h[0]=n("i",{class:"iconfont icon-ad"},null,-1))]),_:2},1032,["href"])]),_:2},1024))),128))]),_:1},8,["initial-slide"])])}}}),z$=D(B$,[["__scopeId","data-v-6f66c4cf"]]),F$={class:"tags"},q$={class:"tag-list-skeleton",key:"skeleton"},Y$={class:"tag-list",key:"list"},j$={class:"name"},V$={class:"count"},x$=I({__name:"tag",setup(e){const t=Et();return(s,o)=>{const l=w("skeleton-line"),i=w("i18n"),a=w("router-link"),c=w("placeholder");return u(),m("div",F$,[d(c,{data:r(t).sorted.length,fetching:r(t).fetching,"i18n-key":r(k).TAG_PLACEHOLDER},{loading:f(()=>[n("ul",q$,[(u(),m(L,null,F(14,p=>n("li",{key:p,class:"item"},[d(l)])),64))])]),default:f(()=>[n("div",Y$,[(u(!0),m(L,null,F(r(t).sorted,(p,_)=>(u(),G(a,{class:"item",title:`${r(Xe)(p)} | ${p.description}`,to:r(Yn)(p.slug),key:_},{default:f(()=>[n("i",{class:N(["iconfont",r(js)(p)])},null,2),n("span",j$,[d(i,{zh:p.name,en:r(Xe)(p)},null,8,["zh","en"]),n("span",V$,"("+S(p.article_count||0)+")",1)])]),_:2},1032,["title","to"]))),128))])]),_:1},8,["data","fetching","i18n-key"])])}}}),W$=D(x$,[["__scopeId","data-v-8484c02b"]]),Z$={key:0,class:"anchor"},J$=["title"],Q$={class:"title"},X$={class:"read"},K$={key:0,class:"catalogue"},eT=["title","onClick"],tT={class:"text"},nT={class:"text"},sT={class:"meta"},oT={class:"count"},aT={class:"meta"},lT={class:"count"},iT={class:"count"},rT={class:"count"},cT=I({__name:"anchor",setup(e){const t=Bn(),s=A(()=>{var i,a;const l=[...((i=t.defaultContent)==null?void 0:i.headings)||[]];return t.isLongContent&&t.renderedFullContent&&l.push(...((a=t.moreContent)==null?void 0:a.headings)||[]),l}),o=A(()=>Math.min(...s.value.map(l=>l.level)));return(l,i)=>{const a=w("i18n"),c=w("divider");return r(t).article?(u(),m("div",Z$,[n("button",{class:"header",title:r(t).article.title,onClick:i[0]||(i[0]=p=>r(He)(no))},[n("div",Q$,S(r(t).article.title),1),n("div",X$,[d(a,ze(Ve(r(qn)[r(t).article.lang])),null,16),d(a,{zh:"，",en:", "}),d(a,null,{zh:f(()=>[U("共 "+S(r(me)(r(t).contentLength))+" 字，需阅读 "+S(r(t).readMinutes)+" 分钟",1)]),en:f(()=>[U(S(r(me)(r(t).contentLength))+" characters, "+S(r(t).readMinutes)+" min read ",1)]),_:1})])],8,J$),s.value.length?(u(),m("div",K$,[n("ul",{class:N(["list",`indent-${o.value}`])},[(u(!0),m(L,null,F(s.value,(p,_)=>(u(),m("li",{class:N(["item",`level-${p.level}`]),key:_,title:p.text,onClick:h=>r(He)(p.id)},[n("i",{class:N(["level iconfont",`icon-h-${p.level}`])},null,2),n("span",tT,S(p.text),1)],10,eT))),128)),r(t).isLongContent&&!r(t).renderedFullContent?(u(),m("li",{class:N(["item readmore",`level-${o.value}`]),key:"readmore",onClick:i[1]||(i[1]=p=>r(He)(so))},[i[5]||(i[5]=n("i",{class:"level iconfont icon-loadmore"},null,-1)),n("span",nT,[d(a,{k:r(k).ARTICLE_READ_ALL},null,8,["k"])])],2)):O("",!0)],2)])):O("",!0),n("button",{class:"link",onClick:i[2]||(i[2]=p=>r(He)(oo))},[i[8]||(i[8]=n("i",{class:"iconfont icon-heart"},null,-1)),d(a,{zh:"随喜",en:"Sponsor"}),d(c,{type:"vertical"}),n("span",sT,[i[6]||(i[6]=n("i",{class:"iconfont icon-like"},null,-1)),n("span",oT,S(r(t).article.meta.likes),1)]),d(c,{type:"vertical"}),n("span",aT,[i[7]||(i[7]=n("i",{class:"iconfont icon-eye"},null,-1)),n("span",lT,S(r(me)(r(t).article.meta.views)),1)])]),n("button",{class:"link",onClick:i[3]||(i[3]=p=>r(He)(ao))},[i[9]||(i[9]=n("i",{class:"iconfont icon-category"},null,-1)),d(a,{zh:"相关",en:"Related"}),d(c,{type:"vertical"}),n("span",iT,S(r(t).relatedArticles.length),1)]),n("button",{class:"link",onClick:i[4]||(i[4]=p=>r(He)(Ut))},[i[10]||(i[10]=n("i",{class:"iconfont icon-comment"},null,-1)),d(a,{zh:"评论",en:"Comments"}),d(c,{type:"vertical"}),n("span",rT,S(r(t).article.meta.comments),1)])])):O("",!0)}}}),dT=D(cT,[["__scopeId","data-v-9530e2f8"]]),uT={class:"calendar"},pT={class:"header"},_T={class:"item year-month"},mT={class:"weekdays"},hT={class:"days"},gT=["onClick"],fT=I({__name:"calendar",setup(e){const t=Je(new Date),s=b=>kl(b,t),{i18n:o,isZhLang:l}=B(),i=de({month:0,year:1970,table:[]}),a={[j.English]:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],[j.Chinese]:["一","二","三","四","五","六","日"]},c=A(()=>a[o.language.value]),p=A(()=>{const b=i.year===t.year,y=i.month===t.month,$=b&&y;if(l.value){const T=`${i.year} 年`,E=` ${i.month} 月`,C=$?` ${t.day} 日`:"";return T+E+C}return _t($?t:i," / ")}),_=b=>{const y=[],$=$l({...b,day:1}),T=Je($).week;for(let C=T-1;C>=0;C--){const R=ts($);R.setDate(R.getDate()-C),y.push(Je(R))}const E=35-y.length;for(let C=1;C<=E;C++){const R=ts($);R.setDate(R.getDate()+C),y.push(Je(R))}Object.assign(i,{year:b.year,month:b.month,table:y})},h=()=>{const b=i.month-1<=0;_({year:i.year-(b?1:0),month:b?12:i.month-1})},g=()=>{const b=i.month+1>=13;_({year:i.year+(b?1:0),month:b?1:i.month+1})},v=b=>{b.month<i.month?h():b.month>i.month&&g()};return _({year:t.year,month:t.month}),(b,y)=>(u(),m("div",uT,[n("div",pT,[n("button",{class:"item arrow",onClick:h},y[0]||(y[0]=[n("i",{class:"iconfont icon-prev"},null,-1)])),n("span",_T,S(p.value),1),n("button",{class:"item arrow",onClick:g},y[1]||(y[1]=[n("i",{class:"iconfont icon-next"},null,-1)]))]),n("ul",mT,[(u(!0),m(L,null,F(c.value,($,T)=>(u(),m("li",{key:T},S($),1))),128))]),n("ul",hT,[(u(!0),m(L,null,F(i.table,($,T)=>(u(),m("li",{key:T},[n("div",{class:N(["item",{today:s($),other:$.month!==i.month}]),onClick:E=>v($)},[Z(b.$slots,"day",Qe({ref_for:!0},$),()=>[U(S($.day),1)],!0)],10,gT)]))),128))])]))}}),vT=D(fT,[["__scopeId","data-v-f0397038"]]),yT={key:1,class:"date-span"},bT=I({__name:"calendar",setup(e){const{articleCalendar:t}=ve(),s=o=>{var i;const l=_t(o);return((i=t.data.find(a=>a.date===l))==null?void 0:i.count)||0};return Q(()=>t.fetch()),(o,l)=>{const i=w("router-link");return u(),G(vT,{class:"calendar"},{day:f(a=>[s(a)>0?(u(),G(i,{key:0,class:"date-link",to:r(ko)(r(_t)(a))},{default:f(()=>[U(S(a.day),1)]),_:2},1032,["to"])):(u(),m("span",yT,S(a.day),1))]),_:1})}}}),kT=D(bT,[["__scopeId","data-v-070e36e2"]]),$T=["id"],TT={class:"module"},ET={class:"module"},wT={class:"module"},ST={class:"module mammon"},CT={class:"module"},AT={class:"module mammon-square"},IT={class:"module"},Ts="aside-sticky-module",OT=I({__name:"index",setup(e){const t=Cs(),s=A(()=>Hi(t.name));let o=null;const l=z(null),i=()=>{var a,c;(c=(a=document.getElementById(to))==null?void 0:a.children)==null||c[0]};return Q(()=>{Me(()=>{var a,c;o=new window.$StickyEvents({enabled:!0,stickySelector:`#${Ts}`}),(c=(a=o.stickyElements)==null?void 0:a[0])==null||c.addEventListener(window.$StickyEvents.CHANGE,i)})}),et(()=>{var a,c;(c=(a=o.stickyElements)==null?void 0:a[0])==null||c.removeEventListener(window.$StickyEvents.CHANGE,i),o.disableEvents(!1),o=null}),(a,c)=>{const p=w("client-only"),_=w("Adsense"),h=Re("disabled-wallflower");return ue((u(),m("aside",{id:r(Fl),class:"desktop-aside",ref_key:"element",ref:l},[n("div",TT,[d(u$)]),n("div",ET,[d(y$)]),n("div",wT,[d(D$)]),d(p,{transition:""},{default:f(()=>[n("div",ST,[d(z$)])]),_:1}),n("div",CT,[d(kT)]),n("div",{id:Ts,class:"aside-sticky-box"},[n("div",AT,[d(p,null,{default:f(()=>[d(_,{"ins-style":"display:inline-block;width:250px;height:250px","data-ad-slot":"6138120718",class:"content"})]),_:1})]),n("div",IT,[s.value?(u(),G(p,{key:0},{default:f(()=>[d(dT,{class:"sticky-module"})]),_:1})):(u(),G(W$,{key:1,class:"sticky-module"}))])])],8,$T)),[[h]])}}}),MT=D(OT,[["__scopeId","data-v-cdaf9ed9"]]),RT=["id"],LT={class:"nav-list"},PT={key:0,class:"divider"},NT={key:2,class:"superscript new-window"},DT={key:3,class:"superscript hot"},GT={class:"ad-text"},UT=I({__name:"nav",setup(e){const{adConfig:t}=B();return(s,o)=>{const l=w("uimage"),i=w("i18n"),a=w("webfont"),c=w("ulink"),p=Re("disabled-wallflower");return ue((u(),m("div",{id:r(Bl),class:"desktop-nav"},[n("nav",LT,[(u(!0),m(L,null,F(r(Jo),_=>(u(),m(L,{key:_.id},[_.divider?(u(),m("span",PT)):O("",!0),d(c,{class:N(["item",_.id]),href:_.url,to:_.route},{default:f(()=>[_.imageIcon?(u(),G(l,{key:0,class:"image-icon",src:_.imageIcon},null,8,["src"])):_.icon?(u(),m("i",{key:1,class:N(["font-icon iconfont",_.icon])},null,2)):O("",!0),d(a,{class:"text",bolder:"",uppercase:!_.disabledUppercase},{default:f(()=>[d(i,{k:_.i18nKey},null,8,["k"])]),_:2},1032,["uppercase"]),_.newWindow?(u(),m("span",NT,o[0]||(o[0]=[n("i",{class:"iconfont icon-new-window-s"},null,-1)]))):O("",!0),_.hot?(u(),m("span",DT,o[1]||(o[1]=[n("i",{class:"iconfont icon-hot-fill"},null,-1)]))):O("",!0)]),_:2},1032,["class","href","to"])],64))),128)),(u(!0),m(L,null,F(r(t).PC_NAV,(_,h)=>(u(),m(L,{key:h},[o[3]||(o[3]=n("span",{class:"divider"},null,-1)),d(c,{class:"item",href:_.url,style:se({color:_.color})},{default:f(()=>[n("i",{class:N(["font-icon iconfont",_.icon])},null,2),n("span",GT,[_.i18n?(u(),G(i,{key:0,zh:_.i18n.zh,en:_.i18n.en},null,8,["zh","en"])):(u(),m(L,{key:1},[U(S(_.text),1)],64))]),o[2]||(o[2]=n("span",{class:"superscript"},[n("i",{class:"iconfont icon-ad"})],-1))]),_:2},1032,["href","style"])],64))),128))])],8,RT)),[[p]])}}}),HT=D(UT,[["__scopeId","data-v-837fa8f0"]]),BT={class:"desktop-main"},zT={class:"sponsor-modal"},FT={class:"sponsor"},qT=["id"],YT=["id"],jT={class:"router-view"},VT=I({__name:"main",setup(e){const t=Bo(),s=Xt(),{route:o,gState:l}=B(),{switcher:i,layoutColumn:a}=l,c=()=>{l.setLayoutColumn(xn(o.meta))},p=()=>{l.toggleSwitcher("sponsor",!1)},_=()=>{l.toggleSwitcher("feedback",!1)},h=()=>{l.toggleSwitcher("statement",!1)};return Q(()=>{s.fetch().catch(g=>{pt.failure("bing wallpaper fetch failed!",g)}),Wn().init().catch(g=>{pt.failure("player init failed!",g)})}),(g,v)=>{const b=w("popup"),y=w("client-only"),$=w("router-view"),T=Re("disabled-wallflower");return u(),m("div",BT,[d(pk),d(Wb),d(y,null,{default:f(()=>[d(b,{visible:r(i).sponsor,onClose:p},{default:f(()=>[n("div",zT,[n("div",FT,[d(zo,{class:"tabs",state:r(t),"hide-title":!0},null,8,["state"]),d(Fo,{class:"provider",state:r(t),"max-sponsors":9},null,8,["state"])])])]),_:1},8,["visible"]),d(b,{visible:r(i).feedback,"mask-close":!1,"scroll-close":!1,onClose:_},{default:f(()=>[d(Hk,{onClose:_})]),_:1},8,["visible"]),d(b,{visible:r(i).statement,"scroll-close":!1,onClose:h},{default:f(()=>[d(xk)]),_:1},8,["visible"])]),_:1}),r(a).isFull?O("",!0):(u(),m(L,{key:0},[d(Io,{class:"main-share","disabled-image-share":""}),d(ck),d(bk),d(y,null,{default:f(()=>[d(Fb)]),_:1})],64)),d(a$),n("main",{id:r(zl),class:N(["main-container",{"full-page":r(a).isFull}])},[r(a).isNormal?(u(),G(HT,{key:0,class:"nav-view"})):O("",!0),r(a).isNormal?(u(),G(MT,{key:1,class:"aside-view"})):O("",!0),n("div",{id:r(to),class:N(["main-view",{"layout-normal":r(a).isNormal,"layout-wide":r(a).isWide,"layout-full":r(a).isFull}])},[d($,null,{default:f(({Component:E,route:C})=>[ue((u(),m("div",jT,[d(fe,{name:"page",mode:"out-in",onBeforeEnter:c},{default:f(()=>[(u(),G(Ja,null,{default:f(()=>[(u(),G(En(E),{key:C.name}))]),_:2},1024))]),_:2},1024)])),[[T]])]),_:1})],10,YT)],10,qT),d(i$,{class:"footer-view"})])}}}),xT=D(VT,[["__scopeId","data-v-72d90c3a"]]),WT={class:"header"},ZT={class:"navbar"},JT={key:0,class:"search"},QT={class:"search-bar"},XT=["placeholder","onKeyup"],KT={class:"name"},eE={class:"count"},tE=I({__name:"header",props:{opened:{type:Boolean}},setup(e,{emit:t}){const s=e,o=t,{route:l,router:i,i18n:a}=B(),c=Et(),p=z(null),_=de({open:!1,focused:!1,keyword:""}),h=()=>{s.opened?o("close"):o("open")},g=()=>{_.open=!0,Me(()=>{p.value.focus()})},v=()=>{_.open=!1},b=()=>{const y=_.keyword.trim();y&&i.push({name:ne.SearchFlow,params:{keyword:y}})};return $e(()=>{he(()=>i.currentRoute.value,()=>{Me(()=>{v(),o("close")})})}),Q(()=>{mn(l.name)&&(_.keyword=l.params.keyword)}),(y,$)=>{const T=w("uimage"),E=w("router-link"),C=w("i18n");return u(),m("header",WT,[n("nav",ZT,[n("button",{class:"navbar-menu",onClick:xe(h,["stop","prevent"])},$[3]||($[3]=[n("i",{class:"iconfont icon-menu"},null,-1)])),d(E,{to:"/",class:"navbar-logo"},{default:f(()=>[d(T,{class:"image",cdn:"",src:"/images/logo.svg"})]),_:1}),n("button",{class:"navbar-search",onClick:xe(g,["stop","prevent"])},$[4]||($[4]=[n("i",{class:"iconfont icon-search"},null,-1)]))]),_.open?(u(),m("div",JT,[n("div",QT,[ue(n("input",{class:"input",ref_key:"inputElement",ref:p,autocomplete:"off",type:"text",maxlength:"24",required:"",placeholder:r(a).t(r(k).SEARCH_PLACEHOLDER),"onUpdate:modelValue":$[0]||($[0]=R=>_.keyword=R),onKeyup:Is(xe(b,["stop","prevent"]),["enter"]),onFocus:$[1]||($[1]=R=>_.focused=!0),onBlur:$[2]||($[2]=R=>_.focused=!1)},null,40,XT),[[wn,_.keyword,void 0,{trim:!0}]]),n("span",{class:"close",onClick:xe(v,["stop","prevent"])},$[5]||($[5]=[n("i",{class:"iconfont icon-cancel"},null,-1)]))]),n("div",{class:"search-tags",onClick:v},[r(c).sorted?(u(),m("div",{key:0,class:N(["tag-list",{"input-focused":_.focused}])},[(u(!0),m(L,null,F(r(c).sorted,(R,P)=>(u(),G(E,{class:"item",title:`${r(Xe)(R)} | ${R.description}`,to:r(Yn)(R.slug),key:P},{default:f(()=>[n("i",{class:N(["iconfont",r(js)(R)])},null,2),n("span",KT,[d(C,{zh:R.name,en:r(Xe)(R)},null,8,["zh","en"])]),n("span",eE,S(R.article_count||0),1)]),_:2},1032,["title","to"]))),128))],2)):O("",!0)])])):O("",!0)])}}}),nE=D(tE,[["__scopeId","data-v-8e49a899"]]),sE={class:"footer"},oE={class:"footer-content"},aE=I({__name:"footer",setup(e){const t=new Date().getFullYear(),s=W.title;return(o,l)=>(u(),m("footer",sE,[n("div",oE,"©"+S(r(t))+"  "+S(r(s)),1)]))}}),lE=D(aE,[["__scopeId","data-v-67eed925"]]),iE={class:"aside"},rE={class:"aside-user"},cE={class:"profile"},dE={class:"name"},uE={class:"aside-tool"},pE={class:"aside-nav"},_E={class:"nav-list"},mE=I({__name:"aside",setup(e){const{i18n:t,theme:s,cdnDomain:o}=B(),l=Pn(),i=ke(o,"/images/anonymous.png"),a=A(()=>({[mt.Light]:"icon-sun",[mt.Dark]:"icon-moon"})[s.theme.value]),c=A(()=>({[j.Chinese]:"icon-chinese",[j.English]:"icon-english"})[t.language.value]);return Se(()=>l.fetch()),(p,_)=>{var $;const h=w("uimage"),g=w("i18n"),v=w("webfont"),b=w("router-link"),y=w("ulink");return u(),m("aside",iE,[n("div",rE,[d(h,{class:"avatar",src:(($=r(l).data)==null?void 0:$.avatar)||r(i),alt:r(W).author},null,8,["src","alt"]),n("div",cE,[n("h3",dE,S(r(W).author),1),d(v,{class:"slogan"},{default:f(()=>[d(g,{k:r(k).APP_SLOGAN},null,8,["k"])]),_:1})])]),n("div",uE,[n("div",{class:"item",onClick:_[0]||(_[0]=(...T)=>r(s).toggle&&r(s).toggle(...T))},[n("i",{class:N(["iconfont",a.value])},null,2)]),n("div",{class:"item",onClick:_[1]||(_[1]=(...T)=>r(t).toggle&&r(t).toggle(...T))},[n("i",{class:N(["iconfont",c.value])},null,2)])]),n("div",pE,[n("nav",_E,[d(b,{to:"/",class:"item"},{default:f(()=>[_[2]||(_[2]=n("i",{class:"iconfont icon-home"},null,-1)),d(v,{bolder:"",uppercase:""},{default:f(()=>[d(g,{k:r(k).PAGE_HOME},null,8,["k"])]),_:1})]),_:1}),d(b,{class:"item",to:r(ht)(r(st).Code)},{default:f(()=>[_[3]||(_[3]=n("i",{class:"iconfont icon-code"},null,-1)),d(v,{bolder:"",uppercase:""},{default:f(()=>[d(g,{k:r(k).CATEGORY_CODE},null,8,["k"])]),_:1})]),_:1},8,["to"]),d(b,{class:"item",to:r(ht)(r(st).Insight)},{default:f(()=>[_[4]||(_[4]=n("i",{class:"iconfont icon-insight"},null,-1)),d(v,{bolder:"",uppercase:""},{default:f(()=>[d(g,{k:r(k).CATEGORY_INSIGHT},null,8,["k"])]),_:1})]),_:1},8,["to"]),d(y,{class:"item",href:r(V).GITHUB},{default:f(()=>[_[5]||(_[5]=n("i",{class:"iconfont icon-github"},null,-1)),d(v,{bolder:"",uppercase:""},{default:f(()=>[d(g,{k:r(k).PAGE_GITHUB},null,8,["k"])]),_:1}),_[6]||(_[6]=n("span",{class:"newscript"},[n("i",{class:"iconfont icon-new-window-s"})],-1))]),_:1},8,["href"]),d(b,{class:"item",to:r(Ae)(r(ne).Archive)},{default:f(()=>[_[7]||(_[7]=n("i",{class:"iconfont icon-quill"},null,-1)),d(v,{bolder:"",uppercase:""},{default:f(()=>[d(g,{k:r(k).PAGE_ARCHIVE},null,8,["k"])]),_:1})]),_:1},8,["to"]),d(b,{class:"item",to:r(Ae)(r(ne).About)},{default:f(()=>[_[8]||(_[8]=n("i",{class:"iconfont icon-swordsman"},null,-1)),d(v,{bolder:"",uppercase:""},{default:f(()=>[d(g,{k:r(k).PAGE_ABOUT},null,8,["k"])]),_:1})]),_:1},8,["to"]),d(b,{class:"item guestbook",to:r(Ae)(r(ne).Guestbook)},{default:f(()=>[_[9]||(_[9]=n("i",{class:"iconfont icon-comment"},null,-1)),d(v,{bolder:"",uppercase:""},{default:f(()=>[d(g,{k:r(k).PAGE_GUESTBOOK},null,8,["k"])]),_:1})]),_:1},8,["to"]),d(b,{class:"item app",to:r(Ae)(r(ne).App)},{default:f(()=>[d(h,{cdn:"",class:"icon",src:"/images/page-app/logo.png"}),d(v,{bolder:"",uppercase:""},{default:f(()=>[d(g,{k:r(k).PAGE_APP},null,8,["k"])]),_:1})]),_:1},8,["to"])])])])}}}),hE=D(mE,[["__scopeId","data-v-82aca36d"]]),gE={class:"mobile-main"},fE={class:"main-container"},vE={key:0,class:"route-view"},yE={key:1,class:"fallback"},bE={class:"text"},kE=["href"],$E=I({__name:"main",setup(e){const{route:t}=B(),s=A(()=>tt(t.fullPath)),o=z(!1),l=z(!1),i=()=>l.value=!0,a=()=>l.value=!1;return Q(()=>{o.value=!0,he(l,c=>{document.body.style.overflow=c?"hidden":"auto"})}),(c,p)=>{const _=w("i18n"),h=w("router-view");return u(),m("div",gE,[n("div",{class:N(["asider",{loaded:o.value,opened:l.value}])},[d(hE,{class:"aside"})],2),n("div",{class:N(["main",{opened:l.value}])},[l.value?(u(),m("div",{key:0,class:"close-mask",onClick:a})):O("",!0),d(nE,{opened:l.value,onClose:a,onOpen:i},null,8,["opened"]),n("main",fE,[d(h,{name:"mobile"},{default:f(({Component:g,route:v})=>[v.meta.responsive?(u(),m("div",vE,[(u(),G(En(g),{key:v.name}))])):(u(),m("div",yE,[p[0]||(p[0]=n("i",{class:"iconfont icon-desktop"},null,-1)),n("p",bE,[d(_,{zh:"请在 PC 端访问以获得最佳体验",en:"This page only support visit on PC"})]),n("a",{class:"link",href:s.value},S(s.value),9,kE)]))]),_:1})]),d(lE)],2)])}}}),TE=D($E,[["__scopeId","data-v-05df83ea"]]),EE={class:"app-root"},wE=I({__name:"index",setup(e){const{isMobile:t}=B();return(s,o)=>{const l=w("popup-root"),i=w("client-only"),a=w("responsive");return u(),m("div",EE,[d(i,null,{default:f(()=>[d(Vy,{spin:!r(t)},null,8,["spin"]),d(Wy),d(l)]),_:1}),d(eb,null,{default:f(()=>[d(a,null,{desktop:f(()=>[d(xT)]),mobile:f(()=>[d(TE)]),_:1})]),_:1})])}}});console.group("🔵 [APP:INIT]");console.table({APP_VERSION:Ms,APP_ENV:Rs,NODE_ENV:Li});console.groupEnd();console.group("🔵 [APP:API]");console.table(gt);console.groupEnd();const SE=e=>{var _,h;const t=Qa(wE),s=gl({userAgent:e.userAgent||"",language:e.language||"",layout:e.layout??Pe.Normal,error:e.error}),o=pi({globalState:s}),l=by({beforeMiddleware:(_=e.routerBeforeMiddleware)==null?void 0:_.call(e,s),afterMiddleware:(h=e.routerAfterMiddleware)==null?void 0:h.call(e,s),history:e.historyCreator()}),i=Xa(),a=Ti(e.theme),c=mi({default:s.userAgent.isZhUser?j.Chinese:j.English,keys:Object.values(k),languages:rl}),p=()=>{var g;return{htmlAttrs:{lang:((g=c.l.value)==null?void 0:g.iso)??"","data-region":e.region,"data-theme":a.theme.value,"data-device":s.userAgent.isMobile?"mobile":"desktop"}}};return t.config.errorHandler=g=>s.setRenderError(g),l.onError(s.setRenderError),l.beforeEach((g,v,b)=>{g.meta.validator?g.meta.validator({route:g,i18n:c,store:o}).then(b).catch(y=>{const $=new Error;$.code=y.code,$.message=y.message,b($)}):b()}),t.use(l),t.use(o),t.use(s),t.use(c),t.use(i),t.use(a),t.use(zy),t.directive(Mi,Ri),{app:t,router:l,store:o,globalState:s,i18n:c,head:i,theme:a,getGlobalHead:p}},Qo="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",CE=e=>I({name:"Adsense",props:{class:String,insClass:{type:String,default:""},insStyle:{type:String,default:"display:block;"},dataAdClient:String,dataAdSlot:String,dataAdLayoutKey:String,dataAdTest:String,dataAdFormat:String,dataFullWidthResponsive:[Boolean,String]},setup(t){const{i18n:s}=B();return()=>{const{class:o,insClass:l,insStyle:i,dataAdClient:a,dataAdSlot:c,dataAdLayoutKey:p,dataAdTest:_,dataAdFormat:h,dataFullWidthResponsive:g,...v}=t;return ae("div",{class:["mammon-box",o],placeholder:s.t(k.AD)},[ae("script",{type:"text/javascript",async:"true",src:Qo}),ae("ins",{class:["adsbygoogle",l],style:i,"data-ad-client":a||e,"data-ad-slot":c,"data-ad-layout-key":p,"data-ad-test":_,"data-ad-format":h,"data-full-width-responsive":g,...v}),ae("script","(adsbygoogle = window.adsbygoogle || []).push({})")])}}}),AE={install(e,t){const s=CE(t.id);e.component(s.name,s),t.enabledAutoAd&&mo(Qo,{async:!0}).then(()=>{(window.adsbygoogle||[]).push({google_ad_client:t.id,enable_page_level_ads:!0})})}},IE=["src"],OE=I({__name:"root",setup(e){const t=z(null),{isDarkTheme:s,isMobile:o}=B(),{state:l,image:i,hidden:a}=Ai(()=>t.value),c=()=>a(),p=()=>{l.maskClose&&a()};return Ka(()=>{l.visible&&l.scrollClose?window.addEventListener("scroll",c,{passive:!0}):window.removeEventListener("scroll",c)}),(_,h)=>{const g=Re("disabled-wallflower");return ue((u(),m("div",{id:"popup",class:N(["popup",{mobile:r(o),dark:r(s)}])},[d(fe,{name:"module"},{default:f(()=>[ue(n("div",{class:"mask",onClick:xe(p,["self"])},[n("div",{ref_key:"element",ref:t,class:N(["warpper",{border:r(l).border}])},[r(l).isImage?(u(),m("img",Qe({key:0},r(i).attrs,{src:r(i).src||""}),null,16,IE)):O("",!0)],2)],512),[[Tn,r(l).visible]])]),_:1})],2)),[[g]])}}}),ME=D(OE,[["__scopeId","data-v-d0372d4b"]]),Xo={border:{type:Boolean,default:!0},maskClose:{type:Boolean,default:!0},scrollClose:{type:Boolean,default:!0}},RE=e=>{const{border:t,maskClose:s,scrollClose:o,...l}=e;return l},LE=I({props:{visible:{type:Boolean,default:!1},clone:{type:Boolean,default:!1},...Xo},emits:["close","update:visible"],setup(e,t){const s=nn();return $e(()=>{he(()=>e.visible,o=>{const{clone:l,visible:i,...a}=e;o?s.visible(a):s.hidden()})}),$e(()=>{he(()=>s.state.visible,o=>{!o&&e.visible&&(t.emit("update:visible",!1),t.emit("close"))})}),()=>{const o=()=>{var a,c;return(c=(a=t.slots).default)==null?void 0:c.call(a)},l=()=>ae(el,{to:s.state.$container},o()),i=()=>e.visible?l():null;return e.clone?ae(L,[o(),i()]):i()}}}),PE=I({props:{src:String,...Xo},setup(e,t){const s=nn();return()=>{const{src:o,...l}=e;if(!o)return null;const i=RE(e),a={...i,...t.attrs};return ae("img",{...a,src:o,onClick(...c){var p;(p=i==null?void 0:i.onClick)==null||p.call(i,...c),s==null||s.vImage(o,a,l)}})}}}),Es=Object.freeze({visible:!1,isImage:!1,border:!0,maskClose:!0,scrollClose:!0}),NE=()=>{const e=de({src:null,attrs:null}),t=de({$container:null,...Es}),s=i=>{if(!t.visible){i==null||i();return}Object.assign(t,{...Es}),e.src=null,e.attrs=null,i&&Me(i)},o=i=>{s(()=>{Object.assign(t,{...i,isImage:!1,visible:!0})})},l=(i,a,c)=>{s(()=>{e.src=i,e.attrs=a,Object.assign(t,{...c,border:!0,isImage:!0,visible:!0})})};return{state:Be(t),image:Be(e),visible:o,hidden:s,vImage:l,$setRoot:i=>{t.$container=i}}},DE=()=>{const e=NE();return{...e,install(t,s){t.provide(vo,e),t.component("Popup",LE),t.component("PopupImage",PE),t.component("PopupRoot",ME),s!=null&&s.exportToGlobal&&(window.$popup=e)}}},GE=e=>{const t=(y,$,T)=>{for(let E=0;E<$;++E)if(y.data[T*$*4+E*4+3]!==0)return!1;return!0},s=(y,$,T,E,C)=>{for(let R=E;R<C;++R)if(y.data[R*$*4+T*4+3]!==0)return!1;return!0},o=e.getContext("2d"),l=e.width,i=o.getImageData(0,0,e.width,e.height);let a=0,c=i.height,p=0,_=i.width;for(;a<c&&t(i,l,a);)++a;for(;c-1>a&&t(i,l,c-1);)--c;for(;p<_&&s(i,l,p,a,c);)++p;for(;_-1>p&&s(i,l,_-1,a,c);)--_;const h=o.getImageData(p,a,_-p,c-a),g=Math.max(h.width,h.height),v=Object.assign(document.createElement("canvas"),{width:g,height:g});return v.getContext("2d").putImageData(h,(g-h.width)/2,(g-h.height)/2),v};async function UE(e="",t=16){const s=Object.assign(document.createElement("canvas"),{width:t*2,height:t*2}),o=s.getContext("2d");return o.clearRect(0,0,s.width,s.height),o.font=`${t}px Apple Color Emoji`,o.textAlign="center",o.textBaseline="middle",o.fillText(e,t*2/2,t*2/2),GE(s).toDataURL("image/png")}let Ko;const ea=e=>{if(document.title=e,e.length<=10)return!1;const[t,...s]=e.split(""),o=[...s,t].join("");Ko=window.setTimeout(()=>ea(o),366)},ta=()=>{var e;return(e=Array.from(document.getElementsByTagName("link")).find(t=>t.getAttribute("rel")=="icon"))==null?void 0:e.getAttribute("href")},na=async e=>{var t;(t=Array.from(document.getElementsByTagName("link")).find(s=>s.getAttribute("rel")=="icon"))==null||t.setAttribute("href",e)},qt={favicon:ta(),title:document.title},HE=()=>{na(qt.favicon),document.title=qt.title,window.clearTimeout(Ko)},BE=async({favicon:e,title:t})=>{qt.title=document.title,qt.favicon=ta(),ea(t+" "),na(await UE(e,28))},zE=(e,t)=>{console.log(`%c${e} %c${t||""}`,"color:#666;font-size:3em;","color:#666;font-size:13px;")},FE=e=>{window.$app=e},qE=()=>{window.$StickyEvents=tl},YE=()=>{window.$Emoji233333=Ma};console.group("🔵 [SSR:CONTEXT]");console.table(Ls());console.groupEnd();const{app:We,router:Yt,head:jE,globalState:Ot,i18n:ws,store:yn,getGlobalHead:VE}=SE({historyCreator:nl,language:navigator.language,userAgent:navigator.userAgent,region:Lt("region"),layout:Lt("layout"),theme:Lt("theme"),error:Ps("error")}),xE=Si(),WE=DE(),ZE=sb({delay:668,continueNext:!0});We.use(ZE);We.use(ai,{exportToGlobal:!0});We.use(xE,{exportToGlobal:!0});We.use(WE,{exportToGlobal:!0});We.use(AE,{id:Ee.GOOGLE_ADSENSE_CLIENT_ID,enabledAutoAd:!0});We.use(yi,{router:Yt,id:Ee.GOOGLE_ANALYTICS_MEASUREMENT_ID,config:{send_page_view:!1},customResourceURL:"/gtag-script"});yn.hydrate();YE();qE();FE(We);iu();const sa=A(()=>VE()),JE=jE.push(sa,{mode:"client"});he(sa,e=>JE.patch(e));sl({app:We,dsn:Ee.SENTRY_PUBLIC_DSN,environment:Rs,release:Ms,tracesSampleRate:.2,replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1,integrations:[ol(),al({router:Yt})],tracePropagationTargets:["localhost",/^\//,new RegExp("^"+gt.NODEPRESS.replaceAll(".","\\."))]});Yt.isReady().finally(()=>{Ot.setLayoutColumn(xn(Yt.currentRoute.value.meta)),We.mount("#app",!0).$nextTick(()=>{var e;Ot.setHydrate(),ws.set(Ot.userAgent.isZhUser?j.Chinese:j.English),yn.stores.identity.initOnClient(),Ot.userAgent.isMobile||document.addEventListener("visibilitychange",t=>{var i,a;const s=((i=t.target)==null?void 0:i.hidden)||((a=t.target)==null?void 0:a.webkitHidden),o=[{favicon:"🌱",title:W.en_sub_title}],l=Math.floor(Math.random()*o.length);s?BE(o[l]):HE()},!1),zE(ws.t(k.APP_SLOGAN),(e=yn.stores.appOption.data)==null?void 0:e.site_email)})});
//# sourceMappingURL=index-BjAcFgIs.js.map
