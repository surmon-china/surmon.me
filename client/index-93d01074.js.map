{"version":3,"mappings":"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","names":["relList","link","processPreload","mutations","mutation","node","getFetchOpts","script","fetchOpts","key","_a","app","LanguageKey","args","Language","languages","value","sourceValue","userAgent","browserName","parseResult","isTargetDevice","browsers","browser","language","targetLang","lang","LayoutColumn","config","renderError","defaultError","setRenderError","error","isHydrated","setHydrate","layoutValue","layoutColumn","setLayoutColumn","layout","imageExt","imageExtValue","switcher","toggleSwitcher","globalState","fetcher","doFetchOnBeforeMount","callback","options","result","_padStart","_capitalize","count","number","text","capital","targetText","response","errorInfo","errorJSON","_c","_d","_f","method","tag","nodepress","state","tags","a","b","tagMap","OriginState","CommentPostID","CommentParentType","SortType","ms","start","action","time","timeout","promise","resolve","reject","delay","data","UserType","id","_b","commentID","event","user","ids","comment","roots","children","fullMap","treeMap","findRootParentID","pid","target","rootPID","params","loadmore","fetch","index","vote","identityStore","level","heading","name","hljs","lozad","element","observer","container","observe","targetElement","lozadElements","tagretClass","unobserve","install","date","dates","d","year","month","day","events","handler","offset","duration","optionEasing","bodyElement","abort","whenAbort","whenDone","onDone","initialY","elementY","diff","easing","BezierEasing","step","timestamp","progress","elementID","languageCodes","l","languageMap","map","set","toggle","currentIndex","langCode","nextIndex","translate","targetLanguage","content","i18nComponent","i18nStore","ProxyModule","path","module","metaConfig","head","rest","title","source","titler","meta","restSource","_pureTitle","pageTitle","_title","_language","_meta","keywords","description","twitterCard","ogType","ogUrl","route","ogImage","measurementID","restAttrs","type","defer","async","src","domain","resourceURL","to","from","location","push","eventName","gtag","Theme","historyTheme","initTheme","theme","newTheme","cookies","bindClientSystem","themeState","doTask","task","handleLoaded","addTask","n","_withScopeId","_createElementVNode","_sfc_render","_ctx","_normalizeClass","_normalizeStyle","_createElementBlock","_timer","_throttle","clear","increase","percent","decrease","startTimer","_cut","hide","pause","resume","finish","fail","loading","fn","popup","adConfig","optionAdConfig","ad","force","feedback","authorName","router","i18n","appOptionState","isMobile","isDarkTheme","isZhLang","props","context","emitLoadEvent","entries","_hoisted_1","_hoisted_2","_hoisted_6","_hoisted_7","_hoisted_3","_hoisted_4","_hoisted_8","_hoisted_10","_resolveComponent","_openBlock","_hoisted_9","thumb","isWebPImage","w","h","originState","kvs","v","c","isLiked","isHybrid","isReprint","isOriginal","thumbURL","_hoisted_5","_hoisted_12","_cache","_component_i18n","_createCommentVNode","_component_router_link","_component_udate","_toDisplayString","_hoisted_14","ListItem","appOptionStore","tagStore","categoryStore","articleListStore","category","articles","hasMoreArticles","pagination","titles","prop","fetchArticles","loadmoreArticles","_createTextVNode","_component_placeholder","_createVNode","_component_skeleton_base","_component_skeleton_line","_withCtx","_component_empty","_TransitionGroup","_component_loadmore","identity","_pushScopeId","_hoisted_16","isLoadMoreEnabled","_component_client_only","_createBlock","_component_Adsense","SwiperClass","Swiper","articleList","otherConfig","_component_swiper","article","GAEventCategories","media","size","list","listParam","uid","songID","swiper","prevSlide","nextSlide","handleSwiperReady","_swiper","activeIndex","handleSwiperTransitionStart","handleGtagEvent","getLocation","tweet","place","getMedias","mediaKeys","medias","completedTweets","tweets","completedTweet","url","_hoisted_15","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_25","_hoisted_27","_hoisted_29","_hoisted_33","_hoisted_36","_component_ulink","t","_hoisted_13","m","_hoisted_21","_hoisted_22","_hoisted_31","_hoisted_34","_hoisted_32","targetPage","twitterUserinfo","twitterTweets","_component_carrousel","_component_twitter","_component_article_list","_Transition","currentCategory","currentCategoryIcon","currentCategoryImage","currentCategoryColor","zhTitle","enTitle","category_slug","_component_article_list_header","_component_divider","currentTag","currentTagIcon","currentTagImage","currentTagColor","tag_slug","keyword","week","target2","isSameMonth","isSameYear","isSameDay","humanDate","separator","_day","_month","_date","categoryMap","categories","rootTree","targetYear","ye","createAt","targetMonth","mo","$setup","$data","$options","_renderSlot","$props","TunnelModule","tunnel","score","p","i18ns","store","statistics","_e","_h","archiveStore","statisticState","statisticFetching","_component_container","s","_component_archive_tree","_hoisted_11","_component_page_banner","QRCode","k","targetURL","width","height","top","left","_params","_window","onClose","timer","closeInterval","copyText","buildText","buildHtml","SocialMedia","share","dataURL","qs","enabledSocials","getURL","getTitle","getDescription","social","shareParams","_Fragment","_renderList","$event","CommentEvents","username","luanchRain","statisticsText","disqusThreadMap","slug","forum","_hoisted_26","_hoisted_30","_hoisted_39","_hoisted_35","_hoisted_40","hash","markdownHTML","countryCode","char","emojiText","cityText","uaResult","osIconName","osName","browserIconName","commentStore","isDeleting","disqusAuthorID","disqusUsername","isDisqusAuthor","isAdminAuthor","authorAvatar","authorURL","isDeleteable","parentID","nameText","isLike","commentId","_hoisted_20","_hoisted_23","_component_comment_link","_component_comment_location","_component_comment_user_agent","_component_markdown","_","handleReplyComment","handleCancelReply","handleDeleteComment","handleVoteComment","message","buildeCommentTree","comments","item","_component_comment_list","hasMore","avatar","handleUpdateProfile","blossomed","handleBlossom","_component_uimage","position","range","clone","length","parentNode","nodes","i","isNewLine","visit","sub","selection","option","before","after","currentText","selectedText","newSelectedText","newText","newInsertText","selectedRange","startPoint","endPoint","newTexts","isPreviewed","inputElement","inputElementObserver","handleTogglePreview","handleInputChange","handleSubmit","insertContentToInput","insertEmoji","emoji","insertImage","insertLink","insertCode","_preview","isPosting","isFetching","isLoading","PostKey","postingKey","isRootPosting","isReplyPosting","commentState","guestProfile","rootPenState","clearRootPenContent","closeRootPenPreview","cancelCommentReply","replyComment","fetchCommentList","fetchSortComments","sort","ANCHOR.COMMENT_ELEMENT_ID","fetchPageComments","page","lastCommentID","ANCHOR.getCommentItemElementID","createComment","payload","isGuest","guestProfileValue","author","newComment","validateFormByID","formID","check_status","formElement","handleRootSubmit","ANCHOR.COMMENT_PUBLISHER_ELEMENT_ID","handleReplySubmit","ANCHOR.COMMENT_REPLY_PUBLISHER_ELEMENT_ID","ANCHOR","_component_comment_topbar","_component_comment_publisher_main","_component_comment_main","_component_comment_pen","_component_comment_loadmore","articleDetailStore","isRenderMoreContent","isRenderMoreEnabled","_component_responsive","BaseShare","_component_base_share","articleURL","likes","handleSponsor","newliked","handleLiked","fetching","handleLike","fetchArticleDetail","articleID","articleId","_component_comment","_component_article_skeleton","_component_article_content","_component_article_meta","_component_article_upvote","_component_article_share","_component_article_neighbour","_component_article_related","_fetch","playlistID","insMedias","classNames","totalSpent","weeklyAvg","_component_statistic_count","total","githubContributionsMap","githubCalendar","getDayContributions","getDayGitHubColor","getDayTweets","getDayInstagrams","getDayArticles","handleHover","today","todayHuman","currentMonthDays","getPrevMonthFullDays","prevMonths","daysCount","months","articleCalendar","twitterCalendar","instagramCalendar","folders","folder","placemark","layerID","mapboxgl","coordinates","html","mapboxRef","lib","loaded","getMapStyle","makeSureSourceLayer","_map","handleMapboxReady","prevPopup","_component_mapbox","modalVisible","gmStore","gmFolders","fi","placemarks","pi","longitude","latitude","extendedData","gmGeoJson","openModal","handleFolderClick","firstPlacemark","targetFolder","handleLivingNow","_component_footprint_modal","handleGTagEvent","modalState","handleOpenWechat","handleStatement","handleFeedback","backgroundVideo","adminInfo","appOption","links","_hoisted_24","_resolveDynamicComponent","_component_github_statistic","_component_npm_statistic","_component_douban_statistic","_component_instagram_media","_component_footprint_map","_component_aggregate_calendar","GUESTBOOK_POST_ID","mockCommentLoading","siteLikes","bannerImage","fetchAllData","_component_webfont","ProviderId","initId","activeId","activeProvider","ghSponsors","ghSponsorsLoading","ensureGitHubSponsors","setProviderId","provider","handleCopyAddress","edge","sponsorState","targetId","_component_sponsor_tabs","_component_sponsor_provider","gallerySwiper","galleryActiveMedia","galleryActiveIndex","isOnGallery","gridMedias","restMedias","_directive_lozad","_component_gallery","listSwiperState","listSwiper","listPrevSlide","listNextSlide","handleListSlideChange","videos","fetchVideos","getThumbURL","thumbnails","handleView","video","_resolveDirective","_component_list_swiper","_withDirectives","isOnYouTubeModal","youtubeModalVideo","youTubeModalURL","_component_youtube_video_list","_component_popup","youtubePlaylistData","youtubePlayList","instagramMedias","_component_youtube_playlist","address","label","openseaAssets","openseaCollections","_hoisted_28","asset","CategorySlug","RouteName","tagSlug","categorySlug","routeName","prev","next","tagText","foundTag","command","renderer","raw","safeedRaw","idText","isFigure","trimmed","isDiv","checked","href","isSelf","isImageLink","textValue","hrefValue","sanitizeUrl","titleValue","alt","altValue","code","isEscaped","output","lineNumbers","readOnlyAttrs","highlight","markdown","renderOptions","isRestart","isLoadMore","headings","minutes","shortContent","splitLength","lastH5Index","lastH4Index","lastH3Index","lastLineIndex","plus","pinia","fetchBasicStore","initFetchTasks","stores","contextStore","ymd","meridiem","ago","between","hourS","dayS","weekS","monthS","yearS","pluralize","routerLinkProps","customAttrs","ps","external","blank","deferRenderable","restProps","imageSrc","cdn","proxy","isEmptyData","getPlaceholderView","i18nKey","getDataView","getLoadingView","getView","transition","transitionName","mounted","setRender","resultKey","singleResult","renderResult","_j","style","margin","rainBase","routeMeta","handleResolveRoute","_error","initVolume","muted","playableSongList","song","fetchSongList","currentSong","amplitude","play","prevSong","nextSong","changeVolume","volume","toggleMuted","togglePlay","initPlayer","songs","init","musicPlayer","seconds","secondsText","minutesText","music","isOnPlayerModel","styles","startAnimation","handleClick","flowers","handleAnimationEnd","flower","targetIndex","wallpaperStore","wallpapers","currentWallpaper","isOnWallpaper","animationFrameID","isTopButtonMouseOver","isBottomButtonMouseOver","handleRSS","slowMoveToAnyWhere","targetScrollY","currentScrollY","isStartSlow","emotions","historyFeedbacks","isSubmitable","emotion","email","_email","menu","inputKeyword","paramsKeyword","isSearchPage","statisticStore","_component_statistic_skeleton","articleFullList","hotPage","perPage","pages","realIndex","minHeadingLevel","tableView","WEEKDAYS","weekDayTexts","headerText","isSameTodayTable","monthText","dayText","yearText","setTable","table","firstDayDate","firstDayWeek","todoDays","toPrevMonth","isPrevYear","toNextMonth","isNextYear","handleDayClick","articlesIn","targetDate","getDateRoute","_component_calendar","isArticlePage","stickyEvents","handleStickyStateChange","_component_aside_search","_component_aside_statistic","_component_aside_article","_component_aside_calendar","isEnabledNav","themeValue","themeIcon","toggleTheme","tooggleLanguage","HeaderView","FooterView","AsideView","handlePageTransitionDone","handleSponsorModalClose","handleFeedbackModalClose","handleStatementModalClose","_component_background","_component_share","_component_wallpaper","_component_header_view","_component_router_view","_Suspense","searchState","handleMenuToggle","openSearch","cancelSearch","submitSearch","adminInfoStore","languageIcon","pageURL","isOpenedAside","openAside","closeAside","opened","_component_aside_view","_component_captured","_component_desktop_main","newError","clientID","rootClass","insClass","insStyle","dataAdClient","dataAdSlot","dataAdLayoutKey","dataAdTest","dataAdFormat","dataFullWidthResponsive","adsenseConfig","component","handleWindowScroll","hidden","handleMaskClick","others","visible","popupOptions","renderSlotNode","renderTeleportNode","renderModalNode","popupProps","imageAttrs","imageProps","image","cb","vImage","attrs","popupStore","canvas","rowBlank","imageData","y","x","columnBlank","bottom","ctx","right","max","copy","favicon","slogan","Emoji233333","__","failure","isHidden","surprises"],"sources":["../../vite/modulepreload-polyfill","../../src/environment.ts","../../src/universal/context.ts","../../src/app/environment.ts","../../src/config/api.config.ts","../../src/config/app.config.ts","../../src/language/key.ts","../../src/language/lang-zh.ts","../../src/language/lang-en.ts","../../src/language/index.ts","../../src/universal/ref.ts","../../src/constants/error.ts","../../src/transforms/ua.ts","../../src/app/state.ts","../../src/universal/prefetch.ts","../../src/universal/index.ts","../../src/stores/_fetch.ts","../../src/transforms/text.ts","../../src/services/nodepress.ts","../../src/stores/tag.ts","../../src/stores/category.ts","../../src/constants/state.ts","../../src/constants/value.ts","../../src/utils/delayer.ts","../../src/utils/storage.ts","../../src/stores/identity.ts","../../src/stores/comment.ts","../../src/constants/anchor.ts","../../src/effects/highlight/index.ts","../../src/composables/lozad.ts","../../src/transforms/validate.ts","../../src/utils/scroller.ts","../../src/composables/i18n.ts","../../src/constants/proxy.ts","../../src/transforms/url.ts","../../src/composables/meta.ts","../../src/transforms/gtag.ts","../../src/utils/scripter.ts","../../src/composables/gtag.ts","../../src/composables/theme.ts","../../src/composables/defer.ts","../../src/composables/loading/progress.vue","../../src/composables/loading/index.ts","../../src/composables/popup/constant.ts","../../src/composables/popup/hook.ts","../../src/stores/basic.ts","../../src/app/enhancer.ts","../../src/components/flow/mobile/loadmore.vue","../../src/transforms/thumbnail.ts","../../src/transforms/state.ts","../../src/components/flow/mobile/item.vue","../../src/components/flow/mobile/index.vue","../../src/components/flow/desktop/item.vue","../../src/components/flow/desktop/list.vue","../../src/effects/swiper/index.ts","../../src/pages/index/carrousel.vue","../../src/constants/gtag.ts","../../src/transforms/media.ts","../../src/pages/index/twitter.vue","../../src/pages/index/index.vue","../../src/components/flow/desktop/header.vue","../../src/pages/category.vue","../../src/pages/tag.vue","../../src/pages/date.vue","../../src/pages/search.vue","../../src/transforms/moment.ts","../../src/stores/archive.ts","../../src/components/common/banner.vue","../../src/pages/archive/tree.vue","../../src/config/bff.config.ts","../../src/services/tunnel.ts","../../src/constants/tunnel.ts","../../src/stores/statistic.ts","../../src/pages/archive/shared.ts","../../src/pages/archive/desktop.vue","../../src/pages/archive/mobile.vue","../../src/transforms/qrcode.ts","../../src/utils/opener.ts","../../src/effects/copyright.ts","../../src/utils/clipboard.ts","../../src/components/widget/share.vue","../../src/components/comment/helper.ts","../../src/components/comment/topbar.vue","../../src/components/comment/list/main.vue","../../src/transforms/avatar.ts","../../src/components/common/markdown.vue","../../src/components/comment/list/link.vue","../../src/transforms/emoji.ts","../../src/components/comment/list/location.vue","../../src/components/comment/list/user-agent.vue","../../src/components/comment/list/item.vue","../../src/components/comment/list/list.vue","../../src/components/comment/loadmore.vue","../../src/components/comment/publisher/main.vue","../../src/components/comment/publisher/publisher.vue","../../src/utils/editable.ts","../../src/components/comment/publisher/pen.vue","../../src/components/comment/index.vue","../../src/pages/article/skeleton.vue","../../src/pages/article/content.vue","../../src/pages/article/share.vue","../../src/pages/article/meta.vue","../../src/pages/article/upvote.vue","../../src/pages/article/related.vue","../../src/pages/article/neighbour.vue","../../src/pages/article/index.vue","../../src/stores/media.ts","../../src/pages/about/media/instagram.vue","../../src/pages/about/statistic/base.vue","../../src/pages/about/statistic/douban.vue","../../src/pages/about/statistic/github.vue","../../src/pages/about/statistic/twitter.vue","../../src/pages/about/statistic/npm.vue","../../src/pages/about/calendar/day.vue","../../src/pages/about/calendar/index.vue","../../src/pages/about/shared.ts","../../src/pages/about/footprint/helper.ts","../../src/pages/about/footprint/mapbox.vue","../../src/pages/about/footprint/modal.vue","../../src/pages/about/footprint/index.vue","../../src/pages/about/desktop.vue","../../src/pages/about/mobile.vue","../../src/pages/guestbook.vue","../../src/pages/app.vue","../../src/components/widget/sponsor/state.ts","../../src/components/widget/sponsor/tabs.vue","../../src/components/widget/sponsor/provider.vue","../../src/pages/sponsor.vue","../../src/pages/lens/skeleton.vue","../../src/pages/lens/instagram/gallery.vue","../../src/pages/lens/instagram/grid.vue","../../src/pages/lens/swiper.vue","../../src/pages/lens/youtube/videos.vue","../../src/pages/lens/youtube/playlist.vue","../../src/pages/lens/index.vue","../../src/transforms/nft.ts","../../src/pages/nft.vue","../../src/app/router.ts","../../src/transforms/route.ts","../../src/transforms/relink.ts","../../src/transforms/markdown.ts","../../src/stores/article.ts","../../src/stores/announcement.ts","../../src/stores/wallpaper.ts","../../src/stores/nft.ts","../../src/stores/calendar.ts","../../src/stores/_hook.ts","../../src/stores/index.ts","../../src/components/common/webfont.vue","../../src/components/common/spin.vue","../../src/components/common/empty.vue","../../src/components/common/divider.vue","../../src/components/common/udate.ts","../../src/components/common/ulink.ts","../../src/components/common/uimage.ts","../../src/components/common/placeholder.ts","../../src/components/common/client-only.ts","../../src/components/common/container.ts","../../src/components/common/responsive.ts","../../src/components/common/skeleton/base.vue","../../src/components/common/skeleton/line.vue","../../src/components/common/skeleton/paragraph.vue","../../src/app/component.ts","../../src/components/widget/emoji-rain.vue","../../src/transforms/layout.ts","../../src/components/root/error.vue","../../src/components/root/captured.vue","../../src/composables/music.ts","../../src/components/widget/music-player/player.vue","../../src/components/widget/music-player/handle.vue","../../src/components/widget/wallflower/flower.vue","../../src/components/widget/wallflower/garden.vue","../../src/components/widget/wallpaper/wall.vue","../../src/components/widget/wallpaper/switcher.vue","../../src/components/widget/background.vue","../../src/components/widget/toolbox.vue","../../src/components/widget/feedback.vue","../../src/transforms/email.ts","../../src/components/widget/statement.vue","../../src/components/layout/desktop/menu.ts","../../src/components/layout/desktop/nav.vue","../../src/components/layout/desktop/aside/search.vue","../../src/components/layout/desktop/aside/statistic.vue","../../src/components/layout/desktop/aside/article.vue","../../src/components/layout/desktop/aside/mammon.vue","../../src/components/layout/desktop/aside/tag.vue","../../src/components/layout/desktop/aside/anchor.vue","../../src/components/widget/calendar.vue","../../src/components/layout/desktop/aside/calendar.vue","../../src/components/layout/desktop/aside/index.vue","../../src/components/layout/desktop/header.vue","../../src/components/layout/desktop/footer.vue","../../src/components/layout/desktop/main.vue","../../src/components/layout/mobile/header.vue","../../src/components/layout/mobile/footer.vue","../../src/components/layout/mobile/aside.vue","../../src/components/layout/mobile/main.vue","../../src/app/index.vue","../../src/app/main.ts","../../src/composables/adsense.ts","../../src/composables/popup/root.vue","../../src/composables/popup/popup.ts","../../src/composables/popup/image.ts","../../src/composables/popup/index.ts","../../src/effects/amplitude.ts","../../src/transforms/text-2-image.ts","../../src/effects/titler.ts","../../src/effects/slogan.ts","../../src/effects/exporter.ts","../../src/effects/sticky.ts","../../src/effects/emoji-23333.ts","../../src/utils/random.ts","../../src/csr.ts"],"sourcesContent":["__VITE_IS_MODERN__&&(function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n}());","/**\n * @file Dev environment\n * @module environment\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport enum NodeEnv {\n  Development = 'development',\n  Production = 'production',\n  Test = 'test'\n}\n\nexport const NODE_ENV = process.env.NODE_ENV as NodeEnv\nexport const isDev = process.env.NODE_ENV === NodeEnv.Development\nexport const isProd = process.env.NODE_ENV === NodeEnv.Production\nexport const isTest = process.env.NODE_ENV === NodeEnv.Test\n","/**\n * @file App universal context\n * @module universal.context\n * @author Surmon <https://github.com/surmon-china>\n */\n\n// https://github.com/nuxt/framework/blob/main/packages/nitro/src/runtime/app/render.ts\nimport { watchEffect } from 'vue'\nimport { isClient, isServer } from '/@/app/environment'\n\n// Symble\nconst SSR_SYMBLE_KEY = '__SSR__'\nexport const renderSSRSymbleScript = () => {\n  return `<script>window.${SSR_SYMBLE_KEY} = true</script>`\n}\nexport const getSSRSymbleStatus = () => Boolean((window as any)[SSR_SYMBLE_KEY])\n\n// Context\nconst SSR_CONTEXT_KEY = '__INITIAL_SSR_CONTEXT__'\nexport const renderSSRContextScript = (data: string) => {\n  return `<script>window.${SSR_CONTEXT_KEY} = ${data}</script>`\n}\nexport const getSSRContextData = (): Partial<SSRContext> | null => {\n  return (window as any)[SSR_CONTEXT_KEY] || null\n}\n\nexport interface SSRContext {\n  store: any\n  refs: any\n  url: string\n  [key: string]: any\n}\n\n// ssr context\nlet ssrContext: Partial<SSRContext> = {}\nexport const setSSRContext = (key: keyof SSRContext, value: any) => {\n  ssrContext[key] = value ? JSON.parse(JSON.stringify(value)) : value\n}\nexport const getSSRContext = (key: keyof SSRContext) => {\n  return isClient ? getSSRContextData()?.[key] : ssrContext[key]\n}\n\n// for app\nexport function rebirthSSRContext(app: any) {\n  ssrContext = Object.assign({}, {})\n  app.config.globalProperties.$ssrContext = ssrContext\n  return ssrContext\n}\nexport function getSSRContextByApp(app: any) {\n  return app.config.globalProperties.$ssrContext || ssrContext\n}\n\n/**\n * Allows full control of the hydration cycle to set and receive data from the server.\n *\n * @param key a unique key to identify the data in the Nuxt payload\n * @param get a function that returns the value to set the initial data\n * @param set a function that will receive the data on the client-side\n * @link https://github.com/nuxt/framework/blob/main/packages/nuxt3/src/app/composables/hydrate.ts\n * @example\n    useHydration(\n      'store',\n      () => pinia.state.value,\n      (storeState) => (pinia.state.value = storeState)\n    )\n */\n// MARK: memory leak\nexport const useHydration = <T>(key: keyof SSRContext, get: () => T, set: (value: T) => void) => {\n  if (isServer) {\n    watchEffect(() => {\n      setSSRContext(key, get())\n    })\n  }\n  if (isClient) {\n    set(getSSRContext(key))\n  }\n}\n","/**\n * @file App environment\n * @module app.environment\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { getSSRSymbleStatus } from '/@/universal/context'\n\n// app mode\nexport const isSSR = typeof window === 'undefined' || getSSRSymbleStatus()\nexport const isSPA = !isSSR\n\n// runtime env\nexport const isServer = import.meta.env.SSR\nexport const isClient = !isServer\n","/**\n * @file Api config\n * @module config.api\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { isDev } from '/@/environment'\nimport { isSPA, isServer } from '/@/app/environment'\n\n// common\nconst API_PROXY_URL = import.meta.env.VITE_API_PROXY_URL as string\nconst API_LOCAL_URL = import.meta.env.VITE_API_LOCAL_URL as string\nconst API_ONLINE_URL = import.meta.env.VITE_API_ONLINE_URL as string\n\n// dev:\n//  SPA -> /api > dev server proxy > online API\n//  SSR -> server ? online api : /api\nconst DEV_API = isSPA ? API_PROXY_URL : isServer ? API_ONLINE_URL : API_PROXY_URL\n// const DEV_API = isSPA ? API_PROXY_URL : API_LOCAL_URL\n\n// prod:\n//  SPA -> online api\n//  SSR -> server ? localhost : online api\n// const PROD_API = API_ONLINE_URL\nconst PROD_API = isSPA ? API_ONLINE_URL : isServer ? API_LOCAL_URL : API_ONLINE_URL\n\nexport default {\n  FE: import.meta.env.VITE_FE_URL as string,\n  CDN: import.meta.env.VITE_CDN_URL as string,\n  PROXY: import.meta.env.VITE_PROXY_URL as string,\n  STATIC: import.meta.env.VITE_STATIC_URL as string,\n  NODEPRESS: isDev ? DEV_API : PROD_API\n}\n","/**\n * @file App config\n * @module config.app\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const DEFAULT_DELAY = 468\nexport const LONG_ARTICLE_THRESHOLD = 16688\n\nexport const META = Object.freeze({\n  title: 'Surmon.me',\n  zh_sub_title: '来苏之望',\n  en_sub_title: 'Come into the wild',\n  zh_biography: '本是浪蝶游蜂，自留半亩石池，但求直抒胸臆，挥墨九云之中',\n  en_biography: 'Either write something worth reading or do something worth writing.',\n  url: 'https://surmon.me',\n  domain: 'surmon.me',\n  author: 'Surmon',\n  primary: '#0088f5'\n})\n\nexport const GEO_INFO = Object.freeze({\n  zh_title: '苟活于此，养两条狗',\n  en_title: 'Omicron prison, Shanghai',\n  coordinates: [121.55152956275738, 31.215855513780504]\n})\n\nexport const MAPBOX_CONFIG = Object.freeze({\n  TOKEN: 'pk.eyJ1Ijoic3VybW9uIiwiYSI6ImNsNDE4YmkzNjB2Z2wzY3F5dWg2M2tqeWIifQ.JhgYGFI4zsuNiX9dH-pBDg',\n  STYLE_LIGHT: 'mapbox://styles/surmon/cl41fktzn000f14pet94oo1u4',\n  STYLE_DARK: 'mapbox://styles/surmon/cl41gy1qo000l15ry20j5ae0k',\n  ZOOM: 11.337439,\n  CENTER: [121.4930539351185, 31.227570979004497]\n})\n\nexport const IDENTITIES = Object.freeze({\n  GOOGLE_ANALYTICS_TRACKING_ID: 'UA-84887611-3',\n  GOOGLE_ADSENSE_PUBLISHER_ID: 'ca-pub-4710915636313788',\n  YOUTUBE_CHANNEL_ID: 'UCoL-j6T28PLSJ2U6ZdONS0w',\n  MUSIC_163_BGM_ALBUM_ID: '638949385',\n  DOUBAN_USER_ID: '56647958',\n  GITHUB_USER_NAME: 'surmon-china',\n  TWITTER_USER_NAME: 'surmon7788',\n  INSTAGRAM_USERNAME: 'surmon666',\n  INSTAGRAM_FB_ID: '17841405600281893',\n  BTC_ADDRESS: 'bc1qhpdu03tnexkj4xsm3lqzyjdddz6z0rj2n7fsze',\n  ETH_ADDRESS: '0xaD556974D449126efdeF23f4FF581861C301cB77',\n  OPENSEA_ETH: '0xaD556974D449126efdeF23f4FF581861C301cB77'\n})\n\nexport const VALUABLE_LINKS = Object.freeze({\n  RSS: '/rss.xml',\n  SITE_MAP: '/sitemap.xml',\n  UPTIME_STATUS: 'https://stats.uptimerobot.com/Q2k7OTXxJN',\n  NPM_HOMEPAGE: 'https://www.npmjs.com/~surmon',\n  PAYPAL: 'https://paypal.me/surmon',\n  GITHUB_SPONSORS: `https://github.com/sponsors/${IDENTITIES.GITHUB_USER_NAME}`,\n  GITHUB: `https://github.com/${IDENTITIES.GITHUB_USER_NAME}`,\n  GITHUB_SURMON_ME: 'https://github.com/surmon-china/surmon.me',\n  GITHUB_NODEPRESS: 'https://github.com/surmon-china/nodepress',\n  GITHUB_SURMON_ME_NATIVE: 'https://github.com/surmon-china/surmon.me.native',\n  GITHUB_BLOG_STAR_LIST: 'https://github.com/stars/surmon-china/lists/surmon-me',\n  APP_APK_FILE:\n    'https://raw.githubusercontent.com/surmon-china/surmon.me.native/master/dist/android/surmon.me.apk',\n  MARKDOWN: 'https://daringfireball.net/projects/markdown/',\n  GOOGLE_MY_MAP: `https://www.google.com/maps/d/embed?mid=1sRx6t0Yj1TutbwORCvjwTMgr70r62Z6w&z=3`,\n  GOOGLE_MY_MAP_KML: `https://www.google.com/maps/d/u/0/kml?forcekml=1&mid=1sRx6t0Yj1TutbwORCvjwTMgr70r62Z6w`,\n  DISCORD_GROUP: 'https://discord.surmon.me',\n  TELEGRAM_GROUP: 'https://t.me/+Z2wsxogVbYM2ZmE1',\n  MUSIC_163: `https://music.163.com/#/playlist?id=${IDENTITIES.MUSIC_163_BGM_ALBUM_ID}`,\n  YOUTUBE_CHANNEL: `https://www.youtube.com/channel/${IDENTITIES.YOUTUBE_CHANNEL_ID}`,\n  TELEGRAM: 'https://t.me/surmon',\n  OPENSEA: 'https://opensea.io/surmon',\n  DOUBAN: 'https://www.douban.com/people/nocower',\n  DOUBAN_MOVIE: `https://m.douban.com/people/${IDENTITIES.DOUBAN_USER_ID}/movie_charts`,\n  QUORA: 'https://www.quora.com/profile/Surmon',\n  LINKEDIN: 'https://www.linkedin.com/in/surmon',\n  INSTAGRAM: `https://www.instagram.com/${IDENTITIES.INSTAGRAM_USERNAME}`,\n  TWITTER: `https://twitter.com/${IDENTITIES.TWITTER_USER_NAME}`\n})\n","/**\n * @file Language keys\n * @module language.key\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport enum LanguageKey {\n  APP_SLOGAN = 'app-slogan',\n  CATEGORY_INSIGHT = 'insight',\n  CATEGORY_CODE = 'code',\n  PAGE_HOME = 'home',\n  PAGE_GITHUB = 'github',\n  PAGE_NFT = 'nft',\n  PAGE_LENS = 'lens',\n  PAGE_ABOUT = 'about',\n  PAGE_SPONSOR = 'sponsor',\n  PAGE_GUESTBOOK = 'guestbook',\n  PAGE_APP = 'app',\n  PAGE_ARCHIVE = 'archive',\n  STATISTIC_ARTICLES = 'statistic-articles',\n  STATISTIC_COMMENTS = 'statistic-comments',\n  STATISTIC_TAGS = 'statistic-tags',\n  STATISTIC_TODAY_VIEWS = 'statistic-today-views',\n  STATISTIC_TOTAL_VIEWS = 'statistic-total-views',\n  STATISTIC_TOTAL_UPVOTES = 'statistic-total-upvotes',\n  STATISTIC_AVERAGE_EMOTION = 'statistic-average-emotion',\n  EMPTY_PLACEHOLDER = 'common-empty-placeholder',\n  NOT_FOUND = 'not-found',\n  BACK_TO_HOME_PAGE = 'back-to-home-page',\n  GUESTBOOK_SLOGAN = 'guestbook-banner-slogan',\n  AD = 'ad',\n  BARRAGE = 'barrage',\n  FEEDBACK = 'feedback',\n  TO_TOP = 'to-page-top',\n  TO_BOTTOM = 'to-page-bottom',\n  ORIGIN_ORIGINAL = 'original',\n  ORIGIN_REPRINT = 'reprint',\n  ORIGIN_HYBRID = 'hybrid',\n  ACTION_ON = 'on',\n  ACTION_OFF = 'off',\n  MUSIC_PLACEHOLDER = 'music-placeholder',\n  SEARCH_PLACEHOLDER = 'search-input-placeholder',\n  HOT_ARTICLE_LIST_TITLE = 'hot-article-list-title',\n  ANNOUNCEMENT_PLACEHOLDER = 'announcement-empty-placeholder',\n  CATEGORY_UNCATEGORIZED = 'category-uncategorized',\n  TAG_PLACEHOLDER = 'tag-placeholder',\n  ARTICLE_TITLE = 'article-title',\n  ARTICLE_VIEWS = 'article-views',\n  ARTICLE_PLACEHOLDER = 'article-empty-placeholder',\n  ARTICLE_READ_ALL = 'read-all-article-content',\n  ARTICLE_RENDERING = 'rendering',\n  ARTICLE_LIST_LOADMORE = 'loadmore',\n  ARTICLE_LIST_LOADING = 'loading',\n  ARTICLE_LIST_NO_MORE = 'no-more',\n  COMMENT_LIST_EMPTY = 'comment-list-placeholder',\n  COMMENT_UPVOTE = 'comment-likes',\n  COMMENT_DOWNVOTE = 'comment-dislikes',\n  COMMENT_REPLY = 'reply-comment',\n  COMMENT_DELETE = 'delete-comment',\n  COMMENT_DELETE_CONFIRM = 'delete-comment-confirm',\n  COMMENT_REPLY_CANCEL = 'cancel-reply-comment',\n  COMMENT_MODERATOR = 'comment-moderator',\n  COMMENT_SORT_OLD = 'oldest-comments',\n  COMMENT_SORT_NEW = 'newest-comments',\n  COMMENT_SORT_HOT = 'hottest-comments',\n  COMMENT_POST_NAME = 'comment-author-name',\n  COMMENT_POST_EMAIL = 'comment-author-email',\n  COMMENT_POST_SITE = 'comment-author-site-url',\n  COMMENT_POST_CONTENT = 'comment-content',\n  COMMENT_POST_PLACEHOLDER = 'comment-box-placeholder',\n  COMMENT_POST_ERROR_CONTENT = 'comment-submit-failed-of-content-error',\n  QUERY_PARAMS_ERROR = 'query-params-error',\n  POST_ACTION_ERROR = 'post-requiest-failed-of-other-error',\n  SUBMIT = 'submit-data',\n  SUBMITTING = 'submitting',\n  MOMENT_AM = 'moment-am',\n  MOMENT_PM = 'moment-pm',\n  MOMENT_JUST_NOW = 'moment-just-now',\n  MOMENT_MINUTES = 'moment-minutes',\n  MOMENT_HOURS = 'moment-hours',\n  MOMENT_WEEKS = 'moment-weeks',\n  MOMENT_DAYS = 'moment-days',\n  MOMENT_MONTHS = 'moment-months',\n  MOMENT_YEAR = 'moment-year',\n  MOMENT_AGO = 'moment-ago'\n}\n","import type { LanguageMap } from '.'\nimport { LanguageKey } from './key'\nimport { META } from '/@/config/app.config'\n\nexport const zhLangMap: LanguageMap = {\n  [LanguageKey.APP_SLOGAN]: META.zh_sub_title,\n  [LanguageKey.PAGE_HOME]: '明殿',\n  [LanguageKey.CATEGORY_INSIGHT]: '无色庵',\n  [LanguageKey.CATEGORY_CODE]: '宁静寺',\n  [LanguageKey.PAGE_GITHUB]: '丹青阁',\n  [LanguageKey.PAGE_ARCHIVE]: '万象殿',\n  [LanguageKey.PAGE_GUESTBOOK]: '四方馆',\n  [LanguageKey.PAGE_ABOUT]: '狂浪生',\n  [LanguageKey.PAGE_SPONSOR]: '赞助',\n  [LanguageKey.PAGE_APP]: '客户端',\n  [LanguageKey.PAGE_LENS]: '茫涯',\n  [LanguageKey.PAGE_NFT]: '藏品',\n  [LanguageKey.STATISTIC_ARTICLES]: '全站文章',\n  [LanguageKey.STATISTIC_COMMENTS]: '全站评论',\n  [LanguageKey.STATISTIC_TAGS]: '全站标签',\n  [LanguageKey.STATISTIC_TODAY_VIEWS]: '今日阅读',\n  [LanguageKey.STATISTIC_TOTAL_VIEWS]: '累计阅读',\n  [LanguageKey.STATISTIC_TOTAL_UPVOTES]: '共获点赞',\n  [LanguageKey.STATISTIC_AVERAGE_EMOTION]: '匿名评分',\n  [LanguageKey.EMPTY_PLACEHOLDER]: '空空如也',\n  [LanguageKey.NOT_FOUND]: '众里寻他 我已不再',\n  [LanguageKey.BACK_TO_HOME_PAGE]: '山河万里 长歌归故',\n  [LanguageKey.GUESTBOOK_SLOGAN]: '此心光明 亦复何言',\n  [LanguageKey.AD]: '广而告之',\n  [LanguageKey.BARRAGE]: '畅言',\n  [LanguageKey.FEEDBACK]: '反馈',\n  [LanguageKey.TO_TOP]: '回到顶部',\n  [LanguageKey.TO_BOTTOM]: '下一屏',\n  [LanguageKey.ORIGIN_ORIGINAL]: '原创',\n  [LanguageKey.ORIGIN_REPRINT]: '转载',\n  [LanguageKey.ORIGIN_HYBRID]: '衍生',\n  [LanguageKey.ACTION_ON]: '开',\n  [LanguageKey.ACTION_OFF]: '关',\n  [LanguageKey.MUSIC_PLACEHOLDER]: '五音六律，七弦八度',\n  [LanguageKey.SEARCH_PLACEHOLDER]: '上下求索',\n  [LanguageKey.ANNOUNCEMENT_PLACEHOLDER]: '空空如也',\n  [LanguageKey.CATEGORY_UNCATEGORIZED]: '未分类',\n  [LanguageKey.TAG_PLACEHOLDER]: '无标签',\n  [LanguageKey.ARTICLE_TITLE]: '文不加点',\n  [LanguageKey.ARTICLE_VIEWS]: '次阅读',\n  [LanguageKey.ARTICLE_PLACEHOLDER]: '空空如也',\n  [LanguageKey.ARTICLE_READ_ALL]: '阅读余下全文',\n  [LanguageKey.ARTICLE_RENDERING]: '渲染中..',\n  [LanguageKey.HOT_ARTICLE_LIST_TITLE]: '群贤毕至',\n  [LanguageKey.ARTICLE_LIST_LOADMORE]: '加载更多',\n  [LanguageKey.ARTICLE_LIST_LOADING]: '正在加载',\n  [LanguageKey.ARTICLE_LIST_NO_MORE]: '没有更多',\n  [LanguageKey.COMMENT_LIST_EMPTY]: '期待你的捷足先登',\n  [LanguageKey.COMMENT_UPVOTE]: '赞',\n  [LanguageKey.COMMENT_DOWNVOTE]: '踩',\n  [LanguageKey.COMMENT_DELETE]: '删除',\n  [LanguageKey.COMMENT_DELETE_CONFIRM]: '确定要删除此评论吗？此操作不可恢复',\n  [LanguageKey.COMMENT_REPLY]: '回复',\n  [LanguageKey.COMMENT_REPLY_CANCEL]: '取消回复',\n  [LanguageKey.COMMENT_MODERATOR]: '博主',\n  [LanguageKey.COMMENT_SORT_OLD]: '最早',\n  [LanguageKey.COMMENT_SORT_NEW]: '最新',\n  [LanguageKey.COMMENT_SORT_HOT]: '最热',\n  [LanguageKey.COMMENT_POST_NAME]: '名字',\n  [LanguageKey.COMMENT_POST_EMAIL]: '邮箱',\n  [LanguageKey.COMMENT_POST_SITE]: '网址',\n  [LanguageKey.COMMENT_POST_CONTENT]: '内容',\n  [LanguageKey.COMMENT_POST_PLACEHOLDER]: '愿你的见解一针见血',\n  [LanguageKey.COMMENT_POST_ERROR_CONTENT]: '内容需要在 3000 字以内',\n  [LanguageKey.QUERY_PARAMS_ERROR]: '请求参数错误：',\n  [LanguageKey.POST_ACTION_ERROR]: '操作失败，详细原因 > 控制台',\n  [LanguageKey.SUBMIT]: '提交',\n  [LanguageKey.SUBMITTING]: '提交中...',\n  [LanguageKey.MOMENT_AM]: '上午',\n  [LanguageKey.MOMENT_PM]: '下午',\n  [LanguageKey.MOMENT_JUST_NOW]: '刚刚',\n  [LanguageKey.MOMENT_MINUTES]: '分钟',\n  [LanguageKey.MOMENT_HOURS]: '小时',\n  [LanguageKey.MOMENT_WEEKS]: '周',\n  [LanguageKey.MOMENT_DAYS]: '天',\n  [LanguageKey.MOMENT_MONTHS]: '个月',\n  [LanguageKey.MOMENT_YEAR]: '年',\n  [LanguageKey.MOMENT_AGO]: (args: { date: string }) => `${args.date}前`\n}\n","import type { LanguageMap } from '.'\nimport { LanguageKey } from './key'\nimport { META } from '/@/config/app.config'\n\nexport const enLangMap: LanguageMap = {\n  [LanguageKey.APP_SLOGAN]: META.en_sub_title,\n  [LanguageKey.PAGE_HOME]: 'Home',\n  [LanguageKey.CATEGORY_INSIGHT]: 'Insight',\n  [LanguageKey.CATEGORY_CODE]: 'Code',\n  [LanguageKey.PAGE_ARCHIVE]: 'Archive',\n  [LanguageKey.PAGE_GITHUB]: 'GitHub',\n  [LanguageKey.PAGE_ABOUT]: 'About',\n  [LanguageKey.PAGE_GUESTBOOK]: 'Guestbook',\n  [LanguageKey.PAGE_SPONSOR]: 'Sponsor',\n  [LanguageKey.PAGE_APP]: 'APP',\n  [LanguageKey.PAGE_LENS]: 'Lens',\n  [LanguageKey.PAGE_NFT]: 'NFTs',\n  [LanguageKey.STATISTIC_ARTICLES]: 'Articles',\n  [LanguageKey.STATISTIC_COMMENTS]: 'Comments',\n  [LanguageKey.STATISTIC_TAGS]: 'Tags',\n  [LanguageKey.STATISTIC_TODAY_VIEWS]: 'Today views',\n  [LanguageKey.STATISTIC_TOTAL_VIEWS]: 'Total views',\n  [LanguageKey.STATISTIC_TOTAL_UPVOTES]: 'Total upvotes',\n  [LanguageKey.STATISTIC_AVERAGE_EMOTION]: 'Rating',\n  [LanguageKey.EMPTY_PLACEHOLDER]: 'Null',\n  [LanguageKey.NOT_FOUND]: 'Arrives here at last',\n  [LanguageKey.BACK_TO_HOME_PAGE]: 'Drive by',\n  [LanguageKey.GUESTBOOK_SLOGAN]: 'You have come a long way',\n  [LanguageKey.AD]: 'AD',\n  [LanguageKey.BARRAGE]: 'Barrage',\n  [LanguageKey.FEEDBACK]: 'Feedback',\n  [LanguageKey.TO_TOP]: 'To top',\n  [LanguageKey.TO_BOTTOM]: 'Next screen',\n  [LanguageKey.ORIGIN_ORIGINAL]: 'OG',\n  [LanguageKey.ORIGIN_REPRINT]: 'RPT',\n  [LanguageKey.ORIGIN_HYBRID]: 'HY',\n  [LanguageKey.ACTION_ON]: 'on',\n  [LanguageKey.ACTION_OFF]: 'off',\n  [LanguageKey.MUSIC_PLACEHOLDER]: 'The music, the soul of man',\n  [LanguageKey.SEARCH_PLACEHOLDER]: 'Search...',\n  [LanguageKey.CATEGORY_UNCATEGORIZED]: 'Uncategorized',\n  [LanguageKey.ANNOUNCEMENT_PLACEHOLDER]: 'No announcements',\n  [LanguageKey.TAG_PLACEHOLDER]: 'No tags',\n  [LanguageKey.HOT_ARTICLE_LIST_TITLE]: 'Hottest',\n  [LanguageKey.ARTICLE_PLACEHOLDER]: 'No articles',\n  [LanguageKey.ARTICLE_TITLE]: 'Articles',\n  [LanguageKey.ARTICLE_VIEWS]: 'views',\n  [LanguageKey.ARTICLE_READ_ALL]: 'Show Full Article',\n  [LanguageKey.ARTICLE_RENDERING]: 'Rendering...',\n  [LanguageKey.ARTICLE_LIST_LOADMORE]: 'Loadmore',\n  [LanguageKey.ARTICLE_LIST_LOADING]: 'Loading...',\n  [LanguageKey.ARTICLE_LIST_NO_MORE]: 'No more',\n  [LanguageKey.COMMENT_LIST_EMPTY]: 'Be the first to comment',\n  [LanguageKey.COMMENT_UPVOTE]: 'upvote',\n  [LanguageKey.COMMENT_DOWNVOTE]: 'downvote',\n  [LanguageKey.COMMENT_DELETE]: 'delete',\n  [LanguageKey.COMMENT_DELETE_CONFIRM]:\n    'Are you sure you want to delete this comment? You cannot undo this action.',\n  [LanguageKey.COMMENT_REPLY]: 'reply',\n  [LanguageKey.COMMENT_REPLY_CANCEL]: 'cancel reply',\n  [LanguageKey.COMMENT_MODERATOR]: 'Moderator',\n  [LanguageKey.COMMENT_SORT_OLD]: 'Oldest',\n  [LanguageKey.COMMENT_SORT_NEW]: 'Newest',\n  [LanguageKey.COMMENT_SORT_HOT]: 'Hottest',\n  [LanguageKey.COMMENT_POST_NAME]: 'name',\n  [LanguageKey.COMMENT_POST_EMAIL]: 'email',\n  [LanguageKey.COMMENT_POST_SITE]: 'site',\n  [LanguageKey.COMMENT_POST_CONTENT]: 'content',\n  [LanguageKey.COMMENT_POST_PLACEHOLDER]: 'Hit the nail on the head',\n  [LanguageKey.COMMENT_POST_ERROR_CONTENT]: 'Content requirements are within 3000 words!',\n  [LanguageKey.QUERY_PARAMS_ERROR]: 'Invalid query params: ',\n  [LanguageKey.POST_ACTION_ERROR]: 'Failed! Get error detail in console',\n  [LanguageKey.SUBMIT]: 'Submit',\n  [LanguageKey.SUBMITTING]: 'Submitting...',\n  [LanguageKey.MOMENT_AM]: 'AM',\n  [LanguageKey.MOMENT_PM]: 'PM',\n  [LanguageKey.MOMENT_JUST_NOW]: 'Just now',\n  [LanguageKey.MOMENT_MINUTES]: 'minutes',\n  [LanguageKey.MOMENT_HOURS]: 'hours',\n  [LanguageKey.MOMENT_WEEKS]: 'weeks',\n  [LanguageKey.MOMENT_DAYS]: 'days',\n  [LanguageKey.MOMENT_MONTHS]: 'months',\n  [LanguageKey.MOMENT_YEAR]: 'year',\n  [LanguageKey.MOMENT_AGO]: (args: { date: string }) => `${args.date} ago`\n}\n","/**\n * @file I18n language\n * @module language\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport type { I18nLanguage, I18nValueRender } from '/@/composables/i18n'\nexport { LanguageKey } from './key'\nimport { LanguageKey } from './key'\nimport { zhLangMap } from './lang-zh'\nimport { enLangMap } from './lang-en'\n\nexport type LanguageValue = string | I18nValueRender\nexport type LanguageMap = Record<LanguageKey, LanguageValue>\n\nexport enum Language {\n  English = 'en',\n  Chinese = 'zh'\n}\n\nexport const languages: I18nLanguage<LanguageKey>[] = [\n  {\n    code: Language.Chinese,\n    iso: 'zh-CN',\n    name: '简体中文',\n    data: zhLangMap\n  },\n  {\n    code: Language.English,\n    iso: 'en-US',\n    name: 'English',\n    data: enLangMap\n  }\n]\n","/**\n * @file App universal ref\n * @module universal.ref\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { Ref, ref, customRef } from 'vue'\nimport { isClient, isSPA } from '/@/app/environment'\nimport { setSSRContext, getSSRContext } from './context'\n\nconst getRefData = (key: string) => getSSRContext('refs')[key]\nconst setRefData = (key: string, value: any) => {\n  setSSRContext('refs', {\n    ...getSSRContext('refs'),\n    [key]: value\n  })\n}\n\nconst getValue = <T>(value: T | (() => T)): T => {\n  return value instanceof Function ? value() : value\n}\n\nconst isProxyable = (value: unknown): value is Record<string, unknown> => {\n  return Boolean(value) && typeof value === 'object'\n}\n\n// server write only | client read only\n// https://github.com/nuxt-community/composition-api/blob/main/src/runtime/composables/ssr-ref.ts\nexport const universalRef = <T>(key: string, sourceValue: T | (() => T)): Ref<T> => {\n  // SPA\n  if (isSPA) {\n    return ref(getValue(sourceValue)) as Ref<T>\n  }\n\n  // SSR\n  let value = isClient ? getRefData(key) ?? getValue(sourceValue) : getValue(sourceValue)\n\n  // Client > return ref value\n  if (isClient) {\n    return ref(value) as Ref<T>\n  }\n\n  // Server > return customRef (sync setRef)\n  if (sourceValue instanceof Function) {\n    setRefData(key, value)\n  }\n\n  const getProxy = <T extends Record<string | number, any>>(\n    track: () => void,\n    trigger: () => void,\n    observable: T\n  ): T => {\n    return new Proxy(observable, {\n      get(target, prop: string) {\n        track()\n        if (isProxyable(target[prop])) {\n          return getProxy(track, trigger, target[prop])\n        }\n\n        const value = Reflect.get(target, prop)\n        return typeof value === 'function' ? value.bind(target) : value\n      },\n      set(object, prop, newValue) {\n        const result = Reflect.set(object, prop, newValue)\n        setRefData(key, value)\n        trigger()\n        return result\n      }\n    })\n  }\n\n  return customRef((track, trigger) => ({\n    get: () => {\n      track()\n      return isProxyable(value) ? getProxy(track, trigger, value) : value\n    },\n    set: (v: T) => {\n      setRefData(key, v)\n      value = v\n      trigger()\n    }\n  }))\n}\n","/**\n * @file Error constant\n * @module constant.error\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const BAD_REQUEST = 400\nexport const FORBIDDEN = 403\nexport const NOT_FOUND = 404\nexport const INVALID_ERROR = 500\n","/**\n * @file UA parser\n * @module transform.ua\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport parser from 'ua-parser-js'\nimport { Language } from '/@/language'\n\nexport const uaParser = (userAgent: string) => {\n  const parseResult = parser(userAgent || '')\n  const browserName = String(parseResult.browser.name).toLowerCase()\n  const isTargetDevice = (browsers: string[]) => {\n    return browsers.some((browser) => browser.toLowerCase() === browserName)\n  }\n\n  return {\n    result: parseResult,\n    isIE: isTargetDevice(['compatible', 'MSIE', 'IE']),\n    isEdge: isTargetDevice(['Edge']),\n    isFirefox: isTargetDevice(['Firefox']),\n    isChrome: isTargetDevice(['Chrome', 'Chromium']),\n    isSafari: isTargetDevice(['Safari']),\n    isWechat: isTargetDevice(['Wechat']),\n    isIos: parseResult.os.name === 'iOS',\n    isAndroid: parseResult.os.name === 'Android',\n    isMobile: parseResult.device.type === 'mobile'\n  }\n}\n\nconst isTargetLanguageUser = (language: UaLanguage, targetLang: string) => {\n  if (typeof language === 'string') {\n    return language.includes(targetLang)\n  }\n  if (Array.isArray(language)) {\n    return language.some((lang) => lang.includes(targetLang))\n  }\n  return false\n}\nexport type UaLanguage = string | string[]\nexport const isEnUser = (language: UaLanguage) => isTargetLanguageUser(language, Language.English)\nexport const isZhUser = (language: UaLanguage) => {\n  return language ? isTargetLanguageUser(language, Language.Chinese) : true\n}\n","/**\n * @file App local global state\n * @module app.state\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { App, inject, ref, computed, reactive, readonly } from 'vue'\nimport { INVALID_ERROR } from '/@/constants/error'\nimport { uaParser, isZhUser } from '/@/transforms/ua'\nimport { universalRef, onClient } from '/@/universal'\n\ntype RenderErrorValue = RenderError | null\nexport interface RenderError {\n  code: number\n  message: string\n}\n\nexport enum ImageExt {\n  WebP = 'webp',\n  Jpg = 'jpeg'\n}\n\nexport enum LayoutColumn {\n  Normal = 0,\n  Wide = 1, // 3 column\n  Full = 2 // full page\n}\n\nexport interface GlobalRawState {\n  renderError: RenderErrorValue\n  userAgent: string\n  language: string\n  layout: LayoutColumn\n}\n\nexport interface GlobalStateConfig {\n  userAgent: string\n  language: string\n  layout: LayoutColumn\n}\n\nconst GlobalStateSymbol = Symbol('globalState')\nexport type GlobalState = ReturnType<typeof createGlobalState>\nexport const createGlobalState = (config: GlobalStateConfig) => {\n  // Render error\n  const renderError = universalRef<RenderErrorValue>('error', () => null)\n  const defaultError = { code: INVALID_ERROR }\n  const setRenderError = (error: any) => {\n    onClient(() => {\n      console.warn('App error:', error)\n    })\n    if (!error) {\n      // clear error\n      renderError.value = null\n    } else if (error instanceof Error) {\n      // new Error\n      renderError.value = {\n        code: (error as any).code ?? defaultError.code,\n        message: error.message\n      }\n    } else if (typeof error === 'string') {\n      // error message\n      renderError.value = {\n        ...defaultError,\n        message: error\n      }\n    } else {\n      // error object -> axios | component\n      renderError.value = {\n        ...error,\n        code: error.status || error.status || defaultError.code\n      }\n    }\n  }\n\n  // Hydrated\n  const isHydrated = ref(false)\n  const setHydrate = () => {\n    isHydrated.value = true\n  }\n\n  // UserAgent & device info\n  const userAgent = reactive({\n    original: config.userAgent,\n    language: config.language,\n    isZhUser: isZhUser(config.language),\n    ...uaParser(config.userAgent)\n  })\n\n  // UI layout\n  const layoutValue = ref(config.layout)\n  const layoutColumn = computed(() => ({\n    layout: layoutValue.value,\n    isNormal: layoutValue.value === LayoutColumn.Normal,\n    isWide: layoutValue.value === LayoutColumn.Wide,\n    isFull: layoutValue.value === LayoutColumn.Full\n  }))\n  const setLayoutColumn = (layout: LayoutColumn) => {\n    if (layout !== layoutValue.value) {\n      layoutValue.value = layout\n    }\n  }\n\n  // MARK: 微信/Safari/移动端无法精确判断兼容性，使用 jpg 格式\n  const imageExt = computed(() => {\n    const imageExtValue =\n      userAgent.isMobile || userAgent.isWechat || userAgent.isSafari\n        ? (ImageExt.Jpg as ImageExt)\n        : (ImageExt.WebP as ImageExt)\n    return {\n      ext: imageExtValue,\n      isJpg: imageExtValue === ImageExt.Jpg,\n      isWebP: imageExtValue === ImageExt.WebP\n    }\n  })\n\n  // Global switchers\n  const switcher = reactive({\n    sponsor: false,\n    feedback: false,\n    statement: false\n  })\n  const toggleSwitcher = (key: keyof typeof switcher, value: boolean) => {\n    switcher[key] = value\n  }\n\n  // export state\n  const toRawState = (): GlobalRawState => ({\n    renderError: renderError.value,\n    userAgent: userAgent.original,\n    language: userAgent.language,\n    layout: layoutValue.value\n  })\n\n  const globalState = {\n    toRawState,\n    // Render error state\n    renderError: readonly(renderError),\n    setRenderError,\n    // Hydrate state\n    isHydrated: readonly(isHydrated),\n    setHydrate,\n    // Layout state\n    layoutColumn,\n    setLayoutColumn,\n    // Device state\n    userAgent: readonly(userAgent),\n    imageExt,\n    // Global switchers\n    switcher: readonly(switcher),\n    toggleSwitcher\n  }\n\n  return {\n    ...globalState,\n    install(app: App) {\n      app.provide(GlobalStateSymbol, globalState)\n    }\n  }\n}\n\nexport const useGlobalState = (): GlobalState => {\n  return inject(GlobalStateSymbol) as GlobalState\n}\n","/**\n * @file App universal prefetch\n * @module universal.prefetch\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { onBeforeMount, onServerPrefetch } from 'vue'\nimport { useGlobalState } from '/@/app/state'\nimport { isServer, isSPA } from '/@/app/environment'\n\n// onServerPrefetch === async setup\n// onServerPreFetch: https://github.com/vuejs/composition-api/pull/198/files\n// https://github.com/vuejs/vue-next/blob/master/packages/server-renderer/src/render.ts#L96\n// https://github.com/nuxt-community/composition-api/blob/main/src/fetch.ts#L226\n// https://github.com/nuxt/framework/blob/main/packages/nuxt3/src/app/composables/asyncData.ts\n// https://github.com/nuxt-community/composition-api/blob/main/src/runtime/composables/async.ts\nexport const useUniversalFetch = (fetcher: () => Promise<any>) => {\n  const globalState = useGlobalState()\n  const doFetchOnBeforeMount = () => {\n    onBeforeMount(() => fetcher())\n  }\n\n  // Client side: SPA\n  if (isSPA) {\n    doFetchOnBeforeMount()\n    return\n  }\n\n  // Server side: SSR\n  if (isServer) {\n    onServerPrefetch(() =>\n      fetcher().catch((error) => {\n        // HACK: 因为 onServerPrefetch 或 async setup 都无法中断 renderToString，所以需要在状态被抛出之前就做一个标记\n        globalState.setRenderError(error)\n        return Promise.reject(error)\n      })\n    )\n    return\n  }\n\n  // Client side: SSR\n  // Navigation: fetch on before mount\n  if (globalState.isHydrated.value) {\n    doFetchOnBeforeMount()\n  } else {\n    // Hydration: no fetch\n    // onServerPreFetch: https://github.com/vuejs/composition-api/pull/198/files\n    // isHydrating: https://github.com/vuejs/vue-next/issues/1723\n    // isHydrating: https://github.com/vuejs/vue-next/pull/2016\n  }\n}\n","/**\n * @file App universal\n * @module universal\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { isServer, isClient } from '/@/app/environment'\nexport * from './context'\nexport * from './ref'\nexport * from './prefetch'\n\n// env only\nexport const onClient = (callback: any) => {\n  isClient && callback()\n}\n\nexport const onServer = (callback: any) => {\n  isServer && callback()\n}\n","/**\n * @file Base fetch store\n * @module store.fetch-store\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { UnwrapRef } from 'vue'\nimport { defineStore, StateTree, PiniaCustomStateProperties } from 'pinia'\n\n// https://github.com/vuejs/pinia/blob/v2/packages/pinia/src/types.ts#L538\ntype GettersTree<S extends StateTree> = Record<\n  string,\n  ((state: UnwrapRef<S> & UnwrapRef<PiniaCustomStateProperties<S>>) => any) | (() => any)\n>\n\ninterface StoreState<D> {\n  fetching: boolean\n  fetched: boolean\n  data: D\n}\n\nexport interface FetchStoreOptions<D, G, A> {\n  id: string\n  fetcher(args?: A): Promise<D>\n  initData: D\n  onlyOnce?: boolean\n  cleanWhenRefetch?: boolean\n  getters?: G\n}\n\nexport function defineFetchStore<\n  D = any,\n  G extends GettersTree<StoreState<D>> = GettersTree<StoreState<D>>,\n  A = any\n>(options: FetchStoreOptions<D, G, A>) {\n  return defineStore<string, StoreState<D>, G, { fetch: (args?: A) => Promise<void> }>({\n    id: options.id,\n    state: () => ({\n      fetching: false,\n      fetched: false,\n      data: options.initData\n    }),\n    getters: (options.getters ?? {}) as G,\n    actions: {\n      async fetch(args?: A) {\n        if (options.onlyOnce && this.fetched) {\n          return\n        }\n        if (options.cleanWhenRefetch) {\n          // @ts-ignore\n          this.data = options.initData\n        }\n        this.fetching = true\n        try {\n          const result = await options.fetcher(args)\n          // @ts-ignore\n          this.data = result ?? null\n          this.fetched = true\n        } finally {\n          this.fetching = false\n        }\n      }\n    }\n  })\n}\n\n// const useTestStore = defineFetchStore({\n//   id: 'testStore',\n//   initData: [] as Array<{ a: number }>,\n//   fetcher: () => Promise.resolve([]),\n//   getters: { loading: (state) => state.fetching }\n// })\n\n// const testStore = useTestStore()\n// testStore.$state.data\n// testStore.loading\n","/**\n * @file Text transformer\n * @module transform.text\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport _escape from 'lodash/escape'\nimport _unescape from 'lodash/unescape'\nimport _truncate from 'lodash/truncate'\nimport _capitalize from 'lodash/capitalize'\nimport _padStart from 'lodash/padStart'\n\nexport const escape = _escape\nexport const unescape = _unescape\nexport const padStart = _padStart\nexport const textOverflow = _truncate\nexport const firstUpperCase = _capitalize\n\nexport function numberToKilo(count: number): string {\n  return count > 1000 ? `${parseFloat((count / 1000).toFixed(2))}k` : String(count)\n}\n\nexport function numberSplit(number: number): string {\n  return String(number).replace(/.{1,3}(?=(.{3})+$)/g, '$&,')\n}\n\nconst CHINESE_NUMBER_TEXT = '〇一二三四五六七八九十'.split('')\nconst CHINESE_NUMBER_CAPITAL_TEXT = '零壹贰叁肆伍陆柒捌玖拾'.split('')\nexport const numberToChinese = (text: string | number, capital = false) => {\n  const targetText = capital ? CHINESE_NUMBER_CAPITAL_TEXT : CHINESE_NUMBER_TEXT\n  return String(text)\n    .split('')\n    .map((number) => targetText[Number(number)])\n    .join('')\n}\n","/**\n * @file NodePress API service\n * @module service.nodepress\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport axios, { AxiosInstance, Method as AxiosMethod } from 'axios'\nimport { BAD_REQUEST } from '/@/constants/error'\nimport API_CONFIG from '/@/config/api.config'\nimport { isClient } from '/@/app/environment'\n\nexport enum NodePressResponseStatus {\n  Error = 'error',\n  Success = 'success'\n}\n\nexport type NodePressResult<T = any> = {\n  status: NodePressResponseStatus.Success\n  message: string\n  result: T\n}\n\nconst nodepress = axios.create({\n  baseURL: API_CONFIG.NODEPRESS,\n  withCredentials: true\n})\n\nnodepress.interceptors.response.use(\n  (response) => {\n    if (response.headers['content-type'].includes('json')) {\n      if (response.data.status !== NodePressResponseStatus.Success) {\n        return Promise.reject(response.data)\n      }\n    }\n\n    return response.data\n  },\n  (error) => {\n    const errorJSON = error.toJSON()\n    const errorInfo = {\n      ...errorJSON,\n      config: error.config,\n      code: errorJSON.status || error.response?.status || BAD_REQUEST,\n      message: error.response?.data?.error || error.response?.statusText || errorJSON.message\n    }\n\n    const serverErrorInfo = {\n      axiosName: errorJSON.name,\n      axiosMessage: errorJSON.message,\n      npError: errorInfo.message,\n      npMessage: error.response?.data?.message || '',\n      status: errorInfo.code,\n      method: errorJSON.config.method,\n      baseURL: errorJSON.config.baseURL,\n      url: errorJSON.config.url,\n      params: errorJSON.config.params,\n      data: errorJSON.config.data,\n      headers: errorJSON.config.headers\n    }\n\n    console.debug('axios error:', isClient ? error : serverErrorInfo)\n\n    return Promise.reject(errorInfo)\n  }\n)\n\ntype Method = Exclude<Lowercase<AxiosMethod>, 'unlink' | 'purge' | 'link'> | 'request'\nconst overwrite = (method: Method) => {\n  return <T = any>(\n    ...args: Parameters<AxiosInstance[typeof method]>\n  ): Promise<NodePressResult<T>> => {\n    return (nodepress[method] as any)(...args)\n  }\n}\n\nexport default {\n  $: nodepress,\n  request: overwrite('request'),\n  head: overwrite('head'),\n  get: overwrite('get'),\n  post: overwrite('post'),\n  put: overwrite('put'),\n  patch: overwrite('patch'),\n  delete: overwrite('delete'),\n  options: overwrite('options')\n}\n","/**\n * @file Tags state\n * @module store.tag\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineFetchStore } from './_fetch'\nimport { firstUpperCase } from '/@/transforms/text'\nimport { UniversalKeyValue } from '/@/constants/state'\nimport nodepress from '/@/services/nodepress'\n\nexport type TagMap = Map<string, Tag>\nexport interface Tag {\n  id: number\n  _id: string\n  name: string\n  slug: string\n  description: string\n  update_at: string\n  create_at: string\n  extends: UniversalKeyValue[]\n  articles_count: number\n}\n\nexport const tagEnName = (tag: Tag) => {\n  // english name\n  if (!/.*[\\u4e00-\\u9fa5]+.*$/.test(tag.name)) {\n    return tag.name\n  }\n  // english words\n  if (tag.slug.includes('-')) {\n    return tag.slug\n  }\n  // english word\n  return firstUpperCase(tag.slug)\n}\n\nexport const useTagStore = defineFetchStore({\n  id: 'tag',\n  initData: [] as Array<Tag>,\n  onlyOnce: true,\n  fetcher: () => nodepress.get<Array<Tag>>('/tag/all').then((response) => response.result),\n  getters: {\n    // sort by count\n    sorted: (state) => {\n      const tags = [...state.data]\n      tags.sort((a, b) => b.articles_count - a.articles_count)\n      return tags\n    },\n    // 全量标签列表（本身、全小写、全大写、首字母大写）\n    fullNameTags: (state): TagMap => {\n      const tagMap: TagMap = new Map()\n      state.data.forEach((tag) => {\n        tagMap.set(tag.name, tag)\n        tagMap.set(tag.name.toLowerCase(), tag)\n        tagMap.set(tag.name.toUpperCase(), tag)\n        tagMap.set(firstUpperCase(tag.name), tag)\n      })\n      return tagMap\n    }\n  }\n})\n","/**\n * @file Category state\n * @module store.category\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineFetchStore } from './_fetch'\nimport { UniversalKeyValue } from '/@/constants/state'\nimport nodepress from '/@/services/nodepress'\n\nexport interface Category {\n  id: number\n  _id: string\n  pid: string\n  name: string\n  slug: string\n  description: string\n  update_at: string\n  create_at: string\n  extends: UniversalKeyValue[]\n  articles_count: number\n}\n\nexport const useCategoryStore = defineFetchStore({\n  id: 'category',\n  initData: [] as Array<Category>,\n  onlyOnce: true,\n  async fetcher() {\n    const response = await nodepress.get('/category', { params: { per_page: 50 } })\n    return response.result.data as Array<Category>\n  }\n})\n","/**\n * @file State constant\n * @module constant.state\n * @author Surmon <https://github.com/surmon-china>\n */\n\n// 转载状态\nexport enum OriginState {\n  Original = 0, // 原创\n  Reprint = 1, // 转载\n  Hybrid = 2 // 混合\n}\n\n// 评论宿主页面的 POST_ID 类型\nexport enum CommentPostID {\n  Guestbook = 0 // 留言板\n}\n\n// 评论本身的类型\nexport enum CommentParentType {\n  Self = 0 // 自身一级评论\n}\n\n// 排序状态\nexport enum SortType {\n  Asc = 1, // 升序\n  Desc = -1, // 降序\n  Hottest = 2 // 热序\n}\n\nexport interface UniversalKeyValue {\n  name: string\n  value: string\n}\n\nexport interface Pagination {\n  current_page: number\n  total_page: number\n  per_page: number\n  total: number\n}\n","/**\n * @file Value constant\n * @module constant.value\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const NULL = null\nexport const UNDEFINED = void 0\n\nexport const isNull = (value) => value === NULL\nexport const isUndefined = (value) => value === UNDEFINED\nexport const isVoid = (value) => isNull(value) || isUndefined(value)\n","/**\n * @file 延时模拟器\n * @module util.delayer\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { DEFAULT_DELAY } from '/@/config/app.config'\n\nexport const delayer = (ms: number = DEFAULT_DELAY) => {\n  const start = new Date().getTime()\n  return (action: () => void) => {\n    if (!ms) {\n      action()\n      return\n    }\n\n    const time = new Date().getTime() - start\n    const timeout = ms - time\n    const isDelay = timeout > 0\n    isDelay ? setTimeout(action, timeout) : action()\n  }\n}\n\n/**\n * @example\n * ```ts\n *  delayPromise(600, promise).then(...)\n * ```\n */\nexport const delayPromise = <T>(ms: number, promise: Promise<T>) => {\n  const delay = delayer(ms)\n  return new Promise<T>((resolve, reject) => {\n    promise.then((value) => delay(() => resolve(value))).catch(reject)\n  })\n}\n","/**\n * @file Local Storage\n * @module util.storage\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const get = (key: string) => localStorage.getItem(key)\nexport const set = (key: string, data: string) => localStorage.setItem(key, data)\nexport const remove = (key: string) => localStorage.removeItem(key)\n\nexport const setJSON = (key: string, data: any) => set(key, JSON.stringify(data))\nexport const getJSON = <T = any>(key: string): T | null => {\n  const data = get(key)\n  return typeof data === 'string' ? JSON.parse(data) : null\n}\n\nexport default {\n  get,\n  set,\n  remove,\n  setJSON,\n  getJSON\n}\n","/**\n * @file Identity state\n * @module store.identity\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineStore } from 'pinia'\nimport { getJSON, setJSON, remove } from '/@/utils/storage'\nimport nodepress from '/@/services/nodepress'\nimport { Author } from './comment'\n\nexport type UserLocalProfile = Author\nexport enum UserType {\n  Null = 0,\n  Local = 1,\n  Disqus = 2\n}\n\nconst LOCAL_STORGAE_KEY = 'identity-state'\n\nexport const useIdentityStore = defineStore('identity', {\n  state: () => ({\n    // disqus config\n    disqusConfig: null as any,\n    // user\n    user: {\n      type: UserType.Null,\n      localProfile: null as UserLocalProfile | null,\n      disqusProfile: null as any | null\n    },\n    // vote history\n    vote: {\n      likedPages: [] as number[],\n      likedComments: [] as number[],\n      dislikedComments: [] as number[]\n    },\n    // feedback history\n    feedbacks: [] as any[]\n  }),\n  getters: {\n    isLikedPage: (state) => (id: number) => state.vote.likedPages.includes(id),\n    isLikedComment: (state) => (id: number) => state.vote.likedComments.includes(id),\n    isDislikedComment: (state) => (id: number) => state.vote.dislikedComments.includes(id),\n    author: (state): Author | null => {\n      if (state.user.type === UserType.Local) {\n        return state.user.localProfile\n      }\n      if (state.user.type === UserType.Disqus) {\n        return {\n          name: state.user.disqusProfile?.name,\n          site: state.user.disqusProfile?.url || state.user.disqusProfile?.profileUrl\n        }\n      }\n      return null\n    }\n  },\n  actions: {\n    likeComment(commentID: number) {\n      this.vote.likedComments.push(commentID)\n    },\n    dislikeComment(commentID: number) {\n      this.vote.dislikedComments.push(commentID)\n    },\n    likePage(id: number) {\n      this.vote.likedPages.push(id)\n    },\n    addFeedback(data) {\n      this.feedbacks.push(data)\n    },\n    fromStorage() {\n      try {\n        this.$state = getJSON(LOCAL_STORGAE_KEY) || this.$state\n      } catch (error) {\n        remove(LOCAL_STORGAE_KEY)\n      }\n    },\n    initOnClient() {\n      // 1. bind client storage\n      this.fromStorage()\n      this.$subscribe(() => setJSON(LOCAL_STORGAE_KEY, this.$state))\n      window.addEventListener('storage', (event) => {\n        if (event.key === LOCAL_STORGAE_KEY) {\n          this.fromStorage()\n        }\n      })\n      // 2. init and reset user info\n      if (this.$state.user.type === UserType.Disqus) {\n        this.fetchDisqusUserInfo().catch(() => {\n          this.user.disqusProfile = null\n          this.user.type = UserType.Null\n        })\n      } else {\n        this.user.disqusProfile = null\n      }\n      // 3. refetch disqus config\n      this.fetchDisqusConfig()\n    },\n    saveLocalUser(user: UserLocalProfile) {\n      this.user.localProfile = { ...user }\n      this.user.type = UserType.Local\n    },\n    removeLocalUser() {\n      this.user.localProfile = null\n      this.user.type = UserType.Null\n    },\n    fetchDisqusLogout() {\n      return nodepress.get('/disqus/oauth-logout').then(() => {\n        this.user.disqusProfile = null\n        this.user.type = UserType.Null\n      })\n    },\n    fetchDisqusUserInfo() {\n      return nodepress.get<any>('/disqus/user-info').then((response) => {\n        this.user.disqusProfile = response.result\n        this.user.type = UserType.Disqus\n      })\n    },\n    fetchDisqusConfig() {\n      return nodepress.get<string>('/disqus/config').then((response) => {\n        this.disqusConfig = response.result\n      })\n    }\n  }\n})\n","/**\n * @file Comment state\n * @module store.comment\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineStore } from 'pinia'\nimport nodepress from '/@/services/nodepress'\nimport { isClient } from '/@/app/environment'\nimport { SortType, UniversalKeyValue, CommentParentType, Pagination } from '/@/constants/state'\nimport { UNDEFINED } from '/@/constants/value'\nimport { delayPromise } from '/@/utils/delayer'\nimport { useIdentityStore } from './identity'\n\nexport const COMMENT_API_PATH = '/comment'\nexport const COMMENT_EMPTY_PID = CommentParentType.Self\n\nexport interface Author {\n  name: string\n  site?: string\n  email?: string\n  email_hash?: string\n}\n\nexport interface IPLocation {\n  country: string\n  country_code: string\n  region: string\n  region_code: string\n  city: string\n  zip: string\n}\n\nexport interface Comment {\n  post_id: number\n  id: number\n  pid: number | typeof COMMENT_EMPTY_PID\n  content: string\n  agent?: string\n  author: Author\n  likes: number\n  dislikes: number\n  ip?: string\n  ip_location?: IPLocation\n  create_at: string\n  update_at: string\n  extends: UniversalKeyValue[]\n}\nexport interface CommentFetchParams {\n  page?: number\n  per_page?: number\n  sort?: SortType\n  [key: string]: any\n}\n\nexport interface CommentTreeItem {\n  comment: Comment\n  children: Array<Comment>\n}\n\nexport const useCommentStore = defineStore('comment', {\n  state: () => ({\n    fetching: false,\n    posting: false,\n    deleting: false,\n    comments: [] as Array<Comment>,\n    pagination: null as null | Pagination\n  }),\n  getters: {\n    commentTreeList: (state): Array<CommentTreeItem> => {\n      // only keep 2 level tree\n      const ids = state.comments.map((comment) => comment.id)\n      const roots = state.comments.filter(\n        (comment) => comment.pid === COMMENT_EMPTY_PID || !ids.includes(comment.pid)\n      )\n      const children = state.comments.filter(\n        (comment) => comment.pid !== COMMENT_EMPTY_PID && ids.includes(comment.pid)\n      )\n      const fullMap = new Map<number, Comment>(\n        state.comments.map((comment) => [comment.id, comment])\n      )\n      const treeMap = new Map<number, { comment: Comment; children: Array<Comment> }>(\n        roots.map((comment) => [comment.id, { comment, children: [] }])\n      )\n\n      const findRootParentID = (pid: number): number | void => {\n        const target = fullMap.get(pid)\n        if (!target) {\n          return UNDEFINED\n        }\n        return target.pid === COMMENT_EMPTY_PID ? target.id : findRootParentID(target.pid)\n      }\n\n      children.forEach((comment) => {\n        const rootPID = findRootParentID(comment.pid)\n        if (rootPID) {\n          if (treeMap.has(rootPID)) {\n            const target = treeMap.get(rootPID)!\n            treeMap.set(rootPID, {\n              ...target,\n              children: [comment, ...target.children]\n            })\n          }\n        }\n      })\n      return Array.from(treeMap.values())\n    }\n  },\n  actions: {\n    clearList() {\n      this.comments = []\n      this.pagination = null\n    },\n\n    fetchList(params: CommentFetchParams = {}, loadmore = false) {\n      params = {\n        page: 1,\n        per_page: 50,\n        sort: SortType.Desc,\n        ...params\n      }\n\n      // clear list when refetch\n      if (params.page === 1) {\n        this.clearList()\n      }\n      this.fetching = true\n      const fetch = nodepress.get(COMMENT_API_PATH, { params })\n      const promise = isClient ? delayPromise(480, fetch) : fetch\n      return promise\n        .then((response) => {\n          this.pagination = response.result.pagination\n          if (loadmore) {\n            this.comments.push(...response.result.data)\n          } else {\n            this.comments = response.result.data\n          }\n        })\n        .finally(() => {\n          this.fetching = false\n        })\n    },\n\n    postComment(comment: Partial<Comment>) {\n      this.posting = true\n      return nodepress\n        .post<Comment>('/disqus/comment', comment)\n        .then((response) => {\n          this.comments.unshift(response.result)\n          if (this.pagination) {\n            this.pagination.total++\n          }\n          return response.result\n        })\n        .finally(() => {\n          this.posting = false\n        })\n    },\n\n    deleteComment(commentID: number) {\n      this.deleting = true\n      return nodepress\n        .delete('/disqus/comment', { data: { comment_id: commentID } })\n        .then(() => {\n          const index = this.comments.findIndex((comment) => comment.id === commentID)\n          if (index > -1) {\n            this.comments.splice(index, 1)\n            this.pagination!.total--\n          }\n        })\n        .finally(() => {\n          this.deleting = false\n        })\n    },\n\n    postCommentVote(commentID: number, vote: 1 | -1) {\n      const identityStore = useIdentityStore()\n      return nodepress\n        .post(`/vote/comment`, { comment_id: commentID, vote, author: identityStore.author })\n        .then(() => {\n          const comment = this.comments.find((comment) => comment.id === commentID)\n          if (comment) {\n            vote > 0 ? comment.likes++ : comment.dislikes++\n          }\n        })\n    }\n  }\n})\n","/**\n * @file Anchor constant\n * @module constant.anchor\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const HEADER_ELEMENT_ID = 'A_header'\nexport const NAV_ELEMENT_ID = 'A_nav'\nexport const MAIN_ELEMENT_ID = 'A_main'\nexport const MAIN_CONTENT_ELEMENT_ID = 'A_main'\nexport const ASIDE_ELEMENT_ID = 'A_aside'\nexport const FOOTER_ELEMENT_ID = 'A_footer'\n\nexport const ARTICLE_CONTENT_ELEMENT_ID = 'A_article_content'\nexport const ARTICLE_READMORE_ELEMENT_ID = 'A_article_readmore'\nexport const ARTICLE_META_ELEMENT_ID = 'A_article_meta'\nexport const ARTICLE_SHARE_ELEMENT_ID = 'A_article_share'\nexport const ARTICLE_RELATED_ELEMENT_ID = 'A_article_related'\n\nexport const ARTICLE_CONTENT_HEADING_ELEMENT_ID_PREFIX = 'A_article_content_heading'\nexport const getArticleContentHeadingElementID = (level: number, heading: string) => {\n  return `${ARTICLE_CONTENT_HEADING_ELEMENT_ID_PREFIX}_${level}_${heading}`\n}\n\nexport const COMMENT_ELEMENT_ID = 'A_comment_warpper'\nexport const COMMENT_PUBLISHER_ELEMENT_ID = 'A_comment_publisher'\nexport const COMMENT_REPLY_PUBLISHER_ELEMENT_ID = 'A_comment_reply_publisher'\nexport const COMMENT_FOOTER_ELEMENT_ID = 'A_comment_footer'\nexport const COMMENT_ITEM_ELEMENT_ID_PREFIX = 'A_comment_content_item'\nexport const getCommentItemElementID = (commentID: string | number) => {\n  return `${COMMENT_ITEM_ELEMENT_ID_PREFIX}_${commentID}`\n}\n","/**\n * @file highlight.js\n * @module effect.highlight\n * @author Surmon <https://github.com/surmon-china>\n */\n\n// MARK: vite.config.js\nimport hljs from 'highlight.js/lib/core'\nimport go from 'highlight.js/lib/languages/go'\nimport css from 'highlight.js/lib/languages/css'\nimport sql from 'highlight.js/lib/languages/sql'\nimport php from 'highlight.js/lib/languages/php'\nimport xml from 'highlight.js/lib/languages/xml'\nimport yaml from 'highlight.js/lib/languages/yaml'\nimport json from 'highlight.js/lib/languages/json'\nimport bash from 'highlight.js/lib/languages/bash'\nimport less from 'highlight.js/lib/languages/less'\nimport scss from 'highlight.js/lib/languages/scss'\nimport rust from 'highlight.js/lib/languages/rust'\nimport java from 'highlight.js/lib/languages/java'\nimport shell from 'highlight.js/lib/languages/shell'\nimport nginx from 'highlight.js/lib/languages/nginx'\nimport stylus from 'highlight.js/lib/languages/stylus'\nimport python from 'highlight.js/lib/languages/python'\nimport javascript from 'highlight.js/lib/languages/javascript'\nimport typescript from 'highlight.js/lib/languages/typescript'\n\nconst languages = {\n  go,\n  css,\n  sql,\n  php,\n  xml,\n  yaml,\n  json,\n  bash,\n  less,\n  scss,\n  rust,\n  java,\n  shell,\n  nginx,\n  stylus,\n  python,\n  javascript,\n  typescript\n}\n\nObject.keys(languages).forEach((name) => hljs.registerLanguage(name, languages[name]))\n\nexport default hljs\n","/**\n * @file lazy load\n * @module composable.lozad\n * @author Surmon <https://github.com/surmon-china>\n */\n\n// https://developer.mozilla.org/zh-CN/docs/Web/Performance/Lazy_loading\n// https://github.com/mfranzke/loading-attribute-polyfill\n// https://github.com/ApoorvSaxena/lozad.js\nimport lozad from 'lozad'\nimport { ref, onMounted, onBeforeUnmount, App, Plugin, Directive } from 'vue'\n\ndeclare global {\n  interface Window {\n    $lozad: typeof lozad\n  }\n}\n\nexport const LOZAD_CLASS_NAME = 'lozad'\nexport const LOADED_CLASS_NAME = 'loaded'\n\nconst lozadObserve = (target: lozad.Selector) => {\n  const observer = lozad(target, {\n    loaded: (element) => element.classList.add(LOADED_CLASS_NAME)\n  })\n  observer.observe()\n  return observer\n}\n\nexport const useLozad = (params?: {\n  elementor?: () => HTMLElement\n  immediate?: boolean\n  className?: string\n}) => {\n  const container = ref<HTMLElement>()\n  const observer = ref<lozad.Observer | null>(null)\n\n  const observe = () => {\n    const tagretClass = params?.className || LOZAD_CLASS_NAME\n    const targetElement = params?.elementor?.() || container.value\n    if (targetElement?.querySelectorAll) {\n      const lozadElements = targetElement.querySelectorAll(`.${tagretClass}`)\n      if (lozadElements?.length) {\n        observer.value = lozadObserve(lozadElements)\n      }\n    }\n  }\n\n  const unobserve = () => {\n    if (observer.value) {\n      observer.value.observer.disconnect()\n      observer.value = null\n    }\n  }\n\n  onMounted(() => {\n    if (params?.immediate ?? true) {\n      observe()\n    }\n  })\n\n  onBeforeUnmount(() => {\n    unobserve()\n  })\n\n  return { element: container, observer, observe, unobserve }\n}\n\nexport const lozadDirective: Directive = {\n  mounted(element) {\n    element.__lozad_observer = lozadObserve(element)\n  },\n  beforeUnmount(element) {\n    element.__lozad_observer?.observer.disconnect()\n    element.__lozad_observer = null\n  }\n}\n\nexport interface LozadPluginConfig {\n  exportToGlobal?: boolean\n}\nconst install: Plugin = (app: App, config?: LozadPluginConfig) => {\n  app.directive('lozad', lozadDirective)\n  app.config.globalProperties.$lozad = lozad\n  if (config?.exportToGlobal) {\n    window.$lozad = lozad\n  }\n}\nexport default { install }\n","/**\n * @file Validater\n * @module transform.validate\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const isValidDateParam = (date: string) => {\n  const dates = date.split('-')\n  // x-x-x\n  if (dates.length !== 3) {\n    return false\n  }\n  // 0-0-0\n  if (!dates.every((d) => Number.isInteger(Number(d)))) {\n    return false\n  }\n  // 0000-00-00\n  const [year, month, day] = dates\n  if (year.length !== 4 || month.length !== 2 || day.length !== 2) {\n    return false\n  }\n  return true\n}\n","/**\n * @file Scroll to anywhere\n * @module util.scroller\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { nextTick } from 'vue'\nimport BezierEasing from 'bezier-easing'\n\nexport const Easing = {\n  ease: [0.25, 0.1, 0.25, 1.0],\n  linear: [0, 0.0, 1, 1.0],\n  easeIn: [0.42, 0.0, 1, 1.0],\n  easeOut: [0, 0.0, 0.58, 1.0],\n  easeInOut: [0.42, 0.0, 0.58, 1.0]\n}\n\nconst triggerEvents: string[] = [\n  'scroll',\n  'mousedown',\n  'wheel',\n  'DOMMouseScroll',\n  'mousewheel',\n  'keyup',\n  'touchmove'\n]\n\nconst listener = {\n  on(element: Element, events: string[], handler: () => void) {\n    events.forEach((event) => {\n      element.addEventListener(event, handler, { passive: true })\n    })\n  },\n  off(element: Element, events: string[], handler: () => void) {\n    events.forEach((event) => {\n      element.removeEventListener(event, handler)\n    })\n  }\n}\n\nexport interface ScrollToElementOptions {\n  target: string | Element\n  offset?: number\n  duration?: number\n  easing?: number[]\n  onCancel?(): void\n  onDone?(): void\n}\n\nexport const scrollToElement = (options: ScrollToElementOptions) => {\n  const { target, onCancel, onDone } = options\n  const offset = options.offset ?? 0\n  const duration = options.duration ?? 500\n  const optionEasing = options.easing ?? Easing.ease\n  const targetElement = typeof target === 'string' ? document.querySelector(target)! : target\n  const bodyElement = document.body\n\n  let abort = false\n  const whenAbort = () => {\n    abort = true\n  }\n\n  listener.on(bodyElement, triggerEvents, whenAbort)\n\n  const whenDone = () => {\n    listener.off(bodyElement, triggerEvents, whenAbort)\n    abort ? onCancel?.() : onDone?.()\n  }\n\n  const initialY = window.pageYOffset\n  const elementY = initialY + targetElement.getBoundingClientRect().top\n  const targetY =\n    document.body.scrollHeight - elementY < window.innerHeight\n      ? document.body.scrollHeight - window.innerHeight\n      : elementY\n\n  const diff = targetY + offset - initialY\n  if (!diff) {\n    return\n  }\n\n  const easing = Reflect.apply(BezierEasing, BezierEasing, optionEasing)\n  let start: number\n\n  window.requestAnimationFrame(function step(timestamp) {\n    if (abort) {\n      return whenDone()\n    }\n    if (!start) {\n      start = timestamp\n    }\n\n    const time = timestamp - start\n    let progress = Math.min(time / duration, 1)\n    progress = easing(progress)\n\n    window.scrollTo(0, initialY + diff * progress)\n\n    if (time < duration) {\n      window.requestAnimationFrame(step)\n    } else {\n      whenDone()\n    }\n  })\n}\n\nexport const scrollToAnchor = (elementID: string, offset?: number) => {\n  const targetElement = document.getElementById(elementID)\n  if (targetElement) {\n    scrollToElement({\n      target: targetElement,\n      duration: 200,\n      // default offset: header height\n      offset: offset ?? -74\n    })\n  }\n}\n\nexport const scrollToPageTop = () => {\n  scrollToElement({\n    target: document.body,\n    duration: 280,\n    offset: 0,\n    // MARK: keep ease\n    easing: Easing.ease\n  })\n}\n\nexport const scrollToNextScreen = () => {\n  nextTick(() => {\n    scrollToElement({\n      target: document.body,\n      offset: window.scrollY + window.innerHeight * 0.68,\n      duration: 300,\n      easing: Easing.easeIn\n    })\n  })\n}\n","/**\n * @file i18n\n * @module composable.i18n\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { App, inject, computed, ref, readonly, defineComponent } from 'vue'\n\nexport type I18nValueRender = (...args: any[]) => string\nexport type I18nLanguageMap<Lang extends string, V = string> = {\n  [code in Lang]: V\n}\n\nexport interface I18nLanguage<K extends string> {\n  code: string\n  iso: string\n  name: string\n  data: {\n    [key in K]: string | I18nValueRender\n  }\n}\n\ninterface I18nConfig<K extends string> {\n  default: string\n  keys: Array<K>\n  languages: I18nLanguage<K>[]\n}\n\nconst I18nSymbol = Symbol('i18n')\nconst createI18nStore = <K extends string>(config: I18nConfig<K>) => {\n  const language = ref(config.default)\n  const languageCodes = config.languages.map((lang) => lang.code)\n  const l = computed(() => config.languages.find((l) => l.code === language.value))\n  const languageMap = config.keys.reduce<{\n    [key in K]: I18nLanguageMap<string, string | I18nValueRender>\n  }>(\n    (map, key) => ({\n      ...map,\n      [key]: config.languages.reduce(\n        (result, language) => ({\n          ...result,\n          [language.code]: language.data[key]\n        }),\n        {}\n      )\n    }),\n    {} as any\n  )\n\n  const set = <L extends string = string>(lang: L) => {\n    if (languageCodes.includes(lang) && language.value !== lang) {\n      language.value = lang\n    }\n  }\n\n  const toggle = () => {\n    const currentIndex = languageCodes.findIndex((langCode) => langCode === language.value)\n    const nextIndex = currentIndex < languageCodes.length - 1 ? currentIndex + 1 : 0\n    if (currentIndex !== nextIndex) {\n      set(languageCodes[nextIndex])\n    }\n  }\n\n  const translate = <T extends K>(key: T, targetLanguage?: string | null, ...args) => {\n    const content = languageMap[key]?.[targetLanguage ?? language.value]\n    if (!content) {\n      return\n    }\n    return typeof content === 'string' ? content : content(...args)\n  }\n\n  return {\n    language: readonly(language),\n    l,\n    set,\n    toggle,\n    translate,\n    t: translate\n  }\n}\n\n/**\n * @example <span>{{ i18n.t(LanguageKey.SOME_KEY) }}</span>\n * @example <i18n :k=\"LanguageKey.SOME_KEY\" />\n * @example <i18n zh=\"你好，世界\" en=\"hello, world!\" />\n * @example (\n *  <i18n>\n *    <template #zh>你好，世界</template>\n *    <template #en>hello, world!</template>\n *  </i18n>\n * )\n */\nexport type I18n = ReturnType<typeof createI18nStore>\nexport const createI18n = <K extends string>(config: I18nConfig<K>) => {\n  const i18nStore = createI18nStore(config)\n  const i18nComponent = defineComponent({\n    name: 'I18n',\n    props: {\n      k: [String, Number, Symbol]\n    },\n    render() {\n      if (this.$props.k) {\n        return i18nStore.t(this.$props.k as K, null, this.$attrs)\n      } else {\n        const lang = i18nStore.language.value\n        return this.$attrs[lang] || this.$slots[lang]?.()\n      }\n    }\n  })\n\n  return {\n    ...i18nStore,\n    install(app: App) {\n      app.config.globalProperties.$i18n = i18nStore\n      app.provide(I18nSymbol, i18nStore)\n      app.component(i18nComponent.name, i18nComponent)\n    }\n  }\n}\n\nexport const useI18n = (): I18n => {\n  return inject(I18nSymbol) as I18n\n}\n","/**\n * @file Proxy constant\n * @module constant.proxy\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport enum ProxyModule {\n  Default = 'default',\n  Douban = 'douban',\n  NetEaseMusic = 'netease-music',\n  Instagram = 'instagram',\n  YouTube = 'youtube',\n  Disqus = 'disqus'\n}\n","/**\n * @file Url transformer\n * @module transform.url\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport API_CONFIG from '/@/config/api.config'\nimport { ProxyModule } from '/@/constants/proxy'\nimport { getArticleDetailRoute } from '/@/transforms/route'\n\nexport const getTargetCDNURL = (path: string) => {\n  return `${API_CONFIG.CDN}${path}`\n}\n\nexport const getTargetProxyURL = (path: string, module: ProxyModule = ProxyModule.Default) => {\n  return `${API_CONFIG.PROXY}/${module}/${encodeURIComponent(path)}`\n}\n\nexport const getTargetStaticURL = (path: string) => {\n  return `${API_CONFIG.STATIC}${path}`\n}\n\nexport const getPageURL = (path: string) => {\n  return `${API_CONFIG.FE}${path}`\n}\n\nexport const getArticleDetailURL = (idOrSlug: string | number) => {\n  return getPageURL(getArticleDetailRoute(idOrSlug))\n}\n","/**\n * @file meta\n * @module composable.meta\n * @author Surmon <https://github.com/surmon-china>\n * @link https://github.com/vueuse/head\n */\n\nimport { computed, inject, ComputedGetter } from 'vue'\nimport { createHead, useHead, HeadObject, HeadAttrs, renderHeadToString } from '@vueuse/head'\nimport { useEnhancer } from '/@/app/enhancer'\nimport { getPageURL, getTargetCDNURL } from '/@/transforms/url'\nimport { META, IDENTITIES } from '/@/config/app.config'\n\nexport interface MetaResult {\n  readonly headTags: string\n  readonly htmlAttrs: string\n  readonly bodyAttrs: string\n}\n\nconst MetaTitlerSymbol = Symbol('meta-titler')\ntype MeatTitler = (title: string) => string\n\nexport interface MetaConfig {\n  titler?: MeatTitler\n}\n\nexport const createMeta = (metaConfig?: MetaConfig) => {\n  const head = createHead()\n  return {\n    ...head,\n    renderToString(): MetaResult {\n      return renderHeadToString(head)\n    },\n    install(app, ...rest: any[]) {\n      app.provide(MetaTitlerSymbol, metaConfig?.titler || ((title) => title))\n      app.use(head, ...rest)\n      return head\n    }\n  }\n}\n\nexport interface MetaObject extends HeadObject {\n  title?: string\n  pageTitle?: string\n  description?: string\n  keywords?: string\n  // https://ogp.me/\n  // https://developer.twitter.com/en/docs/twitter-for-websites/cards/guides/getting-started\n  // https://developers.facebook.com/docs/sharing/webmasters/\n  // https://ahrefs.com/blog/open-graph-meta-tags/\n  twitterCard?: 'summary' | 'summary_large_image' | 'app' | 'player'\n  ogType?: 'website' | 'article' | 'blog' | 'product' | 'bbs' | 'image' | 'profile'\n  ogTitle?: string\n  ogDescription?: string\n  ogImage?: string\n  ogUrl?: string\n}\n\nexport function useMeta(source: MetaObject | ComputedGetter<MetaObject>) {\n  const { i18n, route } = useEnhancer()\n  const titler = inject<MeatTitler>(MetaTitlerSymbol)\n  const meta = computed<HeadObject>(() => {\n    const {\n      title,\n      pageTitle,\n      keywords,\n      description,\n      twitterCard,\n      ogType,\n      ogTitle,\n      ogDescription,\n      ogImage,\n      ogUrl,\n      ...restSource\n    } = typeof source === 'function' ? source() : source\n\n    // title | page title\n    const _pureTitle = title ?? pageTitle\n    const _title = title ? title : pageTitle ? titler?.(pageTitle) : ''\n    const _language = i18n.l.value?.iso ?? ''\n\n    // metas\n    const _meta = (restSource.meta as HeadAttrs[]) || [\n      // keywords\n      {\n        key: 'keywords',\n        name: 'keywords',\n        content: keywords ?? ''\n      },\n      // description\n      {\n        key: 'description',\n        name: 'description',\n        content: description ?? ''\n      },\n      // twitter\n      {\n        key: 'twitter-card',\n        name: 'twitter:card',\n        content: twitterCard ?? 'summary'\n      },\n      {\n        key: 'twitter-new-widgets',\n        name: 'twitter:widgets:new-embed-design',\n        content: 'on'\n      },\n      {\n        key: 'twitter-site',\n        name: 'twitter:site',\n        content: `@${IDENTITIES.TWITTER_USER_NAME}`\n      },\n      {\n        key: 'twitter-creator',\n        name: 'twitter:creator',\n        content: `@${IDENTITIES.TWITTER_USER_NAME}`\n      },\n      // og\n      {\n        key: 'og-type',\n        property: 'og:type',\n        content: ogType ?? 'website'\n      },\n      {\n        key: 'og-site-name',\n        property: 'og:site_name',\n        content: META.title\n      },\n      {\n        key: 'og-title',\n        property: 'og:title',\n        content: ogTitle ?? _pureTitle ?? ''\n      },\n      {\n        key: 'og-description',\n        property: 'og:description',\n        content: ogDescription ?? description ?? ''\n      },\n      {\n        key: 'og-url',\n        property: 'og:url',\n        content: ogUrl ?? getPageURL(route.fullPath)\n      },\n      {\n        key: 'og-image',\n        property: 'og:image',\n        content: ogImage ?? getTargetCDNURL('/images/og-social-card.jpg')\n      },\n      {\n        key: 'og-locale',\n        property: 'og:locale',\n        content: _language\n      }\n    ]\n\n    return {\n      ...restSource,\n      title: _title,\n      meta: _meta,\n      htmlAttrs: {\n        lang: _language,\n        ...restSource.htmlAttrs\n      }\n    }\n  })\n\n  return useHead(meta)\n}\n","/**\n * @file Outside\n * @module transform.outside\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const getGAScriptURL = (measurementID: string) => {\n  return `https://www.googletagmanager.com/gtag/js?id=${measurementID}`\n}\n","/**\n * @file Script loader\n * @module util.scripter\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport interface ScriptLoaderOption extends Partial<HTMLScriptElement> {\n  domain?: string\n}\n\nexport const loadScript = (\n  source: string,\n  options: ScriptLoaderOption = {} as ScriptLoaderOption\n) => {\n  return new Promise((resolve, reject) => {\n    const head = document.head || document.getElementsByTagName('head')[0]\n    const script = document.createElement('script')\n    const {\n      src,\n      domain,\n      type = 'text/javascript',\n      // charset = 'utf-8',\n      defer = false,\n      async = false,\n      ...restAttrs\n    } = options\n    script.type = type\n    script.defer = defer\n    script.async = async\n    script.src = src || source\n\n    Object.keys(restAttrs).forEach((key) => {\n      script[key] = restAttrs[key]\n    })\n\n    if (domain) {\n      const link = document.createElement('link')\n      link.href = domain\n      link.rel = 'preconnect'\n      head.appendChild(link)\n    }\n\n    head.appendChild(script)\n    script.onload = resolve\n    script.onerror = reject\n  })\n}\n","/**\n * @file GA 统计服务\n * @module composable.gtag\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { App, reactive, readonly, inject, Plugin, nextTick } from 'vue'\nimport { Router } from 'vue-router'\nimport { getGAScriptURL } from '/@/transforms/gtag'\nimport { loadScript } from '/@/utils/scripter'\n// MARK: https://zh.nuxtjs.org/faq/ga\n// MARK: https://github.com/nuxt-community/google-gtag/blob/master/lib/plugin.js\n// DOC: https://developers.google.com/analytics/devguides/collection/gtagjs/pages?hl=zh-cn\n\ndeclare global {\n  interface Window {\n    gtag(...args: any[]): any\n    dataLayer: any[]\n  }\n}\n\nexport interface GtagConfig {\n  [key: string]: any\n}\n\nexport interface GtagPluginConfig {\n  id: string\n  router?: Router\n  customResourceURL?: string\n  config?: GtagConfig\n}\n\nconst GtagSymbol = Symbol('gtag')\nexport type Gtag = ReturnType<typeof createGtag>\nexport const createGtag = (options: GtagPluginConfig) => {\n  if (!options.id) {\n    return\n  }\n\n  const resourceURL = options.customResourceURL || getGAScriptURL(options.id)\n  const state = reactive({\n    loaded: false,\n    disabled: false\n  })\n\n  loadScript(resourceURL, { async: true }).then(() => {\n    state.loaded = true\n  })\n\n  if (window.gtag == null) {\n    window.dataLayer = window.dataLayer || []\n    // MARK: important! only function\n    window.gtag = function () {\n      // eslint-disable-next-line prefer-rest-params\n      window.dataLayer.push(arguments)\n    }\n    window.gtag('js', new Date())\n    window.gtag('config', options.id, options.config)\n  }\n\n  const push = (...args) => {\n    if (!state.disabled) {\n      window.gtag?.(...args)\n    }\n  }\n\n  if (options.router) {\n    options.router.afterEach((to, from) => {\n      if (to.path !== from.path) {\n        nextTick().then(() => {\n          const location = window.location.origin + to.fullPath\n          push('event', 'page_view', {\n            page_title: document.title,\n            page_location: location,\n            page_path: to.fullPath,\n            send_to: options.id\n          })\n        })\n      }\n    })\n  }\n\n  const gtag = {\n    state: readonly(state),\n    enable: () => {\n      state.disabled = false\n    },\n    disable: () => {\n      state.disabled = true\n    },\n    set(config: GtagConfig) {\n      push('set', config)\n    },\n    config(config: GtagConfig) {\n      push('config', options.id, config)\n    },\n    // https://developers.google.com/analytics/devguides/collection/gtagjs/events?hl=zh-cn\n    event(\n      eventName: string,\n      config?: GtagConfig & {\n        event_category?: string\n        event_label?: string\n        value?: number\n      }\n    ) {\n      push('event', eventName, config)\n    }\n  }\n\n  return gtag\n}\n\nexport const useGtag = (): Gtag => {\n  return inject(GtagSymbol) as Gtag\n}\n\ntype PluginInstallFunction = Plugin & {\n  installed?: boolean\n}\n\nconst install: PluginInstallFunction = (app: App, config: GtagPluginConfig) => {\n  if (install.installed) {\n    return\n  }\n  const gtag = createGtag(config)\n  app.provide(GtagSymbol, gtag)\n  app.config.globalProperties.$gtag = gtag\n  install.installed = true\n}\nexport default { install }\n","/**\n * @file Theme\n * @module composable.theme\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { App, inject, ref, readonly } from 'vue'\nimport cookies from 'js-cookie'\nimport storage from '/@/utils/storage'\n\nexport enum Theme {\n  Light = 'light',\n  Dark = 'dark'\n}\n\nconst DARK_THEME_QUERY = '(prefers-color-scheme: dark)'\nconst LIGHT_THEME_QUERY = '(prefers-color-scheme: light)'\nconst NO_PREFERENCE_QUERY = '(prefers-color-scheme: no-preference)'\n\nexport const THEME_STORAGE_KEY = 'theme'\nexport const getClientLocalTheme = () => {\n  // local theme\n  const historyTheme = storage.get(THEME_STORAGE_KEY)\n  if (historyTheme) {\n    return historyTheme === Theme.Dark ? Theme.Dark : Theme.Light\n  }\n  // system theme\n  if (window.matchMedia(DARK_THEME_QUERY).matches) {\n    return Theme.Dark\n  }\n  if (window.matchMedia(LIGHT_THEME_QUERY).matches) {\n    return Theme.Light\n  }\n  // not specified || not support\n  return Theme.Light\n}\n\nconst ThemeSymbol = Symbol('theme')\nconst themes = [Theme.Light, Theme.Dark]\nexport const createTheme = (initTheme: Theme) => {\n  const theme = ref<Theme>(initTheme === Theme.Dark ? Theme.Dark : Theme.Light)\n  const set = (newTheme: Theme) => {\n    if (themes.includes(newTheme) && newTheme !== theme.value) {\n      theme.value = newTheme\n      cookies.set(THEME_STORAGE_KEY, newTheme)\n      storage.set(THEME_STORAGE_KEY, newTheme)\n    }\n  }\n  const toggle = () => set(theme.value === Theme.Dark ? Theme.Light : Theme.Dark)\n  const bindClientSystem = () => {\n    window\n      .matchMedia(DARK_THEME_QUERY)\n      .addEventListener('change', ({ matches }) => matches && set(Theme.Dark))\n    window\n      .matchMedia(LIGHT_THEME_QUERY)\n      .addEventListener('change', ({ matches }) => matches && set(Theme.Light))\n  }\n\n  const themeState = {\n    theme: readonly(theme),\n    set,\n    toggle,\n    bindClientSystem\n  }\n\n  return {\n    ...themeState,\n    install(app: App) {\n      app.provide(ThemeSymbol, themeState)\n    }\n  }\n}\n\nexport const useTheme = () => {\n  return inject(ThemeSymbol) as Omit<ReturnType<typeof createTheme>, 'install'>\n}\n","/**\n * @file Client defer task manager\n * @module composable.defer\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { App, inject, reactive, Plugin } from 'vue'\n\ndeclare global {\n  interface Window {\n    // @ts-ignore\n    $defer: Defer\n  }\n}\n\n// @ts-ignore\nexport type Defer = ReturnType<typeof createDeferStore>\nexport type DeferTask = () => any\nconst createDeferStore = () => {\n  const state = reactive({\n    loaded: false,\n    tasks: [] as Array<DeferTask>\n  })\n\n  const doTask = (task: DeferTask) => {\n    window.setTimeout(task, 666)\n  }\n\n  const handleLoaded = () => {\n    state.loaded = true\n    state.tasks.forEach((task) => doTask(task))\n  }\n\n  const addTask = (task: DeferTask) => {\n    state.tasks.push(task)\n    if (state.loaded) {\n      doTask(task)\n    }\n  }\n\n  window.addEventListener('load', handleLoaded)\n  return { state, addTask }\n}\n\nconst DeferSymbol = Symbol('defer')\n\nexport interface DeferPluginConfig {\n  exportToGlobal?: boolean\n}\nexport const createDefer = (): Defer & Plugin => {\n  const defer = createDeferStore()\n  return {\n    ...defer,\n    install(app: App, config?: DeferPluginConfig) {\n      app.provide(DeferSymbol, defer)\n\n      if (config?.exportToGlobal) {\n        window.$defer = defer\n      }\n    }\n  }\n}\n\nexport const useDefer = (): Defer => {\n  return inject(DeferSymbol) as Defer\n}\n","<template>\n  <div id=\"progress-bar\" :class=\"{ show: loading.state.show }\">\n    <div\n      class=\"progress\"\n      :class=\"{\n        notransition: loading.state.skipTimerCount > 0,\n        failed: !loading.state.canSucceed\n      }\"\n      :style=\"{ width: loading.state.percent + '%' }\"\n    />\n    <div v-if=\"spin\" class=\"spin\" :class=\"{ failed: !loading.state.canSucceed }\">\n      <div class=\"lds-ring\">\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { useLoading } from './'\n  export default defineComponent({\n    name: 'ProgressBar',\n    props: {\n      spin: {\n        type: Boolean,\n        default: false\n      }\n    },\n    setup() {\n      const loading = useLoading()\n      return { loading }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  #progress-bar {\n    $size: 3px;\n    $failed: $red;\n    position: fixed;\n    top: 0;\n    left: 0;\n    height: $size;\n    width: 100%;\n    z-index: $z-index-progress-bar;\n    @include visibility-transition($transition-time-normal);\n    @include hidden();\n    &.show {\n      @include visible();\n    }\n\n    .progress {\n      position: absolute;\n      top: 0;\n      left: 0;\n      height: $size;\n      width: 0%;\n      background-color: $primary;\n      transition: width 160ms;\n      &.notransition {\n        transition: none;\n      }\n      &.failed {\n        background-color: $failed;\n      }\n    }\n\n    .spin {\n      position: absolute;\n      top: $lg-gap;\n      right: $lg-gap;\n      &.failed {\n        .lds-ring {\n          div {\n            border-top-color: $failed;\n          }\n        }\n      }\n\n      .lds-ring {\n        $size: 3rem;\n        display: inline-block;\n        position: relative;\n        width: $size;\n        height: $size;\n\n        @keyframes lds-ring {\n          0% {\n            transform: rotate(0deg);\n          }\n          100% {\n            transform: rotate(360deg);\n          }\n        }\n\n        div {\n          $size: 2rem;\n          $border: 3px;\n          box-sizing: border-box;\n          display: block;\n          position: absolute;\n          width: $size;\n          height: $size;\n          margin: $border;\n          border: $border solid transparent;\n          border-top-color: $primary;\n          border-radius: 50%;\n          animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n          &:nth-child(1) {\n            animation-delay: -0.45s;\n          }\n          &:nth-child(2) {\n            animation-delay: -0.3s;\n          }\n          &:nth-child(3) {\n            animation-delay: -0.15s;\n          }\n        }\n      }\n    }\n  }\n</style>\n","/**\n * @file Global loading state\n * @module composable.loading\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { App, reactive, readonly, inject, nextTick, DeepReadonly } from 'vue'\nimport ProgressComponent from './progress.vue'\n\ndeclare global {\n  interface Window {\n    $loading: Loading\n  }\n}\n\nexport interface LoadingState {\n  percent: number\n  show: boolean\n  error: null\n  canSucceed: boolean\n  skipTimerCount: number\n  throttle: number\n  duration: number\n}\n\nexport interface Loading {\n  state: DeepReadonly<LoadingState>\n  start(): void\n  pause(): void\n  resume(): void\n  finish(): void\n  fail(error: any): void\n  increase(percent: number): void\n  decrease(percent: number): void\n  set(percent: number): void\n}\n\nexport interface LoadingOptions {\n  throttle?: number\n  duration?: number\n}\nconst LoadingSymbol = Symbol('loading')\nconst createLoadingStore = (options: LoadingOptions = {}) => {\n  let _cut: number\n  let _timer: number\n  let _throttle: number\n  const state = reactive({\n    percent: 0,\n    show: false,\n    error: null,\n    canSucceed: true,\n    skipTimerCount: 0,\n    throttle: options.throttle || 200,\n    duration: options.duration || 3000\n  })\n\n  const clear = () => {\n    window.clearInterval(_timer)\n    window.clearTimeout(_throttle)\n    _timer = 0\n  }\n\n  const increase = (percent: number) => {\n    state.percent = Math.min(100, Math.floor(state.percent + percent))\n  }\n\n  const decrease = (percent: number) => {\n    state.percent = Math.max(0, Math.floor(state.percent - percent))\n  }\n\n  const startTimer = () => {\n    if (!state.show) {\n      state.show = true\n    }\n    if (typeof _cut === 'undefined') {\n      _cut = 10000 / Math.floor(state.duration)\n    }\n\n    _timer = window.setInterval(() => {\n      /**\n       * When reversing direction skip one timers\n       * so 0, 100 are displayed for two iterations\n       * also disable css width transitioning\n       * which otherwise interferes and shows\n       * a jojo effect\n       */\n      if (state.skipTimerCount > 0) {\n        state.skipTimerCount--\n        return\n      }\n\n      decrease(_cut)\n    }, 100)\n  }\n\n  const start = () => {\n    clear()\n    state.percent = 0\n    state.skipTimerCount = 0\n    state.canSucceed = true\n    state.show = true\n\n    if (state.throttle) {\n      _throttle = window.setTimeout(() => startTimer(), state.throttle)\n    } else {\n      startTimer()\n    }\n  }\n\n  const hide = () => {\n    clear()\n    window.setTimeout(() => {\n      state.show = false\n      nextTick().then(() => {\n        setTimeout(() => {\n          state.percent = 0\n          // MARK: coupling with CSS transition duration\n        }, 190)\n      })\n    }, 360)\n  }\n\n  const set = (percent: number) => {\n    state.show = true\n    state.canSucceed = true\n    state.percent = Math.min(100, Math.max(0, Math.floor(percent)))\n  }\n\n  const pause = () => {\n    window.clearInterval(_timer)\n  }\n\n  const resume = () => {\n    startTimer()\n  }\n\n  const finish = () => {\n    state.error = null\n    state.percent = 100\n    hide()\n  }\n\n  const fail = (error?: any) => {\n    state.error = error\n    state.canSucceed = false\n  }\n\n  return {\n    state: readonly(state),\n    start,\n    pause,\n    resume,\n    finish,\n    fail,\n    increase,\n    decrease,\n    set\n  }\n}\n\nexport const createLoading = (options?: LoadingOptions) => {\n  const loading = createLoadingStore(options)\n  return {\n    ...loading,\n    install(app: App, config?: { exportToGlobal?: boolean }) {\n      app.provide(LoadingSymbol, loading)\n      app.component(ProgressComponent.name as string, ProgressComponent)\n      app.config.globalProperties.$loading = loading\n      if (config?.exportToGlobal) {\n        window.$loading = loading\n      }\n    }\n  }\n}\n\nexport const useLoading = (): Loading => {\n  return inject(LoadingSymbol) as Loading\n}\n","export const PopupSymbol = Symbol('popup')\n","/**\n * @file popup hook\n * @module composable.popup.hook\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { inject, onMounted } from 'vue'\nimport { PopupSymbol } from './constant'\nimport type { Popup } from '.'\n\nexport const usePopup = (): Popup => {\n  return inject(PopupSymbol) as Popup\n}\n\nexport const usePopupWithRoot = (fn: () => HTMLElement): Popup => {\n  const popup = usePopup()\n  onMounted(() => popup.$setRoot(fn()))\n  return popup\n}\n","/**\n * @file App basic state\n * @module store.basic\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineFetchStore } from './_fetch'\nimport { defineStore } from 'pinia'\nimport { UniversalKeyValue, CommentPostID } from '/@/constants/state'\nimport { useIdentityStore, UserType } from './identity'\nimport nodepress from '/@/services/nodepress'\n\nexport interface AD_CONFIG {\n  PC_CARROUSEL:\n    | false\n    | {\n        disabled?: boolean\n        index: number\n        url: string\n        src: string\n        title: string\n      }\n  PC_NAV: Array<{\n    disabled?: boolean\n    icon: string\n    color: string\n    url: string\n    text?: string\n    i18n: {\n      en: string\n      zh: string\n    }\n  }>\n  PC_ASIDE_SWIPER: Array<{\n    disabled?: boolean\n    url: string\n    src: string\n  }>\n}\n\nconst defaultAdConfig: AD_CONFIG = {\n  PC_CARROUSEL: false,\n  PC_NAV: [],\n  PC_ASIDE_SWIPER: []\n}\n\nexport interface AdminInfo {\n  name: string\n  slogan: string\n  avatar: string\n}\n\nexport interface AppOption {\n  title: string\n  sub_title: string\n  description: string\n  keywords: Array<string>\n  statement: string\n  site_url: string\n  site_email: string\n  meta: {\n    likes: number\n  }\n  friend_links: Array<UniversalKeyValue>\n  ad_config: string\n}\n\nexport const useAdminInfoStore = defineFetchStore({\n  id: 'adminInfo',\n  initData: null as null | AdminInfo,\n  fetcher: () => nodepress.get<AdminInfo>('/auth/admin').then((response) => response.result)\n})\n\nexport const useAppOptionStore = defineStore({\n  id: 'appOption',\n  state: () => ({\n    fetched: false,\n    fetching: false,\n    data: null as null | AppOption\n  }),\n  getters: {\n    adConfig: (state) => {\n      const optionAdConfig = state.data?.ad_config\n      const adConfig: AD_CONFIG = {\n        ...defaultAdConfig,\n        ...(optionAdConfig ? JSON.parse(optionAdConfig) : {})\n      }\n      // filter disabled ad itmes\n      adConfig.PC_NAV = adConfig.PC_NAV.filter((ad) => !ad.disabled)\n      adConfig.PC_ASIDE_SWIPER = adConfig.PC_ASIDE_SWIPER.filter((ad) => !ad.disabled)\n      return adConfig\n    }\n  },\n  actions: {\n    fetch(force = false) {\n      if (!force && this.fetched) {\n        return Promise.resolve()\n      }\n\n      this.fetching = true\n      return nodepress\n        .get<AppOption>('/option')\n        .then((response) => {\n          this.data = response.result\n          this.fetched = true\n        })\n        .finally(() => {\n          this.fetching = false\n        })\n    },\n\n    postSiteLike() {\n      const identityStore = useIdentityStore()\n      return nodepress\n        .post('/vote/post', {\n          post_id: CommentPostID.Guestbook,\n          vote: 1,\n          author: identityStore.author\n        })\n        .then((response) => {\n          if (this.data) {\n            this.data.meta.likes = response.result\n          }\n        })\n    },\n\n    postFeedback(feedback: { emotion: number; content: string }) {\n      const identityStore = useIdentityStore()\n      const authorName = identityStore.author?.name || null\n      return nodepress.post('/feedback', {\n        ...feedback,\n        tid: 0,\n        user_name: authorName ? `${authorName} (${UserType[identityStore.user.type]})` : null,\n        user_email: identityStore.author?.email || null\n      })\n    }\n  }\n})\n","/**\n * @file App enhancers\n * @module app.enhancer\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { computed } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { useGlobalState } from '/@/app/state'\nimport { useI18n } from '/@/composables/i18n'\nimport { useMeta } from '/@/composables/meta'\nimport { useGtag, Gtag } from '/@/composables/gtag'\nimport { useTheme, Theme } from '/@/composables/theme'\nimport { useDefer, Defer } from '/@/composables/defer'\nimport { useLoading, Loading } from '/@/composables/loading'\nimport type { Popup } from '/@/composables/popup'\nimport { usePopup } from '/@/composables/popup/hook'\nimport { useAppOptionStore } from '/@/stores/basic'\nimport { Language } from '/@/language'\nimport { UNDEFINED } from '/@/constants/value'\nimport { isClient } from './environment'\n\nexport const useEnhancer = () => {\n  const route = useRoute()\n  const router = useRouter()\n  const i18n = useI18n()\n  const theme = useTheme()\n  const globalState = useGlobalState()\n  const appOptionState = useAppOptionStore()\n\n  const adConfig = computed(() => appOptionState.adConfig)\n  const isMobile = computed(() => globalState.userAgent.isMobile)\n  const isDarkTheme = computed(() => theme.theme.value === Theme.Dark)\n  const isZhLang = computed(() => i18n.language.value === Language.Chinese)\n\n  return {\n    route,\n    router,\n    globalState,\n    i18n,\n    meta: useMeta,\n    theme,\n\n    adConfig,\n    isMobile,\n    isDarkTheme,\n    isZhLang,\n\n    defer: (isClient ? useDefer() : UNDEFINED) as Defer,\n    popup: (isClient ? usePopup() : UNDEFINED) as Popup,\n    gtag: (isClient ? useGtag() : UNDEFINED) as Gtag,\n    loading: (isClient ? useLoading() : UNDEFINED) as Loading\n  }\n}\n","<template>\n  <div class=\"loadmore\" ref=\"element\">\n    <div class=\"loading\" v-if=\"loading\">\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n    </div>\n    <button class=\"normal\" v-else-if=\"!finished\" @click=\"emitLoadEvent\">\n      <i class=\"iconfont icon-loadmore\"></i>\n    </button>\n    <span class=\"finised\" v-else>\n      <i18n :k=\"LanguageKey.ARTICLE_LIST_NO_MORE\" />\n    </span>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, onMounted, onBeforeUnmount } from 'vue'\n  import { LanguageKey } from '/@/language'\n\n  enum Event {\n    Loadmore = 'loadmore'\n  }\n\n  export default defineComponent({\n    name: 'MobileFlowLoadmore',\n    props: {\n      loading: {\n        type: Boolean,\n        default: false\n      },\n      finished: {\n        type: Boolean,\n        default: false\n      }\n    },\n    emits: [Event.Loadmore],\n    setup(props, context) {\n      const element = ref<HTMLDivElement | null>(null)\n      const observer = ref<IntersectionObserver | null>(null)\n      const emitLoadEvent = () => {\n        if (!props.loading && !props.finished) {\n          context.emit(Event.Loadmore)\n        }\n      }\n\n      onMounted(() => {\n        if (element.value) {\n          observer.value = new IntersectionObserver(\n            (entries) => {\n              if (entries[0].isIntersecting) {\n                emitLoadEvent()\n              }\n            },\n            { threshold: 0.1 }\n          )\n          observer.value.observe(element.value)\n        }\n      })\n\n      onBeforeUnmount(() => {\n        if (element.value && observer.value) {\n          observer.value.unobserve(element.value)\n          observer.value.disconnect()\n        }\n      })\n\n      return {\n        LanguageKey,\n        element,\n        emitLoadEvent\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @use 'sass:math';\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .loadmore {\n    display: flex;\n    justify-content: center;\n    flex-direction: column;\n    align-items: center;\n    overflow: hidden;\n    color: $text-disabled;\n\n    .normal {\n      width: 100%;\n      font-size: $font-size-h2;\n    }\n\n    .finised {\n      margin: $xs-gap 0;\n      color: $text-divider;\n      font-weight: bold;\n    }\n\n    .loading {\n      margin: $sm-gap 0;\n      display: flex;\n      align-items: center;\n\n      @keyframes loading {\n        0% {\n          opacity: 1;\n        }\n        50% {\n          opacity: 0.5;\n        }\n        100% {\n          opacity: 1;\n        }\n      }\n\n      > div {\n        width: 0.6rem;\n        margin: 0 $sm-gap;\n        border-radius: $mini-radius;\n        animation: loading 1s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n        &:nth-child(1) {\n          height: 1.6rem;\n          background: $module-bg-darker-3;\n          animation-delay: -0.6s;\n        }\n        &:nth-child(2) {\n          height: 1rem;\n          background: $module-bg-darker-3;\n          animation-delay: -0.4s;\n        }\n        &:nth-child(3) {\n          height: 1rem;\n          background: $module-bg-darker-4;\n          animation-delay: -0.2s;\n        }\n        &:nth-child(4) {\n          height: 1.6rem;\n          background: $module-bg-darker-3;\n          animation-delay: -1s;\n        }\n      }\n    }\n  }\n</style>\n","/**\n * @file Thumbnail transformer\n * @module transform.thumbnail\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { getTargetCDNURL } from '/@/transforms/url'\n\n// https://help.aliyun.com/document_detail/209551.html\n// https://help.aliyun.com/document_detail/193593.html\n// MARK: Auto WebP with AlibabaCloud CDN\nconst WebPArgs = `format,webp/`\n\nexport const getArticleBannerThumbnailURL = (thumb: string, isWebPImage: boolean) => {\n  if (!thumb) {\n    return getTargetCDNURL(`/images/thumbnail/carrousel.jpg`)\n  }\n\n  const w = 1190\n  const h = 420\n  const format = isWebPImage ? WebPArgs : ''\n  const watermark = `watermark,text_U3VybW9uLm1l,type_bm90b3NhbnM,color_ffffff,size_31,g_sw,t_26,x_30,y_18`\n  return `${thumb}?image_process=${format}quality,q_88/resize,w_${w},h_${h}/crop,mid,w_${w},h_${h}/${watermark}`\n}\n\nexport const getMobileArticleListThumbnailURL = (thumb: string, isWebPImage = false) => {\n  if (!thumb) {\n    return ''\n  }\n\n  const w = 700\n  const h = 247\n  const format = isWebPImage ? WebPArgs : ''\n  const watermark = `watermark,text_U3VybW9uLm1l,type_bm90b3NhbnM,color_ffffff,size_28,g_sw,t_26,x_22,y_18`\n  return `${thumb}?image_process=${format}quality,q_82/resize,w_${w},h_${h}/crop,mid,w_${w},h_${h}/${watermark}`\n}\n\nexport const getArticleListThumbnailURL = (thumb: string, isWebPImage: boolean) => {\n  if (!thumb) {\n    return ''\n  }\n  const w = 350\n  const h = 238\n  const format = isWebPImage ? WebPArgs : ''\n  return `${thumb}?image_process=${format}quality,q_80/resize,w_${w},h_${h}/crop,mid,w_${w},h_${h}`\n}\n\nexport const getArticleSquareThumbnailURL = (thumb: string) => {\n  const size = 320\n  return thumb\n    ? `${thumb}?image_process=quality,q_84/resize,w_${size},h_${size}/crop,mid,w_${size},h_${size}`\n    : ''\n}\n","/**\n * @file App state transformer\n * @module transform.state\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { UNDEFINED, isNull, isUndefined } from '/@/constants/value'\nimport { OriginState, UniversalKeyValue } from '/@/constants/state'\n\nexport const isOriginalType = (originState?: OriginState) => {\n  return isNull(originState) || isUndefined(null) || originState === OriginState.Original\n}\n\nexport const isHybridType = (originState: OriginState) => {\n  return originState === OriginState.Hybrid\n}\n\nexport const isReprintType = (originState: OriginState) => {\n  return originState === OriginState.Reprint\n}\n\nexport const getExtendsObject = (kvs: UniversalKeyValue[] | void): { [key: string]: string } => {\n  return kvs?.length ? kvs.reduce((v, c) => ({ ...v, [c.name]: c.value }), {}) : {}\n}\n\nexport const getExtendValue = (kvs: UniversalKeyValue[], key: string) => {\n  return kvs.length ? getExtendsObject(kvs)[key] : UNDEFINED\n}\n","<template>\n  <div class=\"article-item\" @click=\"handleClick\">\n    <div class=\"thumbnail\">\n      <span\n        class=\"oirigin\"\n        :class=\"{\n          original: isOriginal,\n          reprint: isReprint,\n          hybrid: isHybrid\n        }\"\n      >\n        <i18n :k=\"LanguageKey.ORIGIN_ORIGINAL\" v-if=\"isOriginal\" />\n        <i18n :k=\"LanguageKey.ORIGIN_REPRINT\" v-else-if=\"isReprint\" />\n        <i18n :k=\"LanguageKey.ORIGIN_HYBRID\" v-else-if=\"isHybrid\" />\n      </span>\n      <div\n        class=\"image\"\n        :style=\"{ backgroundImage: `url(${getThumbnailURL(article.thumb)})` }\"\n        :alt=\"article.title\"\n        :title=\"article.title\"\n      />\n    </div>\n    <div class=\"content\">\n      <div class=\"body\">\n        <h4 class=\"title\">\n          <router-link class=\"link\" :to=\"getArticleDetailRoute(article.id)\" :title=\"article.title\">\n            {{ article.title }}\n          </router-link>\n        </h4>\n        <p\n          class=\"description\"\n          style=\"-webkit-box-orient: vertical\"\n          v-html=\"article.description\"\n        ></p>\n      </div>\n      <div class=\"meta\">\n        <span class=\"date\">\n          <i class=\"iconfont icon-clock\"></i>\n          <udate to=\"ago\" :date=\"article.create_at\" />\n        </span>\n        <span class=\"views\">\n          <i class=\"iconfont icon-eye\"></i>\n          <span>{{ numberSplit(article.meta.views) }}</span>\n        </span>\n        <span class=\"comments\">\n          <i class=\"iconfont icon-comment\"></i>\n          <span>{{ article.meta.comments }}</span>\n        </span>\n        <span class=\"likes\">\n          <i class=\"iconfont icon-like\" :class=\"{ liked: isLiked }\"></i>\n          <span>{{ article.meta.likes }}</span>\n        </span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, PropType } from 'vue'\n  import { LanguageKey } from '/@/language'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { Article } from '/@/stores/article'\n  import { useIdentityStore } from '/@/stores/identity'\n  import { getArticleDetailRoute } from '/@/transforms/route'\n  import { getMobileArticleListThumbnailURL } from '/@/transforms/thumbnail'\n  import { isOriginalType, isHybridType, isReprintType } from '/@/transforms/state'\n  import { numberSplit } from '/@/transforms/text'\n\n  export default defineComponent({\n    name: 'FlowArticleListItem',\n    props: {\n      article: {\n        type: Object as PropType<Article>,\n        required: true\n      }\n    },\n    setup(props) {\n      const { router, globalState } = useEnhancer()\n      const identityStore = useIdentityStore()\n      const isLiked = computed(() => identityStore.isLikedPage(props.article.id))\n      const isHybrid = isHybridType(props.article.origin)\n      const isReprint = isReprintType(props.article.origin)\n      const isOriginal = isOriginalType(props.article.origin)\n\n      const getThumbnailURL = (thumbURL: string) => {\n        return getMobileArticleListThumbnailURL(thumbURL, globalState.imageExt.value.isWebP)\n      }\n\n      const handleClick = () => {\n        router.push(getArticleDetailRoute(props.article.id))\n      }\n\n      return {\n        LanguageKey,\n        isLiked,\n        isHybrid,\n        isReprint,\n        isOriginal,\n        numberSplit,\n        getThumbnailURL,\n        getArticleDetailRoute,\n        handleClick\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .article-item {\n    display: flex;\n    flex-direction: column;\n    position: relative;\n    background-color: $module-bg;\n    @include radius-box($sm-radius);\n\n    .thumbnail {\n      width: 100%;\n      height: auto;\n      overflow: hidden;\n      position: relative;\n      background-color: $module-bg-darker-3;\n\n      .oirigin {\n        $opacity: 0.7;\n        position: absolute;\n        right: 0;\n        top: 0;\n        z-index: $z-index-normal + 1;\n        padding: 0 $lg-gap;\n        border-bottom-left-radius: $xs-radius;\n        opacity: 0.7;\n        line-height: 2.3rem;\n        font-size: $font-size-small;\n        font-weight: bold;\n        color: $white;\n        text-align: center;\n        text-transform: uppercase;\n        @include visibility-transition();\n\n        &.original {\n          background-color: rgba($surmon, $opacity);\n        }\n        &.hybrid {\n          background-color: rgba($accent, $opacity);\n        }\n        &.reprint {\n          background-color: rgba($red, $opacity);\n        }\n      }\n\n      .image {\n        min-height: calc((100vw - 2rem) * 0.34);\n        max-height: 12rem;\n        background-size: cover;\n        background-position: center;\n      }\n    }\n\n    .content {\n      display: block;\n\n      .body {\n        padding: $gap;\n        padding-bottom: $sm-gap;\n\n        .title {\n          margin-top: 0;\n          margin-bottom: $sm-gap;\n          font-weight: bold;\n          @include text-overflow();\n\n          .link {\n            text-decoration: none;\n          }\n        }\n\n        .description {\n          margin: 0;\n          line-height: 2em;\n          overflow: hidden;\n          color: $text-secondary;\n          text-overflow: ellipsis;\n          @include clamp(3);\n        }\n      }\n\n      .meta {\n        display: flex;\n        justify-content: space-between;\n        align-items: baseline;\n        padding: $gap;\n        border-top: 1px dashed $module-bg-darker-3;\n        overflow: hidden;\n        color: $text-disabled;\n        font-size: $font-size-small;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        word-wrap: normal;\n\n        .iconfont {\n          margin-right: $sm-gap;\n        }\n\n        .views {\n          min-width: 4rem;\n        }\n\n        .likes {\n          .liked {\n            color: $red;\n          }\n        }\n\n        .likes,\n        .comments {\n          min-width: 3em;\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"articles\">\n    <div class=\"header\" v-if=\"tagSlug || categorySlug || date || searchKeyword\">\n      <div class=\"content\">\n        <template v-if=\"categorySlug\">\n          <i18n v-if=\"category\">\n            <template #zh>分类 “{{ category.name }}” 的过滤结果</template>\n            <template #en>Category \"{{ firstUpperCase(category.slug) }}\" 's result</template>\n          </i18n>\n          <span v-else>{{ categorySlug }}</span>\n        </template>\n        <template v-if=\"tagSlug\">\n          <i18n v-if=\"tag\">\n            <template #zh>标签 “{{ tag.name }}” 的过滤结果</template>\n            <template #en>Tag \"{{ tagEnName(tag) }}\" 's result</template>\n          </i18n>\n          <span v-else>{{ tagSlug }}</span>\n        </template>\n        <i18n v-if=\"date\">\n          <template #zh>日期 “{{ date }}” 的过滤结果</template>\n          <template #en>Date \"{{ date }}\" 's result</template>\n        </i18n>\n        <i18n v-if=\"searchKeyword\">\n          <template #zh>关键词 “{{ searchKeyword }}” 的过滤结果</template>\n          <template #en>Search keyword \"{{ searchKeyword }}\" 's result</template>\n        </i18n>\n      </div>\n      <router-link to=\"/\" class=\"close\">\n        <i class=\"iconfont icon-cancel\"></i>\n      </router-link>\n    </div>\n    <placeholder\n      :data=\"articles.length\"\n      :loading=\"!articles.length && articleListStore.list.fetching\"\n    >\n      <template #loading>\n        <ul class=\"skeletons\" key=\"skeleton\">\n          <li v-for=\"item in 3\" :key=\"item\" class=\"item\">\n            <div class=\"thumb\">\n              <skeleton-base />\n            </div>\n            <div class=\"content\">\n              <div class=\"title\">\n                <skeleton-line />\n              </div>\n              <div class=\"description\">\n                <skeleton-line />\n              </div>\n            </div>\n          </li>\n        </ul>\n      </template>\n      <template #placeholder>\n        <empty class=\"empty\" :i18n-key=\"LanguageKey.ARTICLE_PLACEHOLDER\" />\n      </template>\n      <template #default>\n        <div>\n          <transition-group key=\"list\" name=\"list-fade\" tag=\"div\" class=\"list\">\n            <list-item\n              class=\"list-item\"\n              :article=\"article\"\n              :key=\"index\"\n              v-for=\"(article, index) in articles\"\n            />\n          </transition-group>\n          <loadmore\n            :loading=\"articleListStore.list.fetching\"\n            :finished=\"!hasMoreArticles\"\n            @loadmore=\"loadmoreArticles\"\n          />\n        </div>\n      </template>\n    </placeholder>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, watch, onBeforeMount } from 'vue'\n  import { LanguageKey } from '/@/language'\n  import { META } from '/@/config/app.config'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useUniversalFetch, onClient } from '/@/universal'\n  import { useArticleListStore, Article } from '/@/stores/article'\n  import { useTagStore, tagEnName } from '/@/stores/tag'\n  import { useCategoryStore } from '/@/stores/category'\n  import { useAppOptionStore } from '/@/stores/basic'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { scrollToNextScreen } from '/@/utils/scroller'\n  import Loadmore from './loadmore.vue'\n  import ListItem from './item.vue'\n\n  export default defineComponent({\n    name: 'MobileFlowArticleList',\n    components: {\n      ListItem,\n      Loadmore\n    },\n    props: {\n      tagSlug: {\n        type: String,\n        required: false\n      },\n      categorySlug: {\n        type: String,\n        required: false\n      },\n      searchKeyword: {\n        type: String,\n        required: false\n      },\n      date: {\n        type: String,\n        required: false\n      }\n    },\n    setup(props) {\n      const { meta, i18n } = useEnhancer()\n      const appOptionStore = useAppOptionStore()\n      const tagStore = useTagStore()\n      const categoryStore = useCategoryStore()\n      const articleListStore = useArticleListStore()\n      const category = computed(() => {\n        return props.categorySlug\n          ? categoryStore.data.find((category) => category.slug === props.categorySlug)!\n          : null\n      })\n      const tag = computed(() => {\n        return props.tagSlug ? tagStore.data.find((tag) => tag.slug === props.tagSlug) : null\n      })\n\n      const articles = computed<Array<Article>>(() => articleListStore.list.data)\n      const hasMoreArticles = computed(() => {\n        const pagination = articleListStore.list.pagination\n        return pagination ? pagination.current_page < pagination.total_page : false\n      })\n\n      meta(() => {\n        const titles: string[] = Object.values(props)\n          .filter(Boolean)\n          .map((prop) => firstUpperCase(prop as string))\n        // filter page\n        if (titles.length) {\n          return {\n            pageTitle: titles.join(' | ')\n          }\n        }\n        // index page\n        return {\n          title: `${META.title} - ${i18n.t(LanguageKey.APP_SLOGAN)}`,\n          description: appOptionStore.data?.description,\n          keywords: appOptionStore.data?.keywords.join(','),\n          ogType: 'blog'\n        }\n      })\n\n      const fetchArticles = async (params: any = {}) => {\n        await articleListStore.fetchList({\n          category_slug: props.categorySlug,\n          tag_slug: props.tagSlug,\n          date: props.date,\n          keyword: props.searchKeyword,\n          ...params\n        })\n      }\n\n      const loadmoreArticles = async () => {\n        await fetchArticles({\n          page: articleListStore.list.pagination!.current_page + 1\n        })\n        onClient(scrollToNextScreen)\n      }\n\n      onBeforeMount(() => {\n        watch(\n          () => props,\n          () => fetchArticles(),\n          { flush: 'post', deep: true }\n        )\n      })\n\n      useUniversalFetch(() => fetchArticles())\n\n      return {\n        LanguageKey,\n        tagEnName,\n        tag,\n        category,\n        articles,\n        articleListStore,\n        hasMoreArticles,\n        loadmoreArticles,\n        firstUpperCase\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @use 'sass:math';\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .articles {\n    .header {\n      $size: 4rem;\n      display: flex;\n      height: $size;\n      line-height: $size;\n      margin-left: -$gap;\n      margin-right: -$gap;\n      margin-top: -$lg-gap;\n      margin-bottom: $lg-gap;\n      text-align: center;\n      background-color: $module-bg-darker-1;\n\n      .close {\n        flex-shrink: 0;\n        width: $size;\n      }\n\n      .content {\n        flex-grow: 1;\n        padding-left: $size;\n        font-weight: bold;\n        @include text-overflow();\n      }\n    }\n\n    .skeletons {\n      padding: 0;\n      list-style: none;\n\n      .item {\n        background-color: $module-bg;\n        @include radius-box($sm-radius);\n        margin-bottom: $lg-gap;\n        &:last-child {\n          margin-bottom: 0;\n        }\n\n        .thumb {\n          height: 9rem;\n          padding: $gap;\n        }\n\n        .content {\n          padding: 1rem;\n          padding-top: 0;\n\n          .title {\n            width: 60%;\n            height: 2.4rem;\n          }\n\n          .description {\n            width: 80%;\n            margin-top: 1rem;\n            height: 1rem;\n          }\n        }\n      }\n    }\n\n    .list {\n      .list-item {\n        margin-bottom: $lg-gap;\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"article-item\">\n    <div\n      class=\"item-background\"\n      :style=\"{\n        backgroundImage: `url(${getThumbnailURL(article.thumb)})`\n      }\"\n    />\n    <div class=\"item-content\">\n      <router-link class=\"item-thumb\" :to=\"getArticleDetailRoute(article.id)\">\n        <span\n          class=\"item-oirigin\"\n          :class=\"{\n            original: isOriginal,\n            hybrid: isHybrid,\n            reprint: isReprint\n          }\"\n        >\n          <i18n :k=\"LanguageKey.ORIGIN_ORIGINAL\" v-if=\"isOriginal\" />\n          <i18n :k=\"LanguageKey.ORIGIN_REPRINT\" v-else-if=\"isReprint\" />\n          <i18n :k=\"LanguageKey.ORIGIN_HYBRID\" v-else-if=\"isHybrid\" />\n        </span>\n        <div\n          class=\"image\"\n          :style=\"{ backgroundImage: `url(${getThumbnailURL(article.thumb)})` }\"\n          :alt=\"article.title\"\n          :title=\"article.title\"\n        />\n      </router-link>\n      <div class=\"item-body\">\n        <div class=\"item-content\">\n          <h5 class=\"title\">\n            <router-link\n              class=\"link\"\n              :to=\"getArticleDetailRoute(article.id)\"\n              :title=\"article.title\"\n            >\n              {{ article.title }}\n            </router-link>\n            <span class=\"language\">{{ getLanguageText(article.lang) }}</span>\n          </h5>\n          <p\n            class=\"description\"\n            style=\"-webkit-box-orient: vertical\"\n            v-html=\"article.description\"\n          ></p>\n        </div>\n        <div class=\"item-meta\">\n          <span class=\"date\">\n            <i class=\"iconfont icon-clock\"></i>\n            <udate to=\"ago\" :date=\"article.create_at\" />\n          </span>\n          <span class=\"views\">\n            <i class=\"iconfont icon-eye\"></i>\n            <span>{{ numberSplit(article.meta.views) }}</span>\n          </span>\n          <span class=\"comments\">\n            <i class=\"iconfont icon-comment\"></i>\n            <span>{{ article.meta.comments }}</span>\n          </span>\n          <span class=\"likes\">\n            <i class=\"iconfont icon-like\" :class=\"{ liked: isLiked }\"></i>\n            <span>{{ article.meta.likes }}</span>\n          </span>\n          <span class=\"categories\">\n            <i class=\"iconfont icon-category\"></i>\n            <placeholder :transition=\"false\" :data=\"article.category.length\">\n              <template #placeholder>\n                <i18n :k=\"LanguageKey.EMPTY_PLACEHOLDER\" />\n              </template>\n              <template #default>\n                <router-link\n                  v-for=\"(category, index) in article.category.slice(0, 1)\"\n                  :key=\"index\"\n                  :to=\"getCategoryFlowRoute(category.slug)\"\n                >\n                  <i18n :zh=\"category.name\" :en=\"category.slug\" />\n                </router-link>\n              </template>\n            </placeholder>\n          </span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, PropType } from 'vue'\n  import { Language, LanguageKey } from '/@/language'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { Article } from '/@/stores/article'\n  import { useIdentityStore } from '/@/stores/identity'\n  import { getArticleDetailRoute, getTagFlowRoute, getCategoryFlowRoute } from '/@/transforms/route'\n  import { isOriginalType, isHybridType, isReprintType } from '/@/transforms/state'\n  import { getArticleListThumbnailURL } from '/@/transforms/thumbnail'\n  import { numberSplit } from '/@/transforms/text'\n\n  export default defineComponent({\n    name: 'FlowArticleListItem',\n    props: {\n      article: {\n        type: Object as PropType<Article>,\n        required: true\n      }\n    },\n    setup(props) {\n      const { globalState } = useEnhancer()\n      const identity = useIdentityStore()\n      const isLiked = computed(() => identity.isLikedPage(props.article.id))\n      const isHybrid = isHybridType(props.article.origin)\n      const isReprint = isReprintType(props.article.origin)\n      const isOriginal = isOriginalType(props.article.origin)\n\n      const getThumbnailURL = (thumbURL: string) => {\n        return getArticleListThumbnailURL(thumbURL, globalState.imageExt.value.isWebP)\n      }\n\n      const getLanguageText = (language: Language) => {\n        return language === Language.Chinese ? '中文' : 'EN'\n      }\n\n      return {\n        LanguageKey,\n        isLiked,\n        isHybrid,\n        isReprint,\n        isOriginal,\n        numberSplit,\n        getThumbnailURL,\n        getLanguageText,\n        getArticleDetailRoute,\n        getCategoryFlowRoute,\n        getTagFlowRoute\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .article-item {\n    position: relative;\n    @include radius-box($sm-radius);\n\n    &:last-child {\n      margin: 0;\n    }\n\n    .item-background {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      z-index: -1;\n      background-size: 120%;\n      background-position: 0% 50%;\n      opacity: 0.06;\n    }\n\n    > .item-content {\n      $height: $gap * 11;\n      $padding: $sm-gap;\n      $content-height: $height - ($padding * 2);\n      display: flex;\n      height: $height;\n      padding: $padding;\n      overflow: hidden;\n      @include common-bg-module($transition-time-fast);\n\n      &:hover {\n        .item-thumb {\n          .item-oirigin {\n            opacity: 1;\n          }\n\n          .image {\n            opacity: 0.88;\n            transform: translateX(-3px);\n          }\n        }\n      }\n\n      > .item-thumb {\n        flex-shrink: 0;\n        /* Google AdSense */\n        $width: 186px;\n        width: $width;\n        height: $content-height;\n        margin-right: $lg-gap;\n        position: relative;\n        @include radius-box($xs-radius);\n\n        .item-oirigin {\n          $height: 2.1rem;\n          $opacity: 0.7;\n          position: absolute;\n          left: 0;\n          top: 0;\n          height: $height;\n          line-height: $height;\n          z-index: $z-index-normal + 1;\n          padding: 0 $sm-gap;\n          border-bottom-right-radius: $xs-radius;\n          opacity: 0.5;\n          font-size: $font-size-small;\n          color: $white;\n          text-align: center;\n          @include visibility-transition();\n\n          &.original {\n            background-color: rgba($surmon, $opacity);\n          }\n          &.hybrid {\n            background-color: rgba($accent, $opacity);\n          }\n          &.reprint {\n            background-color: rgba($red, $opacity);\n          }\n        }\n\n        .image {\n          height: 100%;\n          min-width: 100%;\n          width: $width + 3px;\n          max-width: $width + 3px;\n          border-color: transparent;\n          background-color: $module-bg-hover;\n          background-size: cover;\n          background-position: center;\n          opacity: 1;\n          transform: translateX(0);\n          transition: transform $transition-time-normal, opacity $transition-time-normal;\n        }\n      }\n\n      > .item-body {\n        flex-grow: 1;\n        display: flex;\n        flex-direction: column;\n        justify-content: space-between;\n        height: $content-height;\n        padding-right: $xs-gap;\n\n        .title {\n          display: flex;\n          justify-content: space-between;\n          margin-top: 3px;\n          margin-bottom: $sm-gap;\n          font-weight: bold;\n\n          .link {\n            display: block;\n            max-width: 26rem;\n            margin-left: 0;\n            text-decoration: none;\n            border-bottom: 1px solid transparent;\n            color: $text;\n            transition: margin $transition-time-normal;\n            @include text-overflow();\n            &:hover {\n              color: $link-color;\n              border-color: initial;\n              margin-left: $xs-gap;\n            }\n          }\n\n          .language {\n            opacity: 0.5;\n            color: $text-divider;\n          }\n        }\n\n        .description {\n          margin: 0;\n          line-height: 1.8em;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          font-size: $font-size-h6;\n          @include clamp(2);\n        }\n\n        > .item-meta {\n          height: 2em;\n          line-height: 2em;\n          display: flex;\n          justify-content: space-between;\n          align-items: baseline;\n          overflow: hidden;\n          font-size: $font-size-small;\n          white-space: nowrap;\n          text-overflow: ellipsis;\n          word-wrap: normal;\n          color: $text-secondary;\n\n          > .views {\n            width: 4em;\n          }\n\n          > .likes {\n            > .liked {\n              color: $red;\n            }\n          }\n\n          > .likes,\n          > .comments {\n            width: 3em;\n          }\n\n          > .date,\n          > .views,\n          > .comments,\n          > .likes,\n          > .tags,\n          > .categories {\n            > .iconfont {\n              margin-right: $xs-gap;\n            }\n          }\n\n          > .categories {\n            a {\n              color: $text-secondary;\n              text-transform: capitalize;\n              margin-right: $sm-gap;\n\n              &:last-child {\n                margin-right: 0;\n              }\n            }\n          }\n\n          > .tags {\n            margin-right: 0;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"articles\">\n    <div class=\"article-list\">\n      <placeholder :data=\"articles.length\" :loading=\"!articles.length && fetching\">\n        <template #loading>\n          <ul class=\"article-list-skeleton\" key=\"skeleton\">\n            <li v-for=\"item in 6\" :key=\"item\" class=\"item\">\n              <div class=\"thumb\">\n                <skeleton-base />\n              </div>\n              <div class=\"content\">\n                <div class=\"title\">\n                  <skeleton-line />\n                </div>\n                <div class=\"description\">\n                  <div class=\"line-item\" :key=\"line\" v-for=\"line in 2\">\n                    <skeleton-line />\n                  </div>\n                </div>\n                <skeleton-line class=\"meta\" />\n              </div>\n            </li>\n          </ul>\n        </template>\n        <template #placeholder>\n          <empty class=\"empty\" :i18n-key=\"LanguageKey.ARTICLE_PLACEHOLDER\" />\n        </template>\n        <template #default>\n          <div key=\"list\">\n            <client-only>\n              <template v-if=\"mammon\">\n                <Adsense\n                  v-if=\"isDarkTheme\"\n                  ins-class=\"mammon-ins\"\n                  data-ad-format=\"fluid\"\n                  data-ad-layout-key=\"-hj-9+3a-97+6s\"\n                  data-ad-slot=\"1765379407\"\n                  class=\"article-list-mammon\"\n                />\n                <Adsense\n                  v-else\n                  ins-class=\"mammon-ins\"\n                  data-ad-format=\"fluid\"\n                  data-ad-layout-key=\"-hj-9+3a-97+6s\"\n                  data-ad-slot=\"1148538406\"\n                  class=\"article-list-mammon\"\n                />\n              </template>\n            </client-only>\n            <transition-group name=\"list-fade\">\n              <list-item\n                v-for=\"articleItem in articles\"\n                class=\"list-item\"\n                :key=\"articleItem.id\"\n                :article=\"articleItem\"\n              />\n            </transition-group>\n          </div>\n        </template>\n      </placeholder>\n    </div>\n    <button class=\"article-load\" :disabled=\"fetching || !isLoadMoreEnabled\" @click=\"handleLoadmore\">\n      <div class=\"background\">\n        <span class=\"left\"></span>\n        <span class=\"right\"></span>\n      </div>\n      <div class=\"content\">\n        <span class=\"left\">\n          <template v-if=\"fetching\">•••</template>\n          <template v-else>{{ articles.length }} / {{ pagination?.total }}</template>\n        </span>\n        <span class=\"right\">\n          <span class=\"text\" :class=\"{ zh: isZhLang }\">\n            <i18n v-if=\"fetching\" :k=\"LanguageKey.ARTICLE_LIST_LOADING\" />\n            <i18n v-else-if=\"isLoadMoreEnabled\" :k=\"LanguageKey.ARTICLE_LIST_LOADMORE\" />\n            <i18n v-else :k=\"LanguageKey.ARTICLE_LIST_NO_MORE\" />\n          </span>\n          <i class=\"iconfont icon-loadmore\"></i>\n        </span>\n      </div>\n    </button>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, PropType } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { Pagination } from '/@/constants/state'\n  import { Article } from '/@/stores/article'\n  import { LanguageKey } from '/@/language'\n  import ListItem from './item.vue'\n\n  export enum Events {\n    Loadmore = 'loadmore'\n  }\n\n  export default defineComponent({\n    name: 'FlowArticleList',\n    components: {\n      ListItem\n    },\n    props: {\n      articles: {\n        type: Array as PropType<Article[]>,\n        required: true\n      },\n      pagination: {\n        type: Object as PropType<Pagination | null>,\n        default: null\n      },\n      fetching: {\n        type: Boolean,\n        required: true\n      },\n      mammon: {\n        type: Boolean,\n        default: true\n      }\n    },\n    emits: [Events.Loadmore],\n    setup(props, context) {\n      const { isDarkTheme, isZhLang } = useEnhancer()\n      const isLoadMoreEnabled = computed(() => {\n        return props.pagination\n          ? props.pagination.current_page < props.pagination.total_page\n          : false\n      })\n\n      const handleLoadmore = () => {\n        context.emit(Events.Loadmore)\n      }\n\n      return {\n        LanguageKey,\n        isZhLang,\n        isDarkTheme,\n        isLoadMoreEnabled,\n        handleLoadmore\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @use 'sass:math';\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .articles {\n    .article-list-skeleton {\n      padding: 0;\n      margin: 0;\n      list-style: none;\n      overflow: hidden;\n\n      .item {\n        display: flex;\n        height: 10rem;\n        padding: $gap;\n        margin-bottom: $lg-gap;\n        @include common-bg-module();\n        @include radius-box($sm-radius);\n        &:last-child {\n          margin-bottom: 0;\n        }\n\n        .thumb {\n          height: 100%;\n          width: 15rem;\n        }\n\n        .content {\n          margin-left: $lg-gap;\n          flex-grow: 1;\n\n          .title {\n            height: 1.5em;\n            width: 36%;\n          }\n          .description {\n            .line-item {\n              width: 100%;\n              height: $lg-gap;\n              margin-top: $sm-gap;\n            }\n          }\n          .meta {\n            width: 68%;\n            height: $lg-gap;\n            margin-top: $lg-gap;\n          }\n        }\n      }\n    }\n\n    .article-list-mammon {\n      width: 100%;\n      min-height: 10rem;\n      padding: $sm-gap;\n      margin-bottom: $lg-gap;\n      @include common-bg-module();\n      @include radius-box($sm-radius);\n\n      &::v-deep(.mammon-ins) {\n        margin: $xs-gap 0;\n        height: 100px;\n      }\n    }\n\n    .article-list {\n      margin-bottom: $lg-gap;\n      min-height: $lg-gap;\n      overflow: hidden;\n\n      .empty {\n        height: $gap * 10;\n        font-size: $font-size-h4;\n        font-weight: bold;\n        @include common-bg-module();\n        @include radius-box($sm-radius);\n      }\n\n      .list-item {\n        margin-bottom: $lg-gap;\n        &:last-child {\n          margin-bottom: 0;\n        }\n      }\n    }\n\n    .article-load {\n      width: 100%;\n      height: $button-block-height;\n      position: relative;\n      display: block;\n      @include radius-box($sm-radius);\n      &[disabled] {\n        opacity: 0.6;\n      }\n      &:not([disabled]):hover {\n        .background {\n          .left {\n            background: $module-bg-opaque;\n          }\n          .right {\n            background: $surmon;\n          }\n        }\n        .content {\n          .left {\n            color: $primary;\n          }\n          .right {\n            color: $white;\n          }\n        }\n      }\n\n      .content {\n        height: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n\n        .left,\n        .right {\n          @include color-transition();\n        }\n\n        .left {\n          font-weight: bold;\n          color: $text-disabled;\n          margin-left: 2em;\n        }\n\n        .right {\n          width: 10rem;\n          color: $text-disabled;\n          .text {\n            font-weight: bold;\n            text-transform: uppercase;\n            &:not(.zh) {\n              font-size: 95%;\n            }\n          }\n          .iconfont {\n            margin-left: $gap;\n          }\n        }\n      }\n\n      .background {\n        position: absolute;\n        top: 0;\n        left: 0;\n        z-index: $z-index-normal - 1;\n        width: 100%;\n        height: 100%;\n        display: flex;\n        justify-content: space-between;\n        $skew: -20deg;\n        $skew-offset: $gap;\n\n        .left,\n        .right {\n          height: 100%;\n          border-radius: $xs-radius;\n          @include background-transition();\n        }\n\n        .left {\n          flex: 1;\n          margin-left: -$skew-offset;\n          margin-right: $skew-offset;\n          background: $module-bg;\n          transform: skew($skew);\n        }\n\n        .right {\n          width: 12rem;\n          margin-right: -$skew-offset;\n          background: $module-bg-opaque;\n          transform: skew($skew);\n        }\n      }\n    }\n  }\n</style>\n","/**\n * @file Swiper for vue\n * @module effect.swiper\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport {\n  Swiper as SwiperClass,\n  Pagination,\n  Navigation,\n  Grid,\n  Lazy,\n  Mousewheel,\n  Autoplay,\n  A11y,\n  EffectFade\n} from 'swiper'\n\nSwiperClass.use([Grid, Pagination, Navigation, Mousewheel, Autoplay, A11y, Lazy, EffectFade])\n\nexport default SwiperClass\nexport { Swiper, SwiperSlide } from 'swiper/vue'\n","<template>\n  <div class=\"carrousel\" :class=\"{ dark: isDarkTheme }\">\n    <placeholder :data=\"articleList.length\" :loading=\"fetching\">\n      <template #placeholder>\n        <empty class=\"article-empty\" key=\"empty\">\n          <i18n :k=\"LanguageKey.ARTICLE_PLACEHOLDER\" />\n        </empty>\n      </template>\n      <template #loading>\n        <div class=\"article-skeleton\" key=\"skeleton\">\n          <div class=\"title\">\n            <skeleton-line />\n          </div>\n          <div class=\"content\">\n            <div class=\"first\">\n              <skeleton-line />\n            </div>\n            <div class=\"line\" v-for=\"(line, index) in 3\" :key=\"index\">\n              <skeleton-line class=\"line-item\" />\n            </div>\n          </div>\n        </div>\n      </template>\n      <template #default>\n        <swiper\n          class=\"swiper\"\n          :set-wrapper-size=\"true\"\n          :mousewheel=\"true\"\n          :observe-parents=\"true\"\n          :grab-cursor=\"false\"\n          :simulate-touch=\"false\"\n          :preload-images=\"false\"\n          :lazy=\"false\"\n          :pagination=\"{ clickable: true }\"\n          :autoplay=\"{ delay: 3500, disableOnInteraction: false }\"\n        >\n          <swiper-slide v-for=\"(article, index) in articleList.slice(0, 9)\" :key=\"index\">\n            <div class=\"content\">\n              <template v-if=\"article.ad\">\n                <ulink class=\"link\" :href=\"article.url\">\n                  <img :src=\"article.src\" :alt=\"article.title\" />\n                  <div class=\"title\">\n                    <div class=\"background\"></div>\n                    <div class=\"prospect\">\n                      <span\n                        class=\"text\"\n                        :style=\"{\n                          backgroundImage: `url('${getThumbURL(article.src)}')`\n                        }\"\n                        >{{ article.title }}</span\n                      >\n                    </div>\n                  </div>\n                  <span class=\"ad-symbol\">\n                    <i18n :k=\"LanguageKey.AD\" />\n                  </span>\n                </ulink>\n              </template>\n              <template v-else>\n                <router-link :to=\"getArticleDetailRoute(article.id)\" class=\"link\">\n                  <img :src=\"getThumbURL(article.thumb)\" :alt=\"article.title\" draggable=\"false\" />\n                  <div class=\"title\">\n                    <div class=\"background\"></div>\n                    <div class=\"prospect\">\n                      <span\n                        class=\"text\"\n                        :style=\"{\n                          backgroundImage: `url('${getThumbURL(article.thumb)}')`\n                        }\"\n                        >{{ article.title }}</span\n                      >\n                    </div>\n                  </div>\n                </router-link>\n              </template>\n            </div>\n          </swiper-slide>\n        </swiper>\n      </template>\n    </placeholder>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, PropType } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { Article } from '/@/stores/article'\n  import { LanguageKey } from '/@/language'\n  import { Swiper, SwiperSlide } from '/@/effects/swiper'\n  import { getArticleDetailRoute } from '/@/transforms/route'\n  import { getArticleBannerThumbnailURL } from '/@/transforms/thumbnail'\n\n  export default defineComponent({\n    name: 'IndexCarrousel',\n    components: {\n      Swiper,\n      SwiperSlide\n    },\n    props: {\n      articles: {\n        type: Array as PropType<Article[]>,\n        required: true\n      },\n      fetching: {\n        type: Boolean,\n        required: true\n      }\n    },\n    setup(props) {\n      const { globalState, adConfig, isDarkTheme } = useEnhancer()\n      const articleList = computed(() => {\n        const articles: Array<Article | any> = [...props.articles].slice(0, 9)\n        if (adConfig.value.PC_CARROUSEL) {\n          const { index, ...otherConfig } = adConfig.value.PC_CARROUSEL\n          articles.length &&\n            articles.splice(index, 0, {\n              ad: true,\n              ...otherConfig\n            } as any)\n        }\n        return articles\n      })\n\n      const getThumbURL = (thumb: string): string => {\n        return getArticleBannerThumbnailURL(thumb, globalState.imageExt.value.isWebP)\n      }\n\n      return {\n        LanguageKey,\n        isDarkTheme,\n        articleList,\n        getArticleDetailRoute,\n        getThumbURL\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .carrousel {\n    $carrousel-height: 210px;\n    position: relative;\n    height: $carrousel-height;\n    @include common-bg-module();\n    @include radius-box($lg-radius);\n\n    .article-empty {\n      font-size: $font-size-h1;\n      font-weight: bold;\n    }\n\n    .article-skeleton {\n      position: relative;\n      width: 100%;\n      height: 100%;\n      padding: 2rem;\n\n      .content {\n        width: 50%;\n        margin-top: 4rem;\n        margin-left: 1rem;\n\n        .first {\n          width: 8rem;\n          height: $gap * 2;\n          margin-bottom: $gap;\n        }\n\n        .line {\n          .line-item {\n            width: 14rem;\n            height: $lg-gap;\n            margin-bottom: $gap;\n          }\n        }\n      }\n\n      .title {\n        position: absolute;\n        top: 2rem;\n        right: 2rem;\n        height: 2.6rem;\n        width: 18rem;\n      }\n    }\n\n    &.dark {\n      .swiper-slide {\n        .title {\n          .prospect {\n            .text {\n              color: $link-color !important;\n              -webkit-text-fill-color: $link-color !important;\n            }\n          }\n        }\n      }\n    }\n\n    .swiper {\n      width: 595px;\n      height: $carrousel-height;\n\n      // filter for slide when transitioning\n      ::v-deep(.swiper-wrapper[style*='300ms']) {\n        .swiper-slide-active {\n          .content {\n            @include motion-blur-filter('horizontal');\n          }\n        }\n      }\n\n      ::v-deep(.swiper-pagination) {\n        .swiper-pagination-bullet-active {\n          width: 2rem;\n        }\n      }\n\n      .content {\n        width: 100%;\n        height: $carrousel-height;\n        position: relative;\n        overflow: hidden;\n\n        > .link {\n          display: block;\n          width: 100%;\n          height: 100%;\n        }\n\n        img {\n          width: 100%;\n          transform: scale(1);\n          transition: transform $transition-time-normal;\n\n          &:hover {\n            transform: scale(1.06);\n          }\n        }\n\n        .ad-symbol {\n          display: block;\n          position: absolute;\n          top: 5.6rem;\n          right: 2.6rem;\n          font-size: $font-size-small;\n          color: $module-bg;\n          border-radius: $mini-radius;\n          padding: 0.1em 0.3em;\n          border: 1px solid;\n        }\n\n        .title {\n          $offset: 3px;\n          display: block;\n          position: absolute;\n          top: 2rem;\n          right: 2.6rem;\n          opacity: 0.8;\n          transition: opacity $transition-time-normal;\n\n          .background {\n            content: '';\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            z-index: -1;\n            top: 0;\n            left: 0;\n            background-color: $module-bg;\n            transform: translate3d($offset, -$offset, 0);\n            transition: transform $transition-time-fast;\n          }\n\n          .prospect {\n            padding: 0 1em;\n            height: 2em;\n            line-height: 2em;\n            @include text-overflow;\n            background-color: $module-bg-opaque;\n            background-position: top right;\n            transform: translate3d(-$offset, $offset, 0);\n            transition: transform $transition-time-fast;\n\n            .text {\n              letter-spacing: 0.3px;\n              font-weight: bold;\n              color: $text;\n              background-clip: text;\n              -webkit-background-clip: text;\n              -webkit-text-fill-color: transparent;\n            }\n          }\n\n          &:hover {\n            opacity: 1;\n            .background {\n              transform: translate3d(0, 0, 0);\n            }\n            .prospect {\n              transform: translate3d(0, 0, 0);\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","/**\n * @file GTag constant\n * @module constant.gtag\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport enum GAEventCategories {\n  Comment = 'comment',\n  Share = 'share',\n  Widget = 'widget',\n  Universal = 'global',\n  Article = 'page_article',\n  Index = 'page_index',\n  App = 'page_app',\n  About = 'page_about',\n  Lens = 'page_lens',\n  NFT = 'page_nft'\n}\n","/**\n * @file Social media\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport type { InstagramMediaItem } from '/@/server/getters/instagram'\nimport { ProxyModule } from '/@/constants/proxy'\nimport { getTargetProxyURL } from '/@/transforms/url'\n\nexport const isVideoMediaIns = (media: InstagramMediaItem) => {\n  return media.media_type === 'VIDEO'\n}\n\nexport const isAlbumMediaIns = (media: InstagramMediaItem) => {\n  return media.media_type === 'CAROUSEL_ALBUM'\n}\n\n// https://www.instagram.com/p/['IMAGE-CODE']/?__a=1\n// https://www.surinderbhomra.com/Blog/2016/05/16/Resize-An-Instagram-Image-Using-A-Media-Query-Parameter\nexport const getInstagramImage = (media: InstagramMediaItem, size?: 't' | 'm' | 'l') => {\n  // video type media\n  if (isVideoMediaIns(media)) {\n    return getTargetProxyURL(media.thumbnail_url!, ProxyModule.Instagram)\n  }\n  // image type media with size\n  if (size) {\n    return getTargetProxyURL(`${media.permalink}media/?size=${size}`, ProxyModule.Instagram)\n  }\n  // image type media without size\n  return getTargetProxyURL(media.media_url, ProxyModule.Instagram)\n}\n\nexport const getYouTubePlaylistURL = (id: string) => {\n  return `https://www.youtube.com/playlist?list=${id}`\n}\n\nexport const getYouTubeVideoURL = (id: string) => {\n  return `https://www.youtube.com/playlist?list=${id}`\n}\n\nexport const getYouTubeVideoEmbedURL = (id: string, list?: string) => {\n  const listParam = list ? `?list=${list}` : ''\n  return `https://www.youtube.com/embed/${id}${listParam}`\n}\n\nexport const getTwitterTweetDetailURL = (uid: string, id: string) => {\n  return `https://twitter.com/${uid}/status/${id}`\n}\n\nexport const get163MusicSongDetailURL = (songID: string | number) => {\n  return `https://music.163.com/#/song?id=${songID}`\n}\n","<template>\n  <div class=\"twitter\">\n    <placeholder :data=\"completedTweets.length\" :loading=\"fetching\">\n      <template #placeholder>\n        <div class=\"twitter-empty\" key=\"empty\">\n          <empty class=\"empty-content\">\n            <i18n :k=\"LanguageKey.EMPTY_PLACEHOLDER\" />\n          </empty>\n        </div>\n      </template>\n      <template #loading>\n        <div class=\"twitter-skeleton\" key=\"skeleton\">\n          <div class=\"left\"><skeleton-line /></div>\n          <div class=\"right\"><skeleton-line /></div>\n        </div>\n      </template>\n      <template #default>\n        <div class=\"twitter-content\" key=\"content\">\n          <div class=\"userinfo\" v-if=\"userinfo\" :title=\"userinfo.username\">\n            <ulink\n              class=\"logo-link\"\n              :href=\"VALUABLE_LINKS.TWITTER\"\n              @mousedown=\"handleGtagEvent('twitter_homepage')\"\n            >\n              <uimage class=\"avatar\" proxy :src=\"userinfo.profile_image_url\" />\n              <span class=\"logo\">\n                <i class=\"iconfont icon-twitter\" />\n              </span>\n            </ulink>\n            <div class=\"counts\">\n              <div class=\"item count\">\n                {{ padStart(numberSplit(userinfo.public_metrics.tweet_count), 3, '0') }}\n              </div>\n              <div class=\"item text\">Tweets</div>\n            </div>\n          </div>\n          <swiper\n            v-if=\"completedTweets.length\"\n            class=\"tweets\"\n            direction=\"vertical\"\n            :height=\"66\"\n            :mousewheel=\"true\"\n            :allow-touch-move=\"false\"\n            :slides-per-view=\"1\"\n            :prevent-clicks=\"false\"\n            :autoplay=\"{ delay: 3500, disableOnInteraction: false }\"\n            @transition-start=\"handleSwiperTransitionStart\"\n            @swiper=\"handleSwiperReady\"\n          >\n            <swiper-slide class=\"tweet-item\" v-for=\"(t, index) in completedTweets\" :key=\"index\">\n              <div class=\"content\" :title=\"t.tweet.text\">\n                <div\n                  class=\"reference\"\n                  v-if=\"t.tweet.referenced_tweets?.length\"\n                  :title=\"t.tweet.referenced_tweets[0].type\"\n                >\n                  <i\n                    class=\"iconfont icon-retweet\"\n                    v-if=\"['quoted', 'retweeted'].includes(t.tweet.referenced_tweets[0].type)\"\n                  ></i>\n                  <i class=\"iconfont icon-follow-up\" v-else></i>\n                </div>\n                <div\n                  class=\"main\"\n                  :class=\"{ 'has-media': t.medias.length }\"\n                  v-if=\"t.html\"\n                  v-html=\"t.html\"\n                ></div>\n                <ulink\n                  v-if=\"t.medias.length\"\n                  class=\"end-link\"\n                  :class=\"{ empty: !t.html }\"\n                  :href=\"t.url\"\n                  @mousedown=\"handleGtagEvent('twitter_image_link')\"\n                >\n                  <template v-if=\"t.medias.find((m) => m.type === 'video')\">\n                    <i class=\"iconfont media icon-video\"></i>\n                  </template>\n                  <template v-else>\n                    <i class=\"iconfont media icon-image\"></i>\n                  </template>\n                  <span class=\"text\">[{{ t.medias.length }}]</span>\n                  <i class=\"iconfont window icon-new-window-s\"></i>\n                </ulink>\n              </div>\n              <div class=\"meta\">\n                <ulink\n                  class=\"item link\"\n                  title=\"To Tweet\"\n                  :href=\"t.url\"\n                  @mousedown=\"handleGtagEvent('twitter_detail_link')\"\n                >\n                  <i class=\"iconfont twitter icon-twitter\"></i>\n                  <span>Tweet</span>\n                  <i class=\"iconfont window icon-new-window-s\"></i>\n                </ulink>\n                <span class=\"item reply\">\n                  <i class=\"iconfont icon-comment\"></i>\n                  <span>{{ t.tweet.public_metrics.reply_count }}</span>\n                </span>\n                <span class=\"item like\">\n                  <i class=\"iconfont icon-heart\"></i>\n                  <span>{{ t.tweet.public_metrics.like_count }}</span>\n                </span>\n                <span class=\"item date\">\n                  <i class=\"iconfont icon-clock\"></i>\n                  <udate to=\"ago\" :date=\"t.tweet.created_at\" />\n                </span>\n                <!-- <span class=\"item location\" :title=\"t.location\" v-if=\"t.location\">\n                  <i class=\"iconfont icon-location\"></i>\n                  <span>{{ t.location }}</span>\n                </span> -->\n              </div>\n            </swiper-slide>\n          </swiper>\n          <div class=\"navigation\">\n            <button class=\"button prev\" :disabled=\"activeIndex === 0\" @click=\"prevSlide\">\n              <i class=\"iconfont icon-totop\" />\n            </button>\n            <button\n              class=\"button next\"\n              :disabled=\"activeIndex === completedTweets.length - 1\"\n              @click=\"nextSlide\"\n            >\n              <i class=\"iconfont icon-tobottom\" />\n            </button>\n          </div>\n        </div>\n      </template>\n    </placeholder>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, computed, PropType } from 'vue'\n  import { IDENTITIES, VALUABLE_LINKS } from '/@/config/app.config'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { LanguageKey } from '/@/language'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { TwitterUserinfo, TweeterTweets } from '/@/stores/media'\n  import SwiperClass, { Swiper, SwiperSlide } from '/@/effects/swiper'\n  import { getTwitterTweetDetailURL } from '/@/transforms/media'\n  import { unescape, padStart, numberSplit } from '/@/transforms/text'\n\n  export default defineComponent({\n    name: 'IndexTwitter',\n    components: {\n      Swiper,\n      SwiperSlide\n    },\n    props: {\n      userinfo: {\n        type: Object as PropType<TwitterUserinfo>,\n        default: null\n      },\n      tweets: {\n        type: Object as PropType<TweeterTweets>,\n        default: null\n      },\n      fetching: {\n        type: Boolean,\n        required: true\n      }\n    },\n    setup(props) {\n      const { gtag } = useEnhancer()\n      const swiper = ref<SwiperClass>()\n      const prevSlide = () => swiper.value?.slidePrev()\n      const nextSlide = () => swiper.value?.slideNext()\n      const handleSwiperReady = (_swiper: SwiperClass) => {\n        swiper.value = _swiper\n      }\n      const activeIndex = ref(0)\n      const handleSwiperTransitionStart = () => {\n        activeIndex.value = swiper.value?.activeIndex || 0\n      }\n\n      const handleGtagEvent = (name: string) => {\n        gtag?.event(name, {\n          event_category: GAEventCategories.Index\n        })\n      }\n\n      const getLocation = (tweet: any) => {\n        if (tweet.geo?.place_id) {\n          const places = props.tweets.includes.places || []\n          const target = places.find((place) => place.id === tweet.geo?.place_id)\n          if (target) {\n            return `${target.country_code} · ${target.name}`\n          }\n        }\n        return null\n      }\n\n      const getMedias = (tweet: any): any[] => {\n        const mediaKeys = tweet.attachments?.media_keys || []\n        if (mediaKeys.length) {\n          const medias = props.tweets.includes.media || []\n          return mediaKeys\n            .map((key) => medias.find((media) => media.media_key === key))\n            .filter(Boolean)\n        }\n        return []\n      }\n\n      const completedTweets = computed(() => {\n        const tweets = props.tweets\n        if (!tweets?.data) {\n          return []\n        }\n\n        return tweets.data.map((tweet) => {\n          const completedTweet: any = {\n            tweet,\n            url: getTwitterTweetDetailURL(IDENTITIES.TWITTER_USER_NAME, tweet.id),\n            location: getLocation(tweet),\n            medias: getMedias(tweet),\n            html: unescape(tweet.text)\n          }\n\n          // text (image_url | original_tweet_url | link)\n          tweet.entities?.urls?.forEach((url) => {\n            if (\n              // remove image | original urls from text\n              url.display_url?.startsWith('pic.twitter.com/') ||\n              url.display_url?.startsWith('twitter.com/')\n            ) {\n              completedTweet.html = completedTweet.html.replace(url.url, '')\n            } else {\n              // replace link urls to text\n              completedTweet.html = completedTweet.html.replace(\n                url.url,\n                `<a\n                    class=\"link\"\n                    target=\"_blank\"\n                    rel=\"external nofollow noopener\"\n                    title=\"${url.expanded_url}\"\n                    href=\"${url.url}\"\n                  >\n                    <span class=\"text\">[${url.display_url}]</span>\n                  </a>\n                `\n              )\n            }\n          })\n          return completedTweet\n        })\n      })\n\n      return {\n        VALUABLE_LINKS,\n        LanguageKey,\n        completedTweets,\n        activeIndex,\n        numberSplit,\n        padStart,\n        prevSlide,\n        nextSlide,\n        handleSwiperReady,\n        handleSwiperTransitionStart,\n        handleGtagEvent\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @use 'sass:math';\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  $twitter-height: 66px;\n  $content-height: 42px;\n  $userinfo-width: 140px;\n\n  .twitter-empty,\n  .twitter-skeleton,\n  .twitter-content {\n    width: 100%;\n    height: $twitter-height;\n    display: flex;\n  }\n\n  .twitter-empty {\n    @include common-bg-module();\n    @include radius-box($sm-radius);\n    .empty-content {\n      min-height: auto;\n      font-weight: bold;\n    }\n  }\n\n  .twitter-skeleton {\n    padding: $gap;\n    background-color: $module-bg;\n    @include radius-box($sm-radius);\n\n    .left {\n      width: $userinfo-width;\n      margin-right: $lg-gap;\n    }\n    .right {\n      flex: 1;\n    }\n  }\n\n  .twitter-content {\n    .userinfo,\n    .tweets {\n      @include common-bg-module();\n    }\n\n    .userinfo {\n      width: $userinfo-width;\n      height: 100%;\n      margin-right: $sm-gap;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      @include radius-box($sm-radius);\n      border-top-right-radius: $mini-radius;\n      border-bottom-right-radius: $mini-radius;\n\n      .logo-link {\n        position: relative;\n        margin-right: 1.5rem;\n        background-color: $twitter-primary;\n        color: $white;\n        opacity: 0.9;\n        @include radius-box($xs-radius);\n        @include visibility-transition();\n        &:hover {\n          opacity: 1;\n        }\n\n        .avatar {\n          width: $content-height;\n          height: $content-height;\n        }\n\n        .logo {\n          position: absolute;\n          width: 50%;\n          height: 50%;\n          bottom: 0;\n          right: 0;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          border-top-left-radius: $xs-radius;\n          background-color: rgba($twitter-primary, 0.9);\n        }\n      }\n\n      .counts {\n        position: relative;\n        display: inline-flex;\n        flex-direction: column;\n        justify-content: space-around;\n        height: $content-height;\n        padding: 0.2em 0.5em 0.26em;\n        border-radius: $xs-radius;\n        background-color: $module-bg-darker-1;\n        &::before {\n          $size: 5px;\n          content: '';\n          position: absolute;\n          left: -$size * 2;\n          top: 20%;\n          width: 0;\n          height: 0;\n          border-top: $size solid transparent;\n          border-right: $size * 2 solid $module-bg-darker-1;\n          border-bottom: $size solid transparent;\n        }\n\n        .item {\n          &.count {\n            font-size: $font-size-small + 1;\n            font-weight: bold;\n            color: $text-secondary;\n          }\n\n          &.text {\n            color: $text-disabled;\n            font-size: $font-size-small;\n          }\n        }\n      }\n    }\n\n    .tweets {\n      flex: 1;\n      height: $twitter-height;\n      @include radius-box($mini-radius);\n\n      ::v-deep(.swiper-wrapper) {\n        flex-direction: column;\n        &[style*='300ms'] {\n          .swiper-slide-active {\n            @include motion-blur-filter('vertical-small');\n          }\n        }\n      }\n\n      .tweet-item {\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        box-sizing: border-box;\n        width: 100%;\n        height: $twitter-height;\n        padding: 0 $lg-gap;\n\n        .content {\n          display: flex;\n          height: 20px;\n          line-height: 20px;\n          margin-bottom: 6px;\n          $content-gap: 0.3em;\n\n          .reference {\n            margin-right: $xs-gap;\n            color: $text-secondary;\n          }\n\n          .main {\n            max-width: 96%;\n            font-weight: bold;\n            @include text-overflow();\n            &.has-media {\n              max-width: #{calc(100% - 40px)};\n            }\n\n            & + .end-link {\n              margin-left: $content-gap;\n            }\n\n            ::v-deep(.link) {\n              font-weight: normal;\n              font-size: $font-size-base - 1;\n              color: $text-secondary;\n              @include color-transition();\n              &:hover {\n                color: $link-color;\n                text-decoration: underline;\n              }\n\n              & + .link {\n                margin-left: $content-gap;\n              }\n\n              .iconfont {\n                margin-right: -3px;\n                color: $text-secondary;\n              }\n            }\n          }\n\n          .end-link {\n            position: relative;\n            color: $text-secondary;\n            &.empty {\n              color: $text;\n            }\n            &:hover {\n              &,\n              .iconfont {\n                color: $link-color !important;\n              }\n            }\n\n            .text {\n              margin-left: $xs-gap;\n              vertical-align: top;\n              font-size: $font-size-small;\n              @include color-transition();\n            }\n\n            .iconfont {\n              vertical-align: top;\n              @include color-transition();\n\n              &.media {\n                font-size: $font-size-base + 1;\n              }\n\n              &.window {\n                color: $text-disabled;\n                position: absolute;\n                top: -0.6em;\n                right: -1.2em;\n                font-size: 8px;\n              }\n            }\n          }\n        }\n\n        .meta {\n          display: flex;\n          align-items: center;\n          width: 100%;\n          overflow: hidden;\n\n          .item {\n            display: inline-block;\n            margin-right: $lg-gap;\n            font-size: $font-size-small;\n            color: $text-divider;\n            @include color-transition();\n            .iconfont {\n              margin-right: $xs-gap;\n              font-size: $font-size-small - 1;\n            }\n\n            &.link {\n              .window {\n                margin-right: 0;\n                margin-left: 2px;\n                font-size: 10px;\n              }\n\n              &:hover {\n                color: $text;\n              }\n            }\n\n            &.location {\n              flex: 1;\n              margin-right: 0;\n              @include text-overflow();\n            }\n          }\n        }\n      }\n    }\n\n    .navigation {\n      width: 3rem;\n      height: 100%;\n      margin-left: $sm-gap;\n      display: flex;\n      flex-direction: column;\n      justify-content: space-between;\n\n      .button {\n        flex: 1;\n        font-size: $font-size-small;\n        text-align: center;\n        color: $text-disabled;\n        @include color-transition();\n        @include common-bg-module();\n        @include radius-box($mini-radius);\n\n        &:not([disabled]):hover {\n          color: $link-color;\n        }\n        &[disabled] {\n          opacity: 0.8;\n          color: $text-divider;\n          cursor: no-drop;\n        }\n\n        &.prev {\n          margin-bottom: $sm-gap;\n          border-top-right-radius: $sm-radius;\n        }\n\n        &.next {\n          border-bottom-right-radius: $sm-radius;\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"index-page\">\n    <carrousel\n      class=\"carrousel\"\n      :articles=\"articleListStore.list.data\"\n      :fetching=\"articleListStore.list.fetching\"\n    />\n    <twitter\n      class=\"twitter\"\n      :userinfo=\"twitterUserinfo.data ?? void 0\"\n      :tweets=\"twitterTweets.data ?? void 0\"\n      :fetching=\"\n        twitterUserinfo.fetching || twitterTweets.fetching || articleListStore.list.fetching\n      \"\n    />\n    <article-list\n      :mammon=\"false\"\n      :fetching=\"articleListStore.list.fetching\"\n      :articles=\"articleListStore.list.data\"\n      :pagination=\"articleListStore.list.pagination\"\n      @loadmore=\"loadmoreArticles\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { useStores } from '/@/stores'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useUniversalFetch, onClient } from '/@/universal'\n  import { scrollToNextScreen } from '/@/utils/scroller'\n  import { LanguageKey } from '/@/language'\n  import { META } from '/@/config/app.config'\n  import ArticleList from '/@/components/flow/desktop/list.vue'\n  import Carrousel from './carrousel.vue'\n  import Twitter from './twitter.vue'\n\n  export default defineComponent({\n    name: 'IndexPage',\n    components: {\n      Carrousel,\n      Twitter,\n      ArticleList\n    },\n    setup() {\n      const { meta, i18n } = useEnhancer()\n      const {\n        articleList: articleListStore,\n        appOption: appOptionStore,\n        twitterUserinfo,\n        twitterTweets\n      } = useStores()\n\n      meta(() => ({\n        title: `${META.title} - ${i18n.t(LanguageKey.APP_SLOGAN)}`,\n        description: appOptionStore.data?.description,\n        keywords: appOptionStore.data?.keywords.join(','),\n        twitterCard: 'summary_large_image'\n      }))\n\n      const loadmoreArticles = async () => {\n        const targetPage = articleListStore.list.pagination!.current_page + 1\n        await articleListStore.fetchList({ page: targetPage })\n        if (targetPage > 1) {\n          onClient(scrollToNextScreen)\n        }\n      }\n\n      useUniversalFetch(() => {\n        return Promise.all([\n          articleListStore.fetchList(),\n          // eslint-disable-next-line @typescript-eslint/no-empty-function\n          twitterUserinfo.fetch().catch(() => {}),\n          // eslint-disable-next-line @typescript-eslint/no-empty-function\n          twitterTweets.fetch().catch(() => {})\n        ])\n      })\n\n      return {\n        twitterUserinfo,\n        twitterTweets,\n        articleListStore,\n        loadmoreArticles\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .index-page {\n    .carrousel,\n    .twitter {\n      margin-bottom: $lg-gap;\n    }\n  }\n</style>\n","<template>\n  <div class=\"header\">\n    <div\n      class=\"background\"\n      :style=\"{\n        backgroundColor,\n        backgroundImage: `url(${backgroundImageUrl})`\n      }\"\n    />\n    <div class=\"content\">\n      <div class=\"logo\">\n        <transition name=\"module\" mode=\"out-in\">\n          <i key=\"date\" class=\"iconfont\" :class=\"icon\"></i>\n        </transition>\n      </div>\n      <div class=\"title\">\n        <transition name=\"module\" mode=\"out-in\">\n          <div class=\"text\"><slot></slot></div>\n        </transition>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed } from 'vue'\n  import { LanguageKey } from '/@/language'\n  import { getTargetCDNURL } from '/@/transforms/url'\n\n  export default defineComponent({\n    name: 'FlowArticleListHeader',\n    props: {\n      backgroundColor: {\n        type: String,\n        default: ''\n      },\n      backgroundImage: {\n        type: String,\n        default: ''\n      },\n      icon: {\n        type: String,\n        required: true\n      }\n    },\n    setup(props) {\n      const backgroundImageUrl = computed(() => {\n        return props.backgroundImage || getTargetCDNURL('/images/thumbnail/carrousel.jpg')\n      })\n\n      return {\n        LanguageKey,\n        backgroundImageUrl\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .header {\n    position: relative;\n    width: 100%;\n    height: 16.4rem;\n    margin-bottom: $lg-gap;\n    color: $white;\n    @include radius-box($lg-radius);\n\n    &:hover {\n      .background {\n        filter: grayscale(0);\n        transform: scale(1.02);\n      }\n      .content {\n        .logo {\n          .iconfont {\n            animation: none;\n            transform: scale(1.05);\n          }\n        }\n      }\n    }\n\n    .background {\n      position: absolute;\n      top: 0;\n      left: 0;\n      z-index: 0;\n      width: 100%;\n      height: 100%;\n      background-color: $module-bg;\n      background-size: cover;\n      background-position: center center;\n      transform: scale(1.05);\n      filter: grayscale(0.3);\n      transition: transform $transition-time-fast, filter $transition-time-fast;\n    }\n\n    .content {\n      position: absolute;\n      top: 0;\n      left: 0;\n      z-index: 1;\n      width: 100%;\n      height: 100%;\n\n      .logo {\n        $size: 12rem;\n        margin: 0;\n        overflow: hidden;\n        height: $size;\n        line-height: $size;\n        text-align: center;\n\n        .iconfont {\n          font-size: 5em;\n          display: inline-block;\n          transform: scale(1.01);\n          @include transform-transition($transition-time-normal);\n        }\n      }\n\n      .title {\n        .text {\n          margin: 0;\n          text-align: center;\n          font-weight: bold;\n          font-size: $font-size-h4 - 1;\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"category-flow-page\">\n    <article-list-header\n      :background-color=\"currentCategoryColor\"\n      :background-image=\"currentCategoryImage\"\n      :icon=\"currentCategoryIcon\"\n    >\n      <i18n v-if=\"currentCategory\">\n        <template #zh>\n          <span>{{ currentCategory.name }}</span>\n          <divider class=\"divider\" type=\"vertical\" />\n          <span>{{ currentCategory.description || '...' }}</span>\n        </template>\n        <template #en>\n          <span>Category</span>\n          <divider class=\"divider\" type=\"vertical\" />\n          <span>{{ firstUpperCase(currentCategory.slug) }}</span>\n        </template>\n      </i18n>\n    </article-list-header>\n    <article-list\n      :fetching=\"articleListStore.list.fetching\"\n      :articles=\"articleListStore.list.data\"\n      :pagination=\"articleListStore.list.pagination\"\n      @loadmore=\"loadmoreArticles\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, watch, onBeforeMount } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useUniversalFetch } from '/@/universal'\n  import { useArticleListStore } from '/@/stores/article'\n  import { useCategoryStore } from '/@/stores/category'\n  import { getExtendValue } from '/@/transforms/state'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { scrollToNextScreen } from '/@/utils/scroller'\n  import ArticleListHeader from '/@/components/flow/desktop/header.vue'\n  import ArticleList from '/@/components/flow/desktop/list.vue'\n\n  export default defineComponent({\n    name: 'CategoryPage',\n    components: {\n      ArticleListHeader,\n      ArticleList\n    },\n    props: {\n      categorySlug: {\n        type: String,\n        required: true\n      }\n    },\n    setup(props) {\n      const { i18n, meta, isZhLang } = useEnhancer()\n      const articleListStore = useArticleListStore()\n      const categoryStore = useCategoryStore()\n      const currentCategory = computed(() => {\n        return categoryStore.data.find((category) => category.slug === props.categorySlug)\n      })\n      const currentCategoryIcon = computed(() => {\n        return getExtendValue(currentCategory.value?.extends || [], 'icon') || 'icon-category'\n      })\n      const currentCategoryImage = computed(() => {\n        return getExtendValue(currentCategory.value?.extends || [], 'background')\n      })\n      const currentCategoryColor = computed(() => {\n        return getExtendValue(currentCategory.value?.extends || [], 'bgcolor')\n      })\n\n      const loadmoreArticles = async () => {\n        await articleListStore.fetchList({\n          category_slug: props.categorySlug,\n          page: articleListStore.list.pagination!.current_page + 1\n        })\n        scrollToNextScreen()\n      }\n\n      meta(() => {\n        const enTitle = firstUpperCase(props.categorySlug)\n        const zhTitle = i18n.t(props.categorySlug)!\n        const titles = isZhLang.value ? [zhTitle, enTitle] : [enTitle, 'Category']\n        const description = currentCategory.value?.description || titles.join(',')\n        return {\n          pageTitle: titles.join(' | '),\n          description,\n          ogType: 'blog'\n        }\n      })\n\n      onBeforeMount(() => {\n        watch(\n          () => props.categorySlug,\n          (category_slug) => articleListStore.fetchList({ category_slug }),\n          { flush: 'post' }\n        )\n      })\n\n      useUniversalFetch(() => articleListStore.fetchList({ category_slug: props.categorySlug }))\n\n      return {\n        articleListStore,\n        currentCategory,\n        currentCategoryIcon,\n        currentCategoryImage,\n        currentCategoryColor,\n        loadmoreArticles,\n        firstUpperCase\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .category-flow-page {\n    .divider {\n      border-color: $white !important;\n    }\n  }\n</style>\n","<template>\n  <div class=\"tag-flow-page\">\n    <article-list-header\n      :background-color=\"currentTagColor\"\n      :background-image=\"currentTagImage\"\n      :icon=\"currentTagIcon\"\n    >\n      <template v-if=\"currentTag\">\n        <span class=\"header\">\n          <i18n>\n            <template #zh>\n              <span>#{{ currentTag.name }}</span>\n              <divider class=\"divider\" type=\"vertical\" />\n              <span>{{ currentTag.description || '...' }}</span>\n            </template>\n            <template #en>\n              <span>Tag</span>\n              <divider class=\"divider\" type=\"vertical\" />\n              <span>#{{ tagEnName(currentTag) }}</span>\n            </template>\n          </i18n>\n        </span>\n      </template>\n    </article-list-header>\n    <article-list\n      :fetching=\"articleListStore.list.fetching\"\n      :articles=\"articleListStore.list.data\"\n      :pagination=\"articleListStore.list.pagination\"\n      @loadmore=\"loadmoreArticles\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, watch, onBeforeMount } from 'vue'\n  import { useUniversalFetch } from '/@/universal'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useArticleListStore } from '/@/stores/article'\n  import { useTagStore, tagEnName } from '/@/stores/tag'\n  import { getExtendValue } from '/@/transforms/state'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { scrollToNextScreen } from '/@/utils/scroller'\n  import ArticleListHeader from '/@/components/flow/desktop/header.vue'\n  import ArticleList from '/@/components/flow/desktop/list.vue'\n\n  export default defineComponent({\n    name: 'TagPage',\n    components: {\n      ArticleListHeader,\n      ArticleList\n    },\n    props: {\n      tagSlug: {\n        type: String,\n        required: true\n      }\n    },\n    setup(props) {\n      const { meta, isZhLang } = useEnhancer()\n      const tagStore = useTagStore()\n      const articleListStore = useArticleListStore()\n      const currentTag = computed(() => tagStore.data.find((tag) => tag.slug === props.tagSlug))\n      const currentTagIcon = computed(\n        () => getExtendValue(currentTag.value?.extends || [], 'icon') || 'icon-tag'\n      )\n      const currentTagImage = computed(() =>\n        getExtendValue(currentTag.value?.extends || [], 'background')\n      )\n      const currentTagColor = computed(() =>\n        getExtendValue(currentTag.value?.extends || [], 'bgcolor')\n      )\n\n      const loadmoreArticles = async () => {\n        await articleListStore.fetchList({\n          tag_slug: props.tagSlug,\n          page: articleListStore.list.pagination!.current_page + 1\n        })\n        scrollToNextScreen()\n      }\n\n      meta(() => {\n        const enTitle = firstUpperCase(props.tagSlug)\n        const zhTitle = currentTag.value?.name!\n        const titles = isZhLang.value ? [zhTitle, enTitle] : [enTitle, 'Tag']\n        const description = currentTag.value?.description || titles.join(',')\n        return {\n          pageTitle: titles.join(' | '),\n          description,\n          ogType: 'blog'\n        }\n      })\n\n      onBeforeMount(() => {\n        watch(\n          () => props.tagSlug,\n          (tag_slug) => articleListStore.fetchList({ tag_slug }),\n          { flush: 'post' }\n        )\n      })\n\n      useUniversalFetch(() => articleListStore.fetchList({ tag_slug: props.tagSlug }))\n\n      return {\n        articleListStore,\n        tagEnName,\n        currentTag,\n        currentTagIcon,\n        currentTagImage,\n        currentTagColor,\n        loadmoreArticles\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .tag-flow-page {\n    .divider {\n      border-color: $white !important;\n    }\n  }\n</style>\n","<template>\n  <div class=\"date-flow-page\">\n    <article-list-header icon=\"icon-clock\">\n      <i18n :zh=\"`发布于 ${date} 的所有文章`\" :en=\"`Articles published at ${date}`\" />\n    </article-list-header>\n    <article-list\n      :fetching=\"articleListStore.list.fetching\"\n      :articles=\"articleListStore.list.data\"\n      :pagination=\"articleListStore.list.pagination\"\n      @loadmore=\"loadmoreArticles\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, watch, onBeforeMount } from 'vue'\n  import { useUniversalFetch } from '/@/universal'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useArticleListStore } from '/@/stores/article'\n  import { scrollToNextScreen } from '/@/utils/scroller'\n  import ArticleListHeader from '/@/components/flow/desktop/header.vue'\n  import ArticleList from '/@/components/flow/desktop/list.vue'\n\n  export default defineComponent({\n    name: 'DatePage',\n    components: {\n      ArticleListHeader,\n      ArticleList\n    },\n    props: {\n      date: {\n        type: String,\n        required: true\n      }\n    },\n    setup(props) {\n      const { meta } = useEnhancer()\n      meta(() => ({\n        pageTitle: `${props.date} | Date`,\n        ogType: 'blog'\n      }))\n\n      const articleListStore = useArticleListStore()\n      const loadmoreArticles = async () => {\n        await articleListStore.fetchList({\n          date: props.date,\n          page: articleListStore.list.pagination!.current_page + 1\n        })\n        scrollToNextScreen()\n      }\n\n      onBeforeMount(() => {\n        watch(\n          () => props.date,\n          (date) => articleListStore.fetchList({ date }),\n          { flush: 'post' }\n        )\n      })\n\n      useUniversalFetch(() => articleListStore.fetchList({ date: props.date }))\n\n      return {\n        articleListStore,\n        loadmoreArticles\n      }\n    }\n  })\n</script>\n","<template>\n  <div class=\"search-flow-page\">\n    <article-list-header icon=\"icon-search\">\n      <i18n\n        :zh=\"`和 “${keyword}” 有关的所有文章`\"\n        :en=\"`Keyword &quot;${keyword}&quot;\\'s result`\"\n      />\n    </article-list-header>\n    <article-list\n      :fetching=\"articleListStore.list.fetching\"\n      :articles=\"articleListStore.list.data\"\n      :pagination=\"articleListStore.list.pagination\"\n      @loadmore=\"loadmoreArticles\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, watch, onBeforeMount } from 'vue'\n  import { useUniversalFetch } from '/@/universal'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useArticleListStore } from '/@/stores/article'\n  import { scrollToNextScreen } from '/@/utils/scroller'\n  import ArticleListHeader from '/@/components/flow/desktop/header.vue'\n  import ArticleList from '/@/components/flow/desktop/list.vue'\n\n  export default defineComponent({\n    name: 'SearchPage',\n    components: {\n      ArticleListHeader,\n      ArticleList\n    },\n    props: {\n      keyword: {\n        type: String,\n        required: true\n      }\n    },\n    setup(props) {\n      const { meta } = useEnhancer()\n      meta(() => ({\n        pageTitle: `${props.keyword} | Search`,\n        ogType: 'blog'\n      }))\n\n      const articleListStore = useArticleListStore()\n      const loadmoreArticles = async () => {\n        await articleListStore.fetchList({\n          keyword: props.keyword,\n          page: articleListStore.list.pagination!.current_page + 1\n        })\n        scrollToNextScreen()\n      }\n\n      onBeforeMount(() => {\n        watch(\n          () => props.keyword,\n          (keyword) => articleListStore.fetchList({ keyword }),\n          { flush: 'post' }\n        )\n      })\n\n      useUniversalFetch(() => articleListStore.fetchList({ keyword: props.keyword }))\n\n      return {\n        articleListStore,\n        loadmoreArticles\n      }\n    }\n  })\n</script>\n","/**\n * @file Date time transformer\n * @module transform.moment\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const cloneDate = (date: Date) => {\n  return new Date(date.getTime())\n}\n\n/** deconstruction date */\nexport type HumanDate = ReturnType<typeof dateToHuman>\nexport const dateToHuman = (date: Date) => {\n  const week = date.getDay()\n  return {\n    day: date.getDate(),\n    week: week === 0 ? 7 : week,\n    month: date.getMonth() + 1,\n    year: date.getFullYear()\n  }\n}\n\nexport const isSameHumanDay = (target: HumanDate, target2: HumanDate) => {\n  const isSameDay = target.day === target2.day\n  const isSameMonth = target.month === target2.month\n  const isSameYear = target.year === target2.year\n  return isSameDay && isSameMonth && isSameYear\n}\n\n/** `HumanData` > `Date` */\nexport const humanToDate = (humanDate: Omit<HumanDate, 'week'>) => {\n  const date = new Date()\n  date.setDate(humanDate.day)\n  date.setFullYear(humanDate.year)\n  date.setMonth(humanDate.month - 1)\n  return date\n}\n\n/** `HumanData` > `YYYY-MM-DD` */\nexport const humanDateToYMD = (\n  { year, month, day }: Partial<Omit<HumanDate, 'week'>>,\n  separator = '-'\n) => {\n  const _month = month ? separator + String(month).padStart(2, '0') : ''\n  const _day = day ? separator + String(day).padStart(2, '0') : ''\n  return `${year}${_month}${_day}`\n}\n\n/** `Date` | `Date string` > `YYYY-MM-DD` */\nexport const dateToYMD = (date: Date | string, separator?: string) => {\n  const _date = typeof date === 'string' ? new Date(date) : date\n  return humanDateToYMD(dateToHuman(_date), separator)\n}\n\n/** `YYYY-MM-DD` > `Date` */\nexport const ymdToDate = (date: string) => {\n  const [year, month, day] = date.split('-').map(Number)\n  return humanToDate({ year, month, day })\n}\n\n/** `Date` | `Date string` > local date string */\nexport const toLocalString = (date: string) => {\n  return date ? new Date(date).toLocaleString() : date\n}\n","/**\n * @file Archive state\n * @module store.archive\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineFetchStore } from './_fetch'\nimport { Article } from './article'\nimport { Category } from './category'\nimport { Tag } from './tag'\nimport { dateToHuman, HumanDate } from '/@/transforms/moment'\nimport nodepress from '/@/services/nodepress'\n\nexport type ArchiveTreeList = Array<{\n  year: number\n  months: Array<{\n    month: number\n    articles: Array<Article & { createAt: HumanDate }>\n  }>\n}>\n\nexport interface Archive {\n  articles: Article[]\n  categories: Category[]\n  tags: Tag[]\n}\n\nexport const useArchiveStore = defineFetchStore({\n  id: 'archive',\n  initData: null as null | Archive,\n  onlyOnce: true,\n  async fetcher() {\n    const response = await nodepress.get<Archive>('/archive')\n    return response.result\n  },\n  getters: {\n    hydrated: (state) => {\n      if (!state.data) {\n        return null\n      }\n\n      const { articles, tags, categories } = state.data\n      const tagMap = new Map<string, Tag>(\n        tags.map((tag) => [tag._id, { ...tag, articles_count: 0 }])\n      )\n      const categoryMap = new Map<string, Category>(\n        categories.map((category) => [category._id, { ...category, articles_count: 0 }])\n      )\n      articles.forEach((article) => {\n        ;(article.tag as any as string[]).forEach((t) => {\n          if (tagMap.has(t)) {\n            tagMap.get(t)!.articles_count++\n          }\n        })\n        ;(article.category as any as string[]).forEach((c) => {\n          if (categoryMap.has(c)) {\n            categoryMap.get(c)!.articles_count++\n          }\n        })\n      })\n\n      return {\n        tags: Array.from(tagMap.values()),\n        categories: Array.from(categoryMap.values())\n      }\n    },\n    tree: (state) => {\n      const rootTree: ArchiveTreeList = []\n\n      state.data?.articles\n        .map((article) => ({\n          ...article,\n          createAt: dateToHuman(new Date(article.create_at))\n        }))\n        .sort(({ create_at: a }, { create_at: b }) => {\n          return Date.parse(b) - Date.parse(a)\n        })\n        .forEach((article) => {\n          const { createAt } = article\n          // year\n          const yearTree = rootTree.find((ye) => ye.year === createAt.year)\n          let targetYear = yearTree\n          if (!targetYear) {\n            targetYear = { year: createAt.year, months: [] }\n            rootTree.push(targetYear)\n          }\n          // month\n          const monthTree = targetYear.months.find((mo) => mo.month === createAt.month)\n          let targetMonth = monthTree\n          if (!targetMonth) {\n            targetMonth = { month: createAt.month, articles: [] }\n            targetYear.months.push(targetMonth)\n          }\n          // article\n          targetMonth.articles.push(article)\n        })\n\n      return rootTree\n    }\n  }\n})\n","<template>\n  <div class=\"banner\" :class=\"{ mobile: isMobile }\">\n    <div\n      class=\"background\"\n      :class=\"{ dark: isDarkTheme }\"\n      :style=\"{ backgroundImage: `url(${imageURL})`, backgroundPositionY: `${position}%` }\"\n    ></div>\n    <div class=\"content\" :class=\"{ blur: Boolean(blur) }\" :style=\"{ '--blur': `${blur}px` }\">\n      <h2 class=\"title\">\n        <slot name=\"title\"></slot>\n      </h2>\n      <div class=\"description\">\n        <slot name=\"description\"></slot>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { getTargetCDNURL } from '/@/transforms/url'\n  import { useEnhancer } from '/@/app/enhancer'\n\n  export default defineComponent({\n    name: 'PageBanner',\n    props: {\n      image: {\n        type: String,\n        required: true\n      },\n      position: {\n        type: Number,\n        default: 20\n      },\n      blur: {\n        type: Number,\n        default: 0\n      },\n      isMobile: {\n        type: Boolean,\n        default: false\n      }\n    },\n    setup(props) {\n      const { isDarkTheme } = useEnhancer()\n      return {\n        isDarkTheme,\n        imageURL: getTargetCDNURL(props.image)\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .banner {\n    position: relative;\n    height: $full-column-page-banner-height;\n    z-index: $z-index-normal;\n\n    .background {\n      position: absolute;\n      z-index: $z-index-underground;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background-color: $module-bg-darker-1;\n      background-size: cover;\n      background-position-x: center;\n      &.dark {\n        filter: brightness(0.8);\n      }\n    }\n\n    .content {\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      text-align: center;\n      color: $white;\n      &.blur {\n        @include backdrop-blur(var(--blur));\n      }\n\n      .title {\n        font-size: 3em;\n        margin-top: 0;\n        margin-bottom: $lg-gap * 2;\n      }\n\n      .description {\n        font-size: $font-size-h4;\n        font-weight: bold;\n      }\n    }\n\n    &.mobile {\n      height: $mobile-banner-height;\n      margin-top: -$lg-gap;\n      margin-left: -$gap;\n      margin-right: -$gap;\n\n      .title {\n        font-size: 2em;\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"archive-tree\">\n    <ul class=\"month-list\" v-for=\"node in tree\" :key=\"node.year\">\n      <li v-for=\"mn in node.months\" :key=\"mn.month\" class=\"month\">\n        <slot\n          name=\"title\"\n          :title=\"\n            !isZhLang\n              ? `${node.year} #${getMonthNameI18n(mn.month).en} (${mn.articles.length})`\n              : `${numberToChinese(node.year)} #${getMonthNameI18n(mn.month).zh}（${\n                  mn.articles.length\n                }）`\n          \"\n        >\n        </slot>\n        <ul class=\"article-list\">\n          <li v-for=\"(article, index) in mn.articles\" :key=\"index\" class=\"article\">\n            <slot\n              name=\"article\"\n              :index=\"index\"\n              :article=\"article\"\n              :day=\"String(article.createAt.day).padStart(2, '0')\"\n            ></slot>\n          </li>\n        </ul>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, PropType } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { Language } from '/@/language'\n  import { numberToChinese } from '/@/transforms/text'\n  import { I18nLanguageMap } from '/@/composables/i18n'\n  import { ArchiveTreeList } from '/@/stores/archive'\n\n  const ms = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']\n  const monthNameI18ns: Array<I18nLanguageMap<Language>> = ms.map((month, index) => ({\n    [Language.English]: month,\n    [Language.Chinese]:\n      index === 9\n        ? '十月'\n        : index == 10\n        ? '十一'\n        : index == 11\n        ? '十二'\n        : numberToChinese(index + 1) + '月'\n  }))\n  const getMonthNameI18n = (number: number) => {\n    return monthNameI18ns[number - 1]\n  }\n\n  export default defineComponent({\n    name: 'ArchiveTree',\n    props: {\n      tree: {\n        type: Array as PropType<ArchiveTreeList>,\n        required: true\n      }\n    },\n    setup() {\n      const { isZhLang } = useEnhancer()\n      return {\n        isZhLang,\n        numberToChinese,\n        getMonthNameI18n\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .archive-tree {\n    .month-list,\n    .article-list {\n      list-style: none;\n      margin: 0;\n      padding: 0;\n    }\n\n    .article-list {\n    }\n  }\n</style>\n","/**\n * @file BFF server config\n * @module config.bff\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const BFF_TUNNEL_PREFIX = '/_tunnel'\nexport const BFF_PROXY_PREFIX = '/_proxy'\nexport const BFF_PROXY_ALLOWLIST = ['https://surmon.me', 'https://cdn.surmon.me']\n\nexport const getBFFServerPort = () => Number(process.env.PORT || 3000)\n","/**\n * @file SSR BFF API Tunnel\n * @module service.tunnel\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport axios, { AxiosInstance } from 'axios'\nimport { BFF_TUNNEL_PREFIX, getBFFServerPort } from '/@/config/bff.config'\nimport { TunnelModule } from '/@/constants/tunnel'\nimport { isServer } from '/@/app/environment'\n\nconst tunnel = axios.create({\n  baseURL: BFF_TUNNEL_PREFIX,\n  proxy: isServer && {\n    host: 'localhost',\n    port: getBFFServerPort()\n  }\n})\n\ntunnel.interceptors.response.use((response) => response.data)\n\nexport default {\n  $: tunnel,\n  request: <T = any>(...args: Parameters<AxiosInstance['request']>): Promise<T> => {\n    return tunnel.request(...args)\n  },\n  dispatch: <T = any>(module: TunnelModule, params?: any): Promise<T> => {\n    return tunnel.get(module, { params })\n  }\n}\n","/**\n * @file Tunnel constant\n * @module constant.tunnel\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport enum TunnelModule {\n  MyGoogleMap = 'my_google_map',\n  TwitterUserInfo = 'twitter_userinfo',\n  TwitterTweets = 'twitter_tweets',\n  TwitterCalendar = 'twitter_calendar',\n  YouTubePlaylist = 'youtube_playlist',\n  YouTubeVideoList = 'youtube_video_list',\n  InstagramMedias = 'instagram_medias',\n  InstagramCalendar = 'instagram_calendar',\n  BingWallpaper = 'bing_wallpaper',\n  GitHubSponsors = 'github_sponsors',\n  GitHubContributions = 'github_contributions',\n  NetEaseMusic = 'netease_music',\n  DoubanMovies = 'douban_movies',\n  OpenSeaAssets = 'opensea_assets',\n  OpenSeaCollections = 'opensea_collections',\n  OpenSourceGitHubStatistic = 'open_source_github_statistic',\n  OpenSourceNPMStatistic = 'open_source_npm_statistic'\n}\n","/**\n * @file Statistic state\n * @module store.statistic\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport nodepress from '/@/services/nodepress'\nimport tunnel from '/@/services/tunnel'\nimport { TunnelModule } from '/@/constants/tunnel'\nimport { defineFetchStore } from './_fetch'\n\nexport interface NodePressStatistic {\n  tags: number\n  articles: number\n  comments: number\n  todayViews: number\n  totalViews: number\n  totalLikes: number\n  averageEmotion: number\n}\nexport const useNodepressStatisticStore = defineFetchStore({\n  id: 'nodepressStatistic',\n  initData: null as null | NodePressStatistic,\n  fetcher() {\n    return nodepress\n      .get<NodePressStatistic>('/expansion/statistic')\n      .then((response) => response.result)\n  }\n})\n\nexport const useGitHubStatisticStore = defineFetchStore({\n  id: 'openSourceGitHubStatisticStore',\n  initData: null,\n  onlyOnce: true,\n  fetcher: () => tunnel.dispatch(TunnelModule.OpenSourceGitHubStatistic)\n})\n\nexport interface NPMStatistic {\n  downloads: Record<string, number>\n  packages: Array<any>\n}\nexport const useNPMStatisticStore = defineFetchStore({\n  id: 'openSourceNPMStatisticStore',\n  initData: null as null | NPMStatistic,\n  onlyOnce: true,\n  fetcher: () => tunnel.dispatch<NPMStatistic>(TunnelModule.OpenSourceNPMStatistic),\n  getters: {\n    totalPackages(state): number {\n      return state.data ? Object.keys(state.data.downloads).length : 0\n    },\n    totalDownloads(state): number {\n      let count = 0\n      if (state.data) {\n        Object.values<number>(state.data.downloads).forEach((c) => {\n          count += c\n        })\n      }\n      return count\n    },\n    averageScore(state) {\n      if (!state.data) {\n        return 0\n      }\n      // https://itnext.io/increasing-an-npm-packages-search-score-fb557f859300\n      let score = 0\n      state.data.packages.forEach((p) => {\n        score += p.score.final\n      })\n      return (score / state.data.packages.length).toFixed(3)\n    }\n  }\n})\n","import { computed } from 'vue'\nimport { useEnhancer } from '/@/app/enhancer'\nimport { useNodepressStatisticStore } from '/@/stores/statistic'\nimport { numberSplit, firstUpperCase } from '/@/transforms/text'\nimport { Language, LanguageKey } from '/@/language'\nimport { META } from '/@/config/app.config'\n\nexport const i18ns = {\n  title: {\n    [Language.Chinese]: '万物之中，希望至美',\n    [Language.English]: 'Hope is a good thing'\n  },\n  description: {\n    [Language.Chinese]: '至美之物，永不凋零',\n    [Language.English]: 'Maybe the best of things and no good thing ever dies'\n  }\n} as const\n\nexport const useArchivePageMeta = () => {\n  const { i18n, meta, isZhLang } = useEnhancer()\n  meta(() => {\n    const enTitle = firstUpperCase(i18n.t(LanguageKey.PAGE_ARCHIVE, Language.English)!)\n    const titles = isZhLang.value ? [i18n.t(LanguageKey.PAGE_ARCHIVE), enTitle] : [enTitle]\n    return {\n      pageTitle: titles.join(' | '),\n      description: `${META.title} 数据归档`,\n      twitterCard: 'summary_large_image',\n      ogType: 'blog'\n    }\n  })\n}\n\nexport const useArchivePageStatistics = () => {\n  const { i18n } = useEnhancer()\n  const store = useNodepressStatisticStore()\n  const statistics = computed(() => ({\n    tags: {\n      icon: 'icon-quill',\n      title: i18n.t(LanguageKey.STATISTIC_TAGS)!,\n      content: numberSplit(store.data?.tags || 0)\n    },\n    articles: {\n      icon: 'icon-quill',\n      title: i18n.t(LanguageKey.STATISTIC_ARTICLES)!,\n      content: numberSplit(store.data?.articles || 0)\n    },\n    comments: {\n      icon: 'icon-comment',\n      title: i18n.t(LanguageKey.STATISTIC_COMMENTS)!,\n      content: numberSplit(store.data?.comments || 0)\n    },\n    todayViews: {\n      icon: 'icon-eye',\n      title: i18n.t(LanguageKey.STATISTIC_TODAY_VIEWS)!,\n      content: numberSplit(store.data?.todayViews || 0)\n    },\n    totalViews: {\n      icon: 'icon-like',\n      title: i18n.t(LanguageKey.STATISTIC_TOTAL_VIEWS)!,\n      content: numberSplit(store.data?.totalViews || 0)\n    },\n    totalLikes: {\n      icon: 'icon-like',\n      title: i18n.t(LanguageKey.STATISTIC_TOTAL_UPVOTES)!,\n      content: numberSplit(store.data?.totalLikes || 0)\n    },\n    averageEmotion: {\n      icon: 'icon-emoji',\n      title: i18n.t(LanguageKey.STATISTIC_AVERAGE_EMOTION)!,\n      content: String(store.data?.averageEmotion ?? '-')\n    }\n  }))\n\n  return {\n    store,\n    fetch: store.fetch,\n    statistics\n  }\n}\n","<template>\n  <div class=\"archive-page\">\n    <page-banner :position=\"32\" image=\"/images/page-archive/banner.jpg\">\n      <template #title>\n        <webfont><i18n v-bind=\"i18ns.title\" /></webfont>\n      </template>\n      <template #description>\n        <i18n v-bind=\"i18ns.description\" />\n      </template>\n    </page-banner>\n    <container class=\"statistic-warpper\">\n      <transition name=\"module\" mode=\"out-in\">\n        <div class=\"skeletons\" v-if=\"statisticFetching\">\n          <skeleton-base class=\"item\" :key=\"s\" v-for=\"s in statistics.length\" />\n        </div>\n        <div class=\"statistics\" v-else>\n          <div class=\"item\" :key=\"index\" v-for=\"(s, index) in statistics\">\n            <p class=\"title\">\n              <span class=\"text\">{{ s.title }}</span>\n              <i class=\"iconfont\" :class=\"s.icon\"></i>\n            </p>\n            <div class=\"content\">{{ s.content }}</div>\n          </div>\n        </div>\n      </transition>\n    </container>\n    <container class=\"archive-warpper\">\n      <placeholder :data=\"archiveStore.data?.articles.length\" :loading=\"archiveStore.fetching\">\n        <template #placeholder>\n          <empty class=\"archive-empty\" key=\"empty\">\n            <i18n :k=\"LanguageKey.ARTICLE_PLACEHOLDER\" />\n          </empty>\n        </template>\n        <template #loading>\n          <ul class=\"archive-skeleton\" key=\"skeleton\">\n            <li v-for=\"item in 3\" :key=\"item\" class=\"item\">\n              <skeleton-line v-for=\"i in 3\" :key=\"i\" class=\"line\" />\n            </li>\n          </ul>\n        </template>\n        <template #default>\n          <archive-tree class=\"archive-content\" :tree=\"archiveStore.tree\" key=\"content\">\n            <template #title=\"{ title }\">\n              <h1 class=\"archive-title\">{{ title }}</h1>\n            </template>\n            <template #article=\"{ article, day }\">\n              <div class=\"archive-article\">\n                <div class=\"left\">\n                  <h3 class=\"title\">\n                    <span class=\"date\">D{{ day }}</span>\n                    <a\n                      class=\"link\"\n                      target=\"_blank\"\n                      :title=\"article.title\"\n                      :href=\"getArticleDetailRoute(article.id)\"\n                    >\n                      {{ article.title }}\n                    </a>\n                  </h3>\n                  <p class=\"description\" v-html=\"article.description\" />\n                </div>\n                <div class=\"metas\">\n                  <div class=\"item views\">\n                    <i class=\"iconfont icon-eye\"></i>\n                    <span class=\"text\">{{ numberSplit(article.meta.views) }}</span>\n                  </div>\n                  <divider type=\"vertical\" />\n                  <div class=\"item likes\">\n                    <i class=\"like-icon iconfont icon-like\"></i>\n                    <span class=\"text\">{{ article.meta.likes }}</span>\n                  </div>\n                  <divider type=\"vertical\" />\n                  <div class=\"item comments\">\n                    <i class=\"iconfont icon-comment\"></i>\n                    <span class=\"text\">{{ article.meta.comments }}</span>\n                  </div>\n                </div>\n              </div>\n            </template>\n          </archive-tree>\n        </template>\n      </placeholder>\n    </container>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, computed, onMounted } from 'vue'\n  import { useUniversalFetch } from '/@/universal'\n  import { useArchiveStore } from '/@/stores/archive'\n  import { LanguageKey } from '/@/language'\n  import { numberSplit } from '/@/transforms/text'\n  import { getArticleDetailRoute } from '/@/transforms/route'\n  import PageBanner from '/@/components/common/banner.vue'\n  import ArchiveTree from './tree.vue'\n  import { i18ns, useArchivePageMeta, useArchivePageStatistics } from './shared'\n\n  export default defineComponent({\n    name: 'DesktopArchivePage',\n    components: {\n      PageBanner,\n      ArchiveTree\n    },\n    setup() {\n      const archiveStore = useArchiveStore()\n      const statisticState = useArchivePageStatistics()\n      const statisticFetching = ref(true)\n      const statistics = computed(() => [\n        statisticState.statistics.value.articles,\n        statisticState.statistics.value.todayViews,\n        statisticState.statistics.value.comments,\n        statisticState.statistics.value.totalLikes,\n        statisticState.statistics.value.averageEmotion\n      ])\n\n      useArchivePageMeta()\n      useUniversalFetch(() => archiveStore.fetch())\n      onMounted(() => {\n        statisticState.fetch().finally(() => {\n          statisticFetching.value = false\n        })\n      })\n\n      return {\n        LanguageKey,\n        i18ns,\n        getArticleDetailRoute,\n        numberSplit,\n        archiveStore,\n        statisticFetching,\n        statistics\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .archive-page {\n    .statistic-warpper {\n      padding: 3rem 0;\n      background-color: $module-bg-translucent;\n\n      .skeletons,\n      .statistics {\n        display: flex;\n        justify-content: space-around;\n        align-items: center;\n      }\n\n      .skeletons {\n        .item {\n          width: 5em;\n          height: 2em;\n        }\n      }\n\n      .statistics {\n        .item {\n          display: inline-flex;\n          flex-direction: column;\n\n          .title {\n            display: flex;\n            align-items: center;\n            margin-bottom: 0;\n\n            .text {\n              text-transform: uppercase;\n              color: $text-secondary;\n            }\n\n            .iconfont {\n              margin-left: $sm-gap;\n              font-size: $font-size-h3;\n              color: $text-divider;\n              opacity: 0.5;\n            }\n          }\n\n          .content {\n            font-size: $font-size-h1 * 1.3;\n            font-weight: bold;\n          }\n        }\n      }\n    }\n\n    .archive-warpper {\n      padding: 3rem 0;\n      overflow: hidden;\n\n      .archive-empty {\n        min-height: 28rem;\n        font-weight: bold;\n      }\n\n      .archive-skeleton {\n        list-style: none;\n        margin: 0;\n        padding: 0;\n\n        .item {\n          width: 100%;\n          padding: 2rem;\n          margin-bottom: 3rem;\n          background-color: $module-bg-translucent;\n          @include radius-box($lg-radius);\n          &:last-child {\n            margin-bottom: 0;\n          }\n\n          .line {\n            height: 2rem;\n            margin-bottom: 2rem;\n            &:last-child {\n              margin-bottom: 0;\n            }\n          }\n        }\n      }\n\n      .archive-content {\n        margin-top: -1rem;\n\n        .archive-title {\n          margin: 2em 0;\n          text-align: center;\n          text-transform: uppercase;\n          letter-spacing: 0.2em;\n        }\n\n        .archive-article {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: $gap * 3;\n          padding-left: $gap * 4;\n          padding-right: $gap * 3;\n\n          .left {\n            .title {\n              margin: $gap 0;\n              .date {\n                display: inline-block;\n                width: 2rem;\n                margin-right: $gap;\n                color: $text-divider;\n                font-size: $font-size-h4;\n                font-weight: bold;\n              }\n\n              .link {\n                @include text-underline(0.4em);\n                text-decoration-color: $text-secondary;\n              }\n            }\n\n            .description {\n              margin-bottom: $gap;\n              padding-left: 3rem;\n            }\n          }\n\n          .metas {\n            margin-left: 2em;\n            display: inline-flex;\n            align-items: center;\n            font-size: $font-size-h4;\n            color: $text-disabled;\n\n            .item {\n              width: 4em;\n              text-align: center;\n              &.views {\n                width: 5em;\n              }\n\n              .iconfont {\n                margin-right: $sm-gap;\n              }\n              .text {\n                font-weight: bold;\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"archive-page\">\n    <page-banner :position=\"80\" :is-mobile=\"true\" image=\"/images/page-archive/banner-mobile.jpg\">\n      <template #title><i18n :k=\"LanguageKey.PAGE_ARCHIVE\" /></template>\n      <template #description><i18n v-bind=\"i18ns.title\" /></template>\n    </page-banner>\n    <div class=\"page-content\">\n      <container class=\"statistic-warpper\">\n        <transition name=\"module\" mode=\"out-in\">\n          <div class=\"skeletons\" v-if=\"statisticFetching\">\n            <skeleton-base class=\"skeleton\" :key=\"s\" v-for=\"s in statistics.length\" />\n          </div>\n          <div class=\"statistics\" v-else>\n            <div class=\"item\" :key=\"index\" v-for=\"(s, index) in statistics\">\n              <p class=\"title\">{{ s.title }}</p>\n              <div class=\"content\">{{ s.content }}</div>\n            </div>\n          </div>\n        </transition>\n      </container>\n      <container class=\"archive-warpper\">\n        <placeholder :data=\"archiveStore.data?.articles.length\" :loading=\"archiveStore.fetching\">\n          <template #placeholder>\n            <empty class=\"archive-empty\" key=\"empty\">\n              <i18n :k=\"LanguageKey.ARTICLE_PLACEHOLDER\" />\n            </empty>\n          </template>\n          <template #loading>\n            <div class=\"archive-skeleton\" key=\"skeleton\">\n              <skeleton-line class=\"item\" :key=\"s\" v-for=\"s in 6\" />\n            </div>\n          </template>\n          <template #default>\n            <archive-tree class=\"archive-content\" :tree=\"archiveStore.tree\" key=\"content\">\n              <template #title=\"{ title }\">\n                <h3 class=\"archive-title\">{{ title }}</h3>\n              </template>\n              <template #article=\"{ article, day }\">\n                <div class=\"archive-article\">\n                  <h4 class=\"title\">\n                    <span class=\"date\">D{{ day }}</span>\n                    <a\n                      class=\"link\"\n                      target=\"_blank\"\n                      :title=\"article.title\"\n                      :href=\"getArticleDetailRoute(article.id)\"\n                    >\n                      {{ article.title }}\n                    </a>\n                  </h4>\n                  <p class=\"description\" v-html=\"article.description\" />\n                </div>\n              </template>\n            </archive-tree>\n          </template>\n        </placeholder>\n      </container>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, computed, onMounted } from 'vue'\n  import { useUniversalFetch } from '/@/universal'\n  import { useArchiveStore } from '/@/stores/archive'\n  import { LanguageKey } from '/@/language'\n  import { getArticleDetailRoute } from '/@/transforms/route'\n  import PageBanner from '/@/components/common/banner.vue'\n  import ArchiveTree from './tree.vue'\n  import { i18ns, useArchivePageMeta, useArchivePageStatistics } from './shared'\n\n  export default defineComponent({\n    name: 'MobileArchivePage',\n    components: {\n      PageBanner,\n      ArchiveTree\n    },\n    setup() {\n      const archiveStore = useArchiveStore()\n      const statisticState = useArchivePageStatistics()\n      const statisticFetching = ref(true)\n      const statistics = computed(() => [\n        statisticState.statistics.value.articles,\n        statisticState.statistics.value.todayViews,\n        statisticState.statistics.value.comments,\n        statisticState.statistics.value.averageEmotion\n      ])\n\n      useArchivePageMeta()\n      useUniversalFetch(() => archiveStore.fetch())\n      onMounted(() => {\n        statisticState.fetch().finally(() => {\n          statisticFetching.value = false\n        })\n      })\n\n      return {\n        LanguageKey,\n        i18ns,\n        getArticleDetailRoute,\n        archiveStore,\n        statisticFetching,\n        statistics\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .archive-page {\n    .statistic-warpper {\n      padding: 2rem;\n      background-color: $module-bg-translucent;\n      border-bottom-left-radius: $lg-radius;\n      border-bottom-right-radius: $lg-radius;\n\n      .skeletons,\n      .statistics {\n        display: flex;\n        justify-content: space-around;\n        align-items: center;\n        width: 100%;\n      }\n\n      .skeleton {\n        width: 3rem;\n        height: 2rem;\n      }\n\n      .statistics {\n        flex-wrap: wrap;\n        justify-content: space-between;\n\n        .item {\n          display: inline-flex;\n          flex-direction: column;\n\n          .title {\n            margin-bottom: $xs-gap;\n            text-transform: uppercase;\n            font-size: $font-size-small;\n            color: $text-secondary;\n          }\n\n          .content {\n            font-size: $font-size-h1;\n            font-weight: bold;\n          }\n        }\n      }\n    }\n\n    .archive-warpper {\n      overflow: hidden;\n      margin-top: $lg-gap;\n\n      .archive-empty {\n        font-weight: bold;\n      }\n\n      .archive-skeleton,\n      .archive-content {\n        background-color: $module-bg-translucent;\n        @include radius-box($lg-radius);\n      }\n\n      .archive-skeleton {\n        padding: 2rem;\n        .item {\n          height: 2rem;\n          margin-bottom: 2rem;\n          &:last-child {\n            margin-bottom: 0;\n          }\n        }\n      }\n\n      .archive-content {\n        padding: 0 3rem;\n        .archive-title {\n          margin: 2em 0;\n          text-align: center;\n          text-transform: uppercase;\n          letter-spacing: 0.1em;\n        }\n\n        .archive-article {\n          margin-bottom: 2em;\n\n          .title {\n            margin-top: 0;\n            margin-bottom: $sm-gap;\n            max-width: 75vw;\n            @include text-overflow();\n\n            .date {\n              display: inline-block;\n              width: 2rem;\n              margin-right: 1rem;\n              color: $text-divider;\n            }\n          }\n\n          .description {\n            margin-bottom: 0;\n            padding-left: 3rem;\n            color: $text-disabled;\n          }\n        }\n      }\n    }\n  }\n</style>\n","/**\n * @file Generate text to QRcode DataURL\n * @module transforms.qrcode\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport QRCode, { QRCodeToDataURLOptions } from 'qrcode'\n\nexport async function renderTextToQRCodeDataURL(value: string, options?: QRCodeToDataURLOptions) {\n  return await QRCode.toDataURL(value, {\n    scale: 6,\n    ...options\n  })\n}\n","/**\n * @file Window opener\n * @module util.opener\n * @author Surmon <https://github.com/surmon-china>\n */\n\nconst baseParams = {\n  scrollbars: 0,\n  status: 0,\n  menubar: 0,\n  resizable: 2,\n  location: 0\n}\n\nconst paramsToString = (params: any = {}) => {\n  return Object.keys(params)\n    .map((k) => `${k}=${params[k]}`)\n    .join(',')\n}\n\nexport interface WindowOpenerOptions {\n  name?: string\n  onClose?(): void\n  closeInterval?: number\n  params?: {\n    [key: string]: string\n  }\n}\nexport const openWindow = (targetURL: string, options: WindowOpenerOptions = {}) => {\n  const { name = '', closeInterval = 268, onClose, params = {} } = options\n  const width = Math.round((screen.availWidth / 6) * 2)\n  const height = Math.round((screen.availHeight / 5) * 2)\n  const top = Math.round((screen.availHeight - height) / 2)\n  const left = Math.round((screen.availWidth - width) / 2)\n  const formParams = { width, height, top, left }\n  const _params = paramsToString({\n    ...baseParams,\n    ...formParams,\n    ...params\n  })\n\n  const _window = window.open(targetURL, name, _params)\n  if (_window) {\n    if (onClose) {\n      const timer = setInterval(() => {\n        if (_window.closed) {\n          clearInterval(timer)\n          onClose()\n        }\n      }, closeInterval)\n    }\n    _window?.focus()\n\n    return _window\n  }\n}\n","/**\n * @file copyright\n * @module effect.copyright\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { META } from '/@/config/app.config'\n\ndeclare global {\n  interface Window {\n    __isEnabledCopyrighter: boolean\n  }\n}\n\nexport const enableCopyrighter = () => {\n  window.__isEnabledCopyrighter = true\n}\n\nexport const disableCopyrighter = () => {\n  window.__isEnabledCopyrighter = false\n}\n\nexport const initCopyrighter = () => {\n  enableCopyrighter()\n\n  const copyText = () => {\n    return [\n      '',\n      '',\n      `作者：${META.author}`,\n      `链接：${location.href}`,\n      `来源：${META.title}`,\n      '著作权归作者所有，商业转载请联系作者获得授权，非商业转载请注明出处。'\n    ].join('\\n')\n  }\n\n  const buildText = (content) => content + copyText()\n  const buildHtml = (content) => content + copyText()\n\n  document.addEventListener('copy', (event) => {\n    if (!window.getSelection) return\n    if (window.__isEnabledCopyrighter) {\n      const content = window.getSelection()?.toString()\n      event.clipboardData?.setData('text/plain', buildText(content))\n      event.clipboardData?.setData('text/html', buildHtml(content))\n      event.preventDefault()\n    }\n  })\n}\n","/**\n * @file Clipboard util\n * @module util.clipboard\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { enableCopyrighter, disableCopyrighter } from '/@/effects/copyright'\n\nexport const read = () => navigator.clipboard.readText()\nexport const copy = (text: string) => {\n  disableCopyrighter()\n  // https://www.w3.org/TR/clipboard-apis/#async-clipboard-api\n  // MARK: only https site\n  return window.navigator.clipboard?.writeText(text).finally(() => {\n    enableCopyrighter()\n  })\n}\n\nexport default { copy, read }\n","<template>\n  <div class=\"share\">\n    <button\n      class=\"share-ejector\"\n      v-for=\"(social, index) in enabledSocials\"\n      :key=\"index\"\n      :title=\"'Share to: ' + social.name\"\n      :class=\"social.class\"\n      @click=\"handleShare(social)\"\n    >\n      <i class=\"iconfont\" :class=\"`icon-${social.class}`\" />\n    </button>\n    <button class=\"share-ejector link\" title=\"Copy link\" @click=\"copyPageURL\">\n      <i class=\"iconfont icon-link\"></i>\n    </button>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import qs from 'qs'\n  import { defineComponent, PropType, computed } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { LanguageKey } from '/@/language'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { renderTextToQRCodeDataURL } from '/@/transforms/qrcode'\n  import { getPageURL } from '/@/transforms/url'\n  import { openWindow } from '/@/utils/opener'\n  import { copy } from '/@/utils/clipboard'\n  import { META } from '/@/config/app.config'\n\n  export enum SocialMedia {\n    Wechat = 'wechat',\n    Weibo = 'weibo',\n    Twitter = 'twitter',\n    douban = 'douban',\n    Evernote = 'evernote',\n    Facebook = 'facebook',\n    LinkedIn = 'linkedin'\n  }\n\n  interface ShareParams {\n    url: string\n    title: string\n    description: string\n  }\n\n  interface SocialItem {\n    id: SocialMedia\n    name: string\n    class: string\n    handler?(share: ShareParams): void\n    url?(share: ShareParams): string\n  }\n\n  const socials: SocialItem[] = [\n    {\n      id: SocialMedia.Wechat,\n      name: '微信',\n      class: 'wechat',\n      handler: async (share) => {\n        const dataURL = await renderTextToQRCodeDataURL(share.url)\n        window.$popup.vImage(dataURL)\n      }\n    },\n    {\n      id: SocialMedia.Weibo,\n      name: '微博',\n      class: 'weibo',\n      url: (share) => {\n        return (\n          `https://service.weibo.com/share/share.php?` +\n          qs.stringify({\n            url: share.url,\n            source: share.url,\n            sourceUrl: share.url,\n            title: share.title,\n            content: share.description\n          })\n        )\n      }\n    },\n    {\n      id: SocialMedia.Twitter,\n      name: 'Twitter',\n      class: 'twitter',\n      url: (share) => {\n        return (\n          `https://twitter.com/share?` +\n          qs.stringify({\n            url: share.url,\n            text: share.title\n          })\n        )\n      }\n    },\n    {\n      id: SocialMedia.Facebook,\n      name: 'Facebook',\n      class: 'facebook',\n      url: (share) => {\n        return (\n          `https://www.facebook.com/sharer/sharer.php?` +\n          qs.stringify({\n            u: encodeURI(share.url)\n          })\n        )\n      }\n    },\n    {\n      id: SocialMedia.LinkedIn,\n      name: 'LinkedIn',\n      class: 'linkedin',\n      url: (share) => {\n        return (\n          `https://www.linkedin.com/sharing/share-offsite/?` +\n          qs.stringify({\n            url: share.url\n          })\n        )\n      }\n    },\n    {\n      id: SocialMedia.douban,\n      name: '豆瓣',\n      class: 'douban',\n      url: (share) => {\n        return (\n          // https://www.douban.com/service/sharebutton\n          `https://www.douban.com/recommend/?` +\n          qs.stringify({\n            url: share.url,\n            title: share.title,\n            v: 1\n          })\n        )\n      }\n    },\n    {\n      id: SocialMedia.Evernote,\n      name: '印象笔记',\n      class: 'evernote',\n      url: (share) => {\n        return (\n          `https://www.evernote.com/clip.action?` +\n          qs.stringify({\n            url: share.url,\n            title: share.title\n          })\n        )\n      }\n    }\n  ]\n\n  export default defineComponent({\n    name: 'Share',\n    props: {\n      socials: {\n        type: Array as PropType<Array<SocialMedia>>,\n        required: false\n      }\n    },\n    setup(props) {\n      const { route, gtag, i18n, isZhLang } = useEnhancer()\n      const enabledSocials = computed(() => {\n        return props.socials?.length\n          ? socials.filter((s) => props.socials?.includes(s.id))\n          : socials\n      })\n\n      const getURL = () => getPageURL(route.fullPath)\n      const getTitle = () => document.title || META.title\n      const getDescription = () => {\n        return (\n          document.getElementsByName('description')?.[0]?.getAttribute('content') ||\n          i18n.t(LanguageKey.APP_SLOGAN)!\n        )\n      }\n\n      const copyPageURL = () => {\n        const content = `${getTitle()} - ${getURL()}`\n        copy(content).then(() => {\n          alert(isZhLang.value ? '链接已复制到剪贴板！' : 'Link copied!')\n        })\n        gtag?.event('share_copy_url', {\n          event_category: GAEventCategories.Share,\n          event_label: content\n        })\n      }\n\n      const handleShare = (social: SocialItem) => {\n        gtag?.event('share_social', {\n          event_category: GAEventCategories.Share,\n          event_label: social.id\n        })\n\n        const shareParams: ShareParams = {\n          url: getURL(),\n          title: getTitle(),\n          description: getDescription()\n        }\n\n        if (social.handler) {\n          social.handler(shareParams)\n        } else {\n          openWindow(social.url!(shareParams), { name: `Share: ${META.title}` })\n        }\n      }\n\n      return {\n        enabledSocials,\n        copyPageURL,\n        handleShare\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .share {\n    @include visibility-transition();\n\n    > .share-ejector {\n      cursor: pointer;\n      display: inline-block;\n      text-align: center;\n      @include background-transition();\n\n      &.wechat:hover {\n        background-color: $wechat-primary !important;\n      }\n      &.weibo:hover {\n        background-color: $weibo-primary !important;\n      }\n      &.douban:hover {\n        background-color: $douban-primary !important;\n      }\n      &.evernote:hover {\n        background-color: $evernote-primary !important;\n      }\n      &.twitter:hover {\n        background-color: $twitter-primary-hover !important;\n      }\n      &.facebook:hover {\n        background-color: $facebook-primary !important;\n      }\n      &.linkedin:hover {\n        background-color: $linkedin-primary !important;\n      }\n      &.link:hover {\n        background-color: $surmon !important;\n      }\n\n      &:hover {\n        > .iconfont {\n          color: $white;\n        }\n      }\n\n      > .iconfont {\n        display: block;\n      }\n    }\n  }\n</style>\n","/**\n * @file comment helper\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { getTargetCDNURL } from '/@/transforms/url'\n\nexport const EMOJIS = [\n  ...['😃', '😂', '😅', '😉', '😌', '😔', '😓', '😢', '😍', '😘', '😜', '😡'],\n  ...['😤', '😭', '😱', '😳', '😵', '🌚'],\n  ...['🙏', '👆', '👇', '👌', '🤘', '👍', '👎', '💪', '👏'],\n  ...['🌻', '🌹', '💊', '🐶', '❤️‍🔥', '💔', '💩', '👻', '🚩']\n]\n\nexport enum CommentEvents {\n  Sort = 'sort',\n  Page = 'page',\n  Vote = 'vote',\n  Blossom = 'blossom',\n  Delete = 'delete',\n  Reply = 'reply',\n  CancelReply = 'cancelReply',\n  Submit = 'submit'\n}\n\nexport const getDisqusUserURL = (username: string) => {\n  return `https://disqus.com/by/${username}/`\n}\n\nconst HAHA_KEYWORDS = ['2333', 'haha', '哈哈']\nconst SIX_KEYWORDS = ['666', '赞', '棒', '优秀']\nconst HEHE_KEYWORDS = ['呵呵']\n\nexport const luanchEmojiRain = (content: string) => {\n  const luanchRain = (window as any).$luanchEmojiRain\n  if (HAHA_KEYWORDS.find((keyword) => content.includes(keyword))) {\n    luanchRain({\n      speed: 12,\n      staggered: true,\n      increaseSpeed: 0.4,\n      emoji: getTargetCDNURL('/images/emojis/haha.png')\n    })\n  } else if (SIX_KEYWORDS.find((keyword) => content.includes(keyword))) {\n    luanchRain({\n      speed: 12,\n      staggered: true,\n      increaseSpeed: 0.4,\n      emoji: getTargetCDNURL('/images/emojis/666.png')\n    })\n  } else if (HEHE_KEYWORDS.find((keyword) => content.includes(keyword))) {\n    luanchRain({\n      staggered: false,\n      speed: 8,\n      increaseSpeed: 0.04,\n      emoji: getTargetCDNURL('/images/emojis/hehe.png')\n    })\n  } else if (Math.random() <= 0.5) {\n    // 否则以 50% 的概率随机出现\n    luanchRain({\n      scale: 0.6,\n      staggered: true,\n      speed: 8,\n      increaseSpeed: 0.04,\n      emoji: getTargetCDNURL('/images/emojis/doge.png')\n    })\n  }\n}\n","<template>\n  <placeholder :loading=\"fetching\">\n    <template #loading>\n      <div class=\"topbar-skeleton\" key=\"skeleton\">\n        <div class=\"left\">\n          <skeleton-line class=\"skeleton-item count\" />\n          <skeleton-line class=\"skeleton-item sort\" v-if=\"!plain\" />\n        </div>\n        <div class=\"right\">\n          <skeleton-line class=\"skeleton-item user\" />\n        </div>\n      </div>\n    </template>\n    <template #default>\n      <div class=\"topbar\" :class=\"{ plain }\" key=\"element\">\n        <div class=\"statistics\">\n          <div class=\"total\" :class=\"{ loading }\">\n            <i class=\"iconfont icon-discussion\"></i>\n            <i18n>\n              <template #zh>\n                共 <span class=\"count\">{{ statisticsText }}</span> 条看法\n              </template>\n              <template #en>\n                <span class=\"count\">{{ statisticsText }}</span> comments\n              </template>\n            </i18n>\n          </div>\n          <select class=\"sort\" name=\"sort\" :value=\"sort\" @change=\"handleSort($event.target)\">\n            <option :value=\"SortType.Desc\">\n              <i18n :k=\"LanguageKey.COMMENT_SORT_NEW\" />\n            </option>\n            <option :value=\"SortType.Hottest\">\n              <i18n :k=\"LanguageKey.COMMENT_SORT_HOT\" />\n            </option>\n            <option :value=\"SortType.Asc\">\n              <i18n :k=\"LanguageKey.COMMENT_SORT_OLD\" />\n            </option>\n          </select>\n          <button class=\"disqus\" @click=\"handleDisqusThread\">\n            <i class=\"iconfont icon-disqus-logo\"></i>\n          </button>\n        </div>\n        <div class=\"user\">\n          <div class=\"unlogin\" v-if=\"user.type === UserType.Null\">\n            <span class=\"guest\">\n              <i18n zh=\"访客身份\" en=\"Guest\" />\n            </span>\n            <divider type=\"vertical\" size=\"sm\" />\n            <button class=\"disqus\" @click=\"handleDisqusLogin\">\n              <i18n>\n                <template #zh>使用<i class=\"iconfont icon-disqus\"></i>登录</template>\n                <template #en>Login by<i class=\"iconfont icon-disqus right\"></i></template>\n              </i18n>\n            </button>\n          </div>\n          <div class=\"logined\" v-else>\n            <template v-if=\"user.type === UserType.Local\">\n              <div class=\"name\">\n                <i class=\"icon guest iconfont icon-user\"></i>\n                <span class=\"text\">{{ user.localProfile?.name || '' }}</span>\n                <i class=\"arrow iconfont icon-down-arrow\"></i>\n              </div>\n              <div class=\"user-menu\">\n                <ul class=\"menus\">\n                  <li class=\"item\">\n                    <button class=\"button\" @click=\"handleDisqusLogin\">\n                      <i18n>\n                        <template #zh>换为<i class=\"iconfont icon-disqus disqus\"></i>登录</template>\n                        <template #en\n                          >Login by <i class=\"iconfont icon-disqus disqus\"></i\n                        ></template>\n                      </i18n>\n                    </button>\n                  </li>\n                  <li class=\"item\">\n                    <button class=\"button\" @click=\"handleClearLocalProfile\">\n                      <i18n zh=\"退出本地访客身份\" en=\"Clean local profile\" />\n                    </button>\n                  </li>\n                </ul>\n              </div>\n            </template>\n            <template v-else-if=\"user.type === UserType.Disqus\">\n              <div class=\"name\">\n                <i class=\"icon disqus iconfont icon-disqus-logo\"></i>\n                <span class=\"text\">{{ user.disqusProfile?.name || '' }}</span>\n                <i class=\"arrow iconfont icon-down-arrow\"></i>\n              </div>\n              <div class=\"user-menu\">\n                <ul class=\"menus\">\n                  <li class=\"item\">\n                    <ulink class=\"button\" :href=\"user.disqusProfile.profileUrl\">\n                      <i18n zh=\"访问 Disqus 主页\" en=\"Disqus profile\" />\n                    </ulink>\n                  </li>\n                  <li class=\"item\">\n                    <button class=\"button\" @click=\"handleDisqusLogout\">\n                      <i18n zh=\"注销授权身份\" en=\"Disqus logout\" />\n                    </button>\n                  </li>\n                </ul>\n              </div>\n            </template>\n          </div>\n        </div>\n      </div>\n    </template>\n  </placeholder>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, PropType } from 'vue'\n  import { META, VALUABLE_LINKS } from '/@/config/app.config'\n  import { LanguageKey } from '/@/language'\n  import { SortType } from '/@/constants/state'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { UserType, useIdentityStore } from '/@/stores/identity'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { openWindow } from '/@/utils/opener'\n  import nodepress from '/@/services/nodepress'\n  import { CommentEvents } from './helper'\n\n  export default defineComponent({\n    name: 'CommentTopbar',\n    props: {\n      postId: {\n        type: Number,\n        required: true\n      },\n      sort: {\n        type: Number as PropType<SortType>,\n        required: true\n      },\n      total: {\n        type: Number,\n        default: 0,\n        required: false\n      },\n      loaded: {\n        type: Number,\n        default: 0,\n        required: false\n      },\n      fetching: {\n        type: Boolean,\n        required: true\n      },\n      loading: {\n        type: Boolean,\n        required: true\n      },\n      plain: {\n        type: Boolean,\n        default: false\n      }\n    },\n    emits: [CommentEvents.Sort],\n    setup(props, context) {\n      const { gtag } = useEnhancer()\n      const identity = useIdentityStore()\n      const user = computed(() => identity.user)\n      const statisticsText = computed(() => {\n        return props.loading ? `···` : `${props.loaded} / ${props.total}`\n      })\n\n      const disqusThreadMap = new Map<number, any>()\n      const handleDisqusThread = async () => {\n        gtag?.event('disqus_thread_page', {\n          event_category: GAEventCategories.Comment,\n          event_label: `id: ${props.postId}`\n        })\n\n        if (!disqusThreadMap.has(props.postId)) {\n          const response = await nodepress.get('/disqus/thread', {\n            params: { post_id: props.postId }\n          })\n          disqusThreadMap.set(props.postId, response.result)\n        }\n\n        const forum = identity.disqusConfig.forum\n        const slug = disqusThreadMap.get(props.postId).slug\n        window.open(`https://disqus.com/home/discussion/${forum}/${slug}/`)\n      }\n\n      const handleSort = (target: any) => {\n        gtag?.event('comment_sort_switch', {\n          event_category: GAEventCategories.Comment\n        })\n\n        const value = Number(target?.value)\n        if (value !== props.sort) {\n          context.emit(CommentEvents.Sort, value)\n        }\n      }\n\n      const handleDisqusLogin = () => {\n        gtag?.event('disqus_login', {\n          event_category: GAEventCategories.Comment,\n          event_label: `id: ${props.postId}`\n        })\n\n        openWindow(identity.disqusConfig.authorize_url, {\n          name: `Disqus Auth ${META.title}`,\n          onClose: () => {\n            identity.fetchDisqusUserInfo()\n            console.info('[disqus]', 'logined', identity.user)\n          }\n        })\n      }\n\n      const handleDisqusLogout = () => {\n        gtag?.event('disqus_logout', {\n          event_category: GAEventCategories.Comment,\n          event_label: `id: ${props.postId}`\n        })\n        console.log('[disqus]', 'logout')\n        identity.fetchDisqusLogout()\n      }\n\n      const handleClearLocalProfile = () => {\n        identity.removeLocalUser()\n      }\n\n      return {\n        user,\n        statisticsText,\n        VALUABLE_LINKS,\n        LanguageKey,\n        UserType,\n        SortType,\n        handleSort,\n        handleDisqusLogin,\n        handleDisqusLogout,\n        handleDisqusThread,\n        handleClearLocalProfile\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n  $topbar-size: 2em;\n\n  .topbar,\n  .topbar-skeleton {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n  }\n\n  .topbar-skeleton {\n    .left,\n    .right {\n      height: $topbar-size;\n    }\n    .skeleton-item {\n      &.count {\n        width: 12rem;\n        margin-right: $gap;\n      }\n      &.sort {\n        width: 8rem;\n      }\n      &.user {\n        width: 8rem;\n      }\n    }\n\n    .left {\n      display: flex;\n    }\n  }\n\n  .topbar {\n    &.plain {\n      flex-direction: column;\n      align-items: baseline;\n      height: 6rem;\n    }\n\n    .statistics {\n      display: flex;\n      height: $topbar-size;\n      line-height: $topbar-size;\n\n      .total {\n        padding: 0;\n        padding-right: 0.6em;\n        background-color: $module-bg-darker-1;\n        @include radius-box($xs-radius);\n        will-change: width;\n        transition: all $transition-time-fast;\n        max-width: 180px;\n        &.loading {\n          max-width: 130px;\n        }\n\n        .iconfont {\n          display: inline-block;\n          width: $topbar-size;\n          height: $topbar-size;\n          text-align: center;\n          margin-right: $xs-gap;\n          background-color: $module-bg-darker-2;\n          @include background-transition();\n        }\n\n        .count {\n          font-weight: bold;\n          margin: 0 $xs-gap;\n        }\n      }\n\n      .sort,\n      .disqus {\n        margin-left: $gap;\n        background-color: $module-bg-darker-1;\n        @include radius-box($xs-radius);\n        cursor: pointer;\n        &:hover {\n          background-color: $module-bg-darker-2;\n        }\n      }\n\n      .sort {\n        padding: 0 $xs-gap;\n        font-weight: bold;\n      }\n\n      .disqus {\n        width: $topbar-size;\n        text-align: center;\n        &:hover {\n          color: $white;\n          background-color: $disqus-primary;\n        }\n      }\n    }\n\n    .user {\n      .unlogin {\n        display: flex;\n        align-items: center;\n\n        .disqus {\n          padding-top: 2px;\n          padding-bottom: 2px;\n          border-top: 1px solid transparent;\n          border-bottom: 1px solid transparent;\n          &:hover {\n            .iconfont {\n              font-weight: normal;\n            }\n            font-weight: bold;\n            border-bottom-color: $text-secondary;\n          }\n\n          .iconfont {\n            margin: 0 $sm-gap;\n            color: $disqus-primary;\n            font-size: $font-size-small;\n            &.right {\n              margin-right: 0;\n            }\n          }\n        }\n      }\n\n      .logined {\n        position: relative;\n        display: inline-block;\n        cursor: pointer;\n        &:hover {\n          .name {\n            background-color: $module-bg-darker-2;\n          }\n          .user-menu {\n            display: block;\n          }\n        }\n\n        .name {\n          padding: 0 $gap;\n          height: $topbar-size;\n          display: flex;\n          align-items: center;\n          background-color: $module-bg-darker-1;\n          @include radius-box($xs-radius);\n\n          .icon {\n            &.disqus {\n              font-size: $font-size-h4;\n              color: $disqus-primary;\n            }\n          }\n\n          .text {\n            margin-right: $xs-gap;\n            margin-left: $sm-gap;\n            font-weight: bold;\n          }\n\n          .arrow {\n            color: $text-divider;\n            font-size: $font-size-small;\n          }\n        }\n\n        .user-menu {\n          display: none;\n          position: absolute;\n          right: 0;\n          padding-top: 0.5em;\n          z-index: $z-index-normal + 1;\n          .menus {\n            margin: 0;\n            padding: 0;\n            list-style: none;\n            @include radius-box($xs-radius);\n\n            .item {\n              .button {\n                white-space: nowrap;\n                display: block;\n                width: 100%;\n                padding: 0 $gap;\n                line-height: 2.3em;\n                text-align: right;\n                font-size: $font-size-small;\n                background-color: $module-bg-darker-2;\n                &:hover {\n                  background-color: $module-bg-darker-3;\n                }\n\n                .iconfont {\n                  &.disqus {\n                    color: $disqus-primary;\n                    font-size: 10px;\n                    margin: 0 $xs-gap;\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <placeholder :loading=\"fetching\" :data=\"hasData\">\n    <template #loading>\n      <ul class=\"main-skeleton\">\n        <li v-for=\"item in skeletonCount\" :key=\"item\" class=\"item\">\n          <div class=\"avatar\">\n            <skeleton-base />\n          </div>\n          <div class=\"content\">\n            <skeleton-paragraph :lines=\"4\" />\n          </div>\n        </li>\n      </ul>\n    </template>\n    <template #placeholder>\n      <div class=\"list-empty\">\n        <i18n :k=\"LanguageKey.COMMENT_LIST_EMPTY\" />\n      </div>\n    </template>\n    <template #default>\n      <div class=\"main\">\n        <slot name=\"list\"></slot>\n        <slot name=\"pagination\"></slot>\n      </div>\n    </template>\n  </placeholder>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { LanguageKey } from '/@/language'\n\n  export default defineComponent({\n    name: 'CommentMain',\n    props: {\n      fetching: {\n        type: Boolean,\n        default: false\n      },\n      hasData: {\n        type: Boolean,\n        required: true\n      },\n      skeletonCount: {\n        type: Number,\n        default: 6\n      }\n    },\n    setup() {\n      return {\n        LanguageKey\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .main-skeleton {\n    padding: 0;\n\n    .item {\n      display: flex;\n      justify-content: space-around;\n      align-items: center;\n      margin-bottom: $lg-gap;\n\n      .avatar {\n        width: 5rem;\n        height: 5rem;\n      }\n\n      .content {\n        width: calc((100% - 5rem) * 0.9);\n      }\n    }\n  }\n\n  .list-empty {\n    color: $text-secondary;\n    font-weight: bold;\n    text-align: center;\n    line-height: 4rem;\n  }\n</style>\n","/**\n * @file Avatar\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { ProxyModule } from '/@/constants/proxy'\nimport { getTargetCDNURL, getTargetProxyURL } from '/@/transforms/url'\nimport { isSPA } from '/@/app/environment'\nimport { isDev } from '/@/environment'\n\nexport const getDefaultAvatar = () => {\n  return getTargetCDNURL('/images/gravatar.png')\n}\n\nexport const getGravatarByHash = (hash?: string | null) => {\n  if (!hash) {\n    return getDefaultAvatar()\n  }\n\n  const target = `https://www.gravatar.com/avatar/${hash}`\n  return isDev ? target : getTargetProxyURL(target, ProxyModule.Default)\n}\n\nexport const getDisqusAvatarByUsername = (username: string) => {\n  // https://disqus.com/api/docs/images/\n  const target = `https://disqus.com/api/users/avatars/${username}.jpg`\n  return isSPA ? target : getTargetProxyURL(target, ProxyModule.Disqus)\n}\n","<template>\n  <section\n    ref=\"element\"\n    v-html=\"markdownHTML\"\n    :class=\"[\n      plain ? 'global-markdown-plain' : 'global-markdown-html',\n      { compact, dark: isDarkTheme }\n    ]\"\n  ></section>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, PropType } from 'vue'\n  import { TagMap } from '/@/stores/tag'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useLozad } from '/@/composables/lozad'\n  import { markdownToHTML } from '/@/transforms/markdown'\n\n  export default defineComponent({\n    name: 'Markdown',\n    props: {\n      markdown: String,\n      html: String,\n      tagMap: Object as PropType<TagMap>,\n      relink: {\n        type: Boolean,\n        default: false\n      },\n      sanitize: {\n        type: Boolean,\n        default: false\n      },\n      plain: {\n        type: Boolean,\n        default: false\n      },\n      compact: {\n        type: Boolean,\n        default: false\n      }\n    },\n    setup(props) {\n      const { isDarkTheme } = useEnhancer()\n      const { element } = useLozad()\n\n      const markdownHTML = computed<string>(() => {\n        if (!props.markdown) {\n          return props.html || ''\n        }\n        return markdownToHTML(props.markdown, {\n          sanitize: props.sanitize,\n          relink: props.relink,\n          tagMap: props.tagMap\n        })\n      })\n\n      return {\n        element,\n        isDarkTheme,\n        markdownHTML\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\">\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .global-markdown-plain {\n    p {\n      margin: 0;\n      max-width: 100%;\n      @include text-overflow();\n    }\n\n    a {\n      @include text-underline();\n    }\n  }\n\n  .global-markdown-html {\n    font-size: $font-size-base * 1.05;\n\n    /* for google adsense */\n    .google-auto-placed {\n      margin-bottom: $sm-gap;\n    }\n\n    p {\n      margin-bottom: 1em;\n    }\n\n    p {\n      line-height: 2.2em;\n      text-indent: 2em;\n    }\n\n    a {\n      margin: 0;\n      font-weight: bold;\n      @include text-underline();\n      &.image-link {\n        margin: 0;\n        border: 0;\n      }\n    }\n\n    u {\n      text-underline-offset: 0.5em;\n      text-decoration-thickness: from-font;\n      text-decoration-style: dashed;\n    }\n\n    h1,\n    h2,\n    h3,\n    h4,\n    h5,\n    h6 {\n      line-height: 1.8em;\n      font-weight: 700;\n      text-indent: 0;\n    }\n\n    blockquote {\n      border-radius: $xs-radius;\n      p {\n        &:last-child {\n          margin-bottom: 0;\n        }\n      }\n    }\n\n    ul {\n      list-style-type: square;\n    }\n\n    ul:not(.code-lines),\n    ol {\n      > li {\n        line-height: 2em;\n        padding: 0.5em 0.8em;\n        border-radius: $xs-radius;\n        &:hover {\n          background-color: $module-bg-darker-1;\n        }\n\n        > p {\n          text-indent: 0;\n        }\n\n        > ol {\n          list-style: lower-alpha;\n        }\n\n        > ul,\n        > ol {\n          list-style: circle;\n          padding-left: 2em;\n          margin-top: $sm-gap;\n          &:last-child {\n            margin-bottom: 0;\n          }\n        }\n\n        &:last-child {\n          > ul,\n          > ol {\n            margin-bottom: -$sm-gap;\n          }\n        }\n      }\n    }\n\n    table {\n      border-radius: $xs-radius;\n      overflow: hidden;\n    }\n\n    iframe {\n      width: 100%;\n      min-height: 320px;\n      margin-bottom: 1em;\n      padding: $sm-gap;\n      border-radius: $xs-radius;\n      border: 1px solid $module-bg-darker-1;\n    }\n\n    .figure-wrapper {\n      width: 100%;\n      margin-bottom: 1em;\n      display: flex;\n      justify-content: center;\n      overflow: hidden;\n      text-align: center;\n      > figure {\n        display: block;\n      }\n    }\n\n    figure.image {\n      position: relative;\n      border-radius: $xs-radius;\n      border: 1px solid $module-bg-darker-1;\n      text-indent: 0;\n      text-align: center;\n\n      .placeholder {\n        visibility: hidden;\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        pointer-events: none;\n      }\n\n      img {\n        display: block;\n        max-width: 100%;\n        padding: $sm-gap;\n        color: transparent;\n        cursor: pointer;\n        transition: opacity $transition-time-fast;\n        &:hover {\n          opacity: 0.9;\n        }\n      }\n\n      figcaption {\n        display: block;\n        border-top: 1px dashed $module-bg-darker-1;\n        text-align: center;\n        line-height: $gap * 3;\n        font-size: $font-size-small;\n        font-weight: bold;\n        /* font-style: italic; */\n        user-select: none;\n        pointer-events: none;\n      }\n\n      &[data-status='loaded'] {\n        width: auto;\n        img {\n          min-width: auto;\n          min-height: auto;\n        }\n      }\n\n      &[data-status='loading'],\n      &[data-status='error'] {\n        width: 100%;\n\n        /* image size */\n        img {\n          min-height: 6rem;\n        }\n\n        /* placeholder size */\n        &.caption {\n          .placeholder {\n            padding-bottom: $gap * 3;\n          }\n        }\n      }\n\n      &[data-status='error'] {\n        /* show custom failed icon */\n        .placeholder.error {\n          visibility: visible;\n          font-size: $font-size-h1 * 1.8;\n          color: $text-divider;\n        }\n        /* hide original image failed icon when error */\n        img {\n          width: 100%;\n          opacity: 0;\n        }\n      }\n\n      /* loading animation */\n      &[data-status='loading'] {\n        .placeholder.loading {\n          visibility: visible;\n\n          @keyframes loading {\n            0% {\n              opacity: 1;\n            }\n            50% {\n              opacity: 0.5;\n            }\n            100% {\n              opacity: 1;\n            }\n          }\n\n          div {\n            width: 2rem;\n            height: 1.2rem;\n            margin: 0 $sm-gap;\n            border-radius: $mini-radius;\n            animation: loading 1s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n            &:nth-child(1) {\n              background: $module-bg-darker-2;\n              animation-delay: -0.6s;\n            }\n            &:nth-child(2) {\n              background: $module-bg-darker-3;\n              animation-delay: -0.4s;\n            }\n            &:nth-child(3) {\n              background: $module-bg-darker-2;\n              animation-delay: -0.2s;\n            }\n            &:nth-child(4) {\n              background: $module-bg-darker-3;\n              animation-delay: -1s;\n            }\n          }\n        }\n      }\n    }\n\n    .checkbox {\n      margin: 0 $xs-gap;\n      &.checked {\n        color: $theme-black;\n      }\n    }\n\n    code {\n      vertical-align: middle;\n      padding: 0.2em 0.4em 0.14em;\n      margin: 0;\n      border-radius: $sm-radius;\n      font-size: 95%;\n    }\n\n    pre {\n      $code-header-height: 2.8rem;\n      $code-number-width: 3rem;\n      $code-row-line-height: 1.8em;\n      $code-padding: 0.8rem;\n      $code-font-size: $font-size-base;\n      position: relative;\n      display: flex;\n      margin-bottom: 1em;\n      padding-top: $code-header-height;\n      padding-left: $code-number-width;\n      border-radius: $xs-radius;\n      overflow: hidden;\n      font-size: $code-font-size;\n\n      &::before {\n        content: attr(data-lang) ' CODE';\n        position: absolute;\n        top: 0;\n        left: 0;\n        display: block;\n        width: 100%;\n        height: $code-header-height;\n        line-height: $code-header-height;\n        text-transform: uppercase;\n        text-align: center;\n        z-index: $z-index-normal + 2;\n      }\n\n      .code-lines {\n        z-index: $z-index-normal + 1;\n        position: absolute;\n        left: 0;\n        top: 0;\n        display: block;\n        margin: 0;\n        padding: 0;\n        padding-top: $code-header-height + $code-padding;\n        width: $code-number-width;\n        height: 100%;\n        color: $text-divider;\n        text-align: center;\n        user-select: none;\n\n        .code-line-number {\n          padding: 0;\n          list-style-type: none;\n          height: $code-row-line-height;\n          line-height: $code-row-line-height;\n        }\n      }\n\n      code {\n        margin: 0;\n        padding: $code-padding 1em !important;\n        float: left;\n        width: 100%;\n        height: 100%;\n        display: block;\n        line-height: $code-row-line-height;\n        font-size: $font-size-base;\n        cursor: text;\n      }\n    }\n\n    &.compact {\n      line-height: 2em;\n      word-wrap: break-word;\n      font-size: $font-size-base;\n\n      p,\n      pre {\n        margin-bottom: $gap;\n      }\n\n      p {\n        text-indent: 0;\n        line-height: 2em;\n        &:last-child {\n          margin: 0;\n        }\n      }\n\n      a {\n        @include text-underline();\n      }\n\n      .figure-wrapper {\n        margin: 0.5rem 0;\n        justify-content: initial;\n      }\n\n      figure.image {\n        border-color: $module-bg-darker-2;\n        figcaption {\n          border-color: $module-bg-darker-2;\n        }\n      }\n\n      ul,\n      ol {\n        padding-left: 2em;\n\n        > li {\n          padding: 0.2em 0.5em;\n        }\n      }\n\n      pre {\n        $code-header-height: 2.5rem;\n        margin-top: 1rem;\n        padding-left: 0;\n        padding-top: $code-header-height;\n        &::before {\n          height: $code-header-height;\n          line-height: $code-header-height;\n        }\n\n        .code-lines {\n          display: none;\n        }\n\n        code {\n          line-height: 1.8;\n        }\n      }\n    }\n  }\n\n  .global-markdown-html {\n    code {\n      border: 1px solid $module-bg-darker-2;\n      background-color: $module-bg-darker-1;\n      color: $link-color;\n    }\n\n    pre {\n      background-color: #f3f3f3;\n      &::before {\n        background-color: $module-bg-darker-2;\n      }\n      .code-lines {\n        background-color: $module-bg-darker-1;\n      }\n      code {\n        color: #444;\n        border-radius: 0;\n        border-width: 0 1px 1px 0;\n        border-color: $module-bg-darker-1;\n        background-color: transparent !important;\n      }\n    }\n\n    &.dark {\n      pre {\n        background-color: #1e1e1e;\n        &::before {\n          background-color: $module-bg-darker-1;\n        }\n        .code-lines {\n          background-color: $module-bg-darker-3;\n        }\n        code {\n          color: #c9d1d9;\n          border-color: transparent;\n        }\n      }\n    }\n\n    &.compact {\n      blockquote {\n        border-color: $module-bg-darker-3;\n        background-color: $module-bg-darker-2;\n      }\n\n      code {\n        border-color: $module-bg-darker-3;\n        background-color: $module-bg-darker-2;\n      }\n\n      pre {\n        border: 1px solid $module-bg-darker-3;\n        code {\n          border-color: transparent;\n          background-color: transparent;\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <a v-if=\"href\" target=\"_blank\" rel=\"external nofollow noopener\" :href=\"href\" v-bind=\"$attrs\">\n    <slot></slot>\n  </a>\n  <span v-else v-bind=\"$attrs\">\n    <slot></slot>\n  </span>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  export default defineComponent({\n    name: 'CommentItemLink',\n    props: {\n      href: String\n    }\n  })\n</script>\n","/**\n * @file emoji\n * @author Surmon <https://github.com/surmon-china>\n */\n\n// offset between uppercase ascii and regional indicator symbols\nconst OFFSET = 127397\n\n// fork from: https://github.com/danalloway/react-country-flag/blob/main/src/index.tsx\nexport const countryCodeToEmoji = (countryCode: string): string => {\n  return countryCode\n    .toUpperCase()\n    .replace(/./g, (char) => String.fromCodePoint(char.charCodeAt(0) + OFFSET))\n}\n","<template>\n  <span class=\"location\">\n    <span v-if=\"emojiText\" class=\"emoji\">{{ emojiText }}</span>\n    <i v-else class=\"iconfont icon-earth\"></i>\n    <span>{{ countryText }}</span>\n    <span class=\"separator\">•</span>\n    <span class=\"city\">{{ cityText }}</span>\n  </span>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, PropType } from 'vue'\n  import { countryCodeToEmoji } from '/@/transforms/emoji'\n  import { IPLocation } from '/@/stores/comment'\n\n  const municipalitys: string[] = ['Shanghai', 'Beijing', 'Tianjin', 'Chongqing', 'Chungking']\n\n  export default defineComponent({\n    name: 'CommentItemLocation',\n    props: {\n      location: {\n        type: Object as PropType<IPLocation>,\n        required: true\n      }\n    },\n    setup(props) {\n      const countryText = computed(() => props.location.country_code || props.location.country)\n      const emojiText = computed(() => countryCodeToEmoji(props.location.country_code))\n      const cityText = computed(() => {\n        if (props.location.country_code === 'CN') {\n          if (municipalitys.includes(props.location.region)) {\n            return props.location.region\n          }\n        }\n        return props.location.city\n      })\n\n      return {\n        emojiText,\n        countryText,\n        cityText\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .location {\n    display: inline-flex;\n    align-items: center;\n    &:hover {\n      .emoji {\n        color: $text;\n      }\n    }\n\n    .iconfont {\n      margin-right: $xs-gap;\n    }\n\n    .emoji {\n      margin-right: $xs-gap;\n      font-size: 130%;\n    }\n\n    .separator {\n      margin: 0 3px;\n    }\n  }\n</style>\n","<template>\n  <span class=\"user-agent\">\n    <span class=\"os\">\n      <i v-if=\"osIconName\" class=\"iconfont\" :class=\"osIconName\" />\n      <span>{{ uaResult.result.os.name }}</span>\n      <!-- <span>{{ uaResult.result.os.version }}</span> -->\n    </span>\n    <span class=\"browser\">\n      <i v-if=\"browserIconName\" class=\"iconfont\" :class=\"browserIconName\" />\n      <span>{{ uaResult.result.browser.name }}</span>\n      <!-- <span>{{ uaResult.result.browser.version }}</span> -->\n    </span>\n  </span>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed } from 'vue'\n  import { uaParser } from '/@/transforms/ua'\n\n  // https://github.com/faisalman/ua-parser-js#methods\n  const osIconsNameMap = {\n    'Mac OS': 'icon-apple',\n    Windows: 'icon-windows',\n    Android: 'icon-android',\n    Ubuntu: 'icon-ubuntu',\n    Linux: 'icon-linux',\n    iOS: 'icon-apple'\n  }\n\n  const browersIconsNameMap = {\n    Chrome: 'icon-chrome',\n    Chromium: 'icon-chrome',\n    WeChat: 'icon-wechat',\n    QQ: 'icon-qq',\n    Safari: 'icon-safari',\n    'Mobile Safari': 'icon-safari',\n    UCBrowser: 'icon-uc',\n    Maxthon: 'icon-maxthon',\n    Firefox: 'icon-firefox',\n    IE: 'icon-ie',\n    Opera: 'icon-opera',\n    Edge: 'icon-edge'\n  }\n\n  export default defineComponent({\n    name: 'CommentItemUserAgent',\n    props: {\n      userAgent: {\n        type: String,\n        required: true\n      }\n    },\n    setup(props) {\n      const uaResult = computed(() => uaParser(props.userAgent))\n      const osIconName = computed(() => {\n        const osName = uaResult.value.result.os.name\n        return osName && osIconsNameMap[osName]\n      })\n      const browserIconName = computed(() => {\n        const browserName = uaResult.value.result.browser.name\n        return browserName ? browersIconsNameMap[browserName] : null\n      })\n\n      return {\n        uaResult,\n        osIconName,\n        browserIconName\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .user-agent {\n    .iconfont {\n      margin-right: $xs-gap;\n    }\n\n    .os {\n      margin-right: $sm-gap;\n    }\n  }\n</style>\n","<template>\n  <li\n    class=\"comment-item\"\n    :key=\"comment.id\"\n    :id=\"getCommentItemElementID(comment.id)\"\n    :class=\"{\n      'hide-avatar': hiddenAvatar,\n      'is-child': isChild,\n      'has-child': hasChild\n    }\"\n  >\n    <div>\n      <div class=\"cm-avatar\" v-if=\"!hiddenAvatar\">\n        <comment-link class=\"link\" :href=\"authorURL\">\n          <img :src=\"authorAvatar\" :alt=\"comment.author.name\" draggable=\"false\" />\n          <span class=\"role\" :class=\"isDisqusAuthor ? 'disqus' : 'anonymous'\">\n            <i class=\"iconfont icon-disqus-logo\" v-if=\"isDisqusAuthor\"></i>\n            <i class=\"iconfont icon-user\" v-else></i>\n          </span>\n        </comment-link>\n      </div>\n      <div class=\"cm-body\">\n        <div class=\"cm-header\">\n          <div class=\"left\">\n            <comment-link class=\"username\" :class=\"{ url: Boolean(authorURL) }\" :href=\"authorURL\">\n              {{ firstUpperCase(comment.author.name) }}\n            </comment-link>\n            <span class=\"moderator\" v-if=\"isAdminAuthor\">\n              <i18n :k=\"LanguageKey.COMMENT_MODERATOR\" />\n            </span>\n            <span class=\"author-info\">\n              <template v-if=\"comment.ip_location\">\n                <comment-location :location=\"comment.ip_location\" />\n              </template>\n              <template v-if=\"comment.agent && !hiddenUa\">\n                <comment-user-agent :user-agent=\"comment.agent\" />\n              </template>\n            </span>\n          </div>\n          <div class=\"right\">\n            <span class=\"flool\">#{{ comment.id }}</span>\n          </div>\n        </div>\n        <div class=\"cm-content\">\n          <p v-if=\"comment.pid\" class=\"reply\">\n            <span class=\"text\">\n              <i18n :k=\"LanguageKey.COMMENT_REPLY\" />\n            </span>\n            <button class=\"parent\" @click=\"scrollToCommentItem(comment.pid)\">\n              {{ getReplyParentCommentText(comment.pid) }}\n            </button>\n            <i18n zh=\"：\" en=\":\" />\n          </p>\n          <div class=\"markdown\">\n            <markdown :markdown=\"comment.content\" :sanitize=\"true\" :compact=\"true\" />\n          </div>\n        </div>\n        <div class=\"cm-footer\">\n          <div class=\"left\">\n            <span class=\"create_at\">\n              <udate to=\"ago\" :date=\"comment.create_at\" />\n            </span>\n            <button\n              class=\"vote\"\n              :class=\"{\n                actived: liked,\n                alived: Boolean(comment.likes)\n              }\"\n              :disabled=\"liked\"\n              @click=\"handleVote(true)\"\n            >\n              <i class=\"iconfont icon-like\" />\n              <i18n :k=\"LanguageKey.COMMENT_UPVOTE\" v-if=\"!plainVote\" />\n              <span class=\"count\">({{ comment.likes }})</span>\n            </button>\n            <button\n              class=\"vote\"\n              :class=\"{\n                actived: disliked,\n                alived: Boolean(comment.dislikes)\n              }\"\n              :disabled=\"disliked\"\n              @click=\"handleVote(false)\"\n            >\n              <i class=\"iconfont icon-dislike\" />\n              <i18n :k=\"LanguageKey.COMMENT_DOWNVOTE\" v-if=\"!plainVote\" />\n              <span class=\"count\">({{ comment.dislikes }})</span>\n            </button>\n            <button class=\"reply\" @click=\"handleCancelReply\" v-if=\"isReply\">\n              <i class=\"iconfont icon-cancel\" />\n              <i18n :k=\"LanguageKey.COMMENT_REPLY_CANCEL\" />\n            </button>\n            <button class=\"reply\" @click=\"handleReply\" v-else>\n              <i class=\"iconfont icon-reply\" />\n              <i18n :k=\"LanguageKey.COMMENT_REPLY\" />\n            </button>\n          </div>\n          <div class=\"right\">\n            <button class=\"delete\" :disabled=\"isDeleting\" @click=\"handleDelete\" v-if=\"isDeleteable\">\n              <i class=\"iconfont icon-delete\" />\n              <i18n :k=\"LanguageKey.COMMENT_DELETE\" />\n            </button>\n          </div>\n        </div>\n        <div class=\"cm-reply\" v-if=\"isReply\">\n          <slot name=\"reply\"></slot>\n        </div>\n        <div class=\"cm-children\">\n          <slot name=\"children\"></slot>\n        </div>\n      </div>\n    </div>\n  </li>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, PropType } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useCommentStore, Comment } from '/@/stores/comment'\n  import { useIdentityStore, UserType } from '/@/stores/identity'\n  import { getCommentItemElementID } from '/@/constants/anchor'\n  import { UNDEFINED } from '/@/constants/value'\n  import { LanguageKey } from '/@/language'\n  import { getGravatarByHash, getDisqusAvatarByUsername } from '/@/transforms/avatar'\n  import { getExtendValue } from '/@/transforms/state'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { scrollToAnchor } from '/@/utils/scroller'\n  import Markdown from '/@/components/common/markdown.vue'\n  import CommentLink from './link.vue'\n  import CommentLocation from './location.vue'\n  import CommentUserAgent from './user-agent.vue'\n  import { CommentEvents, getDisqusUserURL } from '../helper'\n\n  export default defineComponent({\n    name: 'CommentItem',\n    components: {\n      Markdown,\n      CommentLink,\n      CommentLocation,\n      CommentUserAgent\n    },\n    props: {\n      comment: {\n        type: Object as PropType<Comment>,\n        required: true\n      },\n      liked: {\n        type: Boolean,\n        default: false\n      },\n      disliked: {\n        type: Boolean,\n        default: false\n      },\n      isReply: {\n        type: Boolean,\n        default: false\n      },\n      isChild: {\n        type: Boolean,\n        default: false\n      },\n      hasChild: {\n        type: Boolean,\n        default: false\n      },\n      hiddenAvatar: {\n        type: Boolean,\n        default: false\n      },\n      hiddenUa: {\n        type: Boolean,\n        default: false\n      },\n      plainVote: {\n        type: Boolean,\n        default: false\n      }\n    },\n    emits: [\n      CommentEvents.Vote,\n      CommentEvents.Delete,\n      CommentEvents.Reply,\n      CommentEvents.CancelReply\n    ],\n    setup(props, context) {\n      const { i18n } = useEnhancer()\n      const commentStore = useCommentStore()\n      const identityStore = useIdentityStore()\n      const isDeleting = computed(() => commentStore.deleting)\n\n      const disqusAuthorID = computed(() => {\n        return getExtendValue(props.comment.extends, 'disqus-author-id')\n      })\n      const disqusUsername = computed<string | void>(() => {\n        return getExtendValue(props.comment.extends, 'disqus-author-username')\n      })\n\n      const isDisqusAuthor = computed(() => Boolean(disqusAuthorID.value))\n      const isAdminAuthor = computed(() => {\n        return (\n          Boolean(disqusUsername.value) &&\n          Boolean(identityStore.disqusConfig) &&\n          disqusUsername.value === identityStore.disqusConfig.admin_username\n        )\n      })\n\n      const authorAvatar = computed(() => {\n        return disqusUsername.value\n          ? getDisqusAvatarByUsername(disqusUsername.value)\n          : getGravatarByHash(props.comment.author.email_hash)\n      })\n\n      const authorURL = computed(() => {\n        if (props.comment.author.site) {\n          return props.comment.author.site\n        }\n        if (disqusUsername.value) {\n          return getDisqusUserURL(disqusUsername.value)\n        }\n        return UNDEFINED\n      })\n\n      const isDeleteable = computed(() => {\n        // 1. Disqus logined\n        if (identityStore.user.type === UserType.Disqus) {\n          // 2. Logined user ID === comment.author.disqus-author-id\n          if (disqusAuthorID.value) {\n            return identityStore.user.disqusProfile?.id === disqusAuthorID.value\n          }\n        }\n        return false\n      })\n\n      const getReplyParentCommentText = (parentID: number) => {\n        const authorName = commentStore.comments.find((comment) => comment.id === parentID)?.author\n          .name\n        const nameText = authorName ? `@${authorName}` : ''\n        const idText = `#${parentID}`\n        return `${idText} ${nameText}`\n      }\n\n      const handleReply = () => {\n        context.emit(CommentEvents.Reply, props.comment.id)\n      }\n\n      const handleCancelReply = () => {\n        context.emit(CommentEvents.CancelReply, props.comment.id)\n      }\n\n      const handleVote = (isLike: boolean) => {\n        context.emit(CommentEvents.Vote, props.comment.id, isLike)\n      }\n\n      const handleDelete = () => {\n        if (window.confirm(i18n.t(LanguageKey.COMMENT_DELETE_CONFIRM))) {\n          context.emit(CommentEvents.Delete, props.comment.id)\n        }\n      }\n\n      const scrollToCommentItem = (commentId: number) => {\n        scrollToAnchor(getCommentItemElementID(commentId), -300)\n      }\n\n      return {\n        LanguageKey,\n        isDeleting,\n        isDisqusAuthor,\n        isAdminAuthor,\n        isDeleteable,\n        authorAvatar,\n        authorURL,\n        getCommentItemElementID,\n        getReplyParentCommentText,\n        firstUpperCase,\n        handleVote,\n        handleDelete,\n        handleReply,\n        handleCancelReply,\n        scrollToCommentItem\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .comment-item {\n    position: relative;\n    padding-left: 2rem;\n    margin-top: $lg-gap;\n    &:first-child {\n      margin-top: 0;\n    }\n\n    /* reply */\n    .cm-reply {\n      padding-top: $lg-gap;\n      padding-bottom: $sm-gap;\n      padding-right: $sm-gap;\n    }\n\n    &.has-child {\n      .cm-reply {\n        padding-bottom: 0;\n      }\n    }\n\n    &.is-child {\n      margin-top: $xs-gap;\n      padding-top: $xs-gap;\n      border-top: 1px dashed $module-bg-darker-3;\n      .cm-reply {\n        padding-right: 0;\n        padding-bottom: 0;\n      }\n\n      &:last-child {\n        .cm-body {\n          padding-bottom: 0;\n        }\n        .cm-reply {\n          padding-bottom: $sm-gap;\n        }\n      }\n\n      .cm-avatar {\n        top: $lg-gap * 2;\n      }\n    }\n\n    .cm-avatar {\n      display: block;\n      position: absolute;\n      left: 0;\n      top: $gap * 2;\n\n      .link {\n        $size: 4.8rem;\n        position: relative;\n        display: block;\n        width: $size;\n        height: $size;\n        border: 4px solid $module-bg-lighter;\n        border-radius: $sm-radius;\n        background-color: $module-bg-darker-2;\n\n        img {\n          width: 100%;\n          height: 100%;\n          border-radius: $xs-radius;\n        }\n\n        .role {\n          position: absolute;\n          right: 0;\n          bottom: 0;\n          width: 40%;\n          height: 40%;\n          padding-top: 1px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          border-top-left-radius: $sm-radius;\n          color: $white;\n          &.disqus {\n            background-color: rgba($disqus-primary, 0.5);\n          }\n          &.anonymous {\n            background-color: $module-bg-translucent;\n          }\n        }\n      }\n    }\n\n    .cm-body {\n      display: block;\n      width: 100%;\n      height: 100%;\n      padding: $sm-gap $sm-gap $sm-gap ($lg-gap * 3);\n      background-color: $module-bg-darker-1;\n      border-radius: $xs-radius;\n      @include background-transition();\n\n      > .cm-header {\n        position: relative;\n        display: flex;\n        justify-content: space-between;\n\n        .left {\n          display: flex;\n          align-items: center;\n        }\n\n        .username {\n          font-weight: bold;\n          margin-right: $gap;\n          &.url:hover {\n            @include text-underline();\n          }\n        }\n\n        .moderator {\n          display: inline-block;\n          margin-left: -$sm-gap;\n          margin-right: $sm-gap;\n          padding: 0 $xs-gap 0.1em;\n          font-size: 11px;\n          color: $text-reversal;\n          background-color: $primary-lighter;\n          @include radius-box($xs-radius);\n        }\n\n        .author-info {\n          display: inline-flex;\n          align-items: center;\n          font-size: $font-size-small;\n          color: $text-divider;\n\n          > * {\n            margin-right: $gap;\n            &:last-child {\n              margin-right: 0;\n            }\n          }\n        }\n\n        .flool {\n          color: $text-divider;\n          font-size: $font-size-small;\n          font-weight: bold;\n        }\n      }\n\n      > .cm-content {\n        padding-right: $xs-gap;\n        user-select: text;\n\n        .reply {\n          display: flex;\n          align-items: center;\n          margin-top: $sm-gap;\n          margin-bottom: -$xs-gap;\n          font-size: $font-size-h6;\n          font-weight: bold;\n          color: $text-disabled;\n\n          .text {\n            margin-right: $xs-gap;\n          }\n\n          .parent {\n            font-weight: bold;\n            color: $link-color;\n            &:hover {\n              color: $link-hover;\n            }\n          }\n        }\n\n        .markdown {\n          margin: $sm-gap 0;\n        }\n      }\n\n      .cm-footer {\n        display: flex;\n        justify-content: space-between;\n\n        .create_at,\n        .reply,\n        .vote,\n        .delete {\n          color: $text-disabled;\n          font-size: $font-size-small;\n          margin-right: $gap;\n\n          .iconfont {\n            margin-right: $xs-gap;\n          }\n        }\n\n        .reply {\n          &:hover {\n            color: $link-color;\n          }\n        }\n\n        .vote {\n          &:hover,\n          &.actived {\n            color: $red;\n          }\n          &.actived,\n          &.alived {\n            .count {\n              font-weight: bold;\n            }\n          }\n\n          .count {\n            margin-left: 3px;\n          }\n        }\n\n        .delete {\n          color: $text-divider;\n          margin: 0;\n          &:hover {\n            color: $red;\n          }\n        }\n      }\n    }\n\n    &:hover {\n      .cm-body {\n        background-color: $module-bg-hover;\n      }\n    }\n\n    &.hide-avatar {\n      padding: 0;\n      margin-top: $gap;\n      &.is-child {\n        .cm-content {\n          border-left: 6px solid $module-bg-darker-2;\n          padding-left: 1rem;\n        }\n      }\n\n      .cm-body {\n        padding: $sm-gap $gap;\n      }\n    }\n  }\n</style>\n","<template>\n  <ul class=\"comment-list\" :class=\"isChildList ? 'child' : 'root'\">\n    <transition-group name=\"list-fade\">\n      <comment-item\n        v-for=\"item in comments\"\n        :key=\"item.comment.id\"\n        :comment=\"item.comment\"\n        :liked=\"isLikedComment(item.comment.id)\"\n        :disliked=\"isDislikedComment(item.comment.id)\"\n        :has-child=\"Boolean(item.children.length)\"\n        :is-child=\"isChildList\"\n        :is-reply=\"replyPid === item.comment.id\"\n        :hidden-avatar=\"hiddenAvatar\"\n        :hidden-ua=\"hiddenUa\"\n        :plain-vote=\"plainVote\"\n        @vote=\"handleVoteComment\"\n        @delete=\"handleDeleteComment\"\n        @reply=\"handleReplyComment\"\n        @cancel-reply=\"handleCancelReply\"\n      >\n        <template #reply>\n          <slot name=\"reply\" :comment=\"item.comment\" :is-child=\"false\"></slot>\n        </template>\n        <template #children v-if=\"item.children.length\">\n          <comment-list\n            :comments=\"buildeCommentTree(item.children)\"\n            :is-child-list=\"true\"\n            :hidden-avatar=\"hiddenAvatar\"\n            :hidden-ua=\"hiddenUa\"\n            :plain-vote=\"plainVote\"\n            :reply-pid=\"replyPid\"\n            @delete=\"handleDeleteComment\"\n            @reply=\"handleReplyComment\"\n            @cancel-reply=\"handleCancelReply\"\n          >\n            <template #reply>\n              <slot name=\"reply\" :comment=\"item.comment\" :is-child=\"true\"></slot>\n            </template>\n          </comment-list>\n        </template>\n      </comment-item>\n    </transition-group>\n  </ul>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, PropType } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useStores } from '/@/stores'\n  import { Comment, CommentTreeItem } from '/@/stores/comment'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { LanguageKey } from '/@/language'\n  import { CommentEvents } from '../helper'\n  import CommentItem from './item.vue'\n\n  export default defineComponent({\n    name: 'CommentList',\n    components: {\n      CommentItem\n    },\n    props: {\n      comments: {\n        type: Array as PropType<Array<CommentTreeItem>>,\n        required: true\n      },\n      replyPid: {\n        type: Number,\n        required: true\n      },\n      isChildList: {\n        type: Boolean,\n        default: false\n      },\n      hiddenAvatar: {\n        type: Boolean,\n        default: false\n      },\n      hiddenUa: {\n        type: Boolean,\n        default: false\n      },\n      plainVote: {\n        type: Boolean,\n        required: false\n      }\n    },\n    emits: [CommentEvents.Reply, CommentEvents.Delete, CommentEvents.CancelReply],\n    setup(_, context) {\n      const { i18n, gtag } = useEnhancer()\n      const { comment: commentStore, identity } = useStores()\n\n      const handleReplyComment = (commentID: number) => {\n        context.emit(CommentEvents.Reply, commentID)\n      }\n\n      const handleCancelReply = (commentID: number) => {\n        context.emit(CommentEvents.CancelReply, commentID)\n      }\n\n      const handleDeleteComment = async (commentID: number) => {\n        context.emit(CommentEvents.Delete, commentID)\n      }\n\n      const handleVoteComment = async (commentID: number, isLike: boolean) => {\n        gtag?.event('vote_comment', {\n          event_category: GAEventCategories.Comment,\n          event_label: isLike ? 'like' : 'dislike'\n        })\n        if (isLike && identity.isLikedComment(commentID)) {\n          return false\n        }\n        if (!isLike && identity.isDislikedComment(commentID)) {\n          return false\n        }\n        try {\n          await commentStore.postCommentVote(commentID, isLike ? 1 : -1)\n          isLike ? identity.likeComment(commentID) : identity.dislikeComment(commentID)\n        } catch (error) {\n          const message = i18n.t(LanguageKey.POST_ACTION_ERROR)\n          console.warn(message, error)\n          alert(message)\n        }\n      }\n\n      const buildeCommentTree = (comments: Comment[]): Array<CommentTreeItem> => {\n        return comments.map((comment) => ({\n          comment,\n          children: []\n        }))\n      }\n\n      return {\n        isLikedComment: identity.isLikedComment,\n        isDislikedComment: identity.isDislikedComment,\n        handleVoteComment,\n        handleDeleteComment,\n        handleReplyComment,\n        handleCancelReply,\n        buildeCommentTree\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .comment-list {\n    padding: 0;\n    margin: 0;\n    list-style-type: none;\n\n    &.root {\n    }\n\n    &.child {\n      margin-top: $gap;\n    }\n  }\n</style>\n","<template>\n  <transition name=\"module\">\n    <div class=\"loadmore\" :id=\"COMMENT_FOOTER_ELEMENT_ID\">\n      <button class=\"button\" v-if=\"hasMore\" :disabled=\"fetching\" @click=\"handleLoadmore\">\n        <i18n v-if=\"fetching\" zh=\"加载中...\" en=\"Loading...\" />\n        <template v-else>\n          <i18n>\n            <template #zh>加载更多评论（剩 {{ remain }} 条）</template>\n            <template #en>Loadmore (remain {{ remain }})</template>\n          </i18n>\n          <i class=\"iconfont icon-loadmore\"></i>\n        </template>\n      </button>\n      <span class=\"no-more\" v-else>\n        <i18n zh=\"水尽山穷\" en=\"NO MORE\" />\n      </span>\n    </div>\n  </transition>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { COMMENT_FOOTER_ELEMENT_ID } from '/@/constants/anchor'\n  import { CommentEvents } from './helper'\n\n  export default defineComponent({\n    name: 'CommentPagination',\n    props: {\n      fetching: {\n        type: Boolean,\n        required: true\n      },\n      remain: {\n        type: Number,\n        required: true\n      },\n      pagination: {\n        type: Object,\n        required: false\n      }\n    },\n    setup(props, context) {\n      const { gtag } = useEnhancer()\n      const hasMore = computed(() => {\n        return (\n          props.pagination?.total_page > 1 &&\n          props.pagination?.current_page !== props.pagination?.total_page\n        )\n      })\n\n      const handleLoadmore = () => {\n        gtag?.event('loadmore', {\n          event_category: GAEventCategories.Comment\n        })\n\n        if (props.pagination) {\n          context.emit(CommentEvents.Page, props.pagination.current_page + 1)\n        }\n      }\n\n      return {\n        COMMENT_FOOTER_ELEMENT_ID,\n        hasMore,\n        handleLoadmore\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .loadmore {\n    margin-top: $lg-gap;\n    margin-bottom: $sm-gap;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    .button {\n      min-width: 10rem;\n      height: 2.8rem;\n      padding: 0 $lg-gap;\n      border-radius: $xs-radius;\n      background-color: $module-bg-darker-1;\n      color: $text-disabled;\n      &:not([disabled]):hover {\n        color: $link-color;\n        background-color: $module-bg-hover;\n      }\n\n      .iconfont {\n        margin-left: $sm-gap;\n      }\n    }\n\n    .no-more {\n      padding-top: $xs-gap;\n      color: $text-disabled;\n    }\n  }\n</style>\n","<template>\n  <placeholder :loading=\"fetching\">\n    <template #loading>\n      <div class=\"publisher-skeleton\" key=\"skeleton\">\n        <div class=\"avatar\">\n          <skeleton-base />\n        </div>\n        <div class=\"content\">\n          <skeleton-base />\n        </div>\n      </div>\n    </template>\n    <template #default>\n      <slot></slot>\n    </template>\n  </placeholder>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  export default defineComponent({\n    name: 'CommentPublisherMain',\n    props: {\n      fetching: {\n        type: Boolean,\n        default: false\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  $avatar-size: 4rem;\n\n  .publisher-skeleton {\n    display: flex;\n    height: $avatar-size;\n\n    .avatar {\n      width: $avatar-size;\n      margin-right: $gap;\n    }\n\n    .content {\n      flex-grow: 1;\n    }\n  }\n</style>\n","<template>\n  <form\n    key=\"publisher\"\n    class=\"publisher\"\n    name=\"comment\"\n    :id=\"id\"\n    :class=\"{\n      'hidden-avatar': hiddenAvatar,\n      'fixed-avatar': fixedAvatar,\n      blossomed,\n      bordered\n    }\"\n  >\n    <transition name=\"module-slow\">\n      <div class=\"profile\" v-if=\"user.type === UserType.Null\" v-show=\"blossomed\">\n        <div class=\"name\">\n          <input\n            :value=\"profile.name\"\n            @input=\"handleUpdateProfile('name', $event)\"\n            required\n            type=\"text\"\n            name=\"name\"\n            autocomplete=\"on\"\n            :disabled=\"disabled\"\n            :placeholder=\"t(LanguageKey.COMMENT_POST_NAME) + ' *'\"\n          />\n        </div>\n        <div class=\"email\">\n          <input\n            :value=\"profile.email\"\n            @input=\"handleUpdateProfile('email', $event)\"\n            required\n            type=\"email\"\n            name=\"email\"\n            autocomplete=\"on\"\n            :disabled=\"disabled\"\n            :placeholder=\"t(LanguageKey.COMMENT_POST_EMAIL) + ' *'\"\n          />\n        </div>\n        <div class=\"site\">\n          <input\n            :value=\"profile.site\"\n            @input=\"handleUpdateProfile('site', $event)\"\n            type=\"url\"\n            name=\"url\"\n            autocomplete=\"on\"\n            :disabled=\"disabled\"\n            :placeholder=\"t(LanguageKey.COMMENT_POST_SITE)\"\n          />\n        </div>\n      </div>\n    </transition>\n    <div class=\"postbox\">\n      <div class=\"avatar\" v-if=\"!hiddenAvatar\">\n        <uimage :alt=\"profile.name\" :src=\"avatar\" />\n      </div>\n      <transition name=\"module-slow\">\n        <div class=\"editor\" v-if=\"blossomed\" key=\"editor\">\n          <slot name=\"pen\"></slot>\n        </div>\n        <div class=\"placeholder\" v-else key=\"placeholder\" @click=\"handleBlossom\">\n          <i18n zh=\"在下有一拙见，不知...\" :en=\"`${total ? 'Join' : 'Start'} the discussion...`\" />\n        </div>\n      </transition>\n    </div>\n  </form>\n</template>\n\n<script lang=\"ts\">\n  import { storeToRefs } from 'pinia'\n  import { defineComponent, ref, computed, PropType } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { Author } from '/@/stores/comment'\n  import { useIdentityStore, UserType } from '/@/stores/identity'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { LanguageKey } from '/@/language'\n  import {\n    getGravatarByHash,\n    getDefaultAvatar,\n    getDisqusAvatarByUsername\n  } from '/@/transforms/avatar'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { CommentEvents } from '../helper'\n\n  export enum PublisherEvents {\n    UpdateProfile = 'update:profile'\n  }\n\n  export default defineComponent({\n    name: 'CommentPublisher',\n    props: {\n      id: {\n        type: String,\n        required: false\n      },\n      disabled: {\n        type: Boolean,\n        default: false\n      },\n      profile: {\n        type: Object as PropType<Author>,\n        required: true\n      },\n      total: {\n        type: Number,\n        default: 0,\n        required: false\n      },\n      bordered: {\n        type: Boolean,\n        default: false\n      },\n      defaultBlossomed: {\n        type: Boolean,\n        default: true\n      },\n      hiddenAvatar: {\n        type: Boolean,\n        required: false\n      },\n      fixedAvatar: {\n        type: Boolean,\n        required: false\n      }\n    },\n    emits: [CommentEvents.Blossom, PublisherEvents.UpdateProfile],\n    setup(props, context) {\n      const { i18n, gtag } = useEnhancer()\n      const { user } = storeToRefs(useIdentityStore())\n      const avatar = computed(() => {\n        // local user\n        if (user.value.type === UserType.Local) {\n          return getGravatarByHash(user.value.localProfile?.email_hash)\n        }\n        // disqus user\n        if (user.value.type === UserType.Disqus) {\n          return getDisqusAvatarByUsername(user.value.disqusProfile?.username)\n        }\n        // temp user\n        return getDefaultAvatar()\n      })\n\n      const handleUpdateProfile = (key: keyof Author, event: any) => {\n        context.emit(PublisherEvents.UpdateProfile, {\n          ...props.profile,\n          [key]: event.target.value\n        })\n      }\n\n      const blossomed = ref(props.defaultBlossomed)\n      const handleBlossom = () => {\n        blossomed.value = true\n        context.emit(CommentEvents.Blossom)\n        gtag?.event('focus_publisher', {\n          event_category: GAEventCategories.Comment\n        })\n      }\n\n      return {\n        user,\n        avatar,\n        blossomed,\n        UserType,\n        LanguageKey,\n        t: i18n.t,\n        firstUpperCase,\n        handleUpdateProfile,\n        handleBlossom\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  $avatar-size: 4rem;\n\n  .publisher-skeleton {\n    display: flex;\n    height: $avatar-size;\n\n    .avatar {\n      width: $avatar-size;\n      margin-right: $gap;\n    }\n\n    .content {\n      flex-grow: 1;\n    }\n  }\n\n  .publisher {\n    display: block;\n    padding-left: 5.2rem;\n    &.bordered {\n      input {\n        border: 1px solid $module-bg-darker-3;\n      }\n    }\n\n    .profile {\n      width: 100%;\n      height: 2em;\n      line-height: 2em;\n      display: flex;\n      margin-bottom: $gap;\n\n      .name,\n      .email,\n      .site {\n        flex-grow: 1;\n\n        input {\n          width: 100%;\n          height: 2em;\n          line-height: 2em;\n          text-indent: 3px;\n          background-color: $module-bg-darker-1;\n          @include radius-box($mini-radius);\n          @include background-transition();\n\n          &:focus,\n          &:hover {\n            background-color: $module-bg-hover;\n          }\n        }\n      }\n\n      .name,\n      .email {\n        margin-right: $gap;\n      }\n    }\n\n    .postbox {\n      width: 100%;\n      height: $avatar-size;\n      display: flex;\n      position: relative;\n\n      .avatar {\n        position: absolute;\n        top: 0;\n        left: -($avatar-size + $gap);\n        display: block;\n        width: $avatar-size;\n        height: $avatar-size;\n        background-color: $module-bg-darker-1;\n        @include radius-box($xs-radius);\n\n        img {\n          width: 100%;\n          height: 100%;\n          transition: transform 0.5s ease-out;\n        }\n      }\n\n      .editor {\n        flex-grow: 1;\n        overflow: hidden;\n      }\n\n      .placeholder {\n        position: absolute;\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: 100%;\n        padding: 0 1em;\n        display: flex;\n        align-items: center;\n        font-size: $font-size-h4;\n        cursor: text;\n        @include radius-box($xs-radius);\n        background-color: $module-bg-darker-1;\n        &:hover {\n          background-color: $module-bg-darker-3;\n        }\n      }\n    }\n\n    &.blossomed {\n      .postbox {\n        height: auto;\n        min-height: 8rem;\n      }\n    }\n\n    &.hidden-avatar {\n      padding-left: 0;\n\n      .profile {\n        padding: 0;\n        margin: 0;\n        height: auto;\n        flex-direction: column;\n\n        .name,\n        .email,\n        .site {\n          width: 80%;\n          margin-left: 0;\n          margin-right: 0;\n          margin-bottom: $gap;\n        }\n      }\n    }\n\n    &.fixed-avatar {\n      padding-left: 0;\n    }\n  }\n</style>\n","/**\n * @file Editable element util\n * @module util.editable\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const focusPosition = (element: HTMLElement, position = 0) => {\n  if (!element) {\n    return\n  }\n\n  // 1. focus\n  element.focus()\n\n  // 2. position (first text position)\n  if (!position) {\n    const range = window.getSelection()?.getRangeAt(0) as Range\n    const clone = range.cloneRange()\n    clone.selectNodeContents(element)\n    clone.setEnd(range.endContainer, range.endOffset)\n    return clone.toString().length\n  }\n\n  // position\n  let length = 0\n  let abort = false\n\n  const visit = (parentNode: any) => {\n    const nodes = parentNode.childNodes\n    for (let i = 0; i < nodes.length; ++i) {\n      const node = nodes[i]\n      const isNewLine = node.nodeType === 1 && node.tagName === 'BR'\n      // 文本节点且不是换行\n      if (node.nodeType !== 3 && !isNewLine) {\n        visit(node)\n        return\n      }\n\n      length += isNewLine ? 1 : node.textContent.length\n      if (length >= position) {\n        if (abort) {\n          visit(node)\n          return\n        }\n\n        abort = true\n        const selection = document.getSelection() as Selection\n        const range = document.createRange()\n        const sub = length - node.textContent.length\n        range.setStart(node, position - sub)\n        range.setEnd(node, position - sub)\n        selection.removeAllRanges()\n        selection.addRange(range)\n        break\n      }\n    }\n  }\n  visit(element)\n}\n\nexport interface IncertOption {\n  element: HTMLElement | void\n  content: string | [string, string]\n}\nexport const insertContent = (option: IncertOption) => {\n  const { element, content } = option\n  const [before, after] = Array.isArray(content) ? content : [content]\n\n  if (!element || (!before && !after)) {\n    return false\n  }\n\n  // 如果选中了内容，则把选中的内容替换，\n  const currentText = element.innerText\n  const selection = (window.getSelection || document.getSelection)() as Selection\n  const selectedText = selection?.toString()\n  if (selectedText) {\n    // TODO: 正则可能会匹配到重复的前面的字符，故不可靠\n    // 替换所有选中文本 -> 然后定位到所替换文本的最后一个字符\n    // 对于选中逻辑来说，既定的任何单个字符都理解为替换\n    const isInsertReplace = !!before && !after\n    const newSelectedText = isInsertReplace ? before : before + selectedText + after\n    const newText = currentText.replace(selectedText, newSelectedText)\n    // console.log('选中插入', newText)\n    element.innerText = newText\n    focusPosition(element, newText.indexOf(newSelectedText) + newSelectedText.length - 1)\n  } else {\n    // 否则追加新内容\n    const newInsertText = before + after\n    const selectedRange = (() => {\n      // eslint-disable-next-line no-empty\n      try {\n        return selection.getRangeAt(0)\n      } catch (error) {}\n    })() as Range\n    const startPoint = selectedRange?.startOffset\n    const endPoint = selectedRange?.endOffset\n\n    // 若拿到了光标，则在光标位置插入新内容 -> 然后定位到新内容的最后一个字符\n    if (selectedRange && startPoint === endPoint && startPoint > 0) {\n      const newTexts = [\n        currentText.slice(0, startPoint),\n        newInsertText,\n        currentText.slice(startPoint)\n      ]\n      // console.log('光标插入', startPoint, newTexts)\n      element.innerText = newTexts.join('')\n      focusPosition(element, newTexts[0].length + newTexts[1].length - 1)\n    } else {\n      // 否则末端追加内容，并定位到最后一个字符\n      const newText = currentText + newInsertText\n      // console.log('尾部插入', newText)\n      element.innerText = newText\n      focusPosition(element, newText.length - 1)\n      // TODO:????\n      // element.scrollIntoView()\n      // element?.scrollTop = element?.scrollHeight\n    }\n  }\n}\n","<template>\n  <div class=\"pen\" :class=\"{ bordered }\">\n    <div class=\"markdown\">\n      <div\n        ref=\"inputElement\"\n        class=\"markdown-input\"\n        :contenteditable=\"!disabled\"\n        :placeholder=\"t(LanguageKey.COMMENT_POST_PLACEHOLDER)\"\n        @focus=\"disableCopyrighter\"\n        @blur=\"enableCopyrighter\"\n      />\n      <transition name=\"list-fade\">\n        <div class=\"preview-content\" v-if=\"isPreviewed\">\n          <markdown :markdown=\"content\" :sanitize=\"true\" :compact=\"true\" />\n        </div>\n      </transition>\n    </div>\n    <div class=\"pencilbox\">\n      <div class=\"stationery\">\n        <ulink class=\"markdown\" title=\"markdown\" :href=\"VALUABLE_LINKS.MARKDOWN\">\n          <i class=\"iconfont icon-markdown\" />\n        </ulink>\n        <template v-if=\"!hiddenStationery\">\n          <button class=\"emoji\" title=\"emoji\" type=\"button\" :disabled=\"disabled || isPreviewed\">\n            <i class=\"iconfont icon-emoji\" />\n            <div class=\"emoji-box\">\n              <ul class=\"emoji-list\">\n                <li\n                  v-for=\"(emoji, index) in EMOJIS\"\n                  v-once\n                  :key=\"index\"\n                  class=\"item\"\n                  @click=\"insertEmoji(emoji)\"\n                >\n                  {{ emoji }}\n                </li>\n              </ul>\n            </div>\n          </button>\n          <button\n            class=\"image\"\n            title=\"image\"\n            :disabled=\"disabled || isPreviewed\"\n            @click.prevent=\"insertImage\"\n          >\n            <i class=\"iconfont icon-image\" />\n          </button>\n          <button\n            class=\"link\"\n            title=\"link\"\n            :disabled=\"disabled || isPreviewed\"\n            @click.prevent=\"insertLink\"\n          >\n            <i class=\"iconfont icon-link\" />\n          </button>\n          <button\n            class=\"code\"\n            title=\"code\"\n            :disabled=\"disabled || isPreviewed\"\n            @click.prevent=\"insertCode\"\n          >\n            <i class=\"iconfont icon-code\" />\n          </button>\n          <button\n            class=\"preview\"\n            title=\"preview\"\n            :class=\"{ actived: isPreviewed }\"\n            :disabled=\"disabled\"\n            @click.prevent=\"handleTogglePreview\"\n          >\n            <i class=\"iconfont\" :class=\"isPreviewed ? 'icon-eye-close' : 'icon-eye'\" />\n          </button>\n        </template>\n      </div>\n      <button type=\"submit\" class=\"submit\" :disabled=\"disabled\" @click=\"handleSubmit\">\n        <i18n zh=\"发布中...\" en=\"Posting...\" v-if=\"posting\" />\n        <i18n v-else-if=\"user.type === UserType.Local\">\n          <template #zh>以 {{ user.localProfile?.name }} 的身份发布</template>\n          <template #en>Post as {{ user.localProfile?.name }}</template>\n        </i18n>\n        <i18n v-else-if=\"user.type === UserType.Disqus\">\n          <template #zh>以 {{ user.disqusProfile?.name }} 的身份发布</template>\n          <template #en>Post as {{ user.disqusProfile?.name }}</template>\n        </i18n>\n        <i18n zh=\"发布\" en=\"Publish\" v-else />\n        <i class=\"iconfont icon-mail-plane\"></i>\n      </button>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, watch, onMounted, onBeforeUnmount, nextTick } from 'vue'\n  import { storeToRefs } from 'pinia'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n  import { LanguageKey } from '/@/language'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useIdentityStore, UserType } from '/@/stores/identity'\n  import { enableCopyrighter, disableCopyrighter } from '/@/effects/copyright'\n  import { focusPosition } from '/@/utils/editable'\n  import { insertContent } from '/@/utils/editable'\n  import { CommentEvents, EMOJIS } from '../helper'\n  import Markdown from '/@/components/common/markdown.vue'\n\n  export enum PenEvents {\n    Update = 'update:modelValue',\n    UpdatePreviewed = 'update:previewed'\n  }\n\n  export default defineComponent({\n    name: 'CommentPen',\n    components: {\n      Markdown\n    },\n    props: {\n      modelValue: {\n        type: String,\n        required: false\n      },\n      disabled: {\n        type: Boolean,\n        default: false\n      },\n      previewed: {\n        type: Boolean,\n        default: false\n      },\n      posting: {\n        type: Boolean,\n        required: true\n      },\n      bordered: {\n        type: Boolean,\n        required: false\n      },\n      autoFocus: {\n        type: Boolean,\n        default: false\n      },\n      hiddenStationery: {\n        type: Boolean,\n        default: false\n      }\n    },\n    emits: [PenEvents.Update, PenEvents.UpdatePreviewed, CommentEvents.Submit],\n    setup(props, context) {\n      const { i18n } = useEnhancer()\n      const { user } = storeToRefs(useIdentityStore())\n      const content = ref(props.modelValue || '')\n      const isPreviewed = ref(props.previewed || false)\n      const inputElement = ref<HTMLElement>()\n      let inputElementObserver: MutationObserver | null = null\n\n      const handleTogglePreview = () => {\n        isPreviewed.value = !isPreviewed.value\n        context.emit(PenEvents.UpdatePreviewed, isPreviewed.value)\n      }\n\n      const handleInputChange = () => {\n        const text = inputElement.value?.innerText as string\n        if (text !== content.value) {\n          content.value = text\n          context.emit(PenEvents.Update, text)\n        }\n      }\n\n      const handleSubmit = (event) => {\n        event.preventDefault()\n        context.emit(CommentEvents.Submit, content.value)\n      }\n\n      const insertContentToInput = (before: string, after = '') => {\n        insertContent({\n          element: inputElement.value,\n          content: [before, after]\n        })\n        handleInputChange()\n      }\n\n      const insertEmoji = (emoji: any) => {\n        insertContentToInput(` ${emoji} `)\n      }\n      const insertImage = () => {\n        insertContentToInput(` ![`, `](https://) `)\n      }\n      const insertLink = () => {\n        insertContentToInput(` [`, `](https://) `)\n      }\n      const insertCode = () => {\n        insertContentToInput('\\n```javascript\\n', '\\n```\\n')\n      }\n\n      watch(\n        () => props.modelValue,\n        (value = '') => {\n          if (value !== content.value) {\n            content.value = value\n            if (inputElement.value) {\n              inputElement.value.innerText = value\n            }\n          }\n        }\n      )\n\n      watch(\n        () => props.previewed,\n        (_preview) => {\n          if (_preview !== isPreviewed.value) {\n            isPreviewed.value = _preview\n          }\n        }\n      )\n\n      onMounted(() => {\n        // auto focus\n        if (props.autoFocus) {\n          nextTick().then(() => {\n            if (inputElement.value) {\n              focusPosition(inputElement.value)\n            }\n          })\n        }\n        // watch element\n        inputElementObserver = new MutationObserver(() => handleInputChange())\n        inputElementObserver.observe(inputElement.value!, {\n          attributes: true,\n          characterData: true,\n          childList: true,\n          subtree: true\n        })\n      })\n      onBeforeUnmount(() => {\n        inputElementObserver?.disconnect()\n      })\n\n      return {\n        t: i18n.t,\n        user,\n        UserType,\n        EMOJIS,\n        VALUABLE_LINKS,\n        LanguageKey,\n        inputElement,\n        content,\n        isPreviewed,\n        insertEmoji,\n        insertImage,\n        insertLink,\n        insertCode,\n        handleInputChange,\n        handleTogglePreview,\n        handleSubmit,\n        enableCopyrighter,\n        disableCopyrighter\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .pen {\n    position: relative;\n    @include radius-box($xs-radius);\n    &.bordered {\n      border: 1px solid $module-bg-darker-3;\n      .pencilbox {\n        border-top: 1px solid $module-bg-darker-3;\n      }\n    }\n\n    .markdown {\n      position: relative;\n      overflow: hidden;\n\n      .markdown-input {\n        min-height: 6em;\n        max-height: 36em;\n        overflow: auto;\n        outline: none;\n        padding: 0.5em;\n        cursor: auto;\n        font-size: $font-size-h6;\n        line-height: 1.8em;\n        background-color: $module-bg-darker-1;\n        @include background-transition();\n\n        &:empty:before {\n          content: attr(placeholder);\n          color: $text-disabled;\n        }\n        &:focus {\n          content: none;\n        }\n        &:hover {\n          background-color: $module-bg-hover;\n        }\n      }\n\n      .preview-content {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        overflow: auto;\n        margin: 0;\n        padding: 0.5em;\n        background-color: $module-bg-darker-1;\n      }\n    }\n\n    .pencilbox {\n      $size: 30px;\n      height: $size;\n      line-height: $size;\n      display: flex;\n      justify-content: space-between;\n      background-color: $module-bg-darker-2;\n\n      .stationery {\n        display: flex;\n\n        .emoji,\n        .image,\n        .link,\n        .code,\n        .preview {\n          width: $size;\n          height: $size;\n          text-align: center;\n          display: block;\n          @include background-transition();\n\n          &[disabled] {\n            opacity: 0.7;\n          }\n\n          &:not([disabled]) {\n            &.actived,\n            &:hover {\n              background-color: $module-bg-darker-4;\n            }\n          }\n        }\n\n        .markdown {\n          width: 4rem;\n          text-align: center;\n          background-color: $module-bg-darker-3;\n        }\n\n        .emoji {\n          &:not([disabled]):hover {\n            .emoji-box {\n              display: block;\n            }\n          }\n\n          .emoji-box {\n            display: none;\n            position: absolute;\n            bottom: $size;\n            left: 0;\n            top: 0;\n            width: 100%;\n            overflow-y: auto;\n            background-color: $module-bg;\n\n            .emoji-list {\n              list-style: none;\n              padding: 0;\n              margin: 0;\n              font-size: $font-size-h3;\n              display: grid;\n              grid-template-columns: repeat(auto-fill, 45px);\n\n              .item {\n                cursor: pointer;\n                padding: $xs-gap 0;\n                font-size: $font-size-h2;\n                border-radius: $sm-radius;\n                @include background-transition();\n                &:hover {\n                  background-color: $module-bg-hover;\n                }\n              }\n            }\n          }\n        }\n      }\n\n      .submit {\n        min-width: 8rem;\n        height: $size;\n        padding: 0 $gap;\n        font-weight: bold;\n        font-size: $font-size-small;\n        color: $text-disabled;\n        background-color: $module-bg-darker-3;\n        @include background-transition();\n        &:hover {\n          color: $text-secondary;\n          background-color: $module-bg-darker-4;\n        }\n\n        .iconfont {\n          margin-left: $sm-gap;\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div :id=\"ANCHOR.COMMENT_ELEMENT_ID\" class=\"comment-box\">\n    <comment-topbar\n      :total=\"commentStore.pagination?.total\"\n      :loaded=\"commentStore.comments.length\"\n      :post-id=\"postId\"\n      :fetching=\"fetching\"\n      :loading=\"isLoading\"\n      :plain=\"plain\"\n      :sort=\"commentState.sort\"\n      @sort=\"fetchSortComments\"\n    />\n    <divider class=\"divider\" size=\"lg\" />\n    <comment-publisher-main :fetching=\"fetching\">\n      <comment-publisher\n        v-model:profile=\"guestProfile\"\n        :id=\"ANCHOR.COMMENT_PUBLISHER_ELEMENT_ID\"\n        :disabled=\"isLoading || isRootPosting\"\n        :total=\"commentStore.pagination?.total\"\n        :default-blossomed=\"plain ? true : false\"\n        :hidden-avatar=\"plain\"\n      >\n        <template #pen>\n          <comment-pen\n            v-model=\"rootPenState.content\"\n            v-model:previewed=\"rootPenState.previewed\"\n            :auto-focus=\"plain ? false : true\"\n            :hidden-stationery=\"plain\"\n            :disabled=\"isRootPosting || isLoading\"\n            :posting=\"isRootPosting\"\n            @submit=\"handleRootSubmit\"\n          />\n        </template>\n      </comment-publisher>\n    </comment-publisher-main>\n    <divider class=\"divider\" size=\"lg\" />\n    <comment-main\n      :fetching=\"isLoading\"\n      :skeleton-count=\"plain ? 3 : 5\"\n      :has-data=\"Boolean(commentStore.commentTreeList.length)\"\n    >\n      <template #list>\n        <comment-list\n          :comments=\"commentStore.commentTreeList\"\n          :reply-pid=\"commentState.replyPID\"\n          :hidden-avatar=\"plain\"\n          :hidden-ua=\"plain\"\n          :plain-vote=\"plain\"\n          @delete=\"handleDeleteComment\"\n          @reply=\"replyComment\"\n          @cancel-reply=\"cancelCommentReply\"\n        >\n          <template #reply=\"payload\">\n            <comment-publisher\n              v-model:profile=\"guestProfile\"\n              :id=\"ANCHOR.COMMENT_REPLY_PUBLISHER_ELEMENT_ID\"\n              :disabled=\"false\"\n              :bordered=\"true\"\n              :default-blossomed=\"true\"\n              :hidden-avatar=\"plain\"\n              :fixed-avatar=\"payload.isChild\"\n            >\n              <template #pen>\n                <comment-pen\n                  :posting=\"isReplyPosting\"\n                  :bordered=\"true\"\n                  :auto-focus=\"true\"\n                  :hidden-stationery=\"plain\"\n                  @submit=\"handleReplySubmit\"\n                />\n              </template>\n            </comment-publisher>\n          </template>\n        </comment-list>\n      </template>\n      <template #pagination>\n        <comment-loadmore\n          :fetching=\"isFetching\"\n          :pagination=\"commentStore.pagination\"\n          :remain=\"commentStore.pagination?.total - commentStore.comments.length\"\n          @page=\"fetchPageComments\"\n        />\n      </template>\n    </comment-main>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import {\n    defineComponent,\n    ref,\n    reactive,\n    computed,\n    watch,\n    toRaw,\n    onBeforeUnmount,\n    onUnmounted,\n    nextTick\n  } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useIdentityStore, UserType } from '/@/stores/identity'\n  import { useCommentStore, CommentFetchParams, Author } from '/@/stores/comment'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import * as ANCHOR from '/@/constants/anchor'\n  import { UNDEFINED } from '/@/constants/value'\n  import { SortType } from '/@/constants/state'\n  import { LanguageKey } from '/@/language'\n  import { scrollToAnchor } from '/@/utils/scroller'\n  import { luanchEmojiRain } from './helper'\n  import CommentTopbar from './topbar.vue'\n  import CommentMain from './list/main.vue'\n  import CommentList from './list/list.vue'\n  import CommentLoadmore from './loadmore.vue'\n  import CommentPublisherMain from './publisher/main.vue'\n  import CommentPublisher from './publisher/publisher.vue'\n  import CommentPen from './publisher/pen.vue'\n\n  export default defineComponent({\n    name: 'Dsiqus',\n    components: {\n      CommentTopbar,\n      CommentMain,\n      CommentList,\n      CommentLoadmore,\n      CommentPublisherMain,\n      CommentPublisher,\n      CommentPen\n    },\n    props: {\n      postId: {\n        type: Number,\n        required: true\n      },\n      fetching: {\n        type: Boolean,\n        default: false\n      },\n      plain: {\n        type: Boolean,\n        default: false\n      }\n    },\n    setup(props) {\n      const { i18n, gtag, globalState } = useEnhancer()\n      const identityStore = useIdentityStore()\n      const commentStore = useCommentStore()\n\n      const isPosting = computed(() => commentStore.posting)\n      const isFetching = computed(() => commentStore.fetching)\n      const isLoading = computed(() => {\n        return props.fetching || (!commentStore.comments.length && commentStore.fetching)\n      })\n\n      enum PostKey {\n        Root = 'root',\n        Reply = 'reply'\n      }\n      const postingKey = ref<PostKey>()\n      const isRootPosting = computed(() => isPosting.value && postingKey.value === PostKey.Root)\n      const isReplyPosting = computed(() => isPosting.value && postingKey.value === PostKey.Reply)\n\n      const commentState = reactive({\n        sort: SortType.Desc,\n        replyPID: 0\n      })\n\n      const guestProfile = ref<Author>({\n        name: '',\n        email: '',\n        site: ''\n      })\n\n      const rootPenState = reactive({\n        content: '',\n        previewed: false\n      })\n\n      const clearRootPenContent = () => {\n        rootPenState.content = ''\n      }\n      const closeRootPenPreview = () => {\n        rootPenState.previewed = false\n      }\n\n      const cancelCommentReply = () => {\n        commentState.replyPID = 0\n      }\n      const replyComment = (commentID: number) => {\n        commentState.replyPID = commentID\n        gtag?.event('reply_comment', {\n          event_category: GAEventCategories.Comment\n        })\n      }\n\n      const fetchCommentList = (params: CommentFetchParams = {}, loadmore?: boolean) => {\n        const _params = {\n          ...params,\n          sort: commentState.sort,\n          post_id: props.postId\n        }\n        return commentStore.fetchList(_params, loadmore)\n      }\n\n      const fetchSortComments = (sort: SortType) => {\n        if (commentState.sort !== sort) {\n          commentState.sort = sort\n          fetchCommentList()\n          scrollToAnchor(ANCHOR.COMMENT_ELEMENT_ID)\n        }\n      }\n\n      const fetchPageComments = (page: number) => {\n        const comments = commentStore.comments\n        const lastCommentID = ANCHOR.getCommentItemElementID(comments[comments.length - 2].id)\n        fetchCommentList({ page }, true).then(() => {\n          nextTick().then(() => {\n            scrollToAnchor(lastCommentID)\n          })\n        })\n      }\n\n      const handleDeleteComment = (commentID: number) => {\n        commentStore.deleteComment(commentID).catch((error) => {\n          console.warn('delete comment failed', error)\n          alert(error.message)\n        })\n      }\n\n      const createComment = async (payload: { content: string; pid: number }) => {\n        gtag?.event('submit_comment', {\n          event_category: GAEventCategories.Comment\n        })\n\n        // content length\n        if (!payload.content || !payload.content.trim()) {\n          throw `${i18n.t(LanguageKey.COMMENT_POST_CONTENT)} ?`\n        }\n        if (payload.content.length > 3000) {\n          throw `${i18n.t(LanguageKey.COMMENT_POST_ERROR_CONTENT)} ?`\n        }\n\n        // temp user profile\n        const isGuest = identityStore.user.type === UserType.Null\n        const guestProfileValue = guestProfile.value\n        if (isGuest) {\n          if (!guestProfileValue.name) {\n            throw i18n.t(LanguageKey.COMMENT_POST_NAME) + '?'\n          }\n          if (!guestProfileValue.email) {\n            throw i18n.t(LanguageKey.COMMENT_POST_EMAIL) + '?'\n          }\n        }\n\n        const author: Author = isGuest\n          ? toRaw(guestProfileValue)\n          : identityStore.user.type === UserType.Local\n          ? identityStore.user.localProfile!\n          : {\n              name: identityStore.user.disqusProfile.name,\n              site: identityStore.user.disqusProfile.url\n            }\n        if (!author.email) {\n          Reflect.deleteProperty(author, 'email')\n        }\n        if (!author.site) {\n          Reflect.deleteProperty(author, 'site')\n        }\n\n        try {\n          const newComment = await commentStore.postComment({\n            pid: payload.pid,\n            post_id: props.postId,\n            content: payload.content,\n            agent: globalState.userAgent.original,\n            author\n          })\n          // set user profile\n          if (isGuest) {\n            identityStore.saveLocalUser({\n              ...author,\n              email_hash: newComment.author.email_hash\n            })\n          }\n          // random emoji rain\n          luanchEmojiRain(payload.content)\n        } catch (error: any) {\n          console.warn('submit comment failed:', error)\n          throw error.message\n        }\n      }\n\n      const validateFormByID = (formID: string) => {\n        const formElement = document.getElementById(formID)! as HTMLFormElement\n        const check_status = formElement.checkValidity()\n        formElement.reportValidity()\n        return check_status ? Promise.resolve() : Promise.reject()\n      }\n\n      const handleRootSubmit = async (content: string) => {\n        await validateFormByID(ANCHOR.COMMENT_PUBLISHER_ELEMENT_ID)\n        postingKey.value = PostKey.Root\n        try {\n          await createComment({ content, pid: 0 })\n          closeRootPenPreview()\n          clearRootPenContent()\n        } catch (error: any) {\n          alert(error)\n        } finally {\n          postingKey.value = UNDEFINED\n        }\n      }\n\n      const handleReplySubmit = async (content: string) => {\n        await validateFormByID(ANCHOR.COMMENT_REPLY_PUBLISHER_ELEMENT_ID)\n        postingKey.value = PostKey.Reply\n        try {\n          await createComment({ content, pid: commentState.replyPID })\n          cancelCommentReply()\n        } catch (error: any) {\n          alert(error)\n        } finally {\n          postingKey.value = UNDEFINED\n        }\n      }\n\n      watch(isLoading, (isFetching) => {\n        if (isFetching) {\n          cancelCommentReply()\n        }\n      })\n\n      onBeforeUnmount(() => {\n        cancelCommentReply()\n      })\n      onUnmounted(() => {\n        commentStore.clearList()\n      })\n\n      return {\n        ANCHOR,\n        isFetching,\n        isLoading,\n        isRootPosting,\n        isReplyPosting,\n        commentStore,\n        commentState,\n        rootPenState,\n        guestProfile,\n        replyComment,\n        handleDeleteComment,\n        handleRootSubmit,\n        handleReplySubmit,\n        cancelCommentReply,\n        fetchSortComments,\n        fetchPageComments\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .comment-box {\n    padding: $gap;\n    @include common-bg-module();\n    @include radius-box($lg-radius);\n\n    .divider {\n      border-color: $module-bg-darker-1 !important;\n    }\n  }\n</style>\n","<template>\n  <div class=\"article-skeleton\">\n    <div class=\"module\">\n      <div class=\"content-skeleton\">\n        <skeleton-line class=\"title\" />\n        <skeleton-paragraph class=\"content\" :lines=\"9\" line-height=\"1.3em\" />\n      </div>\n    </div>\n    <div class=\"module\">\n      <div class=\"share-skeleton\">\n        <skeleton-base class=\"item\" v-for=\"item in socialCount\" :key=\"item\" />\n      </div>\n    </div>\n    <div class=\"module\">\n      <ul\n        class=\"related-skeleton\"\n        :style=\"{ 'grid-template-columns': `repeat(${relatedCount}, 1fr)` }\"\n      >\n        <skeleton-base v-for=\"item in relatedCount\" :key=\"item\" class=\"item\" />\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  export default defineComponent({\n    name: 'ArticleDetailSkeleton',\n    props: {\n      socialCount: {\n        type: Number,\n        required: true\n      },\n      relatedCount: {\n        type: Number,\n        required: true\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .article-skeleton {\n    .module {\n      margin-bottom: $lg-gap;\n      @include radius-box($sm-radius);\n      @include common-bg-module();\n    }\n\n    .content-skeleton {\n      padding: 1rem 2rem;\n\n      .title {\n        width: 60% !important;\n        height: 26px !important;\n        margin: 2rem auto !important;\n      }\n\n      .content {\n        margin-top: 3rem;\n        margin-bottom: 1rem;\n      }\n    }\n\n    .share-skeleton {\n      padding: $gap;\n      display: flex;\n      justify-content: space-between;\n\n      .item {\n        height: 3rem !important;\n        margin-right: $gap;\n        &:last-child {\n          margin-right: 0;\n        }\n      }\n    }\n\n    .related-skeleton {\n      padding: $gap;\n      margin: 0;\n      display: grid;\n      grid-gap: $gap;\n      @include radius-box($sm-radius);\n      @include common-bg-module();\n\n      .item {\n        width: auto !important;\n        height: 8rem !important;\n      }\n    }\n  }\n</style>\n","<template>\n  <div ref=\"element\" class=\"detail\">\n    <transition name=\"module\">\n      <div\n        class=\"oirigin\"\n        :class=\"{\n          original: isOriginal,\n          reprint: isReprint,\n          hybrid: isHybrid\n        }\"\n      >\n        <i18n :k=\"LanguageKey.ORIGIN_ORIGINAL\" v-if=\"isOriginal\" />\n        <i18n :k=\"LanguageKey.ORIGIN_REPRINT\" v-else-if=\"isReprint\" />\n        <i18n :k=\"LanguageKey.ORIGIN_HYBRID\" v-else-if=\"isHybrid\" />\n      </div>\n    </transition>\n    <div class=\"knowledge\" key=\"knowledge\">\n      <div class=\"title\">\n        <h2 class=\"text\">{{ article.title }}</h2>\n        <div class=\"meta\">\n          <i class=\"iconfont icon-t\"></i>\n          <i18n\n            :zh=\"`共 ${numberSplit(articleDetailStore.contentLength)} 字，需阅读 ${\n              articleDetailStore.readMinutes\n            } 分钟`\"\n            :en=\"`${numberSplit(articleDetailStore.contentLength)} words, ${\n              articleDetailStore.readMinutes\n            } min read`\"\n          />\n          <responsive desktop>\n            <divider type=\"vertical\" class=\"vertical\" />\n            <span>\n              <i class=\"iconfont icon-clock-outline\"></i>\n              <udate to=\"YMDm\" :date=\"article.create_at\" separator=\"/\" />\n            </span>\n          </responsive>\n          <divider type=\"vertical\" class=\"vertical\" />\n          <span>\n            <i class=\"iconfont icon-eye\"></i>\n            <span>{{ numberSplit(article.meta.views) }}&nbsp;</span>\n            <i18n :k=\"LanguageKey.ARTICLE_VIEWS\" />\n          </span>\n        </div>\n      </div>\n      <markdown :html=\"articleDetailStore.defaultContent?.html\" />\n      <transition name=\"module\" mode=\"out-in\">\n        <div :id=\"readmoreId\" v-if=\"isRenderMoreEnabled\" class=\"readmore\">\n          <button class=\"readmore-btn\" :disabled=\"isRenderMoreContent\" @click=\"handleRenderMore\">\n            <i18n\n              :k=\"\n                isRenderMoreContent ? LanguageKey.ARTICLE_RENDERING : LanguageKey.ARTICLE_READ_ALL\n              \"\n            />\n            <i class=\"iconfont icon-loadmore\"></i>\n          </button>\n        </div>\n        <markdown\n          v-else-if=\"articleDetailStore.renderedFullContent\"\n          :html=\"articleDetailStore.moreContent?.html\"\n        />\n      </transition>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, computed, nextTick, PropType } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { LanguageKey } from '/@/language'\n  import { Article, useArticleDetailStore } from '/@/stores/article'\n  import { isOriginalType, isHybridType, isReprintType } from '/@/transforms/state'\n  import { numberSplit } from '/@/transforms/text'\n  import Markdown from '/@/components/common/markdown.vue'\n\n  export default defineComponent({\n    name: 'ArticleContent',\n    components: { Markdown },\n    props: {\n      article: {\n        type: Object as PropType<Article>,\n        required: true\n      },\n      readmoreId: {\n        type: String,\n        required: true\n      }\n    },\n    setup(props) {\n      const { i18n } = useEnhancer()\n      const articleDetailStore = useArticleDetailStore()\n      const isHybrid = computed(() => isHybridType(props.article.origin!))\n      const isReprint = computed(() => isReprintType(props.article.origin!))\n      const isOriginal = computed(() => isOriginalType(props.article.origin!))\n\n      const element = ref<HTMLElement>()\n      const isRenderMoreContent = ref(false)\n      const isRenderMoreEnabled = computed(() => {\n        return articleDetailStore.isLongContent && !articleDetailStore.renderedFullContent\n      })\n\n      const handleRenderMore = () => {\n        isRenderMoreContent.value = true\n        nextTick(() => {\n          setTimeout(() => {\n            articleDetailStore.renderFullContent()\n            isRenderMoreContent.value = false\n          }, 0)\n        })\n      }\n\n      return {\n        LanguageKey,\n        i18n,\n        element,\n        isHybrid,\n        isReprint,\n        isOriginal,\n        articleDetailStore,\n        isRenderMoreEnabled,\n        isRenderMoreContent,\n        numberSplit,\n        handleRenderMore\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .detail {\n    padding: 1rem 2rem;\n    position: relative;\n    overflow: hidden;\n    height: auto;\n    transition: height $transition-time-normal;\n\n    .oirigin {\n      position: absolute;\n      top: 0.6rem;\n      left: -2.4rem;\n      transform: rotate(-45deg);\n      width: 8rem;\n      height: 2rem;\n      line-height: 2rem;\n      text-align: center;\n      transform-origin: center;\n      color: $white;\n      font-weight: bold;\n      font-size: $font-size-small;\n      background-color: var(--color);\n      &.original {\n        --color: #{rgba($surmon, 0.7)};\n      }\n      &.hybrid {\n        --color: #{rgba($accent, 0.7)};\n      }\n      &.reprint {\n        --color: #{rgba($red, 0.7)};\n      }\n    }\n\n    .knowledge {\n      user-select: text;\n      position: relative;\n\n      .title {\n        margin: 1em 0 1.5em 0;\n        text-align: center;\n\n        .text {\n          font-weight: 700;\n          font-size: $font-size-h2 * 0.95;\n          margin-bottom: $gap;\n        }\n\n        .meta {\n          display: inline-block;\n          color: $text-disabled;\n          font-size: $font-size-small;\n          user-select: none;\n          line-height: 2;\n          .iconfont {\n            margin-right: $xs-gap;\n          }\n          .vertical {\n            top: -1px;\n          }\n        }\n      }\n\n      .readmore {\n        position: absolute;\n        bottom: 0;\n        width: 100%;\n        height: 18rem;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        background: linear-gradient(to top, $module-bg-hover, transparent);\n\n        .readmore-btn {\n          width: 80%;\n          height: 3rem;\n          margin-top: 2rem;\n          line-height: 3rem;\n          text-align: center;\n          color: $text-reversal;\n          background-color: $primary-lighter;\n          @include background-transition();\n          @include radius-box($xs-radius);\n\n          &[disabled] {\n            cursor: no-drop;\n          }\n\n          &:hover {\n            background-color: $primary;\n          }\n\n          .iconfont {\n            margin-left: $sm-gap;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"share-box\">\n    <base-share class=\"share\" :socials=\"socials\" />\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, PropType } from 'vue'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n  import BaseShare, { SocialMedia } from '/@/components/widget/share.vue'\n\n  export default defineComponent({\n    name: 'ArticleLikeShare',\n    components: {\n      BaseShare\n    },\n    props: {\n      socials: {\n        type: Array as PropType<SocialMedia[]>,\n        default: () => []\n      }\n    },\n    setup(props) {\n      const skeletonCount = props.socials.length\n        ? props.socials.length\n        : Object.keys(SocialMedia).length\n\n      return {\n        skeletonCount,\n        VALUABLE_LINKS\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  $share-size: 3rem;\n\n  .share-box {\n    padding: $gap;\n\n    .share {\n      width: 100%;\n      opacity: 0.8;\n      display: flex;\n      justify-content: space-between;\n      &:hover {\n        opacity: 1;\n      }\n\n      ::v-deep(.share-ejector) {\n        flex-grow: 1;\n        width: auto;\n        height: $share-size;\n        line-height: $share-size;\n        margin-right: $gap;\n        font-size: $font-size-h4;\n        border-radius: $xs-radius;\n        background-color: $module-bg-darker-1;\n\n        &:last-child {\n          margin-right: 0;\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"meta\" :class=\"{ plain }\">\n    <div class=\"actions\">\n      <slot name=\"action\"></slot>\n    </div>\n    <div class=\"line\">\n      <i18n zh=\"本文于\" en=\"Published at\" />\n      <router-link\n        class=\"link date\"\n        :title=\"article.create_at\"\n        :to=\"getDateLink(article.create_at)\"\n      >\n        <udate to=\"YMDm\" :date=\"article.create_at\" separator=\"/\" />\n      </router-link>\n      <i18n zh=\"发布在\" en=\"in\" />\n      <span v-for=\"(category, index) in article.category\" :key=\"index\">\n        <router-link\n          class=\"link category\"\n          :title=\"`${firstUpperCase(category.slug)} | ${category.description}`\"\n          :to=\"getCategoryFlowRoute(category.slug)\"\n        >\n          <i18n :zh=\"category.name\" :en=\"firstUpperCase(category.slug)\" />\n        </router-link>\n        <span v-if=\"article.category[index + 1]\">\n          <i18n zh=\"、\" en=\",\" />\n        </span>\n      </span>\n      <span v-if=\"!article.category.length\">\n        <i18n zh=\"未知分类下\" en=\"(no catgory)\" />\n      </span>\n      <template v-if=\"plain\"><br /></template>\n      <template v-else><divider type=\"vertical\" size=\"sm\" /></template>\n      <span v-for=\"(tag, index) in article.tag\" :key=\"index\">\n        <router-link\n          class=\"link tag\"\n          :title=\"`${tagEnName(tag)} | ${tag.description}`\"\n          :to=\"getTagFlowRoute(tag.slug)\"\n        >\n          <i18n :zh=\"`#${tag.name}`\" :en=\"`#${tagEnName(tag)}`\" />\n        </router-link>\n        <span v-if=\"article.tag[index + 1]\">\n          <i18n zh=\"、\" en=\",\" />\n        </span>\n      </span>\n    </div>\n    <div class=\"line\">\n      <i class=\"icon iconfont icon-creative-commons\"></i>\n      <i18n>\n        <template #zh>\n          <ulink\n            class=\"link copyright\"\n            href=\"https://creativecommons.org/licenses/by-nc/4.0/deed.zh\"\n            >自由转载 - 署名 - 非商业性使用</ulink\n          >\n        </template>\n        <template #en>\n          <ulink\n            class=\"link copyright\"\n            href=\"https://creativecommons.org/licenses/by-nc/4.0/deed.en\"\n            >Creative Commons BY-NC 4.0</ulink\n          >\n        </template>\n      </i18n>\n      <template v-if=\"plain\"><br /></template>\n      <template v-else><divider type=\"vertical\" /></template>\n      <span class=\"link permalink\" @click=\"copy(articleURL)\">\n        {{ articleURL }}\n      </span>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, PropType } from 'vue'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { LanguageKey } from '/@/language'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useIdentityStore } from '/@/stores/identity'\n  import { useArticleDetailStore, Article } from '/@/stores/article'\n  import { tagEnName } from '/@/stores/tag'\n  import { dateToYMD } from '/@/transforms/moment'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { getPageURL } from '/@/transforms/url'\n  import {\n    getArticleDetailRoute,\n    getTagFlowRoute,\n    getCategoryFlowRoute,\n    getDateFlowRoute\n  } from '/@/transforms/route'\n  import { copy } from '/@/utils/clipboard'\n\n  export default defineComponent({\n    name: 'ArticleMeta',\n    props: {\n      article: {\n        type: Object as PropType<Article>,\n        required: true\n      },\n      plain: {\n        type: Boolean,\n        default: false\n      }\n    },\n    setup(props) {\n      const { i18n, gtag, globalState } = useEnhancer()\n      const identityStore = useIdentityStore()\n      const articleDetailStore = useArticleDetailStore()\n      const isLiked = computed(() => identityStore.isLikedPage(props.article.id))\n      const articleURL = computed(() => getPageURL(getArticleDetailRoute(props.article.id)))\n      const likes = computed(() => props.article.meta.likes)\n\n      const handleOpenSponsor = () => {\n        globalState.toggleSwitcher('sponsor', true)\n        gtag?.event('article_sponsor', {\n          event_category: GAEventCategories.Article\n        })\n      }\n\n      const handleLike = async () => {\n        if (isLiked.value) {\n          return false\n        }\n\n        gtag?.event('article_like', {\n          event_category: GAEventCategories.Article\n        })\n\n        try {\n          await articleDetailStore.postArticleLike(props.article.id)\n          identityStore.likePage(props.article.id)\n        } catch (error) {\n          const message = i18n.t(LanguageKey.POST_ACTION_ERROR)\n          console.warn(message, error)\n          alert(message)\n        }\n      }\n\n      const getDateLink = (date: string) => {\n        return getDateFlowRoute(dateToYMD(new Date(date)))\n      }\n\n      return {\n        VALUABLE_LINKS,\n        LanguageKey,\n        articleURL,\n        likes,\n        copy,\n        isLiked,\n        tagEnName,\n        firstUpperCase,\n        handleLike,\n        handleOpenSponsor,\n        getDateLink,\n        getTagFlowRoute,\n        getCategoryFlowRoute\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @use 'sass:math';\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .meta {\n    position: relative;\n    padding: 2rem;\n    text-align: center;\n    &.plain {\n      .line {\n        height: auto;\n        line-height: 2;\n      }\n    }\n\n    .actions {\n      margin-top: $sm-gap;\n      margin-bottom: 2rem;\n    }\n\n    .line {\n      $size: 2rem;\n      height: $size;\n      line-height: $size;\n      margin-bottom: $lg-gap;\n      font-weight: bold;\n      color: $text-secondary;\n      &:last-child {\n        margin: 0;\n      }\n\n      .icon {\n        font-weight: normal;\n        font-size: $font-size-h6;\n        margin-right: $xs-gap;\n      }\n\n      .link {\n        &:hover {\n          @include text-underline();\n        }\n\n        &.date,\n        &.category,\n        &.tag {\n          margin: 0 $xs-gap;\n          color: $text;\n          &:hover {\n            color: $link-hover;\n          }\n        }\n\n        &.date {\n          text-transform: uppercase;\n        }\n\n        &.copyright,\n        &.permalink {\n          color: $text-secondary;\n          &:hover {\n            color: $text;\n          }\n        }\n\n        &.permalink {\n          @include text-underline();\n          cursor: pointer;\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"upvote\">\n    <div class=\"wrapper\">\n      <button\n        class=\"button like\"\n        :class=\"{ liked: isLiked, parkinson: enabledParkinson, newliked: newliked }\"\n        :disabled=\"isLiked\"\n        @click=\"handleLike\"\n      >\n        <i class=\"icon iconfont icon-like\"></i>\n        <span class=\"text\">\n          <i18n>\n            <template #zh>真棒！{{ likes }}</template>\n            <template #en>{{ isLiked ? 'Upvoted' : 'Upvote' }} {{ likes }}</template>\n          </i18n>\n        </span>\n        <template v-if=\"enabledParkinson\">\n          <span class=\"parkinson-mask\">\n            <i class=\"iconfont\" :class=\"newliked ? 'icon-like' : 'icon-like-pre'\"></i>\n          </span>\n          <div class=\"parkinson-likes\">+ 1</div>\n        </template>\n      </button>\n      <button v-if=\"!hiddenSponsor\" class=\"button sponsor\" @click=\"handleSponsor\">\n        <i class=\"icon iconfont icon-heart\"></i>\n      </button>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref } from 'vue'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n  import { LanguageKey } from '/@/language'\n\n  enum ArticleUpvoteEvents {\n    Like = 'like',\n    Sponsor = 'sponsor'\n  }\n\n  export default defineComponent({\n    name: 'ArticleUpvote',\n    props: {\n      likes: {\n        type: Number,\n        required: true\n      },\n      isLiked: {\n        type: Boolean,\n        required: true\n      },\n      hiddenSponsor: {\n        type: Boolean,\n        default: false\n      },\n      enabledParkinson: {\n        type: Boolean,\n        default: false\n      }\n    },\n    emits: [ArticleUpvoteEvents.Like, ArticleUpvoteEvents.Sponsor],\n    setup(props, context) {\n      const handleSponsor = () => {\n        context.emit(ArticleUpvoteEvents.Sponsor)\n      }\n\n      const newliked = ref(false)\n      const handleLiked = () => {\n        newliked.value = true\n      }\n\n      const handleLike = () => {\n        if (!props.isLiked) {\n          context.emit(ArticleUpvoteEvents.Like, handleLiked)\n        }\n      }\n\n      return {\n        VALUABLE_LINKS,\n        LanguageKey,\n        handleLike,\n        handleSponsor,\n        newliked\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @use 'sass:math';\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .upvote {\n    display: flex;\n    justify-content: center;\n    $button-size: 3rem;\n    $button-radius: $sm-radius;\n    $like-icon-size: $font-size-h2;\n    /* https://github.com/ant-design/ant-design/blob/master/components/style/themes/variable.less#L121 */\n    $lighter-red: mix($white, $red, 10%);\n\n    .wrapper {\n      position: relative;\n\n      .button {\n        display: inline-flex;\n        justify-content: center;\n        align-items: center;\n        height: $button-size;\n        line-height: $button-size;\n        padding: 0 $gap;\n        border-width: 1px 0;\n        border-color: $lighter-red;\n        color: $lighter-red;\n        transition: background-color $transition-time-fast, color $transition-time-fast;\n        &[disabled] {\n          color: $white;\n          background-color: $lighter-red;\n          &:not(.newliked) {\n            opacity: 0.8;\n          }\n        }\n        &:not([disabled]):not(.parkinson):hover {\n          color: $white;\n          background-color: $lighter-red;\n        }\n        &:first-of-type {\n          border-left-width: 1px;\n          border-top-left-radius: $button-radius;\n          border-bottom-left-radius: $button-radius;\n        }\n        &:last-of-type {\n          border-right-width: 1px;\n          border-top-right-radius: $button-radius;\n          border-bottom-right-radius: $button-radius;\n        }\n        & + button {\n          border-left-width: 1px;\n        }\n\n        &.sponsor {\n          font-size: $font-size-h4;\n        }\n        &.like {\n          min-width: 8rem;\n          .icon {\n            font-size: $like-icon-size;\n          }\n          .text {\n            margin-left: $sm-gap;\n            font-weight: bold;\n          }\n        }\n      }\n\n      .button.like.parkinson {\n        .parkinson-mask {\n          position: absolute;\n          top: 0;\n          left: 0;\n          z-index: 1;\n          width: 100%;\n          height: 100%;\n          display: flex;\n          line-height: $button-size;\n          padding: 0 $gap;\n          border-radius: $button-radius;\n          font-size: $like-icon-size + 1;\n          background-color: $red;\n          color: $white;\n          @include hidden();\n        }\n\n        .parkinson-likes {\n          position: absolute;\n          bottom: 0;\n          left: 10%;\n          color: $red;\n          font-size: 100px;\n          font-weight: bold;\n          transition: all $transition-time-normal;\n          @include hidden();\n        }\n\n        &:not([disabled]):hover,\n        &.newliked {\n          /* parkinson animate */\n          .parkinson-mask {\n            transition: opacity $transition-time-normal, visibility $transition-time-normal;\n            transition-delay: $transition-time-fast;\n            @include visible();\n            @keyframes pre-like-icon {\n              0% {\n                transform: rotate(6deg) translateY(-2px) translateX(-40%);\n              }\n              20% {\n                transform: rotate(8deg) translateY(0px) translateX(-43%);\n              }\n              40% {\n                transform: rotate(8deg) translateY(-3px) translateX(-48%);\n              }\n              60% {\n                transform: rotate(6deg) translateY(0px) translateX(-43%);\n              }\n              80% {\n                transform: rotate(10deg) translateY(2px) translateX(-50%);\n              }\n              100% {\n                transform: rotate(6deg) translateY(-2px) translateX(-42%);\n              }\n            }\n            .iconfont {\n              transition: transform $transition-time-normal, margin $transition-time-normal;\n              transition-delay: $transition-time-normal * 2;\n              transform: rotate(6deg) translateY(-2px) translateX(-50%);\n              animation: pre-like-icon 0.2s infinite;\n              animation-delay: $transition-time-normal * 3;\n              margin-left: 50%;\n            }\n          }\n\n          /* liked animate */\n          &.newliked {\n            .parkinson-mask {\n              transition-delay: 1s;\n              @include hidden();\n              /* icon animate */\n              @keyframes liked-icon {\n                0% {\n                  transform: rotate(0deg) translateX(-50%);\n                }\n                40% {\n                  transform: rotate(-5deg) translateX(-50%) translateY(-10%);\n                }\n                50% {\n                  transform: rotate(-8deg) translateX(-50%) translateY(-66%) scale(1.6);\n                }\n                70%,\n                80% {\n                  transform: rotate(0deg) translateX(-50%) translateY(-66%) scale(1.3);\n                  margin-left: 50%;\n                }\n                85% {\n                  transform: rotate(0deg) translateX(-50%) translateY(0);\n                  margin-left: 50%;\n                }\n                100% {\n                  transform: rotate(0deg) translateX(0%);\n                  margin-left: 0;\n                }\n              }\n              .iconfont {\n                text-stroke: 1px $red;\n                -webkit-text-stroke: 1px $red;\n                transform-origin: left center;\n                transform: rotate(0deg) translateX(-50%);\n                animation: liked-icon 1s forwards;\n              }\n            }\n            /* likes animate */\n            @keyframes likes-count {\n              0% {\n                opacity: 0;\n                transform: scale(1);\n              }\n              20% {\n                @include visible();\n                bottom: 100px;\n                transform: scale(1);\n              }\n              100% {\n                opacity: 0;\n                bottom: 120px;\n                transform: scale(0.8);\n              }\n            }\n            .parkinson-likes {\n              animation: likes-count 0.5s forwards;\n              animation-delay: 0.5s;\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"related\">\n    <ul class=\"articles\" :style=\"{ gridTemplateColumns: `repeat(${columns}, 1fr)` }\">\n      <li\n        v-for=\"(article, index) in articleList\"\n        :class=\"{ disabled: !article.id }\"\n        :key=\"index\"\n        class=\"item\"\n      >\n        <router-link\n          class=\"item-article\"\n          :title=\"article.title\"\n          :to=\"getArticleDetailRoute(article.id)\"\n        >\n          <div\n            class=\"thumb\"\n            :style=\"{\n              backgroundImage: `url(${getMobileArticleListThumbnailURL(article.thumb)})`\n            }\"\n          ></div>\n          <div class=\"title\">{{ article.title }}</div>\n          <div class=\"description\">{{ article.description }}</div>\n        </router-link>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, PropType } from 'vue'\n  import { Article } from '/@/stores/article'\n  import { getArticleDetailRoute } from '/@/transforms/route'\n  import { getMobileArticleListThumbnailURL } from '/@/transforms/thumbnail'\n\n  export default defineComponent({\n    name: 'ArticleRelated',\n    props: {\n      articles: {\n        type: Array as PropType<Article[]>,\n        default: () => []\n      },\n      columns: {\n        type: Number,\n        default: 4\n      },\n      count: {\n        type: Number,\n        default: 8\n      }\n    },\n    setup(props) {\n      const articleList = computed<Article[]>(() => {\n        const articles = [...props.articles].slice(0, props.count)\n        if (articles.length >= props.count) {\n          return articles\n        }\n        return [\n          ...articles,\n          ...new Array(props.count - articles.length).fill({\n            title: '-',\n            description: '',\n            id: null,\n            _id: '',\n            thumb: ''\n          })\n        ]\n      })\n\n      return {\n        articleList,\n        getArticleDetailRoute,\n        getMobileArticleListThumbnailURL\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .related {\n    overflow: hidden;\n\n    .articles {\n      display: grid;\n      grid-template-columns: repeat(4, 1fr);\n      grid-gap: $gap;\n      width: 100%;\n      padding: 0;\n      margin: 0;\n      list-style: none;\n      overflow: hidden;\n\n      .item {\n        width: auto;\n        @include common-bg-module();\n        @include radius-box($sm-radius);\n\n        &.disabled {\n          pointer-events: none;\n          opacity: 0.6;\n        }\n\n        .item-article {\n          display: block;\n          position: relative;\n          overflow: hidden;\n\n          .thumb {\n            position: relative;\n            opacity: 0.88;\n            width: 100%;\n            height: 7rem;\n            background-color: $module-bg-darker-2;\n            background-size: cover;\n            background-position: 50% 46%;\n            transition: all $transition-time-fast;\n            display: flex;\n            flex-direction: column;\n            justify-content: end;\n\n            &::before {\n              content: '';\n              position: absolute;\n              background: linear-gradient(\n                to top,\n                rgba($black, 0.2) 20%,\n                rgba($black, 0.1) 50%,\n                transparent 90%\n              );\n              width: 100%;\n              height: 100%;\n              top: 0;\n              left: 0;\n            }\n          }\n\n          .title,\n          .description {\n            display: block;\n            width: 100%;\n            padding: 0 $sm-gap;\n            transition: color $transition-time-fast;\n            @include text-overflow();\n          }\n\n          .title {\n            font-size: $font-size-h6;\n            margin-top: $sm-gap;\n            margin-bottom: $xs-gap;\n            font-weight: bold;\n            color: $text;\n          }\n\n          .description {\n            margin-bottom: $sm-gap;\n            font-size: $font-size-small;\n            color: $text-disabled;\n          }\n\n          &:hover {\n            .thumb {\n              opacity: 1;\n              background-position: 50% 50%;\n            }\n\n            .title {\n              color: $link-color;\n            }\n            .description {\n              color: $text-secondary;\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"neighbour\">\n    <router-link\n      v-if=\"prev\"\n      class=\"link prev\"\n      :title=\"prev.title\"\n      :to=\"getArticleDetailRoute(prev.id)\"\n    >\n      <div class=\"icon\">\n        <i class=\"iconfont icon-prev\"></i>\n      </div>\n      <div class=\"content\">\n        <p class=\"title\">{{ prev.title }}</p>\n        <p class=\"description\">{{ prev.description }}</p>\n      </div>\n    </router-link>\n    <div v-else class=\"null\">\n      <i18n zh=\"已是最早\" en=\"NULL\" />\n    </div>\n    <router-link\n      v-if=\"next\"\n      class=\"link next\"\n      :title=\"next.title\"\n      :to=\"getArticleDetailRoute(next.id)\"\n    >\n      <div class=\"content\">\n        <p class=\"title\">{{ next.title }}</p>\n        <p class=\"description\">{{ next.description }}</p>\n      </div>\n      <div class=\"icon\">\n        <i class=\"iconfont icon-next\"></i>\n      </div>\n    </router-link>\n    <div v-else class=\"null\">\n      <i18n zh=\"已是最新\" en=\"NULL\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, PropType } from 'vue'\n  import { getArticleDetailRoute } from '/@/transforms/route'\n  import { Article } from '/@/stores/article'\n\n  export default defineComponent({\n    name: 'ArticleNeighbour',\n    props: {\n      prev: Object as PropType<Article | null>,\n      next: Object as PropType<Article | null>\n    },\n    setup() {\n      return {\n        getArticleDetailRoute\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .neighbour {\n    display: grid;\n    grid-template-columns: repeat(2, 1fr);\n    grid-gap: $gap;\n    width: 100%;\n    padding: 0;\n    margin: 0;\n    list-style: none;\n    overflow: hidden;\n\n    .link,\n    .null {\n      display: flex;\n      position: relative;\n      overflow: hidden;\n      @include radius-box($sm-radius);\n    }\n\n    .null {\n      justify-content: center;\n      align-items: center;\n      background-color: $module-bg;\n      color: $text-divider;\n      cursor: no-drop;\n    }\n\n    .link {\n      @include common-bg-module();\n      &:hover {\n        .icon {\n          color: $text;\n        }\n        .content {\n          .title {\n            color: $link-color;\n          }\n          .description {\n            color: $text-secondary;\n          }\n        }\n      }\n\n      &.prev {\n        justify-content: flex-start;\n        .icon {\n          border-right-width: 1px;\n        }\n      }\n      &.next {\n        justify-content: space-between;\n        .icon {\n          border-left-width: 1px;\n        }\n      }\n\n      .icon {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        width: 3rem;\n        height: 100%;\n        color: $text-secondary;\n        border-style: solid;\n        border-color: $module-bg-darker-1;\n        transition: all $transition-time-fast;\n      }\n\n      .content {\n        width: calc(100% - 3rem);\n        padding: $sm-gap $gap;\n\n        .title,\n        .description {\n          display: block;\n          width: 100%;\n          transition: color $transition-time-fast;\n          @include text-overflow();\n        }\n\n        .title {\n          font-size: $font-size-h6;\n          margin-top: 0;\n          margin-bottom: $xs-gap;\n          font-weight: bold;\n          color: $text;\n        }\n\n        .description {\n          margin-bottom: 0;\n          font-size: $font-size-small;\n          color: $text-disabled;\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"article-page\">\n    <placeholder :loading=\"fetching\">\n      <template #loading>\n        <article-skeleton :social-count=\"isMobile ? 3 : 8\" :related-count=\"isMobile ? 2 : 3\" />\n      </template>\n      <template #default>\n        <div v-if=\"article\">\n          <div class=\"module margin background overflow\">\n            <article-content\n              :id=\"ANCHORS.ARTICLE_CONTENT_ELEMENT_ID\"\n              :readmore-id=\"ANCHORS.ARTICLE_READMORE_ELEMENT_ID\"\n              :article=\"article\"\n            />\n            <div class=\"divider\"></div>\n            <article-meta\n              :id=\"ANCHORS.ARTICLE_META_ELEMENT_ID\"\n              :article=\"article\"\n              :plain=\"isMobile\"\n            >\n              <template #action>\n                <article-upvote\n                  :likes=\"article.meta.likes\"\n                  :is-liked=\"isLiked\"\n                  :hidden-sponsor=\"isMobile\"\n                  :enabled-parkinson=\"!isMobile && (userAgent.isChrome || userAgent.isFirefox)\"\n                  @like=\"handleLike\"\n                  @sponsor=\"handleSponsor\"\n                />\n              </template>\n            </article-meta>\n          </div>\n          <div class=\"module margin background\">\n            <div class=\"bridge left\"></div>\n            <div class=\"bridge right\"></div>\n            <article-share\n              :id=\"ANCHORS.ARTICLE_SHARE_ELEMENT_ID\"\n              :article-id=\"articleId\"\n              :likes=\"article?.meta?.likes || 0\"\n              :socials=\"\n                isMobile ? [SocialMedia.Wechat, SocialMedia.Weibo, SocialMedia.Twitter] : []\n              \"\n            />\n          </div>\n          <div class=\"module margin overflow\">\n            <article-neighbour :prev=\"store.prevArticle\" :next=\"store.nextArticle\" />\n          </div>\n          <div class=\"module margin overflow\">\n            <article-related\n              :id=\"ANCHORS.ARTICLE_RELATED_ELEMENT_ID\"\n              :columns=\"isMobile ? 2 : 3\"\n              :count=\"isMobile ? 4 : 6\"\n              :articles=\"store.relatedArticles\"\n            />\n          </div>\n        </div>\n      </template>\n    </placeholder>\n    <div class=\"comment\">\n      <comment :plain=\"isMobile\" :fetching=\"fetching\" :post-id=\"articleId\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, watch, onBeforeMount } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useUniversalFetch } from '/@/universal'\n  import { useStores } from '/@/stores'\n  import * as ANCHORS from '/@/constants/anchor'\n  import { UNDEFINED } from '/@/constants/value'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { LanguageKey } from '/@/language'\n  import { SocialMedia } from '/@/components/widget/share.vue'\n  import Comment from '/@/components/comment/index.vue'\n  import ArticleSkeleton from './skeleton.vue'\n  import ArticleContent from './content.vue'\n  import ArticleShare from './share.vue'\n  import ArticleMeta from './meta.vue'\n  import ArticleUpvote from './upvote.vue'\n  import ArticleRelated from './related.vue'\n  import ArticleNeighbour from './neighbour.vue'\n\n  export default defineComponent({\n    name: 'ArticleDetail',\n    components: {\n      Comment,\n      ArticleSkeleton,\n      ArticleContent,\n      ArticleShare,\n      ArticleMeta,\n      ArticleUpvote,\n      ArticleRelated,\n      ArticleNeighbour\n    },\n    props: {\n      articleId: {\n        type: Number,\n        required: true\n      },\n      isMobile: {\n        type: Boolean,\n        default: false\n      }\n    },\n    setup(props) {\n      const { i18n, meta, gtag, globalState } = useEnhancer()\n      const { identity, comment: commentStore, articleDetail: articleDetailStore } = useStores()\n      const article = computed(() => articleDetailStore.article || UNDEFINED)\n      const fetching = computed(() => articleDetailStore.fetching)\n      const isLiked = computed(() => {\n        return Boolean(article.value && identity.isLikedPage(article.value.id))\n      })\n\n      const handleSponsor = () => {\n        globalState.toggleSwitcher('sponsor', true)\n        gtag?.event('article_sponsor', {\n          event_category: GAEventCategories.Article\n        })\n      }\n\n      const handleLike = async (callback) => {\n        if (isLiked.value) {\n          return false\n        }\n\n        gtag?.event('article_like', {\n          event_category: GAEventCategories.Article\n        })\n        try {\n          await articleDetailStore.postArticleLike(article.value!.id)\n          identity.likePage(article.value!.id)\n          callback?.()\n        } catch (error) {\n          const message = i18n.t(LanguageKey.POST_ACTION_ERROR)\n          console.warn(message, error)\n          alert(message)\n        }\n      }\n\n      const fetchArticleDetail = (articleID: number) => {\n        return Promise.all([\n          articleDetailStore.fetchCompleteArticle({ articleID }),\n          commentStore.fetchList({ post_id: articleID })\n        ])\n      }\n\n      meta(() => ({\n        pageTitle: article.value?.title,\n        description: article.value?.description || '',\n        keywords: article.value?.keywords?.join(',') || article.value?.title,\n        twitterCard: 'summary_large_image',\n        ogType: 'article',\n        ogImage: article.value?.thumb\n      }))\n\n      onBeforeMount(() => {\n        watch(\n          () => props.articleId,\n          (articleId) => fetchArticleDetail(articleId),\n          { flush: 'post' }\n        )\n      })\n\n      useUniversalFetch(() => fetchArticleDetail(props.articleId))\n\n      return {\n        ANCHORS,\n        SocialMedia,\n        userAgent: globalState.userAgent,\n        store: articleDetailStore,\n        article,\n        fetching,\n        isLiked,\n        handleLike,\n        handleSponsor\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .article-page {\n    .module {\n      position: relative;\n\n      &.margin {\n        margin-bottom: $lg-gap;\n      }\n\n      &.background {\n        border-radius: $sm-radius;\n        @include common-bg-module();\n      }\n\n      &.overflow {\n        overflow: hidden;\n      }\n\n      .divider {\n        border-top: 2px dotted $module-bg-darker-1;\n      }\n\n      .bridge {\n        $distance: 3rem;\n        position: absolute;\n        top: -$lg-gap;\n        width: $lg-gap;\n        height: $lg-gap;\n        background: linear-gradient(to bottom, $module-bg, $module-bg-darker-1);\n        &.left {\n          left: $distance;\n        }\n        &.right {\n          right: $distance;\n        }\n      }\n    }\n  }\n</style>\n","/**\n * @file Media state\n * @module store.media\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineFetchStore } from './_fetch'\nimport { TunnelModule } from '/@/constants/tunnel'\nimport { isClient } from '/@/app/environment'\nimport { delayPromise } from '/@/utils/delayer'\nimport type { InstagramMediaItem } from '/@/server/getters/instagram'\nimport tunnel from '/@/services/tunnel'\n\nconst LENS_PAGE_FETCH_DELAY = 480\n\n// Douban movies\nexport const useDoubanMoviesStore = defineFetchStore({\n  id: 'doubanMovies',\n  initData: null,\n  onlyOnce: true,\n  fetcher: () => tunnel.dispatch(TunnelModule.DoubanMovies)\n})\n\n// Instagram medias\nexport const useInstagramMediasStore = defineFetchStore({\n  id: 'instagramMedias',\n  initData: [] as Array<InstagramMediaItem>,\n  fetcher() {\n    const _fetch = tunnel.dispatch<Array<InstagramMediaItem>>(TunnelModule.InstagramMedias)\n    return isClient ? delayPromise(LENS_PAGE_FETCH_DELAY, _fetch) : _fetch\n  }\n})\n\n// YouTube playlist\nexport const useYouTubePlayListStore = defineFetchStore({\n  id: 'youtubePlaylist',\n  initData: [] as Array<any>,\n  async fetcher() {\n    const response = await tunnel.dispatch<Array<any>>(TunnelModule.YouTubePlaylist)\n    response.sort((a, b) => a.snippet.position - b.snippet.position)\n    return response\n  }\n})\n\n// YouTube video list\nexport const fetchYouTubeVideoList = (playlistID: string) => {\n  const fetch = tunnel.dispatch<Array<any>>(TunnelModule.YouTubeVideoList, { id: playlistID })\n  return isClient ? delayPromise(LENS_PAGE_FETCH_DELAY, fetch) : fetch\n}\n\n// Twitter userinfo\nexport type TwitterUserinfo = Record<string, any>\nexport const useTwitterUserinfoStore = defineFetchStore({\n  id: 'twitterUserinfo',\n  initData: null as null | TwitterUserinfo,\n  fetcher: () => tunnel.dispatch<TwitterUserinfo>(TunnelModule.TwitterUserInfo)\n})\n\n// Twitter tweets\nexport interface TweeterTweets {\n  data: any[]\n  includes: Record<string, Array<any>>\n  meta: Record<string, any>\n}\nexport const useTwitterTweetsStore = defineFetchStore({\n  id: 'twitterTweets',\n  initData: null as null | TweeterTweets,\n  fetcher: () => tunnel.dispatch<TweeterTweets>(TunnelModule.TwitterTweets)\n})\n\n// My Google map\nexport const useMyGoogleMapStore = defineFetchStore({\n  id: 'myGoogleMap',\n  initData: null,\n  onlyOnce: true,\n  fetcher: () => tunnel.dispatch(TunnelModule.MyGoogleMap)\n})\n","<template>\n  <placeholder :i18n-key=\"LanguageKey.EMPTY_PLACEHOLDER\" :loading=\"fetching\" :data=\"insMedias\">\n    <template #loading>\n      <ul class=\"list\">\n        <li class=\"item\" v-for=\"i in 24\" :key=\"i\">\n          <skeleton-base />\n        </li>\n      </ul>\n    </template>\n    <template #default>\n      <ul class=\"list\">\n        <li class=\"item\" :key=\"index\" v-for=\"(media, index) in insMedias\">\n          <ulink class=\"link\" :href=\"media.permalink\" :title=\"media.caption\">\n            <uimage class=\"cover\" :src=\"getInstagramImage(media, 't')\" :alt=\"media.caption\" />\n            <div class=\"type-icon\">\n              <i class=\"iconfont icon-video\" v-if=\"isVideoMediaIns(media)\"></i>\n              <i class=\"iconfont icon-album\" v-if=\"isAlbumMediaIns(media)\"></i>\n            </div>\n            <div class=\"mask\">\n              <i class=\"iconfont icon-music-play\" v-if=\"isVideoMediaIns(media)\"></i>\n              <i class=\"iconfont icon-eye\" v-else></i>\n            </div>\n          </ulink>\n        </li>\n        <li class=\"item\">\n          <ulink class=\"link more\" :href=\"VALUABLE_LINKS.INSTAGRAM\">•••</ulink>\n        </li>\n      </ul>\n    </template>\n  </placeholder>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, computed, onMounted } from 'vue'\n  import { useInstagramMediasStore } from '/@/stores/media'\n  import { isVideoMediaIns, isAlbumMediaIns, getInstagramImage } from '/@/transforms/media'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n  import { LanguageKey } from '/@/language'\n\n  export default defineComponent({\n    name: 'AboutPageInstagram',\n    setup() {\n      const fetching = ref(true)\n      const store = useInstagramMediasStore()\n      const insMedias = computed(() => store.data.slice(0, 23))\n\n      onMounted(() => {\n        store.fetch().finally(() => {\n          fetching.value = false\n        })\n      })\n\n      return {\n        isVideoMediaIns,\n        isAlbumMediaIns,\n        getInstagramImage,\n        LanguageKey,\n        VALUABLE_LINKS,\n        fetching,\n        store,\n        insMedias\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @use 'sass:math';\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .list {\n    padding: 0;\n    margin: 0;\n    width: 100%;\n    height: 100%;\n    list-style: none;\n    display: grid;\n    grid-template-columns: repeat(12, 1fr);\n    grid-gap: 1rem;\n    $item-size: 74px;\n\n    .item {\n      position: relative;\n      height: $item-size;\n\n      .link {\n        display: block;\n        width: 100%;\n        height: 100%;\n        background-color: $module-bg-darker-1;\n        opacity: 0.8;\n        @include visibility-transition();\n        &:hover {\n          opacity: 1;\n          .mask {\n            @include visible();\n          }\n        }\n\n        &.more {\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          font-size: $font-size-h3;\n        }\n\n        .cover {\n          width: 100%;\n          height: 100%;\n          border-radius: $xs-radius;\n          object-fit: cover;\n        }\n\n        .type-icon {\n          opacity: 0.7;\n          position: absolute;\n          top: math.div($xs-gap, 2);\n          right: $xs-gap;\n          color: $white;\n        }\n\n        .mask {\n          position: absolute;\n          bottom: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          color: $white;\n          background-color: rgba(0, 0, 0, 0.3);\n          @include visibility-transition();\n          @include hidden();\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"statistic\" :class=\"[brand, { dark: isDarkTheme }]\">\n    <placeholder :i18n-key=\"LanguageKey.EMPTY_PLACEHOLDER\" :loading=\"fetching\" :data=\"data\">\n      <template #loading>\n        <ul class=\"skeletons\">\n          <skeleton-base v-for=\"i in 3\" :key=\"i\" class=\"item\" />\n        </ul>\n      </template>\n      <template #default>\n        <div class=\"content\">\n          <ulink class=\"title\" :href=\"href\">\n            <span class=\"left\">\n              <i class=\"iconfont\" :class=\"icon\"></i>\n              <span class=\"text\">{{ platform }}</span>\n            </span>\n            <span class=\"right\">\n              <i class=\"iconfont icon-next\"></i>\n            </span>\n          </ulink>\n          <slot></slot>\n        </div>\n      </template>\n    </placeholder>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  /* eslint-disable vue/one-component-per-file */\n  import { defineComponent, h, PropType } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { LanguageKey } from '/@/language'\n  import { numberToKilo, numberSplit } from '/@/transforms/text'\n\n  export default defineComponent({\n    name: 'StatisticBase',\n    props: {\n      brand: String,\n      icon: String,\n      platform: String,\n      href: String,\n      fetching: Boolean,\n      data: Object as PropType<any>\n    },\n    setup() {\n      const { isDarkTheme } = useEnhancer()\n      return { LanguageKey, isDarkTheme }\n    }\n  })\n\n  export const StatisticCount = defineComponent({\n    name: 'StatisticCount',\n    props: {\n      count: [Number, String],\n      primary: Boolean,\n      large: Boolean,\n      kilo: Boolean,\n      split: Boolean\n    },\n    render() {\n      const number = Number(this.$props.count)\n      const content = this.kilo\n        ? numberToKilo(number)\n        : this.split\n        ? numberSplit(number)\n        : String(number)\n      const classNames = { primary: this.$props.primary, large: this.large }\n      return h('span', { class: ['count', classNames] }, content)\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .statistic {\n    width: 100%;\n    height: 14rem;\n    padding: 1em 1.8em 1.2em 1.8em;\n    border-radius: $lg-radius;\n    @include common-bg-module();\n    position: relative;\n    overflow: hidden;\n    #{--brand-color}: $white;\n    &.douban {\n      #{--s-primary}: $douban-primary;\n    }\n    &.npm {\n      #{--s-primary}: $npm-primary;\n    }\n    &.twitter {\n      #{--s-primary}: $twitter-primary;\n    }\n    &.github {\n      #{--s-primary}: $github-primary;\n    }\n    &.github.dark {\n      #{--s-primary}: $link-color;\n      #{--brand-color}: $text-reversal;\n    }\n\n    .skeletons {\n      margin: 0;\n      padding: 1rem 0;\n      width: 100%;\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n      justify-content: space-between;\n      .item {\n        height: 20%;\n      }\n    }\n\n    .content {\n      color: $text-secondary;\n\n      .title {\n        margin-bottom: $gap;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        &:hover {\n          .right {\n            opacity: 1;\n            color: $text;\n          }\n        }\n\n        .left {\n          .iconfont {\n            color: var(--s-primary);\n            font-size: $font-size-h2;\n            margin-right: $gap;\n          }\n\n          .text {\n            color: $text;\n            font-size: $font-size-h3;\n            font-weight: bold;\n            letter-spacing: 1px;\n          }\n        }\n\n        .right {\n          color: $text-divider;\n          opacity: 0.4;\n          transition: all $transition-time-fast;\n          .iconfont {\n            margin: 0;\n          }\n        }\n      }\n\n      ::v-deep(.count) {\n        color: $text;\n        font-weight: bold;\n        margin: 0 $xs-gap;\n        &.large {\n          font-size: $font-size-h2;\n        }\n        &.primary {\n          color: var(--s-primary);\n        }\n      }\n\n      ::v-deep(.iconfont) {\n        color: $text-disabled;\n        margin-right: $sm-gap;\n      }\n    }\n  }\n</style>\n","<template>\n  <statistic-base\n    brand=\"douban\"\n    icon=\"icon-douban\"\n    :data=\"store.data\"\n    :fetching=\"fetching\"\n    :href=\"VALUABLE_LINKS.DOUBAN_MOVIE\"\n    :platform=\"isZhLang ? '我在豆瓣' : 'Douban Movie'\"\n  >\n    <p>\n      <i class=\"iconfont icon-video-outline\"></i>\n      <i18n>\n        <template #zh>\n          <span>标记看过</span>\n          <statistic-count large primary split :count=\"store.data.total_collections\" />\n          <span>部影片</span>\n        </template>\n        <template #en>\n          <statistic-count large primary split :count=\"store.data.total_collections\" />\n          <span>films marked</span>\n        </template>\n      </i18n>\n    </p>\n    <p>\n      <i class=\"iconfont icon-clock-outline\"></i>\n      <i18n>\n        <template #zh>\n          <span>累计花费</span>\n          <statistic-count split :count=\"totalSpent\" />\n          <span>小时</span>\n        </template>\n        <template #en>\n          <statistic-count split :count=\"totalSpent\" />\n          <span>hrs watching</span>\n        </template>\n      </i18n>\n    </p>\n    <p>\n      <i class=\"iconfont icon-week\"></i>\n      <i18n>\n        <template #zh>平均每周 <statistic-count :count=\"weeklyAvg\" /> 部影片</template>\n        <template #en><statistic-count :count=\"weeklyAvg\" /> films per week</template>\n      </i18n>\n    </p>\n  </statistic-base>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, computed, onMounted } from 'vue'\n  import { useDoubanMoviesStore } from '/@/stores/media'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n  import { useEnhancer } from '/@/app/enhancer'\n  import StatisticBase, { StatisticCount } from './base.vue'\n\n  export default defineComponent({\n    name: 'AboutPageDoubanStatistic',\n    components: { StatisticBase, StatisticCount },\n    setup() {\n      const { isZhLang } = useEnhancer()\n      const store = useDoubanMoviesStore()\n      const fetching = ref(true)\n      const totalSpent = computed(() => Math.trunc(store.data?.total_spent ?? 0))\n      const weeklyAvg = computed(() => (store.data?.weekly_avg ?? 0).toFixed(2))\n      onMounted(() => {\n        store.fetch().finally(() => {\n          fetching.value = false\n        })\n      })\n\n      return {\n        VALUABLE_LINKS,\n        isZhLang,\n        fetching,\n        store,\n        totalSpent,\n        weeklyAvg\n      }\n    }\n  })\n</script>\n","<template>\n  <statistic-base\n    brand=\"github\"\n    icon=\"icon-github\"\n    :data=\"store.data\"\n    :fetching=\"fetching\"\n    :href=\"VALUABLE_LINKS.GITHUB\"\n    :platform=\"isZhLang ? '我在 GitHub' : 'GitHub'\"\n  >\n    <p>\n      <i class=\"iconfont icon-star-outline\"></i>\n      <i18n>\n        <template #zh>\n          <span>共获得</span>\n          <statistic-count large primary split :count=\"store.data?.statistics.stars\" />\n          <span>个 star</span>\n        </template>\n        <template #en>\n          <statistic-count large primary split :count=\"store.data?.statistics.stars\" />\n          <span>stars</span>\n        </template>\n      </i18n>\n    </p>\n    <p>\n      <i class=\"iconfont icon-repository\"></i>\n      <i18n>\n        <template #zh>\n          <span>共维护</span>\n          <statistic-count :count=\"store.data?.repositories.length\" />\n          <span>个开源项目</span>\n        </template>\n        <template #en>\n          <statistic-count :count=\"store.data?.repositories.length\" />\n          <span>repositories</span>\n        </template>\n      </i18n>\n    </p>\n    <p>\n      <i class=\"iconfont icon-organization\"></i>\n      <i18n>\n        <template #zh>\n          <span>维护/发起</span>\n          <statistic-count :count=\"store.data?.organizations.length\" />\n          <span>个开源组织</span>\n        </template>\n        <template #en>\n          <statistic-count :count=\"store.data?.organizations.length\" />\n          <span>organizations</span>\n        </template>\n      </i18n>\n    </p>\n  </statistic-base>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, onMounted } from 'vue'\n  import { useGitHubStatisticStore } from '/@/stores/statistic'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n  import StatisticBase, { StatisticCount } from './base.vue'\n\n  export default defineComponent({\n    name: 'AboutPageGitHubStatistic',\n    components: { StatisticBase, StatisticCount },\n    setup() {\n      const { isZhLang } = useEnhancer()\n      const fetching = ref(true)\n      const store = useGitHubStatisticStore()\n      onMounted(() => {\n        store.fetch().finally(() => {\n          fetching.value = false\n        })\n      })\n\n      return {\n        VALUABLE_LINKS,\n        isZhLang,\n        fetching,\n        store\n      }\n    }\n  })\n</script>\n","<template>\n  <statistic-base\n    brand=\"twitter\"\n    icon=\"icon-twitter\"\n    :data=\"store.data\"\n    :fetching=\"fetching\"\n    :href=\"VALUABLE_LINKS.TWITTER\"\n    :platform=\"isZhLang ? '我在推特' : 'Twitter'\"\n  >\n    <p>\n      <i class=\"iconfont icon-edit\"></i>\n      <i18n>\n        <template #zh>\n          <span>发布了</span>\n          <statistic-count large primary split :count=\"store.data?.public_metrics.tweet_count\" />\n          <span>条推文</span>\n        </template>\n        <template #en>\n          <statistic-count large primary split :count=\"store.data?.public_metrics.tweet_count\" />\n          <span>tweets</span>\n        </template>\n      </i18n>\n    </p>\n    <p>\n      <i class=\"iconfont icon-following\"></i>\n      <i18n>\n        <template #zh>\n          <span>关注了</span>\n          <statistic-count split :count=\"store.data?.public_metrics.following_count\" />\n          <span>个人</span>\n        </template>\n        <template #en>\n          <statistic-count split :count=\"store.data?.public_metrics.following_count\" />\n          <span>following</span>\n        </template>\n      </i18n>\n    </p>\n    <p>\n      <i class=\"iconfont icon-follower\"></i>\n      <i18n>\n        <template #zh>\n          <span>收获了</span>\n          <statistic-count split :count=\"store.data?.public_metrics.followers_count\" />\n          <span>个粉丝</span>\n        </template>\n        <template #en>\n          <statistic-count split :count=\"store.data?.public_metrics.followers_count\" />\n          <span>followers</span>\n        </template>\n      </i18n>\n    </p>\n  </statistic-base>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, onMounted } from 'vue'\n  import { useTwitterUserinfoStore } from '/@/stores/media'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n  import StatisticBase, { StatisticCount } from './base.vue'\n\n  export default defineComponent({\n    name: 'AboutPageTwitterStatistic',\n    components: { StatisticBase, StatisticCount },\n    setup() {\n      const { isZhLang } = useEnhancer()\n      const fetching = ref(true)\n      const store = useTwitterUserinfoStore()\n      onMounted(() => {\n        store.fetch().finally(() => {\n          fetching.value = false\n        })\n      })\n\n      return {\n        VALUABLE_LINKS,\n        isZhLang,\n        fetching,\n        store\n      }\n    }\n  })\n</script>\n","<template>\n  <statistic-base\n    brand=\"npm\"\n    icon=\"icon-npm\"\n    :data=\"store.data\"\n    :fetching=\"fetching\"\n    :href=\"VALUABLE_LINKS.NPM_HOMEPAGE\"\n    :platform=\"isZhLang ? '我在 NPM' : 'NPM'\"\n  >\n    <p class=\"line-1\">\n      <i class=\"iconfont icon-package\"></i>\n      <i18n>\n        <template #zh>\n          <span>发布了</span>\n          <statistic-count :count=\"store.totalPackages\" />\n          <span>个公共软件包</span>\n        </template>\n        <template #en>\n          <statistic-count :count=\"store.totalPackages\" />\n          <span>packages</span>\n        </template>\n      </i18n>\n    </p>\n    <p>\n      <i class=\"iconfont icon-download\"></i>\n      <i18n>\n        <template #zh>\n          <span>被下载</span>\n          <statistic-count large primary split :count=\"store.totalDownloads\" />\n          <span>次</span>\n        </template>\n        <template #en>\n          <statistic-count large primary split :count=\"store.totalDownloads\" />\n          <span>downs</span>\n        </template>\n      </i18n>\n    </p>\n    <p>\n      <i class=\"iconfont icon-score\"></i>\n      <i18n>\n        <template #zh>\n          <span>平均评分</span>\n          <statistic-count :count=\"store.averageScore\" />\n          <span>分</span>\n        </template>\n        <template #en>\n          <statistic-count :count=\"store.averageScore\" />\n          <span>average score</span>\n        </template>\n      </i18n>\n    </p>\n  </statistic-base>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, onMounted } from 'vue'\n  import { useNPMStatisticStore } from '/@/stores/statistic'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n  import StatisticBase, { StatisticCount } from './base.vue'\n\n  export default defineComponent({\n    name: 'AboutPageNPMStatistic',\n    components: { StatisticBase, StatisticCount },\n    setup() {\n      const { isZhLang } = useEnhancer()\n      const fetching = ref(true)\n      const store = useNPMStatisticStore()\n      onMounted(() => {\n        store.fetch().finally(() => {\n          fetching.value = false\n        })\n      })\n\n      return {\n        VALUABLE_LINKS,\n        isZhLang,\n        fetching,\n        store\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .line-1 {\n    margin-top: $lg-gap;\n    margin-bottom: 0.7em;\n  }\n</style>\n","<template>\n  <div\n    class=\"day\"\n    :class=\"{ dark: isDarkTheme }\"\n    :data-date=\"date\"\n    :data-total-count=\"total\"\n    :data-article-count=\"articles\"\n    :data-tweet-count=\"tweets\"\n    :data-instagram-count=\"instagrams\"\n    :data-contribution-count=\"contributions\"\n  >\n    <div class=\"point\">\n      <div class=\"item article\" :style=\"{ height: getPointHeightStyle(articles / total) }\" />\n      <div class=\"item tweet\" :style=\"{ height: getPointHeightStyle(tweets / total) }\" />\n      <div class=\"item instagram\" :style=\"{ height: getPointHeightStyle(instagrams / total) }\" />\n      <div\n        class=\"item contribution\"\n        :style=\"{\n          height: getPointHeightStyle(contributions / total),\n          backgroundColor: githubColor\n        }\"\n      />\n    </div>\n    <div class=\"tooltip\" v-if=\"total\">\n      <p class=\"date\">{{ date }}</p>\n      <ul class=\"counts\">\n        <li class=\"item article\">\n          <i class=\"iconfont icon-quill\"></i>\n          <span class=\"count\">{{ articles }}</span>\n          articles\n        </li>\n        <li class=\"item tweet\">\n          <i class=\"iconfont icon-twitter\"></i>\n          <span class=\"count\">{{ tweets }}</span>\n          tweets\n        </li>\n        <li class=\"item instagram\">\n          <i class=\"iconfont icon-instagram\"></i>\n          <span class=\"count\">{{ instagrams }}</span>\n          instagrams\n        </li>\n        <li class=\"item contribution\">\n          <i class=\"iconfont icon-github\"></i>\n          <span class=\"count\">{{ contributions }}</span>\n          contributions\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n\n  export default defineComponent({\n    name: 'AggregateCalendarDay',\n    props: {\n      date: {\n        type: String,\n        required: true\n      },\n      tweets: {\n        type: Number,\n        required: true\n      },\n      instagrams: {\n        type: Number,\n        required: true\n      },\n      articles: {\n        type: Number,\n        required: true\n      },\n      contributions: {\n        type: Number,\n        required: true\n      },\n      githubColor: String\n    },\n    setup(props) {\n      const { isDarkTheme } = useEnhancer()\n      const total = computed(\n        () => props.articles + props.tweets + props.contributions + props.instagrams\n      )\n      const getPointHeightStyle = (value: number) => {\n        return isNaN(value) ? 0 : `${Math.floor(value * 100)}%`\n      }\n\n      return {\n        isDarkTheme,\n        total,\n        getPointHeightStyle\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .day {\n    $size: 11px;\n    $radius: 2px;\n    position: relative;\n    width: $size;\n    height: $size;\n    border-radius: $radius;\n    background-color: $module-bg-darker-2;\n    &.dark {\n      background-color: $module-bg-darker-1;\n      .point {\n        filter: brightness(86%);\n      }\n      .tooltip {\n        color: $text-reversal;\n        #{--background}: rgba($white, 0.9);\n      }\n    }\n\n    &:not([data-total-count='0']) {\n      &:hover {\n        outline: 1px solid $theme-black;\n      }\n      .point:hover {\n        & + .tooltip {\n          @include visible();\n        }\n      }\n    }\n\n    .point {\n      display: block;\n      width: $size;\n      height: $size;\n      border-radius: $radius;\n      overflow: hidden;\n\n      .item {\n        width: 100%;\n        &.article {\n          background-color: $rss-primary;\n        }\n        &.tweet {\n          background-color: $twitter-primary;\n        }\n        &.instagram {\n          background-color: $instagram-primary;\n        }\n      }\n    }\n\n    .tooltip {\n      #{--background}: rgba($black, 0.9);\n      position: absolute;\n      left: 22px;\n      top: 0;\n      transform: translateY(-50%);\n      white-space: nowrap;\n      z-index: $z-index-normal + 1;\n      padding: $sm-gap $gap;\n      padding-right: $lg-gap;\n      background-color: var(--background);\n      border-radius: $sm-radius;\n      color: $text-reversal;\n      @include hidden();\n      &::before {\n        $size: 4px;\n        content: '';\n        position: absolute;\n        left: -$size * 2;\n        top: 50%;\n        margin-top: -1px;\n        width: 0;\n        height: 0;\n        border-top: $size * 1.5 solid transparent;\n        border-right: $size * 2 solid var(--background);\n        border-bottom: $size * 1.5 solid transparent;\n      }\n\n      .date {\n        font-weight: bold;\n        margin-bottom: $xs-gap;\n      }\n\n      .counts {\n        margin: 0;\n        padding: 0;\n        list-style: none;\n\n        .item {\n          line-height: 1.8em;\n          font-size: $font-size-small;\n          &.article {\n            color: $rss-primary;\n          }\n          &.tweet {\n            color: $twitter-primary;\n          }\n          &.instagram {\n            color: $instagram-primary;\n          }\n\n          .count {\n            margin-left: $sm-gap;\n            font-weight: bold;\n          }\n        }\n      }\n    }\n\n    /* articles */\n    /* 5+ */\n    &:not([data-article-count='0']) {\n      .point {\n        .article {\n          background-color: $rss-primary;\n        }\n      }\n    }\n    /* 1 */\n    &[data-article-count='1'] {\n      .point {\n        .article {\n          background-color: lighten($rss-primary, 20%);\n        }\n      }\n    }\n    /* 2-4 */\n    &[data-article-count='2'],\n    &[data-article-count='3'],\n    &[data-article-count='4'] {\n      .point {\n        .article {\n          background-color: lighten($rss-primary, 10%);\n        }\n      }\n    }\n\n    /* instagrams */\n    /* 3+ */\n    &:not([data-instagram-count='0']) {\n      .point {\n        .instagram {\n          background-color: $instagram-primary;\n        }\n      }\n    }\n    /* 1 */\n    &[data-instagram-count='1'] {\n      .point {\n        .instagram {\n          background-color: lighten($instagram-primary, 20%);\n        }\n      }\n    }\n    /* 2 */\n    &[data-instagram-count='2'],\n    &[data-instagram-count='3'] {\n      .point {\n        .instagram {\n          background-color: lighten($instagram-primary, 10%);\n        }\n      }\n    }\n\n    /* tweets */\n    /* 8+ */\n    &:not([data-tweet-count='0']) {\n      .point {\n        .tweet {\n          background-color: $twitter-primary;\n        }\n      }\n    }\n    /* 1 */\n    &[data-tweet-count='1'] {\n      .point {\n        .tweet {\n          background-color: lighten($twitter-primary, 22%);\n        }\n      }\n    }\n    /* 2-4 */\n    &[data-tweet-count='2'],\n    &[data-tweet-count='3'],\n    &[data-tweet-count='4'] {\n      .point {\n        .tweet {\n          background-color: lighten($twitter-primary, 16%);\n        }\n      }\n    }\n    /* 5-8 */\n    &[data-tweet-count='5'],\n    &[data-tweet-count='6'],\n    &[data-tweet-count='7'],\n    &[data-tweet-count='8'] {\n      .point {\n        .tweet {\n          background-color: lighten($twitter-primary, 8%);\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <ul class=\"aggregate-calendar\" @mouseenter=\"handleHover\">\n    <li class=\"month\" v-for=\"(month, index) in months\" :key=\"index\">\n      <calendar-day\n        v-for=\"(day, i) in month\"\n        :key=\"i\"\n        :date=\"day\"\n        :articles=\"getDayArticles(day)\"\n        :tweets=\"getDayTweets(day)\"\n        :instagrams=\"getDayInstagrams(day)\"\n        :contributions=\"getDayContributions(day)\"\n        :github-color=\"getDayGitHubColor(day)\"\n      />\n    </li>\n  </ul>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, onMounted } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useStores } from '/@/stores'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { dateToHuman, HumanDate, humanDateToYMD } from '/@/transforms/moment'\n  import CalendarDay from './day.vue'\n\n  export default defineComponent({\n    name: 'AggregateCalendar',\n    components: {\n      CalendarDay\n    },\n    setup() {\n      const { gtag } = useEnhancer()\n      const { articleCalendar, twitterCalendar, instagramCalendar, githubCalendar } = useStores()\n      const githubContributionsMap = computed(() => {\n        return new Map(githubCalendar.days.map((day) => [day.date, day]))\n      })\n      const getDayContributions = (date: string) => {\n        return githubContributionsMap.value.get(date)?.count || 0\n      }\n      const getDayGitHubColor = (date: string) => {\n        return githubContributionsMap.value.get(date)?.color\n      }\n      const getDayTweets = (date: string) => {\n        return twitterCalendar.data.find((i) => i.date === date)?.count || 0\n      }\n      const getDayInstagrams = (date: string) => {\n        return instagramCalendar.data.find((i) => i.date === date)?.count || 0\n      }\n      const getDayArticles = (date: string) => {\n        return articleCalendar.data.find((i) => i.date === date)?.count || 0\n      }\n\n      const handleHover = () => {\n        gtag?.event('aggregate_calendar', {\n          event_category: GAEventCategories.About\n        })\n      }\n\n      // current month | day\n      const today = new Date()\n      const todayHuman = dateToHuman(today)\n      const currentMonthDays = Array.from({ length: todayHuman.day }).map((_, i) => {\n        return humanDateToYMD({ ...todayHuman, day: i + 1 })\n      })\n      const getPrevMonthFullDays = (date: HumanDate, prevMonths: number) => {\n        const targetMonth = new Date(date.year, date.month - prevMonths, 0)\n        const daysCount = targetMonth.getDate()\n        return Array.from({ length: daysCount }).map((d, i) => {\n          return humanDateToYMD({ ...dateToHuman(targetMonth), day: i + 1 })\n        })\n      }\n\n      const months = [\n        getPrevMonthFullDays(todayHuman, 11),\n        getPrevMonthFullDays(todayHuman, 10),\n        getPrevMonthFullDays(todayHuman, 9),\n        getPrevMonthFullDays(todayHuman, 8),\n        getPrevMonthFullDays(todayHuman, 7),\n        getPrevMonthFullDays(todayHuman, 6),\n        getPrevMonthFullDays(todayHuman, 5),\n        getPrevMonthFullDays(todayHuman, 4),\n        getPrevMonthFullDays(todayHuman, 3),\n        getPrevMonthFullDays(todayHuman, 2),\n        getPrevMonthFullDays(todayHuman, 1),\n        currentMonthDays\n      ]\n\n      onMounted(() => {\n        articleCalendar.fetch()\n        twitterCalendar.fetch()\n        instagramCalendar.fetch()\n        githubCalendar.fetch()\n      })\n\n      return {\n        months,\n        handleHover,\n        getDayTweets,\n        getDayArticles,\n        getDayInstagrams,\n        getDayContributions,\n        getDayGitHubColor\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .aggregate-calendar {\n    display: flex;\n    justify-content: space-between;\n    padding: 0;\n    margin: 0;\n\n    .month {\n      width: auto;\n      display: grid;\n      grid-template-rows: repeat(7, 1fr);\n      grid-auto-flow: column;\n      grid-auto-columns: min-content;\n      grid-gap: 5px;\n      @include scroll-snap-item();\n    }\n  }\n</style>\n","import { useEnhancer } from '/@/app/enhancer'\nimport { useStores } from '/@/stores'\nimport { Language, LanguageKey } from '/@/language'\nimport { firstUpperCase } from '/@/transforms/text'\nimport { getDefaultAvatar } from '/@/transforms/avatar'\nimport { META } from '/@/config/app.config'\n\nexport const getAdminAvatar = (avatar?: string) => {\n  return avatar || getDefaultAvatar()\n}\n\nexport interface AboutI18nConfig {\n  [Language.Chinese]: string\n  [Language.English]: string\n}\n\nexport const i18ns = {\n  footprint: {\n    [Language.Chinese]: `路为纸，地成册，行作笔，心当墨；思无界，行有疆`,\n    [Language.English]: `Every path i went astray built up my Rome.`\n  },\n  sponsor: {\n    [Language.Chinese]: `向我赞助`,\n    [Language.English]: `Sponsor`\n  },\n  statement: {\n    [Language.Chinese]: `众而周知`,\n    [Language.English]: `Statement`\n  },\n  feedback: {\n    [Language.Chinese]: `向我反馈`,\n    [Language.English]: `Feedback`\n  },\n  archive: {\n    [Language.Chinese]: `笔文存档`,\n    [Language.English]: `Archive`\n  },\n  lens: {\n    [Language.Chinese]: `行行摄摄`,\n    [Language.English]: `Lens view`\n  },\n  guestbook: {\n    [Language.Chinese]: `给我留言`,\n    [Language.English]: `Guestbook`\n  },\n  nft: {\n    [Language.Chinese]: `数字藏品`,\n    [Language.English]: `NFTs`\n  },\n  rss: {\n    [Language.Chinese]: `长期订阅`,\n    [Language.English]: `Subscribe`\n  },\n  discordGroup: {\n    [Language.Chinese]: `国际联谊`,\n    [Language.English]: `Discord`\n  },\n  telegramGroup: {\n    [Language.Chinese]: `自由报社`,\n    [Language.English]: `TG Group`\n  }\n}\n\nexport const useAboutPageMeta = () => {\n  const { i18n, meta, isZhLang } = useEnhancer()\n  const { adminInfo } = useStores()\n  return meta(() => {\n    const enTitle = firstUpperCase(i18n.t(LanguageKey.PAGE_ABOUT, Language.English)!)\n    const titles = isZhLang.value ? [i18n.t(LanguageKey.PAGE_ABOUT), enTitle] : [enTitle]\n    return {\n      pageTitle: titles.join(' | '),\n      description: `关于 ${META.author}`,\n      ogType: 'profile',\n      ogImage: getAdminAvatar(adminInfo.data?.avatar)\n    }\n  })\n}\n\nexport const SPECIAL_LINKS = Object.freeze([\n  {\n    name: 'GitHub',\n    url: 'https://github.com'\n  },\n  {\n    name: `Vite`,\n    url: 'https://vitejs.dev/'\n  },\n  {\n    name: `Disqus`,\n    url: 'https://disqus.com/'\n  }\n])\n","import type GeoJSON from 'geojson'\nimport type { LngLatLike, AnyLayer } from 'mapbox-gl'\n\nexport interface GoogleMyMapPlacemark {\n  index: number\n  id: string\n  name: string\n  description: string\n  coordinates: [number, number]\n  image: string | null\n}\nexport interface GoogleMyMapFolder {\n  name: string\n  placemarks: Array<GoogleMyMapPlacemark>\n}\n\nexport type FeatureCollectionJSON = GeoJSON.FeatureCollection<\n  GeoJSON.Geometry,\n  GoogleMyMapPlacemark\n>\n\nexport const gmmFoldersToGeoJSON = (folders: Array<GoogleMyMapFolder>): FeatureCollectionJSON => ({\n  type: 'FeatureCollection',\n  features: folders\n    .map((folder) => folder.placemarks)\n    .flat()\n    .map((placemark) => {\n      return {\n        type: 'Feature',\n        geometry: {\n          type: 'Point',\n          coordinates: placemark.coordinates\n        },\n        properties: {\n          ...placemark,\n          icon: placemark.image ? 'attraction' : 'veterinary'\n        }\n      }\n    })\n})\n\n// https://docs.mapbox.com/mapbox-gl-js/style-spec/layers/#layout-symbol-icon-allow-overlap\nexport const geoJSONFeatureToLayer = (layerID: string, source: any): AnyLayer => {\n  return {\n    id: layerID,\n    source,\n    type: 'symbol',\n    layout: {\n      'icon-allow-overlap': true,\n      'icon-size': 1.2,\n      'icon-image': ['get', 'icon'],\n      'text-field': ['get', 'name'],\n      'text-font': ['Open Sans Bold', 'Arial Unicode MS Bold'],\n      'text-size': 11,\n      'text-letter-spacing': 0.05,\n      'text-offset': [0, 1],\n      'text-anchor': 'top'\n    },\n    paint: {\n      'text-color': '#202',\n      'text-halo-color': '#fff',\n      'text-halo-width': 2\n    }\n  }\n}\n\nexport const newMapboxPopup = (mapboxgl: any, coordinates: LngLatLike, html: string) => {\n  return new mapboxgl.Popup({ closeButton: false, offset: [0, -16], maxWidth: `280px` })\n    .setLngLat(coordinates)\n    .setHTML(html)\n}\n","<template>\n  <div class=\"mapbox\" ref=\"mapboxRef\"></div>\n</template>\n\n<script lang=\"ts\">\n  import type { Map, LngLatLike } from 'mapbox-gl'\n  import { defineComponent, shallowRef, onMounted, onBeforeUnmount, watch, PropType } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { META, GEO_INFO, MAPBOX_CONFIG } from '/@/config/app.config'\n  import { FeatureCollectionJSON, geoJSONFeatureToLayer, newMapboxPopup } from './helper'\n  import 'mapbox-gl/dist/mapbox-gl.css'\n\n  export default defineComponent({\n    name: 'FootprintMapbox',\n    props: { gmGeoJson: Object as PropType<FeatureCollectionJSON> },\n    emits: ['ready'],\n    setup(props, context) {\n      const { isDarkTheme } = useEnhancer()\n      const mapboxRef = shallowRef<HTMLElement>()\n      const lib = shallowRef<any>()\n      const map = shallowRef<Map>()\n      const loaded = shallowRef(false)\n\n      const getMapStyle = () => {\n        return isDarkTheme.value ? MAPBOX_CONFIG.STYLE_DARK : MAPBOX_CONFIG.STYLE_LIGHT\n      }\n\n      const makeSureSourceLayer = () => {\n        if (loaded.value) {\n          if (props.gmGeoJson?.features.length) {\n            const _map = map.value!\n            const layerID = 'placemarks'\n            // http://www.mapbox.cn/mapbox-gl-js/example/popup-on-click/\n            // https://docs.mapbox.com/mapbox-gl-js/example/filter-markers-by-input/\n            if (!_map.getLayer(layerID)) {\n              _map.addLayer(\n                geoJSONFeatureToLayer(layerID, {\n                  type: 'geojson',\n                  data: props.gmGeoJson\n                })\n              )\n              _map.on('mouseenter', layerID, () => {\n                _map.getCanvas().style.cursor = 'pointer'\n              })\n              _map.on('mouseleave', layerID, () => {\n                _map.getCanvas().style.cursor = ''\n              })\n              _map.on('click', layerID, (event) => {\n                // @ts-ignore\n                const coordinates = event.features![0].geometry.coordinates.slice()\n                const description = event.features![0].properties!.description\n                while (Math.abs(event.lngLat.lng - coordinates[0]) > 180) {\n                  coordinates[0] += event.lngLat.lng > coordinates[0] ? 360 : -360\n                }\n                newMapboxPopup(lib.value, coordinates, description).addTo(_map)\n              })\n            }\n          }\n        }\n      }\n\n      watch(\n        () => isDarkTheme.value,\n        () => map.value?.setStyle(getMapStyle())\n      )\n\n      watch(\n        () => props.gmGeoJson,\n        () => makeSureSourceLayer()\n      )\n\n      onMounted(() => {\n        Promise.all([\n          import('mapbox-gl').then((result) => result.default),\n          new Promise((resolve) => window.setTimeout(resolve, 600))\n        ]).then(([mapboxgl]) => {\n          mapboxgl.accessToken = MAPBOX_CONFIG.TOKEN\n\n          lib.value = mapboxgl\n          map.value = new mapboxgl.Map({\n            container: mapboxRef.value!,\n            center: MAPBOX_CONFIG.CENTER as LngLatLike,\n            zoom: MAPBOX_CONFIG.ZOOM,\n            attributionControl: false,\n            style: getMapStyle()\n          })\n\n          // living now marker\n          new mapboxgl.Marker({\n            color: META.primary,\n            anchor: 'bottom'\n          })\n            .setLngLat(GEO_INFO.coordinates as any)\n            .addTo(map.value)\n\n          // https://stackoverflow.com/questions/36168658/mapbox-gl-setstyle-removes-layers\n          // https://bl.ocks.org/tristen/0c0ed34e210a04e89984\n          map.value.on('style.load', () => {\n            makeSureSourceLayer()\n          })\n\n          // loaded\n          map.value.on('load', () => {\n            loaded.value = true\n            makeSureSourceLayer()\n            context.emit('ready', { map: map.value, lib: lib.value })\n          })\n        })\n      })\n\n      onBeforeUnmount(() => {\n        map.value?.remove()\n      })\n\n      return {\n        mapboxRef\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .mapbox {\n    ::v-deep(.mapboxgl-popup) {\n      &.mapboxgl-popup-anchor-top {\n        .mapboxgl-popup-tip {\n          border-bottom-color: $module-bg-opaque;\n        }\n      }\n      &.mapboxgl-popup-anchor-bottom {\n        .mapboxgl-popup-tip {\n          border-top-color: $module-bg-opaque;\n        }\n      }\n      &.mapboxgl-popup-anchor-left {\n        .mapboxgl-popup-tip {\n          border-right-color: $module-bg-opaque;\n        }\n      }\n      &.mapboxgl-popup-anchor-right {\n        .mapboxgl-popup-tip {\n          border-left-color: $module-bg-opaque;\n        }\n      }\n\n      .mapboxgl-popup-content {\n        background-color: $module-bg-opaque;\n        box-shadow: 0px 0px 14px 4px rgb(0 0 0 / 10%);\n        border-radius: $lg-radius;\n        padding: 0.8em 1em;\n        font-size: $font-size-base;\n        line-height: 1.7;\n        max-height: 260px;\n        overflow-y: auto;\n        font-family: $font-family-normal;\n\n        br {\n          content: '';\n          margin: 2em;\n          display: block;\n          font-size: 24%;\n        }\n\n        img {\n          display: block;\n          width: 100%;\n          min-height: 2rem;\n          background-color: $module-bg-darker-1;\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"modal\">\n    <mapbox class=\"mapbox\" :gm-geo-json=\"gmGeoJson\" @ready=\"handleMapboxReady\" />\n    <div class=\"panel\">\n      <div class=\"info\">\n        <h3 class=\"title\">{{ name ?? '-' }}</h3>\n        <p class=\"description\">{{ description ?? '-' }}</p>\n      </div>\n      <ul class=\"folders\">\n        <li class=\"folder\" :key=\"index\" v-for=\"(folder, index) in gmFolders\">\n          <div class=\"title\">\n            <i class=\"iconfont icon-route\"></i>\n            <span class=\"text\">{{ folder.name }}</span>\n            <span class=\"count\">({{ folder.placemarks.length }})</span>\n          </div>\n          <div class=\"empty\" v-if=\"!folder.placemarks.length\">null</div>\n          <ul class=\"placemarks\" v-else>\n            <li\n              class=\"placemark\"\n              :key=\"i\"\n              v-for=\"(placemark, i) in folder.placemarks\"\n              @click=\"handlePlacemarkClick(placemark)\"\n            >\n              <uimage\n                class=\"icon\"\n                :cdn=\"true\"\n                :src=\"`/images/third-party/mapbox-${\n                  placemark.image ? 'attraction' : 'veterinary'\n                }.svg`\"\n              />\n              <span class=\"text\">{{ placemark.name }}</span>\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import type { Map } from 'mapbox-gl'\n  import { defineComponent, shallowRef, PropType } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { GEO_INFO, VALUABLE_LINKS } from '/@/config/app.config'\n  import {\n    GoogleMyMapFolder,\n    FeatureCollectionJSON,\n    GoogleMyMapPlacemark,\n    newMapboxPopup\n  } from './helper'\n  import Mapbox from './mapbox.vue'\n\n  export default defineComponent({\n    name: 'FootprintModal',\n    components: { Mapbox },\n    props: {\n      name: String,\n      description: String,\n      gmGeoJson: Object as PropType<FeatureCollectionJSON>,\n      gmFolders: Array as PropType<Array<GoogleMyMapFolder>>\n    },\n    setup() {\n      const { isZhLang } = useEnhancer()\n      const lib = shallowRef<Map>()\n      const map = shallowRef<Map>()\n      const handleMapboxReady = (payload: { map: Map; lib: any }) => {\n        lib.value = payload.lib\n        map.value = payload.map\n      }\n\n      let prevPopup: mapboxgl.Popup | null = null\n      const handlePlacemarkClick = (placemark: GoogleMyMapPlacemark) => {\n        if (map.value) {\n          prevPopup?.remove()\n          prevPopup = newMapboxPopup(lib.value, placemark.coordinates, placemark.description).addTo(\n            map.value\n          )\n          map.value.flyTo({ center: placemark.coordinates, zoom: 10, speed: 1.2, curve: 1.2 })\n          // https://github.com/mapbox/mapbox-gl-js/issues/1794\n          // map.value.once('moveend', () => {})\n        }\n      }\n\n      return {\n        GEO_INFO,\n        VALUABLE_LINKS,\n        isZhLang,\n        handlePlacemarkClick,\n        handleMapboxReady\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .modal {\n    position: relative;\n\n    .mapbox {\n      width: 100%;\n      height: 100%;\n    }\n\n    .panel {\n      position: absolute;\n      right: 3rem;\n      top: 3rem;\n      bottom: 3rem;\n      display: flex;\n      flex-direction: column;\n      width: 22rem;\n      padding: $lg-gap $gap $gap $lg-gap;\n      background: $module-bg-opaque;\n      border-radius: $lg-radius;\n      box-shadow: 0px 0px 8px 4px rgb(0 0 0 / 10%);\n\n      .info {\n        margin-bottom: 2rem;\n        padding-bottom: $lg-gap;\n        border-bottom: 1px solid $module-bg-darker-1;\n\n        .title {\n          margin-top: 0;\n          margin-bottom: $gap;\n        }\n\n        .description {\n          margin: 0;\n          @include text-overflow();\n        }\n      }\n\n      .folders {\n        flex: 1;\n        list-style: none;\n        padding: 0;\n        overflow: auto;\n\n        .folder {\n          &:last-child {\n            .placemarks {\n              &:last-child {\n                margin-bottom: 0;\n              }\n            }\n          }\n\n          .title {\n            font-size: $font-size-h4;\n            margin-bottom: $gap;\n            scroll-snap-align: start;\n\n            .text {\n              margin-left: $sm-gap;\n              font-weight: bold;\n            }\n          }\n\n          .empty,\n          .placemarks {\n            padding-left: 2rem;\n            margin-bottom: $gap;\n            color: $text-secondary;\n          }\n\n          .placemarks {\n            list-style: none;\n\n            .placemark {\n              line-height: 2;\n              cursor: pointer;\n              scroll-snap-align: start;\n              &:hover {\n                color: $text;\n              }\n\n              .icon {\n                width: 1.4em;\n                margin-top: -2px;\n              }\n\n              .text {\n                margin-left: $sm-gap;\n                @include text-overflow();\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"footprint-map\">\n    <client-only>\n      <popup v-model:visible=\"modalVisible\" :scroll-close=\"false\">\n        <footprint-modal\n          class=\"footprint-modal\"\n          :name=\"gmStore.data?.name\"\n          :description=\"gmStore.data?.description\"\n          :gm-folders=\"gmFolders\"\n          :gm-geo-json=\"gmGeoJson\"\n        />\n      </popup>\n    </client-only>\n    <div class=\"mapbox-wrapper\" :placeholder=\"isZhLang ? i18ns.footprint.zh : i18ns.footprint.en\">\n      <mapbox class=\"mapbox\" :gm-geo-json=\"gmGeoJson\" @ready=\"handleMapboxReady\" />\n      <div class=\"toolbar\">\n        <ulink class=\"button\" :href=\"VALUABLE_LINKS.GOOGLE_MY_MAP\">\n          <i class=\"iconfont icon-google-maps\"></i>\n        </ulink>\n        <button class=\"button\" @click=\"openModal\">\n          <i class=\"iconfont icon-fullscreen\"></i>\n        </button>\n      </div>\n    </div>\n    <div class=\"legends\">\n      <div class=\"now\">\n        <i class=\"iconfont icon-location\"></i>\n        <span class=\"text\" @click=\"handleLivingNow\">\n          {{ isZhLang ? GEO_INFO.zh_title : GEO_INFO.en_title }}\n        </span>\n      </div>\n      <ul class=\"folders\" v-if=\"gmStore.data\">\n        <li\n          class=\"item\"\n          :key=\"index\"\n          v-for=\"(folder, index) in gmFolders.slice(0, 4)\"\n          @click=\"handleFolderClick(index)\"\n        >\n          <i class=\"iconfont icon-route\"></i>\n          <span class=\"text\">{{ folder.name }}</span>\n          <span class=\"count\">({{ folder.placemarks.length }})</span>\n        </li>\n        <li class=\"item\" @click=\"openModal\">\n          <i class=\"iconfont icon-route\"></i>\n          <span class=\"text\">•••</span>\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import type { Map } from 'mapbox-gl'\n  import { defineComponent, shallowRef, computed, onMounted } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useMyGoogleMapStore } from '/@/stores/media'\n  import { GEO_INFO, VALUABLE_LINKS } from '/@/config/app.config'\n  import { i18ns } from '../shared'\n  import { gmmFoldersToGeoJSON, FeatureCollectionJSON, GoogleMyMapFolder } from './helper'\n  import Mapbox from './mapbox.vue'\n  import FootprintModal from './modal.vue'\n\n  export default defineComponent({\n    name: 'AboutPageFootprint',\n    components: { Mapbox, FootprintModal },\n    setup() {\n      const { isZhLang } = useEnhancer()\n      const map = shallowRef<Map>()\n      const modalVisible = shallowRef(false)\n      const gmStore = useMyGoogleMapStore()\n      const gmFolders = computed<Array<GoogleMyMapFolder>>(() => {\n        const folders = [...(gmStore.data?.Folder ?? [])]\n        folders.reverse()\n        return folders.map((folder, fi) => {\n          const placemark = folder.Placemark ?? []\n          const placemarks = Array.isArray(placemark) ? placemark : [placemark]\n          return {\n            name: folder.name,\n            placemarks: placemarks.map((placemark, pi) => {\n              const [longitude, latitude] = placemark.Point.coordinates.split(',').map(Number)\n              const extendedData = placemark.ExtendedData?.Data\n              return {\n                index: pi,\n                id: `placemark-${fi}-${pi}`,\n                name: placemark.name,\n                description: placemark.description,\n                coordinates: [longitude, latitude],\n                image: extendedData?.['@name'] === 'gx_media_links' ? extendedData?.value : null\n              }\n            })\n          }\n        })\n      })\n\n      const gmGeoJson = computed<FeatureCollectionJSON>(() => {\n        return gmmFoldersToGeoJSON(gmFolders.value)\n      })\n\n      const openModal = () => {\n        modalVisible.value = true\n      }\n\n      const handleFolderClick = (index: number) => {\n        const targetFolder = gmFolders.value[index]!\n        const [firstPlacemark] = targetFolder.placemarks\n        if (firstPlacemark) {\n          map.value?.flyTo({ center: firstPlacemark.coordinates, zoom: 4, speed: 1.2 })\n        }\n      }\n\n      const handleMapboxReady = (payload: { map: Map }) => {\n        map.value = payload.map\n      }\n\n      const handleLivingNow = () => {\n        map.value?.flyTo({\n          center: GEO_INFO.coordinates as any,\n          zoom: 14\n        })\n      }\n\n      onMounted(() => {\n        gmStore.fetch()\n      })\n\n      return {\n        GEO_INFO,\n        VALUABLE_LINKS,\n        isZhLang,\n        i18ns,\n        modalVisible,\n        gmStore,\n        gmFolders,\n        gmGeoJson,\n        openModal,\n        handleMapboxReady,\n        handleFolderClick,\n        handleLivingNow\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .footprint-modal {\n    width: 88vw;\n    height: 88vh;\n  }\n\n  .footprint-map {\n    position: relative;\n    display: flex;\n    width: 100%;\n    $map-width: 790px;\n    $map-height: 220px;\n\n    .legends .folders,\n    .legends .now {\n      @include common-bg-module();\n      @include radius-box($lg-radius);\n    }\n\n    .legends {\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n      margin-left: $gap * 2;\n      .now {\n        flex-shrink: 0;\n        display: inline-flex;\n        margin-bottom: $lg-gap;\n        padding: 0 $gap;\n        width: 100%;\n        line-height: 3.4em;\n        cursor: pointer;\n        color: $text-secondary;\n        &:hover {\n          color: $text;\n        }\n\n        .iconfont {\n          margin-right: $sm-gap;\n        }\n        .text {\n          font-weight: bold;\n        }\n      }\n\n      .folders {\n        flex: 1;\n        list-style: none;\n        margin: 0;\n        padding: $sm-gap $gap;\n\n        .item {\n          line-height: 2.4em;\n          cursor: pointer;\n          color: $text-secondary;\n          &:hover {\n            color: $text;\n          }\n\n          .iconfont {\n            margin-right: $gap;\n          }\n          .text {\n            font-weight: bold;\n            margin-right: $xs-gap;\n          }\n        }\n      }\n    }\n\n    .mapbox-wrapper {\n      position: relative;\n      padding: $gap;\n      @include common-bg-module();\n      @include radius-box($lg-radius);\n\n      .mapbox {\n        width: $map-width;\n        height: $map-height;\n        display: block;\n      }\n\n      .toolbar {\n        position: absolute;\n        top: $lg-gap * 2;\n        right: $lg-gap * 2;\n        z-index: $z-index-normal + 1;\n        display: flex;\n\n        .button {\n          margin-left: $lg-gap;\n          display: block;\n          $size: 2em;\n          width: $size;\n          height: $size;\n          line-height: $size;\n          border-radius: $xs-radius;\n          text-align: center;\n          background-color: $module-bg;\n          font-size: $font-size-h4;\n          color: $text-secondary;\n          @include backdrop-blur(1px);\n          &:hover {\n            color: $link-color;\n            background-color: $module-bg-opaque;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"about-page\">\n    <div class=\"page-banner\">\n      <div class=\"background\">\n        <video class=\"video\" loop muted autoplay :controls=\"false\">\n          <source :src=\"backgroundVideo\" type=\"video/mp4\" />\n        </video>\n      </div>\n      <div class=\"content\">\n        <uimage class=\"avatar\" :src=\"getAdminAvatar(adminInfo.data?.avatar)\" />\n        <h1 class=\"name\">{{ adminInfo.data?.name || '-' }}</h1>\n        <p class=\"slogan\">{{ adminInfo.data?.slogan || '-' }}</p>\n        <p class=\"biography\">\n          <webfont bolder>{{ isZhLang ? META.zh_biography : META.en_biography }}</webfont>\n        </p>\n        <div class=\"socials\">\n          <span class=\"normal\">\n            <ulink class=\"item github\" :href=\"VALUABLE_LINKS.GITHUB\">\n              <i class=\"iconfont icon-github\" />\n              <span class=\"text\">GitHub</span>\n            </ulink>\n            <ulink class=\"item twitter\" :href=\"VALUABLE_LINKS.TWITTER\">\n              <i class=\"iconfont icon-twitter\" />\n              <span class=\"text\">Twitter</span>\n            </ulink>\n            <ulink class=\"item instagram\" :href=\"VALUABLE_LINKS.INSTAGRAM\">\n              <i class=\"iconfont icon-instagram\" />\n              <span class=\"text\">Instagram</span>\n            </ulink>\n            <ulink class=\"item youtube\" :href=\"VALUABLE_LINKS.YOUTUBE_CHANNEL\">\n              <i class=\"iconfont icon-youtube\" />\n              <span class=\"text\">YouTube</span>\n            </ulink>\n          </span>\n          <span class=\"mini\">\n            <ulink class=\"item telegram\" :href=\"VALUABLE_LINKS.TELEGRAM\">\n              <i class=\"iconfont icon-telegram\" />\n            </ulink>\n            <button class=\"item wechat\" @click=\"handleOpenWechat\">\n              <i class=\"iconfont icon-wechat\" />\n              <client-only>\n                <popup v-model:visible=\"modalState.wechat\" :scroll-close=\"false\">\n                  <div class=\"qrcode-modal wechat\">\n                    <div class=\"background\"></div>\n                    <uimage class=\"image\" cdn src=\"/images/qrcodes/wechat.jpg\" />\n                    <span class=\"text\">\n                      👋 &nbsp;\n                      <i18n en=\"Friend me on WeChat\" zh=\"扫码加微，解锁灵魂\"></i18n>\n                    </span>\n                  </div>\n                </popup>\n              </client-only>\n            </button>\n            <ulink class=\"item linkedin\" :href=\"VALUABLE_LINKS.LINKEDIN\">\n              <i class=\"iconfont icon-linkedin\" />\n            </ulink>\n            <ulink class=\"item douban\" :href=\"VALUABLE_LINKS.DOUBAN\">\n              <i class=\"iconfont icon-douban\" />\n            </ulink>\n          </span>\n        </div>\n      </div>\n    </div>\n    <container class=\"page-content\">\n      <div class=\"links\">\n        <template :key=\"index\" v-for=\"(item, index) in links\">\n          <component\n            class=\"item\"\n            :class=\"item.class\"\n            :is=\"item.onClick ? 'button' : 'ulink'\"\n            :href=\"item.href\"\n            :to=\"item.route\"\n            @click=\"item.onClick\"\n          >\n            <span class=\"left\">\n              <i class=\"iconfont\" :class=\"item.icon\"></i>\n              <span class=\"text\"><i18n v-bind=\"item.i18n\" /></span>\n            </span>\n            <span class=\"right\">\n              <i class=\"iconfont icon-next\"></i>\n            </span>\n          </component>\n        </template>\n      </div>\n      <div class=\"statistics\">\n        <github-statistic />\n        <npm-statistic />\n        <twitter-statistic />\n        <douban-statistic />\n      </div>\n      <div class=\"plogs\">\n        <instagram-media />\n      </div>\n      <div class=\"footprint\">\n        <footprint-map />\n      </div>\n      <div class=\"calendar\">\n        <aggregate-calendar />\n      </div>\n      <div class=\"footer-links\">\n        <div class=\"friendlinks\">\n          <template v-for=\"(link, index) in appOption.data?.friend_links || []\" :key=\"index\">\n            <divider type=\"vertical\" size=\"lg\" v-if=\"index !== 0\" />\n            <a :href=\"link.value\" class=\"item\" target=\"_blank\" rel=\"external nofollow noopener\">\n              {{ link.name }}\n            </a>\n          </template>\n        </div>\n        <div class=\"speciallinks\">\n          <template v-for=\"(item, index) in SPECIAL_LINKS\" :key=\"index\">\n            <divider type=\"vertical\" size=\"lg\" v-if=\"index !== 0\" />\n            <a :href=\"item.url\" class=\"item\" target=\"_blank\" rel=\"external nofollow noopener\">\n              {{ item.name }}\n            </a>\n          </template>\n        </div>\n      </div>\n    </container>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, reactive } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { RouteName } from '/@/app/router'\n  import { useStores } from '/@/stores'\n  import { useUniversalFetch } from '/@/universal'\n  import { getPageRoute } from '/@/transforms/route'\n  import { getTargetStaticURL } from '/@/transforms/url'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { META, VALUABLE_LINKS } from '/@/config/app.config'\n  import InstagramMedia from './media/instagram.vue'\n  import DoubanStatistic from './statistic/douban.vue'\n  import GithubStatistic from './statistic/github.vue'\n  import TwitterStatistic from './statistic/twitter.vue'\n  import NpmStatistic from './statistic/npm.vue'\n  import AggregateCalendar from './calendar/index.vue'\n  import FootprintMap from './footprint/index.vue'\n  import { useAboutPageMeta, getAdminAvatar, i18ns, SPECIAL_LINKS } from './shared'\n\n  export default defineComponent({\n    name: 'DesktopAboutPage',\n    components: {\n      FootprintMap,\n      AggregateCalendar,\n      DoubanStatistic,\n      GithubStatistic,\n      NpmStatistic,\n      TwitterStatistic,\n      InstagramMedia\n    },\n    setup() {\n      const { gtag, globalState, isZhLang, isDarkTheme } = useEnhancer()\n      const { adminInfo, appOption } = useStores()\n\n      const handleGTagEvent = (event: string) => {\n        gtag?.event(event, {\n          event_category: GAEventCategories.About\n        })\n      }\n\n      const modalState = reactive({\n        wechat: false\n      })\n\n      const handleOpenWechat = () => {\n        modalState.wechat = true\n        handleGTagEvent('wechat_modal')\n      }\n\n      const handleSponsor = () => {\n        globalState.toggleSwitcher('sponsor', true)\n        handleGTagEvent('sponsor_modal')\n      }\n\n      const handleStatement = () => {\n        globalState.toggleSwitcher('statement', true)\n        handleGTagEvent('statement_modal')\n      }\n\n      const handleFeedback = () => {\n        globalState.toggleSwitcher('feedback', true)\n        handleGTagEvent('feedback_modal')\n      }\n\n      // MARK: 非常有必要，vite 对 video.source.src 的解析有问题，会将其理解为 asset，而非 static resource，从而编译失败\n      const backgroundVideo = getTargetStaticURL('/assets/page-about-background.mp4')\n\n      // meta\n      useAboutPageMeta()\n      // prefetch\n      useUniversalFetch(() => Promise.all([adminInfo.fetch(), appOption.fetch()]))\n\n      const links = [\n        {\n          class: 'lens',\n          icon: 'icon-lens',\n          i18n: i18ns.lens,\n          route: getPageRoute(RouteName.Lens)\n        },\n        {\n          class: 'nft',\n          icon: 'icon-opensea',\n          i18n: i18ns.nft,\n          route: getPageRoute(RouteName.Nft)\n        },\n        {\n          class: 'archive',\n          icon: 'icon-quill',\n          i18n: i18ns.archive,\n          route: getPageRoute(RouteName.Archive)\n        },\n        {\n          class: 'guestbook',\n          icon: 'icon-comment',\n          i18n: i18ns.guestbook,\n          route: getPageRoute(RouteName.Guestbook)\n        },\n        {\n          class: 'feedback',\n          icon: 'icon-mail-plane',\n          i18n: i18ns.feedback,\n          onClick: handleFeedback\n        },\n        {\n          class: 'telegram',\n          icon: 'icon-telegram',\n          i18n: i18ns.telegramGroup,\n          href: VALUABLE_LINKS.TELEGRAM_GROUP\n        },\n        {\n          class: 'discord',\n          icon: 'icon-discord',\n          i18n: i18ns.discordGroup,\n          href: VALUABLE_LINKS.DISCORD_GROUP\n        },\n        {\n          class: 'sponsor',\n          icon: 'icon-heart',\n          i18n: i18ns.sponsor,\n          onClick: handleSponsor\n        },\n        {\n          class: 'statement',\n          icon: 'icon-faq',\n          i18n: i18ns.statement,\n          onClick: handleStatement\n        },\n        {\n          class: 'rss',\n          icon: 'icon-rss',\n          i18n: i18ns.rss,\n          href: VALUABLE_LINKS.RSS\n        }\n      ]\n\n      return {\n        i18ns,\n        links,\n        META,\n        VALUABLE_LINKS,\n        SPECIAL_LINKS,\n        isZhLang,\n        isDarkTheme,\n        modalState,\n        backgroundVideo,\n        adminInfo,\n        appOption,\n        getAdminAvatar,\n        handleGTagEvent,\n        handleFeedback,\n        handleStatement,\n        handleOpenWechat\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .qrcode-modal {\n    $image-size: 16rem;\n    width: 23rem;\n    height: 28rem;\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    &.wechat {\n      --item-primary: #{$wechat-primary};\n    }\n\n    .background {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 45%;\n      background: var(--item-primary);\n    }\n\n    .image {\n      z-index: $z-index-normal + 1;\n      width: $image-size;\n      height: $image-size;\n      margin-bottom: 2rem;\n      background-color: $module-bg-opaque;\n      @include radius-box($sm-radius);\n    }\n\n    .text {\n      font-weight: bold;\n      color: var(--item-primary);\n    }\n  }\n\n  .about-page {\n    width: 100%;\n    overflow: hidden;\n\n    .page-banner {\n      $banner-height: 20rem;\n\n      .background {\n        display: block;\n        position: absolute;\n        width: 100%;\n        height: $banner-height;\n        top: 0;\n        left: 0;\n        overflow: hidden;\n        z-index: $z-index-normal + 1;\n        background-color: $module-bg-darker-1;\n        &::before {\n          content: '';\n          position: absolute;\n          display: block;\n          height: 1rem;\n          bottom: -0.5rem;\n          left: 0;\n          right: 0;\n          background-image: radial-gradient(circle, transparent 70%, $text-reversal 70%);\n          background-size: 0.7em 1em;\n          background-position: 0 -0.5em;\n        }\n\n        .video {\n          width: 100%;\n          height: 100%;\n          object-fit: cover;\n          object-position: 0% 30%;\n          pointer-events: none;\n        }\n      }\n\n      .content {\n        position: relative;\n        display: flex;\n        align-items: center;\n        flex-direction: column;\n        justify-content: flex-start;\n        width: 100%;\n        background-color: $module-bg;\n        @include radius-box($lg-radius);\n        background-image: url('/images/page-about/background.png'),\n          linear-gradient($module-bg-opaque 40%, #00000000 100%);\n        background-size: contain;\n        background-repeat: repeat-x;\n        background-blend-mode: lighten;\n\n        .avatar {\n          $size: 8rem;\n          width: $size;\n          height: $size;\n          z-index: $z-index-normal + 2;\n          box-sizing: content-box;\n          margin-top: $banner-height - 4rem;\n          border: 8px solid $module-bg;\n          border-radius: 100%;\n          overflow: hidden;\n          background-color: $module-bg;\n          transition: transform $transition-time-slow;\n          &:hover {\n            transform: rotate(360deg);\n          }\n        }\n\n        .name,\n        .slogan {\n          text-align: center;\n          color: $text;\n        }\n\n        .name {\n          margin-top: $sm-gap;\n          margin-bottom: $gap;\n        }\n\n        .biography {\n          margin-bottom: $gap * 2;\n          font-size: $font-size-h3;\n        }\n\n        .socials {\n          $button-size: 3rem;\n          display: flex;\n          justify-content: center;\n          height: $button-size;\n          margin-bottom: $gap * 2;\n\n          .normal {\n            display: inline-flex;\n            align-items: center;\n            margin-right: $gap;\n\n            .item {\n              padding: 0 $gap;\n              margin-right: $gap;\n              height: 100%;\n              display: inline-flex;\n              align-items: center;\n              border-radius: $sm-radius;\n              color: $white;\n              transition: all $transition-time-fast;\n\n              .iconfont {\n                font-size: $font-size-h4;\n                margin-right: $sm-gap;\n              }\n\n              .text {\n                font-weight: bold;\n              }\n\n              &.github {\n                background-color: $github-primary;\n                &:hover {\n                  background-color: $github-primary-hover;\n                }\n              }\n              &.twitter {\n                background-color: $twitter-primary;\n                &:hover {\n                  background-color: $twitter-primary-hover;\n                }\n              }\n              &.youtube {\n                margin: 0;\n                background-color: $youtube-primary;\n                &:hover {\n                  background-color: mix($black, $youtube-primary, 8%);\n                }\n              }\n              &.instagram {\n                opacity: 0.8;\n                background: $instagram-primary;\n                background: $instagram-gradient;\n                &:hover {\n                  opacity: 1;\n                }\n              }\n            }\n          }\n\n          > .mini {\n            display: flex;\n\n            > .item {\n              display: inline-block;\n              width: $button-size;\n              height: $button-size;\n              line-height: $button-size;\n              margin-right: $gap;\n              text-align: center;\n              border-radius: $sm-radius;\n              color: $white;\n              opacity: 0.8;\n              transition: all $transition-time-fast;\n\n              &:hover {\n                opacity: 1;\n              }\n\n              .iconfont {\n                font-size: $font-size-h4;\n              }\n\n              &.wechat {\n                background-color: $wechat-primary;\n              }\n              &.telegram {\n                background-color: $telegram-primary;\n              }\n              &.douban {\n                background-color: $douban-primary;\n              }\n              &.stackoverflow {\n                background-color: $stackoverflow-primary;\n              }\n              &.algorithm {\n                background-color: $leetcode-primary;\n              }\n              &.quora {\n                background-color: $quora-primary;\n              }\n              &.linkedin {\n                background-color: $linkedin-primary;\n              }\n            }\n          }\n        }\n      }\n    }\n\n    .page-content {\n      margin: $gap * 2 0;\n    }\n\n    .links {\n      display: grid;\n      grid-template-columns: repeat(5, 1fr);\n      grid-gap: $gap * 2;\n      width: 100%;\n      margin-bottom: 2rem;\n\n      .item {\n        height: 5rem;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 0 1em 0 2em;\n        @include common-bg-module($transition-time-fast);\n        @include radius-box($lg-radius);\n        &.discord {\n          --item-primary: #{$discord-primary};\n          --item-hover: white;\n        }\n        &.telegram {\n          --item-primary: #{$telegram-primary};\n          --item-hover: white;\n        }\n        &.sponsor {\n          --item-primary: #{$red};\n          --item-hover: white;\n        }\n        &.statement {\n          --item-primary: #{$surmon};\n          --item-hover: white;\n        }\n        &.rss {\n          --item-primary: #{$rss-primary};\n          --item-hover: white;\n        }\n        &:hover {\n          background-color: var(--item-primary, $primary);\n          .left {\n            .iconfont,\n            .text {\n              color: var(--item-hover, $text-reversal);\n            }\n          }\n\n          .right {\n            opacity: 1;\n            transform: translateX(-$sm-gap);\n            color: var(--item-hover, $text-reversal);\n          }\n        }\n\n        .left {\n          .iconfont {\n            font-size: $font-size-h3;\n            margin-right: 0.8em;\n            color: var(--item-primary, $primary);\n          }\n\n          .text {\n            letter-spacing: 1px;\n            color: $text-secondary;\n            font-size: $font-size-h4;\n            font-weight: bold;\n          }\n        }\n\n        .right {\n          color: $text-divider;\n          opacity: 0.4;\n          transition: opacity $transition-time-fast, transform $transition-time-normal;\n        }\n      }\n    }\n\n    .statistics {\n      margin-bottom: $gap * 2;\n      display: grid;\n      grid-template-columns: repeat(4, 1fr);\n      grid-gap: $gap * 2;\n    }\n\n    .plogs,\n    .vlogs,\n    .calendar {\n      margin-bottom: $gap * 2;\n      border-radius: $lg-radius;\n      padding: $gap;\n      @include common-bg-module();\n    }\n\n    .footprint {\n      width: 100%;\n      margin-bottom: $gap * 2;\n    }\n\n    .footer-links {\n      display: flex;\n      justify-content: space-between;\n      padding: 2rem $lg-gap;\n      @include common-bg-module();\n      @include radius-box($lg-radius);\n\n      .item {\n        font-weight: bold;\n        @include text-underline();\n      }\n\n      .speciallinks {\n        .item {\n          color: $text-disabled;\n          &:hover {\n            color: $text;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"about-page\">\n    <page-banner :position=\"70\" :is-mobile=\"true\" image=\"/images/page-about/banner-mobile.jpg\">\n      <template #title>\n        <i18n :k=\"LanguageKey.PAGE_ABOUT\" />\n      </template>\n    </page-banner>\n    <div class=\"profile\">\n      <div class=\"avatar\">\n        <uimage class=\"image\" :src=\"getAdminAvatar(adminInfo.data?.avatar)\" />\n      </div>\n      <h2 class=\"name\">{{ adminInfo.data?.name || '-' }}</h2>\n      <h5 class=\"slogan\">{{ adminInfo.data?.slogan || '-' }}</h5>\n      <divider dashed />\n      <h4 class=\"bio\">\n        <webfont bolder>{{ isZhLang ? META.zh_biography : META.en_biography }}</webfont>\n      </h4>\n    </div>\n    <div class=\"links\">\n      <div class=\"list col-2\">\n        <router-link class=\"item text-only\" :to=\"getPageRoute(RouteName.Archive)\">\n          <i class=\"iconfont icon-quill\" />\n          <i18n v-bind=\"i18ns.archive\" />\n        </router-link>\n        <router-link class=\"item text-only\" :to=\"getPageRoute(RouteName.Lens)\">\n          <i class=\"iconfont icon-lens\" />\n          <i18n v-bind=\"i18ns.lens\" />\n        </router-link>\n        <router-link class=\"item text-only\" :to=\"getPageRoute(RouteName.Nft)\">\n          <i class=\"iconfont icon-opensea\" />\n          <i18n v-bind=\"i18ns.nft\" />\n        </router-link>\n        <router-link class=\"item text-only\" :to=\"getPageRoute(RouteName.Guestbook)\">\n          <i class=\"iconfont icon-comment\" />\n          <i18n v-bind=\"i18ns.guestbook\" />\n        </router-link>\n      </div>\n      <divider dashed />\n      <div class=\"list col-2\">\n        <ulink class=\"item discord\" :href=\"VALUABLE_LINKS.DISCORD_GROUP\">\n          <i class=\"iconfont icon-discord\" />\n          <i18n v-bind=\"i18ns.discordGroup\" />\n        </ulink>\n        <ulink class=\"item telegram\" :href=\"VALUABLE_LINKS.TELEGRAM_GROUP\">\n          <i class=\"iconfont icon-telegram\" />\n          <i18n v-bind=\"i18ns.telegramGroup\" />\n        </ulink>\n      </div>\n    </div>\n    <div class=\"links\">\n      <div class=\"list col-3\">\n        <ulink class=\"item center github\" :href=\"VALUABLE_LINKS.GITHUB\">\n          <i class=\"iconfont icon-github\" />\n          <span class=\"text\">GitHub</span>\n        </ulink>\n        <ulink class=\"item center twitter\" :href=\"VALUABLE_LINKS.TWITTER\">\n          <i class=\"iconfont icon-twitter\" />\n          <span class=\"text\">Twitter</span>\n        </ulink>\n        <ulink class=\"item center instagram\" :href=\"VALUABLE_LINKS.INSTAGRAM\">\n          <i class=\"iconfont icon-instagram\" />\n          <span class=\"text\">Instagram</span>\n        </ulink>\n      </div>\n      <divider dashed />\n      <div class=\"list col-4\">\n        <ulink class=\"item telegram icon-only\" :href=\"VALUABLE_LINKS.TELEGRAM\">\n          <i class=\"iconfont icon-telegram\" />\n        </ulink>\n        <ulink class=\"item linkedin icon-only\" :href=\"VALUABLE_LINKS.LINKEDIN\">\n          <i class=\"iconfont icon-linkedin\" />\n        </ulink>\n        <ulink class=\"item youtube icon-only\" :href=\"VALUABLE_LINKS.YOUTUBE_CHANNEL\">\n          <i class=\"iconfont icon-youtube\" />\n        </ulink>\n        <ulink class=\"item douban icon-only\" :href=\"VALUABLE_LINKS.DOUBAN_MOVIE\">\n          <i class=\"iconfont icon-douban\" />\n        </ulink>\n      </div>\n    </div>\n    <div class=\"qrcodes\">\n      <div class=\"item\">\n        <uimage cdn class=\"image\" src=\"/images/qrcodes/wechat.jpg\" />\n      </div>\n      <div class=\"item\">\n        <uimage cdn class=\"image\" src=\"/images/qrcodes/wechat-channel.png\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { LanguageKey } from '/@/language'\n  import { RouteName } from '/@/app/router'\n  import { META, VALUABLE_LINKS } from '/@/config/app.config'\n  import { useAdminInfoStore } from '/@/stores/basic'\n  import { useUniversalFetch } from '/@/universal'\n  import { getPageRoute } from '/@/transforms/route'\n  import PageBanner from '/@/components/common/banner.vue'\n  import { useAboutPageMeta, getAdminAvatar, i18ns } from './shared'\n\n  export default defineComponent({\n    name: 'MobileAboutPage',\n    components: {\n      PageBanner\n    },\n    setup() {\n      const { isZhLang } = useEnhancer()\n      const adminInfo = useAdminInfoStore()\n      useAboutPageMeta()\n      useUniversalFetch(() => adminInfo.fetch())\n\n      return {\n        i18ns,\n        META,\n        VALUABLE_LINKS,\n        LanguageKey,\n        RouteName,\n        isZhLang,\n        adminInfo,\n        getAdminAvatar,\n        getPageRoute\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .about-page {\n    .profile {\n      position: relative;\n      padding: $lg-gap;\n      padding-top: $gap * 5;\n      border-bottom-left-radius: $lg-radius;\n      border-bottom-right-radius: $lg-radius;\n      background-color: $module-bg-opaque;\n      &::before {\n        content: '';\n        position: absolute;\n        display: block;\n        height: 1rem;\n        bottom: -0.5rem;\n        left: 0;\n        right: 0;\n        background-image: radial-gradient(circle, transparent 70%, $module-bg-opaque 70%);\n        background-size: 0.7em 1em;\n        background-position: 0 -0.5em;\n      }\n\n      .avatar {\n        width: 100%;\n        position: absolute;\n        top: -$gap * 4;\n        left: 0;\n        text-align: center;\n\n        .image {\n          $size: 7rem;\n          width: $size;\n          height: $size;\n          z-index: $z-index-normal + 2;\n          border-radius: 100%;\n          border: 6px solid $module-bg-opaque;\n          box-sizing: content-box;\n        }\n      }\n\n      .name,\n      .slogan {\n        text-align: center;\n        margin-top: 0;\n        margin-bottom: $gap;\n      }\n\n      .slogan {\n        line-height: $line-height-base * 1.2;\n      }\n\n      .bio {\n        margin: 0;\n        line-height: $line-height-base * 1.3;\n        text-align: center;\n      }\n    }\n\n    .links {\n      margin-top: $lg-gap;\n      padding: $gap;\n      border-radius: $lg-radius;\n      background-color: $module-bg-opaque;\n      overflow: hidden;\n\n      .list {\n        display: grid;\n        grid-gap: $lg-gap;\n        &.col-2 {\n          grid-template-columns: repeat(2, 1fr);\n        }\n        &.col-3 {\n          grid-template-columns: repeat(3, 1fr);\n        }\n        &.col-4 {\n          grid-template-columns: repeat(4, 1fr);\n        }\n\n        .image-item {\n          max-width: 100%;\n        }\n\n        .item {\n          display: inline-flex;\n          align-items: center;\n          height: 3rem;\n          padding: 0 1em;\n          border-radius: $sm-radius;\n          color: $white;\n          &.center {\n            justify-content: center;\n          }\n          &.text-only {\n            background-color: $surmon;\n          }\n          &.icon-only {\n            justify-content: center;\n            .iconfont {\n              font-size: $font-size-h3;\n              margin: 0;\n            }\n          }\n\n          .iconfont {\n            margin-right: $sm-gap;\n          }\n\n          .text {\n            font-weight: bold;\n          }\n\n          &.github {\n            background-color: $github-primary;\n          }\n          &.twitter {\n            background-color: $twitter-primary;\n          }\n          &.instagram {\n            background: $instagram-primary;\n            background: $instagram-gradient;\n            @include visibility-transition();\n          }\n          &.discord {\n            background-color: $discord-primary;\n          }\n          &.telegram {\n            background-color: $telegram-primary;\n          }\n          &.douban {\n            background-color: $douban-primary;\n          }\n          &.youtube {\n            background-color: $youtube-primary;\n          }\n          &.linkedin {\n            background-color: $linkedin-primary;\n          }\n        }\n      }\n    }\n\n    .qrcodes {\n      margin-top: $lg-gap;\n      display: grid;\n      grid-template-columns: repeat(2, 1fr);\n      grid-gap: $lg-gap;\n\n      .item {\n        width: 100%;\n        padding: $gap;\n        border-radius: $lg-radius;\n        overflow: hidden;\n        background-color: $module-bg-opaque;\n\n        .image {\n          width: 100%;\n          height: 100%;\n          border-radius: $xs-radius;\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"guestbook-page\">\n    <responsive>\n      <template #desktop>\n        <div class=\"desktop-banner\">\n          <uimage cdn class=\"image\" :src=\"bannerImage\" />\n          <button class=\"like\" :class=\"{ liked: isLiked }\" :disabled=\"isLiked\" @click=\"handleLike\">\n            <i class=\"icon iconfont icon-heart\"></i>\n            <span class=\"count\">{{ isLiked ? `${siteLikes - 1} + 1` : siteLikes }}</span>\n          </button>\n          <span class=\"slogan\">\n            <webfont class=\"text\" :class=\"{ dark: isDarkTheme }\">\n              <i18n :k=\"LanguageKey.GUESTBOOK_SLOGAN\" />\n            </webfont>\n          </span>\n        </div>\n      </template>\n      <template #mobile>\n        <page-banner class=\"mobile-banner\" :is-mobile=\"true\" :position=\"70\" :image=\"bannerImage\">\n          <template #title>\n            <i18n :k=\"LanguageKey.PAGE_GUESTBOOK\" />\n          </template>\n          <template #description>\n            <i18n :k=\"LanguageKey.GUESTBOOK_SLOGAN\" />\n          </template>\n        </page-banner>\n      </template>\n    </responsive>\n    <div class=\"comment\">\n      <comment :post-id=\"0\" :plain=\"isMobile\" :fetching=\"mockCommentLoading\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, computed } from 'vue'\n  import { isClient } from '/@/app/environment'\n  import { useUniversalFetch } from '/@/universal'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useStores } from '/@/stores'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { CommentPostID } from '/@/constants/state'\n  import { Language, LanguageKey } from '/@/language'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { getTargetCDNURL } from '/@/transforms/url'\n  import { META } from '/@/config/app.config'\n  import PageBanner from '/@/components/common/banner.vue'\n  import Comment from '/@/components/comment/index.vue'\n\n  export default defineComponent({\n    name: 'GuestbookPage',\n    components: {\n      PageBanner,\n      Comment\n    },\n    props: {\n      isMobile: {\n        type: Boolean,\n        default: false\n      }\n    },\n    setup() {\n      const GUESTBOOK_POST_ID = CommentPostID.Guestbook\n      const { i18n, meta, gtag, globalState, isDarkTheme, isZhLang } = useEnhancer()\n      const { appOption, comment, identity } = useStores()\n      // MARK: [SSR & not first page] only\n      const mockCommentLoading = ref(isClient && globalState.isHydrated.value)\n      const isLiked = computed(() => identity.isLikedPage(GUESTBOOK_POST_ID))\n      const siteLikes = computed(() => appOption.data?.meta.likes || 0)\n      const bannerImage = `/images/page-guestbook/banner.jpg`\n\n      const handleLike = async () => {\n        if (isLiked.value) {\n          return false\n        }\n        gtag?.event('like_site', {\n          event_category: GAEventCategories.Universal\n        })\n\n        try {\n          await appOption.postSiteLike()\n          identity.likePage(GUESTBOOK_POST_ID)\n        } catch (error) {\n          const message = i18n.t(LanguageKey.POST_ACTION_ERROR)\n          console.warn(message, error)\n          alert(message)\n        }\n      }\n\n      const fetchAllData = () => {\n        return Promise.all([\n          appOption.fetch(true),\n          comment.fetchList({ post_id: GUESTBOOK_POST_ID })\n        ]).then(() => {\n          mockCommentLoading.value = false\n        })\n      }\n\n      meta(() => {\n        const enTitle = firstUpperCase(i18n.t(LanguageKey.PAGE_GUESTBOOK, Language.English)!)\n        const titles = isZhLang.value ? [i18n.t(LanguageKey.PAGE_GUESTBOOK), enTitle] : [enTitle]\n        return {\n          pageTitle: titles.join(' | '),\n          description: `给 ${META.author} 留言`,\n          twitterCard: 'summary_large_image',\n          ogType: 'bbs',\n          ogImage: getTargetCDNURL(bannerImage)\n        }\n      })\n\n      useUniversalFetch(() => fetchAllData())\n\n      return {\n        LanguageKey,\n        bannerImage,\n        mockCommentLoading,\n        isDarkTheme,\n        isLiked,\n        siteLikes,\n        handleLike\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .guestbook-page {\n    .mobile-banner {\n      margin-bottom: $lg-gap;\n    }\n\n    .desktop-banner {\n      position: relative;\n      margin-bottom: $lg-gap;\n      width: 100%;\n      height: 19rem;\n      border: 0;\n      background-color: $module-bg;\n      @include radius-box($lg-radius);\n\n      .image {\n        margin-top: -($gap * 6);\n        transition: all $transition-time-slow;\n        &:hover {\n          transform: rotate(2deg) scale(1.1);\n        }\n      }\n\n      .like {\n        position: absolute;\n        left: $lg-gap * 2;\n        bottom: $gap * 2;\n        display: inline-flex;\n        align-items: center;\n\n        &.liked,\n        &:hover {\n          .icon {\n            color: $red;\n          }\n        }\n\n        .icon {\n          margin-right: $sm-gap;\n          color: rgba($red, 0.6);\n          font-size: $font-size-h2;\n          @include color-transition();\n        }\n\n        .count {\n          color: rgba($white, 0.8);\n          font-weight: bold;\n        }\n      }\n\n      .slogan {\n        $size: 2em;\n        display: block;\n        position: absolute;\n        right: $lg-gap * 2;\n        bottom: $gap * 2;\n        height: $size;\n        line-height: $size;\n        padding: 0 $sm-gap;\n        padding-left: 3rem;\n        border-top-right-radius: $mini-radius;\n        border-bottom-right-radius: $mini-radius;\n        background: linear-gradient(to left, $module-bg-lighter, $module-bg, transparent);\n        opacity: 0.8;\n        cursor: none;\n\n        .text {\n          letter-spacing: 0.3px;\n          color: $text;\n          background-clip: text;\n          background-image: url('/images/page-guestbook/banner.jpg');\n          background-position: 100% 80%;\n          -webkit-background-clip: text;\n          -webkit-text-fill-color: transparent;\n          &.dark {\n            -webkit-text-fill-color: $text !important;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"app-page\" :class=\"{ mobile: isMobile }\">\n    <div class=\"app\">\n      <div class=\"logo\">\n        <uimage cdn alt=\"app-logo\" src=\"/images/page-app/logo.png\" />\n      </div>\n      <h2 class=\"title\">{{ META.title }}</h2>\n      <p class=\"description\">\n        <webfont>\n          <i18n :k=\"LanguageKey.APP_SLOGAN\" />\n        </webfont>\n      </p>\n      <div class=\"screen\">\n        <uimage cdn alt=\"app-hot\" class=\"screen-img\" src=\"/images/page-app/hot.png\" />\n        <div class=\"download\">\n          <uimage cdn class=\"qrcode\" alt=\"qrcode\" src=\"/images/page-app/qrcode.png\" />\n          <ulink\n            class=\"button\"\n            :href=\"VALUABLE_LINKS.APP_APK_FILE\"\n            @mousedown=\"handleAppEvent('download_android_app')\"\n          >\n            <i class=\"icon iconfont icon-android\"></i>\n            <span class=\"text\">Android</span>\n            <i class=\"new-window iconfont icon-new-window-s\"></i>\n          </ulink>\n          <ulink\n            class=\"button\"\n            :href=\"VALUABLE_LINKS.GITHUB_SURMON_ME_NATIVE + '#ios'\"\n            @mousedown=\"handleAppEvent('download_ios_app')\"\n          >\n            <i class=\"icon iconfont icon-apple\"></i>\n            <span class=\"text\">iOS</span>\n            <i class=\"new-window iconfont icon-new-window-s\"></i>\n          </ulink>\n          <ulink\n            class=\"source-code\"\n            :href=\"VALUABLE_LINKS.GITHUB_SURMON_ME_NATIVE\"\n            @mousedown=\"handleAppEvent('app_source_code')\"\n          >\n            <i class=\"iconfont icon-git\"></i>\n            Source Code\n          </ulink>\n        </div>\n      </div>\n      <p class=\"rss\">\n        <span class=\"prefix\"><i18n zh=\"（\" en=\"[\" /></span>\n        <span class=\"deprecated\"><i18n zh=\"此项目已废弃！\" en=\"DEPRECATED!\" /></span>\n        <i18n zh=\"建议使用\" en=\"Recommend\" />\n        <a class=\"link\" :href=\"VALUABLE_LINKS.RSS\" target=\"_blank\">\n          <i18n zh=\"RSS 订阅\" en=\"RSS subscription\" />\n        </a>\n        <span class=\"suffix\"><i18n zh=\"）\" en=\"]\" /></span>\n      </p>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { Language, LanguageKey } from '/@/language'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { getTargetCDNURL } from '/@/transforms/url'\n  import { META, VALUABLE_LINKS } from '/@/config/app.config'\n\n  export default defineComponent({\n    name: 'AppPage',\n    props: {\n      isMobile: {\n        type: Boolean,\n        default: false\n      }\n    },\n    setup() {\n      const { i18n, meta, gtag, isZhLang } = useEnhancer()\n      meta(() => {\n        const enTitle = firstUpperCase(i18n.t(LanguageKey.PAGE_APP, Language.English)!)\n        const titles = isZhLang.value ? [i18n.t(LanguageKey.PAGE_APP), enTitle] : [enTitle]\n        return {\n          pageTitle: titles.join(' | '),\n          description: `${META.title} App 下载`,\n          ogImage: getTargetCDNURL('/images/page-app/logo.png')\n        }\n      })\n\n      const handleAppEvent = (name: string) => {\n        gtag?.event(name, {\n          event_category: GAEventCategories.App\n        })\n      }\n\n      return {\n        META,\n        VALUABLE_LINKS,\n        LanguageKey,\n        handleAppEvent\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .app-page {\n    display: flex;\n    justify-content: center;\n    flex-direction: column;\n    align-items: center;\n    min-height: 68rem;\n    height: $full-page-active-content-height;\n\n    .app {\n      text-align: center;\n\n      .logo {\n        margin-bottom: $lg-gap * 2;\n        img {\n          width: 6rem;\n          border-radius: 1em;\n        }\n      }\n\n      .title {\n        margin-bottom: 1rem;\n        color: $primary;\n        font-weight: bold;\n        text-transform: uppercase;\n      }\n\n      .version {\n        color: $text-divider;\n        text-decoration: line-through;\n      }\n\n      .rss {\n        margin-top: 2rem;\n        margin-bottom: 0;\n        color: $text-secondary;\n\n        .deprecated {\n          font-weight: bold;\n          margin-right: $xs-gap;\n          color: $red;\n        }\n\n        .link {\n          margin-left: $xs-gap;\n          @include text-underline();\n        }\n\n        .prefix {\n          margin-right: $xs-gap;\n        }\n        .suffix {\n          margin-left: $xs-gap;\n        }\n      }\n\n      .screen {\n        margin-top: 5rem;\n        width: 36rem;\n        position: relative;\n\n        &:hover {\n          .screen-img {\n            opacity: 0.4;\n          }\n\n          .download {\n            @include visible();\n          }\n        }\n\n        .screen-img {\n          width: 100%;\n          @include visibility-transition($transition-time-normal);\n        }\n\n        .download {\n          $size: 12rem;\n          position: absolute;\n          width: 100%;\n          height: 100%;\n          top: 0;\n          left: 0;\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n          align-items: center;\n          @include hidden();\n          @include backdrop-blur(3px);\n          @include visibility-transition($transition-time-normal);\n\n          .qrcode {\n            width: $size;\n            height: auto;\n            @include radius-box($sm-radius);\n          }\n\n          .button {\n            width: $size;\n            height: 3rem;\n            display: flex;\n            align-items: center;\n            margin-top: 2rem;\n            padding: 0 1em;\n            border: 1px solid $primary;\n            border-radius: $xs-radius;\n            background: $module-bg;\n            color: $primary;\n            transition: all $transition-time-fast;\n            &:hover {\n              color: $text-reversal;\n              border-color: $primary-translucent;\n              background: $primary-lighter;\n            }\n\n            .icon {\n              font-size: $font-size-h4;\n              margin-right: $sm-gap;\n            }\n\n            .new-window {\n              margin-left: $xs-gap;\n              font-size: $font-size-small;\n            }\n          }\n\n          .source-code {\n            margin-top: 2rem;\n            border-bottom: 1px solid;\n            color: $text;\n            &:hover {\n              color: $primary;\n            }\n\n            .iconfont {\n              margin-right: $xs-gap;\n            }\n          }\n        }\n      }\n    }\n\n    &.mobile {\n      min-height: 53rem;\n      height: calc(100vh - #{$mobile-header-height + $lg-gap + $lg-gap + $mobile-footer-height});\n\n      .app {\n        .screen {\n          width: 100%;\n          margin-top: 3rem;\n          margin-bottom: 1rem;\n          text-align: center;\n\n          .screen-img {\n            opacity: 0.4;\n            width: 90%;\n          }\n\n          .download {\n            @include visible();\n          }\n        }\n      }\n    }\n  }\n</style>\n","import { ref, computed } from 'vue'\nimport { useEnhancer } from '/@/app/enhancer'\nimport { GAEventCategories } from '/@/constants/gtag'\nimport { TunnelModule } from '/@/constants/tunnel'\nimport tunnel from '/@/services/tunnel'\nimport { IDENTITIES, VALUABLE_LINKS } from '/@/config/app.config'\n\nexport enum ProviderId {\n  GitHub = 'github',\n  PayPal = 'paypal',\n  Alipay = 'alipay',\n  WeChatPay = 'wechat-pay',\n  BitCoin = 'bitcoin',\n  Ethereum = 'ethereum'\n}\n\nexport const providerIds = Object.values(ProviderId)\nexport const providers = [\n  {\n    id: ProviderId.GitHub,\n    title: 'GitHub Sponsors',\n    logo: '/images/third-party/github-sponsors-logo.svg'\n  },\n  {\n    id: ProviderId.PayPal,\n    title: 'PayPal me',\n    link: VALUABLE_LINKS.PAYPAL,\n    logo: '/images/third-party/paypal-logo.svg',\n    qrcode: '/images/third-party/paypal-qrcode.png'\n  },\n  {\n    id: ProviderId.Alipay,\n    title: '支付宝',\n    text: '通过支付宝客户端扫码',\n    logo: '/images/third-party/alipay-logo.svg',\n    qrcode: '/images/third-party/alipay-qrcode.png'\n  },\n  {\n    id: ProviderId.WeChatPay,\n    title: '微信赞赏',\n    text: '通过微信客户端扫码',\n    logo: '/images/third-party/wechat-pay-logo.svg',\n    qrcode: '/images/third-party/wechat-pay-qrcode.jpg'\n  },\n  {\n    id: ProviderId.BitCoin,\n    title: 'BTC',\n    address: IDENTITIES.BTC_ADDRESS,\n    logo: '/images/third-party/btc-logo.svg',\n    qrcode: '/images/third-party/btc-qrcode.png'\n  },\n  {\n    id: ProviderId.Ethereum,\n    title: 'ETH',\n    address: IDENTITIES.ETH_ADDRESS,\n    logo: '/images/third-party/eth-logo.svg',\n    qrcode: '/images/third-party/eth-qrcode.png'\n  }\n]\n\nexport type SponsorState = ReturnType<typeof useSponsorState>\nexport const useSponsorState = (initId?: ProviderId) => {\n  const { gtag } = useEnhancer()\n  const activeId = ref(initId && providerIds.includes(initId) ? initId : providers[0].id)\n  const activeProvider = computed(() => providers.find((t) => t.id === activeId.value)!)\n\n  const ghSponsors = ref<any>(null)\n  const ghSponsorsLoading = ref<boolean>(false)\n  const ensureGitHubSponsors = () => {\n    if (ghSponsors.value || ghSponsorsLoading.value) {\n      return\n    }\n    ghSponsorsLoading.value = true\n    tunnel\n      .dispatch(TunnelModule.GitHubSponsors)\n      .then((response) => {\n        ghSponsors.value = response\n      })\n      .finally(() => {\n        ghSponsorsLoading.value = false\n      })\n  }\n\n  const setProviderId = (id: ProviderId) => {\n    if (!providerIds.includes(id)) {\n      return\n    }\n    // set provider ID\n    activeId.value = id\n    // fetch github sponsors\n    if (id === ProviderId.GitHub) {\n      ensureGitHubSponsors()\n    }\n    // push event\n    gtag?.event('sponsor_modal_switch', {\n      event_category: GAEventCategories.Widget\n    })\n  }\n\n  // init github sponsors\n  if (activeId.value === ProviderId.GitHub) {\n    ensureGitHubSponsors()\n  }\n\n  return {\n    activeId,\n    activeProvider,\n    setProviderId,\n    ghSponsors,\n    ghSponsorsLoading\n  }\n}\n","<template>\n  <div class=\"sponsor-tabs\" :class=\"activeId\">\n    <template v-for=\"(provider, index) in providers\" :key=\"index\">\n      <button\n        class=\"item\"\n        :class=\"[provider.id, { active: activeId === provider.id }]\"\n        :title=\"provider.title\"\n        @click=\"handleSwitch(provider.id)\"\n      >\n        <span class=\"logo\">\n          <uimage class=\"image\" :alt=\"provider.title\" :src=\"provider.logo\" cdn />\n        </span>\n        <span class=\"title\" v-if=\"!hideTitle\">{{ provider.title }}</span>\n      </button>\n    </template>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, PropType } from 'vue'\n  import { providers, SponsorState } from './state'\n  export default defineComponent({\n    name: 'SponsorTabs',\n    props: {\n      state: {\n        type: Object as PropType<SponsorState>,\n        required: true\n      },\n      hideTitle: {\n        type: Boolean,\n        default: false\n      }\n    },\n    setup(props) {\n      return {\n        providers,\n        activeId: props.state.activeId,\n        handleSwitch: props.state.setProviderId\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .sponsor-tabs {\n    display: flex;\n    justify-content: space-evenly;\n    align-items: center;\n    width: 100%;\n    text-align: center;\n    color: $text-disabled;\n    letter-spacing: 1px;\n\n    .item {\n      height: 5rem;\n      min-width: 4rem;\n      position: relative;\n      display: inline-flex;\n      justify-content: center;\n      align-items: center;\n\n      .logo {\n        $size: 2rem;\n        width: $size;\n        height: $size;\n        display: inline-block;\n        filter: grayscale(1);\n        text-align: right;\n\n        img {\n          height: $size;\n          object-fit: contain;\n        }\n      }\n\n      .title {\n        font-weight: bold;\n        margin-left: $gap;\n        color: $text-secondary;\n        transition: color $transition-time-fast;\n      }\n\n      &.github {\n        .logo {\n          img {\n            height: 2.2rem;\n          }\n        }\n      }\n\n      &.active,\n      &:hover {\n        .logo {\n          filter: grayscale(0);\n        }\n        .title {\n          color: $link-color;\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"sponsor-provider\" :class=\"activeProvider.id\">\n    <p class=\"external\">\n      <template v-if=\"activeProvider.link\">\n        <ulink class=\"link\" :href=\"activeProvider.link\">\n          <code>{{ activeProvider.link }}</code>\n        </ulink>\n        <i class=\"iconfont icon-new-window-s\"></i>\n      </template>\n      <template v-if=\"activeProvider.address\">\n        <code class=\"link\" @click=\"handleCopyAddress(activeProvider.address)\">\n          {{ activeProvider.address }}\n        </code>\n        <i class=\"iconfont icon-copy\"></i>\n      </template>\n      <template v-if=\"activeProvider.text\">\n        {{ activeProvider.text }}\n        <i class=\"iconfont icon-qrcode\"></i>\n      </template>\n    </p>\n    <uimage class=\"qrcode\" v-if=\"activeProvider.qrcode\" :src=\"activeProvider.qrcode\" cdn />\n    <div class=\"github-sponsors\" v-if=\"activeProvider.id == ProviderId.GitHub\">\n      <ulink class=\"link\" :href=\"VALUABLE_LINKS.GITHUB_SPONSORS\">\n        <i class=\"iconfont icon-heart\"></i>\n        <span class=\"text\">\n          <i18n en=\"Sponsor me on GitHub\" zh=\"通过 GitHub Sponsor 赞助我\" />\n        </span>\n      </ulink>\n      <client-only>\n        <transition name=\"module\">\n          <div v-if=\"ghSponsors\">\n            <p class=\"total\">\n              <i18n>\n                <template #zh>\n                  我在 GitHub Sponsors 已得到 {{ ghSponsors.totalCount }} 位赞助者的支持。\n                </template>\n                <template #en>\n                  I have {{ ghSponsors.totalCount }} backers on GitHub Sponsors.\n                </template>\n              </i18n>\n            </p>\n            <div class=\"users\">\n              <ulink\n                class=\"item\"\n                :href=\"edge.node.url\"\n                :title=\"edge.node.name\"\n                v-for=\"(edge, index) in ghSponsors.edges.slice(0, maxSponsors)\"\n                :key=\"index\"\n              >\n                <uimage class=\"avatar\" :src=\"edge.node.avatarUrl\" :alt=\"edge.node.name\" />\n              </ulink>\n              <ulink\n                class=\"more-link\"\n                v-if=\"ghSponsors.edges.length > maxSponsors\"\n                :href=\"VALUABLE_LINKS.GITHUB_SPONSORS + '#sponsors'\"\n              >\n                + {{ ghSponsors.edges.length - maxSponsors }}\n              </ulink>\n            </div>\n          </div>\n        </transition>\n      </client-only>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, PropType } from 'vue'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { copy } from '/@/utils/clipboard'\n  import { ProviderId, providers, SponsorState } from './state'\n  export default defineComponent({\n    name: 'SponsorProvider',\n    props: {\n      state: {\n        type: Object as PropType<SponsorState>,\n        required: true\n      },\n      maxSponsors: {\n        type: Number,\n        default: 20\n      }\n    },\n    setup(props) {\n      const { isZhLang } = useEnhancer()\n      const handleCopyAddress = (content: any) => {\n        copy(content).then(() => {\n          alert(isZhLang.value ? '地址已复制到剪贴板！' : 'Address copied!')\n        })\n      }\n\n      return {\n        VALUABLE_LINKS,\n        ProviderId,\n        providers,\n        activeProvider: props.state.activeProvider,\n        ghSponsors: props.state.ghSponsors,\n        ghSponsorsLoading: props.state.ghSponsorsLoading,\n        handleCopyAddress\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .sponsor-provider {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    min-height: 18rem;\n\n    .external {\n      margin-bottom: $gap;\n      color: $text-secondary;\n\n      .link {\n        margin-left: $sm-gap;\n        cursor: pointer;\n        text-decoration: underline;\n        color: $text-secondary;\n        &:hover {\n          color: $link-color;\n        }\n      }\n\n      .iconfont {\n        font-size: $font-size-small;\n        color: $text-secondary;\n        margin-left: $xs-gap;\n      }\n    }\n\n    .qrcode {\n      height: 14rem;\n      max-height: 60%;\n      border-radius: $xs-radius;\n    }\n\n    .github-sponsors {\n      text-align: center;\n\n      .link {\n        display: inline-block;\n        margin-bottom: 2rem;\n        padding: 0 1em;\n        line-height: 3em;\n        border-radius: $sm-radius;\n        background: $module-bg-darker-2;\n        transition: background $transition-time-fast;\n        &:hover {\n          background: $module-bg-darker-3;\n          .text {\n            color: $link-color;\n          }\n        }\n\n        .iconfont {\n          margin-right: $sm-gap;\n          font-size: $font-size-h4;\n          color: $github-sponsor-primary;\n        }\n\n        .text {\n          color: $text;\n          font-weight: bold;\n        }\n      }\n\n      .total {\n        margin-bottom: 2rem;\n        font-weight: bold;\n      }\n\n      .users {\n        max-width: 40rem;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        flex-wrap: wrap;\n\n        .more-link {\n          margin-left: $sm-gap;\n          line-height: 2em;\n          font-weight: bold;\n          font-size: $font-size-h4;\n          color: $text-secondary;\n          &:hover {\n            color: $link-color;\n          }\n        }\n\n        .item {\n          display: flex;\n          flex-direction: column;\n          margin: $sm-gap $xs-gap;\n\n          .avatar {\n            width: 3rem;\n            height: 3rem;\n            border-radius: 100%;\n            background-color: $module-bg-darker-1;\n            overflow: hidden;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"sponsor-page\">\n    <page-banner image=\"/images/page-sponsor/banner.webp\">\n      <template #title>\n        <webfont>\n          <i18n zh=\"赠吾玫瑰，手留余香\" en=\"Become a sponsor to me\" />\n        </webfont>\n      </template>\n      <template #description>\n        <i18n\n          zh=\"你的慷慨赞助将是我持续输出的不竭动力\"\n          en=\"Your generous financial support is my motivation to keep moving forward\"\n        />\n      </template>\n    </page-banner>\n    <div class=\"page-content\">\n      <container class=\"tabs-wrapper\">\n        <sponsor-tabs class=\"sponsor-tabs\" :state=\"sponsorState\" />\n      </container>\n      <sponsor-provider class=\"sponsor-provider\" :state=\"sponsorState\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, onMounted } from 'vue'\n  import { Language, LanguageKey } from '/@/language'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useSponsorState, ProviderId } from '/@/components/widget/sponsor/state'\n  import SponsorTabs from '/@/components/widget/sponsor/tabs.vue'\n  import SponsorProvider from '/@/components/widget/sponsor/provider.vue'\n  import PageBanner from '/@/components/common/banner.vue'\n\n  export default defineComponent({\n    name: 'SponsorPage',\n    components: {\n      SponsorTabs,\n      SponsorProvider,\n      PageBanner\n    },\n    setup() {\n      const { route, i18n, meta, isZhLang } = useEnhancer()\n      const sponsorState = useSponsorState()\n\n      meta(() => {\n        const enTitle = firstUpperCase(i18n.t(LanguageKey.PAGE_SPONSOR, Language.English)!)\n        const titles = isZhLang.value ? [i18n.t(LanguageKey.PAGE_SPONSOR), enTitle] : [enTitle]\n        return { pageTitle: titles.join(' | ') }\n      })\n\n      onMounted(() => {\n        const targetId = route.hash.replace('#', '')\n        if (targetId) {\n          sponsorState.setProviderId(targetId as ProviderId)\n        }\n      })\n\n      return { LanguageKey, sponsorState }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .sponsor-page {\n    width: 100%;\n    min-height: $full-page-active-content-height;\n    display: flex;\n    flex-direction: column;\n\n    .page-content {\n      flex-grow: 1;\n      display: flex;\n      flex-direction: column;\n\n      .tabs-wrapper {\n        background-color: $module-bg-translucent;\n        .sponsor-tabs {\n          height: 8rem;\n        }\n      }\n\n      .sponsor-provider {\n        flex: 1;\n        margin: 0 auto;\n        width: $container-width;\n        overflow: hidden;\n      }\n    }\n  }\n</style>\n","<template>\n  <ul class=\"skeletons\" :style=\"{ gridTemplateColumns: `repeat(${columns}, 1fr)` }\">\n    <div class=\"item\" :style=\"{ height: `${height}px` }\" v-for=\"item in columns * rows\" :key=\"item\">\n      <skeleton-base />\n    </div>\n  </ul>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  export default defineComponent({\n    name: 'LensSkeleton',\n    props: {\n      columns: {\n        type: Number,\n        required: true\n      },\n      rows: {\n        type: Number,\n        default: 2\n      },\n      height: {\n        type: Number,\n        required: true\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .skeletons {\n    padding: 0;\n    display: grid;\n    grid-gap: $gap * 2;\n\n    .item {\n      padding: $gap;\n      @include radius-box($sm-radius);\n      @include common-bg-module();\n    }\n  }\n</style>\n","<template>\n  <popup :visible=\"visible\" @close=\"handleGalleryClose\">\n    <div class=\"instagram-gallery\">\n      <div class=\"topbar\">\n        <div class=\"left\">\n          <span class=\"timestamp\">\n            <i class=\"iconfont icon-clock\"></i>\n            <udate to=\"YMDm\" :date=\"galleryActiveMedia.timestamp\" separator=\"/\" />\n          </span>\n        </div>\n        <div class=\"center\">\n          <span class=\"pagination\">{{ galleryActiveIndex + 1 }} / {{ medias.length }}</span>\n        </div>\n        <div class=\"right\">\n          <span class=\"caption\">\n            <i class=\"iconfont icon-video\" v-if=\"isVideoMediaIns(galleryActiveMedia)\"></i>\n            <i class=\"iconfont icon-camera\" v-else></i>\n            <template v-if=\"galleryActiveMedia.caption\">{{ galleryActiveMedia.caption }}</template>\n          </span>\n        </div>\n      </div>\n      <ulink class=\"postlink\" :href=\"galleryActiveMedia.permalink\">\n        <i class=\"iconfont icon-instagram\"></i>\n      </ulink>\n      <button\n        class=\"navigation prev\"\n        :disabled=\"galleryActiveIndex === 0\"\n        @click=\"galleryPrevSlide\"\n      >\n        <i class=\"iconfont icon-prev\" />\n      </button>\n      <button\n        class=\"navigation next\"\n        :disabled=\"galleryActiveIndex === medias.length - 1\"\n        @click=\"galleryNextSlide\"\n      >\n        <i class=\"iconfont icon-next\" />\n      </button>\n      <swiper\n        effect=\"fade\"\n        :fade-effect=\"{ crossFade: true }\"\n        :initial-slide=\"index\"\n        :mousewheel=\"true\"\n        :observe-parents=\"true\"\n        :grab-cursor=\"false\"\n        :preload-images=\"false\"\n        :lazy=\"true\"\n        :simulate-touch=\"false\"\n        @swiper=\"handleGallerySwiperReady\"\n        @transition-start=\"handleGallerySwiperTransitionStart\"\n      >\n        <swiper-slide v-for=\"(media, i) in medias\" :key=\"i\" v-slot=\"{ isActive }\">\n          <div class=\"video\" v-if=\"isVideoMediaIns(media)\">\n            <video v-if=\"isActive\" class=\"player\" :src=\"media.media_url\" controls autoplay />\n          </div>\n          <template v-else>\n            <div\n              class=\"image swiper-lazy\"\n              :data-background=\"getInstagramImage(media)\"\n              :alt=\"media.caption\"\n            />\n            <div class=\"swiper-lazy-preloader swiper-lazy-preloader-white\"></div>\n          </template>\n        </swiper-slide>\n      </swiper>\n    </div>\n  </popup>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, computed, PropType } from 'vue'\n  import type { InstagramMediaItem } from '/@/server/getters/instagram'\n  import SwiperClass, { Swiper, SwiperSlide } from '/@/effects/swiper'\n  import { isVideoMediaIns, getInstagramImage } from '/@/transforms/media'\n\n  enum GalleryEvents {\n    Close = 'close'\n  }\n\n  export default defineComponent({\n    name: 'LensInstagramGallery',\n    components: {\n      Swiper,\n      SwiperSlide\n    },\n    props: {\n      medias: {\n        type: Array as PropType<Array<InstagramMediaItem>>,\n        required: true\n      },\n      index: {\n        type: Number,\n        default: 0\n      },\n      visible: {\n        type: Boolean,\n        default: false\n      }\n    },\n    emits: [GalleryEvents.Close],\n    setup(props, context) {\n      const galleryActiveIndex = ref<number>(props.index)\n      const gallerySwiper = ref<SwiperClass>()\n      const galleryActiveMedia = computed(() => props.medias[galleryActiveIndex.value])\n      const galleryPrevSlide = () => gallerySwiper.value?.slidePrev()\n      const galleryNextSlide = () => gallerySwiper.value?.slideNext()\n      const handleGallerySwiperReady = (_swiper: SwiperClass) => {\n        gallerySwiper.value = _swiper\n      }\n      const handleGallerySwiperTransitionStart = () => {\n        galleryActiveIndex.value = gallerySwiper.value?.activeIndex || 0\n      }\n      const handleGalleryClose = () => {\n        context.emit(GalleryEvents.Close)\n      }\n\n      return {\n        galleryActiveIndex,\n        galleryActiveMedia,\n        isVideoMediaIns,\n        getInstagramImage,\n        handleGalleryClose,\n        handleGallerySwiperReady,\n        handleGallerySwiperTransitionStart,\n        galleryPrevSlide,\n        galleryNextSlide\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .instagram-gallery {\n    width: 88vw;\n    height: 76vh;\n    position: relative;\n    background: $black !important;\n\n    .swiper {\n      height: 100%;\n\n      .image {\n        overflow: hidden;\n        width: 100%;\n        height: 100%;\n        background-size: contain;\n        background-position: center;\n      }\n\n      .video {\n        width: 100%;\n        height: 100%;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        .player {\n          height: 100%;\n          max-width: 60%;\n        }\n      }\n    }\n\n    .topbar {\n      position: absolute;\n      top: 0;\n      left: 0;\n      margin: 0;\n      padding: 0 1em;\n      width: 100%;\n      height: 4rem;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      font-size: $font-size-h4;\n      background-color: rgba($black, 0.4);\n      color: $white;\n      z-index: $z-index-normal + 2;\n\n      .left,\n      .right,\n      .center {\n        display: inline-flex;\n        align-items: center;\n      }\n      .left {\n        width: 40%;\n        justify-content: start;\n      }\n      .center {\n        width: 20%;\n        justify-content: center;\n      }\n      .right {\n        width: 40%;\n        justify-content: end;\n      }\n\n      .pagination {\n        font-weight: bold;\n      }\n\n      .timestamp,\n      .caption {\n        .iconfont {\n          margin-right: $sm-gap;\n        }\n      }\n    }\n\n    .postlink {\n      $size: 3rem;\n      position: absolute;\n      z-index: $z-index-normal + 2;\n      bottom: 6rem;\n      right: 6rem;\n      width: $size;\n      height: $size;\n      line-height: $size;\n      border-radius: 50%;\n      text-align: center;\n      font-size: $font-size-h4;\n      background: $instagram-gradient;\n      color: $white;\n      opacity: 0.5;\n      transition: opacity $transition-time-fast;\n      &:hover {\n        opacity: 1;\n      }\n    }\n\n    .navigation {\n      display: inline-block;\n      position: absolute;\n      top: 33%;\n      height: 33%;\n      width: 4rem;\n      z-index: $z-index-normal + 2;\n      font-size: $font-size-h1 * 2;\n      color: $module-bg;\n      &[disabled] {\n        opacity: 0.4;\n      }\n      &:not([disabled]):hover {\n        color: $module-bg-lighter;\n      }\n\n      &.prev {\n        left: $gap;\n      }\n      &.next {\n        right: $gap;\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"instagram-grid\">\n    <ul class=\"medias\">\n      <li\n        class=\"media\"\n        v-for=\"(media, index) in gridMedias\"\n        :key=\"index\"\n        :title=\"media.caption\"\n        :class=\"isVideoMediaIns(media) ? 'video' : 'photo'\"\n        @click=\"openMediaGallery(index)\"\n      >\n        <div v-lozad class=\"background\" :data-background-image=\"getInstagramImage(media, 'm')\" />\n        <div class=\"mask\">\n          <span class=\"icon\">\n            <i class=\"iconfont icon-music-play\" v-if=\"isVideoMediaIns(media)\"></i>\n            <i class=\"iconfont icon-eye\" v-else></i>\n          </span>\n        </div>\n        <div class=\"type-icon\">\n          <i class=\"iconfont icon-video\" v-if=\"isVideoMediaIns(media)\"></i>\n          <i class=\"iconfont icon-album\" v-if=\"isAlbumMediaIns(media)\"></i>\n        </div>\n      </li>\n      <li class=\"more\">\n        <ulink\n          class=\"media\"\n          v-for=\"(media, index) in restMedias\"\n          :href=\"media.permalink\"\n          :key=\"index\"\n          :title=\"media.caption\"\n          :style=\"{ backgroundImage: `url(${getInstagramImage(media, 't')})` }\"\n        >\n          <div class=\"mask\">\n            <i class=\"iconfont icon-new-window-s\"></i>\n          </div>\n        </ulink>\n        <ulink\n          class=\"media\"\n          v-for=\"index in 3 - restMedias.length\"\n          :href=\"VALUABLE_LINKS.INSTAGRAM\"\n          :key=\"index\"\n          :style=\"{\n            backgroundImage: `url(${getTargetCDNURL('/images/page-lens/instagram-default.jpg')})`\n          }\"\n        >\n          <div class=\"mask\">\n            <i class=\"iconfont icon-new-window-s\"></i>\n          </div>\n        </ulink>\n        <ulink class=\"link\" :href=\"VALUABLE_LINKS.INSTAGRAM\">•••</ulink>\n      </li>\n    </ul>\n    <client-only>\n      <gallery\n        :medias=\"gridMedias\"\n        :index=\"galleryActiveIndex\"\n        :visible=\"isOnGallery\"\n        @close=\"closeMediaGallery\"\n      />\n    </client-only>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, computed, PropType } from 'vue'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { UNDEFINED } from '/@/constants/value'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { getTargetCDNURL } from '/@/transforms/url'\n  import { isVideoMediaIns, isAlbumMediaIns, getInstagramImage } from '/@/transforms/media'\n  import type { InstagramMediaItem } from '/@/server/getters/instagram'\n  import Gallery from './gallery.vue'\n\n  export default defineComponent({\n    name: 'LensInstagramGrid',\n    components: {\n      Gallery\n    },\n    props: {\n      medias: {\n        type: Array as PropType<Array<InstagramMediaItem>>,\n        required: true\n      },\n      limit: {\n        type: Number,\n        required: true\n      }\n    },\n    setup(props) {\n      const { gtag } = useEnhancer()\n      const galleryActiveIndex = ref<number>()\n      const isOnGallery = computed(() => galleryActiveIndex.value !== UNDEFINED)\n      const gridMedias = computed(() => props.medias.slice(0, props.limit - 1))\n      const restMedias = computed(() => {\n        return gridMedias.value.length > 1\n          ? props.medias.slice(props.limit - 1, props.limit + 2)\n          : []\n      })\n\n      const openMediaGallery = (index: number) => {\n        galleryActiveIndex.value = index\n        gtag?.event('instagram_view', {\n          event_category: GAEventCategories.Lens\n        })\n      }\n\n      const closeMediaGallery = () => {\n        galleryActiveIndex.value = UNDEFINED\n      }\n\n      return {\n        VALUABLE_LINKS,\n        gridMedias,\n        restMedias,\n        isOnGallery,\n        galleryActiveIndex,\n        isVideoMediaIns,\n        isAlbumMediaIns,\n        getTargetCDNURL,\n        getInstagramImage,\n        openMediaGallery,\n        closeMediaGallery\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n  $size: 155px;\n\n  .medias {\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    display: grid;\n    grid-template-columns: repeat(6, 1fr);\n    grid-gap: $gap * 2;\n    list-style: none;\n\n    .more {\n      width: 100%;\n      height: 100%;\n      display: grid;\n      grid-template-columns: repeat(2, 1fr);\n      grid-template-rows: repeat(2, 1fr);\n      grid-gap: $gap;\n\n      .media {\n        height: auto;\n        background-size: cover;\n      }\n\n      .link {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        font-size: $font-size-h1;\n        /* font line height offset */\n        padding-bottom: 4px;\n        @include common-bg-module();\n        @include radius-box($sm-radius);\n      }\n    }\n\n    .media {\n      position: relative;\n      display: block;\n      height: $size;\n      overflow: hidden;\n      cursor: pointer;\n      @include radius-box($sm-radius);\n      @include common-bg-module();\n      &:hover {\n        .mask {\n          @include visible();\n        }\n      }\n\n      .background {\n        width: 100%;\n        height: 100%;\n        background-size: cover;\n        background-position: center;\n      }\n\n      .type-icon {\n        opacity: 0.7;\n        position: absolute;\n        top: $xs-gap;\n        right: $sm-gap;\n        font-size: $font-size-h4;\n        color: $white;\n      }\n\n      .mask {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        z-index: $z-index-normal + 1;\n        background-color: rgba(#000, 0.3);\n        color: rgba($white, 0.8);\n        @include hidden();\n        @include visibility-transition();\n\n        .icon {\n          font-size: 2em;\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"list-swiper\">\n    <div class=\"navigation prev\">\n      <button class=\"button\" :disabled=\"!listSwiperState.canPrev\" @click=\"listPrevSlide\">\n        <i class=\"iconfont icon-prev\" />\n      </button>\n    </div>\n    <div class=\"navigation next\">\n      <button class=\"button\" :disabled=\"!listSwiperState.canNext\" @click=\"listNextSlide\">\n        <i class=\"iconfont icon-next\" />\n      </button>\n    </div>\n    <swiper\n      class=\"swiper\"\n      :autoplay=\"true\"\n      :mousewheel=\"false\"\n      :grab-cursor=\"false\"\n      :allow-touch-move=\"false\"\n      :slides-per-view=\"columns\"\n      :slides-per-group=\"columns\"\n      :grid=\"{ rows: rows, fill: 'row' }\"\n      :space-between=\"24\"\n      @swiper=\"handleListSwiperReady\"\n      @slide-change=\"handleListSlideChange\"\n    >\n      <swiper-slide class=\"slide-item\" :key=\"index\" v-for=\"(item, index) in data\">\n        <slot name=\"item\" v-bind=\"{ item, index }\"></slot>\n      </swiper-slide>\n    </swiper>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, reactive, PropType } from 'vue'\n  import SwiperClass, { Swiper, SwiperSlide } from '/@/effects/swiper'\n\n  export default defineComponent({\n    name: 'LensListSwiper',\n    components: {\n      Swiper,\n      SwiperSlide\n    },\n    props: {\n      data: {\n        type: Array as PropType<Array<any>>,\n        required: true\n      },\n      rows: {\n        type: Number,\n        default: 2\n      },\n      columns: {\n        type: Number,\n        default: 5\n      }\n    },\n    setup() {\n      const listSwiperState = reactive({ canPrev: false, canNext: true })\n      const listSwiper = ref<SwiperClass>()\n\n      const listPrevSlide = () => listSwiper.value?.slidePrev()\n      const listNextSlide = () => listSwiper.value?.slideNext()\n      const handleListSlideChange = (_swiper: SwiperClass) => {\n        listSwiperState.canNext = !_swiper.isEnd\n        listSwiperState.canPrev = !_swiper.isBeginning\n      }\n      const handleListSwiperReady = (_swiper: SwiperClass) => {\n        listSwiper.value = _swiper\n        handleListSlideChange(_swiper)\n      }\n\n      return {\n        handleListSwiperReady,\n        handleListSlideChange,\n        listSwiperState,\n        listPrevSlide,\n        listNextSlide\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .list-swiper {\n    position: relative;\n    &:hover {\n      .navigation {\n        opacity: 1;\n      }\n    }\n\n    .navigation {\n      $size: 8rem;\n      position: absolute;\n      top: 0;\n      height: 100%;\n      width: $size;\n      display: flex;\n      align-items: center;\n      opacity: 0;\n      transition: all $transition-time-fast;\n      &.prev {\n        left: -$size;\n        justify-content: start;\n      }\n      &.next {\n        right: -$size;\n        justify-content: end;\n      }\n\n      .button {\n        font-size: $font-size-h2 * 2;\n        color: $text-disabled;\n        &[disabled] {\n          color: $text-divider;\n        }\n        &:not([disabled]):hover {\n          color: $text;\n        }\n      }\n    }\n\n    .swiper {\n      padding: 0;\n      margin: 0;\n      list-style: none;\n    }\n  }\n</style>\n","<template>\n  <placeholder :data=\"videos\" :loading=\"fetching\">\n    <template #placeholder>\n      <slot name=\"empty\"></slot>\n    </template>\n    <template #loading>\n      <slot name=\"loading\"></slot>\n    </template>\n    <template #default>\n      <list-swiper :data=\"videos\">\n        <template #item=\"{ item }\">\n          <div class=\"video\" @click=\"handleView(item)\">\n            <div class=\"thumb\">\n              <div class=\"mask\">\n                <div class=\"button\">\n                  <i class=\"iconfont icon-music-play\" />\n                </div>\n              </div>\n              <span class=\"published-at\">\n                <i class=\"iconfont icon-clock\"></i>\n                <span class=\"text\">\n                  <udate to=\"ago\" :date=\"item.snippet.publishedAt\" />\n                </span>\n              </span>\n              <div\n                v-lozad\n                class=\"background\"\n                :data-background-image=\"getThumbURL(item.snippet.thumbnails)\"\n              />\n            </div>\n            <h5 class=\"title\">{{ item.snippet.title }}</h5>\n            <div class=\"description\">{{ item.snippet.description || '-' }}</div>\n          </div>\n        </template>\n      </list-swiper>\n    </template>\n  </placeholder>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, onMounted } from 'vue'\n  import { fetchYouTubeVideoList } from '/@/stores/media'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { LanguageKey } from '/@/language'\n  import { ProxyModule } from '/@/constants/proxy'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { getTargetProxyURL } from '/@/transforms/url'\n  import ListSwiper from '../swiper.vue'\n\n  export enum YoutubeVideoListEvents {\n    View = 'view'\n  }\n\n  export default defineComponent({\n    name: 'LensYoutubeVideoList',\n    components: { ListSwiper },\n    props: {\n      playlistId: {\n        type: String,\n        required: true\n      }\n    },\n    emits: [YoutubeVideoListEvents.View],\n    setup(props, context) {\n      const { gtag } = useEnhancer()\n      const videos = ref<Array<any>>([])\n      const fetching = ref(true)\n      const fetchVideos = async () => {\n        try {\n          fetching.value = true\n          videos.value = await fetchYouTubeVideoList(props.playlistId)\n        } catch (error) {\n          videos.value = []\n        } finally {\n          fetching.value = false\n        }\n      }\n\n      const getThumbURL = (thumbnails: any) => {\n        const url = thumbnails.high?.url || thumbnails.medium?.url || thumbnails.defult?.url\n        return url ? getTargetProxyURL(url, ProxyModule.YouTube) : ''\n      }\n\n      const handleView = (video: any) => {\n        context.emit(YoutubeVideoListEvents.View, video)\n        gtag?.event('youtube_view', {\n          event_category: GAEventCategories.Lens\n        })\n      }\n\n      onMounted(() => {\n        fetchVideos()\n      })\n\n      return {\n        LanguageKey,\n        fetching,\n        videos,\n        getThumbURL,\n        handleView\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .video {\n    display: block;\n    height: 166px;\n    cursor: pointer;\n    @include radius-box($sm-radius);\n    @include common-bg-module();\n    &:hover {\n      .thumb {\n        .mask {\n          @include visible();\n        }\n      }\n\n      .title {\n        color: $link-color;\n      }\n    }\n\n    .thumb {\n      width: 100%;\n      height: 106px;\n      position: relative;\n      overflow: hidden;\n      background-color: $module-bg-darker-3;\n\n      .background {\n        width: 100%;\n        height: 100%;\n        background-size: cover;\n        background-position: center;\n      }\n\n      .published-at {\n        position: absolute;\n        bottom: $sm-gap;\n        right: 1rem;\n        z-index: $z-index-normal + 1;\n        display: inline-flex;\n        justify-content: center;\n        align-items: center;\n        height: 2rem;\n        padding: 0 $sm-gap;\n        border-radius: $sm-radius;\n        background-color: rgba(#000, 0.3);\n        font-size: $font-size-small;\n        color: $white;\n\n        .iconfont {\n          margin-right: $xs-gap;\n        }\n\n        .text {\n          font-weight: bold;\n        }\n      }\n\n      .mask {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        z-index: $z-index-normal + 1;\n        background-color: rgba(#000, 0.4);\n        @include hidden();\n        @include visibility-transition();\n\n        .button {\n          opacity: 0.88;\n          font-size: 3em;\n          text-align: center;\n          color: rgba($white, 0.8);\n        }\n      }\n    }\n\n    .title,\n    .description {\n      padding: 0 0.7em;\n    }\n\n    .title {\n      margin-top: $sm-gap;\n      margin-bottom: 0.4em;\n      font-weight: bold;\n      color: $text;\n      max-width: 90%;\n      @include text-overflow();\n    }\n\n    .description {\n      max-width: 95%;\n      font-size: $font-size-h5 - 1;\n      color: $text-secondary;\n      @include text-overflow();\n    }\n  }\n</style>\n","<template>\n  <div class=\"youtube-playlist\">\n    <ul class=\"playlist\">\n      <li class=\"item\" :title=\"list.title\" :key=\"index\" v-for=\"(list, index) in playlists\">\n        <slot name=\"title\" v-bind=\"{ list, index }\"></slot>\n        <youtube-video-list :playlist-id=\"list.id\" @view=\"openYouTubeModal\">\n          <template #empty>\n            <slot name=\"empty\"></slot>\n          </template>\n          <template #loading>\n            <slot name=\"loading\"></slot>\n          </template>\n        </youtube-video-list>\n      </li>\n    </ul>\n    <client-only>\n      <popup :visible=\"isOnYouTubeModal\" :scroll-close=\"false\" @close=\"closeYouTubeModal\">\n        <iframe class=\"youtube-modal\" :src=\"youTubeModalURL\" />\n      </popup>\n    </client-only>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, computed, PropType } from 'vue'\n  import { UNDEFINED } from '/@/constants/value'\n  import { getYouTubeVideoEmbedURL } from '/@/transforms/media'\n  import YoutubeVideoList from './videos.vue'\n\n  export default defineComponent({\n    name: 'LensPageYoutubePlaylist',\n    components: {\n      YoutubeVideoList\n    },\n    props: {\n      playlists: {\n        type: Array as PropType<Array<any>>,\n        required: true\n      }\n    },\n    setup() {\n      const youtubeModalVideo = ref<any>(null)\n      const isOnYouTubeModal = computed(() => Boolean(youtubeModalVideo.value))\n      const youTubeModalURL = computed(() => {\n        const video = youtubeModalVideo.value\n        return video\n          ? getYouTubeVideoEmbedURL(video.snippet.resourceId.videoId, video.snippet.playlistId)\n          : UNDEFINED\n      })\n      const openYouTubeModal = (video: any) => {\n        youtubeModalVideo.value = video\n      }\n      const closeYouTubeModal = () => {\n        youtubeModalVideo.value = null\n      }\n\n      return {\n        isOnYouTubeModal,\n        youTubeModalURL,\n        openYouTubeModal,\n        closeYouTubeModal\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .youtube-modal {\n    width: 88vw;\n    height: 76vh;\n    position: relative;\n    background: $black !important;\n  }\n\n  .youtube-playlist {\n    .playlist {\n      padding: 0;\n      margin: 0;\n      list-style: none;\n    }\n  }\n</style>\n","<template>\n  <div class=\"lens-page\">\n    <page-banner class=\"page-banner\" :position=\"68\" image=\"/images/page-lens/banner.jpeg\">\n      <template #title>\n        <webfont>\n          <i18n zh=\"凡心所向，素履以往\" en=\"Because it's there\" />\n        </webfont>\n      </template>\n      <template #description>\n        <i18n>\n          <template #zh>生如逆旅，一苇以航</template>\n          <template #en>\"why did you want to climb mount Everest?\"</template>\n        </i18n>\n      </template>\n    </page-banner>\n    <container class=\"page-bridge\"></container>\n    <container class=\"page-content\">\n      <h4 class=\"module-title instagram\">\n        <ulink class=\"link\" :href=\"VALUABLE_LINKS.INSTAGRAM\">浮光掠影 | photography</ulink>\n        <ulink class=\"brand\" :href=\"VALUABLE_LINKS.INSTAGRAM\">\n          <i class=\"iconfont icon-instagram\"></i>\n          <span class=\"text\">Instagram</span>\n        </ulink>\n      </h4>\n      <placeholder :data=\"instagramMedias\" :loading=\"instagramMedias.fetching\">\n        <template #placeholder>\n          <empty class=\"module-empty\" key=\"empty\">\n            <i18n :k=\"LanguageKey.EMPTY_PLACEHOLDER\" />\n          </empty>\n        </template>\n        <template #loading>\n          <lens-skeleton\n            :columns=\"6\"\n            :rows=\"2\"\n            :height=\"155\"\n            key=\"loading\"\n            class=\"module-loading\"\n          />\n        </template>\n        <template #default>\n          <div class=\"module-content\">\n            <instagram-grid :medias=\"instagramMedias.data\" :limit=\"24\" />\n          </div>\n        </template>\n      </placeholder>\n      <div class=\"module-content\">\n        <youtube-playlist :playlists=\"youtubePlaylistData\">\n          <template #title=\"{ list }\">\n            <h4 class=\"module-title youtube\">\n              <ulink class=\"link\" :href=\"getYouTubePlaylistURL(list.id)\">\n                {{ list.snippet.title }}\n                ({{ list.contentDetails.itemCount }})\n              </ulink>\n              <ulink class=\"brand\" :href=\"VALUABLE_LINKS.YOUTUBE_CHANNEL\">\n                <i class=\"iconfont icon-youtube\"></i>\n                <span class=\"text\">YouTube · Channel</span>\n              </ulink>\n            </h4>\n          </template>\n          <template #loading>\n            <lens-skeleton\n              :columns=\"5\"\n              :rows=\"1\"\n              :height=\"166\"\n              key=\"loading\"\n              class=\"module-loading\"\n            />\n          </template>\n          <template #empty>\n            <empty class=\"module-empty\" key=\"empty\">\n              <i18n :k=\"LanguageKey.EMPTY_PLACEHOLDER\" />\n            </empty>\n          </template>\n        </youtube-playlist>\n      </div>\n    </container>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useStores } from '/@/stores'\n  import { useUniversalFetch } from '/@/universal'\n  import { Language, LanguageKey } from '/@/language'\n  import { META, VALUABLE_LINKS } from '/@/config/app.config'\n  import { getYouTubePlaylistURL } from '/@/transforms/media'\n  import { firstUpperCase } from '/@/transforms/text'\n  import PageBanner from '/@/components/common/banner.vue'\n  import LensSkeleton from './skeleton.vue'\n  import InstagramGrid from './instagram/grid.vue'\n  import YoutubePlaylist from './youtube/playlist.vue'\n\n  export default defineComponent({\n    name: 'LensPage',\n    components: {\n      PageBanner,\n      LensSkeleton,\n      InstagramGrid,\n      YoutubePlaylist\n    },\n    setup() {\n      const { i18n, meta, isZhLang } = useEnhancer()\n      const { instagramMedias, youtubePlayList } = useStores()\n      const youtubePlaylistData = computed(() => {\n        return youtubePlayList.data.filter((list) => list.contentDetails.itemCount > 1)\n      })\n\n      meta(() => {\n        const enTitle = firstUpperCase(i18n.t(LanguageKey.PAGE_LENS, Language.English)!)\n        const titles = isZhLang.value ? [i18n.t(LanguageKey.PAGE_LENS), enTitle] : [enTitle]\n        return {\n          pageTitle: titles.join(' | '),\n          description: `${META.author} 的浮光掠影`\n        }\n      })\n\n      useUniversalFetch(() => {\n        return Promise.all([\n          // eslint-disable-next-line @typescript-eslint/no-empty-function\n          instagramMedias.fetch().catch(() => {}),\n          // eslint-disable-next-line @typescript-eslint/no-empty-function\n          youtubePlayList.fetch().catch(() => {})\n        ])\n      })\n\n      return {\n        VALUABLE_LINKS,\n        LanguageKey,\n        instagramMedias,\n        youtubePlaylistData,\n        getYouTubePlaylistURL\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .lens-page {\n    .page-bridge {\n      position: relative;\n      height: 4rem;\n      background: linear-gradient(to right, transparent, $module-bg-opaque, transparent);\n    }\n\n    .module-title {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      text-transform: uppercase;\n      letter-spacing: 4px;\n      color: $text;\n      margin: 3rem 0;\n\n      &.instagram {\n        --brand-primary: #{$instagram-primary};\n      }\n      &.youtube {\n        --brand-primary: #{$youtube-primary};\n      }\n\n      .link {\n        font-weight: bold;\n        color: $text-secondary;\n        &:hover {\n          color: $link-color;\n        }\n      }\n\n      .brand {\n        font-size: $font-size-small;\n        color: $text-disabled;\n        &:hover {\n          color: var(--brand-primary);\n        }\n\n        .iconfont {\n          margin-right: $sm-gap;\n          font-weight: normal;\n        }\n      }\n    }\n\n    .module-empty {\n      min-height: 12rem;\n      margin-bottom: $gap * 2;\n      font-weight: bold;\n      font-size: $font-size-h3;\n      @include radius-box($sm-radius);\n      @include common-bg-module();\n    }\n\n    .module-loading {\n      margin-bottom: $gap * 2;\n    }\n\n    .module-content {\n      margin-bottom: $gap * 2;\n    }\n  }\n</style>\n","/**\n * @file NFT url\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const getEtherscanURL = (address: string) => {\n  return `https://etherscan.io/address/${address}`\n}\n\nexport const getOpenSeaCollectionURL = (slug: string) => {\n  return `https://opensea.io/collection/${slug}`\n}\n","<template>\n  <div class=\"nft-page\">\n    <page-banner :position=\"60\" image=\"/images/page-nft/banner.jpg\">\n      <template #title>\n        <webfont>\n          <i18n zh=\"旷古无两，数字典藏\" en=\"NFT Bar\" />\n        </webfont>\n      </template>\n      <template #description>\n        <i18n zh=\"由我铸造 / 收藏的独一无二的数字藏品\" en=\"Unique NFTs minted by me\" />\n      </template>\n    </page-banner>\n    <container class=\"page-statistic\">\n      <transition name=\"module\" mode=\"out-in\">\n        <div class=\"skeletons\" v-if=\"openseaCollections.fetching\">\n          <skeleton-base class=\"item\" :key=\"s\" v-for=\"s in 5\" />\n        </div>\n        <ul class=\"statistics\" v-else>\n          <li class=\"item\">\n            <p class=\"title\"><i18n zh=\"总交易量\" en=\"Total Volume\" /></p>\n            <h3 class=\"count\">{{ openseaCollections.totalVolume || '0.00' }}</h3>\n          </li>\n          <li class=\"item\">\n            <p class=\"title\"><i18n zh=\"总销售量\" en=\"Total Sales\" /></p>\n            <h3 class=\"count\">{{ openseaCollections.totalSales || '0.00' }}</h3>\n          </li>\n          <li class=\"item\">\n            <p class=\"title\">\n              <i18n zh=\"NFTs / 系列\" en=\"Assets / Collections\" />\n            </p>\n            <h3 class=\"count\">\n              {{ openseaCollections.assetsCount }}\n              /\n              {{ openseaCollections.data.length }}\n            </h3>\n          </li>\n          <li class=\"item\">\n            <p class=\"title\"><i18n zh=\"地板价\" en=\"floor price\" /></p>\n            <h3 class=\"count\">{{ openseaCollections.floorPrice || '0.00' }}</h3>\n          </li>\n          <li class=\"item\">\n            <p class=\"title\"><i18n zh=\"平均售价\" en=\"average price\" /></p>\n            <h3 class=\"count\">{{ openseaCollections.average_price || '0.00' }}</h3>\n          </li>\n        </ul>\n      </transition>\n    </container>\n    <container class=\"page-content\">\n      <placeholder :data=\"openseaAssets.assets.length\" :loading=\"openseaAssets.fetching\">\n        <template #placeholder>\n          <empty class=\"asset-empty\" key=\"empty\">NULL</empty>\n        </template>\n        <template #loading>\n          <ul class=\"asset-skeleton\" key=\"skeleton\">\n            <li v-for=\"item in 8\" :key=\"item\" class=\"item\">\n              <skeleton-base class=\"image\" />\n              <skeleton-paragraph class=\"paragraph\" :lines=\"4\" :align=\"true\" line-height=\"1em\" />\n            </li>\n          </ul>\n        </template>\n        <template #default>\n          <ul class=\"asset-list\">\n            <li class=\"asset\" :key=\"index\" v-for=\"(asset, index) in openseaAssets.assets\">\n              <div class=\"image\" :style=\"{ backgroundImage: `url('${asset.image_url}')` }\">\n                <ulink\n                  class=\"contract\"\n                  :href=\"getEtherscanURL(asset.asset_contract.address)\"\n                  @click=\"handleGTagEvent('asset_contract_link', asset.name)\"\n                >\n                  <i class=\"iconfont icon-coin\"></i>\n                  <span class=\"text\">{{ asset.asset_contract.schema_name }}</span>\n                </ulink>\n                <ulink\n                  class=\"external\"\n                  v-if=\"asset.external_link\"\n                  :href=\"asset.external_link\"\n                  @click=\"handleGTagEvent('asset_external_link', asset.name)\"\n                >\n                  <i class=\"iconfont icon-new-window-s\"></i>\n                </ulink>\n                <div class=\"links\">\n                  <ulink\n                    class=\"item\"\n                    v-if=\"asset.collection.discord_url\"\n                    :href=\"asset.collection.discord_url\"\n                    @click=\"handleGTagEvent('asset_collection_discord_url', asset.name)\"\n                  >\n                    <i class=\"iconfont icon-discord\"></i>\n                  </ulink>\n                  <ulink\n                    class=\"item\"\n                    v-if=\"asset.collection.telegram_url\"\n                    :href=\"asset.collection.telegram_url\"\n                    @click=\"handleGTagEvent('asset_collection_telegram_url', asset.name)\"\n                  >\n                    <i class=\"iconfont icon-telegram\"></i>\n                  </ulink>\n                </div>\n              </div>\n              <div class=\"content\">\n                <ulink\n                  class=\"name\"\n                  :title=\"asset.name\"\n                  :href=\"asset.permalink\"\n                  @click=\"handleGTagEvent('asset_name_link', asset.name)\"\n                >\n                  {{ asset.name }}\n                </ulink>\n                <ulink\n                  class=\"collection\"\n                  :title=\"asset.collection.name\"\n                  :href=\"getOpenSeaCollectionURL(asset.collection.slug)\"\n                  @click=\"handleGTagEvent('asset_collection_link', asset.name)\"\n                >\n                  {{ asset.collection.name }}\n                </ulink>\n                <p class=\"description\" :title=\"asset.description\">{{ asset.description }}</p>\n              </div>\n            </li>\n          </ul>\n        </template>\n      </placeholder>\n      <div class=\"viewmore\">\n        <ulink class=\"link\" :href=\"VALUABLE_LINKS.OPENSEA\">\n          <i18n>\n            <template #zh>\n              在 <i class=\"iconfont icon-opensea\"></i> OpenSea 查看更多 NFTs\n            </template>\n            <template #en>\n              View all NFTs on <i class=\"iconfont icon-opensea\"></i> OpenSea\n            </template>\n          </i18n>\n        </ulink>\n      </div>\n    </container>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { Language, LanguageKey } from '/@/language'\n  import { useUniversalFetch } from '/@/universal'\n  import { useStores } from '/@/stores'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { getEtherscanURL, getOpenSeaCollectionURL } from '/@/transforms/nft'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { META, VALUABLE_LINKS } from '/@/config/app.config'\n  import PageBanner from '/@/components/common/banner.vue'\n\n  export default defineComponent({\n    name: 'NftPage',\n    components: {\n      PageBanner\n    },\n    setup() {\n      const { i18n, meta, gtag, isZhLang } = useEnhancer()\n      const { openseaAssets, openseaCollections } = useStores()\n      const handleGTagEvent = (event: string, label: string) => {\n        gtag?.event(event, {\n          event_category: GAEventCategories.NFT,\n          event_label: label\n        })\n      }\n\n      meta(() => {\n        const enTitle = i18n.t(LanguageKey.PAGE_NFT, Language.English)!\n        const titles = isZhLang.value ? [i18n.t(LanguageKey.PAGE_NFT), enTitle] : [enTitle]\n        return {\n          pageTitle: titles.join(' | '),\n          description: `${META.author} 铸造的数字藏品`,\n          ogType: 'product'\n        }\n      })\n\n      useUniversalFetch(() => {\n        return Promise.all([\n          // eslint-disable-next-line @typescript-eslint/no-empty-function\n          openseaAssets.fetch().catch(() => {}),\n          // eslint-disable-next-line @typescript-eslint/no-empty-function\n          openseaCollections.fetch().catch(() => {})\n        ])\n      })\n\n      return {\n        VALUABLE_LINKS,\n        LanguageKey,\n        openseaAssets,\n        openseaCollections,\n        getEtherscanURL,\n        getOpenSeaCollectionURL,\n        handleGTagEvent\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .nft-page {\n    min-height: $full-page-active-content-height;\n    display: flex;\n    flex-direction: column;\n\n    .page-statistic {\n      padding: 3rem 0;\n      background-color: $module-bg-translucent;\n\n      .skeletons,\n      .statistics {\n        display: flex;\n        justify-content: space-around;\n        align-items: center;\n      }\n\n      .skeletons {\n        .item {\n          width: 5em;\n          height: 2em;\n        }\n      }\n\n      .statistics {\n        margin: 0;\n        padding: 0;\n        list-style: none;\n\n        .item {\n          .title {\n            margin: 0;\n            text-transform: uppercase;\n            color: $text-secondary;\n          }\n\n          .count {\n            margin: 0;\n            font-size: $font-size-h1 * 1.3;\n            font-weight: bold;\n          }\n        }\n      }\n    }\n\n    .page-content {\n      flex-grow: 1;\n\n      .asset-empty {\n        min-height: 28rem;\n        font-weight: bold;\n      }\n\n      .asset-skeleton,\n      .asset-list {\n        list-style: none;\n        margin: 2rem 0;\n        padding: 0;\n        display: grid;\n        grid-template-columns: repeat(4, 1fr);\n        grid-gap: $gap * 2;\n      }\n\n      .asset-skeleton {\n        .item {\n          height: 280px;\n          padding: 1rem;\n          @include radius-box($sm-radius);\n          @include common-bg-module();\n\n          .image {\n            height: 150px;\n            margin-bottom: 1em;\n          }\n        }\n      }\n\n      .asset-list {\n        .asset {\n          position: relative;\n          display: block;\n          height: auto;\n          @include radius-box($sm-radius);\n          @include common-bg-module();\n\n          .image {\n            position: relative;\n            width: 100%;\n            height: 245px;\n            overflow: hidden;\n            background-color: $white;\n            background-size: cover;\n            background-position: center;\n\n            .contract {\n              position: absolute;\n              top: 1em;\n              left: 1em;\n              height: 2rem;\n              padding: 0 0.5em;\n              display: inline-flex;\n              align-items: center;\n              color: $text-secondary;\n              background-color: $module-bg-lighter;\n              @include radius-box($sm-radius);\n              &:hover {\n                color: $link-color;\n              }\n\n              .text {\n                font-weight: bold;\n                font-size: $font-size-small;\n                margin-left: $xs-gap;\n              }\n            }\n\n            .links {\n              position: absolute;\n              right: 1em;\n              bottom: 1em;\n              display: flex;\n\n              .item {\n                display: inline-block;\n                width: 2rem;\n                height: 2rem;\n                line-height: 2rem;\n                text-align: center;\n                margin-left: $sm-gap;\n                color: $text-secondary;\n                background-color: $module-bg-lighter;\n                @include radius-box($sm-radius);\n                &:hover {\n                  color: $link-color;\n                }\n              }\n            }\n\n            .external {\n              position: absolute;\n              top: 1em;\n              right: 1em;\n              color: $white;\n            }\n          }\n\n          .content {\n            padding: $lg-gap;\n\n            .name {\n              display: block;\n              font-weight: bold;\n              font-size: $font-size-h4;\n            }\n\n            .collection {\n              display: block;\n              margin-top: $xs-gap;\n            }\n\n            .name,\n            .collection {\n              max-width: 100%;\n              @include text-overflow();\n              &:hover {\n                color: $link-color;\n                @include text-underline();\n              }\n            }\n\n            .description {\n              color: $text-secondary;\n              font-size: $font-size-small;\n              margin-top: $sm-gap;\n              margin-bottom: 0;\n              line-height: 1.6;\n              @include clamp(5);\n            }\n          }\n        }\n      }\n\n      .viewmore {\n        margin: 2rem 0;\n        text-align: center;\n\n        .link {\n          display: inline-block;\n          padding: 1rem 1em;\n          font-weight: bold;\n          font-size: $font-size-h5;\n          color: $text-divider;\n          background-color: $module-bg-darker-2;\n          @include radius-box($sm-radius);\n          &:hover {\n            color: $text-disabled;\n            background-color: $module-bg-darker-3;\n          }\n\n          .iconfont {\n            font-weight: normal;\n            margin: 0.2em 0;\n          }\n        }\n      }\n    }\n  }\n</style>\n","/**\n * @file App router\n * @module app.router\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport {\n  RouteRecordRaw,\n  NavigationGuard,\n  NavigationGuardNext,\n  RouterHistory,\n  createRouter\n} from 'vue-router'\nimport { LanguageKey } from '/@/language'\nimport { NOT_FOUND, BAD_REQUEST } from '/@/constants/error'\nimport { isValidDateParam } from '/@/transforms/validate'\nimport { scrollToPageTop } from '/@/utils/scroller'\nimport { LayoutColumn } from './state'\n\n// mobile flow\nimport MobileFlow from '/@/components/flow/mobile/index.vue'\n// desktop flow\nimport IndexFlowPage from '/@/pages/index/index.vue'\nimport CategoryFlowPage from '/@/pages/category.vue'\nimport TagFlowPage from '/@/pages/tag.vue'\nimport DateFlowPage from '/@/pages/date.vue'\nimport SearchFlowPage from '/@/pages/search.vue'\n\n// core pages\nimport DesktopArchivePage from '/@/pages/archive/desktop.vue'\nimport MobileArchivePage from '/@/pages/archive/mobile.vue'\nimport ArticleDetailPage from '/@/pages/article/index.vue'\nimport DesktopAboutPage from '/@/pages/about/desktop.vue'\nimport MobileAboutPage from '/@/pages/about/mobile.vue'\nimport GuestbookPage from '/@/pages/guestbook.vue'\nimport AppPage from '/@/pages/app.vue'\n\n// third pages\nimport SponsorPage from '/@/pages/sponsor.vue'\nimport LensPage from '/@/pages/lens/index.vue'\nimport NftPage from '/@/pages/nft.vue'\n\nimport 'vue-router'\n\ndeclare module 'vue-router' {\n  interface RouteMeta {\n    responsive?: boolean\n    layout?: LayoutColumn\n    validate?: (params: any) => Promise<any>\n    /** seconds | infinity | false: disabled  */\n    ssrCacheAge: number | false\n  }\n}\n\nexport enum CategorySlug {\n  Code = 'code',\n  Insight = 'insight'\n}\n\nexport enum RouteName {\n  Home = 'home',\n  Article = 'article-detail',\n  CategoryFlow = 'category-flow',\n  TagFlow = 'tag-flow',\n  DateFlow = 'date-flow',\n  SearchFlow = 'search-flow',\n  Archive = 'archive',\n  Guestbook = 'guestbook',\n  About = 'about',\n  Lens = 'lens',\n  App = 'app',\n  Nft = 'nft',\n  Sponsor = 'sponsor',\n  Error = 'error'\n}\n\nexport const routes: RouteRecordRaw[] = [\n  {\n    path: '/',\n    name: RouteName.Home,\n    components: {\n      default: IndexFlowPage,\n      mobile: MobileFlow\n    },\n    meta: {\n      responsive: true,\n      ssrCacheAge: 60 * 2 // 2 mins\n    }\n  },\n  {\n    path: '/article/:article_id',\n    name: RouteName.Article,\n    components: {\n      default: ArticleDetailPage,\n      mobile: ArticleDetailPage\n    },\n    props: {\n      default: (to) => ({ articleId: Number(to.params.article_id) }),\n      mobile: (to) => ({\n        isMobile: true,\n        articleId: Number(to.params.article_id)\n      })\n    },\n    meta: {\n      responsive: true,\n      ssrCacheAge: 30, // 30 seconds\n      async validate({ route, i18n }) {\n        if (!Number.isInteger(Number(route.params.article_id))) {\n          return Promise.reject({\n            code: BAD_REQUEST,\n            message: i18n.t(LanguageKey.QUERY_PARAMS_ERROR) + 'Article ID → <number>'\n          })\n        }\n      }\n    }\n  },\n  {\n    path: '/category/:category_slug',\n    name: RouteName.CategoryFlow,\n    components: {\n      default: CategoryFlowPage,\n      mobile: MobileFlow\n    },\n    props: {\n      default: (to) => ({ categorySlug: to.params.category_slug }),\n      mobile: (to) => ({ categorySlug: to.params.category_slug })\n    },\n    meta: {\n      responsive: true,\n      ssrCacheAge: 60 * 2, // 2 mins\n      async validate({ route, i18n }) {\n        const { category_slug } = route.params\n        if (!category_slug) {\n          return Promise.reject({\n            code: BAD_REQUEST,\n            message: i18n.t(LanguageKey.QUERY_PARAMS_ERROR) + 'Category slug → <string>'\n          })\n        }\n      }\n    }\n  },\n  {\n    path: '/tag/:tag_slug',\n    name: RouteName.TagFlow,\n    components: {\n      default: TagFlowPage,\n      mobile: MobileFlow\n    },\n    props: {\n      default: (to) => ({ tagSlug: to.params.tag_slug }),\n      mobile: (to) => ({ tagSlug: to.params.tag_slug })\n    },\n    meta: {\n      responsive: true,\n      ssrCacheAge: 60 * 2, // 2 mins\n      async validate({ route, i18n }) {\n        const { tag_slug } = route.params\n        if (!tag_slug) {\n          return Promise.reject({\n            code: BAD_REQUEST,\n            message: i18n.t(LanguageKey.QUERY_PARAMS_ERROR) + 'Tag slug → <string>'\n          })\n        }\n      }\n    }\n  },\n  {\n    path: '/date/:date',\n    name: RouteName.DateFlow,\n    components: {\n      default: DateFlowPage,\n      mobile: MobileFlow\n    },\n    props: {\n      default: (to) => ({ date: to.params.date }),\n      mobile: (to) => ({ date: to.params.date })\n    },\n    meta: {\n      responsive: true,\n      ssrCacheAge: 60 * 60 * 24, // 24 hours\n      async validate({ route, i18n }) {\n        const { date } = route.params\n        if (!date || !isValidDateParam(date)) {\n          return Promise.reject({\n            code: BAD_REQUEST,\n            message: i18n.t(LanguageKey.QUERY_PARAMS_ERROR) + `Invalid date ${date || ''}`\n          })\n        }\n      }\n    }\n  },\n  {\n    path: '/search/:keyword',\n    name: RouteName.SearchFlow,\n    components: {\n      default: SearchFlowPage,\n      mobile: MobileFlow\n    },\n    props: {\n      default: (to) => ({ keyword: to.params.keyword }),\n      mobile: (to) => ({ searchKeyword: to.params.keyword })\n    },\n    meta: {\n      responsive: true,\n      ssrCacheAge: false,\n      async validate({ route, i18n }) {\n        if (!route.params.keyword) {\n          return Promise.reject({\n            code: BAD_REQUEST,\n            message: i18n.t(LanguageKey.QUERY_PARAMS_ERROR) + 'Keywords ?'\n          })\n        }\n      }\n    }\n  },\n  {\n    path: '/archive',\n    name: RouteName.Archive,\n    components: {\n      default: DesktopArchivePage,\n      mobile: MobileArchivePage\n    },\n    meta: {\n      responsive: true,\n      layout: LayoutColumn.Full,\n      ssrCacheAge: 60 * 60 // 1 hours\n    }\n  },\n  {\n    path: '/about',\n    name: RouteName.About,\n    components: {\n      default: DesktopAboutPage,\n      mobile: MobileAboutPage\n    },\n    meta: {\n      responsive: true,\n      layout: LayoutColumn.Full,\n      ssrCacheAge: 60 * 60 * 4 // 4 hours\n    }\n  },\n  {\n    path: '/guestbook',\n    name: RouteName.Guestbook,\n    components: {\n      default: GuestbookPage,\n      mobile: GuestbookPage\n    },\n    props: {\n      mobile: {\n        isMobile: true\n      }\n    },\n    meta: {\n      responsive: true,\n      ssrCacheAge: 60 * 1 // 1 mins\n    }\n  },\n  {\n    path: '/app',\n    name: RouteName.App,\n    components: {\n      default: AppPage,\n      mobile: AppPage\n    },\n    props: {\n      mobile: {\n        isMobile: true\n      }\n    },\n    meta: {\n      responsive: true,\n      layout: LayoutColumn.Full,\n      ssrCacheAge: Infinity\n    }\n  },\n  {\n    path: '/lens',\n    name: RouteName.Lens,\n    component: LensPage,\n    meta: {\n      responsive: false,\n      layout: LayoutColumn.Full,\n      ssrCacheAge: 60 * 60 * 1 // 1 hours\n    }\n  },\n  {\n    path: '/nft',\n    name: RouteName.Nft,\n    component: NftPage,\n    meta: {\n      responsive: false,\n      layout: LayoutColumn.Full,\n      ssrCacheAge: 60 * 60 * 0.5 // 30 minutes\n    }\n  },\n  {\n    path: '/sponsor',\n    name: RouteName.Sponsor,\n    component: SponsorPage,\n    meta: {\n      responsive: false,\n      layout: LayoutColumn.Full,\n      ssrCacheAge: Infinity\n    }\n  },\n  {\n    name: RouteName.Error,\n    path: '/:error(.*)',\n    component: {},\n    meta: {\n      ssrCacheAge: false,\n      async validate({ i18n }) {\n        return Promise.reject({\n          code: NOT_FOUND,\n          message: i18n.t(LanguageKey.NOT_FOUND)\n        })\n      }\n    }\n  }\n]\n\nexport interface RouterCreatorOptions {\n  history: RouterHistory\n  beforeMiddleware?: NavigationGuard | NavigationGuard[]\n  afterMiddleware?: NavigationGuardNext | NavigationGuardNext[]\n}\nexport const createUniversalRouter = (options: RouterCreatorOptions) => {\n  const router = createRouter({\n    routes,\n    strict: true,\n    history: options.history,\n    linkActiveClass: 'link-active',\n    scrollBehavior: () => scrollToPageTop()\n  })\n\n  if (options.beforeMiddleware) {\n    Array.isArray(options.beforeMiddleware)\n      ? options.beforeMiddleware.forEach(router.beforeResolve)\n      : router.beforeResolve(options.beforeMiddleware)\n  }\n  if (options.afterMiddleware) {\n    Array.isArray(options.afterMiddleware)\n      ? options.afterMiddleware.forEach(router.afterEach)\n      : router.afterEach(options.afterMiddleware)\n  }\n\n  return router\n}\n","/**\n * @file Route transformer\n * @module transform.route\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { RouteName, CategorySlug } from '/@/app/router'\n\ntype RouteRecordName = string | symbol | null | undefined\n\nexport const getTagFlowRoute = (tagSlug: string) => {\n  return `/tag/${tagSlug}`\n}\n\nexport const getCategoryFlowRoute = (categorySlug: string | CategorySlug) => {\n  return `/category/${categorySlug}`\n}\n\nexport const getDateFlowRoute = (date: string) => {\n  return `/date/${date}`\n}\n\nexport const getArticleDetailRoute = (articleID: string | number) => {\n  return `/article/${articleID}`\n}\n\nexport const getPageRoute = (routeName: RouteName) => {\n  return `/${routeName}`\n}\n\nexport const isArticleDetail = (name: RouteRecordName) => name === RouteName.Article\nexport const isSearchFlow = (name: RouteRecordName) => name === RouteName.SearchFlow\nexport const isGuestbook = (name: RouteRecordName) => name === RouteName.Guestbook\nexport const isApp = (name: RouteRecordName) => name === RouteName.App\n","/**\n * @file Site inner link transformer\n * @module transform.relink\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { TagMap } from '/@/stores/tag'\nimport { getTagFlowRoute } from './route'\n\nexport default (text: string, tagMap: TagMap) => {\n  const tagNames = Object.keys(tagMap).sort((prev, next) => next.length - prev.length)\n  const tagRegexp = eval(`/${tagNames.join('|')}/ig`)\n\n  // 如果是 URL 则不处理\n  try {\n    new URL(text)\n    return text\n  } catch (error) {\n    return text.replace(tagRegexp, (tagText) => {\n      const foundTag = tagMap.get(tagText)\n\n      if (!foundTag || text[0] === '#') {\n        return tagText\n      }\n\n      const slug = foundTag.slug\n      const path = getTagFlowRoute(slug)\n      const command = `window.$app.config.globalProperties.$router.push({ path: \\'${path}\\' });return false`\n      return `<a href=\\\"${path}\\\" title=\\\"${foundTag.description}\\\" onclick=\\\"${command}\\\">${tagText}</a>`\n    })\n  }\n}\n","/**\n * @file Markdown parser\n * @module transform.markdown\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport highlight from '/@/effects/highlight'\nimport { marked, Renderer } from 'marked'\nimport { sanitizeUrl } from '@braintree/sanitize-url'\nimport { TagMap } from '/@/stores/tag'\nimport { LOZAD_CLASS_NAME } from '/@/composables/lozad'\nimport { escape } from '/@/transforms/text'\nimport relink from '/@/transforms/relink'\nimport API_CONFIG from '/@/config/api.config'\nimport { META } from '/@/config/app.config'\n\nconst trimHTML = (html: string) => html.replace(/\\s+/g, ' ').replace(/\\n/g, ' ')\n\n// MARK: escape vs sanitize https://zhuanlan.zhihu.com/p/421281945\n// sanitize and escape are overlapping, for normal users, no html is allowed, so sanitize is not required.\n// if sanitize is required, you will encounter many problems.\nconst sanitizeHTML = (content: string) => content\n\n// sanitize-html:\n// https://github.com/vitejs/vite/issues/9200\n// https://github.com/vitejs/vite/issues/9238\n// https://github.com/wolfiex/GeoDraw-SvelteKit/issues/2\n// https://github.com/apostrophecms/sanitize-html/issues/560\n// https://github.com/Greenheart/idg.tools/commit/15de4725dc8fdafe2fc86c24b5c32f3646f4cb29\n// MARK: Use dompurify instead of sanitize-html because sanitize-html doesn't work in browser.\n// https://github.com/apostrophecms/sanitize-html#browser\n\n// DOMPurify:\n// https://github.com/cure53/DOMPurify#running-dompurify-on-the-server\n// https://github.com/kkomelin/isomorphic-dompurify/blob/master/src/index.js\n// https://github.com/meteor/meteor/issues/10538#issuecomment-489252418\n// https://zhuanlan.zhihu.com/p/52990313\n// https://github.com/Automattic/node-canvas\n// WORKAROUND: `yarn add canvas`\n// OSX: `brew install pkg-config cairo pango libpng jpeg giflib librsvg pixman`\n// Ubuntu: `sudo apt-get install build-essential libcairo2-dev libpango1.0-dev libjpeg-dev libgif-dev librsvg2-dev`\n\ninterface RendererGetterOption {\n  sanitize: boolean\n  text: (text: string) => string\n  headingID: (html: string, level: number, raw: string) => string\n}\n\nconst getRenderer = (options?: Partial<RendererGetterOption>) => {\n  const renderer = new Renderer()\n\n  // text\n  renderer.text = (text) => {\n    return options?.text ? options.text(text) : text\n  }\n\n  // html: escape > sanitize\n  renderer.html = (html) => {\n    // https://github.com/apostrophecms/sanitize-html#default-options\n    return options?.sanitize ? sanitizeHTML(escape(html)) : html\n  }\n\n  // heading\n  renderer.heading = (html, level, raw) => {\n    const idText = options?.headingID ? `id=\"${options.headingID(html, level, raw)}\"` : ''\n    const safeedRaw = escape(raw)\n    return `<h${level} ${idText} alt=\"${safeedRaw}\" title=\"${safeedRaw}\">${html}</h${level}>`\n  }\n\n  // paragraph\n  renderer.paragraph = (text) => {\n    const trimmed = text.trim()\n    const isFigure = trimmed.startsWith(`<figure`) && trimmed.endsWith(`</figure>`)\n    const isDiv = trimmed.startsWith(`<div`) && trimmed.endsWith(`</div>`)\n    return isFigure || isDiv ? text : `<p>${text}</p>`\n  }\n\n  // checkbox\n  renderer.checkbox = (checked) => {\n    return checked\n      ? `<i class=\"checkbox checked iconfont icon-checkbox-selected\"></i>`\n      : `<i class=\"checkbox iconfont icon-checkbox-unselected\"></i>`\n  }\n\n  // link: sanitize\n  renderer.link = (href, title, text) => {\n    const isSelf = href?.startsWith(META.url)\n    const isImageLink = text.includes('<img')\n    const textValue = options?.sanitize ? escape(text) : text\n    const hrefValue = options?.sanitize ? sanitizeUrl(href!) : href\n    const titleValue = options?.sanitize ? escape(title!) : title\n\n    return sanitizeHTML(\n      trimHTML(`\n        <a\n          href=\"${hrefValue}\"\n          target=\"_blank\"\n          class=\"${isImageLink ? 'image-link' : 'link'}\"\n          title=\"${titleValue || (isImageLink ? hrefValue : textValue)}\"\n          ${isSelf ? '' : 'rel=\"external nofollow noopener\"'}\n        >${textValue}</a>\n      `)\n    )\n  }\n\n  // image: sanitize(title, alt) > popup\n  renderer.image = (src, title, alt) => {\n    // HTTP > proxy\n    const source = sanitizeUrl(src!)?.replace(/^http:\\/\\//gi, `${API_CONFIG.PROXY}/`)\n    const titleValue = sanitizeHTML(escape(title || alt))\n    const altValue = sanitizeHTML(escape(alt!))\n\n    // figure > alt\n    return trimHTML(`\n      <div class=\"figure-wrapper\">\n        <figure class=\"image ${altValue ? 'caption' : ''}\" data-status=\"loading\">\n          <div class=\"placeholder error\">\n            <i class=\"iconfont icon-image-error\"></i>\n          </div>\n          <div class=\"placeholder loading\">\n            <div></div>\n            <div></div>\n            <div></div>\n            <div></div>\n          </div>\n          <img\n            class=\"${LOZAD_CLASS_NAME}\"\n            data-src=\"${source}\"\n            ${altValue ? `alt=\"${altValue}\"` : ''}\n            ${titleValue ? `title=\"${titleValue}\"` : ''}\n            onload=\"this.parentElement.dataset.status = 'loaded'\"\n            onerror=\"this.parentElement.dataset.status = 'error'\"\n            onclick=\"window.$popup.vImage(this.src)\"\n          />\n          ${altValue ? `<figcaption>${altValue}</figcaption>` : ''}\n        </figure>\n      </div>\n    `)\n  }\n\n  // code: line number\n  renderer.code = function (code, lang, isEscaped) {\n    if (renderer.options.highlight) {\n      const output = renderer.options.highlight(code, lang || '')\n      if (output != null && output !== code) {\n        isEscaped = true\n        code = output\n      }\n    }\n\n    const lineNumbers = code\n      .split('\\n')\n      .map((_, i) => `<li class=\"code-line-number\">${i + 1}</li>`.replace(/\\s+/g, ' '))\n      .join('')\n\n    const readOnlyAttrs = `\n      contenteditable=\"true\"\n      oncut=\"return false\"\n      onpaste=\"return false\"\n      onkeydown=\"if(event.metaKey) return true; return false;\"\n    `\n\n    return lang\n      ? `\n        <pre data-lang=\"${lang}\">\n          <ul class=\"code-lines\">${lineNumbers}</ul>\n          <code\n            ${readOnlyAttrs}\n            class=\"${renderer.options.langPrefix}${encodeURI(lang)}\"\n          >${isEscaped ? code : encodeURI(code)}\\n</code>\n        </pre>\\n\n      `\n      : `\n        <pre>\n          <ul class=\"code-lines\">${lineNumbers}</ul>\n          <code ${readOnlyAttrs}>${isEscaped ? code : encodeURI(code)}\\n</code>\n        </pre>\n      `\n  }\n\n  return renderer\n}\n\nmarked.setOptions({\n  gfm: true,\n  breaks: false,\n  pedantic: false,\n  smartLists: true,\n  smartypants: false,\n  langPrefix: 'hljs language-',\n  highlight(code, language) {\n    return highlight.getLanguage(language)\n      ? highlight.highlight(code, { language }).value\n      : highlight.highlightAuto(code).value\n  }\n})\n\nexport interface MarkdownRenderOption {\n  sanitize?: boolean\n  relink?: boolean\n  tagMap?: TagMap\n  headingIDRenderer?: RendererGetterOption['headingID']\n}\nexport const markdownToHTML = (markdown: string, options?: MarkdownRenderOption) => {\n  if (!markdown || typeof markdown !== 'string') {\n    return ''\n  }\n\n  const renderOptions: Partial<RendererGetterOption> = {\n    headingID: options?.headingIDRenderer\n  }\n\n  // relink\n  if (options?.relink) {\n    renderOptions.text = (text) => relink(text, options.tagMap as TagMap)\n  }\n\n  // sanitize\n  if (options?.sanitize) {\n    renderOptions.sanitize = true\n  }\n\n  return marked.parse(markdown, { renderer: getRenderer(renderOptions) })\n}\n","/**\n * @file Article state\n * @module store.article\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineStore } from 'pinia'\nimport { Language } from '/@/language'\nimport { LONG_ARTICLE_THRESHOLD } from '/@/config/app.config'\nimport { OriginState, UniversalKeyValue, Pagination } from '/@/constants/state'\nimport { getArticleContentHeadingElementID } from '/@/constants/anchor'\nimport { markdownToHTML } from '/@/transforms/markdown'\nimport { delayPromise } from '/@/utils/delayer'\nimport { isClient } from '/@/app/environment'\nimport { useIdentityStore } from './identity'\nimport { Category } from './category'\nimport { Tag } from './tag'\nimport nodepress from '/@/services/nodepress'\n\nexport const ARTICLE_API_PATH = '/article'\n\nexport interface Article {\n  id: number\n  _id: string\n  title: string\n  description: string\n  content: string\n  keywords: string[]\n  thumb: string\n  origin: OriginState\n  tag: Tag[]\n  category: Category[]\n  lang: Language\n  disabled_comment: boolean\n  meta: {\n    likes: number\n    views: number\n    comments: number\n  }\n  update_at: string\n  create_at: string\n  extends: UniversalKeyValue[]\n}\n\nexport const useArticleListStore = defineStore('articleList', {\n  state: () => ({\n    hotList: {\n      fetched: false,\n      fetching: false,\n      data: [] as Array<Article>\n    },\n    list: {\n      fetching: false,\n      data: [] as Array<Article>,\n      pagination: null as null | Pagination\n    }\n  }),\n  actions: {\n    /** fetch new article list */\n    fetchList(params: any = {}) {\n      const isRestart = !params.page || params.page === 1\n      const isLoadMore = !isRestart && params.page > 1\n\n      // clean list\n      if (isRestart) {\n        this.list.data = []\n        this.list.pagination = null\n      }\n\n      this.list.fetching = true\n      const fetch = nodepress.get<any>(ARTICLE_API_PATH, { params })\n      const promise = isClient ? delayPromise(520, fetch) : fetch\n      return promise\n        .then((response) => {\n          if (isLoadMore) {\n            this.list.data.push(...response.result.data)\n            this.list.pagination = response.result.pagination\n          } else {\n            this.list.data = response.result.data\n            this.list.pagination = response.result.pagination\n          }\n        })\n        .finally(() => {\n          this.list.fetching = false\n        })\n    },\n\n    /** fetch hot article list */\n    fetchHottestList() {\n      if (this.hotList.fetched) {\n        return Promise.resolve()\n      }\n\n      this.hotList.fetching = true\n      return nodepress\n        .get(`${ARTICLE_API_PATH}/hottest`)\n        .then((response) => {\n          this.hotList.data = response.result\n          this.hotList.fetched = true\n        })\n        .finally(() => {\n          this.hotList.fetching = false\n        })\n    }\n  }\n})\n\nexport interface ArticleHeading {\n  text: string\n  level: number\n  id: string\n}\nconst renderArticleMarkdown = (markdown: string): { html: string; headings: ArticleHeading[] } => {\n  const headings: Array<ArticleHeading> = []\n  const html = markdownToHTML(markdown, {\n    sanitize: false,\n    relink: false,\n    headingIDRenderer: (html, level, raw) => {\n      const id = getArticleContentHeadingElementID(\n        level,\n        raw.toLowerCase().replace(/[^a-zA-Z0-9\\u4E00-\\u9FA5]+/g, '-')\n      )\n      headings.push({ level, id, text: raw })\n      return id\n    }\n  })\n\n  return { html, headings }\n}\n\nexport const useArticleDetailStore = defineStore('articleDetail', {\n  state: () => ({\n    fetching: false,\n    article: null as null | Article,\n    prevArticle: null as null | Article,\n    nextArticle: null as null | Article,\n    relatedArticles: [] as Article[],\n    renderedFullContent: true\n  }),\n  getters: {\n    contentLength(): number {\n      return this.article?.content.length || 0\n    },\n    readMinutes(): number {\n      const minutes = Math.round(this.contentLength / 400)\n      return minutes < 1 ? 1 : minutes\n    },\n    isLongContent(): boolean {\n      return Boolean(this.article && this.contentLength >= LONG_ARTICLE_THRESHOLD)\n    },\n    splitIndex(): number | null {\n      if (!this.article || !this.isLongContent) {\n        return null\n      }\n\n      const splitLength = Math.min(LONG_ARTICLE_THRESHOLD, Math.floor(this.contentLength / 2))\n      const shortContent = this.article.content.substring(0, splitLength)\n      // 坐标优先级：H5 > H4 > H3 > \\n\\n\\n\n      const lastH5Index = shortContent.lastIndexOf('\\n##### ')\n      const lastH4Index = shortContent.lastIndexOf('\\n#### ')\n      const lastH3Index = shortContent.lastIndexOf('\\n### ')\n      const lastLineIndex = shortContent.lastIndexOf('\\n\\n\\n')\n      const splitIndex = Math.max(lastH5Index, lastH4Index, lastH3Index, lastLineIndex)\n      // console.log('- content length', this.contentLength, index, splitIndex)\n      return splitIndex\n    },\n    defaultContent(): null | { markdown: string; html: string; headings: ArticleHeading[] } {\n      if (!this.article) {\n        return null\n      }\n      const markdown = this.isLongContent\n        ? this.article.content.substring(0, this.splitIndex!)\n        : this.article.content\n      const { html, headings } = renderArticleMarkdown(markdown)\n      return {\n        markdown,\n        html,\n        headings\n      }\n    },\n    moreContent(): null | { markdown: string; html: string; headings: ArticleHeading[] } {\n      if (this.article && this.isLongContent) {\n        const markdown = this.article.content.substring(this.splitIndex!)\n        const { html, headings } = renderArticleMarkdown(markdown)\n        return {\n          markdown,\n          html,\n          headings\n        }\n      }\n      return null\n    }\n  },\n  actions: {\n    renderFullContent() {\n      this.renderedFullContent = true\n    },\n\n    fetchArticleDetail(articleID: number) {\n      this.article = null\n      const fetch = nodepress.get(`${ARTICLE_API_PATH}/${articleID}`)\n      const promise = isClient ? delayPromise(580, fetch) : fetch\n      return promise.then((response) => {\n        this.article = response.result\n        this.renderedFullContent = !this.isLongContent\n      })\n    },\n\n    fetchArticleContext(articleID: number) {\n      this.prevArticle = null\n      this.nextArticle = null\n      this.relatedArticles = []\n      return nodepress.get(`${ARTICLE_API_PATH}/${articleID}/context`).then((response) => {\n        this.prevArticle = response.result.prev_article\n        this.nextArticle = response.result.next_article\n        this.relatedArticles = response.result.related_articles\n      })\n    },\n\n    fetchCompleteArticle(params: { articleID: number }) {\n      this.fetching = true\n      return Promise.all([\n        this.fetchArticleDetail(params.articleID),\n        this.fetchArticleContext(params.articleID)\n      ]).finally(() => {\n        this.fetching = false\n      })\n    },\n\n    postArticleLike(articleID: number) {\n      const identityStore = useIdentityStore()\n      return nodepress\n        .post(`/vote/post`, { post_id: articleID, vote: 1, author: identityStore.author })\n        .then((response) => {\n          if (this.article) {\n            this.article.meta.likes = response.result\n          }\n        })\n    }\n  }\n})\n","/**\n * @file Announcement state\n * @module store.announcement\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineFetchStore } from './_fetch'\nimport nodepress from '/@/services/nodepress'\n\nexport interface Announcement {\n  id?: number\n  _id?: string\n  state: number\n  content: string\n  update_at: string\n  create_at: string\n}\n\nexport const useAnnouncementStore = defineFetchStore({\n  id: 'announcement',\n  initData: [] as Array<Announcement>,\n  cleanWhenRefetch: true,\n  async fetcher(params?: any) {\n    const response = await nodepress.get('/announcement', { params })\n    return response.result.data as Array<Announcement>\n  }\n})\n","/**\n * @file Wallpaper state\n * @module store.wallpaper\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineFetchStore } from './_fetch'\nimport { Language } from '/@/language'\nimport { TunnelModule } from '/@/constants/tunnel'\nimport tunnel from '/@/services/tunnel'\n\nexport type Wallpaper = Record<Language, Array<any>>\n\nexport const useWallpaperStore = defineFetchStore({\n  id: 'wallpaper',\n  initData: null as null | Wallpaper,\n  onlyOnce: true,\n  fetcher: () => tunnel.dispatch<Wallpaper>(TunnelModule.BingWallpaper),\n  getters: {\n    papers: (state) => {\n      return (language: Language) => state.data?.[language]\n    }\n  }\n})\n","/**\n * @file NFT state\n * @module store.nft\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineFetchStore } from './_fetch'\nimport { TunnelModule } from '/@/constants/tunnel'\nimport type {\n  OpenSeaAssetItem,\n  OpenSeaAssetsResult,\n  OpenSeaCollection\n} from '/@/server/getters/opensea'\nimport tunnel from '/@/services/tunnel'\n\nexport const useOpenSeaAssetsStore = defineFetchStore({\n  id: 'openseaAssets',\n  initData: null as null | OpenSeaAssetsResult,\n  fetcher: () => tunnel.dispatch<OpenSeaAssetsResult>(TunnelModule.OpenSeaAssets),\n  getters: {\n    assets: (state): OpenSeaAssetItem[] => state.data?.assets ?? []\n  }\n})\n\nexport const useOpenSeaCollectionsStore = defineFetchStore({\n  id: 'openseaCollections',\n  initData: [] as Array<OpenSeaCollection>,\n  fetcher: () => tunnel.dispatch<Array<OpenSeaCollection>>(TunnelModule.OpenSeaCollections),\n  getters: {\n    assetsCount: (state) => state.data.reduce((plus, c) => plus + c.stats.count, 0),\n    // MARK: different contract\n    totalVolume: (state) => state.data.reduce((plus, c) => plus + c.stats.total_volume, 0),\n    // MARK: different contract\n    totalSales: (state) => state.data.reduce((plus, c) => plus + c.stats.total_sales, 0),\n    // MARK: different contract\n    floorPrice: (state) => Math.min(...state.data.map((c) => c.stats.floor_price)),\n    // MARK: different contract\n    average_price: (state) => {\n      const total = state.data.reduce((plus, c) => plus + c.stats.average_price, 0)\n      return total / state.data.length\n    }\n  }\n})\n","/**\n * @file Calendar state\n * @module store.calendar\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { TunnelModule } from '/@/constants/tunnel'\nimport nodepress from '/@/services/nodepress'\nimport tunnel from '/@/services/tunnel'\nimport { defineFetchStore } from './_fetch'\n\ntype CalendarDay = { date: string; count: number }\n\nexport const useArticleCalendarStore = defineFetchStore({\n  id: 'articleCalendar',\n  initData: [] as Array<CalendarDay>,\n  onlyOnce: true,\n  async fetcher() {\n    const response = await nodepress.get<Array<CalendarDay>>('/article/calendar', {\n      params: { timezone: Intl.DateTimeFormat().resolvedOptions().timeZone }\n    })\n    return response.result\n  }\n})\n\nexport const useTwitterCalendarStore = defineFetchStore({\n  id: 'twitterCalendar',\n  initData: [] as Array<CalendarDay>,\n  onlyOnce: true,\n  fetcher: () => tunnel.dispatch<Array<CalendarDay>>(TunnelModule.TwitterCalendar)\n})\n\nexport const useInstagramCalendarStore = defineFetchStore({\n  id: 'instagramCalendar',\n  initData: [] as Array<CalendarDay>,\n  onlyOnce: true,\n  fetcher: () => tunnel.dispatch<Array<CalendarDay>>(TunnelModule.InstagramCalendar)\n})\n\nexport const useGitHubCalendarStore = defineFetchStore({\n  id: 'githubContributionsCalendar',\n  initData: null,\n  onlyOnce: true,\n  fetcher: () => tunnel.dispatch(TunnelModule.GitHubContributions),\n  getters: {\n    days(state): Array<{ date: string; count: number; color: string }> {\n      if (!state.data) {\n        return []\n      }\n\n      return state.data.weeks\n        .map((week) => week.contributionDays)\n        .flat()\n        .map((day) => ({\n          date: day.date,\n          count: day.contributionCount,\n          color: day.color\n        }))\n    }\n  }\n})\n","/**\n * @file Store hook\n * @module store.hook\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { Pinia } from 'pinia'\n\nimport { useTagStore } from './tag'\nimport { useCategoryStore } from './category'\nimport { useCommentStore } from './comment'\nimport { useArticleListStore, useArticleDetailStore } from './article'\nimport { useAnnouncementStore } from './announcement'\nimport { useArchiveStore } from './archive'\nimport { useIdentityStore } from './identity'\nimport { useAdminInfoStore, useAppOptionStore } from './basic'\nimport { useWallpaperStore } from './wallpaper'\nimport { useOpenSeaAssetsStore, useOpenSeaCollectionsStore } from './nft'\nimport {\n  useNodepressStatisticStore,\n  useGitHubStatisticStore,\n  useNPMStatisticStore\n} from './statistic'\nimport {\n  useArticleCalendarStore,\n  useTwitterCalendarStore,\n  useInstagramCalendarStore,\n  useGitHubCalendarStore\n} from './calendar'\nimport {\n  useDoubanMoviesStore,\n  useInstagramMediasStore,\n  useYouTubePlayListStore,\n  useTwitterUserinfoStore,\n  useTwitterTweetsStore\n} from './media'\n\nexport const useStores = (pinia?: Pinia) => ({\n  announcement: useAnnouncementStore(pinia),\n  articleList: useArticleListStore(pinia),\n  articleDetail: useArticleDetailStore(pinia),\n  category: useCategoryStore(pinia),\n  tag: useTagStore(pinia),\n  comment: useCommentStore(pinia),\n  archive: useArchiveStore(pinia),\n  identity: useIdentityStore(pinia),\n  adminInfo: useAdminInfoStore(pinia),\n  appOption: useAppOptionStore(pinia),\n  wallpaper: useWallpaperStore(pinia),\n\n  nodepressStatistic: useNodepressStatisticStore(pinia),\n  githubStatistic: useGitHubStatisticStore(pinia),\n  npmStatistic: useNPMStatisticStore(pinia),\n\n  articleCalendar: useArticleCalendarStore(pinia),\n  twitterCalendar: useTwitterCalendarStore(pinia),\n  instagramCalendar: useInstagramCalendarStore(pinia),\n  githubCalendar: useGitHubCalendarStore(pinia),\n\n  doubanMovies: useDoubanMoviesStore(pinia),\n  instagramMedias: useInstagramMediasStore(pinia),\n  youtubePlayList: useYouTubePlayListStore(pinia),\n  twitterUserinfo: useTwitterUserinfoStore(pinia),\n  twitterTweets: useTwitterTweetsStore(pinia),\n  openseaAssets: useOpenSeaAssetsStore(pinia),\n  openseaCollections: useOpenSeaCollectionsStore(pinia)\n})\n","/**\n * @file Root store\n * @module store\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { createPinia } from 'pinia'\nimport { GlobalState } from '/@/app/state'\nimport { getSSRContext } from '/@/universal'\nimport { useStores } from './_hook'\nexport { useStores } from './_hook'\n\nexport interface UniversalStoreConfig {\n  globalState: GlobalState\n}\n\nexport const createUniversalStore = (config: UniversalStoreConfig) => {\n  const pinia = createPinia()\n  const fetchBasicStore = () => {\n    // https://pinia.esm.dev/ssr/#using-the-store-outside-of-setup\n    const stores = useStores(pinia)\n    const initFetchTasks = [\n      // basic data\n      stores.category.fetch(),\n      stores.tag.fetch(),\n      // app option (etc. ad_config, site_email, title, keywords)\n      stores.appOption.fetch()\n    ]\n    // fetch hot articles when desktop only\n    if (!config.globalState.userAgent.isMobile) {\n      initFetchTasks.push(stores.articleList.fetchHottestList())\n    }\n    return Promise.all(initFetchTasks)\n  }\n\n  return {\n    get stores() {\n      return useStores(pinia)\n    },\n    state: pinia.state,\n    install: pinia.install,\n    serverPrefetch: fetchBasicStore,\n    initOnSSRClient() {\n      const contextStore = getSSRContext('store')\n      if (contextStore) {\n        pinia.state.value = contextStore\n      } else {\n        // fallback when SSR page error\n        fetchBasicStore()\n      }\n    },\n    initOnSPAClient() {\n      useStores(pinia).identity.initOnClient()\n      return fetchBasicStore()\n    }\n  }\n}\n","<template>\n  <span\n    class=\"webfont\"\n    :class=\"[\n      bolder ? 'bolder' : 'medium',\n      isZhLang ? 'zh' : 'en',\n      { boldZh },\n      { boldEn },\n      { uppercase }\n    ]\"\n  >\n    <slot></slot>\n  </span>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  export default defineComponent({\n    name: 'Webfont',\n    props: {\n      bolder: {\n        type: Boolean,\n        default: false\n      },\n      boldZh: {\n        type: Boolean,\n        default: false\n      },\n      boldEn: {\n        type: Boolean,\n        default: true\n      },\n      uppercase: {\n        type: Boolean,\n        default: false\n      }\n    },\n    setup() {\n      const { isZhLang } = useEnhancer()\n      return {\n        isZhLang\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .webfont {\n    &.zh {\n      font-weight: normal;\n      /* HACK: for Chinese font */\n      margin-top: -1px;\n\n      &.medium {\n        font-family: 'webfont-medium';\n      }\n      &.bolder {\n        font-family: 'webfont-bolder';\n      }\n      &.boldZh {\n        font-weight: bold;\n      }\n    }\n\n    &.en {\n      font-size: 95%;\n      font-family: inherit;\n      &.boldEn {\n        font-weight: bold;\n      }\n      &.uppercase {\n        text-transform: uppercase;\n      }\n    }\n  }\n</style>\n","<template>\n  <div v-show=\"loading\" class=\"spinner-box\">\n    <div class=\"spinner-inner\">\n      <div class=\"la-ball-beat\">\n        <div :style=\"spinnerStyle\" />\n        <div :style=\"spinnerStyle\" />\n        <div :style=\"spinnerStyle\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  export default defineComponent({\n    name: 'Spin',\n    props: {\n      loading: {\n        type: Boolean,\n        default: true\n      },\n      color: {\n        type: String,\n        default: 'rgba(197, 197, 197, 0.4)'\n      },\n      height: {\n        type: String,\n        default: '15px'\n      },\n      width: {\n        type: String,\n        default: '15px'\n      },\n      margin: {\n        type: String,\n        default: '5px'\n      }\n    },\n    data() {\n      return {\n        spinnerStyle: {\n          backgroundColor: this.color,\n          height: this.height,\n          width: this.width,\n          margin: this.margin\n        }\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .spinner-box {\n    position: relative;\n    width: 100%;\n    min-height: 50px;\n    height: 100%;\n\n    @keyframes ball-beat {\n      50% {\n        opacity: 0.2;\n        transform: scale(0.75);\n      }\n      100% {\n        opacity: 1;\n        transform: scale(1);\n      }\n    }\n\n    > .spinner-inner {\n      width: 80px;\n      height: 30px;\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      margin-left: -40px;\n      margin-top: -15px;\n\n      > .la-ball-beat {\n        display: block;\n        position: relative;\n        box-sizing: border-box;\n        font-size: 0;\n        color: $white;\n        width: 80px;\n        height: 30px;\n\n        > div {\n          position: relative;\n          box-sizing: border-box;\n          display: inline-block;\n          float: none;\n          border: none;\n          width: 15px;\n          height: 15px;\n          margin: 5px;\n          background-color: $module-bg-hover;\n          animation: ball-beat 0.7s -0.15s infinite linear;\n\n          &:nth-child(2n-1) {\n            animation-delay: -0.5s;\n          }\n        }\n\n        &.la-sm {\n          width: 26px;\n          height: 8px;\n\n          > div {\n            width: 8px;\n            height: 8px;\n            margin: 3px;\n          }\n        }\n\n        &.la-2x {\n          width: 108px;\n          height: 36px;\n\n          > div {\n            width: 20px;\n            height: 20px;\n            margin: 8px;\n          }\n        }\n\n        &.la-3x {\n          width: 162px;\n          height: 54px;\n\n          > div {\n            width: 30px;\n            height: 30px;\n            margin: 12px;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"empty\">\n    <slot>\n      <template v-if=\"placeholder\">{{ placeholder }}</template>\n      <template v-else>\n        <i18n :k=\"i18nKey || LanguageKey.EMPTY_PLACEHOLDER\" />\n      </template>\n    </slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, PropType } from 'vue'\n  import { LanguageKey } from '/@/language'\n  export default defineComponent({\n    name: 'Empty',\n    props: {\n      placeholder: String,\n      i18nKey: String as PropType<LanguageKey>\n    },\n    setup() {\n      return {\n        LanguageKey\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .empty {\n    position: relative;\n    display: flex;\n    width: 100%;\n    height: 100%;\n    min-height: 5em;\n    text-align: center;\n    justify-content: center;\n    align-items: center;\n    color: $text-divider;\n    letter-spacing: 0.1em;\n  }\n</style>\n","<template>\n  <div role=\"separator\" class=\"divider\" :class=\"[type, size, { dashed }, { slot: $slots.default }]\">\n    <slot></slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, PropType } from 'vue'\n  export default defineComponent({\n    name: 'Divider',\n    props: {\n      type: {\n        type: String as PropType<'horizontal' | 'vertical'>,\n        default: 'horizontal'\n      },\n      dashed: {\n        type: Boolean,\n        default: false\n      },\n      size: {\n        type: String as PropType<'default' | 'xs' | 'sm' | 'lg'>,\n        default: 'default'\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .divider {\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n    &.default {\n      #{--divider-gap}: $gap;\n    }\n    &.xs {\n      #{--divider-gap}: $xs-gap;\n    }\n    &.sm {\n      #{--divider-gap}: $sm-gap;\n    }\n    &.lg {\n      #{--divider-gap}: $lg-gap;\n    }\n\n    &.horizontal {\n      display: flex;\n      align-items: center;\n      clear: both;\n      width: 100%;\n      margin: var(--divider-gap) 0;\n      border-top: 1px solid $text-divider;\n      &.slot {\n        border-top: none;\n      }\n    }\n\n    &.vertical {\n      position: relative;\n      top: -0.06em;\n      display: inline-block;\n      height: 0.9em;\n      margin: 0 var(--divider-gap);\n      vertical-align: middle;\n      border-left: 1px solid $text-divider;\n\n      &.slot {\n        display: inline-flex;\n        flex-direction: row;\n        flex-wrap: nowrap;\n        align-items: center;\n        justify-content: center;\n        height: 1em;\n        vertical-align: baseline;\n        border-left: none;\n      }\n    }\n\n    &.dashed {\n      border-style: dashed;\n    }\n  }\n</style>\n","/**\n * @file Universal date\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineComponent, PropType } from 'vue'\nimport { useEnhancer } from '/@/app/enhancer'\nimport { dateToYMD } from '/@/transforms/moment'\nimport { LanguageKey } from '/@/language'\n\nexport default defineComponent({\n  name: 'Udate',\n  props: {\n    to: {\n      type: String as PropType<'YMD' | 'YMDm' | 'ago'>,\n      required: true\n    },\n    date: {\n      type: [String, Number, Date] as PropType<string | number | Date>,\n      required: true\n    },\n    separator: {\n      type: String,\n      default: '-'\n    }\n  },\n  setup(props) {\n    const { i18n } = useEnhancer()\n\n    return () => {\n      // date\n      const date = props.date instanceof Date ? props.date : new Date(props.date)\n\n      // YYYY-MM-DD\n      if (props.to === 'YMD') {\n        return dateToYMD(date, props.separator)\n      }\n\n      // YYYY-MM-DD mm\n      if (props.to === 'YMDm') {\n        const ymd = dateToYMD(date, props.separator)\n        const meridiem =\n          date.getHours() > 11 ? i18n.t(LanguageKey.MOMENT_PM) : i18n.t(LanguageKey.MOMENT_AM)\n        return `${ymd} ${meridiem}`\n      }\n\n      // timeAgo\n      if (props.to === 'ago') {\n        const pluralize = (time: number, label: string) => {\n          const ago = `${time} ${label}`\n          return i18n.t(LanguageKey.MOMENT_AGO, null, { date: ago })\n        }\n\n        const between = Date.now() / 1000 - Number(date) / 1000\n        const hourS = 3600\n        const dayS = hourS * 24\n        const weekS = dayS * 7\n        const monthS = dayS * 30\n        const yearS = monthS * 12\n\n        if (between < hourS) {\n          return ~~(between / 60) === 0\n            ? i18n.t(LanguageKey.MOMENT_JUST_NOW)\n            : pluralize(~~(between / 60), i18n.t(LanguageKey.MOMENT_MINUTES)!)\n        }\n        if (between < dayS) {\n          return pluralize(~~(between / hourS), i18n.t(LanguageKey.MOMENT_HOURS)!)\n        }\n        if (between < weekS) {\n          return pluralize(~~(between / dayS), i18n.t(LanguageKey.MOMENT_DAYS)!)\n        }\n        if (between < monthS) {\n          return pluralize(~~(between / weekS), i18n.t(LanguageKey.MOMENT_WEEKS)!)\n        }\n        if (between < yearS) {\n          return pluralize(~~(between / monthS), i18n.t(LanguageKey.MOMENT_MONTHS)!)\n        }\n        return pluralize(~~(between / yearS), i18n.t(LanguageKey.MOMENT_YEAR)!)\n      }\n\n      return null\n    }\n  }\n})\n","/**\n * @file Universal link\n * @description render Link with external/nofollow/noopener\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { AnchorHTMLAttributes, defineComponent, h } from 'vue'\nimport { RouterLink, RouterLinkProps } from 'vue-router'\n\nexport default defineComponent({\n  name: 'Ulink',\n  props: {\n    // @ts-ignore\n    ...RouterLink.props,\n    to: String,\n    href: String,\n    external: {\n      type: Boolean,\n      default: true\n    },\n    blank: {\n      type: Boolean,\n      default: true\n    }\n  },\n  setup(props, context) {\n    return () => {\n      const { to, href, external, blank, ...routerLinkProps } = props\n      const customAttrs: AnchorHTMLAttributes = { ...context.attrs }\n\n      // router link\n      if (to && !to.startsWith('http')) {\n        const ps: RouterLinkProps = {\n          to: to,\n          ...routerLinkProps\n        }\n        return h(RouterLink, ps, context.slots.default)\n      }\n\n      // a link\n      if (external) {\n        customAttrs.rel = 'external nofollow noopener'\n      }\n      if (blank) {\n        customAttrs.target = '_blank'\n      }\n      return h('a', { ...customAttrs, href: href || to }, context.slots.default?.())\n    }\n  }\n})\n","/**\n * @file Universal image\n * @description render image with CDN/Proxy/Defer\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineComponent, ref, h, PropType } from 'vue'\nimport { useEnhancer } from '/@/app/enhancer'\nimport { ProxyModule } from '/@/constants/proxy'\nimport { getTargetCDNURL, getTargetProxyURL } from '/@/transforms/url'\nimport { onClient } from '/@/universal'\n\nexport default defineComponent({\n  name: 'Uimage',\n  props: {\n    src: {\n      type: String,\n      required: true\n    },\n    cdn: {\n      type: Boolean,\n      default: false\n    },\n    proxy: {\n      type: [Boolean, String] as PropType<ProxyModule | boolean>,\n      default: false\n    },\n    defer: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props) {\n    const { defer } = useEnhancer()\n    const deferRenderable = ref(false)\n    if (props.defer) {\n      onClient(() => {\n        defer.addTask(() => {\n          deferRenderable.value = true\n        })\n      })\n    }\n\n    return () => {\n      const { src, cdn, proxy, defer, ...restProps } = props\n\n      let imageSrc = src\n      if (cdn) {\n        imageSrc = getTargetCDNURL(src)\n      }\n      if (proxy) {\n        imageSrc = getTargetProxyURL(src, proxy === true ? ProxyModule.Default : proxy)\n      }\n      if (defer && !deferRenderable.value) {\n        return null\n      }\n\n      return h('img', {\n        draggable: false,\n        ...restProps,\n        src: imageSrc\n      })\n    }\n  }\n})\n","/**\n * @file placeholder\n * @description render placeholder or data\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineComponent, h, Transition, PropType } from 'vue'\nimport { LanguageKey } from '/@/language'\nimport Empty from './empty.vue'\nimport Spin from './spin.vue'\n\nexport enum Events {\n  AfterEnter = 'after-enter'\n}\n\n/**\n * @example\n *  <placeholder :loading=\"false\" :data=\"data.length\" :i18n-key=\"LanguageKey.XXX\">\n *    <component />\n *  </placeholder>\n * @example\n *  <placeholder :loading=\"false\" :data=\"data.length\" placeholder=\"empty\">\n *    <component />\n *  </placeholder>\n * @example\n *  <placeholder :loading=\"true\" :data=\"data.length\">\n *    <template #loading> skeleton </template>\n *    <template #placeholder> placeholder </template>\n *    <template #default> <component /> </template>\n *  </placeholder>\n */\nexport default defineComponent({\n  name: 'Placeholder',\n  props: {\n    data: {\n      type: [Array, Object, Boolean, Number],\n      default: undefined\n    },\n    transition: {\n      type: Boolean,\n      default: true\n    },\n    transitionName: {\n      type: String,\n      default: 'module'\n    },\n    placeholder: String,\n    i18nKey: String as PropType<LanguageKey>,\n    loading: Boolean\n  },\n  emits: [Events.AfterEnter],\n  setup(props, context) {\n    return () => {\n      const { data, placeholder, i18nKey, loading, transition, transitionName } = props\n      const isEmptyData =\n        data !== undefined && ((Array.isArray(data) && !(data as any).length) || !data)\n\n      const getPlaceholderView = () => {\n        return placeholder || i18nKey\n          ? h(Empty, { placeholder, i18nKey })\n          : context.slots.placeholder?.()\n      }\n\n      const getDataView = () => {\n        return isEmptyData ? getPlaceholderView() : context.slots.default?.()\n      }\n\n      const getLoadingView = () => {\n        return context.slots.loading?.() || h(Spin, { loading: true })\n      }\n\n      const getView = () => {\n        return loading ? getLoadingView() : getDataView()\n      }\n\n      if (transition) {\n        return h(\n          Transition,\n          {\n            name: transitionName,\n            mode: 'out-in',\n            onAfterEnter(...args) {\n              context.emit(Events.AfterEnter, ...args)\n            }\n          },\n          () => getView()\n        )\n      }\n\n      return getView()\n    }\n  }\n})\n","/**\n * @file client only\n * @description only render on client (browser)\n * @description Fork from: https://github.com/egoist/vue-client-only/blob/master/src/index.js\n * @description Fork from: https://github.com/kadirahq/react-no-ssr/blob/master/src/index.js\n * @description Fork from: https://github.com/nuxt/framework/blob/main/packages/nuxt3/src/app/components/client-only.mjs\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineComponent, ref, h, onMounted, Transition, cloneVNode } from 'vue'\nimport { useEnhancer } from '/@/app/enhancer'\n\n/**\n * @description only render on client (browser)\n * @example\n * <client-only placeholder=\"loading...\">\n *    <component />\n * </client-only>\n * @example\n * <client-only :transition=\"true\" :delay=\"668\">\n *    <component />\n * </client-only>\n */\nexport default defineComponent({\n  name: 'ClientOnly',\n  props: {\n    placeholder: String,\n    placeholderTag: {\n      type: String,\n      default: 'div'\n    },\n    transition: {\n      type: Boolean,\n      default: false\n    },\n    delay: {\n      type: Number,\n      default: 0\n    }\n  },\n  setup(props, context) {\n    const { globalState } = useEnhancer()\n    // SSR -> hydrated -> render -> no transition\n    const mounted = ref(globalState.isHydrated.value ? true : false)\n\n    onMounted(() => {\n      // SSR inited -> mounted -> render -> transition\n      if (!globalState.isHydrated.value) {\n        const setRender = () => {\n          mounted.value = true\n        }\n        props.delay ? setTimeout(setRender, props.delay) : setRender()\n      }\n    })\n\n    const renderResult = (result, resultKey?: string) => {\n      if (!props.transition) {\n        return result\n      }\n      if (Array.isArray(result) && result.length > 1) {\n        return result\n      }\n      const singleResult = Array.isArray(result) ? result[0] : result\n      return h(Transition, { name: 'client-only', mode: 'out-in' }, () =>\n        singleResult\n          ? cloneVNode(singleResult, { key: resultKey })\n          : h('div', { key: 'empty', class: 'client-only-empty' })\n      )\n    }\n\n    return () => {\n      if (mounted.value) {\n        return renderResult(context.slots.default?.(), 'result')\n      }\n\n      if (context.slots.placeholder) {\n        return renderResult(context.slots.placeholder(), 'placeholder-slot')\n      }\n\n      if (props.placeholderTag && props.placeholder) {\n        return renderResult(\n          h(props.placeholderTag, { class: 'client-only-placeholder' }, props.placeholder),\n          'placeholder'\n        )\n      }\n\n      return renderResult(null)\n    }\n  }\n})\n","/**\n * @file page container\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineComponent, h } from 'vue'\n\nexport default defineComponent({\n  name: 'Container',\n  props: {\n    tag: {\n      type: String,\n      default: 'div'\n    }\n  },\n  setup(props, context) {\n    return () => {\n      return h(props.tag, [h('div', { class: 'container' }, [context.slots.default?.()])])\n    }\n  }\n})\n","/**\n * @file responsive\n * @description Render children on desktop platform or mobile platform\n * @author Surmon <https://github.com/surmon-china>\n */\n\n/* eslint-disable vue/one-component-per-file */\nimport { defineComponent } from 'vue'\nimport { useGlobalState } from '/@/app/state'\n\n/**\n * @example <responsive desktop><component /></responsive>\n * @example <responsive mobile><component /></responsive>\n * @example <responsive both><component /></responsive>\n * @example\n  <responsive>\n    <template #desktop>Desktop</template>\n    <template #mobile>Mobile</template>\n  </responsive>\n */\nexport const Responsive = defineComponent({\n  name: 'Responsive',\n  props: {\n    both: Boolean,\n    desktop: Boolean,\n    mobile: Boolean\n  },\n  setup(props, context) {\n    const globalState = useGlobalState()\n\n    return () => {\n      // render\n      if (props.both) {\n        return context.slots.default?.()\n      }\n      // desktop\n      if (props.desktop && !globalState.userAgent.isMobile) {\n        return context.slots.default?.()\n      }\n      // mobile\n      if (props.mobile && globalState.userAgent.isMobile) {\n        return context.slots.default?.()\n      }\n\n      // slot mode\n      return globalState.userAgent.isMobile ? context.slots.mobile?.() : context.slots.desktop?.()\n    }\n  }\n})\n\nexport const DesktopOnly = defineComponent({\n  name: 'DesktopOnly',\n  setup(_, context) {\n    const globalState = useGlobalState()\n    return () => !globalState.userAgent.isMobile && context.slots.default?.()\n  }\n})\n","<template>\n  <div class=\"skeleton base\" :style=\"style\"></div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, CSSProperties } from 'vue'\n  export default defineComponent({\n    name: 'SkeletonBase',\n    props: {\n      width: {\n        type: Number\n      },\n      height: {\n        type: Number\n      },\n      circle: {\n        type: Boolean,\n        default: false\n      },\n      radius: {\n        type: Number,\n        default: 2\n      }\n    },\n    setup(props) {\n      const style = computed<CSSProperties>(() => ({\n        borderRadius: props.circle ? '100%' : `${props.radius}px`,\n        ...(props.width && { width: props.width + 'px' }),\n        ...(props.height && { height: props.height + 'px' })\n      }))\n\n      return {\n        style\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  $skeleton-background: $module-bg;\n  $skeleton-spinner: $module-bg-darker-3;\n\n  @keyframes placeHolderShimmer {\n    0% {\n      background-position: -468px 0;\n    }\n    100% {\n      background-position: 350px 50px;\n    }\n  }\n\n  .skeleton.base {\n    width: 100%;\n    height: 100%;\n    animation-duration: 1s;\n    animation-fill-mode: forwards;\n    animation-iteration-count: infinite;\n    animation-name: placeHolderShimmer;\n    animation-timing-function: linear;\n    background-color: $skeleton-spinner;\n    background-image: linear-gradient(\n      to right,\n      $skeleton-background 8%,\n      $skeleton-spinner 18%,\n      $skeleton-background 33%\n    );\n    background-repeat: repeat;\n    background-size: 800px 104px;\n  }\n</style>\n","<template>\n  <div class=\"skeleton line\" :style=\"style\">\n    <skeleton-base />\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, CSSProperties } from 'vue'\n  import SkeletonBase from './base.vue'\n  export default defineComponent({\n    name: 'SkeletonLine',\n    components: {\n      SkeletonBase\n    },\n    props: {\n      width: {\n        type: Number\n      },\n      height: {\n        type: Number\n      }\n    },\n    setup(props) {\n      const style = computed<CSSProperties>(() => ({\n        ...(props.width && { width: props.width + 'px' }),\n        ...(props.height && { height: props.height + 'px' })\n      }))\n      return { style }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  .skeleton.line {\n    width: 100%;\n    height: 100%;\n  }\n</style>\n","<template>\n  <div class=\"skeleton paragraph\" :style=\"style\">\n    <skeleton-line\n      v-for=\"(line, index) in lines\"\n      :key=\"index\"\n      :style=\"getLineStyle(index)\"\n      class=\"paragraph-line\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, CSSProperties } from 'vue'\n  import SkeletonLine from './line.vue'\n  export default defineComponent({\n    name: 'SkeletonParagraph',\n    components: {\n      SkeletonLine\n    },\n    props: {\n      lines: {\n        type: Number,\n        default: 1\n      },\n      width: {\n        type: Number\n      },\n      height: {\n        type: Number\n      },\n      align: {\n        type: Boolean,\n        default: false\n      },\n      lineHeight: {\n        type: String,\n        default: '1rem'\n      }\n    },\n    setup(props) {\n      const style = computed<CSSProperties>(() => ({\n        ...(props.width && { width: props.width + 'px' }),\n        ...(props.height && { height: props.height + 'px' })\n      }))\n\n      const getLineStyle = (index: number) => {\n        const style: CSSProperties = {\n          height: props.lineHeight,\n          marginBottom: index === props.lines - 1 ? '0' : `calc(${props.lineHeight} * 0.75)`\n        }\n        const position = index % 3\n        if (position) {\n          const margin = 15 * position\n          style.width = `${100 - margin}%`\n          style.marginLeft = props.align ? '0' : '6%'\n        }\n        return style\n      }\n\n      return {\n        style,\n        getLineStyle\n      }\n    }\n  })\n</script>\n","/**\n * @file App components\n * @module app.component\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { App } from 'vue'\nimport Webfont from '/@/components/common/webfont.vue'\nimport Spin from '/@/components/common/spin.vue'\nimport Empty from '/@/components/common/empty.vue'\nimport Divider from '/@/components/common/divider.vue'\nimport Udate from '/@/components/common/udate'\nimport Ulink from '/@/components/common/ulink'\nimport Uimage from '/@/components/common/uimage'\nimport Placeholder from '/@/components/common/placeholder'\nimport ClientOnly from '/@/components/common/client-only'\nimport Container from '/@/components/common/container'\nimport { Responsive, DesktopOnly } from '/@/components/common/responsive'\n\nimport SkeletonBase from '/@/components/common/skeleton/base.vue'\nimport SkeletonLine from '/@/components/common/skeleton/line.vue'\nimport SkeletonParagraph from '/@/components/common/skeleton/paragraph.vue'\n\ndeclare module 'vue' {\n  export interface GlobalComponents {\n    Spin: typeof Spin\n    Empty: typeof Empty\n    Webfont: typeof Webfont\n    Divider: typeof Divider\n    Ulink: typeof Ulink\n    ClientOnly: typeof ClientOnly\n    Container: typeof Container\n  }\n}\n\nexport default function (app: App) {\n  app.component(Webfont.name as string, Webfont)\n  app.component(Spin.name as string, Spin)\n  app.component(Empty.name as string, Empty)\n  app.component(Divider.name as string, Divider)\n  app.component(Udate.name, Udate)\n  app.component(Ulink.name, Ulink)\n  app.component(Uimage.name, Uimage)\n  app.component(Placeholder.name, Placeholder)\n\n  app.component(ClientOnly.name, ClientOnly)\n  app.component(Responsive.name, Responsive)\n  app.component(DesktopOnly.name, DesktopOnly)\n  app.component(Container.name, Container)\n\n  app.component(SkeletonBase.name as string, SkeletonBase)\n  app.component(SkeletonLine.name as string, SkeletonLine)\n  app.component(SkeletonParagraph.name as string, SkeletonParagraph)\n}\n","<template>\n  <div id=\"emoji-rain\" :class=\"{ active: state.kichikuing }\">\n    <canvas v-if=\"state.chambering\" ref=\"rainBase\" class=\"rain-base\"></canvas>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, reactive, nextTick, onMounted } from 'vue'\n  import { getTargetCDNURL } from '/@/transforms/url'\n\n  declare global {\n    interface Window {\n      $luanchEmojiRain(options: any): void\n    }\n  }\n\n  export default defineComponent({\n    name: 'EmojiRain',\n    setup() {\n      const rainBase = ref<HTMLElement>(null as any)\n      const state = reactive({\n        chambering: false,\n        kichikuing: false\n      })\n\n      onMounted(() => {\n        window.$luanchEmojiRain = (options) => {\n          if (!state.chambering && !state.kichikuing) {\n            state.chambering = true\n            nextTick(() => {\n              // @ts-ignore\n              rainBase.value.width =\n                document.documentElement.clientWidth || document.body.clientWidth\n              // @ts-ignore\n              rainBase.value.height =\n                document.documentElement.clientHeight || document.body.clientHeight\n              new window.$Emoji233333({\n                base: rainBase.value,\n                scale: 0.7,\n                speed: 12,\n                increaseSpeed: 0.4,\n                density: 5,\n                staggered: true,\n                emoji: getTargetCDNURL('/images/emojis/funny.png'),\n                ...options,\n                onStart() {\n                  state.kichikuing = true\n                },\n                onEnded() {\n                  state.kichikuing = false\n                  state.chambering = false\n                }\n              }).launch()\n            })\n          }\n        }\n      })\n\n      return {\n        state,\n        rainBase\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  #emoji-rain {\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: $z-index-underground;\n\n    &.active {\n      z-index: $z-index-top;\n    }\n\n    .rain-base {\n      width: 100%;\n      height: 100%;\n    }\n  }\n</style>\n","/**\n * @file App layout getter\n * @module transform.layout\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { RouteMeta } from 'vue-router'\nimport { LayoutColumn } from '/@/app/state'\n\nexport const getLayoutByRouteMeta = (routeMeta: RouteMeta) => {\n  return routeMeta.layout === LayoutColumn.Wide\n    ? LayoutColumn.Wide\n    : routeMeta.layout === LayoutColumn.Full\n    ? LayoutColumn.Full\n    : LayoutColumn.Normal\n}\n","<template>\n  <div class=\"error\" :class=\"{ dark: isDarkTheme }\">\n    <h1 class=\"code\">{{ error.code }}</h1>\n    <h3 class=\"message\">\n      <template v-if=\"error.message\">{{ error.message }}</template>\n      <i18n v-else :k=\"LanguageKey.NOT_FOUND\" />\n    </h3>\n    <p class=\"link\" @click=\"handleResolveRoute\">\n      <slot name=\"resolve-text\" />\n    </p>\n    <uimage cdn class=\"logo\" src=\"/images/logo.svg\" />\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, PropType } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { RenderError } from '/@/app/state'\n  import { LanguageKey } from '/@/language'\n\n  export enum ErrorEvent {\n    Resolve = 'resolve'\n  }\n  export default defineComponent({\n    name: 'Error',\n    props: {\n      error: {\n        type: Object as PropType<RenderError>,\n        required: true\n      }\n    },\n    emits: [ErrorEvent.Resolve],\n    setup(props, context) {\n      const { isDarkTheme } = useEnhancer()\n      const handleResolveRoute = () => {\n        context.emit(ErrorEvent.Resolve)\n      }\n\n      return {\n        LanguageKey,\n        isDarkTheme,\n        handleResolveRoute\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .error {\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    position: fixed;\n    overflow: hidden;\n    z-index: $z-index-top;\n    text-align: center;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n    background-color: $module-bg;\n    &.dark {\n      background-color: $module-bg-opaque;\n      .message {\n        color: $text-darker;\n      }\n    }\n\n    @keyframes error-item {\n      0% {\n        opacity: 0;\n        transform: translate3d(0, -30%, 0);\n      }\n      100% {\n        opacity: 1;\n        transform: translate3d(0, 0, 0);\n      }\n    }\n\n    .logo {\n      width: 8rem;\n      opacity: 0.1;\n      position: fixed;\n      bottom: 2rem;\n      filter: $theme-logo-rotate;\n    }\n\n    .code,\n    .link,\n    .message {\n      color: $text-secondary;\n      animation: error-item ease-out both 0.6s $transition-time-normal;\n    }\n\n    @keyframes code-wave {\n      0% {\n        opacity: 0;\n        background-position-y: 5rem;\n      }\n      100% {\n        opacity: 1;\n        background-position-y: 0;\n      }\n    }\n\n    @keyframes code-wave-play {\n      0% {\n        background-position-x: 14%;\n      }\n      100% {\n        background-position-x: 100%;\n      }\n    }\n\n    .code {\n      text-transform: uppercase;\n      font-size: 10em;\n      font-weight: normal;\n      margin: 0;\n      background-image: url('/images/page-error/wave.png');\n      background-size: cover;\n      background-repeat: repeat-x;\n      background-position: center;\n      -webkit-background-clip: text;\n      color: rgba(darken($white, 30%), 20%);\n      animation: error-item ease-out both 0.6s $transition-time-normal,\n        code-wave ease-out both 0.6s $transition-time-normal, code-wave-play linear 2s infinite;\n    }\n\n    .message {\n      font-weight: normal;\n      margin-top: 0;\n      margin-bottom: 2rem;\n    }\n\n    .link {\n      cursor: pointer;\n      margin-bottom: 4rem;\n      @include text-underline(0.5em);\n      @include color-transition();\n      &:hover {\n        color: $text-darker;\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"captured\">\n    <error-component v-if=\"error\" :error=\"error\" @resolve=\"handleResolveRoute\">\n      <template #resolve-text>\n        <i18n :k=\"LanguageKey.BACK_TO_HOME_PAGE\" />\n      </template>\n    </error-component>\n    <template v-else>\n      <slot />\n    </template>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, onErrorCaptured } from 'vue'\n  import { LanguageKey } from '/@/language'\n  import { RouteName } from '/@/app/router'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { getLayoutByRouteMeta } from '/@/transforms/layout'\n  import ErrorComponent from './error.vue'\n\n  export default defineComponent({\n    name: 'Captured',\n    components: {\n      ErrorComponent\n    },\n    setup() {\n      const { router, globalState } = useEnhancer()\n      const handleResolveRoute = () => {\n        router.push({ name: RouteName.Home }).then(() => {\n          // MARK: 顺序很重要！要先设置布局，再渲染，避免闪屏\n          globalState.setLayoutColumn(getLayoutByRouteMeta(router.currentRoute.value.meta))\n          globalState.setRenderError(null)\n        })\n      }\n\n      onErrorCaptured((_error: any) => {\n        globalState.setRenderError(_error)\n        return false\n      })\n\n      return {\n        error: globalState.renderError,\n        handleResolveRoute,\n        LanguageKey\n      }\n    }\n  })\n</script>\n","/**\n * @file Music player\n * @module composable.music\n * @author Surmon <https://github.com/surmon-china>\n * @document https://521dimensions.com/open-source/amplitudejs/docs\n */\n\nimport { App, Plugin, inject, readonly, reactive, computed } from 'vue'\nimport type { Song } from '/@/server/getters/netease-music'\nimport { UNDEFINED } from '/@/constants/value'\nimport { TunnelModule } from '/@/constants/tunnel'\nimport { ProxyModule } from '/@/constants/proxy'\nimport { getTargetProxyURL } from '/@/transforms/url'\nimport tunnel from '/@/services/tunnel'\n\nexport interface PlayerConfig {\n  amplitude: any\n  volume?: number\n  autoInit?: boolean\n}\n\nconst createMusicPlayer = (config: PlayerConfig) => {\n  const { amplitude } = config\n\n  // player state\n  const initVolume = config.volume ?? 40\n  const state = reactive({\n    fetching: false, // data fetching\n    songs: [] as Array<Song>,\n    inited: false,\n    ready: false, // player ready\n    index: 0, // current playing song index\n    count: 0, // total song count\n    volume: initVolume,\n    wave: false,\n    playing: false,\n    speeds: 0,\n    progress: 0\n  })\n\n  // mute state\n  const muted = computed<boolean>(() => state.volume === 0)\n\n  // playable song list\n  const playableSongList = computed<Song[]>(() => {\n    return state.songs.map((song) => ({\n      ...song,\n      cover_art_url: song.cover_art_url\n        ? getTargetProxyURL(song.cover_art_url + '?param=300y300', ProxyModule.NetEaseMusic)\n        : (null as any as string)\n    }))\n  })\n\n  const fetchSongList = async () => {\n    try {\n      state.fetching = true\n      state.songs = await tunnel.dispatch<Song[]>(TunnelModule.NetEaseMusic)\n      state.count = state.songs.length\n    } catch (error) {\n      state.songs = []\n      state.count = 0\n      throw error\n    } finally {\n      state.fetching = false\n    }\n  }\n\n  const currentSong = computed<Song | void>(() => {\n    if (state.inited && state.index !== undefined) {\n      return amplitude.getActiveSongMetadata()\n    } else {\n      return UNDEFINED\n    }\n  })\n\n  const play = (index?: number) => {\n    if (index != null) {\n      amplitude.playSongAtIndex(index)\n    } else {\n      amplitude.play()\n    }\n  }\n  const pause = () => amplitude.pause()\n  const prevSong = () => amplitude.prev()\n  const nextSong = () => amplitude.next()\n  const changeVolume = (volume: number) => amplitude.setVolume(volume)\n  const toggleMuted = () => changeVolume(muted.value ? initVolume : 0)\n  const togglePlay = () => (amplitude.getPlayerState() === 'playing' ? pause() : play())\n\n  const initPlayer = (songs: Song[]) => {\n    amplitude.init({\n      // 歌曲切换之间的延时\n      // https://521dimensions.com/open-source/amplitudejs/docs/configuration/delay.html#public-function\n      delay: 668,\n      debug: false,\n      volume: state.volume,\n      songs,\n      start_song: 0,\n      autoplay: false,\n      continue_next: true,\n      callbacks: {\n        initialized: () => {\n          state.ready = true\n          state.inited = true\n        },\n        play: () => {\n          state.ready = true\n          state.wave = true\n          state.playing = true\n        },\n        pause: () => {\n          state.wave = false\n          state.playing = false\n        },\n        stop: () => {\n          state.wave = false\n          state.playing = false\n        },\n        volumechange: () => {\n          state.volume = amplitude.getVolume()\n        },\n        timeupdate: () => {\n          state.speeds = amplitude.getSongPlayedSeconds()\n          state.progress = amplitude.getSongPlayedPercentage()\n        },\n        song_change: () => {\n          state.index = amplitude.getActiveIndex()\n        },\n        ended: () => {\n          state.playing = false\n        },\n        error: (error: any) => {\n          console.warn('[player] error! auto next song:', state.index, error)\n          state.playing = false\n          // 播放异常时不再清除音乐，不作 URL 可能不可用的假设\n          // amplitude.removeSong(state.index)\n          // MARK: 网络阻塞会导致紧邻的后续请求中断，所以下一首操作需要延时，避免瀑布式请求\n          window.setTimeout(nextSong, 1668)\n        }\n      }\n    })\n    amplitude.setRepeat(true)\n  }\n\n  const init = () => {\n    return fetchSongList()\n      .then(() => {\n        if (playableSongList.value.length) {\n          initPlayer(playableSongList.value)\n        } else {\n          console.warn('[player] init failed! empty song list.')\n        }\n      })\n      .catch((error) => {\n        console.warn('[player] init failed! fetch error:', error)\n      })\n  }\n\n  return {\n    state: readonly(state),\n    muted,\n    currentSong,\n\n    init,\n    play,\n    pause,\n    changeVolume,\n    toggleMuted,\n    togglePlay,\n    prevSong,\n    nextSong\n  }\n}\n\nconst MusicPlayerSymbol = Symbol('music-player')\nexport type Music = ReturnType<typeof createMusicPlayer>\nexport const createMusic = (config: PlayerConfig): Music & Plugin => {\n  const musicPlayer = createMusicPlayer(config)\n  if (config.autoInit) {\n    musicPlayer.init()\n  }\n\n  return {\n    ...musicPlayer,\n    install(app: App) {\n      app.provide(MusicPlayerSymbol, musicPlayer)\n    }\n  }\n}\n\nexport const useMusic = (): Music => {\n  return inject(MusicPlayerSymbol) as Music\n}\n","<template>\n  <div class=\"music-player\">\n    <div class=\"panel\">\n      <div class=\"song\">\n        <img class=\"cover\" :src=\"currentSong?.cover_art_url\" draggable=\"false\" />\n        <div class=\"info\" v-if=\"currentSong && player\">\n          <p class=\"title\">\n            <span class=\"name\">{{ currentSong.name }}</span>\n            <span class=\"artist\">{{ currentSong.artist }}</span>\n          </p>\n          <p class=\"duration\">\n            <span>{{ getSecondsView(player.state.speeds) }}</span>\n            <span> / </span>\n            <span>{{ getSecondsView(currentSong.duration / 1000) }}</span>\n          </p>\n        </div>\n      </div>\n      <div class=\"control\">\n        <button class=\"cut-song prev\" :disabled=\"!player?.state?.ready\" @click=\"player?.prevSong()\">\n          <i class=\"iconfont icon-music-prev\"></i>\n        </button>\n        <button class=\"toggle-play\" :disabled=\"!player?.state.ready\" @click=\"player?.togglePlay()\">\n          <i\n            class=\"iconfont\"\n            :class=\"player?.state.playing ? 'icon-music-pause' : 'icon-music-play'\"\n          ></i>\n        </button>\n        <button class=\"cut-song next\" :disabled=\"!player?.state.ready\" @click=\"player?.nextSong()\">\n          <i class=\"iconfont icon-music-next\"></i>\n        </button>\n      </div>\n      <div class=\"tools\">\n        <span class=\"indexed\" v-if=\"player\">\n          {{ player.state.index + 1 }} / {{ player?.state.count }}\n        </span>\n        <ulink class=\"list-link\" :href=\"VALUABLE_LINKS.MUSIC_163\">\n          <i class=\"iconfont icon-new-window-s\"></i>\n        </ulink>\n        <button\n          class=\"toggle-muted\"\n          :disabled=\"!player?.state.ready\"\n          @click=\"player?.toggleMuted()\"\n        >\n          <i class=\"iconfont\" :class=\"muted ? 'icon-music-muted' : 'icon-music-unmuted'\" />\n        </button>\n      </div>\n    </div>\n    <div class=\"progress\">\n      <div class=\"played\" :style=\"{ width: `${player.state.progress}%` }\" v-if=\"player\"></div>\n    </div>\n    <div class=\"songs\">\n      <ul class=\"list\">\n        <li\n          class=\"item\"\n          :class=\"{ playing: player?.state.index === index }\"\n          :key=\"index\"\n          v-for=\"(song, index) in player?.state.songs\"\n        >\n          <div class=\"index\">{{ String(index + 1).padStart(2, '0') }}</div>\n          <span v-if=\"player?.state.index === index\" class=\"play\">\n            <i class=\"iconfont icon-music-unmuted\"></i>\n          </span>\n          <button v-else class=\"play\" @click=\"handlePlayByIndex(index)\">\n            <i class=\"iconfont icon-music-play\"></i>\n          </button>\n          <ulink class=\"name\" :title=\"song.name\" :href=\"get163MusicSongDetailURL(song.id)\">\n            <span class=\"text\">{{ song.name }}</span>\n            <i class=\"iconfont icon-new-window-s\"></i>\n          </ulink>\n          <div class=\"artist\" :title=\"song.artist\">{{ song.artist }}</div>\n          <div class=\"duration\">{{ getSecondsView(song.duration / 1000) }}</div>\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed } from 'vue'\n  import { useMusic } from '/@/composables/music'\n  import { get163MusicSongDetailURL } from '/@/transforms/media'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n  import { isClient } from '/@/app/environment'\n\n  export default defineComponent({\n    name: 'MusicPlayer',\n    setup() {\n      const musicPlayer = isClient ? useMusic() : null\n      const muted = computed(() => Boolean(musicPlayer?.muted.value))\n      const currentSong = computed(() => musicPlayer?.currentSong.value)\n      const handlePlayByIndex = (index: number) => musicPlayer?.play(index)\n      const getSecondsView = (seconds: number) => {\n        const minutesText = String(Math.floor(seconds / 60)).padStart(2, '0')\n        const secondsText = String(Math.floor(seconds % 60)).padStart(2, '0')\n        return `${minutesText}:${secondsText}`\n      }\n\n      return {\n        VALUABLE_LINKS,\n        player: musicPlayer,\n        muted,\n        currentSong,\n        handlePlayByIndex,\n        get163MusicSongDetailURL,\n        getSecondsView\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .music-player {\n    position: relative;\n    overflow: auto;\n    width: 50vw;\n    height: 70vh;\n    display: flex;\n    flex-direction: column;\n\n    .panel {\n      width: 100%;\n      display: grid;\n      grid-template-columns: 35% 30% 35%;\n      background-color: $module-bg-lighter;\n\n      .song {\n        padding: $gap;\n        overflow: hidden;\n        display: flex;\n\n        .cover {\n          $size: 4rem;\n          width: $size;\n          height: $size;\n          border-radius: $sm-radius;\n          margin-right: $gap;\n          background-color: $module-bg-darker-1;\n        }\n\n        .info {\n          font-weight: bold;\n\n          .title {\n            display: flex;\n            align-items: baseline;\n            margin-bottom: $xs-gap;\n            white-space: nowrap;\n\n            .name,\n            .artist {\n              display: inline-block;\n              @include text-overflow();\n            }\n\n            .name {\n              margin-top: 1px;\n              max-width: 8rem;\n              font-size: $font-size-h4;\n            }\n\n            .artist {\n              max-width: 7rem;\n              margin-left: $xs-gap;\n              color: $text-disabled;\n            }\n          }\n\n          .duration {\n            margin: 0;\n            color: $text-disabled;\n          }\n        }\n      }\n\n      .control {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n\n        .toggle-play {\n          margin: 0 $lg-gap;\n          font-size: $font-size-h1 * 1.2;\n          transition: all $transition-time-fast;\n          &:hover {\n            color: $link-color;\n          }\n        }\n\n        .cut-song {\n          width: 3rem;\n          font-size: $font-size-h3;\n          color: $text-disabled;\n          &:hover {\n            color: $text;\n          }\n        }\n      }\n\n      .tools {\n        display: flex;\n        justify-content: flex-end;\n        align-items: center;\n        padding: $lg-gap;\n        font-size: $font-size-h4;\n\n        .list-link,\n        .toggle-muted {\n          margin-left: $lg-gap;\n          color: $text-disabled;\n          &:hover {\n            color: $text;\n          }\n        }\n\n        .indexed {\n          display: block;\n          padding: $xs-gap $sm-gap;\n          border-radius: $xs-radius;\n          font-size: $font-size-small;\n          font-weight: bold;\n          color: $text-disabled;\n          background-color: $module-bg-darker-1;\n        }\n      }\n    }\n\n    .progress {\n      position: relative;\n      width: 100%;\n      height: $sm-gap;\n      box-sizing: content-box;\n      background-color: $module-bg-darker-1;\n\n      .played {\n        position: absolute;\n        height: 100%;\n        top: 0;\n        left: 0;\n        background-color: $module-bg-darker-3;\n        transition: width $transition-time-fast;\n        will-change: width;\n      }\n    }\n\n    .songs {\n      flex: 1;\n      overflow-y: scroll;\n      @include scroll-snap-y();\n\n      .list {\n        width: 100%;\n        margin: 0;\n        padding: 0;\n\n        .item {\n          display: grid;\n          grid-template-columns: 5% 5% 60% 20% 10%;\n          width: 100%;\n          height: 3rem;\n          line-height: 3rem;\n          @include scroll-snap-item();\n          &.playing,\n          &:hover {\n            background-color: $module-bg-lighter;\n          }\n          &.playing {\n            .play {\n              color: $link-color;\n            }\n          }\n\n          .index {\n            padding-left: 1em;\n            font-weight: bold;\n            color: $text-disabled;\n          }\n\n          .play {\n            text-align: center;\n            color: $text-disabled;\n            &:hover {\n              color: $text;\n            }\n          }\n\n          .name .text,\n          .artist {\n            max-width: 80%;\n            @include text-overflow();\n          }\n\n          .name {\n            display: flex;\n            align-items: baseline;\n            &:hover {\n              .text {\n                text-decoration: underline;\n                color: $link-color;\n              }\n              .iconfont {\n                color: $text;\n              }\n            }\n\n            .text {\n              display: inline-block;\n              font-weight: bold;\n              color: $text;\n            }\n            .iconfont {\n              margin-left: $xs-gap;\n              font-size: $font-size-small;\n              color: $text-disabled;\n            }\n          }\n\n          .artist {\n            color: $text-secondary;\n          }\n\n          .duration {\n            text-align: center;\n            color: $text-divider;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div id=\"player\" :class=\"{ playing: music.state.playing }\" v-if=\"music?.currentSong.value\">\n    <div class=\"panel\">\n      <div class=\"control\">\n        <button\n          class=\"prev-song button\"\n          :disabled=\"!music.state.ready\"\n          @click=\"music.prevSong\"\n          @mousedown=\"handleTouchEvent('prev song')\"\n        >\n          <i class=\"iconfont icon-music-prev\"></i>\n        </button>\n        <button\n          class=\"next-song button\"\n          :disabled=\"!music.state.ready\"\n          @click=\"music.nextSong\"\n          @mousedown=\"handleTouchEvent('next song')\"\n        >\n          <i class=\"iconfont icon-music-next\"></i>\n        </button>\n        <button\n          class=\"muted-toggle button\"\n          :disabled=\"!music.state.ready\"\n          @click=\"music.toggleMuted\"\n          @mousedown=\"handleTouchEvent('toggle muted')\"\n        >\n          <i class=\"iconfont\" :class=\"muted ? 'icon-music-muted' : 'icon-music-unmuted'\"></i>\n        </button>\n        <button\n          class=\"player button\"\n          @click=\"togglePlayerModel\"\n          @mousedown=\"handleTouchEvent('open player model')\"\n        >\n          <i class=\"iconfont icon-netease-music\"></i>\n        </button>\n      </div>\n      <button\n        class=\"song-link\"\n        @click=\"togglePlayerModel\"\n        @mousedown=\"handleTouchEvent('open player model')\"\n      >\n        <span v-if=\"currentSong\">{{ currentSong.name }}</span>\n        <i18n v-else :k=\"LanguageKey.MUSIC_PLACEHOLDER\" />\n      </button>\n    </div>\n    <div class=\"cd\">\n      <img class=\"image\" :src=\"currentSong?.cover_art_url\" />\n      <button\n        class=\"toggle-button\"\n        :disabled=\"!music.state.ready\"\n        @click=\"music.togglePlay\"\n        @mousedown=\"handleTouchEvent('toggle play')\"\n      >\n        <i\n          class=\"iconfont\"\n          :class=\"music.state.playing ? 'icon-music-pause' : 'icon-music-play'\"\n        ></i>\n      </button>\n    </div>\n    <div class=\"trigger\">\n      <i class=\"iconfont icon-music\"></i>\n    </div>\n  </div>\n  <client-only>\n    <popup v-model:visible=\"isOnPlayerModel\" :scroll-close=\"false\">\n      <music-player @close=\"togglePlayerModel\" />\n    </popup>\n  </client-only>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, computed } from 'vue'\n  import { LanguageKey } from '/@/language'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useMusic } from '/@/composables/music'\n  import { isClient } from '/@/app/environment'\n  import MusicPlayer from './player.vue'\n\n  export default defineComponent({\n    name: 'MusicPlayerHandle',\n    components: {\n      MusicPlayer\n    },\n    setup() {\n      const { gtag } = useEnhancer()\n      const music = isClient ? useMusic() : null\n      const muted = computed(() => Boolean(music?.muted.value))\n      const currentSong = computed(() => music?.currentSong.value)\n\n      const isOnPlayerModel = ref(false)\n      const togglePlayerModel = () => {\n        isOnPlayerModel.value = !isOnPlayerModel.value\n      }\n\n      const handleTouchEvent = (label) => {\n        gtag?.event('music_player_widget', {\n          event_category: GAEventCategories.Widget,\n          event_label: label\n        })\n      }\n\n      return {\n        LanguageKey,\n        isOnPlayerModel,\n        music,\n        muted,\n        currentSong,\n        togglePlayerModel,\n        handleTouchEvent\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @use 'sass:math';\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  #player {\n    $size: 5rem;\n    $panel-size: 13rem;\n    position: fixed;\n    left: 0;\n    bottom: 18%;\n    z-index: $z-index-toolbox;\n    transition: opacity $transition-time-fast,\n      transform $transition-time-normal cubic-bezier(0.65, 0.05, 0.36, 1);\n    height: $size;\n    transform: translateX(-18rem);\n    display: flex;\n    align-items: center;\n    border-top-right-radius: $sm-radius;\n    border-bottom-right-radius: $sm-radius;\n    background-color: $module-bg-opaque;\n    overflow: hidden;\n    opacity: 0.5;\n    &.playing {\n      transform: translateX(-$panel-size);\n    }\n    &:hover {\n      opacity: 0.9;\n      transform: translateX(0);\n    }\n\n    .panel {\n      width: $panel-size;\n      padding: $gap;\n\n      .control {\n        display: flex;\n        justify-content: flex-start;\n        margin-bottom: $xs-gap;\n\n        > .button {\n          margin-right: $lg-gap;\n          &:hover {\n            color: $link-hover;\n          }\n          &.player {\n            color: $music163-primary;\n          }\n        }\n      }\n\n      .song-link {\n        max-width: 11rem;\n        color: $text-secondary;\n        @include color-transition();\n        @include text-overflow();\n\n        &:hover {\n          color: $link-hover;\n        }\n      }\n    }\n\n    .cd {\n      position: relative;\n      display: block;\n      width: $size;\n      height: $size;\n      overflow: hidden;\n      background-color: $module-bg-darker-1;\n\n      .image {\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n        background-color: $module-bg-darker-1;\n        background-image: url('/images/page-music/background.jpg');\n        background-size: cover;\n      }\n\n      .toggle-button {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        border-radius: 100%;\n        font-size: $font-size-h1;\n        color: $white;\n      }\n    }\n\n    .trigger {\n      width: math.div($size, 2);\n      height: $size;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      writing-mode: tb-rl;\n      color: $white;\n      background-image: linear-gradient(0deg, #ff5a4c 0%, #ff1d12 100%);\n\n      .iconfont {\n        font-size: $font-size-h4;\n      }\n    }\n  }\n</style>\n","<template>\n  <li class=\"flower-item\" :style=\"styles\" :class=\"{ playing: state.playing }\">\n    <webfont bolder>{{ options.text }}</webfont>\n  </li>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, reactive, nextTick, onMounted, onBeforeUnmount } from 'vue'\n\n  enum Event {\n    Ended = 'ended'\n  }\n\n  export default defineComponent({\n    name: 'WallFlowerItem',\n    props: {\n      options: {\n        type: Object,\n        required: true\n      },\n      zIndex: {\n        type: Number,\n        required: true\n      }\n    },\n    emits: [Event.Ended],\n    setup(props, context) {\n      const state = reactive({\n        delay: 1,\n        timer: null as number | null,\n        playing: false\n      })\n\n      const styles = computed(() => ({\n        top: props.options.y + 'px',\n        left: props.options.x + 'px',\n        'z-index': 99999 + props.zIndex\n      }))\n\n      const startAnimation = () => {\n        nextTick(() => {\n          // start animation\n          setTimeout(() => {\n            state.playing = true\n          })\n\n          // End animation\n          state.timer = window.setTimeout(() => {\n            state.playing = false\n            nextTick(() => {\n              context.emit(Event.Ended, props.options.id)\n            })\n          }, state.delay * 1000)\n        })\n      }\n\n      startAnimation()\n      onMounted(startAnimation)\n      onBeforeUnmount(() => {\n        if (state.timer) {\n          clearTimeout(state.timer)\n          state.timer = null\n        }\n      })\n\n      return { state, styles }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .flower-item {\n    opacity: 1;\n    position: fixed;\n    display: block;\n    transform: translate3d(-50%, -50%, 0);\n    transition: opacity 0.5s;\n    color: $primary;\n    font-size: $font-size-h3;\n    white-space: nowrap;\n\n    @keyframes flower-playing {\n      0% {\n        transform: translate3d(-50%, -50%, 0);\n      }\n      80% {\n        transform: translate3d(-50%, -400%, 0);\n        opacity: 0.6;\n      }\n      100% {\n        transform: translate3d(-50%, -500%, 0);\n        opacity: 0;\n      }\n    }\n\n    &.playing {\n      opacity: 0.8;\n      animation: flower-playing 1s ease 0s forwards;\n    }\n  }\n</style>\n","<template>\n  <div id=\"wallflower\">\n    <ul v-if=\"state.flowers.length\" class=\"garden-box\">\n      <flower\n        v-for=\"(flower, index) in state.flowers\"\n        :key=\"flower.id\"\n        :z-index=\"index + 1\"\n        :options=\"flower\"\n        @ended=\"handleAnimationEnd\"\n      />\n    </ul>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, reactive, onMounted, onBeforeUnmount } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import Flower from './flower.vue'\n\n  const EN_FLOWERS = ['💙', '🤍', '❤️']\n  const ZH_FLOWERS = [\n    '富强',\n    '民主',\n    '文明',\n    '和谐',\n    '自由',\n    '平等',\n    '公正',\n    '法治',\n    '爱国',\n    '敬业',\n    '诚信',\n    '友善'\n  ]\n\n  export interface IFlower {\n    id: number\n    x: number\n    y: number\n    text: string\n  }\n\n  export default defineComponent({\n    name: 'WallFlowerGarden',\n    components: {\n      Flower\n    },\n    setup() {\n      const { isZhLang } = useEnhancer()\n      const state = reactive({\n        id: 0,\n        flowers: [] as IFlower[],\n        contentIndex: -1\n      })\n\n      const handleClick = (event: MouseEvent) => {\n        const flowers = isZhLang.value ? ZH_FLOWERS : EN_FLOWERS\n        state.contentIndex++\n        if (state.contentIndex >= flowers.length) {\n          state.contentIndex = 0\n        }\n        state.flowers.push({\n          id: ++state.id,\n          x: event.x || event.clientX,\n          y: event.y || event.clientY,\n          text: flowers[state.contentIndex]\n        } as IFlower)\n      }\n\n      const handleAnimationEnd = (id: number) => {\n        const targetIndex = state.flowers.findIndex((flower) => flower.id === id)\n        if (targetIndex > -1) {\n          state.flowers.splice(targetIndex, 1)\n        }\n      }\n\n      onMounted(() => window.addEventListener('click', handleClick))\n      onBeforeUnmount(() => window.removeEventListener('click', handleClick))\n\n      return {\n        state,\n        handleAnimationEnd\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  #wallflower {\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    padding: 0;\n    list-style: none;\n    z-index: $z-index-underground;\n\n    .garden-box {\n      width: 100%;\n      height: 100%;\n      padding: 0;\n    }\n  }\n</style>\n","<template>\n  <div class=\"wall\">\n    <transition name=\"module\" mode=\"out-in\">\n      <div\n        ref=\"picture-box\"\n        :key=\"currentWallpaper.humanizedImageUrl\"\n        class=\"picture-box\"\n        :title=\"currentWallpaper.copyright\"\n        :style=\"{\n          backgroundImage: `url(${currentWallpaper.humanizedImageUrl})`\n        }\"\n      />\n    </transition>\n    <div class=\"story-box\">\n      <template v-if=\"currentWallpaper.title\">\n        <h2 class=\"title\">{{ currentWallpaper.title }}</h2>\n        <p class=\"sub-title\">{{ currentWallpaper.copyright }}</p>\n      </template>\n      <template v-else>\n        <h2 class=\"title lonely\">{{ currentWallpaper.copyright }}</h2>\n      </template>\n      <p class=\"desc\">{{ currentWallpaper.desc }}</p>\n      <div class=\"tools\">\n        <ulink\n          class=\"button\"\n          :href=\"currentWallpaper.humanizedCopyrightUrl\"\n          :title=\"currentWallpaper.bsTitle\"\n        >\n          <i class=\"iconfont icon-bing\"></i>\n        </ulink>\n        <button class=\"button\" title=\"Prev\" :disabled=\"index <= 0\" @click=\"index--\">\n          <i class=\"iconfont icon-prev\"></i>\n        </button>\n        <button\n          class=\"button\"\n          title=\"Next\"\n          :disabled=\"index >= wallpapers.length - 1\"\n          @click=\"index++\"\n        >\n          <i class=\"iconfont icon-next\"></i>\n        </button>\n        <button class=\"button\" title=\"Close\" @click=\"handleClose\">\n          <i class=\"iconfont icon-cancel\"></i>\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, computed } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useWallpaperStore } from '/@/stores/wallpaper'\n  import { Language } from '/@/language'\n\n  export enum WallpaperWallEvent {\n    Close = 'close'\n  }\n\n  export default defineComponent({\n    name: 'WallpaperWall',\n    emits: [WallpaperWallEvent.Close],\n    setup(_, context) {\n      const { i18n } = useEnhancer()\n      const wallpaperStore = useWallpaperStore()\n      const wallpapers = computed(() => wallpaperStore.papers(i18n.language.value as Language)!)\n      const index = ref(0)\n      const currentWallpaper = computed(\n        () => wallpapers.value?.length && wallpapers.value?.[index.value]\n      )\n\n      const handleClose = () => context.emit(WallpaperWallEvent.Close)\n\n      return {\n        index,\n        wallpapers,\n        currentWallpaper,\n        handleClose\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .wall {\n    position: relative;\n    overflow: auto;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    align-items: center;\n    width: 88vw;\n    height: 88vh;\n\n    .picture-box {\n      width: 100%;\n      height: 100%;\n      overflow: hidden;\n      background-repeat: no-repeat;\n      background-size: cover;\n    }\n\n    .story-box {\n      position: absolute;\n      padding: 2rem 4rem;\n      background-color: $module-bg-translucent;\n      bottom: 0;\n      width: 100%;\n      height: auto;\n\n      .title,\n      .sub-title,\n      .desc {\n        @include title-shadow();\n      }\n\n      .title {\n        margin-top: 0;\n        &.lonely {\n          margin-bottom: 3rem;\n        }\n      }\n\n      .desc {\n        line-height: 2rem;\n        margin-bottom: $gap * 2;\n      }\n\n      .tools {\n        display: flex;\n        $size: 3rem;\n\n        .button {\n          display: block;\n          width: $size;\n          height: $size;\n          line-height: $size;\n          margin-right: $gap;\n          text-align: center;\n          background-color: $module-bg;\n          @include radius-box($xs-radius);\n\n          &[disabled] {\n            opacity: 0.6;\n          }\n\n          &:not([disabled]) {\n            &:hover {\n              background-color: $module-bg-darker-1;\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div id=\"wallpaper\">\n    <div class=\"switcher\" :class=\"{ dark: isDarkTheme }\" @click=\"handleOpenWallpaper\">\n      <div class=\"title\">\n        <i class=\"iconfont icon-bing\" />\n        <span class=\"text\">BING</span>\n      </div>\n    </div>\n  </div>\n  <client-only>\n    <popup v-model:visible=\"isOnWallpaper\" :mask-close=\"false\" :scroll-close=\"false\">\n      <wallpapers @close=\"handleCloseWallpaper\" />\n    </popup>\n  </client-only>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, computed } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useWallpaperStore } from '/@/stores/wallpaper'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { Language } from '/@/language'\n  import Wallpapers from './wall.vue'\n\n  export default defineComponent({\n    name: 'Wallpaper',\n    components: {\n      Wallpapers\n    },\n    setup() {\n      const { i18n, gtag, isDarkTheme } = useEnhancer()\n      const wallpaperStore = useWallpaperStore()\n      const wallpapers = computed(() => wallpaperStore.papers(i18n.language.value as Language))\n\n      const isOnWallpaper = ref(false)\n      const handleCloseWallpaper = () => {\n        isOnWallpaper.value = false\n      }\n      const handleOpenWallpaper = () => {\n        gtag?.event('wallpaper_modal', {\n          event_category: GAEventCategories.Widget\n        })\n\n        if (wallpapers.value?.length) {\n          isOnWallpaper.value = true\n        } else {\n          alert('Something went wrong！')\n        }\n      }\n\n      return {\n        isDarkTheme,\n        isOnWallpaper,\n        handleOpenWallpaper,\n        handleCloseWallpaper\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  #wallpaper {\n    $width: 2rem;\n    $height: 6.6rem;\n    position: fixed;\n    top: 18%;\n    right: 0;\n    cursor: pointer;\n\n    .switcher {\n      position: relative;\n      width: $width;\n      height: $height;\n      display: block;\n      border-style: solid;\n      border-color: $bing-primary;\n      border-top-width: 4px;\n      border-top-left-radius: $xs-radius;\n      border-bottom-left-radius: $xs-radius;\n      opacity: 0.5;\n      transition: opacity $transition-time-fast;\n      background-color: #ffffff;\n      &.dark {\n        background-color: #ececec;\n      }\n      &:hover {\n        opacity: 0.8;\n      }\n\n      .title {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        width: 100%;\n        height: 100%;\n        writing-mode: tb-rl;\n        color: $bing-primary;\n        font-size: $font-size-small - 1;\n        letter-spacing: 2px;\n        text-align: center;\n        transition: width $transition-time-fast;\n\n        .iconfont {\n          font-size: 16px;\n          margin-bottom: $xs-gap;\n        }\n\n        .text {\n          font-weight: bold;\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div id=\"background\">\n    <div class=\"image\" :class=\"{ dark: isDarkTheme }\"></div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  export default defineComponent({\n    name: 'Background',\n    setup() {\n      const { isDarkTheme } = useEnhancer()\n      return { isDarkTheme }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  #background {\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    z-index: $z-index-underground;\n    background-color: $body-bg;\n\n    .image {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      opacity: 0.3;\n      background: url('/images/background.png');\n\n      &.dark {\n        opacity: 0.2;\n      }\n    }\n  }\n</style>\n","<template>\n  <div id=\"toolbox\">\n    <div class=\"container\">\n      <div class=\"tools\">\n        <ulink class=\"rss\" :href=\"VALUABLE_LINKS.RSS\" @mousedown=\"handleRSS\">\n          <i class=\"iconfont icon-rss\" />\n        </ulink>\n        <button class=\"feedback\" :title=\"t(LanguageKey.FEEDBACK)\" @click=\"handleFeedback\">\n          <i class=\"iconfont icon-mail-plane\" />\n        </button>\n        <button\n          class=\"to-page-top\"\n          :title=\"t(LanguageKey.TO_TOP)\"\n          @click=\"scrollToPageTop\"\n          @mouseover=\"setTopButtonState(true, true)\"\n          @mouseleave=\"setTopButtonState(false)\"\n        >\n          <i class=\"iconfont icon-totop\" />\n        </button>\n        <button\n          class=\"to-page-bottom\"\n          :title=\"t(LanguageKey.TO_BOTTOM)\"\n          @click=\"scrollToNextScreen\"\n          @mouseover=\"setBottomButtonState(true, true)\"\n          @mouseleave=\"setBottomButtonState(false)\"\n        >\n          <i class=\"iconfont icon-tobottom\" />\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { LanguageKey } from '/@/language'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { scrollToPageTop, scrollToNextScreen } from '/@/utils/scroller'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n\n  export default defineComponent({\n    name: 'Toolbox',\n    setup() {\n      const { i18n, gtag, globalState } = useEnhancer()\n\n      const animationFrameID = ref(0)\n      const isTopButtonMouseOver = ref(false)\n      const isBottomButtonMouseOver = ref(false)\n\n      const handleRSS = () => {\n        gtag?.event('rss', {\n          event_category: GAEventCategories.Widget\n        })\n      }\n\n      const handleFeedback = () => {\n        gtag?.event('feedback_modal', {\n          event_category: GAEventCategories.Widget\n        })\n        globalState.toggleSwitcher('feedback', true)\n      }\n\n      const slowMoveToAnyWhere = () => {\n        const step = () => {\n          let targetScrollY = window.scrollY\n          const currentScrollY = document.body.scrollHeight - window.innerHeight\n          if (isBottomButtonMouseOver.value) {\n            targetScrollY += 1\n          }\n          if (isTopButtonMouseOver.value) {\n            targetScrollY -= 1\n          }\n          if (targetScrollY < 0) {\n            targetScrollY = 0\n          } else if (targetScrollY >= currentScrollY) {\n            targetScrollY = currentScrollY\n          }\n          const canScrollTo = targetScrollY > 0 && targetScrollY < currentScrollY\n          if (!canScrollTo) {\n            return false\n          }\n          window.scrollTo(0, targetScrollY)\n          if (isBottomButtonMouseOver.value || isTopButtonMouseOver.value) {\n            animationFrameID.value = window.requestAnimationFrame(step)\n          } else {\n            window.cancelAnimationFrame(animationFrameID.value)\n            return false\n          }\n        }\n        animationFrameID.value = window.requestAnimationFrame(step)\n      }\n\n      return {\n        VALUABLE_LINKS,\n        LanguageKey,\n        t: i18n.translate,\n        scrollToPageTop,\n        scrollToNextScreen,\n        handleFeedback,\n        handleRSS,\n        setTopButtonState(state: boolean, isStartSlow = false) {\n          isTopButtonMouseOver.value = state\n          window.cancelAnimationFrame(animationFrameID.value)\n          isStartSlow && slowMoveToAnyWhere()\n        },\n        setBottomButtonState(state: boolean, isStartSlow = false) {\n          isBottomButtonMouseOver.value = state\n          window.cancelAnimationFrame(animationFrameID.value)\n          isStartSlow && slowMoveToAnyWhere()\n        }\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  #toolbox {\n    position: fixed;\n    z-index: $z-index-toolbox;\n    width: 100%;\n    bottom: 28rem;\n\n    .container {\n      $size: $lg-gap * 2.8;\n      position: relative;\n\n      .tools {\n        position: absolute;\n        right: -12rem;\n        width: $size;\n        overflow: hidden;\n\n        &:first-child {\n          border-top-left-radius: $xs-radius;\n          border-top-right-radius: $xs-radius;\n        }\n        &:last-child {\n          border-bottom-left-radius: $xs-radius;\n          border-bottom-right-radius: $xs-radius;\n        }\n\n        .rss,\n        .to-page-top,\n        .to-page-bottom,\n        .feedback {\n          display: block;\n          width: $size;\n          height: $size;\n          line-height: $size;\n          text-align: center;\n          @include common-bg-module($transition-time-fast);\n        }\n\n        .rss {\n          color: $rss-primary;\n          &:hover {\n            background-color: $rss-primary;\n            color: $white;\n          }\n        }\n\n        @keyframes feedback-button {\n          0% {\n            background-position: 92% 0%;\n          }\n          50% {\n            background-position: 9% 100%;\n          }\n          100% {\n            background-position: 92% 0%;\n          }\n        }\n\n        .feedback {\n          color: $white;\n          opacity: 0.8;\n          background-color: $primary-lighter;\n          background: linear-gradient(1deg, $surmon, #9d0f98);\n          background-size: 400% 400%;\n          animation: feedback-button 3s ease infinite;\n          transition: opacity $transition-time-fast;\n\n          .iconfont {\n            display: inline-block;\n          }\n\n          &:hover {\n            opacity: 1;\n            background-color: $primary;\n          }\n        }\n\n        .to-page-bottom {\n          height: $size * 0.618;\n          line-height: $size * 0.618;\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"feedback\">\n    <template v-if=\"state.submitted\">\n      <div class=\"submitted\">\n        <div class=\"icon\">\n          <i class=\"iconfont icon-success\"></i>\n        </div>\n        <div class=\"text\">\n          <i18n>\n            <template #zh>感谢你的反馈。</template>\n            <template #en>Thank U for your feedback.</template>\n          </i18n>\n        </div>\n        <button class=\"close\" @click=\"handleClose\">\n          <i18n zh=\"关闭窗口\" en=\"Close\" />\n        </button>\n      </div>\n    </template>\n    <template v-else>\n      <div class=\"title\">\n        <i18n>\n          <template #zh>你认为 {{ META.title }} 整体怎么样？</template>\n          <template #en>How would you rate {{ META.title }}?</template>\n        </i18n>\n      </div>\n      <div class=\"emotions\">\n        <li class=\"item\" :key=\"emotion.value\" v-for=\"emotion in emotions\">\n          <label>\n            <input\n              class=\"radio\"\n              type=\"radio\"\n              :value=\"emotion.value\"\n              :disabled=\"state.submitting\"\n              v-model.number=\"state.emotion\"\n            />\n            <div class=\"button\" :class=\"{ activated: state.emotion === emotion.value }\">\n              <span class=\"emoji\">{{ emotion.emoji }}</span>\n              <span class=\"text\"><i18n :zh=\"emotion.zh\" :en=\"emotion.en\" /></span>\n            </div>\n          </label>\n          <transition name=\"module\">\n            <div class=\"arrow\" v-if=\"state.emotion === emotion.value\"></div>\n          </transition>\n        </li>\n      </div>\n      <div class=\"input\">\n        <textarea\n          class=\"textarea\"\n          name=\"feedback\"\n          id=\"feedback\"\n          rows=\"10\"\n          v-model.trim=\"state.content\"\n          :disabled=\"state.submitting\"\n          :placeholder=\"\n            isZhLang ? '你可在此畅所欲言，这将仅对博主可见' : 'Tell me about your opinion...'\n          \"\n        ></textarea>\n        <div class=\"buttons\">\n          <button class=\"item cancel\" :disabled=\"state.submitting\" @click=\"handleClose\">\n            <span class=\"text\"><i18n zh=\"取消\" en=\"Cancel\" /></span>\n          </button>\n          <button\n            class=\"item submit\"\n            :disabled=\"!isSubmitable || state.submitting\"\n            @click=\"handleSubmit\"\n          >\n            <i class=\"iconfont icon-mail-plane\" />\n            <span class=\"text\">\n              <i18n :k=\"state.submitting ? LanguageKey.SUBMITTING : LanguageKey.SUBMIT\" />\n            </span>\n          </button>\n        </div>\n      </div>\n    </template>\n    <div class=\"history\" v-if=\"historyFeedbacks.length\">\n      <i18n>\n        <template #zh>你已进行过 {{ historyFeedbacks.length }} 次反馈。</template>\n        <template #en>You have {{ historyFeedbacks.length }} feedback history.</template>\n      </i18n>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, reactive, computed, toRaw } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useStores } from '/@/stores'\n  import { LanguageKey } from '/@/language/key'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { META } from '/@/config/app.config'\n\n  enum Event {\n    Close = 'close'\n  }\n\n  export default defineComponent({\n    name: 'Feedback',\n    emits: [Event.Close],\n    setup(_, context) {\n      const emotions = [\n        { emoji: '😠', value: 1, en: 'Terrible', zh: '差劲' },\n        { emoji: '🙁', value: 2, en: 'Bad', zh: '不喜欢' },\n        { emoji: '😐', value: 3, en: 'Neutral', zh: '无感' },\n        { emoji: '😃', value: 4, en: 'Great', zh: '喜欢' },\n        { emoji: '🥰', value: 5, en: 'Amazing', zh: '太棒了' }\n      ]\n\n      const { appOption, identity } = useStores()\n      const { gtag, isZhLang } = useEnhancer()\n      const historyFeedbacks = computed(() => identity.feedbacks)\n      const state = reactive({\n        emotion: null as unknown as number,\n        content: '',\n        submitting: false,\n        submitted: false\n      })\n      const isSubmitable = computed(() => {\n        return Number.isInteger(state.emotion) && Boolean(state.content)\n      })\n\n      const handleClose = () => context.emit(Event.Close)\n      const handleSubmit = () => {\n        if (isSubmitable.value) {\n          gtag?.event('submit_feedback', {\n            event_category: GAEventCategories.Widget\n          })\n\n          state.submitting = true\n          appOption\n            .postFeedback(toRaw(state))\n            .then((result) => {\n              identity.addFeedback(result.result)\n              state.submitted = true\n            })\n            .catch((error: any) => {\n              alert(error)\n            })\n            .finally(() => {\n              state.submitting = false\n            })\n        }\n      }\n\n      return {\n        LanguageKey,\n        META,\n        isZhLang,\n        isSubmitable,\n        emotions,\n        state,\n        historyFeedbacks,\n        handleClose,\n        handleSubmit\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .feedback {\n    width: 48rem !important;\n    background-color: $module-bg-lighter !important;\n\n    .title {\n      width: 100%;\n      height: 4rem;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      font-size: $font-size-h3;\n      font-weight: bold;\n      color: $text-secondary;\n      border-bottom: 1px solid $module-bg-darker-1;\n    }\n\n    .emotions {\n      margin: 0;\n      padding: 0;\n      list-style: none;\n      display: flex;\n      padding: 2rem 0;\n      justify-content: space-between;\n      border-bottom: 1px dashed $module-bg-darker-1;\n\n      .item {\n        width: 20%;\n        text-align: center;\n        position: relative;\n\n        .radio {\n          display: none;\n        }\n\n        .button {\n          display: inline-flex;\n          flex-direction: column;\n          justify-content: center;\n          align-items: center;\n          cursor: pointer;\n          opacity: 0.7;\n          filter: grayscale(0.8);\n          &.activated,\n          &:hover {\n            opacity: 1;\n            filter: grayscale(0);\n          }\n\n          .emoji {\n            $size: $font-size-h1 * 2;\n            font-size: $size;\n            line-height: $size;\n            margin-bottom: $gap;\n          }\n        }\n\n        .arrow {\n          $size: 15px;\n          position: absolute;\n          bottom: -4rem;\n          left: 50%;\n          margin-bottom: -1px;\n          margin-left: -$size;\n          width: 0;\n          height: 0;\n          border-left: $size solid transparent;\n          border-right: $size solid transparent;\n          border-bottom: $size solid $module-bg-darker-1;\n        }\n      }\n    }\n\n    .input {\n      padding: 2rem;\n\n      .textarea {\n        width: 100%;\n        height: 18rem;\n        padding: 1em;\n        margin-bottom: 2rem;\n        border-radius: $xs-radius;\n        background-color: $module-bg-darker-1;\n        resize: none;\n      }\n\n      .buttons {\n        display: flex;\n        justify-content: space-between;\n\n        .item {\n          height: 3rem;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          border-radius: $mini-radius;\n          &[disabled] {\n            opacity: 0.7;\n          }\n          &:not([disabled]):hover {\n            color: $link-hover;\n          }\n\n          &.cancel {\n            width: 7rem;\n            color: $text-secondary;\n            &:not([disabled]):hover {\n              color: $link-color;\n            }\n          }\n\n          &.submit {\n            width: 12rem;\n            color: $text-secondary;\n            background-color: $module-bg-darker-2;\n            &:not([disabled]):hover {\n              background-color: $module-bg-darker-3;\n            }\n          }\n\n          .iconfont {\n            margin-right: 1em;\n          }\n\n          .text {\n            font-weight: bold;\n          }\n        }\n      }\n    }\n\n    .submitted {\n      width: 100%;\n      height: 20rem;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n\n      .icon {\n        $size: 4rem;\n        width: $size;\n        height: $size;\n        margin-bottom: 2rem;\n        border-radius: 100%;\n        line-height: $size;\n        text-align: center;\n        background-color: $primary;\n        font-size: $font-size-h3;\n        color: $text-reversal;\n      }\n\n      .text {\n        font-weight: bold;\n      }\n\n      .close {\n        margin-top: 2rem;\n        padding: 0 2em;\n        line-height: 2.4em;\n        border-radius: $xs-radius;\n        background-color: $module-bg-darker-1;\n        &:hover {\n          color: $link-hover;\n          background-color: $module-bg-darker-2;\n        }\n      }\n    }\n\n    .history {\n      border-top: 1px solid $module-bg-darker-1;\n      height: 2.8em;\n      line-height: 2.8em;\n      text-align: center;\n      font-size: $font-size-small;\n      color: $text-disabled;\n    }\n  }\n</style>\n","/**\n * @file Email URL\n * @module transform.email\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport qs from 'qs'\n\nexport interface EmailLinkOptions {\n  email: string\n  subject?: string\n  body?: string\n}\nexport const emailLink = (email: string | EmailLinkOptions) => {\n  if (typeof email === 'string') {\n    return `mailto:${email}`\n  }\n\n  const { email: _email, ...content } = email\n  return `mailto:${_email}?` + qs.stringify(content)\n}\n","<template>\n  <div class=\"statement\">\n    <div class=\"content\">\n      <markdown :markdown=\"appOption.data?.statement\" :compact=\"true\" />\n      <br />\n      <hr />\n      <p v-if=\"appOption.data\" class=\"email\">\n        <a :href=\"emailLink(appOption.data.site_email)\" class=\"link\" target=\"_blank\">\n          <i class=\"iconfont icon-mail\"></i>\n          <span class=\"text\">{{ appOption.data.site_email }}</span>\n        </a>\n      </p>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { useStores } from '/@/stores'\n  import { emailLink } from '/@/transforms/email'\n  import Markdown from '/@/components/common/markdown.vue'\n\n  export default defineComponent({\n    name: 'Statement',\n    components: { Markdown },\n    setup() {\n      const { appOption } = useStores()\n      return { appOption, emailLink }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .statement {\n    background-color: $module-bg-opaque !important;\n    overflow-y: scroll !important;\n\n    .content {\n      padding: 0 2em;\n      width: 60rem;\n      min-height: 70rem;\n\n      .email {\n        .link {\n          color: $text-secondary;\n\n          .iconfont {\n            margin-right: $xs-gap;\n          }\n          .text {\n            font-weight: bold;\n          }\n\n          &:hover {\n            color: $link-hover;\n          }\n        }\n      }\n    }\n  }\n</style>\n","import { VALUABLE_LINKS } from '/@/config/app.config'\nimport { LanguageKey } from '/@/language'\nimport { RouteName, CategorySlug } from '/@/app/router'\nimport { getPageRoute, getCategoryFlowRoute } from '/@/transforms/route'\nimport { getTargetCDNURL } from '/@/transforms/url'\n\nexport interface MenuItem {\n  id: string\n  route?: string\n  url?: string\n  i18nKey: LanguageKey\n  icon?: string\n  imageIcon?: string\n  divider?: boolean\n  newWindow?: boolean\n  disabledUppercase?: boolean\n  hot?: boolean\n}\n\nexport const menus: Array<MenuItem> = [\n  {\n    id: RouteName.Home,\n    route: '/',\n    icon: 'icon-home',\n    i18nKey: LanguageKey.PAGE_HOME\n  },\n  {\n    id: CategorySlug.Code,\n    route: getCategoryFlowRoute(CategorySlug.Code),\n    icon: 'icon-code',\n    i18nKey: LanguageKey.CATEGORY_CODE\n  },\n  {\n    id: CategorySlug.Insight,\n    route: getCategoryFlowRoute(CategorySlug.Insight),\n    icon: 'icon-insight',\n    i18nKey: LanguageKey.CATEGORY_INSIGHT\n  },\n  {\n    id: 'github',\n    url: VALUABLE_LINKS.GITHUB,\n    icon: 'icon-github',\n    i18nKey: LanguageKey.PAGE_GITHUB,\n    newWindow: true\n  },\n  {\n    id: RouteName.Lens,\n    route: getPageRoute(RouteName.Lens),\n    icon: 'icon-lens',\n    i18nKey: LanguageKey.PAGE_LENS\n  },\n  {\n    id: RouteName.About,\n    route: getPageRoute(RouteName.About),\n    icon: 'icon-swordsman',\n    i18nKey: LanguageKey.PAGE_ABOUT\n  },\n  {\n    id: RouteName.Guestbook,\n    route: getPageRoute(RouteName.Guestbook),\n    i18nKey: LanguageKey.PAGE_GUESTBOOK,\n    icon: 'icon-comment'\n  },\n  {\n    id: RouteName.App,\n    route: getPageRoute(RouteName.App),\n    imageIcon: getTargetCDNURL('/images/page-app/logo.png'),\n    i18nKey: LanguageKey.PAGE_APP,\n    divider: true\n  },\n  {\n    id: 'nft',\n    route: getPageRoute(RouteName.Nft),\n    imageIcon: getTargetCDNURL('/images/third-party/opensea.svg'),\n    i18nKey: LanguageKey.PAGE_NFT,\n    disabledUppercase: true,\n    hot: true,\n    divider: true\n  }\n]\n","<template>\n  <div :id=\"NAV_ELEMENT_ID\" class=\"desktop-nav\">\n    <nav class=\"nav-list\">\n      <template v-for=\"menu in menus\" :key=\"menu.id\">\n        <span v-if=\"menu.divider\" class=\"divider\"></span>\n        <ulink class=\"item\" :class=\"menu.id\" :href=\"menu.url\" :to=\"menu.route\">\n          <uimage v-if=\"menu.imageIcon\" class=\"image-icon\" :src=\"menu.imageIcon\" />\n          <i v-else-if=\"menu.icon\" class=\"font-icon iconfont\" :class=\"menu.icon\"></i>\n          <webfont class=\"text\" bolder :uppercase=\"!menu.disabledUppercase\">\n            <i18n :k=\"menu.i18nKey\" />\n          </webfont>\n          <span class=\"superscript new-window\" v-if=\"menu.newWindow\">\n            <i class=\"iconfont icon-new-window-s\"></i>\n          </span>\n          <span class=\"superscript hot\" v-if=\"menu.hot\">\n            <i class=\"iconfont icon-hot-fill\"></i>\n          </span>\n        </ulink>\n      </template>\n      <!-- AD -->\n      <template v-for=\"(ad, index) in adConfig.PC_NAV\" :key=\"index\">\n        <span class=\"divider\"></span>\n        <ulink class=\"item\" :href=\"ad.url\" :style=\"{ color: ad.color }\">\n          <i class=\"font-icon iconfont\" :class=\"ad.icon\"></i>\n          <span class=\"ad-text\">\n            <i18n v-if=\"ad.i18n\" :zh=\"ad.i18n.zh\" :en=\"ad.i18n.en\" />\n            <template v-else>{{ ad.text }}</template>\n          </span>\n          <span class=\"superscript\">\n            <i class=\"iconfont icon-ad\"></i>\n          </span>\n        </ulink>\n      </template>\n    </nav>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { NAV_ELEMENT_ID } from '/@/constants/anchor'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { menus } from './menu'\n  export default defineComponent({\n    name: 'DesktopNav',\n    setup() {\n      const { adConfig } = useEnhancer()\n      return {\n        NAV_ELEMENT_ID,\n        menus,\n        adConfig\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .desktop-nav {\n    width: $navbar-width;\n    height: auto;\n\n    .nav-list {\n      width: $navbar-width;\n      padding: 0;\n      margin: 0;\n      position: fixed;\n\n      .item {\n        display: flex;\n        align-items: center;\n        position: relative;\n        width: 100%;\n        height: 3em;\n        margin-bottom: $sm-gap;\n        padding: 0 $lg-gap;\n        border-radius: $mini-radius;\n        text-decoration: none;\n        letter-spacing: 0.5px;\n        color: $text-secondary;\n        will-change: background-color;\n        transition: background-color $transition-time-fast * 0.6;\n        @include radius-box($sm-radius);\n        &:last-child {\n          margin-bottom: 0;\n        }\n\n        &:hover {\n          color: $primary-lighter;\n          background-color: $module-bg-translucent;\n        }\n\n        &.link-active {\n          color: $primary;\n          background-color: $module-bg-lighter;\n          &.guestbook {\n            background: linear-gradient(to bottom, $module-bg-lighter, transparent);\n          }\n        }\n\n        &.app {\n          color: $surmon;\n        }\n\n        &.nft {\n          color: $opensea-primary;\n        }\n\n        .font-icon {\n          width: 1em;\n          margin-right: $gap;\n          display: inline-block;\n        }\n\n        .image-icon {\n          width: 1em;\n          height: 1em;\n          margin-right: $gap;\n          border-radius: $xs-radius;\n        }\n\n        .ad-text {\n          font-weight: bold;\n        }\n\n        .superscript {\n          margin-left: $sm-gap;\n          &.new-window {\n            .iconfont {\n              font-size: $font-size-small;\n            }\n          }\n        }\n      }\n\n      .divider {\n        display: block;\n        height: 0;\n        background-color: transparent;\n        border-top: 1px dotted $module-bg-darker-2;\n        margin-bottom: $sm-gap;\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"search\">\n    <form class=\"search-box\" ref=\"formElement\">\n      <input\n        id=\"keyword\"\n        class=\"search-input\"\n        required\n        type=\"search\"\n        name=\"search\"\n        maxlength=\"16\"\n        autocomplete=\"off\"\n        v-model.trim=\"keyword\"\n        :class=\"i18n.language\"\n        :placeholder=\"i18n.t(LanguageKey.SEARCH_PLACEHOLDER)\"\n        @keyup.enter=\"handleSearch\"\n      />\n      <button type=\"submit\" class=\"search-btn\" @click=\"handleSearch\">\n        <i class=\"iconfont icon-search\" />\n      </button>\n    </form>\n    <router-link class=\"extra-btn\" :to=\"{ name: RouteName.Sponsor }\">\n      <i class=\"iconfont icon-peachblossom\" />\n    </router-link>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, onMounted } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { RouteName } from '/@/app/router'\n  import { LanguageKey } from '/@/language'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { isSearchFlow } from '/@/transforms/route'\n\n  export default defineComponent({\n    name: 'DesktopAsideSearch',\n    setup() {\n      const { i18n, gtag, route, router } = useEnhancer()\n      const formElement = ref<HTMLFormElement>()\n      const keyword = ref('')\n\n      onMounted(() => {\n        if (isSearchFlow(route.name as string)) {\n          keyword.value = route.params.keyword as string\n        }\n      })\n\n      const handleSearch = (event) => {\n        event.preventDefault()\n        const check_status = formElement.value?.checkValidity()\n        if (!check_status) {\n          formElement.value?.reportValidity()\n          return\n        }\n\n        const inputKeyword = keyword.value\n        const paramsKeyword = route.params.keyword as string\n        const isSearchPage = isSearchFlow(route.name as string)\n        if (inputKeyword && (!isSearchPage || paramsKeyword !== inputKeyword)) {\n          router.push({\n            name: RouteName.SearchFlow,\n            params: { keyword: inputKeyword }\n          })\n          gtag?.event('aside_search', {\n            event_category: GAEventCategories.Universal,\n            event_label: inputKeyword\n          })\n        }\n      }\n\n      return {\n        LanguageKey,\n        RouteName,\n        formElement,\n        i18n,\n        keyword,\n        handleSearch\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .search {\n    padding: $sm-gap;\n    width: 100%;\n    height: 3em;\n    overflow: hidden;\n    display: flex;\n    justify-content: space-between;\n\n    .search-input,\n    .search-btn,\n    .extra-btn {\n      height: 2em;\n      line-height: 2em;\n      background-color: $module-bg-darker-1;\n      @include background-transition();\n      &:hover {\n        background-color: $module-bg-hover;\n      }\n    }\n\n    .search-box {\n      .search-input {\n        width: 11em;\n        margin-right: 0;\n        padding: 0;\n        text-indent: 0.5em;\n        &::-webkit-calendar-picker-indicator {\n          display: none;\n        }\n      }\n\n      .search-btn {\n        width: 3em;\n        background-color: $module-bg-hover;\n        @include background-transition();\n        &:hover {\n          background-color: $module-bg-darker-3;\n        }\n      }\n    }\n\n    .extra-btn {\n      flex-grow: 1;\n      display: inline-block;\n      margin-left: $sm-gap;\n      text-align: center;\n      border-radius: $mini-radius;\n\n      .iconfont {\n        font-size: $font-size-h4;\n      }\n    }\n  }\n</style>\n","<template>\n  <router-link class=\"statistic\" :to=\"{ name: RouteName.Archive }\">\n    <div class=\"item\">\n      <statistic-skeleton :fetching=\"fetching\" :count=\"store.data?.articles\" />\n      <span class=\"title\">\n        <i18n :k=\"LanguageKey.STATISTIC_ARTICLES\" />\n      </span>\n    </div>\n    <divider type=\"vertical\" />\n    <div class=\"item\">\n      <statistic-skeleton :fetching=\"fetching\" :count=\"store.data?.todayViews\" />\n      <span class=\"title\">\n        <i18n :k=\"LanguageKey.STATISTIC_TODAY_VIEWS\" />\n      </span>\n    </div>\n    <divider type=\"vertical\" />\n    <div class=\"item\">\n      <statistic-skeleton :fetching=\"fetching\" :count=\"store.data?.comments\" />\n      <span class=\"title\">\n        <i18n :k=\"LanguageKey.STATISTIC_COMMENTS\" />\n      </span>\n    </div>\n  </router-link>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, h, onMounted, Transition } from 'vue'\n  import { useNodepressStatisticStore } from '/@/stores/statistic'\n  import { RouteName } from '/@/app/router'\n  import { LanguageKey } from '/@/language'\n\n  /* eslint-disable vue/one-component-per-file */\n  const StatisticSkeleton = defineComponent({\n    props: {\n      fetching: Boolean,\n      count: Number\n    },\n    setup(props) {\n      return () =>\n        h(Transition, { name: 'module', mode: 'out-in', duration: 280 }, () =>\n          props.fetching\n            ? h('p', { class: 'skeleton', key: 'skeleton' }, '•••')\n            : h('p', { class: 'count', key: 'count' }, props.count ?? '-')\n        )\n    }\n  })\n\n  export default defineComponent({\n    name: 'DesktopAsideStatistic',\n    components: { StatisticSkeleton },\n    setup() {\n      const fetching = ref(true)\n      const statisticStore = useNodepressStatisticStore()\n      onMounted(() => {\n        statisticStore.fetch().finally(() => {\n          fetching.value = false\n        })\n      })\n\n      return {\n        LanguageKey,\n        RouteName,\n        fetching,\n        store: statisticStore\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .statistic {\n    width: 100%;\n    height: 5em;\n    padding: $sm-gap;\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n    overflow: hidden;\n    &:hover {\n      .item {\n        .count {\n          color: $link-color;\n        }\n        .title {\n          color: $text;\n        }\n      }\n    }\n\n    .item {\n      display: inline-flex;\n      flex-direction: column;\n      align-items: center;\n      flex: 1;\n\n      .skeleton,\n      .count {\n        margin: 0;\n        height: 2.8rem;\n      }\n\n      .skeleton {\n        @keyframes skeleton {\n          from {\n            color: $text-divider;\n          }\n          to {\n            color: $link-color;\n          }\n        }\n        font-size: $font-size-h3;\n        animation: skeleton 0.8s linear alternate infinite;\n      }\n\n      .count {\n        font-size: $font-size-h2;\n        font-weight: bold;\n        color: $text;\n      }\n\n      .title {\n        font-size: $font-size-small - 2;\n        text-transform: uppercase;\n        color: $text-secondary;\n        @include color-transition();\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"article\">\n    <div class=\"header\">\n      <span class=\"title\">\n        <i class=\"iconfont icon-hotfill\" />\n        <webfont class=\"text\">\n          <i18n :k=\"LanguageKey.HOT_ARTICLE_LIST_TITLE\" />\n        </webfont>\n      </span>\n      <button class=\"switch\" @click=\"switchHotPage\">\n        <i class=\"iconfont icon-switch\" />\n      </button>\n    </div>\n    <placeholder :data=\"articles\" :loading=\"isFetching\" :i18n-key=\"LanguageKey.ARTICLE_PLACEHOLDER\">\n      <template #loading>\n        <ul class=\"article-list-skeleton\" key=\"skeleton\">\n          <li v-for=\"item in 5\" :key=\"item\" class=\"item\">\n            <skeleton-line />\n          </li>\n        </ul>\n      </template>\n      <template #default>\n        <ul class=\"article-list\" key=\"list\">\n          <li v-for=\"item in articles\" :key=\"item.id\" class=\"item\">\n            <span class=\"index\" :class=\"{ small: item.i >= 10 }\" :data-index=\"item.i\">\n              {{ item.i }}\n            </span>\n            <div class=\"content\">\n              <router-link class=\"title\" :to=\"getArticleDetailRoute(item.id)\" :title=\"item.title\">\n                {{ item.title }}\n              </router-link>\n              <div class=\"meta\">\n                <span class=\"item date\">\n                  {{ dateToYMD(item.create_at) }}\n                </span>\n                <span class=\"item views\">\n                  <i class=\"iconfont icon-eye\"></i>\n                  {{ numberToKilo(item.meta.views) }}\n                </span>\n                <span class=\"item comments\">\n                  <i class=\"iconfont icon-comment\"></i>\n                  {{ item.meta.comments }}\n                </span>\n              </div>\n            </div>\n          </li>\n        </ul>\n      </template>\n    </placeholder>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, computed } from 'vue'\n  import { useArticleListStore } from '/@/stores/article'\n  import { getArticleDetailRoute } from '/@/transforms/route'\n  import { numberToKilo } from '/@/transforms/text'\n  import { dateToYMD } from '/@/transforms/moment'\n  import { LanguageKey } from '/@/language'\n\n  const PER_PAGE = 8\n\n  export default defineComponent({\n    name: 'DesktopAsideArticle',\n    setup() {\n      const articleListStore = useArticleListStore()\n      const isFetching = computed(() => articleListStore.hotList.fetching)\n      const articleFullList = computed(() => {\n        return articleListStore.hotList.data\n          .slice(0, PER_PAGE * 2)\n          .map((a, i) => ({ ...a, i: i + 1 }))\n      })\n      const hotPage = ref(0)\n      const articles = computed(() => {\n        const perPage = hotPage.value * PER_PAGE\n        return articleFullList.value\n          .map((a, i) => ({ ...a, i: i + 1 }))\n          .slice(perPage, perPage + PER_PAGE)\n      })\n\n      const switchHotPage = () => {\n        const count = articleFullList.value.length\n        const pages = Math.ceil(count / PER_PAGE)\n        if (hotPage.value < pages - 1) {\n          hotPage.value++\n        } else {\n          hotPage.value = 0\n        }\n      }\n\n      return {\n        LanguageKey,\n        isFetching,\n        articles,\n        switchHotPage,\n        getArticleDetailRoute,\n        numberToKilo,\n        dateToYMD\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .article {\n    overflow: hidden;\n\n    .header {\n      display: flex;\n      justify-content: space-between;\n      height: 3em;\n      line-height: 3em;\n      margin: 0;\n      padding: 0 $gap;\n      border-bottom: 1px dotted $module-bg-darker-1;\n\n      .title {\n        .iconfont {\n          margin-right: $sm-gap;\n        }\n      }\n\n      .switch {\n        color: $text-secondary;\n        &:hover {\n          color: $text;\n        }\n      }\n    }\n\n    .article-list-skeleton {\n      list-style: none;\n      padding: $gap;\n      margin: 0;\n\n      > .item {\n        height: 1em;\n        margin-bottom: $gap;\n        &:last-child {\n          margin-bottom: 0;\n        }\n      }\n    }\n\n    .article-list {\n      list-style: none;\n      padding: $sm-gap 0;\n      margin-bottom: 0;\n\n      > .item {\n        display: flex;\n        padding: 0 $gap;\n        margin-bottom: $sm-gap;\n        color: $text-darker;\n        &:last-child {\n          margin: 0;\n        }\n\n        .index {\n          $size: $font-size-base;\n          width: $size;\n          height: $size;\n          line-height: $size;\n          margin-top: 4px;\n          display: inline-block;\n          flex-shrink: 0;\n          margin-right: $sm-gap;\n          text-align: center;\n          border-radius: $xs-radius;\n          color: $text-disabled;\n          font-weight: 700;\n          font-size: $font-size-base - 1;\n          &.small {\n            font-size: $font-size-small;\n          }\n          &[data-index='1'],\n          &[data-index='2'],\n          &[data-index='3'] {\n            color: $white;\n            font-size: $font-size-small * 0.8;\n          }\n          &[data-index='1'] {\n            background-color: $surmon;\n          }\n          &[data-index='2'] {\n            background-color: rgba($accent, 0.7);\n          }\n          &[data-index='3'] {\n            background-color: rgba($red, 0.6);\n          }\n        }\n\n        .content {\n          flex-shrink: 1;\n          overflow: hidden;\n        }\n\n        .title {\n          display: inline-block;\n          max-width: 100%;\n          border-top: 1px solid transparent;\n          border-bottom: 1px solid transparent;\n          font-size: $font-size-h6;\n          @include text-overflow();\n          &:hover {\n            text-decoration: none;\n            border-bottom-color: initial;\n          }\n        }\n\n        .meta {\n          font-size: $font-size-small;\n          color: $text-disabled;\n\n          .iconfont {\n            font-size: $font-size-small - 1;\n            color: $text-divider;\n            opacity: 0.6;\n          }\n\n          .item {\n            display: inline-block;\n            &.date {\n              margin-right: $lg-gap;\n            }\n            &.views {\n              width: 5rem;\n              margin-right: $sm-gap;\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"mammon\">\n    <swiper\n      class=\"swiper\"\n      direction=\"vertical\"\n      :initial-slide=\"index\"\n      :loop=\"true\"\n      :simulate-touch=\"false\"\n      :autoplay=\"{ delay: 2800, disableOnInteraction: false }\"\n      :pagination=\"{ clickable: true }\"\n      :set-wrapper-size=\"true\"\n      :auto-height=\"true\"\n      :mousewheel=\"true\"\n      :observe-parents=\"true\"\n      :preload-images=\"false\"\n      :lazy=\"true\"\n      @swiper=\"updateSwiper\"\n      @slide-change-transition-end=\"handleSlideChange\"\n    >\n      <swiper-slide\n        class=\"swiper-slide\"\n        :key=\"_index\"\n        v-for=\"(ad, _index) in adConfig.PC_ASIDE_SWIPER\"\n      >\n        <ulink class=\"content\" :href=\"ad.url\">\n          <uimage :src=\"ad.src\" alt=\"aside-swiper-ad\" />\n          <i class=\"iconfont icon-ad\"></i>\n        </ulink>\n      </swiper-slide>\n    </swiper>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import SwiperClass, { Swiper, SwiperSlide } from '/@/effects/swiper'\n\n  export enum AsideMammonEvent {\n    Ready = 'ready',\n    UpdateIndex = 'update:index',\n    IndexChange = 'index-change'\n  }\n  export default defineComponent({\n    name: 'DesktopAsideMammon',\n    components: {\n      Swiper,\n      SwiperSlide\n    },\n    props: {\n      index: {\n        type: Number,\n        default: 0\n      },\n      ready: {\n        type: Object\n      }\n    },\n    emits: [AsideMammonEvent.Ready, AsideMammonEvent.UpdateIndex, AsideMammonEvent.IndexChange],\n    setup(props, context) {\n      const { adConfig } = useEnhancer()\n      const swiper = ref<SwiperClass>()\n      const updateSwiper = (_swiper: SwiperClass) => {\n        swiper.value = _swiper\n        context.emit(AsideMammonEvent.Ready, swiper.value)\n      }\n\n      const handleSlideChange = () => {\n        const realIndex = swiper.value?.realIndex\n        context.emit(AsideMammonEvent.UpdateIndex, realIndex)\n        context.emit(AsideMammonEvent.IndexChange, realIndex)\n      }\n\n      return {\n        adConfig,\n        updateSwiper,\n        handleSlideChange\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .mammon {\n    width: 100%;\n    overflow: hidden;\n\n    .swiper {\n      height: 88px;\n\n      .swiper-wrapper {\n        &[style*='300ms'] {\n          .swiper-slide-active {\n            @include motion-blur-filter('vertical-small');\n          }\n        }\n\n        .swiper-slide {\n          .content {\n            display: block;\n            width: 100%;\n            height: 100%;\n            position: relative;\n\n            img {\n              width: 100%;\n              height: auto;\n            }\n\n            .iconfont {\n              position: absolute;\n              bottom: $sm-gap;\n              right: $gap;\n              color: $white;\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"tag\">\n    <placeholder\n      :data=\"tagStore.sorted.length\"\n      :fetching=\"tagStore.fetching\"\n      :i18n-key=\"LanguageKey.TAG_PLACEHOLDER\"\n    >\n      <template #loading>\n        <ul class=\"tag-list-skeleton\" key=\"skeleton\">\n          <li v-for=\"item in 14\" :key=\"item\" class=\"item\">\n            <skeleton-line />\n          </li>\n        </ul>\n      </template>\n      <template #default>\n        <div class=\"tag-list\" key=\"list\">\n          <router-link\n            class=\"item\"\n            :title=\"`${tagEnName(tag)} | ${tag.description}`\"\n            :to=\"getTagFlowRoute(tag.slug)\"\n            :key=\"index\"\n            v-for=\"(tag, index) in tagStore.sorted\"\n          >\n            <i class=\"iconfont\" :class=\"getTagIcon(tag)\" />\n            <span class=\"name\">\n              <i18n :zh=\"tag.name\" :en=\"tagEnName(tag)\" />\n              <span class=\"count\">({{ tag.articles_count || 0 }})</span>\n            </span>\n          </router-link>\n        </div>\n      </template>\n    </placeholder>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { useTagStore, tagEnName, Tag } from '/@/stores/tag'\n  import { LanguageKey } from '/@/language'\n  import { getTagFlowRoute } from '/@/transforms/route'\n  import { getExtendValue } from '/@/transforms/state'\n\n  export default defineComponent({\n    name: 'DesktopAsideTag',\n    setup() {\n      const tagStore = useTagStore()\n      const getTagIcon = (tag: Tag) => {\n        return getExtendValue(tag.extends || [], 'icon') || 'icon-tag'\n      }\n\n      return {\n        LanguageKey,\n        tagStore,\n        tagEnName,\n        getTagIcon,\n        getTagFlowRoute\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @use 'sass:math';\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .tag {\n    margin-bottom: 0;\n    overflow-y: auto;\n    width: 100%;\n    border-top: $gap solid transparent;\n    border-bottom: $gap solid transparent;\n\n    .tag-list-skeleton {\n      display: flex;\n      flex-wrap: wrap;\n      list-style: none;\n      padding: 0;\n      margin: 0 $gap;\n      overflow: hidden;\n\n      .item {\n        width: calc(50% - #{math.div($gap, 2)});\n        height: 1.4em;\n        margin-right: 0;\n        margin-bottom: $gap;\n\n        &:nth-child(2n-1) {\n          margin-right: $gap;\n        }\n        &:nth-child(4n-1) {\n          width: 30%;\n          margin-right: $gap;\n        }\n        &:nth-child(4n) {\n          width: calc(70% - #{$gap});\n        }\n        &:nth-last-child(1),\n        &:nth-last-child(2) {\n          margin-bottom: 0;\n        }\n      }\n    }\n\n    .tag-list {\n      list-style: none;\n      padding: 0;\n      overflow: hidden;\n      margin-left: $gap;\n      margin-top: -$gap;\n\n      .item {\n        $height: 2em;\n        display: inline-flex;\n        margin-right: $sm-gap;\n        margin-top: $gap;\n        height: $height;\n        line-height: $height;\n        font-size: $font-size-h6;\n        font-family: $font-family-normal;\n        @include radius-box($xs-radius);\n\n        .iconfont {\n          width: 2em;\n          text-align: center;\n          background-color: $module-bg-darker-1;\n          @include background-transition();\n        }\n\n        .name {\n          display: block;\n          padding: 0 $sm-gap;\n          @include background-transition();\n\n          .count {\n            margin-left: $xs-gap;\n            color: $text-secondary;\n          }\n        }\n\n        &.link-active {\n          .iconfont {\n            color: $module-bg-opaque;\n            background-color: $primary-translucent;\n          }\n          .name {\n            font-weight: bold;\n            color: $text-reversal;\n            background-color: $primary;\n            .count {\n              color: $text-reversal;\n            }\n          }\n        }\n\n        &:not(.link-active) {\n          .name {\n            background-color: $module-bg-hover;\n          }\n\n          &:hover {\n            .iconfont {\n              background-color: $module-bg-hover;\n            }\n            .name {\n              background-color: $module-bg-darker-3;\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"anchor\" v-if=\"article\">\n    <button\n      class=\"header\"\n      :title=\"article.title\"\n      @click=\"handleAnchor(ANCHORS.ARTICLE_CONTENT_ELEMENT_ID)\"\n    >\n      <div class=\"title\">{{ article.title }}</div>\n      <div class=\"read\">\n        <i18n>\n          <template #zh\n            >共 {{ numberSplit(store.contentLength) }} 字，需阅读\n            {{ store.readMinutes }} 分钟</template\n          >\n          <template #en\n            >{{ numberSplit(store.contentLength) }} words, {{ store.readMinutes }} min\n            read</template\n          >\n        </i18n>\n      </div>\n    </button>\n    <div class=\"catalogue\" v-if=\"headings.length\">\n      <ul class=\"list\" :class=\"`indent-${minHeadingLevel}`\">\n        <li\n          class=\"item\"\n          :key=\"index\"\n          :title=\"heading.text\"\n          :class=\"`level-${heading.level}`\"\n          v-for=\"(heading, index) in headings\"\n          @click=\"handleAnchor(heading.id)\"\n        >\n          <i class=\"level iconfont\" :class=\"`icon-h-${heading.level}`\"></i>\n          <span class=\"text\">{{ heading.text }}</span>\n        </li>\n        <li\n          class=\"item readmore\"\n          key=\"readmore\"\n          v-if=\"store.isLongContent && !store.renderedFullContent\"\n          :class=\"`level-${minHeadingLevel}`\"\n          @click=\"handleAnchor(ANCHORS.ARTICLE_READMORE_ELEMENT_ID)\"\n        >\n          <i class=\"level iconfont icon-loadmore\"></i>\n          <span class=\"text\"><i18n :k=\"LanguageKey.ARTICLE_READ_ALL\" /></span>\n        </li>\n      </ul>\n    </div>\n    <button class=\"link\" @click=\"handleAnchor(ANCHORS.ARTICLE_META_ELEMENT_ID)\">\n      <i class=\"iconfont icon-heart\"></i>\n      <i18n zh=\"摁赞\" en=\"Meta\" />\n      <divider type=\"vertical\" />\n      <span class=\"meta\">\n        <i class=\"iconfont icon-like\"></i>\n        <span class=\"count\">{{ article.meta.likes }}</span>\n      </span>\n      <divider type=\"vertical\" />\n      <span class=\"meta\">\n        <i class=\"iconfont icon-eye\"></i>\n        <span class=\"count\">{{ numberSplit(article.meta.views) }}</span>\n      </span>\n    </button>\n    <button class=\"link\" @click=\"handleAnchor(ANCHORS.ARTICLE_RELATED_ELEMENT_ID)\">\n      <i class=\"iconfont icon-category\"></i>\n      <i18n zh=\"相关\" en=\"Related\" />\n      <divider type=\"vertical\" />\n      <span class=\"count\">{{ store.relatedArticles.length }}</span>\n    </button>\n    <button class=\"link\" @click=\"handleAnchor(ANCHORS.COMMENT_ELEMENT_ID)\">\n      <i class=\"iconfont icon-comment\"></i>\n      <i18n zh=\"评论\" en=\"Comments\" />\n      <divider type=\"vertical\" />\n      <span class=\"count\">{{ article.meta.comments }}</span>\n    </button>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed } from 'vue'\n  import { useArticleDetailStore } from '/@/stores/article'\n  import * as ANCHORS from '/@/constants/anchor'\n  import { LanguageKey } from '/@/language'\n  import { scrollToAnchor } from '/@/utils/scroller'\n  import { numberSplit } from '/@/transforms/text'\n\n  export default defineComponent({\n    name: 'DesktopAsideAnchor',\n    setup() {\n      const articleDetailStore = useArticleDetailStore()\n      const article = computed(() => articleDetailStore.article)\n\n      const headings = computed(() => {\n        const result = [...(articleDetailStore.defaultContent?.headings || [])]\n        if (articleDetailStore.isLongContent && articleDetailStore.renderedFullContent) {\n          result.push(...(articleDetailStore.moreContent?.headings || []))\n        }\n        return result\n      })\n\n      const minHeadingLevel = computed(() => {\n        return Math.min(...headings.value.map((heading) => heading.level))\n      })\n\n      const handleAnchor = (elementID: string) => {\n        scrollToAnchor(elementID)\n      }\n\n      return {\n        ANCHORS,\n        LanguageKey,\n        article,\n        store: articleDetailStore,\n        headings,\n        minHeadingLevel,\n        numberSplit,\n        handleAnchor\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .anchor {\n    padding: $gap;\n    display: flex;\n    flex-direction: column;\n\n    .header,\n    .catalogue,\n    .link {\n      display: block;\n      width: 100%;\n      border: 1px dashed $module-bg-hover;\n      border-radius: $sm-radius;\n      margin-bottom: $gap;\n      text-align: left;\n    }\n\n    .header,\n    .link,\n    .catalogue {\n      &:hover {\n        border-color: $primary;\n      }\n    }\n\n    .link {\n      flex-shrink: 0;\n      padding: 0 $gap;\n      height: 3rem;\n      line-height: 3rem;\n      @include text-overflow();\n      &:last-child {\n        margin-bottom: 0;\n      }\n      &:hover {\n        color: $primary;\n      }\n\n      .count {\n        font-weight: bold;\n      }\n\n      .iconfont {\n        margin-right: $sm-gap;\n      }\n    }\n\n    .header {\n      display: flex;\n      flex-direction: column;\n      justify-content: space-evenly;\n      flex-shrink: 0;\n      padding: $xs-gap $gap;\n      height: 6rem;\n\n      .title {\n        display: block;\n        width: 100%;\n        font-weight: bold;\n        @include text-overflow();\n      }\n\n      .read {\n        font-size: $font-size-small;\n      }\n    }\n\n    .catalogue {\n      max-height: 36rem;\n      padding: $sm-gap $gap;\n      overflow-y: auto;\n      @include scroll-snap-y();\n      &:hover {\n        border-color: $primary;\n      }\n\n      .list {\n        padding: 0;\n        margin: 0;\n        list-style: none;\n        padding-left: $xs-gap;\n        &.indent-2 {\n          margin-left: -$font-size-h4;\n        }\n        &.indent-3 {\n          margin-left: -$font-size-h4 * 2;\n        }\n        &.indent-4 {\n          margin-left: -$font-size-h4 * 3;\n        }\n        &.indent-5 {\n          margin-left: -$font-size-h4 * 4;\n        }\n        &.indent-6 {\n          margin-left: -$font-size-h4 * 5;\n        }\n\n        .item {\n          cursor: pointer;\n          line-height: 2.4em;\n          @include scroll-snap-item();\n          @include text-overflow();\n          &:hover {\n            color: $primary;\n            .iconfont {\n              color: $primary;\n            }\n            .text {\n              font-weight: bold;\n            }\n          }\n\n          .level {\n            margin-right: $xs-gap;\n            color: $text-disabled;\n          }\n\n          .text {\n            @include text-underline(0.4em);\n            text-decoration-style: dotted;\n          }\n\n          &.level-2 {\n            padding-left: $font-size-h4;\n          }\n          &.level-3 {\n            padding-left: $font-size-h4 * 2;\n          }\n          &.level-4 {\n            padding-left: $font-size-h4 * 3;\n          }\n          &.level-5 {\n            padding-left: $font-size-h4 * 4;\n          }\n          &.level-6 {\n            padding-left: $font-size-h4 * 5;\n          }\n\n          &.readmore {\n            margin-top: $xs-gap;\n            .text {\n              font-weight: bold;\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"calendar\">\n    <!-- header -->\n    <div class=\"header\">\n      <button class=\"item arrow\" @click=\"toPrevMonth\">\n        <i class=\"iconfont icon-prev\"></i>\n      </button>\n      <span class=\"item year-month\">{{ headerText }}</span>\n      <button class=\"item arrow\" @click=\"toNextMonth\">\n        <i class=\"iconfont icon-next\"></i>\n      </button>\n    </div>\n    <!-- weekdays -->\n    <ul class=\"weekdays\">\n      <li v-for=\"(day, index) in weekDayTexts\" :key=\"index\">{{ day }}</li>\n    </ul>\n    <!-- days -->\n    <ul class=\"days\">\n      <li v-for=\"(item, index) in tableView.table\" :key=\"index\">\n        <div\n          class=\"item\"\n          :class=\"{\n            today: isToday(item),\n            other: item.month !== tableView.month\n          }\"\n          @click=\"handleDayClick(item)\"\n        >\n          <slot name=\"day\" v-bind=\"item\">{{ item.day }}</slot>\n        </div>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, reactive, computed } from 'vue'\n  import { Language } from '/@/language'\n  import { useEnhancer } from '/@/app/enhancer'\n  import {\n    cloneDate,\n    dateToHuman,\n    humanToDate,\n    isSameHumanDay,\n    humanDateToYMD,\n    HumanDate\n  } from '/@/transforms/moment'\n\n  export default defineComponent({\n    name: 'DesktopAsideCalendar',\n    setup() {\n      const { i18n, isZhLang } = useEnhancer()\n      const today = dateToHuman(new Date())\n      const tableView = reactive({\n        month: 0,\n        year: 1970,\n        table: [] as Array<HumanDate>\n      })\n\n      const WEEKDAYS = {\n        [Language.English]: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],\n        [Language.Chinese]: ['一', '二', '三', '四', '五', '六', '日']\n      }\n\n      const weekDayTexts = computed(() => WEEKDAYS[i18n.language.value])\n      const headerText = computed(() => {\n        const isSameYear = tableView.year === today.year\n        const isSameMonth = tableView.month === today.month\n        const isSameTodayTable = isSameYear && isSameMonth\n        if (isZhLang.value) {\n          const yearText = `${tableView.year} 年`\n          const monthText = ` ${tableView.month} 月`\n          const dayText = isSameTodayTable ? ` ${today.day} 日` : ''\n          return yearText + monthText + dayText\n        }\n        return humanDateToYMD(isSameTodayTable ? today : tableView, ' / ')\n      })\n\n      const setTable = (humanDate: Omit<HumanDate, 'day' | 'week'>) => {\n        const table: HumanDate[] = []\n        const firstDayDate = humanToDate({ ...humanDate, day: 1 })\n        const firstDayWeek = dateToHuman(firstDayDate).week\n\n        // before days\n        for (let i = firstDayWeek - 1; i >= 0; i--) {\n          const date = cloneDate(firstDayDate)\n          date.setDate(date.getDate() - i)\n          table.push(dateToHuman(date))\n        }\n\n        // after days\n        const todoDays = 35 - table.length\n        for (let i = 1; i <= todoDays; i++) {\n          const date = cloneDate(firstDayDate)\n          date.setDate(date.getDate() + i)\n          table.push(dateToHuman(date))\n        }\n\n        Object.assign(tableView, {\n          year: humanDate.year,\n          month: humanDate.month,\n          table\n        })\n      }\n\n      const toPrevMonth = () => {\n        const isPrevYear = tableView.month - 1 <= 0\n        setTable({\n          year: tableView.year - (isPrevYear ? 1 : 0),\n          month: isPrevYear ? 12 : tableView.month - 1\n        })\n      }\n\n      const toNextMonth = () => {\n        const isNextYear = tableView.month + 1 >= 13\n        setTable({\n          year: tableView.year + (isNextYear ? 1 : 0),\n          month: isNextYear ? 1 : tableView.month + 1\n        })\n      }\n\n      const handleDayClick = (date: HumanDate) => {\n        if (date.month < tableView.month) {\n          toPrevMonth()\n        } else if (date.month > tableView.month) {\n          toNextMonth()\n        }\n      }\n\n      // init table\n      setTable({\n        year: today.year,\n        month: today.month\n      })\n\n      return {\n        tableView,\n        headerText,\n        weekDayTexts,\n        toPrevMonth,\n        toNextMonth,\n        handleDayClick,\n        isToday: (target) => isSameHumanDay(target, today)\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .calendar {\n    min-height: 17em;\n\n    > .header {\n      padding: 0;\n      margin-bottom: $gap;\n      overflow: hidden;\n      display: flex;\n      justify-content: space-between;\n\n      .item {\n        height: 2em;\n        line-height: 2em;\n        text-align: center;\n\n        &.arrow {\n          width: 2em;\n          background-color: $module-bg-darker-1;\n          border-radius: $xs-radius;\n          cursor: pointer;\n          @include background-transition();\n\n          &:hover {\n            background-color: $module-bg-hover;\n          }\n        }\n\n        &.year-month {\n          font-weight: bold;\n        }\n      }\n    }\n\n    > .days,\n    > .weekdays {\n      list-style: none;\n      display: grid;\n      grid-template-columns: repeat(7, 1fr);\n      margin: 0;\n      margin-bottom: $sm-gap;\n      padding: 0;\n      overflow: hidden;\n\n      > li {\n        display: block;\n        text-align: center;\n      }\n    }\n\n    > .weekdays {\n      height: 2em;\n      line-height: 2em;\n    }\n\n    > .days-loading {\n      width: 100%;\n      height: 14rem;\n    }\n\n    > .days {\n      min-height: 10em;\n      margin-bottom: 0;\n      position: relative;\n\n      > li {\n        line-height: 2.5em;\n\n        > .item {\n          display: block;\n          border-radius: 100%;\n\n          &:hover {\n            background-color: $module-bg-darker-1;\n          }\n\n          &.today {\n            background-color: $module-bg-hover;\n          }\n\n          &.active {\n            color: $text-reversal;\n            background-color: $primary;\n          }\n\n          &.other {\n            opacity: 0.3;\n            cursor: initial;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <calendar class=\"calendar\">\n    <template #day=\"humanDate\">\n      <router-link class=\"date-link\" v-if=\"articlesIn(humanDate) > 0\" :to=\"getDateRoute(humanDate)\">\n        {{ humanDate.day }}\n      </router-link>\n      <span class=\"date-span\" v-else>{{ humanDate.day }}</span>\n    </template>\n  </calendar>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, onMounted } from 'vue'\n  import { useStores } from '/@/stores'\n  import { humanDateToYMD, HumanDate } from '/@/transforms/moment'\n  import { getDateFlowRoute } from '/@/transforms/route'\n  import Calendar from '/@/components/widget/calendar.vue'\n\n  export default defineComponent({\n    name: 'DesktopAsideCalendar',\n    components: { Calendar },\n    setup() {\n      const { articleCalendar } = useStores()\n      const articlesIn = (targetDate: HumanDate) => {\n        const ymd = humanDateToYMD(targetDate)\n        return articleCalendar.data.find((item) => item.date === ymd)?.count || 0\n      }\n\n      const getDateRoute = (humanDate: HumanDate) => {\n        return getDateFlowRoute(humanDateToYMD(humanDate))\n      }\n\n      onMounted(() => articleCalendar.fetch())\n\n      return {\n        articlesIn,\n        getDateRoute\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @use 'sass:math';\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .calendar {\n    padding: $gap;\n\n    .date-link {\n      position: relative;\n      display: block;\n      border-radius: 100%;\n      font-weight: bold;\n      color: $primary;\n      &::before {\n        content: '';\n        $size: 4px;\n        position: absolute;\n        top: 0.3em;\n        right: 50%;\n        width: $size;\n        height: $size;\n        margin-right: -#{math.div($size, 2)};\n        border-radius: 100%;\n        background-color: $primary;\n      }\n\n      &:hover,\n      &.link-active {\n        background-color: $primary;\n        color: $text-reversal;\n        &::before {\n          background-color: $text-reversal;\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <aside :id=\"ASIDE_ELEMENT_ID\" class=\"desktop-aside\" ref=\"element\">\n    <div class=\"module\">\n      <aside-search />\n    </div>\n    <div class=\"module\">\n      <aside-statistic />\n    </div>\n    <div class=\"module\">\n      <aside-article />\n    </div>\n    <client-only transition>\n      <div class=\"module mammon\">\n        <aside-mammon />\n      </div>\n    </client-only>\n    <div class=\"module\">\n      <aside-calendar />\n    </div>\n    <div :id=\"ASIDE_STICKY_ELEMENT_ID\" class=\"aside-sticky-box\">\n      <div class=\"module mammon-square\">\n        <client-only>\n          <Adsense\n            ins-style=\"display:inline-block;width:250px;height:250px\"\n            data-ad-slot=\"6138120718\"\n            class=\"content\"\n          />\n        </client-only>\n      </div>\n      <div class=\"module\">\n        <client-only v-if=\"isArticlePage\">\n          <aside-anchor class=\"sticky-module\" />\n        </client-only>\n        <aside-tag class=\"sticky-module\" v-else />\n      </div>\n    </div>\n  </aside>\n</template>\n\n<script lang=\"ts\">\n  import { useRoute } from 'vue-router'\n  import { defineComponent, ref, computed, onMounted, onBeforeUnmount, nextTick } from 'vue'\n  import { ASIDE_ELEMENT_ID, MAIN_CONTENT_ELEMENT_ID } from '/@/constants/anchor'\n  import { isArticleDetail } from '/@/transforms/route'\n  import AsideSearch from './search.vue'\n  import AsideStatistic from './statistic.vue'\n  import AsideArticle from './article.vue'\n  import AsideMammon from './mammon.vue'\n  import AsideTag from './tag.vue'\n  import AsideAnchor from './anchor.vue'\n  import AsideCalendar from './calendar.vue'\n\n  const ASIDE_STICKY_ELEMENT_ID = 'aside-sticky-module'\n\n  export default defineComponent({\n    name: 'DesktopAside',\n    components: {\n      AsideSearch,\n      AsideStatistic,\n      AsideArticle,\n      AsideMammon,\n      AsideCalendar,\n      AsideTag,\n      AsideAnchor\n    },\n    setup() {\n      const route = useRoute()\n      const isArticlePage = computed(() => isArticleDetail(route.name))\n\n      // polyfill sticky event\n      let stickyEvents: any = null\n      const element = ref<HTMLDivElement>(null as any)\n\n      const handleStickyStateChange = (event) => {\n        // workaround: when (main container height >= aside height) & isSticky -> render sticky ad\n        const asideElementHeight = element.value.clientHeight\n        const targetElement = document.getElementById(MAIN_CONTENT_ELEMENT_ID)?.children?.[0]\n        if (targetElement) {\n          const mainContentElementHeight = targetElement.clientHeight\n          const isFeasible = mainContentElementHeight >= asideElementHeight\n          // console.log(isFeasible && event.detail.isSticky)\n        }\n      }\n\n      onMounted(() => {\n        nextTick(() => {\n          stickyEvents = new window.$StickyEvents({\n            enabled: true,\n            stickySelector: `#${ASIDE_STICKY_ELEMENT_ID}`\n          })\n          stickyEvents.stickyElements?.[0]?.addEventListener(\n            window.$StickyEvents.CHANGE,\n            handleStickyStateChange\n          )\n        })\n      })\n\n      onBeforeUnmount(() => {\n        stickyEvents.stickyElements?.[0]?.removeEventListener(\n          window.$StickyEvents.CHANGE,\n          handleStickyStateChange\n        )\n        stickyEvents.disableEvents(false)\n        stickyEvents = null\n      })\n\n      return {\n        isArticlePage,\n        ASIDE_ELEMENT_ID,\n        ASIDE_STICKY_ELEMENT_ID,\n        element\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .desktop-aside {\n    display: block;\n    padding: 0;\n    width: $aside-width;\n\n    .module {\n      margin-bottom: $lg-gap;\n      @include radius-box($sm-radius);\n      @include common-bg-module();\n\n      &.mammon {\n        width: 100%;\n      }\n\n      &.mammon-square {\n        height: $aside-width;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n\n        .content {\n          height: 250px;\n          width: 250px;\n          overflow: hidden;\n        }\n      }\n\n      .sticky-module {\n        max-height: calc(100vh - 250px - #{$header-height + $lg-gap * 4});\n      }\n    }\n\n    .aside-sticky-box {\n      position: sticky;\n      top: $header-height + $lg-gap;\n      width: $aside-width;\n    }\n  }\n</style>\n","<template>\n  <header :id=\"HEADER_ELEMENT_ID\" class=\"header\" :class=\"{ 'enable-nav': isEnabledNav }\">\n    <div class=\"header-container container\">\n      <div class=\"header-header\">\n        <uimage cdn src=\"/images/logo.svg\" class=\"header-logo\" :alt=\"META.title\" />\n        <webfont class=\"header-slogan\">\n          <i18n :k=\"LanguageKey.APP_SLOGAN\" />\n        </webfont>\n        <router-link\n          to=\"/\"\n          class=\"header-link\"\n          :title=\"META.title\"\n          @mousedown=\"handleRootNavEvent\"\n        />\n      </div>\n      <div class=\"toolbox\">\n        <button class=\"button menu\" v-if=\"isEnabledNav\">\n          <i class=\"iconfont icon-top-menu\"></i>\n        </button>\n        <button class=\"button language\" title=\"Switch language\" @click=\"tooggleLanguage\">\n          {{ language || '-' }}\n        </button>\n        <button class=\"button theme\" :class=\"theme\" @click=\"toggleTheme\">\n          <i class=\"iconfont\" :class=\"themeIcon\"></i>\n        </button>\n      </div>\n    </div>\n    <div class=\"header-nav\">\n      <nav class=\"nav-list container\">\n        <template v-for=\"(menu, index) in menus\" :key=\"menu.id\">\n          <span v-if=\"index > 0\" class=\"divider\"></span>\n          <ulink class=\"item\" :class=\"menu.id\" :to=\"menu.route\" :href=\"menu.url\">\n            <uimage v-if=\"menu.imageIcon\" class=\"image-icon\" :src=\"menu.imageIcon\" />\n            <i v-else-if=\"menu.icon\" class=\"font-icon iconfont\" :class=\"menu.icon\"></i>\n            <webfont class=\"text\" bolder :uppercase=\"!menu.disabledUppercase\">\n              <i18n :k=\"menu.i18nKey\" />\n            </webfont>\n            <span v-if=\"menu.hot\" class=\"superscript\">\n              <i class=\"iconfont icon-hot-fill\"></i>\n            </span>\n            <span v-if=\"menu.newWindow\" class=\"new-window\">\n              <i class=\"iconfont icon-new-window-s\"></i>\n            </span>\n          </ulink>\n        </template>\n      </nav>\n    </div>\n  </header>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { LanguageKey } from '/@/language'\n  import { Theme } from '/@/composables/theme'\n  import { HEADER_ELEMENT_ID } from '/@/constants/anchor'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { META } from '/@/config/app.config'\n  import { menus } from './menu'\n\n  export default defineComponent({\n    name: 'DesktopHeader',\n    setup() {\n      const { i18n, gtag, theme, globalState } = useEnhancer()\n      // enable header nav bar when full page layout\n      const isEnabledNav = computed(() => !globalState.layoutColumn.value.isNormal)\n\n      const themeValue = theme.theme\n      const themeIcon = computed(() => {\n        const themeIconMap = {\n          [Theme.Light]: 'icon-sun',\n          [Theme.Dark]: 'icon-moon'\n        }\n        return themeIconMap[themeValue.value]\n      })\n\n      const toggleTheme = () => {\n        theme.toggle()\n        gtag?.event('switch_theme', {\n          event_category: GAEventCategories.Widget,\n          event_label: theme.theme.value\n        })\n      }\n\n      const tooggleLanguage = () => {\n        i18n.toggle()\n        gtag?.event('switch_language', {\n          event_category: GAEventCategories.Widget,\n          event_label: i18n.l.value?.name\n        })\n      }\n\n      const handleRootNavEvent = () => {\n        gtag?.event('root_header_home_nav', {\n          event_category: GAEventCategories.Universal\n        })\n      }\n\n      return {\n        menus,\n        META,\n        HEADER_ELEMENT_ID,\n        LanguageKey,\n        isEnabledNav,\n        handleRootNavEvent,\n        t: i18n.t,\n        language: i18n.language,\n        tooggleLanguage,\n        theme: themeValue,\n        themeIcon,\n        toggleTheme\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .header {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: $header-height;\n    z-index: $z-index-header;\n    background-color: $module-bg;\n    border-bottom: 1px solid $module-bg-darker-2;\n    @include backdrop-blur(5px);\n\n    &.enable-nav:hover {\n      .header-nav {\n        @include visible();\n      }\n    }\n\n    .header-container {\n      height: 100%;\n      display: flex;\n      justify-content: space-between;\n\n      .header-header {\n        height: 100%;\n        display: flex;\n        position: relative;\n        align-items: center;\n        padding-left: $sm-gap;\n        width: 29em;\n        overflow: hidden;\n\n        @keyframes logo-blink {\n          0% {\n            mask-position: -30%;\n          }\n          100% {\n            mask-position: 666%;\n          }\n        }\n\n        .header-logo {\n          width: 11rem;\n          margin-right: $gap * 4;\n          filter: $theme-logo-rotate;\n          .logo-st {\n            fill: $primary;\n          }\n        }\n\n        .header-slogan {\n          color: $primary;\n          font-size: $font-size-h5;\n        }\n\n        .header-link {\n          position: absolute;\n          width: 100%;\n          height: 100%;\n        }\n      }\n\n      .toolbox {\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        justify-content: center;\n        opacity: 0.6;\n        @include visibility-transition();\n        &:hover {\n          opacity: 1;\n        }\n\n        .button {\n          position: relative;\n          display: block;\n          text-transform: uppercase;\n          margin: 0 $gap;\n          width: 2rem;\n          height: 2rem;\n          &.menu {\n            cursor: none;\n          }\n          &.language {\n            font-weight: bold;\n          }\n        }\n      }\n    }\n\n    .header-nav {\n      width: 100%;\n      height: 4rem;\n      background-color: $primary-lighter;\n      @include hidden();\n      @include visibility-transition();\n\n      .nav-list {\n        height: 100%;\n        display: flex;\n        justify-content: space-evenly;\n        align-items: center;\n\n        .divider {\n          height: 6px;\n          width: 1px;\n          background-color: $module-bg-translucent;\n        }\n\n        .item {\n          position: relative;\n          display: inline-flex;\n          align-items: center;\n          color: $text-reversal;\n          opacity: 0.7;\n          @include visibility-transition();\n          &:hover {\n            opacity: 1;\n          }\n          &.link-active {\n            .text {\n              padding-top: 4px;\n              padding-bottom: 2px;\n              border-bottom: 2px solid;\n            }\n          }\n\n          .font-icon {\n            margin-right: $sm-gap;\n          }\n\n          .image-icon {\n            width: 1em;\n            height: 1em;\n            margin-right: $sm-gap;\n            border-radius: $xs-radius;\n          }\n\n          .superscript {\n            margin-left: $xs-gap;\n          }\n\n          .new-window {\n            margin-left: $xs-gap;\n            margin-right: -$xs-gap;\n            margin-top: -$sm-gap;\n            font-size: $font-size-small - 3;\n            opacity: 0.8;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <container tag=\"footer\" :id=\"FOOTER_ELEMENT_ID\" class=\"footer\">\n    <ulink class=\"sitemap-btn\" :href=\"VALUABLE_LINKS.SITE_MAP\">sitemap.xml</ulink>\n    <divider type=\"vertical\" />\n    <i18n zh=\"由 \" en=\"Powered By \" />\n    <ulink class=\"item\" :href=\"VALUABLE_LINKS.GITHUB_BLOG_STAR_LIST\">NodePress</ulink>\n    <i18n zh=\"、\" en=\", \" />\n    <ulink class=\"item\" :href=\"VALUABLE_LINKS.GITHUB_SURMON_ME\">Vue</ulink>\n    <i18n zh=\" 和 日月星辰 强力驱动\" en=\"\" />\n    <divider type=\"vertical\" />\n    <a class=\"statement\" href=\"javascript:void(0)\" @click=\"handleStatementModal\">\n      <i18n zh=\"周知\" en=\"FAQ\" />\n    </a>\n    <divider type=\"vertical\" />\n    <ulink :href=\"VALUABLE_LINKS.UPTIME_STATUS\">\n      <i18n zh=\"实态\" en=\"STATUS\" />\n    </ulink>\n  </container>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { FOOTER_ELEMENT_ID } from '/@/constants/anchor'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n\n  export default defineComponent({\n    name: 'DesktopFooter',\n    setup() {\n      const { globalState, gtag } = useEnhancer()\n      const handleStatementModal = () => {\n        globalState.toggleSwitcher('statement', true)\n        gtag?.event('statement_modal', {\n          event_category: GAEventCategories.Universal\n        })\n      }\n\n      return {\n        FOOTER_ELEMENT_ID,\n        VALUABLE_LINKS,\n        handleStatementModal\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .footer {\n    display: flex;\n    align-items: center;\n    height: $footer-height;\n    text-align: center;\n    text-transform: uppercase;\n    font-size: $font-size-h6;\n    color: $text-secondary;\n    @include common-bg-module();\n\n    a:hover {\n      @include text-underline();\n    }\n  }\n</style>\n","<template>\n  <div class=\"desktop-main\">\n    <background />\n    <wallflower />\n    <client-only>\n      <popup :visible=\"switcher.sponsor\" @close=\"handleSponsorModalClose\">\n        <div class=\"sponsor-modal\">\n          <div class=\"sponsor\">\n            <sponsor-tabs class=\"tabs\" :state=\"sponsorState\" :hide-title=\"true\" />\n            <sponsor-provider class=\"provider\" :state=\"sponsorState\" :max-sponsors=\"8\" />\n          </div>\n        </div>\n      </popup>\n      <popup\n        :visible=\"switcher.feedback\"\n        :mask-close=\"false\"\n        :scroll-close=\"false\"\n        @close=\"handleFeedbackModalClose\"\n      >\n        <feedback @close=\"handleFeedbackModalClose\" />\n      </popup>\n      <popup :visible=\"switcher.statement\" :scroll-close=\"false\" @close=\"handleStatementModalClose\">\n        <statement />\n      </popup>\n    </client-only>\n    <template v-if=\"!layoutColumn.isFull\">\n      <share class=\"main-share\" />\n      <wallpaper />\n      <toolbox />\n      <client-only>\n        <music-player-handle />\n      </client-only>\n    </template>\n    <header-view />\n    <main\n      :id=\"MAIN_ELEMENT_ID\"\n      class=\"main-container\"\n      :class=\"{ 'full-page': layoutColumn.isFull }\"\n    >\n      <!-- MARK: keep order > long content > flicker -->\n      <nav-view class=\"nav-view\" v-if=\"layoutColumn.isNormal\" />\n      <aside-view class=\"aside-view\" v-if=\"layoutColumn.isNormal\" />\n      <div\n        :id=\"MAIN_CONTENT_ELEMENT_ID\"\n        class=\"main-view\"\n        :class=\"{\n          'layout-normal': layoutColumn.isNormal,\n          'layout-wide': layoutColumn.isWide,\n          'layout-full': layoutColumn.isFull\n        }\"\n      >\n        <!-- unuse suspense -> async route component -> can't extract style to css file -->\n        <router-view v-slot=\"{ Component, route }\">\n          <div class=\"router-view\">\n            <transition name=\"page\" mode=\"out-in\" @before-enter=\"handlePageTransitionDone\">\n              <suspense>\n                <component :is=\"Component\" :key=\"route.name\" />\n              </suspense>\n            </transition>\n          </div>\n        </router-view>\n      </div>\n    </main>\n    <footer-view class=\"footer-view\" />\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, onMounted } from 'vue'\n  import { MAIN_ELEMENT_ID, MAIN_CONTENT_ELEMENT_ID } from '/@/constants/anchor'\n  import { LanguageKey } from '/@/language'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useMusic } from '/@/composables/music'\n  import { useWallpaperStore } from '/@/stores/wallpaper'\n  import { getLayoutByRouteMeta } from '/@/transforms/layout'\n  import MusicPlayerHandle from '/@/components/widget/music-player/handle.vue'\n  import Wallflower from '/@/components/widget/wallflower/garden.vue'\n  import Wallpaper from '/@/components/widget/wallpaper/switcher.vue'\n  import Background from '/@/components/widget/background.vue'\n  import { useSponsorState } from '/@/components/widget/sponsor/state'\n  import SponsorTabs from '/@/components/widget/sponsor/tabs.vue'\n  import SponsorProvider from '/@/components/widget/sponsor/provider.vue'\n  import Share from '/@/components/widget/share.vue'\n  import Toolbox from '/@/components/widget/toolbox.vue'\n  import Feedback from '/@/components/widget/feedback.vue'\n  import Statement from '/@/components/widget/statement.vue'\n  import NavView from './nav.vue'\n  import AsideView from './aside/index.vue'\n  import HeaderView from './header.vue'\n  import FooterView from './footer.vue'\n\n  export default defineComponent({\n    name: 'DesktopMain',\n    components: {\n      Share,\n      Feedback,\n      Wallpaper,\n      Statement,\n      SponsorTabs,\n      SponsorProvider,\n      MusicPlayerHandle,\n      Toolbox,\n      Wallflower,\n      Background,\n      HeaderView,\n      FooterView,\n      AsideView,\n      NavView\n    },\n    setup() {\n      const sponsorState = useSponsorState()\n      const wallpaperStore = useWallpaperStore()\n      const { route, globalState } = useEnhancer()\n      const handlePageTransitionDone = () => {\n        globalState.setLayoutColumn(getLayoutByRouteMeta(route.meta))\n      }\n      const handleSponsorModalClose = () => {\n        globalState.toggleSwitcher('sponsor', false)\n      }\n      const handleFeedbackModalClose = () => {\n        globalState.toggleSwitcher('feedback', false)\n      }\n      const handleStatementModalClose = () => {\n        globalState.toggleSwitcher('statement', false)\n      }\n\n      onMounted(() => {\n        // bing wallpaper\n        wallpaperStore.fetch()\n        // music player\n        useMusic().init()\n      })\n\n      return {\n        LanguageKey,\n        MAIN_ELEMENT_ID,\n        MAIN_CONTENT_ELEMENT_ID,\n        switcher: globalState.switcher,\n        layoutColumn: globalState.layoutColumn,\n        sponsorState,\n        handlePageTransitionDone,\n        handleSponsorModalClose,\n        handleFeedbackModalClose,\n        handleStatementModalClose\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .sponsor-modal {\n    width: 50rem;\n    height: 28rem;\n    display: flex;\n    flex-direction: column;\n    background-color: $module-bg-lighter !important;\n\n    .sponsor {\n      flex-grow: 1;\n      display: flex;\n      flex-direction: column;\n\n      .tabs {\n        background-color: $module-bg-lighter;\n        border-bottom: 1px solid $module-bg-darker-1;\n      }\n\n      .provider {\n        flex: 1;\n      }\n    }\n  }\n\n  .desktop-main {\n    padding-top: $header-height + $lg-gap;\n\n    @media screen and (max-width: 1200px) {\n      #theme,\n      #language,\n      .main-share {\n        display: none !important;\n      }\n    }\n\n    .main-share {\n      position: fixed;\n      top: 12%;\n      left: 0;\n      height: auto;\n      max-width: 4rem;\n      display: flex;\n      flex-direction: column;\n      opacity: 0.4;\n\n      &:hover {\n        opacity: 1;\n      }\n\n      ::v-deep(.share-ejector) {\n        $height: 2.1em;\n        width: 3rem;\n        height: $height;\n        line-height: $height;\n        font-size: $font-size-h4;\n        border-top-right-radius: $xs-radius;\n        border-bottom-right-radius: $xs-radius;\n        transition: width $transition-time-fast;\n        &:hover {\n          width: 120%;\n        }\n      }\n    }\n\n    .main-container {\n      position: relative;\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between;\n      width: $container-width;\n      &.full-page {\n        width: 100%;\n      }\n\n      .nav-view {\n        order: 1;\n        flex-shrink: 0;\n        margin-right: $lg-gap;\n      }\n\n      .aside-view {\n        order: 3;\n        flex-shrink: 0;\n        margin-left: $lg-gap;\n      }\n\n      .main-view {\n        order: 2;\n        flex-grow: 1;\n        position: relative;\n        overflow: hidden;\n        transition: none;\n\n        &:-moz-full-screen {\n          overflow-y: auto;\n        }\n\n        &:-webkit-full-screen {\n          overflow-y: auto;\n        }\n\n        &:fullscreen {\n          overflow-y: auto;\n        }\n\n        &.layout-normal {\n          /* flex-grow: 1; */\n        }\n\n        &.layout-wide {\n          flex-grow: unset;\n          width: 100%;\n          margin: 0;\n        }\n\n        &.layout-full {\n          flex-grow: unset;\n          width: 100%;\n          margin: -$lg-gap 0;\n        }\n      }\n    }\n\n    .footer-view {\n      margin-top: $lg-gap;\n    }\n  }\n</style>\n","<template>\n  <header class=\"header\">\n    <div class=\"search\" :class=\"{ actived: searchState.open }\">\n      <input\n        class=\"input\"\n        ref=\"inputElement\"\n        autocomplete=\"off\"\n        type=\"text\"\n        maxlength=\"16\"\n        required\n        :placeholder=\"t(LanguageKey.SEARCH_PLACEHOLDER)\"\n        v-model.trim=\"searchState.keyword\"\n        @keyup.enter.stop.prevent=\"submitSearch\"\n      />\n      <span class=\"close\" @click.stop.prevent=\"cancelSearch\">\n        <i class=\"iconfont icon-cancel\"></i>\n      </span>\n    </div>\n    <transition name=\"module\">\n      <div v-if=\"searchState.open\" class=\"search-mask\" @click=\"cancelSearch\"></div>\n    </transition>\n    <nav class=\"navbar\">\n      <button class=\"navbar-menu\" @click.stop.prevent=\"handleMenuToggle\">\n        <i class=\"iconfont icon-menu\"></i>\n      </button>\n      <router-link to=\"/\" class=\"navbar-logo\">\n        <uimage class=\"image\" cdn src=\"/images/logo.svg\" />\n      </router-link>\n      <button class=\"navbar-search\" @click.stop.prevent=\"openSearch\">\n        <i class=\"iconfont icon-search\"></i>\n      </button>\n    </nav>\n  </header>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, reactive, ref, watch, onMounted, nextTick } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { RouteName } from '/@/app/router'\n  import { LanguageKey } from '/@/language'\n  import { isSearchFlow } from '/@/transforms/route'\n\n  export enum MobileHeaderEvents {\n    Open = 'open',\n    Close = 'close'\n  }\n\n  export default defineComponent({\n    name: 'MobileHeader',\n    props: {\n      opened: {\n        type: Boolean,\n        required: true\n      }\n    },\n    emits: [MobileHeaderEvents.Open, MobileHeaderEvents.Close],\n    setup(props, context) {\n      const { i18n, route, router } = useEnhancer()\n      const inputElement = ref<HTMLInputElement>(null as any)\n      const searchState = reactive({\n        open: false,\n        keyword: ''\n      })\n\n      onMounted(() => {\n        if (isSearchFlow(route.name as string)) {\n          searchState.keyword = route.params.keyword as string\n        }\n      })\n\n      const handleMenuToggle = () => {\n        context.emit(props.opened ? MobileHeaderEvents.Close : MobileHeaderEvents.Open)\n      }\n\n      const openSearch = () => {\n        searchState.open = true\n        nextTick(() => {\n          inputElement.value.focus()\n        })\n      }\n\n      const cancelSearch = () => {\n        searchState.open = false\n      }\n\n      const submitSearch = () => {\n        const keyword = searchState.keyword.trim()\n        if (keyword) {\n          router.push({\n            name: RouteName.SearchFlow,\n            params: { keyword }\n          })\n        }\n      }\n\n      watch(\n        () => router.currentRoute.value,\n        () => {\n          nextTick(() => {\n            cancelSearch()\n            context.emit(MobileHeaderEvents.Close)\n          })\n        }\n      )\n\n      return {\n        t: i18n.t,\n        LanguageKey,\n        searchState,\n        inputElement,\n        openSearch,\n        submitSearch,\n        cancelSearch,\n        handleMenuToggle\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .header {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: $mobile-header-height;\n    background-color: $module-bg;\n    z-index: $z-index-header;\n    @include backdrop-blur(5px);\n\n    .search-mask {\n      position: fixed;\n      z-index: $z-index-normal;\n      top: 0;\n      left: 0;\n      width: 100vw;\n      height: 100vh;\n      touch-action: none;\n      background-color: $module-bg-translucent;\n      @include backdrop-blur(3px);\n    }\n\n    .search {\n      position: absolute;\n      display: flex;\n      z-index: $z-index-normal + 1;\n      width: 100%;\n      height: $mobile-header-height;\n      top: 0;\n      left: 0;\n      opacity: 0;\n      background-color: $text-reversal;\n      transform: translateY(-100%);\n\n      > .input {\n        width: 80%;\n        height: 100%;\n        padding: 1em;\n      }\n\n      > .close {\n        width: 20%;\n        height: 100%;\n        line-height: $mobile-header-height;\n        text-align: center;\n      }\n\n      &.actived {\n        opacity: 1;\n        transform: translateY(0%);\n      }\n    }\n\n    .navbar {\n      width: 100%;\n      height: $mobile-header-height;\n      display: flex;\n      position: relative;\n      align-items: center;\n      justify-content: space-between;\n\n      .navbar-menu,\n      .navbar-search {\n        height: 100%;\n        width: 20%;\n        line-height: $mobile-header-height;\n        text-align: center;\n      }\n\n      .navbar-logo {\n        width: 30%;\n\n        .image {\n          filter: $theme-logo-rotate;\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <footer class=\"footer\">\n    <div class=\"footer-content\">©{{ year }}&nbsp;&nbsp;{{ title }}</div>\n  </footer>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { META } from '/@/config/app.config'\n  export default defineComponent({\n    name: 'MobileFooter',\n    setup() {\n      return {\n        title: META.title,\n        year: new Date().getFullYear()\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .footer {\n    margin: 0;\n    @include common-bg-module();\n\n    .footer-content {\n      width: 100%;\n      height: $mobile-footer-height;\n      line-height: $mobile-footer-height;\n      font-size: $font-size-h6;\n      text-align: center;\n      text-transform: uppercase;\n    }\n  }\n</style>\n","<template>\n  <aside class=\"aside\">\n    <div class=\"aside-user\">\n      <div class=\"avatar\">\n        <uimage :src=\"avatar\" :alt=\"author\" />\n      </div>\n      <div class=\"profile\">\n        <h3 class=\"name\">{{ author }}</h3>\n        <webfont class=\"slogan\">\n          <i18n :k=\"LanguageKey.APP_SLOGAN\" />\n        </webfont>\n      </div>\n    </div>\n    <div class=\"aside-tool\">\n      <div class=\"item\" @click=\"toggleTheme\">\n        <i class=\"iconfont\" :class=\"themeIcon\"></i>\n      </div>\n      <div class=\"item\" @click=\"tooggleLanguage\">\n        <i class=\"iconfont\" :class=\"languageIcon\"></i>\n      </div>\n    </div>\n    <div class=\"aside-nav\">\n      <nav class=\"nav-list\">\n        <router-link to=\"/\" class=\"item\">\n          <i class=\"iconfont icon-home\"></i>\n          <webfont bolder uppercase>\n            <i18n :k=\"LanguageKey.PAGE_HOME\" />\n          </webfont>\n        </router-link>\n        <router-link class=\"item\" :to=\"getCategoryFlowRoute(CategorySlug.Code)\">\n          <i class=\"iconfont icon-code\"></i>\n          <webfont bolder uppercase>\n            <i18n :k=\"LanguageKey.CATEGORY_CODE\" />\n          </webfont>\n        </router-link>\n        <router-link class=\"item\" :to=\"getCategoryFlowRoute(CategorySlug.Insight)\">\n          <i class=\"iconfont icon-insight\"></i>\n          <webfont bolder uppercase>\n            <i18n :k=\"LanguageKey.CATEGORY_INSIGHT\" />\n          </webfont>\n        </router-link>\n        <ulink class=\"item\" :href=\"VALUABLE_LINKS.GITHUB\">\n          <i class=\"iconfont icon-github\"></i>\n          <webfont bolder uppercase>\n            <i18n :k=\"LanguageKey.PAGE_GITHUB\" />\n          </webfont>\n          <span class=\"newscript\">\n            <i class=\"iconfont icon-new-window-s\"></i>\n          </span>\n        </ulink>\n        <router-link class=\"item\" :to=\"getPageRoute(RouteName.Archive)\">\n          <i class=\"iconfont icon-quill\"></i>\n          <webfont bolder uppercase>\n            <i18n :k=\"LanguageKey.PAGE_ARCHIVE\" />\n          </webfont>\n        </router-link>\n        <router-link class=\"item\" :to=\"getPageRoute(RouteName.About)\">\n          <i class=\"iconfont icon-swordsman\"></i>\n          <webfont bolder uppercase>\n            <i18n :k=\"LanguageKey.PAGE_ABOUT\" />\n          </webfont>\n        </router-link>\n        <router-link class=\"item guestbook\" :to=\"getPageRoute(RouteName.Guestbook)\">\n          <i class=\"iconfont icon-comment\"></i>\n          <webfont bolder uppercase>\n            <i18n :k=\"LanguageKey.PAGE_GUESTBOOK\" />\n          </webfont>\n        </router-link>\n        <router-link class=\"item app\" :to=\"getPageRoute(RouteName.App)\">\n          <uimage cdn class=\"icon\" src=\"/images/page-app/logo.png\" />\n          <webfont bolder uppercase>\n            <i18n :k=\"LanguageKey.PAGE_APP\" />\n          </webfont>\n        </router-link>\n      </nav>\n    </div>\n  </aside>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed } from 'vue'\n  import { Language, LanguageKey } from '/@/language'\n  import { RouteName, CategorySlug } from '/@/app/router'\n  import { Theme } from '/@/composables/theme'\n  import { useUniversalFetch } from '/@/universal'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useAdminInfoStore } from '/@/stores/basic'\n  import { getDefaultAvatar } from '/@/transforms/avatar'\n  import { getPageRoute, getCategoryFlowRoute } from '/@/transforms/route'\n  import { VALUABLE_LINKS, META } from '/@/config/app.config'\n\n  export default defineComponent({\n    name: 'MobileAside',\n    setup() {\n      const { theme, i18n } = useEnhancer()\n      const adminInfoStore = useAdminInfoStore()\n      const avatar = computed(() => adminInfoStore.data?.avatar || getDefaultAvatar())\n\n      const themeIcon = computed(() => {\n        const themeIconMap = {\n          [Theme.Light]: 'icon-sun',\n          [Theme.Dark]: 'icon-moon'\n        }\n        return themeIconMap[theme.theme.value]\n      })\n\n      const languageIcon = computed(() => {\n        const languageIconMap = {\n          [Language.Chinese]: 'icon-chinese',\n          [Language.English]: 'icon-english'\n        }\n        return languageIconMap[i18n.language.value]\n      })\n\n      useUniversalFetch(() => adminInfoStore.fetch())\n\n      return {\n        VALUABLE_LINKS,\n        LanguageKey,\n        RouteName,\n        CategorySlug,\n        getPageRoute,\n        getCategoryFlowRoute,\n        avatar,\n        author: META.author,\n        themeIcon,\n        languageIcon,\n        toggleTheme: theme.toggle,\n        tooggleLanguage: i18n.toggle\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .aside {\n    $border-color: darken($mobile-aside-bg, 3%);\n    display: block;\n    overflow: auto;\n    position: relative;\n    width: 100%;\n    height: 100%;\n    margin: 0;\n    color: $white;\n\n    .aside-user {\n      $size: 58px;\n      width: 100%;\n      display: flex;\n      align-items: flex-start;\n      padding: $gap * 2;\n      border-bottom: 1px solid $border-color;\n\n      .avatar {\n        width: $size;\n        height: $size;\n        flex-shrink: 0;\n\n        img {\n          max-width: 100%;\n          border: 2px solid $white;\n          @include radius-box(100%);\n        }\n      }\n\n      .profile {\n        height: $size;\n        display: inline-flex;\n        flex-direction: column;\n        justify-content: center;\n        margin-left: $lg-gap;\n\n        .name {\n          font-weight: bold;\n          margin-top: 0;\n          margin-bottom: $sm-gap;\n        }\n\n        .slogan {\n          margin: 0;\n          max-width: 10rem;\n          color: $surmon;\n          @include text-overflow();\n        }\n      }\n    }\n\n    .aside-tool {\n      padding: $gap 0;\n      display: flex;\n      border-bottom: 1px solid $border-color;\n\n      .item {\n        width: 50%;\n        display: inline-flex;\n        justify-content: center;\n        align-items: center;\n        font-size: $font-size-h2;\n      }\n    }\n\n    .aside-nav {\n      width: 100%;\n      margin-top: $sm-gap;\n\n      .nav-list {\n        padding: 0;\n        margin: 0;\n\n        .item {\n          display: flex;\n          align-items: center;\n          width: 100%;\n          height: 3em;\n          margin-bottom: 0.5em;\n          padding: 0 1em;\n          border: none;\n          text-decoration: none;\n          color: $white;\n          &:last-child {\n            margin-bottom: 0;\n          }\n\n          &.link-active {\n            color: $primary;\n            font-weight: bold;\n            background-color: $body-bg;\n          }\n\n          &.app {\n            display: flex;\n            align-items: center;\n            margin-top: $gap;\n            color: $surmon;\n            .icon {\n              width: 1em;\n              height: 1em;\n              margin-right: 1em;\n              border-radius: $xs-radius;\n            }\n          }\n\n          .iconfont {\n            width: 1em;\n            margin-right: 1em;\n            display: inline-block;\n            font-weight: normal;\n          }\n\n          .newscript {\n            margin-left: $sm-gap;\n            font-size: $font-size-small;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div class=\"mobile-main\">\n    <div class=\"asider\" :class=\"{ opened: isOpenedAside }\">\n      <aside-view class=\"aside\" />\n    </div>\n    <div class=\"main\" :class=\"{ opened: isOpenedAside }\">\n      <div v-if=\"isOpenedAside\" class=\"close-mask\" @click=\"closeAside\" />\n      <header-view :opened=\"isOpenedAside\" @close=\"closeAside\" @open=\"openAside\" />\n      <main class=\"main-container\">\n        <router-view name=\"mobile\" v-slot=\"{ Component, route }\">\n          <div class=\"route-view\" v-if=\"route.meta.responsive\">\n            <component :is=\"Component\" :key=\"route.name\" />\n          </div>\n          <div class=\"fallback\" v-else>\n            <i class=\"iconfont icon-desktop\"></i>\n            <p class=\"text\">\n              <i18n zh=\"请在 PC 端访问以获得最佳体验\" en=\"This page only support visit on PC\" />\n            </p>\n            <a class=\"link\" :href=\"pageURL\">{{ pageURL }}</a>\n          </div>\n        </router-view>\n      </main>\n      <footer-view />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, computed, watch } from 'vue'\n  import { onClient } from '/@/universal'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { getPageURL } from '/@/transforms/url'\n  import HeaderView from './header.vue'\n  import FooterView from './footer.vue'\n  import AsideView from './aside.vue'\n\n  export default defineComponent({\n    name: 'MobileMain',\n    components: {\n      HeaderView,\n      FooterView,\n      AsideView\n    },\n    setup() {\n      const { route } = useEnhancer()\n      const pageURL = computed(() => getPageURL(route.fullPath))\n\n      const isOpenedAside = ref(false)\n      const openAside = () => (isOpenedAside.value = true)\n      const closeAside = () => (isOpenedAside.value = false)\n\n      watch(isOpenedAside, (opened) => {\n        onClient(() => {\n          document.body.style.overflow = opened ? 'hidden' : 'auto'\n        })\n      })\n\n      return {\n        pageURL,\n        isOpenedAside,\n        openAside,\n        closeAside\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .mobile-main {\n    color: $text;\n    background-color: $module-bg-hover;\n    $aside-width: 66%;\n\n    .asider {\n      width: $aside-width;\n      height: 100%;\n      position: fixed;\n      top: 0;\n      left: 0;\n      background-color: $mobile-aside-bg;\n      transform: translate3d(-100%, 0, 0);\n      transition: $mobile-aside-transition;\n      .aside {\n        opacity: 0;\n        transform: scale(0.8, 0.8);\n        transition: $mobile-aside-transition;\n      }\n\n      &.opened {\n        transform: translate3d(0, 0, 0);\n        overflow: hidden;\n        -webkit-overflow-scrolling: touch;\n        .aside {\n          opacity: 1;\n          transform: scale(1, 1);\n          transition: $mobile-aside-transition;\n        }\n      }\n    }\n\n    .main {\n      min-height: 100vh;\n      position: relative;\n      transition: $mobile-aside-transition;\n\n      &.opened {\n        transform: translate3d($aside-width, 0, 0);\n      }\n\n      .close-mask {\n        position: absolute;\n        width: 100vw;\n        height: 100%;\n        top: 0;\n        right: 0;\n        z-index: $z-index-top;\n        background-color: $module-bg-translucent;\n        @include backdrop-blur(3px);\n      }\n\n      .main-container {\n        position: relative;\n        overflow: hidden;\n        width: 100%;\n        min-height: calc(100vh - $mobile-header-height);\n        margin: 0;\n        padding: $lg-gap $gap;\n        padding-top: $mobile-header-height + $lg-gap;\n        transition: width 0.35s;\n        display: flex;\n\n        .fallback {\n          width: 100%;\n          padding-bottom: 6rem; // for middle\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n\n          .iconfont {\n            color: $text-divider;\n            font-size: 12rem;\n          }\n\n          .text {\n            font-size: $font-size-h4;\n            margin-bottom: $lg-gap;\n          }\n\n          .link {\n            color: $text-disabled;\n            @include text-underline(0.4em);\n          }\n        }\n\n        .route-view {\n          width: 100%;\n        }\n      }\n    }\n  }\n</style>\n","<template>\n  <div v-cloak class=\"app-root\">\n    <client-only>\n      <progress-bar :spin=\"!isMobile\" />\n      <emoji-rain />\n      <popup-root />\n    </client-only>\n    <captured>\n      <responsive>\n        <template #desktop><desktop-main /></template>\n        <template #mobile><mobile-main /></template>\n      </responsive>\n    </captured>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import EmojiRain from '/@/components/widget/emoji-rain.vue'\n  import Captured from '/@/components/root/captured.vue'\n  import DesktopMain from '/@/components/layout/desktop/main.vue'\n  import MobileMain from '/@/components/layout/mobile/main.vue'\n\n  export default defineComponent({\n    name: 'App',\n    components: {\n      EmojiRain,\n      Captured,\n      DesktopMain,\n      MobileMain\n    },\n    setup() {\n      const { isMobile } = useEnhancer()\n      return { isMobile }\n    }\n  })\n</script>\n\n<style lang=\"scss\">\n  @import 'src/styles/variables.scss';\n\n  .app-root {\n    &[v-cloak] {\n      color: transparent;\n      -webkit-text-fill-color: transparent;\n    }\n  }\n</style>\n","/**\n * @file App main logic\n * @module app.main\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { CreateAppFunction, computed } from 'vue'\nimport { RouterHistory } from 'vue-router'\nimport API_CONFIG from '/@/config/api.config'\nimport { META } from '/@/config/app.config'\nimport { Language, LanguageKey, languages } from '/@/language'\nimport { rebirthSSRContext } from '/@/universal'\nimport { createUniversalStore } from '/@/stores'\nimport { createI18n } from '/@/composables/i18n'\nimport { createMeta } from '/@/composables/meta'\nimport { createTheme, Theme } from '/@/composables/theme'\nimport { NODE_ENV } from '/@/environment'\nimport { isSSR } from './environment'\nimport { createUniversalRouter, RouterCreatorOptions } from './router'\nimport { createGlobalState, LayoutColumn } from './state'\nimport component from './component'\nimport App from './index.vue'\n\nconsole.info(`[APP INITED]:`, { NODE_ENV, mode: isSSR ? 'SSR' : 'SPA' }, API_CONFIG)\n\nexport interface ICreatorContext {\n  appCreator: CreateAppFunction<Element>\n  historyCreator(base?: string): RouterHistory\n  routerBeforeMiddleware?(globalState: any): RouterCreatorOptions['beforeMiddleware']\n  routerAfterMiddleware?(globalState: any): RouterCreatorOptions['afterMiddleware']\n  layout?: LayoutColumn\n  theme: Theme\n  language: string\n  userAgent: string\n}\n\nexport type VueApp = ReturnType<typeof createVueApp>\nexport const createVueApp = (context: ICreatorContext) => {\n  // 1. create app\n  const app = context.appCreator(App)\n  // 2. ssr context\n  const ssrContext = rebirthSSRContext(app)\n  // 3. global state\n  const globalState = createGlobalState({\n    userAgent: context.userAgent || '',\n    language: context.language || '',\n    layout: context.layout ?? LayoutColumn.Normal\n  })\n  // 4. store\n  const store = createUniversalStore({ globalState })\n  // 5. router\n  const router = createUniversalRouter({\n    beforeMiddleware: context.routerBeforeMiddleware?.(globalState),\n    afterMiddleware: context.routerAfterMiddleware?.(globalState),\n    history: context.historyCreator()\n  })\n  // 6. composables\n  const meta = createMeta({\n    titler: (title: string) => `${title} | ${META.title}`\n  })\n  const theme = createTheme(context.theme)\n  const i18n = createI18n({\n    default: globalState.userAgent.isZhUser ? Language.Chinese : Language.English,\n    keys: Object.values(LanguageKey),\n    languages\n  })\n\n  // root attrbute\n  meta.addHeadObjs(\n    computed(() => ({\n      htmlAttrs: {\n        'data-theme': theme.theme.value,\n        'data-device': globalState.userAgent.isMobile ? 'mobile' : 'desktop'\n      }\n    }))\n  )\n\n  // handle global error\n  app.config.errorHandler = (error) => globalState.setRenderError(error)\n  // handle router error https://next.router.vuejs.org/api/#onerror\n  router.onError(globalState.setRenderError)\n\n  // handle router validate error & 404 error\n  // https://next.router.vuejs.org/guide/advanced/navigation-guards.html#optional-third-argument-next\n  router.beforeEach((to, _, next) => {\n    if (to.meta.validate) {\n      ;(to.meta as any)\n        .validate({ route: to, i18n, store })\n        .then(next)\n        .catch((error) => {\n          const newError: any = new Error()\n          newError.code = error.code\n          newError.message = error.message\n          // next(error) > router error > global state error\n          next(newError)\n        })\n    } else {\n      next()\n    }\n  })\n\n  app.use(router)\n  app.use(store)\n  app.use(globalState)\n  app.use(i18n)\n  app.use(meta)\n  app.use(theme)\n  app.use(component)\n\n  return {\n    app,\n    router,\n    store,\n    globalState,\n    i18n,\n    meta,\n    theme,\n    component\n  }\n}\n","/**\n * @file Google Adsense\n * @module composable.adsense\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { App, defineComponent, h } from 'vue'\nimport { useEnhancer } from '/@/app/enhancer'\nimport { LanguageKey } from '/@/language'\nimport { loadScript } from '/@/utils/scripter'\n\ndeclare global {\n  interface Window {\n    adsbygoogle: any[]\n  }\n}\n\nexport interface AdSenseConfig {\n  ID: string\n  enabledAutoAD?: boolean\n}\n\nconst ADS_SCRIPT = '//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js'\n\nconst getComponent = (clientID: string) =>\n  defineComponent({\n    name: 'Adsense',\n    props: {\n      class: String,\n      insClass: {\n        type: String,\n        default: ''\n      },\n      insStyle: {\n        type: String,\n        default: 'display:block;'\n      },\n      dataAdClient: String,\n      dataAdSlot: String,\n      dataAdLayoutKey: String,\n      dataAdTest: String,\n      dataAdFormat: String,\n      dataFullWidthResponsive: [Boolean, String]\n    },\n    setup(props) {\n      const { i18n } = useEnhancer()\n\n      return () => {\n        const {\n          class: rootClass,\n          insClass,\n          insStyle,\n          dataAdClient,\n          dataAdSlot,\n          dataAdLayoutKey,\n          dataAdTest,\n          dataAdFormat,\n          dataFullWidthResponsive,\n          ...restAttrs\n        } = props\n\n        return h(\n          'div',\n          {\n            class: ['mammon-box', rootClass],\n            placeholder: i18n.t(LanguageKey.AD)\n          },\n          [\n            h('script', {\n              type: 'text/javascript',\n              async: 'true',\n              src: ADS_SCRIPT\n            }),\n            h('ins', {\n              class: ['adsbygoogle', insClass],\n              style: insStyle,\n              'data-ad-client': dataAdClient || clientID,\n              'data-ad-slot': dataAdSlot,\n              'data-ad-layout-key': dataAdLayoutKey,\n              'data-ad-test': dataAdTest,\n              'data-ad-format': dataAdFormat,\n              'data-full-width-responsive': dataFullWidthResponsive,\n              ...restAttrs\n            }),\n            h('script', `(adsbygoogle = window.adsbygoogle || []).push({})`)\n          ]\n        )\n      }\n    }\n  })\n\nexport default {\n  install(app: App, adsenseConfig: AdSenseConfig) {\n    const component = getComponent(adsenseConfig.ID)\n    app.component(component.name, component)\n\n    if (adsenseConfig.enabledAutoAD) {\n      loadScript(ADS_SCRIPT, { async: true }).then(() => {\n        const adsbygoogle = window.adsbygoogle || []\n        adsbygoogle.push({\n          google_ad_client: adsenseConfig.ID,\n          enable_page_level_ads: true\n        })\n      })\n    }\n  }\n}\n","<template>\n  <div id=\"popup\" class=\"popup\" :class=\"{ mobile: isMobile, dark: isDarkTheme }\">\n    <transition name=\"module\">\n      <div class=\"mask\" v-show=\"state.visible\" @click.self=\"handleMaskClick\">\n        <div ref=\"element\" class=\"warpper\" :class=\"{ border: state.border }\">\n          <img v-if=\"state.isImage\" v-bind=\"image.attrs\" :src=\"image.src || ''\" />\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, watchEffect, ref } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { usePopupWithRoot } from './hook'\n  export default defineComponent({\n    name: 'PopupRoot',\n    setup() {\n      const element = ref<HTMLElement>(null as any)\n      const { isDarkTheme, isMobile } = useEnhancer()\n      const { state, image, hidden } = usePopupWithRoot(() => element.value)\n      const handleWindowScroll = () => hidden()\n      const handleMaskClick = () => {\n        state.maskClose && hidden()\n      }\n\n      watchEffect(() => {\n        state.visible && state.scrollClose\n          ? // https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md#solution-the-passive-option\n            window.addEventListener('scroll', handleWindowScroll, { passive: true })\n          : window.removeEventListener('scroll', handleWindowScroll)\n      })\n\n      return {\n        element,\n        state,\n        image,\n        isDarkTheme,\n        isMobile,\n        handleMaskClick\n      }\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  #popup {\n    &.dark {\n      .mask {\n        background-color: rgba($black, 0.5);\n      }\n    }\n    &.mobile {\n      .mask {\n        .warpper {\n          & > ::v-deep(*) {\n            min-width: 50vw;\n            min-height: 4rem;\n          }\n        }\n      }\n    }\n\n    .mask {\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100vw;\n      height: 100vh;\n      z-index: $z-index-top;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      overflow: hidden;\n      background-color: rgba($grey, 0.5);\n      @include visibility-transition();\n      @include backdrop-blur(5px);\n\n      .warpper {\n        display: contents;\n        position: relative;\n\n        & > ::v-deep(*) {\n          min-width: 24rem;\n          min-height: 8rem;\n          max-width: 90%;\n          max-height: 90%;\n          background-color: $module-bg;\n        }\n\n        &.border > ::v-deep(*) {\n          border: $sm-gap solid $module-bg-darker-1;\n          @include radius-box($sm-radius);\n        }\n      }\n    }\n  }\n</style>\n","/**\n * @file popup component\n * @module composable.popup.component\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { h, defineComponent, watch, Teleport, Fragment, PropType, ExtractPropTypes } from 'vue'\nimport { usePopup } from './hook'\n\nexport const PopupUIProps = {\n  border: {\n    type: Boolean as PropType<boolean>,\n    default: true\n  },\n  maskClose: {\n    type: Boolean as PropType<boolean>,\n    default: true\n  },\n  scrollClose: {\n    type: Boolean as PropType<boolean>,\n    default: true\n  }\n}\n\nexport const getOtherProps = ({\n  border,\n  maskClose,\n  scrollClose,\n  ...others\n}: ExtractPropTypes<typeof PopupUIProps>) => others\n\nenum Event {\n  Close = 'close',\n  UpdateVisible = 'update:visible'\n}\n\n/**\n * @example\n *  <popup :visible=\"false\" :clone=\"true\">\n *    <div class=\"xxx\">I will visible on original & modal</div>\n *  </popup>\n */\nexport default defineComponent({\n  name: 'Popup',\n  props: {\n    // component options\n    visible: {\n      type: Boolean,\n      default: false\n    },\n    clone: {\n      type: Boolean,\n      default: false\n    },\n    // UI options\n    ...PopupUIProps\n  },\n  emits: [Event.Close, Event.UpdateVisible],\n  setup(props, context) {\n    const popup = usePopup()\n\n    watch(\n      () => props.visible,\n      (visible) => {\n        const { clone, visible: v, ...popupOptions } = props\n        visible ? popup.visible(popupOptions) : popup.hidden()\n      }\n    )\n\n    watch(\n      () => popup.state.visible,\n      (visible) => {\n        if (!visible && props.visible) {\n          context.emit(Event.UpdateVisible, false)\n          context.emit(Event.Close)\n        }\n      }\n    )\n\n    return () => {\n      const renderSlotNode = () => context.slots.default?.()\n      const renderTeleportNode = () =>\n        h(\n          // @ts-ignore\n          Teleport,\n          { to: popup.state.$container },\n          renderSlotNode()\n        )\n\n      // modal mode -> visible ? modal-render : null\n      const renderModalNode = () => (props.visible ? renderTeleportNode() : null)\n\n      // clone mode -> render & visible -> modal render\n      if (props.clone) {\n        return h(Fragment, [renderSlotNode(), renderModalNode()])\n      }\n\n      // modal mode\n      return renderModalNode()\n    }\n  }\n})\n","/**\n * @file popup image component\n * @module composable.popup.image\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { h, defineComponent } from 'vue'\nimport { PopupUIProps, getOtherProps } from './popup'\nimport { usePopup } from './hook'\n\n/**\n * @example <popup-image src=\"xxx\" class=\"image\" />\n */\nexport default defineComponent({\n  name: 'PopupImage',\n  props: {\n    src: String,\n    ...PopupUIProps\n  },\n  setup(props, context) {\n    const popup = usePopup()\n\n    // Image -> click -> visible modal, ignore (clone/visible)\n    return () => {\n      const { src, ...popupProps } = props\n      if (!src) {\n        return null\n      }\n\n      const imageProps = getOtherProps(props)\n      const imageAttrs = {\n        ...imageProps,\n        ...context.attrs\n      }\n      return h('img', {\n        ...imageAttrs,\n        src,\n        onClick(...args) {\n          ;(imageProps as any)?.onClick?.(...args)\n          popup?.vImage(src, imageAttrs, popupProps)\n        }\n      })\n    }\n  }\n})\n","/**\n * @file Client popup\n * @module composable.popup\n * @author Surmon <https://github.com/surmon-china>\n * @example window.$popup.vImage('https://xxx.jpg')\n */\n\nimport { App, Plugin, readonly, reactive, nextTick } from 'vue'\nimport PopupRootComponent from './root.vue'\nimport PopupImageComponent from './image'\nimport PopupComponent from './popup'\nimport { PopupSymbol } from './constant'\n\ndeclare global {\n  interface Window {\n    // @ts-ignore\n    $popup: Popup\n  }\n}\n\nconst DEFAULT_STATE = Object.freeze({\n  visible: false as boolean,\n  isImage: false as boolean,\n  border: true as boolean,\n  maskClose: true as boolean,\n  scrollClose: true as boolean\n})\n\nconst createPopupStore = () => {\n  const image = reactive({\n    src: null as null | string,\n    attrs: null as null | object\n  })\n\n  const state = reactive({\n    $container: null as null | HTMLElement,\n    ...DEFAULT_STATE\n  })\n\n  const hidden = (cb?: () => void) => {\n    if (!state.visible) {\n      cb?.()\n      return\n    }\n    Object.assign(state, { ...DEFAULT_STATE })\n    image.src = null\n    image.attrs = null\n    if (cb) {\n      nextTick(cb)\n    }\n  }\n\n  const visible = (options?: Partial<typeof state>) => {\n    hidden(() => {\n      Object.assign(state, {\n        ...options,\n        isImage: false,\n        visible: true\n      })\n    })\n  }\n\n  const vImage = (src: string, attrs?: any, options?: Partial<typeof state>) => {\n    hidden(() => {\n      image.src = src\n      image.attrs = attrs\n      Object.assign(state, {\n        ...options,\n        border: true,\n        isImage: true,\n        visible: true\n      })\n    })\n  }\n\n  return {\n    state: readonly(state),\n    image: readonly(image),\n    visible,\n    hidden,\n    vImage,\n    $setRoot: (element: HTMLElement) => {\n      state.$container = element\n    }\n  }\n}\n\nexport interface PopupPluginConfig {\n  exportToGlobal?: boolean\n}\n// @ts-ignore\nexport type Popup = ReturnType<typeof createPopupStore>\nexport const createPopup = (): Popup & Plugin => {\n  const popupStore = createPopupStore()\n  return {\n    ...popupStore,\n    install(app: App, config: PopupPluginConfig) {\n      app.provide(PopupSymbol, popupStore)\n      app.component(PopupComponent.name, PopupComponent)\n      app.component(PopupImageComponent.name, PopupImageComponent)\n      app.component(PopupRootComponent.name!, PopupRootComponent)\n      if (config?.exportToGlobal) {\n        ;(window as any).$popup = popupStore\n      }\n    }\n  }\n}\n","/**\n * @file amplitude player\n * @module effect.amplitude\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport amplitude from 'amplitudejs'\nimport { onClient } from '/@/universal'\n\ndeclare global {\n  interface Window {\n    Amplitude: any\n    AmplitudeCore: any\n  }\n}\n\nonClient(() => {\n  window.Amplitude = window.Amplitude || amplitude\n})\n\nexport default amplitude\n","/**\n * @file Generate text to image DataURL\n * @module transforms.text2image\n * @author Surmon <https://github.com/surmon-china>\n * @link https://github.com/albinekb/favicon-emoji/blob/master/lib/browser.js\n */\n\nexport async function renderTextToDataURL(text = '', size = 16) {\n  const createCanvas = (size) =>\n    Object.assign(document.createElement('canvas'), {\n      width: size,\n      height: size\n    })\n  const canvas = createCanvas(size * 2)\n  const context = canvas.getContext('2d')!\n\n  context.clearRect(0, 0, canvas.width, canvas.height)\n  context.font = `${size}px Apple Color Emoji`\n  context.textAlign = 'center'\n  context.textBaseline = 'middle'\n  context.fillText(text, (size * 2) / 2, (size * 2) / 2)\n\n  const trimCanvas = (canvas) => {\n    const rowBlank = (imageData, width, y) => {\n      for (let x = 0; x < width; ++x) {\n        if (imageData.data[y * width * 4 + x * 4 + 3] !== 0) return false\n      }\n      return true\n    }\n\n    const columnBlank = (imageData, width, x, top, bottom) => {\n      for (let y = top; y < bottom; ++y) {\n        if (imageData.data[y * width * 4 + x * 4 + 3] !== 0) return false\n      }\n      return true\n    }\n\n    const ctx = canvas.getContext('2d')\n    const width = canvas.width\n    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height)\n\n    let top = 0\n    let bottom = imageData.height\n    let left = 0\n    let right = imageData.width\n\n    while (top < bottom && rowBlank(imageData, width, top)) {\n      ++top\n    }\n    while (bottom - 1 > top && rowBlank(imageData, width, bottom - 1)) {\n      --bottom\n    }\n    while (left < right && columnBlank(imageData, width, left, top, bottom)) {\n      ++left\n    }\n    while (right - 1 > left && columnBlank(imageData, width, right - 1, top, bottom)) {\n      --right\n    }\n\n    const trimmed = ctx.getImageData(left, top, right - left, bottom - top)\n    const max = Math.max(trimmed.width, trimmed.height)\n\n    const copy = Object.assign(document.createElement('canvas'), {\n      width: max,\n      height: max\n    })\n\n    const copyCtx = copy.getContext('2d')!\n\n    copyCtx.putImageData(trimmed, (max - trimmed.width) / 2, (max - trimmed.height) / 2)\n\n    return copy\n  }\n\n  return trimCanvas(canvas).toDataURL('image/png')\n}\n","/**\n * @file Title surprise\n * @module effect.titler\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { renderTextToDataURL } from '/@/transforms/text-2-image'\n\n// matcher\nexport interface Titler {\n  day: number\n  month: number\n  year: number\n  title: string\n  favicon: string\n}\n\nconst matchTitler = (titlers: Array<Titler>) => {\n  const now = new Date()\n  const today = now.getDate()\n  const tomonth = now.getMonth() + 1\n  const toyear = now.getFullYear()\n  return titlers.find((egg) => {\n    const isToday = egg.day === today\n    const isTomonth = egg.month == null || egg.month === tomonth\n    const isToyear = egg.year == null || egg.year === toyear\n    return isToday && isTomonth && isToyear\n  })\n}\n\n// roll\nlet rollTimer: number\nconst titleInterval = 366\nconst setTitle = (title: string) => {\n  document.title = title\n  if (title.length <= 10) {\n    return false\n  }\n  const [first, ...content] = title.split('')\n  const newTitle = [...content, first].join('')\n  rollTimer = window.setTimeout(() => setTitle(newTitle), titleInterval)\n}\n\n// favicon\nconst getFavicon = () => {\n  return Array.from(document.getElementsByTagName('link'))\n    .find((node) => node.getAttribute('rel') == 'icon')\n    ?.getAttribute('href')\n}\nconst setFavicon = async (target) => {\n  Array.from(document.getElementsByTagName('link'))\n    .find((node) => node.getAttribute('rel') == 'icon')\n    ?.setAttribute('href', target)\n}\n\nconst reallyFavicon = getFavicon()!\nlet reallyTitle = document.title\n\nexport const resetTitler = () => {\n  document.title = reallyTitle\n  setFavicon(reallyFavicon)\n}\n\nexport const runTitler = async ({ favicon, title }) => {\n  reallyTitle = document.title\n  document.title = title\n  setFavicon(await renderTextToDataURL(favicon, 28))\n}\n","/**\n * @file Slogan consoler\n * @module effect.slogan\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const consoleSlogan = (slogan: string, email?: string) => {\n  console.clear()\n  console.log(\n    `%c${slogan} %c${email || ''}`,\n    'color:#666;font-size:3em;',\n    'color:#666;font-size:13px;'\n  )\n}\n","/**\n * @file App exporter\n * @module effect.exporter\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { App } from 'vue'\n\ndeclare global {\n  interface Window {\n    $app: App\n  }\n}\n\nexport const exportAppToGlobal = (app: App) => {\n  window.$app = app\n}\n","/**\n * @file sticky event hack lib\n * @module effect.sticky\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport StickyEvents from 'sticky-events'\n\ndeclare global {\n  interface Window {\n    $StickyEvents: any\n  }\n}\n\nexport const exportStickyEventsToGlobal = () => {\n  window.$StickyEvents = StickyEvents\n}\n","/**\n * @file emoji rain animation effect\n * @module effect.emoji-233333\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport Emoji233333 from 'emoji-233333'\n\ndeclare global {\n  interface Window {\n    $Emoji233333: any\n  }\n}\n\nexport const exportEmojiRainToGlobal = () => {\n  window.$Emoji233333 = Emoji233333\n}\n","/**\n * @file Random number\n * @module util.random\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const randomNumber = (max: number): number => {\n  return Math.floor(Math.random() * max) + 1\n}\n","/**\n * @file Client app entry\n * @module CSR-entry\n * @author Surmon <https://github.com/surmon-china>\n */\n\n// polyfills\nimport 'intersection-observer'\n\nimport { createApp, createSSRApp } from 'vue'\nimport { createWebHistory } from 'vue-router'\nimport { createVueApp } from '/@/app/main'\nimport { LayoutColumn } from '/@/app/state'\nimport { getSSRContext } from '/@/universal'\nimport gtag from '/@/composables/gtag'\nimport lozad from '/@/composables/lozad'\nimport adsense from '/@/composables/adsense'\nimport { createDefer } from '/@/composables/defer'\nimport { createMusic } from '/@/composables/music'\nimport { createPopup } from '/@/composables/popup'\nimport { createLoading } from '/@/composables/loading'\nimport { getClientLocalTheme } from '/@/composables/theme'\nimport amplitude from '/@/effects/amplitude'\nimport { runTitler, resetTitler } from '/@/effects/titler'\nimport { consoleSlogan } from '/@/effects/slogan'\nimport { initCopyrighter } from '/@/effects/copyright'\nimport { exportAppToGlobal } from '/@/effects/exporter'\nimport { exportStickyEventsToGlobal } from '/@/effects/sticky'\nimport { exportEmojiRainToGlobal } from '/@/effects/emoji-23333'\nimport { getLayoutByRouteMeta } from '/@/transforms/layout'\nimport { getTargetCDNURL } from '/@/transforms/url'\nimport { randomNumber } from '/@/utils/random'\nimport { Language, LanguageKey } from '/@/language'\nimport { IDENTITIES } from '/@/config/app.config'\nimport { isSSR } from '/@/app/environment'\nimport { isProd } from '/@/environment'\n\nimport './effects/swiper/style'\nimport './styles/app.scss'\n\n// app\nconst { app, router, globalState, i18n, store } = createVueApp({\n  historyCreator: createWebHistory,\n  appCreator: isSSR ? createSSRApp : createApp,\n  language: navigator.language,\n  userAgent: navigator.userAgent,\n  layout: isSSR ? getSSRContext('layout') : LayoutColumn.Normal,\n  theme: isSSR ? getSSRContext('theme') : getClientLocalTheme()\n})\n\n// services\nconst defer = createDefer()\nconst popup = createPopup()\nconst loading = createLoading()\nconst music = createMusic({ amplitude, autoInit: false })\n\n// plugins & services\napp.use(music)\napp.use(lozad, { exportToGlobal: true })\napp.use(defer, { exportToGlobal: true })\napp.use(popup, { exportToGlobal: true })\napp.use(loading, { exportToGlobal: true })\napp.use(adsense, { ID: IDENTITIES.GOOGLE_ADSENSE_PUBLISHER_ID, enabledAutoAD: true })\napp.use(gtag, {\n  router,\n  id: IDENTITIES.GOOGLE_ANALYTICS_TRACKING_ID,\n  config: { send_page_view: false },\n  customResourceURL: getTargetCDNURL('/effects/gtag')\n})\n\n// init: store (from SSR context or fetch)\nisSSR ? store.initOnSSRClient() : store.initOnSPAClient()\n\n// init: services with client\nexportEmojiRainToGlobal()\nexportStickyEventsToGlobal()\nexportAppToGlobal(app)\ninitCopyrighter()\n\n// init: router loading middleware client only\nrouter.beforeEach((_, __, next) => {\n  loading.start()\n  next()\n})\nrouter.afterEach((_, __, failure) => {\n  failure ? loading.fail(failure) : loading.finish()\n})\n\n// router ready -> mount\nrouter.isReady().finally(() => {\n  // UI layout: set UI layout by route (for SPA)\n  globalState.setLayoutColumn(getLayoutByRouteMeta(router.currentRoute.value.meta))\n  // mount (isHydrate -> (SSR -> true | SPA -> false))\n  app.mount('#app', isSSR).$nextTick(() => {\n    // set hydrate state\n    globalState.setHydrate()\n    // reset: i18n language\n    i18n.set(globalState.userAgent.isZhUser ? Language.Chinese : Language.English)\n    // init user identity state\n    store.stores.identity.initOnClient()\n    // title surprise\n    document.addEventListener(\n      'visibilitychange',\n      (event) => {\n        // @ts-ignore\n        const isHidden = event.target?.hidden || event.target?.webkitHidden\n        const surprises = [\n          { favicon: '🔞', title: 'FBI WARNING' },\n          { favicon: '⭕️', title: 'FBI WARNING' },\n          // tltle: zero width character\n          { favicon: '🌝', title: '​' }\n        ]\n        isHidden ? runTitler(surprises[randomNumber(surprises.length - 1)]) : resetTitler()\n      },\n      false\n    )\n    // production only\n    if (isProd) {\n      consoleSlogan(i18n.t(LanguageKey.APP_SLOGAN)!, store.stores.appOption.data?.site_email)\n    }\n  })\n})\n"],"file":"index-93d01074.js"}