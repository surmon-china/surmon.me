{"version":3,"file":"emoji-233333.esm-DP_ezhtT.js","sources":["../../node_modules/.pnpm/emoji-233333@0.3.2/node_modules/emoji-233333/dist/emoji-233333.esm.js"],"sourcesContent":["/**\n * @file emoji-233333 v0.3.2\n * @copyright Copyright (c) Surmon. All rights reserved.\n * @license Released under the MIT License.\n * @author Surmon <https://github.com/surmon-china>\n */\nvar t=Object.freeze({cache:!0,base:\"emoji\",scale:.5,speed:10,density:3,staggered:!0,increaseSpeed:.08,emoji:null}),e=function(e){this.emojis=[],this.kichikuing=!1,this.repeater=null,this.emojiImg=null,this.options=Object.assign({},t,e),this._speed=this.options.speed,this.initialize()},i={windowSize:{configurable:!0}};e.prototype.preLoadImage=function(t){return new Promise((function(e,i){var a=new Image;a.src=t,a.complete?e(a):(a.onload=function(){e(a)},a.onerror=function(){i(a)})}))},e.prototype.initialize=function(){var t=this.options;this.canvas=\"string\"==typeof t.base?document.getElementById(t.base):t.base,this.canvas.width=this.canvas.width||this.windowSize.width,this.canvas.height=this.canvas.height||this.windowSize.height,this.context=this.canvas.getContext(\"2d\");var i=window.devicePixelRatio||t.ratio||1,a=e.getPixelRatio(this.context),s=this.options.ratio||i/a;this.options.ratio=s,this.canvas.style.width=this.canvas.width+\"px\",this.canvas.style.height=this.canvas.height+\"px\",this.canvas.width*=s,this.canvas.height*=s,t.cache&&this.createCacheCanvas(),this.createEmojis()},e.prototype.createEmojis=function(){var t=this,i=this.options,a=this.emojis;return i.emoji?this.preLoadImage(i.emoji).then((function(s){t.emojiImg=s;for(var n=parseInt(t.canvas.style.width),h=parseInt(n/(s.width*i.scale))*i.density,o=0;o<h;o++){var c=n/h*o*i.ratio,r=-e.rand(t.canvas.height);i.staggered&&(c=c*Math.random()*2);var d=e.rand(6)/10;d=d<.5?.8:d;var p={x:~~(.5+c),y:~~(.5+r),w:~~(.5+s.width*d),h:~~(.5+s.height*d),scale:i.scale};if(i.staggered){var g=0,m=t.canvas.width,l=m/3,v=2*l;if(c<l)g=c+1.2*m*Math.random();else if(c>v)g=c-1.2*v*Math.random();else{var u=Math.random();g=u<.5?l*u:m*Math.random()}p.targetX=~~(.5+g)}a.push(p)}})):Promise.reject(new Error(\"未得到有效的 emoji 地址，无法继续！\"))},e.prototype.drawStep=function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height);var t=!1,e=this.canvas.height;this._speed+=this.options.increaseSpeed,this.cacheCanvasContext.clearRect(0,0,this.canvas.width,this.canvas.height);for(var i=0;i<this.emojis.length;i++){var a=this.emojis[i],s=.6*this._speed;a.y<e?(this.options.staggered&&(a.x<a.targetX?a.targetX-a.x<s?a.x=a.targetX:a.x+=s:a.x-a.targetX<s?a.x=a.targetX:a.x-=s),a.y+=this._speed,this.options.cache?this.cacheCanvasContext.drawImage(this.emojiImg,~~(.5+a.x),~~(.5+a.y),~~(.5+a.w*a.scale),~~(.5+a.h*a.scale)):this.context.drawImage(this.emojiImg,~~(.5+a.x),~~(.5+a.y),~~(.5+a.w*a.scale),~~(.5+a.h*a.scale)),t=!0):(this.emojis[i]=null,this.emojis.splice(i,1))}t?this.options.cache&&this.context.drawImage(this.cacheCanvas,0,0,this.canvas.width,this.canvas.height):(this.kichikuing=!1,window.cancelAnimationFrame(this.repeater),this.options.onEnded&&this.options.onEnded())},e.prototype.createCacheCanvas=function(){this.cacheCanvas=document.createElement(\"canvas\"),this.cacheCanvas.width=this.canvas.width,this.cacheCanvas.height=this.canvas.height,this.cacheCanvasContext=this.cacheCanvas.getContext(\"2d\")},e.prototype._launch=function(){this.kichikuing=!0,this.repeater=window.requestAnimationFrame(this._launch.bind(this)),this.drawStep()},e.prototype.launch=function(){var t=this;if(this.kichikuing)return!1;this.createEmojis().then((function(){t.options.onStart&&t.options.onStart(),t._speed=t.options.speed,t._launch()}))},e.prototype.update=function(t){t&&(this.options=Object.assign({},this.options,t))},i.windowSize.get=function(){return{width:document.documentElement.clientWidth||document.body.clientWidth,height:document.documentElement.clientHeight||document.body.clientHeight}},e.getPixelRatio=function(t){return t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1},e.rand=function(t){return Math.floor(Math.random()*t+1)},Object.defineProperties(e.prototype,i);export default e;\n"],"names":["t","e","i","a","s","n","h","o","c","r","d","g","m","l","v","u"],"mappings":"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","x_google_ignoreList":[0]}