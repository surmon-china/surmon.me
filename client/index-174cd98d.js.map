{"version":3,"mappings":"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","names":["LanguageKey","DEFAULT_DELAY","LONG_ARTICLE_THRESHOLD","META","GEO_INFO","MAPBOX_CONFIG","IDENTITIES","VALUABLE_LINKS","zhLangMap","args","enLangMap","Language","languages","isServer","isClient","SSR_CONTEXT_KEY","getSSRContextData","ssrContext","rebirthSSRContext","app","getSSRContext","key","_a","getRefData","getValue","value","universalRef","sourceValue","ref","BAD_REQUEST","NOT_FOUND","INVALID_ERROR","uaParser","userAgent","parseResult","parser","browserName","isTargetDevice","browsers","browser","isTargetLanguageUser","language","targetLang","lang","isZhUser","LayoutColumn","GlobalStateSymbol","createGlobalState","config","renderError","defaultError","setRenderError","error","onClient","isHydrated","setHydrate","reactive","layoutValue","layoutColumn","computed","setLayoutColumn","layout","imageExt","imageExtValue","switcher","toggleSwitcher","globalState","readonly","useGlobalState","inject","useUniversalFetch","fetcher","onBeforeMount","callback","NULL","UNDEFINED","isNull","isUndefined","isNil","useFetchStore","options","refWrapper","shallowRef","fetching","fetched","data","result","HEADER_ELEMENT_ID","NAV_ELEMENT_ID","MAIN_ELEMENT_ID","MAIN_CONTENT_ELEMENT_ID","ASIDE_ELEMENT_ID","FOOTER_ELEMENT_ID","ARTICLE_CONTENT_ELEMENT_ID","ARTICLE_READMORE_ELEMENT_ID","ARTICLE_META_ELEMENT_ID","ARTICLE_SHARE_ELEMENT_ID","ARTICLE_RELATED_ELEMENT_ID","ARTICLE_CONTENT_HEADING_ELEMENT_ID_PREFIX","getArticleContentHeadingElementId","level","heading","COMMENT_ELEMENT_ID","COMMENT_PUBLISHER_ELEMENT_ID","COMMENT_REPLY_PUBLISHER_ELEMENT_ID","COMMENT_FOOTER_ELEMENT_ID","COMMENT_ITEM_ELEMENT_ID_PREFIX","getCommentItemElementId","commentId","go","css","sql","php","xml","yaml","json","bash","less","scss","rust","shell","nginx","stylus","python","javascript","typescript","name","hljs","verseConfig","html","CUSTOM_ELEMENTS","CUSTOM_ELEMENT_LIST","LOZAD_CLASS_NAME","LOADED_CLASS_NAME","lozadObserve","target","observer","lozad","element","useLozad","container","observe","tagretClass","targetElement","lozadElements","unobserve","onMounted","onBeforeUnmount","lozadDirective","install","escape","_escape","unescape","_unescape","padStart","_padStart","firstUpperCase","_capitalize","numberToKilo","count","numberSplit","number","CHINESE_NUMBER_TEXT","CHINESE_NUMBER_CAPITAL_TEXT","numberToChinese","text","capital","targetText","NODE_ENV","API_ONLINE_URL","PROD_API","API_CONFIG","highlightLangPrefix","marked","Marked","mangle","markedXhtml","markedHighlight","code","highlight","sanitizeHTML","content","trimHTML","createRenderer","renderer","Renderer","trimmed","transformed","ce","raw","idText","safeedRaw","tag","checked","href","title","isSelf","isImageLink","textValue","hrefValue","sanitizeUrl","titleValue","src","alt","source","altValue","isEscaped","lineNumbers","_","i","readOnlyAttrs","markdownToHTML","markdown","renderOptions","delayer","ms","start","action","time","timeout","delayPromise","promise","delay","resolve","reject","get","set","remove","setJSON","getJSON","storage","nodepress","axios","response","_b","errorJSON","errorInfo","_c","_d","_f","_e","overwrite","method","nodepress$1","UserType","LOCAL_STORGAE_KEY","useIdentityStore","defineStore","disqusConfig","user","vote","feedbacks","isLikedPage","id","isLikedComment","isDislikedComment","author","likeComment","dislikeComment","likePage","addFeedback","saveLocalUser","profile","removeLocalUser","fetchDisqusLogout","fetchDisqusUserInfo","fetchDisqusConfig","getStoreState","unref","setStoreState","state","resetStateFromStorage","localState","watch","event","ARTICLE_API_PATH","useHottestArticleListStore","useArticleListStore","pagination","params","isFirstPage","isLoadMore","request","renderArticleMarkdown","headings","useArticleDetailStore","article","prevArticle","nextArticle","relatedArticles","renderedFullContent","contentLength","readMinutes","minutes","isLongContent","splitIndex","splitLength","shortContent","lastH5Index","lastH4Index","lastH3Index","lastLineIndex","defaultContent","moreContent","renderFullContent","fetchArticleDetail","articleId","fetchArticleContext","identityStore","useAnnouncementStore","cloneDate","date","dateToHuman","week","isSameHumanDay","target2","isSameDay","isSameMonth","isSameYear","humanToDate","humanDate","humanDateToYMD","year","month","day","separator","_month","_day","dateToYMD","_date","useArchiveStore","fetchStore","tree","rootTree","b","createAt","targetYear","ye","targetMonth","mo","OriginState","CommentPostId","CommentParentId","SortType","COMMENT_API_PATH","useCommentStore","posting","deleting","comments","commentTreeList","ids","comment","roots","children","fullMap","treeMap","findRootParentId","pid","rootPid","clearList","loadmore","index","useCategoryStore","getTagEnName","useTagStore","sorted","tags","fullNameTags","tagMap","TunnelModule","BFF_TUNNEL_PREFIX","tunnel","isAxiosError","tunnel$1","module","useWallpaperStore","papers","useSponsorStore","activeSponsors","edge","inactiveSponsors","activeSponsorLogins","item","node","useAdminInfoStore","useAppOptionStore","adConfig","feedback","authorName","useNodepressStatisticStore","useGitHubStatisticStore","useNpmStatisticStore","totalPackages","totalDownloads","p","averageScore","packages","c","useArticleCalendarStore","useInstagramCalendarStore","useGitHubCalendarStore","days","LENS_PAGE_FETCH_DELAY","useDoubanMoviesStore","useInstagramMediasStore","useYouTubePlayListStore","a","fetchYouTubeVideoList","playlistId","fetch","useTwitterStore","useMyGoogleMapStore","useStores","pinia","createUniversalStore","createPinia","fetchBasicStore","stores","initFetchTasks","contextStore","I18nSymbol","createI18nStore","languageCodes","l","languageMap","map","toggle","currentIndex","langCode","nextIndex","translate","targetLanguage","createI18n","i18nStore","i18nComponent","defineComponent","useI18n","getGaScriptURL","measurementID","loadScript","head","script","domain","type","defer","async","restAttrs","link","GtagSymbol","createGtag","resourceURL","push","to","from","nextTick","location","eventName","useGtag","gtag","Theme","DARK_THEME_QUERY","LIGHT_THEME_QUERY","THEME_STORAGE_KEY","ThemeSymbol","themes","createTheme","initTheme","theme","newTheme","cookies","bindClientSystem","matches","themeState","useTheme","createDeferStore","doTask","task","handleLoaded","addTask","DeferSymbol","createDefer","useDefer","loading","useLoading","LoadingSymbol","createLoadingStore","_cut","_timer","_throttle","clear","increase","percent","decrease","startTimer","hide","pause","resume","finish","fail","createLoading","ProgressComponent","PopupSymbol","usePopup","usePopupWithRoot","fn","popup","useEnhancer","route","useRoute","router","useRouter","i18n","appOptionStore","isMobile","isDarkTheme","isZhLang","useSeo","useHead","ProxyModule","isValidDateParam","dates","d","Easing","triggerEvents","listener","events","handler","scrollToElement","onCancel","onDone","offset","duration","optionEasing","bodyElement","abort","whenAbort","whenDone","initialY","elementY","diff","easing","BezierEasing","step","timestamp","progress","scrollToAnchor","elementId","scrollToPageTop","scrollToNextScreen","emitLoadEvent","props","emit","entries","WebPArgs","getArticleBannerThumbnailURL","url","isWebPImage","getCDN_URL","w","h","getMobileArticleListThumbnailURL","getArticleListThumbnailURL","isOriginalType","originState","isHybridType","isReprintType","getExtendsObject","kvs","v","getExtendValue","gState","isLiked","isHybrid","isReprint","isOriginal","getThumbnailURL","handleClick","getArticleDetailRoute","_i18n","seo","tagStore","categoryStore","articleListStore","category","hasMoreArticles","titles","prop","fetchArticles","loadmoreArticles","identity","getLanguageText","isLoadMoreEnabled","handleLoadmore","SwiperClass","Grid","Pagination","Navigation","Mousewheel","Autoplay","A11y","EffectFade","slides","GAEventCategories","isVideoMediaIns","media","isAlbumMediaIns","getInstagramImage","size","getProxyURL","getYouTubePlaylistURL","getYouTubeVideoEmbedURL","list","listParam","getTwitterTweetDetailURL","username","get163MusicSongDetailURL","songId","swiperRef","prevSlide","nextSlide","handleSwiperReady","_swiper","activeIndex","handleSwiperTransitionStart","handleGtagEvent","appOption","twitterStore","targetPage","currentCategory","currentCategoryIcon","currentCategoryImage","currentCategoryColor","enTitle","zhTitle","description","category_slug","currentTag","currentTagIcon","currentTagImage","currentTagColor","tag_slug","keyword","monthNameI18ns","getMonthNameI18n","i18ns","useArchivePageMeta","useArchivePageStatistics","store","_g","archiveStore","statisticState","statisticFetching","statistics","renderTextToQRCodeDataURL","QRCode","baseParams","paramsToString","k","openWindow","targetURL","closeInterval","onClose","width","height","top","left","windowParams","_window","timer","enableCopyrighter","disableCopyrighter","initCopyrighter","copyText","buildText","buildHtml","copy","SocialMedia","defaultSocials","dataURL","qs","enabledSocials","s","getURL","getPageURL","getTitle","getDescription","copyPageURL","handleShare","social","shareParams","EMOJIS","CommentEvents","getDisqusUserURL","HAHA_KEYWORDS","SIX_KEYWORDS","HEHE_KEYWORDS","luanchEmojiRain","luanchRain","statisticsText","disqusThreadMap","handleDisqusThread","forum","slug","handleSort","handleDisqusLogin","handleDisqusLogout","handleClearLocalProfile","getDefaultAvatar","getGravatarByHash","hash","getDisqusAvatarByUsername","markdownHTML","OFFSET","countryCodeToEmoji","countryCode","char","municipalitys","countryText","emojiText","cityText","osIconsNameMap","browersIconsNameMap","uaResult","osIconName","osName","browserIconName","commentStore","isDeleting","disqusAuthorId","disqusUsername","isDisqusAuthor","isAdminAuthor","authorAvatar","authorURL","isDeleteable","getReplyParentCommentText","parentId","nameText","handleReply","handleCancelReply","handleVote","isLike","handleDelete","scrollToCommentItem","_sfc_main$1d","CommentItem","context","message","_resolveComponent","_normalizeClass","_ctx","_withCtx","_openBlock","_createElementBlock","_Fragment","_renderList","_createBlock","_component_comment_item","_createSlots","_renderSlot","_createVNode","_component_comment_list","hasMore","storeToRefs","avatar","handleUpdateProfile","blossomed","handleBlossom","focusPosition","position","range","clone","length","visit","parentNode","nodes","isNewLine","selection","sub","insertContent","option","before","after","currentText","selectedText","newSelectedText","newText","newInsertText","selectedRange","startPoint","endPoint","newTexts","isPreviewed","inputElement","inputElementObserver","handleTogglePreview","handleInputChange","handleSubmit","insertContentToInput","insertEmoji","emoji","insertImage","insertLink","insertCode","isPosting","isFetching","isLoading","postingKey","isRootPosting","isReplyPosting","commentState","guestProfile","rootPenState","clearRootPenContent","closeRootPenPreview","cancelCommentReply","replyComment","fetchCommentList","_params","fetchSortComments","sort","ANCHOR.COMMENT_ELEMENT_ID","fetchPageComments","page","lastCommentId","ANCHOR.getCommentItemElementId","handleDeleteComment","createComment","payload","isGuest","guestProfileValue","toRaw","newComment","validateFormById","formId","formElement","check_status","handleRootSubmit","ANCHOR.COMMENT_PUBLISHER_ELEMENT_ID","handleReplySubmit","ANCHOR.COMMENT_REPLY_PUBLISHER_ELEMENT_ID","onUnmounted","ctxStore","isRenderMoreContent","isRenderMoreEnabled","handleRenderMore","handleFullContentRendered","onUpdated","articleURL","newliked","handleLike","handleSponsor","articleList","articles","sponsor","articleDetailStore","customElementsStyle","handleContentRendered","insStore","insMedias","StatisticCount","classNames","totalSpent","weeklyAvg","total","getPointHeightStyle","articleCalendar","instagramCalendar","githubCalendar","githubContributionsMap","getDayContributions","getDayGitHubColor","getDayInstagrams","getDayArticles","handleHover","todayHuman","currentMonthDays","getPrevMonthFullDays","prevMonths","daysCount","months","getAdminAvatar","useAboutPageMeta","adminInfo","SPECIAL_LINKS","gmmFoldersToGeoJSON","folders","folder","placemark","geoJSONFeatureToLayer","layerId","newMapboxPopup","mapboxgl","coordinates","mapboxRef","lib","loaded","getMapStyle","makeSureSourceLayer","_map","__vitePreload","n","handleMapboxReady","prevPopup","handlePlacemarkClick","modalVisible","gmStore","gmFolders","fi","placemarks","pi","longitude","latitude","extendedData","gmGeoJson","openModal","handleFolderClick","targetFolder","firstPlacemark","handleLivingNow","handleGTagEvent","modalState","handleOpenWechat","handleStatement","handleFeedback","backgroundVideo","getStaticURL","links","getPageRoute","RouteName","bannerImage","siteLikes","fetchAllData","appOptionRequest","commentRequest","handleAppEvent","ProviderId","PROVIDER_IDS","PROVIDERS","useSponsorState","initId","githubSponsor","activeId","activeProvider","t","allGitHubSponsors","handleCopyAddress","sponsorState","targetId","isLoaded","mediaLoaded","galleryActiveIndex","galleryActiveMedia","gridMedias","restMedias","openMediaGallery","closeMediaGallery","swiperState","handleSlideChange","videos","fetchVideos","thumbnails","handleView","video","youtubeModalVideo","isOnYouTubeModal","youTubeModalURL","openYouTubeModal","closeYouTubeModal","instagramMedias","youtubePlayList","youtubePlaylistData","CategorySlug","routes","IndexFlowPage","MobileFlow","ArticleDetailPage","CategoryFlowPage","TagFlowPage","DateFlowPage","SearchFlowPage","DesktopArchivePage","MobileArchivePage","DesktopAboutPage","MobileAboutPage","GuestbookPage","AppPage","LensPage","SponsorPage","createUniversalRouter","createRouter","getTagFlowRoute","tagSlug","getCategoryFlowRoute","categorySlug","getDateFlowRoute","routeName","isArticleDetail","isSearchFlow","path","useUnhead","DEFAULT_TITLER","DEFAULT_OG_IMAGE","useUnheadSeoMeta","pageTitle","keywords","sm","pureTitle","fullTitle","spinnerStyle","Udate","ymd","meridiem","pluralize","label","ago","between","hourS","dayS","weekS","monthS","yearS","Ulink","RouterLink","external","blank","routerLinkProps","customAttrs","ps","Uimage","deferRenderable","cdn","proxy","restProps","imageSrc","Placeholder","placeholder","i18nKey","transition","transitionName","isEmptyData","getPlaceholderView","Empty","getDataView","getLoadingView","Spin","getView","Transition","ClientOnly","mounted","setRender","renderResult","resultKey","singleResult","cloneVNode","Container","Responsive","_h","_j","_i","DesktopOnly","style","getLineStyle","components","Webfont","Divider","SkeletonBase","SkeletonLine","SkeletonParagraph","rainBase","getLayoutByRouteMeta","routeMeta","handleResolveRoute","onErrorCaptured","_error","createMusicPlayer","amplitude","initVolume","muted","playableSongList","song","fetchSongList","currentSong","play","prevSong","nextSong","changeVolume","volume","toggleMuted","togglePlay","initPlayer","songs","init","MusicPlayerSymbol","createMusic","musicPlayer","useMusic","player","handlePlayByIndex","getSecondsView","seconds","minutesText","secondsText","isOnPlayerModel","togglePlayerModel","handleTouchEvent","styles","startAnimation","EN_FLOWERS","ZH_FLOWERS","flowers","handleAnimationEnd","targetIndex","flower","wallpaperStore","wallpapers","activePaper","handleClose","isOnWallpaper","handleCloseWallpaper","handleOpenWallpaper","animationFrameId","isTopButtonMouseOver","isBottomButtonMouseOver","handleRSS","slowMoveToAnyWhere","targetScrollY","currentScrollY","setTopButtonState","isStartSlow","setBottomButtonState","EMOTIONS","isSubmitable","emailLink","email","_email","menus","handleSearch","inputKeyword","paramsKeyword","isSearchPage","StatisticSkeleton","statisticStore","PER_PAGE","hottestArticleListStore","articleFullList","hotPage","perPage","switchHotPage","pages","updateSwiper","realIndex","getTagIcon","minHeadingLevel","today","isToday","tableView","WEEKDAYS","weekDayTexts","headerText","isSameTodayTable","yearText","monthText","dayText","setTable","table","firstDayDate","firstDayWeek","todoDays","toPrevMonth","isPrevYear","toNextMonth","isNextYear","handleDayClick","articlesIn","targetDate","ASIDE_STICKY_ELEMENT_ID","isArticlePage","stickyEvents","handleStickyStateChange","isEnabledNav","themeIcon","toggleTheme","tooggleLanguage","handleRootNavEvent","handleStatementModal","handlePageTransitionDone","handleSponsorModalClose","handleFeedbackModalClose","handleStatementModalClose","searchState","handleMenuToggle","openSearch","cancelSearch","submitSearch","adminInfoStore","languageIcon","pageURL","isOpenedAside","openAside","closeAside","opened","createMainApp","createSSRApp","App","createHead","getGlobalHead","next","newError","ADS_SCRIPT","getComponent","clientId","rootClass","insClass","insStyle","dataAdClient","dataAdSlot","dataAdLayoutKey","dataAdTest","dataAdFormat","dataFullWidthResponsive","adsense","adsenseConfig","component","image","hidden","handleWindowScroll","handleMaskClick","watchEffect","PopupUiProps","omitUiProps","border","maskClose","scrollClose","rest","PopupComponent","visible","__","popupOptions","renderSlotNode","renderTeleportNode","Teleport","renderModalNode","Fragment","PopupImageComponent","popupProps","imageProps","imageAttrs","DEFAULT_STATE","createPopupStore","cb","vImage","attrs","createPopup","popupStore","PopupRootComponent","trimCanvas","canvas","rowBlank","imageData","y","x","columnBlank","bottom","right","max","renderTextToDataURL","rollTimer","setTitle","first","newTitle","getFavicon","setFavicon","cache","resetTitler","runTitler","favicon","consoleSlogan","slogan","exportAppToGlobal","exportStickyEventsToGlobal","StickyEvents","exportEmojiRainToGlobal","Emoji233333","createWebHistory","music","globalHead","mainHead","newValue","failure","isHidden","surprises"],"sources":["../../src/language/key.ts","../../src/config/app.config.ts","../../src/language/lang-zh.ts","../../src/language/lang-en.ts","../../src/language/index.ts","../../src/app/environment.ts","../../src/universal/context.ts","../../src/universal/ref.ts","../../src/constants/error.ts","../../src/transforms/ua.ts","../../src/app/state.ts","../../src/universal/prefetch.ts","../../src/universal/index.ts","../../src/constants/value.ts","../../src/stores/_fetch.ts","../../src/constants/anchor.ts","../../src/effects/highlight/index.ts","../../src/effects/elements/verse.ts","../../src/effects/elements/index.ts","../../src/composables/lozad.ts","../../src/transforms/text.ts","../../src/environment.ts","../../src/config/api.config.ts","../../src/transforms/markdown.ts","../../src/utils/delayer.ts","../../src/utils/storage.ts","../../src/services/nodepress.ts","../../src/stores/identity.ts","../../src/stores/article.ts","../../src/stores/announcement.ts","../../src/transforms/moment.ts","../../src/stores/archive.ts","../../src/constants/state.ts","../../src/stores/comment.ts","../../src/stores/category.ts","../../src/stores/tag.ts","../../src/constants/tunnel.ts","../../src/config/bff.config.ts","../../src/services/tunnel.ts","../../src/stores/wallpaper.ts","../../src/stores/sponsor.ts","../../src/stores/basic.ts","../../src/stores/statistic.ts","../../src/stores/calendar.ts","../../src/stores/media.ts","../../src/stores/_hook.ts","../../src/stores/index.ts","../../src/composables/i18n.ts","../../src/transforms/gtag.ts","../../src/utils/scripter.ts","../../src/composables/gtag.ts","../../src/composables/theme.ts","../../src/composables/defer.ts","../../src/composables/loading/progress.vue","../../src/composables/loading/index.ts","../../src/composables/popup/constant.ts","../../src/composables/popup/hook.ts","../../src/app/enhancer.ts","../../src/constants/proxy.ts","../../src/transforms/validate.ts","../../src/utils/scroller.ts","../../src/components/flow/mobile/loadmore.vue","../../src/transforms/thumbnail.ts","../../src/transforms/state.ts","../../src/components/flow/mobile/item.vue","../../src/components/flow/mobile/index.vue","../../src/components/flow/desktop/item.vue","../../src/components/flow/desktop/list.vue","../../src/effects/swiper/index.ts","../../src/pages/index/carrousel.vue","../../src/constants/gtag.ts","../../src/transforms/media.ts","../../src/pages/index/twitter.vue","../../src/pages/index/index.vue","../../src/pages/category.vue","../../src/pages/tag.vue","../../src/pages/date.vue","../../src/pages/search.vue","../../src/components/common/banner.vue","../../src/pages/archive/tree.vue","../../src/pages/archive/shared.ts","../../src/pages/archive/desktop.vue","../../src/pages/archive/mobile.vue","../../src/transforms/qrcode.ts","../../src/utils/opener.ts","../../src/effects/copyright.ts","../../src/utils/clipboard.ts","../../src/components/widget/share.vue","../../src/components/comment/helper.ts","../../src/components/comment/topbar.vue","../../src/transforms/avatar.ts","../../src/components/common/markdown.vue","../../src/transforms/emoji.ts","../../src/components/comment/list/location.vue","../../src/components/comment/list/user-agent.vue","../../src/components/comment/list/item.vue","../../src/components/comment/list/list.vue","../../src/components/comment/loadmore.vue","../../src/components/comment/publisher/publisher.vue","../../src/utils/editable.ts","../../src/components/comment/publisher/pen.vue","../../src/components/comment/index.vue","../../src/pages/article/content.vue","../../src/pages/article/meta.vue","../../src/pages/article/upvote.vue","../../src/pages/article/related.vue","../../src/pages/article/index.vue","../../src/pages/about/media/instagram.vue","../../src/pages/about/statistic/base.vue","../../src/pages/about/statistic/douban.vue","../../src/pages/about/statistic/github.vue","../../src/pages/about/statistic/twitter.vue","../../src/pages/about/statistic/npm.vue","../../src/pages/about/calendar/day.vue","../../src/pages/about/calendar/index.vue","../../src/pages/about/shared.ts","../../src/pages/about/footprint/helper.ts","../../src/pages/about/footprint/mapbox.vue","../../src/pages/about/footprint/modal.vue","../../src/pages/about/footprint/index.vue","../../src/pages/about/desktop.vue","../../src/pages/about/mobile.vue","../../src/pages/guestbook.vue","../../src/pages/app.vue","../../src/components/widget/sponsor/state.ts","../../src/components/widget/sponsor/provider.vue","../../src/pages/sponsor.vue","../../src/pages/lens/instagram/gallery.vue","../../src/pages/lens/instagram/grid.vue","../../src/pages/lens/swiper.vue","../../src/pages/lens/youtube/videos.vue","../../src/pages/lens/youtube/playlist.vue","../../src/pages/lens/index.vue","../../src/app/router.ts","../../src/transforms/route.ts","../../src/transforms/url.ts","../../src/composables/head.ts","../../src/components/common/webfont.vue","../../src/components/common/spin.vue","../../src/components/common/udate.ts","../../src/components/common/ulink.ts","../../src/components/common/uimage.ts","../../src/components/common/placeholder.ts","../../src/components/common/client-only.ts","../../src/components/common/container.ts","../../src/components/common/responsive.ts","../../src/components/common/skeleton/base.vue","../../src/components/common/skeleton/line.vue","../../src/components/common/skeleton/paragraph.vue","../../src/app/components.ts","../../src/components/widget/emoji-rain.vue","../../src/transforms/layout.ts","../../src/components/root/error.vue","../../src/components/root/captured.vue","../../src/composables/music.ts","../../src/components/widget/music-player/player.vue","../../src/components/widget/music-player/handle.vue","../../src/components/widget/wallflower/flower.vue","../../src/components/widget/wallflower/garden.vue","../../src/components/widget/wallpaper/wall.vue","../../src/components/widget/wallpaper/switcher.vue","../../src/components/widget/background.vue","../../src/components/widget/toolbox.vue","../../src/components/widget/feedback.vue","../../src/transforms/email.ts","../../src/components/widget/statement.vue","../../src/components/layout/desktop/menu.ts","../../src/components/layout/desktop/nav.vue","../../src/components/layout/desktop/aside/search.vue","../../src/components/layout/desktop/aside/statistic.vue","../../src/components/layout/desktop/aside/article.vue","../../src/components/layout/desktop/aside/mammon.vue","../../src/components/layout/desktop/aside/tag.vue","../../src/components/layout/desktop/aside/anchor.vue","../../src/components/widget/calendar.vue","../../src/components/layout/desktop/aside/calendar.vue","../../src/components/layout/desktop/aside/index.vue","../../src/components/layout/desktop/header.vue","../../src/components/layout/desktop/footer.vue","../../src/components/layout/desktop/main.vue","../../src/components/layout/mobile/header.vue","../../src/components/layout/mobile/footer.vue","../../src/components/layout/mobile/aside.vue","../../src/components/layout/mobile/main.vue","../../src/app/index.vue","../../src/app/main.ts","../../src/composables/adsense.ts","../../src/composables/popup/root.vue","../../src/composables/popup/popup.ts","../../src/composables/popup/image.ts","../../src/composables/popup/index.ts","../../src/effects/amplitude.ts","../../src/transforms/text-2-image.ts","../../src/effects/titler.ts","../../src/effects/slogan.ts","../../src/effects/exporter.ts","../../src/effects/sticky.ts","../../src/effects/emoji-23333.ts","../../src/csr.ts"],"sourcesContent":["/**\n * @file Language keys\n * @module language.key\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport enum LanguageKey {\n  APP_SLOGAN = 'app-slogan',\n  CATEGORY_INSIGHT = 'insight',\n  CATEGORY_CODE = 'code',\n  PAGE_HOME = 'home',\n  PAGE_GITHUB = 'github',\n  PAGE_LENS = 'lens',\n  PAGE_ABOUT = 'about',\n  PAGE_SPONSOR = 'sponsor',\n  PAGE_GUESTBOOK = 'guestbook',\n  PAGE_APP = 'app',\n  PAGE_ARCHIVE = 'archive',\n  STATISTIC_ARTICLES = 'statistic-articles',\n  STATISTIC_COMMENTS = 'statistic-comments',\n  STATISTIC_TAGS = 'statistic-tags',\n  STATISTIC_TODAY_VIEWS = 'statistic-today-views',\n  STATISTIC_TOTAL_VIEWS = 'statistic-total-views',\n  STATISTIC_TOTAL_UPVOTES = 'statistic-total-upvotes',\n  STATISTIC_AVERAGE_EMOTION = 'statistic-average-emotion',\n  EMPTY_PLACEHOLDER = 'common-empty-placeholder',\n  NOT_FOUND = 'not-found',\n  BACK_TO_HOME_PAGE = 'back-to-home-page',\n  GUESTBOOK_SLOGAN = 'guestbook-banner-slogan',\n  AD = 'ad',\n  BARRAGE = 'barrage',\n  FEEDBACK = 'feedback',\n  TO_TOP = 'to-page-top',\n  TO_BOTTOM = 'to-page-bottom',\n  ORIGIN_ORIGINAL = 'original',\n  ORIGIN_REPRINT = 'reprint',\n  ORIGIN_HYBRID = 'hybrid',\n  ACTION_ON = 'on',\n  ACTION_OFF = 'off',\n  MUSIC_PLACEHOLDER = 'music-placeholder',\n  SEARCH_PLACEHOLDER = 'search-input-placeholder',\n  HOT_ARTICLE_LIST_TITLE = 'hot-article-list-title',\n  ANNOUNCEMENT_PLACEHOLDER = 'announcement-empty-placeholder',\n  CATEGORY_UNCATEGORIZED = 'category-uncategorized',\n  TAG_PLACEHOLDER = 'tag-placeholder',\n  ARTICLE_TITLE = 'article-title',\n  ARTICLE_VIEWS = 'article-views',\n  ARTICLE_PLACEHOLDER = 'article-empty-placeholder',\n  ARTICLE_READ_ALL = 'read-all-article-content',\n  ARTICLE_RENDERING = 'rendering',\n  ARTICLE_LIST_LOADMORE = 'loadmore',\n  ARTICLE_LIST_LOADING = 'loading',\n  ARTICLE_LIST_NO_MORE = 'no-more',\n  COMMENT_LIST_EMPTY = 'comment-list-placeholder',\n  COMMENT_UPVOTE = 'comment-likes',\n  COMMENT_DOWNVOTE = 'comment-dislikes',\n  COMMENT_REPLY = 'reply-comment',\n  COMMENT_DELETE = 'delete-comment',\n  COMMENT_DELETE_CONFIRM = 'delete-comment-confirm',\n  COMMENT_REPLY_CANCEL = 'cancel-reply-comment',\n  COMMENT_MODERATOR = 'comment-moderator',\n  COMMENT_SORT_OLD = 'oldest-comments',\n  COMMENT_SORT_NEW = 'newest-comments',\n  COMMENT_SORT_HOT = 'hottest-comments',\n  COMMENT_POST_NAME = 'comment-author-name',\n  COMMENT_POST_EMAIL = 'comment-author-email',\n  COMMENT_POST_SITE = 'comment-author-site-url',\n  COMMENT_POST_CONTENT = 'comment-content',\n  COMMENT_POST_PLACEHOLDER = 'comment-box-placeholder',\n  COMMENT_POST_ERROR_CONTENT = 'comment-submit-failed-of-content-error',\n  QUERY_PARAMS_ERROR = 'query-params-error',\n  POST_ACTION_ERROR = 'post-requiest-failed-of-other-error',\n  SUBMIT = 'submit-data',\n  SUBMITTING = 'submitting',\n  MOMENT_AM = 'moment-am',\n  MOMENT_PM = 'moment-pm',\n  MOMENT_JUST_NOW = 'moment-just-now',\n  MOMENT_MINUTES = 'moment-minutes',\n  MOMENT_HOURS = 'moment-hours',\n  MOMENT_WEEKS = 'moment-weeks',\n  MOMENT_DAYS = 'moment-days',\n  MOMENT_MONTHS = 'moment-months',\n  MOMENT_YEAR = 'moment-year',\n  MOMENT_AGO = 'moment-ago'\n}\n","/**\n * @file App config\n * @module config.app\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const DEFAULT_DELAY = 468\nexport const LONG_ARTICLE_THRESHOLD = 16688\n\nexport const META = Object.freeze({\n  title: 'Surmon.me',\n  zh_sub_title: '',\n  en_sub_title: 'Come into the wild',\n  zh_biography: '',\n  en_biography: 'Either write something worth reading or do something worth writing.',\n  url: 'https://surmon.me',\n  domain: 'surmon.me',\n  author: 'Surmon',\n  primary: '#0088f5'\n})\n\nexport const GEO_INFO = Object.freeze({\n  zh_title: '',\n  en_title: 'UTC +08:00 ~ +09:00',\n  coordinates: [103.830391822121, 1.340863]\n})\n\nexport const MAPBOX_CONFIG = Object.freeze({\n  // readonly token\n  TOKEN: 'pk.eyJ1Ijoic3VybW9uIiwiYSI6ImNsNDE4YmkzNjB2Z2wzY3F5dWg2M2tqeWIifQ.JhgYGFI4zsuNiX9dH-pBDg',\n  STYLE_LIGHT: 'mapbox://styles/surmon/cl41fktzn000f14pet94oo1u4',\n  STYLE_DARK: 'mapbox://styles/surmon/cl41gy1qo000l15ry20j5ae0k',\n  ZOOM: 11.337439,\n  CENTER: [121.4930539351185, 31.227570979004497]\n})\n\nexport const IDENTITIES = Object.freeze({\n  GOOGLE_ANALYTICS_TRACKING_ID: 'UA-84887611-3',\n  GOOGLE_ADSENSE_PUBLISHER_ID: 'ca-pub-4710915636313788',\n  YOUTUBE_CHANNEL_ID: 'UCoL-j6T28PLSJ2U6ZdONS0w',\n  MUSIC_163_BGM_ALBUM_ID: '638949385',\n  DOUBAN_USER_ID: '56647958',\n  GITHUB_USER_NAME: 'surmon-china',\n  TWITTER_USER_NAME: 'surmon7788',\n  INSTAGRAM_USERNAME: 'surmon666',\n  INSTAGRAM_FB_ID: '17841405600281893',\n  BTC_ADDRESS: 'bc1qhpdu03tnexkj4xsm3lqzyjdddz6z0rj2n7fsze',\n  ETH_ADDRESS: '0xaD556974D449126efdeF23f4FF581861C301cB77'\n})\n\nexport const VALUABLE_LINKS = Object.freeze({\n  RSS: '/rss.xml',\n  SITE_MAP: '/sitemap.xml',\n  UPTIME_STATUS: 'https://stats.uptimerobot.com/Q2k7OTXxJN',\n  NPM_HOMEPAGE: 'https://www.npmjs.com/~surmon',\n  PAYPAL: 'https://paypal.me/surmon',\n  GITHUB_SPONSORS: `https://github.com/sponsors/${IDENTITIES.GITHUB_USER_NAME}`,\n  GITHUB: `https://github.com/${IDENTITIES.GITHUB_USER_NAME}`,\n  GITHUB_SURMON_ME: 'https://github.com/surmon-china/surmon.me',\n  GITHUB_NODEPRESS: 'https://github.com/surmon-china/nodepress',\n  GITHUB_SURMON_ME_NATIVE: 'https://github.com/surmon-china/surmon.me.native',\n  GITHUB_BLOG_STAR_LIST: 'https://github.com/stars/surmon-china/lists/surmon-me',\n  MARKDOWN: 'https://daringfireball.net/projects/markdown/',\n  GOOGLE_MY_MAP: `https://www.google.com/maps/d/embed?mid=1sRx6t0Yj1TutbwORCvjwTMgr70r62Z6w&z=3`,\n  GOOGLE_MY_MAP_KML: `https://www.google.com/maps/d/u/0/kml?forcekml=1&mid=1sRx6t0Yj1TutbwORCvjwTMgr70r62Z6w`,\n  DISCORD_GROUP: 'https://discord.surmon.me',\n  TELEGRAM_GROUP: 'https://t.me/+Z2wsxogVbYM2ZmE1',\n  MUSIC_163: `https://music.163.com/#/playlist?id=${IDENTITIES.MUSIC_163_BGM_ALBUM_ID}`,\n  YOUTUBE_CHANNEL: 'https://www.youtube.com/@surmon_v',\n  TELEGRAM: 'https://t.me/surmon',\n  OPENSEA: 'https://opensea.io/Surmon',\n  DOUBAN: 'https://www.douban.com/people/nocower',\n  DOUBAN_MOVIE: `https://movie.douban.com/people/nocower/collect`,\n  QUORA: 'https://www.quora.com/profile/Surmon',\n  LINKEDIN: 'https://www.linkedin.com/in/surmon',\n  INSTAGRAM: `https://www.instagram.com/${IDENTITIES.INSTAGRAM_USERNAME}`,\n  TWITTER: `https://twitter.com/${IDENTITIES.TWITTER_USER_NAME}`\n})\n","import type { LanguageMap } from '.'\nimport { LanguageKey } from './key'\nimport { META } from '/@/config/app.config'\n\nexport const zhLangMap: LanguageMap = {\n  [LanguageKey.APP_SLOGAN]: META.zh_sub_title,\n  [LanguageKey.PAGE_HOME]: '',\n  [LanguageKey.CATEGORY_INSIGHT]: '',\n  [LanguageKey.CATEGORY_CODE]: '',\n  [LanguageKey.PAGE_GITHUB]: '',\n  [LanguageKey.PAGE_ARCHIVE]: '',\n  [LanguageKey.PAGE_GUESTBOOK]: '',\n  [LanguageKey.PAGE_ABOUT]: '',\n  [LanguageKey.PAGE_SPONSOR]: '',\n  [LanguageKey.PAGE_APP]: '',\n  [LanguageKey.PAGE_LENS]: '',\n  [LanguageKey.STATISTIC_ARTICLES]: '',\n  [LanguageKey.STATISTIC_COMMENTS]: '',\n  [LanguageKey.STATISTIC_TAGS]: '',\n  [LanguageKey.STATISTIC_TODAY_VIEWS]: '',\n  [LanguageKey.STATISTIC_TOTAL_VIEWS]: '',\n  [LanguageKey.STATISTIC_TOTAL_UPVOTES]: '',\n  [LanguageKey.STATISTIC_AVERAGE_EMOTION]: '',\n  [LanguageKey.EMPTY_PLACEHOLDER]: '',\n  [LanguageKey.NOT_FOUND]: ' ',\n  [LanguageKey.BACK_TO_HOME_PAGE]: ' ',\n  [LanguageKey.GUESTBOOK_SLOGAN]: ' ',\n  [LanguageKey.AD]: '',\n  [LanguageKey.BARRAGE]: '',\n  [LanguageKey.FEEDBACK]: '',\n  [LanguageKey.TO_TOP]: '',\n  [LanguageKey.TO_BOTTOM]: '',\n  [LanguageKey.ORIGIN_ORIGINAL]: '',\n  [LanguageKey.ORIGIN_REPRINT]: '',\n  [LanguageKey.ORIGIN_HYBRID]: '',\n  [LanguageKey.ACTION_ON]: '',\n  [LanguageKey.ACTION_OFF]: '',\n  [LanguageKey.MUSIC_PLACEHOLDER]: '',\n  [LanguageKey.SEARCH_PLACEHOLDER]: '',\n  [LanguageKey.ANNOUNCEMENT_PLACEHOLDER]: '',\n  [LanguageKey.CATEGORY_UNCATEGORIZED]: '',\n  [LanguageKey.TAG_PLACEHOLDER]: '',\n  [LanguageKey.ARTICLE_TITLE]: '',\n  [LanguageKey.ARTICLE_VIEWS]: '',\n  [LanguageKey.ARTICLE_PLACEHOLDER]: '',\n  [LanguageKey.ARTICLE_READ_ALL]: '',\n  [LanguageKey.ARTICLE_RENDERING]: '..',\n  [LanguageKey.HOT_ARTICLE_LIST_TITLE]: '',\n  [LanguageKey.ARTICLE_LIST_LOADMORE]: '',\n  [LanguageKey.ARTICLE_LIST_LOADING]: '',\n  [LanguageKey.ARTICLE_LIST_NO_MORE]: '',\n  [LanguageKey.COMMENT_LIST_EMPTY]: '',\n  [LanguageKey.COMMENT_UPVOTE]: '',\n  [LanguageKey.COMMENT_DOWNVOTE]: '',\n  [LanguageKey.COMMENT_DELETE]: '',\n  [LanguageKey.COMMENT_DELETE_CONFIRM]: '',\n  [LanguageKey.COMMENT_REPLY]: '',\n  [LanguageKey.COMMENT_REPLY_CANCEL]: '',\n  [LanguageKey.COMMENT_MODERATOR]: '',\n  [LanguageKey.COMMENT_SORT_OLD]: '',\n  [LanguageKey.COMMENT_SORT_NEW]: '',\n  [LanguageKey.COMMENT_SORT_HOT]: '',\n  [LanguageKey.COMMENT_POST_NAME]: '',\n  [LanguageKey.COMMENT_POST_EMAIL]: '',\n  [LanguageKey.COMMENT_POST_SITE]: '',\n  [LanguageKey.COMMENT_POST_CONTENT]: '',\n  [LanguageKey.COMMENT_POST_PLACEHOLDER]: '',\n  [LanguageKey.COMMENT_POST_ERROR_CONTENT]: ' 3000 ',\n  [LanguageKey.QUERY_PARAMS_ERROR]: '',\n  [LanguageKey.POST_ACTION_ERROR]: ' > ',\n  [LanguageKey.SUBMIT]: '',\n  [LanguageKey.SUBMITTING]: '...',\n  [LanguageKey.MOMENT_AM]: '',\n  [LanguageKey.MOMENT_PM]: '',\n  [LanguageKey.MOMENT_JUST_NOW]: '',\n  [LanguageKey.MOMENT_MINUTES]: '',\n  [LanguageKey.MOMENT_HOURS]: '',\n  [LanguageKey.MOMENT_WEEKS]: '',\n  [LanguageKey.MOMENT_DAYS]: '',\n  [LanguageKey.MOMENT_MONTHS]: '',\n  [LanguageKey.MOMENT_YEAR]: '',\n  [LanguageKey.MOMENT_AGO]: (args: { date: string }) => `${args.date}`\n}\n","import type { LanguageMap } from '.'\nimport { LanguageKey } from './key'\nimport { META } from '/@/config/app.config'\n\nexport const enLangMap: LanguageMap = {\n  [LanguageKey.APP_SLOGAN]: META.en_sub_title,\n  [LanguageKey.PAGE_HOME]: 'Home',\n  [LanguageKey.CATEGORY_INSIGHT]: 'Insight',\n  [LanguageKey.CATEGORY_CODE]: 'Code',\n  [LanguageKey.PAGE_ARCHIVE]: 'Archive',\n  [LanguageKey.PAGE_GITHUB]: 'GitHub',\n  [LanguageKey.PAGE_ABOUT]: 'About',\n  [LanguageKey.PAGE_GUESTBOOK]: 'Guestbook',\n  [LanguageKey.PAGE_SPONSOR]: 'Sponsor',\n  [LanguageKey.PAGE_APP]: 'APP',\n  [LanguageKey.PAGE_LENS]: 'Lens',\n  [LanguageKey.STATISTIC_ARTICLES]: 'Articles',\n  [LanguageKey.STATISTIC_COMMENTS]: 'Comments',\n  [LanguageKey.STATISTIC_TAGS]: 'Tags',\n  [LanguageKey.STATISTIC_TODAY_VIEWS]: 'Today views',\n  [LanguageKey.STATISTIC_TOTAL_VIEWS]: 'Total views',\n  [LanguageKey.STATISTIC_TOTAL_UPVOTES]: 'Total upvotes',\n  [LanguageKey.STATISTIC_AVERAGE_EMOTION]: 'Rating',\n  [LanguageKey.EMPTY_PLACEHOLDER]: 'NULL',\n  [LanguageKey.NOT_FOUND]: 'Arrives here at last',\n  [LanguageKey.BACK_TO_HOME_PAGE]: 'Drive by',\n  [LanguageKey.GUESTBOOK_SLOGAN]: 'You have come a long way',\n  [LanguageKey.AD]: 'AD',\n  [LanguageKey.BARRAGE]: 'Barrage',\n  [LanguageKey.FEEDBACK]: 'Feedback',\n  [LanguageKey.TO_TOP]: 'To top',\n  [LanguageKey.TO_BOTTOM]: 'Next screen',\n  [LanguageKey.ORIGIN_ORIGINAL]: 'OG',\n  [LanguageKey.ORIGIN_REPRINT]: 'RPT',\n  [LanguageKey.ORIGIN_HYBRID]: 'HY',\n  [LanguageKey.ACTION_ON]: 'on',\n  [LanguageKey.ACTION_OFF]: 'off',\n  [LanguageKey.MUSIC_PLACEHOLDER]: 'The music, the soul of man',\n  [LanguageKey.SEARCH_PLACEHOLDER]: 'Search...',\n  [LanguageKey.CATEGORY_UNCATEGORIZED]: 'Uncategorized',\n  [LanguageKey.ANNOUNCEMENT_PLACEHOLDER]: 'No announcements',\n  [LanguageKey.TAG_PLACEHOLDER]: 'No tags',\n  [LanguageKey.HOT_ARTICLE_LIST_TITLE]: 'Hottest',\n  [LanguageKey.ARTICLE_PLACEHOLDER]: 'No articles',\n  [LanguageKey.ARTICLE_TITLE]: 'Articles',\n  [LanguageKey.ARTICLE_VIEWS]: 'views',\n  [LanguageKey.ARTICLE_READ_ALL]: 'Show Full Article',\n  [LanguageKey.ARTICLE_RENDERING]: 'Rendering...',\n  [LanguageKey.ARTICLE_LIST_LOADMORE]: 'Loadmore',\n  [LanguageKey.ARTICLE_LIST_LOADING]: 'Loading...',\n  [LanguageKey.ARTICLE_LIST_NO_MORE]: 'No more',\n  [LanguageKey.COMMENT_LIST_EMPTY]: 'Be the first to comment',\n  [LanguageKey.COMMENT_UPVOTE]: 'upvote',\n  [LanguageKey.COMMENT_DOWNVOTE]: 'downvote',\n  [LanguageKey.COMMENT_DELETE]: 'delete',\n  [LanguageKey.COMMENT_DELETE_CONFIRM]:\n    'Are you sure you want to delete this comment? You cannot undo this action.',\n  [LanguageKey.COMMENT_REPLY]: 'reply',\n  [LanguageKey.COMMENT_REPLY_CANCEL]: 'cancel reply',\n  [LanguageKey.COMMENT_MODERATOR]: 'Moderator',\n  [LanguageKey.COMMENT_SORT_OLD]: 'Oldest',\n  [LanguageKey.COMMENT_SORT_NEW]: 'Newest',\n  [LanguageKey.COMMENT_SORT_HOT]: 'Hottest',\n  [LanguageKey.COMMENT_POST_NAME]: 'name',\n  [LanguageKey.COMMENT_POST_EMAIL]: 'email',\n  [LanguageKey.COMMENT_POST_SITE]: 'site',\n  [LanguageKey.COMMENT_POST_CONTENT]: 'content',\n  [LanguageKey.COMMENT_POST_PLACEHOLDER]: 'Hit the nail on the head',\n  [LanguageKey.COMMENT_POST_ERROR_CONTENT]: 'Content requirements are within 3000 words!',\n  [LanguageKey.QUERY_PARAMS_ERROR]: 'Invalid query params: ',\n  [LanguageKey.POST_ACTION_ERROR]: 'Failed! Get error detail in console',\n  [LanguageKey.SUBMIT]: 'Submit',\n  [LanguageKey.SUBMITTING]: 'Submitting...',\n  [LanguageKey.MOMENT_AM]: 'AM',\n  [LanguageKey.MOMENT_PM]: 'PM',\n  [LanguageKey.MOMENT_JUST_NOW]: 'Just now',\n  [LanguageKey.MOMENT_MINUTES]: 'minutes',\n  [LanguageKey.MOMENT_HOURS]: 'hours',\n  [LanguageKey.MOMENT_WEEKS]: 'weeks',\n  [LanguageKey.MOMENT_DAYS]: 'days',\n  [LanguageKey.MOMENT_MONTHS]: 'months',\n  [LanguageKey.MOMENT_YEAR]: 'year',\n  [LanguageKey.MOMENT_AGO]: (args: { date: string }) => `${args.date} ago`\n}\n","/**\n * @file I18n language\n * @module language\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport type { I18nLanguage, I18nValueRender } from '/@/composables/i18n'\nexport { LanguageKey } from './key'\nimport { LanguageKey } from './key'\nimport { zhLangMap } from './lang-zh'\nimport { enLangMap } from './lang-en'\n\nexport type LanguageValue = string | I18nValueRender\nexport type LanguageMap = Record<LanguageKey, LanguageValue>\n\nexport enum Language {\n  English = 'en',\n  Chinese = 'zh'\n}\n\nexport const languages: I18nLanguage<LanguageKey>[] = [\n  {\n    code: Language.Chinese,\n    iso: 'zh-CN',\n    name: '',\n    data: zhLangMap\n  },\n  {\n    code: Language.English,\n    iso: 'en-US',\n    name: 'English',\n    data: enLangMap\n  }\n]\n","/**\n * @file App environment\n * @module app.environment\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const isServer = import.meta.env.SSR\nexport const isClient = !isServer\n","/**\n * @file App universal context\n * @module universal.context\n * @author Surmon <https://github.com/surmon-china>\n */\n\n// https://github.com/nuxt/framework/blob/main/packages/nitro/src/runtime/app/render.ts\nimport { watchEffect } from 'vue'\nimport { isClient, isServer } from '/@/app/environment'\n\nexport interface SSRContext {\n  [key: string]: any\n}\n\n// context\nconst SSR_CONTEXT_KEY = '__INITIAL_SSR_CONTEXT__'\nexport const renderSSRContextScript = (data: string) => {\n  return `<script>window.${SSR_CONTEXT_KEY} = ${data}</script>`\n}\nexport const getSSRContextData = (): Partial<SSRContext> | null => {\n  return (window as any)[SSR_CONTEXT_KEY] || null\n}\n\n// ssr context\nlet ssrContext: Partial<SSRContext> = {}\n\nexport function rebirthSSRContext(app: any) {\n  ssrContext = Object.assign({}, {})\n  app.config.globalProperties.$ssrContext = ssrContext\n  return ssrContext\n}\nexport function getSSRContextByApp(app: any) {\n  return app.config.globalProperties.$ssrContext || ssrContext\n}\n\nexport const setSSRContext = (key: keyof SSRContext, value: any) => {\n  ssrContext[key] = value ? JSON.parse(JSON.stringify(value)) : value\n}\nexport const getSSRContext = (key: keyof SSRContext) => {\n  return isClient ? getSSRContextData()?.[key] : ssrContext[key]\n}\n\n/**\n * Allows full control of the hydration cycle to set and receive data from the server.\n *\n * @param key a unique key to identify the data in the Nuxt payload\n * @param get a function that returns the value to set the initial data\n * @param set a function that will receive the data on the client-side\n * @link https://github.com/nuxt/framework/blob/main/packages/nuxt3/src/app/composables/hydrate.ts\n * @example\n    useHydration(\n      'store',\n      () => pinia.state.value,\n      (storeState) => (pinia.state.value = storeState)\n    )\n */\n// MARK: memory leak\nexport const useHydration = <T>(key: keyof SSRContext, get: () => T, set: (value: T) => void) => {\n  if (isServer) {\n    watchEffect(() => {\n      setSSRContext(key, get())\n    })\n  }\n  if (isClient) {\n    set(getSSRContext(key))\n  }\n}\n","/**\n * @file App universal ref\n * @module universal.ref\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { Ref, ref, customRef } from 'vue'\nimport { setSSRContext, getSSRContext } from './context'\nimport { isClient } from '/@/app/environment'\n\nconst getRefData = (key: string) => getSSRContext('refs')[key]\nconst setRefData = (key: string, value: any) => {\n  setSSRContext('refs', {\n    ...getSSRContext('refs'),\n    [key]: value\n  })\n}\n\nconst getValue = <T>(value: T | (() => T)): T => {\n  return value instanceof Function ? value() : value\n}\n\nconst isProxyable = (value: unknown): value is Record<string, unknown> => {\n  return Boolean(value) && typeof value === 'object'\n}\n\n// server write only | client read only\n// https://github.com/nuxt-community/composition-api/blob/main/src/runtime/composables/ssr-ref.ts\nexport const universalRef = <T>(key: string, sourceValue: T | (() => T)): Ref<T> => {\n  let value = isClient ? getRefData(key) ?? getValue(sourceValue) : getValue(sourceValue)\n\n  // Client > return ref value\n  if (isClient) {\n    return ref(value) as Ref<T>\n  }\n\n  // Server > return customRef (sync setRef)\n  if (sourceValue instanceof Function) {\n    setRefData(key, value)\n  }\n\n  const getProxy = <T extends Record<string | number, any>>(\n    track: () => void,\n    trigger: () => void,\n    observable: T\n  ): T => {\n    return new Proxy(observable, {\n      get(target, prop: string) {\n        track()\n        if (isProxyable(target[prop])) {\n          return getProxy(track, trigger, target[prop])\n        }\n\n        const value = Reflect.get(target, prop)\n        return typeof value === 'function' ? value.bind(target) : value\n      },\n      set(object, prop, newValue) {\n        const result = Reflect.set(object, prop, newValue)\n        setRefData(key, value)\n        trigger()\n        return result\n      }\n    })\n  }\n\n  return customRef((track, trigger) => ({\n    get: () => {\n      track()\n      return isProxyable(value) ? getProxy(track, trigger, value) : value\n    },\n    set: (v: T) => {\n      setRefData(key, v)\n      value = v\n      trigger()\n    }\n  }))\n}\n","/**\n * @file Error constant\n * @module constant.error\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const BAD_REQUEST = 400\nexport const FORBIDDEN = 403\nexport const NOT_FOUND = 404\nexport const INVALID_ERROR = 500\n","/**\n * @file UA parser\n * @module transform.ua\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport parser from 'ua-parser-js'\nimport { Language } from '/@/language'\n\nexport const uaParser = (userAgent: string) => {\n  const parseResult = parser(userAgent || '')\n  const browserName = String(parseResult.browser.name).toLowerCase()\n  const isTargetDevice = (browsers: string[]) => {\n    return browsers.some((browser) => browser.toLowerCase() === browserName)\n  }\n\n  return {\n    result: parseResult,\n    isIE: isTargetDevice(['compatible', 'MSIE', 'IE']),\n    isEdge: isTargetDevice(['Edge']),\n    isFirefox: isTargetDevice(['Firefox']),\n    isChrome: isTargetDevice(['Chrome', 'Chromium']),\n    isSafari: isTargetDevice(['Safari']),\n    isWechat: isTargetDevice(['Wechat']),\n    isIos: parseResult.os.name === 'iOS',\n    isAndroid: parseResult.os.name === 'Android',\n    isMobile: parseResult.device.type === 'mobile'\n  }\n}\n\nconst isTargetLanguageUser = (language: UaLanguage, targetLang: string) => {\n  if (typeof language === 'string') {\n    return language.includes(targetLang)\n  }\n  if (Array.isArray(language)) {\n    return language.some((lang) => lang.includes(targetLang))\n  }\n  return false\n}\nexport type UaLanguage = string | string[]\nexport const isEnUser = (language: UaLanguage) => isTargetLanguageUser(language, Language.English)\nexport const isZhUser = (language: UaLanguage) => {\n  return language ? isTargetLanguageUser(language, Language.Chinese) : true\n}\n","/**\n * @file App local global state\n * @module app.state\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { App, inject, ref, computed, reactive, readonly } from 'vue'\nimport { INVALID_ERROR } from '/@/constants/error'\nimport { uaParser, isZhUser } from '/@/transforms/ua'\nimport { universalRef, onClient } from '/@/universal'\n\ntype RenderErrorValue = RenderError | null\nexport interface RenderError {\n  code: number\n  message: string\n}\n\nexport enum ImageExt {\n  WebP = 'webp',\n  Jpg = 'jpeg'\n}\n\nexport enum LayoutColumn {\n  Normal = 0,\n  Wide = 1, // 3 column\n  Full = 2 // full page\n}\n\nexport interface GlobalRawState {\n  renderError: RenderErrorValue\n  userAgent: string\n  language: string\n  layout: LayoutColumn\n}\n\nexport interface GlobalStateConfig {\n  userAgent: string\n  language: string\n  layout: LayoutColumn\n}\n\nconst GlobalStateSymbol = Symbol('globalState')\nexport type GlobalState = ReturnType<typeof createGlobalState>\nexport const createGlobalState = (config: GlobalStateConfig) => {\n  // Render error\n  const renderError = universalRef<RenderErrorValue>('error', () => null)\n  const defaultError = { code: INVALID_ERROR }\n  const setRenderError = (error: any) => {\n    onClient(() => {\n      console.warn('App error:', error)\n    })\n    if (!error) {\n      // clear error\n      renderError.value = null\n    } else if (error instanceof Error) {\n      // new Error\n      renderError.value = {\n        code: (error as any).code ?? defaultError.code,\n        message: error.message\n      }\n    } else if (typeof error === 'string') {\n      // error message\n      renderError.value = {\n        ...defaultError,\n        message: error\n      }\n    } else {\n      // error object -> axios | component\n      renderError.value = {\n        ...error,\n        code: error.status || error.status || defaultError.code\n      }\n    }\n  }\n\n  // Hydrated\n  const isHydrated = ref(false)\n  const setHydrate = () => {\n    isHydrated.value = true\n  }\n\n  // UserAgent & device info\n  const userAgent = reactive({\n    original: config.userAgent,\n    language: config.language,\n    isZhUser: isZhUser(config.language),\n    ...uaParser(config.userAgent)\n  })\n\n  // UI layout\n  const layoutValue = ref(config.layout)\n  const layoutColumn = computed(() => ({\n    layout: layoutValue.value,\n    isNormal: layoutValue.value === LayoutColumn.Normal,\n    isWide: layoutValue.value === LayoutColumn.Wide,\n    isFull: layoutValue.value === LayoutColumn.Full\n  }))\n  const setLayoutColumn = (layout: LayoutColumn) => {\n    if (layout !== layoutValue.value) {\n      layoutValue.value = layout\n    }\n  }\n\n  // MARK: Using `jpg` format on mobile/WeChat/Safari\n  const imageExt = computed(() => {\n    const imageExtValue =\n      userAgent.isMobile || userAgent.isWechat || userAgent.isSafari\n        ? (ImageExt.Jpg as ImageExt)\n        : (ImageExt.WebP as ImageExt)\n    return {\n      ext: imageExtValue,\n      isJpg: imageExtValue === ImageExt.Jpg,\n      isWebP: imageExtValue === ImageExt.WebP\n    }\n  })\n\n  // Global switchers\n  const switcher = reactive({\n    sponsor: false,\n    feedback: false,\n    statement: false\n  })\n  const toggleSwitcher = (key: keyof typeof switcher, value: boolean) => {\n    switcher[key] = value\n  }\n\n  // export state\n  const toRawState = (): GlobalRawState => ({\n    renderError: renderError.value,\n    userAgent: userAgent.original,\n    language: userAgent.language,\n    layout: layoutValue.value\n  })\n\n  const globalState = {\n    toRawState,\n    // Render error state\n    renderError: readonly(renderError),\n    setRenderError,\n    // Hydrate state\n    isHydrated: readonly(isHydrated),\n    setHydrate,\n    // Layout state\n    layoutColumn,\n    setLayoutColumn,\n    // Device state\n    userAgent: readonly(userAgent),\n    imageExt,\n    // Global switchers\n    switcher: readonly(switcher),\n    toggleSwitcher\n  }\n\n  return {\n    ...globalState,\n    install(app: App) {\n      app.provide(GlobalStateSymbol, globalState)\n    }\n  }\n}\n\nexport const useGlobalState = (): GlobalState => {\n  return inject(GlobalStateSymbol) as GlobalState\n}\n","/**\n * @file App universal prefetch\n * @module universal.prefetch\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { onBeforeMount, onServerPrefetch } from 'vue'\nimport { isServer, isClient } from '/@/app/environment'\nimport { useGlobalState } from '/@/app/state'\n\n// onServerPrefetch === async setup\n// onServerPreFetch: https://github.com/vuejs/composition-api/pull/198/files\n// https://github.com/vuejs/vue-next/blob/master/packages/server-renderer/src/render.ts#L96\n// https://github.com/nuxt-community/composition-api/blob/main/src/fetch.ts#L226\n// https://github.com/nuxt/framework/blob/main/packages/nuxt3/src/app/composables/asyncData.ts\n// https://github.com/nuxt-community/composition-api/blob/main/src/runtime/composables/async.ts\nexport const useUniversalFetch = (fetcher: () => Promise<any>) => {\n  const globalState = useGlobalState()\n\n  // SSR: server\n  if (isServer) {\n    onServerPrefetch(() => {\n      return fetcher().catch((error) => {\n        // HACK: Since neither `onServerPrefetch` nor `async setup` can break `renderToString`, so need to mark the status before it's thrown.\n        globalState.setRenderError(error)\n        return Promise.reject(error)\n      })\n    })\n  }\n\n  // SSR: client\n  if (isClient) {\n    // After the hydration first screen, all client actions, such as navigating to a new page, require a data request.\n    if (globalState.isHydrated.value) {\n      onBeforeMount(() => fetcher())\n    } else {\n      // Hydration: nothing needs to be done, the store data is initialized with the SSR context\n      // onServerPreFetch: https://github.com/vuejs/composition-api/pull/198/files\n      // isHydrating: https://github.com/vuejs/vue-next/issues/1723\n      // isHydrating: https://github.com/vuejs/vue-next/pull/2016\n    }\n  }\n}\n","/**\n * @file App universal\n * @module universal\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { isServer, isClient } from '/@/app/environment'\nexport * from './context'\nexport * from './ref'\nexport * from './prefetch'\n\nexport const onClient = (callback: any) => {\n  isClient && callback()\n}\n\nexport const onServer = (callback: any) => {\n  isServer && callback()\n}\n","/**\n * @file Value constant\n * @module constant.value\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const NULL = null\nexport const UNDEFINED = void 0\n\nexport const isNull = (value): value is null => value === NULL\nexport const isUndefined = (value): value is void => value === UNDEFINED\nexport const isNil = (value): value is null | void => isNull(value) || isUndefined(value)\n","/**\n * @file fetch store enhance\n * @module store.fetch-store\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { Ref, ref, shallowRef } from 'vue'\nimport { isUndefined } from '/@/constants/value'\n\nexport interface FetchStoreOptions<Data> {\n  data: Data\n  fetcher(...args: $TODO): Promise<Data>\n  once?: boolean\n  preclean?: boolean\n  shallow?: boolean\n}\n\nexport const useFetchStore = <Data>(options: FetchStoreOptions<Data>) => {\n  // default: shallow\n  const isShallow = isUndefined(options.shallow) ? true : options.shallow\n  const refWrapper = isShallow ? shallowRef : ref\n  const fetching = ref(false)\n  const fetched = ref(false)\n  const data: Ref<Data> = refWrapper<Data>(options.data) as any\n\n  const fetch = async (...args: $TODO) => {\n    // about fetch when fetched\n    if (options.once && fetched.value) {\n      return\n    }\n\n    // change state first\n    fetching.value = true\n\n    // clean data\n    if (options.preclean) {\n      data.value = options.data\n    }\n\n    // fetch data\n    try {\n      const result = await options.fetcher(...args)\n      data.value = result\n      fetched.value = true\n    } finally {\n      fetching.value = false\n    }\n  }\n\n  return {\n    data,\n    fetching,\n    fetched,\n    fetch\n  }\n}\n","/**\n * @file Anchor constant\n * @module constant.anchor\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const HEADER_ELEMENT_ID = 'A_header'\nexport const NAV_ELEMENT_ID = 'A_nav'\nexport const MAIN_ELEMENT_ID = 'A_main'\nexport const MAIN_CONTENT_ELEMENT_ID = 'A_main'\nexport const ASIDE_ELEMENT_ID = 'A_aside'\nexport const FOOTER_ELEMENT_ID = 'A_footer'\n\nexport const ARTICLE_CONTENT_ELEMENT_ID = 'A_article_content'\nexport const ARTICLE_READMORE_ELEMENT_ID = 'A_article_readmore'\nexport const ARTICLE_META_ELEMENT_ID = 'A_article_meta'\nexport const ARTICLE_SHARE_ELEMENT_ID = 'A_article_share'\nexport const ARTICLE_RELATED_ELEMENT_ID = 'A_article_related'\n\nexport const ARTICLE_CONTENT_HEADING_ELEMENT_ID_PREFIX = 'A_article_content_heading'\nexport const getArticleContentHeadingElementId = (level: number, heading: string) => {\n  return `${ARTICLE_CONTENT_HEADING_ELEMENT_ID_PREFIX}_${level}_${heading}`\n}\n\nexport const COMMENT_ELEMENT_ID = 'A_comment_warpper'\nexport const COMMENT_PUBLISHER_ELEMENT_ID = 'A_comment_publisher'\nexport const COMMENT_REPLY_PUBLISHER_ELEMENT_ID = 'A_comment_reply_publisher'\nexport const COMMENT_FOOTER_ELEMENT_ID = 'A_comment_footer'\nexport const COMMENT_ITEM_ELEMENT_ID_PREFIX = 'A_comment_content_item'\nexport const getCommentItemElementId = (commentId: string | number) => {\n  return `${COMMENT_ITEM_ELEMENT_ID_PREFIX}_${commentId}`\n}\n","/**\n * @file highlight.js\n * @module effect.highlight\n * @author Surmon <https://github.com/surmon-china>\n */\n\n// MARK: vite.config.js\nimport hljs from 'highlight.js/lib/core'\nimport go from 'highlight.js/lib/languages/go'\nimport css from 'highlight.js/lib/languages/css'\nimport sql from 'highlight.js/lib/languages/sql'\nimport php from 'highlight.js/lib/languages/php'\nimport xml from 'highlight.js/lib/languages/xml'\nimport yaml from 'highlight.js/lib/languages/yaml'\nimport json from 'highlight.js/lib/languages/json'\nimport bash from 'highlight.js/lib/languages/bash'\nimport less from 'highlight.js/lib/languages/less'\nimport scss from 'highlight.js/lib/languages/scss'\nimport rust from 'highlight.js/lib/languages/rust'\nimport shell from 'highlight.js/lib/languages/shell'\nimport nginx from 'highlight.js/lib/languages/nginx'\nimport stylus from 'highlight.js/lib/languages/stylus'\nimport python from 'highlight.js/lib/languages/python'\nimport javascript from 'highlight.js/lib/languages/javascript'\nimport typescript from 'highlight.js/lib/languages/typescript'\n\nconst languages = {\n  go,\n  css,\n  sql,\n  php,\n  xml,\n  yaml,\n  json,\n  bash,\n  less,\n  scss,\n  rust,\n  shell,\n  nginx,\n  stylus,\n  python,\n  javascript,\n  typescript\n}\n\nObject.keys(languages).forEach((name) => hljs.registerLanguage(name, languages[name]))\n\nexport default hljs\n","// import { BFF_TUNNEL_PREFIX } from '/@/config/bff.config'\n// import { TunnelModule } from '/@/constants/tunnel'\nimport { CustomElementConfig } from './'\n\n// https://zhuanlan.zhihu.com/p/349267844\n// https://github.com/ecomfe/fontmin\n// const VERSE_ZH_FONT_FAMILY = 'verse-zh-font'\n// const VERSE_ZH_FONT_FILENAME = 'FZZJ-ZZGKT.ttf'\n\nexport const verseConfig: CustomElementConfig = {\n  transform(html) {\n    if (html.startsWith('<verse ')) {\n      return html.replace('<verse ', '<p class=\"verse\" ')\n    }\n    if (html.startsWith('</verse>')) {\n      return html.replace('</verse>', '</p>')\n    }\n    return html\n  }\n  // new FontFace(...)\n  // Since FontFace does not support the size-adjest parameter,\n  // if you use JavaScript to manipulate the side effects,\n  // you will need to manually maintain the lifecycle to add the global class name\n  // MARK: No custom fonts for now\n  /*\n  style(element) {\n    const nodes = Array.from(element.querySelectorAll<HTMLParagraphElement>('p.verse[zh]'))\n    const string = nodes.map((node) => node.innerText).join('')\n    const words = Array.from(new Set(string.split('')))\n    if (!words.length) {\n      return null\n    }\n\n    const textParams = encodeURIComponent(words.join(''))\n    const fontnameParams = encodeURIComponent(VERSE_ZH_FONT_FILENAME)\n    const url = `${BFF_TUNNEL_PREFIX}/${TunnelModule.WebFont}?fontname=${fontnameParams}&text=${textParams}`\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/size-adjust\n    // https://caniuse.com/?search=size-adjust\n    return `\n      @font-face {\n        font-family: ${VERSE_ZH_FONT_FAMILY};\n        font-weight: 700;\n        font-display: swap;\n        size-adjust: 136%;\n        src: url('${url}');\n      }\n    `\n  }\n  */\n}\n","import { verseConfig } from './verse'\n\nexport enum CustomElementId {\n  Verse = 'verse'\n}\n\nexport interface CustomElementConfig {\n  /** transform custom elements (original) html string to target html string */\n  transform: (html: string) => string\n  /** specify style for target html element */\n  style?: (element: HTMLElement) => string | null\n  /** run side effects for target html element */\n  effect?: (element: HTMLElement) => void\n}\n\nexport const CUSTOM_ELEMENTS: Record<CustomElementId, CustomElementConfig> = {\n  [CustomElementId.Verse]: verseConfig\n}\n\nexport const CUSTOM_ELEMENT_LIST = Object.values(CUSTOM_ELEMENTS)\n","/**\n * @file lazy load\n * @module composable.lozad\n * @author Surmon <https://github.com/surmon-china>\n */\n\n// https://developer.mozilla.org/zh-CN/docs/Web/Performance/Lazy_loading\n// https://github.com/mfranzke/loading-attribute-polyfill\n// https://github.com/ApoorvSaxena/lozad.js\nimport lozad from 'lozad'\nimport { ref, onMounted, onBeforeUnmount, App, Plugin, Directive } from 'vue'\n\ndeclare global {\n  interface Window {\n    $lozad: typeof lozad\n  }\n}\n\nexport const LOZAD_CLASS_NAME = 'lozad'\nexport const LOADED_CLASS_NAME = 'loaded'\n\nconst lozadObserve = (target: lozad.Selector) => {\n  const observer = lozad(target, { loaded: (element) => element.classList.add(LOADED_CLASS_NAME) })\n  observer.observe()\n  return observer\n}\n\nexport const useLozad = (options?: { elementor?: () => HTMLElement; immediate?: boolean; className?: string }) => {\n  const container = ref<HTMLElement>()\n  const observer = ref<lozad.Observer | null>(null)\n\n  const observe = () => {\n    const tagretClass = options?.className || LOZAD_CLASS_NAME\n    const targetElement = options?.elementor?.() || container.value\n    if (targetElement?.querySelectorAll) {\n      const lozadElements = targetElement.querySelectorAll(`.${tagretClass}`)\n      if (lozadElements?.length) {\n        observer.value = lozadObserve(lozadElements)\n      }\n    }\n  }\n\n  const unobserve = () => {\n    if (observer.value) {\n      observer.value.observer.disconnect()\n      observer.value = null\n    }\n  }\n\n  onMounted(() => {\n    if (options?.immediate ?? true) {\n      observe()\n    }\n  })\n\n  onBeforeUnmount(() => {\n    unobserve()\n  })\n\n  return { element: container, observer, observe, unobserve }\n}\n\nexport const lozadDirective: Directive = {\n  mounted(element) {\n    element.__lozad_observer = lozadObserve(element)\n  },\n  beforeUnmount(element) {\n    element.__lozad_observer?.observer.disconnect()\n    element.__lozad_observer = null\n  }\n}\n\nexport interface LozadPluginConfig {\n  exportToGlobal?: boolean\n}\nconst install: Plugin = (app: App, config?: LozadPluginConfig) => {\n  app.directive('lozad', lozadDirective)\n  app.config.globalProperties.$lozad = lozad\n  if (config?.exportToGlobal) {\n    window.$lozad = lozad\n  }\n}\n\nexport default { install }\n","/**\n * @file Text transformer\n * @module transform.text\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport _escape from 'lodash-es/escape'\nimport _unescape from 'lodash-es/unescape'\nimport _truncate from 'lodash-es/truncate'\nimport _capitalize from 'lodash-es/capitalize'\nimport _padStart from 'lodash-es/padStart'\n\nexport const escape = _escape\nexport const unescape = _unescape\nexport const padStart = _padStart\nexport const textOverflow = _truncate\nexport const firstUpperCase = _capitalize\n\nexport function numberToKilo(count: number): string {\n  return count > 1000 ? `${parseFloat((count / 1000).toFixed(2))}k` : String(count)\n}\n\nexport function numberSplit(number: number): string {\n  return String(number).replace(/.{1,3}(?=(.{3})+$)/g, '$&,')\n}\n\nconst CHINESE_NUMBER_TEXT = ''.split('')\nconst CHINESE_NUMBER_CAPITAL_TEXT = ''.split('')\nexport const numberToChinese = (text: string | number, capital = false) => {\n  const targetText = capital ? CHINESE_NUMBER_CAPITAL_TEXT : CHINESE_NUMBER_TEXT\n  return String(text)\n    .split('')\n    .map((number) => targetText[Number(number)])\n    .join('')\n}\n","/**\n * @file Dev environment\n * @module environment\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport enum NodeEnv {\n  Development = 'development',\n  Production = 'production',\n  Test = 'test'\n}\n\nexport const NODE_ENV = process.env.NODE_ENV as NodeEnv\nexport const isDev = process.env.NODE_ENV === NodeEnv.Development\nexport const isProd = process.env.NODE_ENV === NodeEnv.Production\nexport const isTest = process.env.NODE_ENV === NodeEnv.Test\n","/**\n * @file Api config\n * @module config.api\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { isDev } from '/@/environment'\nimport { isServer } from '/@/app/environment'\n\n// common\nconst API_PROXY_URL = import.meta.env.VITE_API_PROXY_URL as string\nconst API_LOCAL_URL = import.meta.env.VITE_API_LOCAL_URL as string\nconst API_ONLINE_URL = import.meta.env.VITE_API_ONLINE_URL as string\n\n// dev: server ? online api : proxy</api>\n// If you want to develop quickly, you can use a proxy address to connect directly to the production server.\nconst DEV_API = isServer ? API_ONLINE_URL : API_PROXY_URL\n// const DEV_API = API_LOCAL_URL\n\n// prod: server ? localhost : online api\n// Using the localhost server to optimize network performance, but requires NodePress to be running on the same machine as this application.\nconst PROD_API = isServer ? API_LOCAL_URL : API_ONLINE_URL\n\nexport default {\n  FE: import.meta.env.VITE_FE_URL as string,\n  CDN: import.meta.env.VITE_CDN_URL as string,\n  PROXY: import.meta.env.VITE_PROXY_URL as string,\n  STATIC: import.meta.env.VITE_STATIC_URL as string,\n  NODEPRESS: isDev ? DEV_API : PROD_API\n}\n","/**\n * @file Markdown parser\n * @module transform.markdown\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport highlight from '/@/effects/highlight'\nimport { Marked, Renderer } from 'marked'\nimport { markedHighlight } from 'marked-highlight'\nimport { markedXhtml } from 'marked-xhtml'\nimport { mangle } from 'marked-mangle'\nimport { sanitizeUrl } from '@braintree/sanitize-url'\nimport { CUSTOM_ELEMENT_LIST } from '/@/effects/elements'\nimport { LOZAD_CLASS_NAME } from '/@/composables/lozad'\nimport { escape } from '/@/transforms/text'\nimport { META } from '/@/config/app.config'\nimport API_CONFIG from '/@/config/api.config'\n\n// https://marked.js.org\nconst highlightLangPrefix = 'language-'\nconst marked = new Marked(\n  mangle(),\n  markedXhtml(),\n  markedHighlight({\n    langPrefix: highlightLangPrefix,\n    highlight(code, language) {\n      return highlight.getLanguage(language)\n        ? highlight.highlight(code, { language }).value\n        : highlight.highlightAuto(code).value\n    }\n  })\n)\n\nmarked.setOptions({\n  gfm: true,\n  breaks: false,\n  pedantic: false,\n  headerIds: false\n})\n\n// sanitize-html:\n// https://github.com/vitejs/vite/issues/9200\n// https://github.com/vitejs/vite/issues/9238\n// https://github.com/wolfiex/GeoDraw-SvelteKit/issues/2\n// https://github.com/apostrophecms/sanitize-html/issues/560\n// https://github.com/Greenheart/idg.tools/commit/15de4725dc8fdafe2fc86c24b5c32f3646f4cb29\n// MARK: Use dompurify instead of sanitize-html because sanitize-html doesn't work in browser.\n// https://github.com/apostrophecms/sanitize-html#browser\n\n// DOMPurify:\n// https://github.com/cure53/DOMPurify#running-dompurify-on-the-server\n// https://github.com/kkomelin/isomorphic-dompurify/blob/master/src/index.js\n// https://github.com/meteor/meteor/issues/10538#issuecomment-489252418\n// https://zhuanlan.zhihu.com/p/52990313\n// https://github.com/Automattic/node-canvas\n// WORKAROUND: `yarn add canvas`\n// OSX: `brew install pkg-config cairo pango libpng jpeg giflib librsvg pixman`\n// Ubuntu: `sudo apt-get install build-essential libcairo2-dev libpango1.0-dev libjpeg-dev libgif-dev librsvg2-dev`\n\n// MARK: escape vs sanitize https://zhuanlan.zhihu.com/p/421281945\n// sanitize and escape are overlapping, for normal users, no html is allowed, so sanitize is not required.\n// if sanitize is required, you will encounter many problems.\nconst sanitizeHTML = (content: string) => content\n\nconst trimHTML = (html: string) => html.replace(/\\s+/g, ' ').replace(/\\n/g, ' ')\n\ninterface RendererCreatorOptions {\n  sanitize: boolean\n  text: (text: string) => string\n  headingId: (html: string, level: number, raw: string) => string\n}\n\nconst createRenderer = (options?: Partial<RendererCreatorOptions>): Renderer => {\n  const renderer = new Renderer()\n\n  // text\n  renderer.text = (text) => {\n    return options?.text ? options.text(text) : text\n  }\n\n  // html: escape > sanitize\n  renderer.html = (html) => {\n    const trimmed = html.trim()\n    const transformed = CUSTOM_ELEMENT_LIST.reduce((result, ce) => ce.transform(result), trimmed)\n    // https://github.com/apostrophecms/sanitize-html#default-options\n    return options?.sanitize ? sanitizeHTML(escape(transformed)) : transformed\n  }\n\n  // heading\n  renderer.heading = (html, level, raw) => {\n    const idText = options?.headingId ? `id=\"${options.headingId(html, level, raw)}\"` : ''\n    const safeedRaw = escape(raw)\n    return `<h${level} ${idText} alt=\"${safeedRaw}\" title=\"${safeedRaw}\">${html}</h${level}>`\n  }\n\n  // paragraph\n  renderer.paragraph = (text) => {\n    const trimmed = text.trim()\n    const isBlockChild = ['p', 'div', 'figure'].some((tag) => {\n      return trimmed.startsWith(`<${tag}`) && trimmed.endsWith(`</${tag}>`)\n    })\n    return isBlockChild ? text : `<p>${text}</p>`\n  }\n\n  // checkbox\n  renderer.checkbox = (checked) => {\n    return checked\n      ? `<i class=\"checkbox checked iconfont icon-checkbox-selected\"></i>`\n      : `<i class=\"checkbox iconfont icon-checkbox-unselected\"></i>`\n  }\n\n  // link: sanitize\n  renderer.link = (href, title, text) => {\n    const isSelf = href?.startsWith(META.url)\n    const isImageLink = text.includes('<img')\n    const textValue = options?.sanitize ? escape(text) : text\n    const hrefValue = options?.sanitize ? sanitizeUrl(href!) : href\n    const titleValue = options?.sanitize ? escape(title!) : title\n    return sanitizeHTML(\n      trimHTML(`\n        <a\n          href=\"${hrefValue}\"\n          target=\"_blank\"\n          class=\"${isImageLink ? 'image-link' : 'link'}\"\n          title=\"${titleValue || (isImageLink ? hrefValue : textValue)}\"\n          ${isSelf ? '' : 'rel=\"external nofollow noopener\"'}\n        >${textValue}</a>\n      `)\n    )\n  }\n\n  // image: sanitize(title, alt) > popup\n  renderer.image = (src, title, alt) => {\n    // HTTP > proxy\n    const source = sanitizeUrl(src!)?.replace(/^http:\\/\\//gi, `${API_CONFIG.PROXY}/`)\n    const titleValue = sanitizeHTML(escape(title || alt))\n    const altValue = sanitizeHTML(escape(alt!))\n\n    // figure > alt\n    return trimHTML(`\n      <div class=\"figure-wrapper\">\n        <figure class=\"image ${altValue ? 'caption' : ''}\" data-status=\"loading\">\n          <div class=\"placeholder error\">\n            <i class=\"iconfont icon-image-error\"></i>\n          </div>\n          <div class=\"placeholder loading\">\n            <div></div>\n            <div></div>\n            <div></div>\n            <div></div>\n          </div>\n          <img\n            class=\"${LOZAD_CLASS_NAME}\"\n            data-src=\"${source}\"\n            ${altValue ? `alt=\"${altValue}\"` : ''}\n            ${titleValue ? `title=\"${titleValue}\"` : ''}\n            onload=\"this.parentElement.dataset.status = 'loaded'\"\n            onerror=\"this.parentElement.dataset.status = 'error'\"\n            onclick=\"window.$popup.vImage(this.src)\"\n          />\n          ${altValue ? `<figcaption>${altValue}</figcaption>` : ''}\n        </figure>\n      </div>\n    `)\n  }\n\n  // code: line number\n  renderer.code = function (code, lang, isEscaped) {\n    const lineNumbers = code\n      .split('\\n')\n      .map((_, i) => `<li class=\"code-line-number\">${i + 1}</li>`.replace(/\\s+/g, ' '))\n      .join('')\n\n    const readOnlyAttrs = `\n      contenteditable=\"true\"\n      oncut=\"return false\"\n      onpaste=\"return false\"\n      onkeydown=\"if(event.metaKey) return true; return false;\"\n    `\n\n    return lang\n      ? `\n        <pre data-lang=\"${lang}\">\n          <ul class=\"code-lines\">${lineNumbers}</ul>\n          <code ${readOnlyAttrs} class=\"${highlightLangPrefix}${encodeURI(lang)}\">${\n            isEscaped ? code : encodeURI(code)\n          }\\n</code>\n        </pre>\\n\n      `\n      : `\n        <pre>\n          <ul class=\"code-lines\">${lineNumbers}</ul>\n          <code ${readOnlyAttrs}>${isEscaped ? code : encodeURI(code)}\\n</code>\n        </pre>\n      `\n  }\n\n  return renderer\n}\n\nexport interface MarkdownRenderOption {\n  sanitize?: boolean\n  headingIdGetter?: RendererCreatorOptions['headingId']\n}\n\nexport const markdownToHTML = (markdown: string, options?: MarkdownRenderOption) => {\n  if (!markdown || typeof markdown !== 'string') {\n    return ''\n  }\n\n  const renderOptions: Partial<RendererCreatorOptions> = {\n    sanitize: options?.sanitize ?? false,\n    headingId: options?.headingIdGetter\n  }\n\n  return marked.parse(markdown, { renderer: createRenderer(renderOptions) })\n}\n","/**\n * @file delay simulator\n * @module util.delayer\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { DEFAULT_DELAY } from '/@/config/app.config'\n\nexport const delayer = (ms: number = DEFAULT_DELAY) => {\n  const start = new Date().getTime()\n  return (action: () => void) => {\n    if (!ms) {\n      action()\n      return\n    }\n\n    const time = new Date().getTime() - start\n    const timeout = ms - time\n    const isDelay = timeout > 0\n    isDelay ? setTimeout(action, timeout) : action()\n  }\n}\n\n/**\n * @example\n * ```ts\n *  delayPromise(600, promise).then(...)\n * ```\n */\nexport const delayPromise = <T>(ms: number, promise: Promise<T>) => {\n  const delay = delayer(ms)\n  return new Promise<T>((resolve, reject) => {\n    promise.then((value) => delay(() => resolve(value))).catch(reject)\n  })\n}\n","/**\n * @file Local Storage\n * @module util.storage\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const get = (key: string) => localStorage.getItem(key)\nexport const set = (key: string, data: string) => localStorage.setItem(key, data)\nexport const remove = (key: string) => localStorage.removeItem(key)\n\nexport const setJSON = (key: string, data: any) => set(key, JSON.stringify(data))\nexport const getJSON = <T = any>(key: string): T | null => {\n  const data = get(key)\n  return typeof data === 'string' ? JSON.parse(data) : null\n}\n\nexport default {\n  get,\n  set,\n  remove,\n  setJSON,\n  getJSON\n}\n","/**\n * @file NodePress API service\n * @module service.nodepress\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport axios, { AxiosInstance, Method as AxiosMethod } from 'axios'\nimport { BAD_REQUEST } from '/@/constants/error'\nimport API_CONFIG from '/@/config/api.config'\nimport { isClient } from '/@/app/environment'\n\nexport enum NodePressResponseStatus {\n  Error = 'error',\n  Success = 'success'\n}\n\nexport type NodePressResult<T = any> = {\n  status: NodePressResponseStatus.Success\n  message: string\n  result: T\n}\n\nconst nodepress = axios.create({\n  baseURL: API_CONFIG.NODEPRESS,\n  withCredentials: true\n})\n\nnodepress.interceptors.response.use(\n  (response) => {\n    if (response.headers?.['content-type']?.includes('json')) {\n      if (response.data.status !== NodePressResponseStatus.Success) {\n        return Promise.reject(response.data)\n      }\n    }\n\n    return response.data\n  },\n  (error) => {\n    const errorJSON = error.toJSON()\n    const errorInfo = {\n      ...errorJSON,\n      config: error.config,\n      code: errorJSON.status || error.response?.status || BAD_REQUEST,\n      message: error.response?.data?.error || error.response?.statusText || errorJSON.message\n    }\n\n    const serverErrorInfo = {\n      axiosName: errorJSON.name,\n      axiosMessage: errorJSON.message,\n      npError: errorInfo.message,\n      npMessage: error.response?.data?.message || '',\n      status: errorInfo.code,\n      method: errorJSON.config.method,\n      baseURL: errorJSON.config.baseURL,\n      url: errorJSON.config.url,\n      params: errorJSON.config.params,\n      data: errorJSON.config.data,\n      headers: errorJSON.config.headers\n    }\n\n    console.debug('axios error:', isClient ? error : serverErrorInfo)\n\n    return Promise.reject(errorInfo)\n  }\n)\n\ntype Method = Exclude<Lowercase<AxiosMethod>, 'unlink' | 'purge' | 'link'> | 'request'\nconst overwrite = (method: Method) => {\n  return <T = any>(...args: Parameters<AxiosInstance[typeof method]>): Promise<NodePressResult<T>> => {\n    return (nodepress[method] as any)(...args)\n  }\n}\n\nexport default {\n  $: nodepress,\n  request: overwrite('request'),\n  head: overwrite('head'),\n  get: overwrite('get'),\n  post: overwrite('post'),\n  put: overwrite('put'),\n  patch: overwrite('patch'),\n  delete: overwrite('delete'),\n  options: overwrite('options')\n}\n","/**\n * @file Identity state\n * @module store.identity\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineStore } from 'pinia'\nimport { shallowRef, reactive, computed, unref, watch } from 'vue'\nimport { Author } from '/@/interfaces/comment'\nimport { getJSON, setJSON, remove } from '/@/utils/storage'\nimport nodepress from '/@/services/nodepress'\n\nexport type UserLocalProfile = Author\nexport enum UserType {\n  Null = 0,\n  Local = 1,\n  Disqus = 2\n}\n\ninterface IdentityState {\n  disqusConfig: any\n  user: {\n    type: UserType\n    localProfile: UserLocalProfile | null\n    disqusProfile: any | null\n  }\n  vote: {\n    likedPages: number[]\n    likedComments: number[]\n    dislikedComments: number[]\n  }\n  feedbacks: any[]\n}\n\nconst LOCAL_STORGAE_KEY = 'identity-state'\n\nexport const useIdentityStore = defineStore('identity', () => {\n  // disqus config\n  const disqusConfig = shallowRef<any>(null)\n  // user\n  const user = reactive({\n    type: UserType.Null,\n    localProfile: null as UserLocalProfile | null,\n    disqusProfile: null as any | null\n  })\n  // vote history\n  const vote = reactive({\n    likedPages: [] as number[],\n    likedComments: [] as number[],\n    dislikedComments: [] as number[]\n  })\n  // feedback history\n  const feedbacks = reactive<any[]>([])\n\n  // getters\n  const isLikedPage = computed(() => (id: number) => vote.likedPages.includes(id))\n  const isLikedComment = computed(() => (id: number) => vote.likedComments.includes(id))\n  const isDislikedComment = computed(() => (id: number) => vote.dislikedComments.includes(id))\n  const author = computed<Author | null>(() => {\n    if (user.type === UserType.Local) {\n      return user.localProfile\n    }\n    if (user.type === UserType.Disqus) {\n      return {\n        name: user.disqusProfile?.name,\n        site: user.disqusProfile?.url || user.disqusProfile?.profileUrl\n      }\n    }\n    return null\n  })\n\n  const likeComment = (commentId: number) => {\n    vote.likedComments.push(commentId)\n  }\n\n  const dislikeComment = (commentId: number) => {\n    vote.dislikedComments.push(commentId)\n  }\n\n  const likePage = (id: number) => {\n    vote.likedPages.push(id)\n  }\n\n  const addFeedback = (data) => {\n    feedbacks.push(data)\n  }\n\n  const saveLocalUser = (profile: UserLocalProfile) => {\n    user.localProfile = { ...profile }\n    user.type = UserType.Local\n  }\n\n  const removeLocalUser = () => {\n    user.type = UserType.Null\n    user.localProfile = null\n  }\n\n  const fetchDisqusLogout = async () => {\n    await nodepress.get('/disqus/oauth-logout')\n    user.type = UserType.Null\n    user.disqusProfile = null\n  }\n\n  const fetchDisqusUserInfo = async () => {\n    const response = await nodepress.get<any>('/disqus/user-info')\n    user.disqusProfile = response.result\n    user.type = UserType.Disqus\n  }\n\n  const fetchDisqusConfig = async () => {\n    const response = await nodepress.get<string>('/disqus/config')\n    disqusConfig.value = response.result\n  }\n\n  const getStoreState = () => ({\n    disqusConfig: unref(disqusConfig),\n    user: user,\n    vote: vote,\n    feedbacks: feedbacks\n  })\n\n  const setStoreState = (state: IdentityState) => {\n    disqusConfig.value = state.disqusConfig\n    user.type = state.user.type\n    user.localProfile = state.user.localProfile\n    user.disqusProfile = state.user.disqusProfile\n    vote.likedPages = state.vote.likedPages\n    vote.likedComments = state.vote.likedComments\n    vote.dislikedComments = state.vote.dislikedComments\n    feedbacks.splice(0, feedbacks.length, ...state.feedbacks)\n  }\n\n  const resetStateFromStorage = () => {\n    try {\n      const localState = getJSON<IdentityState>(LOCAL_STORGAE_KEY)\n      if (localState) {\n        setStoreState(localState)\n      }\n    } catch (error) {\n      remove(LOCAL_STORGAE_KEY)\n    }\n  }\n\n  const initOnClient = () => {\n    // 1. init disqus config\n    fetchDisqusConfig()\n    // 2. bind client storage\n    // 2.1 init state from storage\n    resetStateFromStorage()\n    // 2.2 bind state to storage\n    watch(\n      () => getStoreState(),\n      (state) => setJSON(LOCAL_STORGAE_KEY, state),\n      { deep: true }\n    )\n    // 2.3 reset state when storage changed\n    window.addEventListener('storage', (event) => {\n      if (event.key === LOCAL_STORGAE_KEY) {\n        resetStateFromStorage()\n      }\n    })\n    // 3. init and reset disqus cache\n    if (user.type === UserType.Disqus) {\n      fetchDisqusUserInfo().catch(() => {\n        user.disqusProfile = null\n        user.type = UserType.Null\n      })\n    } else {\n      user.disqusProfile = null\n    }\n  }\n\n  return {\n    disqusConfig,\n    user,\n    vote,\n    feedbacks,\n    author,\n    isLikedPage,\n    isLikedComment,\n    isDislikedComment,\n    likeComment,\n    dislikeComment,\n    likePage,\n    addFeedback,\n    saveLocalUser,\n    removeLocalUser,\n    fetchDisqusLogout,\n    fetchDisqusUserInfo,\n    fetchDisqusConfig,\n    initOnClient\n  }\n})\n","/**\n * @file Article state\n * @module store.article\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { ref, shallowRef, computed } from 'vue'\nimport { defineStore } from 'pinia'\nimport { useFetchStore } from './_fetch'\nimport { LONG_ARTICLE_THRESHOLD } from '/@/config/app.config'\nimport { getArticleContentHeadingElementId } from '/@/constants/anchor'\nimport { Article } from '/@/interfaces/article'\nimport { Pagination, PaginationList } from '/@/interfaces/common'\nimport { markdownToHTML } from '/@/transforms/markdown'\nimport { delayPromise } from '/@/utils/delayer'\nimport { isClient } from '/@/app/environment'\nimport { useIdentityStore } from './identity'\nimport nodepress from '/@/services/nodepress'\n\nexport const ARTICLE_API_PATH = '/article'\n\nexport const useHottestArticleListStore = defineStore('hottestArticleList', () => {\n  return useFetchStore<Article[]>({\n    once: true,\n    data: [],\n    async fetcher() {\n      const response = await nodepress.get<Article[]>(`${ARTICLE_API_PATH}/hottest`)\n      return response.result\n    }\n  })\n})\n\nexport const useArticleListStore = defineStore('articleList', () => {\n  const fetching = ref(false)\n  const data = shallowRef<Article[]>([])\n  const pagination = shallowRef<Pagination | null>(null)\n\n  const fetch = async (params: $TODO = {}) => {\n    const isFirstPage = !params.page || params.page === 1\n    const isLoadMore = !isFirstPage && params.page > 1\n\n    // clean list\n    if (isFirstPage) {\n      data.value = []\n      pagination.value = null\n    }\n\n    fetching.value = true\n    try {\n      const request = nodepress.get<PaginationList<Article>>(ARTICLE_API_PATH, { params })\n      const response = await (isClient ? delayPromise(520, request) : request)\n      if (isLoadMore) {\n        data.value.push(...response.result.data)\n        pagination.value = response.result.pagination\n      } else {\n        data.value = response.result.data\n        pagination.value = response.result.pagination\n      }\n    } finally {\n      fetching.value = false\n    }\n  }\n\n  return {\n    fetch,\n    fetching,\n    pagination,\n    data\n  }\n})\n\ninterface ArticleHeading {\n  text: string\n  level: number\n  id: string\n}\n\n// Use the parsing capabilities of the marked renderer to store the results in the store..\nconst renderArticleMarkdown = (markdown: string) => {\n  const headings: Array<ArticleHeading> = []\n  const html = markdownToHTML(markdown, {\n    sanitize: false,\n    headingIdGetter: (_, level, raw) => {\n      const text = raw.toLowerCase().replace(/[^a-zA-Z0-9\\u4E00-\\u9FA5]+/g, '-')\n      const id = getArticleContentHeadingElementId(level, text)\n      headings.push({ level, id, text: raw })\n      return id\n    }\n  })\n\n  return { html, headings }\n}\n\nexport const useArticleDetailStore = defineStore('articleDetail', () => {\n  const fetching = ref(false)\n  const article = ref<Article | null>(null)\n  const prevArticle = shallowRef<Article | null>(null)\n  const nextArticle = shallowRef<Article | null>(null)\n  const relatedArticles = shallowRef<Article[]>([])\n  const renderedFullContent = ref(true)\n\n  const contentLength = computed(() => {\n    return article.value?.content.length || 0\n  })\n\n  const readMinutes = computed(() => {\n    const minutes = Math.round(contentLength.value / 400)\n    return minutes < 1 ? 1 : minutes\n  })\n\n  const isLongContent = computed(() => {\n    return Boolean(article.value && contentLength.value >= LONG_ARTICLE_THRESHOLD)\n  })\n\n  const splitIndex = computed(() => {\n    if (!article.value || !isLongContent.value) {\n      return null\n    }\n    const splitLength = Math.min(LONG_ARTICLE_THRESHOLD, Math.floor(contentLength.value / 2))\n    const shortContent = article.value.content.substring(0, splitLength)\n    // breakpoint priority: H5 > H4 > H3 > \\n\\n\\n\n    const lastH5Index = shortContent.lastIndexOf('\\n##### ')\n    const lastH4Index = shortContent.lastIndexOf('\\n#### ')\n    const lastH3Index = shortContent.lastIndexOf('\\n### ')\n    const lastLineIndex = shortContent.lastIndexOf('\\n\\n\\n')\n    const splitIndex = Math.max(lastH5Index, lastH4Index, lastH3Index, lastLineIndex)\n    // console.log('- content length', contentLength.value, index, splitIndex)\n    return splitIndex\n  })\n\n  const defaultContent = computed(() => {\n    if (!article.value) {\n      return null\n    }\n    const markdown = isLongContent.value\n      ? article.value.content.substring(0, splitIndex.value!)\n      : article.value.content\n    const { html, headings } = renderArticleMarkdown(markdown)\n    return { markdown, html, headings }\n  })\n\n  const moreContent = computed(() => {\n    if (!article.value || !isLongContent.value) {\n      return null\n    }\n    const markdown = article.value.content.substring(splitIndex.value!)\n    const { html, headings } = renderArticleMarkdown(markdown)\n    return { markdown, html, headings }\n  })\n\n  const renderFullContent = () => {\n    renderedFullContent.value = true\n  }\n\n  const fetchArticleDetail = async (articleId: number) => {\n    article.value = null\n    const request = nodepress.get<Article>(`${ARTICLE_API_PATH}/${articleId}`)\n    const response = await (isClient ? delayPromise(580, request) : request)\n    article.value = response.result\n    renderedFullContent.value = !isLongContent.value\n  }\n\n  const fetchArticleContext = async (articleId: number) => {\n    prevArticle.value = null\n    nextArticle.value = null\n    relatedArticles.value = []\n    const request = nodepress.get(`${ARTICLE_API_PATH}/${articleId}/context`)\n    const response = await (isClient ? delayPromise(520, request) : request)\n    prevArticle.value = response.result.prev_article\n    nextArticle.value = response.result.next_article\n    relatedArticles.value = response.result.related_articles\n  }\n\n  const fetchCompleteArticle = (articleId: number) => {\n    fetching.value = true\n    return Promise.all([fetchArticleDetail(articleId), fetchArticleContext(articleId)]).then(() => {\n      fetching.value = false\n    })\n  }\n\n  const postArticleLike = (articleId: number) => {\n    const identityStore = useIdentityStore()\n    return nodepress\n      .post(`/vote/post`, { post_id: articleId, vote: 1, author: identityStore.author })\n      .then((response) => {\n        if (article.value) {\n          article.value.meta.likes = response.result\n        }\n      })\n  }\n\n  return {\n    fetching,\n    article,\n    prevArticle,\n    nextArticle,\n    relatedArticles,\n    defaultContent,\n    moreContent,\n    renderedFullContent,\n    isLongContent,\n    contentLength,\n    readMinutes,\n    splitIndex,\n    renderFullContent,\n    fetchCompleteArticle,\n    postArticleLike\n  }\n})\n","/**\n * @file Announcement state\n * @module store.announcement\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineStore } from 'pinia'\nimport { useFetchStore } from './_fetch'\nimport { Announcement } from '/@/interfaces/announcement'\nimport { PaginationList } from '/@/interfaces/common'\nimport nodepress from '/@/services/nodepress'\n\nexport const useAnnouncementStore = defineStore('announcement', () => {\n  return useFetchStore<Announcement[]>({\n    data: [],\n    preclean: true,\n    async fetcher(params?: any) {\n      const response = await nodepress.get<PaginationList<Announcement>>('/announcement', { params })\n      return response.result.data\n    }\n  })\n})\n","/**\n * @file Date time transformer\n * @module transform.moment\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const cloneDate = (date: Date) => {\n  return new Date(date.getTime())\n}\n\n/** deconstruction date */\nexport type HumanDate = ReturnType<typeof dateToHuman>\nexport const dateToHuman = (date: Date) => {\n  const week = date.getDay()\n  return {\n    day: date.getDate(),\n    week: week === 0 ? 7 : week,\n    month: date.getMonth() + 1,\n    year: date.getFullYear()\n  }\n}\n\nexport const isSameHumanDay = (target: HumanDate, target2: HumanDate) => {\n  const isSameDay = target.day === target2.day\n  const isSameMonth = target.month === target2.month\n  const isSameYear = target.year === target2.year\n  return isSameDay && isSameMonth && isSameYear\n}\n\n/** `HumanData` > `Date` */\nexport const humanToDate = (humanDate: Omit<HumanDate, 'week'>) => {\n  const date = new Date()\n  date.setDate(humanDate.day)\n  date.setFullYear(humanDate.year)\n  date.setMonth(humanDate.month - 1)\n  return date\n}\n\n/** `HumanData` > `YYYY-MM-DD` */\nexport const humanDateToYMD = ({ year, month, day }: Partial<Omit<HumanDate, 'week'>>, separator = '-') => {\n  const _month = month ? separator + String(month).padStart(2, '0') : ''\n  const _day = day ? separator + String(day).padStart(2, '0') : ''\n  return `${year}${_month}${_day}`\n}\n\n/** `Date` | `Date string` > `YYYY-MM-DD` */\nexport const dateToYMD = (date: Date | string, separator?: string) => {\n  const _date = typeof date === 'string' ? new Date(date) : date\n  return humanDateToYMD(dateToHuman(_date), separator)\n}\n\n/** `YYYY-MM-DD` > `Date` */\nexport const ymdToDate = (date: string) => {\n  const [year, month, day] = date.split('-').map(Number)\n  return humanToDate({ year, month, day })\n}\n\n/** `Date` | `Date string` > local date string */\nexport const toLocalString = (date: string) => {\n  return date ? new Date(date).toLocaleString() : date\n}\n","/**\n * @file Archive state\n * @module store.archive\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { computed } from 'vue'\nimport { defineStore } from 'pinia'\nimport { useFetchStore } from './_fetch'\nimport { Archive } from '/@/interfaces/archive'\nimport { Article } from '/@/interfaces/article'\nimport { dateToHuman, HumanDate } from '/@/transforms/moment'\nimport nodepress from '/@/services/nodepress'\n\nexport type ArchiveTreeList = Array<{\n  year: number\n  months: Array<{\n    month: number\n    articles: Array<Article & { createAt: HumanDate }>\n  }>\n}>\n\nexport const useArchiveStore = defineStore('archive', () => {\n  const fetchStore = useFetchStore<Archive | null>({\n    data: null,\n    once: true,\n    async fetcher() {\n      const response = await nodepress.get<Archive>('/archive')\n      return response.result\n    }\n  })\n\n  const tree = computed<ArchiveTreeList>(() => {\n    const rootTree: ArchiveTreeList = []\n    fetchStore.data.value?.articles\n      .sort(({ created_at: a }, { created_at: b }) => {\n        return Date.parse(b) - Date.parse(a)\n      })\n      .map((article) => ({\n        ...article,\n        createAt: dateToHuman(new Date(article.created_at))\n      }))\n      .forEach((article) => {\n        const { createAt } = article\n        // year\n        const yearTree = rootTree.find((ye) => ye.year === createAt.year)\n        let targetYear = yearTree\n        if (!targetYear) {\n          targetYear = { year: createAt.year, months: [] }\n          rootTree.push(targetYear)\n        }\n        // month\n        const monthTree = targetYear.months.find((mo) => mo.month === createAt.month)\n        let targetMonth = monthTree\n        if (!targetMonth) {\n          targetMonth = { month: createAt.month, articles: [] }\n          targetYear.months.push(targetMonth)\n        }\n        // article\n        targetMonth.articles.push(article)\n      })\n    return rootTree\n  })\n\n  return {\n    ...fetchStore,\n    tree\n  }\n})\n","/**\n * @file State constant\n * @module constant.state\n * @author Surmon <https://github.com/surmon-china>\n */\n\n// article.origin\nexport enum OriginState {\n  Original = 0, // \n  Reprint = 1, // \n  Hybrid = 2 // \n}\n\n// comment.post_id\nexport enum CommentPostId {\n  Guestbook = 0 // \n}\n\n// comment.pid\nexport enum CommentParentId {\n  Self = 0 // `0` means no parent comment\n}\n\nexport enum SortType {\n  Asc = 1, // \n  Desc = -1, // \n  Hottest = 2 // \n}\n","/**\n * @file Comment state\n * @module store.comment\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { ref, computed } from 'vue'\nimport { defineStore } from 'pinia'\nimport nodepress from '/@/services/nodepress'\nimport { isClient } from '/@/app/environment'\nimport { Comment } from '/@/interfaces/comment'\nimport { Pagination, PaginationList } from '/@/interfaces/common'\nimport { SortType, CommentParentId } from '/@/constants/state'\nimport { UNDEFINED } from '/@/constants/value'\nimport { delayPromise } from '/@/utils/delayer'\nimport { useIdentityStore } from './identity'\n\nexport const COMMENT_API_PATH = '/comment'\n\nexport interface CommentFetchParams {\n  page?: number\n  per_page?: number\n  sort?: SortType\n  [key: string]: any\n}\n\nexport interface CommentTreeItem {\n  comment: Comment\n  children: Array<Comment>\n}\n\nexport const useCommentStore = defineStore('comment', () => {\n  const fetching = ref(false)\n  const posting = ref(false)\n  const deleting = ref(false)\n  const comments = ref<Comment[]>([])\n  const pagination = ref<Pagination | null>(null)\n\n  const commentTreeList = computed<CommentTreeItem[]>(() => {\n    // only keep 2 level tree\n    const ids = comments.value.map((comment) => comment.id)\n    const roots = comments.value.filter((comment) => {\n      return comment.pid === CommentParentId.Self || !ids.includes(comment.pid)\n    })\n    const children = comments.value.filter((comment) => {\n      return comment.pid !== CommentParentId.Self && ids.includes(comment.pid)\n    })\n    const fullMap = new Map<number, Comment>(comments.value.map((comment) => [comment.id, comment]))\n    const treeMap = new Map<number, { comment: Comment; children: Array<Comment> }>(\n      roots.map((comment) => [comment.id, { comment, children: [] }])\n    )\n\n    const findRootParentId = (pid: number): number | void => {\n      const target = fullMap.get(pid)\n      return !target ? UNDEFINED : target.pid === CommentParentId.Self ? target.id : findRootParentId(target.pid)\n    }\n\n    children.forEach((comment) => {\n      const rootPid = findRootParentId(comment.pid)\n      if (rootPid) {\n        if (treeMap.has(rootPid)) {\n          const target = treeMap.get(rootPid)!\n          treeMap.set(rootPid, { ...target, children: [comment, ...target.children] })\n        }\n      }\n    })\n\n    return Array.from(treeMap.values())\n  })\n\n  const clearList = () => {\n    comments.value = []\n    pagination.value = null\n  }\n\n  const fetchList = async (params: CommentFetchParams = {}, loadmore = false) => {\n    params = {\n      page: 1,\n      per_page: 50,\n      sort: SortType.Desc,\n      ...params\n    }\n\n    // clear list when refetch\n    if (params.page === 1) {\n      clearList()\n    }\n\n    try {\n      fetching.value = true\n      const request = nodepress.get<PaginationList<Comment>>(COMMENT_API_PATH, { params })\n      const response = await (isClient ? delayPromise(480, request) : request)\n      pagination.value = response.result.pagination\n      if (loadmore) {\n        comments.value.push(...response.result.data)\n      } else {\n        comments.value = response.result.data\n      }\n    } finally {\n      fetching.value = false\n    }\n  }\n\n  const postComment = async (comment: Partial<Comment>) => {\n    try {\n      posting.value = true\n      const response = await nodepress.post<Comment>('/disqus/comment', comment)\n      comments.value.unshift(response.result)\n      if (pagination.value) {\n        pagination.value.total++\n      }\n      return response.result\n    } finally {\n      posting.value = false\n    }\n  }\n\n  const deleteComment = async (commentId: number) => {\n    try {\n      deleting.value = true\n      await nodepress.delete('/disqus/comment', { data: { comment_id: commentId } })\n      const index = comments.value.findIndex((comment) => comment.id === commentId)\n      if (index > -1) {\n        comments.value.splice(index, 1)\n        pagination.value!.total--\n      }\n    } finally {\n      deleting.value = false\n    }\n  }\n\n  const postCommentVote = async (commentId: number, vote: 1 | -1) => {\n    const identityStore = useIdentityStore()\n    await nodepress.post(`/vote/comment`, { comment_id: commentId, vote, author: identityStore.author })\n    const comment = comments.value.find((comment) => comment.id === commentId)\n    if (comment) {\n      vote > 0 ? comment.likes++ : comment.dislikes++\n    }\n  }\n\n  return {\n    comments,\n    pagination,\n    fetching,\n    posting,\n    deleting,\n    commentTreeList,\n    clearList,\n    fetchList,\n    postComment,\n    deleteComment,\n    postCommentVote\n  }\n})\n","/**\n * @file Category state\n * @module store.category\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineStore } from 'pinia'\nimport { useFetchStore } from './_fetch'\nimport { Category } from '/@/interfaces/category'\nimport { PaginationList } from '/@/interfaces/common'\nimport nodepress from '/@/services/nodepress'\n\nexport const useCategoryStore = defineStore('category', () => {\n  return useFetchStore<Category[]>({\n    data: [],\n    once: true,\n    fetcher() {\n      return nodepress\n        .get<PaginationList<Category>>('/category', { params: { per_page: 50 } })\n        .then((response) => response.result.data)\n    }\n  })\n})\n","/**\n * @file Tags state\n * @module store.tag\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { computed } from 'vue'\nimport { defineStore } from 'pinia'\nimport { useFetchStore } from './_fetch'\nimport { firstUpperCase } from '/@/transforms/text'\nimport { Tag } from '/@/interfaces/tag'\nimport nodepress from '/@/services/nodepress'\n\nexport const getTagEnName = (tag: Tag) => {\n  // english name\n  if (!/.*[\\u4e00-\\u9fa5]+.*$/.test(tag.name)) {\n    return tag.name\n  }\n  // english words\n  if (tag.slug.includes('-')) {\n    return tag.slug\n  }\n  // english word\n  return firstUpperCase(tag.slug)\n}\n\nexport type TagMap = Map<string, Tag>\nexport const useTagStore = defineStore('tag', () => {\n  const fetchStore = useFetchStore<Tag[]>({\n    once: true,\n    data: [],\n    fetcher: async () => {\n      const response = await nodepress.get<Tag[]>('/tag/all')\n      return response.result\n    }\n  })\n\n  // order by count\n  const sorted = computed(() => {\n    const tags = [...fetchStore.data.value]\n    tags.sort((a, b) => b.article_count - a.article_count)\n    return tags\n  })\n\n  // full list of tags (origin/lowercase/uppercase/CamelCase)\n  const fullNameTags = computed(() => {\n    const tagMap: TagMap = new Map()\n    fetchStore.data.value.forEach((tag) => {\n      tagMap.set(tag.name, tag)\n      tagMap.set(tag.name.toLowerCase(), tag)\n      tagMap.set(tag.name.toUpperCase(), tag)\n      tagMap.set(firstUpperCase(tag.name), tag)\n    })\n    return tagMap\n  })\n\n  return { ...fetchStore, sorted, fullNameTags }\n})\n","/**\n * @file Tunnel constant\n * @module constant.tunnel\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport enum TunnelModule {\n  WebFont = 'webfont',\n  MyGoogleMap = 'my_google_map',\n  TwitterAggregate = 'twitter_aggregate',\n  YouTubePlaylist = 'youtube_playlist',\n  YouTubeVideoList = 'youtube_video_list',\n  InstagramMedias = 'instagram_medias',\n  InstagramCalendar = 'instagram_calendar',\n  BingWallpaper = 'bing_wallpaper',\n  GitHubSponsors = 'github_sponsors',\n  GitHubContributions = 'github_contributions',\n  NetEaseMusic = 'netease_music',\n  DoubanMovies = 'douban_movies',\n  OpenSourceGitHubStatistic = 'open_source_github_statistic',\n  OpenSourceNPMStatistic = 'open_source_npm_statistic'\n}\n","/**\n * @file BFF server config\n * @module config.bff\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const BFF_TUNNEL_PREFIX = '/_tunnel'\nexport const BFF_PROXY_PREFIX = '/_proxy'\nexport const BFF_PROXY_ALLOWLIST = ['https://surmon.me', 'https://cdn.surmon.me']\n\nexport const getBFFServerPort = () => Number(process.env.PORT || 3000)\nexport const getOnlineApiURL = () => process.env.VITE_API_ONLINE_URL as string\nexport const getLocalApiURL = () => process.env.VITE_API_LOCAL_URL as string\n","/**\n * @file SSR BFF API Tunnel\n * @module service.tunnel\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport axios, { AxiosInstance, isAxiosError } from 'axios'\nimport { BFF_TUNNEL_PREFIX, getBFFServerPort } from '/@/config/bff.config'\nimport { TunnelModule } from '/@/constants/tunnel'\nimport { isClient } from '/@/app/environment'\n\nconst tunnel = axios.create({\n  baseURL: isClient ? BFF_TUNNEL_PREFIX : `http://localhost:${getBFFServerPort()}${BFF_TUNNEL_PREFIX}`\n})\n\ntunnel.interceptors.response.use(\n  (response) => response.data,\n  (error) => Promise.reject(isAxiosError(error) ? error.toJSON() : error)\n)\n\nexport default {\n  $: tunnel,\n  request: <T = any>(...args: Parameters<AxiosInstance['request']>): Promise<T> => tunnel.request(...args),\n  dispatch: <T = any>(module: TunnelModule, params?: any): Promise<T> => tunnel.get(module, { params })\n}\n","/**\n * @file Wallpaper state\n * @module store.wallpaper\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { computed } from 'vue'\nimport { defineStore } from 'pinia'\nimport { useFetchStore } from './_fetch'\nimport { Language } from '/@/language'\nimport { TunnelModule } from '/@/constants/tunnel'\nimport tunnel from '/@/services/tunnel'\n\nexport type Wallpaper = Record<Language, Array<any>>\n\nexport const useWallpaperStore = defineStore('wallpaper', () => {\n  const fetchStore = useFetchStore<Wallpaper | null>({\n    fetcher: () => tunnel.dispatch<Wallpaper>(TunnelModule.BingWallpaper),\n    once: true,\n    data: null\n  })\n\n  const papers = computed(() => {\n    return (language: Language) => fetchStore.data.value?.[language]\n  })\n\n  return { ...fetchStore, papers }\n})\n","/**\n * @file Sponsor state\n * @module store.sponsor\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { computed } from 'vue'\nimport { defineStore } from 'pinia'\nimport { useFetchStore } from './_fetch'\nimport type { GitHubSponsorsResponse, GitHubSponsorUser } from '/@/server/getters/github'\nimport { TunnelModule } from '/@/constants/tunnel'\nimport tunnel from '/@/services/tunnel'\n\nexport const useSponsorStore = defineStore('githubSponsor', () => {\n  const fetchStore = useFetchStore<GitHubSponsorsResponse | null>({\n    fetcher: () => tunnel.dispatch<GitHubSponsorsResponse>(TunnelModule.GitHubSponsors),\n    once: true,\n    data: null\n  })\n\n  const activeSponsors = computed<GitHubSponsorUser[]>(() => {\n    return fetchStore.data.value?.sponsors.edges.map((edge) => edge.node) || []\n  })\n\n  const inactiveSponsors = computed<GitHubSponsorUser[]>(() => {\n    // 1. order by TIMESTAMP/DESC\n    // 2. filter out current sponsors\n    // 3. the latest user to cancel is at the head of the array\n    // 4. no cancellation events for one-time sponsor\n    const result: GitHubSponsorUser[] = []\n    const activeSponsorLogins = activeSponsors.value.map((item) => item.login)\n    fetchStore.data.value?.sponsorsActivities.nodes.forEach((node) => {\n      // Recently, GitHub returned the Ghost user as null\n      if (node && node.sponsor.login !== 'ghost') {\n        if (node.action === 'CANCELLED_SPONSORSHIP' || node.sponsorsTier.isOneTime) {\n          if (!activeSponsorLogins.includes(node.sponsor.login)) {\n            result.push(node.sponsor)\n          }\n        }\n      }\n    })\n    return result\n  })\n\n  return {\n    ...fetchStore,\n    activeSponsors,\n    inactiveSponsors\n  }\n})\n","/**\n * @file App basic state\n * @module store.basic\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { computed } from 'vue'\nimport { defineStore } from 'pinia'\nimport { useFetchStore } from './_fetch'\nimport { CommentPostId } from '/@/constants/state'\nimport { UNDEFINED } from '/@/constants/value'\nimport { AdminInfo, AppOption, AppAdConfig } from '/@/interfaces/option'\nimport { useIdentityStore, UserType } from './identity'\nimport nodepress from '/@/services/nodepress'\n\nexport const useAdminInfoStore = defineStore('adminInfo', () => {\n  return useFetchStore<AdminInfo | null>({\n    data: null,\n    async fetcher() {\n      const response = await nodepress.get<AdminInfo>('/auth/admin')\n      return response.result\n    }\n  })\n})\n\nexport const useAppOptionStore = defineStore('appOption', () => {\n  const fetchStore = useFetchStore<AppOption | null>({\n    shallow: false,\n    data: null,\n    async fetcher() {\n      const response = await nodepress.get<AppOption>('/option')\n      return response.result\n    }\n  })\n\n  const adConfig = computed<AppAdConfig>(() => {\n    const adConfig = fetchStore.data.value?.ad_config\n    return {\n      PC_CARROUSEL: UNDEFINED,\n      PC_NAV: [],\n      PC_ASIDE_SWIPER: [],\n      ...(adConfig ? JSON.parse(adConfig) : {})\n    }\n  })\n\n  const postSiteLike = () => {\n    const identityStore = useIdentityStore()\n    return nodepress\n      .post<number>('/vote/post', {\n        vote: 1,\n        post_id: CommentPostId.Guestbook,\n        author: identityStore.author\n      })\n      .then((response) => {\n        if (fetchStore.data.value) {\n          fetchStore.data.value.meta.likes = response.result\n        }\n      })\n  }\n\n  const postFeedback = (feedback: { emotion: number; content: string }) => {\n    const identityStore = useIdentityStore()\n    const authorName = identityStore.author?.name || null\n    return nodepress.post('/feedback', {\n      ...feedback,\n      tid: 0,\n      user_name: authorName ? `${authorName} (${UserType[identityStore.user.type]})` : null,\n      user_email: identityStore.author?.email || null\n    })\n  }\n\n  return {\n    ...fetchStore,\n    adConfig,\n    postSiteLike,\n    postFeedback\n  }\n})\n","/**\n * @file Statistic state\n * @module store.statistic\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { computed } from 'vue'\nimport { defineStore } from 'pinia'\nimport { useFetchStore } from './_fetch'\nimport { TunnelModule } from '/@/constants/tunnel'\nimport nodepress from '/@/services/nodepress'\nimport tunnel from '/@/services/tunnel'\n\nexport interface NodePressStatistic {\n  tags: number\n  articles: number\n  comments: number\n  todayViews: number\n  totalViews: number\n  totalLikes: number\n  averageEmotion: number\n}\n\nexport const useNodepressStatisticStore = defineStore('nodepressStatistic', () => {\n  return useFetchStore<NodePressStatistic | null>({\n    data: null,\n    fetcher: async () => {\n      const response = await nodepress.get<NodePressStatistic>('/expansion/statistic')\n      return response.result\n    }\n  })\n})\n\nexport const useGitHubStatisticStore = defineStore('githubStatistic', () => {\n  return useFetchStore<any>({\n    once: true,\n    data: null,\n    fetcher: () => tunnel.dispatch(TunnelModule.OpenSourceGitHubStatistic)\n  })\n})\n\nexport interface NpmStatistic {\n  downloads: Record<string, number>\n  packages: Array<any>\n}\n\nexport const useNpmStatisticStore = defineStore('npmStatistic', () => {\n  const fetchStore = useFetchStore<NpmStatistic | null>({\n    once: true,\n    data: null,\n    fetcher: () => tunnel.dispatch<NpmStatistic>(TunnelModule.OpenSourceNPMStatistic)\n  })\n\n  const totalPackages = computed(() => {\n    return fetchStore.data.value ? Object.keys(fetchStore.data.value.downloads).length : 0\n  })\n\n  const totalDownloads = computed(() => {\n    return fetchStore.data.value\n      ? Object.values<number>(fetchStore.data.value.downloads).reduce((p, c) => p + c, 0)\n      : 0\n  })\n\n  const averageScore = computed(() => {\n    const packages = fetchStore.data.value?.packages\n    if (!packages?.length) {\n      return 0\n    }\n    // https://itnext.io/increasing-an-npm-packages-search-score-fb557f859300\n    const totalScore = packages.reduce((p, c) => p + c.score.final, 0)\n    return (totalScore / packages.length).toFixed(3)\n  })\n\n  return {\n    ...fetchStore,\n    totalPackages,\n    totalDownloads,\n    averageScore\n  }\n})\n","/**\n * @file Calendar state\n * @module store.calendar\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { computed } from 'vue'\nimport { defineStore } from 'pinia'\nimport { useFetchStore } from './_fetch'\nimport { TunnelModule } from '/@/constants/tunnel'\nimport nodepress from '/@/services/nodepress'\nimport tunnel from '/@/services/tunnel'\n\ntype CalendarDay = { date: string; count: number }\n\nexport const useArticleCalendarStore = defineStore('articleCalendar', () => {\n  return useFetchStore<CalendarDay[]>({\n    once: true,\n    data: [],\n    async fetcher() {\n      const response = await nodepress.get<Array<CalendarDay>>('/article/calendar', {\n        params: { timezone: Intl.DateTimeFormat().resolvedOptions().timeZone }\n      })\n      return response.result\n    }\n  })\n})\n\nexport const useInstagramCalendarStore = defineStore('instagramCalendar', () => {\n  return useFetchStore<CalendarDay[]>({\n    once: true,\n    data: [],\n    fetcher: () => {\n      return tunnel.dispatch<Array<CalendarDay>>(TunnelModule.InstagramCalendar)\n    }\n  })\n})\n\nexport const useGitHubCalendarStore = defineStore('githubContributionsCalendar', () => {\n  const fetchStore = useFetchStore({\n    once: true,\n    data: null,\n    fetcher: () => tunnel.dispatch(TunnelModule.GitHubContributions)\n  })\n\n  const days = computed<Array<{ date: string; count: number; color: string }>>(() => {\n    if (!fetchStore.data.value) {\n      return []\n    }\n\n    return fetchStore.data.value.weeks\n      .map((week) => week.contributionDays)\n      .flat()\n      .map((day) => ({\n        date: day.date,\n        count: day.contributionCount,\n        color: day.color\n      }))\n  })\n\n  return { ...fetchStore, days }\n})\n","/**\n * @file Media state\n * @module store.media\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineStore } from 'pinia'\nimport { useFetchStore } from './_fetch'\nimport { TunnelModule } from '/@/constants/tunnel'\nimport { isClient } from '/@/app/environment'\nimport { delayPromise } from '/@/utils/delayer'\nimport type { InstagramMediaItem } from '/@/server/getters/instagram'\nimport type { TwitterAggregate } from '/@/server/getters/twitter'\nimport tunnel from '/@/services/tunnel'\n\nconst LENS_PAGE_FETCH_DELAY = 480\n\n// Douban movies\nexport const useDoubanMoviesStore = defineStore('doubanMovies', () => {\n  return useFetchStore({\n    once: true,\n    data: null,\n    fetcher: () => tunnel.dispatch(TunnelModule.DoubanMovies)\n  })\n})\n\n// Instagram medias\nexport const useInstagramMediasStore = defineStore('instagramMedias', () => {\n  return useFetchStore<InstagramMediaItem[]>({\n    data: [],\n    fetcher: () => {\n      const request = tunnel.dispatch<InstagramMediaItem[]>(TunnelModule.InstagramMedias)\n      return isClient ? delayPromise(LENS_PAGE_FETCH_DELAY, request) : request\n    }\n  })\n})\n\n// YouTube playlist\nexport const useYouTubePlayListStore = defineStore('youtubePlaylist', () => {\n  return useFetchStore<Array<any>>({\n    data: [],\n    async fetcher() {\n      const response = await tunnel.dispatch<Array<any>>(TunnelModule.YouTubePlaylist)\n      response.sort((a, b) => a.snippet.position - b.snippet.position)\n      return response\n    }\n  })\n})\n\n// YouTube video list\nexport const fetchYouTubeVideoList = (playlistId: string) => {\n  const fetch = tunnel.dispatch<Array<any>>(TunnelModule.YouTubeVideoList, { id: playlistId })\n  return isClient ? delayPromise(LENS_PAGE_FETCH_DELAY, fetch) : fetch\n}\n\n// Twitter userinfo\nexport const useTwitterStore = defineStore('twitterAggregate', () => {\n  return useFetchStore<TwitterAggregate | null>({\n    data: null,\n    fetcher: () => {\n      return tunnel.dispatch<TwitterAggregate>(TunnelModule.TwitterAggregate)\n    }\n  })\n})\n\n// My Google map\nexport const useMyGoogleMapStore = defineStore('myGoogleMap', () => {\n  return useFetchStore({\n    once: true,\n    data: null,\n    fetcher: () => tunnel.dispatch(TunnelModule.MyGoogleMap)\n  })\n})\n","/**\n * @file Store hook\n * @module store.hook\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { Pinia } from 'pinia'\n\nimport { useArticleListStore, useHottestArticleListStore, useArticleDetailStore } from './article'\nimport { useAnnouncementStore } from './announcement'\nimport { useArchiveStore } from './archive'\nimport { useCommentStore } from './comment'\nimport { useCategoryStore } from './category'\nimport { useTagStore } from './tag'\nimport { useIdentityStore } from './identity'\nimport { useWallpaperStore } from './wallpaper'\nimport { useSponsorStore } from './sponsor'\nimport { useAdminInfoStore, useAppOptionStore } from './basic'\nimport { useNodepressStatisticStore, useGitHubStatisticStore, useNpmStatisticStore } from './statistic'\nimport { useArticleCalendarStore, useInstagramCalendarStore, useGitHubCalendarStore } from './calendar'\nimport { useDoubanMoviesStore, useInstagramMediasStore, useYouTubePlayListStore, useTwitterStore } from './media'\n\nexport const useStores = (pinia?: Pinia) => ({\n  articleList: useArticleListStore(pinia),\n  articleDetail: useArticleDetailStore(pinia),\n  hottestArticleList: useHottestArticleListStore(pinia),\n  announcement: useAnnouncementStore(pinia),\n  category: useCategoryStore(pinia),\n  tag: useTagStore(pinia),\n  comment: useCommentStore(pinia),\n  archive: useArchiveStore(pinia),\n  identity: useIdentityStore(pinia),\n  adminInfo: useAdminInfoStore(pinia),\n  appOption: useAppOptionStore(pinia),\n  wallpaper: useWallpaperStore(pinia),\n  sponsor: useSponsorStore(pinia),\n\n  nodepressStatistic: useNodepressStatisticStore(pinia),\n  githubStatistic: useGitHubStatisticStore(pinia),\n  npmStatistic: useNpmStatisticStore(pinia),\n\n  articleCalendar: useArticleCalendarStore(pinia),\n  instagramCalendar: useInstagramCalendarStore(pinia),\n  githubCalendar: useGitHubCalendarStore(pinia),\n\n  doubanMovies: useDoubanMoviesStore(pinia),\n  instagramMedias: useInstagramMediasStore(pinia),\n  youtubePlayList: useYouTubePlayListStore(pinia),\n  twitter: useTwitterStore(pinia)\n})\n","/**\n * @file Root store\n * @module store\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { createPinia } from 'pinia'\nimport { GlobalState } from '/@/app/state'\nimport { getSSRContext } from '/@/universal'\nimport { useStores } from './_hook'\nexport { useStores } from './_hook'\n\nexport interface UniversalStoreConfig {\n  globalState: GlobalState\n}\n\nexport const createUniversalStore = (config: UniversalStoreConfig) => {\n  const pinia = createPinia()\n  const fetchBasicStore = () => {\n    // https://pinia.esm.dev/ssr/#using-the-store-outside-of-setup\n    const stores = useStores(pinia)\n    const initFetchTasks = [\n      // basic data\n      stores.category.fetch(),\n      stores.tag.fetch(),\n      // app options\n      stores.appOption.fetch()\n    ]\n    // fetch hot articles when desktop only\n    if (!config.globalState.userAgent.isMobile) {\n      initFetchTasks.push(stores.hottestArticleList.fetch())\n    }\n    return Promise.all(initFetchTasks)\n  }\n\n  return {\n    get stores() {\n      return useStores(pinia)\n    },\n    state: pinia.state,\n    install: pinia.install,\n    serverPrefetch: fetchBasicStore,\n    hydrate() {\n      const contextStore = getSSRContext('store')\n      if (contextStore) {\n        // The data passed from the SSR server is used to initialize the pinia\n        pinia.state.value = contextStore\n      } else {\n        // fallback: when SSR page error\n        fetchBasicStore()\n      }\n    }\n  }\n}\n","/**\n * @file i18n\n * @module composable.i18n\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { App, inject, computed, ref, readonly, defineComponent } from 'vue'\n\nexport type I18nValueRender = (...args: any[]) => string\nexport type I18nLanguageMap<Lang extends string, V = string> = {\n  [code in Lang]: V\n}\n\nexport interface I18nLanguage<K extends string> {\n  code: string\n  iso: string\n  name: string\n  data: {\n    [key in K]: string | I18nValueRender\n  }\n}\n\ninterface I18nConfig<K extends string> {\n  default: string\n  keys: Array<K>\n  languages: I18nLanguage<K>[]\n}\n\nconst I18nSymbol = Symbol('i18n')\nconst createI18nStore = <K extends string>(config: I18nConfig<K>) => {\n  const language = ref(config.default)\n  const languageCodes = config.languages.map((lang) => lang.code)\n  const l = computed(() => config.languages.find((l) => l.code === language.value))\n  const languageMap = config.keys.reduce<{\n    [key in K]: I18nLanguageMap<string, string | I18nValueRender>\n  }>(\n    (map, key) => ({\n      ...map,\n      [key]: config.languages.reduce(\n        (result, language) => ({\n          ...result,\n          [language.code]: language.data[key]\n        }),\n        {}\n      )\n    }),\n    {} as any\n  )\n\n  const set = <L extends string = string>(lang: L) => {\n    if (languageCodes.includes(lang) && language.value !== lang) {\n      language.value = lang\n    }\n  }\n\n  const toggle = () => {\n    const currentIndex = languageCodes.findIndex((langCode) => langCode === language.value)\n    const nextIndex = currentIndex < languageCodes.length - 1 ? currentIndex + 1 : 0\n    if (currentIndex !== nextIndex) {\n      set(languageCodes[nextIndex])\n    }\n  }\n\n  const translate = <T extends K>(key: T, targetLanguage?: string | null, ...args) => {\n    const content = languageMap[key]?.[targetLanguage ?? language.value]\n    if (!content) {\n      return\n    }\n    return typeof content === 'string' ? content : content(...args)\n  }\n\n  return {\n    language: readonly(language),\n    l,\n    set,\n    toggle,\n    translate,\n    t: translate\n  }\n}\n\n/**\n * @example <span>{{ i18n.t(LanguageKey.SOME_KEY) }}</span>\n * @example <i18n :k=\"LanguageKey.SOME_KEY\" />\n * @example <i18n zh=\"\" en=\"hello, world!\" />\n * @example (\n *  <i18n>\n *    <template #zh></template>\n *    <template #en>hello, world!</template>\n *  </i18n>\n * )\n */\nexport type I18n = ReturnType<typeof createI18nStore>\nexport const createI18n = <K extends string>(config: I18nConfig<K>) => {\n  const i18nStore = createI18nStore(config)\n  const i18nComponent = defineComponent({\n    name: 'I18n',\n    props: {\n      k: [String, Number, Symbol]\n    },\n    render() {\n      if (this.$props.k) {\n        return i18nStore.t(this.$props.k as K, null, this.$attrs)\n      } else {\n        const lang = i18nStore.language.value\n        return this.$attrs[lang] || this.$slots[lang]?.()\n      }\n    }\n  })\n\n  return {\n    ...i18nStore,\n    install(app: App) {\n      app.config.globalProperties.$i18n = i18nStore\n      app.provide(I18nSymbol, i18nStore)\n      app.component(i18nComponent.name, i18nComponent)\n    }\n  }\n}\n\nexport const useI18n = (): I18n => {\n  return inject(I18nSymbol) as I18n\n}\n","/**\n * @file Outside\n * @module transform.outside\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const getGaScriptURL = (measurementID: string) => {\n  return `https://www.googletagmanager.com/gtag/js?id=${measurementID}`\n}\n","/**\n * @file Script loader\n * @module util.scripter\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport interface ScriptLoaderOption extends Partial<HTMLScriptElement> {\n  domain?: string\n}\n\nexport const loadScript = (source: string, options: ScriptLoaderOption = {} as ScriptLoaderOption) => {\n  return new Promise((resolve, reject) => {\n    const head = document.head || document.getElementsByTagName('head')[0]\n    const script = document.createElement('script')\n    const {\n      src,\n      domain,\n      type = 'text/javascript',\n      // charset = 'utf-8',\n      defer = false,\n      async = false,\n      ...restAttrs\n    } = options\n    script.type = type\n    script.defer = defer\n    script.async = async\n    script.src = src || source\n\n    Object.keys(restAttrs).forEach((key) => {\n      script[key] = restAttrs[key]\n    })\n\n    if (domain) {\n      const link = document.createElement('link')\n      link.href = domain\n      link.rel = 'preconnect'\n      head.appendChild(link)\n    }\n\n    head.appendChild(script)\n    script.onload = resolve\n    script.onerror = reject\n  })\n}\n","/**\n * @file Google analytics\n * @module composable.gtag\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { App, reactive, readonly, inject, Plugin, nextTick } from 'vue'\nimport { Router } from 'vue-router'\nimport { getGaScriptURL } from '/@/transforms/gtag'\nimport { loadScript } from '/@/utils/scripter'\n// MARK: https://zh.nuxtjs.org/faq/ga\n// MARK: https://github.com/nuxt-community/google-gtag/blob/master/lib/plugin.js\n// DOC: https://developers.google.com/analytics/devguides/collection/gtagjs/pages?hl=zh-cn\n\ndeclare global {\n  interface Window {\n    gtag(...args: any[]): any\n    dataLayer: any[]\n  }\n}\n\nexport interface GtagConfig {\n  [key: string]: any\n}\n\nexport interface GtagPluginConfig {\n  id: string\n  router?: Router\n  customResourceURL?: string\n  config?: GtagConfig\n}\n\nconst GtagSymbol = Symbol('gtag')\nexport type Gtag = ReturnType<typeof createGtag>\nexport const createGtag = (options: GtagPluginConfig) => {\n  if (!options.id) {\n    return\n  }\n\n  const resourceURL = options.customResourceURL || getGaScriptURL(options.id)\n  const state = reactive({\n    loaded: false,\n    disabled: false\n  })\n\n  loadScript(resourceURL, { async: true }).then(() => {\n    state.loaded = true\n  })\n\n  if (window.gtag == null) {\n    window.dataLayer = window.dataLayer || []\n    // MARK: important! only function\n    window.gtag = function () {\n      // eslint-disable-next-line prefer-rest-params\n      window.dataLayer.push(arguments)\n    }\n    window.gtag('js', new Date())\n    window.gtag('config', options.id, options.config)\n  }\n\n  const push = (...args) => {\n    if (!state.disabled) {\n      window.gtag?.(...args)\n    }\n  }\n\n  if (options.router) {\n    options.router.afterEach((to, from) => {\n      if (to.path !== from.path) {\n        nextTick().then(() => {\n          const location = window.location.origin + to.fullPath\n          push('event', 'page_view', {\n            page_title: document.title,\n            page_location: location,\n            page_path: to.fullPath,\n            send_to: options.id\n          })\n        })\n      }\n    })\n  }\n\n  const gtag = {\n    state: readonly(state),\n    enable: () => {\n      state.disabled = false\n    },\n    disable: () => {\n      state.disabled = true\n    },\n    set(config: GtagConfig) {\n      push('set', config)\n    },\n    config(config: GtagConfig) {\n      push('config', options.id, config)\n    },\n    // https://developers.google.com/analytics/devguides/collection/gtagjs/events?hl=zh-cn\n    event(\n      eventName: string,\n      config?: GtagConfig & {\n        event_category?: string\n        event_label?: string\n        value?: number\n      }\n    ) {\n      push('event', eventName, config)\n    }\n  }\n\n  return gtag\n}\n\nexport const useGtag = (): Gtag => {\n  return inject(GtagSymbol) as Gtag\n}\n\ntype PluginInstallFunction = Plugin & {\n  installed?: boolean\n}\n\nconst install: PluginInstallFunction = (app: App, config: GtagPluginConfig) => {\n  if (install.installed) {\n    return\n  }\n  const gtag = createGtag(config)\n  app.provide(GtagSymbol, gtag)\n  app.config.globalProperties.$gtag = gtag\n  install.installed = true\n}\nexport default { install }\n","/**\n * @file Theme\n * @module composable.theme\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { App, inject, ref, readonly } from 'vue'\nimport cookies from 'js-cookie'\nimport storage from '/@/utils/storage'\n\nexport enum Theme {\n  Light = 'light',\n  Dark = 'dark'\n}\n\nconst DARK_THEME_QUERY = '(prefers-color-scheme: dark)'\nconst LIGHT_THEME_QUERY = '(prefers-color-scheme: light)'\n\nexport const THEME_STORAGE_KEY = 'theme'\nexport const getClientLocalTheme = () => {\n  // local theme\n  const historyTheme = storage.get(THEME_STORAGE_KEY)\n  if (historyTheme) {\n    return historyTheme === Theme.Dark ? Theme.Dark : Theme.Light\n  }\n  // system theme\n  if (window.matchMedia(DARK_THEME_QUERY).matches) {\n    return Theme.Dark\n  }\n  if (window.matchMedia(LIGHT_THEME_QUERY).matches) {\n    return Theme.Light\n  }\n  // not specified || not support\n  return Theme.Light\n}\n\nconst ThemeSymbol = Symbol('theme')\nconst themes = [Theme.Light, Theme.Dark]\nexport const createTheme = (initTheme: Theme) => {\n  const theme = ref<Theme>(initTheme === Theme.Dark ? Theme.Dark : Theme.Light)\n  const set = (newTheme: Theme) => {\n    if (themes.includes(newTheme) && newTheme !== theme.value) {\n      theme.value = newTheme\n      cookies.set(THEME_STORAGE_KEY, newTheme)\n      storage.set(THEME_STORAGE_KEY, newTheme)\n    }\n  }\n  const toggle = () => set(theme.value === Theme.Dark ? Theme.Light : Theme.Dark)\n  const bindClientSystem = () => {\n    window.matchMedia(DARK_THEME_QUERY).addEventListener('change', ({ matches }) => matches && set(Theme.Dark))\n    window.matchMedia(LIGHT_THEME_QUERY).addEventListener('change', ({ matches }) => matches && set(Theme.Light))\n  }\n\n  const themeState = {\n    theme: readonly(theme),\n    set,\n    toggle,\n    bindClientSystem\n  }\n\n  return {\n    ...themeState,\n    install(app: App) {\n      app.provide(ThemeSymbol, themeState)\n    }\n  }\n}\n\nexport const useTheme = () => {\n  return inject(ThemeSymbol) as Omit<ReturnType<typeof createTheme>, 'install'>\n}\n","/**\n * @file Client defer task manager\n * @module composable.defer\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { App, inject, reactive, Plugin } from 'vue'\n\ndeclare global {\n  interface Window {\n    // @ts-ignore\n    $defer: Defer\n  }\n}\n\n// @ts-ignore\nexport type Defer = ReturnType<typeof createDeferStore>\nexport type DeferTask = () => any\nconst createDeferStore = () => {\n  const state = reactive({\n    loaded: false,\n    tasks: [] as Array<DeferTask>\n  })\n\n  const doTask = (task: DeferTask) => {\n    window.setTimeout(task, 666)\n  }\n\n  const handleLoaded = () => {\n    state.loaded = true\n    state.tasks.forEach((task) => doTask(task))\n  }\n\n  const addTask = (task: DeferTask) => {\n    state.tasks.push(task)\n    if (state.loaded) {\n      doTask(task)\n    }\n  }\n\n  window.addEventListener('load', handleLoaded)\n  return { state, addTask }\n}\n\nconst DeferSymbol = Symbol('defer')\n\nexport interface DeferPluginConfig {\n  exportToGlobal?: boolean\n}\nexport const createDefer = (): Defer & Plugin => {\n  const defer = createDeferStore()\n  return {\n    ...defer,\n    install(app: App, config?: DeferPluginConfig) {\n      app.provide(DeferSymbol, defer)\n\n      if (config?.exportToGlobal) {\n        window.$defer = defer\n      }\n    }\n  }\n}\n\nexport const useDefer = (): Defer => {\n  return inject(DeferSymbol) as Defer\n}\n","<script lang=\"ts\" setup>\n  import { useLoading } from './'\n\n  interface Props {\n    spin?: boolean\n  }\n\n  const props = defineProps<Props>()\n  const loading = useLoading()\n</script>\n\n<template>\n  <div id=\"progress-bar\" :class=\"{ show: loading.state.show }\">\n    <div\n      class=\"progress\"\n      :style=\"{ width: loading.state.percent + '%' }\"\n      :class=\"{\n        notransition: loading.state.skipTimerCount > 0,\n        failed: !loading.state.canSucceed\n      }\"\n    />\n    <div v-if=\"props.spin\" class=\"spin\" :class=\"{ failed: !loading.state.canSucceed }\">\n      <div class=\"lds-ring\">\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  #progress-bar {\n    $size: 3px;\n    $failed: $red;\n    position: fixed;\n    top: 0;\n    left: 0;\n    height: $size;\n    width: 100%;\n    z-index: $z-index-progress-bar;\n    @include visibility-transition($transition-time-normal);\n    @include hidden();\n    &.show {\n      @include visible();\n    }\n\n    .progress {\n      position: absolute;\n      top: 0;\n      left: 0;\n      height: $size;\n      width: 0%;\n      background-color: $primary;\n      transition: width 160ms;\n      &.notransition {\n        transition: none;\n      }\n      &.failed {\n        background-color: $failed;\n      }\n    }\n\n    .spin {\n      position: absolute;\n      top: $lg-gap;\n      right: $lg-gap;\n      &.failed {\n        .lds-ring {\n          div {\n            border-top-color: $failed;\n          }\n        }\n      }\n\n      .lds-ring {\n        $size: 3rem;\n        display: inline-block;\n        position: relative;\n        width: $size;\n        height: $size;\n\n        @keyframes lds-ring {\n          0% {\n            transform: rotate(0deg);\n          }\n          100% {\n            transform: rotate(360deg);\n          }\n        }\n\n        div {\n          $size: 2rem;\n          $border: 3px;\n          box-sizing: border-box;\n          display: block;\n          position: absolute;\n          width: $size;\n          height: $size;\n          margin: $border;\n          border: $border solid transparent;\n          border-top-color: $primary;\n          border-radius: 50%;\n          animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n          &:nth-child(1) {\n            animation-delay: -0.45s;\n          }\n          &:nth-child(2) {\n            animation-delay: -0.3s;\n          }\n          &:nth-child(3) {\n            animation-delay: -0.15s;\n          }\n        }\n      }\n    }\n  }\n</style>\n","/**\n * @file Global loading state\n * @module composable.loading\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { App, reactive, readonly, inject, nextTick, DeepReadonly } from 'vue'\nimport ProgressComponent from './progress.vue'\n\ndeclare global {\n  interface Window {\n    $loading: Loading\n  }\n}\n\nexport interface LoadingState {\n  percent: number\n  show: boolean\n  error: null\n  canSucceed: boolean\n  skipTimerCount: number\n  throttle: number\n  duration: number\n}\n\nexport interface Loading {\n  state: DeepReadonly<LoadingState>\n  start(): void\n  pause(): void\n  resume(): void\n  finish(): void\n  fail(error: any): void\n  increase(percent: number): void\n  decrease(percent: number): void\n  set(percent: number): void\n}\n\nexport interface LoadingOptions {\n  throttle?: number\n  duration?: number\n}\nconst LoadingSymbol = Symbol('loading')\nconst createLoadingStore = (options: LoadingOptions = {}) => {\n  let _cut: number\n  let _timer: number\n  let _throttle: number\n  const state = reactive({\n    percent: 0,\n    show: false,\n    error: null,\n    canSucceed: true,\n    skipTimerCount: 0,\n    throttle: options.throttle || 200,\n    duration: options.duration || 3000\n  })\n\n  const clear = () => {\n    window.clearInterval(_timer)\n    window.clearTimeout(_throttle)\n    _timer = 0\n  }\n\n  const increase = (percent: number) => {\n    state.percent = Math.min(100, Math.floor(state.percent + percent))\n  }\n\n  const decrease = (percent: number) => {\n    state.percent = Math.max(0, Math.floor(state.percent - percent))\n  }\n\n  const startTimer = () => {\n    if (!state.show) {\n      state.show = true\n    }\n    if (typeof _cut === 'undefined') {\n      _cut = 10000 / Math.floor(state.duration)\n    }\n\n    _timer = window.setInterval(() => {\n      /**\n       * When reversing direction skip one timers\n       * so 0, 100 are displayed for two iterations\n       * also disable css width transitioning\n       * which otherwise interferes and shows\n       * a jojo effect\n       */\n      if (state.skipTimerCount > 0) {\n        state.skipTimerCount--\n        return\n      }\n\n      decrease(_cut)\n    }, 100)\n  }\n\n  const start = () => {\n    clear()\n    state.percent = 0\n    state.skipTimerCount = 0\n    state.canSucceed = true\n    state.show = true\n\n    if (state.throttle) {\n      _throttle = window.setTimeout(() => startTimer(), state.throttle)\n    } else {\n      startTimer()\n    }\n  }\n\n  const hide = () => {\n    clear()\n    window.setTimeout(() => {\n      state.show = false\n      nextTick().then(() => {\n        setTimeout(() => {\n          state.percent = 0\n          // MARK: coupling with CSS transition duration\n        }, 190)\n      })\n    }, 360)\n  }\n\n  const set = (percent: number) => {\n    state.show = true\n    state.canSucceed = true\n    state.percent = Math.min(100, Math.max(0, Math.floor(percent)))\n  }\n\n  const pause = () => {\n    window.clearInterval(_timer)\n  }\n\n  const resume = () => {\n    startTimer()\n  }\n\n  const finish = () => {\n    state.error = null\n    state.percent = 100\n    hide()\n  }\n\n  const fail = (error?: any) => {\n    state.error = error\n    state.canSucceed = false\n  }\n\n  return {\n    state: readonly(state),\n    start,\n    pause,\n    resume,\n    finish,\n    fail,\n    increase,\n    decrease,\n    set\n  }\n}\n\nexport const createLoading = (options?: LoadingOptions) => {\n  const loading = createLoadingStore(options)\n  return {\n    ...loading,\n    install(app: App, config?: { exportToGlobal?: boolean }) {\n      app.provide(LoadingSymbol, loading)\n      app.component('ProgressBar', ProgressComponent)\n      app.config.globalProperties.$loading = loading\n      if (config?.exportToGlobal) {\n        window.$loading = loading\n      }\n    }\n  }\n}\n\nexport const useLoading = (): Loading => {\n  return inject(LoadingSymbol) as Loading\n}\n","export const PopupSymbol = Symbol('popup')\n","/**\n * @file popup hook\n * @module composable.popup.hook\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { inject, onMounted } from 'vue'\nimport { PopupSymbol } from './constant'\nimport type { Popup } from '.'\n\nexport const usePopup = (): Popup => {\n  return inject(PopupSymbol) as Popup\n}\n\nexport const usePopupWithRoot = (fn: () => HTMLElement): Popup => {\n  const popup = usePopup()\n  onMounted(() => popup.$setRoot(fn()))\n  return popup\n}\n","/**\n * @file App enhancers\n * @module app.enhancer\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { computed } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { useGlobalState } from '/@/app/state'\nimport { useI18n } from '/@/composables/i18n'\nimport { useHead, useSeo } from '/@/composables/head'\nimport { useGtag, Gtag } from '/@/composables/gtag'\nimport { useTheme, Theme } from '/@/composables/theme'\nimport { useDefer, Defer } from '/@/composables/defer'\nimport { useLoading, Loading } from '/@/composables/loading'\nimport type { Popup } from '/@/composables/popup'\nimport { usePopup } from '/@/composables/popup/hook'\nimport { useAppOptionStore } from '/@/stores/basic'\nimport { Language } from '/@/language'\nimport { UNDEFINED } from '/@/constants/value'\nimport { isClient } from './environment'\n\nexport const useEnhancer = () => {\n  const route = useRoute()\n  const router = useRouter()\n  const i18n = useI18n()\n  const theme = useTheme()\n  const globalState = useGlobalState()\n  const appOptionStore = useAppOptionStore()\n\n  const adConfig = computed(() => appOptionStore.adConfig)\n  const isMobile = computed(() => globalState.userAgent.isMobile)\n  const isDarkTheme = computed(() => theme.theme.value === Theme.Dark)\n  const isZhLang = computed(() => i18n.language.value === Language.Chinese)\n\n  return {\n    route,\n    router,\n    i18n,\n    theme,\n    seo: useSeo,\n    head: useHead,\n    gState: globalState,\n\n    adConfig,\n    isMobile,\n    isDarkTheme,\n    isZhLang,\n\n    defer: (isClient ? useDefer() : UNDEFINED) as Defer,\n    popup: (isClient ? usePopup() : UNDEFINED) as Popup,\n    gtag: (isClient ? useGtag() : UNDEFINED) as Gtag,\n    loading: (isClient ? useLoading() : UNDEFINED) as Loading\n  }\n}\n","/**\n * @file Proxy constant\n * @module constant.proxy\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport enum ProxyModule {\n  Default = 'default',\n  Douban = 'douban',\n  NetEaseMusic = 'netease-music',\n  Instagram = 'instagram',\n  YouTube = 'youtube',\n  Disqus = 'disqus'\n}\n","/**\n * @file Validater\n * @module transform.validate\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const isValidDateParam = (date: string) => {\n  const dates = date.split('-')\n  // x-x-x\n  if (dates.length !== 3) {\n    return false\n  }\n  // 0-0-0\n  if (!dates.every((d) => Number.isInteger(Number(d)))) {\n    return false\n  }\n  // 0000-00-00\n  const [year, month, day] = dates\n  if (year.length !== 4 || month.length !== 2 || day.length !== 2) {\n    return false\n  }\n  return true\n}\n","/**\n * @file Scroll to anywhere\n * @module util.scroller\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { nextTick } from 'vue'\nimport BezierEasing from 'bezier-easing'\n\nexport const Easing = {\n  ease: [0.25, 0.1, 0.25, 1.0],\n  linear: [0, 0.0, 1, 1.0],\n  easeIn: [0.42, 0.0, 1, 1.0],\n  easeOut: [0, 0.0, 0.58, 1.0],\n  easeInOut: [0.42, 0.0, 0.58, 1.0]\n}\n\nconst triggerEvents: string[] = [\n  'scroll',\n  'mousedown',\n  'wheel',\n  'DOMMouseScroll',\n  'mousewheel',\n  'keyup',\n  'touchmove'\n]\n\nconst listener = {\n  on(element: Element, events: string[], handler: () => void) {\n    events.forEach((event) => {\n      element.addEventListener(event, handler, { passive: true })\n    })\n  },\n  off(element: Element, events: string[], handler: () => void) {\n    events.forEach((event) => {\n      element.removeEventListener(event, handler)\n    })\n  }\n}\n\nexport interface ScrollToElementOptions {\n  target: string | Element\n  offset?: number\n  duration?: number\n  easing?: number[]\n  onCancel?(): void\n  onDone?(): void\n}\n\nexport const scrollToElement = (options: ScrollToElementOptions) => {\n  const { target, onCancel, onDone } = options\n  const offset = options.offset ?? 0\n  const duration = options.duration ?? 500\n  const optionEasing = options.easing ?? Easing.ease\n  const targetElement = typeof target === 'string' ? document.querySelector(target)! : target\n  const bodyElement = document.body\n\n  let abort = false\n  const whenAbort = () => {\n    abort = true\n  }\n\n  listener.on(bodyElement, triggerEvents, whenAbort)\n\n  const whenDone = () => {\n    listener.off(bodyElement, triggerEvents, whenAbort)\n    abort ? onCancel?.() : onDone?.()\n  }\n\n  const initialY = window.pageYOffset\n  const elementY = initialY + targetElement.getBoundingClientRect().top\n  const targetY =\n    document.body.scrollHeight - elementY < window.innerHeight\n      ? document.body.scrollHeight - window.innerHeight\n      : elementY\n\n  const diff = targetY + offset - initialY\n  if (!diff) {\n    return\n  }\n\n  const easing = Reflect.apply(BezierEasing, BezierEasing, optionEasing)\n  let start: number\n\n  window.requestAnimationFrame(function step(timestamp) {\n    if (abort) {\n      return whenDone()\n    }\n    if (!start) {\n      start = timestamp\n    }\n\n    const time = timestamp - start\n    let progress = Math.min(time / duration, 1)\n    progress = easing(progress)\n\n    window.scrollTo(0, initialY + diff * progress)\n\n    if (time < duration) {\n      window.requestAnimationFrame(step)\n    } else {\n      whenDone()\n    }\n  })\n}\n\nexport const scrollToAnchor = (elementId: string, offset?: number) => {\n  const targetElement = document.getElementById(elementId)\n  if (targetElement) {\n    scrollToElement({\n      target: targetElement,\n      duration: 200,\n      // default offset: header height\n      offset: offset ?? -74\n    })\n  }\n}\n\nexport const scrollToPageTop = () => {\n  scrollToElement({\n    target: document.body,\n    duration: 280,\n    offset: 0,\n    // MARK: keep ease\n    easing: Easing.ease\n  })\n}\n\nexport const scrollToNextScreen = () => {\n  nextTick(() => {\n    scrollToElement({\n      target: document.body,\n      offset: window.scrollY + window.innerHeight * 0.68,\n      duration: 300,\n      easing: Easing.easeIn\n    })\n  })\n}\n","<script lang=\"ts\" setup>\n  import { ref, onMounted, onBeforeUnmount } from 'vue'\n  import { LanguageKey } from '/@/language'\n\n  enum Event {\n    Loadmore = 'loadmore'\n  }\n\n  const props = defineProps<{\n    loading?: boolean\n    finished?: boolean\n  }>()\n\n  const emit = defineEmits<{\n    (event: Event.Loadmore): void\n  }>()\n\n  const element = ref<HTMLDivElement | null>(null)\n  const observer = ref<IntersectionObserver | null>(null)\n  const emitLoadEvent = () => {\n    if (!props.loading && !props.finished) {\n      emit(Event.Loadmore)\n    }\n  }\n\n  onMounted(() => {\n    if (element.value) {\n      observer.value = new IntersectionObserver(\n        (entries) => {\n          if (entries[0].isIntersecting) {\n            emitLoadEvent()\n          }\n        },\n        { threshold: 0.1 }\n      )\n      observer.value.observe(element.value)\n    }\n  })\n\n  onBeforeUnmount(() => {\n    if (element.value && observer.value) {\n      observer.value.unobserve(element.value)\n      observer.value.disconnect()\n    }\n  })\n</script>\n\n<template>\n  <div class=\"loadmore\" ref=\"element\">\n    <div class=\"loading\" v-if=\"loading\">\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n    </div>\n    <button class=\"normal\" v-else-if=\"!finished\" @click=\"emitLoadEvent\">\n      <i class=\"iconfont icon-loadmore\"></i>\n    </button>\n    <span class=\"finised\" v-else>\n      <i18n :k=\"LanguageKey.ARTICLE_LIST_NO_MORE\" />\n    </span>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @use 'sass:math';\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .loadmore {\n    display: flex;\n    justify-content: center;\n    flex-direction: column;\n    align-items: center;\n    overflow: hidden;\n    color: $text-disabled;\n\n    .normal {\n      width: 100%;\n      font-size: $font-size-h2;\n    }\n\n    .finised {\n      margin: $xs-gap 0;\n      color: $text-divider;\n      font-weight: bold;\n    }\n\n    .loading {\n      margin: $sm-gap 0;\n      display: flex;\n      align-items: center;\n\n      @keyframes loading {\n        0% {\n          opacity: 1;\n        }\n        50% {\n          opacity: 0.5;\n        }\n        100% {\n          opacity: 1;\n        }\n      }\n\n      > div {\n        width: 0.6rem;\n        margin: 0 $sm-gap;\n        border-radius: $mini-radius;\n        animation: loading 1s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n        &:nth-child(1) {\n          height: 1.6rem;\n          background: $module-bg-darker-3;\n          animation-delay: -0.6s;\n        }\n        &:nth-child(2) {\n          height: 1rem;\n          background: $module-bg-darker-3;\n          animation-delay: -0.4s;\n        }\n        &:nth-child(3) {\n          height: 1rem;\n          background: $module-bg-darker-4;\n          animation-delay: -0.2s;\n        }\n        &:nth-child(4) {\n          height: 1.6rem;\n          background: $module-bg-darker-3;\n          animation-delay: -1s;\n        }\n      }\n    }\n  }\n</style>\n","/**\n * @file Thumbnail transformer\n * @module transform.thumbnail\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { getCDN_URL } from '/@/transforms/url'\n\n// https://help.aliyun.com/document_detail/209551.html\n// https://help.aliyun.com/document_detail/193593.html\n// MARK: Auto WebP with AlibabaCloud CDN\nconst WebPArgs = `format,webp/`\n\nexport const getArticleBannerThumbnailURL = (url: string, isWebPImage: boolean) => {\n  if (!url) {\n    return getCDN_URL(`/images/thumbnail/carrousel.jpg`)\n  }\n\n  const w = 1190\n  const h = 420\n  const format = isWebPImage ? WebPArgs : ''\n  const watermark = `watermark,text_U3VybW9uLm1l,type_bm90b3NhbnM,color_ffffff,size_31,g_sw,t_26,x_30,y_18`\n  return `${url}?image_process=${format}quality,q_88/resize,w_${w},h_${h}/crop,mid,w_${w},h_${h}/${watermark}`\n}\n\nexport const getMobileArticleListThumbnailURL = (url: string, isWebPImage = false) => {\n  if (!url) {\n    return ''\n  }\n\n  const w = 700\n  const h = 247\n  const format = isWebPImage ? WebPArgs : ''\n  const watermark = `watermark,text_U3VybW9uLm1l,type_bm90b3NhbnM,color_ffffff,size_28,g_sw,t_26,x_22,y_18`\n  return `${url}?image_process=${format}quality,q_82/resize,w_${w},h_${h}/crop,mid,w_${w},h_${h}/${watermark}`\n}\n\nexport const getArticleListThumbnailURL = (url: string, isWebPImage: boolean) => {\n  if (!url) {\n    return ''\n  }\n  const w = 350\n  const h = 238\n  const format = isWebPImage ? WebPArgs : ''\n  return `${url}?image_process=${format}quality,q_80/resize,w_${w},h_${h}/crop,mid,w_${w},h_${h}`\n}\n\nexport const getArticleSquareThumbnailURL = (url: string) => {\n  const size = 320\n  return url ? `${url}?image_process=quality,q_84/resize,w_${size},h_${size}/crop,mid,w_${size},h_${size}` : ''\n}\n","/**\n * @file App state transformer\n * @module transform.state\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { UniversalKeyValue } from '/@/interfaces/common'\nimport { UNDEFINED, isNull, isUndefined } from '/@/constants/value'\nimport { OriginState } from '/@/constants/state'\n\nexport const isOriginalType = (originState?: OriginState) => {\n  return isNull(originState) || isUndefined(null) || originState === OriginState.Original\n}\n\nexport const isHybridType = (originState: OriginState) => {\n  return originState === OriginState.Hybrid\n}\n\nexport const isReprintType = (originState: OriginState) => {\n  return originState === OriginState.Reprint\n}\n\nexport const getExtendsObject = (kvs: UniversalKeyValue[] | void): { [key: string]: string } => {\n  return kvs?.length ? kvs.reduce((v, c) => ({ ...v, [c.name]: c.value }), {}) : {}\n}\n\nexport const getExtendValue = (kvs: UniversalKeyValue[], key: string) => {\n  return kvs.length ? getExtendsObject(kvs)[key] : UNDEFINED\n}\n","<script lang=\"ts\" setup>\n  import { computed } from 'vue'\n  import { LanguageKey } from '/@/language'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { Article } from '/@/interfaces/article'\n  import { useIdentityStore } from '/@/stores/identity'\n  import { getArticleDetailRoute } from '/@/transforms/route'\n  import { getMobileArticleListThumbnailURL } from '/@/transforms/thumbnail'\n  import { isOriginalType, isHybridType, isReprintType } from '/@/transforms/state'\n  import { numberSplit } from '/@/transforms/text'\n\n  const props = defineProps<{\n    article: Article\n  }>()\n\n  const { router, gState } = useEnhancer()\n  const identityStore = useIdentityStore()\n  const isLiked = computed(() => identityStore.isLikedPage(props.article.id))\n  const isHybrid = isHybridType(props.article.origin)\n  const isReprint = isReprintType(props.article.origin)\n  const isOriginal = isOriginalType(props.article.origin)\n\n  const getThumbnailURL = (url: string) => {\n    return getMobileArticleListThumbnailURL(url, gState.imageExt.value.isWebP)\n  }\n\n  const handleClick = () => {\n    router.push(getArticleDetailRoute(props.article.id))\n  }\n</script>\n\n<template>\n  <div class=\"article-item\" @click=\"handleClick\">\n    <div class=\"thumbnail\">\n      <span\n        class=\"oirigin\"\n        :class=\"{\n          original: isOriginal,\n          reprint: isReprint,\n          hybrid: isHybrid\n        }\"\n      >\n        <i18n :k=\"LanguageKey.ORIGIN_ORIGINAL\" v-if=\"isOriginal\" />\n        <i18n :k=\"LanguageKey.ORIGIN_REPRINT\" v-else-if=\"isReprint\" />\n        <i18n :k=\"LanguageKey.ORIGIN_HYBRID\" v-else-if=\"isHybrid\" />\n      </span>\n      <div\n        class=\"image\"\n        loading=\"lazy\"\n        :style=\"{ backgroundImage: `url(${getThumbnailURL(article.thumbnail)})` }\"\n        :alt=\"article.title\"\n        :title=\"article.title\"\n      />\n    </div>\n    <div class=\"content\">\n      <div class=\"body\">\n        <h4 class=\"title\">\n          <router-link class=\"link\" :title=\"article.title\" :to=\"getArticleDetailRoute(article.id)\">\n            {{ article.title }}\n          </router-link>\n        </h4>\n        <p class=\"description\" style=\"-webkit-box-orient: vertical\" v-html=\"article.description\"></p>\n      </div>\n      <div class=\"meta\">\n        <span class=\"date\">\n          <i class=\"iconfont icon-clock\"></i>\n          <udate to=\"ago\" :date=\"article.created_at\" />\n        </span>\n        <span class=\"views\">\n          <i class=\"iconfont icon-eye\"></i>\n          <span>{{ numberSplit(article.meta.views) }}</span>\n        </span>\n        <span class=\"comments\">\n          <i class=\"iconfont icon-comment\"></i>\n          <span>{{ article.meta.comments }}</span>\n        </span>\n        <span class=\"likes\">\n          <i class=\"iconfont icon-like\" :class=\"{ liked: isLiked }\"></i>\n          <span>{{ article.meta.likes }}</span>\n        </span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .article-item {\n    display: flex;\n    flex-direction: column;\n    position: relative;\n    background-color: $module-bg;\n    @include radius-box($sm-radius);\n\n    .thumbnail {\n      width: 100%;\n      height: auto;\n      overflow: hidden;\n      position: relative;\n      background-color: $module-bg-darker-3;\n\n      .oirigin {\n        $opacity: 0.7;\n        position: absolute;\n        right: 0;\n        top: 0;\n        z-index: $z-index-normal + 1;\n        padding: 0 $lg-gap;\n        border-bottom-left-radius: $xs-radius;\n        opacity: 0.7;\n        line-height: 2.3rem;\n        font-size: $font-size-small;\n        font-weight: bold;\n        color: $white;\n        text-align: center;\n        text-transform: uppercase;\n        @include visibility-transition();\n\n        &.original {\n          background-color: rgba($surmon, $opacity);\n        }\n        &.hybrid {\n          background-color: rgba($accent, $opacity);\n        }\n        &.reprint {\n          background-color: rgba($red, $opacity);\n        }\n      }\n\n      .image {\n        min-height: calc((100vw - 2rem) * 0.34);\n        max-height: 12rem;\n        background-size: cover;\n        background-position: center;\n      }\n    }\n\n    .content {\n      display: block;\n\n      .body {\n        padding: $gap;\n        padding-bottom: $sm-gap;\n\n        .title {\n          margin-top: 0;\n          margin-bottom: $sm-gap;\n          font-weight: bold;\n          @include text-overflow();\n\n          .link {\n            text-decoration: none;\n          }\n        }\n\n        .description {\n          margin: 0;\n          line-height: 2em;\n          overflow: hidden;\n          color: $text-secondary;\n          text-overflow: ellipsis;\n          @include clamp(3);\n        }\n      }\n\n      .meta {\n        display: flex;\n        justify-content: space-between;\n        align-items: baseline;\n        padding: $gap;\n        border-top: 1px dashed $module-bg-darker-3;\n        overflow: hidden;\n        color: $text-disabled;\n        font-size: $font-size-small;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        word-wrap: normal;\n\n        .iconfont {\n          margin-right: $sm-gap;\n        }\n\n        .views {\n          min-width: 4rem;\n        }\n\n        .likes {\n          .liked {\n            color: $red;\n          }\n        }\n\n        .likes,\n        .comments {\n          min-width: 3em;\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { computed, watch, onBeforeMount } from 'vue'\n  import { LanguageKey } from '/@/language'\n  import { META } from '/@/config/app.config'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useUniversalFetch, onClient } from '/@/universal'\n  import { useArticleListStore } from '/@/stores/article'\n  import { useTagStore, getTagEnName } from '/@/stores/tag'\n  import { useCategoryStore } from '/@/stores/category'\n  import { useAppOptionStore } from '/@/stores/basic'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { scrollToNextScreen } from '/@/utils/scroller'\n  import Loadmore from './loadmore.vue'\n  import ListItem from './item.vue'\n\n  const props = defineProps<{\n    tagSlug?: string\n    categorySlug?: string\n    searchKeyword?: string\n    date?: string\n  }>()\n\n  const { i18n: _i18n, seo } = useEnhancer()\n  const tagStore = useTagStore()\n  const categoryStore = useCategoryStore()\n  const articleListStore = useArticleListStore()\n  const appOptionStore = useAppOptionStore()\n  const category = computed(() => {\n    return props.categorySlug ? categoryStore.data.find((category) => category.slug === props.categorySlug)! : null\n  })\n  const tag = computed(() => {\n    return props.tagSlug ? tagStore.data.find((tag) => tag.slug === props.tagSlug) : null\n  })\n\n  const hasMoreArticles = computed(() => {\n    const pagination = articleListStore.pagination\n    return pagination ? pagination.current_page < pagination.total_page : false\n  })\n\n  seo(() => {\n    const titles: string[] = Object.values(props)\n      .filter(Boolean)\n      .map((prop) => firstUpperCase(prop as string))\n    // filter page\n    if (titles.length) {\n      return {\n        pageTitle: titles.join(' | ')\n      }\n    }\n    // index page\n    return {\n      title: `${META.title} - ${_i18n.t(LanguageKey.APP_SLOGAN)}`,\n      description: appOptionStore.data?.description,\n      keywords: appOptionStore.data?.keywords.join(','),\n      ogType: 'website'\n    }\n  })\n\n  const fetchArticles = async (params: any = {}) => {\n    await articleListStore.fetch({\n      category_slug: props.categorySlug,\n      tag_slug: props.tagSlug,\n      date: props.date,\n      keyword: props.searchKeyword,\n      ...params\n    })\n  }\n\n  const loadmoreArticles = async () => {\n    await fetchArticles({\n      page: articleListStore.pagination!.current_page + 1\n    })\n    onClient(scrollToNextScreen)\n  }\n\n  onBeforeMount(() => {\n    watch(\n      () => props,\n      () => fetchArticles(),\n      { flush: 'post', deep: true }\n    )\n  })\n\n  useUniversalFetch(() => fetchArticles())\n</script>\n\n<template>\n  <div class=\"articles\">\n    <div class=\"header\" v-if=\"tagSlug || categorySlug || date || searchKeyword\">\n      <div class=\"content\">\n        <template v-if=\"categorySlug\">\n          <i18n v-if=\"category\">\n            <template #zh> {{ category.name }} </template>\n            <template #en>Category \"{{ firstUpperCase(category.slug) }}\" 's result</template>\n          </i18n>\n          <span v-else>{{ categorySlug }}</span>\n        </template>\n        <template v-if=\"tagSlug\">\n          <i18n v-if=\"tag\">\n            <template #zh> {{ tag.name }} </template>\n            <template #en>Tag \"{{ getTagEnName(tag) }}\" 's result</template>\n          </i18n>\n          <span v-else>{{ tagSlug }}</span>\n        </template>\n        <i18n v-if=\"date\">\n          <template #zh> {{ date }} </template>\n          <template #en>Date \"{{ date }}\" 's result</template>\n        </i18n>\n        <i18n v-if=\"searchKeyword\">\n          <template #zh> {{ searchKeyword }} </template>\n          <template #en>Search keyword \"{{ searchKeyword }}\" 's result</template>\n        </i18n>\n      </div>\n      <router-link to=\"/\" class=\"close\">\n        <i class=\"iconfont icon-cancel\"></i>\n      </router-link>\n    </div>\n    <placeholder\n      :data=\"articleListStore.data.length\"\n      :loading=\"!articleListStore.data.length && articleListStore.fetching\"\n    >\n      <template #loading>\n        <ul class=\"skeletons\" key=\"skeleton\">\n          <li v-for=\"item in 3\" :key=\"item\" class=\"item\">\n            <div class=\"thumbnail\">\n              <skeleton-base />\n            </div>\n            <div class=\"content\">\n              <div class=\"title\">\n                <skeleton-line />\n              </div>\n              <div class=\"description\">\n                <skeleton-line />\n              </div>\n            </div>\n          </li>\n        </ul>\n      </template>\n      <template #placeholder>\n        <empty class=\"empty\" :i18n-key=\"LanguageKey.ARTICLE_PLACEHOLDER\" />\n      </template>\n      <template #default>\n        <div>\n          <transition-group key=\"list\" name=\"list-fade\" tag=\"div\" class=\"list\">\n            <list-item\n              class=\"list-item\"\n              :article=\"article\"\n              :key=\"index\"\n              v-for=\"(article, index) in articleListStore.data\"\n            />\n          </transition-group>\n          <loadmore\n            :loading=\"articleListStore.fetching\"\n            :finished=\"!hasMoreArticles\"\n            @loadmore=\"loadmoreArticles\"\n          />\n        </div>\n      </template>\n    </placeholder>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @use 'sass:math';\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .articles {\n    .header {\n      $size: 4rem;\n      display: flex;\n      height: $size;\n      line-height: $size;\n      margin-left: -$gap;\n      margin-right: -$gap;\n      margin-top: -$lg-gap;\n      margin-bottom: $lg-gap;\n      text-align: center;\n      background-color: $module-bg-darker-1;\n\n      .close {\n        flex-shrink: 0;\n        width: $size;\n      }\n\n      .content {\n        flex-grow: 1;\n        padding-left: $size;\n        font-weight: bold;\n        @include text-overflow();\n      }\n    }\n\n    .skeletons {\n      padding: 0;\n      list-style: none;\n\n      .item {\n        background-color: $module-bg;\n        @include radius-box($sm-radius);\n        margin-bottom: $lg-gap;\n        &:last-child {\n          margin-bottom: 0;\n        }\n\n        .thumbnail {\n          height: 9rem;\n          padding: $gap;\n        }\n\n        .content {\n          padding: 1rem;\n          padding-top: 0;\n\n          .title {\n            width: 60%;\n            height: 2.4rem;\n          }\n\n          .description {\n            width: 80%;\n            margin-top: 1rem;\n            height: 1rem;\n          }\n        }\n      }\n    }\n\n    .list {\n      .list-item {\n        margin-bottom: $lg-gap;\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { computed } from 'vue'\n  import { Language, LanguageKey } from '/@/language'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { Article } from '/@/interfaces/article'\n  import { useIdentityStore } from '/@/stores/identity'\n  import { getArticleDetailRoute, getCategoryFlowRoute } from '/@/transforms/route'\n  import { isOriginalType, isHybridType, isReprintType } from '/@/transforms/state'\n  import { getArticleListThumbnailURL } from '/@/transforms/thumbnail'\n  import { numberSplit } from '/@/transforms/text'\n\n  const props = defineProps<{\n    article: Article\n  }>()\n\n  const { gState } = useEnhancer()\n  const identity = useIdentityStore()\n  const isLiked = computed(() => identity.isLikedPage(props.article.id))\n  const isHybrid = isHybridType(props.article.origin)\n  const isReprint = isReprintType(props.article.origin)\n  const isOriginal = isOriginalType(props.article.origin)\n\n  const getThumbnailURL = (url: string) => {\n    return getArticleListThumbnailURL(url, gState.imageExt.value.isWebP)\n  }\n\n  const getLanguageText = (language: Language) => {\n    return language === Language.Chinese ? '' : 'EN'\n  }\n</script>\n\n<template>\n  <div class=\"article-item\">\n    <div class=\"item-background\" :style=\"{ backgroundImage: `url(${getThumbnailURL(article.thumbnail)})` }\" />\n    <div class=\"item-content\">\n      <router-link class=\"item-thumbnail\" :to=\"getArticleDetailRoute(article.id)\">\n        <span\n          class=\"item-oirigin\"\n          :class=\"{\n            original: isOriginal,\n            hybrid: isHybrid,\n            reprint: isReprint\n          }\"\n        >\n          <i18n :k=\"LanguageKey.ORIGIN_ORIGINAL\" v-if=\"isOriginal\" />\n          <i18n :k=\"LanguageKey.ORIGIN_REPRINT\" v-else-if=\"isReprint\" />\n          <i18n :k=\"LanguageKey.ORIGIN_HYBRID\" v-else-if=\"isHybrid\" />\n        </span>\n        <div\n          class=\"image\"\n          loading=\"lazy\"\n          :style=\"{ backgroundImage: `url(${getThumbnailURL(article.thumbnail)})` }\"\n          :alt=\"article.title\"\n          :title=\"article.title\"\n        />\n      </router-link>\n      <div class=\"item-body\">\n        <div class=\"item-content\">\n          <h5 class=\"title\">\n            <router-link class=\"link\" :to=\"getArticleDetailRoute(article.id)\" :title=\"article.title\">\n              {{ article.title }}\n            </router-link>\n            <span class=\"language\">{{ getLanguageText(article.lang) }}</span>\n          </h5>\n          <p class=\"description\" style=\"-webkit-box-orient: vertical\" v-html=\"article.description\"></p>\n        </div>\n        <div class=\"item-meta\">\n          <span class=\"date\">\n            <i class=\"iconfont icon-clock\"></i>\n            <udate to=\"ago\" :date=\"article.created_at\" />\n          </span>\n          <span class=\"views\">\n            <i class=\"iconfont icon-eye\"></i>\n            <span>{{ numberSplit(article.meta.views) }}</span>\n          </span>\n          <span class=\"comments\">\n            <i class=\"iconfont icon-comment\"></i>\n            <span>{{ article.meta.comments }}</span>\n          </span>\n          <span class=\"likes\">\n            <i class=\"iconfont icon-like\" :class=\"{ liked: isLiked }\"></i>\n            <span>{{ article.meta.likes }}</span>\n          </span>\n          <span class=\"categories\">\n            <i class=\"iconfont icon-category\"></i>\n            <placeholder :transition=\"false\" :data=\"article.categories.length\">\n              <template #placeholder>\n                <i18n :k=\"LanguageKey.EMPTY_PLACEHOLDER\" />\n              </template>\n              <template #default>\n                <router-link\n                  v-for=\"(category, index) in article.categories.slice(0, 1)\"\n                  :key=\"index\"\n                  :to=\"getCategoryFlowRoute(category.slug)\"\n                >\n                  <i18n :zh=\"category.name\" :en=\"category.slug\" />\n                </router-link>\n              </template>\n            </placeholder>\n          </span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .article-item {\n    position: relative;\n    @include radius-box($sm-radius);\n\n    &:last-child {\n      margin: 0;\n    }\n\n    .item-background {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      z-index: -1;\n      background-size: 120%;\n      background-position: 0% 50%;\n      opacity: 0.06;\n    }\n\n    > .item-content {\n      $height: $gap * 11;\n      $padding: $sm-gap;\n      $content-height: $height - ($padding * 2);\n      display: flex;\n      height: $height;\n      padding: $padding;\n      overflow: hidden;\n      @include common-bg-module($transition-time-fast);\n\n      &:hover {\n        .item-thumbnail {\n          .item-oirigin {\n            opacity: 1;\n          }\n\n          .image {\n            opacity: 0.88;\n            transform: translateX(-3px);\n          }\n        }\n      }\n\n      > .item-thumbnail {\n        flex-shrink: 0;\n        /* Google AdSense */\n        $width: 186px;\n        width: $width;\n        height: $content-height;\n        margin-right: $lg-gap;\n        position: relative;\n        @include radius-box($xs-radius);\n\n        .item-oirigin {\n          $height: 2.1rem;\n          $opacity: 0.7;\n          position: absolute;\n          left: 0;\n          top: 0;\n          height: $height;\n          line-height: $height;\n          z-index: $z-index-normal + 1;\n          padding: 0 $sm-gap;\n          border-bottom-right-radius: $xs-radius;\n          opacity: 0.5;\n          font-size: $font-size-small;\n          color: $white;\n          text-align: center;\n          @include visibility-transition();\n\n          &.original {\n            background-color: rgba($surmon, $opacity);\n          }\n          &.hybrid {\n            background-color: rgba($accent, $opacity);\n          }\n          &.reprint {\n            background-color: rgba($red, $opacity);\n          }\n        }\n\n        .image {\n          height: 100%;\n          min-width: 100%;\n          width: $width + 3px;\n          max-width: $width + 3px;\n          border-color: transparent;\n          background-color: $module-bg-hover;\n          background-size: cover;\n          background-position: center;\n          opacity: 1;\n          transform: translateX(0);\n          transition:\n            transform $transition-time-normal,\n            opacity $transition-time-normal;\n        }\n      }\n\n      > .item-body {\n        flex-grow: 1;\n        display: flex;\n        flex-direction: column;\n        justify-content: space-between;\n        height: $content-height;\n        padding-right: $xs-gap;\n\n        .title {\n          display: flex;\n          justify-content: space-between;\n          margin-top: 3px;\n          margin-bottom: $sm-gap;\n          font-weight: bold;\n\n          .link {\n            display: block;\n            max-width: 26rem;\n            margin-left: 0;\n            text-decoration: none;\n            border-bottom: 1px solid transparent;\n            color: $text;\n            transition: margin $transition-time-normal;\n            @include text-overflow();\n            &:hover {\n              color: $link-color;\n              border-color: initial;\n              margin-left: $xs-gap;\n            }\n          }\n\n          .language {\n            opacity: 0.5;\n            color: $text-divider;\n          }\n        }\n\n        .description {\n          margin: 0;\n          line-height: 1.8em;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          font-size: $font-size-h6;\n          @include clamp(2);\n        }\n\n        > .item-meta {\n          height: 2em;\n          line-height: 2em;\n          display: flex;\n          justify-content: space-between;\n          align-items: baseline;\n          overflow: hidden;\n          font-size: $font-size-small;\n          white-space: nowrap;\n          text-overflow: ellipsis;\n          word-wrap: normal;\n          color: $text-secondary;\n\n          > .views {\n            width: 4em;\n          }\n\n          > .likes {\n            > .liked {\n              color: $red;\n            }\n          }\n\n          > .likes,\n          > .comments {\n            width: 3em;\n          }\n\n          > .date,\n          > .views,\n          > .comments,\n          > .likes,\n          > .tags,\n          > .categories {\n            > .iconfont {\n              margin-right: $xs-gap;\n            }\n          }\n\n          > .categories {\n            a {\n              color: $text-secondary;\n              text-transform: capitalize;\n              margin-right: $sm-gap;\n\n              &:last-child {\n                margin-right: 0;\n              }\n            }\n          }\n\n          > .tags {\n            margin-right: 0;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { computed } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { Article } from '/@/interfaces/article'\n  import { Pagination } from '/@/interfaces/common'\n  import { LanguageKey } from '/@/language'\n  import ListItem from './item.vue'\n\n  enum Events {\n    Loadmore = 'loadmore'\n  }\n\n  interface Props {\n    articles: Article[]\n    pagination: Pagination | null\n    fetching: boolean\n    mammon?: boolean\n  }\n\n  const props = withDefaults(defineProps<Props>(), {\n    mammon: true\n  })\n\n  const emit = defineEmits<{\n    (e: Events.Loadmore): void\n  }>()\n\n  const { isDarkTheme, isZhLang } = useEnhancer()\n  const isLoadMoreEnabled = computed(() => {\n    if (!props.pagination) return false\n    return props.pagination.current_page < props.pagination.total_page\n  })\n\n  const handleLoadmore = () => {\n    emit(Events.Loadmore)\n  }\n</script>\n\n<template>\n  <div class=\"articles\">\n    <div class=\"article-list\">\n      <placeholder :data=\"articles.length\" :loading=\"!articles.length && fetching\">\n        <template #loading>\n          <ul class=\"article-list-skeleton\" key=\"skeleton\">\n            <li v-for=\"item in 6\" :key=\"item\" class=\"item\">\n              <div class=\"thumbnail\">\n                <skeleton-base />\n              </div>\n              <div class=\"content\">\n                <div class=\"title\">\n                  <skeleton-line />\n                </div>\n                <div class=\"description\">\n                  <div class=\"line-item\" :key=\"line\" v-for=\"line in 2\">\n                    <skeleton-line />\n                  </div>\n                </div>\n                <skeleton-line class=\"meta\" />\n              </div>\n            </li>\n          </ul>\n        </template>\n        <template #placeholder>\n          <empty class=\"empty\" :i18n-key=\"LanguageKey.ARTICLE_PLACEHOLDER\" />\n        </template>\n        <template #default>\n          <div key=\"list\">\n            <client-only>\n              <template v-if=\"mammon\">\n                <Adsense\n                  v-if=\"isDarkTheme\"\n                  ins-class=\"mammon-ins\"\n                  data-ad-format=\"fluid\"\n                  data-ad-layout-key=\"-hj-9+3a-97+6s\"\n                  data-ad-slot=\"1765379407\"\n                  class=\"article-list-mammon\"\n                />\n                <Adsense\n                  v-else\n                  ins-class=\"mammon-ins\"\n                  data-ad-format=\"fluid\"\n                  data-ad-layout-key=\"-hj-9+3a-97+6s\"\n                  data-ad-slot=\"1148538406\"\n                  class=\"article-list-mammon\"\n                />\n              </template>\n            </client-only>\n            <transition-group name=\"list-fade\">\n              <list-item\n                v-for=\"articleItem in articles\"\n                class=\"list-item\"\n                :key=\"articleItem.id\"\n                :article=\"articleItem\"\n              />\n            </transition-group>\n          </div>\n        </template>\n      </placeholder>\n    </div>\n    <button class=\"article-load\" :disabled=\"fetching || !isLoadMoreEnabled\" @click=\"handleLoadmore\">\n      <div class=\"background\">\n        <span class=\"left\"></span>\n        <span class=\"right\"></span>\n      </div>\n      <div class=\"content\">\n        <span class=\"left\">\n          <template v-if=\"fetching\"></template>\n          <template v-else>{{ articles.length }} / {{ pagination?.total }}</template>\n        </span>\n        <span class=\"right\">\n          <span class=\"text\" :class=\"{ zh: isZhLang }\">\n            <i18n v-if=\"fetching\" :k=\"LanguageKey.ARTICLE_LIST_LOADING\" />\n            <i18n v-else-if=\"isLoadMoreEnabled\" :k=\"LanguageKey.ARTICLE_LIST_LOADMORE\" />\n            <i18n v-else :k=\"LanguageKey.ARTICLE_LIST_NO_MORE\" />\n          </span>\n          <i class=\"iconfont icon-loadmore\"></i>\n        </span>\n      </div>\n    </button>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @use 'sass:math';\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .articles {\n    .article-list-skeleton {\n      padding: 0;\n      margin: 0;\n      list-style: none;\n      overflow: hidden;\n\n      .item {\n        display: flex;\n        height: 10rem;\n        padding: $gap;\n        margin-bottom: $lg-gap;\n        @include common-bg-module();\n        @include radius-box($sm-radius);\n        &:last-child {\n          margin-bottom: 0;\n        }\n\n        .thumbnail {\n          height: 100%;\n          width: 15rem;\n        }\n\n        .content {\n          margin-left: $lg-gap;\n          flex-grow: 1;\n\n          .title {\n            height: 1.5em;\n            width: 36%;\n          }\n          .description {\n            .line-item {\n              width: 100%;\n              height: $lg-gap;\n              margin-top: $sm-gap;\n            }\n          }\n          .meta {\n            width: 68%;\n            height: $lg-gap;\n            margin-top: $lg-gap;\n          }\n        }\n      }\n    }\n\n    .article-list-mammon {\n      width: 100%;\n      min-height: 10rem;\n      padding: $sm-gap;\n      margin-bottom: $lg-gap;\n      @include common-bg-module();\n      @include radius-box($sm-radius);\n\n      &::v-deep(.mammon-ins) {\n        margin: $xs-gap 0;\n        height: 100px;\n      }\n    }\n\n    .article-list {\n      margin-bottom: $lg-gap;\n      min-height: $lg-gap;\n      overflow: hidden;\n\n      .empty {\n        height: $gap * 10;\n        font-size: $font-size-h4;\n        font-weight: bold;\n        @include common-bg-module();\n        @include radius-box($sm-radius);\n      }\n\n      .list-item {\n        margin-bottom: $lg-gap;\n        &:last-child {\n          margin-bottom: 0;\n        }\n      }\n    }\n\n    .article-load {\n      width: 100%;\n      height: $button-block-height;\n      position: relative;\n      display: block;\n      @include radius-box($sm-radius);\n      &[disabled] {\n        opacity: 0.6;\n      }\n      &:not([disabled]):hover {\n        .background {\n          .left {\n            background: $module-bg-opaque;\n          }\n          .right {\n            background: $surmon;\n          }\n        }\n        .content {\n          .left {\n            color: $primary;\n          }\n          .right {\n            color: $white;\n          }\n        }\n      }\n\n      .content {\n        height: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n\n        .left,\n        .right {\n          @include color-transition();\n        }\n\n        .left {\n          font-weight: bold;\n          color: $text-disabled;\n          margin-left: 2em;\n        }\n\n        .right {\n          width: 10rem;\n          color: $text-disabled;\n          .text {\n            font-weight: bold;\n            text-transform: uppercase;\n            &:not(.zh) {\n              font-size: 95%;\n            }\n          }\n          .iconfont {\n            margin-left: $gap;\n          }\n        }\n      }\n\n      .background {\n        position: absolute;\n        top: 0;\n        left: 0;\n        z-index: $z-index-normal - 1;\n        width: 100%;\n        height: 100%;\n        display: flex;\n        justify-content: space-between;\n        $skew: -20deg;\n        $skew-offset: $gap;\n\n        .left,\n        .right {\n          height: 100%;\n          border-radius: $xs-radius;\n          @include background-transition();\n        }\n\n        .left {\n          flex: 1;\n          margin-left: -$skew-offset;\n          margin-right: $skew-offset;\n          background: $module-bg;\n          transform: skew($skew);\n        }\n\n        .right {\n          width: 12rem;\n          margin-right: -$skew-offset;\n          background: $module-bg-opaque;\n          transform: skew($skew);\n        }\n      }\n    }\n  }\n</style>\n","/**\n * @file Swiper for vue\n * @module effect.swiper\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { Swiper as SwiperClass } from 'swiper'\nimport { Pagination, Navigation, Grid, Mousewheel, Autoplay, A11y, EffectFade } from 'swiper/modules'\n\nSwiperClass.use([Grid, Pagination, Navigation, Mousewheel, Autoplay, A11y, EffectFade])\n\nexport default SwiperClass\nexport { Swiper, SwiperSlide } from 'swiper/vue'\n","<script lang=\"ts\" setup>\n  import { computed } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { LanguageKey } from '/@/language'\n  import { Article } from '/@/interfaces/article'\n  import { Swiper, SwiperSlide } from '/@/effects/swiper'\n  import { getArticleDetailRoute } from '/@/transforms/route'\n  import { getArticleBannerThumbnailURL } from '/@/transforms/thumbnail'\n\n  interface Props {\n    articles: Array<Article>\n    fetching: boolean\n    count?: number\n  }\n\n  interface CarrouselSlide {\n    title: string\n    imgage: string\n    route?: string\n    url?: string\n    ad?: boolean\n  }\n\n  const props = withDefaults(defineProps<Props>(), {\n    count: 9\n  })\n\n  const { gState, adConfig, isDarkTheme } = useEnhancer()\n  const slides = computed<Array<CarrouselSlide>>(() => {\n    // articles\n    const result: CarrouselSlide[] = props.articles.slice(0, props.count).map((article) => ({\n      title: article.title,\n      imgage: getArticleBannerThumbnailURL(article.thumbnail, gState.imageExt.value.isWebP),\n      route: getArticleDetailRoute(article.id),\n      ad: false\n    }))\n    if (!result.length) {\n      return []\n    }\n\n    // advertisement\n    if (adConfig.value.PC_CARROUSEL) {\n      const config = adConfig.value.PC_CARROUSEL\n      result.splice(config.index, 0, {\n        title: config.title,\n        imgage: config.src,\n        route: config.url,\n        ad: true\n      })\n    }\n    return result\n  })\n</script>\n\n<template>\n  <div class=\"carrousel\" :class=\"{ dark: isDarkTheme }\">\n    <placeholder :data=\"slides.length\" :loading=\"fetching\">\n      <template #placeholder>\n        <empty class=\"article-empty\" key=\"empty\">\n          <i18n :k=\"LanguageKey.ARTICLE_PLACEHOLDER\" />\n        </empty>\n      </template>\n      <template #loading>\n        <div class=\"article-skeleton\" key=\"skeleton\">\n          <div class=\"title\">\n            <skeleton-line />\n          </div>\n          <div class=\"content\">\n            <div class=\"first\">\n              <skeleton-line />\n            </div>\n            <div class=\"line\" v-for=\"index in 3\" :key=\"index\">\n              <skeleton-line class=\"line-item\" />\n            </div>\n          </div>\n        </div>\n      </template>\n      <template #default>\n        <swiper\n          class=\"swiper\"\n          :loop=\"true\"\n          :set-wrapper-size=\"true\"\n          :mousewheel=\"true\"\n          :observe-parents=\"true\"\n          :grab-cursor=\"false\"\n          :simulate-touch=\"false\"\n          :pagination=\"{ clickable: true }\"\n          :autoplay=\"{ delay: 3500, disableOnInteraction: false }\"\n        >\n          <swiper-slide v-for=\"(slide, index) in slides.slice(0, 9)\" :key=\"index\">\n            <div class=\"content\">\n              <ulink class=\"link\" :href=\"slide.url\" :to=\"slide.route\">\n                <img :src=\"slide.imgage\" :alt=\"slide.title\" draggable=\"false\" loading=\"lazy\" />\n                <div class=\"title\" :title=\"slide.title\">\n                  <div class=\"background\"></div>\n                  <div class=\"prospect\">\n                    <span class=\"text\" :style=\"{ backgroundImage: `url('${slide.imgage}')` }\">\n                      {{ slide.title }}\n                    </span>\n                  </div>\n                </div>\n                <span class=\"ad-symbol\" v-if=\"slide.ad\">\n                  <i18n :k=\"LanguageKey.AD\" />\n                </span>\n              </ulink>\n            </div>\n          </swiper-slide>\n        </swiper>\n      </template>\n    </placeholder>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  $carrousel-height: 210px;\n\n  .carrousel {\n    position: relative;\n    height: $carrousel-height;\n    @include common-bg-module();\n    @include radius-box($lg-radius);\n\n    .article-empty {\n      font-size: $font-size-h1;\n      font-weight: bold;\n    }\n\n    .article-skeleton {\n      position: relative;\n      width: 100%;\n      height: 100%;\n      padding: 2rem;\n\n      .content {\n        width: 50%;\n        margin-top: 4rem;\n        margin-left: 1rem;\n\n        .first {\n          width: 8rem;\n          height: $gap * 2;\n          margin-bottom: $gap;\n        }\n\n        .line {\n          .line-item {\n            width: 14rem;\n            height: $lg-gap;\n            margin-bottom: $gap;\n          }\n        }\n      }\n\n      .title {\n        position: absolute;\n        top: 2rem;\n        right: 2rem;\n        height: 2.6rem;\n        width: 18rem;\n      }\n    }\n\n    &.dark {\n      .swiper-slide {\n        .title {\n          .prospect {\n            .text {\n              color: $link-color !important;\n              -webkit-text-fill-color: $link-color !important;\n            }\n          }\n        }\n      }\n    }\n\n    .swiper {\n      width: 595px;\n      height: $carrousel-height;\n\n      // filter for slide when transitioning\n      ::v-deep(.swiper-wrapper[style*='300ms']) {\n        .swiper-slide-active {\n          .content {\n            @include motion-blur-filter('horizontal');\n          }\n        }\n      }\n\n      ::v-deep(.swiper-pagination) {\n        .swiper-pagination-bullet-active {\n          width: 2rem;\n        }\n      }\n\n      .content {\n        width: 100%;\n        height: $carrousel-height;\n        position: relative;\n        overflow: hidden;\n\n        > .link {\n          display: block;\n          width: 100%;\n          height: 100%;\n        }\n\n        img {\n          width: 100%;\n          transform: scale(1);\n          transition: transform $transition-time-normal;\n\n          &:hover {\n            transform: scale(1.06);\n          }\n        }\n\n        .ad-symbol {\n          display: block;\n          position: absolute;\n          top: 5.6rem;\n          right: 2.6rem;\n          padding: 0.1em 0.3em;\n          border-radius: $mini-radius;\n          border: 1px solid;\n          font-size: $font-size-root;\n          color: $module-bg;\n        }\n\n        .title {\n          $offset: 3px;\n          display: block;\n          position: absolute;\n          top: 2rem;\n          right: 2.6rem;\n          opacity: 0.8;\n          transition: opacity $transition-time-normal;\n\n          .background {\n            content: '';\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            z-index: -1;\n            top: 0;\n            left: 0;\n            background-color: $module-bg;\n            transform: translate3d($offset, -$offset, 0);\n            transition: transform $transition-time-fast;\n          }\n\n          .prospect {\n            padding: 0 1em;\n            height: 2em;\n            line-height: 2em;\n            @include text-overflow;\n            background-color: $module-bg-opaque;\n            background-position: top right;\n            transform: translate3d(-$offset, $offset, 0);\n            transition: transform $transition-time-fast;\n\n            .text {\n              letter-spacing: 0.3px;\n              font-weight: bold;\n              color: $text;\n              background-clip: text;\n              -webkit-background-clip: text;\n              -webkit-text-fill-color: transparent;\n            }\n          }\n\n          &:hover {\n            opacity: 1;\n            .background {\n              transform: translate3d(0, 0, 0);\n            }\n            .prospect {\n              transform: translate3d(0, 0, 0);\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","/**\n * @file GTag constant\n * @module constant.gtag\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport enum GAEventCategories {\n  Comment = 'comment',\n  Share = 'share',\n  Widget = 'widget',\n  Universal = 'global',\n  Article = 'page_article',\n  Index = 'page_index',\n  App = 'page_app',\n  About = 'page_about',\n  Lens = 'page_lens'\n}\n","/**\n * @file Social media\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport type { InstagramMediaItem } from '/@/server/getters/instagram'\nimport { ProxyModule } from '/@/constants/proxy'\nimport { getProxyURL } from '/@/transforms/url'\n\nexport const isVideoMediaIns = (media: InstagramMediaItem) => {\n  return media.media_type === 'VIDEO'\n}\n\nexport const isAlbumMediaIns = (media: InstagramMediaItem) => {\n  return media.media_type === 'CAROUSEL_ALBUM'\n}\n\n// https://www.instagram.com/p/['IMAGE-CODE']/?__a=1\n// https://www.surinderbhomra.com/Blog/2016/05/16/Resize-An-Instagram-Image-Using-A-Media-Query-Parameter\nexport const getInstagramImage = (media: InstagramMediaItem, size?: 't' | 'm' | 'l') => {\n  // video type media\n  if (isVideoMediaIns(media)) {\n    return getProxyURL(media.thumbnail_url!, ProxyModule.Instagram)\n  }\n  // image type media with size\n  if (size) {\n    return getProxyURL(`${media.permalink}media/?size=${size}`, ProxyModule.Instagram)\n  }\n  // image type media without size\n  return getProxyURL(media.media_url, ProxyModule.Instagram)\n}\n\nexport const getYouTubePlaylistURL = (id: string) => {\n  return `https://www.youtube.com/playlist?list=${id}`\n}\n\nexport const getYouTubeVideoURL = (id: string) => {\n  return `https://www.youtube.com/playlist?list=${id}`\n}\n\nexport const getYouTubeVideoEmbedURL = (id: string, list?: string) => {\n  const listParam = list ? `?list=${list}` : ''\n  return `https://www.youtube.com/embed/${id}${listParam}`\n}\n\nexport const getTwitterTweetDetailURL = (username: string, id: string) => {\n  return `https://twitter.com/${username}/status/${id}`\n}\n\nexport const get163MusicSongDetailURL = (songId: string | number) => {\n  return `https://music.163.com/#/song?id=${songId}`\n}\n","<script lang=\"ts\" setup>\n  import { ref, shallowRef } from 'vue'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { LanguageKey } from '/@/language'\n  import { useEnhancer } from '/@/app/enhancer'\n  import SwiperClass, { Swiper, SwiperSlide } from '/@/effects/swiper'\n  import { getTwitterTweetDetailURL } from '/@/transforms/media'\n  import { unescape, padStart, numberSplit } from '/@/transforms/text'\n  import type { TwitterAggregate } from '/@/server/getters/twitter'\n\n  defineProps<{\n    aggregate: TwitterAggregate | null\n    fetching: boolean\n  }>()\n\n  const { gtag } = useEnhancer()\n  const swiperRef = shallowRef<SwiperClass>()\n  const prevSlide = () => swiperRef.value?.slidePrev()\n  const nextSlide = () => swiperRef.value?.slideNext()\n  const handleSwiperReady = (_swiper: SwiperClass) => {\n    swiperRef.value = _swiper\n  }\n  const activeIndex = ref(0)\n  const handleSwiperTransitionStart = () => {\n    activeIndex.value = swiperRef.value?.activeIndex || 0\n  }\n\n  const handleGtagEvent = (name: string) => {\n    gtag?.event(name, {\n      event_category: GAEventCategories.Index\n    })\n  }\n</script>\n\n<template>\n  <div class=\"twitter\">\n    <placeholder :data=\"!!aggregate?.tweets.length\" :loading=\"fetching\">\n      <template #placeholder>\n        <div class=\"twitter-empty\" key=\"empty\">\n          <empty class=\"empty-content\">\n            <i18n :k=\"LanguageKey.EMPTY_PLACEHOLDER\" />\n          </empty>\n        </div>\n      </template>\n      <template #loading>\n        <div class=\"twitter-skeleton\" key=\"skeleton\">\n          <div class=\"left\"><skeleton-line /></div>\n          <div class=\"right\"><skeleton-line /></div>\n        </div>\n      </template>\n      <template #default>\n        <div class=\"twitter-content\" key=\"content\">\n          <div class=\"userinfo\" v-if=\"aggregate?.userinfo\" :title=\"aggregate.userinfo.name\">\n            <ulink class=\"link\" :href=\"VALUABLE_LINKS.TWITTER\" @mousedown=\"handleGtagEvent('twitter_homepage')\">\n              <uimage class=\"avatar\" proxy :src=\"aggregate.userinfo.avatar\" />\n              <span class=\"logo\"><i class=\"iconfont icon-twitter\" /></span>\n            </ulink>\n            <div class=\"count\">\n              <p class=\"title\">\n                <template v-if=\"aggregate.userinfo.tweetCount\">\n                  {{ padStart(numberSplit(aggregate.userinfo.tweetCount), 3, '0') }}\n                </template>\n                <template v-else>\n                  <i18n en=\"Latest\" zh=\"\" />\n                </template>\n              </p>\n              <p class=\"secondary\">\n                <i18n en=\"tweets\" :zh=\"aggregate.userinfo.tweetCount ? '' : ''\" />\n              </p>\n            </div>\n          </div>\n          <swiper\n            v-if=\"aggregate?.tweets.length\"\n            class=\"tweets\"\n            direction=\"vertical\"\n            :height=\"66\"\n            :mousewheel=\"true\"\n            :allow-touch-move=\"false\"\n            :slides-per-view=\"1\"\n            :prevent-clicks=\"false\"\n            :autoplay=\"{ delay: 3500, disableOnInteraction: false }\"\n            @transition-start=\"handleSwiperTransitionStart\"\n            @swiper=\"handleSwiperReady\"\n          >\n            <swiper-slide class=\"tweet-item\" :key=\"index\" v-for=\"(tweet, index) in aggregate.tweets\">\n              <div class=\"content\" :title=\"tweet.text\">\n                <div\n                  v-if=\"tweet.html\"\n                  v-html=\"unescape(tweet.html)\"\n                  :class=\"['main', { 'has-media': tweet.mediaCount }]\"\n                ></div>\n                <ulink\n                  v-if=\"tweet.mediaCount\"\n                  :class=\"['medias', { empty: !tweet.text }]\"\n                  :href=\"getTwitterTweetDetailURL(tweet.owner, tweet.id)\"\n                  @mousedown=\"handleGtagEvent('twitter_image_link')\"\n                >\n                  <template v-if=\"tweet.hasVideo\">\n                    <i class=\"iconfont media icon-video\"></i>\n                  </template>\n                  <template v-else-if=\"tweet.hasImage\">\n                    <i class=\"iconfont media icon-image\"></i>\n                  </template>\n                  <span class=\"count\">[{{ tweet.mediaCount }}]</span>\n                  <i class=\"iconfont window icon-new-window-s\"></i>\n                </ulink>\n              </div>\n              <div class=\"meta\">\n                <ulink\n                  class=\"item link\"\n                  title=\"To Tweet\"\n                  :href=\"getTwitterTweetDetailURL(tweet.owner, tweet.id)\"\n                  @mousedown=\"handleGtagEvent('twitter_detail_link')\"\n                >\n                  <i class=\"iconfont icon-retweet\" v-if=\"tweet.isQuote || tweet.isRetweet\"></i>\n                  <i class=\"iconfont icon-follow-up\" v-else-if=\"tweet.isReply\"></i>\n                  <i class=\"iconfont twitter icon-twitter\" v-else></i>\n                  <span>Tweet</span>\n                  <i class=\"iconfont window icon-new-window-s\"></i>\n                </ulink>\n                <span class=\"item reply\" v-if=\"tweet.commentCount\">\n                  <i class=\"iconfont icon-comment\"></i>\n                  <span>{{ tweet.commentCount }}</span>\n                </span>\n                <span class=\"item like\" v-if=\"Number.isInteger(tweet.favoriteCount)\">\n                  <i class=\"iconfont icon-heart\"></i>\n                  <span>{{ tweet.favoriteCount }}</span>\n                </span>\n                <span class=\"item date\" v-if=\"tweet.date\">\n                  <i class=\"iconfont icon-clock\"></i>\n                  <udate to=\"ago\" :date=\"tweet.date\" />\n                </span>\n                <span class=\"item location\" :title=\"tweet.location\" v-if=\"tweet.location\">\n                  <i class=\"iconfont icon-location\"></i>\n                  <span>{{ tweet.location }}</span>\n                </span>\n              </div>\n            </swiper-slide>\n          </swiper>\n          <div class=\"navigation\">\n            <button class=\"button prev\" :disabled=\"activeIndex === 0\" @click=\"prevSlide\">\n              <i class=\"iconfont icon-totop\" />\n            </button>\n            <button\n              class=\"button next\"\n              :disabled=\"!!aggregate && activeIndex === aggregate?.tweets.length - 1\"\n              @click=\"nextSlide\"\n            >\n              <i class=\"iconfont icon-tobottom\" />\n            </button>\n          </div>\n        </div>\n      </template>\n    </placeholder>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @use 'sass:math';\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  $twitter-height: 66px;\n  $content-height: 42px;\n\n  .twitter-empty,\n  .twitter-skeleton,\n  .twitter-content {\n    width: 100%;\n    height: $twitter-height;\n    display: flex;\n  }\n\n  .twitter-empty {\n    @include common-bg-module();\n    @include radius-box($sm-radius);\n    .empty-content {\n      min-height: auto;\n      font-weight: bold;\n    }\n  }\n\n  .twitter-skeleton {\n    padding: $gap;\n    background-color: $module-bg;\n    @include radius-box($sm-radius);\n\n    .left {\n      width: 140px;\n      margin-right: $lg-gap;\n    }\n    .right {\n      flex: 1;\n    }\n  }\n\n  .twitter-content {\n    .userinfo,\n    .tweets {\n      @include common-bg-module();\n    }\n\n    .userinfo {\n      width: auto;\n      height: 100%;\n      padding: 0 $gap;\n      margin-right: $sm-gap;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      @include radius-box($sm-radius);\n      border-top-right-radius: $mini-radius;\n      border-bottom-right-radius: $mini-radius;\n\n      .link {\n        position: relative;\n        background-color: $twitter-primary;\n        color: $white;\n        opacity: 0.9;\n        @include radius-box($xs-radius);\n        @include visibility-transition();\n        &:hover {\n          opacity: 1;\n        }\n\n        .avatar {\n          width: $content-height;\n          height: $content-height;\n        }\n\n        .logo {\n          position: absolute;\n          width: 50%;\n          height: 50%;\n          bottom: 0;\n          right: 0;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          border-top-left-radius: $xs-radius;\n          background-color: rgba($twitter-primary, 0.9);\n        }\n      }\n\n      .count {\n        min-width: 4rem;\n        margin-left: 1.5rem;\n        position: relative;\n        display: inline-flex;\n        flex-direction: column;\n        justify-content: space-around;\n        height: $content-height;\n        padding: 0.2em 0.5em 0.26em;\n        border-radius: $xs-radius;\n        background-color: $module-bg-darker-1;\n        &::before {\n          $size: 5px;\n          content: '';\n          position: absolute;\n          left: -$size * 2;\n          top: 20%;\n          width: 0;\n          height: 0;\n          border-top: $size solid transparent;\n          border-right: $size * 2 solid $module-bg-darker-1;\n          border-bottom: $size solid transparent;\n        }\n\n        .title {\n          margin: 0;\n          font-size: $font-size-small + 1;\n          font-weight: bold;\n          color: $text-secondary;\n        }\n\n        .secondary {\n          margin: 0;\n          color: $text-disabled;\n          font-size: $font-size-root;\n        }\n      }\n    }\n\n    .tweets {\n      flex: 1;\n      height: $twitter-height;\n      @include radius-box($mini-radius);\n\n      ::v-deep(.swiper-wrapper) {\n        flex-direction: column;\n        &[style*='300ms'] {\n          .swiper-slide-active {\n            @include motion-blur-filter('vertical-small');\n          }\n        }\n      }\n\n      .tweet-item {\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        box-sizing: border-box;\n        width: 100%;\n        height: $twitter-height;\n        padding: 0 $lg-gap;\n\n        .content {\n          display: flex;\n          height: 20px;\n          line-height: 20px;\n          margin-bottom: 6px;\n          $content-gap: 0.3em;\n\n          .main {\n            font-weight: bold;\n            max-width: 100%;\n            @include text-overflow();\n            &.has-media {\n              max-width: #{calc(100% - 40px)};\n            }\n\n            & + .medias {\n              margin-left: $content-gap;\n            }\n\n            ::v-deep(p) {\n              margin: 0;\n              max-width: 100%;\n              @include text-overflow();\n            }\n            ::v-deep(img),\n            ::v-deep(video) {\n              display: none;\n            }\n            ::v-deep(.link) {\n              font-weight: normal;\n              font-size: $font-size-base - 1;\n              color: $text-secondary;\n              @include color-transition();\n              &:hover {\n                color: $link-color;\n                text-decoration: underline;\n              }\n\n              & + .link {\n                margin-left: $content-gap;\n              }\n            }\n          }\n\n          .medias {\n            position: relative;\n            color: $text-secondary;\n            &.empty {\n              color: $text;\n            }\n            &:hover {\n              &,\n              .iconfont {\n                color: $link-color !important;\n              }\n            }\n\n            .iconfont {\n              vertical-align: top;\n              @include color-transition();\n\n              &.media {\n                font-size: $font-size-base + 1;\n              }\n\n              &.window {\n                color: $text-disabled;\n                position: absolute;\n                top: -0.6em;\n                right: -1.2em;\n                font-size: 8px;\n              }\n            }\n\n            .count {\n              margin-left: $xs-gap;\n              vertical-align: top;\n              font-size: $font-size-small;\n              @include color-transition();\n            }\n          }\n        }\n\n        .meta {\n          display: flex;\n          align-items: center;\n          width: 100%;\n          overflow: hidden;\n\n          .item {\n            display: inline-block;\n            margin-right: $lg-gap;\n            font-size: $font-size-small;\n            color: $text-divider;\n            @include color-transition();\n            .iconfont {\n              margin-right: $xs-gap;\n              font-size: $font-size-small - 1;\n            }\n\n            &.link {\n              .window {\n                margin-right: 0;\n                margin-left: 2px;\n                font-size: 10px;\n              }\n\n              &:hover {\n                color: $text;\n              }\n            }\n\n            &.location {\n              flex: 1;\n              margin-right: 0;\n              @include text-overflow();\n            }\n          }\n        }\n      }\n    }\n\n    .navigation {\n      width: 3rem;\n      height: 100%;\n      margin-left: $sm-gap;\n      display: flex;\n      flex-direction: column;\n      justify-content: space-between;\n\n      .button {\n        flex: 1;\n        font-size: $font-size-small;\n        text-align: center;\n        color: $text-disabled;\n        @include color-transition();\n        @include common-bg-module();\n        @include radius-box($mini-radius);\n\n        &:not([disabled]):hover {\n          color: $link-color;\n        }\n        &[disabled] {\n          opacity: 0.8;\n          color: $text-divider;\n          cursor: no-drop;\n        }\n\n        &.prev {\n          margin-bottom: $sm-gap;\n          border-top-right-radius: $sm-radius;\n        }\n\n        &.next {\n          border-bottom-right-radius: $sm-radius;\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { useStores } from '/@/stores'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useUniversalFetch, onClient } from '/@/universal'\n  import { scrollToNextScreen } from '/@/utils/scroller'\n  import { LanguageKey } from '/@/language'\n  import { META } from '/@/config/app.config'\n  import ArticleList from '/@/components/flow/desktop/list.vue'\n  import Carrousel from './carrousel.vue'\n  import Twitter from './twitter.vue'\n\n  const { seo, i18n: _i18n } = useEnhancer()\n  const { appOption, articleList: articleListStore, twitter: twitterStore } = useStores()\n\n  seo(() => ({\n    title: `${META.title} - ${_i18n.t(LanguageKey.APP_SLOGAN)}`,\n    description: appOption.data?.description,\n    keywords: appOption.data?.keywords.join(',')\n  }))\n\n  const loadmoreArticles = async () => {\n    const targetPage = articleListStore.pagination!.current_page + 1\n    await articleListStore.fetch({ page: targetPage })\n    if (targetPage > 1) {\n      onClient(scrollToNextScreen)\n    }\n  }\n\n  useUniversalFetch(() => {\n    return Promise.all([articleListStore.fetch(), twitterStore.fetch().catch(() => {})])\n  })\n</script>\n\n<template>\n  <div class=\"index-page\">\n    <carrousel class=\"carrousel\" :articles=\"articleListStore.data\" :fetching=\"articleListStore.fetching\" />\n    <twitter\n      class=\"twitter\"\n      :aggregate=\"twitterStore.data\"\n      :fetching=\"twitterStore.fetching || articleListStore.fetching\"\n    />\n    <article-list\n      :mammon=\"false\"\n      :fetching=\"articleListStore.fetching\"\n      :articles=\"articleListStore.data\"\n      :pagination=\"articleListStore.pagination\"\n      @loadmore=\"loadmoreArticles\"\n    />\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .index-page {\n    .carrousel,\n    .twitter {\n      margin-bottom: $lg-gap;\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { computed, watch, onBeforeMount } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useUniversalFetch } from '/@/universal'\n  import { useStores } from '/@/stores'\n  import { getExtendValue } from '/@/transforms/state'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { scrollToNextScreen } from '/@/utils/scroller'\n  import ArticleListHeader from '/@/components/flow/desktop/header.vue'\n  import ArticleList from '/@/components/flow/desktop/list.vue'\n\n  const props = defineProps<{\n    categorySlug: string\n  }>()\n\n  const { i18n: _i18n, seo, isZhLang } = useEnhancer()\n  const { articleList: articleListStore, category: categoryStore } = useStores()\n  const currentCategory = computed(() => {\n    return categoryStore.data.find((category) => category.slug === props.categorySlug)\n  })\n  const currentCategoryIcon = computed(() => {\n    return getExtendValue(currentCategory.value?.extends || [], 'icon') || 'icon-category'\n  })\n  const currentCategoryImage = computed(() => {\n    return getExtendValue(currentCategory.value?.extends || [], 'background')\n  })\n  const currentCategoryColor = computed(() => {\n    return getExtendValue(currentCategory.value?.extends || [], 'bgcolor')\n  })\n\n  const loadmoreArticles = async () => {\n    await articleListStore.fetch({\n      category_slug: props.categorySlug,\n      page: articleListStore.pagination!.current_page + 1\n    })\n    scrollToNextScreen()\n  }\n\n  seo(() => {\n    const enTitle = firstUpperCase(props.categorySlug)\n    const zhTitle = _i18n.t(props.categorySlug)!\n    const titles = isZhLang.value ? [zhTitle, enTitle] : [enTitle]\n    const description = currentCategory.value?.description || titles.join(',')\n    return {\n      pageTitle: titles.join(' | '),\n      description,\n      ogType: 'website'\n    }\n  })\n\n  onBeforeMount(() => {\n    watch(\n      () => props.categorySlug,\n      (category_slug) => articleListStore.fetch({ category_slug }),\n      { flush: 'post' }\n    )\n  })\n\n  useUniversalFetch(() => {\n    return articleListStore.fetch({ category_slug: props.categorySlug })\n  })\n</script>\n\n<template>\n  <div class=\"category-flow-page\">\n    <article-list-header\n      :background-color=\"currentCategoryColor\"\n      :background-image=\"currentCategoryImage\"\n      :icon=\"currentCategoryIcon\"\n    >\n      <i18n v-if=\"currentCategory\">\n        <template #zh>\n          <span>{{ currentCategory.name }}</span>\n          <divider class=\"divider\" type=\"vertical\" />\n          <span>{{ currentCategory.description || '...' }}</span>\n        </template>\n        <template #en>\n          <span>Category</span>\n          <divider class=\"divider\" type=\"vertical\" />\n          <span>{{ firstUpperCase(currentCategory.slug) }}</span>\n        </template>\n      </i18n>\n    </article-list-header>\n    <article-list\n      :fetching=\"articleListStore.fetching\"\n      :articles=\"articleListStore.data\"\n      :pagination=\"articleListStore.pagination\"\n      @loadmore=\"loadmoreArticles\"\n    />\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .category-flow-page {\n    .divider {\n      border-color: $white !important;\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { computed, watch, onBeforeMount } from 'vue'\n  import { useUniversalFetch } from '/@/universal'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useArticleListStore } from '/@/stores/article'\n  import { useTagStore, getTagEnName } from '/@/stores/tag'\n  import { getExtendValue } from '/@/transforms/state'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { scrollToNextScreen } from '/@/utils/scroller'\n  import ArticleListHeader from '/@/components/flow/desktop/header.vue'\n  import ArticleList from '/@/components/flow/desktop/list.vue'\n\n  const props = defineProps<{\n    tagSlug: string\n  }>()\n\n  const { seo, isZhLang } = useEnhancer()\n  const articleListStore = useArticleListStore()\n  const tagStore = useTagStore()\n  const currentTag = computed(() => tagStore.data.find((tag) => tag.slug === props.tagSlug))\n  const currentTagIcon = computed(() => getExtendValue(currentTag.value?.extends || [], 'icon') || 'icon-tag')\n  const currentTagImage = computed(() => getExtendValue(currentTag.value?.extends || [], 'background'))\n  const currentTagColor = computed(() => getExtendValue(currentTag.value?.extends || [], 'bgcolor'))\n\n  const loadmoreArticles = async () => {\n    await articleListStore.fetch({\n      tag_slug: props.tagSlug,\n      page: articleListStore.pagination!.current_page + 1\n    })\n    scrollToNextScreen()\n  }\n\n  seo(() => {\n    const enTitle = firstUpperCase(props.tagSlug)\n    const zhTitle = currentTag.value?.name!\n    const titles = isZhLang.value ? [zhTitle, enTitle] : [enTitle, 'Tag']\n    const description = currentTag.value?.description || titles.join(',')\n    return {\n      pageTitle: titles.join(' | '),\n      description\n    }\n  })\n\n  onBeforeMount(() => {\n    watch(\n      () => props.tagSlug,\n      (tag_slug) => articleListStore.fetch({ tag_slug }),\n      { flush: 'post' }\n    )\n  })\n\n  useUniversalFetch(() => {\n    return articleListStore.fetch({ tag_slug: props.tagSlug })\n  })\n</script>\n\n<template>\n  <div class=\"tag-flow-page\">\n    <article-list-header\n      :background-color=\"currentTagColor\"\n      :background-image=\"currentTagImage\"\n      :icon=\"currentTagIcon\"\n    >\n      <template v-if=\"currentTag\">\n        <span class=\"header\">\n          <i18n>\n            <template #zh>\n              <span>#{{ currentTag.name }}</span>\n              <divider class=\"divider\" type=\"vertical\" />\n              <span>{{ currentTag.description || '...' }}</span>\n            </template>\n            <template #en>\n              <span>Tag</span>\n              <divider class=\"divider\" type=\"vertical\" />\n              <span>#{{ getTagEnName(currentTag) }}</span>\n            </template>\n          </i18n>\n        </span>\n      </template>\n    </article-list-header>\n    <article-list\n      :fetching=\"articleListStore.fetching\"\n      :articles=\"articleListStore.data\"\n      :pagination=\"articleListStore.pagination\"\n      @loadmore=\"loadmoreArticles\"\n    />\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .tag-flow-page {\n    .divider {\n      border-color: $white !important;\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { watch, onBeforeMount } from 'vue'\n  import { useUniversalFetch } from '/@/universal'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useStores } from '/@/stores'\n  import { scrollToNextScreen } from '/@/utils/scroller'\n  import ArticleListHeader from '/@/components/flow/desktop/header.vue'\n  import ArticleList from '/@/components/flow/desktop/list.vue'\n\n  const props = defineProps<{\n    date: string\n  }>()\n\n  const { seo } = useEnhancer()\n  const { articleList: articleListStore } = useStores()\n\n  const loadmoreArticles = async () => {\n    await articleListStore.fetch({\n      date: props.date,\n      page: articleListStore.pagination!.current_page + 1\n    })\n    scrollToNextScreen()\n  }\n\n  seo(() => ({\n    pageTitle: `${props.date} | Date`,\n    ogType: 'website'\n  }))\n\n  onBeforeMount(() => {\n    watch(\n      () => props.date,\n      (date) => articleListStore.fetch({ date }),\n      { flush: 'post' }\n    )\n  })\n\n  useUniversalFetch(() => {\n    return articleListStore.fetch({ date: props.date })\n  })\n</script>\n\n<template>\n  <div class=\"date-flow-page\">\n    <article-list-header icon=\"icon-clock\">\n      <i18n :zh=\"` ${date} `\" :en=\"`Articles published at ${date}`\" />\n    </article-list-header>\n    <article-list\n      :fetching=\"articleListStore.fetching\"\n      :articles=\"articleListStore.data\"\n      :pagination=\"articleListStore.pagination\"\n      @loadmore=\"loadmoreArticles\"\n    />\n  </div>\n</template>\n","<script lang=\"ts\" setup>\n  import { watch, onBeforeMount } from 'vue'\n  import { useUniversalFetch } from '/@/universal'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useArticleListStore } from '/@/stores/article'\n  import { scrollToNextScreen } from '/@/utils/scroller'\n  import ArticleListHeader from '/@/components/flow/desktop/header.vue'\n  import ArticleList from '/@/components/flow/desktop/list.vue'\n\n  const props = defineProps<{ keyword: string }>()\n\n  const { seo } = useEnhancer()\n  const articleListStore = useArticleListStore()\n  const loadmoreArticles = async () => {\n    await articleListStore.fetch({\n      keyword: props.keyword,\n      page: articleListStore.pagination!.current_page + 1\n    })\n    scrollToNextScreen()\n  }\n\n  seo(() => ({\n    pageTitle: `${props.keyword} | Search`,\n    ogType: 'website'\n  }))\n\n  onBeforeMount(() => {\n    watch(\n      () => props.keyword,\n      (keyword) => articleListStore.fetch({ keyword }),\n      { flush: 'post' }\n    )\n  })\n\n  useUniversalFetch(() => {\n    return articleListStore.fetch({ keyword: props.keyword })\n  })\n</script>\n\n<template>\n  <div class=\"search-flow-page\">\n    <article-list-header icon=\"icon-search\">\n      <i18n :zh=\"` ${keyword} `\" :en=\"`Keyword &quot;${keyword}&quot;\\'s result`\" />\n    </article-list-header>\n    <article-list\n      :fetching=\"articleListStore.fetching\"\n      :articles=\"articleListStore.data\"\n      :pagination=\"articleListStore.pagination\"\n      @loadmore=\"loadmoreArticles\"\n    />\n  </div>\n</template>\n","<script lang=\"ts\" setup>\n  import { getCDN_URL } from '/@/transforms/url'\n  import { useEnhancer } from '/@/app/enhancer'\n\n  interface Props {\n    image: string\n    position?: number\n    blur?: number\n    isMobile?: boolean\n  }\n\n  const props = withDefaults(defineProps<Props>(), {\n    position: 20,\n    blur: 0,\n    isMobile: false\n  })\n\n  const { isDarkTheme } = useEnhancer()\n</script>\n\n<template>\n  <div class=\"banner\" :class=\"{ mobile: isMobile }\">\n    <div\n      class=\"background\"\n      :class=\"{ dark: isDarkTheme }\"\n      :style=\"{ backgroundImage: `url(${getCDN_URL(props.image)})`, backgroundPositionY: `${position}%` }\"\n    ></div>\n    <div class=\"content\" :class=\"{ blur: Boolean(blur) }\" :style=\"{ '--blur': `${blur}px` }\">\n      <h2 class=\"title\">\n        <slot name=\"title\"></slot>\n      </h2>\n      <div class=\"description\">\n        <slot name=\"description\"></slot>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .banner {\n    position: relative;\n    height: $full-column-page-banner-height;\n    z-index: $z-index-normal;\n\n    .background {\n      position: absolute;\n      z-index: $z-index-underground;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background-color: $module-bg-darker-1;\n      background-size: cover;\n      background-position-x: center;\n      &.dark {\n        filter: brightness(0.8);\n      }\n    }\n\n    .content {\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      text-align: center;\n      color: $white;\n      &.blur {\n        @include backdrop-blur(var(--blur));\n      }\n\n      .title {\n        font-size: 3em;\n        margin-top: 0;\n        margin-bottom: $lg-gap * 2;\n      }\n\n      .description {\n        font-size: $font-size-h4;\n        font-weight: bold;\n      }\n    }\n\n    &.mobile {\n      height: $mobile-banner-height;\n      margin-top: -$lg-gap;\n      margin-left: -$gap;\n      margin-right: -$gap;\n\n      .title {\n        font-size: 2em;\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { useEnhancer } from '/@/app/enhancer'\n  import { Language } from '/@/language'\n  import { numberToChinese } from '/@/transforms/text'\n  import { I18nLanguageMap } from '/@/composables/i18n'\n  import { ArchiveTreeList } from '/@/stores/archive'\n\n  const props = defineProps<{\n    tree: ArchiveTreeList\n  }>()\n\n  const { isZhLang } = useEnhancer()\n\n  const ms = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']\n  const monthNameI18ns: Array<I18nLanguageMap<Language>> = ms.map((month, index) => ({\n    [Language.English]: month,\n    [Language.Chinese]:\n      index === 9 ? '' : index == 10 ? '' : index == 11 ? '' : numberToChinese(index + 1) + ''\n  }))\n\n  const getMonthNameI18n = (number: number) => {\n    return monthNameI18ns[number - 1]\n  }\n</script>\n\n<template>\n  <div class=\"archive-tree\">\n    <ul class=\"month-list\" v-for=\"node in props.tree\" :key=\"node.year\">\n      <li v-for=\"mn in node.months\" :key=\"mn.month\" class=\"month\">\n        <slot\n          name=\"title\"\n          :title=\"\n            !isZhLang\n              ? `${node.year} #${getMonthNameI18n(mn.month).en} (${mn.articles.length})`\n              : `${numberToChinese(node.year)} #${getMonthNameI18n(mn.month).zh}${mn.articles.length}`\n          \"\n        >\n        </slot>\n        <ul class=\"article-list\">\n          <li v-for=\"(article, index) in mn.articles\" :key=\"index\" class=\"article\">\n            <slot\n              name=\"article\"\n              :index=\"index\"\n              :article=\"article\"\n              :day=\"String(article.createAt.day).padStart(2, '0')\"\n            ></slot>\n          </li>\n        </ul>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .archive-tree {\n    .month-list,\n    .article-list {\n      list-style: none;\n      margin: 0;\n      padding: 0;\n    }\n\n    .article-list {\n    }\n  }\n</style>\n","import { computed } from 'vue'\nimport { useEnhancer } from '/@/app/enhancer'\nimport { useNodepressStatisticStore } from '/@/stores/statistic'\nimport { numberSplit, firstUpperCase } from '/@/transforms/text'\nimport { Language, LanguageKey } from '/@/language'\nimport { META } from '/@/config/app.config'\n\nexport const i18ns = {\n  title: {\n    [Language.Chinese]: '',\n    [Language.English]: 'Hope is a good thing'\n  },\n  description: {\n    [Language.Chinese]: '',\n    [Language.English]: 'Maybe the best of things and no good thing ever dies'\n  }\n} as const\n\nexport const useArchivePageMeta = () => {\n  const { i18n, seo, isZhLang } = useEnhancer()\n  seo(() => {\n    const enTitle = firstUpperCase(i18n.t(LanguageKey.PAGE_ARCHIVE, Language.English)!)\n    const titles = isZhLang.value ? [i18n.t(LanguageKey.PAGE_ARCHIVE), enTitle] : [enTitle]\n    return {\n      pageTitle: titles.join(' | '),\n      description: `${META.title} `\n    }\n  })\n}\n\nexport const useArchivePageStatistics = () => {\n  const { i18n } = useEnhancer()\n  const store = useNodepressStatisticStore()\n  const statistics = computed(() => ({\n    tags: {\n      icon: 'icon-quill',\n      title: i18n.t(LanguageKey.STATISTIC_TAGS)!,\n      content: numberSplit(store.data?.tags || 0)\n    },\n    articles: {\n      icon: 'icon-quill',\n      title: i18n.t(LanguageKey.STATISTIC_ARTICLES)!,\n      content: numberSplit(store.data?.articles || 0)\n    },\n    comments: {\n      icon: 'icon-comment',\n      title: i18n.t(LanguageKey.STATISTIC_COMMENTS)!,\n      content: numberSplit(store.data?.comments || 0)\n    },\n    todayViews: {\n      icon: 'icon-eye',\n      title: i18n.t(LanguageKey.STATISTIC_TODAY_VIEWS)!,\n      content: numberSplit(store.data?.todayViews || 0)\n    },\n    totalViews: {\n      icon: 'icon-like',\n      title: i18n.t(LanguageKey.STATISTIC_TOTAL_VIEWS)!,\n      content: numberSplit(store.data?.totalViews || 0)\n    },\n    totalLikes: {\n      icon: 'icon-like',\n      title: i18n.t(LanguageKey.STATISTIC_TOTAL_UPVOTES)!,\n      content: numberSplit(store.data?.totalLikes || 0)\n    },\n    averageEmotion: {\n      icon: 'icon-emoji',\n      title: i18n.t(LanguageKey.STATISTIC_AVERAGE_EMOTION)!,\n      content: String(store.data?.averageEmotion ?? '-')\n    }\n  }))\n\n  return {\n    statistics,\n    fetch: store.fetch\n  }\n}\n","<script lang=\"ts\" setup>\n  import { ref, computed, onMounted } from 'vue'\n  import { useUniversalFetch } from '/@/universal'\n  import { useArchiveStore } from '/@/stores/archive'\n  import { LanguageKey } from '/@/language'\n  import { numberSplit } from '/@/transforms/text'\n  import { getArticleDetailRoute } from '/@/transforms/route'\n  import PageBanner from '/@/components/common/banner.vue'\n  import ArchiveTree from './tree.vue'\n  import { i18ns, useArchivePageMeta, useArchivePageStatistics } from './shared'\n\n  const archiveStore = useArchiveStore()\n  const statisticState = useArchivePageStatistics()\n  const statisticFetching = ref(true)\n  const statistics = computed(() => [\n    statisticState.statistics.value.articles,\n    statisticState.statistics.value.todayViews,\n    statisticState.statistics.value.comments,\n    statisticState.statistics.value.totalLikes,\n    statisticState.statistics.value.averageEmotion\n  ])\n\n  useArchivePageMeta()\n  useUniversalFetch(() => archiveStore.fetch())\n  onMounted(() => {\n    statisticState.fetch().finally(() => {\n      statisticFetching.value = false\n    })\n  })\n</script>\n\n<template>\n  <div class=\"archive-page\">\n    <page-banner :position=\"32\" image=\"/images/page-archive/banner.jpg\">\n      <template #title>\n        <webfont><i18n v-bind=\"i18ns.title\" /></webfont>\n      </template>\n      <template #description>\n        <i18n v-bind=\"i18ns.description\" />\n      </template>\n    </page-banner>\n    <container class=\"statistic-warpper\">\n      <transition name=\"module\" mode=\"out-in\">\n        <div class=\"skeletons\" v-if=\"statisticFetching\">\n          <skeleton-base class=\"item\" :key=\"s\" v-for=\"s in statistics.length\" />\n        </div>\n        <div class=\"statistics\" v-else>\n          <div class=\"item\" :key=\"index\" v-for=\"(s, index) in statistics\">\n            <p class=\"title\">\n              <span class=\"text\">{{ s.title }}</span>\n              <i class=\"iconfont\" :class=\"s.icon\"></i>\n            </p>\n            <div class=\"content\">{{ s.content }}</div>\n          </div>\n        </div>\n      </transition>\n    </container>\n    <container class=\"archive-warpper\">\n      <placeholder :data=\"archiveStore.data?.articles.length\" :loading=\"archiveStore.fetching\">\n        <template #placeholder>\n          <empty class=\"archive-empty\" key=\"empty\">\n            <i18n :k=\"LanguageKey.ARTICLE_PLACEHOLDER\" />\n          </empty>\n        </template>\n        <template #loading>\n          <ul class=\"archive-skeleton\" key=\"skeleton\">\n            <li v-for=\"item in 3\" :key=\"item\" class=\"item\">\n              <skeleton-line v-for=\"i in 3\" :key=\"i\" class=\"line\" />\n            </li>\n          </ul>\n        </template>\n        <template #default>\n          <archive-tree class=\"archive-content\" :tree=\"archiveStore.tree\" key=\"content\">\n            <template #title=\"{ title }\">\n              <h1 class=\"archive-title\">{{ title }}</h1>\n            </template>\n            <template #article=\"{ article, day }\">\n              <div class=\"archive-article\">\n                <div class=\"left\">\n                  <h3 class=\"title\">\n                    <span class=\"date\">D{{ day }}</span>\n                    <a\n                      class=\"link\"\n                      target=\"_blank\"\n                      :title=\"article.title\"\n                      :href=\"getArticleDetailRoute(article.id)\"\n                    >\n                      {{ article.title }}\n                    </a>\n                  </h3>\n                  <p class=\"description\" v-html=\"article.description\" />\n                </div>\n                <div class=\"metas\">\n                  <div class=\"item views\">\n                    <i class=\"iconfont icon-eye\"></i>\n                    <span class=\"text\">{{ numberSplit(article.meta.views) }}</span>\n                  </div>\n                  <divider type=\"vertical\" />\n                  <div class=\"item likes\">\n                    <i class=\"like-icon iconfont icon-like\"></i>\n                    <span class=\"text\">{{ article.meta.likes }}</span>\n                  </div>\n                  <divider type=\"vertical\" />\n                  <div class=\"item comments\">\n                    <i class=\"iconfont icon-comment\"></i>\n                    <span class=\"text\">{{ article.meta.comments }}</span>\n                  </div>\n                </div>\n              </div>\n            </template>\n          </archive-tree>\n        </template>\n      </placeholder>\n    </container>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .archive-page {\n    .statistic-warpper {\n      padding: 3rem 0;\n      background-color: $module-bg-translucent;\n\n      .skeletons,\n      .statistics {\n        display: flex;\n        justify-content: space-around;\n        align-items: center;\n      }\n\n      .skeletons {\n        .item {\n          width: 5em;\n          height: 2em;\n        }\n      }\n\n      .statistics {\n        .item {\n          display: inline-flex;\n          flex-direction: column;\n\n          .title {\n            display: flex;\n            align-items: center;\n            margin-bottom: 0;\n\n            .text {\n              text-transform: uppercase;\n              color: $text-secondary;\n            }\n\n            .iconfont {\n              margin-left: $sm-gap;\n              font-size: $font-size-h3;\n              color: $text-divider;\n              opacity: 0.5;\n            }\n          }\n\n          .content {\n            font-size: $font-size-h1 * 1.3;\n            font-weight: bold;\n          }\n        }\n      }\n    }\n\n    .archive-warpper {\n      padding: 3rem 0;\n      overflow: hidden;\n\n      .archive-empty {\n        min-height: 28rem;\n        font-weight: bold;\n      }\n\n      .archive-skeleton {\n        list-style: none;\n        margin: 0;\n        padding: 0;\n\n        .item {\n          width: 100%;\n          padding: 2rem;\n          margin-bottom: 3rem;\n          background-color: $module-bg-translucent;\n          @include radius-box($lg-radius);\n          &:last-child {\n            margin-bottom: 0;\n          }\n\n          .line {\n            height: 2rem;\n            margin-bottom: 2rem;\n            &:last-child {\n              margin-bottom: 0;\n            }\n          }\n        }\n      }\n\n      .archive-content {\n        margin-top: -1rem;\n\n        .archive-title {\n          margin: 2em 0;\n          text-align: center;\n          text-transform: uppercase;\n          letter-spacing: 0.2em;\n        }\n\n        .archive-article {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: $gap * 3;\n          padding-left: $gap * 4;\n          padding-right: $gap * 3;\n\n          .left {\n            .title {\n              margin: $gap 0;\n              .date {\n                display: inline-block;\n                width: 2rem;\n                margin-right: $gap;\n                color: $text-divider;\n                font-size: $font-size-h4;\n                font-weight: bold;\n              }\n\n              .link {\n                @include text-underline(0.4em);\n                text-decoration-color: $text-secondary;\n              }\n            }\n\n            .description {\n              margin-bottom: $gap;\n              padding-left: 3rem;\n            }\n          }\n\n          .metas {\n            margin-left: 2em;\n            display: inline-flex;\n            align-items: center;\n            font-size: $font-size-h4;\n            color: $text-disabled;\n\n            .item {\n              width: 4em;\n              text-align: center;\n              &.views {\n                width: 5em;\n              }\n\n              .iconfont {\n                margin-right: $sm-gap;\n              }\n              .text {\n                font-weight: bold;\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { ref, computed, onMounted } from 'vue'\n  import { useUniversalFetch } from '/@/universal'\n  import { useArchiveStore } from '/@/stores/archive'\n  import { LanguageKey } from '/@/language'\n  import { getArticleDetailRoute } from '/@/transforms/route'\n  import PageBanner from '/@/components/common/banner.vue'\n  import ArchiveTree from './tree.vue'\n  import { i18ns, useArchivePageMeta, useArchivePageStatistics } from './shared'\n\n  const archiveStore = useArchiveStore()\n  const statisticState = useArchivePageStatistics()\n  const statisticFetching = ref(true)\n  const statistics = computed(() => [\n    statisticState.statistics.value.articles,\n    statisticState.statistics.value.todayViews,\n    statisticState.statistics.value.comments,\n    statisticState.statistics.value.averageEmotion\n  ])\n\n  useArchivePageMeta()\n  useUniversalFetch(() => archiveStore.fetch())\n  onMounted(() => {\n    statisticState.fetch().finally(() => {\n      statisticFetching.value = false\n    })\n  })\n</script>\n\n<template>\n  <div class=\"archive-page\">\n    <page-banner :position=\"80\" :is-mobile=\"true\" image=\"/images/page-archive/banner-mobile.jpg\">\n      <template #title><i18n :k=\"LanguageKey.PAGE_ARCHIVE\" /></template>\n      <template #description><i18n v-bind=\"i18ns.title\" /></template>\n    </page-banner>\n    <div class=\"page-content\">\n      <container class=\"statistic-warpper\">\n        <transition name=\"module\" mode=\"out-in\">\n          <div class=\"skeletons\" v-if=\"statisticFetching\">\n            <skeleton-base class=\"skeleton\" :key=\"s\" v-for=\"s in statistics.length\" />\n          </div>\n          <div class=\"statistics\" v-else>\n            <div class=\"item\" :key=\"index\" v-for=\"(s, index) in statistics\">\n              <p class=\"title\">{{ s.title }}</p>\n              <div class=\"content\">{{ s.content }}</div>\n            </div>\n          </div>\n        </transition>\n      </container>\n      <container class=\"archive-warpper\">\n        <placeholder :data=\"archiveStore.data?.articles.length\" :loading=\"archiveStore.fetching\">\n          <template #placeholder>\n            <empty class=\"archive-empty\" key=\"empty\">\n              <i18n :k=\"LanguageKey.ARTICLE_PLACEHOLDER\" />\n            </empty>\n          </template>\n          <template #loading>\n            <div class=\"archive-skeleton\" key=\"skeleton\">\n              <skeleton-line class=\"item\" :key=\"s\" v-for=\"s in 6\" />\n            </div>\n          </template>\n          <template #default>\n            <archive-tree class=\"archive-content\" :tree=\"archiveStore.tree\" key=\"content\">\n              <template #title=\"{ title }\">\n                <h3 class=\"archive-title\">{{ title }}</h3>\n              </template>\n              <template #article=\"{ article, day }\">\n                <div class=\"archive-article\">\n                  <h4 class=\"title\">\n                    <span class=\"date\">D{{ day }}</span>\n                    <a\n                      class=\"link\"\n                      target=\"_blank\"\n                      :title=\"article.title\"\n                      :href=\"getArticleDetailRoute(article.id)\"\n                    >\n                      {{ article.title }}\n                    </a>\n                  </h4>\n                  <p class=\"description\" v-html=\"article.description\" />\n                </div>\n              </template>\n            </archive-tree>\n          </template>\n        </placeholder>\n      </container>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .archive-page {\n    .statistic-warpper {\n      padding: 2rem;\n      background-color: $module-bg-translucent;\n      border-bottom-left-radius: $lg-radius;\n      border-bottom-right-radius: $lg-radius;\n\n      .skeletons,\n      .statistics {\n        display: flex;\n        justify-content: space-around;\n        align-items: center;\n        width: 100%;\n      }\n\n      .skeleton {\n        width: 3rem;\n        height: 2rem;\n      }\n\n      .statistics {\n        flex-wrap: wrap;\n        justify-content: space-between;\n\n        .item {\n          display: inline-flex;\n          flex-direction: column;\n\n          .title {\n            margin-bottom: $xs-gap;\n            text-transform: uppercase;\n            font-size: $font-size-small;\n            color: $text-secondary;\n          }\n\n          .content {\n            font-size: $font-size-h1;\n            font-weight: bold;\n          }\n        }\n      }\n    }\n\n    .archive-warpper {\n      overflow: hidden;\n      margin-top: $lg-gap;\n\n      .archive-empty {\n        font-weight: bold;\n      }\n\n      .archive-skeleton,\n      .archive-content {\n        background-color: $module-bg-translucent;\n        @include radius-box($lg-radius);\n      }\n\n      .archive-skeleton {\n        padding: 2rem;\n        .item {\n          height: 2rem;\n          margin-bottom: 2rem;\n          &:last-child {\n            margin-bottom: 0;\n          }\n        }\n      }\n\n      .archive-content {\n        padding: 0 3rem;\n        .archive-title {\n          margin: 2em 0;\n          text-align: center;\n          text-transform: uppercase;\n          letter-spacing: 0.1em;\n        }\n\n        .archive-article {\n          margin-bottom: 2em;\n\n          .title {\n            margin-top: 0;\n            margin-bottom: $sm-gap;\n            max-width: 75vw;\n            @include text-overflow();\n\n            .date {\n              display: inline-block;\n              width: 2rem;\n              margin-right: 1rem;\n              color: $text-divider;\n            }\n          }\n\n          .description {\n            margin-bottom: 0;\n            padding-left: 3rem;\n            color: $text-disabled;\n          }\n        }\n      }\n    }\n  }\n</style>\n","/**\n * @file Generate text to QRcode DataURL\n * @module transforms.qrcode\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport QRCode, { QRCodeToDataURLOptions } from 'qrcode'\n\nexport async function renderTextToQRCodeDataURL(value: string, options?: QRCodeToDataURLOptions) {\n  return await QRCode.toDataURL(value, {\n    errorCorrectionLevel: 'H',\n    type: 'image/jpeg',\n    width: 260,\n    ...options\n  })\n}\n","/**\n * @file Window opener\n * @module util.opener\n * @author Surmon <https://github.com/surmon-china>\n */\n\nconst baseParams = {\n  scrollbars: 0,\n  status: 0,\n  menubar: 0,\n  resizable: 2,\n  location: 0\n}\n\nconst paramsToString = (params: any = {}) => {\n  return Object.keys(params)\n    .map((k) => `${k}=${params[k]}`)\n    .join(',')\n}\n\nexport interface WindowOpenerOptions {\n  name?: string\n  onClose?(): void\n  closeInterval?: number\n  params?: {\n    [key: string]: string\n  }\n}\nexport const openWindow = (targetURL: string, options: WindowOpenerOptions = {}) => {\n  const { name = '', closeInterval = 268, onClose, params = {} } = options\n  const width = Math.round((screen.availWidth / 6) * 2)\n  const height = Math.round((screen.availHeight / 5) * 2)\n  const top = Math.round((screen.availHeight - height) / 2)\n  const left = Math.round((screen.availWidth - width) / 2)\n  const formParams = { width, height, top, left }\n  const windowParams = paramsToString({\n    ...baseParams,\n    ...formParams,\n    ...params\n  })\n\n  const _window = window.open(targetURL, name, windowParams)\n  if (_window) {\n    if (onClose) {\n      const timer = setInterval(() => {\n        if (_window.closed) {\n          clearInterval(timer)\n          onClose()\n        }\n      }, closeInterval)\n    }\n    _window?.focus()\n    return _window\n  }\n}\n","/**\n * @file copyright\n * @module effect.copyright\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { META } from '/@/config/app.config'\n\ndeclare global {\n  interface Window {\n    __isEnabledCopyrighter: boolean\n  }\n}\n\nexport const enableCopyrighter = () => {\n  window.__isEnabledCopyrighter = true\n}\n\nexport const disableCopyrighter = () => {\n  window.__isEnabledCopyrighter = false\n}\n\nexport const initCopyrighter = () => {\n  enableCopyrighter()\n\n  const copyText = () => {\n    return [\n      '',\n      '',\n      `${META.author}`,\n      `${location.href}`,\n      `${META.title}`,\n      ''\n    ].join('\\n')\n  }\n\n  const buildText = (content) => content + copyText()\n  const buildHtml = (content) => content + copyText()\n\n  document.addEventListener('copy', (event) => {\n    if (!window.getSelection) return\n    if (window.__isEnabledCopyrighter) {\n      const content = window.getSelection()?.toString()\n      event.clipboardData?.setData('text/plain', buildText(content))\n      event.clipboardData?.setData('text/html', buildHtml(content))\n      event.preventDefault()\n    }\n  })\n}\n","/**\n * @file Clipboard util\n * @module util.clipboard\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { enableCopyrighter, disableCopyrighter } from '/@/effects/copyright'\n\nexport const read = () => navigator.clipboard.readText()\nexport const copy = (text: string) => {\n  disableCopyrighter()\n  // https://www.w3.org/TR/clipboard-apis/#async-clipboard-api\n  // MARK: only https site\n  return window.navigator.clipboard?.writeText(text).finally(() => {\n    enableCopyrighter()\n  })\n}\n\nexport default { copy, read }\n","<script lang=\"ts\">\n  export enum SocialMedia {\n    Wechat = 'wechat',\n    Weibo = 'weibo',\n    Twitter = 'twitter',\n    douban = 'douban',\n    Evernote = 'evernote',\n    Facebook = 'facebook',\n    LinkedIn = 'linkedin'\n  }\n</script>\n\n<script lang=\"ts\" setup>\n  import qs from 'qs'\n  import { computed } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { LanguageKey } from '/@/language'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { renderTextToQRCodeDataURL } from '/@/transforms/qrcode'\n  import { getPageURL } from '/@/transforms/url'\n  import { openWindow } from '/@/utils/opener'\n  import { copy } from '/@/utils/clipboard'\n  import { META } from '/@/config/app.config'\n\n  interface ShareParams {\n    url: string\n    title: string\n    description: string\n  }\n\n  interface SocialItem {\n    id: SocialMedia\n    name: string\n    class: string\n    handler?(params: ShareParams): void\n    url?(params: ShareParams): string\n  }\n\n  const defaultSocials: SocialItem[] = [\n    {\n      id: SocialMedia.Wechat,\n      name: '',\n      class: 'wechat',\n      handler: async (params) => {\n        const dataURL = await renderTextToQRCodeDataURL(params.url)\n        window.$popup.vImage(dataURL)\n      }\n    },\n    {\n      id: SocialMedia.Weibo,\n      name: '',\n      class: 'weibo',\n      url: (params) => {\n        return (\n          `https://service.weibo.com/share/share.php?` +\n          qs.stringify({\n            url: params.url,\n            source: params.url,\n            sourceUrl: params.url,\n            title: params.title,\n            content: params.description\n          })\n        )\n      }\n    },\n    {\n      id: SocialMedia.Twitter,\n      name: 'Twitter',\n      class: 'twitter',\n      url: (params) => {\n        return (\n          `https://twitter.com/share?` +\n          qs.stringify({\n            url: params.url,\n            text: params.title\n          })\n        )\n      }\n    },\n    {\n      id: SocialMedia.Facebook,\n      name: 'Facebook',\n      class: 'facebook',\n      url: (params) => {\n        return (\n          `https://www.facebook.com/share.php?` +\n          qs.stringify({\n            u: encodeURI(params.url)\n          })\n        )\n      }\n    },\n    {\n      id: SocialMedia.LinkedIn,\n      name: 'LinkedIn',\n      class: 'linkedin',\n      url: (params) => {\n        return (\n          `https://www.linkedin.com/sharing/share-offsite/?` +\n          qs.stringify({\n            url: params.url\n          })\n        )\n      }\n    },\n    {\n      id: SocialMedia.douban,\n      name: '',\n      class: 'douban',\n      url: (params) => {\n        return (\n          // https://www.douban.com/service/sharebutton\n          `https://www.douban.com/share/service?` +\n          qs.stringify({\n            href: params.url,\n            name: params.title\n            // image: '',\n            // updated: '',\n            // bm: ''\n          })\n        )\n      }\n    },\n    {\n      id: SocialMedia.Evernote,\n      name: 'Evernote',\n      class: 'evernote',\n      url: (params) => {\n        return (\n          `https://www.evernote.com/clip.action?` +\n          qs.stringify({\n            url: params.url,\n            title: params.title\n          })\n        )\n      }\n    }\n  ]\n\n  const props = defineProps<{\n    socials?: Array<SocialMedia>\n  }>()\n\n  const { i18n: _i18n, gtag, route, isZhLang } = useEnhancer()\n  const enabledSocials = computed(() => {\n    return props.socials?.length ? defaultSocials.filter((s) => props.socials?.includes(s.id)) : defaultSocials\n  })\n\n  const getURL = () => getPageURL(route.fullPath)\n  const getTitle = () => document.title || META.title\n  const getDescription = () => {\n    const pageDescription = document.getElementsByName('description')?.[0]?.getAttribute('content')\n    return pageDescription || _i18n.t(LanguageKey.APP_SLOGAN)!\n  }\n\n  const copyPageURL = () => {\n    const content = `${getTitle()} - ${getURL()}`\n    copy(content).then(() => {\n      alert(isZhLang.value ? '' : 'Link copied!')\n    })\n    gtag?.event('share_copy_url', {\n      event_category: GAEventCategories.Share,\n      event_label: content\n    })\n  }\n\n  const handleShare = (social: SocialItem) => {\n    gtag?.event('share_social', {\n      event_category: GAEventCategories.Share,\n      event_label: social.id\n    })\n\n    const shareParams: ShareParams = {\n      url: getURL(),\n      title: getTitle(),\n      description: getDescription()\n    }\n\n    if (social.handler) {\n      social.handler(shareParams)\n    } else {\n      openWindow(social.url!(shareParams), { name: `Share: ${META.title}` })\n    }\n  }\n</script>\n\n<template>\n  <div class=\"share\">\n    <button\n      class=\"share-ejector\"\n      v-for=\"(social, index) in enabledSocials\"\n      :key=\"index\"\n      :title=\"'Share to: ' + social.name\"\n      :class=\"social.class\"\n      @click=\"handleShare(social)\"\n    >\n      <i class=\"iconfont\" :class=\"`icon-${social.class}`\" />\n    </button>\n    <button class=\"share-ejector link\" title=\"Copy link\" @click=\"copyPageURL\">\n      <i class=\"iconfont icon-link\"></i>\n    </button>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .share {\n    @include visibility-transition();\n\n    > .share-ejector {\n      cursor: pointer;\n      display: inline-block;\n      text-align: center;\n      @include background-transition();\n\n      &.wechat:hover {\n        background-color: $wechat-primary !important;\n      }\n      &.weibo:hover {\n        background-color: $weibo-primary !important;\n      }\n      &.douban:hover {\n        background-color: $douban-primary !important;\n      }\n      &.evernote:hover {\n        background-color: $evernote-primary !important;\n      }\n      &.twitter:hover {\n        background-color: $twitter-primary-hover !important;\n      }\n      &.facebook:hover {\n        background-color: $facebook-primary !important;\n      }\n      &.linkedin:hover {\n        background-color: $linkedin-primary !important;\n      }\n      &.link:hover {\n        background-color: $surmon !important;\n      }\n\n      &:hover {\n        > .iconfont {\n          color: $white;\n        }\n      }\n\n      > .iconfont {\n        display: block;\n      }\n    }\n  }\n</style>\n","/**\n * @file comment helper\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { getCDN_URL } from '/@/transforms/url'\n\nexport const EMOJIS = [\n  ...['', '', '', '', '', '', '', '', '', '', '', ''],\n  ...['', '', '', '', '', ''],\n  ...['', '', '', '', '', '', '', '', ''],\n  ...['', '', '', '', '', '', '', '', '']\n]\n\nexport enum CommentEvents {\n  Sort = 'sort',\n  Page = 'page',\n  Vote = 'vote',\n  Blossom = 'blossom',\n  Delete = 'delete',\n  Reply = 'reply',\n  CancelReply = 'cancelReply',\n  Submit = 'submit'\n}\n\nexport const getDisqusUserURL = (username: string) => {\n  return `https://disqus.com/by/${username}/`\n}\n\nconst HAHA_KEYWORDS = ['2333', 'haha', '']\nconst SIX_KEYWORDS = ['666', '', '', '']\nconst HEHE_KEYWORDS = ['']\n\nexport const luanchEmojiRain = (content: string) => {\n  const luanchRain = (window as any).$luanchEmojiRain\n  if (HAHA_KEYWORDS.find((keyword) => content.includes(keyword))) {\n    luanchRain({\n      speed: 12,\n      staggered: true,\n      increaseSpeed: 0.4,\n      emoji: getCDN_URL('/images/emojis/haha.png')\n    })\n  } else if (SIX_KEYWORDS.find((keyword) => content.includes(keyword))) {\n    luanchRain({\n      speed: 12,\n      staggered: true,\n      increaseSpeed: 0.4,\n      emoji: getCDN_URL('/images/emojis/666.png')\n    })\n  } else if (HEHE_KEYWORDS.find((keyword) => content.includes(keyword))) {\n    luanchRain({\n      staggered: false,\n      speed: 8,\n      increaseSpeed: 0.04,\n      emoji: getCDN_URL('/images/emojis/hehe.png')\n    })\n  } else if (Math.random() <= 0.5) {\n    luanchRain({\n      scale: 0.6,\n      staggered: true,\n      speed: 8,\n      increaseSpeed: 0.04,\n      emoji: getCDN_URL('/images/emojis/doge.png')\n    })\n  }\n}\n","<script lang=\"ts\" setup>\n  import { computed } from 'vue'\n  import { META } from '/@/config/app.config'\n  import { LanguageKey } from '/@/language'\n  import { SortType } from '/@/constants/state'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { UserType, useIdentityStore } from '/@/stores/identity'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { openWindow } from '/@/utils/opener'\n  import nodepress from '/@/services/nodepress'\n  import { CommentEvents } from './helper'\n\n  interface Props {\n    postId: number\n    sort: SortType\n    fetching: boolean\n    loading: boolean\n    loaded?: number\n    total?: number\n    plain?: boolean\n  }\n\n  const props = withDefaults(defineProps<Props>(), {\n    total: 0,\n    loaded: 0,\n    plain: false\n  })\n\n  const emit = defineEmits<{\n    (e: CommentEvents.Sort, sort: SortType): void\n  }>()\n\n  const { gtag } = useEnhancer()\n  const identity = useIdentityStore()\n  const user = computed(() => identity.user)\n  const statisticsText = computed(() => {\n    return props.loading ? `` : `${props.loaded} / ${props.total}`\n  })\n\n  const disqusThreadMap = new Map<number, any>()\n  const handleDisqusThread = async () => {\n    gtag?.event('disqus_thread_page', {\n      event_category: GAEventCategories.Comment,\n      event_label: `id: ${props.postId}`\n    })\n\n    if (!disqusThreadMap.has(props.postId)) {\n      const response = await nodepress.get('/disqus/thread', {\n        params: { post_id: props.postId }\n      })\n      disqusThreadMap.set(props.postId, response.result)\n    }\n\n    const forum = identity.disqusConfig.forum\n    const slug = disqusThreadMap.get(props.postId).slug\n    window.open(`https://disqus.com/home/discussion/${forum}/${slug}/`)\n  }\n\n  const handleSort = (target: any) => {\n    gtag?.event('comment_sort_switch', {\n      event_category: GAEventCategories.Comment\n    })\n\n    const value = Number(target?.value)\n    if (value !== props.sort) {\n      emit(CommentEvents.Sort, value)\n    }\n  }\n\n  const handleDisqusLogin = () => {\n    gtag?.event('disqus_login', {\n      event_category: GAEventCategories.Comment,\n      event_label: `id: ${props.postId}`\n    })\n\n    openWindow(identity.disqusConfig.authorize_url, {\n      name: `Disqus Auth ${META.title}`,\n      onClose: () => {\n        identity.fetchDisqusUserInfo()\n        console.info('[disqus]', 'logined', identity.user)\n      }\n    })\n  }\n\n  const handleDisqusLogout = () => {\n    identity.fetchDisqusLogout()\n    console.log('[disqus]', 'logout')\n    gtag?.event('disqus_logout', {\n      event_category: GAEventCategories.Comment,\n      event_label: `id: ${props.postId}`\n    })\n  }\n\n  const handleClearLocalProfile = () => {\n    identity.removeLocalUser()\n  }\n</script>\n\n<template>\n  <placeholder :loading=\"fetching\">\n    <template #loading>\n      <div class=\"topbar-skeleton\" key=\"skeleton\">\n        <div class=\"left\">\n          <skeleton-line class=\"skeleton-item count\" />\n          <skeleton-line class=\"skeleton-item sort\" v-if=\"!plain\" />\n        </div>\n        <div class=\"right\">\n          <skeleton-line class=\"skeleton-item user\" />\n        </div>\n      </div>\n    </template>\n    <template #default>\n      <div class=\"topbar\" :class=\"{ plain }\" key=\"element\">\n        <div class=\"statistics\">\n          <div class=\"total\" :class=\"{ loading }\">\n            <i class=\"iconfont icon-discussion\"></i>\n            <i18n>\n              <template #zh>\n                 <span class=\"count\">{{ statisticsText }}</span> \n              </template>\n              <template #en>\n                <span class=\"count\">{{ statisticsText }}</span> comments\n              </template>\n            </i18n>\n          </div>\n          <select class=\"sort\" name=\"sort\" :value=\"sort\" @change=\"handleSort($event.target)\">\n            <option :value=\"SortType.Desc\">\n              <i18n :k=\"LanguageKey.COMMENT_SORT_NEW\" />\n            </option>\n            <option :value=\"SortType.Hottest\">\n              <i18n :k=\"LanguageKey.COMMENT_SORT_HOT\" />\n            </option>\n            <option :value=\"SortType.Asc\">\n              <i18n :k=\"LanguageKey.COMMENT_SORT_OLD\" />\n            </option>\n          </select>\n          <button class=\"disqus\" @click=\"handleDisqusThread\">\n            <i class=\"iconfont icon-disqus-logo\"></i>\n          </button>\n        </div>\n        <div class=\"user\">\n          <div class=\"unlogin\" v-if=\"user.type === UserType.Null\">\n            <span class=\"guest\">\n              <i18n zh=\"\" en=\"Guest\" />\n            </span>\n            <divider type=\"vertical\" size=\"sm\" />\n            <button class=\"disqus\" @click=\"handleDisqusLogin\">\n              <i18n>\n                <template #zh><i class=\"iconfont icon-disqus\"></i></template>\n                <template #en>Login by<i class=\"iconfont icon-disqus right\"></i></template>\n              </i18n>\n            </button>\n          </div>\n          <div class=\"logined\" v-else>\n            <template v-if=\"user.type === UserType.Local\">\n              <div class=\"name\">\n                <i class=\"icon guest iconfont icon-user\"></i>\n                <span class=\"text\">{{ user.localProfile?.name || '' }}</span>\n                <i class=\"arrow iconfont icon-down-arrow\"></i>\n              </div>\n              <div class=\"user-menu\">\n                <ul class=\"menus\">\n                  <li class=\"item\">\n                    <button class=\"button\" @click=\"handleDisqusLogin\">\n                      <i18n>\n                        <template #zh><i class=\"iconfont icon-disqus disqus\"></i></template>\n                        <template #en>Login by <i class=\"iconfont icon-disqus disqus\"></i></template>\n                      </i18n>\n                    </button>\n                  </li>\n                  <li class=\"item\">\n                    <button class=\"button\" @click=\"handleClearLocalProfile\">\n                      <i18n zh=\"\" en=\"Clean local profile\" />\n                    </button>\n                  </li>\n                </ul>\n              </div>\n            </template>\n            <template v-else-if=\"user.type === UserType.Disqus\">\n              <div class=\"name\">\n                <i class=\"icon disqus iconfont icon-disqus-logo\"></i>\n                <span class=\"text\">{{ user.disqusProfile?.name || '' }}</span>\n                <i class=\"arrow iconfont icon-down-arrow\"></i>\n              </div>\n              <div class=\"user-menu\">\n                <ul class=\"menus\">\n                  <li class=\"item\">\n                    <ulink class=\"button\" :href=\"user.disqusProfile.profileUrl\">\n                      <i18n zh=\" Disqus \" en=\"Disqus profile\" />\n                    </ulink>\n                  </li>\n                  <li class=\"item\">\n                    <button class=\"button\" @click=\"handleDisqusLogout\">\n                      <i18n zh=\"\" en=\"Disqus logout\" />\n                    </button>\n                  </li>\n                </ul>\n              </div>\n            </template>\n          </div>\n        </div>\n      </div>\n    </template>\n  </placeholder>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n  $topbar-size: 2em;\n\n  .topbar,\n  .topbar-skeleton {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n  }\n\n  .topbar-skeleton {\n    .left,\n    .right {\n      height: $topbar-size;\n    }\n    .skeleton-item {\n      &.count {\n        width: 12rem;\n        margin-right: $gap;\n      }\n      &.sort {\n        width: 8rem;\n      }\n      &.user {\n        width: 8rem;\n      }\n    }\n\n    .left {\n      display: flex;\n    }\n  }\n\n  .topbar {\n    &.plain {\n      flex-direction: column;\n      align-items: baseline;\n      height: 6rem;\n    }\n\n    .statistics {\n      display: flex;\n      height: $topbar-size;\n      line-height: $topbar-size;\n\n      .total {\n        padding: 0;\n        padding-right: 0.6em;\n        background-color: $module-bg-darker-1;\n        @include radius-box($xs-radius);\n        will-change: width;\n        transition: all $transition-time-fast;\n        max-width: 180px;\n        &.loading {\n          max-width: 130px;\n        }\n\n        .iconfont {\n          display: inline-block;\n          width: $topbar-size;\n          height: $topbar-size;\n          text-align: center;\n          margin-right: $xs-gap;\n          background-color: $module-bg-darker-2;\n          @include background-transition();\n        }\n\n        .count {\n          font-weight: bold;\n          margin: 0 $xs-gap;\n        }\n      }\n\n      .sort,\n      .disqus {\n        margin-left: $gap;\n        background-color: $module-bg-darker-1;\n        @include radius-box($xs-radius);\n        cursor: pointer;\n        &:hover {\n          background-color: $module-bg-darker-2;\n        }\n      }\n\n      .sort {\n        padding: 0 $xs-gap;\n        font-weight: bold;\n      }\n\n      .disqus {\n        width: $topbar-size;\n        text-align: center;\n        &:hover {\n          color: $white;\n          background-color: $disqus-primary;\n        }\n      }\n    }\n\n    .user {\n      .unlogin {\n        display: flex;\n        align-items: center;\n\n        .disqus {\n          padding-top: 2px;\n          padding-bottom: 2px;\n          border-top: 1px solid transparent;\n          border-bottom: 1px solid transparent;\n          &:hover {\n            .iconfont {\n              font-weight: normal;\n            }\n            font-weight: bold;\n            border-bottom-color: $text-secondary;\n          }\n\n          .iconfont {\n            margin: 0 $sm-gap;\n            color: $disqus-primary;\n            font-size: $font-size-small;\n            &.right {\n              margin-right: 0;\n            }\n          }\n        }\n      }\n\n      .logined {\n        position: relative;\n        display: inline-block;\n        cursor: pointer;\n        &:hover {\n          .name {\n            background-color: $module-bg-darker-2;\n          }\n          .user-menu {\n            display: block;\n          }\n        }\n\n        .name {\n          padding: 0 $gap;\n          height: $topbar-size;\n          display: flex;\n          align-items: center;\n          background-color: $module-bg-darker-1;\n          @include radius-box($xs-radius);\n\n          .icon {\n            &.disqus {\n              font-size: $font-size-h4;\n              color: $disqus-primary;\n            }\n          }\n\n          .text {\n            margin-right: $xs-gap;\n            margin-left: $sm-gap;\n            font-weight: bold;\n          }\n\n          .arrow {\n            color: $text-divider;\n            font-size: $font-size-small;\n          }\n        }\n\n        .user-menu {\n          display: none;\n          position: absolute;\n          right: 0;\n          padding-top: 0.5em;\n          z-index: $z-index-normal + 1;\n          .menus {\n            margin: 0;\n            padding: 0;\n            list-style: none;\n            @include radius-box($xs-radius);\n\n            .item {\n              .button {\n                white-space: nowrap;\n                display: block;\n                width: 100%;\n                padding: 0 $gap;\n                line-height: 2.3em;\n                text-align: right;\n                font-size: $font-size-small;\n                background-color: $module-bg-darker-2;\n                &:hover {\n                  background-color: $module-bg-darker-3;\n                }\n\n                .iconfont {\n                  &.disqus {\n                    color: $disqus-primary;\n                    font-size: 10px;\n                    margin: 0 $xs-gap;\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","/**\n * @file Avatar\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { ProxyModule } from '/@/constants/proxy'\nimport { getCDN_URL, getProxyURL } from '/@/transforms/url'\nimport { isDev } from '/@/environment'\n\nexport const getDefaultAvatar = () => {\n  return getCDN_URL('/images/gravatar.png')\n}\n\nexport const getGravatarByHash = (hash?: string | null) => {\n  if (!hash) {\n    return getDefaultAvatar()\n  }\n\n  const target = `https://www.gravatar.com/avatar/${hash}`\n  return isDev ? target : getProxyURL(target, ProxyModule.Default)\n}\n\nexport const getDisqusAvatarByUsername = (username: string) => {\n  // https://disqus.com/api/docs/images/\n  const target = `https://disqus.com/api/users/avatars/${username}.jpg`\n  return getProxyURL(target, ProxyModule.Disqus)\n}\n","<script lang=\"ts\" setup>\n  import { computed } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useLozad } from '/@/composables/lozad'\n  import { markdownToHTML } from '/@/transforms/markdown'\n\n  interface Props {\n    markdown?: string\n    html?: string\n    sanitize?: boolean\n    plain?: boolean\n    compact?: boolean\n  }\n\n  const props = defineProps<Props>()\n  const { element } = useLozad()\n  const { isDarkTheme } = useEnhancer()\n  const markdownHTML = computed<string>(() => {\n    if (!props.markdown) {\n      return props.html || ''\n    }\n    return markdownToHTML(props.markdown, {\n      sanitize: props.sanitize\n    })\n  })\n</script>\n\n<template>\n  <section\n    ref=\"element\"\n    v-html=\"markdownHTML\"\n    :class=\"[plain ? 'global-markdown-plain' : 'global-markdown-html', { compact, dark: isDarkTheme }]\"\n  ></section>\n</template>\n\n<style lang=\"scss\">\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .global-markdown-plain {\n    p {\n      margin: 0;\n      max-width: 100%;\n      @include text-overflow();\n    }\n\n    a {\n      @include text-underline();\n    }\n  }\n\n  .global-markdown-html {\n    font-size: $font-size-base * 1.05;\n\n    /* for google adsense */\n    .google-auto-placed {\n      margin-bottom: $sm-gap;\n    }\n\n    p {\n      text-indent: 2em;\n      line-height: 2.2em;\n    }\n\n    a {\n      margin: 0;\n      font-weight: bold;\n      @include text-underline();\n      &.image-link {\n        margin: 0;\n        border: 0;\n      }\n    }\n\n    u {\n      text-underline-offset: 0.5em;\n      text-decoration-thickness: from-font;\n      text-decoration-style: dashed;\n    }\n\n    h1,\n    h2,\n    h3,\n    h4,\n    h5,\n    h6 {\n      line-height: 1.8em;\n      font-weight: 700;\n      text-indent: 0;\n    }\n\n    blockquote {\n      border-radius: $xs-radius;\n      p {\n        &:last-child {\n          margin-bottom: 0;\n        }\n      }\n    }\n\n    ul {\n      list-style-type: square;\n    }\n\n    ul:not(.code-lines),\n    ol {\n      > li {\n        line-height: 2em;\n        padding: 0.5em 0.8em;\n        border-radius: $xs-radius;\n        &:hover {\n          background-color: $module-bg-darker-1;\n        }\n\n        > p {\n          text-indent: 0;\n        }\n\n        > ol {\n          list-style: lower-alpha;\n        }\n\n        > ul,\n        > ol {\n          list-style: circle;\n          padding-left: 2em;\n          margin-top: $sm-gap;\n          &:last-child {\n            margin-bottom: 0;\n          }\n        }\n\n        &:last-child {\n          > ul,\n          > ol {\n            margin-bottom: -$sm-gap;\n          }\n        }\n      }\n    }\n\n    table {\n      border-radius: $xs-radius;\n      overflow: hidden;\n    }\n\n    iframe {\n      width: 100%;\n      min-height: 320px;\n      margin-bottom: 1em;\n      padding: $sm-gap;\n      border-radius: $xs-radius;\n      border: 1px solid $module-bg-darker-1;\n    }\n\n    .figure-wrapper {\n      width: 100%;\n      margin-bottom: 1em;\n      display: flex;\n      justify-content: center;\n      overflow: hidden;\n      text-align: center;\n      > figure {\n        display: block;\n      }\n    }\n\n    figure.image {\n      position: relative;\n      border-radius: $xs-radius;\n      border: 1px solid $module-bg-darker-1;\n      text-indent: 0;\n      text-align: center;\n\n      .placeholder {\n        visibility: hidden;\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        pointer-events: none;\n      }\n\n      img {\n        display: block;\n        max-width: 100%;\n        padding: $sm-gap;\n        color: transparent;\n        cursor: pointer;\n        transition: opacity $transition-time-fast;\n        &:hover {\n          opacity: 0.9;\n        }\n      }\n\n      figcaption {\n        display: block;\n        border-top: 1px dashed $module-bg-darker-1;\n        text-align: center;\n        line-height: $gap * 3;\n        font-size: $font-size-small;\n        font-weight: bold;\n        /* font-style: italic; */\n        user-select: none;\n        pointer-events: none;\n      }\n\n      &[data-status='loaded'] {\n        width: auto;\n        img {\n          min-width: auto;\n          min-height: auto;\n        }\n      }\n\n      &[data-status='loading'],\n      &[data-status='error'] {\n        width: 100%;\n\n        /* image size */\n        img {\n          min-height: 6rem;\n        }\n\n        /* placeholder size */\n        &.caption {\n          .placeholder {\n            padding-bottom: $gap * 3;\n          }\n        }\n      }\n\n      &[data-status='error'] {\n        /* show custom failed icon */\n        .placeholder.error {\n          visibility: visible;\n          font-size: $font-size-h1 * 1.8;\n          color: $text-divider;\n        }\n        /* hide original image failed icon when error */\n        img {\n          width: 100%;\n          opacity: 0;\n        }\n      }\n\n      /* loading animation */\n      &[data-status='loading'] {\n        .placeholder.loading {\n          visibility: visible;\n\n          @keyframes loading {\n            0% {\n              opacity: 1;\n            }\n            50% {\n              opacity: 0.5;\n            }\n            100% {\n              opacity: 1;\n            }\n          }\n\n          div {\n            width: 2rem;\n            height: 1.2rem;\n            margin: 0 $sm-gap;\n            border-radius: $mini-radius;\n            animation: loading 1s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n            &:nth-child(1) {\n              background: $module-bg-darker-2;\n              animation-delay: -0.6s;\n            }\n            &:nth-child(2) {\n              background: $module-bg-darker-3;\n              animation-delay: -0.4s;\n            }\n            &:nth-child(3) {\n              background: $module-bg-darker-2;\n              animation-delay: -0.2s;\n            }\n            &:nth-child(4) {\n              background: $module-bg-darker-3;\n              animation-delay: -1s;\n            }\n          }\n        }\n      }\n    }\n\n    .checkbox {\n      margin: 0 $xs-gap;\n      &.checked {\n        color: $theme-black;\n      }\n    }\n\n    code {\n      vertical-align: middle;\n      padding: 0.2em 0.4em 0.14em;\n      margin: 0;\n      border-radius: $sm-radius;\n      font-size: 95%;\n    }\n\n    pre {\n      $code-header-height: 2.8rem;\n      $code-number-width: 3rem;\n      $code-row-line-height: 1.8em;\n      $code-padding: 0.8rem;\n      $code-font-size: $font-size-base;\n      position: relative;\n      display: flex;\n      margin-bottom: 1em;\n      padding-top: $code-header-height;\n      padding-left: $code-number-width;\n      border-radius: $xs-radius;\n      overflow: hidden;\n      font-size: $code-font-size;\n\n      &::before {\n        content: attr(data-lang) ' CODE';\n        position: absolute;\n        top: 0;\n        left: 0;\n        display: block;\n        width: 100%;\n        height: $code-header-height;\n        line-height: $code-header-height;\n        text-transform: uppercase;\n        text-align: center;\n        z-index: $z-index-normal + 2;\n      }\n\n      .code-lines {\n        z-index: $z-index-normal + 1;\n        position: absolute;\n        left: 0;\n        top: 0;\n        display: block;\n        margin: 0;\n        padding: 0;\n        padding-top: $code-header-height + $code-padding;\n        width: $code-number-width;\n        height: 100%;\n        color: $text-divider;\n        text-align: center;\n        user-select: none;\n\n        .code-line-number {\n          padding: 0;\n          list-style-type: none;\n          height: $code-row-line-height;\n          line-height: $code-row-line-height;\n        }\n      }\n\n      code {\n        margin: 0;\n        padding: $code-padding 1em !important;\n        float: left;\n        width: 100%;\n        height: 100%;\n        display: block;\n        line-height: $code-row-line-height;\n        font-size: $font-size-base;\n        cursor: text;\n      }\n    }\n\n    &.compact {\n      line-height: 2em;\n      word-wrap: break-word;\n      font-size: $font-size-base;\n\n      p,\n      pre {\n        margin-bottom: $gap;\n      }\n\n      p {\n        text-indent: 0;\n        line-height: 2em;\n        &:last-child {\n          margin: 0;\n        }\n      }\n\n      a {\n        @include text-underline();\n      }\n\n      .figure-wrapper {\n        margin: 0.5rem 0;\n        justify-content: initial;\n      }\n\n      figure.image {\n        border-color: $module-bg-darker-2;\n        figcaption {\n          border-color: $module-bg-darker-2;\n        }\n      }\n\n      ul,\n      ol {\n        padding-left: 2em;\n\n        > li {\n          padding: 0.2em 0.5em;\n        }\n      }\n\n      pre {\n        $code-header-height: 2.5rem;\n        margin-top: 1rem;\n        padding-left: 0;\n        padding-top: $code-header-height;\n        &::before {\n          height: $code-header-height;\n          line-height: $code-header-height;\n        }\n\n        .code-lines {\n          display: none;\n        }\n\n        code {\n          line-height: 1.8;\n        }\n      }\n    }\n  }\n\n  .global-markdown-html {\n    code {\n      border: 1px solid $module-bg-darker-2;\n      background-color: $module-bg-darker-1;\n      color: $link-color;\n    }\n\n    pre {\n      background-color: #f3f3f3;\n      &::before {\n        background-color: $module-bg-darker-2;\n      }\n      .code-lines {\n        background-color: $module-bg-darker-1;\n      }\n      code {\n        color: #444;\n        border-radius: 0;\n        border-width: 0 1px 1px 0;\n        border-color: $module-bg-darker-1;\n        background-color: transparent !important;\n      }\n    }\n\n    &.dark {\n      pre {\n        background-color: #1e1e1e;\n        &::before {\n          background-color: $module-bg-darker-1;\n        }\n        .code-lines {\n          background-color: $module-bg-darker-3;\n        }\n        code {\n          color: #c9d1d9;\n          border-color: transparent;\n        }\n      }\n    }\n\n    &.compact {\n      blockquote {\n        border-color: $module-bg-darker-3;\n        background-color: $module-bg-darker-2;\n      }\n\n      code {\n        border-color: $module-bg-darker-3;\n        background-color: $module-bg-darker-2;\n      }\n\n      pre {\n        border: 1px solid $module-bg-darker-3;\n        code {\n          border-color: transparent;\n          background-color: transparent;\n        }\n      }\n    }\n  }\n</style>\n","/**\n * @file emoji\n * @author Surmon <https://github.com/surmon-china>\n */\n\n// offset between uppercase ascii and regional indicator symbols\nconst OFFSET = 127397\n\n// https://github.com/danalloway/react-country-flag/blob/main/src/index.tsx\nexport const countryCodeToEmoji = (countryCode: string): string => {\n  return countryCode.toUpperCase().replace(/./g, (char) => String.fromCodePoint(char.charCodeAt(0) + OFFSET))\n}\n","<script lang=\"ts\" setup>\n  import { computed } from 'vue'\n  import { countryCodeToEmoji } from '/@/transforms/emoji'\n  import { IPLocation } from '/@/interfaces/comment'\n\n  const props = defineProps<{\n    location: IPLocation\n  }>()\n\n  const municipalitys: string[] = ['Shanghai', 'Beijing', 'Tianjin', 'Chongqing', 'Chungking']\n  const countryText = computed(() => props.location.country_code || props.location.country)\n  const emojiText = computed(() => countryCodeToEmoji(props.location.country_code))\n  const cityText = computed(() => {\n    if (props.location.country_code === 'CN') {\n      if (municipalitys.includes(props.location.region)) {\n        return props.location.region\n      }\n    }\n    return props.location.city\n  })\n</script>\n\n<template>\n  <span class=\"location\">\n    <span v-if=\"emojiText\" class=\"emoji\">{{ emojiText }}</span>\n    <i v-else class=\"iconfont icon-earth\"></i>\n    <span>{{ countryText }}</span>\n    <span class=\"separator\"></span>\n    <span class=\"city\">{{ cityText }}</span>\n  </span>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .location {\n    display: inline-flex;\n    align-items: center;\n    &:hover {\n      .emoji {\n        color: $text;\n      }\n    }\n\n    .iconfont {\n      margin-right: $xs-gap;\n    }\n\n    .emoji {\n      margin-right: $xs-gap;\n      font-size: 130%;\n    }\n\n    .separator {\n      margin: 0 3px;\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { computed } from 'vue'\n  import { uaParser } from '/@/transforms/ua'\n\n  // https://github.com/faisalman/ua-parser-js#methods\n  const osIconsNameMap = {\n    'Mac OS': 'icon-apple',\n    Windows: 'icon-windows',\n    Android: 'icon-android',\n    Ubuntu: 'icon-ubuntu',\n    Linux: 'icon-linux',\n    iOS: 'icon-apple'\n  }\n\n  const browersIconsNameMap = {\n    Chrome: 'icon-chrome',\n    Chromium: 'icon-chrome',\n    WeChat: 'icon-wechat',\n    QQ: 'icon-qq',\n    Safari: 'icon-safari',\n    'Mobile Safari': 'icon-safari',\n    UCBrowser: 'icon-uc',\n    Maxthon: 'icon-maxthon',\n    Firefox: 'icon-firefox',\n    IE: 'icon-ie',\n    Opera: 'icon-opera',\n    Edge: 'icon-edge'\n  }\n\n  const props = defineProps<{\n    userAgent: string\n  }>()\n\n  const uaResult = computed(() => uaParser(props.userAgent))\n  const osIconName = computed(() => {\n    const osName = uaResult.value.result.os.name\n    return osName && osIconsNameMap[osName]\n  })\n  const browserIconName = computed(() => {\n    const browserName = uaResult.value.result.browser.name\n    return browserName ? browersIconsNameMap[browserName] : null\n  })\n</script>\n\n<template>\n  <span class=\"user-agent\">\n    <span class=\"os\">\n      <i v-if=\"osIconName\" class=\"iconfont\" :class=\"osIconName\" />\n      <span>{{ uaResult.result.os.name }}</span>\n      <!-- <span>{{ uaResult.result.os.version }}</span> -->\n    </span>\n    <span class=\"browser\">\n      <i v-if=\"browserIconName\" class=\"iconfont\" :class=\"browserIconName\" />\n      <span>{{ uaResult.result.browser.name }}</span>\n      <!-- <span>{{ uaResult.result.browser.version }}</span> -->\n    </span>\n  </span>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .user-agent {\n    .iconfont {\n      margin-right: $xs-gap;\n    }\n\n    .os {\n      margin-right: $sm-gap;\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { computed } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useCommentStore } from '/@/stores/comment'\n  import { useIdentityStore, UserType } from '/@/stores/identity'\n  import { getCommentItemElementId } from '/@/constants/anchor'\n  import { LanguageKey } from '/@/language'\n  import { UNDEFINED } from '/@/constants/value'\n  import { Comment } from '/@/interfaces/comment'\n  import { getExtendValue } from '/@/transforms/state'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { scrollToAnchor } from '/@/utils/scroller'\n  import { getGravatarByHash, getDisqusAvatarByUsername } from '/@/transforms/avatar'\n  import Markdown from '/@/components/common/markdown.vue'\n  import CommentLink from './link.vue'\n  import CommentLocation from './location.vue'\n  import CommentUserAgent from './user-agent.vue'\n  import { CommentEvents, getDisqusUserURL } from '../helper'\n\n  interface Props {\n    comment: Comment\n    liked?: boolean\n    disliked?: boolean\n    isReply?: boolean\n    isChild?: boolean\n    hasChild?: boolean\n    hiddenAvatar?: boolean\n    hiddenUa?: boolean\n    plainVote?: boolean\n  }\n\n  const props = withDefaults(defineProps<Props>(), {\n    liked: false,\n    disliked: false,\n    isReply: false,\n    isChild: false,\n    hasChild: false,\n    hiddenAvatar: false,\n    hiddenUa: false,\n    plainVote: false\n  })\n\n  const emit = defineEmits<{\n    (e: CommentEvents.Vote, commentId: number, isLike: boolean): void\n    (e: CommentEvents.Delete, commentId: number): void\n    (e: CommentEvents.Reply, commentId: number): void\n    (e: CommentEvents.CancelReply, commentId: number): void\n  }>()\n\n  const { i18n: _i18n } = useEnhancer()\n  const commentStore = useCommentStore()\n  const identityStore = useIdentityStore()\n  const isDeleting = computed(() => commentStore.deleting)\n\n  const disqusAuthorId = computed(() => {\n    return getExtendValue(props.comment.extends, 'disqus-author-id')\n  })\n  const disqusUsername = computed<string | void>(() => {\n    return getExtendValue(props.comment.extends, 'disqus-author-username')\n  })\n\n  const isDisqusAuthor = computed(() => Boolean(disqusAuthorId.value))\n  const isAdminAuthor = computed(() => {\n    return (\n      Boolean(disqusUsername.value) &&\n      Boolean(identityStore.disqusConfig) &&\n      disqusUsername.value === identityStore.disqusConfig.admin_username\n    )\n  })\n\n  const authorAvatar = computed(() => {\n    return disqusUsername.value\n      ? getDisqusAvatarByUsername(disqusUsername.value)\n      : getGravatarByHash(props.comment.author.email_hash)\n  })\n\n  const authorURL = computed(() => {\n    if (props.comment.author.site) {\n      return props.comment.author.site\n    }\n    if (disqusUsername.value) {\n      return getDisqusUserURL(disqusUsername.value)\n    }\n    return UNDEFINED\n  })\n\n  const isDeleteable = computed(() => {\n    // 1. Disqus logined\n    if (identityStore.user.type === UserType.Disqus) {\n      // 2. Logined user ID === comment.author.disqus-author-id\n      if (disqusAuthorId.value) {\n        return identityStore.user.disqusProfile?.id === disqusAuthorId.value\n      }\n    }\n    return false\n  })\n\n  const getReplyParentCommentText = (parentId: number) => {\n    const authorName = commentStore.comments.find((comment) => comment.id === parentId)?.author.name\n    const nameText = authorName ? `@${authorName}` : ''\n    const idText = `#${parentId}`\n    return `${idText} ${nameText}`\n  }\n\n  const handleReply = () => {\n    emit(CommentEvents.Reply, props.comment.id)\n  }\n\n  const handleCancelReply = () => {\n    emit(CommentEvents.CancelReply, props.comment.id)\n  }\n\n  const handleVote = (isLike: boolean) => {\n    emit(CommentEvents.Vote, props.comment.id, isLike)\n  }\n\n  const handleDelete = () => {\n    if (window.confirm(_i18n.t(LanguageKey.COMMENT_DELETE_CONFIRM))) {\n      emit(CommentEvents.Delete, props.comment.id)\n    }\n  }\n\n  const scrollToCommentItem = (commentId: number) => {\n    scrollToAnchor(getCommentItemElementId(commentId), -300)\n  }\n</script>\n\n<template>\n  <li\n    class=\"comment-item\"\n    :key=\"comment.id\"\n    :id=\"getCommentItemElementId(comment.id)\"\n    :class=\"{\n      'hide-avatar': hiddenAvatar,\n      'is-child': isChild,\n      'has-child': hasChild\n    }\"\n  >\n    <div>\n      <div class=\"cm-avatar\" v-if=\"!hiddenAvatar\">\n        <comment-link class=\"link\" :href=\"authorURL\">\n          <img :src=\"authorAvatar\" :alt=\"comment.author.name\" draggable=\"false\" />\n          <span class=\"role\" :class=\"isDisqusAuthor ? 'disqus' : 'anonymous'\">\n            <i class=\"iconfont icon-disqus-logo\" v-if=\"isDisqusAuthor\"></i>\n            <i class=\"iconfont icon-user\" v-else></i>\n          </span>\n        </comment-link>\n      </div>\n      <div class=\"cm-body\">\n        <div class=\"cm-header\">\n          <div class=\"left\">\n            <comment-link class=\"username\" :class=\"{ url: Boolean(authorURL) }\" :href=\"authorURL\">\n              {{ firstUpperCase(comment.author.name) }}\n            </comment-link>\n            <span class=\"moderator\" v-if=\"isAdminAuthor\">\n              <i18n :k=\"LanguageKey.COMMENT_MODERATOR\" />\n            </span>\n            <span class=\"author-info\">\n              <template v-if=\"comment.ip_location\">\n                <comment-location :location=\"comment.ip_location\" />\n              </template>\n              <template v-if=\"comment.agent && !hiddenUa\">\n                <comment-user-agent :user-agent=\"comment.agent\" />\n              </template>\n            </span>\n          </div>\n          <div class=\"right\">\n            <span class=\"flool\">#{{ comment.id }}</span>\n          </div>\n        </div>\n        <div class=\"cm-content\">\n          <p v-if=\"comment.pid\" class=\"reply\">\n            <span class=\"text\">\n              <i18n :k=\"LanguageKey.COMMENT_REPLY\" />\n            </span>\n            <button class=\"parent\" @click=\"scrollToCommentItem(comment.pid)\">\n              {{ getReplyParentCommentText(comment.pid) }}\n            </button>\n            <i18n zh=\"\" en=\":\" />\n          </p>\n          <div class=\"markdown\">\n            <markdown :markdown=\"comment.content\" :sanitize=\"true\" :compact=\"true\" />\n          </div>\n        </div>\n        <div class=\"cm-footer\">\n          <div class=\"left\">\n            <span class=\"create-at\">\n              <udate to=\"ago\" :date=\"comment.created_at\" />\n            </span>\n            <button\n              class=\"vote\"\n              :class=\"{\n                actived: liked,\n                alived: Boolean(comment.likes)\n              }\"\n              :disabled=\"liked\"\n              @click=\"handleVote(true)\"\n            >\n              <i class=\"iconfont icon-like\" />\n              <i18n :k=\"LanguageKey.COMMENT_UPVOTE\" v-if=\"!plainVote\" />\n              <span class=\"count\">({{ comment.likes }})</span>\n            </button>\n            <button\n              class=\"vote\"\n              :class=\"{\n                actived: disliked,\n                alived: Boolean(comment.dislikes)\n              }\"\n              :disabled=\"disliked\"\n              @click=\"handleVote(false)\"\n            >\n              <i class=\"iconfont icon-dislike\" />\n              <i18n :k=\"LanguageKey.COMMENT_DOWNVOTE\" v-if=\"!plainVote\" />\n              <span class=\"count\">({{ comment.dislikes }})</span>\n            </button>\n            <button class=\"reply\" @click=\"handleCancelReply\" v-if=\"isReply\">\n              <i class=\"iconfont icon-cancel\" />\n              <i18n :k=\"LanguageKey.COMMENT_REPLY_CANCEL\" />\n            </button>\n            <button class=\"reply\" @click=\"handleReply\" v-else>\n              <i class=\"iconfont icon-reply\" />\n              <i18n :k=\"LanguageKey.COMMENT_REPLY\" />\n            </button>\n          </div>\n          <div class=\"right\">\n            <button class=\"delete\" :disabled=\"isDeleting\" @click=\"handleDelete\" v-if=\"isDeleteable\">\n              <i class=\"iconfont icon-delete\" />\n              <i18n :k=\"LanguageKey.COMMENT_DELETE\" />\n            </button>\n          </div>\n        </div>\n        <div class=\"cm-reply\" v-if=\"isReply\">\n          <slot name=\"reply\"></slot>\n        </div>\n        <div class=\"cm-children\">\n          <slot name=\"children\"></slot>\n        </div>\n      </div>\n    </div>\n  </li>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .comment-item {\n    position: relative;\n    padding-left: 2rem;\n    margin-top: $lg-gap;\n    &:first-child {\n      margin-top: 0;\n    }\n\n    /* reply */\n    .cm-reply {\n      padding-top: $lg-gap;\n      padding-bottom: $sm-gap;\n      padding-right: $sm-gap;\n    }\n\n    &.has-child {\n      .cm-reply {\n        padding-bottom: 0;\n      }\n    }\n\n    &.is-child {\n      margin-top: $xs-gap;\n      padding-top: $xs-gap;\n      border-top: 1px dashed $module-bg-darker-3;\n      .cm-reply {\n        padding-right: 0;\n        padding-bottom: 0;\n      }\n\n      &:last-child {\n        .cm-body {\n          padding-bottom: 0;\n        }\n        .cm-reply {\n          padding-bottom: $sm-gap;\n        }\n      }\n\n      .cm-avatar {\n        top: $lg-gap * 2;\n      }\n    }\n\n    .cm-avatar {\n      display: block;\n      position: absolute;\n      left: 0;\n      top: $gap * 2;\n\n      .link {\n        $size: 4.8rem;\n        position: relative;\n        display: block;\n        width: $size;\n        height: $size;\n        border: 4px solid $module-bg-lighter;\n        border-radius: $sm-radius;\n        background-color: $module-bg-darker-2;\n\n        img {\n          width: 100%;\n          height: 100%;\n          border-radius: $xs-radius;\n        }\n\n        .role {\n          position: absolute;\n          right: 0;\n          bottom: 0;\n          width: 40%;\n          height: 40%;\n          padding-top: 1px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          border-top-left-radius: $sm-radius;\n          color: $white;\n          &.disqus {\n            background-color: rgba($disqus-primary, 0.5);\n          }\n          &.anonymous {\n            background-color: $module-bg-translucent;\n          }\n        }\n      }\n    }\n\n    .cm-body {\n      display: block;\n      width: 100%;\n      height: 100%;\n      padding: $sm-gap $sm-gap $sm-gap ($lg-gap * 3);\n      background-color: $module-bg-darker-1;\n      border-radius: $xs-radius;\n      @include background-transition();\n\n      > .cm-header {\n        position: relative;\n        display: flex;\n        justify-content: space-between;\n\n        .left {\n          display: flex;\n          align-items: center;\n        }\n\n        .username {\n          font-weight: bold;\n          margin-right: $gap;\n          &.url:hover {\n            @include text-underline();\n          }\n        }\n\n        .moderator {\n          display: inline-block;\n          margin-left: -$sm-gap;\n          margin-right: $sm-gap;\n          padding: 0 $xs-gap 0.1em;\n          font-size: 11px;\n          color: $text-reversal;\n          background-color: $primary-lighter;\n          @include radius-box($xs-radius);\n        }\n\n        .author-info {\n          display: inline-flex;\n          align-items: center;\n          font-size: $font-size-small;\n          color: $text-divider;\n\n          > * {\n            margin-right: $gap;\n            &:last-child {\n              margin-right: 0;\n            }\n          }\n        }\n\n        .flool {\n          color: $text-divider;\n          font-size: $font-size-small;\n          font-weight: bold;\n        }\n      }\n\n      > .cm-content {\n        padding-right: $xs-gap;\n        user-select: text;\n\n        .reply {\n          display: flex;\n          align-items: center;\n          margin-top: $sm-gap;\n          margin-bottom: -$xs-gap;\n          font-size: $font-size-h6;\n          font-weight: bold;\n          color: $text-disabled;\n\n          .text {\n            margin-right: $xs-gap;\n          }\n\n          .parent {\n            font-weight: bold;\n            color: $link-color;\n            &:hover {\n              color: $link-hover;\n            }\n          }\n        }\n\n        .markdown {\n          margin: $sm-gap 0;\n        }\n      }\n\n      .cm-footer {\n        display: flex;\n        justify-content: space-between;\n\n        .create-at,\n        .reply,\n        .vote,\n        .delete {\n          color: $text-disabled;\n          font-size: $font-size-small;\n          margin-right: $gap;\n\n          .iconfont {\n            margin-right: $xs-gap;\n          }\n        }\n\n        .reply {\n          &:hover {\n            color: $link-color;\n          }\n        }\n\n        .vote {\n          &:hover,\n          &.actived {\n            color: $red;\n          }\n          &.actived,\n          &.alived {\n            .count {\n              font-weight: bold;\n            }\n          }\n\n          .count {\n            margin-left: 3px;\n          }\n        }\n\n        .delete {\n          color: $text-divider;\n          margin: 0;\n          &:hover {\n            color: $red;\n          }\n        }\n      }\n    }\n\n    &:hover {\n      .cm-body {\n        background-color: $module-bg-hover;\n      }\n    }\n\n    &.hide-avatar {\n      padding: 0;\n      margin-top: $gap;\n      &.is-child {\n        .cm-content {\n          border-left: 6px solid $module-bg-darker-2;\n          padding-left: 1rem;\n        }\n      }\n\n      .cm-body {\n        padding: $sm-gap $gap;\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { defineComponent, PropType } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useStores } from '/@/stores'\n  import { Comment } from '/@/interfaces/comment'\n  import { CommentTreeItem } from '/@/stores/comment'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { LanguageKey } from '/@/language'\n  import { CommentEvents } from '../helper'\n  import CommentItem from './item.vue'\n\n  // MARK: keep this component as `defineComponent` to use for recursive component\n  export default defineComponent({\n    name: 'CommentList',\n    components: {\n      CommentItem\n    },\n    props: {\n      comments: {\n        type: Array as PropType<Array<CommentTreeItem>>,\n        required: true\n      },\n      replyPid: {\n        type: Number,\n        required: true\n      },\n      isChildList: {\n        type: Boolean,\n        default: false\n      },\n      hiddenAvatar: {\n        type: Boolean,\n        default: false\n      },\n      hiddenUa: {\n        type: Boolean,\n        default: false\n      },\n      plainVote: {\n        type: Boolean,\n        default: false\n      }\n    },\n    emits: [CommentEvents.Reply, CommentEvents.Delete, CommentEvents.CancelReply],\n    setup(_, context) {\n      const { i18n: _i18n, gtag } = useEnhancer()\n      const { comment: commentStore, identity } = useStores()\n\n      const buildeCommentTree = (comments: Comment[]): Array<CommentTreeItem> => {\n        return comments.map((comment) => ({\n          comment,\n          children: []\n        }))\n      }\n\n      const handleReplyComment = (commentId: number) => {\n        context.emit(CommentEvents.Reply, commentId)\n      }\n\n      const handleCancelReply = (commentId: number) => {\n        context.emit(CommentEvents.CancelReply, commentId)\n      }\n\n      const handleDeleteComment = async (commentId: number) => {\n        context.emit(CommentEvents.Delete, commentId)\n      }\n\n      const handleVoteComment = async (commentId: number, isLike: boolean) => {\n        gtag?.event('vote_comment', {\n          event_category: GAEventCategories.Comment,\n          event_label: isLike ? 'like' : 'dislike'\n        })\n        if (isLike && identity.isLikedComment(commentId)) {\n          return false\n        }\n        if (!isLike && identity.isDislikedComment(commentId)) {\n          return false\n        }\n        try {\n          await commentStore.postCommentVote(commentId, isLike ? 1 : -1)\n          isLike ? identity.likeComment(commentId) : identity.dislikeComment(commentId)\n        } catch (error) {\n          const message = _i18n.t(LanguageKey.POST_ACTION_ERROR)\n          console.warn(message, error)\n          alert(message)\n        }\n      }\n\n      return {\n        identity,\n        buildeCommentTree,\n        handleReplyComment,\n        handleCancelReply,\n        handleDeleteComment,\n        handleVoteComment\n      }\n    }\n  })\n</script>\n\n<template>\n  <ul class=\"comment-list\" :class=\"isChildList ? 'child' : 'root'\">\n    <transition-group name=\"list-fade\">\n      <comment-item\n        v-for=\"item in comments\"\n        :key=\"item.comment.id\"\n        :comment=\"item.comment\"\n        :liked=\"identity.isLikedComment(item.comment.id)\"\n        :disliked=\"identity.isDislikedComment(item.comment.id)\"\n        :has-child=\"!!item.children.length\"\n        :is-child=\"isChildList\"\n        :is-reply=\"replyPid === item.comment.id\"\n        :hidden-avatar=\"hiddenAvatar\"\n        :hidden-ua=\"hiddenUa\"\n        :plain-vote=\"plainVote\"\n        @vote=\"handleVoteComment\"\n        @delete=\"handleDeleteComment\"\n        @reply=\"handleReplyComment\"\n        @cancel-reply=\"handleCancelReply\"\n      >\n        <template #reply>\n          <slot name=\"reply\" :comment=\"item.comment\" :is-child=\"false\"></slot>\n        </template>\n        <template #children v-if=\"item.children.length\">\n          <comment-list\n            :comments=\"buildeCommentTree(item.children)\"\n            :is-child-list=\"true\"\n            :hidden-avatar=\"hiddenAvatar\"\n            :hidden-ua=\"hiddenUa\"\n            :plain-vote=\"plainVote\"\n            :reply-pid=\"replyPid\"\n            @delete=\"handleDeleteComment\"\n            @reply=\"handleReplyComment\"\n            @cancel-reply=\"handleCancelReply\"\n          >\n            <template #reply>\n              <slot name=\"reply\" :comment=\"item.comment\" :is-child=\"true\"></slot>\n            </template>\n          </comment-list>\n        </template>\n      </comment-item>\n    </transition-group>\n  </ul>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .comment-list {\n    padding: 0;\n    margin: 0;\n    list-style-type: none;\n\n    &.root {\n    }\n\n    &.child {\n      margin-top: $gap;\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { computed } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { Pagination } from '/@/interfaces/common'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { COMMENT_FOOTER_ELEMENT_ID } from '/@/constants/anchor'\n  import { CommentEvents } from './helper'\n\n  const props = defineProps<{\n    fetching: boolean\n    remain?: number\n    pagination: Pagination | null\n  }>()\n\n  const emit = defineEmits<{\n    (e: CommentEvents.Page, page: number): void\n  }>()\n\n  const { gtag } = useEnhancer()\n  const hasMore = computed(() => {\n    return (\n      props.pagination &&\n      props.pagination?.total_page > 1 &&\n      props.pagination?.current_page !== props.pagination?.total_page\n    )\n  })\n\n  const handleLoadmore = () => {\n    if (props.pagination) {\n      emit(CommentEvents.Page, props.pagination.current_page + 1)\n      gtag?.event('loadmore', {\n        event_category: GAEventCategories.Comment\n      })\n    }\n  }\n</script>\n\n<template>\n  <div class=\"loadmore\" :id=\"COMMENT_FOOTER_ELEMENT_ID\">\n    <transition name=\"module\">\n      <button class=\"button\" v-if=\"hasMore\" :disabled=\"fetching\" @click=\"handleLoadmore\">\n        <i18n v-if=\"fetching\" zh=\"...\" en=\"Loading...\" />\n        <template v-else>\n          <i18n>\n            <template #zh> {{ remain }} </template>\n            <template #en>Loadmore (remain {{ remain }})</template>\n          </i18n>\n          <i class=\"iconfont icon-loadmore\"></i>\n        </template>\n      </button>\n      <span class=\"no-more\" v-else>\n        <i18n zh=\"\" en=\"NO MORE\" />\n      </span>\n    </transition>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .loadmore {\n    margin-top: $lg-gap;\n    margin-bottom: $sm-gap;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    .button {\n      min-width: 10rem;\n      height: 2.8rem;\n      padding: 0 $lg-gap;\n      border-radius: $xs-radius;\n      background-color: $module-bg-darker-1;\n      color: $text-disabled;\n      &:not([disabled]):hover {\n        color: $link-color;\n        background-color: $module-bg-hover;\n      }\n\n      .iconfont {\n        margin-left: $sm-gap;\n      }\n    }\n\n    .no-more {\n      padding-top: $xs-gap;\n      color: $text-disabled;\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { storeToRefs } from 'pinia'\n  import { ref, computed } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { LanguageKey } from '/@/language'\n  import { Author } from '/@/interfaces/comment'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { useIdentityStore, UserType } from '/@/stores/identity'\n  import { getGravatarByHash, getDefaultAvatar, getDisqusAvatarByUsername } from '/@/transforms/avatar'\n  import { CommentEvents } from '../helper'\n\n  enum PublisherEvents {\n    UpdateProfile = 'update:profile'\n  }\n\n  interface Props {\n    id?: string\n    disabled?: boolean\n    profile: Author\n    total?: number\n    bordered?: boolean\n    defaultBlossomed?: boolean\n    hiddenAvatar?: boolean\n    fixedAvatar?: boolean\n  }\n\n  const props = withDefaults(defineProps<Props>(), {\n    total: 0,\n    defaultBlossomed: true\n  })\n\n  const emit = defineEmits<{\n    (e: CommentEvents.Blossom): void\n    (e: PublisherEvents.UpdateProfile, profile: Author): void\n  }>()\n\n  const { i18n: _i18n, gtag } = useEnhancer()\n  const { user } = storeToRefs(useIdentityStore())\n  const avatar = computed(() => {\n    // local user\n    if (user.value.type === UserType.Local) {\n      return getGravatarByHash(user.value.localProfile?.email_hash)\n    }\n    // disqus user\n    if (user.value.type === UserType.Disqus) {\n      return getDisqusAvatarByUsername(user.value.disqusProfile?.username)\n    }\n    // temp user\n    return getDefaultAvatar()\n  })\n\n  const handleUpdateProfile = (key: keyof Author, event: any) => {\n    emit(PublisherEvents.UpdateProfile, {\n      ...props.profile,\n      [key]: event.target.value\n    })\n  }\n\n  const blossomed = ref(props.defaultBlossomed)\n  const handleBlossom = () => {\n    blossomed.value = true\n    emit(CommentEvents.Blossom)\n    gtag?.event('focus_publisher', {\n      event_category: GAEventCategories.Comment\n    })\n  }\n</script>\n\n<template>\n  <form\n    key=\"publisher\"\n    class=\"publisher\"\n    name=\"comment\"\n    :id=\"id\"\n    :class=\"{\n      'hidden-avatar': hiddenAvatar,\n      'fixed-avatar': fixedAvatar,\n      blossomed,\n      bordered\n    }\"\n  >\n    <transition name=\"module-slow\">\n      <div class=\"profile\" v-if=\"user.type === UserType.Null\" v-show=\"blossomed\">\n        <div class=\"name\">\n          <input\n            :value=\"profile.name\"\n            @input=\"handleUpdateProfile('name', $event)\"\n            required\n            type=\"text\"\n            name=\"name\"\n            autocomplete=\"on\"\n            :disabled=\"disabled\"\n            :placeholder=\"_i18n.t(LanguageKey.COMMENT_POST_NAME) + ' *'\"\n          />\n        </div>\n        <div class=\"email\">\n          <input\n            :value=\"profile.email\"\n            @input=\"handleUpdateProfile('email', $event)\"\n            required\n            type=\"email\"\n            name=\"email\"\n            autocomplete=\"on\"\n            :disabled=\"disabled\"\n            :placeholder=\"_i18n.t(LanguageKey.COMMENT_POST_EMAIL) + ' *'\"\n          />\n        </div>\n        <div class=\"site\">\n          <input\n            :value=\"profile.site\"\n            @input=\"handleUpdateProfile('site', $event)\"\n            type=\"url\"\n            name=\"url\"\n            autocomplete=\"on\"\n            :disabled=\"disabled\"\n            :placeholder=\"_i18n.t(LanguageKey.COMMENT_POST_SITE)\"\n          />\n        </div>\n      </div>\n    </transition>\n    <div class=\"postbox\">\n      <div class=\"avatar\" v-if=\"!hiddenAvatar\">\n        <uimage :alt=\"profile.name\" :src=\"avatar\" />\n      </div>\n      <transition name=\"module-slow\">\n        <div class=\"editor\" v-if=\"blossomed\" key=\"editor\">\n          <slot name=\"pen\"></slot>\n        </div>\n        <div class=\"placeholder\" v-else key=\"placeholder\" @click=\"handleBlossom\">\n          <i18n zh=\"...\" :en=\"`${total ? 'Join' : 'Start'} the discussion...`\" />\n        </div>\n      </transition>\n    </div>\n  </form>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  $avatar-size: 4rem;\n\n  .publisher-skeleton {\n    display: flex;\n    height: $avatar-size;\n\n    .avatar {\n      width: $avatar-size;\n      margin-right: $gap;\n    }\n\n    .content {\n      flex-grow: 1;\n    }\n  }\n\n  .publisher {\n    display: block;\n    padding-left: 5.2rem;\n    &.bordered {\n      input {\n        border: 1px solid $module-bg-darker-3;\n      }\n    }\n\n    .profile {\n      width: 100%;\n      height: 2em;\n      line-height: 2em;\n      display: flex;\n      margin-bottom: $gap;\n\n      .name,\n      .email,\n      .site {\n        flex-grow: 1;\n\n        input {\n          width: 100%;\n          height: 2em;\n          line-height: 2em;\n          text-indent: 3px;\n          background-color: $module-bg-darker-1;\n          @include radius-box($mini-radius);\n          @include background-transition();\n\n          &:focus,\n          &:hover {\n            background-color: $module-bg-hover;\n          }\n        }\n      }\n\n      .name,\n      .email {\n        margin-right: $gap;\n      }\n    }\n\n    .postbox {\n      width: 100%;\n      height: $avatar-size;\n      display: flex;\n      position: relative;\n\n      .avatar {\n        position: absolute;\n        top: 0;\n        left: -($avatar-size + $gap);\n        display: block;\n        width: $avatar-size;\n        height: $avatar-size;\n        background-color: $module-bg-darker-1;\n        @include radius-box($xs-radius);\n\n        img {\n          width: 100%;\n          height: 100%;\n          transition: transform 0.5s ease-out;\n        }\n      }\n\n      .editor {\n        flex-grow: 1;\n        overflow: hidden;\n      }\n\n      .placeholder {\n        position: absolute;\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: 100%;\n        padding: 0 1em;\n        display: flex;\n        align-items: center;\n        font-size: $font-size-h4;\n        cursor: text;\n        @include radius-box($xs-radius);\n        background-color: $module-bg-darker-1;\n        &:hover {\n          background-color: $module-bg-darker-3;\n        }\n      }\n    }\n\n    &.blossomed {\n      .postbox {\n        height: auto;\n        min-height: 8rem;\n      }\n    }\n\n    &.hidden-avatar {\n      padding-left: 0;\n\n      .profile {\n        padding: 0;\n        margin: 0;\n        height: auto;\n        flex-direction: column;\n\n        .name,\n        .email,\n        .site {\n          width: 80%;\n          margin-left: 0;\n          margin-right: 0;\n          margin-bottom: $gap;\n        }\n      }\n    }\n\n    &.fixed-avatar {\n      padding-left: 0;\n    }\n  }\n</style>\n","/**\n * @file Editable element util\n * @module util.editable\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const focusPosition = (element: HTMLElement, position = 0) => {\n  if (!element) {\n    return\n  }\n\n  // 1. focus\n  element.focus()\n\n  // 2. position (first text position)\n  if (!position) {\n    const range = window.getSelection()?.getRangeAt(0) as Range\n    const clone = range.cloneRange()\n    clone.selectNodeContents(element)\n    clone.setEnd(range.endContainer, range.endOffset)\n    return clone.toString().length\n  }\n\n  // position\n  let length = 0\n  let abort = false\n\n  const visit = (parentNode: any) => {\n    const nodes = parentNode.childNodes\n    for (let i = 0; i < nodes.length; ++i) {\n      const node = nodes[i]\n      const isNewLine = node.nodeType === 1 && node.tagName === 'BR'\n      if (node.nodeType !== 3 && !isNewLine) {\n        visit(node)\n        return\n      }\n\n      length += isNewLine ? 1 : node.textContent.length\n      if (length >= position) {\n        if (abort) {\n          visit(node)\n          return\n        }\n\n        abort = true\n        const selection = document.getSelection() as Selection\n        const range = document.createRange()\n        const sub = length - node.textContent.length\n        range.setStart(node, position - sub)\n        range.setEnd(node, position - sub)\n        selection.removeAllRanges()\n        selection.addRange(range)\n        break\n      }\n    }\n  }\n  visit(element)\n}\n\nexport interface IncertOption {\n  element: HTMLElement | void\n  content: string | [string, string]\n}\n\nexport const insertContent = (option: IncertOption) => {\n  const { element, content } = option\n  const [before, after] = Array.isArray(content) ? content : [content]\n\n  if (!element || (!before && !after)) {\n    return false\n  }\n\n  // If the text is selected, replace the selected text\n  const currentText = element.innerText\n  const selection = (window.getSelection || document.getSelection)() as Selection\n  const selectedText = selection?.toString()\n  if (selectedText) {\n    // Replaces all selected text, and then locates the last character of the replaced text.\n    // For Selected logic, any single character in a given is understood as a substitution\n    const isInsertReplace = !!before && !after\n    const newSelectedText = isInsertReplace ? before : before + selectedText + after\n    const newText = currentText.replace(selectedText, newSelectedText)\n    element.innerText = newText\n    focusPosition(element, newText.indexOf(newSelectedText) + newSelectedText.length - 1)\n  } else {\n    // Otherwise, add a new element\n    const newInsertText = before + after\n    const selectedRange = (() => {\n      try {\n        return selection.getRangeAt(0)\n      } catch (error) {}\n    })() as Range\n    const startPoint = selectedRange?.startOffset\n    const endPoint = selectedRange?.endOffset\n\n    // Insert new content at the cursor position, then position to the last character of the new content\n    if (selectedRange && startPoint === endPoint && startPoint > 0) {\n      const newTexts = [currentText.slice(0, startPoint), newInsertText, currentText.slice(startPoint)]\n      element.innerText = newTexts.join('')\n      focusPosition(element, newTexts[0].length + newTexts[1].length - 1)\n    } else {\n      // Otherwise append at the end and position to the last character\n      const newText = currentText + newInsertText\n      element.innerText = newText\n      focusPosition(element, newText.length - 1)\n      // TODO:????\n      // element.scrollIntoView()\n      // element?.scrollTop = element?.scrollHeight\n    }\n  }\n}\n","<script lang=\"ts\" setup>\n  import { ref, watch, onBeforeMount, onMounted, onBeforeUnmount, nextTick } from 'vue'\n  import { storeToRefs } from 'pinia'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n  import { LanguageKey } from '/@/language'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useIdentityStore, UserType } from '/@/stores/identity'\n  import { enableCopyrighter, disableCopyrighter } from '/@/effects/copyright'\n  import { focusPosition } from '/@/utils/editable'\n  import { insertContent } from '/@/utils/editable'\n  import { CommentEvents, EMOJIS } from '../helper'\n  import Markdown from '/@/components/common/markdown.vue'\n\n  enum PenEvents {\n    Update = 'update:modelValue',\n    UpdatePreviewed = 'update:previewed'\n  }\n\n  const props = defineProps<{\n    posting: boolean\n    modelValue?: string\n    disabled?: boolean\n    previewed?: boolean\n    bordered?: boolean\n    autoFocus?: boolean\n    hiddenStationery?: boolean\n  }>()\n\n  const emit = defineEmits<{\n    (e: PenEvents.Update, text: string): void\n    (e: PenEvents.UpdatePreviewed, previewed: boolean): void\n    (e: CommentEvents.Submit, text: string): void\n  }>()\n\n  const { i18n: _i18n } = useEnhancer()\n  const { user } = storeToRefs(useIdentityStore())\n  const content = ref(props.modelValue || '')\n  const isPreviewed = ref(props.previewed || false)\n  const inputElement = ref<HTMLElement>()\n  let inputElementObserver: MutationObserver | null = null\n\n  const handleTogglePreview = () => {\n    isPreviewed.value = !isPreviewed.value\n    emit(PenEvents.UpdatePreviewed, isPreviewed.value)\n  }\n\n  const handleInputChange = () => {\n    const text = inputElement.value?.innerText as string\n    if (text !== content.value) {\n      content.value = text\n      emit(PenEvents.Update, text)\n    }\n  }\n\n  const handleSubmit = (event) => {\n    event.preventDefault()\n    emit(CommentEvents.Submit, content.value)\n  }\n\n  const insertContentToInput = (before: string, after = '') => {\n    insertContent({\n      element: inputElement.value,\n      content: [before, after]\n    })\n    handleInputChange()\n  }\n\n  const insertEmoji = (emoji: any) => {\n    insertContentToInput(` ${emoji} `)\n  }\n  const insertImage = () => {\n    insertContentToInput(` ![`, `](https://) `)\n  }\n  const insertLink = () => {\n    insertContentToInput(` [`, `](https://) `)\n  }\n  const insertCode = () => {\n    insertContentToInput('\\n```javascript\\n', '\\n```\\n')\n  }\n\n  onBeforeMount(() => {\n    watch(\n      () => props.modelValue,\n      (value = '') => {\n        if (value !== content.value) {\n          content.value = value\n          if (inputElement.value) {\n            inputElement.value.innerText = value\n          }\n        }\n      }\n    )\n  })\n\n  onBeforeMount(() => {\n    watch(\n      () => props.previewed,\n      (value) => {\n        if (value !== isPreviewed.value) {\n          isPreviewed.value = value\n        }\n      }\n    )\n  })\n\n  onMounted(() => {\n    // auto focus\n    if (props.autoFocus) {\n      nextTick().then(() => {\n        if (inputElement.value) {\n          focusPosition(inputElement.value)\n        }\n      })\n    }\n    // watch element\n    inputElementObserver = new MutationObserver(() => handleInputChange())\n    inputElementObserver.observe(inputElement.value!, {\n      attributes: true,\n      characterData: true,\n      childList: true,\n      subtree: true\n    })\n  })\n\n  onBeforeUnmount(() => {\n    inputElementObserver?.disconnect()\n  })\n</script>\n\n<template>\n  <div class=\"pen\" :class=\"{ bordered }\">\n    <div class=\"markdown\">\n      <div\n        ref=\"inputElement\"\n        class=\"markdown-input\"\n        :contenteditable=\"!disabled\"\n        :placeholder=\"_i18n.t(LanguageKey.COMMENT_POST_PLACEHOLDER)\"\n        @focus=\"disableCopyrighter\"\n        @blur=\"enableCopyrighter\"\n      />\n      <transition name=\"list-fade\">\n        <div class=\"preview-content\" v-if=\"isPreviewed\">\n          <markdown :markdown=\"content\" :sanitize=\"true\" :compact=\"true\" />\n        </div>\n      </transition>\n    </div>\n    <div class=\"pencilbox\">\n      <div class=\"stationery\">\n        <ulink class=\"markdown\" title=\"markdown\" :href=\"VALUABLE_LINKS.MARKDOWN\">\n          <i class=\"iconfont icon-markdown\" />\n        </ulink>\n        <template v-if=\"!hiddenStationery\">\n          <button class=\"emoji\" title=\"emoji\" type=\"button\" :disabled=\"disabled || isPreviewed\">\n            <i class=\"iconfont icon-emoji\" />\n            <div class=\"emoji-box\">\n              <ul class=\"emoji-list\">\n                <li v-for=\"(emoji, index) in EMOJIS\" v-once :key=\"index\" class=\"item\" @click=\"insertEmoji(emoji)\">\n                  {{ emoji }}\n                </li>\n              </ul>\n            </div>\n          </button>\n          <button class=\"image\" title=\"image\" :disabled=\"disabled || isPreviewed\" @click.prevent=\"insertImage\">\n            <i class=\"iconfont icon-image\" />\n          </button>\n          <button class=\"link\" title=\"link\" :disabled=\"disabled || isPreviewed\" @click.prevent=\"insertLink\">\n            <i class=\"iconfont icon-link\" />\n          </button>\n          <button class=\"code\" title=\"code\" :disabled=\"disabled || isPreviewed\" @click.prevent=\"insertCode\">\n            <i class=\"iconfont icon-code\" />\n          </button>\n          <button\n            class=\"preview\"\n            title=\"preview\"\n            :class=\"{ actived: isPreviewed }\"\n            :disabled=\"disabled\"\n            @click.prevent=\"handleTogglePreview\"\n          >\n            <i class=\"iconfont\" :class=\"isPreviewed ? 'icon-eye-close' : 'icon-eye'\" />\n          </button>\n        </template>\n      </div>\n      <button type=\"submit\" class=\"submit\" :disabled=\"disabled\" @click=\"handleSubmit\">\n        <i18n zh=\"...\" en=\"Posting...\" v-if=\"posting\" />\n        <i18n v-else-if=\"user.type === UserType.Local\">\n          <template #zh> {{ user.localProfile?.name }} </template>\n          <template #en>Post as {{ user.localProfile?.name }}</template>\n        </i18n>\n        <i18n v-else-if=\"user.type === UserType.Disqus\">\n          <template #zh> {{ user.disqusProfile?.name }} </template>\n          <template #en>Post as {{ user.disqusProfile?.name }}</template>\n        </i18n>\n        <i18n zh=\"\" en=\"Publish\" v-else />\n        <i class=\"iconfont icon-mail-plane\"></i>\n      </button>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .pen {\n    position: relative;\n    @include radius-box($xs-radius);\n    &.bordered {\n      border: 1px solid $module-bg-darker-3;\n      .pencilbox {\n        border-top: 1px solid $module-bg-darker-3;\n      }\n    }\n\n    .markdown {\n      position: relative;\n      overflow: hidden;\n\n      .markdown-input {\n        min-height: 6em;\n        max-height: 36em;\n        overflow: auto;\n        outline: none;\n        padding: 0.5em;\n        cursor: auto;\n        font-size: $font-size-h6;\n        line-height: 1.8em;\n        background-color: $module-bg-darker-1;\n        @include background-transition();\n\n        &:empty:before {\n          content: attr(placeholder);\n          color: $text-disabled;\n        }\n        &:focus {\n          content: none;\n        }\n        &:hover {\n          background-color: $module-bg-hover;\n        }\n      }\n\n      .preview-content {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        overflow: auto;\n        margin: 0;\n        padding: 0.5em;\n        background-color: $module-bg-darker-1;\n      }\n    }\n\n    .pencilbox {\n      $size: 30px;\n      height: $size;\n      line-height: $size;\n      display: flex;\n      justify-content: space-between;\n      background-color: $module-bg-darker-2;\n\n      .stationery {\n        display: flex;\n\n        .emoji,\n        .image,\n        .link,\n        .code,\n        .preview {\n          width: $size;\n          height: $size;\n          text-align: center;\n          display: block;\n          @include background-transition();\n\n          &[disabled] {\n            opacity: 0.7;\n          }\n\n          &:not([disabled]) {\n            &.actived,\n            &:hover {\n              background-color: $module-bg-darker-4;\n            }\n          }\n        }\n\n        .markdown {\n          width: 4rem;\n          text-align: center;\n          background-color: $module-bg-darker-3;\n        }\n\n        .emoji {\n          &:not([disabled]):hover {\n            .emoji-box {\n              display: block;\n            }\n          }\n\n          .emoji-box {\n            display: none;\n            position: absolute;\n            bottom: $size;\n            left: 0;\n            top: 0;\n            width: 100%;\n            overflow-y: auto;\n            background-color: $module-bg;\n\n            .emoji-list {\n              list-style: none;\n              padding: 0;\n              margin: 0;\n              font-size: $font-size-h3;\n              display: grid;\n              grid-template-columns: repeat(auto-fill, 45px);\n\n              .item {\n                cursor: pointer;\n                padding: $xs-gap 0;\n                font-size: $font-size-h2;\n                border-radius: $sm-radius;\n                @include background-transition();\n                &:hover {\n                  background-color: $module-bg-hover;\n                }\n              }\n            }\n          }\n        }\n      }\n\n      .submit {\n        min-width: 8rem;\n        height: $size;\n        padding: 0 $gap;\n        font-weight: bold;\n        font-size: $font-size-small;\n        color: $text-disabled;\n        background-color: $module-bg-darker-3;\n        @include background-transition();\n        &:hover {\n          color: $text-secondary;\n          background-color: $module-bg-darker-4;\n        }\n\n        .iconfont {\n          margin-left: $sm-gap;\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { ref, reactive, computed, watch, toRaw, onBeforeMount, onBeforeUnmount, onUnmounted, nextTick } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useIdentityStore, UserType } from '/@/stores/identity'\n  import { useCommentStore, CommentFetchParams } from '/@/stores/comment'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import * as ANCHOR from '/@/constants/anchor'\n  import { UNDEFINED } from '/@/constants/value'\n  import { SortType } from '/@/constants/state'\n  import { Author } from '/@/interfaces/comment'\n  import { LanguageKey } from '/@/language'\n  import { scrollToAnchor } from '/@/utils/scroller'\n  import { luanchEmojiRain } from './helper'\n  import CommentTopbar from './topbar.vue'\n  import CommentMain from './list/main.vue'\n  import CommentList from './list/list.vue'\n  import CommentLoadmore from './loadmore.vue'\n  import CommentPublisherMain from './publisher/main.vue'\n  import CommentPublisher from './publisher/publisher.vue'\n  import CommentPen from './publisher/pen.vue'\n\n  export interface Props {\n    postId: number\n    fetching?: boolean\n    plain?: boolean\n  }\n\n  const props = withDefaults(defineProps<Props>(), {\n    fetching: false,\n    plain: false\n  })\n\n  const { i18n, gtag, gState } = useEnhancer()\n  const identityStore = useIdentityStore()\n  const commentStore = useCommentStore()\n\n  const isPosting = computed(() => commentStore.posting)\n  const isFetching = computed(() => commentStore.fetching)\n  const isLoading = computed(() => {\n    return props.fetching || (!commentStore.comments.length && commentStore.fetching)\n  })\n\n  enum PostKey {\n    Root = 'root',\n    Reply = 'reply'\n  }\n  const postingKey = ref<PostKey>()\n  const isRootPosting = computed(() => isPosting.value && postingKey.value === PostKey.Root)\n  const isReplyPosting = computed(() => isPosting.value && postingKey.value === PostKey.Reply)\n\n  const commentState = reactive({\n    sort: SortType.Desc,\n    replyPId: 0\n  })\n\n  const guestProfile = ref<Author>({\n    name: '',\n    email: '',\n    site: ''\n  })\n\n  const rootPenState = reactive({\n    content: '',\n    previewed: false\n  })\n\n  const clearRootPenContent = () => {\n    rootPenState.content = ''\n  }\n  const closeRootPenPreview = () => {\n    rootPenState.previewed = false\n  }\n\n  const cancelCommentReply = () => {\n    commentState.replyPId = 0\n  }\n  const replyComment = (commentId: number) => {\n    commentState.replyPId = commentId\n    gtag?.event('reply_comment', {\n      event_category: GAEventCategories.Comment\n    })\n  }\n\n  const fetchCommentList = (params: CommentFetchParams = {}, loadmore?: boolean) => {\n    const _params = {\n      ...params,\n      sort: commentState.sort,\n      post_id: props.postId\n    }\n    return commentStore.fetchList(_params, loadmore)\n  }\n\n  const fetchSortComments = (sort: SortType) => {\n    if (commentState.sort !== sort) {\n      commentState.sort = sort\n      fetchCommentList()\n      scrollToAnchor(ANCHOR.COMMENT_ELEMENT_ID)\n    }\n  }\n\n  const fetchPageComments = (page: number) => {\n    const comments = commentStore.comments\n    const lastCommentId = ANCHOR.getCommentItemElementId(comments[comments.length - 2].id)\n    fetchCommentList({ page }, true).then(() => {\n      nextTick().then(() => {\n        scrollToAnchor(lastCommentId)\n      })\n    })\n  }\n\n  const handleDeleteComment = (commentId: number) => {\n    commentStore.deleteComment(commentId).catch((error) => {\n      console.warn('delete comment failed', error)\n      alert(error.message)\n    })\n  }\n\n  const createComment = async (payload: { content: string; pid: number }) => {\n    gtag?.event('submit_comment', {\n      event_category: GAEventCategories.Comment\n    })\n\n    // content length\n    if (!payload.content || !payload.content.trim()) {\n      throw `${i18n.t(LanguageKey.COMMENT_POST_CONTENT)} ?`\n    }\n    if (payload.content.length > 3000) {\n      throw `${i18n.t(LanguageKey.COMMENT_POST_ERROR_CONTENT)} ?`\n    }\n\n    // temp user profile\n    const isGuest = identityStore.user.type === UserType.Null\n    const guestProfileValue = guestProfile.value\n    if (isGuest) {\n      if (!guestProfileValue.name) {\n        throw i18n.t(LanguageKey.COMMENT_POST_NAME) + '?'\n      }\n      if (!guestProfileValue.email) {\n        throw i18n.t(LanguageKey.COMMENT_POST_EMAIL) + '?'\n      }\n    }\n\n    const author: Author = isGuest\n      ? toRaw(guestProfileValue)\n      : identityStore.user.type === UserType.Local\n      ? identityStore.user.localProfile!\n      : {\n          name: identityStore.user.disqusProfile.name,\n          site: identityStore.user.disqusProfile.url\n        }\n    if (!author.email) {\n      Reflect.deleteProperty(author, 'email')\n    }\n    if (!author.site) {\n      Reflect.deleteProperty(author, 'site')\n    }\n\n    try {\n      const newComment = await commentStore.postComment({\n        pid: payload.pid,\n        post_id: props.postId,\n        content: payload.content,\n        agent: gState.userAgent.original,\n        author\n      })\n      // set user profile\n      if (isGuest) {\n        identityStore.saveLocalUser({\n          ...author,\n          email_hash: newComment.author.email_hash\n        })\n      }\n      // random emoji rain\n      luanchEmojiRain(payload.content)\n    } catch (error: any) {\n      console.warn('submit comment failed:', error)\n      throw error.message\n    }\n  }\n\n  const validateFormById = (formId: string) => {\n    const formElement = document.getElementById(formId)! as HTMLFormElement\n    const check_status = formElement.checkValidity()\n    formElement.reportValidity()\n    return check_status ? Promise.resolve() : Promise.reject()\n  }\n\n  const handleRootSubmit = async (content: string) => {\n    await validateFormById(ANCHOR.COMMENT_PUBLISHER_ELEMENT_ID)\n    postingKey.value = PostKey.Root\n    try {\n      await createComment({ content, pid: 0 })\n      closeRootPenPreview()\n      clearRootPenContent()\n    } catch (error: any) {\n      alert(error)\n    } finally {\n      postingKey.value = UNDEFINED\n    }\n  }\n\n  const handleReplySubmit = async (content: string) => {\n    await validateFormById(ANCHOR.COMMENT_REPLY_PUBLISHER_ELEMENT_ID)\n    postingKey.value = PostKey.Reply\n    try {\n      await createComment({ content, pid: commentState.replyPId })\n      cancelCommentReply()\n    } catch (error: any) {\n      alert(error)\n    } finally {\n      postingKey.value = UNDEFINED\n    }\n  }\n\n  onBeforeMount(() => {\n    watch(isLoading, (isFetching) => {\n      if (isFetching) {\n        cancelCommentReply()\n      }\n    })\n  })\n\n  onUnmounted(() => {\n    commentStore.clearList()\n  })\n\n  onBeforeUnmount(() => {\n    cancelCommentReply()\n  })\n</script>\n\n<template>\n  <div :id=\"ANCHOR.COMMENT_ELEMENT_ID\" class=\"comment-box\">\n    <comment-topbar\n      :total=\"commentStore.pagination?.total\"\n      :loaded=\"commentStore.comments.length\"\n      :post-id=\"postId\"\n      :fetching=\"fetching\"\n      :loading=\"isLoading\"\n      :plain=\"plain\"\n      :sort=\"commentState.sort\"\n      @sort=\"fetchSortComments\"\n    />\n    <divider class=\"divider\" size=\"lg\" />\n    <comment-publisher-main :fetching=\"fetching\">\n      <comment-publisher\n        v-model:profile=\"guestProfile\"\n        :id=\"ANCHOR.COMMENT_PUBLISHER_ELEMENT_ID\"\n        :disabled=\"isLoading || isRootPosting\"\n        :total=\"commentStore.pagination?.total\"\n        :default-blossomed=\"plain ? true : false\"\n        :hidden-avatar=\"plain\"\n      >\n        <template #pen>\n          <comment-pen\n            v-model=\"rootPenState.content\"\n            v-model:previewed=\"rootPenState.previewed\"\n            :auto-focus=\"plain ? false : true\"\n            :hidden-stationery=\"plain\"\n            :disabled=\"isRootPosting || isLoading\"\n            :posting=\"isRootPosting\"\n            @submit=\"handleRootSubmit\"\n          />\n        </template>\n      </comment-publisher>\n    </comment-publisher-main>\n    <divider class=\"divider\" size=\"lg\" />\n    <comment-main\n      :fetching=\"isLoading\"\n      :skeleton-count=\"plain ? 3 : 5\"\n      :has-data=\"Boolean(commentStore.commentTreeList.length)\"\n    >\n      <template #list>\n        <comment-list\n          :comments=\"commentStore.commentTreeList\"\n          :reply-pid=\"commentState.replyPId\"\n          :hidden-avatar=\"plain\"\n          :hidden-ua=\"plain\"\n          :plain-vote=\"plain\"\n          @delete=\"handleDeleteComment\"\n          @reply=\"replyComment\"\n          @cancel-reply=\"cancelCommentReply\"\n        >\n          <template #reply=\"payload\">\n            <comment-publisher\n              v-model:profile=\"guestProfile\"\n              :id=\"ANCHOR.COMMENT_REPLY_PUBLISHER_ELEMENT_ID\"\n              :disabled=\"false\"\n              :bordered=\"true\"\n              :default-blossomed=\"true\"\n              :hidden-avatar=\"plain\"\n              :fixed-avatar=\"payload.isChild\"\n            >\n              <template #pen>\n                <comment-pen\n                  :posting=\"isReplyPosting\"\n                  :bordered=\"true\"\n                  :auto-focus=\"true\"\n                  :hidden-stationery=\"plain\"\n                  @submit=\"handleReplySubmit\"\n                />\n              </template>\n            </comment-publisher>\n          </template>\n        </comment-list>\n      </template>\n      <template #pagination>\n        <comment-loadmore\n          :fetching=\"isFetching\"\n          :pagination=\"commentStore.pagination\"\n          :remain=\"commentStore.pagination ? commentStore.pagination?.total - commentStore.comments.length : 0\"\n          @page=\"fetchPageComments\"\n        />\n      </template>\n    </comment-main>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .comment-box {\n    padding: $gap;\n    @include common-bg-module();\n    @include radius-box($lg-radius);\n\n    .divider {\n      border-color: $module-bg-darker-1 !important;\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { ref, computed, nextTick, onMounted, onUpdated } from 'vue'\n  import { LanguageKey } from '/@/language'\n  import { Article } from '/@/interfaces/article'\n  import { useArticleDetailStore } from '/@/stores/article'\n  import { isOriginalType, isHybridType, isReprintType } from '/@/transforms/state'\n  import { numberSplit } from '/@/transforms/text'\n  import Markdown from '/@/components/common/markdown.vue'\n\n  enum Events {\n    Rendered = 'rendered'\n  }\n\n  const props = defineProps<{\n    article: Article\n    readmoreId: string\n  }>()\n\n  const emit = defineEmits<{\n    (e: Events.Rendered, v: HTMLDivElement): void\n  }>()\n\n  const ctxStore = useArticleDetailStore()\n  const isHybrid = computed(() => isHybridType(props.article.origin!))\n  const isReprint = computed(() => isReprintType(props.article.origin!))\n  const isOriginal = computed(() => isOriginalType(props.article.origin!))\n\n  const element = ref<HTMLDivElement>()\n  const isRenderMoreContent = ref(false)\n  const isRenderMoreEnabled = computed(() => ctxStore.isLongContent && !ctxStore.renderedFullContent)\n\n  const handleRenderMore = () => {\n    isRenderMoreContent.value = true\n    nextTick(() => {\n      setTimeout(() => {\n        ctxStore.renderFullContent()\n        isRenderMoreContent.value = false\n      }, 0)\n    })\n  }\n\n  const handleFullContentRendered = () => {\n    emit(Events.Rendered, element.value!)\n  }\n\n  onMounted(() => handleFullContentRendered())\n  onUpdated(() => handleFullContentRendered())\n</script>\n\n<template>\n  <div ref=\"element\" class=\"detail\">\n    <transition name=\"module\">\n      <div\n        class=\"oirigin\"\n        :class=\"{\n          original: isOriginal,\n          reprint: isReprint,\n          hybrid: isHybrid\n        }\"\n      >\n        <i18n :k=\"LanguageKey.ORIGIN_ORIGINAL\" v-if=\"isOriginal\" />\n        <i18n :k=\"LanguageKey.ORIGIN_REPRINT\" v-else-if=\"isReprint\" />\n        <i18n :k=\"LanguageKey.ORIGIN_HYBRID\" v-else-if=\"isHybrid\" />\n      </div>\n    </transition>\n    <div class=\"knowledge\" key=\"knowledge\">\n      <div class=\"title\">\n        <h2 class=\"text\">{{ article.title }}</h2>\n        <div class=\"meta\">\n          <i class=\"iconfont icon-t\"></i>\n          <i18n\n            :zh=\"` ${numberSplit(ctxStore.contentLength)}  ${ctxStore.readMinutes} `\"\n            :en=\"`${numberSplit(ctxStore.contentLength)} words, ${ctxStore.readMinutes} min read`\"\n          />\n          <responsive desktop>\n            <divider type=\"vertical\" class=\"vertical\" />\n            <span>\n              <i class=\"iconfont icon-clock-outline\"></i>\n              <udate to=\"YMDm\" :date=\"article.created_at\" separator=\"/\" />\n            </span>\n          </responsive>\n          <divider type=\"vertical\" class=\"vertical\" />\n          <span>\n            <i class=\"iconfont icon-eye\"></i>\n            <span>{{ numberSplit(article.meta.views) }}&nbsp;</span>\n            <i18n :k=\"LanguageKey.ARTICLE_VIEWS\" />\n          </span>\n        </div>\n      </div>\n      <markdown :html=\"ctxStore.defaultContent?.html\" />\n      <transition name=\"module\" mode=\"out-in\" @after-enter=\"handleFullContentRendered\">\n        <div :id=\"readmoreId\" v-if=\"isRenderMoreEnabled\" class=\"readmore\">\n          <button class=\"readmore-btn\" :disabled=\"isRenderMoreContent\" @click=\"handleRenderMore\">\n            <i18n :k=\"isRenderMoreContent ? LanguageKey.ARTICLE_RENDERING : LanguageKey.ARTICLE_READ_ALL\" />\n            <i class=\"iconfont icon-loadmore\"></i>\n          </button>\n        </div>\n        <markdown v-else-if=\"ctxStore.renderedFullContent\" :html=\"ctxStore.moreContent?.html\" />\n      </transition>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .detail {\n    padding: 1rem 2rem;\n    position: relative;\n    overflow: hidden;\n    height: auto;\n    transition: height $transition-time-normal;\n\n    .oirigin {\n      position: absolute;\n      top: 0.6rem;\n      left: -2.4rem;\n      transform: rotate(-45deg);\n      width: 8rem;\n      height: 2rem;\n      line-height: 2rem;\n      text-align: center;\n      transform-origin: center;\n      color: $white;\n      font-weight: bold;\n      font-size: $font-size-small;\n      background-color: var(--color);\n      &.original {\n        --color: #{rgba($surmon, 0.7)};\n      }\n      &.hybrid {\n        --color: #{rgba($accent, 0.7)};\n      }\n      &.reprint {\n        --color: #{rgba($red, 0.7)};\n      }\n    }\n\n    .knowledge {\n      user-select: text;\n      position: relative;\n\n      .title {\n        margin: 1em 0 1.5em 0;\n        text-align: center;\n\n        .text {\n          font-weight: 700;\n          font-size: $font-size-h2 * 0.95;\n          margin-bottom: $gap;\n        }\n\n        .meta {\n          display: inline-block;\n          color: $text-disabled;\n          font-size: $font-size-small;\n          user-select: none;\n          line-height: 2;\n          .iconfont {\n            margin-right: $xs-gap;\n          }\n          .vertical {\n            top: -1px;\n          }\n        }\n      }\n\n      .readmore {\n        position: absolute;\n        bottom: 0;\n        width: 100%;\n        height: 18rem;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        background: linear-gradient(to top, $module-bg-hover, transparent);\n\n        .readmore-btn {\n          width: 80%;\n          height: 3rem;\n          margin-top: 2rem;\n          line-height: 3rem;\n          text-align: center;\n          color: $text-reversal;\n          background-color: $primary-lighter;\n          @include background-transition();\n          @include radius-box($xs-radius);\n\n          &[disabled] {\n            cursor: no-drop;\n          }\n\n          &:hover {\n            background-color: $primary;\n          }\n\n          .iconfont {\n            margin-left: $sm-gap;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { computed } from 'vue'\n  import { Article } from '/@/interfaces/article'\n  import { getTagEnName } from '/@/stores/tag'\n  import { copy } from '/@/utils/clipboard'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { dateToYMD } from '/@/transforms/moment'\n  import { getPageURL } from '/@/transforms/url'\n  import {\n    getArticleDetailRoute,\n    getCategoryFlowRoute,\n    getTagFlowRoute,\n    getDateFlowRoute\n  } from '/@/transforms/route'\n\n  const props = defineProps<{\n    article: Article\n    plain?: boolean\n  }>()\n\n  const articleURL = computed(() => {\n    return getPageURL(getArticleDetailRoute(props.article.id))\n  })\n</script>\n\n<template>\n  <div class=\"meta\" :class=\"{ plain }\">\n    <div class=\"actions\">\n      <slot name=\"action\"></slot>\n    </div>\n    <div class=\"line\">\n      <i18n zh=\"\" en=\"Published at\" />\n      <router-link\n        class=\"link date\"\n        :title=\"article.created_at\"\n        :to=\"getDateFlowRoute(dateToYMD(new Date(article.created_at)))\"\n      >\n        <udate to=\"YMDm\" :date=\"article.created_at\" separator=\"/\" />\n      </router-link>\n      <i18n zh=\"\" en=\"in\" />\n      <span v-for=\"(category, index) in article.categories\" :key=\"index\">\n        <router-link\n          class=\"link category\"\n          :title=\"`${firstUpperCase(category.slug)} | ${category.description}`\"\n          :to=\"getCategoryFlowRoute(category.slug)\"\n        >\n          <i18n :zh=\"category.name\" :en=\"firstUpperCase(category.slug)\" />\n        </router-link>\n        <span v-if=\"article.categories[index + 1]\">\n          <i18n zh=\"\" en=\",\" />\n        </span>\n      </span>\n      <span v-if=\"!article.categories.length\">\n        <i18n zh=\"\" en=\"(no catgory)\" />\n      </span>\n      <template v-if=\"plain\"><br /></template>\n      <template v-else><divider type=\"vertical\" size=\"sm\" /></template>\n      <span v-for=\"(tag, index) in article.tags\" :key=\"index\">\n        <router-link\n          class=\"link tag\"\n          :title=\"`${getTagEnName(tag)} | ${tag.description}`\"\n          :to=\"getTagFlowRoute(tag.slug)\"\n        >\n          <i18n :zh=\"`#${tag.name}`\" :en=\"`#${getTagEnName(tag)}`\" />\n        </router-link>\n        <span v-if=\"article.tags[index + 1]\">\n          <i18n zh=\"\" en=\",\" />\n        </span>\n      </span>\n    </div>\n    <div class=\"line\">\n      <i class=\"icon iconfont icon-creative-commons\"></i>\n      <i18n>\n        <template #zh>\n          <ulink class=\"link copyright\" href=\"https://creativecommons.org/licenses/by-nc/4.0/deed.zh\">\n             -  - \n          </ulink>\n        </template>\n        <template #en>\n          <ulink class=\"link copyright\" href=\"https://creativecommons.org/licenses/by-nc/4.0/deed.en\">\n            Creative Commons BY-NC 4.0\n          </ulink>\n        </template>\n      </i18n>\n      <template v-if=\"plain\"><br /></template>\n      <template v-else><divider type=\"vertical\" /></template>\n      <span class=\"link permalink\" @click=\"copy(articleURL)\">\n        {{ articleURL }}\n      </span>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @use 'sass:math';\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .meta {\n    position: relative;\n    padding: 2rem;\n    text-align: center;\n    &.plain {\n      .line {\n        height: auto;\n        line-height: 2;\n      }\n    }\n\n    .actions {\n      margin-top: $sm-gap;\n      margin-bottom: 2rem;\n    }\n\n    .line {\n      $size: 2rem;\n      height: $size;\n      line-height: $size;\n      margin-bottom: $lg-gap;\n      font-weight: bold;\n      color: $text-secondary;\n      &:last-child {\n        margin: 0;\n      }\n\n      .icon {\n        font-weight: normal;\n        font-size: $font-size-h6;\n        margin-right: $xs-gap;\n      }\n\n      .link {\n        &:hover {\n          @include text-underline();\n        }\n\n        &.date,\n        &.category,\n        &.tag {\n          margin: 0 $xs-gap;\n          color: $text;\n          &:hover {\n            color: $link-hover;\n          }\n        }\n\n        &.date {\n          text-transform: uppercase;\n        }\n\n        &.copyright,\n        &.permalink {\n          color: $text-secondary;\n          &:hover {\n            color: $text;\n          }\n        }\n\n        &.permalink {\n          @include text-underline();\n          cursor: pointer;\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { ref } from 'vue'\n\n  enum ArticleUpvoteEvents {\n    Like = 'like',\n    Sponsor = 'sponsor'\n  }\n\n  const props = defineProps<{\n    likes: number\n    isLiked: boolean\n    hiddenSponsor?: boolean\n    enabledParkinson?: boolean\n  }>()\n\n  const emit = defineEmits<{\n    (e: ArticleUpvoteEvents.Like, cb: () => void): void\n    (e: ArticleUpvoteEvents.Sponsor): void\n  }>()\n\n  const newliked = ref(false)\n  const handleLike = () => {\n    if (!props.isLiked) {\n      emit(ArticleUpvoteEvents.Like, () => {\n        newliked.value = true\n      })\n    }\n  }\n\n  const handleSponsor = () => {\n    emit(ArticleUpvoteEvents.Sponsor)\n  }\n</script>\n\n<template>\n  <div class=\"upvote\">\n    <div class=\"wrapper\">\n      <button\n        class=\"button like\"\n        :class=\"{ liked: isLiked, parkinson: enabledParkinson, newliked: newliked }\"\n        :disabled=\"isLiked\"\n        @click=\"handleLike\"\n      >\n        <i class=\"icon iconfont icon-like\"></i>\n        <span class=\"text\">\n          <i18n>\n            <template #zh>{{ likes }}</template>\n            <template #en>{{ isLiked ? 'Upvoted' : 'Upvote' }} {{ likes }}</template>\n          </i18n>\n        </span>\n        <template v-if=\"enabledParkinson\">\n          <span class=\"parkinson-mask\">\n            <i class=\"iconfont\" :class=\"newliked ? 'icon-like' : 'icon-like-pre'\"></i>\n          </span>\n          <div class=\"parkinson-likes\">+ 1</div>\n        </template>\n      </button>\n      <button v-if=\"!hiddenSponsor\" class=\"button sponsor\" @click=\"handleSponsor\">\n        <i class=\"icon iconfont icon-heart\"></i>\n      </button>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @use 'sass:math';\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .upvote {\n    display: flex;\n    justify-content: center;\n    $button-size: 3rem;\n    $button-radius: $sm-radius;\n    $like-icon-size: $font-size-h2;\n    /* https://github.com/ant-design/ant-design/blob/master/components/style/themes/variable.less#L121 */\n    $lighter-red: mix($white, $red, 10%);\n\n    .wrapper {\n      position: relative;\n\n      .button {\n        display: inline-flex;\n        justify-content: center;\n        align-items: center;\n        height: $button-size;\n        line-height: $button-size;\n        padding: 0 $gap;\n        border-width: 1px 0;\n        border-color: $lighter-red;\n        color: $lighter-red;\n        transition:\n          background-color $transition-time-fast,\n          color $transition-time-fast;\n        &[disabled] {\n          color: $white;\n          background-color: $lighter-red;\n          &:not(.newliked) {\n            opacity: 0.8;\n          }\n        }\n        &:not([disabled]):not(.parkinson):hover {\n          color: $white;\n          background-color: $lighter-red;\n        }\n        &:first-of-type {\n          border-left-width: 1px;\n          border-top-left-radius: $button-radius;\n          border-bottom-left-radius: $button-radius;\n        }\n        &:last-of-type {\n          border-right-width: 1px;\n          border-top-right-radius: $button-radius;\n          border-bottom-right-radius: $button-radius;\n        }\n        & + button {\n          border-left-width: 1px;\n        }\n\n        &.sponsor {\n          font-size: $font-size-h4;\n        }\n        &.like {\n          min-width: 8rem;\n          .icon {\n            font-size: $like-icon-size;\n          }\n          .text {\n            margin-left: $sm-gap;\n            font-weight: bold;\n          }\n        }\n      }\n\n      .button.like.parkinson {\n        .parkinson-mask {\n          position: absolute;\n          top: 0;\n          left: 0;\n          z-index: 1;\n          width: 100%;\n          height: 100%;\n          display: flex;\n          line-height: $button-size;\n          padding: 0 $gap;\n          border-radius: $button-radius;\n          font-size: $like-icon-size + 1;\n          background-color: $red;\n          color: $white;\n          @include hidden();\n        }\n\n        .parkinson-likes {\n          position: absolute;\n          bottom: 0;\n          left: 10%;\n          color: $red;\n          font-size: 100px;\n          font-weight: bold;\n          transition: all $transition-time-normal;\n          @include hidden();\n        }\n\n        &:not([disabled]):hover,\n        &.newliked {\n          /* parkinson animate */\n          .parkinson-mask {\n            transition:\n              opacity $transition-time-normal,\n              visibility $transition-time-normal;\n            transition-delay: $transition-time-fast;\n            @include visible();\n            @keyframes pre-like-icon {\n              0% {\n                transform: rotate(6deg) translateY(-2px) translateX(-40%);\n              }\n              20% {\n                transform: rotate(8deg) translateY(0px) translateX(-43%);\n              }\n              40% {\n                transform: rotate(8deg) translateY(-3px) translateX(-48%);\n              }\n              60% {\n                transform: rotate(6deg) translateY(0px) translateX(-43%);\n              }\n              80% {\n                transform: rotate(10deg) translateY(2px) translateX(-50%);\n              }\n              100% {\n                transform: rotate(6deg) translateY(-2px) translateX(-42%);\n              }\n            }\n            .iconfont {\n              transition:\n                transform $transition-time-normal,\n                margin $transition-time-normal;\n              transition-delay: $transition-time-normal * 2;\n              transform: rotate(6deg) translateY(-2px) translateX(-50%);\n              animation: pre-like-icon 0.2s infinite;\n              animation-delay: $transition-time-normal * 3;\n              margin-left: 50%;\n            }\n          }\n\n          /* liked animate */\n          &.newliked {\n            .parkinson-mask {\n              transition-delay: 1s;\n              @include hidden();\n              /* icon animate */\n              @keyframes liked-icon {\n                0% {\n                  transform: rotate(0deg) translateX(-50%);\n                }\n                40% {\n                  transform: rotate(-5deg) translateX(-50%) translateY(-10%);\n                }\n                50% {\n                  transform: rotate(-8deg) translateX(-50%) translateY(-66%) scale(1.6);\n                }\n                70%,\n                80% {\n                  transform: rotate(0deg) translateX(-50%) translateY(-66%) scale(1.3);\n                  margin-left: 50%;\n                }\n                85% {\n                  transform: rotate(0deg) translateX(-50%) translateY(0);\n                  margin-left: 50%;\n                }\n                100% {\n                  transform: rotate(0deg) translateX(0%);\n                  margin-left: 0;\n                }\n              }\n              .iconfont {\n                text-stroke: 1px $red;\n                -webkit-text-stroke: 1px $red;\n                transform-origin: left center;\n                transform: rotate(0deg) translateX(-50%);\n                animation: liked-icon 1s forwards;\n              }\n            }\n            /* likes animate */\n            @keyframes likes-count {\n              0% {\n                opacity: 0;\n                transform: scale(1);\n              }\n              20% {\n                @include visible();\n                bottom: 100px;\n                transform: scale(1);\n              }\n              100% {\n                opacity: 0;\n                bottom: 120px;\n                transform: scale(0.8);\n              }\n            }\n            .parkinson-likes {\n              animation: likes-count 0.5s forwards;\n              animation-delay: 0.5s;\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { computed } from 'vue'\n  import { Article } from '/@/interfaces/article'\n  import { getArticleDetailRoute } from '/@/transforms/route'\n  import { getMobileArticleListThumbnailURL } from '/@/transforms/thumbnail'\n\n  interface Props {\n    articles?: Article[]\n    columns?: number\n    count?: number\n  }\n\n  const props = withDefaults(defineProps<Props>(), {\n    articles: () => [],\n    columns: 4,\n    count: 8\n  })\n\n  const articleList = computed<Article[]>(() => {\n    const articles = [...props.articles].slice(0, props.count)\n    if (articles.length >= props.count) {\n      return articles\n    }\n    return [\n      ...articles,\n      ...new Array(props.count - articles.length).fill({\n        title: '-',\n        description: '',\n        id: null,\n        _id: '',\n        thumbnail: ''\n      })\n    ]\n  })\n</script>\n\n<template>\n  <div class=\"related\">\n    <ul class=\"articles\" :style=\"{ gridTemplateColumns: `repeat(${columns}, 1fr)` }\">\n      <li v-for=\"(article, index) in articleList\" :class=\"{ disabled: !article.id }\" :key=\"index\" class=\"item\">\n        <router-link class=\"item-article\" :title=\"article.title\" :to=\"getArticleDetailRoute(article.id)\">\n          <div\n            class=\"thumbnail\"\n            :style=\"{ backgroundImage: `url(${getMobileArticleListThumbnailURL(article.thumbnail)})` }\"\n          ></div>\n          <div class=\"title\">{{ article.title }}</div>\n          <div class=\"description\">{{ article.description }}</div>\n        </router-link>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .related {\n    overflow: hidden;\n\n    .articles {\n      display: grid;\n      grid-template-columns: repeat(4, 1fr);\n      grid-gap: $gap;\n      width: 100%;\n      padding: 0;\n      margin: 0;\n      list-style: none;\n      overflow: hidden;\n\n      .item {\n        width: auto;\n        @include common-bg-module();\n        @include radius-box($sm-radius);\n\n        &.disabled {\n          pointer-events: none;\n          opacity: 0.6;\n        }\n\n        .item-article {\n          display: block;\n          position: relative;\n          overflow: hidden;\n\n          .thumbnail {\n            position: relative;\n            opacity: 0.88;\n            width: 100%;\n            height: 7rem;\n            background-color: $module-bg-darker-2;\n            background-size: cover;\n            background-position: 50% 46%;\n            transition: all $transition-time-fast;\n            display: flex;\n            flex-direction: column;\n            justify-content: end;\n\n            &::before {\n              content: '';\n              position: absolute;\n              background: linear-gradient(to top, rgba($black, 0.2) 20%, rgba($black, 0.1) 50%, transparent 90%);\n              width: 100%;\n              height: 100%;\n              top: 0;\n              left: 0;\n            }\n          }\n\n          .title,\n          .description {\n            display: block;\n            width: 100%;\n            padding: 0 $sm-gap;\n            transition: color $transition-time-fast;\n            @include text-overflow();\n          }\n\n          .title {\n            font-size: $font-size-h6;\n            margin-top: $sm-gap;\n            margin-bottom: $xs-gap;\n            font-weight: bold;\n            color: $text;\n          }\n\n          .description {\n            margin-bottom: $sm-gap;\n            font-size: $font-size-small;\n            color: $text-disabled;\n          }\n\n          &:hover {\n            .thumbnail {\n              opacity: 1;\n              background-position: 50% 50%;\n            }\n\n            .title {\n              color: $link-color;\n            }\n            .description {\n              color: $text-secondary;\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { computed, watch, shallowRef, onBeforeMount } from 'vue'\n  import { storeToRefs } from 'pinia'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useUniversalFetch } from '/@/universal'\n  import { useStores } from '/@/stores'\n  import * as ANCHORS from '/@/constants/anchor'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { LanguageKey } from '/@/language'\n  import { CUSTOM_ELEMENTS } from '/@/effects/elements'\n  import { SocialMedia } from '/@/components/widget/share.vue'\n  import Comment from '/@/components/comment/index.vue'\n  import ArticleSkeleton from './skeleton.vue'\n  import ArticleContent from './content.vue'\n  import ArticleShare from './share.vue'\n  import ArticleMeta from './meta.vue'\n  import ArticleUpvote from './upvote.vue'\n  import ArticleRelated from './related.vue'\n  import ArticleNeighbour from './neighbour.vue'\n\n  const props = defineProps<{\n    articleId: number\n    isMobile?: boolean\n  }>()\n\n  const { i18n: _i18n, head, seo, gtag, gState } = useEnhancer()\n  const { identity, sponsor, comment: commentStore, articleDetail: articleDetailStore } = useStores()\n  const { article, fetching, prevArticle, nextArticle, relatedArticles } = storeToRefs(articleDetailStore)\n  const isLiked = computed(() => Boolean(article.value && identity.isLikedPage(article.value.id)))\n\n  const handleSponsor = () => {\n    sponsor.fetch()\n    gState.toggleSwitcher('sponsor', true)\n    gtag?.event('article_sponsor', {\n      event_category: GAEventCategories.Article\n    })\n  }\n\n  const handleLike = async (callback) => {\n    if (isLiked.value) {\n      return false\n    }\n\n    gtag?.event('article_like', {\n      event_category: GAEventCategories.Article\n    })\n    try {\n      await articleDetailStore.postArticleLike(article.value!.id)\n      identity.likePage(article.value!.id)\n      callback?.()\n    } catch (error) {\n      const message = _i18n.t(LanguageKey.POST_ACTION_ERROR)\n      console.warn(message, error)\n      alert(message)\n    }\n  }\n\n  const fetchArticleDetail = (articleId: number) => {\n    return Promise.all([\n      articleDetailStore.fetchCompleteArticle(articleId),\n      commentStore.fetchList({ post_id: articleId })\n    ])\n  }\n\n  const customElementsStyle = shallowRef<string | null>(null)\n  const handleContentRendered = (element: HTMLDivElement) => {\n    CUSTOM_ELEMENTS.verse.effect?.(element)\n    customElementsStyle.value = CUSTOM_ELEMENTS.verse.style?.(element) ?? null\n  }\n\n  head(() => ({\n    style: customElementsStyle.value ? [{ children: customElementsStyle.value }] : []\n  }))\n\n  seo(() => ({\n    pageTitle: article.value?.title,\n    description: article.value?.description || '',\n    keywords: article.value?.keywords?.join(',') || article.value?.title,\n    ogType: 'article',\n    ogImage: article.value?.thumbnail,\n    ogImageWidth: 1190,\n    ogImageHeight: 420\n  }))\n\n  onBeforeMount(() => {\n    watch(\n      () => props.articleId,\n      (articleId) => fetchArticleDetail(articleId),\n      { flush: 'post' }\n    )\n  })\n\n  useUniversalFetch(() => {\n    return fetchArticleDetail(props.articleId)\n  })\n</script>\n\n<template>\n  <div class=\"article-page\">\n    <placeholder :loading=\"fetching\">\n      <template #loading>\n        <article-skeleton :social-count=\"isMobile ? 3 : 8\" :related-count=\"isMobile ? 2 : 3\" />\n      </template>\n      <template #default>\n        <div v-if=\"article\">\n          <div class=\"module margin background overflow\">\n            <article-content\n              :id=\"ANCHORS.ARTICLE_CONTENT_ELEMENT_ID\"\n              :readmore-id=\"ANCHORS.ARTICLE_READMORE_ELEMENT_ID\"\n              :article=\"article\"\n              @rendered=\"handleContentRendered\"\n            />\n            <div class=\"divider\"></div>\n            <article-meta :id=\"ANCHORS.ARTICLE_META_ELEMENT_ID\" :article=\"article\" :plain=\"isMobile\">\n              <template #action>\n                <article-upvote\n                  :likes=\"article.meta.likes\"\n                  :is-liked=\"isLiked\"\n                  :hidden-sponsor=\"isMobile\"\n                  :enabled-parkinson=\"!isMobile && (gState.userAgent.isChrome || gState.userAgent.isFirefox)\"\n                  @like=\"handleLike\"\n                  @sponsor=\"handleSponsor\"\n                />\n              </template>\n            </article-meta>\n          </div>\n          <div class=\"module margin background\">\n            <div class=\"bridge left\"></div>\n            <div class=\"bridge right\"></div>\n            <article-share\n              :id=\"ANCHORS.ARTICLE_SHARE_ELEMENT_ID\"\n              :article-id=\"articleId\"\n              :likes=\"article?.meta?.likes || 0\"\n              :socials=\"isMobile ? [SocialMedia.Wechat, SocialMedia.Weibo, SocialMedia.Twitter] : []\"\n            />\n          </div>\n          <div class=\"module margin overflow\">\n            <article-neighbour :prev=\"prevArticle\" :next=\"nextArticle\" />\n          </div>\n          <div class=\"module margin overflow\">\n            <article-related\n              :id=\"ANCHORS.ARTICLE_RELATED_ELEMENT_ID\"\n              :columns=\"isMobile ? 2 : 3\"\n              :count=\"isMobile ? 4 : 6\"\n              :articles=\"relatedArticles\"\n            />\n          </div>\n        </div>\n      </template>\n    </placeholder>\n    <div class=\"comment\">\n      <comment :plain=\"isMobile\" :fetching=\"fetching\" :post-id=\"articleId\" />\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .article-page {\n    .module {\n      position: relative;\n\n      &.margin {\n        margin-bottom: $lg-gap;\n      }\n\n      &.background {\n        border-radius: $sm-radius;\n        @include common-bg-module();\n      }\n\n      &.overflow {\n        overflow: hidden;\n      }\n\n      .divider {\n        border-top: 2px dotted $module-bg-darker-1;\n      }\n\n      .bridge {\n        $distance: 3rem;\n        position: absolute;\n        top: -$lg-gap;\n        width: $lg-gap;\n        height: $lg-gap;\n        background: linear-gradient(to bottom, $module-bg, $module-bg-darker-1);\n        &.left {\n          left: $distance;\n        }\n        &.right {\n          right: $distance;\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { ref, computed, onMounted } from 'vue'\n  import { useInstagramMediasStore } from '/@/stores/media'\n  import { isVideoMediaIns, isAlbumMediaIns, getInstagramImage } from '/@/transforms/media'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n  import { LanguageKey } from '/@/language'\n\n  const fetching = ref(true)\n  const insStore = useInstagramMediasStore()\n  const insMedias = computed(() => insStore.data.slice(0, 23))\n\n  onMounted(() => {\n    insStore.fetch().finally(() => {\n      fetching.value = false\n    })\n  })\n</script>\n\n<template>\n  <placeholder :i18n-key=\"LanguageKey.EMPTY_PLACEHOLDER\" :loading=\"fetching\" :data=\"insMedias\">\n    <template #loading>\n      <ul class=\"list\">\n        <li class=\"item\" v-for=\"i in 24\" :key=\"i\">\n          <skeleton-base />\n        </li>\n      </ul>\n    </template>\n    <template #default>\n      <ul class=\"list\">\n        <li class=\"item\" :key=\"index\" v-for=\"(media, index) in insMedias\">\n          <ulink class=\"link\" :href=\"media.permalink\" :title=\"media.caption\">\n            <uimage class=\"cover\" :src=\"getInstagramImage(media, 't')\" :alt=\"media.caption\" />\n            <div class=\"type-icon\">\n              <i class=\"iconfont icon-video\" v-if=\"isVideoMediaIns(media)\"></i>\n              <i class=\"iconfont icon-album\" v-else-if=\"isAlbumMediaIns(media)\"></i>\n              <i class=\"iconfont icon-camera\" v-else></i>\n            </div>\n            <div class=\"mask\">\n              <i class=\"iconfont icon-music-play\" v-if=\"isVideoMediaIns(media)\"></i>\n              <i class=\"iconfont icon-eye\" v-else></i>\n            </div>\n          </ulink>\n        </li>\n        <li class=\"item\">\n          <ulink class=\"link more\" :href=\"VALUABLE_LINKS.INSTAGRAM\"></ulink>\n        </li>\n      </ul>\n    </template>\n  </placeholder>\n</template>\n\n<style lang=\"scss\" scoped>\n  @use 'sass:math';\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .list {\n    padding: 0;\n    margin: 0;\n    width: 100%;\n    height: 100%;\n    list-style: none;\n    display: grid;\n    grid-template-columns: repeat(12, 1fr);\n    grid-gap: 1rem;\n    $item-size: 74px;\n\n    .item {\n      position: relative;\n      height: $item-size;\n\n      .link {\n        display: block;\n        width: 100%;\n        height: 100%;\n        background-color: $module-bg-darker-1;\n        opacity: 0.8;\n        @include visibility-transition();\n        &:hover {\n          opacity: 1;\n          .mask {\n            @include visible();\n          }\n        }\n\n        &.more {\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          font-size: $font-size-h3;\n        }\n\n        .cover {\n          width: 100%;\n          height: 100%;\n          border-radius: $xs-radius;\n          object-fit: cover;\n        }\n\n        .type-icon {\n          opacity: 0.7;\n          position: absolute;\n          top: math.div($xs-gap, 2);\n          right: $xs-gap;\n          color: $white;\n        }\n\n        .mask {\n          position: absolute;\n          bottom: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          color: $white;\n          background-color: rgba(0, 0, 0, 0.3);\n          @include visibility-transition();\n          @include hidden();\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { defineComponent, h } from 'vue'\n  import { numberToKilo, numberSplit } from '/@/transforms/text'\n  export const StatisticCount = defineComponent({\n    name: 'StatisticCount',\n    props: {\n      count: [Number, String],\n      primary: Boolean,\n      large: Boolean,\n      kilo: Boolean,\n      split: Boolean\n    },\n    render() {\n      const number = Number(this.$props.count)\n      const content = this.kilo ? numberToKilo(number) : this.split ? numberSplit(number) : String(number)\n      const classNames = { primary: this.$props.primary, large: this.large }\n      return h('span', { class: ['count', classNames] }, content)\n    }\n  })\n</script>\n\n<script lang=\"ts\" setup>\n  import { useEnhancer } from '/@/app/enhancer'\n  import { LanguageKey } from '/@/language'\n\n  interface Props {\n    brand?: string\n    icon?: string\n    platform?: string\n    href?: string\n    fetching?: boolean\n    data?: any\n  }\n\n  defineProps<Props>()\n  const { isDarkTheme } = useEnhancer()\n</script>\n\n<template>\n  <div class=\"statistic\" :class=\"[brand, { dark: isDarkTheme }]\">\n    <placeholder :i18n-key=\"LanguageKey.EMPTY_PLACEHOLDER\" :loading=\"fetching\" :data=\"data\">\n      <template #loading>\n        <ul class=\"skeletons\">\n          <skeleton-base v-for=\"i in 3\" :key=\"i\" class=\"item\" />\n        </ul>\n      </template>\n      <template #default>\n        <div class=\"content\">\n          <ulink class=\"title\" :href=\"href\">\n            <span class=\"left\">\n              <i class=\"iconfont\" :class=\"icon\"></i>\n              <span class=\"text\">{{ platform }}</span>\n            </span>\n            <span class=\"right\">\n              <i class=\"iconfont icon-next\"></i>\n            </span>\n          </ulink>\n          <slot></slot>\n        </div>\n      </template>\n    </placeholder>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .statistic {\n    width: 100%;\n    height: 14rem;\n    padding: 1em 1.8em 1.2em 1.8em;\n    border-radius: $lg-radius;\n    @include common-bg-module();\n    position: relative;\n    overflow: hidden;\n    #{--brand-color}: $white;\n    &.douban {\n      #{--s-primary}: $douban-primary;\n    }\n    &.npm {\n      #{--s-primary}: $npm-primary;\n    }\n    &.twitter {\n      #{--s-primary}: $twitter-primary;\n    }\n    &.github {\n      #{--s-primary}: $github-primary;\n    }\n    &.github.dark {\n      #{--s-primary}: $link-color;\n      #{--brand-color}: $text-reversal;\n    }\n\n    .skeletons {\n      margin: 0;\n      padding: 1rem 0;\n      width: 100%;\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n      justify-content: space-between;\n      .item {\n        height: 20%;\n      }\n    }\n\n    .content {\n      color: $text-secondary;\n\n      .title {\n        margin-bottom: $gap;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        &:hover {\n          .right {\n            opacity: 1;\n            color: $text;\n          }\n        }\n\n        .left {\n          display: flex;\n          align-items: center;\n\n          .iconfont {\n            color: var(--s-primary);\n            font-size: $font-size-h2;\n            margin-right: $gap;\n          }\n\n          .text {\n            color: $text;\n            font-size: $font-size-h3;\n            font-weight: bold;\n            letter-spacing: 1px;\n          }\n        }\n\n        .right {\n          color: $text-divider;\n          opacity: 0.4;\n          transition: all $transition-time-fast;\n          .iconfont {\n            margin: 0;\n          }\n        }\n      }\n\n      ::v-deep(.count) {\n        color: $text;\n        font-weight: bold;\n        margin: 0 $xs-gap;\n        &.large {\n          font-size: $font-size-h2;\n        }\n        &.primary {\n          color: var(--s-primary);\n        }\n      }\n\n      ::v-deep(.iconfont) {\n        color: $text-disabled;\n        margin-right: $sm-gap;\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { ref, computed, onMounted } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useDoubanMoviesStore } from '/@/stores/media'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n  import StatisticBase, { StatisticCount } from './base.vue'\n\n  const { isZhLang } = useEnhancer()\n  const store = useDoubanMoviesStore()\n  const totalSpent = computed(() => Math.trunc(store.data?.total_spent ?? 0))\n  const weeklyAvg = computed(() => (store.data?.weekly_avg ?? 0).toFixed(2))\n  const fetching = ref(true)\n  onMounted(() => {\n    store.fetch().finally(() => {\n      fetching.value = false\n    })\n  })\n</script>\n\n<template>\n  <statistic-base\n    brand=\"douban\"\n    icon=\"icon-douban\"\n    :data=\"store.data\"\n    :fetching=\"fetching\"\n    :href=\"VALUABLE_LINKS.DOUBAN_MOVIE\"\n    :platform=\"isZhLang ? '' : 'Douban Movie'\"\n  >\n    <p>\n      <i class=\"iconfont icon-video-outline\"></i>\n      <span v-if=\"isZhLang\"></span>\n      <statistic-count large primary split :count=\"store.data.total_collections\" />\n      <span v-if=\"isZhLang\"></span>\n      <span v-else>films marked</span>\n    </p>\n    <p>\n      <i class=\"iconfont icon-clock-outline\"></i>\n      <span v-if=\"isZhLang\"></span>\n      <statistic-count split :count=\"totalSpent\" />\n      <span v-if=\"isZhLang\"></span>\n      <span v-else>hours watching</span>\n    </p>\n    <p>\n      <i class=\"iconfont icon-week\"></i>\n      <i18n>\n        <template #zh> <statistic-count :count=\"weeklyAvg\" /> </template>\n        <template #en><statistic-count :count=\"weeklyAvg\" /> films per week</template>\n      </i18n>\n    </p>\n  </statistic-base>\n</template>\n","<script lang=\"ts\" setup>\n  import { ref, onMounted } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useGitHubStatisticStore } from '/@/stores/statistic'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n  import StatisticBase, { StatisticCount } from './base.vue'\n\n  const { isZhLang } = useEnhancer()\n  const store = useGitHubStatisticStore()\n  const fetching = ref(true)\n  onMounted(() => {\n    store.fetch().finally(() => {\n      fetching.value = false\n    })\n  })\n</script>\n\n<template>\n  <statistic-base\n    brand=\"github\"\n    icon=\"icon-github\"\n    :data=\"store.data\"\n    :fetching=\"fetching\"\n    :href=\"VALUABLE_LINKS.GITHUB\"\n    :platform=\"isZhLang ? ' GitHub' : 'GitHub'\"\n  >\n    <p>\n      <i class=\"iconfont icon-star-outline\"></i>\n      <span v-if=\"isZhLang\"></span>\n      <statistic-count large primary split :count=\"store.data?.statistics.stars\" />\n      <span v-if=\"isZhLang\"> star</span>\n      <span v-else>stars earned</span>\n    </p>\n    <p>\n      <i class=\"iconfont icon-repository\"></i>\n      <span v-if=\"isZhLang\"></span>\n      <statistic-count :count=\"store.data?.repositories.length\" />\n      <span v-if=\"isZhLang\"></span>\n      <span v-else>open-source repos</span>\n    </p>\n    <p>\n      <i class=\"iconfont icon-organization\"></i>\n      <span v-if=\"isZhLang\">/</span>\n      <statistic-count :count=\"store.data?.organizations.length\" />\n      <span v-if=\"isZhLang\"></span>\n      <span v-else>organizations</span>\n    </p>\n  </statistic-base>\n</template>\n","<script lang=\"ts\" setup>\n  import { ref, onMounted } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useTwitterStore } from '/@/stores/media'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n  import StatisticBase, { StatisticCount } from './base.vue'\n\n  const { isZhLang } = useEnhancer()\n  const store = useTwitterStore()\n  const fetching = ref(true)\n  onMounted(() => {\n    store.fetch().finally(() => {\n      fetching.value = false\n    })\n  })\n</script>\n\n<template>\n  <statistic-base\n    brand=\"twitter\"\n    icon=\"icon-twitter\"\n    :data=\"store.data\"\n    :fetching=\"fetching\"\n    :href=\"VALUABLE_LINKS.TWITTER\"\n    :platform=\"isZhLang ? '' : 'Twitter'\"\n  >\n    <p>\n      <i class=\"iconfont icon-edit\"></i>\n      <span v-if=\"isZhLang\"></span>\n      <statistic-count large primary split :count=\"store.data?.userinfo.tweetCount || '-'\" />\n      <span v-if=\"isZhLang\"></span>\n      <span v-else>tweets</span>\n    </p>\n    <p>\n      <i class=\"iconfont icon-following\"></i>\n      <span v-if=\"isZhLang\"></span>\n      <statistic-count split :count=\"store.data?.userinfo.followingCount || '-'\" />\n      <span v-if=\"isZhLang\"></span>\n      <span v-else>followings</span>\n    </p>\n    <p>\n      <i class=\"iconfont icon-follower\"></i>\n      <span v-if=\"isZhLang\"></span>\n      <statistic-count split :count=\"store.data?.userinfo.followerCount || '-'\" />\n      <span v-if=\"isZhLang\"></span>\n      <span v-else>followers</span>\n    </p>\n  </statistic-base>\n</template>\n","<script lang=\"ts\" setup>\n  import { ref, onMounted } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useNpmStatisticStore } from '/@/stores/statistic'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n  import StatisticBase, { StatisticCount } from './base.vue'\n\n  const { isZhLang } = useEnhancer()\n  const store = useNpmStatisticStore()\n  const fetching = ref(true)\n  onMounted(() => {\n    store.fetch().finally(() => {\n      fetching.value = false\n    })\n  })\n</script>\n\n<template>\n  <statistic-base\n    brand=\"npm\"\n    icon=\"icon-npm\"\n    :data=\"store.data\"\n    :fetching=\"fetching\"\n    :href=\"VALUABLE_LINKS.NPM_HOMEPAGE\"\n    :platform=\"isZhLang ? ' NPM' : 'NPM'\"\n  >\n    <p class=\"line-1\">\n      <i class=\"iconfont icon-package\"></i>\n      <span v-if=\"isZhLang\"></span>\n      <statistic-count :count=\"store.totalPackages\" />\n      <span v-if=\"isZhLang\"></span>\n      <span v-else>packages</span>\n    </p>\n    <p>\n      <i class=\"iconfont icon-download\"></i>\n      <span v-if=\"isZhLang\"></span>\n      <statistic-count large primary split :count=\"store.totalDownloads\" />\n      <span v-if=\"isZhLang\"></span>\n      <span v-else>downs</span>\n    </p>\n    <p>\n      <i class=\"iconfont icon-score\"></i>\n      <span v-if=\"isZhLang\"></span>\n      <statistic-count :count=\"store.averageScore\" />\n      <span v-if=\"isZhLang\"></span>\n      <span v-else>average score</span>\n    </p>\n  </statistic-base>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .line-1 {\n    margin-top: $lg-gap;\n    margin-bottom: 0.7em;\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { computed } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n\n  const props = defineProps<{\n    date: string\n    tweets: number\n    instagrams: number\n    articles: number\n    contributions: number\n    githubColor?: string\n  }>()\n\n  const { isDarkTheme } = useEnhancer()\n  const total = computed(() => props.articles + props.tweets + props.contributions + props.instagrams)\n  const getPointHeightStyle = (value: number) => {\n    return isNaN(value) ? 0 : `${Math.floor(value * 100)}%`\n  }\n</script>\n\n<template>\n  <div\n    class=\"day\"\n    :class=\"{ dark: isDarkTheme }\"\n    :data-date=\"date\"\n    :data-total-count=\"total\"\n    :data-article-count=\"articles\"\n    :data-tweet-count=\"tweets\"\n    :data-instagram-count=\"instagrams\"\n    :data-contribution-count=\"contributions\"\n  >\n    <div class=\"point\">\n      <div class=\"item article\" :style=\"{ height: getPointHeightStyle(articles / total) }\" />\n      <div class=\"item tweet\" :style=\"{ height: getPointHeightStyle(tweets / total) }\" />\n      <div class=\"item instagram\" :style=\"{ height: getPointHeightStyle(instagrams / total) }\" />\n      <div\n        class=\"item contribution\"\n        :style=\"{\n          height: getPointHeightStyle(contributions / total),\n          backgroundColor: githubColor\n        }\"\n      />\n    </div>\n    <div class=\"tooltip\" v-if=\"total\">\n      <p class=\"date\">{{ date }}</p>\n      <ul class=\"counts\">\n        <li class=\"item article\">\n          <i class=\"iconfont icon-quill\"></i>\n          <span class=\"count\">{{ articles }}</span>\n          articles\n        </li>\n        <li class=\"item tweet\">\n          <i class=\"iconfont icon-twitter\"></i>\n          <span class=\"count\">{{ tweets }}</span>\n          tweets\n        </li>\n        <li class=\"item instagram\">\n          <i class=\"iconfont icon-instagram\"></i>\n          <span class=\"count\">{{ instagrams }}</span>\n          instagrams\n        </li>\n        <li class=\"item contribution\">\n          <i class=\"iconfont icon-github\"></i>\n          <span class=\"count\">{{ contributions }}</span>\n          contributions\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .day {\n    $size: 11px;\n    $radius: 2px;\n    position: relative;\n    width: $size;\n    height: $size;\n    border-radius: $radius;\n    background-color: $module-bg-darker-2;\n    &.dark {\n      background-color: $module-bg-darker-1;\n      .point {\n        filter: brightness(86%);\n      }\n      .tooltip {\n        color: $text-reversal;\n        #{--background}: rgba($white, 0.9);\n      }\n    }\n\n    &:not([data-total-count='0']) {\n      &:hover {\n        outline: 1px solid $theme-black;\n      }\n      .point:hover {\n        & + .tooltip {\n          @include visible();\n        }\n      }\n    }\n\n    .point {\n      display: block;\n      width: $size;\n      height: $size;\n      border-radius: $radius;\n      overflow: hidden;\n\n      .item {\n        width: 100%;\n        &.article {\n          background-color: $rss-primary;\n        }\n        &.tweet {\n          background-color: $twitter-primary;\n        }\n        &.instagram {\n          background-color: $instagram-primary;\n        }\n      }\n    }\n\n    .tooltip {\n      #{--background}: rgba($black, 0.9);\n      position: absolute;\n      left: 22px;\n      top: 0;\n      transform: translateY(-50%);\n      white-space: nowrap;\n      z-index: $z-index-normal + 1;\n      padding: $sm-gap $gap;\n      padding-right: $lg-gap;\n      background-color: var(--background);\n      border-radius: $sm-radius;\n      color: $text-reversal;\n      @include hidden();\n      &::before {\n        $size: 4px;\n        content: '';\n        position: absolute;\n        left: -$size * 2;\n        top: 50%;\n        margin-top: -1px;\n        width: 0;\n        height: 0;\n        border-top: $size * 1.5 solid transparent;\n        border-right: $size * 2 solid var(--background);\n        border-bottom: $size * 1.5 solid transparent;\n      }\n\n      .date {\n        font-weight: bold;\n        margin-bottom: $xs-gap;\n      }\n\n      .counts {\n        margin: 0;\n        padding: 0;\n        list-style: none;\n\n        .item {\n          line-height: 1.8em;\n          font-size: $font-size-small;\n          &.article {\n            color: $rss-primary;\n          }\n          &.tweet {\n            color: $twitter-primary;\n            /* A token to indicate that twitter is no longer supported */\n            text-decoration: line-through;\n          }\n          &.instagram {\n            color: $instagram-primary;\n          }\n\n          .count {\n            margin-left: $sm-gap;\n            font-weight: bold;\n          }\n        }\n      }\n    }\n\n    /* articles */\n    /* 5+ */\n    &:not([data-article-count='0']) {\n      .point {\n        .article {\n          background-color: $rss-primary;\n        }\n      }\n    }\n    /* 1 */\n    &[data-article-count='1'] {\n      .point {\n        .article {\n          background-color: lighten($rss-primary, 20%);\n        }\n      }\n    }\n    /* 2-4 */\n    &[data-article-count='2'],\n    &[data-article-count='3'],\n    &[data-article-count='4'] {\n      .point {\n        .article {\n          background-color: lighten($rss-primary, 10%);\n        }\n      }\n    }\n\n    /* instagrams */\n    /* 3+ */\n    &:not([data-instagram-count='0']) {\n      .point {\n        .instagram {\n          background-color: $instagram-primary;\n        }\n      }\n    }\n    /* 1 */\n    &[data-instagram-count='1'] {\n      .point {\n        .instagram {\n          background-color: lighten($instagram-primary, 20%);\n        }\n      }\n    }\n    /* 2 */\n    &[data-instagram-count='2'],\n    &[data-instagram-count='3'] {\n      .point {\n        .instagram {\n          background-color: lighten($instagram-primary, 10%);\n        }\n      }\n    }\n\n    /* tweets */\n    /* 8+ */\n    &:not([data-tweet-count='0']) {\n      .point {\n        .tweet {\n          background-color: $twitter-primary;\n        }\n      }\n    }\n    /* 1 */\n    &[data-tweet-count='1'] {\n      .point {\n        .tweet {\n          background-color: lighten($twitter-primary, 22%);\n        }\n      }\n    }\n    /* 2-4 */\n    &[data-tweet-count='2'],\n    &[data-tweet-count='3'],\n    &[data-tweet-count='4'] {\n      .point {\n        .tweet {\n          background-color: lighten($twitter-primary, 16%);\n        }\n      }\n    }\n    /* 5-8 */\n    &[data-tweet-count='5'],\n    &[data-tweet-count='6'],\n    &[data-tweet-count='7'],\n    &[data-tweet-count='8'] {\n      .point {\n        .tweet {\n          background-color: lighten($twitter-primary, 8%);\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { computed, onMounted } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useStores } from '/@/stores'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { dateToHuman, HumanDate, humanDateToYMD } from '/@/transforms/moment'\n  import CalendarDay from './day.vue'\n\n  const { gtag } = useEnhancer()\n  const { articleCalendar, instagramCalendar, githubCalendar } = useStores()\n  const githubContributionsMap = computed(() => {\n    return new Map(githubCalendar.days.map((day) => [day.date, day]))\n  })\n  const getDayContributions = (date: string) => {\n    return githubContributionsMap.value.get(date)?.count || 0\n  }\n  const getDayGitHubColor = (date: string) => {\n    return githubContributionsMap.value.get(date)?.color\n  }\n  const getDayInstagrams = (date: string) => {\n    return instagramCalendar.data.find((i) => i.date === date)?.count || 0\n  }\n  const getDayArticles = (date: string) => {\n    return articleCalendar.data.find((i) => i.date === date)?.count || 0\n  }\n\n  const handleHover = () => {\n    gtag?.event('aggregate_calendar', {\n      event_category: GAEventCategories.About\n    })\n  }\n\n  // current month | day\n  const today = new Date()\n  const todayHuman = dateToHuman(today)\n  const currentMonthDays = Array.from({ length: todayHuman.day }).map((_, i) => {\n    return humanDateToYMD({ ...todayHuman, day: i + 1 })\n  })\n  const getPrevMonthFullDays = (date: HumanDate, prevMonths: number) => {\n    const targetMonth = new Date(date.year, date.month - prevMonths, 0)\n    const daysCount = targetMonth.getDate()\n    return Array.from({ length: daysCount }).map((d, i) => {\n      return humanDateToYMD({ ...dateToHuman(targetMonth), day: i + 1 })\n    })\n  }\n\n  const months = [\n    getPrevMonthFullDays(todayHuman, 11),\n    getPrevMonthFullDays(todayHuman, 10),\n    getPrevMonthFullDays(todayHuman, 9),\n    getPrevMonthFullDays(todayHuman, 8),\n    getPrevMonthFullDays(todayHuman, 7),\n    getPrevMonthFullDays(todayHuman, 6),\n    getPrevMonthFullDays(todayHuman, 5),\n    getPrevMonthFullDays(todayHuman, 4),\n    getPrevMonthFullDays(todayHuman, 3),\n    getPrevMonthFullDays(todayHuman, 2),\n    getPrevMonthFullDays(todayHuman, 1),\n    currentMonthDays\n  ]\n\n  onMounted(() => {\n    articleCalendar.fetch()\n    githubCalendar.fetch()\n    instagramCalendar.fetch()\n  })\n</script>\n\n<template>\n  <ul class=\"aggregate-calendar\" @mouseenter=\"handleHover\">\n    <li class=\"month\" v-for=\"(month, index) in months\" :key=\"index\">\n      <calendar-day\n        v-for=\"(day, i) in month\"\n        :key=\"i\"\n        :date=\"day\"\n        :tweets=\"0\"\n        :articles=\"getDayArticles(day)\"\n        :instagrams=\"getDayInstagrams(day)\"\n        :contributions=\"getDayContributions(day)\"\n        :github-color=\"getDayGitHubColor(day)\"\n      />\n    </li>\n  </ul>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .aggregate-calendar {\n    display: flex;\n    justify-content: space-between;\n    padding: 0;\n    margin: 0;\n\n    .month {\n      width: auto;\n      display: grid;\n      grid-template-rows: repeat(7, 1fr);\n      grid-auto-flow: column;\n      grid-auto-columns: min-content;\n      grid-gap: 5px;\n      @include scroll-snap-item();\n    }\n  }\n</style>\n","import { useEnhancer } from '/@/app/enhancer'\nimport { useStores } from '/@/stores'\nimport { Language, LanguageKey } from '/@/language'\nimport { firstUpperCase } from '/@/transforms/text'\nimport { getDefaultAvatar } from '/@/transforms/avatar'\nimport { META } from '/@/config/app.config'\n\nexport const getAdminAvatar = (avatar?: string) => {\n  return avatar || getDefaultAvatar()\n}\n\nexport interface AboutI18nConfig {\n  [Language.Chinese]: string\n  [Language.English]: string\n}\n\nexport const i18ns = {\n  footprint: {\n    [Language.Chinese]: '',\n    [Language.English]: 'Every path i went astray built up my Rome.'\n  },\n  sponsor: {\n    [Language.Chinese]: '',\n    [Language.English]: 'Sponsor'\n  },\n  statement: {\n    [Language.Chinese]: '',\n    [Language.English]: 'Statement'\n  },\n  feedback: {\n    [Language.Chinese]: '',\n    [Language.English]: 'Feedback'\n  },\n  archive: {\n    [Language.Chinese]: '',\n    [Language.English]: 'Archive'\n  },\n  lens: {\n    [Language.Chinese]: '',\n    [Language.English]: 'Lens view'\n  },\n  guestbook: {\n    [Language.Chinese]: '',\n    [Language.English]: 'Guestbook'\n  },\n  nft: {\n    [Language.Chinese]: '',\n    [Language.English]: 'NFTs'\n  },\n  rss: {\n    [Language.Chinese]: '',\n    [Language.English]: 'Subscribe'\n  },\n  discordGroup: {\n    [Language.Chinese]: '',\n    [Language.English]: 'Discord'\n  },\n  telegramGroup: {\n    [Language.Chinese]: '',\n    [Language.English]: 'TG Group'\n  }\n}\n\nexport const useAboutPageMeta = () => {\n  const { i18n, seo, isZhLang } = useEnhancer()\n  const { adminInfo } = useStores()\n\n  return seo(() => {\n    const enTitle = firstUpperCase(i18n.t(LanguageKey.PAGE_ABOUT, Language.English)!)\n    const titles = isZhLang.value ? [i18n.t(LanguageKey.PAGE_ABOUT), enTitle] : [enTitle]\n    return {\n      pageTitle: titles.join(' | '),\n      description: ` ${META.author}`,\n      ogType: 'profile',\n      ogImage: getAdminAvatar(adminInfo.data?.avatar)\n    }\n  })\n}\n\nexport const SPECIAL_LINKS = Object.freeze([\n  {\n    name: 'GitHub',\n    url: 'https://github.com'\n  },\n  {\n    name: `Vite`,\n    url: 'https://vitejs.dev/'\n  },\n  {\n    name: `Disqus`,\n    url: 'https://disqus.com/'\n  }\n])\n","import type GeoJSON from 'geojson'\nimport type { LngLatLike, AnyLayer } from 'mapbox-gl'\n\nexport interface GoogleMyMapPlacemark {\n  index: number\n  id: string\n  name: string\n  description: string\n  coordinates: [number, number]\n  image: string | null\n}\nexport interface GoogleMyMapFolder {\n  name: string\n  placemarks: Array<GoogleMyMapPlacemark>\n}\n\nexport type FeatureCollectionJSON = GeoJSON.FeatureCollection<GeoJSON.Geometry, GoogleMyMapPlacemark>\n\nexport const gmmFoldersToGeoJSON = (folders: Array<GoogleMyMapFolder>): FeatureCollectionJSON => ({\n  type: 'FeatureCollection',\n  features: folders\n    .map((folder) => folder.placemarks)\n    .flat()\n    .map((placemark) => {\n      return {\n        type: 'Feature',\n        geometry: {\n          type: 'Point',\n          coordinates: placemark.coordinates\n        },\n        properties: {\n          ...placemark,\n          icon: placemark.image ? 'attraction' : 'veterinary'\n        }\n      }\n    })\n})\n\n// https://docs.mapbox.com/mapbox-gl-js/style-spec/layers/#layout-symbol-icon-allow-overlap\nexport const geoJSONFeatureToLayer = (layerId: string, source: any): AnyLayer => {\n  return {\n    id: layerId,\n    source,\n    type: 'symbol',\n    layout: {\n      'icon-allow-overlap': true,\n      'icon-size': 1.2,\n      'icon-image': ['get', 'icon'],\n      'text-field': ['get', 'name'],\n      'text-font': ['Open Sans Bold', 'Arial Unicode MS Bold'],\n      'text-size': 11,\n      'text-letter-spacing': 0.05,\n      'text-offset': [0, 1],\n      'text-anchor': 'top'\n    },\n    paint: {\n      'text-color': '#202',\n      'text-halo-color': '#fff',\n      'text-halo-width': 2\n    }\n  }\n}\n\nexport const newMapboxPopup = (mapboxgl: any, coordinates: LngLatLike, html: string) => {\n  return new mapboxgl.Popup({ closeButton: false, offset: [0, -16], maxWidth: `280px` })\n    .setLngLat(coordinates)\n    .setHTML(html)\n}\n","<script lang=\"ts\" setup>\n  import type { Map, LngLatLike } from 'mapbox-gl'\n  import { shallowRef, onBeforeMount, onMounted, onBeforeUnmount, watch } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { META, GEO_INFO, MAPBOX_CONFIG } from '/@/config/app.config'\n  import { FeatureCollectionJSON, geoJSONFeatureToLayer, newMapboxPopup } from './helper'\n  import 'mapbox-gl/dist/mapbox-gl.css'\n\n  const props = defineProps<{\n    gmGeoJson: FeatureCollectionJSON\n  }>()\n\n  const emit = defineEmits<{\n    (e: 'ready', v: { map: Map; lib: any }): void\n  }>()\n\n  const { isDarkTheme } = useEnhancer()\n  const mapboxRef = shallowRef<HTMLElement>()\n  const lib = shallowRef<any>()\n  const map = shallowRef<Map>()\n  const loaded = shallowRef(false)\n\n  const getMapStyle = () => {\n    return isDarkTheme.value ? MAPBOX_CONFIG.STYLE_DARK : MAPBOX_CONFIG.STYLE_LIGHT\n  }\n\n  const makeSureSourceLayer = () => {\n    if (loaded.value) {\n      if (props.gmGeoJson?.features.length) {\n        const _map = map.value!\n        const layerId = 'placemarks'\n        // http://www.mapbox.cn/mapbox-gl-js/example/popup-on-click/\n        // https://docs.mapbox.com/mapbox-gl-js/example/filter-markers-by-input/\n        if (!_map.getLayer(layerId)) {\n          _map.addLayer(\n            geoJSONFeatureToLayer(layerId, {\n              type: 'geojson',\n              data: props.gmGeoJson\n            })\n          )\n          _map.on('mouseenter', layerId, () => {\n            _map.getCanvas().style.cursor = 'pointer'\n          })\n          _map.on('mouseleave', layerId, () => {\n            _map.getCanvas().style.cursor = ''\n          })\n          _map.on('click', layerId, (event) => {\n            // @ts-ignore\n            const coordinates = event.features![0].geometry.coordinates.slice()\n            const description = event.features![0].properties!.description\n            while (Math.abs(event.lngLat.lng - coordinates[0]) > 180) {\n              coordinates[0] += event.lngLat.lng > coordinates[0] ? 360 : -360\n            }\n            newMapboxPopup(lib.value, coordinates, description).addTo(_map)\n          })\n        }\n      }\n    }\n  }\n\n  onBeforeMount(() => {\n    watch(\n      () => isDarkTheme.value,\n      () => map.value?.setStyle(getMapStyle())\n    )\n  })\n\n  onBeforeMount(() => {\n    watch(\n      () => props.gmGeoJson,\n      () => makeSureSourceLayer()\n    )\n  })\n\n  onMounted(() => {\n    Promise.all([\n      import('mapbox-gl').then((result) => result.default),\n      new Promise((resolve) => window.setTimeout(resolve, 600))\n    ]).then(([mapboxgl]) => {\n      mapboxgl.accessToken = MAPBOX_CONFIG.TOKEN\n\n      lib.value = mapboxgl\n      map.value = new mapboxgl.Map({\n        container: mapboxRef.value!,\n        center: MAPBOX_CONFIG.CENTER as LngLatLike,\n        zoom: MAPBOX_CONFIG.ZOOM,\n        attributionControl: false,\n        style: getMapStyle()\n      })\n\n      // living now marker\n      new mapboxgl.Marker({\n        color: META.primary,\n        anchor: 'bottom'\n      })\n        .setLngLat(GEO_INFO.coordinates as any)\n        .addTo(map.value)\n\n      // https://stackoverflow.com/questions/36168658/mapbox-gl-setstyle-removes-layers\n      // https://bl.ocks.org/tristen/0c0ed34e210a04e89984\n      map.value.on('style.load', () => {\n        makeSureSourceLayer()\n      })\n\n      // loaded\n      map.value.on('load', () => {\n        loaded.value = true\n        makeSureSourceLayer()\n        emit('ready', { map: map.value!, lib: lib.value })\n      })\n    })\n  })\n\n  onBeforeUnmount(() => {\n    map.value?.remove()\n  })\n</script>\n\n<template>\n  <div class=\"mapbox\" ref=\"mapboxRef\"></div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .mapbox {\n    ::v-deep(.mapboxgl-popup) {\n      &.mapboxgl-popup-anchor-top {\n        .mapboxgl-popup-tip {\n          border-bottom-color: $module-bg-opaque;\n        }\n      }\n      &.mapboxgl-popup-anchor-bottom {\n        .mapboxgl-popup-tip {\n          border-top-color: $module-bg-opaque;\n        }\n      }\n      &.mapboxgl-popup-anchor-left {\n        .mapboxgl-popup-tip {\n          border-right-color: $module-bg-opaque;\n        }\n      }\n      &.mapboxgl-popup-anchor-right {\n        .mapboxgl-popup-tip {\n          border-left-color: $module-bg-opaque;\n        }\n      }\n\n      .mapboxgl-popup-content {\n        background-color: $module-bg-opaque;\n        box-shadow: 0px 0px 14px 4px rgb(0 0 0 / 10%);\n        border-radius: $lg-radius;\n        padding: 0.8em 1em;\n        font-size: $font-size-base;\n        line-height: 1.7;\n        max-height: 260px;\n        overflow-y: auto;\n        font-family: $font-family-normal;\n\n        br {\n          content: '';\n          margin: 2em;\n          display: block;\n          font-size: 24%;\n        }\n\n        img {\n          display: block;\n          width: 100%;\n          min-height: 2rem;\n          background-color: $module-bg-darker-1;\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import type { Map } from 'mapbox-gl'\n  import { shallowRef } from 'vue'\n  import { GoogleMyMapFolder, FeatureCollectionJSON, GoogleMyMapPlacemark, newMapboxPopup } from './helper'\n  import Mapbox from './mapbox.vue'\n\n  defineProps<{\n    name: string\n    description: string\n    gmGeoJson: FeatureCollectionJSON\n    gmFolders: Array<GoogleMyMapFolder>\n  }>()\n\n  const lib = shallowRef<Map>()\n  const map = shallowRef<Map>()\n  const handleMapboxReady = (payload: { map: Map; lib: any }) => {\n    lib.value = payload.lib\n    map.value = payload.map\n  }\n\n  let prevPopup: mapboxgl.Popup | null = null\n  const handlePlacemarkClick = (placemark: GoogleMyMapPlacemark) => {\n    if (map.value) {\n      prevPopup?.remove()\n      prevPopup = newMapboxPopup(lib.value, placemark.coordinates, placemark.description).addTo(map.value)\n      map.value.flyTo({ center: placemark.coordinates, zoom: 10, speed: 1.2, curve: 1.2 })\n      // https://github.com/mapbox/mapbox-gl-js/issues/1794\n      // map.value.once('moveend', () => {})\n    }\n  }\n</script>\n\n<template>\n  <div class=\"modal\">\n    <mapbox class=\"mapbox\" :gm-geo-json=\"gmGeoJson\" @ready=\"handleMapboxReady\" />\n    <div class=\"panel\">\n      <div class=\"info\">\n        <h3 class=\"title\">{{ name ?? '-' }}</h3>\n        <p class=\"description\">{{ description ?? '-' }}</p>\n      </div>\n      <ul class=\"folders\">\n        <li class=\"folder\" :key=\"index\" v-for=\"(folder, index) in gmFolders\">\n          <div class=\"title\">\n            <i class=\"iconfont icon-route\"></i>\n            <span class=\"text\">{{ folder.name }}</span>\n            <span class=\"count\">({{ folder.placemarks.length }})</span>\n          </div>\n          <div class=\"empty\" v-if=\"!folder.placemarks.length\">null</div>\n          <ul class=\"placemarks\" v-else>\n            <li\n              class=\"placemark\"\n              :key=\"i\"\n              v-for=\"(placemark, i) in folder.placemarks\"\n              @click=\"handlePlacemarkClick(placemark)\"\n            >\n              <uimage\n                class=\"icon\"\n                :cdn=\"true\"\n                :src=\"`/images/third-party/mapbox-${placemark.image ? 'attraction' : 'veterinary'}.svg`\"\n              />\n              <span class=\"text\">{{ placemark.name }}</span>\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .modal {\n    position: relative;\n\n    .mapbox {\n      width: 100%;\n      height: 100%;\n    }\n\n    .panel {\n      position: absolute;\n      right: 3rem;\n      top: 3rem;\n      bottom: 3rem;\n      display: flex;\n      flex-direction: column;\n      width: 22rem;\n      padding: $lg-gap $gap $gap $lg-gap;\n      background: $module-bg-opaque;\n      border-radius: $lg-radius;\n      box-shadow: 0px 0px 8px 4px rgb(0 0 0 / 10%);\n\n      .info {\n        margin-bottom: 2rem;\n        padding-bottom: $lg-gap;\n        border-bottom: 1px solid $module-bg-darker-1;\n\n        .title {\n          margin-top: 0;\n          margin-bottom: $gap;\n        }\n\n        .description {\n          margin: 0;\n          @include text-overflow();\n        }\n      }\n\n      .folders {\n        flex: 1;\n        list-style: none;\n        padding: 0;\n        overflow: auto;\n\n        .folder {\n          &:last-child {\n            .placemarks {\n              &:last-child {\n                margin-bottom: 0;\n              }\n            }\n          }\n\n          .title {\n            font-size: $font-size-h4;\n            margin-bottom: $gap;\n            scroll-snap-align: start;\n\n            .text {\n              margin-left: $sm-gap;\n              font-weight: bold;\n            }\n          }\n\n          .empty,\n          .placemarks {\n            padding-left: 2rem;\n            margin-bottom: $gap;\n            color: $text-secondary;\n          }\n\n          .placemarks {\n            list-style: none;\n\n            .placemark {\n              line-height: 2;\n              cursor: pointer;\n              scroll-snap-align: start;\n              &:hover {\n                color: $text;\n              }\n\n              .icon {\n                width: 1.4em;\n                margin-top: -2px;\n              }\n\n              .text {\n                margin-left: $sm-gap;\n                @include text-overflow();\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import type { Map } from 'mapbox-gl'\n  import { shallowRef, computed, onMounted } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useMyGoogleMapStore } from '/@/stores/media'\n  import { GEO_INFO, VALUABLE_LINKS } from '/@/config/app.config'\n  import { i18ns } from '../shared'\n  import { gmmFoldersToGeoJSON, FeatureCollectionJSON, GoogleMyMapFolder } from './helper'\n  import Mapbox from './mapbox.vue'\n  import FootprintModal from './modal.vue'\n\n  const { isZhLang } = useEnhancer()\n  const map = shallowRef<Map>()\n  const modalVisible = shallowRef(false)\n  const gmStore = useMyGoogleMapStore()\n\n  const gmFolders = computed<Array<GoogleMyMapFolder>>(() => {\n    const folders = [...(gmStore.data?.Folder ?? [])]\n    folders.reverse()\n    return folders.map((folder, fi) => {\n      const placemark = folder.Placemark ?? []\n      const placemarks = Array.isArray(placemark) ? placemark : [placemark]\n      return {\n        name: folder.name,\n        placemarks: placemarks.map((placemark, pi) => {\n          const [longitude, latitude] = placemark.Point.coordinates.split(',').map(Number)\n          const extendedData = placemark.ExtendedData?.Data\n          return {\n            index: pi,\n            id: `placemark-${fi}-${pi}`,\n            name: placemark.name,\n            description: placemark.description,\n            coordinates: [longitude, latitude],\n            image: extendedData?.['@name'] === 'gx_media_links' ? extendedData?.value : null\n          }\n        })\n      }\n    })\n  })\n\n  const gmGeoJson = computed<FeatureCollectionJSON>(() => {\n    return gmmFoldersToGeoJSON(gmFolders.value)\n  })\n\n  const openModal = () => {\n    modalVisible.value = true\n  }\n\n  const handleFolderClick = (index: number) => {\n    const targetFolder = gmFolders.value[index]!\n    const [firstPlacemark] = targetFolder.placemarks\n    if (firstPlacemark) {\n      map.value?.flyTo({ center: firstPlacemark.coordinates, zoom: 4, speed: 1.2 })\n    }\n  }\n\n  const handleMapboxReady = (payload: { map: Map }) => {\n    map.value = payload.map\n  }\n\n  const handleLivingNow = () => {\n    map.value?.flyTo({\n      center: GEO_INFO.coordinates as any,\n      zoom: 14\n    })\n  }\n\n  onMounted(() => gmStore.fetch())\n</script>\n\n<template>\n  <div class=\"footprint-map\">\n    <client-only>\n      <popup v-model:visible=\"modalVisible\" :scroll-close=\"false\">\n        <footprint-modal\n          class=\"footprint-modal\"\n          :name=\"gmStore.data?.name\"\n          :description=\"gmStore.data?.description\"\n          :gm-folders=\"gmFolders\"\n          :gm-geo-json=\"gmGeoJson\"\n        />\n      </popup>\n    </client-only>\n    <div class=\"mapbox-wrapper\" :placeholder=\"isZhLang ? i18ns.footprint.zh : i18ns.footprint.en\">\n      <mapbox class=\"mapbox\" :gm-geo-json=\"gmGeoJson\" @ready=\"handleMapboxReady\" />\n      <div class=\"toolbar\">\n        <ulink class=\"button\" :href=\"VALUABLE_LINKS.GOOGLE_MY_MAP\">\n          <i class=\"iconfont icon-google-maps\"></i>\n        </ulink>\n        <button class=\"button\" @click=\"openModal\">\n          <i class=\"iconfont icon-fullscreen\"></i>\n        </button>\n      </div>\n    </div>\n    <div class=\"legends\">\n      <div class=\"now\">\n        <i class=\"iconfont icon-location\"></i>\n        <span class=\"text\" @click=\"handleLivingNow\">\n          {{ isZhLang ? GEO_INFO.zh_title : GEO_INFO.en_title }}\n        </span>\n      </div>\n      <ul class=\"folders\" v-if=\"gmStore.data\">\n        <li\n          class=\"item\"\n          :key=\"index\"\n          v-for=\"(folder, index) in gmFolders.slice(0, 4)\"\n          @click=\"handleFolderClick(index)\"\n        >\n          <i class=\"iconfont icon-route\"></i>\n          <span class=\"text\">{{ folder.name }}</span>\n          <span class=\"count\">({{ folder.placemarks.length }})</span>\n        </li>\n        <li class=\"item\" @click=\"openModal\">\n          <i class=\"iconfont icon-route\"></i>\n          <span class=\"text\"></span>\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .footprint-modal {\n    width: 88vw;\n    height: 88vh;\n  }\n\n  .footprint-map {\n    position: relative;\n    display: flex;\n    width: 100%;\n    $map-width: 790px;\n    $map-height: 220px;\n\n    .legends .folders,\n    .legends .now {\n      @include common-bg-module();\n      @include radius-box($lg-radius);\n    }\n\n    .legends {\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n      margin-left: $gap * 2;\n      .now {\n        flex-shrink: 0;\n        display: inline-flex;\n        margin-bottom: $lg-gap;\n        padding: 0 $gap;\n        width: 100%;\n        line-height: 3.4em;\n        cursor: pointer;\n        color: $text-secondary;\n        &:hover {\n          color: $text;\n        }\n\n        .iconfont {\n          margin-right: $sm-gap;\n        }\n        .text {\n          font-weight: bold;\n        }\n      }\n\n      .folders {\n        flex: 1;\n        list-style: none;\n        margin: 0;\n        padding: $sm-gap $gap;\n\n        .item {\n          line-height: 2.4em;\n          cursor: pointer;\n          color: $text-secondary;\n          &:hover {\n            color: $text;\n          }\n\n          .iconfont {\n            margin-right: $gap;\n          }\n          .text {\n            font-weight: bold;\n            margin-right: $xs-gap;\n          }\n        }\n      }\n    }\n\n    .mapbox-wrapper {\n      position: relative;\n      padding: $gap;\n      @include common-bg-module();\n      @include radius-box($lg-radius);\n\n      .mapbox {\n        width: $map-width;\n        height: $map-height;\n        display: block;\n      }\n\n      .toolbar {\n        position: absolute;\n        top: $lg-gap * 2;\n        right: $lg-gap * 2;\n        z-index: $z-index-normal + 1;\n        display: flex;\n\n        .button {\n          margin-left: $lg-gap;\n          display: block;\n          $size: 2em;\n          width: $size;\n          height: $size;\n          line-height: $size;\n          border-radius: $xs-radius;\n          text-align: center;\n          background-color: $module-bg;\n          font-size: $font-size-h4;\n          color: $text-secondary;\n          @include backdrop-blur(1px);\n          &:hover {\n            color: $link-color;\n            background-color: $module-bg-opaque;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { reactive } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { RouteName } from '/@/app/router'\n  import { useStores } from '/@/stores'\n  import { useUniversalFetch } from '/@/universal'\n  import { getPageRoute } from '/@/transforms/route'\n  import { getStaticURL } from '/@/transforms/url'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { META, VALUABLE_LINKS } from '/@/config/app.config'\n  import InstagramMedia from './media/instagram.vue'\n  import DoubanStatistic from './statistic/douban.vue'\n  import GithubStatistic from './statistic/github.vue'\n  import TwitterStatistic from './statistic/twitter.vue'\n  import NpmStatistic from './statistic/npm.vue'\n  import AggregateCalendar from './calendar/index.vue'\n  import FootprintMap from './footprint/index.vue'\n  import { useAboutPageMeta, getAdminAvatar, i18ns, SPECIAL_LINKS } from './shared'\n\n  const { gtag, gState, isZhLang } = useEnhancer()\n  const { adminInfo, appOption, sponsor } = useStores()\n\n  const handleGTagEvent = (event: string) => {\n    gtag?.event(event, {\n      event_category: GAEventCategories.About\n    })\n  }\n\n  const modalState = reactive({\n    wechat: false\n  })\n\n  const handleOpenWechat = () => {\n    modalState.wechat = true\n    handleGTagEvent('wechat_modal')\n  }\n\n  const handleSponsor = () => {\n    sponsor.fetch()\n    gState.toggleSwitcher('sponsor', true)\n    handleGTagEvent('sponsor_modal')\n  }\n\n  const handleStatement = () => {\n    gState.toggleSwitcher('statement', true)\n    handleGTagEvent('statement_modal')\n  }\n\n  const handleFeedback = () => {\n    gState.toggleSwitcher('feedback', true)\n    handleGTagEvent('feedback_modal')\n  }\n\n  // MARK: To prevent vite from parsing video.source.src as an asset instead of a static resource and failing to compile it\n  const backgroundVideo = getStaticURL('/assets/page-about-background.mp4')\n\n  // meta\n  useAboutPageMeta()\n  // prefetch\n  useUniversalFetch(() => Promise.all([adminInfo.fetch(), appOption.fetch()]))\n\n  const links = [\n    {\n      class: 'lens',\n      icon: 'icon-lens',\n      i18n: i18ns.lens,\n      route: getPageRoute(RouteName.Lens)\n    },\n    {\n      class: 'nft',\n      icon: 'icon-opensea',\n      i18n: i18ns.nft,\n      href: VALUABLE_LINKS.OPENSEA\n    },\n    {\n      class: 'archive',\n      icon: 'icon-quill',\n      i18n: i18ns.archive,\n      route: getPageRoute(RouteName.Archive)\n    },\n    {\n      class: 'guestbook',\n      icon: 'icon-comment',\n      i18n: i18ns.guestbook,\n      route: getPageRoute(RouteName.Guestbook)\n    },\n    {\n      class: 'feedback',\n      icon: 'icon-mail-plane',\n      i18n: i18ns.feedback,\n      onClick: handleFeedback\n    },\n    {\n      class: 'telegram',\n      icon: 'icon-telegram',\n      i18n: i18ns.telegramGroup,\n      href: VALUABLE_LINKS.TELEGRAM_GROUP\n    },\n    {\n      class: 'discord',\n      icon: 'icon-discord',\n      i18n: i18ns.discordGroup,\n      href: VALUABLE_LINKS.DISCORD_GROUP\n    },\n    {\n      class: 'sponsor',\n      icon: 'icon-heart',\n      i18n: i18ns.sponsor,\n      onClick: handleSponsor\n    },\n    {\n      class: 'statement',\n      icon: 'icon-faq',\n      i18n: i18ns.statement,\n      onClick: handleStatement\n    },\n    {\n      class: 'rss',\n      icon: 'icon-rss',\n      i18n: i18ns.rss,\n      href: VALUABLE_LINKS.RSS\n    }\n  ]\n</script>\n\n<template>\n  <div class=\"about-page\">\n    <div class=\"page-banner\">\n      <div class=\"background\">\n        <video class=\"video\" loop muted autoplay :controls=\"false\">\n          <source :src=\"backgroundVideo\" type=\"video/mp4\" />\n        </video>\n      </div>\n      <div class=\"content\">\n        <uimage class=\"avatar\" :src=\"getAdminAvatar(adminInfo.data?.avatar)\" />\n        <h1 class=\"name\">{{ adminInfo.data?.name || '-' }}</h1>\n        <p class=\"slogan\">{{ adminInfo.data?.slogan || '-' }}</p>\n        <p class=\"biography\">\n          <webfont bolder>{{ isZhLang ? META.zh_biography : META.en_biography }}</webfont>\n        </p>\n        <div class=\"socials\">\n          <span class=\"normal\">\n            <ulink class=\"item github\" :href=\"VALUABLE_LINKS.GITHUB\">\n              <i class=\"iconfont icon-github\" />\n              <span class=\"text\">GitHub</span>\n            </ulink>\n            <ulink class=\"item twitter\" :href=\"VALUABLE_LINKS.TWITTER\">\n              <i class=\"iconfont icon-twitter\" />\n              <span class=\"text\">Twitter</span>\n            </ulink>\n            <ulink class=\"item instagram\" :href=\"VALUABLE_LINKS.INSTAGRAM\">\n              <i class=\"iconfont icon-instagram\" />\n              <span class=\"text\">Instagram</span>\n            </ulink>\n            <ulink class=\"item youtube\" :href=\"VALUABLE_LINKS.YOUTUBE_CHANNEL\">\n              <i class=\"iconfont icon-youtube\" />\n              <span class=\"text\">YouTube</span>\n            </ulink>\n          </span>\n          <span class=\"mini\">\n            <ulink class=\"item telegram\" :href=\"VALUABLE_LINKS.TELEGRAM\">\n              <i class=\"iconfont icon-telegram\" />\n            </ulink>\n            <button class=\"item wechat\" @click=\"handleOpenWechat\">\n              <i class=\"iconfont icon-wechat\" />\n              <client-only>\n                <popup v-model:visible=\"modalState.wechat\" :scroll-close=\"false\">\n                  <div class=\"qrcode-modal wechat\">\n                    <div class=\"background\"></div>\n                    <uimage class=\"image\" cdn src=\"/images/qrcodes/wechat.jpg\" />\n                    <span class=\"text\">\n                       &nbsp;\n                      <i18n en=\"Friend me on WeChat\" zh=\"\"></i18n>\n                    </span>\n                  </div>\n                </popup>\n              </client-only>\n            </button>\n            <ulink class=\"item linkedin\" :href=\"VALUABLE_LINKS.LINKEDIN\">\n              <i class=\"iconfont icon-linkedin\" />\n            </ulink>\n            <ulink class=\"item douban\" :href=\"VALUABLE_LINKS.DOUBAN\">\n              <i class=\"iconfont icon-douban\" />\n            </ulink>\n          </span>\n        </div>\n      </div>\n    </div>\n    <container class=\"page-content\">\n      <div class=\"links\">\n        <template :key=\"index\" v-for=\"(item, index) in links\">\n          <component\n            class=\"item\"\n            :class=\"item.class\"\n            :is=\"item.onClick ? 'button' : 'ulink'\"\n            :href=\"item.href\"\n            :to=\"item.route\"\n            @click=\"item.onClick\"\n          >\n            <span class=\"left\">\n              <i class=\"iconfont\" :class=\"item.icon\"></i>\n              <span class=\"text\"><i18n v-bind=\"item.i18n\" /></span>\n            </span>\n            <span class=\"right\">\n              <i class=\"iconfont icon-next\"></i>\n            </span>\n          </component>\n        </template>\n      </div>\n      <div class=\"statistics\">\n        <github-statistic />\n        <npm-statistic />\n        <twitter-statistic />\n        <douban-statistic />\n      </div>\n      <div class=\"plogs\">\n        <instagram-media />\n      </div>\n      <div class=\"footprint\">\n        <footprint-map />\n      </div>\n      <div class=\"calendar\">\n        <aggregate-calendar />\n      </div>\n      <div class=\"footer-links\">\n        <div class=\"friendlinks\">\n          <template v-for=\"(link, index) in appOption.data?.friend_links || []\" :key=\"index\">\n            <divider type=\"vertical\" size=\"lg\" v-if=\"index !== 0\" />\n            <a :href=\"link.value\" class=\"item\" target=\"_blank\" rel=\"external nofollow noopener\">\n              {{ link.name }}\n            </a>\n          </template>\n        </div>\n        <div class=\"speciallinks\">\n          <template v-for=\"(item, index) in SPECIAL_LINKS\" :key=\"index\">\n            <divider type=\"vertical\" size=\"lg\" v-if=\"index !== 0\" />\n            <a :href=\"item.url\" class=\"item\" target=\"_blank\" rel=\"external nofollow noopener\">\n              {{ item.name }}\n            </a>\n          </template>\n        </div>\n      </div>\n    </container>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .qrcode-modal {\n    $image-size: 16rem;\n    width: 23rem;\n    height: 28rem;\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    &.wechat {\n      --item-primary: #{$wechat-primary};\n    }\n\n    .background {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 45%;\n      background: var(--item-primary);\n    }\n\n    .image {\n      z-index: $z-index-normal + 1;\n      width: $image-size;\n      height: $image-size;\n      margin-bottom: 2rem;\n      background-color: $module-bg-opaque;\n      @include radius-box($sm-radius);\n    }\n\n    .text {\n      font-weight: bold;\n      color: var(--item-primary);\n    }\n  }\n\n  .about-page {\n    width: 100%;\n    overflow: hidden;\n\n    .page-banner {\n      $banner-height: 20rem;\n\n      .background {\n        display: block;\n        position: absolute;\n        width: 100%;\n        height: $banner-height;\n        top: 0;\n        left: 0;\n        overflow: hidden;\n        z-index: $z-index-normal + 1;\n        background-color: $module-bg-darker-1;\n        &::before {\n          content: '';\n          position: absolute;\n          display: block;\n          height: 1rem;\n          bottom: -0.5rem;\n          left: 0;\n          right: 0;\n          background-image: radial-gradient(circle, transparent 70%, $text-reversal 70%);\n          background-size: 0.7em 1em;\n          background-position: 0 -0.5em;\n        }\n\n        .video {\n          width: 100%;\n          height: 100%;\n          object-fit: cover;\n          object-position: 0% 30%;\n          pointer-events: none;\n        }\n      }\n\n      .content {\n        position: relative;\n        display: flex;\n        align-items: center;\n        flex-direction: column;\n        justify-content: flex-start;\n        width: 100%;\n        background-color: $module-bg;\n        @include radius-box($lg-radius);\n        background-image: url('/images/page-about/background.png'),\n          linear-gradient($module-bg-opaque 40%, #00000000 100%);\n        background-size: contain;\n        background-repeat: repeat-x;\n        background-blend-mode: lighten;\n\n        .avatar {\n          $size: 8rem;\n          width: $size;\n          height: $size;\n          z-index: $z-index-normal + 2;\n          box-sizing: content-box;\n          margin-top: $banner-height - 4rem;\n          border: 8px solid $module-bg;\n          border-radius: 100%;\n          overflow: hidden;\n          background-color: $module-bg;\n          transition: transform $transition-time-slow;\n          &:hover {\n            transform: rotate(360deg);\n          }\n        }\n\n        .name,\n        .slogan {\n          text-align: center;\n          color: $text;\n        }\n\n        .name {\n          margin-top: $sm-gap;\n          margin-bottom: $gap;\n        }\n\n        .biography {\n          margin-bottom: $gap * 2;\n          font-size: $font-size-h3;\n        }\n\n        .socials {\n          $button-size: 3rem;\n          display: flex;\n          justify-content: center;\n          height: $button-size;\n          margin-bottom: $gap * 2;\n\n          .normal {\n            display: inline-flex;\n            align-items: center;\n            margin-right: $gap;\n\n            .item {\n              padding: 0 $gap;\n              margin-right: $gap;\n              height: 100%;\n              display: inline-flex;\n              align-items: center;\n              border-radius: $sm-radius;\n              color: $white;\n              transition: all $transition-time-fast;\n\n              .iconfont {\n                font-size: $font-size-h4;\n                margin-right: $sm-gap;\n              }\n\n              .text {\n                font-weight: bold;\n              }\n\n              &.github {\n                background-color: $github-primary;\n                &:hover {\n                  background-color: $github-primary-hover;\n                }\n              }\n              &.twitter {\n                background-color: $twitter-primary;\n                &:hover {\n                  background-color: $twitter-primary-hover;\n                }\n              }\n              &.youtube {\n                margin: 0;\n                background-color: $youtube-primary;\n                &:hover {\n                  background-color: mix($black, $youtube-primary, 8%);\n                }\n              }\n              &.instagram {\n                opacity: 0.8;\n                background: $instagram-primary;\n                background: $instagram-gradient;\n                &:hover {\n                  opacity: 1;\n                }\n              }\n            }\n          }\n\n          > .mini {\n            display: flex;\n\n            > .item {\n              display: inline-block;\n              width: $button-size;\n              height: $button-size;\n              line-height: $button-size;\n              margin-right: $gap;\n              text-align: center;\n              border-radius: $sm-radius;\n              color: $white;\n              opacity: 0.8;\n              transition: all $transition-time-fast;\n\n              &:hover {\n                opacity: 1;\n              }\n\n              .iconfont {\n                font-size: $font-size-h4;\n              }\n\n              &.wechat {\n                background-color: $wechat-primary;\n              }\n              &.telegram {\n                background-color: $telegram-primary;\n              }\n              &.douban {\n                background-color: $douban-primary;\n              }\n              &.stackoverflow {\n                background-color: $stackoverflow-primary;\n              }\n              &.algorithm {\n                background-color: $leetcode-primary;\n              }\n              &.quora {\n                background-color: $quora-primary;\n              }\n              &.linkedin {\n                background-color: $linkedin-primary;\n              }\n            }\n          }\n        }\n      }\n    }\n\n    .page-content {\n      margin: $gap * 2 0;\n    }\n\n    .links {\n      display: grid;\n      grid-template-columns: repeat(5, 1fr);\n      grid-gap: $gap * 2;\n      width: 100%;\n      margin-bottom: 2rem;\n\n      .item {\n        height: 5rem;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 0 1em 0 2em;\n        @include common-bg-module($transition-time-fast);\n        @include radius-box($lg-radius);\n        &.discord {\n          --item-primary: #{$discord-primary};\n          --item-hover: white;\n        }\n        &.telegram {\n          --item-primary: #{$telegram-primary};\n          --item-hover: white;\n        }\n        &.sponsor {\n          --item-primary: #{$red};\n          --item-hover: white;\n        }\n        &.statement {\n          --item-primary: #{$surmon};\n          --item-hover: white;\n        }\n        &.rss {\n          --item-primary: #{$rss-primary};\n          --item-hover: white;\n        }\n        &:hover {\n          background-color: var(--item-primary, $primary);\n          .left {\n            .iconfont,\n            .text {\n              color: var(--item-hover, $text-reversal);\n            }\n          }\n\n          .right {\n            opacity: 1;\n            transform: translateX(-$sm-gap);\n            color: var(--item-hover, $text-reversal);\n          }\n        }\n\n        .left {\n          .iconfont {\n            font-size: $font-size-h3;\n            margin-right: 0.8em;\n            color: var(--item-primary, $primary);\n          }\n\n          .text {\n            letter-spacing: 1px;\n            color: $text-secondary;\n            font-size: $font-size-h4;\n            font-weight: bold;\n          }\n        }\n\n        .right {\n          color: $text-divider;\n          opacity: 0.4;\n          transition:\n            opacity $transition-time-fast,\n            transform $transition-time-normal;\n        }\n      }\n    }\n\n    .statistics {\n      margin-bottom: $gap * 2;\n      display: grid;\n      grid-template-columns: repeat(4, 1fr);\n      grid-gap: $gap * 2;\n    }\n\n    .plogs,\n    .vlogs,\n    .movies,\n    .calendar {\n      margin-bottom: $gap * 2;\n      border-radius: $lg-radius;\n      padding: $gap;\n      @include common-bg-module();\n    }\n\n    .footprint {\n      width: 100%;\n      margin-bottom: $gap * 2;\n    }\n\n    .footer-links {\n      display: flex;\n      justify-content: space-between;\n      padding: 2rem $lg-gap;\n      @include common-bg-module();\n      @include radius-box($lg-radius);\n\n      .item {\n        font-weight: bold;\n        @include text-underline();\n      }\n\n      .speciallinks {\n        .item {\n          color: $text-disabled;\n          &:hover {\n            color: $text;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { useEnhancer } from '/@/app/enhancer'\n  import { LanguageKey } from '/@/language'\n  import { RouteName } from '/@/app/router'\n  import { META, VALUABLE_LINKS } from '/@/config/app.config'\n  import { useAdminInfoStore } from '/@/stores/basic'\n  import { useUniversalFetch } from '/@/universal'\n  import { getPageRoute } from '/@/transforms/route'\n  import PageBanner from '/@/components/common/banner.vue'\n  import { useAboutPageMeta, getAdminAvatar, i18ns } from './shared'\n\n  const { isZhLang } = useEnhancer()\n  const adminInfo = useAdminInfoStore()\n\n  useAboutPageMeta()\n  useUniversalFetch(() => adminInfo.fetch())\n</script>\n\n<template>\n  <div class=\"about-page\">\n    <page-banner :position=\"70\" :is-mobile=\"true\" image=\"/images/page-about/banner-mobile.jpg\">\n      <template #title>\n        <i18n :k=\"LanguageKey.PAGE_ABOUT\" />\n      </template>\n    </page-banner>\n    <div class=\"profile\">\n      <div class=\"avatar\">\n        <uimage class=\"image\" :src=\"getAdminAvatar(adminInfo.data?.avatar)\" />\n      </div>\n      <h2 class=\"name\">{{ adminInfo.data?.name || '-' }}</h2>\n      <h5 class=\"slogan\">{{ adminInfo.data?.slogan || '-' }}</h5>\n      <divider dashed />\n      <h4 class=\"bio\">\n        <webfont bolder>{{ isZhLang ? META.zh_biography : META.en_biography }}</webfont>\n      </h4>\n    </div>\n    <div class=\"links\">\n      <div class=\"list col-2\">\n        <router-link class=\"item text-only\" :to=\"getPageRoute(RouteName.Archive)\">\n          <i class=\"iconfont icon-quill\" />\n          <i18n v-bind=\"i18ns.archive\" />\n        </router-link>\n        <router-link class=\"item text-only\" :to=\"getPageRoute(RouteName.Guestbook)\">\n          <i class=\"iconfont icon-comment\" />\n          <i18n v-bind=\"i18ns.guestbook\" />\n        </router-link>\n      </div>\n      <divider dashed />\n      <div class=\"list col-2\">\n        <ulink class=\"item discord\" :href=\"VALUABLE_LINKS.DISCORD_GROUP\">\n          <i class=\"iconfont icon-discord\" />\n          <i18n v-bind=\"i18ns.discordGroup\" />\n        </ulink>\n        <ulink class=\"item telegram\" :href=\"VALUABLE_LINKS.TELEGRAM_GROUP\">\n          <i class=\"iconfont icon-telegram\" />\n          <i18n v-bind=\"i18ns.telegramGroup\" />\n        </ulink>\n      </div>\n    </div>\n    <div class=\"links\">\n      <div class=\"list col-3\">\n        <ulink class=\"item center github\" :href=\"VALUABLE_LINKS.GITHUB\">\n          <i class=\"iconfont icon-github\" />\n          <span class=\"text\">GitHub</span>\n        </ulink>\n        <ulink class=\"item center twitter\" :href=\"VALUABLE_LINKS.TWITTER\">\n          <i class=\"iconfont icon-twitter\" />\n          <span class=\"text\">Twitter</span>\n        </ulink>\n        <ulink class=\"item center instagram\" :href=\"VALUABLE_LINKS.INSTAGRAM\">\n          <i class=\"iconfont icon-instagram\" />\n          <span class=\"text\">Instagram</span>\n        </ulink>\n      </div>\n      <divider dashed />\n      <div class=\"list col-4\">\n        <ulink class=\"item telegram icon-only\" :href=\"VALUABLE_LINKS.TELEGRAM\">\n          <i class=\"iconfont icon-telegram\" />\n        </ulink>\n        <ulink class=\"item linkedin icon-only\" :href=\"VALUABLE_LINKS.LINKEDIN\">\n          <i class=\"iconfont icon-linkedin\" />\n        </ulink>\n        <ulink class=\"item youtube icon-only\" :href=\"VALUABLE_LINKS.YOUTUBE_CHANNEL\">\n          <i class=\"iconfont icon-youtube\" />\n        </ulink>\n        <ulink class=\"item douban icon-only\" :href=\"VALUABLE_LINKS.DOUBAN_MOVIE\">\n          <i class=\"iconfont icon-douban\" />\n        </ulink>\n      </div>\n    </div>\n    <div class=\"qrcodes\">\n      <div class=\"item\">\n        <uimage cdn class=\"image\" src=\"/images/qrcodes/wechat.jpg\" />\n      </div>\n      <div class=\"item\">\n        <uimage cdn class=\"image\" src=\"/images/qrcodes/wechat-channel.png\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .about-page {\n    .profile {\n      position: relative;\n      padding: $lg-gap;\n      padding-top: $gap * 5;\n      border-bottom-left-radius: $lg-radius;\n      border-bottom-right-radius: $lg-radius;\n      background-color: $module-bg-opaque;\n      &::before {\n        content: '';\n        position: absolute;\n        display: block;\n        height: 1rem;\n        bottom: -0.5rem;\n        left: 0;\n        right: 0;\n        background-image: radial-gradient(circle, transparent 70%, $module-bg-opaque 70%);\n        background-size: 0.7em 1em;\n        background-position: 0 -0.5em;\n      }\n\n      .avatar {\n        width: 100%;\n        position: absolute;\n        top: -$gap * 4;\n        left: 0;\n        text-align: center;\n\n        .image {\n          $size: 7rem;\n          width: $size;\n          height: $size;\n          z-index: $z-index-normal + 2;\n          border-radius: 100%;\n          border: 6px solid $module-bg-opaque;\n          box-sizing: content-box;\n        }\n      }\n\n      .name,\n      .slogan {\n        text-align: center;\n        margin-top: 0;\n        margin-bottom: $gap;\n      }\n\n      .slogan {\n        line-height: $line-height-base * 1.2;\n      }\n\n      .bio {\n        margin: 0;\n        line-height: $line-height-base * 1.3;\n        text-align: center;\n      }\n    }\n\n    .links {\n      margin-top: $lg-gap;\n      padding: $gap;\n      border-radius: $lg-radius;\n      background-color: $module-bg-opaque;\n      overflow: hidden;\n\n      .list {\n        display: grid;\n        grid-gap: $lg-gap;\n        &.col-2 {\n          grid-template-columns: repeat(2, 1fr);\n        }\n        &.col-3 {\n          grid-template-columns: repeat(3, 1fr);\n        }\n        &.col-4 {\n          grid-template-columns: repeat(4, 1fr);\n        }\n\n        .image-item {\n          max-width: 100%;\n        }\n\n        .item {\n          display: inline-flex;\n          align-items: center;\n          height: 3rem;\n          padding: 0 1em;\n          border-radius: $sm-radius;\n          color: $white;\n          overflow: hidden;\n          &.center {\n            justify-content: center;\n          }\n          &.text-only {\n            background-color: $surmon;\n          }\n          &.icon-only {\n            justify-content: center;\n            .iconfont {\n              font-size: $font-size-h3;\n              margin: 0;\n            }\n          }\n\n          .iconfont {\n            margin-right: $sm-gap;\n          }\n\n          .text {\n            font-weight: bold;\n          }\n\n          &.github {\n            background-color: $github-primary;\n          }\n          &.twitter {\n            background-color: $twitter-primary;\n          }\n          &.instagram {\n            background: $instagram-primary;\n            background: $instagram-gradient;\n            @include visibility-transition();\n          }\n          &.discord {\n            background-color: $discord-primary;\n          }\n          &.telegram {\n            background-color: $telegram-primary;\n          }\n          &.douban {\n            background-color: $douban-primary;\n          }\n          &.youtube {\n            background-color: $youtube-primary;\n          }\n          &.linkedin {\n            background-color: $linkedin-primary;\n          }\n        }\n      }\n    }\n\n    .qrcodes {\n      margin-top: $lg-gap;\n      display: grid;\n      grid-template-columns: repeat(2, 1fr);\n      grid-gap: $lg-gap;\n\n      .item {\n        width: 100%;\n        padding: $gap;\n        border-radius: $lg-radius;\n        overflow: hidden;\n        background-color: $module-bg-opaque;\n\n        .image {\n          width: 100%;\n          height: 100%;\n          border-radius: $xs-radius;\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { ref, computed } from 'vue'\n  import { isClient } from '/@/app/environment'\n  import { useUniversalFetch } from '/@/universal'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useStores } from '/@/stores'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { CommentPostId } from '/@/constants/state'\n  import { Language, LanguageKey } from '/@/language'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { getCDN_URL } from '/@/transforms/url'\n  import { META } from '/@/config/app.config'\n  import PageBanner from '/@/components/common/banner.vue'\n  import Comment from '/@/components/comment/index.vue'\n\n  const props = defineProps<{\n    isMobile?: boolean\n  }>()\n\n  const { i18n: _i18n, seo, gtag, gState, isDarkTheme, isZhLang } = useEnhancer()\n  const { identity, appOption, comment: commentStore } = useStores()\n  const isLiked = computed(() => identity.isLikedPage(CommentPostId.Guestbook))\n  const siteLikes = computed(() => appOption.data?.meta.likes || 0)\n  // MARK: Only for client-side routing to navigate to this page\n  const isLoading = ref(isClient && gState.isHydrated.value)\n  const bannerImage = `/images/page-guestbook/banner.jpg`\n\n  const handleLike = async () => {\n    if (isLiked.value) {\n      return false\n    }\n\n    gtag?.event('like_site', {\n      event_category: GAEventCategories.Universal\n    })\n\n    try {\n      await appOption.postSiteLike()\n      identity.likePage(CommentPostId.Guestbook)\n    } catch (error) {\n      const message = _i18n.t(LanguageKey.POST_ACTION_ERROR)\n      console.warn(message, error)\n      alert(message)\n    }\n  }\n\n  const fetchAllData = () => {\n    const appOptionRequest = appOption.fetch()\n    const commentRequest = commentStore.fetchList({ post_id: CommentPostId.Guestbook })\n    return Promise.all([appOptionRequest, commentRequest]).then(() => {\n      isLoading.value = false\n    })\n  }\n\n  seo(() => {\n    const enTitle = firstUpperCase(_i18n.t(LanguageKey.PAGE_GUESTBOOK, Language.English)!)\n    const titles = isZhLang.value ? [_i18n.t(LanguageKey.PAGE_GUESTBOOK), enTitle] : [enTitle]\n    return {\n      pageTitle: titles.join(' | '),\n      description: ` ${META.author} `,\n      ogType: 'website',\n      ogImage: getCDN_URL(bannerImage)\n    }\n  })\n\n  useUniversalFetch(() => fetchAllData())\n</script>\n\n<template>\n  <div class=\"guestbook-page\">\n    <responsive>\n      <template #desktop>\n        <div class=\"desktop-banner\">\n          <uimage cdn class=\"image\" :src=\"bannerImage\" />\n          <button class=\"like\" :class=\"{ liked: isLiked }\" :disabled=\"isLiked\" @click=\"handleLike\">\n            <i class=\"icon iconfont icon-heart\"></i>\n            <span class=\"count\">{{ isLiked ? `${siteLikes - 1} + 1` : siteLikes }}</span>\n          </button>\n          <span class=\"slogan\">\n            <webfont class=\"text\" :class=\"{ dark: isDarkTheme }\">\n              <i18n :k=\"LanguageKey.GUESTBOOK_SLOGAN\" />\n            </webfont>\n          </span>\n        </div>\n      </template>\n      <template #mobile>\n        <page-banner class=\"mobile-banner\" :is-mobile=\"true\" :position=\"70\" :image=\"bannerImage\">\n          <template #title>\n            <i18n :k=\"LanguageKey.PAGE_GUESTBOOK\" />\n          </template>\n          <template #description>\n            <i18n :k=\"LanguageKey.GUESTBOOK_SLOGAN\" />\n          </template>\n        </page-banner>\n      </template>\n    </responsive>\n    <div class=\"comment\">\n      <comment :post-id=\"0\" :plain=\"props.isMobile\" :fetching=\"isLoading\" />\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .guestbook-page {\n    .mobile-banner {\n      margin-bottom: $lg-gap;\n    }\n\n    .desktop-banner {\n      position: relative;\n      margin-bottom: $lg-gap;\n      width: 100%;\n      height: 19rem;\n      border: 0;\n      background-color: $module-bg;\n      @include radius-box($lg-radius);\n\n      .image {\n        margin-top: -($gap * 6);\n        transition: all $transition-time-slow;\n        &:hover {\n          transform: rotate(2deg) scale(1.1);\n        }\n      }\n\n      .like {\n        position: absolute;\n        left: $lg-gap * 2;\n        bottom: $gap * 2;\n        display: inline-flex;\n        align-items: center;\n\n        &.liked,\n        &:hover {\n          .icon {\n            color: $red;\n          }\n        }\n\n        .icon {\n          margin-right: $sm-gap;\n          color: rgba($red, 0.6);\n          font-size: $font-size-h2;\n          @include color-transition();\n        }\n\n        .count {\n          color: rgba($white, 0.8);\n          font-weight: bold;\n        }\n      }\n\n      .slogan {\n        $size: 2em;\n        display: block;\n        position: absolute;\n        right: $lg-gap * 2;\n        bottom: $gap * 2;\n        height: $size;\n        line-height: $size;\n        padding: 0 $sm-gap;\n        padding-left: 3rem;\n        border-top-right-radius: $mini-radius;\n        border-bottom-right-radius: $mini-radius;\n        background: linear-gradient(to left, $module-bg-lighter, $module-bg, transparent);\n        opacity: 0.8;\n        cursor: none;\n\n        .text {\n          letter-spacing: 0.3px;\n          color: $text;\n          background-clip: text;\n          background-image: url('/images/page-guestbook/banner.jpg');\n          background-position: 100% 80%;\n          -webkit-background-clip: text;\n          -webkit-text-fill-color: transparent;\n          &.dark {\n            -webkit-text-fill-color: $text !important;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { useEnhancer } from '/@/app/enhancer'\n  import { Language, LanguageKey } from '/@/language'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { getCDN_URL } from '/@/transforms/url'\n  import { META, VALUABLE_LINKS } from '/@/config/app.config'\n\n  const props = defineProps<{\n    isMobile?: boolean\n  }>()\n\n  const { i18n: _i18n, seo, gtag, isZhLang } = useEnhancer()\n  const handleAppEvent = (name: string) => {\n    gtag?.event(name, {\n      event_category: GAEventCategories.App\n    })\n  }\n\n  seo(() => {\n    const enTitle = firstUpperCase(_i18n.t(LanguageKey.PAGE_APP, Language.English)!)\n    const titles = isZhLang.value ? [_i18n.t(LanguageKey.PAGE_APP), enTitle] : [enTitle]\n    return {\n      pageTitle: titles.join(' | '),\n      description: `${META.title} App `,\n      ogImage: getCDN_URL('/images/page-app/logo.png')\n    }\n  })\n</script>\n\n<template>\n  <div class=\"app-page\" :class=\"{ mobile: props.isMobile }\">\n    <div class=\"app\">\n      <div class=\"logo\">\n        <uimage cdn alt=\"app-logo\" src=\"/images/page-app/logo.png\" />\n      </div>\n      <h2 class=\"title\">{{ META.title }}</h2>\n      <p class=\"description\">\n        <webfont><i18n :k=\"LanguageKey.APP_SLOGAN\" /></webfont>\n      </p>\n      <div class=\"screen\">\n        <uimage cdn alt=\"app-hot\" class=\"screen-img\" src=\"/images/page-app/hot.png\" />\n        <div class=\"download\">\n          <uimage cdn class=\"qrcode\" alt=\"qrcode\" src=\"/images/page-app/qrcode.png\" />\n          <ulink\n            class=\"button\"\n            :href=\"VALUABLE_LINKS.GITHUB_SURMON_ME_NATIVE + '#android'\"\n            @mousedown=\"handleAppEvent('download_android_app')\"\n          >\n            <i class=\"icon iconfont icon-android\"></i>\n            <span class=\"text\">Android</span>\n            <i class=\"new-window iconfont icon-new-window-s\"></i>\n          </ulink>\n          <ulink\n            class=\"button\"\n            :href=\"VALUABLE_LINKS.GITHUB_SURMON_ME_NATIVE + '#ios'\"\n            @mousedown=\"handleAppEvent('download_ios_app')\"\n          >\n            <i class=\"icon iconfont icon-apple\"></i>\n            <span class=\"text\">iOS</span>\n            <i class=\"new-window iconfont icon-new-window-s\"></i>\n          </ulink>\n          <ulink\n            class=\"source-code\"\n            :href=\"VALUABLE_LINKS.GITHUB_SURMON_ME_NATIVE\"\n            @mousedown=\"handleAppEvent('app_source_code')\"\n          >\n            <i class=\"iconfont icon-git\"></i>\n            Source Code\n          </ulink>\n        </div>\n      </div>\n      <p class=\"rss\">\n        <span class=\"prefix\"><i18n zh=\"\" en=\"[\" /></span>\n        <span class=\"deprecated\"><i18n zh=\"\" en=\"DEPRECATED!\" /></span>\n        <i18n zh=\"\" en=\"Recommend\" />\n        <a class=\"link\" :href=\"VALUABLE_LINKS.RSS\" target=\"_blank\">\n          <i18n zh=\"RSS \" en=\"RSS subscription\" />\n        </a>\n        <span class=\"suffix\"><i18n zh=\"\" en=\"]\" /></span>\n      </p>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .app-page {\n    display: flex;\n    justify-content: center;\n    flex-direction: column;\n    align-items: center;\n    min-height: 68rem;\n    height: $full-page-active-content-height;\n\n    .app {\n      text-align: center;\n\n      .logo {\n        margin-bottom: $lg-gap * 2;\n        img {\n          width: 6rem;\n          border-radius: 1em;\n        }\n      }\n\n      .title {\n        margin-bottom: 1rem;\n        color: $primary;\n        font-weight: bold;\n        text-transform: uppercase;\n      }\n\n      .version {\n        color: $text-divider;\n        text-decoration: line-through;\n      }\n\n      .rss {\n        margin-top: 2rem;\n        margin-bottom: 0;\n        color: $text-secondary;\n\n        .deprecated {\n          font-weight: bold;\n          margin-right: $xs-gap;\n          color: $red;\n        }\n\n        .link {\n          margin-left: $xs-gap;\n          @include text-underline();\n        }\n\n        .prefix {\n          margin-right: $xs-gap;\n        }\n        .suffix {\n          margin-left: $xs-gap;\n        }\n      }\n\n      .screen {\n        margin-top: 3rem;\n        width: 36rem;\n        position: relative;\n\n        &:hover {\n          .screen-img {\n            opacity: 0.4;\n          }\n\n          .download {\n            @include visible();\n          }\n        }\n\n        .screen-img {\n          width: 100%;\n          @include visibility-transition($transition-time-normal);\n        }\n\n        .download {\n          $size: 12rem;\n          position: absolute;\n          width: 100%;\n          height: 100%;\n          top: 0;\n          left: 0;\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n          align-items: center;\n          @include hidden();\n          @include backdrop-blur(3px);\n          @include visibility-transition($transition-time-normal);\n\n          .qrcode {\n            width: $size;\n            height: auto;\n            @include radius-box($sm-radius);\n          }\n\n          .button {\n            width: $size;\n            height: 3rem;\n            display: flex;\n            align-items: center;\n            margin-top: 2rem;\n            padding: 0 1em;\n            border: 1px solid $primary;\n            border-radius: $xs-radius;\n            background: $module-bg;\n            color: $primary;\n            transition: all $transition-time-fast;\n            &:hover {\n              color: $text-reversal;\n              border-color: $primary-translucent;\n              background: $primary-lighter;\n            }\n\n            .icon {\n              font-size: $font-size-h4;\n              margin-right: $sm-gap;\n            }\n\n            .new-window {\n              margin-left: $xs-gap;\n              font-size: $font-size-small;\n            }\n          }\n\n          .source-code {\n            margin-top: 2rem;\n            border-bottom: 1px solid;\n            color: $text;\n            &:hover {\n              color: $primary;\n            }\n\n            .iconfont {\n              margin-right: $xs-gap;\n            }\n          }\n        }\n      }\n    }\n\n    &.mobile {\n      min-height: 53rem;\n      height: calc(100vh - #{$mobile-header-height + $lg-gap + $lg-gap + $mobile-footer-height});\n\n      .app {\n        .screen {\n          width: 100%;\n          margin-top: 3rem;\n          margin-bottom: 1rem;\n          text-align: center;\n\n          .screen-img {\n            opacity: 0.4;\n            width: 90%;\n          }\n\n          .download {\n            @include visible();\n          }\n        }\n      }\n    }\n  }\n</style>\n","import { ref, computed } from 'vue'\nimport { useEnhancer } from '/@/app/enhancer'\nimport { GAEventCategories } from '/@/constants/gtag'\nimport { useSponsorStore } from '/@/stores/sponsor'\nimport { IDENTITIES, VALUABLE_LINKS } from '/@/config/app.config'\n\nexport enum ProviderId {\n  GitHub = 'github',\n  PayPal = 'paypal',\n  Alipay = 'alipay',\n  WeChatPay = 'wechat-pay',\n  BitCoin = 'bitcoin',\n  Ethereum = 'ethereum'\n}\n\nexport const PROVIDER_IDS = Object.values(ProviderId)\nexport const PROVIDERS = [\n  {\n    id: ProviderId.GitHub,\n    title: 'GitHub Sponsors',\n    logo: '/images/third-party/github-sponsors-logo.svg'\n  },\n  {\n    id: ProviderId.PayPal,\n    title: 'PayPal me',\n    link: VALUABLE_LINKS.PAYPAL,\n    logo: '/images/third-party/paypal-logo.svg',\n    qrcode: '/images/third-party/paypal-qrcode.png'\n  },\n  {\n    id: ProviderId.Alipay,\n    title: '',\n    text: '',\n    logo: '/images/third-party/alipay-logo.svg',\n    qrcode: '/images/third-party/alipay-qrcode.png'\n  },\n  {\n    id: ProviderId.WeChatPay,\n    title: '',\n    text: '',\n    logo: '/images/third-party/wechat-pay-logo.svg',\n    qrcode: '/images/third-party/wechat-pay-qrcode.jpg'\n  },\n  {\n    id: ProviderId.BitCoin,\n    title: 'BTC',\n    address: IDENTITIES.BTC_ADDRESS,\n    logo: '/images/third-party/btc-logo.svg',\n    qrcode: '/images/third-party/btc-qrcode.png'\n  },\n  {\n    id: ProviderId.Ethereum,\n    title: 'ETH',\n    address: IDENTITIES.ETH_ADDRESS,\n    logo: '/images/third-party/eth-logo.svg',\n    qrcode: '/images/third-party/eth-qrcode.png'\n  }\n]\n\nexport type SponsorState = ReturnType<typeof useSponsorState>\nexport const useSponsorState = (initId?: ProviderId) => {\n  const { gtag } = useEnhancer()\n  const githubSponsor = useSponsorStore()\n  const activeId = ref(initId && PROVIDER_IDS.includes(initId) ? initId : PROVIDERS[0].id)\n  const activeProvider = computed(() => PROVIDERS.find((t) => t.id === activeId.value)!)\n\n  const setProviderId = (id: ProviderId) => {\n    if (PROVIDER_IDS.includes(id)) {\n      activeId.value = id\n      gtag?.event('sponsor_tab_switch', {\n        event_category: GAEventCategories.Widget\n      })\n    }\n  }\n\n  return {\n    activeId,\n    activeProvider,\n    setProviderId,\n    githubSponsor\n  }\n}\n","<script lang=\"ts\" setup>\n  import { computed } from 'vue'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { copy } from '/@/utils/clipboard'\n  import { ProviderId, SponsorState } from './state'\n\n  interface Props {\n    state: SponsorState\n    maxSponsors?: number\n  }\n\n  const props = withDefaults(defineProps<Props>(), {\n    maxSponsors: 19\n  })\n\n  const { isZhLang } = useEnhancer()\n  const activeProvider = computed(() => props.state.activeProvider.value)\n  const allGitHubSponsors = computed(() => {\n    return [\n      ...props.state.githubSponsor.activeSponsors.map((sponsor) => ({\n        active: true,\n        _: sponsor\n      })),\n      ...props.state.githubSponsor.inactiveSponsors.map((sponsor) => ({\n        active: false,\n        _: sponsor\n      }))\n    ]\n  })\n\n  const handleCopyAddress = (content: any) => {\n    copy(content).then(() => {\n      alert(isZhLang.value ? '' : 'Address copied!')\n    })\n  }\n</script>\n\n<template>\n  <div class=\"sponsor-provider\" :class=\"activeProvider.id\">\n    <p class=\"external\" v-if=\"activeProvider.link || activeProvider.address || activeProvider.text\">\n      <template v-if=\"activeProvider.link\">\n        <ulink class=\"link\" :href=\"activeProvider.link\">\n          <code>{{ activeProvider.link }}</code>\n        </ulink>\n        <i class=\"iconfont icon-new-window-s\"></i>\n      </template>\n      <template v-if=\"activeProvider.address\">\n        <code class=\"link\" @click=\"handleCopyAddress(activeProvider.address)\">\n          {{ activeProvider.address }}\n        </code>\n        <i class=\"iconfont icon-copy\"></i>\n      </template>\n      <template v-if=\"activeProvider.text\">\n        {{ activeProvider.text }}\n        <i class=\"iconfont icon-qrcode\"></i>\n      </template>\n    </p>\n    <uimage class=\"qrcode\" v-if=\"activeProvider.qrcode\" :src=\"activeProvider.qrcode\" cdn />\n    <div class=\"github-sponsors\" v-if=\"activeProvider.id == ProviderId.GitHub\">\n      <ulink class=\"link\" :href=\"VALUABLE_LINKS.GITHUB_SPONSORS\">\n        <i class=\"iconfont icon-heart\"></i>\n        <span class=\"text\">\n          <i18n en=\"Sponsor me on GitHub\" zh=\" GitHub Sponsor \" />\n        </span>\n      </ulink>\n      <transition name=\"module\">\n        <div class=\"sponsor-box\" v-if=\"allGitHubSponsors.length\">\n          <p class=\"total\">\n            <i18n>\n              <template #zh>\n                 GitHub Sponsors \n                <span class=\"active-total\"> {{ state.githubSponsor.activeSponsors.length }} </span>\n                + {{ state.githubSponsor.inactiveSponsors.length }} \n              </template>\n              <template #en>\n                I have accumulated\n                <span class=\"active-total\">{{ state.githubSponsor.activeSponsors.length }}</span>\n                + {{ state.githubSponsor.inactiveSponsors.length }} backers on GitHub Sponsors\n              </template>\n            </i18n>\n          </p>\n          <div class=\"sponsors\">\n            <ulink\n              v-for=\"({ _: item, active }, index) in allGitHubSponsors.slice(0, maxSponsors)\"\n              :href=\"item.url\"\n              :title=\"item.name\"\n              :class=\"['item', active ? 'active' : 'inactive']\"\n              :key=\"index\"\n            >\n              <uimage class=\"avatar\" :src=\"item.avatarUrl\" :alt=\"'@' + item.login\" />\n            </ulink>\n            <ulink\n              class=\"more-link\"\n              v-if=\"allGitHubSponsors.length > maxSponsors\"\n              :href=\"VALUABLE_LINKS.GITHUB_SPONSORS\"\n            >\n              + {{ allGitHubSponsors.length - maxSponsors }}\n            </ulink>\n          </div>\n        </div>\n      </transition>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .sponsor-provider {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    min-height: 18rem;\n\n    .external {\n      margin-bottom: $gap;\n      color: $text-secondary;\n\n      .link {\n        margin-left: $sm-gap;\n        cursor: pointer;\n        text-decoration: underline;\n        color: $text-secondary;\n        &:hover {\n          color: $link-color;\n        }\n      }\n\n      .iconfont {\n        font-size: $font-size-small;\n        color: $text-secondary;\n        margin-left: $xs-gap;\n      }\n    }\n\n    .qrcode {\n      height: 14rem;\n      max-height: 60%;\n      border-radius: $xs-radius;\n    }\n\n    .github-sponsors {\n      text-align: center;\n\n      .link {\n        display: inline-block;\n        padding: 0 1em;\n        line-height: 3em;\n        border-radius: $sm-radius;\n        background-color: $module-bg-darker-2;\n        transition: background-color $transition-time-fast;\n        &:hover {\n          background-color: $module-bg-darker-3;\n          .text {\n            color: $link-color;\n          }\n        }\n\n        .iconfont {\n          margin-right: $sm-gap;\n          font-size: $font-size-h4;\n          color: $github-sponsor-primary;\n        }\n\n        .text {\n          color: $text;\n          font-weight: bold;\n        }\n      }\n\n      .sponsor-box {\n        margin-top: 2rem;\n        margin-bottom: $sm-gap;\n\n        .total {\n          margin-bottom: 2rem;\n          font-weight: bold;\n          .active-total {\n            color: $github-sponsor-primary;\n          }\n        }\n\n        .sponsors {\n          display: grid;\n          grid-template-columns: repeat(10, 1fr);\n          grid-column-gap: $sm-gap;\n          grid-row-gap: $gap;\n\n          .item {\n            display: flex;\n            flex-direction: column;\n            &.active {\n              .avatar {\n                padding: 1px;\n                outline: 1px solid $github-sponsor-primary;\n                opacity: 0.8;\n              }\n              &:hover {\n                .avatar {\n                  opacity: 1;\n                }\n              }\n            }\n            &.inactive {\n              .avatar {\n                filter: grayscale(1);\n                opacity: 0.7;\n              }\n              &:hover {\n                .avatar {\n                  filter: grayscale(0);\n                  opacity: 1;\n                }\n              }\n            }\n\n            .avatar {\n              width: 3rem;\n              height: 3rem;\n              border-radius: 100%;\n              overflow: hidden;\n              background-color: $module-bg-darker-1;\n              transition: opacity $transition-time-fast;\n            }\n          }\n\n          .more-link {\n            margin-left: $sm-gap;\n            display: inline-flex;\n            align-items: center;\n            font-weight: bold;\n            font-size: $font-size-h4;\n            color: $text-secondary;\n            &:hover {\n              color: $link-color;\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { onMounted, onBeforeMount } from 'vue'\n  import { Language, LanguageKey } from '/@/language'\n  import { firstUpperCase } from '/@/transforms/text'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useSponsorState, ProviderId } from '/@/components/widget/sponsor/state'\n  import SponsorTabs from '/@/components/widget/sponsor/tabs.vue'\n  import SponsorProvider from '/@/components/widget/sponsor/provider.vue'\n  import PageBanner from '/@/components/common/banner.vue'\n\n  const { i18n: _i18n, seo, route, isZhLang } = useEnhancer()\n  const sponsorState = useSponsorState()\n\n  seo(() => {\n    const enTitle = firstUpperCase(_i18n.t(LanguageKey.PAGE_SPONSOR, Language.English)!)\n    const titles = isZhLang.value ? [_i18n.t(LanguageKey.PAGE_SPONSOR), enTitle] : [enTitle]\n    return { pageTitle: titles.join(' | ') }\n  })\n\n  onBeforeMount(() => {\n    sponsorState.githubSponsor.fetch()\n  })\n\n  onMounted(() => {\n    const targetId = route.hash.replace('#', '')\n    if (targetId) {\n      sponsorState.setProviderId(targetId as ProviderId)\n    }\n  })\n</script>\n\n<template>\n  <div class=\"sponsor-page\">\n    <page-banner image=\"/images/page-sponsor/banner.webp\">\n      <template #title>\n        <webfont>\n          <i18n zh=\"\" en=\"Become a sponsor to me\" />\n        </webfont>\n      </template>\n      <template #description>\n        <i18n\n          zh=\"\"\n          en=\"Your generous financial support is my motivation to keep moving forward\"\n        />\n      </template>\n    </page-banner>\n    <div class=\"page-content\">\n      <container class=\"tabs-wrapper\">\n        <sponsor-tabs class=\"sponsor-tabs\" :state=\"sponsorState\" />\n      </container>\n      <sponsor-provider class=\"sponsor-provider\" :state=\"sponsorState\" />\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .sponsor-page {\n    width: 100%;\n    min-height: $full-page-active-content-height;\n    display: flex;\n    flex-direction: column;\n\n    .page-content {\n      flex-grow: 1;\n      display: flex;\n      flex-direction: column;\n\n      .tabs-wrapper {\n        background-color: $module-bg-translucent;\n        .sponsor-tabs {\n          height: 8rem;\n        }\n      }\n\n      .sponsor-provider {\n        flex: 1;\n        margin: 0 auto;\n        width: $container-width;\n        overflow: hidden;\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup=\"\">\n  import { ref } from 'vue'\n  import { isVideoMediaIns, isAlbumMediaIns, getInstagramImage } from '/@/transforms/media'\n  import type { InstagramMediaItem } from '/@/server/getters/instagram'\n\n  defineProps<{\n    media: InstagramMediaItem\n    index: number\n    count: number\n  }>()\n\n  const isLoaded = ref(false)\n  const mediaLoaded = () => {\n    isLoaded.value = true\n  }\n</script>\n\n<template>\n  <div class=\"instagram-gallery\">\n    <div class=\"topbar\">\n      <div class=\"left\">\n        <ulink class=\"type-link\" :href=\"media.permalink\">\n          <i class=\"iconfont icon-video\" v-if=\"isVideoMediaIns(media)\"></i>\n          <i class=\"iconfont icon-album\" v-else-if=\"isAlbumMediaIns(media)\"></i>\n          <i class=\"iconfont icon-camera\" v-else></i>\n        </ulink>\n      </div>\n      <div class=\"center\">\n        <span class=\"pagination\">{{ index + 1 }} / {{ count }}</span>\n      </div>\n      <div class=\"right\">\n        <span class=\"timestamp\">\n          <udate to=\"YMDm\" :date=\"media.timestamp\" separator=\"/\" />\n        </span>\n      </div>\n    </div>\n    <div class=\"content\" :key=\"media.permalink\">\n      <transition name=\"module\">\n        <div class=\"loading\" v-if=\"!isLoaded\">\n          <spin />\n        </div>\n      </transition>\n      <video\n        v-if=\"isVideoMediaIns(media)\"\n        class=\"video\"\n        :src=\"media.media_url\"\n        autoplay\n        @loadeddata=\"mediaLoaded\"\n      />\n      <img\n        v-else\n        class=\"image\"\n        :src=\"getInstagramImage(media)\"\n        :alt=\"media.caption\"\n        draggable=\"false\"\n        loading=\"lazy\"\n        @load=\"mediaLoaded\"\n      />\n      <p v-if=\"media.caption\" class=\"caption\" v-html=\"media.caption.replaceAll('\\n', '<br>')\"></p>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .instagram-gallery {\n    position: relative;\n    background: $black !important;\n\n    .content {\n      position: relative;\n\n      .loading {\n        height: 100%;\n        position: absolute;\n        width: 100%;\n      }\n\n      .image,\n      .video {\n        min-width: 28rem;\n        min-height: 66vh;\n        max-width: 88vw;\n        max-height: 76vh;\n        width: auto;\n        height: auto;\n        overflow: hidden;\n      }\n\n      .caption {\n        position: absolute;\n        left: 0;\n        bottom: 0;\n        margin: 0;\n        width: 100%;\n        padding: 2em;\n        font-size: $font-size-base + 1;\n        @include title-shadow();\n      }\n    }\n\n    .topbar {\n      position: absolute;\n      top: 0;\n      left: 0;\n      margin: 0;\n      padding: 0 1em;\n      width: 100%;\n      height: 4rem;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      font-size: $font-size-h4;\n      color: $white;\n      z-index: $z-index-normal + 2;\n\n      .left,\n      .right,\n      .center {\n        display: inline-flex;\n        align-items: center;\n      }\n      .left {\n        width: 40%;\n        justify-content: start;\n      }\n      .center {\n        width: 20%;\n        justify-content: center;\n      }\n      .right {\n        width: 40%;\n        justify-content: end;\n      }\n\n      .pagination {\n        font-weight: bold;\n      }\n\n      .timestamp {\n        font-size: $font-size-base - 1;\n      }\n\n      .type-link {\n        color: $white;\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { ref, computed } from 'vue'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { UNDEFINED, isNil } from '/@/constants/value'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { getCDN_URL } from '/@/transforms/url'\n  import { isVideoMediaIns, isAlbumMediaIns, getInstagramImage } from '/@/transforms/media'\n  import type { InstagramMediaItem } from '/@/server/getters/instagram'\n  import Gallery from './gallery.vue'\n\n  const props = defineProps<{\n    medias: Array<InstagramMediaItem>\n    limit: number\n  }>()\n\n  const { gtag } = useEnhancer()\n  const galleryActiveIndex = ref<number>()\n  const galleryActiveMedia = computed(() => {\n    return isNil(galleryActiveIndex.value) ? null : props.medias[galleryActiveIndex.value]\n  })\n\n  const gridMedias = computed(() => props.medias.slice(0, props.limit - 1))\n  const restMedias = computed(() => {\n    return gridMedias.value.length > 1 ? props.medias.slice(props.limit - 1, props.limit + 2) : []\n  })\n\n  const openMediaGallery = (index: number) => {\n    galleryActiveIndex.value = index\n    gtag?.event('instagram_view', {\n      event_category: GAEventCategories.Lens\n    })\n  }\n\n  const closeMediaGallery = () => {\n    galleryActiveIndex.value = UNDEFINED\n  }\n</script>\n\n<template>\n  <div class=\"instagram-grid\">\n    <ul class=\"medias\">\n      <li\n        class=\"media\"\n        v-for=\"(media, index) in gridMedias\"\n        :key=\"index\"\n        :title=\"media.caption\"\n        :class=\"isVideoMediaIns(media) ? 'video' : 'photo'\"\n        @click=\"openMediaGallery(index)\"\n      >\n        <div v-lozad class=\"background\" :data-background-image=\"getInstagramImage(media, 'm')\" />\n        <div class=\"mask\">\n          <span class=\"icon\">\n            <i class=\"iconfont icon-music-play\" v-if=\"isVideoMediaIns(media)\"></i>\n            <i class=\"iconfont icon-eye\" v-else></i>\n          </span>\n        </div>\n        <div class=\"type-icon\">\n          <i class=\"iconfont icon-video\" v-if=\"isVideoMediaIns(media)\"></i>\n          <i class=\"iconfont icon-album\" v-else-if=\"isAlbumMediaIns(media)\"></i>\n          <i class=\"iconfont icon-camera\" v-else></i>\n        </div>\n      </li>\n      <li class=\"more\">\n        <ulink\n          class=\"media\"\n          v-for=\"(media, index) in restMedias\"\n          :href=\"media.permalink\"\n          :key=\"index\"\n          :title=\"media.caption\"\n          :style=\"{ backgroundImage: `url(${getInstagramImage(media, 't')})` }\"\n        >\n          <div class=\"mask\">\n            <i class=\"iconfont icon-new-window-s\"></i>\n          </div>\n        </ulink>\n        <ulink\n          class=\"media\"\n          :key=\"index\"\n          v-for=\"index in 3 - restMedias.length\"\n          :href=\"VALUABLE_LINKS.INSTAGRAM\"\n          :style=\"{ backgroundImage: `url(${getCDN_URL('/images/page-lens/instagram-default.jpg')})` }\"\n        >\n          <div class=\"mask\">\n            <i class=\"iconfont icon-new-window-s\"></i>\n          </div>\n        </ulink>\n        <ulink class=\"link\" :href=\"VALUABLE_LINKS.INSTAGRAM\"></ulink>\n      </li>\n    </ul>\n    <client-only>\n      <popup :visible=\"!!galleryActiveMedia\" :scroll-close=\"false\" @close=\"closeMediaGallery\">\n        <gallery\n          v-if=\"galleryActiveMedia\"\n          :media=\"galleryActiveMedia\"\n          :index=\"galleryActiveIndex!\"\n          :count=\"gridMedias.length\"\n        />\n      </popup>\n    </client-only>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n  $size: 155px;\n\n  .medias {\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    display: grid;\n    grid-template-columns: repeat(6, 1fr);\n    grid-gap: $gap * 2;\n    list-style: none;\n\n    .more {\n      width: 100%;\n      height: 100%;\n      display: grid;\n      grid-template-columns: repeat(2, 1fr);\n      grid-template-rows: repeat(2, 1fr);\n      grid-gap: $gap;\n\n      .media {\n        height: auto;\n        background-size: cover;\n      }\n\n      .link {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        font-size: $font-size-h1;\n        /* font line height offset */\n        padding-bottom: 4px;\n        @include common-bg-module();\n        @include radius-box($sm-radius);\n      }\n    }\n\n    .media {\n      position: relative;\n      display: block;\n      height: $size;\n      overflow: hidden;\n      cursor: pointer;\n      @include radius-box($sm-radius);\n      @include common-bg-module();\n      &:hover {\n        .mask {\n          @include visible();\n        }\n      }\n\n      .background {\n        width: 100%;\n        height: 100%;\n        background-size: cover;\n        background-position: center;\n      }\n\n      .type-icon {\n        opacity: 0.7;\n        position: absolute;\n        top: $xs-gap;\n        right: $sm-gap;\n        font-size: $font-size-h4;\n        color: $white;\n      }\n\n      .mask {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        z-index: $z-index-normal + 1;\n        background-color: rgba(#000, 0.3);\n        color: rgba($white, 0.8);\n        @include hidden();\n        @include visibility-transition();\n\n        .icon {\n          font-size: 2em;\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { reactive, shallowRef } from 'vue'\n  import SwiperClass, { Swiper, SwiperSlide } from '/@/effects/swiper'\n\n  interface Props {\n    data: Array<any>\n    rows?: number\n    columns?: number\n  }\n\n  withDefaults(defineProps<Props>(), {\n    rows: 2,\n    columns: 5\n  })\n\n  const swiperRef = shallowRef<SwiperClass>()\n  const swiperState = reactive({ canPrev: false, canNext: true })\n\n  const prevSlide = () => swiperRef.value?.slidePrev()\n  const nextSlide = () => swiperRef.value?.slideNext()\n  const handleSlideChange = (_swiper: SwiperClass) => {\n    swiperState.canNext = !_swiper.isEnd\n    swiperState.canPrev = !_swiper.isBeginning\n  }\n  const handleSwiperReady = (_swiper: SwiperClass) => {\n    swiperRef.value = _swiper\n    handleSlideChange(_swiper)\n  }\n</script>\n\n<template>\n  <div class=\"list-swiper\">\n    <div class=\"navigation prev\">\n      <button class=\"button\" :disabled=\"!swiperState.canPrev\" @click=\"prevSlide\">\n        <i class=\"iconfont icon-prev\" />\n      </button>\n    </div>\n    <div class=\"navigation next\">\n      <button class=\"button\" :disabled=\"!swiperState.canNext\" @click=\"nextSlide\">\n        <i class=\"iconfont icon-next\" />\n      </button>\n    </div>\n    <swiper\n      class=\"swiper\"\n      :autoplay=\"true\"\n      :mousewheel=\"false\"\n      :grab-cursor=\"false\"\n      :allow-touch-move=\"false\"\n      :slides-per-view=\"columns\"\n      :slides-per-group=\"columns\"\n      :grid=\"{ rows: rows, fill: 'row' }\"\n      :space-between=\"24\"\n      @swiper=\"handleSwiperReady\"\n      @slide-change=\"handleSlideChange\"\n    >\n      <swiper-slide class=\"slide-item\" :key=\"index\" v-for=\"(item, index) in data\">\n        <slot name=\"item\" v-bind=\"{ item, index }\"></slot>\n      </swiper-slide>\n    </swiper>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .list-swiper {\n    position: relative;\n    &:hover {\n      .navigation {\n        opacity: 1;\n      }\n    }\n\n    .navigation {\n      $size: 8rem;\n      position: absolute;\n      top: 0;\n      height: 100%;\n      width: $size;\n      display: flex;\n      align-items: center;\n      opacity: 0;\n      transition: all $transition-time-fast;\n      &.prev {\n        left: -$size;\n        justify-content: start;\n      }\n      &.next {\n        right: -$size;\n        justify-content: end;\n      }\n\n      .button {\n        font-size: $font-size-h2 * 2;\n        color: $text-disabled;\n        &[disabled] {\n          color: $text-divider;\n        }\n        &:not([disabled]):hover {\n          color: $text;\n        }\n      }\n    }\n\n    .swiper {\n      padding: 0;\n      margin: 0;\n      list-style: none;\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { ref, onMounted } from 'vue'\n  import { fetchYouTubeVideoList } from '/@/stores/media'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { ProxyModule } from '/@/constants/proxy'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { getProxyURL } from '/@/transforms/url'\n  import ListSwiper from '../swiper.vue'\n\n  enum YoutubeVideoListEvents {\n    View = 'view'\n  }\n\n  const props = defineProps<{\n    playlistId: string\n  }>()\n\n  const emit = defineEmits<{\n    (e: YoutubeVideoListEvents.View, v: any): void\n  }>()\n\n  const { gtag } = useEnhancer()\n  const videos = ref<Array<any>>([])\n  const fetching = ref(true)\n  const fetchVideos = async () => {\n    try {\n      fetching.value = true\n      videos.value = await fetchYouTubeVideoList(props.playlistId)\n    } catch (error) {\n      videos.value = []\n    } finally {\n      fetching.value = false\n    }\n  }\n\n  const getThumbnailURL = (thumbnails: any) => {\n    const url = thumbnails.high?.url || thumbnails.medium?.url || thumbnails.defult?.url\n    return url ? getProxyURL(url, ProxyModule.YouTube) : ''\n  }\n\n  const handleView = (video: any) => {\n    emit(YoutubeVideoListEvents.View, video)\n    gtag?.event('youtube_view', {\n      event_category: GAEventCategories.Lens\n    })\n  }\n\n  onMounted(() => fetchVideos())\n</script>\n\n<template>\n  <placeholder :data=\"videos\" :loading=\"fetching\">\n    <template #placeholder>\n      <slot name=\"empty\"></slot>\n    </template>\n    <template #loading>\n      <slot name=\"loading\"></slot>\n    </template>\n    <template #default>\n      <list-swiper :data=\"videos\">\n        <template #item=\"{ item }\">\n          <div class=\"video\" @click=\"handleView(item)\">\n            <div class=\"thumbnail\">\n              <div class=\"mask\">\n                <div class=\"button\">\n                  <i class=\"iconfont icon-music-play\" />\n                </div>\n              </div>\n              <span class=\"published-at\">\n                <i class=\"iconfont icon-clock\"></i>\n                <span class=\"text\">\n                  <udate to=\"ago\" :date=\"item.snippet.publishedAt\" />\n                </span>\n              </span>\n              <div v-lozad class=\"background\" :data-background-image=\"getThumbnailURL(item.snippet.thumbnails)\" />\n            </div>\n            <h5 class=\"title\">{{ item.snippet.title }}</h5>\n            <div class=\"description\">{{ item.snippet.description || '-' }}</div>\n          </div>\n        </template>\n      </list-swiper>\n    </template>\n  </placeholder>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .video {\n    display: block;\n    height: 166px;\n    cursor: pointer;\n    @include radius-box($sm-radius);\n    @include common-bg-module();\n    &:hover {\n      .thumbnail {\n        .mask {\n          @include visible();\n        }\n      }\n\n      .title {\n        color: $link-color;\n      }\n    }\n\n    .thumbnail {\n      width: 100%;\n      height: 106px;\n      position: relative;\n      overflow: hidden;\n      background-color: $module-bg-darker-3;\n\n      .background {\n        width: 100%;\n        height: 100%;\n        background-size: cover;\n        background-position: center;\n      }\n\n      .published-at {\n        position: absolute;\n        bottom: $sm-gap;\n        right: 1rem;\n        z-index: $z-index-normal + 1;\n        display: inline-flex;\n        justify-content: center;\n        align-items: center;\n        height: 2rem;\n        padding: 0 $sm-gap;\n        border-radius: $sm-radius;\n        background-color: rgba(#000, 0.3);\n        font-size: $font-size-small;\n        color: $white;\n\n        .iconfont {\n          margin-right: $xs-gap;\n        }\n\n        .text {\n          font-weight: bold;\n        }\n      }\n\n      .mask {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        z-index: $z-index-normal + 1;\n        background-color: rgba(#000, 0.4);\n        @include hidden();\n        @include visibility-transition();\n\n        .button {\n          opacity: 0.88;\n          font-size: 3em;\n          text-align: center;\n          color: rgba($white, 0.8);\n        }\n      }\n    }\n\n    .title,\n    .description {\n      padding: 0 0.7em;\n    }\n\n    .title {\n      margin-top: $sm-gap;\n      margin-bottom: 0.4em;\n      font-weight: bold;\n      color: $text;\n      max-width: 90%;\n      @include text-overflow();\n    }\n\n    .description {\n      max-width: 95%;\n      font-size: $font-size-h5 - 1;\n      color: $text-secondary;\n      @include text-overflow();\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { ref, computed } from 'vue'\n  import { UNDEFINED } from '/@/constants/value'\n  import { getYouTubeVideoEmbedURL } from '/@/transforms/media'\n  import YoutubeVideoList from './videos.vue'\n\n  defineProps<{\n    playlists: Array<any>\n  }>()\n\n  const youtubeModalVideo = ref<any>(null)\n  const isOnYouTubeModal = computed(() => Boolean(youtubeModalVideo.value))\n  const youTubeModalURL = computed(() => {\n    const video = youtubeModalVideo.value\n    return video ? getYouTubeVideoEmbedURL(video.snippet.resourceId.videoId, video.snippet.playlistId) : UNDEFINED\n  })\n  const openYouTubeModal = (video: any) => {\n    youtubeModalVideo.value = video\n  }\n  const closeYouTubeModal = () => {\n    youtubeModalVideo.value = null\n  }\n</script>\n\n<template>\n  <div class=\"youtube-playlist\">\n    <ul class=\"playlist\">\n      <li class=\"item\" :title=\"list.title\" :key=\"index\" v-for=\"(list, index) in playlists\">\n        <slot name=\"title\" v-bind=\"{ list, index }\"></slot>\n        <youtube-video-list :playlist-id=\"list.id\" @view=\"openYouTubeModal\">\n          <template #empty>\n            <slot name=\"empty\"></slot>\n          </template>\n          <template #loading>\n            <slot name=\"loading\"></slot>\n          </template>\n        </youtube-video-list>\n      </li>\n    </ul>\n    <client-only>\n      <popup :visible=\"isOnYouTubeModal\" :scroll-close=\"false\" @close=\"closeYouTubeModal\">\n        <iframe class=\"youtube-modal\" :src=\"youTubeModalURL\" />\n      </popup>\n    </client-only>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .youtube-modal {\n    width: 88vw;\n    height: 76vh;\n    position: relative;\n    background: $black !important;\n  }\n\n  .youtube-playlist {\n    .playlist {\n      padding: 0;\n      margin: 0;\n      list-style: none;\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { computed } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useStores } from '/@/stores'\n  import { useUniversalFetch } from '/@/universal'\n  import { Language, LanguageKey } from '/@/language'\n  import { META, VALUABLE_LINKS } from '/@/config/app.config'\n  import { getYouTubePlaylistURL } from '/@/transforms/media'\n  import { firstUpperCase } from '/@/transforms/text'\n  import PageBanner from '/@/components/common/banner.vue'\n  import LensSkeleton from './skeleton.vue'\n  import InstagramGrid from './instagram/grid.vue'\n  import YoutubePlaylist from './youtube/playlist.vue'\n\n  const { i18n: _i18n, seo, isZhLang } = useEnhancer()\n  const { instagramMedias, youtubePlayList } = useStores()\n  const youtubePlaylistData = computed(() => {\n    return youtubePlayList.data.filter((list) => list.contentDetails.itemCount > 1)\n  })\n\n  seo(() => {\n    const enTitle = firstUpperCase(_i18n.t(LanguageKey.PAGE_LENS, Language.English)!)\n    const titles = isZhLang.value ? [_i18n.t(LanguageKey.PAGE_LENS), enTitle] : [enTitle]\n    return {\n      pageTitle: titles.join(' | '),\n      description: `${META.author} `\n    }\n  })\n\n  useUniversalFetch(() => {\n    return Promise.all([\n      // eslint-disable-next-line @typescript-eslint/no-empty-function\n      instagramMedias.fetch().catch(() => {}),\n      // eslint-disable-next-line @typescript-eslint/no-empty-function\n      youtubePlayList.fetch().catch(() => {})\n    ])\n  })\n</script>\n\n<template>\n  <div class=\"lens-page\">\n    <page-banner class=\"page-banner\" :position=\"68\" image=\"/images/page-lens/banner.jpeg\">\n      <template #title>\n        <webfont>\n          <i18n zh=\"\" en=\"Because it's there\" />\n        </webfont>\n      </template>\n      <template #description>\n        <i18n>\n          <template #zh></template>\n          <template #en>\"why did you want to climb mount Everest?\"</template>\n        </i18n>\n      </template>\n    </page-banner>\n    <container class=\"page-bridge\"></container>\n    <container class=\"page-content\">\n      <h4 class=\"module-title instagram\">\n        <ulink class=\"link\" :href=\"VALUABLE_LINKS.INSTAGRAM\"> | photography</ulink>\n        <ulink class=\"brand\" :href=\"VALUABLE_LINKS.INSTAGRAM\">\n          <i class=\"iconfont icon-instagram\"></i>\n          <span class=\"text\">Instagram</span>\n        </ulink>\n      </h4>\n      <placeholder :data=\"instagramMedias.data\" :loading=\"instagramMedias.fetching\">\n        <template #placeholder>\n          <empty class=\"module-empty\" key=\"empty\">\n            <i18n :k=\"LanguageKey.EMPTY_PLACEHOLDER\" />\n          </empty>\n        </template>\n        <template #loading>\n          <lens-skeleton :columns=\"6\" :rows=\"2\" :height=\"155\" key=\"loading\" class=\"module-loading\" />\n        </template>\n        <template #default>\n          <div class=\"module-content\">\n            <instagram-grid :medias=\"instagramMedias.data\" :limit=\"24\" />\n          </div>\n        </template>\n      </placeholder>\n      <div class=\"module-content\">\n        <youtube-playlist :playlists=\"youtubePlaylistData\">\n          <template #title=\"{ list }\">\n            <h4 class=\"module-title youtube\">\n              <ulink class=\"link\" :href=\"getYouTubePlaylistURL(list.id)\">\n                {{ list.snippet.title }}\n                ({{ list.contentDetails.itemCount }})\n              </ulink>\n              <ulink class=\"brand\" :href=\"VALUABLE_LINKS.YOUTUBE_CHANNEL\">\n                <i class=\"iconfont icon-youtube\"></i>\n                <span class=\"text\">YouTube  Channel</span>\n              </ulink>\n            </h4>\n          </template>\n          <template #loading>\n            <lens-skeleton :columns=\"5\" :rows=\"1\" :height=\"166\" key=\"loading\" class=\"module-loading\" />\n          </template>\n          <template #empty>\n            <empty class=\"module-empty\" key=\"empty\">\n              <i18n :k=\"LanguageKey.EMPTY_PLACEHOLDER\" />\n            </empty>\n          </template>\n        </youtube-playlist>\n      </div>\n    </container>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .lens-page {\n    min-height: $full-page-active-content-height;\n\n    .page-bridge {\n      position: relative;\n      height: 4rem;\n      background: linear-gradient(to right, transparent, $module-bg-opaque, transparent);\n    }\n\n    .module-title {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      text-transform: uppercase;\n      letter-spacing: 4px;\n      color: $text;\n      margin: 3rem 0;\n\n      &.instagram {\n        --brand-primary: #{$instagram-primary};\n      }\n      &.youtube {\n        --brand-primary: #{$youtube-primary};\n      }\n\n      .link {\n        font-weight: bold;\n        color: $text-secondary;\n        &:hover {\n          color: $link-color;\n        }\n      }\n\n      .brand {\n        font-size: $font-size-small;\n        color: $text-disabled;\n        &:hover {\n          color: var(--brand-primary);\n        }\n\n        .iconfont {\n          margin-right: $sm-gap;\n          font-weight: normal;\n        }\n      }\n    }\n\n    .module-empty {\n      min-height: 12rem;\n      margin-bottom: $gap * 2;\n      font-weight: bold;\n      font-size: $font-size-h3;\n      @include radius-box($sm-radius);\n      @include common-bg-module();\n    }\n\n    .module-loading {\n      margin-bottom: $gap * 2;\n    }\n\n    .module-content {\n      margin-bottom: $gap * 2;\n    }\n  }\n</style>\n","/**\n * @file App router\n * @module app.router\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { RouteRecordRaw, NavigationGuard, NavigationGuardNext, RouterHistory, createRouter } from 'vue-router'\nimport { LanguageKey } from '/@/language'\nimport { NOT_FOUND, BAD_REQUEST } from '/@/constants/error'\nimport { isValidDateParam } from '/@/transforms/validate'\nimport { scrollToPageTop } from '/@/utils/scroller'\nimport { LayoutColumn } from './state'\n\n// mobile flow\nimport MobileFlow from '/@/components/flow/mobile/index.vue'\n// desktop flow\nimport IndexFlowPage from '/@/pages/index/index.vue'\nimport CategoryFlowPage from '/@/pages/category.vue'\nimport TagFlowPage from '/@/pages/tag.vue'\nimport DateFlowPage from '/@/pages/date.vue'\nimport SearchFlowPage from '/@/pages/search.vue'\n\n// core pages\nimport DesktopArchivePage from '/@/pages/archive/desktop.vue'\nimport MobileArchivePage from '/@/pages/archive/mobile.vue'\nimport ArticleDetailPage from '/@/pages/article/index.vue'\nimport DesktopAboutPage from '/@/pages/about/desktop.vue'\nimport MobileAboutPage from '/@/pages/about/mobile.vue'\nimport GuestbookPage from '/@/pages/guestbook.vue'\nimport AppPage from '/@/pages/app.vue'\n\n// third pages\nimport SponsorPage from '/@/pages/sponsor.vue'\nimport LensPage from '/@/pages/lens/index.vue'\n\n// https://router.vuejs.org/guide/advanced/meta.html#typescript\nimport 'vue-router'\ndeclare module 'vue-router' {\n  interface RouteMeta {\n    responsive?: boolean\n    layout?: LayoutColumn\n    validator?: (params: any) => Promise<any>\n    /** seconds | infinity | false: disabled  */\n    ssrCacheTTL: number | false\n  }\n}\n\nexport enum CategorySlug {\n  Code = 'code',\n  Insight = 'insight'\n}\n\nexport enum RouteName {\n  Home = 'home',\n  Article = 'article-detail',\n  CategoryFlow = 'category-flow',\n  TagFlow = 'tag-flow',\n  DateFlow = 'date-flow',\n  SearchFlow = 'search-flow',\n  Archive = 'archive',\n  Guestbook = 'guestbook',\n  About = 'about',\n  Lens = 'lens',\n  App = 'app',\n  Sponsor = 'sponsor',\n  Error = 'error'\n}\n\nexport const routes: RouteRecordRaw[] = [\n  {\n    path: '/',\n    name: RouteName.Home,\n    components: {\n      default: IndexFlowPage,\n      mobile: MobileFlow\n    },\n    meta: {\n      responsive: true,\n      ssrCacheTTL: 60 * 2 // 2 mins\n    }\n  },\n  {\n    path: '/article/:article_id',\n    name: RouteName.Article,\n    components: {\n      default: ArticleDetailPage,\n      mobile: ArticleDetailPage\n    },\n    props: {\n      default: (to) => ({ articleId: Number(to.params.article_id) }),\n      mobile: (to) => ({\n        isMobile: true,\n        articleId: Number(to.params.article_id)\n      })\n    },\n    meta: {\n      responsive: true,\n      ssrCacheTTL: 30, // 30 seconds\n      async validator({ route, i18n }) {\n        if (!Number.isInteger(Number(route.params.article_id))) {\n          return Promise.reject({\n            code: BAD_REQUEST,\n            message: i18n.t(LanguageKey.QUERY_PARAMS_ERROR) + 'Article ID  <number>'\n          })\n        }\n      }\n    }\n  },\n  {\n    path: '/category/:category_slug',\n    name: RouteName.CategoryFlow,\n    components: {\n      default: CategoryFlowPage,\n      mobile: MobileFlow\n    },\n    props: {\n      default: (to) => ({ categorySlug: to.params.category_slug }),\n      mobile: (to) => ({ categorySlug: to.params.category_slug })\n    },\n    meta: {\n      responsive: true,\n      ssrCacheTTL: 60 * 2, // 2 mins\n      async validator({ route, i18n }) {\n        const { category_slug } = route.params\n        if (!category_slug) {\n          return Promise.reject({\n            code: BAD_REQUEST,\n            message: i18n.t(LanguageKey.QUERY_PARAMS_ERROR) + 'Category slug  <string>'\n          })\n        }\n      }\n    }\n  },\n  {\n    path: '/tag/:tag_slug',\n    name: RouteName.TagFlow,\n    components: {\n      default: TagFlowPage,\n      mobile: MobileFlow\n    },\n    props: {\n      default: (to) => ({ tagSlug: to.params.tag_slug }),\n      mobile: (to) => ({ tagSlug: to.params.tag_slug })\n    },\n    meta: {\n      responsive: true,\n      ssrCacheTTL: 60 * 2, // 2 mins\n      async validator({ route, i18n }) {\n        const { tag_slug } = route.params\n        if (!tag_slug) {\n          return Promise.reject({\n            code: BAD_REQUEST,\n            message: i18n.t(LanguageKey.QUERY_PARAMS_ERROR) + 'Tag slug  <string>'\n          })\n        }\n      }\n    }\n  },\n  {\n    path: '/date/:date',\n    name: RouteName.DateFlow,\n    components: {\n      default: DateFlowPage,\n      mobile: MobileFlow\n    },\n    props: {\n      default: (to) => ({ date: to.params.date }),\n      mobile: (to) => ({ date: to.params.date })\n    },\n    meta: {\n      responsive: true,\n      ssrCacheTTL: 60 * 60 * 24, // 24 hours\n      async validator({ route, i18n }) {\n        const { date } = route.params\n        if (!date || !isValidDateParam(date)) {\n          return Promise.reject({\n            code: BAD_REQUEST,\n            message: i18n.t(LanguageKey.QUERY_PARAMS_ERROR) + `Invalid date ${date || ''}`\n          })\n        }\n      }\n    }\n  },\n  {\n    path: '/search/:keyword',\n    name: RouteName.SearchFlow,\n    components: {\n      default: SearchFlowPage,\n      mobile: MobileFlow\n    },\n    props: {\n      default: (to) => ({ keyword: to.params.keyword }),\n      mobile: (to) => ({ searchKeyword: to.params.keyword })\n    },\n    meta: {\n      responsive: true,\n      ssrCacheTTL: false,\n      async validator({ route, i18n }) {\n        if (!route.params.keyword) {\n          return Promise.reject({\n            code: BAD_REQUEST,\n            message: i18n.t(LanguageKey.QUERY_PARAMS_ERROR) + 'Keywords ?'\n          })\n        }\n      }\n    }\n  },\n  {\n    path: '/archive',\n    name: RouteName.Archive,\n    components: {\n      default: DesktopArchivePage,\n      mobile: MobileArchivePage\n    },\n    meta: {\n      responsive: true,\n      layout: LayoutColumn.Full,\n      ssrCacheTTL: 60 * 60 // 1 hours\n    }\n  },\n  {\n    path: '/about',\n    name: RouteName.About,\n    components: {\n      default: DesktopAboutPage,\n      mobile: MobileAboutPage\n    },\n    meta: {\n      responsive: true,\n      layout: LayoutColumn.Full,\n      ssrCacheTTL: 60 * 60 * 4 // 4 hours\n    }\n  },\n  {\n    path: '/guestbook',\n    name: RouteName.Guestbook,\n    components: {\n      default: GuestbookPage,\n      mobile: GuestbookPage\n    },\n    props: {\n      mobile: {\n        isMobile: true\n      }\n    },\n    meta: {\n      responsive: true,\n      ssrCacheTTL: 60 * 1 // 1 mins\n    }\n  },\n  {\n    path: '/app',\n    name: RouteName.App,\n    components: {\n      default: AppPage,\n      mobile: AppPage\n    },\n    props: {\n      mobile: {\n        isMobile: true\n      }\n    },\n    meta: {\n      responsive: true,\n      layout: LayoutColumn.Full,\n      ssrCacheTTL: Infinity\n    }\n  },\n  {\n    path: '/lens',\n    name: RouteName.Lens,\n    component: LensPage,\n    meta: {\n      responsive: false,\n      layout: LayoutColumn.Full,\n      ssrCacheTTL: 60 * 60 * 1 // 1 hours\n    }\n  },\n  {\n    path: '/sponsor',\n    name: RouteName.Sponsor,\n    component: SponsorPage,\n    meta: {\n      responsive: false,\n      layout: LayoutColumn.Full,\n      ssrCacheTTL: Infinity\n    }\n  },\n  {\n    name: RouteName.Error,\n    path: '/:error(.*)',\n    component: {},\n    meta: {\n      ssrCacheTTL: false,\n      async validator({ i18n }) {\n        return Promise.reject({\n          code: NOT_FOUND,\n          message: i18n.t(LanguageKey.NOT_FOUND)\n        })\n      }\n    }\n  }\n]\n\nexport interface RouterCreatorOptions {\n  history: RouterHistory\n  beforeMiddleware?: NavigationGuard | NavigationGuard[]\n  afterMiddleware?: NavigationGuardNext | NavigationGuardNext[]\n}\nexport const createUniversalRouter = (options: RouterCreatorOptions) => {\n  const router = createRouter({\n    routes,\n    strict: true,\n    history: options.history,\n    linkActiveClass: 'link-active',\n    scrollBehavior: () => scrollToPageTop()\n  })\n\n  if (options.beforeMiddleware) {\n    Array.isArray(options.beforeMiddleware)\n      ? options.beforeMiddleware.forEach(router.beforeResolve)\n      : router.beforeResolve(options.beforeMiddleware)\n  }\n  if (options.afterMiddleware) {\n    Array.isArray(options.afterMiddleware)\n      ? options.afterMiddleware.forEach(router.afterEach)\n      : router.afterEach(options.afterMiddleware)\n  }\n\n  return router\n}\n","/**\n * @file Route transformer\n * @module transform.route\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { RouteName, CategorySlug } from '/@/app/router'\n\ntype RouteRecordName = string | symbol | null | undefined\n\nexport const getTagFlowRoute = (tagSlug: string) => {\n  return `/tag/${tagSlug}`\n}\n\nexport const getCategoryFlowRoute = (categorySlug: string | CategorySlug) => {\n  return `/category/${categorySlug}`\n}\n\nexport const getDateFlowRoute = (date: string) => {\n  return `/date/${date}`\n}\n\nexport const getArticleDetailRoute = (articleId: string | number) => {\n  return `/article/${articleId}`\n}\n\nexport const getPageRoute = (routeName: RouteName) => {\n  return `/${routeName}`\n}\n\nexport const isArticleDetail = (name: RouteRecordName) => name === RouteName.Article\nexport const isSearchFlow = (name: RouteRecordName) => name === RouteName.SearchFlow\nexport const isGuestbook = (name: RouteRecordName) => name === RouteName.Guestbook\nexport const isApp = (name: RouteRecordName) => name === RouteName.App\n","/**\n * @file URL transformer\n * @module transform.url\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport API_CONFIG from '/@/config/api.config'\nimport { ProxyModule } from '/@/constants/proxy'\nimport { getArticleDetailRoute } from '/@/transforms/route'\n\nexport const getCDN_URL = (path: string) => {\n  return `${API_CONFIG.CDN}${path}`\n}\n\nexport const getProxyURL = (path: string, module: ProxyModule = ProxyModule.Default) => {\n  return `${API_CONFIG.PROXY}/${module}/${encodeURIComponent(path)}`\n}\n\nexport const getStaticURL = (path: string) => {\n  return `${API_CONFIG.STATIC}${path}`\n}\n\nexport const getPageURL = (path: string) => {\n  return `${API_CONFIG.FE}${path}`\n}\n\nexport const getArticleDetailURL = (idOrSlug: string | number) => {\n  return getPageURL(getArticleDetailRoute(idOrSlug))\n}\n","/**\n * @file head\n * @module composable.head\n * @author Surmon <https://github.com/surmon-china>\n * @link https://github.com/unjs/unhead\n */\n\nimport { computed, ComputedGetter } from 'vue'\nimport { UseSeoMetaInput } from 'unhead'\nimport { Head, useHead as useUnhead, useSeoMeta as useUnheadSeoMeta } from '@unhead/vue'\nimport { useEnhancer } from '/@/app/enhancer'\nimport { getPageURL, getCDN_URL } from '/@/transforms/url'\nimport { META, IDENTITIES } from '/@/config/app.config'\n\nexport type { Head } from '@unhead/vue'\nexport { createHead } from '@unhead/vue'\n\nexport const useHead = (source: Head | ComputedGetter<Head>) => {\n  return useUnhead(\n    computed<Head>(() => {\n      return typeof source === 'function' ? source() : source\n    })\n  )\n}\n\nconst DEFAULT_TITLER = (title: string) => `${title} | ${META.title}`\nconst DEFAULT_OG_IMAGE = getCDN_URL('/images/og-social-card.jpg')\n\nexport interface SeoObject extends UseSeoMetaInput {\n  title?: string\n  pageTitle?: string\n  description?: string\n  keywords?: string\n}\n\nexport function useSeo(source: SeoObject | ComputedGetter<SeoObject>) {\n  const { i18n, route } = useEnhancer()\n  return useUnheadSeoMeta(\n    computed<UseSeoMetaInput>(() => {\n      const value = typeof source === 'function' ? source() : source\n      const { title, pageTitle, description, keywords, ...sm } = value\n\n      // title | page title\n      const pureTitle = title ?? pageTitle\n      const fullTitle = title ? title : pageTitle ? DEFAULT_TITLER(pageTitle) : ''\n\n      return {\n        title: fullTitle,\n        description: description ?? '',\n        keywords: keywords ?? '',\n        twitterSite: `@${IDENTITIES.TWITTER_USER_NAME}`,\n        twitterCreator: IDENTITIES.TWITTER_USER_NAME,\n        twitterCard: 'summary_large_image',\n        twitterImage: sm?.ogImage ?? DEFAULT_OG_IMAGE,\n        twitterTitle: sm?.ogTitle ?? fullTitle ?? '',\n        twitterDescription: sm?.ogDescription ?? description ?? '',\n        ogType: sm?.ogType ?? 'website',\n        ogSiteName: META.title,\n        ogTitle: sm?.ogTitle ?? pureTitle ?? '',\n        ogDescription: sm?.ogDescription ?? description ?? '',\n        ogUrl: sm?.ogUrl ?? getPageURL(route.fullPath),\n        ogImage: sm?.ogImage ?? DEFAULT_OG_IMAGE,\n        ogImageAlt: sm?.ogImageAlt ?? sm?.ogTitle ?? fullTitle ?? '',\n        ogImageWidth: sm?.ogImageWidth ?? (sm?.ogImage ? '' : '1000'),\n        ogImageHeight: sm?.ogImageHeight ?? (sm?.ogImage ? '' : '526'),\n        ogLocale: i18n.l.value?.iso ?? ''\n      }\n    })\n  )\n}\n","<script lang=\"ts\" setup>\n  import { useEnhancer } from '/@/app/enhancer'\n\n  interface Props {\n    bolder?: boolean\n    boldZh?: boolean\n    boldEn?: boolean\n    uppercase?: boolean\n  }\n\n  withDefaults(defineProps<Props>(), {\n    bolder: false,\n    boldZh: false,\n    boldEn: true,\n    uppercase: false\n  })\n\n  const { isZhLang } = useEnhancer()\n</script>\n\n<template>\n  <span\n    :class=\"[\n      'webfont',\n      bolder ? 'bolder' : 'medium',\n      isZhLang ? 'zh' : 'en',\n      { boldZh },\n      { boldEn },\n      { uppercase }\n    ]\"\n  >\n    <slot></slot>\n  </span>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .webfont {\n    &.zh {\n      font-weight: normal;\n      /* HACK: for Chinese font */\n      margin-top: -1px;\n\n      &.medium {\n        font-family: 'webfont-medium';\n      }\n      &.bolder {\n        font-family: 'webfont-bolder';\n      }\n      &.boldZh {\n        font-weight: bold;\n      }\n    }\n\n    &.en {\n      font-size: 95%;\n      font-family: inherit;\n      &.boldEn {\n        font-weight: bold;\n      }\n      &.uppercase {\n        text-transform: uppercase;\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { computed } from 'vue'\n\n  interface Props {\n    loading?: boolean\n    color?: string\n    height?: string\n    width?: string\n    margin?: string\n  }\n\n  const props = withDefaults(defineProps<Props>(), {\n    loading: true,\n    color: 'rgba(197, 197, 197, 0.4)',\n    height: '15px',\n    width: '15px',\n    margin: '5px'\n  })\n\n  const spinnerStyle = computed(() => ({\n    backgroundColor: props.color,\n    height: props.height,\n    width: props.width,\n    margin: props.margin\n  }))\n</script>\n\n<template>\n  <div v-show=\"loading\" class=\"spinner-box\">\n    <div class=\"spinner-inner\">\n      <div class=\"la-ball-beat\">\n        <div :style=\"spinnerStyle\" />\n        <div :style=\"spinnerStyle\" />\n        <div :style=\"spinnerStyle\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .spinner-box {\n    position: relative;\n    width: 100%;\n    min-height: 50px;\n    height: 100%;\n\n    @keyframes ball-beat {\n      50% {\n        opacity: 0.2;\n        transform: scale(0.75);\n      }\n      100% {\n        opacity: 1;\n        transform: scale(1);\n      }\n    }\n\n    > .spinner-inner {\n      width: 80px;\n      height: 30px;\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      margin-left: -40px;\n      margin-top: -15px;\n\n      > .la-ball-beat {\n        display: block;\n        position: relative;\n        box-sizing: border-box;\n        font-size: 0;\n        color: $white;\n        width: 80px;\n        height: 30px;\n\n        > div {\n          position: relative;\n          box-sizing: border-box;\n          display: inline-block;\n          float: none;\n          border: none;\n          width: 15px;\n          height: 15px;\n          margin: 5px;\n          background-color: $module-bg-hover;\n          animation: ball-beat 0.7s -0.15s infinite linear;\n\n          &:nth-child(2n-1) {\n            animation-delay: -0.5s;\n          }\n        }\n\n        &.la-sm {\n          width: 26px;\n          height: 8px;\n\n          > div {\n            width: 8px;\n            height: 8px;\n            margin: 3px;\n          }\n        }\n\n        &.la-2x {\n          width: 108px;\n          height: 36px;\n\n          > div {\n            width: 20px;\n            height: 20px;\n            margin: 8px;\n          }\n        }\n\n        &.la-3x {\n          width: 162px;\n          height: 54px;\n\n          > div {\n            width: 30px;\n            height: 30px;\n            margin: 12px;\n          }\n        }\n      }\n    }\n  }\n</style>\n","/**\n * @file Universal date\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineComponent, PropType } from 'vue'\nimport { useEnhancer } from '/@/app/enhancer'\nimport { dateToYMD } from '/@/transforms/moment'\nimport { LanguageKey } from '/@/language'\n\nexport default defineComponent({\n  name: 'Udate',\n  props: {\n    to: {\n      type: String as PropType<'YMD' | 'YMDm' | 'ago'>,\n      required: true\n    },\n    date: {\n      type: [String, Number, Date] as PropType<string | number | Date>,\n      required: true\n    },\n    separator: {\n      type: String,\n      default: '-'\n    }\n  },\n  setup(props) {\n    const { i18n } = useEnhancer()\n\n    return () => {\n      // date\n      const date = props.date instanceof Date ? props.date : new Date(props.date)\n\n      // YYYY-MM-DD\n      if (props.to === 'YMD') {\n        return dateToYMD(date, props.separator)\n      }\n\n      // YYYY-MM-DD mm\n      if (props.to === 'YMDm') {\n        const ymd = dateToYMD(date, props.separator)\n        const meridiem = date.getHours() > 11 ? i18n.t(LanguageKey.MOMENT_PM) : i18n.t(LanguageKey.MOMENT_AM)\n        return `${ymd} ${meridiem}`\n      }\n\n      // timeAgo\n      if (props.to === 'ago') {\n        const pluralize = (time: number, label: string) => {\n          const ago = `${time} ${label}`\n          return i18n.t(LanguageKey.MOMENT_AGO, null, { date: ago })\n        }\n\n        const between = Date.now() / 1000 - Number(date) / 1000\n        const hourS = 3600\n        const dayS = hourS * 24\n        const weekS = dayS * 7\n        const monthS = dayS * 30\n        const yearS = monthS * 12\n\n        if (between < hourS) {\n          return ~~(between / 60) === 0\n            ? i18n.t(LanguageKey.MOMENT_JUST_NOW)\n            : pluralize(~~(between / 60), i18n.t(LanguageKey.MOMENT_MINUTES)!)\n        }\n        if (between < dayS) {\n          return pluralize(~~(between / hourS), i18n.t(LanguageKey.MOMENT_HOURS)!)\n        }\n        if (between < weekS) {\n          return pluralize(~~(between / dayS), i18n.t(LanguageKey.MOMENT_DAYS)!)\n        }\n        if (between < monthS) {\n          return pluralize(~~(between / weekS), i18n.t(LanguageKey.MOMENT_WEEKS)!)\n        }\n        if (between < yearS) {\n          return pluralize(~~(between / monthS), i18n.t(LanguageKey.MOMENT_MONTHS)!)\n        }\n        return pluralize(~~(between / yearS), i18n.t(LanguageKey.MOMENT_YEAR)!)\n      }\n\n      return null\n    }\n  }\n})\n","/**\n * @file Universal link\n * @description render Link with external/nofollow/noopener\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { AnchorHTMLAttributes, defineComponent, h } from 'vue'\nimport { RouterLink, RouterLinkProps } from 'vue-router'\n\nexport default defineComponent({\n  name: 'Ulink',\n  props: {\n    // @ts-ignore\n    ...RouterLink.props,\n    to: {\n      type: String,\n      required: false\n    },\n    href: {\n      type: String,\n      required: false\n    },\n    external: {\n      type: Boolean,\n      default: true\n    },\n    blank: {\n      type: Boolean,\n      default: true\n    }\n  },\n  setup(props, context) {\n    return () => {\n      const { to, href, external, blank, ...routerLinkProps } = props\n      const customAttrs: AnchorHTMLAttributes = { ...context.attrs }\n\n      // <router-link>\n      if (to && !to.startsWith('http')) {\n        const ps: RouterLinkProps = {\n          to: to,\n          ...routerLinkProps\n        }\n        return h(RouterLink, ps, context.slots.default)\n      }\n\n      // <a>\n      if (external) {\n        customAttrs.rel = 'external nofollow noopener'\n      }\n      if (blank) {\n        customAttrs.target = '_blank'\n      }\n\n      return h('a', { ...customAttrs, href }, context.slots.default?.())\n    }\n  }\n})\n","/**\n * @file Universal image\n * @description render image with CDN/Proxy/Defer\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineComponent, ref, h, PropType } from 'vue'\nimport { useEnhancer } from '/@/app/enhancer'\nimport { ProxyModule } from '/@/constants/proxy'\nimport { getCDN_URL, getProxyURL } from '/@/transforms/url'\nimport { onClient } from '/@/universal'\n\nexport default defineComponent({\n  name: 'Uimage',\n  props: {\n    src: {\n      type: String,\n      required: true\n    },\n    cdn: {\n      type: Boolean,\n      default: false\n    },\n    proxy: {\n      type: [Boolean, String] as PropType<ProxyModule | boolean>,\n      default: false\n    },\n    defer: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props) {\n    const { defer } = useEnhancer()\n    const deferRenderable = ref(false)\n    if (props.defer) {\n      onClient(() => {\n        defer.addTask(() => {\n          deferRenderable.value = true\n        })\n      })\n    }\n\n    return () => {\n      const { src, cdn, proxy, defer, ...restProps } = props\n\n      let imageSrc = src\n      if (cdn) {\n        imageSrc = getCDN_URL(src)\n      }\n      if (proxy) {\n        imageSrc = getProxyURL(src, proxy === true ? ProxyModule.Default : proxy)\n      }\n      if (defer && !deferRenderable.value) {\n        return null\n      }\n\n      return h('img', {\n        draggable: false,\n        ...restProps,\n        src: imageSrc\n      })\n    }\n  }\n})\n","/**\n * @file placeholder\n * @description render placeholder or data\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineComponent, h, Transition, PropType } from 'vue'\nimport { LanguageKey } from '/@/language'\nimport { isUndefined } from '/@/constants/value'\nimport Empty from './empty.vue'\nimport Spin from './spin.vue'\n\nexport enum Events {\n  AfterEnter = 'after-enter'\n}\n\n/**\n * @example\n *  <placeholder :loading=\"false\" :data=\"data.length\" :i18n-key=\"LanguageKey.XXX\">\n *    <component />\n *  </placeholder>\n * @example\n *  <placeholder :loading=\"false\" :data=\"data.length\" placeholder=\"empty\">\n *    <component />\n *  </placeholder>\n * @example\n *  <placeholder :loading=\"true\" :data=\"data.length\">\n *    <template #loading> skeleton </template>\n *    <template #placeholder> placeholder </template>\n *    <template #default> <component /> </template>\n *  </placeholder>\n */\nexport default defineComponent({\n  name: 'Placeholder',\n  props: {\n    data: {\n      type: [Array, Object, Boolean, Number],\n      default: undefined\n    },\n    transition: {\n      type: Boolean,\n      default: true\n    },\n    transitionName: {\n      type: String,\n      default: 'module'\n    },\n    placeholder: String,\n    i18nKey: String as PropType<LanguageKey>,\n    loading: Boolean\n  },\n  emits: [Events.AfterEnter],\n  setup(props, context) {\n    return () => {\n      const { data, placeholder, i18nKey, loading, transition, transitionName } = props\n      const isEmptyData = !isUndefined(data) && ((Array.isArray(data) && !(data as any).length) || !data)\n\n      const getPlaceholderView = () => {\n        return placeholder || i18nKey ? h(Empty, { placeholder, i18nKey }) : context.slots.placeholder?.()\n      }\n\n      const getDataView = () => {\n        return isEmptyData ? getPlaceholderView() : context.slots.default?.()\n      }\n\n      const getLoadingView = () => {\n        return context.slots.loading?.() || h(Spin, { loading: true })\n      }\n\n      const getView = () => {\n        return loading ? getLoadingView() : getDataView()\n      }\n\n      if (transition) {\n        return h(\n          Transition,\n          {\n            name: transitionName,\n            mode: 'out-in',\n            onAfterEnter(...args) {\n              context.emit(Events.AfterEnter, ...args)\n            }\n          },\n          () => getView()\n        )\n      }\n\n      return getView()\n    }\n  }\n})\n","/**\n * @file client only\n * @description only render on client (browser)\n * @description Fork from: https://github.com/egoist/vue-client-only/blob/master/src/index.js\n * @description Fork from: https://github.com/kadirahq/react-no-ssr/blob/master/src/index.js\n * @description Fork from: https://github.com/nuxt/framework/blob/main/packages/nuxt3/src/app/components/client-only.mjs\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineComponent, ref, h, onMounted, Transition, cloneVNode } from 'vue'\nimport { useEnhancer } from '/@/app/enhancer'\n\n/**\n * @description only render on client (browser)\n * @example\n * <client-only placeholder=\"loading...\">\n *    <component />\n * </client-only>\n * @example\n * <client-only :transition=\"true\" :delay=\"668\">\n *    <component />\n * </client-only>\n */\nexport default defineComponent({\n  name: 'ClientOnly',\n  props: {\n    placeholder: String,\n    placeholderTag: {\n      type: String,\n      default: 'div'\n    },\n    transition: {\n      type: Boolean,\n      default: false\n    },\n    delay: {\n      type: Number,\n      default: 0\n    }\n  },\n  setup(props, context) {\n    const { gState } = useEnhancer()\n    // SSR -> hydrated -> render -> no transition\n    const mounted = ref(gState.isHydrated.value ? true : false)\n\n    onMounted(() => {\n      // SSR inited -> mounted -> render -> transition\n      if (!gState.isHydrated.value) {\n        const setRender = () => {\n          mounted.value = true\n        }\n        props.delay ? setTimeout(setRender, props.delay) : setRender()\n      }\n    })\n\n    const renderResult = (result, resultKey?: string) => {\n      if (!props.transition) {\n        return result\n      }\n      if (Array.isArray(result) && result.length > 1) {\n        return result\n      }\n      const singleResult = Array.isArray(result) ? result[0] : result\n      return h(Transition, { name: 'client-only', mode: 'out-in' }, () =>\n        singleResult\n          ? cloneVNode(singleResult, { key: resultKey })\n          : h('div', { key: 'empty', class: 'client-only-empty' })\n      )\n    }\n\n    return () => {\n      if (mounted.value) {\n        return renderResult(context.slots.default?.(), 'result')\n      }\n\n      if (context.slots.placeholder) {\n        return renderResult(context.slots.placeholder(), 'placeholder-slot')\n      }\n\n      if (props.placeholderTag && props.placeholder) {\n        return renderResult(\n          h(props.placeholderTag, { class: 'client-only-placeholder' }, props.placeholder),\n          'placeholder'\n        )\n      }\n\n      return renderResult(null)\n    }\n  }\n})\n","/**\n * @file page container\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { defineComponent, h } from 'vue'\n\nexport default defineComponent({\n  name: 'Container',\n  props: {\n    tag: {\n      type: String,\n      default: 'div'\n    }\n  },\n  setup(props, context) {\n    return () => {\n      return h(props.tag, [h('div', { class: 'container' }, [context.slots.default?.()])])\n    }\n  }\n})\n","/**\n * @file responsive\n * @description Render children on desktop platform or mobile platform\n * @author Surmon <https://github.com/surmon-china>\n */\n\n/* eslint-disable vue/one-component-per-file */\nimport { defineComponent } from 'vue'\nimport { useGlobalState } from '/@/app/state'\n\n/**\n * @example <responsive desktop><component /></responsive>\n * @example <responsive mobile><component /></responsive>\n * @example <responsive both><component /></responsive>\n * @example\n  <responsive>\n    <template #desktop>Desktop</template>\n    <template #mobile>Mobile</template>\n  </responsive>\n */\nexport const Responsive = defineComponent({\n  name: 'Responsive',\n  props: {\n    both: Boolean,\n    desktop: Boolean,\n    mobile: Boolean\n  },\n  setup(props, context) {\n    const globalState = useGlobalState()\n\n    return () => {\n      // render\n      if (props.both) {\n        return context.slots.default?.()\n      }\n      // desktop\n      if (props.desktop && !globalState.userAgent.isMobile) {\n        return context.slots.default?.()\n      }\n      // mobile\n      if (props.mobile && globalState.userAgent.isMobile) {\n        return context.slots.default?.()\n      }\n\n      // slot mode\n      return globalState.userAgent.isMobile ? context.slots.mobile?.() : context.slots.desktop?.()\n    }\n  }\n})\n\nexport const DesktopOnly = defineComponent({\n  name: 'DesktopOnly',\n  setup(_, context) {\n    const globalState = useGlobalState()\n    return () => !globalState.userAgent.isMobile && context.slots.default?.()\n  }\n})\n","<script lang=\"ts\" setup>\n  import { computed, CSSProperties } from 'vue'\n\n  interface Props {\n    width?: number\n    height?: number\n    circle?: boolean\n    radius?: number\n  }\n\n  const props = withDefaults(defineProps<Props>(), {\n    circle: false,\n    radius: 2\n  })\n\n  const style = computed<CSSProperties>(() => ({\n    borderRadius: props.circle ? '100%' : `${props.radius}px`,\n    ...(props.width && { width: props.width + 'px' }),\n    ...(props.height && { height: props.height + 'px' })\n  }))\n</script>\n\n<template>\n  <div class=\"skeleton base\" :style=\"style\"></div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  $skeleton-background: $module-bg;\n  $skeleton-spinner: $module-bg-darker-3;\n\n  @keyframes placeHolderShimmer {\n    0% {\n      background-position: -468px 0;\n    }\n    100% {\n      background-position: 350px 50px;\n    }\n  }\n\n  .skeleton.base {\n    width: 100%;\n    height: 100%;\n    animation-duration: 1s;\n    animation-fill-mode: forwards;\n    animation-iteration-count: infinite;\n    animation-name: placeHolderShimmer;\n    animation-timing-function: linear;\n    background-color: $skeleton-spinner;\n    background-image: linear-gradient(\n      to right,\n      $skeleton-background 8%,\n      $skeleton-spinner 18%,\n      $skeleton-background 33%\n    );\n    background-repeat: repeat;\n    background-size: 800px 104px;\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { computed, CSSProperties } from 'vue'\n  import SkeletonBase from './base.vue'\n\n  interface Props {\n    width?: number\n    height?: number\n  }\n\n  const props = defineProps<Props>()\n  const style = computed<CSSProperties>(() => ({\n    ...(props.width && { width: props.width + 'px' }),\n    ...(props.height && { height: props.height + 'px' })\n  }))\n</script>\n\n<template>\n  <div class=\"skeleton line\" :style=\"style\">\n    <skeleton-base />\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  .skeleton.line {\n    width: 100%;\n    height: 100%;\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { computed, CSSProperties } from 'vue'\n  import SkeletonLine from './line.vue'\n\n  interface Props {\n    lines?: number\n    width?: number\n    height?: number\n    align?: boolean\n    lineHeight?: string\n  }\n\n  const props = withDefaults(defineProps<Props>(), {\n    lines: 1,\n    align: false,\n    lineHeight: '1rem'\n  })\n\n  const style = computed<CSSProperties>(() => ({\n    ...(props.width && { width: props.width + 'px' }),\n    ...(props.height && { height: props.height + 'px' })\n  }))\n\n  const getLineStyle = (index: number) => {\n    const style: CSSProperties = {\n      height: props.lineHeight,\n      marginBottom: index === props.lines - 1 ? '0' : `calc(${props.lineHeight} * 0.75)`\n    }\n    const position = index % 3\n    if (position) {\n      style.width = `${100 - 15 * position}%`\n      style.marginLeft = props.align ? '0' : '6%'\n    }\n    return style\n  }\n</script>\n\n<template>\n  <div class=\"skeleton paragraph\" :style=\"style\">\n    <skeleton-line\n      v-for=\"(line, index) in lines\"\n      :key=\"index\"\n      :style=\"getLineStyle(index)\"\n      class=\"paragraph-line\"\n    />\n  </div>\n</template>\n","/**\n * @file App components\n * @module app.component\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { App } from 'vue'\nimport Webfont from '/@/components/common/webfont.vue'\nimport Spin from '/@/components/common/spin.vue'\nimport Empty from '/@/components/common/empty.vue'\nimport Divider from '/@/components/common/divider.vue'\nimport Udate from '/@/components/common/udate'\nimport Ulink from '/@/components/common/ulink'\nimport Uimage from '/@/components/common/uimage'\nimport Placeholder from '/@/components/common/placeholder'\nimport ClientOnly from '/@/components/common/client-only'\nimport Container from '/@/components/common/container'\nimport { Responsive, DesktopOnly } from '/@/components/common/responsive'\n\nimport SkeletonBase from '/@/components/common/skeleton/base.vue'\nimport SkeletonLine from '/@/components/common/skeleton/line.vue'\nimport SkeletonParagraph from '/@/components/common/skeleton/paragraph.vue'\n\ndeclare module 'vue' {\n  export interface GlobalComponents {\n    Spin: typeof Spin\n    Empty: typeof Empty\n    Webfont: typeof Webfont\n    Divider: typeof Divider\n    Udate: typeof Udate\n    Ulink: typeof Ulink\n    Uimage: typeof Uimage\n    Placeholder: typeof Placeholder\n    ClientOnly: typeof ClientOnly\n    Responsive: typeof Responsive\n    DesktopOnly: typeof DesktopOnly\n    Container: typeof Container\n    SkeletonBase: typeof SkeletonBase\n    SkeletonLine: typeof SkeletonLine\n    SkeletonParagraph: typeof SkeletonParagraph\n  }\n}\n\nexport default function (app: App) {\n  app.component('Webfont', Webfont)\n  app.component('Spin', Spin)\n  app.component('Empty', Empty)\n  app.component('Divider', Divider)\n  app.component('Udate', Udate)\n  app.component('Ulink', Ulink)\n  app.component('Uimage', Uimage)\n  app.component('Placeholder', Placeholder)\n\n  app.component('ClientOnly', ClientOnly)\n  app.component('Responsive', Responsive)\n  app.component('DesktopOnly', DesktopOnly)\n  app.component('Container', Container)\n\n  app.component('SkeletonBase', SkeletonBase)\n  app.component('SkeletonLine', SkeletonLine)\n  app.component('SkeletonParagraph', SkeletonParagraph)\n}\n","<script lang=\"ts\" setup>\n  import { ref, reactive, nextTick, onMounted } from 'vue'\n  import { getCDN_URL } from '/@/transforms/url'\n\n  declare global {\n    interface Window {\n      $luanchEmojiRain(options: any): void\n    }\n  }\n\n  const rainBase = ref<HTMLElement>(null as any)\n  const state = reactive({\n    chambering: false,\n    kichikuing: false\n  })\n\n  onMounted(() => {\n    window.$luanchEmojiRain = (options) => {\n      if (!state.chambering && !state.kichikuing) {\n        state.chambering = true\n        nextTick(() => {\n          // @ts-ignore\n          rainBase.value.width = document.documentElement.clientWidth || document.body.clientWidth\n          // @ts-ignore\n          rainBase.value.height = document.documentElement.clientHeight || document.body.clientHeight\n          new window.$Emoji233333({\n            base: rainBase.value,\n            scale: 0.7,\n            speed: 12,\n            increaseSpeed: 0.4,\n            density: 5,\n            staggered: true,\n            emoji: getCDN_URL('/images/emojis/funny.png'),\n            ...options,\n            onStart() {\n              state.kichikuing = true\n            },\n            onEnded() {\n              state.kichikuing = false\n              state.chambering = false\n            }\n          }).launch()\n        })\n      }\n    }\n  })\n</script>\n\n<template>\n  <div id=\"emoji-rain\" :class=\"{ active: state.kichikuing }\">\n    <canvas v-if=\"state.chambering\" ref=\"rainBase\" class=\"rain-base\"></canvas>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  #emoji-rain {\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: $z-index-underground;\n\n    &.active {\n      z-index: $z-index-top;\n    }\n\n    .rain-base {\n      width: 100%;\n      height: 100%;\n    }\n  }\n</style>\n","/**\n * @file App layout getter\n * @module transform.layout\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { RouteMeta } from 'vue-router'\nimport { LayoutColumn } from '/@/app/state'\n\nexport const getLayoutByRouteMeta = (routeMeta: RouteMeta) => {\n  return routeMeta.layout === LayoutColumn.Wide\n    ? LayoutColumn.Wide\n    : routeMeta.layout === LayoutColumn.Full\n    ? LayoutColumn.Full\n    : LayoutColumn.Normal\n}\n","<script lang=\"ts\" setup>\n  import { useEnhancer } from '/@/app/enhancer'\n  import { RenderError } from '/@/app/state'\n  import { LanguageKey } from '/@/language'\n\n  const props = defineProps<{\n    error: RenderError\n  }>()\n\n  const emit = defineEmits<{\n    (e: 'resolve'): void\n  }>()\n\n  const { isDarkTheme } = useEnhancer()\n  const handleResolveRoute = () => {\n    emit('resolve')\n  }\n</script>\n\n<template>\n  <div class=\"error\" :class=\"{ dark: isDarkTheme }\">\n    <h1 class=\"code\">{{ props.error.code }}</h1>\n    <h3 class=\"message\">\n      <template v-if=\"props.error.message\">{{ props.error.message }}</template>\n      <i18n v-else :k=\"LanguageKey.NOT_FOUND\" />\n    </h3>\n    <p class=\"link\" @click=\"handleResolveRoute\">\n      <slot name=\"resolve-text\" />\n    </p>\n    <uimage cdn class=\"logo\" src=\"/images/logo.svg\" />\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .error {\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    position: fixed;\n    overflow: hidden;\n    z-index: $z-index-top;\n    text-align: center;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n    background-color: $module-bg;\n    &.dark {\n      background-color: $module-bg-opaque;\n      .message {\n        color: $text-darker;\n      }\n    }\n\n    @keyframes error-item {\n      0% {\n        opacity: 0;\n        transform: translate3d(0, -30%, 0);\n      }\n      100% {\n        opacity: 1;\n        transform: translate3d(0, 0, 0);\n      }\n    }\n\n    .logo {\n      width: 8rem;\n      opacity: 0.1;\n      position: fixed;\n      bottom: 2rem;\n      filter: $theme-logo-rotate;\n    }\n\n    .code,\n    .link,\n    .message {\n      color: $text-secondary;\n      animation: error-item ease-out both 0.6s $transition-time-normal;\n    }\n\n    @keyframes code-wave {\n      0% {\n        opacity: 0;\n        background-position-y: 5rem;\n      }\n      100% {\n        opacity: 1;\n        background-position-y: 0;\n      }\n    }\n\n    @keyframes code-wave-play {\n      0% {\n        background-position-x: 14%;\n      }\n      100% {\n        background-position-x: 100%;\n      }\n    }\n\n    .code {\n      text-transform: uppercase;\n      font-size: 10em;\n      font-weight: normal;\n      margin: 0;\n      background-image: url('/images/page-error/wave.png');\n      background-size: cover;\n      background-repeat: repeat-x;\n      background-position: center;\n      -webkit-background-clip: text;\n      color: rgba(darken($white, 30%), 20%);\n      animation:\n        error-item ease-out both 0.6s $transition-time-normal,\n        code-wave ease-out both 0.6s $transition-time-normal,\n        code-wave-play linear 2s infinite;\n    }\n\n    .message {\n      font-weight: normal;\n      margin-top: 0;\n      margin-bottom: 2rem;\n    }\n\n    .link {\n      cursor: pointer;\n      margin-bottom: 4rem;\n      @include text-underline(0.5em);\n      @include color-transition();\n      &:hover {\n        color: $text-darker;\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { onErrorCaptured } from 'vue'\n  import { LanguageKey } from '/@/language'\n  import { RouteName } from '/@/app/router'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { getLayoutByRouteMeta } from '/@/transforms/layout'\n  import ErrorComponent from './error.vue'\n\n  const { router, gState } = useEnhancer()\n  const handleResolveRoute = () => {\n    router.push({ name: RouteName.Home }).then(() => {\n      // MARK: The order is important! Layout must be set first, then rendered, thus avoiding splash screens!\n      gState.setLayoutColumn(getLayoutByRouteMeta(router.currentRoute.value.meta))\n      gState.setRenderError(null)\n    })\n  }\n\n  onErrorCaptured((_error: any) => {\n    gState.setRenderError(_error)\n    return false\n  })\n</script>\n\n<template>\n  <div class=\"captured\">\n    <error-component\n      v-if=\"gState.renderError.value\"\n      :error=\"gState.renderError.value\"\n      @resolve=\"handleResolveRoute\"\n    >\n      <template #resolve-text>\n        <i18n :k=\"LanguageKey.BACK_TO_HOME_PAGE\" />\n      </template>\n    </error-component>\n    <template v-else>\n      <slot />\n    </template>\n  </div>\n</template>\n","/**\n * @file Music player\n * @module composable.music\n * @author Surmon <https://github.com/surmon-china>\n * @document https://521dimensions.com/open-source/amplitudejs/docs\n */\n\nimport { App, Plugin, inject, readonly, reactive, computed } from 'vue'\nimport type { Song } from '/@/server/getters/netease-music'\nimport { UNDEFINED, isUndefined } from '/@/constants/value'\nimport { TunnelModule } from '/@/constants/tunnel'\nimport { ProxyModule } from '/@/constants/proxy'\nimport { getProxyURL } from '/@/transforms/url'\nimport tunnel from '/@/services/tunnel'\n\nexport interface PlayerConfig {\n  amplitude: any\n  volume?: number\n}\n\nconst createMusicPlayer = (config: PlayerConfig) => {\n  const { amplitude } = config\n\n  const initVolume = config.volume ?? 40\n  const state = reactive({\n    fetching: false, // data fetching\n    songs: [] as Array<Song>,\n    inited: false,\n    readied: false,\n    index: 0, // current playing song index\n    count: 0, // total song count\n    volume: initVolume,\n    wave: false,\n    playing: false,\n    speeds: 0,\n    progress: 0\n  })\n\n  // mute state\n  const muted = computed<boolean>(() => state.volume === 0)\n\n  // playable song list\n  const playableSongList = computed<Song[]>(() => {\n    return state.songs.map((song) => ({\n      ...song,\n      cover_art_url: song.cover_art_url\n        ? getProxyURL(song.cover_art_url + '?param=300y300', ProxyModule.NetEaseMusic)\n        : (null as any as string)\n    }))\n  })\n\n  const fetchSongList = async () => {\n    try {\n      state.fetching = true\n      state.songs = await tunnel.dispatch<Song[]>(TunnelModule.NetEaseMusic)\n      state.count = state.songs.length\n    } catch (error) {\n      state.songs = []\n      state.count = 0\n      throw error\n    } finally {\n      state.fetching = false\n    }\n  }\n\n  const currentSong = computed<Song | void>(() => {\n    if (state.inited && !isUndefined(state.index)) {\n      return amplitude.getActiveSongMetadata()\n    } else {\n      return UNDEFINED\n    }\n  })\n\n  const play = (index?: number) => {\n    if (index != null) {\n      amplitude.playSongAtIndex(index)\n    } else {\n      amplitude.play()\n    }\n  }\n  const pause = () => amplitude.pause()\n  const prevSong = () => amplitude.prev()\n  const nextSong = () => amplitude.next()\n  const changeVolume = (volume: number) => amplitude.setVolume(volume)\n  const toggleMuted = () => changeVolume(muted.value ? initVolume : 0)\n  const togglePlay = () => (amplitude.getPlayerState() === 'playing' ? pause() : play())\n\n  const initPlayer = (songs: Song[]) => {\n    amplitude.init({\n      // There is a delay between song switches\n      // https://521dimensions.com/open-source/amplitudejs/docs/configuration/delay.html#public-function\n      delay: 668,\n      debug: false,\n      volume: state.volume,\n      songs,\n      start_song: 0,\n      autoplay: false,\n      continue_next: true,\n      callbacks: {\n        initialized: () => {\n          state.readied = true\n          state.inited = true\n        },\n        play: () => {\n          state.readied = true\n          state.wave = true\n          state.playing = true\n        },\n        pause: () => {\n          state.wave = false\n          state.playing = false\n        },\n        stop: () => {\n          state.wave = false\n          state.playing = false\n        },\n        volumechange: () => {\n          state.volume = amplitude.getVolume()\n        },\n        timeupdate: () => {\n          state.speeds = amplitude.getSongPlayedSeconds()\n          state.progress = amplitude.getSongPlayedPercentage()\n        },\n        song_change: () => {\n          state.index = amplitude.getActiveIndex()\n        },\n        ended: () => {\n          state.playing = false\n        },\n        error: (error: any) => {\n          console.warn('[player] error! auto next song:', state.index, error)\n          state.playing = false\n          // No longer clears the music when a playback exception occurs, assuming the URL is always valid\n          // amplitude.removeSong(state.index)\n          // Network blocking can cause interruptions to neighboring subsequent requests,\n          // so there needs to be a delay in performing the next operation to avoid waterfall requests.\n          window.setTimeout(nextSong, 1668)\n        }\n      }\n    })\n    amplitude.setRepeat(true)\n  }\n\n  const init = () => {\n    return fetchSongList()\n      .then(() => {\n        if (playableSongList.value.length) {\n          initPlayer(playableSongList.value)\n        } else {\n          console.warn('[player] init failed! empty song list.')\n        }\n      })\n      .catch((error) => {\n        console.warn('[player] init failed! fetch error:', error)\n      })\n  }\n\n  return {\n    state: readonly(state),\n    muted,\n    currentSong,\n\n    init,\n    play,\n    pause,\n    changeVolume,\n    toggleMuted,\n    togglePlay,\n    prevSong,\n    nextSong\n  }\n}\n\nconst MusicPlayerSymbol = Symbol('music-player')\nexport type Music = ReturnType<typeof createMusicPlayer>\nexport const createMusic = (config: PlayerConfig): Music & Plugin => {\n  const musicPlayer = createMusicPlayer(config)\n  return {\n    ...musicPlayer,\n    install(app: App) {\n      app.provide(MusicPlayerSymbol, musicPlayer)\n    }\n  }\n}\n\nexport const useMusic = (): Music => {\n  return inject(MusicPlayerSymbol) as Music\n}\n","<script lang=\"ts\" setup>\n  import { computed } from 'vue'\n  import { useMusic } from '/@/composables/music'\n  import { get163MusicSongDetailURL } from '/@/transforms/media'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n  import { isClient } from '/@/app/environment'\n\n  const player = isClient ? useMusic() : null\n  const muted = computed(() => Boolean(player?.muted.value))\n  const currentSong = computed(() => player?.currentSong.value)\n  const handlePlayByIndex = (index: number) => player?.play(index)\n  const getSecondsView = (seconds: number) => {\n    const minutesText = String(Math.floor(seconds / 60)).padStart(2, '0')\n    const secondsText = String(Math.floor(seconds % 60)).padStart(2, '0')\n    return `${minutesText}:${secondsText}`\n  }\n</script>\n\n<template>\n  <div class=\"music-player\">\n    <div class=\"panel\">\n      <div class=\"song\">\n        <img class=\"cover\" :src=\"currentSong?.cover_art_url\" draggable=\"false\" />\n        <div class=\"info\" v-if=\"currentSong && player\">\n          <p class=\"title\">\n            <span class=\"name\">{{ currentSong.name }}</span>\n            <span class=\"artist\">{{ currentSong.artist }}</span>\n          </p>\n          <p class=\"duration\">\n            <span>{{ getSecondsView(player.state.speeds) }}</span>\n            <span> / </span>\n            <span>{{ getSecondsView(currentSong.duration / 1000) }}</span>\n          </p>\n        </div>\n      </div>\n      <div class=\"control\">\n        <button class=\"cut-song prev\" :disabled=\"!player?.state?.readied\" @click=\"player?.prevSong()\">\n          <i class=\"iconfont icon-music-prev\"></i>\n        </button>\n        <button class=\"toggle-play\" :disabled=\"!player?.state.readied\" @click=\"player?.togglePlay()\">\n          <i class=\"iconfont\" :class=\"player?.state.playing ? 'icon-music-pause' : 'icon-music-play'\"></i>\n        </button>\n        <button class=\"cut-song next\" :disabled=\"!player?.state.readied\" @click=\"player?.nextSong()\">\n          <i class=\"iconfont icon-music-next\"></i>\n        </button>\n      </div>\n      <div class=\"tools\">\n        <span class=\"indexed\" v-if=\"player\"> {{ player.state.index + 1 }} / {{ player?.state.count }} </span>\n        <ulink class=\"list-link\" :href=\"VALUABLE_LINKS.MUSIC_163\">\n          <i class=\"iconfont icon-new-window-s\"></i>\n        </ulink>\n        <button class=\"toggle-muted\" :disabled=\"!player?.state.readied\" @click=\"player?.toggleMuted()\">\n          <i class=\"iconfont\" :class=\"muted ? 'icon-music-muted' : 'icon-music-unmuted'\" />\n        </button>\n      </div>\n    </div>\n    <div class=\"progress\">\n      <div class=\"played\" :style=\"{ width: `${player.state.progress}%` }\" v-if=\"player\"></div>\n    </div>\n    <div class=\"songs\">\n      <ul class=\"list\">\n        <li\n          class=\"item\"\n          :class=\"{ playing: player?.state.index === index }\"\n          :key=\"index\"\n          v-for=\"(song, index) in player?.state.songs\"\n        >\n          <div class=\"index\">{{ String(index + 1).padStart(2, '0') }}</div>\n          <span v-if=\"player?.state.index === index\" class=\"play\">\n            <i class=\"iconfont icon-music-unmuted\"></i>\n          </span>\n          <button v-else class=\"play\" @click=\"handlePlayByIndex(index)\">\n            <i class=\"iconfont icon-music-play\"></i>\n          </button>\n          <ulink class=\"name\" :title=\"song.name\" :href=\"get163MusicSongDetailURL(song.id)\">\n            <span class=\"text\">{{ song.name }}</span>\n            <i class=\"iconfont icon-new-window-s\"></i>\n          </ulink>\n          <div class=\"artist\" :title=\"song.artist\">{{ song.artist }}</div>\n          <div class=\"duration\">{{ getSecondsView(song.duration / 1000) }}</div>\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .music-player {\n    position: relative;\n    overflow: auto;\n    width: 50vw;\n    height: 70vh;\n    display: flex;\n    flex-direction: column;\n\n    .panel {\n      width: 100%;\n      display: grid;\n      grid-template-columns: 35% 30% 35%;\n      background-color: $module-bg-lighter;\n\n      .song {\n        padding: $gap;\n        overflow: hidden;\n        display: flex;\n\n        .cover {\n          $size: 4rem;\n          width: $size;\n          height: $size;\n          border-radius: $sm-radius;\n          margin-right: $gap;\n          background-color: $module-bg-darker-1;\n        }\n\n        .info {\n          font-weight: bold;\n\n          .title {\n            display: flex;\n            align-items: baseline;\n            margin-bottom: $xs-gap;\n            white-space: nowrap;\n\n            .name,\n            .artist {\n              display: inline-block;\n              @include text-overflow();\n            }\n\n            .name {\n              margin-top: 1px;\n              max-width: 8rem;\n              font-size: $font-size-h4;\n            }\n\n            .artist {\n              max-width: 7rem;\n              margin-left: $xs-gap;\n              color: $text-disabled;\n            }\n          }\n\n          .duration {\n            margin: 0;\n            color: $text-disabled;\n          }\n        }\n      }\n\n      .control {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n\n        .toggle-play {\n          margin: 0 $lg-gap;\n          font-size: $font-size-h1 * 1.2;\n          transition: all $transition-time-fast;\n          &:hover {\n            color: $link-color;\n          }\n        }\n\n        .cut-song {\n          width: 3rem;\n          font-size: $font-size-h3;\n          color: $text-disabled;\n          &:hover {\n            color: $text;\n          }\n        }\n      }\n\n      .tools {\n        display: flex;\n        justify-content: flex-end;\n        align-items: center;\n        padding: $lg-gap;\n        font-size: $font-size-h4;\n\n        .toggle-muted {\n          width: 2rem;\n        }\n\n        .list-link,\n        .toggle-muted {\n          margin-left: $lg-gap;\n          color: $text-disabled;\n          &:hover {\n            color: $text;\n          }\n        }\n\n        .indexed {\n          display: block;\n          padding: $xs-gap $sm-gap;\n          border-radius: $xs-radius;\n          font-size: $font-size-small;\n          font-weight: bold;\n          color: $text-disabled;\n          background-color: $module-bg-darker-1;\n        }\n      }\n    }\n\n    .progress {\n      position: relative;\n      width: 100%;\n      height: $sm-gap;\n      box-sizing: content-box;\n      background-color: $module-bg-darker-1;\n\n      .played {\n        position: absolute;\n        height: 100%;\n        top: 0;\n        left: 0;\n        background-color: $module-bg-darker-3;\n        transition: width $transition-time-fast;\n        will-change: width;\n      }\n    }\n\n    .songs {\n      flex: 1;\n      overflow-y: scroll;\n      @include scroll-snap-y();\n\n      .list {\n        width: 100%;\n        margin: 0;\n        padding: 0;\n\n        .item {\n          display: grid;\n          grid-template-columns: 5% 5% 60% 20% 10%;\n          width: 100%;\n          height: 3rem;\n          line-height: 3rem;\n          @include scroll-snap-item();\n          &.playing,\n          &:hover {\n            background-color: $module-bg-lighter;\n          }\n          &.playing {\n            .play {\n              color: $link-color;\n            }\n          }\n\n          .index {\n            padding-left: 1em;\n            font-weight: bold;\n            color: $text-disabled;\n          }\n\n          .play {\n            text-align: center;\n            color: $text-disabled;\n            &:hover {\n              color: $text;\n            }\n          }\n\n          .name .text,\n          .artist {\n            max-width: 80%;\n            @include text-overflow();\n          }\n\n          .name {\n            display: flex;\n            align-items: baseline;\n            &:hover {\n              .text {\n                text-decoration: underline;\n                color: $link-color;\n              }\n              .iconfont {\n                color: $text;\n              }\n            }\n\n            .text {\n              display: inline-block;\n              font-weight: bold;\n              color: $text;\n            }\n            .iconfont {\n              margin-left: $xs-gap;\n              font-size: $font-size-small;\n              color: $text-disabled;\n            }\n          }\n\n          .artist {\n            color: $text-secondary;\n          }\n\n          .duration {\n            text-align: center;\n            color: $text-divider;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { ref, computed } from 'vue'\n  import { LanguageKey } from '/@/language'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useMusic } from '/@/composables/music'\n  import { isClient } from '/@/app/environment'\n  import MusicPlayer from './player.vue'\n\n  const { gtag } = useEnhancer()\n  const player = isClient ? useMusic() : null\n  const muted = computed(() => Boolean(player?.muted.value))\n  const currentSong = computed(() => player?.currentSong.value)\n\n  const isOnPlayerModel = ref(false)\n  const togglePlayerModel = () => {\n    isOnPlayerModel.value = !isOnPlayerModel.value\n  }\n\n  const handleTouchEvent = (label) => {\n    gtag?.event('music_player_widget', {\n      event_category: GAEventCategories.Widget,\n      event_label: label\n    })\n  }\n</script>\n\n<template>\n  <div id=\"player\" :class=\"{ playing: player.state.playing }\" v-if=\"player?.currentSong.value\">\n    <div class=\"panel\">\n      <div class=\"control\">\n        <button\n          class=\"prev-song button\"\n          :disabled=\"!player.state.readied\"\n          @click=\"player.prevSong\"\n          @mousedown=\"handleTouchEvent('prev song')\"\n        >\n          <i class=\"iconfont icon-music-prev\"></i>\n        </button>\n        <button\n          class=\"next-song button\"\n          :disabled=\"!player.state.readied\"\n          @click=\"player.nextSong\"\n          @mousedown=\"handleTouchEvent('next song')\"\n        >\n          <i class=\"iconfont icon-music-next\"></i>\n        </button>\n        <button\n          class=\"muted-toggle button\"\n          :disabled=\"!player.state.readied\"\n          @click=\"player.toggleMuted\"\n          @mousedown=\"handleTouchEvent('toggle muted')\"\n        >\n          <i class=\"iconfont\" :class=\"muted ? 'icon-music-muted' : 'icon-music-unmuted'\"></i>\n        </button>\n        <button class=\"player button\" @click=\"togglePlayerModel\" @mousedown=\"handleTouchEvent('open player model')\">\n          <i class=\"iconfont icon-netease-music\"></i>\n        </button>\n      </div>\n      <button class=\"song-link\" @click=\"togglePlayerModel\" @mousedown=\"handleTouchEvent('open player model')\">\n        <span v-if=\"currentSong\">{{ currentSong.name }}</span>\n        <i18n v-else :k=\"LanguageKey.MUSIC_PLACEHOLDER\" />\n      </button>\n    </div>\n    <div class=\"cd\">\n      <img class=\"image\" :src=\"currentSong?.cover_art_url\" />\n      <button\n        class=\"toggle-button\"\n        :disabled=\"!player.state.readied\"\n        @click=\"player.togglePlay\"\n        @mousedown=\"handleTouchEvent('toggle play')\"\n      >\n        <i class=\"iconfont\" :class=\"player.state.playing ? 'icon-music-pause' : 'icon-music-play'\"></i>\n      </button>\n    </div>\n    <div class=\"trigger\">\n      <i class=\"iconfont icon-music\"></i>\n    </div>\n  </div>\n  <client-only>\n    <popup v-model:visible=\"isOnPlayerModel\" :scroll-close=\"false\">\n      <music-player @close=\"togglePlayerModel\" />\n    </popup>\n  </client-only>\n</template>\n\n<style lang=\"scss\" scoped>\n  @use 'sass:math';\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  #player {\n    $size: 5rem;\n    $panel-size: 13rem;\n    position: fixed;\n    left: 0;\n    bottom: 18%;\n    z-index: $z-index-toolbox;\n    transition:\n      opacity $transition-time-fast,\n      transform $transition-time-normal cubic-bezier(0.65, 0.05, 0.36, 1);\n    height: $size;\n    transform: translateX(-18rem);\n    display: flex;\n    align-items: center;\n    border-top-right-radius: $sm-radius;\n    border-bottom-right-radius: $sm-radius;\n    background-color: $module-bg-opaque;\n    overflow: hidden;\n    opacity: 0.5;\n    &.playing {\n      transform: translateX(-$panel-size);\n    }\n    &:hover {\n      opacity: 0.9;\n      transform: translateX(0);\n    }\n\n    .panel {\n      width: $panel-size;\n      padding: $gap;\n\n      .control {\n        display: flex;\n        justify-content: flex-start;\n        margin-bottom: $xs-gap;\n\n        > .button {\n          margin-right: $lg-gap;\n          &:hover {\n            color: $link-hover;\n          }\n          &.player {\n            color: $music163-primary;\n          }\n        }\n      }\n\n      .song-link {\n        max-width: 11rem;\n        color: $text-secondary;\n        @include color-transition();\n        @include text-overflow();\n        &:hover {\n          color: $link-hover;\n        }\n      }\n    }\n\n    .cd {\n      position: relative;\n      display: block;\n      width: $size;\n      height: $size;\n      overflow: hidden;\n      background-color: $module-bg-darker-1;\n\n      .image {\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n        background-color: $module-bg-darker-1;\n        background-image: url('/images/page-music/background.jpg');\n        background-size: cover;\n      }\n\n      .toggle-button {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        border-radius: 100%;\n        font-size: $font-size-h1;\n        color: $white;\n      }\n    }\n\n    .trigger {\n      width: math.div($size, 2);\n      height: $size;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      writing-mode: tb-rl;\n      color: $white;\n      background-image: linear-gradient(0deg, #ff5a4c 0%, #ff1d12 100%);\n\n      .iconfont {\n        font-size: $font-size-h4;\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  export interface Props {\n    id: number\n    x: number\n    y: number\n    text: string\n    zIndex: number\n  }\n</script>\n\n<script lang=\"ts\" setup>\n  import { computed, reactive, nextTick, onMounted, onBeforeUnmount } from 'vue'\n\n  const props = defineProps<Props>()\n  const emit = defineEmits<{\n    (e: 'ended', id: Props['id']): void\n  }>()\n\n  const state = reactive({\n    delay: 1,\n    timer: null as number | null,\n    playing: false\n  })\n\n  const styles = computed(() => ({\n    top: props.y + 'px',\n    left: props.x + 'px',\n    'z-index': 99999 + props.zIndex\n  }))\n\n  const startAnimation = () => {\n    nextTick(() => {\n      // start animation\n      setTimeout(() => {\n        state.playing = true\n      })\n\n      // end animation\n      state.timer = window.setTimeout(() => {\n        state.playing = false\n        nextTick(() => emit('ended', props.id))\n      }, state.delay * 1000)\n    })\n  }\n\n  startAnimation()\n  onMounted(startAnimation)\n  onBeforeUnmount(() => {\n    if (state.timer) {\n      clearTimeout(state.timer)\n      state.timer = null\n    }\n  })\n</script>\n\n<template>\n  <li class=\"flower-item\" :style=\"styles\" :class=\"{ playing: state.playing }\">\n    <webfont bolder>{{ props.text }}</webfont>\n  </li>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .flower-item {\n    opacity: 1;\n    position: fixed;\n    display: block;\n    transform: translate3d(-50%, -50%, 0);\n    transition: opacity 0.5s;\n    color: $primary;\n    font-size: $font-size-h3;\n    white-space: nowrap;\n\n    @keyframes flower-playing {\n      0% {\n        transform: translate3d(-50%, -50%, 0);\n      }\n      80% {\n        transform: translate3d(-50%, -400%, 0);\n        opacity: 0.6;\n      }\n      100% {\n        transform: translate3d(-50%, -500%, 0);\n        opacity: 0;\n      }\n    }\n\n    &.playing {\n      opacity: 0.8;\n      animation: flower-playing 1s ease 0s forwards;\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { reactive, onMounted, onBeforeUnmount } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import Flower, { Props as FlowerProps } from './flower.vue'\n\n  const EN_FLOWERS = ['', '', '']\n  const ZH_FLOWERS = [\n    ...['', '', '', '', '', ''],\n    ...['', '', '', '', '', '']\n  ]\n\n  const { isZhLang } = useEnhancer()\n  const state = reactive({\n    id: 0,\n    contentIndex: -1,\n    flowers: [] as FlowerProps[]\n  })\n\n  const handleClick = (event: MouseEvent) => {\n    const flowers = isZhLang.value ? ZH_FLOWERS : EN_FLOWERS\n    state.contentIndex++\n    if (state.contentIndex >= flowers.length) {\n      state.contentIndex = 0\n    }\n    state.flowers.push({\n      id: ++state.id,\n      x: event.x || event.clientX,\n      y: event.y || event.clientY,\n      text: flowers[state.contentIndex]\n    } as FlowerProps)\n  }\n\n  const handleAnimationEnd = (id: number) => {\n    const targetIndex = state.flowers.findIndex((flower) => flower.id === id)\n    if (targetIndex > -1) {\n      state.flowers.splice(targetIndex, 1)\n    }\n  }\n\n  onMounted(() => window.addEventListener('click', handleClick))\n  onBeforeUnmount(() => window.removeEventListener('click', handleClick))\n</script>\n\n<template>\n  <div id=\"wallflower\">\n    <ul v-if=\"state.flowers.length\" class=\"garden-box\">\n      <flower\n        v-for=\"(flower, index) in state.flowers\"\n        :key=\"flower.id\"\n        :id=\"flower.id\"\n        :x=\"flower.x\"\n        :y=\"flower.y\"\n        :text=\"flower.text\"\n        :z-index=\"index + 1\"\n        @ended=\"handleAnimationEnd\"\n      />\n    </ul>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  #wallflower {\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    padding: 0;\n    list-style: none;\n    z-index: $z-index-underground;\n\n    .garden-box {\n      width: 100%;\n      height: 100%;\n      padding: 0;\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { ref, computed } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useWallpaperStore } from '/@/stores/wallpaper'\n  import { Language } from '/@/language'\n\n  enum WallEvents {\n    Close = 'close'\n  }\n\n  const emit = defineEmits<{\n    (e: WallEvents.Close): void\n  }>()\n\n  const { i18n: _i18n } = useEnhancer()\n  const wallpaperStore = useWallpaperStore()\n  const wallpapers = computed(() => wallpaperStore.papers(_i18n.language.value as Language)!)\n\n  const index = ref(0)\n  const activePaper = computed(() => wallpapers.value?.[index.value])\n  const handleClose = () => emit(WallEvents.Close)\n</script>\n\n<template>\n  <div class=\"wall\">\n    <transition name=\"module\" mode=\"out-in\">\n      <div\n        ref=\"picture-box\"\n        class=\"picture-box\"\n        :key=\"activePaper.humanizedImageUrl\"\n        :title=\"activePaper.copyright\"\n        :style=\"{ backgroundImage: `url(${activePaper.humanizedImageUrl})` }\"\n      />\n    </transition>\n    <div class=\"story-box\">\n      <template v-if=\"activePaper.title\">\n        <h2 class=\"title\">{{ activePaper.title }}</h2>\n        <p class=\"sub-title\">{{ activePaper.copyright }}</p>\n      </template>\n      <template v-else>\n        <h2 class=\"title lonely\">{{ activePaper.copyright }}</h2>\n      </template>\n      <p class=\"desc\">{{ activePaper.desc }}</p>\n      <div class=\"tools\">\n        <ulink class=\"button\" :href=\"activePaper.humanizedCopyrightUrl\" :title=\"activePaper.bsTitle\">\n          <i class=\"iconfont icon-bing\"></i>\n        </ulink>\n        <button class=\"button\" title=\"Prev\" :disabled=\"index <= 0\" @click=\"index--\">\n          <i class=\"iconfont icon-prev\"></i>\n        </button>\n        <button class=\"button\" title=\"Next\" :disabled=\"index >= wallpapers.length - 1\" @click=\"index++\">\n          <i class=\"iconfont icon-next\"></i>\n        </button>\n        <button class=\"button\" title=\"Close\" @click=\"handleClose\">\n          <i class=\"iconfont icon-cancel\"></i>\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .wall {\n    position: relative;\n    overflow: auto;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    align-items: center;\n    width: 88vw;\n    height: 88vh;\n\n    .picture-box {\n      width: 100%;\n      height: 100%;\n      overflow: hidden;\n      background-repeat: no-repeat;\n      background-size: cover;\n    }\n\n    .story-box {\n      position: absolute;\n      padding: 2rem 4rem;\n      background-color: $module-bg-translucent;\n      bottom: 0;\n      width: 100%;\n      height: auto;\n\n      .title,\n      .sub-title,\n      .desc {\n        @include title-shadow();\n      }\n\n      .title {\n        margin-top: 0;\n        &.lonely {\n          margin-bottom: 3rem;\n        }\n      }\n\n      .desc {\n        line-height: 2rem;\n        margin-bottom: $gap * 2;\n      }\n\n      .tools {\n        display: flex;\n        $size: 3rem;\n\n        .button {\n          display: block;\n          width: $size;\n          height: $size;\n          line-height: $size;\n          margin-right: $gap;\n          text-align: center;\n          background-color: $module-bg;\n          @include radius-box($xs-radius);\n\n          &[disabled] {\n            opacity: 0.6;\n          }\n\n          &:not([disabled]) {\n            &:hover {\n              background-color: $module-bg-darker-1;\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { ref, computed } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useWallpaperStore } from '/@/stores/wallpaper'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { Language } from '/@/language'\n  import Wallpapers from './wall.vue'\n\n  const { i18n: _i18n, gtag, isDarkTheme } = useEnhancer()\n  const wallpaperStore = useWallpaperStore()\n  const papers = computed(() => wallpaperStore.papers(_i18n.language.value as Language))\n  const isOnWallpaper = ref(false)\n\n  const handleCloseWallpaper = () => {\n    isOnWallpaper.value = false\n  }\n\n  const handleOpenWallpaper = () => {\n    if (papers.value?.length) {\n      isOnWallpaper.value = true\n    } else {\n      alert('Something went wrong')\n    }\n    gtag?.event('wallpaper_modal', {\n      event_category: GAEventCategories.Widget\n    })\n  }\n</script>\n\n<template>\n  <div id=\"wallpaper\">\n    <div class=\"switcher\" :class=\"{ dark: isDarkTheme }\" @click=\"handleOpenWallpaper\">\n      <div class=\"title\">\n        <i class=\"iconfont icon-bing\" />\n        <span class=\"text\">BING</span>\n      </div>\n    </div>\n  </div>\n  <client-only>\n    <popup v-model:visible=\"isOnWallpaper\" :mask-close=\"false\" :scroll-close=\"false\">\n      <wallpapers @close=\"handleCloseWallpaper\" />\n    </popup>\n  </client-only>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  #wallpaper {\n    $width: 2rem;\n    $height: 6.6rem;\n    position: fixed;\n    top: 18%;\n    right: 0;\n    cursor: pointer;\n\n    .switcher {\n      position: relative;\n      width: $width;\n      height: $height;\n      display: block;\n      border-style: solid;\n      border-color: $bing-primary;\n      border-top-width: 4px;\n      border-top-left-radius: $xs-radius;\n      border-bottom-left-radius: $xs-radius;\n      opacity: 0.5;\n      transition: opacity $transition-time-fast;\n      background-color: #ffffff;\n      &.dark {\n        background-color: #ececec;\n      }\n      &:hover {\n        opacity: 0.8;\n      }\n\n      .title {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        width: 100%;\n        height: 100%;\n        writing-mode: tb-rl;\n        color: $bing-primary;\n        font-size: $font-size-small - 1;\n        letter-spacing: 2px;\n        text-align: center;\n        transition: width $transition-time-fast;\n\n        .iconfont {\n          font-size: 16px;\n          margin-bottom: $xs-gap;\n        }\n\n        .text {\n          font-weight: bold;\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { useEnhancer } from '/@/app/enhancer'\n  const { isDarkTheme } = useEnhancer()\n</script>\n\n<template>\n  <div id=\"background\">\n    <div class=\"image\" :class=\"{ dark: isDarkTheme }\"></div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  #background {\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    z-index: $z-index-underground;\n    background-color: $body-bg;\n\n    .image {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      opacity: 0.3;\n      background: url('/images/background.png');\n\n      &.dark {\n        opacity: 0.2;\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { ref } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { LanguageKey } from '/@/language'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { scrollToPageTop, scrollToNextScreen } from '/@/utils/scroller'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n\n  const { i18n: _i18n, gtag, gState } = useEnhancer()\n\n  const animationFrameId = ref(0)\n  const isTopButtonMouseOver = ref(false)\n  const isBottomButtonMouseOver = ref(false)\n\n  const handleRSS = () => {\n    gtag?.event('rss', {\n      event_category: GAEventCategories.Widget\n    })\n  }\n\n  const handleFeedback = () => {\n    gState.toggleSwitcher('feedback', true)\n    gtag?.event('feedback_modal', {\n      event_category: GAEventCategories.Widget\n    })\n  }\n\n  const slowMoveToAnyWhere = () => {\n    const step = () => {\n      let targetScrollY = window.scrollY\n      const currentScrollY = document.body.scrollHeight - window.innerHeight\n      if (isBottomButtonMouseOver.value) {\n        targetScrollY += 1\n      }\n      if (isTopButtonMouseOver.value) {\n        targetScrollY -= 1\n      }\n      if (targetScrollY < 0) {\n        targetScrollY = 0\n      } else if (targetScrollY >= currentScrollY) {\n        targetScrollY = currentScrollY\n      }\n      const canScrollTo = targetScrollY > 0 && targetScrollY < currentScrollY\n      if (!canScrollTo) {\n        return false\n      }\n      window.scrollTo(0, targetScrollY)\n      if (isBottomButtonMouseOver.value || isTopButtonMouseOver.value) {\n        animationFrameId.value = window.requestAnimationFrame(step)\n      } else {\n        window.cancelAnimationFrame(animationFrameId.value)\n        return false\n      }\n    }\n    animationFrameId.value = window.requestAnimationFrame(step)\n  }\n\n  const setTopButtonState = (state: boolean, isStartSlow = false) => {\n    isTopButtonMouseOver.value = state\n    window.cancelAnimationFrame(animationFrameId.value)\n    isStartSlow && slowMoveToAnyWhere()\n  }\n\n  const setBottomButtonState = (state: boolean, isStartSlow = false) => {\n    isBottomButtonMouseOver.value = state\n    window.cancelAnimationFrame(animationFrameId.value)\n    isStartSlow && slowMoveToAnyWhere()\n  }\n</script>\n\n<template>\n  <div id=\"toolbox\">\n    <div class=\"container\">\n      <div class=\"tools\">\n        <ulink class=\"rss\" :href=\"VALUABLE_LINKS.RSS\" @mousedown=\"handleRSS\">\n          <i class=\"iconfont icon-rss\" />\n        </ulink>\n        <button class=\"feedback\" :title=\"_i18n.t(LanguageKey.FEEDBACK)\" @click=\"handleFeedback\">\n          <i class=\"iconfont icon-mail-plane\" />\n        </button>\n        <button\n          class=\"to-page-top\"\n          :title=\"_i18n.t(LanguageKey.TO_TOP)\"\n          @click=\"scrollToPageTop\"\n          @mouseover=\"setTopButtonState(true, true)\"\n          @mouseleave=\"setTopButtonState(false)\"\n        >\n          <i class=\"iconfont icon-totop\" />\n        </button>\n        <button\n          class=\"to-page-bottom\"\n          :title=\"_i18n.t(LanguageKey.TO_BOTTOM)\"\n          @click=\"scrollToNextScreen\"\n          @mouseover=\"setBottomButtonState(true, true)\"\n          @mouseleave=\"setBottomButtonState(false)\"\n        >\n          <i class=\"iconfont icon-tobottom\" />\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  #toolbox {\n    position: fixed;\n    z-index: $z-index-toolbox;\n    width: 100%;\n    bottom: 28rem;\n\n    .container {\n      $size: $lg-gap * 2.8;\n      position: relative;\n\n      .tools {\n        position: absolute;\n        right: -12rem;\n        width: $size;\n        overflow: hidden;\n\n        &:first-child {\n          border-top-left-radius: $xs-radius;\n          border-top-right-radius: $xs-radius;\n        }\n        &:last-child {\n          border-bottom-left-radius: $xs-radius;\n          border-bottom-right-radius: $xs-radius;\n        }\n\n        .rss,\n        .to-page-top,\n        .to-page-bottom,\n        .feedback {\n          display: block;\n          width: $size;\n          height: $size;\n          line-height: $size;\n          text-align: center;\n          @include common-bg-module($transition-time-fast);\n        }\n\n        .rss {\n          color: $rss-primary;\n          &:hover {\n            background-color: $rss-primary;\n            color: $white;\n          }\n        }\n\n        @keyframes feedback-button {\n          0% {\n            background-position: 92% 0%;\n          }\n          50% {\n            background-position: 9% 100%;\n          }\n          100% {\n            background-position: 92% 0%;\n          }\n        }\n\n        .feedback {\n          color: $white;\n          opacity: 0.8;\n          background-color: $primary-lighter;\n          background: linear-gradient(1deg, $surmon, #9d0f98);\n          background-size: 400% 400%;\n          animation: feedback-button 3s ease infinite;\n          transition: opacity $transition-time-fast;\n\n          .iconfont {\n            display: inline-block;\n          }\n\n          &:hover {\n            opacity: 1;\n            background-color: $primary;\n          }\n        }\n\n        .to-page-bottom {\n          height: $size * 0.618;\n          line-height: $size * 0.618;\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { reactive, computed, toRaw } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useStores } from '/@/stores'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { LanguageKey } from '/@/language/key'\n  import { META } from '/@/config/app.config'\n\n  enum Event {\n    Close = 'close'\n  }\n\n  const emit = defineEmits<{\n    (e: Event.Close): void\n  }>()\n\n  const EMOTIONS = [\n    { emoji: '', value: 1, en: 'Terrible', zh: '' },\n    { emoji: '', value: 2, en: 'Bad', zh: '' },\n    { emoji: '', value: 3, en: 'Neutral', zh: '' },\n    { emoji: '', value: 4, en: 'Great', zh: '' },\n    { emoji: '', value: 5, en: 'Amazing', zh: '' }\n  ]\n\n  const { appOption, identity } = useStores()\n  const { gtag, isZhLang } = useEnhancer()\n  const state = reactive({\n    emotion: null as unknown as number,\n    content: '',\n    submitting: false,\n    submitted: false\n  })\n\n  const isSubmitable = computed(() => {\n    return Number.isInteger(state.emotion) && Boolean(state.content)\n  })\n\n  const handleClose = () => emit(Event.Close)\n  const handleSubmit = async () => {\n    if (!isSubmitable.value) {\n      return\n    }\n\n    gtag?.event('submit_feedback', {\n      event_category: GAEventCategories.Widget\n    })\n\n    try {\n      state.submitting = true\n      const response = await appOption.postFeedback(toRaw(state))\n      identity.addFeedback(response.result)\n      state.submitted = true\n    } catch (error) {\n      alert(error)\n    } finally {\n      state.submitting = false\n    }\n  }\n</script>\n\n<template>\n  <div class=\"feedback\">\n    <template v-if=\"state.submitted\">\n      <div class=\"submitted\">\n        <div class=\"icon\">\n          <i class=\"iconfont icon-success\"></i>\n        </div>\n        <div class=\"text\">\n          <i18n>\n            <template #zh></template>\n            <template #en>Thank U for your feedback.</template>\n          </i18n>\n        </div>\n        <button class=\"close\" @click=\"handleClose\">\n          <i18n zh=\"\" en=\"Close\" />\n        </button>\n      </div>\n    </template>\n    <template v-else>\n      <div class=\"title\">\n        <i18n>\n          <template #zh> {{ META.title }} </template>\n          <template #en>How would you rate {{ META.title }}?</template>\n        </i18n>\n      </div>\n      <div class=\"emotions\">\n        <li class=\"item\" :key=\"emotion.value\" v-for=\"emotion in EMOTIONS\">\n          <label>\n            <input\n              class=\"radio\"\n              type=\"radio\"\n              :value=\"emotion.value\"\n              :disabled=\"state.submitting\"\n              v-model.number=\"state.emotion\"\n            />\n            <div class=\"button\" :class=\"{ activated: state.emotion === emotion.value }\">\n              <span class=\"emoji\">{{ emotion.emoji }}</span>\n              <span class=\"text\"><i18n :zh=\"emotion.zh\" :en=\"emotion.en\" /></span>\n            </div>\n          </label>\n          <transition name=\"module\">\n            <div class=\"arrow\" v-if=\"state.emotion === emotion.value\"></div>\n          </transition>\n        </li>\n      </div>\n      <div class=\"input\">\n        <textarea\n          class=\"textarea\"\n          name=\"feedback\"\n          id=\"feedback\"\n          rows=\"10\"\n          v-model.trim=\"state.content\"\n          :disabled=\"state.submitting\"\n          :placeholder=\"isZhLang ? '' : 'Tell me about your opinion...'\"\n        ></textarea>\n        <div class=\"buttons\">\n          <button class=\"item cancel\" :disabled=\"state.submitting\" @click=\"handleClose\">\n            <span class=\"text\"><i18n zh=\"\" en=\"Cancel\" /></span>\n          </button>\n          <button class=\"item submit\" :disabled=\"!isSubmitable || state.submitting\" @click=\"handleSubmit\">\n            <i class=\"iconfont icon-mail-plane\" />\n            <span class=\"text\">\n              <i18n :k=\"state.submitting ? LanguageKey.SUBMITTING : LanguageKey.SUBMIT\" />\n            </span>\n          </button>\n        </div>\n      </div>\n    </template>\n    <div class=\"history\" v-if=\"identity.feedbacks.length\">\n      <i18n>\n        <template #zh> {{ identity.feedbacks.length }} </template>\n        <template #en>You have {{ identity.feedbacks.length }} feedback history.</template>\n      </i18n>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .feedback {\n    width: 48rem !important;\n    background-color: $module-bg-lighter !important;\n\n    .title {\n      width: 100%;\n      height: 4rem;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      font-size: $font-size-h3;\n      font-weight: bold;\n      color: $text-secondary;\n      border-bottom: 1px solid $module-bg-darker-1;\n    }\n\n    .emotions {\n      margin: 0;\n      padding: 0;\n      list-style: none;\n      display: flex;\n      padding: 2rem 0;\n      justify-content: space-between;\n      border-bottom: 1px dashed $module-bg-darker-1;\n\n      .item {\n        width: 20%;\n        text-align: center;\n        position: relative;\n\n        .radio {\n          display: none;\n        }\n\n        .button {\n          display: inline-flex;\n          flex-direction: column;\n          justify-content: center;\n          align-items: center;\n          cursor: pointer;\n          opacity: 0.7;\n          filter: grayscale(0.8);\n          &.activated,\n          &:hover {\n            opacity: 1;\n            filter: grayscale(0);\n          }\n\n          .emoji {\n            $size: $font-size-h1 * 2;\n            font-size: $size;\n            line-height: $size;\n            margin-bottom: $gap;\n          }\n        }\n\n        .arrow {\n          $size: 15px;\n          position: absolute;\n          bottom: -4rem;\n          left: 50%;\n          margin-bottom: -1px;\n          margin-left: -$size;\n          width: 0;\n          height: 0;\n          border-left: $size solid transparent;\n          border-right: $size solid transparent;\n          border-bottom: $size solid $module-bg-darker-1;\n        }\n      }\n    }\n\n    .input {\n      padding: 2rem;\n\n      .textarea {\n        width: 100%;\n        height: 18rem;\n        padding: 1em;\n        margin-bottom: 2rem;\n        border-radius: $xs-radius;\n        background-color: $module-bg-darker-1;\n        resize: none;\n      }\n\n      .buttons {\n        display: flex;\n        justify-content: space-between;\n\n        .item {\n          height: 3rem;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          border-radius: $mini-radius;\n          &[disabled] {\n            opacity: 0.7;\n          }\n          &:not([disabled]):hover {\n            color: $link-hover;\n          }\n\n          &.cancel {\n            width: 7rem;\n            color: $text-secondary;\n            &:not([disabled]):hover {\n              color: $link-color;\n            }\n          }\n\n          &.submit {\n            width: 12rem;\n            color: $text-secondary;\n            background-color: $module-bg-darker-2;\n            &:not([disabled]):hover {\n              background-color: $module-bg-darker-3;\n            }\n          }\n\n          .iconfont {\n            margin-right: 1em;\n          }\n\n          .text {\n            font-weight: bold;\n          }\n        }\n      }\n    }\n\n    .submitted {\n      width: 100%;\n      height: 20rem;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n\n      .icon {\n        $size: 4rem;\n        width: $size;\n        height: $size;\n        margin-bottom: 2rem;\n        border-radius: 100%;\n        line-height: $size;\n        text-align: center;\n        background-color: $primary;\n        font-size: $font-size-h3;\n        color: $text-reversal;\n      }\n\n      .text {\n        font-weight: bold;\n      }\n\n      .close {\n        margin-top: 2rem;\n        padding: 0 2em;\n        line-height: 2.4em;\n        border-radius: $xs-radius;\n        background-color: $module-bg-darker-1;\n        &:hover {\n          color: $link-hover;\n          background-color: $module-bg-darker-2;\n        }\n      }\n    }\n\n    .history {\n      border-top: 1px solid $module-bg-darker-1;\n      height: 2.8em;\n      line-height: 2.8em;\n      text-align: center;\n      font-size: $font-size-small;\n      color: $text-disabled;\n    }\n  }\n</style>\n","/**\n * @file Email URL\n * @module transform.email\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport qs from 'qs'\n\nexport interface EmailLinkOptions {\n  email: string\n  subject?: string\n  body?: string\n}\nexport const emailLink = (email: string | EmailLinkOptions) => {\n  if (typeof email === 'string') {\n    return `mailto:${email}`\n  }\n\n  const { email: _email, ...content } = email\n  return `mailto:${_email}?` + qs.stringify(content)\n}\n","<script lang=\"ts\" setup>\n  import { useStores } from '/@/stores'\n  import { emailLink } from '/@/transforms/email'\n  import Markdown from '/@/components/common/markdown.vue'\n\n  const { appOption } = useStores()\n</script>\n\n<template>\n  <div class=\"statement\">\n    <div class=\"content\">\n      <markdown :markdown=\"appOption.data?.statement\" :compact=\"true\" />\n      <br />\n      <hr />\n      <p v-if=\"appOption.data\" class=\"email\">\n        <a :href=\"emailLink(appOption.data.site_email)\" class=\"link\" target=\"_blank\">\n          <i class=\"iconfont icon-mail\"></i>\n          <span class=\"text\">{{ appOption.data.site_email }}</span>\n        </a>\n      </p>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .statement {\n    background-color: $module-bg-opaque !important;\n    overflow-y: scroll !important;\n\n    .content {\n      padding: 0 2em;\n      width: 60rem;\n      min-height: 70rem;\n\n      .email {\n        .link {\n          color: $text-secondary;\n\n          .iconfont {\n            margin-right: $xs-gap;\n          }\n          .text {\n            font-weight: bold;\n          }\n\n          &:hover {\n            color: $link-hover;\n          }\n        }\n      }\n    }\n  }\n</style>\n","import { VALUABLE_LINKS } from '/@/config/app.config'\nimport { LanguageKey } from '/@/language'\nimport { RouteName, CategorySlug } from '/@/app/router'\nimport { getPageRoute, getCategoryFlowRoute } from '/@/transforms/route'\nimport { getCDN_URL } from '/@/transforms/url'\n\nexport interface MenuItem {\n  id: string\n  route?: string\n  url?: string\n  i18nKey: LanguageKey\n  icon?: string\n  imageIcon?: string\n  divider?: boolean\n  newWindow?: boolean\n  disabledUppercase?: boolean\n  hot?: boolean\n}\n\nexport const menus: Array<MenuItem> = [\n  {\n    id: RouteName.Home,\n    route: '/',\n    icon: 'icon-home',\n    i18nKey: LanguageKey.PAGE_HOME\n  },\n  {\n    id: CategorySlug.Code,\n    route: getCategoryFlowRoute(CategorySlug.Code),\n    icon: 'icon-code',\n    i18nKey: LanguageKey.CATEGORY_CODE\n  },\n  {\n    id: CategorySlug.Insight,\n    route: getCategoryFlowRoute(CategorySlug.Insight),\n    icon: 'icon-insight',\n    i18nKey: LanguageKey.CATEGORY_INSIGHT\n  },\n  {\n    id: 'github',\n    url: VALUABLE_LINKS.GITHUB,\n    icon: 'icon-github',\n    i18nKey: LanguageKey.PAGE_GITHUB,\n    newWindow: true\n  },\n  {\n    id: RouteName.Lens,\n    route: getPageRoute(RouteName.Lens),\n    icon: 'icon-lens',\n    i18nKey: LanguageKey.PAGE_LENS\n  },\n  {\n    id: RouteName.About,\n    route: getPageRoute(RouteName.About),\n    icon: 'icon-swordsman',\n    i18nKey: LanguageKey.PAGE_ABOUT\n  },\n  {\n    id: RouteName.Guestbook,\n    route: getPageRoute(RouteName.Guestbook),\n    i18nKey: LanguageKey.PAGE_GUESTBOOK,\n    icon: 'icon-comment'\n  },\n  {\n    id: RouteName.App,\n    route: getPageRoute(RouteName.App),\n    imageIcon: getCDN_URL('/images/page-app/logo.png'),\n    i18nKey: LanguageKey.PAGE_APP,\n    divider: true\n  },\n  {\n    id: 'sponsor',\n    route: getPageRoute(RouteName.Sponsor),\n    icon: 'icon-peachblossom',\n    i18nKey: LanguageKey.PAGE_SPONSOR,\n    hot: true,\n    divider: true\n  }\n]\n","<script lang=\"ts\" setup>\n  import { NAV_ELEMENT_ID } from '/@/constants/anchor'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { menus } from './menu'\n\n  const { adConfig } = useEnhancer()\n</script>\n\n<template>\n  <div :id=\"NAV_ELEMENT_ID\" class=\"desktop-nav\">\n    <nav class=\"nav-list\">\n      <template v-for=\"menu in menus\" :key=\"menu.id\">\n        <span v-if=\"menu.divider\" class=\"divider\"></span>\n        <ulink class=\"item\" :class=\"menu.id\" :href=\"menu.url\" :to=\"menu.route\">\n          <uimage v-if=\"menu.imageIcon\" class=\"image-icon\" :src=\"menu.imageIcon\" />\n          <i v-else-if=\"menu.icon\" class=\"font-icon iconfont\" :class=\"menu.icon\"></i>\n          <webfont class=\"text\" bolder :uppercase=\"!menu.disabledUppercase\">\n            <i18n :k=\"menu.i18nKey\" />\n          </webfont>\n          <span class=\"superscript new-window\" v-if=\"menu.newWindow\">\n            <i class=\"iconfont icon-new-window-s\"></i>\n          </span>\n          <span class=\"superscript hot\" v-if=\"menu.hot\">\n            <i class=\"iconfont icon-hot-fill\"></i>\n          </span>\n        </ulink>\n      </template>\n      <!-- AD -->\n      <template v-for=\"(ad, index) in adConfig.PC_NAV\" :key=\"index\">\n        <span class=\"divider\"></span>\n        <ulink class=\"item\" :href=\"ad.url\" :style=\"{ color: ad.color }\">\n          <i class=\"font-icon iconfont\" :class=\"ad.icon\"></i>\n          <span class=\"ad-text\">\n            <i18n v-if=\"ad.i18n\" :zh=\"ad.i18n.zh\" :en=\"ad.i18n.en\" />\n            <template v-else>{{ ad.text }}</template>\n          </span>\n          <span class=\"superscript\">\n            <i class=\"iconfont icon-ad\"></i>\n          </span>\n        </ulink>\n      </template>\n    </nav>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .desktop-nav {\n    width: $navbar-width;\n    height: auto;\n\n    .nav-list {\n      width: $navbar-width;\n      padding: 0;\n      margin: 0;\n      position: fixed;\n\n      .item {\n        display: flex;\n        align-items: center;\n        position: relative;\n        width: 100%;\n        height: 3em;\n        margin-bottom: $sm-gap;\n        padding: 0 $lg-gap;\n        border-radius: $mini-radius;\n        text-decoration: none;\n        letter-spacing: 0.5px;\n        color: $text-secondary;\n        will-change: background-color;\n        transition: background-color $transition-time-fast * 0.6;\n        @include radius-box($sm-radius);\n        &:last-child {\n          margin-bottom: 0;\n        }\n\n        &:hover {\n          color: $primary-lighter;\n          background-color: $module-bg-translucent;\n        }\n\n        &.link-active {\n          color: $primary;\n          background-color: $module-bg-lighter;\n          &.guestbook {\n            background: linear-gradient(to bottom, $module-bg-lighter, transparent);\n          }\n        }\n\n        &.app {\n          color: $surmon;\n        }\n\n        &.sponsor {\n          color: $github-sponsor-primary;\n        }\n\n        .font-icon {\n          width: 1em;\n          margin-right: $gap;\n          display: inline-block;\n        }\n\n        .image-icon {\n          width: 1em;\n          height: 1em;\n          margin-right: $gap;\n          border-radius: $xs-radius;\n        }\n\n        .ad-text {\n          font-weight: bold;\n        }\n\n        .superscript {\n          margin-left: $sm-gap;\n          &.new-window {\n            .iconfont {\n              font-size: $font-size-small;\n            }\n          }\n        }\n      }\n\n      .divider {\n        display: block;\n        height: 0;\n        background-color: transparent;\n        border-top: 1px dotted $module-bg-darker-2;\n        margin-bottom: $sm-gap;\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { ref, onMounted } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { RouteName } from '/@/app/router'\n  import { LanguageKey } from '/@/language'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { isSearchFlow } from '/@/transforms/route'\n\n  const { i18n: _i18n, gtag, route, router } = useEnhancer()\n  const formElement = ref<HTMLFormElement>()\n  const keyword = ref('')\n\n  const handleSearch = (event) => {\n    event.preventDefault()\n    const check_status = formElement.value?.checkValidity()\n    if (!check_status) {\n      formElement.value?.reportValidity()\n      return\n    }\n\n    const inputKeyword = keyword.value\n    const paramsKeyword = route.params.keyword as string\n    const isSearchPage = isSearchFlow(route.name as string)\n    if (inputKeyword && (!isSearchPage || paramsKeyword !== inputKeyword)) {\n      router.push({\n        name: RouteName.SearchFlow,\n        params: { keyword: inputKeyword }\n      })\n      gtag?.event('aside_search', {\n        event_category: GAEventCategories.Universal,\n        event_label: inputKeyword\n      })\n    }\n  }\n\n  onMounted(() => {\n    if (isSearchFlow(route.name as string)) {\n      keyword.value = route.params.keyword as string\n    }\n  })\n</script>\n\n<template>\n  <div class=\"search\">\n    <form class=\"search-box\" ref=\"formElement\">\n      <input\n        id=\"keyword\"\n        class=\"search-input\"\n        required\n        type=\"search\"\n        name=\"search\"\n        maxlength=\"16\"\n        autocomplete=\"off\"\n        v-model.trim=\"keyword\"\n        :class=\"_i18n.language\"\n        :placeholder=\"_i18n.t(LanguageKey.SEARCH_PLACEHOLDER)\"\n        @keyup.enter=\"handleSearch\"\n      />\n      <button type=\"submit\" class=\"search-btn\" @click=\"handleSearch\">\n        <i class=\"iconfont icon-search\" />\n      </button>\n    </form>\n    <router-link class=\"extra-btn\" :to=\"{ name: RouteName.Sponsor }\">\n      <i class=\"iconfont icon-peachblossom\" />\n    </router-link>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .search {\n    padding: $sm-gap;\n    width: 100%;\n    height: 3em;\n    overflow: hidden;\n    display: flex;\n    justify-content: space-between;\n\n    .search-input,\n    .search-btn,\n    .extra-btn {\n      height: 2em;\n      line-height: 2em;\n      background-color: $module-bg-darker-1;\n      @include background-transition();\n      &:hover {\n        background-color: $module-bg-hover;\n      }\n    }\n\n    .search-box {\n      .search-input {\n        width: 11em;\n        margin-right: 0;\n        padding: 0;\n        text-indent: 0.5em;\n        &::-webkit-calendar-picker-indicator {\n          display: none;\n        }\n      }\n\n      .search-btn {\n        width: 3em;\n        background-color: $module-bg-hover;\n        @include background-transition();\n        &:hover {\n          background-color: $module-bg-darker-3;\n        }\n      }\n    }\n\n    .extra-btn {\n      flex-grow: 1;\n      display: inline-block;\n      margin-left: $sm-gap;\n      text-align: center;\n      border-radius: $mini-radius;\n\n      .iconfont {\n        font-size: $font-size-h4;\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { defineComponent, ref, h, onMounted, Transition } from 'vue'\n  import { useNodepressStatisticStore } from '/@/stores/statistic'\n  import { RouteName } from '/@/app/router'\n  import { LanguageKey } from '/@/language'\n\n  const StatisticSkeleton = defineComponent({\n    props: {\n      fetching: Boolean,\n      count: Number\n    },\n    setup(props) {\n      return () =>\n        h(Transition, { name: 'module', mode: 'out-in', duration: 280 }, () =>\n          props.fetching\n            ? h('p', { class: 'skeleton', key: 'skeleton' }, '')\n            : h('p', { class: 'count', key: 'count' }, props.count ?? '-')\n        )\n    }\n  })\n\n  const fetching = ref(true)\n  const statisticStore = useNodepressStatisticStore()\n\n  onMounted(() => {\n    statisticStore.fetch().finally(() => {\n      fetching.value = false\n    })\n  })\n</script>\n\n<template>\n  <router-link class=\"statistic\" :to=\"{ name: RouteName.Archive }\">\n    <div class=\"item\">\n      <statistic-skeleton :fetching=\"fetching\" :count=\"statisticStore.data?.articles\" />\n      <span class=\"title\">\n        <i18n :k=\"LanguageKey.STATISTIC_ARTICLES\" />\n      </span>\n    </div>\n    <divider type=\"vertical\" />\n    <div class=\"item\">\n      <statistic-skeleton :fetching=\"fetching\" :count=\"statisticStore.data?.todayViews\" />\n      <span class=\"title\">\n        <i18n :k=\"LanguageKey.STATISTIC_TODAY_VIEWS\" />\n      </span>\n    </div>\n    <divider type=\"vertical\" />\n    <div class=\"item\">\n      <statistic-skeleton :fetching=\"fetching\" :count=\"statisticStore.data?.comments\" />\n      <span class=\"title\">\n        <i18n :k=\"LanguageKey.STATISTIC_COMMENTS\" />\n      </span>\n    </div>\n  </router-link>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .statistic {\n    width: 100%;\n    height: 5em;\n    padding: $sm-gap;\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n    overflow: hidden;\n    &:hover {\n      .item {\n        .count {\n          color: $link-color;\n        }\n        .title {\n          color: $text;\n        }\n      }\n    }\n\n    .item {\n      display: inline-flex;\n      flex-direction: column;\n      align-items: center;\n      flex: 1;\n\n      .skeleton,\n      .count {\n        margin: 0;\n        height: 2.8rem;\n      }\n\n      .skeleton {\n        @keyframes skeleton {\n          from {\n            color: $text-divider;\n          }\n          to {\n            color: $link-color;\n          }\n        }\n        font-size: $font-size-h3;\n        animation: skeleton 0.8s linear alternate infinite;\n      }\n\n      .count {\n        font-size: $font-size-h2;\n        font-weight: bold;\n        color: $text;\n      }\n\n      .title {\n        font-size: $font-size-small - 2;\n        white-space: nowrap;\n        text-transform: uppercase;\n        color: $text-secondary;\n        @include color-transition();\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { ref, computed } from 'vue'\n  import { useHottestArticleListStore } from '/@/stores/article'\n  import { getArticleDetailRoute } from '/@/transforms/route'\n  import { numberToKilo } from '/@/transforms/text'\n  import { dateToYMD } from '/@/transforms/moment'\n  import { LanguageKey } from '/@/language'\n\n  const PER_PAGE = 8\n\n  const hottestArticleListStore = useHottestArticleListStore()\n  const articleFullList = computed(() => {\n    return hottestArticleListStore.data.slice(0, PER_PAGE * 2).map((a, i) => ({ ...a, i: i + 1 }))\n  })\n\n  const hotPage = ref(0)\n  const articles = computed(() => {\n    const perPage = hotPage.value * PER_PAGE\n    return articleFullList.value.map((a, i) => ({ ...a, i: i + 1 })).slice(perPage, perPage + PER_PAGE)\n  })\n\n  const switchHotPage = () => {\n    const count = articleFullList.value.length\n    const pages = Math.ceil(count / PER_PAGE)\n    if (hotPage.value < pages - 1) {\n      hotPage.value++\n    } else {\n      hotPage.value = 0\n    }\n  }\n</script>\n\n<template>\n  <div class=\"article\">\n    <div class=\"header\">\n      <span class=\"title\">\n        <i class=\"iconfont icon-hotfill\" />\n        <webfont class=\"text\">\n          <i18n :k=\"LanguageKey.HOT_ARTICLE_LIST_TITLE\" />\n        </webfont>\n      </span>\n      <button class=\"switch\" @click=\"switchHotPage\">\n        <i class=\"iconfont icon-switch\" />\n      </button>\n    </div>\n    <placeholder\n      :data=\"articles\"\n      :loading=\"hottestArticleListStore.fetching\"\n      :i18n-key=\"LanguageKey.ARTICLE_PLACEHOLDER\"\n    >\n      <template #loading>\n        <ul class=\"article-list-skeleton\" key=\"skeleton\">\n          <li v-for=\"item in 5\" :key=\"item\" class=\"item\">\n            <skeleton-line />\n          </li>\n        </ul>\n      </template>\n      <template #default>\n        <ul class=\"article-list\" key=\"list\">\n          <li v-for=\"item in articles\" :key=\"item.id\" class=\"item\">\n            <span class=\"index\" :class=\"{ small: item.i >= 10 }\" :data-index=\"item.i\">\n              {{ item.i }}\n            </span>\n            <div class=\"content\">\n              <router-link class=\"title\" :to=\"getArticleDetailRoute(item.id)\" :title=\"item.title\">\n                {{ item.title }}\n              </router-link>\n              <div class=\"meta\">\n                <span class=\"item date\">\n                  {{ dateToYMD(item.created_at) }}\n                </span>\n                <span class=\"item views\">\n                  <i class=\"iconfont icon-eye\"></i>\n                  {{ numberToKilo(item.meta.views) }}\n                </span>\n                <span class=\"item comments\">\n                  <i class=\"iconfont icon-comment\"></i>\n                  {{ item.meta.comments }}\n                </span>\n              </div>\n            </div>\n          </li>\n        </ul>\n      </template>\n    </placeholder>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .article {\n    overflow: hidden;\n\n    .header {\n      display: flex;\n      justify-content: space-between;\n      height: 3em;\n      line-height: 3em;\n      margin: 0;\n      padding: 0 $gap;\n      border-bottom: 1px dotted $module-bg-darker-1;\n\n      .title {\n        .iconfont {\n          margin-right: $sm-gap;\n        }\n      }\n\n      .switch {\n        color: $text-secondary;\n        &:hover {\n          color: $text;\n        }\n      }\n    }\n\n    .article-list-skeleton {\n      list-style: none;\n      padding: $gap;\n      margin: 0;\n\n      > .item {\n        height: 1em;\n        margin-bottom: $gap;\n        &:last-child {\n          margin-bottom: 0;\n        }\n      }\n    }\n\n    .article-list {\n      list-style: none;\n      padding: $sm-gap 0;\n      margin-bottom: 0;\n\n      > .item {\n        display: flex;\n        padding: 0 $gap;\n        margin-bottom: $sm-gap;\n        color: $text-darker;\n        &:last-child {\n          margin: 0;\n        }\n\n        .index {\n          $size: $font-size-base;\n          width: $size;\n          height: $size;\n          line-height: $size;\n          margin-top: 4px;\n          display: inline-block;\n          flex-shrink: 0;\n          margin-right: $sm-gap;\n          text-align: center;\n          border-radius: $xs-radius;\n          color: $text-disabled;\n          font-weight: 700;\n          font-size: $font-size-base - 1;\n          &.small {\n            font-size: $font-size-small;\n          }\n          &[data-index='1'],\n          &[data-index='2'],\n          &[data-index='3'] {\n            color: $white;\n            font-size: $font-size-small * 0.8;\n          }\n          &[data-index='1'] {\n            background-color: $surmon;\n          }\n          &[data-index='2'] {\n            background-color: rgba($accent, 0.7);\n          }\n          &[data-index='3'] {\n            background-color: rgba($red, 0.6);\n          }\n        }\n\n        .content {\n          flex-shrink: 1;\n          overflow: hidden;\n        }\n\n        .title {\n          display: inline-block;\n          max-width: 100%;\n          border-top: 1px solid transparent;\n          border-bottom: 1px solid transparent;\n          font-size: $font-size-h6;\n          @include text-overflow();\n          &:hover {\n            text-decoration: none;\n            border-bottom-color: initial;\n          }\n        }\n\n        .meta {\n          font-size: $font-size-small;\n          color: $text-disabled;\n\n          .iconfont {\n            font-size: $font-size-small - 1;\n            color: $text-divider;\n            opacity: 0.6;\n          }\n\n          .item {\n            display: inline-block;\n            &.date {\n              margin-right: $lg-gap;\n            }\n            &.views {\n              width: 5rem;\n              margin-right: $sm-gap;\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { shallowRef } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import SwiperClass, { Swiper, SwiperSlide } from '/@/effects/swiper'\n\n  interface Props {\n    index?: number\n  }\n\n  const props = withDefaults(defineProps<Props>(), {\n    index: 0\n  })\n\n  enum AsideMammonEvent {\n    Ready = 'ready',\n    UpdateIndex = 'update:index',\n    IndexChange = 'index-change'\n  }\n\n  const emit = defineEmits<{\n    (e: AsideMammonEvent.Ready, swiper: SwiperClass): void\n    (e: AsideMammonEvent.UpdateIndex, index: number | void): void\n    (e: AsideMammonEvent.IndexChange, index: number | void): void\n  }>()\n\n  // emits: [AsideMammonEvent.Ready, AsideMammonEvent.UpdateIndex, AsideMammonEvent.IndexChange]\n  const { adConfig } = useEnhancer()\n  const swiperRef = shallowRef<SwiperClass>()\n  const updateSwiper = (_swiper: SwiperClass) => {\n    swiperRef.value = _swiper\n    emit(AsideMammonEvent.Ready, swiperRef.value)\n  }\n\n  const handleSlideChange = () => {\n    const realIndex = swiperRef.value?.realIndex\n    emit(AsideMammonEvent.UpdateIndex, realIndex)\n    emit(AsideMammonEvent.IndexChange, realIndex)\n  }\n</script>\n\n<template>\n  <div class=\"mammon\">\n    <swiper\n      class=\"swiper\"\n      direction=\"vertical\"\n      :initial-slide=\"props.index\"\n      :loop=\"true\"\n      :simulate-touch=\"false\"\n      :autoplay=\"{ delay: 2800, disableOnInteraction: false }\"\n      :pagination=\"{ clickable: true }\"\n      :set-wrapper-size=\"true\"\n      :auto-height=\"true\"\n      :mousewheel=\"true\"\n      :observe-parents=\"true\"\n      @swiper=\"updateSwiper\"\n      @slide-change-transition-end=\"handleSlideChange\"\n    >\n      <swiper-slide class=\"swiper-slide\" :key=\"_index\" v-for=\"(ad, _index) in adConfig.PC_ASIDE_SWIPER\">\n        <ulink class=\"content\" :href=\"ad.url\">\n          <uimage :src=\"ad.src\" alt=\"aside-swiper-ad\" />\n          <i class=\"iconfont icon-ad\"></i>\n        </ulink>\n      </swiper-slide>\n    </swiper>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .mammon {\n    width: 100%;\n    overflow: hidden;\n\n    .swiper {\n      height: 88px;\n\n      .swiper-wrapper {\n        &[style*='300ms'] {\n          .swiper-slide-active {\n            @include motion-blur-filter('vertical-small');\n          }\n        }\n\n        .swiper-slide {\n          .content {\n            display: block;\n            width: 100%;\n            height: 100%;\n            position: relative;\n\n            img {\n              width: 100%;\n              height: auto;\n            }\n\n            .iconfont {\n              position: absolute;\n              bottom: $sm-gap;\n              right: $gap;\n              color: $white;\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { Tag } from '/@/interfaces/tag'\n  import { useTagStore, getTagEnName } from '/@/stores/tag'\n  import { LanguageKey } from '/@/language'\n  import { getTagFlowRoute } from '/@/transforms/route'\n  import { getExtendValue } from '/@/transforms/state'\n\n  const tagStore = useTagStore()\n  const getTagIcon = (tag: Tag) => {\n    return getExtendValue(tag.extends || [], 'icon') || 'icon-tag'\n  }\n</script>\n\n<template>\n  <div class=\"tags\">\n    <placeholder\n      :data=\"tagStore.sorted.length\"\n      :fetching=\"tagStore.fetching\"\n      :i18n-key=\"LanguageKey.TAG_PLACEHOLDER\"\n    >\n      <template #loading>\n        <ul class=\"tag-list-skeleton\" key=\"skeleton\">\n          <li v-for=\"item in 14\" :key=\"item\" class=\"item\">\n            <skeleton-line />\n          </li>\n        </ul>\n      </template>\n      <template #default>\n        <div class=\"tag-list\" key=\"list\">\n          <router-link\n            class=\"item\"\n            :title=\"`${getTagEnName(tag)} | ${tag.description}`\"\n            :to=\"getTagFlowRoute(tag.slug)\"\n            :key=\"index\"\n            v-for=\"(tag, index) in tagStore.sorted\"\n          >\n            <i class=\"iconfont\" :class=\"getTagIcon(tag)\" />\n            <span class=\"name\">\n              <i18n :zh=\"tag.name\" :en=\"getTagEnName(tag)\" />\n              <span class=\"count\">({{ tag.article_count || 0 }})</span>\n            </span>\n          </router-link>\n        </div>\n      </template>\n    </placeholder>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @use 'sass:math';\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .tags {\n    margin-bottom: 0;\n    overflow-y: auto;\n    width: 100%;\n    border-top: $gap solid transparent;\n    border-bottom: $gap solid transparent;\n\n    .tag-list-skeleton {\n      display: flex;\n      flex-wrap: wrap;\n      list-style: none;\n      padding: 0;\n      margin: 0 $gap;\n      overflow: hidden;\n\n      .item {\n        width: calc(50% - #{math.div($gap, 2)});\n        height: 1.4em;\n        margin-right: 0;\n        margin-bottom: $gap;\n\n        &:nth-child(2n-1) {\n          margin-right: $gap;\n        }\n        &:nth-child(4n-1) {\n          width: 30%;\n          margin-right: $gap;\n        }\n        &:nth-child(4n) {\n          width: calc(70% - #{$gap});\n        }\n        &:nth-last-child(1),\n        &:nth-last-child(2) {\n          margin-bottom: 0;\n        }\n      }\n    }\n\n    .tag-list {\n      list-style: none;\n      padding: 0;\n      overflow: hidden;\n      margin-left: $gap;\n      margin-top: -$gap;\n\n      .item {\n        $height: 2em;\n        display: inline-flex;\n        margin-right: $sm-gap;\n        margin-top: $gap;\n        height: $height;\n        line-height: $height;\n        font-size: $font-size-h6;\n        font-family: $font-family-normal;\n        @include radius-box($xs-radius);\n\n        .iconfont {\n          width: 2em;\n          text-align: center;\n          background-color: $module-bg-darker-1;\n          @include background-transition();\n        }\n\n        .name {\n          display: block;\n          padding: 0 $sm-gap;\n          @include background-transition();\n\n          .count {\n            margin-left: $xs-gap;\n            color: $text-secondary;\n          }\n        }\n\n        &.link-active {\n          .iconfont {\n            color: $module-bg-opaque;\n            background-color: $primary-translucent;\n          }\n          .name {\n            font-weight: bold;\n            color: $text-reversal;\n            background-color: $primary;\n            .count {\n              color: $text-reversal;\n            }\n          }\n        }\n\n        &:not(.link-active) {\n          .name {\n            background-color: $module-bg-hover;\n          }\n\n          &:hover {\n            .iconfont {\n              background-color: $module-bg-hover;\n            }\n            .name {\n              background-color: $module-bg-darker-3;\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { computed } from 'vue'\n  import { useArticleDetailStore } from '/@/stores/article'\n  import { LanguageKey } from '/@/language'\n  import { scrollToAnchor } from '/@/utils/scroller'\n  import { numberSplit } from '/@/transforms/text'\n  import * as ANCHORS from '/@/constants/anchor'\n\n  const store = useArticleDetailStore()\n  const headings = computed(() => {\n    const result = [...(store.defaultContent?.headings || [])]\n    if (store.isLongContent && store.renderedFullContent) {\n      result.push(...(store.moreContent?.headings || []))\n    }\n    return result\n  })\n\n  const minHeadingLevel = computed(() => {\n    return Math.min(...headings.value.map((heading) => heading.level))\n  })\n</script>\n\n<template>\n  <div class=\"anchor\" v-if=\"store.article\">\n    <button class=\"header\" :title=\"store.article.title\" @click=\"scrollToAnchor(ANCHORS.ARTICLE_CONTENT_ELEMENT_ID)\">\n      <div class=\"title\">{{ store.article.title }}</div>\n      <div class=\"read\">\n        <i18n>\n          <template #zh> {{ numberSplit(store.contentLength) }}  {{ store.readMinutes }} </template>\n          <template #en>{{ numberSplit(store.contentLength) }} words, {{ store.readMinutes }} min read</template>\n        </i18n>\n      </div>\n    </button>\n    <div class=\"catalogue\" v-if=\"headings.length\">\n      <ul class=\"list\" :class=\"`indent-${minHeadingLevel}`\">\n        <li\n          class=\"item\"\n          :key=\"index\"\n          :title=\"heading.text\"\n          :class=\"`level-${heading.level}`\"\n          v-for=\"(heading, index) in headings\"\n          @click=\"scrollToAnchor(heading.id)\"\n        >\n          <i class=\"level iconfont\" :class=\"`icon-h-${heading.level}`\"></i>\n          <span class=\"text\">{{ heading.text }}</span>\n        </li>\n        <li\n          class=\"item readmore\"\n          key=\"readmore\"\n          v-if=\"store.isLongContent && !store.renderedFullContent\"\n          :class=\"`level-${minHeadingLevel}`\"\n          @click=\"scrollToAnchor(ANCHORS.ARTICLE_READMORE_ELEMENT_ID)\"\n        >\n          <i class=\"level iconfont icon-loadmore\"></i>\n          <span class=\"text\"><i18n :k=\"LanguageKey.ARTICLE_READ_ALL\" /></span>\n        </li>\n      </ul>\n    </div>\n    <button class=\"link\" @click=\"scrollToAnchor(ANCHORS.ARTICLE_META_ELEMENT_ID)\">\n      <i class=\"iconfont icon-heart\"></i>\n      <i18n zh=\"\" en=\"Meta\" />\n      <divider type=\"vertical\" />\n      <span class=\"meta\">\n        <i class=\"iconfont icon-like\"></i>\n        <span class=\"count\">{{ store.article.meta.likes }}</span>\n      </span>\n      <divider type=\"vertical\" />\n      <span class=\"meta\">\n        <i class=\"iconfont icon-eye\"></i>\n        <span class=\"count\">{{ numberSplit(store.article.meta.views) }}</span>\n      </span>\n    </button>\n    <button class=\"link\" @click=\"scrollToAnchor(ANCHORS.ARTICLE_RELATED_ELEMENT_ID)\">\n      <i class=\"iconfont icon-category\"></i>\n      <i18n zh=\"\" en=\"Related\" />\n      <divider type=\"vertical\" />\n      <span class=\"count\">{{ store.relatedArticles.length }}</span>\n    </button>\n    <button class=\"link\" @click=\"scrollToAnchor(ANCHORS.COMMENT_ELEMENT_ID)\">\n      <i class=\"iconfont icon-comment\"></i>\n      <i18n zh=\"\" en=\"Comments\" />\n      <divider type=\"vertical\" />\n      <span class=\"count\">{{ store.article.meta.comments }}</span>\n    </button>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .anchor {\n    padding: $gap;\n    display: flex;\n    flex-direction: column;\n\n    .header,\n    .catalogue,\n    .link {\n      display: block;\n      width: 100%;\n      border: 1px dashed $module-bg-hover;\n      border-radius: $sm-radius;\n      margin-bottom: $gap;\n      text-align: left;\n    }\n\n    .header,\n    .link,\n    .catalogue {\n      &:hover {\n        border-color: $primary;\n      }\n    }\n\n    .link {\n      flex-shrink: 0;\n      padding: 0 $gap;\n      height: 3rem;\n      line-height: 3rem;\n      @include text-overflow();\n      &:last-child {\n        margin-bottom: 0;\n      }\n      &:hover {\n        color: $primary;\n      }\n\n      .count {\n        font-weight: bold;\n      }\n\n      .iconfont {\n        margin-right: $sm-gap;\n      }\n    }\n\n    .header {\n      display: flex;\n      flex-direction: column;\n      justify-content: space-evenly;\n      flex-shrink: 0;\n      padding: $xs-gap $gap;\n      height: 6rem;\n\n      .title {\n        display: block;\n        width: 100%;\n        font-weight: bold;\n        @include text-overflow();\n      }\n\n      .read {\n        font-size: $font-size-small;\n      }\n    }\n\n    .catalogue {\n      max-height: 36rem;\n      padding: $sm-gap $gap;\n      overflow-y: auto;\n      @include scroll-snap-y();\n      &:hover {\n        border-color: $primary;\n      }\n\n      .list {\n        padding: 0;\n        margin: 0;\n        list-style: none;\n        padding-left: $xs-gap;\n        &.indent-2 {\n          margin-left: -$font-size-h4;\n        }\n        &.indent-3 {\n          margin-left: -$font-size-h4 * 2;\n        }\n        &.indent-4 {\n          margin-left: -$font-size-h4 * 3;\n        }\n        &.indent-5 {\n          margin-left: -$font-size-h4 * 4;\n        }\n        &.indent-6 {\n          margin-left: -$font-size-h4 * 5;\n        }\n\n        .item {\n          cursor: pointer;\n          line-height: 2.4em;\n          @include scroll-snap-item();\n          @include text-overflow();\n          &:hover {\n            color: $primary;\n            .iconfont {\n              color: $primary;\n            }\n            .text {\n              font-weight: bold;\n            }\n          }\n\n          .level {\n            margin-right: $xs-gap;\n            color: $text-disabled;\n          }\n\n          .text {\n            @include text-underline(0.4em);\n            text-decoration-style: dotted;\n          }\n\n          &.level-2 {\n            padding-left: $font-size-h4;\n          }\n          &.level-3 {\n            padding-left: $font-size-h4 * 2;\n          }\n          &.level-4 {\n            padding-left: $font-size-h4 * 3;\n          }\n          &.level-5 {\n            padding-left: $font-size-h4 * 4;\n          }\n          &.level-6 {\n            padding-left: $font-size-h4 * 5;\n          }\n\n          &.readmore {\n            margin-top: $xs-gap;\n            .text {\n              font-weight: bold;\n            }\n          }\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { reactive, computed } from 'vue'\n  import { Language } from '/@/language'\n  import { useEnhancer } from '/@/app/enhancer'\n  import {\n    cloneDate,\n    dateToHuman,\n    humanToDate,\n    isSameHumanDay,\n    humanDateToYMD,\n    HumanDate\n  } from '/@/transforms/moment'\n\n  const today = dateToHuman(new Date())\n  const isToday = (target) => isSameHumanDay(target, today)\n\n  const { i18n: _i18n, isZhLang } = useEnhancer()\n  const tableView = reactive({\n    month: 0,\n    year: 1970,\n    table: [] as Array<HumanDate>\n  })\n\n  const WEEKDAYS = {\n    [Language.English]: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],\n    [Language.Chinese]: ['', '', '', '', '', '', '']\n  }\n\n  const weekDayTexts = computed(() => WEEKDAYS[_i18n.language.value])\n  const headerText = computed(() => {\n    const isSameYear = tableView.year === today.year\n    const isSameMonth = tableView.month === today.month\n    const isSameTodayTable = isSameYear && isSameMonth\n    if (isZhLang.value) {\n      const yearText = `${tableView.year} `\n      const monthText = ` ${tableView.month} `\n      const dayText = isSameTodayTable ? ` ${today.day} ` : ''\n      return yearText + monthText + dayText\n    }\n    return humanDateToYMD(isSameTodayTable ? today : tableView, ' / ')\n  })\n\n  const setTable = (humanDate: Omit<HumanDate, 'day' | 'week'>) => {\n    const table: HumanDate[] = []\n    const firstDayDate = humanToDate({ ...humanDate, day: 1 })\n    const firstDayWeek = dateToHuman(firstDayDate).week\n\n    // before days\n    for (let i = firstDayWeek - 1; i >= 0; i--) {\n      const date = cloneDate(firstDayDate)\n      date.setDate(date.getDate() - i)\n      table.push(dateToHuman(date))\n    }\n\n    // after days\n    const todoDays = 35 - table.length\n    for (let i = 1; i <= todoDays; i++) {\n      const date = cloneDate(firstDayDate)\n      date.setDate(date.getDate() + i)\n      table.push(dateToHuman(date))\n    }\n\n    Object.assign(tableView, {\n      year: humanDate.year,\n      month: humanDate.month,\n      table\n    })\n  }\n\n  const toPrevMonth = () => {\n    const isPrevYear = tableView.month - 1 <= 0\n    setTable({\n      year: tableView.year - (isPrevYear ? 1 : 0),\n      month: isPrevYear ? 12 : tableView.month - 1\n    })\n  }\n\n  const toNextMonth = () => {\n    const isNextYear = tableView.month + 1 >= 13\n    setTable({\n      year: tableView.year + (isNextYear ? 1 : 0),\n      month: isNextYear ? 1 : tableView.month + 1\n    })\n  }\n\n  const handleDayClick = (date: HumanDate) => {\n    if (date.month < tableView.month) {\n      toPrevMonth()\n    } else if (date.month > tableView.month) {\n      toNextMonth()\n    }\n  }\n\n  // init table\n  setTable({\n    year: today.year,\n    month: today.month\n  })\n</script>\n\n<template>\n  <div class=\"calendar\">\n    <!-- header -->\n    <div class=\"header\">\n      <button class=\"item arrow\" @click=\"toPrevMonth\">\n        <i class=\"iconfont icon-prev\"></i>\n      </button>\n      <span class=\"item year-month\">{{ headerText }}</span>\n      <button class=\"item arrow\" @click=\"toNextMonth\">\n        <i class=\"iconfont icon-next\"></i>\n      </button>\n    </div>\n    <!-- weekdays -->\n    <ul class=\"weekdays\">\n      <li v-for=\"(day, index) in weekDayTexts\" :key=\"index\">{{ day }}</li>\n    </ul>\n    <!-- days -->\n    <ul class=\"days\">\n      <li v-for=\"(item, index) in tableView.table\" :key=\"index\">\n        <div\n          class=\"item\"\n          :class=\"{ today: isToday(item), other: item.month !== tableView.month }\"\n          @click=\"handleDayClick(item)\"\n        >\n          <slot name=\"day\" v-bind=\"item\">{{ item.day }}</slot>\n        </div>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .calendar {\n    min-height: 17em;\n\n    > .header {\n      padding: 0;\n      margin-bottom: $gap;\n      overflow: hidden;\n      display: flex;\n      justify-content: space-between;\n\n      .item {\n        height: 2em;\n        line-height: 2em;\n        text-align: center;\n\n        &.arrow {\n          width: 2em;\n          background-color: $module-bg-darker-1;\n          border-radius: $xs-radius;\n          cursor: pointer;\n          @include background-transition();\n\n          &:hover {\n            background-color: $module-bg-hover;\n          }\n        }\n\n        &.year-month {\n          font-weight: bold;\n        }\n      }\n    }\n\n    > .days,\n    > .weekdays {\n      list-style: none;\n      display: grid;\n      grid-template-columns: repeat(7, 1fr);\n      margin: 0;\n      margin-bottom: $sm-gap;\n      padding: 0;\n      overflow: hidden;\n\n      > li {\n        display: block;\n        text-align: center;\n      }\n    }\n\n    > .weekdays {\n      height: 2em;\n      line-height: 2em;\n    }\n\n    > .days-loading {\n      width: 100%;\n      height: 14rem;\n    }\n\n    > .days {\n      min-height: 10em;\n      margin-bottom: 0;\n      position: relative;\n\n      > li {\n        line-height: 2.5em;\n\n        > .item {\n          display: block;\n          border-radius: 100%;\n\n          &:hover {\n            background-color: $module-bg-darker-1;\n          }\n\n          &.today {\n            background-color: $module-bg-hover;\n          }\n\n          &.active {\n            color: $text-reversal;\n            background-color: $primary;\n          }\n\n          &.other {\n            opacity: 0.3;\n            cursor: initial;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { onMounted } from 'vue'\n  import { useStores } from '/@/stores'\n  import { humanDateToYMD, HumanDate } from '/@/transforms/moment'\n  import { getDateFlowRoute } from '/@/transforms/route'\n  import Calendar from '/@/components/widget/calendar.vue'\n\n  const { articleCalendar } = useStores()\n  const articlesIn = (targetDate: HumanDate) => {\n    const ymd = humanDateToYMD(targetDate)\n    return articleCalendar.data.find((item) => item.date === ymd)?.count || 0\n  }\n\n  onMounted(() => articleCalendar.fetch())\n</script>\n\n<template>\n  <calendar class=\"calendar\">\n    <template #day=\"humanDate\">\n      <router-link\n        class=\"date-link\"\n        v-if=\"articlesIn(humanDate) > 0\"\n        :to=\"getDateFlowRoute(humanDateToYMD(humanDate))\"\n      >\n        {{ humanDate.day }}\n      </router-link>\n      <span class=\"date-span\" v-else>{{ humanDate.day }}</span>\n    </template>\n  </calendar>\n</template>\n\n<style lang=\"scss\" scoped>\n  @use 'sass:math';\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .calendar {\n    padding: $gap;\n\n    .date-link {\n      position: relative;\n      display: block;\n      border-radius: 100%;\n      font-weight: bold;\n      color: $primary;\n      &::before {\n        content: '';\n        $size: 4px;\n        position: absolute;\n        top: 0.3em;\n        right: 50%;\n        width: $size;\n        height: $size;\n        margin-right: -#{math.div($size, 2)};\n        border-radius: 100%;\n        background-color: $primary;\n      }\n\n      &:hover,\n      &.link-active {\n        background-color: $primary;\n        color: $text-reversal;\n        &::before {\n          background-color: $text-reversal;\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { useRoute } from 'vue-router'\n  import { ref, computed, onMounted, onBeforeUnmount, nextTick } from 'vue'\n  import { ASIDE_ELEMENT_ID, MAIN_CONTENT_ELEMENT_ID } from '/@/constants/anchor'\n  import { isArticleDetail } from '/@/transforms/route'\n  import AsideSearch from './search.vue'\n  import AsideStatistic from './statistic.vue'\n  import AsideArticle from './article.vue'\n  import AsideMammon from './mammon.vue'\n  import AsideTag from './tag.vue'\n  import AsideAnchor from './anchor.vue'\n  import AsideCalendar from './calendar.vue'\n\n  const ASIDE_STICKY_ELEMENT_ID = 'aside-sticky-module'\n\n  const route = useRoute()\n  const isArticlePage = computed(() => isArticleDetail(route.name))\n\n  // polyfill sticky event\n  let stickyEvents: any = null\n  const element = ref<HTMLDivElement>(null as any)\n\n  const handleStickyStateChange = () => {\n    // workaround: when (main container height >= aside height) & isSticky -> render sticky ad\n    const targetElement = document.getElementById(MAIN_CONTENT_ELEMENT_ID)?.children?.[0]\n    // const asideElementHeight = element.value.clientHeight\n    if (targetElement) {\n      // const mainContentElementHeight = targetElement.clientHeight\n      // const isFeasible = mainContentElementHeight >= asideElementHeight\n      // console.log(isFeasible && event.detail.isSticky)\n    }\n  }\n\n  onMounted(() => {\n    nextTick(() => {\n      stickyEvents = new window.$StickyEvents({\n        enabled: true,\n        stickySelector: `#${ASIDE_STICKY_ELEMENT_ID}`\n      })\n      stickyEvents.stickyElements?.[0]?.addEventListener(window.$StickyEvents.CHANGE, handleStickyStateChange)\n    })\n  })\n\n  onBeforeUnmount(() => {\n    stickyEvents.stickyElements?.[0]?.removeEventListener(window.$StickyEvents.CHANGE, handleStickyStateChange)\n    stickyEvents.disableEvents(false)\n    stickyEvents = null\n  })\n</script>\n\n<template>\n  <aside :id=\"ASIDE_ELEMENT_ID\" class=\"desktop-aside\" ref=\"element\">\n    <div class=\"module\">\n      <aside-search />\n    </div>\n    <div class=\"module\">\n      <aside-statistic />\n    </div>\n    <div class=\"module\">\n      <aside-article />\n    </div>\n    <client-only transition>\n      <div class=\"module mammon\">\n        <aside-mammon />\n      </div>\n    </client-only>\n    <div class=\"module\">\n      <aside-calendar />\n    </div>\n    <div :id=\"ASIDE_STICKY_ELEMENT_ID\" class=\"aside-sticky-box\">\n      <div class=\"module mammon-square\">\n        <client-only>\n          <Adsense\n            ins-style=\"display:inline-block;width:250px;height:250px\"\n            data-ad-slot=\"6138120718\"\n            class=\"content\"\n          />\n        </client-only>\n      </div>\n      <div class=\"module\">\n        <client-only v-if=\"isArticlePage\">\n          <aside-anchor class=\"sticky-module\" />\n        </client-only>\n        <aside-tag class=\"sticky-module\" v-else />\n      </div>\n    </div>\n  </aside>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .desktop-aside {\n    display: block;\n    padding: 0;\n    width: $aside-width;\n\n    .module {\n      margin-bottom: $lg-gap;\n      @include radius-box($sm-radius);\n      @include common-bg-module();\n\n      &.mammon {\n        width: 100%;\n      }\n\n      &.mammon-square {\n        height: $aside-width;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n\n        .content {\n          height: 250px;\n          width: 250px;\n          overflow: hidden;\n        }\n      }\n\n      .sticky-module {\n        max-height: calc(100vh - 250px - #{$header-height + $lg-gap * 4});\n      }\n    }\n\n    .aside-sticky-box {\n      position: sticky;\n      top: $header-height + $lg-gap;\n      width: $aside-width;\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { computed } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { LanguageKey } from '/@/language'\n  import { Theme } from '/@/composables/theme'\n  import { HEADER_ELEMENT_ID } from '/@/constants/anchor'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { META } from '/@/config/app.config'\n  import { menus } from './menu'\n\n  const { i18n: _i18n, gtag, theme, gState } = useEnhancer()\n  // enable header nav bar when full page layout\n  const isEnabledNav = computed(() => !gState.layoutColumn.value.isNormal)\n\n  const themeIcon = computed(() => {\n    const themeIconMap = {\n      [Theme.Light]: 'icon-sun',\n      [Theme.Dark]: 'icon-moon'\n    }\n    return themeIconMap[theme.theme.value]\n  })\n\n  const toggleTheme = () => {\n    theme.toggle()\n    gtag?.event('switch_theme', {\n      event_category: GAEventCategories.Widget,\n      event_label: theme.theme.value\n    })\n  }\n\n  const tooggleLanguage = () => {\n    _i18n.toggle()\n    gtag?.event('switch_language', {\n      event_category: GAEventCategories.Widget,\n      event_label: _i18n.l.value?.name\n    })\n  }\n\n  const handleRootNavEvent = () => {\n    gtag?.event('root_header_home_nav', {\n      event_category: GAEventCategories.Universal\n    })\n  }\n</script>\n\n<template>\n  <header :id=\"HEADER_ELEMENT_ID\" class=\"header\" :class=\"{ 'enable-nav': isEnabledNav }\">\n    <div class=\"header-container container\">\n      <div class=\"header-header\">\n        <uimage cdn src=\"/images/logo.svg\" class=\"header-logo\" :alt=\"META.title\" />\n        <webfont class=\"header-slogan\">\n          <i18n :k=\"LanguageKey.APP_SLOGAN\" />\n        </webfont>\n        <router-link to=\"/\" class=\"header-link\" :title=\"META.title\" @mousedown=\"handleRootNavEvent\" />\n      </div>\n      <div class=\"toolbox\">\n        <button class=\"button menu\" v-if=\"isEnabledNav\">\n          <i class=\"iconfont icon-top-menu\"></i>\n        </button>\n        <button class=\"button language\" title=\"Switch language\" @click=\"tooggleLanguage\">\n          {{ _i18n.language.value || '-' }}\n        </button>\n        <button class=\"button theme\" :class=\"theme.theme.value\" @click=\"toggleTheme\">\n          <i class=\"iconfont\" :class=\"themeIcon\"></i>\n        </button>\n      </div>\n    </div>\n    <div class=\"header-nav\">\n      <nav class=\"nav-list container\">\n        <template v-for=\"(menu, index) in menus\" :key=\"menu.id\">\n          <span v-if=\"index > 0\" class=\"divider\"></span>\n          <ulink class=\"item\" :class=\"menu.id\" :to=\"menu.route\" :href=\"menu.url\">\n            <uimage v-if=\"menu.imageIcon\" class=\"image-icon\" :src=\"menu.imageIcon\" />\n            <i v-else-if=\"menu.icon\" class=\"font-icon iconfont\" :class=\"menu.icon\"></i>\n            <webfont class=\"text\" bolder :uppercase=\"!menu.disabledUppercase\">\n              <i18n :k=\"menu.i18nKey\" />\n            </webfont>\n            <span v-if=\"menu.hot\" class=\"superscript\">\n              <i class=\"iconfont icon-hot-fill\"></i>\n            </span>\n            <span v-if=\"menu.newWindow\" class=\"new-window\">\n              <i class=\"iconfont icon-new-window-s\"></i>\n            </span>\n          </ulink>\n        </template>\n      </nav>\n    </div>\n  </header>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .header {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: $header-height;\n    z-index: $z-index-header;\n    background-color: $module-bg;\n    border-bottom: 1px solid $module-bg-darker-2;\n    @include backdrop-blur(5px);\n\n    &.enable-nav:hover {\n      .header-nav {\n        @include visible();\n      }\n    }\n\n    .header-container {\n      height: 100%;\n      display: flex;\n      justify-content: space-between;\n\n      .header-header {\n        height: 100%;\n        display: flex;\n        position: relative;\n        align-items: center;\n        padding-left: $sm-gap;\n        width: 29em;\n        overflow: hidden;\n\n        @keyframes logo-blink {\n          0% {\n            mask-position: -30%;\n          }\n          100% {\n            mask-position: 666%;\n          }\n        }\n\n        .header-logo {\n          width: 11rem;\n          margin-right: $gap * 4;\n          filter: $theme-logo-rotate;\n          .logo-st {\n            fill: $primary;\n          }\n        }\n\n        .header-slogan {\n          color: $primary;\n          font-size: $font-size-h5;\n        }\n\n        .header-link {\n          position: absolute;\n          width: 100%;\n          height: 100%;\n        }\n      }\n\n      .toolbox {\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        justify-content: center;\n        opacity: 0.6;\n        @include visibility-transition();\n        &:hover {\n          opacity: 1;\n        }\n\n        .button {\n          position: relative;\n          display: block;\n          text-transform: uppercase;\n          margin: 0 $gap;\n          width: 2rem;\n          height: 2rem;\n          &.menu {\n            cursor: none;\n          }\n          &.language {\n            font-weight: bold;\n          }\n        }\n      }\n    }\n\n    .header-nav {\n      width: 100%;\n      height: 4rem;\n      background-color: $primary-lighter;\n      @include hidden();\n      @include visibility-transition();\n\n      .nav-list {\n        height: 100%;\n        display: flex;\n        justify-content: space-evenly;\n        align-items: center;\n\n        .divider {\n          height: 6px;\n          width: 1px;\n          background-color: $module-bg-translucent;\n        }\n\n        .item {\n          position: relative;\n          display: inline-flex;\n          align-items: center;\n          color: $text-reversal;\n          opacity: 0.7;\n          @include visibility-transition();\n          &:hover {\n            opacity: 1;\n          }\n          &.link-active {\n            .text {\n              padding-top: 4px;\n              padding-bottom: 2px;\n              border-bottom: 2px solid;\n            }\n          }\n\n          .font-icon {\n            margin-right: $sm-gap;\n          }\n\n          .image-icon {\n            width: 1em;\n            height: 1em;\n            margin-right: $sm-gap;\n            border-radius: $xs-radius;\n          }\n\n          .superscript {\n            margin-left: $xs-gap;\n          }\n\n          .new-window {\n            margin-left: $xs-gap;\n            margin-right: -$xs-gap;\n            margin-top: -$sm-gap;\n            font-size: $font-size-small - 3;\n            opacity: 0.8;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { useEnhancer } from '/@/app/enhancer'\n  import { GAEventCategories } from '/@/constants/gtag'\n  import { FOOTER_ELEMENT_ID } from '/@/constants/anchor'\n  import { VALUABLE_LINKS } from '/@/config/app.config'\n\n  const { gState, gtag } = useEnhancer()\n  const handleStatementModal = () => {\n    gState.toggleSwitcher('statement', true)\n    gtag?.event('statement_modal', {\n      event_category: GAEventCategories.Universal\n    })\n  }\n</script>\n\n<template>\n  <container tag=\"footer\" :id=\"FOOTER_ELEMENT_ID\" class=\"footer\">\n    <ulink class=\"sitemap-btn\" :href=\"VALUABLE_LINKS.SITE_MAP\">sitemap.xml</ulink>\n    <divider type=\"vertical\" />\n    <i18n zh=\" \" en=\"Powered By \" />\n    <ulink class=\"item\" :href=\"VALUABLE_LINKS.GITHUB_BLOG_STAR_LIST\">NodePress</ulink>\n    <i18n zh=\"\" en=\", \" />\n    <ulink class=\"item\" :href=\"VALUABLE_LINKS.GITHUB_SURMON_ME\">Vue</ulink>\n    <i18n zh=\"   \" en=\"\" />\n    <divider type=\"vertical\" />\n    <a class=\"statement\" href=\"javascript:void(0)\" @click=\"handleStatementModal\">\n      <i18n zh=\"\" en=\"FAQ\" />\n    </a>\n    <divider type=\"vertical\" />\n    <ulink :href=\"VALUABLE_LINKS.UPTIME_STATUS\">\n      <i18n zh=\"\" en=\"STATUS\" />\n    </ulink>\n  </container>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .footer {\n    display: flex;\n    align-items: center;\n    height: $footer-height;\n    text-align: center;\n    text-transform: uppercase;\n    font-size: $font-size-h6;\n    color: $text-secondary;\n    @include common-bg-module();\n\n    a:hover {\n      @include text-underline();\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { onMounted } from 'vue'\n  import { MAIN_ELEMENT_ID, MAIN_CONTENT_ELEMENT_ID } from '/@/constants/anchor'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useMusic } from '/@/composables/music'\n  import { useWallpaperStore } from '/@/stores/wallpaper'\n  import { getLayoutByRouteMeta } from '/@/transforms/layout'\n  import MusicPlayerHandle from '/@/components/widget/music-player/handle.vue'\n  import Wallflower from '/@/components/widget/wallflower/garden.vue'\n  import Wallpaper from '/@/components/widget/wallpaper/switcher.vue'\n  import Background from '/@/components/widget/background.vue'\n  import { useSponsorState } from '/@/components/widget/sponsor/state'\n  import SponsorTabs from '/@/components/widget/sponsor/tabs.vue'\n  import SponsorProvider from '/@/components/widget/sponsor/provider.vue'\n  import Share from '/@/components/widget/share.vue'\n  import Toolbox from '/@/components/widget/toolbox.vue'\n  import Feedback from '/@/components/widget/feedback.vue'\n  import Statement from '/@/components/widget/statement.vue'\n  import NavView from './nav.vue'\n  import AsideView from './aside/index.vue'\n  import HeaderView from './header.vue'\n  import FooterView from './footer.vue'\n\n  const sponsorState = useSponsorState()\n  const wallpaperStore = useWallpaperStore()\n  const { route, gState } = useEnhancer()\n  const { switcher, layoutColumn } = gState\n  const handlePageTransitionDone = () => {\n    gState.setLayoutColumn(getLayoutByRouteMeta(route.meta))\n  }\n  const handleSponsorModalClose = () => {\n    gState.toggleSwitcher('sponsor', false)\n  }\n  const handleFeedbackModalClose = () => {\n    gState.toggleSwitcher('feedback', false)\n  }\n  const handleStatementModalClose = () => {\n    gState.toggleSwitcher('statement', false)\n  }\n\n  onMounted(() => {\n    // bing wallpaper\n    wallpaperStore.fetch()\n    // music player\n    useMusic().init()\n  })\n</script>\n\n<template>\n  <div class=\"desktop-main\">\n    <background />\n    <wallflower />\n    <client-only>\n      <popup :visible=\"switcher.sponsor\" @close=\"handleSponsorModalClose\">\n        <div class=\"sponsor-modal\">\n          <div class=\"sponsor\">\n            <sponsor-tabs class=\"tabs\" :state=\"sponsorState\" :hide-title=\"true\" />\n            <sponsor-provider class=\"provider\" :state=\"sponsorState\" :max-sponsors=\"9\" />\n          </div>\n        </div>\n      </popup>\n      <popup\n        :visible=\"switcher.feedback\"\n        :mask-close=\"false\"\n        :scroll-close=\"false\"\n        @close=\"handleFeedbackModalClose\"\n      >\n        <feedback @close=\"handleFeedbackModalClose\" />\n      </popup>\n      <popup :visible=\"switcher.statement\" :scroll-close=\"false\" @close=\"handleStatementModalClose\">\n        <statement />\n      </popup>\n    </client-only>\n    <template v-if=\"!layoutColumn.isFull\">\n      <share class=\"main-share\" />\n      <wallpaper />\n      <toolbox />\n      <client-only>\n        <music-player-handle />\n      </client-only>\n    </template>\n    <header-view />\n    <main :id=\"MAIN_ELEMENT_ID\" class=\"main-container\" :class=\"{ 'full-page': layoutColumn.isFull }\">\n      <!-- MARK: keep order > long content > flicker -->\n      <nav-view class=\"nav-view\" v-if=\"layoutColumn.isNormal\" />\n      <aside-view class=\"aside-view\" v-if=\"layoutColumn.isNormal\" />\n      <div\n        :id=\"MAIN_CONTENT_ELEMENT_ID\"\n        class=\"main-view\"\n        :class=\"{\n          'layout-normal': layoutColumn.isNormal,\n          'layout-wide': layoutColumn.isWide,\n          'layout-full': layoutColumn.isFull\n        }\"\n      >\n        <!-- unuse suspense -> async route component -> can't extract style to css file -->\n        <router-view v-slot=\"{ Component, route: r }\">\n          <div class=\"router-view\">\n            <transition name=\"page\" mode=\"out-in\" @before-enter=\"handlePageTransitionDone\">\n              <suspense>\n                <component :is=\"Component\" :key=\"r.name\" />\n              </suspense>\n            </transition>\n          </div>\n        </router-view>\n      </div>\n    </main>\n    <footer-view class=\"footer-view\" />\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .sponsor-modal {\n    width: 50rem;\n    height: 28rem;\n    display: flex;\n    flex-direction: column;\n    background-color: $module-bg-lighter !important;\n\n    .sponsor {\n      flex-grow: 1;\n      display: flex;\n      flex-direction: column;\n\n      .tabs {\n        background-color: $module-bg-lighter;\n        border-bottom: 1px solid $module-bg-darker-1;\n      }\n\n      .provider {\n        flex: 1;\n      }\n    }\n  }\n\n  .desktop-main {\n    padding-top: $header-height + $lg-gap;\n\n    @media screen and (max-width: 1200px) {\n      #theme,\n      #language,\n      .main-share {\n        display: none !important;\n      }\n    }\n\n    .main-share {\n      position: fixed;\n      top: 12%;\n      left: 0;\n      height: auto;\n      max-width: 4rem;\n      display: flex;\n      flex-direction: column;\n      opacity: 0.4;\n\n      &:hover {\n        opacity: 1;\n      }\n\n      ::v-deep(.share-ejector) {\n        $height: 2.1em;\n        width: 3rem;\n        height: $height;\n        line-height: $height;\n        font-size: $font-size-h4;\n        border-top-right-radius: $xs-radius;\n        border-bottom-right-radius: $xs-radius;\n        transition: width $transition-time-fast;\n        &:hover {\n          width: 120%;\n        }\n      }\n    }\n\n    .main-container {\n      position: relative;\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between;\n      width: $container-width;\n      &.full-page {\n        width: 100%;\n      }\n\n      .nav-view {\n        order: 1;\n        flex-shrink: 0;\n        margin-right: $lg-gap;\n      }\n\n      .aside-view {\n        order: 3;\n        flex-shrink: 0;\n        margin-left: $lg-gap;\n      }\n\n      .main-view {\n        order: 2;\n        flex-grow: 1;\n        position: relative;\n        overflow: hidden;\n        transition: none;\n\n        &:-moz-full-screen {\n          overflow-y: auto;\n        }\n\n        &:-webkit-full-screen {\n          overflow-y: auto;\n        }\n\n        &:fullscreen {\n          overflow-y: auto;\n        }\n\n        &.layout-normal {\n          /* flex-grow: 1; */\n        }\n\n        &.layout-wide {\n          flex-grow: unset;\n          width: 100%;\n          margin: 0;\n        }\n\n        &.layout-full {\n          flex-grow: unset;\n          width: 100%;\n          margin: -$lg-gap 0;\n        }\n      }\n    }\n\n    .footer-view {\n      margin-top: $lg-gap;\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { reactive, ref, watch, onMounted, nextTick } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { RouteName } from '/@/app/router'\n  import { LanguageKey } from '/@/language'\n  import { isSearchFlow } from '/@/transforms/route'\n  import { onBeforeMount } from 'vue'\n\n  enum MobileHeaderEvents {\n    Open = 'open',\n    Close = 'close'\n  }\n\n  const props = defineProps<{\n    opened: boolean\n  }>()\n\n  const emit = defineEmits<{\n    (e: MobileHeaderEvents.Open): void\n    (e: MobileHeaderEvents.Close): void\n  }>()\n\n  const { route, router, i18n: _i18n } = useEnhancer()\n  const inputElement = ref<HTMLInputElement>(null as any)\n  const searchState = reactive({\n    open: false,\n    keyword: ''\n  })\n\n  const handleMenuToggle = () => {\n    props.opened ? emit(MobileHeaderEvents.Close) : emit(MobileHeaderEvents.Open)\n  }\n\n  const openSearch = () => {\n    searchState.open = true\n    nextTick(() => {\n      inputElement.value.focus()\n    })\n  }\n\n  const cancelSearch = () => {\n    searchState.open = false\n  }\n\n  const submitSearch = () => {\n    const keyword = searchState.keyword.trim()\n    if (keyword) {\n      router.push({\n        name: RouteName.SearchFlow,\n        params: { keyword }\n      })\n    }\n  }\n\n  onBeforeMount(() => {\n    watch(\n      () => router.currentRoute.value,\n      () => {\n        nextTick(() => {\n          cancelSearch()\n          emit(MobileHeaderEvents.Close)\n        })\n      }\n    )\n  })\n\n  onMounted(() => {\n    if (isSearchFlow(route.name as string)) {\n      searchState.keyword = route.params.keyword as string\n    }\n  })\n</script>\n\n<template>\n  <header class=\"header\">\n    <div class=\"search\" :class=\"{ actived: searchState.open }\">\n      <input\n        class=\"input\"\n        ref=\"inputElement\"\n        autocomplete=\"off\"\n        type=\"text\"\n        maxlength=\"16\"\n        required\n        :placeholder=\"_i18n.t(LanguageKey.SEARCH_PLACEHOLDER)\"\n        v-model.trim=\"searchState.keyword\"\n        @keyup.enter.stop.prevent=\"submitSearch\"\n      />\n      <span class=\"close\" @click.stop.prevent=\"cancelSearch\">\n        <i class=\"iconfont icon-cancel\"></i>\n      </span>\n    </div>\n    <transition name=\"module\">\n      <div v-if=\"searchState.open\" class=\"search-mask\" @click=\"cancelSearch\"></div>\n    </transition>\n    <nav class=\"navbar\">\n      <button class=\"navbar-menu\" @click.stop.prevent=\"handleMenuToggle\">\n        <i class=\"iconfont icon-menu\"></i>\n      </button>\n      <router-link to=\"/\" class=\"navbar-logo\">\n        <uimage class=\"image\" cdn src=\"/images/logo.svg\" />\n      </router-link>\n      <button class=\"navbar-search\" @click.stop.prevent=\"openSearch\">\n        <i class=\"iconfont icon-search\"></i>\n      </button>\n    </nav>\n  </header>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .header {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: $mobile-header-height;\n    background-color: $module-bg;\n    z-index: $z-index-header;\n    @include backdrop-blur(5px);\n\n    .search-mask {\n      position: fixed;\n      z-index: $z-index-normal;\n      top: 0;\n      left: 0;\n      width: 100vw;\n      height: 100vh;\n      touch-action: none;\n      background-color: $module-bg-translucent;\n      @include backdrop-blur(3px);\n    }\n\n    .search {\n      position: absolute;\n      display: flex;\n      z-index: $z-index-normal + 1;\n      width: 100%;\n      height: $mobile-header-height;\n      top: 0;\n      left: 0;\n      opacity: 0;\n      background-color: $text-reversal;\n      transform: translateY(-100%);\n\n      > .input {\n        width: 80%;\n        height: 100%;\n        padding: 1em;\n      }\n\n      > .close {\n        width: 20%;\n        height: 100%;\n        line-height: $mobile-header-height;\n        text-align: center;\n      }\n\n      &.actived {\n        opacity: 1;\n        transform: translateY(0%);\n      }\n    }\n\n    .navbar {\n      width: 100%;\n      height: $mobile-header-height;\n      display: flex;\n      position: relative;\n      align-items: center;\n      justify-content: space-between;\n\n      .navbar-menu,\n      .navbar-search {\n        height: 100%;\n        width: 20%;\n        line-height: $mobile-header-height;\n        text-align: center;\n      }\n\n      .navbar-logo {\n        width: 30%;\n\n        .image {\n          filter: $theme-logo-rotate;\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { META } from '/@/config/app.config'\n  const year = new Date().getFullYear()\n  const title = META.title\n</script>\n\n<template>\n  <footer class=\"footer\">\n    <div class=\"footer-content\">{{ year }}&nbsp;&nbsp;{{ title }}</div>\n  </footer>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .footer {\n    margin: 0;\n    @include common-bg-module();\n\n    .footer-content {\n      width: 100%;\n      height: $mobile-footer-height;\n      line-height: $mobile-footer-height;\n      font-size: $font-size-h6;\n      text-align: center;\n      text-transform: uppercase;\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { computed } from 'vue'\n  import { Language, LanguageKey } from '/@/language'\n  import { RouteName, CategorySlug } from '/@/app/router'\n  import { Theme } from '/@/composables/theme'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { useUniversalFetch } from '/@/universal'\n  import { useAdminInfoStore } from '/@/stores/basic'\n  import { getDefaultAvatar } from '/@/transforms/avatar'\n  import { getPageRoute, getCategoryFlowRoute } from '/@/transforms/route'\n  import { VALUABLE_LINKS, META } from '/@/config/app.config'\n\n  const { i18n: _i18n, theme } = useEnhancer()\n  const adminInfoStore = useAdminInfoStore()\n  const avatar = computed(() => adminInfoStore.data?.avatar || getDefaultAvatar())\n\n  const themeIcon = computed(() => {\n    const themeIconMap = {\n      [Theme.Light]: 'icon-sun',\n      [Theme.Dark]: 'icon-moon'\n    }\n    return themeIconMap[theme.theme.value]\n  })\n\n  const languageIcon = computed(() => {\n    const languageIconMap = {\n      [Language.Chinese]: 'icon-chinese',\n      [Language.English]: 'icon-english'\n    }\n    return languageIconMap[_i18n.language.value]\n  })\n\n  useUniversalFetch(() => adminInfoStore.fetch())\n</script>\n\n<template>\n  <aside class=\"aside\">\n    <div class=\"aside-user\">\n      <div class=\"avatar\">\n        <uimage :src=\"avatar\" :alt=\"META.author\" />\n      </div>\n      <div class=\"profile\">\n        <h3 class=\"name\">{{ META.author }}</h3>\n        <webfont class=\"slogan\">\n          <i18n :k=\"LanguageKey.APP_SLOGAN\" />\n        </webfont>\n      </div>\n    </div>\n    <div class=\"aside-tool\">\n      <div class=\"item\" @click=\"theme.toggle\">\n        <i class=\"iconfont\" :class=\"themeIcon\"></i>\n      </div>\n      <div class=\"item\" @click=\"_i18n.toggle\">\n        <i class=\"iconfont\" :class=\"languageIcon\"></i>\n      </div>\n    </div>\n    <div class=\"aside-nav\">\n      <nav class=\"nav-list\">\n        <router-link to=\"/\" class=\"item\">\n          <i class=\"iconfont icon-home\"></i>\n          <webfont bolder uppercase>\n            <i18n :k=\"LanguageKey.PAGE_HOME\" />\n          </webfont>\n        </router-link>\n        <router-link class=\"item\" :to=\"getCategoryFlowRoute(CategorySlug.Code)\">\n          <i class=\"iconfont icon-code\"></i>\n          <webfont bolder uppercase>\n            <i18n :k=\"LanguageKey.CATEGORY_CODE\" />\n          </webfont>\n        </router-link>\n        <router-link class=\"item\" :to=\"getCategoryFlowRoute(CategorySlug.Insight)\">\n          <i class=\"iconfont icon-insight\"></i>\n          <webfont bolder uppercase>\n            <i18n :k=\"LanguageKey.CATEGORY_INSIGHT\" />\n          </webfont>\n        </router-link>\n        <ulink class=\"item\" :href=\"VALUABLE_LINKS.GITHUB\">\n          <i class=\"iconfont icon-github\"></i>\n          <webfont bolder uppercase>\n            <i18n :k=\"LanguageKey.PAGE_GITHUB\" />\n          </webfont>\n          <span class=\"newscript\">\n            <i class=\"iconfont icon-new-window-s\"></i>\n          </span>\n        </ulink>\n        <router-link class=\"item\" :to=\"getPageRoute(RouteName.Archive)\">\n          <i class=\"iconfont icon-quill\"></i>\n          <webfont bolder uppercase>\n            <i18n :k=\"LanguageKey.PAGE_ARCHIVE\" />\n          </webfont>\n        </router-link>\n        <router-link class=\"item\" :to=\"getPageRoute(RouteName.About)\">\n          <i class=\"iconfont icon-swordsman\"></i>\n          <webfont bolder uppercase>\n            <i18n :k=\"LanguageKey.PAGE_ABOUT\" />\n          </webfont>\n        </router-link>\n        <router-link class=\"item guestbook\" :to=\"getPageRoute(RouteName.Guestbook)\">\n          <i class=\"iconfont icon-comment\"></i>\n          <webfont bolder uppercase>\n            <i18n :k=\"LanguageKey.PAGE_GUESTBOOK\" />\n          </webfont>\n        </router-link>\n        <router-link class=\"item app\" :to=\"getPageRoute(RouteName.App)\">\n          <uimage cdn class=\"icon\" src=\"/images/page-app/logo.png\" />\n          <webfont bolder uppercase>\n            <i18n :k=\"LanguageKey.PAGE_APP\" />\n          </webfont>\n        </router-link>\n      </nav>\n    </div>\n  </aside>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .aside {\n    $border-color: darken($mobile-aside-bg, 3%);\n    display: block;\n    overflow: auto;\n    position: relative;\n    width: 100%;\n    height: 100%;\n    margin: 0;\n    color: $white;\n\n    .aside-user {\n      $size: 58px;\n      width: 100%;\n      display: flex;\n      align-items: flex-start;\n      padding: $gap * 2;\n      border-bottom: 1px solid $border-color;\n\n      .avatar {\n        width: $size;\n        height: $size;\n        flex-shrink: 0;\n\n        img {\n          max-width: 100%;\n          border: 2px solid $white;\n          @include radius-box(100%);\n        }\n      }\n\n      .profile {\n        height: $size;\n        display: inline-flex;\n        flex-direction: column;\n        justify-content: center;\n        margin-left: $lg-gap;\n\n        .name {\n          font-weight: bold;\n          margin-top: 0;\n          margin-bottom: $sm-gap;\n        }\n\n        .slogan {\n          margin: 0;\n          max-width: 10rem;\n          color: $surmon;\n          @include text-overflow();\n        }\n      }\n    }\n\n    .aside-tool {\n      padding: $gap 0;\n      display: flex;\n      border-bottom: 1px solid $border-color;\n\n      .item {\n        width: 50%;\n        display: inline-flex;\n        justify-content: center;\n        align-items: center;\n        font-size: $font-size-h2;\n      }\n    }\n\n    .aside-nav {\n      width: 100%;\n      margin-top: $sm-gap;\n\n      .nav-list {\n        padding: 0;\n        margin: 0;\n\n        .item {\n          display: flex;\n          align-items: center;\n          width: 100%;\n          height: 3em;\n          margin-bottom: 0.5em;\n          padding: 0 1em;\n          border: none;\n          text-decoration: none;\n          color: $white;\n          &:last-child {\n            margin-bottom: 0;\n          }\n\n          &.link-active {\n            color: $primary;\n            font-weight: bold;\n            background-color: $body-bg;\n          }\n\n          &.app {\n            display: flex;\n            align-items: center;\n            margin-top: $gap;\n            color: $surmon;\n            .icon {\n              width: 1em;\n              height: 1em;\n              margin-right: 1em;\n              border-radius: $xs-radius;\n            }\n          }\n\n          .iconfont {\n            width: 1em;\n            margin-right: 1em;\n            display: inline-block;\n            font-weight: normal;\n          }\n\n          .newscript {\n            margin-left: $sm-gap;\n            font-size: $font-size-small;\n          }\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { ref, computed, watch, onMounted } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { getPageURL } from '/@/transforms/url'\n  import HeaderView from './header.vue'\n  import FooterView from './footer.vue'\n  import AsideView from './aside.vue'\n\n  const { route } = useEnhancer()\n  const pageURL = computed(() => getPageURL(route.fullPath))\n\n  const isOpenedAside = ref(false)\n  const openAside = () => (isOpenedAside.value = true)\n  const closeAside = () => (isOpenedAside.value = false)\n\n  onMounted(() => {\n    watch(isOpenedAside, (opened) => {\n      document.body.style.overflow = opened ? 'hidden' : 'auto'\n    })\n  })\n</script>\n\n<template>\n  <div class=\"mobile-main\">\n    <div class=\"asider\" :class=\"{ opened: isOpenedAside }\">\n      <aside-view class=\"aside\" />\n    </div>\n    <div class=\"main\" :class=\"{ opened: isOpenedAside }\">\n      <div v-if=\"isOpenedAside\" class=\"close-mask\" @click=\"closeAside\" />\n      <header-view :opened=\"isOpenedAside\" @close=\"closeAside\" @open=\"openAside\" />\n      <main class=\"main-container\">\n        <router-view name=\"mobile\" v-slot=\"{ Component, route }\">\n          <div class=\"route-view\" v-if=\"route.meta.responsive\">\n            <component :is=\"Component\" :key=\"route.name\" />\n          </div>\n          <div class=\"fallback\" v-else>\n            <i class=\"iconfont icon-desktop\"></i>\n            <p class=\"text\">\n              <i18n zh=\" PC \" en=\"This page only support visit on PC\" />\n            </p>\n            <a class=\"link\" :href=\"pageURL\">{{ pageURL }}</a>\n          </div>\n        </router-view>\n      </main>\n      <footer-view />\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  .mobile-main {\n    color: $text;\n    background-color: $module-bg-hover;\n    $aside-width: 66%;\n\n    .asider {\n      width: $aside-width;\n      height: 100%;\n      position: fixed;\n      top: 0;\n      left: 0;\n      background-color: $mobile-aside-bg;\n      transform: translate3d(-100%, 0, 0);\n      transition: $mobile-aside-transition;\n      .aside {\n        opacity: 0;\n        transform: scale(0.8, 0.8);\n        transition: $mobile-aside-transition;\n      }\n\n      &.opened {\n        transform: translate3d(0, 0, 0);\n        overflow: hidden;\n        -webkit-overflow-scrolling: touch;\n        .aside {\n          opacity: 1;\n          transform: scale(1, 1);\n          transition: $mobile-aside-transition;\n        }\n      }\n    }\n\n    .main {\n      min-height: 100vh;\n      position: relative;\n      transition: $mobile-aside-transition;\n\n      &.opened {\n        transform: translate3d($aside-width, 0, 0);\n      }\n\n      .close-mask {\n        position: absolute;\n        width: 100vw;\n        height: 100%;\n        top: 0;\n        right: 0;\n        z-index: $z-index-top;\n        background-color: $module-bg-translucent;\n        @include backdrop-blur(3px);\n      }\n\n      .main-container {\n        position: relative;\n        overflow: hidden;\n        width: 100%;\n        min-height: calc(100vh - $mobile-header-height);\n        margin: 0;\n        padding: $lg-gap $gap;\n        padding-top: $mobile-header-height + $lg-gap;\n        transition: width 0.35s;\n        display: flex;\n\n        .fallback {\n          width: 100%;\n          padding-bottom: 6rem; // for middle\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n\n          .iconfont {\n            color: $text-divider;\n            font-size: 12rem;\n          }\n\n          .text {\n            font-size: $font-size-h4;\n            margin-bottom: $lg-gap;\n          }\n\n          .link {\n            color: $text-disabled;\n            @include text-underline(0.4em);\n          }\n        }\n\n        .route-view {\n          width: 100%;\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\" setup>\n  import { useEnhancer } from '/@/app/enhancer'\n  import EmojiRain from '/@/components/widget/emoji-rain.vue'\n  import Captured from '/@/components/root/captured.vue'\n  import DesktopMain from '/@/components/layout/desktop/main.vue'\n  import MobileMain from '/@/components/layout/mobile/main.vue'\n\n  const { isMobile } = useEnhancer()\n</script>\n\n<template>\n  <div v-cloak class=\"app-root\">\n    <client-only>\n      <progress-bar :spin=\"!isMobile\" />\n      <emoji-rain />\n      <popup-root />\n    </client-only>\n    <captured>\n      <responsive>\n        <template #desktop><desktop-main /></template>\n        <template #mobile><mobile-main /></template>\n      </responsive>\n    </captured>\n  </div>\n</template>\n\n<style lang=\"scss\">\n  @import 'src/styles/variables.scss';\n\n  .app-root {\n    &[v-cloak] {\n      color: transparent;\n      -webkit-text-fill-color: transparent;\n    }\n  }\n</style>\n","/**\n * @file App main\n * @module app.main\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { createSSRApp } from 'vue'\nimport { RouterHistory } from 'vue-router'\nimport { Language, LanguageKey, languages } from '/@/language'\nimport { rebirthSSRContext } from '/@/universal'\nimport { createUniversalStore } from '/@/stores'\nimport { createI18n } from '/@/composables/i18n'\nimport { createHead, Head } from '/@/composables/head'\nimport { createTheme, Theme } from '/@/composables/theme'\nimport { NODE_ENV } from '/@/environment'\nimport { createUniversalRouter, RouterCreatorOptions } from './router'\nimport { createGlobalState, LayoutColumn } from './state'\nimport API_CONFIG from '/@/config/api.config'\nimport components from './components'\nimport App from './index.vue'\n\nconsole.info(`[APP INITED]:`, { NODE_ENV }, API_CONFIG)\n\nexport interface ICreatorContext {\n  historyCreator(base?: string): RouterHistory\n  routerBeforeMiddleware?(globalState: any): RouterCreatorOptions['beforeMiddleware']\n  routerAfterMiddleware?(globalState: any): RouterCreatorOptions['afterMiddleware']\n  layout?: LayoutColumn\n  theme: Theme\n  language: string\n  userAgent: string\n}\n\nexport type MainApp = ReturnType<typeof createMainApp>\nexport const createMainApp = (context: ICreatorContext) => {\n  // 1. create app\n  const app = createSSRApp(App)\n  // 2. reset SSR context\n  rebirthSSRContext(app)\n  // 3. global state\n  const globalState = createGlobalState({\n    userAgent: context.userAgent || '',\n    language: context.language || '',\n    layout: context.layout ?? LayoutColumn.Normal\n  })\n  // 4. store\n  const store = createUniversalStore({ globalState })\n  // 5. router\n  const router = createUniversalRouter({\n    beforeMiddleware: context.routerBeforeMiddleware?.(globalState),\n    afterMiddleware: context.routerAfterMiddleware?.(globalState),\n    history: context.historyCreator()\n  })\n  // 6. composables\n  const head = createHead()\n  const theme = createTheme(context.theme)\n  const i18n = createI18n({\n    default: globalState.userAgent.isZhUser ? Language.Chinese : Language.English,\n    keys: Object.values(LanguageKey),\n    languages\n  })\n\n  // global head attrbutes: for use in different environments\n  const getGlobalHead = (): Head => ({\n    htmlAttrs: {\n      lang: i18n.l.value?.iso ?? '',\n      'data-theme': theme.theme.value,\n      'data-device': globalState.userAgent.isMobile ? 'mobile' : 'desktop'\n    }\n  })\n\n  // handle global error\n  app.config.errorHandler = (error) => globalState.setRenderError(error)\n  // handle router error https://next.router.vuejs.org/api/#onerror\n  router.onError(globalState.setRenderError)\n\n  // handle router validate error & 404 error\n  // https://next.router.vuejs.org/guide/advanced/navigation-guards.html#optional-third-argument-next\n  router.beforeEach((to, _, next) => {\n    if (to.meta.validator) {\n      to.meta\n        .validator({ route: to, i18n, store })\n        .then(next)\n        .catch((error) => {\n          // next(error) > router error > global state error\n          const newError: any = new Error()\n          newError.code = error.code\n          newError.message = error.message\n          next(newError)\n        })\n    } else {\n      next()\n    }\n  })\n\n  app.use(router)\n  app.use(store)\n  app.use(globalState)\n  app.use(i18n)\n  app.use(head)\n  app.use(theme)\n  app.use(components)\n\n  return {\n    app,\n    router,\n    store,\n    globalState,\n    i18n,\n    head,\n    theme,\n    getGlobalHead\n  }\n}\n","/**\n * @file Google Adsense\n * @module composable.adsense\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { App, defineComponent, h } from 'vue'\nimport { useEnhancer } from '/@/app/enhancer'\nimport { LanguageKey } from '/@/language'\nimport { loadScript } from '/@/utils/scripter'\n\ndeclare global {\n  interface Window {\n    adsbygoogle: any[]\n  }\n}\n\nexport interface AdSenseConfig {\n  id: string\n  enabledAutoAd?: boolean\n}\n\nconst ADS_SCRIPT = '//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js'\n\nconst getComponent = (clientId: string) =>\n  defineComponent({\n    name: 'Adsense',\n    props: {\n      class: String,\n      insClass: {\n        type: String,\n        default: ''\n      },\n      insStyle: {\n        type: String,\n        default: 'display:block;'\n      },\n      dataAdClient: String,\n      dataAdSlot: String,\n      dataAdLayoutKey: String,\n      dataAdTest: String,\n      dataAdFormat: String,\n      dataFullWidthResponsive: [Boolean, String]\n    },\n    setup(props) {\n      const { i18n } = useEnhancer()\n\n      return () => {\n        const {\n          class: rootClass,\n          insClass,\n          insStyle,\n          dataAdClient,\n          dataAdSlot,\n          dataAdLayoutKey,\n          dataAdTest,\n          dataAdFormat,\n          dataFullWidthResponsive,\n          ...restAttrs\n        } = props\n\n        return h(\n          'div',\n          {\n            class: ['mammon-box', rootClass],\n            placeholder: i18n.t(LanguageKey.AD)\n          },\n          [\n            h('script', {\n              type: 'text/javascript',\n              async: 'true',\n              src: ADS_SCRIPT\n            }),\n            h('ins', {\n              class: ['adsbygoogle', insClass],\n              style: insStyle,\n              'data-ad-client': dataAdClient || clientId,\n              'data-ad-slot': dataAdSlot,\n              'data-ad-layout-key': dataAdLayoutKey,\n              'data-ad-test': dataAdTest,\n              'data-ad-format': dataAdFormat,\n              'data-full-width-responsive': dataFullWidthResponsive,\n              ...restAttrs\n            }),\n            h('script', `(adsbygoogle = window.adsbygoogle || []).push({})`)\n          ]\n        )\n      }\n    }\n  })\n\nexport default {\n  install(app: App, adsenseConfig: AdSenseConfig) {\n    const component = getComponent(adsenseConfig.id)\n    app.component(component.name, component)\n    // auto ad\n    if (adsenseConfig.enabledAutoAd) {\n      loadScript(ADS_SCRIPT, { async: true }).then(() => {\n        const adsbygoogle = window.adsbygoogle || []\n        adsbygoogle.push({\n          google_ad_client: adsenseConfig.id,\n          enable_page_level_ads: true\n        })\n      })\n    }\n  }\n}\n","<script lang=\"ts\" setup>\n  import { watchEffect, ref } from 'vue'\n  import { useEnhancer } from '/@/app/enhancer'\n  import { usePopupWithRoot } from './hook'\n\n  const element = ref<HTMLElement>(null as any)\n  const { isDarkTheme, isMobile } = useEnhancer()\n  const { state, image, hidden } = usePopupWithRoot(() => element.value)\n  const handleWindowScroll = () => hidden()\n  const handleMaskClick = () => {\n    state.maskClose && hidden()\n  }\n\n  watchEffect(() => {\n    state.visible && state.scrollClose\n      ? // https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md#solution-the-passive-option\n        window.addEventListener('scroll', handleWindowScroll, { passive: true })\n      : window.removeEventListener('scroll', handleWindowScroll)\n  })\n</script>\n\n<template>\n  <div id=\"popup\" class=\"popup\" :class=\"{ mobile: isMobile, dark: isDarkTheme }\">\n    <transition name=\"module\">\n      <div class=\"mask\" v-show=\"state.visible\" @click.self=\"handleMaskClick\">\n        <div ref=\"element\" class=\"warpper\" :class=\"{ border: state.border }\">\n          <img v-if=\"state.isImage\" v-bind=\"image.attrs\" :src=\"image.src || ''\" />\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  @import 'src/styles/variables.scss';\n  @import 'src/styles/mixins.scss';\n\n  #popup {\n    &.dark {\n      .mask {\n        background-color: rgba($black, 0.5);\n      }\n    }\n    &.mobile {\n      .mask {\n        .warpper {\n          & > ::v-deep(*) {\n            min-width: 50vw;\n            min-height: 4rem;\n          }\n        }\n      }\n    }\n\n    .mask {\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100vw;\n      height: 100vh;\n      z-index: $z-index-top;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      overflow: hidden;\n      background-color: rgba($grey, 0.5);\n      @include visibility-transition();\n      @include backdrop-blur(5px);\n\n      .warpper {\n        display: contents;\n        position: relative;\n\n        & > ::v-deep(*) {\n          min-width: 24rem;\n          min-height: 8rem;\n          max-width: 90%;\n          max-height: 90%;\n          background-color: $module-bg;\n        }\n\n        &.border > ::v-deep(*) {\n          border: $sm-gap solid $module-bg-darker-1;\n          @include radius-box($sm-radius);\n        }\n      }\n    }\n  }\n</style>\n","/**\n * @file popup component\n * @module composable.popup.component\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { h, defineComponent, watch, Teleport, Fragment, PropType, ExtractPropTypes, onBeforeMount } from 'vue'\nimport { usePopup } from './hook'\n\nexport type PopupUiPropsType = Partial<ExtractPropTypes<typeof PopupUiProps>>\nexport const PopupUiProps = {\n  border: {\n    type: Boolean as PropType<boolean>,\n    default: true\n  },\n  maskClose: {\n    type: Boolean as PropType<boolean>,\n    default: true\n  },\n  scrollClose: {\n    type: Boolean as PropType<boolean>,\n    default: true\n  }\n}\n\nexport const omitUiProps = <P extends PopupUiPropsType>(\n  p: P\n): Pick<P, Exclude<keyof P, keyof PopupUiPropsType>> => {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const { border, maskClose, scrollClose, ...rest } = p\n  return rest\n}\n\nenum PopupEvent {\n  Close = 'close',\n  UpdateVisible = 'update:visible'\n}\n\n/**\n * @example\n *  <popup :visible=\"false\" :clone=\"true\">\n *    <div class=\"xxx\">I will visible on original & modal</div>\n *  </popup>\n */\nexport default defineComponent({\n  props: {\n    // component options\n    visible: {\n      type: Boolean,\n      default: false\n    },\n    clone: {\n      type: Boolean,\n      default: false\n    },\n    // ui options\n    ...PopupUiProps\n  },\n  emits: [PopupEvent.Close, PopupEvent.UpdateVisible],\n  setup(props, context) {\n    const popup = usePopup()\n\n    onBeforeMount(() => {\n      watch(\n        () => props.visible,\n        (visible) => {\n          // eslint-disable-next-line @typescript-eslint/no-unused-vars\n          const { clone: _, visible: __, ...popupOptions } = props\n          visible ? popup.visible(popupOptions) : popup.hidden()\n        }\n      )\n    })\n\n    onBeforeMount(() => {\n      watch(\n        () => popup.state.visible,\n        (visible) => {\n          if (!visible && props.visible) {\n            context.emit(PopupEvent.UpdateVisible, false)\n            context.emit(PopupEvent.Close)\n          }\n        }\n      )\n    })\n\n    return () => {\n      const renderSlotNode = () => context.slots.default?.()\n      const renderTeleportNode = () =>\n        h(\n          // @ts-ignore\n          Teleport,\n          { to: popup.state.$container },\n          renderSlotNode()\n        )\n\n      // modal mode -> visible ? modal-render : null\n      const renderModalNode = () => (props.visible ? renderTeleportNode() : null)\n\n      // clone mode -> render & visible -> modal render\n      if (props.clone) {\n        return h(Fragment, [renderSlotNode(), renderModalNode()])\n      }\n\n      // modal mode\n      return renderModalNode()\n    }\n  }\n})\n","/**\n * @file popup image component\n * @module composable.popup.image\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { h, defineComponent } from 'vue'\nimport { PopupUiProps, omitUiProps } from './popup'\nimport { usePopup } from './hook'\n\n/**\n * @example <popup-image src=\"xxx\" class=\"image\" />\n */\nexport default defineComponent({\n  props: {\n    src: String,\n    ...PopupUiProps\n  },\n  setup(props, context) {\n    const popup = usePopup()\n\n    // Image -> click -> visible modal, ignore (clone/visible)\n    return () => {\n      const { src, ...popupProps } = props\n      if (!src) {\n        return null\n      }\n\n      const imageProps = omitUiProps(props)\n      const imageAttrs = {\n        ...imageProps,\n        ...context.attrs\n      }\n\n      return h('img', {\n        ...imageAttrs,\n        src,\n        onClick(...args) {\n          ;(imageProps as any)?.onClick?.(...args)\n          popup?.vImage(src, imageAttrs, popupProps)\n        }\n      })\n    }\n  }\n})\n","/**\n * @file Client popup\n * @module composable.popup\n * @author Surmon <https://github.com/surmon-china>\n * @example window.$popup.vImage('https://xxx.jpg')\n */\n\nimport { App, Plugin, readonly, reactive, nextTick } from 'vue'\nimport PopupRootComponent from './root.vue'\nimport PopupImageComponent from './image'\nimport PopupComponent from './popup'\nimport { PopupSymbol } from './constant'\n\ndeclare module 'vue' {\n  export interface GlobalComponents {\n    Popup: typeof PopupComponent\n    PopupRoot: typeof PopupRootComponent\n    PopupImage: typeof PopupImageComponent\n  }\n}\n\ndeclare global {\n  interface Window {\n    // @ts-ignore\n    $popup: Popup\n  }\n}\n\nconst DEFAULT_STATE = Object.freeze({\n  visible: false as boolean,\n  isImage: false as boolean,\n  border: true as boolean,\n  maskClose: true as boolean,\n  scrollClose: true as boolean\n})\n\nconst createPopupStore = () => {\n  const image = reactive({\n    src: null as null | string,\n    attrs: null as null | object\n  })\n\n  const state = reactive({\n    $container: null as null | HTMLElement,\n    ...DEFAULT_STATE\n  })\n\n  const hidden = (cb?: () => void) => {\n    if (!state.visible) {\n      cb?.()\n      return\n    }\n    Object.assign(state, { ...DEFAULT_STATE })\n    image.src = null\n    image.attrs = null\n    if (cb) {\n      nextTick(cb)\n    }\n  }\n\n  const visible = (options?: Partial<typeof state>) => {\n    hidden(() => {\n      Object.assign(state, {\n        ...options,\n        isImage: false,\n        visible: true\n      })\n    })\n  }\n\n  const vImage = (src: string, attrs?: any, options?: Partial<typeof state>) => {\n    hidden(() => {\n      image.src = src\n      image.attrs = attrs\n      Object.assign(state, {\n        ...options,\n        border: true,\n        isImage: true,\n        visible: true\n      })\n    })\n  }\n\n  return {\n    state: readonly(state),\n    image: readonly(image),\n    visible,\n    hidden,\n    vImage,\n    $setRoot: (element: HTMLElement) => {\n      state.$container = element\n    }\n  }\n}\n\nexport interface PopupPluginConfig {\n  exportToGlobal?: boolean\n}\n// @ts-ignore\nexport type Popup = ReturnType<typeof createPopupStore>\nexport const createPopup = (): Popup & Plugin => {\n  const popupStore = createPopupStore()\n  return {\n    ...popupStore,\n    install(app: App, config: PopupPluginConfig) {\n      app.provide(PopupSymbol, popupStore)\n      app.component('Popup', PopupComponent)\n      app.component('PopupImage', PopupImageComponent)\n      app.component('PopupRoot', PopupRootComponent)\n      if (config?.exportToGlobal) {\n        ;(window as any).$popup = popupStore\n      }\n    }\n  }\n}\n","/**\n * @file amplitude player\n * @module effect.amplitude\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport amplitude from 'amplitudejs'\nimport { onClient } from '/@/universal'\n\ndeclare global {\n  interface Window {\n    Amplitude: any\n    AmplitudeCore: any\n  }\n}\n\nonClient(() => {\n  window.Amplitude = window.Amplitude || amplitude\n})\n\nexport default amplitude\n","/**\n * @file Generate text to image DataURL\n * @module transforms.text2image\n * @author Surmon <https://github.com/surmon-china>\n * @link https://github.com/albinekb/favicon-emoji/blob/master/lib/browser.js\n */\n\nconst trimCanvas = (canvas: HTMLCanvasElement) => {\n  const rowBlank = (imageData, width, y) => {\n    for (let x = 0; x < width; ++x) {\n      if (imageData.data[y * width * 4 + x * 4 + 3] !== 0) return false\n    }\n    return true\n  }\n\n  const columnBlank = (imageData, width, x, top, bottom) => {\n    for (let y = top; y < bottom; ++y) {\n      if (imageData.data[y * width * 4 + x * 4 + 3] !== 0) return false\n    }\n    return true\n  }\n\n  const context = canvas.getContext('2d')!\n  const width = canvas.width\n  const imageData = context.getImageData(0, 0, canvas.width, canvas.height)\n\n  let top = 0\n  let bottom = imageData.height\n  let left = 0\n  let right = imageData.width\n\n  while (top < bottom && rowBlank(imageData, width, top)) {\n    ++top\n  }\n  while (bottom - 1 > top && rowBlank(imageData, width, bottom - 1)) {\n    --bottom\n  }\n  while (left < right && columnBlank(imageData, width, left, top, bottom)) {\n    ++left\n  }\n  while (right - 1 > left && columnBlank(imageData, width, right - 1, top, bottom)) {\n    --right\n  }\n\n  const trimmed = context.getImageData(left, top, right - left, bottom - top)\n  const max = Math.max(trimmed.width, trimmed.height)\n\n  const copy = Object.assign(document.createElement('canvas'), {\n    width: max,\n    height: max\n  })\n\n  const copyCtx = copy.getContext('2d')!\n  copyCtx.putImageData(trimmed, (max - trimmed.width) / 2, (max - trimmed.height) / 2)\n  return copy\n}\n\nexport async function renderTextToDataURL(text = '', size = 16) {\n  const canvas = Object.assign(document.createElement('canvas'), {\n    width: size * 2,\n    height: size * 2\n  })\n  const context = canvas.getContext('2d')!\n  context.clearRect(0, 0, canvas.width, canvas.height)\n  context.font = `${size}px Apple Color Emoji`\n  context.textAlign = 'center'\n  context.textBaseline = 'middle'\n  context.fillText(text, (size * 2) / 2, (size * 2) / 2)\n\n  return trimCanvas(canvas).toDataURL('image/png')\n}\n","/**\n * @file Title surprise\n * @module effect.titler\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { renderTextToDataURL } from '/@/transforms/text-2-image'\n\n// title\nlet rollTimer: number\nconst setTitle = (title: string) => {\n  document.title = title\n  if (title.length <= 10) {\n    return false\n  }\n  const [first, ...content] = title.split('')\n  const newTitle = [...content, first].join('')\n  rollTimer = window.setTimeout(() => setTitle(newTitle), 366)\n}\n\n// favicon\nconst getFavicon = () => {\n  return Array.from(document.getElementsByTagName('link'))\n    .find((node) => node.getAttribute('rel') == 'icon')\n    ?.getAttribute('href')\n}\nconst setFavicon = async (target) => {\n  Array.from(document.getElementsByTagName('link'))\n    .find((node) => node.getAttribute('rel') == 'icon')\n    ?.setAttribute('href', target)\n}\n\nconst cache = {\n  favicon: getFavicon()!,\n  title: document.title\n}\n\nexport const resetTitler = () => {\n  setFavicon(cache.favicon)\n  document.title = cache.title\n  window.clearTimeout(rollTimer)\n}\n\nexport const runTitler = async ({ favicon, title }) => {\n  cache.title = document.title\n  cache.favicon = getFavicon()!\n  setTitle(title + ' ')\n  setFavicon(await renderTextToDataURL(favicon, 28))\n}\n","/**\n * @file Slogan consoler\n * @module effect.slogan\n * @author Surmon <https://github.com/surmon-china>\n */\n\nexport const consoleSlogan = (slogan: string, email?: string) => {\n  console.clear()\n  console.log(`%c${slogan} %c${email || ''}`, 'color:#666;font-size:3em;', 'color:#666;font-size:13px;')\n}\n","/**\n * @file App exporter\n * @module effect.exporter\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { App } from 'vue'\n\ndeclare global {\n  interface Window {\n    $app: App\n  }\n}\n\nexport const exportAppToGlobal = (app: App) => {\n  window.$app = app\n}\n","/**\n * @file sticky event hack lib\n * @module effect.sticky\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport StickyEvents from 'sticky-events'\n\ndeclare global {\n  interface Window {\n    $StickyEvents: any\n  }\n}\n\nexport const exportStickyEventsToGlobal = () => {\n  window.$StickyEvents = StickyEvents\n}\n","/**\n * @file emoji rain animation effect\n * @module effect.emoji-233333\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport Emoji233333 from 'emoji-233333'\n\ndeclare global {\n  interface Window {\n    $Emoji233333: any\n  }\n}\n\nexport const exportEmojiRainToGlobal = () => {\n  window.$Emoji233333 = Emoji233333\n}\n","/**\n * @file Client app entry\n * @module CSR-entry\n * @author Surmon <https://github.com/surmon-china>\n */\n\n// polyfills\nimport 'intersection-observer'\n\nimport { computed, watch } from 'vue'\nimport { createWebHistory } from 'vue-router'\nimport { createMainApp } from '/@/app/main'\nimport { getSSRContext } from '/@/universal'\nimport gtag from '/@/composables/gtag'\nimport lozad from '/@/composables/lozad'\nimport adsense from '/@/composables/adsense'\nimport { createDefer } from '/@/composables/defer'\nimport { createMusic } from '/@/composables/music'\nimport { createPopup } from '/@/composables/popup'\nimport { createLoading } from '/@/composables/loading'\nimport amplitude from '/@/effects/amplitude'\nimport { runTitler, resetTitler } from '/@/effects/titler'\nimport { consoleSlogan } from '/@/effects/slogan'\nimport { initCopyrighter } from '/@/effects/copyright'\nimport { exportAppToGlobal } from '/@/effects/exporter'\nimport { exportStickyEventsToGlobal } from '/@/effects/sticky'\nimport { exportEmojiRainToGlobal } from '/@/effects/emoji-23333'\nimport { getLayoutByRouteMeta } from '/@/transforms/layout'\nimport { getCDN_URL } from '/@/transforms/url'\nimport { Language, LanguageKey } from '/@/language'\nimport { IDENTITIES } from '/@/config/app.config'\nimport { isProd } from '/@/environment'\n\nimport './effects/swiper/style'\nimport './effects/elements/index.scss'\nimport './styles/app.scss'\n\n// app\nconst { app, router, head, globalState, i18n, store, getGlobalHead } = createMainApp({\n  historyCreator: createWebHistory,\n  language: navigator.language,\n  userAgent: navigator.userAgent,\n  layout: getSSRContext('layout'),\n  theme: getSSRContext('theme')\n})\n\n// services\nconst defer = createDefer()\nconst popup = createPopup()\nconst loading = createLoading()\nconst music = createMusic({ amplitude })\n\n// plugins & services\napp.use(music)\napp.use(lozad, { exportToGlobal: true })\napp.use(defer, { exportToGlobal: true })\napp.use(popup, { exportToGlobal: true })\napp.use(loading, { exportToGlobal: true })\napp.use(adsense, { id: IDENTITIES.GOOGLE_ADSENSE_PUBLISHER_ID, enabledAutoAd: true })\napp.use(gtag, {\n  router,\n  id: IDENTITIES.GOOGLE_ANALYTICS_TRACKING_ID,\n  config: { send_page_view: false },\n  customResourceURL: getCDN_URL('/effects/gtag')\n})\n\n// init: store (from SSR context or fetch)\nstore.hydrate()\n\n// init: services with client\nexportEmojiRainToGlobal()\nexportStickyEventsToGlobal()\nexportAppToGlobal(app)\ninitCopyrighter()\n\n// init global head attributes: https://unhead.harlanzw.com/api/core/push\nconst globalHead = computed(() => getGlobalHead())\nconst mainHead = head.push(globalHead, { mode: 'client' })\nwatch(globalHead, (newValue) => mainHead.patch(newValue))\n\n// init: router loading middleware client only\nrouter.beforeEach((_, __, next) => {\n  loading.start()\n  next()\n})\nrouter.afterEach((_, __, failure) => {\n  failure ? loading.fail(failure) : loading.finish()\n})\n\n// router ready -> mount\nrouter.isReady().finally(() => {\n  // UI layout: set UI layout by route (for SPA)\n  globalState.setLayoutColumn(getLayoutByRouteMeta(router.currentRoute.value.meta))\n  // mount (force hydrate)\n  app.mount('#app', true).$nextTick(() => {\n    // set hydration state\n    globalState.setHydrate()\n    // reset: i18n language\n    i18n.set(globalState.userAgent.isZhUser ? Language.Chinese : Language.English)\n    // init user identity state\n    store.stores.identity.initOnClient()\n    // title surprise\n    document.addEventListener(\n      'visibilitychange',\n      (event) => {\n        // @ts-ignore\n        const isHidden = event.target?.hidden || event.target?.webkitHidden\n        const surprises = [\n          { favicon: '', title: 'FORBIDDEN' },\n          { favicon: '', title: 'FBI WARNING' },\n          // tltle: zero width character\n          { favicon: '', title: '' }\n        ]\n        const index = Math.floor(Math.random() * surprises.length)\n        isHidden ? runTitler(surprises[index]) : resetTitler()\n      },\n      false\n    )\n    // production only\n    if (isProd) {\n      consoleSlogan(i18n.t(LanguageKey.APP_SLOGAN)!, store.stores.appOption.data?.site_email)\n    }\n  })\n})\n"],"file":"index-174cd98d.js"}